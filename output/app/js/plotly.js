(function(){
shadow$provide[518]=function(fb,Z,qb,sa){function b(){if("function"!==typeof WeakMap)return null;var m=new WeakMap;b=function(){return m};return m}function y(m){"@babel/helpers - typeof";y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"===typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};return y(m)}function F(m,r){for(var u=0;u<r.length;u++){var v=r[u];v.enumerable=v.enumerable||!1;v.configurable=
!0;"value"in v&&(v.writable=!0);Object.defineProperty(m,v.key,v)}}function q(m,r,u){r&&F(m.prototype,r);u&&F(m,u);return m}function n(m,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(r&&r.prototype,{constructor:{value:m,writable:!0,configurable:!0}});r&&p(m,r)}function p(m,r){p=Object.setPrototypeOf||function(u,v){u.__proto__=v;return u};return p(m,r)}function h(m){var r=f();return function(){var u=d(m);if(r){var v=
d(this).constructor;u=Reflect.construct(u,arguments,v)}else u=u.apply(this,arguments);u=!u||"object"!==y(u)&&"function"!==typeof u?a(this):u;return u}}function a(m){if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function f(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(m){return!1}}
function d(m){d=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)};return d(m)}Object.defineProperty(sa,"__esModule",{value:!0});sa["default"]=function(m){var r=function(u){function v(D){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");D=w.call(this,D);D.p=Promise.resolve();D.resizeHandler=null;D.handlers={};D.syncWindowResize=D.syncWindowResize.bind(a(D));D.syncEventHandlers=D.syncEventHandlers.bind(a(D));D.attachUpdateEvents=
D.attachUpdateEvents.bind(a(D));D.getRef=D.getRef.bind(a(D));D.handleUpdate=D.handleUpdate.bind(a(D));D.figureCallback=D.figureCallback.bind(a(D));D.updatePlotly=D.updatePlotly.bind(a(D));return D}n(v,u);var w=h(v);q(v,[{key:"updatePlotly",value:function(D,C,x){var A=this;this.p=this.p.then(function(){if(!A.unmounting){if(!A.el)throw Error("Missing element reference");return m.react(A.el,{data:A.props.data,layout:A.props.layout,config:A.props.config,frames:A.props.frames})}}).then(function(){A.unmounting||
(A.syncWindowResize(D),A.syncEventHandlers(),A.figureCallback(C),x&&A.attachUpdateEvents())})["catch"](function(B){if(A.props.onError)A.props.onError(B)})}},{key:"componentDidMount",value:function(){this.unmounting=!1;this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(D){this.unmounting=!1;var C=D.frames&&D.frames.length?D.frames.length:0,x=this.props.frames&&this.props.frames.length?this.props.frames.length:0,A=void 0!==D.revision,B=D.revision!==this.props.revision;
(D.layout!==this.props.layout||D.data!==this.props.data||D.config!==this.props.config||x!==C||A&&(!A||B))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0;this.figureCallback(this.props.onPurge);this.resizeHandler&&g&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);this.removeUpdateEvents();m.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var D=this;this.el&&this.el.removeListener&&e.forEach(function(C){D.el.on(C,
D.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var D=this;this.el&&this.el.removeListener&&e.forEach(function(C){D.el.removeListener(C,D.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(D){if("function"===typeof D){var C=this.el;D({data:C.data,layout:C.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(D){var C=this;g&&(this.props.useResizeHandler&&
!this.resizeHandler?(this.resizeHandler=function(){return m.Plots.resize(C.el)},window.addEventListener("resize",this.resizeHandler),D&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(D){this.el=D;this.props.debug&&g&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var D=this;c.forEach(function(C){var x=D.props["on"+C],A=D.handlers[C],B=!!A;x&&!B?
D.addEventHandler(C,x):!x&&B?D.removeEventHandler(C):x&&B&&x!==A&&(D.removeEventHandler(C),D.addEventHandler(C,x))})}},{key:"addEventHandler",value:function(D,C){this.handlers[D]=C;this.el.on(this.getPlotlyEventName(D),this.handlers[D])}},{key:"removeEventHandler",value:function(D){this.el.removeListener(this.getPlotlyEventName(D),this.handlers[D]);delete this.handlers[D]}},{key:"getPlotlyEventName",value:function(D){return"plotly_"+D.toLowerCase()}},{key:"render",value:function(){return l["default"].createElement("div",
{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]);return v}(l.Component);r.propTypes={data:k["default"].arrayOf(k["default"].object),config:k["default"].object,layout:k["default"].object,frames:k["default"].arrayOf(k["default"].object),revision:k["default"].number,onInitialized:k["default"].func,onPurge:k["default"].func,onError:k["default"].func,onUpdate:k["default"].func,debug:k["default"].bool,style:k["default"].object,className:k["default"].string,
useResizeHandler:k["default"].bool,divId:k["default"].string};c.forEach(function(u){r.propTypes["on"+u]=k["default"].func});r.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}};return r};var l=function(m){if(m&&m.__esModule)return m;if(null===m||"object"!==y(m)&&"function"!==typeof m)return{"default":m};var r=b();if(r&&r.has(m))return r.get(m);var u={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor,w;for(w in m)if(Object.prototype.hasOwnProperty.call(m,
w)){var D=v?Object.getOwnPropertyDescriptor(m,w):null;D&&(D.get||D.set)?Object.defineProperty(u,w,D):u[w]=m[w]}u["default"]=m;r&&r.set(m,u);return u}(Z(5)),k=function(m){return m&&m.__esModule?m:{"default":m}}(Z(11)),c="AfterExport AfterPlot Animated AnimatingFrame AnimationInterrupted AutoSize BeforeExport ButtonClicked Click ClickAnnotation Deselect DoubleClick Framework Hover LegendClick LegendDoubleClick Relayout Relayouting Restyle Redraw Selected Selecting SliderChange SliderEnd SliderStart SunburstClick Transitioning TransitionInterrupted Unhover".split(" "),
e="plotly_restyle plotly_redraw plotly_relayout plotly_relayouting plotly_doubleclick plotly_animated plotly_sunburstclick".split(" "),g="undefined"!==typeof window};
shadow$provide[519]=function(fb,Z,qb,sa){(function(b){"object"===typeof sa&&"undefined"!==typeof qb?qb.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof fb?fb:"undefined"!==typeof self?self:this).Plotly=b()})(function(){return function(){function b(y,F,q){function n(a,f){if(!F[a]){if(!y[a]){var d="function"==typeof Z&&Z;if(!f&&d)return d(a,!0);if(p)return p(a,!0);f=Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",
f;}f=F[a]={exports:{}};y[a][0].call(f.exports,function(l){return n(y[a][1][l]||l)},f,f.exports,b,y,F,q)}return F[a].exports}for(var p="function"==typeof Z&&Z,h=0;h<q.length;h++)n(q[h]);return n}return b}()({1:[function(b,y,F){b=b("../src/lib");y={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;",
"X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;",
"X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover\x3e:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var q in y)F=q.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),b.addStyleRule(F,y[q])},{"../src/lib":749}],2:[function(b,y,F){y.exports=b("../src/transforms/aggregate")},{"../src/transforms/aggregate":1332}],3:[function(b,y,F){y.exports=
b("../src/traces/bar")},{"../src/traces/bar":898}],4:[function(b,y,F){y.exports=b("../src/traces/barpolar")},{"../src/traces/barpolar":911}],5:[function(b,y,F){y.exports=b("../src/traces/box")},{"../src/traces/box":921}],6:[function(b,y,F){y.exports=b("../src/components/calendars")},{"../src/components/calendars":613}],7:[function(b,y,F){y.exports=b("../src/traces/candlestick")},{"../src/traces/candlestick":930}],8:[function(b,y,F){y.exports=b("../src/traces/carpet")},{"../src/traces/carpet":949}],
9:[function(b,y,F){y.exports=b("../src/traces/choropleth")},{"../src/traces/choropleth":963}],10:[function(b,y,F){y.exports=b("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":970}],11:[function(b,y,F){y.exports=b("../src/traces/cone")},{"../src/traces/cone":976}],12:[function(b,y,F){y.exports=b("../src/traces/contour")},{"../src/traces/contour":991}],13:[function(b,y,F){y.exports=b("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1002}],14:[function(b,y,F){y.exports=
b("../src/core")},{"../src/core":726}],15:[function(b,y,F){y.exports=b("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1010}],16:[function(b,y,F){y.exports=b("../src/transforms/filter")},{"../src/transforms/filter":1333}],17:[function(b,y,F){y.exports=b("../src/traces/funnel")},{"../src/traces/funnel":1020}],18:[function(b,y,F){y.exports=b("../src/traces/funnelarea")},{"../src/traces/funnelarea":1029}],19:[function(b,y,F){y.exports=b("../src/transforms/groupby")},{"../src/transforms/groupby":1334}],
20:[function(b,y,F){y.exports=b("../src/traces/heatmap")},{"../src/traces/heatmap":1042}],21:[function(b,y,F){y.exports=b("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1052}],22:[function(b,y,F){y.exports=b("../src/traces/histogram")},{"../src/traces/histogram":1064}],23:[function(b,y,F){y.exports=b("../src/traces/histogram2d")},{"../src/traces/histogram2d":1070}],24:[function(b,y,F){y.exports=b("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1074}],25:[function(b,
y,F){y.exports=b("../src/traces/image")},{"../src/traces/image":1081}],26:[function(b,y,F){F=b("./core");F.register([b("./bar"),b("./box"),b("./heatmap"),b("./histogram"),b("./histogram2d"),b("./histogram2dcontour"),b("./contour"),b("./scatterternary"),b("./violin"),b("./funnel"),b("./waterfall"),b("./image"),b("./pie"),b("./sunburst"),b("./treemap"),b("./funnelarea"),b("./scatter3d"),b("./surface"),b("./isosurface"),b("./volume"),b("./mesh3d"),b("./cone"),b("./streamtube"),b("./scattergeo"),b("./choropleth"),
b("./scattergl"),b("./splom"),b("./pointcloud"),b("./heatmapgl"),b("./parcoords"),b("./parcats"),b("./scattermapbox"),b("./choroplethmapbox"),b("./densitymapbox"),b("./sankey"),b("./indicator"),b("./table"),b("./carpet"),b("./scattercarpet"),b("./contourcarpet"),b("./ohlc"),b("./candlestick"),b("./scatterpolar"),b("./scatterpolargl"),b("./barpolar")]);F.register([b("./aggregate"),b("./filter"),b("./groupby"),b("./sort")]);F.register([b("./calendars")]);y.exports=F},{"./aggregate":2,"./bar":3,"./barpolar":4,
"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./image":25,"./indicator":27,"./isosurface":28,"./mesh3d":29,"./ohlc":30,"./parcats":31,"./parcoords":32,"./pie":33,"./pointcloud":34,"./sankey":35,"./scatter3d":36,"./scattercarpet":37,
"./scattergeo":38,"./scattergl":39,"./scattermapbox":40,"./scatterpolar":41,"./scatterpolargl":42,"./scatterternary":43,"./sort":44,"./splom":45,"./streamtube":46,"./sunburst":47,"./surface":48,"./table":49,"./treemap":50,"./violin":51,"./volume":52,"./waterfall":53}],27:[function(b,y,F){y.exports=b("../src/traces/indicator")},{"../src/traces/indicator":1089}],28:[function(b,y,F){y.exports=b("../src/traces/isosurface")},{"../src/traces/isosurface":1095}],29:[function(b,y,F){y.exports=b("../src/traces/mesh3d")},
{"../src/traces/mesh3d":1100}],30:[function(b,y,F){y.exports=b("../src/traces/ohlc")},{"../src/traces/ohlc":1105}],31:[function(b,y,F){y.exports=b("../src/traces/parcats")},{"../src/traces/parcats":1114}],32:[function(b,y,F){y.exports=b("../src/traces/parcoords")},{"../src/traces/parcoords":1124}],33:[function(b,y,F){y.exports=b("../src/traces/pie")},{"../src/traces/pie":1135}],34:[function(b,y,F){y.exports=b("../src/traces/pointcloud")},{"../src/traces/pointcloud":1144}],35:[function(b,y,F){y.exports=
b("../src/traces/sankey")},{"../src/traces/sankey":1150}],36:[function(b,y,F){y.exports=b("../src/traces/scatter3d")},{"../src/traces/scatter3d":1187}],37:[function(b,y,F){y.exports=b("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1194}],38:[function(b,y,F){y.exports=b("../src/traces/scattergeo")},{"../src/traces/scattergeo":1202}],39:[function(b,y,F){y.exports=b("../src/traces/scattergl")},{"../src/traces/scattergl":1215}],40:[function(b,y,F){y.exports=b("../src/traces/scattermapbox")},
{"../src/traces/scattermapbox":1225}],41:[function(b,y,F){y.exports=b("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1233}],42:[function(b,y,F){y.exports=b("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1240}],43:[function(b,y,F){y.exports=b("../src/traces/scatterternary")},{"../src/traces/scatterternary":1248}],44:[function(b,y,F){y.exports=b("../src/transforms/sort")},{"../src/transforms/sort":1336}],45:[function(b,y,F){y.exports=b("../src/traces/splom")},{"../src/traces/splom":1257}],
46:[function(b,y,F){y.exports=b("../src/traces/streamtube")},{"../src/traces/streamtube":1265}],47:[function(b,y,F){y.exports=b("../src/traces/sunburst")},{"../src/traces/sunburst":1273}],48:[function(b,y,F){y.exports=b("../src/traces/surface")},{"../src/traces/surface":1282}],49:[function(b,y,F){y.exports=b("../src/traces/table")},{"../src/traces/table":1290}],50:[function(b,y,F){y.exports=b("../src/traces/treemap")},{"../src/traces/treemap":1299}],51:[function(b,y,F){y.exports=b("../src/traces/violin")},
{"../src/traces/violin":1311}],52:[function(b,y,F){y.exports=b("../src/traces/volume")},{"../src/traces/volume":1319}],53:[function(b,y,F){y.exports=b("../src/traces/waterfall")},{"../src/traces/waterfall":1327}],54:[function(b,y,F){function q(f,d){this._controllerNames=Object.keys(f);this._controllerList=this._controllerNames.map(function(l){return f[l]});this._mode=d;this._active=f[d];this._active||(this._mode="turntable",this._active=f.turntable);this.modes=this._controllerNames;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}y.exports=function(f){f=f||{};var d=f.eye||[0,0,1],l=f.center||[0,0,0],k=f.up||[0,1,0],c=f.distanceLimits||[0,Infinity];f=f.mode||"turntable";var e=n(),g=p(),m=h();e.setDistanceLimits(c[0],c[1]);e.lookAt(0,d,l,k);g.setDistanceLimits(c[0],c[1]);g.lookAt(0,d,l,k);m.setDistanceLimits(c[0],c[1]);m.lookAt(0,
d,l,k);return new q({turntable:e,orbit:g,matrix:m},f)};var n=b("turntable-camera-controller"),p=b("orbit-camera-controller"),h=b("matrix-camera-controller"),a=q.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(f){for(var d=f[0],l=[],k=0;k<f[1];++k)l.push("a"+k);f="var cc\x3dthis._controllerList;for(var i\x3d0;i\x3ccc.length;++i){cc[i]."+f[0]+"("+l.join()+")}";a[d]=Function.apply(null,l.concat(f))});
a.recalcMatrix=function(f){this._active.recalcMatrix(f)};a.getDistance=function(f){return this._active.getDistance(f)};a.getDistanceLimits=function(f){return this._active.getDistanceLimits(f)};a.lastT=function(){return this._active.lastT()};a.setMode=function(f){if(f!==this._mode){var d=this._controllerNames.indexOf(f);if(!(0>d)){var l=this._active;d=this._controllerList[d];var k=Math.max(l.lastT(),d.lastT());l.recalcMatrix(k);d.setMatrix(k,l.computedMatrix);this._active=d;this._mode=f;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};a.getMode=function(){return this._mode}},{"matrix-camera-controller":454,"orbit-camera-controller":475,"turntable-camera-controller":553}],55:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F,b("d3-array"),b("d3-collection"),b("d3-shape"),b("elementary-circuits-directed-graph")):
n(q.d3=q.d3||{},q.d3,q.d3,q.d3,null)})(this,function(q,n,p,h,a){function f(la){return la.target.depth}function d(la,pa){return la.sourceLinks.length?la.depth:pa-1}function l(la){return function(){return la}}function k(la,pa){return e(la.source,pa.source)||la.index-pa.index}function c(la,pa){return e(la.target,pa.target)||la.index-pa.index}function e(la,pa){return la.partOfCycle===pa.partOfCycle?la.y0-pa.y0:"top"===la.circularLinkType||"bottom"===pa.circularLinkType?-1:1}function g(la){return la.value}
function m(la){return(la.y0+la.y1)/2}function r(la){return m(la.source)}function u(la){return m(la.target)}function v(la){return la.index}function w(la){return la.nodes}function D(la){return la.links}function C(la,pa){la=la.get(pa);if(!la)throw Error("missing: "+pa);return la}function x(la,pa,qa){var oa=0;if(null===qa){var ka=[];for(pa=0;pa<la.links.length;pa++){var ra=la.links[pa],ha=ra.source.index;ra=ra.target.index;ka[ha]||(ka[ha]=[]);ka[ra]||(ka[ra]=[]);-1===ka[ha].indexOf(ra)&&ka[ha].push(ra)}ka=
a(ka);ka.sort(function(wa,na){return wa.length-na.length});var ma={};for(pa=0;pa<ka.length;pa++)ha=ka[pa].slice(-2),ma[ha[0]]||(ma[ha[0]]={}),ma[ha[0]][ha[1]]=!0;la.links.forEach(function(wa){var na=wa.target.index,ya=wa.source.index;na===ya||ma[ya]&&ma[ya][na]?(wa.circular=!0,wa.circularLinkID=oa,oa+=1):wa.circular=!1})}else la.links.forEach(function(wa){wa.source[qa]<wa.target[qa]?wa.circular=!1:(wa.circular=!0,wa.circularLinkID=oa,oa+=1)})}function A(la,pa){var qa=0,oa=0;la.links.forEach(function(ka){ka.circular&&
(ka.circularLinkType=ka.source.circularLinkType||ka.target.circularLinkType?ka.source.circularLinkType?ka.source.circularLinkType:ka.target.circularLinkType:qa<oa?"top":"bottom","top"==ka.circularLinkType?qa+=1:oa+=1,la.nodes.forEach(function(ra){if(pa(ra)==pa(ka.source)||pa(ra)==pa(ka.target))ra.circularLinkType=ka.circularLinkType}))});la.links.forEach(function(ka){ka.circular&&(ka.source.circularLinkType==ka.target.circularLinkType&&(ka.circularLinkType=ka.source.circularLinkType),ea(ka,pa)&&(ka.circularLinkType=
ka.source.circularLinkType))})}function B(la){return Math.atan(Math.abs(la.target.x0-la.source.x1)/Math.abs(la.y1-la.y0))}function t(la,pa){var qa=0;la.sourceLinks.forEach(function(ka){qa=ka.circular&&!ea(ka,pa)?qa+1:qa});var oa=0;la.targetLinks.forEach(function(ka){oa=ka.circular&&!ea(ka,pa)?oa+1:oa});return qa+oa}function G(la){var pa=0;la.source.sourceLinks.forEach(function(oa){pa=oa.circular?pa+1:pa});var qa=0;la.target.targetLinks.forEach(function(oa){qa=oa.circular?qa+1:qa});return 1<pa||1<
qa?!1:!0}function H(la,pa,qa){la.sort(J);la.forEach(function(oa,ka){var ra=0;if(!ea(oa,qa)||!G(oa)){var ha=0;for(ha;ha<ka;ha++){var ma=la[ka];var wa=la[ha];ma=ma.source.column<wa.target.column?!1:ma.target.column>wa.source.column?!1:!0;ma&&(ma=la[ha].circularPathData.verticalBuffer+la[ha].width/2+pa,ra=ma>ra?ma:ra)}}oa.circularPathData.verticalBuffer=ra+oa.width/2});return la}function I(la,pa,qa,oa){var ka=n.min(la.links,function(ha){return ha.source.y0});la.links.forEach(function(ha){ha.circular&&
(ha.circularPathData={})});var ra=la.links.filter(function(ha){return"top"==ha.circularLinkType});H(ra,pa,oa);ra=la.links.filter(function(ha){return"bottom"==ha.circularLinkType});H(ra,pa,oa);la.links.forEach(function(ha){if(ha.circular){ha.circularPathData.arcRadius=ha.width+10;ha.circularPathData.leftNodeBuffer=5;ha.circularPathData.rightNodeBuffer=5;ha.circularPathData.sourceWidth=ha.source.x1-ha.source.x0;ha.circularPathData.sourceX=ha.source.x0+ha.circularPathData.sourceWidth;ha.circularPathData.targetX=
ha.target.x0;ha.circularPathData.sourceY=ha.y0;ha.circularPathData.targetY=ha.y1;if(ea(ha,oa)&&G(ha))ha.circularPathData.leftSmallArcRadius=10+ha.width/2,ha.circularPathData.leftLargeArcRadius=10+ha.width/2,ha.circularPathData.rightSmallArcRadius=10+ha.width/2,ha.circularPathData.rightLargeArcRadius=10+ha.width/2,"bottom"==ha.circularLinkType?(ha.circularPathData.verticalFullExtent=ha.source.y1+25+ha.circularPathData.verticalBuffer,ha.circularPathData.verticalLeftInnerExtent=ha.circularPathData.verticalFullExtent-
ha.circularPathData.leftLargeArcRadius,ha.circularPathData.verticalRightInnerExtent=ha.circularPathData.verticalFullExtent-ha.circularPathData.rightLargeArcRadius):(ha.circularPathData.verticalFullExtent=ha.source.y0-25-ha.circularPathData.verticalBuffer,ha.circularPathData.verticalLeftInnerExtent=ha.circularPathData.verticalFullExtent+ha.circularPathData.leftLargeArcRadius,ha.circularPathData.verticalRightInnerExtent=ha.circularPathData.verticalFullExtent+ha.circularPathData.rightLargeArcRadius);
else{var ma=ha.source.column,wa=ha.circularLinkType,na=la.links.filter(function(Fa){return Fa.source.column==ma&&Fa.circularLinkType==wa});"bottom"==ha.circularLinkType?na.sort(E):na.sort(L);var ya=0;na.forEach(function(Fa,Ha){Fa.circularLinkID==ha.circularLinkID&&(ha.circularPathData.leftSmallArcRadius=10+ha.width/2+ya,ha.circularPathData.leftLargeArcRadius=10+ha.width/2+Ha*pa+ya);ya+=Fa.width});ma=ha.target.column;na=la.links.filter(function(Fa){return Fa.target.column==ma&&Fa.circularLinkType==
wa});"bottom"==ha.circularLinkType?na.sort(N):na.sort(K);ya=0;na.forEach(function(Fa,Ha){Fa.circularLinkID==ha.circularLinkID&&(ha.circularPathData.rightSmallArcRadius=10+ha.width/2+ya,ha.circularPathData.rightLargeArcRadius=10+ha.width/2+Ha*pa+ya);ya+=Fa.width});"bottom"==ha.circularLinkType?(ha.circularPathData.verticalFullExtent=Math.max(qa,ha.source.y1,ha.target.y1)+25+ha.circularPathData.verticalBuffer,ha.circularPathData.verticalLeftInnerExtent=ha.circularPathData.verticalFullExtent-ha.circularPathData.leftLargeArcRadius,
ha.circularPathData.verticalRightInnerExtent=ha.circularPathData.verticalFullExtent-ha.circularPathData.rightLargeArcRadius):(ha.circularPathData.verticalFullExtent=ka-25-ha.circularPathData.verticalBuffer,ha.circularPathData.verticalLeftInnerExtent=ha.circularPathData.verticalFullExtent+ha.circularPathData.leftLargeArcRadius,ha.circularPathData.verticalRightInnerExtent=ha.circularPathData.verticalFullExtent+ha.circularPathData.rightLargeArcRadius)}ha.circularPathData.leftInnerExtent=ha.circularPathData.sourceX+
ha.circularPathData.leftNodeBuffer;ha.circularPathData.rightInnerExtent=ha.circularPathData.targetX-ha.circularPathData.rightNodeBuffer;ha.circularPathData.leftFullExtent=ha.circularPathData.sourceX+ha.circularPathData.leftLargeArcRadius+ha.circularPathData.leftNodeBuffer;ha.circularPathData.rightFullExtent=ha.circularPathData.targetX-ha.circularPathData.rightLargeArcRadius-ha.circularPathData.rightNodeBuffer}ha.circular?ha.path="top"==ha.circularLinkType?"M"+ha.circularPathData.sourceX+" "+ha.circularPathData.sourceY+
" L"+ha.circularPathData.leftInnerExtent+" "+ha.circularPathData.sourceY+" A"+ha.circularPathData.leftLargeArcRadius+" "+ha.circularPathData.leftSmallArcRadius+" 0 0 0 "+ha.circularPathData.leftFullExtent+" "+(ha.circularPathData.sourceY-ha.circularPathData.leftSmallArcRadius)+" L"+ha.circularPathData.leftFullExtent+" "+ha.circularPathData.verticalLeftInnerExtent+" A"+ha.circularPathData.leftLargeArcRadius+" "+ha.circularPathData.leftLargeArcRadius+" 0 0 0 "+ha.circularPathData.leftInnerExtent+" "+
ha.circularPathData.verticalFullExtent+" L"+ha.circularPathData.rightInnerExtent+" "+ha.circularPathData.verticalFullExtent+" A"+ha.circularPathData.rightLargeArcRadius+" "+ha.circularPathData.rightLargeArcRadius+" 0 0 0 "+ha.circularPathData.rightFullExtent+" "+ha.circularPathData.verticalRightInnerExtent+" L"+ha.circularPathData.rightFullExtent+" "+(ha.circularPathData.targetY-ha.circularPathData.rightSmallArcRadius)+" A"+ha.circularPathData.rightLargeArcRadius+" "+ha.circularPathData.rightSmallArcRadius+
" 0 0 0 "+ha.circularPathData.rightInnerExtent+" "+ha.circularPathData.targetY+" L"+ha.circularPathData.targetX+" "+ha.circularPathData.targetY:"M"+ha.circularPathData.sourceX+" "+ha.circularPathData.sourceY+" L"+ha.circularPathData.leftInnerExtent+" "+ha.circularPathData.sourceY+" A"+ha.circularPathData.leftLargeArcRadius+" "+ha.circularPathData.leftSmallArcRadius+" 0 0 1 "+ha.circularPathData.leftFullExtent+" "+(ha.circularPathData.sourceY+ha.circularPathData.leftSmallArcRadius)+" L"+ha.circularPathData.leftFullExtent+
" "+ha.circularPathData.verticalLeftInnerExtent+" A"+ha.circularPathData.leftLargeArcRadius+" "+ha.circularPathData.leftLargeArcRadius+" 0 0 1 "+ha.circularPathData.leftInnerExtent+" "+ha.circularPathData.verticalFullExtent+" L"+ha.circularPathData.rightInnerExtent+" "+ha.circularPathData.verticalFullExtent+" A"+ha.circularPathData.rightLargeArcRadius+" "+ha.circularPathData.rightLargeArcRadius+" 0 0 1 "+ha.circularPathData.rightFullExtent+" "+ha.circularPathData.verticalRightInnerExtent+" L"+ha.circularPathData.rightFullExtent+
" "+(ha.circularPathData.targetY+ha.circularPathData.rightSmallArcRadius)+" A"+ha.circularPathData.rightLargeArcRadius+" "+ha.circularPathData.rightSmallArcRadius+" 0 0 1 "+ha.circularPathData.rightInnerExtent+" "+ha.circularPathData.targetY+" L"+ha.circularPathData.targetX+" "+ha.circularPathData.targetY:(na=h.linkHorizontal().source(function(Fa){return[Fa.source.x0+(Fa.source.x1-Fa.source.x0),Fa.y0]}).target(function(Fa){return[Fa.target.x0,Fa.y1]}),ha.path=na(ha))})}function J(la,pa){return O(la)==
O(pa)?"bottom"==la.circularLinkType?E(la,pa):L(la,pa):O(pa)-O(la)}function L(la,pa){return la.y0-pa.y0}function E(la,pa){return pa.y0-la.y0}function K(la,pa){return la.y1-pa.y1}function N(la,pa){return pa.y1-la.y1}function O(la){return la.target.column-la.source.column}function Q(la,pa){var qa=B(la);pa=(pa.target.x0-pa.source.x1)/Math.tan(qa);return"up"==Y(la)?la.y1+pa:la.y1-pa}function P(la,pa){var qa=B(la);pa=(pa.target.x0-pa.source.x1)/Math.tan(qa);return"up"==Y(la)?la.y1-pa:la.y1+pa}function T(la,
pa,qa,oa){la.links.forEach(function(ka){if(!ka.circular&&1<ka.target.column-ka.source.column){var ra=ka.source.column+1,ha=ka.target.column-1,ma=1,wa=ha-ra+1;for(ma=1;ra<=ha;ra++,ma++)la.nodes.forEach(function(na){if(na.column==ra){var ya=ma/(wa+1),Fa=Math.pow(1-ya,3)*ka.y0+3*ya*Math.pow(1-ya,2)*ka.y0+3*Math.pow(ya,2)*(1-ya)*ka.y1+Math.pow(ya,3)*ka.y1;ya=Fa-ka.width/2;Fa+=ka.width/2;if(ya>na.y0&&ya<na.y1){var Ha=na.y1-ya+10;Ha="bottom"==na.circularLinkType?Ha:-Ha;na=V(na,Ha,pa,qa);la.nodes.forEach(function(eb){oa(eb)!=
oa(na)&&eb.column==na.column&&(na.y0>eb.y0&&na.y0<eb.y1||na.y1>eb.y0&&na.y1<eb.y1||na.y0<eb.y0&&na.y1>eb.y1)&&V(eb,Ha,pa,qa)})}else Fa>na.y0&&Fa<na.y1?(Ha=Fa-na.y0+10,na=V(na,Ha,pa,qa),la.nodes.forEach(function(eb){oa(eb)!=oa(na)&&eb.column==na.column&&eb.y0<na.y1&&eb.y1>na.y1&&V(eb,Ha,pa,qa)})):ya<na.y0&&Fa>na.y1&&(Ha=Fa-na.y0+10,na=V(na,Ha,pa,qa),la.nodes.forEach(function(eb){oa(eb)!=oa(na)&&eb.column==na.column&&eb.y0<na.y1&&eb.y1>na.y1&&V(eb,Ha,pa,qa)}))}})}})}function V(la,pa,qa,oa){la.y0+pa>=
qa&&la.y1+pa<=oa&&(la.y0+=pa,la.y1+=pa,la.targetLinks.forEach(function(ka){ka.y1+=pa}),la.sourceLinks.forEach(function(ka){ka.y0+=pa}));return la}function aa(la,pa,qa,oa){la.nodes.forEach(function(ka){oa&&ka.y+(ka.y1-ka.y0)>pa&&(ka.y-=ka.y+(ka.y1-ka.y0)-pa);var ra=la.links.filter(function(wa){return qa(wa.source)==qa(ka)}),ha=ra.length;1<ha&&ra.sort(function(wa,na){if(!wa.circular&&!na.circular)if(wa.target.column!=na.target.column&&Y(wa)==Y(na)){if(wa.target.column>na.target.column)return na=P(na,
wa),wa.y1-na;if(na.target.column>wa.target.column)return P(wa,na)-na.y1}else return wa.y1-na.y1;if(wa.circular&&!na.circular)return"top"==wa.circularLinkType?-1:1;if(na.circular&&!wa.circular)return"top"==na.circularLinkType?1:-1;if(wa.circular&&na.circular)return wa.circularLinkType===na.circularLinkType&&"top"==wa.circularLinkType?wa.target.column===na.target.column?wa.target.y1-na.target.y1:na.target.column-wa.target.column:wa.circularLinkType===na.circularLinkType&&"bottom"==wa.circularLinkType?
wa.target.column===na.target.column?na.target.y1-wa.target.y1:wa.target.column-na.target.column:"top"==wa.circularLinkType?-1:1});var ma=ka.y0;ra.forEach(function(wa){wa.y0=ma+wa.width/2;ma+=wa.width});ra.forEach(function(wa,na){if("bottom"==wa.circularLinkType){na+=1;var ya=0;for(na;na<ha;na++)ya+=ra[na].width;wa.y0=ka.y1-ya-wa.width/2}})})}function ba(la,pa,qa){la.nodes.forEach(function(oa){var ka=la.links.filter(function(ma){return qa(ma.target)==qa(oa)}),ra=ka.length;1<ra&&ka.sort(function(ma,
wa){if(!ma.circular&&!wa.circular)if(ma.source.column!=wa.source.column&&Y(ma)==Y(wa)){if(wa.source.column<ma.source.column)return wa=Q(wa,ma),ma.y0-wa;if(ma.source.column<wa.source.column)return Q(ma,wa)-wa.y0}else return ma.y0-wa.y0;if(ma.circular&&!wa.circular)return"top"==ma.circularLinkType?-1:1;if(wa.circular&&!ma.circular)return"top"==wa.circularLinkType?1:-1;if(ma.circular&&wa.circular)return ma.circularLinkType===wa.circularLinkType&&"top"==ma.circularLinkType?ma.source.column===wa.source.column?
ma.source.y1-wa.source.y1:ma.source.column-wa.source.column:ma.circularLinkType===wa.circularLinkType&&"bottom"==ma.circularLinkType?ma.source.column===wa.source.column?ma.source.y1-wa.source.y1:wa.source.column-ma.source.column:"top"==ma.circularLinkType?-1:1});var ha=oa.y0;ka.forEach(function(ma){ma.y1=ha+ma.width/2;ha+=ma.width});ka.forEach(function(ma,wa){if("bottom"==ma.circularLinkType){wa+=1;var na=0;for(wa;wa<ra;wa++)na+=ka[wa].width;ma.y1=oa.y1-na-ma.width/2}})})}function Y(la){return 0<
la.y0-la.y1?"up":"down"}function ea(la,pa){return pa(la.source)==pa(la.target)}function da(la,pa,qa){var oa=la.nodes;la=la.links;var ka=!1,ra=!1;la.forEach(function(na){"top"==na.circularLinkType?ka=!0:"bottom"==na.circularLinkType&&(ra=!0)});if(0==ka||0==ra){var ha=n.min(oa,function(na){return na.y0}),ma=n.max(oa,function(na){return na.y1}),wa=(qa-pa)/(ma-ha);oa.forEach(function(na){var ya=(na.y1-na.y0)*wa;na.y0=(na.y0-ha)*wa;na.y1=na.y0+ya});la.forEach(function(na){na.y0=(na.y0-ha)*wa;na.y1=(na.y1-
ha)*wa;na.width*=wa})}}a=a&&a.hasOwnProperty("default")?a["default"]:a;var ca="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(la){return typeof la}:function(la){return la&&"function"===typeof Symbol&&la.constructor===Symbol&&la!==Symbol.prototype?"symbol":typeof la};q.sankeyCircular=function(){function la(){var Qa={nodes:ib.apply(null,arguments),links:Pa.apply(null,arguments)};pa(Qa);x(Qa,hb,Ka);qa(Qa);ra(Qa);A(Qa,hb);ha(Qa,sb,hb);ma(Qa);for(var Xa=0;4>Xa;Xa++)aa(Qa,Fa,hb),
ba(Qa,Fa,hb),T(Qa,na,Fa,hb),aa(Qa,Fa,hb),ba(Qa,Fa,hb);da(Qa,na,Fa);I(Qa,tb,Fa,hb);return Qa}function pa(Qa){Qa.nodes.forEach(function(pb,db){pb.index=db;pb.sourceLinks=[];pb.targetLinks=[]});var Xa=p.map(Qa.nodes,hb);Qa.links.forEach(function(pb,db){pb.index=db;db=pb.source;var Ia=pb.target;"object"!==("undefined"===typeof db?"undefined":ca(db))&&(db=pb.source=C(Xa,db));"object"!==("undefined"===typeof Ia?"undefined":ca(Ia))&&(Ia=pb.target=C(Xa,Ia));db.sourceLinks.push(pb);Ia.targetLinks.push(pb)});
return Qa}function qa(Qa){Qa.nodes.forEach(function(Xa){Xa.partOfCycle=!1;Xa.value=Math.max(n.sum(Xa.sourceLinks,g),n.sum(Xa.targetLinks,g));Xa.sourceLinks.forEach(function(pb){pb.circular&&(Xa.partOfCycle=!0,Xa.circularLinkType=pb.circularLinkType)});Xa.targetLinks.forEach(function(pb){pb.circular&&(Xa.partOfCycle=!0,Xa.circularLinkType=pb.circularLinkType)})})}function oa(Qa){var Xa=0,pb=0,db=0,Ia=0,Ua=n.max(Qa.nodes,function($a){return $a.column});Qa.links.forEach(function($a){$a.circular&&("top"==
$a.circularLinkType?Xa+=$a.width:pb+=$a.width,0==$a.target.column&&(Ia+=$a.width),$a.source.column==Ua&&(db+=$a.width))});Xa=0<Xa?Xa+25+10:Xa;pb=0<pb?pb+25+10:pb;db=0<db?db+25+10:db;Ia=0<Ia?Ia+25+10:Ia;return{top:Xa,bottom:pb,left:Ia,right:db}}function ka(Qa,Xa){var pb=n.max(Qa.nodes,function(Ua){return Ua.column}),db=ya-wa,Ia=Fa-na;db/=db+Xa.right+Xa.left;Ia/=Ia+Xa.top+Xa.bottom;wa=wa*db+Xa.left;ya=0==Xa.right?ya:ya*db;na=na*Ia+Xa.top;Fa*=Ia;Qa.nodes.forEach(function(Ua){Ua.x0=wa+(ya-wa-Ha)/pb*Ua.column;
Ua.x1=Ua.x0+Ha});return Ia}function ra(Qa){var Xa;var pb=Qa.nodes;var db=[];for(Xa=0;pb.length;++Xa,pb=db,db=[])pb.forEach(function(Ia){Ia.depth=Xa;Ia.sourceLinks.forEach(function(Ua){0>db.indexOf(Ua.target)&&!Ua.circular&&db.push(Ua.target)})});pb=Qa.nodes;db=[];for(Xa=0;pb.length;++Xa,pb=db,db=[])pb.forEach(function(Ia){Ia.height=Xa;Ia.targetLinks.forEach(function(Ua){0>db.indexOf(Ua.source)&&!Ua.circular&&db.push(Ua.source)})});Qa.nodes.forEach(function(Ia){Ia.column=Math.floor(ob.call(null,Ia,
Xa))})}function ha(Qa,Xa,pb){function db(xa,Ga){var Va=Ua.length;Ua.forEach(function(gb){var Ma=gb.length,cb=gb[0].depth;gb.forEach(function(Sa){if((Sa.sourceLinks.length||Sa.targetLinks.length)&&!(Sa.partOfCycle&&0<t(Sa,Ga)))if(0==cb&&1==Ma){var lb=Sa.y1-Sa.y0;Sa.y0=Fa/2-lb/2;Sa.y1=Fa/2+lb/2}else if(cb==Va-1&&1==Ma)lb=Sa.y1-Sa.y0,Sa.y0=Fa/2-lb/2,Sa.y1=Fa/2+lb/2;else{lb=n.mean(Sa.sourceLinks,u);var rb=n.mean(Sa.targetLinks,r);lb=((lb&&rb?(lb+rb)/2:lb||rb)-m(Sa))*xa;Sa.y0+=lb;Sa.y1+=lb}})})}function Ia(){Ua.forEach(function(xa){var Ga=
na,Va=xa.length,gb;xa.sort(e);for(gb=0;gb<Va;++gb){var Ma=xa[gb];var cb=Ga-Ma.y0;0<cb&&(Ma.y0+=cb,Ma.y1+=cb);Ga=Ma.y1+eb}cb=Ga-eb-Fa;if(0<cb)for(Ga=Ma.y0-=cb,Ma.y1-=cb,gb=Va-2;0<=gb;--gb)Ma=xa[gb],cb=Ma.y1+eb-Ga,0<cb&&(Ma.y0-=cb,Ma.y1-=cb),Ga=Ma.y0})}var Ua=p.nest().key(function(xa){return xa.column}).sortKeys(n.ascending).entries(Qa.nodes).map(function(xa){return xa.values});(function(xa){if(Aa){var Ga=Infinity;Ua.forEach(function(cb){cb=Fa*Aa/(cb.length+1);Ga=cb<Ga?cb:Ga});eb=Ga}var Va=n.min(Ua,
function(cb){return(Fa-na-(cb.length-1)*eb)/n.sum(cb,g)});Va*=.3;Qa.links.forEach(function(cb){cb.width=cb.value*Va});var gb=oa(Qa),Ma=ka(Qa,gb);Va*=Ma;Qa.links.forEach(function(cb){cb.width=cb.value*Va});Ua.forEach(function(cb){var Sa=cb.length;cb.forEach(function(lb,rb){lb.depth==Ua.length-1&&1==Sa?lb.y0=Fa/2-lb.value*Va:0==lb.depth&&1==Sa?lb.y0=Fa/2-lb.value*Va:lb.partOfCycle?0==t(lb,xa)?lb.y0=Fa/2+rb:lb.y0="top"==lb.circularLinkType?na+rb:Fa-lb.value*Va-rb:lb.y0=0==gb.top||0==gb.bottom?(Fa-na)/
Sa*rb:(Fa-na)/2-Sa/2+rb;lb.y1=lb.y0+lb.value*Va})})})(pb);Ia();for(var $a=1;0<Xa;--Xa)db($a*=.99,pb),Ia()}function ma(Qa){Qa.nodes.forEach(function(Xa){Xa.sourceLinks.sort(c);Xa.targetLinks.sort(k)});Qa.nodes.forEach(function(Xa){var pb=Xa.y0,db=pb,Ia=Xa.y1,Ua=Ia;Xa.sourceLinks.forEach(function($a){$a.circular?($a.y0=Ia-$a.width/2,Ia-=$a.width):($a.y0=pb+$a.width/2,pb+=$a.width)});Xa.targetLinks.forEach(function($a){$a.circular?($a.y1=Ua-$a.width/2,Ua-=$a.width):($a.y1=db+$a.width/2,db+=$a.width)})})}
var wa=0,na=0,ya=1,Fa=1,Ha=24,eb,hb=v,ob=d,ib=w,Pa=D,sb=32,tb=2,Aa,Ka=null;la.nodeId=function(Qa){return arguments.length?(hb="function"===typeof Qa?Qa:l(Qa),la):hb};la.nodeAlign=function(Qa){return arguments.length?(ob="function"===typeof Qa?Qa:l(Qa),la):ob};la.nodeWidth=function(Qa){return arguments.length?(Ha=+Qa,la):Ha};la.nodePadding=function(Qa){return arguments.length?(eb=+Qa,la):eb};la.nodes=function(Qa){return arguments.length?(ib="function"===typeof Qa?Qa:l(Qa),la):ib};la.links=function(Qa){return arguments.length?
(Pa="function"===typeof Qa?Qa:l(Qa),la):Pa};la.size=function(Qa){return arguments.length?(wa=na=0,ya=+Qa[0],Fa=+Qa[1],la):[ya-wa,Fa-na]};la.extent=function(Qa){return arguments.length?(wa=+Qa[0][0],ya=+Qa[1][0],na=+Qa[0][1],Fa=+Qa[1][1],la):[[wa,na],[ya,Fa]]};la.iterations=function(Qa){return arguments.length?(sb=+Qa,la):sb};la.circularLinkGap=function(Qa){return arguments.length?(tb=+Qa,la):tb};la.nodePaddingRatio=function(Qa){return arguments.length?(Aa=+Qa,la):Aa};la.sortNodes=function(Qa){return arguments.length?
(Ka=Qa,la):Ka};la.update=function(Qa){A(Qa,hb);ma(Qa);Qa.links.forEach(function(Xa){Xa.circular&&(Xa.circularLinkType=Xa.y0+Xa.y1<Fa?"top":"bottom",Xa.source.circularLinkType=Xa.circularLinkType,Xa.target.circularLinkType=Xa.circularLinkType)});aa(Qa,Fa,hb,!1);ba(Qa,Fa,hb);I(Qa,tb,Fa,hb);return Qa};return la};q.sankeyCenter=function(la){return la.targetLinks.length?la.depth:la.sourceLinks.length?n.min(la.sourceLinks,f)-1:0};q.sankeyLeft=function(la){return la.depth};q.sankeyRight=function(la,pa){return pa-
1-la.height};q.sankeyJustify=d;Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165,"elementary-circuits-directed-graph":179}],56:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F,b("d3-array"),b("d3-collection"),b("d3-shape")):n(q.d3=q.d3||{},q.d3,q.d3,q.d3)})(this,function(q,n,p,h){function a(A){return A.target.depth}function f(A,B){return A.sourceLinks.length?A.depth:B-1}function d(A){return function(){return A}}function l(A,
B){return c(A.source,B.source)||A.index-B.index}function k(A,B){return c(A.target,B.target)||A.index-B.index}function c(A,B){return A.y0-B.y0}function e(A){return A.value}function g(A){return(A.y0+A.y1)/2}function m(A){return g(A.source)*A.value}function r(A){return g(A.target)*A.value}function u(A){return A.index}function v(A){return A.nodes}function w(A){return A.links}function D(A,B){A=A.get(B);if(!A)throw Error("missing: "+B);return A}function C(A){return[A.source.x1,A.y0]}function x(A){return[A.target.x0,
A.y1]}q.sankey=function(){function A(){var Y={nodes:T.apply(null,arguments),links:V.apply(null,arguments)};B(Y);t(Y);G(Y);H(Y,aa);I(Y);return Y}function B(Y){Y.nodes.forEach(function(da,ca){da.index=ca;da.sourceLinks=[];da.targetLinks=[]});var ea=p.map(Y.nodes,Q);Y.links.forEach(function(da,ca){da.index=ca;ca=da.source;var la=da.target;"object"!==typeof ca&&(ca=da.source=D(ea,ca));"object"!==typeof la&&(la=da.target=D(ea,la));ca.sourceLinks.push(da);la.targetLinks.push(da)})}function t(Y){Y.nodes.forEach(function(ea){ea.value=
Math.max(n.sum(ea.sourceLinks,e),n.sum(ea.targetLinks,e))})}function G(Y){var ea;var da=Y.nodes;var ca=[];for(ea=0;da.length;++ea,da=ca,ca=[])da.forEach(function(pa){pa.depth=ea;pa.sourceLinks.forEach(function(qa){0>ca.indexOf(qa.target)&&ca.push(qa.target)})});da=Y.nodes;ca=[];for(ea=0;da.length;++ea,da=ca,ca=[])da.forEach(function(pa){pa.height=ea;pa.targetLinks.forEach(function(qa){0>ca.indexOf(qa.source)&&ca.push(qa.source)})});var la=(E-J-N)/(ea-1);Y.nodes.forEach(function(pa){pa.x1=(pa.x0=J+
Math.max(0,Math.min(ea-1,Math.floor(P.call(null,pa,ea))))*la)+N})}function H(Y){function ea(oa){la.forEach(function(ka){ka.forEach(function(ra){if(ra.targetLinks.length){var ha=(n.sum(ra.targetLinks,m)/n.sum(ra.targetLinks,e)-g(ra))*oa;ra.y0+=ha;ra.y1+=ha}})})}function da(oa){la.slice().reverse().forEach(function(ka){ka.forEach(function(ra){if(ra.sourceLinks.length){var ha=(n.sum(ra.sourceLinks,r)/n.sum(ra.sourceLinks,e)-g(ra))*oa;ra.y0+=ha;ra.y1+=ha}})})}function ca(){la.forEach(function(oa){var ka=
L,ra=oa.length,ha;oa.sort(c);for(ha=0;ha<ra;++ha){var ma=oa[ha];var wa=ka-ma.y0;0<wa&&(ma.y0+=wa,ma.y1+=wa);ka=ma.y1+O}wa=ka-O-K;if(0<wa)for(ka=ma.y0-=wa,ma.y1-=wa,ha=ra-2;0<=ha;--ha)ma=oa[ha],wa=ma.y1+O-ka,0<wa&&(ma.y0-=wa,ma.y1-=wa),ka=ma.y0})}var la=p.nest().key(function(oa){return oa.x0}).sortKeys(n.ascending).entries(Y.nodes).map(function(oa){return oa.values});(function(){var oa=n.max(la,function(ra){return ra.length});oa=ba*(K-L)/(oa-1);O>oa&&(O=oa);var ka=n.min(la,function(ra){return(K-L-
(ra.length-1)*O)/n.sum(ra,e)});la.forEach(function(ra){ra.forEach(function(ha,ma){ha.y1=(ha.y0=ma)+ha.value*ka})});Y.links.forEach(function(ra){ra.width=ra.value*ka})})();ca();for(var pa=1,qa=aa;0<qa;--qa)da(pa*=.99),ca(),ea(pa),ca()}function I(Y){Y.nodes.forEach(function(ea){ea.sourceLinks.sort(k);ea.targetLinks.sort(l)});Y.nodes.forEach(function(ea){var da=ea.y0,ca=da;ea.sourceLinks.forEach(function(la){la.y0=da+la.width/2;da+=la.width});ea.targetLinks.forEach(function(la){la.y1=ca+la.width/2;ca+=
la.width})})}var J=0,L=0,E=1,K=1,N=24,O=8,Q=u,P=f,T=v,V=w,aa=32,ba=2/3;A.update=function(Y){I(Y);return Y};A.nodeId=function(Y){return arguments.length?(Q="function"===typeof Y?Y:d(Y),A):Q};A.nodeAlign=function(Y){return arguments.length?(P="function"===typeof Y?Y:d(Y),A):P};A.nodeWidth=function(Y){return arguments.length?(N=+Y,A):N};A.nodePadding=function(Y){return arguments.length?(O=+Y,A):O};A.nodes=function(Y){return arguments.length?(T="function"===typeof Y?Y:d(Y),A):T};A.links=function(Y){return arguments.length?
(V="function"===typeof Y?Y:d(Y),A):V};A.size=function(Y){return arguments.length?(J=L=0,E=+Y[0],K=+Y[1],A):[E-J,K-L]};A.extent=function(Y){return arguments.length?(J=+Y[0][0],E=+Y[1][0],L=+Y[0][1],K=+Y[1][1],A):[[J,L],[E,K]]};A.iterations=function(Y){return arguments.length?(aa=+Y,A):aa};return A};q.sankeyCenter=function(A){return A.targetLinks.length?A.depth:A.sourceLinks.length?n.min(A.sourceLinks,a)-1:0};q.sankeyLeft=function(A){return A.depth};q.sankeyRight=function(A,B){return B-1-A.height};
q.sankeyJustify=f;q.sankeyLinkHorizontal=function(){return h.linkHorizontal().source(C).target(x)};Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165}],57:[function(b,y,F){y.exports=b("./quad")},{"./quad":58}],58:[function(b,y,F){function q(g,m){var r=m[0],u=m[1],v=1/(m[2]-r);m=1/(m[3]-u);for(var w=Array(g.length),D=0,C=g.length/2;D<C;D++)w[2*D]=p((g[2*D]-r)*v,0,1),w[2*D+1]=p((g[2*D+1]-u)*m,0,1);return w}var n=b("binary-search-bounds"),p=b("clamp"),
h=b("parse-rect"),a=b("array-bounds"),f=b("pick-by-alias"),d=b("defined"),l=b("flatten-vertex-data"),k=b("is-obj"),c=b("dtype"),e=b("math-log2");y.exports=function(g,m){function r(E,K,N,O,Q,P){if(!O.length)return null;var T=B[Q]||(B[Q]=[]),V=G[Q]||(G[Q]=[]),aa=t[Q]||(t[Q]=[]),ba=T.length;Q++;if(Q>w||1073741824<P){for(E=0;E<O.length;E++)T.push(O[E]),V.push(P),aa.push(null,null,null,null);return ba}T.push(O[0]);V.push(P);if(1>=O.length)return aa.push(null,null,null,null),ba;T=.5*N;V=E+T;N=K+T;for(var Y=
[],ea=[],da=[],ca=[],la=1,pa=O.length;la<pa;la++){var qa=O[la],oa=C[2*qa+1];C[2*qa]<V?oa<N?Y.push(qa):ea.push(qa):oa<N?da.push(qa):ca.push(qa)}P<<=2;aa.push(r(E,K,T,Y,Q,P),r(E,N,T,ea,Q,P+1),r(V,K,T,da,Q,P+2),r(V,N,T,ca,Q,P+3));return ba}function u(E,K,N,O,Q){for(var P=[],T=0;T<Q;T++){var V=G[T],aa=H[T][0],ba=v(E,K,T),Y=v(N,O,T);ba=n.ge(V,ba);V=n.gt(V,Y,ba,V.length-1);P[T]=[ba+aa,V+aa]}return P}function v(E,K,N){for(var O=1,Q=.5,P=.5,T=.5,V=0;V<N;V++)O<<=2,O+=E<Q?K<P?0:1:K<P?2:3,T*=.5,Q+=E<Q?-T:T,
P+=K<P?-T:T;return O}m||(m={});g=l(g,"float64");m=f(m,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var w=d(m.maxDepth,255),D=d(m.bounds,a(g,2));D[0]===D[2]&&D[2]++;D[1]===D[3]&&D[3]++;var C=q(g,D),x=g.length>>>1;m.dtype||(m.dtype="array");if("string"===typeof m.dtype)var A=new (c(m.dtype))(x);else m.dtype&&(A=m.dtype,Array.isArray(A)&&(A.length=x));for(m=0;m<x;++m)A[m]=m;var B=[],t=[],
G=[],H=[];r(0,0,1,A,0,1);for(m=x=0;m<B.length;m++){var I=B[m];if(A.set)A.set(I,x);else for(var J=0,L=I.length;J<L;J++)A[J+x]=I[J];I=x+B[m].length;H[m]=[x,I];x=I}A.range=function(){function E(pa,qa,oa,ka,ra,ha){if(null!==ra&&null!==ha&&!(aa>pa+oa||ba>qa+oa||Y<pa||ea<qa||ka>=da||ra===ha)){var ma=B[ka];void 0===ha&&(ha=ma.length);for(var wa=ra;wa<ha;wa++){var na=ma[wa],ya=g[2*na],Fa=g[2*na+1];ya>=Q&&ya<=T&&Fa>=P&&Fa<=V&&la.push(na)}ya=t[ka];ha=ya[4*ra];ma=ya[4*ra+1];wa=ya[4*ra+2];na=ya[4*ra+3];a:{Fa=
null;for(var Ha=0;null===Fa;)if(Fa=ya[4*(ra+1)+Ha],Ha++,Ha>ya.length){ra=null;break a}ra=Fa}oa*=.5;ka+=1;E(pa,qa,oa,ka,ha,ma||wa||na||ra);E(pa,qa+oa,oa,ka,ma,wa||na||ra);E(pa+oa,qa,oa,ka,wa,na||ra);E(pa+oa,qa+oa,oa,ka,na,ra)}}for(var K=[],N=arguments.length;N--;)K[N]=arguments[N];if(k(K[K.length-1])){var O=K.pop();K.length||null==O.x&&null==O.l&&null==O.left||(K=[O],N={});N=f(O,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else N=
{};K.length||(K=D);K=h.apply(void 0,K);K=[Math.min(K.x,K.x+K.width),Math.min(K.y,K.y+K.height),Math.max(K.x,K.x+K.width),Math.max(K.y,K.y+K.height)];var Q=K[0],P=K[1],T=K[2],V=K[3];K=q([Q,P,T,V],D);var aa=K[0],ba=K[1],Y=K[2],ea=K[3],da=d(N.level,B.length);if(null!=N.d){if("number"===typeof N.d)var ca=[N.d,N.d];else N.d.length&&(ca=N.d);da=Math.min(Math.max(Math.ceil(-e(Math.abs(ca[0])/(D[2]-D[0]))),Math.ceil(-e(Math.abs(ca[1])/(D[3]-D[1])))),da)}da=Math.min(da,B.length);if(N.lod)return u(aa,ba,Y,
ea,da);var la=[];E(0,0,1,0,0,1);return la};return A}},{"array-bounds":70,"binary-search-bounds":96,clamp:120,defined:170,dtype:175,"flatten-vertex-data":244,"is-obj":442,"math-log2":453,"parse-rect":478,"pick-by-alias":485}],59:[function(b,y,F){function q(h){var a=0;if(h&&0<h.length){a+=Math.abs(n(h[0]));for(var f=1;f<h.length;f++)a-=Math.abs(n(h[f]))}return a}function n(h){var a,f=0,d=h.length;if(2<d){for(a=0;a<d;a++){if(a===d-2){var l=d-2;var k=d-1;var c=0}else a===d-1?(l=d-1,k=0,c=1):(l=a,k=a+
1,c=a+2);l=h[l];k=h[k];c=h[c];f+=(c[0]*Math.PI/180-l[0]*Math.PI/180)*Math.sin(k[1]*Math.PI/180)}f=40680631590769*f/2}return f}Object.defineProperty(F,"__esModule",{value:!0});var p=b("@turf/meta");F.default=function(h){return p.geomReduce(h,function(a,f){a:{var d=0,l;switch(f.type){case "Polygon":f=q(f.coordinates);break a;case "MultiPolygon":for(l=0;l<f.coordinates.length;l++)d+=q(f.coordinates[l]);f=d;break a}f=0}return a+f},0)}},{"@turf/meta":63}],60:[function(b,y,F){Object.defineProperty(F,"__esModule",
{value:!0});var q=b("@turf/meta");F.default=function(n){var p=[Infinity,Infinity,-Infinity,-Infinity];q.coordEach(n,function(h){p[0]>h[0]&&(p[0]=h[0]);p[1]>h[1]&&(p[1]=h[1]);p[2]<h[0]&&(p[2]=h[0]);p[3]<h[1]&&(p[3]=h[1])});return p}},{"@turf/meta":63}],61:[function(b,y,F){Object.defineProperty(F,"__esModule",{value:!0});var q=b("@turf/meta"),n=b("@turf/helpers");F.default=function(p,h){void 0===h&&(h={});var a=0,f=0,d=0;q.coordEach(p,function(l){a+=l[0];f+=l[1];d++});return n.point([a/d,f/d],h.properties)}},
{"@turf/helpers":62,"@turf/meta":63}],62:[function(b,y,F){function q(m,r,u){void 0===u&&(u={});var v={type:"Feature"};if(0===u.id||u.id)v.id=u.id;u.bbox&&(v.bbox=u.bbox);v.properties=r||{};v.geometry=m;return v}function n(m,r,u){void 0===u&&(u={});return q({type:"Point",coordinates:m},r,u)}function p(m,r,u){void 0===u&&(u={});for(var v=0;v<m.length;v++){var w=m[v];if(4>w.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var D=0;D<w[w.length-1].length;D++)if(w[w.length-
1][D]!==w[0][D])throw Error("First and last Position are not equivalent.");}return q({type:"Polygon",coordinates:m},r,u)}function h(m,r,u){void 0===u&&(u={});if(2>m.length)throw Error("coordinates must be an array of two or more positions");return q({type:"LineString",coordinates:m},r,u)}function a(m,r){void 0===r&&(r={});var u={type:"FeatureCollection"};r.id&&(u.id=r.id);r.bbox&&(u.bbox=r.bbox);u.features=m;return u}function f(m,r,u){void 0===u&&(u={});return q({type:"MultiLineString",coordinates:m},
r,u)}function d(m,r,u){void 0===u&&(u={});return q({type:"MultiPoint",coordinates:m},r,u)}function l(m,r,u){void 0===u&&(u={});return q({type:"MultiPolygon",coordinates:m},r,u)}function k(m,r){void 0===r&&(r="kilometers");var u=F.factors[r];if(!u)throw Error(r+" units is invalid");return m*u}function c(m,r){void 0===r&&(r="kilometers");var u=F.factors[r];if(!u)throw Error(r+" units is invalid");return m/u}function e(m){return m%(2*Math.PI)*180/Math.PI}function g(m){return!isNaN(m)&&null!==m&&!Array.isArray(m)&&
!/^\s*$/.test(m)}Object.defineProperty(F,"__esModule",{value:!0});F.earthRadius=6371008.8;F.factors={centimeters:100*F.earthRadius,centimetres:100*F.earthRadius,degrees:F.earthRadius/111325,feet:3.28084*F.earthRadius,inches:39.37*F.earthRadius,kilometers:F.earthRadius/1E3,kilometres:F.earthRadius/1E3,meters:F.earthRadius,metres:F.earthRadius,miles:F.earthRadius/1609.344,millimeters:1E3*F.earthRadius,millimetres:1E3*F.earthRadius,nauticalmiles:F.earthRadius/1852,radians:1,yards:F.earthRadius/1.0936};
F.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/F.earthRadius,yards:1/1.0936};F.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,millimetres:1E6,yards:1.195990046};F.feature=q;F.geometry=function(m,
r,u){switch(m){case "Point":return n(r).geometry;case "LineString":return h(r).geometry;case "Polygon":return p(r).geometry;case "MultiPoint":return d(r).geometry;case "MultiLineString":return f(r).geometry;case "MultiPolygon":return l(r).geometry;default:throw Error(m+" is invalid");}};F.point=n;F.points=function(m,r,u){void 0===u&&(u={});return a(m.map(function(v){return n(v,r)}),u)};F.polygon=p;F.polygons=function(m,r,u){void 0===u&&(u={});return a(m.map(function(v){return p(v,r)}),u)};F.lineString=
h;F.lineStrings=function(m,r,u){void 0===u&&(u={});return a(m.map(function(v){return h(v,r)}),u)};F.featureCollection=a;F.multiLineString=f;F.multiPoint=d;F.multiPolygon=l;F.geometryCollection=function(m,r,u){void 0===u&&(u={});return q({type:"GeometryCollection",geometries:m},r,u)};F.round=function(m,r){void 0===r&&(r=0);if(r&&!(0<=r))throw Error("precision must be a positive number");r=Math.pow(10,r||0);return Math.round(m*r)/r};F.radiansToLength=k;F.lengthToRadians=c;F.lengthToDegrees=function(m,
r){return e(c(m,r))};F.bearingToAzimuth=function(m){m%=360;0>m&&(m+=360);return m};F.radiansToDegrees=e;F.degreesToRadians=function(m){return m%360*Math.PI/180};F.convertLength=function(m,r,u){void 0===r&&(r="kilometers");void 0===u&&(u="kilometers");if(!(0<=m))throw Error("length must be a positive number");return k(c(m,r),u)};F.convertArea=function(m,r,u){void 0===r&&(r="meters");void 0===u&&(u="kilometers");if(!(0<=m))throw Error("area must be a positive number");r=F.areaFactors[r];if(!r)throw Error("invalid original units");
u=F.areaFactors[u];if(!u)throw Error("invalid final units");return m/r*u};F.isNumber=g;F.isObject=function(m){return!!m&&m.constructor===Object};F.validateBBox=function(m){if(!m)throw Error("bbox is required");if(!Array.isArray(m))throw Error("bbox must be an Array");if(4!==m.length&&6!==m.length)throw Error("bbox must be an Array of 4 or 6 numbers");m.forEach(function(r){if(!g(r))throw Error("bbox must only contain numbers");})};F.validateId=function(m){if(!m)throw Error("id is required");if(-1===
["string","number"].indexOf(typeof m))throw Error("id must be a number or a string");};F.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`");};F.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`");};F.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`");};F.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`");};F.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`");
};F.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`");};F.convertDistance=function(){throw Error("method has been renamed to `convertLength`");}},{}],63:[function(b,y,F){function q(k,c,e){if(null!==k){var g,m=0,r;var u=k.type;for(var v="FeatureCollection"===u,w="Feature"===u,D=v?k.features.length:1,C=0;C<D;C++){var x=(r=(g=v?k.features[C].geometry:w?k.geometry:k)?"GeometryCollection"===g.type:!1)?g.geometries.length:1;for(var A=0;A<x;A++){var B=0,t=0;var G=r?g.geometries[A]:
g;if(null!==G){var H=G.coordinates;var I=G.type;var J=!e||"Polygon"!==I&&"MultiPolygon"!==I?0:1;switch(I){case null:break;case "Point":if(!1===c(H,m,C,B,t))return!1;m++;break;case "LineString":case "MultiPoint":for(u=0;u<H.length;u++){if(!1===c(H[u],m,C,B,t))return!1;m++;"MultiPoint"===I&&B++}break;case "Polygon":case "MultiLineString":for(u=0;u<H.length;u++){for(G=0;G<H[u].length-J;G++){if(!1===c(H[u][G],m,C,B,t))return!1;m++}"MultiLineString"===I&&B++;"Polygon"===I&&t++}break;case "MultiPolygon":for(u=
0;u<H.length;u++){for(G=t=0;G<H[u].length;G++){for(I=0;I<H[u][G].length-J;I++){if(!1===c(H[u][G][I],m,C,B,t))return!1;m++}t++}B++}break;case "GeometryCollection":for(u=0;u<G.geometries.length;u++)if(!1===q(G.geometries[u],c,e))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}function n(k,c){var e;switch(k.type){case "FeatureCollection":for(e=0;e<k.features.length&&!1!==c(k.features[e].properties,e);e++);break;case "Feature":c(k.properties,0)}}function p(k,c){if("Feature"===k.type)c(k,
0);else if("FeatureCollection"===k.type)for(var e=0;e<k.features.length&&!1!==c(k.features[e],e);e++);}function h(k,c){var e,g,m,r,u=0,v="FeatureCollection"===k.type,w="Feature"===k.type,D=v?k.features.length:1;for(e=0;e<D;e++){var C=v?k.features[e].geometry:w?k.geometry:k;var x=v?k.features[e].properties:w?k.properties:{};var A=v?k.features[e].bbox:w?k.bbox:void 0;var B=v?k.features[e].id:w?k.id:void 0;var t=(r=C?"GeometryCollection"===C.type:!1)?C.geometries.length:1;for(m=0;m<t;m++){var G=r?C.geometries[m]:
C;if(null===G){if(!1===c(null,u,x,A,B))return!1}else switch(G.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===c(G,u,x,A,B))return!1;break;case "GeometryCollection":for(g=0;g<G.geometries.length;g++)if(!1===c(G.geometries[g],u,x,A,B))return!1;break;default:throw Error("Unknown Geometry Type");}}u++}}function a(k,c){h(k,function(e,g,m,r,u){var v=null===e?null:e.type;switch(v){case null:case "Point":case "LineString":case "Polygon":if(!1===
c(l.feature(e,m,{bbox:r,id:u}),g,0))return!1;return}switch(v){case "MultiPoint":var w="Point";break;case "MultiLineString":w="LineString";break;case "MultiPolygon":w="Polygon"}for(r=0;r<e.coordinates.length;r++)if(!1===c(l.feature({type:w,coordinates:e.coordinates[r]},m),g,r))return!1})}function f(k,c){a(k,function(e,g,m){var r=0;if(e.geometry){var u=e.geometry.type;if("Point"!==u&&"MultiPoint"!==u){var v,w=0,D=0,C=0;if(!1===q(e,function(x,A,B,t,G){if(void 0===v||g>w||t>D||G>C)v=x,w=g,D=t,C=G,r=0;
else{A=l.lineString([v,x],e.properties);if(!1===c(A,g,m,G,r))return!1;r++;v=x}}))return!1}}})}function d(k,c){if(!k)throw Error("geojson is required");a(k,function(e,g,m){if(null!==e.geometry){var r=e.geometry.coordinates;switch(e.geometry.type){case "LineString":if(!1===c(e,g,m,0,0))return!1;break;case "Polygon":for(var u=0;u<r.length;u++)if(!1===c(l.lineString(r[u],e.properties),g,m,u))return!1}}})}Object.defineProperty(F,"__esModule",{value:!0});var l=b("@turf/helpers");F.coordEach=q;F.coordReduce=
function(k,c,e,g){var m=e;q(k,function(r,u,v,w,D){m=0===u&&void 0===e?r:c(m,r,u,v,w,D)},g);return m};F.propEach=n;F.propReduce=function(k,c,e){var g=e;n(k,function(m,r){g=0===r&&void 0===e?m:c(g,m,r)});return g};F.featureEach=p;F.featureReduce=function(k,c,e){var g=e;p(k,function(m,r){g=0===r&&void 0===e?m:c(g,m,r)});return g};F.coordAll=function(k){var c=[];q(k,function(e){c.push(e)});return c};F.geomEach=h;F.geomReduce=function(k,c,e){var g=e;h(k,function(m,r,u,v,w){g=0===r&&void 0===e?m:c(g,m,
r,u,v,w)});return g};F.flattenEach=a;F.flattenReduce=function(k,c,e){var g=e;a(k,function(m,r,u){g=0===r&&0===u&&void 0===e?m:c(g,m,r,u)});return g};F.segmentEach=f;F.segmentReduce=function(k,c,e){var g=e,m=!1;f(k,function(r,u,v,w,D){g=!1===m&&void 0===e?r:c(g,r,u,v,w,D);m=!0});return g};F.lineEach=d;F.lineReduce=function(k,c,e){var g=e;d(k,function(m,r,u,v){g=0===r&&void 0===e?m:c(g,m,r,u,v)});return g};F.findSegment=function(k,c){c=c||{};if(!l.isObject(c))throw Error("options is invalid");var e=
c.featureIndex||0,g=c.multiFeatureIndex||0,m=c.geometryIndex||0,r=c.segmentIndex||0,u=c.properties;switch(k.type){case "FeatureCollection":0>e&&(e=k.features.length+e);u=u||k.features[e].properties;k=k.features[e].geometry;break;case "Feature":u=u||k.properties;k=k.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");}if(null===k)return null;e=k.coordinates;switch(k.type){case "Point":case "MultiPoint":return null;
case "LineString":return 0>r&&(r=e.length+r-1),l.lineString([e[r],e[r+1]],u,c);case "Polygon":return 0>m&&(m=e.length+m),0>r&&(r=e[m].length+r-1),l.lineString([e[m][r],e[m][r+1]],u,c);case "MultiLineString":return 0>g&&(g=e.length+g),0>r&&(r=e[g].length+r-1),l.lineString([e[g][r],e[g][r+1]],u,c);case "MultiPolygon":return 0>g&&(g=e.length+g),0>m&&(m=e[g].length+m),0>r&&(r=e[g][m].length-r-1),l.lineString([e[g][m][r],e[g][m][r+1]],u,c)}throw Error("geojson is invalid");};F.findPoint=function(k,c){c=
c||{};if(!l.isObject(c))throw Error("options is invalid");var e=c.featureIndex||0,g=c.multiFeatureIndex||0,m=c.geometryIndex||0,r=c.coordIndex||0,u=c.properties;switch(k.type){case "FeatureCollection":0>e&&(e=k.features.length+e);u=u||k.features[e].properties;k=k.features[e].geometry;break;case "Feature":u=u||k.properties;k=k.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");
}if(null===k)return null;e=k.coordinates;switch(k.type){case "Point":return l.point(e,u,c);case "MultiPoint":return 0>g&&(g=e.length+g),l.point(e[g],u,c);case "LineString":return 0>r&&(r=e.length+r),l.point(e[r],u,c);case "Polygon":return 0>m&&(m=e.length+m),0>r&&(r=e[m].length+r),l.point(e[m][r],u,c);case "MultiLineString":return 0>g&&(g=e.length+g),0>r&&(r=e[g].length+r),l.point(e[g][r],u,c);case "MultiPolygon":return 0>g&&(g=e.length+g),0>m&&(m=e[g].length+m),0>r&&(r=e[g][m].length-r),l.point(e[g][m][r],
u,c)}throw Error("geojson is invalid");}},{"@turf/helpers":62}],64:[function(b,y,F){F="undefined"===typeof WeakMap?b("weak-map"):WeakMap;var q=b("gl-buffer"),n=b("gl-vao"),p=new F;y.exports=function(h){var a=p.get(h),f=a&&(a._triangleBuffer.handle||a._triangleBuffer.buffer);f&&h.isBuffer(f)||(f=q(h,new Float32Array([-1,-1,-1,4,4,-1])),a=n(h,[{buffer:f,type:h.FLOAT,size:2}]),a._triangleBuffer=f,p.set(h,a));a.bind();h.drawArrays(h.TRIANGLES,0,3);a.unbind()}},{"gl-buffer":258,"gl-vao":332,"weak-map":574}],
65:[function(b,y,F){y.exports=function(q){var n=0,p=0,h=0,a=0;return q.map(function(f){f=f.slice();var d=f[0],l=d.toUpperCase();if(d!=l)switch(f[0]=l,d){case "a":f[6]+=h;f[7]+=a;break;case "v":f[1]+=a;break;case "h":f[1]+=h;break;default:for(d=1;d<f.length;)f[d++]+=h,f[d++]+=a}switch(l){case "Z":h=n;a=p;break;case "H":h=f[1];break;case "V":a=f[1];break;case "M":h=n=f[1];a=p=f[2];break;default:h=f[f.length-2],a=f[f.length-1]}return f})}},{}],66:[function(b,y,F){var q=b("pad-left");y.exports=function(n,
p,h){p="number"===typeof p?p:1;h=h||": ";n=n.split(/\r?\n/);var a=String(n.length+p-1).length;return n.map(function(f,d){d+=p;return q(d,a-String(d).length)+h+f}).join("\n")}},{"pad-left":476}],67:[function(b,y,F){y.exports=function(n){var p=n.length;if(0===p)return[];if(1===p)return[0];for(var h=n[0].length,a=[n[0]],f=[0],d=1;d<p;++d){a.push(n[d]);a:{var l=a;for(var k=h,c=Array(k+1),e=0;e<l.length;++e)c[e]=l[e];for(e=0;e<=l.length;++e){for(var g=l.length;g<=k;++g){for(var m=Array(k),r=0;r<k;++r)m[r]=
Math.pow(g+1-e,r);c[g]=m}if(q.apply(void 0,c)){l=!0;break a}}l=!1}if(l){if(f.push(d),f.length===h+1)break}else a.pop()}return f};var q=b("robust-orientation")},{"robust-orientation":520}],68:[function(b,y,F){y.exports=function(p,h){return q(h).filter(function(a){for(var f=Array(a.length),d=0;d<a.length;++d)f[d]=h[a[d]];return 1>n(f)*p})};var q=b("delaunay-triangulate"),n=b("circumradius")},{circumradius:119,"delaunay-triangulate":171}],69:[function(b,y,F){y.exports=function(p,h){return n(q(p,h))};
var q=b("alpha-complex"),n=b("simplicial-complex-boundary")},{"alpha-complex":68,"simplicial-complex-boundary":527}],70:[function(b,y,F){y.exports=function(q,n){if(!q||null==q.length)throw Error("Argument should be an array");n=null==n?1:Math.floor(n);for(var p=Array(2*n),h=0;h<n;h++){for(var a=-Infinity,f=Infinity,d=h,l=q.length;d<l;d+=n)q[d]>a&&(a=q[d]),q[d]<f&&(f=q[d]);p[h]=f;p[n+h]=a}return p}},{}],71:[function(b,y,F){var q=b("array-bounds");y.exports=function(n,p,h){if(!n||null==n.length)throw Error("Argument should be an array");
null==p&&(p=1);null==h&&(h=q(n,p));for(var a=0;a<p;a++){var f=h[p+a],d=h[a],l,k=n.length;if(Infinity===f&&-Infinity===d)for(l=a;l<k;l+=p)n[l]=n[l]===f?1:n[l]===d?0:.5;else if(Infinity===f)for(l=a;l<k;l+=p)n[l]=n[l]===f?1:0;else if(-Infinity===d)for(l=a;l<k;l+=p)n[l]=n[l]===d?0:1;else for(f-=d,l=a;l<k;l+=p)isNaN(n[l])||(n[l]=0===f?.5:(n[l]-d)/f)}return n}},{"array-bounds":70}],72:[function(b,y,F){y.exports=function(q,n){var p="number"===typeof q,h="number"===typeof n;p&&!h?(n=q,q=0):p||h||(n=q=0);
q|=0;n=(n|0)-q;if(0>n)throw Error("array length must be positive");p=Array(n);for(h=0;h<n;h++,q++)p[h]=q;return p}},{}],73:[function(b,y,F){(function(q){function n(H,I){if(H===I)return 0;for(var J=H.length,L=I.length,E=0,K=Math.min(J,L);E<K;++E)if(H[E]!==I[E]){J=H[E];L=I[E];break}return J<L?-1:L<J?1:0}function p(H){return q.Buffer&&"function"===typeof q.Buffer.isBuffer?q.Buffer.isBuffer(H):!(null==H||!H._isBuffer)}function h(H){return p(H)||"function"!==typeof q.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?
ArrayBuffer.isView(H):H?H instanceof DataView||H.buffer&&H.buffer instanceof ArrayBuffer?!0:!1:!1}function a(H){if(D.isFunction(H))return A?H.name:(H=H.toString().match(t))&&H[1]}function f(H,I){return"string"===typeof H?H.length<I?H:H.slice(0,I):H}function d(H){if(A||!D.isFunction(H))return D.inspect(H);H=a(H);return"[Function"+(H?": "+H:"")+"]"}function l(H,I,J,L,E){throw new B.AssertionError({message:J,actual:H,expected:I,operator:L,stackStartFunction:E});}function k(H,I){H||l(H,!0,I,"\x3d\x3d",
B.ok)}function c(H,I,J,L){if(H===I)return!0;if(p(H)&&p(I))return 0===n(H,I);if(D.isDate(H)&&D.isDate(I))return H.getTime()===I.getTime();if(D.isRegExp(H)&&D.isRegExp(I))return H.source===I.source&&H.global===I.global&&H.multiline===I.multiline&&H.lastIndex===I.lastIndex&&H.ignoreCase===I.ignoreCase;if(null!==H&&"object"===typeof H||null!==I&&"object"===typeof I){if(!h(H)||!h(I)||Object.prototype.toString.call(H)!==Object.prototype.toString.call(I)||H instanceof Float32Array||H instanceof Float64Array){if(p(H)!==
p(I))return!1;L=L||{actual:[],expected:[]};var E=L.actual.indexOf(H);if(-1!==E&&E===L.expected.indexOf(I))return!0;L.actual.push(H);L.expected.push(I);return g(H,I,J,L)}return 0===n(new Uint8Array(H.buffer),new Uint8Array(I.buffer))}return J?H===I:H==I}function e(H){return"[object Arguments]"==Object.prototype.toString.call(H)}function g(H,I,J,L){if(null===H||void 0===H||null===I||void 0===I)return!1;if(D.isPrimitive(H)||D.isPrimitive(I))return H===I;if(J&&Object.getPrototypeOf(H)!==Object.getPrototypeOf(I))return!1;
var E=e(H),K=e(I);if(E&&!K||!E&&K)return!1;if(E)return H=x.call(H),I=x.call(I),c(H,I,J);E=G(H);var N=G(I);if(E.length!==N.length)return!1;E.sort();N.sort();for(K=E.length-1;0<=K;K--)if(E[K]!==N[K])return!1;for(K=E.length-1;0<=K;K--)if(N=E[K],!c(H[N],I[N],J,L))return!1;return!0}function m(H,I,J){c(H,I,!0)&&l(H,I,J,"notDeepStrictEqual",m)}function r(H,I){if(!H||!I)return!1;if("[object RegExp]"==Object.prototype.toString.call(I))return I.test(H);try{if(H instanceof I)return!0}catch(J){}return Error.isPrototypeOf(I)?
!1:!0===I.call({},H)}function u(H,I,J,L){if("function"!==typeof I)throw new TypeError('"block" argument must be a function');"string"===typeof J&&(L=J,J=null);try{I()}catch(O){var E=O}I=E;L=(J&&J.name?" ("+J.name+").":".")+(L?" "+L:".");H&&!I&&l(I,J,"Missing expected exception"+L);E="string"===typeof L;var K=!H&&D.isError(I),N=!H&&I&&!J;(K&&E&&r(I,J)||N)&&l(I,J,"Got unwanted exception"+L);if(H&&I&&J&&!r(I,J)||!H&&I)throw I;}function v(H,I){H||l(H,!0,I,"\x3d\x3d",v)}var w=b("object-assign"),D=b("util/"),
C=Object.prototype.hasOwnProperty,x=Array.prototype.slice,A=function(){return"foo"===function(){}.name}(),B=y.exports=k,t=/\s*function\s+([^\(\s]*)\s*/;B.AssertionError=function(H){this.name="AssertionError";this.actual=H.actual;this.expected=H.expected;this.operator=H.operator;H.message?(this.message=H.message,this.generatedMessage=!1):(this.message=f(d(this.actual),128)+" "+this.operator+" "+f(d(this.expected),128),this.generatedMessage=!0);var I=H.stackStartFunction||l;Error.captureStackTrace?
Error.captureStackTrace(this,I):(H=Error(),H.stack&&(H=H.stack,I=a(I),I=H.indexOf("\n"+I),0<=I&&(I=H.indexOf("\n",I+1),H=H.substring(I+1)),this.stack=H))};D.inherits(B.AssertionError,Error);B.fail=l;B.ok=k;B.equal=function(H,I,J){H!=I&&l(H,I,J,"\x3d\x3d",B.equal)};B.notEqual=function(H,I,J){H==I&&l(H,I,J,"!\x3d",B.notEqual)};B.deepEqual=function(H,I,J){c(H,I,!1)||l(H,I,J,"deepEqual",B.deepEqual)};B.deepStrictEqual=function(H,I,J){c(H,I,!0)||l(H,I,J,"deepStrictEqual",B.deepStrictEqual)};B.notDeepEqual=
function(H,I,J){c(H,I,!1)&&l(H,I,J,"notDeepEqual",B.notDeepEqual)};B.notDeepStrictEqual=m;B.strictEqual=function(H,I,J){H!==I&&l(H,I,J,"\x3d\x3d\x3d",B.strictEqual)};B.notStrictEqual=function(H,I,J){H===I&&l(H,I,J,"!\x3d\x3d",B.notStrictEqual)};B.throws=function(H,I,J){u(!0,H,I,J)};B.doesNotThrow=function(H,I,J){u(!1,H,I,J)};B.ifError=function(H){if(H)throw H;};B.strict=w(v,B,{equal:B.strictEqual,deepEqual:B.deepStrictEqual,notEqual:B.notStrictEqual,notDeepEqual:B.notDeepStrictEqual});B.strict.strict=
B.strict;var G=Object.keys||function(H){var I=[],J;for(J in H)C.call(H,J)&&I.push(J);return I}}).call(this,"undefined"!==typeof fb?fb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"object-assign":473,"util/":76}],74:[function(b,y,F){y.exports="function"===typeof Object.create?function(q,n){q.super_=n;q.prototype=Object.create(n.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}})}:function(q,n){q.super_=n;var p=function(){};p.prototype=n.prototype;
q.prototype=new p;q.prototype.constructor=q}},{}],75:[function(b,y,F){y.exports=function(q){return q&&"object"===typeof q&&"function"===typeof q.copy&&"function"===typeof q.fill&&"function"===typeof q.readUInt8}},{}],76:[function(b,y,F){(function(q,n){function p(L,E){var K={seen:[],stylize:a};3<=arguments.length&&(K.depth=arguments[2]);4<=arguments.length&&(K.colors=arguments[3]);r(E)?K.showHidden=E:E&&F._extend(K,E);w(K.showHidden)&&(K.showHidden=!1);w(K.depth)&&(K.depth=2);w(K.colors)&&(K.colors=
!1);w(K.customInspect)&&(K.customInspect=!0);K.colors&&(K.stylize=h);return d(K,L,K.depth)}function h(L,E){return(E=p.styles[E])?"["+p.colors[E][0]+"m"+L+"["+p.colors[E][1]+"m":L}function a(L,E){return L}function f(L){var E={};L.forEach(function(K,N){E[K]=!0});return E}function d(L,E,K){if(L.customInspect&&E&&B(E.inspect)&&E.inspect!==F.inspect&&(!E.constructor||E.constructor.prototype!==E)){var N=E.inspect(K,L);v(N)||(N=d(L,N,K));return N}if(N=l(L,E))return N;var O=Object.keys(E),Q=f(O);L.showHidden&&
(O=Object.getOwnPropertyNames(E));if(A(E)&&(0<=O.indexOf("message")||0<=O.indexOf("description")))return k(E);if(0===O.length){if(B(E))return L.stylize("[Function"+(E.name?": "+E.name:"")+"]","special");if(D(E))return L.stylize(RegExp.prototype.toString.call(E),"regexp");if(x(E))return L.stylize(Date.prototype.toString.call(E),"date");if(A(E))return k(E)}N="";var P=!1,T=["{","}"];m(E)&&(P=!0,T=["[","]"]);B(E)&&(N=" [Function"+(E.name?": "+E.name:"")+"]");D(E)&&(N=" "+RegExp.prototype.toString.call(E));
x(E)&&(N=" "+Date.prototype.toUTCString.call(E));A(E)&&(N=" "+k(E));if(0===O.length&&(!P||0==E.length))return T[0]+N+T[1];if(0>K)return D(E)?L.stylize(RegExp.prototype.toString.call(E),"regexp"):L.stylize("[Object]","special");L.seen.push(E);O=P?c(L,E,K,Q,O):O.map(function(V){return e(L,E,K,Q,V,P)});L.seen.pop();return g(O,N,T)}function l(L,E){if(w(E))return L.stylize("undefined","undefined");if(v(E))return E="'"+JSON.stringify(E).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",L.stylize(E,
"string");if(u(E))return L.stylize(""+E,"number");if(r(E))return L.stylize(""+E,"boolean");if(null===E)return L.stylize("null","null")}function k(L){return"["+Error.prototype.toString.call(L)+"]"}function c(L,E,K,N,O){for(var Q=[],P=0,T=E.length;P<T;++P)Object.prototype.hasOwnProperty.call(E,String(P))?Q.push(e(L,E,K,N,String(P),!0)):Q.push("");O.forEach(function(V){V.match(/^\d+$/)||Q.push(e(L,E,K,N,V,!0))});return Q}function e(L,E,K,N,O,Q){var P,T;E=Object.getOwnPropertyDescriptor(E,O)||{value:E[O]};
E.get?T=E.set?L.stylize("[Getter/Setter]","special"):L.stylize("[Getter]","special"):E.set&&(T=L.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(N,O)||(P="["+O+"]");T||(0>L.seen.indexOf(E.value)?(T=null===K?d(L,E.value,null):d(L,E.value,K-1),-1<T.indexOf("\n")&&(T=Q?T.split("\n").map(function(V){return"  "+V}).join("\n").substr(2):"\n"+T.split("\n").map(function(V){return"   "+V}).join("\n"))):T=L.stylize("[Circular]","special"));if(w(P)){if(Q&&O.match(/^\d+$/))return T;P=JSON.stringify(""+
O);P.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(P=P.substr(1,P.length-2),P=L.stylize(P,"name")):(P=P.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),P=L.stylize(P,"string"))}return P+": "+T}function g(L,E,K){var N=0;return 60<L.reduce(function(O,Q){N++;0<=Q.indexOf("\n")&&N++;return O+Q.replace(/\u001b\[\d\d?m/g,"").length+1},0)?K[0]+(""===E?"":E+"\n ")+" "+L.join(",\n  ")+" "+K[1]:K[0]+E+" "+L.join(", ")+" "+K[1]}function m(L){return Array.isArray(L)}function r(L){return"boolean"===typeof L}
function u(L){return"number"===typeof L}function v(L){return"string"===typeof L}function w(L){return void 0===L}function D(L){return C(L)&&"[object RegExp]"===Object.prototype.toString.call(L)}function C(L){return"object"===typeof L&&null!==L}function x(L){return C(L)&&"[object Date]"===Object.prototype.toString.call(L)}function A(L){return C(L)&&("[object Error]"===Object.prototype.toString.call(L)||L instanceof Error)}function B(L){return"function"===typeof L}function t(L){return 10>L?"0"+L.toString(10):
L.toString(10)}var G=/%[sdj%]/g;F.format=function(L){if(!v(L)){for(var E=[],K=0;K<arguments.length;K++)E.push(p(arguments[K]));return E.join(" ")}K=1;var N=arguments,O=N.length;E=String(L).replace(G,function(P){if("%%"===P)return"%";if(K>=O)return P;switch(P){case "%s":return String(N[K++]);case "%d":return Number(N[K++]);case "%j":try{return JSON.stringify(N[K++])}catch(T){return"[Circular]"}default:return P}});for(var Q=N[K];K<O;Q=N[++K])E=null!==Q&&C(Q)?E+(" "+p(Q)):E+(" "+Q);return E};F.deprecate=
function(L,E){if(w(n.process))return function(){return F.deprecate(L,E).apply(this,arguments)};if(!0===q.noDeprecation)return L;var K=!1;return function(){if(!K){if(q.throwDeprecation)throw Error(E);q.traceDeprecation?console.trace(E):console.error(E);K=!0}return L.apply(this,arguments)}};var H={},I;F.debuglog=function(L){w(I)&&(I=q.env.NODE_DEBUG||"");L=L.toUpperCase();if(!H[L])if((new RegExp("\\b"+L+"\\b","i")).test(I)){var E=q.pid;H[L]=function(){var K=F.format.apply(F,arguments);console.error("%s %d: %s",
L,E,K)}}else H[L]=function(){};return H[L]};F.inspect=p;p.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};p.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};F.isArray=m;F.isBoolean=r;F.isNull=function(L){return null===L};F.isNullOrUndefined=function(L){return null==L};F.isNumber=
u;F.isString=v;F.isSymbol=function(L){return"symbol"===typeof L};F.isUndefined=w;F.isRegExp=D;F.isObject=C;F.isDate=x;F.isError=A;F.isFunction=B;F.isPrimitive=function(L){return null===L||"boolean"===typeof L||"number"===typeof L||"string"===typeof L||"symbol"===typeof L||"undefined"===typeof L};F.isBuffer=b("./support/isBuffer");var J="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");F.log=function(){var L=console,E=L.log;var K=new Date;var N=[t(K.getHours()),t(K.getMinutes()),t(K.getSeconds())].join(":");
K=[K.getDate(),J[K.getMonth()],N].join(" ");E.call(L,"%s - %s",K,F.format.apply(F,arguments))};F.inherits=b("inherits");F._extend=function(L,E){if(!E||!C(E))return L;for(var K=Object.keys(E),N=K.length;N--;)L[K[N]]=E[K[N]];return L}}).call(this,b("_process"),"undefined"!==typeof fb?fb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":75,_process:500,inherits:74}],77:[function(b,y,F){y.exports=function(q){return atob(q)}},{}],78:[function(b,y,F){function q(p){for(var h=
0,a=0;a<p.length;++a)h+=p[a];return h}y.exports=function(p,h){for(var a=h.length,f=Array(a+1),d=0;d<a;++d){for(var l=Array(a+1),k=0;k<=a;++k)l[k]=p[k][d];f[d]=l}f[a]=Array(a+1);for(d=0;d<=a;++d)f[a][d]=1;p=Array(a+1);for(d=0;d<a;++d)p[d]=h[d];p[a]=1;h=n(f,p);f=q(h[a+1]);0===f&&(f=1);p=Array(a+1);for(d=0;d<=a;++d)p[d]=q(h[d])/f;return p};var n=b("robust-linear-solve")},{"robust-linear-solve":519}],79:[function(b,y,F){function q(a){var f=a.length;if(0<f%4)throw Error("Invalid string. Length must be a multiple of 4");
a=a.indexOf("\x3d");-1===a&&(a=f);return[a,a===f?0:4-a%4]}F.byteLength=function(a){a=q(a);var f=a[1];return 3*(a[0]+f)/4-f};F.toByteArray=function(a){var f=q(a);var d=f[0];f=f[1];var l=new h(3*(d+f)/4-f),k=0,c=0<f?d-4:d,e;for(e=0;e<c;e+=4)d=p[a.charCodeAt(e)]<<18|p[a.charCodeAt(e+1)]<<12|p[a.charCodeAt(e+2)]<<6|p[a.charCodeAt(e+3)],l[k++]=d>>16&255,l[k++]=d>>8&255,l[k++]=d&255;2===f&&(d=p[a.charCodeAt(e)]<<2|p[a.charCodeAt(e+1)]>>4,l[k++]=d&255);1===f&&(d=p[a.charCodeAt(e)]<<10|p[a.charCodeAt(e+1)]<<
4|p[a.charCodeAt(e+2)]>>2,l[k++]=d>>8&255,l[k++]=d&255);return l};F.fromByteArray=function(a){for(var f=a.length,d=f%3,l=[],k=0,c=f-d;k<c;k+=16383){for(var e=l,g=e.push,m,r=a,u=k+16383>c?c:k+16383,v=[],w=k;w<u;w+=3)m=(r[w]<<16&16711680)+(r[w+1]<<8&65280)+(r[w+2]&255),v.push(n[m>>18&63]+n[m>>12&63]+n[m>>6&63]+n[m&63]);m=v.join("");g.call(e,m)}1===d?(a=a[f-1],l.push(n[a>>2]+n[a<<4&63]+"\x3d\x3d")):2===d&&(a=(a[f-2]<<8)+a[f-1],l.push(n[a>>10]+n[a>>4&63]+n[a<<2&63]+"\x3d"));return l.join("")};var n=[],
p=[],h="undefined"!==typeof Uint8Array?Uint8Array:Array;for(b=0;64>b;++b)n[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b],p["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;p[45]=62;p[95]=63},{}],80:[function(b,y,F){var q=b("./lib/rationalize");y.exports=function(n,p){return q(n[0].mul(p[1]).add(p[0].mul(n[1])),n[1].mul(p[1]))}},{"./lib/rationalize":90}],81:[function(b,y,F){y.exports=function(q,n){return q[0].mul(n[1]).cmp(n[0].mul(q[1]))}},
{}],82:[function(b,y,F){var q=b("./lib/rationalize");y.exports=function(n,p){return q(n[0].mul(p[1]),n[1].mul(p[0]))}},{"./lib/rationalize":90}],83:[function(b,y,F){function q(l,k){if(n(l))return k?d(l,q(k)):[l[0].clone(),l[1].clone()];var c=0;if(p(l))l=l.clone();else if("string"===typeof l)l=a(l);else{if(0===l)return[h(0),h(1)];if(l!==Math.floor(l))for(;l!==Math.floor(l);)l*=Math.pow(2,256),c-=256;l=h(l)}if(n(k))l.mul(k[1]),k=k[0].clone();else if(p(k))k=k.clone();else if("string"===typeof k)k=a(k);
else if(k){if(k!==Math.floor(k))for(;k!==Math.floor(k);)k*=Math.pow(2,256),c+=256;k=h(k)}else k=h(1);0<c?l=l.ushln(c):0>c&&(k=k.ushln(-c));return f(l,k)}var n=b("./is-rat"),p=b("./lib/is-bn"),h=b("./lib/num-to-bn"),a=b("./lib/str-to-bn"),f=b("./lib/rationalize"),d=b("./div");y.exports=q},{"./div":82,"./is-rat":84,"./lib/is-bn":88,"./lib/num-to-bn":89,"./lib/rationalize":90,"./lib/str-to-bn":91}],84:[function(b,y,F){var q=b("./lib/is-bn");y.exports=function(n){return Array.isArray(n)&&2===n.length&&
q(n[0])&&q(n[1])}},{"./lib/is-bn":88}],85:[function(b,y,F){var q=b("bn.js");y.exports=function(n){return n.cmp(new q(0))}},{"bn.js":99}],86:[function(b,y,F){var q=b("./bn-sign");y.exports=function(n){var p=n.length,h=n.words,a=0;if(1===p)a=h[0];else if(2===p)a=h[0]+67108864*h[1];else for(var f=0;f<p;f++)a+=h[f]*Math.pow(67108864,f);return q(n)*a}},{"./bn-sign":85}],87:[function(b,y,F){var q=b("double-bits"),n=b("bit-twiddle").countTrailingZeros;y.exports=function(p){var h=n(q.lo(p));if(32>h)return h;
p=n(q.hi(p));return 20<p?52:p+32}},{"bit-twiddle":97,"double-bits":173}],88:[function(b,y,F){b("bn.js");y.exports=function(q){return q&&"object"===typeof q&&!!q.words}},{"bn.js":99}],89:[function(b,y,F){var q=b("bn.js"),n=b("double-bits");y.exports=function(p){var h=n.exponent(p);return 52>h?new q(p):(new q(p*Math.pow(2,52-h))).ushln(h-52)}},{"bn.js":99,"double-bits":173}],90:[function(b,y,F){var q=b("./num-to-bn"),n=b("./bn-sign");y.exports=function(p,h){var a=n(p),f=n(h);if(0===a)return[q(0),q(1)];
if(0===f)return[q(0),q(0)];0>f&&(p=p.neg(),h=h.neg());a=p.gcd(h);return a.cmpn(1)?[p.div(a),h.div(a)]:[p,h]}},{"./bn-sign":85,"./num-to-bn":89}],91:[function(b,y,F){var q=b("bn.js");y.exports=function(n){return new q(n)}},{"bn.js":99}],92:[function(b,y,F){var q=b("./lib/rationalize");y.exports=function(n,p){return q(n[0].mul(p[0]),n[1].mul(p[1]))}},{"./lib/rationalize":90}],93:[function(b,y,F){var q=b("./lib/bn-sign");y.exports=function(n){return q(n[0])*q(n[1])}},{"./lib/bn-sign":85}],94:[function(b,
y,F){var q=b("./lib/rationalize");y.exports=function(n,p){return q(n[0].mul(p[1]).sub(n[1].mul(p[0])),n[1].mul(p[1]))}},{"./lib/rationalize":90}],95:[function(b,y,F){var q=b("./lib/bn-to-num"),n=b("./lib/ctz");y.exports=function(p){var h=p[0];p=p[1];if(0===h.cmpn(0))return 0;var a=h.abs().divmod(p.abs()),f=q(a.div);a=a.mod;h=h.negative!==p.negative?-1:1;if(0===a.cmpn(0))return h*f;if(f){var d=n(f)+4;p=q(a.ushln(d).divRound(p));return h*(f+p*Math.pow(2,-d))}f=p.bitLength()-a.bitLength()+53;p=q(a.ushln(f).divRound(p));
if(1023>f)return h*p*Math.pow(2,-f);p*=Math.pow(2,-1023);return h*p*Math.pow(2,1023-f)}},{"./lib/bn-to-num":86,"./lib/ctz":87}],96:[function(b,y,F){function q(p,h,a,f,d){p=["function ",p,"(a,l,h,",f.join(","),"){",d?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da[m]"];d?0>h.indexOf("c")?p.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):p.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):p.push(";if(",h,"){i\x3dm;");a?p.push("l\x3dm+1}else{h\x3dm-1}"):
p.push("h\x3dm-1}else{l\x3dm+1}");p.push("}");d?p.push("return -1};"):p.push("return i};");return p.join("")}function n(p,h,a,f){return(new Function([q("A","x"+p+"y",h,["y"],f),q("P","c(x,y)"+p+"0",h,["y","c"],f),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dvoid 0)?0:l|0,(h\x3d\x3d\x3dvoid 0)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dvoid 0)?0:c|0,(l\x3d\x3d\x3dvoid 0)?a.length-1:l|0,y)}}return dispatchBsearch",a].join("")))()}y.exports=
{ge:n("\x3e\x3d",!1,"GE"),gt:n("\x3e",!1,"GT"),lt:n("\x3c",!0,"LT"),le:n("\x3c\x3d",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],97:[function(b,y,F){function q(p){var h=32;(p&=-p)&&h--;p&65535&&(h-=16);p&16711935&&(h-=8);p&252645135&&(h-=4);p&858993459&&(h-=2);p&1431655765&&--h;return h}"use restrict";F.INT_BITS=32;F.INT_MAX=2147483647;F.INT_MIN=-2147483648;F.sign=function(p){return(0<p)-(0>p)};F.abs=function(p){var h=p>>31;return(p^h)-h};F.min=function(p,h){return h^(p^h)&-(p<h)};F.max=function(p,h){return p^
(p^h)&-(p<h)};F.isPow2=function(p){return!(p&p-1)&&!!p};F.log2=function(p){var h=(65535<p)<<4;p>>>=h;var a=(255<p)<<3;p>>>=a;h|=a;a=(15<p)<<2;p>>>=a;h|=a;a=(3<p)<<1;return h|a|p>>>a>>1};F.log10=function(p){return 1E9<=p?9:1E8<=p?8:1E7<=p?7:1E6<=p?6:1E5<=p?5:1E4<=p?4:1E3<=p?3:100<=p?2:10<=p?1:0};F.popCount=function(p){p-=p>>>1&1431655765;p=(p&858993459)+(p>>>2&858993459);return 16843009*(p+(p>>>4)&252645135)>>>24};F.countTrailingZeros=q;F.nextPow2=function(p){p+=0===p;--p;p|=p>>>1;p|=p>>>2;p|=p>>>
4;p|=p>>>8;return(p|p>>>16)+1};F.prevPow2=function(p){p|=p>>>1;p|=p>>>2;p|=p>>>4;p|=p>>>8;p|=p>>>16;return p-(p>>>1)};F.parity=function(p){p^=p>>>16;p^=p>>>8;return 27030>>>((p^p>>>4)&15)&1};var n=Array(256);(function(p){for(var h=0;256>h;++h){var a=h,f=h,d=7;for(a>>>=1;a;a>>>=1)f<<=1,f|=a&1,--d;p[h]=f<<d&255}})(n);F.reverse=function(p){return n[p&255]<<24|n[p>>>8&255]<<16|n[p>>>16&255]<<8|n[p>>>24&255]};F.interleave2=function(p,h){p&=65535;p=(p|p<<8)&16711935;p=(p|p<<4)&252645135;p=(p|p<<2)&858993459;
h&=65535;h=(h|h<<8)&16711935;h=(h|h<<4)&252645135;h=(h|h<<2)&858993459;return(p|p<<1)&1431655765|((h|h<<1)&1431655765)<<1};F.deinterleave2=function(p,h){p=p>>>h&1431655765;p=(p|p>>>1)&858993459;p=(p|p>>>2)&252645135;p=(p|p>>>4)&16711935;return((p|p>>>16)&65535)<<16>>16};F.interleave3=function(p,h,a){p&=1023;p=(p|p<<16)&4278190335;p=(p|p<<8)&251719695;p=(p|p<<4)&3272356035;h&=1023;h=(h|h<<16)&4278190335;h=(h|h<<8)&251719695;h=(h|h<<4)&3272356035;a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;
a=(a|a<<4)&3272356035;return(p|p<<2)&1227133513|((h|h<<2)&1227133513)<<1|((a|a<<2)&1227133513)<<2};F.deinterleave3=function(p,h){p=p>>>h&1227133513;p=(p|p>>>2)&3272356035;p=(p|p>>>4)&251719695;p=(p|p>>>8)&4278190335;return((p|p>>>16)&1023)<<22>>22};F.nextCombination=function(p){var h=p|p-1;return h+1|(~h&-~h)-1>>>q(p)+1}},{}],98:[function(b,y,F){function q(a,f,d,l,k,c,e){for(var g=0;g<f;g++){for(var m=0;m<d;m++)l[m]=a[m*f+g];n(l,k,c,e,d);for(m=0;m<d;m++)a[m*f+g]=k[m]}for(m=0;m<d;m++){for(g=0;g<f;g++)l[g]=
a[m*f+g];n(l,k,c,e,f);for(g=0;g<f;g++)a[m*f+g]=Math.sqrt(k[g])}}function n(a,f,d,l,k){d[0]=0;l[0]=-h;l[1]=+h;for(var c=1,e=0;c<k;c++){for(var g=(a[c]+c*c-(a[d[e]]+d[e]*d[e]))/(2*c-2*d[e]);g<=l[e];)e--,g=(a[c]+c*c-(a[d[e]]+d[e]*d[e]))/(2*c-2*d[e]);e++;d[e]=c;l[e]=g;l[e+1]=+h}for(e=c=0;c<k;c++){for(;l[e+1]<c;)e++;f[c]=(c-d[e])*(c-d[e])+a[d[e]]}}var p=b("clamp");y.exports=function(a,f){f||(f={});var d=null==f.cutoff?.25:f.cutoff,l=null==f.radius?8:f.radius,k=f.channel||0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!f.width||
!f.height)throw Error("For raw data width and height should be provided by options");var c=f.width;var e=f.height;var g=a;var m=f.stride?f.stride:Math.floor(a.length/c/e)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(e=a,g=e.getContext("2d"),c=e.width,e=e.height,g=g.getImageData(0,0,c,e),g=g.data,m=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(e=a.canvas,c=e.width,e=e.height,g=a.getImageData(0,0,c,e),g=g.data,m=4):window.ImageData&&a instanceof
window.ImageData&&(c=a.width,e=a.height,g=a.data,m=4);var r=Math.max(c,e);if(window.Uint8ClampedArray&&g instanceof window.Uint8ClampedArray||window.Uint8Array&&g instanceof window.Uint8Array){var u=g;g=Array(c*e);a=0;for(f=u.length;a<f;a++)g[a]=u[a*m+k]/255}else if(1!==m)throw Error("Raw data can have only 1 value per pixel");k=Array(c*e);m=Array(c*e);u=Array(r);var v=Array(r),w=Array(r+1);r=Array(r);a=0;for(f=c*e;a<f;a++){var D=g[a];k[a]=1===D?0:0===D?h:Math.pow(Math.max(0,.5-D),2);m[a]=1===D?h:
0===D?0:Math.pow(Math.max(0,D-.5),2)}q(k,c,e,u,v,r,w);q(m,c,e,u,v,r,w);g=window.Float32Array?new Float32Array(c*e):Array(c*e);a=0;for(f=c*e;a<f;a++)g[a]=p(1-((k[a]-m[a])/l+d),0,1);return g};var h=1E20},{clamp:120}],99:[function(b,y,F){(function(q,n){function p(t,G){if(!t)throw Error(G||"Assertion failed");}function h(t,G){t.super_=G;var H=function(){};H.prototype=G.prototype;t.prototype=new H;t.prototype.constructor=t}function a(t,G,H){if(a.isBN(t))return t;this.negative=0;this.words=null;this.length=
0;this.red=null;if(null!==t){if("le"===G||"be"===G)H=G,G=10;this._init(t||0,G||10,H||"be")}}function f(t,G,H){var I=0;for(H=Math.min(t.length,H);G<H;G++){var J=t.charCodeAt(G)-48;I<<=4;I=49<=J&&54>=J?I|J-49+10:17<=J&&22>=J?I|J-17+10:I|J&15}return I}function d(t,G,H,I){var J=0;for(H=Math.min(t.length,H);G<H;G++){var L=t.charCodeAt(G)-48;J*=I;J=49<=L?J+(L-49+10):17<=L?J+(L-17+10):J+L}return J}function l(t,G,H){H.negative=G.negative^t.negative;var I=t.length+G.length|0;H.length=I;I=I-1|0;var J=t.words[0]|
0,L=G.words[0]|0;J*=L;var E=J/67108864|0;H.words[0]=J&67108863;for(var K=1;K<I;K++){var N=E>>>26,O=E&67108863;E=Math.min(K,G.length-1);for(var Q=Math.max(0,K-t.length+1);Q<=E;Q++)J=t.words[K-Q|0]|0,L=G.words[Q]|0,J=J*L+O,N+=J/67108864|0,O=J&67108863;H.words[K]=O|0;E=N|0}0!==E?H.words[K]=E|0:H.length--;return H.strip()}function k(t,G){this.x=t;this.y=G}function c(t,G){this.name=t;this.p=new a(G,16);this.n=this.p.bitLength();this.k=(new a(1)).iushln(this.n).isub(this.p);this.tmp=this._tmp()}function e(){c.call(this,
"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function g(){c.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function m(){c.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function r(){c.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function u(t){"string"===typeof t?(t=a._prime(t),this.m=t.p,this.prime=t):(p(t.gtn(1),"modulus must be greater than 1"),this.m=t,
this.prime=null)}function v(t){u.call(this,t);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new a(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof q?q.exports=a:n.BN=a;a.BN=a;a.wordSize=26;try{var w=b("buffer").Buffer}catch(t){}a.isBN=function(t){return t instanceof a?!0:null!==t&&"object"===
typeof t&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)};a.max=function(t,G){return 0<t.cmp(G)?t:G};a.min=function(t,G){return 0>t.cmp(G)?t:G};a.prototype._init=function(t,G,H){if("number"===typeof t)return this._initNumber(t,G,H);if("object"===typeof t)return this._initArray(t,G,H);"hex"===G&&(G=16);p(G===(G|0)&&2<=G&&36>=G);t=t.toString().replace(/\s+/g,"");var I=0;"-"===t[0]&&I++;16===G?this._parseHex(t,I):this._parseBase(t,G,I);"-"===t[0]&&(this.negative=1);this.strip();"le"===H&&
this._initArray(this.toArray(),G,H)};a.prototype._initNumber=function(t,G,H){0>t&&(this.negative=1,t=-t);67108864>t?(this.words=[t&67108863],this.length=1):4503599627370496>t?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(p(9007199254740992>t),this.words=[t&67108863,t/67108864&67108863,1],this.length=3);"le"===H&&this._initArray(this.toArray(),G,H)};a.prototype._initArray=function(t,G,H){p("number"===typeof t.length);if(0>=t.length)return this.words=[0],this.length=1,this;this.length=
Math.ceil(t.length/3);this.words=Array(this.length);for(G=0;G<this.length;G++)this.words[G]=0;var I=0;if("be"===H)for(G=t.length-1,H=0;0<=G;G-=3){var J=t[G]|t[G-1]<<8|t[G-2]<<16;this.words[H]|=J<<I&67108863;this.words[H+1]=J>>>26-I&67108863;I+=24;26<=I&&(I-=26,H++)}else if("le"===H)for(H=G=0;G<t.length;G+=3)J=t[G]|t[G+1]<<8|t[G+2]<<16,this.words[H]|=J<<I&67108863,this.words[H+1]=J>>>26-I&67108863,I+=24,26<=I&&(I-=26,H++);return this.strip()};a.prototype._parseHex=function(t,G){this.length=Math.ceil((t.length-
G)/6);this.words=Array(this.length);for(var H=0;H<this.length;H++)this.words[H]=0;var I,J=0;H=t.length-6;for(I=0;H>=G;H-=6){var L=f(t,H,H+6);this.words[I]|=L<<J&67108863;this.words[I+1]|=L>>>26-J&4194303;J+=24;26<=J&&(J-=26,I++)}H+6!==G&&(L=f(t,G,H+6),this.words[I]|=L<<J&67108863,this.words[I+1]|=L>>>26-J&4194303);this.strip()};a.prototype._parseBase=function(t,G,H){this.words=[0];this.length=1;for(var I=0,J=1;67108863>=J;J*=G)I++;I--;J=J/G|0;var L=t.length-H,E=L%I;L=Math.min(L,L-E)+H;for(var K=H;K<
L;K+=I)H=d(t,K,K+I,G),this.imuln(J),67108864>this.words[0]+H?this.words[0]+=H:this._iaddn(H);if(0!==E){I=1;H=d(t,K,t.length,G);for(K=0;K<E;K++)I*=G;this.imuln(I);67108864>this.words[0]+H?this.words[0]+=H:this._iaddn(H)}};a.prototype.copy=function(t){t.words=Array(this.length);for(var G=0;G<this.length;G++)t.words[G]=this.words[G];t.length=this.length;t.negative=this.negative;t.red=this.red};a.prototype.clone=function(){var t=new a(null);this.copy(t);return t};a.prototype._expand=function(t){for(;this.length<
t;)this.words[this.length++]=0;return this};a.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};a.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};a.prototype.inspect=function(){return(this.red?"\x3cBN-R: ":"\x3cBN: ")+this.toString(16)+"\x3e"};var D=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
C=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(t,G){t=t||10;G=G|0||1;if(16===t||"hex"===t){var H="";for(var I=t=0,J=0;J<this.length;J++){var L=
this.words[J],E=((L<<t|I)&16777215).toString(16);I=L>>>24-t&16777215;H=0!==I||J!==this.length-1?D[6-E.length]+E+H:E+H;t+=2;26<=t&&(t-=26,J--)}for(0!==I&&(H=I.toString(16)+H);0!==H.length%G;)H="0"+H;0!==this.negative&&(H="-"+H);return H}if(t===(t|0)&&2<=t&&36>=t){I=C[t];J=x[t];H="";L=this.clone();for(L.negative=0;!L.isZero();)E=L.modn(J).toString(t),L=L.idivn(J),H=L.isZero()?E+H:D[I-E.length]+E+H;for(this.isZero()&&(H="0"+H);0!==H.length%G;)H="0"+H;0!==this.negative&&(H="-"+H);return H}p(!1,"Base should be between 2 and 36")};
a.prototype.toNumber=function(){var t=this.words[0];2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&p(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-t:t};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(t,G){p("undefined"!==typeof w);return this.toArrayLike(w,t,G)};a.prototype.toArray=function(t,G){return this.toArrayLike(Array,t,G)};a.prototype.toArrayLike=
function(t,G,H){var I=this.byteLength();H=H||Math.max(1,I);p(I<=H,"byte array longer than desired length");p(0<H,"Requested array length \x3c\x3d 0");this.strip();var J="le"===G;t=new t(H);G=this.clone();if(J){for(J=0;!G.isZero();J++)I=G.andln(255),G.iushrn(8),t[J]=I;for(;J<H;J++)t[J]=0}else{for(J=0;J<H-I;J++)t[J]=0;for(J=0;!G.isZero();J++)I=G.andln(255),G.iushrn(8),t[H-J-1]=I}return t};a.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var G=0;4096<=t&&(G+=13,t>>>=
13);64<=t&&(G+=7,t>>>=7);8<=t&&(G+=4,t>>>=4);2<=t&&(G+=2,t>>>=2);return G+t};a.prototype._zeroBits=function(t){if(0===t)return 26;var G=0;0===(t&8191)&&(G+=13,t>>>=13);0===(t&127)&&(G+=7,t>>>=7);0===(t&15)&&(G+=4,t>>>=4);0===(t&3)&&(G+=2,t>>>=2);0===(t&1)&&G++;return G};a.prototype.bitLength=function(){var t=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+t};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,G=0;G<this.length;G++){var H=this._zeroBits(this.words[G]);
t+=H;if(26!==H)break}return t};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()};a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==this.negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};a.prototype.iuor=
function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var G=0;G<t.length;G++)this.words[G]|=t.words[G];return this.strip()};a.prototype.ior=function(t){p(0===(this.negative|t.negative));return this.iuor(t)};a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)};a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)};a.prototype.iuand=function(t){var G=this.length>t.length?t:this;for(var H=0;H<G.length;H++)this.words[H]&=
t.words[H];this.length=G.length;return this.strip()};a.prototype.iand=function(t){p(0===(this.negative|t.negative));return this.iuand(t)};a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)};a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)};a.prototype.iuxor=function(t){if(this.length>t.length)var G=this;else G=t,t=this;for(var H=0;H<t.length;H++)this.words[H]=G.words[H]^t.words[H];if(this!==G)for(;H<
G.length;H++)this.words[H]=G.words[H];this.length=G.length;return this.strip()};a.prototype.ixor=function(t){p(0===(this.negative|t.negative));return this.iuxor(t)};a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)};a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)};a.prototype.inotn=function(t){p("number"===typeof t&&0<=t);var G=Math.ceil(t/26)|0;t%=26;this._expand(G);0<t&&G--;for(var H=0;H<G;H++)this.words[H]=
~this.words[H]&67108863;0<t&&(this.words[H]=~this.words[H]&67108863>>26-t);return this.strip()};a.prototype.notn=function(t){return this.clone().inotn(t)};a.prototype.setn=function(t,G){p("number"===typeof t&&0<=t);var H=t/26|0;t%=26;this._expand(H+1);this.words[H]=G?this.words[H]|1<<t:this.words[H]&~(1<<t);return this.strip()};a.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative){t.negative=
0;var G=this.isub(t);t.negative=1;return G._normSign()}if(this.length>t.length)var H=this;else H=t,t=this;for(var I=G=0;I<t.length;I++)G=(H.words[I]|0)+(t.words[I]|0)+G,this.words[I]=G&67108863,G>>>=26;for(;0!==G&&I<H.length;I++)G=(H.words[I]|0)+G,this.words[I]=G&67108863,G>>>=26;this.length=H.length;if(0!==G)this.words[this.length]=G,this.length++;else if(H!==this)for(;I<H.length;I++)this.words[I]=H.words[I];return this};a.prototype.add=function(t){if(0!==t.negative&&0===this.negative){t.negative=
0;var G=this.sub(t);t.negative^=1;return G}return 0===t.negative&&0!==this.negative?(this.negative=0,G=t.sub(this),this.negative=1,G):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)};a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var G=this.iadd(t);t.negative=1;return G._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();G=this.cmp(t);if(0===G)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<G)var H=this;
else H=t,t=this;for(var I=0,J=0;J<t.length;J++)G=(H.words[J]|0)-(t.words[J]|0)+I,I=G>>26,this.words[J]=G&67108863;for(;0!==I&&J<H.length;J++)G=(H.words[J]|0)+I,I=G>>26,this.words[J]=G&67108863;if(0===I&&J<H.length&&H!==this)for(;J<H.length;J++)this.words[J]=H.words[J];this.length=Math.max(this.length,J);H!==this&&(this.negative=1);return this.strip()};a.prototype.sub=function(t){return this.clone().isub(t)};var A=function(t,G,H){var I=t.words,J=G.words,L=H.words,E=0,K=I[0]|0,N=K&8191,O=K>>>13,Q=I[1]|
0;K=Q&8191;var P=Q>>>13,T=I[2]|0;Q=T&8191;var V=T>>>13,aa=I[3]|0;T=aa&8191;var ba=aa>>>13,Y=I[4]|0;aa=Y&8191;var ea=Y>>>13,da=I[5]|0;Y=da&8191;var ca=da>>>13,la=I[6]|0;da=la&8191;var pa=la>>>13,qa=I[7]|0;la=qa&8191;var oa=qa>>>13,ka=I[8]|0;qa=ka&8191;ka>>>=13;var ra=I[9]|0;I=ra&8191;ra>>>=13;var ha=J[0]|0,ma=ha&8191,wa=ha>>>13,na=J[1]|0;ha=na&8191;var ya=na>>>13,Fa=J[2]|0;na=Fa&8191;var Ha=Fa>>>13,eb=J[3]|0;Fa=eb&8191;var hb=eb>>>13,ob=J[4]|0;eb=ob&8191;var ib=ob>>>13,Pa=J[5]|0;ob=Pa&8191;var sb=
Pa>>>13,tb=J[6]|0;Pa=tb&8191;var Aa=tb>>>13,Ka=J[7]|0;tb=Ka&8191;var Qa=Ka>>>13,Xa=J[8]|0;Ka=Xa&8191;Xa>>>=13;var pb=J[9]|0;J=pb&8191;pb>>>=13;H.negative=t.negative^G.negative;H.length=19;var db=Math.imul(N,ma);t=Math.imul(N,wa);t=t+Math.imul(O,ma)|0;G=Math.imul(O,wa);var Ia=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(Ia>>>26)|0;Ia&=67108863;db=Math.imul(K,ma);t=Math.imul(K,wa);t=t+Math.imul(P,ma)|0;G=Math.imul(P,wa);db=db+Math.imul(N,ha)|0;t=t+Math.imul(N,ya)|0;t=t+Math.imul(O,ha)|0;G=G+Math.imul(O,
ya)|0;var Ua=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(Ua>>>26)|0;Ua&=67108863;db=Math.imul(Q,ma);t=Math.imul(Q,wa);t=t+Math.imul(V,ma)|0;G=Math.imul(V,wa);db=db+Math.imul(K,ha)|0;t=t+Math.imul(K,ya)|0;t=t+Math.imul(P,ha)|0;G=G+Math.imul(P,ya)|0;db=db+Math.imul(N,na)|0;t=t+Math.imul(N,Ha)|0;t=t+Math.imul(O,na)|0;G=G+Math.imul(O,Ha)|0;var $a=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+($a>>>26)|0;$a&=67108863;db=Math.imul(T,ma);t=Math.imul(T,wa);t=t+Math.imul(ba,ma)|0;G=Math.imul(ba,wa);db=db+Math.imul(Q,
ha)|0;t=t+Math.imul(Q,ya)|0;t=t+Math.imul(V,ha)|0;G=G+Math.imul(V,ya)|0;db=db+Math.imul(K,na)|0;t=t+Math.imul(K,Ha)|0;t=t+Math.imul(P,na)|0;G=G+Math.imul(P,Ha)|0;db=db+Math.imul(N,Fa)|0;t=t+Math.imul(N,hb)|0;t=t+Math.imul(O,Fa)|0;G=G+Math.imul(O,hb)|0;var xa=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(xa>>>26)|0;xa&=67108863;db=Math.imul(aa,ma);t=Math.imul(aa,wa);t=t+Math.imul(ea,ma)|0;G=Math.imul(ea,wa);db=db+Math.imul(T,ha)|0;t=t+Math.imul(T,ya)|0;t=t+Math.imul(ba,ha)|0;G=G+Math.imul(ba,ya)|0;db=
db+Math.imul(Q,na)|0;t=t+Math.imul(Q,Ha)|0;t=t+Math.imul(V,na)|0;G=G+Math.imul(V,Ha)|0;db=db+Math.imul(K,Fa)|0;t=t+Math.imul(K,hb)|0;t=t+Math.imul(P,Fa)|0;G=G+Math.imul(P,hb)|0;db=db+Math.imul(N,eb)|0;t=t+Math.imul(N,ib)|0;t=t+Math.imul(O,eb)|0;G=G+Math.imul(O,ib)|0;var Ga=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(Ga>>>26)|0;Ga&=67108863;db=Math.imul(Y,ma);t=Math.imul(Y,wa);t=t+Math.imul(ca,ma)|0;G=Math.imul(ca,wa);db=db+Math.imul(aa,ha)|0;t=t+Math.imul(aa,ya)|0;t=t+Math.imul(ea,ha)|0;G=G+Math.imul(ea,
ya)|0;db=db+Math.imul(T,na)|0;t=t+Math.imul(T,Ha)|0;t=t+Math.imul(ba,na)|0;G=G+Math.imul(ba,Ha)|0;db=db+Math.imul(Q,Fa)|0;t=t+Math.imul(Q,hb)|0;t=t+Math.imul(V,Fa)|0;G=G+Math.imul(V,hb)|0;db=db+Math.imul(K,eb)|0;t=t+Math.imul(K,ib)|0;t=t+Math.imul(P,eb)|0;G=G+Math.imul(P,ib)|0;db=db+Math.imul(N,ob)|0;t=t+Math.imul(N,sb)|0;t=t+Math.imul(O,ob)|0;G=G+Math.imul(O,sb)|0;var Va=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(Va>>>26)|0;Va&=67108863;db=Math.imul(da,ma);t=Math.imul(da,wa);t=t+Math.imul(pa,ma)|
0;G=Math.imul(pa,wa);db=db+Math.imul(Y,ha)|0;t=t+Math.imul(Y,ya)|0;t=t+Math.imul(ca,ha)|0;G=G+Math.imul(ca,ya)|0;db=db+Math.imul(aa,na)|0;t=t+Math.imul(aa,Ha)|0;t=t+Math.imul(ea,na)|0;G=G+Math.imul(ea,Ha)|0;db=db+Math.imul(T,Fa)|0;t=t+Math.imul(T,hb)|0;t=t+Math.imul(ba,Fa)|0;G=G+Math.imul(ba,hb)|0;db=db+Math.imul(Q,eb)|0;t=t+Math.imul(Q,ib)|0;t=t+Math.imul(V,eb)|0;G=G+Math.imul(V,ib)|0;db=db+Math.imul(K,ob)|0;t=t+Math.imul(K,sb)|0;t=t+Math.imul(P,ob)|0;G=G+Math.imul(P,sb)|0;db=db+Math.imul(N,Pa)|
0;t=t+Math.imul(N,Aa)|0;t=t+Math.imul(O,Pa)|0;G=G+Math.imul(O,Aa)|0;var gb=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(gb>>>26)|0;gb&=67108863;db=Math.imul(la,ma);t=Math.imul(la,wa);t=t+Math.imul(oa,ma)|0;G=Math.imul(oa,wa);db=db+Math.imul(da,ha)|0;t=t+Math.imul(da,ya)|0;t=t+Math.imul(pa,ha)|0;G=G+Math.imul(pa,ya)|0;db=db+Math.imul(Y,na)|0;t=t+Math.imul(Y,Ha)|0;t=t+Math.imul(ca,na)|0;G=G+Math.imul(ca,Ha)|0;db=db+Math.imul(aa,Fa)|0;t=t+Math.imul(aa,hb)|0;t=t+Math.imul(ea,Fa)|0;G=G+Math.imul(ea,hb)|
0;db=db+Math.imul(T,eb)|0;t=t+Math.imul(T,ib)|0;t=t+Math.imul(ba,eb)|0;G=G+Math.imul(ba,ib)|0;db=db+Math.imul(Q,ob)|0;t=t+Math.imul(Q,sb)|0;t=t+Math.imul(V,ob)|0;G=G+Math.imul(V,sb)|0;db=db+Math.imul(K,Pa)|0;t=t+Math.imul(K,Aa)|0;t=t+Math.imul(P,Pa)|0;G=G+Math.imul(P,Aa)|0;db=db+Math.imul(N,tb)|0;t=t+Math.imul(N,Qa)|0;t=t+Math.imul(O,tb)|0;G=G+Math.imul(O,Qa)|0;var Ma=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(Ma>>>26)|0;Ma&=67108863;db=Math.imul(qa,ma);t=Math.imul(qa,wa);t=t+Math.imul(ka,ma)|0;
G=Math.imul(ka,wa);db=db+Math.imul(la,ha)|0;t=t+Math.imul(la,ya)|0;t=t+Math.imul(oa,ha)|0;G=G+Math.imul(oa,ya)|0;db=db+Math.imul(da,na)|0;t=t+Math.imul(da,Ha)|0;t=t+Math.imul(pa,na)|0;G=G+Math.imul(pa,Ha)|0;db=db+Math.imul(Y,Fa)|0;t=t+Math.imul(Y,hb)|0;t=t+Math.imul(ca,Fa)|0;G=G+Math.imul(ca,hb)|0;db=db+Math.imul(aa,eb)|0;t=t+Math.imul(aa,ib)|0;t=t+Math.imul(ea,eb)|0;G=G+Math.imul(ea,ib)|0;db=db+Math.imul(T,ob)|0;t=t+Math.imul(T,sb)|0;t=t+Math.imul(ba,ob)|0;G=G+Math.imul(ba,sb)|0;db=db+Math.imul(Q,
Pa)|0;t=t+Math.imul(Q,Aa)|0;t=t+Math.imul(V,Pa)|0;G=G+Math.imul(V,Aa)|0;db=db+Math.imul(K,tb)|0;t=t+Math.imul(K,Qa)|0;t=t+Math.imul(P,tb)|0;G=G+Math.imul(P,Qa)|0;db=db+Math.imul(N,Ka)|0;t=t+Math.imul(N,Xa)|0;t=t+Math.imul(O,Ka)|0;G=G+Math.imul(O,Xa)|0;var cb=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(cb>>>26)|0;cb&=67108863;db=Math.imul(I,ma);t=Math.imul(I,wa);t=t+Math.imul(ra,ma)|0;G=Math.imul(ra,wa);db=db+Math.imul(qa,ha)|0;t=t+Math.imul(qa,ya)|0;t=t+Math.imul(ka,ha)|0;G=G+Math.imul(ka,ya)|0;db=
db+Math.imul(la,na)|0;t=t+Math.imul(la,Ha)|0;t=t+Math.imul(oa,na)|0;G=G+Math.imul(oa,Ha)|0;db=db+Math.imul(da,Fa)|0;t=t+Math.imul(da,hb)|0;t=t+Math.imul(pa,Fa)|0;G=G+Math.imul(pa,hb)|0;db=db+Math.imul(Y,eb)|0;t=t+Math.imul(Y,ib)|0;t=t+Math.imul(ca,eb)|0;G=G+Math.imul(ca,ib)|0;db=db+Math.imul(aa,ob)|0;t=t+Math.imul(aa,sb)|0;t=t+Math.imul(ea,ob)|0;G=G+Math.imul(ea,sb)|0;db=db+Math.imul(T,Pa)|0;t=t+Math.imul(T,Aa)|0;t=t+Math.imul(ba,Pa)|0;G=G+Math.imul(ba,Aa)|0;db=db+Math.imul(Q,tb)|0;t=t+Math.imul(Q,
Qa)|0;t=t+Math.imul(V,tb)|0;G=G+Math.imul(V,Qa)|0;db=db+Math.imul(K,Ka)|0;t=t+Math.imul(K,Xa)|0;t=t+Math.imul(P,Ka)|0;G=G+Math.imul(P,Xa)|0;db=db+Math.imul(N,J)|0;t=t+Math.imul(N,pb)|0;t=t+Math.imul(O,J)|0;G=G+Math.imul(O,pb)|0;N=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(N>>>26)|0;N&=67108863;db=Math.imul(I,ha);t=Math.imul(I,ya);t=t+Math.imul(ra,ha)|0;G=Math.imul(ra,ya);db=db+Math.imul(qa,na)|0;t=t+Math.imul(qa,Ha)|0;t=t+Math.imul(ka,na)|0;G=G+Math.imul(ka,Ha)|0;db=db+Math.imul(la,Fa)|0;t=t+Math.imul(la,
hb)|0;t=t+Math.imul(oa,Fa)|0;G=G+Math.imul(oa,hb)|0;db=db+Math.imul(da,eb)|0;t=t+Math.imul(da,ib)|0;t=t+Math.imul(pa,eb)|0;G=G+Math.imul(pa,ib)|0;db=db+Math.imul(Y,ob)|0;t=t+Math.imul(Y,sb)|0;t=t+Math.imul(ca,ob)|0;G=G+Math.imul(ca,sb)|0;db=db+Math.imul(aa,Pa)|0;t=t+Math.imul(aa,Aa)|0;t=t+Math.imul(ea,Pa)|0;G=G+Math.imul(ea,Aa)|0;db=db+Math.imul(T,tb)|0;t=t+Math.imul(T,Qa)|0;t=t+Math.imul(ba,tb)|0;G=G+Math.imul(ba,Qa)|0;db=db+Math.imul(Q,Ka)|0;t=t+Math.imul(Q,Xa)|0;t=t+Math.imul(V,Ka)|0;G=G+Math.imul(V,
Xa)|0;db=db+Math.imul(K,J)|0;t=t+Math.imul(K,pb)|0;t=t+Math.imul(P,J)|0;G=G+Math.imul(P,pb)|0;K=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(K>>>26)|0;K&=67108863;db=Math.imul(I,na);t=Math.imul(I,Ha);t=t+Math.imul(ra,na)|0;G=Math.imul(ra,Ha);db=db+Math.imul(qa,Fa)|0;t=t+Math.imul(qa,hb)|0;t=t+Math.imul(ka,Fa)|0;G=G+Math.imul(ka,hb)|0;db=db+Math.imul(la,eb)|0;t=t+Math.imul(la,ib)|0;t=t+Math.imul(oa,eb)|0;G=G+Math.imul(oa,ib)|0;db=db+Math.imul(da,ob)|0;t=t+Math.imul(da,sb)|0;t=t+Math.imul(pa,ob)|0;G=
G+Math.imul(pa,sb)|0;db=db+Math.imul(Y,Pa)|0;t=t+Math.imul(Y,Aa)|0;t=t+Math.imul(ca,Pa)|0;G=G+Math.imul(ca,Aa)|0;db=db+Math.imul(aa,tb)|0;t=t+Math.imul(aa,Qa)|0;t=t+Math.imul(ea,tb)|0;G=G+Math.imul(ea,Qa)|0;db=db+Math.imul(T,Ka)|0;t=t+Math.imul(T,Xa)|0;t=t+Math.imul(ba,Ka)|0;G=G+Math.imul(ba,Xa)|0;db=db+Math.imul(Q,J)|0;t=t+Math.imul(Q,pb)|0;t=t+Math.imul(V,J)|0;G=G+Math.imul(V,pb)|0;Q=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(Q>>>26)|0;Q&=67108863;db=Math.imul(I,Fa);t=Math.imul(I,hb);t=t+Math.imul(ra,
Fa)|0;G=Math.imul(ra,hb);db=db+Math.imul(qa,eb)|0;t=t+Math.imul(qa,ib)|0;t=t+Math.imul(ka,eb)|0;G=G+Math.imul(ka,ib)|0;db=db+Math.imul(la,ob)|0;t=t+Math.imul(la,sb)|0;t=t+Math.imul(oa,ob)|0;G=G+Math.imul(oa,sb)|0;db=db+Math.imul(da,Pa)|0;t=t+Math.imul(da,Aa)|0;t=t+Math.imul(pa,Pa)|0;G=G+Math.imul(pa,Aa)|0;db=db+Math.imul(Y,tb)|0;t=t+Math.imul(Y,Qa)|0;t=t+Math.imul(ca,tb)|0;G=G+Math.imul(ca,Qa)|0;db=db+Math.imul(aa,Ka)|0;t=t+Math.imul(aa,Xa)|0;t=t+Math.imul(ea,Ka)|0;G=G+Math.imul(ea,Xa)|0;db=db+Math.imul(T,
J)|0;t=t+Math.imul(T,pb)|0;t=t+Math.imul(ba,J)|0;G=G+Math.imul(ba,pb)|0;T=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(T>>>26)|0;T&=67108863;db=Math.imul(I,eb);t=Math.imul(I,ib);t=t+Math.imul(ra,eb)|0;G=Math.imul(ra,ib);db=db+Math.imul(qa,ob)|0;t=t+Math.imul(qa,sb)|0;t=t+Math.imul(ka,ob)|0;G=G+Math.imul(ka,sb)|0;db=db+Math.imul(la,Pa)|0;t=t+Math.imul(la,Aa)|0;t=t+Math.imul(oa,Pa)|0;G=G+Math.imul(oa,Aa)|0;db=db+Math.imul(da,tb)|0;t=t+Math.imul(da,Qa)|0;t=t+Math.imul(pa,tb)|0;G=G+Math.imul(pa,Qa)|0;
db=db+Math.imul(Y,Ka)|0;t=t+Math.imul(Y,Xa)|0;t=t+Math.imul(ca,Ka)|0;G=G+Math.imul(ca,Xa)|0;db=db+Math.imul(aa,J)|0;t=t+Math.imul(aa,pb)|0;t=t+Math.imul(ea,J)|0;G=G+Math.imul(ea,pb)|0;aa=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(aa>>>26)|0;aa&=67108863;db=Math.imul(I,ob);t=Math.imul(I,sb);t=t+Math.imul(ra,ob)|0;G=Math.imul(ra,sb);db=db+Math.imul(qa,Pa)|0;t=t+Math.imul(qa,Aa)|0;t=t+Math.imul(ka,Pa)|0;G=G+Math.imul(ka,Aa)|0;db=db+Math.imul(la,tb)|0;t=t+Math.imul(la,Qa)|0;t=t+Math.imul(oa,tb)|0;G=
G+Math.imul(oa,Qa)|0;db=db+Math.imul(da,Ka)|0;t=t+Math.imul(da,Xa)|0;t=t+Math.imul(pa,Ka)|0;G=G+Math.imul(pa,Xa)|0;db=db+Math.imul(Y,J)|0;t=t+Math.imul(Y,pb)|0;t=t+Math.imul(ca,J)|0;G=G+Math.imul(ca,pb)|0;Y=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(Y>>>26)|0;Y&=67108863;db=Math.imul(I,Pa);t=Math.imul(I,Aa);t=t+Math.imul(ra,Pa)|0;G=Math.imul(ra,Aa);db=db+Math.imul(qa,tb)|0;t=t+Math.imul(qa,Qa)|0;t=t+Math.imul(ka,tb)|0;G=G+Math.imul(ka,Qa)|0;db=db+Math.imul(la,Ka)|0;t=t+Math.imul(la,Xa)|0;t=t+Math.imul(oa,
Ka)|0;G=G+Math.imul(oa,Xa)|0;db=db+Math.imul(da,J)|0;t=t+Math.imul(da,pb)|0;t=t+Math.imul(pa,J)|0;G=G+Math.imul(pa,pb)|0;da=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(da>>>26)|0;da&=67108863;db=Math.imul(I,tb);t=Math.imul(I,Qa);t=t+Math.imul(ra,tb)|0;G=Math.imul(ra,Qa);db=db+Math.imul(qa,Ka)|0;t=t+Math.imul(qa,Xa)|0;t=t+Math.imul(ka,Ka)|0;G=G+Math.imul(ka,Xa)|0;db=db+Math.imul(la,J)|0;t=t+Math.imul(la,pb)|0;t=t+Math.imul(oa,J)|0;G=G+Math.imul(oa,pb)|0;la=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+
(la>>>26)|0;la&=67108863;db=Math.imul(I,Ka);t=Math.imul(I,Xa);t=t+Math.imul(ra,Ka)|0;G=Math.imul(ra,Xa);db=db+Math.imul(qa,J)|0;t=t+Math.imul(qa,pb)|0;t=t+Math.imul(ka,J)|0;G=G+Math.imul(ka,pb)|0;qa=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(qa>>>26)|0;qa&=67108863;db=Math.imul(I,J);t=Math.imul(I,pb);t=t+Math.imul(ra,J)|0;G=Math.imul(ra,pb);O=(E+db|0)+((t&8191)<<13)|0;E=(G+(t>>>13)|0)+(O>>>26)|0;L[0]=Ia;L[1]=Ua;L[2]=$a;L[3]=xa;L[4]=Ga;L[5]=Va;L[6]=gb;L[7]=Ma;L[8]=cb;L[9]=N;L[10]=K;L[11]=Q;L[12]=
T;L[13]=aa;L[14]=Y;L[15]=da;L[16]=la;L[17]=qa;L[18]=O&67108863;0!==E&&(L[19]=E,H.length++);return H};Math.imul||(A=l);a.prototype.mulTo=function(t,G){var H=this.length+t.length;if(10===this.length&&10===t.length)t=A(this,t,G);else if(63>H)t=l(this,t,G);else if(1024>H){G.negative=t.negative^this.negative;G.length=this.length+t.length;for(var I=0,J=H=0;J<G.length-1;J++){var L=H;H=0;I&=67108863;for(var E=Math.min(J,t.length-1),K=Math.max(0,J-this.length+1);K<=E;K++){var N=(this.words[J-K]|0)*(t.words[K]|
0),O=N&67108863;L=L+(N/67108864|0)|0;O=O+I|0;I=O&67108863;L=L+(O>>>26)|0;H+=L>>>26;L&=67108863}G.words[J]=I;I=L}0!==I?G.words[J]=I:G.length--;t=G.strip()}else t=(new k).mulp(this,t,G);return t};k.prototype.makeRBT=function(t){for(var G=Array(t),H=a.prototype._countBits(t)-1,I=0;I<t;I++)G[I]=this.revBin(I,H,t);return G};k.prototype.revBin=function(t,G,H){if(0===t||t===H-1)return t;for(var I=H=0;I<G;I++)H|=(t&1)<<G-I-1,t>>=1;return H};k.prototype.permute=function(t,G,H,I,J,L){for(var E=0;E<L;E++)I[E]=
G[t[E]],J[E]=H[t[E]]};k.prototype.transform=function(t,G,H,I,J,L){this.permute(L,t,G,H,I,J);for(t=1;t<J;t<<=1){G=t<<1;L=Math.cos(2*Math.PI/G);for(var E=Math.sin(2*Math.PI/G),K=0;K<J;K+=G)for(var N=L,O=E,Q=0;Q<t;Q++){var P=H[K+Q],T=I[K+Q],V=H[K+Q+t],aa=I[K+Q+t],ba=N*V-O*aa;aa=N*aa+O*V;V=ba;H[K+Q]=P+V;I[K+Q]=T+aa;H[K+Q+t]=P-V;I[K+Q+t]=T-aa;Q!==G&&(ba=L*N-E*O,O=L*O+E*N,N=ba)}}};k.prototype.guessLen13b=function(t,G){t=Math.max(G,t)|1;G=t&1;var H=0;for(t=t/2|0;t;t>>>=1)H++;return 1<<H+1+G};k.prototype.conjugate=
function(t,G,H){if(!(1>=H))for(var I=0;I<H/2;I++){var J=t[I];t[I]=t[H-I-1];t[H-I-1]=J;J=G[I];G[I]=-G[H-I-1];G[H-I-1]=-J}};k.prototype.normalize13b=function(t,G){for(var H=0,I=0;I<G/2;I++)H=8192*Math.round(t[2*I+1]/G)+Math.round(t[2*I]/G)+H,t[I]=H&67108863,H=67108864>H?0:H/67108864|0;return t};k.prototype.convert13b=function(t,G,H,I){for(var J=0,L=0;L<G;L++)J+=t[L]|0,H[2*L]=J&8191,J>>>=13,H[2*L+1]=J&8191,J>>>=13;for(L=2*G;L<I;++L)H[L]=0;p(0===J);p(0===(J&-8192))};k.prototype.stub=function(t){for(var G=
Array(t),H=0;H<t;H++)G[H]=0;return G};k.prototype.mulp=function(t,G,H){var I=2*this.guessLen13b(t.length,G.length),J=this.makeRBT(I),L=this.stub(I),E=Array(I),K=Array(I),N=Array(I),O=Array(I),Q=Array(I),P=Array(I),T=H.words;T.length=I;this.convert13b(t.words,t.length,E,I);this.convert13b(G.words,G.length,O,I);this.transform(E,L,K,N,I,J);this.transform(O,L,Q,P,I,J);for(E=0;E<I;E++)O=K[E]*Q[E]-N[E]*P[E],N[E]=K[E]*P[E]+N[E]*Q[E],K[E]=O;this.conjugate(K,N,I);this.transform(K,N,T,L,I,J);this.conjugate(T,
L,I);this.normalize13b(T,I);H.negative=t.negative^G.negative;H.length=t.length+G.length;return H.strip()};a.prototype.mul=function(t){var G=new a(null);G.words=Array(this.length+t.length);return this.mulTo(t,G)};a.prototype.mulf=function(t){var G=new a(null);G.words=Array(this.length+t.length);return(new k).mulp(this,t,G)};a.prototype.imul=function(t){return this.clone().mulTo(t,this)};a.prototype.imuln=function(t){p("number"===typeof t);p(67108864>t);for(var G=0,H=0;H<this.length;H++){var I=(this.words[H]|
0)*t,J=(I&67108863)+(G&67108863);G>>=26;G+=I/67108864|0;G+=J>>>26;this.words[H]=J&67108863}0!==G&&(this.words[H]=G,this.length++);return this};a.prototype.muln=function(t){return this.clone().imuln(t)};a.prototype.sqr=function(){return this.mul(this)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(t){for(var G=Array(t.bitLength()),H=0;H<G.length;H++){var I=H%26;G[H]=(t.words[H/26|0]&1<<I)>>>I}if(0===G.length)return new a(1);t=this;for(H=0;H<G.length&&0===G[H];H++,
t=t.sqr());if(++H<G.length)for(I=t.sqr();H<G.length;H++,I=I.sqr())0!==G[H]&&(t=t.mul(I));return t};a.prototype.iushln=function(t){p("number"===typeof t&&0<=t);var G=t%26;t=(t-G)/26;var H=67108863>>>26-G<<26-G,I;if(0!==G){var J=0;for(I=0;I<this.length;I++){var L=this.words[I]&H;this.words[I]=(this.words[I]|0)-L<<G|J;J=L>>>26-G}J&&(this.words[I]=J,this.length++)}if(0!==t){for(I=this.length-1;0<=I;I--)this.words[I+t]=this.words[I];for(I=0;I<t;I++)this.words[I]=0;this.length+=t}return this.strip()};a.prototype.ishln=
function(t){p(0===this.negative);return this.iushln(t)};a.prototype.iushrn=function(t,G,H){p("number"===typeof t&&0<=t);var I=t%26,J=Math.min((t-I)/26,this.length);t=67108863^67108863>>>I<<I;G=Math.max(0,(G?(G-G%26)/26:0)-J);if(H){for(var L=0;L<J;L++)H.words[L]=this.words[L];H.length=J}if(0!==J)if(this.length>J)for(this.length-=J,L=0;L<this.length;L++)this.words[L]=this.words[L+J];else this.words[0]=0,this.length=1;J=0;for(L=this.length-1;0<=L&&(0!==J||L>=G);L--){var E=this.words[L]|0;this.words[L]=
J<<26-I|E>>>I;J=E&t}H&&0!==J&&(H.words[H.length++]=J);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};a.prototype.ishrn=function(t,G,H){p(0===this.negative);return this.iushrn(t,G,H)};a.prototype.shln=function(t){return this.clone().ishln(t)};a.prototype.ushln=function(t){return this.clone().iushln(t)};a.prototype.shrn=function(t){return this.clone().ishrn(t)};a.prototype.ushrn=function(t){return this.clone().iushrn(t)};a.prototype.testn=function(t){p("number"===typeof t&&0<=
t);var G=t%26;t=(t-G)/26;return this.length<=t?!1:!!(this.words[t]&1<<G)};a.prototype.imaskn=function(t){p("number"===typeof t&&0<=t);var G=t%26;t=(t-G)/26;p(0===this.negative,"imaskn works only with positive numbers");if(this.length<=t)return this;0!==G&&t++;this.length=Math.min(t,this.length);0!==G&&(this.words[this.length-1]&=67108863^67108863>>>G<<G);return this.strip()};a.prototype.maskn=function(t){return this.clone().imaskn(t)};a.prototype.iaddn=function(t){p("number"===typeof t);p(67108864>
t);if(0>t)return this.isubn(-t);if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<t)return this.words[0]=t-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};a.prototype._iaddn=function(t){this.words[0]+=t;for(t=0;t<this.length&&67108864<=this.words[t];t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;this.length=Math.max(this.length,t+1);return this};a.prototype.isubn=function(t){p("number"===
typeof t);p(67108864>t);if(0>t)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;this.words[0]-=t;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(t=0;t<this.length&&0>this.words[t];t++)this.words[t]+=67108864,--this.words[t+1];return this.strip()};a.prototype.addn=function(t){return this.clone().iaddn(t)};a.prototype.subn=function(t){return this.clone().isubn(t)};a.prototype.iabs=function(){this.negative=
0;return this};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(t,G,H){var I;this._expand(t.length+H);var J=0;for(I=0;I<t.length;I++){var L=(this.words[I+H]|0)+J;J=(t.words[I]|0)*G;L-=J&67108863;J=(L>>26)-(J/67108864|0);this.words[I+H]=L&67108863}for(;I<this.length-H;I++)L=(this.words[I+H]|0)+J,J=L>>26,this.words[I+H]=L&67108863;if(0===J)return this.strip();p(-1===J);for(I=J=0;I<this.length;I++)L=-(this.words[I]|0)+J,J=L>>26,this.words[I]=L&67108863;this.negative=
1;return this.strip()};a.prototype._wordDiv=function(t,G){var H=this.clone(),I=t,J=I.words[I.length-1]|0;t=26-this._countBits(J);0!==t&&(I=I.ushln(t),H.iushln(t),J=I.words[I.length-1]|0);var L=H.length-I.length;if("mod"!==G){var E=new a(null);E.length=L+1;E.words=Array(E.length);for(var K=0;K<E.length;K++)E.words[K]=0}K=H.clone()._ishlnsubmul(I,1,L);0===K.negative&&(H=K,E&&(E.words[L]=1));for(--L;0<=L;L--){K=67108864*(H.words[I.length+L]|0)+(H.words[I.length+L-1]|0);K=Math.min(K/J|0,67108863);for(H._ishlnsubmul(I,
K,L);0!==H.negative;)K--,H.negative=0,H._ishlnsubmul(I,1,L),H.isZero()||(H.negative^=1);E&&(E.words[L]=K)}E&&E.strip();H.strip();"div"!==G&&0!==t&&H.iushrn(t);return{div:E||null,mod:H}};a.prototype.divmod=function(t,G,H){p(!t.isZero());if(this.isZero())return{div:new a(0),mod:new a(0)};var I;if(0!==this.negative&&0===t.negative){var J=this.neg().divmod(t,G);"mod"!==G&&(I=J.div.neg());if("div"!==G){var L=J.mod.neg();H&&0!==L.negative&&L.iadd(t)}return{div:I,mod:L}}return 0===this.negative&&0!==t.negative?
(J=this.divmod(t.neg(),G),"mod"!==G&&(I=J.div.neg()),{div:I,mod:J.mod}):0!==(this.negative&t.negative)?(J=this.neg().divmod(t.neg(),G),"div"!==G&&(L=J.mod.neg(),H&&0!==L.negative&&L.isub(t)),{div:J.div,mod:L}):t.length>this.length||0>this.cmp(t)?{div:new a(0),mod:this}:1===t.length?"div"===G?{div:this.divn(t.words[0]),mod:null}:"mod"===G?{div:null,mod:new a(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modn(t.words[0]))}:this._wordDiv(t,G)};a.prototype.div=function(t){return this.divmod(t,
"div",!1).div};a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod};a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod};a.prototype.divRound=function(t){var G=this.divmod(t);if(G.mod.isZero())return G.div;var H=0!==G.div.negative?G.mod.isub(t):G.mod,I=t.ushrn(1);t=t.andln(1);H=H.cmp(I);return 0>H||1===t&&0===H?G.div:0!==G.div.negative?G.div.isubn(1):G.div.iaddn(1)};a.prototype.modn=function(t){p(67108863>=t);for(var G=67108864%t,H=0,I=this.length-1;0<=I;I--)H=(G*H+(this.words[I]|
0))%t;return H};a.prototype.idivn=function(t){p(67108863>=t);for(var G=0,H=this.length-1;0<=H;H--)G=(this.words[H]|0)+67108864*G,this.words[H]=G/t|0,G%=t;return this.strip()};a.prototype.divn=function(t){return this.clone().idivn(t)};a.prototype.egcd=function(t){p(0===t.negative);p(!t.isZero());var G=this,H=t.clone();G=0!==G.negative?G.umod(t):G.clone();t=new a(1);for(var I=new a(0),J=new a(0),L=new a(1),E=0;G.isEven()&&H.isEven();)G.iushrn(1),H.iushrn(1),++E;for(var K=H.clone(),N=G.clone();!G.isZero();){for(var O=
0,Q=1;0===(G.words[0]&Q)&&26>O;++O,Q<<=1);if(0<O)for(G.iushrn(O);0<O--;){if(t.isOdd()||I.isOdd())t.iadd(K),I.isub(N);t.iushrn(1);I.iushrn(1)}O=0;for(Q=1;0===(H.words[0]&Q)&&26>O;++O,Q<<=1);if(0<O)for(H.iushrn(O);0<O--;){if(J.isOdd()||L.isOdd())J.iadd(K),L.isub(N);J.iushrn(1);L.iushrn(1)}0<=G.cmp(H)?(G.isub(H),t.isub(J),I.isub(L)):(H.isub(G),J.isub(t),L.isub(I))}return{a:J,b:L,gcd:H.iushln(E)}};a.prototype._invmp=function(t){p(0===t.negative);p(!t.isZero());var G=this,H=t.clone();G=0!==G.negative?
G.umod(t):G.clone();for(var I=new a(1),J=new a(0),L=H.clone();0<G.cmpn(1)&&0<H.cmpn(1);){for(var E=0,K=1;0===(G.words[0]&K)&&26>E;++E,K<<=1);if(0<E)for(G.iushrn(E);0<E--;)I.isOdd()&&I.iadd(L),I.iushrn(1);E=0;for(K=1;0===(H.words[0]&K)&&26>E;++E,K<<=1);if(0<E)for(H.iushrn(E);0<E--;)J.isOdd()&&J.iadd(L),J.iushrn(1);0<=G.cmp(H)?(G.isub(H),I.isub(J)):(H.isub(G),J.isub(I))}G=0===G.cmpn(1)?I:J;0>G.cmpn(0)&&G.iadd(t);return G};a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();
var G=this.clone();t=t.clone();G.negative=0;for(var H=t.negative=0;G.isEven()&&t.isEven();H++)G.iushrn(1),t.iushrn(1);do{for(;G.isEven();)G.iushrn(1);for(;t.isEven();)t.iushrn(1);var I=G.cmp(t);if(0>I)I=G,G=t,t=I;else if(0===I||0===t.cmpn(1))break;G.isub(t)}while(1);return t.iushln(H)};a.prototype.invm=function(t){return this.egcd(t).a.umod(t)};a.prototype.isEven=function(){return 0===(this.words[0]&1)};a.prototype.isOdd=function(){return 1===(this.words[0]&1)};a.prototype.andln=function(t){return this.words[0]&
t};a.prototype.bincn=function(t){p("number"===typeof t);var G=t%26;t=(t-G)/26;G=1<<G;if(this.length<=t)return this._expand(t+1),this.words[t]|=G,this;for(;0!==G&&t<this.length;t++){var H=this.words[t]|0;H+=G;G=H>>>26;H&=67108863;this.words[t]=H}0!==G&&(this.words[t]=G,this.length++);return this};a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};a.prototype.cmpn=function(t){var G=0>t;if(0!==this.negative&&!G)return-1;if(0===this.negative&&G)return 1;this.strip();1<this.length?
t=1:(G&&(t=-t),p(67108863>=t,"Number is too big"),G=this.words[0]|0,t=G===t?0:G<t?-1:1);return 0!==this.negative?-t|0:t};a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;t=this.ucmp(t);return 0!==this.negative?-t|0:t};a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var G=0,H=this.length-1;0<=H;H--){var I=this.words[H]|0,J=t.words[H]|0;if(I!==J){I<J?G=-1:I>J&&(G=1);break}}return G};
a.prototype.gtn=function(t){return 1===this.cmpn(t)};a.prototype.gt=function(t){return 1===this.cmp(t)};a.prototype.gten=function(t){return 0<=this.cmpn(t)};a.prototype.gte=function(t){return 0<=this.cmp(t)};a.prototype.ltn=function(t){return-1===this.cmpn(t)};a.prototype.lt=function(t){return-1===this.cmp(t)};a.prototype.lten=function(t){return 0>=this.cmpn(t)};a.prototype.lte=function(t){return 0>=this.cmp(t)};a.prototype.eqn=function(t){return 0===this.cmpn(t)};a.prototype.eq=function(t){return 0===
this.cmp(t)};a.red=function(t){return new u(t)};a.prototype.toRed=function(t){p(!this.red,"Already a number in reduction context");p(0===this.negative,"red works only with positives");return t.convertTo(this)._forceRed(t)};a.prototype.fromRed=function(){p(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};a.prototype._forceRed=function(t){this.red=t;return this};a.prototype.forceRed=function(t){p(!this.red,"Already a number in reduction context");return this._forceRed(t)};
a.prototype.redAdd=function(t){p(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};a.prototype.redIAdd=function(t){p(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};a.prototype.redSub=function(t){p(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};a.prototype.redISub=function(t){p(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};a.prototype.redShl=function(t){p(this.red,"redShl works only with red numbers");
return this.red.shl(this,t)};a.prototype.redMul=function(t){p(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};a.prototype.redIMul=function(t){p(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};a.prototype.redSqr=function(){p(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};a.prototype.redISqr=function(){p(this.red,"redISqr works only with red numbers");
this.red._verify1(this);return this.red.isqr(this)};a.prototype.redSqrt=function(){p(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};a.prototype.redInvm=function(){p(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};a.prototype.redNeg=function(){p(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};a.prototype.redPow=function(t){p(this.red&&!t.red,"redPow(normalNum)");
this.red._verify1(this);return this.red.pow(this,t)};var B={k256:null,p224:null,p192:null,p25519:null};c.prototype._tmp=function(){var t=new a(null);t.words=Array(Math.ceil(this.n/13));return t};c.prototype.ireduce=function(t){do{this.split(t,this.tmp);t=this.imulK(t);t=t.iadd(this.tmp);var G=t.bitLength()}while(G>this.n);G=G<this.n?-1:t.ucmp(this.p);0===G?(t.words[0]=0,t.length=1):0<G?t.isub(this.p):t.strip();return t};c.prototype.split=function(t,G){t.iushrn(this.n,0,G)};c.prototype.imulK=function(t){return t.imul(this.k)};
h(e,c);e.prototype.split=function(t,G){for(var H=Math.min(t.length,9),I=0;I<H;I++)G.words[I]=t.words[I];G.length=H;if(9>=t.length)t.words[0]=0,t.length=1;else{H=t.words[9];G.words[G.length++]=H&4194303;for(I=10;I<t.length;I++)G=t.words[I]|0,t.words[I-10]=(G&4194303)<<4|H>>>22,H=G;H>>>=22;t.words[I-10]=H;t.length=0===H&&10<t.length?t.length-10:t.length-9}};e.prototype.imulK=function(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;for(var G=0,H=0;H<t.length;H++){var I=t.words[H]|0;G+=977*I;
t.words[H]=G&67108863;G=64*I+(G/67108864|0)}0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--);return t};h(g,c);h(m,c);h(r,c);r.prototype.imulK=function(t){for(var G=0,H=0;H<t.length;H++){G=19*(t.words[H]|0)+G;var I=G&67108863;G>>>=26;t.words[H]=I}0!==G&&(t.words[t.length++]=G);return t};a._prime=function(t){if(B[t])return B[t];if("k256"===t)var G=new e;else if("p224"===t)G=new g;else if("p192"===t)G=new m;else if("p25519"===t)G=new r;else throw Error("Unknown prime "+t);return B[t]=
G};u.prototype._verify1=function(t){p(0===t.negative,"red works only with positives");p(t.red,"red works only with red numbers")};u.prototype._verify2=function(t,G){p(0===(t.negative|G.negative),"red works only with positives");p(t.red&&t.red===G.red,"red works only with red numbers")};u.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)};u.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)};u.prototype.add=
function(t,G){this._verify2(t,G);t=t.add(G);0<=t.cmp(this.m)&&t.isub(this.m);return t._forceRed(this)};u.prototype.iadd=function(t,G){this._verify2(t,G);t=t.iadd(G);0<=t.cmp(this.m)&&t.isub(this.m);return t};u.prototype.sub=function(t,G){this._verify2(t,G);t=t.sub(G);0>t.cmpn(0)&&t.iadd(this.m);return t._forceRed(this)};u.prototype.isub=function(t,G){this._verify2(t,G);t=t.isub(G);0>t.cmpn(0)&&t.iadd(this.m);return t};u.prototype.shl=function(t,G){this._verify1(t);return this.imod(t.ushln(G))};u.prototype.imul=
function(t,G){this._verify2(t,G);return this.imod(t.imul(G))};u.prototype.mul=function(t,G){this._verify2(t,G);return this.imod(t.mul(G))};u.prototype.isqr=function(t){return this.imul(t,t.clone())};u.prototype.sqr=function(t){return this.mul(t,t)};u.prototype.sqrt=function(t){if(t.isZero())return t.clone();var G=this.m.andln(3);p(1===G%2);if(3===G)return G=this.m.add(new a(1)).iushrn(2),this.pow(t,G);for(var H=this.m.subn(1),I=0;!H.isZero()&&0===H.andln(1);)I++,H.iushrn(1);p(!H.isZero());G=(new a(1)).toRed(this);
var J=G.redNeg(),L=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=(new a(2*E*E)).toRed(this);0!==this.pow(E,L).cmp(J);)E.redIAdd(J);L=this.pow(E,H);J=this.pow(t,H.addn(1).iushrn(1));t=this.pow(t,H);for(H=I;0!==t.cmp(G);){E=t;for(I=0;0!==E.cmp(G);I++)E=E.redSqr();p(I<H);L=this.pow(L,(new a(1)).iushln(H-I-1));J=J.redMul(L);L=L.redSqr();t=t.redMul(L);H=I}return J};u.prototype.invm=function(t){t=t._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)};u.prototype.pow=
function(t,G){if(G.isZero())return(new a(1)).toRed(this);if(0===G.cmpn(1))return t.clone();var H=Array(16);H[0]=(new a(1)).toRed(this);H[1]=t;for(var I=2;I<H.length;I++)H[I]=this.mul(H[I-1],t);t=H[0];var J=0,L=0,E=G.bitLength()%26;0===E&&(E=26);for(I=G.length-1;0<=I;I--){var K=G.words[I];for(--E;0<=E;E--){var N=K>>E&1;t!==H[0]&&(t=this.sqr(t));if(0===N&&0===J)L=0;else if(J<<=1,J|=N,L++,4===L||0===I&&0===E)t=this.mul(t,H[J]),J=L=0}E=26}return t};u.prototype.convertTo=function(t){var G=t.umod(this.m);
return G===t?G.clone():G};u.prototype.convertFrom=function(t){t=t.clone();t.red=null;return t};a.mont=function(t){return new v(t)};h(v,u);v.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))};v.prototype.convertFrom=function(t){t=this.imod(t.mul(this.rinv));t.red=null;return t};v.prototype.imul=function(t,G){if(t.isZero()||G.isZero())return t.words[0]=0,t.length=1,t;t=t.imul(G);G=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);G=t=t.isub(G).iushrn(this.shift);
0<=t.cmp(this.m)?G=t.isub(this.m):0>t.cmpn(0)&&(G=t.iadd(this.m));return G._forceRed(this)};v.prototype.mul=function(t,G){if(t.isZero()||G.isZero())return(new a(0))._forceRed(this);t=t.mul(G);G=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);G=t=t.isub(G).iushrn(this.shift);0<=t.cmp(this.m)?G=t.isub(this.m):0>t.cmpn(0)&&(G=t.iadd(this.m));return G._forceRed(this)};v.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof y||
y,this)},{buffer:108}],100:[function(b,y,F){y.exports=function(q){var n,p,h,a=q.length;for(n=p=0;n<a;++n)p+=q[n].length;var f=Array(p),d=0;for(n=0;n<a;++n){var l=q[n],k=l.length;for(p=0;p<k;++p){var c=f[d++]=Array(k-1),e=0;for(h=0;h<k;++h)h!==p&&(c[e++]=l[h]);p&1&&(h=c[1],c[1]=c[0],c[0]=h)}}return f}},{}],101:[function(b,y,F){function q(l,k,c,e){for(var g=0,m=0,r=0,u=l.length;r<u;++r){var v=l[r],w;a:{for(w=0;w<k;++w)if(!(v[w]<=v[w+k])){w=!0;break a}w=!1}if(!w){for(w=0;w<2*k;++w)c[g++]=v[w];e[m++]=
r}}return m}function n(l,k,c,e){var g=l.length,m=k.length;if(!(0>=g||0>=m)){var r=l[0].length>>>1;if(!(0>=r)){var u=h.mallocDouble(2*r*g),v=h.mallocInt32(g);g=q(l,r,u,v);if(0<g){if(1===r&&e){a.init(g);var w=a.sweepComplete(r,c,0,g,u,v,0,g,u,v)}else{l=h.mallocDouble(2*r*m);var D=h.mallocInt32(m);m=q(k,r,l,D);0<m&&(a.init(g+m),w=1===r?a.sweepBipartite(r,c,0,g,u,v,0,m,l,D):f(r,c,e,g,u,v,m,l,D),h.free(l),h.free(D))}h.free(u);h.free(v)}return w}}}function p(l,k){d.push([l,k])}y.exports=function(l,k,c){switch(arguments.length){case 1:return d=
[],n(l,l,p,!0),d;case 2:if("function"===typeof k)return n(l,l,k,!0);d=[];n(l,k,p,!1);return d;case 3:return n(l,k,c,!1);default:throw Error("box-intersect: Invalid arguments");}};var h=b("typedarray-pool"),a=b("./lib/sweep"),f=b("./lib/intersect"),d},{"./lib/intersect":103,"./lib/sweep":107,"typedarray-pool":567}],102:[function(b,y,F){function q(p){function h(k,c){var e="bruteForce"+(k?"Red":"Blue")+(c?"Flip":"")+(p?"Full":""),g=["function ",e,"(",n.join(),"){","var ","es","\x3d2*","d",";"],m="for(var j\x3dbs,bp\x3des*bs;j\x3cbe;++j,bp+\x3des){var y0\x3dbb[ax+bp],"+
(p?"y1\x3dbb[ax+bp+d],":"")+"yi\x3dbi[j];";k?g.push("for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];","Q",":",m):g.push(m,"Q",":","for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];");p?g.push("if(y1\x3cx0||x1\x3cy0)continue;"):c?g.push("if(y0\x3c\x3dx0||x1\x3cy0)continue;"):g.push("if(y0\x3cx0||x1\x3cy0)continue;");g.push("for(var k\x3dax+1;k\x3cd;++k){var r0\x3drb[k+rp],r1\x3drb[k+d+rp],b0\x3dbb[k+bp],b1\x3dbb[k+d+bp];if(r1\x3cb0||b1\x3cr0)continue Q;}var rv\x3dvv(");
c?g.push("yi,xi"):g.push("xi,yi");g.push(");if(rv!\x3d\x3dvoid 0)return rv;}}}");k=g.join("");f.push(k);l.push("return "+e+"("+n.join()+");")}var a="bruteForce"+(p?"Full":"Partial"),f=[],d=n.slice();p||d.splice(3,0,"fp");var l=["function "+a+"("+d.join()+"){"];l.push("if(re-rs\x3ebe-bs){");p?(h(!0,!1),l.push("}else{"),h(!1,!1)):(l.push("if(fp){"),h(!0,!0),l.push("}else{"),h(!0,!1),l.push("}}else{if(fp){"),h(!1,!0),l.push("}else{"),h(!1,!1),l.push("}"));l.push("}}return "+a);a=f.join("")+l.join("");
return(new Function(a))()}var n="d ax vv rs re rb ri bs be bb bi".split(" ");F.partial=q(!1);F.full=q(!0)},{}],103:[function(b,y,F){function q(A,B,t,G,H,I,J,L,E){var K=w*A;C[K]=B;C[K+1]=t;C[K+2]=G;C[K+3]=H;C[K+4]=I;C[K+5]=J;A*=D;x[A]=L;x[A+1]=E}y.exports=function(A,B,t,G,H,I,J,L,E){var K=8*p.log2(G+J+1)*(A+1)|0,N=p.nextPow2(w*K);C.length<N&&(n.free(C),C=n.mallocInt32(N));K=p.nextPow2(D*K);x.length<K&&(n.free(x),x=n.mallocDouble(K));K=0;N=2*A;q(K++,0,0,G,0,J,t?16:0,-Infinity,Infinity);for(t||q(K++,
0,0,J,0,G,1,-Infinity,Infinity);0<K;){--K;t=K*w;var O=C[t];J=C[t+1];var Q=C[t+2],P=C[t+3],T=C[t+4];t=C[t+5];G=K*D;var V=x[G],aa=x[G+1],ba=t&1,Y=!!(t&16),ea=H,da=I,ca=L;G=E;ba&&(ea=L,da=E,ca=H,G=I);if(t&2&&(Q=m(A,O,J,Q,ea,da,aa),J>=Q))continue;if(t&4&&(J=r(A,O,J,Q,ea,da,V),J>=Q))continue;t=Q-J;var la=T-P;if(Y){if(A*t*(t+la)<c){var pa=f.scanComplete(A,O,B,J,Q,ea,da,P,T,ca,G);if(void 0!==pa)return pa;continue}}else if(A*Math.min(t,la)<l){pa=h(A,O,B,ba,J,Q,ea,da,P,T,ca,G);if(void 0!==pa)return pa;continue}else if(A*
t*la<k){pa=f.scanBipartite(A,O,B,ba,J,Q,ea,da,P,T,ca,G);if(void 0!==pa)return pa;continue}t=e(A,O,J,Q,ea,da,V,aa);if(J<t)if(A*(t-J)<l){if(pa=a(A,O+1,B,J,t,ea,da,P,T,ca,G),void 0!==pa)return pa}else if(O===A-2){if(pa=ba?f.sweepBipartite(A,B,P,T,ca,G,J,t,ea,da):f.sweepBipartite(A,B,J,t,ea,da,P,T,ca,G),void 0!==pa)return pa}else q(K++,O+1,J,t,P,T,ba,-Infinity,Infinity),q(K++,O+1,P,T,J,t,ba^1,-Infinity,Infinity);if(t<Q)if(J=d(A,O,P,T,ca,G),pa=ca[N*J+O],la=g(A,O,J,T,ca,G,pa),la<T&&q(K++,O,t,Q,la,T,(ba|
4)+(Y?16:0),pa,aa),P<J&&q(K++,O,t,Q,P,J,(ba|2)+(Y?16:0),V,pa),J+1===la){if(Y)a:{P=A;T=B;G=G[J];ba=2*P;J*=ba;V=ca[J+O];aa=t;t*=ba;b:for(;aa<Q;++aa,t+=ba)if(Y=da[aa],Y!==G&&(la=ea[t+O],pa=ea[t+O+P],!(V<la||pa<V))){for(var qa=O+1;qa<P;++qa){la=ea[t+qa];pa=ea[t+qa+P];var oa=ca[J+qa+P];if(pa<ca[J+qa]||oa<la)continue b}Y=T(Y,G);if(void 0!==Y){pa=Y;break a}}pa=void 0}else a:{P=A;T=B;G=G[J];V=2*P;J*=V;aa=ca[J+O];Y=t;t*=V;b:for(;Y<Q;++Y,t+=V)if(la=ea[t+O],pa=ea[t+O+P],!(aa<la||pa<aa||ba&&aa===la)){qa=da[Y];
for(oa=O+1;oa<P;++oa){la=ea[t+oa];pa=ea[t+oa+P];var ka=ca[J+oa+P];if(pa<ca[J+oa]||ka<la)continue b}la=ba?T(G,qa):T(qa,G);if(void 0!==la){pa=la;break a}}pa=void 0}if(void 0!==pa)return pa}else if(J<la)if(Y){if(Q=u(A,O,t,Q,ea,da,pa),t<Q)if(P=g(A,O,t,Q,ea,da,pa),O===A-2){if(t<P&&(pa=f.sweepComplete(A,B,t,P,ea,da,J,la,ca,G),void 0!==pa)||P<Q&&(pa=f.sweepBipartite(A,B,P,Q,ea,da,J,la,ca,G),void 0!==pa))return pa}else t<P&&q(K++,O+1,t,P,J,la,16,-Infinity,Infinity),P<Q&&(q(K++,O+1,P,Q,J,la,0,-Infinity,Infinity),
q(K++,O+1,J,la,P,Q,1,-Infinity,Infinity))}else Q=ba?v(A,O,t,Q,ea,da,pa):u(A,O,t,Q,ea,da,pa),t<Q&&(O===A-2?ba?f.sweepBipartite(A,B,J,la,ca,G,t,Q,ea,da):f.sweepBipartite(A,B,t,Q,ea,da,J,la,ca,G):(q(K++,O+1,t,Q,J,la,ba,-Infinity,Infinity),q(K++,O+1,J,la,t,Q,ba^1,-Infinity,Infinity)))}};var n=b("typedarray-pool"),p=b("bit-twiddle");y=b("./brute");var h=y.partial,a=y.full,f=b("./sweep"),d=b("./median");b=b("./partition");var l=128,k=4194304,c=4194304,e=b("!(lo\x3e\x3dp0)\x26\x26!(p1\x3e\x3dhi)",["p0",
"p1"]),g=b("lo\x3d\x3d\x3dp0",["p0"]),m=b("lo\x3cp0",["p0"]),r=b("hi\x3c\x3dp0",["p0"]),u=b("lo\x3c\x3dp0\x26\x26p0\x3c\x3dhi",["p0"]),v=b("lo\x3cp0\x26\x26p0\x3c\x3dhi",["p0"]),w=6,D=2,C=n.mallocInt32(1024),x=n.mallocDouble(1024)},{"./brute":102,"./median":104,"./partition":105,"./sweep":107,"bit-twiddle":97,"typedarray-pool":567}],104:[function(b,y,F){y.exports=function(p,h,a,f,d,l){if(f<=a+1)return a;var k=a,c=f;f=f+a>>>1;for(var e=2*p,g,m;k<c;){if(c-k<n){g=h;m=d;for(var r=l,u=2*p,v=u*(k+1)+g,
w=k+1;w<c;++w,v+=u)for(var D=m[v],C=w,x=u*(w-1);C>k&&m[x+g]>D;--C,x-=u){for(var A=x,B=x+u,t=0;t<u;++t,++A,++B){var G=m[A];m[A]=m[B];m[B]=G}A=r[C];r[C]=r[C-1];r[C-1]=A}break}v=c-k;g=Math.random()*v+k|0;m=d[e*g+h];u=Math.random()*v+k|0;r=d[e*u+h];w=Math.random()*v+k|0;v=d[e*w+h];m<=r?v>=r?(g=u,m=r):m>=v||(g=w,m=v):r>=v?(g=u,m=r):v>=m||(g=w,m=v);r=e*(c-1);u=e*g;for(v=0;v<e;++v,++r,++u)w=d[r],d[r]=d[u],d[u]=w;r=l[c-1];l[c-1]=l[g];l[g]=r;g=q(p,h,k,c-1,d,l,m);r=e*(c-1);u=e*g;for(v=0;v<e;++v,++r,++u)w=d[r],
d[r]=d[u],d[u]=w;r=l[c-1];l[c-1]=l[g];l[g]=r;if(f<g){for(c=g-1;k<c&&d[e*(c-1)+h]===m;)--c;c+=1}else if(g<f)for(k=g+1;k<c&&d[e*k+h]===m;)k+=1;else break}return q(p,h,a,f,d,l,d[e*f+h])};var q=b("./partition")("lo\x3cp0",["p0"]),n=8},{"./partition":105}],105:[function(b,y,F){y.exports=function(n,p){p="abcdef".split("").concat(p);var h=[];0<=n.indexOf("lo")&&h.push("lo\x3de[k+n]");0<=n.indexOf("hi")&&h.push("hi\x3de[k+o]");p.push(q.replace("_",h.join()).replace("$",n));return Function.apply(void 0,p)};
var q="for(var j\x3d2*a,k\x3dj*c,l\x3dk,m\x3dc,n\x3db,o\x3da+b,p\x3dc;d\x3ep;++p,k+\x3dj){var _;if($)if(m\x3d\x3d\x3dp)m+\x3d1,l+\x3dj;else{for(var s\x3d0;j\x3es;++s){var t\x3de[k+s];e[k+s]\x3de[l],e[l++]\x3dt}var u\x3df[p];f[p]\x3df[m],f[m++]\x3du}}return m"},{}],106:[function(b,y,F){function q(k,c,e){for(var g=2*(k+1),m=k+1;m<=c;++m){for(var r=e[g++],u=e[g++],v=m,w=g-2;v-- >k;){var D=e[w-2],C=e[w-1];if(D<r)break;else if(D===r&&C<u)break;e[w]=D;e[w+1]=C;w-=2}e[w]=r;e[w+1]=u}}function n(k,c,e){k*=
2;c*=2;var g=e[k],m=e[k+1];e[k]=e[c];e[k+1]=e[c+1];e[c]=g;e[c+1]=m}function p(k,c,e){k*=2;c*=2;e[k]=e[c];e[k+1]=e[c+1]}function h(k,c,e,g,m){k*=2;c*=2;m[k]=m[c];m[c]=e;m[k+1]=m[c+1];m[c+1]=g}function a(k,c,e){k*=2;c*=2;var g=e[k],m=e[c];return g<m?!1:g===m?e[k+1]>e[c+1]:!0}function f(k,c,e,g){k*=2;var m=g[k];return m<c?!0:m===c?g[k+1]<e:!1}function d(k,c,e){var g=(c-k+1)/6|0,m=k+g,r=c-g,u=k+c>>1,v=u-g,w=u+g,D=m,C=v,x=u,A=w,B=r;g=k+1;var t=c-1;if(a(D,C,e)){var G=D;D=C;C=G}a(A,B,e)&&(G=A,A=B,B=G);a(D,
x,e)&&(G=D,D=x,x=G);a(C,x,e)&&(G=C,C=x,x=G);a(D,A,e)&&(G=D,D=A,A=G);a(x,A,e)&&(G=x,x=A,A=G);a(C,B,e)&&(G=C,C=B,B=G);a(C,x,e)&&(G=C,C=x,x=G);a(A,B,e)&&(G=A,A=B,B=G);G=e[2*C];C=e[2*C+1];var H=e[2*A];A=e[2*A+1];D*=2;x*=2;B*=2;m*=2;u*=2;r*=2;for(var I=0;2>I;++I){var J=e[x+I],L=e[B+I];e[m+I]=e[D+I];e[u+I]=J;e[r+I]=L}p(v,k,e);p(w,c,e);for(v=g;v<=t;++v)if(f(v,G,C,e))v!==g&&n(v,g,e),++g;else if(!f(v,H,A,e))for(;;)if(f(t,H,A,e)){f(t,G,C,e)?(w=v,r=g,u=t,D=e,w*=2,r*=2,u*=2,m=D[w],x=D[w+1],D[w]=D[r],D[w+1]=D[r+
1],D[r]=D[u],D[r+1]=D[u+1],D[u]=m,D[u+1]=x,++g):n(v,t,e);--t;break}else if(--t<v)break;h(k,g-1,G,C,e);h(c,t+1,H,A,e);g-2-k<=l?q(k,g-2,e):d(k,g-2,e);c-(t+2)<=l?q(t+2,c,e):d(t+2,c,e);t-g<=l?q(g,t,e):d(g,t,e)}y.exports=function(k,c){c<=4*l?q(0,c-1,k):d(0,c-1,k)};var l=32},{}],107:[function(b,y,F){function q(m,r,u,v){v=r[v];u=m[u-1];m[v]=u;r[u]=v}y.exports={init:function(m){m=p.nextPow2(m);f.length<m&&(n.free(f),f=n.mallocInt32(m));d.length<m&&(n.free(d),d=n.mallocInt32(m));l.length<m&&(n.free(l),l=n.mallocInt32(m));
k.length<m&&(n.free(k),k=n.mallocInt32(m));c.length<m&&(n.free(c),c=n.mallocInt32(m));e.length<m&&(n.free(e),e=n.mallocInt32(m));m*=8;g.length<m&&(n.free(g),g=n.mallocDouble(m))},sweepBipartite:function(m,r,u,v,w,D,C,x,A,B){var t=0,G=2*m;--m;for(var H=G-1;u<v;++u){var I=D[u],J=G*u;g[t++]=w[J+m];g[t++]=-(I+1);g[t++]=w[J+H];g[t++]=I}for(u=C;u<x;++u)I=B[u]+a,v=G*u,g[t++]=A[v+m],g[t++]=-I,g[t++]=A[v+H],g[t++]=I;x=t>>>1;h(g,x);for(u=B=A=0;u<x;++u)if(t=g[2*u+1]|0,t>=a)t=t-a|0,q(l,k,B--,t);else if(0<=t)q(f,
d,A--,t);else if(t<=-a){t=-t-a|0;for(G=0;G<A;++G)if(v=r(f[G],t),void 0!==v)return v;G=k;v=B++;l[v]=t;G[t]=v}else{t=-t-1|0;for(G=0;G<B;++G)if(v=r(t,l[G]),void 0!==v)return v;G=d;v=A++;f[v]=t;G[t]=v}},sweepComplete:function(m,r,u,v,w,D,C,x,A,B){var t=0,G=2*m;--m;for(var H=G-1;u<v;++u){var I=D[u]+1<<1,J=G*u;g[t++]=w[J+m];g[t++]=-I;g[t++]=w[J+H];g[t++]=I}for(u=C;u<x;++u)I=B[u]+1<<1,v=G*u,g[t++]=A[v+m],g[t++]=-I|1,g[t++]=A[v+H],g[t++]=I|1;x=t>>>1;h(g,x);for(u=t=B=A=0;u<x;++u)if(G=g[2*u+1]|0,v=G&1,u<x-
1&&G>>1===g[2*u+3]>>1&&(v=2,u+=1),0>G){G=-(G>>1)-1;for(w=0;w<t;++w)if(D=r(c[w],G),void 0!==D)return D;if(0!==v)for(w=0;w<A;++w)if(D=r(f[w],G),void 0!==D)return D;if(1!==v)for(w=0;w<B;++w)if(D=r(l[w],G),void 0!==D)return D;0===v?(v=d,w=A++,f[w]=G,v[G]=w):1===v?(v=k,w=B++,l[w]=G,v[G]=w):2===v&&(v=e,w=t++,c[w]=G,v[G]=w)}else G=(G>>1)-1,0===v?q(f,d,A--,G):1===v?q(l,k,B--,G):2===v&&q(c,e,t--,G)},scanBipartite:function(m,r,u,v,w,D,C,x,A,B,t,G){var H=0,I=2*m,J=r+m,L=1,E=1;for(v?E=a:L=a;w<D;++w){var K=w+
L,N=I*w;g[H++]=C[N+r];g[H++]=-K;g[H++]=C[N+J];g[H++]=K}for(w=A;w<B;++w)K=w+E,D=I*w,g[H++]=t[D+r],g[H++]=-K;B=H>>>1;h(g,B);for(w=H=0;w<B;++w)if(K=g[2*w+1]|0,0>K)if(K=-K,K>=a?(E=!v,K-=a):(E=!!v,--K),E)E=d,D=H++,f[D]=K,E[K]=D;else a:for(E=G[K],K*=I,D=t[K+r+1],A=t[K+r+1+m],J=0;J<H;++J){N=f[J];var O=I*N;if(!(A<C[O+r+1]||C[O+r+1+m]<D)){for(var Q=r+2;Q<m;++Q)if(t[K+Q+m]<C[O+Q]||C[O+Q+m]<t[K+Q])continue a;N=x[N];N=v?u(E,N):u(N,E);if(void 0!==N)return N}}else q(f,d,H--,K-L)},scanComplete:function(m,r,u,v,
w,D,C,x,A,B,t){for(var G=0,H=2*m,I=r+m;v<w;++v){var J=v+a,L=H*v;g[G++]=D[L+r];g[G++]=-J;g[G++]=D[L+I];g[G++]=J}for(v=x;v<A;++v)J=v+1,w=H*v,g[G++]=B[w+r],g[G++]=-J;A=G>>>1;h(g,A);for(v=G=0;v<A;++v)if(w=g[2*v+1]|0,0>w)if(J=-w,J>=a)f[G++]=J-a;else a:for(--J,w=t[J],J*=H,I=B[J+r+1],L=B[J+r+1+m],x=0;x<G;++x){var E=f[x],K=C[E];if(K===w)break;E*=H;if(!(L<D[E+r+1]||D[E+r+1+m]<I)){for(var N=r+2;N<m;++N)if(B[J+N+m]<D[E+N]||D[E+N+m]<B[J+N])continue a;K=u(K,w);if(void 0!==K)return K}}else{J=w-a;for(x=G-1;0<=x;--x)if(f[x]===
J){for(N=x+1;N<G;++N)f[N-1]=f[N];break}--G}}};var n=b("typedarray-pool"),p=b("bit-twiddle"),h=b("./sort"),a=268435456,f=n.mallocInt32(1024),d=n.mallocInt32(1024),l=n.mallocInt32(1024),k=n.mallocInt32(1024),c=n.mallocInt32(1024),e=n.mallocInt32(1024),g=n.mallocDouble(8192)},{"./sort":106,"bit-twiddle":97,"typedarray-pool":567}],108:[function(b,y,F){},{}],109:[function(b,y,F){arguments[4][108][0].apply(F,arguments)},{dup:108}],110:[function(b,y,F){function q(){this._events&&Object.prototype.hasOwnProperty.call(this,
"_events")||(this._events=e(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function n(v,w,D,C){var x;if("function"!==typeof D)throw new TypeError('"listener" argument must be a function');if(x=v._events){x.newListener&&(v.emit("newListener",w,D.listener?D.listener:D),x=v._events);var A=x[w]}else x=v._events=e(null),v._eventsCount=0;A?("function"===typeof A?A=x[w]=C?[D,A]:[A,D]:C?A.unshift(D):A.push(D),A.warned||(D=void 0===v._maxListeners?q.defaultMaxListeners:v._maxListeners)&&
0<D&&A.length>D&&(A.warned=!0,D=Error("Possible EventEmitter memory leak detected. "+A.length+' "'+String(w)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),D.name="MaxListenersExceededWarning",D.emitter=v,D.type=w,D.count=A.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",D.name,D.message))):(x[w]=D,++v._eventsCount);return v}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);
case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var v=Array(arguments.length),w=0;w<v.length;++w)v[w]=arguments[w];this.listener.apply(this.target,v)}}function h(v,w,D){v={fired:!1,wrapFn:void 0,target:v,type:w,listener:D};w=m.call(p,v);w.listener=D;return v.wrapFn=w}function a(v,w,D){v=v._events;if(!v)return[];w=v[w];if(!w)return[];
if("function"===typeof w)return D?[w.listener||w]:[w];if(D)for(D=Array(w.length),v=0;v<D.length;++v)D[v]=w[v].listener||w[v];else D=d(w,w.length);return D}function f(v){var w=this._events;if(w){v=w[v];if("function"===typeof v)return 1;if(v)return v.length}return 0}function d(v,w){for(var D=Array(w),C=0;C<w;++C)D[C]=v[C];return D}function l(v){var w=function(){};w.prototype=v;return new w}function k(v){var w=[],D;for(D in v)Object.prototype.hasOwnProperty.call(v,D)&&w.push(D);return D}function c(v){var w=
this;return function(){return w.apply(v,arguments)}}var e=Object.create||l,g=Object.keys||k,m=Function.prototype.bind||c;y.exports=q;q.EventEmitter=q;q.prototype._events=void 0;q.prototype._maxListeners=void 0;var r=10;try{b={};Object.defineProperty&&Object.defineProperty(b,"x",{value:0});var u=0===b.x}catch(v){u=!1}u?Object.defineProperty(q,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(v){if("number"!==typeof v||0>v||v!==v)throw new TypeError('"defaultMaxListeners" must be a positive number');
r=v}}):q.defaultMaxListeners=r;q.prototype.setMaxListeners=function(v){if("number"!==typeof v||0>v||isNaN(v))throw new TypeError('"n" argument must be a positive number');this._maxListeners=v;return this};q.prototype.getMaxListeners=function(){return void 0===this._maxListeners?q.defaultMaxListeners:this._maxListeners};q.prototype.emit=function(v){var w,D,C;var x="error"===v;if(C=this._events)x=x&&null==C.error;else if(!x)return!1;if(x){1<arguments.length&&(w=arguments[1]);if(w instanceof Error)throw w;
C=Error('Unhandled "error" event. ('+w+")");C.context=w;throw C;}w=C[v];if(!w)return!1;C="function"===typeof w;var A=arguments.length;switch(A){case 1:if(C)w.call(this);else for(C=w.length,w=d(w,C),x=0;x<C;++x)w[x].call(this);break;case 2:x=arguments[1];if(C)w.call(this,x);else for(C=w.length,w=d(w,C),A=0;A<C;++A)w[A].call(this,x);break;case 3:x=arguments[1];A=arguments[2];if(C)w.call(this,x,A);else for(C=w.length,w=d(w,C),D=0;D<C;++D)w[D].call(this,x,A);break;case 4:x=arguments[1];A=arguments[2];
D=arguments[3];if(C)w.call(this,x,A,D);else{C=w.length;w=d(w,C);for(var B=0;B<C;++B)w[B].call(this,x,A,D)}break;default:x=Array(A-1);for(D=1;D<A;D++)x[D-1]=arguments[D];if(C)w.apply(this,x);else for(C=w.length,w=d(w,C),A=0;A<C;++A)w[A].apply(this,x)}return!0};q.prototype.addListener=function(v,w){return n(this,v,w,!1)};q.prototype.on=q.prototype.addListener;q.prototype.prependListener=function(v,w){return n(this,v,w,!0)};q.prototype.once=function(v,w){if("function"!==typeof w)throw new TypeError('"listener" argument must be a function');
this.on(v,h(this,v,w));return this};q.prototype.prependOnceListener=function(v,w){if("function"!==typeof w)throw new TypeError('"listener" argument must be a function');this.prependListener(v,h(this,v,w));return this};q.prototype.removeListener=function(v,w){var D;if("function"!==typeof w)throw new TypeError('"listener" argument must be a function');var C=this._events;if(!C)return this;var x=C[v];if(!x)return this;if(x===w||x.listener===w)0===--this._eventsCount?this._events=e(null):(delete C[v],
C.removeListener&&this.emit("removeListener",v,x.listener||w));else if("function"!==typeof x){var A=-1;for(D=x.length-1;0<=D;D--)if(x[D]===w||x[D].listener===w){var B=x[D].listener;A=D;break}if(0>A)return this;if(0===A)x.shift();else{D=A+1;for(var t=x.length;D<t;A+=1,D+=1)x[A]=x[D];x.pop()}1===x.length&&(C[v]=x[0]);C.removeListener&&this.emit("removeListener",v,B||w)}return this};q.prototype.removeAllListeners=function(v){var w=this._events;if(!w)return this;if(!w.removeListener)return 0===arguments.length?
(this._events=e(null),this._eventsCount=0):w[v]&&(0===--this._eventsCount?this._events=e(null):delete w[v]),this;if(0===arguments.length){var D=g(w);for(w=0;w<D.length;++w){var C=D[w];"removeListener"!==C&&this.removeAllListeners(C)}this.removeAllListeners("removeListener");this._events=e(null);this._eventsCount=0;return this}D=w[v];if("function"===typeof D)this.removeListener(v,D);else if(D)for(w=D.length-1;0<=w;w--)this.removeListener(v,D[w]);return this};q.prototype.listeners=function(v){return a(this,
v,!0)};q.prototype.rawListeners=function(v){return a(this,v,!1)};q.listenerCount=function(v,w){return"function"===typeof v.listenerCount?v.listenerCount(w):f.call(v,w)};q.prototype.listenerCount=f;q.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],111:[function(b,y,F){(function(q){function n(E){if(2147483647<E)throw new RangeError('The value "'+E+'" is invalid for option "size"');E=new Uint8Array(E);E.__proto__=q.prototype;return E}function q(E,K,N){if("number"===
typeof E){if("string"===typeof K)throw new TypeError('The "string" argument must be of type string. Received type number');return a(E)}return p(E,K,N)}function p(E,K,N){if("string"===typeof E){var O=K;if("string"!==typeof O||""===O)O="utf8";if(!q.isEncoding(O))throw new TypeError("Unknown encoding: "+O);K=k(E,O)|0;N=n(K);E=N.write(E,O);E!==K&&(N=N.slice(0,E));return N}if(ArrayBuffer.isView(E))return f(E);if(null==E)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof E);if(G(E,ArrayBuffer)||E&&G(E.buffer,ArrayBuffer)){if(0>K||E.byteLength<K)throw new RangeError('"offset" is outside of buffer bounds');if(E.byteLength<K+(N||0))throw new RangeError('"length" is outside of buffer bounds');E=void 0===K&&void 0===N?new Uint8Array(E):void 0===N?new Uint8Array(E,K):new Uint8Array(E,K,N);E.__proto__=q.prototype;return E}if("number"===typeof E)throw new TypeError('The "value" argument must not be of type number. Received type number');O=E.valueOf&&E.valueOf();if(null!=
O&&O!==E)return q.from(O,K,N);if(O=d(E))return O;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof E[Symbol.toPrimitive])return q.from(E[Symbol.toPrimitive]("string"),K,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E);}function h(E){if("number"!==typeof E)throw new TypeError('"size" argument must be of type number');if(0>E)throw new RangeError('The value "'+E+'" is invalid for option "size"');
}function a(E){h(E);return n(0>E?0:l(E)|0)}function f(E){for(var K=0>E.length?0:l(E.length)|0,N=n(K),O=0;O<K;O+=1)N[O]=E[O]&255;return N}function d(E){if(q.isBuffer(E)){var K=l(E.length)|0,N=n(K);if(0===N.length)return N;E.copy(N,0,0,K);return N}if(void 0!==E.length)return(K="number"!==typeof E.length)||(K=E.length,K=K!==K),K?n(0):f(E);if("Buffer"===E.type&&Array.isArray(E.data))return f(E.data)}function l(E){if(2147483647<=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
(2147483647).toString(16)+" bytes");return E|0}function k(E,K){if(q.isBuffer(E))return E.length;if(ArrayBuffer.isView(E)||G(E,ArrayBuffer))return E.byteLength;if("string"!==typeof E)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof E);var N=E.length,O=2<arguments.length&&!0===arguments[2];if(!O&&0===N)return 0;for(var Q=!1;;)switch(K){case "ascii":case "latin1":case "binary":return N;case "utf8":case "utf-8":return x(E).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
N;case "hex":return N>>>1;case "base64":return B(E).length;default:if(Q)return O?-1:x(E).length;K=(""+K).toLowerCase();Q=!0}}function c(E,K,N){var O=!1;if(void 0===K||0>K)K=0;if(K>this.length)return"";if(void 0===N||N>this.length)N=this.length;if(0>=N)return"";N>>>=0;K>>>=0;if(N<=K)return"";for(E||(E="utf8");;)switch(E){case "hex":E=K;K=N;N=this.length;if(!E||0>E)E=0;if(!K||0>K||K>N)K=N;O="";for(N=E;N<K;++N)E=O,O=this[N],O=16>O?"0"+O.toString(16):O.toString(16),O=E+O;return O;case "utf8":case "utf-8":return r(this,
K,N);case "ascii":E="";for(N=Math.min(this.length,N);K<N;++K)E+=String.fromCharCode(this[K]&127);return E;case "latin1":case "binary":E="";for(N=Math.min(this.length,N);K<N;++K)E+=String.fromCharCode(this[K]);return E;case "base64":return K=0===K&&N===this.length?H.fromByteArray(this):H.fromByteArray(this.slice(K,N)),K;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":K=this.slice(K,N);N="";for(E=0;E<K.length;E+=2)N+=String.fromCharCode(K[E]+256*K[E+1]);return N;default:if(O)throw new TypeError("Unknown encoding: "+
E);E=(E+"").toLowerCase();O=!0}}function e(E,K,N){var O=E[K];E[K]=E[N];E[N]=O}function g(E,K,N,O,Q){if(0===E.length)return-1;"string"===typeof N?(O=N,N=0):2147483647<N?N=2147483647:-2147483648>N&&(N=-2147483648);N=+N;N!==N&&(N=Q?0:E.length-1);0>N&&(N=E.length+N);if(N>=E.length){if(Q)return-1;N=E.length-1}else if(0>N)if(Q)N=0;else return-1;"string"===typeof K&&(K=q.from(K,O));if(q.isBuffer(K))return 0===K.length?-1:m(E,K,N,O,Q);if("number"===typeof K)return K&=255,"function"===typeof Uint8Array.prototype.indexOf?
Q?Uint8Array.prototype.indexOf.call(E,K,N):Uint8Array.prototype.lastIndexOf.call(E,K,N):m(E,[K],N,O,Q);throw new TypeError("val must be string, number or Buffer");}function m(E,K,N,O,Q){function P(ba,Y){return 1===T?ba[Y]:ba.readUInt16BE(Y*T)}var T=1,V=E.length,aa=K.length;if(void 0!==O&&(O=String(O).toLowerCase(),"ucs2"===O||"ucs-2"===O||"utf16le"===O||"utf-16le"===O)){if(2>E.length||2>K.length)return-1;T=2;V/=2;aa/=2;N/=2}if(Q)for(O=-1;N<V;N++)if(P(E,N)===P(K,-1===O?0:N-O)){if(-1===O&&(O=N),N-O+
1===aa)return O*T}else-1!==O&&(N-=N-O),O=-1;else for(N+aa>V&&(N=V-aa);0<=N;N--){V=!0;for(O=0;O<aa;O++)if(P(E,N+O)!==P(K,O)){V=!1;break}if(V)return N}return-1}function r(E,K,N){N=Math.min(E.length,N);for(var O=[];K<N;){var Q=E[K],P=null,T=239<Q?4:223<Q?3:191<Q?2:1;if(K+T<=N)switch(T){case 1:128>Q&&(P=Q);break;case 2:var V=E[K+1];128===(V&192)&&(Q=(Q&31)<<6|V&63,127<Q&&(P=Q));break;case 3:V=E[K+1];var aa=E[K+2];128===(V&192)&&128===(aa&192)&&(Q=(Q&15)<<12|(V&63)<<6|aa&63,2047<Q&&(55296>Q||57343<Q)&&
(P=Q));break;case 4:V=E[K+1];aa=E[K+2];var ba=E[K+3];128===(V&192)&&128===(aa&192)&&128===(ba&192)&&(Q=(Q&15)<<18|(V&63)<<12|(aa&63)<<6|ba&63,65535<Q&&1114112>Q&&(P=Q))}null===P?(P=65533,T=1):65535<P&&(P-=65536,O.push(P>>>10&1023|55296),P=56320|P&1023);O.push(P);K+=T}E=O.length;if(E<=J)O=String.fromCharCode.apply(String,O);else{N="";for(K=0;K<E;)N+=String.fromCharCode.apply(String,O.slice(K,K+=J));O=N}return O}function u(E,K,N){if(0!==E%1||0>E)throw new RangeError("offset is not uint");if(E+K>N)throw new RangeError("Trying to access beyond buffer length");
}function v(E,K,N,O,Q,P){if(!q.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(K>Q||K<P)throw new RangeError('"value" argument is out of bounds');if(N+O>E.length)throw new RangeError("Index out of range");}function w(E,K,N,O,Q,P){if(N+O>E.length)throw new RangeError("Index out of range");if(0>N)throw new RangeError("Index out of range");}function D(E,K,N,O,Q){K=+K;N>>>=0;Q||w(E,K,N,4,3.4028234663852886E38,-3.4028234663852886E38);I.write(E,K,N,O,23,4);return N+4}function C(E,
K,N,O,Q){K=+K;N>>>=0;Q||w(E,K,N,8,1.7976931348623157E308,-1.7976931348623157E308);I.write(E,K,N,O,52,8);return N+8}function x(E,K){K=K||Infinity;for(var N,O=E.length,Q=null,P=[],T=0;T<O;++T){N=E.charCodeAt(T);if(55295<N&&57344>N){if(!Q){if(56319<N){-1<(K-=3)&&P.push(239,191,189);continue}else if(T+1===O){-1<(K-=3)&&P.push(239,191,189);continue}Q=N;continue}if(56320>N){-1<(K-=3)&&P.push(239,191,189);Q=N;continue}N=(Q-55296<<10|N-56320)+65536}else Q&&-1<(K-=3)&&P.push(239,191,189);Q=null;if(128>N){if(0>
--K)break;P.push(N)}else if(2048>N){if(0>(K-=2))break;P.push(N>>6|192,N&63|128)}else if(65536>N){if(0>(K-=3))break;P.push(N>>12|224,N>>6&63|128,N&63|128)}else if(1114112>N){if(0>(K-=4))break;P.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw Error("Invalid code point");}return P}function A(E){for(var K=[],N=0;N<E.length;++N)K.push(E.charCodeAt(N)&255);return K}function B(E){var K=H,N=K.toByteArray;E=E.split("\x3d")[0];E=E.trim().replace(L,"");if(2>E.length)E="";else for(;0!==E.length%
4;)E+="\x3d";return N.call(K,E)}function t(E,K,N,O){for(var Q=0;Q<O&&!(Q+N>=K.length||Q>=E.length);++Q)K[Q+N]=E[Q];return Q}function G(E,K){return E instanceof K||null!=E&&null!=E.constructor&&null!=E.constructor.name&&E.constructor.name===K.name}var H=b("base64-js"),I=b("ieee754");F.Buffer=q;F.SlowBuffer=function(E){+E!=E&&(E=0);return q.alloc(+E)};F.INSPECT_MAX_BYTES=50;F.kMaxLength=2147483647;q.TYPED_ARRAY_SUPPORT=function(){try{var E=new Uint8Array(1);E.__proto__={__proto__:Uint8Array.prototype,
foo:function(){return 42}};return 42===E.foo()}catch(K){return!1}}();q.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(q.prototype,"parent",{enumerable:!0,get:function(){if(q.isBuffer(this))return this.buffer}});Object.defineProperty(q.prototype,"offset",{enumerable:!0,get:function(){if(q.isBuffer(this))return this.byteOffset}});
"undefined"!==typeof Symbol&&null!=Symbol.species&&q[Symbol.species]===q&&Object.defineProperty(q,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});q.poolSize=8192;q.from=function(E,K,N){return p(E,K,N)};q.prototype.__proto__=Uint8Array.prototype;q.__proto__=Uint8Array;q.alloc=function(E,K,N){h(E);E=0>=E?n(E):void 0!==K?"string"===typeof N?n(E).fill(K,N):n(E).fill(K):n(E);return E};q.allocUnsafe=function(E){return a(E)};q.allocUnsafeSlow=function(E){return a(E)};q.isBuffer=function(E){return null!=
E&&!0===E._isBuffer&&E!==q.prototype};q.compare=function(E,K){G(E,Uint8Array)&&(E=q.from(E,E.offset,E.byteLength));G(K,Uint8Array)&&(K=q.from(K,K.offset,K.byteLength));if(!q.isBuffer(E)||!q.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===K)return 0;for(var N=E.length,O=K.length,Q=0,P=Math.min(N,O);Q<P;++Q)if(E[Q]!==K[Q]){N=E[Q];O=K[Q];break}return N<O?-1:O<N?1:0};q.isEncoding=function(E){switch(String(E).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};q.concat=function(E,K){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(0===E.length)return q.alloc(0);var N;if(void 0===K)for(N=K=0;N<E.length;++N)K+=E[N].length;K=q.allocUnsafe(K);var O=0;for(N=0;N<E.length;++N){var Q=E[N];G(Q,Uint8Array)&&(Q=q.from(Q));if(!q.isBuffer(Q))throw new TypeError('"list" argument must be an Array of Buffers');Q.copy(K,O);O+=Q.length}return K};q.byteLength=k;q.prototype._isBuffer=!0;q.prototype.swap16=function(){var E=
this.length;if(0!==E%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var K=0;K<E;K+=2)e(this,K,K+1);return this};q.prototype.swap32=function(){var E=this.length;if(0!==E%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var K=0;K<E;K+=4)e(this,K,K+3),e(this,K+1,K+2);return this};q.prototype.swap64=function(){var E=this.length;if(0!==E%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var K=0;K<E;K+=8)e(this,K,K+7),e(this,K+1,K+6),
e(this,K+2,K+5),e(this,K+3,K+4);return this};q.prototype.toString=function(){var E=this.length;return 0===E?"":0===arguments.length?r(this,0,E):c.apply(this,arguments)};q.prototype.toLocaleString=q.prototype.toString;q.prototype.equals=function(E){if(!q.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:0===q.compare(this,E)};q.prototype.inspect=function(){var E=F.INSPECT_MAX_BYTES;var K=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim();this.length>E&&(K+=" ... ");
return"\x3cBuffer "+K+"\x3e"};q.prototype.compare=function(E,K,N,O,Q){G(E,Uint8Array)&&(E=q.from(E,E.offset,E.byteLength));if(!q.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);void 0===K&&(K=0);void 0===N&&(N=E?E.length:0);void 0===O&&(O=0);void 0===Q&&(Q=this.length);if(0>K||N>E.length||0>O||Q>this.length)throw new RangeError("out of range index");if(O>=Q&&K>=N)return 0;if(O>=Q)return-1;if(K>=N)return 1;K>>>=0;N>>>=0;O>>>=
0;Q>>>=0;if(this===E)return 0;var P=Q-O,T=N-K,V=Math.min(P,T);O=this.slice(O,Q);E=E.slice(K,N);for(K=0;K<V;++K)if(O[K]!==E[K]){P=O[K];T=E[K];break}return P<T?-1:T<P?1:0};q.prototype.includes=function(E,K,N){return-1!==this.indexOf(E,K,N)};q.prototype.indexOf=function(E,K,N){return g(this,E,K,N,!0)};q.prototype.lastIndexOf=function(E,K,N){return g(this,E,K,N,!1)};q.prototype.write=function(E,K,N,O){if(void 0===K)O="utf8",N=this.length,K=0;else if(void 0===N&&"string"===typeof K)O=K,N=this.length,K=
0;else if(isFinite(K))K>>>=0,isFinite(N)?(N>>>=0,void 0===O&&(O="utf8")):(O=N,N=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Q=this.length-K;if(void 0===N||N>Q)N=Q;if(0<E.length&&(0>N||0>K)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");for(Q=!1;;)switch(O){case "hex":a:{K=Number(K)||0;O=this.length-K;N?(N=Number(N),N>O&&(N=O)):N=O;O=E.length;N>O/2&&(N=O/2);for(O=0;O<N;++O){Q=parseInt(E.substr(2*
O,2),16);if(Q!==Q){E=O;break a}this[K+O]=Q}E=O}return E;case "utf8":case "utf-8":return t(x(E,this.length-K),this,K,N);case "ascii":return t(A(E),this,K,N);case "latin1":case "binary":return t(A(E),this,K,N);case "base64":return t(B(E),this,K,N);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":O=E;Q=this.length-K;for(var P=[],T=0;T<O.length&&!(0>(Q-=2));++T){var V=O.charCodeAt(T);E=V>>8;V%=256;P.push(V);P.push(E)}return t(P,this,K,N);default:if(Q)throw new TypeError("Unknown encoding: "+O);
O=(""+O).toLowerCase();Q=!0}};q.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;q.prototype.slice=function(E,K){var N=this.length;E=~~E;K=void 0===K?N:~~K;0>E?(E+=N,0>E&&(E=0)):E>N&&(E=N);0>K?(K+=N,0>K&&(K=0)):K>N&&(K=N);K<E&&(K=E);E=this.subarray(E,K);E.__proto__=q.prototype;return E};q.prototype.readUIntLE=function(E,K,N){E>>>=0;K>>>=0;N||u(E,K,this.length);N=this[E];for(var O=1,Q=0;++Q<K&&(O*=256);)N+=this[E+Q]*O;return N};q.prototype.readUIntBE=
function(E,K,N){E>>>=0;K>>>=0;N||u(E,K,this.length);N=this[E+--K];for(var O=1;0<K&&(O*=256);)N+=this[E+--K]*O;return N};q.prototype.readUInt8=function(E,K){E>>>=0;K||u(E,1,this.length);return this[E]};q.prototype.readUInt16LE=function(E,K){E>>>=0;K||u(E,2,this.length);return this[E]|this[E+1]<<8};q.prototype.readUInt16BE=function(E,K){E>>>=0;K||u(E,2,this.length);return this[E]<<8|this[E+1]};q.prototype.readUInt32LE=function(E,K){E>>>=0;K||u(E,4,this.length);return(this[E]|this[E+1]<<8|this[E+2]<<
16)+16777216*this[E+3]};q.prototype.readUInt32BE=function(E,K){E>>>=0;K||u(E,4,this.length);return 16777216*this[E]+(this[E+1]<<16|this[E+2]<<8|this[E+3])};q.prototype.readIntLE=function(E,K,N){E>>>=0;K>>>=0;N||u(E,K,this.length);N=this[E];for(var O=1,Q=0;++Q<K&&(O*=256);)N+=this[E+Q]*O;N>=128*O&&(N-=Math.pow(2,8*K));return N};q.prototype.readIntBE=function(E,K,N){E>>>=0;K>>>=0;N||u(E,K,this.length);N=K;for(var O=1,Q=this[E+--N];0<N&&(O*=256);)Q+=this[E+--N]*O;Q>=128*O&&(Q-=Math.pow(2,8*K));return Q};
q.prototype.readInt8=function(E,K){E>>>=0;K||u(E,1,this.length);return this[E]&128?-1*(255-this[E]+1):this[E]};q.prototype.readInt16LE=function(E,K){E>>>=0;K||u(E,2,this.length);E=this[E]|this[E+1]<<8;return E&32768?E|4294901760:E};q.prototype.readInt16BE=function(E,K){E>>>=0;K||u(E,2,this.length);E=this[E+1]|this[E]<<8;return E&32768?E|4294901760:E};q.prototype.readInt32LE=function(E,K){E>>>=0;K||u(E,4,this.length);return this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24};q.prototype.readInt32BE=
function(E,K){E>>>=0;K||u(E,4,this.length);return this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]};q.prototype.readFloatLE=function(E,K){E>>>=0;K||u(E,4,this.length);return I.read(this,E,!0,23,4)};q.prototype.readFloatBE=function(E,K){E>>>=0;K||u(E,4,this.length);return I.read(this,E,!1,23,4)};q.prototype.readDoubleLE=function(E,K){E>>>=0;K||u(E,8,this.length);return I.read(this,E,!0,52,8)};q.prototype.readDoubleBE=function(E,K){E>>>=0;K||u(E,8,this.length);return I.read(this,E,!1,52,8)};q.prototype.writeUIntLE=
function(E,K,N,O){E=+E;K>>>=0;N>>>=0;O||v(this,E,K,N,Math.pow(2,8*N)-1,0);O=1;var Q=0;for(this[K]=E&255;++Q<N&&(O*=256);)this[K+Q]=E/O&255;return K+N};q.prototype.writeUIntBE=function(E,K,N,O){E=+E;K>>>=0;N>>>=0;O||v(this,E,K,N,Math.pow(2,8*N)-1,0);O=N-1;var Q=1;for(this[K+O]=E&255;0<=--O&&(Q*=256);)this[K+O]=E/Q&255;return K+N};q.prototype.writeUInt8=function(E,K,N){E=+E;K>>>=0;N||v(this,E,K,1,255,0);this[K]=E&255;return K+1};q.prototype.writeUInt16LE=function(E,K,N){E=+E;K>>>=0;N||v(this,E,K,2,
65535,0);this[K]=E&255;this[K+1]=E>>>8;return K+2};q.prototype.writeUInt16BE=function(E,K,N){E=+E;K>>>=0;N||v(this,E,K,2,65535,0);this[K]=E>>>8;this[K+1]=E&255;return K+2};q.prototype.writeUInt32LE=function(E,K,N){E=+E;K>>>=0;N||v(this,E,K,4,4294967295,0);this[K+3]=E>>>24;this[K+2]=E>>>16;this[K+1]=E>>>8;this[K]=E&255;return K+4};q.prototype.writeUInt32BE=function(E,K,N){E=+E;K>>>=0;N||v(this,E,K,4,4294967295,0);this[K]=E>>>24;this[K+1]=E>>>16;this[K+2]=E>>>8;this[K+3]=E&255;return K+4};q.prototype.writeIntLE=
function(E,K,N,O){E=+E;K>>>=0;O||(O=Math.pow(2,8*N-1),v(this,E,K,N,O-1,-O));O=0;var Q=1,P=0;for(this[K]=E&255;++O<N&&(Q*=256);)0>E&&0===P&&0!==this[K+O-1]&&(P=1),this[K+O]=(E/Q>>0)-P&255;return K+N};q.prototype.writeIntBE=function(E,K,N,O){E=+E;K>>>=0;O||(O=Math.pow(2,8*N-1),v(this,E,K,N,O-1,-O));O=N-1;var Q=1,P=0;for(this[K+O]=E&255;0<=--O&&(Q*=256);)0>E&&0===P&&0!==this[K+O+1]&&(P=1),this[K+O]=(E/Q>>0)-P&255;return K+N};q.prototype.writeInt8=function(E,K,N){E=+E;K>>>=0;N||v(this,E,K,1,127,-128);
0>E&&(E=255+E+1);this[K]=E&255;return K+1};q.prototype.writeInt16LE=function(E,K,N){E=+E;K>>>=0;N||v(this,E,K,2,32767,-32768);this[K]=E&255;this[K+1]=E>>>8;return K+2};q.prototype.writeInt16BE=function(E,K,N){E=+E;K>>>=0;N||v(this,E,K,2,32767,-32768);this[K]=E>>>8;this[K+1]=E&255;return K+2};q.prototype.writeInt32LE=function(E,K,N){E=+E;K>>>=0;N||v(this,E,K,4,2147483647,-2147483648);this[K]=E&255;this[K+1]=E>>>8;this[K+2]=E>>>16;this[K+3]=E>>>24;return K+4};q.prototype.writeInt32BE=function(E,K,N){E=
+E;K>>>=0;N||v(this,E,K,4,2147483647,-2147483648);0>E&&(E=4294967295+E+1);this[K]=E>>>24;this[K+1]=E>>>16;this[K+2]=E>>>8;this[K+3]=E&255;return K+4};q.prototype.writeFloatLE=function(E,K,N){return D(this,E,K,!0,N)};q.prototype.writeFloatBE=function(E,K,N){return D(this,E,K,!1,N)};q.prototype.writeDoubleLE=function(E,K,N){return C(this,E,K,!0,N)};q.prototype.writeDoubleBE=function(E,K,N){return C(this,E,K,!1,N)};q.prototype.copy=function(E,K,N,O){if(!q.isBuffer(E))throw new TypeError("argument should be a Buffer");
N||(N=0);O||0===O||(O=this.length);K>=E.length&&(K=E.length);K||(K=0);0<O&&O<N&&(O=N);if(O===N||0===E.length||0===this.length)return 0;if(0>K)throw new RangeError("targetStart out of bounds");if(0>N||N>=this.length)throw new RangeError("Index out of range");if(0>O)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length);E.length-K<O-N&&(O=E.length-K+N);var Q=O-N;if(this===E&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(K,N,O);else if(this===E&&N<K&&K<O)for(O=
Q-1;0<=O;--O)E[O+K]=this[O+N];else Uint8Array.prototype.set.call(E,this.subarray(N,O),K);return Q};q.prototype.fill=function(E,K,N,O){if("string"===typeof E){"string"===typeof K?(O=K,K=0,N=this.length):"string"===typeof N&&(O=N,N=this.length);if(void 0!==O&&"string"!==typeof O)throw new TypeError("encoding must be a string");if("string"===typeof O&&!q.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(1===E.length){var Q=E.charCodeAt(0);if("utf8"===O&&128>Q||"latin1"===O)E=Q}}else"number"===
typeof E&&(E&=255);if(0>K||this.length<K||this.length<N)throw new RangeError("Out of range index");if(N<=K)return this;K>>>=0;N=void 0===N?this.length:N>>>0;E||(E=0);if("number"===typeof E)for(O=K;O<N;++O)this[O]=E;else{Q=q.isBuffer(E)?E:q.from(E,O);var P=Q.length;if(0===P)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(O=0;O<N-K;++O)this[O+K]=Q[O%P]}return this};var L=/[^+/0-9A-Za-z-_]/g}).call(this,b("buffer").Buffer)},{"base64-js":79,buffer:111,ieee754:416}],112:[function(b,
y,F){function q(l){return[Math.min(l[0],l[1]),Math.max(l[0],l[1])]}function n(l,k){return l[0]-k[0]||l[1]-k[1]}function p(l,k,c){return k in l?l[k]:c}var h=b("./lib/monotone"),a=b("./lib/triangulation"),f=b("./lib/delaunay"),d=b("./lib/filter");y.exports=function(l,k,c){Array.isArray(k)?(c=c||{},k=k||[]):(c=k||{},k=[]);var e=!!p(c,"delaunay",!0),g=!!p(c,"interior",!0),m=!!p(c,"exterior",!0);c=!!p(c,"infinity",!1);if(!g&&!m||0===l.length)return[];var r=h(l,k);if(e||g!==m||c){k=a(l.length,k.map(q).sort(n));
for(var u=0;u<r.length;++u){var v=r[u];k.addTriangle(v[0],v[1],v[2])}e&&f(l,k);return m?g?c?d(k,0,c):k.cells():d(k,1,c):d(k,-1)}return r}},{"./lib/delaunay":113,"./lib/filter":114,"./lib/monotone":115,"./lib/triangulation":116}],113:[function(b,y,F){function q(p,h,a,f,d,l){var k=h.opposite(f,d);if(!(0>k)){if(d<f){var c=f;f=d;d=c;c=l;l=k;k=c}h.isConstraint(f,d)||0>n(p[f],p[d],p[l],p[k])&&a.push(f,d)}}var n=b("robust-in-sphere")[4];b("binary-search-bounds");y.exports=function(p,h){for(var a=[],f=p.length,
d=h.stars,l=0;l<f;++l)for(var k=d[l],c=1;c<k.length;c+=2){var e=k[c];if(!(e<l||h.isConstraint(l,e))){for(var g=k[c-1],m=-1,r=1;r<k.length;r+=2)if(k[r-1]===e){m=k[r];break}0>m||0>n(p[l],p[e],p[g],p[m])&&a.push(l,e)}}for(;0<a.length;){e=a.pop();l=a.pop();m=g=-1;k=d[l];for(f=1;f<k.length;f+=2)c=k[f-1],r=k[f],c===e?m=r:r===e&&(g=c);0>g||0>m||0<=n(p[l],p[e],p[g],p[m])||(h.flip(l,e),q(p,h,a,g,l,m),q(p,h,a,l,m,g),q(p,h,a,m,e,g),q(p,h,a,e,g,m))}}},{"binary-search-bounds":96,"robust-in-sphere":518}],114:[function(b,
y,F){function q(h,a,f,d,l,k,c){this.cells=h;this.neighbor=a;this.flags=d;this.constraint=f;this.active=l;this.next=k;this.boundary=c}function n(h,a){return h[0]-a[0]||h[1]-a[1]||h[2]-a[2]}var p=b("binary-search-bounds");y.exports=function(h,a,f){for(var d=h.cells(),l=d.length,k=0;k<l;++k){var c=d[k],e=c[0],g=c[1],m=c[2];g<m?g<e&&(c[0]=g,c[1]=m,c[2]=e):m<e&&(c[0]=m,c[1]=e,c[2]=g)}d.sort(n);var r=Array(l);for(k=0;k<r.length;++k)r[k]=0;var u=[],v=[],w=Array(3*l),D=Array(3*l),C=null;f&&(C=[]);m=new q(d,
w,D,r,u,v,C);for(k=0;k<l;++k){c=d[k];for(var x=0;3>x;++x){e=c[x];g=c[(x+1)%3];var A=w[3*k+x]=m.locate(g,e,h.opposite(g,e)),B=D[3*k+x]=h.isConstraint(e,g);0>A&&(B?v.push(k):(u.push(k),r[k]=1),f&&C.push([g,e,-1]))}}if(0===a)return f?m.cells.concat(m.boundary):m.cells;l=1;k=m.active;c=m.next;h=m.flags;d=m.cells;e=m.constraint;for(g=m.neighbor;0<k.length||0<c.length;){for(;0<k.length;)if(r=k.pop(),h[r]!==-l)for(h[r]=l,u=0;3>u;++u)v=g[3*r+u],0<=v&&0===h[v]&&(e[3*r+u]?c.push(v):(k.push(v),h[v]=l));r=c;
c=k;k=r;c.length=0;l=-l}for(k=l=0;k<d.length;++k)h[k]===a&&(d[l++]=d[k]);d.length=l;return f?d.concat(m.boundary):d};q.prototype.locate=function(){var h=[0,0,0];return function(a,f,d){var l=a,k=f,c=d;f<d?f<a&&(l=f,k=d,c=a):d<a&&(l=d,k=a,c=f);if(0>l)return-1;h[0]=l;h[1]=k;h[2]=c;return p.eq(this.cells,h,n)}}()},{"binary-search-bounds":96}],115:[function(b,y,F){function q(l,k,c,e,g){this.a=l;this.b=k;this.idx=c;this.lowerIds=e;this.upperIds=g}function n(l,k,c,e){this.a=l;this.b=k;this.type=c;this.idx=
e}function p(l,k){var c=l.a[0]-k.a[0]||l.a[1]-k.a[1]||l.type-k.type;return c||0!==l.type&&(c=d(l.a,l.b,k.b))?c:l.idx-k.idx}function h(l,k){return d(l.a,l.b,k)}function a(l,k){var c;return(c=l.a[0]<k.a[0]?d(l.a,l.b,k.a):d(k.b,k.a,l.a))?c:(c=k.b[0]<l.b[0]?d(l.a,l.b,k.b):d(k.b,k.a,l.b))||l.idx-k.idx}var f=b("binary-search-bounds"),d=b("robust-orientation")[3];y.exports=function(l,k){for(var c=l.length,e=k.length,g=[],m=0;m<c;++m)g.push(new n(l[m],null,0,m));for(m=0;m<e;++m){var r=k[m];c=l[r[0]];r=l[r[1]];
c[0]<r[0]?g.push(new n(c,r,2,m),new n(r,c,1,m)):c[0]>r[0]&&g.push(new n(r,c,2,m),new n(c,r,1,m))}g.sort(p);m=g[0].a[0]-(1+Math.abs(g[0].a[0]))*Math.pow(2,-52);k=[new q([m,1],[m,0],-1,[],[],[],[])];e=[];m=0;for(c=g.length;m<c;++m){var u=g[m];r=u.type;if(0===r){r=e;var v=k,w=l,D=u.a;u=u.idx;for(var C=f.lt(v,D,h),x=f.gt(v,D,h);C<x;++C){for(var A=v[C],B=A.lowerIds,t=B.length;1<t&&0<d(w[B[t-2]],w[B[t-1]],D);)r.push([B[t-1],B[t-2],u]),--t;B.length=t;B.push(u);A=A.upperIds;for(t=A.length;1<t&&0>d(w[A[t-
2]],w[A[t-1]],D);)r.push([A[t-2],A[t-1],u]),--t;A.length=t;A.push(u)}}else 2===r?(r=k,v=u,w=f.le(r,v,a),D=r[w],u=D.upperIds,x=u[u.length-1],D.upperIds=[x],r.splice(w+1,0,new q(v.a,v.b,v.idx,[x],u))):(r=k,v=u,w=v.a,v.a=v.b,v.b=w,v=f.eq(r,v,a),r[v-1].upperIds=r[v].upperIds,r.splice(v,1))}return e}},{"binary-search-bounds":96,"robust-orientation":520}],116:[function(b,y,F){function q(h,a){this.stars=h;this.edges=a}function n(h,a,f){for(var d=1,l=h.length;d<l;d+=2)if(h[d-1]===a&&h[d]===f){h[d-1]=h[l-
2];h[d]=h[l-1];h.length=l-2;break}}var p=b("binary-search-bounds");y.exports=function(h,a){for(var f=Array(h),d=0;d<h;++d)f[d]=[];return new q(f,a)};b=q.prototype;b.isConstraint=function(){function h(f,d){return f[0]-d[0]||f[1]-d[1]}var a=[0,0];return function(f,d){a[0]=Math.min(f,d);a[1]=Math.max(f,d);return 0<=p.eq(this.edges,a,h)}}();b.removeTriangle=function(h,a,f){var d=this.stars;n(d[h],a,f);n(d[a],f,h);n(d[f],h,a)};b.addTriangle=function(h,a,f){var d=this.stars;d[h].push(a,f);d[a].push(f,h);
d[f].push(h,a)};b.opposite=function(h,a){a=this.stars[a];for(var f=1,d=a.length;f<d;f+=2)if(a[f]===h)return a[f-1];return-1};b.flip=function(h,a){var f=this.opposite(h,a),d=this.opposite(a,h);this.removeTriangle(h,a,f);this.removeTriangle(a,h,d);this.addTriangle(h,d,f);this.addTriangle(a,f,d)};b.edges=function(){for(var h=this.stars,a=[],f=0,d=h.length;f<d;++f)for(var l=h[f],k=0,c=l.length;k<c;k+=2)a.push([l[k],l[k+1]]);return a};b.cells=function(){for(var h=this.stars,a=[],f=0,d=h.length;f<d;++f)for(var l=
h[f],k=0,c=l.length;k<c;k+=2){var e=l[k],g=l[k+1];f<Math.min(e,g)&&a.push([f,e,g])}return a}},{"binary-search-bounds":96}],117:[function(b,y,F){y.exports=function(q){for(var n=1,p=1;p<q.length;++p)for(var h=0;h<p;++h)if(q[p]<q[h])n=-n;else if(q[h]===q[p])return 0;return n}},{}],118:[function(b,y,F){function q(f,d){for(var l=0,k=f.length,c=0;c<k;++c)l+=f[c]*d[c];return l}function n(f){var d=f.length;if(0===d)return[];for(var l=h([f.length+1,f.length+1],1),k=h([f.length+1],1),c=l[d][d]=0;c<d;++c){for(var e=
0;e<=c;++e)l[e][c]=l[c][e]=2*q(f[c],f[e]);k[c]=q(f[c],f[c])}f=a(l,k);l=0;k=f[d+1];for(c=0;c<k.length;++c)l+=k[c];var g=Array(d);for(c=0;c<d;++c){k=f[c];var m=0;for(e=0;e<k.length;++e)m+=k[e];g[c]=m/l}return g}function p(f){if(0===f.length)return[];for(var d=f[0].length,l=h([d]),k=n(f),c=0;c<f.length;++c)for(var e=0;e<d;++e)l[e]+=f[c][e]*k[c];return l}var h=b("dup"),a=b("robust-linear-solve");p.barycenetric=n;y.exports=p},{dup:176,"robust-linear-solve":519}],119:[function(b,y,F){y.exports=function(n){for(var p=
q(n),h=0,a=0;a<n.length;++a)for(var f=n[a],d=0;d<p.length;++d)h+=Math.pow(f[d]-p[d],2);return Math.sqrt(h/n.length)};var q=b("circumcenter")},{circumcenter:118}],120:[function(b,y,F){y.exports=function(q,n,p){return n<p?q<n?n:q>p?p:q:q<p?p:q>n?n:q}},{}],121:[function(b,y,F){function q(x){x=v(x);return[D(x,-Infinity),D(x,Infinity)]}function n(x){for(var A=Array(x.length),B=0;B<x.length;++B){var t=x[B];A[B]=[D(t[0],-Infinity),D(t[1],-Infinity),D(t[0],Infinity),D(t[1],Infinity)]}return A}function p(x,
A,B){var t=[];g(B,function(G,H){var I=A[G],J=A[H];I[0]!==J[0]&&I[0]!==J[1]&&I[1]!==J[0]&&I[1]!==J[1]&&m(x[I[0]],x[I[1]],x[J[0]],x[J[1]])&&t.push([G,H])});return t}function h(x,A,B,t){var G=[];g(B,t,function(H,I){var J=A[H];if(J[0]!==I&&J[1]!==I){var L=x[I];m(x[J[0]],x[J[1]],L,L)&&G.push([H,I])}});return G}function a(x,A,B,t,G){var H,I=x.map(function(P){return[r(P[0]),r(P[1])]});for(H=0;H<B.length;++H){var J=B[H];var L=J[0];J=J[1];var E=A[L],K=A[J];if(E=C(w(x[E[0]]),w(x[E[1]]),w(x[K[0]]),w(x[K[1]])))K=
x.length,x.push([v(E[0]),v(E[1])]),I.push(E),t.push([L,K],[J,K])}t.sort(function(P,T){if(P[0]!==T[0])return P[0]-T[0];P=I[P[1]];T=I[T[1]];return u(P[0],T[0])||u(P[1],T[1])});for(H=t.length-1;0<=H;--H){J=t[H];L=J[0];E=A[L];K=E[0];B=E[1];var N=x[K],O=x[B];0>(N[0]-O[0]||N[1]-O[1])&&(N=K,K=B,B=N);E[0]=K;K=E[1]=J[1];var Q;for(G&&(Q=E[2]);0<H&&t[H-1][0]===L;)J=t[--H],J=J[1],G?A.push([K,J,Q]):A.push([K,J]),K=J;G?A.push([K,B,Q]):A.push([K,B])}return I}function f(x,A,B){B=A.length;for(var t=new e(B),G=[],
H=0;H<A.length;++H){var I=A[H],J=q(I[0]);I=q(I[1]);G.push([D(J[0],-Infinity),D(I[0],-Infinity),D(J[1],Infinity),D(I[1],Infinity)])}g(G,function(L,E){t.link(L,E)});J=!0;A=Array(B);for(H=0;H<B;++H)G=t.find(H),G!==H&&(J=!1,x[G]=[Math.min(x[H][0],x[G][0]),Math.min(x[H][1],x[G][1])]);if(J)return null;for(H=J=0;H<B;++H)G=t.find(H),G===H?(A[H]=J,x[J++]=x[H]):A[H]=-1;x.length=J;for(H=0;H<B;++H)0>A[H]&&(A[H]=A[t.find(H)]);return A}function d(x,A){return x[0]-A[0]||x[1]-A[1]}function l(x,A){var B=x[0]-A[0]||
x[1]-A[1];return B?B:x[2]<A[2]?-1:x[2]>A[2]?1:0}function k(x,A,B){if(0!==x.length){if(A)for(var t=0;t<x.length;++t){var G=x[t],H=A[G[0]],I=A[G[1]];G[0]=Math.min(H,I);G[1]=Math.max(H,I)}else for(t=0;t<x.length;++t)G=x[t],H=G[0],I=G[1],G[0]=Math.min(H,I),G[1]=Math.max(H,I);B?x.sort(l):x.sort(d);for(t=A=1;t<x.length;++t)if(G=x[t-1],H=x[t],H[0]!==G[0]||H[1]!==G[1]||B&&H[2]!==G[2])x[A++]=H;x.length=A}}function c(x,A,B){for(var t=Array(A.length),G=0;G<A.length;++G){var H=A[G],I=x[H[0]];H=x[H[1]];t[G]=[D(Math.min(I[0],
H[0]),-Infinity),D(Math.min(I[1],H[1]),-Infinity),D(Math.max(I[0],H[0]),Infinity),D(Math.max(I[1],H[1]),Infinity)]}G=p(x,A,t);I=n(x);t=h(x,A,t,I);H=a(x,A,G,t,B);x=f(x,H,I);k(A,x,B);return x?!0:0<G.length||0<t.length}y.exports=function(x,A,B){if(B){var t=A;for(var G=Array(A.length),H=0;H<A.length;++H){var I=A[H];G[H]=[I[0],I[1],B[H]]}A=G}H=A;I=!!B;G=f(x,[],n(x));k(H,G,I);for(G=!!G;c(x,A,!!B);)G=!0;if(B&&G)for(t.length=0,H=B.length=0;H<A.length;++H)I=A[H],t.push([I[0],I[1]]),B.push(I[2]);return G};
var e=b("union-find"),g=b("box-intersect"),m=b("robust-segment-intersect"),r=b("big-rat"),u=b("big-rat/cmp"),v=b("big-rat/to-float"),w=b("rat-vec"),D=b("nextafter"),C=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":122,"big-rat":83,"big-rat/cmp":81,"big-rat/to-float":95,"box-intersect":101,nextafter:470,"rat-vec":504,"robust-segment-intersect":523,"union-find":568}],122:[function(b,y,F){function q(k,c){return h(n(k[0],c[1]),n(k[1],c[0]))}y.exports=function(k,c,e,g){c=f(c,k);var m=f(g,e);
g=q(c,m);if(0===a(g))return null;e=f(k,e);e=q(m,e);e=p(e,g);c=l(c,e);return d(k,c)};var n=b("big-rat/mul"),p=b("big-rat/div"),h=b("big-rat/sub"),a=b("big-rat/sign"),f=b("rat-vec/sub"),d=b("rat-vec/add"),l=b("rat-vec/muls")},{"big-rat/div":82,"big-rat/mul":92,"big-rat/sign":93,"big-rat/sub":94,"rat-vec/add":503,"rat-vec/muls":505,"rat-vec/sub":506}],123:[function(b,y,F){function q(p,h){null==h&&(h=!0);var a=p[0],f=p[1],d=p[2];p=p[3];null==p&&(p=h?1:255);h&&(a*=255,f*=255,d*=255,p*=255);a=n(a,0,255)&
255;f=n(f,0,255)&255;d=n(d,0,255)&255;p=n(p,0,255)&255;return 16777216*a+(f<<16)+(d<<8)+p}var n=b("clamp");y.exports=q;y.exports.to=q;y.exports.from=function(p,h){p=+p;var a=p>>>24,f=(p&16711680)>>>16,d=(p&65280)>>>8;p&=255;return!1===h?[a,f,d,p]:[a/255,f/255,d/255,p/255]}},{clamp:120}],124:[function(b,y,F){y.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,
235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,
50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,
128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,
230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,
224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],125:[function(b,y,F){var q=b("color-rgba"),n=b("clamp"),p=b("dtype");y.exports=function(h,a){"float"!==a&&a||(a="array");"uint"===a&&(a="uint8");"uint_clamped"===a&&(a="uint8_clamped");var f=new (p(a))(4);a="uint8"!==a&&"uint8_clamped"!==a;h.length&&"string"!==typeof h||(h=q(h),h[0]/=255,h[1]/=255,h[2]/=255);var d=h;d=d instanceof Uint8Array||d instanceof
Uint8ClampedArray?!0:Array.isArray(d)&&(1<d[0]||0===d[0])&&(1<d[1]||0===d[1])&&(1<d[2]||0===d[2])&&(!d[3]||1<d[3])?!0:!1;if(d)return f[0]=h[0],f[1]=h[1],f[2]=h[2],f[3]=null!=h[3]?h[3]:255,a&&(f[0]/=255,f[1]/=255,f[2]/=255,f[3]/=255),f;a?(f[0]=h[0],f[1]=h[1],f[2]=h[2],f[3]=null!=h[3]?h[3]:1):(f[0]=n(Math.floor(255*h[0]),0,255),f[1]=n(Math.floor(255*h[1]),0,255),f[2]=n(Math.floor(255*h[2]),0,255),f[3]=null==h[3]?255:n(Math.floor(255*h[3]),0,255));return f}},{clamp:120,"color-rgba":127,dtype:175}],126:[function(b,
y,F){(function(q){var n=b("color-name"),p=b("is-plain-obj"),h=b("defined");y.exports=function(f){var d,l=[],k=1;if("string"===typeof f)if(n[f]){l=n[f].slice();var c="rgb"}else if("transparent"===f)k=0,c="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(f)){var e=f.slice(1),g=e.length;k=1;4>=g?(l=[parseInt(e[0]+e[0],16),parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16)],4===g&&(k=parseInt(e[3]+e[3],16)/255)):(l=[parseInt(e[0]+e[1],16),parseInt(e[2]+e[3],16),parseInt(e[4]+e[5],16)],8===g&&(k=parseInt(e[6]+
e[7],16)/255));l[0]||(l[0]=0);l[1]||(l[1]=0);l[2]||(l[2]=0);c="rgb"}else(d=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(f))?(f=d[1],k="rgb"===f,c=e=f.replace(/a$/,""),g="cmyk"===e?4:"gray"===e?1:3,l=d[2].trim().split(/\s*,\s*/).map(function(m,r){if(/%$/.test(m)){if(r===g)return parseFloat(m)/100;if("rgb"===e)return 255*parseFloat(m)/100}else if("h"===e[r]&&!/deg$/.test(m)&&void 0!==a[m])return a[m];return parseFloat(m)}),f===e&&l.push(1),k=k?1:void 0===l[g]?
1:l[g],l=l.slice(0,g)):10<f.length&&/[0-9](?:\s|\/)/.test(f)&&(l=f.match(/([0-9]+)/g).map(function(m){return parseFloat(m)}),c=f.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(f))c="rgb",l=[f>>>16,(f&65280)>>>8,f&255];else if(p(f))d=h(f.r,f.red,f.R,null),null!==d?(c="rgb",l=[d,h(f.g,f.green,f.G),h(f.b,f.blue,f.B)]):(c="hsl",l=[h(f.h,f.hue,f.H),h(f.s,f.saturation,f.S),h(f.l,f.lightness,f.L,f.b,f.brightness)]),k=h(f.a,f.alpha,f.opacity,1),null!=f.opacity&&(k/=100);else if(Array.isArray(f)||
q.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(f))l=[f[0],f[1],f[2]],c="rgb",k=4===f.length?f[3]:1;return{space:c,values:l,alpha:k}};var a={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!==typeof fb?fb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"color-name":124,defined:170,"is-plain-obj":443}],127:[function(b,y,F){var q=b("color-parse"),n=b("color-space/hsl"),p=b("clamp");y.exports=function(h){var a=q(h);if(!a.space)return[];h=
Array(3);h[0]=p(a.values[0],0,255);h[1]=p(a.values[1],0,255);h[2]=p(a.values[2],0,255);"h"===a.space[0]&&(h=n.rgb(h));h.push(p(a.alpha,0,1));return h}},{clamp:120,"color-parse":126,"color-space/hsl":128}],128:[function(b,y,F){b=b("./rgb");y.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(q){var n=q[0]/360,p=q[1]/100;q=q[2]/100;if(0===p){var h=255*q;return[h,h,h]}p=.5>q?q*(1+p):q+p-q*p;q=2*q-p;var a=[0,0,0];for(var f=0;3>f;f++)h=
n+1/3*-(f-1),0>h?h++:1<h&&h--,h=1>6*h?q+6*(p-q)*h:1>2*h?p:2>3*h?q+(p-q)*(2/3-h)*6:q,a[f]=255*h;return a}};b.hsl=function(q){var n=q[0]/255,p=q[1]/255,h=q[2]/255;q=Math.min(n,p,h);var a=Math.max(n,p,h),f=a-q,d;a===q?d=0:n===a?d=(p-h)/f:p===a?d=2+(h-n)/f:h===a&&(d=4+(n-p)/f);d=Math.min(60*d,360);0>d&&(d+=360);n=(q+a)/2;return[d,100*(a===q?0:.5>=n?f/(a+q):f/(2-a-q)),100*n]}},{"./rgb":129}],129:[function(b,y,F){y.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},
{}],130:[function(b,y,F){y.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,
0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},
{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},
{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},
{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,
0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,
rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,
44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,
rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,
0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,
rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,
rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,
196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,
rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,
rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,
185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,
157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,
52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,
rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],131:[function(b,y,F){function q(f){return[f[0]/255,f[1]/255,f[2]/
255,f[3]]}function n(f){for(var d,l="#",k=0;3>k;++k)d=f[k],d=d.toString(16),l+=("00"+d).substr(d.length);return l}function p(f){return"rgba("+f.join(",")+")"}var h=b("./colorScale"),a=b("lerp");y.exports=function(f){var d,l;f||(f={});var k=(f.nshades||72)-1;var c=f.format||"hex";(d=f.colormap)||(d="jet");if("string"===typeof d){d=d.toLowerCase();if(!h[d])throw Error(d+" not a supported colorscale");var e=h[d]}else if(Array.isArray(d))e=d.slice();else throw Error("unsupported colormap option",d);if(e.length>
k+1)throw Error(d+" map requires nshades to be at least size "+e.length);var g=Array.isArray(f.alpha)?2!==f.alpha.length?[1,1]:f.alpha.slice():"number"===typeof f.alpha?[f.alpha,f.alpha]:[1,1];f=e.map(function(C){return Math.round(C.index*k)});g[0]=Math.min(Math.max(g[0],0),1);g[1]=Math.min(Math.max(g[1],0),1);var m=e.map(function(C,x){C=e[x].index;x=e[x].rgb.slice();if(4===x.length&&0<=x[3]&&1>=x[3])return x;x[3]=g[0]+(g[1]-g[0])*C;return x});var r=[];for(l=0;l<f.length-1;++l){var u=f[l+1]-f[l];
d=m[l];var v=m[l+1];for(var w=0;w<u;w++){var D=w/u;r.push([Math.round(a(d[0],v[0],D)),Math.round(a(d[1],v[1],D)),Math.round(a(d[2],v[2],D)),a(d[3],v[3],D)])}}r.push(e[e.length-1].rgb.concat(g[1]));"hex"===c?r=r.map(n):"rgbaString"===c?r=r.map(p):"float"===c&&(r=r.map(q));return r}},{"./colorScale":130,lerp:446}],132:[function(b,y,F){function q(d,l,k){var c=h(d[0],-l[0]);d=h(d[1],-l[1]);var e=h(k[0],-l[0]);l=h(k[1],-l[1]);c=f(a(c,e),a(d,l));return 0<=c[c.length-1]}y.exports=function(d,l,k,c){var e=
n(l,k,c);if(0===e){e=p(n(d,l,k));var g=p(n(d,l,c));return e===g?0===e&&(k=q(d,l,k),d=q(d,l,c),k!==d)?k?1:-1:0:0===g?0<e?-1:q(d,l,c)?-1:1:0===e?0<g?1:q(d,l,k)?1:-1:p(g-e)}g=n(d,l,k);return 0<g?0<e&&0<n(d,l,c)?1:-1:0>g?0<e||0<n(d,l,c)?1:-1:0<n(d,l,c)?1:q(d,l,k)?1:-1};var n=b("robust-orientation"),p=b("signum"),h=b("two-sum"),a=b("robust-product"),f=b("robust-sum")},{"robust-orientation":520,"robust-product":521,"robust-sum":525,signum:526,"two-sum":555}],133:[function(b,y,F){function q(p,h){return p-
h}y.exports=function(p,h){var a=p.length,f=p.length-h.length;if(f)return f;switch(a){case 0:return 0;case 1:return p[0]-h[0];case 2:return p[0]+p[1]-h[0]-h[1]||n(p[0],p[1])-n(h[0],h[1]);case 3:a=p[0]+p[1];var d=h[0]+h[1];if(f=a+p[2]-(d+h[2]))return f;f=n(p[0],p[1]);var l=n(h[0],h[1]);return n(f,p[2])-n(l,h[2])||n(f+p[2],a)-n(l+h[2],d);case 4:f=p[0];a=p[1];d=p[2];p=p[3];l=h[0];var k=h[1],c=h[2];h=h[3];return f+a+d+p-(l+k+c+h)||n(f,a,d,p)-n(l,k,c,h,l)||n(f+a,f+d,f+p,a+d,a+p,d+p)-n(l+k,l+c,l+h,k+c,k+
h,c+h)||n(f+a+d,f+a+p,f+d+p,a+d+p)-n(l+k+c,l+k+h,l+c+h,k+c+h);default:p=p.slice().sort(q);h=h.slice().sort(q);for(d=0;d<a;++d)if(f=p[d]-h[d])return f;return 0}};var n=Math.min},{}],134:[function(b,y,F){var q=b("compare-cell"),n=b("cell-orientation");y.exports=function(p,h){return q(p,h)||n(p)-n(h)}},{"cell-orientation":117,"compare-cell":133}],135:[function(b,y,F){var q=b("./lib/ch1d"),n=b("./lib/ch2d"),p=b("./lib/chnd");y.exports=function(h){var a=h.length;if(0===a)return[];if(1===a)return[[0]];
a=h[0].length;return 0===a?[]:1===a?q(h):2===a?n(h):p(h,a)}},{"./lib/ch1d":136,"./lib/ch2d":137,"./lib/chnd":138}],136:[function(b,y,F){y.exports=function(q){for(var n=0,p=0,h=1;h<q.length;++h)q[h][0]<q[n][0]&&(n=h),q[h][0]>q[p][0]&&(p=h);return n<p?[[n],[p]]:n>p?[[p],[n]]:[[n]]}},{}],137:[function(b,y,F){y.exports=function(n){n=q(n);var p=n.length;if(2>=p)return[];for(var h=Array(p),a=n[p-1],f=0;f<p;++f){var d=n[f];h[f]=[a,d];a=d}return h};var q=b("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":456}],
138:[function(b,y,F){y.exports=function(p,h){try{return q(p,!0)}catch(g){var a=n(p);if(a.length<=h)return[];h=p.length;for(var f=Array(h),d=0;d<a.length;++d)f[d]=p[a[d]];var l=a.length;for(d=0;d<h;++d)0>a.indexOf(d)&&(f[l++]=p[d]);p=q(f,!0);h=p.length;f=a.length;for(d=0;d<h;++d){l=p[d];for(var k=0;k<l.length;++k){var c=l[k];if(c<f)l[k]=a[c];else{c-=f;for(var e=0;e<f;++e)c>=a[e]&&(c+=1);l[k]=c}}}return p}};var q=b("incremental-convex-hull"),n=b("affine-hull")},{"affine-hull":67,"incremental-convex-hull":433}],
139:[function(b,y,F){y.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?\x3d.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?\x3d.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?\x3d.*british).*honduras",
BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?\x3d.*bonaire).*eustatius|^(?\x3d.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?\x3d.*peo)(?\x3d.*rep).*china",
CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?\x3d.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",
DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?\x3d.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?\x3d.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",
DEU:"^(?!.*east).*germany|^(?\x3d.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?\x3d.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",
IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?\x3d.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?\x3d.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",
LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",
NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?\x3d.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",
MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?\x3d.*collectivity).*martin|^(?\x3d.*france).*martin(?!ique)|^(?\x3d.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",
SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?\x3d.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?\x3d.*leste).*timor|^(?\x3d.*east).*timor",
TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?\x3d.*socialist).*viet.?nam",
VGB:"^(?\x3d.*\\bu\\.?\\s?k).*virgin|^(?\x3d.*brit).*virgin|^(?\x3d.*kingdom).*virgin",VIR:"^(?\x3d.*\\bu\\.?\\s?s).*virgin|^(?\x3d.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?\x3d.*peo).*yemen|^(?!.*rep)(?\x3d.*dem).*yemen|^(?\x3d.*south).*yemen|^(?\x3d.*aden).*yemen|^(?\x3d.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},
{}],140:[function(b,y,F){y.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},{}],141:[function(b,y,F){y.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],142:[function(b,y,F){y.exports=["normal","italic","oblique"]},{}],143:[function(b,y,F){y.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],144:[function(b,y,F){y.exports={parse:b("./parse"),
stringify:b("./stringify")}},{"./parse":146,"./stringify":147}],145:[function(b,y,F){var q=b("css-font-size-keywords");y.exports={isSize:function(n){return/^[\d\.]/.test(n)||-1!==n.indexOf("/")||-1!==q.indexOf(n)}}},{"css-font-size-keywords":140}],146:[function(b,y,F){function q(g){if("string"!==typeof g)throw Error("Font argument must be a string.");if(e[g])return e[g];if(""===g)throw Error("Cannot parse an empty string.");if(-1!==a.indexOf(g))return e[g]={system:g};for(var m={style:"normal",variant:"normal",
weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},r=k(g,/\s+/),u;u=r.shift();){if(-1!==h.indexOf(u))return["style","variant","weight","stretch"].forEach(function(w){m[w]=u}),e[g]=m;if(-1!==d.indexOf(u))m.style=u;else if("normal"===u||"small-caps"===u)m.variant=u;else if(-1!==l.indexOf(u))m.stretch=u;else if(-1!==f.indexOf(u))m.weight=u;else{if(c(u)){var v=k(u,"/");m.size=v[0];null!=v[1]?m.lineHeight=n(v[1]):"/"===r[0]&&(r.shift(),m.lineHeight=n(r.shift()));if(!r.length)throw Error("Missing required font-family.");
m.family=k(r.join(" "),/\s*,\s*/).map(p);return e[g]=m}throw Error("Unknown or unsupported font token: "+u);}}throw Error("Missing required font-size.");}function n(g){var m=parseFloat(g);return m.toString()===g?m:g}var p=b("unquote"),h=b("css-global-keywords"),a=b("css-system-font-keywords"),f=b("css-font-weight-keywords"),d=b("css-font-style-keywords"),l=b("css-font-stretch-keywords"),k=b("string-split-by"),c=b("./lib/util").isSize;y.exports=q;var e=q.cache={}},{"./lib/util":145,"css-font-stretch-keywords":141,
"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"string-split-by":540,unquote:570}],147:[function(b,y,F){function q(g,m){if(g&&!m[g]&&!a[g])throw Error("Unknown keyword `"+g+"`");return g}function n(g){for(var m={},r=0;r<g.length;r++)m[g[r]]=1;return m}var p=b("pick-by-alias"),h=b("./lib/util").isSize,a=n(b("css-global-keywords")),f=n(b("css-system-font-keywords")),d=n(b("css-font-weight-keywords")),l=n(b("css-font-style-keywords")),
k=n(b("css-font-stretch-keywords")),c={normal:1,"small-caps":1},e={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1};y.exports=function(g){g=p(g,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",
family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});if(g.system)return g.system&&q(g.system,f),g.system;q(g.style,l);q(g.variant,c);q(g.weight,d);q(g.stretch,k);null==g.size&&(g.size="1rem");"number"===typeof g.size&&(g.size+="px");if(!h)throw Error("Bad size value `"+g.size+"`");g.family||(g.family="serif");Array.isArray(g.family)&&(g.family.length||(g.family=["serif"]),g.family=g.family.map(function(r){return e[r]?r:'"'+r+'"'}).join(", "));
var m=[];m.push(g.style);g.variant!==g.style&&m.push(g.variant);g.weight!==g.variant&&g.weight!==g.style&&m.push(g.weight);g.stretch!==g.weight&&g.stretch!==g.variant&&g.stretch!==g.style&&m.push(g.stretch);m.push(g.size+(null==g.lineHeight||"normal"===g.lineHeight||"1"===g.lineHeight+""?"":"/"+g.lineHeight));m.push(g.family);return m.filter(Boolean).join(" ")}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,
"css-system-font-keywords":149,"pick-by-alias":485}],148:[function(b,y,F){y.exports=["inherit","initial","unset"]},{}],149:[function(b,y,F){y.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],150:[function(b,y,F){y.exports=function(q,n,p,h,a,f){var d=a-1,l=a*a,k=d*d,c=(1+2*a)*k;k*=a;a=l*(3-2*a);d*=l;if(q.length){f||(f=Array(q.length));for(l=q.length-1;0<=l;--l)f[l]=c*q[l]+k*n[l]+a*p[l]+d*h[l];return f}return c*q+k*n+a*p+d*h};y.exports.derivative=function(q,n,p,h,a,f){var d=
6*a*a-6*a,l=3*a*a-4*a+1,k=-6*a*a+6*a;a=3*a*a-2*a;if(q.length){f||(f=Array(q.length));for(var c=q.length-1;0<=c;--c)f[c]=d*q[c]+l*n[c]+k*p[c]+a*h[c];return f}return d*q+l*n+k*p[c]+a*h}},{}],151:[function(b,y,F){function q(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var n=b("./lib/thunk.js");y.exports=function(p){var h=
new q;h.pre=p.pre;h.body=p.body;h.post=p.post;var a=p.args.slice(0);h.argTypes=a;for(var f=0;f<a.length;++f){var d=a[f];if("array"===d||"object"===typeof d&&d.blockIndices){h.argTypes[f]="array";h.arrayArgs.push(f);h.arrayBlockIndices.push(d.blockIndices?d.blockIndices:0);h.shimArgs.push("array"+f);if(f<h.pre.args.length&&0<h.pre.args[f].count)throw Error("cwise: pre() block may not reference array args");if(f<h.post.args.length&&0<h.post.args[f].count)throw Error("cwise: post() block may not reference array args");
}else if("scalar"===d)h.scalarArgs.push(f),h.shimArgs.push("scalar"+f);else if("index"===d){h.indexArgs.push(f);if(f<h.pre.args.length&&0<h.pre.args[f].count)throw Error("cwise: pre() block may not reference array index");if(f<h.body.args.length&&h.body.args[f].lvalue)throw Error("cwise: body() block may not write to array index");if(f<h.post.args.length&&0<h.post.args[f].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===d){h.shapeArgs.push(f);if(f<h.pre.args.length&&
h.pre.args[f].lvalue)throw Error("cwise: pre() block may not write to array shape");if(f<h.body.args.length&&h.body.args[f].lvalue)throw Error("cwise: body() block may not write to array shape");if(f<h.post.args.length&&h.post.args[f].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof d&&d.offset)h.argTypes[f]="offset",h.offsetArgs.push({array:d.array,offset:d.offset}),h.offsetArgIndex.push(f);else throw Error("cwise: Unknown argument type "+a[f]);}if(0>=
h.arrayArgs.length)throw Error("cwise: No array arguments specified");if(h.pre.args.length>a.length)throw Error("cwise: Too many arguments in pre() block");if(h.body.args.length>a.length)throw Error("cwise: Too many arguments in body() block");if(h.post.args.length>a.length)throw Error("cwise: Too many arguments in post() block");h.debug=!!p.printCode||!!p.debug;h.funcName=p.funcName||"cwise";h.blockSize=p.blockSize||64;return n(h)}},{"./lib/thunk.js":153}],152:[function(b,y,F){function q(h,a,f){var d=
h.length,l=a.arrayArgs.length;a=0<a.indexArgs.length;var k=[],c=[],e=0,g,m;for(g=0;g<d;++g)c.push(["i",g,"\x3d0"].join(""));for(m=0;m<l;++m)for(g=0;g<d;++g){var r=e;e=h[g];0===g?c.push(["d",m,"s",g,"\x3dt",m,"p",e].join("")):c.push(["d",m,"s",g,"\x3d(t",m,"p",e,"-s",r,"*t",m,"p",r,")"].join(""))}0<c.length&&k.push("var "+c.join(","));for(g=d-1;0<=g;--g)e=h[g],k.push(["for(i",g,"\x3d0;i",g,"\x3cs",e,";++i",g,"){"].join(""));k.push(f);for(g=0;g<d;++g){r=e;e=h[g];for(m=0;m<l;++m)k.push(["p",m,"+\x3dd",
m,"s",g].join(""));a&&(0<g&&k.push(["index[",r,"]-\x3ds",r].join("")),k.push(["++index[",e,"]"].join("")));k.push("}")}return k.join("\n")}function n(h,a,f){for(var d=h.body,l=[],k=[],c=0;c<h.args.length;++c){var e=h.args[c];if(!(0>=e.count)){var g=new RegExp(e.name,"g"),m="",r=a.arrayArgs.indexOf(c);switch(a.argTypes[c]){case "offset":var u=a.offsetArgIndex.indexOf(c);r=a.offsetArgs[u].array;m="+q"+u;case "array":m="p"+r+m;var v="l"+c;u="a"+r;if(0===a.arrayBlockIndices[r])1===e.count?"generic"===
f[r]?e.lvalue?(l.push(["var ",v,"\x3d",u,".get(",m,")"].join("")),d=d.replace(g,v),k.push([u,".set(",m,",",v,")"].join(""))):d=d.replace(g,[u,".get(",m,")"].join("")):d=d.replace(g,[u,"[",m,"]"].join("")):"generic"===f[r]?(l.push(["var ",v,"\x3d",u,".get(",m,")"].join("")),d=d.replace(g,v),e.lvalue&&k.push([u,".set(",m,",",v,")"].join(""))):(l.push(["var ",v,"\x3d",u,"[",m,"]"].join("")),d=d.replace(g,v),e.lvalue&&k.push([u,"[",m,"]\x3d",v].join("")));else{g=[e.name];e=[m];for(m=0;m<Math.abs(a.arrayBlockIndices[r]);m++)g.push("\\s*\\[([^\\]]+)\\]"),
e.push("$"+(m+1)+"*t"+r+"b"+m);g=new RegExp(g.join(""),"g");m=e.join("+");if("generic"===f[r])throw Error("cwise: Generic arrays not supported in combination with blocks!");d=d.replace(g,[u,"[",m,"]"].join(""))}break;case "scalar":d=d.replace(g,"Y"+a.scalarArgs.indexOf(c));break;case "index":d=d.replace(g,"index");break;case "shape":d=d.replace(g,"shape")}}}return[l.join("\n"),d,k.join("\n")].join("\n").trim()}var p=b("uniq");y.exports=function(h,a){for(var f=a[1].length-Math.abs(h.arrayBlockIndices[0])|
0,d=Array(h.arrayArgs.length),l=Array(h.arrayArgs.length),k=0;k<h.arrayArgs.length;++k)l[k]=a[2*k],d[k]=a[2*k+1];var c=[],e=[],g=[],m=[],r=[];for(k=0;k<h.arrayArgs.length;++k){0>h.arrayBlockIndices[k]?(g.push(0),m.push(f),c.push(f),e.push(f+h.arrayBlockIndices[k])):(g.push(h.arrayBlockIndices[k]),m.push(h.arrayBlockIndices[k]+f),c.push(0),e.push(h.arrayBlockIndices[k]));for(var u=[],v=0;v<d[k].length;v++)g[k]<=d[k][v]&&d[k][v]<m[k]&&u.push(d[k][v]-g[k]);r.push(u)}e=["SS"];m=["'use strict'"];u=[];
for(v=0;v<f;++v)u.push(["s",v,"\x3dSS[",v,"]"].join(""));for(k=0;k<h.arrayArgs.length;++k){e.push("a"+k);e.push("t"+k);e.push("p"+k);for(v=0;v<f;++v)u.push(["t",k,"p",v,"\x3dt",k,"[",g[k]+v,"]"].join(""));for(v=0;v<Math.abs(h.arrayBlockIndices[k]);++v)u.push(["t",k,"b",v,"\x3dt",k,"[",c[k]+v,"]"].join(""))}for(k=0;k<h.scalarArgs.length;++k)e.push("Y"+k);0<h.shapeArgs.length&&u.push("shape\x3dSS.slice(0)");if(0<h.indexArgs.length){v=Array(f);for(k=0;k<f;++k)v[k]="0";u.push(["index\x3d[",v.join(","),
"]"].join(""))}for(k=0;k<h.offsetArgs.length;++k){c=h.offsetArgs[k];g=[];for(v=0;v<c.offset.length;++v)0!==c.offset[v]&&(1===c.offset[v]?g.push(["t",c.array,"p",v].join("")):g.push([c.offset[v],"*t",c.array,"p",v].join("")));0===g.length?u.push("q"+k+"\x3d0"):u.push(["q",k,"\x3d",g.join("+")].join(""))}k=p([].concat(h.pre.thisVars).concat(h.body.thisVars).concat(h.post.thisVars));u=u.concat(k);0<u.length&&m.push("var "+u.join(","));for(k=0;k<h.arrayArgs.length;++k)m.push("p"+k+"|\x3d0");3<h.pre.body.length&&
m.push(n(h.pre,h,l));v=n(h.body,h,l);a:for(k=0,u=r[0].length;k<u;){for(c=1;c<r.length;++c)if(r[c][k]!==r[0][k])break a;++k}if(k<f){f=m.push;u=k;r=r[0];c=r.length;g=h.arrayArgs.length;for(var w=h.blockSize,D=0<h.indexArgs.length,C=[],x=0;x<g;++x)C.push(["var offset",x,"\x3dp",x].join(""));for(x=u;x<c;++x)C.push(["for(var j"+x+"\x3dSS[",r[x],"]|0;j",x,"\x3e0;){"].join("")),C.push(["if(j",x,"\x3c",w,"){"].join("")),C.push(["s",r[x],"\x3dj",x].join("")),C.push(["j",x,"\x3d0"].join("")),C.push(["}else{s",
r[x],"\x3d",w].join("")),C.push(["j",x,"-\x3d",w,"}"].join("")),D&&C.push(["index[",r[x],"]\x3dj",x].join(""));for(x=0;x<g;++x){w=["offset"+x];for(D=u;D<c;++D)w.push(["j",D,"*t",x,"p",r[D]].join(""));C.push(["p",x,"\x3d(",w.join("+"),")"].join(""))}C.push(q(r,h,v));for(x=u;x<c;++x)C.push("}");r=C.join("\n");f.call(m,r)}else m.push(q(r[0],h,v));3<h.post.body.length&&m.push(n(h.post,h,l));h.debug&&console.log("-----Generated cwise routine for ",a,":\n"+m.join("\n")+"\n----------");h=h.funcName||"unnamed";
d=d[0].join("s");a=Array(l.length);r=!0;for(f=0;f<l.length;++f)v=l[f],u=(u=v.match(/\d+/))?u[0]:"",0===v.charAt(0)?a[f]="u"+v.charAt(1)+u:a[f]=v.charAt(0)+u,0<f&&(r=r&&a[f]===a[f-1]);l=r?a[0]:a.join("");l=[h,"_cwise_loop_",d,"m",k,l].join("");return(new Function(["function ",l,"(",e.join(","),"){",m.join("\n"),"} return ",l].join("")))()}},{uniq:569}],153:[function(b,y,F){var q=b("./compile.js");y.exports=function(n){var p=["'use strict'","var CACHED\x3d{}"],h=[];p.push(["return function ",n.funcName+
"_cwise_thunk","(",n.shimArgs.join(","),"){"].join(""));for(var a=[],f=[],d=[["array",n.arrayArgs[0],".shape.slice(",Math.max(0,n.arrayBlockIndices[0]),0>n.arrayBlockIndices[0]?","+n.arrayBlockIndices[0]+")":")"].join("")],l=[],k=[],c=0;c<n.arrayArgs.length;++c){var e=n.arrayArgs[c];h.push(["t",e,"\x3darray",e,".dtype,r",e,"\x3darray",e,".order"].join(""));a.push("t"+e);a.push("r"+e);f.push("t"+e);f.push("r"+e+".join()");d.push("array"+e+".data");d.push("array"+e+".stride");d.push("array"+e+".offset|0");
0<c&&(l.push("array"+n.arrayArgs[0]+".shape.length\x3d\x3d\x3darray"+e+".shape.length+"+(Math.abs(n.arrayBlockIndices[0])-Math.abs(n.arrayBlockIndices[c]))),k.push("array"+n.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[0])+"]\x3d\x3d\x3darray"+e+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[c])+"]"))}1<n.arrayArgs.length&&(p.push("if (!("+l.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),p.push("for(var shapeIndex\x3darray"+
n.arrayArgs[0]+".shape.length-"+Math.abs(n.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),p.push("if (!("+k.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),p.push("}"));for(c=0;c<n.scalarArgs.length;++c)d.push("scalar"+n.scalarArgs[c]);h.push(["type\x3d[",f.join(","),"].join()"].join(""));h.push("proc\x3dCACHED[type]");p.push("var "+h.join(","));p.push(["if(!proc){CACHED[type]\x3dproc\x3dcompile([",a.join(","),"])}return proc(",d.join(","),")}"].join(""));
n.debug&&console.log("-----Generated thunk:\n"+p.join("\n")+"\n----------");return(new Function("compile",p.join("\n")))(q.bind(void 0,n))}},{"./compile.js":152}],154:[function(b,y,F){var q=b("type/value/is"),n=b("type/value/ensure"),p=b("type/plain-function/ensure"),h=b("es5-ext/object/copy"),a=b("es5-ext/object/normalize-options"),f=b("es5-ext/object/map"),d=Function.prototype.bind,l=Object.defineProperty,k=Object.prototype.hasOwnProperty;var c=function(e,g,m){var r=n(g)&&p(g.value);var u=h(g);
delete u.writable;delete u.value;u.get=function(){if(!m.overwriteDefinition&&k.call(this,e))return r;g.value=d.call(r,m.resolveContext?m.resolveContext(this):this);l(this,e,g);return this[e]};return u};y.exports=function(e,g){var m=a(g);q(m.resolveContext)&&p(m.resolveContext);return f(e,function(r,u){return c(u,r,m)})}},{"es5-ext/object/copy":196,"es5-ext/object/map":204,"es5-ext/object/normalize-options":205,"type/plain-function/ensure":561,"type/value/ensure":565,"type/value/is":566}],155:[function(b,
y,F){var q=b("type/value/is"),n=b("type/plain-function/is"),p=b("es5-ext/object/assign"),h=b("es5-ext/object/normalize-options"),a=b("es5-ext/string/#/contains");(y.exports=function(f,d){if(2>arguments.length||"string"!==typeof f){var l=d;d=f;f=null}else l=arguments[2];if(q(f)){var k=a.call(f,"c");var c=a.call(f,"e");var e=a.call(f,"w")}else k=e=!0,c=!1;k={value:d,configurable:k,enumerable:c,writable:e};return l?p(h(l),k):k}).gs=function(f,d,l,k){"string"!==typeof f&&(k=l,l=d,d=f,f=null);q(d)?n(d)?
q(l)?n(l)||(k=l,l=void 0):l=void 0:(k=d,d=l=void 0):d=void 0;if(q(f)){var c=a.call(f,"c");f=a.call(f,"e")}else c=!0,f=!1;d={get:d,set:l,configurable:c,enumerable:f};return k?p(h(k),d):d}},{"es5-ext/object/assign":193,"es5-ext/object/normalize-options":205,"es5-ext/string/#/contains":212,"type/plain-function/is":562,"type/value/is":566}],156:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F):n(q.d3=q.d3||{})})(this,function(q){function n(L,E){return L<E?-1:L>E?1:L>=E?
0:NaN}function p(L){1===L.length&&(L=h(L));return{left:function(E,K,N,O){null==N&&(N=0);null==O&&(O=E.length);for(;N<O;){var Q=N+O>>>1;0>L(E[Q],K)?N=Q+1:O=Q}return N},right:function(E,K,N,O){null==N&&(N=0);null==O&&(O=E.length);for(;N<O;){var Q=N+O>>>1;0<L(E[Q],K)?O=Q:N=Q+1}return N}}}function h(L){return function(E,K){return n(L(E),K)}}function a(L,E){return[L,E]}function f(L){return null===L?NaN:+L}function d(L,E){var K=L.length,N=0,O=-1,Q=0,P,T=0;if(null==E)for(;++O<K;){if(!isNaN(P=f(L[O]))){var V=
P-Q;Q+=V/++N;T+=V*(P-Q)}}else for(;++O<K;)isNaN(P=f(E(L[O],O,L)))||(V=P-Q,Q+=V/++N,T+=V*(P-Q));if(1<N)return T/(N-1)}function l(L,E){return(L=d(L,E))?Math.sqrt(L):L}function k(L,E){var K=L.length,N=-1,O,Q,P;if(null==E)for(;++N<K;){if(null!=(O=L[N])&&O>=O)for(Q=P=O;++N<K;)null!=(O=L[N])&&(Q>O&&(Q=O),P<O&&(P=O))}else for(;++N<K;)if(null!=(O=E(L[N],N,L))&&O>=O)for(Q=P=O;++N<K;)null!=(O=E(L[N],N,L))&&(Q>O&&(Q=O),P<O&&(P=O));return[Q,P]}function c(L){return function(){return L}}function e(L){return L}
function g(L,E,K){L=+L;E=+E;K=2>(O=arguments.length)?(E=L,L=0,1):3>O?1:+K;for(var N=-1,O=Math.max(0,Math.ceil((E-L)/K))|0,Q=Array(O);++N<O;)Q[N]=L+N*K;return Q}function m(L,E,K){E=(E-L)/Math.max(0,K);L=Math.floor(Math.log(E)/Math.LN10);E/=Math.pow(10,L);return 0<=L?(E>=H?10:E>=I?5:E>=J?2:1)*Math.pow(10,L):-Math.pow(10,-L)/(E>=H?10:E>=I?5:E>=J?2:1)}function r(L,E,K){var N=Math.abs(E-L)/Math.max(0,K);K=Math.pow(10,Math.floor(Math.log(N)/Math.LN10));N/=K;N>=H?K*=10:N>=I?K*=5:N>=J&&(K*=2);return E<L?
-K:K}function u(L){return Math.ceil(Math.log(L.length)/Math.LN2)+1}function v(L,E,K){null==K&&(K=f);if(N=L.length){if(0>=(E=+E)||2>N)return+K(L[0],0,L);if(1<=E)return+K(L[N-1],N-1,L);var N;E*=N-1;N=Math.floor(E);var O=+K(L[N],N,L);L=+K(L[N+1],N+1,L);return O+(L-O)*(E-N)}}function w(L,E){var K=L.length,N=-1,O,Q;if(null==E)for(;++N<K;){if(null!=(O=L[N])&&O>=O)for(Q=O;++N<K;)null!=(O=L[N])&&Q>O&&(Q=O)}else for(;++N<K;)if(null!=(O=E(L[N],N,L))&&O>=O)for(Q=O;++N<K;)null!=(O=E(L[N],N,L))&&Q>O&&(Q=O);return Q}
function D(L){if(!(Q=L.length))return[];for(var E=-1,K=w(L,C),N=Array(K);++E<K;)for(var O=-1,Q,P=N[E]=Array(Q);++O<Q;)P[O]=L[O][E];return N}function C(L){return L.length}var x=p(n),A=x.right;x=x.left;var B=Array.prototype,t=B.slice,G=B.map,H=Math.sqrt(50),I=Math.sqrt(10),J=Math.sqrt(2);q.bisect=A;q.bisectRight=A;q.bisectLeft=x;q.ascending=n;q.bisector=p;q.cross=function(L,E,K){var N=L.length,O=E.length,Q=Array(N*O),P,T,V;null==K&&(K=a);for(P=V=0;P<N;++P){var aa=L[P];for(T=0;T<O;++T,++V)Q[V]=K(aa,
E[T])}return Q};q.descending=function(L,E){return E<L?-1:E>L?1:E>=L?0:NaN};q.deviation=l;q.extent=k;q.histogram=function(){function L(O){var Q,P=O.length,T=Array(P);for(Q=0;Q<P;++Q)T[Q]=E(O[Q],Q,O);Q=K(T);var V=Q[0],aa=Q[1],ba=N(T,V,aa);Array.isArray(ba)||(ba=r(V,aa,ba),ba=g(Math.ceil(V/ba)*ba,aa,ba));for(var Y=ba.length;ba[0]<=V;)ba.shift(),--Y;for(;ba[Y-1]>aa;)ba.pop(),--Y;var ea=Array(Y+1);for(Q=0;Q<=Y;++Q){var da=ea[Q]=[];da.x0=0<Q?ba[Q-1]:V;da.x1=Q<Y?ba[Q]:aa}for(Q=0;Q<P;++Q)da=T[Q],V<=da&&da<=
aa&&ea[A(ba,da,0,Y)].push(O[Q]);return ea}var E=e,K=k,N=u;L.value=function(O){return arguments.length?(E="function"===typeof O?O:c(O),L):E};L.domain=function(O){return arguments.length?(K="function"===typeof O?O:c([O[0],O[1]]),L):K};L.thresholds=function(O){return arguments.length?(N="function"===typeof O?O:Array.isArray(O)?c(t.call(O)):c(O),L):N};return L};q.thresholdFreedmanDiaconis=function(L,E,K){L=G.call(L,f).sort(n);return Math.ceil((K-E)/(2*(v(L,.75)-v(L,.25))*Math.pow(L.length,-1/3)))};q.thresholdScott=
function(L,E,K){return Math.ceil((K-E)/(3.5*l(L)*Math.pow(L.length,-1/3)))};q.thresholdSturges=u;q.max=function(L,E){var K=L.length,N=-1,O,Q;if(null==E)for(;++N<K;){if(null!=(O=L[N])&&O>=O)for(Q=O;++N<K;)null!=(O=L[N])&&O>Q&&(Q=O)}else for(;++N<K;)if(null!=(O=E(L[N],N,L))&&O>=O)for(Q=O;++N<K;)null!=(O=E(L[N],N,L))&&O>Q&&(Q=O);return Q};q.mean=function(L,E){var K=L.length,N=K,O=-1,Q,P=0;if(null==E)for(;++O<K;)isNaN(Q=f(L[O]))?--N:P+=Q;else for(;++O<K;)isNaN(Q=f(E(L[O],O,L)))?--N:P+=Q;if(N)return P/
N};q.median=function(L,E){var K=L.length,N=-1,O,Q=[];if(null==E)for(;++N<K;)isNaN(O=f(L[N]))||Q.push(O);else for(;++N<K;)isNaN(O=f(E(L[N],N,L)))||Q.push(O);return v(Q.sort(n),.5)};q.merge=function(L){var E=L.length;var K=-1;for(var N=0,O,Q;++K<E;)N+=L[K].length;for(O=Array(N);0<=--E;)for(Q=L[E],K=Q.length;0<=--K;)O[--N]=Q[K];return O};q.min=w;q.pairs=function(L,E){null==E&&(E=a);for(var K=0,N=L.length-1,O=L[0],Q=Array(0>N?0:N);K<N;)Q[K]=E(O,O=L[++K]);return Q};q.permute=function(L,E){for(var K=E.length,
N=Array(K);K--;)N[K]=L[E[K]];return N};q.quantile=v;q.range=g;q.scan=function(L,E){if(K=L.length){var K,N=0,O=0,Q,P=L[O];for(null==E&&(E=n);++N<K;)if(0>E(Q=L[N],P)||0!==E(P,P))P=Q,O=N;if(0===E(P,P))return O}};q.shuffle=function(L,E,K){K=(null==K?L.length:K)-(E=null==E?0:+E);for(var N,O;K;)O=Math.random()*K--|0,N=L[K+E],L[K+E]=L[O+E],L[O+E]=N;return L};q.sum=function(L,E){var K=L.length,N=-1,O,Q=0;if(null==E)for(;++N<K;){if(O=+L[N])Q+=O}else for(;++N<K;)if(O=+E(L[N],N,L))Q+=O;return Q};q.ticks=function(L,
E,K){var N,O=-1,Q;E=+E;L=+L;K=+K;if(L===E&&0<K)return[L];if(N=E<L){var P=L;L=E;E=P}if(0===(Q=m(L,E,K))||!isFinite(Q))return[];if(0<Q)for(L=Math.ceil(L/Q),E=Math.floor(E/Q),E=Array(P=Math.ceil(E-L+1));++O<P;)E[O]=(L+O)*Q;else for(L=Math.floor(L*Q),E=Math.ceil(E*Q),E=Array(P=Math.ceil(L-E+1));++O<P;)E[O]=(L-O)/Q;N&&E.reverse();return E};q.tickIncrement=m;q.tickStep=r;q.transpose=D;q.variance=d;q.zip=function(){return D(arguments)};Object.defineProperty(q,"__esModule",{value:!0})})},{}],157:[function(b,
y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F):n(q.d3=q.d3||{})})(this,function(q){function n(){}function p(e,g){var m=new n;if(e instanceof n)e.each(function(w,D){m.set(D,w)});else if(Array.isArray(e)){var r=-1,u=e.length,v;if(null==g)for(;++r<u;)m.set(r,e[r]);else for(;++r<u;)m.set(g(v=e[r],r,e),v)}else if(e)for(r in e)m.set(r,e[r]);return m}function h(){return{}}function a(e,g,m){e[g]=m}function f(){return p()}function d(e,g,m){e.set(g,m)}function l(){}function k(e,g){var m=
new l;if(e instanceof l)e.each(function(v){m.add(v)});else if(e){var r=-1,u=e.length;if(null==g)for(;++r<u;)m.add(e[r]);else for(;++r<u;)m.add(g(e[r],r,e))}return m}n.prototype=p.prototype={constructor:n,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,g){this["$"+e]=g;return this},remove:function(e){e="$"+e;return e in this&&delete this[e]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[],g;for(g in this)"$"===g[0]&&e.push(g.slice(1));
return e},values:function(){var e=[],g;for(g in this)"$"===g[0]&&e.push(this[g]);return e},entries:function(){var e=[],g;for(g in this)"$"===g[0]&&e.push({key:g.slice(1),value:this[g]});return e},size:function(){var e=0,g;for(g in this)"$"===g[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var g in this)"$"===g[0]&&e(this[g],g.slice(1),this)}};var c=p.prototype;l.prototype=k.prototype={constructor:l,has:c.has,add:function(e){e+="";this["$"+
e]=e;return this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};q.nest=function(){function e(D,C,x,A){if(C>=m.length)return null!=u&&D.sort(u),null!=v?v(D):D;for(var B=-1,t=D.length,G=m[C++],H,I,J=p(),L,E=x();++B<t;)(L=J.get(H=G(I=D[B])+""))?L.push(I):J.set(H,[I]);J.each(function(K,N){A(E,N,e(K,C,x,A))});return E}function g(D,C){if(++C>m.length)return D;var x=r[C-1];if(null!=v&&C>=m.length)var A=D.entries();else A=[],D.each(function(B,t){A.push({key:t,values:g(B,
C)})});return null!=x?A.sort(function(B,t){return x(B.key,t.key)}):A}var m=[],r=[],u,v,w;return w={object:function(D){return e(D,0,h,a)},map:function(D){return e(D,0,f,d)},entries:function(D){return g(e(D,0,f,d),0)},key:function(D){m.push(D);return w},sortKeys:function(D){r[m.length-1]=D;return w},sortValues:function(D){u=D;return w},rollup:function(D){v=D;return w}}};q.set=k;q.map=p;q.keys=function(e){var g=[],m;for(m in e)g.push(m);return g};q.values=function(e){var g=[],m;for(m in e)g.push(e[m]);
return g};q.entries=function(e){var g=[],m;for(m in e)g.push({key:m,value:e[m]});return g};Object.defineProperty(q,"__esModule",{value:!0})})},{}],158:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(ma,wa,na){ma.prototype=wa.prototype=na;na.constructor=ma}function p(ma,wa){ma=Object.create(ma.prototype);for(var na in wa)ma[na]=wa[na];return ma}function h(){}function a(){return this.rgb().formatHex()}function f(){return this.rgb().formatRgb()}
function d(ma){var wa,na;ma=(ma+"").trim().toLowerCase();return(wa=T.exec(ma))?(na=wa[1].length,wa=parseInt(wa[1],16),6===na?l(wa):3===na?new g(wa>>8&15|wa>>4&240,wa>>4&15|wa&240,(wa&15)<<4|wa&15,1):8===na?k(wa>>24&255,wa>>16&255,wa>>8&255,(wa&255)/255):4===na?k(wa>>12&15|wa>>8&240,wa>>8&15|wa>>4&240,wa>>4&15|wa&240,((wa&15)<<4|wa&15)/255):null):(wa=V.exec(ma))?new g(wa[1],wa[2],wa[3],1):(wa=aa.exec(ma))?new g(255*wa[1]/100,255*wa[2]/100,255*wa[3]/100,1):(wa=ba.exec(ma))?k(wa[1],wa[2],wa[3],wa[4]):
(wa=Y.exec(ma))?k(255*wa[1]/100,255*wa[2]/100,255*wa[3]/100,wa[4]):(wa=ea.exec(ma))?v(wa[1],wa[2]/100,wa[3]/100,1):(wa=da.exec(ma))?v(wa[1],wa[2]/100,wa[3]/100,wa[4]):ca.hasOwnProperty(ma)?l(ca[ma]):"transparent"===ma?new g(NaN,NaN,NaN,0):null}function l(ma){return new g(ma>>16&255,ma>>8&255,ma&255,1)}function k(ma,wa,na,ya){0>=ya&&(ma=wa=na=NaN);return new g(ma,wa,na,ya)}function c(ma){ma instanceof h||(ma=d(ma));if(!ma)return new g;ma=ma.rgb();return new g(ma.r,ma.g,ma.b,ma.opacity)}function e(ma,
wa,na,ya){return 1===arguments.length?c(ma):new g(ma,wa,na,null==ya?1:ya)}function g(ma,wa,na,ya){this.r=+ma;this.g=+wa;this.b=+na;this.opacity=+ya}function m(){return"#"+u(this.r)+u(this.g)+u(this.b)}function r(){var ma=this.opacity;ma=isNaN(ma)?1:Math.max(0,Math.min(1,ma));return(1===ma?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===ma?")":", "+ma+")")}function u(ma){ma=
Math.max(0,Math.min(255,Math.round(ma)||0));return(16>ma?"0":"")+ma.toString(16)}function v(ma,wa,na,ya){0>=ya?ma=wa=na=NaN:0>=na||1<=na?ma=wa=NaN:0>=wa&&(ma=NaN);return new C(ma,wa,na,ya)}function w(ma){if(ma instanceof C)return new C(ma.h,ma.s,ma.l,ma.opacity);ma instanceof h||(ma=d(ma));if(!ma)return new C;if(ma instanceof C)return ma;ma=ma.rgb();var wa=ma.r/255,na=ma.g/255,ya=ma.b/255,Fa=Math.min(wa,na,ya),Ha=Math.max(wa,na,ya),eb=NaN,hb=Ha-Fa,ob=(Ha+Fa)/2;hb?(eb=wa===Ha?(na-ya)/hb+6*(na<ya):
na===Ha?(ya-wa)/hb+2:(wa-na)/hb+4,hb/=.5>ob?Ha+Fa:2-Ha-Fa,eb*=60):hb=0<ob&&1>ob?0:eb;return new C(eb,hb,ob,ma.opacity)}function D(ma,wa,na,ya){return 1===arguments.length?w(ma):new C(ma,wa,na,null==ya?1:ya)}function C(ma,wa,na,ya){this.h=+ma;this.s=+wa;this.l=+na;this.opacity=+ya}function x(ma,wa,na){return 255*(60>ma?wa+(na-wa)*ma/60:180>ma?na:240>ma?wa+(na-wa)*(240-ma)/60:wa)}function A(ma){if(ma instanceof t)return new t(ma.l,ma.a,ma.b,ma.opacity);if(ma instanceof K)return N(ma);ma instanceof g||
(ma=c(ma));var wa=J(ma.r),na=J(ma.g),ya=J(ma.b),Fa=G(.2225045*wa+.7168786*na+.0606169*ya);if(wa===na&&na===ya)var Ha=wa=Fa;else Ha=G((.4360747*wa+.3850649*na+.1430804*ya)/.96422),wa=G((.0139322*wa+.0971045*na+.7141733*ya)/.82521);return new t(116*Fa-16,500*(Ha-Fa),200*(Fa-wa),ma.opacity)}function B(ma,wa,na,ya){return 1===arguments.length?A(ma):new t(ma,wa,na,null==ya?1:ya)}function t(ma,wa,na,ya){this.l=+ma;this.a=+wa;this.b=+na;this.opacity=+ya}function G(ma){return ma>ra?Math.pow(ma,1/3):ma/ka+
qa}function H(ma){return ma>oa?ma*ma*ma:ka*(ma-qa)}function I(ma){return 255*(.0031308>=ma?12.92*ma:1.055*Math.pow(ma,1/2.4)-.055)}function J(ma){return.04045>=(ma/=255)?ma/12.92:Math.pow((ma+.055)/1.055,2.4)}function L(ma){if(ma instanceof K)return new K(ma.h,ma.c,ma.l,ma.opacity);ma instanceof t||(ma=A(ma));if(0===ma.a&&0===ma.b)return new K(NaN,0<ma.l&&100>ma.l?0:NaN,ma.l,ma.opacity);var wa=Math.atan2(ma.b,ma.a)*pa;return new K(0>wa?wa+360:wa,Math.sqrt(ma.a*ma.a+ma.b*ma.b),ma.l,ma.opacity)}function E(ma,
wa,na,ya){return 1===arguments.length?L(ma):new K(ma,wa,na,null==ya?1:ya)}function K(ma,wa,na,ya){this.h=+ma;this.c=+wa;this.l=+na;this.opacity=+ya}function N(ma){if(isNaN(ma.h))return new t(ma.l,0,0,ma.opacity);var wa=ma.h*la;return new t(ma.l,Math.cos(wa)*ma.c,Math.sin(wa)*ma.c,ma.opacity)}function O(ma,wa,na,ya){if(1===arguments.length){var Fa=ma;if(Fa instanceof Q)Fa=new Q(Fa.h,Fa.s,Fa.l,Fa.opacity);else{Fa instanceof g||(Fa=c(Fa));var Ha=Fa.g/255,eb=Fa.b/255,hb=(ha*eb+Fa.r/255*-1.7884503806-
3.5172982438*Ha)/(ha+-1.7884503806-3.5172982438);eb-=hb;var ob=(1.97294*(Ha-hb)- -.29227*eb)/-.90649;eb=(Ha=Math.sqrt(ob*ob+eb*eb)/(1.97294*hb*(1-hb)))?Math.atan2(ob,eb)*pa-120:NaN;Fa=new Q(0>eb?eb+360:eb,Ha,hb,Fa.opacity)}}else Fa=new Q(ma,wa,na,null==ya?1:ya);return Fa}function Q(ma,wa,na,ya){this.h=+ma;this.s=+wa;this.l=+na;this.opacity=+ya}var P=1/.7,T=/^#([0-9a-f]{3,8})$/,V=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,aa=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
ba=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Y=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ea=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,da=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
ca={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n(h,d,{copy:function(ma){return Object.assign(new this.constructor,this,ma)},displayable:function(){return this.rgb().displayable()},hex:a,formatHex:a,formatHsl:function(){return w(this).formatHsl()},formatRgb:f,toString:f});n(g,e,p(h,{brighter:function(ma){ma=null==ma?P:Math.pow(P,ma);return new g(this.r*ma,this.g*ma,this.b*ma,this.opacity)},darker:function(ma){ma=null==ma?.7:
Math.pow(.7,ma);return new g(this.r*ma,this.g*ma,this.b*ma,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:m,formatHex:m,formatRgb:r,toString:r}));n(C,D,p(h,{brighter:function(ma){ma=null==ma?P:Math.pow(P,ma);return new C(this.h,this.s,this.l*ma,this.opacity)},darker:function(ma){ma=null==ma?.7:Math.pow(.7,ma);return new C(this.h,this.s,this.l*ma,this.opacity)},
rgb:function(){var ma=this.h%360+360*(0>this.h),wa=isNaN(ma)||isNaN(this.s)?0:this.s,na=this.l;wa=na+(.5>na?na:1-na)*wa;na=2*na-wa;return new g(x(240<=ma?ma-240:ma+120,na,wa),x(ma,na,wa),x(120>ma?ma+240:ma-120,na,wa),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var ma=this.opacity;ma=isNaN(ma)?1:Math.max(0,Math.min(1,ma));return(1===ma?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+
"%, "+100*(this.l||0)+"%"+(1===ma?")":", "+ma+")")}}));var la=Math.PI/180,pa=180/Math.PI,qa=4/29,oa=6/29,ka=3*oa*oa,ra=oa*oa*oa;n(t,B,p(h,{brighter:function(ma){return new t(this.l+18*(null==ma?1:ma),this.a,this.b,this.opacity)},darker:function(ma){return new t(this.l-18*(null==ma?1:ma),this.a,this.b,this.opacity)},rgb:function(){var ma=(this.l+16)/116,wa=isNaN(this.a)?ma:ma+this.a/500,na=isNaN(this.b)?ma:ma-this.b/200;wa=.96422*H(wa);ma=1*H(ma);na=.82521*H(na);return new g(I(3.1338561*wa-1.6168667*
ma-.4906146*na),I(-.9787684*wa+1.9161415*ma+.033454*na),I(.0719453*wa-.2289914*ma+1.4052427*na),this.opacity)}}));n(K,E,p(h,{brighter:function(ma){return new K(this.h,this.c,this.l+18*(null==ma?1:ma),this.opacity)},darker:function(ma){return new K(this.h,this.c,this.l-18*(null==ma?1:ma),this.opacity)},rgb:function(){return N(this).rgb()}}));var ha=1.78277*-.29227-.1347134789;n(Q,O,p(h,{brighter:function(ma){ma=null==ma?P:Math.pow(P,ma);return new Q(this.h,this.s,this.l*ma,this.opacity)},darker:function(ma){ma=
null==ma?.7:Math.pow(.7,ma);return new Q(this.h,this.s,this.l*ma,this.opacity)},rgb:function(){var ma=isNaN(this.h)?0:(this.h+120)*la,wa=+this.l,na=isNaN(this.s)?0:this.s*wa*(1-wa),ya=Math.cos(ma);ma=Math.sin(ma);return new g(255*(wa+na*(-.14861*ya+1.78277*ma)),255*(wa+na*(-.29227*ya+-.90649*ma)),255*(wa+1.97294*na*ya),this.opacity)}}));q.color=d;q.cubehelix=O;q.gray=function(ma,wa){return new t(ma,0,0,null==wa?1:wa)};q.hcl=E;q.hsl=D;q.lab=B;q.lch=function(ma,wa,na,ya){return 1===arguments.length?
L(ma):new K(na,wa,ma,null==ya?1:ya)};q.rgb=e;Object.defineProperty(q,"__esModule",{value:!0})})},{}],159:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(){for(var d=0,l=arguments.length,k={},c;d<l;++d){if(!(c=arguments[d]+"")||c in k||/[\s.]/.test(c))throw Error("illegal type: "+c);k[c]=[]}return new p(k)}function p(d){this._=d}function h(d,l){return d.trim().split(/^|\s+/).map(function(k){var c="",e=k.indexOf(".");
0<=e&&(c=k.slice(e+1),k=k.slice(0,e));if(k&&!l.hasOwnProperty(k))throw Error("unknown type: "+k);return{type:k,name:c}})}function a(d,l,k){for(var c=0,e=d.length;c<e;++c)if(d[c].name===l){d[c]=f;d=d.slice(0,c).concat(d.slice(c+1));break}null!=k&&d.push({name:l,value:k});return d}var f={value:function(){}};p.prototype=n.prototype={constructor:p,on:function(d,l){var k=this._,c=h(d+"",k),e,g=-1,m=c.length;if(2>arguments.length)for(;++g<m;){var r;if(r=e=(d=c[g]).type){a:{r=k[e];for(var u=0,v=r.length;u<
v;++u)if((e=r[u]).name===d.name){e=e.value;break a}e=void 0}r=e}if(r)return e}else{if(null!=l&&"function"!==typeof l)throw Error("invalid callback: "+l);for(;++g<m;)if(e=(d=c[g]).type)k[e]=a(k[e],d.name,l);else if(null==l)for(e in k)k[e]=a(k[e],d.name,null);return this}},copy:function(){var d={},l=this._,k;for(k in l)d[k]=l[k].slice();return new p(d)},call:function(d,l){if(0<(e=arguments.length-2))for(var k=Array(e),c=0,e,g;c<e;++c)k[c]=arguments[c+2];if(!this._.hasOwnProperty(d))throw Error("unknown type: "+
d);g=this._[d];c=0;for(e=g.length;c<e;++c)g[c].value.apply(l,k)},apply:function(d,l,k){if(!this._.hasOwnProperty(d))throw Error("unknown type: "+d);d=this._[d];for(var c=0,e=d.length;c<e;++c)d[c].value.apply(l,k)}};q.dispatch=n;Object.defineProperty(q,"__esModule",{value:!0})})},{}],160:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F,b("d3-quadtree"),b("d3-collection"),b("d3-dispatch"),b("d3-timer")):n(q.d3=q.d3||{},q.d3,q.d3,q.d3,q.d3)})(this,function(q,n,p,h,a){function f(u){return function(){return u}}
function d(){return 1E-6*(Math.random()-.5)}function l(u){return u.x+u.vx}function k(u){return u.y+u.vy}function c(u){return u.index}function e(u,v){u=u.get(v);if(!u)throw Error("missing: "+v);return u}function g(u){return u.x}function m(u){return u.y}var r=Math.PI*(3-Math.sqrt(5));q.forceCenter=function(u,v){function w(){var C,x=D.length,A=0,B=0;for(C=0;C<x;++C){var t=D[C];A+=t.x;B+=t.y}A=A/x-u;B=B/x-v;for(C=0;C<x;++C)t=D[C],t.x-=A,t.y-=B}var D;null==u&&(u=0);null==v&&(v=0);w.initialize=function(C){D=
C};w.x=function(C){return arguments.length?(u=+C,w):u};w.y=function(C){return arguments.length?(v=+C,w):v};return w};q.forceCollide=function(u){function v(){function t(Q,P,T,V,aa){var ba=Q.data;Q=Q.r;var Y=K+Q;if(ba)ba.index>J.index&&(P=L-ba.x-ba.vx,T=E-ba.y-ba.vy,V=P*P+T*T,V<Y*Y&&(0===P&&(P=d(),V+=P*P),0===T&&(T=d(),V+=T*T),V=(Y-(V=Math.sqrt(V)))/V*A,J.vx+=(P*=V)*(Y=(Q*=Q)/(N+Q)),J.vy+=(T*=V)*Y,ba.vx-=P*(Y=1-Y),ba.vy-=T*Y));else return P>L+Y||V<L-Y||T>E+Y||aa<E-Y}for(var G,H=C.length,I,J,L,E,K,N,
O=0;O<B;++O)for(I=n.quadtree(C,l,k).visitAfter(w),G=0;G<H;++G)J=C[G],K=x[J.index],N=K*K,L=J.x+J.vx,E=J.y+J.vy,I.visit(t)}function w(t){if(t.data)return t.r=x[t.data.index];for(var G=t.r=0;4>G;++G)t[G]&&t[G].r>t.r&&(t.r=t[G].r)}function D(){if(C){var t,G=C.length;x=Array(G);for(t=0;t<G;++t){var H=C[t];x[H.index]=+u(H,t,C)}}}var C,x,A=1,B=1;"function"!==typeof u&&(u=f(null==u?1:+u));v.initialize=function(t){C=t;D()};v.iterations=function(t){return arguments.length?(B=+t,v):B};v.strength=function(t){return arguments.length?
(A=+t,v):A};v.radius=function(t){return arguments.length?(u="function"===typeof t?t:f(+t),D(),v):u};return v};q.forceLink=function(u){function v(E){for(var K=0,N=u.length;K<L;++K)for(var O=0,Q,P,T,V,aa;O<N;++O)Q=u[O],P=Q.source,Q=Q.target,T=Q.x+Q.vx-P.x-P.vx||d(),V=Q.y+Q.vy-P.y-P.vy||d(),aa=Math.sqrt(T*T+V*V),aa=(aa-G[O])/aa*E*B[O],T*=aa,V*=aa,Q.vx-=T*(aa=J[O]),Q.vy-=V*aa,P.vx+=T*(aa=1-aa),P.vy+=V*aa}function w(){if(H){var E=H.length,K=u.length,N=p.map(H,x);var O=0;for(I=Array(E);O<K;++O)E=u[O],E.index=
O,"object"!==typeof E.source&&(E.source=e(N,E.source)),"object"!==typeof E.target&&(E.target=e(N,E.target)),I[E.source.index]=(I[E.source.index]||0)+1,I[E.target.index]=(I[E.target.index]||0)+1;O=0;for(J=Array(K);O<K;++O)E=u[O],J[O]=I[E.source.index]/(I[E.source.index]+I[E.target.index]);B=Array(K);D();G=Array(K);C()}}function D(){if(H)for(var E=0,K=u.length;E<K;++E)B[E]=+A(u[E],E,u)}function C(){if(H)for(var E=0,K=u.length;E<K;++E)G[E]=+t(u[E],E,u)}var x=c,A=function(E){return 1/Math.min(I[E.source.index],
I[E.target.index])},B,t=f(30),G,H,I,J,L=1;null==u&&(u=[]);v.initialize=function(E){H=E;w()};v.links=function(E){return arguments.length?(u=E,w(),v):u};v.id=function(E){return arguments.length?(x=E,v):x};v.iterations=function(E){return arguments.length?(L=+E,v):L};v.strength=function(E){return arguments.length?(A="function"===typeof E?E:f(+E),D(),v):A};v.distance=function(E){return arguments.length?(t="function"===typeof E?E:f(+E),C(),v):t};return v};q.forceManyBody=function(){function u(J){var L=
C.length,E=n.quadtree(C,g,m).visitAfter(w);A=J;for(J=0;J<L;++J)x=C[J],E.visit(D)}function v(){if(C){var J,L=C.length;t=Array(L);for(J=0;J<L;++J){var E=C[J];t[E.index]=+B(E,J,C)}}}function w(J){var L=0,E,K,N=0,O,Q,P;if(J.length){for(O=Q=P=0;4>P;++P)(E=J[P])&&(K=Math.abs(E.value))&&(L+=E.value,N+=K,O+=K*E.x,Q+=K*E.y);J.x=O/N;J.y=Q/N}else{E=J;E.x=E.data.x;E.y=E.data.y;do L+=t[E.data.index];while(E=E.next)}J.value=L}function D(J,L,E,K){if(!J.value)return!0;E=J.x-x.x;var N=J.y-x.y;L=K-L;K=E*E+N*N;if(L*
L/I<K)return K<H&&(0===E&&(E=d(),K+=E*E),0===N&&(N=d(),K+=N*N),K<G&&(K=Math.sqrt(G*K)),x.vx+=E*J.value*A/K,x.vy+=N*J.value*A/K),!0;if(!(J.length||K>=H)){if(J.data!==x||J.next)0===E&&(E=d(),K+=E*E),0===N&&(N=d(),K+=N*N),K<G&&(K=Math.sqrt(G*K));do J.data!==x&&(L=t[J.data.index]*A/K,x.vx+=E*L,x.vy+=N*L);while(J=J.next)}}var C,x,A,B=f(-30),t,G=1,H=Infinity,I=.81;u.initialize=function(J){C=J;v()};u.strength=function(J){return arguments.length?(B="function"===typeof J?J:f(+J),v(),u):B};u.distanceMin=function(J){return arguments.length?
(G=J*J,u):Math.sqrt(G)};u.distanceMax=function(J){return arguments.length?(H=J*J,u):Math.sqrt(H)};u.theta=function(J){return arguments.length?(I=J*J,u):Math.sqrt(I)};return u};q.forceRadial=function(u,v,w){function D(G){for(var H=0,I=x.length;H<I;++H){var J=x[H],L=J.x-v||1E-6,E=J.y-w||1E-6,K=Math.sqrt(L*L+E*E);K=(t[H]-K)*B[H]*G/K;J.vx+=L*K;J.vy+=E*K}}function C(){if(x){var G,H=x.length;B=Array(H);t=Array(H);for(G=0;G<H;++G)t[G]=+u(x[G],G,x),B[G]=isNaN(t[G])?0:+A(x[G],G,x)}}var x,A=f(.1),B,t;"function"!==
typeof u&&(u=f(+u));null==v&&(v=0);null==w&&(w=0);D.initialize=function(G){x=G;C()};D.strength=function(G){return arguments.length?(A="function"===typeof G?G:f(+G),C(),D):A};D.radius=function(G){return arguments.length?(u="function"===typeof G?G:f(+G),C(),D):u};D.x=function(G){return arguments.length?(v=+G,D):v};D.y=function(G){return arguments.length?(w=+G,D):w};return D};q.forceSimulation=function(u){function v(){w();L.call("tick",x);A<B&&(J.stop(),L.call("end",x))}function w(E){var K,N=u.length;
void 0===E&&(E=1);for(var O=0;O<E;++O)for(A+=(G-A)*t,I.each(function(P){P(A)}),K=0;K<N;++K){var Q=u[K];null==Q.fx?Q.x+=Q.vx*=H:(Q.x=Q.fx,Q.vx=0);null==Q.fy?Q.y+=Q.vy*=H:(Q.y=Q.fy,Q.vy=0)}return x}function D(){for(var E=0,K=u.length,N;E<K;++E){N=u[E];N.index=E;null!=N.fx&&(N.x=N.fx);null!=N.fy&&(N.y=N.fy);if(isNaN(N.x)||isNaN(N.y)){var O=10*Math.sqrt(E),Q=E*r;N.x=O*Math.cos(Q);N.y=O*Math.sin(Q)}if(isNaN(N.vx)||isNaN(N.vy))N.vx=N.vy=0}}function C(E){E.initialize&&E.initialize(u);return E}var x,A=1,
B=.001,t=1-Math.pow(B,1/300),G=0,H=.6,I=p.map(),J=a.timer(v),L=h.dispatch("tick","end");null==u&&(u=[]);D();return x={tick:w,restart:function(){return J.restart(v),x},stop:function(){return J.stop(),x},nodes:function(E){return arguments.length?(u=E,D(),I.each(C),x):u},alpha:function(E){return arguments.length?(A=+E,x):A},alphaMin:function(E){return arguments.length?(B=+E,x):B},alphaDecay:function(E){return arguments.length?(t=+E,x):+t},alphaTarget:function(E){return arguments.length?(G=+E,x):G},velocityDecay:function(E){return arguments.length?
(H=1-E,x):1-H},force:function(E,K){return 1<arguments.length?(null==K?I.remove(E):I.set(E,C(K)),x):I.get(E)},find:function(E,K,N){var O,Q=u.length;N=null==N?Infinity:N*N;for(O=0;O<Q;++O){var P=u[O];var T=E-P.x;var V=K-P.y;T=T*T+V*V;if(T<N){var aa=P;N=T}}return aa},on:function(E,K){return 1<arguments.length?(L.on(E,K),x):L.on(E)}}};q.forceX=function(u){function v(B){for(var t=0,G=C.length,H;t<G;++t)H=C[t],H.vx+=(A[t]-H.x)*x[t]*B}function w(){if(C){var B,t=C.length;x=Array(t);A=Array(t);for(B=0;B<t;++B)x[B]=
isNaN(A[B]=+u(C[B],B,C))?0:+D(C[B],B,C)}}var D=f(.1),C,x,A;"function"!==typeof u&&(u=f(null==u?0:+u));v.initialize=function(B){C=B;w()};v.strength=function(B){return arguments.length?(D="function"===typeof B?B:f(+B),w(),v):D};v.x=function(B){return arguments.length?(u="function"===typeof B?B:f(+B),w(),v):u};return v};q.forceY=function(u){function v(B){for(var t=0,G=C.length,H;t<G;++t)H=C[t],H.vy+=(A[t]-H.y)*x[t]*B}function w(){if(C){var B,t=C.length;x=Array(t);A=Array(t);for(B=0;B<t;++B)x[B]=isNaN(A[B]=
+u(C[B],B,C))?0:+D(C[B],B,C)}}var D=f(.1),C,x,A;"function"!==typeof u&&(u=f(null==u?0:+u));v.initialize=function(B){C=B;w()};v.strength=function(B){return arguments.length?(D="function"===typeof B?B:f(+B),w(),v):D};v.y=function(B){return arguments.length?(u="function"===typeof B?B:f(+B),w(),v):u};return v};Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-collection":157,"d3-dispatch":159,"d3-quadtree":164,"d3-timer":168}],161:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==
typeof y?n(F):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(ka,ra){return ka.parent===ra.parent?1:2}function p(ka,ra){return ka+ra.x}function h(ka,ra){return Math.max(ka,ra.y)}function a(ka){for(var ra;ra=ka.children;)ka=ra[0];return ka}function f(ka){for(var ra;ra=ka.children;)ka=ra[ra.length-1];return ka}function d(ka){var ra=0,ha=ka.children,ma=ha&&ha.length;if(ma)for(;0<=--ma;)ra+=ha[ma].value;else ra=1;ka.value=ra}function l(ka,ra){var ha=new g(ka);ka=+ka.value&&(ha.value=ka.value);
var ma,wa=[ha],na,ya,Fa,Ha;for(null==ra&&(ra=k);ma=wa.pop();)if(ka&&(ma.value=+ma.data.value),(ya=ra(ma.data))&&(Ha=ya.length))for(ma.children=Array(Ha),Fa=Ha-1;0<=Fa;--Fa)wa.push(na=ma.children[Fa]=new g(ya[Fa])),na.parent=ma,na.depth=ma.depth+1;return ha.eachBefore(e)}function k(ka){return ka.children}function c(ka){ka.data=ka.data.data}function e(ka){var ra=0;do ka.height=ra;while((ka=ka.parent)&&ka.height<++ra)}function g(ka){this.data=ka;this.depth=this.height=0;this.parent=null}function m(ka){var ra=
0;ka=ca.call(ka);for(var ha=ka.length,ma,wa;ha;)wa=Math.random()*ha--|0,ma=ka[ha],ka[ha]=ka[wa],ka[wa]=ma;ha=ka.length;ma=[];for(var na;ra<ha;)if(wa=ka[ra],na&&u(na,wa))++ra;else{a:if(ra=ma,v(wa,ra))ra=[wa];else{for(ma=0;ma<ra.length;++ma)if(r(wa,ra[ma])&&v(w(ra[ma],wa),ra)){ra=[ra[ma],wa];break a}for(ma=0;ma<ra.length-1;++ma)for(na=ma+1;na<ra.length;++na)if(r(w(ra[ma],ra[na]),wa)&&r(w(ra[ma],wa),ra[na])&&r(w(ra[na],wa),ra[ma])&&v(D(ra[ma],ra[na],wa),ra)){ra=[ra[ma],ra[na],wa];break a}throw Error();
}a:{ra=ma=ra;switch(ra.length){case 1:ra=ra[0];ra={x:ra.x,y:ra.y,r:ra.r};break a;case 2:ra=w(ra[0],ra[1]);break a;case 3:ra=D(ra[0],ra[1],ra[2]);break a}ra=void 0}na=ra;ra=0}return na}function r(ka,ra){var ha=ka.r-ra.r,ma=ra.x-ka.x;ka=ra.y-ka.y;return 0>ha||ha*ha<ma*ma+ka*ka}function u(ka,ra){var ha=ka.r-ra.r+1E-6,ma=ra.x-ka.x;ka=ra.y-ka.y;return 0<ha&&ha*ha>ma*ma+ka*ka}function v(ka,ra){for(var ha=0;ha<ra.length;++ha)if(!u(ka,ra[ha]))return!1;return!0}function w(ka,ra){var ha=ka.x,ma=ka.y;ka=ka.r;
var wa=ra.x,na=ra.y;ra=ra.r;var ya=wa-ha,Fa=na-ma,Ha=ra-ka,eb=Math.sqrt(ya*ya+Fa*Fa);return{x:(ha+wa+ya/eb*Ha)/2,y:(ma+na+Fa/eb*Ha)/2,r:(eb+ka+ra)/2}}function D(ka,ra,ha){var ma=ka.x,wa=ka.y;ka=ka.r;var na=ra.x,ya=ra.y,Fa=ra.r,Ha=ha.x,eb=ha.y,hb=ha.r;ha=ma-na;ra=ma-Ha;var ob=wa-ya,ib=wa-eb,Pa=Fa-ka,sb=hb-ka,tb=ma*ma+wa*wa-ka*ka;ya=tb-na*na-ya*ya+Fa*Fa;eb=tb-Ha*Ha-eb*eb+hb*hb;Ha=ra*ob-ha*ib;na=(ob*eb-ib*ya)/(2*Ha)-ma;ob=(ib*Pa-ob*sb)/Ha;ib=(ra*ya-ha*eb)/(2*Ha)-wa;ha=(ha*sb-ra*Pa)/Ha;ra=ob*ob+ha*ha-
1;Pa=2*(ka+na*ob+ib*ha);ka=na*na+ib*ib-ka*ka;ka=-(ra?(Pa+Math.sqrt(Pa*Pa-4*ra*ka))/(2*ra):ka/Pa);return{x:ma+na+ob*ka,y:wa+ib+ha*ka,r:ka}}function C(ka,ra,ha){var ma=ka.x-ra.x,wa=ka.y-ra.y,na=ma*ma+wa*wa;if(na){var ya=ra.r+ha.r;ya*=ya;var Fa=ka.r+ha.r;Fa*=Fa;if(ya>Fa){var Ha=(na+Fa-ya)/(2*na);ya=Math.sqrt(Math.max(0,Fa/na-Ha*Ha));ha.x=ka.x-Ha*ma-ya*wa;ha.y=ka.y-Ha*wa+ya*ma}else Ha=(na+ya-Fa)/(2*na),ya=Math.sqrt(Math.max(0,ya/na-Ha*Ha)),ha.x=ra.x+Ha*ma-ya*wa,ha.y=ra.y+Ha*wa+ya*ma}else ha.x=ra.x+ha.r,
ha.y=ra.y}function x(ka,ra){var ha=ka.r+ra.r-1E-6,ma=ra.x-ka.x;ka=ra.y-ka.y;return 0<ha&&ha*ha>ma*ma+ka*ka}function A(ka){var ra=ka._,ha=ka.next._,ma=ra.r+ha.r;ka=(ra.x*ha.r+ha.x*ra.r)/ma;ra=(ra.y*ha.r+ha.y*ra.r)/ma;return ka*ka+ra*ra}function B(ka){this._=ka;this.previous=this.next=null}function t(ka){if(!(ha=ka.length))return 0;var ra,ha;var ma=ka[0];ma.x=0;ma.y=0;if(!(1<ha))return ma.r;var wa=ka[1];ma.x=-wa.r;wa.x=ma.r;wa.y=0;if(!(2<ha))return ma.r+wa.r;C(wa,ma,ra=ka[2]);ma=new B(ma);wa=new B(wa);
ra=new B(ra);ma.next=ra.previous=wa;wa.next=ma.previous=ra;ra.next=wa.previous=ma;var na=3;a:for(;na<ha;++na){C(ma._,wa._,ra=ka[na]);ra=new B(ra);var ya=wa.next;var Fa=ma.previous;var Ha=wa._.r;var eb=ma._.r;do if(Ha<=eb){if(x(ya._,ra._)){wa=ya;ma.next=wa;wa.previous=ma;--na;continue a}Ha+=ya._.r;ya=ya.next}else{if(x(Fa._,ra._)){ma=Fa;ma.next=wa;wa.previous=ma;--na;continue a}eb+=Fa._.r;Fa=Fa.previous}while(ya!==Fa.next);ra.previous=ma;ra.next=wa;ma.next=wa.previous=wa=ra;for(ya=A(ma);(ra=ra.next)!==
wa;)(Fa=A(ra))<ya&&(ma=ra,ya=Fa);wa=ma.next}ma=[wa._];for(ra=wa;(ra=ra.next)!==wa;)ma.push(ra._);ra=m(ma);for(na=0;na<ha;++na)ma=ka[na],ma.x-=ra.x,ma.y-=ra.y;return ra.r}function G(ka){if("function"!==typeof ka)throw Error();return ka}function H(){return 0}function I(ka){return function(){return ka}}function J(ka){return Math.sqrt(ka.value)}function L(ka){return function(ra){ra.children||(ra.r=Math.max(0,+ka(ra)||0))}}function E(ka,ra){return function(ha){if(ma=ha.children){var ma,wa,na=ma.length,
ya=ka(ha)*ra||0;if(ya)for(wa=0;wa<na;++wa)ma[wa].r+=ya;var Fa=t(ma);if(ya)for(wa=0;wa<na;++wa)ma[wa].r-=ya;ha.r=Fa+ya}}}function K(ka){return function(ra){var ha=ra.parent;ra.r*=ka;ha&&(ra.x=ha.x+ka*ra.x,ra.y=ha.y+ka*ra.y)}}function N(ka){ka.x0=Math.round(ka.x0);ka.y0=Math.round(ka.y0);ka.x1=Math.round(ka.x1);ka.y1=Math.round(ka.y1)}function O(ka,ra,ha,ma,wa){var na=ka.children,ya=-1,Fa=na.length;for(ma=ka.value&&(ma-ra)/ka.value;++ya<Fa;)ka=na[ya],ka.y0=ha,ka.y1=wa,ka.x0=ra,ka.x1=ra+=ka.value*ma}
function Q(ka){return ka.id}function P(ka){return ka.parentId}function T(ka,ra){return ka.parent===ra.parent?1:2}function V(ka){var ra=ka.children;return ra?ra[0]:ka.t}function aa(ka){var ra=ka.children;return ra?ra[ra.length-1]:ka.t}function ba(ka,ra){this._=ka;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=ra}function Y(ka){ka=new ba(ka,0);for(var ra,ha=[ka],ma,wa,na;ra=ha.pop();)if(wa=ra._.children)for(ra.children=Array(ma=wa.length),na=ma-1;0<=
na;--na)ha.push(ma=ra.children[na]=new ba(wa[na],na)),ma.parent=ra;(ka.parent=new ba(null,0)).children=[ka];return ka}function ea(ka,ra,ha,ma,wa){var na=ka.children,ya=-1,Fa=na.length;for(wa=ka.value&&(wa-ha)/ka.value;++ya<Fa;)ka=na[ya],ka.x0=ra,ka.x1=ma,ka.y0=ha,ka.y1=ha+=ka.value*wa}function da(ka,ra,ha,ma,wa,na){for(var ya=[],Fa=ra.children,Ha,eb,hb=Ha=0,ob=Fa.length,ib,Pa=ra.value,sb,tb,Aa,Ka,Qa,Xa;Ha<ob;){ra=wa-ha;ib=na-ma;do sb=Fa[hb++].value;while(!sb&&hb<ob);tb=Aa=sb;Xa=Math.max(ib/ra,ra/
ib)/(Pa*ka);Ka=sb*sb*Xa;for(Qa=Math.max(Aa/Ka,Ka/tb);hb<ob;++hb){sb+=eb=Fa[hb].value;eb<tb&&(tb=eb);eb>Aa&&(Aa=eb);Ka=sb*sb*Xa;Ka=Math.max(Aa/Ka,Ka/tb);if(Ka>Qa){sb-=eb;break}Qa=Ka}ya.push(Ha={value:sb,dice:ra<ib,children:Fa.slice(Ha,hb)});Ha.dice?O(Ha,ha,ma,wa,Pa?ma+=ib*sb/Pa:na):ea(Ha,ha,ma,Pa?ha+=ra*sb/Pa:wa,na);Pa-=sb;Ha=hb}return ya}g.prototype=l.prototype={constructor:g,count:function(){return this.eachAfter(d)},each:function(ka){var ra,ha=[this],ma;do{var wa=ha.reverse();for(ha=[];ra=wa.pop();)if(ka(ra),
ra=ra.children){var na=0;for(ma=ra.length;na<ma;++na)ha.push(ra[na])}}while(ha.length);return this},eachAfter:function(ka){for(var ra,ha=[this],ma=[],wa,na;ra=ha.pop();)if(ma.push(ra),ra=ra.children)for(wa=0,na=ra.length;wa<na;++wa)ha.push(ra[wa]);for(;ra=ma.pop();)ka(ra);return this},eachBefore:function(ka){for(var ra,ha=[this],ma;ra=ha.pop();)if(ka(ra),ra=ra.children)for(ma=ra.length-1;0<=ma;--ma)ha.push(ra[ma]);return this},sum:function(ka){return this.eachAfter(function(ra){for(var ha=+ka(ra.data)||
0,ma=ra.children,wa=ma&&ma.length;0<=--wa;)ha+=ma[wa].value;ra.value=ha})},sort:function(ka){return this.eachBefore(function(ra){ra.children&&ra.children.sort(ka)})},path:function(ka){var ra=this;var ha=ra;var ma=ka;if(ha!==ma){var wa=ha.ancestors(),na=ma.ancestors(),ya=null;ha=wa.pop();for(ma=na.pop();ha===ma;)ya=ha,ha=wa.pop(),ma=na.pop();ha=ya}for(ma=[ra];ra!==ha;)ra=ra.parent,ma.push(ra);for(ra=ma.length;ka!==ha;)ma.splice(ra,0,ka),ka=ka.parent;return ma},ancestors:function(){for(var ka=this,
ra=[ka];ka=ka.parent;)ra.push(ka);return ra},descendants:function(){var ka=[];this.each(function(ra){ka.push(ra)});return ka},leaves:function(){var ka=[];this.eachBefore(function(ra){ra.children||ka.push(ra)});return ka},links:function(){var ka=this,ra=[];ka.each(function(ha){ha!==ka&&ra.push({source:ha.parent,target:ha})});return ra},copy:function(){return l(this).eachBefore(c)}};var ca=Array.prototype.slice,la={depth:-1},pa={};ba.prototype=Object.create(g.prototype);var qa=(1+Math.sqrt(5))/2,oa=
function ha(ra){function ma(wa,na,ya,Fa,Ha){da(ra,wa,na,ya,Fa,Ha)}ma.ratio=function(wa){return ha(1<(wa=+wa)?wa:1)};return ma}(qa);qa=function ma(ha){function wa(na,ya,Fa,Ha,eb){if((hb=na._squarify)&&hb.ratio===ha)for(var hb,ob,ib,Pa=-1,sb,tb=hb.length,Aa=na.value;++Pa<tb;){na=hb[Pa];ob=na.children;ib=na.value=0;for(sb=ob.length;ib<sb;++ib)na.value+=ob[ib].value;na.dice?O(na,ya,Fa,Ha,Fa+=(eb-Fa)*na.value/Aa):ea(na,ya,Fa,ya+=(Ha-ya)*na.value/Aa,eb);Aa-=na.value}else na._squarify=hb=da(ha,na,ya,Fa,
Ha,eb),hb.ratio=ha}wa.ratio=function(na){return ma(1<(na=+na)?na:1)};return wa}(qa);q.cluster=function(){function ha(Fa){var Ha,eb=0;Fa.eachAfter(function(sb){var tb=sb.children;if(tb){var Aa=tb.reduce(p,0)/tb.length;sb.x=Aa;sb.y=1+tb.reduce(h,0)}else sb.x=Ha?eb+=ma(sb,Ha):0,sb.y=0,Ha=sb});var hb=a(Fa),ob=f(Fa),ib=hb.x-ma(hb,ob)/2,Pa=ob.x+ma(ob,hb)/2;return Fa.eachAfter(ya?function(sb){sb.x=(sb.x-Fa.x)*wa;sb.y=(Fa.y-sb.y)*na}:function(sb){sb.x=(sb.x-ib)/(Pa-ib)*wa;sb.y=(1-(Fa.y?sb.y/Fa.y:1))*na})}
var ma=n,wa=1,na=1,ya=!1;ha.separation=function(Fa){return arguments.length?(ma=Fa,ha):ma};ha.size=function(Fa){return arguments.length?(ya=!1,wa=+Fa[0],na=+Fa[1],ha):ya?null:[wa,na]};ha.nodeSize=function(Fa){return arguments.length?(ya=!0,wa=+Fa[0],na=+Fa[1],ha):ya?[wa,na]:null};return ha};q.hierarchy=l;q.pack=function(){function ha(Fa){Fa.x=wa/2;Fa.y=na/2;ma?Fa.eachBefore(L(ma)).eachAfter(E(ya,.5)).eachBefore(K(1)):Fa.eachBefore(L(J)).eachAfter(E(H,1)).eachAfter(E(ya,Fa.r/Math.min(wa,na))).eachBefore(K(Math.min(wa,
na)/(2*Fa.r)));return Fa}var ma=null,wa=1,na=1,ya=H;ha.radius=function(Fa){return arguments.length?(ma=null==Fa?null:G(Fa),ha):ma};ha.size=function(Fa){return arguments.length?(wa=+Fa[0],na=+Fa[1],ha):[wa,na]};ha.padding=function(Fa){return arguments.length?(ya="function"===typeof Fa?Fa:I(+Fa),ha):ya};return ha};q.packEnclose=m;q.packSiblings=function(ha){t(ha);return ha};q.partition=function(){function ha(Ha){var eb=Ha.height+1;Ha.x0=Ha.y0=ya;Ha.x1=wa;Ha.y1=na/eb;Ha.eachBefore(ma(na,eb));Fa&&Ha.eachBefore(N);
return Ha}function ma(Ha,eb){return function(hb){hb.children&&O(hb,hb.x0,Ha*(hb.depth+1)/eb,hb.x1,Ha*(hb.depth+2)/eb);var ob=hb.x0,ib=hb.y0,Pa=hb.x1-ya,sb=hb.y1-ya;Pa<ob&&(ob=Pa=(ob+Pa)/2);sb<ib&&(ib=sb=(ib+sb)/2);hb.x0=ob;hb.y0=ib;hb.x1=Pa;hb.y1=sb}}var wa=1,na=1,ya=0,Fa=!1;ha.round=function(Ha){return arguments.length?(Fa=!!Ha,ha):Fa};ha.size=function(Ha){return arguments.length?(wa=+Ha[0],na=+Ha[1],ha):[wa,na]};ha.padding=function(Ha){return arguments.length?(ya=+Ha,ha):ya};return ha};q.stratify=
function(){function ha(na){var ya,Fa=na.length,Ha=Array(Fa),eb,hb={};for(ya=0;ya<Fa;++ya){var ob=na[ya];var ib=Ha[ya]=new g(ob);null!=(eb=ma(ob,ya,na))&&(eb+="")&&(ob="$"+(ib.id=eb),hb[ob]=ob in hb?pa:ib)}for(ya=0;ya<Fa;++ya)if(ib=Ha[ya],eb=wa(na[ya],ya,na),null!=eb&&(eb+="")){ob=hb["$"+eb];if(!ob)throw Error("missing: "+eb);if(ob===pa)throw Error("ambiguous: "+eb);ob.children?ob.children.push(ib):ob.children=[ib];ib.parent=ob}else{if(Pa)throw Error("multiple roots");var Pa=ib}if(!Pa)throw Error("no root");
Pa.parent=la;Pa.eachBefore(function(sb){sb.depth=sb.parent.depth+1;--Fa}).eachBefore(e);Pa.parent=null;if(0<Fa)throw Error("cycle");return Pa}var ma=Q,wa=P;ha.id=function(na){return arguments.length?(ma=G(na),ha):ma};ha.parentId=function(na){return arguments.length?(wa=G(na),ha):wa};return ha};q.tree=function(){function ha(hb){var ob=Y(hb);ob.eachAfter(ma);ob.parent.m=-ob.z;ob.eachBefore(wa);if(eb)hb.eachBefore(na);else{var ib=hb,Pa=hb,sb=hb;hb.eachBefore(function(Qa){Qa.x<ib.x&&(ib=Qa);Qa.x>Pa.x&&
(Pa=Qa);Qa.depth>sb.depth&&(sb=Qa)});ob=ib===Pa?1:ya(ib,Pa)/2;var tb=ob-ib.x,Aa=Fa/(Pa.x+ob+tb),Ka=Ha/(sb.depth||1);hb.eachBefore(function(Qa){Qa.x=(Qa.x+tb)*Aa;Qa.y=Qa.depth*Ka})}return hb}function ma(hb){var ob=hb.children,ib=hb.parent.children,Pa=hb.i?ib[hb.i-1]:null;if(ob){for(var sb=0,tb=0,Aa=hb.children,Ka=Aa.length,Qa;0<=--Ka;)Qa=Aa[Ka],Qa.z+=sb,Qa.m+=sb,sb+=Qa.s+(tb+=Qa.c);ob=(ob[0].z+ob[ob.length-1].z)/2;Pa?(hb.z=Pa.z+ya(hb._,Pa._),hb.m=hb.z-ob):hb.z=ob}else Pa&&(hb.z=Pa.z+ya(hb._,Pa._));
ob=hb.parent;ib=hb.parent.A||ib[0];if(Pa){tb=sb=hb;Aa=sb.parent.children[0];Ka=sb.m;Qa=tb.m;for(var Xa=Pa.m,pb=Aa.m,db;Pa=aa(Pa),sb=V(sb),Pa&&sb;){Aa=V(Aa);tb=aa(tb);tb.a=hb;db=Pa.z+Xa-sb.z-Ka+ya(Pa._,sb._);if(0<db){var Ia=Pa.a.parent===hb.parent?Pa.a:ib,Ua=hb,$a=db,xa=$a/(Ua.i-Ia.i);Ua.c-=xa;Ua.s+=$a;Ia.c+=xa;Ua.z+=$a;Ua.m+=$a;Ka+=db;Qa+=db}Xa+=Pa.m;Ka+=sb.m;pb+=Aa.m;Qa+=tb.m}Pa&&!aa(tb)&&(tb.t=Pa,tb.m+=Xa-Qa);sb&&!V(Aa)&&(Aa.t=sb,Aa.m+=Ka-pb,ib=hb)}ob.A=ib}function wa(hb){hb._.x=hb.z+hb.parent.m;
hb.m+=hb.parent.m}function na(hb){hb.x*=Fa;hb.y=hb.depth*Ha}var ya=T,Fa=1,Ha=1,eb=null;ha.separation=function(hb){return arguments.length?(ya=hb,ha):ya};ha.size=function(hb){return arguments.length?(eb=!1,Fa=+hb[0],Ha=+hb[1],ha):eb?null:[Fa,Ha]};ha.nodeSize=function(hb){return arguments.length?(eb=!0,Fa=+hb[0],Ha=+hb[1],ha):eb?[Fa,Ha]:null};return ha};q.treemap=function(){function ha(sb){sb.x0=sb.y0=0;sb.x1=ya;sb.y1=Fa;sb.eachBefore(ma);Ha=[0];na&&sb.eachBefore(N);return sb}function ma(sb){var tb=
Ha[sb.depth],Aa=sb.x0+tb,Ka=sb.y0+tb,Qa=sb.x1-tb,Xa=sb.y1-tb;Qa<Aa&&(Aa=Qa=(Aa+Qa)/2);Xa<Ka&&(Ka=Xa=(Ka+Xa)/2);sb.x0=Aa;sb.y0=Ka;sb.x1=Qa;sb.y1=Xa;sb.children&&(tb=Ha[sb.depth+1]=eb(sb)/2,Aa+=Pa(sb)-tb,Ka+=hb(sb)-tb,Qa-=ob(sb)-tb,Xa-=ib(sb)-tb,Qa<Aa&&(Aa=Qa=(Aa+Qa)/2),Xa<Ka&&(Ka=Xa=(Ka+Xa)/2),wa(sb,Aa,Ka,Qa,Xa))}var wa=oa,na=!1,ya=1,Fa=1,Ha=[0],eb=H,hb=H,ob=H,ib=H,Pa=H;ha.round=function(sb){return arguments.length?(na=!!sb,ha):na};ha.size=function(sb){return arguments.length?(ya=+sb[0],Fa=+sb[1],
ha):[ya,Fa]};ha.tile=function(sb){return arguments.length?(wa=G(sb),ha):wa};ha.padding=function(sb){return arguments.length?ha.paddingInner(sb).paddingOuter(sb):ha.paddingInner()};ha.paddingInner=function(sb){return arguments.length?(eb="function"===typeof sb?sb:I(+sb),ha):eb};ha.paddingOuter=function(sb){return arguments.length?ha.paddingTop(sb).paddingRight(sb).paddingBottom(sb).paddingLeft(sb):ha.paddingTop()};ha.paddingTop=function(sb){return arguments.length?(hb="function"===typeof sb?sb:I(+sb),
ha):hb};ha.paddingRight=function(sb){return arguments.length?(ob="function"===typeof sb?sb:I(+sb),ha):ob};ha.paddingBottom=function(sb){return arguments.length?(ib="function"===typeof sb?sb:I(+sb),ha):ib};ha.paddingLeft=function(sb){return arguments.length?(Pa="function"===typeof sb?sb:I(+sb),ha):Pa};return ha};q.treemapBinary=function(ha,ma,wa,na,ya){function Fa(Pa,sb,tb,Aa,Ka,Qa,Xa){if(Pa>=sb-1)Pa=Ha[Pa],Pa.x0=Aa,Pa.y0=Ka,Pa.x1=Qa,Pa.y1=Xa;else{for(var pb=ib[Pa],db=tb/2+pb,Ia=Pa+1,Ua=sb-1;Ia<Ua;){var $a=
Ia+Ua>>>1;ib[$a]<db?Ia=$a+1:Ua=$a}db-ib[Ia-1]<ib[Ia]-db&&Pa+1<Ia&&--Ia;pb=ib[Ia]-pb;db=tb-pb;Qa-Aa>Xa-Ka?(tb=(Aa*db+Qa*pb)/tb,Fa(Pa,Ia,pb,Aa,Ka,tb,Xa),Fa(Ia,sb,db,tb,Ka,Qa,Xa)):(tb=(Ka*db+Xa*pb)/tb,Fa(Pa,Ia,pb,Aa,Ka,Qa,tb),Fa(Ia,sb,db,Aa,tb,Qa,Xa))}}var Ha=ha.children,eb,hb=Ha.length,ob,ib=Array(hb+1);for(ib[0]=ob=eb=0;eb<hb;++eb)ib[eb+1]=ob+=Ha[eb].value;Fa(0,hb,ha.value,ma,wa,na,ya)};q.treemapDice=O;q.treemapResquarify=qa;q.treemapSlice=ea;q.treemapSliceDice=function(ha,ma,wa,na,ya){(ha.depth&1?
ea:O)(ha,ma,wa,na,ya)};q.treemapSquarify=oa;Object.defineProperty(q,"__esModule",{value:!0})})},{}],162:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F,b("d3-color")):(q=q||self,n(q.d3=q.d3||{},q.d3))})(this,function(q,n){function p(ha,ma,wa,na,ya){var Fa=ha*ha,Ha=Fa*ha;return((1-3*ha+3*Fa-Ha)*ma+(4-6*Fa+3*Ha)*wa+(1+3*ha+3*Fa-3*Ha)*na+Ha*ya)/6}function h(ha){var ma=ha.length-1;return function(wa){var na=0>=wa?wa=0:1<=wa?(wa=1,ma-1):Math.floor(wa*ma),ya=ha[na],Fa=ha[na+
1];return p((wa-na/ma)*ma,0<na?ha[na-1]:2*ya-Fa,ya,Fa,na<ma-1?ha[na+2]:2*Fa-ya)}}function a(ha){var ma=ha.length;return function(wa){var na=Math.floor((0>(wa%=1)?++wa:wa)*ma);return p((wa-na/ma)*ma,ha[(na+ma-1)%ma],ha[na%ma],ha[(na+1)%ma],ha[(na+2)%ma])}}function f(ha){return function(){return ha}}function d(ha,ma){return function(wa){return ha+wa*ma}}function l(ha,ma,wa){return ha=Math.pow(ha,wa),ma=Math.pow(ma,wa)-ha,wa=1/wa,function(na){return Math.pow(ha+na*ma,wa)}}function k(ha,ma){var wa=ma-
ha;return wa?d(ha,180<wa||-180>wa?wa-360*Math.round(wa/360):wa):f(isNaN(ha)?ma:ha)}function c(ha){return 1===(ha=+ha)?e:function(ma,wa){return wa-ma?l(ma,wa,ha):f(isNaN(ma)?wa:ma)}}function e(ha,ma){var wa=ma-ha;return wa?d(ha,wa):f(isNaN(ha)?ma:ha)}function g(ha){return function(ma){var wa=ma.length,na=Array(wa),ya=Array(wa),Fa=Array(wa),Ha;for(Ha=0;Ha<wa;++Ha){var eb=n.rgb(ma[Ha]);na[Ha]=eb.r||0;ya[Ha]=eb.g||0;Fa[Ha]=eb.b||0}na=ha(na);ya=ha(ya);Fa=ha(Fa);eb.opacity=1;return function(hb){eb.r=na(hb);
eb.g=ya(hb);eb.b=Fa(hb);return eb+""}}}function m(ha,ma){ma||(ma=[]);var wa=ha?Math.min(ma.length,ha.length):0,na=ma.slice(),ya;return function(Fa){for(ya=0;ya<wa;++ya)na[ya]=ha[ya]*(1-Fa)+ma[ya]*Fa;return na}}function r(ha){return ArrayBuffer.isView(ha)&&!(ha instanceof DataView)}function u(ha,ma){var wa=ma?ma.length:0,na=ha?Math.min(wa,ha.length):0,ya=Array(na),Fa=Array(wa),Ha;for(Ha=0;Ha<na;++Ha)ya[Ha]=B(ha[Ha],ma[Ha]);for(;Ha<wa;++Ha)Fa[Ha]=ma[Ha];return function(eb){for(Ha=0;Ha<na;++Ha)Fa[Ha]=
ya[Ha](eb);return Fa}}function v(ha,ma){var wa=new Date;return ha=+ha,ma=+ma,function(na){return wa.setTime(ha*(1-na)+ma*na),wa}}function w(ha,ma){return ha=+ha,ma=+ma,function(wa){return ha*(1-wa)+ma*wa}}function D(ha,ma){var wa={},na={},ya;if(null===ha||"object"!==typeof ha)ha={};if(null===ma||"object"!==typeof ma)ma={};for(ya in ma)ya in ha?wa[ya]=B(ha[ya],ma[ya]):na[ya]=ma[ya];return function(Fa){for(ya in wa)na[ya]=wa[ya](Fa);return na}}function C(ha){return function(){return ha}}function x(ha){return function(ma){return ha(ma)+
""}}function A(ha,ma){var wa=O.lastIndex=Q.lastIndex=0,na,ya,Fa,Ha=-1,eb=[],hb=[];ha+="";for(ma+="";(na=O.exec(ha))&&(ya=Q.exec(ma));)(Fa=ya.index)>wa&&(Fa=ma.slice(wa,Fa),eb[Ha]?eb[Ha]+=Fa:eb[++Ha]=Fa),(na=na[0])===(ya=ya[0])?eb[Ha]?eb[Ha]+=ya:eb[++Ha]=ya:(eb[++Ha]=null,hb.push({i:Ha,x:w(na,ya)})),wa=Q.lastIndex;wa<ma.length&&(Fa=ma.slice(wa),eb[Ha]?eb[Ha]+=Fa:eb[++Ha]=Fa);return 2>eb.length?hb[0]?x(hb[0].x):C(ma):(ma=hb.length,function(ob){for(var ib=0,Pa;ib<ma;++ib)eb[(Pa=hb[ib]).i]=Pa.x(ob);return eb.join("")})}
function B(ha,ma){var wa=typeof ma,na;return null==ma||"boolean"===wa?f(ma):("number"===wa?w:"string"===wa?(na=n.color(ma))?(ma=na,E):A:ma instanceof n.color?E:ma instanceof Date?v:r(ma)?m:Array.isArray(ma)?u:"function"!==typeof ma.valueOf&&"function"!==typeof ma.toString||isNaN(ma)?D:w)(ha,ma)}function t(ha,ma,wa,na,ya,Fa){var Ha,eb,hb;if(Ha=Math.sqrt(ha*ha+ma*ma))ha/=Ha,ma/=Ha;if(hb=ha*wa+ma*na)wa-=ha*hb,na-=ma*hb;if(eb=Math.sqrt(wa*wa+na*na))wa/=eb,na/=eb,hb/=eb;ha*na<ma*wa&&(ha=-ha,ma=-ma,hb=
-hb,Ha=-Ha);return{translateX:ya,translateY:Fa,rotate:Math.atan2(ma,ha)*P,skewX:Math.atan(hb)*P,scaleX:Ha,scaleY:eb}}function G(ha,ma,wa,na){function ya(ob){return ob.length?ob.pop()+" ":""}function Fa(ob,ib,Pa,sb,tb,Aa){ob!==Pa||ib!==sb?(tb=tb.push("translate(",null,ma,null,wa),Aa.push({i:tb-4,x:w(ob,Pa)},{i:tb-2,x:w(ib,sb)})):(Pa||sb)&&tb.push("translate("+Pa+ma+sb+wa)}function Ha(ob,ib,Pa,sb){ob!==ib?(180<ob-ib?ib+=360:180<ib-ob&&(ob+=360),sb.push({i:Pa.push(ya(Pa)+"rotate(",null,na)-2,x:w(ob,
ib)})):ib&&Pa.push(ya(Pa)+"rotate("+ib+na)}function eb(ob,ib,Pa,sb){ob!==ib?sb.push({i:Pa.push(ya(Pa)+"skewX(",null,na)-2,x:w(ob,ib)}):ib&&Pa.push(ya(Pa)+"skewX("+ib+na)}function hb(ob,ib,Pa,sb,tb,Aa){ob!==Pa||ib!==sb?(tb=tb.push(ya(tb)+"scale(",null,",",null,")"),Aa.push({i:tb-4,x:w(ob,Pa)},{i:tb-2,x:w(ib,sb)})):1===Pa&&1===sb||tb.push(ya(tb)+"scale("+Pa+","+sb+")")}return function(ob,ib){var Pa=[],sb=[];ob=ha(ob);ib=ha(ib);Fa(ob.translateX,ob.translateY,ib.translateX,ib.translateY,Pa,sb);Ha(ob.rotate,
ib.rotate,Pa,sb);eb(ob.skewX,ib.skewX,Pa,sb);hb(ob.scaleX,ob.scaleY,ib.scaleX,ib.scaleY,Pa,sb);ob=ib=null;return function(tb){for(var Aa=-1,Ka=sb.length,Qa;++Aa<Ka;)Pa[(Qa=sb[Aa]).i]=Qa.x(tb);return Pa.join("")}}}function H(ha){return((ha=Math.exp(ha))+1/ha)/2}function I(ha){return function(ma,wa){var na=ha((ma=n.hsl(ma)).h,(wa=n.hsl(wa)).h),ya=e(ma.s,wa.s),Fa=e(ma.l,wa.l),Ha=e(ma.opacity,wa.opacity);return function(eb){ma.h=na(eb);ma.s=ya(eb);ma.l=Fa(eb);ma.opacity=Ha(eb);return ma+""}}}function J(ha){return function(ma,
wa){var na=ha((ma=n.hcl(ma)).h,(wa=n.hcl(wa)).h),ya=e(ma.c,wa.c),Fa=e(ma.l,wa.l),Ha=e(ma.opacity,wa.opacity);return function(eb){ma.h=na(eb);ma.c=ya(eb);ma.l=Fa(eb);ma.opacity=Ha(eb);return ma+""}}}function L(ha){return function na(wa){function ya(Fa,Ha){var eb=ha((Fa=n.cubehelix(Fa)).h,(Ha=n.cubehelix(Ha)).h),hb=e(Fa.s,Ha.s),ob=e(Fa.l,Ha.l),ib=e(Fa.opacity,Ha.opacity);return function(Pa){Fa.h=eb(Pa);Fa.s=hb(Pa);Fa.l=ob(Math.pow(Pa,wa));Fa.opacity=ib(Pa);return Fa+""}}wa=+wa;ya.gamma=na;return ya}(1)}
var E=function wa(ma){function na(Fa,Ha){var eb=ya((Fa=n.rgb(Fa)).r,(Ha=n.rgb(Ha)).r),hb=ya(Fa.g,Ha.g),ob=ya(Fa.b,Ha.b),ib=e(Fa.opacity,Ha.opacity);return function(Pa){Fa.r=eb(Pa);Fa.g=hb(Pa);Fa.b=ob(Pa);Fa.opacity=ib(Pa);return Fa+""}}var ya=c(ma);na.gamma=wa;return na}(1),K=g(h),N=g(a),O=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Q=new RegExp(O.source,"g"),P=180/Math.PI,T={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},V,aa,ba,Y,ea=G(function(ma){if("none"===ma)return T;V||(V=
document.createElement("DIV"),aa=document.documentElement,ba=document.defaultView);V.style.transform=ma;ma=ba.getComputedStyle(aa.appendChild(V),null).getPropertyValue("transform");aa.removeChild(V);ma=ma.slice(7,-1).split(",");return t(+ma[0],+ma[1],+ma[2],+ma[3],+ma[4],+ma[5])},"px, ","px)","deg)"),da=G(function(ma){if(null==ma)return T;Y||(Y=document.createElementNS("http://www.w3.org/2000/svg","g"));Y.setAttribute("transform",ma);if(!(ma=Y.transform.baseVal.consolidate()))return T;ma=ma.matrix;
return t(ma.a,ma.b,ma.c,ma.d,ma.e,ma.f)},", ",")",")"),ca=Math.SQRT2,la=I(k),pa=I(e),qa=J(k),oa=J(e),ka=L(k),ra=L(e);q.interpolate=B;q.interpolateArray=function(ma,wa){return(r(wa)?m:u)(ma,wa)};q.interpolateBasis=h;q.interpolateBasisClosed=a;q.interpolateCubehelix=ka;q.interpolateCubehelixLong=ra;q.interpolateDate=v;q.interpolateDiscrete=function(ma){var wa=ma.length;return function(na){return ma[Math.max(0,Math.min(wa-1,Math.floor(na*wa)))]}};q.interpolateHcl=qa;q.interpolateHclLong=oa;q.interpolateHsl=
la;q.interpolateHslLong=pa;q.interpolateHue=function(ma,wa){var na=k(+ma,+wa);return function(ya){ya=na(ya);return ya-360*Math.floor(ya/360)}};q.interpolateLab=function(ma,wa){var na=e((ma=n.lab(ma)).l,(wa=n.lab(wa)).l),ya=e(ma.a,wa.a),Fa=e(ma.b,wa.b),Ha=e(ma.opacity,wa.opacity);return function(eb){ma.l=na(eb);ma.a=ya(eb);ma.b=Fa(eb);ma.opacity=Ha(eb);return ma+""}};q.interpolateNumber=w;q.interpolateNumberArray=m;q.interpolateObject=D;q.interpolateRgb=E;q.interpolateRgbBasis=K;q.interpolateRgbBasisClosed=
N;q.interpolateRound=function(ma,wa){return ma=+ma,wa=+wa,function(na){return Math.round(ma*(1-na)+wa*na)}};q.interpolateString=A;q.interpolateTransformCss=ea;q.interpolateTransformSvg=da;q.interpolateZoom=function(ma,wa){var na=ma[0],ya=ma[1],Fa=ma[2];ma=wa[2];var Ha=wa[0]-na,eb=wa[1]-ya,hb=Ha*Ha+eb*eb;if(1E-12>hb){var ob=Math.log(ma/Fa)/ca;ma=function(sb){return[na+sb*Ha,ya+sb*eb,Fa*Math.exp(ca*sb*ob)]}}else{var ib=Math.sqrt(hb);wa=(ma*ma-Fa*Fa+4*hb)/(4*Fa*ib);ma=(ma*ma-Fa*Fa-4*hb)/(4*ma*ib);var Pa=
Math.log(Math.sqrt(wa*wa+1)-wa);ob=(Math.log(Math.sqrt(ma*ma+1)-ma)-Pa)/ca;ma=function(sb){sb*=ob;var tb=H(Pa),Aa=ca*sb+Pa;var Ka=((Aa=Math.exp(2*Aa))-1)/(Aa+1);var Qa=Pa;Aa=((Qa=Math.exp(Qa))-1/Qa)/2;Ka=Fa/(2*ib)*(tb*Ka-Aa);return[na+Ka*Ha,ya+Ka*eb,Fa*tb/H(ca*sb+Pa)]}}ma.duration=1E3*ob;return ma};q.piecewise=function(ma,wa){for(var na=0,ya=wa.length-1,Fa=wa[0],Ha=Array(0>ya?0:ya);na<ya;)Ha[na]=ma(Fa,Fa=wa[++na]);return function(eb){var hb=Math.max(0,Math.min(ya-1,Math.floor(eb*=ya)));return Ha[hb](eb-
hb)}};q.quantize=function(ma,wa){for(var na=Array(wa),ya=0;ya<wa;++ya)na[ya]=ma(ya/(wa-1));return na};Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-color":158}],163:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function p(){return new n}var h=Math.PI,a=2*h,f=a-1E-6;n.prototype=p.prototype={constructor:n,moveTo:function(d,l){this._+="M"+(this._x0=
this._x1=+d)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(d,l){this._+="L"+(this._x1=+d)+","+(this._y1=+l)},quadraticCurveTo:function(d,l,k,c){this._+="Q"+ +d+","+ +l+","+(this._x1=+k)+","+(this._y1=+c)},bezierCurveTo:function(d,l,k,c,e,g){this._+="C"+ +d+","+ +l+","+ +k+","+ +c+","+(this._x1=+e)+","+(this._y1=+g)},arcTo:function(d,l,k,c,e){d=+d;l=+l;k=+k;c=+c;e=+e;var g=this._x1,m=this._y1,r=k-d,u=c-l,v=g-d,w=
m-l,D=v*v+w*w;if(0>e)throw Error("negative radius: "+e);if(null===this._x1)this._+="M"+(this._x1=d)+","+(this._y1=l);else if(1E-6<D)if(1E-6<Math.abs(w*r-u*v)&&e){k-=g;c-=m;var C=r*r+u*u;m=Math.sqrt(C);g=Math.sqrt(D);D=e*Math.tan((h-Math.acos((C+D-(k*k+c*c))/(2*m*g)))/2);g=D/g;D/=m;1E-6<Math.abs(g-1)&&(this._+="L"+(d+g*v)+","+(l+g*w));this._+="A"+e+","+e+",0,0,"+ +(w*k>v*c)+","+(this._x1=d+D*r)+","+(this._y1=l+D*u)}else this._+="L"+(this._x1=d)+","+(this._y1=l)},arc:function(d,l,k,c,e,g){d=+d;l=+l;
k=+k;g=!!g;var m=k*Math.cos(c),r=k*Math.sin(c),u=d+m,v=l+r,w=1^g;c=g?c-e:e-c;if(0>k)throw Error("negative radius: "+k);if(null===this._x1)this._+="M"+u+","+v;else if(1E-6<Math.abs(this._x1-u)||1E-6<Math.abs(this._y1-v))this._+="L"+u+","+v;k&&(0>c&&(c=c%a+a),c>f?this._+="A"+k+","+k+",0,1,"+w+","+(d-m)+","+(l-r)+"A"+k+","+k+",0,1,"+w+","+(this._x1=u)+","+(this._y1=v):1E-6<c&&(this._+="A"+k+","+k+",0,"+ +(c>=h)+","+w+","+(this._x1=d+k*Math.cos(e))+","+(this._y1=l+k*Math.sin(e))))},rect:function(d,l,
k,c){this._+="M"+(this._x0=this._x1=+d)+","+(this._y0=this._y1=+l)+"h"+ +k+"v"+ +c+"h"+-k+"Z"},toString:function(){return this._}};q.path=p;Object.defineProperty(q,"__esModule",{value:!0})})},{}],164:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(c,e,g,m){if(isNaN(e)||isNaN(g))return c;var r,u=c._root;m={data:m};var v=c._x0,w=c._y0,D=c._x1,C=c._y1,x,A,B,t;if(!u)return c._root=m,c;for(;u.length;)if((B=e>=(x=
(v+D)/2))?v=x:D=x,(t=g>=(A=(w+C)/2))?w=A:C=A,r=u,!(u=u[B|=t<<1]))return r[B]=m,c;var G=+c._x.call(null,u.data);var H=+c._y.call(null,u.data);if(e===G&&g===H)return m.next=u,r?r[B]=m:c._root=m,c;do r=r?r[B]=Array(4):c._root=Array(4),(B=e>=(x=(v+D)/2))?v=x:D=x,(t=g>=(A=(w+C)/2))?w=A:C=A;while((B|=t<<1)===(t=(H>=A)<<1|G>=x));return r[t]=u,r[B]=m,c}function p(c,e,g,m,r){this.node=c;this.x0=e;this.y0=g;this.x1=m;this.y1=r}function h(c){return c[0]}function a(c){return c[1]}function f(c,e,g){e=new d(null==
e?h:e,null==g?a:g,NaN,NaN,NaN,NaN);return null==c?e:e.addAll(c)}function d(c,e,g,m,r,u){this._x=c;this._y=e;this._x0=g;this._y0=m;this._x1=r;this._y1=u;this._root=void 0}function l(c){for(var e={data:c.data},g=e;c=c.next;)g=g.next={data:c.data};return e}var k=f.prototype=d.prototype;k.copy=function(){var c=new d(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,g,m;if(!e)return c;if(!e.length)return c._root=l(e),c;for(g=[{source:e,target:c._root=Array(4)}];e=g.pop();)for(var r=0;4>
r;++r)if(m=e.source[r])m.length?g.push({source:m,target:e.target[r]=Array(4)}):e.target[r]=l(m);return c};k.add=function(c){var e=+this._x.call(null,c),g=+this._y.call(null,c);return n(this.cover(e,g),e,g,c)};k.addAll=function(c){var e,g,m=c.length,r,u,v=Array(m),w=Array(m),D=Infinity,C=Infinity,x=-Infinity,A=-Infinity;for(g=0;g<m;++g)isNaN(r=+this._x.call(null,e=c[g]))||isNaN(u=+this._y.call(null,e))||(v[g]=r,w[g]=u,r<D&&(D=r),r>x&&(x=r),u<C&&(C=u),u>A&&(A=u));if(D>x||C>A)return this;this.cover(D,
C).cover(x,A);for(g=0;g<m;++g)n(this,v[g],w[g],c[g]);return this};k.cover=function(c,e){if(isNaN(c=+c)||isNaN(e=+e))return this;var g=this._x0,m=this._y0,r=this._x1,u=this._y1;if(isNaN(g))r=(g=Math.floor(c))+1,u=(m=Math.floor(e))+1;else{for(var v=r-g,w=this._root,D,C;g>c||c>=r||m>e||e>=u;)switch(C=(e<m)<<1|c<g,D=Array(4),D[C]=w,w=D,v*=2,C){case 0:r=g+v;u=m+v;break;case 1:g=r-v;u=m+v;break;case 2:r=g+v;m=u-v;break;case 3:g=r-v,m=u-v}this._root&&this._root.length&&(this._root=w)}this._x0=g;this._y0=
m;this._x1=r;this._y1=u;return this};k.data=function(){var c=[];this.visit(function(e){if(!e.length){do c.push(e.data);while(e=e.next)}});return c};k.extent=function(c){return arguments.length?this.cover(+c[0][0],+c[0][1]).cover(+c[1][0],+c[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};k.find=function(c,e,g){var m=this._x0,r=this._y0,u,v,w,D,C=this._x1,x=this._y1,A=[],B=this._root,t;B&&A.push(new p(B,m,r,C,x));null==g?g=Infinity:(m=c-g,r=e-g,C=c+g,x=e+g,g*=g);for(;t=A.pop();)if(!(!(B=
t.node)||(u=t.x0)>C||(v=t.y0)>x||(w=t.x1)<m||(D=t.y1)<r))if(B.length){t=(u+w)/2;var G=(v+D)/2;A.push(new p(B[3],t,G,w,D),new p(B[2],u,G,t,D),new p(B[1],t,v,w,G),new p(B[0],u,v,t,G));if(B=(e>=G)<<1|c>=t)t=A[A.length-1],A[A.length-1]=A[A.length-1-B],A[A.length-1-B]=t}else if(t=c-+this._x.call(null,B.data),G=e-+this._y.call(null,B.data),t=t*t+G*G,t<g){var H=Math.sqrt(g=t);m=c-H;r=e-H;C=c+H;x=e+H;H=B.data}return H};k.remove=function(c){if(isNaN(D=+this._x.call(null,c))||isNaN(C=+this._y.call(null,c)))return this;
var e,g=this._root,m,r=this._x0,u=this._y0,v=this._x1,w=this._y1,D,C,x,A,B,t;if(!g)return this;if(g.length)for(;;){(B=D>=(x=(r+v)/2))?r=x:v=x;(t=C>=(A=(u+w)/2))?u=A:w=A;if(!(e=g,g=g[B|=t<<1]))return this;if(!g.length)break;if(e[B+1&3]||e[B+2&3]||e[B+3&3]){var G=e;var H=B}}for(;g.data!==c;)if(!(m=g,g=g.next))return this;(c=g.next)&&delete g.next;if(m)return c?m.next=c:delete m.next,this;if(!e)return this._root=c,this;c?e[B]=c:delete e[B];(g=e[0]||e[1]||e[2]||e[3])&&g===(e[3]||e[2]||e[1]||e[0])&&!g.length&&
(G?G[H]=g:this._root=g);return this};k.removeAll=function(c){for(var e=0,g=c.length;e<g;++e)this.remove(c[e]);return this};k.root=function(){return this._root};k.size=function(){var c=0;this.visit(function(e){if(!e.length){do++c;while(e=e.next)}});return c};k.visit=function(c){var e=[],g,m=this._root,r,u,v,w;for(m&&e.push(new p(m,this._x0,this._y0,this._x1,this._y1));g=e.pop();)if(!c(m=g.node,u=g.x0,v=g.y0,w=g.x1,g=g.y1)&&m.length){var D=(u+w)/2,C=(v+g)/2;(r=m[3])&&e.push(new p(r,D,C,w,g));(r=m[2])&&
e.push(new p(r,u,C,D,g));(r=m[1])&&e.push(new p(r,D,v,w,C));(r=m[0])&&e.push(new p(r,u,v,D,C))}return this};k.visitAfter=function(c){var e=[],g=[],m;for(this._root&&e.push(new p(this._root,this._x0,this._y0,this._x1,this._y1));m=e.pop();){var r=m.node;if(r.length){var u,v=m.x0,w=m.y0,D=m.x1,C=m.y1,x=(v+D)/2,A=(w+C)/2;(u=r[0])&&e.push(new p(u,v,w,x,A));(u=r[1])&&e.push(new p(u,x,w,D,A));(u=r[2])&&e.push(new p(u,v,A,x,C));(u=r[3])&&e.push(new p(u,x,A,D,C))}g.push(m)}for(;m=g.pop();)c(m.node,m.x0,m.y0,
m.x1,m.y1);return this};k.x=function(c){return arguments.length?(this._x=c,this):this._x};k.y=function(c){return arguments.length?(this._y=c,this):this._y};q.quadtree=f;Object.defineProperty(q,"__esModule",{value:!0})})},{}],165:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F,b("d3-path")):(q=q||self,n(q.d3=q.d3||{},q.d3))})(this,function(q,n){function p(wb){return function(){return wb}}function h(wb){return 1<=wb?Ua:-1>=wb?-Ua:Math.asin(wb)}function a(wb){return wb.innerRadius}
function f(wb){return wb.outerRadius}function d(wb){return wb.startAngle}function l(wb){return wb.endAngle}function k(wb){return wb&&wb.padAngle}function c(wb,zb,fc,zc,Gc,$b,bc){var Eb=wb-fc,xb=zb-zc;bc=(bc?$b:-$b)/db(Eb*Eb+xb*xb);xb*=bc;Eb*=-bc;var Cb=wb+xb,Jb=zb+Eb,ac=fc+xb,Kc=zc+Eb;fc=(Cb+ac)/2;zc=(Jb+Kc)/2;zb=ac-Cb;wb=Kc-Jb;bc=zb*zb+wb*wb;$b=Gc-$b;Kc=Cb*Kc-ac*Jb;var vc=(0>wb?-1:1)*db(Qa(0,$b*$b*bc-Kc*Kc));Cb=(Kc*wb-zb*vc)/bc;Jb=(-Kc*zb-wb*vc)/bc;ac=(Kc*wb+zb*vc)/bc;zb=(-Kc*zb+wb*vc)/bc;wb=Cb-
fc;bc=Jb-zc;fc=ac-fc;zc=zb-zc;wb*wb+bc*bc>fc*fc+zc*zc&&(Cb=ac,Jb=zb);return{cx:Cb,cy:Jb,x01:-xb,y01:-Eb,x11:Cb*(Gc/$b-1),y11:Jb*(Gc/$b-1)}}function e(wb){this._context=wb}function g(wb){return new e(wb)}function m(wb){return wb[0]}function r(wb){return wb[1]}function u(){function wb(Eb){var xb,Cb=Eb.length,Jb,ac=!1,Kc;null==Gc&&(bc=$b(Kc=n.path()));for(xb=0;xb<=Cb;++xb)!(xb<Cb&&zc(Jb=Eb[xb],xb,Eb))===ac&&((ac=!ac)?bc.lineStart():bc.lineEnd()),ac&&bc.point(+zb(Jb,xb,Eb),+fc(Jb,xb,Eb));if(Kc)return bc=
null,Kc+""||null}var zb=m,fc=r,zc=p(!0),Gc=null,$b=g,bc=null;wb.x=function(Eb){return arguments.length?(zb="function"===typeof Eb?Eb:p(+Eb),wb):zb};wb.y=function(Eb){return arguments.length?(fc="function"===typeof Eb?Eb:p(+Eb),wb):fc};wb.defined=function(Eb){return arguments.length?(zc="function"===typeof Eb?Eb:p(!!Eb),wb):zc};wb.curve=function(Eb){return arguments.length?($b=Eb,null!=Gc&&(bc=$b(Gc)),wb):$b};wb.context=function(Eb){return arguments.length?(null==Eb?Gc=bc=null:bc=$b(Gc=Eb),wb):Gc};
return wb}function v(){function wb(Jb){var ac,Kc,vc=Jb.length,Lc,Zc=!1,Wc,ld=Array(vc),xd=Array(vc);null==Eb&&(Cb=xb(Wc=n.path()));for(ac=0;ac<=vc;++ac){if(!(ac<vc&&bc(Lc=Jb[ac],ac,Jb))===Zc)if(Zc=!Zc){var hd=ac;Cb.areaStart();Cb.lineStart()}else{Cb.lineEnd();Cb.lineStart();for(Kc=ac-1;Kc>=hd;--Kc)Cb.point(ld[Kc],xd[Kc]);Cb.lineEnd();Cb.areaEnd()}Zc&&(ld[ac]=+fc(Lc,ac,Jb),xd[ac]=+Gc(Lc,ac,Jb),Cb.point(zc?+zc(Lc,ac,Jb):ld[ac],$b?+$b(Lc,ac,Jb):xd[ac]))}if(Wc)return Cb=null,Wc+""||null}function zb(){return u().defined(bc).curve(xb).context(Eb)}
var fc=m,zc=null,Gc=p(0),$b=r,bc=p(!0),Eb=null,xb=g,Cb=null;wb.x=function(Jb){return arguments.length?(fc="function"===typeof Jb?Jb:p(+Jb),zc=null,wb):fc};wb.x0=function(Jb){return arguments.length?(fc="function"===typeof Jb?Jb:p(+Jb),wb):fc};wb.x1=function(Jb){return arguments.length?(zc=null==Jb?null:"function"===typeof Jb?Jb:p(+Jb),wb):zc};wb.y=function(Jb){return arguments.length?(Gc="function"===typeof Jb?Jb:p(+Jb),$b=null,wb):Gc};wb.y0=function(Jb){return arguments.length?(Gc="function"===typeof Jb?
Jb:p(+Jb),wb):Gc};wb.y1=function(Jb){return arguments.length?($b=null==Jb?null:"function"===typeof Jb?Jb:p(+Jb),wb):$b};wb.lineX0=wb.lineY0=function(){return zb().x(fc).y(Gc)};wb.lineY1=function(){return zb().x(fc).y($b)};wb.lineX1=function(){return zb().x(zc).y(Gc)};wb.defined=function(Jb){return arguments.length?(bc="function"===typeof Jb?Jb:p(!!Jb),wb):bc};wb.curve=function(Jb){return arguments.length?(xb=Jb,null!=Eb&&(Cb=xb(Eb)),wb):xb};wb.context=function(Jb){return arguments.length?(null==Jb?
Eb=Cb=null:Cb=xb(Eb=Jb),wb):Eb};return wb}function w(wb,zb){return zb<wb?-1:zb>wb?1:zb>=wb?0:NaN}function D(wb){return wb}function C(wb){this._curve=wb}function x(wb){function zb(fc){return new C(wb(fc))}zb._curve=wb;return zb}function A(wb){var zb=wb.curve;wb.angle=wb.x;delete wb.x;wb.radius=wb.y;delete wb.y;wb.curve=function(fc){return arguments.length?zb(x(fc)):zb()._curve};return wb}function B(){return A(u().curve(xa))}function t(){var wb=v().curve(xa),zb=wb.curve,fc=wb.lineX0,zc=wb.lineX1,Gc=
wb.lineY0,$b=wb.lineY1;wb.angle=wb.x;delete wb.x;wb.startAngle=wb.x0;delete wb.x0;wb.endAngle=wb.x1;delete wb.x1;wb.radius=wb.y;delete wb.y;wb.innerRadius=wb.y0;delete wb.y0;wb.outerRadius=wb.y1;delete wb.y1;wb.lineStartAngle=function(){return A(fc())};delete wb.lineX0;wb.lineEndAngle=function(){return A(zc())};delete wb.lineX1;wb.lineInnerRadius=function(){return A(Gc())};delete wb.lineY0;wb.lineOuterRadius=function(){return A($b())};delete wb.lineY1;wb.curve=function(bc){return arguments.length?
zb(x(bc)):zb()._curve};return wb}function G(wb,zb){return[(zb=+zb)*Math.cos(wb-=Math.PI/2),zb*Math.sin(wb)]}function H(wb){return wb.source}function I(wb){return wb.target}function J(wb){function zb(){var Eb,xb=Ga.call(arguments),Cb=fc.apply(this,xb),Jb=zc.apply(this,xb);bc||(bc=Eb=n.path());wb(bc,+Gc.apply(this,(xb[0]=Cb,xb)),+$b.apply(this,xb),+Gc.apply(this,(xb[0]=Jb,xb)),+$b.apply(this,xb));if(Eb)return bc=null,Eb+""||null}var fc=H,zc=I,Gc=m,$b=r,bc=null;zb.source=function(Eb){return arguments.length?
(fc=Eb,zb):fc};zb.target=function(Eb){return arguments.length?(zc=Eb,zb):zc};zb.x=function(Eb){return arguments.length?(Gc="function"===typeof Eb?Eb:p(+Eb),zb):Gc};zb.y=function(Eb){return arguments.length?($b="function"===typeof Eb?Eb:p(+Eb),zb):$b};zb.context=function(Eb){return arguments.length?(bc=null==Eb?null:Eb,zb):bc};return zb}function L(wb,zb,fc,zc,Gc){wb.moveTo(zb,fc);wb.bezierCurveTo(zb=(zb+zc)/2,fc,zb,Gc,zc,Gc)}function E(wb,zb,fc,zc,Gc){wb.moveTo(zb,fc);wb.bezierCurveTo(zb,fc=(fc+Gc)/
2,zc,fc,zc,Gc)}function K(wb,zb,fc,zc,Gc){var $b=G(zb,fc);zb=G(zb,fc=(fc+Gc)/2);fc=G(zc,fc);zc=G(zc,Gc);wb.moveTo($b[0],$b[1]);wb.bezierCurveTo(zb[0],zb[1],fc[0],fc[1],zc[0],zc[1])}function N(){}function O(wb,zb,fc){wb._context.bezierCurveTo((2*wb._x0+wb._x1)/3,(2*wb._y0+wb._y1)/3,(wb._x0+2*wb._x1)/3,(wb._y0+2*wb._y1)/3,(wb._x0+4*wb._x1+zb)/6,(wb._y0+4*wb._y1+fc)/6)}function Q(wb){this._context=wb}function P(wb){this._context=wb}function T(wb){this._context=wb}function V(wb,zb){this._basis=new Q(wb);
this._beta=zb}function aa(wb,zb,fc){wb._context.bezierCurveTo(wb._x1+wb._k*(wb._x2-wb._x0),wb._y1+wb._k*(wb._y2-wb._y0),wb._x2+wb._k*(wb._x1-zb),wb._y2+wb._k*(wb._y1-fc),wb._x2,wb._y2)}function ba(wb,zb){this._context=wb;this._k=(1-zb)/6}function Y(wb,zb){this._context=wb;this._k=(1-zb)/6}function ea(wb,zb){this._context=wb;this._k=(1-zb)/6}function da(wb,zb,fc){var zc=wb._x1,Gc=wb._y1,$b=wb._x2,bc=wb._y2;if(1E-12<wb._l01_a){var Eb=2*wb._l01_2a+3*wb._l01_a*wb._l12_a+wb._l12_2a,xb=3*wb._l01_a*(wb._l01_a+
wb._l12_a);zc=(zc*Eb-wb._x0*wb._l12_2a+wb._x2*wb._l01_2a)/xb;Gc=(Gc*Eb-wb._y0*wb._l12_2a+wb._y2*wb._l01_2a)/xb}1E-12<wb._l23_a&&(Eb=2*wb._l23_2a+3*wb._l23_a*wb._l12_a+wb._l12_2a,xb=3*wb._l23_a*(wb._l23_a+wb._l12_a),$b=($b*Eb+wb._x1*wb._l23_2a-zb*wb._l12_2a)/xb,bc=(bc*Eb+wb._y1*wb._l23_2a-fc*wb._l12_2a)/xb);wb._context.bezierCurveTo(zc,Gc,$b,bc,wb._x2,wb._y2)}function ca(wb,zb){this._context=wb;this._alpha=zb}function la(wb,zb){this._context=wb;this._alpha=zb}function pa(wb,zb){this._context=wb;this._alpha=
zb}function qa(wb){this._context=wb}function oa(wb,zb,fc){var zc=wb._x1-wb._x0;zb-=wb._x1;var Gc=(wb._y1-wb._y0)/(zc||0>zb&&-0);wb=(fc-wb._y1)/(zb||0>zc&&-0);return((0>Gc?-1:1)+(0>wb?-1:1))*Math.min(Math.abs(Gc),Math.abs(wb),.5*Math.abs((Gc*zb+wb*zc)/(zc+zb)))||0}function ka(wb,zb){var fc=wb._x1-wb._x0;return fc?(3*(wb._y1-wb._y0)/fc-zb)/2:zb}function ra(wb,zb,fc){var zc=wb._x0,Gc=wb._x1,$b=wb._y1,bc=(Gc-zc)/3;wb._context.bezierCurveTo(zc+bc,wb._y0+bc*zb,Gc-bc,$b-bc*fc,Gc,$b)}function ha(wb){this._context=
wb}function ma(wb){this._context=new wa(wb)}function wa(wb){this._context=wb}function na(wb){this._context=wb}function ya(wb){var zb,fc=wb.length-1,zc=Array(fc),Gc=Array(fc),$b=Array(fc);zc[0]=0;Gc[0]=2;$b[0]=wb[0]+2*wb[1];for(zb=1;zb<fc-1;++zb)zc[zb]=1,Gc[zb]=4,$b[zb]=4*wb[zb]+2*wb[zb+1];zc[fc-1]=2;Gc[fc-1]=7;$b[fc-1]=8*wb[fc-1]+wb[fc];for(zb=1;zb<fc;++zb){var bc=zc[zb]/Gc[zb-1];Gc[zb]-=bc;$b[zb]-=bc*$b[zb-1]}zc[fc-1]=$b[fc-1]/Gc[fc-1];for(zb=fc-2;0<=zb;--zb)zc[zb]=($b[zb]-zc[zb+1])/Gc[zb];Gc[fc-
1]=(wb[fc]+zc[fc-1])/2;for(zb=0;zb<fc-1;++zb)Gc[zb]=2*wb[zb+1]-zc[zb+1];return[zc,Gc]}function Fa(wb,zb){this._context=wb;this._t=zb}function Ha(wb,zb){if(1<(bc=wb.length))for(var fc=1,zc,Gc,$b=wb[zb[0]],bc,Eb=$b.length;fc<bc;++fc)for(Gc=$b,$b=wb[zb[fc]],zc=0;zc<Eb;++zc)$b[zc][1]+=$b[zc][0]=isNaN(Gc[zc][1])?Gc[zc][0]:Gc[zc][1]}function eb(wb){wb=wb.length;for(var zb=Array(wb);0<=--wb;)zb[wb]=wb;return zb}function hb(wb,zb){return wb[zb]}function ob(wb){var zb=wb.map(ib);return eb(wb).sort(function(fc,
zc){return zb[fc]-zb[zc]})}function ib(wb){for(var zb=-1,fc=0,zc=wb.length,Gc,$b=-Infinity;++zb<zc;)(Gc=+wb[zb][1])>$b&&($b=Gc,fc=zb);return fc}function Pa(wb){var zb=wb.map(sb);return eb(wb).sort(function(fc,zc){return zb[fc]-zb[zc]})}function sb(wb){for(var zb=0,fc=-1,zc=wb.length,Gc;++fc<zc;)if(Gc=+wb[fc][1])zb+=Gc;return zb}var tb=Math.abs,Aa=Math.atan2,Ka=Math.cos,Qa=Math.max,Xa=Math.min,pb=Math.sin,db=Math.sqrt,Ia=Math.PI,Ua=Ia/2,$a=2*Ia;e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=
NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(wb,zb){wb=+wb;zb=+zb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(wb,zb):this._context.moveTo(wb,zb);break;case 1:this._point=2;default:this._context.lineTo(wb,zb)}}};var xa=x(g);C.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},
lineEnd:function(){this._curve.lineEnd()},point:function(wb,zb){this._curve.point(zb*Math.sin(wb),zb*-Math.cos(wb))}};var Ga=Array.prototype.slice,Va={draw:function(wb,zb){zb=Math.sqrt(zb/Ia);wb.moveTo(zb,0);wb.arc(0,0,zb,0,$a)}},gb={draw:function(wb,zb){zb=Math.sqrt(zb/5)/2;wb.moveTo(-3*zb,-zb);wb.lineTo(-zb,-zb);wb.lineTo(-zb,-3*zb);wb.lineTo(zb,-3*zb);wb.lineTo(zb,-zb);wb.lineTo(3*zb,-zb);wb.lineTo(3*zb,zb);wb.lineTo(zb,zb);wb.lineTo(zb,3*zb);wb.lineTo(-zb,3*zb);wb.lineTo(-zb,zb);wb.lineTo(-3*
zb,zb);wb.closePath()}},Ma=Math.sqrt(1/3),cb=2*Ma,Sa={draw:function(wb,zb){zb=Math.sqrt(zb/cb);var fc=zb*Ma;wb.moveTo(0,-zb);wb.lineTo(fc,0);wb.lineTo(0,zb);wb.lineTo(-fc,0);wb.closePath()}},lb=Math.sin(Ia/10)/Math.sin(7*Ia/10),rb=Math.sin($a/10)*lb,yb=-Math.cos($a/10)*lb;lb={draw:function(wb,zb){zb=Math.sqrt(.8908130915292852*zb);var fc=rb*zb,zc=yb*zb;wb.moveTo(0,-zb);wb.lineTo(fc,zc);for(var Gc=1;5>Gc;++Gc){var $b=$a*Gc/5,bc=Math.cos($b);$b=Math.sin($b);wb.lineTo($b*zb,-bc*zb);wb.lineTo(bc*fc-$b*
zc,$b*fc+bc*zc)}wb.closePath()}};var Hb={draw:function(wb,zb){zb=Math.sqrt(zb);var fc=-zb/2;wb.rect(fc,fc,zb,zb)}},Vb=Math.sqrt(3),lc={draw:function(wb,zb){zb=-Math.sqrt(zb/(3*Vb));wb.moveTo(0,2*zb);wb.lineTo(-Vb*zb,-zb);wb.lineTo(Vb*zb,-zb);wb.closePath()}},Ac=Math.sqrt(3)/2,ad=1/Math.sqrt(12),Nc=3*(ad/2+1),ed={draw:function(wb,zb){var fc=Math.sqrt(zb/Nc);zb=fc/2;var zc=fc*ad;fc=fc*ad+fc;var Gc=-zb;wb.moveTo(zb,zc);wb.lineTo(zb,fc);wb.lineTo(Gc,fc);wb.lineTo(-.5*zb-Ac*zc,Ac*zb+-.5*zc);wb.lineTo(-.5*
zb-Ac*fc,Ac*zb+-.5*fc);wb.lineTo(-.5*Gc-Ac*fc,Ac*Gc+-.5*fc);wb.lineTo(-.5*zb+Ac*zc,-.5*zc-Ac*zb);wb.lineTo(-.5*zb+Ac*fc,-.5*fc-Ac*zb);wb.lineTo(-.5*Gc+Ac*fc,-.5*fc-Ac*Gc);wb.closePath()}},Pc=[Va,gb,Sa,Hb,lb,lc,ed];Q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:O(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||
0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(wb,zb){wb=+wb;zb=+zb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(wb,zb):this._context.moveTo(wb,zb);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:O(this,wb,zb)}this._x0=this._x1;this._x1=wb;this._y0=this._y1;this._y1=zb}};P.prototype={areaStart:N,areaEnd:N,lineStart:function(){this._x0=
this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(wb,
zb){wb=+wb;zb=+zb;switch(this._point){case 0:this._point=1;this._x2=wb;this._y2=zb;break;case 1:this._point=2;this._x3=wb;this._y3=zb;break;case 2:this._point=3;this._x4=wb;this._y4=zb;this._context.moveTo((this._x0+4*this._x1+wb)/6,(this._y0+4*this._y1+zb)/6);break;default:O(this,wb,zb)}this._x0=this._x1;this._x1=wb;this._y0=this._y1;this._y1=zb}};T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=
0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(wb,zb){wb=+wb;zb=+zb;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var fc=(this._x0+4*this._x1+wb)/6,zc=(this._y0+4*this._y1+zb)/6;this._line?this._context.lineTo(fc,zc):this._context.moveTo(fc,zc);break;case 3:this._point=4;default:O(this,wb,zb)}this._x0=this._x1;this._x1=wb;this._y0=this._y1;this._y1=zb}};V.prototype=
{lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var wb=this._x,zb=this._y,fc=wb.length-1;if(0<fc)for(var zc=wb[0],Gc=zb[0],$b=wb[fc]-zc,bc=zb[fc]-Gc,Eb=-1,xb;++Eb<=fc;)xb=Eb/fc,this._basis.point(this._beta*wb[Eb]+(1-this._beta)*(zc+xb*$b),this._beta*zb[Eb]+(1-this._beta)*(Gc+xb*bc));this._x=this._y=null;this._basis.lineEnd()},point:function(wb,zb){this._x.push(+wb);this._y.push(+zb)}};var sd=function fc(zb){function zc(Gc){return 1===zb?new Q(Gc):new V(Gc,zb)}
zc.beta=function(Gc){return fc(+Gc)};return zc}(.85);ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:aa(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(zb,fc){zb=+zb;fc=+fc;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(zb,fc):this._context.moveTo(zb,fc);break;case 1:this._point=2;this._x1=zb;this._y1=fc;break;case 2:this._point=3;default:aa(this,zb,fc)}this._x0=this._x1;this._x1=this._x2;this._x2=zb;this._y0=this._y1;this._y1=this._y2;this._y2=fc}};var Db=function zc(fc){function Gc($b){return new ba($b,fc)}Gc.tension=function($b){return zc(+$b)};return Gc}(0);Y.prototype={areaStart:N,areaEnd:N,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=
this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(fc,zc){fc=+fc;zc=+zc;switch(this._point){case 0:this._point=1;this._x3=fc;this._y3=zc;break;case 1:this._point=2;this._context.moveTo(this._x4=
fc,this._y4=zc);break;case 2:this._point=3;this._x5=fc;this._y5=zc;break;default:aa(this,fc,zc)}this._x0=this._x1;this._x1=this._x2;this._x2=fc;this._y0=this._y1;this._y1=this._y2;this._y2=zc}};var Yb=function Gc(zc){function $b(bc){return new Y(bc,zc)}$b.tension=function(bc){return Gc(+bc)};return $b}(0);ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||
0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(zc,Gc){zc=+zc;Gc=+Gc;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:aa(this,zc,Gc)}this._x0=this._x1;this._x1=this._x2;this._x2=zc;this._y0=this._y1;this._y1=this._y2;this._y2=Gc}};var Fc=function $b(Gc){function bc(Eb){return new ea(Eb,
Gc)}bc.tension=function(Eb){return $b(+Eb)};return bc}(0);ca.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();
this._line=1-this._line},point:function(Gc,$b){Gc=+Gc;$b=+$b;if(this._point){var bc=this._x2-Gc,Eb=this._y2-$b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(bc*bc+Eb*Eb,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Gc,$b):this._context.moveTo(Gc,$b);break;case 1:this._point=2;break;case 2:this._point=3;default:da(this,Gc,$b)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;
this._x2=Gc;this._y0=this._y1;this._y1=this._y2;this._y2=$b}};var mc=function bc($b){function Eb(xb){return $b?new ca(xb,$b):new ba(xb,0)}Eb.alpha=function(xb){return bc(+xb)};return Eb}(.5);la.prototype={areaStart:N,areaEnd:N,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,
this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function($b,bc){$b=+$b;bc=+bc;if(this._point){var Eb=this._x2-$b,xb=this._y2-bc;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Eb*Eb+xb*xb,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=$b;this._y3=bc;break;case 1:this._point=2;this._context.moveTo(this._x4=$b,
this._y4=bc);break;case 2:this._point=3;this._x5=$b;this._y5=bc;break;default:da(this,$b,bc)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=$b;this._y0=this._y1;this._y1=this._y2;this._y2=bc}};var qc=function Eb(bc){function xb(Cb){return bc?new la(Cb,bc):new Y(Cb,0)}xb.alpha=function(Cb){return Eb(+Cb)};return xb}(.5);pa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},
lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(bc,Eb){bc=+bc;Eb=+Eb;if(this._point){var xb=this._x2-bc,Cb=this._y2-Eb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(xb*xb+Cb*Cb,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=
2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:da(this,bc,Eb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=bc;this._y0=this._y1;this._y1=this._y2;this._y2=Eb}};var rc=function xb(Eb){function Cb(Jb){return Eb?new pa(Jb,Eb):new ea(Jb,0)}Cb.alpha=function(Jb){return xb(+Jb)};return Cb}(.5);qa.prototype=
{areaStart:N,areaEnd:N,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Eb,xb){Eb=+Eb;xb=+xb;this._point?this._context.lineTo(Eb,xb):(this._point=1,this._context.moveTo(Eb,xb))}};ha.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;
case 3:ra(this,this._t0,ka(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Eb,xb){var Cb=NaN;Eb=+Eb;xb=+xb;if(Eb!==this._x1||xb!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Eb,xb):this._context.moveTo(Eb,xb);break;case 1:this._point=2;break;case 2:this._point=3;ra(this,ka(this,Cb=oa(this,Eb,xb)),Cb);break;default:ra(this,this._t0,Cb=oa(this,Eb,xb))}this._x0=this._x1;this._x1=Eb;
this._y0=this._y1;this._y1=xb;this._t0=Cb}}};(ma.prototype=Object.create(ha.prototype)).point=function(Eb,xb){ha.prototype.point.call(this,xb,Eb)};wa.prototype={moveTo:function(Eb,xb){this._context.moveTo(xb,Eb)},closePath:function(){this._context.closePath()},lineTo:function(Eb,xb){this._context.lineTo(xb,Eb)},bezierCurveTo:function(Eb,xb,Cb,Jb,ac,Kc){this._context.bezierCurveTo(xb,Eb,Jb,Cb,Kc,ac)}};na.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=
[];this._y=[]},lineEnd:function(){var Eb=this._x,xb=this._y,Cb=Eb.length;if(Cb)if(this._line?this._context.lineTo(Eb[0],xb[0]):this._context.moveTo(Eb[0],xb[0]),2===Cb)this._context.lineTo(Eb[1],xb[1]);else for(var Jb=ya(Eb),ac=ya(xb),Kc=0,vc=1;vc<Cb;++Kc,++vc)this._context.bezierCurveTo(Jb[0][Kc],ac[0][Kc],Jb[1][Kc],ac[1][Kc],Eb[vc],xb[vc]);(this._line||0!==this._line&&1===Cb)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(Eb,xb){this._x.push(+Eb);this._y.push(+xb)}};
Fa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(Eb,xb){Eb=+Eb;xb=+xb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Eb,xb):this._context.moveTo(Eb,
xb);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,xb),this._context.lineTo(Eb,xb);else{var Cb=this._x*(1-this._t)+Eb*this._t;this._context.lineTo(Cb,this._y);this._context.lineTo(Cb,xb)}}this._x=Eb;this._y=xb}};q.arc=function(){function Eb(){var Wc,ld=+xb.apply(this,arguments),xd=+Cb.apply(this,arguments),hd=Kc.apply(this,arguments)-Ua,Cd=vc.apply(this,arguments)-Ua,Kd=tb(Cd-hd),pd=Cd>hd;Zc||(Zc=Wc=n.path());if(xd<ld){var Yc=xd;xd=ld;ld=Yc}if(1E-12<xd)if(Kd>$a-1E-12)Zc.moveTo(xd*
Ka(hd),xd*pb(hd)),Zc.arc(0,0,xd,hd,Cd,!pd),1E-12<ld&&(Zc.moveTo(ld*Ka(Cd),ld*pb(Cd)),Zc.arc(0,0,ld,Cd,hd,pd));else{var Dd=hd,Jd=Cd;Yc=hd;var Ld=Cd,Ce=Kd,Rd=Kd,Sc=Lc.apply(this,arguments)/2,md=1E-12<Sc&&(ac?+ac.apply(this,arguments):db(ld*ld+xd*xd)),Gd=Xa(tb(xd-ld)/2,+Jb.apply(this,arguments)),Md=Gd,me=Gd;if(1E-12<md){var xe=h(md/ld*pb(Sc));Sc=h(md/xd*pb(Sc));1E-12<(Ce-=2*xe)?(xe*=pd?1:-1,Yc+=xe,Ld-=xe):(Ce=0,Yc=Ld=(hd+Cd)/2);1E-12<(Rd-=2*Sc)?(Sc*=pd?1:-1,Dd+=Sc,Jd-=Sc):(Rd=0,Dd=Jd=(hd+Cd)/2)}hd=xd*
Ka(Dd);Cd=xd*pb(Dd);xe=ld*Ka(Ld);Sc=ld*pb(Ld);if(1E-12<Gd){var Wd=xd*Ka(Jd),Qd=xd*pb(Jd),Ae=ld*Ka(Yc),Be=ld*pb(Yc);if(Kd=Kd<Ia){var Ge=Ae-hd;Kd=Be-Cd;md=xe-Wd;var Ue=Sc-Qd,uf=Ue*Ge-md*Kd;1E-12>uf*uf?Ge=void 0:(uf=(md*(Cd-Qd)-Ue*(hd-Wd))/uf,Ge=[hd+uf*Ge,Cd+uf*Kd]);Kd=Ge}Kd&&(Md=hd-Ge[0],me=Cd-Ge[1],Kd=Wd-Ge[0],md=Qd-Ge[1],Md=(Md*Kd+me*md)/(db(Md*Md+me*me)*db(Kd*Kd+md*md)),me=1/pb((1<Md?0:-1>Md?Ia:Math.acos(Md))/2),Ge=db(Ge[0]*Ge[0]+Ge[1]*Ge[1]),Md=Xa(Gd,(ld-Ge)/(me-1)),me=Xa(Gd,(xd-Ge)/(me+1)))}1E-12<
Rd?1E-12<me?(Dd=c(Ae,Be,hd,Cd,xd,me,pd),Jd=c(Wd,Qd,xe,Sc,xd,me,pd),Zc.moveTo(Dd.cx+Dd.x01,Dd.cy+Dd.y01),me<Gd?Zc.arc(Dd.cx,Dd.cy,me,Aa(Dd.y01,Dd.x01),Aa(Jd.y01,Jd.x01),!pd):(Zc.arc(Dd.cx,Dd.cy,me,Aa(Dd.y01,Dd.x01),Aa(Dd.y11,Dd.x11),!pd),Zc.arc(0,0,xd,Aa(Dd.cy+Dd.y11,Dd.cx+Dd.x11),Aa(Jd.cy+Jd.y11,Jd.cx+Jd.x11),!pd),Zc.arc(Jd.cx,Jd.cy,me,Aa(Jd.y11,Jd.x11),Aa(Jd.y01,Jd.x01),!pd))):(Zc.moveTo(hd,Cd),Zc.arc(0,0,xd,Dd,Jd,!pd)):Zc.moveTo(hd,Cd);1E-12<ld&&1E-12<Ce?1E-12<Md?(Dd=c(xe,Sc,Wd,Qd,ld,-Md,pd),Jd=
c(hd,Cd,Ae,Be,ld,-Md,pd),Zc.lineTo(Dd.cx+Dd.x01,Dd.cy+Dd.y01),Md<Gd?Zc.arc(Dd.cx,Dd.cy,Md,Aa(Dd.y01,Dd.x01),Aa(Jd.y01,Jd.x01),!pd):(Zc.arc(Dd.cx,Dd.cy,Md,Aa(Dd.y01,Dd.x01),Aa(Dd.y11,Dd.x11),!pd),Zc.arc(0,0,ld,Aa(Dd.cy+Dd.y11,Dd.cx+Dd.x11),Aa(Jd.cy+Jd.y11,Jd.cx+Jd.x11),pd),Zc.arc(Jd.cx,Jd.cy,Md,Aa(Jd.y11,Jd.x11),Aa(Jd.y01,Jd.x01),!pd))):Zc.arc(0,0,ld,Ld,Yc,pd):Zc.lineTo(xe,Sc)}else Zc.moveTo(0,0);Zc.closePath();if(Wc)return Zc=null,Wc+""||null}var xb=a,Cb=f,Jb=p(0),ac=null,Kc=d,vc=l,Lc=k,Zc=null;Eb.centroid=
function(){var Wc=(+xb.apply(this,arguments)+ +Cb.apply(this,arguments))/2,ld=(+Kc.apply(this,arguments)+ +vc.apply(this,arguments))/2-Ia/2;return[Ka(ld)*Wc,pb(ld)*Wc]};Eb.innerRadius=function(Wc){return arguments.length?(xb="function"===typeof Wc?Wc:p(+Wc),Eb):xb};Eb.outerRadius=function(Wc){return arguments.length?(Cb="function"===typeof Wc?Wc:p(+Wc),Eb):Cb};Eb.cornerRadius=function(Wc){return arguments.length?(Jb="function"===typeof Wc?Wc:p(+Wc),Eb):Jb};Eb.padRadius=function(Wc){return arguments.length?
(ac=null==Wc?null:"function"===typeof Wc?Wc:p(+Wc),Eb):ac};Eb.startAngle=function(Wc){return arguments.length?(Kc="function"===typeof Wc?Wc:p(+Wc),Eb):Kc};Eb.endAngle=function(Wc){return arguments.length?(vc="function"===typeof Wc?Wc:p(+Wc),Eb):vc};Eb.padAngle=function(Wc){return arguments.length?(Lc="function"===typeof Wc?Wc:p(+Wc),Eb):Lc};Eb.context=function(Wc){return arguments.length?(Zc=null==Wc?null:Wc,Eb):Zc};return Eb};q.area=v;q.areaRadial=t;q.curveBasis=function(Eb){return new Q(Eb)};q.curveBasisClosed=
function(Eb){return new P(Eb)};q.curveBasisOpen=function(Eb){return new T(Eb)};q.curveBundle=sd;q.curveCardinal=Db;q.curveCardinalClosed=Yb;q.curveCardinalOpen=Fc;q.curveCatmullRom=mc;q.curveCatmullRomClosed=qc;q.curveCatmullRomOpen=rc;q.curveLinear=g;q.curveLinearClosed=function(Eb){return new qa(Eb)};q.curveMonotoneX=function(Eb){return new ha(Eb)};q.curveMonotoneY=function(Eb){return new ma(Eb)};q.curveNatural=function(Eb){return new na(Eb)};q.curveStep=function(Eb){return new Fa(Eb,.5)};q.curveStepAfter=
function(Eb){return new Fa(Eb,1)};q.curveStepBefore=function(Eb){return new Fa(Eb,0)};q.line=u;q.lineRadial=B;q.linkHorizontal=function(){return J(L)};q.linkRadial=function(){var Eb=J(K);Eb.angle=Eb.x;delete Eb.x;Eb.radius=Eb.y;delete Eb.y;return Eb};q.linkVertical=function(){return J(E)};q.pie=function(){function Eb(Lc){var Zc,Wc=Lc.length;var ld=0;var xd=Array(Wc),hd=Array(Wc),Cd=+ac.apply(this,arguments);var Kd=Math.min($a,Math.max(-$a,Kc.apply(this,arguments)-Cd));var pd=Math.min(Math.abs(Kd)/
Wc,vc.apply(this,arguments)),Yc=pd*(0>Kd?-1:1),Dd;for(Zc=0;Zc<Wc;++Zc)0<(Dd=hd[xd[Zc]=Zc]=+xb(Lc[Zc],Zc,Lc))&&(ld+=Dd);null!=Cb?xd.sort(function(Ld,Ce){return Cb(hd[Ld],hd[Ce])}):null!=Jb&&xd.sort(function(Ld,Ce){return Jb(Lc[Ld],Lc[Ce])});Zc=0;for(Kd=ld?(Kd-Wc*Yc)/ld:0;Zc<Wc;++Zc,Cd=Jd){ld=xd[Zc];Dd=hd[ld];var Jd=Cd+(0<Dd?Dd*Kd:0)+Yc;hd[ld]={data:Lc[ld],index:Zc,value:Dd,startAngle:Cd,endAngle:Jd,padAngle:pd}}return hd}var xb=D,Cb=w,Jb=null,ac=p(0),Kc=p($a),vc=p(0);Eb.value=function(Lc){return arguments.length?
(xb="function"===typeof Lc?Lc:p(+Lc),Eb):xb};Eb.sortValues=function(Lc){return arguments.length?(Cb=Lc,Jb=null,Eb):Cb};Eb.sort=function(Lc){return arguments.length?(Jb=Lc,Cb=null,Eb):Jb};Eb.startAngle=function(Lc){return arguments.length?(ac="function"===typeof Lc?Lc:p(+Lc),Eb):ac};Eb.endAngle=function(Lc){return arguments.length?(Kc="function"===typeof Lc?Lc:p(+Lc),Eb):Kc};Eb.padAngle=function(Lc){return arguments.length?(vc="function"===typeof Lc?Lc:p(+Lc),Eb):vc};return Eb};q.pointRadial=G;q.radialArea=
t;q.radialLine=B;q.stack=function(){function Eb(Kc){var vc=xb.apply(this,arguments),Lc,Zc=Kc.length,Wc=vc.length,ld=Array(Wc);for(Lc=0;Lc<Wc;++Lc){for(var xd=vc[Lc],hd=ld[Lc]=Array(Zc),Cd=0,Kd;Cd<Zc;++Cd)hd[Cd]=Kd=[0,+ac(Kc[Cd],xd,Cd,Kc)],Kd.data=Kc[Cd];hd.key=xd}Lc=0;for(vc=Cb(ld);Lc<Wc;++Lc)ld[vc[Lc]].index=Lc;Jb(ld,vc);return ld}var xb=p([]),Cb=eb,Jb=Ha,ac=hb;Eb.keys=function(Kc){return arguments.length?(xb="function"===typeof Kc?Kc:p(Ga.call(Kc)),Eb):xb};Eb.value=function(Kc){return arguments.length?
(ac="function"===typeof Kc?Kc:p(+Kc),Eb):ac};Eb.order=function(Kc){return arguments.length?(Cb=null==Kc?eb:"function"===typeof Kc?Kc:p(Ga.call(Kc)),Eb):Cb};Eb.offset=function(Kc){return arguments.length?(Jb=null==Kc?Ha:Kc,Eb):Jb};return Eb};q.stackOffsetDiverging=function(Eb,xb){if(0<(Zc=Eb.length))for(var Cb,Jb=0,ac,Kc,vc,Lc,Zc,Wc=Eb[xb[0]].length;Jb<Wc;++Jb)for(Cb=vc=Lc=0;Cb<Zc;++Cb)0<(Kc=(ac=Eb[xb[Cb]][Jb])[1]-ac[0])?(ac[0]=vc,ac[1]=vc+=Kc):0>Kc?(ac[1]=Lc,ac[0]=Lc+=Kc):(ac[0]=0,ac[1]=Kc)};q.stackOffsetExpand=
function(Eb,xb){if(0<(Jb=Eb.length)){for(var Cb,Jb,ac=0,Kc=Eb[0].length,vc;ac<Kc;++ac){for(vc=Cb=0;Cb<Jb;++Cb)vc+=Eb[Cb][ac][1]||0;if(vc)for(Cb=0;Cb<Jb;++Cb)Eb[Cb][ac][1]/=vc}Ha(Eb,xb)}};q.stackOffsetNone=Ha;q.stackOffsetSilhouette=function(Eb,xb){if(0<(ac=Eb.length)){for(var Cb=0,Jb=Eb[xb[0]],ac,Kc=Jb.length;Cb<Kc;++Cb){for(var vc=0,Lc=0;vc<ac;++vc)Lc+=Eb[vc][Cb][1]||0;Jb[Cb][1]+=Jb[Cb][0]=-Lc/2}Ha(Eb,xb)}};q.stackOffsetWiggle=function(Eb,xb){if(0<(vc=Eb.length)&&0<(Kc=(ac=Eb[xb[0]]).length)){for(var Cb=
0,Jb=1,ac,Kc,vc;Jb<Kc;++Jb){for(var Lc=0,Zc=0,Wc=0;Lc<vc;++Lc){var ld=Eb[xb[Lc]],xd=ld[Jb][1]||0;ld=(xd-(ld[Jb-1][1]||0))/2;for(var hd=0;hd<Lc;++hd){var Cd=Eb[xb[hd]];ld+=(Cd[Jb][1]||0)-(Cd[Jb-1][1]||0)}Zc+=xd;Wc+=ld*xd}ac[Jb-1][1]+=ac[Jb-1][0]=Cb;Zc&&(Cb-=Wc/Zc)}ac[Jb-1][1]+=ac[Jb-1][0]=Cb;Ha(Eb,xb)}};q.stackOrderAppearance=ob;q.stackOrderAscending=Pa;q.stackOrderDescending=function(Eb){return Pa(Eb).reverse()};q.stackOrderInsideOut=function(Eb){var xb=Eb.length,Cb=Eb.map(sb),Jb=ob(Eb),ac=0,Kc=0,
vc=[],Lc=[];for(Eb=0;Eb<xb;++Eb){var Zc=Jb[Eb];ac<Kc?(ac+=Cb[Zc],vc.push(Zc)):(Kc+=Cb[Zc],Lc.push(Zc))}return Lc.reverse().concat(vc)};q.stackOrderNone=eb;q.stackOrderReverse=function(Eb){return eb(Eb).reverse()};q.symbol=function(){function Eb(){var ac;Jb||(Jb=ac=n.path());xb.apply(this,arguments).draw(Jb,+Cb.apply(this,arguments));if(ac)return Jb=null,ac+""||null}var xb=p(Va),Cb=p(64),Jb=null;Eb.type=function(ac){return arguments.length?(xb="function"===typeof ac?ac:p(ac),Eb):xb};Eb.size=function(ac){return arguments.length?
(Cb="function"===typeof ac?ac:p(+ac),Eb):Cb};Eb.context=function(ac){return arguments.length?(Jb=null==ac?null:ac,Eb):Jb};return Eb};q.symbolCircle=Va;q.symbolCross=gb;q.symbolDiamond=Sa;q.symbolSquare=Hb;q.symbolStar=lb;q.symbolTriangle=lc;q.symbolWye=ed;q.symbols=Pc;Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-path":163}],166:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F,b("d3-time")):(q=q||self,n(q.d3=q.d3||{},q.d3))})(this,function(q,n){function p(Sa){if(0<=
Sa.y&&100>Sa.y){var lb=new Date(-1,Sa.m,Sa.d,Sa.H,Sa.M,Sa.S,Sa.L);lb.setFullYear(Sa.y);return lb}return new Date(Sa.y,Sa.m,Sa.d,Sa.H,Sa.M,Sa.S,Sa.L)}function h(Sa){if(0<=Sa.y&&100>Sa.y){var lb=new Date(Date.UTC(-1,Sa.m,Sa.d,Sa.H,Sa.M,Sa.S,Sa.L));lb.setUTCFullYear(Sa.y);return lb}return new Date(Date.UTC(Sa.y,Sa.m,Sa.d,Sa.H,Sa.M,Sa.S,Sa.L))}function a(Sa,lb,rb){return{y:Sa,m:lb,d:rb,H:0,M:0,S:0,L:0}}function f(Sa){function lb(bc,Eb){return function(xb){var Cb=[],Jb=-1,ac=0,Kc=bc.length,vc,Lc;for(xb instanceof
Date||(xb=new Date(+xb));++Jb<Kc;)if(37===bc.charCodeAt(Jb)){Cb.push(bc.slice(ac,Jb));null!=(ac=$a[vc=bc.charAt(++Jb)])?vc=bc.charAt(++Jb):ac="e"===vc?" ":"0";if(Lc=Eb[vc])vc=Lc(xb,ac);Cb.push(vc);ac=Jb+1}Cb.push(bc.slice(ac,Jb));return Cb.join("")}}function rb(bc,Eb){return function(xb){var Cb=a(1900,void 0,1);if(yb(Cb,bc,xb+="",0)!=xb.length)return null;if("Q"in Cb)return new Date(Cb.Q);if("s"in Cb)return new Date(1E3*Cb.s+("L"in Cb?Cb.L:0));!Eb||"Z"in Cb||(Cb.Z=0);"p"in Cb&&(Cb.H=Cb.H%12+12*Cb.p);
void 0===Cb.m&&(Cb.m="q"in Cb?Cb.q:0);if("V"in Cb){if(1>Cb.V||53<Cb.V)return null;"w"in Cb||(Cb.w=1);if("Z"in Cb){xb=h(a(Cb.y,0,1));var Jb=xb.getUTCDay();xb=4<Jb||0===Jb?n.utcMonday.ceil(xb):n.utcMonday(xb);xb=n.utcDay.offset(xb,7*(Cb.V-1));Cb.y=xb.getUTCFullYear();Cb.m=xb.getUTCMonth();Cb.d=xb.getUTCDate()+(Cb.w+6)%7}else xb=p(a(Cb.y,0,1)),Jb=xb.getDay(),xb=4<Jb||0===Jb?n.timeMonday.ceil(xb):n.timeMonday(xb),xb=n.timeDay.offset(xb,7*(Cb.V-1)),Cb.y=xb.getFullYear(),Cb.m=xb.getMonth(),Cb.d=xb.getDate()+
(Cb.w+6)%7}else if("W"in Cb||"U"in Cb)"w"in Cb||(Cb.w="u"in Cb?Cb.u%7:"W"in Cb?1:0),Jb="Z"in Cb?h(a(Cb.y,0,1)).getUTCDay():p(a(Cb.y,0,1)).getDay(),Cb.m=0,Cb.d="W"in Cb?(Cb.w+6)%7+7*Cb.W-(Jb+5)%7:Cb.w+7*Cb.U-(Jb+6)%7;return"Z"in Cb?(Cb.H+=Cb.Z/100|0,Cb.M+=Cb.Z%100,h(Cb)):p(Cb)}}function yb(bc,Eb,xb,Cb){for(var Jb=0,ac=Eb.length,Kc=xb.length,vc;Jb<ac;){if(Cb>=Kc)return-1;vc=Eb.charCodeAt(Jb++);if(37===vc){if(vc=Eb.charAt(Jb++),vc=$b[vc in $a?Eb.charAt(Jb++):vc],!vc||0>(Cb=vc(bc,xb,Cb)))return-1}else if(vc!=
xb.charCodeAt(Cb++))return-1}return Cb}var Hb=Sa.dateTime,Vb=Sa.date,lc=Sa.time,Ac=Sa.periods,ad=Sa.days,Nc=Sa.shortDays,ed=Sa.months,Pc=Sa.shortMonths,sd=k(Ac),Db=c(Ac),Yb=k(ad),Fc=c(ad),mc=k(Nc),qc=c(Nc),rc=k(ed),wb=c(ed),zb=k(Pc),fc=c(Pc),zc={a:function(bc){return Nc[bc.getDay()]},A:function(bc){return ad[bc.getDay()]},b:function(bc){return Pc[bc.getMonth()]},B:function(bc){return ed[bc.getMonth()]},c:null,d:N,e:N,f:V,H:O,I:Q,j:P,L:T,m:aa,M:ba,p:function(bc){return Ac[+(12<=bc.getHours())]},q:function(bc){return 1+
~~(bc.getMonth()/3)},Q:Xa,s:pb,S:Y,u:ea,U:da,V:ca,w:la,W:pa,x:null,X:null,y:qa,Y:oa,Z:ka,"%":Qa},Gc={a:function(bc){return Nc[bc.getUTCDay()]},A:function(bc){return ad[bc.getUTCDay()]},b:function(bc){return Pc[bc.getUTCMonth()]},B:function(bc){return ed[bc.getUTCMonth()]},c:null,d:ra,e:ra,f:ya,H:ha,I:ma,j:wa,L:na,m:Fa,M:Ha,p:function(bc){return Ac[+(12<=bc.getUTCHours())]},q:function(bc){return 1+~~(bc.getUTCMonth()/3)},Q:Xa,s:pb,S:eb,u:hb,U:ob,V:ib,w:Pa,W:sb,x:null,X:null,y:tb,Y:Aa,Z:Ka,"%":Qa},
$b={a:function(bc,Eb,xb){return(Eb=mc.exec(Eb.slice(xb)))?(bc.w=qc[Eb[0].toLowerCase()],xb+Eb[0].length):-1},A:function(bc,Eb,xb){return(Eb=Yb.exec(Eb.slice(xb)))?(bc.w=Fc[Eb[0].toLowerCase()],xb+Eb[0].length):-1},b:function(bc,Eb,xb){return(Eb=zb.exec(Eb.slice(xb)))?(bc.m=fc[Eb[0].toLowerCase()],xb+Eb[0].length):-1},B:function(bc,Eb,xb){return(Eb=rc.exec(Eb.slice(xb)))?(bc.m=wb[Eb[0].toLowerCase()],xb+Eb[0].length):-1},c:function(bc,Eb,xb){return yb(bc,Hb,Eb,xb)},d:A,e:A,f:J,H:t,I:t,j:B,L:I,m:x,
M:G,p:function(bc,Eb,xb){return(Eb=sd.exec(Eb.slice(xb)))?(bc.p=Db[Eb[0].toLowerCase()],xb+Eb[0].length):-1},q:C,Q:E,s:K,S:H,u:g,U:m,V:r,w:e,W:u,x:function(bc,Eb,xb){return yb(bc,Vb,Eb,xb)},X:function(bc,Eb,xb){return yb(bc,lc,Eb,xb)},y:w,Y:v,Z:D,"%":L};zc.x=lb(Vb,zc);zc.X=lb(lc,zc);zc.c=lb(Hb,zc);Gc.x=lb(Vb,Gc);Gc.X=lb(lc,Gc);Gc.c=lb(Hb,Gc);return{format:function(bc){var Eb=lb(bc+="",zc);Eb.toString=function(){return bc};return Eb},parse:function(bc){var Eb=rb(bc+="",!1);Eb.toString=function(){return bc};
return Eb},utcFormat:function(bc){var Eb=lb(bc+="",Gc);Eb.toString=function(){return bc};return Eb},utcParse:function(bc){var Eb=rb(bc+="",!0);Eb.toString=function(){return bc};return Eb}}}function d(Sa,lb,rb){var yb=0>Sa?"-":"";Sa=(yb?-Sa:Sa)+"";var Hb=Sa.length;return yb+(Hb<rb?Array(rb-Hb+1).join(lb)+Sa:Sa)}function l(Sa){return Sa.replace(Va,"\\$\x26")}function k(Sa){return new RegExp("^(?:"+Sa.map(l).join("|")+")","i")}function c(Sa){for(var lb={},rb=-1,yb=Sa.length;++rb<yb;)lb[Sa[rb].toLowerCase()]=
rb;return lb}function e(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+1)))?(Sa.w=+lb[0],rb+lb[0].length):-1}function g(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+1)))?(Sa.u=+lb[0],rb+lb[0].length):-1}function m(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+2)))?(Sa.U=+lb[0],rb+lb[0].length):-1}function r(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+2)))?(Sa.V=+lb[0],rb+lb[0].length):-1}function u(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+2)))?(Sa.W=+lb[0],rb+lb[0].length):-1}function v(Sa,lb,rb){return(lb=
xa.exec(lb.slice(rb,rb+4)))?(Sa.y=+lb[0],rb+lb[0].length):-1}function w(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+2)))?(Sa.y=+lb[0]+(68<+lb[0]?1900:2E3),rb+lb[0].length):-1}function D(Sa,lb,rb){return(lb=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(lb.slice(rb,rb+6)))?(Sa.Z=lb[1]?0:-(lb[2]+(lb[3]||"00")),rb+lb[0].length):-1}function C(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+1)))?(Sa.q=3*lb[0]-3,rb+lb[0].length):-1}function x(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+2)))?(Sa.m=lb[0]-1,rb+lb[0].length):
-1}function A(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+2)))?(Sa.d=+lb[0],rb+lb[0].length):-1}function B(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+3)))?(Sa.m=0,Sa.d=+lb[0],rb+lb[0].length):-1}function t(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+2)))?(Sa.H=+lb[0],rb+lb[0].length):-1}function G(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+2)))?(Sa.M=+lb[0],rb+lb[0].length):-1}function H(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+2)))?(Sa.S=+lb[0],rb+lb[0].length):-1}function I(Sa,lb,rb){return(lb=
xa.exec(lb.slice(rb,rb+3)))?(Sa.L=+lb[0],rb+lb[0].length):-1}function J(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb,rb+6)))?(Sa.L=Math.floor(lb[0]/1E3),rb+lb[0].length):-1}function L(Sa,lb,rb){return(Sa=Ga.exec(lb.slice(rb,rb+1)))?rb+Sa[0].length:-1}function E(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb)))?(Sa.Q=+lb[0],rb+lb[0].length):-1}function K(Sa,lb,rb){return(lb=xa.exec(lb.slice(rb)))?(Sa.s=+lb[0],rb+lb[0].length):-1}function N(Sa,lb){return d(Sa.getDate(),lb,2)}function O(Sa,lb){return d(Sa.getHours(),
lb,2)}function Q(Sa,lb){return d(Sa.getHours()%12||12,lb,2)}function P(Sa,lb){return d(1+n.timeDay.count(n.timeYear(Sa),Sa),lb,3)}function T(Sa,lb){return d(Sa.getMilliseconds(),lb,3)}function V(Sa,lb){return T(Sa,lb)+"000"}function aa(Sa,lb){return d(Sa.getMonth()+1,lb,2)}function ba(Sa,lb){return d(Sa.getMinutes(),lb,2)}function Y(Sa,lb){return d(Sa.getSeconds(),lb,2)}function ea(Sa){Sa=Sa.getDay();return 0===Sa?7:Sa}function da(Sa,lb){return d(n.timeSunday.count(n.timeYear(Sa)-1,Sa),lb,2)}function ca(Sa,
lb){var rb=Sa.getDay();Sa=4<=rb||0===rb?n.timeThursday(Sa):n.timeThursday.ceil(Sa);return d(n.timeThursday.count(n.timeYear(Sa),Sa)+(4===n.timeYear(Sa).getDay()),lb,2)}function la(Sa){return Sa.getDay()}function pa(Sa,lb){return d(n.timeMonday.count(n.timeYear(Sa)-1,Sa),lb,2)}function qa(Sa,lb){return d(Sa.getFullYear()%100,lb,2)}function oa(Sa,lb){return d(Sa.getFullYear()%1E4,lb,4)}function ka(Sa){Sa=Sa.getTimezoneOffset();return(0<Sa?"-":(Sa*=-1,"+"))+d(Sa/60|0,"0",2)+d(Sa%60,"0",2)}function ra(Sa,
lb){return d(Sa.getUTCDate(),lb,2)}function ha(Sa,lb){return d(Sa.getUTCHours(),lb,2)}function ma(Sa,lb){return d(Sa.getUTCHours()%12||12,lb,2)}function wa(Sa,lb){return d(1+n.utcDay.count(n.utcYear(Sa),Sa),lb,3)}function na(Sa,lb){return d(Sa.getUTCMilliseconds(),lb,3)}function ya(Sa,lb){return na(Sa,lb)+"000"}function Fa(Sa,lb){return d(Sa.getUTCMonth()+1,lb,2)}function Ha(Sa,lb){return d(Sa.getUTCMinutes(),lb,2)}function eb(Sa,lb){return d(Sa.getUTCSeconds(),lb,2)}function hb(Sa){Sa=Sa.getUTCDay();
return 0===Sa?7:Sa}function ob(Sa,lb){return d(n.utcSunday.count(n.utcYear(Sa)-1,Sa),lb,2)}function ib(Sa,lb){var rb=Sa.getUTCDay();Sa=4<=rb||0===rb?n.utcThursday(Sa):n.utcThursday.ceil(Sa);return d(n.utcThursday.count(n.utcYear(Sa),Sa)+(4===n.utcYear(Sa).getUTCDay()),lb,2)}function Pa(Sa){return Sa.getUTCDay()}function sb(Sa,lb){return d(n.utcMonday.count(n.utcYear(Sa)-1,Sa),lb,2)}function tb(Sa,lb){return d(Sa.getUTCFullYear()%100,lb,2)}function Aa(Sa,lb){return d(Sa.getUTCFullYear()%1E4,lb,4)}
function Ka(){return"+0000"}function Qa(){return"%"}function Xa(Sa){return+Sa}function pb(Sa){return Math.floor(+Sa/1E3)}function db(Sa){gb=f(Sa);q.timeFormat=gb.format;q.timeParse=gb.parse;q.utcFormat=gb.utcFormat;q.utcParse=gb.utcParse;return gb}function Ia(Sa){return Sa.toISOString()}function Ua(Sa){Sa=new Date(Sa);return isNaN(Sa)?null:Sa}var $a={"-":"",_:" ",0:"0"},xa=/^\s*\d+/,Ga=/^%/,Va=/[\\^$*+?|[\]().{}]/g,gb;db({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],
days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var Ma=Date.prototype.toISOString?Ia:q.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),cb=+new Date("2000-01-01T00:00:00.000Z")?Ua:q.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");q.isoFormat=Ma;q.isoParse=cb;q.timeFormatDefaultLocale=
db;q.timeFormatLocale=f;Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-time":167}],167:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(ib,Pa,sb,tb){function Aa(Ka){return ib(Ka=0===arguments.length?new Date:new Date(+Ka)),Ka}Aa.floor=function(Ka){return ib(Ka=new Date(+Ka)),Ka};Aa.ceil=function(Ka){return ib(Ka=new Date(Ka-1)),Pa(Ka,1),ib(Ka),Ka};Aa.round=function(Ka){var Qa=Aa(Ka),Xa=Aa.ceil(Ka);
return Ka-Qa<Xa-Ka?Qa:Xa};Aa.offset=function(Ka,Qa){return Pa(Ka=new Date(+Ka),null==Qa?1:Math.floor(Qa)),Ka};Aa.range=function(Ka,Qa,Xa){var pb=[],db;Ka=Aa.ceil(Ka);Xa=null==Xa?1:Math.floor(Xa);if(!(Ka<Qa&&0<Xa))return pb;do pb.push(db=new Date(+Ka)),Pa(Ka,Xa),ib(Ka);while(db<Ka&&Ka<Qa);return pb};Aa.filter=function(Ka){return n(function(Qa){if(Qa>=Qa)for(;ib(Qa),!Ka(Qa);)Qa.setTime(Qa-1)},function(Qa,Xa){if(Qa>=Qa)if(0>Xa)for(;0>=++Xa;)for(;Pa(Qa,-1),!Ka(Qa););else for(;0<=--Xa;)for(;Pa(Qa,1),!Ka(Qa););
})};sb&&(Aa.count=function(Ka,Qa){a.setTime(+Ka);f.setTime(+Qa);ib(a);ib(f);return Math.floor(sb(a,f))},Aa.every=function(Ka){Ka=Math.floor(Ka);return isFinite(Ka)&&0<Ka?1<Ka?Aa.filter(tb?function(Qa){return 0===tb(Qa)%Ka}:function(Qa){return 0===Aa.count(0,Qa)%Ka}):Aa:null});return Aa}function p(ib){return n(function(Pa){Pa.setDate(Pa.getDate()-(Pa.getDay()+7-ib)%7);Pa.setHours(0,0,0,0)},function(Pa,sb){Pa.setDate(Pa.getDate()+7*sb)},function(Pa,sb){return(sb-Pa-6E4*(sb.getTimezoneOffset()-Pa.getTimezoneOffset()))/
6048E5})}function h(ib){return n(function(Pa){Pa.setUTCDate(Pa.getUTCDate()-(Pa.getUTCDay()+7-ib)%7);Pa.setUTCHours(0,0,0,0)},function(Pa,sb){Pa.setUTCDate(Pa.getUTCDate()+7*sb)},function(Pa,sb){return(sb-Pa)/6048E5})}var a=new Date,f=new Date,d=n(function(){},function(ib,Pa){ib.setTime(+ib+Pa)},function(ib,Pa){return Pa-ib});d.every=function(ib){ib=Math.floor(ib);return isFinite(ib)&&0<ib?1<ib?n(function(Pa){Pa.setTime(Math.floor(Pa/ib)*ib)},function(Pa,sb){Pa.setTime(+Pa+sb*ib)},function(Pa,sb){return(sb-
Pa)/ib}):d:null};var l=d.range,k=n(function(ib){ib.setTime(ib-ib.getMilliseconds())},function(ib,Pa){ib.setTime(+ib+1E3*Pa)},function(ib,Pa){return(Pa-ib)/1E3},function(ib){return ib.getUTCSeconds()}),c=k.range,e=n(function(ib){ib.setTime(ib-ib.getMilliseconds()-1E3*ib.getSeconds())},function(ib,Pa){ib.setTime(+ib+6E4*Pa)},function(ib,Pa){return(Pa-ib)/6E4},function(ib){return ib.getMinutes()}),g=e.range,m=n(function(ib){ib.setTime(ib-ib.getMilliseconds()-1E3*ib.getSeconds()-6E4*ib.getMinutes())},
function(ib,Pa){ib.setTime(+ib+36E5*Pa)},function(ib,Pa){return(Pa-ib)/36E5},function(ib){return ib.getHours()}),r=m.range,u=n(function(ib){ib.setHours(0,0,0,0)},function(ib,Pa){ib.setDate(ib.getDate()+Pa)},function(ib,Pa){return(Pa-ib-6E4*(Pa.getTimezoneOffset()-ib.getTimezoneOffset()))/864E5},function(ib){return ib.getDate()-1}),v=u.range,w=p(0),D=p(1),C=p(2),x=p(3),A=p(4),B=p(5),t=p(6),G=w.range,H=D.range,I=C.range,J=x.range,L=A.range,E=B.range,K=t.range,N=n(function(ib){ib.setDate(1);ib.setHours(0,
0,0,0)},function(ib,Pa){ib.setMonth(ib.getMonth()+Pa)},function(ib,Pa){return Pa.getMonth()-ib.getMonth()+12*(Pa.getFullYear()-ib.getFullYear())},function(ib){return ib.getMonth()}),O=N.range,Q=n(function(ib){ib.setMonth(0,1);ib.setHours(0,0,0,0)},function(ib,Pa){ib.setFullYear(ib.getFullYear()+Pa)},function(ib,Pa){return Pa.getFullYear()-ib.getFullYear()},function(ib){return ib.getFullYear()});Q.every=function(ib){return isFinite(ib=Math.floor(ib))&&0<ib?n(function(Pa){Pa.setFullYear(Math.floor(Pa.getFullYear()/
ib)*ib);Pa.setMonth(0,1);Pa.setHours(0,0,0,0)},function(Pa,sb){Pa.setFullYear(Pa.getFullYear()+sb*ib)}):null};var P=Q.range,T=n(function(ib){ib.setUTCSeconds(0,0)},function(ib,Pa){ib.setTime(+ib+6E4*Pa)},function(ib,Pa){return(Pa-ib)/6E4},function(ib){return ib.getUTCMinutes()}),V=T.range,aa=n(function(ib){ib.setUTCMinutes(0,0,0)},function(ib,Pa){ib.setTime(+ib+36E5*Pa)},function(ib,Pa){return(Pa-ib)/36E5},function(ib){return ib.getUTCHours()}),ba=aa.range,Y=n(function(ib){ib.setUTCHours(0,0,0,0)},
function(ib,Pa){ib.setUTCDate(ib.getUTCDate()+Pa)},function(ib,Pa){return(Pa-ib)/864E5},function(ib){return ib.getUTCDate()-1}),ea=Y.range,da=h(0),ca=h(1),la=h(2),pa=h(3),qa=h(4),oa=h(5),ka=h(6),ra=da.range,ha=ca.range,ma=la.range,wa=pa.range,na=qa.range,ya=oa.range,Fa=ka.range,Ha=n(function(ib){ib.setUTCDate(1);ib.setUTCHours(0,0,0,0)},function(ib,Pa){ib.setUTCMonth(ib.getUTCMonth()+Pa)},function(ib,Pa){return Pa.getUTCMonth()-ib.getUTCMonth()+12*(Pa.getUTCFullYear()-ib.getUTCFullYear())},function(ib){return ib.getUTCMonth()}),
eb=Ha.range,hb=n(function(ib){ib.setUTCMonth(0,1);ib.setUTCHours(0,0,0,0)},function(ib,Pa){ib.setUTCFullYear(ib.getUTCFullYear()+Pa)},function(ib,Pa){return Pa.getUTCFullYear()-ib.getUTCFullYear()},function(ib){return ib.getUTCFullYear()});hb.every=function(ib){return isFinite(ib=Math.floor(ib))&&0<ib?n(function(Pa){Pa.setUTCFullYear(Math.floor(Pa.getUTCFullYear()/ib)*ib);Pa.setUTCMonth(0,1);Pa.setUTCHours(0,0,0,0)},function(Pa,sb){Pa.setUTCFullYear(Pa.getUTCFullYear()+sb*ib)}):null};var ob=hb.range;
q.timeDay=u;q.timeDays=v;q.timeFriday=B;q.timeFridays=E;q.timeHour=m;q.timeHours=r;q.timeInterval=n;q.timeMillisecond=d;q.timeMilliseconds=l;q.timeMinute=e;q.timeMinutes=g;q.timeMonday=D;q.timeMondays=H;q.timeMonth=N;q.timeMonths=O;q.timeSaturday=t;q.timeSaturdays=K;q.timeSecond=k;q.timeSeconds=c;q.timeSunday=w;q.timeSundays=G;q.timeThursday=A;q.timeThursdays=L;q.timeTuesday=C;q.timeTuesdays=I;q.timeWednesday=x;q.timeWednesdays=J;q.timeWeek=w;q.timeWeeks=G;q.timeYear=Q;q.timeYears=P;q.utcDay=Y;q.utcDays=
ea;q.utcFriday=oa;q.utcFridays=ya;q.utcHour=aa;q.utcHours=ba;q.utcMillisecond=d;q.utcMilliseconds=l;q.utcMinute=T;q.utcMinutes=V;q.utcMonday=ca;q.utcMondays=ha;q.utcMonth=Ha;q.utcMonths=eb;q.utcSaturday=ka;q.utcSaturdays=Fa;q.utcSecond=k;q.utcSeconds=c;q.utcSunday=da;q.utcSundays=ra;q.utcThursday=qa;q.utcThursdays=na;q.utcTuesday=la;q.utcTuesdays=ma;q.utcWednesday=pa;q.utcWednesdays=wa;q.utcWeek=da;q.utcWeeks=ra;q.utcYear=hb;q.utcYears=ob;Object.defineProperty(q,"__esModule",{value:!0})})},{}],168:[function(b,
y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(){return v||(C(p),v=D.now()+w)}function p(){v=0}function h(){this._call=this._time=this._next=null}function a(x,A,B){var t=new h;t.restart(x,A,B);return t}function f(){n();++c;for(var x=m,A;x;)0<=(A=v-x._time)&&x._call.call(null,A),x=x._next;--c}function d(){v=(u=D.now())+w;c=e=0;try{f()}finally{c=0;for(var x,A=m,B,t=Infinity;A;)A._call?(t>A._time&&(t=A._time),x=A,A=A._next):
(B=A._next,A._next=null,A=x?x._next=B:m=B);r=x;k(t);v=0}}function l(){var x=D.now(),A=x-u;1E3<A&&(w-=A,u=x)}function k(x){c||(e&&(e=clearTimeout(e)),24<x-v?(Infinity>x&&(e=setTimeout(d,x-D.now()-w)),g&&(g=clearInterval(g))):(g||(u=D.now(),g=setInterval(l,1E3)),c=1,C(d)))}var c=0,e=0,g=0,m,r,u=0,v=0,w=0,D="object"===typeof performance&&performance.now?performance:Date,C="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(x){setTimeout(x,17)};h.prototype=
a.prototype={constructor:h,restart:function(x,A,B){if("function"!==typeof x)throw new TypeError("callback is not a function");B=(null==B?n():+B)+(null==A?0:+A);this._next||r===this||(r?r._next=this:m=this,r=this);this._call=x;this._time=B;k()},stop:function(){this._call&&(this._call=null,this._time=Infinity,k())}};q.interval=function(x,A,B){var t=new h,G=A;if(null==A)return t.restart(x,A,B),t;A=+A;B=null==B?n():+B;t.restart(function J(I){I+=G;t.restart(J,G+=A,B);x(I)},A,B);return t};q.now=n;q.timeout=
function(x,A,B){var t=new h;A=null==A?0:+A;t.restart(function(G){t.stop();x(G+A)},A,B);return t};q.timer=a;q.timerFlush=f;Object.defineProperty(q,"__esModule",{value:!0})})},{}],169:[function(b,y,F){!function(){function q(R){return R&&(R.ownerDocument&&R.ownerDocument.defaultView||R.document&&R||R.defaultView)}function n(R,ja){return R<ja?-1:R>ja?1:R>=ja?0:NaN}function p(R){return null===R?NaN:+R}function h(R){return!isNaN(R)}function a(R){return{left:function(ja,ua,Ca,Ea){3>arguments.length&&(Ca=
0);4>arguments.length&&(Ea=ja.length);for(;Ca<Ea;){var Ja=Ca+Ea>>>1;0>R(ja[Ja],ua)?Ca=Ja+1:Ea=Ja}return Ca},right:function(ja,ua,Ca,Ea){3>arguments.length&&(Ca=0);4>arguments.length&&(Ea=ja.length);for(;Ca<Ea;){var Ja=Ca+Ea>>>1;0<R(ja[Ja],ua)?Ea=Ja:Ca=Ja+1}return Ca}}}function f(R){return R.length}function d(R,ja){for(var ua in ja)Object.defineProperty(R.prototype,ua,{value:ja[ua],enumerable:!1})}function l(){this._=Object.create(null)}function k(R){return"__proto__"===(R+="")||"\x00"===R[0]?"\x00"+
R:R}function c(R){return"\x00"===(R+="")[0]?R.slice(1):R}function e(R){return k(R)in this._}function g(R){return(R=k(R))in this._&&delete this._[R]}function m(){var R=[],ja;for(ja in this._)R.push(c(ja));return R}function r(){var R=0,ja;for(ja in this._)++R;return R}function u(){for(var R in this._)return!1;return!0}function v(){this._=Object.create(null)}function w(R){return R}function D(R,ja,ua){return function(){var Ca=ua.apply(ja,arguments);return Ca===ja?R:Ca}}function C(R,ja){if(ja in R)return ja;
ja=ja.charAt(0).toUpperCase()+ja.slice(1);for(var ua=0,Ca=Td.length;ua<Ca;++ua){var Ea=Td[ua]+ja;if(Ea in R)return Ea}}function x(){}function A(){}function B(R){function ja(){for(var Ea=ua,Ja=-1,Za=Ea.length,Ta;++Ja<Za;)(Ta=Ea[Ja].on)&&Ta.apply(this,arguments);return R}var ua=[],Ca=new l;ja.on=function(Ea,Ja){var Za=Ca.get(Ea),Ta;if(2>arguments.length)return Za&&Za.on;Za&&(Za.on=null,ua=ua.slice(0,Ta=ua.indexOf(Za)).concat(ua.slice(Ta+1)),Ca.remove(Ea));Ja&&ua.push(Ca.set(Ea,{on:Ja}));return R};return ja}
function t(){Rb.event.preventDefault()}function G(){for(var R=Rb.event,ja;ja=R.sourceEvent;)R=ja;return R}function H(R){for(var ja=new A,ua=0,Ca=arguments.length;++ua<Ca;)ja[arguments[ua]]=B(ja);ja.of=function(Ea,Ja){return function(Za){try{var Ta=Za.sourceEvent=Rb.event;Za.target=R;Rb.event=Za;ja[Za.type].apply(Ea,Ja)}finally{Rb.event=Ta}}};return ja}function I(R){Le(R,Re);return R}function J(R){return"function"===typeof R?R:function(){return sf(R,this)}}function L(R){return"function"===typeof R?
R:function(){return Tf(R,this)}}function E(R,ja){function ua(){this.removeAttribute(R)}function Ca(){this.removeAttributeNS(R.space,R.local)}function Ea(){this.setAttribute(R,ja)}function Ja(){this.setAttributeNS(R.space,R.local,ja)}function Za(){var Ya=ja.apply(this,arguments);null==Ya?this.removeAttribute(R):this.setAttribute(R,Ya)}function Ta(){var Ya=ja.apply(this,arguments);null==Ya?this.removeAttributeNS(R.space,R.local):this.setAttributeNS(R.space,R.local,Ya)}R=Rb.ns.qualify(R);return null==
ja?R.local?Ca:ua:"function"===typeof ja?R.local?Ta:Za:R.local?Ja:Ea}function K(R){return new RegExp("(?:^|\\s+)"+Rb.requote(R)+"(?:\\s+|$)","g")}function N(R,ja){function ua(){for(var Ja=-1;++Ja<Ea;)R[Ja](this,ja)}function Ca(){for(var Ja=-1,Za=ja.apply(this,arguments);++Ja<Ea;)R[Ja](this,Za)}R=(R+"").trim().split(/^|\s+/).map(O);var Ea=R.length;return"function"===typeof ja?Ca:ua}function O(R){var ja=K(R);return function(ua,Ca){if(Ea=ua.classList)return Ca?Ea.add(R):Ea.remove(R);var Ea=ua.getAttribute("class")||
"";Ca?(ja.lastIndex=0,ja.test(Ea)||ua.setAttribute("class",(Ea+" "+R).trim().replace(/\s+/g," "))):ua.setAttribute("class",Ea.replace(ja," ").trim().replace(/\s+/g," "))}}function Q(R,ja,ua){function Ca(){this.style.removeProperty(R)}function Ea(){this.style.setProperty(R,ja,ua)}function Ja(){var Za=ja.apply(this,arguments);null==Za?this.style.removeProperty(R):this.style.setProperty(R,Za,ua)}return null==ja?Ca:"function"===typeof ja?Ja:Ea}function P(R,ja){function ua(){delete this[R]}function Ca(){this[R]=
ja}function Ea(){var Ja=ja.apply(this,arguments);null==Ja?delete this[R]:this[R]=Ja}return null==ja?ua:"function"===typeof ja?Ea:Ca}function T(R){function ja(){var Ca=this.ownerDocument,Ea=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===Ea&&"http://www.w3.org/1999/xhtml"===Ca.documentElement.namespaceURI?Ca.createElement(R):Ca.createElementNS(Ea,R)}function ua(){return this.ownerDocument.createElementNS(R.space,R.local)}return"function"===typeof R?R:(R=Rb.ns.qualify(R)).local?ua:ja}function V(){var R=
this.parentNode;R&&R.removeChild(this)}function aa(R){return function(){return Og(this,R)}}function ba(R){arguments.length||(R=n);return function(ja,ua){return ja&&ua?R(ja.__data__,ua.__data__):!ja-!ua}}function Y(R,ja){for(var ua=0,Ca=R.length;ua<Ca;ua++)for(var Ea=R[ua],Ja=0,Za=Ea.length,Ta;Ja<Za;Ja++)(Ta=Ea[Ja])&&ja(Ta,Ja,ua);return R}function ea(R){Le(R,tg);return R}function da(R){var ja,ua;return function(Ca,Ea,Ja){Ca=R[Ja].update;var Za=Ca.length;Ja!=ua&&(ua=Ja,ja=0);for(Ea>=ja&&(ja=Ea+1);!(Ea=
Ca[ja])&&++ja<Za;);return Ea}}function ca(R,ja,ua){function Ca(){var ub=this[Za];ub&&(this.removeEventListener(R,ub,ub.$),delete this[Za])}function Ea(){var ub=Ya(ja,fg(arguments));Ca.call(this);this.addEventListener(R,this[Za]=ub,ub.$=ua);ub._=ja}function Ja(){var ub=new RegExp("^__on([^.]+)"+Rb.requote(R)+"$"),Fb,Lb;for(Lb in this)if(Fb=Lb.match(ub)){var Tb=this[Lb];this.removeEventListener(Fb[1],Tb,Tb.$);delete this[Lb]}}var Za="__on"+R,Ta=R.indexOf("."),Ya=la;0<Ta&&(R=R.slice(0,Ta));var jb=Hh.get(R);
jb&&(R=jb,Ya=pa);return Ta?ja?Ea:Ca:ja?x:Ja}function la(R,ja){return function(ua){var Ca=Rb.event;Rb.event=ua;ja[0]=this.__data__;try{R.apply(this,ja)}finally{Rb.event=Ca}}}function pa(R,ja){var ua=la(R,ja);return function(Ca){var Ea=Ca.relatedTarget;Ea&&(Ea===this||Ea.compareDocumentPosition(this)&8)||ua.call(this,Ca)}}function qa(R){var ja=".dragsuppress-"+ ++ug,ua="click"+ja,Ca=Rb.select(q(R)).on("touchmove"+ja,t).on("dragstart"+ja,t).on("selectstart"+ja,t);null==Jf&&(Jf="onselectstart"in R?!1:
C(R.style,"userSelect"));if(Jf){var Ea=(R&&(R.ownerDocument||R.document||R).documentElement).style,Ja=Ea[Jf];Ea[Jf]="none"}return function(Za){Ca.on(ja,null);Jf&&(Ea[Jf]=Ja);if(Za){var Ta=function(){Ca.on(ua,null)};Ca.on(ua,function(){t();Ta()},!0);setTimeout(Ta,0)}}}function oa(R,ja){ja.changedTouches&&(ja=ja.changedTouches[0]);var ua=R.ownerSVGElement||R;if(ua.createSVGPoint){var Ca=ua.createSVGPoint();if(0>Pg&&(ua=q(R),ua.scrollX||ua.scrollY)){ua=Rb.select("body").append("svg").style({position:"absolute",
top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ea=ua[0][0].getScreenCTM();Pg=!(Ea.f||Ea.e);ua.remove()}Pg?(Ca.x=ja.pageX,Ca.y=ja.pageY):(Ca.x=ja.clientX,Ca.y=ja.clientY);Ca=Ca.matrixTransform(R.getScreenCTM().inverse());return[Ca.x,Ca.y]}Ca=R.getBoundingClientRect();return[ja.clientX-Ca.left-R.clientLeft,ja.clientY-Ca.top-R.clientTop]}function ka(){return Rb.event.changedTouches[0].identifier}function ra(R,ja,ua){return(ja[0]-R[0])*(ua[1]-R[1])-(ja[1]-R[1])*(ua[0]-R[0])}function ha(R){return 1<
R?0:-1>R?ie:Math.acos(R)}function ma(R){return 1<R?yf:-1>R?-yf:Math.asin(R)}function wa(R){return((R=Math.exp(R))+1/R)/2}function na(R){return(R=Math.sin(R/2))*R}function ya(){}function Fa(R,ja,ua){return this instanceof Fa?void(this.h=+R,this.s=+ja,this.l=+ua):2>arguments.length?R instanceof Fa?new Fa(R.h,R.s,R.l):pb(""+R,db,Fa):new Fa(R,ja,ua)}function Ha(R,ja,ua){function Ca(Za){360<Za?Za-=360:0>Za&&(Za+=360);return 60>Za?Ja+(Ea-Ja)*Za/60:180>Za?Ea:240>Za?Ja+(Ea-Ja)*(240-Za)/60:Ja}R=isNaN(R)?0:
0>(R%=360)?R+360:R;ja=isNaN(ja)?0:0>ja?0:1<ja?1:ja;ua=0>ua?0:1<ua?1:ua;var Ea=.5>=ua?ua*(1+ja):ua+ja-ua*ja;var Ja=2*ua-Ea;return new Ka(Math.round(255*Ca(R+120)),Math.round(255*Ca(R)),Math.round(255*Ca(R-120)))}function eb(R,ja,ua){return this instanceof eb?void(this.h=+R,this.c=+ja,this.l=+ua):2>arguments.length?R instanceof eb?new eb(R.h,R.c,R.l):R instanceof ob?Pa(R.l,R.a,R.b):Pa((R=Ia((R=Rb.rgb(R)).r,R.g,R.b)).l,R.a,R.b):new eb(R,ja,ua)}function hb(R,ja,ua){isNaN(R)&&(R=0);isNaN(ja)&&(ja=0);return new ob(ua,
Math.cos(R*=ve)*ja,Math.sin(R)*ja)}function ob(R,ja,ua){return this instanceof ob?void(this.l=+R,this.a=+ja,this.b=+ua):2>arguments.length?R instanceof ob?new ob(R.l,R.a,R.b):R instanceof eb?hb(R.h,R.c,R.l):Ia((R=Ka(R)).r,R.g,R.b):new ob(R,ja,ua)}function ib(R,ja,ua){R=(R+16)/116;ua=R-ua/200;ja=sb(R+ja/500)*ik;R=sb(R)*Zd;ua=sb(ua)*jk;return new Ka(Aa(3.2404542*ja-1.5371385*R-.4985314*ua),Aa(-.969266*ja+1.8760108*R+.041556*ua),Aa(.0556434*ja-.2040259*R+1.0572252*ua))}function Pa(R,ja,ua){return 0<
R?new eb(Math.atan2(ua,ja)*jf,Math.sqrt(ja*ja+ua*ua),R):new eb(NaN,NaN,R)}function sb(R){return.206893034<R?R*R*R:(R-4/29)/7.787037}function tb(R){return.008856<R?Math.pow(R,1/3):7.787037*R+4/29}function Aa(R){return Math.round(255*(.00304>=R?12.92*R:1.055*Math.pow(R,1/2.4)-.055))}function Ka(R,ja,ua){return this instanceof Ka?void(this.r=~~R,this.g=~~ja,this.b=~~ua):2>arguments.length?R instanceof Ka?new Ka(R.r,R.g,R.b):pb(""+R,Ka,Ha):new Ka(R,ja,ua)}function Qa(R){return new Ka(R>>16,R>>8&255,R&
255)+""}function Xa(R){return 16>R?"0"+Math.max(0,R).toString(16):Math.min(255,R).toString(16)}function pb(R,ja,ua){var Ca=0,Ea=0,Ja=0,Za;if(Za=/([a-z]+)\((.*)\)/.exec(R=R.toLowerCase())){var Ta=Za[2].split(",");switch(Za[1]){case "hsl":return ua(parseFloat(Ta[0]),parseFloat(Ta[1])/100,parseFloat(Ta[2])/100);case "rgb":return ja($a(Ta[0]),$a(Ta[1]),$a(Ta[2]))}}if(ua=Nj.get(R))return ja(ua.r,ua.g,ua.b);null==R||"#"!==R.charAt(0)||isNaN(ua=parseInt(R.slice(1),16))||(4===R.length?(Ca=(ua&3840)>>4,Ca|=
Ca>>4,Ea=ua&240,Ea|=Ea>>4,Ja=ua&15,Ja|=Ja<<4):7===R.length&&(Ca=(ua&16711680)>>16,Ea=(ua&65280)>>8,Ja=ua&255));return ja(Ca,Ea,Ja)}function db(R,ja,ua){var Ca=Math.min(R/=255,ja/=255,ua/=255),Ea=Math.max(R,ja,ua),Ja=Ea-Ca,Za=(Ea+Ca)/2;Ja?(Ca=.5>Za?Ja/(Ea+Ca):Ja/(2-Ea-Ca),R=60*(R==Ea?(ja-ua)/Ja+(ja<ua?6:0):ja==Ea?(ua-R)/Ja+2:(R-ja)/Ja+4)):(R=NaN,Ca=0<Za&&1>Za?0:R);return new Fa(R,Ca,Za)}function Ia(R,ja,ua){R=Ua(R);ja=Ua(ja);ua=Ua(ua);var Ca=tb((.4124564*R+.3575761*ja+.1804375*ua)/ik),Ea=tb((.2126729*
R+.7151522*ja+.072175*ua)/Zd);R=tb((.0193339*R+.119192*ja+.9503041*ua)/jk);return ob(116*Ea-16,500*(Ca-Ea),200*(Ea-R))}function Ua(R){return.04045>=(R/=255)?R/12.92:Math.pow((R+.055)/1.055,2.4)}function $a(R){var ja=parseFloat(R);return"%"===R.charAt(R.length-1)?Math.round(2.55*ja):ja}function xa(R){return"function"===typeof R?R:function(){return R}}function Ga(R){return function(ja,ua,Ca){2===arguments.length&&"function"===typeof ua&&(Ca=ua,ua=null);return Va(ja,ua,R,Ca)}}function Va(R,ja,ua,Ca){function Ea(){var ub=
Ya.status,Fb;if(Fb=!ub)Fb=(Fb=Ya.responseType)&&"text"!==Fb?Ya.response:Ya.responseText;if(Fb||200<=ub&&300>ub||304===ub){try{var Lb=ua.call(Ja,Ya)}catch(Tb){Za.error.call(Ja,Tb);return}Za.load.call(Ja,Lb)}else Za.error.call(Ja,Ya)}var Ja={},Za=Rb.dispatch("beforesend","progress","load","error"),Ta={},Ya=new XMLHttpRequest,jb=null;!this.XDomainRequest||"withCredentials"in Ya||!/^(http(s)?:)?\/\//.test(R)||(Ya=new XDomainRequest);"onload"in Ya?Ya.onload=Ya.onerror=Ea:Ya.onreadystatechange=function(){3<
Ya.readyState&&Ea()};Ya.onprogress=function(ub){var Fb=Rb.event;Rb.event=ub;try{Za.progress.call(Ja,Ya)}finally{Rb.event=Fb}};Ja.header=function(ub,Fb){ub=(ub+"").toLowerCase();if(2>arguments.length)return Ta[ub];null==Fb?delete Ta[ub]:Ta[ub]=Fb+"";return Ja};Ja.mimeType=function(ub){if(!arguments.length)return ja;ja=null==ub?null:ub+"";return Ja};Ja.responseType=function(ub){if(!arguments.length)return jb;jb=ub;return Ja};Ja.response=function(ub){ua=ub;return Ja};["get","post"].forEach(function(ub){Ja[ub]=
function(){return Ja.send.apply(Ja,[ub].concat(fg(arguments)))}});Ja.send=function(ub,Fb,Lb){2===arguments.length&&"function"===typeof Fb&&(Lb=Fb,Fb=null);Ya.open(ub,R,!0);null==ja||"accept"in Ta||(Ta.accept=ja+",*/*");if(Ya.setRequestHeader)for(var Tb in Ta)Ya.setRequestHeader(Tb,Ta[Tb]);null!=ja&&Ya.overrideMimeType&&Ya.overrideMimeType(ja);null!=jb&&(Ya.responseType=jb);if(null!=Lb)Ja.on("error",Lb).on("load",function(Wb){Lb(null,Wb)});Za.beforesend.call(Ja,Ya);Ya.send(null==Fb?null:Fb);return Ja};
Ja.abort=function(){Ya.abort();return Ja};Rb.rebind(Ja,Za,"on");return null==Ca?Ja:Ja.get(gb(Ca))}function gb(R){return 1===R.length?function(ja,ua){R(null==ja?ua:null)}:R}function Ma(R,ja,ua){var Ca=arguments.length;2>Ca&&(ja=0);3>Ca&&(ua=Date.now());Ca={c:R,t:ua+ja,n:null};Oj?Oj.n=Ca:yj=Ca;Oj=Ca;xg||(df=clearTimeout(df),xg=1,Yi(cb));return Ca}function cb(){var R=Sa();R=lb()-R;24<R?(isFinite(R)&&(clearTimeout(df),df=setTimeout(cb,R)),xg=0):(xg=1,Yi(cb))}function Sa(){for(var R=Date.now(),ja=yj;ja;)R>=
ja.t&&ja.c(R-ja.t)&&(ja.c=null),ja=ja.n;return R}function lb(){for(var R,ja=yj,ua=Infinity;ja;)ja.c?(ja.t<ua&&(ua=ja.t),ja=(R=ja).n):ja=R?R.n=ja.n:yj=ja.n;Oj=R;return ua}function rb(R,ja){return ja-(R?Math.ceil(Math.log(R)/Math.LN10):1)}function yb(R){var ja=R.decimal,ua=R.thousands,Ca=R.grouping,Ea=R.currency,Ja=Ca&&ua?function(Za,Ta){for(var Ya=Za.length,jb=[],ub=0,Fb=Ca[0],Lb=0;0<Ya&&0<Fb;){Lb+Fb+1>Ta&&(Fb=Math.max(1,Ta-Lb));jb.push(Za.substring(Ya-=Fb,Ya+Fb));if((Lb+=Fb+1)>Ta)break;Fb=Ca[ub=(ub+
1)%Ca.length]}return jb.reverse().join(ua)}:w;return function(Za){Za=fi.exec(Za);var Ta=Za[1]||" ",Ya=Za[2]||"\x3e",jb=Za[3]||"-",ub=Za[4]||"",Fb=Za[5],Lb=+Za[6],Tb=Za[7],Wb=Za[8],nc=Za[9],wc=1,Ec="",Uc="",bd=!1,dd=!0;Wb&&(Wb=+Wb.substring(1));if(Fb||"0"===Ta&&"\x3d"===Ya)Fb=Ta="0",Ya="\x3d";switch(nc){case "n":Tb=!0;nc="g";break;case "%":wc=100;Uc="%";nc="f";break;case "p":wc=100;Uc="%";nc="r";break;case "b":case "o":case "x":case "X":"#"===ub&&(Ec="0"+nc.toLowerCase());case "c":dd=!1;case "d":bd=
!0;Wb=0;break;case "s":wc=-1,nc="r"}"$"===ub&&(Ec=Ea[0],Uc=Ea[1]);"r"!=nc||Wb||(nc="g");if(null!=Wb)if("g"==nc)Wb=Math.max(1,Math.min(21,Wb));else if("e"==nc||"f"==nc)Wb=Math.max(0,Math.min(20,Wb));nc=Ak.get(nc)||Hb;var id=Fb&&Tb;return function(gc){var xc=Uc;if(bd&&gc%1)return"";var Vc=0>gc||0===gc&&0>1/gc?(gc=-gc,"-"):"-"===jb?"":jb;0>wc?(xc=Rb.formatPrefix(gc,Wb),gc=xc.scale(gc),xc=xc.symbol+Uc):gc*=wc;gc=nc(gc,Wb);var qd=gc.lastIndexOf(".");if(0>qd)if(qd=dd?gc.lastIndexOf("e"):-1,0>qd){var td=
gc;gc=""}else td=gc.substring(0,qd),gc=gc.substring(qd);else td=gc.substring(0,qd),gc=ja+gc.substring(qd+1);!Fb&&Tb&&(td=Ja(td,Infinity));qd=Ec.length+td.length+gc.length+(id?0:Vc.length);var ud=qd<Lb?Array(qd=Lb-qd+1).join(Ta):"";id&&(td=Ja(ud+td,ud.length?Lb-gc.length:Infinity));Vc+=Ec;gc=td+gc;return("\x3c"===Ya?Vc+gc+ud:"\x3e"===Ya?ud+Vc+gc:"^"===Ya?ud.substring(0,qd>>=1)+Vc+gc+ud.substring(qd):Vc+(id?gc:ud+gc))+xc}}}function Hb(R){return R+""}function Vb(){this._=new Date(1<arguments.length?
Date.UTC.apply(this,arguments):arguments[0])}function lc(R,ja,ua){function Ca(Ya){var jb=R(Ya),ub=Ja(jb,1);return Ya-jb<ub-Ya?jb:ub}function Ea(Ya){ja(Ya=R(new Lf(Ya-1)),1);return Ya}function Ja(Ya,jb){ja(Ya=new Lf(+Ya),jb);return Ya}function Za(Ya,jb,ub){Ya=Ea(Ya);var Fb=[];if(1<ub)for(;Ya<jb;)ua(Ya)%ub||Fb.push(new Date(+Ya)),ja(Ya,1);else for(;Ya<jb;)Fb.push(new Date(+Ya)),ja(Ya,1);return Fb}R.floor=R;R.round=Ca;R.ceil=Ea;R.offset=Ja;R.range=Za;var Ta=R.utc=Ac(R);Ta.floor=Ta;Ta.round=Ac(Ca);Ta.ceil=
Ac(Ea);Ta.offset=Ac(Ja);Ta.range=function(Ya,jb,ub){try{Lf=Vb;var Fb=new Vb;Fb._=Ya;return Za(Fb,jb,ub)}finally{Lf=Date}};return R}function Ac(R){return function(ja,ua){try{Lf=Vb;var Ca=new Vb;Ca._=ja;return R(Ca,ua)._}finally{Lf=Date}}}function ad(R){function ja(gc){function xc(qd){for(var td=[],ud=-1,nd=0,Vd,ne;++ud<Vc;)if(37===gc.charCodeAt(ud)){td.push(gc.slice(nd,ud));null!=(Vd=zj[nd=gc.charAt(++ud)])&&(nd=gc.charAt(++ud));if(ne=dd[nd])nd=ne(qd,null==Vd?"e"===nd?" ":"0":Vd);td.push(nd);nd=ud+
1}td.push(gc.slice(nd,ud));return td.join("")}var Vc=gc.length;xc.parse=function(qd){var td={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(ua(td,gc,qd,0)!=qd.length)return null;"p"in td&&(td.H=td.H%12+12*td.p);qd=null!=td.Z&&Lf!==Vb;var ud=new (qd?Vb:Lf);"j"in td?ud.setFullYear(td.y,0,td.j):"W"in td||"U"in td?("w"in td||(td.w="W"in td?1:0),ud.setFullYear(td.y,0,1),ud.setFullYear(td.y,0,"W"in td?(td.w+6)%7+7*td.W-(ud.getDay()+5)%7:td.w+7*td.U-(ud.getDay()+6)%7)):ud.setFullYear(td.y,td.m,td.d);ud.setHours(td.H+
(td.Z/100|0),td.M+td.Z%100,td.S,td.L);return qd?ud._:ud};xc.toString=function(){return gc};return xc}function ua(gc,xc,Vc,qd){for(var td,ud=0,nd=xc.length,Vd=Vc.length;ud<nd;){if(qd>=Vd)return-1;td=xc.charCodeAt(ud++);if(37===td){if(td=xc.charAt(ud++),td=id[td in zj?xc.charAt(ud++):td],!td||0>(qd=td(gc,Vc,qd)))return-1}else if(td!=Vc.charCodeAt(qd++))return-1}return qd}var Ca=R.dateTime,Ea=R.date,Ja=R.time,Za=R.periods,Ta=R.days,Ya=R.shortDays,jb=R.months,ub=R.shortMonths;ja.utc=function(gc){function xc(qd){try{Lf=
Vb;var td=new Lf;td._=qd;return Vc(td)}finally{Lf=Date}}var Vc=ja(gc);xc.parse=function(qd){try{Lf=Vb;var td=Vc.parse(qd);return td&&td._}finally{Lf=Date}};xc.toString=Vc.toString;return xc};ja.multi=ja.utc.multi=xb;var Fb=Rb.map(),Lb=ed(Ta),Tb=Pc(Ta),Wb=ed(Ya),nc=Pc(Ya),wc=ed(jb),Ec=Pc(jb),Uc=ed(ub),bd=Pc(ub);Za.forEach(function(gc,xc){Fb.set(gc.toLowerCase(),xc)});var dd={a:function(gc){return Ya[gc.getDay()]},A:function(gc){return Ta[gc.getDay()]},b:function(gc){return ub[gc.getMonth()]},B:function(gc){return jb[gc.getMonth()]},
c:ja(Ca),d:function(gc,xc){return Nc(gc.getDate(),xc,2)},e:function(gc,xc){return Nc(gc.getDate(),xc,2)},H:function(gc,xc){return Nc(gc.getHours(),xc,2)},I:function(gc,xc){return Nc(gc.getHours()%12||12,xc,2)},j:function(gc,xc){return Nc(1+ae.dayOfYear(gc),xc,3)},L:function(gc,xc){return Nc(gc.getMilliseconds(),xc,3)},m:function(gc,xc){return Nc(gc.getMonth()+1,xc,2)},M:function(gc,xc){return Nc(gc.getMinutes(),xc,2)},p:function(gc){return Za[+(12<=gc.getHours())]},S:function(gc,xc){return Nc(gc.getSeconds(),
xc,2)},U:function(gc,xc){return Nc(ae.sundayOfYear(gc),xc,2)},w:function(gc){return gc.getDay()},W:function(gc,xc){return Nc(ae.mondayOfYear(gc),xc,2)},x:ja(Ea),X:ja(Ja),y:function(gc,xc){return Nc(gc.getFullYear()%100,xc,2)},Y:function(gc,xc){return Nc(gc.getFullYear()%1E4,xc,4)},Z:bc,"%":function(){return"%"}},id={a:function(gc,xc,Vc){Wb.lastIndex=0;return(xc=Wb.exec(xc.slice(Vc)))?(gc.w=nc.get(xc[0].toLowerCase()),Vc+xc[0].length):-1},A:function(gc,xc,Vc){Lb.lastIndex=0;return(xc=Lb.exec(xc.slice(Vc)))?
(gc.w=Tb.get(xc[0].toLowerCase()),Vc+xc[0].length):-1},b:function(gc,xc,Vc){Uc.lastIndex=0;return(xc=Uc.exec(xc.slice(Vc)))?(gc.m=bd.get(xc[0].toLowerCase()),Vc+xc[0].length):-1},B:function(gc,xc,Vc){wc.lastIndex=0;return(xc=wc.exec(xc.slice(Vc)))?(gc.m=Ec.get(xc[0].toLowerCase()),Vc+xc[0].length):-1},c:function(gc,xc,Vc){return ua(gc,dd.c.toString(),xc,Vc)},d:wb,e:wb,H:fc,I:fc,j:zb,L:$b,m:rc,M:zc,p:function(gc,xc,Vc){xc=Fb.get(xc.slice(Vc,Vc+=2).toLowerCase());return null==xc?-1:(gc.p=xc,Vc)},S:Gc,
U:Db,w:sd,W:Yb,x:function(gc,xc,Vc){return ua(gc,dd.x.toString(),xc,Vc)},X:function(gc,xc,Vc){return ua(gc,dd.X.toString(),xc,Vc)},y:mc,Y:Fc,Z:qc,"%":Eb};return ja}function Nc(R,ja,ua){var Ca=0>R?"-":"";R=(Ca?-R:R)+"";var Ea=R.length;return Ca+(Ea<ua?Array(ua-Ea+1).join(ja)+R:R)}function ed(R){return new RegExp("^(?:"+R.map(Rb.requote).join("|")+")","i")}function Pc(R){for(var ja=new l,ua=-1,Ca=R.length;++ua<Ca;)ja.set(R[ua].toLowerCase(),ua);return ja}function sd(R,ja,ua){Ud.lastIndex=0;return(ja=
Ud.exec(ja.slice(ua,ua+1)))?(R.w=+ja[0],ua+ja[0].length):-1}function Db(R,ja,ua){Ud.lastIndex=0;return(ja=Ud.exec(ja.slice(ua)))?(R.U=+ja[0],ua+ja[0].length):-1}function Yb(R,ja,ua){Ud.lastIndex=0;return(ja=Ud.exec(ja.slice(ua)))?(R.W=+ja[0],ua+ja[0].length):-1}function Fc(R,ja,ua){Ud.lastIndex=0;return(ja=Ud.exec(ja.slice(ua,ua+4)))?(R.y=+ja[0],ua+ja[0].length):-1}function mc(R,ja,ua){Ud.lastIndex=0;if(ja=Ud.exec(ja.slice(ua,ua+2))){var Ca=+ja[0];R=(R.y=Ca+(68<Ca?1900:2E3),ua+ja[0].length)}else R=
-1;return R}function qc(R,ja,ua){return/^[+-]\d{4}$/.test(ja=ja.slice(ua,ua+5))?(R.Z=-ja,ua+5):-1}function rc(R,ja,ua){Ud.lastIndex=0;return(ja=Ud.exec(ja.slice(ua,ua+2)))?(R.m=ja[0]-1,ua+ja[0].length):-1}function wb(R,ja,ua){Ud.lastIndex=0;return(ja=Ud.exec(ja.slice(ua,ua+2)))?(R.d=+ja[0],ua+ja[0].length):-1}function zb(R,ja,ua){Ud.lastIndex=0;return(ja=Ud.exec(ja.slice(ua,ua+3)))?(R.j=+ja[0],ua+ja[0].length):-1}function fc(R,ja,ua){Ud.lastIndex=0;return(ja=Ud.exec(ja.slice(ua,ua+2)))?(R.H=+ja[0],
ua+ja[0].length):-1}function zc(R,ja,ua){Ud.lastIndex=0;return(ja=Ud.exec(ja.slice(ua,ua+2)))?(R.M=+ja[0],ua+ja[0].length):-1}function Gc(R,ja,ua){Ud.lastIndex=0;return(ja=Ud.exec(ja.slice(ua,ua+2)))?(R.S=+ja[0],ua+ja[0].length):-1}function $b(R,ja,ua){Ud.lastIndex=0;return(ja=Ud.exec(ja.slice(ua,ua+3)))?(R.L=+ja[0],ua+ja[0].length):-1}function bc(R){var ja=R.getTimezoneOffset();R=0<ja?"-":"+";var ua=kd(ja)/60|0;ja=kd(ja)%60;return R+Nc(ua,"0",2)+Nc(ja,"0",2)}function Eb(R,ja,ua){se.lastIndex=0;return(R=
se.exec(ja.slice(ua,ua+1)))?ua+R[0].length:-1}function xb(R){for(var ja=R.length,ua=-1;++ua<ja;)R[ua][0]=this(R[ua][0]);return function(Ca){for(var Ea=0,Ja=R[Ea];!Ja[1](Ca);)Ja=R[++Ea];return Ja[0](Ca)}}function Cb(){}function Jb(R,ja,ua){var Ca=ua.s=R+ja,Ea=Ca-R;ua.t=R-(Ca-Ea)+(ja-Ea)}function ac(R,ja){if(R&&Jg.hasOwnProperty(R.type))Jg[R.type](R,ja)}function Kc(R,ja,ua){var Ca=-1;ua=R.length-ua;for(ja.lineStart();++Ca<ua;){var Ea=R[Ca];ja.point(Ea[0],Ea[1],Ea[2])}ja.lineEnd()}function vc(R,ja){var ua=
-1,Ca=R.length;for(ja.polygonStart();++ua<Ca;)Kc(R[ua],ja,1);ja.polygonEnd()}function Lc(){function R(Za,Ta){Za*=ve;Ta=Ta*ve/2+ie/4;var Ya=Za-Ca,jb=0<=Ya?1:-1;Ya*=jb;var ub=Math.cos(Ta);Ta=Math.sin(Ta);var Fb=Ja*Ta;Zi.add(Math.atan2(Fb*jb*Math.sin(Ya),Ea*ub+Fb*Math.cos(Ya)));Ca=Za;Ea=ub;Ja=Ta}var ja,ua,Ca,Ea,Ja;yg.point=function(Za,Ta){yg.point=R;Ca=(ja=Za)*ve;Ea=Math.cos(Ta=(ua=Ta)*ve/2+ie/4);Ja=Math.sin(Ta)};yg.lineEnd=function(){R(ja,ua)}}function Zc(R){var ja=R[0];R=R[1];var ua=Math.cos(R);return[ua*
Math.cos(ja),ua*Math.sin(ja),Math.sin(R)]}function Wc(R,ja){return R[0]*ja[0]+R[1]*ja[1]+R[2]*ja[2]}function ld(R,ja){return[R[1]*ja[2]-R[2]*ja[1],R[2]*ja[0]-R[0]*ja[2],R[0]*ja[1]-R[1]*ja[0]]}function xd(R,ja){R[0]+=ja[0];R[1]+=ja[1];R[2]+=ja[2]}function hd(R,ja){return[R[0]*ja,R[1]*ja,R[2]*ja]}function Cd(R){var ja=Math.sqrt(R[0]*R[0]+R[1]*R[1]+R[2]*R[2]);R[0]/=ja;R[1]/=ja;R[2]/=ja}function Kd(R){return[Math.atan2(R[1],R[0]),ma(R[2])]}function pd(R,ja){return 1E-6>kd(R[0]-ja[0])&&1E-6>kd(R[1]-ja[1])}
function Yc(R,ja){R*=ve;var ua=Math.cos(ja*=ve);Dd(ua*Math.cos(R),ua*Math.sin(R),Math.sin(ja))}function Dd(R,ja,ua){++Ze;ti+=(R-ti)/Ze;ui+=(ja-ui)/Ze;Ih+=(ua-Ih)/Ze}function Jd(){function R(Ea,Ja){Ea*=ve;var Za=Math.cos(Ja*=ve),Ta=Za*Math.cos(Ea);Ea=Za*Math.sin(Ea);Ja=Math.sin(Ja);var Ya=Math.atan2(Math.sqrt((Ya=ua*Ja-Ca*Ea)*Ya+(Ya=Ca*Ta-ja*Ja)*Ya+(Ya=ja*Ea-ua*Ta)*Ya),ja*Ta+ua*Ea+Ca*Ja);Hi+=Ya;Kg+=Ya*(ja+(ja=Ta));gi+=Ya*(ua+(ua=Ea));qh+=Ya*(Ca+(Ca=Ja));Dd(ja,ua,Ca)}var ja,ua,Ca;$g.point=function(Ea,
Ja){Ea*=ve;var Za=Math.cos(Ja*=ve);ja=Za*Math.cos(Ea);ua=Za*Math.sin(Ea);Ca=Math.sin(Ja);$g.point=R;Dd(ja,ua,Ca)}}function Ld(){$g.point=Yc}function Ce(){function R(Za,Ta){Za*=ve;var Ya=Math.cos(Ta*=ve),jb=Ya*Math.cos(Za);Za=Ya*Math.sin(Za);Ta=Math.sin(Ta);Ya=Ea*Ta-Ja*Za;var ub=Ja*jb-Ca*Ta,Fb=Ca*Za-Ea*jb,Lb=Math.sqrt(Ya*Ya+ub*ub+Fb*Fb),Tb=Ca*jb+Ea*Za+Ja*Ta,Wb=Lb&&-ha(Tb)/Lb;Lb=Math.atan2(Lb,Tb);Ii+=Wb*Ya;Ji+=Wb*ub;Jh+=Wb*Fb;Hi+=Lb;Kg+=Lb*(Ca+(Ca=jb));gi+=Lb*(Ea+(Ea=Za));qh+=Lb*(Ja+(Ja=Ta));Dd(Ca,
Ea,Ja)}var ja,ua,Ca,Ea,Ja;$g.point=function(Za,Ta){ja=Za;ua=Ta;$g.point=R;Za*=ve;var Ya=Math.cos(Ta*=ve);Ca=Ya*Math.cos(Za);Ea=Ya*Math.sin(Za);Ja=Math.sin(Ta);Dd(Ca,Ea,Ja)};$g.lineEnd=function(){R(ja,ua);$g.lineEnd=Ld;$g.point=Yc}}function Rd(R,ja){function ua(Ca,Ea){return Ca=R(Ca,Ea),ja(Ca[0],Ca[1])}R.invert&&ja.invert&&(ua.invert=function(Ca,Ea){return Ca=ja.invert(Ca,Ea),Ca&&R.invert(Ca[0],Ca[1])});return ua}function Sc(){return!0}function md(R,ja,ua,Ca,Ea){var Ja=[],Za=[];R.forEach(function(Fb){if(!(0>=
(Lb=Fb.length-1))){var Lb,Tb=Fb[0],Wb=Fb[Lb];if(pd(Tb,Wb)){Ea.lineStart();for(Wb=0;Wb<Lb;++Wb)Ea.point((Tb=Fb[Wb])[0],Tb[1]);Ea.lineEnd()}else Lb=new Md(Tb,Fb,null,!0),Tb=new Md(Tb,null,Lb,!1),Lb.o=Tb,Ja.push(Lb),Za.push(Tb),Lb=new Md(Wb,Fb,null,!1),Tb=new Md(Wb,null,Lb,!0),Lb.o=Tb,Ja.push(Lb),Za.push(Tb)}});Za.sort(ja);Gd(Ja);Gd(Za);if(Ja.length){R=0;ja=ua;for(ua=Za.length;R<ua;++R)Za[R].e=ja=!ja;ja=Ja[0];for(var Ta,Ya;;){for(var jb=ja,ub=!0;jb.v;)if((jb=jb.n)===ja)return;Ta=jb.z;Ea.lineStart();
do{jb.v=jb.o.v=!0;if(jb.e){if(ub)for(R=0,ua=Ta.length;R<ua;++R)Ea.point((Ya=Ta[R])[0],Ya[1]);else Ca(jb.x,jb.n.x,1,Ea);jb=jb.n}else{if(ub)for(Ta=jb.p.z,R=Ta.length-1;0<=R;--R)Ea.point((Ya=Ta[R])[0],Ya[1]);else Ca(jb.x,jb.p.x,-1,Ea);jb=jb.p}jb=jb.o;Ta=jb.z;ub=!ub}while(!jb.v);Ea.lineEnd()}}}function Gd(R){if(ja=R.length){for(var ja,ua=0,Ca=R[0],Ea;++ua<ja;)Ca.n=Ea=R[ua],Ea.p=Ca,Ca=Ea;Ca.n=Ea=R[0];Ea.p=Ca}}function Md(R,ja,ua,Ca){this.x=R;this.z=ja;this.o=ua;this.e=Ca;this.v=!1;this.n=this.p=null}function me(R,
ja,ua,Ca){return function(Ea,Ja){function Za(gc,xc){var Vc=Ea(gc,xc);R(gc=Vc[0],xc=Vc[1])&&Ja.point(gc,xc)}function Ta(gc,xc){gc=Ea(gc,xc);Tb.point(gc[0],gc[1])}function Ya(){nc.point=Ta;Tb.lineStart()}function jb(){nc.point=Za;Tb.lineEnd()}function ub(gc,xc){id.push([gc,xc]);gc=Ea(gc,xc);Uc.point(gc[0],gc[1])}function Fb(){Uc.lineStart();id=[]}function Lb(){ub(id[0][0],id[0][1]);Uc.lineEnd();var gc=Uc.clean(),xc=Ec.buffer(),Vc=xc.length;id.pop();dd.push(id);id=null;if(Vc)if(gc&1){gc=xc[0];Vc=gc.length-
1;xc=-1;var qd;if(0<Vc){bd||(Ja.polygonStart(),bd=!0);for(Ja.lineStart();++xc<Vc;)Ja.point((qd=gc[xc])[0],qd[1]);Ja.lineEnd()}}else 1<Vc&&gc&2&&xc.push(xc.pop().concat(xc.shift())),wc.push(xc.filter(xe))}var Tb=ja(Ja),Wb=Ea.invert(Ca[0],Ca[1]),nc={point:Za,lineStart:Ya,lineEnd:jb,polygonStart:function(){nc.point=ub;nc.lineStart=Fb;nc.lineEnd=Lb;wc=[];dd=[]},polygonEnd:function(){nc.point=Za;nc.lineStart=Ya;nc.lineEnd=jb;wc=Rb.merge(wc);var gc=Wb;var xc=dd;var Vc=gc[0],qd=gc[1],td=[Math.sin(Vc),-Math.cos(Vc),
0],ud=0,nd=0;Zi.reset();for(var Vd=0,ne=xc.length;Vd<ne;++Vd){var te=xc[Vd],De=te.length;if(De){var we=te[0],Je=we[0];gc=we[1]/2+ie/4;for(var ke=Math.sin(gc),hg=Math.cos(gc),zf=1;;){zf===De&&(zf=0);gc=te[zf];var ah=gc[0],$i=gc[1]/2+ie/4,Pj=Math.sin($i);$i=Math.cos($i);var vi=ah-Je,Qj=0<=vi?1:-1,gf=Qj*vi,bf=gf>ie;ke*=Pj;Zi.add(Math.atan2(ke*Qj*Math.sin(gf),hg*$i+ke*Math.cos(gf)));ud+=bf?vi+Qj*Kf:vi;bf^Je>=Vc^ah>=Vc&&(we=ld(Zc(we),Zc(gc)),Cd(we),Je=ld(td,we),Cd(Je),Je=(bf^0<=vi?-1:1)*ma(Je[2]),qd>Je||
qd===Je&&(we[0]||we[1]))&&(nd+=bf^0<=vi?1:-1);if(!zf++)break;Je=ah;ke=Pj;hg=$i;we=gc}}}xc=(-1E-6>ud||1E-6>ud&&-1E-6>Zi)^nd&1;wc.length?(bd||(Ja.polygonStart(),bd=!0),md(wc,Qd,xc,ua,Ja)):xc&&(bd||(Ja.polygonStart(),bd=!0),Ja.lineStart(),ua(null,null,1,Ja),Ja.lineEnd());bd&&(Ja.polygonEnd(),bd=!1);wc=dd=null},sphere:function(){Ja.polygonStart();Ja.lineStart();ua(null,null,1,Ja);Ja.lineEnd();Ja.polygonEnd()}},wc,Ec=Wd(),Uc=ja(Ec),bd=!1,dd,id;return nc}}function xe(R){return 1<R.length}function Wd(){var R=
[],ja;return{lineStart:function(){R.push(ja=[])},point:function(ua,Ca){ja.push([ua,Ca])},lineEnd:x,buffer:function(){var ua=R;R=[];ja=null;return ua},rejoin:function(){1<R.length&&R.push(R.pop().concat(R.shift()))}}}function Qd(R,ja){return(0>(R=R.x)[0]?R[1]-yf-1E-6:yf-R[1])-(0>(ja=ja.x)[0]?ja[1]-yf-1E-6:yf-ja[1])}function Ae(R){function ja(Ya,jb){return Math.cos(Ya)*Math.cos(jb)>Ea}function ua(Ya,jb,ub){var Fb=Zc(Ya),Lb=Zc(jb),Tb=[1,0,0];Lb=ld(Fb,Lb);var Wb=Wc(Lb,Lb);Fb=Lb[0];var nc=Wb-Fb*Fb;if(!nc)return!ub&&
Ya;Wb=Ea*Wb/nc;nc=-Ea*Fb/nc;Fb=ld(Tb,Lb);Tb=hd(Tb,Wb);Lb=hd(Lb,nc);xd(Tb,Lb);Lb=Wc(Tb,Fb);Wb=Wc(Fb,Fb);nc=Lb*Lb-Wb*(Wc(Tb,Tb)-1);if(!(0>nc)){var wc=Math.sqrt(nc);nc=hd(Fb,(-Lb-wc)/Wb);xd(nc,Tb);nc=Kd(nc);if(!ub)return nc;ub=Ya[0];var Ec=jb[0];Ya=Ya[1];jb=jb[1];if(Ec<ub){var Uc=ub;ub=Ec;Ec=Uc}var bd=Ec-ub,dd=1E-6>kd(bd-ie);!dd&&jb<Ya&&(Uc=Ya,Ya=jb,jb=Uc);if(dd||1E-6>bd?dd?0<Ya+jb^nc[1]<(1E-6>kd(nc[0]-ub)?Ya:jb):Ya<=nc[1]&&nc[1]<=jb:bd>ie^(ub<=nc[0]&&nc[0]<=Ec))return jb=hd(Fb,(-Lb+wc)/Wb),xd(jb,Tb),
[nc,Kd(jb)]}}function Ca(Ya,jb){var ub=Ja?R:ie-R,Fb=0;Ya<-ub?Fb|=1:Ya>ub&&(Fb|=2);jb<-ub?Fb|=4:jb>ub&&(Fb|=8);return Fb}var Ea=Math.cos(R),Ja=0<Ea,Za=1E-6<kd(Ea),Ta=Cc(R,6*ve);return me(ja,function(Ya){var jb,ub,Fb,Lb,Tb;return{lineStart:function(){Lb=Fb=!1;Tb=1},point:function(Wb,nc){var wc=[Wb,nc],Ec=ja(Wb,nc);nc=Ja?Ec?0:Ca(Wb,nc):Ec?Ca(Wb+(0>Wb?ie:-ie),nc):0;!jb&&(Lb=Fb=Ec)&&Ya.lineStart();Ec!==Fb&&(Wb=ua(jb,wc),pd(jb,Wb)||pd(wc,Wb))&&(wc[0]+=1E-6,wc[1]+=1E-6,Ec=ja(wc[0],wc[1]));if(Ec!==Fb)Tb=
0,Ec?(Ya.lineStart(),Wb=ua(wc,jb),Ya.point(Wb[0],Wb[1])):(Wb=ua(jb,wc),Ya.point(Wb[0],Wb[1]),Ya.lineEnd()),jb=Wb;else if(Za&&jb&&Ja^Ec){var Uc;nc&ub||!(Uc=ua(wc,jb,!0))||(Tb=0,Ja?(Ya.lineStart(),Ya.point(Uc[0][0],Uc[0][1]),Ya.point(Uc[1][0],Uc[1][1]),Ya.lineEnd()):(Ya.point(Uc[1][0],Uc[1][1]),Ya.lineEnd(),Ya.lineStart(),Ya.point(Uc[0][0],Uc[0][1])))}!Ec||jb&&pd(jb,wc)||Ya.point(wc[0],wc[1]);jb=wc;Fb=Ec;ub=nc},lineEnd:function(){Fb&&Ya.lineEnd();jb=null},clean:function(){return Tb|(Lb&&Fb)<<1}}},Ta,
Ja?[0,-R]:[-ie,R-ie])}function Be(R,ja,ua,Ca){return function(Ea){var Ja=Ea.a,Za=Ea.b,Ta=Ja.x;Ja=Ja.y;var Ya=0,jb=1,ub=Za.x-Ta;Za=Za.y-Ja;var Fb=R-Ta;if(ub||!(0<Fb)){Fb/=ub;if(0>ub){if(Fb<Ya)return;Fb<jb&&(jb=Fb)}else if(0<ub){if(Fb>jb)return;Fb>Ya&&(Ya=Fb)}Fb=ua-Ta;if(ub||!(0>Fb)){Fb/=ub;if(0>ub){if(Fb>jb)return;Fb>Ya&&(Ya=Fb)}else if(0<ub){if(Fb<Ya)return;Fb<jb&&(jb=Fb)}Fb=ja-Ja;if(Za||!(0<Fb)){Fb/=Za;if(0>Za){if(Fb<Ya)return;Fb<jb&&(jb=Fb)}else if(0<Za){if(Fb>jb)return;Fb>Ya&&(Ya=Fb)}Fb=Ca-Ja;
if(Za||!(0>Fb)){Fb/=Za;if(0>Za){if(Fb>jb)return;Fb>Ya&&(Ya=Fb)}else if(0<Za){if(Fb<Ya)return;Fb<jb&&(jb=Fb)}0<Ya&&(Ea.a={x:Ta+Ya*ub,y:Ja+Ya*Za});1>jb&&(Ea.b={x:Ta+jb*ub,y:Ja+jb*Za});return Ea}}}}}}function Ge(R,ja,ua,Ca){function Ea(Ta,Ya){return 1E-6>kd(Ta[0]-R)?0<Ya?0:3:1E-6>kd(Ta[0]-ua)?0<Ya?2:1:1E-6>kd(Ta[1]-ja)?0<Ya?1:0:0<Ya?3:2}function Ja(Ta,Ya){return Za(Ta.x,Ya.x)}function Za(Ta,Ya){var jb=Ea(Ta,1),ub=Ea(Ya,1);return jb!==ub?jb-ub:0===jb?Ya[1]-Ta[1]:1===jb?Ta[0]-Ya[0]:2===jb?Ta[1]-Ya[1]:
Ya[0]-Ta[0]}return function(Ta){function Ya(td,ud,nd,Vd){var ne=0,te=0;if(null==td||(ne=Ea(td,nd))!==(te=Ea(ud,nd))||0>Za(td,ud)^0<nd){do Vd.point(0===ne||3===ne?R:ua,1<ne?Ca:ja);while((ne=(ne+nd+4)%4)!==te)}else Vd.point(ud[0],ud[1])}function jb(td,ud){R<=td&&td<=ua&&ja<=ud&&ud<=Ca&&Ta.point(td,ud)}function ub(td,ud){td=Math.max(-1E9,Math.min(1E9,td));ud=Math.max(-1E9,Math.min(1E9,ud));var nd=R<=td&&td<=ua&&ja<=ud&&ud<=Ca;nc&&wc.push([td,ud]);if(Vc)Uc=td,bd=ud,dd=nd,Vc=!1,nd&&(Ta.lineStart(),Ta.point(td,
ud));else if(nd&&xc)Ta.point(td,ud);else{var Vd={a:{x:id,y:gc},b:{x:td,y:ud}};Tb(Vd)?(xc||(Ta.lineStart(),Ta.point(Vd.a.x,Vd.a.y)),Ta.point(Vd.b.x,Vd.b.y),nd||Ta.lineEnd(),qd=!1):nd&&(Ta.lineStart(),Ta.point(td,ud),qd=!1)}id=td;gc=ud;xc=nd}var Fb=Ta,Lb=Wd(),Tb=Be(R,ja,ua,Ca),Wb,nc,wc,Ec={point:jb,lineStart:function(){Ec.point=ub;nc&&nc.push(wc=[]);Vc=!0;xc=!1;id=gc=NaN},lineEnd:function(){Wb&&(ub(Uc,bd),dd&&xc&&Lb.rejoin(),Wb.push(Lb.buffer()));Ec.point=jb;xc&&Ta.lineEnd()},polygonStart:function(){Ta=
Lb;Wb=[];nc=[];qd=!0},polygonEnd:function(){Ta=Fb;Wb=Rb.merge(Wb);var td=[R,Ca];for(var ud=0,nd=nc.length,Vd=td[1],ne=0;ne<nd;++ne)for(var te=1,De=nc[ne],we=De.length,Je=De[0],ke;te<we;++te)ke=De[te],Je[1]<=Vd?ke[1]>Vd&&0<ra(Je,ke,td)&&++ud:ke[1]<=Vd&&0>ra(Je,ke,td)&&--ud,Je=ke;td=0!==ud;ud=qd&&td;nd=Wb.length;if(ud||nd)Ta.polygonStart(),ud&&(Ta.lineStart(),Ya(null,null,1,Ta),Ta.lineEnd()),nd&&md(Wb,Ja,td,Ya,Ta),Ta.polygonEnd();Wb=nc=wc=null}},Uc,bd,dd,id,gc,xc,Vc,qd;return Ec}}function Ue(R){var ja=
0,ua=ie/3,Ca=Nb(R);R=Ca(ja,ua);R.parallels=function(Ea){return arguments.length?Ca(ja=Ea[0]*ie/180,ua=Ea[1]*ie/180):[ja/ie*180,ua/ie*180]};return R}function uf(R,ja){function ua(Za,Ta){Ta=Math.sqrt(Ea-2*Ca*Math.sin(Ta))/Ca;return[Ta*Math.sin(Za*=Ca),Ja-Ta*Math.cos(Za)]}R=Math.sin(R);var Ca=(R+Math.sin(ja))/2,Ea=1+R*(2*Ca-R),Ja=Math.sqrt(Ea)/Ca;ua.invert=function(Za,Ta){Ta=Ja-Ta;return[Math.atan2(Za,Ta)/Ca,ma((Ea-(Za*Za+Ta*Ta)*Ca*Ca)/(2*Ca))]};return ua}function hf(){function R(Ja,Za){Rj+=Ea*Ja-Ca*
Za;Ca=Ja;Ea=Za}var ja,ua,Ca,Ea;hi.point=function(Ja,Za){hi.point=R;ja=Ca=Ja;ua=Ea=Za};hi.lineEnd=function(){R(ja,ua)}}function pf(){function R(Ya,jb){Za.push("M",Ya,",",jb,Ja)}function ja(Ya,jb){Za.push("M",Ya,",",jb);Ta.point=ua}function ua(Ya,jb){Za.push("L",Ya,",",jb)}function Ca(){Ta.point=R}function Ea(){Za.push("Z")}var Ja=$e(4.5),Za=[],Ta={point:R,lineStart:function(){Ta.point=ja},lineEnd:Ca,polygonStart:function(){Ta.lineEnd=Ea},polygonEnd:function(){Ta.lineEnd=Ca;Ta.point=R},pointRadius:function(Ya){Ja=
$e(Ya);return Ta},result:function(){if(Za.length){var Ya=Za.join("");Za=[];return Ya}}};return Ta}function $e(R){return"m0,"+R+"a"+R+","+R+" 0 1,1 0,"+-2*R+"a"+R+","+R+" 0 1,1 0,"+2*R+"z"}function Ra(R,ja){ti+=R;ui+=ja;++Ih}function Gb(){function R(Ca,Ea){var Ja=Ca-ja,Za=Ea-ua;Ja=Math.sqrt(Ja*Ja+Za*Za);Kg+=Ja*(ja+Ca)/2;gi+=Ja*(ua+Ea)/2;qh+=Ja;Ra(ja=Ca,ua=Ea)}var ja,ua;Rg.point=function(Ca,Ea){Rg.point=R;Ra(ja=Ca,ua=Ea)}}function Ab(){Rg.point=Ra}function Ob(){function R(Ja,Za){var Ta=Ja-Ca,Ya=Za-
Ea;Ta=Math.sqrt(Ta*Ta+Ya*Ya);Kg+=Ta*(Ca+Ja)/2;gi+=Ta*(Ea+Za)/2;qh+=Ta;Ta=Ea*Ja-Ca*Za;Ii+=Ta*(Ca+Ja);Ji+=Ta*(Ea+Za);Jh+=3*Ta;Ra(Ca=Ja,Ea=Za)}var ja,ua,Ca,Ea;Rg.point=function(Ja,Za){Rg.point=R;Ra(ja=Ca=Ja,ua=Ea=Za)};Rg.lineEnd=function(){R(ja,ua)}}function Bc(R){function ja(Ya,jb){R.moveTo(Ya+Za,jb);R.arc(Ya,jb,Za,0,Kf)}function ua(Ya,jb){R.moveTo(Ya,jb);Ta.point=Ca}function Ca(Ya,jb){R.lineTo(Ya,jb)}function Ea(){Ta.point=ja}function Ja(){R.closePath()}var Za=4.5,Ta={point:ja,lineStart:function(){Ta.point=
ua},lineEnd:Ea,polygonStart:function(){Ta.lineEnd=Ja},polygonEnd:function(){Ta.lineEnd=Ea;Ta.point=ja},pointRadius:function(Ya){Za=Ya;return Ta},result:x};return Ta}function Tc(R){function ja(Ya){return(Ta?Ca:ua)(Ya)}function ua(Ya){return gd(Ya,function(jb,ub){jb=R(jb,ub);Ya.point(jb[0],jb[1])})}function Ca(Ya){function jb(Vd,ne){Vd=R(Vd,ne);Ya.point(Vd[0],Vd[1])}function ub(){xc=NaN;nd.point=Fb;Ya.lineStart()}function Fb(Vd,ne){var te=Zc([Vd,ne]);ne=R(Vd,ne);Ea(xc,Vc,gc,qd,td,ud,xc=ne[0],Vc=ne[1],
gc=Vd,qd=te[0],td=te[1],ud=te[2],Ta,Ya);Ya.point(xc,Vc)}function Lb(){nd.point=jb;Ya.lineEnd()}function Tb(){ub();nd.point=Wb;nd.lineEnd=nc}function Wb(Vd,ne){Fb(wc=Vd,ne);Ec=xc;Uc=Vc;bd=qd;dd=td;id=ud;nd.point=Fb}function nc(){Ea(xc,Vc,gc,qd,td,ud,Ec,Uc,wc,bd,dd,id,Ta,Ya);nd.lineEnd=Lb;Lb()}var wc,Ec,Uc,bd,dd,id,gc,xc,Vc,qd,td,ud,nd={point:jb,lineStart:ub,lineEnd:Lb,polygonStart:function(){Ya.polygonStart();nd.lineStart=Tb},polygonEnd:function(){Ya.polygonEnd();nd.lineStart=ub}};return nd}function Ea(Ya,
jb,ub,Fb,Lb,Tb,Wb,nc,wc,Ec,Uc,bd,dd,id){var gc=Wb-Ya,xc=nc-jb,Vc=gc*gc+xc*xc;if(Vc>4*Ja&&dd--){var qd=Fb+Ec,td=Lb+Uc,ud=Tb+bd,nd=Math.sqrt(qd*qd+td*td+ud*ud),Vd=Math.asin(ud/=nd),ne=1E-6>kd(kd(ud)-1)||1E-6>kd(ub-wc)?(ub+wc)/2:Math.atan2(td,qd),te=R(ne,Vd);Vd=te[0];te=te[1];var De=Vd-Ya,we=te-jb,Je=xc*De-gc*we;if(Je*Je/Vc>Ja||.3<kd((gc*De+xc*we)/Vc-.5)||Fb*Ec+Lb*Uc+Tb*bd<Za)Ea(Ya,jb,ub,Fb,Lb,Tb,Vd,te,ne,qd/=nd,td/=nd,ud,dd,id),id.point(Vd,te),Ea(Vd,te,ne,qd,td,ud,Wb,nc,wc,Ec,Uc,bd,dd,id)}}var Ja=.5,
Za=Math.cos(30*ve),Ta=16;ja.precision=function(Ya){if(!arguments.length)return Math.sqrt(Ja);Ta=0<(Ja=Ya*Ya)&&16;return ja};return ja}function jc(R){var ja=Tc(function(ua,Ca){return R([ua*jf,Ca*jf])});return function(ua){return dc(ja(ua))}}function Oc(R){this.stream=R}function gd(R,ja){return{point:ja,sphere:function(){R.sphere()},lineStart:function(){R.lineStart()},lineEnd:function(){R.lineEnd()},polygonStart:function(){R.polygonStart()},polygonEnd:function(){R.polygonEnd()}}}function vd(R){return Nb(function(){return R})()}
function Nb(R){function ja(Vc){Vc=Ta(Vc[0]*ve,Vc[1]*ve);return[Vc[0]*jb+Ec,Uc-Vc[1]*jb]}function ua(Vc){return(Vc=Ta.invert((Vc[0]-Ec)/jb,(Uc-Vc[1])/jb))&&[Vc[0]*jf,Vc[1]*jf]}function Ca(){Ta=Rd(Za=Rc(Wb,nc,wc),Ja);var Vc=Ja(Lb,Tb);Ec=ub-Vc[0]*jb;Uc=Fb+Vc[1]*jb;return Ea()}function Ea(){xc&&(xc.valid=!1,xc=null);return ja}var Ja,Za,Ta,Ya=Tc(function(Vc,qd){Vc=Ja(Vc,qd);return[Vc[0]*jb+Ec,Uc-Vc[1]*jb]}),jb=150,ub=480,Fb=250,Lb=0,Tb=0,Wb=0,nc=0,wc=0,Ec,Uc,bd=kk,dd=w,id=null,gc=null,xc;ja.stream=function(Vc){xc&&
(xc.valid=!1);xc=dc(bd(Za,Ya(dd(Vc))));xc.valid=!0;return xc};ja.clipAngle=function(Vc){if(!arguments.length)return id;bd=null==Vc?(id=Vc,kk):Ae((id=+Vc)*ve);return Ea()};ja.clipExtent=function(Vc){if(!arguments.length)return gc;dd=(gc=Vc)?Ge(Vc[0][0],Vc[0][1],Vc[1][0],Vc[1][1]):w;return Ea()};ja.scale=function(Vc){if(!arguments.length)return jb;jb=+Vc;return Ca()};ja.translate=function(Vc){if(!arguments.length)return[ub,Fb];ub=+Vc[0];Fb=+Vc[1];return Ca()};ja.center=function(Vc){if(!arguments.length)return[Lb*
jf,Tb*jf];Lb=Vc[0]%360*ve;Tb=Vc[1]%360*ve;return Ca()};ja.rotate=function(Vc){if(!arguments.length)return[Wb*jf,nc*jf,wc*jf];Wb=Vc[0]%360*ve;nc=Vc[1]%360*ve;wc=2<Vc.length?Vc[2]%360*ve:0;return Ca()};Rb.rebind(ja,Ya,"precision");return function(){Ja=R.apply(this,arguments);ja.invert=Ja.invert&&ua;return Ca()}}function dc(R){return gd(R,function(ja,ua){R.point(ja*ve,ua*ve)})}function Mc(R,ja){return[R,ja]}function cd(R,ja){return[R>ie?R-Kf:R<-ie?R+Kf:R,ja]}function Rc(R,ja,ua){return R?ja||ua?Rd(Qb(R),
oc(ja,ua)):Qb(R):ja||ua?oc(ja,ua):cd}function $c(R){return function(ja,ua){return ja+=R,[ja>ie?ja-Kf:ja<-ie?ja+Kf:ja,ua]}}function Qb(R){var ja=$c(R);ja.invert=$c(-R);return ja}function oc(R,ja){function ua(Ta,Ya){var jb=Math.cos(Ya),ub=Math.cos(Ta)*jb;Ta=Math.sin(Ta)*jb;Ya=Math.sin(Ya);jb=Ya*Ca+ub*Ea;return[Math.atan2(Ta*Ja-jb*Za,ub*Ca-Ya*Ea),ma(jb*Ja+Ta*Za)]}var Ca=Math.cos(R),Ea=Math.sin(R),Ja=Math.cos(ja),Za=Math.sin(ja);ua.invert=function(Ta,Ya){var jb=Math.cos(Ya),ub=Math.cos(Ta)*jb;Ta=Math.sin(Ta)*
jb;Ya=Math.sin(Ya);jb=Ya*Ja-Ta*Za;return[Math.atan2(Ta*Ja+Ya*Za,ub*Ca+jb*Ea),ma(jb*Ca-ub*Ea)]};return ua}function Cc(R,ja){var ua=Math.cos(R),Ca=Math.sin(R);return function(Ea,Ja,Za,Ta){var Ya=Za*ja;if(null!=Ea){if(Ea=cc(ua,Ea),Ja=cc(ua,Ja),0<Za?Ea<Ja:Ea>Ja)Ea+=Za*Kf}else Ea=R+Za*Kf,Ja=R-.5*Ya;for(var jb;0<Za?Ea>Ja:Ea<Ja;Ea-=Ya)Ta.point((jb=Kd([ua,-Ca*Math.cos(Ea),-Ca*Math.sin(Ea)]))[0],jb[1])}}function cc(R,ja){ja=Zc(ja);ja[0]-=R;Cd(ja);R=ha(-ja[1]);return((0>-ja[2]?-R:R)+2*Math.PI-1E-6)%(2*Math.PI)}
function sc(R,ja,ua){var Ca=Rb.range(R,ja-1E-6,ua).concat(ja);return function(Ea){return Ca.map(function(Ja){return[Ea,Ja]})}}function jd(R,ja,ua){var Ca=Rb.range(R,ja-1E-6,ua).concat(ja);return function(Ea){return Ca.map(function(Ja){return[Ja,Ea]})}}function yd(R){return R.source}function Id(R){return R.target}function Fd(R,ja,ua,Ca){var Ea=Math.cos(ja),Ja=Math.sin(ja),Za=Math.cos(Ca),Ta=Math.sin(Ca),Ya=Ea*Math.cos(R),jb=Ea*Math.sin(R),ub=Za*Math.cos(ua),Fb=Za*Math.sin(ua),Lb=2*Math.asin(Math.sqrt(na(Ca-
ja)+Ea*Za*na(ua-R))),Tb=1/Math.sin(Lb);ua=Lb?function(Wb){var nc=Math.sin(Wb*=Lb)*Tb;Wb=Math.sin(Lb-Wb)*Tb;var wc=Wb*Ya+nc*ub,Ec=Wb*jb+nc*Fb;return[Math.atan2(Ec,wc)*jf,Math.atan2(Wb*Ja+nc*Ta,Math.sqrt(wc*wc+Ec*Ec))*jf]}:function(){return[R*jf,ja*jf]};ua.distance=Lb;return ua}function Ed(R,ja){function ua(Ca,Ea){var Ja=Math.cos(Ea),Za=R(Math.cos(Ca)*Ja);return[Za*Ja*Math.sin(Ca),Za*Math.sin(Ea)]}ua.invert=function(Ca,Ea){var Ja=Math.sqrt(Ca*Ca+Ea*Ea),Za=ja(Ja),Ta=Math.sin(Za);return[Math.atan2(Ca*
Ta,Ja*Math.cos(Za)),Math.asin(Ja&&Ea*Ta/Ja)]};return ua}function ye(R,ja){function ua(Za,Ta){0<Ja?Ta<-yf+1E-6&&(Ta=-yf+1E-6):Ta>yf-1E-6&&(Ta=yf-1E-6);Ta=Ja/Math.pow(Math.tan(ie/4+Ta/2),Ea);return[Ta*Math.sin(Ea*Za),Ja-Ta*Math.cos(Ea*Za)]}var Ca=Math.cos(R),Ea=R===ja?Math.sin(R):Math.log(Ca/Math.cos(ja))/Math.log(Math.tan(ie/4+ja/2)/Math.tan(ie/4+R/2)),Ja=Ca*Math.pow(Math.tan(ie/4+R/2),Ea)/Ea;if(!Ea)return Ne;ua.invert=function(Za,Ta){Ta=Ja-Ta;return[Math.atan2(Za,Ta)/Ea,2*Math.atan(Math.pow(Ja/((0<
Ea?1:0>Ea?-1:0)*Math.sqrt(Za*Za+Ta*Ta)),1/Ea))-yf]};return ua}function ze(R,ja){function ua(Za,Ta){Ta=Ja-Ta;return[Ta*Math.sin(Ea*Za),Ja-Ta*Math.cos(Ea*Za)]}var Ca=Math.cos(R),Ea=R===ja?Math.sin(R):(Ca-Math.cos(ja))/(ja-R),Ja=Ca/Ea+R;if(1E-6>kd(Ea))return Mc;ua.invert=function(Za,Ta){Ta=Ja-Ta;return[Math.atan2(Za,Ta)/Ea,Ja-(0<Ea?1:0>Ea?-1:0)*Math.sqrt(Za*Za+Ta*Ta)]};return ua}function Ne(R,ja){return[R,Math.log(Math.tan(ie/4+ja/2))]}function ue(R){var ja=vd(R),ua=ja.scale,Ca=ja.translate,Ea=ja.clipExtent,
Ja;ja.scale=function(){var Za=ua.apply(ja,arguments);return Za===ja?Ja?ja.clipExtent(null):ja:Za};ja.translate=function(){var Za=Ca.apply(ja,arguments);return Za===ja?Ja?ja.clipExtent(null):ja:Za};ja.clipExtent=function(Za){var Ta=Ea.apply(ja,arguments);if(Ta===ja){if(Ja=null==Za){var Ya=ie*ua(),jb=Ca();Ea([[jb[0]-Ya,jb[1]-Ya],[jb[0]+Ya,jb[1]+Ya]])}}else Ja&&(Ta=null);return Ta};return ja.clipExtent(null)}function Ke(R,ja){return[Math.log(Math.tan(ie/4+ja/2)),-R]}function mf(R){return R[0]}function If(R){return R[1]}
function Xh(R){for(var ja=R.length,ua=[0,1],Ca=2,Ea=2;Ea<ja;Ea++){for(;1<Ca&&0>=ra(R[ua[Ca-2]],R[ua[Ca-1]],R[Ea]);)--Ca;ua[Ca++]=Ea}return ua.slice(0,Ca)}function mi(R,ja){return R[0]-ja[0]||R[1]-ja[1]}function Oh(R,ja,ua){return(ua[0]-ja[0])*(R[1]-ja[1])<(ua[1]-ja[1])*(R[0]-ja[0])}function Vf(R,ja,ua,Ca){var Ea=R[0],Ja=ua[0],Za=ja[0]-Ea,Ta=Ca[0]-Ja;R=R[1];ua=ua[1];ja=ja[1]-R;Ca=Ca[1]-ua;Ja=(Ta*(R-ua)-Ca*(Ea-Ja))/(Ca*Za-Ta*ja);return[Ea+Ja*Za,R+Ja*ja]}function ni(R){var ja=R[0];R=R[R.length-1];return!(ja[0]-
R[0]||ja[1]-R[1])}function Si(){kg(this);this.edge=this.site=this.circle=null}function Ph(R){var ja=Bk.pop()||new Si;ja.site=R;return ja}function zh(R){Ah(R);aj.remove(R);Bk.push(R);kg(R)}function gh(R,ja){var ua=R.site,Ca=ua.x,Ea=ua.y,Ja=Ea-ja;if(!Ja)return Ca;R=R.P;if(!R)return-Infinity;ua=R.site;R=ua.x;ua=ua.y;ja=ua-ja;if(!ja)return R;var Za=R-Ca,Ta=1/Ja-1/ja,Ya=Za/ja;return Ta?(-Ya+Math.sqrt(Ya*Ya-2*Ta*(Za*Za/(-2*ja)-ua+ja/2+Ea-Ja/2)))/Ta+Ca:(Ca+R)/2}function Cg(R){this.site=R;this.edges=[]}function Ti(R,
ja){return ja.angle-R.angle}function rg(){kg(this);this.x=this.y=this.arc=this.site=this.cy=null}function Rh(R){var ja=R.P,ua=R.N;if(ja&&ua){var Ca=ja.site;ja=R.site;var Ea=ua.site;if(Ca!==Ea){ua=ja.x;var Ja=ja.y,Za=Ca.x-ua,Ta=Ca.y-Ja;Ca=Ea.x-ua;Ea=Ea.y-Ja;var Ya=2*(Za*Ea-Ta*Ca);if(!(-1E-12<=Ya)){var jb=Za*Za+Ta*Ta,ub=Ca*Ca+Ea*Ea;Ta=(Ea*jb-Ta*ub)/Ya;Za=(Za*ub-Ca*jb)/Ya;Ea=Za+Ja;Ja=Ck.pop()||new rg;Ja.arc=R;Ja.site=ja;Ja.x=Ta+ua;Ja.y=Ea+Math.sqrt(Ta*Ta+Za*Za);Ja.cy=Ea;R.circle=Ja;R=null;for(ja=Aj._;ja;)if(Ja.y<
ja.y||Ja.y===ja.y&&Ja.x<=ja.x)if(ja.L)ja=ja.L;else{R=ja.P;break}else if(ja.R)ja=ja.R;else{R=ja;break}Aj.insert(R,Ja);R||(Hf=Ja)}}}}function Ah(R){var ja=R.circle;ja&&(ja.P||(Hf=ja.N),Aj.remove(ja),Ck.push(ja),kg(ja),R.circle=null)}function Qh(R,ja){var ua=R.b;if(ua)return!0;var Ca=R.a;ua=ja[0][0];var Ea=ja[1][0],Ja=ja[0][1];ja=ja[1][1];var Za=R.l,Ta=R.r,Ya=Za.x;Za=Za.y;var jb=Ta.x;Ta=Ta.y;var ub=(Ya+jb)/2;if(Ta===Za){if(ub<ua||ub>=Ea)return;if(Ya>jb){if(!Ca)Ca={x:ub,y:Ja};else if(Ca.y>=ja)return;
ua={x:ub,y:ja}}else{if(!Ca)Ca={x:ub,y:ja};else if(Ca.y<Ja)return;ua={x:ub,y:Ja}}}else{var Fb=(Ya-jb)/(Ta-Za);ub=(Za+Ta)/2-Fb*ub;if(-1>Fb||1<Fb)if(Ya>jb){if(!Ca)Ca={x:(Ja-ub)/Fb,y:Ja};else if(Ca.y>=ja)return;ua={x:(ja-ub)/Fb,y:ja}}else{if(!Ca)Ca={x:(ja-ub)/Fb,y:ja};else if(Ca.y<Ja)return;ua={x:(Ja-ub)/Fb,y:Ja}}else if(Za<Ta){if(!Ca)Ca={x:ua,y:Fb*ua+ub};else if(Ca.x>=Ea)return;ua={x:Ea,y:Fb*Ea+ub}}else{if(!Ca)Ca={x:Ea,y:Fb*Ea+ub};else if(Ca.x<ua)return;ua={x:ua,y:Fb*ua+ub}}}R.a=Ca;R.b=ua;return!0}function hh(R,
ja){this.l=R;this.r=ja;this.a=this.b=null}function Sh(R,ja,ua,Ca){var Ea=new hh(R,ja);bj.push(Ea);ua&&Th(Ea,R,ja,ua);Ca&&Th(Ea,ja,R,Ca);Ki[R.i].edges.push(new Bh(Ea,R,ja));Ki[ja.i].edges.push(new Bh(Ea,ja,R));return Ea}function Th(R,ja,ua,Ca){R.a||R.b?R.l===ua?R.b=Ca:R.a=Ca:(R.a=Ca,R.l=ja,R.r=ua)}function Bh(R,ja,ua){var Ca=R.a,Ea=R.b;this.edge=R;this.site=ja;this.angle=ua?Math.atan2(ua.y-ja.y,ua.x-ja.x):R.l===ja?Math.atan2(Ea.x-Ca.x,Ca.y-Ea.y):Math.atan2(Ca.x-Ea.x,Ea.y-Ca.y)}function Oe(){this._=
null}function kg(R){R.U=R.C=R.L=R.R=R.P=R.N=null}function uh(R,ja){var ua=ja.R,Ca=ja.U;Ca?Ca.L===ja?Ca.L=ua:Ca.R=ua:R._=ua;ua.U=Ca;ja.U=ua;ja.R=ua.L;ja.R&&(ja.R.U=ja);ua.L=ja}function vh(R,ja){var ua=ja.L,Ca=ja.U;Ca?Ca.L===ja?Ca.L=ua:Ca.R=ua:R._=ua;ua.U=Ca;ja.U=ua;ja.L=ua.R;ja.L&&(ja.L.U=ja);ua.R=ja}function Ui(R){for(;R.L;)R=R.L;return R}function Ch(R,ja){var ua=R.sort(Ai).pop(),Ca;bj=[];Ki=Array(R.length);aj=new Oe;for(Aj=new Oe;;){var Ea=Hf;if(ua&&(!Ea||ua.y<Ea.y||ua.y===Ea.y&&ua.x<Ea.x)){if(ua.x!==
Ca||ua.y!==Ja){Ki[ua.i]=new Cg(ua);var Ja=Ca=void 0;Ea=ua;for(var Za=Ea.x,Ta=Ea.y,Ya=aj._;Ya;){var jb=gh(Ya,Ta)-Za;if(1E-6<jb)Ya=Ya.L;else{var ub=Ya;var Fb=Ta;var Lb=ub.N;Lb?Fb=gh(Lb,Fb):(ub=ub.site,Fb=ub.y===Fb?ub.x:Infinity);Fb=Za-Fb;if(1E-6<Fb){if(!Ya.R){Ja=Ya;break}Ya=Ya.R}else{-1E-6<jb?(Ja=Ya.P,Ca=Ya):-1E-6<Fb?(Ja=Ya,Ca=Ya.N):Ja=Ca=Ya;break}}}jb=Ph(Ea);aj.insert(Ja,jb);if(Ja||Ca)if(Ja===Ca)Ah(Ja),Ca=Ph(Ja.site),aj.insert(jb,Ca),jb.edge=Ca.edge=Sh(Ja.site,jb.site),Rh(Ja),Rh(Ca);else if(Ca){Ah(Ja);
Ah(Ca);Za=Ja.site;Ya=Za.x;Fb=Za.y;ub=Ea.x-Ya;Lb=Ea.y-Fb;Ta=Ca.site;var Tb=Ta.x-Ya,Wb=Ta.y-Fb,nc=2*(ub*Wb-Lb*Tb),wc=ub*ub+Lb*Lb,Ec=Tb*Tb+Wb*Wb;Ya={x:(Wb*wc-Lb*Ec)/nc+Ya,y:(ub*Ec-Tb*wc)/nc+Fb};Th(Ca.edge,Za,Ta,Ya);jb.edge=Sh(Za,Ea,null,Ya);Ca.edge=Sh(Ea,Ta,null,Ya);Rh(Ja);Rh(Ca)}else jb.edge=Sh(Ja.site,jb.site);Ca=ua.x;Ja=ua.y}ua=R.pop()}else if(Ea){Ta=Ea.arc;Ea=Ta.circle;Za=Ea.x;Ya=Ea.cy;Ea={x:Za,y:Ya};ub=Ta.P;Fb=Ta.N;jb=[Ta];zh(Ta);for(Ta=ub;Ta.circle&&1E-6>kd(Za-Ta.circle.x)&&1E-6>kd(Ya-Ta.circle.cy);)ub=
Ta.P,jb.unshift(Ta),zh(Ta),Ta=ub;jb.unshift(Ta);Ah(Ta);for(ub=Fb;ub.circle&&1E-6>kd(Za-ub.circle.x)&&1E-6>kd(Ya-ub.circle.cy);)Fb=ub.N,jb.push(ub),zh(ub),ub=Fb;jb.push(ub);Ah(ub);Ya=jb.length;for(Za=1;Za<Ya;++Za)ub=jb[Za],Ta=jb[Za-1],Th(ub.edge,Ta.site,ub.site,Ea);Ta=jb[0];ub=jb[Ya-1];ub.edge=Sh(Ta.site,ub.site,null,Ea);Rh(Ta);Rh(ub)}else break}if(ja){R=bj;ua=Be(ja[0][0],ja[0][1],ja[1][0],ja[1][1]);for(Ca=R.length;Ca--;)if(Ja=R[Ca],!Qh(Ja,ja)||!ua(Ja)||1E-6>kd(Ja.a.x-Ja.b.x)&&1E-6>kd(Ja.a.y-Ja.b.y))Ja.a=
Ja.b=null,R.splice(Ca,1);R=ja[0][0];ua=ja[1][0];Ca=ja[0][1];ja=ja[1][1];Ja=Ki;for(Ea=Ja.length;Ea--;)if((jb=Ja[Ea])&&jb.prepare())for(Ta=jb.edges,Ya=Ta.length,Za=0;Za<Ya;)if(wc=Ta[Za].end(),Wb=wc.x,nc=wc.y,Fb=Ta[++Za%Ya].start(),Tb=Fb.x,Ec=Fb.y,1E-6<kd(Wb-Tb)||1E-6<kd(nc-Ec))Fb=Ta,ub=Fb.splice,Lb=Za,Tb=1E-6>kd(Wb-R)&&1E-6<ja-nc?{x:R,y:1E-6>kd(Tb-R)?Ec:ja}:1E-6>kd(nc-ja)&&1E-6<ua-Wb?{x:1E-6>kd(Ec-ja)?Tb:ua,y:ja}:1E-6>kd(Wb-ua)&&1E-6<nc-Ca?{x:ua,y:1E-6>kd(Tb-ua)?Ec:Ca}:1E-6>kd(nc-Ca)&&1E-6<Wb-R?{x:1E-6>
kd(Ec-Ca)?Tb:R,y:Ca}:null,Wb=new hh(jb.site,null),Wb.a=wc,Wb.b=Tb,bj.push(Wb),ub.call(Fb,Lb,0,new Bh(Wb,jb.site,null)),++Ya}ja={cells:Ki,edges:bj};aj=Aj=bj=Ki=null;return ja}function Ai(R,ja){return ja.y-R.y||ja.x-R.x}function sj(R){return R.x}function nf(R){return R.y}function tj(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Vh(R,ja,ua,Ca,Ea,Ja){if(!R(ja,ua,Ca,Ea,Ja)){var Za=.5*(ua+Ea),Ta=.5*(Ca+Ja);ja=ja.nodes;ja[0]&&Vh(R,ja[0],ua,Ca,Za,Ta);ja[1]&&Vh(R,ja[1],Za,Ca,Ea,Ta);ja[2]&&Vh(R,
ja[2],ua,Ta,Za,Ja);ja[3]&&Vh(R,ja[3],Za,Ta,Ea,Ja)}}function Lj(R,ja,ua,Ca,Ea,Ja,Za){var Ta=Infinity,Ya;(function nc(ub,Fb,Lb,Tb,Wb){if(!(Fb>Ja||Lb>Za||Tb<Ca||Wb<Ea)){if(wc=ub.point){var wc,Ec=ja-ub.x,Uc=ua-ub.y;Ec=Ec*Ec+Uc*Uc;Ec<Ta&&(Ec=Math.sqrt(Ta=Ec),Ca=ja-Ec,Ea=ua-Ec,Ja=ja+Ec,Za=ua+Ec,Ya=wc)}wc=ub.nodes;Ec=.5*(Fb+Tb);Uc=.5*(Lb+Wb);for(var bd=(ua>=Uc)<<1|ja>=Ec,dd=bd+4;bd<dd;++bd)if(ub=wc[bd&3])switch(bd&3){case 0:nc(ub,Fb,Lb,Ec,Uc);break;case 1:nc(ub,Ec,Lb,Tb,Uc);break;case 2:nc(ub,Fb,Uc,Ec,Wb);
break;case 3:nc(ub,Ec,Uc,Tb,Wb)}}})(R,Ca,Ea,Ja,Za);return Ya}function Uh(R,ja){R=Rb.rgb(R);ja=Rb.rgb(ja);var ua=R.r,Ca=R.g,Ea=R.b,Ja=ja.r-ua,Za=ja.g-Ca,Ta=ja.b-Ea;return function(Ya){return"#"+Xa(Math.round(ua+Ja*Ya))+Xa(Math.round(Ca+Za*Ya))+Xa(Math.round(Ea+Ta*Ya))}}function ih(R,ja){var ua={},Ca={},Ea;for(Ea in R)Ea in ja?ua[Ea]=cg(R[Ea],ja[Ea]):Ca[Ea]=R[Ea];for(Ea in ja)Ea in R||(Ca[Ea]=ja[Ea]);return function(Ja){for(Ea in ua)Ca[Ea]=ua[Ea](Ja);return Ca}}function Dg(R,ja){R=+R;ja=+ja;return function(ua){return R*
(1-ua)+ja*ua}}function Vi(R,ja){var ua=cj.lastIndex=wi.lastIndex=0,Ca,Ea,Ja,Za=-1,Ta=[],Ya=[];R+="";for(ja+="";(Ca=cj.exec(R))&&(Ea=wi.exec(ja));)(Ja=Ea.index)>ua&&(Ja=ja.slice(ua,Ja),Ta[Za]?Ta[Za]+=Ja:Ta[++Za]=Ja),(Ca=Ca[0])===(Ea=Ea[0])?Ta[Za]?Ta[Za]+=Ea:Ta[++Za]=Ea:(Ta[++Za]=null,Ya.push({i:Za,x:Dg(Ca,Ea)})),ua=wi.lastIndex;ua<ja.length&&(Ja=ja.slice(ua),Ta[Za]?Ta[Za]+=Ja:Ta[++Za]=Ja);return 2>Ta.length?Ya[0]?(ja=Ya[0].x,function(jb){return ja(jb)+""}):function(){return ja}:(ja=Ya.length,function(jb){for(var ub=
0,Fb;ub<ja;++ub)Ta[(Fb=Ya[ub]).i]=Fb.x(jb);return Ta.join("")})}function cg(R,ja){for(var ua=Rb.interpolators.length,Ca;0<=--ua&&!(Ca=Rb.interpolators[ua](R,ja)););return Ca}function Yh(R,ja){var ua=[],Ca=[],Ea=R.length,Ja=ja.length,Za=Math.min(R.length,ja.length),Ta;for(Ta=0;Ta<Za;++Ta)ua.push(cg(R[Ta],ja[Ta]));for(;Ta<Ea;++Ta)Ca[Ta]=R[Ta];for(;Ta<Ja;++Ta)Ca[Ta]=ja[Ta];return function(Ya){for(Ta=0;Ta<Za;++Ta)Ca[Ta]=ua[Ta](Ya);return Ca}}function af(R){return function(ja){return 0>=ja?0:1<=ja?1:R(ja)}}
function jh(R){return function(ja){return 1-R(1-ja)}}function Ug(R){return function(ja){return.5*(.5>ja?R(2*ja):2-R(2-2*ja))}}function dg(R){return R*R}function Te(R){return R*R*R}function Ve(R){if(0>=R)return 0;if(1<=R)return 1;var ja=R*R,ua=ja*R;return 4*(.5>R?ua:3*(R-ja)+ua-.75)}function Tg(R){return 1-Math.cos(R*yf)}function wh(R){return Math.pow(2,10*(R-1))}function Bi(R){return 1-Math.sqrt(1-R*R)}function Ci(R){return R<1/2.75?7.5625*R*R:R<2/2.75?7.5625*(R-=1.5/2.75)*R+.75:R<2.5/2.75?7.5625*
(R-=2.25/2.75)*R+.9375:7.5625*(R-=2.625/2.75)*R+.984375}function Wh(R,ja){ja-=R;return function(ua){return Math.round(R+ja*ua)}}function Di(R){var ja=[R.a,R.b],ua=[R.c,R.d],Ca=Eg(ja),Ea=ja[0]*ua[0]+ja[1]*ua[1],Ja=-Ea;ua[0]+=Ja*ja[0];ua[1]+=Ja*ja[1];Ja=Eg(ua)||0;ja[0]*ua[1]<ua[0]*ja[1]&&(ja[0]*=-1,ja[1]*=-1,Ca*=-1,Ea*=-1);this.rotate=(Ca?Math.atan2(ja[1],ja[0]):Math.atan2(-ua[0],ua[1]))*jf;this.translate=[R.e,R.f];this.scale=[Ca,Ja];this.skew=Ja?Math.atan2(Ea,Ja)*jf:0}function Eg(R){var ja=Math.sqrt(R[0]*
R[0]+R[1]*R[1]);ja&&(R[0]/=ja,R[1]/=ja);return ja}function rf(R){return R.length?R.pop()+",":""}function Ei(R,ja,ua,Ca){R[0]!==ja[0]||R[1]!==ja[1]?(ua=ua.push("translate(",null,",",null,")"),Ca.push({i:ua-4,x:Dg(R[0],ja[0])},{i:ua-2,x:Dg(R[1],ja[1])})):(ja[0]||ja[1])&&ua.push("translate("+ja+")")}function Wi(R,ja,ua,Ca){R!==ja?(180<R-ja?ja+=360:180<ja-R&&(R+=360),Ca.push({i:ua.push(rf(ua)+"rotate(",null,")")-2,x:Dg(R,ja)})):ja&&ua.push(rf(ua)+"rotate("+ja+")")}function Bf(R,ja,ua,Ca){R!==ja?Ca.push({i:ua.push(rf(ua)+
"skewX(",null,")")-2,x:Dg(R,ja)}):ja&&ua.push(rf(ua)+"skewX("+ja+")")}function Fg(R,ja,ua,Ca){R[0]!==ja[0]||R[1]!==ja[1]?(ua=ua.push(rf(ua)+"scale(",null,",",null,")"),Ca.push({i:ua-4,x:Dg(R[0],ja[0])},{i:ua-2,x:Dg(R[1],ja[1])})):1===ja[0]&&1===ja[1]||ua.push(rf(ua)+"scale("+ja+")")}function Rf(R,ja){var ua=[],Ca=[];R=Rb.transform(R);ja=Rb.transform(ja);Ei(R.translate,ja.translate,ua,Ca);Wi(R.rotate,ja.rotate,ua,Ca);Bf(R.skew,ja.skew,ua,Ca);Fg(R.scale,ja.scale,ua,Ca);R=ja=null;return function(Ea){for(var Ja=
-1,Za=Ca.length,Ta;++Ja<Za;)ua[(Ta=Ca[Ja]).i]=Ta.x(Ea);return ua.join("")}}function Dh(R,ja){ja=(ja-=R=+R)||1/ja;return function(ua){return(ua-R)/ja}}function Ng(R,ja){ja=(ja-=R=+R)||1/ja;return function(ua){return Math.max(0,Math.min(1,(ua-R)/ja))}}function lg(R){for(var ja=[],ua=R.parent;null!=ua;)ja.push(R),R=ua,ua=ua.parent;ja.push(R);return ja}function ag(R){R.fixed|=2}function xh(R){R.fixed&=-7}function yh(R){R.fixed|=4;R.px=R.x;R.py=R.y}function oi(R){R.fixed&=-5}function bg(R,ja,ua){var Ca=
0,Ea=0;R.charge=0;if(!R.leaf)for(var Ja=R.nodes,Za=Ja.length,Ta=-1,Ya;++Ta<Za;)Ya=Ja[Ta],null!=Ya&&(bg(Ya,ja,ua),R.charge+=Ya.charge,Ca+=Ya.charge*Ya.cx,Ea+=Ya.charge*Ya.cy);R.point&&(R.leaf||(R.point.x+=Math.random()-.5,R.point.y+=Math.random()-.5),ja*=ua[R.point.index],R.charge+=R.pointCharge=ja,Ca+=ja*R.point.x,Ea+=ja*R.point.y);R.cx=Ca/R.charge;R.cy=Ea/R.charge}function vf(R,ja){Rb.rebind(R,ja,"sort","children","value");R.nodes=R;R.links=Zh;return R}function qi(R,ja){for(var ua=[R];null!=(R=ua.pop());)if(ja(R),
(Ea=R.children)&&(Ca=Ea.length))for(var Ca,Ea;0<=--Ca;)ua.push(Ea[Ca])}function eg(R,ja){for(var ua=[R],Ca=[];null!=(R=ua.pop());)if(Ca.push(R),(Ja=R.children)&&(Ea=Ja.length)){R=-1;for(var Ea,Ja;++R<Ea;)ua.push(Ja[R])}for(;null!=(R=Ca.pop());)ja(R)}function Ff(R){return R.children}function kh(R){return R.value}function wf(R,ja){return ja.value-R.value}function Zh(R){return Rb.merge(R.map(function(ja){return(ja.children||[]).map(function(ua){return{source:ja,target:ua}})}))}function nh(R){return R.x}
function mg(R){return R.y}function Vg(R,ja,ua){R.y0=ja;R.y=ua}function lh(R){return Rb.range(R.length)}function ng(R){var ja=-1;R=R[0].length;for(var ua=[];++ja<R;)ua[ja]=0;return ua}function ri(R){for(var ja=1,ua=0,Ca=R[0][1],Ea,Ja=R.length;ja<Ja;++ja)(Ea=R[ja][1])>Ca&&(ua=ja,Ca=Ea);return ua}function uj(R){return R.reduce(ge,0)}function ge(R,ja){return R+ja[1]}function vj(R,ja){return Gg(R,Math.ceil(Math.log(ja.length)/Math.LN2+1))}function Gg(R,ja){var ua=-1,Ca=+R[0];R=(R[1]-Ca)/ja;for(var Ea=
[];++ua<=ja;)Ea[ua]=R*ua+Ca;return Ea}function Hg(R){return[Rb.min(R),Rb.max(R)]}function oh(R,ja){return R.value-ja.value}function Xg(R,ja){var ua=R._pack_next;R._pack_next=ja;ja._pack_prev=R;ja._pack_next=ua;ua._pack_prev=ja}function Gh(R,ja){R._pack_next=ja;ja._pack_prev=R}function bi(R,ja){var ua=ja.x-R.x,Ca=ja.y-R.y;R=R.r+ja.r;return.999*R*R>ua*ua+Ca*Ca}function Ig(R){function ja(Ec){Ca=Math.min(Ec.x-Ec.r,Ca);Ea=Math.max(Ec.x+Ec.r,Ea);Ja=Math.min(Ec.y-Ec.r,Ja);Za=Math.max(Ec.y+Ec.r,Za)}if((ua=
R.children)&&(ub=ua.length)){var ua,Ca=Infinity,Ea=-Infinity,Ja=Infinity,Za=-Infinity,Ta,Ya,jb,ub;ua.forEach(wj);var Fb=ua[0];Fb.x=-Fb.r;Fb.y=0;ja(Fb);if(1<ub){var Lb=ua[1];Lb.x=Lb.r;Lb.y=0;ja(Lb);if(2<ub){var Tb=ua[2];gg(Fb,Lb,Tb);ja(Tb);Xg(Fb,Tb);Fb._pack_prev=Tb;Xg(Tb,Lb);Lb=Fb._pack_next;for(Ta=3;Ta<ub;Ta++){gg(Fb,Lb,Tb=ua[Ta]);var Wb=0,nc=1,wc=1;for(Ya=Lb._pack_next;Ya!==Lb;Ya=Ya._pack_next,nc++)if(bi(Ya,Tb)){Wb=1;break}if(1==Wb)for(jb=Fb._pack_prev;jb!==Ya._pack_prev&&!bi(jb,Tb);jb=jb._pack_prev,
wc++);Wb?(nc<wc||nc==wc&&Lb.r<Fb.r?Gh(Fb,Lb=Ya):Gh(Fb=jb,Lb),Ta--):(Xg(Fb,Tb),Lb=Tb,ja(Tb))}}}Fb=(Ca+Ea)/2;Lb=(Ja+Za)/2;for(Ta=Ya=0;Ta<ub;Ta++)Tb=ua[Ta],Tb.x-=Fb,Tb.y-=Lb,Ya=Math.max(Ya,Tb.r+Math.sqrt(Tb.x*Tb.x+Tb.y*Tb.y));R.r=Ya;ua.forEach(Fi)}}function wj(R){R._pack_next=R._pack_prev=R}function Fi(R){delete R._pack_next;delete R._pack_prev}function Xi(R,ja,ua,Ca){var Ea=R.children;R.x=ja+=Ca*R.x;R.y=ua+=Ca*R.y;R.r*=Ca;if(Ea){R=-1;for(var Ja=Ea.length;++R<Ja;)Xi(Ea[R],ja,ua,Ca)}}function gg(R,ja,
ua){var Ca=R.r+ua.r,Ea=ja.x-R.x,Ja=ja.y-R.y;if(Ca&&(Ea||Ja)){var Za=ja.r+ua.r,Ta=Ea*Ea+Ja*Ja;Za*=Za;Ca*=Ca;ja=.5+(Ca-Za)/(2*Ta);Za=Math.sqrt(Math.max(0,2*Za*(Ca+Ta)-(Ca-=Ta)*Ca-Za*Za))/(2*Ta);ua.x=R.x+ja*Ea+Za*Ja;ua.y=R.y+ja*Ja-Za*Ea}else ua.x=R.x+Ca,ua.y=R.y}function Ye(R,ja){return R.parent==ja.parent?1:2}function mh(R){var ja=R.children;return ja.length?ja[0]:R.t}function Yg(R){var ja=R.children,ua;return(ua=ja.length)?ja[ua-1]:R.t}function Gi(R){return 1+Rb.max(R,function(ja){return ja.y})}function vg(R){return R.reduce(function(ja,
ua){return ja+ua.x},0)/R.length}function Zg(R){var ja=R.children;return ja&&ja.length?Zg(ja[0]):R}function di(R){var ja=R.children,ua;return ja&&(ua=ja.length)?di(ja[ua-1]):R}function Qg(R){return{x:R.x,y:R.y,dx:R.dx,dy:R.dy}}function wg(R,ja){var ua=R.x+ja[3],Ca=R.y+ja[0],Ea=R.dx-ja[1]-ja[3];R=R.dy-ja[0]-ja[2];0>Ea&&(ua+=Ea/2,Ea=0);0>R&&(Ca+=R/2,R=0);return{x:ua,y:Ca,dx:Ea,dy:R}}function Xf(R){var ja=R[0];R=R[R.length-1];return ja<R?[ja,R]:[R,ja]}function og(R){return R.rangeExtent?R.rangeExtent():
Xf(R.range())}function xj(R,ja,ua,Ca){var Ea=ua(R[0],R[1]),Ja=Ca(ja[0],ja[1]);return function(Za){return Ja(Ea(Za))}}function pi(R,ja){var ua=0,Ca=R.length-1,Ea=R[ua],Ja=R[Ca];if(Ja<Ea){var Za=ua;ua=Ca;Ca=Za;Za=Ea;Ea=Ja;Ja=Za}R[ua]=ja.floor(Ea);R[Ca]=ja.ceil(Ja);return R}function ei(R){return R?{floor:function(ja){return Math.floor(ja/R)*R},ceil:function(ja){return Math.ceil(ja/R)*R}}:Bj}function Bb(R,ja,ua,Ca){var Ea=[],Ja=[],Za=0,Ta=Math.min(R.length,ja.length)-1;R[Ta]<R[0]&&(R=R.slice().reverse(),
ja=ja.slice().reverse());for(;++Za<=Ta;)Ea.push(ua(R[Za-1],R[Za])),Ja.push(Ca(ja[Za-1],ja[Za]));return function(Ya){var jb=Rb.bisect(R,Ya,1,Ta)-1;return Ja[jb](Ea[jb](Ya))}}function U(R,ja,ua,Ca){function Ea(){var Ya=2<Math.min(R.length,ja.length)?Bb:xj,jb=Ca?Ng:Dh;Za=Ya(R,ja,jb,ua);Ta=Ya(ja,R,jb,cg);return Ja}function Ja(Ya){return Za(Ya)}var Za,Ta;Ja.invert=function(Ya){return Ta(Ya)};Ja.domain=function(Ya){if(!arguments.length)return R;R=Ya.map(Number);return Ea()};Ja.range=function(Ya){if(!arguments.length)return ja;
ja=Ya;return Ea()};Ja.rangeRound=function(Ya){return Ja.range(Ya).interpolate(Wh)};Ja.clamp=function(Ya){if(!arguments.length)return Ca;Ca=Ya;return Ea()};Ja.interpolate=function(Ya){if(!arguments.length)return ua;ua=Ya;return Ea()};Ja.ticks=function(Ya){return Rb.range.apply(Rb,fa(R,Ya))};Ja.tickFormat=function(Ya,jb){return za(R,Ya,jb)};Ja.nice=function(Ya){W(R,Ya);return Ea()};Ja.copy=function(){return U(R,ja,ua,Ca)};return Ea()}function X(R,ja){return Rb.rebind(R,ja,"range","rangeRound","interpolate",
"clamp")}function W(R,ja){pi(R,ei(fa(R,ja)[2]));pi(R,ei(fa(R,ja)[2]));return R}function fa(R,ja){null==ja&&(ja=10);R=Xf(R);var ua=R[1]-R[0],Ca=Math.pow(10,Math.floor(Math.log(ua/ja)/Math.LN10));ja=ja/ua*Ca;.15>=ja?Ca*=10:.35>=ja?Ca*=5:.75>=ja&&(Ca*=2);R[0]=Math.ceil(R[0]/Ca)*Ca;R[1]=Math.floor(R[1]/Ca)*Ca+.5*Ca;R[2]=Ca;return R}function za(R,ja,ua){R=fa(R,ja);if(ua){ja=fi.exec(ua);ja.shift();if("s"===ja[8]){var Ca=Rb.formatPrefix(Math.max(kd(R[0]),kd(R[1])));ja[7]||(ja[7]="."+Na(Ca.scale(R[2])));
ja[8]="f";ua=Rb.format(ja.join(""));return function(Ea){return ua(Ca.scale(Ea))+Ca.symbol}}ja[7]||(ja[7]="."+ab(ja[8],R));ua=ja.join("")}else ua=",."+Na(R[2])+"f";return Rb.format(ua)}function Na(R){return-Math.floor(Math.log(R)/Math.LN10+.01)}function ab(R,ja){var ua=Na(ja[2]);return R in Li?Math.abs(ua-Na(Math.max(kd(ja[0]),kd(ja[1]))))+ +("e"!==R):ua-2*("%"===R)}function mb(R,ja,ua,Ca){function Ea(Ta){return(ua?Math.log(0>Ta?0:Ta):-Math.log(0<Ta?0:-Ta))/Math.log(ja)}function Ja(Ta){return ua?Math.pow(ja,
Ta):-Math.pow(ja,-Ta)}function Za(Ta){return R(Ea(Ta))}Za.invert=function(Ta){return Ja(R.invert(Ta))};Za.domain=function(Ta){if(!arguments.length)return Ca;ua=0<=Ta[0];R.domain((Ca=Ta.map(Number)).map(Ea));return Za};Za.base=function(Ta){if(!arguments.length)return ja;ja=+Ta;R.domain(Ca.map(Ea));return Za};Za.nice=function(){var Ta=pi(Ca.map(Ea),ua?Math:zg);R.domain(Ta);Ca=Ta.map(Ja);return Za};Za.ticks=function(){var Ta=Xf(Ca),Ya=[],jb=Ta[0];Ta=Ta[1];var ub=Math.floor(Ea(jb)),Fb=Math.ceil(Ea(Ta)),
Lb=ja%1?2:ja;if(isFinite(Fb-ub)){if(ua){for(;ub<Fb;ub++)for(var Tb=1;Tb<Lb;Tb++)Ya.push(Ja(ub)*Tb);Ya.push(Ja(ub))}else for(Ya.push(Ja(ub));ub++<Fb;)for(Tb=Lb-1;0<Tb;Tb--)Ya.push(Ja(ub)*Tb);for(ub=0;Ya[ub]<jb;ub++);for(Fb=Ya.length;Ya[Fb-1]>Ta;Fb--);Ya=Ya.slice(ub,Fb)}return Ya};Za.tickFormat=function(Ta,Ya){if(!arguments.length)return Sg;2>arguments.length?Ya=Sg:"function"!==typeof Ya&&(Ya=Rb.format(Ya));var jb=Math.max(1,ja*Ta/Za.ticks().length);return function(ub){var Fb=ub/Ja(Math.round(Ea(ub)));
Fb*ja<ja-.5&&(Fb*=ja);return Fb<=jb?Ya(ub):""}};Za.copy=function(){return mb(R.copy(),ja,ua,Ca)};return X(Za,R)}function Mb(R,ja,ua){function Ca(Za){return R(Ea(Za))}var Ea=Ub(ja),Ja=Ub(1/ja);Ca.invert=function(Za){return Ja(R.invert(Za))};Ca.domain=function(Za){if(!arguments.length)return ua;R.domain((ua=Za.map(Number)).map(Ea));return Ca};Ca.ticks=function(Za){return Rb.range.apply(Rb,fa(ua,Za))};Ca.tickFormat=function(Za,Ta){return za(ua,Za,Ta)};Ca.nice=function(Za){return Ca.domain(W(ua,Za))};
Ca.exponent=function(Za){if(!arguments.length)return ja;Ea=Ub(ja=Za);Ja=Ub(1/ja);R.domain(ua.map(Ea));return Ca};Ca.copy=function(){return Mb(R.copy(),ja,ua)};return X(Ca,R)}function Ub(R){return function(ja){return 0>ja?-Math.pow(-ja,R):Math.pow(ja,R)}}function Zb(R,ja){function ua(Ta){return Ja[((Ea.get(Ta)||("range"===ja.t?Ea.set(Ta,R.push(Ta)):NaN))-1)%Ja.length]}function Ca(Ta,Ya){return Rb.range(R.length).map(function(jb){return Ta+Ya*jb})}var Ea,Ja,Za;ua.domain=function(Ta){if(!arguments.length)return R;
R=[];Ea=new l;for(var Ya=-1,jb=Ta.length,ub;++Ya<jb;)Ea.has(ub=Ta[Ya])||Ea.set(ub,R.push(ub));return ua[ja.t].apply(ua,ja.a)};ua.range=function(Ta){if(!arguments.length)return Ja;Ja=Ta;Za=0;ja={t:"range",a:arguments};return ua};ua.rangePoints=function(Ta,Ya){2>arguments.length&&(Ya=0);var jb=Ta[0],ub=Ta[1];ub=2>R.length?(jb=(jb+ub)/2,0):(ub-jb)/(R.length-1+Ya);Ja=Ca(jb+ub*Ya/2,ub);Za=0;ja={t:"rangePoints",a:arguments};return ua};ua.rangeRoundPoints=function(Ta,Ya){2>arguments.length&&(Ya=0);var jb=
Ta[0],ub=Ta[1],Fb=2>R.length?(jb=ub=Math.round((jb+ub)/2),0):(ub-jb)/(R.length-1+Ya)|0;Ja=Ca(jb+Math.round(Fb*Ya/2+(ub-jb-(R.length-1+Ya)*Fb)/2),Fb);Za=0;ja={t:"rangeRoundPoints",a:arguments};return ua};ua.rangeBands=function(Ta,Ya,jb){2>arguments.length&&(Ya=0);3>arguments.length&&(jb=Ya);var ub=Ta[1]<Ta[0],Fb=Ta[ub-0],Lb=(Ta[1-ub]-Fb)/(R.length-Ya+2*jb);Ja=Ca(Fb+Lb*jb,Lb);ub&&Ja.reverse();Za=Lb*(1-Ya);ja={t:"rangeBands",a:arguments};return ua};ua.rangeRoundBands=function(Ta,Ya,jb){2>arguments.length&&
(Ya=0);3>arguments.length&&(jb=Ya);var ub=Ta[1]<Ta[0],Fb=Ta[ub-0],Lb=Ta[1-ub],Tb=Math.floor((Lb-Fb)/(R.length-Ya+2*jb));Ja=Ca(Fb+Math.round((Lb-Fb-(R.length-Ya)*Tb)/2),Tb);ub&&Ja.reverse();Za=Math.round(Tb*(1-Ya));ja={t:"rangeRoundBands",a:arguments};return ua};ua.rangeBand=function(){return Za};ua.rangeExtent=function(){return Xf(ja.a[0])};ua.copy=function(){return Zb(R,ja)};return ua.domain(R)}function Jc(R,ja){function ua(){var Ja=0,Za=ja.length;for(Ea=[];++Ja<Za;)Ea[Ja-1]=Rb.quantile(R,Ja/Za);
return Ca}function Ca(Ja){if(!isNaN(Ja=+Ja))return ja[Rb.bisect(Ea,Ja)]}var Ea;Ca.domain=function(Ja){if(!arguments.length)return R;R=Ja.map(p).filter(h).sort(n);return ua()};Ca.range=function(Ja){if(!arguments.length)return ja;ja=Ja;return ua()};Ca.quantiles=function(){return Ea};Ca.invertExtent=function(Ja){Ja=ja.indexOf(Ja);return 0>Ja?[NaN,NaN]:[0<Ja?Ea[Ja-1]:R[0],Ja<Ea.length?Ea[Ja]:R[R.length-1]]};Ca.copy=function(){return Jc(R,ja)};return ua()}function Ic(R,ja,ua){function Ca(Ta){return ua[Math.max(0,
Math.min(Za,Math.floor(Ja*(Ta-R))))]}function Ea(){Ja=ua.length/(ja-R);Za=ua.length-1;return Ca}var Ja,Za;Ca.domain=function(Ta){if(!arguments.length)return[R,ja];R=+Ta[0];ja=+Ta[Ta.length-1];return Ea()};Ca.range=function(Ta){if(!arguments.length)return ua;ua=Ta;return Ea()};Ca.invertExtent=function(Ta){Ta=ua.indexOf(Ta);Ta=0>Ta?NaN:Ta/Ja+R;return[Ta,Ta+1/Ja]};Ca.copy=function(){return Ic(R,ja,ua)};return Ea()}function yc(R,ja){function ua(Ca){if(Ca<=Ca)return ja[Rb.bisect(R,Ca)]}ua.domain=function(Ca){if(!arguments.length)return R;
R=Ca;return ua};ua.range=function(Ca){if(!arguments.length)return ja;ja=Ca;return ua};ua.invertExtent=function(Ca){Ca=ja.indexOf(Ca);return[R[Ca-1],R[Ca]]};ua.copy=function(){return yc(R,ja)};return ua}function Hc(R){function ja(ua){return+ua}ja.invert=ja;ja.domain=ja.range=function(ua){if(!arguments.length)return R;R=ua.map(ja);return ja};ja.ticks=function(ua){return Rb.range.apply(Rb,fa(R,ua))};ja.tickFormat=function(ua,Ca){return za(R,ua,Ca)};ja.copy=function(){return Hc(R)};return ja}function Dc(){return 0}
function Xb(R){return R.innerRadius}function va(R){return R.outerRadius}function Da(R){return R.startAngle}function Oa(R){return R.endAngle}function bb(R){return R&&R.padAngle}function nb(R,ja,ua,Ca){return 0<(R-ua)*ja-(ja-Ca)*R?0:1}function Kb(R,ja,ua,Ca,Ea){var Ja=R[0]-ja[0],Za=R[1]-ja[1];Ea=(Ea?Ca:-Ca)/Math.sqrt(Ja*Ja+Za*Za);Za*=Ea;Ja*=-Ea;var Ta=R[0]+Za,Ya=R[1]+Ja,jb=ja[0]+Za,ub=ja[1]+Ja;R=(Ta+jb)/2;ja=(Ya+ub)/2;Ea=jb-Ta;var Fb=ub-Ya,Lb=Ea*Ea+Fb*Fb;Ca=ua-Ca;ub=Ta*ub-jb*Ya;var Tb=(0>Fb?-1:1)*Math.sqrt(Math.max(0,
Ca*Ca*Lb-ub*ub));Ta=(ub*Fb-Ea*Tb)/Lb;Ya=(-ub*Ea-Fb*Tb)/Lb;jb=(ub*Fb+Ea*Tb)/Lb;Ea=(-ub*Ea+Fb*Tb)/Lb;Fb=Ta-R;Lb=Ya-ja;R=jb-R;ja=Ea-ja;Fb*Fb+Lb*Lb>R*R+ja*ja&&(Ta=jb,Ya=Ea);return[[Ta-Za,Ya-Ja],[Ta*ua/Ca,Ya*ua/Ca]]}function Pb(R){function ja(Ya){function jb(){ub.push("M",Ja(R(Fb),Ta))}for(var ub=[],Fb=[],Lb=-1,Tb=Ya.length,Wb,nc=xa(ua),wc=xa(Ca);++Lb<Tb;)Ea.call(this,Wb=Ya[Lb],Lb)?Fb.push([+nc.call(this,Wb,Lb),+wc.call(this,Wb,Lb)]):Fb.length&&(jb(),Fb=[]);Fb.length&&jb();return ub.length?ub.join(""):
null}var ua=mf,Ca=If,Ea=Sc,Ja=pc,Za=Ja.key,Ta=.7;ja.x=function(Ya){if(!arguments.length)return ua;ua=Ya;return ja};ja.y=function(Ya){if(!arguments.length)return Ca;Ca=Ya;return ja};ja.defined=function(Ya){if(!arguments.length)return Ea;Ea=Ya;return ja};ja.interpolate=function(Ya){if(!arguments.length)return Za;Za="function"===typeof Ya?Ja=Ya:(Ja=Dk.get(Ya)||pc).key;return ja};ja.tension=function(Ya){if(!arguments.length)return Ta;Ta=Ya;return ja};return ja}function pc(R){return 1<R.length?R.join("L"):
R+"Z"}function hc(R){return R.join("L")+"Z"}function kc(R){for(var ja=0,ua=R.length,Ca=R[0],Ea=[Ca[0],",",Ca[1]];++ja<ua;)Ea.push("V",(Ca=R[ja])[1],"H",Ca[0]);return Ea.join("")}function Xc(R){for(var ja=0,ua=R.length,Ca=R[0],Ea=[Ca[0],",",Ca[1]];++ja<ua;)Ea.push("H",(Ca=R[ja])[0],"V",Ca[1]);return Ea.join("")}function fd(R,ja){if(1>ja.length||R.length!=ja.length&&R.length!=ja.length+2)return pc(R);var ua=R.length!=ja.length,Ca="",Ea=R[0],Ja=R[1],Za=ja[0],Ta=Za,Ya=1;ua&&(Ca+="Q"+(Ja[0]-2*Za[0]/3)+
","+(Ja[1]-2*Za[1]/3)+","+Ja[0]+","+Ja[1],Ea=R[1],Ya=2);if(1<ja.length)for(Ta=ja[1],Ja=R[Ya],Ya++,Ca+="C"+(Ea[0]+Za[0])+","+(Ea[1]+Za[1])+","+(Ja[0]-Ta[0])+","+(Ja[1]-Ta[1])+","+Ja[0]+","+Ja[1],Ea=2;Ea<ja.length;Ea++,Ya++)Ja=R[Ya],Ta=ja[Ea],Ca+="S"+(Ja[0]-Ta[0])+","+(Ja[1]-Ta[1])+","+Ja[0]+","+Ja[1];ua&&(R=R[Ya],Ca+="Q"+(Ja[0]+2*Ta[0]/3)+","+(Ja[1]+2*Ta[1]/3)+","+R[0]+","+R[1]);return Ca}function rd(R,ja){var ua=[];ja=(1-ja)/2;for(var Ca,Ea=R[0],Ja=R[1],Za=1,Ta=R.length;++Za<Ta;)Ca=Ea,Ea=Ja,Ja=R[Za],
ua.push([ja*(Ja[0]-Ca[0]),ja*(Ja[1]-Ca[1])]);return ua}function zd(R){if(3>R.length)return pc(R);var ja=1,ua=R.length,Ca=R[0],Ea=Ca[0],Ja=Ca[1],Za=[Ea,Ea,Ea,(Ca=R[1])[0]],Ta=[Ja,Ja,Ja,Ca[1]];Ea=[Ea,",",Ja,"L",Hd(ii,Za),",",Hd(ii,Ta)];for(R.push(R[ua-1]);++ja<=ua;)Ca=R[ja],Za.shift(),Za.push(Ca[0]),Ta.shift(),Ta.push(Ca[1]),Bd(Ea,Za,Ta);R.pop();Ea.push("L",Ca);return Ea.join("")}function Hd(R,ja){return R[0]*ja[0]+R[1]*ja[1]+R[2]*ja[2]+R[3]*ja[3]}function Bd(R,ja,ua){R.push("C",Hd(Zk,ja),",",Hd(Zk,
ua),",",Hd(Lg,ja),",",Hd(Lg,ua),",",Hd(ii,ja),",",Hd(ii,ua))}function Pd(R,ja){return(ja[1]-R[1])/(ja[0]-R[0])}function fe(R){for(var ja,ua=-1,Ca=R.length,Ea,Ja;++ua<Ca;)ja=R[ua],Ea=ja[0],Ja=ja[1]-yf,ja[0]=Ea*Math.cos(Ja),ja[1]=Ea*Math.sin(Ja);return R}function Xd(R){function ja(Lb){function Tb(){Wb.push("M",Ta(R(wc),Fb),ub,jb(R(nc.reverse()),Fb),"Z")}for(var Wb=[],nc=[],wc=[],Ec=-1,Uc=Lb.length,bd,dd=xa(ua),id=xa(Ea),gc=ua===Ca?function(){return Vc}:xa(Ca),xc=Ea===Ja?function(){return qd}:xa(Ja),
Vc,qd;++Ec<Uc;)Za.call(this,bd=Lb[Ec],Ec)?(nc.push([Vc=+dd.call(this,bd,Ec),qd=+id.call(this,bd,Ec)]),wc.push([+gc.call(this,bd,Ec),+xc.call(this,bd,Ec)])):nc.length&&(Tb(),nc=[],wc=[]);nc.length&&Tb();return Wb.length?Wb.join(""):null}var ua=mf,Ca=mf,Ea=0,Ja=If,Za=Sc,Ta=pc,Ya=Ta.key,jb=Ta,ub="L",Fb=.7;ja.x=function(Lb){if(!arguments.length)return Ca;ua=Ca=Lb;return ja};ja.x0=function(Lb){if(!arguments.length)return ua;ua=Lb;return ja};ja.x1=function(Lb){if(!arguments.length)return Ca;Ca=Lb;return ja};
ja.y=function(Lb){if(!arguments.length)return Ja;Ea=Ja=Lb;return ja};ja.y0=function(Lb){if(!arguments.length)return Ea;Ea=Lb;return ja};ja.y1=function(Lb){if(!arguments.length)return Ja;Ja=Lb;return ja};ja.defined=function(Lb){if(!arguments.length)return Za;Za=Lb;return ja};ja.interpolate=function(Lb){if(!arguments.length)return Ya;Ya="function"===typeof Lb?Ta=Lb:(Ta=Dk.get(Lb)||pc).key;jb=Ta.reverse||Ta;ub=Ta.closed?"M":"L";return ja};ja.tension=function(Lb){if(!arguments.length)return Fb;Fb=Lb;
return ja};return ja}function oe(R){return R.radius}function Fe(R){return[R.x,R.y]}function ee(R){return function(){var ja=R.apply(this,arguments),ua=ja[0];ja=ja[1]-yf;return[ua*Math.cos(ja),ua*Math.sin(ja)]}}function Pe(){return 64}function Se(){return"circle"}function cf(R){R=Math.sqrt(R/ie);return"M0,"+R+"A"+R+","+R+" 0 1,1 0,"+-R+"A"+R+","+R+" 0 1,1 0,"+R+"Z"}function We(R){return function(){var ja,ua,Ca;(ja=this[R])&&(Ca=ja[ua=ja.active])&&(Ca.timer.c=null,Ca.timer.t=NaN,--ja.count?delete ja[ua]:
delete this[R],ja.active+=.5,Ca.event&&Ca.event.interrupt.call(this,this.__data__,Ca.index))}}function $f(R,ja,ua){Le(R,Mf);R.namespace=ja;R.id=ua;return R}function Xe(R,ja,ua,Ca){var Ea=R.id,Ja=R.namespace;return Y(R,"function"===typeof ua?function(Za,Ta,Ya){Za[Ja][Ea].tween.set(ja,Ca(ua.call(Za,Za.__data__,Ta,Ya)))}:(ua=Ca(ua),function(Za){Za[Ja][Ea].tween.set(ja,ua)}))}function sg(R){null==R&&(R="");return function(){this.textContent=R}}function $d(R){return null==R?"__transition__":"__transition_"+
R+"__"}function Qe(R,ja,ua,Ca,Ea){function Ja(nc){var wc=jb.delay;Wb.t=wc+Tb;if(wc<=nc)return Za(nc-wc);Wb.c=Za}function Za(nc){var wc=Ya.active,Ec=Ya[wc];Ec&&(Ec.timer.c=null,Ec.timer.t=NaN,--Ya.count,delete Ya[wc],Ec.event&&Ec.event.interrupt.call(R,R.__data__,Ec.index));for(var Uc in Ya)+Uc<Ca&&(wc=Ya[Uc],wc.timer.c=null,wc.timer.t=NaN,--Ya.count,delete Ya[Uc]);Wb.c=Ta;Ma(function(){Wb.c&&Ta(nc||1)&&(Wb.c=null,Wb.t=NaN);return 1},0,Tb);Ya.active=Ca;jb.event&&jb.event.start.call(R,R.__data__,ja);
Lb=[];jb.tween.forEach(function(bd,dd){(dd=dd.call(R,R.__data__,ja))&&Lb.push(dd)});Fb=jb.ease;ub=jb.duration}function Ta(nc){nc/=ub;for(var wc=Fb(nc),Ec=Lb.length;0<Ec;)Lb[--Ec].call(R,wc);if(1<=nc)return jb.event&&jb.event.end.call(R,R.__data__,ja),--Ya.count?delete Ya[Ca]:delete R[ua],1}var Ya=R[ua]||(R[ua]={active:0,count:0}),jb=Ya[Ca],ub,Fb,Lb;if(!jb){var Tb=Ea.time;var Wb=Ma(Ja,0,Tb);jb=Ya[Ca]={tween:new l,time:Tb,timer:Wb,delay:Ea.delay,duration:Ea.duration,ease:Ea.ease,index:ja};Ea=null;++Ya.count}}
function of(R,ja,ua){R.attr("transform",function(Ca){var Ea=ja(Ca);return"translate("+(isFinite(Ea)?Ea:ua(Ca))+",0)"})}function Wf(R,ja,ua){R.attr("transform",function(Ca){var Ea=ja(Ca);return"translate(0,"+(isFinite(Ea)?Ea:ua(Ca))+")"})}function Sf(R){return R.toISOString()}function ff(R,ja,ua){function Ca(Ja){return R(Ja)}function Ea(Ja,Za){var Ta=(Ja[1]-Ja[0])/Za,Ya=Rb.bisect(xi,Ta);return Ya==xi.length?[ja.year,fa(Ja.map(function(jb){return jb/31536E6}),Za)[2]]:Ya?ja[Ta/xi[Ya-1]<xi[Ya]/Ta?Ya-
1:Ya]:[Kh,fa(Ja,Za)[2]]}Ca.invert=function(Ja){return xf(R.invert(Ja))};Ca.domain=function(Ja){if(!arguments.length)return R.domain().map(xf);R.domain(Ja);return Ca};Ca.nice=function(Ja,Za){function Ta(ub){return!isNaN(ub)&&!Ja.range(ub,xf(+ub+1),Za).length}var Ya=Ca.domain(),jb=Xf(Ya);if(jb=null==Ja?Ea(jb,10):"number"===typeof Ja&&Ea(jb,Ja))Ja=jb[0],Za=jb[1];return Ca.domain(pi(Ya,1<Za?{floor:function(ub){for(;Ta(ub=Ja.floor(ub));)ub=xf(ub-1);return ub},ceil:function(ub){for(;Ta(ub=Ja.ceil(ub));)ub=
xf(+ub+1);return ub}}:Ja))};Ca.ticks=function(Ja,Za){var Ta=Xf(Ca.domain()),Ya=null==Ja?Ea(Ta,10):"number"===typeof Ja?Ea(Ta,Ja):!Ja.range&&[{range:Ja},Za];Ya&&(Ja=Ya[0],Za=Ya[1]);return Ja.range(Ta[0],xf(+Ta[1]+1),1>Za?1:Za)};Ca.tickFormat=function(){return ua};Ca.copy=function(){return ff(R.copy(),ja,ua)};return X(Ca,R)}function xf(R){return new Date(R)}function $h(R){return JSON.parse(R.responseText)}function Wg(R){var ja=Cf.createRange();ja.selectNode(Cf.body);return ja.createContextualFragment(R.responseText)}
var Rb={version:"3.5.17"},Mj=[].slice,fg=function(R){return Mj.call(R)},Cf=this.document;if(Cf)try{fg(Cf.documentElement.childNodes)[0].nodeType}catch(R){fg=function(ja){for(var ua=ja.length,Ca=Array(ua);ua--;)Ca[ua]=ja[ua];return Ca}}Date.now||(Date.now=function(){return+new Date});if(Cf)try{Cf.createElement("DIV").style.setProperty("opacity",0,"")}catch(R){var ai=this.Element.prototype,Gf=ai.setAttribute,Eh=ai.setAttributeNS,ph=this.CSSStyleDeclaration.prototype,Fh=ph.setProperty;ai.setAttribute=
function(ja,ua){Gf.call(this,ja,ua+"")};ai.setAttributeNS=function(ja,ua,Ca){Eh.call(this,ja,ua,Ca+"")};ph.setProperty=function(ja,ua,Ca){Fh.call(this,ja,ua+"",Ca)}}Rb.ascending=n;Rb.descending=function(R,ja){return ja<R?-1:ja>R?1:ja>=R?0:NaN};Rb.min=function(R,ja){var ua=-1,Ca=R.length,Ea;if(1===arguments.length){for(;++ua<Ca;)if(null!=(Ea=R[ua])&&Ea>=Ea){var Ja=Ea;break}for(;++ua<Ca;)null!=(Ea=R[ua])&&Ja>Ea&&(Ja=Ea)}else{for(;++ua<Ca;)if(null!=(Ea=ja.call(R,R[ua],ua))&&Ea>=Ea){Ja=Ea;break}for(;++ua<
Ca;)null!=(Ea=ja.call(R,R[ua],ua))&&Ja>Ea&&(Ja=Ea)}return Ja};Rb.max=function(R,ja){var ua=-1,Ca=R.length,Ea;if(1===arguments.length){for(;++ua<Ca;)if(null!=(Ea=R[ua])&&Ea>=Ea){var Ja=Ea;break}for(;++ua<Ca;)null!=(Ea=R[ua])&&Ea>Ja&&(Ja=Ea)}else{for(;++ua<Ca;)if(null!=(Ea=ja.call(R,R[ua],ua))&&Ea>=Ea){Ja=Ea;break}for(;++ua<Ca;)null!=(Ea=ja.call(R,R[ua],ua))&&Ea>Ja&&(Ja=Ea)}return Ja};Rb.extent=function(R,ja){var ua=-1,Ca=R.length,Ea,Ja;if(1===arguments.length){for(;++ua<Ca;)if(null!=(Ea=R[ua])&&Ea>=
Ea){var Za=Ja=Ea;break}for(;++ua<Ca;)null!=(Ea=R[ua])&&(Za>Ea&&(Za=Ea),Ja<Ea&&(Ja=Ea))}else{for(;++ua<Ca;)if(null!=(Ea=ja.call(R,R[ua],ua))&&Ea>=Ea){Za=Ja=Ea;break}for(;++ua<Ca;)null!=(Ea=ja.call(R,R[ua],ua))&&(Za>Ea&&(Za=Ea),Ja<Ea&&(Ja=Ea))}return[Za,Ja]};Rb.sum=function(R,ja){var ua=0,Ca=R.length,Ea,Ja=-1;if(1===arguments.length)for(;++Ja<Ca;)isNaN(Ea=+R[Ja])||(ua+=Ea);else for(;++Ja<Ca;)isNaN(Ea=+ja.call(R,R[Ja],Ja))||(ua+=Ea);return ua};Rb.mean=function(R,ja){var ua=0,Ca=R.length,Ea,Ja=-1,Za=
Ca;if(1===arguments.length)for(;++Ja<Ca;)isNaN(Ea=p(R[Ja]))?--Za:ua+=Ea;else for(;++Ja<Ca;)isNaN(Ea=p(ja.call(R,R[Ja],Ja)))?--Za:ua+=Ea;if(Za)return ua/Za};Rb.quantile=function(R,ja){var ua=(R.length-1)*ja+1;ja=Math.floor(ua);var Ca=+R[ja-1];return(ua-=ja)?Ca+ua*(R[ja]-Ca):Ca};Rb.median=function(R,ja){var ua=[],Ca=R.length,Ea,Ja=-1;if(1===arguments.length)for(;++Ja<Ca;)isNaN(Ea=p(R[Ja]))||ua.push(Ea);else for(;++Ja<Ca;)isNaN(Ea=p(ja.call(R,R[Ja],Ja)))||ua.push(Ea);if(ua.length)return Rb.quantile(ua.sort(n),
.5)};Rb.variance=function(R,ja){var ua=R.length,Ca=0,Ea,Ja=0,Za=-1,Ta=0;if(1===arguments.length)for(;++Za<ua;){if(!isNaN(Ea=p(R[Za]))){var Ya=Ea-Ca;Ca+=Ya/++Ta;Ja+=Ya*(Ea-Ca)}}else for(;++Za<ua;)isNaN(Ea=p(ja.call(R,R[Za],Za)))||(Ya=Ea-Ca,Ca+=Ya/++Ta,Ja+=Ya*(Ea-Ca));if(1<Ta)return Ja/(Ta-1)};Rb.deviation=function(){var R=Rb.variance.apply(this,arguments);return R?Math.sqrt(R):R};var pe=a(n);Rb.bisectLeft=pe.left;Rb.bisect=Rb.bisectRight=pe.right;Rb.bisector=function(R){return a(1===R.length?function(ja,
ua){return n(R(ja),ua)}:R)};Rb.shuffle=function(R,ja,ua){3>(Ca=arguments.length)&&(ua=R.length,2>Ca&&(ja=0));for(var Ca=ua-ja,Ea,Ja;Ca;)Ja=Math.random()*Ca--|0,Ea=R[Ca+ja],R[Ca+ja]=R[Ja+ja],R[Ja+ja]=Ea;return R};Rb.permute=function(R,ja){for(var ua=ja.length,Ca=Array(ua);ua--;)Ca[ua]=R[ja[ua]];return Ca};Rb.pairs=function(R){for(var ja=0,ua=R.length-1,Ca=R[0],Ea=Array(0>ua?0:ua);ja<ua;)Ea[ja]=[Ca,Ca=R[++ja]];return Ea};Rb.transpose=function(R){if(!(Ja=R.length))return[];for(var ja=-1,ua=Rb.min(R,
f),Ca=Array(ua);++ja<ua;)for(var Ea=-1,Ja,Za=Ca[ja]=Array(Ja);++Ea<Ja;)Za[Ea]=R[Ea][ja];return Ca};Rb.zip=function(){return Rb.transpose(arguments)};Rb.keys=function(R){var ja=[],ua;for(ua in R)ja.push(ua);return ja};Rb.values=function(R){var ja=[],ua;for(ua in R)ja.push(R[ua]);return ja};Rb.entries=function(R){var ja=[],ua;for(ua in R)ja.push({key:ua,value:R[ua]});return ja};Rb.merge=function(R){var ja=R.length;var ua=-1;for(var Ca=0,Ea,Ja;++ua<ja;)Ca+=R[ua].length;for(Ea=Array(Ca);0<=--ja;)for(Ja=
R[ja],ua=Ja.length;0<=--ua;)Ea[--Ca]=Ja[ua];return Ea};var kd=Math.abs;Rb.range=function(R,ja,ua){3>arguments.length&&(ua=1,2>arguments.length&&(ja=R,R=0));if(Infinity===(ja-R)/ua)throw Error("infinite range");var Ca=[];var Ea=kd(ua);for(var Ja=1;Ea*Ja%1;)Ja*=10;Ea=Ja;Ja=-1;var Za;R*=Ea;ja*=Ea;ua*=Ea;if(0>ua)for(;(Za=R+ua*++Ja)>ja;)Ca.push(Za/Ea);else for(;(Za=R+ua*++Ja)<ja;)Ca.push(Za/Ea);return Ca};Rb.map=function(R,ja){var ua=new l;if(R instanceof l)R.forEach(function(Za,Ta){ua.set(Za,Ta)});else if(Array.isArray(R)){var Ca=
-1,Ea=R.length,Ja;if(1===arguments.length)for(;++Ca<Ea;)ua.set(Ca,R[Ca]);else for(;++Ca<Ea;)ua.set(ja.call(R,Ja=R[Ca],Ca),Ja)}else for(Ca in R)ua.set(Ca,R[Ca]);return ua};d(l,{has:e,get:function(R){return this._[k(R)]},set:function(R,ja){return this._[k(R)]=ja},remove:g,keys:m,values:function(){var R=[],ja;for(ja in this._)R.push(this._[ja]);return R},entries:function(){var R=[],ja;for(ja in this._)R.push({key:c(ja),value:this._[ja]});return R},size:r,empty:u,forEach:function(R){for(var ja in this._)R.call(this,
c(ja),this._[ja])}});Rb.nest=function(){function R(Ta,Ya,jb){if(jb>=Ca.length)return Za?Za.call(ua,Ya):Ja?Ya.sort(Ja):Ya;for(var ub=-1,Fb=Ya.length,Lb=Ca[jb++],Tb,Wb,nc=new l,wc;++ub<Fb;)(wc=nc.get(Tb=Lb(Wb=Ya[ub])))?wc.push(Wb):nc.set(Tb,[Wb]);Ta?(Wb=Ta(),Ya=function(Ec,Uc){Wb.set(Ec,R(Ta,Uc,jb))}):(Wb={},Ya=function(Ec,Uc){Wb[Ec]=R(Ta,Uc,jb)});nc.forEach(Ya);return Wb}function ja(Ta,Ya){if(Ya>=Ca.length)return Ta;var jb=[],ub=Ea[Ya++];Ta.forEach(function(Fb,Lb){jb.push({key:Fb,values:ja(Lb,Ya)})});
return ub?jb.sort(function(Fb,Lb){return ub(Fb.key,Lb.key)}):jb}var ua={},Ca=[],Ea=[],Ja,Za;ua.map=function(Ta,Ya){return R(Ya,Ta,0)};ua.entries=function(Ta){return ja(R(Rb.map,Ta,0),0)};ua.key=function(Ta){Ca.push(Ta);return ua};ua.sortKeys=function(Ta){Ea[Ca.length-1]=Ta;return ua};ua.sortValues=function(Ta){Ja=Ta;return ua};ua.rollup=function(Ta){Za=Ta;return ua};return ua};Rb.set=function(R){var ja=new v;if(R)for(var ua=0,Ca=R.length;ua<Ca;++ua)ja.add(R[ua]);return ja};d(v,{has:e,add:function(R){this._[k(R+=
"")]=!0;return R},remove:g,values:m,size:r,empty:u,forEach:function(R){for(var ja in this._)R.call(this,c(ja))}});Rb.behavior={};Rb.rebind=function(R,ja){for(var ua=1,Ca=arguments.length,Ea;++ua<Ca;)R[Ea=arguments[ua]]=D(R,ja,ja[Ea]);return R};var Td="webkit ms moz Moz o O".split(" ");Rb.dispatch=function(){for(var R=new A,ja=-1,ua=arguments.length;++ja<ua;)R[arguments[ja]]=B(R);return R};A.prototype.on=function(R,ja){var ua=R.indexOf("."),Ca="";0<=ua&&(Ca=R.slice(ua+1),R=R.slice(0,ua));if(R)return 2>
arguments.length?this[R].on(Ca):this[R].on(Ca,ja);if(2===arguments.length){if(null==ja)for(R in this)if(this.hasOwnProperty(R))this[R].on(Ca,null);return this}};Rb.event=null;Rb.requote=function(R){return R.replace(He,"\\$\x26")};var He=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Le={}.__proto__?function(R,ja){R.__proto__=ja}:function(R,ja){for(var ua in ja)R[ua]=ja[ua]},sf=function(R,ja){return ja.querySelector(R)},Tf=function(R,ja){return ja.querySelectorAll(R)},Og=function(R,ja){var ua=R.matches||R[C(R,
"matchesSelector")];Og=function(Ca,Ea){return ua.call(Ca,Ea)};return Og(R,ja)};"function"===typeof Sizzle&&(sf=function(R,ja){return Sizzle(R,ja)[0]||null},Tf=Sizzle,Og=Sizzle.matchesSelector);Rb.selection=function(){return Rb.select(Cf.documentElement)};var Re=Rb.selection.prototype=[];Re.select=function(R){var ja=[],ua,Ca,Ea,Ja;R=J(R);for(var Za=-1,Ta=this.length;++Za<Ta;){ja.push(ua=[]);ua.parentNode=(Ea=this[Za]).parentNode;for(var Ya=-1,jb=Ea.length;++Ya<jb;)(Ja=Ea[Ya])?(ua.push(Ca=R.call(Ja,
Ja.__data__,Ya,Za)),Ca&&"__data__"in Ja&&(Ca.__data__=Ja.__data__)):ua.push(null)}return I(ja)};Re.selectAll=function(R){var ja=[],ua,Ca;R=L(R);for(var Ea=-1,Ja=this.length;++Ea<Ja;)for(var Za=this[Ea],Ta=-1,Ya=Za.length;++Ta<Ya;)if(Ca=Za[Ta])ja.push(ua=fg(R.call(Ca,Ca.__data__,Ta,Ea))),ua.parentNode=Ca;return I(ja)};var ci={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
Rb.ns={prefix:ci,qualify:function(R){var ja=R.indexOf(":"),ua=R;0<=ja&&"xmlns"!==(ua=R.slice(0,ja))&&(R=R.slice(ja+1));return ci.hasOwnProperty(ua)?{space:ci[ua],local:R}:R}};Re.attr=function(R,ja){if(2>arguments.length){if("string"===typeof R){var ua=this.node();R=Rb.ns.qualify(R);return R.local?ua.getAttributeNS(R.space,R.local):ua.getAttribute(R)}for(ja in R)this.each(E(ja,R[ja]));return this}return this.each(E(R,ja))};Re.classed=function(R,ja){if(2>arguments.length){if("string"===typeof R){var ua=
this.node(),Ca=(R=(R+"").trim().split(/^|\s+/)).length,Ea=-1;if(ja=ua.classList)for(;++Ea<Ca;){if(!ja.contains(R[Ea]))return!1}else for(ja=ua.getAttribute("class");++Ea<Ca;)if(!K(R[Ea]).test(ja))return!1;return!0}for(ja in R)this.each(N(ja,R[ja]));return this}return this.each(N(R,ja))};Re.style=function(R,ja,ua){var Ca=arguments.length;if(3>Ca){if("string"!==typeof R){2>Ca&&(ja="");for(ua in R)this.each(Q(ua,R[ua],ja));return this}if(2>Ca)return Ca=this.node(),q(Ca).getComputedStyle(Ca,null).getPropertyValue(R);
ua=""}return this.each(Q(R,ja,ua))};Re.property=function(R,ja){if(2>arguments.length){if("string"===typeof R)return this.node()[R];for(ja in R)this.each(P(ja,R[ja]));return this}return this.each(P(R,ja))};Re.text=function(R){return arguments.length?this.each("function"===typeof R?function(){var ja=R.apply(this,arguments);this.textContent=null==ja?"":ja}:null==R?function(){this.textContent=""}:function(){this.textContent=R}):this.node().textContent};Re.html=function(R){return arguments.length?this.each("function"===
typeof R?function(){var ja=R.apply(this,arguments);this.innerHTML=null==ja?"":ja}:null==R?function(){this.innerHTML=""}:function(){this.innerHTML=R}):this.node().innerHTML};Re.append=function(R){R=T(R);return this.select(function(){return this.appendChild(R.apply(this,arguments))})};Re.insert=function(R,ja){R=T(R);ja=J(ja);return this.select(function(){return this.insertBefore(R.apply(this,arguments),ja.apply(this,arguments)||null)})};Re.remove=function(){return this.each(V)};Re.data=function(R,ja){function ua(ub,
Fb){var Lb,Tb=ub.length,Wb=Fb.length,nc=Math.min(Tb,Wb),wc=Array(Wb),Ec=Array(Wb),Uc=Array(Tb),bd,dd;if(ja){nc=new l;var id=Array(Tb),gc;for(Lb=-1;++Lb<Tb;)if(bd=ub[Lb])nc.has(gc=ja.call(bd,bd.__data__,Lb))?Uc[Lb]=bd:nc.set(gc,bd),id[Lb]=gc;for(Lb=-1;++Lb<Wb;)(bd=nc.get(gc=ja.call(Fb,dd=Fb[Lb],Lb)))?!0!==bd&&(wc[Lb]=bd,bd.__data__=dd):Ec[Lb]={__data__:dd},nc.set(gc,!0);for(Lb=-1;++Lb<Tb;)Lb in id&&!0!==nc.get(id[Lb])&&(Uc[Lb]=ub[Lb])}else{for(Lb=-1;++Lb<nc;)bd=ub[Lb],dd=Fb[Lb],bd?(bd.__data__=dd,
wc[Lb]=bd):Ec[Lb]={__data__:dd};for(;Lb<Wb;++Lb)Ec[Lb]={__data__:Fb[Lb]};for(;Lb<Tb;++Lb)Uc[Lb]=ub[Lb]}Ec.update=wc;Ec.parentNode=wc.parentNode=Uc.parentNode=ub.parentNode;Ta.push(Ec);Ya.push(wc);jb.push(Uc)}var Ca=-1,Ea=this.length,Ja,Za;if(!arguments.length){for(R=Array(Ea=(Ja=this[0]).length);++Ca<Ea;)if(Za=Ja[Ca])R[Ca]=Za.__data__;return R}var Ta=ea([]),Ya=I([]),jb=I([]);if("function"===typeof R)for(;++Ca<Ea;)ua(Ja=this[Ca],R.call(Ja,Ja.parentNode.__data__,Ca));else for(;++Ca<Ea;)ua(Ja=this[Ca],
R);Ya.enter=function(){return Ta};Ya.exit=function(){return jb};return Ya};Re.datum=function(R){return arguments.length?this.property("__data__",R):this.property("__data__")};Re.filter=function(R){var ja=[],ua,Ca,Ea;"function"!==typeof R&&(R=aa(R));for(var Ja=0,Za=this.length;Ja<Za;Ja++){ja.push(ua=[]);ua.parentNode=(Ca=this[Ja]).parentNode;for(var Ta=0,Ya=Ca.length;Ta<Ya;Ta++)(Ea=Ca[Ta])&&R.call(Ea,Ea.__data__,Ta,Ja)&&ua.push(Ea)}return I(ja)};Re.order=function(){for(var R=-1,ja=this.length;++R<
ja;)for(var ua=this[R],Ca=ua.length-1,Ea=ua[Ca],Ja;0<=--Ca;)if(Ja=ua[Ca])Ea&&Ea!==Ja.nextSibling&&Ea.parentNode.insertBefore(Ja,Ea),Ea=Ja;return this};Re.sort=function(R){R=ba.apply(this,arguments);for(var ja=-1,ua=this.length;++ja<ua;)this[ja].sort(R);return this.order()};Re.each=function(R){return Y(this,function(ja,ua,Ca){R.call(ja,ja.__data__,ua,Ca)})};Re.call=function(R){var ja=fg(arguments);R.apply(ja[0]=this,ja);return this};Re.empty=function(){return!this.node()};Re.node=function(){for(var R=
0,ja=this.length;R<ja;R++)for(var ua=this[R],Ca=0,Ea=ua.length;Ca<Ea;Ca++){var Ja=ua[Ca];if(Ja)return Ja}return null};Re.size=function(){var R=0;Y(this,function(){++R});return R};var tg=[];Rb.selection.enter=ea;Rb.selection.enter.prototype=tg;tg.append=Re.append;tg.empty=Re.empty;tg.node=Re.node;tg.call=Re.call;tg.size=Re.size;tg.select=function(R){for(var ja=[],ua,Ca,Ea,Ja,Za,Ta=-1,Ya=this.length;++Ta<Ya;){Ea=(Ja=this[Ta]).update;ja.push(ua=[]);ua.parentNode=Ja.parentNode;for(var jb=-1,ub=Ja.length;++jb<
ub;)(Za=Ja[jb])?(ua.push(Ea[jb]=Ca=R.call(Ja.parentNode,Za.__data__,jb,Ta)),Ca.__data__=Za.__data__):ua.push(null)}return I(ja)};tg.insert=function(R,ja){2>arguments.length&&(ja=da(this));return Re.insert.call(this,R,ja)};Rb.select=function(R){if("string"===typeof R){var ja=[sf(R,Cf)];ja.parentNode=Cf.documentElement}else ja=[R],ja.parentNode=R&&(R.ownerDocument||R.document||R).documentElement;return I([ja])};Rb.selectAll=function(R){"string"===typeof R?(R=fg(Tf(R,Cf)),R.parentNode=Cf.documentElement):
(R=fg(R),R.parentNode=null);return I([R])};Re.on=function(R,ja,ua){var Ca=arguments.length;if(3>Ca){if("string"!==typeof R){2>Ca&&(ja=!1);for(ua in R)this.each(ca(ua,R[ua],ja));return this}if(2>Ca)return(Ca=this.node()["__on"+R])&&Ca._;ua=!1}return this.each(ca(R,ja,ua))};var Hh=Rb.map({mouseenter:"mouseover",mouseleave:"mouseout"});Cf&&Hh.forEach(function(R){"on"+R in Cf&&Hh.remove(R)});var Jf,ug=0;Rb.mouse=function(R){return oa(R,G())};var Pg=this.navigator&&/WebKit/.test(this.navigator.userAgent)?
-1:0;Rb.touch=function(R,ja,ua){3>arguments.length&&(ua=ja,ja=G().changedTouches);if(ja)for(var Ca=0,Ea=ja.length,Ja;Ca<Ea;++Ca)if((Ja=ja[Ca]).identifier===ua)return oa(R,Ja)};Rb.behavior.drag=function(){function R(){this.on("mousedown.drag",Ea).on("touchstart.drag",Ja)}function ja(Za,Ta,Ya,jb,ub){return function(){var Fb=Rb.event.target.correspondingElement||Rb.event.target,Lb=this.parentNode,Tb=ua.of(this,arguments),Wb=0,nc=Za(),wc=".drag"+(null==nc?"":"-"+nc),Ec=Rb.select(Ya(Fb)).on(jb+wc,function(){var id=
Ta(Lb,nc);if(id){var gc=id[0]-bd[0];var xc=id[1]-bd[1];Wb|=gc|xc;bd=id;Tb({type:"drag",x:id[0]+dd[0],y:id[1]+dd[1],dx:gc,dy:xc})}}).on(ub+wc,function(){Ta(Lb,nc)&&(Ec.on(jb+wc,null).on(ub+wc,null),Uc(Wb),Tb({type:"dragend"}))}),Uc=qa(Fb),bd=Ta(Lb,nc);if(Ca){var dd=Ca.apply(this,arguments);dd=[dd.x-bd[0],dd.y-bd[1]]}else dd=[0,0];Tb({type:"dragstart"})}}var ua=H(R,"drag","dragstart","dragend"),Ca=null,Ea=ja(x,Rb.mouse,q,"mousemove","mouseup"),Ja=ja(ka,Rb.touch,w,"touchmove","touchend");R.origin=function(Za){if(!arguments.length)return Ca;
Ca=Za;return R};return Rb.rebind(R,ua,"on")};Rb.touches=function(R,ja){2>arguments.length&&(ja=G().touches);return ja?fg(ja).map(function(ua){var Ca=oa(R,ua);Ca.identifier=ua.identifier;return Ca}):[]};var ie=Math.PI,Kf=2*ie,si=Kf-1E-6,yf=ie/2,ve=ie/180,jf=180/ie,Sj=Math.SQRT2;Rb.interpolateZoom=function(R,ja){var ua=R[0],Ca=R[1],Ea=R[2];R=ja[2];var Ja=ja[0]-ua,Za=ja[1]-Ca,Ta=Ja*Ja+Za*Za;if(1E-12>Ta){var Ya=Math.log(R/Ea)/Sj;R=function(Fb){return[ua+Fb*Ja,Ca+Fb*Za,Ea*Math.exp(Sj*Fb*Ya)]}}else{var jb=
Math.sqrt(Ta);ja=(R*R-Ea*Ea+4*Ta)/(4*Ea*jb);R=(R*R-Ea*Ea-4*Ta)/(4*R*jb);var ub=Math.log(Math.sqrt(ja*ja+1)-ja);Ya=(Math.log(Math.sqrt(R*R+1)-R)-ub)/Sj;R=function(Fb){Fb*=Ya;var Lb=wa(ub),Tb=Sj*Fb+ub;var Wb=((Tb=Math.exp(2*Tb))-1)/(Tb+1);var nc=ub;Tb=((nc=Math.exp(nc))-1/nc)/2;Wb=Ea/(2*jb)*(Lb*Wb-Tb);return[ua+Wb*Ja,Ca+Wb*Za,Ea*Lb/wa(Sj*Fb+ub)]}}R.duration=1E3*Ya;return R};Rb.behavior.zoom=function(){function R(nd){nd.on("mousedown.zoom",jb).on(lk+".zoom",Fb).on("dblclick.zoom",Lb).on("touchstart.zoom",
ub)}function ja(nd){return[(nd[0]-Tb.x)/Tb.k,(nd[1]-Tb.y)/Tb.k]}function ua(nd){Tb.k=Math.max(Uc[0],Math.min(Uc[1],nd))}function Ca(nd,Vd){Vd=[Vd[0]*Tb.k+Tb.x,Vd[1]*Tb.k+Tb.y];Tb.x+=nd[0]-Vd[0];Tb.y+=nd[1]-Vd[1]}function Ea(nd,Vd,ne,te){nd.__chart__={x:Tb.x,y:Tb.y,k:Tb.k};ua(Math.pow(2,te));Ca(nc=Vd,ne);nd=Rb.select(nd);0<bd&&(nd=nd.transition().duration(bd));nd.call(R.event)}function Ja(){qd&&qd.domain(Vc.range().map(function(nd){return(nd-Tb.x)/Tb.k}).map(Vc.invert));ud&&ud.domain(td.range().map(function(nd){return(nd-
Tb.y)/Tb.k}).map(td.invert))}function Za(nd){dd++||nd({type:"zoomstart"})}function Ta(nd){Ja();nd({type:"zoom",scale:Tb.k,translate:[Tb.x,Tb.y]})}function Ya(nd){--dd||(nd({type:"zoomend"}),nc=null)}function jb(){var nd=this,Vd=xc.of(nd,arguments),ne=0,te=Rb.select(q(nd)).on("mousemove.zoom",function(){ne=1;Ca(Rb.mouse(nd),De);Ta(Vd)}).on("mouseup.zoom",function(){te.on("mousemove.zoom",null).on("mouseup.zoom",null);we(ne);Ya(Vd)}),De=ja(Rb.mouse(nd)),we=qa(nd);Yf.call(nd);Za(Vd)}function ub(){function nd(){var gf=
Rb.touches(De);hg=Tb.k;gf.forEach(function(bf){bf.identifier in Je&&(Je[bf.identifier]=ja(bf))});return gf}function Vd(){var gf=Rb.event.target;Rb.select(gf).on(ah,ne).on($i,te);Pj.push(gf);gf=Rb.event.changedTouches;for(var bf=0,bh=gf.length;bf<bh;++bf)Je[gf[bf].identifier]=null;bf=nd();bh=Date.now();1===bf.length?(500>bh-gc&&(gf=bf[0],Ea(De,gf,Je[gf.identifier],Math.floor(Math.log(Tb.k)/Math.LN2)+1),t()),gc=bh):1<bf.length&&(gf=bf[0],bh=bf[1],bf=gf[0]-bh[0],gf=gf[1]-bh[1],ke=bf*bf+gf*gf)}function ne(){var gf=
Rb.touches(De),bf;Yf.call(De);for(var bh=0,Ek=gf.length;bh<Ek;++bh,bf=null){var dj=gf[bh];if(bf=Je[dj.identifier]){if(Cj)break;var ej=dj;var Cj=bf}}if(bf){var Mi=(Mi=dj[0]-ej[0])*Mi+(Mi=dj[1]-ej[1])*Mi;gf=ke&&Math.sqrt(Mi/ke);ej=[(ej[0]+dj[0])/2,(ej[1]+dj[1])/2];Cj=[(Cj[0]+bf[0])/2,(Cj[1]+bf[1])/2];ua(gf*hg)}gc=null;Ca(ej,Cj);Ta(we)}function te(){if(Rb.event.touches.length){for(var gf=Rb.event.changedTouches,bf=0,bh=gf.length;bf<bh;++bf)delete Je[gf[bf].identifier];for(var Ek in Je)return void nd()}Rb.selectAll(Pj).on(zf,
null);vi.on("mousedown.zoom",jb).on("touchstart.zoom",ub);Qj();Ya(we)}var De=this,we=xc.of(De,arguments),Je={},ke=0,hg,zf=".zoom-"+Rb.event.changedTouches[0].identifier,ah="touchmove"+zf,$i="touchend"+zf,Pj=[],vi=Rb.select(De),Qj=qa(De);Vd();Za(we);vi.on("mousedown.zoom",null).on("touchstart.zoom",Vd)}function Fb(){var nd=xc.of(this,arguments);id?clearTimeout(id):(Yf.call(this),Wb=ja(nc=wc||Rb.mouse(this)),Za(nd));id=setTimeout(function(){id=null;Ya(nd)},50);t();ua(Math.pow(2,.002*mk())*Tb.k);Ca(nc,
Wb);Ta(nd)}function Lb(){var nd=Rb.mouse(this),Vd=Math.log(Tb.k)/Math.LN2;Ea(this,nd,ja(nd),Rb.event.shiftKey?Math.ceil(Vd)-1:Math.floor(Vd)+1)}var Tb={x:0,y:0,k:1},Wb,nc,wc,Ec=[960,500],Uc=$k,bd=250,dd=0,id,gc,xc=H(R,"zoomstart","zoom","zoomend"),Vc,qd,td,ud;lk||(lk="onwheel"in Cf?(mk=function(){return-Rb.event.deltaY*(Rb.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Cf?(mk=function(){return Rb.event.wheelDelta},"mousewheel"):(mk=function(){return-Rb.event.detail},"MozMousePixelScroll"));R.event=
function(nd){nd.each(function(){var Vd=xc.of(this,arguments),ne=Tb;fj?Rb.select(this).transition().each("start.zoom",function(){Tb=this.__chart__||{x:0,y:0,k:1};Za(Vd)}).tween("zoom:zoom",function(){var te=Ec[0],De=Ec[1],we=nc?nc[0]:te/2,Je=nc?nc[1]:De/2,ke=Rb.interpolateZoom([(we-Tb.x)/Tb.k,(Je-Tb.y)/Tb.k,te/Tb.k],[(we-ne.x)/ne.k,(Je-ne.y)/ne.k,te/ne.k]);return function(hg){hg=ke(hg);var zf=te/hg[2];this.__chart__=Tb={x:we-hg[0]*zf,y:Je-hg[1]*zf,k:zf};Ta(Vd)}}).each("interrupt.zoom",function(){Ya(Vd)}).each("end.zoom",
function(){Ya(Vd)}):(this.__chart__=Tb,Za(Vd),Ta(Vd),Ya(Vd))})};R.translate=function(nd){if(!arguments.length)return[Tb.x,Tb.y];Tb={x:+nd[0],y:+nd[1],k:Tb.k};Ja();return R};R.scale=function(nd){if(!arguments.length)return Tb.k;Tb={x:Tb.x,y:Tb.y,k:null};ua(+nd);Ja();return R};R.scaleExtent=function(nd){if(!arguments.length)return Uc;Uc=null==nd?$k:[+nd[0],+nd[1]];return R};R.center=function(nd){if(!arguments.length)return wc;wc=nd&&[+nd[0],+nd[1]];return R};R.size=function(nd){if(!arguments.length)return Ec;
Ec=nd&&[+nd[0],+nd[1]];return R};R.duration=function(nd){if(!arguments.length)return bd;bd=+nd;return R};R.x=function(nd){if(!arguments.length)return qd;qd=nd;Vc=nd.copy();Tb={x:0,y:0,k:1};return R};R.y=function(nd){if(!arguments.length)return ud;ud=nd;td=nd.copy();Tb={x:0,y:0,k:1};return R};return Rb.rebind(R,xc,"on")};var $k=[0,Infinity],mk,lk;Rb.color=ya;ya.prototype.toString=function(){return this.rgb()+""};Rb.hsl=Fa;var Dj=Fa.prototype=new ya;Dj.brighter=function(R){R=Math.pow(.7,arguments.length?
R:1);return new Fa(this.h,this.s,this.l/R)};Dj.darker=function(R){R=Math.pow(.7,arguments.length?R:1);return new Fa(this.h,this.s,R*this.l)};Dj.rgb=function(){return Ha(this.h,this.s,this.l)};Rb.hcl=eb;var gj=eb.prototype=new ya;gj.brighter=function(R){return new eb(this.h,this.c,Math.min(100,this.l+hj*(arguments.length?R:1)))};gj.darker=function(R){return new eb(this.h,this.c,Math.max(0,this.l-hj*(arguments.length?R:1)))};gj.rgb=function(){return hb(this.h,this.c,this.l).rgb()};Rb.lab=ob;var hj=
18,ik=.95047,Zd=1,jk=1.08883,ig=ob.prototype=new ya;ig.brighter=function(R){return new ob(Math.min(100,this.l+hj*(arguments.length?R:1)),this.a,this.b)};ig.darker=function(R){return new ob(Math.max(0,this.l-hj*(arguments.length?R:1)),this.a,this.b)};ig.rgb=function(){return ib(this.l,this.a,this.b)};Rb.rgb=Ka;var Lh=Ka.prototype=new ya;Lh.brighter=function(R){R=Math.pow(.7,arguments.length?R:1);var ja=this.r,ua=this.g,Ca=this.b;if(!ja&&!ua&&!Ca)return new Ka(30,30,30);ja&&30>ja&&(ja=30);ua&&30>ua&&
(ua=30);Ca&&30>Ca&&(Ca=30);return new Ka(Math.min(255,ja/R),Math.min(255,ua/R),Math.min(255,Ca/R))};Lh.darker=function(R){R=Math.pow(.7,arguments.length?R:1);return new Ka(R*this.r,R*this.g,R*this.b)};Lh.hsl=function(){return db(this.r,this.g,this.b)};Lh.toString=function(){return"#"+Xa(this.r)+Xa(this.g)+Xa(this.b)};var Nj=Rb.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,
brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Nj.forEach(function(R,
ja){Nj.set(R,new Ka(ja>>16,ja>>8&255,ja&255))});Rb.functor=xa;Rb.xhr=Ga(w);Rb.dsv=function(R,ja){function ua(jb,ub,Fb){3>arguments.length&&(Fb=ub,ub=null);var Lb=Va(jb,ja,null==ub?Ca:Ea(ub),Fb);Lb.row=function(Tb){return arguments.length?Lb.response(null==(ub=Tb)?Ca:Ea(Tb)):ub};return Lb}function Ca(jb){return ua.parse(jb.responseText)}function Ea(jb){return function(ub){return ua.parse(ub.responseText,jb)}}function Ja(jb){return jb.map(Za).join(R)}function Za(jb){return Ta.test(jb)?'"'+jb.replace(/"/g,
'""')+'"':jb}var Ta=new RegExp('["'+R+"\n]"),Ya=R.charCodeAt(0);ua.parse=function(jb,ub){var Fb;return ua.parseRows(jb,function(Lb,Tb){if(Fb)return Fb(Lb,Tb-1);var Wb=new Function("d","return {"+Lb.map(function(nc,wc){return JSON.stringify(nc)+": d["+wc+"]"}).join(",")+"}");Fb=ub?function(nc,wc){return ub(Wb(nc),wc)}:Wb})};ua.parseRows=function(jb,ub){function Fb(){if(wc>=nc)return Tb;if(bd)return bd=!1,Lb;var id=wc;if(34===jb.charCodeAt(id)){for(var gc=id;gc++<nc;)if(34===jb.charCodeAt(gc)){if(34!==
jb.charCodeAt(gc+1))break;++gc}wc=gc+2;var xc=jb.charCodeAt(gc+1);13===xc?(bd=!0,10===jb.charCodeAt(gc+2)&&++wc):10===xc&&(bd=!0);return jb.slice(id+1,gc).replace(/""/g,'"')}for(;wc<nc;){xc=jb.charCodeAt(wc++);gc=1;if(10===xc)bd=!0;else if(13===xc)bd=!0,10===jb.charCodeAt(wc)&&(++wc,++gc);else if(xc!==Ya)continue;return jb.slice(id,wc-gc)}return jb.slice(id)}for(var Lb={},Tb={},Wb=[],nc=jb.length,wc=0,Ec=0,Uc,bd;(Uc=Fb())!==Tb;){for(var dd=[];Uc!==Lb&&Uc!==Tb;)dd.push(Uc),Uc=Fb();ub&&null==(dd=ub(dd,
Ec++))||Wb.push(dd)}return Wb};ua.format=function(jb){if(Array.isArray(jb[0]))return ua.formatRows(jb);var ub=new v,Fb=[];jb.forEach(function(Lb){for(var Tb in Lb)ub.has(Tb)||Fb.push(ub.add(Tb))});return[Fb.map(Za).join(R)].concat(jb.map(function(Lb){return Fb.map(function(Tb){return Za(Lb[Tb])}).join(R)})).join("\n")};ua.formatRows=function(jb){return jb.map(Ja).join("\n")};return ua};Rb.csv=Rb.dsv(",","text/csv");Rb.tsv=Rb.dsv("\t","text/tab-separated-values");var yj,Oj,xg,df,Yi=this[C(this,"requestAnimationFrame")]||
function(R){setTimeout(R,17)};Rb.timer=function(){Ma.apply(this,arguments)};Rb.timer.flush=function(){Sa();lb()};Rb.round=function(R,ja){return ja?Math.round(R*(ja=Math.pow(10,ja)))/ja:Math.round(R)};var Tj="y z a f p n  m  k M G T P E Z Y".split(" ").map(function(R,ja){var ua=Math.pow(10,3*kd(8-ja));return{scale:8<ja?function(Ca){return Ca/ua}:function(Ca){return Ca*ua},symbol:R}});Rb.formatPrefix=function(R,ja){var ua=0;if(R=+R)0>R&&(R*=-1),ja&&(R=Rb.round(R,rb(R,ja))),ua=1+Math.floor(1E-12+Math.log(R)/
Math.LN10),ua=Math.max(-24,Math.min(24,3*Math.floor((ua-1)/3)));return Tj[8+ua/3]};var fi=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ak=Rb.map({b:function(R){return R.toString(2)},c:function(R){return String.fromCharCode(R)},o:function(R){return R.toString(8)},x:function(R){return R.toString(16)},X:function(R){return R.toString(16).toUpperCase()},g:function(R,ja){return R.toPrecision(ja)},e:function(R,ja){return R.toExponential(ja)},f:function(R,ja){return R.toFixed(ja)},
r:function(R,ja){return(R=Rb.round(R,rb(R,ja))).toFixed(Math.max(0,Math.min(20,rb(R*(1+1E-15),ja))))}}),ae=Rb.time={},Lf=Date;Vb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Nf.setUTCDate.apply(this._,arguments)},setDay:function(){Nf.setUTCDay.apply(this._,arguments)},setFullYear:function(){Nf.setUTCFullYear.apply(this._,arguments)},setHours:function(){Nf.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Nf.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Nf.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Nf.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Nf.setUTCSeconds.apply(this._,arguments)},setTime:function(){Nf.setTime.apply(this._,arguments)}};var Nf=Date.prototype;ae.year=lc(function(R){R=ae.day(R);R.setMonth(0,1);return R},function(R,ja){R.setFullYear(R.getFullYear()+ja)},function(R){return R.getFullYear()});ae.years=ae.year.range;ae.years.utc=ae.year.utc.range;ae.day=lc(function(R){var ja=new Lf(2E3,0);ja.setFullYear(R.getFullYear(),R.getMonth(),
R.getDate());return ja},function(R,ja){R.setDate(R.getDate()+ja)},function(R){return R.getDate()-1});ae.days=ae.day.range;ae.days.utc=ae.day.utc.range;ae.dayOfYear=function(R){var ja=ae.year(R);return Math.floor((R-ja-6E4*(R.getTimezoneOffset()-ja.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(R,ja){ja=7-ja;var ua=ae[R]=lc(function(Ca){(Ca=ae.day(Ca)).setDate(Ca.getDate()-(Ca.getDay()+ja)%7);return Ca},function(Ca,Ea){Ca.setDate(Ca.getDate()+
7*Math.floor(Ea))},function(Ca){var Ea=ae.year(Ca).getDay();return Math.floor((ae.dayOfYear(Ca)+(Ea+ja)%7)/7)-(Ea!==ja)});ae[R+"s"]=ua.range;ae[R+"s"].utc=ua.utc.range;ae[R+"OfYear"]=function(Ca){var Ea=ae.year(Ca).getDay();return Math.floor((ae.dayOfYear(Ca)+(Ea+ja)%7)/7)}});ae.week=ae.sunday;ae.weeks=ae.sunday.range;ae.weeks.utc=ae.sunday.utc.range;ae.weekOfYear=ae.sundayOfYear;var zj={"-":"",_:" ",0:"0"},Ud=/^\s*\d+/,se=/^%/;Rb.locale=function(R){return{numberFormat:yb(R),timeFormat:ad(R)}};var Uj=
Rb.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});Rb.format=Uj.numberFormat;Rb.geo={};Cb.prototype=
{s:0,t:0,add:function(R){Jb(R,this.t,yi);Jb(yi.s,this.s,this);this.s?this.t+=yi.t:this.s=yi.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var yi=new Cb;Rb.geo.stream=function(R,ja){if(R&&Ej.hasOwnProperty(R.type))Ej[R.type](R,ja);else ac(R,ja)};var Ej={Feature:function(R,ja){ac(R.geometry,ja)},FeatureCollection:function(R,ja){R=R.features;for(var ua=-1,Ca=R.length;++ua<Ca;)ac(R[ua].geometry,ja)}},Jg={Sphere:function(R,ja){ja.sphere()},Point:function(R,ja){R=R.coordinates;
ja.point(R[0],R[1],R[2])},MultiPoint:function(R,ja){for(var ua=R.coordinates,Ca=-1,Ea=ua.length;++Ca<Ea;)R=ua[Ca],ja.point(R[0],R[1],R[2])},LineString:function(R,ja){Kc(R.coordinates,ja,0)},MultiLineString:function(R,ja){R=R.coordinates;for(var ua=-1,Ca=R.length;++ua<Ca;)Kc(R[ua],ja,0)},Polygon:function(R,ja){vc(R.coordinates,ja)},MultiPolygon:function(R,ja){R=R.coordinates;for(var ua=-1,Ca=R.length;++ua<Ca;)vc(R[ua],ja)},GeometryCollection:function(R,ja){R=R.geometries;for(var ua=-1,Ca=R.length;++ua<
Ca;)ac(R[ua],ja)}};Rb.geo.area=function(R){ch=0;Rb.geo.stream(R,yg);return ch};var ch,Zi=new Cb,yg={sphere:function(){ch+=4*ie},point:x,lineStart:x,lineEnd:x,polygonStart:function(){Zi.reset();yg.lineStart=Lc},polygonEnd:function(){var R=2*Zi;ch+=0>R?4*ie+R:R;yg.lineStart=yg.lineEnd=yg.point=x}};Rb.geo.bounds=function(){function R(gc,xc){bd.push(dd=[ub=gc,Lb=gc]);xc<Fb&&(Fb=xc);xc>Tb&&(Tb=xc)}function ja(gc,xc){var Vc=Zc([gc*ve,xc*ve]);if(Ec){var qd=ld(Ec,Vc);qd=ld([qd[1],-qd[0],0],qd);Cd(qd);qd=
Kd(qd);var td=gc-Wb,ud=0<td?1:-1,nd=qd[0]*jf*ud;td=180<kd(td);td^(ud*Wb<nd&&nd<ud*gc)?(xc=qd[1]*jf,xc>Tb&&(Tb=xc)):(nd=(nd+360)%360-180,td^(ud*Wb<nd&&nd<ud*gc))?(xc=-qd[1]*jf,xc<Fb&&(Fb=xc)):(xc<Fb&&(Fb=xc),xc>Tb&&(Tb=xc));td?gc<Wb?Ta(ub,gc)>Ta(ub,Lb)&&(Lb=gc):Ta(gc,Lb)>Ta(ub,Lb)&&(ub=gc):Lb>=ub?(gc<ub&&(ub=gc),gc>Lb&&(Lb=gc)):gc>Wb?Ta(ub,gc)>Ta(ub,Lb)&&(Lb=gc):Ta(gc,Lb)>Ta(ub,Lb)&&(ub=gc)}else R(gc,xc);Ec=Vc;Wb=gc}function ua(){id.point=ja}function Ca(){dd[0]=ub;dd[1]=Lb;id.point=R;Ec=null}function Ea(gc,
xc){if(Ec){var Vc=gc-Wb;Uc+=180<kd(Vc)?Vc+(0<Vc?360:-360):Vc}else nc=gc,wc=xc;yg.point(gc,xc);ja(gc,xc)}function Ja(){yg.lineStart()}function Za(){Ea(nc,wc);yg.lineEnd();1E-6<kd(Uc)&&(ub=-(Lb=180));dd[0]=ub;dd[1]=Lb;Ec=null}function Ta(gc,xc){return 0>(xc-=gc)?xc+360:xc}function Ya(gc,xc){return gc[0]-xc[0]}function jb(gc,xc){return xc[0]<=xc[1]?xc[0]<=gc&&gc<=xc[1]:gc<xc[0]||xc[1]<gc}var ub,Fb,Lb,Tb,Wb,nc,wc,Ec,Uc,bd,dd,id={point:R,lineStart:ua,lineEnd:Ca,polygonStart:function(){id.point=Ea;id.lineStart=
Ja;id.lineEnd=Za;Uc=0;yg.polygonStart()},polygonEnd:function(){yg.polygonEnd();id.point=R;id.lineStart=ua;id.lineEnd=Ca;0>Zi?(ub=-(Lb=180),Fb=-(Tb=90)):1E-6<Uc?Tb=90:-1E-6>Uc&&(Fb=-90);dd[0]=ub;dd[1]=Lb}};return function(gc){Tb=Lb=-(ub=Fb=Infinity);bd=[];Rb.geo.stream(gc,id);if(gc=bd.length){bd.sort(Ya);for(var xc=1,Vc=bd[0],qd,td=[Vc];xc<gc;++xc)qd=bd[xc],jb(qd[0],Vc)||jb(qd[1],Vc)?(Ta(Vc[0],qd[1])>Ta(Vc[0],Vc[1])&&(Vc[1]=qd[1]),Ta(qd[0],Vc[1])>Ta(Vc[0],Vc[1])&&(Vc[0]=qd[0])):td.push(Vc=qd);var ud=
-Infinity,nd;gc=td.length-1;xc=0;for(Vc=td[gc];xc<=gc;Vc=qd,++xc)qd=td[xc],(nd=Ta(Vc[1],qd[0]))>ud&&(ud=nd,ub=qd[0],Lb=Vc[1])}bd=dd=null;return Infinity===ub||Infinity===Fb?[[NaN,NaN],[NaN,NaN]]:[[ub,Fb],[Lb,Tb]]}}();Rb.geo.centroid=function(R){Ze=Hi=ti=ui=Ih=Kg=gi=qh=Ii=Ji=Jh=0;Rb.geo.stream(R,$g);R=Ii;var ja=Ji,ua=Jh,Ca=R*R+ja*ja+ua*ua;return 1E-12>Ca&&(R=Kg,ja=gi,ua=qh,1E-6>Hi&&(R=ti,ja=ui,ua=Ih),Ca=R*R+ja*ja+ua*ua,1E-12>Ca)?[NaN,NaN]:[Math.atan2(ja,R)*jf,ma(ua/Math.sqrt(Ca))*jf]};var Ze,Hi,ti,
ui,Ih,Kg,gi,qh,Ii,Ji,Jh,$g={sphere:x,point:Yc,lineStart:Jd,lineEnd:Ld,polygonStart:function(){$g.lineStart=Ce},polygonEnd:function(){$g.lineStart=Jd}},kk=me(Sc,function(R){var ja=NaN,ua=NaN,Ca=NaN,Ea;return{lineStart:function(){R.lineStart();Ea=1},point:function(Ja,Za){var Ta=0<Ja?ie:-ie,Ya=kd(Ja-ja);if(1E-6>kd(Ya-ie))R.point(ja,ua=0<(ua+Za)/2?yf:-yf),R.point(Ca,ua),R.lineEnd(),R.lineStart(),R.point(Ta,ua),R.point(Ja,ua),Ea=0;else if(Ca!==Ta&&Ya>=ie){1E-6>kd(ja-Ca)&&(ja-=1E-6*Ca);1E-6>kd(Ja-Ta)&&
(Ja-=1E-6*Ta);Ya=ja;var jb=ua,ub=Ja,Fb,Lb,Tb=Math.sin(Ya-ub);ua=1E-6<kd(Tb)?Math.atan((Math.sin(jb)*(Lb=Math.cos(Za))*Math.sin(ub)-Math.sin(Za)*(Fb=Math.cos(jb))*Math.sin(Ya))/(Fb*Lb*Tb)):(jb+Za)/2;R.point(Ca,ua);R.lineEnd();R.lineStart();R.point(Ta,ua);Ea=0}R.point(ja=Ja,ua=Za);Ca=Ta},lineEnd:function(){R.lineEnd();ja=ua=NaN},clean:function(){return 2-Ea}}},function(R,ja,ua,Ca){null==R?(ua*=yf,Ca.point(-ie,ua),Ca.point(0,ua),Ca.point(ie,ua),Ca.point(ie,0),Ca.point(ie,-ua),Ca.point(0,-ua),Ca.point(-ie,
-ua),Ca.point(-ie,0),Ca.point(-ie,ua)):1E-6<kd(R[0]-ja[0])?(R=R[0]<ja[0]?ie:-ie,ua=ua*R/2,Ca.point(-R,ua),Ca.point(0,ua),Ca.point(R,ua)):Ca.point(ja[0],ja[1])},[-ie,-ie/2]);Rb.geo.clipExtent=function(){var R,ja,ua,Ca,Ea,Ja,Za={stream:function(Ta){Ea&&(Ea.valid=!1);Ea=Ja(Ta);Ea.valid=!0;return Ea},extent:function(Ta){if(!arguments.length)return[[R,ja],[ua,Ca]];Ja=Ge(R=+Ta[0][0],ja=+Ta[0][1],ua=+Ta[1][0],Ca=+Ta[1][1]);Ea&&(Ea.valid=!1,Ea=null);return Za}};return Za.extent([[0,0],[960,500]])};(Rb.geo.conicEqualArea=
function(){return Ue(uf)}).raw=uf;Rb.geo.albers=function(){return Rb.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};Rb.geo.albersUsa=function(){function R(jb){var ub=jb[0];jb=jb[1];Ea=null;(Za(ub,jb),Ea)||(Ta(ub,jb),Ea)||Ya(ub,jb);return Ea}var ja=Rb.geo.albers(),ua=Rb.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Ca=Rb.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Ea,Ja={point:function(jb,ub){Ea=[jb,
ub]}},Za,Ta,Ya;R.invert=function(jb){var ub=ja.scale(),Fb=ja.translate(),Lb=(jb[0]-Fb[0])/ub;ub=(jb[1]-Fb[1])/ub;return(.12<=ub&&.234>ub&&-.425<=Lb&&-.214>Lb?ua:.166<=ub&&.234>ub&&-.214<=Lb&&-.115>Lb?Ca:ja).invert(jb)};R.stream=function(jb){var ub=ja.stream(jb),Fb=ua.stream(jb),Lb=Ca.stream(jb);return{point:function(Tb,Wb){ub.point(Tb,Wb);Fb.point(Tb,Wb);Lb.point(Tb,Wb)},sphere:function(){ub.sphere();Fb.sphere();Lb.sphere()},lineStart:function(){ub.lineStart();Fb.lineStart();Lb.lineStart()},lineEnd:function(){ub.lineEnd();
Fb.lineEnd();Lb.lineEnd()},polygonStart:function(){ub.polygonStart();Fb.polygonStart();Lb.polygonStart()},polygonEnd:function(){ub.polygonEnd();Fb.polygonEnd();Lb.polygonEnd()}}};R.precision=function(jb){if(!arguments.length)return ja.precision();ja.precision(jb);ua.precision(jb);Ca.precision(jb);return R};R.scale=function(jb){if(!arguments.length)return ja.scale();ja.scale(jb);ua.scale(.35*jb);Ca.scale(jb);return R.translate(ja.translate())};R.translate=function(jb){if(!arguments.length)return ja.translate();
var ub=ja.scale(),Fb=+jb[0],Lb=+jb[1];Za=ja.translate(jb).clipExtent([[Fb-.455*ub,Lb-.238*ub],[Fb+.455*ub,Lb+.238*ub]]).stream(Ja).point;Ta=ua.translate([Fb-.307*ub,Lb+.201*ub]).clipExtent([[Fb-.425*ub+1E-6,Lb+.12*ub+1E-6],[Fb-.214*ub-1E-6,Lb+.234*ub-1E-6]]).stream(Ja).point;Ya=Ca.translate([Fb-.205*ub,Lb+.212*ub]).clipExtent([[Fb-.214*ub+1E-6,Lb+.166*ub+1E-6],[Fb-.115*ub-1E-6,Lb+.234*ub-1E-6]]).stream(Ja).point;return R};return R.scale(1070)};var ji,Rj,hi={point:x,lineStart:x,lineEnd:x,polygonStart:function(){Rj=
0;hi.lineStart=hf},polygonEnd:function(){hi.lineStart=hi.lineEnd=hi.point=x;ji+=kd(Rj/2)}},ij,Fj,Gj,Ni,Fk={point:function(R,ja){R<ij&&(ij=R);R>Gj&&(Gj=R);ja<Fj&&(Fj=ja);ja>Ni&&(Ni=ja)},lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},Rg={point:Ra,lineStart:Gb,lineEnd:Ab,polygonStart:function(){Rg.lineStart=Ob},polygonEnd:function(){Rg.point=Ra;Rg.lineStart=Gb;Rg.lineEnd=Ab}};Rb.geo.path=function(){function R(Ya){Ya&&("function"===typeof ua&&Za.pointRadius(+ua.apply(this,arguments)),Ta&&Ta.valid||
(Ta=Ja(Za)),Rb.geo.stream(Ya,Ta));return Za.result()}function ja(){Ta=null;return R}var ua=4.5,Ca,Ea,Ja,Za,Ta;R.area=function(Ya){ji=0;Rb.geo.stream(Ya,Ja(hi));return ji};R.centroid=function(Ya){ti=ui=Ih=Kg=gi=qh=Ii=Ji=Jh=0;Rb.geo.stream(Ya,Ja(Rg));return Jh?[Ii/Jh,Ji/Jh]:qh?[Kg/qh,gi/qh]:Ih?[ti/Ih,ui/Ih]:[NaN,NaN]};R.bounds=function(Ya){Gj=Ni=-(ij=Fj=Infinity);Rb.geo.stream(Ya,Ja(Fk));return[[ij,Fj],[Gj,Ni]]};R.projection=function(Ya){if(!arguments.length)return Ca;Ja=(Ca=Ya)?Ya.stream||jc(Ya):w;
return ja()};R.context=function(Ya){if(!arguments.length)return Ea;Za=null==(Ea=Ya)?new pf:new Bc(Ya);"function"!==typeof ua&&Za.pointRadius(ua);return ja()};R.pointRadius=function(Ya){if(!arguments.length)return ua;ua="function"===typeof Ya?Ya:(Za.pointRadius(+Ya),+Ya);return R};return R.projection(Rb.geo.albersUsa()).context(null)};Rb.geo.transform=function(R){return{stream:function(ja){ja=new Oc(ja);for(var ua in R)ja[ua]=R[ua];return ja}}};Oc.prototype={point:function(R,ja){this.stream.point(R,
ja)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Rb.geo.projection=vd;Rb.geo.projectionMutator=Nb;(Rb.geo.equirectangular=function(){return vd(Mc)}).raw=Mc.invert=Mc;Rb.geo.rotation=function(R){function ja(ua){ua=R(ua[0]*ve,ua[1]*ve);return ua[0]*=jf,ua[1]*=jf,ua}R=Rc(R[0]%360*ve,R[1]*ve,2<R.length?R[2]*ve:0);ja.invert=
function(ua){ua=R.invert(ua[0]*ve,ua[1]*ve);return ua[0]*=jf,ua[1]*=jf,ua};return ja};cd.invert=Mc;Rb.geo.circle=function(){function R(){var Ja="function"===typeof ja?ja.apply(this,arguments):ja,Za=Rc(-Ja[0]*ve,-Ja[1]*ve,0).invert,Ta=[];Ea(null,null,1,{point:function(Ya,jb){Ta.push(Ya=Za(Ya,jb));Ya[0]*=jf;Ya[1]*=jf}});return{type:"Polygon",coordinates:[Ta]}}var ja=[0,0],ua,Ca=6,Ea;R.origin=function(Ja){if(!arguments.length)return ja;ja=Ja;return R};R.angle=function(Ja){if(!arguments.length)return ua;
Ea=Cc((ua=+Ja)*ve,Ca*ve);return R};R.precision=function(Ja){if(!arguments.length)return Ca;Ea=Cc(ua*ve,(Ca=+Ja)*ve);return R};return R.angle(90)};Rb.geo.distance=function(R,ja){var ua=(ja[0]-R[0])*ve,Ca=R[1]*ve,Ea=ja[1]*ve;ja=Math.cos(ua);R=Math.sin(Ca);Ca=Math.cos(Ca);var Ja=Math.sin(Ea);Ea=Math.cos(Ea);var Za;return Math.atan2(Math.sqrt((Za=Ea*Math.sin(ua))*Za+(Za=Ca*Ja-R*Ea*ja)*Za),R*Ja+Ca*Ea*ja)};Rb.geo.graticule=function(){function R(){return{type:"MultiLineString",coordinates:ja()}}function ja(){return Rb.range(Math.ceil(Ja/
Lb)*Lb,Ea,Lb).map(wc).concat(Rb.range(Math.ceil(jb/Tb)*Tb,Ya,Tb).map(Ec)).concat(Rb.range(Math.ceil(Ca/ub)*ub,ua,ub).filter(function(bd){return 1E-6<kd(bd%Lb)}).map(Wb)).concat(Rb.range(Math.ceil(Ta/Fb)*Fb,Za,Fb).filter(function(bd){return 1E-6<kd(bd%Tb)}).map(nc))}var ua,Ca,Ea,Ja,Za,Ta,Ya,jb,ub=10,Fb=ub,Lb=90,Tb=360,Wb,nc,wc,Ec,Uc=2.5;R.lines=function(){return ja().map(function(bd){return{type:"LineString",coordinates:bd}})};R.outline=function(){return{type:"Polygon",coordinates:[wc(Ja).concat(Ec(Ya).slice(1),
wc(Ea).reverse().slice(1),Ec(jb).reverse().slice(1))]}};R.extent=function(bd){return arguments.length?R.majorExtent(bd).minorExtent(bd):R.minorExtent()};R.majorExtent=function(bd){if(!arguments.length)return[[Ja,jb],[Ea,Ya]];Ja=+bd[0][0];Ea=+bd[1][0];jb=+bd[0][1];Ya=+bd[1][1];Ja>Ea&&(bd=Ja,Ja=Ea,Ea=bd);jb>Ya&&(bd=jb,jb=Ya,Ya=bd);return R.precision(Uc)};R.minorExtent=function(bd){if(!arguments.length)return[[Ca,Ta],[ua,Za]];Ca=+bd[0][0];ua=+bd[1][0];Ta=+bd[0][1];Za=+bd[1][1];Ca>ua&&(bd=Ca,Ca=ua,ua=
bd);Ta>Za&&(bd=Ta,Ta=Za,Za=bd);return R.precision(Uc)};R.step=function(bd){return arguments.length?R.majorStep(bd).minorStep(bd):R.minorStep()};R.majorStep=function(bd){if(!arguments.length)return[Lb,Tb];Lb=+bd[0];Tb=+bd[1];return R};R.minorStep=function(bd){if(!arguments.length)return[ub,Fb];ub=+bd[0];Fb=+bd[1];return R};R.precision=function(bd){if(!arguments.length)return Uc;Uc=+bd;Wb=sc(Ta,Za,90);nc=jd(Ca,ua,Uc);wc=sc(jb,Ya,90);Ec=jd(Ja,Ea,Uc);return R};return R.majorExtent([[-180,-89.999999],
[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};Rb.geo.greatArc=function(){function R(){return{type:"LineString",coordinates:[ua||ja.apply(this,arguments),Ea||Ca.apply(this,arguments)]}}var ja=yd,ua,Ca=Id,Ea;R.distance=function(){return Rb.geo.distance(ua||ja.apply(this,arguments),Ea||Ca.apply(this,arguments))};R.source=function(Ja){if(!arguments.length)return ja;ja=Ja;ua="function"===typeof Ja?null:Ja;return R};R.target=function(Ja){if(!arguments.length)return Ca;Ca=Ja;Ea="function"===
typeof Ja?null:Ja;return R};R.precision=function(){return arguments.length?R:0};return R};Rb.geo.interpolate=function(R,ja){return Fd(R[0]*ve,R[1]*ve,ja[0]*ve,ja[1]*ve)};Rb.geo.length=function(R){Vj=0;Rb.geo.stream(R,jj);return Vj};var Vj,jj={sphere:x,point:x,lineStart:function(){function R(Ea,Ja){var Za=Math.sin(Ja*=ve);Ja=Math.cos(Ja);var Ta=kd((Ea*=ve)-ja),Ya=Math.cos(Ta);Vj+=Math.atan2(Math.sqrt((Ta=Ja*Math.sin(Ta))*Ta+(Ta=Ca*Za-ua*Ja*Ya)*Ta),ua*Za+Ca*Ja*Ya);ja=Ea;ua=Za;Ca=Ja}var ja,ua,Ca;jj.point=
function(Ea,Ja){ja=Ea*ve;ua=Math.sin(Ja*=ve);Ca=Math.cos(Ja);jj.point=R};jj.lineEnd=function(){jj.point=jj.lineEnd=x}},lineEnd:x,polygonStart:x,polygonEnd:x},nk=Ed(function(R){return Math.sqrt(2/(1+R))},function(R){return 2*Math.asin(R/2)});(Rb.geo.azimuthalEqualArea=function(){return vd(nk)}).raw=nk;var Gk=Ed(function(R){return(R=Math.acos(R))&&R/Math.sin(R)},w);(Rb.geo.azimuthalEquidistant=function(){return vd(Gk)}).raw=Gk;(Rb.geo.conicConformal=function(){return Ue(ye)}).raw=ye;(Rb.geo.conicEquidistant=
function(){return Ue(ze)}).raw=ze;var Hk=Ed(function(R){return 1/R},Math.atan);(Rb.geo.gnomonic=function(){return vd(Hk)}).raw=Hk;Ne.invert=function(R,ja){return[R,2*Math.atan(Math.exp(ja))-yf]};(Rb.geo.mercator=function(){return ue(Ne)}).raw=Ne;var Ik=Ed(function(){return 1},Math.asin);(Rb.geo.orthographic=function(){return vd(Ik)}).raw=Ik;var Jk=Ed(function(R){return 1/(1+R)},function(R){return 2*Math.atan(R)});(Rb.geo.stereographic=function(){return vd(Jk)}).raw=Jk;Ke.invert=function(R,ja){return[-ja,
2*Math.atan(Math.exp(R))-yf]};(Rb.geo.transverseMercator=function(){var R=ue(Ke),ja=R.center,ua=R.rotate;R.center=function(Ca){return Ca?ja([-Ca[1],Ca[0]]):(Ca=ja(),[Ca[1],-Ca[0]])};R.rotate=function(Ca){return Ca?ua([Ca[0],Ca[1],2<Ca.length?Ca[2]+90:90]):(Ca=ua(),[Ca[0],Ca[1],Ca[2]-90])};return ua([0,0,90])}).raw=Ke;Rb.geom={};Rb.geom.hull=function(R){function ja(Ea){if(3>Ea.length)return[];var Ja=xa(ua),Za=xa(Ca),Ta,Ya=Ea.length,jb=[],ub=[];for(Ta=0;Ta<Ya;Ta++)jb.push([+Ja.call(this,Ea[Ta],Ta),
+Za.call(this,Ea[Ta],Ta),Ta]);jb.sort(mi);for(Ta=0;Ta<Ya;Ta++)ub.push([jb[Ta][0],-jb[Ta][1]]);Ja=Xh(jb);ub=Xh(ub);Za=ub[0]===Ja[0];Ya=ub[ub.length-1]===Ja[Ja.length-1];var Fb=[];for(Ta=Ja.length-1;0<=Ta;--Ta)Fb.push(Ea[jb[Ja[Ta]][2]]);for(Ta=+Za;Ta<ub.length-Ya;++Ta)Fb.push(Ea[jb[ub[Ta]][2]]);return Fb}var ua=mf,Ca=If;if(arguments.length)return ja(R);ja.x=function(Ea){return arguments.length?(ua=Ea,ja):ua};ja.y=function(Ea){return arguments.length?(Ca=Ea,ja):Ca};return ja};Rb.geom.polygon=function(R){Le(R,
Wj);return R};var Wj=Rb.geom.polygon.prototype=[];Wj.area=function(){for(var R=-1,ja=this.length,ua,Ca=this[ja-1],Ea=0;++R<ja;)ua=Ca,Ca=this[R],Ea+=ua[1]*Ca[0]-ua[0]*Ca[1];return.5*Ea};Wj.centroid=function(R){var ja=-1,ua=this.length,Ca=0,Ea=0,Ja=this[ua-1];for(arguments.length||(R=-1/(6*this.area()));++ja<ua;){var Za=Ja;Ja=this[ja];var Ta=Za[0]*Ja[1]-Ja[0]*Za[1];Ca+=(Za[0]+Ja[0])*Ta;Ea+=(Za[1]+Ja[1])*Ta}return[Ca*R,Ea*R]};Wj.clip=function(R){for(var ja,ua=ni(R),Ca=-1,Ea=this.length-ni(this),Ja,Za,
Ta=this[Ea-1],Ya,jb,ub;++Ca<Ea;){ja=R.slice();R.length=0;Ya=this[Ca];jb=ja[(Za=ja.length-ua)-1];for(Ja=-1;++Ja<Za;)ub=ja[Ja],Oh(ub,Ta,Ya)?(Oh(jb,Ta,Ya)||R.push(Vf(jb,ub,Ta,Ya)),R.push(ub)):Oh(jb,Ta,Ya)&&R.push(Vf(jb,ub,Ta,Ya)),jb=ub;ua&&R.push(R[0]);Ta=Ya}return R};var bj,Ki,aj,Bk=[],Hf,Aj,Ck=[];Cg.prototype.prepare=function(){for(var R=this.edges,ja=R.length,ua;ja--;)ua=R[ja].edge,ua.b&&ua.a||R.splice(ja,1);R.sort(Ti);return R.length};Bh.prototype={start:function(){return this.edge.l===this.site?
this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};Oe.prototype={insert:function(R,ja){var ua;if(R){ja.P=R;if(ja.N=R.N)R.N.P=ja;R.N=ja;if(R.R){for(R=R.R;R.L;)R=R.L;R.L=ja}else R.R=ja;var Ca=R}else this._?(R=Ui(this._),ja.P=null,ja.N=R,R.P=R.L=ja,Ca=R):(ja.P=ja.N=null,this._=ja,Ca=null);ja.L=ja.R=null;ja.U=Ca;ja.C=!0;for(R=ja;Ca&&Ca.C;)ja=Ca.U,Ca===ja.L?(ua=ja.R)&&ua.C?(Ca.C=ua.C=!1,ja.C=!0,R=ja):(R===Ca.R&&(uh(this,Ca),R=Ca,Ca=R.U),Ca.C=!1,ja.C=!0,vh(this,
ja)):(ua=ja.L)&&ua.C?(Ca.C=ua.C=!1,ja.C=!0,R=ja):(R===Ca.L&&(vh(this,Ca),R=Ca,Ca=R.U),Ca.C=!1,ja.C=!0,uh(this,ja)),Ca=R.U;this._.C=!1},remove:function(R){R.N&&(R.N.P=R.P);R.P&&(R.P.N=R.N);R.N=R.P=null;var ja=R.U,ua=R.L,Ca=R.R;var Ea=ua?Ca?Ui(Ca):ua:Ca;ja?ja.L===R?ja.L=Ea:ja.R=Ea:this._=Ea;if(ua&&Ca){var Ja=Ea.C;Ea.C=R.C;Ea.L=ua;ua.U=Ea;Ea!==Ca?(ja=Ea.U,Ea.U=R.U,R=Ea.R,ja.L=R,Ea.R=Ca,Ca.U=Ea):(Ea.U=ja,ja=Ea,R=Ea.R)}else Ja=R.C,R=Ea;R&&(R.U=ja);if(!Ja)if(R&&R.C)R.C=!1;else{do{if(R===this._)break;if(R===
ja.L){if(R=ja.R,R.C&&(R.C=!1,ja.C=!0,uh(this,ja),R=ja.R),R.L&&R.L.C||R.R&&R.R.C){R.R&&R.R.C||(R.L.C=!1,R.C=!0,vh(this,R),R=ja.R);R.C=ja.C;ja.C=R.R.C=!1;uh(this,ja);R=this._;break}}else if(R=ja.L,R.C&&(R.C=!1,ja.C=!0,vh(this,ja),R=ja.L),R.L&&R.L.C||R.R&&R.R.C){R.L&&R.L.C||(R.R.C=!1,R.C=!0,uh(this,R),R=ja.L);R.C=ja.C;ja.C=R.L.C=!1;vh(this,ja);R=this._;break}R.C=!0;R=ja;ja=ja.U}while(!R.C);R&&(R.C=!1)}}};Rb.geom.voronoi=function(R){function ja(Ya){var jb=Array(Ya.length),ub=Ta[0][0],Fb=Ta[0][1],Lb=Ta[1][0],
Tb=Ta[1][1];Ch(ua(Ya),Ta).cells.forEach(function(Wb,nc){var wc=Wb.edges;Wb=Wb.site;(jb[nc]=wc.length?wc.map(function(Ec){Ec=Ec.start();return[Ec.x,Ec.y]}):Wb.x>=ub&&Wb.x<=Lb&&Wb.y>=Fb&&Wb.y<=Tb?[[ub,Tb],[Lb,Tb],[Lb,Fb],[ub,Fb]]:[]).point=Ya[nc]});return jb}function ua(Ya){return Ya.map(function(jb,ub){return{x:1E-6*Math.round(Ja(jb,ub)/1E-6),y:1E-6*Math.round(Za(jb,ub)/1E-6),i:ub}})}var Ca=mf,Ea=If,Ja=Ca,Za=Ea,Ta=ok;if(R)return ja(R);ja.links=function(Ya){return Ch(ua(Ya)).edges.filter(function(jb){return jb.l&&
jb.r}).map(function(jb){return{source:Ya[jb.l.i],target:Ya[jb.r.i]}})};ja.triangles=function(Ya){var jb=[];Ch(ua(Ya)).cells.forEach(function(ub,Fb){var Lb=ub.site;ub=ub.edges.sort(Ti);var Tb=-1,Wb=ub.length,nc=ub[Wb-1].edge;for(nc=nc.l===Lb?nc.r:nc.l;++Tb<Wb;){var wc=nc;nc=ub[Tb].edge;nc=nc.l===Lb?nc.r:nc.l;Fb<wc.i&&Fb<nc.i&&0>(Lb.x-nc.x)*(wc.y-Lb.y)-(Lb.x-wc.x)*(nc.y-Lb.y)&&jb.push([Ya[Fb],Ya[wc.i],Ya[nc.i]])}});return jb};ja.x=function(Ya){return arguments.length?(Ja=xa(Ca=Ya),ja):Ca};ja.y=function(Ya){return arguments.length?
(Za=xa(Ea=Ya),ja):Ea};ja.clipExtent=function(Ya){if(!arguments.length)return Ta===ok?null:Ta;Ta=null==Ya?ok:Ya;return ja};ja.size=function(Ya){return arguments.length?ja.clipExtent(Ya&&[[0,0],Ya]):Ta===ok?null:Ta&&Ta[1]};return ja};var ok=[[-1E6,-1E6],[1E6,1E6]];Rb.geom.delaunay=function(R){return Rb.geom.voronoi().triangles(R)};Rb.geom.quadtree=function(R,ja,ua,Ca,Ea){function Ja(jb){function ub(qd,td,ud,nd,Vd,ne,te,De){if(!isNaN(ud)&&!isNaN(nd))if(qd.leaf){var we=qd.x,Je=qd.y;if(null!=we){if(!(.01>
kd(we-ud)+kd(Je-nd))){var ke=qd.point;qd.x=qd.y=qd.point=null;Fb(qd,ke,we,Je,Vd,ne,te,De)}Fb(qd,td,ud,nd,Vd,ne,te,De)}else qd.x=ud,qd.y=nd,qd.point=td}else Fb(qd,td,ud,nd,Vd,ne,te,De)}function Fb(qd,td,ud,nd,Vd,ne,te,De){var we=.5*(Vd+te),Je=.5*(ne+De),ke=ud>=we,hg=nd>=Je,zf=hg<<1|ke;qd.leaf=!1;qd=qd.nodes[zf]||(qd.nodes[zf]=tj());ke?Vd=we:te=we;hg?ne=Je:De=Je;ub(qd,td,ud,nd,Vd,ne,te,De)}var Lb=xa(Za),Tb=xa(Ta),Wb;if(null!=ja){var nc=ja;var wc=ua;var Ec=Ca;var Uc=Ea}else{Ec=Uc=-(nc=wc=Infinity);var bd=
[];var dd=[];var id=jb.length;if(Ya)for(Wb=0;Wb<id;++Wb){var gc=jb[Wb];gc.x<nc&&(nc=gc.x);gc.y<wc&&(wc=gc.y);gc.x>Ec&&(Ec=gc.x);gc.y>Uc&&(Uc=gc.y);bd.push(gc.x);dd.push(gc.y)}else for(Wb=0;Wb<id;++Wb){var xc=+Lb(gc=jb[Wb],Wb);gc=+Tb(gc,Wb);xc<nc&&(nc=xc);gc<wc&&(wc=gc);xc>Ec&&(Ec=xc);gc>Uc&&(Uc=gc);bd.push(xc);dd.push(gc)}}xc=Ec-nc;gc=Uc-wc;xc>gc?Uc=wc+xc:Ec=nc+gc;var Vc=tj();Vc.add=function(qd){ub(Vc,qd,+Lb(qd,++Wb),+Tb(qd,Wb),nc,wc,Ec,Uc)};Vc.visit=function(qd){Vh(qd,Vc,nc,wc,Ec,Uc)};Vc.find=function(qd){return Lj(Vc,
qd[0],qd[1],nc,wc,Ec,Uc)};Wb=-1;if(null==ja){for(;++Wb<id;)ub(Vc,jb[Wb],bd[Wb],dd[Wb],nc,wc,Ec,Uc);--Wb}else jb.forEach(Vc.add);bd=dd=jb=gc=null;return Vc}var Za=mf,Ta=If,Ya;if(Ya=arguments.length)return Za=sj,Ta=nf,3===Ya&&(Ea=ua,Ca=ja,ua=ja=0),Ja(R);Ja.x=function(jb){return arguments.length?(Za=jb,Ja):Za};Ja.y=function(jb){return arguments.length?(Ta=jb,Ja):Ta};Ja.extent=function(jb){if(!arguments.length)return null==ja?null:[[ja,ua],[Ca,Ea]];null==jb?ja=ua=Ca=Ea=null:(ja=+jb[0][0],ua=+jb[0][1],
Ca=+jb[1][0],Ea=+jb[1][1]);return Ja};Ja.size=function(jb){if(!arguments.length)return null==ja?null:[Ca-ja,Ea-ua];null==jb?ja=ua=Ca=Ea=null:(ja=ua=0,Ca=+jb[0],Ea=+jb[1]);return Ja};return Ja};Rb.interpolateRgb=Uh;Rb.interpolateObject=ih;Rb.interpolateNumber=Dg;Rb.interpolateString=Vi;var cj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wi=new RegExp(cj.source,"g");Rb.interpolate=cg;Rb.interpolators=[function(R,ja){var ua=typeof ja;return("string"===ua?Nj.has(ja.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ja)?
Uh:Vi:ja instanceof ya?Uh:Array.isArray(ja)?Yh:"object"===ua&&isNaN(ja)?ih:Dg)(R,ja)}];Rb.interpolateArray=Yh;var al=function(){return w},kj=Rb.map({linear:al,poly:function(R){return function(ja){return Math.pow(ja,R)}},quad:function(){return dg},cubic:function(){return Te},sin:function(){return Tg},exp:function(){return wh},circle:function(){return Bi},elastic:function(R,ja){2>arguments.length&&(ja=.45);if(arguments.length)var ua=ja/Kf*Math.asin(1/R);else R=1,ua=ja/4;return function(Ca){return 1+
R*Math.pow(2,-10*Ca)*Math.sin((Ca-ua)*Kf/ja)}},back:function(R){R||(R=1.70158);return function(ja){return ja*ja*((R+1)*ja-R)}},bounce:function(){return Ci}}),nl=Rb.map({"in":w,out:jh,"in-out":Ug,"out-in":function(R){return Ug(jh(R))}});Rb.ease=function(R){var ja=R.indexOf("-"),ua=0<=ja?R.slice(0,ja):R;ja=0<=ja?R.slice(ja+1):"in";ua=kj.get(ua)||al;ja=nl.get(ja)||w;return af(ja(ua.apply(null,Mj.call(arguments,1))))};Rb.interpolateHcl=function(R,ja){R=Rb.hcl(R);ja=Rb.hcl(ja);var ua=R.h,Ca=R.c,Ea=R.l,
Ja=ja.h-ua,Za=ja.c-Ca,Ta=ja.l-Ea;isNaN(Za)&&(Za=0,Ca=isNaN(Ca)?ja.c:Ca);isNaN(Ja)?(Ja=0,ua=isNaN(ua)?ja.h:ua):180<Ja?Ja-=360:-180>Ja&&(Ja+=360);return function(Ya){return hb(ua+Ja*Ya,Ca+Za*Ya,Ea+Ta*Ya)+""}};Rb.interpolateHsl=function(R,ja){R=Rb.hsl(R);ja=Rb.hsl(ja);var ua=R.h,Ca=R.s,Ea=R.l,Ja=ja.h-ua,Za=ja.s-Ca,Ta=ja.l-Ea;isNaN(Za)&&(Za=0,Ca=isNaN(Ca)?ja.s:Ca);isNaN(Ja)?(Ja=0,ua=isNaN(ua)?ja.h:ua):180<Ja?Ja-=360:-180>Ja&&(Ja+=360);return function(Ya){return Ha(ua+Ja*Ya,Ca+Za*Ya,Ea+Ta*Ya)+""}};Rb.interpolateLab=
function(R,ja){R=Rb.lab(R);ja=Rb.lab(ja);var ua=R.l,Ca=R.a,Ea=R.b,Ja=ja.l-ua,Za=ja.a-Ca,Ta=ja.b-Ea;return function(Ya){return ib(ua+Ja*Ya,Ca+Za*Ya,Ea+Ta*Ya)+""}};Rb.interpolateRound=Wh;Rb.transform=function(R){var ja=Cf.createElementNS(Rb.ns.prefix.svg,"g");return(Rb.transform=function(ua){if(null!=ua){ja.setAttribute("transform",ua);var Ca=ja.transform.baseVal.consolidate()}return new Di(Ca?Ca.matrix:pk)})(R)};Di.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+
")skewX("+this.skew+")scale("+this.scale+")"};var pk={a:1,b:0,c:0,d:1,e:0,f:0};Rb.interpolateTransform=Rf;Rb.layout={};Rb.layout.bundle=function(){return function(R){for(var ja=[],ua=-1,Ca=R.length;++ua<Ca;){var Ea=ja,Ja=Ea.push,Za=R[ua],Ta=Za.source;Za=Za.target;var Ya=Za;if(Ta===Ya)var jb=Ta;else{jb=lg(Ta);Ya=lg(Ya);for(var ub=jb.pop(),Fb=Ya.pop(),Lb=null;ub===Fb;)Lb=ub,ub=jb.pop(),Fb=Ya.pop();jb=Lb}for(Ya=[Ta];Ta!==jb;)Ta=Ta.parent,Ya.push(Ta);for(Ta=Ya.length;Za!==jb;)Ya.splice(Ta,0,Za),Za=Za.parent;
Ja.call(Ea,Ya)}return ja}};Rb.layout.chord=function(){function R(){var Fb={},Lb=[],Tb=Rb.range(Za),Wb=[],nc,wc;Ca=[];Ea=[];var Ec=0;for(nc=-1;++nc<Za;){var Uc=0;for(wc=-1;++wc<Za;)Uc+=Ja[nc][wc];Lb.push(Uc);Wb.push(Rb.range(Za));Ec+=Uc}Ya&&Tb.sort(function(qd,td){return Ya(Lb[qd],Lb[td])});jb&&Wb.forEach(function(qd,td){qd.sort(function(ud,nd){return jb(Ja[td][ud],Ja[td][nd])})});Ec=(Kf-Ta*Za)/Ec;Uc=0;for(nc=-1;++nc<Za;){var bd=Uc;for(wc=-1;++wc<Za;){var dd=Tb[nc],id=Wb[dd][wc],gc=Ja[dd][id],xc=Uc,
Vc=Uc+=gc*Ec;Fb[dd+"-"+id]={index:dd,subindex:id,startAngle:xc,endAngle:Vc,value:gc}}Ea[dd]={index:dd,startAngle:bd,endAngle:Uc,value:Lb[dd]};Uc+=Ta}for(nc=-1;++nc<Za;)for(wc=nc-1;++wc<Za;)Tb=Fb[nc+"-"+wc],Wb=Fb[wc+"-"+nc],(Tb.value||Wb.value)&&Ca.push(Tb.value<Wb.value?{source:Wb,target:Tb}:{source:Tb,target:Wb});ub&&ja()}function ja(){Ca.sort(function(Fb,Lb){return ub((Fb.source.value+Fb.target.value)/2,(Lb.source.value+Lb.target.value)/2)})}var ua={},Ca,Ea,Ja,Za,Ta=0,Ya,jb,ub;ua.matrix=function(Fb){if(!arguments.length)return Ja;
Za=(Ja=Fb)&&Ja.length;Ca=Ea=null;return ua};ua.padding=function(Fb){if(!arguments.length)return Ta;Ta=Fb;Ca=Ea=null;return ua};ua.sortGroups=function(Fb){if(!arguments.length)return Ya;Ya=Fb;Ca=Ea=null;return ua};ua.sortSubgroups=function(Fb){if(!arguments.length)return jb;jb=Fb;Ca=null;return ua};ua.sortChords=function(Fb){if(!arguments.length)return ub;ub=Fb;Ca&&ja();return ua};ua.chords=function(){Ca||R();return Ca};ua.groups=function(){Ea||R();return Ea};return ua};Rb.layout.force=function(){function R(dd){return function(id,
gc,xc,Vc){if(id.point!==dd){xc=id.cx-dd.x;var qd=id.cy-dd.y;gc=Vc-gc;Vc=xc*xc+qd*qd;if(gc*gc/Wb<Vc)return Vc<Lb&&(gc=id.charge/Vc,dd.px-=xc*gc,dd.py-=qd*gc),!0;id.point&&Vc&&Vc<Lb&&(gc=id.pointCharge/Vc,dd.px-=xc*gc,dd.py-=qd*gc)}return!id.charge}}function ja(dd){dd.px=Rb.event.x;dd.py=Rb.event.y;ua.resume()}var ua={},Ca=Rb.dispatch("start","tick","end"),Ea,Ja=[1,1],Za,Ta,Ya=.9,jb=ol,ub=pl,Fb=-30,Lb=bl,Tb=.1,Wb=.64,nc=[],wc=[],Ec,Uc,bd;ua.tick=function(){if(.005>(Ta*=.99))return Ea=null,Ca.end({type:"end",
alpha:Ta=0}),!0;var dd=nc.length,id=wc.length,gc,xc;for(gc=0;gc<id;++gc){var Vc=wc[gc];var qd=Vc.source;var td=Vc.target;var ud=td.x-qd.x;var nd=td.y-qd.y;if(xc=ud*ud+nd*nd)xc=Ta*Uc[gc]*((xc=Math.sqrt(xc))-Ec[gc])/xc,ud*=xc,nd*=xc,td.x-=ud*(xc=qd.weight+td.weight?qd.weight/(qd.weight+td.weight):.5),td.y-=nd*xc,qd.x+=ud*(xc=1-xc),qd.y+=nd*xc}if(xc=Ta*Tb)if(ud=Ja[0]/2,nd=Ja[1]/2,gc=-1,xc)for(;++gc<dd;)Vc=nc[gc],Vc.x+=(ud-Vc.x)*xc,Vc.y+=(nd-Vc.y)*xc;if(Fb)for(bg(id=Rb.geom.quadtree(nc),Ta,bd),gc=-1;++gc<
dd;)(Vc=nc[gc]).fixed||id.visit(R(Vc));for(gc=-1;++gc<dd;)Vc=nc[gc],Vc.fixed?(Vc.x=Vc.px,Vc.y=Vc.py):(Vc.x-=(Vc.px-(Vc.px=Vc.x))*Ya,Vc.y-=(Vc.py-(Vc.py=Vc.y))*Ya);Ca.tick({type:"tick",alpha:Ta})};ua.nodes=function(dd){if(!arguments.length)return nc;nc=dd;return ua};ua.links=function(dd){if(!arguments.length)return wc;wc=dd;return ua};ua.size=function(dd){if(!arguments.length)return Ja;Ja=dd;return ua};ua.linkDistance=function(dd){if(!arguments.length)return jb;jb="function"===typeof dd?dd:+dd;return ua};
ua.distance=ua.linkDistance;ua.linkStrength=function(dd){if(!arguments.length)return ub;ub="function"===typeof dd?dd:+dd;return ua};ua.friction=function(dd){if(!arguments.length)return Ya;Ya=+dd;return ua};ua.charge=function(dd){if(!arguments.length)return Fb;Fb="function"===typeof dd?dd:+dd;return ua};ua.chargeDistance=function(dd){if(!arguments.length)return Math.sqrt(Lb);Lb=dd*dd;return ua};ua.gravity=function(dd){if(!arguments.length)return Tb;Tb=+dd;return ua};ua.theta=function(dd){if(!arguments.length)return Math.sqrt(Wb);
Wb=dd*dd;return ua};ua.alpha=function(dd){if(!arguments.length)return Ta;dd=+dd;Ta?0<dd?Ta=dd:(Ea.c=null,Ea.t=NaN,Ea=null,Ca.end({type:"end",alpha:Ta=0})):0<dd&&(Ca.start({type:"start",alpha:Ta=dd}),Ea=Ma(ua.tick));return ua};ua.start=function(){function dd(nd,Vd){if(!td){td=Array(gc);for(te=0;te<gc;++te)td[te]=[];for(te=0;te<xc;++te){var ne=wc[te];td[ne.source.index].push(ne.target);td[ne.target.index].push(ne.source)}}ne=td[id];for(var te=-1,De=ne.length,we;++te<De;)if(!isNaN(we=ne[te][nd]))return we;
return Math.random()*Vd}var id,gc=nc.length,xc=wc.length,Vc=Ja[0],qd=Ja[1],td,ud;for(id=0;id<gc;++id)(ud=nc[id]).index=id,ud.weight=0;for(id=0;id<xc;++id)ud=wc[id],"number"==typeof ud.source&&(ud.source=nc[ud.source]),"number"==typeof ud.target&&(ud.target=nc[ud.target]),++ud.source.weight,++ud.target.weight;for(id=0;id<gc;++id)ud=nc[id],isNaN(ud.x)&&(ud.x=dd("x",Vc)),isNaN(ud.y)&&(ud.y=dd("y",qd)),isNaN(ud.px)&&(ud.px=ud.x),isNaN(ud.py)&&(ud.py=ud.y);Ec=[];if("function"===typeof jb)for(id=0;id<xc;++id)Ec[id]=
+jb.call(this,wc[id],id);else for(id=0;id<xc;++id)Ec[id]=jb;Uc=[];if("function"===typeof ub)for(id=0;id<xc;++id)Uc[id]=+ub.call(this,wc[id],id);else for(id=0;id<xc;++id)Uc[id]=ub;bd=[];if("function"===typeof Fb)for(id=0;id<gc;++id)bd[id]=+Fb.call(this,nc[id],id);else for(id=0;id<gc;++id)bd[id]=Fb;return ua.resume()};ua.resume=function(){return ua.alpha(.1)};ua.stop=function(){return ua.alpha(0)};ua.drag=function(){Za||(Za=Rb.behavior.drag().origin(w).on("dragstart.force",ag).on("drag.force",ja).on("dragend.force",
xh));if(!arguments.length)return Za;this.on("mouseover.force",yh).on("mouseout.force",oi).call(Za)};return Rb.rebind(ua,Ca,"on")};var ol=20,pl=1,bl=Infinity;Rb.layout.hierarchy=function(){function R(Ea){var Ja=[Ea],Za=[],Ta;for(Ea.depth=0;null!=(Ta=Ja.pop());)if(Za.push(Ta),(jb=ua.call(R,Ta,Ta.depth))&&(Ya=jb.length)){for(var Ya,jb,ub;0<=--Ya;)Ja.push(ub=jb[Ya]),ub.parent=Ta,ub.depth=Ta.depth+1;Ca&&(Ta.value=0);Ta.children=jb}else Ca&&(Ta.value=+Ca.call(R,Ta,Ta.depth)||0),delete Ta.children;eg(Ea,
function(Fb){var Lb,Tb;ja&&(Lb=Fb.children)&&Lb.sort(ja);Ca&&(Tb=Fb.parent)&&(Tb.value+=Fb.value)});return Za}var ja=wf,ua=Ff,Ca=kh;R.sort=function(Ea){if(!arguments.length)return ja;ja=Ea;return R};R.children=function(Ea){if(!arguments.length)return ua;ua=Ea;return R};R.value=function(Ea){if(!arguments.length)return Ca;Ca=Ea;return R};R.revalue=function(Ea){Ca&&(qi(Ea,function(Ja){Ja.children&&(Ja.value=0)}),eg(Ea,function(Ja){var Za;Ja.children||(Ja.value=+Ca.call(R,Ja,Ja.depth)||0);if(Za=Ja.parent)Za.value+=
Ja.value}));return Ea};return R};Rb.layout.partition=function(){function R(Ja,Za,Ta,Ya){var jb=Ja.children;Ja.x=Za;Ja.y=Ja.depth*Ya;Ja.dx=Ta;Ja.dy=Ya;if(jb&&(Fb=jb.length)){var ub=-1,Fb,Lb;for(Ta=Ja.value?Ta/Ja.value:0;++ub<Fb;)R(Lb=jb[ub],Za,Ja=Lb.value*Ta,Ya),Za+=Ja}}function ja(Ja){Ja=Ja.children;var Za=0;if(Ja&&(Ya=Ja.length))for(var Ta=-1,Ya;++Ta<Ya;)Za=Math.max(Za,ja(Ja[Ta]));return 1+Za}function ua(Ja,Za){Ja=Ca.call(this,Ja,Za);R(Ja[0],0,Ea[0],Ea[1]/ja(Ja[0]));return Ja}var Ca=Rb.layout.hierarchy(),
Ea=[1,1];ua.size=function(Ja){if(!arguments.length)return Ea;Ea=Ja;return ua};return vf(ua,Ca)};Rb.layout.pie=function(){function R(Za){var Ta=Za.length,Ya=Za.map(function(Ec,Uc){return+ja.call(R,Ec,Uc)}),jb=+("function"===typeof Ca?Ca.apply(this,arguments):Ca),ub=("function"===typeof Ea?Ea.apply(this,arguments):Ea)-jb,Fb=Math.min(Math.abs(ub)/Ta,+("function"===typeof Ja?Ja.apply(this,arguments):Ja)),Lb=Fb*(0>ub?-1:1),Tb=Rb.sum(Ya),Wb=Tb?(ub-Ta*Lb)/Tb:0;Ta=Rb.range(Ta);var nc=[],wc;null!=ua&&Ta.sort(ua===
Kk?function(Ec,Uc){return Ya[Uc]-Ya[Ec]}:function(Ec,Uc){return ua(Za[Ec],Za[Uc])});Ta.forEach(function(Ec){nc[Ec]={data:Za[Ec],value:wc=Ya[Ec],startAngle:jb,endAngle:jb+=wc*Wb+Lb,padAngle:Fb}});return nc}var ja=Number,ua=Kk,Ca=0,Ea=Kf,Ja=0;R.value=function(Za){if(!arguments.length)return ja;ja=Za;return R};R.sort=function(Za){if(!arguments.length)return ua;ua=Za;return R};R.startAngle=function(Za){if(!arguments.length)return Ca;Ca=Za;return R};R.endAngle=function(Za){if(!arguments.length)return Ea;
Ea=Za;return R};R.padAngle=function(Za){if(!arguments.length)return Ja;Ja=Za;return R};return R};var Kk={};Rb.layout.stack=function(){function R(Ta,Ya){if(!(Lb=Ta.length))return Ta;var jb=Ta.map(function(wc,Ec){return ja.call(R,wc,Ec)}),ub=jb.map(function(wc){return wc.map(function(Ec,Uc){return[Ja.call(R,Ec,Uc),Za.call(R,Ec,Uc)]})}),Fb=ua.call(R,ub,Ya);jb=Rb.permute(jb,Fb);ub=Rb.permute(ub,Fb);Ya=Ca.call(R,ub,Ya);Fb=jb[0].length;var Lb,Tb,Wb,nc;for(Wb=0;Wb<Fb;++Wb)for(Ea.call(R,jb[0][Wb],nc=Ya[Wb],
ub[0][Wb][1]),Tb=1;Tb<Lb;++Tb)Ea.call(R,jb[Tb][Wb],nc+=ub[Tb-1][Wb][1],ub[Tb][Wb][1]);return Ta}var ja=w,ua=lh,Ca=ng,Ea=Vg,Ja=nh,Za=mg;R.values=function(Ta){if(!arguments.length)return ja;ja=Ta;return R};R.order=function(Ta){if(!arguments.length)return ua;ua="function"===typeof Ta?Ta:ql.get(Ta)||lh;return R};R.offset=function(Ta){if(!arguments.length)return Ca;Ca="function"===typeof Ta?Ta:rl.get(Ta)||ng;return R};R.x=function(Ta){if(!arguments.length)return Ja;Ja=Ta;return R};R.y=function(Ta){if(!arguments.length)return Za;
Za=Ta;return R};R.out=function(Ta){if(!arguments.length)return Ea;Ea=Ta;return R};return R};var ql=Rb.map({"inside-out":function(R){var ja=R.length,ua=R.map(ri),Ca=R.map(uj),Ea=Rb.range(ja).sort(function(ub,Fb){return ua[ub]-ua[Fb]}),Ja=0,Za=0,Ta=[],Ya=[];for(R=0;R<ja;++R){var jb=Ea[R];Ja<Za?(Ja+=Ca[jb],Ta.push(jb)):(Za+=Ca[jb],Ya.push(jb))}return Ya.reverse().concat(Ta)},reverse:function(R){return Rb.range(R.length).reverse()},"default":lh}),rl=Rb.map({silhouette:function(R){var ja=R.length,ua=R[0].length,
Ca=[],Ea=0,Ja,Za,Ta,Ya=[];for(Za=0;Za<ua;++Za){for(Ta=Ja=0;Ja<ja;Ja++)Ta+=R[Ja][Za][1];Ta>Ea&&(Ea=Ta);Ca.push(Ta)}for(Za=0;Za<ua;++Za)Ya[Za]=(Ea-Ca[Za])/2;return Ya},wiggle:function(R){var ja=R.length,ua=R[0],Ca=ua.length,Ea,Ja,Za,Ta,Ya,jb,ub,Fb=[];Fb[0]=jb=ub=0;for(Ja=1;Ja<Ca;++Ja){for(Za=Ea=0;Ea<ja;++Ea)Za+=R[Ea][Ja][1];var Lb=Ea=0;for(Ya=ua[Ja][0]-ua[Ja-1][0];Ea<ja;++Ea){var Tb=0;for(Ta=(R[Ea][Ja][1]-R[Ea][Ja-1][1])/(2*Ya);Tb<Ea;++Tb)Ta+=(R[Tb][Ja][1]-R[Tb][Ja-1][1])/Ya;Lb+=Ta*R[Ea][Ja][1]}Fb[Ja]=
jb-=Za?Lb/Za*Ya:0;jb<ub&&(ub=jb)}for(Ja=0;Ja<Ca;++Ja)Fb[Ja]-=ub;return Fb},expand:function(R){var ja=R.length,ua=R[0].length,Ca=1/ja,Ea,Ja,Za,Ta=[];for(Ja=0;Ja<ua;++Ja){for(Za=Ea=0;Ea<ja;Ea++)Za+=R[Ea][Ja][1];if(Za)for(Ea=0;Ea<ja;Ea++)R[Ea][Ja][1]/=Za;else for(Ea=0;Ea<ja;Ea++)R[Ea][Ja][1]=Ca}for(Ja=0;Ja<ua;++Ja)Ta[Ja]=0;return Ta},zero:ng});Rb.layout.histogram=function(){function R(Ja,Za){var Ta=[],Ya=Ja.map(ua,this),jb=Ca.call(this,Ya,Za),ub=Ea.call(this,jb,Ya,Za);Za=-1;for(var Fb=Ya.length,Lb=ub.length-
1,Tb=ja?1:1/Fb;++Za<Lb;){var Wb=Ta[Za]=[];Wb.dx=ub[Za+1]-(Wb.x=ub[Za]);Wb.y=0}if(0<Lb)for(Za=-1;++Za<Fb;)Wb=Ya[Za],Wb>=jb[0]&&Wb<=jb[1]&&(Wb=Ta[Rb.bisect(ub,Wb,1,Lb)-1],Wb.y+=Tb,Wb.push(Ja[Za]));return Ta}var ja=!0,ua=Number,Ca=Hg,Ea=vj;R.value=function(Ja){if(!arguments.length)return ua;ua=Ja;return R};R.range=function(Ja){if(!arguments.length)return Ca;Ca=xa(Ja);return R};R.bins=function(Ja){if(!arguments.length)return Ea;Ea="number"===typeof Ja?function(Za){return Gg(Za,Ja)}:xa(Ja);return R};R.frequency=
function(Ja){if(!arguments.length)return ja;ja=!!Ja;return R};return R};Rb.layout.pack=function(){function R(Ja,Za){Ja=ja.call(this,Ja,Za);Za=Ja[0];var Ta=Ca[0],Ya=Ca[1],jb=null==Ea?Math.sqrt:"function"===typeof Ea?Ea:function(){return Ea};Za.x=Za.y=0;eg(Za,function(Fb){Fb.r=+jb(Fb.value)});eg(Za,Ig);if(ua){var ub=ua*(Ea?1:Math.max(2*Za.r/Ta,2*Za.r/Ya))/2;eg(Za,function(Fb){Fb.r+=ub});eg(Za,Ig);eg(Za,function(Fb){Fb.r-=ub})}Xi(Za,Ta/2,Ya/2,Ea?1:1/Math.max(2*Za.r/Ta,2*Za.r/Ya));return Ja}var ja=Rb.layout.hierarchy().sort(oh),
ua=0,Ca=[1,1],Ea;R.size=function(Ja){if(!arguments.length)return Ca;Ca=Ja;return R};R.radius=function(Ja){if(!arguments.length)return Ea;Ea=null==Ja||"function"===typeof Ja?Ja:+Ja;return R};R.padding=function(Ja){if(!arguments.length)return ua;ua=+Ja;return R};return vf(R,ja)};Rb.layout.tree=function(){function R(jb,ub){jb=Ja.call(this,jb,ub);ub=jb[0];var Fb=ja(ub);eg(Fb,ua);Fb.parent.m=-Fb.z;qi(Fb,Ca);if(Ya)qi(ub,Ea);else{var Lb=ub,Tb=ub,Wb=ub;qi(ub,function(Uc){Uc.x<Lb.x&&(Lb=Uc);Uc.x>Tb.x&&(Tb=
Uc);Uc.depth>Wb.depth&&(Wb=Uc)});var nc=Za(Lb,Tb)/2-Lb.x,wc=Ta[0]/(Tb.x+Za(Tb,Lb)/2+nc),Ec=Ta[1]/(Wb.depth||1);qi(ub,function(Uc){Uc.x=(Uc.x+nc)*wc;Uc.y=Uc.depth*Ec})}return jb}function ja(jb){jb={A:null,children:[jb]};for(var ub=[jb],Fb;null!=(Fb=ub.pop());)for(var Lb=Fb.children,Tb,Wb=0,nc=Lb.length;Wb<nc;++Wb)ub.push((Lb[Wb]=Tb={_:Lb[Wb],parent:Fb,children:(Tb=Lb[Wb].children)&&Tb.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Wb}).a=Tb);return jb.children[0]}function ua(jb){var ub=jb.children,
Fb=jb.parent.children,Lb=jb.i?Fb[jb.i-1]:null;if(ub.length){for(var Tb=0,Wb=0,nc=jb.children,wc=nc.length,Ec;0<=--wc;)Ec=nc[wc],Ec.z+=Tb,Ec.m+=Tb,Tb+=Ec.s+(Wb+=Ec.c);ub=(ub[0].z+ub[ub.length-1].z)/2;Lb?(jb.z=Lb.z+Za(jb._,Lb._),jb.m=jb.z-ub):jb.z=ub}else Lb&&(jb.z=Lb.z+Za(jb._,Lb._));ub=jb.parent;Fb=jb.parent.A||Fb[0];if(Lb){Wb=Tb=jb;nc=Tb.parent.children[0];wc=Tb.m;Ec=Wb.m;for(var Uc=Lb.m,bd=nc.m,dd;Lb=Yg(Lb),Tb=mh(Tb),Lb&&Tb;){nc=mh(nc);Wb=Yg(Wb);Wb.a=jb;dd=Lb.z+Uc-Tb.z-wc+Za(Lb._,Tb._);if(0<dd){var id=
Lb.a.parent===jb.parent?Lb.a:Fb,gc=jb,xc=dd,Vc=xc/(gc.i-id.i);gc.c-=Vc;gc.s+=xc;id.c+=Vc;gc.z+=xc;gc.m+=xc;wc+=dd;Ec+=dd}Uc+=Lb.m;wc+=Tb.m;bd+=nc.m;Ec+=Wb.m}Lb&&!Yg(Wb)&&(Wb.t=Lb,Wb.m+=Uc-Ec);Tb&&!mh(nc)&&(nc.t=Tb,nc.m+=wc-bd,Fb=jb)}ub.A=Fb}function Ca(jb){jb._.x=jb.z+jb.parent.m;jb.m+=jb.parent.m}function Ea(jb){jb.x*=Ta[0];jb.y=jb.depth*Ta[1]}var Ja=Rb.layout.hierarchy().sort(null).value(null),Za=Ye,Ta=[1,1],Ya=null;R.separation=function(jb){if(!arguments.length)return Za;Za=jb;return R};R.size=
function(jb){if(!arguments.length)return Ya?null:Ta;Ya=null==(Ta=jb)?Ea:null;return R};R.nodeSize=function(jb){if(!arguments.length)return Ya?Ta:null;Ya=null==(Ta=jb)?null:Ea;return R};return vf(R,Ja)};Rb.layout.cluster=function(){function R(Ja,Za){Ja=ja.call(this,Ja,Za);var Ta=Ja[0],Ya,jb=0;eg(Ta,function(Tb){var Wb=Tb.children;Wb&&Wb.length?(Tb.x=vg(Wb),Tb.y=Gi(Wb)):(Tb.x=Ya?jb+=ua(Tb,Ya):0,Tb.y=0,Ya=Tb)});Za=Zg(Ta);var ub=di(Ta),Fb=Za.x-ua(Za,ub)/2,Lb=ub.x+ua(ub,Za)/2;eg(Ta,Ea?function(Tb){Tb.x=
(Tb.x-Ta.x)*Ca[0];Tb.y=(Ta.y-Tb.y)*Ca[1]}:function(Tb){Tb.x=(Tb.x-Fb)/(Lb-Fb)*Ca[0];Tb.y=(1-(Ta.y?Tb.y/Ta.y:1))*Ca[1]});return Ja}var ja=Rb.layout.hierarchy().sort(null).value(null),ua=Ye,Ca=[1,1],Ea=!1;R.separation=function(Ja){if(!arguments.length)return ua;ua=Ja;return R};R.size=function(Ja){if(!arguments.length)return Ea?null:Ca;Ea=null==(Ca=Ja);return R};R.nodeSize=function(Ja){if(!arguments.length)return Ea?Ca:null;Ea=null!=(Ca=Ja);return R};return vf(R,ja)};Rb.layout.treemap=function(){function R(Wb,
nc){for(var wc=-1,Ec=Wb.length,Uc,bd;++wc<Ec;)bd=(Uc=Wb[wc]).value*(0>nc?0:nc),Uc.area=isNaN(bd)||0>=bd?0:bd}function ja(Wb){var nc=Wb.children;if(nc&&nc.length){var wc=jb(Wb),Ec=[],Uc=nc.slice(),bd=Infinity,dd,id="slice"===Lb?wc.dx:"dice"===Lb?wc.dy:"slice-dice"===Lb?Wb.depth&1?wc.dy:wc.dx:Math.min(wc.dx,wc.dy);R(Uc,wc.dx*wc.dy/Wb.value);for(Ec.area=0;0<(Wb=Uc.length);){Ec.push(Wb=Uc[Wb-1]);Ec.area+=Wb.area;if(!(Wb="squarify"!==Lb)){Wb=id;for(var gc=Ec.area,xc=0,Vc=Infinity,qd=-1,td=Ec.length;++qd<
td;)if(dd=Ec[qd].area)dd<Vc&&(Vc=dd),dd>xc&&(xc=dd);gc*=gc;Wb*=Wb;Wb=(dd=gc?Math.max(Wb*xc*Tb/gc,gc/(Wb*Vc*Tb)):Infinity)<=bd}Wb?(Uc.pop(),bd=dd):(Ec.area-=Ec.pop().area,Ca(Ec,id,wc,!1),id=Math.min(wc.dx,wc.dy),Ec.length=Ec.area=0,bd=Infinity)}Ec.length&&(Ca(Ec,id,wc,!0),Ec.length=Ec.area=0);nc.forEach(ja)}}function ua(Wb){var nc=Wb.children;if(nc&&nc.length){var wc=jb(Wb),Ec=nc.slice(),Uc=[];R(Ec,wc.dx*wc.dy/Wb.value);for(Uc.area=0;Wb=Ec.pop();)Uc.push(Wb),Uc.area+=Wb.area,null!=Wb.z&&(Ca(Uc,Wb.z?
wc.dx:wc.dy,wc,!Ec.length),Uc.length=Uc.area=0);nc.forEach(ua)}}function Ca(Wb,nc,wc,Ec){var Uc=-1,bd=Wb.length,dd=wc.x,id=wc.y,gc=nc?Za(Wb.area/nc):0;if(nc==wc.dx){if(Ec||gc>wc.dy)gc=wc.dy;for(;++Uc<bd;){var xc=Wb[Uc];xc.x=dd;xc.y=id;xc.dy=gc;dd+=xc.dx=Math.min(wc.x+wc.dx-dd,gc?Za(xc.area/gc):0)}xc.z=!0;xc.dx+=wc.x+wc.dx-dd;wc.y+=gc;wc.dy-=gc}else{if(Ec||gc>wc.dx)gc=wc.dx;for(;++Uc<bd;)xc=Wb[Uc],xc.x=dd,xc.y=id,xc.dx=gc,id+=xc.dy=Math.min(wc.y+wc.dy-id,gc?Za(xc.area/gc):0);xc.z=!1;xc.dy+=wc.y+wc.dy-
id;wc.x+=gc;wc.dx-=gc}}function Ea(Wb){Wb=Fb||Ja(Wb);var nc=Wb[0];nc.x=nc.y=0;nc.value?(nc.dx=Ta[0],nc.dy=Ta[1]):nc.dx=nc.dy=0;Fb&&Ja.revalue(nc);R([nc],nc.dx*nc.dy/nc.value);(Fb?ua:ja)(nc);ub&&(Fb=Wb);return Wb}var Ja=Rb.layout.hierarchy(),Za=Math.round,Ta=[1,1],Ya=null,jb=Qg,ub=!1,Fb,Lb="squarify",Tb=.5*(1+Math.sqrt(5));Ea.size=function(Wb){if(!arguments.length)return Ta;Ta=Wb;return Ea};Ea.padding=function(Wb){function nc(Uc){var bd=Wb.call(Ea,Uc,Uc.depth);return null==bd?Qg(Uc):wg(Uc,"number"===
typeof bd?[bd,bd,bd,bd]:bd)}function wc(Uc){return wg(Uc,Wb)}if(!arguments.length)return Ya;var Ec;jb=null==(Ya=Wb)?Qg:"function"===(Ec=typeof Wb)?nc:"number"===Ec?(Wb=[Wb,Wb,Wb,Wb],wc):wc;return Ea};Ea.round=function(Wb){if(!arguments.length)return Za!=Number;Za=Wb?Math.round:Number;return Ea};Ea.sticky=function(Wb){if(!arguments.length)return ub;ub=Wb;Fb=null;return Ea};Ea.ratio=function(Wb){if(!arguments.length)return Tb;Tb=Wb;return Ea};Ea.mode=function(Wb){if(!arguments.length)return Lb;Lb=Wb+
"";return Ea};return vf(Ea,Ja)};Rb.random={normal:function(R,ja){var ua=arguments.length;2>ua&&(ja=1);1>ua&&(R=0);return function(){do{var Ca=2*Math.random()-1;var Ea=2*Math.random()-1;Ea=Ca*Ca+Ea*Ea}while(!Ea||1<Ea);return R+ja*Ca*Math.sqrt(-2*Math.log(Ea)/Ea)}},logNormal:function(){var R=Rb.random.normal.apply(Rb,arguments);return function(){return Math.exp(R())}},bates:function(R){var ja=Rb.random.irwinHall(R);return function(){return ja()/R}},irwinHall:function(R){return function(){for(var ja=
0,ua=0;ua<R;ua++)ja+=Math.random();return ja}}};Rb.scale={};var Bj={floor:w,ceil:w};Rb.scale.linear=function(){return U([0,1],[0,1],cg,!1)};var Li={s:1,g:1,p:1,r:1,e:1};Rb.scale.log=function(){return mb(Rb.scale.linear().domain([0,1]),10,!0,[1,10])};var Sg=Rb.format(".0e"),zg={floor:function(R){return-Math.ceil(-R)},ceil:function(R){return-Math.floor(-R)}};Rb.scale.pow=function(){return Mb(Rb.scale.linear(),1,[0,1])};Rb.scale.sqrt=function(){return Rb.scale.pow().exponent(.5)};Rb.scale.ordinal=function(){return Zb([],
{t:"range",a:[[]]})};Rb.scale.category10=function(){return Rb.scale.ordinal().range(rh)};Rb.scale.category20=function(){return Rb.scale.ordinal().range(dh)};Rb.scale.category20b=function(){return Rb.scale.ordinal().range(sh)};Rb.scale.category20c=function(){return Rb.scale.ordinal().range(Oi)};var rh=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Qa),dh=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,
14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Qa),sh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Qa),Oi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Qa);Rb.scale.quantile=function(){return Jc([],[])};Rb.scale.quantize=
function(){return Ic(0,1,[0,1])};Rb.scale.threshold=function(){return yc([.5],[0,1])};Rb.scale.identity=function(){return Hc([0,1])};Rb.svg={};Rb.svg.arc=function(){function R(){var jb=Math.max(0,+ua.apply(this,arguments)),ub=Math.max(0,+Ca.apply(this,arguments)),Fb=Za.apply(this,arguments)-yf,Lb=Ta.apply(this,arguments)-yf,Tb=Math.abs(Lb-Fb),Wb=Fb>Lb?0:1;if(ub<jb){var nc=ub;ub=jb;jb=nc}if(Tb>=si)return ja(ub,Wb)+(jb?ja(jb,1-Wb):"")+"Z";var wc,Ec=0,Uc=0,bd=[];if(wc=(+Ya.apply(this,arguments)||0)/
2){var dd=Ja===eh?Math.sqrt(jb*jb+ub*ub):+Ja.apply(this,arguments);Wb||(Uc*=-1);ub&&(Uc=ma(dd/ub*Math.sin(wc)));jb&&(Ec=ma(dd/jb*Math.sin(wc)))}if(ub){dd=ub*Math.cos(Fb+Uc);wc=ub*Math.sin(Fb+Uc);var id=ub*Math.cos(Lb-Uc);var gc=ub*Math.sin(Lb-Uc);var xc=Math.abs(Lb-Fb-2*Uc)<=ie?0:1;Uc&&nb(dd,wc,id,gc)===Wb^xc&&(id=(Fb+Lb)/2,dd=ub*Math.cos(id),wc=ub*Math.sin(id),id=gc=null)}else dd=wc=0;if(jb){Uc=jb*Math.cos(Lb-Ec);var Vc=jb*Math.sin(Lb-Ec);var qd=jb*Math.cos(Fb+Ec);var td=jb*Math.sin(Fb+Ec);var ud=
Math.abs(Fb-Lb+2*Ec)<=ie?0:1;Ec&&nb(Uc,Vc,qd,td)===1-Wb^ud&&(qd=(Fb+Lb)/2,Uc=jb*Math.cos(qd),Vc=jb*Math.sin(qd),qd=td=null)}else Uc=Vc=0;1E-6<Tb&&.001<(nc=Math.min(Math.abs(ub-jb)/2,+Ea.apply(this,arguments)))?(xc=jb<ub^Wb?0:1,ud=Fb=nc,Tb<ie&&(Tb=null==qd?[Uc,Vc]:null==id?[dd,wc]:Vf([dd,wc],[qd,td],[id,gc],[Uc,Vc]),ud=dd-Tb[0],Fb=wc-Tb[1],Lb=id-Tb[0],Ec=gc-Tb[1],Fb=1/Math.sin(Math.acos((ud*Lb+Fb*Ec)/(Math.sqrt(ud*ud+Fb*Fb)*Math.sqrt(Lb*Lb+Ec*Ec)))/2),Tb=Math.sqrt(Tb[0]*Tb[0]+Tb[1]*Tb[1]),ud=Math.min(nc,
(jb-Tb)/(Fb-1)),Fb=Math.min(nc,(ub-Tb)/(Fb+1))),null!=id?(Tb=Kb(null==qd?[Uc,Vc]:[qd,td],[dd,wc],ub,Fb,Wb),Lb=Kb([id,gc],[Uc,Vc],ub,Fb,Wb),nc===Fb?bd.push("M",Tb[0],"A",Fb,",",Fb," 0 0,",xc," ",Tb[1],"A",ub,",",ub," 0 ",1-Wb^nb(Tb[1][0],Tb[1][1],Lb[1][0],Lb[1][1]),",",Wb," ",Lb[1],"A",Fb,",",Fb," 0 0,",xc," ",Lb[0]):bd.push("M",Tb[0],"A",Fb,",",Fb," 0 1,",xc," ",Lb[0])):bd.push("M",dd,",",wc),null!=qd?(ub=Kb([dd,wc],[qd,td],jb,-ud,Wb),id=Kb([Uc,Vc],null==id?[dd,wc]:[id,gc],jb,-ud,Wb),nc===ud?bd.push("L",
id[0],"A",ud,",",ud," 0 0,",xc," ",id[1],"A",jb,",",jb," 0 ",Wb^nb(id[1][0],id[1][1],ub[1][0],ub[1][1]),",",1-Wb," ",ub[1],"A",ud,",",ud," 0 0,",xc," ",ub[0]):bd.push("L",id[0],"A",ud,",",ud," 0 0,",xc," ",ub[0])):bd.push("L",Uc,",",Vc)):(bd.push("M",dd,",",wc),null!=id&&bd.push("A",ub,",",ub," 0 ",xc,",",Wb," ",id,",",gc),bd.push("L",Uc,",",Vc),null!=qd&&bd.push("A",jb,",",jb," 0 ",ud,",",1-Wb," ",qd,",",td));bd.push("Z");return bd.join("")}function ja(jb,ub){return"M0,"+jb+"A"+jb+","+jb+" 0 1,"+
ub+" 0,"+-jb+"A"+jb+","+jb+" 0 1,"+ub+" 0,"+jb}var ua=Xb,Ca=va,Ea=Dc,Ja=eh,Za=Da,Ta=Oa,Ya=bb;R.innerRadius=function(jb){if(!arguments.length)return ua;ua=xa(jb);return R};R.outerRadius=function(jb){if(!arguments.length)return Ca;Ca=xa(jb);return R};R.cornerRadius=function(jb){if(!arguments.length)return Ea;Ea=xa(jb);return R};R.padRadius=function(jb){if(!arguments.length)return Ja;Ja=jb==eh?eh:xa(jb);return R};R.startAngle=function(jb){if(!arguments.length)return Za;Za=xa(jb);return R};R.endAngle=
function(jb){if(!arguments.length)return Ta;Ta=xa(jb);return R};R.padAngle=function(jb){if(!arguments.length)return Ya;Ya=xa(jb);return R};R.centroid=function(){var jb=(+ua.apply(this,arguments)+ +Ca.apply(this,arguments))/2,ub=(+Za.apply(this,arguments)+ +Ta.apply(this,arguments))/2-yf;return[Math.cos(ub)*jb,Math.sin(ub)*jb]};return R};var eh="auto";Rb.svg.line=function(){return Pb(w)};var Dk=Rb.map({linear:pc,"linear-closed":hc,step:function(R){for(var ja=0,ua=R.length,Ca=R[0],Ea=[Ca[0],",",Ca[1]];++ja<
ua;)Ea.push("H",(Ca[0]+(Ca=R[ja])[0])/2,"V",Ca[1]);1<ua&&Ea.push("H",Ca[0]);return Ea.join("")},"step-before":kc,"step-after":Xc,basis:zd,"basis-open":function(R){if(4>R.length)return pc(R);for(var ja=[],ua=-1,Ca=R.length,Ea,Ja=[0],Za=[0];3>++ua;)Ea=R[ua],Ja.push(Ea[0]),Za.push(Ea[1]);ja.push(Hd(ii,Ja)+","+Hd(ii,Za));for(--ua;++ua<Ca;)Ea=R[ua],Ja.shift(),Ja.push(Ea[0]),Za.shift(),Za.push(Ea[1]),Bd(ja,Ja,Za);return ja.join("")},"basis-closed":function(R){for(var ja,ua=-1,Ca=R.length,Ea=Ca+4,Ja,Za=
[],Ta=[];4>++ua;)Ja=R[ua%Ca],Za.push(Ja[0]),Ta.push(Ja[1]);ja=[Hd(ii,Za),",",Hd(ii,Ta)];for(--ua;++ua<Ea;)Ja=R[ua%Ca],Za.shift(),Za.push(Ja[0]),Ta.shift(),Ta.push(Ja[1]),Bd(ja,Za,Ta);return ja.join("")},bundle:function(R,ja){var ua=R.length-1;if(ua)for(var Ca=R[0][0],Ea=R[0][1],Ja=R[ua][0]-Ca,Za=R[ua][1]-Ea,Ta=-1,Ya,jb;++Ta<=ua;)Ya=R[Ta],jb=Ta/ua,Ya[0]=ja*Ya[0]+(1-ja)*(Ca+jb*Ja),Ya[1]=ja*Ya[1]+(1-ja)*(Ea+jb*Za);return zd(R)},cardinal:function(R,ja){return 3>R.length?pc(R):R[0]+fd(R,rd(R,ja))},"cardinal-open":function(R,
ja){return 4>R.length?pc(R):R[1]+fd(R.slice(1,-1),rd(R,ja))},"cardinal-closed":function(R,ja){return 3>R.length?hc(R):R[0]+fd((R.push(R[0]),R),rd([R[R.length-2]].concat(R,[R[1]]),ja))},monotone:function(R){if(3>R.length)R=pc(R);else{var ja=R[0],ua=[],Ca;var Ea=0;var Ja=R.length-1;var Za=[];var Ta=R[1];for(Ca=Za[0]=Pd(R[0],Ta);++Ea<Ja;)Za[Ea]=(Ca+(Ca=Pd(Ta,Ta=R[Ea+1])))/2;Za[Ea]=Ca;for(var Ya=-1,jb=R.length-1;++Ya<jb;)Ea=Pd(R[Ya],R[Ya+1]),1E-6>kd(Ea)?Za[Ya]=Za[Ya+1]=0:(Ja=Za[Ya]/Ea,Ta=Za[Ya+1]/Ea,
Ca=Ja*Ja+Ta*Ta,9<Ca&&(Ca=3*Ea/Math.sqrt(Ca),Za[Ya]=Ca*Ja,Za[Ya+1]=Ca*Ta));for(Ya=-1;++Ya<=jb;)Ca=(R[Math.min(jb,Ya+1)][0]-R[Math.max(0,Ya-1)][0])/(6*(1+Za[Ya]*Za[Ya])),ua.push([Ca||0,Za[Ya]*Ca||0]);R=ja+fd(R,ua)}return R}});Dk.forEach(function(R,ja){ja.key=R;ja.closed=/-closed$/.test(R)});var Zk=[0,2/3,1/3,0],Lg=[0,1/3,2/3,0],ii=[0,1/6,2/3,1/6];Rb.svg.line.radial=function(){var R=Pb(fe);R.radius=R.x;delete R.x;R.angle=R.y;delete R.y;return R};kc.reverse=Xc;Xc.reverse=kc;Rb.svg.area=function(){return Xd(w)};
Rb.svg.area.radial=function(){var R=Xd(fe);R.radius=R.x;delete R.x;R.innerRadius=R.x0;delete R.x0;R.outerRadius=R.x1;delete R.x1;R.angle=R.y;delete R.y;R.startAngle=R.y0;delete R.y0;R.endAngle=R.y1;delete R.y1;return R};Rb.svg.chord=function(){function R(Ya,jb){var ub=ja(this,Ca,Ya,jb);Ya=ja(this,Ea,Ya,jb);return"M"+ub.p0+ua(ub.r,ub.p1,ub.a1-ub.a0)+(ub.a0==Ya.a0&&ub.a1==Ya.a1?"Q 0,0 "+ub.p0:"Q 0,0 "+Ya.p0+ua(Ya.r,Ya.p1,Ya.a1-Ya.a0)+("Q 0,0 "+ub.p0))+"Z"}function ja(Ya,jb,ub,Fb){var Lb=jb.call(Ya,
ub,Fb);jb=Ja.call(Ya,Lb,Fb);ub=Za.call(Ya,Lb,Fb)-yf;Ya=Ta.call(Ya,Lb,Fb)-yf;return{r:jb,a0:ub,a1:Ya,p0:[jb*Math.cos(ub),jb*Math.sin(ub)],p1:[jb*Math.cos(Ya),jb*Math.sin(Ya)]}}function ua(Ya,jb,ub){return"A"+Ya+","+Ya+" 0 "+ +(ub>ie)+",1 "+jb}var Ca=yd,Ea=Id,Ja=oe,Za=Da,Ta=Oa;R.radius=function(Ya){if(!arguments.length)return Ja;Ja=xa(Ya);return R};R.source=function(Ya){if(!arguments.length)return Ca;Ca=xa(Ya);return R};R.target=function(Ya){if(!arguments.length)return Ea;Ea=xa(Ya);return R};R.startAngle=
function(Ya){if(!arguments.length)return Za;Za=xa(Ya);return R};R.endAngle=function(Ya){if(!arguments.length)return Ta;Ta=xa(Ya);return R};return R};Rb.svg.diagonal=function(){function R(Ea,Ja){var Za=ja.call(this,Ea,Ja);Ea=ua.call(this,Ea,Ja);Ja=(Za.y+Ea.y)/2;Za=[Za,{x:Za.x,y:Ja},{x:Ea.x,y:Ja},Ea];Za=Za.map(Ca);return"M"+Za[0]+"C"+Za[1]+" "+Za[2]+" "+Za[3]}var ja=yd,ua=Id,Ca=Fe;R.source=function(Ea){if(!arguments.length)return ja;ja=xa(Ea);return R};R.target=function(Ea){if(!arguments.length)return ua;
ua=xa(Ea);return R};R.projection=function(Ea){if(!arguments.length)return Ca;Ca=Ea;return R};return R};Rb.svg.diagonal.radial=function(){var R=Rb.svg.diagonal(),ja=Fe,ua=R.projection;R.projection=function(Ca){return arguments.length?ua(ee(ja=Ca)):ja};return R};Rb.svg.symbol=function(){function R(Ca,Ea){return(cl.get(ja.call(this,Ca,Ea))||cf)(ua.call(this,Ca,Ea))}var ja=Se,ua=Pe;R.type=function(Ca){if(!arguments.length)return ja;ja=xa(Ca);return R};R.size=function(Ca){if(!arguments.length)return ua;
ua=xa(Ca);return R};return R};var cl=Rb.map({circle:cf,cross:function(R){R=Math.sqrt(R/5)/2;return"M"+-3*R+","+-R+"H"+-R+"V"+-3*R+"H"+R+"V"+-R+"H"+3*R+"V"+R+"H"+R+"V"+3*R+"H"+-R+"V"+R+"H"+-3*R+"Z"},diamond:function(R){R=Math.sqrt(R/(2*Pi));var ja=R*Pi;return"M0,"+-R+"L"+ja+",0 0,"+R+" "+-ja+",0Z"},square:function(R){R=Math.sqrt(R)/2;return"M"+-R+","+-R+"L"+R+","+-R+" "+R+","+R+" "+-R+","+R+"Z"},"triangle-down":function(R){R=Math.sqrt(R/Xj);var ja=R*Xj/2;return"M0,"+ja+"L"+R+","+-ja+" "+-R+","+-ja+
"Z"},"triangle-up":function(R){R=Math.sqrt(R/Xj);var ja=R*Xj/2;return"M0,"+-ja+"L"+R+","+ja+" "+-R+","+ja+"Z"}});Rb.svg.symbolTypes=cl.keys();var Xj=Math.sqrt(3),Pi=Math.tan(30*ve);Re.transition=function(R){var ja=fj||++dl;R=$d(R);for(var ua=[],Ca,Ea,Ja=qk||{time:Date.now(),ease:Ve,delay:0,duration:250},Za=-1,Ta=this.length;++Za<Ta;){ua.push(Ca=[]);for(var Ya=this[Za],jb=-1,ub=Ya.length;++jb<ub;)(Ea=Ya[jb])&&Qe(Ea,jb,R,ja,Ja),Ca.push(Ea)}return $f(ua,R,ja)};Re.interrupt=function(R){return this.each(null==
R?Yf:We($d(R)))};var Yf=We($d()),Mf=[],dl=0,fj,qk;Mf.call=Re.call;Mf.empty=Re.empty;Mf.node=Re.node;Mf.size=Re.size;Rb.transition=function(R,ja){return R&&R.transition?fj?R.transition(ja):R:Rb.selection().transition(R)};Rb.transition.prototype=Mf;Mf.select=function(R){var ja=this.id,ua=this.namespace,Ca=[],Ea,Ja,Za;R=J(R);for(var Ta=-1,Ya=this.length;++Ta<Ya;){Ca.push(Ea=[]);for(var jb=this[Ta],ub=-1,Fb=jb.length;++ub<Fb;)(Za=jb[ub])&&(Ja=R.call(Za,Za.__data__,ub,Ta))?("__data__"in Za&&(Ja.__data__=
Za.__data__),Qe(Ja,ub,ua,ja,Za[ua][ja]),Ea.push(Ja)):Ea.push(null)}return $f(Ca,ua,ja)};Mf.selectAll=function(R){var ja=this.id,ua=this.namespace,Ca=[],Ea,Ja;R=L(R);for(var Za=-1,Ta=this.length;++Za<Ta;)for(var Ya=this[Za],jb=-1,ub=Ya.length;++jb<ub;)if(Ea=Ya[jb]){var Fb=Ea[ua][ja];var Lb=R.call(Ea,Ea.__data__,jb,Za);Ca.push(Ea=[]);for(var Tb=-1,Wb=Lb.length;++Tb<Wb;)(Ja=Lb[Tb])&&Qe(Ja,Tb,ua,ja,Fb),Ea.push(Ja)}return $f(Ca,ua,ja)};Mf.filter=function(R){var ja=[],ua,Ca;"function"!==typeof R&&(R=aa(R));
for(var Ea=0,Ja=this.length;Ea<Ja;Ea++){ja.push(ua=[]);var Za=this[Ea];for(var Ta=0,Ya=Za.length;Ta<Ya;Ta++)(Ca=Za[Ta])&&R.call(Ca,Ca.__data__,Ta,Ea)&&ua.push(Ca)}return $f(ja,this.namespace,this.id)};Mf.tween=function(R,ja){var ua=this.id,Ca=this.namespace;return 2>arguments.length?this.node()[Ca][ua].tween.get(R):Y(this,null==ja?function(Ea){Ea[Ca][ua].tween.remove(R)}:function(Ea){Ea[Ca][ua].tween.set(R,ja)})};Mf.attr=function(R,ja){function ua(){this.removeAttribute(Ta)}function Ca(){this.removeAttributeNS(Ta.space,
Ta.local)}function Ea(Ya){return null==Ya?ua:(Ya+="",function(){var jb=this.getAttribute(Ta),ub;return jb!==Ya&&(ub=Za(jb,Ya),function(Fb){this.setAttribute(Ta,ub(Fb))})})}function Ja(Ya){return null==Ya?Ca:(Ya+="",function(){var jb=this.getAttributeNS(Ta.space,Ta.local),ub;return jb!==Ya&&(ub=Za(jb,Ya),function(Fb){this.setAttributeNS(Ta.space,Ta.local,ub(Fb))})})}if(2>arguments.length){for(ja in R)this.attr(ja,R[ja]);return this}var Za="transform"==R?Rf:cg,Ta=Rb.ns.qualify(R);return Xe(this,"attr."+
R,ja,Ta.local?Ja:Ea)};Mf.attrTween=function(R,ja){function ua(Ja,Za){var Ta=ja.call(this,Ja,Za,this.getAttribute(Ea));return Ta&&function(Ya){this.setAttribute(Ea,Ta(Ya))}}function Ca(Ja,Za){var Ta=ja.call(this,Ja,Za,this.getAttributeNS(Ea.space,Ea.local));return Ta&&function(Ya){this.setAttributeNS(Ea.space,Ea.local,Ta(Ya))}}var Ea=Rb.ns.qualify(R);return this.tween("attr."+R,Ea.local?Ca:ua)};Mf.style=function(R,ja,ua){function Ca(){this.style.removeProperty(R)}var Ea=arguments.length;if(3>Ea){if("string"!==
typeof R){2>Ea&&(ja="");for(ua in R)this.style(ua,R[ua],ja);return this}ua=""}return Xe(this,"style."+R,ja,function(Ja){return null==Ja?Ca:(Ja+="",function(){var Za=q(this).getComputedStyle(this,null).getPropertyValue(R),Ta;return Za!==Ja&&(Ta=cg(Za,Ja),function(Ya){this.style.setProperty(R,Ta(Ya),ua)})})})};Mf.styleTween=function(R,ja,ua){3>arguments.length&&(ua="");return this.tween("style."+R,function(Ca,Ea){var Ja=ja.call(this,Ca,Ea,q(this).getComputedStyle(this,null).getPropertyValue(R));return Ja&&
function(Za){this.style.setProperty(R,Ja(Za),ua)}})};Mf.text=function(R){return Xe(this,"text",R,sg)};Mf.remove=function(){var R=this.namespace;return this.each("end.transition",function(){var ja;2>this[R].count&&(ja=this.parentNode)&&ja.removeChild(this)})};Mf.ease=function(R){var ja=this.id,ua=this.namespace;if(1>arguments.length)return this.node()[ua][ja].ease;"function"!==typeof R&&(R=Rb.ease.apply(Rb,arguments));return Y(this,function(Ca){Ca[ua][ja].ease=R})};Mf.delay=function(R){var ja=this.id,
ua=this.namespace;return 1>arguments.length?this.node()[ua][ja].delay:Y(this,"function"===typeof R?function(Ca,Ea,Ja){Ca[ua][ja].delay=+R.call(Ca,Ca.__data__,Ea,Ja)}:(R=+R,function(Ca){Ca[ua][ja].delay=R}))};Mf.duration=function(R){var ja=this.id,ua=this.namespace;return 1>arguments.length?this.node()[ua][ja].duration:Y(this,"function"===typeof R?function(Ca,Ea,Ja){Ca[ua][ja].duration=Math.max(1,R.call(Ca,Ca.__data__,Ea,Ja))}:(R=Math.max(1,R),function(Ca){Ca[ua][ja].duration=R}))};Mf.each=function(R,
ja){var ua=this.id,Ca=this.namespace;if(2>arguments.length){var Ea=qk,Ja=fj;try{fj=ua,Y(this,function(Za,Ta,Ya){qk=Za[Ca][ua];R.call(Za,Za.__data__,Ta,Ya)})}finally{qk=Ea,fj=Ja}}else Y(this,function(Za){Za=Za[Ca][ua];(Za.event||(Za.event=Rb.dispatch("start","end","interrupt"))).on(R,ja)});return this};Mf.transition=function(){for(var R=this.id,ja=++dl,ua=this.namespace,Ca=[],Ea,Ja,Za,Ta,Ya=0,jb=this.length;Ya<jb;Ya++){Ca.push(Ea=[]);Ja=this[Ya];for(var ub=0,Fb=Ja.length;ub<Fb;ub++){if(Za=Ja[ub])Ta=
Za[ua][R],Qe(Za,ub,ua,ja,{time:Ta.time,ease:Ta.ease,delay:Ta.delay+Ta.duration,duration:Ta.duration});Ea.push(Za)}}return $f(Ca,ua,ja)};Rb.svg.axis=function(){function R(jb){jb.each(function(){var ub=Rb.select(this),Fb=this.__chart__||ja,Lb=this.__chart__=ja.copy(),Tb=null==Ta?Lb.ticks?Lb.ticks.apply(Lb,Za):Lb.domain():Ta,Wb=null==Ya?Lb.tickFormat?Lb.tickFormat.apply(Lb,Za):w:Ya,nc=ub.selectAll(".tick").data(Tb,Lb);Tb=nc.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var wc=
Rb.transition(nc.exit()).style("opacity",1E-6).remove(),Ec=Rb.transition(nc.order()).style("opacity",1),Uc=Math.max(Ca,0)+Ja,bd=og(Lb);ub=ub.selectAll(".domain").data([0]);ub=(ub.enter().append("path").attr("class","domain"),Rb.transition(ub));Tb.append("line");Tb.append("text");var dd=Tb.select("line"),id=Ec.select("line");nc=nc.select("text").text(Wb);var gc=Tb.select("text"),xc=Ec.select("text"),Vc="top"===ua||"left"===ua?-1:1;if("bottom"===ua||"top"===ua){Wb=of;var qd="x";var td="y";var ud="x2";
var nd="y2";nc.attr("dy",0>Vc?"0em":".71em").style("text-anchor","middle");ub.attr("d","M"+bd[0]+","+Vc*Ea+"V0H"+bd[1]+"V"+Vc*Ea)}else Wb=Wf,qd="y",td="x",ud="y2",nd="x2",nc.attr("dy",".32em").style("text-anchor",0>Vc?"end":"start"),ub.attr("d","M"+Vc*Ea+","+bd[0]+"H0V"+bd[1]+"H"+Vc*Ea);dd.attr(nd,Vc*Ca);gc.attr(td,Vc*Uc);id.attr(ud,0).attr(nd,Vc*Ca);xc.attr(qd,0).attr(td,Vc*Uc);if(Lb.rangeBand){var Vd=Lb,ne=Vd.rangeBand()/2;Fb=Lb=function(te){return Vd(te)+ne}}else Fb.rangeBand?Fb=Lb:wc.call(Wb,
Lb,Fb);Tb.call(Wb,Fb,Lb);Ec.call(Wb,Lb,Lb)})}var ja=Rb.scale.linear(),ua=Lk,Ca=6,Ea=6,Ja=3,Za=[10],Ta=null,Ya;R.scale=function(jb){if(!arguments.length)return ja;ja=jb;return R};R.orient=function(jb){if(!arguments.length)return ua;ua=jb in Mh?jb+"":Lk;return R};R.ticks=function(){if(!arguments.length)return Za;Za=fg(arguments);return R};R.tickValues=function(jb){if(!arguments.length)return Ta;Ta=jb;return R};R.tickFormat=function(jb){if(!arguments.length)return Ya;Ya=jb;return R};R.tickSize=function(jb){var ub=
arguments.length;if(!ub)return Ca;Ca=+jb;Ea=+arguments[ub-1];return R};R.innerTickSize=function(jb){if(!arguments.length)return Ca;Ca=+jb;return R};R.outerTickSize=function(jb){if(!arguments.length)return Ea;Ea=+jb;return R};R.tickPadding=function(jb){if(!arguments.length)return Ja;Ja=+jb;return R};R.tickSubdivide=function(){return arguments.length&&R};return R};var Lk="bottom",Mh={top:1,right:1,bottom:1,left:1};Rb.svg.brush=function(){function R(nc){nc.each(function(){var wc=Rb.select(this).style("pointer-events",
"all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ea).on("touchstart.brush",Ea),Ec=wc.selectAll(".background").data([0]);Ec.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");wc.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Uc=wc.selectAll(".resize").data(Wb,w);Uc.exit().remove();Uc.enter().append("g").attr("class",function(bd){return"resize "+bd}).style("cursor",
function(bd){return sl[bd]}).append("rect").attr("x",function(bd){return/[ew]$/.test(bd)?-3:null}).attr("y",function(bd){return/^[ns]/.test(bd)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");Uc.style("display",R.empty()?"none":null);wc=Rb.transition(wc);Ec=Rb.transition(Ec);Za&&(Uc=og(Za),Ec.attr("x",Uc[0]).attr("width",Uc[1]-Uc[0]),ua(wc));Ta&&(Uc=og(Ta),Ec.attr("y",Uc[0]).attr("height",Uc[1]-Uc[0]),Ca(wc));ja(wc)})}function ja(nc){nc.selectAll(".resize").attr("transform",
function(wc){return"translate("+Ya[+/e$/.test(wc)]+","+jb[+/^s/.test(wc)]+")"})}function ua(nc){nc.select(".extent").attr("x",Ya[0]);nc.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",Ya[1]-Ya[0])}function Ca(nc){nc.select(".extent").attr("y",jb[0]);nc.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",jb[1]-jb[0])}function Ea(){function nc(){var De=Rb.mouse(Uc),we=!1;te&&(De[0]+=te[0],De[1]+=te[1]);qd||(Rb.event.altKey?(ud||(ud=[(Ya[0]+Ya[1])/2,(jb[0]+jb[1])/2]),nd[0]=Ya[+(De[0]<ud[0])],
nd[1]=jb[+(De[1]<ud[1])]):ud=null);xc&&wc(De,Za,0)&&(ua(id),we=!0);Vc&&wc(De,Ta,1)&&(Ca(id),we=!0);we&&(ja(id),dd({type:"brush",mode:qd?"move":"resize"}))}function wc(De,we,Je){var ke=og(we);we=ke[0];var hg=ke[1];ke=nd[Je];var zf=Je?jb:Ya,ah=zf[1]-zf[0];qd&&(we-=ke,hg-=ah+ke);De=(Je?Tb:Lb)?Math.max(we,Math.min(hg,De[Je])):De[Je];qd?we=(De+=ke)+ah:(ud&&(ke=Math.max(we,Math.min(hg,2*ud[Je]-De))),ke<De?(we=De,De=ke):we=ke);if(zf[0]!=De||zf[1]!=we)return Je?Fb=null:ub=null,zf[0]=De,zf[1]=we,!0}function Ec(){nc();
id.style("pointer-events","all").selectAll(".resize").style("display",R.empty()?"none":null);Rb.select("body").style("cursor",null);Vd.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);td();dd({type:"brushend"})}var Uc=this,bd=Rb.select(Rb.event.target),dd=Ja.of(Uc,arguments),id=Rb.select(Uc),gc=bd.datum(),xc=!/^(n|s)$/.test(gc)&&Za,Vc=!/^(e|w)$/.test(gc)&&Ta,qd=bd.classed("extent"),td=qa(Uc),ud,
nd=Rb.mouse(Uc),Vd=Rb.select(q(Uc)).on("keydown.brush",function(){32==Rb.event.keyCode&&(qd||(ud=null,nd[0]-=Ya[1],nd[1]-=jb[1],qd=2),t())}).on("keyup.brush",function(){32==Rb.event.keyCode&&2==qd&&(nd[0]+=Ya[1],nd[1]+=jb[1],qd=0,t())});if(Rb.event.changedTouches)Vd.on("touchmove.brush",nc).on("touchend.brush",Ec);else Vd.on("mousemove.brush",nc).on("mouseup.brush",Ec);id.interrupt().selectAll("*").interrupt();if(qd)nd[0]=Ya[0]-nd[0],nd[1]=jb[0]-nd[1];else if(gc){var ne=+/w$/.test(gc);gc=+/^n/.test(gc);
var te=[Ya[1-ne]-nd[0],jb[1-gc]-nd[1]];nd[0]=Ya[ne];nd[1]=jb[gc]}else Rb.event.altKey&&(ud=nd.slice());id.style("pointer-events","none").selectAll(".resize").style("display",null);Rb.select("body").style("cursor",bd.style("cursor"));dd({type:"brushstart"});nc()}var Ja=H(R,"brushstart","brush","brushend"),Za=null,Ta=null,Ya=[0,0],jb=[0,0],ub,Fb,Lb=!0,Tb=!0,Wb=Mk[0];R.event=function(nc){nc.each(function(){var wc=Ja.of(this,arguments),Ec={x:Ya,y:jb,i:ub,j:Fb},Uc=this.__chart__||Ec;this.__chart__=Ec;
fj?Rb.select(this).transition().each("start.brush",function(){ub=Uc.i;Fb=Uc.j;Ya=Uc.x;jb=Uc.y;wc({type:"brushstart"})}).tween("brush:brush",function(){var bd=Yh(Ya,Ec.x),dd=Yh(jb,Ec.y);ub=Fb=null;return function(id){Ya=Ec.x=bd(id);jb=Ec.y=dd(id);wc({type:"brush",mode:"resize"})}}).each("end.brush",function(){ub=Ec.i;Fb=Ec.j;wc({type:"brush",mode:"resize"});wc({type:"brushend"})}):(wc({type:"brushstart"}),wc({type:"brush",mode:"resize"}),wc({type:"brushend"}))})};R.x=function(nc){if(!arguments.length)return Za;
Za=nc;Wb=Mk[!Za<<1|!Ta];return R};R.y=function(nc){if(!arguments.length)return Ta;Ta=nc;Wb=Mk[!Za<<1|!Ta];return R};R.clamp=function(nc){if(!arguments.length)return Za&&Ta?[Lb,Tb]:Za?Lb:Ta?Tb:null;Za&&Ta?(Lb=!!nc[0],Tb=!!nc[1]):Za?Lb=!!nc:Ta&&(Tb=!!nc);return R};R.extent=function(nc){if(!arguments.length){if(Za)if(ub){var wc=ub[0];var Ec=ub[1]}else if(wc=Ya[0],Ec=Ya[1],Za.invert&&(wc=Za.invert(wc),Ec=Za.invert(Ec)),Ec<wc){var Uc=wc;wc=Ec;Ec=Uc}if(Ta)if(Fb){var bd=Fb[0];var dd=Fb[1]}else bd=jb[0],
dd=jb[1],Ta.invert&&(bd=Ta.invert(bd),dd=Ta.invert(dd)),dd<bd&&(Uc=bd,bd=dd,dd=Uc);return Za&&Ta?[[wc,bd],[Ec,dd]]:Za?[wc,Ec]:Ta&&[bd,dd]}Za&&(wc=nc[0],Ec=nc[1],Ta&&(wc=wc[0],Ec=Ec[0]),ub=[wc,Ec],Za.invert&&(wc=Za(wc),Ec=Za(Ec)),Ec<wc&&(Uc=wc,wc=Ec,Ec=Uc),wc!=Ya[0]||Ec!=Ya[1])&&(Ya=[wc,Ec]);Ta&&(bd=nc[0],dd=nc[1],Za&&(bd=bd[1],dd=dd[1]),Fb=[bd,dd],Ta.invert&&(bd=Ta(bd),dd=Ta(dd)),dd<bd&&(Uc=bd,bd=dd,dd=Uc),bd!=jb[0]||dd!=jb[1])&&(jb=[bd,dd]);return R};R.clear=function(){R.empty()||(Ya=[0,0],jb=[0,
0],ub=Fb=null);return R};R.empty=function(){return!!Za&&Ya[0]==Ya[1]||!!Ta&&jb[0]==jb[1]};return Rb.rebind(R,Ja,"on")};var sl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Mk=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Nk=ae.format=Uj.timeFormat,Ok=Nk.utc,Pk=Ok("%Y-%m-%dT%H:%M:%S.%LZ");Nk.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Sf:Pk;Sf.parse=function(R){R=new Date(R);return isNaN(R)?
null:R};Sf.toString=Pk.toString;ae.second=lc(function(R){return new Lf(1E3*Math.floor(R/1E3))},function(R,ja){R.setTime(R.getTime()+1E3*Math.floor(ja))},function(R){return R.getSeconds()});ae.seconds=ae.second.range;ae.seconds.utc=ae.second.utc.range;ae.minute=lc(function(R){return new Lf(6E4*Math.floor(R/6E4))},function(R,ja){R.setTime(R.getTime()+6E4*Math.floor(ja))},function(R){return R.getMinutes()});ae.minutes=ae.minute.range;ae.minutes.utc=ae.minute.utc.range;ae.hour=lc(function(R){var ja=R.getTimezoneOffset()/
60;return new Lf(36E5*(Math.floor(R/36E5-ja)+ja))},function(R,ja){R.setTime(R.getTime()+36E5*Math.floor(ja))},function(R){return R.getHours()});ae.hours=ae.hour.range;ae.hours.utc=ae.hour.utc.range;ae.month=lc(function(R){R=ae.day(R);R.setDate(1);return R},function(R,ja){R.setMonth(R.getMonth()+ja)},function(R){return R.getMonth()});ae.months=ae.month.range;ae.months.utc=ae.month.utc.range;var xi=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],
Qk=[[ae.second,1],[ae.second,5],[ae.second,15],[ae.second,30],[ae.minute,1],[ae.minute,5],[ae.minute,15],[ae.minute,30],[ae.hour,1],[ae.hour,3],[ae.hour,6],[ae.hour,12],[ae.day,1],[ae.day,2],[ae.week,1],[ae.month,1],[ae.month,3],[ae.year,1]],Rk=Nk.multi([[".%L",function(R){return R.getMilliseconds()}],[":%S",function(R){return R.getSeconds()}],["%I:%M",function(R){return R.getMinutes()}],["%I %p",function(R){return R.getHours()}],["%a %d",function(R){return R.getDay()&&1!=R.getDate()}],["%b %d",function(R){return 1!=
R.getDate()}],["%B",function(R){return R.getMonth()}],["%Y",Sc]]),Kh={range:function(R,ja,ua){return Rb.range(Math.ceil(R/ua)*ua,+ja,ua).map(xf)},floor:w,ceil:w};Qk.year=ae.year;ae.scale=function(){return ff(Rb.scale.linear(),Qk,Rk)};var el=Qk.map(function(R){return[R[0].utc,R[1]]}),tl=Ok.multi([[".%L",function(R){return R.getUTCMilliseconds()}],[":%S",function(R){return R.getUTCSeconds()}],["%I:%M",function(R){return R.getUTCMinutes()}],["%I %p",function(R){return R.getUTCHours()}],["%a %d",function(R){return R.getUTCDay()&&
1!=R.getUTCDate()}],["%b %d",function(R){return 1!=R.getUTCDate()}],["%B",function(R){return R.getUTCMonth()}],["%Y",Sc]]);el.year=ae.year.utc;ae.scale.utc=function(){return ff(Rb.scale.linear(),el,tl)};Rb.text=Ga(function(R){return R.responseText});Rb.json=function(R,ja){return Va(R,"application/json",$h,ja)};Rb.html=function(R,ja){return Va(R,"text/html",Wg,ja)};Rb.xml=Ga(function(R){return R.responseXML});"object"===typeof y&&y.exports?y.exports=Rb:this.d3=Rb}()},{}],170:[function(b,y,F){y.exports=
function(){for(var q=0;q<arguments.length;q++)if(void 0!==arguments[q])return arguments[q]}},{}],171:[function(b,y,F){function q(f,d){this.point=f;this.index=d}function n(f,d){f=f.point;d=d.point;for(var l=f.length,k=0;k<l;++k){var c=d[k]-f[k];if(c)return c}return 0}function p(f,d,l){if(1===f)return l?[[-1,0]]:[];d=d.map(function(e,g){return[e[0],g]});d.sort(function(e,g){return e[0]-g[0]});for(var k=Array(f-1),c=1;c<f;++c)k[c-1]=[d[c-1][1],d[c][1]];l&&k.push([-1,k[0][1]],[k[f-1][1],-1]);return k}
var h=b("incremental-convex-hull"),a=b("uniq");y.exports=function(f,d){var l=f.length;if(0===l)return[];var k=f[0].length;if(1>k)return[];if(1===k)return p(l,f,d);for(var c=Array(l),e=1,g=0;g<l;++g){for(var m=f[g],r=Array(k+1),u=0,v=0;v<k;++v){var w=m[v];r[v]=w;u+=w*w}r[k]=u;c[g]=new q(r,g);e=Math.max(u,e)}a(c,n);l=c.length;f=Array(l+k+1);var D=Array(l+k+1);m=Array(k+1);for(g=0;g<=k;++g)m[g]=0;m[k]=(k+1)*(k+1)*e;f[0]=m.slice();D[0]=-1;for(g=0;g<=k;++g)r=m.slice(),r[g]=1,f[g+1]=r,D[g+1]=-1;for(g=0;g<
l;++g)e=c[g],f[g+k+1]=e.point,D[g+k+1]=e.index;l=h(f,!1);l=d?l.filter(function(C){for(var x=0,A=0;A<=k;++A){var B=D[C[A]];if(0>B&&2<=++x)return!1;C[A]=B}return!0}):l.filter(function(C){for(var x=0;x<=k;++x){var A=D[C[x]];if(0>A)return!1;C[x]=A}return!0});if(k&1)for(g=0;g<l.length;++g)e=l[g],r=e[0],e[0]=e[1],e[1]=r;return l}},{"incremental-convex-hull":433,uniq:569}],172:[function(b,y,F){function q(a,f){Array.isArray(a)&&(a=a.join(", "));var d={},l=16,k=.05;if(f)if(2===f.length&&"number"===typeof f[0])var c=
n(f);else Array.isArray(f)?c=f:(f.o?c=n(f.o):f.pairs&&(c=f.pairs),f.fontSize&&(l=f.fontSize),null!=f.threshold&&(k=f.threshold));c||(c=h);p.font=l+"px "+a;for(a=0;a<c.length;a++){f=c[a];var e=p.measureText(f[0]).width+p.measureText(f[1]).width,g=p.measureText(f).width;Math.abs(e-g)>l*k&&(d[f]=(g-e)/l*1E3)}return d}function n(a){for(var f=[],d=a[0];d<=a[1];d++)for(var l=String.fromCharCode(d),k=a[0];k<a[1];k++){var c=String.fromCharCode(k);f.push(l+c)}return f}y.exports=q;var p=(q.canvas=document.createElement("canvas")).getContext("2d"),
h=n([32,126]);q.createPairs=n;q.ascii=h},{}],173:[function(b,y,F){(function(q){var n=!1;if("undefined"!==typeof Float64Array){var p=new Float64Array(1),h=new Uint32Array(p.buffer);p[0]=1;n=!0;1072693248===h[1]?(y.exports=function(f){p[0]=f;return[h[0],h[1]]},y.exports.pack=function(f,d){h[0]=f;h[1]=d;return p[0]},y.exports.lo=function(f){p[0]=f;return h[0]},y.exports.hi=function(f){p[0]=f;return h[1]}):1072693248===h[0]?(y.exports=function(f){p[0]=f;return[h[1],h[0]]},y.exports.pack=function(f,d){h[1]=
f;h[0]=d;return p[0]},y.exports.lo=function(f){p[0]=f;return h[1]},y.exports.hi=function(f){p[0]=f;return h[0]}):n=!1}if(!n){var a=new q(8);y.exports=function(f){a.writeDoubleLE(f,0,!0);return[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]};y.exports.pack=function(f,d){a.writeUInt32LE(f,0,!0);a.writeUInt32LE(d,4,!0);return a.readDoubleLE(0,!0)};y.exports.lo=function(f){a.writeDoubleLE(f,0,!0);return a.readUInt32LE(0,!0)};y.exports.hi=function(f){a.writeDoubleLE(f,0,!0);return a.readUInt32LE(4,!0)}}y.exports.sign=
function(f){return y.exports.hi(f)>>>31};y.exports.exponent=function(f){return(y.exports.hi(f)<<1>>>21)-1023};y.exports.fraction=function(f){var d=y.exports.lo(f);f=y.exports.hi(f);var l=f&1048575;f&2146435072&&(l+=1048576);return[d,l]};y.exports.denormalized=function(f){return!(y.exports.hi(f)&2146435072)}}).call(this,b("buffer").Buffer)},{buffer:111}],174:[function(b,y,F){var q=b("abs-svg-path"),n=b("normalize-svg-path"),p={M:"moveTo",C:"bezierCurveTo"};y.exports=function(h,a){h.beginPath();n(q(a)).forEach(function(f){var d=
f[0];f=f.slice(1);h[p[d]].apply(h,f)});h.closePath()}},{"abs-svg-path":65,"normalize-svg-path":471}],175:[function(b,y,F){y.exports=function(q){switch(q){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},{}],176:[function(b,
y,F){function q(n,p,h){var a=n[h]|0;if(0>=a)return[];var f=Array(a),d;if(h===n.length-1)for(d=0;d<a;++d)f[d]=p;else for(d=0;d<a;++d)f[d]=q(n,p,h+1);return f}y.exports=function(n,p){"undefined"===typeof p&&(p=0);switch(typeof n){case "number":if(0<n){n|=0;var h;var a=Array(n);for(h=0;h<n;++h)a[h]=p;return a}break;case "object":if("number"===typeof n.length)return q(n,p,0)}return[]}},{}],177:[function(b,y,F){function q(A,B,t){t=t||2;var G=B&&B.length,H=G?B[0]*t:A.length,I=n(A,0,H,t,!0),J=[];if(!I||
I.next===I.prev)return J;var L;if(G){var E=t;G=[];var K;var N=0;for(K=B.length;N<K;N++){var O=B[N]*E;var Q=N<K-1?B[N+1]*E:A.length;O=n(A,O,Q,E,!1);O===O.next&&(O.steiner=!0);Q=G;var P=Q.push,T=O,V=O;do{if(T.x<V.x||T.x===V.x&&T.y<V.y)V=T;T=T.next}while(T!==O);P.call(Q,V)}G.sort(f);for(N=0;N<G.length;N++){E=G[N];B=I;if(B=d(E,B))E=v(B,E),p(B,B.next),p(E,E.next);I=p(I,I.next)}}if(A.length>80*t){var aa=L=A[0];var ba=G=A[1];for(E=t;E<H;E+=t)N=A[E],B=A[E+1],N<aa&&(aa=N),B<ba&&(ba=B),N>L&&(L=N),B>G&&(G=B);
L=Math.max(L-aa,G-ba);L=0!==L?1/L:0}h(I,J,t,aa,ba,L);return J}function n(A,B,t,G,H){if(H===0<x(A,B,t,G))for(H=B;H<t;H+=G)var I=w(H,A[H],A[H+1],I);else for(H=t-G;H>=B;H-=G)I=w(H,A[H],A[H+1],I);I&&e(I,I.next)&&(D(I),I=I.next);return I}function p(A,B){if(!A)return A;B||(B=A);do{var t=!1;if(A.steiner||!e(A,A.next)&&0!==c(A.prev,A,A.next))A=A.next;else{D(A);A=B=A.prev;if(A===A.next)break;t=!0}}while(t||A!==B);return B}function h(A,B,t,G,H,I,J){if(A){if(!J&&I){var L=A,E=L;do null===E.z&&(E.z=l(E.x,E.y,
G,H,I)),E.prevZ=E.prev,E=E.nextZ=E.next;while(E!==L);E.prevZ.nextZ=null;E.prevZ=null;L=E;var K,N,O,Q,P=1;do{E=L;var T=L=null;for(N=0;E;){N++;var V=E;for(K=O=0;K<P&&(O++,V=V.nextZ,V);K++);for(Q=P;0<O||0<Q&&V;)0!==O&&(0===Q||!V||E.z<=V.z)?(K=E,E=E.nextZ,O--):(K=V,V=V.nextZ,Q--),T?T.nextZ=K:L=K,K.prevZ=T,T=K;E=V}T.nextZ=null;P*=2}while(1<N)}for(L=A;A.prev!==A.next;){E=A.prev;V=A.next;if(I)T=a(A,G,H,I);else a:if(T=A,N=T.prev,O=T,P=T.next,0<=c(N,O,P))T=!1;else{for(K=T.next.next;K!==T.prev;){if(k(N.x,N.y,
O.x,O.y,P.x,P.y,K.x,K.y)&&0<=c(K.prev,K,K.next)){T=!1;break a}K=K.next}T=!0}if(T)B.push(E.i/t),B.push(A.i/t),B.push(V.i/t),D(A),L=A=V.next;else if(A=V,A===L){if(!J)h(p(A),B,t,G,H,I,1);else if(1===J){A=p(A);J=B;L=t;E=A;do V=E.prev,T=E.next.next,!e(V,T)&&g(V,E,E.next,T)&&u(V,T)&&u(T,V)&&(J.push(V.i/L),J.push(E.i/L),J.push(T.i/L),D(E),D(E.next),E=A=T),E=E.next;while(E!==A);A=p(E);h(A,B,t,G,H,I,2)}else if(2===J)a:{J=A;do{for(L=J.next.next;L!==J.prev;){if(E=J.i!==L.i){E=J;V=L;if(T=E.next.i!==V.i&&E.prev.i!==
V.i){b:{T=E;do{if(T.i!==E.i&&T.next.i!==E.i&&T.i!==V.i&&T.next.i!==V.i&&g(T,T.next,E,V)){T=!0;break b}T=T.next}while(T!==E);T=!1}T=!T}if(T){if(T=u(E,V)&&u(V,E)){T=E;N=!1;O=(E.x+V.x)/2;P=(E.y+V.y)/2;do T.y>P!==T.next.y>P&&T.next.y!==T.y&&O<(T.next.x-T.x)*(P-T.y)/(T.next.y-T.y)+T.x&&(N=!N),T=T.next;while(T!==E);T=N}T=T&&(c(E.prev,E,V.prev)||c(E,V.prev,V))||e(E,V)&&0<c(E.prev,E,E.next)&&0<c(V.prev,V,V.next)}E=T}if(E){A=v(J,L);J=p(J,J.next);A=p(A,A.next);h(J,B,t,G,H,I);h(A,B,t,G,H,I);break a}L=L.next}J=
J.next}while(J!==A)}break}}}}function a(A,B,t,G){var H=A.prev,I=A.next;if(0<=c(H,A,I))return!1;var J=H.x>A.x?H.x>I.x?H.x:I.x:A.x>I.x?A.x:I.x,L=H.y>A.y?H.y>I.y?H.y:I.y:A.y>I.y?A.y:I.y,E=l(H.x<A.x?H.x<I.x?H.x:I.x:A.x<I.x?A.x:I.x,H.y<A.y?H.y<I.y?H.y:I.y:A.y<I.y?A.y:I.y,B,t,G);B=l(J,L,B,t,G);t=A.prevZ;for(G=A.nextZ;t&&t.z>=E&&G&&G.z<=B;){if(t!==A.prev&&t!==A.next&&k(H.x,H.y,A.x,A.y,I.x,I.y,t.x,t.y)&&0<=c(t.prev,t,t.next))return!1;t=t.prevZ;if(G!==A.prev&&G!==A.next&&k(H.x,H.y,A.x,A.y,I.x,I.y,G.x,G.y)&&
0<=c(G.prev,G,G.next))return!1;G=G.nextZ}for(;t&&t.z>=E;){if(t!==A.prev&&t!==A.next&&k(H.x,H.y,A.x,A.y,I.x,I.y,t.x,t.y)&&0<=c(t.prev,t,t.next))return!1;t=t.prevZ}for(;G&&G.z<=B;){if(G!==A.prev&&G!==A.next&&k(H.x,H.y,A.x,A.y,I.x,I.y,G.x,G.y)&&0<=c(G.prev,G,G.next))return!1;G=G.nextZ}return!0}function f(A,B){return A.x-B.x}function d(A,B){var t=B,G=A.x,H=A.y,I=-Infinity;do{if(H<=t.y&&H>=t.next.y&&t.next.y!==t.y){var J=t.x+(H-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(J<=G&&J>I){I=J;if(J===G){if(H===t.y)return t;
if(H===t.next.y)return t.next}var L=t.x<t.next.x?t:t.next}}t=t.next}while(t!==B);if(!L)return null;if(G===I)return L;B=L;J=L.x;var E=L.y,K=Infinity;t=L;do{if(G>=t.x&&t.x>=J&&G!==t.x&&k(H<E?G:I,H,J,E,H<E?I:G,H,t.x,t.y)){var N=Math.abs(H-t.y)/(G-t.x);var O;if((O=u(t,A))&&!(O=N<K)&&(O=N===K)&&!(O=t.x>L.x)&&(O=t.x===L.x)){O=L;var Q=t;O=0>c(O.prev,O,Q.prev)&&0>c(Q.next,O,O.next)}O&&(L=t,K=N)}t=t.next}while(t!==B);return L}function l(A,B,t,G,H){A=32767*(A-t)*H;B=32767*(B-G)*H;A=(A|A<<8)&16711935;A=(A|A<<
4)&252645135;A=(A|A<<2)&858993459;B=(B|B<<8)&16711935;B=(B|B<<4)&252645135;B=(B|B<<2)&858993459;return(A|A<<1)&1431655765|((B|B<<1)&1431655765)<<1}function k(A,B,t,G,H,I,J,L){return 0<=(H-J)*(B-L)-(A-J)*(I-L)&&0<=(A-J)*(G-L)-(t-J)*(B-L)&&0<=(t-J)*(I-L)-(H-J)*(G-L)}function c(A,B,t){return(B.y-A.y)*(t.x-B.x)-(B.x-A.x)*(t.y-B.y)}function e(A,B){return A.x===B.x&&A.y===B.y}function g(A,B,t,G){var H=r(c(A,B,t)),I=r(c(A,B,G)),J=r(c(t,G,A)),L=r(c(t,G,B));return H!==I&&J!==L||0===H&&m(A,t,B)||0===I&&m(A,
G,B)||0===J&&m(t,A,G)||0===L&&m(t,B,G)?!0:!1}function m(A,B,t){return B.x<=Math.max(A.x,t.x)&&B.x>=Math.min(A.x,t.x)&&B.y<=Math.max(A.y,t.y)&&B.y>=Math.min(A.y,t.y)}function r(A){return 0<A?1:0>A?-1:0}function u(A,B){return 0>c(A.prev,A,A.next)?0<=c(A,B,A.next)&&0<=c(A,A.prev,B):0>c(A,B,A.prev)||0>c(A,A.next,B)}function v(A,B){var t=new C(A.i,A.x,A.y),G=new C(B.i,B.x,B.y),H=A.next,I=B.prev;A.next=B;B.prev=A;t.next=H;H.prev=t;G.next=t;t.prev=G;I.next=G;G.prev=I;return G}function w(A,B,t,G){A=new C(A,
B,t);G?(A.next=G.next,A.prev=G,G.next.prev=A,G.next=A):(A.prev=A,A.next=A);return A}function D(A){A.next.prev=A.prev;A.prev.next=A.next;A.prevZ&&(A.prevZ.nextZ=A.nextZ);A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function C(A,B,t){this.i=A;this.x=B;this.y=t;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function x(A,B,t,G){for(var H=0,I=t-G;B<t;B+=G)H+=(A[I]-A[B])*(A[B+1]+A[I+1]),I=B;return H}y.exports=q;y.exports.default=q;q.deviation=function(A,B,t,G){var H=B&&B.length,I=Math.abs(x(A,
0,H?B[0]*t:A.length,t));if(H){H=0;for(var J=B.length;H<J;H++)I-=Math.abs(x(A,B[H]*t,H<J-1?B[H+1]*t:A.length,t))}for(H=B=0;H<G.length;H+=3){J=G[H]*t;var L=G[H+1]*t,E=G[H+2]*t;B+=Math.abs((A[J]-A[E])*(A[L+1]-A[J+1])-(A[J]-A[L])*(A[E+1]-A[J+1]))}return 0===I&&0===B?0:Math.abs((B-I)/I)};q.flatten=function(A){for(var B=A[0][0].length,t={vertices:[],holes:[],dimensions:B},G=0,H=0;H<A.length;H++){for(var I=0;I<A[H].length;I++)for(var J=0;J<B;J++)t.vertices.push(A[H][I][J]);0<H&&(G+=A[H-1].length,t.holes.push(G))}return t}},
{}],178:[function(b,y,F){y.exports=function(n,p){var h=n.length;if("number"!==typeof p){for(var a=p=0;a<h;++a){var f=n[a];p=Math.max(p,f[0],f[1])}p=(p|0)+1}p|=0;var d=Array(p);for(a=0;a<p;++a)d[a]=[];for(a=0;a<h;++a)f=n[a],d[f[0]].push(f[1]),d[f[1]].push(f[0]);for(n=0;n<p;++n)q(d[n],function(l,k){return l-k});return d};var q=b("uniq")},{uniq:569}],179:[function(b,y,F){var q=b("strongly-connected-components");y.exports=function(n,p){function h(D){c[D]=!1;e.hasOwnProperty(D)&&Object.keys(e[D]).forEach(function(C){delete e[D][C];
c[C]&&h(C)})}function a(D){var C=!1;k.push(D);c[D]=!0;var x;for(x=0;x<g[D].length;x++){var A=g[D][x];A===m?(C=m,C=[].concat(k).concat(C),p?p(a):l.push(C),C=!0):c[A]||(C=a(A))}if(C)h(D);else for(x=0;x<g[D].length;x++){A=g[D][x];var B=e[A];B||(B={},e[A]=B);B[A]=!0}k.pop();return C}function f(D){for(var C=0;C<n.length;C++)C<D&&(n[C]=[]),n[C]=n[C].filter(function(x){return x>=D})}function d(D){f(D);var C=q(n).components.filter(function(G){return 1<G.length});D=Infinity;for(var x,A=0;A<C.length;A++)for(var B=
0;B<C[A].length;B++)C[A][B]<D&&(D=C[A][B],x=A);var t=C[x];if(!t)return!1;x=n.map(function(G,H){return-1===t.indexOf(H)?[]:G.filter(function(I){return-1!==t.indexOf(I)})});return{leastVertex:D,adjList:x}}var l=[],k=[],c=[],e={},g=[];var m=0;for(var r=n.length;m<r;){var u=d(m);m=u.leastVertex;if(g=u.adjList){for(u=0;u<g.length;u++)for(var v=0;v<g[u].length;v++){var w=g[u][v];c[+w]=!1;e[w]={}}a(m);m+=1}else m=r}if(!p)return l}},{"strongly-connected-components":541}],180:[function(b,y,F){var q=b("../../object/valid-value");
y.exports=function(){q(this).length=0;return this}},{"../../object/valid-value":211}],181:[function(b,y,F){y.exports=b("./is-implemented")()?Array.from:b("./shim")},{"./is-implemented":182,"./shim":183}],182:[function(b,y,F){y.exports=function(){var q=Array.from;if("function"!==typeof q)return!1;var n=["raz","dwa"];q=q(n);return!(!q||q===n||"dwa"!==q[1])}},{}],183:[function(b,y,F){var q=b("es6-symbol").iterator,n=b("../../function/is-arguments"),p=b("../../function/is-function"),h=b("../../number/to-pos-integer"),
a=b("../../object/valid-callable"),f=b("../../object/valid-value"),d=b("../../object/is-value"),l=b("../../string/is-string"),k=Array.isArray,c=Function.prototype.call,e={configurable:!0,enumerable:!0,writable:!0,value:null},g=Object.defineProperty;y.exports=function(m,r,u){var v,w;m=Object(f(m));d(r)&&a(r);if(this&&this!==Array&&p(this))var D=this;else{if(!r){if(n(m)){var C=m.length;if(1!==C)return Array.apply(null,m);var x=Array(1);x[0]=m[0];return x}if(k(m)){x=Array(C=m.length);for(v=0;v<C;++v)x[v]=
m[v];return x}}x=[]}if(!k(m))if(void 0!==(v=m[q])){C=a(v).call(m);D&&(x=new D);var A=C.next();for(v=0;!A.done;)A=r?c.call(r,u,A.value,v):A.value,D?(e.value=A,g(x,v,e)):x[v]=A,A=C.next(),++v;C=v}else if(l(m)){C=m.length;D&&(x=new D);for(w=v=0;v<C;++v){A=m[v];if(v+1<C){var B=A.charCodeAt(0);55296<=B&&56319>=B&&(A+=m[++v])}A=r?c.call(r,u,A,w):A;D?(e.value=A,g(x,w,e)):x[w]=A;++w}C=w}if(void 0===C)for(C=h(m.length),D&&(x=new D(C)),v=0;v<C;++v)A=r?c.call(r,u,m[v],v):m[v],D?(e.value=A,g(x,v,e)):x[v]=A;D&&
(e.value=null,x.length=C);return x}},{"../../function/is-arguments":184,"../../function/is-function":185,"../../number/to-pos-integer":191,"../../object/is-value":200,"../../object/valid-callable":209,"../../object/valid-value":211,"../../string/is-string":215,"es6-symbol":225}],184:[function(b,y,F){var q=Object.prototype.toString,n=q.call(function(){return arguments}());y.exports=function(p){return q.call(p)===n}},{}],185:[function(b,y,F){var q=Object.prototype.toString,n=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);
y.exports=function(p){return"function"===typeof p&&n(q.call(p))}},{}],186:[function(b,y,F){y.exports=function(){}},{}],187:[function(b,y,F){y.exports=b("./is-implemented")()?Math.sign:b("./shim")},{"./is-implemented":188,"./shim":189}],188:[function(b,y,F){y.exports=function(){var q=Math.sign;return"function"!==typeof q?!1:1===q(10)&&-1===q(-20)}},{}],189:[function(b,y,F){y.exports=function(q){q=Number(q);return isNaN(q)||0===q?q:0<q?1:-1}},{}],190:[function(b,y,F){var q=b("../math/sign"),n=Math.abs,
p=Math.floor;y.exports=function(h){if(isNaN(h))return 0;h=Number(h);return 0!==h&&isFinite(h)?q(h)*p(n(h)):h}},{"../math/sign":187}],191:[function(b,y,F){var q=b("./to-integer"),n=Math.max;y.exports=function(p){return n(0,q(p))}},{"./to-integer":190}],192:[function(b,y,F){var q=b("./valid-callable"),n=b("./valid-value"),p=Function.prototype.bind,h=Function.prototype.call,a=Object.keys,f=Object.prototype.propertyIsEnumerable;y.exports=function(d,l){return function(k,c,e,g){k=Object(n(k));q(c);var m=
a(k);g&&m.sort("function"===typeof g?p.call(g,k):void 0);"function"!==typeof d&&(d=m[d]);return h.call(d,m,function(r,u){return f.call(k,r)?h.call(c,e,k[r],r,k,u):l})}}},{"./valid-callable":209,"./valid-value":211}],193:[function(b,y,F){y.exports=b("./is-implemented")()?Object.assign:b("./shim")},{"./is-implemented":194,"./shim":195}],194:[function(b,y,F){y.exports=function(){var q=Object.assign;if("function"!==typeof q)return!1;var n={foo:"raz"};q(n,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===
n.foo+n.bar+n.trzy}},{}],195:[function(b,y,F){var q=b("../keys"),n=b("../valid-value"),p=Math.max;y.exports=function(h,a){var f,d,l=p(arguments.length,2);h=Object(n(h));var k=function(c){try{h[c]=a[c]}catch(e){f||(f=e)}};for(d=1;d<l;++d)a=arguments[d],q(a).forEach(k);if(void 0!==f)throw f;return h}},{"../keys":201,"../valid-value":211}],196:[function(b,y,F){var q=b("../array/from"),n=b("./assign"),p=b("./valid-value");y.exports=function(h,a,f){var d=Object(p(h)),l=Object(f);if(d!==h&&!a)return d;
var k={};a?q(a,function(c){if(l.ensure||c in h)k[c]=h[c]}):n(k,h);return k}},{"../array/from":181,"./assign":193,"./valid-value":211}],197:[function(b,y,F){var q=Object.create,n;b("./set-prototype-of/is-implemented")()||(n=b("./set-prototype-of/shim"));y.exports=function(){if(!n||1!==n.level)return q;var p={};var h={};var a={configurable:!1,enumerable:!1,writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(f){h[f]="__proto__"===f?{configurable:!0,enumerable:!1,writable:!0,
value:void 0}:a});Object.defineProperties(p,h);Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:p});return function(f,d){return q(null===f?p:f,d)}}()},{"./set-prototype-of/is-implemented":207,"./set-prototype-of/shim":208}],198:[function(b,y,F){y.exports=b("./_iterate")("forEach")},{"./_iterate":192}],199:[function(b,y,F){var q=b("./is-value"),n={function:!0,object:!0};y.exports=function(p){return q(p)&&n[typeof p]||!1}},{"./is-value":200}],200:[function(b,y,
F){var q=b("../function/noop")();y.exports=function(n){return n!==q&&null!==n}},{"../function/noop":186}],201:[function(b,y,F){y.exports=b("./is-implemented")()?Object.keys:b("./shim")},{"./is-implemented":202,"./shim":203}],202:[function(b,y,F){y.exports=function(){try{return Object.keys("primitive"),!0}catch(q){return!1}}},{}],203:[function(b,y,F){var q=b("../is-value"),n=Object.keys;y.exports=function(p){return n(q(p)?Object(p):p)}},{"../is-value":200}],204:[function(b,y,F){var q=b("./valid-callable"),
n=b("./for-each"),p=Function.prototype.call;y.exports=function(h,a,f){var d={};q(a);n(h,function(l,k,c,e){d[k]=p.call(a,f,l,k,c,e)});return d}},{"./for-each":198,"./valid-callable":209}],205:[function(b,y,F){var q=b("./is-value"),n=Array.prototype.forEach,p=Object.create;y.exports=function(h){var a=p(null);n.call(arguments,function(f){if(q(f)){f=Object(f);for(var d in f)a[d]=f[d]}});return a}},{"./is-value":200}],206:[function(b,y,F){y.exports=b("./is-implemented")()?Object.setPrototypeOf:b("./shim")},
{"./is-implemented":207,"./shim":208}],207:[function(b,y,F){var q=Object.create,n=Object.getPrototypeOf,p={};y.exports=function(h){var a=Object.setPrototypeOf;return"function"!==typeof a?!1:n(a((h||q)(null),p))===p}},{}],208:[function(b,y,F){var q=b("../is-object"),n=b("../valid-value"),p=Object.prototype.isPrototypeOf,h=Object.defineProperty,a={configurable:!0,enumerable:!1,writable:!0,value:void 0};var f=function(d,l){n(d);if(null===l||q(l))return d;throw new TypeError("Prototype must be null or an object");
};y.exports=function(d){if(!d)return null;if(2===d.level)if(d.set){var l=d.set;var k=function(c,e){l.call(f(c,e),e);return c}}else k=function(c,e){f(c,e).__proto__=e;return c};else k=function m(e,g){var r;f(e,g);(r=p.call(m.nullPolyfill,e))&&delete m.nullPolyfill.__proto__;null===g&&(g=m.nullPolyfill);e.__proto__=g;r&&h(m.nullPolyfill,"__proto__",a);return e};return Object.defineProperty(k,"level",{configurable:!1,enumerable:!1,writable:!1,value:d.level})}(function(){var d=Object.create(null),l={},
k=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(k){try{var c=k.set;c.call(d,l)}catch(e){}if(Object.getPrototypeOf(d)===l)return{set:c,level:2}}d.__proto__=l;if(Object.getPrototypeOf(d)===l)return{level:2};d={};d.__proto__=l;return Object.getPrototypeOf(d)===l?{level:1}:!1}());b("../create")},{"../create":197,"../is-object":199,"../valid-value":211}],209:[function(b,y,F){y.exports=function(q){if("function"!==typeof q)throw new TypeError(q+" is not a function");return q}},{}],210:[function(b,
y,F){var q=b("./is-object");y.exports=function(n){if(!q(n))throw new TypeError(n+" is not an Object");return n}},{"./is-object":199}],211:[function(b,y,F){var q=b("./is-value");y.exports=function(n){if(!q(n))throw new TypeError("Cannot use null or undefined");return n}},{"./is-value":200}],212:[function(b,y,F){y.exports=b("./is-implemented")()?String.prototype.contains:b("./shim")},{"./is-implemented":213,"./shim":214}],213:[function(b,y,F){y.exports=function(){return"function"!==typeof"razdwatrzy".contains?
!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},{}],214:[function(b,y,F){var q=String.prototype.indexOf;y.exports=function(n,p){return-1<q.call(this,n,p)}},{}],215:[function(b,y,F){var q=Object.prototype.toString,n=q.call("");y.exports=function(p){return"string"===typeof p||p&&"object"===typeof p&&(p instanceof String||q.call(p)===n)||!1}},{}],216:[function(b,y,F){var q=Object.create(null),n=Math.random;y.exports=function(){do var p=n().toString(36).slice(2);while(q[p]);
return p}},{}],217:[function(b,y,F){F=b("es5-ext/object/set-prototype-of");var q=b("es5-ext/string/#/contains"),n=b("d"),p=b("es6-symbol"),h=b("./"),a=Object.defineProperty;var f=y.exports=function(d,l){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");h.call(this,d);l=l?q.call(l,"key+value")?"key+value":q.call(l,"key")?"key":"value":"value";a(this,"__kind__",n("",l))};F&&F(f,h);delete f.prototype.constructor;f.prototype=Object.create(h.prototype,{_resolve:n(function(d){return"value"===
this.__kind__?this.__list__[d]:"key+value"===this.__kind__?[d,this.__list__[d]]:d})});a(f.prototype,p.toStringTag,n("c","Array Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es5-ext/string/#/contains":212,"es6-symbol":225}],218:[function(b,y,F){var q=b("es5-ext/function/is-arguments"),n=b("es5-ext/object/valid-callable"),p=b("es5-ext/string/is-string"),h=b("./get"),a=Array.isArray,f=Function.prototype.call,d=Array.prototype.some;y.exports=function(l,k,c){var e,g;a(l)||q(l)?e=
"array":p(l)?e="string":l=h(l);n(k);var m=function(){g=!0};if("array"===e)d.call(l,function(w){f.call(k,c,w,m);return g});else if("string"===e){var r=l.length;for(e=0;e<r;++e){var u=l[e];if(e+1<r){var v=u.charCodeAt(0);55296<=v&&56319>=v&&(u+=l[++e])}f.call(k,c,u,m);if(g)break}}else for(e=l.next();!e.done;){f.call(k,c,e.value,m);if(g)break;e=l.next()}}},{"./get":219,"es5-ext/function/is-arguments":184,"es5-ext/object/valid-callable":209,"es5-ext/string/is-string":215}],219:[function(b,y,F){var q=
b("es5-ext/function/is-arguments"),n=b("es5-ext/string/is-string"),p=b("./array"),h=b("./string"),a=b("./valid-iterable"),f=b("es6-symbol").iterator;y.exports=function(d){return"function"===typeof a(d)[f]?d[f]():q(d)?new p(d):n(d)?new h(d):new p(d)}},{"./array":217,"./string":222,"./valid-iterable":223,"es5-ext/function/is-arguments":184,"es5-ext/string/is-string":215,"es6-symbol":225}],220:[function(b,y,F){var q=b("es5-ext/array/#/clear");F=b("es5-ext/object/assign");var n=b("es5-ext/object/valid-callable"),
p=b("es5-ext/object/valid-value"),h=b("d"),a=b("d/auto-bind"),f=b("es6-symbol"),d=Object.defineProperty,l=Object.defineProperties,k;y.exports=k=function(c,e){if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");l(this,{__list__:h("w",p(c)),__context__:h("w",e),__nextIndex__:h("w",0)});e&&(n(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))};delete k.prototype.constructor;l(k.prototype,F({_next:h(function(){if(this.__list__){if(this.__redo__){var c=
this.__redo__.shift();if(void 0!==c)return c}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:h(function(){return this._createResult(this._next())}),_createResult:h(function(c){return void 0===c?{done:!0,value:void 0}:{done:!1,value:this._resolve(c)}}),_resolve:h(function(c){return this.__list__[c]}),_unBind:h(function(){this.__list__=null;delete this.__redo__;this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),
this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:h(function(){return"[object "+(this[f.toStringTag]||"Object")+"]"})},a({_onAdd:h(function(c){c>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(e,g){e>=c&&(this.__redo__[g]=++e)},this),this.__redo__.push(c)):d(this,"__redo__",h("c",[c])))}),_onDelete:h(function(c){if(!(c>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__)){var e=this.__redo__.indexOf(c);-1!==e&&this.__redo__.splice(e,
1);this.__redo__.forEach(function(g,m){g>c&&(this.__redo__[m]=--g)},this)}}),_onClear:h(function(){this.__redo__&&q.call(this.__redo__);this.__nextIndex__=0})})));d(k.prototype,f.iterator,h(function(){return this}))},{d:155,"d/auto-bind":154,"es5-ext/array/#/clear":180,"es5-ext/object/assign":193,"es5-ext/object/valid-callable":209,"es5-ext/object/valid-value":211,"es6-symbol":225}],221:[function(b,y,F){var q=b("es5-ext/function/is-arguments"),n=b("es5-ext/object/is-value"),p=b("es5-ext/string/is-string"),
h=b("es6-symbol").iterator,a=Array.isArray;y.exports=function(f){return n(f)?a(f)||p(f)||q(f)?!0:"function"===typeof f[h]:!1}},{"es5-ext/function/is-arguments":184,"es5-ext/object/is-value":200,"es5-ext/string/is-string":215,"es6-symbol":225}],222:[function(b,y,F){F=b("es5-ext/object/set-prototype-of");var q=b("d"),n=b("es6-symbol"),p=b("./"),h=Object.defineProperty;var a=y.exports=function(f){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");f=String(f);p.call(this,f);h(this,
"__length__",q("",f.length))};F&&F(a,p);delete a.prototype.constructor;a.prototype=Object.create(p.prototype,{_next:q(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:q(function(f){f=this.__list__[f];if(this.__nextIndex__===this.__length__)return f;var d=f.charCodeAt(0);return 55296<=d&&56319>=d?f+this.__list__[this.__nextIndex__++]:f})});h(a.prototype,n.toStringTag,q("c","String Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,
"es6-symbol":225}],223:[function(b,y,F){var q=b("./is-iterable");y.exports=function(n){if(!q(n))throw new TypeError(n+" is not iterable");return n}},{"./is-iterable":221}],224:[function(b,y,F){(function(q,n){(function(p,h){"object"===typeof F&&"undefined"!==typeof y?y.exports=h():p.ES6Promise=h()})(this,function(){function p(qa){return"function"===typeof qa}function h(){return function(){return q.nextTick(k)}}function a(){return"undefined"!==typeof K?function(){K(k)}:l()}function f(){var qa=0,oa=
new P(k),ka=document.createTextNode("");oa.observe(ka,{characterData:!0});return function(){ka.data=qa=++qa%2}}function d(){var qa=new MessageChannel;qa.port1.onmessage=k;return function(){return qa.port2.postMessage(0)}}function l(){var qa=setTimeout;return function(){return qa(k,1)}}function k(){for(var qa=0;qa<E;qa+=2)(0,V[qa])(V[qa+1]),V[qa]=void 0,V[qa+1]=void 0;E=0}function c(){try{var qa=Function("return this")().require("vertx");K=qa.runOnLoop||qa.runOnContext;return a()}catch(oa){return l()}}
function e(qa,oa){var ka=this,ra=new this.constructor(m);void 0===ra[ba]&&I(ra);var ha=ka._state;if(ha){var ma=arguments[ha-1];O(function(){return G(ha,ra,ma,ka._result)})}else B(ka,ra,qa,oa);return ra}function g(qa){if(qa&&"object"===typeof qa&&qa.constructor===this)return qa;var oa=new this(m);D(oa,qa);return oa}function m(){}function r(qa,oa,ka,ra){try{qa.call(oa,ka,ra)}catch(ha){return ha}}function u(qa,oa,ka){O(function(ra){var ha=!1,ma=r(ka,oa,function(wa){ha||(ha=!0,oa!==wa?D(ra,wa):x(ra,wa))},
function(wa){ha||(ha=!0,A(ra,wa))},"Settle: "+(ra._label||" unknown promise"));!ha&&ma&&(ha=!0,A(ra,ma))},qa)}function v(qa,oa){oa._state===ea?x(qa,oa._result):oa._state===da?A(qa,oa._result):B(oa,void 0,function(ka){return D(qa,ka)},function(ka){return A(qa,ka)})}function w(qa,oa,ka){oa.constructor===qa.constructor&&ka===e&&oa.constructor.resolve===g?v(qa,oa):void 0===ka?x(qa,oa):p(ka)?u(qa,oa,ka):x(qa,oa)}function D(qa,oa){if(qa===oa)A(qa,new TypeError("You cannot resolve a promise with itself"));
else{var ka=typeof oa;if(null===oa||"object"!==ka&&"function"!==ka)x(qa,oa);else{ka=void 0;try{ka=oa.then}catch(ra){A(qa,ra);return}w(qa,oa,ka)}}}function C(qa){qa._onerror&&qa._onerror(qa._result);t(qa)}function x(qa,oa){qa._state===Y&&(qa._result=oa,qa._state=ea,0!==qa._subscribers.length&&O(t,qa))}function A(qa,oa){qa._state===Y&&(qa._state=da,qa._result=oa,O(C,qa))}function B(qa,oa,ka,ra){var ha=qa._subscribers,ma=ha.length;qa._onerror=null;ha[ma]=oa;ha[ma+ea]=ka;ha[ma+da]=ra;0===ma&&qa._state&&
O(t,qa)}function t(qa){var oa=qa._subscribers,ka=qa._state;if(0!==oa.length){for(var ra,ha,ma=qa._result,wa=0;wa<oa.length;wa+=3)ra=oa[wa],ha=oa[wa+ka],ra?G(ka,ra,ha,ma):ha(ma);qa._subscribers.length=0}}function G(qa,oa,ka,ra){var ha=p(ka),ma=void 0,wa=void 0,na=!0;if(ha){try{ma=ka(ra)}catch(ya){na=!1,wa=ya}if(oa===ma){A(oa,new TypeError("A promises callback cannot return that same promise."));return}}else ma=ra;oa._state===Y&&(ha&&na?D(oa,ma):!1===na?A(oa,wa):qa===ea?x(oa,ma):qa===da&&A(oa,ma))}
function H(qa,oa){try{oa(function(ka){D(qa,ka)},function(ka){A(qa,ka)})}catch(ka){A(qa,ka)}}function I(qa){qa[ba]=ca++;qa._state=void 0;qa._result=void 0;qa._subscribers=[]}var J=void 0,L=J=Array.isArray?Array.isArray:function(qa){return"[object Array]"===Object.prototype.toString.call(qa)},E=0,K=void 0,N=void 0,O=function(qa,oa){V[E]=qa;V[E+1]=oa;E+=2;2===E&&(N?N(k):aa())},Q=(J="undefined"!==typeof window?window:void 0)||{},P=Q.MutationObserver||Q.WebKitMutationObserver;Q="undefined"===typeof self&&
"undefined"!==typeof q&&"[object process]"==={}.toString.call(q);var T="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,V=Array(1E3),aa=void 0;aa=Q?h():P?f():T?d():void 0===J&&"function"===typeof b?c():l();var ba=Math.random().toString(36).substring(2),Y=void 0,ea=1,da=2,ca=0,la=function(){function qa(oa,ka){this._instanceConstructor=oa;this.promise=new oa(m);this.promise[ba]||I(this.promise);L(ka)?(this._remaining=this.length=ka.length,
this._result=Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(ka),0===this._remaining&&x(this.promise,this._result))):A(this.promise,Error("Array Methods must be provided an Array"))}qa.prototype._enumerate=function(oa){for(var ka=0;this._state===Y&&ka<oa.length;ka++)this._eachEntry(oa[ka],ka)};qa.prototype._eachEntry=function(oa,ka){var ra=this._instanceConstructor,ha=ra.resolve;if(ha===g){var ma=ha=void 0,wa=!1;try{ha=oa.then}catch(na){wa=
!0,ma=na}ha===e&&oa._state!==Y?this._settledAt(oa._state,ka,oa._result):"function"!==typeof ha?(this._remaining--,this._result[ka]=oa):ra===pa?(ra=new ra(m),wa?A(ra,ma):w(ra,oa,ha),this._willSettleAt(ra,ka)):this._willSettleAt(new ra(function(na){return na(oa)}),ka)}else this._willSettleAt(ha(oa),ka)};qa.prototype._settledAt=function(oa,ka,ra){var ha=this.promise;ha._state===Y&&(this._remaining--,oa===da?A(ha,ra):this._result[ka]=ra);0===this._remaining&&x(ha,this._result)};qa.prototype._willSettleAt=
function(oa,ka){var ra=this;B(oa,void 0,function(ha){return ra._settledAt(ea,ka,ha)},function(ha){return ra._settledAt(da,ka,ha)})};return qa}(),pa=function(){function qa(oa){this[ba]=ca++;this._result=this._state=void 0;this._subscribers=[];if(m!==oa){if("function"!==typeof oa)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof qa)H(this,oa);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}qa.prototype.catch=function(oa){return this.then(null,oa)};qa.prototype.finally=function(oa){var ka=this.constructor;return p(oa)?this.then(function(ra){return ka.resolve(oa()).then(function(){return ra})},function(ra){return ka.resolve(oa()).then(function(){throw ra;})}):this.then(oa,oa)};return qa}();pa.prototype.then=e;pa.all=function(qa){return(new la(this,qa)).promise};pa.race=function(qa){var oa=this;return L(qa)?new oa(function(ka,ra){for(var ha=qa.length,ma=0;ma<ha;ma++)oa.resolve(qa[ma]).then(ka,
ra)}):new oa(function(ka,ra){return ra(new TypeError("You must pass an array to race."))})};pa.resolve=g;pa.reject=function(qa){var oa=new this(m);A(oa,qa);return oa};pa._setScheduler=function(qa){N=qa};pa._setAsap=function(qa){O=qa};pa._asap=O;pa.polyfill=function(){var qa=void 0;if("undefined"!==typeof n)qa=n;else if("undefined"!==typeof self)qa=self;else try{qa=Function("return this")()}catch(ra){throw Error("polyfill failed because global object is unavailable in this environment");}var oa=qa.Promise;
if(oa){var ka=null;try{ka=Object.prototype.toString.call(oa.resolve())}catch(ra){}if("[object Promise]"===ka&&!oa.cast)return}qa.Promise=pa};return pa.Promise=pa})}).call(this,b("_process"),"undefined"!==typeof fb?fb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:500}],225:[function(b,y,F){y.exports=b("./is-implemented")()?b("ext/global-this").Symbol:b("./polyfill")},{"./is-implemented":226,"./polyfill":231,"ext/global-this":238}],226:[function(b,y,F){var q=b("ext/global-this"),
n={object:!0,symbol:!0};y.exports=function(){var p=q.Symbol;if("function"!==typeof p)return!1;var h=p("test symbol");try{String(h)}catch(a){return!1}return n[typeof p.iterator]&&n[typeof p.toPrimitive]&&n[typeof p.toStringTag]?!0:!1}},{"ext/global-this":238}],227:[function(b,y,F){y.exports=function(q){return q?"symbol"===typeof q?!0:q.constructor&&"Symbol"===q.constructor.name?"Symbol"===q[q.constructor.toStringTag]:!1:!1}},{}],228:[function(b,y,F){var q=b("d");b=Object.create;var n=Object.defineProperty,
p=Object.prototype,h=b(null);y.exports=function(a){for(var f=0,d,l;h[a+(f||"")];)++f;a+=f||"";h[a]=!0;d="@@"+a;n(p,d,q.gs(null,function(k){l||(l=!0,n(this,d,q(k)),l=!1)}));return d}},{d:155}],229:[function(b,y,F){var q=b("d"),n=b("ext/global-this").Symbol;y.exports=function(p){return Object.defineProperties(p,{hasInstance:q("",n&&n.hasInstance||p("hasInstance")),isConcatSpreadable:q("",n&&n.isConcatSpreadable||p("isConcatSpreadable")),iterator:q("",n&&n.iterator||p("iterator")),match:q("",n&&n.match||
p("match")),replace:q("",n&&n.replace||p("replace")),search:q("",n&&n.search||p("search")),species:q("",n&&n.species||p("species")),split:q("",n&&n.split||p("split")),toPrimitive:q("",n&&n.toPrimitive||p("toPrimitive")),toStringTag:q("",n&&n.toStringTag||p("toStringTag")),unscopables:q("",n&&n.unscopables||p("unscopables"))})}},{d:155,"ext/global-this":238}],230:[function(b,y,F){var q=b("d"),n=b("../../../validate-symbol"),p=Object.create(null);y.exports=function(h){return Object.defineProperties(h,
{for:q(function(a){return p[a]?p[a]:p[a]=h(String(a))}),keyFor:q(function(a){var f;n(a);for(f in p)if(p[f]===a)return f})})}},{"../../../validate-symbol":232,d:155}],231:[function(b,y,F){var q=b("d"),n=b("./validate-symbol"),p=b("ext/global-this").Symbol,h=b("./lib/private/generate-name");F=b("./lib/private/setup/standard-symbols");b=b("./lib/private/setup/symbol-registry");var a=Object.create,f=Object.defineProperties,d=Object.defineProperty,l;if("function"===typeof p)try{String(p());var k=!0}catch(e){}else p=
null;var c=function(e){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return l(e)};y.exports=l=function m(g){if(this instanceof m)throw new TypeError("Symbol is not a constructor");if(k)return p(g);var r=a(c.prototype);g=void 0===g?"":String(g);return f(r,{__description__:q("",g),__name__:q("",h(g))})};F(l);b(l);f(c.prototype,{constructor:q(l),toString:q("",function(){return this.__name__})});f(l.prototype,{toString:q(function(){return"Symbol ("+n(this).__description__+")"}),
valueOf:q(function(){return n(this)})});d(l.prototype,l.toPrimitive,q("",function(){var g=n(this);return"symbol"===typeof g?g:g.toString()}));d(l.prototype,l.toStringTag,q("c","Symbol"));d(c.prototype,l.toStringTag,q("c",l.prototype[l.toStringTag]));d(c.prototype,l.toPrimitive,q("c",l.prototype[l.toPrimitive]))},{"./lib/private/generate-name":228,"./lib/private/setup/standard-symbols":229,"./lib/private/setup/symbol-registry":230,"./validate-symbol":232,d:155,"ext/global-this":238}],232:[function(b,
y,F){var q=b("./is-symbol");y.exports=function(n){if(!q(n))throw new TypeError(n+" is not a symbol");return n}},{"./is-symbol":227}],233:[function(b,y,F){y.exports=b("./is-implemented")()?WeakMap:b("./polyfill")},{"./is-implemented":234,"./polyfill":236}],234:[function(b,y,F){y.exports=function(){var q;if("function"!==typeof WeakMap)return!1;try{var n=new WeakMap([[q={},"one"],[{},"two"],[{},"three"]])}catch(p){return!1}return"[object WeakMap]"!==String(n)||"function"!==typeof n.set||n.set({},1)!==
n||"function"!==typeof n.delete||"function"!==typeof n.has||"one"!==n.get(q)?!1:!0}},{}],235:[function(b,y,F){b="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);y.exports=b},{}],236:[function(b,y,F){var q=b("es5-ext/object/is-value"),n=b("es5-ext/object/set-prototype-of"),p=b("es5-ext/object/valid-object"),h=b("es5-ext/object/valid-value"),a=b("es5-ext/string/random-uniq"),f=b("d"),d=b("es6-iterator/get"),l=b("es6-iterator/for-of");F=b("es6-symbol").toStringTag;
var k=b("./is-native-implemented"),c=Array.isArray,e=Object.defineProperty,g=Object.prototype.hasOwnProperty,m=Object.getPrototypeOf,r;y.exports=r=function(u){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");var v=k&&n&&WeakMap!==r?n(new WeakMap,m(this)):this;q(u)&&(c(u)||(u=d(u)));e(v,"__weakMapData__",f("c","$weakMap$"+a()));if(!u)return v;l(u,function(w){h(w);v.set(w[0],w[1])});return v};k&&(n&&n(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:f(r)}));
Object.defineProperties(r.prototype,{delete:f(function(u){return g.call(p(u),this.__weakMapData__)?(delete u[this.__weakMapData__],!0):!1}),get:f(function(u){if(g.call(p(u),this.__weakMapData__))return u[this.__weakMapData__]}),has:f(function(u){return g.call(p(u),this.__weakMapData__)}),set:f(function(u,v){e(p(u),this.__weakMapData__,f("c",v));return this}),toString:f(function(){return"[object WeakMap]"})});e(r.prototype,F,f("c","WeakMap"))},{"./is-native-implemented":235,d:155,"es5-ext/object/is-value":200,
"es5-ext/object/set-prototype-of":206,"es5-ext/object/valid-object":210,"es5-ext/object/valid-value":211,"es5-ext/string/random-uniq":216,"es6-iterator/for-of":218,"es6-iterator/get":219,"es6-symbol":225}],237:[function(b,y,F){var q=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw Error("Unable to resolve global `this`");};y.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},
configurable:!0})}catch(n){return q()}try{return __global__?__global__:q()}finally{delete Object.prototype.__global__}}()},{}],238:[function(b,y,F){y.exports=b("./is-implemented")()?globalThis:b("./implementation")},{"./implementation":237,"./is-implemented":239}],239:[function(b,y,F){y.exports=function(){return"object"===typeof globalThis&&globalThis?globalThis.Array===Array:!1}},{}],240:[function(b,y,F){y.exports=function(q,n,p){n=n||0;p=p||1;return[[q[12]+q[0],q[13]+q[1],q[14]+q[2],q[15]+q[3]],
[q[12]-q[0],q[13]-q[1],q[14]-q[2],q[15]-q[3]],[q[12]+q[4],q[13]+q[5],q[14]+q[6],q[15]+q[7]],[q[12]-q[4],q[13]-q[5],q[14]-q[6],q[15]-q[7]],[n*q[12]+q[8],n*q[13]+q[9],n*q[14]+q[10],n*q[15]+q[11]],[p*q[12]-q[8],p*q[13]-q[9],p*q[14]-q[10],p*q[15]-q[11]]]}},{}],241:[function(b,y,F){var q=b("is-string-blank");y.exports=function(n){var p=typeof n;if("string"===p){if(p=n,n=+n,0===n&&q(p))return!1}else if("number"!==p)return!1;return 1>n-n}},{"is-string-blank":444}],242:[function(b,y,F){function q(f,d,l){return Math.min(d,
Math.max(f,l))}function n(f,d,l){this.dimension=f.length;this.bounds=[Array(this.dimension),Array(this.dimension)];for(var k=0;k<this.dimension;++k)this.bounds[0][k]=-Infinity,this.bounds[1][k]=Infinity;this._state=f.slice().reverse();this._velocity=d.slice().reverse();this._time=[l];this._scratch=[f.slice(),f.slice(),f.slice(),f.slice(),f.slice()]}function p(f){for(var d=Array(f),l=0;l<f;++l)d[l]=0;return d}y.exports=function(f,d,l){switch(arguments.length){case 0:return new n([0],[0],0);case 1:if("number"===
typeof f){var k=p(f);return new n(k,k,0)}return new n(f,p(f.length),0);case 2:if("number"===typeof d)return k=p(f.length),new n(f,k,+d);l=0;case 3:if(f.length!==d.length)throw Error("state and velocity lengths must match");return new n(f,d,l)}};var h=b("cubic-hermite"),a=b("binary-search-bounds");b=n.prototype;b.flush=function(f){f=a.gt(this._time,f)-1;0>=f||(this._time.splice(0,f),this._state.splice(0,f*this.dimension),this._velocity.splice(0,f*this.dimension))};b.curve=function(f){var d=this._time,
l=d.length,k=a.le(d,f),c=this._scratch[0],e=this._state,g=this._velocity,m=this.dimension,r=this.bounds;if(0>k){var u=m-1;for(d=0;d<m;++d,--u)c[d]=e[u]}else if(k>=l-1)for(u=e.length-1,f-=d[l-1],d=0;d<m;++d,--u)c[d]=e[u]+f*g[u];else{u=m*(k+1)-1;l=d[k];k=d[k+1]-l||1;var v=this._scratch[1],w=this._scratch[2],D=this._scratch[3],C=this._scratch[4],x=!0;for(d=0;d<m;++d,--u)v[d]=e[u],D[d]=g[u]*k,w[d]=e[u+m],C[d]=g[u+m]*k,x=x&&v[d]===w[d]&&D[d]===C[d]&&0===D[d];if(x)for(d=0;d<m;++d)c[d]=v[d];else h(v,D,w,
C,(f-l)/k,c)}e=r[0];r=r[1];for(d=0;d<m;++d)c[d]=q(e[d],r[d],c[d]);return c};b.dcurve=function(f){var d=this._time,l=d.length,k=a.le(d,f),c=this._scratch[0],e=this._state,g=this._velocity,m=this.dimension;if(k>=l-1)for(l=e.length-1,d=0;d<m;++d,--l)c[d]=g[l];else{l=m*(k+1)-1;var r=d[k];k=d[k+1]-r||1;var u=this._scratch[1],v=this._scratch[2],w=this._scratch[3],D=this._scratch[4],C=!0;for(d=0;d<m;++d,--l)u[d]=e[l],w[d]=g[l]*k,v[d]=e[l+m],D[d]=g[l+m]*k,C=C&&u[d]===v[d]&&w[d]===D[d]&&0===w[d];if(C)for(d=
0;d<m;++d)c[d]=0;else for(h.derivative(u,w,v,D,(f-r)/k,c),d=0;d<m;++d)c[d]/=k}return c};b.lastT=function(){var f=this._time;return f[f.length-1]};b.stable=function(){for(var f=this._velocity,d=f.length,l=this.dimension-1;0<=l;--l)if(f[--d])return!1;return!0};b.jump=function(f){var d=this.lastT(),l=this.dimension;if(!(f<d||arguments.length!==l+1)){var k=this._state,c=this._velocity,e=k.length-this.dimension,g=this.bounds,m=g[0];g=g[1];this._time.push(d,f);for(d=0;2>d;++d)for(var r=0;r<l;++r)k.push(k[e++]),
c.push(0);this._time.push(f);for(r=l;0<r;--r)k.push(q(m[r-1],g[r-1],arguments[r])),c.push(0)}};b.push=function(f){var d=this.lastT(),l=this.dimension;if(!(f<d||arguments.length!==l+1)){var k=this._state,c=this._velocity,e=k.length-this.dimension,g=f-d,m=this.bounds;d=m[0];m=m[1];g=1E-6<g?1/g:0;for(this._time.push(f);0<l;--l){var r=q(d[l-1],m[l-1],arguments[l]);k.push(r);c.push((r-k[e++])*g)}}};b.set=function(f){var d=this.dimension;if(!(f<this.lastT()||arguments.length!==d+1)){var l=this._state,k=
this._velocity,c=this.bounds,e=c[0];c=c[1];for(this._time.push(f);0<d;--d)l.push(q(e[d-1],c[d-1],arguments[d])),k.push(0)}};b.move=function(f){var d=this.lastT(),l=this.dimension;if(!(f<=d||arguments.length!==l+1)){var k=this._state,c=this._velocity,e=k.length-this.dimension,g=this.bounds,m=g[0];g=g[1];d=f-d;d=1E-6<d?1/d:0;for(this._time.push(f);0<l;--l){var r=arguments[l];k.push(q(m[l-1],g[l-1],k[e++]+r));c.push(r*d)}}};b.idle=function(f){var d=this.lastT();if(!(f<d)){var l=this.dimension,k=this._state,
c=this._velocity,e=k.length-l,g=this.bounds,m=g[0];g=g[1];d=f-d;this._time.push(f);for(f=l-1;0<=f;--f)k.push(q(m[f],g[f],k[e]+d*c[e])),c.push(0),e+=1}}},{"binary-search-bounds":243,"cubic-hermite":150}],243:[function(b,y,F){function q(p,h,a,f,d,l){p=["function ",p,"(a,l,h,",f.join(","),"){",l?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da",d?".get(m)":"[m]"];l?0>h.indexOf("c")?p.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):p.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):
p.push(";if(",h,"){i\x3dm;");a?p.push("l\x3dm+1}else{h\x3dm-1}"):p.push("h\x3dm-1}else{l\x3dm+1}");p.push("}");l?p.push("return -1};"):p.push("return i};");return p.join("")}function n(p,h,a,f){return(new Function([q("A","x"+p+"y",h,["y"],!1,f),q("B","x"+p+"y",h,["y"],!0,f),q("P","c(x,y)"+p+"0",h,["y","c"],!1,f),q("Q","c(x,y)"+p+"0",h,["y","c"],!0,f),"function dispatchBsearch",a,"(a,y,c,l,h){if(a.shape){if(typeof(c)\x3d\x3d\x3d'function'){return Q(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
a].join("")))()}y.exports={ge:n("\x3e\x3d",!1,"GE"),gt:n("\x3e",!1,"GT"),lt:n("\x3c",!0,"LT"),le:n("\x3c\x3d",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],244:[function(b,y,F){var q=b("dtype");y.exports=function(n,p,h){if(!n)throw new TypeError("must specify data as first parameter");h=+(h||0)|0;if(Array.isArray(n)&&n[0]&&"number"===typeof n[0][0]){var a=n[0].length,f=n.length*a;p&&"string"!==typeof p||(p=new (q(p||"float32"))(f+h));var d=p.length-h;if(f!==d)throw Error("source length "+f+" ("+a+"x"+n.length+
") does not match destination length "+d);for(f=0;f<n.length;f++)for(d=0;d<a;d++)p[h++]=null===n[f][d]?NaN:n[f][d]}else if(p&&"string"!==typeof p)p.set(n,h);else if(a=q(p||"float32"),Array.isArray(n)||"array"===p)for(p=new a(n.length+h),f=0,a=p.length;h<a;h++,f++)p[h]=null===n[f]?NaN:n[f];else 0===h?p=new a(n):(p=new a(n.length+h),p.set(n,h));return p}},{dtype:175}],245:[function(b,y,F){var q=b("css-font/stringify"),n=[32,126];y.exports=function(p){p=p||{};var h=p.shape?p.shape:p.canvas?[p.canvas.width,
p.canvas.height]:[512,512],a=p.canvas||document.createElement("canvas"),f=p.font,d="number"===typeof p.step?[p.step,p.step]:p.step||[32,32];p=p.chars||n;f&&"string"!==typeof f&&(f=q(f));if(!Array.isArray(p))p=String(p).split("");else if(2===p.length&&"number"===typeof p[0]&&"number"===typeof p[1]){for(var l=[],k=p[0],c=0;k<=p[1];k++)l[c++]=String.fromCharCode(k);p=l}h=h.slice();a.width=h[0];a.height=h[1];l=a.getContext("2d");l.fillStyle="#000";l.fillRect(0,0,a.width,a.height);l.font=f;l.textAlign=
"center";l.textBaseline="middle";l.fillStyle="#fff";f=d[0]/2;c=d[1]/2;for(k=0;k<p.length;k++)l.fillText(p[k],f,c),(f+=d[0])>h[0]-d[0]/2&&(f=d[0]/2,c+=d[1]);return a}},{"css-font/stringify":147}],246:[function(b,y,F){function q(a,f){f||(f={});if("string"===typeof a||Array.isArray(a))f.family=a;var d=Array.isArray(f.family)?f.family.join(", "):f.family;if(!d)throw Error("`family` must be defined");var l=f.size||f.fontSize||f.em||48;a=[f.style||f.fontStyle||"",f.weight||f.fontWeight||"",l].join(" ")+
"px "+d;var k=f.origin||"top";if(q.cache[d]&&l<=q.cache[d].em)return n(q.cache[d],k);var c=f.canvas||q.canvas,e=c.getContext("2d"),g=void 0!==f.upper?f.upper:"H",m=void 0!==f.lower?f.lower:"x",r=void 0!==f.descent?f.descent:"p",u=void 0!==f.ascent?f.ascent:"h",v=void 0!==f.tittle?f.tittle:"i";f=void 0!==f.overshoot?f.overshoot:"O";var w=Math.ceil(1.5*l);c.height=w;c.width=.5*w;e.font=a;a={top:0};e.clearRect(0,0,w,w);e.textBaseline="top";e.fillStyle="black";e.fillText("H",0,0);c=p(e.getImageData(0,
0,w,w));e.clearRect(0,0,w,w);e.textBaseline="bottom";e.fillText("H",0,w);var D=p(e.getImageData(0,0,w,w));a.lineHeight=a.bottom=w-D+c;e.clearRect(0,0,w,w);e.textBaseline="alphabetic";e.fillText("H",0,w);D=p(e.getImageData(0,0,w,w));D=w-D-1+c;a.baseline=a.alphabetic=D;e.clearRect(0,0,w,w);e.textBaseline="middle";e.fillText("H",0,.5*w);var C=p(e.getImageData(0,0,w,w));a.median=a.middle=w-C-1+c-.5*w;e.clearRect(0,0,w,w);e.textBaseline="hanging";e.fillText("H",0,.5*w);C=p(e.getImageData(0,0,w,w));a.hanging=
w-C-1+c-.5*w;e.clearRect(0,0,w,w);e.textBaseline="ideographic";e.fillText("H",0,w);C=p(e.getImageData(0,0,w,w));a.ideographic=w-C-1+c;g&&(e.clearRect(0,0,w,w),e.textBaseline="top",e.fillText(g,0,0),a.upper=p(e.getImageData(0,0,w,w)),a.capHeight=a.baseline-a.upper);m&&(e.clearRect(0,0,w,w),e.textBaseline="top",e.fillText(m,0,0),a.lower=p(e.getImageData(0,0,w,w)),a.xHeight=a.baseline-a.lower);v&&(e.clearRect(0,0,w,w),e.textBaseline="top",e.fillText(v,0,0),a.tittle=p(e.getImageData(0,0,w,w)));u&&(e.clearRect(0,
0,w,w),e.textBaseline="top",e.fillText(u,0,0),a.ascent=p(e.getImageData(0,0,w,w)));r&&(e.clearRect(0,0,w,w),e.textBaseline="top",e.fillText(r,0,0),a.descent=h(e.getImageData(0,0,w,w)));f&&(e.clearRect(0,0,w,w),e.textBaseline="top",e.fillText(f,0,0),e=h(e.getImageData(0,0,w,w)),a.overshoot=e-D);for(var x in a)a[x]/=l;a.em=l;q.cache[d]=a;return n(a,k)}function n(a,f){var d={};"string"===typeof f&&(f=a[f]);for(var l in a)"em"!==l&&(d[l]=a[l]-f);return d}function p(a){var f=a.height;a=a.data;for(var d=
3;d<a.length;d+=4)if(0!==a[d])return Math.floor(.25*(d-3)/f)}function h(a){var f=a.height;a=a.data;for(var d=a.length-1;0<d;d-=4)if(0!==a[d])return Math.floor(.25*(d-3)/f)}y.exports=q;q.canvas=document.createElement("canvas");q.cache={}},{}],247:[function(b,y,F){function q(g,m,r,u,v,w){this._color=g;this.key=m;this.value=r;this.left=u;this.right=v;this._count=w}function n(g){return new q(g._color,g.key,g.value,g.left,g.right,g._count)}function p(g,m){return new q(g,m.key,m.value,m.left,m.right,m._count)}
function h(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function a(g,m){this._compare=g;this.root=m}function f(g,m){if(m.left){var r=f(g,m.left);if(r)return r}if(r=g(m.key,m.value))return r;if(m.right)return f(g,m.right)}function d(g,m,r,u){if(0>=m(g,u.key)){if(u.left){var v=d(g,m,r,u.left);if(v)return v}if(v=r(u.key,u.value))return v}if(u.right)return d(g,m,r,u.right)}function l(g,m,r,u,v){var w=r(g,v.key),D=r(m,v.key);if(0>=w&&(v.left&&(w=l(g,m,r,u,v.left))||0<D&&(w=u(v.key,
v.value))))return w;if(0<D&&v.right)return l(g,m,r,u,v.right)}function k(g,m){this.tree=g;this._stack=m}function c(g,m){g.key=m.key;g.value=m.value;g.left=m.left;g.right=m.right;g._color=m._color;g._count=m._count}function e(g,m){return g<m?-1:g>m?1:0}y.exports=function(g){return new a(g||e,null)};b=a.prototype;Object.defineProperty(b,"keys",{get:function(){var g=[];this.forEach(function(m,r){g.push(m)});return g}});Object.defineProperty(b,"values",{get:function(){var g=[];this.forEach(function(m,
r){g.push(r)});return g}});Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(g,m){for(var r=this._compare,u=this.root,v=[],w=[];u;){var D=r(g,u.key);v.push(u);w.push(D);u=0>=D?u.left:u.right}v.push(new q(0,g,m,null,null,1));for(g=v.length-2;0<=g;--g)u=v[g],v[g]=0>=w[g]?new q(u._color,u.key,u.value,v[g+1],u.right,u._count+1):new q(u._color,u.key,u.value,u.left,v[g+1],u._count+1);for(g=v.length-1;1<g;--g){w=v[g-1];u=v[g];if(1===w._color||1===u._color)break;
m=v[g-2];if(m.left===w)if(w.left===u)if((D=m.right)&&0===D._color)w._color=1,m.right=p(1,D),m._color=0,--g;else{m._color=0;m.left=w.right;w._color=1;w.right=m;v[g-2]=w;v[g-1]=u;h(m);h(w);3<=g&&(g=v[g-3],g.left===m?g.left=w:g.right=w);break}else if((D=m.right)&&0===D._color)w._color=1,m.right=p(1,D),m._color=0,--g;else{w.right=u.left;m._color=0;m.left=u.right;u._color=1;u.left=w;u.right=m;v[g-2]=u;v[g-1]=w;h(m);h(w);h(u);3<=g&&(g=v[g-3],g.left===m?g.left=u:g.right=u);break}else if(w.right===u)if((D=
m.left)&&0===D._color)w._color=1,m.left=p(1,D),m._color=0,--g;else{m._color=0;m.right=w.left;w._color=1;w.left=m;v[g-2]=w;v[g-1]=u;h(m);h(w);3<=g&&(g=v[g-3],g.right===m?g.right=w:g.left=w);break}else if((D=m.left)&&0===D._color)w._color=1,m.left=p(1,D),m._color=0,--g;else{w.left=u.right;m._color=0;m.right=u.left;u._color=1;u.right=w;u.left=m;v[g-2]=u;v[g-1]=w;h(m);h(w);h(u);3<=g&&(g=v[g-3],g.right===m?g.right=u:g.left=u);break}}v[0]._color=1;return new a(r,v[0])};b.forEach=function(g,m,r){if(this.root)switch(arguments.length){case 1:return f(g,
this.root);case 2:return d(m,this._compare,g,this.root);case 3:if(!(0<=this._compare(m,r)))return l(m,r,this._compare,g,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var g=[],m=this.root;m;)g.push(m),m=m.left;return new k(this,g)}});Object.defineProperty(b,"end",{get:function(){for(var g=[],m=this.root;m;)g.push(m),m=m.right;return new k(this,g)}});b.at=function(g){if(0>g)return new k(this,[]);for(var m=this.root,r=[];;){r.push(m);if(m.left){if(g<m.left._count){m=m.left;continue}g-=
m.left._count}if(!g)return new k(this,r);--g;if(m.right){if(g>=m.right._count)break;m=m.right}else break}return new k(this,[])};b.ge=function(g){for(var m=this._compare,r=this.root,u=[],v=0;r;){var w=m(g,r.key);u.push(r);0>=w&&(v=u.length);r=0>=w?r.left:r.right}u.length=v;return new k(this,u)};b.gt=function(g){for(var m=this._compare,r=this.root,u=[],v=0;r;){var w=m(g,r.key);u.push(r);0>w&&(v=u.length);r=0>w?r.left:r.right}u.length=v;return new k(this,u)};b.lt=function(g){for(var m=this._compare,
r=this.root,u=[],v=0;r;){var w=m(g,r.key);u.push(r);0<w&&(v=u.length);r=0>=w?r.left:r.right}u.length=v;return new k(this,u)};b.le=function(g){for(var m=this._compare,r=this.root,u=[],v=0;r;){var w=m(g,r.key);u.push(r);0<=w&&(v=u.length);r=0>w?r.left:r.right}u.length=v;return new k(this,u)};b.find=function(g){for(var m=this._compare,r=this.root,u=[];r;){var v=m(g,r.key);u.push(r);if(0===v)return new k(this,u);r=0>=v?r.left:r.right}return new k(this,[])};b.remove=function(g){return(g=this.find(g))?
g.remove():this};b.get=function(g){for(var m=this._compare,r=this.root;r;){var u=m(g,r.key);if(0===u)return r.value;r=0>=u?r.left:r.right}};b=k.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new k(this.tree,this._stack.slice())};b.remove=function(){var g=this._stack;if(0===g.length)return this.tree;var m=
Array(g.length),r=g[g.length-1];m[m.length-1]=new q(r._color,r.key,r.value,r.left,r.right,r._count);for(var u=g.length-2;0<=u;--u)r=g[u],m[u]=r.left===g[u+1]?new q(r._color,r.key,r.value,m[u+1],r.right,r._count):new q(r._color,r.key,r.value,r.left,m[u+1],r._count);r=m[m.length-1];if(r.left&&r.right){g=m.length;for(r=r.left;r.right;)m.push(r),r=r.right;u=m[g-1];m.push(new q(r._color,u.key,u.value,r.left,r.right,r._count));m[g-1].key=r.key;m[g-1].value=r.value;for(u=m.length-2;u>=g;--u)r=m[u],m[u]=
new q(r._color,r.key,r.value,r.left,m[u+1],r._count);m[g-1].left=m[g]}r=m[m.length-1];if(0===r._color)for(u=m[m.length-2],u.left===r?u.left=null:u.right===r&&(u.right=null),m.pop(),u=0;u<m.length;++u)m[u]._count--;else if(r.left||r.right)for(r.left?c(r,r.left):r.right&&c(r,r.right),r._color=1,u=0;u<m.length-1;++u)m[u]._count--;else{if(1===m.length)return new a(this.tree._compare,null);for(u=0;u<m.length;++u)m[u]._count--;u=m[m.length-2];for(var v,w,D,C=m.length-1;0<=C;--C){g=m[C];if(0===C){g._color=
1;break}v=m[C-1];if(v.left===g){w=v.right;if(w.right&&0===w.right._color){w=v.right=n(w);D=w.right=n(w.right);v.right=w.left;w.left=v;w.right=D;w._color=v._color;g._color=1;v._color=1;D._color=1;h(v);h(w);if(1<C){var x=m[C-2];x.left===v?x.left=w:x.right=w}m[C-1]=w;break}else if(w.left&&0===w.left._color){w=v.right=n(w);D=w.left=n(w.left);v.right=D.left;w.left=D.right;D.left=v;D.right=w;D._color=v._color;v._color=1;w._color=1;g._color=1;h(v);h(w);h(D);1<C&&(x=m[C-2],x.left===v?x.left=D:x.right=D);
m[C-1]=D;break}if(1===w._color)if(0===v._color){v._color=1;v.right=p(0,w);break}else v.right=p(0,w);else w=n(w),v.right=w.left,w.left=v,w._color=v._color,v._color=0,h(v),h(w),1<C&&(x=m[C-2],x.left===v?x.left=w:x.right=w),m[C-1]=w,m[C]=v,C+1<m.length?m[C+1]=g:m.push(g),C+=2}else{w=v.left;if(w.left&&0===w.left._color){w=v.left=n(w);D=w.left=n(w.left);v.left=w.right;w.right=v;w.left=D;w._color=v._color;g._color=1;v._color=1;D._color=1;h(v);h(w);1<C&&(x=m[C-2],x.right===v?x.right=w:x.left=w);m[C-1]=w;
break}else if(w.right&&0===w.right._color){w=v.left=n(w);D=w.right=n(w.right);v.left=D.right;w.right=D.left;D.right=v;D.left=w;D._color=v._color;v._color=1;w._color=1;g._color=1;h(v);h(w);h(D);1<C&&(x=m[C-2],x.right===v?x.right=D:x.left=D);m[C-1]=D;break}if(1===w._color)if(0===v._color){v._color=1;v.left=p(0,w);break}else v.left=p(0,w);else w=n(w),v.left=w.right,w.right=v,w._color=v._color,v._color=0,h(v),h(w),1<C&&(x=m[C-2],x.right===v?x.right=w:x.left=w),m[C-1]=w,m[C]=v,C+1<m.length?m[C+1]=g:m.push(g),
C+=2}}u.left===r?u.left=null:u.right=null}return new a(this.tree._compare,m[0])};Object.defineProperty(b,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(b,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var g=0,m=this._stack;if(0===m.length)return(g=this.tree.root)?g._count:0;m[m.length-1].left&&(g=m[m.length-
1].left._count);for(var r=m.length-2;0<=r;--r)m[r+1]===m[r].right&&(++g,m[r].left&&(g+=m[r].left._count));return g},enumerable:!0});b.next=function(){var g=this._stack;if(0!==g.length){var m=g[g.length-1];if(m.right)for(m=m.right;m;)g.push(m),m=m.left;else for(g.pop();0<g.length&&g[g.length-1].right===m;)m=g[g.length-1],g.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var g=this._stack;if(0===g.length)return!1;if(g[g.length-1].right)return!0;for(var m=g.length-1;0<m;--m)if(g[m-1].left===
g[m])return!0;return!1}});b.update=function(g){var m=this._stack;if(0===m.length)throw Error("Can't update empty node!");var r=Array(m.length),u=m[m.length-1];r[r.length-1]=new q(u._color,u.key,g,u.left,u.right,u._count);for(g=m.length-2;0<=g;--g)u=m[g],r[g]=u.left===m[g+1]?new q(u._color,u.key,u.value,r[g+1],u.right,u._count):new q(u._color,u.key,u.value,u.left,r[g+1],u._count);return new a(this.tree._compare,r[0])};b.prev=function(){var g=this._stack;if(0!==g.length){var m=g[g.length-1];if(m.left)for(m=
m.left;m;)g.push(m),m=m.right;else for(g.pop();0<g.length&&g[g.length-1].left===m;)m=g[g.length-1],g.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var g=this._stack;if(0===g.length)return!1;if(g[g.length-1].left)return!0;for(var m=g.length-1;0<m;--m)if(g[m-1].right===g[m])return!0;return!1}})},{}],248:[function(b,y,F){function q(h){if(0>h)return Number("0/0");for(var a=p[0],f=p.length-1;0<f;--f)a+=p[f]/(h+f);f=h+4.7421875+.5;return.5*Math.log(2*Math.PI)+(h+.5)*Math.log(f)-f+Math.log(a)-
Math.log(h)}var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],p=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
y.exports=function f(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*f(1-a));if(100<a)return Math.exp(q(a));--a;for(var d=n[0],l=1;9>l;l++)d+=n[l]/(a+l);l=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(l,a+.5)*Math.exp(-l)*d};y.exports.log=q},{}],249:[function(b,y,F){y.exports=function(q,n){if("string"!==typeof q)throw new TypeError("must specify type string");n=n||{};if("undefined"===typeof document&&!n.canvas)return null;var p=n.canvas||document.createElement("canvas");"number"===typeof n.width&&(p.width=
n.width);"number"===typeof n.height&&(p.height=n.height);var h;try{var a=[q];0===q.indexOf("webgl")&&a.push("experimental-"+q);for(q=0;q<a.length;q++)if(h=p.getContext(a[q],n))return h}catch(f){h=null}return h||null}},{}],250:[function(b,y,F){function q(w,D){w[0]=D[0];w[1]=D[1];w[2]=D[2];return w}function n(w){this.gl=w;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif",
"sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=
[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=
[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=d(w)}function p(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function h(w,D,C,x,A){var B=w.primalOffset,t=w.primalMinor,G=w.mirrorOffset;w=w.mirrorMinor;x=x[D];for(var H=0;3>H;++H)if(D!==H){var I=B,J=G,L=t,E=w;x&1<<H&&(I=G,J=B,L=w,E=t);I[H]=C[0][H];J[H]=C[1][H];0<A[H]?(L[H]=-1,E[H]=0):(L[H]=0,E[H]=1)}}y.exports=function(w,D){w=new n(w);
w.update(D);return w};var a=b("./lib/text.js"),f=b("./lib/lines.js"),d=b("./lib/background.js"),l=b("./lib/cube.js"),k=b("./lib/ticks.js"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);b=n.prototype;b.update=function(w){function D(E,K,N){if(N in w){var O=w[N],Q=this[N],P;(E?Array.isArray(O)&&Array.isArray(O[0]):Array.isArray(O))?this[N]=P=[K(O[0]),K(O[1]),K(O[2])]:this[N]=P=[K(O),K(O),K(O)];for(E=0;3>E;++E)if(P[E]!==Q[E])return!0}return!1}w=w||{};var C=D.bind(this,!1,Number),x=D.bind(this,
!1,Boolean),A=D.bind(this,!1,String),B=D.bind(this,!0,function(E){if(Array.isArray(E)){if(3===E.length)return[+E[0],+E[1],+E[2],1];if(4===E.length)return[+E[0],+E[1],+E[2],+E[3]]}return[0,0,0,1]}),t=!1,G=!1;if("bounds"in w){var H=w.bounds,I=0;for(;2>I;++I)for(var J=0;3>J;++J)H[I][J]!==this.bounds[I][J]&&(G=!0),this.bounds[I][J]=H[I][J]}if("ticks"in w){var L=w.ticks;t=!0;this.autoTicks=!1;for(I=0;3>I;++I)this.tickSpacing[I]=0}else C("tickSpacing")&&(G=this.autoTicks=!0);this._firstInit&&("ticks"in
w||"tickSpacing"in w||(this.autoTicks=!0),t=G=!0,this._firstInit=!1);G&&this.autoTicks&&(L=k.create(this.bounds,this.tickSpacing),t=!0);if(t){for(I=0;3>I;++I)L[I].sort(function(E,K){return E.x-K.x});k.equal(L,this.ticks)?t=!1:this.ticks=L}x("tickEnable");A("tickFont")&&(t=!0);C("tickSize");C("tickAngle");C("tickPad");B("tickColor");L=A("labels");A("labelFont")&&(L=!0);x("labelEnable");C("labelSize");C("labelPad");B("labelColor");x("lineEnable");x("lineMirror");C("lineWidth");B("lineColor");x("lineTickEnable");
x("lineTickMirror");C("lineTickLength");C("lineTickWidth");B("lineTickColor");x("gridEnable");C("gridWidth");B("gridColor");x("zeroEnable");B("zeroLineColor");C("zeroLineWidth");x("backgroundEnable");B("backgroundColor");this._text?this._text&&(L||t)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont);this._lines&&t&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=
f(this.gl,this.bounds,this.ticks))};var e=[new p,new p,new p],g=[0,0,0],m={model:c,view:c,projection:c,_ortho:!1};b.isOpaque=function(){return!0};b.isTransparent=function(){return!1};b.drawTransparent=function(w){};var r=[0,0,0],u=[0,0,0],v=[0,0,0];b.draw=function(w){function D(N){K=[0,0,0];K[N]=1}function C(N,O,Q){var P=(N+1)%3;N=(N+2)%3;var T=O[P];O=O[N];var V=Q[P];Q=Q[N];0<T&&0<Q?D(P):0<T&&0>Q?D(P):0>T&&0<Q?D(P):0>T&&0>Q?D(P):0<O&&0<V?D(N):0<O&&0>V?D(N):0>O&&0<V?D(N):0>O&&0>V&&D(N)}w=w||m;var x=
this.gl,A=w.model||c,B=w.view||c,t=w.projection||c,G=this.bounds;w=w._ortho||!1;var H=l(A,B,t,G,w),I=H.cubeEdges;H=H.axis;w=(w?2:1)*this.pixelRatio*(t[3]*B[12]+t[7]*B[13]+t[11]*B[14]+t[15]*B[15])/x.drawingBufferHeight;for(x=0;3>x;++x)this.lastCubeProps.cubeEdges[x]=I[x],this.lastCubeProps.axis[x]=H[x];for(x=0;3>x;++x)h(e[x],x,this.bounds,I,H);x=this.gl;for(x=0;3>x;++x)g[x]=this.backgroundEnable[x]?H[x]:0;this._background.draw(A,B,t,G,g,this.backgroundColor);this._lines.bind(A,B,t,this);for(x=0;3>
x;++x){var J=[0,0,0];J[x]=0<H[x]?G[1][x]:G[0][x];for(I=0;2>I;++I){var L=(x+1+I)%3,E=(x+1+(I^1))%3;this.gridEnable[L]&&this._lines.drawGrid(L,E,this.bounds,J,this.gridColor[L],this.gridWidth[L]*this.pixelRatio)}for(I=0;2>I;++I)L=(x+1+I)%3,E=(x+1+(I^1))%3,this.zeroEnable[E]&&0>=Math.min(G[0][E],G[1][E])&&0<=Math.max(G[0][E],G[1][E])&&this._lines.drawZero(L,E,this.bounds,J,this.zeroLineColor[E],this.zeroLineWidth[E]*this.pixelRatio)}for(x=0;3>x;++x){this.lineEnable[x]&&this._lines.drawAxisLine(x,this.bounds,
e[x].primalOffset,this.lineColor[x],this.lineWidth[x]*this.pixelRatio);this.lineMirror[x]&&this._lines.drawAxisLine(x,this.bounds,e[x].mirrorOffset,this.lineColor[x],this.lineWidth[x]*this.pixelRatio);H=q(r,e[x].primalMinor);J=q(u,e[x].mirrorMinor);L=this.lineTickLength;for(I=0;3>I;++I)E=w/A[5*I],H[I]=H[I]*L[I]*E,J[I]=J[I]*L[I]*E;this.lineTickEnable[x]&&this._lines.drawAxisTicks(x,e[x].primalOffset,H,this.lineTickColor[x],this.lineTickWidth[x]*this.pixelRatio);this.lineTickMirror[x]&&this._lines.drawAxisTicks(x,
e[x].mirrorOffset,J,this.lineTickColor[x],this.lineTickWidth[x]*this.pixelRatio)}this._lines.unbind();this._text.bind(A,B,t,this.pixelRatio);for(x=0;3>x;++x){B=e[x].primalMinor;t=e[x].mirrorMinor;H=q(v,e[x].primalOffset);for(I=0;3>I;++I)this.lineTickEnable[x]&&(H[I]+=w*B[I]*Math.max(this.lineTickLength[I],0)/A[5*I]);J=[0,0,0];J[x]=1;if(this.tickEnable[x]){-3600===this.tickAngle[x]?(this.tickAngle[x]=0,this.tickAlign[x]="auto"):this.tickAlign[x]=-1;I=1;L=[this.tickAlign[x],.5,I];L[0]="auto"===L[0]?
0:parseInt(""+L[0]);var K=[0,0,0];C(x,B,t);for(I=0;3>I;++I)H[I]+=w*B[I]*this.tickPad[I]/A[5*I];this._text.drawTicks(x,this.tickSize[x],this.tickAngle[x],H,this.tickColor[x],J,K,L)}if(this.labelEnable[x]){I=0;K=[0,0,0];4<this.labels[x].length&&(D(x),I=1);L=[this.labelAlign[x],.5,I];L[0]="auto"===L[0]?0:parseInt(""+L[0]);for(I=0;3>I;++I)H[I]+=w*B[I]*this.labelPad[I]/A[5*I];H[x]+=.5*(G[0][x]+G[1][x]);this._text.drawLabel(x,this.labelSize[x],this.labelAngle[x],H,this.labelColor[x],[0,0,0],K,L)}}this._text.unbind()};
b.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":251,"./lib/cube.js":252,"./lib/lines.js":253,"./lib/text.js":255,"./lib/ticks.js":256}],251:[function(b,y,F){function q(a,f,d,l){this.gl=a;this.buffer=f;this.vao=d;this.shader=l}y.exports=function(a){for(var f=[],d=[],l=0,k=0;3>k;++k)for(var c=(k+1)%3,e=(k+2)%3,g=[0,0,0],m=[0,0,0],r=-1;1>=r;r+=2){d.push(l,l+2,l+1,l+1,l+2,l+3);g[k]=
r;m[k]=r;for(var u=-1;1>=u;u+=2){g[c]=u;for(var v=-1;1>=v;v+=2)g[e]=v,f.push(g[0],g[1],g[2],m[0],m[1],m[2]),l+=1}u=c;c=e;e=u}f=n(a,new Float32Array(f));d=n(a,new Uint16Array(d),a.ELEMENT_ARRAY_BUFFER);d=p(a,[{buffer:f,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:f,type:a.FLOAT,size:3,offset:12,stride:24}],d);l=h(a);l.attributes.position.location=0;l.attributes.normal.location=1;return new q(a,f,d,l)};var n=b("gl-buffer"),p=b("gl-vao"),h=b("./shaders").bg;b=q.prototype;b.draw=function(a,f,d,l,k,
c){for(var e=!1,g=0;3>g;++g)e=e||k[g];e&&(e=this.gl,e.enable(e.POLYGON_OFFSET_FILL),e.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:f,projection:d,bounds:l,enable:k,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),e.disable(e.POLYGON_OFFSET_FILL))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":254,"gl-buffer":258,"gl-vao":332}],252:[function(b,y,F){y.exports=function(r,u,v,w,D){n(a,u,r);
n(a,v,a);for(r=u=0;2>r;++r)for(l[2]=w[r][2],v=0;2>v;++v){l[1]=w[v][1];for(var C=0;2>C;++C){l[0]=w[C][0];for(var x=f[u],A=l,B=a,t=0;4>t;++t){x[t]=B[12+t];for(var G=0;3>G;++G)x[t]+=A[G]*B[4*G+t]}u+=1}}w=-1;for(r=0;8>r;++r){u=f[r][3];for(v=0;3>v;++v)d[r][v]=f[r][v]/u;D&&(d[r][2]*=-1);0>u&&(0>w?w=r:d[r][2]<d[w][2]&&(w=r))}if(0>w)for(r=w=0;3>r;++r){u=(r+2)%3;D=(r+1)%3;C=v=-1;for(x=0;2>x;++x)A=x<<r,B=A+(x<<u)+(1-x<<D),t=A+(1-x<<u)+(x<<D),0>h(d[A],d[B],d[t],k)||(x?v=1:C=1);if(!(0>v||0>C))for(x=0;2>x;++x){A=
x<<r;B=A+(x<<u)+(1-x<<D);t=A+(1-x<<u)+(x<<D);a:{A=[f[A],f[B],f[t],f[A+(1<<u)+(1<<D)]];for(t=0;t<c.length;++t)if(A=p.positive(A,c[t]),3>A.length){A=0;break a}t=A[0];B=t[0]/t[3];G=t[1]/t[3];var H=0;for(t=1;t+1<A.length;++t){var I=A[t],J=A[t+1];H+=Math.abs((I[0]/I[3]-B)*(J[1]/J[3]-G)-(I[1]/I[3]-G)*(J[0]/J[3]-B))}A=H}x?v=A:C=A}C>v&&(w|=1<<r)}u=7^w;x=-1;for(r=0;8>r;++r)r!==w&&r!==u&&(0>x?x=r:d[x][1]>d[r][1]&&(x=r));v=-1;for(r=0;3>r;++r)A=x^1<<r,A!==w&&A!==u&&(0>v&&(v=A),D=d[A],D[0]<d[v][0]&&(v=A));C=-1;
for(r=0;3>r;++r)A=x^1<<r,A!==w&&A!==u&&A!==v&&(0>C&&(C=A),D=d[A],D[0]>d[C][0]&&(C=A));D=e;D[0]=D[1]=D[2]=0;D[q.log2(v^x)]=x&v;D[q.log2(x^C)]=x&C;r=C^7;r===w||r===u?(r=v^7,D[q.log2(C^r)]=r&C):D[q.log2(v^r)]=r&v;D=g;for(r=0;3>r;++r)D[r]=w&1<<r?-1:1;return m};var q=b("bit-twiddle"),n=b("gl-mat4/multiply"),p=b("split-polygon"),h=b("robust-orientation"),a=Array(16),f=Array(8),d=Array(8),l=Array(3),k=[0,0,0];(function(){for(var r=0;8>r;++r)f[r]=[1,1,1,1],d[r]=[1,1,1]})();var c=[[0,0,1,0,0],[0,0,-1,1,0],
[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],e=[1,1,1],g=[0,0,0],m={cubeEdges:e,axis:g}},{"bit-twiddle":97,"gl-mat4/multiply":280,"robust-orientation":520,"split-polygon":538}],253:[function(b,y,F){function q(g){g[0]=g[1]=g[2]=0;return g}function n(g,m){g[0]=m[0];g[1]=m[1];g[2]=m[2];return g}function p(g,m,r,u,v,w,D,C){this.gl=g;this.vertBuffer=m;this.vao=r;this.shader=u;this.tickCount=v;this.tickOffset=w;this.gridCount=D;this.gridOffset=C}y.exports=function(g,m,r){var u=[];m=[0,0,0];var v=
[0,0,0],w=[0,0,0],D=[0,0,0];u.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;3>C;++C){for(var x=u.length/3|0,A=0;A<r[C].length;++A){var B=+r[C][A].x;u.push(B,0,1,B,1,1,B,0,-1,B,0,-1,B,1,1,B,1,-1)}B=u.length/3|0;m[C]=x;v[C]=B-x;x=u.length/3|0;for(A=0;A<r[C].length;++A)B=+r[C][A].x,u.push(B,0,1,B,1,1,B,0,-1,B,0,-1,B,1,1,B,1,-1);B=u.length/3|0;w[C]=x;D[C]=B-x}r=h(g,new Float32Array(u));u=a(g,[{buffer:r,type:g.FLOAT,size:3,stride:0,offset:0}]);C=f(g);C.attributes.position.location=0;return new p(g,
r,u,C,v,m,D,w)};var h=b("gl-buffer"),a=b("gl-vao"),f=b("./shaders").line,d=[0,0,0],l=[0,0,0],k=[0,0,0],c=[0,0,0],e=[1,1];b=p.prototype;b.bind=function(g,m,r){this.shader.bind();this.shader.uniforms.model=g;this.shader.uniforms.view=m;this.shader.uniforms.projection=r;e[0]=this.gl.drawingBufferWidth;e[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=e;this.vao.bind()};b.unbind=function(){this.vao.unbind()};b.drawAxisLine=function(g,m,r,u,v){var w=q(l);this.shader.uniforms.majorAxis=
l;w[g]=m[1][g]-m[0][g];this.shader.uniforms.minorAxis=w;r=n(c,r);r[g]+=m[0][g];this.shader.uniforms.offset=r;this.shader.uniforms.lineWidth=v;this.shader.uniforms.color=u;m=q(k);m[(g+2)%3]=1;this.shader.uniforms.screenAxis=m;this.vao.draw(this.gl.TRIANGLES,6);m=q(k);m[(g+1)%3]=1;this.shader.uniforms.screenAxis=m;this.vao.draw(this.gl.TRIANGLES,6)};b.drawAxisTicks=function(g,m,r,u,v){if(this.tickCount[g]){var w=q(d);w[g]=1;this.shader.uniforms.majorAxis=w;this.shader.uniforms.offset=m;this.shader.uniforms.minorAxis=
r;this.shader.uniforms.color=u;this.shader.uniforms.lineWidth=v;m=q(k);m[g]=1;this.shader.uniforms.screenAxis=m;this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g])}};b.drawGrid=function(g,m,r,u,v,w){if(this.gridCount[g]){var D=q(l);D[m]=r[1][m]-r[0][m];this.shader.uniforms.minorAxis=D;u=n(c,u);u[m]+=r[0][m];this.shader.uniforms.offset=u;m=q(d);m[g]=1;this.shader.uniforms.majorAxis=m;m=q(k);m[g]=1;this.shader.uniforms.screenAxis=m;this.shader.uniforms.lineWidth=w;this.shader.uniforms.color=
v;this.vao.draw(this.gl.TRIANGLES,this.gridCount[g],this.gridOffset[g])}};b.drawZero=function(g,m,r,u,v,w){var D=q(l);this.shader.uniforms.majorAxis=D;D[g]=r[1][g]-r[0][g];this.shader.uniforms.minorAxis=D;u=n(c,u);u[g]+=r[0][g];this.shader.uniforms.offset=u;g=q(k);g[m]=1;this.shader.uniforms.screenAxis=g;this.shader.uniforms.lineWidth=w;this.shader.uniforms.color=v;this.vao.draw(this.gl.TRIANGLES,6)};b.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":254,
"gl-buffer":258,"gl-vao":332}],254:[function(b,y,F){y=b("glslify");var q=b("gl-shader"),n=y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major \x3d position.x * majorAxis;\n  vec3 minor \x3d position.y * minorAxis;\n\n  vec3 vPosition \x3d major + minor + offset;\n  vec3 pPosition \x3d project(vPosition);\n  vec3 offset \x3d project(vPosition + screenAxis * position.z);\n\n  vec2 screen \x3d normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position \x3d vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
p=y(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);F.line=function(l){return q(l,n,p,null,[{name:"position",type:"vec3"}])};var h=y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A \x3d project(a);\n  vec3 B \x3d project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI \x3d 3.141592;\nconst float TWO_PI \x3d 2.0 * PI;\nconst float HALF_PI \x3d 0.5 * PI;\nconst float ONE_AND_HALF_PI \x3d 1.5 * PI;\n\nint option \x3d int(floor(alignOpt.x + 0.001));\nfloat hv_ratio \x3d       alignOpt.y;\nbool enableAlign \x3d    (alignOpt.z !\x3d 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a \x3c 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b \x3d positive_angle(a);\n  return ((b \x3e HALF_PI) \x26\x26 (b \x3c\x3d ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b \x3d positive_angle(a);\n\n  return\n    (b \x3c (      ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b \x3c (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b \x3d positive_angle(a);\n  float div \x3d TWO_PI / float(n);\n  float c \x3d roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option \x3e  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option \x3d\x3d 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option \x3d\x3d 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option \x3d\x3d 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option \x3d\x3d-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle \x3d (axis.x \x3d\x3d 0.0) \x26\x26\n                   (axis.y \x3d\x3d 0.0) \x26\x26\n                   (axis.z \x3d\x3d 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance \x3d position.z;\n  vec3 dataPosition \x3d axisDistance * axis + offset;\n\n  float beta \x3d angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle \x3d (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle \x3d computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle +\x3d (sin(axisAngle) \x3c 0.0) ? PI : 0.0;\n    clipAngle +\x3d (sin(clipAngle) \x3c 0.0) ? PI : 0.0;\n\n    flip \x3d (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) \x3e 0.0) ? 1.0 : 0.0;\n\n    beta +\x3d applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord \x3d position.xy * pixelScale;\n\n  mat2 planeXform \x3d scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset \x3d 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition \x3d project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition +\x3d vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position \x3d vec4(clipPosition, 1.0);\n}"]),
a=y(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);F.text=function(l){return q(l,h,a,null,[{name:"position",type:"vec3"}])};var f=y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis \x3d sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal \x3d signAxis * normal;\n\n  if(dot(realNormal, enable) \x3e 0.0) {\n    vec3 minRange \x3d min(bounds[0], bounds[1]);\n    vec3 maxRange \x3d max(bounds[0], bounds[1]);\n    vec3 nPosition \x3d mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position \x3d projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position \x3d vec4(0,0,0,0);\n  }\n\n  colorChannel \x3d abs(realNormal);\n}"]),
d=y(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor \x3d colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);F.bg=function(l){return q(l,f,d,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":312,glslify:413}],255:[function(b,y,F){(function(q){function n(k,c,e,g){this.gl=k;this.shader=c;this.buffer=e;this.vao=
g;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}y.exports=function(k,c,e,g,m,r){var u=p(k),v=h(k,[{buffer:u,size:3}]),w=f(k);w.attributes.position.location=0;k=new n(k,w,u,v);k.update(c,e,g,m,r);return k};var p=b("gl-buffer"),h=b("gl-vao"),a=b("vectorize-text"),f=b("./shaders").text;q=window||q.global||{};var d=q.__TEXT_CACHE||{};q.__TEXT_CACHE={};q=n.prototype;var l=[0,0];q.bind=function(k,c,e,g){this.vao.bind();this.shader.bind();var m=this.shader.uniforms;m.model=k;m.view=
c;m.projection=e;m.pixelScale=g;l[0]=this.gl.drawingBufferWidth;l[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=l};q.unbind=function(){this.vao.unbind()};q.update=function(k,c,e,g,m){function r(t,G,H,I,J,L){var E=d[H];E||(E=d[H]={});var K=E[G];if(!K){K=E;H={triangles:!0,font:H,textAlign:"center",textBaseline:"middle",lineSpacing:J,styletags:L};try{var N=a(G,H)}catch(O){console.warn('error vectorizing text:"'+G+'" error:',O),N={cells:[],positions:[]}}K=K[G]=N}G=(I||12)/12;I=K.positions;
K=K.cells;N=0;for(H=K.length;N<H;++N)for(J=K[N],L=2;0<=L;--L)E=I[J[L]],u.push(G*E[0],-G*E[1],t)}for(var u=[],v=[0,0,0],w=[0,0,0],D=[0,0,0],C=[0,0,0],x={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},A=0;3>A;++A){D[A]=u.length/3|0;r(.5*(k[0][A]+k[1][A]),c[A],e[A],12,1.25,x);C[A]=(u.length/3|0)-D[A];v[A]=u.length/3|0;for(var B=0;B<g[A].length;++B)g[A][B].text&&r(g[A][B].x,g[A][B].text,g[A][B].font||m,g[A][B].fontSize||12,1.25,x);w[A]=(u.length/3|0)-v[A]}this.buffer.update(u);this.tickOffset=
v;this.tickCount=w;this.labelOffset=D;this.labelCount=C};q.drawTicks=function(k,c,e,g,m,r,u,v){this.tickCount[k]&&(this.shader.uniforms.axis=r,this.shader.uniforms.color=m,this.shader.uniforms.angle=e,this.shader.uniforms.scale=c,this.shader.uniforms.offset=g,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.tickCount[k],this.tickOffset[k]))};q.drawLabel=function(k,c,e,g,m,r,u,v){this.labelCount[k]&&(this.shader.uniforms.axis=r,this.shader.uniforms.color=
m,this.shader.uniforms.angle=e,this.shader.uniforms.scale=c,this.shader.uniforms.offset=g,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.labelCount[k],this.labelOffset[k]))};q.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this,b("_process"))},{"./shaders":254,_process:500,"gl-buffer":258,"gl-vao":332,"vectorize-text":572}],256:[function(b,y,F){function q(n,p){var h=n+"",a=h.indexOf("."),f=0;0<=a&&(f=
h.length-a-1);h=Math.pow(10,f);n=Math.round(n*p*h);p=n+"";if(0<=p.indexOf("e"))return p;p=n/h;h=n%h;0>n?(p=-Math.ceil(p)|0,h=-h|0):(p=Math.floor(p)|0,h|=0);p=""+p;0>n&&(p="-"+p);if(f){for(h=""+h;h.length<f;)h="0"+h;return p+"."+h}return p}F.create=function(n,p){for(var h=[],a=0;3>a;++a){for(var f=[],d=0;d*p[a]<=n[1][a];++d)f.push({x:d*p[a],text:q(p[a],d)});for(d=-1;d*p[a]>=n[0][a];--d)f.push({x:d*p[a],text:q(p[a],d)});h.push(f)}return h};F.equal=function(n,p){for(var h=0;3>h;++h){if(n[h].length!==
p[h].length)return!1;for(var a=0;a<n[h].length;++a){var f=n[h][a],d=p[h][a];if(f.x!==d.x||f.text!==d.text||f.font!==d.font||f.fontColor!==d.fontColor||f.fontSize!==d.fontSize||f.dx!==d.dx||f.dy!==d.dy)return!1}}return!0}},{}],257:[function(b,y,F){function q(r,u,v){this.lo=r;this.hi=u;this.pixelsPerDataUnit=v}y.exports=function(r,u,v,w,D){var C=u.model||l,x=u.view||l,A=u.projection||l;u=u._ortho||!1;r=r.bounds;D=D||h(C,x,A,r,u);D=D.axis;a(k,x,C);a(k,A,k);C=g;for(x=0;3>x;++x)C[x].lo=Infinity,C[x].hi=
-Infinity,C[x].pixelsPerDataUnit=Infinity;A=n(f(k,k));f(k,k);for(var B=0;3>B;++B){var t=(B+1)%3,G=(B+2)%3,H=m;x=0;a:for(;2>x;++x){var I=[];if(0>D[B]!==!!x){H[B]=r[x][B];for(var J=0;2>J;++J){H[t]=r[J^x][t];for(var L=0;2>L;++L)H[G]=r[L^J^x][G],I.push(H.slice())}for(J=L=u?5:4;J===L;++J){if(0===I.length)continue a;I=p.positive(I,A[J])}for(J=0;J<I.length;++J){G=I[J];L=m;var E=k;for(var K=G,N=v,O=w,Q=0;3>Q;++Q){for(var P=c,T=e,V=0;3>V;++V)T[V]=P[V]=K[V];T[3]=P[3]=1;T[Q]+=1;d(T,T,E);0>T[3]&&(L[Q]=Infinity);
--P[Q];d(P,P,E);0>P[3]&&(L[Q]=Infinity);V=(P[0]/P[3]-T[0]/T[3])*N;P=(P[1]/P[3]-T[1]/T[3])*O;L[Q]=.25*Math.sqrt(V*V+P*P)}E=L;for(L=0;3>L;++L)C[L].lo=Math.min(C[L].lo,G[L]),C[L].hi=Math.max(C[L].hi,G[L]),L!==B&&(C[L].pixelsPerDataUnit=Math.min(C[L].pixelsPerDataUnit,Math.abs(E[L])))}}}}return C};var n=b("extract-frustum-planes"),p=b("split-polygon"),h=b("./lib/cube.js"),a=b("gl-mat4/multiply"),f=b("gl-mat4/transpose"),d=b("gl-vec4/transformMat4"),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),
k=new Float32Array(16),c=[0,0,0,1],e=[0,0,0,1],g=[new q(Infinity,-Infinity,Infinity),new q(Infinity,-Infinity,Infinity),new q(Infinity,-Infinity,Infinity)],m=[0,0,0]},{"./lib/cube.js":252,"extract-frustum-planes":240,"gl-mat4/multiply":280,"gl-mat4/transpose":289,"gl-vec4/transformMat4":403,"split-polygon":538}],258:[function(b,y,F){function q(l,k,c,e,g){this.gl=l;this.type=k;this.handle=c;this.length=e;this.usage=g}function n(l,k,c,e,g,m){var r=g.length*g.BYTES_PER_ELEMENT;if(0>m)return l.bufferData(k,
g,e),r;if(r+m>c)throw Error("gl-buffer: If resizing buffer, must not specify offset");l.bufferSubData(k,m,g);return c}function p(l,k){k=h.malloc(l.length,k);for(var c=l.length,e=0;e<c;++e)k[e]=l[e];return k}var h=b("typedarray-pool"),a=b("ndarray-ops"),f=b("ndarray"),d="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");b=q.prototype;b.bind=function(){this.gl.bindBuffer(this.type,this.handle)};b.unbind=function(){this.gl.bindBuffer(this.type,null)};b.dispose=function(){this.gl.deleteBuffer(this.handle)};
b.update=function(l,k){"number"!==typeof k&&(k=-1);this.bind();if("object"===typeof l&&"undefined"!==typeof l.shape){var c=l.dtype;0>d.indexOf(c)&&(c="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(c=gl.getExtension("OES_element_index_uint")&&"uint16"!==c?"uint32":"uint16");var e;if(e=c===l.dtype)a:{e=l.stride;for(var g=1,m=e.length-1;0<=m;--m){if(e[m]!==g){e=!1;break a}g*=l.shape[m]}e=!0}e?this.length=0===l.offset&&l.data.length===l.shape[0]?n(this.gl,this.type,this.length,this.usage,l.data,
k):n(this.gl,this.type,this.length,this.usage,l.data.subarray(l.offset,l.shape[0]),k):(c=h.malloc(l.size,c),e=f(c,l.shape),a.assign(e,l),this.length=0>k?n(this.gl,this.type,this.length,this.usage,c,k):n(this.gl,this.type,this.length,this.usage,c.subarray(0,l.size),k),h.free(c))}else if(Array.isArray(l))c=this.type===this.gl.ELEMENT_ARRAY_BUFFER?p(l,"uint16"):p(l,"float32"),this.length=0>k?n(this.gl,this.type,this.length,this.usage,c,k):n(this.gl,this.type,this.length,this.usage,c.subarray(0,l.length),
k),h.free(c);else if("object"===typeof l&&"number"===typeof l.length)this.length=n(this.gl,this.type,this.length,this.usage,l,k);else if("number"===typeof l||void 0===l){if(0<=k)throw Error("gl-buffer: Cannot specify offset when resizing buffer");l|=0;0>=l&&(l=1);this.gl.bufferData(this.type,l|0,this.usage);this.length=l}else throw Error("gl-buffer: Invalid data type");};y.exports=function(l,k,c,e){c=c||l.ARRAY_BUFFER;e=e||l.DYNAMIC_DRAW;if(c!==l.ARRAY_BUFFER&&c!==l.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");
if(e!==l.DYNAMIC_DRAW&&e!==l.STATIC_DRAW&&e!==l.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var g=l.createBuffer();l=new q(l,c,g,0,e);l.update(k);return l}},{ndarray:469,"ndarray-ops":464,"typedarray-pool":567}],259:[function(b,y,F){var q=b("gl-vec3");y.exports=function(p,h){var a=p.positions,f=p.vectors,d={positions:[],vertexIntensity:[],vertexIntensityBounds:p.vertexIntensityBounds,vectors:[],cells:[],coneOffset:p.coneOffset,
colormap:p.colormap};if(0===p.positions.length)return h&&(h[0]=[0,0,0],h[1]=[0,0,0]),d;for(var l=0,k=Infinity,c=-Infinity,e=Infinity,g=-Infinity,m=Infinity,r=-Infinity,u=null,v=null,w=[],D=Infinity,C=!1,x=0;x<a.length;x++){var A=a[x];k=Math.min(A[0],k);c=Math.max(A[0],c);e=Math.min(A[1],e);g=Math.max(A[1],g);m=Math.min(A[2],m);r=Math.max(A[2],r);var B=f[x];q.length(B)>l&&(l=q.length(B));x&&((C=2*q.distance(u,A)/(q.length(v)+q.length(B)))?(D=Math.min(D,C),C=!1):C=!0);C||(u=A,v=B);w.push(B)}x=[k,e,
m];A=[c,g,r];h&&(h[0]=x,h[1]=A);0===l&&(l=1);h=1/l;isFinite(D)||(D=1);d.vectorScale=D;x=p.coneSize||.5;p.absoluteConeSize&&(x=p.absoluteConeSize*h);d.coneScale=x;for(p=x=0;x<a.length;x++)for(A=a[x],D=A[0],l=A[1],A=A[2],c=w[x],g=q.length(c)*h,r=0;8>r;r++)d.positions.push([D,l,A,p++]),d.positions.push([D,l,A,p++]),d.positions.push([D,l,A,p++]),d.positions.push([D,l,A,p++]),d.positions.push([D,l,A,p++]),d.positions.push([D,l,A,p++]),d.vectors.push(c),d.vectors.push(c),d.vectors.push(c),d.vectors.push(c),
d.vectors.push(c),d.vectors.push(c),d.vertexIntensity.push(g,g,g),d.vertexIntensity.push(g,g,g),f=d.positions.length,d.cells.push([f-6,f-5,f-4],[f-3,f-2,f-1]);return d};var n=b("./lib/shaders");y.exports.createMesh=b("./create_mesh");y.exports.createConeMesh=function(p,h){return y.exports.createMesh(p,h,{shaders:n,traceType:"cone"})}},{"./create_mesh":260,"./lib/shaders":261,"gl-vec3":351}],260:[function(b,y,F){function q(e,g,m,r,u,v,w,D,C,x,A){this.gl=e;this.pixelRatio=1;this.cells=[];this.positions=
[];this.intensity=[];this.texture=g;this.dirty=!0;this.triShader=m;this.pickShader=r;this.trianglePositions=u;this.triangleVectors=v;this.triangleColors=D;this.triangleUVs=C;this.triangleIds=w;this.triangleVAO=x;this.triangleCount=0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=
.5;this.fresnel=1.5;this.opacity=1;this.traceType=A;this.tubeScale=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=c;this._resolution=[1,1]}var n=b("gl-shader"),p=b("gl-buffer"),h=b("gl-vao"),a=b("gl-texture2d"),f=b("gl-mat4/multiply"),d=b("gl-mat4/invert"),l=b("ndarray"),k=b("colormap"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=q.prototype;b.isOpaque=function(){return 1<=this.opacity};b.isTransparent=function(){return 1>this.opacity};b.pickSlots=1;b.setPickBase=
function(e){this.pickId=e};b.update=function(e){e=e||{};var g=this.gl;this.dirty=!0;"lightPosition"in e&&(this.lightPosition=e.lightPosition);"opacity"in e&&(this.opacity=e.opacity);"ambient"in e&&(this.ambientLight=e.ambient);"diffuse"in e&&(this.diffuseLight=e.diffuse);"specular"in e&&(this.specularLight=e.specular);"roughness"in e&&(this.roughness=e.roughness);"fresnel"in e&&(this.fresnel=e.fresnel);void 0!==e.tubeScale&&(this.tubeScale=e.tubeScale);void 0!==e.vectorScale&&(this.vectorScale=e.vectorScale);
void 0!==e.coneScale&&(this.coneScale=e.coneScale);void 0!==e.coneOffset&&(this.coneOffset=e.coneOffset);if(e.colormap){this.texture.shape=[256,256];this.texture.minFilter=g.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=g.LINEAR;g=this.texture;var m=g.setPixels;var r=k({colormap:e.colormap,nshades:256,format:"rgba"});for(var u=new Uint8Array(1024),v=0;256>v;++v){for(var w=r[v],D=0;3>D;++D)u[4*v+D]=w[D];u[4*v+3]=255*w[3]}r=l(u,[256,256,4],[4,0,1]);m.call(g,r);this.texture.generateMipmap()}g=e.cells;
m=e.positions;r=e.vectors;if(m&&g&&r){u=[];v=[];w=[];D=[];var C=[];this.cells=g;this.positions=m;this.vectors=r;var x=e.meshColor||[1,1,1,1],A=e.vertexIntensity,B=Infinity,t=-Infinity;if(A)if(e.vertexIntensityBounds)B=+e.vertexIntensityBounds[0],t=+e.vertexIntensityBounds[1];else for(e=0;e<A.length;++e){var G=A[e];B=Math.min(B,G);t=Math.max(t,G)}else for(e=0;e<m.length;++e)G=m[e][2],B=Math.min(B,G),t=Math.max(t,G);if(A)this.intensity=A;else{e=m.length;G=Array(e);for(var H=0;H<e;++H)G[H]=m[H][2];this.intensity=
G}this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(e=0;e<m.length;++e){var I=m[e];for(G=0;3>G;++G)!isNaN(I[G])&&isFinite(I[G])&&(this.bounds[0][G]=Math.min(this.bounds[0][G],I[G]),this.bounds[1][G]=Math.max(this.bounds[1][G],I[G]))}e=H=0;a:for(;e<g.length;++e){var J=g[e];switch(J.length){case 3:for(G=0;3>G;++G){var L=J[G];I=m[L];for(L=0;3>L;++L)if(isNaN(I[L])||!isFinite(I[L]))continue a}for(G=0;3>G;++G){L=J[2-G];I=m[L];u.push(I[0],I[1],I[2],I[3]);var E=r[L];v.push(E[0],
E[1],E[2],E[3]||0);E=x;3===E.length?w.push(E[0],E[1],E[2],1):w.push(E[0],E[1],E[2],E[3]);I=A?[(A[L]-B)/(t-B),0]:[(I[2]-B)/(t-B),0];D.push(I[0],I[1]);C.push(e)}H+=1}}this.triangleCount=H;this.trianglePositions.update(u);this.triangleVectors.update(v);this.triangleColors.update(w);this.triangleUVs.update(D);this.triangleIds.update(new Uint32Array(C))}};b.drawTransparent=b.draw=function(e){e=e||{};var g=this.gl,m=e.model||c,r=e.view||c,u=e.projection||c,v=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(e=0;3>e;++e)v[0][e]=
Math.max(v[0][e],this.clipBounds[0][e]),v[1][e]=Math.min(v[1][e],this.clipBounds[1][e]);m={model:m,view:r,projection:u,inverseModel:c.slice(),clipBounds:v,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};m.inverseModel=d(m.inverseModel,m.model);
g.disable(g.CULL_FACE);this.texture.bind(0);r=Array(16);f(r,m.view,m.model);f(r,m.projection,r);d(r,r);for(e=0;3>e;++e)m.eyePosition[e]=r[12+e]/r[15];u=r[15];for(e=0;3>e;++e)u+=this.lightPosition[e]*r[4*e+3];for(e=0;3>e;++e){v=r[12+e];for(var w=0;3>w;++w)v+=r[4*w+e]*this.lightPosition[w];m.lightPosition[e]=v/u}0<this.triangleCount&&(e=this.triShader,e.bind(),e.uniforms=m,this.triangleVAO.bind(),g.drawArrays(g.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.drawPick=function(e){e=e||
{};var g=this.gl,m=e.model||c,r=e.view||c;e=e.projection||c;for(var u=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],v=0;3>v;++v)u[0][v]=Math.max(u[0][v],this.clipBounds[0][v]),u[1][v]=Math.min(u[1][v],this.clipBounds[1][v]);this._model=[].slice.call(m);this._view=[].slice.call(r);this._projection=[].slice.call(e);this._resolution=[g.drawingBufferWidth,g.drawingBufferHeight];m={model:m,view:r,projection:e,clipBounds:u,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,
pickId:this.pickId/255};r=this.pickShader;r.bind();r.uniforms=m;0<this.triangleCount&&(this.triangleVAO.bind(),g.drawArrays(g.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.pick=function(e){if(!e||e.id!==this.pickId)return null;e=e.value[0]+256*e.value[1]+65536*e.value[2];var g=this.cells[e],m=this.positions[g[1]].slice(0,3);m={position:m,dataCoordinate:m,index:Math.floor(g[1]/48)};"cone"===this.traceType?m.index=Math.floor(g[1]/48):"streamtube"===this.traceType&&(m.intensity=this.intensity[g[1]],
m.velocity=this.vectors[g[1]].slice(0,3),m.divergence=this.vectors[g[1]][3],m.index=e);return m};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleIds.dispose()};y.exports=function(e,g,m){var r=m.shaders;1===arguments.length&&(g=e,e=g.gl);var u=n(e,r.meshShader.vertex,r.meshShader.fragment,null,
r.meshShader.attributes);u.attributes.position.location=0;u.attributes.color.location=2;u.attributes.uv.location=3;u.attributes.vector.location=4;r=n(e,r.pickShader.vertex,r.pickShader.fragment,null,r.pickShader.attributes);r.attributes.position.location=0;r.attributes.id.location=1;r.attributes.vector.location=4;var v=a(e,l(new Uint8Array([255,255,255,255]),[1,1,4]));v.generateMipmap();v.minFilter=e.LINEAR_MIPMAP_LINEAR;v.magFilter=e.LINEAR;var w=p(e),D=p(e),C=p(e),x=p(e),A=p(e),B=h(e,[{buffer:w,
type:e.FLOAT,size:4},{buffer:A,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:C,type:e.FLOAT,size:4},{buffer:x,type:e.FLOAT,size:2},{buffer:D,type:e.FLOAT,size:4}]);u=new q(e,v,u,r,w,D,A,C,x,B,m.traceType||"cone");u.update(g);return u}},{colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-shader":312,"gl-texture2d":327,"gl-vao":332,ndarray:469}],261:[function(b,y,F){var q=b("glslify");b=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * conePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(conePosition, 1.0);\n  vec4 t_position  \x3d view * conePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d conePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
y=q(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var n=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position \x3d projection * view * conePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
q=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
F.meshShader={vertex:b,fragment:y,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};F.pickShader={vertex:n,fragment:q,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:413}],262:[function(b,y,F){y.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",
516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",
2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",
3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",
6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",
32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",
32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",
33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",
34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",
34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",
35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",
35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",
36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",
36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",
37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],263:[function(b,y,F){var q=b("./1.0/numbers");y.exports=function(n){return q[n]}},{"./1.0/numbers":262}],264:[function(b,y,F){function q(k,c,e,g){this.gl=k;this.shader=g;this.buffer=c;this.vao=e;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=[10,10,10];this.lineCount=
[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function n(k,c){for(var e=0;3>e;++e)k[0][e]=Math.min(k[0][e],c[e]),k[1][e]=Math.max(k[1][e],c[e])}function p(k,c,e,g){g=l[g];for(var m=0;m<g.length;++m){var r=g[m];k.push(c[0],c[1],c[2],e[0],e[1],e[2],e[3],r[0],r[1],r[2])}return g.length}y.exports=function(k){var c=k.gl,e=h(c),g=a(c,[{buffer:e,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:e,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:e,type:c.FLOAT,size:3,offset:28,stride:40}]),
m=f(c);m.attributes.position.location=0;m.attributes.color.location=1;m.attributes.offset.location=2;c=new q(c,e,g,m);c.update(k);return c};var h=b("gl-buffer"),a=b("gl-vao"),f=b("./shaders/index"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=q.prototype;b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.drawTransparent=b.draw=function(k){var c=this.gl,e=this.shader.uniforms;this.shader.bind();var g=e.view=k.view||d,m=e.projection=k.projection||d;e.model=k.model||
d;e.clipBounds=this.clipBounds;e.opacity=this.opacity;k=(k._ortho?2:1)*this.pixelRatio*(m[3]*g[12]+m[7]*g[13]+m[11]*g[14]+m[15]*g[15])/c.drawingBufferHeight;this.vao.bind();for(g=0;3>g;++g)c.lineWidth(this.lineWidth[g]*this.pixelRatio),e.capSize=this.capSize[g]*k,this.lineCount[g]&&c.drawArrays(c.LINES,this.lineOffset[g],this.lineCount[g]);this.vao.unbind()};var l=function(){for(var k=Array(3),c=0;3>c;++c){for(var e=[],g=1;2>=g;++g)for(var m=-1;1>=m;m+=2){var r=[0,0,0];r[(g+c)%3]=m;e.push(r)}k[c]=
e}return k}();b.update=function(k){k=k||{};"lineWidth"in k&&(this.lineWidth=k.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in k&&(this.capSize=k.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in k&&(this.opacity=+k.opacity,1>this.opacity&&(this.hasAlpha=!0));var c=k.color||[[0,0,0],[0,0,0],[0,0,0]],e=k.position;k=k.error;Array.isArray(c[0])||(c=[c,c,c]);if(e&&
k){var g=[],m=e.length,r=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var u=0;3>u;++u){this.lineOffset[u]=r;var v=0;a:for(;v<m;++v){for(var w=e[v],D=0;3>D;++D)if(isNaN(w[D])||!isFinite(w[D]))continue a;D=k[v];var C=c[u];Array.isArray(C[0])&&(C=c[v]);3===C.length?C=[C[0],C[1],C[2],1]:4===C.length&&(C=[C[0],C[1],C[2],C[3]],!this.hasAlpha&&1>C[3]&&(this.hasAlpha=!0));if(!isNaN(D[0][u])&&!isNaN(D[1][u])){if(0>D[0][u]){var x=w.slice();x[u]+=D[0][u];
g.push(w[0],w[1],w[2],C[0],C[1],C[2],C[3],0,0,0,x[0],x[1],x[2],C[0],C[1],C[2],C[3],0,0,0);n(this.bounds,x);r+=2+p(g,x,C,u)}0<D[1][u]&&(x=w.slice(),x[u]+=D[1][u],g.push(w[0],w[1],w[2],C[0],C[1],C[2],C[3],0,0,0,x[0],x[1],x[2],C[0],C[1],C[2],C[3],0,0,0),n(this.bounds,x),r+=2+p(g,x,C,u))}}this.lineCount[u]=r-this.lineOffset[u]}this.buffer.update(g)}};b.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":265,"gl-buffer":258,"gl-vao":332}],265:[function(b,
y,F){F=b("glslify");var q=b("gl-shader"),n=F(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  \x3d model * vec4(position, 1.0);\n  worldPosition       \x3d (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         \x3d projection * view * worldPosition;\n  fragColor           \x3d color;\n  fragPosition        \x3d position;\n}"]),
p=F(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  gl_FragColor \x3d opacity * fragColor;\n}"]);
y.exports=function(h){return q(h,n,p,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":312,glslify:413}],266:[function(b,y,F){function q(u){var v=u.getParameter(u.FRAMEBUFFER_BINDING),w=u.getParameter(u.RENDERBUFFER_BINDING);u=u.getParameter(u.TEXTURE_BINDING_2D);return[v,w,u]}function n(u,v){u.bindFramebuffer(u.FRAMEBUFFER,v[0]);u.bindRenderbuffer(u.RENDERBUFFER,v[1]);u.bindTexture(u.TEXTURE_2D,v[2])}function p(u){switch(u){case e:throw Error("gl-fbo: Framebuffer unsupported");
case g:throw Error("gl-fbo: Framebuffer incomplete attachment");case m:throw Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function h(u,v,w,D,C,x){if(!D)return null;v=k(u,v,w,C,D);v.magFilter=u.NEAREST;v.minFilter=u.NEAREST;v.mipSamples=1;v.bind();u.framebufferTexture2D(u.FRAMEBUFFER,x,u.TEXTURE_2D,v.handle,0);return v}function a(u,v,w,D,C){var x=
u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,x);u.renderbufferStorage(u.RENDERBUFFER,D,v,w);u.framebufferRenderbuffer(u.FRAMEBUFFER,C,u.RENDERBUFFER,x);return x}function f(u){var v=q(u.gl),w=u.gl,D=u.handle=w.createFramebuffer(),C=u._shape[0],x=u._shape[1],A=u.color.length,B=u._ext,t=u._useStencil,G=u._useDepth,H=u._colorType;w.bindFramebuffer(w.FRAMEBUFFER,D);for(D=0;D<A;++D)u.color[D]=h(w,C,x,H,w.RGBA,w.COLOR_ATTACHMENT0+D);0===A?(u._color_rb=a(w,C,x,w.RGBA4,w.COLOR_ATTACHMENT0),B&&
B.drawBuffersWEBGL(c[0])):1<A&&B.drawBuffersWEBGL(c[A]);(A=w.getExtension("WEBGL_depth_texture"))?t?u.depth=h(w,C,x,A.UNSIGNED_INT_24_8_WEBGL,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):G&&(u.depth=h(w,C,x,w.UNSIGNED_SHORT,w.DEPTH_COMPONENT,w.DEPTH_ATTACHMENT)):G&&t?u._depth_rb=a(w,C,x,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):G?u._depth_rb=a(w,C,x,w.DEPTH_COMPONENT16,w.DEPTH_ATTACHMENT):t&&(u._depth_rb=a(w,C,x,w.STENCIL_INDEX,w.STENCIL_ATTACHMENT));C=w.checkFramebufferStatus(w.FRAMEBUFFER);if(C!==
w.FRAMEBUFFER_COMPLETE){u._destroyed=!0;w.bindFramebuffer(w.FRAMEBUFFER,null);w.deleteFramebuffer(u.handle);u.handle=null;u.depth&&(u.depth.dispose(),u.depth=null);u._depth_rb&&(w.deleteRenderbuffer(u._depth_rb),u._depth_rb=null);for(D=0;D<u.color.length;++D)u.color[D].dispose(),u.color[D]=null;u._color_rb&&(w.deleteRenderbuffer(u._color_rb),u._color_rb=null);n(w,v);p(C)}n(w,v)}function d(u,v,w,D,C,x,A,B){this.gl=u;this._shape=[v|0,w|0];this._destroyed=!1;this._ext=B;this.color=Array(C);for(u=0;u<
C;++u)this.color[u]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=D;this._useDepth=x;this._useStencil=A;var t=this;v=[v|0,w|0];Object.defineProperties(v,{0:{get:function(){return t._shape[0]},set:function(G){return t.width=G}},1:{get:function(){return t._shape[1]},set:function(G){return t.height=G}}});this._shapeVector=v;f(this)}function l(u,v,w){if(u._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(u._shape[0]!==v||u._shape[1]!==w){var D=u.gl,C=D.getParameter(D.MAX_RENDERBUFFER_SIZE);
if(0>v||v>C||0>w||w>C)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");u._shape[0]=v;u._shape[1]=w;v=q(D);for(w=0;w<u.color.length;++w)u.color[w].shape=u._shape;u._color_rb&&(D.bindRenderbuffer(D.RENDERBUFFER,u._color_rb),D.renderbufferStorage(D.RENDERBUFFER,D.RGBA4,u._shape[0],u._shape[1]));u.depth&&(u.depth.shape=u._shape);u._depth_rb&&(D.bindRenderbuffer(D.RENDERBUFFER,u._depth_rb),u._useDepth&&u._useStencil?D.renderbufferStorage(D.RENDERBUFFER,D.DEPTH_STENCIL,u._shape[0],u._shape[1]):
u._useDepth?D.renderbufferStorage(D.RENDERBUFFER,D.DEPTH_COMPONENT16,u._shape[0],u._shape[1]):u._useStencil&&D.renderbufferStorage(D.RENDERBUFFER,D.STENCIL_INDEX,u._shape[0],u._shape[1]));D.bindFramebuffer(D.FRAMEBUFFER,u.handle);w=D.checkFramebufferStatus(D.FRAMEBUFFER);w!==D.FRAMEBUFFER_COMPLETE&&(u.dispose(),n(D,v),p(w));n(D,v)}}var k=b("gl-texture2d");y.exports=function(u,v,w,D){e||(e=u.FRAMEBUFFER_UNSUPPORTED,g=u.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,m=u.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=u.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var C=u.getExtension("WEBGL_draw_buffers");if(!c&&C){var x=u.getParameter(C.MAX_COLOR_ATTACHMENTS_WEBGL);c=Array(x+1);for(var A=0;A<=x;++A){for(var B=Array(x),t=0;t<A;++t)B[t]=u.COLOR_ATTACHMENT0+t;for(t=A;t<x;++t)B[t]=u.NONE;c[A]=B}}Array.isArray(v)&&(D=w,w=v[1]|0,v=v[0]|0);if("number"!==typeof v)throw Error("gl-fbo: Missing shape parameter");x=u.getParameter(u.MAX_RENDERBUFFER_SIZE);if(0>v||v>x||0>w||w>x)throw Error("gl-fbo: Parameters are too large for FBO");D=D||{};x=1;if("color"in D){x=Math.max(D.color|
0,0);if(0>x)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<x){if(!C)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(x>u.getParameter(C.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+x+" draw buffers");}}A=u.UNSIGNED_BYTE;B=u.getExtension("OES_texture_float");if(D.float&&0<x){if(!B)throw Error("gl-fbo: Context does not support floating point textures");A=u.FLOAT}else D.preferFloat&&0<x&&B&&(A=u.FLOAT);B=!0;"depth"in D&&(B=
!!D.depth);t=!1;"stencil"in D&&(t=!!D.stencil);return new d(u,v,w,A,x,B,t,C)};var c=null,e,g,m,r;b=d.prototype;Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(u){Array.isArray(u)||(u=[u|0,u|0]);if(2!==u.length)throw Error("gl-fbo: Shape vector must be length 2");var v=u[0]|0;u=u[1]|0;l(this,v,u);return[v,u]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(u){u|=0;l(this,u,this._shape[1]);return u},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(u){u|=0;l(this,this._shape[0],u);return u},enumerable:!1}});b.bind=function(){if(!this._destroyed){var u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,this.handle);u.viewport(0,0,this._shape[0],this._shape[1])}};b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var u=this.gl;u.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(u.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var v=0;v<this.color.length;++v)this.color[v].dispose(),this.color[v]=null;this._color_rb&&(u.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":327}],267:[function(b,y,F){var q=b("sprintf-js").sprintf,n=b("gl-constants/lookup"),p=b("glsl-shader-name"),h=b("add-line-numbers");y.exports=function(a,f,d){var l=p(f)||"of unknown name (see npm glsl-shader-name)",k="unknown type";void 0!==d&&(k=d===n.FRAGMENT_SHADER?"fragment":"vertex");d=q("Error compiling %s shader %s:\n",
k,l);l=q("%s%s",d,a);var c=a.split("\n");a={};for(k=0;k<c.length;k++){var e=c[k];if(""!==e&&"\x00"!==e){var g=parseInt(e.split(":")[2]);if(isNaN(g))throw Error(q("Could not parse error: %s",e));a[g]=e}}f=h(f).split("\n");for(k=0;k<f.length;k++)if(a[k+3]||a[k+2]||a[k+1])d+=f[k]+"\n",a[k+1]&&(c=a[k+1],c=c.substr(c.split(":",3).join(":").length+1).trim(),d+=q("^^^ %s\n\n",c));return{long:d.trim(),short:l.trim()}}},{"add-line-numbers":66,"gl-constants/lookup":263,"glsl-shader-name":405,"sprintf-js":539}],
268:[function(b,y,F){function q(k,c,e,g,m,r,u){this.plot=k;this.shader=c;this.pickShader=e;this.positionBuffer=g;this.weightBuffer=m;this.colorBuffer=r;this.idBuffer=u;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}y.exports=function(k,c){var e=k.gl,g=a(e,d.vertex,d.fragment),m=a(e,d.pickVertex,d.pickFragment),r=f(e),u=f(e),v=f(e);e=f(e);g=new q(k,g,m,r,u,v,e);g.update(c);k.addObject(g);return g};var n=b("binary-search-bounds"),p=
b("iota-array"),h=b("typedarray-pool"),a=b("gl-shader"),f=b("gl-buffer"),d=b("./lib/shaders");b=q.prototype;var l=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=function(){var k=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,e=this.shader,g=this.bounds,m=this.numVertices;if(!(0>=m)){var r=c.gl;c=c.dataBox;var u=g[3]-g[1],v=c[2]-c[0],w=c[3]-c[1];k[0]=2*(g[2]-g[0])/v;k[4]=2*u/w;k[6]=2*(g[0]-c[0])/v-1;k[7]=2*(g[1]-c[1])/w-1;e.bind();g=e.uniforms;g.viewTransform=k;g.shape=this.shape;e=e.attributes;this.positionBuffer.bind();
e.position.pointer();this.weightBuffer.bind();e.weight.pointer(r.UNSIGNED_BYTE,!1);this.colorBuffer.bind();e.color.pointer(r.UNSIGNED_BYTE,!0);r.drawArrays(r.TRIANGLES,0,m)}}}();b.drawPick=function(){var k=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(e){var g=this.plot,m=this.pickShader,r=this.bounds,u=this.numVertices;if(!(0>=u)){var v=g.gl;g=g.dataBox;var w=r[3]-r[1],D=g[2]-g[0],C=g[3]-g[1];k[0]=2*(r[2]-r[0])/D;k[4]=2*w/C;k[6]=2*(r[0]-g[0])/D-1;k[7]=2*(r[1]-g[1])/C-1;for(r=0;4>r;++r)c[r]=e>>
8*r&255;this.pickOffset=e;m.bind();r=m.uniforms;r.viewTransform=k;r.pickOffset=c;r.shape=this.shape;m=m.attributes;this.positionBuffer.bind();m.position.pointer();this.weightBuffer.bind();m.weight.pointer(v.UNSIGNED_BYTE,!1);this.idBuffer.bind();m.pickId.pointer(v.UNSIGNED_BYTE,!1);v.drawArrays(v.TRIANGLES,0,u);return e+this.shape[0]*this.shape[1]}}}();b.pick=function(k,c,e){k=this.pickOffset;c=this.shape[0]*this.shape[1];if(e<k||e>=k+c)return null;e-=k;return{object:this,pointId:e,dataCoord:[this.xData[e%
this.shape[0]],this.yData[e/this.shape[0]|0]]}};b.update=function(k){k=k||{};var c=k.shape||[0,0],e=k.x||p(c[0]),g=k.y||p(c[1]),m=k.z||new Float32Array(c[0]*c[1]),r=!1!==k.zsmooth;this.xData=e;this.yData=g;var u=k.colorLevels||[0];k=k.colorValues||[0,0,0,1];var v=u.length,w=this.bounds;if(r){var D=w[0]=e[0];var C=w[1]=g[0];var x=w[2]=e[e.length-1];w=w[3]=g[g.length-1]}else D=w[0]=e[0]+(e[1]-e[0])/2,C=w[1]=g[0]+(g[1]-g[0])/2,x=w[2]=e[e.length-1]+(e[e.length-1]-e[e.length-2])/2,w=w[3]=g[g.length-1]+
(g[g.length-1]-g[g.length-2])/2;x=1/(x-D);w=1/(w-C);var A=c[0];c=c[1];this.shape=[A,c];var B=(r?(A-1)*(c-1):A*c)*(l.length>>>1);this.numVertices=B;var t=h.mallocUint8(4*B),G=h.mallocFloat32(2*B),H=h.mallocUint8(2*B);B=h.mallocUint32(B);for(var I=0,J=r?A-1:A,L=r?c-1:c,E=0;E<L;++E){if(r){var K=w*(g[E]-C);var N=w*(g[E+1]-C)}else K=E<c-1?w*(g[E]-(g[E+1]-g[E])/2-C):w*(g[E]-(g[E]-g[E-1])/2-C),N=E<c-1?w*(g[E]+(g[E+1]-g[E])/2-C):w*(g[E]+(g[E]-g[E-1])/2-C);for(var O=0;O<J;++O){if(r){var Q=x*(e[O]-D);var P=
x*(e[O+1]-D)}else Q=O<A-1?x*(e[O]-(e[O+1]-e[O])/2-D):x*(e[O]-(e[O]-e[O-1])/2-D),P=O<A-1?x*(e[O]+(e[O+1]-e[O])/2-D):x*(e[O]+(e[O]-e[O-1])/2-D);for(var T=0;T<l.length;T+=2){var V=l[T],aa=l[T+1],ba=m[r?(E+aa)*A+(O+V):E*A+O],Y=n.le(u,ba);if(0>Y){Y=k[0];ba=k[1];var ea=k[2];var da=k[3]}else if(Y===v-1)Y=k[4*v-4],ba=k[4*v-3],ea=k[4*v-2],da=k[4*v-1];else{da=(ba-u[Y])/(u[Y+1]-u[Y]);var ca=1-da,la=4*Y,pa=4*(Y+1);Y=ca*k[la]+da*k[pa];ba=ca*k[la+1]+da*k[pa+1];ea=ca*k[la+2]+da*k[pa+2];da=ca*k[la+3]+da*k[pa+3]}t[4*
I]=255*Y;t[4*I+1]=255*ba;t[4*I+2]=255*ea;t[4*I+3]=255*da;G[2*I]=.5*Q+.5*P;G[2*I+1]=.5*K+.5*N;H[2*I]=V;H[2*I+1]=aa;B[I]=E*A+O;I+=1}}}this.positionBuffer.update(G);this.weightBuffer.update(H);this.colorBuffer.update(t);this.idBuffer.update(B);h.free(G);h.free(t);h.free(H);h.free(B)};b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},{"./lib/shaders":269,
"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312,"iota-array":437,"typedarray-pool":567}],269:[function(b,y,F){b=b("glslify");y.exports={fragment:b(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor \x3d vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor \x3d color;\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d \x3d step(.5, vWeight);\n  vec4 id \x3d fragId + pickOffset;\n  id.x +\x3d d.x + d.y*shape.x;\n\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor \x3d id/255.;\n}\n"]),
pickVertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight \x3d weight;\n\n  fragId \x3d pickId;\n\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:413}],270:[function(b,y,F){y=b("glslify");
var q=b("gl-shader"),n=y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint \x3d project(position);\n  vec4 endPoint   \x3d project(nextPosition);\n\n  vec2 A \x3d startPoint.xy / startPoint.w;\n  vec2 B \x3d   endPoint.xy /   endPoint.w;\n\n  float clipAngle \x3d atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset \x3d 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position \x3d vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition \x3d position;\n  pixelArcLength \x3d arcLength;\n  fragColor \x3d color;\n}\n"]),
p=y(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  float dashWeight \x3d texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight \x3c 0.5) {\n    discard;\n  }\n  gl_FragColor \x3d fragColor * opacity;\n}\n"]),
h=y(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av \x3d abs(v);\n\n  //Handle special cases\n  if(av \x3c FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v \x3e FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v \x3c -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c \x3d vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e \x3d floor(log2(av));\n  float m \x3d av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] \x3d floor(128.0 * m);\n  m -\x3d c[1] / 128.0;\n  c[2] \x3d floor(32768.0 * m);\n  m -\x3d c[2] / 32768.0;\n  c[3] \x3d floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias \x3d e + 127.0;\n  c[0] \x3d floor(ebias / 2.0);\n  ebias -\x3d c[0] * 2.0;\n  c[1] +\x3d floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] +\x3d 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor \x3d vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),
a=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];F.createShader=function(f){return q(f,n,p,null,a)};F.createPickShader=function(f){return q(f,n,h,null,a)}},{"gl-shader":312,glslify:413}],271:[function(b,y,F){function q(r){for(var u=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],v=0;3>v;++v)u[0][v]=Math.max(r[0][v],u[0][v]),u[1][v]=Math.min(r[1][v],u[1][v]);return u}function n(r,u,v,w){this.arcLength=r;
this.position=u;this.index=v;this.dataCoordinate=w}function p(r,u,v,w,D,C){this.gl=r;this.shader=u;this.pickShader=v;this.buffer=w;this.vao=D;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=C;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}y.exports=function(r){var u=r.gl||r.scene&&r.scene.gl,v=e(u);v.attributes.position.location=
0;v.attributes.nextPosition.location=1;v.attributes.arcLength.location=2;v.attributes.lineWidth.location=3;v.attributes.color.location=4;var w=g(u);w.attributes.position.location=0;w.attributes.nextPosition.location=1;w.attributes.arcLength.location=2;w.attributes.lineWidth.location=3;w.attributes.color.location=4;for(var D=h(u),C=a(u,[{buffer:D,size:3,offset:0,stride:48},{buffer:D,size:3,offset:12,stride:48},{buffer:D,size:1,offset:24,stride:48},{buffer:D,size:1,offset:28,stride:48},{buffer:D,size:4,
offset:32,stride:48}]),x=c(Array(1024),[256,1,4]),A=0;1024>A;++A)x.data[A]=255;x=f(u,x);x.wrap=u.REPEAT;u=new p(u,v,w,D,C,x);u.update(r);return u};var h=b("gl-buffer"),a=b("gl-vao"),f=b("gl-texture2d"),d=new Uint8Array(4),l=new Float32Array(d.buffer),k=b("binary-search-bounds"),c=b("ndarray");b=b("./lib/shaders");var e=b.createShader,g=b.createPickShader,m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=p.prototype;b.isTransparent=function(){return this.hasAlpha};b.isOpaque=function(){return!this.hasAlpha};b.pickSlots=
1;b.setPickBase=function(r){this.pickId=r};b.drawTransparent=b.draw=function(r){if(this.vertexCount){var u=this.gl,v=this.shader,w=this.vao;v.bind();v.uniforms={model:r.model||m,view:r.view||m,projection:r.projection||m,clipBounds:q(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[u.drawingBufferWidth,u.drawingBufferHeight],pixelRatio:this.pixelRatio};w.bind();w.draw(u.TRIANGLE_STRIP,this.vertexCount);
w.unbind()}};b.drawPick=function(r){if(this.vertexCount){var u=this.gl,v=this.pickShader,w=this.vao;v.bind();v.uniforms={model:r.model||m,view:r.view||m,projection:r.projection||m,pickId:this.pickId,clipBounds:q(this.clipBounds),screenShape:[u.drawingBufferWidth,u.drawingBufferHeight],pixelRatio:this.pixelRatio};w.bind();w.draw(u.TRIANGLE_STRIP,this.vertexCount);w.unbind()}};b.update=function(r){var u;this.dirty=!0;var v=!!r.connectGaps;"dashScale"in r&&(this.dashScale=r.dashScale);this.hasAlpha=
!1;"opacity"in r&&(this.opacity=+r.opacity,1>this.opacity&&(this.hasAlpha=!0));var w=[],D=[],C=[],x=0,A=0,B=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],t=r.position||r.positions;if(t){var G=r.color||r.colors||[0,0,0,1],H=r.lineWidth||1,I=!1;var J=1;a:for(;J<t.length;++J){var L=t[J-1],E=t[J];D.push(x);C.push(L.slice());for(u=0;3>u;++u){if(isNaN(L[u])||isNaN(E[u])||!isFinite(L[u])||!isFinite(E[u])){if(!v&&0<w.length){for(I=0;24>I;++I)w.push(w[w.length-12]);A+=2;I=!0}continue a}B[0][u]=
Math.min(B[0][u],L[u],E[u]);B[1][u]=Math.max(B[1][u],L[u],E[u])}if(Array.isArray(G[0])){var K=G.length>J-1?G[J-1]:0<G.length?G[G.length-1]:[0,0,0,1];var N=G.length>J?G[J]:0<G.length?G[G.length-1]:[0,0,0,1]}else K=N=G;3===K.length&&(K=[K[0],K[1],K[2],1]);3===N.length&&(N=[N[0],N[1],N[2],1]);!this.hasAlpha&&1>K[3]&&(this.hasAlpha=!0);var O=Array.isArray(H)?H.length>J-1?H[J-1]:0<H.length?H[H.length-1]:[0,0,0,1]:H;var Q=x;u=x;for(var P=x=0;3>P;++P){var T=L[P]-E[P];x+=T*T}x=u+Math.sqrt(x);if(I){for(u=
0;2>u;++u)w.push(L[0],L[1],L[2],E[0],E[1],E[2],Q,O,K[0],K[1],K[2],K[3]);A+=2;I=!1}w.push(L[0],L[1],L[2],E[0],E[1],E[2],Q,O,K[0],K[1],K[2],K[3],L[0],L[1],L[2],E[0],E[1],E[2],Q,-O,K[0],K[1],K[2],K[3],E[0],E[1],E[2],L[0],L[1],L[2],x,-O,N[0],N[1],N[2],N[3],E[0],E[1],E[2],L[0],L[1],L[2],x,O,N[0],N[1],N[2],N[3]);A+=4}}this.buffer.update(w);D.push(x);C.push(t[t.length-1].slice());this.bounds=B;this.vertexCount=A;this.points=C;this.arcLength=D;if("dashes"in r){r=r.dashes.slice();r.unshift(0);for(J=1;J<r.length;++J)r[J]=
r[J-1]+r[J];v=c(Array(1024),[256,1,4]);for(J=0;256>J;++J){for(u=0;4>u;++u)v.set(J,0,u,0);k.le(r,r[r.length-1]*J/255)&1?v.set(J,0,0,0):v.set(J,0,0,255)}this.texture.setPixels(v)}};b.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};b.pick=function(r){if(!r||r.id!==this.pickId)return null;var u=r.value[0];var v=r.value[1];r=r.value[2];d[0]=0;d[1]=r;d[2]=v;d[3]=u;u=l[0];r=k.le(this.arcLength,u);if(0>r)return null;if(r===this.arcLength.length-1)return new n(this.arcLength[this.arcLength.length-
1],this.points[this.points.length-1].slice(),r);var w=this.points[r],D=this.points[Math.min(r+1,this.points.length-1)],C=(u-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),x=1-C;v=[0,0,0];for(var A=0;3>A;++A)v[A]=x*w[A]+C*D[A];r=Math.min(.5>C?r:r+1,this.points.length-1);return new n(u,v,r,this.points[r])}},{"./lib/shaders":270,"binary-search-bounds":96,"gl-buffer":258,"gl-texture2d":327,"gl-vao":332,ndarray:469}],272:[function(b,y,F){y.exports=function(q){var n=new Float32Array(16);n[0]=
q[0];n[1]=q[1];n[2]=q[2];n[3]=q[3];n[4]=q[4];n[5]=q[5];n[6]=q[6];n[7]=q[7];n[8]=q[8];n[9]=q[9];n[10]=q[10];n[11]=q[11];n[12]=q[12];n[13]=q[13];n[14]=q[14];n[15]=q[15];return n}},{}],273:[function(b,y,F){y.exports=function(){var q=new Float32Array(16);q[0]=1;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=1;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=1;q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],274:[function(b,y,F){y.exports=function(q){var n=q[0],p=q[1],h=q[2],a=q[3],f=q[4],d=q[5],l=q[6],k=q[7],c=q[8],e=q[9],
g=q[10],m=q[11],r=q[12],u=q[13],v=q[14];q=q[15];return(n*d-p*f)*(g*q-m*v)-(n*l-h*f)*(e*q-m*u)+(n*k-a*f)*(e*v-g*u)+(p*l-h*d)*(c*q-m*r)-(p*k-a*d)*(c*v-g*r)+(h*k-a*l)*(c*u-e*r)}},{}],275:[function(b,y,F){y.exports=function(q,n){var p=n[0],h=n[1],a=n[2];n=n[3];var f=p+p,d=h+h,l=a+a;p*=f;var k=h*f;h*=d;var c=a*f,e=a*d;a*=l;f*=n;d*=n;n*=l;q[0]=1-h-a;q[1]=k+n;q[2]=c-d;q[3]=0;q[4]=k-n;q[5]=1-p-a;q[6]=e+f;q[7]=0;q[8]=c+d;q[9]=e-f;q[10]=1-p-h;q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],276:[function(b,
y,F){y.exports=function(q,n,p){var h=n[0],a=n[1],f=n[2],d=n[3],l=h+h,k=a+a,c=f+f;n=h*l;var e=h*k;h*=c;var g=a*k;a*=c;f*=c;l*=d;k*=d;d*=c;q[0]=1-(g+f);q[1]=e+d;q[2]=h-k;q[3]=0;q[4]=e-d;q[5]=1-(n+f);q[6]=a+l;q[7]=0;q[8]=h+k;q[9]=a-l;q[10]=1-(n+g);q[11]=0;q[12]=p[0];q[13]=p[1];q[14]=p[2];q[15]=1;return q}},{}],277:[function(b,y,F){y.exports=function(q){q[0]=1;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=1;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=1;q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],278:[function(b,
y,F){y.exports=function(q,n){var p=n[0],h=n[1],a=n[2],f=n[3],d=n[4],l=n[5],k=n[6],c=n[7],e=n[8],g=n[9],m=n[10],r=n[11],u=n[12],v=n[13],w=n[14];n=n[15];var D=p*l-h*d,C=p*k-a*d,x=p*c-f*d,A=h*k-a*l,B=h*c-f*l,t=a*c-f*k,G=e*v-g*u,H=e*w-m*u,I=e*n-r*u,J=g*w-m*v,L=g*n-r*v,E=m*n-r*w,K=D*E-C*L+x*J+A*I-B*H+t*G;if(!K)return null;K=1/K;q[0]=(l*E-k*L+c*J)*K;q[1]=(a*L-h*E-f*J)*K;q[2]=(v*t-w*B+n*A)*K;q[3]=(m*B-g*t-r*A)*K;q[4]=(k*I-d*E-c*H)*K;q[5]=(p*E-a*I+f*H)*K;q[6]=(w*x-u*t-n*C)*K;q[7]=(e*t-m*x+r*C)*K;q[8]=(d*
L-l*I+c*G)*K;q[9]=(h*I-p*L-f*G)*K;q[10]=(u*B-v*x+n*D)*K;q[11]=(g*x-e*B-r*D)*K;q[12]=(l*H-d*J-k*G)*K;q[13]=(p*J-h*H+a*G)*K;q[14]=(v*C-u*A-w*D)*K;q[15]=(e*A-g*C+m*D)*K;return q}},{}],279:[function(b,y,F){var q=b("./identity");y.exports=function(n,p,h,a){var f=p[0],d=p[1];p=p[2];var l=a[0];var k=a[1];var c=a[2];var e=h[0];a=h[1];var g=h[2];if(1E-6>Math.abs(f-e)&&1E-6>Math.abs(d-a)&&1E-6>Math.abs(p-g))return q(n);h=f-e;a=d-a;e=p-g;var m=1/Math.sqrt(h*h+a*a+e*e);h*=m;a*=m;e*=m;g=k*e-c*a;c=c*h-l*e;l=l*
a-k*h;(m=Math.sqrt(g*g+c*c+l*l))?(m=1/m,g*=m,c*=m,l*=m):l=c=g=0;k=a*l-e*c;var r=e*g-h*l;var u=h*c-a*g;(m=Math.sqrt(k*k+r*r+u*u))?(m=1/m,k*=m,r*=m,u*=m):u=r=k=0;n[0]=g;n[1]=k;n[2]=h;n[3]=0;n[4]=c;n[5]=r;n[6]=a;n[7]=0;n[8]=l;n[9]=u;n[10]=e;n[11]=0;n[12]=-(g*f+c*d+l*p);n[13]=-(k*f+r*d+u*p);n[14]=-(h*f+a*d+e*p);n[15]=1;return n}},{"./identity":277}],280:[function(b,y,F){y.exports=function(q,n,p){var h=n[0],a=n[1],f=n[2],d=n[3],l=n[4],k=n[5],c=n[6],e=n[7],g=n[8],m=n[9],r=n[10],u=n[11],v=n[12],w=n[13],
D=n[14];n=n[15];var C=p[0],x=p[1],A=p[2],B=p[3];q[0]=C*h+x*l+A*g+B*v;q[1]=C*a+x*k+A*m+B*w;q[2]=C*f+x*c+A*r+B*D;q[3]=C*d+x*e+A*u+B*n;C=p[4];x=p[5];A=p[6];B=p[7];q[4]=C*h+x*l+A*g+B*v;q[5]=C*a+x*k+A*m+B*w;q[6]=C*f+x*c+A*r+B*D;q[7]=C*d+x*e+A*u+B*n;C=p[8];x=p[9];A=p[10];B=p[11];q[8]=C*h+x*l+A*g+B*v;q[9]=C*a+x*k+A*m+B*w;q[10]=C*f+x*c+A*r+B*D;q[11]=C*d+x*e+A*u+B*n;C=p[12];x=p[13];A=p[14];B=p[15];q[12]=C*h+x*l+A*g+B*v;q[13]=C*a+x*k+A*m+B*w;q[14]=C*f+x*c+A*r+B*D;q[15]=C*d+x*e+A*u+B*n;return q}},{}],281:[function(b,
y,F){y.exports=function(q,n,p,h,a,f,d){var l=1/(n-p),k=1/(h-a),c=1/(f-d);q[0]=-2*l;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=-2*k;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=2*c;q[11]=0;q[12]=(n+p)*l;q[13]=(a+h)*k;q[14]=(d+f)*c;q[15]=1;return q}},{}],282:[function(b,y,F){y.exports=function(q,n,p,h,a){n=1/Math.tan(n/2);var f=1/(h-a);q[0]=n/p;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=n;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=(a+h)*f;q[11]=-1;q[12]=0;q[13]=0;q[14]=2*a*h*f;q[15]=0;return q}},{}],283:[function(b,y,F){y.exports=function(q,
n,p,h){var a=h[0],f=h[1];h=h[2];var d=Math.sqrt(a*a+f*f+h*h);if(1E-6>Math.abs(d))return null;d=1/d;a*=d;f*=d;h*=d;var l=Math.sin(p);var k=Math.cos(p);var c=1-k;p=n[0];d=n[1];var e=n[2];var g=n[3];var m=n[4];var r=n[5];var u=n[6];var v=n[7];var w=n[8];var D=n[9];var C=n[10];var x=n[11];var A=a*a*c+k;var B=f*a*c+h*l;var t=h*a*c-f*l;var G=a*f*c-h*l;var H=f*f*c+k;var I=h*f*c+a*l;var J=a*h*c+f*l;a=f*h*c-a*l;f=h*h*c+k;q[0]=p*A+m*B+w*t;q[1]=d*A+r*B+D*t;q[2]=e*A+u*B+C*t;q[3]=g*A+v*B+x*t;q[4]=p*G+m*H+w*I;
q[5]=d*G+r*H+D*I;q[6]=e*G+u*H+C*I;q[7]=g*G+v*H+x*I;q[8]=p*J+m*a+w*f;q[9]=d*J+r*a+D*f;q[10]=e*J+u*a+C*f;q[11]=g*J+v*a+x*f;n!==q&&(q[12]=n[12],q[13]=n[13],q[14]=n[14],q[15]=n[15]);return q}},{}],284:[function(b,y,F){y.exports=function(q,n,p){var h=Math.sin(p);p=Math.cos(p);var a=n[4],f=n[5],d=n[6],l=n[7],k=n[8],c=n[9],e=n[10],g=n[11];n!==q&&(q[0]=n[0],q[1]=n[1],q[2]=n[2],q[3]=n[3],q[12]=n[12],q[13]=n[13],q[14]=n[14],q[15]=n[15]);q[4]=a*p+k*h;q[5]=f*p+c*h;q[6]=d*p+e*h;q[7]=l*p+g*h;q[8]=k*p-a*h;q[9]=
c*p-f*h;q[10]=e*p-d*h;q[11]=g*p-l*h;return q}},{}],285:[function(b,y,F){y.exports=function(q,n,p){var h=Math.sin(p);p=Math.cos(p);var a=n[0],f=n[1],d=n[2],l=n[3],k=n[8],c=n[9],e=n[10],g=n[11];n!==q&&(q[4]=n[4],q[5]=n[5],q[6]=n[6],q[7]=n[7],q[12]=n[12],q[13]=n[13],q[14]=n[14],q[15]=n[15]);q[0]=a*p-k*h;q[1]=f*p-c*h;q[2]=d*p-e*h;q[3]=l*p-g*h;q[8]=a*h+k*p;q[9]=f*h+c*p;q[10]=d*h+e*p;q[11]=l*h+g*p;return q}},{}],286:[function(b,y,F){y.exports=function(q,n,p){var h=Math.sin(p);p=Math.cos(p);var a=n[0],f=
n[1],d=n[2],l=n[3],k=n[4],c=n[5],e=n[6],g=n[7];n!==q&&(q[8]=n[8],q[9]=n[9],q[10]=n[10],q[11]=n[11],q[12]=n[12],q[13]=n[13],q[14]=n[14],q[15]=n[15]);q[0]=a*p+k*h;q[1]=f*p+c*h;q[2]=d*p+e*h;q[3]=l*p+g*h;q[4]=k*p-a*h;q[5]=c*p-f*h;q[6]=e*p-d*h;q[7]=g*p-l*h;return q}},{}],287:[function(b,y,F){y.exports=function(q,n,p){var h=p[0],a=p[1];p=p[2];q[0]=n[0]*h;q[1]=n[1]*h;q[2]=n[2]*h;q[3]=n[3]*h;q[4]=n[4]*a;q[5]=n[5]*a;q[6]=n[6]*a;q[7]=n[7]*a;q[8]=n[8]*p;q[9]=n[9]*p;q[10]=n[10]*p;q[11]=n[11]*p;q[12]=n[12];q[13]=
n[13];q[14]=n[14];q[15]=n[15];return q}},{}],288:[function(b,y,F){y.exports=function(q,n,p){var h=p[0],a=p[1];p=p[2];if(n===q)q[12]=n[0]*h+n[4]*a+n[8]*p+n[12],q[13]=n[1]*h+n[5]*a+n[9]*p+n[13],q[14]=n[2]*h+n[6]*a+n[10]*p+n[14],q[15]=n[3]*h+n[7]*a+n[11]*p+n[15];else{var f=n[0];var d=n[1];var l=n[2];var k=n[3];var c=n[4];var e=n[5];var g=n[6];var m=n[7];var r=n[8];var u=n[9];var v=n[10];var w=n[11];q[0]=f;q[1]=d;q[2]=l;q[3]=k;q[4]=c;q[5]=e;q[6]=g;q[7]=m;q[8]=r;q[9]=u;q[10]=v;q[11]=w;q[12]=f*h+c*a+r*
p+n[12];q[13]=d*h+e*a+u*p+n[13];q[14]=l*h+g*a+v*p+n[14];q[15]=k*h+m*a+w*p+n[15]}return q}},{}],289:[function(b,y,F){y.exports=function(q,n){if(q===n){var p=n[1],h=n[2],a=n[3],f=n[6],d=n[7],l=n[11];q[1]=n[4];q[2]=n[8];q[3]=n[12];q[4]=p;q[6]=n[9];q[7]=n[13];q[8]=h;q[9]=f;q[11]=n[14];q[12]=a;q[13]=d;q[14]=l}else q[0]=n[0],q[1]=n[4],q[2]=n[8],q[3]=n[12],q[4]=n[1],q[5]=n[5],q[6]=n[9],q[7]=n[13],q[8]=n[2],q[9]=n[6],q[10]=n[10],q[11]=n[14],q[12]=n[3],q[13]=n[7],q[14]=n[11],q[15]=n[15];return q}},{}],290:[function(b,
y,F){function q(h,a){for(var f=[0,0,0,0],d=0;4>d;++d)for(var l=0;4>l;++l)f[l]+=h[4*d+l]*a[d];return f}var n=b("barycentric"),p=b("polytope-closest-point/lib/closest_point_2d.js");y.exports=function(h,a,f,d,l,k){if(1===h.length)return[0,h[0].slice()];for(var c=Array(h.length),e=0;e<h.length;++e){var g=e,m=h[e],r=k;m=q(l,q(d,q(f,[m[0],m[1],m[2],1])));for(var u=0;3>u;++u)m[u]/=m[3];c[g]=[.5*r[0]*(1+m[0]),.5*r[1]*(1-m[1])]}f=0;d=Infinity;for(e=0;e<c.length;++e){for(k=l=0;2>k;++k)l+=Math.pow(c[e][k]-a[k],
2);l<d&&(d=l,f=e)}if(2===c.length){for(l=d=e=0;2>l;++l)e+=Math.pow(a[l]-c[0][l],2),d+=Math.pow(a[l]-c[1][l],2);e=Math.sqrt(e);d=Math.sqrt(d);a=1E-6>e+d?[1,0]:[d/(e+d),e/(d+e)]}else 3===c.length?(e=[0,0],p(c[0],c[1],c[2],a,e),a=n(c,e)):a=[];for(e=c=0;3>e;++e){if(-.001>a[e]||1.0001<a[e])return null;c+=a[e]}if(.001<Math.abs(c-1))return null;c=[0,0,0];for(e=0;e<h.length;++e)for(d=h[e],l=a[e],k=0;3>k;++k)c[k]+=l*d[k];return[f,c,a]}},{barycentric:78,"polytope-closest-point/lib/closest_point_2d.js":499}],
291:[function(b,y,F){var q=b("glslify");b=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      \x3d project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * vec4(position , 1.0);\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal  \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          \x3d color;\n  f_data           \x3d position;\n  f_uv             \x3d uv;\n}\n"]);
y=q(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann \x3d require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular \x3d max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * f_color.a;\n}\n"]);
var n=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_color \x3d color;\n  f_data  \x3d position;\n  f_uv    \x3d uv;\n}"]),p=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),
h=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize \x3d pointSize;\n  f_color \x3d color;\n  f_uv \x3d uv;\n}"]),
a=q(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR \x3d gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) \x3e 0.25) {\n    discard;\n  }\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),f=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_id        \x3d id;\n  f_position  \x3d position;\n}"]),
d=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]),
l=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  \x3d projection * view * model * vec4(position, 1.0);\n    gl_PointSize \x3d pointSize;\n  }\n  f_id         \x3d id;\n  f_position   \x3d position;\n}"]),
k=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n}"]);q=q(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor \x3d vec4(contourColor, 1.0);\n}\n"]);F.meshShader={vertex:b,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
F.wireShader={vertex:n,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};F.pointShader={vertex:h,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};F.pickShader={vertex:f,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};F.pointPickShader={vertex:l,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};F.contourShader={vertex:k,fragment:q,attributes:[{name:"position",type:"vec3"}]}},{glslify:413}],292:[function(b,y,F){function q(B,t,G,H,I,J,L,E,K,N,O,Q,P,T,V,aa,ba,Y,ea,da,ca,la,pa,qa,oa,ka,ra){this.gl=B;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=t;this.dirty=!0;this.triShader=G;this.lineShader=H;this.pointShader=I;this.pickShader=J;this.pointPickShader=L;this.contourShader=E;this.trianglePositions=K;this.triangleColors=O;this.triangleNormals=
P;this.triangleUVs=Q;this.triangleIds=N;this.triangleVAO=T;this.triangleCount=0;this.lineWidth=1;this.edgePositions=V;this.edgeColors=ba;this.edgeUVs=Y;this.edgeIds=aa;this.edgeVAO=ea;this.edgeCount=0;this.pointPositions=da;this.pointColors=la;this.pointUVs=pa;this.pointSizes=qa;this.pointIds=ca;this.pointVAO=oa;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=ka;this.contourVAO=ra;this.contourCount=0;this.contourColor=[0,0,0];this.pickVertex=this.contourEnable=!0;this.pickId=1;this.bounds=
[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.opacityscale=this.hasAlpha=!1;this._projection=this._view=this._model=A;this._resolution=[1,1]}function n(B,t){if(!t||!t.length)return 1;for(var G=0;G<t.length&&!(2>t.length);++G){if(t[G][0]===B)return t[G][1];if(t[G][0]>
B&&0<G)return B=(t[G][0]-B)/(t[G][0]-t[G-1][0]),t[G][1]*(1-B)+B*t[G-1][1]}return 1}var p=b("gl-shader"),h=b("gl-buffer"),a=b("gl-vao"),f=b("gl-texture2d"),d=b("normals"),l=b("gl-mat4/multiply"),k=b("gl-mat4/invert"),c=b("ndarray"),e=b("colormap"),g=b("simplicial-complex-contour"),m=b("typedarray-pool");F=b("./lib/shaders");var r=b("./lib/closest-point"),u=F.meshShader,v=F.wireShader,w=F.pointShader,D=F.pickShader,C=F.pointPickShader,x=F.contourShader,A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=q.prototype;
b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.pickSlots=1;b.setPickBase=function(B){this.pickId=B};b.highlight=function(B){if(B&&this.contourEnable){var t=g(this.cells,this.intensity,B.intensity);B=t.cells;var G=t.vertexIds;t=t.vertexWeights;for(var H=B.length,I=m.mallocFloat32(6*H),J=0,L=0;L<H;++L)for(var E=B[L],K=0;2>K;++K){var N=E[0];2===E.length&&(N=E[K]);var O=t[N],Q=1-O,P=this.positions[G[N][0]];N=this.positions[G[N][1]];for(var T=0;3>T;++T)I[J++]=
O*P[T]+Q*N[T]}this.contourCount=J/3|0;this.contourPositions.update(I.subarray(0,J));m.free(I)}else this.contourCount=0};b.update=function(B){B=B||{};var t=this.gl;this.dirty=!0;"contourEnable"in B&&(this.contourEnable=B.contourEnable);"contourColor"in B&&(this.contourColor=B.contourColor);"lineWidth"in B&&(this.lineWidth=B.lineWidth);"lightPosition"in B&&(this.lightPosition=B.lightPosition);this.hasAlpha=!1;"opacity"in B&&(this.opacity=B.opacity,1>this.opacity&&(this.hasAlpha=!0));"opacityscale"in
B&&(this.opacityscale=B.opacityscale,this.hasAlpha=!0);"ambient"in B&&(this.ambientLight=B.ambient);"diffuse"in B&&(this.diffuseLight=B.diffuse);"specular"in B&&(this.specularLight=B.specular);"roughness"in B&&(this.roughness=B.roughness);"fresnel"in B&&(this.fresnel=B.fresnel);if(B.texture)this.texture.dispose(),this.texture=f(t,B.texture);else if(B.colormap){this.texture.shape=[256,256];this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=t.LINEAR;t=this.texture;var G=t.setPixels;
var H=this.opacityscale;for(var I=e({colormap:B.colormap,nshades:256,format:"rgba"}),J=new Uint8Array(1024),L=0;256>L;++L){for(var E=I[L],K=0;3>K;++K)J[4*L+K]=E[K];J[4*L+3]=H?255*n(L/255,H):255*E[3]}H=c(J,[256,256,4],[4,0,1]);G.call(t,H);this.texture.generateMipmap()}t=B.cells;if((G=B.positions)&&t){H=[];I=[];J=[];L=[];E=[];K=[];var N=[],O=[],Q=[],P=[],T=[],V=[],aa=[],ba=[];this.cells=t;this.positions=G;var Y=B.vertexNormals,ea=B.cellNormals,da=void 0===B.vertexNormalsEpsilon?1E-6:B.vertexNormalsEpsilon,
ca=void 0===B.faceNormalsEpsilon?1E-6:B.faceNormalsEpsilon;B.useFacetNormals&&!ea&&(ea=d.faceNormals(t,G,ca));ea||Y||(Y=d.vertexNormals(t,G,da));da=B.vertexColors;ca=B.cellColors;var la=B.meshColor||[1,1,1,1],pa=B.vertexUVs,qa=B.vertexIntensity,oa=B.cellUVs,ka=B.cellIntensity,ra=Infinity,ha=-Infinity;if(!pa&&!oa)if(qa)if(B.vertexIntensityBounds)ra=+B.vertexIntensityBounds[0],ha=+B.vertexIntensityBounds[1];else for(var ma=0;ma<qa.length;++ma){var wa=qa[ma];ra=Math.min(ra,wa);ha=Math.max(ha,wa)}else if(ka)if(B.cellIntensityBounds)ra=
+B.cellIntensityBounds[0],ha=+B.cellIntensityBounds[1];else for(ma=0;ma<ka.length;++ma)wa=ka[ma],ra=Math.min(ra,wa),ha=Math.max(ha,wa);else for(ma=0;ma<G.length;++ma)wa=G[ma][2],ra=Math.min(ra,wa),ha=Math.max(ha,wa);if(qa)this.intensity=qa;else if(ka)this.intensity=ka;else{ma=G.length;wa=Array(ma);for(var na=0;na<ma;++na)wa[na]=G[na][2];this.intensity=wa}this.pickVertex=!(ka||ca);wa=B.pointSizes;B=B.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(ma=0;ma<
G.length;++ma){var ya=G[ma];for(na=0;3>na;++na)!isNaN(ya[na])&&isFinite(ya[na])&&(this.bounds[0][na]=Math.min(this.bounds[0][na],ya[na]),this.bounds[1][na]=Math.max(this.bounds[1][na],ya[na]))}var Fa=0,Ha=0,eb=0;ma=0;a:for(;ma<t.length;++ma){var hb=t[ma];switch(hb.length){case 1:var ob=hb[0];ya=G[ob];for(na=0;3>na;++na)if(isNaN(ya[na])||!isFinite(ya[na]))continue a;P.push(ya[0],ya[1],ya[2]);var ib=da?da[ob]:ca?ca[ma]:la;this.opacityscale&&qa?I.push(ib[0],ib[1],ib[2],this.opacity*n((qa[ob]-ra)/(ha-
ra),this.opacityscale)):3===ib.length?T.push(ib[0],ib[1],ib[2],this.opacity):(T.push(ib[0],ib[1],ib[2],ib[3]*this.opacity),1>ib[3]&&(this.hasAlpha=!0));ya=pa?pa[ob]:qa?[(qa[ob]-ra)/(ha-ra),0]:oa?oa[ma]:ka?[(ka[ma]-ra)/(ha-ra),0]:[(ya[2]-ra)/(ha-ra),0];V.push(ya[0],ya[1]);wa?aa.push(wa[ob]):aa.push(B);ba.push(ma);eb+=1;break;case 2:for(na=0;2>na;++na)for(ob=hb[na],ya=G[ob],ob=0;3>ob;++ob)if(isNaN(ya[ob])||!isFinite(ya[ob]))continue a;for(na=0;2>na;++na)ob=hb[na],ya=G[ob],K.push(ya[0],ya[1],ya[2]),
ib=da?da[ob]:ca?ca[ma]:la,this.opacityscale&&qa?I.push(ib[0],ib[1],ib[2],this.opacity*n((qa[ob]-ra)/(ha-ra),this.opacityscale)):3===ib.length?N.push(ib[0],ib[1],ib[2],this.opacity):(N.push(ib[0],ib[1],ib[2],ib[3]*this.opacity),1>ib[3]&&(this.hasAlpha=!0)),ya=pa?pa[ob]:qa?[(qa[ob]-ra)/(ha-ra),0]:oa?oa[ma]:ka?[(ka[ma]-ra)/(ha-ra),0]:[(ya[2]-ra)/(ha-ra),0],O.push(ya[0],ya[1]),Q.push(ma);Ha+=1;break;case 3:for(na=0;3>na;++na)for(ob=hb[na],ya=G[ob],ob=0;3>ob;++ob)if(isNaN(ya[ob])||!isFinite(ya[ob]))continue a;
for(na=0;3>na;++na)ob=hb[2-na],ya=G[ob],H.push(ya[0],ya[1],ya[2]),(ib=da?da[ob]:ca?ca[ma]:la)?this.opacityscale&&qa?I.push(ib[0],ib[1],ib[2],this.opacity*n((qa[ob]-ra)/(ha-ra),this.opacityscale)):3===ib.length?I.push(ib[0],ib[1],ib[2],this.opacity):(I.push(ib[0],ib[1],ib[2],ib[3]*this.opacity),1>ib[3]&&(this.hasAlpha=!0)):I.push(.5,.5,.5,1),ya=pa?pa[ob]:qa?[(qa[ob]-ra)/(ha-ra),0]:oa?oa[ma]:ka?[(ka[ma]-ra)/(ha-ra),0]:[(ya[2]-ra)/(ha-ra),0],L.push(ya[0],ya[1]),ya=Y?Y[ob]:ea[ma],J.push(ya[0],ya[1],ya[2]),
E.push(ma);Fa+=1}}this.pointCount=eb;this.edgeCount=Ha;this.triangleCount=Fa;this.pointPositions.update(P);this.pointColors.update(T);this.pointUVs.update(V);this.pointSizes.update(aa);this.pointIds.update(new Uint32Array(ba));this.edgePositions.update(K);this.edgeColors.update(N);this.edgeUVs.update(O);this.edgeIds.update(new Uint32Array(Q));this.trianglePositions.update(H);this.triangleColors.update(I);this.triangleUVs.update(L);this.triangleNormals.update(J);this.triangleIds.update(new Uint32Array(E))}};
b.drawTransparent=b.draw=function(B){B=B||{};var t=this.gl,G=B.model||A,H=B.view||A,I=B.projection||A,J=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(B=0;3>B;++B)J[0][B]=Math.max(J[0][B],this.clipBounds[0][B]),J[1][B]=Math.min(J[1][B],this.clipBounds[1][B]);G={model:G,view:H,projection:I,inverseModel:A.slice(),clipBounds:J,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,
texture:0};G.inverseModel=k(G.inverseModel,G.model);t.disable(t.CULL_FACE);this.texture.bind(0);H=Array(16);l(H,G.view,G.model);l(H,G.projection,H);k(H,H);for(B=0;3>B;++B)G.eyePosition[B]=H[12+B]/H[15];I=H[15];for(B=0;3>B;++B)I+=this.lightPosition[B]*H[4*B+3];for(B=0;3>B;++B){J=H[12+B];for(var L=0;3>L;++L)J+=H[4*L+B]*this.lightPosition[L];G.lightPosition[B]=J/I}0<this.triangleCount&&(B=this.triShader,B.bind(),B.uniforms=G,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());
0<this.edgeCount&&0<this.lineWidth&&(B=this.lineShader,B.bind(),B.uniforms=G,this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(B=this.pointShader,B.bind(),B.uniforms=G,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(B=this.contourShader,B.bind(),B.uniforms=G,this.contourVAO.bind(),t.drawArrays(t.LINES,
0,this.contourCount),this.contourVAO.unbind())};b.drawPick=function(B){B=B||{};var t=this.gl,G=B.model||A,H=B.view||A;B=B.projection||A;for(var I=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],J=0;3>J;++J)I[0][J]=Math.max(I[0][J],this.clipBounds[0][J]),I[1][J]=Math.min(I[1][J],this.clipBounds[1][J]);this._model=[].slice.call(G);this._view=[].slice.call(H);this._projection=[].slice.call(B);this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];G={model:G,view:H,projection:B,clipBounds:I,pickId:this.pickId/
255};H=this.pickShader;H.bind();H.uniforms=G;0<this.triangleCount&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth*this.pixelRatio),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(H=this.pointPickShader,H.bind(),H.uniforms=G,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind())};b.pick=function(B){if(!B||B.id!==this.pickId)return null;
for(var t=B.value[0]+256*B.value[1]+65536*B.value[2],G=this.cells[t],H=this.positions,I=Array(G.length),J=0;J<G.length;++J)I[J]=H[G[J]];J=B.coord[0];B=B.coord[1];if(!this.pickVertex){I=this.positions[G[0]];H=this.positions[G[1]];var L=this.positions[G[2]];return{_cellCenter:!0,position:[J,B],index:t,cell:G,cellId:t,intensity:this.intensity[t],dataCoordinate:[(I[0]+H[0]+L[0])/3,(I[1]+H[1]+L[1])/3,(I[2]+H[2]+L[2])/3]}}I=r(I,[J*this.pixelRatio,this._resolution[1]-B*this.pixelRatio],this._model,this._view,
this._projection,this._resolution);if(!I)return null;B=I[2];for(J=H=0;J<G.length;++J)H+=B[J]*this.intensity[G[J]];return{position:I[1],index:G[I[0]],cell:G,cellId:t,intensity:H,dataCoordinate:this.positions[G[I[0]]]}};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();
this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};y.exports=function(B,t){1===arguments.length&&(t=B,B=t.gl);if(!(B.getExtension("OES_standard_derivatives")||
B.getExtension("MOZ_OES_standard_derivatives")||B.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var G=p(B,u.vertex,u.fragment);G.attributes.position.location=0;G.attributes.color.location=2;G.attributes.uv.location=3;G.attributes.normal.location=4;var H=p(B,v.vertex,v.fragment);H.attributes.position.location=0;H.attributes.color.location=2;H.attributes.uv.location=3;var I=p(B,w.vertex,w.fragment);I.attributes.position.location=0;I.attributes.color.location=
2;I.attributes.uv.location=3;I.attributes.pointSize.location=4;var J=p(B,D.vertex,D.fragment);J.attributes.position.location=0;J.attributes.id.location=1;var L=p(B,C.vertex,C.fragment);L.attributes.position.location=0;L.attributes.id.location=1;L.attributes.pointSize.location=4;var E=p(B,x.vertex,x.fragment);E.attributes.position.location=0;var K=f(B,c(new Uint8Array([255,255,255,255]),[1,1,4]));K.generateMipmap();K.minFilter=B.LINEAR_MIPMAP_LINEAR;K.magFilter=B.LINEAR;var N=h(B),O=h(B),Q=h(B),P=
h(B),T=h(B),V=a(B,[{buffer:N,type:B.FLOAT,size:3},{buffer:T,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:O,type:B.FLOAT,size:4},{buffer:Q,type:B.FLOAT,size:2},{buffer:P,type:B.FLOAT,size:3}]),aa=h(B),ba=h(B),Y=h(B),ea=h(B),da=a(B,[{buffer:aa,type:B.FLOAT,size:3},{buffer:ea,type:B.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ba,type:B.FLOAT,size:4},{buffer:Y,type:B.FLOAT,size:2}]),ca=h(B),la=h(B),pa=h(B),qa=h(B),oa=h(B),ka=a(B,[{buffer:ca,type:B.FLOAT,size:3},{buffer:oa,type:B.UNSIGNED_BYTE,size:4,
normalized:!0},{buffer:la,type:B.FLOAT,size:4},{buffer:pa,type:B.FLOAT,size:2},{buffer:qa,type:B.FLOAT,size:1}]),ra=h(B),ha=a(B,[{buffer:ra,type:B.FLOAT,size:3}]);G=new q(B,K,G,H,I,J,L,E,N,T,O,Q,P,V,aa,ea,ba,Y,da,ca,oa,la,pa,qa,ka,ra,ha);G.update(t);return G}},{"./lib/closest-point":290,"./lib/shaders":291,colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-shader":312,"gl-texture2d":327,"gl-vao":332,ndarray:469,normals:472,"simplicial-complex-contour":528,"typedarray-pool":567}],
293:[function(b,y,F){function q(a,f,d){this.plot=a;this.vbo=f;this.shader=d}y.exports=function(a){var f=a.gl,d=n(f,[0,0,0,1,1,0,1,1]);f=p(f,h.boxVert,h.lineFrag);return new q(a,d,f)};var n=b("gl-buffer"),p=b("gl-shader"),h=b("./shaders");b=q.prototype;b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawBox=function(){var a=[0,0],f=[0,0];return function(d,l,k,c,e){var g=this.shader,m=this.plot.gl;a[0]=d;
a[1]=l;f[0]=k;f[1]=c;g.uniforms.lo=a;g.uniforms.hi=f;g.uniforms.color=e;m.drawArrays(m.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"gl-buffer":258,"gl-shader":312}],294:[function(b,y,F){function q(d,l,k,c){this.plot=d;this.vbo=l;this.shader=k;this.tickShader=c;this.ticks=[[],[]]}function n(d,l){return d-l}y.exports=function(d){var l=d.gl,k=p(l),c=h(l,f.gridVert,f.gridFrag);l=h(l,f.tickVert,f.gridFrag);return new q(d,k,c,l)};var p=b("gl-buffer"),
h=b("gl-shader"),a=b("binary-search-bounds"),f=b("./shaders");b=q.prototype;b.draw=function(){var d=[0,0],l=[0,0],k=[0,0];return function(){var c=this.plot,e=this.vbo,g=this.shader,m=this.ticks,r=c.gl,u=c._tickBounds,v=c.dataBox,w=c.viewBox,D=c.gridLineWidth,C=c.gridLineColor,x=c.gridLineEnable;c=c.pixelRatio;for(var A=0;2>A;++A){var B=u[A],t=.5*(v[A+2]+v[A]),G=v[A+2]-v[A];l[A]=2*(u[A+2]-B)/G;d[A]=2*(B-t)/G}g.bind();e.bind();g.attributes.dataCoord.pointer();g.uniforms.dataShift=d;g.uniforms.dataScale=
l;for(A=e=0;2>A;++A)k[0]=k[1]=0,k[A]=1,g.uniforms.dataAxis=k,g.uniforms.lineWidth=D[A]/(w[A+2]-w[A])*c,g.uniforms.color=C[A],u=6*m[A].length,x[A]&&u&&r.drawArrays(r.TRIANGLES,e,u),e+=u}}();b.drawTickMarks=function(){var d=[0,0],l=[0,0],k=[1,0],c=[0,1],e=[0,0],g=[0,0];return function(){var m=this.plot,r=this.vbo,u=this.tickShader,v=this.ticks,w=m.gl,D=m._tickBounds,C=m.dataBox,x=m.viewBox,A=m.pixelRatio,B=m.screenBox,t=B[2]-B[0];B=B[3]-B[1];for(var G=x[2]-x[0],H=x[3]-x[1],I=0;2>I;++I){var J=D[I],L=
.5*(C[I+2]+C[I]),E=C[I+2]-C[I];l[I]=2*(D[I+2]-J)/E;d[I]=2*(J-L)/E}l[0]*=G/t;d[0]*=G/t;l[1]*=H/B;d[1]*=H/B;u.bind();r.bind();u.attributes.dataCoord.pointer();r=u.uniforms;r.dataShift=d;r.dataScale=l;u=m.tickMarkLength;G=m.tickMarkWidth;m=m.tickMarkColor;I=6*v[0].length;J=Math.min(a.ge(v[0],(C[0]-D[0])/(D[2]-D[0]),n),v[0].length);L=Math.min(a.gt(v[0],(C[2]-D[0])/(D[2]-D[0]),n),v[0].length);H=6*J;J=6*Math.max(0,L-J);L=Math.min(a.ge(v[1],(C[1]-D[1])/(D[3]-D[1]),n),v[1].length);v=Math.min(a.gt(v[1],(C[3]-
D[1])/(D[3]-D[1]),n),v[1].length);D=I+6*L;v=6*Math.max(0,v-L);e[0]=2*(x[0]-u[1])/t-1;e[1]=(x[3]+x[1])/B-1;g[0]=u[1]*A/t;g[1]=G[1]*A/B;v&&(r.color=m[1],r.tickScale=g,r.dataAxis=c,r.screenOffset=e,w.drawArrays(w.TRIANGLES,D,v));e[0]=(x[2]+x[0])/t-1;e[1]=2*(x[1]-u[0])/B-1;g[0]=G[0]*A/t;g[1]=u[0]*A/B;J&&(r.color=m[0],r.tickScale=g,r.dataAxis=k,r.screenOffset=e,w.drawArrays(w.TRIANGLES,H,J));e[0]=2*(x[2]+u[3])/t-1;e[1]=(x[3]+x[1])/B-1;g[0]=u[3]*A/t;g[1]=G[3]*A/B;v&&(r.color=m[3],r.tickScale=g,r.dataAxis=
c,r.screenOffset=e,w.drawArrays(w.TRIANGLES,D,v));e[0]=(x[2]+x[0])/t-1;e[1]=2*(x[3]+u[2])/B-1;g[0]=G[2]*A/t;g[1]=u[2]*A/B;J&&(r.color=m[2],r.tickScale=g,r.dataAxis=k,r.screenOffset=e,w.drawArrays(w.TRIANGLES,H,J))}}();b.update=function(){var d=[1,1,-1,-1,1,-1],l=[1,-1,1,1,-1,-1];return function(k){var c=k.ticks;k=k.bounds;for(var e=new Float32Array(18*(c[0].length+c[1].length)),g=0,m=[[],[]],r=0;2>r;++r)for(var u=m[r],v=c[r],w=k[r],D=k[r+2],C=0;C<v.length;++C){var x=(v[C].x-w)/(D-w);u.push(x);for(var A=
0;6>A;++A)e[g++]=x,e[g++]=d[A],e[g++]=l[A]}this.ticks=m;this.vbo.update(e)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":296,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312}],295:[function(b,y,F){function q(a,f,d){this.plot=a;this.vbo=f;this.shader=d}y.exports=function(a){var f=a.gl,d=n(f,[-1,-1,-1,1,1,-1,1,1]);f=p(f,h.lineVert,h.lineFrag);return new q(a,d,f)};var n=b("gl-buffer"),p=b("gl-shader"),h=b("./shaders");b=q.prototype;
b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawLine=function(){var a=[0,0],f=[0,0];return function(d,l,k,c,e,g){var m=this.plot,r=this.shader,u=m.gl;a[0]=d;a[1]=l;f[0]=k;f[1]=c;r.uniforms.start=a;r.uniforms.end=f;r.uniforms.width=e*m.pixelRatio;r.uniforms.color=g;u.drawArrays(u.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"gl-buffer":258,
"gl-shader":312}],296:[function(b,y,F){b=b("glslify");F=b(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d vec4(color.xyz * color.w, color.w);\n}\n"]);y.exports={lineVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta \x3d normalize(perp(start - end));\n  vec2 offset \x3d mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position \x3d vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:F,textVert:b(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  \x3d textCoordinate.z;\n  vec2 glyphOffset  \x3d textCoordinate.xy;\n  mat2 glyphMatrix \x3d mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate \x3d dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position \x3d vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:F,gridVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos +\x3d 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position \x3d vec4(pos, 0, 1);\n}\n"]),gridFrag:F,boxVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position \x3d vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position \x3d vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:413}],297:[function(b,y,F){function q(d,l,k){this.plot=d;this.vbo=l;this.shader=k;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=
[0,0]}y.exports=function(d){var l=d.gl,k=n(l);l=p(l,f.textVert,f.textFrag);return new q(d,k,l)};var n=b("gl-buffer"),p=b("gl-shader"),h=b("text-cache"),a=b("binary-search-bounds"),f=b("./shaders");b=q.prototype;b.drawTicks=function(){var d=[0,0],l=[0,0],k=[0,0];return function(c){var e=this.plot,g=this.shader,m=this.tickX[c],r=this.tickOffset[c],u=e.gl,v=e.viewBox,w=e.dataBox,D=e.screenBox,C=e.pixelRatio,x=e.tickEnable,A=e.tickPad,B=e.tickColor,t=e.tickAngle,G=e.labelEnable,H=e.labelPad,I=e.labelColor;
e=e.labelAngle;var J=this.labelOffset[c],L=this.labelCount[c],E=a.lt(m,w[c]);m=a.le(m,w[c+2]);d[0]=d[1]=0;d[c]=1;l[c]=(v[2+c]+v[c])/(D[2+c]-D[c])-1;D=2/D[2+(c^1)]-D[c^1];l[c^1]=D*v[c^1]-1;x[c]&&(l[c^1]-=D*C*A[c],E<m&&r[m]>r[E]&&(g.uniforms.dataAxis=d,g.uniforms.screenOffset=l,g.uniforms.color=B[c],g.uniforms.angle=t[c],u.drawArrays(u.TRIANGLES,r[E],r[m]-r[E])));G[c]&&L&&(l[c^1]-=D*C*H[c],g.uniforms.dataAxis=k,g.uniforms.screenOffset=l,g.uniforms.color=I[c],g.uniforms.angle=e[c],u.drawArrays(u.TRIANGLES,
J,L));l[c^1]=D*v[2+(c^1)]-1;x[c+2]&&(l[c^1]+=D*C*A[c+2],E<m&&r[m]>r[E]&&(g.uniforms.dataAxis=d,g.uniforms.screenOffset=l,g.uniforms.color=B[c+2],g.uniforms.angle=t[c+2],u.drawArrays(u.TRIANGLES,r[E],r[m]-r[E])));G[c+2]&&L&&(l[c^1]+=D*C*H[c+2],g.uniforms.dataAxis=k,g.uniforms.screenOffset=l,g.uniforms.color=I[c+2],g.uniforms.angle=e[c+2],u.drawArrays(u.TRIANGLES,J,L))}}();b.drawTitle=function(){var d=[0,0],l=[0,0];return function(){var k=this.plot,c=this.shader,e=k.gl,g=k.screenBox,m=k.titleCenter,
r=k.titleAngle,u=k.titleColor;k=k.pixelRatio;if(this.titleCount){for(var v=0;2>v;++v)l[v]=2*(m[v]*k-g[v])/(g[2+v]-g[v])-1;c.bind();c.uniforms.dataAxis=d;c.uniforms.screenOffset=l;c.uniforms.angle=r;c.uniforms.color=u;e.drawArrays(e.TRIANGLES,this.titleOffset,this.titleCount)}}}();b.bind=function(){var d=[0,0],l=[0,0],k=[0,0];return function(){var c=this.plot,e=this.shader,g=c._tickBounds,m=c.dataBox,r=c.screenBox,u=c.viewBox;e.bind();for(var v=0;2>v;++v){var w=g[v],D=.5*(m[v+2]+m[v]),C=m[v+2]-m[v],
x=u[v+2]-u[v],A=r[v+2]-r[v];l[v]=2*(g[v+2]-w)/C*x/A;d[v]=2*(w-D)/C*x/A}k[1]=2*c.pixelRatio/(r[3]-r[1]);k[0]=k[1]*(r[3]-r[1])/(r[2]-r[0]);e.uniforms.dataScale=l;e.uniforms.dataShift=d;e.uniforms.textScale=k;this.vbo.bind();e.attributes.textCoordinate.pointer()}}();b.update=function(d){var l=[],k=d.ticks,c=d.bounds,e,g;for(g=0;2>g;++g){var m=[Math.floor(l.length/3)],r=[-Infinity],u=k[g];for(e=0;e<u.length;++e){var v=u[e];var w=v.x;var D=v.text;var C=v.font||"sans-serif";v=v.fontSize||12;for(var x=1/
(c[g+2]-c[g]),A=c[g],B=D.split("\n"),t=0;t<B.length;t++){var G=h(C,B[t]).data;for(D=0;D<G.length;D+=2)l.push(G[D]*v,-G[D+1]*v-t*v*1.2,(w-A)*x)}m.push(Math.floor(l.length/3));r.push(w)}this.tickOffset[g]=m;this.tickX[g]=r}for(g=0;2>g;++g){this.labelOffset[g]=Math.floor(l.length/3);G=h(d.labelFont[g],d.labels[g],{textAlign:"center"}).data;v=d.labelSize[g];for(e=0;e<G.length;e+=2)l.push(G[e]*v,-G[e+1]*v,0);this.labelCount[g]=Math.floor(l.length/3)-this.labelOffset[g]}this.titleOffset=Math.floor(l.length/
3);G=h(d.titleFont,d.title).data;v=d.titleSize;for(e=0;e<G.length;e+=2)l.push(G[e]*v,-G[e+1]*v,0);this.titleCount=Math.floor(l.length/3)-this.titleOffset;this.vbo.update(l)};b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312,"text-cache":547}],298:[function(b,y,F){function q(k,c){this.gl=k;this.pickBuffer=c;this.screenBox=[0,0,k.drawingBufferWidth,k.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,
-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=
[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function n(k){k=k.slice();for(var c=0;c<k.length;++c)k[c]=k[c].slice();return k}function p(k,c){return k.x-c.x}y.exports=function(k){var c=k.gl,e=h(c,[c.drawingBufferWidth,c.drawingBufferHeight]);c=new q(c,e);c.grid=a(c);c.text=f(c);c.line=d(c);c.box=l(c);c.update(k);return c};var h=b("gl-select-static"),
a=b("./lib/grid"),f=b("./lib/text"),d=b("./lib/line"),l=b("./lib/box");b=q.prototype;b.setDirty=function(){this.dirty=this.pickDirty=!0};b.setOverlayDirty=function(){this.dirty=!0};b.nextDepthValue=function(){return this._depthCounter++/65536};b.draw=function(){return function(){var k=this.gl,c=this.screenBox,e=this.viewBox,g=this.dataBox,m=this.pixelRatio,r=this.grid,u=this.line,v=this.text,w=this.objects;this._depthCounter=0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=
!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;k.bindFramebuffer(k.FRAMEBUFFER,null);k.enable(k.SCISSOR_TEST);k.disable(k.DEPTH_TEST);k.depthFunc(k.LESS);k.depthMask(!1);k.enable(k.BLEND);k.blendEquation(k.FUNC_ADD,k.FUNC_ADD);k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA);if(this.borderColor){k.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var D=this.borderColor;k.clearColor(D[0]*D[3],D[1]*D[3],D[2]*D[3],D[3]);k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT)}k.scissor(e[0],
e[1],e[2]-e[0],e[3]-e[1]);k.viewport(e[0],e[1],e[2]-e[0],e[3]-e[1]);D=this.backgroundColor;k.clearColor(D[0]*D[3],D[1]*D[3],D[2]*D[3],D[3]);k.clear(k.COLOR_BUFFER_BIT);r.draw();D=this.zeroLineEnable;var C=this.zeroLineColor,x=this.zeroLineWidth;if(D[0]||D[1])for(u.bind(),r=0;2>r;++r)if(D[r]&&0>=g[r]&&0<=g[r+2]){var A=c[r]-g[r]*(c[r+2]-c[r])/(g[r+2]-g[r]);0===r?u.drawLine(A,c[1],A,c[3],x[r],C[r]):u.drawLine(c[0],A,c[2],A,x[r],C[r])}for(r=0;r<w.length;++r)w[r].draw();k.viewport(c[0],c[1],c[2]-c[0],
c[3]-c[1]);k.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);this.grid.drawTickMarks();u.bind();c=this.borderLineEnable;g=this.borderLineWidth;w=this.borderLineColor;c[1]&&u.drawLine(e[0],e[1]-.5*g[1]*m,e[0],e[3]+.5*g[3]*m,g[1],w[1]);c[0]&&u.drawLine(e[0]-.5*g[0]*m,e[1],e[2]+.5*g[2]*m,e[1],g[0],w[0]);c[3]&&u.drawLine(e[2],e[1]-.5*g[1]*m,e[2],e[3]+.5*g[3]*m,g[3],w[3]);c[2]&&u.drawLine(e[0]-.5*g[0]*m,e[3],e[2]+.5*g[2]*m,e[3],g[2],w[2]);v.bind();for(r=0;2>r;++r)v.drawTicks(r);this.titleEnable&&v.drawTitle();
e=this.overlays;for(r=0;r<e.length;++r)e[r].draw();k.disable(k.SCISSOR_TEST);k.disable(k.BLEND);k.depthMask(!0)}}}();b.drawPick=function(){return function(){if(!this.static){var k=this.pickBuffer;this._pickTimeout=null;k.begin();for(var c=1,e=this.objects,g=0;g<e.length;++g)c=e[g].drawPick(c);k.end()}}}();b.pick=function(){return function(k,c){if(!this.static){var e=this.pixelRatio,g=this.pickPixelRatio,m=this.viewBox;k=Math.round((k-m[0]/e)*g)|0;c=Math.round((c-m[1]/e)*g)|0;e=this.pickBuffer.query(k,
c,this.pickRadius);if(!e)return null;e=e.id+(e.value[0]<<8)+(e.value[1]<<16)+(e.value[2]<<24);g=this.objects;for(m=0;m<g.length;++m){var r=g[m].pick(k,c,e);if(r)return r}return null}}}();b.setScreenBox=function(k){var c=this.screenBox,e=this.pixelRatio;c[0]=Math.round(k[0]*e)|0;c[1]=Math.round(k[1]*e)|0;c[2]=Math.round(k[2]*e)|0;c[3]=Math.round(k[3]*e)|0;this.setDirty()};b.setDataBox=function(k){var c=this.dataBox;if(c[0]!==k[0]||c[1]!==k[1]||c[2]!==k[2]||c[3]!==k[3])c[0]=k[0],c[1]=k[1],c[2]=k[2],
c[3]=k[3],this.setDirty()};b.setViewBox=function(k){var c=this.pixelRatio,e=this.viewBox;e[0]=Math.round(k[0]*c)|0;e[1]=Math.round(k[1]*c)|0;e[2]=Math.round(k[2]*c)|0;e[3]=Math.round(k[3]*c)|0;c=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((k[2]-k[0])*c)|0,Math.round((k[3]-k[1])*c)|0];this.setDirty()};b.update=function(k){k=k||{};var c=this.gl,e=this.pixelRatio=k.pixelRatio||1;this.pickPixelRatio=Math.max(e,1);this.setScreenBox(k.screenBox||[0,0,c.drawingBufferWidth/e,c.drawingBufferHeight/
e]);this.setViewBox(k.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/e,.125*(this.screenBox[3]-this.screenBox[1])/e,.875*(this.screenBox[2]-this.screenBox[0])/e,.875*(this.screenBox[3]-this.screenBox[1])/e]);c=this.viewBox;var g=(c[2]-c[0])/(c[3]-c[1]);this.setDataBox(k.dataBox||[-10,-10/g,10,10/g]);this.borderColor=!1!==k.borderColor?(k.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(k.backgroundColor||[0,0,0,0]).slice();this.gridLineEnable=(k.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=
(k.gridLineWidth||[1,1]).slice();this.gridLineColor=n(k.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(k.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(k.zeroLineWidth||[4,4]).slice();this.zeroLineColor=n(k.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(k.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(k.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=n(k.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(k.titleCenter||[.5*
(c[0]+c[2])/e,(c[3]+120)/e]).slice();this.titleEnable=!("titleEnable"in k)||!!k.titleEnable;this.titleAngle=k.titleAngle||0;this.titleColor=(k.titleColor||[0,0,0,1]).slice();this.labelPad=(k.labelPad||[15,15,15,15]).slice();this.labelAngle=(k.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(k.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=n(k.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.tickPad=(k.tickPad||[15,15,15,15]).slice();this.tickAngle=(k.tickAngle||[0,
0,0,0]).slice();this.tickEnable=(k.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=n(k.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(k.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(k.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=n(k.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);e=k.ticks||[[],[]];c=this._tickBounds;c[0]=c[1]=Infinity;c[2]=c[3]=-Infinity;for(g=0;2>g;++g){var m=e[g].slice(0);0!==m.length&&(m.sort(p),c[g]=Math.min(c[g],
m[0].x),c[g+2]=Math.max(c[g+2],m[m.length-1].x))}this.grid.update({bounds:c,ticks:e});this.text.update({bounds:c,ticks:e,labels:k.labels||["x","y"],labelSize:k.labelSize||[12,12],labelFont:k.labelFont||["sans-serif","sans-serif"],title:k.title||"",titleSize:k.titleSize||18,titleFont:k.titleFont||"sans-serif"});this.static=!!k.static;this.setDirty()};b.dispose=function(){this.box.dispose();this.grid.dispose();this.text.dispose();this.line.dispose();for(var k=this.objects.length-1;0<=k;--k)this.objects[k].dispose();
this.objects.length=0;for(k=this.overlays.length-1;0<=k;--k)this.overlays[k].dispose();this.overlays.length=0;this.gl=null};b.addObject=function(k){0>this.objects.indexOf(k)&&(this.objects.push(k),this.setDirty())};b.removeObject=function(k){for(var c=this.objects,e=0;e<c.length;++e)if(c[e]===k){c.splice(e,1);this.setDirty();break}};b.addOverlay=function(k){0>this.overlays.indexOf(k)&&(this.overlays.push(k),this.setOverlayDirty())};b.removeOverlay=function(k){for(var c=this.overlays,e=0;e<c.length;++e)if(c[e]===
k){c.splice(e,1);this.setOverlayDirty();break}}},{"./lib/box":293,"./lib/grid":294,"./lib/line":295,"./lib/text":297,"gl-select-static":311}],299:[function(b,y,F){y.exports=function(d,l){d=d||document.body;l=l||{};var k=[.01,Infinity];"distanceLimits"in l&&(k[0]=l.distanceLimits[0],k[1]=l.distanceLimits[1]);"zoomMin"in l&&(k[0]=l.zoomMin);"zoomMax"in l&&(k[1]=l.zoomMax);var c=n({center:l.center||[0,0,0],up:l.up||[0,1,0],eye:l.eye||[0,0,10],mode:l.mode||"orbit",distanceLimits:k}),e=[0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0],g=0,m=d.clientWidth,r=d.clientHeight,u={keyBindingMode:"rotate",enableWheel:!0,view:c,element:d,delay:l.delay||16,rotateSpeed:l.rotateSpeed||1,zoomSpeed:l.zoomSpeed||1,translateSpeed:l.translateSpeed||1,flipX:!!l.flipX,flipY:!!l.flipY,modes:c.modes,_ortho:l._ortho||l.projection&&"orthographic"===l.projection.type||!1,tick:function(){var v=q(),w=this.delay,D=v-2*w;c.idle(v-w);c.recalcMatrix(D);c.flush(v-(100+2*w));v=!0;w=c.computedMatrix;for(D=0;16>D;++D)v=v&&e[D]===w[D],e[D]=w[D];
w=d.clientWidth===m&&d.clientHeight===r;m=d.clientWidth;r=d.clientHeight;if(v)return!w;g=Math.exp(c.computedRadius[0]);return!0},lookAt:function(v,w,D){c.lookAt(c.lastT(),v,w,D)},rotate:function(v,w,D){c.rotate(c.lastT(),v,w,D)},pan:function(v,w,D){c.pan(c.lastT(),v,w,D)},translate:function(v,w,D){c.translate(c.lastT(),v,w,D)}};Object.defineProperties(u,{matrix:{get:function(){return c.computedMatrix},set:function(v){c.setMatrix(c.lastT(),v);return c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},
set:function(v){var w=c.computedUp.slice(),D=c.computedEye.slice(),C=c.computedCenter.slice();c.setMode(v);"turntable"===v&&(v=q(),c._active.lookAt(v,D,C,w),c._active.lookAt(v+500,D,C,[0,0,1]),c._active.flush(v));return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(v){c.lookAt(c.lastT(),null,v);return c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(v){c.lookAt(c.lastT(),v);return c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},
set:function(v){c.lookAt(c.lastT(),null,null,v);return c.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(v){c.setDistance(c.lastT(),v);return v},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(k)},set:function(v){c.setDistanceLimits(v);return v},enumerable:!0}});d.addEventListener("contextmenu",function(v){v.preventDefault();return!1});u._lastX=-1;u._lastY=-1;u._lastMods={shift:!1,control:!1,alt:!1,meta:!1};u.enableMouseListeners=function(){function v(w,
D,C,x){var A=u.keyBindingMode;if(!1!==A){var B="rotate"===A,t="pan"===A;A="zoom"===A;var G=!!x.control,H=!!x.alt,I=!!x.shift,J=!!(w&1),L=!!(w&2);w=!!(w&4);var E=1/d.clientHeight,K=E*(D-u._lastX),N=E*(C-u._lastY),O=u.flipX?1:-1,Q=u.flipY?1:-1,P=Math.PI*u.rotateSpeed;E=q();-1!==u._lastX&&-1!==u._lastY&&((B&&J&&!G&&!H&&!I||J&&!G&&!H&&I)&&c.rotate(E,O*P*K,-Q*P*N,0),(t&&J&&!G&&!H&&!I||L||J&&G&&!H&&!I)&&c.pan(E,-u.translateSpeed*K*g,u.translateSpeed*N*g,0),A&&J&&!G&&!H&&!I||w||J&&!G&&H&&!I)&&(B=-u.zoomSpeed*
N/window.innerHeight*(E-c.lastT())*100,c.pan(E,0,0,g*(Math.exp(B)-1)));u._lastX=D;u._lastY=C;u._lastMods=x;return!0}}u.mouseListener=p(d,v);d.addEventListener("touchstart",function(w){var D=a(w.changedTouches[0],d);v(0,D[0],D[1],u._lastMods);v(1,D[0],D[1],u._lastMods);w.preventDefault()},f?{passive:!1}:!1);d.addEventListener("touchmove",function(w){var D=a(w.changedTouches[0],d);v(1,D[0],D[1],u._lastMods);w.preventDefault()},f?{passive:!1}:!1);d.addEventListener("touchend",function(w){v(0,u._lastX,
u._lastY,u._lastMods);w.preventDefault()},f?{passive:!1}:!1);u.wheelListener=h(d,function(w,D){if(!1!==u.keyBindingMode&&u.enableWheel){var C=u.flipX?1:-1,x=u.flipY?1:-1,A=q();Math.abs(w)>Math.abs(D)?c.rotate(A,0,0,-w*C*Math.PI*u.rotateSpeed/window.innerWidth):u._ortho||(w=-u.zoomSpeed*x*D/window.innerHeight*(A-c.lastT())/20,c.pan(A,0,0,g*(Math.exp(w)-1)))}},!0)};u.enableMouseListeners();return u};var q=b("right-now"),n=b("3d-view"),p=b("mouse-change"),h=b("mouse-wheel"),a=b("mouse-event-offset"),
f=b("has-passive-events")},{"3d-view":54,"has-passive-events":415,"mouse-change":457,"mouse-event-offset":458,"mouse-wheel":460,"right-now":514}],300:[function(b,y,F){F=b("glslify");var q=b("gl-shader"),n=F(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv \x3d position;\n  gl_Position \x3d vec4(position, 0, 1);\n}"]),p=F(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum \x3d texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor \x3d min(vec4(1,1,1,1), accum);\n}"]);
y.exports=function(h){return q(h,n,p,null,[{name:"position",type:"vec2"}])}},{"gl-shader":312,glslify:413}],301:[function(b,y,F){function q(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function n(v,w){var D=null;try{(D=v.getContext("webgl",w))||(D=v.getContext("experimental-webgl",w))}catch(C){return null}return D}function p(v){return"boolean"===typeof v?v:!0}var h=b("./camera.js"),a=b("gl-axes3d"),f=b("gl-axes3d/properties"),
d=b("gl-spikes3d"),l=b("gl-select-static"),k=b("gl-fbo"),c=b("a-big-triangle"),e=b("mouse-change"),g=b("gl-mat4/perspective"),m=b("gl-mat4/ortho"),r=b("./lib/shader"),u=b("is-mobile")({tablet:!0,featureDetect:!0});y.exports={createScene:function(v){function w(){if(!da._stopped&&da.autoResize){var qa=B.parentNode;if(qa&&qa!==document.body){var oa=qa.clientWidth;qa=qa.clientHeight}else oa=window.innerWidth,qa=window.innerHeight;var ka=Math.ceil(oa*da.pixelRatio)|0,ra=Math.ceil(qa*da.pixelRatio)|0;if(ka!==
B.width||ra!==B.height)B.width=ka,B.height=ra,ka=B.style,ka.position=ka.position||"absolute",ka.left="0px",ka.top="0px",ka.width=oa+"px",ka.height=qa+"px",aa=!0}}function D(){for(var qa=Q.length,oa=V.length,ka=0;ka<oa;++ka)T[ka]=0;ka=0;a:for(;ka<qa;++ka){var ra=Q[ka],ha=ra.pickSlots;if(ha){for(var ma=0;ma<oa;++ma)if(255>T[ma]+ha){P[ka]=ma;ra.setPickBase(T[ma]+1);T[ma]+=ha;continue a}ma=l(t,ea);P[ka]=oa;V.push(ma);T.push(ha);ra.setPickBase(1);oa+=1}else P[ka]=-1}for(;0<oa&&0===T[oa-1];)T.pop(),V.pop().dispose()}
function C(){if(da.contextLost)return!0;if(t.isContextLost()&&(da.contextLost=!0,da.mouseListener.enabled=!1,da.selection.object=null,da.oncontextloss))da.oncontextloss()}function x(){if(!C()){w();var qa=da.camera.tick();Y.view=da.camera.matrix;aa=aa||qa;ba=ba||qa;N.pixelRatio=da.pixelRatio;O.pixelRatio=da.pixelRatio;qa=Q.length;var oa=la[0],ka=la[1];oa[0]=oa[1]=oa[2]=Infinity;ka[0]=ka[1]=ka[2]=-Infinity;for(var ra=0;ra<qa;++ra){var ha=Q[ra];ha.pixelRatio=da.pixelRatio;ha.axes=da.axes;aa=aa||!!ha.dirty;
ba=ba||!!ha.dirty;if(ha=ha.bounds){var ma=ha[0],wa=ha[1];for(ha=0;3>ha;++ha)oa[ha]=Math.min(oa[ha],ma[ha]),ka[ha]=Math.max(ka[ha],wa[ha])}}ma=da.bounds;if(da.autoBounds)for(ha=0;3>ha;++ha)ka[ha]<oa[ha]?(oa[ha]=-1,ka[ha]=1):(oa[ha]===ka[ha]&&(--oa[ha],ka[ha]+=1),ra=.05*(ka[ha]-oa[ha]),oa[ha]-=ra,ka[ha]+=ra),ma[0][ha]=oa[ha],ma[1][ha]=ka[ha];oa=!1;for(ha=0;3>ha;++ha)oa=oa||pa[0][ha]!==ma[0][ha]||pa[1][ha]!==ma[1][ha],pa[0][ha]=ma[0][ha],pa[1][ha]=ma[1][ha];ba=ba||oa;if(aa=aa||oa){if(oa){oa=[0,0,0];
for(ra=0;3>ra;++ra)ka=ra,ha=(ma[1][ra]-ma[0][ra])/10,wa=Math.round(Math.log(Math.abs(ha))/Math.log(10)),0>wa?(wa=Math.round(Math.pow(10,-wa)),ha=Math.ceil(ha*wa)/wa):0<wa?(wa=Math.round(Math.pow(10,wa)),ha=Math.ceil(ha/wa)*wa):ha=Math.ceil(ha),oa[ka]=ha;N.autoTicks?N.update({bounds:ma,tickSpacing:oa}):N.update({bounds:ma})}oa=t.drawingBufferWidth;ka=t.drawingBufferHeight;ea[0]=oa;ea[1]=ka;ca[0]=Math.max(oa/da.pixelRatio,1)|0;ca[1]=Math.max(ka/da.pixelRatio,1)|0;ra=da;ha=ra.bounds;var na=ra.cameraParams,
ya=na.projection;wa=na.model;var Fa=ra.zNear,Ha=ra.zFar,eb=ra.fovy,hb=ra.gl.drawingBufferWidth/ra.gl.drawingBufferHeight;L?(m(ya,-hb,hb,-1,1,Fa,Ha),na._ortho=!0):(g(ya,eb,hb,Fa,Ha),na._ortho=!1);for(na=0;16>na;++na)wa[na]=0;wa[15]=1;for(na=ya=0;3>na;++na)ya=Math.max(ya,ha[1][na]-ha[0][na]);for(na=0;3>na;++na)wa[5*na]=ra.autoScale?ra.aspect[na]/(ha[1][na]-ha[0][na]):1/ya,ra.autoCenter&&(wa[12+na]=.5*-wa[5*na]*(ha[0][na]+ha[1][na]));for(ra=0;ra<qa;++ra)ha=Q[ra],ha.axesBounds=ma,da.clipToBounds&&(ha.clipBounds=
ma);H.object&&(O.position=da.snapToData?H.dataCoordinate:H.dataPosition,O.bounds=ma);if(ba&&(ba=!1,!C()))for(t.colorMask(!0,!0,!0,!0),t.depthMask(!0),t.disable(t.BLEND),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),ma=Q.length,ra=V.length,ha=0;ha<ra;++ha){wa=V[ha];wa.shape=ca;wa.begin();for(na=0;na<ma;++na)P[na]===ha&&(ya=Q[na],ya.drawPick&&(ya.pixelRatio=1,ya.drawPick(Y)));wa.end()}da.axesPixels=f(da.axes,Y,oa,ka);if(da.onrender)da.onrender();t.bindFramebuffer(t.FRAMEBUFFER,null);t.viewport(0,0,oa,
ka);da.clearRGBA();t.depthMask(!0);t.colorMask(!0,!0,!0,!0);t.enable(t.DEPTH_TEST);t.depthFunc(t.LEQUAL);t.disable(t.BLEND);t.disable(t.CULL_FACE);ma=!1;N.enable&&(ma=ma||N.isTransparent(),N.draw(Y));O.axes=N;H.object&&O.draw(Y);t.disable(t.CULL_FACE);for(ra=0;ra<qa;++ra)ha=Q[ra],ha.axes=N,ha.pixelRatio=da.pixelRatio,ha.isOpaque&&ha.isOpaque()&&ha.draw(Y),ha.isTransparent&&ha.isTransparent()&&(ma=!0);if(ma){I.shape=ea;I.bind();t.clear(t.DEPTH_BUFFER_BIT);t.colorMask(!1,!1,!1,!1);t.depthMask(!0);t.depthFunc(t.LESS);
N.enable&&N.isTransparent()&&N.drawTransparent(Y);for(ra=0;ra<qa;++ra)ha=Q[ra],ha.isOpaque&&ha.isOpaque()&&ha.draw(Y);t.enable(t.BLEND);t.blendEquation(t.FUNC_ADD);t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA);t.colorMask(!0,!0,!0,!0);t.depthMask(!1);t.clearColor(0,0,0,0);t.clear(t.COLOR_BUFFER_BIT);N.isTransparent()&&N.drawTransparent(Y);for(ra=0;ra<qa;++ra)ha=Q[ra],ha.isTransparent&&ha.isTransparent()&&ha.drawTransparent(Y);t.bindFramebuffer(t.FRAMEBUFFER,null);t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA);
t.disable(t.DEPTH_TEST);J.bind();I.color[0].bind(0);J.uniforms.accumBuffer=0;c(t);t.disable(t.BLEND)}aa=!1;for(ra=0;ra<qa;++ra)Q[ra].dirty=!1}}}function A(){da._stopped||da.contextLost||(x(),requestAnimationFrame(A))}v=v||{};v.camera=v.camera||{};var B=v.canvas;B||(B=document.createElement("canvas"),v.container?v.container.appendChild(B):document.body.appendChild(B));var t=v.gl;t||(v.glOptions&&(u=!!v.glOptions.preserveDrawingBuffer),t=n(B,v.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:u}));
if(!t)throw Error("webgl not supported");var G=v.bounds||[[-10,-10,-10],[10,10,10]],H=new q,I=k(t,t.drawingBufferWidth,t.drawingBufferHeight,{preferFloat:!u}),J=r(t),L=v.cameraObject&&!0===v.cameraObject._ortho||v.camera.projection&&"orthographic"===v.camera.projection.type||!1,E={eye:v.camera.eye||[2,0,0],center:v.camera.center||[0,0,0],up:v.camera.up||[0,1,0],zoomMin:v.camera.zoomMax||.1,zoomMax:v.camera.zoomMin||100,mode:v.camera.mode||"turntable",_ortho:L},K=v.axes||{},N=a(t,K);N.enable=!K.disable;
var O=d(t,v.spikes||{}),Q=[],P=[],T=[],V=[],aa=!0,ba=!0,Y={view:null,projection:Array(16),model:Array(16),_ortho:!1};ba=!0;var ea=[t.drawingBufferWidth,t.drawingBufferHeight];E=v.cameraObject||h(B,E);var da={gl:t,contextLost:!1,pixelRatio:v.pixelRatio||1,canvas:B,selection:H,camera:E,axes:N,axesPixels:null,spikes:O,bounds:G,objects:Q,shape:ea,aspect:v.aspectRatio||[1,1,1],pickRadius:v.pickRadius||10,zNear:v.zNear||.01,zFar:v.zFar||1E3,fovy:v.fovy||Math.PI/4,clearColor:v.clearColor||[0,0,0,0],autoResize:p(v.autoResize),
autoBounds:p(v.autoBounds),autoScale:!!v.autoScale,autoCenter:p(v.autoCenter),clipToBounds:p(v.clipToBounds),snapToData:!!v.snapToData,onselect:v.onselect||null,onrender:v.onrender||null,onclick:v.onclick||null,cameraParams:Y,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(qa){this.aspect[0]=qa.x;this.aspect[1]=qa.y;this.aspect[2]=qa.z;ba=!0},setBounds:function(qa,oa){this.bounds[0][qa]=
oa.min;this.bounds[1][qa]=oa.max},setClearColor:function(qa){this.clearColor=qa},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ca=[t.drawingBufferWidth/da.pixelRatio|0,t.drawingBufferHeight/da.pixelRatio|0];da.autoResize&&w();window.addEventListener("resize",w);da.update=function(qa){da._stopped||(ba=aa=!0)};da.add=function(qa){da._stopped||(qa.axes=N,Q.push(qa),
P.push(-1),ba=aa=!0,D())};da.remove=function(qa){da._stopped||(qa=Q.indexOf(qa),0>qa||(Q.splice(qa,1),P.pop(),ba=aa=!0,D()))};da.dispose=function(){if(!da._stopped&&(da._stopped=!0,window.removeEventListener("resize",w),B.removeEventListener("webglcontextlost",C),da.mouseListener.enabled=!1,!da.contextLost)){N.dispose();O.dispose();for(var qa=0;qa<Q.length;++qa)Q[qa].dispose();I.dispose();for(qa=0;qa<V.length;++qa)V[qa].dispose();J.dispose();O=N=t=null;Q=[]}};da._mouseRotating=!1;da._prevButtons=
0;da.enableMouseListeners=function(){da.mouseListener=e(B,function(qa,oa,ka){if(!da._stopped){var ra=V.length,ha=Q.length,ma=H.object;H.distance=Infinity;H.mouse[0]=oa;H.mouse[1]=ka;H.object=null;H.screen=null;H.dataCoordinate=H.dataPosition=null;var wa=!1;if(qa&&da._prevButtons)da._mouseRotating=!0;else{da._mouseRotating&&(ba=!0);da._mouseRotating=!1;for(var na=0;na<ra;++na){var ya=V[na].query(oa,ca[1]-ka-1,da.pickRadius);if(ya&&!(ya.distance>H.distance))for(var Fa=0;Fa<ha;++Fa){var Ha=Q[Fa];if(P[Fa]===
na){var eb=Ha.pick(ya);eb&&(H.buttons=qa,H.screen=ya.coord,H.distance=ya.distance,H.object=Ha,H.index=eb.distance,H.dataPosition=eb.position,H.dataCoordinate=eb.dataCoordinate,H.data=eb,wa=!0)}}}}ma&&ma!==H.object&&(ma.highlight&&ma.highlight(null),aa=!0);H.object&&(H.object.highlight&&H.object.highlight(H.data),aa=!0);if((wa=wa||H.object!==ma)&&da.onselect)da.onselect(H);if(qa&1&&!(da._prevButtons&1)&&da.onclick)da.onclick(H);da._prevButtons=qa}})};B.addEventListener("webglcontextlost",C);var la=
[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],pa=[la[0].slice(),la[1].slice()];da.enableMouseListeners();A();da.redraw=function(){da._stopped||(aa=!0,x())};return da},createCamera:h}},{"./camera.js":299,"./lib/shader":300,"a-big-triangle":64,"gl-axes3d":250,"gl-axes3d/properties":257,"gl-fbo":266,"gl-mat4/ortho":281,"gl-mat4/perspective":282,"gl-select-static":311,"gl-spikes3d":321,"is-mobile":441,"mouse-change":457}],302:[function(b,y,F){b=b("glslify");F.pointVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a \x3d 12.9898;\n  highp float b \x3d 78.233;\n  highp float c \x3d 43758.5453;\n  highp float d \x3d dot(co.xy, vec2(a, b));\n  highp float e \x3d mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize \x3d pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *\x3d 0.886;\n  }\n}"]);
F.pointFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    if(centerFraction \x3d\x3d 1.0) {\n      gl_FragColor \x3d color;\n    } else {\n      gl_FragColor \x3d mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius \x3e 1.0) {\n      discard;\n    }\n    baseColor \x3d mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor \x3d vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
F.pickVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize \x3d pointSize;\n\n  vec4 id \x3d pickId + pickOffset;\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  fragId \x3d id;\n}\n"]);
F.pickFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius \x3e 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d fragId / 255.0;\n}\n"])},{glslify:413}],303:[function(b,y,F){function q(f,d,l,k,c){this.plot=f;this.offsetBuffer=d;this.pickBuffer=l;this.shader=k;this.pickShader=c;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=
[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var n=b("gl-shader"),p=b("gl-buffer"),h=b("typedarray-pool"),a=b("./lib/shader");y.exports=function(f,d){var l=f.gl,k=p(l),c=p(l),e=n(l,a.pointVertex,a.pointFragment);l=n(l,a.pickVertex,a.pickFragment);k=new q(f,k,c,e,l);k.update(d);f.addObject(k);return k};b=q.prototype;b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};b.update=function(f){function d(u,
v){return u in f?f[u]:v}var l;f=f||{};this.sizeMin=d("sizeMin",.5);this.sizeMax=d("sizeMax",20);this.color=d("color",[1,0,0,1]).slice();this.areaRatio=d("areaRatio",1);this.borderColor=d("borderColor",[0,0,0,1]).slice();this.blend=d("blend",!1);var k=f.positions.length>>>1,c=f.positions instanceof Float32Array,e=f.idToIndex instanceof Int32Array&&f.idToIndex.length>=k,g=f.positions,m=c?g:h.mallocFloat32(g.length),r=e?f.idToIndex:h.mallocInt32(k);c||m.set(g);if(!e)for(m.set(g),l=0;l<k;l++)r[l]=l;this.points=
g;this.offsetBuffer.update(m);this.pickBuffer.update(r);c||h.free(m);e||h.free(r);this.pointCount=k;this.pickOffset=0};b.unifiedDraw=function(){var f=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0];return function(l){var k=void 0!==l,c=k?this.pickShader:this.shader,e=this.plot.gl,g=this.plot.dataBox;if(0===this.pointCount)return l;var m=g[2]-g[0],r=g[3]-g[1],u=this.points,v=0,w=u.length>>>1,D;for(D=0;D<w;D++){var C=u[2*D],x=u[2*D+1];C>=g[0]&&C<=g[2]&&x>=g[1]&&x<=g[3]&&v++}u=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,
this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(v,.33333)));f[0]=2/m;f[4]=2/r;f[6]=-2*g[0]/m-1;f[7]=-2*g[1]/r-1;this.offsetBuffer.bind();c.bind();c.attributes.position.pointer();c.uniforms.matrix=f;c.uniforms.color=this.color;c.uniforms.borderColor=this.borderColor;c.uniforms.pointCloud=5>u;c.uniforms.pointSize=u;c.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));k&&(d[0]=l&255,d[1]=l>>8&255,d[2]=l>>16&255,d[3]=l>>24&255,this.pickBuffer.bind(),c.attributes.pickId.pointer(e.UNSIGNED_BYTE),
c.uniforms.pickOffset=d,this.pickOffset=l);k=e.getParameter(e.BLEND);c=e.getParameter(e.DITHER);k&&!this.blend&&e.disable(e.BLEND);c&&e.disable(e.DITHER);e.drawArrays(e.POINTS,0,this.pointCount);k&&!this.blend&&e.enable(e.BLEND);c&&e.enable(e.DITHER);return l+this.pointCount}}();b.draw=b.unifiedDraw;b.drawPick=b.unifiedDraw;b.pick=function(f,d,l){f=this.pickOffset;d=this.pointCount;if(l<f||l>=f+d)return null;l-=f;f=this.points;return{object:this,pointId:l,dataCoord:[f[2*l],f[2*l+1]]}}},{"./lib/shader":302,
"gl-buffer":258,"gl-shader":312,"typedarray-pool":567}],304:[function(b,y,F){y.exports=function(q,n,p,h){var a=n[0],f=n[1],d=n[2];n=n[3];var l=p[0],k=p[1],c=p[2];p=p[3];var e=a*l+f*k+d*c+n*p;0>e&&(e=-e,l=-l,k=-k,c=-c,p=-p);if(1E-6<1-e){var g=Math.acos(e);var m=Math.sin(g);e=Math.sin((1-h)*g)/m;h=Math.sin(h*g)/m}else e=1-h;q[0]=e*a+h*l;q[1]=e*f+h*k;q[2]=e*d+h*c;q[3]=e*n+h*p;return q}},{}],305:[function(b,y,F){y.exports=function(q){return q||0===q?q.toString():""}},{}],306:[function(b,y,F){var q=b("vectorize-text");
y.exports=function(p,h,a){var f=n[h];f||(f=n[h]={});if(p in f)return f[p];var d={textAlign:"center",textBaseline:"middle",lineHeight:1,font:h,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};h=q(p,d);d.triangles=!1;d=q(p,d);var l,k;if(a&&1!==a){for(l=0;l<h.positions.length;++l)for(k=0;k<h.positions[l].length;++k)h.positions[l][k]/=a;for(l=0;l<d.positions.length;++l)for(k=0;k<d.positions[l].length;++k)d.positions[l][k]/=a}a=[[Infinity,Infinity],
[-Infinity,-Infinity]];var c=d.positions.length;for(l=0;l<c;++l){var e=d.positions[l];for(k=0;2>k;++k)a[0][k]=Math.min(a[0][k],e[k]),a[1][k]=Math.max(a[1][k],e[k])}return f[p]=[h,d,a]};var n={}},{"vectorize-text":572}],307:[function(b,y,F){function q(m,r){m=n(m,r);r=m.attributes;r.position.location=0;r.color.location=1;r.glyph.location=2;r.id.location=3;return m}var n=b("gl-shader"),p=b("glslify");b=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d 1.0;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      scale \x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1);\n    vec4 viewPosition \x3d view * worldPosition;\n    viewPosition \x3d viewPosition / viewPosition.w;\n    vec4 clipPosition \x3d projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
y=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) \x3c 0.001) {\n      scale *\x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1.0);\n    vec4 viewPosition \x3d view * worldPosition;\n    vec4 clipPosition \x3d projection * viewPosition;\n    clipPosition /\x3d clipPosition.w;\n\n    gl_Position \x3d clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
var h=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float lscale \x3d pixelRatio * scale;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      lscale *\x3d highlightScale;\n    }\n\n    vec4 clipCenter   \x3d projection * view * model * vec4(position, 1);\n    vec3 dataPosition \x3d position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition \x3d projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d dataPosition;\n  }\n}\n"]),
a=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity \x3d\x3d 0.\n  ) discard;\n  gl_FragColor \x3d interpColor * opacity;\n}\n"]);
p=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor \x3d vec4(pickGroup, pickId.bgr);\n}"]);
var f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],d={vertex:b,fragment:a,attributes:f},l={vertex:y,fragment:a,attributes:f},k={vertex:h,fragment:a,attributes:f},c={vertex:b,fragment:p,attributes:f},e={vertex:y,fragment:p,attributes:f},g={vertex:h,fragment:p,attributes:f};F.createPerspective=function(m){return q(m,d)};F.createOrtho=function(m){return q(m,l)};F.createProject=function(m){return q(m,k)};F.createPickPerspective=function(m){return q(m,
c)};F.createPickOrtho=function(m){return q(m,e)};F.createPickProject=function(m){return q(m,g)}},{"gl-shader":312,glslify:413}],308:[function(b,y,F){function q(E,K){var N=E[0],O=E[1],Q=E[2],P=E[3];E[0]=K[0]*N+K[4]*O+K[8]*Q+K[12]*P;E[1]=K[1]*N+K[5]*O+K[9]*Q+K[13]*P;E[2]=K[2]*N+K[6]*O+K[10]*Q+K[14]*P;E[3]=K[3]*N+K[7]*O+K[11]*Q+K[15]*P;return E}function n(E,K,N,O){q(O,O,N);q(O,O,K);return q(O,O,E)}function p(E,K){this.index=E;this.dataCoordinate=this.position=K}function h(E){return!0===E||1<E?1:E}function a(E,
K,N,O,Q,P,T,V,aa,ba,Y,ea){this.gl=E;this.pixelRatio=1;this.shader=K;this.orthoShader=N;this.projectShader=O;this.pointBuffer=Q;this.colorBuffer=P;this.glyphBuffer=T;this.idBuffer=V;this.vao=aa;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=ba;this.pickOrthoShader=Y;this.pickProjectShader=ea;this.points=[];this._selectResult=new p(0,
[0,0,0]);this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function f(E){E[0]=E[1]=E[2]=0;return E}function d(E,K){E[0]=K[0];E[1]=K[1];E[2]=K[2];E[3]=1;return E}function l(E,K,N,O){E[0]=K[0];E[1]=K[1];E[2]=K[2];
E[N]=O;return E}function k(E,K,N,O,Q,P,T){var V=N.gl;if(P===N.projectHasAlpha||T){for(var aa=N.axesProject,ba=N.gl,Y=K.uniforms,ea=O.model||C,da=O.view||C,ca=O.projection||C,la=N.axesBounds,pa=N.clipBounds,qa=J,oa=0;2>oa;++oa)for(var ka=0;3>ka;++ka)qa[oa][ka]=Math.max(Math.min(pa[oa][ka],1E8),-1E8);pa=N.axes&&N.axes.lastCubeProps?N.axes.lastCubeProps.axis:[1,1,1];x[0]=2/ba.drawingBufferWidth;x[1]=2/ba.drawingBufferHeight;K.bind();Y.view=da;Y.projection=ca;Y.screenSize=x;Y.highlightId=N.highlightId;
Y.highlightScale=N.highlightScale;Y.clipBounds=qa;Y.pickGroup=N.pickId/255;Y.pixelRatio=Q;for(K=0;3>K;++K)if(aa[K]){Y.scale=N.projectScale[K];Y.opacity=N.projectOpacity[K];oa=H;for(var ra=0;16>ra;++ra)oa[ra]=0;for(ra=0;4>ra;++ra)oa[5*ra]=1;oa[5*K]=0;oa[12+K]=0>pa[K]?la[0][K]:la[1][K];u(oa,ea,oa);Y.model=oa;oa=(K+1)%3;ka=(K+2)%3;var ha=f(A),ma=f(B);ha[oa]=1;ma[ka]=1;ra=n(ca,da,ea,d(t,ha));var wa=n(ca,da,ea,d(G,ma));if(Math.abs(ra[1])>Math.abs(wa[1])){var na=ra;ra=wa;wa=na;na=ha;ha=ma;ma=na;na=oa;oa=
ka;ka=na}0>ra[0]&&(ha[oa]=-1);0<wa[1]&&(ma[ka]=-1);for(ra=na=wa=0;4>ra;++ra)wa+=Math.pow(ea[4*oa+ra],2),na+=Math.pow(ea[4*ka+ra],2);ha[oa]/=Math.sqrt(wa);ma[ka]/=Math.sqrt(na);Y.axes[0]=ha;Y.axes[1]=ma;Y.fragClipBounds[0]=l(I,qa[0],K,-1E8);Y.fragClipBounds[1]=l(I,qa[1],K,1E8);N.vao.bind();N.vao.draw(ba.TRIANGLES,N.vertexCount);0<N.lineWidth&&(ba.lineWidth(N.lineWidth*Q),N.vao.draw(ba.LINES,N.lineVertexCount,N.vertexCount));N.vao.unbind()}}if(P===N.hasAlpha||T)E.bind(),E=E.uniforms,E.model=O.model||
C,E.view=O.view||C,E.projection=O.projection||C,x[0]=2/V.drawingBufferWidth,x[1]=2/V.drawingBufferHeight,E.screenSize=x,E.highlightId=N.highlightId,E.highlightScale=N.highlightScale,E.fragClipBounds=L,E.clipBounds=N.axes.bounds,E.opacity=N.opacity,E.pickGroup=N.pickId/255,E.pixelRatio=Q,N.vao.bind(),N.vao.draw(V.TRIANGLES,N.vertexCount),0<N.lineWidth&&(V.lineWidth(N.lineWidth*Q),N.vao.draw(V.LINES,N.lineVertexCount,N.vertexCount)),N.vao.unbind()}function c(E,K,N,O){K=Array.isArray(E)?K<E.length?E[K]:
void 0:E;K=D(K);E=!0;e(K)&&(K="",E=!1);N=w(K,N,O);return{mesh:N[0],lines:N[1],bounds:N[2],visible:E}}var e=b("is-string-blank"),g=b("gl-buffer"),m=b("gl-vao"),r=b("typedarray-pool"),u=b("gl-mat4/multiply"),v=b("./lib/shaders"),w=b("./lib/glyphs"),D=b("./lib/get-simple-string"),C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];y.exports=function(E){var K=E.gl,N=v.createPerspective(K),O=v.createOrtho(K),Q=v.createProject(K),P=v.createPickPerspective(K),T=v.createPickOrtho(K),V=v.createPickProject(K),aa=g(K),ba=
g(K),Y=g(K),ea=g(K),da=m(K,[{buffer:aa,size:3,type:K.FLOAT},{buffer:ba,size:4,type:K.FLOAT},{buffer:Y,size:2,type:K.FLOAT},{buffer:ea,size:4,type:K.UNSIGNED_BYTE,normalized:!0}]);K=new a(K,N,O,Q,aa,ba,Y,ea,da,P,T,V);K.update(E);return K};b=a.prototype;b.pickSlots=1;b.setPickBase=function(E){this.pickId=E};b.isTransparent=function(){if(this.hasAlpha)return!0;for(var E=0;3>E;++E)if(this.axesProject[E]&&this.projectHasAlpha)return!0;return!1};b.isOpaque=function(){if(!this.hasAlpha)return!0;for(var E=
0;3>E;++E)if(this.axesProject[E]&&!this.projectHasAlpha)return!0;return!1};var x=[0,0],A=[0,0,0],B=[0,0,0],t=[0,0,0,1],G=[0,0,0,1],H=C.slice(),I=[0,0,0],J=[[0,0,0],[0,0,0]],L=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];b.draw=function(E){k(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,E,this.pixelRatio,!1,!1)};b.drawTransparent=function(E){k(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,E,this.pixelRatio,!0,!1)};b.drawPick=function(E){k(this.useOrtho?this.pickOrthoShader:
this.pickPerspectiveShader,this.pickProjectShader,this,E,1,!0,!0)};b.pick=function(E){if(!E||E.id!==this.pickId)return null;var K=E.value[2]+(E.value[1]<<8)+(E.value[0]<<16);if(K>=this.pointCount||0>K)return null;E=this.points[K];var N=this._selectResult;N.index=K;for(K=0;3>K;++K)N.position[K]=N.dataCoordinate[K]=E[K];return N};b.highlight=function(E){E?(E=E.index,this.highlightId=[(E&255)/255,(E>>8&255)/255,(E>>16&255)/255,0]):this.highlightId=[1,1,1,1]};b.update=function(E){E=E||{};"perspective"in
E&&(this.useOrtho=!E.perspective);"orthographic"in E&&(this.useOrtho=!!E.orthographic);"lineWidth"in E&&(this.lineWidth=E.lineWidth);if("project"in E)if(Array.isArray(E.project))this.axesProject=E.project;else{var K=!!E.project;this.axesProject=[K,K,K]}"projectScale"in E&&(Array.isArray(E.projectScale)?this.projectScale=E.projectScale.slice():(K=+E.projectScale,this.projectScale=[K,K,K]));this.projectHasAlpha=!1;if("projectOpacity"in E){Array.isArray(E.projectOpacity)?this.projectOpacity=E.projectOpacity.slice():
(K=+E.projectOpacity,this.projectOpacity=[K,K,K]);for(var N=0;3>N;++N)this.projectOpacity[N]=h(this.projectOpacity[N]),1>this.projectOpacity[N]&&(this.projectHasAlpha=!0)}this.hasAlpha=!1;"opacity"in E&&(this.opacity=h(E.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;K=E.position;var O=E.font||"normal",Q=E.alignment||[0,0];if(2===Q.length){var P=Q[0];var T=Q[1]}else for(P=[],T=[],N=0;N<Q.length;++N)P[N]=Q[N][0],T[N]=Q[N][1];Q=[Infinity,Infinity,Infinity];var V=[-Infinity,-Infinity,-Infinity],
aa=E.glyph,ba=E.color,Y=E.size,ea=E.angle;E=E.lineColor;var da=-1,ca=0,la=0,pa=0;if(K.length)a:for(pa=K.length,N=0;N<pa;++N){for(var qa=K[N],oa=0;3>oa;++oa)if(isNaN(qa[oa])||!isFinite(qa[oa]))continue a;var ka=c(aa,N,O,this.pixelRatio),ra=ka.mesh,ha=ka.lines;ca+=3*ra.cells.length;la+=2*ha.edges.length}N=ca+la;var ma=r.mallocFloat(3*N),wa=r.mallocFloat(4*N),na=r.mallocFloat(2*N),ya=r.mallocUint32(N);if(0<N){var Fa=0,Ha=ca,eb=[0,0,0,1],hb=[0,0,0,1],ob=Array.isArray(ba)&&Array.isArray(ba[0]),ib=Array.isArray(E)&&
Array.isArray(E[0]);N=0;a:for(;N<pa;++N){da+=1;qa=K[N];for(oa=0;3>oa;++oa){if(isNaN(qa[oa])||!isFinite(qa[oa]))continue a;V[oa]=Math.max(V[oa],qa[oa]);Q[oa]=Math.min(Q[oa],qa[oa])}ka=c(aa,N,O,this.pixelRatio);ra=ka.mesh;ha=ka.lines;var Pa=ka.bounds;var sb=ka.visible;if(sb)if(Array.isArray(ba))if(ka=ob?N<ba.length?ba[N]:[0,0,0,0]:ba,3===ka.length){for(oa=0;3>oa;++oa)eb[oa]=ka[oa];eb[3]=1}else{if(4===ka.length){for(oa=0;4>oa;++oa)eb[oa]=ka[oa];!this.hasAlpha&&1>ka[3]&&(this.hasAlpha=!0)}}else eb[0]=
eb[1]=eb[2]=0,eb[3]=1;else eb=[1,1,1,0];if(sb)if(Array.isArray(E))if(ka=ib?N<E.length?E[N]:[0,0,0,0]:E,3===ka.length){for(oa=0;3>oa;++oa)hb[oa]=ka[oa];hb[oa]=1}else{if(4===ka.length){for(oa=0;4>oa;++oa)hb[oa]=ka[oa];!this.hasAlpha&&1>ka[3]&&(this.hasAlpha=!0)}}else hb[0]=hb[1]=hb[2]=0,hb[3]=1;else hb=[1,1,1,0];ka=.5;sb?Array.isArray(Y)?ka=N<Y.length?+Y[N]:12:Y?ka=+Y:this.useOrtho&&(ka=12):ka=0;qa=0;Array.isArray(ea)?qa=N<ea.length?+ea[N]:0:ea&&(qa=+ea);sb=Math.cos(qa);var tb=Math.sin(qa);qa=K[N];
for(oa=0;3>oa;++oa)V[oa]=Math.max(V[oa],qa[oa]),Q[oa]=Math.min(Q[oa],qa[oa]);oa=0;Array.isArray(P)?oa=N<P.length?P[N]:0:P&&(oa=P);var Aa=0;Array.isArray(T)?Aa=N<T.length?T[N]:0:T&&(Aa=T);oa*=0<oa?1-Pa[0][0]:0>oa?1+Pa[1][0]:1;Aa*=0<Aa?1-Pa[0][1]:0>Aa?1+Pa[1][1]:1;Pa=[oa,Aa];Aa=ra.cells||[];ra=ra.positions||[];for(oa=0;oa<Aa.length;++oa)for(var Ka=Aa[oa],Qa=0;3>Qa;++Qa){for(var Xa=0;3>Xa;++Xa)ma[3*Fa+Xa]=qa[Xa];for(Xa=0;4>Xa;++Xa)wa[4*Fa+Xa]=eb[Xa];ya[Fa]=da;Xa=ra[Ka[Qa]];na[2*Fa]=ka*(sb*Xa[0]-tb*Xa[1]+
Pa[0]);na[2*Fa+1]=ka*(tb*Xa[0]+sb*Xa[1]+Pa[1]);Fa+=1}Aa=ha.edges;ra=ha.positions;for(oa=0;oa<Aa.length;++oa)for(Ka=Aa[oa],Qa=0;2>Qa;++Qa){for(Xa=0;3>Xa;++Xa)ma[3*Ha+Xa]=qa[Xa];for(Xa=0;4>Xa;++Xa)wa[4*Ha+Xa]=hb[Xa];ya[Ha]=da;Xa=ra[Ka[Qa]];na[2*Ha]=ka*(sb*Xa[0]-tb*Xa[1]+Pa[0]);na[2*Ha+1]=ka*(tb*Xa[0]+sb*Xa[1]+Pa[1]);Ha+=1}}}this.bounds=[Q,V];this.points=K;this.pointCount=K.length;this.vertexCount=ca;this.lineVertexCount=la;this.pointBuffer.update(ma);this.colorBuffer.update(wa);this.glyphBuffer.update(na);
this.idBuffer.update(ya);r.free(ma);r.free(wa);r.free(na);r.free(ya)};b.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":305,"./lib/glyphs":306,"./lib/shaders":307,"gl-buffer":258,"gl-mat4/multiply":280,"gl-vao":332,"is-string-blank":444,"typedarray-pool":567}],
309:[function(b,y,F){b=b("glslify");F.boxVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position \x3d vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);F.boxFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor \x3d color;\n}\n"])},{glslify:413}],310:[function(b,y,F){function q(a,f,d){this.plot=a;this.boxBuffer=f;this.boxShader=d;this.enabled=!0;this.selectBox=
[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var n=b("gl-shader"),p=b("gl-buffer"),h=b("./lib/shaders");y.exports=function(a,f){var d=a.gl,l=p(d,[0,0,0,1,1,0,1,1]);d=n(d,h.boxVertex,h.boxFragment);l=new q(a,l,d);l.update(f);a.addOverlay(l);return l};b=q.prototype;b.draw=function(){if(this.enabled){var a=this.plot,f=this.selectBox,d=this.borderWidth,l=this.innerColor,
k=this.outerColor,c=this.borderColor,e=a.box,g=a.screenBox,m=a.dataBox,r=a.viewBox,u=a.pixelRatio;a=(f[0]-m[0])*(r[2]-r[0])/(m[2]-m[0])+r[0];var v=(f[1]-m[1])*(r[3]-r[1])/(m[3]-m[1])+r[1],w=(f[2]-m[0])*(r[2]-r[0])/(m[2]-m[0])+r[0];f=(f[3]-m[1])*(r[3]-r[1])/(m[3]-m[1])+r[1];a=Math.max(a,r[0]);v=Math.max(v,r[1]);w=Math.min(w,r[2]);f=Math.min(f,r[3]);w<a||f<v||(e.bind(),r=g[2]-g[0],g=g[3]-g[1],this.outerFill&&(e.drawBox(0,0,r,v,k),e.drawBox(0,v,a,f,k),e.drawBox(0,f,r,g,k),e.drawBox(w,v,r,f,k)),this.innerFill&&
e.drawBox(a,v,w,f,l),0<d&&(d*=u,e.drawBox(a-d,v-d,w+d,v+d,c),e.drawBox(a-d,f-d,w+d,f+d,c),e.drawBox(a-d,v-d,a+d,f+d,c),e.drawBox(w-d,v-d,w+d,f+d,c)))}};b.update=function(a){a=a||{};this.innerFill=!!a.innerFill;this.outerFill=!!a.outerFill;this.innerColor=(a.innerColor||[0,0,0,.5]).slice();this.outerColor=(a.outerColor||[0,0,0,.5]).slice();this.borderColor=(a.borderColor||[0,0,0,1]).slice();this.borderWidth=a.borderWidth||0;this.selectBox=(a.selectBox||this.selectBox).slice()};b.dispose=function(){this.boxBuffer.dispose();
this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":309,"gl-buffer":258,"gl-shader":312}],311:[function(b,y,F){function q(d,l,k,c,e){this.coord=[d,l];this.id=k;this.value=c;this.distance=e}function n(d,l,k){this.gl=d;this.fbo=l;this.buffer=k;this._readTimeout=null;var c=this;this._readCallback=function(){c.gl&&(l.bind(),d.readPixels(0,0,l.shape[0],l.shape[1],d.RGBA,d.UNSIGNED_BYTE,c.buffer),c._readTimeout=null)}}y.exports=function(d,l){var k=l[0],c=l[1];l=p(d,k,c,{});k=h.mallocUint8(k*
c*4);return new n(d,l,k)};var p=b("gl-fbo"),h=b("typedarray-pool"),a=b("ndarray"),f=b("bit-twiddle").nextPow2;b=n.prototype;Object.defineProperty(b,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(d){if(this.gl){this.fbo.shape=d;var l=this.fbo.shape[0],k=this.fbo.shape[1];if(k*l*4>this.buffer.length){h.free(this.buffer);for(var c=this.buffer=h.mallocUint8(f(k*l*4)),e=0;e<k*l*4;++e)c[e]=255}return d}}});b.begin=function(){var d=this.gl;d&&(this.fbo.bind(),d.clearColor(1,
1,1,1),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT))};b.end=function(){var d=this.gl;d&&(d.bindFramebuffer(d.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};b.query=function(d,l,k){if(!this.gl)return null;var c=this.fbo.shape.slice();d|=0;l|=0;"number"!==typeof k&&(k=1);var e=Math.min(Math.max(d-k,0),c[0])|0,g=Math.min(Math.max(d+k,0),c[0])|0;d=Math.min(Math.max(l-k,0),c[1])|0;l=Math.min(Math.max(l+k,0),c[1])|0;if(g<=e||l<=
d)return null;l=[g-e,l-d];c=a(this.buffer,[l[0],l[1],4],[4,4*c[0],1],4*(e+c[0]*d));l=c.hi(l[0],l[1],1);g=k;for(var m=1E8,r=-1,u=-1,v=l.shape[0],w=l.shape[1],D=0;D<v;D++)for(var C=0;C<w;C++){var x=l.get(D,C,0),A=l.get(D,C,1),B=l.get(D,C,2),t=l.get(D,C,3);if(255>x||255>A||255>B||255>t)x=g-D,A=k-C,x=x*x+A*A,x<m&&(m=x,r=D,u=C)}l=[r,u,m];g=l[0];k=l[1];if(0>g||Math.pow(this.radius,2)<l[2])return null;m=c.get(g,k,0);r=c.get(g,k,1);u=c.get(g,k,2);c=c.get(g,k,3);return new q(g+e|0,k+d|0,m,[r,u,c],Math.sqrt(l[2]))};
b.dispose=function(){this.gl&&(this.fbo.dispose(),h.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":97,"gl-fbo":266,ndarray:469,"typedarray-pool":567}],312:[function(b,y,F){function q(k){this.gl=k;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function n(k,c){return k.name<c.name?-1:1}var p=b("./lib/create-uniforms"),h=b("./lib/create-attributes"),
a=b("./lib/reflect"),f=b("./lib/shader-cache"),d=b("./lib/runtime-reflect"),l=b("./lib/GLError");b=q.prototype;b.bind=function(){this.program||this._relink();var k,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),e=this.gl.lastAttribCount;if(c>e)for(k=e;k<c;k++)this.gl.enableVertexAttribArray(k);else if(e>c)for(k=c;k<e;k++)this.gl.disableVertexAttribArray(k);this.gl.lastAttribCount=c;this.gl.useProgram(this.program)};b.dispose=function(){for(var k=this.gl.lastAttribCount,c=0;c<
k;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};b.update=function(k,c,e,g){function m(){u.program=f.program(v,u._vref,u._fref,w,D);for(var H=0;H<e.length;++H)G[H]=v.getUniformLocation(u.program,e[H].name)}if(!c||1===arguments.length){var r=k;k=r.vertex;c=r.fragment;e=r.uniforms;g=r.attributes}var u=this,
v=u.gl;r=u._vref;u._vref=f.shader(v,v.VERTEX_SHADER,k);r&&r.dispose();u.vertShader=u._vref.shader;r=this._fref;u._fref=f.shader(v,v.FRAGMENT_SHADER,c);r&&r.dispose();u.fragShader=u._fref.shader;if(!e||!g){r=v.createProgram();v.attachShader(r,u.fragShader);v.attachShader(r,u.vertShader);v.linkProgram(r);if(!v.getProgramParameter(r,v.LINK_STATUS))throw r=v.getProgramInfoLog(r),new l(r,"Error linking program:"+r);e=e||d.uniforms(v,r);g=g||d.attributes(v,r);v.deleteProgram(r)}g=g.slice();g.sort(n);r=
[];var w=[],D=[],C;for(C=0;C<g.length;++C){var x=g[C];if(0<=x.type.indexOf("mat")){for(var A=x.type.charAt(x.type.length-1)|0,B=Array(A),t=0;t<A;++t)B[t]=D.length,w.push(x.name+"["+t+"]"),"number"===typeof x.location?D.push(x.location+t):Array.isArray(x.location)&&x.location.length===A&&"number"===typeof x.location[t]?D.push(x.location[t]|0):D.push(-1);r.push({name:x.name,type:x.type,locations:B})}else r.push({name:x.name,type:x.type,locations:[D.length]}),w.push(x.name),"number"===typeof x.location?
D.push(x.location|0):D.push(-1)}for(C=x=0;C<D.length;++C)if(0>D[C]){for(;0<=D.indexOf(x);)x+=1;D[C]=x}var G=Array(e.length);m();u._relink=m;u.types={uniforms:a(e),attributes:a(g)};u.attributes=h(v,u,r,D);Object.defineProperty(u,"uniforms",p(v,u,e,G))};y.exports=function(k,c,e,g,m){k=new q(k);k.update(c,e,g,m);return k}},{"./lib/GLError":313,"./lib/create-attributes":314,"./lib/create-uniforms":315,"./lib/reflect":316,"./lib/runtime-reflect":317,"./lib/shader-cache":318}],313:[function(b,y,F){function q(n,
p,h){this.shortMessage=p||"";this.longMessage=h||"";this.rawError=n||"";this.message="gl-shader: "+(p||n||"")+(h?"\n"+h:"");this.stack=Error().stack}q.prototype=Error();q.prototype.name="GLError";q.prototype.constructor=q;y.exports=q},{}],314:[function(b,y,F){function q(a,f,d,l,k,c){this._gl=a;this._wrapper=f;this._index=d;this._locations=l;this._dimension=k;this._constFunc=c}function n(a,f,d,l,k,c,e){for(var g=["gl","v"],m=[],r=0;r<k;++r)g.push("x"+r),m.push("x"+r);g.push("if(x0.length\x3d\x3d\x3dvoid 0){return gl.vertexAttrib"+
k+"f(v,"+m.join()+")}else{return gl.vertexAttrib"+k+"fv(v,x0)}");var u=Function.apply(null,g),v=new q(a,f,d,l,k,u);Object.defineProperty(c,e,{set:function(w){a.disableVertexAttribArray(l[d]);u(a,l[d],w);return w},get:function(){return v},enumerable:!0})}function p(a,f,d,l,k,c,e){for(var g=Array(k),m=Array(k),r=0;r<k;++r)n(a,f,d[r],l,k,g,r),m[r]=g[r];Object.defineProperty(g,"location",{set:function(w){if(Array.isArray(w))for(var D=0;D<k;++D)m[D].location=w[D];else for(D=0;D<k;++D)m[D].location=w+D;
return w},get:function(){for(var w=Array(k),D=0;D<k;++D)w[D]=l[d[D]];return w},enumerable:!0});g.pointer=function(w,D,C,x){w=w||a.FLOAT;D=!!D;C=C||k*k;x=x||0;for(var A=0;A<k;++A){var B=l[d[A]];a.vertexAttribPointer(B,k,w,D,C,x+A*k);a.enableVertexAttribArray(B)}};var u=Array(k),v=a["vertexAttrib"+k+"fv"];Object.defineProperty(c,e,{set:function(w){for(var D=0;D<k;++D){var C=l[d[D]];a.disableVertexAttribArray(C);if(Array.isArray(w[0]))v.call(a,C,w[D]);else{for(var x=0;x<k;++x)u[x]=w[k*D+x];v.call(a,
C,u)}}return w},get:function(){return g},enumerable:!0})}y.exports=function(a,f,d,l){for(var k={},c=0,e=d.length;c<e;++c){var g=d[c],m=g.name,r=g.type;g=g.locations;switch(r){case "bool":case "int":case "float":n(a,f,g[0],l,1,k,m);break;default:if(0<=r.indexOf("vec")){var u=r.charCodeAt(r.length-1)-48;if(2>u||4<u)throw new h("","Invalid data type for attribute "+m+": "+r);n(a,f,g[0],l,u,k,m)}else if(0<=r.indexOf("mat")){u=r.charCodeAt(r.length-1)-48;if(2>u||4<u)throw new h("","Invalid data type for attribute "+
m+": "+r);p(a,f,g,l,u,k,m)}else throw new h("","Unknown data type for attribute "+m+": "+r);}}return k};var h=b("./GLError");b=q.prototype;b.pointer=function(a,f,d,l){var k=this._gl,c=this._locations[this._index];k.vertexAttribPointer(c,this._dimension,a||k.FLOAT,!!f,d||0,l||0);k.enableVertexAttribArray(c)};b.set=function(a,f,d,l){return this._constFunc(this._locations[this._index],a,f,d,l)};Object.defineProperty(b,"location",{get:function(){return this._locations[this._index]},set:function(a){a!==
this._locations[this._index]&&(this._locations[this._index]=a|0,this._wrapper.program=null);return a|0}})},{"./GLError":313}],315:[function(b,y,F){function q(a){return(new Function("y","return function(){return y}"))(a)}function n(a,f){for(var d=Array(a),l=0;l<a;++l)d[l]=f;return d}var p=b("./reflect"),h=b("./GLError");y.exports=function(a,f,d,l){function k(v,w,D){switch(D){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+w+"],obj"+v+")";case "float":return"gl.uniform1f(locations["+
w+"],obj"+v+")";default:var C=D.indexOf("vec");if(0<=C&&1>=C&&D.length===4+C){C=D.charCodeAt(D.length-1)-48;if(2>C||4<C)throw new h("","Invalid data type");switch(D.charAt(0)){case "b":case "i":return"gl.uniform"+C+"iv(locations["+w+"],obj"+v+")";case "v":return"gl.uniform"+C+"fv(locations["+w+"],obj"+v+")";default:throw new h("","Unrecognized data type for vector "+name+": "+D);}}else{if(0===D.indexOf("mat")&&4===D.length){C=D.charCodeAt(D.length-1)-48;if(2>C||4<C)throw new h("","Invalid uniform dimension type for matrix "+
name+": "+D);return"gl.uniformMatrix"+C+"fv(locations["+w+"],false,obj"+v+")"}throw new h("","Unknown uniform data type for "+name+": "+D);}}}function c(v,w){if("object"!==typeof w)return[[v,w]];var D=[],C;for(C in w){var x=w[C],A=v;A=parseInt(C)+""===C?A+("["+C+"]"):A+("."+C);"object"===typeof x?D.push.apply(D,c(A,x)):D.push([A,x])}return D}function e(v){var w=["return function updateProperty(obj){"];v=c("",v);for(var D=0;D<v.length;++D){var C=v[D],x=C[0];C=C[1];l[C]&&w.push(k(x,C,d[C].type))}w.push("return obj}");
return(new Function("gl","locations",w.join("\n")))(a,l)}function g(v){switch(v){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;default:var w=v.indexOf("vec");if(0<=w&&1>=w&&v.length===4+w){w=v.charCodeAt(v.length-1)-48;if(2>w||4<w)throw new h("","Invalid data type");return"b"===v.charAt(0)?n(w,!1):n(w,0)}if(0===v.indexOf("mat")&&4===v.length){w=v.charCodeAt(v.length-1)-48;if(2>w||4<w)throw new h("","Invalid uniform dimension type for matrix "+name+
": "+v);return n(w*w,0)}throw new h("","Unknown uniform data type for "+name+": "+v);}}function m(v,w,D){if("object"===typeof D){var C=r(D);Object.defineProperty(v,w,{get:q(C),set:e(D),enumerable:!0,configurable:!1})}else if(l[D]){C=Object;var x=C.defineProperty;var A=(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+D+"])}"))(a,f,l);x.call(C,v,w,{get:A,set:e(D),enumerable:!0,configurable:!1})}else v[w]=g(d[D].type)}function r(v){if(Array.isArray(v)){var w=
Array(v.length);for(var D=0;D<v.length;++D)m(w,D,v[D])}else for(D in w={},v)m(w,D,v[D]);return w}var u=p(d,!0);return{get:q(r(u)),set:e(u),enumerable:!0,configurable:!0}}},{"./GLError":313,"./reflect":316}],316:[function(b,y,F){y.exports=function(q,n){for(var p={},h=0;h<q.length;++h)for(var a=q[h].name.split("."),f=p,d=0;d<a.length;++d){var l=a[d].split("[");if(1<l.length){l[0]in f||(f[l[0]]=[]);f=f[l[0]];for(var k=1;k<l.length;++k){var c=parseInt(l[k]);k<l.length-1||d<a.length-1?(c in f||(f[c]=k<
l.length-1?[]:{}),f=f[c]):f[c]=n?h:q[h].type}}else d<a.length-1?(l[0]in f||(f[l[0]]={}),f=f[l[0]]):f[l[0]]=n?h:q[h].type}return p}},{}],317:[function(b,y,F){function q(h,a){if(!p){var f=Object.keys(n);p={};for(var d=0;d<f.length;++d){var l=f[d];p[h[l]]=n[l]}}return p[a]}F.uniforms=function(h,a){for(var f=h.getProgramParameter(a,h.ACTIVE_UNIFORMS),d=[],l=0;l<f;++l){var k=h.getActiveUniform(a,l);if(k){var c=q(h,k.type);if(1<k.size)for(var e=0;e<k.size;++e)d.push({name:k.name.replace("[0]","["+e+"]"),
type:c});else d.push({name:k.name,type:c})}}return d};F.attributes=function(h,a){for(var f=h.getProgramParameter(a,h.ACTIVE_ATTRIBUTES),d=[],l=0;l<f;++l){var k=h.getActiveAttrib(a,l);k&&d.push({name:k.name,type:q(h,k.type)})}return d};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",
SAMPLER_CUBE:"samplerCube"},p=null},{}],318:[function(b,y,F){function q(l,k,c,e,g,m,r){this.id=l;this.src=k;this.type=c;this.shader=e;this.count=m;this.programs=[];this.cache=r}function n(l){this.gl=l;this.shaders=[{},{}];this.programs={}}function p(l){var k=f.get(l);k||(k=new n(l),f.set(l,k));return k}F.shader=function(l,k,c){return p(l).getShaderReference(k,c)};F.program=function(l,k,c,e,g){return p(l).getProgram(k,c,e,g)};var h=b("./GLError"),a=b("gl-format-compiler-error"),f=new ("undefined"===
typeof WeakMap?b("weakmap-shim"):WeakMap),d=0;q.prototype.dispose=function(){if(0===--this.count){for(var l=this.cache,k=l.gl,c=this.programs,e=0,g=c.length;e<g;++e){var m=l.programs[c[e]];m&&(delete l.programs[e],k.deleteProgram(m))}k.deleteShader(this.shader);delete l.shaders[this.type===k.FRAGMENT_SHADER|0][this.src]}};b=n.prototype;b.getShaderReference=function(l,k){var c=this.gl,e=this.shaders[l===c.FRAGMENT_SHADER|0],g=e[k];if(g&&c.isShader(g.shader))g.count+=1;else{g=c.createShader(l);c.shaderSource(g,
k);c.compileShader(g);if(!c.getShaderParameter(g,c.COMPILE_STATUS)){c=c.getShaderInfoLog(g);try{var m=a(c,k,l)}catch(r){throw console.warn("Failed to format compiler error: "+r),new h(c,"Error compiling shader:\n"+c);}throw new h(c,m.short,m.long);}g=e[k]=new q(d++,k,l,g,[],1,this)}return g};b.getProgram=function(l,k,c,e){var g=[l.id,k.id,c.join(":"),e.join(":")].join("@"),m=this.programs[g];if(!m||!this.gl.isProgram(m)){m=this.programs;var r=this.gl,u=l.shader,v=k.shader,w=r.createProgram();r.attachShader(w,
u);r.attachShader(w,v);for(u=0;u<c.length;++u)r.bindAttribLocation(w,e[u],c[u]);r.linkProgram(w);if(!r.getProgramParameter(w,r.LINK_STATUS))throw l=r.getProgramInfoLog(w),new h(l,"Error linking program: "+l);m[g]=m=w;l.programs.push(g);k.programs.push(g)}return m}},{"./GLError":313,"gl-format-compiler-error":267,"weakmap-shim":577}],319:[function(b,y,F){function q(n){this.plot=n;this.enable=[!0,!0,!1,!1];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,
Infinity]}y.exports=function(n,p){var h=new q(n);h.update(p);n.addOverlay(h);return h};b=q.prototype;b.update=function(n){n=n||{};this.enable=(n.enable||[!0,!0,!1,!1]).slice();this.width=(n.width||[1,1,1,1]).slice();this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(p){return p.slice()});this.center=(n.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};b.draw=function(){var n=this.enable,p=this.width,h=this.color,a=this.center,f=this.plot,d=f.line,l=f.dataBox;
f=f.viewBox;d.bind();if(l[0]<=a[0]&&a[0]<=l[2]&&l[1]<=a[1]&&a[1]<=l[3]){var k=f[0]+(a[0]-l[0])/(l[2]-l[0])*(f[2]-f[0]);a=f[1]+(a[1]-l[1])/(l[3]-l[1])*(f[3]-f[1]);n[0]&&d.drawLine(k,a,f[0],a,p[0],h[0]);n[1]&&d.drawLine(k,a,k,f[1],p[1],h[1]);n[2]&&d.drawLine(k,a,f[2],a,p[2],h[2]);n[3]&&d.drawLine(k,a,k,f[3],p[3],h[3])}};b.dispose=function(){this.plot.removeOverlay(this)}},{}],320:[function(b,y,F){F=b("glslify");var q=b("gl-shader"),n=F(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition \x3d mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos \x3d projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset \x3d (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta \x3d weight * clipOffset * screenShape;\n  vec2 lineOffset \x3d normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   \x3d vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     \x3d color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
p=F(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor \x3d fragColor;\n}"]);y.exports=function(h){return q(h,n,p,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":312,glslify:413}],321:[function(b,y,F){function q(k,c,e,g){this.gl=k;this.buffer=c;this.vao=e;this.shader=g;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var n=b("gl-buffer"),p=b("gl-vao"),h=b("./shaders/index");y.exports=function(k,c){function e(v,w,D,C,x,A){v=[v,w,D,0,0,0,1];v[C+3]=1;v[C]=x;g.push.apply(g,v);v[6]=-1;g.push.apply(g,v);v[C]=A;g.push.apply(g,v);g.push.apply(g,v);v[6]=1;g.push.apply(g,v);v[C]=x;g.push.apply(g,v)}var g=[];e(0,0,0,0,0,1);e(0,0,0,1,0,1);e(0,0,0,2,0,1);e(1,0,0,1,-1,1);e(1,0,0,2,-1,1);e(0,1,0,0,-1,1);e(0,1,0,2,-1,1);e(0,0,1,0,
-1,1);e(0,0,1,1,-1,1);var m=n(k,g),r=p(k,[{type:k.FLOAT,buffer:m,size:3,offset:0,stride:28},{type:k.FLOAT,buffer:m,size:3,offset:12,stride:28},{type:k.FLOAT,buffer:m,size:1,offset:24,stride:28}]),u=h(k);u.attributes.position.location=0;u.attributes.color.location=1;u.attributes.weight.location=2;k=new q(k,m,r,u);k.update(c);return k};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=q.prototype;var f=[0,0,0],d=[0,0,0],l=[0,0];b.isTransparent=function(){return!1};b.drawTransparent=function(k){};b.draw=function(k){var c=
this.gl,e=this.vao,g=this.shader;e.bind();g.bind();var m=k.model||a,r=k.view||a;k=k.projection||a;if(this.axes)var u=this.axes.lastCubeProps.axis;for(var v=0;3>v;++v)u&&0>u[v]?(f[v]=this.bounds[0][v],d[v]=this.bounds[1][v]):(f[v]=this.bounds[1][v],d[v]=this.bounds[0][v]);l[0]=c.drawingBufferWidth;l[1]=c.drawingBufferHeight;g.uniforms.model=m;g.uniforms.view=r;g.uniforms.projection=k;g.uniforms.coordinates=[this.position,f,d];g.uniforms.colors=this.colors;g.uniforms.screenShape=l;for(v=0;3>v;++v)g.uniforms.lineWidth=
this.lineWidth[v]*this.pixelRatio,this.enabled[v]&&(e.draw(c.TRIANGLES,6,6*v),this.drawSides[v]&&e.draw(c.TRIANGLES,12,18+12*v));e.unbind()};b.update=function(k){k&&("bounds"in k&&(this.bounds=k.bounds),"position"in k&&(this.position=k.position),"lineWidth"in k&&(this.lineWidth=k.lineWidth),"colors"in k&&(this.colors=k.colors),"enabled"in k&&(this.enabled=k.enabled),"drawSides"in k&&(this.drawSides=k.drawSides))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":320,"gl-buffer":258,"gl-vao":332}],322:[function(b,y,F){var q=b("glslify");b=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * tubePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(tubePosition, 1.0);\n  vec4 t_position  \x3d view * tubePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d tubePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
y=q(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var n=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position \x3d projection * view * tubePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
q=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
F.meshShader={vertex:b,fragment:y,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};F.pickShader={vertex:n,fragment:q,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:413}],323:[function(b,y,F){var q=b("gl-vec3"),n=b("gl-vec4"),p="xyz xzy yxz yzx zxy zyx".split(" "),h=function(e,g,m,r){for(var u=0,v=0;v<e.length;v++)for(var w=e[v].velocities,D=0;D<w.length;D++)u=Math.max(u,
q.length(w[D]));e=e.map(function(J){var L=u,E=J.points,K=J.velocities;J=J.divergences;var N=[],O=[],Q=[],P=[],T=[],V=[],aa=0;n.create();for(var ba=n.create(),Y=0;Y<E.length;Y++){var ea=E[Y],da=K[Y],ca=J[Y];0===m&&(ca=.05*r);var la=q.length(da)/L;var pa=n.create();q.copy(pa,da);pa[3]=ca;for(da=0;8>da;da++)T[da]=[ea[0],ea[1],ea[2],da];if(0<P.length)for(da=0;8>da;da++)ea=(da+1)%8,N.push(P[da],T[da],T[ea],T[ea],P[ea],P[da]),Q.push(ba,pa,pa,pa,ba,ba),V.push(aa,la,la,la,aa,aa),ea=N.length,O.push([ea-6,
ea-5,ea-4],[ea-3,ea-2,ea-1]);aa=P;P=T;T=aa;ba=pa;aa=la}return{positions:N,cells:O,vectors:Q,vertexIntensity:V}});w=[];var C=[],x=[],A=[];for(v=0;v<e.length;v++){var B=e[v],t=w.length;w=w.concat(B.positions);x=x.concat(B.vectors);A=A.concat(B.vertexIntensity);for(D=0;D<B.cells.length;D++){var G=B.cells[D],H=[];C.push(H);for(var I=0;I<G.length;I++)H.push(G[I]+t)}}return{positions:w,cells:C,vectors:x,vertexIntensity:A,colormap:g}},a=function(e,g){var m=e.length,r;for(r=0;r<m;r++){var u=e[r];if(u===g)break;
else if(u>g)return r-1}return r},f=function(e,g,m){return e<g?g:e>m?m:e},d=function(e){var g=Infinity;e.sort(function(v,w){return v-w});for(var m=e.length,r=1;r<m;r++){var u=Math.abs(e[r]-e[r-1]);u<g&&(g=u)}return g},l=function(e){for(var g=[],m=[],r=[],u={},v={},w={},D=e.length,C=0;C<D;C++){var x=e[C],A=x[0],B=x[1];x=x[2];u[A]||(g.push(A),u[A]=!0);v[B]||(m.push(B),v[B]=!0);w[x]||(r.push(x),w[x]=!0)}e=d(g);m=d(m);r=d(r);r=Math.min(e,m,r);return isFinite(r)?r:1};y.exports=function(e,g){var m=e.startingPositions,
r=e.maxLength||1E3,u=e.tubeSize||1,v=e.absoluteTubeSize,w=e.gridFill||"+x+y+z",D,C,x;-1!==w.indexOf("-x")&&(D=!0);-1!==w.indexOf("-y")&&(C=!0);-1!==w.indexOf("-z")&&(x=!0);var A=p.indexOf(w.replace(/-/g,"").replace(/\+/g,""));var B=e.getVelocity||function(qa){var oa=e.vectors,ka=e.meshgrid;var ra=qa[0];var ha=qa[1],ma=qa[2];qa=ka[0].length;var wa=ka[1].length,na=ka[2].length,ya=a(ka[0],ra),Fa=a(ka[1],ha),Ha=a(ka[2],ma),eb=ya+1,hb=Fa+1,ob=Ha+1;ya=f(ya,0,qa-1);eb=f(eb,0,qa-1);Fa=f(Fa,0,wa-1);hb=f(hb,
0,wa-1);Ha=f(Ha,0,na-1);ob=f(ob,0,na-1);if(0>ya||0>Fa||0>Ha||eb>qa-1||hb>wa-1||ob>na-1)ra=q.create();else{var ib=ka[0][ya],Pa=ka[1][Fa],sb=ka[2][Ha];ra=(ra-ib)/(ka[0][eb]-ib);ha=(ha-Pa)/(ka[1][hb]-Pa);ka=(ma-sb)/(ka[2][ob]-sb);isFinite(ra)||(ra=.5);isFinite(ha)||(ha=.5);isFinite(ka)||(ka=.5);D&&(ya=qa-1-ya,eb=qa-1-eb);C&&(Fa=wa-1-Fa,hb=wa-1-hb);x&&(Ha=na-1-Ha,ob=na-1-ob);switch(A){case 5:Fa*=na;hb*=na;ya=ya*na*wa;eb=eb*na*wa;break;case 4:ya*=na;eb*=na;Fa=Fa*na*qa;hb=hb*na*qa;break;case 3:Ha*=wa;ob*=
wa;ya=ya*wa*na;eb=eb*wa*na;break;case 2:ya*=wa;eb*=wa;Ha=Ha*wa*qa;ob=ob*wa*qa;break;case 1:Ha*=qa;ob*=qa;Fa=Fa*qa*na;hb=hb*qa*na;break;default:Fa*=qa,hb*=qa,Ha=Ha*qa*wa,ob=ob*qa*wa}qa=oa[ya+Fa+Ha];wa=oa[ya+Fa+ob];na=oa[ya+hb+Ha];ya=oa[ya+hb+ob];ma=oa[eb+Fa+Ha];Fa=oa[eb+Fa+ob];Ha=oa[eb+hb+Ha];sb=oa[eb+hb+ob];oa=q.create();eb=q.create();hb=q.create();ob=q.create();q.lerp(oa,qa,ma,ra);q.lerp(eb,wa,Fa,ra);q.lerp(hb,na,Ha,ra);q.lerp(ob,ya,sb,ra);ra=q.create();qa=q.create();q.lerp(ra,oa,hb,ha);q.lerp(qa,
eb,ob,ha);ha=q.create();q.lerp(ha,ra,qa,ka);ra=ha}return ra};w=e.getDivergence||function(qa,oa){var ka=q.create();q.add(ka,qa,[1E-4,0,0]);var ra=B(ka);q.subtract(ra,ra,oa);q.scale(ra,ra,1E4);q.add(ka,qa,[0,1E-4,0]);var ha=B(ka);q.subtract(ha,ha,oa);q.scale(ha,ha,1E4);q.add(ka,qa,[0,0,1E-4]);qa=B(ka);q.subtract(qa,qa,oa);q.scale(qa,qa,1E4);q.add(ka,ra,ha);q.add(ka,ka,qa);return ka};var t=[],G=g[0][0],H=g[0][1],I=g[0][2],J=g[1][0],L=g[1][1],E=g[1][2],K=function(qa){var oa=qa[0],ka=qa[1];qa=qa[2];return!(oa<
G||oa>J||ka<H||ka>L||qa<I||qa>E)},N=10*q.distance(g[0],g[1])/r,O=N*N;g=1;var Q=0,P=m.length;1<P&&(g=l(m));for(var T=0;T<P;T++){var V=q.create();q.copy(V,m[T]);var aa=[V],ba=[],Y=B(V),ea=V;ba.push(Y);var da=[],ca=w(V,Y);ca=q.length(ca);isFinite(ca)&&ca>Q&&(Q=ca);da.push(ca);t.push({points:aa,velocities:ba,divergences:da});for(var la=0;la<100*r&&aa.length<r&&K(V);){la++;var pa=q.clone(Y);Y=q.squaredLength(pa);if(0===Y)break;else Y>O&&q.scale(pa,pa,N/Math.sqrt(Y));q.add(pa,pa,V);Y=B(pa);q.squaredDistance(ea,
pa)-O>-1E-4*O&&(aa.push(pa),ea=pa,ba.push(Y),ca=w(pa,Y),ca=q.length(ca),isFinite(ca)&&ca>Q&&(Q=ca),da.push(ca));V=pa}}m=h(t,e.colormap,Q,g);v?m.tubeScale=v:(0===Q&&(Q=1),m.tubeScale=.5*u*g/Q);return m};var k=b("./lib/shaders"),c=b("gl-cone3d").createMesh;y.exports.createTubeMesh=function(e,g){return c(e,g,{shaders:k,traceType:"streamtube"})}},{"./lib/shaders":322,"gl-cone3d":259,"gl-vec3":351,"gl-vec4":387}],324:[function(b,y,F){var q=b("gl-shader");b=b("glslify");var n=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate \x3d vec3(uv.zw, f.x);\n  worldCoordinate \x3d objectOffset + localCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  gl_Position \x3d clipPosition;\n  kill \x3d f.y;\n  value \x3d f.z;\n  planeCoordinate \x3d uv.xy;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * worldPosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
p=b(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill \x3e 0.0 ||\n    vColor.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N \x3d normalize(surfaceNormal);\n  vec3 V \x3d normalize(eyeDirection);\n  vec3 L \x3d normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor \x3d\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
h=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate \x3d permutation * vec3(uv.xy, height);\n  worldCoordinate \x3d objectOffset + dataCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  clipPosition.z +\x3d zOffset;\n\n  gl_Position \x3d clipPosition;\n  value \x3d f + objectOffset.z;\n  kill \x3d -1.0;\n  planeCoordinate \x3d uv.zw;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   \x3d vec3(1,0,0);\n  eyeDirection    \x3d vec3(0,1,0);\n  lightDirection  \x3d vec3(0,0,1);\n}\n"]),
a=b(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh \x3d 255.0 * v;\n  float upper \x3d floor(vh);\n  float lower \x3d fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux \x3d splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy \x3d splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor \x3d vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
F.createShader=function(f){f=q(f,n,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);f.attributes.uv.location=0;f.attributes.f.location=1;f.attributes.normal.location=2;return f};F.createPickShader=function(f){f=q(f,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);f.attributes.uv.location=0;f.attributes.f.location=1;f.attributes.normal.location=2;return f};F.createContourShader=function(f){f=q(f,h,p,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);f.attributes.uv.location=0;f.attributes.f.location=1;return f};F.createPickContourShader=function(f){f=q(f,h,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);f.attributes.uv.location=0;f.attributes.f.location=1;return f}},{"gl-shader":312,glslify:413}],325:[function(b,y,F){function q(Y,ea,da,ca,la){this.position=Y;this.index=ea;this.uv=da;this.level=ca;this.dataCoordinate=la}function n(Y,ea){Y=w([u({colormap:Y,nshades:O,format:"rgba"}).map(function(da,ca){ca=ea?
h(ca/255,ea):1;return[da[0],da[1],da[2],255*ca]})]);v.divseq(Y,255);return Y}function p(Y,ea,da,ca,la,pa,qa,oa,ka,ra,ha,ma,wa,na,ya){this.gl=Y;this.shape=ea;this.bounds=da;this.objectOffset=ya;this.intensityBounds=[];this._shader=ca;this._pickShader=la;this._coordinateBuffer=pa;this._vao=qa;this._colorMap=oa;this._contourShader=ka;this._contourPickShader=ra;this._contourBuffer=ha;this._contourVAO=ma;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=
new q([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=wa;this._dynamicVAO=na;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=
[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[D(r.mallocFloat(1024),[0,0]),D(r.mallocFloat(1024),[0,0]),D(r.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=
!1;this.opacity=this.pixelRatio=1;this.opacityscale=!1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.vertexColor=0;this.dirty=!0}function h(Y,ea){if(!ea||!ea.length)return 1;for(var da=0;da<ea.length&&!(2>ea.length);++da){if(ea[da][0]===Y)return ea[da][1];if(ea[da][0]>Y&&0<da)return Y=(ea[da][0]-Y)/(ea[da][0]-ea[da-1][0]),ea[da][1]*(1-Y)+Y*ea[da-1][1]}return 1}function a(Y,ea){var da,ca,la=ea.axes&&ea.axes.lastCubeProps.axis||
Q,pa=ea.showSurface,qa=ea.showContour;for(da=0;3>da;++da)for(pa=pa||ea.surfaceProject[da],ca=0;3>ca;++ca)qa=qa||ea.contourProject[da][ca];for(da=0;3>da;++da){var oa=P.projections[da];for(ca=0;16>ca;++ca)oa[ca]=0;for(ca=0;4>ca;++ca)oa[5*ca]=1;oa[5*da]=0;oa[12+da]=ea.axesBounds[+(0<la[da])][da];x(oa,Y.model,oa);var ka=P.clipBounds[da];for(oa=0;2>oa;++oa)for(ca=0;3>ca;++ca)ka[oa][ca]=Y.clipBounds[oa][ca];ka[0][da]=-1E8;ka[1][da]=1E8}P.showSurface=pa;P.showContour=qa;return P}function f(Y,ea){Y=Y||{};
ea=this.gl;ea.disable(ea.CULL_FACE);this._colorMap.bind(0);var da=T;da.model=Y.model||E;da.view=Y.view||E;da.projection=Y.projection||E;da.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]];da.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];da.objectOffset=this.objectOffset;da.contourColor=this.contourColor[0];da.inverseModel=A(da.inverseModel,da.model);for(Y=0;2>Y;++Y)for(var ca=da.clipBounds[Y],la=0;3>la;++la)ca[la]=Math.min(Math.max(this.clipBounds[Y][la],
-1E8),1E8);da.kambient=this.ambientLight;da.kdiffuse=this.diffuseLight;da.kspecular=this.specularLight;da.roughness=this.roughness;da.fresnel=this.fresnel;da.opacity=this.opacity;da.height=0;da.permutation=aa;da.vertexColor=this.vertexColor;ca=V;x(ca,da.view,da.model);x(ca,da.projection,ca);A(ca,ca);for(Y=0;3>Y;++Y)da.eyePosition[Y]=ca[12+Y]/ca[15];var pa=ca[15];for(Y=0;3>Y;++Y)pa+=this.lightPosition[Y]*ca[4*Y+3];for(Y=0;3>Y;++Y){var qa=ca[12+Y];for(la=0;3>la;++la)qa+=ca[4*la+Y]*this.lightPosition[la];
da.lightPosition[Y]=qa/pa}ca=a(da,this);if(ca.showSurface){this._shader.bind();this._shader.uniforms=da;this._vao.bind();this.showSurface&&this._vertexCount&&this._vao.draw(ea.TRIANGLES,this._vertexCount);for(Y=0;3>Y;++Y)this.surfaceProject[Y]&&this.vertexCount&&(this._shader.uniforms.model=ca.projections[Y],this._shader.uniforms.clipBounds=ca.clipBounds[Y],this._vao.draw(ea.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ca.showContour){pa=this._contourShader;da.kambient=1;da.kdiffuse=0;da.kspecular=
0;da.opacity=1;pa.bind();pa.uniforms=da;qa=this._contourVAO;qa.bind();for(Y=0;3>Y;++Y)for(pa.uniforms.permutation=N[Y],ea.lineWidth(this.contourWidth[Y]*this.pixelRatio),la=0;la<this.contourLevels[Y].length;++la){if(la===this.highlightLevel[Y])pa.uniforms.contourColor=this.highlightColor[Y],pa.uniforms.contourTint=this.highlightTint[Y];else if(0===la||la-1===this.highlightLevel[Y])pa.uniforms.contourColor=this.contourColor[Y],pa.uniforms.contourTint=this.contourTint[Y];this._contourCounts[Y][la]&&
(pa.uniforms.height=this.contourLevels[Y][la],qa.draw(ea.LINES,this._contourCounts[Y][la],this._contourOffsets[Y][la]))}for(Y=0;3>Y;++Y)for(pa.uniforms.model=ca.projections[Y],pa.uniforms.clipBounds=ca.clipBounds[Y],la=0;3>la;++la)if(this.contourProject[Y][la]){pa.uniforms.permutation=N[la];ea.lineWidth(this.contourWidth[la]*this.pixelRatio);for(var oa=0;oa<this.contourLevels[la].length;++oa){if(oa===this.highlightLevel[la])pa.uniforms.contourColor=this.highlightColor[la],pa.uniforms.contourTint=
this.highlightTint[la];else if(0===oa||oa-1===this.highlightLevel[la])pa.uniforms.contourColor=this.contourColor[la],pa.uniforms.contourTint=this.contourTint[la];this._contourCounts[la][oa]&&(pa.uniforms.height=this.contourLevels[la][oa],qa.draw(ea.LINES,this._contourCounts[la][oa],this._contourOffsets[la][oa]))}}qa.unbind();qa=this._dynamicVAO;qa.bind();for(Y=0;3>Y;++Y)if(0!==this._dynamicCounts[Y])for(pa.uniforms.model=da.model,pa.uniforms.clipBounds=da.clipBounds,pa.uniforms.permutation=N[Y],ea.lineWidth(this.dynamicWidth[Y]*
this.pixelRatio),pa.uniforms.contourColor=this.dynamicColor[Y],pa.uniforms.contourTint=this.dynamicTint[Y],pa.uniforms.height=this.dynamicLevel[Y],qa.draw(ea.LINES,this._dynamicCounts[Y],this._dynamicOffsets[Y]),la=0;3>la;++la)this.contourProject[la][Y]&&(pa.uniforms.model=ca.projections[la],pa.uniforms.clipBounds=ca.clipBounds[la],qa.draw(ea.LINES,this._dynamicCounts[Y],this._dynamicOffsets[Y]));qa.unbind()}}function d(Y,ea){return Array.isArray(Y)?[ea(Y[0]),ea(Y[1]),ea(Y[2])]:[ea(Y),ea(Y),ea(Y)]}
function l(Y){return Array.isArray(Y)?3===Y.length?[Y[0],Y[1],Y[2],1]:[Y[0],Y[1],Y[2],Y[3]]:[0,0,0,1]}function k(Y){if(Array.isArray(Y)){if(Array.isArray(Y))return[l(Y[0]),l(Y[1]),l(Y[2])];Y=l(Y);return[Y.slice(),Y.slice(),Y.slice()]}}y.exports=function(Y){var ea=Y.gl,da=G(ea),ca=I(ea),la=H(ea),pa=J(ea),qa=e(ea),oa=g(ea,[{buffer:qa,size:4,stride:L,offset:0},{buffer:qa,size:3,stride:L,offset:16},{buffer:qa,size:3,stride:L,offset:28}]),ka=e(ea),ra=g(ea,[{buffer:ka,size:4,stride:20,offset:0},{buffer:ka,
size:1,stride:20,offset:16}]),ha=e(ea),ma=g(ea,[{buffer:ha,size:2,type:ea.FLOAT}]),wa=m(ea,1,O,ea.RGBA,ea.UNSIGNED_BYTE);wa.minFilter=ea.LINEAR;wa.magFilter=ea.LINEAR;ea=new p(ea,[0,0],[[0,0,0],[0,0,0]],da,ca,qa,oa,wa,la,pa,ka,ra,ha,ma,[0,0,0]);da={levels:[[],[],[]]};for(var na in Y)da[na]=Y[na];da.colormap=da.colormap||"jet";ea.update(da);return ea};var c=b("bit-twiddle"),e=b("gl-buffer"),g=b("gl-vao"),m=b("gl-texture2d"),r=b("typedarray-pool"),u=b("colormap"),v=b("ndarray-ops"),w=b("ndarray-pack"),
D=b("ndarray"),C=b("surface-nets"),x=b("gl-mat4/multiply"),A=b("gl-mat4/invert"),B=b("binary-search-bounds"),t=b("ndarray-gradient");b=b("./lib/shaders");var G=b.createShader,H=b.createContourShader,I=b.createPickShader,J=b.createPickContourShader,L=40,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],K=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],N=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var Y=0;3>Y;++Y){var ea=N[Y],da=(Y+2)%3;ea[(Y+1)%3]=1;ea[da+3]=1;ea[Y+6]=1}})();var O=256;b=
p.prototype;b.isTransparent=function(){return 1>this.opacity||this.opacityscale};b.isOpaque=function(){if(this.opacityscale||1>this.opacity)return!1;if(1<=this.opacity)return!0;for(var Y=0;3>Y;++Y)if(0<this._contourCounts[Y].length)return!0;return!1};b.pickSlots=1;b.setPickBase=function(Y){this.pickId=Y};var Q=[0,0,0],P={showSurface:!1,showContour:!1,projections:[E.slice(),E.slice(),E.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},T={model:E,view:E,projection:E,inverseModel:E.slice(),
lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},V=E.slice(),aa=[1,0,0,0,1,0,0,0,1];b.draw=function(Y){return f.call(this,Y,!1)};b.drawTransparent=function(Y){return f.call(this,Y,!0)};var ba={model:E,view:E,projection:E,inverseModel:E,
clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};b.drawPick=function(Y){Y=Y||{};var ea=this.gl;ea.disable(ea.CULL_FACE);ba.model=Y.model||E;ba.view=Y.view||E;ba.projection=Y.projection||E;ba.shape=this._field[2].shape;ba.pickId=this.pickId/255;ba.lowerBound=this.bounds[0];ba.upperBound=this.bounds[1];ba.objectOffset=this.objectOffset;ba.permutation=
aa;for(Y=0;2>Y;++Y)for(var da=ba.clipBounds[Y],ca=0;3>ca;++ca)da[ca]=Math.min(Math.max(this.clipBounds[Y][ca],-1E8),1E8);da=a(ba,this);if(da.showSurface){this._pickShader.bind();this._pickShader.uniforms=ba;this._vao.bind();this._vao.draw(ea.TRIANGLES,this._vertexCount);for(Y=0;3>Y;++Y)this.surfaceProject[Y]&&(this._pickShader.uniforms.model=da.projections[Y],this._pickShader.uniforms.clipBounds=da.clipBounds[Y],this._vao.draw(ea.TRIANGLES,this._vertexCount));this._vao.unbind()}if(da.showContour){var la=
this._contourPickShader;la.bind();la.uniforms=ba;var pa=this._contourVAO;pa.bind();for(ca=0;3>ca;++ca)for(ea.lineWidth(this.contourWidth[ca]*this.pixelRatio),la.uniforms.permutation=N[ca],Y=0;Y<this.contourLevels[ca].length;++Y)this._contourCounts[ca][Y]&&(la.uniforms.height=this.contourLevels[ca][Y],pa.draw(ea.LINES,this._contourCounts[ca][Y],this._contourOffsets[ca][Y]));for(Y=0;3>Y;++Y)for(la.uniforms.model=da.projections[Y],la.uniforms.clipBounds=da.clipBounds[Y],ca=0;3>ca;++ca)if(this.contourProject[Y][ca]){la.uniforms.permutation=
N[ca];ea.lineWidth(this.contourWidth[ca]*this.pixelRatio);for(var qa=0;qa<this.contourLevels[ca].length;++qa)this._contourCounts[ca][qa]&&(la.uniforms.height=this.contourLevels[ca][qa],pa.draw(ea.LINES,this._contourCounts[ca][qa],this._contourOffsets[ca][qa]))}pa.unbind()}};b.pick=function(Y){if(!Y||Y.id!==this.pickId)return null;var ea=this._field[2].shape,da=this._pickResult,ca=ea[0]*(Y.value[0]+(Y.value[2]>>4)/16)/255,la=Math.floor(ca),pa=ca-la;Y=ea[1]*(Y.value[1]+(Y.value[2]&15)/16)/255;var qa=
Math.floor(Y),oa=Y-qa;la+=1;qa+=1;for(var ka=da.position,ra=ka[0]=ka[1]=ka[2]=0;2>ra;++ra)for(var ha=ra?pa:1-pa,ma=0;2>ma;++ma)for(var wa=la+ra,na=qa+ma,ya=ha*(ma?oa:1-oa),Fa=0;3>Fa;++Fa)ka[Fa]+=this._field[Fa].get(wa,na)*ya;ra=this._pickResult.level;for(ha=0;3>ha;++ha)ra[ha]=B.le(this.contourLevels[ha],ka[ha]),0>ra[ha]?0<this.contourLevels[ha].length&&(ra[ha]=0):ra[ha]<this.contourLevels[ha].length-1&&Math.abs(this.contourLevels[ha][ra[ha]]-ka[ha])>Math.abs(this.contourLevels[ha][ra[ha]+1]-ka[ha])&&
(ra[ha]+=1);da.index[0]=.5>pa?la:la+1;da.index[1]=.5>oa?qa:qa+1;da.uv[0]=ca/ea[0];da.uv[1]=Y/ea[1];for(Fa=0;3>Fa;++Fa)da.dataCoordinate[Fa]=this._field[Fa].get(da.index[0],da.index[1]);return da};b.padField=function(Y,ea){var da=ea.shape.slice(),ca=Y.shape.slice();v.assign(Y.lo(1,1).hi(da[0],da[1]),ea);v.assign(Y.lo(1).hi(da[0],1),ea.hi(da[0],1));v.assign(Y.lo(1,ca[1]-1).hi(da[0],1),ea.lo(0,da[1]-1).hi(da[0],1));v.assign(Y.lo(0,1).hi(1,da[1]),ea.hi(1));v.assign(Y.lo(ca[0]-1,1).hi(1,da[1]),ea.lo(da[0]-
1));Y.set(0,0,ea.get(0,0));Y.set(0,ca[1]-1,ea.get(0,da[1]-1));Y.set(ca[0]-1,0,ea.get(da[0]-1,0));Y.set(ca[0]-1,ca[1]-1,ea.get(da[0]-1,da[1]-1))};b.update=function(Y){Y=Y||{};this.objectOffset=Y.objectOffset||this.objectOffset;this.dirty=!0;"contourWidth"in Y&&(this.contourWidth=d(Y.contourWidth,Number));"showContour"in Y&&(this.showContour=d(Y.showContour,Boolean));"showSurface"in Y&&(this.showSurface=!!Y.showSurface);"contourTint"in Y&&(this.contourTint=d(Y.contourTint,Boolean));"contourColor"in
Y&&(this.contourColor=k(Y.contourColor));"contourProject"in Y&&(this.contourProject=d(Y.contourProject,function(db){return d(db,Boolean)}));"surfaceProject"in Y&&(this.surfaceProject=Y.surfaceProject);"dynamicColor"in Y&&(this.dynamicColor=k(Y.dynamicColor));"dynamicTint"in Y&&(this.dynamicTint=d(Y.dynamicTint,Number));"dynamicWidth"in Y&&(this.dynamicWidth=d(Y.dynamicWidth,Number));"opacity"in Y&&(this.opacity=Y.opacity);"opacityscale"in Y&&(this.opacityscale=Y.opacityscale);"colorBounds"in Y&&(this.colorBounds=
Y.colorBounds);"vertexColor"in Y&&(this.vertexColor=Y.vertexColor?1:0);var ea=Y.field||Y.coords&&Y.coords[2]||null,da=!1;ea||(ea=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0));if("field"in Y||"coords"in Y){var ca=(ea.shape[0]+2)*(ea.shape[1]+2);ca>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(c.nextPow2(ca)));this._field[2]=D(this._field[2].data,
[ea.shape[0]+2,ea.shape[1]+2]);this.padField(this._field[2],ea);ca=this.shape=ea.shape.slice();for(ea=0;2>ea;++ea)this._field[2].size>this._field[ea].data.length&&(r.freeFloat(this._field[ea].data),this._field[ea].data=r.mallocFloat(this._field[2].size)),this._field[ea]=D(this._field[ea].data,[ca[0]+2,ca[1]+2]);if(Y.coords){var la=Y.coords;if(!Array.isArray(la)||3!==la.length)throw Error("gl-surface: invalid coordinates for x/y");for(ea=0;2>ea;++ea){var pa=la[ea];for(qa=0;2>qa;++qa)if(pa.shape[qa]!==
ca[qa])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[ea],pa)}}else if(Y.ticks){qa=Y.ticks;if(!Array.isArray(qa)||2!==qa.length)throw Error("gl-surface: invalid ticks");for(ea=0;2>ea;++ea){la=qa[ea];if(Array.isArray(la)||la.length)la=D(la);if(la.shape[0]!==ca[ea])throw Error("gl-surface: invalid tick length");pa=D(la.data,ca);pa.stride[ea]=la.stride[0];pa.stride[ea^1]=0;this.padField(this._field[ea],pa)}}else{for(ea=0;2>ea;++ea)qa=[0,0],qa[ea]=1,this._field[ea]=D(this._field[ea].data,
[ca[0]+2,ca[1]+2],qa,0);this._field[0].set(0,0,0);for(var qa=0;qa<ca[0];++qa)this._field[0].set(qa+1,0,qa);this._field[0].set(ca[0]+1,0,ca[0]-1);this._field[1].set(0,0,0);for(qa=0;qa<ca[1];++qa)this._field[1].set(0,qa+1,qa);this._field[1].set(0,ca[1]+1,ca[1]-1)}qa=this._field;la=D(r.mallocFloat(6*qa[2].size),[3,ca[0]+2,ca[1]+2,2]);for(ea=0;3>ea;++ea)t(la.pick(ea),qa[ea],"mirror");var oa=D(r.mallocFloat(3*qa[2].size),[ca[0]+2,ca[1]+2,3]);for(ea=0;ea<ca[0]+2;++ea)for(qa=0;qa<ca[1]+2;++qa){pa=la.get(0,
ea,qa,0);var ka=la.get(0,ea,qa,1),ra=la.get(1,ea,qa,0),ha=la.get(1,ea,qa,1),ma=la.get(2,ea,qa,0),wa=la.get(2,ea,qa,1),na=ra*wa-ha*ma;ma=ma*ka-wa*pa;wa=pa*ha-ka*ra;pa=Math.sqrt(na*na+ma*ma+wa*wa);1E-8>pa?(pa=Math.max(Math.abs(na),Math.abs(ma),Math.abs(wa)),1E-8>pa?(wa=1,ma=na=0,pa=1):pa=1/pa):pa=1/Math.sqrt(pa);oa.set(ea,qa,0,na*pa);oa.set(ea,qa,1,ma*pa);oa.set(ea,qa,2,wa*pa)}r.free(la.data);var ya=[Infinity,Infinity,Infinity],Fa=[-Infinity,-Infinity,-Infinity],Ha=Infinity,eb=-Infinity,hb=r.mallocFloat(c.nextPow2((ca[0]-
1)*(ca[1]-1)*60)),ob=0;for(ea=la=0;ea<ca[0]-1;++ea)a:for(qa=0;qa<ca[1]-1;++qa){for(na=0;2>na;++na)for(ma=0;2>ma;++ma)for(pa=0;3>pa;++pa)if(ka=this._field[pa].get(1+ea+na,1+qa+ma),isNaN(ka)||!isFinite(ka))continue a;for(pa=0;6>pa;++pa){ra=ea+K[pa][0];ha=qa+K[pa][1];var ib=this._field[0].get(ra+1,ha+1),Pa=this._field[1].get(ra+1,ha+1);ka=this._field[2].get(ra+1,ha+1);na=oa.get(ra+1,ha+1,0);ma=oa.get(ra+1,ha+1,1);wa=oa.get(ra+1,ha+1,2);Y.intensity&&(sb=Y.intensity.get(ra,ha));var sb=Y.intensity?Y.intensity.get(ra,
ha):ka+this.objectOffset[2];hb[ob++]=ra;hb[ob++]=ha;hb[ob++]=ib;hb[ob++]=Pa;hb[ob++]=ka;hb[ob++]=0;hb[ob++]=sb;hb[ob++]=na;hb[ob++]=ma;hb[ob++]=wa;ya[0]=Math.min(ya[0],ib+this.objectOffset[0]);ya[1]=Math.min(ya[1],Pa+this.objectOffset[1]);ya[2]=Math.min(ya[2],ka+this.objectOffset[2]);Ha=Math.min(Ha,sb);Fa[0]=Math.max(Fa[0],ib+this.objectOffset[0]);Fa[1]=Math.max(Fa[1],Pa+this.objectOffset[1]);Fa[2]=Math.max(Fa[2],ka+this.objectOffset[2]);eb=Math.max(eb,sb);la+=1}}Y.intensityBounds&&(Ha=+Y.intensityBounds[0],
eb=+Y.intensityBounds[1]);for(ea=6;ea<ob;ea+=10)hb[ea]=(hb[ea]-Ha)/(eb-Ha);this._vertexCount=la;this._coordinateBuffer.update(hb.subarray(0,ob));r.freeFloat(hb);r.free(oa.data);this.bounds=[ya,Fa];this.intensity=Y.intensity||this._field[2];if(this.intensityBounds[0]!==Ha||this.intensityBounds[1]!==eb)da=!0;this.intensityBounds=[Ha,eb]}if("levels"in Y){ca=Y.levels;ca=Array.isArray(ca[0])?ca.slice():[[],[],ca];for(ea=0;3>ea;++ea)ca[ea]=ca[ea].slice(),ca[ea].sort(function(db,Ia){return db-Ia});for(ea=
0;3>ea;++ea)for(qa=0;qa<ca[ea].length;++qa)ca[ea][qa]-=this.objectOffset[ea];ea=0;a:for(;3>ea;++ea){if(ca[ea].length!==this.contourLevels[ea].length){da=!0;break}for(qa=0;qa<ca[ea].length;++qa)if(ca[ea][qa]!==this.contourLevels[ea][qa]){da=!0;break a}}this.contourLevels=ca}if(da){qa=this._field;ca=this.shape;da=[];for(oa=0;3>oa;++oa){wa=this.contourLevels[oa];ya=[];Fa=[];Ha=[0,0,0];for(ea=0;ea<wa.length;++ea){eb=C(this._field[oa],wa[ea]);ya.push(da.length/5|0);qa=la=0;a:for(;qa<eb.cells.length;++qa)for(hb=
eb.cells[qa],pa=0;2>pa;++pa){ob=eb.positions[hb[pa]];ka=ob[0];ib=Math.floor(ka)|0;Pa=ka-ib;ka=ob[1];sb=Math.floor(ka)|0;var tb=ka-sb,Aa=!1,Ka=0;b:for(;3>Ka;++Ka){Ha[Ka]=0;var Qa=(oa+Ka+1)%3;for(na=0;2>na;++na){var Xa=na?Pa:1-Pa;ra=Math.min(Math.max(ib+na,0),ca[0])|0;for(ma=0;2>ma;++ma){var pb=ma?tb:1-tb;ha=Math.min(Math.max(sb+ma,0),ca[1])|0;ka=2>Ka?this._field[Qa].get(ra,ha):(this.intensity.get(ra,ha)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(ka)||isNaN(ka)){Aa=
!0;break b}Ha[Ka]+=Xa*pb*ka}}}if(Aa){if(0<pa){for(pa=0;5>pa;++pa)da.pop();--la}continue a}else da.push(Ha[0],Ha[1],ob[0],ob[1],Ha[2]),la+=1}Fa.push(la)}this._contourOffsets[oa]=ya;this._contourCounts[oa]=Fa}ca=r.mallocFloat(da.length);for(ea=0;ea<da.length;++ea)ca[ea]=da[ea];this._contourBuffer.update(ca);r.freeFloat(ca)}Y.colormap&&this._colorMap.setPixels(n(Y.colormap,this.opacityscale))};b.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();
this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();this._dynamicVAO.dispose();for(var Y=0;3>Y;++Y)r.freeFloat(this._field[Y].data)};b.highlight=function(Y){var ea;if(Y){for(ea=0;3>ea;++ea)this.highlightLevel[ea]=this.enableHighlight[ea]?Y.level[ea]:-1;Y=this.snapToData?Y.dataCoordinate:Y.position;for(ea=0;3>ea;++ea)Y[ea]-=this.objectOffset[ea];if(this.enableDynamic[0]&&Y[0]!==this.dynamicLevel[0]||
this.enableDynamic[1]&&Y[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&Y[2]!==this.dynamicLevel[2]){for(var da=0,ca=this.shape,la=r.mallocFloat(12*ca[0]*ca[1]),pa=0;3>pa;++pa)if(this.enableDynamic[pa]){this.dynamicLevel[pa]=Y[pa];var qa=this._field[(pa+1)%3],oa=this._field[(pa+2)%3];ea=C(this._field[pa],Y[pa]);var ka=ea.cells,ra=ea.positions;this._dynamicOffsets[pa]=da;for(ea=0;ea<ka.length;++ea)for(var ha=ka[ea],ma=0;2>ma;++ma){var wa=ra[ha[ma]],na=+wa[0],ya=na|0,Fa=Math.min(ya+1,ca[0])|0,Ha=
na-ya,eb=1-Ha,hb=+wa[1];wa=hb|0;na=Math.min(wa+1,ca[1])|0;var ob=hb-wa,ib=1-ob;hb=eb*ib;eb*=ob;ib*=Ha;ob*=Ha;Ha=hb*qa.get(ya,wa)+eb*qa.get(ya,na)+ib*qa.get(Fa,wa)+ob*qa.get(Fa,na);ya=hb*oa.get(ya,wa)+eb*oa.get(ya,na)+ib*oa.get(Fa,wa)+ob*oa.get(Fa,na);if(isNaN(Ha)||isNaN(ya)){ma&&--da;break}la[2*da]=Ha;la[2*da+1]=ya;da+=1}this._dynamicCounts[pa]=da-this._dynamicOffsets[pa]}else this.dynamicLevel[pa]=NaN,this._dynamicCounts[pa]=0;this._dynamicBuffer.update(la.subarray(0,2*da));r.freeFloat(la)}}else this._dynamicCounts=
[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":324,"binary-search-bounds":96,"bit-twiddle":97,colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-texture2d":327,"gl-vao":332,ndarray:469,"ndarray-gradient":462,"ndarray-ops":464,"ndarray-pack":465,"surface-nets":542,"typedarray-pool":567}],326:[function(b,y,F){var q=b("css-font"),n=b("pick-by-alias"),p=b("regl"),h=b("gl-util/context");F=b("es6-weak-map");var a=b("color-normalize"),
f=b("font-atlas"),d=b("typedarray-pool"),l=b("parse-rect"),k=b("is-plain-obj"),c=b("parse-unit"),e=b("to-px"),g=b("detect-kerning"),m=b("object-assign"),r=b("font-measure"),u=b("flatten-vertex-data"),v=b("bit-twiddle").nextPow2,w=new F,D=!1;document.body&&(b=document.body.appendChild(document.createElement("div")),b.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(b).fontStretch&&(D=!0),document.body.removeChild(b));var C=function(x){"function"===typeof x&&x._gl&&x.prop&&
x.texture&&x.buffer?(x={regl:x},this.gl=x.regl._gl):this.gl=h(x);this.regl=(this.shader=w.get(this.gl))?this.shader.regl:x.regl||p({gl:this.gl});this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"});this.shader||(this.shader=this.createShader(),w.set(this.gl,this.shader));this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};
this.canvas=this.gl.canvas;this.update(k(x)?x:{})};C.prototype.createShader=function(){var x=this.regl,A=x({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:x.prop("count"),offset:x.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:x.this("sizeBuffer")},width:{offset:0,stride:8,buffer:x.this("sizeBuffer")},char:x.this("charBuffer"),position:x.this("position")},
uniforms:{atlasSize:function(B,t){return[t.atlas.width,t.atlas.height]},atlasDim:function(B,t){return[t.atlas.cols,t.atlas.rows]},atlas:function(B,t){return t.atlas.texture},charStep:function(B,t){return t.atlas.step},em:function(B,t){return t.atlas.em},color:x.prop("color"),opacity:x.prop("opacity"),viewport:x.this("viewportArray"),scale:x.this("scale"),align:x.prop("align"),baseline:x.prop("baseline"),translate:x.this("translate"),positionOffset:x.prop("positionOffset")},primitive:"points",viewport:x.this("viewport"),
vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+(C.normalViewport?"":"vec2 positionOffset \x3d vec2(positionOffset.x,- positionOffset.y);")+
"\n\n\t\t\t\tvec2 offset \x3d floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position \x3d (position + translate) * scale;\n\t\t\t\tposition +\x3d offset * scale;\n\n\t\t\t\t"+(C.normalViewport?"position.y \x3d 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord \x3d position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position \x3d vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize \x3d charStep;\n\n\t\t\t\tcharId.x \x3d mod(char, atlasDim.x);\n\t\t\t\tcharId.y \x3d floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth \x3d width * em;\n\n\t\t\t\tfontColor \x3d color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv \x3d gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep \x3d floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y \x3d charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth \x3d ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) \x3e halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) \x3c halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv +\x3d charId * charStep;\n\t\t\t\tuv \x3d uv / atlasSize;\n\n\t\t\t\tvec4 color \x3d fontColor;\n\t\t\t\tvec4 mask \x3d texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY \x3d lightness(mask);\n\t\t\t\t// float colorY \x3d lightness(color);\n\t\t\t\tcolor.a *\x3d maskY;\n\t\t\t\tcolor.a *\x3d opacity;\n\n\t\t\t\t// color.a +\x3d .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb +\x3d (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor \x3d color;\n\t\t\t}"});
return{regl:x,draw:A,atlas:{}}};C.prototype.update=function(x){var A=this;if("string"===typeof x)x={text:x};else if(!x)return;x=n(x,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=x.opacity&&(Array.isArray(x.opacity)?this.opacity=x.opacity.map(function(V){return parseFloat(V)}):this.opacity=parseFloat(x.opacity));null!=x.viewport&&(this.viewport=l(x.viewport),C.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=x.kerning&&(this.kerning=x.kerning);null!=x.offset&&("number"===typeof x.offset&&(x.offset=[x.offset,0]),this.positionOffset=u(x.offset));x.direction&&(this.direction=x.direction);x.range&&(this.range=
x.range,this.scale=[1/(x.range[2]-x.range[0]),1/(x.range[3]-x.range[1])],this.translate=[-x.range[0],-x.range[1]]);x.scale&&(this.scale=x.scale);x.translate&&(this.translate=x.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||x.font||(x.font=C.baseFontSize+"px sans-serif");var B=!1,t=!1;x.font&&(Array.isArray(x.font)?x.font:[x.font]).forEach(function(V,aa){if("string"===typeof V)try{V=q.parse(V)}catch(da){V=
q.parse(C.baseFontSize+"px "+V)}else V=q.parse(q.stringify(V));var ba=q.stringify({size:C.baseFontSize,family:V.family,stretch:D?V.stretch:void 0,variant:V.variant,weight:V.weight,style:V.style}),Y=c(V.size);Y=Math.round(Y[0]*e(Y[1]));Y!==A.fontSize[aa]&&(t=!0,A.fontSize[aa]=Y);if(!A.font[aa]||ba!=A.font[aa].baseString)if(B=!0,A.font[aa]=C.fonts[ba],!A.font[aa]){Y=V.family.join(", ");var ea=[V.style];V.style!=V.variant&&ea.push(V.variant);V.variant!=V.weight&&ea.push(V.weight);D&&V.weight!=V.stretch&&
ea.push(V.stretch);A.font[aa]={baseString:ba,family:Y,weight:V.weight,stretch:V.stretch,style:V.style,variant:V.variant,width:{},kerning:{},metrics:r(Y,{origin:"top",fontSize:C.baseFontSize,fontStyle:ea.join(" ")})};C.fonts[ba]=A.font[aa]}});(B||t)&&this.font.forEach(function(V,aa){var ba=q.stringify({size:A.fontSize[aa],family:V.family,stretch:D?V.stretch:void 0,variant:V.variant,weight:V.weight,style:V.style});A.fontAtlas[aa]=A.shader.atlas[ba];A.fontAtlas[aa]||(A.shader.atlas[ba]=A.fontAtlas[aa]=
{fontString:ba,step:2*Math.ceil(A.fontSize[aa]*V.metrics.bottom*.5),em:A.fontSize[aa],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:A.regl.texture()});null==x.text&&(x.text=A.text)});if("string"===typeof x.text&&x.position&&2<x.position.length){for(var G=Array(.5*x.position.length),H=0;H<G.length;H++)G[H]=x.text;x.text=G}if(null!=x.text||B){this.textOffsets=[0];if(Array.isArray(x.text)){this.count=x.text[0].length;this.counts=[this.count];for(G=1;G<x.text.length;G++)this.textOffsets[G]=this.textOffsets[G-
1]+x.text[G-1].length,this.count+=x.text[G].length,this.counts.push(x.text[G].length);this.text=x.text.join("")}else this.text=x.text,this.count=this.text.length,this.counts=[this.count];var I=[];this.font.forEach(function(V,aa){C.atlasContext.font=V.baseString;aa=A.fontAtlas[aa];for(var ba=0;ba<A.text.length;ba++){var Y=A.text.charAt(ba);null==aa.ids[Y]&&(aa.ids[Y]=aa.chars.length,aa.chars.push(Y),I.push(Y));if(null==V.width[Y]&&(V.width[Y]=C.atlasContext.measureText(Y).width/C.baseFontSize,A.kerning)){var ea=
[],da;for(da in V.width)ea.push(da+Y,Y+da);m(V.kerning,g(V.family,{pairs:ea}))}}})}if(x.position)if(2<x.position.length){G=!x.position[0].length;H=d.mallocFloat(2*this.count);for(var J=0,L=0;J<this.counts.length;J++){var E=this.counts[J];if(G)for(var K=0;K<E;K++)H[L++]=x.position[2*J],H[L++]=x.position[2*J+1];else for(K=0;K<E;K++)H[L++]=x.position[J][0],H[L++]=x.position[J][1]}this.position.call?this.position({type:"float",data:H}):this.position=this.regl.buffer({type:"float",data:H});d.freeFloat(H)}else this.position.destroy&&
this.position.destroy(),this.position={constant:x.position};if(x.text||B){G=d.mallocUint8(this.count);H=d.mallocFloat(2*this.count);this.textWidth=[];for(L=J=0;J<this.counts.length;J++){E=this.counts[J];K=this.font[J]||this.font[0];for(var N=this.fontAtlas[J]||this.fontAtlas[0],O=0;O<E;O++){var Q=this.text.charAt(L),P=this.text.charAt(L-1);G[L]=N.ids[Q];H[2*L]=K.width[Q];if(O){var T=H[2*L-1]+.5*H[2*L-2]+.5*H[2*L];this.kerning&&(Q=K.kerning[P+Q])&&(T+=.001*Q);H[2*L+1]=T}else H[2*L+1]=.5*H[2*L];L++}this.textWidth.push(H.length?
.5*H[2*L-2]+H[2*L-1]:0)}x.align||(x.align=this.align);this.charBuffer({data:G,type:"uint8",usage:"stream"});this.sizeBuffer({data:H,type:"float",usage:"stream"});d.freeUint8(G);d.freeFloat(H);I.length&&this.font.forEach(function(V,aa){V=A.fontAtlas[aa];aa=V.step;var ba=Math.min(Math.floor(C.maxAtlasSize/aa),V.chars.length),Y=Math.ceil(V.chars.length/ba),ea=v(ba*aa),da=v(Y*aa);V.width=ea;V.height=da;V.rows=Y;V.cols=ba;V.em&&V.texture({data:f({canvas:C.atlasCanvas,font:V.fontString,chars:V.chars,shape:[ea,
da],step:[aa,aa]})})})}x.align&&(this.align=x.align,this.alignOffset=this.textWidth.map(function(V,aa){aa=Array.isArray(A.align)?1<A.align.length?A.align[aa]:A.align[0]:A.align;if("number"===typeof aa)return aa;switch(aa){case "right":case "end":return-V;case "center":case "centre":case "middle":return.5*-V}return 0}));null==this.baseline&&null==x.baseline&&(x.baseline=0);null!=x.baseline&&(this.baseline=x.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=
this.baseline.map(function(V,aa){aa=(A.font[aa]||A.font[0]).metrics;var ba=.5*aa.bottom;ba="number"===typeof V?ba+(V-aa.baseline):ba+-aa[V];C.normalViewport||(ba*=-1);return ba}));if(null!=x.color)if(x.color||(x.color="transparent"),"string"!==typeof x.color&&isNaN(x.color)){if("number"===typeof x.color[0]&&x.color.length>this.counts.length)for(H=x.color.length,G=d.mallocUint8(H),J=(x.color.subarray||x.color.slice).bind(x.color),L=0;L<H;L+=4)G.set(a(J(L,L+4),"uint8"),L);else for(H=x.color.length,
G=d.mallocUint8(4*H),J=0;J<H;J++)G.set(a(x.color[J]||0,"uint8"),4*J);this.color=G}else this.color=a(x.color,"uint8");if(x.position||x.text||x.color||x.baseline||x.align||x.font||x.offset||x.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||
0,.5*this.positionOffset.length||0)),G=0;G<this.batch.length;G++)this.batch[G]={count:1<this.counts.length?this.counts[G]:this.counts[0],offset:1<this.textOffsets.length?this.textOffsets[G]:this.textOffsets[0],color:this.color?4>=this.color.length?this.color:this.color.subarray(4*G,4*G+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[G]:this.opacity,baseline:null!=this.baselineOffset[G]?this.baselineOffset[G]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[G]?this.alignOffset[G]:
this.alignOffset[0]:0,atlas:this.fontAtlas[G]||this.fontAtlas[0],positionOffset:2<this.positionOffset.length?this.positionOffset.subarray(2*G,2*G+2):this.positionOffset};else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]};C.prototype.destroy=function(){};C.prototype.kerning=
!0;C.prototype.position={constant:new Float32Array(2)};C.prototype.translate=null;C.prototype.scale=null;C.prototype.font=null;C.prototype.text="";C.prototype.positionOffset=[0,0];C.prototype.opacity=1;C.prototype.color=new Uint8Array([0,0,0,255]);C.prototype.alignOffset=[0,0];C.normalViewport=!1;C.maxAtlasSize=1024;C.atlasCanvas=document.createElement("canvas");C.atlasContext=C.atlasCanvas.getContext("2d",{alpha:!1});C.baseFontSize=64;C.fonts={};y.exports=C},{"bit-twiddle":97,"color-normalize":125,
"css-font":144,"detect-kerning":172,"es6-weak-map":233,"flatten-vertex-data":244,"font-atlas":245,"font-measure":246,"gl-util/context":328,"is-plain-obj":443,"object-assign":473,"parse-rect":478,"parse-unit":480,"pick-by-alias":485,regl:512,"to-px":550,"typedarray-pool":567}],327:[function(b,y,F){function q(m){return"undefined"!=typeof HTMLCanvasElement&&m instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&m instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&m instanceof
HTMLVideoElement||"undefined"!=typeof ImageData&&m instanceof ImageData}function n(m,r,u){var v=m.gl,w=v.getParameter(v.MAX_TEXTURE_SIZE);if(0>r||r>w||0>u||u>w)throw Error("gl-texture2d: Invalid texture size");m._shape=[r,u];m.bind();v.texImage2D(v.TEXTURE_2D,0,m.format,r,u,0,m.format,m.type,null);m._mipLevels=[0];return m}function p(m,r,u,v,w,D){this.gl=m;this.handle=r;this.format=w;this.type=D;this._shape=[u,v];this._mipLevels=[0];this._minFilter=this._magFilter=m.NEAREST;this._wrapT=this._wrapS=
m.CLAMP_TO_EDGE;this._anisoSamples=1;var C=this;m=[this._wrapS,this._wrapT];Object.defineProperties(m,[{get:function(){return C._wrapS},set:function(x){return C.wrapS=x}},{get:function(){return C._wrapT},set:function(x){return C.wrapT=x}}]);this._wrapVector=m;m=[this._shape[0],this._shape[1]];Object.defineProperties(m,[{get:function(){return C._shape[0]},set:function(x){return C.width=x}},{get:function(){return C._shape[1]},set:function(x){return C.height=x}}]);this._shapeVector=m}function h(m,r){return 3===
m.length?1===r[2]&&r[1]===m[0]*m[2]&&r[0]===m[2]:1===r[0]&&r[1]===m[0]}function a(m){var r=m.createTexture();m.bindTexture(m.TEXTURE_2D,r);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE);return r}function f(m,r,u,v,w){var D=m.getParameter(m.MAX_TEXTURE_SIZE);if(0>r||r>D||0>u||u>D)throw Error("gl-texture2d: Invalid texture shape");
if(w===m.FLOAT&&!m.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");D=a(m);m.texImage2D(m.TEXTURE_2D,0,v,r,u,0,v,w,null);return new p(m,D,r,u,v,w)}var d=b("ndarray"),l=b("ndarray-ops"),k=b("typedarray-pool");y.exports=function(m){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");c||(c=[m.LINEAR,m.NEAREST_MIPMAP_LINEAR,m.LINEAR_MIPMAP_NEAREST,m.LINEAR_MIPMAP_NEAREST],e=[m.NEAREST,m.LINEAR,
m.NEAREST_MIPMAP_NEAREST,m.NEAREST_MIPMAP_LINEAR,m.LINEAR_MIPMAP_NEAREST,m.LINEAR_MIPMAP_LINEAR],g=[m.REPEAT,m.CLAMP_TO_EDGE,m.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return f(m,arguments[1],arguments[2],arguments[3]||m.RGBA,arguments[4]||m.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return f(m,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||m.RGBA,arguments[3]||m.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var r=arguments[1],u=q(r)?r:r.raw;if(u){var v=r.width|0;r=r.height|0;
var w=arguments[2]||m.RGBA,D=arguments[3]||m.UNSIGNED_BYTE,C=a(m);m.texImage2D(m.TEXTURE_2D,0,w,w,D,u);return new p(m,C,v,r,w,D)}if(r.shape&&r.data&&r.stride){C=r;var x=C.dtype;u=C.shape.slice();r=m.getParameter(m.MAX_TEXTURE_SIZE);if(0>u[0]||u[0]>r||0>u[1]||u[1]>r)throw Error("gl-texture2d: Invalid texture size");r=h(u,C.stride.slice());"float32"===x?w=m.FLOAT:"float64"===x?(w=m.FLOAT,r=!1,x="float32"):"uint8"===x?w=m.UNSIGNED_BYTE:(w=m.UNSIGNED_BYTE,r=!1,x="uint8");if(2===u.length)D=m.LUMINANCE,
u=[u[0],u[1],1],C=d(C.data,u,[C.stride[0],C.stride[1],1],C.offset);else if(3===u.length)if(1===u[2])D=m.ALPHA;else if(2===u[2])D=m.LUMINANCE_ALPHA;else if(3===u[2])D=m.RGB;else if(4===u[2])D=m.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");w!==m.FLOAT||m.getExtension("OES_texture_float")||(w=m.UNSIGNED_BYTE,r=!1);var A=C.size;if(r)C=0===C.offset&&C.data.length===A?C.data:C.data.subarray(C.offset,C.offset+A);else{var B=
[u[2],u[2]*u[0],1];v=k.malloc(A,x);B=d(v,u,B,0);"float32"!==x&&"float64"!==x||w!==m.UNSIGNED_BYTE?l.assign(B,C):l.muls(B,C,255);C=v.subarray(0,A)}x=a(m);m.texImage2D(m.TEXTURE_2D,0,D,u[0],u[1],0,D,w,C);r||k.free(v);return new p(m,x,u[0],u[1],D,w)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");};var c=null,e=null,g=null;b=p.prototype;Object.defineProperties(b,{minFilter:{get:function(){return this._minFilter},set:function(m){this.bind();var r=this.gl;this.type===r.FLOAT&&
0<=c.indexOf(m)&&!r.getExtension("OES_texture_float_linear")&&(m=r.NEAREST);if(0>e.indexOf(m))throw Error("gl-texture2d: Unknown filter mode "+m);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,m);return this._minFilter=m}},magFilter:{get:function(){return this._magFilter},set:function(m){this.bind();var r=this.gl;this.type===r.FLOAT&&0<=c.indexOf(m)&&!r.getExtension("OES_texture_float_linear")&&(m=r.NEAREST);if(0>e.indexOf(m))throw Error("gl-texture2d: Unknown filter mode "+m);r.texParameteri(r.TEXTURE_2D,
r.TEXTURE_MAG_FILTER,m);return this._magFilter=m}},mipSamples:{get:function(){return this._anisoSamples},set:function(m){var r=this._anisoSamples;this._anisoSamples=Math.max(m,1)|0;r!==this._anisoSamples&&(m=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,m.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(m){this.bind();if(0>g.indexOf(m))throw Error("gl-texture2d: Unknown wrap mode "+
m);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,m);return this._wrapS=m}},wrapT:{get:function(){return this._wrapT},set:function(m){this.bind();if(0>g.indexOf(m))throw Error("gl-texture2d: Unknown wrap mode "+m);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,m);return this._wrapT=m}},wrap:{get:function(){return this._wrapVector},set:function(m){Array.isArray(m)||(m=[m,m]);if(2!==m.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var r=
0;2>r;++r)if(0>g.indexOf(m[r]))throw Error("gl-texture2d: Unknown wrap mode "+m);this._wrapS=m[0];this._wrapT=m[1];r=this.gl;this.bind();r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT);return m}},shape:{get:function(){return this._shapeVector},set:function(m){if(!Array.isArray(m))m=[m|0,m|0];else if(2!==m.length)throw Error("gl-texture2d: Invalid texture shape");n(this,m[0]|0,m[1]|0);return[m[0]|0,m[1]|0]}},width:{get:function(){return this._shape[0]},
set:function(m){m|=0;n(this,m,this._shape[1]);return m}},height:{get:function(){return this._shape[1]},set:function(m){m|=0;n(this,this._shape[0],m);return m}}});b.bind=function(m){var r=this.gl;void 0!==m&&r.activeTexture(r.TEXTURE0+(m|0));r.bindTexture(r.TEXTURE_2D,this.handle);return void 0!==m?m|0:r.getParameter(r.ACTIVE_TEXTURE)-r.TEXTURE0};b.dispose=function(){this.gl.deleteTexture(this.handle)};b.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var m=Math.min(this._shape[0],
this._shape[1]),r=0;0<m;++r,m>>>=1)0>this._mipLevels.indexOf(r)&&this._mipLevels.push(r)};b.setPixels=function(m,r,u,v){var w=this.gl;this.bind();Array.isArray(r)?(v=u,u=r[1]|0,r=r[0]|0):(r=r||0,u=u||0);v=v||0;var D=q(m)?m:m.raw;if(D)0>this._mipLevels.indexOf(v)?(w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,this.type,D),this._mipLevels.push(v)):w.texSubImage2D(w.TEXTURE_2D,v,r,u,this.format,this.type,D);else if(m.shape&&m.stride&&m.data){if(2>m.shape.length||r+m.shape[1]>this._shape[1]>>>v||
u+m.shape[0]>this._shape[0]>>>v||0>r||0>u)throw Error("gl-texture2d: Texture dimensions are out of bounds");D=this.format;var C=this.type,x=this._mipLevels,A=m.dtype,B=m.shape.slice();if(2>B.length||3<B.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var t=h(B,m.stride.slice());"float32"===A?A=w.FLOAT:"float64"===A?(A=w.FLOAT,t=!1):"uint8"===A?A=w.UNSIGNED_BYTE:(A=w.UNSIGNED_BYTE,t=!1);if(2===B.length){var G=w.LUMINANCE;B=[B[0],B[1],1];m=d(m.data,B,[m.stride[0],m.stride[1],1],
m.offset)}else if(3===B.length)if(1===B[2])G=w.ALPHA;else if(2===B[2])G=w.LUMINANCE_ALPHA;else if(3===B[2])G=w.RGB;else if(4===B[2])G=w.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");G!==w.LUMINANCE&&G!==w.ALPHA||D!==w.LUMINANCE&&D!==w.ALPHA||(G=D);if(G!==D)throw Error("gl-texture2d: Incompatible texture format for setPixels");G=m.size;var H=0>x.indexOf(v);H&&x.push(v);A===C&&t?0===m.offset&&m.data.length===G?H?w.texImage2D(w.TEXTURE_2D,
v,D,B[0],B[1],0,D,C,m.data):w.texSubImage2D(w.TEXTURE_2D,v,r,u,B[0],B[1],D,C,m.data):H?w.texImage2D(w.TEXTURE_2D,v,D,B[0],B[1],0,D,C,m.data.subarray(m.offset,m.offset+G)):w.texSubImage2D(w.TEXTURE_2D,v,r,u,B[0],B[1],D,C,m.data.subarray(m.offset,m.offset+G)):(x=C===w.FLOAT?k.mallocFloat32(G):k.mallocUint8(G),t=d(x,B,[B[2],B[2]*B[0],1]),A===w.FLOAT&&C===w.UNSIGNED_BYTE?l.muls(t,m,255):l.assign(t,m),H?w.texImage2D(w.TEXTURE_2D,v,D,B[0],B[1],0,D,C,x.subarray(0,G)):w.texSubImage2D(w.TEXTURE_2D,v,r,u,B[0],
B[1],D,C,x.subarray(0,G)),C===w.FLOAT?k.freeFloat32(x):k.freeUint8(x))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:469,"ndarray-ops":464,"typedarray-pool":567}],328:[function(b,y,F){(function(q){function n(f){if(f.container)if(f.container==document.body)document.body.style.width||(f.canvas.width=f.width||f.pixelRatio*q.innerWidth),document.body.style.height||(f.canvas.height=f.height||f.pixelRatio*q.innerHeight);else{var d=f.container.getBoundingClientRect();f.canvas.width=
f.width||d.right-d.left;f.canvas.height=f.height||d.bottom-d.top}}function p(f){return"function"===typeof f.getContext&&"width"in f&&"height"in f}function h(){var f=document.createElement("canvas");f.style.position="absolute";f.style.top=0;f.style.left=0;return f}var a=b("pick-by-alias");y.exports=function(f){f?"string"===typeof f&&(f={container:f}):f={};f=p(f)?{container:f}:"string"===typeof f.nodeName&&"function"===typeof f.appendChild&&"function"===typeof f.getBoundingClientRect?{container:f}:
"function"===typeof f.drawArrays||"function"===typeof f.drawElements?{gl:f}:a(f,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0);f.pixelRatio||(f.pixelRatio=q.pixelRatio||1);if(f.gl)return f.gl;f.canvas&&(f.container=f.canvas.parentNode);if(f.container){if("string"===typeof f.container){var d=
document.querySelector(f.container);if(!d)throw Error("Element "+f.container+" is not found");f.container=d}p(f.container)?(f.canvas=f.container,f.container=f.canvas.parentNode):f.canvas||(f.canvas=h(),f.container.appendChild(f.canvas),n(f))}else if(!f.canvas)if("undefined"!==typeof document)f.container=document.body||document.documentElement,f.canvas=h(),f.container.appendChild(f.canvas),n(f);else throw Error("Not DOM environment. Use headless-gl.");if(!f.gl)try{f.gl=f.canvas.getContext("webgl",
f.attrs)}catch(l){try{f.gl=f.canvas.getContext("experimental-webgl",f.attrs)}catch(k){f.gl=f.canvas.getContext("webgl-experimental",f.attrs)}}return f.gl}}).call(this,"undefined"!==typeof fb?fb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"pick-by-alias":485}],329:[function(b,y,F){y.exports=function(q,n,p){n?n.bind():q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,null);n=q.getParameter(q.MAX_VERTEX_ATTRIBS)|0;if(p){if(p.length>n)throw Error("gl-vao: Too many vertex attributes");for(var h=
0;h<p.length;++h){var a=p[h];if(a.buffer){var f=a.size||4,d=a.type||q.FLOAT,l=!!a.normalized,k=a.stride||0,c=a.offset||0;a.buffer.bind();q.enableVertexAttribArray(h);q.vertexAttribPointer(h,f,d,l,k,c)}else{if("number"===typeof a)q.vertexAttrib1f(h,a);else if(1===a.length)q.vertexAttrib1f(h,a[0]);else if(2===a.length)q.vertexAttrib2f(h,a[0],a[1]);else if(3===a.length)q.vertexAttrib3f(h,a[0],a[1],a[2]);else if(4===a.length)q.vertexAttrib4f(h,a[0],a[1],a[2],a[3]);else throw Error("gl-vao: Invalid vertex attribute");
q.disableVertexAttribArray(h)}}}else q.bindBuffer(q.ARRAY_BUFFER,null),h=0;for(;h<n;++h)q.disableVertexAttribArray(h)}},{}],330:[function(b,y,F){function q(p){this.gl=p;this._attributes=this._elements=null;this._elementsType=p.UNSIGNED_SHORT}var n=b("./do-bind.js");q.prototype.bind=function(){n(this.gl,this._elements,this._attributes)};q.prototype.update=function(p,h,a){this._elements=h;this._attributes=p;this._elementsType=a||this.gl.UNSIGNED_SHORT};q.prototype.dispose=function(){};q.prototype.unbind=
function(){};q.prototype.draw=function(p,h,a){a=a||0;var f=this.gl;this._elements?f.drawElements(p,h,this._elementsType,a):f.drawArrays(p,a,h)};y.exports=function(p){return new q(p)}},{"./do-bind.js":329}],331:[function(b,y,F){function q(h,a,f,d,l,k){this.location=h;this.dimension=a;this.a=f;this.b=d;this.c=l;this.d=k}function n(h,a,f){this.gl=h;this._ext=a;this.handle=f;this._attribs=[];this._useElements=!1;this._elementsType=h.UNSIGNED_SHORT}var p=b("./do-bind.js");q.prototype.bind=function(h){switch(this.dimension){case 1:h.vertexAttrib1f(this.location,
this.a);break;case 2:h.vertexAttrib2f(this.location,this.a,this.b);break;case 3:h.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:h.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var h=0;h<this._attribs.length;++h)this._attribs[h].bind(this.gl)};n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};n.prototype.update=
function(h,a,f){this.bind();p(this.gl,a,h);this.unbind();this._attribs.length=0;if(h)for(var d=0;d<h.length;++d){var l=h[d];"number"===typeof l?this._attribs.push(new q(d,1,l)):Array.isArray(l)&&this._attribs.push(new q(d,l.length,l[0],l[1],l[2],l[3]))}this._useElements=!!a;this._elementsType=f||this.gl.UNSIGNED_SHORT};n.prototype.draw=function(h,a,f){f=f||0;var d=this.gl;this._useElements?d.drawElements(h,a,this._elementsType,f):d.drawArrays(h,f,a)};y.exports=function(h,a){return new n(h,a,a.createVertexArrayOES())}},
{"./do-bind.js":329}],332:[function(b,y,F){function q(h){this.bindVertexArrayOES=h.bindVertexArray.bind(h);this.createVertexArrayOES=h.createVertexArray.bind(h);this.deleteVertexArrayOES=h.deleteVertexArray.bind(h)}var n=b("./lib/vao-native.js"),p=b("./lib/vao-emulated.js");y.exports=function(h,a,f,d){var l=h.createVertexArray?new q(h):h.getExtension("OES_vertex_array_object");h=l?n(h,l):p(h);h.update(a,f,d);return h}},{"./lib/vao-emulated.js":330,"./lib/vao-native.js":331}],333:[function(b,y,F){y.exports=
function(q,n,p){q[0]=n[0]+p[0];q[1]=n[1]+p[1];q[2]=n[2]+p[2];return q}},{}],334:[function(b,y,F){y.exports=function(h,a){h=q(h[0],h[1],h[2]);a=q(a[0],a[1],a[2]);n(h,h);n(a,a);a=p(h,a);return 1<a?0:Math.acos(a)};var q=b("./fromValues"),n=b("./normalize"),p=b("./dot")},{"./dot":344,"./fromValues":350,"./normalize":361}],335:[function(b,y,F){y.exports=function(q,n){q[0]=Math.ceil(n[0]);q[1]=Math.ceil(n[1]);q[2]=Math.ceil(n[2]);return q}},{}],336:[function(b,y,F){y.exports=function(q){var n=new Float32Array(3);
n[0]=q[0];n[1]=q[1];n[2]=q[2];return n}},{}],337:[function(b,y,F){y.exports=function(q,n){q[0]=n[0];q[1]=n[1];q[2]=n[2];return q}},{}],338:[function(b,y,F){y.exports=function(){var q=new Float32Array(3);q[0]=0;q[1]=0;q[2]=0;return q}},{}],339:[function(b,y,F){y.exports=function(q,n,p){var h=n[0],a=n[1];n=n[2];var f=p[0],d=p[1];p=p[2];q[0]=a*p-n*d;q[1]=n*f-h*p;q[2]=h*d-a*f;return q}},{}],340:[function(b,y,F){y.exports=b("./distance")},{"./distance":341}],341:[function(b,y,F){y.exports=function(q,n){var p=
n[0]-q[0],h=n[1]-q[1];q=n[2]-q[2];return Math.sqrt(p*p+h*h+q*q)}},{}],342:[function(b,y,F){y.exports=b("./divide")},{"./divide":343}],343:[function(b,y,F){y.exports=function(q,n,p){q[0]=n[0]/p[0];q[1]=n[1]/p[1];q[2]=n[2]/p[2];return q}},{}],344:[function(b,y,F){y.exports=function(q,n){return q[0]*n[0]+q[1]*n[1]+q[2]*n[2]}},{}],345:[function(b,y,F){y.exports=1E-6},{}],346:[function(b,y,F){y.exports=function(n,p){var h=n[0],a=n[1];n=n[2];var f=p[0],d=p[1];p=p[2];return Math.abs(h-f)<=q*Math.max(1,Math.abs(h),
Math.abs(f))&&Math.abs(a-d)<=q*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(n-p)<=q*Math.max(1,Math.abs(n),Math.abs(p))};var q=b("./epsilon")},{"./epsilon":345}],347:[function(b,y,F){y.exports=function(q,n){return q[0]===n[0]&&q[1]===n[1]&&q[2]===n[2]}},{}],348:[function(b,y,F){y.exports=function(q,n){q[0]=Math.floor(n[0]);q[1]=Math.floor(n[1]);q[2]=Math.floor(n[2]);return q}},{}],349:[function(b,y,F){y.exports=function(n,p,h,a,f,d){p||(p=3);h||(h=0);for(a=a?Math.min(a*p+h,n.length):n.length;h<a;h+=
p)q[0]=n[h],q[1]=n[h+1],q[2]=n[h+2],f(q,q,d),n[h]=q[0],n[h+1]=q[1],n[h+2]=q[2];return n};var q=b("./create")()},{"./create":338}],350:[function(b,y,F){y.exports=function(q,n,p){var h=new Float32Array(3);h[0]=q;h[1]=n;h[2]=p;return h}},{}],351:[function(b,y,F){y.exports={EPSILON:b("./epsilon"),create:b("./create"),clone:b("./clone"),angle:b("./angle"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),equals:b("./equals"),exactEquals:b("./exactEquals"),add:b("./add"),subtract:b("./subtract"),
sub:b("./sub"),multiply:b("./multiply"),mul:b("./mul"),divide:b("./divide"),div:b("./div"),min:b("./min"),max:b("./max"),floor:b("./floor"),ceil:b("./ceil"),round:b("./round"),scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),dist:b("./dist"),squaredDistance:b("./squaredDistance"),sqrDist:b("./sqrDist"),length:b("./length"),len:b("./len"),squaredLength:b("./squaredLength"),sqrLen:b("./sqrLen"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),
cross:b("./cross"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformMat3:b("./transformMat3"),transformQuat:b("./transformQuat"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),forEach:b("./forEach")}},{"./add":333,"./angle":334,"./ceil":335,"./clone":336,"./copy":337,"./create":338,"./cross":339,"./dist":340,"./distance":341,"./div":342,"./divide":343,"./dot":344,"./epsilon":345,"./equals":346,"./exactEquals":347,"./floor":348,"./forEach":349,
"./fromValues":350,"./inverse":352,"./len":353,"./length":354,"./lerp":355,"./max":356,"./min":357,"./mul":358,"./multiply":359,"./negate":360,"./normalize":361,"./random":362,"./rotateX":363,"./rotateY":364,"./rotateZ":365,"./round":366,"./scale":367,"./scaleAndAdd":368,"./set":369,"./sqrDist":370,"./sqrLen":371,"./squaredDistance":372,"./squaredLength":373,"./sub":374,"./subtract":375,"./transformMat3":376,"./transformMat4":377,"./transformQuat":378}],352:[function(b,y,F){y.exports=function(q,n){q[0]=
1/n[0];q[1]=1/n[1];q[2]=1/n[2];return q}},{}],353:[function(b,y,F){y.exports=b("./length")},{"./length":354}],354:[function(b,y,F){y.exports=function(q){var n=q[0],p=q[1];q=q[2];return Math.sqrt(n*n+p*p+q*q)}},{}],355:[function(b,y,F){y.exports=function(q,n,p,h){var a=n[0],f=n[1];n=n[2];q[0]=a+h*(p[0]-a);q[1]=f+h*(p[1]-f);q[2]=n+h*(p[2]-n);return q}},{}],356:[function(b,y,F){y.exports=function(q,n,p){q[0]=Math.max(n[0],p[0]);q[1]=Math.max(n[1],p[1]);q[2]=Math.max(n[2],p[2]);return q}},{}],357:[function(b,
y,F){y.exports=function(q,n,p){q[0]=Math.min(n[0],p[0]);q[1]=Math.min(n[1],p[1]);q[2]=Math.min(n[2],p[2]);return q}},{}],358:[function(b,y,F){y.exports=b("./multiply")},{"./multiply":359}],359:[function(b,y,F){y.exports=function(q,n,p){q[0]=n[0]*p[0];q[1]=n[1]*p[1];q[2]=n[2]*p[2];return q}},{}],360:[function(b,y,F){y.exports=function(q,n){q[0]=-n[0];q[1]=-n[1];q[2]=-n[2];return q}},{}],361:[function(b,y,F){y.exports=function(q,n){var p=n[0],h=n[1],a=n[2];p=p*p+h*h+a*a;0<p&&(p=1/Math.sqrt(p),q[0]=
n[0]*p,q[1]=n[1]*p,q[2]=n[2]*p);return q}},{}],362:[function(b,y,F){y.exports=function(q,n){n=n||1;var p=2*Math.random()*Math.PI,h=2*Math.random()-1,a=Math.sqrt(1-h*h)*n;q[0]=Math.cos(p)*a;q[1]=Math.sin(p)*a;q[2]=h*n;return q}},{}],363:[function(b,y,F){y.exports=function(q,n,p,h){var a=p[1];p=p[2];var f=n[1]-a,d=n[2]-p,l=Math.sin(h);h=Math.cos(h);q[0]=n[0];q[1]=a+f*h-d*l;q[2]=p+f*l+d*h;return q}},{}],364:[function(b,y,F){y.exports=function(q,n,p,h){var a=p[0];p=p[2];var f=n[0]-a,d=n[2]-p,l=Math.sin(h);
h=Math.cos(h);q[0]=a+d*l+f*h;q[1]=n[1];q[2]=p+d*h-f*l;return q}},{}],365:[function(b,y,F){y.exports=function(q,n,p,h){var a=p[0];p=p[1];var f=n[0]-a,d=n[1]-p,l=Math.sin(h);h=Math.cos(h);q[0]=a+f*h-d*l;q[1]=p+f*l+d*h;q[2]=n[2];return q}},{}],366:[function(b,y,F){y.exports=function(q,n){q[0]=Math.round(n[0]);q[1]=Math.round(n[1]);q[2]=Math.round(n[2]);return q}},{}],367:[function(b,y,F){y.exports=function(q,n,p){q[0]=n[0]*p;q[1]=n[1]*p;q[2]=n[2]*p;return q}},{}],368:[function(b,y,F){y.exports=function(q,
n,p,h){q[0]=n[0]+p[0]*h;q[1]=n[1]+p[1]*h;q[2]=n[2]+p[2]*h;return q}},{}],369:[function(b,y,F){y.exports=function(q,n,p,h){q[0]=n;q[1]=p;q[2]=h;return q}},{}],370:[function(b,y,F){y.exports=b("./squaredDistance")},{"./squaredDistance":372}],371:[function(b,y,F){y.exports=b("./squaredLength")},{"./squaredLength":373}],372:[function(b,y,F){y.exports=function(q,n){var p=n[0]-q[0],h=n[1]-q[1];q=n[2]-q[2];return p*p+h*h+q*q}},{}],373:[function(b,y,F){y.exports=function(q){var n=q[0],p=q[1];q=q[2];return n*
n+p*p+q*q}},{}],374:[function(b,y,F){y.exports=b("./subtract")},{"./subtract":375}],375:[function(b,y,F){y.exports=function(q,n,p){q[0]=n[0]-p[0];q[1]=n[1]-p[1];q[2]=n[2]-p[2];return q}},{}],376:[function(b,y,F){y.exports=function(q,n,p){var h=n[0],a=n[1];n=n[2];q[0]=h*p[0]+a*p[3]+n*p[6];q[1]=h*p[1]+a*p[4]+n*p[7];q[2]=h*p[2]+a*p[5]+n*p[8];return q}},{}],377:[function(b,y,F){y.exports=function(q,n,p){var h=n[0],a=n[1];n=n[2];var f=p[3]*h+p[7]*a+p[11]*n+p[15];f=f||1;q[0]=(p[0]*h+p[4]*a+p[8]*n+p[12])/
f;q[1]=(p[1]*h+p[5]*a+p[9]*n+p[13])/f;q[2]=(p[2]*h+p[6]*a+p[10]*n+p[14])/f;return q}},{}],378:[function(b,y,F){y.exports=function(q,n,p){var h=n[0],a=n[1],f=n[2];n=p[0];var d=p[1],l=p[2];p=p[3];var k=p*h+d*f-l*a,c=p*a+l*h-n*f,e=p*f+n*a-d*h;h=-n*h-d*a-l*f;q[0]=k*p+h*-n+c*-l-e*-d;q[1]=c*p+h*-d+e*-n-k*-l;q[2]=e*p+h*-l+k*-d-c*-n;return q}},{}],379:[function(b,y,F){y.exports=function(q,n,p){q[0]=n[0]+p[0];q[1]=n[1]+p[1];q[2]=n[2]+p[2];q[3]=n[3]+p[3];return q}},{}],380:[function(b,y,F){y.exports=function(q){var n=
new Float32Array(4);n[0]=q[0];n[1]=q[1];n[2]=q[2];n[3]=q[3];return n}},{}],381:[function(b,y,F){y.exports=function(q,n){q[0]=n[0];q[1]=n[1];q[2]=n[2];q[3]=n[3];return q}},{}],382:[function(b,y,F){y.exports=function(){var q=new Float32Array(4);q[0]=0;q[1]=0;q[2]=0;q[3]=0;return q}},{}],383:[function(b,y,F){y.exports=function(q,n){var p=n[0]-q[0],h=n[1]-q[1],a=n[2]-q[2];q=n[3]-q[3];return Math.sqrt(p*p+h*h+a*a+q*q)}},{}],384:[function(b,y,F){y.exports=function(q,n,p){q[0]=n[0]/p[0];q[1]=n[1]/p[1];q[2]=
n[2]/p[2];q[3]=n[3]/p[3];return q}},{}],385:[function(b,y,F){y.exports=function(q,n){return q[0]*n[0]+q[1]*n[1]+q[2]*n[2]+q[3]*n[3]}},{}],386:[function(b,y,F){y.exports=function(q,n,p,h){var a=new Float32Array(4);a[0]=q;a[1]=n;a[2]=p;a[3]=h;return a}},{}],387:[function(b,y,F){y.exports={create:b("./create"),clone:b("./clone"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),add:b("./add"),subtract:b("./subtract"),multiply:b("./multiply"),divide:b("./divide"),min:b("./min"),max:b("./max"),
scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),squaredDistance:b("./squaredDistance"),length:b("./length"),squaredLength:b("./squaredLength"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformQuat:b("./transformQuat")}},{"./add":379,"./clone":380,"./copy":381,"./create":382,"./distance":383,"./divide":384,"./dot":385,"./fromValues":386,"./inverse":388,"./length":389,
"./lerp":390,"./max":391,"./min":392,"./multiply":393,"./negate":394,"./normalize":395,"./random":396,"./scale":397,"./scaleAndAdd":398,"./set":399,"./squaredDistance":400,"./squaredLength":401,"./subtract":402,"./transformMat4":403,"./transformQuat":404}],388:[function(b,y,F){y.exports=function(q,n){q[0]=1/n[0];q[1]=1/n[1];q[2]=1/n[2];q[3]=1/n[3];return q}},{}],389:[function(b,y,F){y.exports=function(q){var n=q[0],p=q[1],h=q[2];q=q[3];return Math.sqrt(n*n+p*p+h*h+q*q)}},{}],390:[function(b,y,F){y.exports=
function(q,n,p,h){var a=n[0],f=n[1],d=n[2];n=n[3];q[0]=a+h*(p[0]-a);q[1]=f+h*(p[1]-f);q[2]=d+h*(p[2]-d);q[3]=n+h*(p[3]-n);return q}},{}],391:[function(b,y,F){y.exports=function(q,n,p){q[0]=Math.max(n[0],p[0]);q[1]=Math.max(n[1],p[1]);q[2]=Math.max(n[2],p[2]);q[3]=Math.max(n[3],p[3]);return q}},{}],392:[function(b,y,F){y.exports=function(q,n,p){q[0]=Math.min(n[0],p[0]);q[1]=Math.min(n[1],p[1]);q[2]=Math.min(n[2],p[2]);q[3]=Math.min(n[3],p[3]);return q}},{}],393:[function(b,y,F){y.exports=function(q,
n,p){q[0]=n[0]*p[0];q[1]=n[1]*p[1];q[2]=n[2]*p[2];q[3]=n[3]*p[3];return q}},{}],394:[function(b,y,F){y.exports=function(q,n){q[0]=-n[0];q[1]=-n[1];q[2]=-n[2];q[3]=-n[3];return q}},{}],395:[function(b,y,F){y.exports=function(q,n){var p=n[0],h=n[1],a=n[2];n=n[3];var f=p*p+h*h+a*a+n*n;0<f&&(f=1/Math.sqrt(f),q[0]=p*f,q[1]=h*f,q[2]=a*f,q[3]=n*f);return q}},{}],396:[function(b,y,F){var q=b("./normalize"),n=b("./scale");y.exports=function(p,h){h=h||1;p[0]=Math.random();p[1]=Math.random();p[2]=Math.random();
p[3]=Math.random();q(p,p);n(p,p,h);return p}},{"./normalize":395,"./scale":397}],397:[function(b,y,F){y.exports=function(q,n,p){q[0]=n[0]*p;q[1]=n[1]*p;q[2]=n[2]*p;q[3]=n[3]*p;return q}},{}],398:[function(b,y,F){y.exports=function(q,n,p,h){q[0]=n[0]+p[0]*h;q[1]=n[1]+p[1]*h;q[2]=n[2]+p[2]*h;q[3]=n[3]+p[3]*h;return q}},{}],399:[function(b,y,F){y.exports=function(q,n,p,h,a){q[0]=n;q[1]=p;q[2]=h;q[3]=a;return q}},{}],400:[function(b,y,F){y.exports=function(q,n){var p=n[0]-q[0],h=n[1]-q[1],a=n[2]-q[2];
q=n[3]-q[3];return p*p+h*h+a*a+q*q}},{}],401:[function(b,y,F){y.exports=function(q){var n=q[0],p=q[1],h=q[2];q=q[3];return n*n+p*p+h*h+q*q}},{}],402:[function(b,y,F){y.exports=function(q,n,p){q[0]=n[0]-p[0];q[1]=n[1]-p[1];q[2]=n[2]-p[2];q[3]=n[3]-p[3];return q}},{}],403:[function(b,y,F){y.exports=function(q,n,p){var h=n[0],a=n[1],f=n[2];n=n[3];q[0]=p[0]*h+p[4]*a+p[8]*f+p[12]*n;q[1]=p[1]*h+p[5]*a+p[9]*f+p[13]*n;q[2]=p[2]*h+p[6]*a+p[10]*f+p[14]*n;q[3]=p[3]*h+p[7]*a+p[11]*f+p[15]*n;return q}},{}],404:[function(b,
y,F){y.exports=function(q,n,p){var h=n[0],a=n[1],f=n[2],d=p[0],l=p[1],k=p[2];p=p[3];var c=p*h+l*f-k*a,e=p*a+k*h-d*f,g=p*f+d*a-l*h;h=-d*h-l*a-k*f;q[0]=c*p+h*-d+e*-k-g*-l;q[1]=e*p+h*-l+g*-d-c*-k;q[2]=g*p+h*-k+c*-l-e*-d;q[3]=n[3];return q}},{}],405:[function(b,y,F){var q=b("glsl-tokenizer"),n=b("atob-lite");y.exports=function(p){p=Array.isArray(p)?p:q(p);for(var h=0;h<p.length;h++){var a=p[h];if("preprocessor"===a.type&&(a=a.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&a[2])return p=a[2],(a[1]?
n(p):p).trim()}}},{"atob-lite":77,"glsl-tokenizer":412}],406:[function(b,y,F){y.exports=function(A){function B(ka){ka.length&&T.push({type:x[N],data:ka,position:ba,line:V,column:aa})}function t(){P=P.length?[]:P;if("/"===Q&&"*"===O)return ba=K+E-1,N=l,Q=O,E+1;if("/"===Q&&"/"===O)return ba=K+E-1,N=k,Q=O,E+1;if("#"===O)return N=c,ba=K+E,E;if(/\s/.test(O))return N=w,ba=K+E,E;Y=/\d/.test(O);ea=/[^\w_]/.test(O);ba=K+E;N=Y?g:ea?e:d;return E}function G(){if(("\r"===O||"\n"===O)&&"\\"!==Q)return B(P.join("")),
N=f,E;P.push(O);Q=O;return E+1}function H(){if("."===Q&&/\d/.test(O))return N=m,E;if("/"===Q&&"*"===O)return N=l,E;if("/"===Q&&"/"===O)return N=k,E;if("."===O&&P.length){for(;I(P););N=m;return E}if(";"===O||")"===O||"("===O){if(P.length)for(;I(P););B(O);N=f;return E+1}var ka=2===P.length&&"\x3d"!==O;if(/[\w_\d\s]/.test(O)||ka){for(;I(P););N=f;return E}P.push(O);Q=O;return E+1}function I(ka){var ra=0;do{var ha=n.indexOf(ka.slice(0,ka.length+ra).join(""));var ma=n[ha];if(-1===ha){if(0<ra--+ka.length)continue;
ma=ka.slice(0,1).join("")}B(ma);ba+=ma.length;P=P.slice(ma.length);return P.length}while(1)}function J(){if("."===O||/[eE]/.test(O))return P.push(O),N=m,Q=O,E+1;if("x"===O&&1===P.length&&"0"===P[0])return N=C,P.push(O),Q=O,E+1;if(/[^\d]/.test(O))return B(P.join("")),N=f,E;P.push(O);Q=O;return E+1}function L(){"f"===O&&(P.push(O),Q=O,E+=1);if(/[eE]/.test(O)||("-"===O||"+"===O)&&/[eE]/.test(Q))return P.push(O),Q=O,E+1;if(/[^\d]/.test(O))return B(P.join("")),N=f,E;P.push(O);Q=O;return E+1}var E=0,K=
0,N=f,O,Q,P=[],T=[],V=1,aa=0,ba=0,Y=!1,ea=!1,da="",ca;A=A||{};var la=p,pa=q;"300 es"===A.version&&(la=a,pa=h);var qa={},oa={};for(E=0;E<la.length;E++)qa[la[E]]=!0;for(E=0;E<pa.length;E++)oa[pa[E]]=!0;return function(ka){T=[];if(null!==ka){E=0;ka.toString&&(ka=ka.toString());da+=ka.replace(/\r\n/g,"\n");for(ca=da.length;O=da[E],E<ca;){ka=E;switch(N){case l:"/"===O&&"*"===Q?(P.push(O),B(P.join("")),N=f):(P.push(O),Q=O);E+=1;break;case k:E=G();break;case c:E=G();break;case e:E=H();break;case g:E=J();
break;case C:/[^a-fA-F0-9]/.test(O)?(B(P.join("")),N=f):(P.push(O),Q=O,E+=1);break;case m:E=L();break;case d:if(/[^\d\w_]/.test(O)){var ra=P.join("");N=oa[ra]?v:qa[ra]?u:r;B(P.join(""));N=f}else P.push(O),Q=O,E+=1;break;case w:/[^\s]/g.test(O)?(B(P.join("")),N=f):(P.push(O),Q=O,E+=1);break;case f:E=t()}if(ka!==E)switch(da[ka]){case "\n":aa=0;++V;break;default:++aa}}K+=E;da=da.slice(E);return T}P.length&&B(P.join(""));N=D;B("(eof)");return T}};var q=b("./lib/literals"),n=b("./lib/operators"),p=b("./lib/builtins"),
h=b("./lib/literals-300es"),a=b("./lib/builtins-300es"),f=999,d=9999,l=0,k=1,c=2,e=3,g=4,m=5,r=6,u=7,v=8,w=9,D=10,C=11,x="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},{"./lib/builtins":408,"./lib/builtins-300es":407,"./lib/literals":410,"./lib/literals-300es":409,"./lib/operators":411}],407:[function(b,y,F){b=b("./builtins");b=b.slice().filter(function(q){return!/^(gl_|texture)/.test(q)});y.exports=b.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":408}],408:[function(b,y,F){y.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],409:[function(b,y,F){b=b("./literals");y.exports=b.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":410}],410:[function(b,y,F){y.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int uint void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],411:[function(b,y,F){y.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")},{}],412:[function(b,y,F){var q=b("./index");y.exports=function(n,p){p=q(p);var h=[];h=h.concat(p(n));return h=h.concat(p(null))}},{"./index":406}],413:[function(b,y,F){y.exports=function(q){"string"===typeof q&&(q=[q]);for(var n=[].slice.call(arguments,
1),p=[],h=0;h<q.length-1;h++)p.push(q[h],n[h]||"");p.push(q[h]);return p.join("")}},{}],414:[function(b,y,F){F="undefined"!==typeof fb?fb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b=b("is-browser");b="function"===typeof F.matchMedia?!F.matchMedia("(hover: none)").matches:b;y.exports=b},{"is-browser":438}],415:[function(b,y,F){function q(){var n=!1;try{var p=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,p);window.removeEventListener("test",
null,p)}catch(h){n=!1}return n}b=b("is-browser");y.exports=b&&q()},{"is-browser":438}],416:[function(b,y,F){F.read=function(q,n,p,h,a){var f=8*a-h-1;var d=(1<<f)-1,l=d>>1,k=-7;a=p?a-1:0;var c=p?-1:1,e=q[n+a];a+=c;p=e&(1<<-k)-1;e>>=-k;for(k+=f;0<k;p=256*p+q[n+a],a+=c,k-=8);f=p&(1<<-k)-1;p>>=-k;for(k+=h;0<k;f=256*f+q[n+a],a+=c,k-=8);if(0===p)p=1-l;else{if(p===d)return f?NaN:Infinity*(e?-1:1);f+=Math.pow(2,h);p-=l}return(e?-1:1)*f*Math.pow(2,p-h)};F.write=function(q,n,p,h,a,f){var d,l=8*f-a-1,k=(1<<
l)-1,c=k>>1,e=23===a?Math.pow(2,-24)-Math.pow(2,-77):0;f=h?0:f-1;var g=h?1:-1,m=0>n||0===n&&0>1/n?1:0;n=Math.abs(n);isNaN(n)||Infinity===n?(n=isNaN(n)?1:0,h=k):(h=Math.floor(Math.log(n)/Math.LN2),1>n*(d=Math.pow(2,-h))&&(h--,d*=2),n=1<=h+c?n+e/d:n+e*Math.pow(2,1-c),2<=n*d&&(h++,d/=2),h+c>=k?(n=0,h=k):1<=h+c?(n=(n*d-1)*Math.pow(2,a),h+=c):(n=n*Math.pow(2,c-1)*Math.pow(2,a),h=0));for(;8<=a;q[p+f]=n&255,f+=g,n/=256,a-=8);h=h<<a|n;for(l+=a;0<l;q[p+f]=h&255,f+=g,h/=256,l-=8);q[p+f-g]|=128*m}},{}],417:[function(b,
y,F){var q=b("./types");y.exports=function(n,p){var h,a;for(h in q)if(a=q[h].detect(n,p))return h}},{"./types":420}],418:[function(b,y,F){(function(q){function n(k,c){var e=l(k,c);if(e in d&&(k=d[e].calculate(k,c),!1!==k))return k.type=e,k;throw new TypeError("unsupported file type: "+e+" (file: "+c+")");}function p(k,c){a.open(k,"r",function(e,g){if(e)return c(e);a.fstat(g,function(m,r){if(m)return c(m);m=r.size;if(0>=m)return c(Error("File size is not greater than 0  "+k));m=Math.min(m,524288);
var u=q.alloc(m);a.read(g,u,0,m,0,function(v){if(v)return c(v);a.close(g,function(w){c(w,u)})})})})}function h(k){k=a.openSync(k,"r");var c=a.fstatSync(k).size;c=Math.min(c,524288);var e=q.alloc(c);a.readSync(k,e,0,c,0);a.closeSync(k);return e}var a=b("fs"),f=b("path"),d=b("./types"),l=b("./detector");y.exports=function(k,c){if(q.isBuffer(k))return n(k);if("string"!==typeof k)throw new TypeError("invalid invocation");var e=f.resolve(k);if("function"===typeof c)p(e,function(g,m){if(g)return c(g);try{var r=
n(m,e)}catch(u){g=u}c(g,r)});else return k=h(e),n(k,e)};y.exports.types=Object.keys(d)}).call(this,b("buffer").Buffer)},{"./detector":417,"./types":420,buffer:111,fs:109,path:481}],419:[function(b,y,F){y.exports=function(q,n,p,h){return q["readUInt"+n+(h?"BE":"LE")].call(q,p||0)}},{}],420:[function(b,y,F){b={bmp:b("./types/bmp"),cur:b("./types/cur"),dds:b("./types/dds"),gif:b("./types/gif"),icns:b("./types/icns"),ico:b("./types/ico"),jpg:b("./types/jpg"),png:b("./types/png"),psd:b("./types/psd"),
svg:b("./types/svg"),tiff:b("./types/tiff"),webp:b("./types/webp")};y.exports=b},{"./types/bmp":421,"./types/cur":422,"./types/dds":423,"./types/gif":424,"./types/icns":425,"./types/ico":426,"./types/jpg":427,"./types/png":428,"./types/psd":429,"./types/svg":430,"./types/tiff":431,"./types/webp":432}],421:[function(b,y,F){y.exports={detect:function(q){return"BM"===q.toString("ascii",0,2)},calculate:function(q){return{width:q.readUInt32LE(18),height:Math.abs(q.readInt32LE(22))}}}},{}],422:[function(b,
y,F){y.exports={detect:function(q){return 0!==q.readUInt16LE(0)?!1:2===q.readUInt16LE(2)},calculate:b("./ico").calculate}},{"./ico":426}],423:[function(b,y,F){y.exports={detect:function(q){return 542327876===q.readUInt32LE(0)},calculate:function(q){return{height:q.readUInt32LE(12),width:q.readUInt32LE(16)}}}},{}],424:[function(b,y,F){var q=/^GIF8[79]a/;y.exports={detect:function(n){n=n.toString("ascii",0,6);return q.test(n)},calculate:function(n){return{width:n.readUInt16LE(6),height:n.readUInt16LE(8)}}}},
{}],425:[function(b,y,F){function q(h,a){var f=a+4;return[h.toString("ascii",a,f),h.readUInt32BE(f)]}function n(h){var a=p[h];return{width:a,height:a,type:h}}var p={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};y.exports={detect:function(h){return"icns"===h.toString("ascii",0,4)},calculate:function(h){var a=
h.length,f=8,d=h.readUInt32BE(4),l;var k=q(h,f);var c=n(k[0]);f+=k[1];if(f===d)return c;for(l={width:c.width,height:c.height,images:[c]};f<d&&f<a;)k=q(h,f),c=n(k[0]),f+=k[1],l.images.push(c);return l}}},{}],426:[function(b,y,F){function q(p,h){p=p.readUInt8(h);return 0===p?256:p}function n(p,h){h=6+16*h;return{width:q(p,h),height:q(p,h+1)}}y.exports={detect:function(p){return 0!==p.readUInt16LE(0)?!1:1===p.readUInt16LE(2)},calculate:function(p){var h=p.readUInt16LE(4),a=n(p,0),f;if(1===h)return a;
a.images=[{width:a.width,height:a.height}];for(f=1;f<h;f+=1)a.images.push(n(p,f));return a}}},{}],427:[function(b,y,F){var q=b("../readUInt");y.exports={detect:function(n){return"ffd8"===n.toString("hex",0,2)},calculate:function(n){n=n.slice(4);for(var p,h,a;n.length;){h=n.readUInt16BE(0);if("45786966"===n.toString("hex",2,6)){p=n.slice(2,h);var f=p.toString("hex",6,8);a="4d4d"===f;f="4949"===f;if(a||f)b:{f=q(p,16,14,a);for(var d=0;d<f;d++){var l=16+12*d;var k=l+12;if(l>p.length)break;k=p.slice(l,
k);if(274===q(k,16,0,a)){if(3!==q(k,16,2,a))break;if(1!==q(k,32,4,a))break;p=q(k,16,8,a);break b}}p=void 0}else p=void 0}a=n;f=h;if(f>a.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==a[f])throw new TypeError("Invalid JPG, marker table corrupted");a=n[h+1];if(192===a||193===a||194===a)return h+=5,h={height:n.readUInt16BE(h),width:n.readUInt16BE(h+2)},p?{width:h.width,height:h.height,orientation:p}:h;n=n.slice(h+2)}throw new TypeError("Invalid JPG, no size found");}}},{"../readUInt":419}],
428:[function(b,y,F){y.exports={detect:function(q){if("PNG\r\n\n"===q.toString("ascii",1,8)){var n=q.toString("ascii",12,16);"CgBI"===n&&(n=q.toString("ascii",28,32));if("IHDR"!==n)throw new TypeError("invalid png");return!0}},calculate:function(q){return"CgBI"===q.toString("ascii",12,16)?{width:q.readUInt32BE(32),height:q.readUInt32BE(36)}:{width:q.readUInt32BE(16),height:q.readUInt32BE(20)}}}},{}],429:[function(b,y,F){y.exports={detect:function(q){return"8BPS"===q.toString("ascii",0,4)},calculate:function(q){return{width:q.readUInt32BE(18),
height:q.readUInt32BE(14)}}}},{}],430:[function(b,y,F){function q(d){if(d=/([0-9.]+)([a-z]*)/.exec(d))return Math.round(parseFloat(d[1])*(f[d[2]]||1))}var n=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,p=/\swidth=(['"])([^%]+?)\1/,h=/\sheight=(['"])([^%]+?)\1/,a=/\sviewBox=(['"])(.+?)\1/,f={cm:96/2.54,mm:96/2.54/10,m:96/2.54*100,pt:96/72,pc:96/72/12,em:16,ex:8};y.exports={detect:function(d){return n.test(d)},calculate:function(d){if(d=d.toString("utf8").match(n)){var l=d[0];d=l.match(p);var k=l.match(h);l=
l.match(a);d=d&&q(d[2]);k=k&&q(k[2]);var c;if(c=l)l=l[2].split(" "),c={width:q(l[2]),height:q(l[3])};l=c;if(d&&k)return{width:d,height:k};if(l)return c=l.width/l.height,d=d?{width:d,height:Math.floor(d/c)}:k?{width:Math.floor(k*c),height:k}:{width:l.width,height:l.height},d}throw new TypeError("invalid svg");}}},{}],431:[function(b,y,F){(function(q){var n=b("fs"),p=b("../readUInt");y.exports={detect:function(h){h=h.toString("hex",0,4);return"49492a00"===h||"4d4d002a"===h},calculate:function(h,a){if(!a)throw new TypeError("Tiff doesn't support buffer");
var f=h.toString("ascii",0,2);f="BE"===("II"===f?"LE":"MM"===f?"BE":void 0);h=p(h,32,4,f);var d=1024,l=n.statSync(a).size;h+d>l&&(d=l-h-10);l=q.alloc(d);a=n.openSync(a,"r");n.readSync(a,l,0,d,h);h=l.slice(2);a={};for(var k;h&&h.length&&(d=p(h,16,0,f),l=p(h,16,2,f),k=p(h,32,4,f),0!==d);){if(1===k&&(3===l||4===l)){l=h;k=f;var c=p(l,16,8,k);l=(p(l,16,10,k)<<16)+c;a[d]=l}h=24<h.length?h.slice(12):void 0}f=a[256];a=a[257];if(!f||!a)throw new TypeError("Invalid Tiff, missing tags");return{width:f,height:a}}}}).call(this,
b("buffer").Buffer)},{"../readUInt":419,buffer:111,fs:109}],432:[function(b,y,F){y.exports={detect:function(q){var n="RIFF"===q.toString("ascii",0,4),p="WEBP"===q.toString("ascii",8,12);q="VP8"===q.toString("ascii",12,15);return n&&p&&q},calculate:function(q){var n=q.toString("ascii",12,16);q=q.slice(20,30);if("VP8X"===n)return n=q[0],0===(n&192)&&0===(n&1)?{width:1+q.readUIntLE(4,3),height:1+q.readUIntLE(7,3)}:!1;if("VP8 "===n&&47!==q[0])return{width:q.readInt16LE(6)&16383,height:q.readInt16LE(8)&
16383};var p=q.toString("hex",3,6);return"VP8L"===n&&"9d012a"!==p?{width:1+((q[2]&63)<<8|q[1]),height:1+((q[4]&15)<<10|q[3]<<2|(q[2]&192)>>6)}:!1}}},{}],433:[function(b,y,F){function q(k,c,e){this.vertices=k;this.adjacent=c;this.boundary=e;this.lastVisited=-1}function n(k,c,e){this.vertices=k;this.cell=c;this.index=e}function p(k,c){return d(k.vertices,c.vertices)}function h(k){for(var c=["function orient(){var tuple\x3dthis.tuple;return test("],e=0;e<=k;++e)0<e&&c.push(","),c.push("tuple[",e,"]");
c.push(")}return orient");c=new Function("test",c.join(""));(k=f[k+1])||(k=f);return c(k)}function a(k,c,e){this.dimension=k;this.vertices=c;this.simplices=e;this.interior=e.filter(function(g){return!g.boundary});this.tuple=Array(k+1);for(c=0;c<=k;++c)this.tuple[c]=this.vertices[c];(c=l[k])||(c=l[k]=h(k));this.orient=c}y.exports=function(k,c){var e=k.length;if(0===e)throw Error("Must have at least d+1 points");var g=k[0].length;if(e<=g)throw Error("Must input at least d+1 points");var m=k.slice(0,
g+1),r=f.apply(void 0,m);if(0===r)throw Error("Input not in general position");for(var u=Array(g+1),v=0;v<=g;++v)u[v]=v;0>r&&(u[0]=1,u[1]=0);r=new q(u,Array(g+1),!1);var w=r.adjacent,D=Array(g+2);for(v=0;v<=g;++v){for(var C=u.slice(),x=0;x<=g;++x)x===v&&(C[x]=-1);x=C[0];C[0]=C[1];C[1]=x;C=new q(C,Array(g+1),!0);w[v]=C;D[v]=C}D[g+1]=r;for(v=0;v<=g;++v)for(C=w[v].vertices,u=w[v].adjacent,x=0;x<=g;++x){var A=C[x];if(0>A)u[x]=r;else for(var B=0;B<=g;++B)0>w[B].vertices.indexOf(A)&&(u[x]=w[B])}m=new a(g,
m,D);c=!!c;for(v=g+1;v<e;++v)m.insert(k[v],c);return m.boundary()};var f=b("robust-orientation"),d=b("simplicial-complex").compareCells;q.prototype.flip=function(){var k=this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=k;k=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=k};var l=[];b=a.prototype;b.handleBoundaryDegeneracy=function(k,c){var e=this.dimension,g=this.vertices.length-1,m=this.tuple,r=this.vertices,u=[k];for(k.lastVisited=-g;0<u.length;){k=u.pop();
k=k.adjacent;for(var v=0;v<=e;++v){var w=k[v];if(w.boundary&&!(w.lastVisited<=-g)){for(var D=w.vertices,C=0;C<=e;++C){var x=D[C];m[C]=0>x?c:r[x]}D=this.orient();if(0<D)return w;w.lastVisited=-g;0===D&&u.push(w)}}}return null};b.walk=function(k,c){var e=this.vertices.length-1,g=this.dimension,m=this.vertices,r=this.tuple,u=this.interior[c?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!u.boundary;){var v=u.vertices;c=u.adjacent;for(var w=0;w<=g;++w)r[w]=m[v[w]];u.lastVisited=e;
for(w=0;w<=g;++w)if(u=c[w],!(u.lastVisited>=e)){v=r[w];r[w]=k;var D=this.orient();r[w]=v;if(0>D)continue a;else u.lastVisited=u.boundary?-e:e}return}return u};b.addPeaks=function(k,c){var e=this.vertices.length-1,g=this.dimension,m=this.vertices,r=this.tuple,u=this.interior,v=this.simplices,w=[c];c.lastVisited=e;c.vertices[c.vertices.indexOf(-1)]=e;c.boundary=!1;u.push(c);for(var D=[];0<w.length;){c=w.pop();var C=c.vertices,x=c.adjacent,A=C.indexOf(e);if(!(0>A))for(var B=0;B<=g;++B)if(B!==A){var t=
x[B];if(t.boundary&&!(t.lastVisited>=e)){var G=t.vertices;if(t.lastVisited!==-e){for(var H=0,I=0;I<=g;++I)0>G[I]?(H=I,r[I]=k):r[I]=m[G[I]];if(0<this.orient()){G[H]=e;t.boundary=!1;u.push(t);w.push(t);t.lastVisited=e;continue}else t.lastVisited=-e}I=t.adjacent;G=C.slice();var J=x.slice();H=new q(G,J,!0);v.push(H);var L=I.indexOf(c);if(!(0>L))for(I[L]=H,J[A]=t,G[B]=-1,J[B]=c,x[B]=H,H.flip(),I=0;I<=g;++I)if(t=G[I],!(0>t||t===e)){t=Array(g-1);for(L=J=0;L<=g;++L){var E=G[L];0>E||L===I||(t[J++]=E)}D.push(new n(t,
H,I))}}}}D.sort(p);for(B=0;B+1<D.length;B+=2)k=D[B],c=D[B+1],e=c.index,0>k.index||0>e||(k.cell.adjacent[k.index]=c.cell,c.cell.adjacent[c.index]=k.cell)};b.insert=function(k,c){var e=this.vertices;e.push(k);if(c=this.walk(k,c)){for(var g=this.dimension,m=this.tuple,r=0;r<=g;++r){var u=c.vertices[r];m[r]=0>u?k:e[u]}e=this.orient(m);if(!(0>e)){if(0===e&&(c=this.handleBoundaryDegeneracy(c,k),!c))return;this.addPeaks(k,c)}}};b.boundary=function(){for(var k=this.dimension,c=[],e=this.simplices,g=e.length,
m=0;m<g;++m){var r=e[m];if(r.boundary){var u=Array(k);r=r.vertices;for(var v=0,w=0,D=0;D<=k;++D)0<=r[D]?u[v++]=r[D]:w=D&1;w===(k&1)&&(r=u[0],u[0]=u[1],u[1]=r);c.push(u)}}return c}},{"robust-orientation":520,"simplicial-complex":530}],434:[function(b,y,F){function q(r,u,v,w,D){this.mid=r;this.left=u;this.right=v;this.leftPoints=w;this.rightPoints=D;this.count=(u?u.count:0)+(v?v.count:0)+w.length}function n(r,u){r.mid=u.mid;r.left=u.left;r.right=u.right;r.leftPoints=u.leftPoints;r.rightPoints=u.rightPoints;
r.count=u.count}function p(r,u){u=e(u);r.mid=u.mid;r.left=u.left;r.right=u.right;r.leftPoints=u.leftPoints;r.rightPoints=u.rightPoints;r.count=u.count}function h(r,u){var v=r.intervals([]);u=v.indexOf(u);if(0>u)return 0;v.splice(u,1);p(r,v);return 1}function a(r,u,v){for(var w=0;w<r.length&&r[w][0]<=u;++w){var D=v(r[w]);if(D)return D}}function f(r,u,v){for(var w=r.length-1;0<=w&&r[w][1]>=u;--w){var D=v(r[w]);if(D)return D}}function d(r,u){for(var v=0;v<r.length;++v){var w=u(r[v]);if(w)return w}}function l(r,
u){return r-u}function k(r,u){var v=r[0]-u[0];return v?v:r[1]-u[1]}function c(r,u){var v=r[1]-u[1];return v?v:r[0]-u[0]}function e(r){if(0===r.length)return null;for(var u=[],v=0;v<r.length;++v)u.push(r[v][0],r[v][1]);u.sort(l);u=u[u.length>>1];var w=[],D=[],C=[];for(v=0;v<r.length;++v){var x=r[v];x[1]<u?w.push(x):u<x[0]?D.push(x):C.push(x)}r=C.slice();C.sort(k);r.sort(c);return new q(u,e(w),e(D),C,r)}function g(r){this.root=r}var m=b("binary-search-bounds");y.exports=function(r){return r&&0!==r.length?
new g(e(r)):new g(null)};b=q.prototype;b.intervals=function(r){r.push.apply(r,this.leftPoints);this.left&&this.left.intervals(r);this.right&&this.right.intervals(r);return r};b.insert=function(r){var u=this.count-this.leftPoints.length;this.count+=1;if(r[1]<this.mid)this.left?4*(this.left.count+1)>3*(u+1)?(u=this.intervals([]),u.push(r),p(this,u)):this.left.insert(r):this.left=e([r]);else if(r[0]>this.mid)this.right?4*(this.right.count+1)>3*(u+1)?(u=this.intervals([]),u.push(r),p(this,u)):this.right.insert(r):
this.right=e([r]);else{u=m.ge(this.leftPoints,r,k);var v=m.ge(this.rightPoints,r,c);this.leftPoints.splice(u,0,r);this.rightPoints.splice(v,0,r)}};b.remove=function(r){var u=this.count-this.leftPoints;if(r[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(u-1))return h(this,r);u=this.left.remove(r);if(2===u)return this.left=null,--this.count,1;1===u&&--this.count;return u}if(r[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(u-1))return h(this,r);
u=this.right.remove(r);if(2===u)return this.right=null,--this.count,1;1===u&&--this.count;return u}if(1===this.count)return this.leftPoints[0]===r?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===r){if(this.left&&this.right){r=this;for(var v=this.left;v.right;)r=v,v=v.right;if(r===this)v.right=this.right;else{var w=this.left;u=this.right;r.count-=v.count;r.right=v.left;v.left=w;v.right=u}n(this,v);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
n(this,this.left):n(this,this.right);return 1}for(w=m.ge(this.leftPoints,r,k);w<this.leftPoints.length&&this.leftPoints[w][0]===r[0];++w)if(this.leftPoints[w]===r)for(--this.count,this.leftPoints.splice(w,1),u=m.ge(this.rightPoints,r,c);u<this.rightPoints.length&&this.rightPoints[u][1]===r[1];++u)if(this.rightPoints[u]===r)return this.rightPoints.splice(u,1),1;return 0};b.queryPoint=function(r,u){if(r<this.mid){if(this.left){var v=this.left.queryPoint(r,u);if(v)return v}return a(this.leftPoints,r,
u)}return r>this.mid?this.right&&(v=this.right.queryPoint(r,u))?v:f(this.rightPoints,r,u):d(this.leftPoints,u)};b.queryInterval=function(r,u,v){if(r<this.mid&&this.left){var w=this.left.queryInterval(r,u,v);if(w)return w}return u>this.mid&&this.right&&(w=this.right.queryInterval(r,u,v))?w:u<this.mid?a(this.leftPoints,u,v):r>this.mid?f(this.rightPoints,r,v):d(this.leftPoints,v)};b=g.prototype;b.insert=function(r){this.root?this.root.insert(r):this.root=new q(r[0],null,null,[r],[r])};b.remove=function(r){return this.root?
(r=this.root.remove(r),2===r&&(this.root=null),0!==r):!1};b.queryPoint=function(r,u){if(this.root)return this.root.queryPoint(r,u)};b.queryInterval=function(r,u,v){if(r<=u&&this.root)return this.root.queryInterval(r,u,v)};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":435}],435:[function(b,y,F){arguments[4][243][0].apply(F,arguments)},{dup:243}],
436:[function(b,y,F){y.exports=function(q,n){n=n||Array(q.length);for(var p=0;p<q.length;++p)n[q[p]]=p;return n}},{}],437:[function(b,y,F){y.exports=function(q){for(var n=Array(q),p=0;p<q;++p)n[p]=p;return n}},{}],438:[function(b,y,F){y.exports=!0},{}],439:[function(b,y,F){function q(n){return!!n.constructor&&"function"===typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}y.exports=function(n){return null!=n&&(q(n)||"function"===typeof n.readFloatLE&&"function"===typeof n.slice&&q(n.slice(0,
0))||!!n._isBuffer)}},{}],440:[function(b,y,F){y.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],441:[function(b,y,F){function q(h){h||(h={});var a=h.ua;a||"undefined"===typeof navigator||(a=navigator.userAgent);a&&a.headers&&"string"===typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]);if("string"!==typeof a)return!1;var f=h.tablet?p.test(a):n.test(a);!f&&h.tablet&&h.featureDetect&&navigator&&1<navigator.maxTouchPoints&&
-1!==a.indexOf("Macintosh")&&-1!==a.indexOf("Safari")&&(f=!0);return f}y.exports=q;y.exports.isMobile=q;y.exports.default=q;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,p=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},
{}],442:[function(b,y,F){y.exports=function(q){var n=typeof q;return null!==q&&("object"===n||"function"===n)}},{}],443:[function(b,y,F){var q=Object.prototype.toString;y.exports=function(n){var p;return"[object Object]"===q.call(n)&&(p=Object.getPrototypeOf(n),null===p||p===Object.getPrototypeOf({}))}},{}],444:[function(b,y,F){y.exports=function(q){for(var n=q.length,p,h=0;h<n;h++)if(p=q.charCodeAt(h),(9>p||13<p)&&32!==p&&133!==p&&160!==p&&5760!==p&&6158!==p&&(8192>p||8205<p)&&8232!==p&&8233!==p&&
8239!==p&&8287!==p&&8288!==p&&12288!==p&&65279!==p)return!1;return!0}},{}],445:[function(b,y,F){y.exports=function(q){if("string"!==typeof q)return!1;q=q.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(q)&&/[\dz]$/i.test(q)&&4<q.length?!0:!1}},{}],446:[function(b,y,F){y.exports=function(q,n,p){return q*(1-p)+n*p}},{}],447:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?y.exports=n():(q=q||self,q.mapboxgl=n())})(this,function(){function q(a,f){if(n)if(p){a="var sharedChunk \x3d {}; ("+
n+")(sharedChunk); ("+p+")(sharedChunk);";var d={};n(d);h=f(d);h.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else p=f;else n=f}var n,p,h;q(["exports"],function(a){function f(z,M){return z(M={exports:{}},M.exports),M.exports}function d(z,M,S,ia){this.cx=3*z;this.bx=3*(S-z)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*M;this.by=3*(ia-M)-this.cy;this.ay=1-this.cy-this.by;this.p1x=z;this.p1y=ia;this.p2x=S;this.p2y=ia}function l(z,M){this.x=z;this.y=M}function k(z,M,S,ia){var ta=
new uj(z,M,S,ia);return function(Ba){return ta.solve(Ba)}}function c(z,M,S){return Math.min(S,Math.max(M,z))}function e(z,M,S){var ia=S-M;z=((z-M)%ia+ia)%ia+M;return z===M?S:z}function g(z){for(var M=[],S=arguments.length-1;0<S--;)M[S]=arguments[S+1];for(S=0;S<M.length;S+=1){var ia=M[S],ta;for(ta in ia)z[ta]=ia[ta]}return z}function m(){return function S(M){return M?(M^16*Math.random()>>M/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,S)}()}function r(z){return!!z&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(z)}
function u(z,M){z.forEach(function(S){M[S]&&(M[S]=M[S].bind(M))})}function v(z,M){return-1!==z.indexOf(M,z.length-M.length)}function w(z,M,S){var ia={},ta;for(ta in z)ia[ta]=M.call(S||this,z[ta],ta,z);return ia}function D(z,M,S){var ia={},ta;for(ta in z)M.call(S||this,z[ta],ta,z)&&(ia[ta]=z[ta]);return ia}function C(z){return Array.isArray(z)?z.map(C):"object"==typeof z&&z?w(z,C):z}function x(z){Hg[z]||("undefined"!=typeof console&&console.warn(z),Hg[z]=!0)}function A(z,M,S){return(S.y-z.y)*(M.x-
z.x)>(M.y-z.y)*(S.x-z.x)}function B(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function t(z){var M={};if(z.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(S,ia,ta,Ba){S=ta||Ba;return M[ia]=!S||S.toLowerCase(),""}),M["max-age"])z=parseInt(M["max-age"],10),isNaN(z)?delete M["max-age"]:M["max-age"]=z;return M}function G(z){if(null==
oh){var M=z.navigator?z.navigator.userAgent:null;oh=!!z.safari||!(!M||!(/\b(iPad|iPhone|iPod)\b/.test(M)||M.match("Safari")&&!M.match("Chrome")))}return oh}function H(z){try{var M=self[z];return M.setItem("_mapbox_test_",1),M.removeItem("_mapbox_test_"),!0}catch(S){return!1}}function I(z){var M=z.createTexture();z.bindTexture(z.TEXTURE_2D,M);try{if(z.texImage2D(z.TEXTURE_2D,0,z.RGBA,z.RGBA,z.UNSIGNED_BYTE,Ig),z.isContextLost())return;mh.supported=!0}catch(S){}z.deleteTexture(M);Yg=!0}function J(z){return 0===
z.indexOf("mapbox:")}function L(z){z=z.match(di);if(!z)throw Error("Unable to parse URL object");return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("\x26"):[]}}function E(z){var M=z.params.length?"?"+z.params.join("\x26"):"";return z.protocol+"://"+z.authority+z.path+M}function K(z){if(!z)return null;z=z.split(".");if(!z||3!==z.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(z[1]).split("").map(function(M){return"%"+("00"+M.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(M){return null}}
function N(){self.caches&&!wg&&(wg=self.caches.open("mapbox-tiles"))}function O(z){var M=z.indexOf("?");return 0>M?z:z.slice(0,M)}function Q(){return null==W&&(W=self.OffscreenCanvas&&(new self.OffscreenCanvas(1,1)).getContext("2d")&&"function"==typeof self.createImageBitmap),W}function P(z,M,S){S[z]&&-1!==S[z].indexOf(M)||(S[z]=S[z]||[],S[z].push(M))}function T(z,M,S){S&&S[z]&&(M=S[z].indexOf(M),-1!==M&&S[z].splice(M,1))}function V(z){var M=z.value;return M?[new va(z.key,M,"constants have been deprecated as of v8")]:
[]}function aa(z){for(var M=[],S=arguments.length-1;0<S--;)M[S]=arguments[S+1];for(S=0;S<M.length;S+=1){var ia=M[S],ta;for(ta in ia)z[ta]=ia[ta]}return z}function ba(z){return z instanceof Number||z instanceof String||z instanceof Boolean?z.valueOf():z}function Y(z){if(Array.isArray(z))return z.map(Y);if(z instanceof Object&&!(z instanceof Number||z instanceof String||z instanceof Boolean)){var M={},S;for(S in z)M[S]=Y(z[S]);return M}return ba(z)}function ea(z,M){return{kind:"array",itemType:z,N:M}}
function da(z){if("array"===z.kind){var M=da(z.itemType);return"number"==typeof z.N?"array\x3c"+M+", "+z.N+"\x3e":"value"===z.itemType.kind?"array":"array\x3c"+M+"\x3e"}return z.kind}function ca(z,M){if("error"===M.kind)return null;if("array"===z.kind){if("array"===M.kind&&(0===M.N&&"value"===M.itemType.kind||!ca(z.itemType,M.itemType))&&("number"!=typeof z.N||z.N===M.N))return null}else{if(z.kind===M.kind)return null;if("value"===z.kind)for(var S=0,ia=zd;S<ia.length;S+=1)if(!ca(ia[S],M))return null}return"Expected "+
da(z)+" but found "+da(M)+" instead."}function la(z,M){return M.some(function(S){return S.kind===z.kind})}function pa(z,M){return M.some(function(S){return"null"===S?null===z:"array"===S?Array.isArray(z):"object"===S?z&&!Array.isArray(z)&&"object"==typeof z:S===typeof z})}function qa(z,M,S,ia){return"number"==typeof z&&0<=z&&255>=z&&"number"==typeof M&&0<=M&&255>=M&&"number"==typeof S&&0<=S&&255>=S?void 0===ia||"number"==typeof ia&&0<=ia&&1>=ia?null:"Invalid rgba value ["+[z,M,S,ia].join(", ")+"]: 'a' must be between 0 and 1.":
"Invalid rgba value ["+("number"==typeof ia?[z,M,S,ia]:[z,M,S]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function oa(z){if(null===z||"string"==typeof z||"boolean"==typeof z||"number"==typeof z||z instanceof Bd||z instanceof Pd||z instanceof Xd||z instanceof oe)return!0;if(Array.isArray(z)){for(var M=0;M<z.length;M+=1)if(!oa(z[M]))return!1;return!0}if("object"==typeof z){for(M in z)if(!oa(z[M]))return!1;return!0}return!1}function ka(z){if(null===z)return bb;if("string"==typeof z)return Kb;
if("boolean"==typeof z)return Pb;if("number"==typeof z)return nb;if(z instanceof Bd)return pc;if(z instanceof Pd)return Xc;if(z instanceof Xd)return fd;if(z instanceof oe)return rd;if(Array.isArray(z)){for(var M,S=z.length,ia=0;ia<z.length;ia+=1){var ta=ka(z[ia]);if(M){if(M===ta)continue;M=kc;break}M=ta}return ea(M||kc,S)}return hc}function ra(z){var M=typeof z;return null===z?"":"string"===M||"number"===M||"boolean"===M?String(z):z instanceof Bd||z instanceof Xd||z instanceof oe?z.toString():JSON.stringify(z)}
function ha(z,M){z[0]=Math.min(z[0],M[0]);z[1]=Math.min(z[1],M[1]);z[2]=Math.max(z[2],M[0]);z[3]=Math.max(z[3],M[1])}function ma(z,M){return!(z[0]<=M[0]||z[2]>=M[2]||z[1]<=M[1]||z[3]>=M[3])}function wa(z,M){for(var S,ia,ta,Ba,La,Wa,kb,vb=!1,Ib=0,Sb=M.length;Ib<Sb;Ib++)for(var ic=M[Ib],ec=0,uc=ic.length;ec<uc-1;ec++){if(0==(Ba=(S=z)[0]-(ia=ic[ec])[0])*(kb=S[1]-(ta=ic[ec+1])[1])-(Wa=S[0]-ta[0])*(La=S[1]-ia[1])&&0>=Ba*Wa&&0>=La*kb)return!1;var tc=ic[ec],Qc=ic[ec+1];tc[1]>z[1]!=Qc[1]>z[1]&&z[0]<(Qc[0]-
tc[0])*(z[1]-tc[1])/(Qc[1]-tc[1])+tc[0]&&(vb=!vb)}return vb}function na(z,M,S,ia){var ta=ia[0]-S[0];ia=ia[1]-S[1];z=(z[0]-S[0])*ia-ta*(z[1]-S[1]);M=(M[0]-S[0])*ia-ta*(M[1]-S[1]);return 0<z&&0>M||0>z&&0<M}function ya(z,M){for(var S=0;S<z.length;++S)if(!wa(z[S],M))return!1;for(S=0;S<z.length-1;++S){var ia;a:{for(var ta=ia=void 0,Ba=void 0,La=void 0,Wa=void 0,kb=void 0,vb=z[S],Ib=z[S+1],Sb=0,ic=M;Sb<ic.length;Sb+=1)for(var ec=ic[Sb],uc=0;uc<ec.length-1;++uc)if(0!=(ta=[(Ba=ec[uc+1])[0]-(La=ec[uc])[0],
Ba[1]-La[1]])[0]*(ia=[(Wa=Ib)[0]-(kb=vb)[0],Wa[1]-kb[1]])[1]-ta[1]*ia[0]&&na(kb,Wa,La,Ba)&&na(La,Ba,kb,Wa)){ia=!0;break a}ia=!1}if(ia)return!1}return!0}function Fa(z,M,S){for(var ia=[],ta=0;ta<z.length;ta++){for(var Ba=[],La=0;La<z[ta].length;La++){var Wa=z[ta][La];var kb=Math.pow(2,S.z);Wa=[Math.round((180+Wa[0])/360*kb*8192),Math.round((180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Wa[1]*Math.PI/360)))/360*kb*8192)];ha(M,Wa);Ba.push(Wa)}ia.push(Ba)}return ia}function Ha(z,M,S){for(var ia=[],ta=0;ta<
z.length;ta++){var Ba=Fa(z[ta],M,S);ia.push(Ba)}return ia}function eb(z,M,S,ia){if(z[0]<S[0]||z[0]>S[2]){var ta=.5*ia,Ba=z[0]-S[0]>ta?-ia:S[0]-z[0]>ta?ia:0;0===Ba&&(Ba=z[0]-S[2]>ta?-ia:S[2]-z[0]>ta?ia:0);z[0]+=Ba}ha(M,z)}function hb(z,M,S,ia){var ta=8192*Math.pow(2,ia.z);ia=[8192*ia.x,8192*ia.y];for(var Ba=[],La=0;La<z.length;La+=1)for(var Wa=0,kb=z[La];Wa<kb.length;Wa+=1){var vb=kb[Wa];vb=[vb.x+ia[0],vb.y+ia[1]];eb(vb,M,S,ta);Ba.push(vb)}return Ba}function ob(z,M,S,ia){var ta=8192*Math.pow(2,ia.z),
Ba=[8192*ia.x,8192*ia.y];ia=[];for(var La=0;La<z.length;La+=1){for(var Wa=[],kb=0,vb=z[La];kb<vb.length;kb+=1){var Ib=vb[kb];Ib=[Ib.x+Ba[0],Ib.y+Ba[1]];ha(M,Ib);Wa.push(Ib)}ia.push(Wa)}if(M[2]-M[0]<=ta/2)for(M[0]=M[1]=1/0,M[2]=M[3]=-1/0,z=0;z<ia.length;z+=1)for(Ba=0,La=ia[z];Ba<La.length;Ba+=1)eb(La[Ba],M,S,ta);return ia}function ib(z){if(z instanceof Qe&&("get"===z.name&&1===z.args.length||"feature-state"===z.name||"has"===z.name&&1===z.args.length||"properties"===z.name||"geometry-type"===z.name||
"id"===z.name||/^filter-/.test(z.name))||z instanceof Wf)return!1;var M=!0;return z.eachChild(function(S){M&&!ib(S)&&(M=!1)}),M}function Pa(z){if(z instanceof Qe&&"feature-state"===z.name)return!1;var M=!0;return z.eachChild(function(S){M&&!Pa(S)&&(M=!1)}),M}function sb(z,M){if(z instanceof Qe&&0<=M.indexOf(z.name))return!1;var S=!0;return z.eachChild(function(ia){S&&!sb(ia,M)&&(S=!1)}),S}function tb(z,M){for(var S,ia=z.length-1,ta=0,Ba=ia,La;ta<=Ba;)if((S=z[La=Math.floor((ta+Ba)/2)])<=M){if(La===
ia||M<z[La+1])return La;ta=La+1}else{if(!(S>M))throw new ee("Input is not a number.");Ba=La-1}return 0}function Aa(z,M,S){return z*(1-S)+M*S}function Ka(z){return.008856451679035631<z?Math.pow(z,1/3):z/Wg+4/29}function Qa(z){return z>6/29?z*z*z:Wg*(z-4/29)}function Xa(z){return 255*(.0031308>=z?12.92*z:1.055*Math.pow(z,1/2.4)-.055)}function pb(z){return.04045>=(z/=255)?z/12.92:Math.pow((z+.055)/1.055,2.4)}function db(z){var M=pb(z.r),S=pb(z.g),ia=pb(z.b),ta=Ka((.4124564*M+.3575761*S+.1804375*ia)/
.95047),Ba=Ka(.2126729*M+.7151522*S+.072175*ia);return{l:116*Ba-16,a:500*(ta-Ba),b:200*(Ba-Ka((.0193339*M+.119192*S+.9503041*ia)/1.08883)),alpha:z.a}}function Ia(z){var M=(z.l+16)/116,S=isNaN(z.a)?M:M+z.a/500,ia=isNaN(z.b)?M:M-z.b/200;return M=1*Qa(M),S=.95047*Qa(S),ia=1.08883*Qa(ia),new Bd(Xa(3.2404542*S-1.5371385*M-.4985314*ia),Xa(-.969266*S+1.8760108*M+.041556*ia),Xa(.0556434*S-.2040259*M+1.0572252*ia),z.alpha)}function Ua(z,M,S,ia){ia-=S;z-=S;return 0===ia?0:1===M?z/ia:(Math.pow(M,z)-1)/(Math.pow(M,
ia)-1)}function $a(z,M){return"\x3d\x3d"===z||"!\x3d"===z?"boolean"===M.kind||"string"===M.kind||"number"===M.kind||"null"===M.kind||"value"===M.kind:"string"===M.kind||"number"===M.kind||"value"===M.kind}function xa(z,M,S,ia){return 0===ia.compare(M,S)}function Ga(z,M,S){var ia="\x3d\x3d"!==z&&"!\x3d"!==z;return function(){function ta(Ba,La,Wa){this.type=Pb;this.lhs=Ba;this.rhs=La;this.collator=Wa;this.hasUntypedArgument="value"===Ba.type.kind||"value"===La.type.kind}return ta.parse=function(Ba,
La){if(3!==Ba.length&&4!==Ba.length)return La.error("Expected two or three arguments.");var Wa=Ba[0],kb=La.parse(Ba[1],1,kc);if(!kb)return null;if(!$a(Wa,kb.type))return La.concat(1).error('"'+Wa+"\" comparisons are not supported for type '"+da(kb.type)+"'.");var vb=La.parse(Ba[2],2,kc);if(!vb)return null;if(!$a(Wa,vb.type))return La.concat(2).error('"'+Wa+"\" comparisons are not supported for type '"+da(vb.type)+"'.");if(kb.type.kind!==vb.type.kind&&"value"!==kb.type.kind&&"value"!==vb.type.kind)return La.error("Cannot compare types '"+
da(kb.type)+"' and '"+da(vb.type)+"'.");ia&&("value"===kb.type.kind&&"value"!==vb.type.kind?kb=new Se(vb.type,[kb]):"value"!==kb.type.kind&&"value"===vb.type.kind&&(vb=new Se(kb.type,[vb])));Wa=null;if(4===Ba.length){if("string"!==kb.type.kind&&"string"!==vb.type.kind&&"value"!==kb.type.kind&&"value"!==vb.type.kind)return La.error("Cannot use collator to compare non-string types.");if(!(Wa=La.parse(Ba[3],3,Xc)))return null}return new ta(kb,vb,Wa)},ta.prototype.evaluate=function(Ba){var La=this.lhs.evaluate(Ba),
Wa=this.rhs.evaluate(Ba);if(ia&&this.hasUntypedArgument){var kb=ka(La),vb=ka(Wa);if(kb.kind!==vb.kind||"string"!==kb.kind&&"number"!==kb.kind)throw new ee('Expected arguments for "'+z+'" to be (string, string) or (number, number), but found ('+kb.kind+", "+vb.kind+") instead.");}return this.collator&&!ia&&this.hasUntypedArgument&&(kb=ka(La),vb=ka(Wa),"string"!==kb.kind||"string"!==vb.kind)?M(Ba,La,Wa):this.collator?S(Ba,La,Wa,this.collator.evaluate(Ba)):M(Ba,La,Wa)},ta.prototype.eachChild=function(Ba){Ba(this.lhs);
Ba(this.rhs);this.collator&&Ba(this.collator)},ta.prototype.outputDefined=function(){return!0},ta.prototype.serialize=function(){var Ba=[z];return this.eachChild(function(La){Ba.push(La.serialize())}),Ba},ta}()}function Va(z,M){var S=M[0],ia=M[1],ta=M[2];M=M[3];S=S.evaluate(z);ia=ia.evaluate(z);ta=ta.evaluate(z);z=M?M.evaluate(z):1;if(M=qa(S,ia,ta,z))throw new ee(M);return new Bd(S/255*z,ia/255*z,ta/255*z,z)}function gb(z,M){z=M[z];return void 0===z?null:z}function Ma(z){return{result:"error",value:z}}
function cb(z){return"data-driven"===z["property-type"]||"cross-faded-data-driven"===z["property-type"]}function Sa(z){return!!z.expression&&-1<z.expression.parameters.indexOf("zoom")}function lb(z){return!!z.expression&&z.expression.interpolated}function rb(z){return z instanceof Number?"number":z instanceof String?"string":z instanceof Boolean?"boolean":Array.isArray(z)?"array":null===z?"null":typeof z}function yb(z){return"object"==typeof z&&null!==z&&!Array.isArray(z)}function Hb(z){return z}
function Vb(z,M,S){return void 0!==z?z:void 0!==M?M:void 0!==S?S:void 0}function lc(z,M,S,ia,ta){return Vb(typeof S===ta?ia[S]:void 0,z.default,M.default)}function Ac(z,M,S){if("number"!==rb(S))return Vb(z.default,M.default);M=z.stops.length;if(1===M||S<=z.stops[0][0])return z.stops[0][1];if(S>=z.stops[M-1][0])return z.stops[M-1][1];S=tb(z.stops.map(function(ia){return ia[0]}),S);return z.stops[S][1]}function ad(z,M,S){var ia=void 0!==z.base?z.base:1;if("number"!==rb(S))return Vb(z.default,M.default);
var ta=z.stops.length;if(1===ta||S<=z.stops[0][0])return z.stops[0][1];if(S>=z.stops[ta-1][0])return z.stops[ta-1][1];ta=tb(z.stops.map(function(Ib){return Ib[0]}),S);var Ba=function(Ib,Sb,ic,ec){ec-=ic;Ib-=ic;return 0===ec?0:1===Sb?Ib/ec:(Math.pow(Sb,Ib)-1)/(Math.pow(Sb,ec)-1)}(S,ia,z.stops[ta][0],z.stops[ta+1][0]),La=z.stops[ta][1],Wa=z.stops[ta+1][1],kb=$h[M.type]||Hb;if(z.colorSpace&&"rgb"!==z.colorSpace){var vb=ai[z.colorSpace];kb=function(Ib,Sb){return vb.reverse(vb.interpolate(vb.forward(Ib),
vb.forward(Sb),Ba))}}return"function"==typeof La.evaluate?{evaluate:function(){for(var Ib=[],Sb=arguments.length;Sb--;)Ib[Sb]=arguments[Sb];Sb=La.evaluate.apply(void 0,Ib);Ib=Wa.evaluate.apply(void 0,Ib);if(void 0!==Sb&&void 0!==Ib)return kb(Sb,Ib,Ba)}}:kb(La,Wa,Ba)}function Nc(z,M,S){return"color"===M.type?S=Bd.parse(S):"formatted"===M.type?S=Xd.fromString(S.toString()):"resolvedImage"===M.type?S=oe.fromString(S.toString()):rb(S)===M.type||"enum"===M.type&&M.values[S]||(S=void 0),Vb(S,z.default,
M.default)}function ed(z){return Array.isArray(z)&&0<z.length&&"string"==typeof z[0]&&z[0]in ug}function Pc(z,M){var S=ff;if(M){var ia={color:pc,string:Kb,number:nb,enum:Kb,boolean:Pb,formatted:fd,resolvedImage:rd};ia="array"===M.type?ea(ia[M.value]||kc,M.length):ia[M.type]}else ia=void 0;S=new S(ug,[],ia);return(z=S.parse(z,void 0,void 0,void 0,M&&"string"===M.type?{typeAnnotation:"coerce"}:void 0))?{result:"success",value:new Pg(z,M)}:Ma(S.errors)}function sd(z,M){if("error"===(z=Pc(z,M)).result)return z;
var S=z.value.expression,ia=ib(S);if(!ia&&!cb(M))return Ma([new Da("","data expressions not supported")]);var ta=sb(S,["zoom"]);return ta||Sa(M)?(S=function Wa(La){var kb=null;if(La instanceof ph)kb=Wa(La.result);else if(La instanceof Eh)for(var vb=0,Ib=La.args;vb<Ib.length&&!(kb=Wa(Ib[vb]));vb+=1);else(La instanceof xf||La instanceof Gf)&&La.input instanceof Qe&&"zoom"===La.input.name&&(kb=La);return kb instanceof Da||La.eachChild(function(Sb){Sb=Wa(Sb);Sb instanceof Da?kb=Sb:!kb&&Sb?kb=new Da("",
'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):kb&&Sb&&kb!==Sb&&(kb=new Da("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),kb}(S))||ta?S instanceof Da?Ma([S]):S instanceof Gf&&!lb(M)?Ma([new Da("",'"interpolate" expressions cannot be used with this property')]):{result:"success",value:S?new Kf(ia?"camera":"composite",z.value,S.labels,S instanceof Gf?S.interpolation:void 0):new ie(ia?"constant":"source",
z.value)}:Ma([new Da("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):Ma([new Da("","zoom expressions not supported")])}function Db(z){var M=z.key,S=z.value,ia=z.valueSpec||{},ta=z.objectElementValidators||{},Ba=z.style;z=z.styleSpec;var La=[],Wa=rb(S);if("object"!==Wa)return[new va(M,S,"object expected, "+Wa+" found")];for(var kb in S){var vb=kb.split(".")[0];Wa=ia[vb]||ia["*"];if(ta[vb])vb=ta[vb];else if(ia[vb])vb=Wc;else if(ta["*"])vb=ta["*"];
else{if(!ia["*"]){La.push(new va(M,S[kb],'unknown property "'+kb+'"'));continue}vb=Wc}La=La.concat(vb({key:(M?M+".":M)+kb,value:S[kb],valueSpec:Wa,style:Ba,styleSpec:z,object:S,objectKey:kb},S))}for(var Ib in ia)ta[Ib]||ia[Ib].required&&void 0===ia[Ib].default&&void 0===S[Ib]&&La.push(new va(M,S,'missing required property "'+Ib+'"'));return La}function Yb(z){var M=z.value,S=z.valueSpec,ia=z.style,ta=z.styleSpec,Ba=z.key;z=z.arrayElementValidator||Wc;if("array"!==rb(M))return[new va(Ba,M,"array expected, "+
rb(M)+" found")];if(S.length&&M.length!==S.length)return[new va(Ba,M,"array length "+S.length+" expected, length "+M.length+" found")];if(S["min-length"]&&M.length<S["min-length"])return[new va(Ba,M,"array length at least "+S["min-length"]+" expected, length "+M.length+" found")];var La={type:S.value,values:S.values};7>ta.$version&&(La.function=S.function);"object"===rb(S.value)&&(La=S.value);S=[];for(var Wa=0;Wa<M.length;Wa++)S=S.concat(z({array:M,arrayIndex:Wa,value:M[Wa],valueSpec:La,style:ia,
styleSpec:ta,key:Ba+"["+Wa+"]"}));return S}function Fc(z){var M=z.key,S=z.value;z=z.valueSpec;var ia=rb(S);return"number"===ia&&S!=S&&(ia="NaN"),"number"!==ia?[new va(M,S,"number expected, "+ia+" found")]:"minimum"in z&&S<z.minimum?[new va(M,S,S+" is less than the minimum value "+z.minimum)]:"maximum"in z&&S>z.maximum?[new va(M,S,S+" is greater than the maximum value "+z.maximum)]:[]}function mc(z){function M(ec){var uc=[],tc=ec.value,Qc=ec.key;if("array"!==rb(tc))return[new va(Qc,tc,"array expected, "+
rb(tc)+" found")];if(2!==tc.length)return[new va(Qc,tc,"array length 2 expected, length "+tc.length+" found")];if(Sb){if("object"!==rb(tc[0]))return[new va(Qc,tc,"object expected, "+rb(tc[0])+" found")];if(void 0===tc[0].zoom)return[new va(Qc,tc,"object stop key must have zoom")];if(void 0===tc[0].value)return[new va(Qc,tc,"object stop key must have value")];if(Ba&&Ba>ba(tc[0].zoom))return[new va(Qc,tc[0].zoom,"stop zoom values must appear in ascending order")];ba(tc[0].zoom)!==Ba&&(Ba=ba(tc[0].zoom),
ta=void 0,kb={});uc=uc.concat(Db({key:Qc+"[0]",value:tc[0],valueSpec:{zoom:{}},style:ec.style,styleSpec:ec.styleSpec,objectElementValidators:{zoom:Fc,value:S}}))}else uc=uc.concat(S({key:Qc+"[0]",value:tc[0],valueSpec:{},style:ec.style,styleSpec:ec.styleSpec},tc));return ed(Y(tc[1]))?uc.concat([new va(Qc+"[1]",tc[1],"expressions are not allowed in function stops.")]):uc.concat(Wc({key:Qc+"[1]",value:tc[1],valueSpec:La,style:ec.style,styleSpec:ec.styleSpec}))}function S(ec,uc){var tc=rb(ec.value),
Qc=ba(ec.value);uc=null!==ec.value?ec.value:uc;if(ia){if(tc!==ia)return[new va(ec.key,uc,tc+" stop domain type must match previous stop domain type "+ia)]}else ia=tc;return"number"!==tc&&"string"!==tc&&"boolean"!==tc?[new va(ec.key,uc,"stop domain value must be a number, string, or boolean")]:"number"!==tc&&"categorical"!==Wa?(tc="number expected, "+tc+" found",cb(La)&&void 0===Wa&&(tc+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new va(ec.key,uc,tc)]):"categorical"!==
Wa||"number"!==tc||isFinite(Qc)&&Math.floor(Qc)===Qc?"categorical"!==Wa&&"number"===tc&&void 0!==ta&&Qc<ta?[new va(ec.key,uc,"stop domain values must appear in ascending order")]:(ta=Qc,"categorical"===Wa&&Qc in kb?[new va(ec.key,uc,"stop domain values must be unique")]:(kb[Qc]=!0,[])):[new va(ec.key,uc,"integer expected, found "+Qc)]}var ia,ta,Ba,La=z.valueSpec,Wa=ba(z.value.type),kb={},vb="categorical"!==Wa&&void 0===z.value.property,Ib=!vb,Sb="array"===rb(z.value.stops)&&"array"===rb(z.value.stops[0])&&
"object"===rb(z.value.stops[0][0]),ic=Db({key:z.key,value:z.value,valueSpec:z.styleSpec.function,style:z.style,styleSpec:z.styleSpec,objectElementValidators:{stops:function(ec){if("identity"===Wa)return[new va(ec.key,ec.value,'identity function may not have a "stops" property')];var uc=[],tc=ec.value;return uc=uc.concat(Yb({key:ec.key,value:tc,valueSpec:ec.valueSpec,style:ec.style,styleSpec:ec.styleSpec,arrayElementValidator:M})),"array"===rb(tc)&&0===tc.length&&uc.push(new va(ec.key,tc,"array must have at least one stop")),
uc},default:function(ec){return Wc({key:ec.key,value:ec.value,valueSpec:La,style:ec.style,styleSpec:ec.styleSpec})}}});return"identity"===Wa&&vb&&ic.push(new va(z.key,z.value,'missing required property "property"')),"identity"===Wa||z.value.stops||ic.push(new va(z.key,z.value,'missing required property "stops"')),"exponential"===Wa&&z.valueSpec.expression&&!lb(z.valueSpec)&&ic.push(new va(z.key,z.value,"exponential functions not supported")),8<=z.styleSpec.$version&&(Ib&&!cb(z.valueSpec)?ic.push(new va(z.key,
z.value,"property functions not supported")):vb&&!Sa(z.valueSpec)&&ic.push(new va(z.key,z.value,"zoom functions not supported"))),"categorical"!==Wa&&!Sb||void 0!==z.value.property||ic.push(new va(z.key,z.value,'"property" property is required')),ic}function qc(z){var M=("property"===z.expressionContext?sd:Pc)(Y(z.value),z.valueSpec);if("error"===M.result)return M.value.map(function(S){return new va(""+z.key+S.key,z.value,S.message)});M=M.value.expression||M.value._styleExpression.expression;if("property"===
z.expressionContext&&"text-font"===z.propertyKey&&!M.outputDefined())return[new va(z.key,z.value,'Invalid data expression for "'+z.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===z.expressionContext&&"layout"===z.propertyType&&!Pa(M))return[new va(z.key,z.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===z.expressionContext&&!Pa(M))return[new va(z.key,z.value,'"feature-state" data expressions are not supported with filters.')];
if(z.expressionContext&&0===z.expressionContext.indexOf("cluster")){if(!sb(M,["zoom","feature-state"]))return[new va(z.key,z.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===z.expressionContext&&!ib(M))return[new va(z.key,z.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rc(z){var M=z.key,S=z.value;z=z.valueSpec;var ia=[];return Array.isArray(z.values)?-1===
z.values.indexOf(ba(S))&&ia.push(new va(M,S,"expected one of ["+z.values.join(", ")+"], "+JSON.stringify(S)+" found")):-1===Object.keys(z.values).indexOf(ba(S))&&ia.push(new va(M,S,"expected one of ["+Object.keys(z.values).join(", ")+"], "+JSON.stringify(S)+" found")),ia}function wb(z){if(!0===z||!1===z)return!0;if(!Array.isArray(z)||0===z.length)return!1;switch(z[0]){case "has":return 2<=z.length&&"$id"!==z[1]&&"$type"!==z[1];case "in":return 3<=z.length&&("string"!=typeof z[1]||Array.isArray(z[2]));
case "!in":case "!has":case "none":return!1;case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3!==z.length||Array.isArray(z[1])||Array.isArray(z[2]);case "any":case "all":var M=0;for(z=z.slice(1);M<z.length;M+=1){var S=z[M];if(!wb(S)&&"boolean"!=typeof S)return!1}return!0;default:return!0}}function zb(z){if(null==z)return{filter:function(){return!0},needGeometry:!1};wb(z)||(z=zc(z));var M=Pc(z,yf);if("error"===M.result)throw Error(M.value.map(function(S){return S.key+
": "+S.message}).join(", "));return{filter:function(S,ia,ta){return M.value.evaluate(S,ia,{},ta)},needGeometry:function ta(ia){if(!Array.isArray(ia))return!1;if("within"===ia[0])return!0;for(var Ba=1;Ba<ia.length;Ba++)if(ta(ia[Ba]))return!0;return!1}(z)}}function fc(z,M){return z<M?-1:z>M?1:0}function zc(z){if(!z)return!0;var M,S=z[0];return 1>=z.length?"any"!==S:"\x3d\x3d"===S?Gc(z[1],z[2],"\x3d\x3d"):"!\x3d"===S?Eb(Gc(z[1],z[2],"\x3d\x3d")):"\x3c"===S||"\x3e"===S||"\x3c\x3d"===S||"\x3e\x3d"===S?
Gc(z[1],z[2],S):"any"===S?(M=z.slice(1),["any"].concat(M.map(zc))):"all"===S?["all"].concat(z.slice(1).map(zc)):"none"===S?["all"].concat(z.slice(1).map(zc).map(Eb)):"in"===S?$b(z[1],z.slice(2)):"!in"===S?Eb($b(z[1],z.slice(2))):"has"===S?bc(z[1]):"!has"===S?Eb(bc(z[1])):"within"!==S||z}function Gc(z,M,S){switch(z){case "$type":return["filter-type-"+S,M];case "$id":return["filter-id-"+S,M];default:return["filter-"+S,z,M]}}function $b(z,M){if(0===M.length)return!1;switch(z){case "$type":return["filter-type-in",
["literal",M]];case "$id":return["filter-id-in",["literal",M]];default:return 200<M.length&&!M.some(function(S){return typeof S!=typeof M[0]})?["filter-in-large",z,["literal",M.sort(fc)]]:["filter-in-small",z,["literal",M]]}}function bc(z){switch(z){case "$type":return!0;case "$id":return["filter-has-id"];default:return["filter-has",z]}}function Eb(z){return["!",z]}function xb(z){return wb(Y(z.value))?qc(aa({},z,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function ia(S){var ta=S.value,
Ba=S.key;if("array"!==rb(ta))return[new va(Ba,ta,"array expected, "+rb(ta)+" found")];var La,Wa=S.styleSpec,kb=[];if(1>ta.length)return[new va(Ba,ta,"filter array must have at least 1 element")];switch(kb=kb.concat(rc({key:Ba+"[0]",value:ta[0],valueSpec:Wa.filter_operator,style:S.style,styleSpec:S.styleSpec})),ba(ta[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=ta.length&&"$type"===ba(ta[1])&&kb.push(new va(Ba,ta,'"$type" cannot be use with operator "'+ta[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==
ta.length&&kb.push(new va(Ba,ta,'filter array for operator "'+ta[0]+'" must have 3 elements'));case "in":case "!in":2<=ta.length&&"string"!==(La=rb(ta[1]))&&kb.push(new va(Ba+"[1]",ta[1],"string expected, "+La+" found"));for(var vb=2;vb<ta.length;vb++)La=rb(ta[vb]),"$type"===ba(ta[1])?kb=kb.concat(rc({key:Ba+"["+vb+"]",value:ta[vb],valueSpec:Wa.geometry_type,style:S.style,styleSpec:S.styleSpec})):"string"!==La&&"number"!==La&&"boolean"!==La&&kb.push(new va(Ba+"["+vb+"]",ta[vb],"string, number, or boolean expected, "+
La+" found"));break;case "any":case "all":case "none":for(La=1;La<ta.length;La++)kb=kb.concat(ia({key:Ba+"["+La+"]",value:ta[La],style:S.style,styleSpec:S.styleSpec}));break;case "has":case "!has":La=rb(ta[1]);2!==ta.length?kb.push(new va(Ba,ta,'filter array for "'+ta[0]+'" operator must have 2 elements')):"string"!==La&&kb.push(new va(Ba+"[1]",ta[1],"string expected, "+La+" found"));break;case "within":La=rb(ta[1]),2!==ta.length?kb.push(new va(Ba,ta,'filter array for "'+ta[0]+'" operator must have 2 elements')):
"object"!==La&&kb.push(new va(Ba+"[1]",ta[1],"object expected, "+La+" found"))}return kb}(z)}function Cb(z,M){var S=z.key,ia=z.style,ta=z.styleSpec,Ba=z.value,La=z.objectKey,Wa=ta[M+"_"+z.layerType];if(!Wa)return[];var kb=La.match(/^(.*)-transition$/);if("paint"===M&&kb&&Wa[kb[1]]&&Wa[kb[1]].transition)return Wc({key:S,value:Ba,valueSpec:ta.transition,style:ia,styleSpec:ta});var vb;Wa=z.valueSpec||Wa[La];if(!Wa)return[new va(S,Ba,'unknown property "'+La+'"')];if("string"===rb(Ba)&&cb(Wa)&&!Wa.tokens&&
(vb=/^{([^}]+)}$/.exec(Ba)))return[new va(S,Ba,'"'+La+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(vb[1])+" }`.")];vb=[];return"symbol"===z.layerType&&("text-field"===La&&ia&&!ia.glyphs&&vb.push(new va(S,Ba,'use of "text-field" requires a style "glyphs" property')),"text-font"===La&&yb(Y(Ba))&&"identity"===ba(Ba.type)&&vb.push(new va(S,Ba,'"text-font" does not support identity functions'))),vb.concat(Wc({key:z.key,
value:Ba,valueSpec:Wa,style:ia,styleSpec:ta,expressionContext:"property",propertyType:M,propertyKey:La}))}function Jb(z){return Cb(z,"paint")}function ac(z){return Cb(z,"layout")}function Kc(z){var M=[],S=z.value,ia=z.key,ta=z.style,Ba=z.styleSpec;S.type||S.ref||M.push(new va(ia,S,'either "type" or "ref" is required'));var La,Wa=ba(S.type),kb=ba(S.ref);if(S.id)for(var vb=ba(S.id),Ib=0;Ib<z.arrayIndex;Ib++){var Sb=ta.layers[Ib];ba(Sb.id)===vb&&M.push(new va(ia,S.id,'duplicate layer id "'+S.id+'", previously used at line '+
Sb.id.__line__))}"ref"in S?(["type","source","source-layer","filter","layout"].forEach(function(ic){ic in S&&M.push(new va(ia,S[ic],'"'+ic+'" is prohibited for ref layers'))}),ta.layers.forEach(function(ic){ba(ic.id)===kb&&(La=ic)}),La?La.ref?M.push(new va(ia,S.ref,"ref cannot reference another ref layer")):Wa=ba(La.type):M.push(new va(ia,S.ref,'ref layer "'+kb+'" not found'))):"background"!==Wa&&(S.source?(vb=(ta=ta.sources&&ta.sources[S.source])&&ba(ta.type),ta?"vector"===vb&&"raster"===Wa?M.push(new va(ia,
S.source,'layer "'+S.id+'" requires a raster source')):"raster"===vb&&"raster"!==Wa?M.push(new va(ia,S.source,'layer "'+S.id+'" requires a vector source')):"vector"!==vb||S["source-layer"]?"raster-dem"===vb&&"hillshade"!==Wa?M.push(new va(ia,S.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Wa||!S.paint||!S.paint["line-gradient"]||"geojson"===vb&&ta.lineMetrics||M.push(new va(ia,S,'layer "'+S.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):
M.push(new va(ia,S,'layer "'+S.id+'" must specify a "source-layer"')):M.push(new va(ia,S.source,'source "'+S.source+'" not found'))):M.push(new va(ia,S,'missing required property "source"')));return M=M.concat(Db({key:ia,value:S,valueSpec:Ba.layer,style:z.style,styleSpec:z.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Wc({key:ia+".type",value:S.type,valueSpec:Ba.layer.type,style:z.style,styleSpec:z.styleSpec,object:S,objectKey:"type"})},filter:xb,layout:function(ic){return Db({layer:S,
key:ic.key,value:ic.value,style:ic.style,styleSpec:ic.styleSpec,objectElementValidators:{"*":function(ec){return ac(aa({layerType:Wa},ec))}}})},paint:function(ic){return Db({layer:S,key:ic.key,value:ic.value,style:ic.style,styleSpec:ic.styleSpec,objectElementValidators:{"*":function(ec){return Jb(aa({layerType:Wa},ec))}}})}}}))}function vc(z){var M=z.value;z=z.key;var S=rb(M);return"string"!==S?[new va(z,M,"string expected, "+S+" found")]:[]}function Lc(z){var M=z.value,S=z.key,ia=z.styleSpec,ta=
z.style;if(!M.type)return[new va(S,M,'"type" is required')];var Ba=ba(M.type);switch(Ba){case "vector":case "raster":case "raster-dem":return Db({key:S,value:M,valueSpec:ia["source_"+Ba.replace("-","_")],style:z.style,styleSpec:ia,objectElementValidators:ve});case "geojson":if(z=Db({key:S,value:M,valueSpec:ia.source_geojson,style:ta,styleSpec:ia,objectElementValidators:ve}),M.cluster)for(var La in M.clusterProperties)ia=M.clusterProperties[La],ta=ia[0],ta="string"==typeof ta?[ta,["accumulated"],["get",
La]]:ta,z.push.apply(z,qc({key:S+"."+La+".map",value:ia[1],expressionContext:"cluster-map"})),z.push.apply(z,qc({key:S+"."+La+".reduce",value:ta,expressionContext:"cluster-reduce"}));return z;case "video":return Db({key:S,value:M,valueSpec:ia.source_video,style:ta,styleSpec:ia});case "image":return Db({key:S,value:M,valueSpec:ia.source_image,style:ta,styleSpec:ia});case "canvas":return[new va(S,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];
default:return rc({key:S+".type",value:M.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:ta,styleSpec:ia})}}function Zc(z){var M=z.value,S=z.styleSpec,ia=S.light;z=z.style;var ta=[],Ba=rb(M);if(void 0===M)return ta;if("object"!==Ba)return ta.concat([new va("light",M,"object expected, "+Ba+" found")]);for(var La in M)Ba=La.match(/^(.*)-transition$/),ta=ta.concat(Ba&&ia[Ba[1]]&&ia[Ba[1]].transition?Wc({key:La,value:M[La],valueSpec:S.transition,style:z,styleSpec:S}):
ia[La]?Wc({key:La,value:M[La],valueSpec:ia[La],style:z,styleSpec:S}):[new va(La,M[La],'unknown property "'+La+'"')]);return ta}function Wc(z){var M=z.value,S=z.valueSpec,ia=z.styleSpec;return S.expression&&yb(ba(M))?mc(z):S.expression&&ed(Y(M))?qc(z):S.type&&jf[S.type]?jf[S.type](z):Db(aa({},z,{valueSpec:S.type?ia[S.type]:S}))}function ld(z){var M=z.value,S=z.key;z=vc(z);return z.length||(-1===M.indexOf("{fontstack}")&&z.push(new va(S,M,'"glyphs" url must include a "{fontstack}" token')),-1===M.indexOf("{range}")&&
z.push(new va(S,M,'"glyphs" url must include a "{range}" token'))),z}function xd(z,M){void 0===M&&(M=Xb);var S=[];return S=S.concat(Wc({key:"",value:z,valueSpec:M.$root,styleSpec:M,style:z,objectElementValidators:{glyphs:ld,"*":function(){return[]}}})),z.constants&&(S=S.concat(V({key:"constants",value:z.constants,style:z,styleSpec:M}))),hd(S)}function hd(z){return[].concat(z).sort(function(M,S){return M.line-S.line})}function Cd(z){return function(){for(var M=[],S=arguments.length;S--;)M[S]=arguments[S];
return hd(z.apply(this,M))}}function Kd(z,M){var S=!1;if(M&&M.length)for(var ia=0;ia<M.length;ia+=1)z.fire(new Hc(Error(M[ia].message))),S=!0;return S}function pd(z,M,S){var ia=this.cells=[];if(z instanceof ArrayBuffer){this.arrayBuffer=z;var ta=new Int32Array(this.arrayBuffer);z=ta[0];this.d=(M=ta[1])+2*(S=ta[2]);for(var Ba=0;Ba<this.d*this.d;Ba++){var La=ta[3+Ba],Wa=ta[3+Ba+1];ia.push(La===Wa?null:ta.subarray(La,Wa))}Ba=ta[3+ia.length+1];this.keys=ta.subarray(ta[3+ia.length],Ba);this.bboxes=ta.subarray(Ba);
this.insert=this._insertReadonly}else{this.d=M+2*S;for(ta=0;ta<this.d*this.d;ta++)ia.push([]);this.keys=[];this.bboxes=[]}this.n=M;this.extent=z;this.padding=S;this.scale=M/z;this.uid=0;M=S/M*z;this.min=-M;this.max=z+M}function Yc(z,M,S){void 0===S&&(S={});Object.defineProperty(M,"_classRegistryKey",{value:z,writeable:!1});gj[z]={klass:M,omit:S.omit||[],shallow:S.shallow||[]}}function Dd(z){return z&&"undefined"!=typeof ArrayBuffer&&(z instanceof ArrayBuffer||z.constructor&&"ArrayBuffer"===z.constructor.name)}
function Jd(z,M){if(null==z||"boolean"==typeof z||"number"==typeof z||"string"==typeof z||z instanceof Boolean||z instanceof Number||z instanceof String||z instanceof Date||z instanceof RegExp)return z;if(Dd(z)||Dj&&z instanceof Dj)return M&&M.push(z),z;if(ArrayBuffer.isView(z))return M&&M.push(z.buffer),z;if(z instanceof lk)return M&&M.push(z.data.buffer),z;if(Array.isArray(z)){for(var S=[],ia=0;ia<z.length;ia+=1)S.push(Jd(z[ia],M));return S}if("object"==typeof z){var ta=z.constructor;S=ta._classRegistryKey;
if(!S)throw Error("can't serialize object of unregistered class");ia=ta.serialize?ta.serialize(z,M):{};if(!ta.serialize){for(var Ba in z)!z.hasOwnProperty(Ba)||0<=gj[S].omit.indexOf(Ba)||(ta=z[Ba],ia[Ba]=0<=gj[S].shallow.indexOf(Ba)?ta:Jd(ta,M));z instanceof Error&&(ia.message=z.message)}if(ia.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==S&&(ia.$name=S),ia}throw Error("can't serialize object of type "+typeof z);}function Ld(z){if(null==z||"boolean"==
typeof z||"number"==typeof z||"string"==typeof z||z instanceof Boolean||z instanceof Number||z instanceof String||z instanceof Date||z instanceof RegExp||Dd(z)||Dj&&z instanceof Dj||ArrayBuffer.isView(z)||z instanceof lk)return z;if(Array.isArray(z))return z.map(Ld);if("object"==typeof z){var M=z.$name||"Object",S=gj[M].klass;if(!S)throw Error("can't deserialize unregistered class "+M);if(S.deserialize)return S.deserialize(z);S=Object.create(S.prototype);for(var ia=0,ta=Object.keys(z);ia<ta.length;ia+=
1){var Ba=ta[ia];if("$name"!==Ba){var La=z[Ba];S[Ba]=0<=gj[M].shallow.indexOf(Ba)?La:Ld(La)}}return S}throw Error("can't deserialize object of type "+typeof z);}function Ce(z){for(var M=0;M<z.length;M+=1)if(Rd(z[M].charCodeAt(0)))return!0;return!1}function Rd(z){return!(746!==z&&747!==z&&(4352>z||!(Zd["Bopomofo Extended"](z)||Zd.Bopomofo(z)||Zd["CJK Compatibility Forms"](z)&&!(65097<=z&&65103>=z)||Zd["CJK Compatibility Ideographs"](z)||Zd["CJK Compatibility"](z)||Zd["CJK Radicals Supplement"](z)||
Zd["CJK Strokes"](z)||!(!Zd["CJK Symbols and Punctuation"](z)||12296<=z&&12305>=z||12308<=z&&12319>=z||12336===z)||Zd["CJK Unified Ideographs Extension A"](z)||Zd["CJK Unified Ideographs"](z)||Zd["Enclosed CJK Letters and Months"](z)||Zd["Hangul Compatibility Jamo"](z)||Zd["Hangul Jamo Extended-A"](z)||Zd["Hangul Jamo Extended-B"](z)||Zd["Hangul Jamo"](z)||Zd["Hangul Syllables"](z)||Zd.Hiragana(z)||Zd["Ideographic Description Characters"](z)||Zd.Kanbun(z)||Zd["Kangxi Radicals"](z)||Zd["Katakana Phonetic Extensions"](z)||
Zd.Katakana(z)&&12540!==z||!(!Zd["Halfwidth and Fullwidth Forms"](z)||65288===z||65289===z||65293===z||65306<=z&&65310>=z||65339===z||65341===z||65343===z||65371<=z&&65503>=z||65507===z||65512<=z&&65519>=z)||!(!Zd["Small Form Variants"](z)||65112<=z&&65118>=z||65123<=z&&65126>=z)||Zd["Unified Canadian Aboriginal Syllabics"](z)||Zd["Unified Canadian Aboriginal Syllabics Extended"](z)||Zd["Vertical Forms"](z)||Zd["Yijing Hexagram Symbols"](z)||Zd["Yi Syllables"](z)||Zd["Yi Radicals"](z))))}function Sc(z){var M;
(M=Rd(z))||(M=!!(Zd["Latin-1 Supplement"](z)&&(167===z||169===z||174===z||177===z||188===z||189===z||190===z||215===z||247===z)||Zd["General Punctuation"](z)&&(8214===z||8224===z||8225===z||8240===z||8241===z||8251===z||8252===z||8258===z||8263===z||8264===z||8265===z||8273===z)||Zd["Letterlike Symbols"](z)||Zd["Number Forms"](z)||Zd["Miscellaneous Technical"](z)&&(8960<=z&&8967>=z||8972<=z&&8991>=z||8996<=z&&9E3>=z||9003===z||9085<=z&&9114>=z||9150<=z&&9165>=z||9167===z||9169<=z&&9179>=z||9186<=
z&&9215>=z)||Zd["Control Pictures"](z)&&9251!==z||Zd["Optical Character Recognition"](z)||Zd["Enclosed Alphanumerics"](z)||Zd["Geometric Shapes"](z)||Zd["Miscellaneous Symbols"](z)&&!(9754<=z&&9759>=z)||Zd["Miscellaneous Symbols and Arrows"](z)&&(11026<=z&&11055>=z||11088<=z&&11097>=z||11192<=z&&11243>=z)||Zd["CJK Symbols and Punctuation"](z)||Zd.Katakana(z)||Zd["Private Use Area"](z)||Zd["CJK Compatibility Forms"](z)||Zd["Small Form Variants"](z)||Zd["Halfwidth and Fullwidth Forms"](z)||8734===z||
8756===z||8757===z||9984<=z&&10087>=z||10102<=z&&10131>=z||65532===z||65533===z));return!M}function md(z){return 1424<=z&&2303>=z||Zd["Arabic Presentation Forms-A"](z)||Zd["Arabic Presentation Forms-B"](z)}function Gd(){yj.fire(new yc("pluginStateChange",{pluginStatus:ig,pluginURL:Lh}))}function Md(z,M){void 0===M&&(M=1);var S=0,ia=0;return{members:z.map(function(ta){var Ba=Zi[ta.type].BYTES_PER_ELEMENT,La=S=me(S,Math.max(M,Ba)),Wa=ta.components||1;return ia=Math.max(ia,Ba),S+=Ba*Wa,{name:ta.name,
type:ta.type,components:Wa,offset:La}}),size:me(S,Math.max(ia,M)),alignment:M}}function me(z,M){return Math.ceil(z/M)*M}function xe(z,M){return 256*c(Math.floor(z),0,255)+c(Math.floor(M),0,255)}function Wd(z){var M=+z;return!isNaN(M)&&M<=al?M:cj(String(z))}function Qd(z,M,S){var ia=z[M];z[M]=z[S];z[S]=ia}function Ae(z){return[xe(255*z.r,255*z.g),xe(255*z.b,255*z.a)]}function Be(z,M,S){var ia={color:{source:Rg,composite:Vj},number:{source:ij,composite:Rg}};return(z={"line-pattern":{source:Kg,composite:Kg},
"fill-pattern":{source:Kg,composite:Kg},"fill-extrusion-pattern":{source:Kg,composite:Kg}}[z])&&z[S]||ia[M][S]}function Ge(z){var M=8192/z.extent;z=z.loadGeometry();for(var S=0;S<z.length;S++)for(var ia=z[S],ta=0;ta<ia.length;ta++){var Ba=ia[ta];Ba.x=Math.round(Ba.x*M);Ba.y=Math.round(Ba.y*M);(Ba.x<Oi.min||Ba.x>Oi.max||Ba.y<Oi.min||Ba.y>Oi.max)&&(x("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Ba.x=c(Ba.x,Oi.min,Oi.max),Ba.y=c(Ba.y,Oi.min,Oi.max))}return z}function Ue(z,
M,S,ia,ta){z.emplaceBack(2*M+(ia+1)/2,2*S+(ta+1)/2)}function uf(z,M){for(var S=0;S<z.length;S++)if(Ob(M,z[S]))return!0;for(S=0;S<M.length;S++)if(Ob(z,M[S]))return!0;return!!$e(z,M)}function hf(z,M,S){return!!Ob(z,M)||!!Ra(M,z,S)}function pf(z,M){if(1===z.length)return Ab(M,z[0]);for(var S=0;S<M.length;S++)for(var ia=M[S],ta=0;ta<ia.length;ta++)if(Ob(z,ia[ta]))return!0;for(S=0;S<z.length;S++)if(Ab(M,z[S]))return!0;for(S=0;S<M.length;S++)if($e(z,M[S]))return!0;return!1}function $e(z,M){if(0===z.length||
0===M.length)return!1;for(var S=0;S<z.length-1;S++)for(var ia=z[S],ta=z[S+1],Ba=0;Ba<M.length-1;Ba++){var La=ia,Wa=ta,kb=M[Ba],vb=M[Ba+1];if(A(La,kb,vb)!==A(Wa,kb,vb)&&A(La,Wa,kb)!==A(La,Wa,vb))return!0}return!1}function Ra(z,M,S){S*=S;if(1===M.length)return z.distSqr(M[0])<S;for(var ia=1;ia<M.length;ia++)if(Gb(z,M[ia-1],M[ia])<S)return!0;return!1}function Gb(z,M,S){var ia=M.distSqr(S);if(0===ia)return z.distSqr(M);ia=((z.x-M.x)*(S.x-M.x)+(z.y-M.y)*(S.y-M.y))/ia;return z.distSqr(0>ia?M:1<ia?S:S.sub(M)._mult(ia)._add(M))}
function Ab(z,M){for(var S,ia,ta,Ba=!1,La=0;La<z.length;La++)for(var Wa=0,kb=(S=z[La]).length-1;Wa<S.length;kb=Wa++)(ia=S[Wa]).y>M.y!=(ta=S[kb]).y>M.y&&M.x<(ta.x-ia.x)*(M.y-ia.y)/(ta.y-ia.y)+ia.x&&(Ba=!Ba);return Ba}function Ob(z,M){for(var S=!1,ia=0,ta=z.length-1;ia<z.length;ta=ia++){var Ba=z[ia];ta=z[ta];Ba.y>M.y!=ta.y>M.y&&M.x<(ta.x-Ba.x)*(M.y-Ba.y)/(ta.y-Ba.y)+Ba.x&&(S=!S)}return S}function Bc(z,M,S){var ia=M.paint.get(z).value;return"constant"===ia.kind?ia.value:S.programConfigurations.get(M.id).getMaxValue(z)}
function Tc(z){return Math.sqrt(z[0]*z[0]+z[1]*z[1])}function jc(z,M,S,ia,ta){if(!M[0]&&!M[1])return z;M=ge.convert(M)._mult(ta);"viewport"===S&&M._rotate(-ia);S=[];for(ia=0;ia<z.length;ia++)S.push(z[ia].sub(M));return S}function Oc(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function gd(z,M,S){var ia=M[0],ta=M[1],Ba=M[2],La=M[3],Wa=M[4],kb=M[5],vb=M[6],Ib=M[7],Sb=M[8],ic=M[9],ec=M[10],uc=M[11],tc=M[12],Qc=M[13],
wd=M[14];M=M[15];var Ad=S[0],od=S[1],Od=S[2],Nd=S[3];return z[0]=Ad*ia+od*Wa+Od*Sb+Nd*tc,z[1]=Ad*ta+od*kb+Od*ic+Nd*Qc,z[2]=Ad*Ba+od*vb+Od*ec+Nd*wd,z[3]=Ad*La+od*Ib+Od*uc+Nd*M,z[4]=(Ad=S[4])*ia+(od=S[5])*Wa+(Od=S[6])*Sb+(Nd=S[7])*tc,z[5]=Ad*ta+od*kb+Od*ic+Nd*Qc,z[6]=Ad*Ba+od*vb+Od*ec+Nd*wd,z[7]=Ad*La+od*Ib+Od*uc+Nd*M,z[8]=(Ad=S[8])*ia+(od=S[9])*Wa+(Od=S[10])*Sb+(Nd=S[11])*tc,z[9]=Ad*ta+od*kb+Od*ic+Nd*Qc,z[10]=Ad*Ba+od*vb+Od*ec+Nd*wd,z[11]=Ad*La+od*Ib+Od*uc+Nd*M,z[12]=(Ad=S[12])*ia+(od=S[13])*Wa+(Od=
S[14])*Sb+(Nd=S[15])*tc,z[13]=Ad*ta+od*kb+Od*ic+Nd*Qc,z[14]=Ad*Ba+od*vb+Od*ec+Nd*wd,z[15]=Ad*La+od*Ib+Od*uc+Nd*M,z}function vd(z,M,S){var ia=M[0],ta=M[1],Ba=M[2];M=M[3];return z[0]=S[0]*ia+S[4]*ta+S[8]*Ba+S[12]*M,z[1]=S[1]*ia+S[5]*ta+S[9]*Ba+S[13]*M,z[2]=S[2]*ia+S[6]*ta+S[10]*Ba+S[14]*M,z[3]=S[3]*ia+S[7]*ta+S[11]*Ba+S[15]*M,z}function Nb(z,M){z=vd([],[z.x,z.y,0,1],M);return new ge(z[0]/z[3],z[1]/z[3])}function dc(z,M,S,ia){var ta=M.width;M=M.height;if(ia)if(ia instanceof Uint8ClampedArray)ia=new Uint8Array(ia.buffer);
else{if(ia.length!==ta*M*S)throw new RangeError("mismatched image size");}else ia=new Uint8Array(ta*M*S);return z.width=ta,z.height=M,z.data=ia,z}function Mc(z,M,S){var ia=M.width;M=M.height;if(ia!==z.width||M!==z.height){var ta=dc({},{width:ia,height:M},S);cd(z,ta,{x:0,y:0},{x:0,y:0},{width:Math.min(z.width,ia),height:Math.min(z.height,M)},S);z.width=ia;z.height=M;z.data=ta.data}}function cd(z,M,S,ia,ta,Ba){if(0===ta.width||0===ta.height)return M;if(ta.width>z.width||ta.height>z.height||S.x>z.width-
ta.width||S.y>z.height-ta.height)throw new RangeError("out of range source coordinates for image copy");if(ta.width>M.width||ta.height>M.height||ia.x>M.width-ta.width||ia.y>M.height-ta.height)throw new RangeError("out of range destination coordinates for image copy");for(var La=z.data,Wa=M.data,kb=0;kb<ta.height;kb++)for(var vb=((S.y+kb)*z.width+S.x)*Ba,Ib=((ia.y+kb)*M.width+ia.x)*Ba,Sb=0;Sb<ta.width*Ba;Sb++)Wa[Ib+Sb]=La[vb+Sb];return M}function Rc(z,M){for(var S=new Uint8Array(1024),ia={},ta=0,Ba=
0;256>ta;ta++,Ba+=4){ia[M]=ta/255;var La=z.evaluate(ia);S[Ba+0]=Math.floor(255*La.r/La.a);S[Ba+1]=Math.floor(255*La.g/La.a);S[Ba+2]=Math.floor(255*La.b/La.a);S[Ba+3]=Math.floor(255*La.a)}return new Yf({width:256,height:1},S)}function $c(z,M,S){S=S||2;var ia,ta,Ba,La=M&&M.length,Wa=La?M[0]*S:z.length,kb=Qb(z,0,Wa,S,!0),vb=[];if(!kb||kb.next===kb.prev)return vb;if(La){La=S;var Ib,Sb=[];var ic=0;for(Ib=M.length;ic<Ib;ic++){(ia=Qb(z,M[ic]*La,ic<Ib-1?M[ic+1]*La:z.length,La,!1))===ia.next&&(ia.steiner=
!0);var ec=Sb,uc=ec.push,tc=ia,Qc=ia;do(tc.x<Qc.x||tc.x===Qc.x&&tc.y<Qc.y)&&(Qc=tc),tc=tc.next;while(tc!==ia);uc.call(ec,Qc)}Sb.sort(cc);for(ic=0;ic<Sb.length;ic++)sc(Sb[ic],kb),kb=oc(kb,kb.next)}if(z.length>80*S){var wd=M=z[0];var Ad=ia=z[1];for(La=S;La<Wa;La+=S)(ta=z[La])<wd&&(wd=ta),(Ba=z[La+1])<Ad&&(Ad=Ba),ta>M&&(M=ta),Ba>ia&&(ia=Ba);var od=0!==(od=Math.max(M-wd,ia-Ad))?1/od:0}return Cc(kb,vb,S,wd,Ad,od),vb}function Qb(z,M,S,ia,ta){if(ta===0<mi(z,M,S,ia))for(ta=M;ta<S;ta+=ia)var Ba=mf(ta,z[ta],
z[ta+1],Ba);else for(ta=S-ia;ta>=M;ta-=ia)Ba=mf(ta,z[ta],z[ta+1],Ba);return Ba&&Ed(Ba,Ba.next)&&(If(Ba),Ba=Ba.next),Ba}function oc(z,M){if(!z)return z;M||(M=z);var S=z;do if(z=!1,S.steiner||!Ed(S,S.next)&&0!==Fd(S.prev,S,S.next))S=S.next;else{if(If(S),(S=M=S.prev)===S.next)break;z=!0}while(z||S!==M);return M}function Cc(z,M,S,ia,ta,Ba,La){if(z){if(!La&&Ba){var Wa=z,kb=Wa;do null===kb.z&&(kb.z=jd(kb.x,kb.y,ia,ta,Ba)),kb.prevZ=kb.prev,kb=kb.nextZ=kb.next;while(kb!==Wa);kb.prevZ.nextZ=null;kb.prevZ=
null;Wa=kb;var vb,Ib,Sb,ic,ec=1;do{kb=Wa;var uc=Wa=null;for(Sb=0;kb;){Sb++;var tc=kb;for(vb=ic=0;vb<ec&&(ic++,tc=tc.nextZ);vb++);for(vb=ec;0<ic||0<vb&&tc;)0!==ic&&(0===vb||!tc||kb.z<=tc.z)?(Ib=kb,kb=kb.nextZ,ic--):(Ib=tc,tc=tc.nextZ,vb--),uc?uc.nextZ=Ib:Wa=Ib,Ib.prevZ=uc,uc=Ib;kb=tc}uc.nextZ=null;ec*=2}while(1<Sb)}for(kb=z;z.prev!==z.next;){Ib=z.prev;Wa=z.next;if(Ba)a:{tc=z;ec=ia;vb=ta;var Qc=Ba;uc=tc.prev;Sb=tc.next;if(0<=Fd(uc,tc,Sb))tc=!1;else{var wd=uc.x>tc.x?uc.x>Sb.x?uc.x:Sb.x:tc.x>Sb.x?tc.x:
Sb.x,Ad=uc.y>tc.y?uc.y>Sb.y?uc.y:Sb.y:tc.y>Sb.y?tc.y:Sb.y;ic=jd(uc.x<tc.x?uc.x<Sb.x?uc.x:Sb.x:tc.x<Sb.x?tc.x:Sb.x,uc.y<tc.y?uc.y<Sb.y?uc.y:Sb.y:tc.y<Sb.y?tc.y:Sb.y,ec,vb,Qc);ec=jd(wd,Ad,ec,vb,Qc);vb=tc.prevZ;for(Qc=tc.nextZ;vb&&vb.z>=ic&&Qc&&Qc.z<=ec;){if(vb!==tc.prev&&vb!==tc.next&&yd(uc.x,uc.y,tc.x,tc.y,Sb.x,Sb.y,vb.x,vb.y)&&0<=Fd(vb.prev,vb,vb.next)||(vb=vb.prevZ,Qc!==tc.prev&&Qc!==tc.next&&yd(uc.x,uc.y,tc.x,tc.y,Sb.x,Sb.y,Qc.x,Qc.y)&&0<=Fd(Qc.prev,Qc,Qc.next))){tc=!1;break a}Qc=Qc.nextZ}for(;vb&&
vb.z>=ic;){if(vb!==tc.prev&&vb!==tc.next&&yd(uc.x,uc.y,tc.x,tc.y,Sb.x,Sb.y,vb.x,vb.y)&&0<=Fd(vb.prev,vb,vb.next)){tc=!1;break a}vb=vb.prevZ}for(;Qc&&Qc.z<=ec;){if(Qc!==tc.prev&&Qc!==tc.next&&yd(uc.x,uc.y,tc.x,tc.y,Sb.x,Sb.y,Qc.x,Qc.y)&&0<=Fd(Qc.prev,Qc,Qc.next)){tc=!1;break a}Qc=Qc.nextZ}tc=!0}}else a:if(tc=z,uc=tc.prev,Sb=tc.next,0<=Fd(uc,tc,Sb))tc=!1;else{for(ic=tc.next.next;ic!==tc.prev;){if(yd(uc.x,uc.y,tc.x,tc.y,Sb.x,Sb.y,ic.x,ic.y)&&0<=Fd(ic.prev,ic,ic.next)){tc=!1;break a}ic=ic.next}tc=!0}if(tc)M.push(Ib.i/
S),M.push(z.i/S),M.push(Wa.i/S),If(z),kb=z=Wa.next;else if((z=Wa)===kb){if(La)if(1===La){z=oc(z);La=M;Ib=S;Wa=z;do kb=Wa.prev,tc=Wa.next.next,!Ed(kb,tc)&&ye(kb,Wa,Wa.next,tc)&&ue(kb,tc)&&ue(tc,kb)&&(La.push(kb.i/Ib),La.push(Wa.i/Ib),La.push(tc.i/Ib),If(Wa),If(Wa.next),Wa=z=tc),Wa=Wa.next;while(Wa!==z);z=oc(Wa);Cc(z,M,S,ia,ta,Ba,2)}else{if(2===La)a:{La=z;do{for(Ib=La.next.next;Ib!==La.prev;){if(La.i!==Ib.i&&Id(La,Ib)){z=Ke(La,Ib);La=oc(La,La.next);z=oc(z,z.next);Cc(La,M,S,ia,ta,Ba);Cc(z,M,S,ia,ta,
Ba);break a}Ib=Ib.next}La=La.next}while(La!==z)}}else Cc(oc(z),M,S,ia,ta,Ba,1);break}}}}function cc(z,M){return z.x-M.x}function sc(z,M){if(M=function(S,ia){var ta=ia,Ba=S.x,La=S.y,Wa=-1/0;do{if(La<=ta.y&&La>=ta.next.y&&ta.next.y!==ta.y){var kb=ta.x+(La-ta.y)*(ta.next.x-ta.x)/(ta.next.y-ta.y);if(kb<=Ba&&kb>Wa){if(Wa=kb,kb===Ba){if(La===ta.y)return ta;if(La===ta.next.y)return ta.next}var vb=ta.x<ta.next.x?ta:ta.next}}ta=ta.next}while(ta!==ia);if(!vb)return null;if(Ba===Wa)return vb;kb=vb;var Ib=vb.x,
Sb=vb.y,ic=1/0;ta=vb;do{if(Ba>=ta.x&&ta.x>=Ib&&Ba!==ta.x&&yd(La<Sb?Ba:Wa,La,Ib,Sb,La<Sb?Wa:Ba,La,ta.x,ta.y)){ia=Math.abs(La-ta.y)/(Ba-ta.x);var ec;if((ec=ue(ta,S))&&!(ec=ia<ic)&&(ec=ia===ic)&&!(ec=ta.x>vb.x)&&(ec=ta.x===vb.x)){ec=vb;var uc=ta;ec=0>Fd(ec.prev,ec,uc.prev)&&0>Fd(uc.next,ec,ec.next)}ec&&(vb=ta,ic=ia)}ta=ta.next}while(ta!==kb);return vb}(z,M))z=Ke(M,z),oc(M,M.next),oc(z,z.next)}function jd(z,M,S,ia,ta){return 1431655765&((z=858993459&((z=252645135&((z=16711935&((z=32767*(z-S)*ta)|z<<8))|
z<<4))|z<<2))|z<<1)|(1431655765&((M=858993459&((M=252645135&((M=16711935&((M=32767*(M-ia)*ta)|M<<8))|M<<4))|M<<2))|M<<1))<<1}function yd(z,M,S,ia,ta,Ba,La,Wa){return 0<=(ta-La)*(M-Wa)-(z-La)*(Ba-Wa)&&0<=(z-La)*(ia-Wa)-(S-La)*(M-Wa)&&0<=(S-La)*(Ba-Wa)-(ta-La)*(ia-Wa)}function Id(z,M){return z.next.i!==M.i&&z.prev.i!==M.i&&!function(S,ia){var ta=S;do{if(ta.i!==S.i&&ta.next.i!==S.i&&ta.i!==ia.i&&ta.next.i!==ia.i&&ye(ta,ta.next,S,ia))return!0;ta=ta.next}while(ta!==S);return!1}(z,M)&&(ue(z,M)&&ue(M,z)&&
function(S,ia){var ta=S,Ba=!1,La=(S.x+ia.x)/2;ia=(S.y+ia.y)/2;do ta.y>ia!=ta.next.y>ia&&ta.next.y!==ta.y&&La<(ta.next.x-ta.x)*(ia-ta.y)/(ta.next.y-ta.y)+ta.x&&(Ba=!Ba),ta=ta.next;while(ta!==S);return Ba}(z,M)&&(Fd(z.prev,z,M.prev)||Fd(z,M.prev,M))||Ed(z,M)&&0<Fd(z.prev,z,z.next)&&0<Fd(M.prev,M,M.next))}function Fd(z,M,S){return(M.y-z.y)*(S.x-M.x)-(M.x-z.x)*(S.y-M.y)}function Ed(z,M){return z.x===M.x&&z.y===M.y}function ye(z,M,S,ia){var ta=Ne(Fd(z,M,S)),Ba=Ne(Fd(z,M,ia)),La=Ne(Fd(S,ia,z)),Wa=Ne(Fd(S,
ia,M));return ta!==Ba&&La!==Wa||!(0!==ta||!ze(z,S,M))||!(0!==Ba||!ze(z,ia,M))||!(0!==La||!ze(S,z,ia))||!(0!==Wa||!ze(S,M,ia))}function ze(z,M,S){return M.x<=Math.max(z.x,S.x)&&M.x>=Math.min(z.x,S.x)&&M.y<=Math.max(z.y,S.y)&&M.y>=Math.min(z.y,S.y)}function Ne(z){return 0<z?1:0>z?-1:0}function ue(z,M){return 0>Fd(z.prev,z,z.next)?0<=Fd(z,M,z.next)&&0<=Fd(z,z.prev,M):0>Fd(z,M,z.prev)||0>Fd(z,z.next,M)}function Ke(z,M){var S=new Xh(z.i,z.x,z.y),ia=new Xh(M.i,M.x,M.y),ta=z.next,Ba=M.prev;return z.next=
M,M.prev=z,S.next=ta,ta.prev=S,ia.next=S,S.prev=ia,Ba.next=ia,ia.prev=Ba,ia}function mf(z,M,S,ia){z=new Xh(z,M,S);return ia?(z.next=ia.next,z.prev=ia,ia.next.prev=z,ia.next=z):(z.prev=z,z.next=z),z}function If(z){z.next.prev=z.prev;z.prev.next=z.next;z.prevZ&&(z.prevZ.nextZ=z.nextZ);z.nextZ&&(z.nextZ.prevZ=z.prevZ)}function Xh(z,M,S){this.i=z;this.x=M;this.y=S;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function mi(z,M,S,ia){for(var ta=0,Ba=S-ia;M<S;M+=ia)ta+=(z[Ba]-z[M])*
(z[M+1]+z[Ba+1]),Ba=M;return ta}function Oh(z,M,S,ia,ta){!function Sb(La,Wa,kb,vb,Ib){for(;vb>kb;){if(600<vb-kb){var ic=vb-kb+1,ec=Wa-kb+1,uc=Math.log(ic),tc=.5*Math.exp(2*uc/3);uc=.5*Math.sqrt(uc*tc*(ic-tc)/ic)*(0>ec-ic/2?-1:1);Sb(La,Wa,Math.max(kb,Math.floor(Wa-ec*tc/ic+uc)),Math.min(vb,Math.floor(Wa+(ic-ec)*tc/ic+uc)),Ib)}ic=La[Wa];ec=kb;tc=vb;Vf(La,kb,Wa);for(0<Ib(La[vb],ic)&&Vf(La,kb,vb);ec<tc;){Vf(La,ec,tc);ec++;for(tc--;0>Ib(La[ec],ic);)ec++;for(;0<Ib(La[tc],ic);)tc--}0===Ib(La[kb],ic)?Vf(La,
kb,tc):Vf(La,++tc,vb);tc<=Wa&&(kb=tc+1);Wa<=tc&&(vb=tc-1)}}(z,M,S||0,ia||z.length-1,ta||ni)}function Vf(z,M,S){var ia=z[M];z[M]=z[S];z[S]=ia}function ni(z,M){return z<M?-1:z>M?1:0}function Si(z,M){var S=z.length;if(1>=S)return[z];for(var ia,ta,Ba=[],La=0;La<S;La++){var Wa=z[La];for(var kb=0,vb=0,Ib=Wa.length,Sb=Ib-1,ic=void 0,ec=void 0;vb<Ib;Sb=vb++)kb+=((ec=Wa[Sb]).x-(ic=Wa[vb]).x)*(ic.y+ec.y);Wa=kb;0!==Wa&&(z[La].area=Math.abs(Wa),void 0===ta&&(ta=0>Wa),ta===0>Wa?(ia&&Ba.push(ia),ia=[z[La]]):ia.push(z[La]))}if(ia&&
Ba.push(ia),1<M)for(z=0;z<Ba.length;z++)Ba[z].length<=M||(Oh(Ba[z],M,1,Ba[z].length-1,Ph),Ba[z]=Ba[z].slice(0,M));return Ba}function Ph(z,M){return M.area-z.area}function zh(z,M,S){S=S.patternDependencies;for(var ia=!1,ta=0;ta<M.length;ta+=1){var Ba=M[ta].paint.get(z+"-pattern");Ba.isConstant()||(ia=!0);(Ba=Ba.constantOr(null))&&(ia=!0,S[Ba.to]=!0,S[Ba.from]=!0)}return ia}function gh(z,M,S,ia,ta){for(var Ba=ta.patternDependencies,La=0;La<M.length;La+=1){var Wa=M[La],kb=Wa.paint.get(z+"-pattern").value;
if("constant"!==kb.kind){var vb=kb.evaluate({zoom:ia-1},S,{},ta.availableImages),Ib=kb.evaluate({zoom:ia},S,{},ta.availableImages);kb=kb.evaluate({zoom:ia+1},S,{},ta.availableImages);Ib=Ib&&Ib.name?Ib.name:Ib;kb=kb&&kb.name?kb.name:kb;Ba[vb=vb&&vb.name?vb.name:vb]=!0;Ba[Ib]=!0;Ba[kb]=!0;S.patterns[Wa.id]={min:vb,mid:Ib,max:kb}}}return S}function Cg(z,M,S,ia,ta){this.properties={};this.extent=S;this.type=0;this._pbf=z;this._geometry=-1;this._keys=ia;this._values=ta;z.readFields(Ti,this,M)}function Ti(z,
M,S){if(1==z)M.id=S.readVarint();else if(2==z)for(z=S.readVarint()+S.pos;S.pos<z;){var ia=M._keys[S.readVarint()],ta=M._values[S.readVarint()];M.properties[ia]=ta}else 3==z?M.type=S.readVarint():4==z&&(M._geometry=S.pos)}function rg(z,M){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=z;this._keys=[];this._values=[];this._features=[];z.readFields(Rh,this,M);this.length=this._features.length}function Rh(z,M,S){if(15===z)M.version=S.readVarint();else if(1===z)M.name=S.readString();
else if(5===z)M.extent=S.readVarint();else if(2===z)M._features.push(S.pos);else if(3===z)M._keys.push(S.readString());else if(4===z){z=M._values;M=z.push;for(var ia=null,ta=S.readVarint()+S.pos;S.pos<ta;)ia=S.readVarint()>>3,ia=1===ia?S.readString():2===ia?S.readFloat():3===ia?S.readDouble():4===ia?S.readVarint64():5===ia?S.readVarint():6===ia?S.readSVarint():7===ia?S.readBoolean():null;M.call(z,ia)}}function Ah(z,M,S){3===z&&(z=new Pk(S,S.readVarint()+S.pos),z.length&&(M[z.name]=z))}function Qh(z,
M,S,ia,ta,Ba,La,Wa){z.emplaceBack(M,S,2*Math.floor(ia*Rk)+La,ta*Rk*2,Ba*Rk*2,Math.round(Wa))}function hh(z,M){return z.x*M.x+z.y*M.y}function Sh(z,M){if(1===z.length){for(var S,ia=0,ta=M[ia++];!S||ta.equals(S);)if(!(S=M[ia++]))return 1/0;for(;ia<M.length;ia++){var Ba=M[ia],La=z[0],Wa=S.sub(ta),kb=Ba.sub(ta),vb=La.sub(ta);La=hh(Wa,Wa);var Ib=hh(Wa,kb),Sb=hh(kb,kb);Wa=hh(vb,Wa);kb=hh(vb,kb);vb=La*Sb-Ib*Ib;Sb=(Sb*Wa-Ib*kb)/vb;La=(La*kb-Ib*Wa)/vb;Ba=ta.z*(1-Sb-La)+S.z*Sb+Ba.z*La;if(isFinite(Ba))return Ba}return 1/
0}z=1/0;for(S=0;S<M.length;S+=1)z=Math.min(z,M[S].z);return z}function Th(z,M){return 0<M?M+2*z:z}function Bh(z,M,S){return z.sections.forEach(function(ia){var ta=ia.text;var Ba=M.layout.get("text-transform").evaluate(S,{});Ba=("uppercase"===Ba?ta=ta.toLocaleUpperCase():"lowercase"===Ba&&(ta=ta.toLocaleLowerCase()),xg.applyArabicShaping&&(ta=xg.applyArabicShaping(ta)),ta);ia.text=Ba}),z}function Oe(z){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(z)?z:new Uint8Array(z||0);this.type=this.pos=0;this.length=
this.buf.length}function kg(z){return z.type===Oe.Bytes?z.readVarint()+z.pos:z.pos+1}function uh(z,M,S){M=16383>=M?1:2097151>=M?2:268435455>=M?3:Math.floor(Math.log(M)/(7*Math.LN2));S.realloc(M);for(var ia=S.pos-1;ia>=z;ia--)S.buf[ia+M]=S.buf[ia]}function vh(z,M){for(var S=0;S<z.length;S++)M.writeVarint(z[S])}function Ui(z,M){for(var S=0;S<z.length;S++)M.writeSVarint(z[S])}function Ch(z,M){for(var S=0;S<z.length;S++)M.writeFloat(z[S])}function Ai(z,M){for(var S=0;S<z.length;S++)M.writeDouble(z[S])}
function sj(z,M){for(var S=0;S<z.length;S++)M.writeBoolean(z[S])}function nf(z,M){for(var S=0;S<z.length;S++)M.writeFixed32(z[S])}function tj(z,M){for(var S=0;S<z.length;S++)M.writeSFixed32(z[S])}function Vh(z,M){for(var S=0;S<z.length;S++)M.writeFixed64(z[S])}function Lj(z,M){for(var S=0;S<z.length;S++)M.writeSFixed64(z[S])}function Uh(z,M){return(z[M]|z[M+1]<<8|z[M+2]<<16)+16777216*z[M+3]}function ih(z,M,S){z[S]=M;z[S+1]=M>>>8;z[S+2]=M>>>16;z[S+3]=M>>>24}function Dg(z,M){return(z[M]|z[M+1]<<8|z[M+
2]<<16)+(z[M+3]<<24)}function Vi(z,M,S){1===z&&S.readMessage(cg,M)}function cg(z,M,S){if(3===z){z=S.readMessage(Yh,{});S=z.width;var ia=z.height,ta=z.left,Ba=z.top,La=z.advance;M.push({id:z.id,bitmap:new Pi({width:S+6,height:ia+6},z.bitmap),metrics:{width:S,height:ia,left:ta,top:Ba,advance:La}})}}function Yh(z,M,S){1===z?M.id=S.readVarint():2===z?M.bitmap=S.readBytes():3===z?M.width=S.readVarint():4===z?M.height=S.readVarint():5===z?M.left=S.readSVarint():6===z?M.top=S.readSVarint():7===z&&(M.advance=
S.readVarint())}function af(z){for(var M=0,S=0,ia=0;ia<z.length;ia+=1){var ta=z[ia];M+=ta.w*ta.h;S=Math.max(S,ta.w)}z.sort(function(vb,Ib){return Ib.h-vb.h});S=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(M/.95)),S),h:1/0}];for(var Ba=ta=ia=0;Ba<z.length;Ba+=1)for(var La=z[Ba],Wa=S.length-1;0<=Wa;Wa--){var kb=S[Wa];if(!(La.w>kb.w||La.h>kb.h)){(La.x=kb.x,La.y=kb.y,ta=Math.max(ta,La.y+La.h),ia=Math.max(ia,La.x+La.w),La.w===kb.w&&La.h===kb.h)?(La=S.pop(),Wa<S.length&&(S[Wa]=La)):La.h===kb.h?(kb.x+=La.w,
kb.w-=La.w):La.w===kb.w?(kb.y+=La.h,kb.h-=La.h):(S.push({x:kb.x+La.w,y:kb.y,w:kb.w-La.w,h:La.h}),kb.y+=La.h,kb.h-=La.h);break}}return{w:ia,h:ta,fill:M/(ia*ta)||0}}function jh(z,M,S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec,uc,tc){ta=xc.fromFeature(z,ta);Sb===id.vertical&&ta.verticalizePunctuation();var Qc=xg.processBidirectionalText,wd=xg.processStyledBidirectionalText;if(Qc&&1===ta.sections.length){z=[];var Ad=0;for(Ba=Qc(ta.toString(),Tg(ta,vb,Ba,M,ia,ec,uc));Ad<Ba.length;Ad+=1){ec=Ba[Ad];uc=new xc;uc.text=
ec;uc.sections=ta.sections;for(Qc=0;Qc<ec.length;Qc++)uc.sectionIndex.push(0);z.push(uc)}}else if(wd)for(z=[],Ad=0,Ba=wd(ta.text,ta.sectionIndex,Tg(ta,vb,Ba,M,ia,ec,uc));Ad<Ba.length;Ad+=1)ec=Ba[Ad],uc=new xc,uc.text=ec[0],uc.sectionIndex=ec[1],uc.sections=ta.sections,z.push(uc);else z=function(od,Od){for(var Nd=[],Sd=od.text,be=0,je=0;je<Od.length;je+=1){var qe=Od[je];Nd.push(od.substring(be,qe));be=qe}return be<Sd.length&&Nd.push(od.substring(be,Sd.length)),Nd}(ta,Tg(ta,vb,Ba,M,ia,ec,uc));Ba=[];
Ib={positionedLines:Ba,text:ta.toString(),top:Ib[1],bottom:Ib[1],left:Ib[0],right:Ib[0],writingMode:Sb,iconsInText:!1,verticalizable:!1};return function(od,Od,Nd,Sd,be,je,qe,re,he,le,Ee,ce){var Yd=0,de=-17,Me=0,kf=0;re="right"===re?1:"left"===re?0:.5;for(var pg=0,Of=0;Of<be.length;Of+=1){var lf=be[Of];lf.trim();var Ie=lf.getMaxScale(),Af=24*(Ie-1),Uf={positionedGlyphs:[],lineOffset:0};od.positionedLines[pg]=Uf;var jg=Uf.positionedGlyphs,Yj=0;if(lf.length()){for(var Nh=0;Nh<lf.length();Nh++){var tf=
lf.getSection(Nh),Ag=lf.getSectionIndex(Nh),lj=lf.getCharCode(Nh),Hj,Zj=null,qg=null,mj=24,Df=!(he===id.horizontal||!Ee&&!Rd(lj)||Ee&&(Vc[lj]||(Bg=lj,Zd.Arabic(Bg)||Zd["Arabic Supplement"](Bg)||Zd["Arabic Extended-A"](Bg)||Zd["Arabic Presentation Forms-A"](Bg)||Zd["Arabic Presentation Forms-B"](Bg))));if(tf.imageName){mj=Sd[tf.imageName];if(!mj)continue;qg=tf.imageName;od.iconsInText=od.iconsInText||!0;Zj=mj.paddedRect;var fh=mj.displaySize;tf.scale=24*tf.scale/ce;var ef=Af+(24-fh[1]*tf.scale);mj=
(Hj={width:fh[0],height:fh[1],left:1,top:-3,advance:Df?fh[1]:fh[0]}).advance;fh=Df?fh[0]*tf.scale-24*Ie:fh[1]*tf.scale-24*Ie;0<fh&&fh>Yj&&(Yj=fh)}else{if((ef=(ef=Nd[tf.fontStack])&&ef[lj])&&ef.rect)Zj=ef.rect,Hj=ef.metrics;else{ef=(ef=Od[tf.fontStack])&&ef[lj];if(!ef)continue;Hj=ef.metrics}ef=24*(Ie-tf.scale)}Df?(od.verticalizable=!0,jg.push({glyph:lj,imageName:qg,x:Yd,y:de+ef,vertical:Df,scale:tf.scale,fontStack:tf.fontStack,sectionIndex:Ag,metrics:Hj,rect:Zj}),Yd+=mj*tf.scale+le):(jg.push({glyph:lj,
imageName:qg,x:Yd,y:de+ef,vertical:Df,scale:tf.scale,fontStack:tf.fontStack,sectionIndex:Ag,metrics:Hj,rect:Zj}),Yd+=Hj.advance*tf.scale+le)}if(0!==jg.length&&(Me=Math.max(Yd-le,Me),Yd=jg,jg=jg.length-1,lf=Yj,re||lf))for(Nh=Yd[jg],Nh=(Yd[jg].x+Nh.metrics.advance*Nh.scale)*re,tf=0;tf<=jg;tf++)Yd[tf].x-=Nh,Yd[tf].y+=lf;Yd=0;Ie=je*Ie+Yj;Uf.lineOffset=Math.max(Yj,Af);de+=Ie;kf=Math.max(Ie,kf)}else de+=je;++pg}var Bg;Od=de- -17;Nd=wh(qe);qe=Nd.horizontalAlign;Nd=Nd.verticalAlign;re=(re-qe)*Me;be=kf!==
je?-Od*Nd- -17:(-Nd*be.length+.5)*je;je=0;for(kf=od.positionedLines;je<kf.length;je+=1)for(Sd=0,he=kf[je].positionedGlyphs;Sd<he.length;Sd+=1)le=he[Sd],le.x+=re,le.y+=be;od.top+=-Nd*Od;od.bottom=od.top+Od;od.left+=-qe*Me;od.right=od.left+Me}(Ib,M,S,ia,z,La,Wa,kb,Sb,vb,ic,tc),!function(od){for(var Od=0;Od<od.length;Od+=1)if(0!==od[Od].positionedGlyphs.length)return!1;return!0}(Ba)&&Ib}function Ug(z,M,S,ia,ta,Ba){return M.imageName?(z=ia[M.imageName])?z.displaySize[0]*M.scale*24/Ba+ta:0:(z=(Ba=S[M.fontStack])&&
Ba[z])?z.metrics.advance*M.scale+ta:0}function dg(z,M,S,ia){var ta=Math.pow(z-M,2);return ia?z<M?ta/2:2*ta:ta+Math.abs(S)*S}function Te(z,M,S){var ia=0;return 10===z&&(ia-=1E4),S&&(ia+=150),40!==z&&65288!==z||(ia+=50),41!==M&&65289!==M||(ia+=50),ia}function Ve(z,M,S,ia,ta,Ba){for(var La=null,Wa=dg(M,S,ta,Ba),kb=0;kb<ia.length;kb+=1){var vb=ia[kb],Ib=dg(M-vb.x,S,ta,Ba)+vb.badness;Ib<=Wa&&(La=vb,Wa=Ib)}return{index:z,x:M,priorBreak:La,badness:Wa}}function Tg(z,M,S,ia,ta,Ba,La){if("point"!==Ba||!z)return[];
var Wa;Ba=[];S=function(uc,tc,Qc,wd,Ad,od){for(var Od=0,Nd=0;Nd<uc.length();Nd++){var Sd=uc.getSection(Nd);Od+=Ug(uc.getCharCode(Nd),Sd,wd,Ad,tc,od)}return Od/Math.max(1,Math.ceil(Od/Qc))}(z,M,S,ia,ta,La);for(var kb=0<=z.text.indexOf(""),vb=0,Ib=0;Ib<z.length();Ib++){var Sb=z.getSection(Ib),ic=z.getCharCode(Ib);if(Vc[ic]||(vb+=Ug(ic,Sb,ia,ta,M,La)),Ib<z.length()-1){var ec=!(11904>(Wa=ic)||!(Zd["Bopomofo Extended"](Wa)||Zd.Bopomofo(Wa)||Zd["CJK Compatibility Forms"](Wa)||Zd["CJK Compatibility Ideographs"](Wa)||
Zd["CJK Compatibility"](Wa)||Zd["CJK Radicals Supplement"](Wa)||Zd["CJK Strokes"](Wa)||Zd["CJK Symbols and Punctuation"](Wa)||Zd["CJK Unified Ideographs Extension A"](Wa)||Zd["CJK Unified Ideographs"](Wa)||Zd["Enclosed CJK Letters and Months"](Wa)||Zd["Halfwidth and Fullwidth Forms"](Wa)||Zd.Hiragana(Wa)||Zd["Ideographic Description Characters"](Wa)||Zd["Kangxi Radicals"](Wa)||Zd["Katakana Phonetic Extensions"](Wa)||Zd.Katakana(Wa)||Zd["Vertical Forms"](Wa)||Zd["Yi Radicals"](Wa)||Zd["Yi Syllables"](Wa)));
(qd[ic]||ec||Sb.imageName)&&Ba.push(Ve(Ib+1,vb,S,Ba,Te(ic,z.getCharCode(Ib+1),ec&&kb),!1))}}return function Qc(tc){return tc?Qc(tc.priorBreak).concat(tc.index):[]}(Ve(z.length(),vb,S,Ba,0,!0))}function wh(z){var M=.5,S=.5;switch(z){case "right":case "top-right":case "bottom-right":M=1;break;case "left":case "top-left":case "bottom-left":M=0}switch(z){case "bottom":case "bottom-right":case "bottom-left":S=1;break;case "top":case "top-right":case "top-left":S=0}return{horizontalAlign:M,verticalAlign:S}}
function Bi(z,M,S,ia,ta,Ba){z=z.image;if(z.content){var La=z.content;var Wa=z.pixelRatio||1;La=[La[0]/Wa,La[1]/Wa,z.displaySize[0]-La[2]/Wa,z.displaySize[1]-La[3]/Wa]}var kb,vb,Ib,Sb;Wa=M.left*Ba;var ic=M.right*Ba;"width"===S||"both"===S?(Sb=ta[0]+Wa-ia[3],vb=ta[0]+ic+ia[1]):vb=(Sb=ta[0]+(Wa+ic-z.displaySize[0])/2)+z.displaySize[0];Wa=M.top*Ba;M=M.bottom*Ba;return"height"===S||"both"===S?(kb=ta[1]+Wa-ia[0],Ib=ta[1]+M+ia[2]):Ib=(kb=ta[1]+(Wa+M-z.displaySize[1])/2)+z.displaySize[1],{image:z,top:kb,
right:vb,bottom:Ib,left:Sb,collisionPadding:La}}function Ci(z,M){M=M.expression;if("constant"===M.kind)return{kind:"constant",layoutSize:M.evaluate(new df(z+1))};if("source"===M.kind)return{kind:"source"};for(var S=M.zoomStops,ia=M.interpolationType,ta=0;ta<S.length&&S[ta]<=z;)ta++;for(var Ba=ta=Math.max(0,ta-1);Ba<S.length&&S[Ba]<z+1;)Ba++;Ba=Math.min(S.length-1,Ba);z=S[ta];S=S[Ba];return"composite"===M.kind?{kind:"composite",minZoom:z,maxZoom:S,interpolationType:ia}:{kind:"camera",minZoom:z,maxZoom:S,
minSize:M.evaluate(new df(z)),maxSize:M.evaluate(new df(S)),interpolationType:ia}}function Wh(z,M,S){var ia=M.uSize,ta=S.lowerSize;return"source"===z.kind?ta/128:"composite"===z.kind?Aa(ta/128,S.upperSize/128,M.uSizeT):ia}function Di(z,M){var S=0,ia=0;if("constant"===z.kind)ia=z.layoutSize;else if("source"!==z.kind){var ta=z.interpolationType;M=ta?c(Gf.interpolationFactor(ta,M,z.minZoom,z.maxZoom),0,1):0;"camera"===z.kind?ia=Aa(z.minSize,z.maxSize,M):S=M}return{uSizeT:S,uSize:ia}}function Eg(z,M,
S,ia,ta){if(void 0===M.segment)return!0;var Ba=M;M=M.segment+1;for(var La=0;La>-S/2;){if(0>--M)return!1;La-=z[M].dist(Ba);Ba=z[M]}La+=z[M].dist(z[M+1]);M++;Ba=[];for(var Wa=0;La<S/2;){var kb=z[M],vb=z[M+1];if(!vb)return!1;var Ib=z[M-1].angleTo(kb)-kb.angleTo(vb);Ib=Math.abs((Ib+3*Math.PI)%(2*Math.PI)-Math.PI);Ba.push({distance:La,angleDelta:Ib});for(Wa+=Ib;La-Ba[0].distance>ia;)Wa-=Ba.shift().angleDelta;if(Wa>ta)return!1;M++;La+=kb.dist(vb)}return!0}function rf(z){for(var M=0,S=0;S<z.length-1;S++)M+=
z[S].dist(z[S+1]);return M}function Ei(z,M,S,ia,ta,Ba){ta=S?.6*ta*Ba:0;S=Math.max(S?S.right-S.left:0,ia?ia.right-ia.left:0)*Ba;var La=0,Wa=rf(z)/2;for(ia=0;ia<z.length-1;ia++){Ba=z[ia];var kb=z[ia+1],vb=Ba.dist(kb);if(La+vb>Wa)return Wa=(Wa-La)/vb,La=Aa(Ba.x,kb.x,Wa),Wa=Aa(Ba.y,kb.y,Wa),ia=new td(La,Wa,kb.angleTo(Ba),ia),ia._round(),!ta||Eg(z,ia,S,ta,M)?ia:void 0;La+=vb}}function Wi(z,M,S,ia,ta,Ba,La,Wa,kb){ta=Math.max(ia?ia.right-ia.left:0,ta?ta.right-ta.left:0);var vb=ta*La,Ib=0===z[0].x||z[0].x===
kb||0===z[0].y||z[0].y===kb;return M-vb<M/4&&(M=vb+M/4),function Nd(ic,ec,uc,tc,Qc,wd,Ad,od,Od){var Sd=wd/2,be=rf(ic),je=0;ec-=uc;for(var qe=[],re=0;re<ic.length-1;re++){for(var he=ic[re],le=ic[re+1],Ee=he.dist(le),ce=le.angleTo(he);ec+uc<je+Ee;){var Yd=((ec+=uc)-je)/Ee,de=Aa(he.x,le.x,Yd);Yd=Aa(he.y,le.y,Yd);0<=de&&de<Od&&0<=Yd&&Yd<Od&&0<=ec-Sd&&ec+Sd<=be&&(de=new td(de,Yd,ce,re),de._round(),tc&&!Eg(ic,de,wd,tc,Qc)||qe.push(de))}je+=Ee}return od||qe.length||Ad||(qe=Nd(ic,je/2,uc,tc,Qc,wd,Ad,!0,Od)),
qe}(z,Ib?M/2*Wa%M:(ta/2+2*Ba)*La*Wa%M,M,ia?.6*Ba*La:0,S,vb,Ib,!1,kb)}function Bf(z,M,S,ia,ta){for(var Ba=[],La=0;La<z.length;La++)for(var Wa=z[La],kb=void 0,vb=0;vb<Wa.length-1;vb++){var Ib=Wa[vb],Sb=Wa[vb+1];Ib.x<M&&Sb.x<M||(Ib.x<M?Ib=(new ge(M,Ib.y+(M-Ib.x)/(Sb.x-Ib.x)*(Sb.y-Ib.y)))._round():Sb.x<M&&(Sb=(new ge(M,Ib.y+(M-Ib.x)/(Sb.x-Ib.x)*(Sb.y-Ib.y)))._round()),Ib.y<S&&Sb.y<S||(Ib.y<S?Ib=(new ge(Ib.x+(S-Ib.y)/(Sb.y-Ib.y)*(Sb.x-Ib.x),S))._round():Sb.y<S&&(Sb=(new ge(Ib.x+(S-Ib.y)/(Sb.y-Ib.y)*(Sb.x-
Ib.x),S))._round()),Ib.x>=ia&&Sb.x>=ia||(Ib.x>=ia?Ib=(new ge(ia,Ib.y+(ia-Ib.x)/(Sb.x-Ib.x)*(Sb.y-Ib.y)))._round():Sb.x>=ia&&(Sb=(new ge(ia,Ib.y+(ia-Ib.x)/(Sb.x-Ib.x)*(Sb.y-Ib.y)))._round()),Ib.y>=ta&&Sb.y>=ta||(Ib.y>=ta?Ib=(new ge(Ib.x+(ta-Ib.y)/(Sb.y-Ib.y)*(Sb.x-Ib.x),ta))._round():Sb.y>=ta&&(Sb=(new ge(Ib.x+(ta-Ib.y)/(Sb.y-Ib.y)*(Sb.x-Ib.x),ta))._round()),kb&&Ib.equals(kb[kb.length-1])||Ba.push(kb=[Ib]),kb.push(Sb)))))}return Ba}function Fg(z,M,S,ia){var ta=[],Ba=z.image,La=Ba.pixelRatio,Wa=Ba.paddedRect.w-
2,kb=Ba.paddedRect.h-2,vb=z.right-z.left,Ib=z.bottom-z.top,Sb=Ba.stretchX||[[0,Wa]],ic=Ba.stretchY||[[0,kb]],ec=function(re,he){return re+he[1]-he[0]},uc=Sb.reduce(ec,0),tc=ic.reduce(ec,0),Qc=Wa-uc,wd=kb-tc,Ad=0,od=uc,Od=0,Nd=tc,Sd=0,be=Qc,je=0,qe=wd;Ba.content&&ia&&(ec=Ba.content,Ad=Rf(Sb,0,ec[0]),Od=Rf(ic,0,ec[1]),od=Rf(Sb,ec[0],ec[2]),Nd=Rf(ic,ec[1],ec[3]),Sd=ec[0]-Ad,je=ec[1]-Od,be=ec[2]-ec[0]-od,qe=ec[3]-ec[1]-Nd);ec=function(re,he,le,Ee){var ce=(re.stretch-Ad)/od*vb+z.left,Yd=re.fixed-Sd-be*
re.stretch/uc,de=(he.stretch-Od)/Nd*Ib+z.top,Me=he.fixed-je-qe*he.stretch/tc,kf=(le.stretch-Ad)/od*vb+z.left,pg=le.fixed-Sd-be*le.stretch/uc,Of=(Ee.stretch-Od)/Nd*Ib+z.top,lf=Ee.fixed-je-qe*Ee.stretch/tc,Ie=new ge(ce,de);de=new ge(kf,de);kf=new ge(kf,Of);ce=new ge(ce,Of);Yd=new ge(Yd/La,Me/La);pg=new ge(pg/La,lf/La);if(Me=M*Math.PI/180)lf=Math.sin(Me),Me=Math.cos(Me),lf=[Me,-lf,lf,Me],Ie._matMult(lf),de._matMult(lf),ce._matMult(lf),kf._matMult(lf);re=re.stretch+re.fixed;he=he.stretch+he.fixed;return{tl:Ie,
tr:de,bl:ce,br:kf,tex:{x:Ba.paddedRect.x+1+re,y:Ba.paddedRect.y+1+he,w:le.stretch+le.fixed-re,h:Ee.stretch+Ee.fixed-he},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Yd,pixelOffsetBR:pg,minFontScaleX:be/La/vb,minFontScaleY:qe/La/Ib,isSDF:S}};if(ia&&(Ba.stretchX||Ba.stretchY))for(ia=Dh(Sb,Qc,uc),ic=Dh(ic,wd,tc),Wa=0;Wa<ia.length-1;Wa++)for(kb=ia[Wa],Sb=ia[Wa+1],wd=0;wd<ic.length-1;wd++)ta.push(ec(kb,ic[wd],Sb,ic[wd+1]));else ta.push(ec({fixed:0,stretch:-1},{fixed:0,stretch:-1},
{fixed:0,stretch:Wa+1},{fixed:0,stretch:kb+1}));return ta}function Rf(z,M,S){for(var ia=0,ta=0;ta<z.length;ta+=1){var Ba=z[ta];ia+=Math.max(M,Math.min(S,Ba[1]))-Math.max(M,Math.min(S,Ba[0]))}return ia}function Dh(z,M,S){for(var ia=[{fixed:-1,stretch:0}],ta=0;ta<z.length;ta+=1){var Ba=z[ta],La=Ba[0];Ba=Ba[1];var Wa=ia[ia.length-1];ia.push({fixed:La-Wa.stretch,stretch:Wa.stretch});ia.push({fixed:La-Wa.stretch,stretch:Wa.stretch+(Ba-La)})}return ia.push({fixed:M+1,stretch:S}),ia}function Ng(z,M){return z<
M?-1:z>M?1:0}function lg(z,M,S){void 0===M&&(M=1);void 0===S&&(S=!1);for(var ia=1/0,ta=1/0,Ba=-1/0,La=-1/0,Wa=z[0],kb=0;kb<Wa.length;kb++){var vb=Wa[kb];(!kb||vb.x<ia)&&(ia=vb.x);(!kb||vb.y<ta)&&(ta=vb.y);(!kb||vb.x>Ba)&&(Ba=vb.x);(!kb||vb.y>La)&&(La=vb.y)}vb=Math.min(Ba-ia,La-ta);Wa=vb/2;kb=new Vd([],ag);if(0===vb)return new ge(ia,ta);for(;ia<Ba;ia+=vb)for(var Ib=ta;Ib<La;Ib+=vb)kb.push(new xh(ia+Wa,Ib+Wa,Wa,z));La=Ba=ta=0;ia=z[0];vb=0;Ib=ia.length;for(var Sb=Ib-1;vb<Ib;Sb=vb++){var ic=ia[vb];Sb=
ia[Sb];var ec=ic.x*Sb.y-Sb.x*ic.y;Ba+=(ic.x+Sb.x)*ec;La+=(ic.y+Sb.y)*ec;ta+=3*ec}ta=new xh(Ba/ta,La/ta,0,z);for(Ba=kb.length;kb.length;)La=kb.pop(),(La.d>ta.d||!ta.d)&&(ta=La,S&&console.log("found best %d after %d probes",Math.round(1E4*La.d)/1E4,Ba)),La.max-ta.d<=M||(kb.push(new xh(La.p.x-(Wa=La.h/2),La.p.y-Wa,Wa,z)),kb.push(new xh(La.p.x+Wa,La.p.y-Wa,Wa,z)),kb.push(new xh(La.p.x-Wa,La.p.y+Wa,Wa,z)),kb.push(new xh(La.p.x+Wa,La.p.y+Wa,Wa,z)),Ba+=4);return S&&(console.log("num probes: "+Ba),console.log("best distance: "+
ta.d)),ta.p}function ag(z,M){return M.max-z.max}function xh(z,M,S,ia){this.p=new ge(z,M);this.h=S;z=this.p;M=!1;S=1/0;for(var ta=0;ta<ia.length;ta++)for(var Ba=ia[ta],La=0,Wa=Ba.length,kb=Wa-1;La<Wa;kb=La++){var vb=Ba[La];kb=Ba[kb];vb.y>z.y!=kb.y>z.y&&z.x<(kb.x-vb.x)*(z.y-vb.y)/(kb.y-vb.y)+vb.x&&(M=!M);S=Math.min(S,Gb(z,vb,kb))}this.d=(M?1:-1)*Math.sqrt(S);this.max=this.d+this.h*Math.SQRT2}function yh(z,M){return M[1]!==ne?function(S,ia,ta){var Ba=0,La=0;switch(ia=Math.abs(ia),ta=Math.abs(ta),S){case "top-right":case "top-left":case "top":La=
ta-7;break;case "bottom-right":case "bottom-left":case "bottom":La=7-ta}switch(S){case "top-right":case "bottom-right":case "right":Ba=-ia;break;case "top-left":case "bottom-left":case "left":Ba=ia}return[Ba,La]}(z,M[0],M[1]):function(S,ia){var ta=0,Ba=0;0>ia&&(ia=0);var La=ia/Math.sqrt(2);switch(S){case "top-right":case "top-left":Ba=La-7;break;case "bottom-right":case "bottom-left":Ba=7-La;break;case "bottom":Ba=7-ia;break;case "top":Ba=ia-7}switch(S){case "top-right":case "bottom-right":ta=-La;
break;case "top-left":case "bottom-left":ta=La;break;case "left":ta=ia;break;case "right":ta=-ia}return[ta,Ba]}(z,M[0])}function oi(z){switch(z){case "right":case "top-right":case "bottom-right":return"right";case "left":case "top-left":case "bottom-left":return"left"}return"center"}function bg(z,M,S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec,uc){for(var tc=z.allowVerticalPlacement,Qc=ta.layout.get("text-rotate").evaluate(La,{})*Math.PI/180,wd=[],Ad=0,od=S.positionedLines;Ad<od.length;Ad+=1)for(var Od=od[Ad],
Nd=0,Sd=Od.positionedGlyphs;Nd<Sd.length;Nd+=1){var be=Sd[Nd];if(be.rect){var je=be.rect||{},qe=4,re=!0,he=1,le=0,Ee=(Ba||tc)&&be.vertical,ce=be.metrics.advance*be.scale/2;if(tc&&S.verticalizable&&(le=Od.lineOffset/2-(be.imageName?-(24-be.metrics.width*be.scale)/2:24*(be.scale-1))),be.imageName){var Yd=ia[be.imageName];re=Yd.sdf;qe=1/(he=Yd.pixelRatio)}Yd=Ba?[be.x+ce,be.y]:[0,0];var de=Ba?[0,0]:[be.x+ce+Wa[0],be.y+Wa[1]-le],Me=[0,0];Ee&&(Me=de,de=[0,0]);le=(be.metrics.left-qe)*be.scale-ce+de[0];qe=
(-be.metrics.top-qe)*be.scale+de[1];de=le+je.w*be.scale/he;var kf=qe+je.h*be.scale/he;he=new ge(le,qe);qe=new ge(de,qe);le=new ge(le,kf);de=new ge(de,kf);Ee&&(Ee=new ge(-ce,ce- -17),kf=-Math.PI/2,ce=12-ce,ce=new ge(22-ce,-(be.imageName?ce:0)),Me=new (Function.prototype.bind.apply(ge,[null].concat(Me))),he._rotateAround(kf,Ee)._add(ce)._add(Me),qe._rotateAround(kf,Ee)._add(ce)._add(Me),le._rotateAround(kf,Ee)._add(ce)._add(Me),de._rotateAround(kf,Ee)._add(ce)._add(Me));Qc&&(ce=Math.sin(Qc),Me=Math.cos(Qc),
ce=[Me,-ce,ce,Me],he._matMult(ce),qe._matMult(ce),le._matMult(ce),de._matMult(ce));ce=new ge(0,0);Me=new ge(0,0);wd.push({tl:he,tr:qe,bl:le,br:de,tex:je,writingMode:S.writingMode,glyphOffset:Yd,sectionIndex:be.sectionIndex,isSDF:re,pixelOffsetTL:ce,pixelOffsetBR:Me,minFontScaleX:0,minFontScaleY:0})}}S=z.textSizeData;ia=null;"source"===S.kind?32640<(ia=[128*ta.layout.get("text-size").evaluate(La,{})])[0]&&x(z.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".'):"composite"===
S.kind&&(32640<(ia=[128*ec.compositeTextSizes[0].evaluate(La,{},uc),128*ec.compositeTextSizes[1].evaluate(La,{},uc)])[0]||32640<ia[1])&&x(z.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".');z.addSymbols(z.text,wd,ia,Wa,Ba,La,vb,M,kb.lineStartIndex,kb.lineLength,ic,uc);for(M=0;M<Ib.length;M+=1)Sb[Ib[M]]=z.text.placedSymbolArray.length-1;return 4*wd.length}function vf(z){for(var M in z)return z[M];return null}function qi(z,M,S,ia){z=z.compareText;if(M in z)for(var ta=
z[M],Ba=ta.length-1;0<=Ba;Ba--){if(ia.dist(ta[Ba])<S)return!0}else z[M]=[];return z[M].push(ia),!1}function eg(z,M,S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic){z.emplaceBack(M,S,Math.round(32*ia),Math.round(32*ta),Ba,La,((Wa?Math.min(32640,Math.round(Wa[0])):0)<<1)+(kb?1:0),Wa?Math.min(32640,Math.round(Wa[1])):0,16*vb,16*Ib,256*Sb,256*ic)}function Ff(z,M,S){z.emplaceBack(M.x,M.y,S);z.emplaceBack(M.x,M.y,S);z.emplaceBack(M.x,M.y,S);z.emplaceBack(M.x,M.y,S)}function kh(z){var M=0;for(z=z.sections;M<z.length;M+=
1){a:{var S=0;for(var ia=z[M].text;S<ia.length;S+=1)if(md(ia[S].charCodeAt(0))){S=!0;break a}S=!1}if(S)return!0}return!1}function wf(z,M,S){S=12756274*Math.PI/256/Math.pow(2,S);return[z*S-12756274*Math.PI/2,M*S-12756274*Math.PI/2]}function Zh(z){return(180+z)/360}function nh(z){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+z*Math.PI/360)))/360}function mg(z){return 360/Math.PI*Math.atan(Math.exp((180-360*z)*Math.PI/180))-90}function Vg(z,M,S,ia,ta){0>(z*=2)&&(z=-1*z-1);var Ba=1<<S;return(Ba*
Ba*z+Ba*ta+ia).toString(36)+S.toString(36)+M.toString(36)}function lh(z,M,S,ia,ta){return w(z,function(Ba,La){return(Ba=M instanceof zj?M.get(La):null)&&Ba.evaluate?Ba.evaluate(S,ia,ta):Ba})}function ng(z){for(var M=1/0,S=1/0,ia=-1/0,ta=-1/0,Ba=0;Ba<z.length;Ba+=1){var La=z[Ba];M=Math.min(M,La.x);S=Math.min(S,La.y);ia=Math.max(ia,La.x);ta=Math.max(ta,La.y)}return{minX:M,minY:S,maxX:ia,maxY:ta}}function ri(z,M){return M-z}var uj=d;d.prototype.sampleCurveX=function(z){return((this.ax*z+this.bx)*z+this.cx)*
z};d.prototype.sampleCurveY=function(z){return((this.ay*z+this.by)*z+this.cy)*z};d.prototype.sampleCurveDerivativeX=function(z){return(3*this.ax*z+2*this.bx)*z+this.cx};d.prototype.solveCurveX=function(z,M){var S,ia;void 0===M&&(M=1E-6);var ta=z;for(S=0;8>S;S++){if(ia=this.sampleCurveX(ta)-z,Math.abs(ia)<M)return ta;var Ba=this.sampleCurveDerivativeX(ta);if(1E-6>Math.abs(Ba))break;ta-=ia/Ba}if((ta=z)<(S=0))return S;if(ta>(Ba=1))return Ba;for(;S<Ba&&!(ia=this.sampleCurveX(ta),Math.abs(ia-z)<M);)z>
ia?S=ta:Ba=ta,ta=.5*(Ba-S)+S;return ta};d.prototype.solve=function(z,M){return this.sampleCurveY(this.solveCurveX(z,M))};var ge=l;l.prototype={clone:function(){return new l(this.x,this.y)},add:function(z){return this.clone()._add(z)},sub:function(z){return this.clone()._sub(z)},multByPoint:function(z){return this.clone()._multByPoint(z)},divByPoint:function(z){return this.clone()._divByPoint(z)},mult:function(z){return this.clone()._mult(z)},div:function(z){return this.clone()._div(z)},rotate:function(z){return this.clone()._rotate(z)},
rotateAround:function(z,M){return this.clone()._rotateAround(z,M)},matMult:function(z){return this.clone()._matMult(z)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(z){return this.x===z.x&&this.y===z.y},dist:function(z){return Math.sqrt(this.distSqr(z))},distSqr:function(z){var M=z.x-this.x;z=z.y-this.y;return M*M+z*z},angle:function(){return Math.atan2(this.y,
this.x)},angleTo:function(z){return Math.atan2(this.y-z.y,this.x-z.x)},angleWith:function(z){return this.angleWithSep(z.x,z.y)},angleWithSep:function(z,M){return Math.atan2(this.x*M-this.y*z,this.x*z+this.y*M)},_matMult:function(z){var M=z[2]*this.x+z[3]*this.y;return this.x=z[0]*this.x+z[1]*this.y,this.y=M,this},_add:function(z){return this.x+=z.x,this.y+=z.y,this},_sub:function(z){return this.x-=z.x,this.y-=z.y,this},_mult:function(z){return this.x*=z,this.y*=z,this},_div:function(z){return this.x/=
z,this.y/=z,this},_multByPoint:function(z){return this.x*=z.x,this.y*=z.y,this},_divByPoint:function(z){return this.x/=z.x,this.y/=z.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var z=this.y;return this.y=this.x,this.x=-z,this},_rotate:function(z){var M=Math.cos(z);z=Math.sin(z);var S=z*this.x+M*this.y;return this.x=M*this.x-z*this.y,this.y=S,this},_rotateAround:function(z,M){var S=Math.cos(z);z=Math.sin(z);var ia=M.y+z*(this.x-M.x)+S*(this.y-M.y);return this.x=M.x+
S*(this.x-M.x)-z*(this.y-M.y),this.y=ia,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};l.convert=function(z){return z instanceof l?z:Array.isArray(z)?new l(z[0],z[1]):z};var vj=k(.25,.1,.25,1),Gg=1,Hg={},oh=null,Xg,Gh,bi,Ig,wj=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Fi=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Xi=
self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,gg={now:wj,frame:function(z){var M=Fi(z);return{cancel:function(){return Xi(M)}}},getImageData:function(z,M){void 0===M&&(M=0);var S=self.document.createElement("canvas"),ia=S.getContext("2d");if(!ia)throw Error("failed to create canvas 2d context");return S.width=z.width,S.height=z.height,ia.drawImage(z,0,0,z.width,z.height),ia.getImageData(-M,-M,z.width+2*M,z.height+2*M)},resolveURL:function(z){return Xg||
(Xg=self.document.createElement("a")),Xg.href=z,Xg.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Gh&&(Gh=self.matchMedia("(prefers-reduced-motion: reduce)")),Gh.matches)}},Ye={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?
"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},mh={supported:!1,testSupport:function(z){!Yg&&Ig&&(Gi?I(z):bi=z)}},Yg=!1,Gi=!1;self.document&&((Ig=self.document.createElement("img")).onload=function(){bi&&I(bi);bi=null;Gi=!0},Ig.onerror=function(){Yg=!0;bi=null},Ig.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d");var vg=function(z,M){this._transformRequestFn=
z;this._customAccessToken=M;this._createSkuToken()};vg.prototype._createSkuToken=function(){var z;var M="";for(z=0;10>z;z++)M+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];M=["101",M].join("");z=Date.now()+432E5;this._skuToken=M;this._skuTokenExpiresAt=z};vg.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt};vg.prototype.transformRequest=function(z,M){return this._transformRequestFn&&this._transformRequestFn(z,M)||{url:z}};
vg.prototype.normalizeStyleURL=function(z,M){if(!J(z))return z;z=L(z);return z.path="/styles/v1"+z.path,this._makeAPIURL(z,this._customAccessToken||M)};vg.prototype.normalizeGlyphsURL=function(z,M){if(!J(z))return z;z=L(z);return z.path="/fonts/v1"+z.path,this._makeAPIURL(z,this._customAccessToken||M)};vg.prototype.normalizeSourceURL=function(z,M){if(!J(z))return z;z=L(z);return z.path="/v4/"+z.authority+".json",z.params.push("secure"),this._makeAPIURL(z,this._customAccessToken||M)};vg.prototype.normalizeSpriteURL=
function(z,M,S,ia){var ta=L(z);return J(z)?(ta.path="/styles/v1"+ta.path+"/sprite"+M+S,this._makeAPIURL(ta,this._customAccessToken||ia)):(ta.path+=""+M+S,E(ta))};vg.prototype.normalizeTileURL=function(z,M){if(this._isSkuTokenExpired()&&this._createSkuToken(),z&&!J(z))return z;z=L(z);z.path=z.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=gg.devicePixelRatio||512===M?"@2x":"")+(mh.supported?".webp":"$1"));z.path=z.path.replace(/^.+\/v4\//,"/");z.path="/v4"+z.path;if(!(M=this._customAccessToken))a:{M=0;for(var S=
z.params;M<S.length;M+=1){var ia=S[M].match(/^access_token=(.*)$/);if(ia){M=ia[1];break a}}M=null}M=M||Ye.ACCESS_TOKEN;return Ye.REQUIRE_ACCESS_TOKEN&&M&&this._skuToken&&z.params.push("sku\x3d"+this._skuToken),this._makeAPIURL(z,M)};vg.prototype.canonicalizeTileURL=function(z,M){var S=L(z);if(!S.path.match(/(^\/v4\/)/)||!S.path.match(/\.[\w]+$/))return z;z="mapbox://tiles/"+S.path.replace("/v4/","");S=S.params;return M&&(S=S.filter(function(ia){return!ia.match(/^access_token=/)})),S.length&&(z+="?"+
S.join("\x26")),z};vg.prototype.canonicalizeTileset=function(z,M){M=!!M&&J(M);var S=[],ia=0;for(z=z.tiles||[];ia<z.length;ia+=1){var ta=z[ia];Zg.test(ta)?S.push(this.canonicalizeTileURL(ta,M)):S.push(ta)}return S};vg.prototype._makeAPIURL=function(z,M){var S=L(Ye.API_URL);if(z.protocol=S.protocol,z.authority=S.authority,"/"!==S.path&&(z.path=""+S.path+z.path),!Ye.REQUIRE_ACCESS_TOKEN)return E(z);if(!(M=M||Ye.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
if("s"===M[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");return z.params=z.params.filter(function(ia){return-1===ia.indexOf("access_token")}),z.params.push("access_token\x3d"+M),E(z)};var Zg=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,di=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,Qg=function(z){this.type=z;this.anonId=null;this.eventData={};this.queue=[];this.pendingRequest=
null};Qg.prototype.getStorageKey=function(z){var M,S=K(Ye.ACCESS_TOKEN);return M=S&&S.u?self.btoa(encodeURIComponent(S.u).replace(/%([0-9A-F]{2})/g,function(ia,ta){return String.fromCharCode(Number("0x"+ta))})):Ye.ACCESS_TOKEN||"",z?"mapbox.eventData."+z+":"+M:"mapbox.eventData:"+M};Qg.prototype.fetchEventData=function(){var z=H("localStorage"),M=this.getStorageKey(),S=this.getStorageKey("uuid");if(z)try{var ia=self.localStorage.getItem(M);ia&&(this.eventData=JSON.parse(ia));var ta=self.localStorage.getItem(S);
ta&&(this.anonId=ta)}catch(Ba){x("Unable to read from LocalStorage")}};Qg.prototype.saveEventData=function(){var z=H("localStorage"),M=this.getStorageKey(),S=this.getStorageKey("uuid");if(z)try{self.localStorage.setItem(S,this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(M,JSON.stringify(this.eventData))}catch(ia){x("Unable to write to LocalStorage")}};Qg.prototype.processRequests=function(z){};Qg.prototype.postEvent=function(z,M,S,ia){var ta=this;if(Ye.EVENTS_URL){var Ba=
L(Ye.EVENTS_URL);Ba.params.push("access_token\x3d"+(ia||Ye.ACCESS_TOKEN||""));z={event:this.type,created:(new Date(z)).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:"01",userId:this.anonId};M=M?g(z,M):z;Ba={url:E(Ba),headers:{"Content-Type":"text/plain"},body:JSON.stringify([M])};this.pendingRequest=Ub(Ba,function(La){ta.pendingRequest=null;S(La);ta.saveEventData();ta.processRequests(ia)})}};Qg.prototype.queueRequest=function(z,M){this.queue.push(z);this.processRequests(M)};
var wg,Xf,og=function(z){function M(){z.call(this,"map.load");this.success={};this.skuToken=""}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.postMapLoadEvent=function(S,ia,ta,Ba){this.skuToken=ta;(Ye.EVENTS_URL&&Ba||Ye.ACCESS_TOKEN&&Array.isArray(S)&&S.some(function(La){return J(La)||Zg.test(La)}))&&this.queueRequest({id:ia,timestamp:Date.now()},Ba)},M.prototype.processRequests=function(S){var ia=this;if(!this.pendingRequest&&0!==this.queue.length){var ta=
this.queue.shift(),Ba=ta.id;ta=ta.timestamp;Ba&&this.success[Ba]||(this.anonId||this.fetchEventData(),r(this.anonId)||(this.anonId=m()),this.postEvent(ta,{skuToken:this.skuToken},function(La){La||Ba&&(ia.success[Ba]=!0)},S))}},M}(Qg),xj=new (function(z){function M(S){z.call(this,"appUserTurnstile");this._customAccessToken=S}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.postTurnstileEvent=function(S,ia){Ye.EVENTS_URL&&Ye.ACCESS_TOKEN&&Array.isArray(S)&&
S.some(function(ta){return J(ta)||Zg.test(ta)})&&this.queueRequest(Date.now(),ia)},M.prototype.processRequests=function(S){var ia=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var ta=K(Ye.ACCESS_TOKEN),Ba=ta?ta.u:Ye.ACCESS_TOKEN;ta=Ba!==this.eventData.tokenU;r(this.anonId)||(this.anonId=m(),ta=!0);var La=this.queue.shift();if(this.eventData.lastSuccess){var Wa=new Date(this.eventData.lastSuccess),kb=new Date(La),
vb=(La-this.eventData.lastSuccess)/864E5;ta=ta||1<=vb||-1>vb||Wa.getDate()!==kb.getDate()}else ta=!0;if(!ta)return this.processRequests();this.postEvent(La,{"enabled.telemetry":!1},function(Ib){Ib||(ia.eventData.lastSuccess=La,ia.eventData.tokenU=Ba)},S)}},M}(Qg)),pi=xj.postTurnstileEvent.bind(xj),ei=new og,Bb=ei.postMapLoadEvent.bind(ei),U=500,X=50,W,fa=1/0,za={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};
"function"==typeof Object.freeze&&Object.freeze(za);var Na=function(z){function M(S,ia,ta){401===ia&&Zg.test(ta)&&(S+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");z.call(this,S);this.status=ia;this.url=ta;this.name=this.constructor.name;this.message=S}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+
"): "+this.url},M}(Error),ab=B()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},mb=function(z,M){if(!(/^file:/.test(S=z.url)||/^file:/.test(ab())&&!/^\w+:/.test(S))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(ia,ta){var Ba,La=new self.AbortController,Wa=new self.Request(ia.url,{method:ia.method||"GET",body:ia.body,credentials:ia.credentials,
headers:ia.headers,referrer:ab(),signal:La.signal}),kb=!1,vb=!1,Ib=0<(Ba=Wa.url).indexOf("sku\x3d")&&Zg.test(Ba);"json"===ia.type&&Wa.headers.set("Accept","application/json");Ba=function(ic,ec,uc){if(!vb){if(ic&&"SecurityError"!==ic.message&&x(ic),ec&&uc)return Sb(ec);var tc=Date.now();self.fetch(Wa).then(function(Qc){if(Qc.ok){var wd=Ib?Qc.clone():null;return Sb(Qc,wd,tc)}return ta(new Na(Qc.statusText,Qc.status,ia.url))}).catch(function(Qc){20!==Qc.code&&ta(Error(Qc.message))})}};var Sb=function(ic,
ec,uc){("arrayBuffer"===ia.type?ic.arrayBuffer():"json"===ia.type?ic.json():ic.text()).then(function(tc){vb||(ec&&uc&&function(Qc,wd,Ad){if(N(),wg){var od={status:wd.status,statusText:wd.statusText,headers:new self.Headers};wd.headers.forEach(function(Nd,Sd){return od.headers.set(Sd,Nd)});var Od=t(wd.headers.get("Cache-Control")||"");Od["no-store"]||(Od["max-age"]&&od.headers.set("Expires",(new Date(Ad+1E3*Od["max-age"])).toUTCString()),42E4>(new Date(od.headers.get("Expires"))).getTime()-Ad||function(Nd,
Sd){if(void 0===Xf)try{new Response(new ReadableStream),Xf=!0}catch(be){Xf=!1}Xf?Sd(Nd.body):Nd.blob().then(Sd)}(wd,function(Nd){var Sd=new self.Response(Nd,od);N();wg&&wg.then(function(be){return be.put(O(Qc.url),Sd)}).catch(function(be){return x(be.message)})}))}}(Wa,ec,uc),kb=!0,ta(null,tc,ic.headers.get("Cache-Control"),ic.headers.get("Expires")))}).catch(function(tc){vb||ta(Error(tc.message))})};return Ib?function(ic,ec){if(N(),!wg)return ec(null);var uc=O(ic.url);wg.then(function(tc){tc.match(uc).then(function(Qc){if(Qc){var wd=
new Date(Qc.headers.get("Expires")||0);var Ad=t(Qc.headers.get("Cache-Control")||"");wd=wd>Date.now()&&!Ad["no-cache"]}else wd=!1;tc.delete(uc);wd&&tc.put(uc,Qc.clone());ec(null,Qc,wd)}).catch(ec)}).catch(ec)}(Wa,Ba):Ba(null,null),{cancel:function(){vb=!0;kb||La.abort()}}}(z,M);if(B()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",z,M,void 0,!0)}var S;return function(ia,ta){var Ba=new self.XMLHttpRequest,La;for(La in Ba.open(ia.method||"GET",ia.url,!0),"arrayBuffer"===
ia.type&&(Ba.responseType="arraybuffer"),ia.headers)Ba.setRequestHeader(La,ia.headers[La]);return"json"===ia.type&&(Ba.responseType="text",Ba.setRequestHeader("Accept","application/json")),Ba.withCredentials="include"===ia.credentials,Ba.onerror=function(){ta(Error(Ba.statusText))},Ba.onload=function(){if((200<=Ba.status&&300>Ba.status||0===Ba.status)&&null!==Ba.response){var Wa=Ba.response;if("json"===ia.type)try{Wa=JSON.parse(Ba.response)}catch(kb){return ta(kb)}ta(null,Wa,Ba.getResponseHeader("Cache-Control"),
Ba.getResponseHeader("Expires"))}else ta(new Na(Ba.statusText,Ba.status,ia.url))},Ba.send(ia.body),{cancel:function(){return Ba.abort()}}}(z,M)},Mb=function(z,M){return mb(g(z,{type:"arrayBuffer"}),M)},Ub=function(z,M){return mb(g(z,{method:"POST"}),M)};var Zb=[];var Jc=0;var Ic=function(z,M){if(mh.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*"),Jc>=Ye.MAX_PARALLEL_IMAGE_REQUESTS)return z={requestParameters:z,callback:M,cancelled:!1,cancel:function(){this.cancelled=!0}},Zb.push(z),
z;Jc++;var S=!1,ia=function(){if(!S)for(S=!0,Jc--;Zb.length&&Jc<Ye.MAX_PARALLEL_IMAGE_REQUESTS;){var Ba=Zb.shift();Ba.cancelled||(Ba.cancel=Ic(Ba.requestParameters,Ba.callback).cancel)}},ta=Mb(z,function(Ba,La,Wa,kb){ia();Ba?M(Ba):La&&(Q()?function(vb,Ib){vb=new self.Blob([new Uint8Array(vb)],{type:"image/png"});self.createImageBitmap(vb).then(function(Sb){Ib(null,Sb)}).catch(function(Sb){Ib(Error("Could not load image because of "+Sb.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(La,
M):function(vb,Ib,Sb,ic){var ec=new self.Image,uc=self.URL;ec.onload=function(){Ib(null,ec);uc.revokeObjectURL(ec.src)};ec.onerror=function(){return Ib(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var tc=new self.Blob([new Uint8Array(vb)],{type:"image/png"});ec.cacheControl=Sb;ec.expires=ic;ec.src=vb.byteLength?uc.createObjectURL(tc):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}(La,
M,Wa,kb))});return{cancel:function(){ta.cancel();ia()}}},yc=function(z,M){void 0===M&&(M={});g(this,M);this.type=z},Hc=function(z){function M(S,ia){void 0===ia&&(ia={});z.call(this,"error",g({error:S},ia))}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M}(yc),Dc=function(){};Dc.prototype.on=function(z,M){return this._listeners=this._listeners||{},P(z,M,this._listeners),this};Dc.prototype.off=function(z,M){return T(z,M,this._listeners),T(z,M,this._oneTimeListeners),
this};Dc.prototype.once=function(z,M){return this._oneTimeListeners=this._oneTimeListeners||{},P(z,M,this._oneTimeListeners),this};Dc.prototype.fire=function(z,M){"string"==typeof z&&(z=new yc(z,M||{}));M=z.type;if(this.listens(M)){z.target=this;for(var S=0,ia=this._listeners&&this._listeners[M]?this._listeners[M].slice():[];S<ia.length;S+=1)ia[S].call(this,z);S=0;for(ia=this._oneTimeListeners&&this._oneTimeListeners[M]?this._oneTimeListeners[M].slice():[];S<ia.length;S+=1){var ta=ia[S];T(M,ta,this._oneTimeListeners);
ta.call(this,z)}(M=this._eventedParent)&&(g(z,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),M.fire(z))}else z instanceof Hc&&console.error(z.error);return this};Dc.prototype.listens=function(z){return this._listeners&&this._listeners[z]&&0<this._listeners[z].length||this._oneTimeListeners&&this._oneTimeListeners[z]&&0<this._oneTimeListeners[z].length||this._eventedParent&&this._eventedParent.listens(z)};Dc.prototype.setEventedParent=function(z,M){return this._eventedParent=
z,this._eventedParentData=M,this};var Xb={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},
source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},
source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},
url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},
buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,
value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",
minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},
"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",
default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},
default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],
"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},
"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",
{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",
default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],
expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,
parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},
"\x3c":{},"\x3c\x3d":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",
required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},
"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},
rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},
log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},
any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,
expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean",
default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",
transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},
"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",
transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},
"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",
default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},
"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},
viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",
default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",
transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,
minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",
value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},
"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",
default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",
default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,
minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},
promoteId:{"*":{type:"string"}}},va=function(z,M,S,ia){this.message=(z?z+": ":"")+S;ia&&(this.identifier=ia);null!=M&&M.__line__&&(this.line=M.__line__)},Da=function(z){function M(S,ia){z.call(this,ia);this.message=ia;this.key=S}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M}(Error),Oa=function(z,M){void 0===M&&(M=[]);this.parent=z;this.bindings={};for(z=0;z<M.length;z+=1){var S=M[z];this.bindings[S[0]]=S[1]}};Oa.prototype.concat=function(z){return new Oa(this,
z)};Oa.prototype.get=function(z){if(this.bindings[z])return this.bindings[z];if(this.parent)return this.parent.get(z);throw Error(z+" not found in scope.");};Oa.prototype.has=function(z){return!!this.bindings[z]||!!this.parent&&this.parent.has(z)};var bb={kind:"null"},nb={kind:"number"},Kb={kind:"string"},Pb={kind:"boolean"},pc={kind:"color"},hc={kind:"object"},kc={kind:"value"},Xc={kind:"collator"},fd={kind:"formatted"},rd={kind:"resolvedImage"},zd=[bb,nb,Kb,Pb,pc,fd,hc,ea(kc),rd],Hd=f(function(z,
M){function S(Wa){return 0>(Wa=Math.round(Wa))?0:255<Wa?255:Wa}function ia(Wa){return S("%"===Wa[Wa.length-1]?parseFloat(Wa)/100*255:parseInt(Wa))}function ta(Wa){return 0>(kb="%"===Wa[Wa.length-1]?parseFloat(Wa)/100:parseFloat(Wa))?0:1<kb?1:kb;var kb}function Ba(Wa,kb,vb){return 0>vb?vb+=1:1<vb&&--vb,1>6*vb?Wa+(kb-Wa)*vb*6:1>2*vb?kb:2>3*vb?Wa+(kb-Wa)*(2/3-vb)*6:Wa}var La={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,
255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,
1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,
34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,
250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],
magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],
olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,
128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,
1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{M.parseCSSColor=function(Wa){var kb;Wa=Wa.replace(/ /g,"").toLowerCase();if(Wa in La)return La[Wa].slice();if("#"===Wa[0])return 4===Wa.length?0<=(kb=parseInt(Wa.substr(1),16))&&4095>=kb?[(3840&kb)>>4|(3840&kb)>>8,240&kb|(240&kb)>>4,15&kb|(15&kb)<<4,1]:null:7===Wa.length&&0<=(kb=parseInt(Wa.substr(1),16))&&16777215>=kb?[(16711680&kb)>>16,(65280&kb)>>8,255&kb,1]:null;var vb=Wa.indexOf("("),Ib=Wa.indexOf(")");if(-1!==vb&&Ib+1===Wa.length)switch(kb=
Wa.substr(0,vb),vb=Wa.substr(vb+1,Ib-(vb+1)).split(","),Wa=1,kb){case "rgba":if(4!==vb.length)break;Wa=ta(vb.pop());case "rgb":return 3!==vb.length?null:[ia(vb[0]),ia(vb[1]),ia(vb[2]),Wa];case "hsla":if(4!==vb.length)break;Wa=ta(vb.pop());case "hsl":if(3===vb.length)return kb=(parseFloat(vb[0])%360+360)%360/360,Ib=ta(vb[1]),vb=ta(vb[2]),Ib=.5>=vb?vb*(Ib+1):vb+Ib-vb*Ib,vb=2*vb-Ib,[S(255*Ba(vb,Ib,kb+1/3)),S(255*Ba(vb,Ib,kb)),S(255*Ba(vb,Ib,kb-1/3)),Wa]}return null}}catch(Wa){}}).parseCSSColor,Bd=function(z,
M,S,ia){void 0===ia&&(ia=1);this.r=z;this.g=M;this.b=S;this.a=ia};Bd.parse=function(z){if(z){if(z instanceof Bd)return z;if("string"==typeof z&&(z=Hd(z)))return new Bd(z[0]/255*z[3],z[1]/255*z[3],z[2]/255*z[3],z[3])}};Bd.prototype.toString=function(){var z=this.toArray();return"rgba("+Math.round(z[0])+","+Math.round(z[1])+","+Math.round(z[2])+","+z[3]+")"};Bd.prototype.toArray=function(){var z=this.a;return 0===z?[0,0,0,0]:[255*this.r/z,255*this.g/z,255*this.b/z,z]};Bd.black=new Bd(0,0,0,1);Bd.white=
new Bd(1,1,1,1);Bd.transparent=new Bd(0,0,0,0);Bd.red=new Bd(1,0,0,1);var Pd=function(z,M,S){this.sensitivity=z?M?"variant":"case":M?"accent":"base";this.locale=S;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Pd.prototype.compare=function(z,M){return this.collator.compare(z,M)};Pd.prototype.resolvedLocale=function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var fe=function(z,M,S,ia,ta){this.text=z;this.image=
M;this.scale=S;this.fontStack=ia;this.textColor=ta},Xd=function(z){this.sections=z};Xd.fromString=function(z){return new Xd([new fe(z,null,null,null,null)])};Xd.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(z){return 0!==z.text.length||z.image&&0!==z.image.name.length})};Xd.factory=function(z){return z instanceof Xd?z:Xd.fromString(z)};Xd.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(z){return z.text}).join("")};
Xd.prototype.serialize=function(){for(var z=["format"],M=0,S=this.sections;M<S.length;M+=1){var ia=S[M];if(ia.image)z.push(["image",ia.image.name]);else{z.push(ia.text);var ta={};ia.fontStack&&(ta["text-font"]=["literal",ia.fontStack.split(",")]);ia.scale&&(ta["font-scale"]=ia.scale);ia.textColor&&(ta["text-color"]=["rgba"].concat(ia.textColor.toArray()));z.push(ta)}}return z};var oe=function(z){this.name=z.name;this.available=z.available};oe.prototype.toString=function(){return this.name};oe.fromString=
function(z){return z?new oe({name:z,available:!1}):null};oe.prototype.serialize=function(){return["image",this.name]};var Fe=function(z,M){this.type=z;this.value=M};Fe.parse=function(z,M){if(2!==z.length)return M.error("'literal' expression requires exactly one argument, but found "+(z.length-1)+" instead.");if(!oa(z[1]))return M.error("invalid value");z=z[1];var S=ka(z);M=M.expectedType;return"array"!==S.kind||0!==S.N||!M||"array"!==M.kind||"number"==typeof M.N&&0!==M.N||(S=M),new Fe(S,z)};Fe.prototype.evaluate=
function(){return this.value};Fe.prototype.eachChild=function(){};Fe.prototype.outputDefined=function(){return!0};Fe.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Bd?["rgba"].concat(this.value.toArray()):this.value instanceof Xd?this.value.serialize():this.value};var ee=function(z){this.name="ExpressionEvaluationError";this.message=z};ee.prototype.toJSON=function(){return this.message};var Pe={string:Kb,number:nb,
boolean:Pb,object:hc},Se=function(z,M){this.type=z;this.args=M};Se.parse=function(z,M){if(2>z.length)return M.error("Expected at least one argument.");var S=1,ia=z[0];if("array"===ia){if(2<z.length){ia=z[1];if("string"!=typeof ia||!(ia in Pe)||"object"===ia)return M.error('The item type argument of "array" must be one of string, number, boolean',1);ia=Pe[ia];S++}else ia=kc;if(3<z.length){if(null!==z[2]&&("number"!=typeof z[2]||0>z[2]||z[2]!==Math.floor(z[2])))return M.error('The length argument to "array" must be a positive integer literal',
2);var ta=z[2];S++}ta=ea(ia,ta)}else ta=Pe[ia];for(ia=[];S<z.length;S++){var Ba=M.parse(z[S],S,kc);if(!Ba)return null;ia.push(Ba)}return new Se(ta,ia)};Se.prototype.evaluate=function(z){for(var M=0;M<this.args.length;M++){var S=this.args[M].evaluate(z);if(!ca(this.type,ka(S)))return S;if(M===this.args.length-1)throw new ee("Expected value to be of type "+da(this.type)+", but found "+da(ka(S))+" instead.");}return null};Se.prototype.eachChild=function(z){this.args.forEach(z)};Se.prototype.outputDefined=
function(){return this.args.every(function(z){return z.outputDefined()})};Se.prototype.serialize=function(){var z=this.type,M=[z.kind];if("array"===z.kind){var S=z.itemType;if("string"===S.kind||"number"===S.kind||"boolean"===S.kind)M.push(S.kind),z=z.N,("number"==typeof z||1<this.args.length)&&M.push(z)}return M.concat(this.args.map(function(ia){return ia.serialize()}))};var cf=function(z){this.type=fd;this.sections=z};cf.parse=function(z,M){if(2>z.length)return M.error("Expected at least one argument.");
var S=z[1];if(!Array.isArray(S)&&"object"==typeof S)return M.error("First argument must be an image or text section.");S=[];for(var ia=!1,ta=1;ta<=z.length-1;++ta){var Ba=z[ta];if(ia&&"object"==typeof Ba&&!Array.isArray(Ba)){ia=!1;var La=null;if(Ba["font-scale"]&&!(La=M.parse(Ba["font-scale"],1,nb)))return null;var Wa=null;if(Ba["text-font"]&&!(Wa=M.parse(Ba["text-font"],1,ea(Kb))))return null;var kb=null;if(Ba["text-color"]&&!(kb=M.parse(Ba["text-color"],1,pc)))return null;Ba=S[S.length-1];Ba.scale=
La;Ba.font=Wa;Ba.textColor=kb}else{La=M.parse(z[ta],1,kc);if(!La)return null;ia=La.type.kind;if("string"!==ia&&"value"!==ia&&"null"!==ia&&"resolvedImage"!==ia)return M.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ia=!0;S.push({content:La,scale:null,font:null,textColor:null})}}return new cf(S)};cf.prototype.evaluate=function(z){return new Xd(this.sections.map(function(M){var S=M.content.evaluate(z);return ka(S)===rd?new fe("",S,null,null,null):new fe(ra(S),null,M.scale?
M.scale.evaluate(z):null,M.font?M.font.evaluate(z).join(","):null,M.textColor?M.textColor.evaluate(z):null)}))};cf.prototype.eachChild=function(z){for(var M=0,S=this.sections;M<S.length;M+=1){var ia=S[M];z(ia.content);ia.scale&&z(ia.scale);ia.font&&z(ia.font);ia.textColor&&z(ia.textColor)}};cf.prototype.outputDefined=function(){return!1};cf.prototype.serialize=function(){for(var z=["format"],M=0,S=this.sections;M<S.length;M+=1){var ia=S[M];z.push(ia.content.serialize());var ta={};ia.scale&&(ta["font-scale"]=
ia.scale.serialize());ia.font&&(ta["text-font"]=ia.font.serialize());ia.textColor&&(ta["text-color"]=ia.textColor.serialize());z.push(ta)}return z};var We=function(z){this.type=rd;this.input=z};We.parse=function(z,M){return 2!==z.length?M.error("Expected two arguments."):(z=M.parse(z[1],1,Kb))?new We(z):M.error("No image name provided.")};We.prototype.evaluate=function(z){var M=this.input.evaluate(z),S=oe.fromString(M);return S&&z.availableImages&&(S.available=-1<z.availableImages.indexOf(M)),S};
We.prototype.eachChild=function(z){z(this.input)};We.prototype.outputDefined=function(){return!1};We.prototype.serialize=function(){return["image",this.input.serialize()]};var $f={"to-boolean":Pb,"to-color":pc,"to-number":nb,"to-string":Kb},Xe=function(z,M){this.type=z;this.args=M};Xe.parse=function(z,M){if(2>z.length)return M.error("Expected at least one argument.");var S=z[0];if(("to-boolean"===S||"to-string"===S)&&2!==z.length)return M.error("Expected one argument.");S=$f[S];for(var ia=[],ta=1;ta<
z.length;ta++){var Ba=M.parse(z[ta],ta,kc);if(!Ba)return null;ia.push(Ba)}return new Xe(S,ia)};Xe.prototype.evaluate=function(z){if("boolean"===this.type.kind)return!!this.args[0].evaluate(z);if("color"===this.type.kind){for(var M,S,ia=0,ta=this.args;ia<ta.length;ia+=1){if(S=null,(M=ta[ia].evaluate(z))instanceof Bd)return M;if("string"==typeof M){var Ba=z.parseColor(M);if(Ba)return Ba}else if(Array.isArray(M)&&!(S=3>M.length||4<M.length?"Invalid rbga value "+JSON.stringify(M)+": expected an array containing either three or four numeric values.":
qa(M[0],M[1],M[2],M[3])))return new Bd(M[0]/255,M[1]/255,M[2]/255,M[3])}throw new ee(S||"Could not parse color from value '"+("string"==typeof M?M:String(JSON.stringify(M)))+"'");}if("number"===this.type.kind){M=null;S=0;for(ia=this.args;S<ia.length;S+=1){if(null===(M=ia[S].evaluate(z)))return 0;ta=Number(M);if(!isNaN(ta))return ta}throw new ee("Could not convert "+JSON.stringify(M)+" to number.");}return"formatted"===this.type.kind?Xd.fromString(ra(this.args[0].evaluate(z))):"resolvedImage"===this.type.kind?
oe.fromString(ra(this.args[0].evaluate(z))):ra(this.args[0].evaluate(z))};Xe.prototype.eachChild=function(z){this.args.forEach(z)};Xe.prototype.outputDefined=function(){return this.args.every(function(z){return z.outputDefined()})};Xe.prototype.serialize=function(){if("formatted"===this.type.kind)return(new cf([{content:this.args[0],scale:null,font:null,textColor:null}])).serialize();if("resolvedImage"===this.type.kind)return(new We(this.args[0])).serialize();var z=["to-"+this.type.kind];return this.eachChild(function(M){z.push(M.serialize())}),
z};var sg=["Unknown","Point","LineString","Polygon"],$d=function(){this.formattedSection=this.featureState=this.feature=this.globals=null;this._parseColorCache={};this.canonical=this.availableImages=null};$d.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};$d.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?sg[this.feature.type]:this.feature.type:null};$d.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?
this.feature.geometry:null};$d.prototype.canonicalID=function(){return this.canonical};$d.prototype.properties=function(){return this.feature&&this.feature.properties||{}};$d.prototype.parseColor=function(z){var M=this._parseColorCache[z];return M||(M=this._parseColorCache[z]=Bd.parse(z)),M};var Qe=function(z,M,S,ia){this.name=z;this.type=M;this._evaluate=S;this.args=ia};Qe.prototype.evaluate=function(z){return this._evaluate(z,this.args)};Qe.prototype.eachChild=function(z){this.args.forEach(z)};
Qe.prototype.outputDefined=function(){return!1};Qe.prototype.serialize=function(){return[this.name].concat(this.args.map(function(z){return z.serialize()}))};Qe.parse=function(z,M){var S,ia=z[0],ta=Qe.definitions[ia];if(!ta)return M.error('Unknown expression "'+ia+'". If you wanted a literal array, use ["literal", [...]].',0);var Ba=Array.isArray(ta)?ta[0]:ta.type;ta=Array.isArray(ta)?[[ta[1],ta[2]]]:ta.overloads;for(var La=ta.filter(function(Qc){Qc=Qc[0];return!Array.isArray(Qc)||Qc.length===z.length-
1}),Wa=null,kb=0;kb<La.length;kb+=1){Wa=La[kb];var vb=Wa[0],Ib=Wa[1];Wa=new ff(M.registry,M.path,null,M.scope);for(var Sb=[],ic=!1,ec=1;ec<z.length;ec++){var uc=z[ec],tc=Array.isArray(vb)?vb[ec-1]:vb.type;uc=Wa.parse(uc,1+Sb.length,tc);if(!uc){ic=!0;break}Sb.push(uc)}if(!ic)if(Array.isArray(vb)&&vb.length!==Sb.length)Wa.error("Expected "+vb.length+" arguments, but found "+Sb.length+" instead.");else{for(ic=0;ic<Sb.length;ic++)ec=Array.isArray(vb)?vb[ic]:vb.type,uc=Sb[ic],Wa.concat(ic+1).checkSubtype(ec,
uc.type);if(0===Wa.errors.length)return new Qe(ia,Ba,Ib,Sb)}}if(1===La.length)(S=M.errors).push.apply(S,Wa.errors);else{S=(La.length?La:ta).map(function(Qc){var wd;return wd=Qc[0],Array.isArray(wd)?"("+wd.map(da).join(", ")+")":"("+da(wd.type)+"...)"}).join(" | ");ia=[];for(Ba=1;Ba<z.length;Ba++){ta=M.parse(z[Ba],1+ia.length);if(!ta)return null;ia.push(da(ta.type))}M.error("Expected arguments of type "+S+", but found ("+ia.join(", ")+") instead.")}return null};Qe.register=function(z,M){for(var S in Qe.definitions=
M,M)z[S]=Qe};var of=function(z,M,S){this.type=Xc;this.locale=S;this.caseSensitive=z;this.diacriticSensitive=M};of.parse=function(z,M){if(2!==z.length)return M.error("Expected one argument.");z=z[1];if("object"!=typeof z||Array.isArray(z))return M.error("Collator options argument must be an object.");var S=M.parse(void 0!==z["case-sensitive"]&&z["case-sensitive"],1,Pb);if(!S)return null;var ia=M.parse(void 0!==z["diacritic-sensitive"]&&z["diacritic-sensitive"],1,Pb);if(!ia)return null;var ta=null;
return z.locale&&!(ta=M.parse(z.locale,1,Kb))?null:new of(S,ia,ta)};of.prototype.evaluate=function(z){return new Pd(this.caseSensitive.evaluate(z),this.diacriticSensitive.evaluate(z),this.locale?this.locale.evaluate(z):null)};of.prototype.eachChild=function(z){z(this.caseSensitive);z(this.diacriticSensitive);this.locale&&z(this.locale)};of.prototype.outputDefined=function(){return!1};of.prototype.serialize=function(){var z={};return z["case-sensitive"]=this.caseSensitive.serialize(),z["diacritic-sensitive"]=
this.diacriticSensitive.serialize(),this.locale&&(z.locale=this.locale.serialize()),["collator",z]};var Wf=function(z,M){this.type=Pb;this.geojson=z;this.geometries=M};Wf.parse=function(z,M){if(2!==z.length)return M.error("'within' expression requires exactly one argument, but found "+(z.length-1)+" instead.");if(oa(z[1]))if(z=z[1],"FeatureCollection"===z.type)for(var S=0;S<z.features.length;++S){var ia=z.features[S].geometry.type;if("Polygon"===ia||"MultiPolygon"===ia)return new Wf(z,z.features[S].geometry)}else if("Feature"===
z.type){if(S=z.geometry.type,"Polygon"===S||"MultiPolygon"===S)return new Wf(z,z.geometry)}else if("Polygon"===z.type||"MultiPolygon"===z.type)return new Wf(z,z);return M.error("'within' expression requires valid geojson object that contains polygon geometry type.")};Wf.prototype.evaluate=function(z){if(null!=z.geometry()&&null!=z.canonicalID()){if("Point"===z.geometryType())return function(M,S){var ia=[1/0,1/0,-1/0,-1/0],ta=[1/0,1/0,-1/0,-1/0],Ba=M.canonicalID();if("Polygon"===S.type){var La=Fa(S.coordinates,
ta,Ba),Wa=hb(M.geometry(),ia,ta,Ba);if(!ma(ia,ta))return!1;for(var kb=0;kb<Wa.length;kb+=1)if(!wa(Wa[kb],La))return!1}if("MultiPolygon"===S.type){S=Ha(S.coordinates,ta,Ba);M=hb(M.geometry(),ia,ta,Ba);if(!ma(ia,ta))return!1;for(ia=0;ia<M.length;ia+=1){a:{ta=M[ia];Ba=S;for(La=0;La<Ba.length;La++)if(wa(ta,Ba[La])){ta=!0;break a}ta=!1}if(!ta)return!1}}return!0}(z,this.geometries);if("LineString"===z.geometryType())return function(M,S){var ia=[1/0,1/0,-1/0,-1/0],ta=[1/0,1/0,-1/0,-1/0],Ba=M.canonicalID();
if("Polygon"===S.type){var La=Fa(S.coordinates,ta,Ba),Wa=ob(M.geometry(),ia,ta,Ba);if(!ma(ia,ta))return!1;for(var kb=0;kb<Wa.length;kb+=1)if(!ya(Wa[kb],La))return!1}if("MultiPolygon"===S.type){S=Ha(S.coordinates,ta,Ba);M=ob(M.geometry(),ia,ta,Ba);if(!ma(ia,ta))return!1;for(ia=0;ia<M.length;ia+=1){a:{ta=M[ia];Ba=S;for(La=0;La<Ba.length;La++)if(ya(ta,Ba[La])){ta=!0;break a}ta=!1}if(!ta)return!1}}return!0}(z,this.geometries)}return!1};Wf.prototype.eachChild=function(){};Wf.prototype.outputDefined=function(){return!0};
Wf.prototype.serialize=function(){return["within",this.geojson]};var Sf=function(z,M){this.type=M.type;this.name=z;this.boundExpression=M};Sf.parse=function(z,M){if(2!==z.length||"string"!=typeof z[1])return M.error("'var' expression requires exactly one string literal argument.");z=z[1];return M.scope.has(z)?new Sf(z,M.scope.get(z)):M.error('Unknown variable "'+z+'". Make sure "'+z+'" has been bound in an enclosing "let" expression before using it.',1)};Sf.prototype.evaluate=function(z){return this.boundExpression.evaluate(z)};
Sf.prototype.eachChild=function(){};Sf.prototype.outputDefined=function(){return!1};Sf.prototype.serialize=function(){return["var",this.name]};var ff=function(z,M,S,ia,ta){void 0===M&&(M=[]);void 0===ia&&(ia=new Oa);void 0===ta&&(ta=[]);this.registry=z;this.path=M;this.key=M.map(function(Ba){return"["+Ba+"]"}).join("");this.scope=ia;this.errors=ta;this.expectedType=S};ff.prototype.parse=function(z,M,S,ia,ta){return void 0===ta&&(ta={}),M?this.concat(M,S,ia)._parse(z,ta):this._parse(z,ta)};ff.prototype._parse=
function(z,M){function S(Ba,La,Wa){return"assert"===Wa?new Se(La,[Ba]):"coerce"===Wa?new Xe(La,[Ba]):Ba}if(null!==z&&"string"!=typeof z&&"boolean"!=typeof z&&"number"!=typeof z||(z=["literal",z]),Array.isArray(z)){if(0===z.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ia=z[0];if("string"!=typeof ia)return this.error("Expression name must be a string, but found "+typeof ia+' instead. If you wanted a literal array, use ["literal", [...]].',
0),null;var ta=this.registry[ia];if(ta){z=ta.parse(z,this);if(!z)return null;if(this.expectedType)if(ia=this.expectedType,ta=z.type,"string"!==ia.kind&&"number"!==ia.kind&&"boolean"!==ia.kind&&"object"!==ia.kind&&"array"!==ia.kind||"value"!==ta.kind)if("color"!==ia.kind&&"formatted"!==ia.kind&&"resolvedImage"!==ia.kind||"value"!==ta.kind&&"string"!==ta.kind){if(this.checkSubtype(ia,ta))return null}else z=S(z,ia,M.typeAnnotation||"coerce");else z=S(z,ia,M.typeAnnotation||"assert");if(!(z instanceof
Fe)&&"resolvedImage"!==z.type.kind&&function Wa(La){if(La instanceof Sf)return Wa(La.boundExpression);if(La instanceof Qe&&"error"===La.name||La instanceof of||La instanceof Wf)return!1;var kb=La instanceof Xe||La instanceof Se,vb=!0;return La.eachChild(function(Ib){vb=kb?vb&&Wa(Ib):vb&&Ib instanceof Fe}),!!vb&&ib(La)&&sb(La,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(z)){M=new $d;try{z=new Fe(z.type,z.evaluate(M))}catch(La){return this.error(La.message),null}}return z}return this.error('Unknown expression "'+
ia+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===z?"'undefined' value invalid. Use null instead.":"object"==typeof z?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof z+" instead.")};ff.prototype.concat=function(z,M,S){z="number"==typeof z?this.path.concat(z):this.path;S=S?this.scope.concat(S):this.scope;return new ff(this.registry,z,M||null,S,this.errors)};ff.prototype.error=function(z){for(var M=[],S=arguments.length-
1;0<S--;)M[S]=arguments[S+1];M=""+this.key+M.map(function(ia){return"["+ia+"]"}).join("");this.errors.push(new Da(M,z))};ff.prototype.checkSubtype=function(z,M){z=ca(z,M);return z&&this.error(z),z};var xf=function(z,M,S){this.type=z;this.input=M;this.labels=[];this.outputs=[];for(z=0;z<S.length;z+=1){M=S[z];var ia=M[1];this.labels.push(M[0]);this.outputs.push(ia)}};xf.parse=function(z,M){if(4>z.length-1)return M.error("Expected at least 4 arguments, but found only "+(z.length-1)+".");if(0!=(z.length-
1)%2)return M.error("Expected an even number of arguments.");var S=M.parse(z[1],1,nb);if(!S)return null;var ia=[],ta=null;M.expectedType&&"value"!==M.expectedType.kind&&(ta=M.expectedType);for(var Ba=1;Ba<z.length;Ba+=2){var La=1===Ba?-1/0:z[Ba],Wa=z[Ba+1],kb=Ba,vb=Ba+1;if("number"!=typeof La)return M.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',kb);if(ia.length&&ia[ia.length-1][0]>=La)return M.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',
kb);Wa=M.parse(Wa,vb,ta);if(!Wa)return null;ta=ta||Wa.type;ia.push([La,Wa])}return new xf(ta,S,ia)};xf.prototype.evaluate=function(z){var M=this.labels,S=this.outputs;if(1===M.length)return S[0].evaluate(z);var ia=this.input.evaluate(z);if(ia<=M[0])return S[0].evaluate(z);var ta=M.length;return ia>=M[ta-1]?S[ta-1].evaluate(z):S[tb(M,ia)].evaluate(z)};xf.prototype.eachChild=function(z){z(this.input);for(var M=0,S=this.outputs;M<S.length;M+=1)z(S[M])};xf.prototype.outputDefined=function(){return this.outputs.every(function(z){return z.outputDefined()})};
xf.prototype.serialize=function(){for(var z=["step",this.input.serialize()],M=0;M<this.labels.length;M++)0<M&&z.push(this.labels[M]),z.push(this.outputs[M].serialize());return z};var $h=Object.freeze({__proto__:null,number:Aa,color:function(z,M,S){return new Bd(Aa(z.r,M.r,S),Aa(z.g,M.g,S),Aa(z.b,M.b,S),Aa(z.a,M.a,S))},array:function(z,M,S){return z.map(function(ia,ta){return Aa(ia,M[ta],S)})}}),Wg=6/29*3*(6/29),Rb=Math.PI/180,Mj=180/Math.PI,fg={forward:db,reverse:Ia,interpolate:function(z,M,S){return{l:Aa(z.l,
M.l,S),a:Aa(z.a,M.a,S),b:Aa(z.b,M.b,S),alpha:Aa(z.alpha,M.alpha,S)}}},Cf={forward:function(z){var M=db(z),S=M.a,ia=M.b,ta=Math.atan2(ia,S)*Mj;return{h:0>ta?ta+360:ta,c:Math.sqrt(S*S+ia*ia),l:M.l,alpha:z.a}},reverse:function(z){var M=z.h*Rb,S=z.c;return Ia({l:z.l,a:Math.cos(M)*S,b:Math.sin(M)*S,alpha:z.alpha})},interpolate:function(z,M,S){var ia=z.h,ta=M.h-ia;return{h:ia+S*(180<ta||-180>ta?ta-360*Math.round(ta/360):ta),c:Aa(z.c,M.c,S),l:Aa(z.l,M.l,S),alpha:Aa(z.alpha,M.alpha,S)}}},ai=Object.freeze({__proto__:null,
lab:fg,hcl:Cf}),Gf=function(z,M,S,ia,ta){this.type=z;this.operator=M;this.interpolation=S;this.input=ia;this.labels=[];this.outputs=[];for(z=0;z<ta.length;z+=1)M=ta[z],S=M[1],this.labels.push(M[0]),this.outputs.push(S)};Gf.interpolationFactor=function(z,M,S,ia){var ta=0;"exponential"===z.name?ta=Ua(M,z.base,S,ia):"linear"===z.name?ta=Ua(M,1,S,ia):"cubic-bezier"===z.name&&(z=z.controlPoints,ta=(new uj(z[0],z[1],z[2],z[3])).solve(Ua(M,1,S,ia)));return ta};Gf.parse=function(z,M){var S=z[0],ia=z[1],ta=
z[2],Ba=z.slice(3);if(!Array.isArray(ia)||0===ia.length)return M.error("Expected an interpolation type expression.",1);if("linear"===ia[0])ia={name:"linear"};else if("exponential"===ia[0]){ia=ia[1];if("number"!=typeof ia)return M.error("Exponential interpolation requires a numeric base.",1,1);ia={name:"exponential",base:ia}}else{if("cubic-bezier"!==ia[0])return M.error("Unknown interpolation type "+String(ia[0]),1,0);ia=ia.slice(1);if(4!==ia.length||ia.some(function(ic){return"number"!=typeof ic||
0>ic||1<ic}))return M.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ia={name:"cubic-bezier",controlPoints:ia}}if(4>z.length-1)return M.error("Expected at least 4 arguments, but found only "+(z.length-1)+".");if(0!=(z.length-1)%2)return M.error("Expected an even number of arguments.");if(!(ta=M.parse(ta,2,nb)))return null;z=[];var La=null;"interpolate-hcl"===S||"interpolate-lab"===S?La=pc:M.expectedType&&"value"!==M.expectedType.kind&&(La=M.expectedType);
for(var Wa=0;Wa<Ba.length;Wa+=2){var kb=Ba[Wa],vb=Ba[Wa+1],Ib=Wa+3,Sb=Wa+4;if("number"!=typeof kb)return M.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ib);if(z.length&&z[z.length-1][0]>=kb)return M.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ib);vb=M.parse(vb,Sb,La);if(!vb)return null;La=La||vb.type;z.push([kb,vb])}return"number"===
La.kind||"color"===La.kind||"array"===La.kind&&"number"===La.itemType.kind&&"number"==typeof La.N?new Gf(La,S,ia,ta,z):M.error("Type "+da(La)+" is not interpolatable.")};Gf.prototype.evaluate=function(z){var M=this.labels,S=this.outputs;if(1===M.length)return S[0].evaluate(z);var ia=this.input.evaluate(z);if(ia<=M[0])return S[0].evaluate(z);var ta=M.length;if(ia>=M[ta-1])return S[ta-1].evaluate(z);ta=tb(M,ia);M=Gf.interpolationFactor(this.interpolation,ia,M[ta],M[ta+1]);ia=S[ta].evaluate(z);z=S[ta+
1].evaluate(z);return"interpolate"===this.operator?$h[this.type.kind.toLowerCase()](ia,z,M):"interpolate-hcl"===this.operator?Cf.reverse(Cf.interpolate(Cf.forward(ia),Cf.forward(z),M)):fg.reverse(fg.interpolate(fg.forward(ia),fg.forward(z),M))};Gf.prototype.eachChild=function(z){z(this.input);for(var M=0,S=this.outputs;M<S.length;M+=1)z(S[M])};Gf.prototype.outputDefined=function(){return this.outputs.every(function(z){return z.outputDefined()})};Gf.prototype.serialize=function(){var z="linear"===
this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);z=[this.operator,z,this.input.serialize()];for(var M=0;M<this.labels.length;M++)z.push(this.labels[M],this.outputs[M].serialize());return z};var Eh=function(z,M){this.type=z;this.args=M};Eh.parse=function(z,M){if(2>z.length)return M.error("Expectected at least one argument.");var S=null,ia=
M.expectedType;ia&&"value"!==ia.kind&&(S=ia);var ta=[],Ba=0;for(z=z.slice(1);Ba<z.length;Ba+=1){var La=M.parse(z[Ba],1+ta.length,S,void 0,{typeAnnotation:"omit"});if(!La)return null;S=S||La.type;ta.push(La)}M=ia&&ta.some(function(Wa){return ca(ia,Wa.type)});return new Eh(M?kc:S,ta)};Eh.prototype.evaluate=function(z){for(var M,S=null,ia=0,ta=0,Ba=this.args;ta<Ba.length&&(ia++,(S=Ba[ta].evaluate(z))&&S instanceof oe&&!S.available&&(M||(M=S.name),S=null,ia===this.args.length&&(S=M)),null===S);ta+=1);
return S};Eh.prototype.eachChild=function(z){this.args.forEach(z)};Eh.prototype.outputDefined=function(){return this.args.every(function(z){return z.outputDefined()})};Eh.prototype.serialize=function(){var z=["coalesce"];return this.eachChild(function(M){z.push(M.serialize())}),z};var ph=function(z,M){this.type=M.type;this.bindings=[].concat(z);this.result=M};ph.prototype.evaluate=function(z){return this.result.evaluate(z)};ph.prototype.eachChild=function(z){for(var M=0,S=this.bindings;M<S.length;M+=
1)z(S[M][1]);z(this.result)};ph.parse=function(z,M){if(4>z.length)return M.error("Expected at least 3 arguments, but found "+(z.length-1)+" instead.");for(var S=[],ia=1;ia<z.length-1;ia+=2){var ta=z[ia];if("string"!=typeof ta)return M.error("Expected string, but found "+typeof ta+" instead.",ia);if(/[^a-zA-Z0-9_]/.test(ta))return M.error("Variable names must contain only alphanumeric characters or '_'.",ia);var Ba=M.parse(z[ia+1],ia+1);if(!Ba)return null;S.push([ta,Ba])}return(z=M.parse(z[z.length-
1],z.length-1,M.expectedType,S))?new ph(S,z):null};ph.prototype.outputDefined=function(){return this.result.outputDefined()};ph.prototype.serialize=function(){for(var z=["let"],M=0,S=this.bindings;M<S.length;M+=1){var ia=S[M];z.push(ia[0],ia[1].serialize())}return z.push(this.result.serialize()),z};var Fh=function(z,M,S){this.type=z;this.index=M;this.input=S};Fh.parse=function(z,M){if(3!==z.length)return M.error("Expected 2 arguments, but found "+(z.length-1)+" instead.");var S=M.parse(z[1],1,nb);
z=M.parse(z[2],2,ea(M.expectedType||kc));return S&&z?new Fh(z.type.itemType,S,z):null};Fh.prototype.evaluate=function(z){var M=this.index.evaluate(z);z=this.input.evaluate(z);if(0>M)throw new ee("Array index out of bounds: "+M+" \x3c 0.");if(M>=z.length)throw new ee("Array index out of bounds: "+M+" \x3e "+(z.length-1)+".");if(M!==Math.floor(M))throw new ee("Array index must be an integer, but found "+M+" instead.");return z[M]};Fh.prototype.eachChild=function(z){z(this.index);z(this.input)};Fh.prototype.outputDefined=
function(){return!1};Fh.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var pe=function(z,M){this.type=Pb;this.needle=z;this.haystack=M};pe.parse=function(z,M){if(3!==z.length)return M.error("Expected 2 arguments, but found "+(z.length-1)+" instead.");var S=M.parse(z[1],1,kc);z=M.parse(z[2],2,kc);return S&&z?la(S.type,[Pb,Kb,nb,bb,kc])?new pe(S,z):M.error("Expected first argument to be of type boolean, string, number or null, but found "+da(S.type)+" instead"):
null};pe.prototype.evaluate=function(z){var M=this.needle.evaluate(z);z=this.haystack.evaluate(z);if(!z)return!1;if(!pa(M,["boolean","string","number","null"]))throw new ee("Expected first argument to be of type boolean, string, number or null, but found "+da(ka(M))+" instead.");if(!pa(z,["string","array"]))throw new ee("Expected second argument to be of type array or string, but found "+da(ka(z))+" instead.");return 0<=z.indexOf(M)};pe.prototype.eachChild=function(z){z(this.needle);z(this.haystack)};
pe.prototype.outputDefined=function(){return!0};pe.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var kd=function(z,M,S){this.type=nb;this.needle=z;this.haystack=M;this.fromIndex=S};kd.parse=function(z,M){if(2>=z.length||5<=z.length)return M.error("Expected 3 or 4 arguments, but found "+(z.length-1)+" instead.");var S=M.parse(z[1],1,kc),ia=M.parse(z[2],2,kc);return S&&ia?la(S.type,[Pb,Kb,nb,bb,kc])?4===z.length?(z=M.parse(z[3],3,nb))?new kd(S,ia,z):
null:new kd(S,ia):M.error("Expected first argument to be of type boolean, string, number or null, but found "+da(S.type)+" instead"):null};kd.prototype.evaluate=function(z){var M=this.needle.evaluate(z),S=this.haystack.evaluate(z);if(!pa(M,["boolean","string","number","null"]))throw new ee("Expected first argument to be of type boolean, string, number or null, but found "+da(ka(M))+" instead.");if(!pa(S,["string","array"]))throw new ee("Expected second argument to be of type array or string, but found "+
da(ka(S))+" instead.");return this.fromIndex?(z=this.fromIndex.evaluate(z),S.indexOf(M,z)):S.indexOf(M)};kd.prototype.eachChild=function(z){z(this.needle);z(this.haystack);this.fromIndex&&z(this.fromIndex)};kd.prototype.outputDefined=function(){return!1};kd.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var z=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),z]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};
var Td=function(z,M,S,ia,ta,Ba){this.inputType=z;this.type=M;this.input=S;this.cases=ia;this.outputs=ta;this.otherwise=Ba};Td.parse=function(z,M){if(5>z.length)return M.error("Expected at least 4 arguments, but found only "+(z.length-1)+".");if(1!=z.length%2)return M.error("Expected an even number of arguments.");var S;M.expectedType&&"value"!==M.expectedType.kind&&(S=M.expectedType);for(var ia={},ta=[],Ba=2;Ba<z.length-1;Ba+=2){var La=z[Ba],Wa=z[Ba+1];Array.isArray(La)||(La=[La]);var kb=M.concat(Ba);
if(0===La.length)return kb.error("Expected at least one branch label.");for(var vb=0;vb<La.length;vb+=1){var Ib=La[vb];if("number"!=typeof Ib&&"string"!=typeof Ib)return kb.error("Branch labels must be numbers or strings.");if("number"==typeof Ib&&Math.abs(Ib)>Number.MAX_SAFE_INTEGER)return kb.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof Ib&&Math.floor(Ib)!==Ib)return kb.error("Numeric branch labels must be integer values.");if(Sb){if(kb.checkSubtype(Sb,
ka(Ib)))return null}else var Sb=ka(Ib);if(void 0!==ia[String(Ib)])return kb.error("Branch labels must be unique.");ia[String(Ib)]=ta.length}Wa=M.parse(Wa,Ba,S);if(!Wa)return null;S=S||Wa.type;ta.push(Wa)}Ba=M.parse(z[1],1,kc);return Ba?(z=M.parse(z[z.length-1],z.length-1,S))?"value"!==Ba.type.kind&&M.concat(1).checkSubtype(Sb,Ba.type)?null:new Td(Sb,S,Ba,ia,ta,z):null:null};Td.prototype.evaluate=function(z){var M=this.input.evaluate(z);return(ka(M)===this.inputType&&this.outputs[this.cases[M]]||this.otherwise).evaluate(z)};
Td.prototype.eachChild=function(z){z(this.input);this.outputs.forEach(z);z(this.otherwise)};Td.prototype.outputDefined=function(){return this.outputs.every(function(z){return z.outputDefined()})&&this.otherwise.outputDefined()};Td.prototype.serialize=function(){for(var z=this,M=["match",this.input.serialize()],S=[],ia={},ta=0,Ba=Object.keys(this.cases).sort();ta<Ba.length;ta+=1){var La=Ba[ta];void 0===(Wa=ia[this.cases[La]])?(ia[this.cases[La]]=S.length,S.push([this.cases[La],[La]])):S[Wa][1].push(La)}ia=
function(kb){return"number"===z.inputType.kind?Number(kb):kb};for(ta=0;ta<S.length;ta+=1){Ba=S[ta];var Wa=Ba[0];Wa=Ba[1];M.push(1===Wa.length?ia(Wa[0]):Wa.map(ia));M.push(this.outputs[outputIndex$1].serialize())}return M.push(this.otherwise.serialize()),M};var He=function(z,M,S){this.type=z;this.branches=M;this.otherwise=S};He.parse=function(z,M){if(4>z.length)return M.error("Expected at least 3 arguments, but found only "+(z.length-1)+".");if(0!=z.length%2)return M.error("Expected an odd number of arguments.");
var S;M.expectedType&&"value"!==M.expectedType.kind&&(S=M.expectedType);for(var ia=[],ta=1;ta<z.length-1;ta+=2){var Ba=M.parse(z[ta],ta,Pb);if(!Ba)return null;var La=M.parse(z[ta+1],ta+1,S);if(!La)return null;ia.push([Ba,La]);S=S||La.type}return(z=M.parse(z[z.length-1],z.length-1,S))?new He(S,ia,z):null};He.prototype.evaluate=function(z){for(var M=0,S=this.branches;M<S.length;M+=1){var ia=S[M],ta=ia[1];if(ia[0].evaluate(z))return ta.evaluate(z)}return this.otherwise.evaluate(z)};He.prototype.eachChild=
function(z){for(var M=0,S=this.branches;M<S.length;M+=1){var ia=S[M],ta=ia[1];z(ia[0]);z(ta)}z(this.otherwise)};He.prototype.outputDefined=function(){return this.branches.every(function(z){return z[1].outputDefined()})&&this.otherwise.outputDefined()};He.prototype.serialize=function(){var z=["case"];return this.eachChild(function(M){z.push(M.serialize())}),z};var Le=function(z,M,S,ia){this.type=z;this.input=M;this.beginIndex=S;this.endIndex=ia};Le.parse=function(z,M){if(2>=z.length||5<=z.length)return M.error("Expected 3 or 4 arguments, but found "+
(z.length-1)+" instead.");var S=M.parse(z[1],1,kc),ia=M.parse(z[2],2,nb);return S&&ia?la(S.type,[ea(kc),Kb,kc])?4===z.length?(z=M.parse(z[3],3,nb))?new Le(S.type,S,ia,z):null:new Le(S.type,S,ia):M.error("Expected first argument to be of type array or string, but found "+da(S.type)+" instead"):null};Le.prototype.evaluate=function(z){var M=this.input.evaluate(z),S=this.beginIndex.evaluate(z);if(!pa(M,["string","array"]))throw new ee("Expected first argument to be of type array or string, but found "+
da(ka(M))+" instead.");return this.endIndex?(z=this.endIndex.evaluate(z),M.slice(S,z)):M.slice(S)};Le.prototype.eachChild=function(z){z(this.input);z(this.beginIndex);this.endIndex&&z(this.endIndex)};Le.prototype.outputDefined=function(){return!1};Le.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var z=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),z]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var sf=
Ga("\x3d\x3d",function(z,M,S){return M===S},xa),Tf=Ga("!\x3d",function(z,M,S){return M!==S},function(z,M,S,ia){return!xa(0,M,S,ia)}),Og=Ga("\x3c",function(z,M,S){return M<S},function(z,M,S,ia){return 0>ia.compare(M,S)}),Re=Ga("\x3e",function(z,M,S){return M>S},function(z,M,S,ia){return 0<ia.compare(M,S)}),ci=Ga("\x3c\x3d",function(z,M,S){return M<=S},function(z,M,S,ia){return 0>=ia.compare(M,S)}),tg=Ga("\x3e\x3d",function(z,M,S){return M>=S},function(z,M,S,ia){return 0<=ia.compare(M,S)}),Hh=function(z,
M,S,ia,ta){this.type=Kb;this.number=z;this.locale=M;this.currency=S;this.minFractionDigits=ia;this.maxFractionDigits=ta};Hh.parse=function(z,M){if(3!==z.length)return M.error("Expected two arguments.");var S=M.parse(z[1],1,nb);if(!S)return null;z=z[2];if("object"!=typeof z||Array.isArray(z))return M.error("NumberFormat options argument must be an object.");var ia=null;if(z.locale&&!(ia=M.parse(z.locale,1,Kb)))return null;var ta=null;if(z.currency&&!(ta=M.parse(z.currency,1,Kb)))return null;var Ba=
null;if(z["min-fraction-digits"]&&!(Ba=M.parse(z["min-fraction-digits"],1,nb)))return null;var La=null;return z["max-fraction-digits"]&&!(La=M.parse(z["max-fraction-digits"],1,nb))?null:new Hh(S,ia,ta,Ba,La)};Hh.prototype.evaluate=function(z){return(new Intl.NumberFormat(this.locale?this.locale.evaluate(z):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(z):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(z):void 0,maximumFractionDigits:this.maxFractionDigits?
this.maxFractionDigits.evaluate(z):void 0})).format(this.number.evaluate(z))};Hh.prototype.eachChild=function(z){z(this.number);this.locale&&z(this.locale);this.currency&&z(this.currency);this.minFractionDigits&&z(this.minFractionDigits);this.maxFractionDigits&&z(this.maxFractionDigits)};Hh.prototype.outputDefined=function(){return!1};Hh.prototype.serialize=function(){var z={};return this.locale&&(z.locale=this.locale.serialize()),this.currency&&(z.currency=this.currency.serialize()),this.minFractionDigits&&
(z["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(z["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),z]};var Jf=function(z){this.type=nb;this.input=z};Jf.parse=function(z,M){return 2!==z.length?M.error("Expected 1 argument, but found "+(z.length-1)+" instead."):(z=M.parse(z[1],1))?"array"!==z.type.kind&&"string"!==z.type.kind&&"value"!==z.type.kind?M.error("Expected argument of type string or array, but found "+
da(z.type)+" instead."):new Jf(z):null};Jf.prototype.evaluate=function(z){z=this.input.evaluate(z);if("string"==typeof z||Array.isArray(z))return z.length;throw new ee("Expected value to be of type string or array, but found "+da(ka(z))+" instead.");};Jf.prototype.eachChild=function(z){z(this.input)};Jf.prototype.outputDefined=function(){return!1};Jf.prototype.serialize=function(){var z=["length"];return this.eachChild(function(M){z.push(M.serialize())}),z};var ug={"\x3d\x3d":sf,"!\x3d":Tf,"\x3e":Re,
"\x3c":Og,"\x3e\x3d":tg,"\x3c\x3d":ci,array:Se,at:Fh,boolean:Se,case:He,coalesce:Eh,collator:of,format:cf,image:We,in:pe,"index-of":kd,interpolate:Gf,"interpolate-hcl":Gf,"interpolate-lab":Gf,length:Jf,let:ph,literal:Fe,match:Td,number:Se,"number-format":Hh,object:Se,slice:Le,step:xf,string:Se,"to-boolean":Xe,"to-color":Xe,"to-number":Xe,"to-string":Xe,var:Sf,within:Wf};Qe.register(ug,{error:[{kind:"error"},[Kb],function(z,M){throw new ee(M[0].evaluate(z));}],typeof:[Kb,[kc],function(z,M){return da(ka(M[0].evaluate(z)))}],
"to-rgba":[ea(nb,4),[pc],function(z,M){return M[0].evaluate(z).toArray()}],rgb:[pc,[nb,nb,nb],Va],rgba:[pc,[nb,nb,nb,nb],Va],has:{type:Pb,overloads:[[[Kb],function(z,M){M=M[0].evaluate(z);z=z.properties();return M in z}],[[Kb,hc],function(z,M){var S=M[1];M=M[0].evaluate(z);z=S.evaluate(z);return M in z}]]},get:{type:kc,overloads:[[[Kb],function(z,M){return gb(M[0].evaluate(z),z.properties())}],[[Kb,hc],function(z,M){var S=M[1];return gb(M[0].evaluate(z),S.evaluate(z))}]]},"feature-state":[kc,[Kb],
function(z,M){return gb(M[0].evaluate(z),z.featureState||{})}],properties:[hc,[],function(z){return z.properties()}],"geometry-type":[Kb,[],function(z){return z.geometryType()}],id:[kc,[],function(z){return z.id()}],zoom:[nb,[],function(z){return z.globals.zoom}],"heatmap-density":[nb,[],function(z){return z.globals.heatmapDensity||0}],"line-progress":[nb,[],function(z){return z.globals.lineProgress||0}],accumulated:[kc,[],function(z){return void 0===z.globals.accumulated?null:z.globals.accumulated}],
"+":[nb,{type:nb},function(z,M){for(var S=0,ia=0;ia<M.length;ia+=1)S+=M[ia].evaluate(z);return S}],"*":[nb,{type:nb},function(z,M){for(var S=1,ia=0;ia<M.length;ia+=1)S*=M[ia].evaluate(z);return S}],"-":{type:nb,overloads:[[[nb,nb],function(z,M){var S=M[1];return M[0].evaluate(z)-S.evaluate(z)}],[[nb],function(z,M){return-M[0].evaluate(z)}]]},"/":[nb,[nb,nb],function(z,M){var S=M[1];return M[0].evaluate(z)/S.evaluate(z)}],"%":[nb,[nb,nb],function(z,M){var S=M[1];return M[0].evaluate(z)%S.evaluate(z)}],
ln2:[nb,[],function(){return Math.LN2}],pi:[nb,[],function(){return Math.PI}],e:[nb,[],function(){return Math.E}],"^":[nb,[nb,nb],function(z,M){var S=M[1];return Math.pow(M[0].evaluate(z),S.evaluate(z))}],sqrt:[nb,[nb],function(z,M){return Math.sqrt(M[0].evaluate(z))}],log10:[nb,[nb],function(z,M){return Math.log(M[0].evaluate(z))/Math.LN10}],ln:[nb,[nb],function(z,M){return Math.log(M[0].evaluate(z))}],log2:[nb,[nb],function(z,M){return Math.log(M[0].evaluate(z))/Math.LN2}],sin:[nb,[nb],function(z,
M){return Math.sin(M[0].evaluate(z))}],cos:[nb,[nb],function(z,M){return Math.cos(M[0].evaluate(z))}],tan:[nb,[nb],function(z,M){return Math.tan(M[0].evaluate(z))}],asin:[nb,[nb],function(z,M){return Math.asin(M[0].evaluate(z))}],acos:[nb,[nb],function(z,M){return Math.acos(M[0].evaluate(z))}],atan:[nb,[nb],function(z,M){return Math.atan(M[0].evaluate(z))}],min:[nb,{type:nb},function(z,M){return Math.min.apply(Math,M.map(function(S){return S.evaluate(z)}))}],max:[nb,{type:nb},function(z,M){return Math.max.apply(Math,
M.map(function(S){return S.evaluate(z)}))}],abs:[nb,[nb],function(z,M){return Math.abs(M[0].evaluate(z))}],round:[nb,[nb],function(z,M){z=M[0].evaluate(z);return 0>z?-Math.round(-z):Math.round(z)}],floor:[nb,[nb],function(z,M){return Math.floor(M[0].evaluate(z))}],ceil:[nb,[nb],function(z,M){return Math.ceil(M[0].evaluate(z))}],"filter-\x3d\x3d":[Pb,[Kb,kc],function(z,M){var S=M[0];M=M[1];return z.properties()[S.value]===M.value}],"filter-id-\x3d\x3d":[Pb,[kc],function(z,M){M=M[0];return z.id()===
M.value}],"filter-type-\x3d\x3d":[Pb,[Kb],function(z,M){M=M[0];return z.geometryType()===M.value}],"filter-\x3c":[Pb,[Kb,kc],function(z,M){var S=M[0];M=M[1];z=z.properties()[S.value];S=M.value;return typeof z==typeof S&&z<S}],"filter-id-\x3c":[Pb,[kc],function(z,M){M=M[0];z=z.id();M=M.value;return typeof z==typeof M&&z<M}],"filter-\x3e":[Pb,[Kb,kc],function(z,M){var S=M[0];M=M[1];z=z.properties()[S.value];S=M.value;return typeof z==typeof S&&z>S}],"filter-id-\x3e":[Pb,[kc],function(z,M){M=M[0];z=
z.id();M=M.value;return typeof z==typeof M&&z>M}],"filter-\x3c\x3d":[Pb,[Kb,kc],function(z,M){var S=M[0];M=M[1];z=z.properties()[S.value];S=M.value;return typeof z==typeof S&&z<=S}],"filter-id-\x3c\x3d":[Pb,[kc],function(z,M){M=M[0];z=z.id();M=M.value;return typeof z==typeof M&&z<=M}],"filter-\x3e\x3d":[Pb,[Kb,kc],function(z,M){var S=M[0];M=M[1];z=z.properties()[S.value];S=M.value;return typeof z==typeof S&&z>=S}],"filter-id-\x3e\x3d":[Pb,[kc],function(z,M){M=M[0];z=z.id();M=M.value;return typeof z==
typeof M&&z>=M}],"filter-has":[Pb,[kc],function(z,M){return M[0].value in z.properties()}],"filter-has-id":[Pb,[],function(z){return null!==z.id()&&void 0!==z.id()}],"filter-type-in":[Pb,[ea(Kb)],function(z,M){return 0<=M[0].value.indexOf(z.geometryType())}],"filter-id-in":[Pb,[ea(kc)],function(z,M){return 0<=M[0].value.indexOf(z.id())}],"filter-in-small":[Pb,[Kb,ea(kc)],function(z,M){var S=M[0];return 0<=M[1].value.indexOf(z.properties()[S.value])}],"filter-in-large":[Pb,[Kb,ea(kc)],function(z,M){var S=
M[0];M=M[1];a:{z=z.properties()[S.value];S=M.value;var ia=0;for(M=M.value.length-1;ia<=M;){var ta=ia+M>>1;if(S[ta]===z){M=!0;break a}S[ta]>z?M=ta-1:ia=ta+1}M=!1}return M}],all:{type:Pb,overloads:[[[Pb,Pb],function(z,M){var S=M[1];return M[0].evaluate(z)&&S.evaluate(z)}],[{type:Pb},function(z,M){for(var S=0;S<M.length;S+=1)if(!M[S].evaluate(z))return!1;return!0}]]},any:{type:Pb,overloads:[[[Pb,Pb],function(z,M){var S=M[1];return M[0].evaluate(z)||S.evaluate(z)}],[{type:Pb},function(z,M){for(var S=
0;S<M.length;S+=1)if(M[S].evaluate(z))return!0;return!1}]]},"!":[Pb,[Pb],function(z,M){return!M[0].evaluate(z)}],"is-supported-script":[Pb,[Kb],function(z,M){var S=z.globals&&z.globals.isSupportedScript;return!S||S(M[0].evaluate(z))}],upcase:[Kb,[Kb],function(z,M){return M[0].evaluate(z).toUpperCase()}],downcase:[Kb,[Kb],function(z,M){return M[0].evaluate(z).toLowerCase()}],concat:[Kb,{type:kc},function(z,M){return M.map(function(S){return ra(S.evaluate(z))}).join("")}],"resolved-locale":[Kb,[Xc],
function(z,M){return M[0].evaluate(z).resolvedLocale()}]});var Pg=function(z,M){this.expression=z;this._warningHistory={};this._evaluator=new $d;this._defaultValue=M?"color"===M.type&&yb(M.default)?new Bd(0,0,0,0):"color"===M.type?Bd.parse(M.default)||null:void 0===M.default?null:M.default:null;this._enumValues=M&&"enum"===M.type?M.values:null};Pg.prototype.evaluateWithoutErrorHandling=function(z,M,S,ia,ta,Ba){return this._evaluator.globals=z,this._evaluator.feature=M,this._evaluator.featureState=
S,this._evaluator.canonical=ia,this._evaluator.availableImages=ta||null,this._evaluator.formattedSection=Ba,this.expression.evaluate(this._evaluator)};Pg.prototype.evaluate=function(z,M,S,ia,ta,Ba){this._evaluator.globals=z;this._evaluator.feature=M||null;this._evaluator.featureState=S||null;this._evaluator.canonical=ia;this._evaluator.availableImages=ta||null;this._evaluator.formattedSection=Ba||null;try{var La=this.expression.evaluate(this._evaluator);if(null==La||"number"==typeof La&&La!=La)return this._defaultValue;
if(this._enumValues&&!(La in this._enumValues))throw new ee("Expected value to be one of "+Object.keys(this._enumValues).map(function(Wa){return JSON.stringify(Wa)}).join(", ")+", but found "+JSON.stringify(La)+" instead.");return La}catch(Wa){return this._warningHistory[Wa.message]||(this._warningHistory[Wa.message]=!0,"undefined"!=typeof console&&console.warn(Wa.message)),this._defaultValue}};var ie=function(z,M){this.kind=z;this._styleExpression=M;this.isStateDependent="constant"!==z&&!Pa(M.expression)};
ie.prototype.evaluateWithoutErrorHandling=function(z,M,S,ia,ta,Ba){return this._styleExpression.evaluateWithoutErrorHandling(z,M,S,ia,ta,Ba)};ie.prototype.evaluate=function(z,M,S,ia,ta,Ba){return this._styleExpression.evaluate(z,M,S,ia,ta,Ba)};var Kf=function(z,M,S,ia){this.kind=z;this.zoomStops=S;this._styleExpression=M;this.isStateDependent="camera"!==z&&!Pa(M.expression);this.interpolationType=ia};Kf.prototype.evaluateWithoutErrorHandling=function(z,M,S,ia,ta,Ba){return this._styleExpression.evaluateWithoutErrorHandling(z,
M,S,ia,ta,Ba)};Kf.prototype.evaluate=function(z,M,S,ia,ta,Ba){return this._styleExpression.evaluate(z,M,S,ia,ta,Ba)};Kf.prototype.interpolationFactor=function(z,M,S){return this.interpolationType?Gf.interpolationFactor(this.interpolationType,z,M,S):0};var si=function(z,M){this._parameters=z;this._specification=M;aa(this,function Ba(ia,ta){var La="color"===ta.type,Wa=ia.stops&&"object"==typeof ia.stops[0][0],kb=Wa||!(Wa||void 0!==ia.property),vb=ia.type||(lb(ta)?"exponential":"interval");if(La&&((ia=
aa({},ia)).stops&&(ia.stops=ia.stops.map(function(Qc){return[Qc[0],Bd.parse(Qc[1])]})),ia.default=Bd.parse(ia.default?ia.default:ta.default)),ia.colorSpace&&"rgb"!==ia.colorSpace&&!ai[ia.colorSpace])throw Error("Unknown color space: "+ia.colorSpace);if("exponential"===vb)var Ib=ad;else if("interval"===vb)Ib=Ac;else if("categorical"===vb){Ib=lc;var Sb=Object.create(null);La=0;for(var ic=ia.stops;La<ic.length;La+=1){var ec=ic[La];Sb[ec[0]]=ec[1]}var uc=typeof ia.stops[0][0]}else{if("identity"!==vb)throw Error('Unknown function type "'+
vb+'"');Ib=Nc}if(Wa){Wa={};kb=[];for(vb=0;vb<ia.stops.length;vb++)La=ia.stops[vb],ic=La[0].zoom,void 0===Wa[ic]&&(Wa[ic]={zoom:ic,type:ia.type,property:ia.property,default:ia.default,stops:[]},kb.push(ic)),Wa[ic].stops.push([La[0].value,La[1]]);var tc=[];for(vb=0;vb<kb.length;vb+=1)La=kb[vb],tc.push([Wa[La].zoom,Ba(Wa[La],ta)]);Wa={name:"linear"};return{kind:"composite",interpolationType:Wa,interpolationFactor:Gf.interpolationFactor.bind(void 0,Wa),zoomStops:tc.map(function(Qc){return Qc[0]}),evaluate:function(Qc,
wd){Qc=Qc.zoom;return ad({stops:tc,base:ia.base},ta,Qc).evaluate(Qc,wd)}}}return kb?(Wa="exponential"===vb?{name:"exponential",base:void 0!==ia.base?ia.base:1}:null,{kind:"camera",interpolationType:Wa,interpolationFactor:Gf.interpolationFactor.bind(void 0,Wa),zoomStops:ia.stops.map(function(Qc){return Qc[0]}),evaluate:function(Qc){return Ib(ia,ta,Qc.zoom,Sb,uc)}}):{kind:"source",evaluate:function(Qc,wd){Qc=wd&&wd.properties?wd.properties[ia.property]:void 0;return void 0===Qc?Vb(ia.default,ta.default):
Ib(ia,ta,Qc,Sb,uc)}}}(this._parameters,this._specification))};si.deserialize=function(z){return new si(z._parameters,z._specification)};si.serialize=function(z){return{_parameters:z._parameters,_specification:z._specification}};var yf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},ve={promoteId:function(z){var M=z.key;z=z.value;if("string"===rb(z))return vc({key:M,value:z});var S=[],ia;for(ia in z)S.push.apply(S,vc({key:M+
"."+ia,value:z[ia]}));return S}},jf={"*":function(){return[]},array:Yb,boolean:function(z){var M=z.value;z=z.key;var S=rb(M);return"boolean"!==S?[new va(z,M,"boolean expected, "+S+" found")]:[]},number:Fc,color:function(z){var M=z.key;z=z.value;var S=rb(z);return"string"!==S?[new va(M,z,"color expected, "+S+" found")]:null===Hd(z)?[new va(M,z,'color expected, "'+z+'" found')]:[]},constants:V,enum:rc,filter:xb,function:mc,layer:Kc,object:Db,source:Lc,light:Zc,string:vc,formatted:function(z){return 0===
vc(z).length?[]:qc(z)},resolvedImage:function(z){return 0===vc(z).length?[]:qc(z)}};xd.source=Cd(Lc);xd.light=Cd(Zc);xd.layer=Cd(Kc);xd.filter=Cd(xb);xd.paintProperty=Cd(Jb);xd.layoutProperty=Cd(ac);var Sj=xd.light,$k=xd.paintProperty,mk=xd.layoutProperty;pd.prototype.insert=function(z,M,S,ia,ta){this._forEachCell(M,S,ia,ta,this._insertCell,this.uid++);this.keys.push(z);this.bboxes.push(M);this.bboxes.push(S);this.bboxes.push(ia);this.bboxes.push(ta)};pd.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";
};pd.prototype._insertCell=function(z,M,S,ia,ta,Ba){this.cells[ta].push(Ba)};pd.prototype.query=function(z,M,S,ia,ta){var Ba=this.min,La=this.max;if(z<=Ba&&M<=Ba&&La<=S&&La<=ia&&!ta)return Array.prototype.slice.call(this.keys);Ba=[];return this._forEachCell(z,M,S,ia,this._queryCell,Ba,{},ta),Ba};pd.prototype._queryCell=function(z,M,S,ia,ta,Ba,La,Wa){ta=this.cells[ta];if(null!==ta)for(var kb=this.keys,vb=this.bboxes,Ib=0;Ib<ta.length;Ib++){var Sb=ta[Ib];if(void 0===La[Sb]){var ic=4*Sb;(Wa?Wa(vb[ic+
0],vb[ic+1],vb[ic+2],vb[ic+3]):z<=vb[ic+2]&&M<=vb[ic+3]&&S>=vb[ic+0]&&ia>=vb[ic+1])?(La[Sb]=!0,Ba.push(kb[Sb])):La[Sb]=!1}}};pd.prototype._forEachCell=function(z,M,S,ia,ta,Ba,La,Wa){for(var kb=this._convertToCellCoord(z),vb=this._convertToCellCoord(M),Ib=this._convertToCellCoord(S),Sb=this._convertToCellCoord(ia);kb<=Ib;kb++)for(var ic=vb;ic<=Sb;ic++){var ec=this.d*ic+kb;if((!Wa||Wa(this._convertFromCellCoord(kb),this._convertFromCellCoord(ic),this._convertFromCellCoord(kb+1),this._convertFromCellCoord(ic+
1)))&&ta.call(this,z,M,S,ia,ec,Ba,La,Wa))return}};pd.prototype._convertFromCellCoord=function(z){return(z-this.padding)/this.scale};pd.prototype._convertToCellCoord=function(z){return Math.max(0,Math.min(this.d-1,Math.floor(z*this.scale)+this.padding))};pd.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var z=this.cells,M=3+this.cells.length+1+1,S=0,ia=0;ia<this.cells.length;ia++)S+=this.cells[ia].length;S=new Int32Array(M+S+this.keys.length+this.bboxes.length);
S[0]=this.extent;S[1]=this.n;S[2]=this.padding;for(ia=0;ia<z.length;ia++){var ta=z[ia];S[3+ia]=M;S.set(ta,M);M+=ta.length}return S[3+z.length]=M,S.set(this.keys,M),S[3+z.length+1]=M+=this.keys.length,S.set(this.bboxes,M),S.buffer};var lk=self.ImageData,Dj=self.ImageBitmap,gj={},hj;for(hj in Yc("Object",Object),pd.serialize=function(z,M){z=z.toArrayBuffer();return M&&M.push(z),{buffer:z}},pd.deserialize=function(z){return new pd(z.buffer)},Yc("Grid",pd),Yc("Color",Bd),Yc("Error",Error),Yc("ResolvedImage",
oe),Yc("StylePropertyFunction",si),Yc("StyleExpression",Pg,{omit:["_evaluator"]}),Yc("ZoomDependentExpression",Kf),Yc("ZoomConstantExpression",ie),Yc("CompoundExpression",Qe,{omit:["_evaluate"]}),ug)ug[hj]._classRegistryKey||Yc("Expression_"+hj,ug[hj]);var ik=function(){this.first=!0};ik.prototype.update=function(z,M){var S=Math.floor(z);return this.first?(this.first=!1,this.lastIntegerZoom=S,this.lastIntegerZoomTime=0,this.lastZoom=z,this.lastFloorZoom=S,!0):(this.lastFloorZoom>S?(this.lastIntegerZoom=
S+1,this.lastIntegerZoomTime=M):this.lastFloorZoom<S&&(this.lastIntegerZoom=S,this.lastIntegerZoomTime=M),z!==this.lastZoom&&(this.lastZoom=z,this.lastFloorZoom=S,!0))};var Zd={"Latin-1 Supplement":function(z){return 128<=z&&255>=z},Arabic:function(z){return 1536<=z&&1791>=z},"Arabic Supplement":function(z){return 1872<=z&&1919>=z},"Arabic Extended-A":function(z){return 2208<=z&&2303>=z},"Hangul Jamo":function(z){return 4352<=z&&4607>=z},"Unified Canadian Aboriginal Syllabics":function(z){return 5120<=
z&&5759>=z},Khmer:function(z){return 6016<=z&&6143>=z},"Unified Canadian Aboriginal Syllabics Extended":function(z){return 6320<=z&&6399>=z},"General Punctuation":function(z){return 8192<=z&&8303>=z},"Letterlike Symbols":function(z){return 8448<=z&&8527>=z},"Number Forms":function(z){return 8528<=z&&8591>=z},"Miscellaneous Technical":function(z){return 8960<=z&&9215>=z},"Control Pictures":function(z){return 9216<=z&&9279>=z},"Optical Character Recognition":function(z){return 9280<=z&&9311>=z},"Enclosed Alphanumerics":function(z){return 9312<=
z&&9471>=z},"Geometric Shapes":function(z){return 9632<=z&&9727>=z},"Miscellaneous Symbols":function(z){return 9728<=z&&9983>=z},"Miscellaneous Symbols and Arrows":function(z){return 11008<=z&&11263>=z},"CJK Radicals Supplement":function(z){return 11904<=z&&12031>=z},"Kangxi Radicals":function(z){return 12032<=z&&12255>=z},"Ideographic Description Characters":function(z){return 12272<=z&&12287>=z},"CJK Symbols and Punctuation":function(z){return 12288<=z&&12351>=z},Hiragana:function(z){return 12352<=
z&&12447>=z},Katakana:function(z){return 12448<=z&&12543>=z},Bopomofo:function(z){return 12544<=z&&12591>=z},"Hangul Compatibility Jamo":function(z){return 12592<=z&&12687>=z},Kanbun:function(z){return 12688<=z&&12703>=z},"Bopomofo Extended":function(z){return 12704<=z&&12735>=z},"CJK Strokes":function(z){return 12736<=z&&12783>=z},"Katakana Phonetic Extensions":function(z){return 12784<=z&&12799>=z},"Enclosed CJK Letters and Months":function(z){return 12800<=z&&13055>=z},"CJK Compatibility":function(z){return 13056<=
z&&13311>=z},"CJK Unified Ideographs Extension A":function(z){return 13312<=z&&19903>=z},"Yijing Hexagram Symbols":function(z){return 19904<=z&&19967>=z},"CJK Unified Ideographs":function(z){return 19968<=z&&40959>=z},"Yi Syllables":function(z){return 40960<=z&&42127>=z},"Yi Radicals":function(z){return 42128<=z&&42191>=z},"Hangul Jamo Extended-A":function(z){return 43360<=z&&43391>=z},"Hangul Syllables":function(z){return 44032<=z&&55215>=z},"Hangul Jamo Extended-B":function(z){return 55216<=z&&
55295>=z},"Private Use Area":function(z){return 57344<=z&&63743>=z},"CJK Compatibility Ideographs":function(z){return 63744<=z&&64255>=z},"Arabic Presentation Forms-A":function(z){return 64336<=z&&65023>=z},"Vertical Forms":function(z){return 65040<=z&&65055>=z},"CJK Compatibility Forms":function(z){return 65072<=z&&65103>=z},"Small Form Variants":function(z){return 65104<=z&&65135>=z},"Arabic Presentation Forms-B":function(z){return 65136<=z&&65279>=z},"Halfwidth and Fullwidth Forms":function(z){return 65280<=
z&&65519>=z}},jk=null,ig="unavailable",Lh=null,Nj=function(z){z&&"string"==typeof z&&-1<z.indexOf("NetworkError")&&(ig="error");jk&&jk(z)},yj=new Dc,Oj=function(){if("deferred"!==ig||!Lh)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ig="loading";Gd();Lh&&Mb({url:Lh},function(z){z?Nj(z):(ig="loaded",Gd())})},xg={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===ig||null!=xg.applyArabicShaping},
isLoading:function(){return"loading"===ig},setState:function(z){ig=z.pluginStatus;Lh=z.pluginURL},isParsed:function(){return null!=xg.applyArabicShaping&&null!=xg.processBidirectionalText&&null!=xg.processStyledBidirectionalText},getPluginURL:function(){return Lh}},df=function(z,M){this.zoom=z;M?(this.now=M.now,this.fadeDuration=M.fadeDuration,this.zoomHistory=M.zoomHistory,this.transition=M.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ik,this.transition={})};df.prototype.isSupportedScript=
function(z){a:{for(var M=xg.isLoaded(),S=0;S<z.length;S+=1){var ia=z[S].charCodeAt(0);if(!M&&md(ia)||2304<=ia&&3583>=ia||3840<=ia&&4255>=ia||Zd.Khmer(ia)){z=!1;break a}}z=!0}return z};df.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};df.prototype.getCrossfadeParameters=function(){var z=this.zoom,M=z-Math.floor(z),S=this.crossFadingFactor();return z>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,
t:M+(1-M)*S}:{fromScale:.5,toScale:1,t:1-(1-S)*M}};var Yi=function(z,M){this.property=z;this.value=M;this.expression=function(S,ia){if(yb(S))return new si(S,ia);if(ed(S)){S=sd(S,ia);if("error"===S.result)throw Error(S.value.map(function(Ba){return Ba.key+": "+Ba.message}).join(", "));return S.value}var ta=S;return"string"==typeof S&&"color"===ia.type&&(ta=Bd.parse(S)),{kind:"constant",evaluate:function(){return ta}}}(void 0===M?z.specification.default:M,z.specification)};Yi.prototype.isDataDriven=
function(){return"source"===this.expression.kind||"composite"===this.expression.kind};Yi.prototype.possiblyEvaluate=function(z,M,S){return this.property.possiblyEvaluate(this,z,M,S)};var Tj=function(z){this.property=z;this.value=new Yi(z,void 0)};Tj.prototype.transitioned=function(z,M){return new Ak(this.property,this.value,M,g({},z.transition,this.transition),z.now)};Tj.prototype.untransitioned=function(){return new Ak(this.property,this.value,null,{},0)};var fi=function(z){this._properties=z;this._values=
Object.create(z.defaultTransitionablePropertyValues)};fi.prototype.getValue=function(z){return C(this._values[z].value.value)};fi.prototype.setValue=function(z,M){this._values.hasOwnProperty(z)||(this._values[z]=new Tj(this._values[z].property));this._values[z].value=new Yi(this._values[z].property,null===M?void 0:C(M))};fi.prototype.getTransition=function(z){return C(this._values[z].transition)};fi.prototype.setTransition=function(z,M){this._values.hasOwnProperty(z)||(this._values[z]=new Tj(this._values[z].property));
this._values[z].transition=C(M)||void 0};fi.prototype.serialize=function(){for(var z={},M=0,S=Object.keys(this._values);M<S.length;M+=1){var ia=S[M],ta=this.getValue(ia);void 0!==ta&&(z[ia]=ta);ta=this.getTransition(ia);void 0!==ta&&(z[ia+"-transition"]=ta)}return z};fi.prototype.transitioned=function(z,M){for(var S=new ae(this._properties),ia=0,ta=Object.keys(this._values);ia<ta.length;ia+=1){var Ba=ta[ia];S._values[Ba]=this._values[Ba].transitioned(z,M._values[Ba])}return S};fi.prototype.untransitioned=
function(){for(var z=new ae(this._properties),M=0,S=Object.keys(this._values);M<S.length;M+=1){var ia=S[M];z._values[ia]=this._values[ia].untransitioned()}return z};var Ak=function(z,M,S,ia,ta){this.property=z;this.value=M;this.begin=ta+ia.delay||0;this.end=this.begin+ia.duration||0;z.specification.transition&&(ia.delay||ia.duration)&&(this.prior=S)};Ak.prototype.possiblyEvaluate=function(z,M,S){var ia=z.now||0,ta=this.value.possiblyEvaluate(z,M,S),Ba=this.prior;if(Ba){if(ia>this.end||this.value.isDataDriven())return this.prior=
null,ta;if(ia<this.begin)return Ba.possiblyEvaluate(z,M,S);var La=(ia-this.begin)/(this.end-this.begin);ia=this.property;var Wa=ia.interpolate;z=Ba.possiblyEvaluate(z,M,S);0>=La?La=0:1<=La?La=1:(M=La*La,S=M*La,La=4*(.5>La?S:3*(La-M)+S-.75));return Wa.call(ia,z,ta,La)}return ta};var ae=function(z){this._properties=z;this._values=Object.create(z.defaultTransitioningPropertyValues)};ae.prototype.possiblyEvaluate=function(z,M,S){for(var ia=new zj(this._properties),ta=0,Ba=Object.keys(this._values);ta<
Ba.length;ta+=1){var La=Ba[ta];ia._values[La]=this._values[La].possiblyEvaluate(z,M,S)}return ia};ae.prototype.hasTransition=function(){for(var z=0,M=Object.keys(this._values);z<M.length;z+=1)if(this._values[M[z]].prior)return!0;return!1};var Lf=function(z){this._properties=z;this._values=Object.create(z.defaultPropertyValues)};Lf.prototype.getValue=function(z){return C(this._values[z].value)};Lf.prototype.setValue=function(z,M){this._values[z]=new Yi(this._values[z].property,null===M?void 0:C(M))};
Lf.prototype.serialize=function(){for(var z={},M=0,S=Object.keys(this._values);M<S.length;M+=1){var ia=S[M],ta=this.getValue(ia);void 0!==ta&&(z[ia]=ta)}return z};Lf.prototype.possiblyEvaluate=function(z,M,S){for(var ia=new zj(this._properties),ta=0,Ba=Object.keys(this._values);ta<Ba.length;ta+=1){var La=Ba[ta];ia._values[La]=this._values[La].possiblyEvaluate(z,M,S)}return ia};var Nf=function(z,M,S){this.property=z;this.value=M;this.parameters=S};Nf.prototype.isConstant=function(){return"constant"===
this.value.kind};Nf.prototype.constantOr=function(z){return"constant"===this.value.kind?this.value.value:z};Nf.prototype.evaluate=function(z,M,S,ia){return this.property.evaluate(this.value,this.parameters,z,M,S,ia)};var zj=function(z){this._properties=z;this._values=Object.create(z.defaultPossiblyEvaluatedValues)};zj.prototype.get=function(z){return this._values[z]};var Ud=function(z){this.specification=z};Ud.prototype.possiblyEvaluate=function(z,M){return z.expression.evaluate(M)};Ud.prototype.interpolate=
function(z,M,S){var ia=$h[this.specification.type];return ia?ia(z,M,S):z};var se=function(z,M){this.specification=z;this.overrides=M};se.prototype.possiblyEvaluate=function(z,M,S,ia){return new Nf(this,"constant"===z.expression.kind||"camera"===z.expression.kind?{kind:"constant",value:z.expression.evaluate(M,null,{},S,ia)}:z.expression,M)};se.prototype.interpolate=function(z,M,S){if("constant"!==z.value.kind||"constant"!==M.value.kind)return z;if(void 0===z.value.value||void 0===M.value.value)return new Nf(this,
{kind:"constant",value:void 0},z.parameters);var ia=$h[this.specification.type];return ia?new Nf(this,{kind:"constant",value:ia(z.value.value,M.value.value,S)},z.parameters):z};se.prototype.evaluate=function(z,M,S,ia,ta,Ba){return"constant"===z.kind?z.value:z.evaluate(M,S,ia,ta,Ba)};var Uj=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.possiblyEvaluate=function(S,ia,ta,Ba){return void 0===S.value?new Nf(this,
{kind:"constant",value:void 0},ia):"constant"===S.expression.kind?(ta=S.expression.evaluate(ia,null,{},ta,Ba),S="resolvedImage"===S.property.specification.type&&"string"!=typeof ta?ta.name:ta,S=this._calculate(S,S,S,ia),new Nf(this,{kind:"constant",value:S},ia)):"camera"===S.expression.kind?(S=this._calculate(S.expression.evaluate({zoom:ia.zoom-1}),S.expression.evaluate({zoom:ia.zoom}),S.expression.evaluate({zoom:ia.zoom+1}),ia),new Nf(this,{kind:"constant",value:S},ia)):new Nf(this,S.expression,
ia)},M.prototype.evaluate=function(S,ia,ta,Ba,La,Wa){return"source"===S.kind?(S=S.evaluate(ia,ta,Ba,La,Wa),this._calculate(S,S,S,ia)):"composite"===S.kind?this._calculate(S.evaluate({zoom:Math.floor(ia.zoom)-1},ta,Ba),S.evaluate({zoom:Math.floor(ia.zoom)},ta,Ba),S.evaluate({zoom:Math.floor(ia.zoom)+1},ta,Ba),ia):S.value},M.prototype._calculate=function(S,ia,ta,Ba){return Ba.zoom>Ba.zoomHistory.lastIntegerZoom?{from:S,to:ia}:{from:ta,to:ia}},M.prototype.interpolate=function(S){return S},M}(se),yi=
function(z){this.specification=z};yi.prototype.possiblyEvaluate=function(z,M,S,ia){if(void 0!==z.value)return"constant"===z.expression.kind?(z=z.expression.evaluate(M,null,{},S,ia),this._calculate(z,z,z,M)):this._calculate(z.expression.evaluate(new df(Math.floor(M.zoom-1),M)),z.expression.evaluate(new df(Math.floor(M.zoom),M)),z.expression.evaluate(new df(Math.floor(M.zoom+1),M)),M)};yi.prototype._calculate=function(z,M,S,ia){return ia.zoom>ia.zoomHistory.lastIntegerZoom?{from:z,to:M}:{from:S,to:M}};
yi.prototype.interpolate=function(z){return z};var Ej=function(z){this.specification=z};Ej.prototype.possiblyEvaluate=function(z,M,S,ia){return!!z.expression.evaluate(M,null,{},S,ia)};Ej.prototype.interpolate=function(){return!1};var Jg=function(z){for(var M in this.properties=z,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],z){var S=z[M];S.specification.overridable&&
this.overridableProperties.push(M);var ia=this.defaultPropertyValues[M]=new Yi(S,void 0);S=this.defaultTransitionablePropertyValues[M]=new Tj(S);this.defaultTransitioningPropertyValues[M]=S.untransitioned();this.defaultPossiblyEvaluatedValues[M]=ia.possiblyEvaluate({})}};Yc("DataDrivenProperty",se);Yc("DataConstantProperty",Ud);Yc("CrossFadedDataDrivenProperty",Uj);Yc("CrossFadedProperty",yi);Yc("ColorRampProperty",Ej);var ch=function(z){function M(S,ia){if(z.call(this),this.id=S.id,this.type=S.type,
this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==S.type&&(this.metadata=S.metadata,this.minzoom=S.minzoom,this.maxzoom=S.maxzoom,"background"!==S.type&&(this.source=S.source,this.sourceLayer=S["source-layer"],this.filter=S.filter),ia.layout&&(this._unevaluatedLayout=new Lf(ia.layout)),ia.paint)){for(var ta in this._transitionablePaint=new fi(ia.paint),S.paint)this.setPaintProperty(ta,S.paint[ta],{validate:!1});for(var Ba in S.layout)this.setLayoutProperty(Ba,S.layout[Ba],
{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned();this.paint=new zj(ia.paint)}}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},M.prototype.getLayoutProperty=function(S){return"visibility"===S?this.visibility:this._unevaluatedLayout.getValue(S)},M.prototype.setLayoutProperty=function(S,ia,ta){void 0===ta&&(ta={});null!=ia&&this._validate(mk,"layers."+
this.id+".layout."+S,S,ia,ta)||("visibility"!==S?this._unevaluatedLayout.setValue(S,ia):this.visibility=ia)},M.prototype.getPaintProperty=function(S){return v(S,"-transition")?this._transitionablePaint.getTransition(S.slice(0,-11)):this._transitionablePaint.getValue(S)},M.prototype.setPaintProperty=function(S,ia,ta){if(void 0===ta&&(ta={}),null!=ia&&this._validate($k,"layers."+this.id+".paint."+S,S,ia,ta))return!1;if(v(S,"-transition"))return this._transitionablePaint.setTransition(S.slice(0,-11),
ia||void 0),!1;var Ba=this._transitionablePaint._values[S];ta="cross-faded-data-driven"===Ba.property.specification["property-type"];var La=Ba.value.isDataDriven();Ba=Ba.value;this._transitionablePaint.setValue(S,ia);this._handleSpecialPaintPropertyUpdate(S);ia=this._transitionablePaint._values[S].value;return ia.isDataDriven()||La||ta||this._handleOverridablePaintPropertyUpdate(S,Ba,ia)},M.prototype._handleSpecialPaintPropertyUpdate=function(S){},M.prototype._handleOverridablePaintPropertyUpdate=
function(S,ia,ta){return!1},M.prototype.isHidden=function(S){return!!(this.minzoom&&S<this.minzoom)||!!(this.maxzoom&&S>=this.maxzoom)||"none"===this.visibility},M.prototype.updateTransitions=function(S){this._transitioningPaint=this._transitionablePaint.transitioned(S,this._transitioningPaint)},M.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},M.prototype.recalculate=function(S,ia){S.getCrossfadeParameters&&(this._crossfadeParameters=S.getCrossfadeParameters());
this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(S,void 0,ia));this.paint=this._transitioningPaint.possiblyEvaluate(S,void 0,ia)},M.prototype.serialize=function(){var S={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};
return this.visibility&&(S.layout=S.layout||{},S.layout.visibility=this.visibility),D(S,function(ia,ta){return!(void 0===ia||"layout"===ta&&!Object.keys(ia).length||"paint"===ta&&!Object.keys(ia).length)})},M.prototype._validate=function(S,ia,ta,Ba,La){return void 0===La&&(La={}),(!La||!1!==La.validate)&&Kd(this,S.call(xd,{key:ia,layerType:this.type,objectKey:ta,value:Ba,styleSpec:Xb,style:{glyphs:!0,sprite:!0}}))},M.prototype.is3D=function(){return!1},M.prototype.isTileClipped=function(){return!1},
M.prototype.hasOffscreenPass=function(){return!1},M.prototype.resize=function(){},M.prototype.isStateDependent=function(){for(var S in this.paint._values){var ia=this.paint.get(S);if(ia instanceof Nf&&cb(ia.property.specification)&&("source"===ia.value.kind||"composite"===ia.value.kind)&&ia.value.isStateDependent)return!0}return!1},M}(Dc),Zi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},yg=function(z,M){this._structArray=
z;this._pos1=M*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},Ze=function(){this.isTransferred=!1;this.capacity=-1;this.resize(0)};Ze.serialize=function(z,M){return z._trim(),M&&(z.isTransferred=!0,M.push(z.arrayBuffer)),{length:z.length,arrayBuffer:z.arrayBuffer}};Ze.deserialize=function(z){var M=Object.create(this.prototype);return M.arrayBuffer=z.arrayBuffer,M.length=z.length,M.capacity=z.arrayBuffer.byteLength/M.bytesPerElement,M._refreshViews(),M};Ze.prototype._trim=
function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())};Ze.prototype.clear=function(){this.length=0};Ze.prototype.resize=function(z){this.reserve(z);this.length=z};Ze.prototype.reserve=function(z){z>this.capacity&&(this.capacity=Math.max(z,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),z=this.uint8,this._refreshViews(),z&&this.uint8.set(z))};
Ze.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var Hi=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia){var ta=this.length;return this.resize(ta+1),this.emplace(ta,S,ia)},M.prototype.emplace=
function(S,ia,ta){var Ba=2*S;return this.int16[Ba+0]=ia,this.int16[Ba+1]=ta,S},M}(Ze);Hi.prototype.bytesPerElement=4;Yc("StructArrayLayout2i4",Hi);var ti=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta,Ba){var La=this.length;return this.resize(La+1),
this.emplace(La,S,ia,ta,Ba)},M.prototype.emplace=function(S,ia,ta,Ba,La){var Wa=4*S;return this.int16[Wa+0]=ia,this.int16[Wa+1]=ta,this.int16[Wa+2]=Ba,this.int16[Wa+3]=La,S},M}(Ze);ti.prototype.bytesPerElement=8;Yc("StructArrayLayout4i8",ti);var ui=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},
M.prototype.emplaceBack=function(S,ia,ta,Ba,La,Wa){var kb=this.length;return this.resize(kb+1),this.emplace(kb,S,ia,ta,Ba,La,Wa)},M.prototype.emplace=function(S,ia,ta,Ba,La,Wa,kb){var vb=6*S;return this.int16[vb+0]=ia,this.int16[vb+1]=ta,this.int16[vb+2]=Ba,this.int16[vb+3]=La,this.int16[vb+4]=Wa,this.int16[vb+5]=kb,S},M}(Ze);ui.prototype.bytesPerElement=12;Yc("StructArrayLayout2i4i12",ui);var Ih=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&
z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta,Ba,La,Wa){var kb=this.length;return this.resize(kb+1),this.emplace(kb,S,ia,ta,Ba,La,Wa)},M.prototype.emplace=function(S,ia,ta,Ba,La,Wa,kb){var vb=4*S,Ib=8*S;return this.int16[vb+0]=ia,this.int16[vb+1]=ta,this.uint8[Ib+4]=Ba,this.uint8[Ib+5]=La,this.uint8[Ib+6]=Wa,this.uint8[Ib+7]=kb,S},M}(Ze);Ih.prototype.bytesPerElement=
8;Yc("StructArrayLayout2i4ub8",Ih);var Kg=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb){var ic=this.length;return this.resize(ic+1),this.emplace(ic,S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb)},M.prototype.emplace=function(S,ia,ta,Ba,La,Wa,
kb,vb,Ib,Sb,ic){var ec=9*S,uc=18*S;return this.uint16[ec+0]=ia,this.uint16[ec+1]=ta,this.uint16[ec+2]=Ba,this.uint16[ec+3]=La,this.uint16[ec+4]=Wa,this.uint16[ec+5]=kb,this.uint16[ec+6]=vb,this.uint16[ec+7]=Ib,this.uint8[uc+16]=Sb,this.uint8[uc+17]=ic,S},M}(Ze);Kg.prototype.bytesPerElement=18;Yc("StructArrayLayout8ui2ub18",Kg);var gi=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec){var uc=this.length;return this.resize(uc+1),this.emplace(uc,S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec)},M.prototype.emplace=function(S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec,uc){var tc=12*S;return this.int16[tc+0]=ia,this.int16[tc+1]=ta,this.int16[tc+2]=Ba,this.int16[tc+3]=La,this.uint16[tc+4]=Wa,this.uint16[tc+5]=kb,this.uint16[tc+
6]=vb,this.uint16[tc+7]=Ib,this.int16[tc+8]=Sb,this.int16[tc+9]=ic,this.int16[tc+10]=ec,this.int16[tc+11]=uc,S},M}(Ze);gi.prototype.bytesPerElement=24;Yc("StructArrayLayout4i4ui4i24",gi);var qh=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta){var Ba=
this.length;return this.resize(Ba+1),this.emplace(Ba,S,ia,ta)},M.prototype.emplace=function(S,ia,ta,Ba){var La=3*S;return this.float32[La+0]=ia,this.float32[La+1]=ta,this.float32[La+2]=Ba,S},M}(Ze);qh.prototype.bytesPerElement=12;Yc("StructArrayLayout3f12",qh);var Ii=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},
M.prototype.emplaceBack=function(S){var ia=this.length;return this.resize(ia+1),this.emplace(ia,S)},M.prototype.emplace=function(S,ia){return this.uint32[1*S]=ia,S},M}(Ze);Ii.prototype.bytesPerElement=4;Yc("StructArrayLayout1ul4",Ii);var Ji=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=
new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta,Ba,La,Wa,kb,vb,Ib){var Sb=this.length;return this.resize(Sb+1),this.emplace(Sb,S,ia,ta,Ba,La,Wa,kb,vb,Ib)},M.prototype.emplace=function(S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb){var ic=10*S;return this.int16[ic+0]=ia,this.int16[ic+1]=ta,this.int16[ic+2]=Ba,this.int16[ic+3]=La,this.int16[ic+4]=Wa,this.int16[ic+5]=kb,this.uint32[5*S+3]=vb,this.uint16[ic+8]=Ib,this.uint16[ic+9]=Sb,S},M}(Ze);
Ji.prototype.bytesPerElement=20;Yc("StructArrayLayout6i1ul2ui20",Ji);var Jh=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta,Ba,La,Wa){var kb=this.length;return this.resize(kb+1),this.emplace(kb,S,ia,ta,Ba,La,Wa)},M.prototype.emplace=function(S,ia,ta,
Ba,La,Wa,kb){var vb=6*S;return this.int16[vb+0]=ia,this.int16[vb+1]=ta,this.int16[vb+2]=Ba,this.int16[vb+3]=La,this.int16[vb+4]=Wa,this.int16[vb+5]=kb,S},M}(Ze);Jh.prototype.bytesPerElement=12;Yc("StructArrayLayout2i2i2i12",Jh);var $g=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer);this.int16=
new Int16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta,Ba,La){var Wa=this.length;return this.resize(Wa+1),this.emplace(Wa,S,ia,ta,Ba,La)},M.prototype.emplace=function(S,ia,ta,Ba,La,Wa){var kb=4*S,vb=8*S;return this.float32[kb+0]=ia,this.float32[kb+1]=ta,this.float32[kb+2]=Ba,this.int16[vb+6]=La,this.int16[vb+7]=Wa,S},M}(Ze);$g.prototype.bytesPerElement=16;Yc("StructArrayLayout2f1f2i16",$g);var kk=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=
Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta,Ba){var La=this.length;return this.resize(La+1),this.emplace(La,S,ia,ta,Ba)},M.prototype.emplace=function(S,ia,ta,Ba,La){var Wa=12*S,kb=3*S;return this.uint8[Wa+0]=ia,this.uint8[Wa+1]=ta,this.float32[kb+1]=Ba,this.float32[kb+2]=La,S},M}(Ze);kk.prototype.bytesPerElement=12;Yc("StructArrayLayout2ub2f12",
kk);var ji=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta){var Ba=this.length;return this.resize(Ba+1),this.emplace(Ba,S,ia,ta)},M.prototype.emplace=function(S,ia,ta,Ba){var La=3*S;return this.uint16[La+0]=ia,this.uint16[La+1]=ta,this.uint16[La+2]=
Ba,S},M}(Ze);ji.prototype.bytesPerElement=6;Yc("StructArrayLayout3ui6",ji);var Rj=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},M.prototype.emplaceBack=
function(S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec,uc,tc,Qc,wd,Ad){var od=this.length;return this.resize(od+1),this.emplace(od,S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec,uc,tc,Qc,wd,Ad)},M.prototype.emplace=function(S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec,uc,tc,Qc,wd,Ad,od){var Od=24*S,Nd=12*S,Sd=48*S;return this.int16[Od+0]=ia,this.int16[Od+1]=ta,this.uint16[Od+2]=Ba,this.uint16[Od+3]=La,this.uint32[Nd+2]=Wa,this.uint32[Nd+3]=kb,this.uint32[Nd+4]=vb,this.uint16[Od+10]=Ib,this.uint16[Od+11]=Sb,this.uint16[Od+12]=ic,
this.float32[Nd+7]=ec,this.float32[Nd+8]=uc,this.uint8[Sd+36]=tc,this.uint8[Sd+37]=Qc,this.uint8[Sd+38]=wd,this.uint32[Nd+10]=Ad,this.int16[Od+22]=od,S},M}(Ze);Rj.prototype.bytesPerElement=48;Yc("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Rj);var hi=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec,uc,tc,Qc,wd,Ad,od,Od,Nd,Sd,be,je,qe,re,he,le,Ee){var ce=this.length;return this.resize(ce+1),this.emplace(ce,S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec,uc,tc,Qc,wd,Ad,od,Od,Nd,Sd,be,je,qe,re,he,le,Ee)},M.prototype.emplace=function(S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec,uc,tc,Qc,wd,Ad,od,Od,Nd,Sd,be,je,qe,
re,he,le,Ee,ce){var Yd=34*S,de=17*S;return this.int16[Yd+0]=ia,this.int16[Yd+1]=ta,this.int16[Yd+2]=Ba,this.int16[Yd+3]=La,this.int16[Yd+4]=Wa,this.int16[Yd+5]=kb,this.int16[Yd+6]=vb,this.int16[Yd+7]=Ib,this.uint16[Yd+8]=Sb,this.uint16[Yd+9]=ic,this.uint16[Yd+10]=ec,this.uint16[Yd+11]=uc,this.uint16[Yd+12]=tc,this.uint16[Yd+13]=Qc,this.uint16[Yd+14]=wd,this.uint16[Yd+15]=Ad,this.uint16[Yd+16]=od,this.uint16[Yd+17]=Od,this.uint16[Yd+18]=Nd,this.uint16[Yd+19]=Sd,this.uint16[Yd+20]=be,this.uint16[Yd+
21]=je,this.uint16[Yd+22]=qe,this.uint32[de+12]=re,this.float32[de+13]=he,this.float32[de+14]=le,this.float32[de+15]=Ee,this.float32[de+16]=ce,S},M}(Ze);hi.prototype.bytesPerElement=68;Yc("StructArrayLayout8i15ui1ul4f68",hi);var ij=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},M.prototype.emplaceBack=
function(S){var ia=this.length;return this.resize(ia+1),this.emplace(ia,S)},M.prototype.emplace=function(S,ia){return this.float32[1*S]=ia,S},M}(Ze);ij.prototype.bytesPerElement=4;Yc("StructArrayLayout1f4",ij);var Fj=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,
ia,ta){var Ba=this.length;return this.resize(Ba+1),this.emplace(Ba,S,ia,ta)},M.prototype.emplace=function(S,ia,ta,Ba){var La=3*S;return this.int16[La+0]=ia,this.int16[La+1]=ta,this.int16[La+2]=Ba,S},M}(Ze);Fj.prototype.bytesPerElement=6;Yc("StructArrayLayout3i6",Fj);var Gj=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta){var Ba=this.length;return this.resize(Ba+1),this.emplace(Ba,S,ia,ta)},M.prototype.emplace=function(S,ia,ta,Ba){var La=4*S;return this.uint32[2*S]=ia,this.uint16[La+2]=ta,this.uint16[La+3]=Ba,S},M}(Ze);Gj.prototype.bytesPerElement=8;Yc("StructArrayLayout1ul2ui8",Gj);var Ni=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia){var ta=this.length;return this.resize(ta+1),this.emplace(ta,S,ia)},M.prototype.emplace=function(S,ia,ta){var Ba=2*S;return this.uint16[Ba+0]=ia,this.uint16[Ba+1]=ta,S},M}(Ze);Ni.prototype.bytesPerElement=4;Yc("StructArrayLayout2ui4",Ni);var Fk=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=
M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S){var ia=this.length;return this.resize(ia+1),this.emplace(ia,S)},M.prototype.emplace=function(S,ia){return this.uint16[1*S]=ia,S},M}(Ze);Fk.prototype.bytesPerElement=2;Yc("StructArrayLayout1ui2",Fk);var Rg=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=
M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia){var ta=this.length;return this.resize(ta+1),this.emplace(ta,S,ia)},M.prototype.emplace=function(S,ia,ta){var Ba=2*S;return this.float32[Ba+0]=ia,this.float32[Ba+1]=ta,S},M}(Ze);Rg.prototype.bytesPerElement=8;Yc("StructArrayLayout2f8",Rg);var Vj=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=
Object.create(z&&z.prototype)).constructor=M,M.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},M.prototype.emplaceBack=function(S,ia,ta,Ba){var La=this.length;return this.resize(La+1),this.emplace(La,S,ia,ta,Ba)},M.prototype.emplace=function(S,ia,ta,Ba,La){var Wa=4*S;return this.float32[Wa+0]=ia,this.float32[Wa+1]=ta,this.float32[Wa+2]=Ba,this.float32[Wa+3]=La,S},M}(Ze);Vj.prototype.bytesPerElement=16;Yc("StructArrayLayout4f16",
Vj);var jj=function(z){function M(){z.apply(this,arguments)}z&&(M.__proto__=z);(M.prototype=Object.create(z&&z.prototype)).constructor=M;var S={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return S.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},S.anchorPointY.get=
function(){return this._structArray.int16[this._pos2+1]},S.x1.get=function(){return this._structArray.int16[this._pos2+2]},S.y1.get=function(){return this._structArray.int16[this._pos2+3]},S.x2.get=function(){return this._structArray.int16[this._pos2+4]},S.y2.get=function(){return this._structArray.int16[this._pos2+5]},S.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},S.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},S.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
9]},S.anchorPoint.get=function(){return new ge(this.anchorPointX,this.anchorPointY)},Object.defineProperties(M.prototype,S),M}(yg);jj.prototype.size=20;var nk=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.get=function(S){return new jj(this,S)},M}(Ji);Yc("CollisionBoxArray",nk);var Gk=function(z){function M(){z.apply(this,arguments)}z&&(M.__proto__=z);(M.prototype=Object.create(z&&z.prototype)).constructor=
M;var S={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};
return S.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},S.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},S.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},S.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},S.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},S.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},S.lineLength.get=function(){return this._structArray.uint32[this._pos4+
4]},S.segment.get=function(){return this._structArray.uint16[this._pos2+10]},S.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},S.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},S.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},S.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},S.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},S.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+
37]},S.placedOrientation.set=function(ia){this._structArray.uint8[this._pos1+37]=ia},S.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},S.hidden.set=function(ia){this._structArray.uint8[this._pos1+38]=ia},S.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},S.crossTileID.set=function(ia){this._structArray.uint32[this._pos4+10]=ia},S.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(M.prototype,S),M}(yg);
Gk.prototype.size=48;var Hk=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.get=function(S){return new Gk(this,S)},M}(Rj);Yc("PlacedSymbolArray",Hk);var Ik=function(z){function M(){z.apply(this,arguments)}z&&(M.__proto__=z);(M.prototype=Object.create(z&&z.prototype)).constructor=M;var S={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},
leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},
featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return S.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},S.anchorY.get=function(){return this._structArray.int16[this._pos2+
1]},S.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},S.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},S.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},S.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},S.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},S.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+
7]},S.key.get=function(){return this._structArray.uint16[this._pos2+8]},S.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},S.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},S.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},S.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},S.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},S.iconBoxEndIndex.get=
function(){return this._structArray.uint16[this._pos2+14]},S.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},S.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},S.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},S.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},S.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},S.numIconVertices.get=
function(){return this._structArray.uint16[this._pos2+20]},S.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},S.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},S.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},S.crossTileID.set=function(ia){this._structArray.uint32[this._pos4+12]=ia},S.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},S.textOffset0.get=function(){return this._structArray.float32[this._pos4+
14]},S.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},S.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(M.prototype,S),M}(yg);Ik.prototype.size=68;var Jk=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.get=function(S){return new Ik(this,S)},M}(hi);Yc("SymbolInstanceArray",Jk);var Wj=function(z){function M(){z.apply(this,
arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.getoffsetX=function(S){return this.float32[1*S]},M}(ij);Yc("GlyphOffsetArray",Wj);var bj=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.getx=function(S){return this.int16[3*S]},M.prototype.gety=function(S){return this.int16[3*S+1]},M.prototype.gettileUnitDistanceFromAnchor=function(S){return this.int16[3*
S+2]},M}(Fj);Yc("SymbolLineVertexArray",bj);var Ki=function(z){function M(){z.apply(this,arguments)}z&&(M.__proto__=z);(M.prototype=Object.create(z&&z.prototype)).constructor=M;var S={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return S.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},S.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},S.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
3]},Object.defineProperties(M.prototype,S),M}(yg);Ki.prototype.size=8;var aj=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.get=function(S){return new Ki(this,S)},M}(Gj);Yc("FeatureIndexArray",aj);var Bk=Md([{name:"a_pos",components:2,type:"Int16"}],4).members,Hf=function(z){void 0===z&&(z=[]);this.segments=z};Hf.prototype.prepareSegment=function(z,M,S,ia){var ta=this.segments[this.segments.length-1];
return z>Hf.MAX_VERTEX_ARRAY_LENGTH&&x("Max vertices per segment is "+Hf.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+z),(!ta||ta.vertexLength+z>Hf.MAX_VERTEX_ARRAY_LENGTH||ta.sortKey!==ia)&&(ta={vertexOffset:M.length,primitiveOffset:S.length,vertexLength:0,primitiveLength:0},void 0!==ia&&(ta.sortKey=ia),this.segments.push(ta)),ta};Hf.prototype.get=function(){return this.segments};Hf.prototype.destroy=function(){for(var z=0,M=this.segments;z<M.length;z+=1){var S=M[z],ia;for(ia in S.vaos)S.vaos[ia].destroy()}};
Hf.simpleSegment=function(z,M,S,ia){return new Hf([{vertexOffset:z,primitiveOffset:M,vertexLength:S,primitiveLength:ia,vaos:{},sortKey:0}])};Hf.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;Yc("SegmentVector",Hf);var Aj=Md([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Ck=f(function(z){z.exports=function(M,S){var ia,ta,Ba;var La=M.length-(ia=
3&M.length);for(Ba=0;Ba<La;){var Wa=255&M.charCodeAt(Ba)|(255&M.charCodeAt(++Ba))<<8|(255&M.charCodeAt(++Ba))<<16|(255&M.charCodeAt(++Ba))<<24;++Ba;S=27492+(65535&(ta=5*(65535&(S=(S^=461845907*(65535&(Wa=(Wa=3432918353*(65535&Wa)+((3432918353*(Wa>>>16)&65535)<<16)&4294967295)<<15|Wa>>>17))+((461845907*(Wa>>>16)&65535)<<16)&4294967295)<<13|S>>>19))+((5*(S>>>16)&65535)<<16)&4294967295))+((58964+(ta>>>16)&65535)<<16)}switch(Wa=0,ia){case 3:Wa^=(255&M.charCodeAt(Ba+2))<<16;case 2:Wa^=(255&M.charCodeAt(Ba+
1))<<8;case 1:S^=461845907*(65535&(Wa=(Wa=3432918353*(65535&(Wa^=255&M.charCodeAt(Ba)))+((3432918353*(Wa>>>16)&65535)<<16)&4294967295)<<15|Wa>>>17))+((461845907*(Wa>>>16)&65535)<<16)&4294967295}return S^=M.length,S=2246822507*(65535&(S^=S>>>16))+((2246822507*(S>>>16)&65535)<<16)&4294967295,S=3266489909*(65535&(S^=S>>>13))+((3266489909*(S>>>16)&65535)<<16)&4294967295,(S^S>>>16)>>>0}}),ok=f(function(z){z.exports=function(M,S){var ia=M.length;S^=ia;for(var ta=0;4<=ia;){var Ba=1540483477*(65535&(Ba=255&
M.charCodeAt(ta)|(255&M.charCodeAt(++ta))<<8|(255&M.charCodeAt(++ta))<<16|(255&M.charCodeAt(++ta))<<24))+((1540483477*(Ba>>>16)&65535)<<16);S=1540483477*(65535&S)+((1540483477*(S>>>16)&65535)<<16)^(Ba=1540483477*(65535&(Ba^=Ba>>>24))+((1540483477*(Ba>>>16)&65535)<<16));ia-=4;++ta}switch(ia){case 3:S^=(255&M.charCodeAt(ta+2))<<16;case 2:S^=(255&M.charCodeAt(ta+1))<<8;case 1:S=1540483477*(65535&(S^=255&M.charCodeAt(ta)))+((1540483477*(S>>>16)&65535)<<16)}return S=1540483477*(65535&(S^=S>>>13))+((1540483477*
(S>>>16)&65535)<<16),(S^S>>>15)>>>0}}),cj=Ck;cj.murmur3=Ck;cj.murmur2=ok;var wi=function(){this.ids=[];this.positions=[];this.indexed=!1};wi.prototype.add=function(z,M,S,ia){this.ids.push(Wd(z));this.positions.push(M,S,ia)};wi.prototype.getPositions=function(z){z=Wd(z);for(var M=0,S=this.ids.length-1;M<S;){var ia=M+S>>1;this.ids[ia]>=z?S=ia:M=ia+1}for(S=[];this.ids[M]===z;)S.push({index:this.positions[3*M],start:this.positions[3*M+1],end:this.positions[3*M+2]}),M++;return S};wi.serialize=function(z,
M){var S=new Float64Array(z.ids);z=new Uint32Array(z.positions);return function kb(ta,Ba,La,Wa){for(;La<Wa;){for(var vb=ta[La+Wa>>1],Ib=La-1,Sb=Wa+1;;){do Ib++;while(ta[Ib]<vb);do Sb--;while(ta[Sb]>vb);if(Ib>=Sb)break;Qd(ta,Ib,Sb);Qd(Ba,3*Ib,3*Sb);Qd(Ba,3*Ib+1,3*Sb+1);Qd(Ba,3*Ib+2,3*Sb+2)}Sb-La<Wa-Sb?(kb(ta,Ba,La,Sb),La=Sb+1):(kb(ta,Ba,Sb+1,Wa),Wa=Sb)}}(S,z,0,S.length-1),M&&M.push(S.buffer,z.buffer),{ids:S,positions:z}};wi.deserialize=function(z){var M=new wi;return M.ids=z.ids,M.positions=z.positions,
M.indexed=!0,M};var al=Math.pow(2,53)-1;Yc("FeaturePositionMap",wi);var kj=function(z,M){this.gl=z.gl;this.location=M},nl=function(z){function M(S,ia){z.call(this,S,ia);this.current=0}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.set=function(S){this.current!==S&&(this.current=S,this.gl.uniform1i(this.location,S))},M}(kj),pk=function(z){function M(S,ia){z.call(this,S,ia);this.current=0}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=
M,M.prototype.set=function(S){this.current!==S&&(this.current=S,this.gl.uniform1f(this.location,S))},M}(kj),ol=function(z){function M(S,ia){z.call(this,S,ia);this.current=[0,0]}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.set=function(S){S[0]===this.current[0]&&S[1]===this.current[1]||(this.current=S,this.gl.uniform2f(this.location,S[0],S[1]))},M}(kj),pl=function(z){function M(S,ia){z.call(this,S,ia);this.current=[0,0,0]}return z&&(M.__proto__=z),
(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.set=function(S){S[0]===this.current[0]&&S[1]===this.current[1]&&S[2]===this.current[2]||(this.current=S,this.gl.uniform3f(this.location,S[0],S[1],S[2]))},M}(kj),bl=function(z){function M(S,ia){z.call(this,S,ia);this.current=[0,0,0,0]}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.set=function(S){S[0]===this.current[0]&&S[1]===this.current[1]&&S[2]===this.current[2]&&S[3]===this.current[3]||
(this.current=S,this.gl.uniform4f(this.location,S[0],S[1],S[2],S[3]))},M}(kj),Kk=function(z){function M(S,ia){z.call(this,S,ia);this.current=Bd.transparent}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.set=function(S){S.r===this.current.r&&S.g===this.current.g&&S.b===this.current.b&&S.a===this.current.a||(this.current=S,this.gl.uniform4f(this.location,S.r,S.g,S.b,S.a))},M}(kj),ql=new Float32Array(16),rl=function(z){function M(S,ia){z.call(this,S,ia);
this.current=ql}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.set=function(S){if(S[12]!==this.current[12]||S[0]!==this.current[0])return this.current=S,void this.gl.uniformMatrix4fv(this.location,!1,S);for(var ia=1;16>ia;ia++)if(S[ia]!==this.current[ia]){this.current=S;this.gl.uniformMatrix4fv(this.location,!1,S);break}},M}(kj),Bj=function(z,M,S){this.value=z;this.uniformNames=M.map(function(ia){return"u_"+ia});this.type=S};Bj.prototype.setUniform=
function(z,M,S){z.set(S.constantOr(this.value))};Bj.prototype.getBinding=function(z,M,S){return"color"===this.type?new Kk(z,M):new pk(z,M)};var Li=function(z,M){this.uniformNames=M.map(function(S){return"u_"+S});this.patternTo=this.patternFrom=null;this.pixelRatioTo=this.pixelRatioFrom=1};Li.prototype.setConstantPatternPositions=function(z,M){this.pixelRatioFrom=M.pixelRatio;this.pixelRatioTo=z.pixelRatio;this.patternFrom=M.tlbr;this.patternTo=z.tlbr};Li.prototype.setUniform=function(z,M,S,ia){(M=
"u_pattern_to"===ia?this.patternTo:"u_pattern_from"===ia?this.patternFrom:"u_pixel_ratio_to"===ia?this.pixelRatioTo:"u_pixel_ratio_from"===ia?this.pixelRatioFrom:null)&&z.set(M)};Li.prototype.getBinding=function(z,M,S){return"u_pattern"===S.substr(0,9)?new bl(z,M):new pk(z,M)};var Sg=function(z,M,S,ia){this.expression=z;this.type=S;this.maxValue=0;this.paintVertexAttributes=M.map(function(ta){return{name:"a_"+ta,type:"Float32",components:"color"===S?2:1,offset:0}});this.paintVertexArray=new ia};Sg.prototype.populatePaintArray=
function(z,M,S,ia,ta){S=this.paintVertexArray.length;M=this.expression.evaluate(new df(0),M,{},ia,[],ta);this.paintVertexArray.resize(z);this._setPaintValue(S,z,M)};Sg.prototype.updatePaintArray=function(z,M,S,ia){S=this.expression.evaluate({zoom:0},S,ia);this._setPaintValue(z,M,S)};Sg.prototype._setPaintValue=function(z,M,S){if("color"===this.type)for(S=Ae(S);z<M;z++)this.paintVertexArray.emplace(z,S[0],S[1]);else{for(;z<M;z++)this.paintVertexArray.emplace(z,S);this.maxValue=Math.max(this.maxValue,
Math.abs(S))}};Sg.prototype.upload=function(z){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=z.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Sg.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var zg=function(z,M,S,ia,ta,Ba){this.expression=z;this.uniformNames=
M.map(function(La){return"u_"+La+"_t"});this.type=S;this.useIntegerZoom=ia;this.zoom=ta;this.maxValue=0;this.paintVertexAttributes=M.map(function(La){return{name:"a_"+La,type:"Float32",components:"color"===S?4:2,offset:0}});this.paintVertexArray=new Ba};zg.prototype.populatePaintArray=function(z,M,S,ia,ta){S=this.expression.evaluate(new df(this.zoom),M,{},ia,[],ta);M=this.expression.evaluate(new df(this.zoom+1),M,{},ia,[],ta);ia=this.paintVertexArray.length;this.paintVertexArray.resize(z);this._setPaintValue(ia,
z,S,M)};zg.prototype.updatePaintArray=function(z,M,S,ia){var ta=this.expression.evaluate({zoom:this.zoom},S,ia);S=this.expression.evaluate({zoom:this.zoom+1},S,ia);this._setPaintValue(z,M,ta,S)};zg.prototype._setPaintValue=function(z,M,S,ia){if("color"===this.type)for(S=Ae(S),ia=Ae(ia);z<M;z++)this.paintVertexArray.emplace(z,S[0],S[1],ia[0],ia[1]);else{for(;z<M;z++)this.paintVertexArray.emplace(z,S,ia);this.maxValue=Math.max(this.maxValue,Math.abs(S),Math.abs(ia))}};zg.prototype.upload=function(z){this.paintVertexArray&&
this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=z.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};zg.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};zg.prototype.setUniform=function(z,M){M=c(this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(M.zoom):M.zoom,this.zoom,this.zoom+
1),0,1);z.set(M)};zg.prototype.getBinding=function(z,M,S){return new pk(z,M)};var rh=function(z,M,S,ia,ta,Ba){this.expression=z;this.type=M;this.useIntegerZoom=S;this.zoom=ia;this.layerId=Ba;this.zoomInPaintVertexArray=new ta;this.zoomOutPaintVertexArray=new ta};rh.prototype.populatePaintArray=function(z,M,S){var ia=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(z);this.zoomOutPaintVertexArray.resize(z);this._setPaintValues(ia,z,M.patterns&&M.patterns[this.layerId],S)};rh.prototype.updatePaintArray=
function(z,M,S,ia,ta){this._setPaintValues(z,M,S.patterns&&S.patterns[this.layerId],ta)};rh.prototype._setPaintValues=function(z,M,S,ia){if(ia&&S){var ta=ia[S.min],Ba=ia[S.mid];S=ia[S.max];if(ta&&Ba&&S)for(;z<M;z++)this.zoomInPaintVertexArray.emplace(z,Ba.tl[0],Ba.tl[1],Ba.br[0],Ba.br[1],ta.tl[0],ta.tl[1],ta.br[0],ta.br[1],Ba.pixelRatio,ta.pixelRatio),this.zoomOutPaintVertexArray.emplace(z,Ba.tl[0],Ba.tl[1],Ba.br[0],Ba.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],Ba.pixelRatio,S.pixelRatio)}};rh.prototype.upload=
function(z){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=z.createVertexBuffer(this.zoomInPaintVertexArray,Aj.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=z.createVertexBuffer(this.zoomOutPaintVertexArray,Aj.members,this.expression.isStateDependent))};rh.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();
this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var dh=function(z,M,S,ia){this.binders={};this.layoutAttributes=ia;this._buffers=[];ia=[];for(var ta in z.paint._values)if(S(ta)){var Ba=z.paint.get(ta);if(Ba instanceof Nf&&cb(Ba.property.specification)){var La={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],
"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[ta]||[ta.replace(z.type+"-","").replace(/-/g,"_")],Wa=Ba.value,kb=Ba.property.specification.type,vb=Ba.property.useIntegerZoom;Ba=Ba.property.specification["property-type"];
Ba="cross-faded"===Ba||"cross-faded-data-driven"===Ba;if("constant"===Wa.kind)this.binders[ta]=Ba?new Li(Wa.value,La):new Bj(Wa.value,La,kb),ia.push("/u_"+ta);else if("source"===Wa.kind||Ba){var Ib=Be(ta,kb,"source");this.binders[ta]=Ba?new rh(Wa,kb,vb,M,Ib,z.id):new Sg(Wa,La,kb,Ib);ia.push("/a_"+ta)}else Ba=Be(ta,kb,"composite"),this.binders[ta]=new zg(Wa,La,kb,vb,M,Ba),ia.push("/z_"+ta)}}this.cacheKey=ia.sort().join("")};dh.prototype.getMaxValue=function(z){z=this.binders[z];return z instanceof
Sg||z instanceof zg?z.maxValue:0};dh.prototype.populatePaintArrays=function(z,M,S,ia,ta){for(var Ba in this.binders){var La=this.binders[Ba];(La instanceof Sg||La instanceof zg||La instanceof rh)&&La.populatePaintArray(z,M,S,ia,ta)}};dh.prototype.setConstantPatternPositions=function(z,M){for(var S in this.binders){var ia=this.binders[S];ia instanceof Li&&ia.setConstantPatternPositions(z,M)}};dh.prototype.updatePaintArrays=function(z,M,S,ia,ta){var Ba=!1,La;for(La in z)for(var Wa=0,kb=M.getPositions(La);Wa<
kb.length;Wa+=1){var vb=kb[Wa],Ib=S.feature(vb.index),Sb;for(Sb in this.binders){var ic=this.binders[Sb];(ic instanceof Sg||ic instanceof zg||ic instanceof rh)&&!0===ic.expression.isStateDependent&&(Ba=ia.paint.get(Sb),ic.expression=Ba.value,ic.updatePaintArray(vb.start,vb.end,Ib,z[La],ta),Ba=!0)}}return Ba};dh.prototype.defines=function(){var z=[],M;for(M in this.binders){var S=this.binders[M];(S instanceof Bj||S instanceof Li)&&z.push.apply(z,S.uniformNames.map(function(ia){return"#define HAS_UNIFORM_"+
ia}))}return z};dh.prototype.getPaintVertexBuffers=function(){return this._buffers};dh.prototype.getUniforms=function(z,M){var S=[],ia;for(ia in this.binders){var ta=this.binders[ia];if(ta instanceof Bj||ta instanceof Li||ta instanceof zg)for(var Ba=0,La=ta.uniformNames;Ba<La.length;Ba+=1){var Wa=La[Ba];if(M[Wa]){var kb=ta.getBinding(z,M[Wa],Wa);S.push({name:Wa,property:ia,binding:kb})}}}return S};dh.prototype.setUniforms=function(z,M,S,ia){for(z=0;z<M.length;z+=1){var ta=M[z],Ba=ta.name,La=ta.property;
this.binders[La].setUniform(ta.binding,ia,S.get(La),Ba)}};dh.prototype.updatePaintBuffers=function(z){for(var M in this._buffers=[],this.binders){var S=this.binders[M];z&&S instanceof rh?(S=2===z.fromScale?S.zoomInPaintVertexBuffer:S.zoomOutPaintVertexBuffer)&&this._buffers.push(S):(S instanceof Sg||S instanceof zg)&&S.paintVertexBuffer&&this._buffers.push(S.paintVertexBuffer)}};dh.prototype.upload=function(z){for(var M in this.binders){var S=this.binders[M];(S instanceof Sg||S instanceof zg||S instanceof
rh)&&S.upload(z)}this.updatePaintBuffers()};dh.prototype.destroy=function(){for(var z in this.binders){var M=this.binders[z];(M instanceof Sg||M instanceof zg||M instanceof rh)&&M.destroy()}};var sh=function(z,M,S,ia){void 0===ia&&(ia=function(){return!0});this.programConfigurations={};for(var ta=0;ta<M.length;ta+=1){var Ba=M[ta];this.programConfigurations[Ba.id]=new dh(Ba,S,ia,z)}this.needsUpload=!1;this._featureMap=new wi;this._bufferOffset=0};sh.prototype.populatePaintArrays=function(z,M,S,ia,
ta,Ba){for(var La in this.programConfigurations)this.programConfigurations[La].populatePaintArrays(z,M,ia,ta,Ba);void 0!==M.id&&this._featureMap.add(M.id,S,this._bufferOffset,z);this._bufferOffset=z;this.needsUpload=!0};sh.prototype.updatePaintArrays=function(z,M,S,ia){for(var ta=0;ta<S.length;ta+=1){var Ba=S[ta];this.needsUpload=this.programConfigurations[Ba.id].updatePaintArrays(z,this._featureMap,M,Ba,ia)||this.needsUpload}};sh.prototype.get=function(z){return this.programConfigurations[z]};sh.prototype.upload=
function(z){if(this.needsUpload){for(var M in this.programConfigurations)this.programConfigurations[M].upload(z);this.needsUpload=!1}};sh.prototype.destroy=function(){for(var z in this.programConfigurations)this.programConfigurations[z].destroy()};Yc("ConstantBinder",Bj);Yc("CrossFadedConstantBinder",Li);Yc("SourceExpressionBinder",Sg);Yc("CrossFadedCompositeBinder",rh);Yc("CompositeExpressionBinder",zg);Yc("ProgramConfiguration",dh,{omit:["_buffers"]});Yc("ProgramConfigurationSet",sh);var Oi={min:-1*
Math.pow(2,14),max:Math.pow(2,14)-1},eh=function(z){this.zoom=z.zoom;this.overscaling=z.overscaling;this.layers=z.layers;this.layerIds=this.layers.map(function(M){return M.id});this.index=z.index;this.hasPattern=!1;this.layoutVertexArray=new Hi;this.indexArray=new ji;this.segments=new Hf;this.programConfigurations=new sh(Bk,z.layers,z.zoom);this.stateDependentLayerIds=this.layers.filter(function(M){return M.isStateDependent()}).map(function(M){return M.id})};eh.prototype.populate=function(z,M,S){var ia=
this.layers[0],ta=[],Ba=null;"circle"===ia.type&&(Ba=ia.layout.get("circle-sort-key"));for(ia=0;ia<z.length;ia+=1){var La=z[ia],Wa=La.feature,kb=La.id,vb=La.index;La=La.sourceLayerIndex;var Ib=this.layers[0]._featureFilter.needGeometry,Sb={type:Wa.type,id:kb,properties:Wa.properties,geometry:Ib?Ge(Wa):[]};this.layers[0]._featureFilter.filter(new df(this.zoom),Sb,S)&&(Ib||(Sb.geometry=Ge(Wa)),Ib=Ba?Ba.evaluate(Sb,{},S):void 0,ta.push({id:kb,properties:Wa.properties,type:Wa.type,sourceLayerIndex:La,
index:vb,geometry:Sb.geometry,patterns:{},sortKey:Ib}))}Ba&&ta.sort(function(ic,ec){return ic.sortKey-ec.sortKey});for(Ba=0;Ba<ta.length;Ba+=1)ia=ta[Ba],Wa=ia.geometry,kb=ia.index,vb=ia.sourceLayerIndex,La=z[kb].feature,this.addFeature(ia,Wa,kb,S),M.featureIndex.insert(La,Wa,kb,vb,this.index)};eh.prototype.update=function(z,M,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(z,M,this.stateDependentLayers,S)};eh.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};
eh.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};eh.prototype.upload=function(z){this.uploaded||(this.layoutVertexBuffer=z.createVertexBuffer(this.layoutVertexArray,Bk),this.indexBuffer=z.createIndexBuffer(this.indexArray));this.programConfigurations.upload(z);this.uploaded=!0};eh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};
eh.prototype.addFeature=function(z,M,S,ia){for(var ta=0;ta<M.length;ta+=1)for(var Ba=0,La=M[ta];Ba<La.length;Ba+=1){var Wa=La[Ba],kb=Wa.x;Wa=Wa.y;if(!(0>kb||8192<=kb||0>Wa||8192<=Wa)){var vb=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,z.sortKey),Ib=vb.vertexLength;Ue(this.layoutVertexArray,kb,Wa,-1,-1);Ue(this.layoutVertexArray,kb,Wa,1,-1);Ue(this.layoutVertexArray,kb,Wa,1,1);Ue(this.layoutVertexArray,kb,Wa,-1,1);this.indexArray.emplaceBack(Ib,Ib+1,Ib+2);this.indexArray.emplaceBack(Ib,
Ib+3,Ib+2);vb.vertexLength+=4;vb.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,z,S,{},ia)};Yc("CircleBucket",eh,{omit:["layers"]});var Dk=new Jg({"circle-sort-key":new se(Xb.layout_circle["circle-sort-key"])}),Zk={paint:new Jg({"circle-radius":new se(Xb.paint_circle["circle-radius"]),"circle-color":new se(Xb.paint_circle["circle-color"]),"circle-blur":new se(Xb.paint_circle["circle-blur"]),"circle-opacity":new se(Xb.paint_circle["circle-opacity"]),
"circle-translate":new Ud(Xb.paint_circle["circle-translate"]),"circle-translate-anchor":new Ud(Xb.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ud(Xb.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ud(Xb.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new se(Xb.paint_circle["circle-stroke-width"]),"circle-stroke-color":new se(Xb.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new se(Xb.paint_circle["circle-stroke-opacity"])}),layout:Dk},
Lg="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var z=arguments,M=0,S=arguments.length;S--;)M+=z[S]*z[S];return Math.sqrt(M)});var ii=new Lg(3);Lg!=Float32Array&&(ii[0]=0,ii[1]=0,ii[2]=0);(function(){var z=new Lg(4);Lg!=Float32Array&&(z[0]=0,z[1]=0,z[2]=0,z[3]=0)})();var cl=(function(){var z=new Lg(2);Lg!=Float32Array&&(z[0]=0,z[1]=0)}(),function(z){function M(S){z.call(this,S,Zk)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=
M,M.prototype.createBucket=function(S){return new eh(S)},M.prototype.queryRadius=function(S){return Bc("circle-radius",this,S)+Bc("circle-stroke-width",this,S)+Tc(this.paint.get("circle-translate"))},M.prototype.queryIntersectsFeature=function(S,ia,ta,Ba,La,Wa,kb,vb){S=jc(S,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Wa.angle,kb);La=this.paint.get("circle-radius").evaluate(ia,ta)+this.paint.get("circle-stroke-width").evaluate(ia,ta);ta=(ia="map"===this.paint.get("circle-pitch-alignment"))?
S:function(uc,tc){return uc.map(function(Qc){return Nb(Qc,tc)})}(S,vb);kb=ia?La*kb:La;for(S=0;S<Ba.length;S+=1){La=0;for(var Ib=Ba[S];La<Ib.length;La+=1){var Sb=Ib[La],ic=ia?Sb:Nb(Sb,vb),ec=kb;Sb=vd([],[Sb.x,Sb.y,0,1],vb);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ec*=Sb[3]/Wa.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ec*=Wa.cameraToCenterDistance/Sb[3]),hf(ta,
ic,ec))return!0}}return!1},M}(ch)),Xj=function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M}(eh);Yc("HeatmapBucket",Xj,{omit:["layers"]});var Pi=function(z,M){dc(this,z,1,M)};Pi.prototype.resize=function(z){Mc(this,z,1)};Pi.prototype.clone=function(){return new Pi({width:this.width,height:this.height},new Uint8Array(this.data))};Pi.copy=function(z,M,S,ia,ta){cd(z,M,S,ia,ta,1)};var Yf=function(z,M){dc(this,z,4,M)};Yf.prototype.resize=
function(z){Mc(this,z,4)};Yf.prototype.replace=function(z,M){M?this.data.set(z):this.data=z instanceof Uint8ClampedArray?new Uint8Array(z.buffer):z};Yf.prototype.clone=function(){return new Yf({width:this.width,height:this.height},new Uint8Array(this.data))};Yf.copy=function(z,M,S,ia,ta){cd(z,M,S,ia,ta,4)};Yc("AlphaImage",Pi);Yc("RGBAImage",Yf);var Mf={paint:new Jg({"heatmap-radius":new se(Xb.paint_heatmap["heatmap-radius"]),"heatmap-weight":new se(Xb.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ud(Xb.paint_heatmap["heatmap-intensity"]),
"heatmap-color":new Ej(Xb.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ud(Xb.paint_heatmap["heatmap-opacity"])})},dl=function(z){function M(S){z.call(this,S,Mf);this._updateColorRamp()}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.createBucket=function(S){return new Xj(S)},M.prototype._handleSpecialPaintPropertyUpdate=function(S){"heatmap-color"===S&&this._updateColorRamp()},M.prototype._updateColorRamp=function(){this.colorRamp=Rc(this._transitionablePaint._values["heatmap-color"].value.expression,
"heatmapDensity");this.colorRampTexture=null},M.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},M.prototype.queryRadius=function(){return 0},M.prototype.queryIntersectsFeature=function(){return!1},M.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},M}(ch),fj={paint:new Jg({"hillshade-illumination-direction":new Ud(Xb.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ud(Xb.paint_hillshade["hillshade-illumination-anchor"]),
"hillshade-exaggeration":new Ud(Xb.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ud(Xb.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ud(Xb.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ud(Xb.paint_hillshade["hillshade-accent-color"])})},qk=function(z){function M(S){z.call(this,S,fj)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.hasOffscreenPass=function(){return 0!==
this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},M}(ch),Lk=Md([{name:"a_pos",components:2,type:"Int16"}],4).members;$c.deviation=function(z,M,S,ia){var ta=M&&M.length,Ba=Math.abs(mi(z,0,ta?M[0]*S:z.length,S));if(ta){ta=0;for(var La=M.length;ta<La;ta++)Ba-=Math.abs(mi(z,M[ta]*S,ta<La-1?M[ta+1]*S:z.length,S))}for(ta=M=0;ta<ia.length;ta+=3){La=ia[ta]*S;var Wa=ia[ta+1]*S,kb=ia[ta+2]*S;M+=Math.abs((z[La]-z[kb])*(z[Wa+1]-z[La+1])-(z[La]-z[Wa])*(z[kb+1]-z[La+1]))}return 0===Ba&&0===M?
0:Math.abs((M-Ba)/Ba)};$c.flatten=function(z){for(var M=z[0][0].length,S={vertices:[],holes:[],dimensions:M},ia=0,ta=0;ta<z.length;ta++){for(var Ba=0;Ba<z[ta].length;Ba++)for(var La=0;La<M;La++)S.vertices.push(z[ta][Ba][La]);0<ta&&S.holes.push(ia+=z[ta-1].length)}return S};$c.default=$c;var Mh=function(z){this.zoom=z.zoom;this.overscaling=z.overscaling;this.layers=z.layers;this.layerIds=this.layers.map(function(M){return M.id});this.index=z.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=
new Hi;this.indexArray=new ji;this.indexArray2=new Ni;this.programConfigurations=new sh(Lk,z.layers,z.zoom);this.segments=new Hf;this.segments2=new Hf;this.stateDependentLayerIds=this.layers.filter(function(M){return M.isStateDependent()}).map(function(M){return M.id})};Mh.prototype.populate=function(z,M,S){this.hasPattern=zh("fill",this.layers,M);for(var ia=this.layers[0].layout.get("fill-sort-key"),ta=[],Ba=0;Ba<z.length;Ba+=1){var La=z[Ba],Wa=La.feature,kb=La.id,vb=La.index;La=La.sourceLayerIndex;
var Ib=this.layers[0]._featureFilter.needGeometry,Sb={type:Wa.type,id:kb,properties:Wa.properties,geometry:Ib?Ge(Wa):[]};this.layers[0]._featureFilter.filter(new df(this.zoom),Sb,S)&&(Ib||(Sb.geometry=Ge(Wa)),Ib=ia?ia.evaluate(Sb,{},S,M.availableImages):void 0,ta.push({id:kb,properties:Wa.properties,type:Wa.type,sourceLayerIndex:La,index:vb,geometry:Sb.geometry,patterns:{},sortKey:Ib}))}ia&&ta.sort(function(ic,ec){return ic.sortKey-ec.sortKey});for(ia=0;ia<ta.length;ia+=1)vb=ta[ia],Ba=vb.geometry,
Wa=vb.index,kb=vb.sourceLayerIndex,this.hasPattern?(vb=gh("fill",this.layers,vb,this.zoom,M),this.patternFeatures.push(vb)):this.addFeature(vb,Ba,Wa,S,{}),M.featureIndex.insert(z[Wa].feature,Ba,Wa,kb,this.index)};Mh.prototype.update=function(z,M,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(z,M,this.stateDependentLayers,S)};Mh.prototype.addFeatures=function(z,M,S){z=0;for(var ia=this.patternFeatures;z<ia.length;z+=1){var ta=ia[z];this.addFeature(ta,ta.geometry,
ta.index,M,S)}};Mh.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Mh.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Mh.prototype.upload=function(z){this.uploaded||(this.layoutVertexBuffer=z.createVertexBuffer(this.layoutVertexArray,Lk),this.indexBuffer=z.createIndexBuffer(this.indexArray),this.indexBuffer2=z.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(z);this.uploaded=!0};Mh.prototype.destroy=function(){this.layoutVertexBuffer&&
(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};Mh.prototype.addFeature=function(z,M,S,ia,ta){var Ba=0;for(M=Si(M,500);Ba<M.length;Ba+=1){for(var La=M[Ba],Wa=0,kb=0,vb=La;kb<vb.length;kb+=1)Wa+=vb[kb].length;kb=this.segments.prepareSegment(Wa,this.layoutVertexArray,this.indexArray);vb=kb.vertexLength;for(var Ib=[],Sb=[],ic=0,ec=La;ic<ec.length;ic+=1){var uc=ec[ic];if(0!==
uc.length){uc!==La[0]&&Sb.push(Ib.length/2);var tc=this.segments2.prepareSegment(uc.length,this.layoutVertexArray,this.indexArray2),Qc=tc.vertexLength;this.layoutVertexArray.emplaceBack(uc[0].x,uc[0].y);this.indexArray2.emplaceBack(Qc+uc.length-1,Qc);Ib.push(uc[0].x);Ib.push(uc[0].y);for(var wd=1;wd<uc.length;wd++)this.layoutVertexArray.emplaceBack(uc[wd].x,uc[wd].y),this.indexArray2.emplaceBack(Qc+wd-1,Qc+wd),Ib.push(uc[wd].x),Ib.push(uc[wd].y);tc.vertexLength+=uc.length;tc.primitiveLength+=uc.length}}La=
$c(Ib,Sb);for(Ib=0;Ib<La.length;Ib+=3)this.indexArray.emplaceBack(vb+La[Ib],vb+La[Ib+1],vb+La[Ib+2]);kb.vertexLength+=Wa;kb.primitiveLength+=La.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,z,S,ta,ia)};Yc("FillBucket",Mh,{omit:["layers","patternFeatures"]});var sl=new Jg({"fill-sort-key":new se(Xb.layout_fill["fill-sort-key"])}),Mk={paint:new Jg({"fill-antialias":new Ud(Xb.paint_fill["fill-antialias"]),"fill-opacity":new se(Xb.paint_fill["fill-opacity"]),"fill-color":new se(Xb.paint_fill["fill-color"]),
"fill-outline-color":new se(Xb.paint_fill["fill-outline-color"]),"fill-translate":new Ud(Xb.paint_fill["fill-translate"]),"fill-translate-anchor":new Ud(Xb.paint_fill["fill-translate-anchor"]),"fill-pattern":new Uj(Xb.paint_fill["fill-pattern"])}),layout:sl},Nk=function(z){function M(S){z.call(this,S,Mk)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.recalculate=function(S,ia){z.prototype.recalculate.call(this,S,ia);S=this.paint._values["fill-outline-color"];
"constant"===S.value.kind&&void 0===S.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},M.prototype.createBucket=function(S){return new Mh(S)},M.prototype.queryRadius=function(){return Tc(this.paint.get("fill-translate"))},M.prototype.queryIntersectsFeature=function(S,ia,ta,Ba,La,Wa,kb){return pf(jc(S,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Wa.angle,kb),Ba)},M.prototype.isTileClipped=function(){return!0},M}(ch),Ok=Md([{name:"a_pos",
components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;Cg.types=["Unknown","Point","LineString","Polygon"];Cg.prototype.loadGeometry=function(){var z=this._pbf;z.pos=this._geometry;for(var M,S=z.readVarint()+z.pos,ia=1,ta=0,Ba=0,La=0,Wa=[];z.pos<S;)if(0>=ta&&(ta=z.readVarint(),ia=7&ta,ta>>=3),ta--,1===ia||2===ia)Ba+=z.readSVarint(),La+=z.readSVarint(),1===ia&&(M&&Wa.push(M),M=[]),M.push(new ge(Ba,La));else{if(7!==ia)throw Error("unknown command "+ia);M&&M.push(M[0].clone())}return M&&
Wa.push(M),Wa};Cg.prototype.bbox=function(){var z=this._pbf;z.pos=this._geometry;for(var M=z.readVarint()+z.pos,S=1,ia=0,ta=0,Ba=0,La=1/0,Wa=-1/0,kb=1/0,vb=-1/0;z.pos<M;)if(0>=ia&&(ia=z.readVarint(),S=7&ia,ia>>=3),ia--,1===S||2===S)(ta+=z.readSVarint())<La&&(La=ta),ta>Wa&&(Wa=ta),(Ba+=z.readSVarint())<kb&&(kb=Ba),Ba>vb&&(vb=Ba);else if(7!==S)throw Error("unknown command "+S);return[La,kb,Wa,vb]};Cg.prototype.toGeoJSON=function(z,M,S){function ia(kb){for(var vb=0;vb<kb.length;vb++){var Ib=kb[vb];kb[vb]=
[360*(Ib.x+Ba)/ta-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ib.y+La)/ta)*Math.PI/180))-90]}}var ta=this.extent*Math.pow(2,S),Ba=this.extent*z,La=this.extent*M;M=this.loadGeometry();S=Cg.types[this.type];switch(this.type){case 1:var Wa=[];for(z=0;z<M.length;z++)Wa[z]=M[z][0];ia(M=Wa);break;case 2:for(z=0;z<M.length;z++)ia(M[z]);break;case 3:for(M=function(kb){var vb=kb.length;if(1>=vb)return[kb];for(var Ib,Sb,ic=[],ec=0;ec<vb;ec++){for(var uc,tc=uc=void 0,Qc=kb[ec],wd=0,Ad=0,od=Qc.length,Od=od-
1;Ad<od;Od=Ad++)wd+=((uc=Qc[Od]).x-(tc=Qc[Ad]).x)*(tc.y+uc.y);uc=wd;0!==uc&&(void 0===Sb&&(Sb=0>uc),Sb===0>uc?(Ib&&ic.push(Ib),Ib=[kb[ec]]):Ib.push(kb[ec]))}return Ib&&ic.push(Ib),ic}(M),z=0;z<M.length;z++)for(Wa=0;Wa<M[z].length;Wa++)ia(M[z][Wa])}1===M.length?M=M[0]:S="Multi"+S;z={type:"Feature",geometry:{type:S,coordinates:M},properties:this.properties};return"id"in this&&(z.id=this.id),z};var Pk=rg;rg.prototype.feature=function(z){if(0>z||z>=this._features.length)throw Error("feature index out of bounds");
this._pbf.pos=this._features[z];z=this._pbf.readVarint()+this._pbf.pos;return new Cg(this._pbf,z,this.extent,this._keys,this._values)};var xi={VectorTile:function(z,M){this.layers=z.readFields(Ah,{},M)},VectorTileFeature:Cg,VectorTileLayer:Pk},Qk=xi.VectorTileFeature.types,Rk=Math.pow(2,13),Kh=function(z){this.zoom=z.zoom;this.overscaling=z.overscaling;this.layers=z.layers;this.layerIds=this.layers.map(function(M){return M.id});this.index=z.index;this.hasPattern=!1;this.layoutVertexArray=new ui;this.indexArray=
new ji;this.programConfigurations=new sh(Ok,z.layers,z.zoom);this.segments=new Hf;this.stateDependentLayerIds=this.layers.filter(function(M){return M.isStateDependent()}).map(function(M){return M.id})};Kh.prototype.populate=function(z,M,S){this.features=[];this.hasPattern=zh("fill-extrusion",this.layers,M);for(var ia=0;ia<z.length;ia+=1){var ta=z[ia],Ba=ta.feature,La=ta.id,Wa=ta.index;ta=ta.sourceLayerIndex;var kb=this.layers[0]._featureFilter.needGeometry,vb={type:Ba.type,id:La,properties:Ba.properties,
geometry:kb?Ge(Ba):[]};this.layers[0]._featureFilter.filter(new df(this.zoom),vb,S)&&(La={id:La,sourceLayerIndex:ta,index:Wa,geometry:kb?vb.geometry:Ge(Ba),properties:Ba.properties,type:Ba.type,patterns:{}},void 0!==Ba.id&&(La.id=Ba.id),this.hasPattern?this.features.push(gh("fill-extrusion",this.layers,La,this.zoom,M)):this.addFeature(La,La.geometry,Wa,S,{}),M.featureIndex.insert(Ba,La.geometry,Wa,ta,this.index,!0))}};Kh.prototype.addFeatures=function(z,M,S){z=0;for(var ia=this.features;z<ia.length;z+=
1){var ta=ia[z];this.addFeature(ta,ta.geometry,ta.index,M,S)}};Kh.prototype.update=function(z,M,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(z,M,this.stateDependentLayers,S)};Kh.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Kh.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Kh.prototype.upload=function(z){this.uploaded||(this.layoutVertexBuffer=z.createVertexBuffer(this.layoutVertexArray,
Ok),this.indexBuffer=z.createIndexBuffer(this.indexArray));this.programConfigurations.upload(z);this.uploaded=!0};Kh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Kh.prototype.addFeature=function(z,M,S,ia,ta){var Ba=0;for(M=Si(M,500);Ba<M.length;Ba+=1){for(var La=M[Ba],Wa=0,kb=0,vb=La;kb<vb.length;kb+=1)Wa+=vb[kb].length;kb=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray);vb=0;for(var Ib=La;vb<Ib.length;vb+=1){var Sb=Ib[vb];if(0!==Sb.length&&!((Ad=Sb).every(function(od){return 0>od.x})||Ad.every(function(od){return 8192<od.x})||Ad.every(function(od){return 0>od.y})||Ad.every(function(od){return 8192<od.y})))for(var ic=0,ec=0;ec<Sb.length;ec++){var uc=Sb[ec];if(1<=ec){var tc=Sb[ec-1];if(!(uc.x===tc.x&&(0>uc.x||8192<uc.x)||uc.y===tc.y&&(0>uc.y||8192<uc.y))){kb.vertexLength+4>Hf.MAX_VERTEX_ARRAY_LENGTH&&(kb=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray));var Qc=uc.sub(tc)._perp()._unit(),wd=tc.dist(uc);32768<ic+wd&&(ic=0);Qh(this.layoutVertexArray,uc.x,uc.y,Qc.x,Qc.y,0,0,ic);Qh(this.layoutVertexArray,uc.x,uc.y,Qc.x,Qc.y,0,1,ic);Qh(this.layoutVertexArray,tc.x,tc.y,Qc.x,Qc.y,0,0,ic+=wd);Qh(this.layoutVertexArray,tc.x,tc.y,Qc.x,Qc.y,0,1,ic);uc=kb.vertexLength;this.indexArray.emplaceBack(uc,uc+2,uc+1);this.indexArray.emplaceBack(uc+1,uc+2,uc+3);kb.vertexLength+=4;kb.primitiveLength+=2}}}}if(kb.vertexLength+Wa>Hf.MAX_VERTEX_ARRAY_LENGTH&&
(kb=this.segments.prepareSegment(Wa,this.layoutVertexArray,this.indexArray)),"Polygon"===Qk[z.type]){Ib=[];Sb=[];vb=kb.vertexLength;ic=0;for(ec=La;ic<ec.length;ic+=1)if(uc=ec[ic],0!==uc.length)for(uc!==La[0]&&Sb.push(Ib.length/2),tc=0;tc<uc.length;tc++)Qc=uc[tc],Qh(this.layoutVertexArray,Qc.x,Qc.y,0,0,1,1,0),Ib.push(Qc.x),Ib.push(Qc.y);La=$c(Ib,Sb);for(Ib=0;Ib<La.length;Ib+=3)this.indexArray.emplaceBack(vb+La[Ib],vb+La[Ib+2],vb+La[Ib+1]);kb.primitiveLength+=La.length/3;kb.vertexLength+=Wa}}var Ad;
this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,z,S,ta,ia)};Yc("FillExtrusionBucket",Kh,{omit:["layers","features"]});var el={paint:new Jg({"fill-extrusion-opacity":new Ud(Xb["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new se(Xb["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ud(Xb["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ud(Xb["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),
"fill-extrusion-pattern":new Uj(Xb["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new se(Xb["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new se(Xb["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ud(Xb["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},tl=function(z){function M(S){z.call(this,S,el)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.createBucket=
function(S){return new Kh(S)},M.prototype.queryRadius=function(){return Tc(this.paint.get("fill-extrusion-translate"))},M.prototype.is3D=function(){return!0},M.prototype.queryIntersectsFeature=function(S,ia,ta,Ba,La,Wa,kb,vb){La=jc(S,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Wa.angle,kb);S=this.paint.get("fill-extrusion-height").evaluate(ia,ta);ia=this.paint.get("fill-extrusion-base").evaluate(ia,ta);ta=function(Ib,Sb,ic,ec){ic=[];for(ec=0;ec<Ib.length;ec+=
1){var uc=Ib[ec];uc=[uc.x,uc.y,0,1];vd(uc,uc,Sb);ic.push(new ge(uc[0]/uc[3],uc[1]/uc[3]))}return ic}(La,vb);Ba=function(Ib,Sb,ic,ec){var uc=[],tc=[],Qc=ec[8]*Sb,wd=ec[9]*Sb,Ad=ec[10]*Sb;Sb*=ec[11];var od=ec[8]*ic,Od=ec[9]*ic,Nd=ec[10]*ic;ic*=ec[11];for(var Sd=0;Sd<Ib.length;Sd+=1){for(var be=[],je=[],qe=0,re=Ib[Sd];qe<re.length;qe+=1){var he=re[qe],le=he.x,Ee=he.y;he=ec[0]*le+ec[4]*Ee+ec[12];var ce=ec[1]*le+ec[5]*Ee+ec[13],Yd=ec[2]*le+ec[6]*Ee+ec[14],de=ec[3]*le+ec[7]*Ee+ec[15];le=Yd+Ad;Ee=de+Sb;
var Me=he+od,kf=ce+Od;Yd+=Nd;de+=ic;he=new ge((he+Qc)/Ee,(ce+wd)/Ee);he.z=le/Ee;be.push(he);he=new ge(Me/de,kf/de);he.z=Yd/de;je.push(he)}uc.push(be);tc.push(je)}return[uc,tc]}(Ba,ia,S,vb);return function(Ib,Sb,ic){var ec=1/0;pf(ic,Sb)&&(ec=Sh(ic,Sb[0]));for(var uc=0;uc<Sb.length;uc++)for(var tc=Sb[uc],Qc=Ib[uc],wd=0;wd<tc.length-1;wd++){var Ad=tc[wd];Ad=[Ad,tc[wd+1],Qc[wd+1],Qc[wd],Ad];uf(ic,Ad)&&(ec=Math.min(ec,Sh(ic,Ad)))}return ec!==1/0&&ec}(Ba[0],Ba[1],ta)},M}(ch),R=Md([{name:"a_pos_normal",
components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ja=xi.VectorTileFeature.types,ua=Math.cos(Math.PI/180*37.5),Ca=Math.pow(2,14)/.5,Ea=function(z){this.zoom=z.zoom;this.overscaling=z.overscaling;this.layers=z.layers;this.layerIds=this.layers.map(function(M){return M.id});this.index=z.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new Ih;this.indexArray=new ji;this.programConfigurations=new sh(R,z.layers,z.zoom);this.segments=new Hf;this.stateDependentLayerIds=
this.layers.filter(function(M){return M.isStateDependent()}).map(function(M){return M.id})};Ea.prototype.populate=function(z,M,S){this.hasPattern=zh("line",this.layers,M);for(var ia=this.layers[0].layout.get("line-sort-key"),ta=[],Ba=0;Ba<z.length;Ba+=1){var La=z[Ba],Wa=La.feature,kb=La.id,vb=La.index;La=La.sourceLayerIndex;var Ib=this.layers[0]._featureFilter.needGeometry,Sb={type:Wa.type,id:kb,properties:Wa.properties,geometry:Ib?Ge(Wa):[]};this.layers[0]._featureFilter.filter(new df(this.zoom),
Sb,S)&&(Ib||(Sb.geometry=Ge(Wa)),Ib=ia?ia.evaluate(Sb,{},S):void 0,ta.push({id:kb,properties:Wa.properties,type:Wa.type,sourceLayerIndex:La,index:vb,geometry:Sb.geometry,patterns:{},sortKey:Ib}))}ia&&ta.sort(function(ic,ec){return ic.sortKey-ec.sortKey});for(ia=0;ia<ta.length;ia+=1)vb=ta[ia],Ba=vb.geometry,Wa=vb.index,kb=vb.sourceLayerIndex,this.hasPattern?(vb=gh("line",this.layers,vb,this.zoom,M),this.patternFeatures.push(vb)):this.addFeature(vb,Ba,Wa,S,{}),M.featureIndex.insert(z[Wa].feature,Ba,
Wa,kb,this.index)};Ea.prototype.update=function(z,M,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(z,M,this.stateDependentLayers,S)};Ea.prototype.addFeatures=function(z,M,S){z=0;for(var ia=this.patternFeatures;z<ia.length;z+=1){var ta=ia[z];this.addFeature(ta,ta.geometry,ta.index,M,S)}};Ea.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Ea.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Ea.prototype.upload=
function(z){this.uploaded||(this.layoutVertexBuffer=z.createVertexBuffer(this.layoutVertexArray,R),this.indexBuffer=z.createIndexBuffer(this.indexArray));this.programConfigurations.upload(z);this.uploaded=!0};Ea.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Ea.prototype.addFeature=function(z,M,S,ia,ta){var Ba=this.layers[0].layout,La=Ba.get("line-join").evaluate(z,{}),
Wa=Ba.get("line-cap"),kb=Ba.get("line-miter-limit");Ba=Ba.get("line-round-limit");for(var vb=0;vb<M.length;vb+=1)this.addLine(M[vb],z,La,Wa,kb,Ba);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,z,S,ta,ia)};Ea.prototype.addLine=function(z,M,S,ia,ta,Ba){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,M.properties&&M.properties.hasOwnProperty("mapbox_clip_start")&&M.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+M.properties.mapbox_clip_start;
this.clipEnd=+M.properties.mapbox_clip_end;for(var La=0;La<z.length-1;La++)this.totalDistance+=z[La].dist(z[La+1]);this.updateScaledDistance()}M="Polygon"===ja[M.type];for(La=z.length;2<=La&&z[La-1].equals(z[La-2]);)La--;for(var Wa=0;Wa<La-1&&z[Wa].equals(z[Wa+1]);)Wa++;if(!(La<(M?3:2))){"bevel"===S&&(ta=1.05);var kb,vb=16>=this.overscaling?122880/(512*this.overscaling):0,Ib=this.segments.prepareSegment(10*La,this.layoutVertexArray,this.indexArray),Sb=void 0,ic=void 0,ec=void 0,uc=void 0;this.e1=
this.e2=-1;M&&(uc=z[Wa].sub(kb=z[La-2])._unit()._perp());for(var tc=Wa;tc<La;tc++)if(!(ic=tc===La-1?M?z[Wa+1]:void 0:z[tc+1])||!z[tc].equals(ic)){uc&&(ec=uc);kb&&(Sb=kb);kb=z[tc];uc=ic?ic.sub(kb)._unit()._perp():ec;var Qc=(ec=ec||uc).add(uc);0===Qc.x&&0===Qc.y||Qc._unit();var wd=ec.x*uc.x+ec.y*uc.y,Ad=Qc.x*uc.x+Qc.y*uc.y,od=0!==Ad?1/Ad:1/0,Od=2*Math.sqrt(2-2*Ad);Ad=Ad<ua&&Sb&&ic;var Nd=0<ec.x*uc.y-ec.y*uc.x;if(Ad&&tc>Wa){var Sd=kb.dist(Sb);Sd>2*vb&&(Sd=kb.sub(kb.sub(Sb)._mult(vb/Sd)._round()),this.updateDistance(Sb,
Sd),this.addCurrentVertex(Sd,ec,0,0,Ib),Sb=Sd)}var be=Sb&&ic;Sd=be?S:M?"butt":ia;if(be&&"round"===Sd&&(od<Ba?Sd="miter":2>=od&&(Sd="fakeround")),"miter"===Sd&&od>ta&&(Sd="bevel"),"bevel"===Sd&&(2<od&&(Sd="flipbevel"),od<ta&&(Sd="miter")),Sb&&this.updateDistance(Sb,kb),"miter"===Sd)Qc._mult(od),this.addCurrentVertex(kb,Qc,0,0,Ib);else if("flipbevel"===Sd)100<od?Qc=uc.mult(-1):(wd=od*ec.add(uc).mag()/ec.sub(uc).mag(),Qc._perp()._mult(wd*(Nd?-1:1))),this.addCurrentVertex(kb,Qc,0,0,Ib),this.addCurrentVertex(kb,
Qc.mult(-1),0,0,Ib);else if("bevel"===Sd||"fakeround"===Sd){od=-Math.sqrt(od*od-1);Qc=Nd?od:0;od=Nd?0:od;if(Sb&&this.addCurrentVertex(kb,ec,Qc,od,Ib),"fakeround"===Sd)for(Od=Math.round(180*Od/Math.PI/20),Sd=1;Sd<Od;Sd++){be=Sd/Od;if(.5!==be){var je=be-.5;be+=be*je*(be-1)*((1.0904+wd*(wd*(3.55645-1.43519*wd)-3.2452))*je*je+(.848013+wd*(.215638*wd-1.06021)))}be=uc.sub(ec)._mult(be)._add(ec)._unit()._mult(Nd?-1:1);this.addHalfVertex(kb,be.x,be.y,!1,Nd,0,Ib)}ic&&this.addCurrentVertex(kb,uc,-Qc,-od,Ib)}else"butt"===
Sd?this.addCurrentVertex(kb,Qc,0,0,Ib):"square"===Sd?(wd=Sb?1:-1,this.addCurrentVertex(kb,Qc,wd,wd,Ib)):"round"===Sd&&(Sb&&(this.addCurrentVertex(kb,ec,0,0,Ib),this.addCurrentVertex(kb,ec,1,1,Ib,!0)),ic&&(this.addCurrentVertex(kb,uc,-1,-1,Ib,!0),this.addCurrentVertex(kb,uc,0,0,Ib)));Ad&&tc<La-1&&(Ad=kb.dist(ic),Ad>2*vb&&(Ad=kb.add(ic.sub(kb)._mult(vb/Ad)._round()),this.updateDistance(kb,Ad),this.addCurrentVertex(Ad,uc,0,0,Ib),kb=Ad))}}};Ea.prototype.addCurrentVertex=function(z,M,S,ia,ta,Ba){void 0===
Ba&&(Ba=!1);var La=M.y*ia-M.x,Wa=-M.y-M.x*ia;this.addHalfVertex(z,M.x+M.y*S,M.y-M.x*S,Ba,!1,S,ta);this.addHalfVertex(z,La,Wa,Ba,!0,-ia,ta);this.distance>Ca/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(z,M,S,ia,ta,Ba))};Ea.prototype.addHalfVertex=function(z,M,S,ia,ta,Ba,La){var Wa=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((z.x<<1)+(ia?1:0),(z.y<<1)+(ta?1:0),Math.round(63*M)+128,Math.round(63*S)+128,1+(0===Ba?0:0>Ba?-1:1)|(63&Wa)<<2,Wa>>6);z=La.vertexLength++;0<=
this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,z),La.primitiveLength++);ta?this.e2=z:this.e1=z};Ea.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Ca-1):this.distance};Ea.prototype.updateDistance=function(z,M){this.distance+=z.dist(M);this.updateScaledDistance()};Yc("LineBucket",Ea,{omit:["layers","patternFeatures"]});var Ja=new Jg({"line-cap":new Ud(Xb.layout_line["line-cap"]),
"line-join":new se(Xb.layout_line["line-join"]),"line-miter-limit":new Ud(Xb.layout_line["line-miter-limit"]),"line-round-limit":new Ud(Xb.layout_line["line-round-limit"]),"line-sort-key":new se(Xb.layout_line["line-sort-key"])}),Za={paint:new Jg({"line-opacity":new se(Xb.paint_line["line-opacity"]),"line-color":new se(Xb.paint_line["line-color"]),"line-translate":new Ud(Xb.paint_line["line-translate"]),"line-translate-anchor":new Ud(Xb.paint_line["line-translate-anchor"]),"line-width":new se(Xb.paint_line["line-width"]),
"line-gap-width":new se(Xb.paint_line["line-gap-width"]),"line-offset":new se(Xb.paint_line["line-offset"]),"line-blur":new se(Xb.paint_line["line-blur"]),"line-dasharray":new yi(Xb.paint_line["line-dasharray"]),"line-pattern":new Uj(Xb.paint_line["line-pattern"]),"line-gradient":new Ej(Xb.paint_line["line-gradient"])}),layout:Ja},Ta=new (function(z){function M(){z.apply(this,arguments)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.possiblyEvaluate=
function(S,ia){return ia=new df(Math.floor(ia.zoom),{now:ia.now,fadeDuration:ia.fadeDuration,zoomHistory:ia.zoomHistory,transition:ia.transition}),z.prototype.possiblyEvaluate.call(this,S,ia)},M.prototype.evaluate=function(S,ia,ta,Ba){return ia=g({},ia,{zoom:Math.floor(ia.zoom)}),z.prototype.evaluate.call(this,S,ia,ta,Ba)},M}(se))(Za.paint.properties["line-width"].specification);Ta.useIntegerZoom=!0;var Ya=function(z){function M(S){z.call(this,S,Za)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&
z.prototype)).constructor=M,M.prototype._handleSpecialPaintPropertyUpdate=function(S){"line-gradient"===S&&this._updateGradient()},M.prototype._updateGradient=function(){this.gradient=Rc(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},M.prototype.recalculate=function(S,ia){z.prototype.recalculate.call(this,S,ia);this.paint._values["line-floorwidth"]=Ta.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,S)},M.prototype.createBucket=
function(S){return new Ea(S)},M.prototype.queryRadius=function(S){var ia=Th(Bc("line-width",this,S),Bc("line-gap-width",this,S));S=Bc("line-offset",this,S);return ia/2+Math.abs(S)+Tc(this.paint.get("line-translate"))},M.prototype.queryIntersectsFeature=function(S,ia,ta,Ba,La,Wa,kb){S=jc(S,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Wa.angle,kb);La=kb/2*Th(this.paint.get("line-width").evaluate(ia,ta),this.paint.get("line-gap-width").evaluate(ia,ta));ia=this.paint.get("line-offset").evaluate(ia,
ta);return ia&&(Ba=function(vb,Ib){for(var Sb=[],ic=new ge(0,0),ec=0;ec<vb.length;ec++){for(var uc=vb[ec],tc=[],Qc=0;Qc<uc.length;Qc++){var wd=uc[Qc],Ad=uc[Qc+1],od=0===Qc?ic:wd.sub(uc[Qc-1])._unit()._perp();Ad=Qc===uc.length-1?ic:Ad.sub(wd)._unit()._perp();od=od._add(Ad)._unit();od._mult(1/(od.x*Ad.x+od.y*Ad.y));tc.push(od._mult(Ib)._add(wd))}Sb.push(tc)}return Sb}(Ba,ia*kb)),function(vb,Ib,Sb){for(var ic=0;ic<Ib.length;ic++){var ec=Ib[ic];if(3<=vb.length)for(var uc=0;uc<ec.length;uc++)if(Ob(vb,
ec[uc]))return!0;a:{uc=vb;var tc=Sb;if(1<uc.length){if($e(uc,ec)){uc=!0;break a}for(var Qc=0;Qc<ec.length;Qc++)if(Ra(ec[Qc],uc,tc)){uc=!0;break a}}for(Qc=0;Qc<uc.length;Qc++)if(Ra(uc[Qc],ec,tc)){uc=!0;break a}uc=!1}if(uc)return!0}return!1}(S,Ba,La)},M.prototype.isTileClipped=function(){return!0},M}(ch),jb=Md([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ub=Md([{name:"a_projected_pos",components:3,type:"Float32"}],
4),Fb=(Md([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Md([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Lb=(Md([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Md([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",
components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Tb=Md([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Md([{name:"triangle",components:3,type:"Uint16"}]);Md([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},
{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]);Md([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},
{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},
{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]);Md([{type:"Float32",
name:"offsetX"}]);Md([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Wb={"!":"","#":"",$:"","%":"","\x26":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","\x3c":"","\x3d":"","\x3e":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",
"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},nc=function(z,M,S,ia,ta){var Ba=8*ta-ia-1;var La=(1<<Ba)-1,Wa=La>>1,kb=-7;ta=S?ta-1:0;var vb=S?-1:1,Ib=z[M+ta];ta+=vb;S=Ib&(1<<-kb)-1;Ib>>=-kb;for(kb+=Ba;0<kb;S=256*S+z[M+ta],ta+=vb,kb-=8);Ba=S&(1<<-kb)-1;
S>>=-kb;for(kb+=ia;0<kb;Ba=256*Ba+z[M+ta],ta+=vb,kb-=8);if(0===S)S=1-Wa;else{if(S===La)return Ba?NaN:1/0*(Ib?-1:1);Ba+=Math.pow(2,ia);S-=Wa}return(Ib?-1:1)*Ba*Math.pow(2,S-ia)},wc=function(z,M,S,ia,ta,Ba){var La,Wa,kb,vb=8*Ba-ta-1,Ib=(1<<vb)-1,Sb=Ib>>1,ic=23===ta?Math.pow(2,-24)-Math.pow(2,-77):0;Ba=ia?0:Ba-1;ia=ia?1:-1;var ec=0>M||0===M&&0>1/M?1:0;M=Math.abs(M);for(isNaN(M)||M===1/0?(Wa=isNaN(M)?1:0,La=Ib):(La=Math.floor(Math.log(M)/Math.LN2),1>M*(kb=Math.pow(2,-La))&&(La--,kb*=2),2<=(M+=1<=La+Sb?
ic/kb:ic*Math.pow(2,1-Sb))*kb&&(La++,kb/=2),La+Sb>=Ib?(Wa=0,La=Ib):1<=La+Sb?(Wa=(M*kb-1)*Math.pow(2,ta),La+=Sb):(Wa=M*Math.pow(2,Sb-1)*Math.pow(2,ta),La=0));8<=ta;z[S+Ba]=255&Wa,Ba+=ia,Wa/=256,ta-=8);La=La<<ta|Wa;for(vb+=ta;0<vb;z[S+Ba]=255&La,Ba+=ia,La/=256,vb-=8);z[S+Ba-ia]|=128*ec};Oe.Varint=0;Oe.Fixed64=1;Oe.Bytes=2;Oe.Fixed32=5;var Ec="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");Oe.prototype={destroy:function(){this.buf=null},readFields:function(z,M,S){for(S=S||this.length;this.pos<
S;){var ia=this.readVarint(),ta=ia>>3,Ba=this.pos;this.type=7&ia;z(ta,M,this);this.pos===Ba&&this.skip(ia)}return M},readMessage:function(z,M){return this.readFields(z,M,this.readVarint()+this.pos)},readFixed32:function(){var z=Uh(this.buf,this.pos);return this.pos+=4,z},readSFixed32:function(){var z=Dg(this.buf,this.pos);return this.pos+=4,z},readFixed64:function(){var z=Uh(this.buf,this.pos)+4294967296*Uh(this.buf,this.pos+4);return this.pos+=8,z},readSFixed64:function(){var z=Uh(this.buf,this.pos)+
4294967296*Dg(this.buf,this.pos+4);return this.pos+=8,z},readFloat:function(){var z=nc(this.buf,this.pos,!0,23,4);return this.pos+=4,z},readDouble:function(){var z=nc(this.buf,this.pos,!0,52,8);return this.pos+=8,z},readVarint:function(z){var M,S=this.buf;var ia=127&(M=S[this.pos++]);if(128>M)z=ia;else if(ia|=(127&(M=S[this.pos++]))<<7,128>M)z=ia;else if(ia|=(127&(M=S[this.pos++]))<<14,128>M)z=ia;else if(ia|=(127&(M=S[this.pos++]))<<21,128>M)z=ia;else{ia|=(15&S[this.pos])<<28;var ta,Ba;M=this.buf;
if((ta=(112&(Ba=M[this.pos++]))>>4,128>Ba)||(ta|=(127&(Ba=M[this.pos++]))<<3,128>Ba)||(ta|=(127&(Ba=M[this.pos++]))<<10,128>Ba)||(ta|=(127&(Ba=M[this.pos++]))<<17,128>Ba)||(ta|=(127&(Ba=M[this.pos++]))<<24,128>Ba)||(ta|=(1&(Ba=M[this.pos++]))<<31,128>Ba))z=z?4294967296*ta+(ia>>>0):4294967296*(ta>>>0)+(ia>>>0);else throw Error("Expected varint not more than 10 bytes");}return z},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var z=this.readVarint();return 1==z%2?(z+1)/-2:
z/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var z=this.readVarint()+this.pos,M=this.pos;this.pos=z;if(12<=z-M&&Ec)z=Ec.decode(this.buf.subarray(M,z));else{for(var S=this.buf,ia="";M<z;){var ta,Ba,La,Wa=S[M],kb=null,vb=239<Wa?4:223<Wa?3:191<Wa?2:1;if(M+vb>z)break;1===vb?128>Wa&&(kb=Wa):2===vb?128==(192&(ta=S[M+1]))&&127>=(kb=(31&Wa)<<6|63&ta)&&(kb=null):3===vb?(Ba=S[M+2],128==(192&(ta=S[M+1]))&&128==(192&Ba)&&(2047>=(kb=(15&Wa)<<12|(63&ta)<<6|63&Ba)||55296<=kb&&57343>=
kb)&&(kb=null)):4===vb&&(Ba=S[M+2],La=S[M+3],128==(192&(ta=S[M+1]))&&128==(192&Ba)&&128==(192&La)&&(65535>=(kb=(15&Wa)<<18|(63&ta)<<12|(63&Ba)<<6|63&La)||1114112<=kb)&&(kb=null));null===kb?(kb=65533,vb=1):65535<kb&&(kb-=65536,ia+=String.fromCharCode(kb>>>10&1023|55296),kb=56320|1023&kb);ia+=String.fromCharCode(kb);M+=vb}z=ia}return z},readBytes:function(){var z=this.readVarint()+this.pos,M=this.buf.subarray(this.pos,z);return this.pos=z,M},readPackedVarint:function(z,M){if(this.type!==Oe.Bytes)return z.push(this.readVarint(M));
var S=kg(this);for(z=z||[];this.pos<S;)z.push(this.readVarint(M));return z},readPackedSVarint:function(z){if(this.type!==Oe.Bytes)return z.push(this.readSVarint());var M=kg(this);for(z=z||[];this.pos<M;)z.push(this.readSVarint());return z},readPackedBoolean:function(z){if(this.type!==Oe.Bytes)return z.push(this.readBoolean());var M=kg(this);for(z=z||[];this.pos<M;)z.push(this.readBoolean());return z},readPackedFloat:function(z){if(this.type!==Oe.Bytes)return z.push(this.readFloat());var M=kg(this);
for(z=z||[];this.pos<M;)z.push(this.readFloat());return z},readPackedDouble:function(z){if(this.type!==Oe.Bytes)return z.push(this.readDouble());var M=kg(this);for(z=z||[];this.pos<M;)z.push(this.readDouble());return z},readPackedFixed32:function(z){if(this.type!==Oe.Bytes)return z.push(this.readFixed32());var M=kg(this);for(z=z||[];this.pos<M;)z.push(this.readFixed32());return z},readPackedSFixed32:function(z){if(this.type!==Oe.Bytes)return z.push(this.readSFixed32());var M=kg(this);for(z=z||[];this.pos<
M;)z.push(this.readSFixed32());return z},readPackedFixed64:function(z){if(this.type!==Oe.Bytes)return z.push(this.readFixed64());var M=kg(this);for(z=z||[];this.pos<M;)z.push(this.readFixed64());return z},readPackedSFixed64:function(z){if(this.type!==Oe.Bytes)return z.push(this.readSFixed64());var M=kg(this);for(z=z||[];this.pos<M;)z.push(this.readSFixed64());return z},skip:function(z){z&=7;if(z===Oe.Varint)for(;127<this.buf[this.pos++];);else if(z===Oe.Bytes)this.pos=this.readVarint()+this.pos;else if(z===
Oe.Fixed32)this.pos+=4;else{if(z!==Oe.Fixed64)throw Error("Unimplemented type: "+z);this.pos+=8}},writeTag:function(z,M){this.writeVarint(z<<3|M)},realloc:function(z){for(var M=this.length||16;M<this.pos+z;)M*=2;M!==this.length&&(z=new Uint8Array(M),z.set(this.buf),this.buf=z,this.length=M)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(z){this.realloc(4);ih(this.buf,z,this.pos);this.pos+=4},writeSFixed32:function(z){this.realloc(4);
ih(this.buf,z,this.pos);this.pos+=4},writeFixed64:function(z){this.realloc(8);ih(this.buf,-1&z,this.pos);ih(this.buf,Math.floor(1/4294967296*z),this.pos+4);this.pos+=8},writeSFixed64:function(z){this.realloc(8);ih(this.buf,-1&z,this.pos);ih(this.buf,Math.floor(1/4294967296*z),this.pos+4);this.pos+=8},writeVarint:function(z){268435455<(z=+z||0)||0>z?function(M,S){var ia,ta;if(0<=M?(ia=M%4294967296|0,ta=M/4294967296|0):(ta=~(-M/4294967296),4294967295^(ia=~(-M%4294967296))?ia=ia+1|0:(ia=0,ta=ta+1|0)),
1.8446744073709552E19<=M||-1.8446744073709552E19>M)throw Error("Given varint doesn't fit into 10 bytes");S.realloc(10);(function(Ba,La,Wa){Wa.buf[Wa.pos++]=127&Ba|128;Ba>>>=7;Wa.buf[Wa.pos++]=127&Ba|128;Ba>>>=7;Wa.buf[Wa.pos++]=127&Ba|128;Ba>>>=7;Wa.buf[Wa.pos++]=127&Ba|128;Wa.buf[Wa.pos]=127&Ba>>>7})(ia,0,S);(function(Ba,La){La.buf[La.pos++]|=(7&Ba)<<4|((Ba>>>=3)?128:0);Ba&&(La.buf[La.pos++]=127&Ba|((Ba>>>=7)?128:0),Ba&&(La.buf[La.pos++]=127&Ba|((Ba>>>=7)?128:0),Ba&&(La.buf[La.pos++]=127&Ba|((Ba>>>=
7)?128:0),Ba&&(La.buf[La.pos++]=127&Ba|((Ba>>>=7)?128:0),Ba&&(La.buf[La.pos++]=127&Ba)))))})(ta,S)}(z,this):(this.realloc(4),this.buf[this.pos++]=127&z|(127<z?128:0),127>=z||(this.buf[this.pos++]=127&(z>>>=7)|(127<z?128:0),127>=z||(this.buf[this.pos++]=127&(z>>>=7)|(127<z?128:0),127>=z||(this.buf[this.pos++]=z>>>7&127))))},writeSVarint:function(z){this.writeVarint(0>z?2*-z-1:2*z)},writeBoolean:function(z){this.writeVarint(!!z)},writeString:function(z){z=String(z);this.realloc(4*z.length);this.pos++;
for(var M=this.pos,S=this.buf,ia=this.pos,ta,Ba,La=0;La<z.length;La++){if(55295<(ta=z.charCodeAt(La))&&57344>ta){if(!Ba){56319<ta||La+1===z.length?(S[ia++]=239,S[ia++]=191,S[ia++]=189):Ba=ta;continue}if(56320>ta){S[ia++]=239;S[ia++]=191;S[ia++]=189;Ba=ta;continue}ta=Ba-55296<<10|ta-56320|65536;Ba=null}else Ba&&(S[ia++]=239,S[ia++]=191,S[ia++]=189,Ba=null);128>ta?S[ia++]=ta:(2048>ta?S[ia++]=ta>>6|192:(65536>ta?S[ia++]=ta>>12|224:(S[ia++]=ta>>18|240,S[ia++]=ta>>12&63|128),S[ia++]=ta>>6&63|128),S[ia++]=
63&ta|128)}this.pos=ia;S=this.pos-M;128<=S&&uh(M,S,this);this.pos=M-1;this.writeVarint(S);this.pos+=S},writeFloat:function(z){this.realloc(4);wc(this.buf,z,this.pos,!0,23,4);this.pos+=4},writeDouble:function(z){this.realloc(8);wc(this.buf,z,this.pos,!0,52,8);this.pos+=8},writeBytes:function(z){var M=z.length;this.writeVarint(M);this.realloc(M);for(var S=0;S<M;S++)this.buf[this.pos++]=z[S]},writeRawMessage:function(z,M){this.pos++;var S=this.pos;z(M,this);z=this.pos-S;128<=z&&uh(S,z,this);this.pos=
S-1;this.writeVarint(z);this.pos+=z},writeMessage:function(z,M,S){this.writeTag(z,Oe.Bytes);this.writeRawMessage(M,S)},writePackedVarint:function(z,M){M.length&&this.writeMessage(z,vh,M)},writePackedSVarint:function(z,M){M.length&&this.writeMessage(z,Ui,M)},writePackedBoolean:function(z,M){M.length&&this.writeMessage(z,sj,M)},writePackedFloat:function(z,M){M.length&&this.writeMessage(z,Ch,M)},writePackedDouble:function(z,M){M.length&&this.writeMessage(z,Ai,M)},writePackedFixed32:function(z,M){M.length&&
this.writeMessage(z,nf,M)},writePackedSFixed32:function(z,M){M.length&&this.writeMessage(z,tj,M)},writePackedFixed64:function(z,M){M.length&&this.writeMessage(z,Vh,M)},writePackedSFixed64:function(z,M){M.length&&this.writeMessage(z,Lj,M)},writeBytesField:function(z,M){this.writeTag(z,Oe.Bytes);this.writeBytes(M)},writeFixed32Field:function(z,M){this.writeTag(z,Oe.Fixed32);this.writeFixed32(M)},writeSFixed32Field:function(z,M){this.writeTag(z,Oe.Fixed32);this.writeSFixed32(M)},writeFixed64Field:function(z,
M){this.writeTag(z,Oe.Fixed64);this.writeFixed64(M)},writeSFixed64Field:function(z,M){this.writeTag(z,Oe.Fixed64);this.writeSFixed64(M)},writeVarintField:function(z,M){this.writeTag(z,Oe.Varint);this.writeVarint(M)},writeSVarintField:function(z,M){this.writeTag(z,Oe.Varint);this.writeSVarint(M)},writeStringField:function(z,M){this.writeTag(z,Oe.Bytes);this.writeString(M)},writeFloatField:function(z,M){this.writeTag(z,Oe.Fixed32);this.writeFloat(M)},writeDoubleField:function(z,M){this.writeTag(z,Oe.Fixed64);
this.writeDouble(M)},writeBooleanField:function(z,M){this.writeVarintField(z,!!M)}};var Uc=function(z,M){var S=M.pixelRatio,ia=M.version,ta=M.stretchX,Ba=M.stretchY;M=M.content;this.paddedRect=z;this.pixelRatio=S;this.stretchX=ta;this.stretchY=Ba;this.content=M;this.version=ia},bd={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};bd.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};bd.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-
1,this.paddedRect.y+this.paddedRect.h-1]};bd.tlbr.get=function(){return this.tl.concat(this.br)};bd.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(Uc.prototype,bd);var dd=function(z,M){var S={},ia={};this.haveRenderCallbacks=[];var ta=[];this.addImages(z,S,ta);this.addImages(M,ia,ta);ta=af(ta);ta=new Yf({width:ta.w||1,height:ta.h||1});for(var Ba in z){var La=z[Ba],Wa=S[Ba].paddedRect;Yf.copy(La.data,ta,{x:0,y:0},
{x:Wa.x+1,y:Wa.y+1},La.data)}for(var kb in M){z=M[kb];La=ia[kb].paddedRect;Ba=La.x+1;La=La.y+1;Wa=z.data.width;var vb=z.data.height;Yf.copy(z.data,ta,{x:0,y:0},{x:Ba,y:La},z.data);Yf.copy(z.data,ta,{x:0,y:vb-1},{x:Ba,y:La-1},{width:Wa,height:1});Yf.copy(z.data,ta,{x:0,y:0},{x:Ba,y:La+vb},{width:Wa,height:1});Yf.copy(z.data,ta,{x:Wa-1,y:0},{x:Ba-1,y:La},{width:1,height:vb});Yf.copy(z.data,ta,{x:0,y:0},{x:Ba+Wa,y:La},{width:1,height:vb})}this.image=ta;this.iconPositions=S;this.patternPositions=ia};
dd.prototype.addImages=function(z,M,S){for(var ia in z){var ta=z[ia],Ba={x:0,y:0,w:ta.data.width+2,h:ta.data.height+2};S.push(Ba);M[ia]=new Uc(Ba,ta);ta.hasRenderCallback&&this.haveRenderCallbacks.push(ia)}};dd.prototype.patchUpdatedImages=function(z,M){for(var S in z.dispatchRenderCallbacks(this.haveRenderCallbacks),z.updatedImages)this.patchUpdatedImage(this.iconPositions[S],z.getImage(S),M),this.patchUpdatedImage(this.patternPositions[S],z.getImage(S),M)};dd.prototype.patchUpdatedImage=function(z,
M,S){z&&M&&z.version!==M.version&&(z.version=M.version,z=z.tl,S.update(M.data,void 0,{x:z[0],y:z[1]}))};Yc("ImagePosition",Uc);Yc("ImageAtlas",dd);var id={horizontal:1,vertical:2,horizontalOnly:3},gc=function(){this.scale=1;this.fontStack="";this.imageName=null};gc.forText=function(z,M){var S=new gc;return S.scale=z||1,S.fontStack=M,S};gc.forImage=function(z){var M=new gc;return M.imageName=z,M};var xc=function(){this.text="";this.sectionIndex=[];this.sections=[];this.imageSectionID=null};xc.fromFeature=
function(z,M){for(var S=new xc,ia=0;ia<z.sections.length;ia++){var ta=z.sections[ia];ta.image?S.addImageSection(ta):S.addTextSection(ta,M)}return S};xc.prototype.length=function(){return this.text.length};xc.prototype.getSection=function(z){return this.sections[this.sectionIndex[z]]};xc.prototype.getSectionIndex=function(z){return this.sectionIndex[z]};xc.prototype.getCharCode=function(z){return this.text.charCodeAt(z)};xc.prototype.verticalizePunctuation=function(){for(var z=this.text,M="",S=0;S<
z.length;S++){var ia=z.charCodeAt(S+1)||null,ta=z.charCodeAt(S-1)||null;M+=ia&&Sc(ia)&&!Wb[z[S+1]]||ta&&Sc(ta)&&!Wb[z[S-1]]||!Wb[z[S]]?z[S]:Wb[z[S]]}this.text=M};xc.prototype.trim=function(){for(var z=0,M=0;M<this.text.length&&Vc[this.text.charCodeAt(M)];M++)z++;M=this.text.length;for(var S=this.text.length-1;0<=S&&S>=z&&Vc[this.text.charCodeAt(S)];S--)M--;this.text=this.text.substring(z,M);this.sectionIndex=this.sectionIndex.slice(z,M)};xc.prototype.substring=function(z,M){var S=new xc;return S.text=
this.text.substring(z,M),S.sectionIndex=this.sectionIndex.slice(z,M),S.sections=this.sections,S};xc.prototype.toString=function(){return this.text};xc.prototype.getMaxScale=function(){var z=this;return this.sectionIndex.reduce(function(M,S){return Math.max(M,z.sections[S].scale)},0)};xc.prototype.addTextSection=function(z,M){this.text+=z.text;this.sections.push(gc.forText(z.scale,z.fontStack||M));M=this.sections.length-1;for(var S=0;S<z.text.length;++S)this.sectionIndex.push(M)};xc.prototype.addImageSection=
function(z){z=z.image?z.image.name:"";if(0!==z.length){var M=this.getNextImageSectionCharCode();M?(this.text+=String.fromCharCode(M),this.sections.push(gc.forImage(z)),this.sectionIndex.push(this.sections.length-1)):x("Reached maximum number of images 6401")}else x("Can't add FormattedSection with an empty image.")};xc.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Vc=
{9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},qd={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},td=function(z){function M(S,ia,ta,Ba){z.call(this,S,ia);this.angle=ta;void 0!==Ba&&(this.segment=Ba)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.clone=function(){return new M(this.x,this.y,this.angle,this.segment)},M}(ge);Yc("Anchor",td);var ud=Object.freeze({__proto__:null,getSizeData:Ci,evaluateSizeForFeature:Wh,
evaluateSizeForZoom:Di,SIZE_PACK_FACTOR:128}),nd=function(z,M,S,ia,ta,Ba,La,Wa,kb,vb){if(this.boxStartIndex=z.length,kb)M=Ba.top,S=Ba.bottom,(ia=Ba.collisionPadding)&&(M-=ia[1],S+=ia[3]),M=S-M,0<M&&(M=Math.max(10,M),this.circleDiameter=M);else{kb=Ba.top*La-Wa;var Ib=Ba.bottom*La+Wa,Sb=Ba.left*La-Wa;Wa=Ba.right*La+Wa;Ba=Ba.collisionPadding;if(Ba&&(Sb-=Ba[0]*La,kb-=Ba[1]*La,Wa+=Ba[2]*La,Ib+=Ba[3]*La),vb){Ba=new ge(Sb,kb);La=new ge(Wa,kb);var ic=new ge(Sb,Ib);Ib=new ge(Wa,Ib);vb=vb*Math.PI/180;Ba._rotate(vb);
La._rotate(vb);ic._rotate(vb);Ib._rotate(vb);Sb=Math.min(Ba.x,La.x,ic.x,Ib.x);Wa=Math.max(Ba.x,La.x,ic.x,Ib.x);kb=Math.min(Ba.y,La.y,ic.y,Ib.y);Ib=Math.max(Ba.y,La.y,ic.y,Ib.y)}z.emplaceBack(M.x,M.y,Sb,kb,Wa,Ib,S,ia,ta)}this.boxEndIndex=z.length},Vd=function(z,M){if(void 0===z&&(z=[]),void 0===M&&(M=Ng),this.data=z,this.length=this.data.length,this.compare=M,0<this.length)for(z=(this.length>>1)-1;0<=z;z--)this._down(z)};Vd.prototype.push=function(z){this.data.push(z);this.length++;this._up(this.length-
1)};Vd.prototype.pop=function(){if(0!==this.length){var z=this.data[0],M=this.data.pop();return this.length--,0<this.length&&(this.data[0]=M,this._down(0)),z}};Vd.prototype.peek=function(){return this.data[0]};Vd.prototype._up=function(z){for(var M=this.data,S=this.compare,ia=M[z];0<z;){var ta=z-1>>1,Ba=M[ta];if(0<=S(ia,Ba))break;M[z]=Ba;z=ta}M[z]=ia};Vd.prototype._down=function(z){for(var M=this.data,S=this.compare,ia=this.length>>1,ta=M[z];z<ia;){var Ba=1+(z<<1),La=M[Ba],Wa=Ba+1;if(Wa<this.length&&
0>S(M[Wa],La)&&(Ba=Wa,La=M[Wa]),0<=S(La,ta))break;M[z]=La;z=Ba}M[z]=ta};var ne=Number.POSITIVE_INFINITY,te=xi.VectorTileFeature.types,De=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],we=function(z){this.layoutVertexArray=new gi;this.indexArray=new ji;this.programConfigurations=z;this.segments=new Hf;this.dynamicLayoutVertexArray=new qh;this.opacityVertexArray=new Ii;this.placedSymbolArray=new Hk};we.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&
0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length};we.prototype.upload=function(z,M,S,ia){this.isEmpty()||(S&&(this.layoutVertexBuffer=z.createVertexBuffer(this.layoutVertexArray,jb.members),this.indexBuffer=z.createIndexBuffer(this.indexArray,M),this.dynamicLayoutVertexBuffer=z.createVertexBuffer(this.dynamicLayoutVertexArray,ub.members,!0),this.opacityVertexBuffer=z.createVertexBuffer(this.opacityVertexArray,De,!0),this.opacityVertexBuffer.itemSize=1),(S||ia)&&this.programConfigurations.upload(z))};
we.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};Yc("SymbolBuffers",we);var Je=function(z,M,S){this.layoutVertexArray=new z;this.layoutAttributes=M;this.indexArray=new S;this.segments=new Hf;this.collisionVertexArray=new kk};Je.prototype.upload=function(z){this.layoutVertexBuffer=z.createVertexBuffer(this.layoutVertexArray,
this.layoutAttributes);this.indexBuffer=z.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=z.createVertexBuffer(this.collisionVertexArray,Fb.members,!0)};Je.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};Yc("CollisionBuffers",Je);var ke=function(z){this.collisionBoxArray=z.collisionBoxArray;this.zoom=z.zoom;this.overscaling=z.overscaling;this.layers=z.layers;
this.layerIds=this.layers.map(function(ta){return ta.id});this.index=z.index;this.pixelRatio=z.pixelRatio;this.sourceLayerIndex=z.sourceLayerIndex;this.hasRTLText=this.hasPattern=!1;this.sortKeyRanges=[];this.collisionCircleArray=[];this.placementInvProjMatrix=Oc([]);this.placementViewportMatrix=Oc([]);var M=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ci(this.zoom,M["text-size"]);this.iconSizeData=Ci(this.zoom,M["icon-size"]);M=this.layers[0].layout;var S=M.get("symbol-sort-key"),
ia=M.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==ia&&void 0!==S.constantOr(1);this.sortFeaturesByY=("viewport-y"===ia||"auto"===ia&&!this.sortFeaturesByKey)&&(M.get("text-allow-overlap")||M.get("icon-allow-overlap")||M.get("text-ignore-placement")||M.get("icon-ignore-placement"));"point"===M.get("symbol-placement")&&(this.writingModes=M.get("text-writing-mode").map(function(ta){return id[ta]}));this.stateDependentLayerIds=this.layers.filter(function(ta){return ta.isStateDependent()}).map(function(ta){return ta.id});
this.sourceID=z.sourceID};ke.prototype.createArrays=function(){this.text=new we(new sh(jb.members,this.layers,this.zoom,function(z){return/^text/.test(z)}));this.icon=new we(new sh(jb.members,this.layers,this.zoom,function(z){return/^icon/.test(z)}));this.glyphOffsetArray=new Wj;this.lineVertexArray=new bj;this.symbolInstances=new Jk};ke.prototype.calculateGlyphDependencies=function(z,M,S,ia,ta){for(var Ba=0;Ba<z.length;Ba++)if(M[z.charCodeAt(Ba)]=!0,(S||ia)&&ta){var La=Wb[z.charAt(Ba)];La&&(M[La.charCodeAt(0)]=
!0)}};ke.prototype.populate=function(z,M,S){var ia=this.layers[0],ta=ia.layout,Ba=ta.get("text-font"),La=ta.get("text-field"),Wa=ta.get("icon-image");La=("constant"!==La.value.kind||La.value.value instanceof Xd&&!La.value.value.isEmpty()||0<La.value.value.toString().length)&&("constant"!==Ba.value.kind||0<Ba.value.value.length);Wa="constant"!==Wa.value.kind||!!Wa.value.value||0<Object.keys(Wa.parameters).length;var kb=ta.get("symbol-sort-key");if(this.features=[],La||Wa){var vb=M.iconDependencies,
Ib=M.glyphDependencies;M=M.availableImages;for(var Sb=new df(this.zoom),ic=0;ic<z.length;ic+=1){var ec=z[ic],uc=ec.feature,tc=ec.id,Qc=ec.index,wd=ec.sourceLayerIndex;ec=ia._featureFilter.needGeometry;var Ad={type:uc.type,id:tc,properties:uc.properties,geometry:ec?Ge(uc):[]};if(ia._featureFilter.filter(Sb,Ad,S)){ec||(Ad.geometry=Ge(uc));ec=void 0;if(La){var od=ia.getValueAndResolveTokens("text-field",Ad,S,M);od=Xd.factory(od);kh(od)&&(this.hasRTLText=!0);(!this.hasRTLText||"unavailable"===ig||this.hasRTLText&&
xg.isParsed())&&(ec=Bh(od,ia,Ad))}od=void 0;Wa&&(od=ia.getValueAndResolveTokens("icon-image",Ad,S,M),od=od instanceof oe?od:oe.fromString(od));if(ec||od){var Od=this.sortFeaturesByKey?kb.evaluate(Ad,{},S):void 0;uc={id:tc,text:ec,icon:od,index:Qc,sourceLayerIndex:wd,geometry:Ge(uc),properties:uc.properties,type:te[uc.type],sortKey:Od};if(this.features.push(uc),od&&(vb[od.name]=!0),ec)for(uc=Ba.evaluate(Ad,{},S).join(","),tc="map"===ta.get("text-rotation-alignment")&&"point"!==ta.get("symbol-placement"),
this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(id.vertical),Qc=0,Ad=ec.sections;Qc<Ad.length;Qc+=1)wd=Ad[Qc],wd.image?vb[wd.image.name]=!0:(od=Ce(ec.toString()),Od=wd.fontStack||uc,Od=Ib[Od]=Ib[Od]||{},this.calculateGlyphDependencies(wd.text,Od,tc,this.allowVerticalPlacement,od))}}}"line"===ta.get("symbol-placement")&&(this.features=function(Nd){function Sd(pg,Of,lf){var Ie=re[pg];return delete re[pg],re[Of]=Ie,he[Ie].geometry[0].pop(),he[Ie].geometry[0]=he[Ie].geometry[0].concat(lf[0]),
Ie}function be(pg,Of,lf){var Ie=qe[Of];return delete qe[Of],qe[pg]=Ie,he[Ie].geometry[0].shift(),he[Ie].geometry[0]=lf[0].concat(he[Ie].geometry[0]),Ie}function je(pg,Of,lf){Of=lf?Of[0][Of[0].length-1]:Of[0][0];return pg+":"+Of.x+":"+Of.y}for(var qe={},re={},he=[],le=0,Ee=0;Ee<Nd.length;Ee++){var ce=Nd[Ee],Yd=ce.geometry;if(ce=ce.text?ce.text.toString():null){var de=je(ce,Yd),Me=je(ce,Yd,!0);if(de in re&&Me in qe&&re[de]!==qe[Me]){Yd=be(de,Me,Yd);var kf=Sd(de,Me,he[Yd].geometry);delete qe[de];delete re[Me];
re[je(ce,he[kf].geometry,!0)]=kf;he[Yd].geometry=null}else de in re?Sd(de,Me,Yd):Me in qe?be(de,Me,Yd):(he.push(Nd[Ee]),le++,qe[de]=le-1,re[Me]=le-1)}else he.push(Nd[Ee]),le++}return he.filter(function(pg){return pg.geometry})}(this.features));this.sortFeaturesByKey&&this.features.sort(function(Nd,Sd){return Nd.sortKey-Sd.sortKey})}};ke.prototype.update=function(z,M,S){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(z,M,this.layers,S),this.icon.programConfigurations.updatePaintArrays(z,
M,this.layers,S))};ke.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText};ke.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};ke.prototype.upload=function(z){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(z),this.iconCollisionBox.upload(z));this.text.upload(z,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(z,
this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};ke.prototype.destroyDebugData=function(){this.textCollisionBox.destroy();this.iconCollisionBox.destroy()};ke.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.hasDebugData()&&this.destroyDebugData()};ke.prototype.addToLineVertexArray=function(z,M){var S=this.lineVertexArray.length;if(void 0!==z.segment){for(var ia=z.dist(M[z.segment+1]),ta=z.dist(M[z.segment]),Ba={},La=z.segment+
1;La<M.length;La++)Ba[La]={x:M[La].x,y:M[La].y,tileUnitDistanceFromAnchor:ia},La<M.length-1&&(ia+=M[La+1].dist(M[La]));for(z=z.segment||0;0<=z;z--)Ba[z]={x:M[z].x,y:M[z].y,tileUnitDistanceFromAnchor:ta},0<z&&(ta+=M[z-1].dist(M[z]));for(ta=0;ta<M.length;ta++)z=Ba[ta],this.lineVertexArray.emplaceBack(z.x,z.y,z.tileUnitDistanceFromAnchor)}return{lineStartIndex:S,lineLength:this.lineVertexArray.length-S}};ke.prototype.addSymbols=function(z,M,S,ia,ta,Ba,La,Wa,kb,vb,Ib,Sb){ta=z.indexArray;for(var ic=z.layoutVertexArray,
ec=z.segments.prepareSegment(4*M.length,ic,ta,Ba.sortKey),uc=this.glyphOffsetArray.length,tc=ec.vertexLength,Qc=this.allowVerticalPlacement&&La===id.vertical?Math.PI/2:0,wd=Ba.text&&Ba.text.sections,Ad=0;Ad<M.length;Ad++){var od=M[Ad],Od=od.tl,Nd=od.tr,Sd=od.bl,be=od.br,je=od.tex,qe=od.pixelOffsetTL,re=od.pixelOffsetBR,he=od.minFontScaleX,le=od.minFontScaleY,Ee=od.glyphOffset,ce=od.isSDF;od=od.sectionIndex;var Yd=ec.vertexLength,de=Ee[1];eg(ic,Wa.x,Wa.y,Od.x,de+Od.y,je.x,je.y,S,ce,qe.x,qe.y,he,le);
eg(ic,Wa.x,Wa.y,Nd.x,de+Nd.y,je.x+je.w,je.y,S,ce,re.x,qe.y,he,le);eg(ic,Wa.x,Wa.y,Sd.x,de+Sd.y,je.x,je.y+je.h,S,ce,qe.x,re.y,he,le);eg(ic,Wa.x,Wa.y,be.x,de+be.y,je.x+je.w,je.y+je.h,S,ce,re.x,re.y,he,le);Ff(z.dynamicLayoutVertexArray,Wa,Qc);ta.emplaceBack(Yd,Yd+1,Yd+2);ta.emplaceBack(Yd+1,Yd+2,Yd+3);ec.vertexLength+=4;ec.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(Ee[0]);Ad!==M.length-1&&od===M[Ad+1].sectionIndex||z.programConfigurations.populatePaintArrays(ic.length,Ba,Ba.index,{},Sb,wd&&
wd[od])}z.placedSymbolArray.emplaceBack(Wa.x,Wa.y,uc,this.glyphOffsetArray.length-uc,tc,kb,vb,Wa.segment,S?S[0]:0,S?S[1]:0,ia[0],ia[1],La,0,!1,0,Ib)};ke.prototype._addCollisionDebugVertex=function(z,M,S,ia,ta,Ba){return M.emplaceBack(0,0),z.emplaceBack(S.x,S.y,ia,ta,Math.round(Ba.x),Math.round(Ba.y))};ke.prototype.addCollisionDebugVertices=function(z,M,S,ia,ta,Ba,La){var Wa=ta.segments.prepareSegment(4,ta.layoutVertexArray,ta.indexArray),kb=Wa.vertexLength,vb=ta.layoutVertexArray,Ib=ta.collisionVertexArray,
Sb=La.anchorX;La=La.anchorY;this._addCollisionDebugVertex(vb,Ib,Ba,Sb,La,new ge(z,M));this._addCollisionDebugVertex(vb,Ib,Ba,Sb,La,new ge(S,M));this._addCollisionDebugVertex(vb,Ib,Ba,Sb,La,new ge(S,ia));this._addCollisionDebugVertex(vb,Ib,Ba,Sb,La,new ge(z,ia));Wa.vertexLength+=4;z=ta.indexArray;z.emplaceBack(kb,kb+1);z.emplaceBack(kb+1,kb+2);z.emplaceBack(kb+2,kb+3);z.emplaceBack(kb+3,kb);Wa.primitiveLength+=4};ke.prototype.addDebugCollisionBoxes=function(z,M,S,ia){for(;z<M;z++){var ta=this.collisionBoxArray.get(z);
this.addCollisionDebugVertices(ta.x1,ta.y1,ta.x2,ta.y2,ia?this.textCollisionBox:this.iconCollisionBox,ta.anchorPoint,S)}};ke.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData();this.textCollisionBox=new Je(Jh,Lb.members,Ni);this.iconCollisionBox=new Je(Jh,Lb.members,Ni);for(var z=0;z<this.symbolInstances.length;z++){var M=this.symbolInstances.get(z);this.addDebugCollisionBoxes(M.textBoxStartIndex,M.textBoxEndIndex,M,!0);this.addDebugCollisionBoxes(M.verticalTextBoxStartIndex,
M.verticalTextBoxEndIndex,M,!0);this.addDebugCollisionBoxes(M.iconBoxStartIndex,M.iconBoxEndIndex,M,!1);this.addDebugCollisionBoxes(M.verticalIconBoxStartIndex,M.verticalIconBoxEndIndex,M,!1)}};ke.prototype._deserializeCollisionBoxesForSymbol=function(z,M,S,ia,ta,Ba,La,Wa,kb){for(var vb={};M<S;){M=z.get(M);vb.textBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY};vb.textFeatureIndex=M.featureIndex;break}for(;ia<ta;){ia=z.get(ia);vb.verticalTextBox={x1:ia.x1,
y1:ia.y1,x2:ia.x2,y2:ia.y2,anchorPointX:ia.anchorPointX,anchorPointY:ia.anchorPointY};vb.verticalTextFeatureIndex=ia.featureIndex;break}for(;Ba<La;){Ba=z.get(Ba);vb.iconBox={x1:Ba.x1,y1:Ba.y1,x2:Ba.x2,y2:Ba.y2,anchorPointX:Ba.anchorPointX,anchorPointY:Ba.anchorPointY};vb.iconFeatureIndex=Ba.featureIndex;break}for(;Wa<kb;){z=z.get(Wa);vb.verticalIconBox={x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,anchorPointX:z.anchorPointX,anchorPointY:z.anchorPointY};vb.verticalIconFeatureIndex=z.featureIndex;break}return vb};
ke.prototype.deserializeCollisionBoxes=function(z){this.collisionArrays=[];for(var M=0;M<this.symbolInstances.length;M++){var S=this.symbolInstances.get(M);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(z,S.textBoxStartIndex,S.textBoxEndIndex,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S.iconBoxStartIndex,S.iconBoxEndIndex,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex))}};ke.prototype.hasTextData=function(){return 0<this.text.segments.get().length};ke.prototype.hasIconData=
function(){return 0<this.icon.segments.get().length};ke.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox};ke.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length};ke.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length};ke.prototype.addIndicesForPlacedSymbol=function(z,M){var S=z.placedSymbolArray.get(M);M=S.vertexStartIndex+4*S.numGlyphs;
for(S=S.vertexStartIndex;S<M;S+=4)z.indexArray.emplaceBack(S,S+1,S+2),z.indexArray.emplaceBack(S+1,S+2,S+3)};ke.prototype.getSortedSymbolIndexes=function(z){if(this.sortedAngle===z&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;var M=Math.sin(z);z=Math.cos(z);for(var S=[],ia=[],ta=[],Ba=0;Ba<this.symbolInstances.length;++Ba){ta.push(Ba);var La=this.symbolInstances.get(Ba);S.push(0|Math.round(M*La.anchorX+z*La.anchorY));ia.push(La.featureIndex)}return ta.sort(function(Wa,kb){return S[Wa]-
S[kb]||ia[kb]-ia[Wa]}),ta};ke.prototype.addToSortKeyRanges=function(z,M){var S=this.sortKeyRanges[this.sortKeyRanges.length-1];S&&S.sortKey===M?S.symbolInstanceEnd=z+1:this.sortKeyRanges.push({sortKey:M,symbolInstanceStart:z,symbolInstanceEnd:z+1})};ke.prototype.sortFeatures=function(z){var M=this;if(this.sortFeaturesByY&&this.sortedAngle!==z&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(z);this.sortedAngle=z;this.text.indexArray.clear();
this.icon.indexArray.clear();this.featureSortOrder=[];z=0;for(var S=this.symbolInstanceIndexes;z<S.length;z+=1){var ia=this.symbolInstances.get(S[z]);this.featureSortOrder.push(ia.featureIndex);[ia.rightJustifiedTextSymbolIndex,ia.centerJustifiedTextSymbolIndex,ia.leftJustifiedTextSymbolIndex].forEach(function(ta,Ba,La){0<=ta&&La.indexOf(ta)===Ba&&M.addIndicesForPlacedSymbol(M.text,ta)});0<=ia.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,ia.verticalPlacedTextSymbolIndex);
0<=ia.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,ia.placedIconSymbolIndex);0<=ia.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,ia.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};Yc("SymbolBucket",ke,{omit:["layers","collisionBoxArray","features","compareText"]});ke.MAX_GLYPHS=65535;ke.addDynamicAttributes=Ff;var hg=
new Jg({"symbol-placement":new Ud(Xb.layout_symbol["symbol-placement"]),"symbol-spacing":new Ud(Xb.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ud(Xb.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new se(Xb.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ud(Xb.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ud(Xb.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ud(Xb.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ud(Xb.layout_symbol["icon-optional"]),
"icon-rotation-alignment":new Ud(Xb.layout_symbol["icon-rotation-alignment"]),"icon-size":new se(Xb.layout_symbol["icon-size"]),"icon-text-fit":new Ud(Xb.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ud(Xb.layout_symbol["icon-text-fit-padding"]),"icon-image":new se(Xb.layout_symbol["icon-image"]),"icon-rotate":new se(Xb.layout_symbol["icon-rotate"]),"icon-padding":new Ud(Xb.layout_symbol["icon-padding"]),"icon-keep-upright":new Ud(Xb.layout_symbol["icon-keep-upright"]),"icon-offset":new se(Xb.layout_symbol["icon-offset"]),
"icon-anchor":new se(Xb.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ud(Xb.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ud(Xb.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ud(Xb.layout_symbol["text-rotation-alignment"]),"text-field":new se(Xb.layout_symbol["text-field"]),"text-font":new se(Xb.layout_symbol["text-font"]),"text-size":new se(Xb.layout_symbol["text-size"]),"text-max-width":new se(Xb.layout_symbol["text-max-width"]),"text-line-height":new Ud(Xb.layout_symbol["text-line-height"]),
"text-letter-spacing":new se(Xb.layout_symbol["text-letter-spacing"]),"text-justify":new se(Xb.layout_symbol["text-justify"]),"text-radial-offset":new se(Xb.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ud(Xb.layout_symbol["text-variable-anchor"]),"text-anchor":new se(Xb.layout_symbol["text-anchor"]),"text-max-angle":new Ud(Xb.layout_symbol["text-max-angle"]),"text-writing-mode":new Ud(Xb.layout_symbol["text-writing-mode"]),"text-rotate":new se(Xb.layout_symbol["text-rotate"]),"text-padding":new Ud(Xb.layout_symbol["text-padding"]),
"text-keep-upright":new Ud(Xb.layout_symbol["text-keep-upright"]),"text-transform":new se(Xb.layout_symbol["text-transform"]),"text-offset":new se(Xb.layout_symbol["text-offset"]),"text-allow-overlap":new Ud(Xb.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ud(Xb.layout_symbol["text-ignore-placement"]),"text-optional":new Ud(Xb.layout_symbol["text-optional"])}),zf={paint:new Jg({"icon-opacity":new se(Xb.paint_symbol["icon-opacity"]),"icon-color":new se(Xb.paint_symbol["icon-color"]),
"icon-halo-color":new se(Xb.paint_symbol["icon-halo-color"]),"icon-halo-width":new se(Xb.paint_symbol["icon-halo-width"]),"icon-halo-blur":new se(Xb.paint_symbol["icon-halo-blur"]),"icon-translate":new Ud(Xb.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ud(Xb.paint_symbol["icon-translate-anchor"]),"text-opacity":new se(Xb.paint_symbol["text-opacity"]),"text-color":new se(Xb.paint_symbol["text-color"],{runtimeType:pc,getOverride:function(z){return z.textColor},hasOverride:function(z){return!!z.textColor}}),
"text-halo-color":new se(Xb.paint_symbol["text-halo-color"]),"text-halo-width":new se(Xb.paint_symbol["text-halo-width"]),"text-halo-blur":new se(Xb.paint_symbol["text-halo-blur"]),"text-translate":new Ud(Xb.paint_symbol["text-translate"]),"text-translate-anchor":new Ud(Xb.paint_symbol["text-translate-anchor"])}),layout:hg},ah=function(z){this.type=z.property.overrides?z.property.overrides.runtimeType:bb;this.defaultValue=z};ah.prototype.evaluate=function(z){if(z.formattedSection){var M=this.defaultValue.property.overrides;
if(M&&M.hasOverride(z.formattedSection))return M.getOverride(z.formattedSection)}return z.feature&&z.featureState?this.defaultValue.evaluate(z.feature,z.featureState):this.defaultValue.property.specification.default};ah.prototype.eachChild=function(z){this.defaultValue.isConstant()||z(this.defaultValue.value._styleExpression.expression)};ah.prototype.outputDefined=function(){return!1};ah.prototype.serialize=function(){return null};Yc("FormatSectionOverride",ah,{omit:["defaultValue"]});var $i=function(z){function M(S){z.call(this,
S,zf)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.recalculate=function(S,ia){if(z.prototype.recalculate.call(this,S,ia),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),
"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement"))if(S=this.layout.get("text-writing-mode")){ia=[];for(var ta=0;ta<S.length;ta+=1){var Ba=S[ta];0>ia.indexOf(Ba)&&ia.push(Ba)}this.layout._values["text-writing-mode"]=ia}else this.layout._values["text-writing-mode"]=
["horizontal"];this._setPaintOverrides()},M.prototype.getValueAndResolveTokens=function(S,ia,ta,Ba){ta=this.layout.get(S).evaluate(ia,{},ta,Ba);S=this._unevaluatedLayout._values[S];return S.isDataDriven()||ed(S.value)||!ta?ta:function(La,Wa){return Wa.replace(/{([^{}]+)}/g,function(kb,vb){return vb in La?String(La[vb]):""})}(ia.properties,ta)},M.prototype.createBucket=function(S){return new ke(S)},M.prototype.queryRadius=function(){return 0},M.prototype.queryIntersectsFeature=function(){return!1},
M.prototype._setPaintOverrides=function(){for(var S=0,ia=zf.paint.overridableProperties;S<ia.length;S+=1){var ta=ia[S];if(M.hasPaintOverride(this.layout,ta)){var Ba=this.paint.get(ta);var La=new ah(Ba);La=new Pg(La,Ba.property.specification);La="constant"===Ba.value.kind||"source"===Ba.value.kind?new ie("source",La):new Kf("composite",La,Ba.value.zoomStops,Ba.value._interpolationType);this.paint._values[ta]=new Nf(Ba.property,La,Ba.parameters)}}},M.prototype._handleOverridablePaintPropertyUpdate=
function(S,ia,ta){return!(!this.layout||ia.isDataDriven()||ta.isDataDriven())&&M.hasPaintOverride(this.layout,S)},M.hasPaintOverride=function(S,ia){S=S.get("text-field");var ta=zf.paint.properties[ia],Ba=!1,La=function(kb){for(var vb=0;vb<kb.length;vb+=1)if(ta.overrides&&ta.overrides.hasOverride(kb[vb]))return void(Ba=!0)};if("constant"===S.value.kind&&S.value.value instanceof Xd)La(S.value.value.sections);else if("source"===S.value.kind){var Wa=function(kb){Ba||(kb instanceof Fe&&ka(kb.value)===
fd?La(kb.value.sections):kb instanceof cf?La(kb.sections):kb.eachChild(Wa))};ia=S.value;ia._styleExpression&&Wa(ia._styleExpression.expression)}return Ba},M}(ch),Pj={paint:new Jg({"background-color":new Ud(Xb.paint_background["background-color"]),"background-pattern":new yi(Xb.paint_background["background-pattern"]),"background-opacity":new Ud(Xb.paint_background["background-opacity"])})},vi=function(z){function M(S){z.call(this,S,Pj)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=
M,M}(ch),Qj={paint:new Jg({"raster-opacity":new Ud(Xb.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ud(Xb.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ud(Xb.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ud(Xb.paint_raster["raster-brightness-max"]),"raster-saturation":new Ud(Xb.paint_raster["raster-saturation"]),"raster-contrast":new Ud(Xb.paint_raster["raster-contrast"]),"raster-resampling":new Ud(Xb.paint_raster["raster-resampling"]),"raster-fade-duration":new Ud(Xb.paint_raster["raster-fade-duration"])})},
gf=function(z){function M(S){z.call(this,S,Qj)}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M}(ch),bf=function(z){function M(S){z.call(this,S,{});this.implementation=S}return z&&(M.__proto__=z),(M.prototype=Object.create(z&&z.prototype)).constructor=M,M.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},M.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},M.prototype.recalculate=function(){},M.prototype.updateTransitions=
function(){},M.prototype.hasTransition=function(){},M.prototype.serialize=function(){},M.prototype.onAdd=function(S){this.implementation.onAdd&&this.implementation.onAdd(S,S.painter.context.gl)},M.prototype.onRemove=function(S){this.implementation.onRemove&&this.implementation.onRemove(S,S.painter.context.gl)},M}(ch),bh={circle:cl,heatmap:dl,hillshade:qk,fill:Nk,"fill-extrusion":tl,line:Ya,symbol:$i,background:vi,raster:gf},Ek=self.HTMLImageElement,dj=self.HTMLCanvasElement,ej=self.HTMLVideoElement,
Cj=self.ImageData,Mi=self.ImageBitmap,ak=function(z,M,S,ia){this.context=z;this.format=S;this.texture=z.gl.createTexture();this.update(M,ia)};ak.prototype.update=function(z,M,S){var ia=z.width,ta=z.height,Ba=!(this.size&&this.size[0]===ia&&this.size[1]===ta||S),La=this.context,Wa=La.gl;(this.useMipmap=!(!M||!M.useMipmap),Wa.bindTexture(Wa.TEXTURE_2D,this.texture),La.pixelStoreUnpackFlipY.set(!1),La.pixelStoreUnpack.set(1),La.pixelStoreUnpackPremultiplyAlpha.set(this.format===Wa.RGBA&&(!M||!1!==M.premultiply)),
Ba)?(this.size=[ia,ta],z instanceof Ek||z instanceof dj||z instanceof ej||z instanceof Cj||Mi&&z instanceof Mi?Wa.texImage2D(Wa.TEXTURE_2D,0,this.format,this.format,Wa.UNSIGNED_BYTE,z):Wa.texImage2D(Wa.TEXTURE_2D,0,this.format,ia,ta,0,this.format,Wa.UNSIGNED_BYTE,z.data)):(S=S||{x:0,y:0},M=S.x,S=S.y,z instanceof Ek||z instanceof dj||z instanceof ej||z instanceof Cj||Mi&&z instanceof Mi?Wa.texSubImage2D(Wa.TEXTURE_2D,0,M,S,Wa.RGBA,Wa.UNSIGNED_BYTE,z):Wa.texSubImage2D(Wa.TEXTURE_2D,0,M,S,ia,ta,Wa.RGBA,
Wa.UNSIGNED_BYTE,z.data));this.useMipmap&&this.isSizePowerOfTwo()&&Wa.generateMipmap(Wa.TEXTURE_2D)};ak.prototype.bind=function(z,M,S){var ia=this.context.gl;ia.bindTexture(ia.TEXTURE_2D,this.texture);S!==ia.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(S=ia.LINEAR);z!==this.filter&&(ia.texParameteri(ia.TEXTURE_2D,ia.TEXTURE_MAG_FILTER,z),ia.texParameteri(ia.TEXTURE_2D,ia.TEXTURE_MIN_FILTER,S||z),this.filter=z);M!==this.wrap&&(ia.texParameteri(ia.TEXTURE_2D,ia.TEXTURE_WRAP_S,M),ia.texParameteri(ia.TEXTURE_2D,
ia.TEXTURE_WRAP_T,M),this.wrap=M)};ak.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/Math.LN2%1};ak.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var ul=function(z){var M=this;this._callback=z;this._triggered=!1;"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){M._triggered=!1;M._callback()})};ul.prototype.trigger=function(){var z=this;this._triggered||
(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){z._triggered=!1;z._callback()},0))};ul.prototype.remove=function(){delete this._channel;this._callback=function(){}};var rk=function(z,M,S){this.target=z;this.parent=M;this.mapId=S;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};u(["receive","process"],this);this.invoker=new ul(this.process);this.target.addEventListener("message",this.receive,!1);this.globalScope=B()?z:self};rk.prototype.send=
function(z,M,S,ia,ta){var Ba=this;void 0===ta&&(ta=!1);var La=Math.round(1E18*Math.random()).toString(36).substring(0,10);S&&(this.callbacks[La]=S);var Wa=G(this.globalScope)?void 0:[];return this.target.postMessage({id:La,type:z,hasCallback:!!S,targetMapId:ia,mustQueue:ta,sourceMapId:this.mapId,data:Jd(M,Wa)},Wa),{cancel:function(){S&&delete Ba.callbacks[La];Ba.target.postMessage({id:La,type:"\x3ccancel\x3e",targetMapId:ia,sourceMapId:Ba.mapId})}}};rk.prototype.receive=function(z){var M=z.data;!(z=
M.id)||M.targetMapId&&this.mapId!==M.targetMapId||("\x3ccancel\x3e"===M.type?(delete this.tasks[z],M=this.cancelCallbacks[z],delete this.cancelCallbacks[z],M&&M()):B()||M.mustQueue?(this.tasks[z]=M,this.taskQueue.push(z),this.invoker.trigger()):this.processTask(z,M))};rk.prototype.process=function(){if(this.taskQueue.length){var z=this.taskQueue.shift(),M=this.tasks[z];delete this.tasks[z];this.taskQueue.length&&this.invoker.trigger();M&&this.processTask(z,M)}};rk.prototype.processTask=function(z,
M){var S=this;if("\x3cresponse\x3e"===M.type){var ia=this.callbacks[z];delete this.callbacks[z];ia&&(M.error?ia(Ld(M.error)):ia(null,Ld(M.data)))}else{var ta=!1,Ba=G(this.globalScope)?void 0:[];ia=M.hasCallback?function(kb,vb){ta=!0;delete S.cancelCallbacks[z];S.target.postMessage({id:z,type:"\x3cresponse\x3e",sourceMapId:S.mapId,error:kb?Jd(kb):null,data:Jd(vb,Ba)},Ba)}:function(kb){ta=!0};var La=null,Wa=Ld(M.data);this.parent[M.type]?La=this.parent[M.type](M.sourceMapId,Wa,ia):this.parent.getWorkerSource?
(La=M.type.split("."),La=this.parent.getWorkerSource(M.sourceMapId,La[0],Wa.source)[La[1]](Wa,ia)):ia(Error("Could not find function "+M.type));!ta&&La&&La.cancel&&(this.cancelCallbacks[z]=La.cancel)}};rk.prototype.remove=function(){this.invoker.remove();this.target.removeEventListener("message",this.receive,!1)};var Pf=function(z,M){z&&(M?this.setSouthWest(z).setNorthEast(M):4===z.length?this.setSouthWest([z[0],z[1]]).setNorthEast([z[2],z[3]]):this.setSouthWest(z[0]).setNorthEast(z[1]))};Pf.prototype.setNorthEast=
function(z){return this._ne=z instanceof qf?new qf(z.lng,z.lat):qf.convert(z),this};Pf.prototype.setSouthWest=function(z){return this._sw=z instanceof qf?new qf(z.lng,z.lat):qf.convert(z),this};Pf.prototype.extend=function(z){var M,S=this._sw,ia=this._ne;if(z instanceof qf)var ta=M=z;else{if(!(z instanceof Pf))return Array.isArray(z)?4===z.length||z.every(Array.isArray)?this.extend(Pf.convert(z)):this.extend(qf.convert(z)):this;if(ta=z._ne,!(M=z._sw)||!ta)return this}return S||ia?(S.lng=Math.min(M.lng,
S.lng),S.lat=Math.min(M.lat,S.lat),ia.lng=Math.max(ta.lng,ia.lng),ia.lat=Math.max(ta.lat,ia.lat)):(this._sw=new qf(M.lng,M.lat),this._ne=new qf(ta.lng,ta.lat)),this};Pf.prototype.getCenter=function(){return new qf((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};Pf.prototype.getSouthWest=function(){return this._sw};Pf.prototype.getNorthEast=function(){return this._ne};Pf.prototype.getNorthWest=function(){return new qf(this.getWest(),this.getNorth())};Pf.prototype.getSouthEast=function(){return new qf(this.getEast(),
this.getSouth())};Pf.prototype.getWest=function(){return this._sw.lng};Pf.prototype.getSouth=function(){return this._sw.lat};Pf.prototype.getEast=function(){return this._ne.lng};Pf.prototype.getNorth=function(){return this._ne.lat};Pf.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};Pf.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};Pf.prototype.isEmpty=function(){return!(this._sw&&this._ne)};Pf.prototype.contains=function(z){var M=
qf.convert(z);z=M.lng;M=M.lat;var S=this._sw.lng<=z&&z<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=z&&z>=this._ne.lng),this._sw.lat<=M&&M<=this._ne.lat&&S};Pf.convert=function(z){return!z||z instanceof Pf?z:new Pf(z)};var qf=function(z,M){if(isNaN(z)||isNaN(M))throw Error("Invalid LngLat object: ("+z+", "+M+")");if(this.lng=+z,this.lat=+M,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};qf.prototype.wrap=function(){return new qf(e(this.lng,
-180,180),this.lat)};qf.prototype.toArray=function(){return[this.lng,this.lat]};qf.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};qf.prototype.distanceTo=function(z){var M=Math.PI/180,S=this.lat*M,ia=z.lat*M;return 6371008.8*Math.acos(Math.min(Math.sin(S)*Math.sin(ia)+Math.cos(S)*Math.cos(ia)*Math.cos((z.lng-this.lng)*M),1))};qf.prototype.toBounds=function(z){void 0===z&&(z=0);z=360*z/40075017;var M=z/Math.cos(Math.PI/180*this.lat);return new Pf(new qf(this.lng-M,this.lat-
z),new qf(this.lng+M,this.lat+z))};qf.convert=function(z){if(z instanceof qf)return z;if(Array.isArray(z)&&(2===z.length||3===z.length))return new qf(Number(z[0]),Number(z[1]));if(!Array.isArray(z)&&"object"==typeof z&&null!==z)return new qf(Number("lng"in z?z.lng:z.lon),Number(z.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, an object {lon: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var fl=1.27420176E7*Math.PI,bk=function(z,M,S){void 0===S&&(S=0);this.x=+z;this.y=+M;this.z=+S};bk.fromLngLat=function(z,M){void 0===M&&(M=0);z=qf.convert(z);return new bk(Zh(z.lng),nh(z.lat),M/(fl*Math.cos(z.lat*Math.PI/180)))};bk.prototype.toLngLat=function(){return new qf(360*this.x-180,mg(this.y))};bk.prototype.toAltitude=function(){return this.z*fl*Math.cos(mg(this.y)*Math.PI/180)};bk.prototype.meterInMercatorCoordinateUnits=function(){return 1/fl*(z=mg(this.y),1/Math.cos(z*Math.PI/180));var z};
var ck=function(z,M,S){this.z=z;this.x=M;this.y=S;this.key=Vg(0,z,z,M,S)};ck.prototype.equals=function(z){return this.z===z.z&&this.x===z.x&&this.y===z.y};ck.prototype.url=function(z,M){var S,ia,ta,Ba,La,Wa=(ia=this.y,ta=this.z,Ba=wf(256*(S=this.x),256*(ia=Math.pow(2,ta)-ia-1),ta),La=wf(256*(S+1),256*(ia+1),ta),Ba[0]+","+Ba[1]+","+La[0]+","+La[1]),kb;S="";for(ia=this.z;0<ia;ia--)S+=(this.x&(kb=1<<ia-1)?1:0)+(this.y&kb?2:0);kb=S;return z[(this.x+this.y)%z.length].replace("{prefix}",(this.x%16).toString(16)+
(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===M?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",kb).replace("{bbox-epsg-3857}",Wa)};ck.prototype.getTilePoint=function(z){var M=Math.pow(2,this.z);return new ge(8192*(z.x*M-this.x),8192*(z.y*M-this.y))};ck.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Bl=function(z,M){this.wrap=z;this.canonical=M;this.key=Vg(z,M.z,M.z,M.x,M.y)},Qf=function(z,M,S,ia,
ta){this.overscaledZ=z;this.wrap=M;this.canonical=new ck(S,+ia,+ta);this.key=Vg(M,z,S,ia,ta)};Qf.prototype.equals=function(z){return this.overscaledZ===z.overscaledZ&&this.wrap===z.wrap&&this.canonical.equals(z.canonical)};Qf.prototype.scaledTo=function(z){var M=this.canonical.z-z;return z>this.canonical.z?new Qf(z,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qf(z,this.wrap,z,this.canonical.x>>M,this.canonical.y>>M)};Qf.prototype.calculateScaledKey=function(z,M){var S=this.canonical.z-
z;return z>this.canonical.z?Vg(this.wrap*+M,z,this.canonical.z,this.canonical.x,this.canonical.y):Vg(this.wrap*+M,z,z,this.canonical.x>>S,this.canonical.y>>S)};Qf.prototype.isChildOf=function(z){if(z.wrap!==this.wrap)return!1;var M=this.canonical.z-z.canonical.z;return 0===z.overscaledZ||z.overscaledZ<this.overscaledZ&&z.canonical.x===this.canonical.x>>M&&z.canonical.y===this.canonical.y>>M};Qf.prototype.children=function(z){if(this.overscaledZ>=z)return[new Qf(this.overscaledZ+1,this.wrap,this.canonical.z,
this.canonical.x,this.canonical.y)];z=this.canonical.z+1;var M=2*this.canonical.x,S=2*this.canonical.y;return[new Qf(z,this.wrap,z,M,S),new Qf(z,this.wrap,z,M+1,S),new Qf(z,this.wrap,z,M,S+1),new Qf(z,this.wrap,z,M+1,S+1)]};Qf.prototype.isLessThan=function(z){return this.wrap<z.wrap||!(this.wrap>z.wrap)&&(this.overscaledZ<z.overscaledZ||!(this.overscaledZ>z.overscaledZ)&&(this.canonical.x<z.canonical.x||!(this.canonical.x>z.canonical.x)&&this.canonical.y<z.canonical.y))};Qf.prototype.wrapped=function(){return new Qf(this.overscaledZ,
0,this.canonical.z,this.canonical.x,this.canonical.y)};Qf.prototype.unwrapTo=function(z){return new Qf(this.overscaledZ,z,this.canonical.z,this.canonical.x,this.canonical.y)};Qf.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};Qf.prototype.toUnwrapped=function(){return new Bl(this.wrap,this.canonical)};Qf.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};Qf.prototype.getTilePoint=function(z){return this.canonical.getTilePoint(new bk(z.x-
this.wrap,z.y))};Yc("CanonicalTileID",ck);Yc("OverscaledTileID",Qf,{omit:["posMatrix"]});var nj=function(z,M,S){if(this.uid=z,M.height!==M.width)throw new RangeError("DEM tiles must be square");if(S&&"mapbox"!==S&&"terrarium"!==S)return x('"'+S+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=M.height;z=this.dim=M.height-2;this.data=new Uint32Array(M.data.buffer);this.encoding=S||"mapbox";for(M=0;M<z;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,
M)],this.data[this._idx(z,M)]=this.data[this._idx(z-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,z)]=this.data[this._idx(M,z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)];this.data[this._idx(z,-1)]=this.data[this._idx(z-1,0)];this.data[this._idx(-1,z)]=this.data[this._idx(0,z-1)];this.data[this._idx(z,z)]=this.data[this._idx(z-1,z-1)]};nj.prototype.get=function(z,M){var S=new Uint8Array(this.data.buffer);z=4*this._idx(z,M);return("terrarium"===this.encoding?
this._unpackTerrarium:this._unpackMapbox)(S[z],S[z+1],S[z+2])};nj.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1E4]};nj.prototype._idx=function(z,M){if(-1>z||z>=this.dim+1||-1>M||M>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(M+1)*this.stride+(z+1)};nj.prototype._unpackMapbox=function(z,M,S){return(65536*z+256*M+S)/10-1E4};nj.prototype._unpackTerrarium=function(z,M,S){return 256*z+M+S/256-32768};
nj.prototype.getPixels=function(){return new Yf({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};nj.prototype.backfillBorder=function(z,M,S){if(this.dim!==z.dim)throw Error("dem dimension mismatch");var ia=M*this.dim,ta=M*this.dim+this.dim,Ba=S*this.dim,La=S*this.dim+this.dim;switch(M){case -1:ia=ta-1;break;case 1:ta=ia+1}switch(S){case -1:Ba=La-1;break;case 1:La=Ba+1}M=-M*this.dim;for(S=-S*this.dim;Ba<La;Ba++)for(var Wa=ia;Wa<ta;Wa++)this.data[this._idx(Wa,Ba)]=z.data[this._idx(Wa+
M,Ba+S)]};Yc("DEMData",nj);var hl=function(z){this._stringToNumber={};this._numberToString=[];for(var M=0;M<z.length;M++){var S=z[M];this._stringToNumber[S]=M;this._numberToString[M]=S}};hl.prototype.encode=function(z){return this._stringToNumber[z]};hl.prototype.decode=function(z){return this._numberToString[z]};var il=function(z,M,S,ia,ta){this.type="Feature";this._vectorTileFeature=z;z._z=M;z._x=S;z._y=ia;this.properties=z.properties;this.id=ta},vl={geometry:{configurable:!0}};vl.geometry.get=
function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};vl.geometry.set=function(z){this._geometry=z};il.prototype.toJSON=function(){var z={geometry:this.geometry},M;for(M in this)"_geometry"!==M&&"_vectorTileFeature"!==M&&(z[M]=this[M]);return z};Object.defineProperties(il.prototype,vl);var sk=function(){this.state={};this.stateChanges={};this.deletedStates=
{}};sk.prototype.updateState=function(z,M,S){M=String(M);if(this.stateChanges[z]=this.stateChanges[z]||{},this.stateChanges[z][M]=this.stateChanges[z][M]||{},g(this.stateChanges[z][M],S),null===this.deletedStates[z])for(var ia in this.deletedStates[z]={},this.state[z])ia!==M&&(this.deletedStates[z][ia]=null);else if(this.deletedStates[z]&&null===this.deletedStates[z][M])for(var ta in this.deletedStates[z][M]={},this.state[z][M])S[ta]||(this.deletedStates[z][M][ta]=null);else for(var Ba in S)this.deletedStates[z]&&
this.deletedStates[z][M]&&null===this.deletedStates[z][M][Ba]&&delete this.deletedStates[z][M][Ba]};sk.prototype.removeFeatureState=function(z,M,S){if(null!==this.deletedStates[z]){var ia=String(M);if(this.deletedStates[z]=this.deletedStates[z]||{},S&&void 0!==M)null!==this.deletedStates[z][ia]&&(this.deletedStates[z][ia]=this.deletedStates[z][ia]||{},this.deletedStates[z][ia][S]=null);else if(void 0!==M)if(this.stateChanges[z]&&this.stateChanges[z][ia])for(S in this.deletedStates[z][ia]={},this.stateChanges[z][ia])this.deletedStates[z][ia][S]=
null;else this.deletedStates[z][ia]=null;else this.deletedStates[z]=null}};sk.prototype.getState=function(z,M){var S=String(M);S=g({},(this.state[z]||{})[S],(this.stateChanges[z]||{})[S]);if(null===this.deletedStates[z])return{};if(this.deletedStates[z]){z=this.deletedStates[z][M];if(null===z)return{};for(var ia in z)delete S[ia]}return S};sk.prototype.initializeTileState=function(z,M){z.setFeatureState(this.state,M)};sk.prototype.coalesceChanges=function(z,M){var S={};for(La in this.stateChanges){this.state[La]=
this.state[La]||{};var ia={},ta;for(ta in this.stateChanges[La])this.state[La][ta]||(this.state[La][ta]={}),g(this.state[La][ta],this.stateChanges[La][ta]),ia[ta]=this.state[La][ta];S[La]=ia}for(var Ba in this.deletedStates){this.state[Ba]=this.state[Ba]||{};var La={};if(null===this.deletedStates[Ba])for(var Wa in this.state[Ba])La[Wa]={},this.state[Ba][Wa]={};else for(var kb in this.deletedStates[Ba]){if(null===this.deletedStates[Ba][kb])this.state[Ba][kb]={};else for(ia=0,ta=Object.keys(this.deletedStates[Ba][kb]);ia<
ta.length;ia+=1)delete this.state[Ba][kb][ta[ia]];La[kb]=this.state[Ba][kb]}S[Ba]=S[Ba]||{};g(S[Ba],La)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(S).length)for(var vb in z)z[vb].setFeatureState(S,M)};var oj=function(z,M){this.tileID=z;this.x=z.canonical.x;this.y=z.canonical.y;this.z=z.canonical.z;this.grid=new pd(8192,16,0);this.grid3D=new pd(8192,16,0);this.featureIndexArray=new aj;this.promoteId=M};oj.prototype.insert=function(z,M,S,ia,ta,Ba){z=this.featureIndexArray.length;
this.featureIndexArray.emplaceBack(S,ia,ta);S=Ba?this.grid3D:this.grid;for(ia=0;ia<M.length;ia++){ta=M[ia];Ba=[1/0,1/0,-1/0,-1/0];for(var La=0;La<ta.length;La++){var Wa=ta[La];Ba[0]=Math.min(Ba[0],Wa.x);Ba[1]=Math.min(Ba[1],Wa.y);Ba[2]=Math.max(Ba[2],Wa.x);Ba[3]=Math.max(Ba[3],Wa.y)}8192>Ba[0]&&8192>Ba[1]&&0<=Ba[2]&&0<=Ba[3]&&S.insert(z,Ba[0],Ba[1],Ba[2],Ba[3])}};oj.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new xi.VectorTile(new Oe(this.rawTileData))).layers,this.sourceLayerCoder=
new hl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers};oj.prototype.query=function(z,M,S,ia){var ta=this;this.loadVTLayers();var Ba=z.params||{},La=8192/z.tileSize/z.scale,Wa=zb(Ba.filter),kb=z.queryGeometry,vb=z.queryPadding*La,Ib=ng(kb),Sb=this.grid.query(Ib.minX-vb,Ib.minY-vb,Ib.maxX+vb,Ib.maxY+vb),ic=ng(z.cameraQueryGeometry);Ib=0;for(ic=this.grid3D.query(ic.minX-vb,ic.minY-vb,ic.maxX+vb,ic.maxY+vb,function(tc,Qc,wd,Ad){a:{var od=z.cameraQueryGeometry;tc-=
vb;Qc-=vb;wd+=vb;Ad+=vb;for(var Od=0;Od<od.length;Od+=1){var Nd=od[Od];if(tc<=Nd.x&&Qc<=Nd.y&&wd>=Nd.x&&Ad>=Nd.y){od=!0;break a}}tc=[new ge(tc,Qc),new ge(tc,Ad),new ge(wd,Ad),new ge(wd,Qc)];if(2<od.length)for(Qc=0;Qc<tc.length;Qc+=1)if(Ob(od,tc[Qc])){od=!0;break a}for(Qc=0;Qc<od.length-1;Qc++){Ad=od[Qc];wd=od[Qc+1];Od=tc;Nd=Od[0];var Sd=Od[2];Ad.x<Nd.x&&wd.x<Nd.x||Ad.x>Sd.x&&wd.x>Sd.x||Ad.y<Nd.y&&wd.y<Nd.y||Ad.y>Sd.y&&wd.y>Sd.y?Ad=!1:(Nd=A(Ad,wd,Od[0]),Ad=Nd!==A(Ad,wd,Od[1])||Nd!==A(Ad,wd,Od[2])||
Nd!==A(Ad,wd,Od[3]));if(Ad){od=!0;break a}}od=!1}return od});Ib<ic.length;Ib+=1)Sb.push(ic[Ib]);Sb.sort(ri);var ec,uc={};Ib=function(tc){tc=Sb[tc];if(tc!==ec){ec=tc;tc=ta.featureIndexArray.get(tc);var Qc=null;ta.loadMatchingFeature(uc,tc.bucketIndex,tc.sourceLayerIndex,tc.featureIndex,Wa,Ba.layers,Ba.availableImages,M,S,ia,function(wd,Ad,od){return Qc||(Qc=Ge(wd)),Ad.queryIntersectsFeature(kb,wd,od,Qc,ta.z,z.transform,La,z.pixelPosMatrix)})}};for(ic=0;ic<Sb.length;ic++)Ib(ic);return uc};oj.prototype.loadMatchingFeature=
function(z,M,S,ia,ta,Ba,La,Wa,kb,vb,Ib){M=this.bucketLayerIDs[M];var Sb;if(!(Sb=!Ba))a:{for(Sb=0;Sb<Ba.length;Sb++)if(0<=M.indexOf(Ba[Sb])){Sb=!0;break a}Sb=!1}if(Sb&&(Sb=this.sourceLayerCoder.decode(S),S=this.vtLayers[Sb].feature(ia),ta.filter(new df(this.tileID.overscaledZ),S)))for(ta=this.getId(S,Sb),Sb=0;Sb<M.length;Sb++){var ic=M[Sb];if(!(Ba&&0>Ba.indexOf(ic))){var ec=Wa[ic];if(ec){var uc={};void 0!==ta&&vb&&(uc=vb.getState(ec.sourceLayer||"_geojsonTileLayer",ta));var tc=kb[ic];tc.paint=lh(tc.paint,
ec.paint,S,uc,La);tc.layout=lh(tc.layout,ec.layout,S,uc,La);if(ec=!Ib||Ib(S,ec,uc))uc=new il(S,this.z,this.x,this.y,ta),uc.layer=tc,tc=z[ic],void 0===tc&&(tc=z[ic]=[]),tc.push({featureIndex:ia,feature:uc,intersectionZ:ec})}}}};oj.prototype.lookupSymbolFeatures=function(z,M,S,ia,ta,Ba,La,Wa){var kb={};this.loadVTLayers();ta=zb(ta);for(var vb=0;vb<z.length;vb+=1)this.loadMatchingFeature(kb,S,ia,z[vb],ta,Ba,La,Wa,M);return kb};oj.prototype.hasLayer=function(z){for(var M=0,S=this.bucketLayerIDs;M<S.length;M+=
1)for(var ia=0,ta=S[M];ia<ta.length;ia+=1)if(z===ta[ia])return!0;return!1};oj.prototype.getId=function(z,M){var S=z.id;return this.promoteId&&"boolean"==typeof(S=z.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[M]])&&(S=Number(S)),S};Yc("FeatureIndex",oj,{omit:["rawTileData","sourceLayerCoder"]});var Zf=function(z,M){this.tileID=z;this.uid=Gg++;this.uses=0;this.tileSize=M;this.buckets={};this.expirationTime=null;this.queryPadding=0;this.hasRTLText=this.hasSymbolBuckets=!1;
this.dependencies={};this.expiredRequestCount=0;this.state="loading"};Zf.prototype.registerFadeDuration=function(z){z+=this.timeAdded;z<gg.now()||this.fadeEndTime&&z<this.fadeEndTime||(this.fadeEndTime=z)};Zf.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state};Zf.prototype.loadVectorData=function(z,M,S){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",z){for(var ia in z.featureIndex&&(this.latestFeatureIndex=z.featureIndex,
z.rawTileData?(this.latestRawTileData=z.rawTileData,this.latestFeatureIndex.rawTileData=z.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=z.collisionBoxArray,this.buckets=function(Wa,kb){var vb={};if(!kb)return vb;for(var Ib=function(){var ec=ic[Sb],uc=ec.layerIds.map(function(Qc){return kb.getLayer(Qc)}).filter(Boolean);if(0!==uc.length){ec.layers=uc;ec.stateDependentLayerIds&&(ec.stateDependentLayers=ec.stateDependentLayerIds.map(function(Qc){return uc.filter(function(wd){return wd.id===
Qc})[0]}));for(var tc=0;tc<uc.length;tc+=1)vb[uc[tc].id]=ec}},Sb=0,ic=Wa;Sb<ic.length;Sb+=1)Ib();return vb}(z.buckets,M.style),this.hasSymbolBuckets=!1,this.buckets){var ta=this.buckets[ia];if(ta instanceof ke){if(this.hasSymbolBuckets=!0,!S)break;ta.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ba in this.buckets)if(S=this.buckets[Ba],S instanceof ke&&S.hasRTLText){this.hasRTLText=!0;xg.isLoading()||xg.isLoaded()||"deferred"!==ig||Oj();break}for(var La in this.queryPadding=
0,this.buckets)Ba=this.buckets[La],this.queryPadding=Math.max(this.queryPadding,M.style.getLayer(La).queryRadius(Ba));z.imageAtlas&&(this.imageAtlas=z.imageAtlas);z.glyphAtlasImage&&(this.glyphAtlasImage=z.glyphAtlasImage)}else this.collisionBoxArray=new nk};Zf.prototype.unloadVectorData=function(){for(var z in this.buckets)this.buckets[z].destroy();this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();
this.latestFeatureIndex=null;this.state="unloaded"};Zf.prototype.getBucket=function(z){return this.buckets[z.id]};Zf.prototype.upload=function(z){for(var M in this.buckets){var S=this.buckets[M];S.uploadPending()&&S.upload(z)}M=z.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ak(z,this.imageAtlas.image,M.RGBA),this.imageAtlas.uploaded=!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new ak(z,this.glyphAtlasImage,M.ALPHA),this.glyphAtlasImage=null)};Zf.prototype.prepare=
function(z){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(z,this.imageAtlasTexture)};Zf.prototype.queryRenderedFeatures=function(z,M,S,ia,ta,Ba,La,Wa,kb,vb){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ia,cameraQueryGeometry:ta,scale:Ba,tileSize:this.tileSize,pixelPosMatrix:vb,transform:Wa,params:La,queryPadding:this.queryPadding*kb},z,M,S):{}};Zf.prototype.querySourceFeatures=function(z,M){var S=this.latestFeatureIndex;if(S&&
S.rawTileData){var ia=S.loadVTLayers(),ta=M?M.sourceLayer:"";if(ia=ia._geojsonTileLayer||ia[ta]){M=zb(M&&M.filter);var Ba=this.tileID.canonical,La=Ba.z,Wa=Ba.x;Ba=Ba.y;for(var kb={z:La,x:Wa,y:Ba},vb=0;vb<ia.length;vb++){var Ib=ia.feature(vb);if(M.filter(new df(this.tileID.overscaledZ),Ib)){var Sb=S.getId(Ib,ta);Ib=new il(Ib,La,Wa,Ba,Sb);Ib.tile=kb;z.push(Ib)}}}}};Zf.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};Zf.prototype.patternsLoaded=
function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length};Zf.prototype.setExpiryData=function(z){var M=this.expirationTime;z.cacheControl?(z=t(z.cacheControl),z["max-age"]&&(this.expirationTime=Date.now()+1E3*z["max-age"])):z.expires&&(this.expirationTime=(new Date(z.expires)).getTime());if(this.expirationTime){z=Date.now();var S=!1;this.expirationTime>z?S=!1:M?this.expirationTime<M?S=!0:(M=this.expirationTime-M)?this.expirationTime=z+Math.max(M,3E4):S=!0:S=!0;S?(this.expiredRequestCount++,
this.state="expired"):this.expiredRequestCount=0}};Zf.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};Zf.prototype.setFeatureState=function(z,M){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(z).length){var S=this.latestFeatureIndex.loadVTLayers(),ia;for(ia in this.buckets)if(M.style.hasLayer(ia)){var ta=
this.buckets[ia],Ba=ta.layers[0].sourceLayer||"_geojsonTileLayer",La=S[Ba];Ba=z[Ba];La&&Ba&&0!==Object.keys(Ba).length&&(ta.update(Ba,La,this.imageAtlas&&this.imageAtlas.patternPositions||{}),(La=M&&M.style&&M.style.getLayer(ia))&&(this.queryPadding=Math.max(this.queryPadding,La.queryRadius(ta))))}}};Zf.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil};Zf.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<gg.now()};Zf.prototype.clearFadeHold=
function(){this.symbolFadeHoldUntil=void 0};Zf.prototype.setHoldDuration=function(z){this.symbolFadeHoldUntil=gg.now()+z};Zf.prototype.setDependencies=function(z,M){for(var S={},ia=0;ia<M.length;ia+=1)S[M[ia]]=!0;this.dependencies[z]=S};Zf.prototype.hasDependency=function(z,M){for(var S=0;S<z.length;S+=1){var ia=this.dependencies[z[S]];if(ia)for(var ta=0,Ba=M;ta<Ba.length;ta+=1)if(ia[Ba[ta]])return!0}return!1};var Ij=self.performance,Cl=function(z){this._marks={start:[z.url,"start"].join("#"),end:[z.url,
"end"].join("#"),measure:z.url.toString()};Ij.mark(this._marks.start)};Cl.prototype.finish=function(){Ij.mark(this._marks.end);var z=Ij.getEntriesByName(this._marks.measure);return 0===z.length&&(Ij.measure(this._marks.measure,this._marks.start,this._marks.end),z=Ij.getEntriesByName(this._marks.measure),Ij.clearMarks(this._marks.start),Ij.clearMarks(this._marks.end),Ij.clearMeasures(this._marks.measure)),z};a.Actor=rk;a.AlphaImage=Pi;a.CanonicalTileID=ck;a.CollisionBoxArray=nk;a.Color=Bd;a.DEMData=
nj;a.DataConstantProperty=Ud;a.DictionaryCoder=hl;a.EXTENT=8192;a.ErrorEvent=Hc;a.EvaluationParameters=df;a.Event=yc;a.Evented=Dc;a.FeatureIndex=oj;a.FillBucket=Mh;a.FillExtrusionBucket=Kh;a.ImageAtlas=dd;a.ImagePosition=Uc;a.LineBucket=Ea;a.LngLat=qf;a.LngLatBounds=Pf;a.MercatorCoordinate=bk;a.ONE_EM=24;a.OverscaledTileID=Qf;a.Point=ge;a.Point$1=ge;a.Properties=Jg;a.Protobuf=Oe;a.RGBAImage=Yf;a.RequestManager=vg;a.RequestPerformance=Cl;a.ResourceType=za;a.SegmentVector=Hf;a.SourceFeatureState=sk;
a.StructArrayLayout1ui2=Fk;a.StructArrayLayout2f1f2i16=$g;a.StructArrayLayout2i4=Hi;a.StructArrayLayout3ui6=ji;a.StructArrayLayout4i8=ti;a.SymbolBucket=ke;a.Texture=ak;a.Tile=Zf;a.Transitionable=fi;a.Uniform1f=pk;a.Uniform1i=nl;a.Uniform2f=ol;a.Uniform3f=pl;a.Uniform4f=bl;a.UniformColor=Kk;a.UniformMatrix4f=rl;a.UnwrappedTileID=Bl;a.ValidationError=va;a.WritingMode=id;a.ZoomHistory=ik;a.add=function(z,M,S){return z[0]=M[0]+S[0],z[1]=M[1]+S[1],z[2]=M[2]+S[2],z};a.addDynamicAttributes=Ff;a.asyncAll=
function(z,M,S){if(!z.length)return S(null,[]);var ia=z.length,ta=Array(z.length),Ba=null;z.forEach(function(La,Wa){M(La,function(kb,vb){kb&&(Ba=kb);ta[Wa]=vb;0==--ia&&S(Ba,ta)})})};a.bezier=k;a.bindAll=u;a.browser=gg;a.cacheEntryPossiblyAdded=function(z){++fa>X&&(z.getActor().send("enforceCacheSizeLimit",U),fa=0)};a.clamp=c;a.clearTileCache=function(z){var M=self.caches.delete("mapbox-tiles");z&&M.catch(z).then(function(){return z()})};a.clipLine=Bf;a.clone=function(z){var M=new Lg(16);return M[0]=
z[0],M[1]=z[1],M[2]=z[2],M[3]=z[3],M[4]=z[4],M[5]=z[5],M[6]=z[6],M[7]=z[7],M[8]=z[8],M[9]=z[9],M[10]=z[10],M[11]=z[11],M[12]=z[12],M[13]=z[13],M[14]=z[14],M[15]=z[15],M};a.clone$1=C;a.clone$2=function(z){var M=new Lg(3);return M[0]=z[0],M[1]=z[1],M[2]=z[2],M};a.collisionCircleLayout=Tb;a.config=Ye;a.create=function(){var z=new Lg(16);return Lg!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=0,z[12]=0,z[13]=0,z[14]=0),z[0]=1,z[5]=1,z[10]=1,z[15]=1,z};a.create$1=function(){var z=
new Lg(9);return Lg!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z};a.create$2=function(){var z=new Lg(4);return Lg!=Float32Array&&(z[1]=0,z[2]=0),z[0]=1,z[3]=1,z};a.createCommonjsModule=f;a.createExpression=Pc;a.createLayout=Md;a.createStyleLayer=function(z){return"custom"===z.type?new bf(z):new bh[z.type](z)};a.cross=function(z,M,S){var ia=M[0],ta=M[1];M=M[2];var Ba=S[0],La=S[1];S=S[2];return z[0]=ta*S-M*La,z[1]=M*Ba-ia*S,z[2]=ia*La-ta*Ba,z};a.deepEqual=function ia(M,
S){if(Array.isArray(M)){if(!Array.isArray(S)||M.length!==S.length)return!1;for(var ta=0;ta<M.length;ta++)if(!ia(M[ta],S[ta]))return!1;return!0}if("object"==typeof M&&null!==M&&null!==S){if("object"!=typeof S||Object.keys(M).length!==Object.keys(S).length)return!1;for(ta in M)if(!ia(M[ta],S[ta]))return!1;return!0}return M===S};a.dot=function(M,S){return M[0]*S[0]+M[1]*S[1]+M[2]*S[2]};a.dot$1=function(M,S){return M[0]*S[0]+M[1]*S[1]+M[2]*S[2]+M[3]*S[3]};a.ease=vj;a.emitValidationErrors=Kd;a.endsWith=
v;a.enforceCacheSizeLimit=function(M){N();wg&&wg.then(function(S){S.keys().then(function(ia){for(var ta=0;ta<ia.length-M;ta++)S.delete(ia[ta])})})};a.evaluateSizeForFeature=Wh;a.evaluateSizeForZoom=Di;a.evaluateVariableOffset=yh;a.evented=yj;a.extend=g;a.featureFilter=zb;a.filterObject=D;a.fromRotation=function(M,S){var ia=Math.sin(S);S=Math.cos(S);return M[0]=S,M[1]=ia,M[2]=0,M[3]=-ia,M[4]=S,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M};a.getAnchorAlignment=wh;a.getAnchorJustification=oi;a.getArrayBuffer=Mb;a.getImage=
Ic;a.getJSON=function(M,S){return mb(g(M,{type:"json"}),S)};a.getRTLTextPluginStatus=function(){return ig};a.getReferrer=ab;a.getVideo=function(M,S){var ia=self.document.createElement("video");ia.muted=!0;ia.onloadstart=function(){S(null,ia)};for(var ta=0;ta<M.length;ta++){var Ba=self.document.createElement("source");var La=M[ta];var Wa=void 0;(Wa=self.document.createElement("a")).href=La;Wa.protocol===self.document.location.protocol&&Wa.host===self.document.location.host||(ia.crossOrigin="Anonymous");
Ba.src=M[ta];ia.appendChild(Ba)}return{cancel:function(){}}};a.identity=Oc;a.invert=function(M,S){var ia=S[0],ta=S[1],Ba=S[2],La=S[3],Wa=S[4],kb=S[5],vb=S[6],Ib=S[7],Sb=S[8],ic=S[9],ec=S[10],uc=S[11],tc=S[12],Qc=S[13],wd=S[14];S=S[15];var Ad=ia*kb-ta*Wa,od=ia*vb-Ba*Wa,Od=ia*Ib-La*Wa,Nd=ta*vb-Ba*kb,Sd=ta*Ib-La*kb,be=Ba*Ib-La*vb,je=Sb*Qc-ic*tc,qe=Sb*wd-ec*tc,re=Sb*S-uc*tc,he=ic*wd-ec*Qc,le=ic*S-uc*Qc,Ee=ec*S-uc*wd,ce=Ad*Ee-od*le+Od*he+Nd*re-Sd*qe+be*je;return ce?(M[0]=(kb*Ee-vb*le+Ib*he)*(ce=1/ce),
M[1]=(Ba*le-ta*Ee-La*he)*ce,M[2]=(Qc*be-wd*Sd+S*Nd)*ce,M[3]=(ec*Sd-ic*be-uc*Nd)*ce,M[4]=(vb*re-Wa*Ee-Ib*qe)*ce,M[5]=(ia*Ee-Ba*re+La*qe)*ce,M[6]=(wd*Od-tc*be-S*od)*ce,M[7]=(Sb*be-ec*Od+uc*od)*ce,M[8]=(Wa*le-kb*re+Ib*je)*ce,M[9]=(ta*re-ia*le-La*je)*ce,M[10]=(tc*Sd-Qc*Od+S*Ad)*ce,M[11]=(ic*Od-Sb*Sd-uc*Ad)*ce,M[12]=(kb*qe-Wa*he-vb*je)*ce,M[13]=(ia*he-ta*qe+Ba*je)*ce,M[14]=(Qc*od-tc*Nd-wd*Ad)*ce,M[15]=(Sb*Nd-ic*od+ec*Ad)*ce,M):null};a.isChar=Zd;a.isMapboxURL=J;a.keysDifference=function(M,S){var ia=[],
ta;for(ta in M)ta in S||ia.push(ta);return ia};a.makeRequest=mb;a.mapObject=w;a.mercatorXfromLng=Zh;a.mercatorYfromLat=nh;a.mercatorZfromAltitude=function(M,S){return M/(fl*Math.cos(S*Math.PI/180))};a.mul=gd;a.multiply=gd;a.mvt=xi;a.normalize=function(M,S){var ia=S[0],ta=S[1],Ba=S[2];ia=ia*ia+ta*ta+Ba*Ba;return 0<ia&&(ia=1/Math.sqrt(ia)),M[0]=S[0]*ia,M[1]=S[1]*ia,M[2]=S[2]*ia,M};a.number=Aa;a.offscreenCanvasSupported=Q;a.ortho=function(M,S,ia,ta,Ba,La,Wa){var kb=1/(S-ia),vb=1/(ta-Ba),Ib=1/(La-Wa);
return M[0]=-2*kb,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=-2*vb,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=2*Ib,M[11]=0,M[12]=(S+ia)*kb,M[13]=(Ba+ta)*vb,M[14]=(Wa+La)*Ib,M[15]=1,M};a.parseGlyphPBF=function(M){return(new Oe(M)).readFields(Vi,[])};a.pbf=Oe;a.performSymbolLayout=function(M,S,ia,ta,Ba,La,Wa){M.createArrays();M.tilePixelRatio=8192/(512*M.overscaling);M.compareText={};M.iconsNeedLinear=!1;var kb=M.layers[0].layout,vb=M.layers[0]._unevaluatedLayout._values,Ib={};if("composite"===M.textSizeData.kind){var Sb=
M.textSizeData,ic=Sb.maxZoom;Ib.compositeTextSizes=[vb["text-size"].possiblyEvaluate(new df(Sb.minZoom),Wa),vb["text-size"].possiblyEvaluate(new df(ic),Wa)]}"composite"===M.iconSizeData.kind&&(Sb=M.iconSizeData,ic=Sb.maxZoom,Ib.compositeIconSizes=[vb["icon-size"].possiblyEvaluate(new df(Sb.minZoom),Wa),vb["icon-size"].possiblyEvaluate(new df(ic),Wa)]);Ib.layoutTextSize=vb["text-size"].possiblyEvaluate(new df(M.zoom+1),Wa);Ib.layoutIconSize=vb["icon-size"].possiblyEvaluate(new df(M.zoom+1),Wa);Ib.textMaxSize=
vb["text-size"].possiblyEvaluate(new df(18));var ec=24*kb.get("text-line-height"),uc="map"===kb.get("text-rotation-alignment")&&"point"!==kb.get("symbol-placement"),tc=kb.get("text-keep-upright"),Qc=kb.get("text-size");vb=function(){var od=Ad[wd],Od=kb.get("text-font").evaluate(od,{},Wa).join(","),Nd=Qc.evaluate(od,{},Wa),Sd=Ib.layoutTextSize.evaluate(od,{},Wa),be=Ib.layoutIconSize.evaluate(od,{},Wa),je={horizontal:{},vertical:void 0},qe=od.text,re=[0,0];if(qe){var he=qe.toString(),le=24*kb.get("text-letter-spacing").evaluate(od,
{},Wa),Ee=function(Ie){for(var Af=0;Af<Ie.length;Af+=1)if(Uf=Ie[Af].charCodeAt(0),Zd.Arabic(Uf)||Zd["Arabic Supplement"](Uf)||Zd["Arabic Extended-A"](Uf)||Zd["Arabic Presentation Forms-A"](Uf)||Zd["Arabic Presentation Forms-B"](Uf))return!1;var Uf;return!0}(he)?le:0,ce=kb.get("text-anchor").evaluate(od,{},Wa),Yd=kb.get("text-variable-anchor");Yd||(re=(le=kb.get("text-radial-offset").evaluate(od,{},Wa))?yh(ce,[24*le,ne]):kb.get("text-offset").evaluate(od,{},Wa).map(function(Ie){return 24*Ie}));var de=
uc?"center":kb.get("text-justify").evaluate(od,{},Wa),Me=kb.get("symbol-placement"),kf="point"===Me?24*kb.get("text-max-width").evaluate(od,{},Wa):0;le=function(){M.allowVerticalPlacement&&Ce(he)&&(je.vertical=jh(qe,S,ia,Ba,Od,kf,ec,ce,"left",Ee,re,id.vertical,!0,Me,Sd,Nd))};if(!uc&&Yd){Yd="auto"===de?Yd.map(function(Ie){return oi(Ie)}):[de];de=!1;for(var pg=0;pg<Yd.length;pg++){var Of=Yd[pg];if(!je.horizontal[Of])if(de)je.horizontal[Of]=je.horizontal[0];else{var lf=jh(qe,S,ia,Ba,Od,kf,ec,"center",
Of,Ee,re,id.horizontal,!1,Me,Sd,Nd);lf&&(je.horizontal[Of]=lf,de=1===lf.positionedLines.length)}}le()}else"auto"===de&&(de=oi(ce)),(Yd=jh(qe,S,ia,Ba,Od,kf,ec,ce,de,Ee,re,id.horizontal,!1,Me,Sd,Nd))&&(je.horizontal[de]=Yd),le(),Ce(he)&&uc&&tc&&(je.vertical=jh(qe,S,ia,Ba,Od,kf,ec,ce,de,Ee,re,id.vertical,!1,Me,Sd,Nd))}le=void 0;Yd=!1;od.icon&&od.icon.name&&(de=ta[od.icon.name])&&(le=function(Ie,Af,Uf){var jg=wh(Uf);Uf=Af[0]-Ie.displaySize[0]*jg.horizontalAlign;Af=Af[1]-Ie.displaySize[1]*jg.verticalAlign;
return{image:Ie,top:Af,bottom:Af+Ie.displaySize[1],left:Uf,right:Uf+Ie.displaySize[0]}}(Ba[od.icon.name],kb.get("icon-offset").evaluate(od,{},Wa),kb.get("icon-anchor").evaluate(od,{},Wa)),Yd=de.sdf,void 0===M.sdfIcons?M.sdfIcons=de.sdf:M.sdfIcons!==de.sdf&&x("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(de.pixelRatio!==M.pixelRatio||0!==kb.get("icon-rotate").constantOr(1))&&(M.iconsNeedLinear=!0));de=vf(je.horizontal)||je.vertical;M.iconsInText=!!de&&de.iconsInText;(de||
le)&&function(Ie,Af,Uf,jg,Yj,Nh,tf,Ag,lj,Hj,Zj){var qg=Nh.textMaxSize.evaluate(Af,{});void 0===qg&&(qg=tf);var mj,Df=Ie.layers[0].layout,fh=Df.get("icon-offset").evaluate(Af,{},Zj),ef=vf(Uf.horizontal),Bg=tf/24,Ml=Ie.tilePixelRatio*Bg;qg=Ie.tilePixelRatio*qg/24;var Nl=Ie.tilePixelRatio*Ag,ki=Ie.tilePixelRatio*Df.get("symbol-spacing"),Ol=Df.get("text-padding")*Ie.tilePixelRatio,Pl=Df.get("icon-padding")*Ie.tilePixelRatio;Ag=Df.get("text-max-angle")/180*Math.PI;var Ql="map"===Df.get("text-rotation-alignment")&&
"point"!==Df.get("symbol-placement"),Rl="map"===Df.get("icon-rotation-alignment")&&"point"!==Df.get("symbol-placement"),dk=Df.get("symbol-placement"),Jj=ki/2,tk=Df.get("icon-text-fit");jg&&"none"!==tk&&(Ie.allowVerticalPlacement&&Uf.vertical&&(mj=Bi(jg,Uf.vertical,tk,Df.get("icon-text-fit-padding"),fh,Bg)),ef&&(jg=Bi(jg,ef,tk,Df.get("icon-text-fit-padding"),fh,Bg)));Df=function(Sl,Sk){0>Sk.x||8192<=Sk.x||0>Sk.y||8192<=Sk.y||function(Ef,zi,jl,Qi,pj,kl,Kj,li,uk,Tk,vk,wk,wl,ll,ek,fk,Uk,Dl,gk,Vk,th,ml,
El,Ri,Tl){var Wk,xk,yk=Ef.addToLineVertexArray(zi,jl),Xk=0,Fl=jl=0,Gl=0,zk=-1,xl=-1,qj={},Hl=cj(""),yl=0,zl=0;if(void 0===li._unevaluatedLayout.getValue("text-radial-offset")?(yl=(Wk=li.layout.get("text-offset").evaluate(th,{},Ri).map(function(Yk){return 24*Yk}))[0],zl=Wk[1]):(yl=24*li.layout.get("text-radial-offset").evaluate(th,{},Ri),zl=ne),Ef.allowVerticalPlacement&&Qi.vertical){Wk=li.layout.get("text-rotate").evaluate(th,{},Ri)+90;var hk=new nd(uk,zi,Tk,vk,wk,Qi.vertical,wl,ll,ek,Wk);Kj&&(xk=
new nd(uk,zi,Tk,vk,wk,Kj,Uk,Dl,ek,Wk))}if(pj){var rj=li.layout.get("icon-rotate").evaluate(th,{});Xk="none"!==li.layout.get("icon-text-fit");zk=Fg(pj,rj,El,Xk);Kj=Kj?Fg(Kj,rj,El,Xk):void 0;rj=new nd(uk,zi,Tk,vk,wk,pj,Uk,Dl,!1,rj);Xk=4*zk.length;Uk=Ef.iconSizeData;pj=null;"source"===Uk.kind?32640<(pj=[128*li.layout.get("icon-size").evaluate(th,{})])[0]&&x(Ef.layerIds[0]+': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".'):"composite"===Uk.kind&&(32640<(pj=[128*ml.compositeIconSizes[0].evaluate(th,
{},Ri),128*ml.compositeIconSizes[1].evaluate(th,{},Ri)])[0]||32640<pj[1])&&x(Ef.layerIds[0]+': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".');Ef.addSymbols(Ef.icon,zk,pj,Vk,gk,th,!1,zi,yk.lineStartIndex,yk.lineLength,-1,Ri);zk=Ef.icon.placedSymbolArray.length-1;Kj&&(jl=4*Kj.length,Ef.addSymbols(Ef.icon,Kj,pj,Vk,gk,th,id.vertical,zi,yk.lineStartIndex,yk.lineLength,-1,Ri),xl=Ef.icon.placedSymbolArray.length-1)}for(var Il in Qi.horizontal){gk=Qi.horizontal[Il];if(!Mg){Hl=cj(gk.text);
var Mg=li.layout.get("text-rotate").evaluate(th,{},Ri);Mg=new nd(uk,zi,Tk,vk,wk,gk,wl,ll,ek,Mg)}Vk=1===gk.positionedLines.length;if(Fl+=bg(Ef,zi,gk,kl,li,ek,th,fk,yk,Qi.vertical?id.horizontal:id.horizontalOnly,Vk?Object.keys(Qi.horizontal):[Il],qj,zk,ml,Ri),Vk)break}Qi.vertical&&(Gl+=bg(Ef,zi,Qi.vertical,kl,li,ek,th,fk,yk,id.vertical,["vertical"],qj,xl,ml,Ri));Qi=Mg?Mg.boxStartIndex:Ef.collisionBoxArray.length;kl=Mg?Mg.boxEndIndex:Ef.collisionBoxArray.length;li=hk?hk.boxStartIndex:Ef.collisionBoxArray.length;
uk=hk?hk.boxEndIndex:Ef.collisionBoxArray.length;vk=rj?rj.boxStartIndex:Ef.collisionBoxArray.length;wk=rj?rj.boxEndIndex:Ef.collisionBoxArray.length;ll=xk?xk.boxStartIndex:Ef.collisionBoxArray.length;ek=xk?xk.boxEndIndex:Ef.collisionBoxArray.length;fk=function(Yk,Jl){return Yk&&Yk.circleDiameter?Math.max(Yk.circleDiameter,Jl):Jl};Mg=fk(Mg,-1);Mg=fk(hk,Mg);Mg=fk(rj,Mg);(hk=-1<(Mg=fk(xk,Mg))?1:0)&&(Mg*=Tl/24);Ef.glyphOffsetArray.length>=ke.MAX_GLYPHS&&x("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");
void 0!==th.sortKey&&Ef.addToSortKeyRanges(Ef.symbolInstances.length,th.sortKey);Ef.symbolInstances.emplaceBack(zi.x,zi.y,0<=qj.right?qj.right:-1,0<=qj.center?qj.center:-1,0<=qj.left?qj.left:-1,qj.vertical||-1,zk,xl,Hl,Qi,kl,li,uk,vk,wk,ll,ek,Tk,Fl,Gl,Xk,jl,hk,0,wl,yl,zl,Mg)}(Ie,Sk,Sl,Uf,jg,Yj,mj,Ie.layers[0],Ie.collisionBoxArray,Af.index,Af.sourceLayerIndex,Ie.index,Ml,Ol,Ql,lj,Nl,Pl,Rl,fh,Af,Nh,Hj,Zj,tf)};if("line"===dk)for(Bg=0,dk=Bf(Af.geometry,0,0,8192,8192);Bg<dk.length;Bg+=1){tk=dk[Bg];for(var Al=
0,Kl=Wi(tk,ki,Ag,Uf.vertical||ef,jg,24,qg,Ie.overscaling,8192);Al<Kl.length;Al+=1){var Ll=Kl[Al];ef&&qi(Ie,ef.text,Jj,Ll)||Df(tk,Ll)}}else if("line-center"===dk)for(ki=0,Jj=Af.geometry;ki<Jj.length;ki+=1)Bg=Jj[ki],1<Bg.length&&(dk=Ei(Bg,Ag,Uf.vertical||ef,jg,24,qg))&&Df(Bg,dk);else if("Polygon"===Af.type)for(ef=0,qg=Si(Af.geometry,0);ef<qg.length;ef+=1)Ag=qg[ef],ki=lg(Ag,16),Df(Ag[0],new td(ki.x,ki.y,0));else if("LineString"===Af.type)for(ef=0,qg=Af.geometry;ef<qg.length;ef+=1)Ag=qg[ef],Df(Ag,new td(Ag[0].x,
Ag[0].y,0));else if("Point"===Af.type)for(ef=0,qg=Af.geometry;ef<qg.length;ef+=1)for(Ag=0,ki=qg[ef];Ag<ki.length;Ag+=1)Jj=ki[Ag],Df([Jj],new td(Jj.x,Jj.y,0))}(M,od,je,le,ta,Ib,Sd,be,re,Yd,Wa)};for(var wd=0,Ad=M.features;wd<Ad.length;wd+=1)vb();La&&M.generateCollisionDebugBuffers()};a.perspective=function(M,S,ia,ta,Ba){var La;S=1/Math.tan(S/2);return M[0]=S/ia,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=S,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[11]=-1,M[12]=0,M[13]=0,M[15]=0,null!=Ba&&Ba!==1/0?(M[10]=(Ba+ta)*(La=1/(ta-
Ba)),M[14]=2*Ba*ta*La):(M[10]=-1,M[14]=-2*ta),M};a.pick=function(M,S){for(var ia={},ta=0;ta<S.length;ta++){var Ba=S[ta];Ba in M&&(ia[Ba]=M[Ba])}return ia};a.plugin=xg;a.polygonIntersectsPolygon=uf;a.postMapLoadEvent=Bb;a.postTurnstileEvent=pi;a.potpack=af;a.refProperties="type source source-layer minzoom maxzoom filter layout".split(" ");a.register=Yc;a.registerForPluginStateChange=function(M){return M({pluginStatus:ig,pluginURL:Lh}),yj.on("pluginStateChange",M),M};a.rotate=function(M,S,ia){var ta=
S[0],Ba=S[1],La=S[2];S=S[3];var Wa=Math.sin(ia);ia=Math.cos(ia);return M[0]=ta*ia+La*Wa,M[1]=Ba*ia+S*Wa,M[2]=ta*-Wa+La*ia,M[3]=Ba*-Wa+S*ia,M};a.rotateX=function(M,S,ia){var ta=Math.sin(ia);ia=Math.cos(ia);var Ba=S[4],La=S[5],Wa=S[6],kb=S[7],vb=S[8],Ib=S[9],Sb=S[10],ic=S[11];return S!==M&&(M[0]=S[0],M[1]=S[1],M[2]=S[2],M[3]=S[3],M[12]=S[12],M[13]=S[13],M[14]=S[14],M[15]=S[15]),M[4]=Ba*ia+vb*ta,M[5]=La*ia+Ib*ta,M[6]=Wa*ia+Sb*ta,M[7]=kb*ia+ic*ta,M[8]=vb*ia-Ba*ta,M[9]=Ib*ia-La*ta,M[10]=Sb*ia-Wa*ta,M[11]=
ic*ia-kb*ta,M};a.rotateZ=function(M,S,ia){var ta=Math.sin(ia);ia=Math.cos(ia);var Ba=S[0],La=S[1],Wa=S[2],kb=S[3],vb=S[4],Ib=S[5],Sb=S[6],ic=S[7];return S!==M&&(M[8]=S[8],M[9]=S[9],M[10]=S[10],M[11]=S[11],M[12]=S[12],M[13]=S[13],M[14]=S[14],M[15]=S[15]),M[0]=Ba*ia+vb*ta,M[1]=La*ia+Ib*ta,M[2]=Wa*ia+Sb*ta,M[3]=kb*ia+ic*ta,M[4]=vb*ia-Ba*ta,M[5]=Ib*ia-La*ta,M[6]=Sb*ia-Wa*ta,M[7]=ic*ia-kb*ta,M};a.scale=function(M,S,ia){var ta=ia[0],Ba=ia[1];ia=ia[2];return M[0]=S[0]*ta,M[1]=S[1]*ta,M[2]=S[2]*ta,M[3]=S[3]*
ta,M[4]=S[4]*Ba,M[5]=S[5]*Ba,M[6]=S[6]*Ba,M[7]=S[7]*Ba,M[8]=S[8]*ia,M[9]=S[9]*ia,M[10]=S[10]*ia,M[11]=S[11]*ia,M[12]=S[12],M[13]=S[13],M[14]=S[14],M[15]=S[15],M};a.scale$1=function(M,S,ia){return M[0]=S[0]*ia,M[1]=S[1]*ia,M[2]=S[2]*ia,M[3]=S[3]*ia,M};a.scale$2=function(M,S,ia){return M[0]=S[0]*ia,M[1]=S[1]*ia,M[2]=S[2]*ia,M};a.setCacheLimits=function(M,S){U=M;X=S};a.setRTLTextPlugin=function(M,S,ia){if(void 0===ia&&(ia=!1),"deferred"===ig||"loading"===ig||"loaded"===ig)throw Error("setRTLTextPlugin cannot be called multiple times.");
Lh=gg.resolveURL(M);ig="deferred";jk=S;Gd();ia||Oj()};a.sphericalToCartesian=function(M){var S=M[0],ia=M[1];M=M[2];return ia+=90,ia*=Math.PI/180,M*=Math.PI/180,{x:S*Math.cos(ia)*Math.sin(M),y:S*Math.sin(ia)*Math.sin(M),z:S*Math.cos(M)}};a.sqrLen=function(M){var S=M[0];M=M[1];return S*S+M*M};a.styleSpec=Xb;a.sub=function(M,S,ia){return M[0]=S[0]-ia[0],M[1]=S[1]-ia[1],M[2]=S[2]-ia[2],M};a.symbolSize=ud;a.transformMat3=function(M,S,ia){var ta=S[0],Ba=S[1];S=S[2];return M[0]=ta*ia[0]+Ba*ia[3]+S*ia[6],
M[1]=ta*ia[1]+Ba*ia[4]+S*ia[7],M[2]=ta*ia[2]+Ba*ia[5]+S*ia[8],M};a.transformMat4=vd;a.translate=function(M,S,ia){var ta,Ba,La,Wa,kb,vb,Ib,Sb,ic,ec,uc,tc,Qc=ia[0],wd=ia[1];ia=ia[2];return S===M?(M[12]=S[0]*Qc+S[4]*wd+S[8]*ia+S[12],M[13]=S[1]*Qc+S[5]*wd+S[9]*ia+S[13],M[14]=S[2]*Qc+S[6]*wd+S[10]*ia+S[14],M[15]=S[3]*Qc+S[7]*wd+S[11]*ia+S[15]):(Ba=S[1],La=S[2],Wa=S[3],kb=S[4],vb=S[5],Ib=S[6],Sb=S[7],ic=S[8],ec=S[9],uc=S[10],tc=S[11],M[0]=ta=S[0],M[1]=Ba,M[2]=La,M[3]=Wa,M[4]=kb,M[5]=vb,M[6]=Ib,M[7]=Sb,
M[8]=ic,M[9]=ec,M[10]=uc,M[11]=tc,M[12]=ta*Qc+kb*wd+ic*ia+S[12],M[13]=Ba*Qc+vb*wd+ec*ia+S[13],M[14]=La*Qc+Ib*wd+uc*ia+S[14],M[15]=Wa*Qc+Sb*wd+tc*ia+S[15]),M};a.triggerPluginCompletionEvent=Nj;a.uniqueId=function(){return Gg++};a.validateCustomStyleLayer=function(M){var S=[],ia=M.id;return void 0===ia&&S.push({message:"layers."+ia+': missing required property "id"'}),void 0===M.render&&S.push({message:"layers."+ia+': missing required method "render"'}),M.renderingMode&&"2d"!==M.renderingMode&&"3d"!==
M.renderingMode&&S.push({message:"layers."+ia+': property "renderingMode" must be either "2d" or "3d"'}),S};a.validateLight=Sj;a.validateStyle=xd;a.values=function(M){var S=[],ia;for(ia in M)S.push(M[ia]);return S};a.vectorTile=xi;a.version="1.10.1";a.warnOnce=x;a.webpSupported=mh;a.window=self;a.wrap=e});q(["./shared"],function(a){function f(Aa){var Ka=typeof Aa;if("number"===Ka||"boolean"===Ka||"string"===Ka||null==Aa)return JSON.stringify(Aa);if(Array.isArray(Aa)){Ka="[";for(var Qa=0;Qa<Aa.length;Qa+=
1)Ka+=f(Aa[Qa])+",";return Ka+"]"}Ka=Object.keys(Aa).sort();Qa="{";for(var Xa=0;Xa<Ka.length;Xa++)Qa+=JSON.stringify(Ka[Xa])+":"+f(Aa[Ka[Xa]])+",";return Qa+"}"}function d(Aa,Ka,Qa){Ka=new a.EvaluationParameters(Ka);for(var Xa=0;Xa<Aa.length;Xa+=1)Aa[Xa].recalculate(Ka,Qa)}function l(Aa,Ka){var Qa=a.getArrayBuffer(Aa.request,function(Xa,pb,db,Ia){Xa?Ka(Xa):pb&&Ka(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(pb)),rawData:pb,cacheControl:db,expires:Ia})});return function(){Qa.cancel();Ka()}}
function k(Aa,Ka){if(0!==Aa.length){c(Aa[0],Ka);for(var Qa=1;Qa<Aa.length;Qa++)c(Aa[Qa],!Ka)}}function c(Aa,Ka){for(var Qa=0,Xa=0,pb=Aa.length,db=pb-1;Xa<pb;db=Xa++)Qa+=(Aa[Xa][0]-Aa[db][0])*(Aa[db][1]+Aa[Xa][1]);0<=Qa!=!!Ka&&Aa.reverse()}function e(Aa,Ka){this.options=Ka||{};this.features=Aa;this.length=Aa.length}function g(Aa,Ka){this.id="number"==typeof Aa.id?Aa.id:void 0;this.type=Aa.type;this.rawGeometry=1===Aa.type?[Aa.geometry]:Aa.geometry;this.properties=Aa.tags;this.extent=Ka||4096}function m(Aa){var Ka=
new a.pbf,Qa;for(Qa in Aa.layers)Ka.writeMessage(3,r,Aa.layers[Qa]);return Ka.finish()}function r(Aa,Ka){var Qa;Ka.writeVarintField(15,Aa.version||1);Ka.writeStringField(1,Aa.name||"");Ka.writeVarintField(5,Aa.extent||4096);var Xa={keys:[],values:[],keycache:{},valuecache:{}};for(Qa=0;Qa<Aa.length;Qa++)Xa.feature=Aa.feature(Qa),Ka.writeMessage(2,u,Xa);Aa=Xa.keys;for(Qa=0;Qa<Aa.length;Qa++)Ka.writeStringField(3,Aa[Qa]);Xa=Xa.values;for(Qa=0;Qa<Xa.length;Qa++)Ka.writeMessage(4,D,Xa[Qa])}function u(Aa,
Ka){var Qa=Aa.feature;void 0!==Qa.id&&Ka.writeVarintField(1,Qa.id);Ka.writeMessage(2,v,Aa);Ka.writeVarintField(3,Qa.type);Ka.writeMessage(4,w,Qa)}function v(Aa,Ka){var Qa=Aa.feature,Xa=Aa.keys,pb=Aa.values,db=Aa.keycache;Aa=Aa.valuecache;for(var Ia in Qa.properties){var Ua=db[Ia];void 0===Ua&&(Xa.push(Ia),db[Ia]=Ua=Xa.length-1);Ka.writeVarint(Ua);Ua=Qa.properties[Ia];var $a=typeof Ua;"string"!==$a&&"boolean"!==$a&&"number"!==$a&&(Ua=JSON.stringify(Ua));$a=$a+":"+Ua;var xa=Aa[$a];void 0===xa&&(pb.push(Ua),
Aa[$a]=xa=pb.length-1);Ka.writeVarint(xa)}}function w(Aa,Ka){var Qa=Aa.loadGeometry();Aa=Aa.type;for(var Xa=0,pb=0,db=Qa.length,Ia=0;Ia<db;Ia++){var Ua=Qa[Ia],$a=1;1===Aa&&($a=Ua.length);Ka.writeVarint(($a<<3)+1);$a=3===Aa?Ua.length-1:Ua.length;for(var xa=0;xa<$a;xa++){1===xa&&1!==Aa&&Ka.writeVarint(($a-1<<3)+2);var Ga=Ua[xa].x-Xa,Va=Ua[xa].y-pb;Ka.writeVarint(Ga<<1^Ga>>31);Ka.writeVarint(Va<<1^Va>>31);Xa+=Ga;pb+=Va}3===Aa&&Ka.writeVarint(15)}}function D(Aa,Ka){var Qa=typeof Aa;"string"===Qa?Ka.writeStringField(1,
Aa):"boolean"===Qa?Ka.writeBooleanField(7,Aa):"number"===Qa&&(0!=Aa%1?Ka.writeDoubleField(3,Aa):0>Aa?Ka.writeSVarintField(6,Aa):Ka.writeVarintField(5,Aa))}function C(Aa,Ka,Qa,Xa){x(Aa,Qa,Xa);x(Ka,2*Qa,2*Xa);x(Ka,2*Qa+1,2*Xa+1)}function x(Aa,Ka,Qa){var Xa=Aa[Ka];Aa[Ka]=Aa[Qa];Aa[Qa]=Xa}function A(Aa){return{type:"Feature",id:Aa.id,properties:B(Aa),geometry:{type:"Point",coordinates:[(Xa=Aa.x,360*(Xa-.5)),(Ka=Aa.y,Qa=(180-360*Ka)*Math.PI/180,360*Math.atan(Math.exp(Qa))/Math.PI-90)]}};var Ka,Qa,Xa}function B(Aa){var Ka=
Aa.numPoints,Qa=1E4<=Ka?Math.round(Ka/1E3)+"k":1E3<=Ka?Math.round(Ka/100)/10+"k":Ka;return G(G({},Aa.properties),{cluster:!0,cluster_id:Aa.id,point_count:Ka,point_count_abbreviated:Qa})}function t(Aa){Aa=Math.sin(Aa*Math.PI/180);Aa=.5-.25*Math.log((1+Aa)/(1-Aa))/Math.PI;return 0>Aa?0:1<Aa?1:Aa}function G(Aa,Ka){for(var Qa in Ka)Aa[Qa]=Ka[Qa];return Aa}function H(Aa){return Aa.x}function I(Aa){return Aa.y}function J(Aa,Ka,Qa,Xa){Aa={id:void 0===Aa?null:Aa,type:Ka,geometry:Qa,tags:Xa,minX:1/0,minY:1/
0,maxX:-1/0,maxY:-1/0};Ka=Aa.geometry;Qa=Aa.type;if("Point"===Qa||"MultiPoint"===Qa||"LineString"===Qa)L(Aa,Ka);else if("Polygon"===Qa||"MultiLineString"===Qa)for(Qa=0;Qa<Ka.length;Qa++)L(Aa,Ka[Qa]);else if("MultiPolygon"===Qa)for(Qa=0;Qa<Ka.length;Qa++)for(Xa=0;Xa<Ka[Qa].length;Xa++)L(Aa,Ka[Qa][Xa]);return Aa}function L(Aa,Ka){for(var Qa=0;Qa<Ka.length;Qa+=3)Aa.minX=Math.min(Aa.minX,Ka[Qa]),Aa.minY=Math.min(Aa.minY,Ka[Qa+1]),Aa.maxX=Math.max(Aa.maxX,Ka[Qa]),Aa.maxY=Math.max(Aa.maxY,Ka[Qa+1])}function E(Aa,
Ka,Qa,Xa){if(Ka.geometry){var pb=Ka.geometry.coordinates,db=Ka.geometry.type,Ia=Math.pow(Qa.tolerance/((1<<Qa.maxZoom)*Qa.extent),2),Ua=[],$a=Ka.id;if(Qa.promoteId?$a=Ka.properties[Qa.promoteId]:Qa.generateId&&($a=Xa||0),"Point"===db)K(pb,Ua);else if("MultiPoint"===db)for(var xa=0;xa<pb.length;xa++)K(pb[xa],Ua);else if("LineString"===db)N(pb,Ua,Ia,!1);else if("MultiLineString"===db){if(Qa.lineMetrics){for(xa=0;xa<pb.length;xa++)N(pb[xa],Ua=[],Ia,!1),Aa.push(J($a,"LineString",Ua,Ka.properties));return}O(pb,
Ua,Ia,!1)}else if("Polygon"===db)O(pb,Ua,Ia,!0);else{if("MultiPolygon"!==db){if("GeometryCollection"===db){for(xa=0;xa<Ka.geometry.geometries.length;xa++)E(Aa,{id:$a,geometry:Ka.geometry.geometries[xa],properties:Ka.properties},Qa,Xa);return}throw Error("Input data is not a valid GeoJSON object.");}for(xa=0;xa<pb.length;xa++)Qa=[],O(pb[xa],Qa,Ia,!0),Ua.push(Qa)}Aa.push(J($a,db,Ua,Ka.properties))}}function K(Aa,Ka){Ka.push(Aa[0]/360+.5);Ka.push(Q(Aa[1]));Ka.push(0)}function N(Aa,Ka,Qa,Xa){for(var pb,
db,Ia=0,Ua=0;Ua<Aa.length;Ua++){var $a=Aa[Ua][0]/360+.5,xa=Q(Aa[Ua][1]);Ka.push($a);Ka.push(xa);Ka.push(0);0<Ua&&(Ia+=Xa?(pb*xa-$a*db)/2:Math.sqrt(Math.pow($a-pb,2)+Math.pow(xa-db,2)));pb=$a;db=xa}Aa=Ka.length-3;Ka[2]=1;(function Sa(Va,gb,Ma,cb){for(var lb,rb=cb,yb=Ma-gb>>1,Hb=Ma-gb,Vb=Va[gb],lc=Va[gb+1],Ac=Va[Ma],ad=Va[Ma+1],Nc=gb+3;Nc<Ma;Nc+=3){var ed=Va[Nc];var Pc=Va[Nc+1],sd=Vb,Db=lc,Yb=Ac-sd,Fc=ad-Db;if(0!==Yb||0!==Fc){var mc=((ed-sd)*Yb+(Pc-Db)*Fc)/(Yb*Yb+Fc*Fc);1<mc?(sd=Ac,Db=ad):0<mc&&(sd+=
Yb*mc,Db+=Fc*mc)}ed=(Yb=ed-sd)*Yb+(Fc=Pc-Db)*Fc;ed>rb?(lb=Nc,rb=ed):ed===rb&&(Yb=Math.abs(Nc-yb),Yb<Hb&&(lb=Nc,Hb=Yb))}rb>cb&&(3<lb-gb&&Sa(Va,gb,lb,cb),Va[lb+2]=rb,3<Ma-lb&&Sa(Va,lb,Ma,cb))})(Ka,0,Aa,Qa);Ka[Aa+2]=1;Ka.size=Math.abs(Ia);Ka.start=0;Ka.end=Ka.size}function O(Aa,Ka,Qa,Xa){for(var pb=0;pb<Aa.length;pb++){var db=[];N(Aa[pb],db,Qa,Xa);Ka.push(db)}}function Q(Aa){Aa=Math.sin(Aa*Math.PI/180);Aa=.5-.25*Math.log((1+Aa)/(1-Aa))/Math.PI;return 0>Aa?0:1<Aa?1:Aa}function P(Aa,Ka,Qa,Xa,pb,db,Ia,
Ua){if(Xa/=Ka,db>=(Qa/=Ka)&&Ia<Xa)return Aa;if(Ia<Qa||db>=Xa)return null;Ka=[];for(db=0;db<Aa.length;db++){Ia=Aa[db];var $a=Ia.geometry,xa=Ia.type,Ga=0===pb?Ia.minX:Ia.minY,Va=0===pb?Ia.maxX:Ia.maxY;if(Ga>=Qa&&Va<Xa)Ka.push(Ia);else if(!(Va<Qa||Ga>=Xa)){Ga=[];if("Point"===xa||"MultiPoint"===xa){Va=Ga;for(var gb=Qa,Ma=Xa,cb=pb,Sa=0;Sa<$a.length;Sa+=3){var lb=$a[Sa+cb];lb>=gb&&lb<=Ma&&(Va.push($a[Sa]),Va.push($a[Sa+1]),Va.push($a[Sa+2]))}}else if("LineString"===xa)T($a,Ga,Qa,Xa,pb,!1,Ua.lineMetrics);
else if("MultiLineString"===xa)aa($a,Ga,Qa,Xa,pb,!1);else if("Polygon"===xa)aa($a,Ga,Qa,Xa,pb,!0);else if("MultiPolygon"===xa)for(Va=0;Va<$a.length;Va++)gb=[],aa($a[Va],gb,Qa,Xa,pb,!0),gb.length&&Ga.push(gb);if(Ga.length)if(Ua.lineMetrics&&"LineString"===xa)for(Va=0;Va<Ga.length;Va++)Ka.push(J(Ia.id,xa,Ga[Va],Ia.tags));else"LineString"!==xa&&"MultiLineString"!==xa||(1===Ga.length?(xa="LineString",Ga=Ga[0]):xa="MultiLineString"),"Point"!==xa&&"MultiPoint"!==xa||(xa=3===Ga.length?"Point":"MultiPoint"),
Ka.push(J(Ia.id,xa,Ga,Ia.tags))}}return Ka.length?Ka:null}function T(Aa,Ka,Qa,Xa,pb,db,Ia){for(var Ua,$a,xa=V(Aa),Ga=0===pb?ba:Y,Va=Aa.start,gb=0;gb<Aa.length-3;gb+=3){var Ma=Aa[gb],cb=Aa[gb+1],Sa=Aa[gb+2],lb=Aa[gb+3],rb=Aa[gb+4],yb=0===pb?Ma:cb,Hb=0===pb?lb:rb,Vb=!1;Ia&&(Ua=Math.sqrt(Math.pow(Ma-lb,2)+Math.pow(cb-rb,2)));if(yb<Qa)Hb>Qa&&($a=Ga(xa,Ma,cb,lb,rb,Qa),Ia&&(xa.start=Va+Ua*$a));else if(yb>Xa)Hb<Xa&&($a=Ga(xa,Ma,cb,lb,rb,Xa),Ia&&(xa.start=Va+Ua*$a));else{var lc=xa,Ac=cb;lc.push(Ma);lc.push(Ac);
lc.push(Sa)}Hb<Qa&&yb>=Qa&&($a=Ga(xa,Ma,cb,lb,rb,Qa),Vb=!0);Hb>Xa&&yb<=Xa&&($a=Ga(xa,Ma,cb,lb,rb,Xa),Vb=!0);!db&&Vb&&(Ia&&(xa.end=Va+Ua*$a),Ka.push(xa),xa=V(Aa));Ia&&(Va+=Ua)}Sa=Aa.length-3;Ma=Aa[Sa];cb=Aa[Sa+1];Sa=Aa[Sa+2];(yb=0===pb?Ma:cb)>=Qa&&yb<=Xa&&(Aa=xa,Qa=Sa,Aa.push(Ma),Aa.push(cb),Aa.push(Qa));Sa=xa.length-3;db&&3<=Sa&&(xa[Sa]!==xa[0]||xa[Sa+1]!==xa[1])&&(db=xa,Ma=xa[1],cb=xa[2],db.push(xa[0]),db.push(Ma),db.push(cb));xa.length&&Ka.push(xa)}function V(Aa){var Ka=[];return Ka.size=Aa.size,
Ka.start=Aa.start,Ka.end=Aa.end,Ka}function aa(Aa,Ka,Qa,Xa,pb,db){for(var Ia=0;Ia<Aa.length;Ia++)T(Aa[Ia],Ka,Qa,Xa,pb,db,!1)}function ba(Aa,Ka,Qa,Xa,pb,db){Ka=(db-Ka)/(Xa-Ka);return Aa.push(db),Aa.push(Qa+(pb-Qa)*Ka),Aa.push(1),Ka}function Y(Aa,Ka,Qa,Xa,pb,db){Qa=(db-Qa)/(pb-Qa);return Aa.push(Ka+(Xa-Ka)*Qa),Aa.push(db),Aa.push(1),Qa}function ea(Aa,Ka){for(var Qa=[],Xa=0;Xa<Aa.length;Xa++){var pb=Aa[Xa],db=pb.type;if("Point"===db||"MultiPoint"===db||"LineString"===db)var Ia=da(pb.geometry,Ka);else if("MultiLineString"===
db||"Polygon"===db){Ia=[];for(var Ua=0;Ua<pb.geometry.length;Ua++)Ia.push(da(pb.geometry[Ua],Ka))}else if("MultiPolygon"===db)for(Ia=[],Ua=0;Ua<pb.geometry.length;Ua++){for(var $a=[],xa=0;xa<pb.geometry[Ua].length;xa++)$a.push(da(pb.geometry[Ua][xa],Ka));Ia.push($a)}Qa.push(J(pb.id,db,Ia,pb.tags))}return Qa}function da(Aa,Ka){var Qa=[];Qa.size=Aa.size;void 0!==Aa.start&&(Qa.start=Aa.start,Qa.end=Aa.end);for(var Xa=0;Xa<Aa.length;Xa+=3)Qa.push(Aa[Xa]+Ka,Aa[Xa+1],Aa[Xa+2]);return Qa}function ca(Aa,
Ka){if(Aa.transformed)return Aa;var Qa,Xa,pb=1<<Aa.z,db=Aa.x,Ia=Aa.y;for(Qa=0;Qa<Aa.features.length;Qa++){var Ua=Aa.features[Qa],$a=Ua.geometry;var xa=Ua.type;if(Ua.geometry=[],1===xa)for(xa=0;xa<$a.length;xa+=2)Ua.geometry.push([Math.round(Ka*($a[xa]*pb-db)),Math.round(Ka*($a[xa+1]*pb-Ia))]);else for(xa=0;xa<$a.length;xa++){var Ga=[];for(Xa=0;Xa<$a[xa].length;Xa+=2)Ga.push([Math.round(Ka*($a[xa][Xa]*pb-db)),Math.round(Ka*($a[xa][Xa+1]*pb-Ia))]);Ua.geometry.push(Ga)}}return Aa.transformed=!0,Aa}function la(Aa,
Ka,Qa,Xa,pb,db){var Ia=Xa*Xa;if(0<Xa&&Ka.size<(pb?Ia:Xa))Qa.numPoints+=Ka.length/3;else{for(var Ua=[],$a=0;$a<Ka.length;$a+=3)(0===Xa||Ka[$a+2]>Ia)&&(Qa.numSimplified++,Ua.push(Ka[$a]),Ua.push(Ka[$a+1])),Qa.numPoints++;if(pb){Ka=Xa=0;Qa=Ua.length;for(pb=Qa-2;Ka<Qa;pb=Ka,Ka+=2)Xa+=(Ua[Ka]-Ua[pb])*(Ua[Ka+1]+Ua[pb+1]);if(0<Xa===db)for(Ka=0,Qa=Ua.length;Ka<Qa/2;Ka+=2)db=Ua[Ka],Xa=Ua[Ka+1],Ua[Ka]=Ua[Qa-2-Ka],Ua[Ka+1]=Ua[Qa-1-Ka],Ua[Qa-2-Ka]=db,Ua[Qa-1-Ka]=Xa}Aa.push(Ua)}}function pa(Aa,Ka){var Qa=(Ka=
this.options=function(Xa,pb){for(var db in pb)Xa[db]=pb[db];return Xa}(Object.create(this.options),Ka)).debug;if(Qa&&console.time("preprocess data"),0>Ka.maxZoom||24<Ka.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(Ka.promoteId&&Ka.generateId)throw Error("promoteId and generateId cannot be used together.");Aa=function(Xa,pb){var db=[];if("FeatureCollection"===Xa.type)for(var Ia=0;Ia<Xa.features.length;Ia++)E(db,Xa.features[Ia],pb,Ia);else E(db,"Feature"===Xa.type?Xa:{geometry:Xa},
pb);return db}(Aa,Ka);this.tiles={};this.tileCoords=[];Qa&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ka.indexMaxZoom,Ka.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(Aa=function(Xa,pb){var db=pb.buffer/pb.extent,Ia=Xa,Ua=P(Xa,1,-1-db,db,0,-1,2,pb),$a=P(Xa,1,1-db,2+db,0,-1,2,pb);return(Ua||$a)&&(Ia=P(Xa,1,-db,1+db,0,-1,2,pb)||[],Ua&&(Ia=ea(Ua,1).concat(Ia)),$a&&(Ia=Ia.concat(ea($a,-1)))),Ia}(Aa,Ka)).length&&this.splitTile(Aa,0,
0,0);Qa&&(Aa.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function qa(Aa,Ka){Aa=Aa.tileID.canonical;if(!this._geoJSONIndex)return Ka(null,null);Aa=this._geoJSONIndex.getTile(Aa.z,Aa.x,Aa.y);if(!Aa)return Ka(null,null);Aa=new Fa(Aa.features);var Qa=eb(Aa);0===Qa.byteOffset&&Qa.byteLength===Qa.buffer.byteLength||(Qa=new Uint8Array(Qa));Ka(null,
{vectorTile:Aa,rawData:Qa.buffer})}var oa=function(Aa){this.keyCache={};Aa&&this.replace(Aa)};oa.prototype.replace=function(Aa){this._layerConfigs={};this._layers={};this.update(Aa,[])};oa.prototype.update=function(Aa,Ka){for(var Qa=this,Xa=0;Xa<Aa.length;Xa+=1){var pb=Aa[Xa];this._layerConfigs[pb.id]=pb;var db=this._layers[pb.id]=a.createStyleLayer(pb);db._featureFilter=a.featureFilter(db.filter);this.keyCache[pb.id]&&delete this.keyCache[pb.id]}for(Aa=0;Aa<Ka.length;Aa+=1)Xa=Ka[Aa],delete this.keyCache[Xa],
delete this._layerConfigs[Xa],delete this._layers[Xa];this.familiesBySource={};Ka=0;for(Aa=function(Ua,$a){for(var xa={},Ga=0;Ga<Ua.length;Ga++){var Va;if(!(Va=$a&&$a[Ua[Ga].id])){Va=Ua[Ga];for(var gb="",Ma=0,cb=a.refProperties;Ma<cb.length;Ma+=1)gb+="/"+f(Va[cb[Ma]]);Va=gb}$a&&($a[Ua[Ga].id]=Va);(gb=xa[Va])||(gb=xa[Va]=[]);gb.push(Ua[Ga])}Ua=[];for(var Sa in xa)Ua.push(xa[Sa]);return Ua}(a.values(this._layerConfigs),this.keyCache);Ka<Aa.length;Ka+=1)if(Xa=Aa[Ka].map(function(Ua){return Qa._layers[Ua.id]}),
db=Xa[0],"none"!==db.visibility){var Ia=db.source||"";(pb=this.familiesBySource[Ia])||(pb=this.familiesBySource[Ia]={});db=db.sourceLayer||"_geojsonTileLayer";(Ia=pb[db])||(Ia=pb[db]=[]);Ia.push(Xa)}};var ka=function(Aa){var Ka={},Qa=[];for(xa in Aa){var Xa=Aa[xa],pb=Ka[xa]={},db;for(db in Xa){var Ia=Xa[+db];if(Ia&&0!==Ia.bitmap.width&&0!==Ia.bitmap.height){var Ua={x:0,y:0,w:Ia.bitmap.width+2,h:Ia.bitmap.height+2};Qa.push(Ua);pb[db]={rect:Ua,metrics:Ia.metrics}}}}Qa=a.potpack(Qa);Qa=new a.AlphaImage({width:Qa.w||
1,height:Qa.h||1});for(var $a in Aa){var xa=Aa[$a];for(var Ga in xa)(Xa=xa[+Ga])&&0!==Xa.bitmap.width&&0!==Xa.bitmap.height&&(pb=Ka[$a][Ga].rect,a.AlphaImage.copy(Xa.bitmap,Qa,{x:0,y:0},{x:pb.x+1,y:pb.y+1},Xa.bitmap))}this.image=Qa;this.positions=Ka};a.register("GlyphAtlas",ka);var ra=function(Aa){this.tileID=new a.OverscaledTileID(Aa.tileID.overscaledZ,Aa.tileID.wrap,Aa.tileID.canonical.z,Aa.tileID.canonical.x,Aa.tileID.canonical.y);this.uid=Aa.uid;this.zoom=Aa.zoom;this.pixelRatio=Aa.pixelRatio;
this.tileSize=Aa.tileSize;this.source=Aa.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=Aa.showCollisionBoxes;this.collectResourceTiming=!!Aa.collectResourceTiming;this.returnDependencies=!!Aa.returnDependencies;this.promoteId=Aa.promoteId};ra.prototype.parse=function(Aa,Ka,Qa,Xa,pb){function db(){if(xa)return pb(xa);if(Ga&&Va&&gb){var Ac=new ka(Ga),ad=new a.ImageAtlas(Va,gb),Nc;for(Nc in Ma){var ed=Ma[Nc];ed instanceof a.SymbolBucket?(d(ed.layers,this.zoom,Qa),a.performSymbolLayout(ed,
Ga,Ac.positions,Va,ad.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ed.hasPattern&&(ed instanceof a.LineBucket||ed instanceof a.FillBucket||ed instanceof a.FillExtrusionBucket)&&(d(ed.layers,this.zoom,Qa),ed.addFeatures(cb,this.tileID.canonical,ad.patternPositions))}this.status="done";pb(null,{buckets:a.values(Ma).filter(function(Pc){return!Pc.isEmpty()}),featureIndex:$a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ac.image,imageAtlas:ad,glyphMap:this.returnDependencies?
Ga:null,iconMap:this.returnDependencies?Va:null,glyphPositions:this.returnDependencies?Ac.positions:null})}}var Ia=this;this.status="parsing";this.data=Aa;this.collisionBoxArray=new a.CollisionBoxArray;var Ua=new a.DictionaryCoder(Object.keys(Aa.layers).sort()),$a=new a.FeatureIndex(this.tileID,this.promoteId);$a.bucketLayerIDs=[];var xa,Ga,Va,gb,Ma={},cb={featureIndex:$a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Qa};Ka=Ka.familiesBySource[this.source];for(var Sa in Ka){var lb=
Aa.layers[Sa];if(lb){1===lb.version&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+Sa+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var rb=Ua.encode(Sa),yb=[],Hb=0;Hb<lb.length;Hb++){var Vb=lb.feature(Hb),lc=$a.getId(Vb,Sa);yb.push({feature:Vb,id:lc,index:Hb,sourceLayerIndex:rb})}lb=0;for(Hb=Ka[Sa];lb<Hb.length;lb+=1)Vb=Hb[lb],lc=Vb[0],lc.minzoom&&this.zoom<Math.floor(lc.minzoom)||lc.maxzoom&&this.zoom>=lc.maxzoom||"none"!==lc.visibility&&(d(Vb,
this.zoom,Qa),(Ma[lc.id]=lc.createBucket({index:$a.bucketLayerIDs.length,layers:Vb,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:rb,sourceID:this.source})).populate(yb,cb,this.tileID.canonical),$a.bucketLayerIDs.push(Vb.map(function(Ac){return Ac.id})))}}Aa=a.mapObject(cb.glyphDependencies,function(Ac){return Object.keys(Ac).map(Number)});Object.keys(Aa).length?Xa.send("getGlyphs",{uid:this.uid,stacks:Aa},function(Ac,
ad){xa||(xa=Ac,Ga=ad,db.call(Ia))}):Ga={};Aa=Object.keys(cb.iconDependencies);Aa.length?Xa.send("getImages",{icons:Aa,source:this.source,tileID:this.tileID,type:"icons"},function(Ac,ad){xa||(xa=Ac,Va=ad,db.call(Ia))}):Va={};Aa=Object.keys(cb.patternDependencies);Aa.length?Xa.send("getImages",{icons:Aa,source:this.source,tileID:this.tileID,type:"patterns"},function(Ac,ad){xa||(xa=Ac,gb=ad,db.call(Ia))}):gb={};db.call(this)};var ha=function(Aa,Ka,Qa,Xa){this.actor=Aa;this.layerIndex=Ka;this.availableImages=
Qa;this.loadVectorData=Xa||l;this.loading={};this.loaded={}};ha.prototype.loadTile=function(Aa,Ka){var Qa=this,Xa=Aa.uid;this.loading||(this.loading={});var pb=!!(Aa&&Aa.request&&Aa.request.collectResourceTiming)&&new a.RequestPerformance(Aa.request),db=this.loading[Xa]=new ra(Aa);db.abort=this.loadVectorData(Aa,function(Ia,Ua){if(delete Qa.loading[Xa],Ia||!Ua)return db.status="done",Qa.loaded[Xa]=db,Ka(Ia);var $a=Ua.rawData,xa={};Ua.expires&&(xa.expires=Ua.expires);Ua.cacheControl&&(xa.cacheControl=
Ua.cacheControl);var Ga={};pb&&(Ia=pb.finish())&&(Ga.resourceTiming=JSON.parse(JSON.stringify(Ia)));db.vectorTile=Ua.vectorTile;db.parse(Ua.vectorTile,Qa.layerIndex,Qa.availableImages,Qa.actor,function(Va,gb){if(Va||!gb)return Ka(Va);Ka(null,a.extend({rawTileData:$a.slice(0)},gb,xa,Ga))});Qa.loaded=Qa.loaded||{};Qa.loaded[Xa]=db})};ha.prototype.reloadTile=function(Aa,Ka){var Qa=this,Xa=this.loaded,pb=Aa.uid,db=this;if(Xa&&Xa[pb]){var Ia=Xa[pb];Ia.showCollisionBoxes=Aa.showCollisionBoxes;Aa=function(Ua,
$a){var xa=Ia.reloadCallback;xa&&(delete Ia.reloadCallback,Ia.parse(Ia.vectorTile,db.layerIndex,Qa.availableImages,db.actor,xa));Ka(Ua,$a)};"parsing"===Ia.status?Ia.reloadCallback=Aa:"done"===Ia.status&&(Ia.vectorTile?Ia.parse(Ia.vectorTile,this.layerIndex,this.availableImages,this.actor,Aa):Aa())}};ha.prototype.abortTile=function(Aa,Ka){var Qa=this.loading;Aa=Aa.uid;Qa&&Qa[Aa]&&Qa[Aa].abort&&(Qa[Aa].abort(),delete Qa[Aa]);Ka()};ha.prototype.removeTile=function(Aa,Ka){var Qa=this.loaded;Aa=Aa.uid;
Qa&&Qa[Aa]&&delete Qa[Aa];Ka()};var ma=a.window.ImageBitmap,wa=function(){this.loaded={}};wa.prototype.loadTile=function(Aa,Ka){var Qa=Aa.uid,Xa=Aa.encoding;Aa=Aa.rawImageData;Aa=ma&&Aa instanceof ma?this.getImageData(Aa):Aa;Xa=new a.DEMData(Qa,Aa,Xa);this.loaded=this.loaded||{};this.loaded[Qa]=Xa;Ka(null,Xa)};wa.prototype.getImageData=function(Aa){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Aa.width,Aa.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d"));
this.offscreenCanvas.width=Aa.width;this.offscreenCanvas.height=Aa.height;this.offscreenCanvasContext.drawImage(Aa,0,0,Aa.width,Aa.height);Aa=this.offscreenCanvasContext.getImageData(-1,-1,Aa.width+2,Aa.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:Aa.width,height:Aa.height},Aa.data)};wa.prototype.removeTile=function(Aa){var Ka=this.loaded;Aa=Aa.uid;Ka&&Ka[Aa]&&delete Ka[Aa]};var na=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,
ya=function(Aa){this._feature=Aa;this.extent=a.EXTENT;this.type=Aa.type;this.properties=Aa.tags;"id"in Aa&&!isNaN(Aa.id)&&(this.id=parseInt(Aa.id,10))};ya.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Aa=[],Ka=0,Qa=this._feature.geometry;Ka<Qa.length;Ka+=1){var Xa=Qa[Ka];Aa.push([new a.Point$1(Xa[0],Xa[1])])}return Aa}Aa=[];Ka=0;for(Qa=this._feature.geometry;Ka<Qa.length;Ka+=1){Xa=[];for(var pb=0,db=Qa[Ka];pb<db.length;pb+=1){var Ia=db[pb];Xa.push(new a.Point$1(Ia[0],Ia[1]))}Aa.push(Xa)}return Aa};
ya.prototype.toGeoJSON=function(Aa,Ka,Qa){return na.call(this,Aa,Ka,Qa)};var Fa=function(Aa){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=a.EXTENT;this.length=Aa.length;this._features=Aa};Fa.prototype.feature=function(Aa){return new ya(this._features[Aa])};var Ha=a.vectorTile.VectorTileFeature;e.prototype.feature=function(Aa){return new g(this.features[Aa],this.options.extent)};g.prototype.loadGeometry=function(){var Aa=this.rawGeometry;this.geometry=[];for(var Ka=
0;Ka<Aa.length;Ka++){for(var Qa=Aa[Ka],Xa=[],pb=0;pb<Qa.length;pb++)Xa.push(new a.Point$1(Qa[pb][0],Qa[pb][1]));this.geometry.push(Xa)}return this.geometry};g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Aa=this.geometry,Ka=1/0,Qa=-1/0,Xa=1/0,pb=-1/0,db=0;db<Aa.length;db++)for(var Ia=Aa[db],Ua=0;Ua<Ia.length;Ua++){var $a=Ia[Ua];Ka=Math.min(Ka,$a.x);Qa=Math.max(Qa,$a.x);Xa=Math.min(Xa,$a.y);pb=Math.max(pb,$a.y)}return[Ka,Xa,Qa,pb]};g.prototype.toGeoJSON=Ha.prototype.toGeoJSON;
var eb=m;eb.fromVectorTileJs=m;eb.fromGeojsonVt=function(Aa,Ka){Ka=Ka||{};var Qa={},Xa;for(Xa in Aa)Qa[Xa]=new e(Aa[Xa].features,Ka),Qa[Xa].name=Xa,Qa[Xa].version=Ka.version,Qa[Xa].extent=Ka.extent;return m({layers:Qa})};eb.GeoJSONWrapper=e;var hb=function(Aa){return Aa[0]},ob=function(Aa){return Aa[1]},ib=function(Aa,Ka,Qa,Xa,pb){void 0===Ka&&(Ka=hb);void 0===Qa&&(Qa=ob);void 0===Xa&&(Xa=64);void 0===pb&&(pb=Float64Array);this.nodeSize=Xa;this.points=Aa;var db=this.ids=new (65536>Aa.length?Uint16Array:
Uint32Array)(Aa.length);pb=this.coords=new pb(2*Aa.length);for(var Ia=0;Ia<Aa.length;Ia++)db[Ia]=Ia,pb[2*Ia]=Ka(Aa[Ia]),pb[2*Ia+1]=Qa(Aa[Ia]);!function cb($a,xa,Ga,Va,gb,Ma){if(!(gb-Va<=Ga)){var Sa=Va+gb>>1;!function ad(rb,yb,Hb,Vb,lc,Ac){for(;lc>Vb;){if(600<lc-Vb){var Nc=lc-Vb+1,ed=Hb-Vb+1,Pc=Math.log(Nc),sd=.5*Math.exp(2*Pc/3);Pc=.5*Math.sqrt(Pc*sd*(Nc-sd)/Nc)*(0>ed-Nc/2?-1:1);ad(rb,yb,Hb,Math.max(Vb,Math.floor(Hb-ed*sd/Nc+Pc)),Math.min(lc,Math.floor(Hb+(Nc-ed)*sd/Nc+Pc)),Ac)}Nc=yb[2*Hb+Ac];ed=
Vb;sd=lc;C(rb,yb,Vb,Hb);for(yb[2*lc+Ac]>Nc&&C(rb,yb,Vb,lc);ed<sd;){C(rb,yb,ed,sd);ed++;for(sd--;yb[2*ed+Ac]<Nc;)ed++;for(;yb[2*sd+Ac]>Nc;)sd--}yb[2*Vb+Ac]===Nc?C(rb,yb,Vb,sd):C(rb,yb,++sd,lc);sd<=Hb&&(Vb=sd+1);Hb<=sd&&(lc=sd-1)}}($a,xa,Sa,Va,gb,Ma%2);cb($a,xa,Ga,Va,Sa-1,Ma+1);cb($a,xa,Ga,Sa+1,gb,Ma+1)}}(db,pb,Xa,0,db.length-1,0)};ib.prototype.range=function(Aa,Ka,Qa,Xa){for(var pb=this.ids,db=this.coords,Ia=this.nodeSize,Ua,$a,xa=[0,pb.length-1,0],Ga=[];xa.length;){var Va=xa.pop(),gb=xa.pop(),Ma=
xa.pop();if(gb-Ma<=Ia)for(Va=Ma;Va<=gb;Va++)$a=db[2*Va+1],(Ua=db[2*Va])>=Aa&&Ua<=Qa&&$a>=Ka&&$a<=Xa&&Ga.push(pb[Va]);else{var cb=Math.floor((Ma+gb)/2);$a=db[2*cb+1];(Ua=db[2*cb])>=Aa&&Ua<=Qa&&$a>=Ka&&$a<=Xa&&Ga.push(pb[cb]);var Sa=(Va+1)%2;(0===Va?Aa<=Ua:Ka<=$a)&&(xa.push(Ma),xa.push(cb-1),xa.push(Sa));(0===Va?Qa>=Ua:Xa>=$a)&&(xa.push(cb+1),xa.push(gb),xa.push(Sa))}}return Ga};ib.prototype.within=function(Aa,Ka,Qa){for(var Xa=this.ids,pb=this.coords,db=this.nodeSize,Ia=[0,Xa.length-1,0],Ua=[],$a=
Qa*Qa;Ia.length;){var xa=Ia.pop(),Ga=Ia.pop(),Va=Ia.pop();if(Ga-Va<=db)for(xa=Va;xa<=Ga;xa++){Va=pb[2*xa]-Aa;var gb=pb[2*xa+1]-Ka;Va*Va+gb*gb<=$a&&Ua.push(Xa[xa])}else{gb=Math.floor((Va+Ga)/2);var Ma=pb[2*gb],cb=pb[2*gb+1],Sa=Ma-Aa,lb=cb-Ka;Sa*Sa+lb*lb<=$a&&Ua.push(Xa[gb]);Sa=(xa+1)%2;(0===xa?Aa-Qa<=Ma:Ka-Qa<=cb)&&(Ia.push(Va),Ia.push(gb-1),Ia.push(Sa));(0===xa?Aa+Qa>=Ma:Ka+Qa>=cb)&&(Ia.push(gb+1),Ia.push(Ga),Ia.push(Sa))}}return Ua};var Pa={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,
generateId:!1,reduce:null,map:function(Aa){return Aa}},sb=function(Aa){this.options=G(Object.create(Pa),Aa);this.trees=Array(this.options.maxZoom+1)};sb.prototype.load=function(Aa){var Ka=this.options,Qa=Ka.log,Xa=Ka.minZoom,pb=Ka.maxZoom;Ka=Ka.nodeSize;Qa&&console.time("total time");var db="prepare "+Aa.length+" points";Qa&&console.time(db);this.points=Aa;for(var Ia=[],Ua=0;Ua<Aa.length;Ua++)if(Aa[Ua].geometry){var $a=Ia,xa=$a.push;var Ga=Ua;var Va=Aa[Ua].geometry.coordinates;Ga={x:Va[0]/360+.5,
y:t(Va[1]),zoom:1/0,index:Ga,parentId:-1};xa.call($a,Ga)}this.trees[pb+1]=new ib(Ia,H,I,Ka,Float32Array);Qa&&console.timeEnd(db);for(Aa=pb;Aa>=Xa;Aa--)pb=+Date.now(),Ia=this._cluster(Ia,Aa),this.trees[Aa]=new ib(Ia,H,I,Ka,Float32Array),Qa&&console.log("z%d: %d clusters in %dms",Aa,Ia.length,+Date.now()-pb);return Qa&&console.timeEnd("total time"),this};sb.prototype.getClusters=function(Aa,Ka){var Qa=((Aa[0]+180)%360+360)%360-180,Xa=Math.max(-90,Math.min(90,Aa[1])),pb=180===Aa[2]?180:((Aa[2]+180)%
360+360)%360-180,db=Math.max(-90,Math.min(90,Aa[3]));if(360<=Aa[2]-Aa[0])Qa=-180,pb=180;else if(Qa>pb)return Qa=this.getClusters([Qa,Xa,180,db],Ka),Xa=this.getClusters([-180,Xa,pb,db],Ka),Qa.concat(Xa);Ka=this.trees[this._limitZoom(Ka)];Aa=[];var Ia=0;for(Xa=Ka.range(Qa/360+.5,t(db),pb/360+.5,t(Xa));Ia<Xa.length;Ia+=1)pb=Ka.points[Xa[Ia]],Aa.push(pb.numPoints?A(pb):this.points[pb.index]);return Aa};sb.prototype.getChildren=function(Aa){var Ka=this._getOriginId(Aa),Qa=this._getOriginZoom(Aa),Xa=this.trees[Qa];
if(!Xa)throw Error("No cluster with the specified id.");var pb=Xa.points[Ka];if(!pb)throw Error("No cluster with the specified id.");Ka=[];var db=0;for(Qa=Xa.within(pb.x,pb.y,this.options.radius/(this.options.extent*Math.pow(2,Qa-1)));db<Qa.length;db+=1)pb=Xa.points[Qa[db]],pb.parentId===Aa&&Ka.push(pb.numPoints?A(pb):this.points[pb.index]);if(0===Ka.length)throw Error("No cluster with the specified id.");return Ka};sb.prototype.getLeaves=function(Aa,Ka,Qa){var Xa=[];return this._appendLeaves(Xa,
Aa,Ka||10,Qa||0,0),Xa};sb.prototype.getTile=function(Aa,Ka,Qa){var Xa=this.trees[this._limitZoom(Aa)];Aa=Math.pow(2,Aa);var pb=this.options;pb=pb.radius/pb.extent;var db=(Qa-pb)/Aa,Ia=(Qa+1+pb)/Aa,Ua={features:[]};return this._addTileFeatures(Xa.range((Ka-pb)/Aa,db,(Ka+1+pb)/Aa,Ia),Xa.points,Ka,Qa,Aa,Ua),0===Ka&&this._addTileFeatures(Xa.range(1-pb/Aa,db,1,Ia),Xa.points,Aa,Qa,Aa,Ua),Ka===Aa-1&&this._addTileFeatures(Xa.range(0,db,pb/Aa,Ia),Xa.points,-1,Qa,Aa,Ua),Ua.features.length?Ua:null};sb.prototype.getClusterExpansionZoom=
function(Aa){for(var Ka=this._getOriginZoom(Aa)-1;Ka<=this.options.maxZoom;){Aa=this.getChildren(Aa);if(Ka++,1!==Aa.length)break;Aa=Aa[0].properties.cluster_id}return Ka};sb.prototype._appendLeaves=function(Aa,Ka,Qa,Xa,pb){var db=0;for(Ka=this.getChildren(Ka);db<Ka.length;db+=1){var Ia=Ka[db],Ua=Ia.properties;if(Ua&&Ua.cluster?pb+Ua.point_count<=Xa?pb+=Ua.point_count:pb=this._appendLeaves(Aa,Ua.cluster_id,Qa,Xa,pb):pb<Xa?pb++:Aa.push(Ia),Aa.length===Qa)break}return pb};sb.prototype._addTileFeatures=
function(Aa,Ka,Qa,Xa,pb,db){for(var Ia=0;Ia<Aa.length;Ia+=1){var Ua=Ka[Aa[Ia]],$a=Ua.numPoints,xa={type:1,geometry:[[Math.round(this.options.extent*(Ua.x*pb-Qa)),Math.round(this.options.extent*(Ua.y*pb-Xa))]],tags:$a?B(Ua):this.points[Ua.index].properties},Ga=void 0;$a?Ga=Ua.id:this.options.generateId?Ga=Ua.index:this.points[Ua.index].id&&(Ga=this.points[Ua.index].id);void 0!==Ga&&(xa.id=Ga);db.features.push(xa)}};sb.prototype._limitZoom=function(Aa){return Math.max(this.options.minZoom,Math.min(Aa,
this.options.maxZoom+1))};sb.prototype._cluster=function(Aa,Ka){var Qa=[],Xa=this.options,pb=Xa.reduce;Xa=Xa.radius/(Xa.extent*Math.pow(2,Ka));for(var db=0;db<Aa.length;db++){var Ia=Aa[db];if(!(Ia.zoom<=Ka)){Ia.zoom=Ka;for(var Ua=this.trees[Ka+1],$a=Ua.within(Ia.x,Ia.y,Xa),xa=Ia.numPoints||1,Ga=Ia.x*xa,Va=Ia.y*xa,gb=pb&&1<xa?this._map(Ia,!0):null,Ma=(db<<5)+(Ka+1)+this.points.length,cb=0;cb<$a.length;cb+=1){var Sa=Ua.points[$a[cb]];if(!(Sa.zoom<=Ka)){Sa.zoom=Ka;var lb=Sa.numPoints||1;Ga+=Sa.x*lb;
Va+=Sa.y*lb;xa+=lb;Sa.parentId=Ma;pb&&(gb||(gb=this._map(Ia,!0)),pb(gb,this._map(Sa)))}}1===xa?Qa.push(Ia):(Ia.parentId=Ma,Qa.push({x:Ga/xa,y:Va/xa,zoom:1/0,id:Ma,parentId:-1,numPoints:xa,properties:gb}))}}return Qa};sb.prototype._getOriginId=function(Aa){return Aa-this.points.length>>5};sb.prototype._getOriginZoom=function(Aa){return(Aa-this.points.length)%32};sb.prototype._map=function(Aa,Ka){if(Aa.numPoints)return Ka?G({},Aa.properties):Aa.properties;Aa=this.points[Aa.index].properties;var Qa=
this.options.map(Aa);return Ka&&Qa===Aa?G({},Qa):Qa};pa.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};pa.prototype.splitTile=function(Aa,Ka,Qa,Xa,pb,db,Ia){for(var Ua=[Aa,Ka,Qa,Xa],$a=this.options,xa=$a.debug;Ua.length;){Xa=Ua.pop();Qa=Ua.pop();Ka=Ua.pop();Aa=Ua.pop();var Ga=1<<Ka,Va=32*((1<<Ka)*Xa+Qa)+Ka,gb=this.tiles[Va],Ma;if(Ma=!gb){1<xa&&console.time("creation");gb=this.tiles;Ma=Aa;for(var cb=
$a,Sa=Ka===cb.maxZoom?0:cb.tolerance/((1<<Ka)*cb.extent),lb={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Qa,y:Xa,z:Ka,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},rb=0;rb<Ma.length;rb++){lb.numFeatures++;var yb=void 0,Hb=lb,Vb=Ma[rb],lc=Sa,Ac=cb,ad=Vb.geometry,Nc=Vb.type,ed=[];if("Point"===Nc||"MultiPoint"===Nc)for(var Pc=0;Pc<ad.length;Pc+=3)ed.push(ad[Pc]),ed.push(ad[Pc+1]),Hb.numPoints++,Hb.numSimplified++;else if("LineString"===Nc)la(ed,ad,Hb,lc,!1,!1);else if("MultiLineString"===
Nc||"Polygon"===Nc)for(Pc=0;Pc<ad.length;Pc++)la(ed,ad[Pc],Hb,lc,"Polygon"===Nc,0===Pc);else if("MultiPolygon"===Nc)for(var sd=0;sd<ad.length;sd++){var Db=ad[sd];for(Pc=0;Pc<Db.length;Pc++)la(ed,Db[Pc],Hb,lc,!0,0===Pc)}if(ed.length){lc=Vb.tags||null;if("LineString"===Nc&&Ac.lineMetrics){for(yb in lc={},Vb.tags)lc[yb]=Vb.tags[yb];lc.mapbox_clip_start=ad.start/ad.size;lc.mapbox_clip_end=ad.end/ad.size}yb={geometry:ed,type:"Polygon"===Nc||"MultiPolygon"===Nc?3:"LineString"===Nc||"MultiLineString"===
Nc?2:1,tags:lc};null!==Vb.id&&(yb.id=Vb.id);Hb.features.push(yb)}Hb=Ma[rb].minX;Vb=Ma[rb].minY;yb=Ma[rb].maxX;Ac=Ma[rb].maxY;Hb<lb.minX&&(lb.minX=Hb);Vb<lb.minY&&(lb.minY=Vb);yb>lb.maxX&&(lb.maxX=yb);Ac>lb.maxY&&(lb.maxY=Ac)}Ma=(gb=gb[Va]=lb,this.tileCoords.push({z:Ka,x:Qa,y:Xa}),xa)}Ma&&(1<xa&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ka,Qa,Xa,gb.numFeatures,gb.numPoints,gb.numSimplified),console.timeEnd("creation")),Va="z"+Ka,this.stats[Va]=(this.stats[Va]||0)+1,this.total++);
if(gb.source=Aa,pb){if(Ka===$a.maxZoom||Ka===pb)continue;Va=1<<pb-Ka;if(Qa!==Math.floor(db/Va)||Xa!==Math.floor(Ia/Va))continue}else if(Ka===$a.indexMaxZoom||gb.numPoints<=$a.indexMaxPoints)continue;if(gb.source=null,0!==Aa.length)1<xa&&console.time("clipping"),rb=.5*$a.buffer/$a.extent,Hb=.5-rb,Vb=.5+rb,yb=1+rb,Va=Ma=cb=Sa=null,lb=P(Aa,Ga,Qa-rb,Qa+Vb,0,gb.minX,gb.maxX,$a),Aa=P(Aa,Ga,Qa+Hb,Qa+yb,0,gb.minX,gb.maxX,$a),lb&&(Va=P(lb,Ga,Xa-rb,Xa+Vb,1,gb.minY,gb.maxY,$a),Ma=P(lb,Ga,Xa+Hb,Xa+yb,1,gb.minY,
gb.maxY,$a)),Aa&&(cb=P(Aa,Ga,Xa-rb,Xa+Vb,1,gb.minY,gb.maxY,$a),Sa=P(Aa,Ga,Xa+Hb,Xa+yb,1,gb.minY,gb.maxY,$a)),1<xa&&console.timeEnd("clipping"),Ua.push(Va||[],Ka+1,2*Qa,2*Xa),Ua.push(Ma||[],Ka+1,2*Qa,2*Xa+1),Ua.push(cb||[],Ka+1,2*Qa+1,2*Xa),Ua.push(Sa||[],Ka+1,2*Qa+1,2*Xa+1)}};pa.prototype.getTile=function(Aa,Ka,Qa){var Xa=this.options,pb=Xa.extent;Xa=Xa.debug;if(0>Aa||24<Aa)return null;var db=1<<Aa;db=Ka=(Ka%db+db)%db;db=32*((1<<Aa)*Qa+db)+Aa;if(this.tiles[db])return ca(this.tiles[db],pb);1<Xa&&console.log("drilling down to z%d-%d-%d",
Aa,Ka,Qa);for(var Ia,Ua=Aa,$a=Ka,xa=Qa;!Ia&&0<Ua;)Ua--,$a=Math.floor($a/2),xa=Math.floor(xa/2),Ia=this.tiles[32*((1<<Ua)*xa+$a)+Ua];return Ia&&Ia.source?(1<Xa&&console.log("found parent tile z%d-%d-%d",Ua,$a,xa),1<Xa&&console.time("drilling down"),this.splitTile(Ia.source,Ua,$a,xa,Aa,Ka,Qa),1<Xa&&console.timeEnd("drilling down"),this.tiles[db]?ca(this.tiles[db],pb):null):null};var tb=function(Aa){function Ka(Qa,Xa,pb,db){Aa.call(this,Qa,Xa,pb,qa);db&&(this.loadGeoJSON=db)}return Aa&&(Ka.__proto__=
Aa),(Ka.prototype=Object.create(Aa&&Aa.prototype)).constructor=Ka,Ka.prototype.loadData=function(Qa,Xa){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=Xa;this._pendingLoadDataParams=Qa;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ka.prototype._loadData=function(){var Qa=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Xa=this._pendingCallback,pb=this._pendingLoadDataParams;delete this._pendingCallback;
delete this._pendingLoadDataParams;var db=!!(pb&&pb.request&&pb.request.collectResourceTiming)&&new a.RequestPerformance(pb.request);this.loadGeoJSON(pb,function(Ia,Ua){if(Ia||!Ua)return Xa(Ia);if("object"!=typeof Ua)return Xa(Error("Input data given to '"+pb.source+"' is not a valid GeoJSON object."));!function Va(xa,Ga){var gb=xa&&xa.type;if("FeatureCollection"===gb)for(gb=0;gb<xa.features.length;gb++)Va(xa.features[gb],Ga);else if("GeometryCollection"===gb)for(gb=0;gb<xa.geometries.length;gb++)Va(xa.geometries[gb],
Ga);else if("Feature"===gb)Va(xa.geometry,Ga);else if("Polygon"===gb)k(xa.coordinates,Ga);else if("MultiPolygon"===gb)for(gb=0;gb<xa.coordinates.length;gb++)k(xa.coordinates[gb],Ga);return xa}(Ua,!0);try{Qa._geoJSONIndex=pb.cluster?(new sb(function(xa){var Ga=xa.superclusterOptions;xa=xa.clusterProperties;if(!xa||!Ga)return Ga;for(var Va={},gb={},Ma={accumulated:null,zoom:0},cb={properties:null},Sa=Object.keys(xa),lb=0;lb<Sa.length;lb+=1){var rb=Sa[lb],yb=xa[rb],Hb=yb[0];yb=a.createExpression(yb[1]);
Hb=a.createExpression("string"==typeof Hb?[Hb,["accumulated"],["get",rb]]:Hb);Va[rb]=yb.value;gb[rb]=Hb.value}return Ga.map=function(Vb){cb.properties=Vb;Vb={};for(var lc=0;lc<Sa.length;lc+=1){var Ac=Sa[lc];Vb[Ac]=Va[Ac].evaluate(Ma,cb)}return Vb},Ga.reduce=function(Vb,lc){cb.properties=lc;for(lc=0;lc<Sa.length;lc+=1){var Ac=Sa[lc];Ma.accumulated=Vb[Ac];Vb[Ac]=gb[Ac].evaluate(Ma,cb)}},Ga}(pb))).load(Ua.features):new pa(Ua,pb.geojsonVtOptions)}catch(xa){return Xa(xa)}Qa.loaded={};Ia={};db&&(Ua=db.finish())&&
(Ia.resourceTiming={},Ia.resourceTiming[pb.source]=JSON.parse(JSON.stringify(Ua)));Xa(null,Ia)})}},Ka.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Ka.prototype.reloadTile=function(Qa,Xa){var pb=this.loaded;return pb&&pb[Qa.uid]?Aa.prototype.reloadTile.call(this,Qa,Xa):this.loadTile(Qa,Xa)},Ka.prototype.loadGeoJSON=function(Qa,Xa){if(Qa.request)a.getJSON(Qa.request,Xa);else{if("string"!=typeof Qa.data)return Xa(Error("Input data given to '"+
Qa.source+"' is not a valid GeoJSON object."));try{return Xa(null,JSON.parse(Qa.data))}catch(pb){return Xa(Error("Input data given to '"+Qa.source+"' is not a valid GeoJSON object."))}}},Ka.prototype.removeSource=function(Qa,Xa){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});Xa()},Ka.prototype.getClusterExpansionZoom=function(Qa,Xa){try{Xa(null,this._geoJSONIndex.getClusterExpansionZoom(Qa.clusterId))}catch(pb){Xa(pb)}},Ka.prototype.getClusterChildren=function(Qa,Xa){try{Xa(null,
this._geoJSONIndex.getChildren(Qa.clusterId))}catch(pb){Xa(pb)}},Ka.prototype.getClusterLeaves=function(Qa,Xa){try{Xa(null,this._geoJSONIndex.getLeaves(Qa.clusterId,Qa.limit,Qa.offset))}catch(pb){Xa(pb)}},Ka}(ha);Ha=function(Aa){var Ka=this;this.self=Aa;this.actor=new a.Actor(Aa,this);this.layerIndexes={};this.availableImages={};this.workerSourceTypes={vector:ha,geojson:tb};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(Qa,Xa){if(Ka.workerSourceTypes[Qa])throw Error('Worker source with name "'+
Qa+'" already registered.');Ka.workerSourceTypes[Qa]=Xa};this.self.registerRTLTextPlugin=function(Qa){if(a.plugin.isParsed())throw Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Qa.applyArabicShaping;a.plugin.processBidirectionalText=Qa.processBidirectionalText;a.plugin.processStyledBidirectionalText=Qa.processStyledBidirectionalText}};return Ha.prototype.setReferrer=function(Aa,Ka){this.referrer=Ka},Ha.prototype.setImages=function(Aa,Ka,Qa){for(var Xa in this.availableImages[Aa]=
Ka,this.workerSources[Aa]){var pb=this.workerSources[Aa][Xa],db;for(db in pb)pb[db].availableImages=Ka}Qa()},Ha.prototype.setLayers=function(Aa,Ka,Qa){this.getLayerIndex(Aa).replace(Ka);Qa()},Ha.prototype.updateLayers=function(Aa,Ka,Qa){this.getLayerIndex(Aa).update(Ka.layers,Ka.removedIds);Qa()},Ha.prototype.loadTile=function(Aa,Ka,Qa){this.getWorkerSource(Aa,Ka.type,Ka.source).loadTile(Ka,Qa)},Ha.prototype.loadDEMTile=function(Aa,Ka,Qa){this.getDEMWorkerSource(Aa,Ka.source).loadTile(Ka,Qa)},Ha.prototype.reloadTile=
function(Aa,Ka,Qa){this.getWorkerSource(Aa,Ka.type,Ka.source).reloadTile(Ka,Qa)},Ha.prototype.abortTile=function(Aa,Ka,Qa){this.getWorkerSource(Aa,Ka.type,Ka.source).abortTile(Ka,Qa)},Ha.prototype.removeTile=function(Aa,Ka,Qa){this.getWorkerSource(Aa,Ka.type,Ka.source).removeTile(Ka,Qa)},Ha.prototype.removeDEMTile=function(Aa,Ka){this.getDEMWorkerSource(Aa,Ka.source).removeTile(Ka)},Ha.prototype.removeSource=function(Aa,Ka,Qa){if(this.workerSources[Aa]&&this.workerSources[Aa][Ka.type]&&this.workerSources[Aa][Ka.type][Ka.source]){var Xa=
this.workerSources[Aa][Ka.type][Ka.source];delete this.workerSources[Aa][Ka.type][Ka.source];void 0!==Xa.removeSource?Xa.removeSource(Ka,Qa):Qa()}},Ha.prototype.loadWorkerSource=function(Aa,Ka,Qa){try{this.self.importScripts(Ka.url),Qa()}catch(Xa){Qa(Xa.toString())}},Ha.prototype.syncRTLPluginState=function(Aa,Ka,Qa){try{a.plugin.setState(Ka);var Xa=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&null!=Xa){this.self.importScripts(Xa);var pb=a.plugin.isParsed();Qa(pb?void 0:Error("RTL Text Plugin failed to import scripts from "+
Xa),pb)}}catch(db){Qa(db.toString())}},Ha.prototype.getAvailableImages=function(Aa){Aa=this.availableImages[Aa];return Aa||(Aa=[]),Aa},Ha.prototype.getLayerIndex=function(Aa){var Ka=this.layerIndexes[Aa];return Ka||(Ka=this.layerIndexes[Aa]=new oa),Ka},Ha.prototype.getWorkerSource=function(Aa,Ka,Qa){var Xa=this;return this.workerSources[Aa]||(this.workerSources[Aa]={}),this.workerSources[Aa][Ka]||(this.workerSources[Aa][Ka]={}),this.workerSources[Aa][Ka][Qa]||(this.workerSources[Aa][Ka][Qa]=new this.workerSourceTypes[Ka]({send:function(pb,
db,Ia){Xa.actor.send(pb,db,Ia,Aa)}},this.getLayerIndex(Aa),this.getAvailableImages(Aa))),this.workerSources[Aa][Ka][Qa]},Ha.prototype.getDEMWorkerSource=function(Aa,Ka){return this.demWorkerSources[Aa]||(this.demWorkerSources[Aa]={}),this.demWorkerSources[Aa][Ka]||(this.demWorkerSources[Aa][Ka]=new wa),this.demWorkerSources[Aa][Ka]},Ha.prototype.enforceCacheSizeLimit=function(Aa,Ka){a.enforceCacheSizeLimit(Ka)},"undefined"!=typeof WorkerGlobalScope&&void 0!==a.window&&a.window instanceof WorkerGlobalScope&&
(a.window.worker=new Ha(a.window)),Ha});q(["./shared"],function(a){function f(Bb){if(!sb)return Bb[0];for(var U=0;U<Bb.length;U++)if(Bb[U]in sb)return Bb[U];return Bb[0]}function d(Bb,U,X,W,fa,za){this.fontSize=Bb||24;this.buffer=void 0===U?3:U;this.cutoff=W||.25;this.fontFamily=fa||"sans-serif";this.fontWeight=za||"normal";this.radius=X||8;Bb=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=Bb;this.ctx=this.canvas.getContext("2d");
this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(Bb*Bb);this.gridInner=new Float64Array(Bb*Bb);this.f=new Float64Array(Bb);this.d=new Float64Array(Bb);this.z=new Float64Array(Bb+1);this.v=new Int16Array(Bb);this.middle=Math.round(Bb/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function l(Bb,U,X,W,fa,za,Na){for(var ab=0;ab<U;ab++){for(var mb=0;mb<X;mb++)W[mb]=Bb[mb*U+ab];k(W,fa,za,
Na,X);for(mb=0;mb<X;mb++)Bb[mb*U+ab]=fa[mb]}for(mb=0;mb<X;mb++){for(ab=0;ab<U;ab++)W[ab]=Bb[mb*U+ab];k(W,fa,za,Na,U);for(ab=0;ab<U;ab++)Bb[mb*U+ab]=Math.sqrt(fa[ab])}}function k(Bb,U,X,W,fa){X[0]=0;W[0]=-1E20;W[1]=1E20;for(var za=1,Na=0;za<fa;za++){for(var ab=(Bb[za]+za*za-(Bb[X[Na]]+X[Na]*X[Na]))/(2*za-2*X[Na]);ab<=W[Na];)Na--,ab=(Bb[za]+za*za-(Bb[X[Na]]+X[Na]*X[Na]))/(2*za-2*X[Na]);X[++Na]=za;W[Na]=ab;W[Na+1]=1E20}for(Na=za=0;za<fa;za++){for(;W[Na+1]<za;)Na++;U[za]=(za-X[Na])*(za-X[Na])+Bb[X[Na]]}}
function c(Bb,U,X){var W=function(fa,za){if(fa)return X(fa);za&&(fa=a.pick(a.extend(za,Bb),"tiles minzoom maxzoom attribution mapbox_logo bounds scheme tileSize encoding".split(" ")),za.vector_layers&&(fa.vectorLayers=za.vector_layers,fa.vectorLayerIds=fa.vectorLayers.map(function(Na){return Na.id})),fa.tiles=U.canonicalizeTileset(fa,Bb.url),X(null,fa))};return Bb.url?a.getJSON(U.transformRequest(U.normalizeSourceURL(Bb.url),a.ResourceType.Source),W):a.browser.frame(function(){return W(null,Bb)})}
function e(Bb,U){var X=a.identity([]);return a.translate(X,X,[1,1,0]),a.scale(X,X,[.5*Bb.width,.5*Bb.height,1]),a.multiply(X,X,Bb.calculatePosMatrix(U.toUnwrapped()))}function g(Bb,U,X,W,fa,za){var Na=function(Zb,Jc,Ic){if(Zb)for(var yc=0;yc<Zb.length;yc+=1){var Hc=Jc[Zb[yc]];if(Hc&&Hc.source===Ic&&"fill-extrusion"===Hc.type)return!0}else for(yc in Jc)if(Zb=Jc[yc],Zb.source===Ic&&"fill-extrusion"===Zb.type)return!0;return!1}(fa&&fa.layers,U,Bb.id),ab=za.maxPitchScaleFactor();W=Bb.tilesIn(W,ab,Na);
W.sort(m);Na=[];for(var mb=0;mb<W.length;mb+=1){var Mb=W[mb];Na.push({wrappedTileID:Mb.tileID.wrapped().key,queryResults:Mb.tile.queryRenderedFeatures(U,X,Bb._state,Mb.queryGeometry,Mb.cameraQueryGeometry,Mb.scale,fa,za,ab,e(Bb.transform,Mb.tileID))})}U=function(Zb){for(var Jc={},Ic={},yc=0;yc<Zb.length;yc+=1){var Hc=Zb[yc],Dc=Hc.queryResults;Hc=Hc.wrappedTileID;Hc=Ic[Hc]=Ic[Hc]||{};for(var Xb in Dc)for(var va=Dc[Xb],Da=Hc[Xb]=Hc[Xb]||{},Oa=Jc[Xb]=Jc[Xb]||[],bb=0;bb<va.length;bb+=1){var nb=va[bb];
Da[nb.featureIndex]||(Da[nb.featureIndex]=!0,Oa.push(nb))}}return Jc}(Na);for(var Ub in U)U[Ub].forEach(function(Zb){Zb=Zb.feature;var Jc=Bb.getFeatureState(Zb.layer["source-layer"],Zb.id);Zb.source=Zb.layer.source;Zb.layer["source-layer"]&&(Zb.sourceLayer=Zb.layer["source-layer"]);Zb.state=Jc});return U}function m(Bb,U){Bb=Bb.tileID;U=U.tileID;return Bb.overscaledZ-U.overscaledZ||Bb.canonical.y-U.canonical.y||Bb.wrap-U.wrap||Bb.canonical.x-U.canonical.x}function r(Bb,U){var X=Math.abs(2*Bb.wrap)-
+(0>Bb.wrap),W=Math.abs(2*U.wrap)-+(0>U.wrap);return Bb.overscaledZ-U.overscaledZ||W-X||U.canonical.y-Bb.canonical.y||U.canonical.x-Bb.canonical.x}function u(Bb){return"raster"===Bb||"image"===Bb||"video"===Bb}function v(){return new a.window.Worker(ei.workerUrl)}function w(Bb,U){var X={},W;for(W in Bb)"ref"!==W&&(X[W]=Bb[W]);return a.refProperties.forEach(function(fa){fa in U&&(X[fa]=U[fa])}),X}function D(Bb){Bb=Bb.slice();for(var U=Object.create(null),X=0;X<Bb.length;X++)U[Bb[X].id]=Bb[X];for(X=
0;X<Bb.length;X++)"ref"in Bb[X]&&(Bb[X]=w(Bb[X],U[Bb[X].ref]));return Bb}function C(Bb,U,X,W,fa,za){for(var Na in U=U||{},Bb=Bb||{})Bb.hasOwnProperty(Na)&&(a.deepEqual(Bb[Na],U[Na])||X.push({command:za,args:[W,Na,U[Na],fa]}));for(Na in U)U.hasOwnProperty(Na)&&!Bb.hasOwnProperty(Na)&&(a.deepEqual(Bb[Na],U[Na])||X.push({command:za,args:[W,Na,U[Na],fa]}))}function x(Bb){return Bb.id}function A(Bb,U){return Bb[U.id]=U,Bb}function B(Bb,U,X,W,fa){var za=a.create();return U?(a.scale(za,za,[1/fa,1/fa,1]),
X||a.rotateZ(za,za,W.angle)):a.multiply(za,W.labelPlaneMatrix,Bb),za}function t(Bb,U,X,W,fa){return U?(Bb=a.clone(Bb),a.scale(Bb,Bb,[fa,fa,1]),X||a.rotateZ(Bb,Bb,-W.angle),Bb):W.glCoordMatrix}function G(Bb,U){Bb=[Bb.x,Bb.y,0,1];O(Bb,Bb,U);U=Bb[3];return{point:new a.Point(Bb[0]/U,Bb[1]/U),signedDistanceFromCamera:U}}function H(Bb,U,X,W,fa,za,Na,ab){var mb=W?Bb.textSizeData:Bb.iconSizeData,Mb=a.evaluateSizeForZoom(mb,X.transform.zoom),Ub=[256/X.width*2+1,256/X.height*2+1],Zb=W?Bb.text.dynamicLayoutVertexArray:
Bb.icon.dynamicLayoutVertexArray;Zb.clear();for(var Jc=Bb.lineVertexArray,Ic=W?Bb.text.placedSymbolArray:Bb.icon.placedSymbolArray,yc=X.transform.width/X.transform.height,Hc=!1,Dc=0;Dc<Ic.length;Dc++){var Xb=Ic.get(Dc);if(Xb.hidden||Xb.writingMode===a.WritingMode.vertical&&!Hc)N(Xb.numGlyphs,Zb);else{Hc=!1;var va=[Xb.anchorX,Xb.anchorY,0,1];a.transformMat4(va,va,U);var Da=va[0]/va[3],Oa=va[1]/va[3];if(Da>=-Ub[0]&&Da<=Ub[0]&&Oa>=-Ub[1]&&Oa<=Ub[1]){Hc=.5+X.transform.cameraToCenterDistance/va[3]*.5;
va=a.evaluateSizeForFeature(mb,Mb,Xb);va=Na?va/Hc:va*Hc;Da=new a.Point(Xb.anchorX,Xb.anchorY);Oa=G(Da,fa).point;var bb={},nb=L(Xb,va,!1,ab,U,fa,za,Bb.glyphOffsetArray,Jc,Zb,Oa,Da,bb,yc);Hc=nb.useVertical;(nb.notEnoughRoom||Hc||nb.needsFlipping&&L(Xb,va,!0,ab,U,fa,za,Bb.glyphOffsetArray,Jc,Zb,Oa,Da,bb,yc).notEnoughRoom)&&N(Xb.numGlyphs,Zb)}else N(Xb.numGlyphs,Zb)}}W?Bb.text.dynamicLayoutVertexBuffer.updateData(Zb):Bb.icon.dynamicLayoutVertexBuffer.updateData(Zb)}function I(Bb,U,X,W,fa,za,Na,ab,mb,
Mb,Ub){var Zb=ab.glyphStartIndex+ab.numGlyphs,Jc=ab.lineStartIndex,Ic=ab.lineStartIndex+ab.lineLength,yc=U.getoffsetX(ab.glyphStartIndex);U=U.getoffsetX(Zb-1);yc=K(Bb*yc,X,W,fa,za,Na,ab.segment,Jc,Ic,mb,Mb,Ub);return yc?(Bb=K(Bb*U,X,W,fa,za,Na,ab.segment,Jc,Ic,mb,Mb,Ub))?{first:yc,last:Bb}:null:null}function J(Bb,U,X,W){return Bb===a.WritingMode.horizontal&&Math.abs(X.y-U.y)>Math.abs(X.x-U.x)*W?{useVertical:!0}:(Bb===a.WritingMode.vertical?U.y<X.y:U.x>X.x)?{needsFlipping:!0}:null}function L(Bb,U,
X,W,fa,za,Na,ab,mb,Mb,Ub,Zb,Jc,Ic){U/=24;var yc=Bb.lineOffsetX*U,Hc=Bb.lineOffsetY*U;if(1<Bb.numGlyphs){fa=Bb.glyphStartIndex+Bb.numGlyphs;var Dc=Bb.lineStartIndex,Xb=Bb.lineStartIndex+Bb.lineLength,va=I(U,ab,yc,Hc,X,Ub,Zb,Bb,mb,za,Jc);if(!va)return{notEnoughRoom:!0};var Da=G(va.first.point,Na).point;Na=G(va.last.point,Na).point;if(W&&!X&&(Ic=J(Bb.writingMode,Da,Na,Ic)))return Ic;Ic=[va.first];for(W=Bb.glyphStartIndex+1;W<fa-1;W++)Ic.push(K(U*ab.getoffsetX(W),yc,Hc,X,Ub,Zb,Bb.segment,Dc,Xb,mb,za,
Jc));Ic.push(va.last)}else{if(W&&!X&&(Dc=G(Zb,fa).point,Xb=Bb.lineStartIndex+Bb.segment+1,Xb=new a.Point(mb.getx(Xb),mb.gety(Xb)),va=G(Xb,fa),fa=0<va.signedDistanceFromCamera?va.point:E(Zb,Xb,Dc,1,fa),Ic=J(Bb.writingMode,Dc,fa,Ic)))return Ic;Bb=K(U*ab.getoffsetX(Bb.glyphStartIndex),yc,Hc,X,Ub,Zb,Bb.segment,Bb.lineStartIndex,Bb.lineStartIndex+Bb.lineLength,mb,za,Jc);if(!Bb)return{notEnoughRoom:!0};Ic=[Bb]}Bb=0;for(X=Ic;Bb<X.length;Bb+=1)za=X[Bb],a.addDynamicAttributes(Mb,za.point,za.angle);return{}}
function E(Bb,U,X,W,fa){Bb=G(Bb.add(Bb.sub(U)._unit()),fa).point;Bb=X.sub(Bb);return X.add(Bb._mult(W/Bb.mag()))}function K(Bb,U,X,W,fa,za,Na,ab,mb,Mb,Ub,Zb){var Jc=W?Bb-U:Bb+U;Bb=0<Jc?1:-1;U=0;W&&(Bb*=-1,U=Math.PI);0>Bb&&(U+=Math.PI);W=0<Bb?ab+Na:ab+Na+1;Na=fa;var Ic=0,yc=0,Hc=Math.abs(Jc);for(Jc=[];Ic+yc<=Hc;){if((W+=Bb)<ab||W>=mb)return null;if(fa=Na,Jc.push(Na),void 0===(Na=Zb[W])){Na=new a.Point(Mb.getx(W),Mb.gety(W));var Dc=G(Na,Ub);0<Dc.signedDistanceFromCamera?Na=Zb[W]=Dc.point:(Dc=W-Bb,Na=
E(0===Ic?za:new a.Point(Mb.getx(Dc),Mb.gety(Dc)),Na,fa,Hc-Ic+1,Ub))}Ic+=yc;yc=fa.dist(Na)}ab=(Hc-Ic)/yc;za=Na.sub(fa);ab=za.mult(ab)._add(fa);ab._add(za._unit()._perp()._mult(X*Bb));X=U+Math.atan2(Na.y-fa.y,Na.x-fa.x);return Jc.push(ab),{point:ab,angle:X,path:Jc}}function N(Bb,U){for(var X=0;X<Bb;X++){var W=U.length;U.resize(W+4);U.float32.set(Ge,3*W)}}function O(Bb,U,X){var W=U[0];U=U[1];return Bb[0]=X[0]*W+X[4]*U+X[12],Bb[1]=X[1]*W+X[5]*U+X[13],Bb[3]=X[3]*W+X[7]*U+X[15],Bb}function Q(Bb,U,X){return a.EXTENT/
(Bb.tileSize*Math.pow(2,X-Bb.tileID.overscaledZ))*U}function P(Bb,U,X,W,fa){var za=a.getAnchorAlignment(Bb);U*=-(za.horizontalAlign-.5);X*=-(za.verticalAlign-.5);Bb=a.evaluateVariableOffset(Bb,W);return new a.Point(U+Bb[0]*fa,X+Bb[1]*fa)}function T(Bb,U,X,W,fa,za){var Na=Bb.x1,ab=Bb.x2,mb=Bb.y1,Mb=Bb.y2,Ub=Bb.anchorPointX;Bb=Bb.anchorPointY;U=new a.Point(U,X);return W&&U._rotate(fa?za:-za),{x1:Na+U.x,y1:mb+U.y,x2:ab+U.x,y2:Mb+U.y,anchorPointX:Ub,anchorPointY:Bb}}function V(Bb,U,X,W,fa){Bb.emplaceBack(U?
1:0,X?1:0,W||0,fa||0);Bb.emplaceBack(U?1:0,X?1:0,W||0,fa||0);Bb.emplaceBack(U?1:0,X?1:0,W||0,fa||0);Bb.emplaceBack(U?1:0,X?1:0,W||0,fa||0)}function aa(Bb){if(0===Bb.opacity&&!Bb.placed)return 0;if(1===Bb.opacity&&Bb.placed)return 4294967295;var U=Bb.placed?1:0;Bb=Math.floor(127*Bb.opacity);return Bb*Ob+U*Bc+Bb*Tc+U*jc+Bb*Oc+U*gd+Bb*vd+U}function ba(Bb,U){var X=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,W={};return{fragmentSource:Bb=Bb.replace(X,function(fa,za,Na,ab,mb){return W[mb]=!0,"define"===
za?"\n#ifndef HAS_UNIFORM_u_"+mb+"\nvarying "+Na+" "+ab+" "+mb+";\n#else\nuniform "+Na+" "+ab+" u_"+mb+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+mb+"\n    "+Na+" "+ab+" "+mb+" \x3d u_"+mb+";\n#endif\n"}),vertexSource:U=U.replace(X,function(fa,za,Na,ab,mb){fa="float"===ab?"vec2":"vec4";var Mb=mb.match(/color/)?"color":fa;return W[mb]?"define"===za?"\n#ifndef HAS_UNIFORM_u_"+mb+"\nuniform lowp float u_"+mb+"_t;\nattribute "+Na+" "+fa+" a_"+mb+";\nvarying "+Na+" "+ab+" "+mb+";\n#else\nuniform "+Na+" "+
ab+" u_"+mb+";\n#endif\n":"vec4"===Mb?"\n#ifndef HAS_UNIFORM_u_"+mb+"\n    "+mb+" \x3d a_"+mb+";\n#else\n    "+Na+" "+ab+" "+mb+" \x3d u_"+mb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+mb+"\n    "+mb+" \x3d unpack_mix_"+Mb+"(a_"+mb+", u_"+mb+"_t);\n#else\n    "+Na+" "+ab+" "+mb+" \x3d u_"+mb+";\n#endif\n":"define"===za?"\n#ifndef HAS_UNIFORM_u_"+mb+"\nuniform lowp float u_"+mb+"_t;\nattribute "+Na+" "+fa+" a_"+mb+";\n#else\nuniform "+Na+" "+ab+" u_"+mb+";\n#endif\n":"vec4"===Mb?"\n#ifndef HAS_UNIFORM_u_"+
mb+"\n    "+Na+" "+ab+" "+mb+" \x3d a_"+mb+";\n#else\n    "+Na+" "+ab+" "+mb+" \x3d u_"+mb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+mb+"\n    "+Na+" "+ab+" "+mb+" \x3d unpack_mix_"+Mb+"(a_"+mb+", u_"+mb+"_t);\n#else\n    "+Na+" "+ab+" "+mb+" \x3d u_"+mb+";\n#endif\n"})}}function Y(Bb,U,X){var W=1/Q(X,1,U.transform.tileZoom),fa=Math.pow(2,X.tileID.overscaledZ);U=X.tileSize*Math.pow(2,U.transform.tileZoom)/fa;fa=U*(X.tileID.canonical.x+X.tileID.wrap*fa);U*=X.tileID.canonical.y;return{u_image:0,u_texsize:X.imageAtlasTexture.size,
u_scale:[W,Bb.fromScale,Bb.toScale],u_fade:Bb.t,u_pixel_coord_upper:[fa>>16,U>>16],u_pixel_coord_lower:[65535&fa,65535&U]}}function ea(Bb,U,X){return Bb.translatePosMatrix(U.tileID.posMatrix,U,X.paint.get("line-translate"),X.paint.get("line-translate-anchor"))}function da(Bb,U,X,W,fa,za,Na){for(var ab=Bb.context,mb=ab.gl,Mb=Bb.useProgram("collisionBox"),Ub=[],Zb=0,Jc=0,Ic=0;Ic<W.length;Ic++){var yc=W[Ic],Hc=U.getTile(yc),Dc=Hc.getBucket(X);if(Dc){var Xb=yc.posMatrix;0===fa[0]&&0===fa[1]||(Xb=Bb.translatePosMatrix(yc.posMatrix,
Hc,fa,za));yc=Na?Dc.textCollisionBox:Dc.iconCollisionBox;var va=Dc.collisionCircleArray;if(0<va.length){var Da=a.create(),Oa=Xb;a.mul(Da,Dc.placementInvProjMatrix,Bb.transform.glCoordMatrix);a.mul(Da,Da,Dc.placementViewportMatrix);Ub.push({circleArray:va,circleOffset:Jc,transform:Oa,invTransform:Da});Jc=Zb+=va.length/4}if(yc){Dc=Mb;va=Dc.draw;Da=mb.LINES;Oa=Rd.disabled;var bb=Sc.disabled,nb=Bb.colorModeForRenderPass(),Kb=Gd.disabled,Pb=Bb.transform,pc=Hc;Hc=Q(pc,1,Pb.zoom);var hc=Math.pow(2,Pb.zoom-
pc.tileID.overscaledZ);pc=pc.tileID.overscaleFactor();va.call(Dc,ab,Da,Oa,bb,nb,Kb,{u_matrix:Xb,u_camera_to_center_distance:Pb.cameraToCenterDistance,u_pixels_to_tile_units:Hc,u_extrude_scale:[Pb.pixelsToGLUnits[0]/(Hc*hc),Pb.pixelsToGLUnits[1]/(Hc*hc)],u_overscale_factor:pc},X.id,yc.layoutVertexBuffer,yc.indexBuffer,yc.segments,null,Bb.transform.zoom,null,null,yc.collisionVertexBuffer)}}}if(Na&&Ub.length){U=Bb.useProgram("collisionCircle");W=new a.StructArrayLayout2f1f2i16;W.resize(4*Zb);W._trim();
for(za=fa=0;za<Ub.length;za+=1)for(Na=Ub[za],Mb=0;Mb<Na.circleArray.length/4;Mb++)Hc=4*Mb,Jc=Na.circleArray[Hc+0],Ic=Na.circleArray[Hc+1],yc=Na.circleArray[Hc+2],Hc=Na.circleArray[Hc+3],W.emplace(fa++,Jc,Ic,yc,Hc,0),W.emplace(fa++,Jc,Ic,yc,Hc,1),W.emplace(fa++,Jc,Ic,yc,Hc,2),W.emplace(fa++,Jc,Ic,yc,Hc,3);if(!Ai||Ai.length<2*Zb){Zb*=2;fa=new a.StructArrayLayout3ui6;fa.resize(Zb);fa._trim();for(za=0;za<Zb;za++)Na=6*za,fa.uint16[Na+0]=4*za,fa.uint16[Na+1]=4*za+1,fa.uint16[Na+2]=4*za+2,fa.uint16[Na+3]=
4*za+2,fa.uint16[Na+4]=4*za+3,fa.uint16[Na+5]=4*za;Ai=fa}Zb=ab.createIndexBuffer(Ai,!0);W=ab.createVertexBuffer(W,a.collisionCircleLayout.members,!0);for(fa=0;fa<Ub.length;fa+=1)za=Ub[fa],Na=Bb.transform,Na={u_matrix:za.transform,u_inv_matrix:za.invTransform,u_camera_to_center_distance:Na.cameraToCenterDistance,u_viewport_size:[Na.width,Na.height]},U.draw(ab,mb.TRIANGLES,Rd.disabled,Sc.disabled,Bb.colorModeForRenderPass(),Gd.disabled,Na,X.id,W,Zb,a.SegmentVector.simpleSegment(0,2*za.circleOffset,
za.circleArray.length,za.circleArray.length/2),null,Bb.transform.zoom,null,null,null);W.destroy();Zb.destroy()}}function ca(Bb,U,X,W,fa,za,Na,ab,mb,Mb,Ub,Zb){var Jc=Bb.context,Ic=Jc.gl,yc=Bb.transform,Hc="map"===ab,Dc="map"===mb,Xb=Hc&&"point"!==X.layout.get("symbol-placement"),va=Hc&&!Dc&&!Xb,Da=void 0!==X.layout.get("symbol-sort-key").constantOr(1);mb=Bb.depthModeForSublayer(0,Rd.ReadOnly);var Oa=X.layout.get("text-variable-anchor");ab=[];for(var bb=0;bb<W.length;bb+=1){var nb=W[bb],Kb=U.getTile(nb),
Pb=Kb.getBucket(X);if(Pb){var pc=fa?Pb.text:Pb.icon;if(pc&&pc.segments.get().length){var hc=pc.programConfigurations.get(X.id),kc=fa||Pb.sdfIcons,Xc=fa?Pb.textSizeData:Pb.iconSizeData,fd=Dc||0!==yc.pitch;hc=Bb.useProgram(Pb.iconsInText&&fa?"symbolTextAndIcon":kc?"symbolSDF":"symbolIcon",hc);var rd=a.evaluateSizeForZoom(Xc,yc.zoom),zd=void 0,Hd=[0,0],Bd=void 0,Pd=void 0,fe=null,Xd=void 0;fa?(Bd=Kb.glyphAtlasTexture,Pd=Ic.LINEAR,zd=Kb.glyphAtlasTexture.size,Pb.iconsInText&&(Hd=Kb.imageAtlasTexture.size,
fe=Kb.imageAtlasTexture,Xd=fd||Bb.options.rotating||Bb.options.zooming||"composite"===Xc.kind||"camera"===Xc.kind?Ic.LINEAR:Ic.NEAREST)):(zd=1!==X.layout.get("icon-size").constantOr(0)||Pb.iconsNeedLinear,Bd=Kb.imageAtlasTexture,Pd=kc||Bb.options.rotating||Bb.options.zooming||zd||fd?Ic.LINEAR:Ic.NEAREST,zd=Kb.imageAtlasTexture.size);var oe=Q(Kb,1,Bb.transform.zoom);fd=B(nb.posMatrix,Dc,Hc,Bb.transform,oe);oe=t(nb.posMatrix,Dc,Hc,Bb.transform,oe);var Fe=Oa&&Pb.hasTextData();Fe="none"!==X.layout.get("icon-text-fit")&&
Fe&&Pb.hasIconData();Xb&&H(Pb,nb.posMatrix,Bb,fa,fd,oe,Dc,Mb);nb=Bb.translatePosMatrix(nb.posMatrix,Kb,za,Na);fd=Xb||fa&&Oa||Fe?Lj:fd;Kb=Bb.translatePosMatrix(oe,Kb,za,Na,!0);oe=kc&&0!==X.paint.get(fa?"text-halo-width":"icon-halo-width").constantOr(1);Pb={program:hc,buffers:pc,uniformValues:kc?Pb.iconsInText?tj(Xc.kind,rd,va,Dc,Bb,nb,fd,Kb,zd,Hd):nf(Xc.kind,rd,va,Dc,Bb,nb,fd,Kb,fa,zd,!0):sj(Xc.kind,rd,va,Dc,Bb,nb,fd,Kb,fa,zd),atlasTexture:Bd,atlasTextureIcon:fe,atlasInterpolation:Pd,atlasInterpolationIcon:Xd,
isSDF:kc,hasHalo:oe};if(Da)for(kc=0,pc=pc.segments.get();kc<pc.length;kc+=1)Xc=pc[kc],ab.push({segments:new a.SegmentVector([Xc]),sortKey:Xc.sortKey,state:Pb});else ab.push({segments:pc.segments,sortKey:0,state:Pb})}}}Da&&ab.sort(function(ee,Pe){return ee.sortKey-Pe.sortKey});for(U=0;U<ab.length;U+=1){W=ab[U];fa=W.state;if(Jc.activeTexture.set(Ic.TEXTURE0),fa.atlasTexture.bind(fa.atlasInterpolation,Ic.CLAMP_TO_EDGE),fa.atlasTextureIcon&&(Jc.activeTexture.set(Ic.TEXTURE1),fa.atlasTextureIcon&&fa.atlasTextureIcon.bind(fa.atlasInterpolationIcon,
Ic.CLAMP_TO_EDGE)),fa.isSDF)za=fa.uniformValues,fa.hasHalo&&(za.u_is_halo=1,la(fa.buffers,W.segments,X,Bb,fa.program,mb,Ub,Zb,za)),za.u_is_halo=0;la(fa.buffers,W.segments,X,Bb,fa.program,mb,Ub,Zb,fa.uniformValues)}}function la(Bb,U,X,W,fa,za,Na,ab,mb){var Mb=W.context;fa.draw(Mb,Mb.gl.TRIANGLES,za,Na,ab,Gd.disabled,mb,X.id,Bb.layoutVertexBuffer,Bb.indexBuffer,U,X.paint,W.transform.zoom,Bb.programConfigurations.get(X.id),Bb.dynamicLayoutVertexBuffer,Bb.opacityVertexBuffer)}function pa(Bb,U,X,W,fa,
za,Na){var ab,mb,Mb,Ub=Bb.context.gl,Zb=X.paint.get("fill-pattern"),Jc=Zb&&Zb.constantOr(1),Ic=X.getCrossfadeParameters();Na?(mb=Jc&&!X.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ab=Ub.LINES):(mb=Jc?"fillPattern":"fill",ab=Ub.TRIANGLES);for(var yc=0;yc<W.length;yc+=1){var Hc=W[yc];var Dc=U.getTile(Hc);if(!Jc||Dc.patternsLoaded()){var Xb=Dc.getBucket(X);if(Xb){var va=Xb.programConfigurations.get(X.id),Da=Bb.useProgram(mb,va);Jc&&(Bb.context.activeTexture.set(Ub.TEXTURE0),
Dc.imageAtlasTexture.bind(Ub.LINEAR,Ub.CLAMP_TO_EDGE),va.updatePaintBuffers(Ic));if((Mb=Zb.constantOr(null))&&Dc.imageAtlas){var Oa=Dc.imageAtlas;var bb=Oa.patternPositions[Mb.to.toString()];Mb=Oa.patternPositions[Mb.from.toString()];bb&&Mb&&va.setConstantPatternPositions(bb,Mb)}Oa=Bb.translatePosMatrix(Hc.posMatrix,Dc,X.paint.get("fill-translate"),X.paint.get("fill-translate-anchor"));if(Na){bb=Xb.indexBuffer2;Mb=Xb.segments2;var nb=[Ub.drawingBufferWidth,Ub.drawingBufferHeight];if("fillOutlinePattern"===
mb&&Jc){var Kb=a,Pb=Kb.extend;Dc=a.extend({u_matrix:Oa},Y(Ic,Bb,Dc));Dc=Pb.call(Kb,Dc,{u_world:nb})}else Dc={u_matrix:Oa,u_world:nb}}else bb=Xb.indexBuffer,Mb=Xb.segments,Dc=Jc?a.extend({u_matrix:Oa},Y(Ic,Bb,Dc)):{u_matrix:Oa};Da.draw(Bb.context,ab,fa,Bb.stencilModeForClipping(Hc),za,Gd.disabled,Dc,X.id,Xb.layoutVertexBuffer,bb,Mb,X.paint,Bb.transform.zoom,va)}}}}function qa(Bb,U,X,W,fa,za,Na){for(var ab=Bb.context,mb=ab.gl,Mb=X.paint.get("fill-extrusion-pattern"),Ub=Mb.constantOr(1),Zb=X.getCrossfadeParameters(),
Jc=X.paint.get("fill-extrusion-opacity"),Ic=0;Ic<W.length;Ic+=1){var yc=W[Ic],Hc=U.getTile(yc),Dc=Hc.getBucket(X);if(Dc){var Xb=Dc.programConfigurations.get(X.id),va=Bb.useProgram(Ub?"fillExtrusionPattern":"fillExtrusion",Xb);Ub&&(Bb.context.activeTexture.set(mb.TEXTURE0),Hc.imageAtlasTexture.bind(mb.LINEAR,mb.CLAMP_TO_EDGE),Xb.updatePaintBuffers(Zb));var Da=Mb.constantOr(null);if(Da&&Hc.imageAtlas){var Oa=Hc.imageAtlas,bb=Oa.patternPositions[Da.to.toString()];Da=Oa.patternPositions[Da.from.toString()];
bb&&Da&&Xb.setConstantPatternPositions(bb,Da)}bb=Bb.translatePosMatrix(yc.posMatrix,Hc,X.paint.get("fill-extrusion-translate"),X.paint.get("fill-extrusion-translate-anchor"));Da=X.paint.get("fill-extrusion-vertical-gradient");if(Ub){Oa=Bb;var nb=Zb;Hc=a.extend(kg(bb,Oa,Da,Jc),Y(nb,Oa,Hc),{u_height_factor:-Math.pow(2,yc.overscaledZ)/Hc.tileSize/8})}else Hc=kg(bb,Bb,Da,Jc);va.draw(ab,ab.gl.TRIANGLES,fa,za,Na,Gd.backCCW,Hc,X.id,Dc.layoutVertexBuffer,Dc.indexBuffer,Dc.segments,X.paint,Bb.transform.zoom,
Xb)}}}function oa(Bb,U,X,W,fa,za){Bb=Bb.context;var Na=Bb.gl;Na.enable(Na.SCISSOR_TEST);Na.scissor(U*a.browser.devicePixelRatio,X*a.browser.devicePixelRatio,W*a.browser.devicePixelRatio,fa*a.browser.devicePixelRatio);Bb.clear({color:za});Na.disable(Na.SCISSOR_TEST)}function ka(Bb,U){(!Bb.duration||Bb.duration<U.duration)&&(Bb.duration=U.duration,Bb.easing=U.easing)}function ra(Bb,U,X){var W=X.maxSpeed,fa=X.linearity,za=X.deceleration;Bb=a.clamp(Bb*fa/(U/1E3),-W,W);fa=Math.abs(Bb)/(za*fa);return{easing:X.easing,
duration:1E3*fa,amount:fa/2*Bb}}function ha(Bb,U){for(var X={},W=0;W<Bb.length;W++)X[Bb[W].identifier]=U[W];return X}function ma(Bb,U,X){for(var W=0;W<Bb.length;W++)if(Bb[W].identifier===X)return U[W]}function wa(Bb){return Math.abs(Bb.y)>Math.abs(Bb.x)}function na(Bb){return Bb*(2-Bb)}function ya(Bb){return Bb.panDelta&&Bb.panDelta.mag()||Bb.zoomDelta||Bb.bearingDelta||Bb.pitchDelta}function Fa(Bb){Bb.parentNode&&Bb.parentNode.removeChild(Bb)}function Ha(Bb,U,X){if(Bb=new a.LngLat(Bb.lng,Bb.lat),
U){var W=new a.LngLat(Bb.lng-360,Bb.lat),fa=new a.LngLat(Bb.lng+360,Bb.lat),za=X.locationPoint(Bb).distSqr(U);X.locationPoint(W).distSqr(U)<za?Bb=W:X.locationPoint(fa).distSqr(U)<za&&(Bb=fa)}for(;180<Math.abs(Bb.lng-X.center.lng);){U=X.locationPoint(Bb);if(0<=U.x&&0<=U.y&&U.x<=X.width&&U.y<=X.height)break;Bb.lng>X.center.lng?Bb.lng-=360:Bb.lng+=360}return Bb}function eb(Bb,U,X){Bb=Bb.classList;for(var W in mh)Bb.remove("mapboxgl-"+X+"-anchor-"+W);Bb.add("mapboxgl-"+X+"-anchor-"+U)}function hb(Bb,
U,X){var W=X&&X.maxWidth||100,fa=Bb._container.clientHeight/2,za=Bb.unproject([0,fa]);fa=Bb.unproject([W,fa]);za=za.distanceTo(fa);X&&"imperial"===X.unit?(X=3.2808*za,5280<X?ob(U,W,X/5280,Bb._getUIString("ScaleControl.Miles")):ob(U,W,X,Bb._getUIString("ScaleControl.Feet"))):X&&"nautical"===X.unit?ob(U,W,za/1852,Bb._getUIString("ScaleControl.NauticalMiles")):1E3<=za?ob(U,W,za/1E3,Bb._getUIString("ScaleControl.Kilometers")):ob(U,W,za,Bb._getUIString("ScaleControl.Meters"))}function ob(Bb,U,X,W){var fa,
za=fa=Math.pow(10,(""+Math.floor(X)).length-1);if(10<=(fa=X/fa))fa=10;else if(5<=fa)fa=5;else if(3<=fa)fa=3;else if(2<=fa)fa=2;else if(1<=fa)fa=1;else{var Na=Math.pow(10,Math.ceil(-Math.log(fa)/Math.LN10));fa=Math.round(fa*Na)/Na}za*=fa;Bb.style.width=za/X*U+"px";Bb.innerHTML=za+"\x26nbsp;"+W}var ib=a.createCommonjsModule(function(Bb){function U(fa){return!X(fa)}function X(fa){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&
Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?
"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Na=new Blob([""],{type:"text/javascript"});Na=URL.createObjectURL(Na);try{var ab=new Worker(Na);var mb=!0}catch(Mb){mb=!1}return ab&&ab.terminate(),URL.revokeObjectURL(Na),mb}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Na=document.createElement("canvas");Na.width=Na.height=1;var ab=Na.getContext("2d");return ab?(ab=ab.getImageData(0,0,1,1))&&ab.width===
Na.width:!1}()?(void 0===W[za=fa&&fa.failIfMajorPerformanceCaveat]&&(W[za]=function(Na){var ab=document.createElement("canvas"),mb=Object.create(U.webGLContextAttributes);Na=(mb.failIfMajorPerformanceCaveat=Na,ab.probablySupportsContext?ab.probablySupportsContext("webgl",mb)||ab.probablySupportsContext("experimental-webgl",mb):ab.supportsContext?ab.supportsContext("webgl",mb)||ab.supportsContext("experimental-webgl",mb):ab.getContext("webgl",mb)||ab.getContext("experimental-webgl",mb));if(!Na)return!1;
ab=Na.createShader(Na.VERTEX_SHADER);return!(!ab||Na.isContextLost())&&(Na.shaderSource(ab,"void main() {}"),Na.compileShader(ab),!0===Na.getShaderParameter(ab,Na.COMPILE_STATUS))}(za)),W[za]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var za}
Bb.exports?Bb.exports=U:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=U,window.mapboxgl.notSupportedReason=X);var W={};U.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Pa={create:function(Bb,U,X){Bb=a.window.document.createElement(Bb);return void 0!==U&&(Bb.className=U),X&&X.appendChild(Bb),Bb},createNS:function(Bb,U){return a.window.document.createElementNS(Bb,U)}},sb=a.window.document.documentElement.style,tb,Aa=f(["userSelect","MozUserSelect","WebkitUserSelect",
"msUserSelect"]);Pa.disableDrag=function(){sb&&Aa&&(tb=sb[Aa],sb[Aa]="none")};Pa.enableDrag=function(){sb&&Aa&&(sb[Aa]=tb)};var Ka=f(["transform","WebkitTransform"]);Pa.setTransform=function(Bb,U){Bb.style[Ka]=U};var Qa=!1;try{var Xa=Object.defineProperty({},"passive",{get:function(){Qa=!0}});a.window.addEventListener("test",Xa,Xa);a.window.removeEventListener("test",Xa,Xa)}catch(Bb){Qa=!1}Pa.addEventListener=function(Bb,U,X,W){void 0===W&&(W={});Bb.addEventListener(U,X,"passive"in W&&Qa?W:W.capture)};
Pa.removeEventListener=function(Bb,U,X,W){void 0===W&&(W={});Bb.removeEventListener(U,X,"passive"in W&&Qa?W:W.capture)};var pb=function(Bb){Bb.preventDefault();Bb.stopPropagation();a.window.removeEventListener("click",pb,!0)};Pa.suppressClick=function(){a.window.addEventListener("click",pb,!0);a.window.setTimeout(function(){a.window.removeEventListener("click",pb,!0)},0)};Pa.mousePos=function(Bb,U){var X=Bb.getBoundingClientRect();return new a.Point(U.clientX-X.left-Bb.clientLeft,U.clientY-X.top-
Bb.clientTop)};Pa.touchPos=function(Bb,U){for(var X=Bb.getBoundingClientRect(),W=[],fa=0;fa<U.length;fa++)W.push(new a.Point(U[fa].clientX-X.left-Bb.clientLeft,U[fa].clientY-X.top-Bb.clientTop));return W};Pa.mouseButton=function(Bb){return void 0!==a.window.InstallTrigger&&2===Bb.button&&Bb.ctrlKey&&0<=a.window.navigator.platform.toUpperCase().indexOf("MAC")?0:Bb.button};Pa.remove=function(Bb){Bb.parentNode&&Bb.parentNode.removeChild(Bb)};var db=function(Bb){function U(){Bb.call(this);this.images=
{};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new a.RGBAImage({width:1,height:1});this.dirty=!0}return Bb&&(U.__proto__=Bb),(U.prototype=Object.create(Bb&&Bb.prototype)).constructor=U,U.prototype.isLoaded=function(){return this.loaded},U.prototype.setLoaded=function(X){if(this.loaded!==X&&(this.loaded=X,X)){X=0;for(var W=this.requestors;X<W.length;X+=1){var fa=W[X];this._notify(fa.ids,fa.callback)}this.requestors=[]}},
U.prototype.getImage=function(X){return this.images[X]},U.prototype.addImage=function(X,W){this._validate(X,W)&&(this.images[X]=W)},U.prototype._validate=function(X,W){var fa=!0;return this._validateStretch(W.stretchX,W.data&&W.data.width)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "stretchX" value'))),fa=!1),this._validateStretch(W.stretchY,W.data&&W.data.height)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "stretchY" value'))),fa=!1),this._validateContent(W.content,
W)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "content" value'))),fa=!1),fa},U.prototype._validateStretch=function(X,W){if(!X)return!0;for(var fa=0,za=0;za<X.length;za+=1){var Na=X[za];if(Na[0]<fa||Na[1]<Na[0]||W<Na[1])return!1;fa=Na[1]}return!0},U.prototype._validateContent=function(X,W){return!(X&&(4!==X.length||0>X[0]||W.data.width<X[0]||0>X[1]||W.data.height<X[1]||0>X[2]||W.data.width<X[2]||0>X[3]||W.data.height<X[3]||X[2]<X[0]||X[3]<X[1]))},U.prototype.updateImage=function(X,
W){W.version=this.images[X].version+1;this.images[X]=W;this.updatedImages[X]=!0},U.prototype.removeImage=function(X){var W=this.images[X];delete this.images[X];delete this.patterns[X];W.userImage&&W.userImage.onRemove&&W.userImage.onRemove()},U.prototype.listImages=function(){return Object.keys(this.images)},U.prototype.getImages=function(X,W){var fa=!0;if(!this.isLoaded())for(var za=0;za<X.length;za+=1)this.images[X[za]]||(fa=!1);this.isLoaded()||fa?this._notify(X,W):this.requestors.push({ids:X,
callback:W})},U.prototype._notify=function(X,W){for(var fa={},za=0;za<X.length;za+=1){var Na=X[za];this.images[Na]||this.fire(new a.Event("styleimagemissing",{id:Na}));var ab=this.images[Na];ab?fa[Na]={data:ab.data.clone(),pixelRatio:ab.pixelRatio,sdf:ab.sdf,version:ab.version,stretchX:ab.stretchX,stretchY:ab.stretchY,content:ab.content,hasRenderCallback:!(!ab.userImage||!ab.userImage.render)}:a.warnOnce('Image "'+Na+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}W(null,
fa)},U.prototype.getPixelSize=function(){var X=this.atlasImage;return{width:X.width,height:X.height}},U.prototype.getPattern=function(X){var W=this.patterns[X],fa=this.getImage(X);if(!fa)return null;if(W&&W.position.version===fa.version)return W.position;W?W.position.version=fa.version:(W={w:fa.data.width+2,h:fa.data.height+2,x:0,y:0},fa=new a.ImagePosition(W,fa),this.patterns[X]={bin:W,position:fa});return this._updatePatternAtlas(),this.patterns[X].position},U.prototype.bind=function(X){var W=X.gl;
this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(X,this.atlasImage,W.RGBA);this.atlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE)},U.prototype._updatePatternAtlas=function(){var X=[];for(W in this.patterns)X.push(this.patterns[W].bin);X=a.potpack(X);var W=X.w;var fa=X.h;X=this.atlasImage;for(var za in X.resize({width:W||1,height:fa||1}),this.patterns){fa=this.patterns[za].bin;W=fa.x+1;fa=fa.y+1;var Na=this.images[za].data,ab=Na.width,
mb=Na.height;a.RGBAImage.copy(Na,X,{x:0,y:0},{x:W,y:fa},{width:ab,height:mb});a.RGBAImage.copy(Na,X,{x:0,y:mb-1},{x:W,y:fa-1},{width:ab,height:1});a.RGBAImage.copy(Na,X,{x:0,y:0},{x:W,y:fa+mb},{width:ab,height:1});a.RGBAImage.copy(Na,X,{x:ab-1,y:0},{x:W-1,y:fa},{width:1,height:mb});a.RGBAImage.copy(Na,X,{x:0,y:0},{x:W+ab,y:fa},{width:1,height:mb})}this.dirty=!0},U.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},U.prototype.dispatchRenderCallbacks=function(X){for(var W=0;W<X.length;W+=
1){var fa=X[W];if(!this.callbackDispatchedThisFrame[fa]){this.callbackDispatchedThisFrame[fa]=!0;var za=this.images[fa],Na=za,ab=Na.userImage;ab&&ab.render&&ab.render()&&(Na.data.replace(new Uint8Array(ab.data.buffer)),!0)&&this.updateImage(fa,za)}}},U}(a.Evented);d.prototype.draw=function(Bb){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(Bb,this.buffer,this.middle);Bb=this.ctx.getImageData(0,0,this.size,this.size);for(var U=new Uint8ClampedArray(this.size*this.size),X=0;X<this.size*
this.size;X++){var W=Bb.data[4*X+3]/255;this.gridOuter[X]=1===W?0:0===W?1E20:Math.pow(Math.max(0,.5-W),2);this.gridInner[X]=1===W?1E20:0===W?0:Math.pow(Math.max(0,W-.5),2)}l(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);l(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(X=0;X<this.size*this.size;X++)U[X]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[X]-this.gridInner[X])/this.radius+this.cutoff))));return U};d.default=d;var Ia=function(Bb,U){this.requestManager=
Bb;this.localIdeographFontFamily=U;this.entries={}};Ia.prototype.setURL=function(Bb){this.url=Bb};Ia.prototype.getGlyphs=function(Bb,U){var X=this,W=[],fa;for(fa in Bb)for(var za=0,Na=Bb[fa];za<Na.length;za+=1)W.push({stack:fa,id:Na[za]});a.asyncAll(W,function(ab,mb){var Mb=ab.stack,Ub=ab.id,Zb=X.entries[Mb];Zb||(Zb=X.entries[Mb]={glyphs:{},requests:{},ranges:{}});ab=Zb.glyphs[Ub];if(void 0===ab){if(ab=X._tinySDF(Zb,Mb,Ub))return Zb.glyphs[Ub]=ab,void mb(null,{stack:Mb,id:Ub,glyph:ab});var Jc=Math.floor(Ub/
256);if(65535<256*Jc)mb(Error("glyphs \x3e 65535 not supported"));else if(Zb.ranges[Jc])mb(null,{stack:Mb,id:Ub,glyph:ab});else{var Ic=Zb.requests[Jc];Ic||(Ic=Zb.requests[Jc]=[],Ia.loadGlyphRange(Mb,Jc,X.url,X.requestManager,function(yc,Hc){if(Hc){for(var Dc in Hc)X._doesCharSupportLocalGlyph(+Dc)||(Zb.glyphs[+Dc]=Hc[+Dc]);Zb.ranges[Jc]=!0}Dc=0;for(var Xb=Ic;Dc<Xb.length;Dc+=1)(0,Xb[Dc])(yc,Hc);delete Zb.requests[Jc]}));Ic.push(function(yc,Hc){yc?mb(yc):Hc&&mb(null,{stack:Mb,id:Ub,glyph:Hc[Ub]||null})})}}else mb(null,
{stack:Mb,id:Ub,glyph:ab})},function(ab,mb){if(ab)U(ab);else if(mb){ab={};for(var Mb=0;Mb<mb.length;Mb+=1){var Ub=mb[Mb],Zb=Ub.stack,Jc=Ub.id;Ub=Ub.glyph;(ab[Zb]||(ab[Zb]={}))[Jc]=Ub&&{id:Ub.id,bitmap:Ub.bitmap.clone(),metrics:Ub.metrics}}U(null,ab)}})};Ia.prototype._doesCharSupportLocalGlyph=function(Bb){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](Bb)||a.isChar["Hangul Syllables"](Bb)||a.isChar.Hiragana(Bb)||a.isChar.Katakana(Bb))};Ia.prototype._tinySDF=function(Bb,
U,X){var W=this.localIdeographFontFamily;if(W&&this._doesCharSupportLocalGlyph(X)){var fa=Bb.tinySDF;fa||(fa="400",/bold/i.test(U)?fa="900":/medium/i.test(U)?fa="500":/light/i.test(U)&&(fa="200"),fa=Bb.tinySDF=new Ia.TinySDF(24,3,8,.25,W,fa));return{id:X,bitmap:new a.AlphaImage({width:30,height:30},fa.draw(String.fromCharCode(X))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};Ia.loadGlyphRange=function(Bb,U,X,W,fa){U*=256;var za=U+255;Bb=W.transformRequest(W.normalizeGlyphsURL(X).replace("{fontstack}",
Bb).replace("{range}",U+"-"+za),a.ResourceType.Glyphs);a.getArrayBuffer(Bb,function(Na,ab){if(Na)fa(Na);else if(ab){Na={};var mb=0;for(ab=a.parseGlyphPBF(ab);mb<ab.length;mb+=1){var Mb=ab[mb];Na[Mb.id]=Mb}fa(null,Na)}})};Ia.TinySDF=d;var Ua=function(){this.specification=a.styleSpec.light.position};Ua.prototype.possiblyEvaluate=function(Bb,U){return a.sphericalToCartesian(Bb.expression.evaluate(U))};Ua.prototype.interpolate=function(Bb,U,X){return{x:a.number(Bb.x,U.x,X),y:a.number(Bb.y,U.y,X),z:a.number(Bb.z,
U.z,X)}};var $a=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Ua,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),xa=function(Bb){function U(X){Bb.call(this);this._transitionable=new a.Transitionable($a);this.setLight(X);this._transitioning=this._transitionable.untransitioned()}return Bb&&(U.__proto__=Bb),(U.prototype=Object.create(Bb&&Bb.prototype)).constructor=U,U.prototype.getLight=
function(){return this._transitionable.serialize()},U.prototype.setLight=function(X,W){if(void 0===W&&(W={}),!this._validate(a.validateLight,X,W))for(var fa in X)W=X[fa],a.endsWith(fa,"-transition")?this._transitionable.setTransition(fa.slice(0,-11),W):this._transitionable.setValue(fa,W)},U.prototype.updateTransitions=function(X){this._transitioning=this._transitionable.transitioned(X,this._transitioning)},U.prototype.hasTransition=function(){return this._transitioning.hasTransition()},U.prototype.recalculate=
function(X){this.properties=this._transitioning.possiblyEvaluate(X)},U.prototype._validate=function(X,W,fa){return(!fa||!1!==fa.validate)&&a.emitValidationErrors(this,X.call(a.validateStyle,a.extend({value:W,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},U}(a.Evented),Ga=function(Bb,U){this.width=Bb;this.height=U;this.nextRow=0;this.data=new Uint8Array(this.width*this.height);this.dashEntry={}};Ga.prototype.getDash=function(Bb,U){var X=Bb.join(",")+String(U);return this.dashEntry[X]||(this.dashEntry[X]=
this.addDash(Bb,U)),this.dashEntry[X]};Ga.prototype.getDashRanges=function(Bb,U,X){U=[];var W=!0;U.push({left:1==Bb.length%2?-Bb[Bb.length-1]*X:0,right:Bb[0]*X,isDash:W,zeroLength:0===Bb[0]});for(var fa=Bb[0],za=1;za<Bb.length;za++){var Na=Bb[za];U.push({left:fa*X,right:(fa+=Na)*X,isDash:W=!W,zeroLength:0===Na})}return U};Ga.prototype.addRoundDash=function(Bb,U,X){U/=2;for(var W=-X;W<=X;W++)for(var fa=this.width*(this.nextRow+X+W),za=0,Na=Bb[za],ab=0;ab<this.width;ab++){1<ab/Na.right&&(Na=Bb[++za]);
var mb=Math.min(Math.abs(ab-Na.left),Math.abs(ab-Na.right)),Mb=W/X*(U+1);Na.isDash?(Mb=U-Math.abs(Mb),mb=Math.sqrt(mb*mb+Mb*Mb)):mb=U-Math.sqrt(mb*mb+Mb*Mb);this.data[fa+ab]=Math.max(0,Math.min(255,mb+128))}};Ga.prototype.addRegularDash=function(Bb){for(var U=Bb.length-1;0<=U;--U){var X=Bb[U],W=Bb[U+1];X.zeroLength?Bb.splice(U,1):W&&W.isDash===X.isDash&&(W.left=X.left,Bb.splice(U,1))}U=Bb[0];X=Bb[Bb.length-1];U.isDash===X.isDash&&(U.left=X.left-this.width,X.right=U.right+this.width);U=this.width*
this.nextRow;X=0;W=Bb[X];for(var fa=0;fa<this.width;fa++){1<fa/W.right&&(W=Bb[++X]);var za=Math.min(Math.abs(fa-W.left),Math.abs(fa-W.right));this.data[U+fa]=Math.max(0,Math.min(255,(W.isDash?za:-za)+128))}};Ga.prototype.addDash=function(Bb,U){var X=U?7:0,W=2*X+1;if(this.nextRow+W>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var fa=0,za=0;za<Bb.length;za++)fa+=Bb[za];0!==fa&&(za=this.width/fa,Bb=this.getDashRanges(Bb,this.width,za),U?this.addRoundDash(Bb,za,X):this.addRegularDash(Bb));
U={y:(this.nextRow+X+.5)/this.height,height:2*X/this.height,width:fa};return this.nextRow+=W,this.dirty=!0,U};Ga.prototype.bind=function(Bb){Bb=Bb.gl;this.texture?(Bb.bindTexture(Bb.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Bb.texSubImage2D(Bb.TEXTURE_2D,0,0,0,this.width,this.height,Bb.ALPHA,Bb.UNSIGNED_BYTE,this.data))):(this.texture=Bb.createTexture(),Bb.bindTexture(Bb.TEXTURE_2D,this.texture),Bb.texParameteri(Bb.TEXTURE_2D,Bb.TEXTURE_WRAP_S,Bb.REPEAT),Bb.texParameteri(Bb.TEXTURE_2D,Bb.TEXTURE_WRAP_T,
Bb.REPEAT),Bb.texParameteri(Bb.TEXTURE_2D,Bb.TEXTURE_MIN_FILTER,Bb.LINEAR),Bb.texParameteri(Bb.TEXTURE_2D,Bb.TEXTURE_MAG_FILTER,Bb.LINEAR),Bb.texImage2D(Bb.TEXTURE_2D,0,Bb.ALPHA,this.width,this.height,0,Bb.ALPHA,Bb.UNSIGNED_BYTE,this.data))};var Va=function W(U,X){this.workerPool=U;this.actors=[];this.currentActor=0;this.id=a.uniqueId();U=this.workerPool.acquire(this.id);for(var fa=0;fa<U.length;fa++){var za=new W.Actor(U[fa],X,this.id);za.name="Worker "+fa;this.actors.push(za)}};Va.prototype.broadcast=
function(U,X,W){a.asyncAll(this.actors,function(fa,za){fa.send(U,X,za)},W=W||function(){})};Va.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]};Va.prototype.remove=function(){this.actors.forEach(function(U){U.remove()});this.actors=[];this.workerPool.release(this.id)};Va.Actor=a.Actor;var gb=function(U,X,W){this.bounds=a.LngLatBounds.convert(this.validateBounds(U));this.minzoom=X||0;this.maxzoom=W||24};gb.prototype.validateBounds=
function(U){return Array.isArray(U)&&4===U.length?[Math.max(-180,U[0]),Math.max(-90,U[1]),Math.min(180,U[2]),Math.min(90,U[3])]:[-180,-90,180,90]};gb.prototype.contains=function(U){var X=Math.pow(2,U.z),W=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*X),fa=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*X),za=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*X);X=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*X);return U.x>=W&&U.x<za&&U.y>=fa&&U.y<X};var Ma=function(U){function X(W,
fa,za,Na){if(U.call(this),this.id=W,this.dispatcher=za,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(fa,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},fa),this._collectResourceTiming=fa.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Na)}return U&&(X.__proto__=U),
(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(){var W=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(fa,za){W._tileJSONRequest=null;W._loaded=!0;fa?W.fire(new a.ErrorEvent(fa)):za&&(a.extend(W,za),za.bounds&&(W.tileBounds=new gb(za.bounds,W.minzoom,W.maxzoom)),a.postTurnstileEvent(za.tiles,W.map._requestManager._customAccessToken),a.postMapLoadEvent(za.tiles,
W.map._getMapId(),W.map._requestManager._skuToken,W.map._requestManager._customAccessToken),W.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),W.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},X.prototype.loaded=function(){return this._loaded},X.prototype.hasTile=function(W){return!this.tileBounds||this.tileBounds.contains(W.canonical)},X.prototype.onAdd=function(W){this.map=W;this.load()},X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),
this._tileJSONRequest=null)},X.prototype.serialize=function(){return a.extend({},this._options)},X.prototype.loadTile=function(W,fa){function za(ab,mb){return delete W.request,W.aborted?fa(null):ab&&404!==ab.status?fa(ab):(mb&&mb.resourceTiming&&(W.resourceTiming=mb.resourceTiming),this.map._refreshExpiredTiles&&mb&&W.setExpiryData(mb),W.loadVectorData(mb,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),fa(null),void(W.reloadCallback&&(this.loadTile(W,W.reloadCallback),W.reloadCallback=
null)))}var Na=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme));Na={request:this.map._requestManager.transformRequest(Na,a.ResourceType.Tile),uid:W.uid,tileID:W.tileID,zoom:W.tileID.overscaledZ,tileSize:this.tileSize*W.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Na.request.collectResourceTiming=this._collectResourceTiming;W.actor&&"expired"!==
W.state?"loading"===W.state?W.reloadCallback=fa:W.request=W.actor.send("reloadTile",Na,za.bind(this)):(W.actor=this.dispatcher.getActor(),W.request=W.actor.send("loadTile",Na,za.bind(this)))},X.prototype.abortTile=function(W){W.request&&(W.request.cancel(),delete W.request);W.actor&&W.actor.send("abortTile",{uid:W.uid,type:this.type,source:this.id},void 0)},X.prototype.unloadTile=function(W){W.unloadVectorData();W.actor&&W.actor.send("removeTile",{uid:W.uid,type:this.type,source:this.id},void 0)},
X.prototype.hasTransition=function(){return!1},X}(a.Evented),cb=function(U){function X(W,fa,za,Na){U.call(this);this.id=W;this.dispatcher=za;this.setEventedParent(Na);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=a.extend({type:"raster"},fa);a.extend(this,a.pick(fa,["url","scheme","tileSize"]))}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(){var W=
this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(fa,za){W._tileJSONRequest=null;W._loaded=!0;fa?W.fire(new a.ErrorEvent(fa)):za&&(a.extend(W,za),za.bounds&&(W.tileBounds=new gb(za.bounds,W.minzoom,W.maxzoom)),a.postTurnstileEvent(za.tiles),a.postMapLoadEvent(za.tiles,W.map._getMapId(),W.map._requestManager._skuToken),W.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),W.fire(new a.Event("data",
{dataType:"source",sourceDataType:"content"})))})},X.prototype.loaded=function(){return this._loaded},X.prototype.onAdd=function(W){this.map=W;this.load()},X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},X.prototype.serialize=function(){return a.extend({},this._options)},X.prototype.hasTile=function(W){return!this.tileBounds||this.tileBounds.contains(W.canonical)},X.prototype.loadTile=function(W,fa){var za=this,Na=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,
this.scheme),this.tileSize);W.request=a.getImage(this.map._requestManager.transformRequest(Na,a.ResourceType.Tile),function(ab,mb){if(delete W.request,W.aborted)W.state="unloaded",fa(null);else if(ab)W.state="errored",fa(ab);else if(mb){za.map._refreshExpiredTiles&&W.setExpiryData(mb);delete mb.cacheControl;delete mb.expires;ab=za.map.painter.context;var Mb=ab.gl;W.texture=za.map.painter.getTileTexture(mb.width);W.texture?W.texture.update(mb,{useMipmap:!0}):(W.texture=new a.Texture(ab,mb,Mb.RGBA,
{useMipmap:!0}),W.texture.bind(Mb.LINEAR,Mb.CLAMP_TO_EDGE,Mb.LINEAR_MIPMAP_NEAREST),ab.extTextureFilterAnisotropic&&Mb.texParameterf(Mb.TEXTURE_2D,ab.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ab.extTextureFilterAnisotropicMax));W.state="loaded";a.cacheEntryPossiblyAdded(za.dispatcher);fa(null)}})},X.prototype.abortTile=function(W,fa){W.request&&(W.request.cancel(),delete W.request);fa()},X.prototype.unloadTile=function(W,fa){W.texture&&this.map.painter.saveTileTexture(W.texture);fa()},
X.prototype.hasTransition=function(){return!1},X}(a.Evented),Sa=function(U){function X(W,fa,za,Na){U.call(this,W,fa,za,Na);this.type="raster-dem";this.maxzoom=22;this._options=a.extend({type:"raster-dem"},fa);this.encoding=fa.encoding||"mapbox"}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},X.prototype.loadTile=
function(W,fa){function za(ab,mb){ab&&(W.state="errored",fa(ab));mb&&(W.dem=mb,W.needsHillshadePrepare=!0,W.state="loaded",fa(null))}var Na=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);W.request=a.getImage(this.map._requestManager.transformRequest(Na,a.ResourceType.Tile),function(ab,mb){(delete W.request,W.aborted)?(W.state="unloaded",fa(null)):ab?(W.state="errored",fa(ab)):mb&&(this.map._refreshExpiredTiles&&W.setExpiryData(mb),delete mb.cacheControl,
delete mb.expires,ab=a.window.ImageBitmap&&mb instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?mb:a.browser.getImageData(mb,1),ab={uid:W.uid,coord:W.tileID,source:this.id,rawImageData:ab,encoding:this.encoding},W.actor&&"expired"!==W.state||(W.actor=this.dispatcher.getActor(),W.actor.send("loadDEMTile",ab,za.bind(this))))}.bind(this));W.neighboringTiles=this._getNeighboringTiles(W.tileID)},X.prototype._getNeighboringTiles=function(W){var fa=W.canonical,za=Math.pow(2,fa.z),Na=(fa.x-1+
za)%za,ab=0===fa.x?W.wrap-1:W.wrap,mb=(fa.x+1+za)%za,Mb=fa.x+1===za?W.wrap+1:W.wrap,Ub={};return Ub[(new a.OverscaledTileID(W.overscaledZ,ab,fa.z,Na,fa.y)).key]={backfilled:!1},Ub[(new a.OverscaledTileID(W.overscaledZ,Mb,fa.z,mb,fa.y)).key]={backfilled:!1},0<fa.y&&(Ub[(new a.OverscaledTileID(W.overscaledZ,ab,fa.z,Na,fa.y-1)).key]={backfilled:!1},Ub[(new a.OverscaledTileID(W.overscaledZ,W.wrap,fa.z,fa.x,fa.y-1)).key]={backfilled:!1},Ub[(new a.OverscaledTileID(W.overscaledZ,Mb,fa.z,mb,fa.y-1)).key]=
{backfilled:!1}),fa.y+1<za&&(Ub[(new a.OverscaledTileID(W.overscaledZ,ab,fa.z,Na,fa.y+1)).key]={backfilled:!1},Ub[(new a.OverscaledTileID(W.overscaledZ,W.wrap,fa.z,fa.x,fa.y+1)).key]={backfilled:!1},Ub[(new a.OverscaledTileID(W.overscaledZ,Mb,fa.z,mb,fa.y+1)).key]={backfilled:!1}),Ub},X.prototype.unloadTile=function(W){W.demTexture&&this.map.painter.saveTileTexture(W.demTexture);W.fbo&&(W.fbo.destroy(),delete W.fbo);W.dem&&delete W.dem;delete W.neighboringTiles;W.state="unloaded";W.actor&&W.actor.send("removeDEMTile",
{uid:W.uid,source:this.id})},X}(cb),lb=function(U){function X(W,fa,za,Na){U.call(this);this.id=W;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._loaded=this._removed=!1;this.actor=za.getActor();this.setEventedParent(Na);this._data=fa.data;this._options=a.extend({},fa);this._collectResourceTiming=fa.collectResourceTiming;this._resourceTiming=[];void 0!==fa.maxzoom&&(this.maxzoom=fa.maxzoom);fa.type&&(this.type=fa.type);fa.attribution&&
(this.attribution=fa.attribution);this.promoteId=fa.promoteId;W=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:fa.cluster||!1,geojsonVtOptions:{buffer:(void 0!==fa.buffer?fa.buffer:128)*W,tolerance:(void 0!==fa.tolerance?fa.tolerance:.375)*W,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:fa.lineMetrics||!1,generateId:fa.generateId||!1},superclusterOptions:{maxZoom:void 0!==fa.clusterMaxZoom?Math.min(fa.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:a.EXTENT,radius:(fa.clusterRadius||
50)*W,log:!1,generateId:fa.generateId||!1},clusterProperties:fa.clusterProperties},fa.workerOptions)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(){var W=this;this.fire(new a.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(fa){fa?W.fire(new a.ErrorEvent(fa)):(fa={dataType:"source",sourceDataType:"metadata"},W._collectResourceTiming&&W._resourceTiming&&0<W._resourceTiming.length&&(fa.resourceTiming=W._resourceTiming,
W._resourceTiming=[]),W.fire(new a.Event("data",fa)))})},X.prototype.onAdd=function(W){this.map=W;this.load()},X.prototype.setData=function(W){var fa=this;return this._data=W,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(za){za?fa.fire(new a.ErrorEvent(za)):(za={dataType:"source",sourceDataType:"content"},fa._collectResourceTiming&&fa._resourceTiming&&0<fa._resourceTiming.length&&(za.resourceTiming=fa._resourceTiming,fa._resourceTiming=[]),fa.fire(new a.Event("data",
za)))}),this},X.prototype.getClusterExpansionZoom=function(W,fa){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:W,source:this.id},fa),this},X.prototype.getClusterChildren=function(W,fa){return this.actor.send("geojson.getClusterChildren",{clusterId:W,source:this.id},fa),this},X.prototype.getClusterLeaves=function(W,fa,za,Na){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:W,limit:fa,offset:za},Na),this},X.prototype._updateWorkerData=function(W){var fa=
this;this._loaded=!1;var za=a.extend({},this.workerOptions),Na=this._data;"string"==typeof Na?(za.request=this.map._requestManager.transformRequest(a.browser.resolveURL(Na),a.ResourceType.Source),za.request.collectResourceTiming=this._collectResourceTiming):za.data=JSON.stringify(Na);this.actor.send(this.type+".loadData",za,function(ab,mb){fa._removed||mb&&mb.abandoned||(fa._loaded=!0,mb&&mb.resourceTiming&&mb.resourceTiming[fa.id]&&(fa._resourceTiming=mb.resourceTiming[fa.id].slice(0)),fa.actor.send(fa.type+
".coalesce",{source:za.source},null),W(ab))})},X.prototype.loaded=function(){return this._loaded},X.prototype.loadTile=function(W,fa){var za=this,Na=W.actor?"reloadTile":"loadTile";W.actor=this.actor;W.request=this.actor.send(Na,{type:this.type,uid:W.uid,tileID:W.tileID,zoom:W.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ab,mb){return delete W.request,
W.unloadVectorData(),W.aborted?fa(null):ab?fa(ab):(W.loadVectorData(mb,za.map.painter,"reloadTile"===Na),fa(null))})},X.prototype.abortTile=function(W){W.request&&(W.request.cancel(),delete W.request);W.aborted=!0},X.prototype.unloadTile=function(W){W.unloadVectorData();this.actor.send("removeTile",{uid:W.uid,type:this.type,source:this.id})},X.prototype.onRemove=function(){this._removed=!0;this.actor.send("removeSource",{type:this.type,source:this.id})},X.prototype.serialize=function(){return a.extend({},
this._options,{type:this.type,data:this._data})},X.prototype.hasTransition=function(){return!1},X}(a.Evented),rb=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),yb=function(U){function X(W,fa,za,Na){U.call(this);this.id=W;this.dispatcher=za;this.coordinates=fa.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles={};this._loaded=!1;this.setEventedParent(Na);this.options=fa}return U&&(X.__proto__=U),(X.prototype=
Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(W,fa){var za=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this.url=this.options.url;a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(Na,ab){za._loaded=!0;Na?za.fire(new a.ErrorEvent(Na)):ab&&(za.image=ab,W&&(za.coordinates=W),fa&&fa(),za._finishLoading())})},X.prototype.loaded=function(){return this._loaded},X.prototype.updateImage=function(W){var fa=
this;return this.image&&W.url?(this.options.url=W.url,this.load(W.coordinates,function(){fa.texture=null}),this):this},X.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},X.prototype.onAdd=function(W){this.map=W;this.load()},X.prototype.setCoordinates=function(W){var fa=this;this.coordinates=W;W=W.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(za){for(var Na=1/0,ab=1/0,mb=-1/
0,Mb=-1/0,Ub=0;Ub<za.length;Ub+=1){var Zb=za[Ub];Na=Math.min(Na,Zb.x);ab=Math.min(ab,Zb.y);mb=Math.max(mb,Zb.x);Mb=Math.max(Mb,Zb.y)}za=Math.max(0,Math.floor(-Math.log(Math.max(mb-Na,Mb-ab))/Math.LN2));Ub=Math.pow(2,za);return new a.CanonicalTileID(za,Math.floor((Na+mb)/2*Ub),Math.floor((ab+Mb)/2*Ub))}(W);this.minzoom=this.maxzoom=this.tileID.z;W=W.map(function(za){return fa.tileID.getTilePoint(za)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(W[0].x,
W[0].y,0,0),this._boundsArray.emplaceBack(W[1].x,W[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(W[3].x,W[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(W[2].x,W[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},X.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var W=this.map.painter.context,fa=W.gl,za;for(za in this.boundsBuffer||(this.boundsBuffer=
W.createVertexBuffer(this._boundsArray,rb.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(W,this.image,fa.RGBA),this.texture.bind(fa.LINEAR,fa.CLAMP_TO_EDGE)),this.tiles)W=this.tiles[za],"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture)}},X.prototype.loadTile=function(W,fa){this.tileID&&this.tileID.equals(W.tileID.canonical)?(this.tiles[String(W.tileID.wrap)]=W,W.buckets={},fa(null)):(W.state="errored",
fa(null))},X.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},X.prototype.hasTransition=function(){return!1},X}(a.Evented),Hb=function(U){function X(W,fa,za,Na){U.call(this,W,fa,za,Na);this.roundZoom=!0;this.type="video";this.options=fa}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(){var W=this;this._loaded=!1;var fa=this.options;this.urls=[];var za=0;for(fa=fa.urls;za<fa.length;za+=
1)this.urls.push(this.map._requestManager.transformRequest(fa[za],a.ResourceType.Source).url);a.getVideo(this.urls,function(Na,ab){W._loaded=!0;Na?W.fire(new a.ErrorEvent(Na)):ab&&(W.video=ab,W.video.loop=!0,W.video.addEventListener("playing",function(){W.map.triggerRepaint()}),W.map&&W.video.play(),W._finishLoading())})},X.prototype.pause=function(){this.video&&this.video.pause()},X.prototype.play=function(){this.video&&this.video.play()},X.prototype.seek=function(W){if(this.video){var fa=this.video.seekable;
W<fa.start(0)||W>fa.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+fa.start(0)+" and "+fa.end(0)+"-second mark."))):this.video.currentTime=W}},X.prototype.getVideo=function(){return this.video},X.prototype.onAdd=function(W){this.map||(this.map=W,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},X.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var W=
this.map.painter.context,fa=W.gl,za;for(za in this.boundsBuffer||(this.boundsBuffer=W.createVertexBuffer(this._boundsArray,rb.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(fa.LINEAR,fa.CLAMP_TO_EDGE),fa.texSubImage2D(fa.TEXTURE_2D,0,0,0,fa.RGBA,fa.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(W,this.video,fa.RGBA),this.texture.bind(fa.LINEAR,fa.CLAMP_TO_EDGE)),this.tiles)W=this.tiles[za],"loaded"!==
W.state&&(W.state="loaded",W.texture=this.texture)}},X.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},X.prototype.hasTransition=function(){return this.video&&!this.video.paused},X}(yb),Vb=function(U){function X(W,fa,za,Na){U.call(this,W,fa,za,Na);fa.coordinates?Array.isArray(fa.coordinates)&&4===fa.coordinates.length&&!fa.coordinates.some(function(ab){return!Array.isArray(ab)||2!==ab.length||ab.some(function(mb){return"number"!=typeof mb})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+
W,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+W,null,'missing required property "coordinates"')));fa.animate&&"boolean"!=typeof fa.animate&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+W,null,'optional "animate" property must be a boolean value')));fa.canvas?"string"==typeof fa.canvas||fa.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+
W,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+W,null,'missing required property "canvas"')));this.options=fa;this.animate=void 0===fa.animate||fa.animate}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(){this._loaded=!0;this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?
this.options.canvas:a.window.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},X.prototype.getCanvas=function(){return this.canvas},X.prototype.onAdd=function(W){this.map=
W;this.load();this.canvas&&this.animate&&this.play()},X.prototype.onRemove=function(){this.pause()},X.prototype.prepare=function(){var W=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,W=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,W=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var fa=this.map.painter.context,za=fa.gl,Na;for(Na in this.boundsBuffer||(this.boundsBuffer=fa.createVertexBuffer(this._boundsArray,rb.members)),this.boundsSegments||
(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(W||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(fa,this.canvas,za.RGBA,{premultiply:!0}),this.tiles)W=this.tiles[Na],"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture)}},X.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},X.prototype.hasTransition=function(){return this._playing},X.prototype._hasInvalidDimensions=function(){for(var W=
0,fa=[this.canvas.width,this.canvas.height];W<fa.length;W+=1){var za=fa[W];if(isNaN(za)||0>=za)return!0}return!1},X}(yb),lc={vector:Ma,raster:cb,"raster-dem":Sa,geojson:lb,video:Hb,image:yb,canvas:Vb},Ac=function(U,X){this.max=U;this.onRemove=X;this.reset()};Ac.prototype.reset=function(){for(var U in this.data)for(var X=0,W=this.data[U];X<W.length;X+=1){var fa=W[X];fa.timeout&&clearTimeout(fa.timeout);this.onRemove(fa.value)}return this.data={},this.order=[],this};Ac.prototype.add=function(U,X,W){var fa=
this,za=U.wrapped().key;void 0===this.data[za]&&(this.data[za]=[]);var Na={value:X,timeout:void 0};(void 0!==W&&(Na.timeout=setTimeout(function(){fa.remove(U,Na)},W)),this.data[za].push(Na),this.order.push(za),this.order.length>this.max)&&(X=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(X);return this};Ac.prototype.has=function(U){return U.wrapped().key in this.data};Ac.prototype.getAndRemove=function(U){return this.has(U)?this._getAndRemoveByKey(U.wrapped().key):null};Ac.prototype._getAndRemoveByKey=
function(U){var X=this.data[U].shift();return X.timeout&&clearTimeout(X.timeout),0===this.data[U].length&&delete this.data[U],this.order.splice(this.order.indexOf(U),1),X.value};Ac.prototype.getByKey=function(U){return(U=this.data[U])?U[0].value:null};Ac.prototype.get=function(U){return this.has(U)?this.data[U.wrapped().key][0].value:null};Ac.prototype.remove=function(U,X){if(!this.has(U))return this;U=U.wrapped().key;X=void 0===X?0:this.data[U].indexOf(X);var W=this.data[U][X];return this.data[U].splice(X,
1),W.timeout&&clearTimeout(W.timeout),0===this.data[U].length&&delete this.data[U],this.onRemove(W.value),this.order.splice(this.order.indexOf(U),1),this};Ac.prototype.setMaxSize=function(U){for(this.max=U;this.order.length>this.max;)(U=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(U);return this};Ac.prototype.filter=function(U){var X=[];for(Na in this.data)for(var W=0,fa=this.data[Na];W<fa.length;W+=1){var za=fa[W];U(za.value)||X.push(za)}for(U=0;U<X.length;U+=1){var Na=X[U];this.remove(Na.value.tileID,
Na)}};var ad=function(U,X,W){this.context=U;var fa=U.gl;this.buffer=fa.createBuffer();this.dynamicDraw=!!W;this.context.unbindVAO();U.bindElementBuffer.set(this.buffer);fa.bufferData(fa.ELEMENT_ARRAY_BUFFER,X.arrayBuffer,this.dynamicDraw?fa.DYNAMIC_DRAW:fa.STATIC_DRAW);this.dynamicDraw||delete X.arrayBuffer};ad.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};ad.prototype.updateData=function(U){var X=this.context.gl;this.context.unbindVAO();this.bind();X.bufferSubData(X.ELEMENT_ARRAY_BUFFER,
0,U.arrayBuffer)};ad.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Nc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ed=function(U,X,W,fa){this.length=X.length;this.attributes=W;this.itemSize=X.bytesPerElement;this.dynamicDraw=fa;this.context=U;W=U.gl;this.buffer=W.createBuffer();U.bindVertexBuffer.set(this.buffer);W.bufferData(W.ARRAY_BUFFER,X.arrayBuffer,this.dynamicDraw?
W.DYNAMIC_DRAW:W.STATIC_DRAW);this.dynamicDraw||delete X.arrayBuffer};ed.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};ed.prototype.updateData=function(U){var X=this.context.gl;this.bind();X.bufferSubData(X.ARRAY_BUFFER,0,U.arrayBuffer)};ed.prototype.enableAttributes=function(U,X){for(var W=0;W<this.attributes.length;W++){var fa=X.attributes[this.attributes[W].name];void 0!==fa&&U.enableVertexAttribArray(fa)}};ed.prototype.setVertexAttribPointers=function(U,X,W){for(var fa=
0;fa<this.attributes.length;fa++){var za=this.attributes[fa],Na=X.attributes[za.name];void 0!==Na&&U.vertexAttribPointer(Na,za.components,U[Nc[za.type]],!1,this.itemSize,za.offset+this.itemSize*(W||0))}};ed.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Pc=function(U){this.gl=U.gl;this.current=this.default=this.getDefault();this.dirty=!1};Pc.prototype.get=function(){return this.current};Pc.prototype.set=function(U){};Pc.prototype.getDefault=
function(){return this.default};Pc.prototype.setDefault=function(){this.set(this.default)};var sd=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return a.Color.transparent},X.prototype.set=function(W){var fa=this.current;(W.r!==fa.r||W.g!==fa.g||W.b!==fa.b||W.a!==fa.a||this.dirty)&&(this.gl.clearColor(W.r,W.g,W.b,W.a),this.current=W,this.dirty=!1)},X}(Pc),Db=function(U){function X(){U.apply(this,
arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return 1},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.clearDepth(W),this.current=W,this.dirty=!1)},X}(Pc),Yb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return 0},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.clearStencil(W),
this.current=W,this.dirty=!1)},X}(Pc),Fc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return[!0,!0,!0,!0]},X.prototype.set=function(W){var fa=this.current;(W[0]!==fa[0]||W[1]!==fa[1]||W[2]!==fa[2]||W[3]!==fa[3]||this.dirty)&&(this.gl.colorMask(W[0],W[1],W[2],W[3]),this.current=W,this.dirty=!1)},X}(Pc),mc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),
(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!0},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.depthMask(W),this.current=W,this.dirty=!1)},X}(Pc),qc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return 255},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.stencilMask(W),this.current=
W,this.dirty=!1)},X}(Pc),rc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},X.prototype.set=function(W){var fa=this.current;(W.func!==fa.func||W.ref!==fa.ref||W.mask!==fa.mask||this.dirty)&&(this.gl.stencilFunc(W.func,W.ref,W.mask),this.current=W,this.dirty=!1)},X}(Pc),wb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=
U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){var W=this.gl;return[W.KEEP,W.KEEP,W.KEEP]},X.prototype.set=function(W){var fa=this.current;(W[0]!==fa[0]||W[1]!==fa[1]||W[2]!==fa[2]||this.dirty)&&(this.gl.stencilOp(W[0],W[1],W[2]),this.current=W,this.dirty=!1)},X}(Pc),zb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=
function(W){if(W!==this.current||this.dirty){var fa=this.gl;W?fa.enable(fa.STENCIL_TEST):fa.disable(fa.STENCIL_TEST);this.current=W;this.dirty=!1}},X}(Pc),fc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return[0,1]},X.prototype.set=function(W){var fa=this.current;(W[0]!==fa[0]||W[1]!==fa[1]||this.dirty)&&(this.gl.depthRange(W[0],W[1]),this.current=W,this.dirty=!1)},X}(Pc),zc=function(U){function X(){U.apply(this,
arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(W){if(W!==this.current||this.dirty){var fa=this.gl;W?fa.enable(fa.DEPTH_TEST):fa.disable(fa.DEPTH_TEST);this.current=W;this.dirty=!1}},X}(Pc),Gc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return this.gl.LESS},X.prototype.set=
function(W){(W!==this.current||this.dirty)&&(this.gl.depthFunc(W),this.current=W,this.dirty=!1)},X}(Pc),$b=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(W){if(W!==this.current||this.dirty){var fa=this.gl;W?fa.enable(fa.BLEND):fa.disable(fa.BLEND);this.current=W;this.dirty=!1}},X}(Pc),bc=function(U){function X(){U.apply(this,arguments)}return U&&
(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){var W=this.gl;return[W.ONE,W.ZERO]},X.prototype.set=function(W){var fa=this.current;(W[0]!==fa[0]||W[1]!==fa[1]||this.dirty)&&(this.gl.blendFunc(W[0],W[1]),this.current=W,this.dirty=!1)},X}(Pc),Eb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return a.Color.transparent},X.prototype.set=
function(W){var fa=this.current;(W.r!==fa.r||W.g!==fa.g||W.b!==fa.b||W.a!==fa.a||this.dirty)&&(this.gl.blendColor(W.r,W.g,W.b,W.a),this.current=W,this.dirty=!1)},X}(Pc),xb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return this.gl.FUNC_ADD},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.blendEquation(W),this.current=W,this.dirty=!1)},X}(Pc),Cb=function(U){function X(){U.apply(this,
arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(W){if(W!==this.current||this.dirty){var fa=this.gl;W?fa.enable(fa.CULL_FACE):fa.disable(fa.CULL_FACE);this.current=W;this.dirty=!1}},X}(Pc),Jb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return this.gl.BACK},X.prototype.set=
function(W){(W!==this.current||this.dirty)&&(this.gl.cullFace(W),this.current=W,this.dirty=!1)},X}(Pc),ac=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return this.gl.CCW},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.frontFace(W),this.current=W,this.dirty=!1)},X}(Pc),Kc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=
Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.useProgram(W),this.current=W,this.dirty=!1)},X}(Pc),vc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return this.gl.TEXTURE0},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.activeTexture(W),this.current=
W,this.dirty=!1)},X}(Pc),Lc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){var W=this.gl;return[0,0,W.drawingBufferWidth,W.drawingBufferHeight]},X.prototype.set=function(W){var fa=this.current;(W[0]!==fa[0]||W[1]!==fa[1]||W[2]!==fa[2]||W[3]!==fa[3]||this.dirty)&&(this.gl.viewport(W[0],W[1],W[2],W[3]),this.current=W,this.dirty=!1)},X}(Pc),Zc=function(U){function X(){U.apply(this,
arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){if(W!==this.current||this.dirty){var fa=this.gl;fa.bindFramebuffer(fa.FRAMEBUFFER,W);this.current=W;this.dirty=!1}},X}(Pc),Wc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){if(W!==
this.current||this.dirty){var fa=this.gl;fa.bindRenderbuffer(fa.RENDERBUFFER,W);this.current=W;this.dirty=!1}},X}(Pc),ld=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){if(W!==this.current||this.dirty){var fa=this.gl;fa.bindTexture(fa.TEXTURE_2D,W);this.current=W;this.dirty=!1}},X}(Pc),xd=function(U){function X(){U.apply(this,arguments)}return U&&
(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){if(W!==this.current||this.dirty){var fa=this.gl;fa.bindBuffer(fa.ARRAY_BUFFER,W);this.current=W;this.dirty=!1}},X}(Pc),hd=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){var fa=this.gl;fa.bindBuffer(fa.ELEMENT_ARRAY_BUFFER,
W);this.current=W;this.dirty=!1},X}(Pc),Cd=function(U){function X(W){U.call(this,W);this.vao=W.extVertexArrayObject}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){this.vao&&(W!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(W),this.current=W,this.dirty=!1)},X}(Pc),Kd=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=
X,X.prototype.getDefault=function(){return 4},X.prototype.set=function(W){if(W!==this.current||this.dirty){var fa=this.gl;fa.pixelStorei(fa.UNPACK_ALIGNMENT,W);this.current=W;this.dirty=!1}},X}(Pc),pd=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(W){if(W!==this.current||this.dirty){var fa=this.gl;fa.pixelStorei(fa.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
W);this.current=W;this.dirty=!1}},X}(Pc),Yc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(W){if(W!==this.current||this.dirty){var fa=this.gl;fa.pixelStorei(fa.UNPACK_FLIP_Y_WEBGL,W);this.current=W;this.dirty=!1}},X}(Pc),Dd=function(U){function X(W,fa){U.call(this,W);this.context=W;this.parent=fa}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&
U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X}(Pc),Jd=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.setDirty=function(){this.dirty=!0},X.prototype.set=function(W){if(W!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var fa=this.gl;fa.framebufferTexture2D(fa.FRAMEBUFFER,fa.COLOR_ATTACHMENT0,fa.TEXTURE_2D,W,0);this.current=W;this.dirty=!1}},X}(Dd),
Ld=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.set=function(W){if(W!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var fa=this.gl;fa.framebufferRenderbuffer(fa.FRAMEBUFFER,fa.DEPTH_ATTACHMENT,fa.RENDERBUFFER,W);this.current=W;this.dirty=!1}},X}(Dd),Ce=function(U,X,W,fa){this.context=U;this.width=X;this.height=W;X=this.framebuffer=U.gl.createFramebuffer();this.colorAttachment=
new Jd(U,X);fa&&(this.depthAttachment=new Ld(U,X))};Ce.prototype.destroy=function(){var U=this.context.gl,X=this.colorAttachment.get();(X&&U.deleteTexture(X),this.depthAttachment)&&(X=this.depthAttachment.get())&&U.deleteRenderbuffer(X);U.deleteFramebuffer(this.framebuffer)};var Rd=function(U,X,W){this.func=U;this.mask=X;this.range=W};Rd.ReadOnly=!1;Rd.ReadWrite=!0;Rd.disabled=new Rd(519,Rd.ReadOnly,[0,1]);var Sc=function(U,X,W,fa,za,Na){this.test=U;this.ref=X;this.mask=W;this.fail=fa;this.depthFail=
za;this.pass=Na};Sc.disabled=new Sc({func:519,mask:0},0,0,7680,7680,7680);var md=function(U,X,W){this.blendFunction=U;this.blendColor=X;this.mask=W};md.disabled=new md(md.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]);md.unblended=new md(md.Replace,a.Color.transparent,[!0,!0,!0,!0]);md.alphaBlended=new md([1,771],a.Color.transparent,[!0,!0,!0,!0]);var Gd=function(U,X,W){this.enable=U;this.mode=X;this.frontFace=W};Gd.disabled=new Gd(!1,1029,2305);Gd.backCCW=new Gd(!0,1029,2305);var Md=function(U){this.gl=
U;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new sd(this);this.clearDepth=new Db(this);this.clearStencil=new Yb(this);this.colorMask=new Fc(this);this.depthMask=new mc(this);this.stencilMask=new qc(this);this.stencilFunc=new rc(this);this.stencilOp=new wb(this);this.stencilTest=new zb(this);this.depthRange=new fc(this);this.depthTest=new zc(this);this.depthFunc=new Gc(this);this.blend=new $b(this);this.blendFunc=new bc(this);this.blendColor=new Eb(this);
this.blendEquation=new xb(this);this.cullFace=new Cb(this);this.cullFaceSide=new Jb(this);this.frontFace=new ac(this);this.program=new Kc(this);this.activeTexture=new vc(this);this.viewport=new Lc(this);this.bindFramebuffer=new Zc(this);this.bindRenderbuffer=new Wc(this);this.bindTexture=new ld(this);this.bindVertexBuffer=new xd(this);this.bindElementBuffer=new hd(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new Cd(this);this.pixelStoreUnpack=new Kd(this);this.pixelStoreUnpackPremultiplyAlpha=
new pd(this);this.pixelStoreUnpackFlipY=new Yc(this);(this.extTextureFilterAnisotropic=U.getExtension("EXT_texture_filter_anisotropic")||U.getExtension("MOZ_EXT_texture_filter_anisotropic")||U.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=U.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));(this.extTextureHalfFloat=U.getExtension("OES_texture_half_float"))&&(U.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=
U.getExtension("EXT_color_buffer_half_float"));this.extTimerQuery=U.getExtension("EXT_disjoint_timer_query")};Md.prototype.setDefault=function(){this.unbindVAO();this.clearColor.setDefault();this.clearDepth.setDefault();this.clearStencil.setDefault();this.colorMask.setDefault();this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();this.stencilOp.setDefault();this.stencilTest.setDefault();this.depthRange.setDefault();this.depthTest.setDefault();this.depthFunc.setDefault();
this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();this.program.setDefault();this.activeTexture.setDefault();this.bindFramebuffer.setDefault();this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();this.pixelStoreUnpackFlipY.setDefault()};Md.prototype.setDirty=function(){this.clearColor.dirty=!0;this.clearDepth.dirty=!0;
this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=!0;this.blendFunc.dirty=!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=!0;this.frontFace.dirty=!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=!0;this.bindFramebuffer.dirty=
!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=!0;this.pixelStoreUnpackFlipY.dirty=!0};Md.prototype.createIndexBuffer=function(U,X){return new ad(this,U,X)};Md.prototype.createVertexBuffer=function(U,X,W){return new ed(this,U,X,W)};Md.prototype.createRenderbuffer=function(U,X,W){var fa=this.gl,
za=fa.createRenderbuffer();return this.bindRenderbuffer.set(za),fa.renderbufferStorage(fa.RENDERBUFFER,U,X,W),this.bindRenderbuffer.set(null),za};Md.prototype.createFramebuffer=function(U,X,W){return new Ce(this,U,X,W)};Md.prototype.clear=function(U){var X=U.color;U=U.depth;var W=this.gl,fa=0;X&&(fa|=W.COLOR_BUFFER_BIT,this.clearColor.set(X),this.colorMask.set([!0,!0,!0,!0]));void 0!==U&&(fa|=W.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(U),this.depthMask.set(!0));W.clear(fa)};
Md.prototype.setCullFace=function(U){!1===U.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(U.mode),this.frontFace.set(U.frontFace))};Md.prototype.setDepthMode=function(U){U.func!==this.gl.ALWAYS||U.mask?(this.depthTest.set(!0),this.depthFunc.set(U.func),this.depthMask.set(U.mask),this.depthRange.set(U.range)):this.depthTest.set(!1)};Md.prototype.setStencilMode=function(U){U.test.func!==this.gl.ALWAYS||U.mask?(this.stencilTest.set(!0),this.stencilMask.set(U.mask),this.stencilOp.set([U.fail,
U.depthFail,U.pass]),this.stencilFunc.set({func:U.test.func,ref:U.ref,mask:U.test.mask})):this.stencilTest.set(!1)};Md.prototype.setColorMode=function(U){a.deepEqual(U.blendFunction,md.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(U.blendFunction),this.blendColor.set(U.blendColor));this.colorMask.set(U.mask)};Md.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var me=function(U){function X(W,fa,za){var Na=this;U.call(this);this.id=W;
this.dispatcher=za;this.on("data",function(ab){"source"===ab.dataType&&"metadata"===ab.sourceDataType&&(Na._sourceLoaded=!0);Na._sourceLoaded&&!Na._paused&&"source"===ab.dataType&&"content"===ab.sourceDataType&&(Na.reload(),Na.transform&&Na.update(Na.transform))});this.on("error",function(){Na._sourceErrored=!0});this._source=function(ab,mb,Mb,Ub){mb=new lc[mb.type](ab,mb,Mb,Ub);if(mb.id!==ab)throw Error("Expected Source id to be "+ab+" instead of "+mb.id);return a.bindAll(["load","abort","unload",
"serialize","prepare"],mb),mb}(W,fa,za,this);this._tiles={};this._cache=new Ac(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._loadedParentTiles={};this._coveredTiles={};this._state=new a.SourceFeatureState}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.onAdd=function(W){this._maxTileCacheSize=(this.map=W)?W._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(W)},X.prototype.onRemove=
function(W){this._source&&this._source.onRemove&&this._source.onRemove(W)},X.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var W in this._tiles){var fa=this._tiles[W];if("loaded"!==fa.state&&"errored"!==fa.state)return!1}return!0},X.prototype.getSource=function(){return this._source},X.prototype.pause=function(){this._paused=!0},X.prototype.resume=function(){if(this._paused){var W=this._shouldReloadOnResume;this._shouldReloadOnResume=
this._paused=!1;W&&this.reload();this.transform&&this.update(this.transform)}},X.prototype._loadTile=function(W,fa){return this._source.loadTile(W,fa)},X.prototype._unloadTile=function(W){if(this._source.unloadTile)return this._source.unloadTile(W,function(){})},X.prototype._abortTile=function(W){if(this._source.abortTile)return this._source.abortTile(W,function(){})},X.prototype.serialize=function(){return this._source.serialize()},X.prototype.prepare=function(W){for(var fa in this._source.prepare&&
this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var za=this._tiles[fa];za.upload(W);za.prepare(this.map.style.imageManager)}},X.prototype.getIds=function(){return a.values(this._tiles).map(function(W){return W.tileID}).sort(r).map(function(W){return W.key})},X.prototype.getRenderableIds=function(W){var fa=this,za=[],Na;for(Na in this._tiles)this._isIdRenderable(Na,W)&&za.push(this._tiles[Na]);return W?za.sort(function(ab,mb){ab=ab.tileID;
mb=mb.tileID;var Mb=(new a.Point(ab.canonical.x,ab.canonical.y))._rotate(fa.transform.angle),Ub=(new a.Point(mb.canonical.x,mb.canonical.y))._rotate(fa.transform.angle);return ab.overscaledZ-mb.overscaledZ||Ub.y-Mb.y||Ub.x-Mb.x}).map(function(ab){return ab.tileID.key}):za.map(function(ab){return ab.tileID}).sort(r).map(function(ab){return ab.key})},X.prototype.hasRenderableParent=function(W){W=this.findLoadedParent(W,0);return!!W&&this._isIdRenderable(W.tileID.key)},X.prototype._isIdRenderable=function(W,
fa){return this._tiles[W]&&this._tiles[W].hasData()&&!this._coveredTiles[W]&&(fa||!this._tiles[W].holdingForFade())},X.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var W in this._cache.reset(),this._tiles)"errored"!==this._tiles[W].state&&this._reloadTile(W,"reloading")},X.prototype._reloadTile=function(W,fa){var za=this._tiles[W];za&&("loading"!==za.state&&(za.state=fa),this._loadTile(za,this._tileLoaded.bind(this,za,W,fa)))},X.prototype._tileLoaded=function(W,
fa,za,Na){if(Na)return W.state="errored",void(404!==Na.status?this._source.fire(new a.ErrorEvent(Na,{tile:W})):this.update(this.transform));W.timeAdded=a.browser.now();"expired"===za&&(W.refreshedUponExpiration=!0);this._setTileReloadTimer(fa,W);"raster-dem"===this.getSource().type&&W.dem&&this._backfillDEM(W);this._state.initializeTileState(W,this.map?this.map.painter:null);this._source.fire(new a.Event("data",{dataType:"source",tile:W,coord:W.tileID}))},X.prototype._backfillDEM=function(W){function fa(mb,
Mb){mb.needsHillshadePrepare=!0;var Ub=Mb.tileID.canonical.x-mb.tileID.canonical.x,Zb=Mb.tileID.canonical.y-mb.tileID.canonical.y,Jc=Math.pow(2,mb.tileID.canonical.z),Ic=Mb.tileID.key;0===Ub&&0===Zb||1<Math.abs(Zb)||(1<Math.abs(Ub)&&(1===Math.abs(Ub+Jc)?Ub+=Jc:1===Math.abs(Ub-Jc)&&(Ub-=Jc)),Mb.dem&&mb.dem&&(mb.dem.backfillBorder(Mb.dem,Ub,Zb),mb.neighboringTiles&&mb.neighboringTiles[Ic]&&(mb.neighboringTiles[Ic].backfilled=!0)))}for(var za=this.getRenderableIds(),Na=0;Na<za.length;Na++){var ab=za[Na];
W.neighboringTiles&&W.neighboringTiles[ab]&&(ab=this.getTileByID(ab),fa(W,ab),fa(ab,W))}},X.prototype.getTile=function(W){return this.getTileByID(W.key)},X.prototype.getTileByID=function(W){return this._tiles[W]},X.prototype._retainLoadedChildren=function(W,fa,za,Na){for(var ab in this._tiles){var mb=this._tiles[ab];if(!(Na[ab]||!mb.hasData()||mb.tileID.overscaledZ<=fa||mb.tileID.overscaledZ>za)){for(var Mb=mb.tileID;mb&&mb.tileID.overscaledZ>fa+1;){var Ub=mb.tileID.scaledTo(mb.tileID.overscaledZ-
1);(mb=this._tiles[Ub.key])&&mb.hasData()&&(Mb=Ub)}for(mb=Mb;mb.overscaledZ>fa;)if(W[(mb=mb.scaledTo(mb.overscaledZ-1)).key]){Na[Mb.key]=Mb;break}}}},X.prototype.findLoadedParent=function(W,fa){if(W.key in this._loadedParentTiles)return(W=this._loadedParentTiles[W.key])&&W.tileID.overscaledZ>=fa?W:null;for(var za=W.overscaledZ-1;za>=fa;za--){var Na=W.scaledTo(za);if(Na=this._getLoadedTile(Na))return Na}},X.prototype._getLoadedTile=function(W){var fa=this._tiles[W.key];return fa&&fa.hasData()?fa:this._cache.getByKey(W.wrapped().key)},
X.prototype.updateCacheSize=function(W){W=Math.floor((Math.ceil(W.width/this._source.tileSize)+1)*(Math.ceil(W.height/this._source.tileSize)+1)*5);this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,W):W)},X.prototype.handleWrapJump=function(W){var fa=Math.round((W-(void 0===this._prevLng?W:this._prevLng))/360);if(this._prevLng=W,fa){W={};for(var za in this._tiles){var Na=this._tiles[za];Na.tileID=Na.tileID.unwrapTo(Na.tileID.wrap+fa);W[Na.tileID.key]=Na}for(var ab in this._tiles=
W,this._timers)clearTimeout(this._timers[ab]),delete this._timers[ab];for(var mb in this._tiles)this._setTileReloadTimer(mb,this._tiles[mb])}},X.prototype.update=function(W){var fa=this;if(this.transform=W,this._sourceLoaded&&!this._paused){var za;this.updateCacheSize(W);this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?za=W.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Xb){return new a.OverscaledTileID(Xb.canonical.z,Xb.wrap,Xb.canonical.z,
Xb.canonical.x,Xb.canonical.y)}):(za=W.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(za=za.filter(function(Xb){return fa._source.hasTile(Xb)}))):za=[];W=W.coveringZoomLevel(this._source);var Na=Math.max(W-X.maxOverzooming,this._source.minzoom),ab=Math.max(W+X.maxUnderzooming,this._source.minzoom);za=this._updateRetainedTiles(za,W);if(u(this._source.type)){for(var mb=
{},Mb={},Ub=0,Zb=Object.keys(za);Ub<Zb.length;Ub+=1){var Jc=Zb[Ub],Ic=za[Jc],yc=this._tiles[Jc];!yc||yc.fadeEndTime&&yc.fadeEndTime<=a.browser.now()||((yc=this.findLoadedParent(Ic,Na))&&(this._addTile(yc.tileID),mb[yc.tileID.key]=yc.tileID),Mb[Jc]=Ic)}for(var Hc in this._retainLoadedChildren(Mb,W,ab,za),mb)za[Hc]||(this._coveredTiles[Hc]=!0,za[Hc]=mb[Hc])}for(var Dc in za)this._tiles[Dc].clearFadeHold();Hc=0;for(Dc=a.keysDifference(this._tiles,za);Hc<Dc.length;Hc+=1)W=Dc[Hc],Na=this._tiles[W],Na.hasSymbolBuckets&&
!Na.holdingForFade()?Na.setHoldDuration(this.map._fadeDuration):Na.hasSymbolBuckets&&!Na.symbolFadeFinished()||this._removeTile(W);this._updateLoadedParentTileCache()}},X.prototype.releaseSymbolFadeTiles=function(){for(var W in this._tiles)this._tiles[W].holdingForFade()&&this._removeTile(W)},X.prototype._updateRetainedTiles=function(W,fa){for(var za={},Na={},ab=Math.max(fa-X.maxOverzooming,this._source.minzoom),mb=Math.max(fa+X.maxUnderzooming,this._source.minzoom),Mb={},Ub=0;Ub<W.length;Ub+=1){var Zb=
W[Ub],Jc=this._addTile(Zb);za[Zb.key]=Zb;Jc.hasData()||fa<this._source.maxzoom&&(Mb[Zb.key]=Zb)}this._retainLoadedChildren(Mb,fa,mb,za);for(mb=0;mb<W.length;mb+=1)if(Mb=W[mb],Ub=this._tiles[Mb.key],!Ub.hasData()){if(fa+1>this._source.maxzoom){if(Zb=Mb.children(this._source.maxzoom)[0],(Jc=this.getTile(Zb))&&Jc.hasData()){za[Zb.key]=Zb;continue}}else if(Zb=Mb.children(this._source.maxzoom),za[Zb[0].key]&&za[Zb[1].key]&&za[Zb[2].key]&&za[Zb[3].key])continue;Zb=Ub.wasRequested();for(Jc=Mb.overscaledZ-
1;Jc>=ab;--Jc){var Ic=Mb.scaledTo(Jc);if(Na[Ic.key])break;if(Na[Ic.key]=!0,!(Ub=this.getTile(Ic))&&Zb&&(Ub=this._addTile(Ic)),Ub&&(za[Ic.key]=Ic,Zb=Ub.wasRequested(),Ub.hasData()))break}}return za},X.prototype._updateLoadedParentTileCache=function(){for(var W in this._loadedParentTiles={},this._tiles){for(var fa=[],za=void 0,Na=this._tiles[W].tileID;0<Na.overscaledZ;){if(Na.key in this._loadedParentTiles){za=this._loadedParentTiles[Na.key];break}fa.push(Na.key);Na=Na.scaledTo(Na.overscaledZ-1);if(za=
this._getLoadedTile(Na))break}for(Na=0;Na<fa.length;Na+=1)this._loadedParentTiles[fa[Na]]=za}},X.prototype._addTile=function(W){var fa=this._tiles[W.key];if(fa)return fa;(fa=this._cache.getAndRemove(W))&&(this._setTileReloadTimer(W.key,fa),fa.tileID=W,this._state.initializeTileState(fa,this.map?this.map.painter:null),this._cacheTimers[W.key]&&(clearTimeout(this._cacheTimers[W.key]),delete this._cacheTimers[W.key],this._setTileReloadTimer(W.key,fa)));var za=!!fa;return za||(fa=new a.Tile(W,this._source.tileSize*
W.overscaleFactor()),this._loadTile(fa,this._tileLoaded.bind(this,fa,W.key,fa.state))),fa?(fa.uses++,this._tiles[W.key]=fa,za||this._source.fire(new a.Event("dataloading",{tile:fa,coord:fa.tileID,dataType:"source"})),fa):null},X.prototype._setTileReloadTimer=function(W,fa){var za=this;W in this._timers&&(clearTimeout(this._timers[W]),delete this._timers[W]);(fa=fa.getExpiryTimeout())&&(this._timers[W]=setTimeout(function(){za._reloadTile(W,"expired");delete za._timers[W]},fa))},X.prototype._removeTile=
function(W){var fa=this._tiles[W];fa&&(fa.uses--,delete this._tiles[W],this._timers[W]&&(clearTimeout(this._timers[W]),delete this._timers[W]),0<fa.uses||(fa.hasData()&&"reloading"!==fa.state?this._cache.add(fa.tileID,fa,fa.getExpiryTimeout()):(fa.aborted=!0,this._abortTile(fa),this._unloadTile(fa))))},X.prototype.clearTiles=function(){for(var W in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(W);this._cache.reset()},X.prototype.tilesIn=function(W,fa,za){var Na=this,ab=
[],mb=this.transform;if(!mb)return ab;za=za?mb.getCameraQueryGeometry(W):W;var Mb=W.map(function(Dc){return mb.pointCoordinate(Dc)}),Ub=za.map(function(Dc){return mb.pointCoordinate(Dc)}),Zb=this.getIds(),Jc=1/0,Ic=1/0,yc=-1/0,Hc=-1/0;for(W=0;W<Ub.length;W+=1)za=Ub[W],Jc=Math.min(Jc,za.x),Ic=Math.min(Ic,za.y),yc=Math.max(yc,za.x),Hc=Math.max(Hc,za.y);W=function(Dc){Dc=Na._tiles[Zb[Dc]];if(!Dc.holdingForFade()){var Xb=Dc.tileID,va=Math.pow(2,mb.zoom-Dc.tileID.overscaledZ),Da=fa*Dc.queryPadding*a.EXTENT/
Dc.tileSize/va,Oa=[Xb.getTilePoint(new a.MercatorCoordinate(Jc,Ic)),Xb.getTilePoint(new a.MercatorCoordinate(yc,Hc))];Oa[0].x-Da<a.EXTENT&&Oa[0].y-Da<a.EXTENT&&0<=Oa[1].x+Da&&0<=Oa[1].y+Da&&(Da=Mb.map(function(bb){return Xb.getTilePoint(bb)}),Oa=Ub.map(function(bb){return Xb.getTilePoint(bb)}),ab.push({tile:Dc,tileID:Xb,queryGeometry:Da,cameraQueryGeometry:Oa,scale:va}))}};for(za=0;za<Zb.length;za++)W(za);return ab},X.prototype.getVisibleCoordinates=function(W){var fa=this;W=this.getRenderableIds(W).map(function(ab){return fa._tiles[ab].tileID});
for(var za=0;za<W.length;za+=1){var Na=W[za];Na.posMatrix=this.transform.calculatePosMatrix(Na.toUnwrapped())}return W},X.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(u(this._source.type))for(var W in this._tiles){var fa=this._tiles[W];if(void 0!==fa.fadeEndTime&&fa.fadeEndTime>=a.browser.now())return!0}return!1},X.prototype.setFeatureState=function(W,fa,za){this._state.updateState(W||"_geojsonTileLayer",fa,za)},X.prototype.removeFeatureState=function(W,fa,za){this._state.removeFeatureState(W||
"_geojsonTileLayer",fa,za)},X.prototype.getFeatureState=function(W,fa){return this._state.getState(W||"_geojsonTileLayer",fa)},X.prototype.setDependencies=function(W,fa,za){(W=this._tiles[W])&&W.setDependencies(fa,za)},X.prototype.reloadTilesForDependencies=function(W,fa){for(var za in this._tiles)this._tiles[za].hasDependency(W,fa)&&this._reloadTile(za,"reloading");this._cache.filter(function(Na){return!Na.hasDependency(W,fa)})},X}(a.Evented);me.maxOverzooming=10;me.maxUnderzooming=3;var xe=function(){this.active=
{}};xe.prototype.acquire=function(U){if(!this.workers)for(this.workers=[];this.workers.length<xe.workerCount;)this.workers.push(new v);return this.active[U]=!0,this.workers.slice()};xe.prototype.release=function(U){delete this.active[U];0===this.numActive()&&(this.workers.forEach(function(X){X.terminate()}),this.workers=null)};xe.prototype.isPreloaded=function(){return!!this.active.mapboxgl_preloaded_worker_pool};xe.prototype.numActive=function(){return Object.keys(this.active).length};var Wd;xe.workerCount=
Math.max(Math.min(Math.floor(a.browser.hardwareConcurrency/2),6),1);var Qd={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",
setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Ae=function(U,X){this.reset(U,X)};Ae.prototype.reset=function(U,X){this.points=U||[];this._distances=[0];for(U=1;U<this.points.length;U++)this._distances[U]=this._distances[U-1]+this.points[U].dist(this.points[U-1]);this.length=this._distances[this._distances.length-1];this.padding=Math.min(X||0,.5*this.length);this.paddedLength=this.length-2*this.padding};Ae.prototype.lerp=function(U){if(1===this.points.length)return this.points[0];
U=a.clamp(U,0,1);for(var X=1,W=this._distances[X],fa=U*this.paddedLength+this.padding;W<fa&&X<this._distances.length;)W=this._distances[++X];U=X-1;var za=this._distances[U];W-=za;W=0<W?(fa-za)/W:0;return this.points[U].mult(1-W).add(this.points[X].mult(W))};var Be=function(U,X,W){var fa=this.boxCells=[],za=this.circleCells=[];this.xCellCount=Math.ceil(U/W);this.yCellCount=Math.ceil(X/W);for(W=0;W<this.xCellCount*this.yCellCount;W++)fa.push([]),za.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=
[];this.circles=[];this.width=U;this.height=X;this.xScale=this.xCellCount/U;this.yScale=this.yCellCount/X;this.circleUid=this.boxUid=0};Be.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};Be.prototype.insert=function(U,X,W,fa,za){this._forEachCell(X,W,fa,za,this._insertBoxCell,this.boxUid++);this.boxKeys.push(U);this.bboxes.push(X);this.bboxes.push(W);this.bboxes.push(fa);this.bboxes.push(za)};Be.prototype.insertCircle=function(U,X,W,fa){this._forEachCell(X-fa,W-
fa,X+fa,W+fa,this._insertCircleCell,this.circleUid++);this.circleKeys.push(U);this.circles.push(X);this.circles.push(W);this.circles.push(fa)};Be.prototype._insertBoxCell=function(U,X,W,fa,za,Na){this.boxCells[za].push(Na)};Be.prototype._insertCircleCell=function(U,X,W,fa,za,Na){this.circleCells[za].push(Na)};Be.prototype._query=function(U,X,W,fa,za,Na){if(0>W||U>this.width||0>fa||X>this.height)return!za&&[];var ab=[];if(0>=U&&0>=X&&this.width<=W&&this.height<=fa){if(za)return!0;for(U=0;U<this.boxKeys.length;U++)ab.push({key:this.boxKeys[U],
x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(U=0;U<this.circleKeys.length;U++)X=this.circles[3*U],W=this.circles[3*U+1],fa=this.circles[3*U+2],ab.push({key:this.circleKeys[U],x1:X-fa,y1:W-fa,x2:X+fa,y2:W+fa});return Na?ab.filter(Na):ab}return this._forEachCell(U,X,W,fa,this._queryCell,ab,{hitTest:za,seenUids:{box:{},circle:{}}},Na),za?0<ab.length:ab};Be.prototype._queryCircle=function(U,X,W,fa,za){var Na=U-W,ab=U+W,mb=X-W,Mb=X+W;if(0>ab||Na>this.width||
0>Mb||mb>this.height)return!fa&&[];var Ub=[];return this._forEachCell(Na,mb,ab,Mb,this._queryCellCircle,Ub,{hitTest:fa,circle:{x:U,y:X,radius:W},seenUids:{box:{},circle:{}}},za),fa?0<Ub.length:Ub};Be.prototype.query=function(U,X,W,fa,za){return this._query(U,X,W,fa,!1,za)};Be.prototype.hitTest=function(U,X,W,fa,za){return this._query(U,X,W,fa,!0,za)};Be.prototype.hitTestCircle=function(U,X,W,fa){return this._queryCircle(U,X,W,!0,fa)};Be.prototype._queryCell=function(U,X,W,fa,za,Na,ab,mb){var Mb=ab.seenUids,
Ub=this.boxCells[za];if(null!==Ub)for(var Zb=this.bboxes,Jc=0;Jc<Ub.length;Jc+=1){var Ic=Ub[Jc];if(!Mb.box[Ic]){Mb.box[Ic]=!0;var yc=4*Ic;if(U<=Zb[yc+2]&&X<=Zb[yc+3]&&W>=Zb[yc+0]&&fa>=Zb[yc+1]&&(!mb||mb(this.boxKeys[Ic]))){if(ab.hitTest)return Na.push(!0),!0;Na.push({key:this.boxKeys[Ic],x1:Zb[yc],y1:Zb[yc+1],x2:Zb[yc+2],y2:Zb[yc+3]})}}}za=this.circleCells[za];if(null!==za)for(Ub=this.circles,Zb=0;Zb<za.length;Zb+=1)if(Jc=za[Zb],!Mb.circle[Jc]){Mb.circle[Jc]=!0;var Hc=3*Jc;if(this._circleAndRectCollide(Ub[Hc],
Ub[Hc+1],Ub[Hc+2],U,X,W,fa)&&(!mb||mb(this.circleKeys[Jc]))){if(ab.hitTest)return Na.push(!0),!0;Ic=Ub[Hc];yc=Ub[Hc+1];Hc=Ub[Hc+2];Na.push({key:this.circleKeys[Jc],x1:Ic-Hc,y1:yc-Hc,x2:Ic+Hc,y2:yc+Hc})}}};Be.prototype._queryCellCircle=function(U,X,W,fa,za,Na,ab,mb){U=ab.circle;ab=ab.seenUids;X=this.boxCells[za];if(null!==X)for(W=this.bboxes,fa=0;fa<X.length;fa+=1){var Mb=X[fa];if(!ab.box[Mb]){ab.box[Mb]=!0;var Ub=4*Mb;if(this._circleAndRectCollide(U.x,U.y,U.radius,W[Ub+0],W[Ub+1],W[Ub+2],W[Ub+3])&&
(!mb||mb(this.boxKeys[Mb])))return Na.push(!0),!0}}za=this.circleCells[za];if(null!==za)for(X=this.circles,W=0;W<za.length;W+=1)if(fa=za[W],!ab.circle[fa]&&(ab.circle[fa]=!0,Mb=3*fa,this._circlesCollide(X[Mb],X[Mb+1],X[Mb+2],U.x,U.y,U.radius)&&(!mb||mb(this.circleKeys[fa]))))return Na.push(!0),!0};Be.prototype._forEachCell=function(U,X,W,fa,za,Na,ab,mb){for(var Mb=this._convertToXCellCoord(U),Ub=this._convertToYCellCoord(X),Zb=this._convertToXCellCoord(W),Jc=this._convertToYCellCoord(fa);Mb<=Zb;Mb++)for(var Ic=
Ub;Ic<=Jc;Ic++)if(za.call(this,U,X,W,fa,this.xCellCount*Ic+Mb,Na,ab,mb))return};Be.prototype._convertToXCellCoord=function(U){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(U*this.xScale)))};Be.prototype._convertToYCellCoord=function(U){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(U*this.yScale)))};Be.prototype._circlesCollide=function(U,X,W,fa,za,Na){U=fa-U;X=za-X;W+=Na;return W*W>U*U+X*X};Be.prototype._circleAndRectCollide=function(U,X,W,fa,za,Na,ab){Na=(Na-fa)/2;U=Math.abs(U-
(fa+Na));if(U>Na+W)return!1;ab=(ab-za)/2;X=Math.abs(X-(za+ab));if(X>ab+W)return!1;if(U<=Na||X<=ab)return!0;za=U-Na;X-=ab;return za*za+X*X<=W*W};var Ge=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Ue=function(U,X,W){void 0===X&&(X=new Be(U.width+200,U.height+200,25));void 0===W&&(W=new Be(U.width+200,U.height+200,25));this.transform=U;this.grid=X;this.ignoredGrid=W;this.pitchfactor=Math.cos(U._pitch)*U.cameraToCenterDistance;this.screenRightBoundary=U.width+100;this.screenBottomBoundary=
U.height+100;this.gridRightBoundary=U.width+200;this.gridBottomBoundary=U.height+200};Ue.prototype.placeCollisionBox=function(U,X,W,fa,za){fa=this.projectAndGetPerspectiveRatio(fa,U.anchorPointX,U.anchorPointY);var Na=W*fa.perspectiveRatio;W=U.x1*Na+fa.point.x;var ab=U.y1*Na+fa.point.y,mb=U.x2*Na+fa.point.x;U=U.y2*Na+fa.point.y;return!this.isInsideGrid(W,ab,mb,U)||!X&&this.grid.hitTest(W,ab,mb,U,za)?{box:[],offscreen:!1}:{box:[W,ab,mb,U],offscreen:this.isOffscreen(W,ab,mb,U)}};Ue.prototype.placeCollisionCircles=
function(U,X,W,fa,za,Na,ab,mb,Mb,Ub,Zb,Jc,Ic){var yc=[],Hc=new a.Point(X.anchorX,X.anchorY);Na=G(Hc,Na);Na=.5+this.transform.cameraToCenterDistance/Na.signedDistanceFromCamera*.5;za=(Ub?za/Na:za*Na)/a.ONE_EM;Ub=G(Hc,ab).point;za=I(za,fa,X.lineOffsetX*za,X.lineOffsetY*za,!1,Ub,Hc,X,W,ab,{});W=X=!1;fa=!0;if(za){Jc=.5*Jc*Na+Ic;ab=new a.Point(-100,-100);Hc=new a.Point(this.screenRightBoundary,this.screenBottomBoundary);Ic=new Ae;Na=za.first;Ub=za.last;za=[];for(var Dc=Na.path.length-1;1<=Dc;Dc--)za.push(Na.path[Dc]);
for(Na=1;Na<Ub.path.length;Na++)za.push(Ub.path[Na]);Na=2.5*Jc;mb&&(za=za.map(function(nb){return G(nb,mb)}),za=za.some(function(nb){return 0>=nb.signedDistanceFromCamera})?[]:za.map(function(nb){return nb.point}));Ub=[];if(0<za.length){Ub=za[0].clone();Dc=za[0].clone();for(var Xb=1;Xb<za.length;Xb++)Ub.x=Math.min(Ub.x,za[Xb].x),Ub.y=Math.min(Ub.y,za[Xb].y),Dc.x=Math.max(Dc.x,za[Xb].x),Dc.y=Math.max(Dc.y,za[Xb].y);Ub=Ub.x>=ab.x&&Dc.x<=Hc.x&&Ub.y>=ab.y&&Dc.y<=Hc.y?[za]:Dc.x<ab.x||Ub.x>Hc.x||Dc.y<ab.y||
Ub.y>Hc.y?[]:a.clipLine([za],ab.x,ab.y,Hc.x,Hc.y)}ab=0;for(Hc=Ub;ab<Hc.length;ab+=1)for(Ic.reset(Hc[ab],.25*Jc),za=Ic.length<=.5*Jc?1:Math.ceil(Ic.paddedLength/Na)+1,Ub=0;Ub<za;Ub++){Xb=Ic.lerp(Ub/Math.max(za-1,1));Dc=Xb.x+100;Xb=Xb.y+100;yc.push(Dc,Xb,Jc,0);var va=Dc-Jc,Da=Xb-Jc,Oa=Dc+Jc,bb=Xb+Jc;if(fa=fa&&this.isOffscreen(va,Da,Oa,bb),W=W||this.isInsideGrid(va,Da,Oa,bb),!U&&this.grid.hitTestCircle(Dc,Xb,Jc,Zb)&&(X=!0,!Mb))return{circles:[],offscreen:!1,collisionDetected:X}}}return{circles:!Mb&&
X||!W?[]:yc,offscreen:fa,collisionDetected:X}};Ue.prototype.queryRenderedSymbols=function(U){if(0===U.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var X=[],W=1/0,fa=1/0,za=-1/0,Na=-1/0,ab=0;ab<U.length;ab+=1){var mb=U[ab];mb=new a.Point(mb.x+100,mb.y+100);W=Math.min(W,mb.x);fa=Math.min(fa,mb.y);za=Math.max(za,mb.x);Na=Math.max(Na,mb.y);X.push(mb)}U={};ab={};mb=0;for(W=this.grid.query(W,fa,za,Na).concat(this.ignoredGrid.query(W,fa,za,Na));mb<W.length;mb+=1)za=
W[mb],fa=za.key,(void 0===U[fa.bucketInstanceId]&&(U[fa.bucketInstanceId]={}),U[fa.bucketInstanceId][fa.featureIndex])||(za=[new a.Point(za.x1,za.y1),new a.Point(za.x2,za.y1),new a.Point(za.x2,za.y2),new a.Point(za.x1,za.y2)],a.polygonIntersectsPolygon(X,za)&&(U[fa.bucketInstanceId][fa.featureIndex]=!0,void 0===ab[fa.bucketInstanceId]&&(ab[fa.bucketInstanceId]=[]),ab[fa.bucketInstanceId].push(fa.featureIndex)));return ab};Ue.prototype.insertCollisionBox=function(U,X,W,fa,za){(X?this.ignoredGrid:this.grid).insert({bucketInstanceId:W,
featureIndex:fa,collisionGroupID:za},U[0],U[1],U[2],U[3])};Ue.prototype.insertCollisionCircles=function(U,X,W,fa,za){X=X?this.ignoredGrid:this.grid;W={bucketInstanceId:W,featureIndex:fa,collisionGroupID:za};for(fa=0;fa<U.length;fa+=4)X.insertCircle(W,U[fa],U[fa+1],U[fa+2])};Ue.prototype.projectAndGetPerspectiveRatio=function(U,X,W){X=[X,W,0,1];return O(X,X,U),{point:new a.Point((X[0]/X[3]+1)/2*this.transform.width+100,(-X[1]/X[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/
X[3]*.5}};Ue.prototype.isOffscreen=function(U,X,W,fa){return 100>W||U>=this.screenRightBoundary||100>fa||X>this.screenBottomBoundary};Ue.prototype.isInsideGrid=function(U,X,W,fa){return 0<=W&&U<this.gridRightBoundary&&0<=fa&&X<this.gridBottomBoundary};Ue.prototype.getViewportMatrix=function(){var U=a.identity([]);return a.translate(U,U,[-100,-100,0]),U};var uf=function(U,X,W,fa){this.opacity=U?Math.max(0,Math.min(1,U.opacity+(U.placed?X:-X))):fa&&W?1:0;this.placed=W};uf.prototype.isHidden=function(){return 0===
this.opacity&&!this.placed};var hf=function(U,X,W,fa,za){this.text=new uf(U?U.text:null,X,W,za);this.icon=new uf(U?U.icon:null,X,fa,za)};hf.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var pf=function(U,X,W){this.text=U;this.icon=X;this.skipFade=W},$e=function(){this.invProjMatrix=a.create();this.viewportMatrix=a.create();this.circles=[]},Ra=function(U,X,W,fa,za){this.bucketInstanceId=U;this.featureIndex=X;this.sourceLayerIndex=W;this.bucketIndex=fa;this.tileID=
za},Gb=function(U){this.crossSourceCollisions=U;this.maxGroupID=0;this.collisionGroups={}};Gb.prototype.get=function(U){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[U]){var X=++this.maxGroupID;this.collisionGroups[U]={ID:X,predicate:function(W){return W.collisionGroupID===X}}}return this.collisionGroups[U]};var Ab=function(U,X,W,fa){this.transform=U.clone();this.collisionIndex=new Ue(this.transform);this.placements={};this.opacities={};this.variableOffsets={};
this.stale=!1;this.commitTime=0;this.fadeDuration=X;this.retainedQueryData={};this.collisionGroups=new Gb(W);this.collisionCircleArrays={};(this.prevPlacement=fa)&&(fa.prevPlacement=void 0);this.placedOrientations={}};Ab.prototype.getBucketParts=function(U,X,W,fa){var za=W.getBucket(X),Na=W.latestFeatureIndex;if(za&&Na&&X.id===za.layerIds[0]){X=W.collisionBoxArray;var ab=za.layers[0].layout,mb=Math.pow(2,this.transform.zoom-W.tileID.overscaledZ),Mb=W.tileSize/a.EXTENT,Ub=this.transform.calculatePosMatrix(W.tileID.toUnwrapped()),
Zb="map"===ab.get("text-pitch-alignment"),Jc="map"===ab.get("text-rotation-alignment"),Ic=Q(W,1,this.transform.zoom),yc=B(Ub,Zb,Jc,this.transform,Ic),Hc=null;Zb&&(Zb=t(Ub,Zb,Jc,this.transform,Ic),Hc=a.multiply([],this.transform.labelPlaneMatrix,Zb));this.retainedQueryData[za.bucketInstanceId]=new Ra(za.bucketInstanceId,Na,za.sourceLayerIndex,za.index,W.tileID);W={bucket:za,layout:ab,posMatrix:Ub,textLabelPlaneMatrix:yc,labelToScreenMatrix:Hc,scale:mb,textPixelRatio:Mb,holdingForFade:W.holdingForFade(),
collisionBoxArray:X,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(za.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(za.sourceID)};if(fa)for(fa=0,za=za.sortKeyRanges;fa<za.length;fa+=1)Na=za[fa],U.push({sortKey:Na.sortKey,symbolInstanceStart:Na.symbolInstanceStart,symbolInstanceEnd:Na.symbolInstanceEnd,parameters:W});else U.push({symbolInstanceStart:0,symbolInstanceEnd:za.symbolInstances.length,parameters:W})}};Ab.prototype.attemptAnchorPlacement=function(U,X,W,fa,za,
Na,ab,mb,Mb,Ub,Zb,Jc,Ic,yc,Hc){var Dc,Xb=[Jc.textOffset0,Jc.textOffset1],va=P(U,W,fa,Xb,za);X=this.collisionIndex.placeCollisionBox(T(X,va.x,va.y,Na,ab,this.transform.angle),Zb,mb,Mb,Ub.predicate);if(!Hc||0!==this.collisionIndex.placeCollisionBox(T(Hc,va.x,va.y,Na,ab,this.transform.angle),Zb,mb,Mb,Ub.predicate).box.length)return 0<X.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[Jc.crossTileID]&&this.prevPlacement.placements[Jc.crossTileID]&&this.prevPlacement.placements[Jc.crossTileID].text&&
(Dc=this.prevPlacement.variableOffsets[Jc.crossTileID].anchor),this.variableOffsets[Jc.crossTileID]={textOffset:Xb,width:W,height:fa,anchor:U,textBoxScale:za,prevAnchor:Dc},this.markUsedJustification(Ic,U,Jc,yc),Ic.allowVerticalPlacement&&(this.markUsedOrientation(Ic,yc,Jc),this.placedOrientations[Jc.crossTileID]=yc),{shift:va,placedGlyphBoxes:X}):void 0};Ab.prototype.placeLayerBucketPart=function(U,X,W){var fa=this,za=U.parameters,Na=za.bucket,ab=za.layout,mb=za.posMatrix,Mb=za.textLabelPlaneMatrix,
Ub=za.labelToScreenMatrix,Zb=za.textPixelRatio,Jc=za.holdingForFade,Ic=za.collisionBoxArray,yc=za.partiallyEvaluatedTextSize,Hc=za.collisionGroup,Dc=ab.get("text-optional"),Xb=ab.get("icon-optional"),va=ab.get("text-allow-overlap"),Da=ab.get("icon-allow-overlap"),Oa="map"===ab.get("text-rotation-alignment"),bb="map"===ab.get("text-pitch-alignment"),nb="none"!==ab.get("icon-text-fit");za="viewport-y"===ab.get("symbol-z-order");var Kb=va&&(Da||!Na.hasIconData()||Xb),Pb=Da&&(va||!Na.hasTextData()||Dc);
!Na.collisionArrays&&Ic&&Na.deserializeCollisionBoxes(Ic);Ic=function(hc,kc){if(!X[hc.crossTileID])if(Jc)fa.placements[hc.crossTileID]=new pf(!1,!1,!1);else{var Xc,fd=!1,rd=!1,zd=!0,Hd=null,Bd={box:null,offscreen:null},Pd={box:null,offscreen:null},fe=null,Xd=null,oe=0,Fe=0,ee=0;kc.textFeatureIndex?oe=kc.textFeatureIndex:hc.useRuntimeCollisionCircles&&(oe=hc.featureIndex);kc.verticalTextFeatureIndex&&(Fe=kc.verticalTextFeatureIndex);var Pe=kc.textBox;if(Pe){var Se=function($d){var Qe=a.WritingMode.horizontal;
Na.allowVerticalPlacement&&!$d&&fa.prevPlacement&&($d=fa.prevPlacement.placedOrientations[hc.crossTileID])&&(fa.placedOrientations[hc.crossTileID]=$d,fa.markUsedOrientation(Na,Qe=$d,hc));return Qe};zd=function($d,Qe){if(Na.allowVerticalPlacement&&0<hc.numVerticalGlyphVertices&&kc.verticalTextBox)for(var of=0,Wf=Na.writingModes;of<Wf.length&&(Wf[of]===a.WritingMode.vertical?(Bd=Qe(),Pd=Bd):Bd=$d(),!(Bd&&Bd.box&&Bd.box.length));of+=1);else Bd=$d()};if(ab.get("text-variable-anchor")){var cf=ab.get("text-variable-anchor");
if(fa.prevPlacement&&fa.prevPlacement.variableOffsets[hc.crossTileID]){var We=fa.prevPlacement.variableOffsets[hc.crossTileID];0<cf.indexOf(We.anchor)&&(cf=cf.filter(function($d){return $d!==We.anchor})).unshift(We.anchor)}var $f=function($d,Qe,of){var Wf=$d.x2-$d.x1,Sf=$d.y2-$d.y1,ff=hc.textBoxScale;Qe=nb&&!Da?Qe:null;for(var xf={box:[],offscreen:!1},$h=va?2*cf.length:cf.length,Wg=0;Wg<$h;++Wg){var Rb=fa.attemptAnchorPlacement(cf[Wg%cf.length],$d,Wf,Sf,ff,Oa,bb,Zb,mb,Hc,Wg>=cf.length,hc,Na,of,Qe);
if(Rb&&(xf=Rb.placedGlyphBoxes)&&xf.box&&xf.box.length){fd=!0;Hd=Rb.shift;break}}return xf};zd(function(){return $f(Pe,kc.iconBox,a.WritingMode.horizontal)},function(){var $d=kc.verticalTextBox;return Na.allowVerticalPlacement&&!(Bd&&Bd.box&&Bd.box.length)&&0<hc.numVerticalGlyphVertices&&$d?$f($d,kc.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}});Bd&&(fd=Bd.box,zd=Bd.offscreen);zd=Se(Bd&&Bd.box);!fd&&fa.prevPlacement&&(Se=fa.prevPlacement.variableOffsets[hc.crossTileID])&&(fa.variableOffsets[hc.crossTileID]=
Se,fa.markUsedJustification(Na,Se.anchor,hc,zd))}else{var Xe=function($d,Qe){$d=fa.collisionIndex.placeCollisionBox($d,va,Zb,mb,Hc.predicate);return $d&&$d.box&&$d.box.length&&(fa.markUsedOrientation(Na,Qe,hc),fa.placedOrientations[hc.crossTileID]=Qe),$d};zd(function(){return Xe(Pe,a.WritingMode.horizontal)},function(){var $d=kc.verticalTextBox;return Na.allowVerticalPlacement&&0<hc.numVerticalGlyphVertices&&$d?Xe($d,a.WritingMode.vertical):{box:null,offscreen:null}});Se(Bd&&Bd.box&&Bd.box.length)}}if(fd=
(Xc=Bd)&&Xc.box&&0<Xc.box.length,zd=Xc&&Xc.offscreen,hc.useRuntimeCollisionCircles){fe=Na.text.placedSymbolArray.get(hc.centerJustifiedTextSymbolIndex);Se=a.evaluateSizeForFeature(Na.textSizeData,yc,fe);var sg=ab.get("text-padding");fe=fa.collisionIndex.placeCollisionCircles(va,fe,Na.lineVertexArray,Na.glyphOffsetArray,Se,mb,Mb,Ub,W,bb,Hc.predicate,hc.collisionCircleDiameter,sg);fd=va||0<fe.circles.length&&!fe.collisionDetected;zd=zd&&fe.offscreen}if(kc.iconFeatureIndex&&(ee=kc.iconFeatureIndex),
kc.iconBox)rd=function($d){$d=nb&&Hd?T($d,Hd.x,Hd.y,Oa,bb,fa.transform.angle):$d;return fa.collisionIndex.placeCollisionBox($d,Da,Zb,mb,Hc.predicate)},rd=Pd&&Pd.box&&Pd.box.length&&kc.verticalIconBox?0<(Xd=rd(kc.verticalIconBox)).box.length:0<(Xd=rd(kc.iconBox)).box.length,zd=zd&&Xd.offscreen;Se=Dc||0===hc.numHorizontalGlyphVertices&&0===hc.numVerticalGlyphVertices;sg=Xb||0===hc.numIconVertices;if(Se||sg?sg?Se||(rd=rd&&fd):fd=rd&&fd:rd=fd=rd&&fd,fd&&Xc&&Xc.box&&fa.collisionIndex.insertCollisionBox(Xc.box,
ab.get("text-ignore-placement"),Na.bucketInstanceId,Pd&&Pd.box&&Fe?Fe:oe,Hc.ID),rd&&Xd&&fa.collisionIndex.insertCollisionBox(Xd.box,ab.get("icon-ignore-placement"),Na.bucketInstanceId,ee,Hc.ID),fe&&(fd&&fa.collisionIndex.insertCollisionCircles(fe.circles,ab.get("text-ignore-placement"),Na.bucketInstanceId,oe,Hc.ID),W))for(Xd=Na.bucketInstanceId,Xc=fa.collisionCircleArrays[Xd],void 0===Xc&&(Xc=fa.collisionCircleArrays[Xd]=new $e),Xd=0;Xd<fe.circles.length;Xd+=4)Xc.circles.push(fe.circles[Xd+0]),Xc.circles.push(fe.circles[Xd+
1]),Xc.circles.push(fe.circles[Xd+2]),Xc.circles.push(fe.collisionDetected?1:0);fa.placements[hc.crossTileID]=new pf(fd||Kb,rd||Pb,zd||Na.justReloaded);X[hc.crossTileID]=!0}};if(za)for(U=Na.getSortedSymbolIndexes(this.transform.angle),za=U.length-1;0<=za;--za){var pc=U[za];Ic(Na.symbolInstances.get(pc),Na.collisionArrays[pc])}else for(za=U.symbolInstanceStart;za<U.symbolInstanceEnd;za++)Ic(Na.symbolInstances.get(za),Na.collisionArrays[za]);W&&Na.bucketInstanceId in this.collisionCircleArrays&&(Ic=
this.collisionCircleArrays[Na.bucketInstanceId],a.invert(Ic.invProjMatrix,mb),Ic.viewportMatrix=this.collisionIndex.getViewportMatrix());Na.justReloaded=!1};Ab.prototype.markUsedJustification=function(U,X,W,fa){X=fa===a.WritingMode.vertical?W.verticalPlacedTextSymbolIndex:{left:W.leftJustifiedTextSymbolIndex,center:W.centerJustifiedTextSymbolIndex,right:W.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(X)];fa=0;for(var za=[W.leftJustifiedTextSymbolIndex,W.centerJustifiedTextSymbolIndex,W.rightJustifiedTextSymbolIndex,
W.verticalPlacedTextSymbolIndex];fa<za.length;fa+=1){var Na=za[fa];0<=Na&&(U.text.placedSymbolArray.get(Na).crossTileID=0<=X&&Na!==X?0:W.crossTileID)}};Ab.prototype.markUsedOrientation=function(U,X,W){var fa=X===a.WritingMode.horizontal||X===a.WritingMode.horizontalOnly?X:0;X=X===a.WritingMode.vertical?X:0;for(var za=0,Na=[W.leftJustifiedTextSymbolIndex,W.centerJustifiedTextSymbolIndex,W.rightJustifiedTextSymbolIndex];za<Na.length;za+=1)U.text.placedSymbolArray.get(Na[za]).placedOrientation=fa;W.verticalPlacedTextSymbolIndex&&
(U.text.placedSymbolArray.get(W.verticalPlacedTextSymbolIndex).placedOrientation=X)};Ab.prototype.commit=function(U){this.commitTime=U;this.zoomAtLastRecencyCheck=this.transform.zoom;var X=this.prevPlacement,W=!1;this.prevZoomAdjustment=X?X.zoomAdjustment(this.transform.zoom):0;var fa=X?X.symbolFadeChange(U):1,za=X?X.opacities:{},Na=X?X.variableOffsets:{},ab=X?X.placedOrientations:{};for(Zb in this.placements){var mb=this.placements[Zb],Mb=za[Zb];Mb?(this.opacities[Zb]=new hf(Mb,fa,mb.text,mb.icon),
W=W||mb.text!==Mb.text.placed||mb.icon!==Mb.icon.placed):(this.opacities[Zb]=new hf(null,fa,mb.text,mb.icon,mb.skipFade),W=W||mb.text||mb.icon)}for(var Ub in za){var Zb=za[Ub];this.opacities[Ub]||(mb=new hf(Zb,fa,!1,!1),mb.isHidden()||(this.opacities[Ub]=mb,W=W||Zb.text.placed||Zb.icon.placed))}for(var Jc in Na)this.variableOffsets[Jc]||!this.opacities[Jc]||this.opacities[Jc].isHidden()||(this.variableOffsets[Jc]=Na[Jc]);for(var Ic in ab)this.placedOrientations[Ic]||!this.opacities[Ic]||this.opacities[Ic].isHidden()||
(this.placedOrientations[Ic]=ab[Ic]);W?this.lastPlacementChangeTime=U:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=X?X.lastPlacementChangeTime:U)};Ab.prototype.updateLayerOpacities=function(U,X){for(var W={},fa=0;fa<X.length;fa+=1){var za=X[fa],Na=za.getBucket(U);Na&&za.latestFeatureIndex&&U.id===Na.layerIds[0]&&this.updateBucketOpacities(Na,W,za.collisionBoxArray)}};Ab.prototype.updateBucketOpacities=function(U,X,W){var fa=this;U.hasTextData()&&U.text.opacityVertexArray.clear();
U.hasIconData()&&U.icon.opacityVertexArray.clear();U.hasIconCollisionBoxData()&&U.iconCollisionBox.collisionVertexArray.clear();U.hasTextCollisionBoxData()&&U.textCollisionBox.collisionVertexArray.clear();var za=U.layers[0].layout,Na=new hf(null,0,!1,!1,!0),ab=za.get("text-allow-overlap"),mb=za.get("icon-allow-overlap"),Mb=za.get("text-variable-anchor"),Ub="map"===za.get("text-rotation-alignment"),Zb="map"===za.get("text-pitch-alignment"),Jc="none"!==za.get("icon-text-fit"),Ic=new hf(null,0,ab&&(mb||
!U.hasIconData()||za.get("icon-optional")),mb&&(ab||!U.hasTextData()||za.get("text-optional")),!0);!U.collisionArrays&&W&&(U.hasIconCollisionBoxData()||U.hasTextCollisionBoxData())&&U.deserializeCollisionBoxes(W);var yc=function(Hc,Dc,Xb){for(var va=0;va<Dc/4;va++)Hc.opacityVertexArray.emplaceBack(Xb)};W=function(Hc){var Dc=U.symbolInstances.get(Hc),Xb=Dc.numHorizontalGlyphVertices,va=Dc.numVerticalGlyphVertices,Da=Dc.crossTileID,Oa=fa.opacities[Da];X[Da]?Oa=Na:Oa||(fa.opacities[Da]=Oa=Ic);X[Da]=
!0;var bb=0<Dc.numIconVertices,nb=fa.placedOrientations[Dc.crossTileID],Kb=nb===a.WritingMode.vertical,Pb=nb===a.WritingMode.horizontal||nb===a.WritingMode.horizontalOnly;if(0<Xb||0<va){var pc=aa(Oa.text);yc(U.text,Xb,Kb?Nb:pc);yc(U.text,va,Pb?Nb:pc);var hc=Oa.text.isHidden();[Dc.rightJustifiedTextSymbolIndex,Dc.centerJustifiedTextSymbolIndex,Dc.leftJustifiedTextSymbolIndex].forEach(function(kc){0<=kc&&(U.text.placedSymbolArray.get(kc).hidden=hc||Kb?1:0)});0<=Dc.verticalPlacedTextSymbolIndex&&(U.text.placedSymbolArray.get(Dc.verticalPlacedTextSymbolIndex).hidden=
hc||Pb?1:0);(Xb=fa.variableOffsets[Dc.crossTileID])&&fa.markUsedJustification(U,Xb.anchor,Dc,nb);(nb=fa.placedOrientations[Dc.crossTileID])&&(fa.markUsedJustification(U,"left",Dc,nb),fa.markUsedOrientation(U,nb,Dc))}bb&&(bb=aa(Oa.icon),nb=!(Jc&&Dc.verticalPlacedIconSymbolIndex&&Kb),0<=Dc.placedIconSymbolIndex&&(yc(U.icon,Dc.numIconVertices,nb?bb:Nb),U.icon.placedSymbolArray.get(Dc.placedIconSymbolIndex).hidden=Oa.icon.isHidden()),0<=Dc.verticalPlacedIconSymbolIndex&&(yc(U.icon,Dc.numVerticalIconVertices,
nb?Nb:bb),U.icon.placedSymbolArray.get(Dc.verticalPlacedIconSymbolIndex).hidden=Oa.icon.isHidden()));if(U.hasIconCollisionBoxData()||U.hasTextCollisionBoxData())if(Hc=U.collisionArrays[Hc]){Dc=new a.Point(0,0);if(Hc.textBox||Hc.verticalTextBox)bb=!0,Mb&&((Da=fa.variableOffsets[Da])?(Dc=P(Da.anchor,Da.width,Da.height,Da.textOffset,Da.textBoxScale),Ub&&Dc._rotate(Zb?fa.transform.angle:-fa.transform.angle)):bb=!1),Hc.textBox&&V(U.textCollisionBox.collisionVertexArray,Oa.text.placed,!bb||Kb,Dc.x,Dc.y),
Hc.verticalTextBox&&V(U.textCollisionBox.collisionVertexArray,Oa.text.placed,!bb||Pb,Dc.x,Dc.y);Pb=!(Pb||!Hc.verticalIconBox);Hc.iconBox&&V(U.iconCollisionBox.collisionVertexArray,Oa.icon.placed,Pb,Jc?Dc.x:0,Jc?Dc.y:0);Hc.verticalIconBox&&V(U.iconCollisionBox.collisionVertexArray,Oa.icon.placed,!Pb,Jc?Dc.x:0,Jc?Dc.y:0)}};for(za=0;za<U.symbolInstances.length;za++)W(za);if(U.sortFeatures(this.transform.angle),this.retainedQueryData[U.bucketInstanceId]&&(this.retainedQueryData[U.bucketInstanceId].featureSortOrder=
U.featureSortOrder),U.hasTextData()&&U.text.opacityVertexBuffer&&U.text.opacityVertexBuffer.updateData(U.text.opacityVertexArray),U.hasIconData()&&U.icon.opacityVertexBuffer&&U.icon.opacityVertexBuffer.updateData(U.icon.opacityVertexArray),U.hasIconCollisionBoxData()&&U.iconCollisionBox.collisionVertexBuffer&&U.iconCollisionBox.collisionVertexBuffer.updateData(U.iconCollisionBox.collisionVertexArray),U.hasTextCollisionBoxData()&&U.textCollisionBox.collisionVertexBuffer&&U.textCollisionBox.collisionVertexBuffer.updateData(U.textCollisionBox.collisionVertexArray),
U.bucketInstanceId in this.collisionCircleArrays)W=this.collisionCircleArrays[U.bucketInstanceId],U.placementInvProjMatrix=W.invProjMatrix,U.placementViewportMatrix=W.viewportMatrix,U.collisionCircleArray=W.circles,delete this.collisionCircleArrays[U.bucketInstanceId]};Ab.prototype.symbolFadeChange=function(U){return 0===this.fadeDuration?1:(U-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment};Ab.prototype.zoomAdjustment=function(U){return Math.max(0,(this.transform.zoom-U)/1.5)};Ab.prototype.hasTransitions=
function(U){return this.stale||U-this.lastPlacementChangeTime<this.fadeDuration};Ab.prototype.stillRecent=function(U,X){var W=this.zoomAtLastRecencyCheck===X?1-this.zoomAdjustment(X):1;return this.zoomAtLastRecencyCheck=X,this.commitTime+this.fadeDuration*W>U};Ab.prototype.setStale=function(){this.stale=!0};var Ob=Math.pow(2,25),Bc=Math.pow(2,24),Tc=Math.pow(2,17),jc=Math.pow(2,16),Oc=Math.pow(2,9),gd=Math.pow(2,8),vd=Math.pow(2,1),Nb=0,dc=function(U){this._sortAcrossTiles="viewport-y"!==U.layout.get("symbol-z-order")&&
void 0!==U.layout.get("symbol-sort-key").constantOr(1);this._currentPartIndex=this._currentTileIndex=0;this._seenCrossTileIDs={};this._bucketParts=[]};dc.prototype.continuePlacement=function(U,X,W,fa,za){for(var Na=this._bucketParts;this._currentTileIndex<U.length;)if(X.getBucketParts(Na,fa,U[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,za())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Na.sort(function(ab,mb){return ab.sortKey-mb.sortKey}));this._currentPartIndex<
Na.length;)if(X.placeLayerBucketPart(Na[this._currentPartIndex],this._seenCrossTileIDs,W),this._currentPartIndex++,za())return!0;return!1};var Mc=function(U,X,W,fa,za,Na,ab){this.placement=new Ab(U,za,Na,ab);this._currentPlacementIndex=X.length-1;this._forceFullPlacement=W;this._showCollisionBoxes=fa;this._done=!1};Mc.prototype.isDone=function(){return this._done};Mc.prototype.continuePlacement=function(U,X,W){for(var fa=this,za=a.browser.now(),Na=function(){var Mb=a.browser.now()-za;return!fa._forceFullPlacement&&
2<Mb};0<=this._currentPlacementIndex;){var ab=X[U[this._currentPlacementIndex]],mb=this.placement.collisionIndex.transform.zoom;if("symbol"===ab.type&&(!ab.minzoom||ab.minzoom<=mb)&&(!ab.maxzoom||ab.maxzoom>mb)){if(this._inProgressLayer||(this._inProgressLayer=new dc(ab)),this._inProgressLayer.continuePlacement(W[ab.source],this.placement,this._showCollisionBoxes,ab,Na))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0};Mc.prototype.commit=function(U){return this.placement.commit(U),
this.placement};var cd=512/a.EXTENT/2,Rc=function(U,X,W){this.tileID=U;this.indexedSymbolInstances={};this.bucketInstanceId=W;for(W=0;W<X.length;W++){var fa=X.get(W),za=fa.key;this.indexedSymbolInstances[za]||(this.indexedSymbolInstances[za]=[]);this.indexedSymbolInstances[za].push({crossTileID:fa.crossTileID,coord:this.getScaledCoordinates(fa,U)})}};Rc.prototype.getScaledCoordinates=function(U,X){var W=cd/Math.pow(2,X.canonical.z-this.tileID.canonical.z);return{x:Math.floor((X.canonical.x*a.EXTENT+
U.anchorX)*W),y:Math.floor((X.canonical.y*a.EXTENT+U.anchorY)*W)}};Rc.prototype.findMatches=function(U,X,W){for(var fa=this.tileID.canonical.z<X.canonical.z?1:Math.pow(2,this.tileID.canonical.z-X.canonical.z),za=0;za<U.length;za++){var Na=U.get(za);if(!Na.crossTileID){var ab=this.indexedSymbolInstances[Na.key];if(ab)for(var mb=this.getScaledCoordinates(Na,X),Mb=0;Mb<ab.length;Mb+=1){var Ub=ab[Mb];if(Math.abs(Ub.coord.x-mb.x)<=fa&&Math.abs(Ub.coord.y-mb.y)<=fa&&!W[Ub.crossTileID]){W[Ub.crossTileID]=
!0;Na.crossTileID=Ub.crossTileID;break}}}}};var $c=function(){this.maxCrossTileID=0};$c.prototype.generate=function(){return++this.maxCrossTileID};var Qb=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};Qb.prototype.handleWrapJump=function(U){var X=Math.round((U-this.lng)/360);if(0!==X)for(var W in this.indexes){var fa=this.indexes[W],za={},Na;for(Na in fa){var ab=fa[Na];ab.tileID=ab.tileID.unwrapTo(ab.tileID.wrap+X);za[ab.tileID.key]=ab}this.indexes[W]=za}this.lng=U};Qb.prototype.addBucket=
function(U,X,W){if(this.indexes[U.overscaledZ]&&this.indexes[U.overscaledZ][U.key]){if(this.indexes[U.overscaledZ][U.key].bucketInstanceId===X.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(U.overscaledZ,this.indexes[U.overscaledZ][U.key])}for(var fa=0;fa<X.symbolInstances.length;fa++)X.symbolInstances.get(fa).crossTileID=0;this.usedCrossTileIDs[U.overscaledZ]||(this.usedCrossTileIDs[U.overscaledZ]={});fa=this.usedCrossTileIDs[U.overscaledZ];for(var za in this.indexes){var Na=this.indexes[za];
if(Number(za)>U.overscaledZ)for(var ab in Na){var mb=Na[ab];mb.tileID.isChildOf(U)&&mb.findMatches(X.symbolInstances,U,fa)}else(Na=Na[U.scaledTo(Number(za)).key])&&Na.findMatches(X.symbolInstances,U,fa)}for(za=0;za<X.symbolInstances.length;za++)ab=X.symbolInstances.get(za),ab.crossTileID||(ab.crossTileID=W.generate(),fa[ab.crossTileID]=!0);return void 0===this.indexes[U.overscaledZ]&&(this.indexes[U.overscaledZ]={}),this.indexes[U.overscaledZ][U.key]=new Rc(U,X.symbolInstances,X.bucketInstanceId),
!0};Qb.prototype.removeBucketCrossTileIDs=function(U,X){for(var W in X.indexedSymbolInstances)for(var fa=0,za=X.indexedSymbolInstances[W];fa<za.length;fa+=1)delete this.usedCrossTileIDs[U][za[fa].crossTileID]};Qb.prototype.removeStaleBuckets=function(U){var X=!1,W;for(W in this.indexes){var fa=this.indexes[W],za;for(za in fa)U[fa[za].bucketInstanceId]||(this.removeBucketCrossTileIDs(W,fa[za]),delete fa[za],X=!0)}return X};var oc=function(){this.layerIndexes={};this.crossTileIDs=new $c;this.maxBucketInstanceId=
0;this.bucketsInCurrentPlacement={}};oc.prototype.addLayer=function(U,X,W){var fa=this.layerIndexes[U.id];void 0===fa&&(fa=this.layerIndexes[U.id]=new Qb);var za=!1,Na={};fa.handleWrapJump(W);for(W=0;W<X.length;W+=1){var ab=X[W],mb=ab.getBucket(U);mb&&U.id===mb.layerIds[0]&&(mb.bucketInstanceId||(mb.bucketInstanceId=++this.maxBucketInstanceId),fa.addBucket(ab.tileID,mb,this.crossTileIDs)&&(za=!0),Na[mb.bucketInstanceId]=!0)}return fa.removeStaleBuckets(Na)&&(za=!0),za};oc.prototype.pruneUnusedLayers=
function(U){var X={},W;for(W in U.forEach(function(fa){X[fa]=!0}),this.layerIndexes)X[W]||delete this.layerIndexes[W]};var Cc=function(U,X){return a.emitValidationErrors(U,X&&X.filter(function(W){return"source.canvas"!==W.identifier}))},cc=a.pick(Qd,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),sc=a.pick(Qd,["setCenter","setZoom","setBearing","setPitch"]),jd=function(){var U={},X=
a.styleSpec.$version,W;for(W in a.styleSpec.$root){var fa,za=a.styleSpec.$root[W];za.required&&null!=(fa="version"===W?X:"array"===za.type?[]:{})&&(U[W]=fa)}return U}(),yd=function(U){function X(W,fa){var za=this;void 0===fa&&(fa={});U.call(this);this.map=W;this.dispatcher=new Va((Wd||(Wd=new xe),Wd),this);this.imageManager=new db;this.imageManager.setEventedParent(this);this.glyphManager=new Ia(W._requestManager,fa.localIdeographFontFamily);this.lineAtlas=new Ga(256,512);this.crossTileSymbolIndex=
new oc;this._layers={};this._serializedLayers={};this._order=[];this.sourceCaches={};this.zoomHistory=new a.ZoomHistory;this._loaded=!1;this._availableImages=[];this._resetUpdates();this.dispatcher.broadcast("setReferrer",a.getReferrer());var Na=this;this._rtlTextPluginCallback=X.registerForPluginStateChange(function(ab){Na.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:ab.pluginStatus,pluginURL:ab.pluginURL},function(mb,Mb){if(a.triggerPluginCompletionEvent(mb),Mb&&Mb.every(function(Zb){return Zb}))for(var Ub in Na.sourceCaches)Na.sourceCaches[Ub].reload()})});
this.on("data",function(ab){if("source"===ab.dataType&&"metadata"===ab.sourceDataType&&(ab=za.sourceCaches[ab.sourceId])&&(ab=ab.getSource())&&ab.vectorLayerIds)for(var mb in za._layers){var Mb=za._layers[mb];Mb.source===ab.id&&za._validateLayer(Mb)}})}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.loadURL=function(W,fa){var za=this;void 0===fa&&(fa={});this.fire(new a.Event("dataloading",{dataType:"style"}));var Na="boolean"==typeof fa.validate?fa.validate:
!a.isMapboxURL(W);W=this.map._requestManager.normalizeStyleURL(W,fa.accessToken);W=this.map._requestManager.transformRequest(W,a.ResourceType.Style);this._request=a.getJSON(W,function(ab,mb){za._request=null;ab?za.fire(new a.ErrorEvent(ab)):mb&&za._load(mb,Na)})},X.prototype.loadJSON=function(W,fa){var za=this;void 0===fa&&(fa={});this.fire(new a.Event("dataloading",{dataType:"style"}));this._request=a.browser.frame(function(){za._request=null;za._load(W,!1!==fa.validate)})},X.prototype.loadEmpty=
function(){this.fire(new a.Event("dataloading",{dataType:"style"}));this._load(jd,!1)},X.prototype._load=function(W,fa){if(!fa||!Cc(this,a.validateStyle(W))){for(var za in this._loaded=!0,this.stylesheet=W,W.sources)this.addSource(za,W.sources[za],{validate:!1});W.sprite?this._loadSprite(W.sprite):this.imageManager.setLoaded(!0);this.glyphManager.setURL(W.glyphs);W=D(this.stylesheet.layers);this._order=W.map(function(Na){return Na.id});this._layers={};this._serializedLayers={};for(fa=0;fa<W.length;fa+=
1)za=W[fa],(za=a.createStyleLayer(za)).setEventedParent(this,{layer:{id:za.id}}),this._layers[za.id]=za,this._serializedLayers[za.id]=za.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new xa(this.stylesheet.light);this.fire(new a.Event("data",{dataType:"style"}));this.fire(new a.Event("style.load"))}},X.prototype._loadSprite=function(W){var fa=this;this._spriteRequest=function(za,Na,ab){function mb(){if(Zb)ab(Zb);else if(Mb&&Ub){var Hc=a.browser.getImageData(Ub),
Dc={},Xb;for(Xb in Mb){var va=Mb[Xb],Da=va.width,Oa=va.height,bb=va.x,nb=va.y,Kb=va.sdf,Pb=va.pixelRatio,pc=va.stretchX,hc=va.stretchY;va=va.content;var kc=new a.RGBAImage({width:Da,height:Oa});a.RGBAImage.copy(Hc,kc,{x:bb,y:nb},{x:0,y:0},{width:Da,height:Oa});Dc[Xb]={data:kc,pixelRatio:Pb,sdf:Kb,stretchX:pc,stretchY:hc,content:va}}ab(null,Dc)}}var Mb,Ub,Zb,Jc=1<a.browser.devicePixelRatio?"@2x":"",Ic=a.getJSON(Na.transformRequest(Na.normalizeSpriteURL(za,Jc,".json"),a.ResourceType.SpriteJSON),function(Hc,
Dc){Ic=null;Zb||(Zb=Hc,Mb=Dc,mb())}),yc=a.getImage(Na.transformRequest(Na.normalizeSpriteURL(za,Jc,".png"),a.ResourceType.SpriteImage),function(Hc,Dc){yc=null;Zb||(Zb=Hc,Ub=Dc,mb())});return{cancel:function(){Ic&&(Ic.cancel(),Ic=null);yc&&(yc.cancel(),yc=null)}}}(W,this.map._requestManager,function(za,Na){if(fa._spriteRequest=null,za)fa.fire(new a.ErrorEvent(za));else if(Na)for(var ab in Na)fa.imageManager.addImage(ab,Na[ab]);fa.imageManager.setLoaded(!0);fa._availableImages=fa.imageManager.listImages();
fa.dispatcher.broadcast("setImages",fa._availableImages);fa.fire(new a.Event("data",{dataType:"style"}))})},X.prototype._validateLayer=function(W){var fa=this.sourceCaches[W.source];if(fa){var za=W.sourceLayer;za&&(fa=fa.getSource(),("geojson"===fa.type||fa.vectorLayerIds&&-1===fa.vectorLayerIds.indexOf(za))&&this.fire(new a.ErrorEvent(Error('Source layer "'+za+'" does not exist on source "'+fa.id+'" as specified by style layer "'+W.id+'"'))))}},X.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;
for(var W in this.sourceCaches)if(!this.sourceCaches[W].loaded())return!1;return!!this.imageManager.isLoaded()},X.prototype._serializeLayers=function(W){for(var fa=[],za=0;za<W.length;za+=1){var Na=this._layers[W[za]];"custom"!==Na.type&&fa.push(Na.serialize())}return fa},X.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var W in this.sourceCaches)if(this.sourceCaches[W].hasTransition())return!0;for(var fa in this._layers)if(this._layers[fa].hasTransition())return!0;
return!1},X.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},X.prototype.update=function(W){if(this._loaded){var fa=this._changed;if(this._changed){var za=Object.keys(this._updatedLayers),Na=Object.keys(this._removedLayers);for(Mb in(za.length||Na.length)&&this._updateWorkerLayers(za,Na),this._updatedSources)za=this._updatedSources[Mb],"reload"===za?this._reloadSource(Mb):"clear"===za&&this._clearSource(Mb);for(var ab in this._updateTilesForChangedImages(),
this._updatedPaintProps)this._layers[ab].updateTransitions(W);this.light.updateTransitions(W);this._resetUpdates()}for(var mb in this.sourceCaches)this.sourceCaches[mb].used=!1;var Mb=0;for(ab=this._order;Mb<ab.length;Mb+=1)mb=this._layers[ab[Mb]],mb.recalculate(W,this._availableImages),!mb.isHidden(W.zoom)&&mb.source&&(this.sourceCaches[mb.source].used=!0);this.light.recalculate(W);this.z=W.zoom;fa&&this.fire(new a.Event("data",{dataType:"style"}))}},X.prototype._updateTilesForChangedImages=function(){var W=
Object.keys(this._changedImages);if(W.length){for(var fa in this.sourceCaches)this.sourceCaches[fa].reloadTilesForDependencies(["icons","patterns"],W);this._changedImages={}}},X.prototype._updateWorkerLayers=function(W,fa){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(W),removedIds:fa})},X.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={};this._changedImages={}},X.prototype.setState=
function(W){var fa=this;if(this._checkLoaded(),Cc(this,a.validateStyle(W)))return!1;(W=a.clone$1(W)).layers=D(W.layers);var za=function(ab,mb){if(!ab)return[{command:Qd.setStyle,args:[mb]}];var Mb=[];try{if(!a.deepEqual(ab.version,mb.version))return[{command:Qd.setStyle,args:[mb]}];a.deepEqual(ab.center,mb.center)||Mb.push({command:Qd.setCenter,args:[mb.center]});a.deepEqual(ab.zoom,mb.zoom)||Mb.push({command:Qd.setZoom,args:[mb.zoom]});a.deepEqual(ab.bearing,mb.bearing)||Mb.push({command:Qd.setBearing,
args:[mb.bearing]});a.deepEqual(ab.pitch,mb.pitch)||Mb.push({command:Qd.setPitch,args:[mb.pitch]});a.deepEqual(ab.sprite,mb.sprite)||Mb.push({command:Qd.setSprite,args:[mb.sprite]});a.deepEqual(ab.glyphs,mb.glyphs)||Mb.push({command:Qd.setGlyphs,args:[mb.glyphs]});a.deepEqual(ab.transition,mb.transition)||Mb.push({command:Qd.setTransition,args:[mb.transition]});a.deepEqual(ab.light,mb.light)||Mb.push({command:Qd.setLight,args:[mb.light]});var Ub={},Zb=[];!function(Ic,yc,Hc,Dc){for(var Xb in yc=yc||
{},Ic=Ic||{})if(Ic.hasOwnProperty(Xb)&&!yc.hasOwnProperty(Xb)){var va=Xb,Da=Dc;Hc.push({command:Qd.removeSource,args:[va]});Da[va]=!0}for(Xb in yc)if(yc.hasOwnProperty(Xb))if(Ic.hasOwnProperty(Xb)){if(!a.deepEqual(Ic[Xb],yc[Xb])){if(va="geojson"===Ic[Xb].type&&"geojson"===yc[Xb].type)a:{va=void 0;Da=Ic;var Oa=yc,bb=Xb;for(va in Da[bb])if(Da[bb].hasOwnProperty(va)&&"data"!==va&&!a.deepEqual(Da[bb][va],Oa[bb][va])){va=!1;break a}for(va in Oa[bb])if(Oa[bb].hasOwnProperty(va)&&"data"!==va&&!a.deepEqual(Da[bb][va],
Oa[bb][va])){va=!1;break a}va=!0}if(va)Hc.push({command:Qd.setGeoJSONSourceData,args:[Xb,yc[Xb].data]});else{va=Xb;Da=yc;Oa=Hc;bb=va;var nb=Dc;Oa.push({command:Qd.removeSource,args:[bb]});nb[bb]=!0;Oa.push({command:Qd.addSource,args:[va,Da[va]]})}}}else Hc.push({command:Qd.addSource,args:[Xb,yc[Xb]]})}(ab.sources,mb.sources,Zb,Ub);var Jc=[];ab.layers&&ab.layers.forEach(function(Ic){Ub[Ic.source]?Mb.push({command:Qd.removeLayer,args:[Ic.id]}):Jc.push(Ic)});Mb=Mb.concat(Zb);(function(Ic,yc,Hc){yc=yc||
[];var Dc,Xb,va,Da,Oa;var bb=(Ic=Ic||[]).map(x);var nb=yc.map(x);Ic=Ic.reduce(A,{});var Kb=yc.reduce(A,{}),Pb=bb.slice(),pc=Object.create(null);for(Dc=yc=0;yc<bb.length;yc++)Kb.hasOwnProperty(Xb=bb[yc])?Dc++:(Hc.push({command:Qd.removeLayer,args:[Xb]}),Pb.splice(Pb.indexOf(Xb,Dc),1));for(Dc=yc=0;yc<nb.length;yc++)Pb[Pb.length-1-yc]!==(Xb=nb[nb.length-1-yc])&&(Ic.hasOwnProperty(Xb)?(Hc.push({command:Qd.removeLayer,args:[Xb]}),Pb.splice(Pb.lastIndexOf(Xb,Pb.length-Dc),1)):Dc++,Hc.push({command:Qd.addLayer,
args:[Kb[Xb],Pb[Pb.length-yc]]}),Pb.splice(Pb.length-yc,0,Xb),pc[Xb]=!0);for(yc=0;yc<nb.length;yc++)if(va=Ic[Xb=nb[yc]],Da=Kb[Xb],!pc[Xb]&&!a.deepEqual(va,Da))if(a.deepEqual(va.source,Da.source)&&a.deepEqual(va["source-layer"],Da["source-layer"])&&a.deepEqual(va.type,Da.type)){for(Oa in C(va.layout,Da.layout,Hc,Xb,null,Qd.setLayoutProperty),C(va.paint,Da.paint,Hc,Xb,null,Qd.setPaintProperty),a.deepEqual(va.filter,Da.filter)||Hc.push({command:Qd.setFilter,args:[Xb,Da.filter]}),a.deepEqual(va.minzoom,
Da.minzoom)&&a.deepEqual(va.maxzoom,Da.maxzoom)||Hc.push({command:Qd.setLayerZoomRange,args:[Xb,Da.minzoom,Da.maxzoom]}),va)va.hasOwnProperty(Oa)&&"layout"!==Oa&&"paint"!==Oa&&"filter"!==Oa&&"metadata"!==Oa&&"minzoom"!==Oa&&"maxzoom"!==Oa&&(0===Oa.indexOf("paint.")?C(va[Oa],Da[Oa],Hc,Xb,Oa.slice(6),Qd.setPaintProperty):a.deepEqual(va[Oa],Da[Oa])||Hc.push({command:Qd.setLayerProperty,args:[Xb,Oa,Da[Oa]]}));for(Oa in Da)Da.hasOwnProperty(Oa)&&!va.hasOwnProperty(Oa)&&"layout"!==Oa&&"paint"!==Oa&&"filter"!==
Oa&&"metadata"!==Oa&&"minzoom"!==Oa&&"maxzoom"!==Oa&&(0===Oa.indexOf("paint.")?C(va[Oa],Da[Oa],Hc,Xb,Oa.slice(6),Qd.setPaintProperty):a.deepEqual(va[Oa],Da[Oa])||Hc.push({command:Qd.setLayerProperty,args:[Xb,Oa,Da[Oa]]}))}else Hc.push({command:Qd.removeLayer,args:[Xb]}),bb=Pb[Pb.lastIndexOf(Xb)+1],Hc.push({command:Qd.addLayer,args:[Da,bb]})})(Jc,mb.layers,Mb)}catch(Ic){console.warn("Unable to compute style diff:",Ic),Mb=[{command:Qd.setStyle,args:[mb]}]}return Mb}(this.serialize(),W).filter(function(ab){return!(ab.command in
sc)});if(0===za.length)return!1;var Na=za.filter(function(ab){return!(ab.command in cc)});if(0<Na.length)throw Error("Unimplemented: "+Na.map(function(ab){return ab.command}).join(", ")+".");return za.forEach(function(ab){"setTransition"!==ab.command&&fa[ab.command].apply(fa,ab.args)}),this.stylesheet=W,!0},X.prototype.addImage=function(W,fa){if(this.getImage(W))return this.fire(new a.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(W,fa);this._availableImages=
this.imageManager.listImages();this._changed=this._changedImages[W]=!0;this.fire(new a.Event("data",{dataType:"style"}))},X.prototype.updateImage=function(W,fa){this.imageManager.updateImage(W,fa)},X.prototype.getImage=function(W){return this.imageManager.getImage(W)},X.prototype.removeImage=function(W){if(!this.getImage(W))return this.fire(new a.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(W);this._availableImages=this.imageManager.listImages();this._changed=
this._changedImages[W]=!0;this.fire(new a.Event("data",{dataType:"style"}))},X.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},X.prototype.addSource=function(W,fa,za){var Na=this;if(void 0===za&&(za={}),this._checkLoaded(),void 0!==this.sourceCaches[W])throw Error("There is already a source with this ID");if(!fa.type)throw Error("The type property must be defined, but the only the following properties were given: "+Object.keys(fa).join(", ")+".");if(!(0<=
["vector","raster","geojson","video","image"].indexOf(fa.type)&&this._validate(a.validateStyle.source,"sources."+W,fa,null,za))){this.map&&this.map._collectResourceTiming&&(fa.collectResourceTiming=!0);var ab=this.sourceCaches[W]=new me(W,fa,this.dispatcher);ab.style=this;ab.setEventedParent(this,function(){return{isSourceLoaded:Na.loaded(),source:ab.serialize(),sourceId:W}});ab.onAdd(this.map);this._changed=!0}},X.prototype.removeSource=function(W){if(this._checkLoaded(),void 0===this.sourceCaches[W])throw Error("There is no source with this ID");
for(var fa in this._layers)if(this._layers[fa].source===W)return this.fire(new a.ErrorEvent(Error('Source "'+W+'" cannot be removed while layer "'+fa+'" is using it.')));fa=this.sourceCaches[W];delete this.sourceCaches[W];delete this._updatedSources[W];fa.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:W}));fa.setEventedParent(null);fa.clearTiles();fa.onRemove&&fa.onRemove(this.map);this._changed=!0},X.prototype.setGeoJSONSourceData=function(W,fa){this._checkLoaded();
this.sourceCaches[W].getSource().setData(fa);this._changed=!0},X.prototype.getSource=function(W){return this.sourceCaches[W]&&this.sourceCaches[W].getSource()},X.prototype.addLayer=function(W,fa,za){void 0===za&&(za={});this._checkLoaded();var Na=W.id;if(this.getLayer(Na))this.fire(new a.ErrorEvent(Error('Layer with id "'+Na+'" already exists on this map')));else{if("custom"===W.type){if(Cc(this,a.validateCustomStyleLayer(W)))return;W=a.createStyleLayer(W)}else{if("object"==typeof W.source&&(this.addSource(Na,
W.source),W=a.clone$1(W),W=a.extend(W,{source:Na})),this._validate(a.validateStyle.layer,"layers."+Na,W,{arrayIndex:-1},za))return;W=a.createStyleLayer(W);this._validateLayer(W);W.setEventedParent(this,{layer:{id:Na}});this._serializedLayers[W.id]=W.serialize()}za=fa?this._order.indexOf(fa):this._order.length;if(fa&&-1===za)this.fire(new a.ErrorEvent(Error('Layer with id "'+fa+'" does not exist on this map.')));else{if(this._order.splice(za,0,Na),this._layerOrderChanged=!0,this._layers[Na]=W,this._removedLayers[Na]&&
W.source&&"custom"!==W.type)fa=this._removedLayers[Na],delete this._removedLayers[Na],fa.type!==W.type?this._updatedSources[W.source]="clear":(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause());this._updateLayer(W);W.onAdd&&W.onAdd(this.map)}}},X.prototype.moveLayer=function(W,fa){if(this._checkLoaded(),this._changed=!0,this._layers[W]){if(W!==fa){var za=this._order.indexOf(W);this._order.splice(za,1);za=fa?this._order.indexOf(fa):this._order.length;fa&&-1===za?this.fire(new a.ErrorEvent(Error('Layer with id "'+
fa+'" does not exist on this map.'))):(this._order.splice(za,0,W),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be moved.")))},X.prototype.removeLayer=function(W){this._checkLoaded();var fa=this._layers[W];if(fa){fa.setEventedParent(null);var za=this._order.indexOf(W);this._order.splice(za,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[W]=fa;delete this._layers[W];delete this._serializedLayers[W];
delete this._updatedLayers[W];delete this._updatedPaintProps[W];fa.onRemove&&fa.onRemove(this.map)}else this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be removed.")))},X.prototype.getLayer=function(W){return this._layers[W]},X.prototype.hasLayer=function(W){return W in this._layers},X.prototype.setLayerZoomRange=function(W,fa,za){this._checkLoaded();var Na=this.getLayer(W);Na?Na.minzoom===fa&&Na.maxzoom===za||(null!=fa&&(Na.minzoom=fa),null!=za&&(Na.maxzoom=
za),this._updateLayer(Na)):this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot have zoom extent.")))},X.prototype.setFilter=function(W,fa,za){void 0===za&&(za={});this._checkLoaded();var Na=this.getLayer(W);if(Na){if(!a.deepEqual(Na.filter,fa))return null==fa?(Na.filter=void 0,void this._updateLayer(Na)):void(this._validate(a.validateStyle.filter,"layers."+Na.id+".filter",fa,null,za)||(Na.filter=a.clone$1(fa),this._updateLayer(Na)))}else this.fire(new a.ErrorEvent(Error("The layer '"+
W+"' does not exist in the map's style and cannot be filtered.")))},X.prototype.getFilter=function(W){return a.clone$1(this.getLayer(W).filter)},X.prototype.setLayoutProperty=function(W,fa,za,Na){void 0===Na&&(Na={});this._checkLoaded();var ab=this.getLayer(W);ab?a.deepEqual(ab.getLayoutProperty(fa),za)||(ab.setLayoutProperty(fa,za,Na),this._updateLayer(ab)):this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be styled.")))},X.prototype.getLayoutProperty=
function(W,fa){var za=this.getLayer(W);if(za)return za.getLayoutProperty(fa);this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style.")))},X.prototype.setPaintProperty=function(W,fa,za,Na){void 0===Na&&(Na={});this._checkLoaded();var ab=this.getLayer(W);ab?a.deepEqual(ab.getPaintProperty(fa),za)||(ab.setPaintProperty(fa,za,Na)&&this._updateLayer(ab),this._changed=!0,this._updatedPaintProps[W]=!0):this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be styled.")))},
X.prototype.getPaintProperty=function(W,fa){return this.getLayer(W).getPaintProperty(fa)},X.prototype.setFeatureState=function(W,fa){this._checkLoaded();var za=W.source,Na=W.sourceLayer,ab=this.sourceCaches[za];void 0!==ab?(za=ab.getSource().type,"geojson"===za&&Na?this.fire(new a.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==za||Na?(void 0===W.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),ab.setFeatureState(Na,W.id,fa)):
this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new a.ErrorEvent(Error("The source '"+za+"' does not exist in the map's style.")))},X.prototype.removeFeatureState=function(W,fa){this._checkLoaded();var za=W.source,Na=this.sourceCaches[za];if(void 0!==Na){za=Na.getSource().type;var ab="vector"===za?W.sourceLayer:void 0;"vector"!==za||ab?fa&&"string"!=typeof W.id&&"number"!=typeof W.id?this.fire(new a.ErrorEvent(Error("A feature id is requred to remove its specific state property."))):
Na.removeFeatureState(ab,W.id,fa):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+za+"' does not exist in the map's style.")))},X.prototype.getFeatureState=function(W){this._checkLoaded();var fa=W.source,za=W.sourceLayer,Na=this.sourceCaches[fa];if(void 0!==Na){if("vector"!==Na.getSource().type||za)return void 0===W.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),
Na.getFeatureState(za,W.id);this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+fa+"' does not exist in the map's style.")))},X.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},X.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,
light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(W){return W.serialize()}),layers:this._serializeLayers(this._order)},function(W){return void 0!==W})},X.prototype._updateLayer=function(W){this._updatedLayers[W.id]=!0;W.source&&!this._updatedSources[W.source]&&"raster"!==
this.sourceCaches[W.source].getSource().type&&(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause());this._changed=!0},X.prototype._flattenAndSortRenderedFeatures=function(W){for(var fa={},za=[],Na=this._order.length-1;0<=Na;Na--){var ab=this._order[Na];if("fill-extrusion"===this._layers[ab].type){fa[ab]=Na;for(var mb=0,Mb=W;mb<Mb.length;mb+=1){var Ub=Mb[mb][ab];if(Ub)for(var Zb=0;Zb<Ub.length;Zb+=1)za.push(Ub[Zb])}}}za.sort(function(Ic,yc){return yc.intersectionZ-Ic.intersectionZ});
Na=[];for(ab=this._order.length-1;0<=ab;ab--)if(mb=this._order[ab],"fill-extrusion"===this._layers[mb].type)for(mb=za.length-1;0<=mb;mb--){Mb=za[mb].feature;if(fa[Mb.layer.id]<ab)break;Na.push(Mb);za.pop()}else for(Mb=0,Zb=W;Mb<Zb.length;Mb+=1){var Jc=Zb[Mb][mb];if(Jc)for(Ub=0;Ub<Jc.length;Ub+=1)Na.push(Jc[Ub].feature)}return Na},X.prototype.queryRenderedFeatures=function(W,fa,za){fa&&fa.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",fa.filter,null,fa);var Na={};if(fa&&
fa.layers){if(!Array.isArray(fa.layers))return this.fire(new a.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var ab=0,mb=fa.layers;ab<mb.length;ab+=1){var Mb=mb[ab],Ub=this._layers[Mb];if(!Ub)return this.fire(new a.ErrorEvent(Error("The layer '"+Mb+"' does not exist in the map's style and cannot be queried for features."))),[];Na[Ub.source]=!0}}ab=[];for(var Zb in fa.availableImages=this._availableImages,this.sourceCaches)fa.layers&&!Na[Zb]||ab.push(g(this.sourceCaches[Zb],this._layers,
this._serializedLayers,W,fa,za));return this.placement&&ab.push(function(Jc,Ic,yc,Hc,Dc,Xb,va){var Da={},Oa=Xb.queryRenderedSymbols(Hc);Hc=[];Xb=0;for(var bb=Object.keys(Oa).map(Number);Xb<bb.length;Xb+=1)Hc.push(va[bb[Xb]]);Hc.sort(m);va=function(){var pc=Kb[nb],hc=pc.featureIndex.lookupSymbolFeatures(Oa[pc.bucketInstanceId],Ic,pc.bucketIndex,pc.sourceLayerIndex,Dc.filter,Dc.layers,Dc.availableImages,Jc),kc;for(kc in hc){var Xc=Da[kc]=Da[kc]||[],fd=hc[kc];fd.sort(function(zd,Hd){var Bd=pc.featureSortOrder;
return Bd?(zd=Bd.indexOf(zd.featureIndex),Bd.indexOf(Hd.featureIndex)-zd):Hd.featureIndex-zd.featureIndex});for(var rd=0;rd<fd.length;rd+=1)Xc.push(fd[rd])}};for(var nb=0,Kb=Hc;nb<Kb.length;nb+=1)va();va=function(pc){Da[pc].forEach(function(hc){hc=hc.feature;var kc=yc[Jc[pc].source].getFeatureState(hc.layer["source-layer"],hc.id);hc.source=hc.layer.source;hc.layer["source-layer"]&&(hc.sourceLayer=hc.layer["source-layer"]);hc.state=kc})};for(var Pb in Da)va(Pb);return Da}(this._layers,this._serializedLayers,
this.sourceCaches,W,fa,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ab)},X.prototype.querySourceFeatures=function(W,fa){fa&&fa.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",fa.filter,null,fa);return(W=this.sourceCaches[W])?function(za,Na){for(var ab=za.getRenderableIds().map(function(Ic){return za.getTileByID(Ic)}),mb=[],Mb={},Ub=0;Ub<ab.length;Ub++){var Zb=ab[Ub],Jc=Zb.tileID.canonical.key;Mb[Jc]||(Mb[Jc]=!0,Zb.querySourceFeatures(mb,
Na))}return mb}(W,fa):[]},X.prototype.addSourceType=function(W,fa,za){return X.getSourceType(W)?za(Error('A source type called "'+W+'" already exists.')):(X.setSourceType(W,fa),fa.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:W,url:fa.workerSourceURL},za):za(null,null))},X.prototype.getLight=function(){return this.light.getLight()},X.prototype.setLight=function(W,fa){void 0===fa&&(fa={});this._checkLoaded();var za=this.light.getLight(),Na=!1,ab;for(ab in W)if(!a.deepEqual(W[ab],
za[ab])){Na=!0;break}Na&&(za={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(W,fa),this.light.updateTransitions(za))},X.prototype._validate=function(W,fa,za,Na,ab){return void 0===ab&&(ab={}),(!ab||!1!==ab.validate)&&Cc(this,W.call(a.validateStyle,a.extend({key:fa,style:this.serialize(),value:za,styleSpec:a.styleSpec},Na)))},X.prototype._remove=function(){for(var W in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&
(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[W].setEventedParent(null);for(var fa in this.sourceCaches)this.sourceCaches[fa].clearTiles(),this.sourceCaches[fa].setEventedParent(null);this.imageManager.setEventedParent(null);this.setEventedParent(null);this.dispatcher.remove()},X.prototype._clearSource=function(W){this.sourceCaches[W].clearTiles()},X.prototype._reloadSource=function(W){this.sourceCaches[W].resume();
this.sourceCaches[W].reload()},X.prototype._updateSources=function(W){for(var fa in this.sourceCaches)this.sourceCaches[fa].update(W)},X.prototype._generateCollisionBoxes=function(){for(var W in this.sourceCaches)this._reloadSource(W)},X.prototype._updatePlacement=function(W,fa,za,Na,ab){void 0===ab&&(ab=!1);for(var mb=!1,Mb=!1,Ub={},Zb=0,Jc=this._order;Zb<Jc.length;Zb+=1){var Ic=this._layers[Jc[Zb]];if("symbol"===Ic.type){if(!Ub[Ic.source]){var yc=this.sourceCaches[Ic.source];Ub[Ic.source]=yc.getRenderableIds(!0).map(function(Hc){return yc.getTileByID(Hc)}).sort(function(Hc,
Dc){return Dc.tileID.overscaledZ-Hc.tileID.overscaledZ||(Hc.tileID.isLessThan(Dc.tileID)?-1:1)})}Ic=this.crossTileSymbolIndex.addLayer(Ic,Ub[Ic.source],W.center.lng);mb=mb||Ic}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ab=ab||this._layerOrderChanged||0===za)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),W.zoom))&&(this.pauseablePlacement=new Mc(W,this._order,ab,fa,za,Na,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?
this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ub),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),Mb=!0),mb&&this.pauseablePlacement.placement.setStale()),Mb||mb)for(W=0,fa=this._order;W<fa.length;W+=1)za=this._layers[fa[W]],"symbol"===za.type&&this.placement.updateLayerOpacities(za,Ub[za.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},X.prototype._releaseSymbolFadeTiles=
function(){for(var W in this.sourceCaches)this.sourceCaches[W].releaseSymbolFadeTiles()},X.prototype.getImages=function(W,fa,za){this.imageManager.getImages(fa.icons,za);this._updateTilesForChangedImages();(W=this.sourceCaches[fa.source])&&W.setDependencies(fa.tileID.key,fa.type,fa.icons)},X.prototype.getGlyphs=function(W,fa,za){this.glyphManager.getGlyphs(fa.stacks,za)},X.prototype.getResource=function(W,fa,za){return a.makeRequest(fa,za)},X}(a.Evented);yd.getSourceType=function(U){return lc[U]};
yd.setSourceType=function(U,X){lc[U]=X};yd.registerForPluginStateChange=a.registerForPluginStateChange;var Id=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Fd=ba("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue\x3dint(packedValue);int v0\x3dpackedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity\x3dint(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor\x3ddecode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor\x3ddecode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset\x3dmod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
Ed=ba("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor\x3du_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),ye=ba("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
ze=ba("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dv_data.xy;float extrude_length\x3dlength(extrude);lowp float antialiasblur\x3dv_data.z;float antialiased_blur\x3d-max(blur,antialiasblur);float opacity_t\x3dsmoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t\x3dstroke_width \x3c 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor\x3dopacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center\x3dfloor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position\x3dcircle_center;if (u_scale_with_map) {corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center\x3du_matrix*vec4(circle_center,0,1);corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position\x3du_matrix*vec4(corner_position,0,1);} else {gl_Position\x3du_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur\x3d1.0/u_device_pixel_ratio/(radius+stroke_width);v_data\x3dvec3(extrude.x,extrude.y,antialiasblur);}"),
Ne=ba("void main() {gl_FragColor\x3dvec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),ue=ba("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d\x3d-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val\x3dweight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor\x3dvec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO\x3d1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);float S\x3dsqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude\x3dS*unscaled_extrude;vec2 extrude\x3dv_extrude*radius*u_extrude_scale;vec4 pos\x3dvec4(floor(a_pos*0.5)+extrude,0,1);gl_Position\x3du_matrix*pos;}"),
Ke=ba("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t\x3dtexture2D(u_image,v_pos).r;vec4 color\x3dtexture2D(u_color_ramp,vec2(t,0.5));gl_FragColor\x3dcolor*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),mf=
ba("varying float v_placed;varying float v_notUsed;void main() {float alpha\x3d0.5;gl_FragColor\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {gl_FragColor\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {gl_FragColor*\x3d.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+\x3d(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;}"),
If=ba("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha\x3d0.5*min(v_perspective_ratio,1.0);float stroke_radius\x3d0.9*max(v_perspective_ratio,1.0);float distance_to_center\x3dlength(v_extrude);float distance_to_edge\x3dabs(distance_to_center-v_radius);float opacity_t\x3dsmoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color\x3dmix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor\x3dcolor*alpha*opacity_t;}",
"attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart\x3du_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  \x3du_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/\x3drayStart.w;rayEnd.xyz  /\x3drayEnd.w;highp float t\x3d(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos\x3da_pos;float radius\x3da_radius;float collision\x3da_flags.x;float vertexIdx\x3da_flags.y;vec2 quadVertexOffset\x3dvec2(mix(-1.0,1.0,float(vertexIdx \x3e\x3d2.0)),mix(-1.0,1.0,float(vertexIdx \x3e\x3d1.0 \x26\x26 vertexIdx \x3c\x3d2.0)));vec2 quadVertexExtent\x3dquadVertexOffset*radius;vec3 tilePos\x3dtoTilePosition(quadCenterPos);vec4 clipPos\x3du_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance\x3dclipPos.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor\x3d1.2;v_radius\x3dradius;v_extrude\x3dquadVertexExtent*padding_factor;v_perspective_ratio\x3dcollision_perspective_ratio;v_collision\x3dcollision;gl_Position\x3dvec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),
Xh=ba("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color\x3dtexture2D(u_overlay,v_uv);gl_FragColor\x3dmix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv\x3da_pos/8192.0;gl_Position\x3du_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),mi=ba("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor\x3dcolor*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);}"),Oh=ba("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3doutline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Vf=ba("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);float dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3dmix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;gl_Position\x3du_matrix*vec4(a_pos,0,1);vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
ni=ba("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
Si=ba("varying vec4 v_color;void main() {gl_FragColor\x3dv_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal\x3da_normal_ed.xyz;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);gl_Position\x3du_matrix*vec4(a_pos,t \x3e 0.0 ? height : base,1);float colorvalue\x3dcolor.r*0.2126+color.g*0.7152+color.b*0.0722;v_color\x3dvec4(0.0,0.0,0.0,1.0);vec4 ambientlight\x3dvec4(0.03,0.03,0.03,1.0);color+\x3dambientlight;float directional\x3dclamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+\x3dclamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+\x3dclamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+\x3dclamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*\x3du_opacity;}"),
Ph=ba("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);vec4 mixedColor\x3dmix(color1,color2,u_fade);gl_FragColor\x3dmixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec3 normal\x3da_normal_ed.xyz;float edgedistance\x3da_normal_ed.w;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);float z\x3dt \x3e 0.0 ? height : base;gl_Position\x3du_matrix*vec4(a_pos,z,1);vec2 pos\x3dnormal.x\x3d\x3d1.0 \x26\x26 normal.y\x3d\x3d0.0 \x26\x26 normal.z\x3d\x3d16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting\x3dvec4(0.0,0.0,0.0,1.0);float directional\x3dclamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+\x3dclamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*\x3du_opacity;}"),
zh=ba("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data\x3dtexture2D(u_image,coord)*255.0;data.a\x3d-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon\x3d1.0/u_dimension;float a\x3dgetElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b\x3dgetElevation(v_pos+vec2(0,-epsilon.y),0.0);float c\x3dgetElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d\x3dgetElevation(v_pos+vec2(-epsilon.x,0),0.0);float e\x3dgetElevation(v_pos,0.0);float f\x3dgetElevation(v_pos+vec2(epsilon.x,0),0.0);float g\x3dgetElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h\x3dgetElevation(v_pos+vec2(0,epsilon.y),0.0);float i\x3dgetElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration\x3du_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;vec2 deriv\x3dvec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor\x3dclamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);highp vec2 epsilon\x3d1.0/u_dimension;float scale\x3d(u_dimension.x-2.0)/u_dimension.x;v_pos\x3d(a_texture_pos/8192.0)*scale+epsilon;}"),gh=ba("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel\x3dtexture2D(u_image,v_pos);vec2 deriv\x3d((pixel.rg*2.0)-1.0);float scaleFactor\x3dcos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope\x3datan(1.25*length(deriv)/scaleFactor);float aspect\x3dderiv.x !\x3d0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y \x3e 0.0 ? 1.0 :-1.0);float intensity\x3du_light.x;float azimuth\x3du_light.y+PI;float base\x3d1.875-intensity*1.75;float maxValue\x3d0.5*PI;float scaledSlope\x3dintensity !\x3d0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent\x3dcos(scaledSlope);vec4 accent_color\x3d(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade\x3dabs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color\x3dmix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor\x3daccent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3da_texture_pos/8192.0;}"),Cg=ba("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
Ti=ba("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color\x3dtexture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_lineprogress\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
rg=ba("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a\x3dvec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b\x3dvec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a\x3ddisplay_size_a.y/v_width;float aspect_b\x3ddisplay_size_b.y/v_width;float dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a\x3dmod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b\x3dmod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y\x3d0.5*v_normal.y+0.5;vec2 texel_size\x3d1.0/u_texsize;vec2 pos_a\x3dmix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b\x3dmix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color\x3dmix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor\x3dcolor*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_linesofar\x3da_linesofar;v_width2\x3dvec2(outset,inset);v_width\x3dfloorwidth;}"),
Rh=ba("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a\x3dtexture2D(u_image,v_tex_a).a;float sdfdist_b\x3dtexture2D(u_image,v_tex_b).a;float sdfdist\x3dmix(sdfdist_a,sdfdist_b,u_mix);alpha*\x3dsmoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_tex_a\x3dvec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b\x3dvec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2\x3dvec2(outset,inset);}"),
Ah=ba("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0\x3dtexture2D(u_image0,v_pos0);vec4 color1\x3dtexture2D(u_image1,v_pos1);if (color0.a \x3e 0.0) {color0.rgb\x3dcolor0.rgb/color0.a;}if (color1.a \x3e 0.0) {color1.rgb\x3dcolor1.rgb/color1.a;}vec4 color\x3dmix(color0,color1,u_fade_t);color.a*\x3du_opacity;vec3 rgb\x3dcolor.rgb;rgb\x3dvec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average\x3d(color.r+color.g+color.b)/3.0;rgb+\x3d(average-rgb)*u_saturation_factor;rgb\x3d(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec\x3dvec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec\x3dvec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor\x3dvec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos0\x3d(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1\x3d(v_pos0*u_scale_parent)+u_tl_parent;}"),Qh=ba("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha\x3dopacity*v_fade_opacity;gl_FragColor\x3dtexture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;vec2 a_minFontScale\x3da_pixeloffset.zw/256.0;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
hh=ba("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;vec2 tex\x3dv_data0.xy;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fade_opacity\x3dv_data1[2];float fontScale\x3du_is_text ? size/24.0 : size;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0\x3da_tex/u_texsize;v_data1\x3dvec3(gamma_scale,size,interpolated_fade_opacity);}"),
Sh=ba("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity\x3dv_data1[2];if (v_data1.w\x3d\x3dICON) {vec2 tex_icon\x3dv_data0.zw;lowp float alpha\x3dopacity*fade_opacity;gl_FragColor\x3dtexture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\nreturn;}vec2 tex\x3dv_data0.xy;float EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fontScale\x3dsize/24.0;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);float is_sdf\x3da_size[0]-2.0*a_size_min;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3dsize/24.0;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy\x3da_tex/u_texsize;v_data0.zw\x3da_tex/u_texsize_icon;v_data1\x3dvec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),
Th=Object.freeze({__proto__:null,prelude:Fd,background:Ed,backgroundPattern:ye,circle:ze,clippingMask:Ne,heatmap:ue,heatmapTexture:Ke,collisionBox:mf,collisionCircle:If,debug:Xh,fill:mi,fillOutline:Oh,fillOutlinePattern:Vf,fillPattern:ni,fillExtrusion:Si,fillExtrusionPattern:Ph,hillshadePrepare:zh,hillshade:gh,line:Cg,lineGradient:Ti,linePattern:rg,lineSDF:Rh,raster:Ah,symbolIcon:Qh,symbolSDF:hh,symbolTextAndIcon:Sh}),Bh=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=
[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};Bh.prototype.bind=function(U,X,W,fa,za,Na,ab,mb){this.context=U;for(var Mb=this.boundPaintVertexBuffers.length!==fa.length,Ub=0;!Mb&&Ub<fa.length;Ub++)this.boundPaintVertexBuffers[Ub]!==fa[Ub]&&(Mb=!0);U.extVertexArrayObject&&this.vao&&this.boundProgram===X&&this.boundLayoutVertexBuffer===W&&!Mb&&this.boundIndexBuffer===za&&this.boundVertexOffset===Na&&this.boundDynamicVertexBuffer===ab&&this.boundDynamicVertexBuffer2===
mb?(U.bindVertexArrayOES.set(this.vao),ab&&ab.bind(),za&&za.dynamicDraw&&za.bind(),mb&&mb.bind()):this.freshBind(X,W,fa,za,Na,ab,mb)};Bh.prototype.freshBind=function(U,X,W,fa,za,Na,ab){var mb=U.numAttributes,Mb=this.context,Ub=Mb.gl;if(Mb.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Mb.extVertexArrayObject.createVertexArrayOES(),Mb.bindVertexArrayOES.set(this.vao),this.boundProgram=U,this.boundLayoutVertexBuffer=X,this.boundPaintVertexBuffers=W,this.boundIndexBuffer=fa,this.boundVertexOffset=
za,this.boundDynamicVertexBuffer=Na,this.boundDynamicVertexBuffer2=ab;else{var Zb=Mb.currentNumAttributes||0;for(var Jc=mb;Jc<Zb;Jc++)Ub.disableVertexAttribArray(Jc)}X.enableAttributes(Ub,U);for(Zb=0;Zb<W.length;Zb+=1)W[Zb].enableAttributes(Ub,U);Na&&Na.enableAttributes(Ub,U);ab&&ab.enableAttributes(Ub,U);X.bind();X.setVertexAttribPointers(Ub,U,za);for(X=0;X<W.length;X+=1)Zb=W[X],Zb.bind(),Zb.setVertexAttribPointers(Ub,U,za);Na&&(Na.bind(),Na.setVertexAttribPointers(Ub,U,za));fa&&fa.bind();ab&&(ab.bind(),
ab.setVertexAttribPointers(Ub,U,za));Mb.currentNumAttributes=mb};Bh.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Oe=function(U,X,W,fa,za){var Na=U.gl;this.program=Na.createProgram();var ab=W?W.defines():[];za&&ab.push("#define OVERDRAW_INSPECTOR;");za=ab.concat(Fd.fragmentSource,X.fragmentSource).join("\n");ab=ab.concat(Fd.vertexSource,X.vertexSource).join("\n");X=Na.createShader(Na.FRAGMENT_SHADER);if(Na.isContextLost())this.failedToCreate=
!0;else if(Na.shaderSource(X,za),Na.compileShader(X),Na.attachShader(this.program,X),za=Na.createShader(Na.VERTEX_SHADER),Na.isContextLost())this.failedToCreate=!0;else{Na.shaderSource(za,ab);Na.compileShader(za);Na.attachShader(this.program,za);ab=W?W.layoutAttributes:[];for(var mb=0;mb<ab.length;mb++)Na.bindAttribLocation(this.program,mb,ab[mb].name);Na.linkProgram(this.program);Na.deleteShader(za);Na.deleteShader(X);this.numAttributes=Na.getProgramParameter(this.program,Na.ACTIVE_ATTRIBUTES);this.attributes=
{};X={};for(za=0;za<this.numAttributes;za++)(ab=Na.getActiveAttrib(this.program,za))&&(this.attributes[ab.name]=Na.getAttribLocation(this.program,ab.name));za=Na.getProgramParameter(this.program,Na.ACTIVE_UNIFORMS);for(ab=0;ab<za;ab++)(mb=Na.getActiveUniform(this.program,ab))&&(X[mb.name]=Na.getUniformLocation(this.program,mb.name));this.fixedUniforms=fa(U,X);this.binderUniforms=W?W.getUniforms(U,X):[]}};Oe.prototype.draw=function(U,X,W,fa,za,Na,ab,mb,Mb,Ub,Zb,Jc,Ic,yc,Hc,Dc){var Xb,va=U.gl;if(!this.failedToCreate){for(var Da in U.program.set(this.program),
U.setDepthMode(W),U.setStencilMode(fa),U.setColorMode(za),U.setCullFace(Na),this.fixedUniforms)this.fixedUniforms[Da].set(ab[Da]);yc&&yc.setUniforms(U,this.binderUniforms,Jc,{zoom:Ic});W=(Xb={},Xb[va.LINES]=2,Xb[va.TRIANGLES]=3,Xb[va.LINE_STRIP]=1,Xb)[X];Xb=0;for(Zb=Zb.get();Xb<Zb.length;Xb+=1)fa=Zb[Xb],za=fa.vaos||(fa.vaos={}),(za[mb]||(za[mb]=new Bh)).bind(U,this,Mb,yc?yc.getPaintVertexBuffers():[],Ub,fa.vertexOffset,Hc,Dc),va.drawElements(X,fa.primitiveLength*W,va.UNSIGNED_SHORT,fa.primitiveOffset*
W*2)}};var kg=function(U,X,W,fa){var za=X.style.light,Na=za.properties.get("position");Na=[Na.x,Na.y,Na.z];var ab=a.create$1();"viewport"===za.properties.get("anchor")&&a.fromRotation(ab,-X.transform.angle);a.transformMat3(Na,Na,ab);X=za.properties.get("color");return{u_matrix:U,u_lightpos:Na,u_lightintensity:za.properties.get("intensity"),u_lightcolor:[X.r,X.g,X.b],u_vertical_gradient:+W,u_opacity:fa}},uh=function(U,X,W,fa){var za=U.transform;if("map"===fa.paint.get("circle-pitch-alignment")){var Na=
Q(W,1,za.zoom);var ab=!0;Na=[Na,Na]}else ab=!1,Na=za.pixelsToGLUnits;return{u_camera_to_center_distance:za.cameraToCenterDistance,u_scale_with_map:+("map"===fa.paint.get("circle-pitch-scale")),u_matrix:U.translatePosMatrix(X.posMatrix,W,fa.paint.get("circle-translate"),fa.paint.get("circle-translate-anchor")),u_pitch_with_map:+ab,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:Na}},vh=function(U,X,W){return void 0===W&&(W=1),{u_matrix:U,u_color:X,u_overlay:0,u_overlay_scale:W}},Ui=
function(U,X,W,fa){return{u_matrix:U,u_extrude_scale:Q(X,1,W),u_intensity:fa}},Ch=function(U,X,W){var fa=U.transform;return{u_matrix:ea(U,X,W),u_ratio:1/Q(X,1,fa.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/fa.pixelsToGLUnits[0],1/fa.pixelsToGLUnits[1]]}},Ai,sj=function(U,X,W,fa,za,Na,ab,mb,Mb,Ub){var Zb=za.transform;return{u_is_size_zoom_constant:+("constant"===U||"source"===U),u_is_size_feature_constant:+("constant"===U||"camera"===U),u_size_t:X?X.uSizeT:0,u_size:X?
X.uSize:0,u_camera_to_center_distance:Zb.cameraToCenterDistance,u_pitch:Zb.pitch/360*2*Math.PI,u_rotate_symbol:+W,u_aspect_ratio:Zb.width/Zb.height,u_fade_change:za.options.fadeDuration?za.symbolFadeChange:1,u_matrix:Na,u_label_plane_matrix:ab,u_coord_matrix:mb,u_is_text:+Mb,u_pitch_with_map:+fa,u_texsize:Ub,u_texture:0}},nf=function(U,X,W,fa,za,Na,ab,mb,Mb,Ub,Zb){var Jc=za.transform;return a.extend(sj(U,X,W,fa,za,Na,ab,mb,Mb,Ub),{u_gamma_scale:fa?Math.cos(Jc._pitch)*Jc.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,
u_is_halo:+Zb})},tj=function(U,X,W,fa,za,Na,ab,mb,Mb,Ub){return a.extend(nf(U,X,W,fa,za,Na,ab,mb,!0,Mb,!0),{u_texsize_icon:Ub,u_texture_icon:1})},Vh={fillExtrusion:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_lightpos:new a.Uniform3f(U,X.u_lightpos),u_lightintensity:new a.Uniform1f(U,X.u_lightintensity),u_lightcolor:new a.Uniform3f(U,X.u_lightcolor),u_vertical_gradient:new a.Uniform1f(U,X.u_vertical_gradient),u_opacity:new a.Uniform1f(U,X.u_opacity)}},fillExtrusionPattern:function(U,
X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_lightpos:new a.Uniform3f(U,X.u_lightpos),u_lightintensity:new a.Uniform1f(U,X.u_lightintensity),u_lightcolor:new a.Uniform3f(U,X.u_lightcolor),u_vertical_gradient:new a.Uniform1f(U,X.u_vertical_gradient),u_height_factor:new a.Uniform1f(U,X.u_height_factor),u_image:new a.Uniform1i(U,X.u_image),u_texsize:new a.Uniform2f(U,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(U,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(U,X.u_pixel_coord_lower),
u_scale:new a.Uniform3f(U,X.u_scale),u_fade:new a.Uniform1f(U,X.u_fade),u_opacity:new a.Uniform1f(U,X.u_opacity)}},fill:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix)}},fillPattern:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_image:new a.Uniform1i(U,X.u_image),u_texsize:new a.Uniform2f(U,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(U,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(U,X.u_pixel_coord_lower),u_scale:new a.Uniform3f(U,X.u_scale),
u_fade:new a.Uniform1f(U,X.u_fade)}},fillOutline:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_world:new a.Uniform2f(U,X.u_world)}},fillOutlinePattern:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_world:new a.Uniform2f(U,X.u_world),u_image:new a.Uniform1i(U,X.u_image),u_texsize:new a.Uniform2f(U,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(U,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(U,X.u_pixel_coord_lower),u_scale:new a.Uniform3f(U,
X.u_scale),u_fade:new a.Uniform1f(U,X.u_fade)}},circle:function(U,X){return{u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(U,X.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(U,X.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(U,X.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(U,X.u_matrix)}},collisionBox:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),
u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(U,X.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(U,X.u_extrude_scale),u_overscale_factor:new a.Uniform1f(U,X.u_overscale_factor)}},collisionCircle:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_inv_matrix:new a.UniformMatrix4f(U,X.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(U,
X.u_viewport_size)}},debug:function(U,X){return{u_color:new a.UniformColor(U,X.u_color),u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_overlay:new a.Uniform1i(U,X.u_overlay),u_overlay_scale:new a.Uniform1f(U,X.u_overlay_scale)}},clippingMask:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix)}},heatmap:function(U,X){return{u_extrude_scale:new a.Uniform1f(U,X.u_extrude_scale),u_intensity:new a.Uniform1f(U,X.u_intensity),u_matrix:new a.UniformMatrix4f(U,X.u_matrix)}},heatmapTexture:function(U,
X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_world:new a.Uniform2f(U,X.u_world),u_image:new a.Uniform1i(U,X.u_image),u_color_ramp:new a.Uniform1i(U,X.u_color_ramp),u_opacity:new a.Uniform1f(U,X.u_opacity)}},hillshade:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_image:new a.Uniform1i(U,X.u_image),u_latrange:new a.Uniform2f(U,X.u_latrange),u_light:new a.Uniform2f(U,X.u_light),u_shadow:new a.UniformColor(U,X.u_shadow),u_highlight:new a.UniformColor(U,X.u_highlight),
u_accent:new a.UniformColor(U,X.u_accent)}},hillshadePrepare:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_image:new a.Uniform1i(U,X.u_image),u_dimension:new a.Uniform2f(U,X.u_dimension),u_zoom:new a.Uniform1f(U,X.u_zoom),u_maxzoom:new a.Uniform1f(U,X.u_maxzoom),u_unpack:new a.Uniform4f(U,X.u_unpack)}},line:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_ratio:new a.Uniform1f(U,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(U,
X.u_units_to_pixels)}},lineGradient:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_ratio:new a.Uniform1f(U,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(U,X.u_units_to_pixels),u_image:new a.Uniform1i(U,X.u_image)}},linePattern:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_texsize:new a.Uniform2f(U,X.u_texsize),u_ratio:new a.Uniform1f(U,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),
u_image:new a.Uniform1i(U,X.u_image),u_units_to_pixels:new a.Uniform2f(U,X.u_units_to_pixels),u_scale:new a.Uniform3f(U,X.u_scale),u_fade:new a.Uniform1f(U,X.u_fade)}},lineSDF:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_ratio:new a.Uniform1f(U,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(U,X.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(U,X.u_patternscale_a),u_patternscale_b:new a.Uniform2f(U,X.u_patternscale_b),
u_sdfgamma:new a.Uniform1f(U,X.u_sdfgamma),u_image:new a.Uniform1i(U,X.u_image),u_tex_y_a:new a.Uniform1f(U,X.u_tex_y_a),u_tex_y_b:new a.Uniform1f(U,X.u_tex_y_b),u_mix:new a.Uniform1f(U,X.u_mix)}},raster:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_tl_parent:new a.Uniform2f(U,X.u_tl_parent),u_scale_parent:new a.Uniform1f(U,X.u_scale_parent),u_buffer_scale:new a.Uniform1f(U,X.u_buffer_scale),u_fade_t:new a.Uniform1f(U,X.u_fade_t),u_opacity:new a.Uniform1f(U,X.u_opacity),u_image0:new a.Uniform1i(U,
X.u_image0),u_image1:new a.Uniform1i(U,X.u_image1),u_brightness_low:new a.Uniform1f(U,X.u_brightness_low),u_brightness_high:new a.Uniform1f(U,X.u_brightness_high),u_saturation_factor:new a.Uniform1f(U,X.u_saturation_factor),u_contrast_factor:new a.Uniform1f(U,X.u_contrast_factor),u_spin_weights:new a.Uniform3f(U,X.u_spin_weights)}},symbolIcon:function(U,X){return{u_is_size_zoom_constant:new a.Uniform1i(U,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(U,X.u_is_size_feature_constant),
u_size_t:new a.Uniform1f(U,X.u_size_t),u_size:new a.Uniform1f(U,X.u_size),u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),u_pitch:new a.Uniform1f(U,X.u_pitch),u_rotate_symbol:new a.Uniform1i(U,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(U,X.u_aspect_ratio),u_fade_change:new a.Uniform1f(U,X.u_fade_change),u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(U,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(U,X.u_coord_matrix),
u_is_text:new a.Uniform1i(U,X.u_is_text),u_pitch_with_map:new a.Uniform1i(U,X.u_pitch_with_map),u_texsize:new a.Uniform2f(U,X.u_texsize),u_texture:new a.Uniform1i(U,X.u_texture)}},symbolSDF:function(U,X){return{u_is_size_zoom_constant:new a.Uniform1i(U,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(U,X.u_is_size_feature_constant),u_size_t:new a.Uniform1f(U,X.u_size_t),u_size:new a.Uniform1f(U,X.u_size),u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),
u_pitch:new a.Uniform1f(U,X.u_pitch),u_rotate_symbol:new a.Uniform1i(U,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(U,X.u_aspect_ratio),u_fade_change:new a.Uniform1f(U,X.u_fade_change),u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(U,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(U,X.u_coord_matrix),u_is_text:new a.Uniform1i(U,X.u_is_text),u_pitch_with_map:new a.Uniform1i(U,X.u_pitch_with_map),u_texsize:new a.Uniform2f(U,X.u_texsize),u_texture:new a.Uniform1i(U,
X.u_texture),u_gamma_scale:new a.Uniform1f(U,X.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(U,X.u_is_halo)}},symbolTextAndIcon:function(U,X){return{u_is_size_zoom_constant:new a.Uniform1i(U,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(U,X.u_is_size_feature_constant),u_size_t:new a.Uniform1f(U,X.u_size_t),u_size:new a.Uniform1f(U,X.u_size),u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),
u_pitch:new a.Uniform1f(U,X.u_pitch),u_rotate_symbol:new a.Uniform1i(U,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(U,X.u_aspect_ratio),u_fade_change:new a.Uniform1f(U,X.u_fade_change),u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(U,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(U,X.u_coord_matrix),u_is_text:new a.Uniform1i(U,X.u_is_text),u_pitch_with_map:new a.Uniform1i(U,X.u_pitch_with_map),u_texsize:new a.Uniform2f(U,X.u_texsize),u_texsize_icon:new a.Uniform2f(U,
X.u_texsize_icon),u_texture:new a.Uniform1i(U,X.u_texture),u_texture_icon:new a.Uniform1i(U,X.u_texture_icon),u_gamma_scale:new a.Uniform1f(U,X.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(U,X.u_is_halo)}},background:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_opacity:new a.Uniform1f(U,X.u_opacity),u_color:new a.UniformColor(U,X.u_color)}},backgroundPattern:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),
u_opacity:new a.Uniform1f(U,X.u_opacity),u_image:new a.Uniform1i(U,X.u_image),u_pattern_tl_a:new a.Uniform2f(U,X.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(U,X.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(U,X.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(U,X.u_pattern_br_b),u_texsize:new a.Uniform2f(U,X.u_texsize),u_mix:new a.Uniform1f(U,X.u_mix),u_pattern_size_a:new a.Uniform2f(U,X.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(U,X.u_pattern_size_b),u_scale_a:new a.Uniform1f(U,X.u_scale_a),
u_scale_b:new a.Uniform1f(U,X.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(U,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(U,X.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(U,X.u_tile_units_to_pixels)}}},Lj=a.identity(new Float32Array(16)),Uh=new a.Color(1,0,0,1),ih=new a.Color(0,1,0,1),Dg=new a.Color(0,0,1,1),Vi=new a.Color(1,0,1,1),cg=new a.Color(0,1,1,1),Yh={symbol:function(U,X,W,fa,za){if("translucent"===U.renderPass){var Na=Sc.disabled,ab=U.colorModeForRenderPass();
if(W.layout.get("text-variable-anchor")){var mb=W.layout.get("text-rotation-alignment"),Mb=W.layout.get("text-pitch-alignment"),Ub=U.transform;mb="map"===mb;Mb="map"===Mb;for(var Zb=0;Zb<fa.length;Zb+=1){var Jc=fa[Zb],Ic=X.getTile(Jc),yc=Ic.getBucket(W);if(yc&&yc.text&&yc.text.segments.get().length){var Hc=a.evaluateSizeForZoom(yc.textSizeData,Ub.zoom),Dc=Q(Ic,1,U.transform.zoom),Xb=B(Jc.posMatrix,Mb,mb,U.transform,Dc),va="none"!==W.layout.get("icon-text-fit")&&yc.hasIconData();if(Hc){Dc=mb;var Da=
Mb,Oa=za,bb=a.symbolSize,nb=Ub;Jc=Jc.posMatrix;var Kb=Math.pow(2,Ub.zoom-Ic.tileID.overscaledZ),Pb=Hc,pc=va,hc=yc.text.placedSymbolArray;Hc=yc.text.dynamicLayoutVertexArray;va=yc.icon.dynamicLayoutVertexArray;Ic={};Hc.clear();for(var kc=0;kc<hc.length;kc++){var Xc=hc.get(kc),fd=Xc.hidden||!Xc.crossTileID||yc.allowVerticalPlacement&&!Xc.placedOrientation?null:Oa[Xc.crossTileID];if(fd){var rd=new a.Point(Xc.anchorX,Xc.anchorY),zd=G(rd,Da?Jc:Xb),Hd=.5+nb.cameraToCenterDistance/zd.signedDistanceFromCamera*
.5,Bd=bb.evaluateSizeForFeature(yc.textSizeData,Pb,Xc)*Hd/a.ONE_EM;Da&&(Bd*=yc.tilePixelRatio/Kb);Hd=fd.anchor;var Pd=fd.width,fe=fd.height,Xd=fd.textOffset;fd=fd.textBoxScale;var oe=a.getAnchorAlignment(Hd);Pd*=-(oe.horizontalAlign-.5);fe*=-(oe.verticalAlign-.5);Hd=a.evaluateVariableOffset(Hd,Xd);Hd=new a.Point((Pd/fd+Hd[0])*Bd,(fe/fd+Hd[1])*Bd);rd=Da?G(rd.add(Hd),Xb).point:zd.point.add(Dc?Hd.rotate(-nb.angle):Hd);zd=yc.allowVerticalPlacement&&Xc.placedOrientation===a.WritingMode.vertical?Math.PI/
2:0;for(Hd=0;Hd<Xc.numGlyphs;Hd++)a.addDynamicAttributes(Hc,rd,zd);pc&&0<=Xc.associatedIconIndex&&(Ic[Xc.associatedIconIndex]={shiftedAnchor:rd,angle:zd})}else N(Xc.numGlyphs,Hc)}if(pc){va.clear();Dc=yc.icon.placedSymbolArray;for(Da=0;Da<Dc.length;Da++)if(Oa=Dc.get(Da),Oa.hidden)N(Oa.numGlyphs,va);else if(bb=Ic[Da])for(nb=0;nb<Oa.numGlyphs;nb++)a.addDynamicAttributes(va,bb.shiftedAnchor,bb.angle);else N(Oa.numGlyphs,va);yc.icon.dynamicLayoutVertexBuffer.updateData(va)}yc.text.dynamicLayoutVertexBuffer.updateData(Hc)}}}}0!==
W.paint.get("icon-opacity").constantOr(1)&&ca(U,X,W,fa,!1,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),W.layout.get("icon-rotation-alignment"),W.layout.get("icon-pitch-alignment"),W.layout.get("icon-keep-upright"),Na,ab);0!==W.paint.get("text-opacity").constantOr(1)&&ca(U,X,W,fa,!0,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),W.layout.get("text-keep-upright"),Na,ab);X.map.showCollisionBoxes&&
(da(U,X,W,fa,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),!0),da(U,X,W,fa,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),!1))}},circle:function(U,X,W,fa){if("translucent"===U.renderPass){var za=W.paint.get("circle-opacity"),Na=W.paint.get("circle-stroke-width"),ab=W.paint.get("circle-stroke-opacity"),mb=void 0!==W.layout.get("circle-sort-key").constantOr(1);if(0!==za.constantOr(1)||0!==Na.constantOr(1)&&0!==ab.constantOr(1)){za=U.context;Na=za.gl;ab=U.depthModeForSublayer(0,
Rd.ReadOnly);for(var Mb=Sc.disabled,Ub=U.colorModeForRenderPass(),Zb=[],Jc=0;Jc<fa.length;Jc++){var Ic=fa[Jc],yc=X.getTile(Ic),Hc=yc.getBucket(W);if(Hc){var Dc=Hc.programConfigurations.get(W.id);Ic={programConfiguration:Dc,program:U.useProgram("circle",Dc),layoutVertexBuffer:Hc.layoutVertexBuffer,indexBuffer:Hc.indexBuffer,uniformValues:uh(U,Ic,yc,W)};if(mb)for(yc=0,Hc=Hc.segments.get();yc<Hc.length;yc+=1)Dc=Hc[yc],Zb.push({segments:new a.SegmentVector([Dc]),sortKey:Dc.sortKey,state:Ic});else Zb.push({segments:Hc.segments,
sortKey:0,state:Ic})}}mb&&Zb.sort(function(Xb,va){return Xb.sortKey-va.sortKey});for(X=0;X<Zb.length;X+=1)fa=Zb[X],mb=fa.state,mb.program.draw(za,Na.TRIANGLES,ab,Mb,Ub,Gd.disabled,mb.uniformValues,W.id,mb.layoutVertexBuffer,mb.indexBuffer,fa.segments,W.paint,U.transform.zoom,mb.programConfiguration)}}},heatmap:function(U,X,W,fa){if(0!==W.paint.get("heatmap-opacity"))if("offscreen"===U.renderPass){var za=U.context,Na=za.gl,ab=Sc.disabled,mb=new md([Na.ONE,Na.ONE],a.Color.transparent,[!0,!0,!0,!0]);
!function(yc,Hc,Dc){var Xb=yc.gl;yc.activeTexture.set(Xb.TEXTURE1);yc.viewport.set([0,0,Hc.width/4,Hc.height/4]);var va=Dc.heatmapFbo;if(va)Xb.bindTexture(Xb.TEXTURE_2D,va.colorAttachment.get()),yc.bindFramebuffer.set(va.framebuffer);else{var Da=Xb.createTexture();Xb.bindTexture(Xb.TEXTURE_2D,Da);Xb.texParameteri(Xb.TEXTURE_2D,Xb.TEXTURE_WRAP_S,Xb.CLAMP_TO_EDGE);Xb.texParameteri(Xb.TEXTURE_2D,Xb.TEXTURE_WRAP_T,Xb.CLAMP_TO_EDGE);Xb.texParameteri(Xb.TEXTURE_2D,Xb.TEXTURE_MIN_FILTER,Xb.LINEAR);Xb.texParameteri(Xb.TEXTURE_2D,
Xb.TEXTURE_MAG_FILTER,Xb.LINEAR);Dc=va=Dc.heatmapFbo=yc.createFramebuffer(Hc.width/4,Hc.height/4,!1);Xb=yc.gl;Xb.texImage2D(Xb.TEXTURE_2D,0,Xb.RGBA,Hc.width/4,Hc.height/4,0,Xb.RGBA,yc.extRenderToTextureHalfFloat?yc.extTextureHalfFloat.HALF_FLOAT_OES:Xb.UNSIGNED_BYTE,null);Dc.colorAttachment.set(Da)}}(za,U,W);za.clear({color:a.Color.transparent});for(var Mb=0;Mb<fa.length;Mb++){var Ub=fa[Mb];if(!X.hasRenderableParent(Ub)){var Zb=X.getTile(Ub),Jc=Zb.getBucket(W);if(Jc){var Ic=Jc.programConfigurations.get(W.id);
U.useProgram("heatmap",Ic).draw(za,Na.TRIANGLES,Rd.disabled,ab,mb,Gd.disabled,Ui(Ub.posMatrix,Zb,U.transform.zoom,W.paint.get("heatmap-intensity")),W.id,Jc.layoutVertexBuffer,Jc.indexBuffer,Jc.segments,W.paint,U.transform.zoom,Ic)}}}za.viewport.set([0,0,U.width,U.height])}else"translucent"===U.renderPass&&(U.context.setColorMode(U.colorModeForRenderPass()),function(yc,Hc){var Dc=yc.context,Xb=Dc.gl,va=Hc.heatmapFbo;if(va){Dc.activeTexture.set(Xb.TEXTURE0);Xb.bindTexture(Xb.TEXTURE_2D,va.colorAttachment.get());
Dc.activeTexture.set(Xb.TEXTURE1);(va=Hc.colorRampTexture)||(va=Hc.colorRampTexture=new a.Texture(Dc,Hc.colorRamp,Xb.RGBA));va.bind(Xb.LINEAR,Xb.CLAMP_TO_EDGE);va=yc.useProgram("heatmapTexture");var Da=va.draw;Xb=Xb.TRIANGLES;var Oa=Rd.disabled,bb=Sc.disabled,nb=yc.colorModeForRenderPass(),Kb=Gd.disabled;var Pb=a.create();a.ortho(Pb,0,yc.width,yc.height,0,0,1);var pc=yc.context.gl;Pb={u_matrix:Pb,u_world:[pc.drawingBufferWidth,pc.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Hc.paint.get("heatmap-opacity")};
Da.call(va,Dc,Xb,Oa,bb,nb,Kb,Pb,Hc.id,yc.viewportBuffer,yc.quadTriangleIndexBuffer,yc.viewportSegments,Hc.paint,yc.transform.zoom)}}(U,W))},line:function(U,X,W,fa){if("translucent"===U.renderPass){var za=W.paint.get("line-opacity"),Na=W.paint.get("line-width");if(0!==za.constantOr(1)&&0!==Na.constantOr(1)){za=U.depthModeForSublayer(0,Rd.ReadOnly);Na=U.colorModeForRenderPass();var ab=W.paint.get("line-dasharray"),mb=W.paint.get("line-pattern"),Mb=mb.constantOr(1),Ub=W.paint.get("line-gradient"),Zb=
W.getCrossfadeParameters(),Jc=Mb?"linePattern":ab?"lineSDF":Ub?"lineGradient":"line",Ic=U.context,yc=Ic.gl,Hc=!0;if(Ub){Ic.activeTexture.set(yc.TEXTURE0);var Dc=W.gradientTexture;if(!W.gradient)return;Dc||(Dc=W.gradientTexture=new a.Texture(Ic,W.gradient,yc.RGBA));Dc.bind(yc.LINEAR,yc.CLAMP_TO_EDGE)}for(Dc=0;Dc<fa.length;Dc+=1){var Xb=fa[Dc],va=X.getTile(Xb);if(!Mb||va.patternsLoaded()){var Da=va.getBucket(W);if(Da){var Oa=Da.programConfigurations.get(W.id),bb=U.context.program.get(),nb=U.useProgram(Jc,
Oa);Hc=Hc||nb.program!==bb;var Kb=mb.constantOr(null);if(Kb&&va.imageAtlas){var Pb=va.imageAtlas;bb=Pb.patternPositions[Kb.to.toString()];Kb=Pb.patternPositions[Kb.from.toString()];bb&&Kb&&Oa.setConstantPatternPositions(bb,Kb)}if(Mb){bb=U;Kb=va;Pb=W;var pc=Zb,hc=bb.transform,kc=1/Q(Kb,1,hc.tileZoom);bb={u_matrix:ea(bb,Kb,Pb),u_texsize:Kb.imageAtlasTexture.size,u_ratio:1/Q(Kb,1,hc.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[kc,pc.fromScale,pc.toScale],u_fade:pc.t,u_units_to_pixels:[1/
hc.pixelsToGLUnits[0],1/hc.pixelsToGLUnits[1]]}}else if(ab){bb=U;Kb=va;Pb=W;var Xc=ab;pc=Zb;hc=bb.lineAtlas;kc=1/Q(Kb,1,bb.transform.tileZoom);var fd="round"===Pb.layout.get("line-cap"),rd=hc.getDash(Xc.from,fd);Xc=hc.getDash(Xc.to,fd);fd=rd.width*pc.fromScale;var zd=Xc.width*pc.toScale;bb=a.extend(Ch(bb,Kb,Pb),{u_patternscale_a:[kc/fd,-rd.height/2],u_patternscale_b:[kc/zd,-Xc.height/2],u_sdfgamma:hc.width/(256*Math.min(fd,zd)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:rd.y,u_tex_y_b:Xc.y,
u_mix:pc.t})}else bb=Ub?a.extend(Ch(U,va,W),{u_image:0}):Ch(U,va,W);Mb?(Ic.activeTexture.set(yc.TEXTURE0),va.imageAtlasTexture.bind(yc.LINEAR,yc.CLAMP_TO_EDGE),Oa.updatePaintBuffers(Zb)):ab&&(Hc||U.lineAtlas.dirty)&&(Ic.activeTexture.set(yc.TEXTURE0),U.lineAtlas.bind(Ic));nb.draw(Ic,yc.TRIANGLES,za,U.stencilModeForClipping(Xb),Na,Gd.disabled,bb,W.id,Da.layoutVertexBuffer,Da.indexBuffer,Da.segments,W.paint,U.transform.zoom,Oa);Hc=!1}}}}}},fill:function(U,X,W,fa){var za=W.paint.get("fill-color"),Na=
W.paint.get("fill-opacity");if(0!==Na.constantOr(1)){var ab=U.colorModeForRenderPass(),mb=W.paint.get("fill-pattern");za=U.opaquePassEnabledForLayer()&&!mb.constantOr(1)&&1===za.constantOr(a.Color.transparent).a&&1===Na.constantOr(0)?"opaque":"translucent";U.renderPass===za&&(za=U.depthModeForSublayer(1,"opaque"===U.renderPass?Rd.ReadWrite:Rd.ReadOnly),pa(U,X,W,fa,za,ab,!1));"translucent"===U.renderPass&&W.paint.get("fill-antialias")&&(za=U.depthModeForSublayer(W.getPaintProperty("fill-outline-color")?
2:0,Rd.ReadOnly),pa(U,X,W,fa,za,ab,!0))}},"fill-extrusion":function(U,X,W,fa){var za=W.paint.get("fill-extrusion-opacity");if(0!==za&&"translucent"===U.renderPass){var Na=new Rd(U.context.gl.LEQUAL,Rd.ReadWrite,U.depthRangeFor3D);1!==za||W.paint.get("fill-extrusion-pattern").constantOr(1)?(qa(U,X,W,fa,Na,Sc.disabled,md.disabled),qa(U,X,W,fa,Na,U.stencilModeFor3D(),U.colorModeForRenderPass())):(za=U.colorModeForRenderPass(),qa(U,X,W,fa,Na,Sc.disabled,za))}},hillshade:function(U,X,W,fa){if("offscreen"===
U.renderPass||"translucent"===U.renderPass){var za=U.context,Na=X.getSource().maxzoom,ab=U.depthModeForSublayer(0,Rd.ReadOnly),mb=U.colorModeForRenderPass(),Mb="translucent"===U.renderPass?U.stencilConfigForOverlap(fa):[{},fa];fa=Mb[0];var Ub=0;for(Mb=Mb[1];Ub<Mb.length;Ub+=1){var Zb=Mb[Ub],Jc=X.getTile(Zb);if(Jc.needsHillshadePrepare&&"offscreen"===U.renderPass){var Ic=U,yc=Jc,Hc=W;Zb=Na;var Dc=ab;Jc=Sc.disabled;var Xb=mb,va=Ic.context,Da=va.gl,Oa=yc.dem;if(Oa&&Oa.data){var bb=Oa.dim,nb=Oa.stride,
Kb=Oa.getPixels();(va.activeTexture.set(Da.TEXTURE1),va.pixelStoreUnpackPremultiplyAlpha.set(!1),yc.demTexture=yc.demTexture||Ic.getTileTexture(nb),yc.demTexture)?(nb=yc.demTexture,nb.update(Kb,{premultiply:!1}),nb.bind(Da.NEAREST,Da.CLAMP_TO_EDGE)):(yc.demTexture=new a.Texture(va,Kb,Da.RGBA,{premultiply:!1}),yc.demTexture.bind(Da.NEAREST,Da.CLAMP_TO_EDGE));va.activeTexture.set(Da.TEXTURE0);Kb=yc.fbo;Kb||(nb=new a.Texture(va,{width:bb,height:bb,data:null},Da.RGBA),nb.bind(Da.LINEAR,Da.CLAMP_TO_EDGE),
(Kb=yc.fbo=va.createFramebuffer(bb,bb,!0)).colorAttachment.set(nb.texture));va.bindFramebuffer.set(Kb.framebuffer);va.viewport.set([0,0,bb,bb]);bb=Ic.useProgram("hillshadePrepare");Kb=bb.draw;Da=Da.TRIANGLES;nb=Gd.disabled;var Pb=yc.tileID,pc=Oa.stride,hc=a.create();Zb=(a.ortho(hc,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(hc,hc,[0,-a.EXTENT,0]),{u_matrix:hc,u_image:1,u_dimension:[pc,pc],u_zoom:Pb.overscaledZ,u_maxzoom:Zb,u_unpack:Oa.getUnpackVector()});Kb.call(bb,va,Da,Dc,Jc,Xb,nb,Zb,Hc.id,Ic.rasterBoundsBuffer,
Ic.quadTriangleIndexBuffer,Ic.rasterBoundsSegments);yc.needsHillshadePrepare=!1}}else if("translucent"===U.renderPass&&(Hc=yc=Ic=void 0,Dc=U,va=Jc,Jc=W,Xb=ab,Zb=fa[Zb.overscaledZ],Oa=mb,Da=Dc.context,bb=Da.gl,nb=va.fbo)){Kb=Dc.useProgram("hillshade");Da.activeTexture.set(bb.TEXTURE0);bb.bindTexture(bb.TEXTURE_2D,nb.colorAttachment.get());nb=Jc.paint.get("hillshade-shadow-color");Pb=Jc.paint.get("hillshade-highlight-color");pc=Jc.paint.get("hillshade-accent-color");hc=Jc.paint.get("hillshade-illumination-direction")*
(Math.PI/180);"viewport"===Jc.paint.get("hillshade-illumination-anchor")&&(hc-=Dc.transform.angle);var kc=!Dc.options.moving;va={u_matrix:Dc.transform.calculatePosMatrix(va.tileID.toUnwrapped(),kc),u_image:0,u_latrange:(Hc=va.tileID,yc=Math.pow(2,Hc.canonical.z),Ic=Hc.canonical.y,[(new a.MercatorCoordinate(0,Ic/yc)).toLngLat().lat,(new a.MercatorCoordinate(0,(Ic+1)/yc)).toLngLat().lat]),u_light:[Jc.paint.get("hillshade-exaggeration"),hc],u_shadow:nb,u_highlight:Pb,u_accent:pc};Kb.draw(Da,bb.TRIANGLES,
Xb,Zb,Oa,Gd.disabled,va,Jc.id,Dc.rasterBoundsBuffer,Dc.quadTriangleIndexBuffer,Dc.rasterBoundsSegments)}}za.viewport.set([0,0,U.width,U.height])}},raster:function(U,X,W,fa){if("translucent"===U.renderPass&&0!==W.paint.get("raster-opacity")&&fa.length){var za=U.context,Na=za.gl,ab=X.getSource(),mb=U.useProgram("raster"),Mb=U.colorModeForRenderPass(),Ub=ab instanceof yb?[{},fa]:U.stencilConfigForOverlap(fa);fa=Ub[0];Ub=Ub[1];for(var Zb=Ub[Ub.length-1].overscaledZ,Jc=!U.options.moving,Ic=0;Ic<Ub.length;Ic+=
1){var yc=Ub[Ic],Hc=U.depthModeForSublayer(yc.overscaledZ-Zb,1===W.paint.get("raster-opacity")?Rd.ReadWrite:Rd.ReadOnly,Na.LESS),Dc=X.getTile(yc),Xb=U.transform.calculatePosMatrix(yc.toUnwrapped(),Jc);Dc.registerFadeDuration(W.paint.get("raster-fade-duration"));var va=X.findLoadedParent(yc,0);var Da=Dc,Oa=va,bb=X,nb=U.transform;var Kb=W.paint.get("raster-fade-duration");if(0<Kb){var Pb=a.browser.now(),pc=(Pb-Da.timeAdded)/Kb;Kb=Oa?(Pb-Oa.timeAdded)/Kb:-1;bb=bb.getSource();nb=nb.coveringZoomLevel({tileSize:bb.tileSize,
roundZoom:bb.roundZoom});nb=(nb=!Oa||Math.abs(Oa.tileID.overscaledZ-nb)>Math.abs(Da.tileID.overscaledZ-nb))&&Da.refreshedUponExpiration?1:a.clamp(nb?pc:1-Kb,0,1);Kb=(Da.refreshedUponExpiration&&1<=pc&&(Da.refreshedUponExpiration=!1),Oa?{opacity:1,mix:1-nb}:{opacity:nb,mix:0})}else Kb={opacity:1,mix:0};pc=Oa=void 0;Da="nearest"===W.paint.get("raster-resampling")?Na.NEAREST:Na.LINEAR;za.activeTexture.set(Na.TEXTURE0);Dc.texture.bind(Da,Na.CLAMP_TO_EDGE,Na.LINEAR_MIPMAP_NEAREST);za.activeTexture.set(Na.TEXTURE1);
va?(va.texture.bind(Da,Na.CLAMP_TO_EDGE,Na.LINEAR_MIPMAP_NEAREST),Oa=Math.pow(2,va.tileID.overscaledZ-Dc.tileID.overscaledZ),pc=[Dc.tileID.canonical.x*Oa%1,Dc.tileID.canonical.y*Oa%1]):Dc.texture.bind(Da,Na.CLAMP_TO_EDGE,Na.LINEAR_MIPMAP_NEAREST);va=nb=void 0;Da=W;Dc=pc||[0,0];Oa=Oa||1;pc=Kb.mix;Kb=Kb.opacity*Da.paint.get("raster-opacity");bb=Da.paint.get("raster-brightness-min");Pb=Da.paint.get("raster-brightness-max");var hc=(nb=Da.paint.get("raster-saturation"),0<nb?1-1/(1.001-nb):-nb);nb=(va=
Da.paint.get("raster-contrast"),0<va?1/(1-va):1+va);Da=Da.paint.get("raster-hue-rotate");Da*=Math.PI/180;va=Math.sin(Da);Da=Math.cos(Da);Xb={u_matrix:Xb,u_tl_parent:Dc,u_scale_parent:Oa,u_buffer_scale:1,u_fade_t:pc,u_opacity:Kb,u_image0:0,u_image1:1,u_brightness_low:bb,u_brightness_high:Pb,u_saturation_factor:hc,u_contrast_factor:nb,u_spin_weights:[(2*Da+1)/3,(-Math.sqrt(3)*va-Da+1)/3,(Math.sqrt(3)*va-Da+1)/3]};ab instanceof yb?mb.draw(za,Na.TRIANGLES,Hc,Sc.disabled,Mb,Gd.disabled,Xb,W.id,ab.boundsBuffer,
U.quadTriangleIndexBuffer,ab.boundsSegments):mb.draw(za,Na.TRIANGLES,Hc,fa[yc.overscaledZ],Mb,Gd.disabled,Xb,W.id,U.rasterBoundsBuffer,U.quadTriangleIndexBuffer,U.rasterBoundsSegments)}}},background:function(U,X,W){X=W.paint.get("background-color");var fa=W.paint.get("background-opacity");if(0!==fa){var za=U.context,Na=za.gl,ab=U.transform,mb=ab.tileSize,Mb=W.paint.get("background-pattern");if(!U.isPatternMissing(Mb)){var Ub=!Mb&&1===X.a&&1===fa&&U.opaquePassEnabledForLayer()?"opaque":"translucent";
if(U.renderPass===Ub){var Zb=Sc.disabled;Ub=U.depthModeForSublayer(0,"opaque"===Ub?Rd.ReadWrite:Rd.ReadOnly);var Jc=U.colorModeForRenderPass(),Ic=U.useProgram(Mb?"backgroundPattern":"background");ab=ab.coveringTiles({tileSize:mb});Mb&&(za.activeTexture.set(Na.TEXTURE0),U.imageManager.bind(U.context));for(var yc=W.getCrossfadeParameters(),Hc=0;Hc<ab.length;Hc+=1){var Dc=ab[Hc],Xb=U.transform.calculatePosMatrix(Dc.toUnwrapped());if(Mb){var va=fa;var Da=U;var Oa=Mb,bb={tileID:Dc,tileSize:mb},nb=yc;Dc=
a;var Kb=Dc.extend,Pb=Da.imageManager.getPattern(Oa.from.toString());Oa=Da.imageManager.getPattern(Oa.to.toString());var pc=Da.imageManager.getPixelSize(),hc=Math.pow(2,bb.tileID.overscaledZ),kc=bb.tileSize*Math.pow(2,Da.transform.tileZoom)/hc;hc=kc*(bb.tileID.canonical.x+bb.tileID.wrap*hc);kc*=bb.tileID.canonical.y;Da={u_image:0,u_pattern_tl_a:Pb.tl,u_pattern_br_a:Pb.br,u_pattern_tl_b:Oa.tl,u_pattern_br_b:Oa.br,u_texsize:[pc.width,pc.height],u_mix:nb.t,u_pattern_size_a:Pb.displaySize,u_pattern_size_b:Oa.displaySize,
u_scale_a:nb.fromScale,u_scale_b:nb.toScale,u_tile_units_to_pixels:1/Q(bb,1,Da.transform.tileZoom),u_pixel_coord_upper:[hc>>16,kc>>16],u_pixel_coord_lower:[65535&hc,65535&kc]};Xb=Kb.call(Dc,Da,{u_matrix:Xb,u_opacity:va})}else Xb={u_matrix:Xb,u_opacity:fa,u_color:X};Ic.draw(za,Na.TRIANGLES,Ub,Zb,Jc,Gd.disabled,Xb,W.id,U.tileExtentBuffer,U.quadTriangleIndexBuffer,U.tileExtentSegments)}}}}},debug:function(U,X,W){for(var fa=0;fa<W.length;fa++){var za=U,Na=X,ab=W[fa],mb=za.context,Mb=mb.gl,Ub=ab.posMatrix,
Zb=za.useProgram("debug"),Jc=Rd.disabled,Ic=Sc.disabled,yc=za.colorModeForRenderPass();mb.activeTexture.set(Mb.TEXTURE0);za.emptyTexture.bind(Mb.LINEAR,Mb.CLAMP_TO_EDGE);Zb.draw(mb,Mb.LINE_STRIP,Jc,Ic,yc,Gd.disabled,vh(Ub,a.Color.red),"$debug",za.debugBuffer,za.tileBorderIndexBuffer,za.debugSegments);yc=Na.getTileByID(ab.key).latestRawTileData;yc=Math.floor((yc&&yc.byteLength||0)/1024);Na=Na.getTile(ab).tileSize;Na=512/Math.min(Na,512)*(ab.overscaledZ/za.transform.zoom)*.5;var Hc=ab.canonical.toString();
ab.overscaledZ!==ab.canonical.z&&(Hc+=" \x3d\x3e "+ab.overscaledZ);ab=Hc+" "+yc+"kb";za.initDebugOverlayCanvas();yc=za.debugOverlayCanvas;Hc=za.context.gl;var Dc=za.debugOverlayCanvas.getContext("2d");Dc.clearRect(0,0,yc.width,yc.height);Dc.shadowColor="white";Dc.shadowBlur=2;Dc.lineWidth=1.5;Dc.strokeStyle="white";Dc.textBaseline="top";Dc.font="bold 36px Open Sans, sans-serif";Dc.fillText(ab,5,5);Dc.strokeText(ab,5,5);za.debugOverlayTexture.update(yc);za.debugOverlayTexture.bind(Hc.LINEAR,Hc.CLAMP_TO_EDGE);
Zb.draw(mb,Mb.TRIANGLES,Jc,Ic,md.alphaBlended,Gd.disabled,vh(Ub,a.Color.transparent,Na),"$debug",za.debugBuffer,za.quadTriangleIndexBuffer,za.debugSegments)}},custom:function(U,X,W){X=U.context;W=W.implementation;if("offscreen"===U.renderPass){var fa=W.prerender;fa&&(U.setCustomLayerDefaults(),X.setColorMode(U.colorModeForRenderPass()),fa.call(W,X.gl,U.transform.customLayerMatrix()),X.setDirty(),U.setBaseState())}else"translucent"===U.renderPass&&(U.setCustomLayerDefaults(),X.setColorMode(U.colorModeForRenderPass()),
X.setStencilMode(Sc.disabled),fa="3d"===W.renderingMode?new Rd(U.context.gl.LEQUAL,Rd.ReadWrite,U.depthRangeFor3D):U.depthModeForSublayer(0,Rd.ReadOnly),X.setDepthMode(fa),W.render(X.gl,U.transform.customLayerMatrix()),X.setDirty(),U.setBaseState(),X.bindFramebuffer.set(null))}},af=function(U,X){this.context=new Md(U);this.transform=X;this._tileTextures={};this.setup();this.numSublayers=me.maxUnderzooming+me.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.crossTileSymbolIndex=new oc;this.gpuTimers=
{}};af.prototype.resize=function(U,X){if(this.width=U*a.browser.devicePixelRatio,this.height=X*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(U=0,X=this.style._order;U<X.length;U+=1)this.style._layers[X[U]].resize()};af.prototype.setup=function(){var U=this.context,X=new a.StructArrayLayout2i4;X.emplaceBack(0,0);X.emplaceBack(a.EXTENT,0);X.emplaceBack(0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT);this.tileExtentBuffer=U.createVertexBuffer(X,Id.members);
this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);X=new a.StructArrayLayout2i4;X.emplaceBack(0,0);X.emplaceBack(a.EXTENT,0);X.emplaceBack(0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT);this.debugBuffer=U.createVertexBuffer(X,Id.members);this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);X=new a.StructArrayLayout4i8;X.emplaceBack(0,0,0,0);X.emplaceBack(a.EXTENT,0,a.EXTENT,0);X.emplaceBack(0,a.EXTENT,0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT);this.rasterBoundsBuffer=
U.createVertexBuffer(X,rb.members);this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);X=new a.StructArrayLayout2i4;X.emplaceBack(0,0);X.emplaceBack(1,0);X.emplaceBack(0,1);X.emplaceBack(1,1);this.viewportBuffer=U.createVertexBuffer(X,Id.members);this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);X=new a.StructArrayLayout1ui2;X.emplaceBack(0);X.emplaceBack(1);X.emplaceBack(3);X.emplaceBack(2);X.emplaceBack(0);this.tileBorderIndexBuffer=U.createIndexBuffer(X);X=new a.StructArrayLayout3ui6;
X.emplaceBack(0,1,2);X.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=U.createIndexBuffer(X);this.emptyTexture=new a.Texture(U,{width:1,height:1,data:new Uint8Array([0,0,0,0])},U.gl.RGBA);U=this.context.gl;this.stencilClearMode=new Sc({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO)};af.prototype.clearStencil=function(){var U=this.context,X=U.gl;this.nextStencilID=1;this.currentStencilSource=void 0;var W=a.create();a.ortho(W,0,this.width,this.height,0,0,1);a.scale(W,W,[X.drawingBufferWidth,X.drawingBufferHeight,
0]);this.useProgram("clippingMask").draw(U,X.TRIANGLES,Rd.disabled,this.stencilClearMode,md.disabled,Gd.disabled,{u_matrix:W},"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)};af.prototype._renderTileClippingMasks=function(U,X){if(this.currentStencilSource!==U.source&&U.isTileClipped()&&X&&X.length){this.currentStencilSource=U.source;U=this.context;var W=U.gl;256<this.nextStencilID+X.length&&this.clearStencil();U.setColorMode(md.disabled);U.setDepthMode(Rd.disabled);
var fa=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var za=0;za<X.length;za+=1){var Na=X[za],ab=this._tileClippingMaskIDs[Na.key]=this.nextStencilID++;fa.draw(U,W.TRIANGLES,Rd.disabled,new Sc({func:W.ALWAYS,mask:0},ab,255,W.KEEP,W.KEEP,W.REPLACE),md.disabled,Gd.disabled,{u_matrix:Na.posMatrix},"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}};af.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0;256<this.nextStencilID+
1&&this.clearStencil();var U=this.nextStencilID++,X=this.context.gl;return new Sc({func:X.NOTEQUAL,mask:255},U,255,X.KEEP,X.KEEP,X.REPLACE)};af.prototype.stencilModeForClipping=function(U){var X=this.context.gl;return new Sc({func:X.EQUAL,mask:255},this._tileClippingMaskIDs[U.key],0,X.KEEP,X.KEEP,X.REPLACE)};af.prototype.stencilConfigForOverlap=function(U){var X=this.context.gl;U=U.sort(function(ab,mb){return mb.overscaledZ-ab.overscaledZ});var W=U[U.length-1].overscaledZ,fa=U[0].overscaledZ-W+1;
if(1<fa){this.currentStencilSource=void 0;256<this.nextStencilID+fa&&this.clearStencil();var za={};for(var Na=0;Na<fa;Na++)za[Na+W]=new Sc({func:X.GEQUAL,mask:255},Na+this.nextStencilID,255,X.KEEP,X.KEEP,X.REPLACE);return this.nextStencilID+=fa,[za,U]}return[(za={},za[W]=Sc.disabled,za),U]};af.prototype.colorModeForRenderPass=function(){var U=this.context.gl;return this._showOverdrawInspector?new md([U.CONSTANT_COLOR,U.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?md.unblended:
md.alphaBlended};af.prototype.depthModeForSublayer=function(U,X,W){if(!this.opaquePassEnabledForLayer())return Rd.disabled;U=1-((1+this.currentLayer)*this.numSublayers+U)*this.depthEpsilon;return new Rd(W||this.context.gl.LEQUAL,X,[U,U])};af.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff};af.prototype.render=function(U,X){var W=this;this.style=U;this.options=X;this.lineAtlas=U.lineAtlas;this.imageManager=U.imageManager;this.glyphManager=U.glyphManager;
this.symbolFadeChange=U.placement.symbolFadeChange(a.browser.now());this.imageManager.beginFrame();var fa=this.style._order,za=this.style.sourceCaches;for(Mb in za){var Na=za[Mb];Na.used&&Na.prepare(this.context)}var ab,mb;var Mb={};Na={};var Ub={},Zb;for(Zb in za){var Jc=za[Zb];Mb[Zb]=Jc.getVisibleCoordinates();Na[Zb]=Mb[Zb].slice().reverse();Ub[Zb]=Jc.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(Zb=0;Zb<fa.length;Zb++)if(this.style._layers[fa[Zb]].is3D()){this.opaquePassCutoff=
Zb;break}this.renderPass="offscreen";for(Zb=0;Zb<fa.length;Zb+=1)if(Jc=this.style._layers[fa[Zb]],Jc.hasOffscreenPass()&&!Jc.isHidden(this.transform.zoom)){var Ic=Na[Jc.source];("custom"===Jc.type||Ic.length)&&this.renderLayer(this,za[Jc.source],Jc,Ic)}this.context.bindFramebuffer.set(null);this.context.clear({color:X.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=X.showOverdrawInspector;this.depthRangeFor3D=[0,1-(U._order.length+
2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";for(this.currentLayer=fa.length-1;0<=this.currentLayer;this.currentLayer--)U=this.style._layers[fa[this.currentLayer]],X=za[U.source],Zb=Mb[U.source],this._renderTileClippingMasks(U,Zb),this.renderLayer(this,X,U,Zb);this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<fa.length;this.currentLayer++)U=this.style._layers[fa[this.currentLayer]],X=za[U.source],Zb=("symbol"===U.type?Ub:Na)[U.source],this._renderTileClippingMasks(U,
Mb[U.source]),this.renderLayer(this,X,U,Zb);this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(yc){yc.source&&!yc.isHidden(W.transform.zoom)&&(yc.source!==(mb&&mb.id)&&(mb=W.style.sourceCaches[yc.source]),(!ab||ab.getSource().maxzoom<mb.getSource().maxzoom)&&(ab=mb))}),ab&&Yh.debug(this,ab,ab.getVisibleCoordinates()));this.options.showPadding&&function(yc){var Hc=yc.transform.padding;oa(yc,0,yc.transform.height-(Hc.top||0)+1.5,yc.transform.width,3,Uh);oa(yc,0,(Hc.bottom||
0)+1.5,yc.transform.width,3,ih);oa(yc,(Hc.left||0)-1.5,0,3,yc.transform.height,Dg);oa(yc,yc.transform.width-(Hc.right||0)-1.5,0,3,yc.transform.height,Vi);var Dc=yc.transform.centerPoint;Hc=Dc.x;Dc=yc.transform.height-Dc.y;oa(yc,Hc-1,Dc-10,2,20,cg);oa(yc,Hc-10,Dc-1,20,2,cg);!0}(this);this.context.setDefault()};af.prototype.renderLayer=function(U,X,W,fa){W.isHidden(this.transform.zoom)||("background"===W.type||"custom"===W.type||fa.length)&&(this.id=W.id,this.gpuTimingStart(W),Yh[W.type](U,X,W,fa,this.style.placement.variableOffsets),
this.gpuTimingEnd())};af.prototype.gpuTimingStart=function(U){if(this.options.gpuTiming){var X=this.context.extTimerQuery,W=this.gpuTimers[U.id];W||(W=this.gpuTimers[U.id]={calls:0,cpuTime:0,query:X.createQueryEXT()});W.calls++;X.beginQueryEXT(X.TIME_ELAPSED_EXT,W.query)}};af.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var U=this.context.extTimerQuery;U.endQueryEXT(U.TIME_ELAPSED_EXT)}};af.prototype.collectGpuTimers=function(){var U=this.gpuTimers;return this.gpuTimers={},U};af.prototype.queryGpuTimers=
function(U){var X={},W;for(W in U){var fa=U[W],za=this.context.extTimerQuery,Na=za.getQueryObjectEXT(fa.query,za.QUERY_RESULT_EXT)/1E6;za.deleteQueryEXT(fa.query);X[W]=Na}return X};af.prototype.translatePosMatrix=function(U,X,W,fa,za){if(!W[0]&&!W[1])return U;var Na=za?"map"===fa?this.transform.angle:0:"viewport"===fa?-this.transform.angle:0;Na&&(fa=Math.sin(Na),Na=Math.cos(Na),W=[W[0]*Na-W[1]*fa,W[0]*fa+W[1]*Na]);X=[za?W[0]:Q(X,W[0],this.transform.zoom),za?W[1]:Q(X,W[1],this.transform.zoom),0];W=
new Float32Array(16);return a.translate(W,U,X),W};af.prototype.saveTileTexture=function(U){var X=this._tileTextures[U.size[0]];X?X.push(U):this._tileTextures[U.size[0]]=[U]};af.prototype.getTileTexture=function(U){return(U=this._tileTextures[U])&&0<U.length?U.pop():null};af.prototype.isPatternMissing=function(U){if(!U)return!1;if(!U.from||!U.to)return!0;var X=this.imageManager.getPattern(U.from.toString());U=this.imageManager.getPattern(U.to.toString());return!X||!U};af.prototype.useProgram=function(U,
X){this.cache=this.cache||{};var W=""+U+(X?X.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[W]||(this.cache[W]=new Oe(this.context,Th[U],X,Vh[U],this._showOverdrawInspector)),this.cache[W]};af.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};
af.prototype.setBaseState=function(){var U=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,0,this.width,this.height]);this.context.blendEquation.set(U.FUNC_ADD)};af.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))};
af.prototype.destroy=function(){this.emptyTexture.destroy();this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var jh=function(U,X){this.points=U;this.planes=X};jh.fromInvProjectionMatrix=function(U,X,W){var fa=Math.pow(2,W),za=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Na){return a.transformMat4([],Na,U)}).map(function(Na){return a.scale$1([],Na,1/Na[3]/X*fa)});W=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Na){var ab=
a.sub([],za[Na[0]],za[Na[1]]),mb=a.sub([],za[Na[2]],za[Na[1]]);ab=a.normalize([],a.cross([],ab,mb));Na=-a.dot(ab,za[Na[1]]);return ab.concat(Na)});return new jh(za,W)};var Ug=function(U,X){this.min=U;this.max=X;this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Ug.prototype.quadrant=function(U){U=[0==U%2,2>U];for(var X=a.clone$2(this.min),W=a.clone$2(this.max),fa=0;fa<U.length;fa++)X[fa]=U[fa]?this.min[fa]:this.center[fa],W[fa]=U[fa]?this.center[fa]:this.max[fa];return W[2]=this.max[2],new Ug(X,
W)};Ug.prototype.distanceX=function(U){return Math.max(Math.min(this.max[0],U[0]),this.min[0])-U[0]};Ug.prototype.distanceY=function(U){return Math.max(Math.min(this.max[1],U[1]),this.min[1])-U[1]};Ug.prototype.intersects=function(U){for(var X=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],W=!0,fa=0;fa<U.planes.length;fa++){for(var za=U.planes[fa],Na=0,ab=0;ab<X.length;ab++)Na+=0<=a.dot$1(za,X[ab]);if(0===Na)return 0;Na!==
X.length&&(W=!1)}if(W)return 2;for(X=0;3>X;X++){W=Number.MAX_VALUE;fa=-Number.MAX_VALUE;for(za=0;za<U.points.length;za++)Na=U.points[za][X]-this.min[X],W=Math.min(W,Na),fa=Math.max(fa,Na);if(0>fa||W>this.max[X]-this.min[X])return 0}return 1};var dg=function(U,X,W,fa){if(void 0===U&&(U=0),void 0===X&&(X=0),void 0===W&&(W=0),void 0===fa&&(fa=0),isNaN(U)||0>U||isNaN(X)||0>X||isNaN(W)||0>W||isNaN(fa)||0>fa)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=
U;this.bottom=X;this.left=W;this.right=fa};dg.prototype.interpolate=function(U,X,W){return null!=X.top&&null!=U.top&&(this.top=a.number(U.top,X.top,W)),null!=X.bottom&&null!=U.bottom&&(this.bottom=a.number(U.bottom,X.bottom,W)),null!=X.left&&null!=U.left&&(this.left=a.number(U.left,X.left,W)),null!=X.right&&null!=U.right&&(this.right=a.number(U.right,X.right,W)),this};dg.prototype.getCenter=function(U,X){U=a.clamp((this.left+U-this.right)/2,0,U);X=a.clamp((this.top+X-this.bottom)/2,0,X);return new a.Point(U,
X)};dg.prototype.equals=function(U){return this.top===U.top&&this.bottom===U.bottom&&this.left===U.left&&this.right===U.right};dg.prototype.clone=function(){return new dg(this.top,this.bottom,this.left,this.right)};dg.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Te=function(U,X,W,fa,za){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===za||za;this._minZoom=U||0;this._maxZoom=X||22;this._minPitch=null==W?0:
W;this._maxPitch=null==fa?60:fa;this.setMaxBounds();this.height=this.width=0;this._center=new a.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._edgeInsets=new dg;this._posMatrixCache={};this._alignedPosMatrixCache={}},Ve={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},
bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Te.prototype.clone=function(){var U=new Te(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return U.tileSize=this.tileSize,U.latRange=this.latRange,U.width=this.width,U.height=this.height,U._center=this._center,U.zoom=this.zoom,U.angle=this.angle,
U._fov=this._fov,U._pitch=this._pitch,U._unmodified=this._unmodified,U._edgeInsets=this._edgeInsets.clone(),U._calcMatrices(),U};Ve.minZoom.get=function(){return this._minZoom};Ve.minZoom.set=function(U){this._minZoom!==U&&(this._minZoom=U,this.zoom=Math.max(this.zoom,U))};Ve.maxZoom.get=function(){return this._maxZoom};Ve.maxZoom.set=function(U){this._maxZoom!==U&&(this._maxZoom=U,this.zoom=Math.min(this.zoom,U))};Ve.minPitch.get=function(){return this._minPitch};Ve.minPitch.set=function(U){this._minPitch!==
U&&(this._minPitch=U,this.pitch=Math.max(this.pitch,U))};Ve.maxPitch.get=function(){return this._maxPitch};Ve.maxPitch.set=function(U){this._maxPitch!==U&&(this._maxPitch=U,this.pitch=Math.min(this.pitch,U))};Ve.renderWorldCopies.get=function(){return this._renderWorldCopies};Ve.renderWorldCopies.set=function(U){void 0===U?U=!0:null===U&&(U=!1);this._renderWorldCopies=U};Ve.worldSize.get=function(){return this.tileSize*this.scale};Ve.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))};
Ve.size.get=function(){return new a.Point(this.width,this.height)};Ve.bearing.get=function(){return-this.angle/Math.PI*180};Ve.bearing.set=function(U){U=-a.wrap(U,-180,180)*Math.PI/180;this.angle!==U&&(this._unmodified=!1,this.angle=U,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};Ve.pitch.get=function(){return this._pitch/Math.PI*180};Ve.pitch.set=function(U){U=a.clamp(U,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==U&&
(this._unmodified=!1,this._pitch=U,this._calcMatrices())};Ve.fov.get=function(){return this._fov/Math.PI*180};Ve.fov.set=function(U){U=Math.max(.01,Math.min(60,U));this._fov!==U&&(this._unmodified=!1,this._fov=U/180*Math.PI,this._calcMatrices())};Ve.zoom.get=function(){return this._zoom};Ve.zoom.set=function(U){U=Math.min(Math.max(U,this.minZoom),this.maxZoom);this._zoom!==U&&(this._unmodified=!1,this._zoom=U,this.scale=this.zoomScale(U),this.tileZoom=Math.floor(U),this.zoomFraction=U-this.tileZoom,
this._constrain(),this._calcMatrices())};Ve.center.get=function(){return this._center};Ve.center.set=function(U){U.lat===this._center.lat&&U.lng===this._center.lng||(this._unmodified=!1,this._center=U,this._constrain(),this._calcMatrices())};Ve.padding.get=function(){return this._edgeInsets.toJSON()};Ve.padding.set=function(U){this._edgeInsets.equals(U)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,U,1),this._calcMatrices())};Ve.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,
this.height)};Te.prototype.isPaddingEqual=function(U){return this._edgeInsets.equals(U)};Te.prototype.interpolatePadding=function(U,X,W){this._unmodified=!1;this._edgeInsets.interpolate(U,X,W);this._constrain();this._calcMatrices()};Te.prototype.coveringZoomLevel=function(U){U=(U.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/U.tileSize));return Math.max(0,U)};Te.prototype.getVisibleUnwrappedCoordinates=function(U){var X=[new a.UnwrappedTileID(0,U)];if(this._renderWorldCopies){var W=
this.pointCoordinate(new a.Point(0,0)),fa=this.pointCoordinate(new a.Point(this.width,0)),za=this.pointCoordinate(new a.Point(this.width,this.height)),Na=this.pointCoordinate(new a.Point(0,this.height)),ab=Math.floor(Math.max(W.x,fa.x,za.x,Na.x));for(W=Math.floor(Math.min(W.x,fa.x,za.x,Na.x))-1;W<=ab+1;W++)0!==W&&X.push(new a.UnwrappedTileID(W,U))}return X};Te.prototype.coveringTiles=function(U){var X=this.coveringZoomLevel(U),W=X;if(void 0!==U.minzoom&&X<U.minzoom)return[];void 0!==U.maxzoom&&X>
U.maxzoom&&(X=U.maxzoom);var fa=a.MercatorCoordinate.fromLngLat(this.center),za=Math.pow(2,X);fa=[za*fa.x,za*fa.y,0];var Na=jh.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,X),ab=U.minzoom||0;60>=this.pitch&&.1>this._edgeInsets.top&&(ab=X);var mb=function(Dc){return{aabb:new Ug([Dc*za,0,0],[(Dc+1)*za,za,0]),zoom:0,x:0,y:0,wrap:Dc,fullyVisible:!1}},Mb=[],Ub=[],Zb=X;U=U.reparseOverscaled?W:X;if(this._renderWorldCopies)for(X=1;3>=X;X++)Mb.push(mb(-X)),Mb.push(mb(X));for(Mb.push(mb(0));0<
Mb.length;){mb=Mb.pop();X=mb.x;W=mb.y;var Jc=mb.fullyVisible;if(!Jc){Jc=mb.aabb.intersects(Na);if(0===Jc)continue;Jc=2===Jc}var Ic=mb.aabb.distanceX(fa),yc=mb.aabb.distanceY(fa);Ic=Math.max(Math.abs(Ic),Math.abs(yc));if(mb.zoom===Zb||Ic>3+(1<<Zb-mb.zoom)-2&&mb.zoom>=ab)Ub.push({tileID:new a.OverscaledTileID(mb.zoom===Zb?U:mb.zoom,mb.wrap,mb.zoom,X,W),distanceSq:a.sqrLen([fa[0]-.5-X,fa[1]-.5-W])});else for(Ic=0;4>Ic;Ic++){yc=(X<<1)+Ic%2;var Hc=(W<<1)+(Ic>>1);Mb.push({aabb:mb.aabb.quadrant(Ic),zoom:mb.zoom+
1,x:yc,y:Hc,wrap:mb.wrap,fullyVisible:Jc})}}return Ub.sort(function(Dc,Xb){return Dc.distanceSq-Xb.distanceSq}).map(function(Dc){return Dc.tileID})};Te.prototype.resize=function(U,X){this.width=U;this.height=X;this.pixelsToGLUnits=[2/U,-2/X];this._constrain();this._calcMatrices()};Ve.unmodified.get=function(){return this._unmodified};Te.prototype.zoomScale=function(U){return Math.pow(2,U)};Te.prototype.scaleZoom=function(U){return Math.log(U)/Math.LN2};Te.prototype.project=function(U){var X=a.clamp(U.lat,
-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(U.lng)*this.worldSize,a.mercatorYfromLat(X)*this.worldSize)};Te.prototype.unproject=function(U){return(new a.MercatorCoordinate(U.x/this.worldSize,U.y/this.worldSize)).toLngLat()};Ve.point.get=function(){return this.project(this.center)};Te.prototype.setLocationAtPoint=function(U,X){X=this.pointCoordinate(X);var W=this.pointCoordinate(this.centerPoint);U=this.locationCoordinate(U);U=new a.MercatorCoordinate(U.x-(X.x-
W.x),U.y-(X.y-W.y));this.center=this.coordinateLocation(U);this._renderWorldCopies&&(this.center=this.center.wrap())};Te.prototype.locationPoint=function(U){return this.coordinatePoint(this.locationCoordinate(U))};Te.prototype.pointLocation=function(U){return this.coordinateLocation(this.pointCoordinate(U))};Te.prototype.locationCoordinate=function(U){return a.MercatorCoordinate.fromLngLat(U)};Te.prototype.coordinateLocation=function(U){return U.toLngLat()};Te.prototype.pointCoordinate=function(U){var X=
[U.x,U.y,0,1];U=[U.x,U.y,1,1];a.transformMat4(X,X,this.pixelMatrixInverse);a.transformMat4(U,U,this.pixelMatrixInverse);var W=X[3],fa=U[3],za=X[1]/W,Na=U[1]/fa,ab=X[2]/W,mb=U[2]/fa;ab=ab===mb?0:(0-ab)/(mb-ab);return new a.MercatorCoordinate(a.number(X[0]/W,U[0]/fa,ab)/this.worldSize,a.number(za,Na,ab)/this.worldSize)};Te.prototype.coordinatePoint=function(U){U=[U.x*this.worldSize,U.y*this.worldSize,0,1];return a.transformMat4(U,U,this.pixelMatrix),new a.Point(U[0]/U[3],U[1]/U[3])};Te.prototype.getBounds=
function(){return(new a.LngLatBounds).extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))};Te.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};Te.prototype.setMaxBounds=
function(U){U?(this.lngRange=[U.getWest(),U.getEast()],this.latRange=[U.getSouth(),U.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};Te.prototype.calculatePosMatrix=function(U,X){void 0===X&&(X=!1);var W=U.key,fa=X?this._alignedPosMatrixCache:this._posMatrixCache;if(fa[W])return fa[W];var za=U.canonical,Na=this.worldSize/this.zoomScale(za.z);U=za.x+Math.pow(2,za.z)*U.wrap;var ab=a.identity(new Float64Array(16));return a.translate(ab,
ab,[U*Na,za.y*Na,0]),a.scale(ab,ab,[Na/a.EXTENT,Na/a.EXTENT,1]),a.multiply(ab,X?this.alignedProjMatrix:this.projMatrix,ab),fa[W]=new Float32Array(ab),fa[W]};Te.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};Te.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var U,X,W=-90,fa=90,za=-180,Na=180,ab=this.size,mb=this._unmodified;if(this.latRange){var Mb=this.latRange;W=a.mercatorYfromLat(Mb[1])*this.worldSize;
var Ub=(fa=a.mercatorYfromLat(Mb[0])*this.worldSize)-W<ab.y?ab.y/(fa-W):0}if(this.lngRange){Mb=this.lngRange;za=a.mercatorXfromLng(Mb[0])*this.worldSize;var Zb=(Na=a.mercatorXfromLng(Mb[1])*this.worldSize)-za<ab.x?ab.x/(Na-za):0}Mb=this.point;var Jc=Math.max(Zb||0,Ub||0);if(Jc)return this.center=this.unproject(new a.Point(Zb?(Na+za)/2:Mb.x,Ub?(fa+W)/2:Mb.y)),this.zoom+=this.scaleZoom(Jc),this._unmodified=mb,void(this._constraining=!1);this.latRange&&(Ub=Mb.y,Zb=ab.y/2,Ub-Zb<W&&(X=W+Zb),Ub+Zb>fa&&
(X=fa-Zb));this.lngRange&&(W=Mb.x,ab=ab.x/2,W-ab<za&&(U=za+ab),W+ab>Na&&(U=Na-ab));void 0===U&&void 0===X||(this.center=this.unproject(new a.Point(void 0!==U?U:Mb.x,void 0!==X?X:Mb.y)));this._unmodified=mb;this._constraining=!1}};Te.prototype._calcMatrices=function(){if(this.height){var U=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var X=this._fov*(.5+U.y/this.height);X=Math.sin(X)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-(Math.PI/2+this._pitch)-
X,.01,Math.PI-.01));var W=this.point,fa=W.x;W=W.y;var za=1.01*(Math.cos(Math.PI/2-this._pitch)*X+this.cameraToCenterDistance),Na=this.height/50;X=new Float64Array(16);a.perspective(X,this._fov,this.width/this.height,Na,za);X[8]=2*-U.x/this.width;X[9]=2*U.y/this.height;a.scale(X,X,[1,-1,1]);a.translate(X,X,[0,0,-this.cameraToCenterDistance]);a.rotateX(X,X,this._pitch);a.rotateZ(X,X,this.angle);a.translate(X,X,[-fa,-W,0]);this.mercatorMatrix=a.scale([],X,[this.worldSize,this.worldSize,this.worldSize]);
a.scale(X,X,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=X;this.invProjMatrix=a.invert([],this.projMatrix);U=this.width%2/2;za=this.height%2/2;Na=Math.cos(this.angle);var ab=Math.sin(this.angle);fa=fa-Math.round(fa)+Na*U+ab*za;W=W-Math.round(W)+Na*za+ab*U;U=new Float64Array(X);if(a.translate(U,U,[.5<fa?fa-1:fa,.5<W?W-1:W,0]),this.alignedProjMatrix=U,X=a.create(),a.scale(X,X,[this.width/2,-this.height/2,1]),a.translate(X,X,[1,-1,0]),this.labelPlaneMatrix=X,X=a.create(),
a.scale(X,X,[1,-1,1]),a.translate(X,X,[-1,-1,0]),a.scale(X,X,[2/this.width,2/this.height,1]),this.glCoordMatrix=X,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(X=a.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=X;this._posMatrixCache={};this._alignedPosMatrixCache={}}};Te.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var U=this.pointCoordinate(new a.Point(0,0));
U=[U.x*this.worldSize,U.y*this.worldSize,0,1];return a.transformMat4(U,U,this.pixelMatrix)[3]/this.cameraToCenterDistance};Te.prototype.getCameraPoint=function(){return this.centerPoint.add(new a.Point(0,Math.tan(this._pitch)*(this.cameraToCenterDistance||1)))};Te.prototype.getCameraQueryGeometry=function(U){var X=this.getCameraPoint();if(1===U.length)return[U[0],X];var W=X.x,fa=X.y,za=X.x;X=X.y;for(var Na=0;Na<U.length;Na+=1){var ab=U[Na];W=Math.min(W,ab.x);fa=Math.min(fa,ab.y);za=Math.max(za,ab.x);
X=Math.max(X,ab.y)}return[new a.Point(W,fa),new a.Point(za,fa),new a.Point(za,X),new a.Point(W,X),new a.Point(W,fa)]};Object.defineProperties(Te.prototype,Ve);var Tg=function(U){var X,W,fa,za;this._hashName=U&&encodeURIComponent(U);a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this);this._updateHash=(X=this._updateHashUnthrottled.bind(this),W=!1,fa=null,za=function(){fa=null;W&&(X(),fa=setTimeout(za,300),W=!1)},function(){return W=!0,fa||za(),fa})};Tg.prototype.addTo=function(U){return this._map=
U,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};Tg.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};Tg.prototype.getHashString=function(U){var X=this._map.getCenter(),W=Math.round(100*this._map.getZoom())/100,fa=Math.pow(10,Math.ceil((W*Math.LN2+Math.log(512/360/.5))/Math.LN10)),za=Math.round(X.lng*
fa)/fa;X=Math.round(X.lat*fa)/fa;fa=this._map.getBearing();var Na=this._map.getPitch(),ab="";if(ab+=U?"/"+za+"/"+X+"/"+W:W+"/"+X+"/"+za,(fa||Na)&&(ab+="/"+Math.round(10*fa)/10),Na&&(ab+="/"+Math.round(Na)),this._hashName){var mb=this._hashName,Mb=!1;U=a.window.location.hash.slice(1).split("\x26").map(function(Ub){var Zb=Ub.split("\x3d")[0];return Zb===mb?(Mb=!0,Zb+"\x3d"+ab):Ub}).filter(function(Ub){return Ub});return Mb||U.push(mb+"\x3d"+ab),"#"+U.join("\x26")}return"#"+ab};Tg.prototype._getCurrentHash=
function(){var U,X=this,W=a.window.location.hash.replace("#","");return this._hashName?(W.split("\x26").map(function(fa){return fa.split("\x3d")}).forEach(function(fa){fa[0]===X._hashName&&(U=fa)}),(U&&U[1]||"").split("/")):W.split("/")};Tg.prototype._onHashChange=function(){var U=this._getCurrentHash();if(3<=U.length&&!U.some(function(W){return isNaN(W)})){var X=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(U[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+U[2],
+U[1]],zoom:+U[0],bearing:X,pitch:+(U[4]||0)}),!0}return!1};Tg.prototype._updateHashUnthrottled=function(){var U=this.getHashString();try{a.window.history.replaceState(a.window.history.state,"",U)}catch(X){}};var wh={linearity:.3,easing:a.bezier(0,0,.3,1)},Bi=a.extend({deceleration:2500,maxSpeed:1400},wh),Ci=a.extend({deceleration:20,maxSpeed:1400},wh),Wh=a.extend({deceleration:1E3,maxSpeed:360},wh),Di=a.extend({deceleration:1E3,maxSpeed:90},wh),Eg=function(U){this._map=U;this.clear()};Eg.prototype.clear=
function(){this._inertiaBuffer=[]};Eg.prototype.record=function(U){this._drainInertiaBuffer();this._inertiaBuffer.push({time:a.browser.now(),settings:U})};Eg.prototype._drainInertiaBuffer=function(){for(var U=this._inertiaBuffer,X=a.browser.now();0<U.length&&160<X-U[0].time;)U.shift()};Eg.prototype._onMoveEnd=function(U){if(this._drainInertiaBuffer(),!(2>this._inertiaBuffer.length)){for(var X=0,W=0,fa=0,za=new a.Point(0,0),Na=void 0,ab=void 0,mb=0,Mb=this._inertiaBuffer;mb<Mb.length;mb+=1){var Ub=
Mb[mb].settings;X+=Ub.zoomDelta||0;W+=Ub.bearingDelta||0;fa+=Ub.pitchDelta||0;Ub.panDelta&&za._add(Ub.panDelta);Ub.around&&(ab=Ub.around);Ub.pinchAround&&(Na=Ub.pinchAround)}Mb=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time;mb={};za.mag()&&(U=ra(za.mag(),Mb,a.extend({},Bi,U||{})),mb.offset=za.mult(U.amount/za.mag()),mb.center=this._map.transform.center,ka(mb,U));X&&(X=ra(X,Mb,Ci),mb.zoom=this._map.transform.zoom+X.amount,ka(mb,X));W&&(W=ra(W,Mb,Wh),mb.bearing=this._map.transform.bearing+
a.clamp(W.amount,-179,179),ka(mb,W));fa&&(fa=ra(fa,Mb,Di),mb.pitch=this._map.transform.pitch+fa.amount,ka(mb,fa));if(mb.zoom||mb.bearing)Na=void 0===Na?ab:Na,mb.around=Na?this._map.unproject(Na):this._map.getCenter();return this.clear(),a.extend(mb,{noMoveStart:!0})}};var rf=function(U){function X(fa,za,Na,ab){void 0===ab&&(ab={});var mb=Pa.mousePos(za.getCanvasContainer(),Na),Mb=za.unproject(mb);U.call(this,fa,a.extend({point:mb,lngLat:Mb,originalEvent:Na},ab));this._defaultPrevented=!1;this.target=
za}U&&(X.__proto__=U);(X.prototype=Object.create(U&&U.prototype)).constructor=X;var W={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,W),X}(a.Event),Ei=function(U){function X(fa,za,Na){var ab="touchend"===fa?Na.changedTouches:Na.touches;ab=Pa.touchPos(za.getCanvasContainer(),ab);var mb=ab.map(function(Zb){return za.unproject(Zb)}),Mb=ab.reduce(function(Zb,
Jc,Ic,yc){return Zb.add(Jc.div(yc.length))},new a.Point(0,0)),Ub=za.unproject(Mb);U.call(this,fa,{points:ab,point:Mb,lngLats:mb,lngLat:Ub,originalEvent:Na});this._defaultPrevented=!1}U&&(X.__proto__=U);(X.prototype=Object.create(U&&U.prototype)).constructor=X;var W={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,W),X}(a.Event),Wi=function(U){function X(fa,
za,Na){U.call(this,fa,{originalEvent:Na});this._defaultPrevented=!1}U&&(X.__proto__=U);(X.prototype=Object.create(U&&U.prototype)).constructor=X;var W={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,W),X}(a.Event),Bf=function(U,X){this._map=U;this._clickTolerance=X.clickTolerance};Bf.prototype.reset=function(){delete this._mousedownPos};
Bf.prototype.wheel=function(U){return this._firePreventable(new Wi(U.type,this._map,U))};Bf.prototype.mousedown=function(U,X){return this._mousedownPos=X,this._firePreventable(new rf(U.type,this._map,U))};Bf.prototype.mouseup=function(U){this._map.fire(new rf(U.type,this._map,U))};Bf.prototype.click=function(U,X){this._mousedownPos&&this._mousedownPos.dist(X)>=this._clickTolerance||this._map.fire(new rf(U.type,this._map,U))};Bf.prototype.dblclick=function(U){return this._firePreventable(new rf(U.type,
this._map,U))};Bf.prototype.mouseover=function(U){this._map.fire(new rf(U.type,this._map,U))};Bf.prototype.mouseout=function(U){this._map.fire(new rf(U.type,this._map,U))};Bf.prototype.touchstart=function(U){return this._firePreventable(new Ei(U.type,this._map,U))};Bf.prototype.touchmove=function(U){this._map.fire(new Ei(U.type,this._map,U))};Bf.prototype.touchend=function(U){this._map.fire(new Ei(U.type,this._map,U))};Bf.prototype.touchcancel=function(U){this._map.fire(new Ei(U.type,this._map,U))};
Bf.prototype._firePreventable=function(U){if(this._map.fire(U),U.defaultPrevented)return{}};Bf.prototype.isEnabled=function(){return!0};Bf.prototype.isActive=function(){return!1};Bf.prototype.enable=function(){};Bf.prototype.disable=function(){};var Fg=function(U){this._map=U};Fg.prototype.reset=function(){this._delayContextMenu=!1;delete this._contextMenuEvent};Fg.prototype.mousemove=function(U){this._map.fire(new rf(U.type,this._map,U))};Fg.prototype.mousedown=function(){this._delayContextMenu=
!0};Fg.prototype.mouseup=function(){this._delayContextMenu=!1;this._contextMenuEvent&&(this._map.fire(new rf("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)};Fg.prototype.contextmenu=function(U){this._delayContextMenu?this._contextMenuEvent=U:this._map.fire(new rf(U.type,this._map,U));this._map.listens("contextmenu")&&U.preventDefault()};Fg.prototype.isEnabled=function(){return!0};Fg.prototype.isActive=function(){return!1};Fg.prototype.enable=function(){};Fg.prototype.disable=
function(){};var Rf=function(U,X){this._map=U;this._el=U.getCanvasContainer();this._container=U.getContainer();this._clickTolerance=X.clickTolerance||1};Rf.prototype.isEnabled=function(){return!!this._enabled};Rf.prototype.isActive=function(){return!!this._active};Rf.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};Rf.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Rf.prototype.mousedown=function(U,X){this.isEnabled()&&U.shiftKey&&0===U.button&&(Pa.disableDrag(),
this._startPos=this._lastPos=X,this._active=!0)};Rf.prototype.mousemoveWindow=function(U,X){if(this._active&&!(this._lastPos.equals(X)||!this._box&&X.dist(this._startPos)<this._clickTolerance)){var W=this._startPos;this._lastPos=X;this._box||(this._box=Pa.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",U));U=Math.min(W.x,X.x);var fa=Math.max(W.x,X.x),za=Math.min(W.y,X.y);X=Math.max(W.y,X.y);Pa.setTransform(this._box,
"translate("+U+"px,"+za+"px)");this._box.style.width=fa-U+"px";this._box.style.height=X-za+"px"}};Rf.prototype.mouseupWindow=function(U,X){var W=this;if(this._active&&0===U.button){var fa=this._startPos;if(this.reset(),Pa.suppressClick(),fa.x!==X.x||fa.y!==X.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:U})),{cameraAnimation:function(za){return za.fitScreenCoordinates(fa,X,W._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",U)}};Rf.prototype.keydown=function(U){this._active&&
27===U.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",U))};Rf.prototype.reset=function(){this._active=!1;this._container.classList.remove("mapboxgl-crosshair");this._box&&(Pa.remove(this._box),this._box=null);Pa.enableDrag();delete this._startPos;delete this._lastPos};Rf.prototype._fireEvent=function(U,X){return this._map.fire(new a.Event(U,{originalEvent:X}))};var Dh=function(U){this.reset();this.numTouches=U.numTouches};Dh.prototype.reset=function(){delete this.centroid;delete this.startTime;
delete this.touches;this.aborted=!1};Dh.prototype.touchstart=function(U,X,W){(this.centroid||W.length>this.numTouches)&&(this.aborted=!0);if(!this.aborted&&(void 0===this.startTime&&(this.startTime=U.timeStamp),W.length===this.numTouches)){U=new a.Point(0,0);for(var fa=0;fa<X.length;fa+=1)U._add(X[fa]);this.centroid=U.div(X.length);this.touches=ha(W,X)}};Dh.prototype.touchmove=function(U,X,W){if(!this.aborted&&this.centroid){U=ha(W,X);for(var fa in this.touches)X=U[fa],(!X||30<X.dist(this.touches[fa]))&&
(this.aborted=!0)}};Dh.prototype.touchend=function(U,X,W){if((!this.centroid||500<U.timeStamp-this.startTime)&&(this.aborted=!0),0===W.length)if(U=!this.aborted&&this.centroid,this.reset(),U)return U};var Ng=function(U){this.singleTap=new Dh(U);this.numTaps=U.numTaps;this.reset()};Ng.prototype.reset=function(){this.lastTime=1/0;delete this.lastTap;this.count=0;this.singleTap.reset()};Ng.prototype.touchstart=function(U,X,W){this.singleTap.touchstart(U,X,W)};Ng.prototype.touchmove=function(U,X,W){this.singleTap.touchmove(U,
X,W)};Ng.prototype.touchend=function(U,X,W){if(X=this.singleTap.touchend(U,X,W)){W=500>U.timeStamp-this.lastTime;var fa=!this.lastTap||30>this.lastTap.dist(X);if(W&&fa||this.reset(),this.count++,this.lastTime=U.timeStamp,this.lastTap=X,this.count===this.numTaps)return this.reset(),X}};var lg=function(){this._zoomIn=new Ng({numTouches:1,numTaps:2});this._zoomOut=new Ng({numTouches:2,numTaps:1});this.reset()};lg.prototype.reset=function(){this._active=!1;this._zoomIn.reset();this._zoomOut.reset()};
lg.prototype.touchstart=function(U,X,W){this._zoomIn.touchstart(U,X,W);this._zoomOut.touchstart(U,X,W)};lg.prototype.touchmove=function(U,X,W){this._zoomIn.touchmove(U,X,W);this._zoomOut.touchmove(U,X,W)};lg.prototype.touchend=function(U,X,W){var fa=this,za=this._zoomIn.touchend(U,X,W),Na=this._zoomOut.touchend(U,X,W);return za?(this._active=!0,U.preventDefault(),setTimeout(function(){return fa.reset()},0),{cameraAnimation:function(ab){return ab.easeTo({duration:300,zoom:ab.getZoom()+1,around:ab.unproject(za)},
{originalEvent:U})}}):Na?(this._active=!0,U.preventDefault(),setTimeout(function(){return fa.reset()},0),{cameraAnimation:function(ab){return ab.easeTo({duration:300,zoom:ab.getZoom()-1,around:ab.unproject(Na)},{originalEvent:U})}}):void 0};lg.prototype.touchcancel=function(){this.reset()};lg.prototype.enable=function(){this._enabled=!0};lg.prototype.disable=function(){this._enabled=!1;this.reset()};lg.prototype.isEnabled=function(){return this._enabled};lg.prototype.isActive=function(){return this._active};
var ag=function(U){this.reset();this._clickTolerance=U.clickTolerance||1};ag.prototype.reset=function(){this._moved=this._active=!1;delete this._lastPoint;delete this._eventButton};ag.prototype._correctButton=function(U,X){return!1};ag.prototype._move=function(U,X){return{}};ag.prototype.mousedown=function(U,X){if(!this._lastPoint){var W=Pa.mouseButton(U);this._correctButton(U,W)&&(this._lastPoint=X,this._eventButton=W)}};ag.prototype.mousemoveWindow=function(U,X){var W=this._lastPoint;if(W&&(U.preventDefault(),
this._moved||!(X.dist(W)<this._clickTolerance)))return this._moved=!0,this._lastPoint=X,this._move(W,X)};ag.prototype.mouseupWindow=function(U){Pa.mouseButton(U)===this._eventButton&&(this._moved&&Pa.suppressClick(),this.reset())};ag.prototype.enable=function(){this._enabled=!0};ag.prototype.disable=function(){this._enabled=!1;this.reset()};ag.prototype.isEnabled=function(){return this._enabled};ag.prototype.isActive=function(){return this._active};var xh=function(U){function X(){U.apply(this,arguments)}
return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.mousedown=function(W,fa){U.prototype.mousedown.call(this,W,fa);this._lastPoint&&(this._active=!0)},X.prototype._correctButton=function(W,fa){return 0===fa&&!W.ctrlKey},X.prototype._move=function(W,fa){return{around:fa,panDelta:fa.sub(W)}},X}(ag),yh=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype._correctButton=
function(W,fa){return 0===fa&&W.ctrlKey||2===fa},X.prototype._move=function(W,fa){if(W=.8*(fa.x-W.x))return this._active=!0,{bearingDelta:W}},X.prototype.contextmenu=function(W){W.preventDefault()},X}(ag),oi=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype._correctButton=function(W,fa){return 0===fa&&W.ctrlKey||2===fa},X.prototype._move=function(W,fa){if(W=-.5*(fa.y-W.y))return this._active=!0,{pitchDelta:W}},
X.prototype.contextmenu=function(W){W.preventDefault()},X}(ag),bg=function(U){this._minTouches=1;this._clickTolerance=U.clickTolerance||1;this.reset()};bg.prototype.reset=function(){this._active=!1;this._touches={};this._sum=new a.Point(0,0)};bg.prototype.touchstart=function(U,X,W){return this._calculateTransform(U,X,W)};bg.prototype.touchmove=function(U,X,W){if(this._active)return U.preventDefault(),this._calculateTransform(U,X,W)};bg.prototype.touchend=function(U,X,W){this._calculateTransform(U,
X,W);this._active&&W.length<this._minTouches&&this.reset()};bg.prototype.touchcancel=function(){this.reset()};bg.prototype._calculateTransform=function(U,X,W){0<W.length&&(this._active=!0);W=ha(W,X);U=new a.Point(0,0);var fa=new a.Point(0,0);X=0;for(var za in W){var Na=W[za],ab=this._touches[za];ab&&(U._add(Na),fa._add(Na.sub(ab)),X++,W[za]=Na)}if(this._touches=W,!(X<this._minTouches)&&fa.mag())if(za=fa.div(X),this._sum._add(za),!(this._sum.mag()<this._clickTolerance))return{around:U.div(X),panDelta:za}};
bg.prototype.enable=function(){this._enabled=!0};bg.prototype.disable=function(){this._enabled=!1;this.reset()};bg.prototype.isEnabled=function(){return this._enabled};bg.prototype.isActive=function(){return this._active};var vf=function(){this.reset()};vf.prototype.reset=function(){this._active=!1;delete this._firstTwoTouches};vf.prototype._start=function(U){};vf.prototype._move=function(U,X,W){return{}};vf.prototype.touchstart=function(U,X,W){this._firstTwoTouches||2>W.length||(this._firstTwoTouches=
[W[0].identifier,W[1].identifier],this._start([X[0],X[1]]))};vf.prototype.touchmove=function(U,X,W){if(this._firstTwoTouches){U.preventDefault();var fa=this._firstTwoTouches,za=fa[1];fa=ma(W,X,fa[0]);X=ma(W,X,za);if(fa&&X)return W=this._aroundCenter?null:fa.add(X).div(2),this._move([fa,X],W,U)}};vf.prototype.touchend=function(U,X,W){if(this._firstTwoTouches){var fa=this._firstTwoTouches;U=fa[1];fa=ma(W,X,fa[0]);X=ma(W,X,U);fa&&X||(this._active&&Pa.suppressClick(),this.reset())}};vf.prototype.touchcancel=
function(){this.reset()};vf.prototype.enable=function(U){this._enabled=!0;this._aroundCenter=!!U&&"center"===U.around};vf.prototype.disable=function(){this._enabled=!1;this.reset()};vf.prototype.isEnabled=function(){return this._enabled};vf.prototype.isActive=function(){return this._active};var qi=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.reset=function(){U.prototype.reset.call(this);delete this._distance;
delete this._startDistance},X.prototype._start=function(W){this._startDistance=this._distance=W[0].dist(W[1])},X.prototype._move=function(W,fa){var za=this._distance;if(this._distance=W[0].dist(W[1]),this._active||!(.1>Math.abs(Math.log(this._distance/this._startDistance)/Math.LN2)))return this._active=!0,{zoomDelta:Math.log(this._distance/za)/Math.LN2,pinchAround:fa}},X}(vf),eg=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=
X,X.prototype.reset=function(){U.prototype.reset.call(this);delete this._minDiameter;delete this._startVector;delete this._vector},X.prototype._start=function(W){this._startVector=this._vector=W[0].sub(W[1]);this._minDiameter=W[0].dist(W[1])},X.prototype._move=function(W,fa){var za=this._vector;if(this._vector=W[0].sub(W[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:180*this._vector.angleWith(za)/Math.PI,pinchAround:fa}},X.prototype._isBelowThreshold=
function(W){this._minDiameter=Math.min(this._minDiameter,W.mag());var fa=25/(Math.PI*this._minDiameter)*360;W=180*W.angleWith(this._startVector)/Math.PI;return Math.abs(W)<fa},X}(vf),Ff=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.reset=function(){U.prototype.reset.call(this);this._valid=void 0;delete this._firstMove;delete this._lastPoints},X.prototype._start=function(W){this._lastPoints=W;wa(W[0].sub(W[1]))&&
(this._valid=!1)},X.prototype._move=function(W,fa,za){fa=W[0].sub(this._lastPoints[0]);var Na=W[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(fa,Na,za.timeStamp),this._valid)return this._lastPoints=W,this._active=!0,{pitchDelta:(fa.y+Na.y)/2*-.5}},X.prototype.gestureBeginsVertically=function(W,fa,za){if(void 0!==this._valid)return this._valid;var Na=2<=W.mag(),ab=2<=fa.mag();if(Na||ab){if(!Na||!ab)return void 0===this._firstMove&&(this._firstMove=za),100>za-this._firstMove&&
void 0;za=0<W.y==0<fa.y;return wa(W)&&wa(fa)&&za}},X}(vf),kh=function(){this._panStep=100;this._bearingStep=15;this._pitchStep=10};kh.prototype.reset=function(){this._active=!1};kh.prototype.keydown=function(U){var X=this;if(!(U.altKey||U.ctrlKey||U.metaKey)){var W=0,fa=0,za=0,Na=0,ab=0;switch(U.keyCode){case 61:case 107:case 171:case 187:W=1;break;case 189:case 109:case 173:W=-1;break;case 37:U.shiftKey?fa=-1:(U.preventDefault(),Na=-1);break;case 39:U.shiftKey?fa=1:(U.preventDefault(),Na=1);break;
case 38:U.shiftKey?za=1:(U.preventDefault(),ab=-1);break;case 40:U.shiftKey?za=-1:(U.preventDefault(),ab=1);break;default:return}return{cameraAnimation:function(mb){var Mb=mb.getZoom();mb.easeTo({duration:300,easeId:"keyboardHandler",easing:na,zoom:W?Math.round(Mb)+W*(U.shiftKey?2:1):Mb,bearing:mb.getBearing()+fa*X._bearingStep,pitch:mb.getPitch()+za*X._pitchStep,offset:[-Na*X._panStep,-ab*X._panStep],center:mb.getCenter()},{originalEvent:U})}}}};kh.prototype.enable=function(){this._enabled=!0};kh.prototype.disable=
function(){this._enabled=!1;this.reset()};kh.prototype.isEnabled=function(){return this._enabled};kh.prototype.isActive=function(){return this._active};var wf=function(U,X){this._map=U;this._el=U.getCanvasContainer();this._handler=X;this._delta=0;this._defaultZoomRate=.01;this._wheelZoomRate=1/450;a.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};wf.prototype.setZoomRate=function(U){this._defaultZoomRate=U};wf.prototype.setWheelZoomRate=function(U){this._wheelZoomRate=
U};wf.prototype.isEnabled=function(){return!!this._enabled};wf.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout};wf.prototype.isZooming=function(){return!!this._zooming};wf.prototype.enable=function(U){this.isEnabled()||(this._enabled=!0,this._aroundCenter=U&&"center"===U.around)};wf.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};wf.prototype.wheel=function(U){if(this.isEnabled()){var X=U.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*U.deltaY:
U.deltaY,W=a.browser.now(),fa=W-(this._lastWheelEventTime||0);this._lastWheelEventTime=W;0!==X&&0==X%4.000244140625?this._type="wheel":0!==X&&4>Math.abs(X)?this._type="trackpad":400<fa?(this._type=null,this._lastValue=X,this._timeout=setTimeout(this._onTimeout,40,U)):this._type||(this._type=200>Math.abs(fa*X)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,X+=this._lastValue));U.shiftKey&&X&&(X/=4);this._type&&(this._lastWheelEvent=U,this._delta-=X,this._active||
this._start(U));U.preventDefault()}};wf.prototype._onTimeout=function(U){this._type="wheel";this._delta-=this._lastValue;this._active||this._start(U)};wf.prototype._start=function(U){this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),U=Pa.mousePos(this._el,U),this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(U)),this._aroundPoint=
this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))};wf.prototype.renderFrame=function(){return this._onScrollFrame()};wf.prototype._onScrollFrame=function(){var U=this;if(this._frameId&&(this._frameId=null,this.isActive())){var X=this._map.transform;if(0!==this._delta){var W=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate))));0>this._delta&&
0!==W&&(W=1/W);var fa="number"==typeof this._targetZoom?X.zoomScale(this._targetZoom):X.scale;this._targetZoom=Math.min(X.maxZoom,Math.max(X.minZoom,X.scaleZoom(fa*W)));"wheel"===this._type&&(this._startZoom=X.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}var za="number"==typeof this._targetZoom?this._targetZoom:X.zoom;var Na=this._startZoom,ab=this._easing;W=!1;"wheel"===this._type&&Na&&ab?(fa=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),ab=ab(fa),za=a.number(Na,za,ab),
1>fa?this._frameId||(this._frameId=!0):W=!0):W=!0;return this._active=!0,W&&(this._active=!1,this._finishTimeout=setTimeout(function(){U._zooming=!1;U._handler._triggerRenderFrame();delete U._targetZoom;delete U._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!W,zoomDelta:za-X.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}};wf.prototype._smoothOutEasing=function(U){var X=a.ease;if(this._prevEase){X=this._prevEase;var W=(a.browser.now()-X.start)/X.duration;X=X.easing(W+.01)-
X.easing(W);X=.27/Math.sqrt(X*X+1E-4)*.01;X=a.bezier(X,Math.sqrt(.0729-X*X),.25,1)}return this._prevEase={start:a.browser.now(),duration:U,easing:X},X};wf.prototype.reset=function(){this._active=!1};var Zh=function(U,X){this._clickZoom=U;this._tapZoom=X};Zh.prototype.enable=function(){this._clickZoom.enable();this._tapZoom.enable()};Zh.prototype.disable=function(){this._clickZoom.disable();this._tapZoom.disable()};Zh.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()};
Zh.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var nh=function(){this.reset()};nh.prototype.reset=function(){this._active=!1};nh.prototype.dblclick=function(U,X){return U.preventDefault(),{cameraAnimation:function(W){W.easeTo({duration:300,zoom:W.getZoom()+(U.shiftKey?-1:1),around:W.unproject(X)},{originalEvent:U})}}};nh.prototype.enable=function(){this._enabled=!0};nh.prototype.disable=function(){this._enabled=!1;this.reset()};nh.prototype.isEnabled=
function(){return this._enabled};nh.prototype.isActive=function(){return this._active};var mg=function(){this._tap=new Ng({numTouches:1,numTaps:1});this.reset()};mg.prototype.reset=function(){this._active=!1;delete this._swipePoint;delete this._swipeTouch;delete this._tapTime;this._tap.reset()};mg.prototype.touchstart=function(U,X,W){this._swipePoint||(this._tapTime&&500<U.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<W.length&&(this._swipePoint=X[0],this._swipeTouch=W[0].identifier):this._tap.touchstart(U,
X,W))};mg.prototype.touchmove=function(U,X,W){if(this._tapTime){if(this._swipePoint&&W[0].identifier===this._swipeTouch)return X=X[0],W=X.y-this._swipePoint.y,this._swipePoint=X,U.preventDefault(),this._active=!0,{zoomDelta:W/128}}else this._tap.touchmove(U,X,W)};mg.prototype.touchend=function(U,X,W){this._tapTime?this._swipePoint&&0===W.length&&this.reset():this._tap.touchend(U,X,W)&&(this._tapTime=U.timeStamp)};mg.prototype.touchcancel=function(){this.reset()};mg.prototype.enable=function(){this._enabled=
!0};mg.prototype.disable=function(){this._enabled=!1;this.reset()};mg.prototype.isEnabled=function(){return this._enabled};mg.prototype.isActive=function(){return this._active};var Vg=function(U,X,W){this._el=U;this._mousePan=X;this._touchPan=W};Vg.prototype.enable=function(U){this._inertiaOptions=U||{};this._mousePan.enable();this._touchPan.enable();this._el.classList.add("mapboxgl-touch-drag-pan")};Vg.prototype.disable=function(){this._mousePan.disable();this._touchPan.disable();this._el.classList.remove("mapboxgl-touch-drag-pan")};
Vg.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()};Vg.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var lh=function(U,X,W){this._pitchWithRotate=U.pitchWithRotate;this._mouseRotate=X;this._mousePitch=W};lh.prototype.enable=function(){this._mouseRotate.enable();this._pitchWithRotate&&this._mousePitch.enable()};lh.prototype.disable=function(){this._mouseRotate.disable();this._mousePitch.disable()};lh.prototype.isEnabled=
function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())};lh.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ng=function(U,X,W,fa){this._el=U;this._touchZoom=X;this._touchRotate=W;this._tapDragZoom=fa;this._rotationDisabled=!1;this._enabled=!0};ng.prototype.enable=function(U){this._touchZoom.enable(U);this._rotationDisabled||this._touchRotate.enable(U);this._tapDragZoom.enable();this._el.classList.add("mapboxgl-touch-zoom-rotate")};
ng.prototype.disable=function(){this._touchZoom.disable();this._touchRotate.disable();this._tapDragZoom.disable();this._el.classList.remove("mapboxgl-touch-zoom-rotate")};ng.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()};ng.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()};ng.prototype.disableRotation=function(){this._rotationDisabled=
!0;this._touchRotate.disable()};ng.prototype.enableRotation=function(){this._rotationDisabled=!1;this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ri=function(U){return U.zoom||U.drag||U.pitch||U.rotate},uj=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X}(a.Event),ge=function(U,X){this._map=U;this._el=this._map.getCanvasContainer();this._handlers=[];this._handlersById={};this._changes=[];this._inertia=
new Eg(U);this._bearingSnap=X.bearingSnap;this._previousActiveHandlers={};this._eventsInProgress={};this._addDefaultHandlers(X);a.bindAll(["handleEvent","handleWindowEvent"],this);U=this._el;this._listeners=[[U,"touchstart",{passive:!1}],[U,"touchmove",{passive:!1}],[U,"touchend",void 0],[U,"touchcancel",void 0],[U,"mousedown",void 0],[U,"mousemove",void 0],[U,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[U,"mouseover",void 0],[U,"mouseout",void 0],
[U,"dblclick",void 0],[U,"click",void 0],[U,"keydown",{capture:!1}],[U,"keyup",void 0],[U,"wheel",{passive:!1}],[U,"contextmenu",void 0],[a.window,"blur",void 0]];U=0;for(X=this._listeners;U<X.length;U+=1){var W=X[U],fa=W[0];Pa.addEventListener(fa,W[1],fa===a.window.document?this.handleWindowEvent:this.handleEvent,W[2])}};ge.prototype.destroy=function(){for(var U=0,X=this._listeners;U<X.length;U+=1){var W=X[U],fa=W[0];Pa.removeEventListener(fa,W[1],fa===a.window.document?this.handleWindowEvent:this.handleEvent,
W[2])}};ge.prototype._addDefaultHandlers=function(U){var X=this._map,W=X.getCanvasContainer();this._add("mapEvent",new Bf(X,U));var fa=X.boxZoom=new Rf(X,U);this._add("boxZoom",fa);fa=new lg;var za=new nh;X.doubleClickZoom=new Zh(za,fa);this._add("tapZoom",fa);this._add("clickZoom",za);fa=new mg;this._add("tapDragZoom",fa);za=X.touchPitch=new Ff;this._add("touchPitch",za);za=new yh(U);var Na=new oi(U);X.dragRotate=new lh(U,za,Na);this._add("mouseRotate",za,["mousePitch"]);this._add("mousePitch",Na,
["mouseRotate"]);za=new xh(U);Na=new bg(U);X.dragPan=new Vg(W,za,Na);this._add("mousePan",za);this._add("touchPan",Na,["touchZoom","touchRotate"]);za=new eg;Na=new qi;X.touchZoomRotate=new ng(W,Na,za,fa);this._add("touchRotate",za,["touchPan","touchZoom"]);this._add("touchZoom",Na,["touchPan","touchRotate"]);W=X.scrollZoom=new wf(X,this);this._add("scrollZoom",W,["mousePan"]);W=X.keyboard=new kh;this._add("keyboard",W);this._add("blockableMapEvent",new Fg(X));W=0;for(fa="boxZoom doubleClickZoom tapDragZoom touchPitch dragRotate dragPan touchZoomRotate scrollZoom keyboard".split(" ");W<
fa.length;W+=1)za=fa[W],U.interactive&&U[za]&&X[za].enable(U[za])};ge.prototype._add=function(U,X,W){this._handlers.push({handlerName:U,handler:X,allowed:W});this._handlersById[U]=X};ge.prototype.stop=function(){if(!this._updatingCamera){for(var U=0,X=this._handlers;U<X.length;U+=1)X[U].handler.reset();this._inertia.clear();this._fireEvents({},{});this._changes=[]}};ge.prototype.isActive=function(){for(var U=0,X=this._handlers;U<X.length;U+=1)if(X[U].handler.isActive())return!0;return!1};ge.prototype.isZooming=
function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()};ge.prototype.isRotating=function(){return!!this._eventsInProgress.rotate};ge.prototype.isMoving=function(){return!!ri(this._eventsInProgress)||this.isZooming()};ge.prototype._blockedByActive=function(U,X,W){for(var fa in U)if(fa!==W&&(!X||0>X.indexOf(fa)))return!0;return!1};ge.prototype.handleWindowEvent=function(U){this.handleEvent(U,U.type+"Window")};ge.prototype._getMapTouches=function(U){for(var X=[],W=0;W<U.length;W+=
1){var fa=U[W];this._el.contains(fa.target)&&X.push(fa)}return X};ge.prototype.handleEvent=function(U,X){if("blur"!==U.type){this._updatingCamera=!0;for(var W="renderFrame"===U.type?void 0:U,fa={needsRenderFrame:!1},za={},Na={},ab=U.touches?this._getMapTouches(U.touches):void 0,mb=ab?Pa.touchPos(this._el,ab):Pa.mousePos(this._el,U),Mb=0,Ub=this._handlers;Mb<Ub.length;Mb+=1){var Zb=Ub[Mb],Jc=Zb.handlerName,Ic=Zb.handler;Zb=Zb.allowed;if(Ic.isEnabled()){var yc=void 0;this._blockedByActive(Na,Zb,Jc)?
Ic.reset():Ic[X||U.type]&&(yc=Ic[X||U.type](U,mb,ab),this.mergeHandlerResult(fa,za,yc,Jc,W),yc&&yc.needsRenderFrame&&this._triggerRenderFrame());(yc||Ic.isActive())&&(Na[Jc]=Ic)}}U={};for(var Hc in this._previousActiveHandlers)Na[Hc]||(U[Hc]=W);this._previousActiveHandlers=Na;(Object.keys(U).length||ya(fa))&&(this._changes.push([fa,za,U]),this._triggerRenderFrame());(Object.keys(Na).length||ya(fa))&&this._map._stop(!0);this._updatingCamera=!1;(W=fa.cameraAnimation)&&(this._inertia.clear(),this._fireEvents({},
{}),this._changes=[],W(this._map))}else this.stop()};ge.prototype.mergeHandlerResult=function(U,X,W,fa,za){W&&(a.extend(U,W),U={handlerName:fa,originalEvent:W.originalEvent||za},void 0!==W.zoomDelta&&(X.zoom=U),void 0!==W.panDelta&&(X.drag=U),void 0!==W.pitchDelta&&(X.pitch=U),void 0!==W.bearingDelta&&(X.rotate=U))};ge.prototype._applyChanges=function(){for(var U={},X={},W={},fa=0,za=this._changes;fa<za.length;fa+=1){var Na=za[fa],ab=Na[0],mb=Na[1];Na=Na[2];ab.panDelta&&(U.panDelta=(U.panDelta||new a.Point(0,
0))._add(ab.panDelta));ab.zoomDelta&&(U.zoomDelta=(U.zoomDelta||0)+ab.zoomDelta);ab.bearingDelta&&(U.bearingDelta=(U.bearingDelta||0)+ab.bearingDelta);ab.pitchDelta&&(U.pitchDelta=(U.pitchDelta||0)+ab.pitchDelta);void 0!==ab.around&&(U.around=ab.around);void 0!==ab.pinchAround&&(U.pinchAround=ab.pinchAround);ab.noInertia&&(U.noInertia=ab.noInertia);a.extend(X,mb);a.extend(W,Na)}this._updateMapTransform(U,X,W);this._changes=[]};ge.prototype._updateMapTransform=function(U,X,W){var fa=this._map,za=fa.transform;
if(!ya(U))return this._fireEvents(X,W);var Na=U.panDelta,ab=U.zoomDelta,mb=U.bearingDelta,Mb=U.pitchDelta,Ub=U.around,Zb=U.pinchAround;void 0!==Zb&&(Ub=Zb);fa._stop(!0);Ub=Ub||fa.transform.centerPoint;fa=za.pointLocation(Na?Ub.sub(Na):Ub);mb&&(za.bearing+=mb);Mb&&(za.pitch+=Mb);ab&&(za.zoom+=ab);za.setLocationAtPoint(fa,Ub);this._map._update();U.noInertia||this._inertia.record(U);this._fireEvents(X,W)};ge.prototype._fireEvents=function(U,X){var W=this,fa=ri(this._eventsInProgress),za=ri(U),Na={};
for(Zb in U)this._eventsInProgress[Zb]||(Na[Zb+"start"]=U[Zb].originalEvent),this._eventsInProgress[Zb]=U[Zb];for(var ab in!fa&&za&&this._fireEvent("movestart",za.originalEvent),Na)this._fireEvent(ab,Na[ab]);for(var mb in U.rotate&&(this._bearingChanged=!0),za&&this._fireEvent("move",za.originalEvent),U)this._fireEvent(mb,U[mb].originalEvent);var Mb;U={};for(var Ub in this._eventsInProgress){var Zb=this._eventsInProgress[Ub];Na=Zb.handlerName;Zb=Zb.originalEvent;this._handlersById[Na].isActive()||
(delete this._eventsInProgress[Ub],U[Ub+"end"]=Mb=X[Na]||Zb)}for(var Jc in U)this._fireEvent(Jc,U[Jc]);X=ri(this._eventsInProgress);!fa&&!za||X||(this._updatingCamera=!0,fa=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),za=function(Ic){return 0!==Ic&&-W._bearingSnap<Ic&&Ic<W._bearingSnap},fa?(za(fa.bearing||this._map.getBearing())&&(fa.bearing=0),this._map.easeTo(fa,{originalEvent:Mb})):(this._map.fire(new a.Event("moveend",{originalEvent:Mb})),za(this._map.getBearing())&&this._map.resetNorth()),
this._updatingCamera=this._bearingChanged=!1)};ge.prototype._fireEvent=function(U,X){this._map.fire(new a.Event(U,X?{originalEvent:X}:{}))};ge.prototype._triggerRenderFrame=function(){var U=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(X){delete U._frameId;U.handleEvent(new uj("renderFrame",{timeStamp:X}));U._applyChanges()}))};var vj=function(U){function X(W,fa){U.call(this);this._zooming=this._moving=!1;this.transform=W;this._bearingSnap=fa.bearingSnap;a.bindAll(["_renderFrameCallback"],
this)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},X.prototype.setCenter=function(W,fa){return this.jumpTo({center:W},fa)},X.prototype.panBy=function(W,fa,za){return W=a.Point.convert(W).mult(-1),this.panTo(this.transform.center,a.extend({offset:W},fa),za)},X.prototype.panTo=function(W,fa,za){return this.easeTo(a.extend({center:W},fa),za)},X.prototype.getZoom=
function(){return this.transform.zoom},X.prototype.setZoom=function(W,fa){return this.jumpTo({zoom:W},fa),this},X.prototype.zoomTo=function(W,fa,za){return this.easeTo(a.extend({zoom:W},fa),za)},X.prototype.zoomIn=function(W,fa){return this.zoomTo(this.getZoom()+1,W,fa),this},X.prototype.zoomOut=function(W,fa){return this.zoomTo(this.getZoom()-1,W,fa),this},X.prototype.getBearing=function(){return this.transform.bearing},X.prototype.setBearing=function(W,fa){return this.jumpTo({bearing:W},fa),this},
X.prototype.getPadding=function(){return this.transform.padding},X.prototype.setPadding=function(W,fa){return this.jumpTo({padding:W},fa),this},X.prototype.rotateTo=function(W,fa,za){return this.easeTo(a.extend({bearing:W},fa),za)},X.prototype.resetNorth=function(W,fa){return this.rotateTo(0,a.extend({duration:1E3},W),fa),this},X.prototype.resetNorthPitch=function(W,fa){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1E3},W),fa),this},X.prototype.snapToNorth=function(W,fa){return Math.abs(this.getBearing())<
this._bearingSnap?this.resetNorth(W,fa):this},X.prototype.getPitch=function(){return this.transform.pitch},X.prototype.setPitch=function(W,fa){return this.jumpTo({pitch:W},fa),this},X.prototype.cameraForBounds=function(W,fa){return W=a.LngLatBounds.convert(W),this._cameraForBoxAndBearing(W.getNorthWest(),W.getSouthEast(),0,fa)},X.prototype._cameraForBoxAndBearing=function(W,fa,za,Na){var ab={top:0,bottom:0,right:0,left:0};if("number"==typeof(Na=a.extend({padding:ab,offset:[0,0],maxZoom:this.transform.maxZoom},
Na)).padding){var mb=Na.padding;Na.padding={top:mb,bottom:mb,right:mb,left:mb}}Na.padding=a.extend(ab,Na.padding);ab=this.transform;mb=ab.padding;W=ab.project(a.LngLat.convert(W));fa=ab.project(a.LngLat.convert(fa));var Mb=W.rotate(-za*Math.PI/180),Ub=fa.rotate(-za*Math.PI/180),Zb=new a.Point(Math.max(Mb.x,Ub.x),Math.max(Mb.y,Ub.y));Mb=new a.Point(Math.min(Mb.x,Ub.x),Math.min(Mb.y,Ub.y));Mb=Zb.sub(Mb);Zb=(ab.width-(mb.left+mb.right+Na.padding.left+Na.padding.right))/Mb.x;mb=(ab.height-(mb.top+mb.bottom+
Na.padding.top+Na.padding.bottom))/Mb.y;if(!(0>mb||0>Zb))return mb=Math.min(ab.scaleZoom(ab.scale*Math.min(Zb,mb)),Na.maxZoom),Zb=a.Point.convert(Na.offset),Na=(new a.Point(Zb.x+(Na.padding.left-Na.padding.right)/2,Zb.y+(Na.padding.top-Na.padding.bottom)/2)).mult(ab.scale/ab.zoomScale(mb)),{center:ab.unproject(W.add(fa).div(2).sub(Na)),zoom:mb,bearing:za};a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},X.prototype.fitBounds=function(W,fa,za){return this._fitInternal(this.cameraForBounds(W,
fa),fa,za)},X.prototype.fitScreenCoordinates=function(W,fa,za,Na,ab){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(W)),this.transform.pointLocation(a.Point.convert(fa)),za,Na),Na,ab)},X.prototype._fitInternal=function(W,fa,za){return W?(delete (fa=a.extend(W,fa)).padding,fa.linear?this.easeTo(fa,za):this.flyTo(fa,za)):this},X.prototype.jumpTo=function(W,fa){this.stop();var za=this.transform,Na=!1,ab=!1,mb=!1;return"zoom"in W&&za.zoom!==+W.zoom&&
(Na=!0,za.zoom=+W.zoom),void 0!==W.center&&(za.center=a.LngLat.convert(W.center)),"bearing"in W&&za.bearing!==+W.bearing&&(ab=!0,za.bearing=+W.bearing),"pitch"in W&&za.pitch!==+W.pitch&&(mb=!0,za.pitch=+W.pitch),null==W.padding||za.isPaddingEqual(W.padding)||(za.padding=W.padding),this.fire(new a.Event("movestart",fa)).fire(new a.Event("move",fa)),Na&&this.fire(new a.Event("zoomstart",fa)).fire(new a.Event("zoom",fa)).fire(new a.Event("zoomend",fa)),ab&&this.fire(new a.Event("rotatestart",fa)).fire(new a.Event("rotate",
fa)).fire(new a.Event("rotateend",fa)),mb&&this.fire(new a.Event("pitchstart",fa)).fire(new a.Event("pitch",fa)).fire(new a.Event("pitchend",fa)),this.fire(new a.Event("moveend",fa))},X.prototype.easeTo=function(W,fa){var za=this;this._stop(!1,W.easeId);(!1===(W=a.extend({offset:[0,0],duration:500,easing:a.ease},W)).animate||!W.essential&&a.browser.prefersReducedMotion)&&(W.duration=0);var Na=this.transform,ab=this.getZoom(),mb=this.getBearing(),Mb=this.getPitch(),Ub=this.getPadding(),Zb="zoom"in
W?+W.zoom:ab,Jc="bearing"in W?this._normalizeBearing(W.bearing,mb):mb,Ic="pitch"in W?+W.pitch:Mb,yc="padding"in W?W.padding:Na.padding,Hc=a.Point.convert(W.offset),Dc=Na.centerPoint.add(Hc),Xb=Na.pointLocation(Dc),va=a.LngLat.convert(W.center||Xb);this._normalizeCenter(va);var Da,Oa,bb=Na.project(Xb),nb=Na.project(va).sub(bb),Kb=Na.zoomScale(Zb-ab);W.around&&(Da=a.LngLat.convert(W.around),Oa=Na.locationPoint(Da));Xb={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};
return this._zooming=this._zooming||Zb!==ab,this._rotating=this._rotating||mb!==Jc,this._pitching=this._pitching||Ic!==Mb,this._padding=!Na.isPaddingEqual(yc),this._easeId=W.easeId,this._prepareEase(fa,W.noMoveStart,Xb),clearTimeout(this._easeEndTimeoutID),this._ease(function(Pb){if(za._zooming&&(Na.zoom=a.number(ab,Zb,Pb)),za._rotating&&(Na.bearing=a.number(mb,Jc,Pb)),za._pitching&&(Na.pitch=a.number(Mb,Ic,Pb)),za._padding&&(Na.interpolatePadding(Ub,yc,Pb),Dc=Na.centerPoint.add(Hc)),Da)Na.setLocationAtPoint(Da,
Oa);else{var pc=Na.zoomScale(Na.zoom-ab);Pb=Na.unproject(bb.add(nb.mult(Pb*Math.pow(Zb>ab?Math.min(2,Kb):Math.max(.5,Kb),1-Pb))).mult(pc));Na.setLocationAtPoint(Na.renderWorldCopies?Pb.wrap():Pb,Dc)}za._fireMoveEvents(fa)},function(Pb){za._afterEase(fa,Pb)},W),this},X.prototype._prepareEase=function(W,fa,za){void 0===za&&(za={});this._moving=!0;fa||za.moving||this.fire(new a.Event("movestart",W));this._zooming&&!za.zooming&&this.fire(new a.Event("zoomstart",W));this._rotating&&!za.rotating&&this.fire(new a.Event("rotatestart",
W));this._pitching&&!za.pitching&&this.fire(new a.Event("pitchstart",W))},X.prototype._fireMoveEvents=function(W){this.fire(new a.Event("move",W));this._zooming&&this.fire(new a.Event("zoom",W));this._rotating&&this.fire(new a.Event("rotate",W));this._pitching&&this.fire(new a.Event("pitch",W))},X.prototype._afterEase=function(W,fa){if(!this._easeId||!fa||this._easeId!==fa){delete this._easeId;fa=this._zooming;var za=this._rotating,Na=this._pitching;this._padding=this._pitching=this._rotating=this._zooming=
this._moving=!1;fa&&this.fire(new a.Event("zoomend",W));za&&this.fire(new a.Event("rotateend",W));Na&&this.fire(new a.Event("pitchend",W));this.fire(new a.Event("moveend",W))}},X.prototype.flyTo=function(W,fa){function za(Pd){Pd=(hc*hc-pc*pc+(Pd?-1:1)*Xc*Xc*kc*kc)/(2*(Pd?hc:pc)*Xc*kc);return Math.log(Math.sqrt(Pd*Pd+1)-Pd)}function Na(Pd){return(Math.exp(Pd)+Math.exp(-Pd))/2}var ab=this;if(!W.essential&&a.browser.prefersReducedMotion)return W=a.pick(W,["center","zoom","bearing","pitch","around"]),
this.jumpTo(W,fa);this.stop();W=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},W);var mb=this.transform,Mb=this.getZoom(),Ub=this.getBearing(),Zb=this.getPitch(),Jc=this.getPadding(),Ic="zoom"in W?a.clamp(+W.zoom,mb.minZoom,mb.maxZoom):Mb,yc="bearing"in W?this._normalizeBearing(W.bearing,Ub):Ub,Hc="pitch"in W?+W.pitch:Zb,Dc="padding"in W?W.padding:mb.padding,Xb=mb.zoomScale(Ic-Mb),va=a.Point.convert(W.offset),Da=mb.centerPoint.add(va),Oa=mb.pointLocation(Da),bb=a.LngLat.convert(W.center||
Oa);this._normalizeCenter(bb);var nb=mb.project(Oa),Kb=mb.project(bb).sub(nb),Pb=W.curve,pc=Math.max(mb.width,mb.height),hc=pc/Xb,kc=Kb.mag();"minZoom"in W&&(Xb=a.clamp(Math.min(W.minZoom,Mb,Ic),mb.minZoom,mb.maxZoom),Xb=pc/mb.zoomScale(Xb-Mb),Pb=Math.sqrt(Xb/kc*2));var Xc=Pb*Pb,fd=za(0),rd=function(Pd){return Na(fd)/Na(fd+Pb*Pd)},zd=function(Pd){var fe=Na(fd);Pd=Xd=fd+Pb*Pd;return pc*((fe*((Math.exp(Pd)-Math.exp(-Pd))/2/Na(Xd))-(Math.exp(fd)-Math.exp(-fd))/2)/Xc)/kc;var Xd},Hd=(za(1)-fd)/Pb;if(1E-6>
Math.abs(kc)||!isFinite(Hd)){if(1E-6>Math.abs(pc-hc))return this.easeTo(W,fa);var Bd=hc<pc?-1:1;Hd=Math.abs(Math.log(hc/pc))/Pb;zd=function(){return 0};rd=function(Pd){return Math.exp(Bd*Pb*Pd)}}return W.duration="duration"in W?+W.duration:1E3*Hd/("screenSpeed"in W?+W.screenSpeed/Pb:+W.speed),W.maxDuration&&W.duration>W.maxDuration&&(W.duration=0),this._zooming=!0,this._rotating=Ub!==yc,this._pitching=Hc!==Zb,this._padding=!mb.isPaddingEqual(Dc),this._prepareEase(fa,!1),this._ease(function(Pd){var fe=
Pd*Hd,Xd=1/rd(fe);mb.zoom=1===Pd?Ic:Mb+mb.scaleZoom(Xd);ab._rotating&&(mb.bearing=a.number(Ub,yc,Pd));ab._pitching&&(mb.pitch=a.number(Zb,Hc,Pd));ab._padding&&(mb.interpolatePadding(Jc,Dc,Pd),Da=mb.centerPoint.add(va));Pd=1===Pd?bb:mb.unproject(nb.add(Kb.mult(zd(fe))).mult(Xd));mb.setLocationAtPoint(mb.renderWorldCopies?Pd.wrap():Pd,Da);ab._fireMoveEvents(fa)},function(){return ab._afterEase(fa)},W),this},X.prototype.isEasing=function(){return!!this._easeFrameId},X.prototype.stop=function(){return this._stop()},
X.prototype._stop=function(W,fa){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var za=this._onEaseEnd;delete this._onEaseEnd;za.call(this,fa)}W||(W=this.handlers)&&W.stop();return this},X.prototype._ease=function(W,fa,za){!1===za.animate||0===za.duration?(W(1),fa()):(this._easeStart=a.browser.now(),this._easeOptions=za,this._onEaseFrame=W,this._onEaseEnd=fa,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},
X.prototype._renderFrameCallback=function(){var W=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(W));1>W?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},X.prototype._normalizeBearing=function(W,fa){W=a.wrap(W,-180,180);var za=Math.abs(W-fa);return Math.abs(W-360-fa)<za&&(W-=360),Math.abs(W+360-fa)<za&&(W+=360),W},X.prototype._normalizeCenter=function(W){var fa=this.transform;fa.renderWorldCopies&&
!fa.lngRange&&(fa=W.lng-fa.center.lng,W.lng+=180<fa?-360:-180>fa?360:0)},X}(a.Evented),Gg=function(U){void 0===U&&(U={});this.options=U;a.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Gg.prototype.getDefaultPosition=function(){return"bottom-right"};Gg.prototype.onAdd=function(U){var X=this.options&&this.options.compact;return this._map=U,this._container=Pa.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=Pa.create("div","mapboxgl-ctrl-attrib-inner",this._container),
X&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===X&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};Gg.prototype.onRemove=function(){Pa.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",
this._updateEditLink);this._map.off("resize",this._updateCompact);this._attribHTML=this._map=void 0};Gg.prototype._updateEditLink=function(){var U=this._editLink;U||(U=this._editLink=this._container.querySelector(".mapbox-improve-map"));var X=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(U){var W=X.reduce(function(fa,za,Na){return za.value&&(fa+=za.key+"\x3d"+za.value+(Na<X.length-
1?"\x26":"")),fa},"?");U.href=a.config.FEEDBACK_URL+"/"+W+(this._map._hash?this._map._hash.getHashString(!0):"");U.rel="noopener nofollow"}};Gg.prototype._updateData=function(U){!U||"metadata"!==U.sourceDataType&&"style"!==U.dataType||(this._updateAttributions(),this._updateEditLink())};Gg.prototype._updateAttributions=function(){if(this._map.style){var U=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?U=U.concat(this.options.customAttribution.map(function(za){return"string"!=
typeof za?"":za})):"string"==typeof this.options.customAttribution&&U.push(this.options.customAttribution)),this._map.style.stylesheet){var X=this._map.style.stylesheet;this.styleOwner=X.owner;this.styleId=X.id}X=this._map.style.sourceCaches;for(var W in X){var fa=X[W];fa.used&&(fa=fa.getSource(),fa.attribution&&0>U.indexOf(fa.attribution)&&U.push(fa.attribution))}U.sort(function(za,Na){return za.length-Na.length});W=(U=U.filter(function(za,Na){for(Na+=1;Na<U.length;Na++)if(0<=U[Na].indexOf(za))return!1;
return!0})).join(" | ");W!==this._attribHTML&&(this._attribHTML=W,U.length?(this._innerContainer.innerHTML=W,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}};Gg.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Hg=function(){a.bindAll(["_updateLogo"],this);a.bindAll(["_updateCompact"],
this)};Hg.prototype.onAdd=function(U){this._map=U;this._container=Pa.create("div","mapboxgl-ctrl");U=Pa.create("a","mapboxgl-ctrl-logo");return U.target="_blank",U.rel="noopener nofollow",U.href="https://www.mapbox.com/",U.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),U.setAttribute("rel","noopener nofollow"),this._container.appendChild(U),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),
this._updateCompact(),this._container};Hg.prototype.onRemove=function(){Pa.remove(this._container);this._map.off("sourcedata",this._updateLogo);this._map.off("resize",this._updateCompact)};Hg.prototype.getDefaultPosition=function(){return"bottom-left"};Hg.prototype._updateLogo=function(U){U&&"metadata"!==U.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};Hg.prototype._logoRequired=function(){if(this._map.style){var U=this._map.style.sourceCaches,X;for(X in U)if(U[X].getSource().mapbox_logo)return!0;
return!1}};Hg.prototype._updateCompact=function(){var U=this._container.children;U.length&&(U=U[0],250>this._map.getCanvasContainer().offsetWidth?U.classList.add("mapboxgl-compact"):U.classList.remove("mapboxgl-compact"))};var oh=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};oh.prototype.add=function(U){var X=++this._id;return this._queue.push({callback:U,id:X,cancelled:!1}),X};oh.prototype.remove=function(U){var X=this._currentlyRunning,W=0;for(X=X?this._queue.concat(X):
this._queue;W<X.length;W+=1){var fa=X[W];if(fa.id===U)return void(fa.cancelled=!0)}};oh.prototype.run=function(U){void 0===U&&(U=0);var X=this._currentlyRunning=this._queue;this._queue=[];for(var W=0;W<X.length;W+=1){var fa=X[W];if(!fa.cancelled&&(fa.callback(U),this._cleared))break}this._currentlyRunning=this._cleared=!1};oh.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var Xg={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen",
"GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Gh=a.window.HTMLImageElement,bi=a.window.HTMLElement,Ig=a.window.ImageBitmap,
wj={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,
fadeDuration:300,crossSourceCollisions:!0},Fi=function(U){function X(fa){var za=this;if(null!=(fa=a.extend({},wj,fa)).minZoom&&null!=fa.maxZoom&&fa.minZoom>fa.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=fa.minPitch&&null!=fa.maxPitch&&fa.minPitch>fa.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=fa.minPitch&&0>fa.minPitch)throw Error("minPitch must be greater than or equal to 0");if(null!=fa.maxPitch&&60<fa.maxPitch)throw Error("maxPitch must be less than or equal to 60");
var Na=new Te(fa.minZoom,fa.maxZoom,fa.minPitch,fa.maxPitch,fa.renderWorldCopies);if(U.call(this,Na,fa),this._interactive=fa.interactive,this._maxTileCacheSize=fa.maxTileCacheSize,this._failIfMajorPerformanceCaveat=fa.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=fa.preserveDrawingBuffer,this._antialias=fa.antialias,this._trackResize=fa.trackResize,this._bearingSnap=fa.bearingSnap,this._refreshExpiredTiles=fa.refreshExpiredTiles,this._fadeDuration=fa.fadeDuration,this._crossSourceCollisions=
fa.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=fa.collectResourceTiming,this._renderTaskQueue=new oh,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Xg,fa.locale),this._requestManager=new a.RequestManager(fa.transformRequest,fa.accessToken),"string"==typeof fa.container){if(this._container=a.window.document.getElementById(fa.container),!this._container)throw Error("Container '"+fa.container+"' not found.");}else{if(!(fa.container instanceof bi))throw Error("Invalid type: 'container' must be a String or HTMLElement.");
this._container=fa.container}if(fa.maxBounds&&this.setMaxBounds(fa.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return za._update(!1)});this.on("moveend",function(){return za._update(!1)});this.on("zoom",function(){return za._update(!0)});void 0!==a.window&&(a.window.addEventListener("online",this._onWindowOnline,
!1),a.window.addEventListener("resize",this._onWindowResize,!1));this.handlers=new ge(this,fa);(this._hash=fa.hash&&(new Tg("string"==typeof fa.hash&&fa.hash||void 0)).addTo(this))&&this._hash._onHashChange()||(this.jumpTo({center:fa.center,zoom:fa.zoom,bearing:fa.bearing,pitch:fa.pitch}),fa.bounds&&(this.resize(),this.fitBounds(fa.bounds,a.extend({},fa.fitBoundsOptions,{duration:0}))));this.resize();this._localIdeographFontFamily=fa.localIdeographFontFamily;fa.style&&this.setStyle(fa.style,{localIdeographFontFamily:fa.localIdeographFontFamily});
fa.attributionControl&&this.addControl(new Gg({customAttribution:fa.customAttribution}));this.addControl(new Hg,fa.logoPosition);this.on("style.load",function(){za.transform.unmodified&&za.jumpTo(za.style.stylesheet)});this.on("data",function(ab){za._update("style"===ab.dataType);za.fire(new a.Event(ab.dataType+"data",ab))});this.on("dataloading",function(ab){za.fire(new a.Event(ab.dataType+"dataloading",ab))})}U&&(X.__proto__=U);(X.prototype=Object.create(U&&U.prototype)).constructor=X;var W={showTileBoundaries:{configurable:!0},
showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return X.prototype._getMapId=function(){return this._mapId},X.prototype.addControl=function(fa,za){if(void 0===za&&fa.getDefaultPosition&&(za=fa.getDefaultPosition()),void 0===za&&(za="top-right"),!fa||!fa.onAdd)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
var Na=fa.onAdd(this);this._controls.push(fa);fa=this._controlPositions[za];return-1!==za.indexOf("bottom")?fa.insertBefore(Na,fa.firstChild):fa.appendChild(Na),this},X.prototype.removeControl=function(fa){if(!fa||!fa.onRemove)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var za=this._controls.indexOf(fa);return-1<za&&this._controls.splice(za,1),fa.onRemove(this),this},X.prototype.resize=function(fa){var za=
this._containerDimensions(),Na=za[0];za=za[1];this._resizeCanvas(Na,za);this.transform.resize(Na,za);this.painter.resize(Na,za);Na=!this._moving;return Na&&(this.stop(),this.fire(new a.Event("movestart",fa)).fire(new a.Event("move",fa))),this.fire(new a.Event("resize",fa)),Na&&this.fire(new a.Event("moveend",fa)),this},X.prototype.getBounds=function(){return this.transform.getBounds()},X.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},X.prototype.setMaxBounds=function(fa){return this.transform.setMaxBounds(a.LngLatBounds.convert(fa)),
this._update()},X.prototype.setMinZoom=function(fa){if(-2<=(fa=null==fa?-2:fa)&&fa<=this.transform.maxZoom)return this.transform.minZoom=fa,this._update(),this.getZoom()<fa&&this.setZoom(fa),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");},X.prototype.getMinZoom=function(){return this.transform.minZoom},X.prototype.setMaxZoom=function(fa){if((fa=null==fa?22:fa)>=this.transform.minZoom)return this.transform.maxZoom=fa,this._update(),this.getZoom()>fa&&this.setZoom(fa),
this;throw Error("maxZoom must be greater than the current minZoom");},X.prototype.getMaxZoom=function(){return this.transform.maxZoom},X.prototype.setMinPitch=function(fa){if(0>(fa=null==fa?0:fa))throw Error("minPitch must be greater than or equal to 0");if(0<=fa&&fa<=this.transform.maxPitch)return this.transform.minPitch=fa,this._update(),this.getPitch()<fa&&this.setPitch(fa),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");},X.prototype.getMinPitch=function(){return this.transform.minPitch},
X.prototype.setMaxPitch=function(fa){if(60<(fa=null==fa?60:fa))throw Error("maxPitch must be less than or equal to 60");if(fa>=this.transform.minPitch)return this.transform.maxPitch=fa,this._update(),this.getPitch()>fa&&this.setPitch(fa),this;throw Error("maxPitch must be greater than the current minPitch");},X.prototype.getMaxPitch=function(){return this.transform.maxPitch},X.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},X.prototype.setRenderWorldCopies=function(fa){return this.transform.renderWorldCopies=
fa,this._update()},X.prototype.project=function(fa){return this.transform.locationPoint(a.LngLat.convert(fa))},X.prototype.unproject=function(fa){return this.transform.pointLocation(a.Point.convert(fa))},X.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},X.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},X.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},X.prototype._createDelegatedListener=function(fa,za,
Na){var ab,mb=this;if("mouseenter"===fa||"mouseover"===fa){var Mb=!1;return{layer:za,listener:Na,delegates:{mousemove:function(Zb){var Jc=mb.getLayer(za)?mb.queryRenderedFeatures(Zb.point,{layers:[za]}):[];Jc.length?Mb||(Mb=!0,Na.call(mb,new rf(fa,mb,Zb.originalEvent,{features:Jc}))):Mb=!1},mouseout:function(){Mb=!1}}}}if("mouseleave"===fa||"mouseout"===fa){var Ub=!1;return{layer:za,listener:Na,delegates:{mousemove:function(Zb){(mb.getLayer(za)?mb.queryRenderedFeatures(Zb.point,{layers:[za]}):[]).length?
Ub=!0:Ub&&(Ub=!1,Na.call(mb,new rf(fa,mb,Zb.originalEvent)))},mouseout:function(Zb){Ub&&(Ub=!1,Na.call(mb,new rf(fa,mb,Zb.originalEvent)))}}}}return{layer:za,listener:Na,delegates:(ab={},ab[fa]=function(Zb){var Jc=mb.getLayer(za)?mb.queryRenderedFeatures(Zb.point,{layers:[za]}):[];Jc.length&&(Zb.features=Jc,Na.call(mb,Zb),delete Zb.features)},ab)}},X.prototype.on=function(fa,za,Na){if(void 0===Na)return U.prototype.on.call(this,fa,za);za=this._createDelegatedListener(fa,za,Na);for(var ab in this._delegatedListeners=
this._delegatedListeners||{},this._delegatedListeners[fa]=this._delegatedListeners[fa]||[],this._delegatedListeners[fa].push(za),za.delegates)this.on(ab,za.delegates[ab]);return this},X.prototype.once=function(fa,za,Na){if(void 0===Na)return U.prototype.once.call(this,fa,za);fa=this._createDelegatedListener(fa,za,Na);for(var ab in fa.delegates)this.once(ab,fa.delegates[ab]);return this},X.prototype.off=function(fa,za,Na){if(void 0===Na)za=U.prototype.off.call(this,fa,za);else{if(this._delegatedListeners&&
this._delegatedListeners[fa])a:{fa=this._delegatedListeners[fa];for(var ab=0;ab<fa.length;ab++){var mb=fa[ab];if(mb.layer===za&&mb.listener===Na){for(var Mb in mb.delegates)this.off(Mb,mb.delegates[Mb]);fa.splice(ab,1);break a}}}za=this}return za},X.prototype.queryRenderedFeatures=function(fa,za){if(!this.style)return[];if(void 0!==za||void 0===fa||fa instanceof a.Point||Array.isArray(fa)||(za=fa,fa=void 0),za=za||{},(fa=fa||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||
"number"==typeof fa[0])var Na=[a.Point.convert(fa)];else Na=a.Point.convert(fa[0]),fa=a.Point.convert(fa[1]),Na=[Na,new a.Point(fa.x,Na.y),fa,new a.Point(Na.x,fa.y),Na];return this.style.queryRenderedFeatures(Na,za,this.transform)},X.prototype.querySourceFeatures=function(fa,za){return this.style.querySourceFeatures(fa,za)},X.prototype.setStyle=function(fa,za){return!1!==(za=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},za)).diff&&za.localIdeographFontFamily===this._localIdeographFontFamily&&
this.style&&fa?(this._diffStyle(fa,za),this):(this._localIdeographFontFamily=za.localIdeographFontFamily,this._updateStyle(fa,za))},X.prototype._getUIString=function(fa){var za=this._locale[fa];if(null==za)throw Error("Missing UI string '"+fa+"'");return za},X.prototype._updateStyle=function(fa,za){return this.style&&(this.style.setEventedParent(null),this.style._remove()),fa?(this.style=new yd(this,za||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof fa?this.style.loadURL(fa):
this.style.loadJSON(fa),this):(delete this.style,this)},X.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new yd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},X.prototype._diffStyle=function(fa,za){var Na=this;"string"==typeof fa?(fa=this._requestManager.normalizeStyleURL(fa),fa=this._requestManager.transformRequest(fa,a.ResourceType.Style),a.getJSON(fa,function(ab,mb){ab?Na.fire(new a.ErrorEvent(ab)):mb&&Na._updateDiff(mb,za)})):"object"==
typeof fa&&this._updateDiff(fa,za)},X.prototype._updateDiff=function(fa,za){try{this.style.setState(fa)&&this._update(!0)}catch(Na){a.warnOnce("Unable to perform style diff: "+(Na.message||Na.error||Na)+".  Rebuilding the style from scratch."),this._updateStyle(fa,za)}},X.prototype.getStyle=function(){if(this.style)return this.style.serialize()},X.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},X.prototype.addSource=function(fa,
za){return this._lazyInitEmptyStyle(),this.style.addSource(fa,za),this._update(!0)},X.prototype.isSourceLoaded=function(fa){var za=this.style&&this.style.sourceCaches[fa];if(void 0!==za)return za.loaded();this.fire(new a.ErrorEvent(Error("There is no source with ID '"+fa+"'")))},X.prototype.areTilesLoaded=function(){var fa=this.style&&this.style.sourceCaches,za;for(za in fa){var Na=fa[za]._tiles,ab;for(ab in Na){var mb=Na[ab];if("loaded"!==mb.state&&"errored"!==mb.state)return!1}}return!0},X.prototype.addSourceType=
function(fa,za,Na){return this._lazyInitEmptyStyle(),this.style.addSourceType(fa,za,Na)},X.prototype.removeSource=function(fa){return this.style.removeSource(fa),this._update(!0)},X.prototype.getSource=function(fa){return this.style.getSource(fa)},X.prototype.addImage=function(fa,za,Na){void 0===Na&&(Na={});var ab=Na.pixelRatio;void 0===ab&&(ab=1);var mb=Na.sdf;void 0===mb&&(mb=!1);var Mb=Na.stretchX,Ub=Na.stretchY;Na=Na.content;if(this._lazyInitEmptyStyle(),za instanceof Gh||Ig&&za instanceof Ig)za=
a.browser.getImageData(za),this.style.addImage(fa,{data:new a.RGBAImage({width:za.width,height:za.height},za.data),pixelRatio:ab,stretchX:Mb,stretchY:Ub,content:Na,sdf:mb,version:0});else{if(void 0===za.width||void 0===za.height)return this.fire(new a.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(fa,
{data:new a.RGBAImage({width:za.width,height:za.height},new Uint8Array(za.data)),pixelRatio:ab,stretchX:Mb,stretchY:Ub,content:Na,sdf:mb,version:0,userImage:za});za.onAdd&&za.onAdd(this,fa)}},X.prototype.updateImage=function(fa,za){var Na=this.style.getImage(fa);if(!Na)return this.fire(new a.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ab=za instanceof Gh||Ig&&za instanceof Ig?a.browser.getImageData(za):za,mb=ab.width,
Mb=ab.height;ab=ab.data;return void 0===mb||void 0===Mb?this.fire(new a.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):mb!==Na.data.width||Mb!==Na.data.height?this.fire(new a.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image"))):(Na.data.replace(ab,!(za instanceof
Gh||Ig&&za instanceof Ig)),void this.style.updateImage(fa,Na))},X.prototype.hasImage=function(fa){return fa?!!this.style.getImage(fa):(this.fire(new a.ErrorEvent(Error("Missing required image id"))),!1)},X.prototype.removeImage=function(fa){this.style.removeImage(fa)},X.prototype.loadImage=function(fa,za){a.getImage(this._requestManager.transformRequest(fa,a.ResourceType.Image),za)},X.prototype.listImages=function(){return this.style.listImages()},X.prototype.addLayer=function(fa,za){return this._lazyInitEmptyStyle(),
this.style.addLayer(fa,za),this._update(!0)},X.prototype.moveLayer=function(fa,za){return this.style.moveLayer(fa,za),this._update(!0)},X.prototype.removeLayer=function(fa){return this.style.removeLayer(fa),this._update(!0)},X.prototype.getLayer=function(fa){return this.style.getLayer(fa)},X.prototype.setLayerZoomRange=function(fa,za,Na){return this.style.setLayerZoomRange(fa,za,Na),this._update(!0)},X.prototype.setFilter=function(fa,za,Na){return void 0===Na&&(Na={}),this.style.setFilter(fa,za,Na),
this._update(!0)},X.prototype.getFilter=function(fa){return this.style.getFilter(fa)},X.prototype.setPaintProperty=function(fa,za,Na,ab){return void 0===ab&&(ab={}),this.style.setPaintProperty(fa,za,Na,ab),this._update(!0)},X.prototype.getPaintProperty=function(fa,za){return this.style.getPaintProperty(fa,za)},X.prototype.setLayoutProperty=function(fa,za,Na,ab){return void 0===ab&&(ab={}),this.style.setLayoutProperty(fa,za,Na,ab),this._update(!0)},X.prototype.getLayoutProperty=function(fa,za){return this.style.getLayoutProperty(fa,
za)},X.prototype.setLight=function(fa,za){return void 0===za&&(za={}),this._lazyInitEmptyStyle(),this.style.setLight(fa,za),this._update(!0)},X.prototype.getLight=function(){return this.style.getLight()},X.prototype.setFeatureState=function(fa,za){return this.style.setFeatureState(fa,za),this._update()},X.prototype.removeFeatureState=function(fa,za){return this.style.removeFeatureState(fa,za),this._update()},X.prototype.getFeatureState=function(fa){return this.style.getFeatureState(fa)},X.prototype.getContainer=
function(){return this._container},X.prototype.getCanvasContainer=function(){return this._canvasContainer},X.prototype.getCanvas=function(){return this._canvas},X.prototype._containerDimensions=function(){var fa=0,za=0;return this._container&&(fa=this._container.clientWidth||400,za=this._container.clientHeight||300),[fa,za]},X.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},
X.prototype._setupContainer=function(){var fa=this._container;fa.classList.add("mapboxgl-map");(this._missingCSSCanary=Pa.create("div","mapboxgl-canary",fa)).style.visibility="hidden";this._detectMissingCSS();var za=this._canvasContainer=Pa.create("div","mapboxgl-canvas-container",fa);this._interactive&&za.classList.add("mapboxgl-interactive");this._canvas=Pa.create("canvas","mapboxgl-canvas",za);this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",
this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");za=this._containerDimensions();this._resizeCanvas(za[0],za[1]);var Na=this._controlContainer=Pa.create("div","mapboxgl-control-container",fa),ab=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(mb){ab[mb]=Pa.create("div","mapboxgl-ctrl-"+mb,Na)})},X.prototype._resizeCanvas=function(fa,za){var Na=a.browser.devicePixelRatio||1;this._canvas.width=
Na*fa;this._canvas.height=Na*za;this._canvas.style.width=fa+"px";this._canvas.style.height=za+"px"},X.prototype._setupPainter=function(){var fa=a.extend({},ib.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1});(fa=this._canvas.getContext("webgl",fa)||this._canvas.getContext("experimental-webgl",fa))?(this.painter=new af(fa,this.transform),a.webpSupported.testSupport(fa)):this.fire(new a.ErrorEvent(Error("Failed to initialize WebGL")))},
X.prototype._contextLost=function(fa){fa.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new a.Event("webglcontextlost",{originalEvent:fa}))},X.prototype._contextRestored=function(fa){this._setupPainter();this.resize();this._update();this.fire(new a.Event("webglcontextrestored",{originalEvent:fa}))},X.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},X.prototype._update=function(fa){return this.style?(this._styleDirty=
this._styleDirty||fa,this._sourcesDirty=!0,this.triggerRepaint(),this):this},X.prototype._requestRenderFrame=function(fa){return this._update(),this._renderTaskQueue.add(fa)},X.prototype._cancelRenderFrame=function(fa){this._renderTaskQueue.remove(fa)},X.prototype._render=function(fa){var za,Na=this,ab=0,mb=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(za=mb.createQueryEXT(),mb.beginQueryEXT(mb.TIME_ELAPSED_EXT,za),ab=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),
this._renderTaskQueue.run(fa),!this._removed){fa=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Mb=this.transform.zoom,Ub=a.browser.now();this.style.zoomHistory.update(Mb,Ub);Mb=new a.EvaluationParameters(Mb,{now:Ub,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});Ub=Mb.crossFadingFactor();1===Ub&&Ub===this._crossFadingFactor||(fa=!0,this._crossFadingFactor=Ub);this.style.update(Mb)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=
!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),
this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||fa)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Zb=a.browser.now()-ab;mb.endQueryEXT(mb.TIME_ELAPSED_EXT,za);setTimeout(function(){var Ic=mb.getQueryObjectEXT(za,mb.QUERY_RESULT_EXT)/1E6;mb.deleteQueryEXT(za);Na.fire(new a.Event("gpu-timing-frame",{cpuTime:Zb,
gpuTime:Ic}))},50)}if(this.listens("gpu-timing-layer")){var Jc=this.painter.collectGpuTimers();setTimeout(function(){var Ic=Na.painter.queryGpuTimers(Jc);Na.fire(new a.Event("gpu-timing-layer",{layerTimes:Ic}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new a.Event("idle"))),this}},X.prototype.remove=function(){this._hash&&this._hash.remove();for(var fa=
0,za=this._controls;fa<za.length;fa+=1)za[fa].onRemove(this);this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.painter.destroy();this.handlers.destroy();delete this.handlers;this.setStyle(null);void 0!==a.window&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));(fa=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&fa.loseContext();Fa(this._canvasContainer);
Fa(this._controlContainer);Fa(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this._removed=!0;this.fire(new a.Event("remove"))},X.prototype.triggerRepaint=function(){var fa=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(za){fa._frame=null;fa._render(za)}))},X.prototype._onWindowOnline=function(){this._update()},X.prototype._onWindowResize=function(fa){this._trackResize&&this.resize({originalEvent:fa})._update()},W.showTileBoundaries.get=function(){return!!this._showTileBoundaries},
W.showTileBoundaries.set=function(fa){this._showTileBoundaries!==fa&&(this._showTileBoundaries=fa,this._update())},W.showPadding.get=function(){return!!this._showPadding},W.showPadding.set=function(fa){this._showPadding!==fa&&(this._showPadding=fa,this._update())},W.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},W.showCollisionBoxes.set=function(fa){this._showCollisionBoxes!==fa&&(this._showCollisionBoxes=fa,fa?this.style._generateCollisionBoxes():this._update())},W.showOverdrawInspector.get=
function(){return!!this._showOverdrawInspector},W.showOverdrawInspector.set=function(fa){this._showOverdrawInspector!==fa&&(this._showOverdrawInspector=fa,this._update())},W.repaint.get=function(){return!!this._repaint},W.repaint.set=function(fa){this._repaint!==fa&&(this._repaint=fa,this.triggerRepaint())},W.vertices.get=function(){return!!this._vertices},W.vertices.set=function(fa){this._vertices=fa;this._update()},X.prototype._setCacheLimits=function(fa,za){a.setCacheLimits(fa,za)},W.version.get=
function(){return a.version},Object.defineProperties(X.prototype,W),X}(vj),Xi={showCompass:!0,showZoom:!0,visualizePitch:!1},gg=function(U){var X=this;this.options=a.extend({},Xi,U);this._container=Pa.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");this._container.addEventListener("contextmenu",function(W){return W.preventDefault()});this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(W){return X._map.zoomIn({},
{originalEvent:W})}),Pa.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(W){return X._map.zoomOut({},{originalEvent:W})}),Pa.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0));this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(W){X.options.visualizePitch?X._map.resetNorthPitch({},
{originalEvent:W}):X._map.resetNorth({},{originalEvent:W})}),this._compassIcon=Pa.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};gg.prototype._updateZoomButtons=function(){var U=this._map.getZoom();this._zoomInButton.disabled=U===this._map.getMaxZoom();this._zoomOutButton.disabled=U===this._map.getMinZoom()};gg.prototype._rotateCompassArrow=function(){this._compassIcon.style.transform=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(Math.PI/
180*this._map.transform.pitch),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+180/Math.PI*this._map.transform.angle+"deg)":"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};gg.prototype.onAdd=function(U){return this._map=U,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,
"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ye(this._map,this._compass,this.options.visualizePitch)),this._container};gg.prototype.onRemove=function(){Pa.remove(this._container);this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons);this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",
this._rotateCompassArrow),this._handler.off(),delete this._handler);delete this._map};gg.prototype._createButton=function(U,X){U=Pa.create("button",U,this._container);return U.type="button",U.addEventListener("click",X),U};gg.prototype._setButtonTitle=function(U,X){X=this._map._getUIString("NavigationControl."+X);U.title=X;U.setAttribute("aria-label",X)};var Ye=function(U,X,W){void 0===W&&(W=!1);this._clickTolerance=10;this.element=X;this.mouseRotate=new yh({clickTolerance:U.dragRotate._mouseRotate._clickTolerance});
this.map=U;W&&(this.mousePitch=new oi({clickTolerance:U.dragRotate._mousePitch._clickTolerance}));a.bindAll("mousedown mousemove mouseup touchstart touchmove touchend reset".split(" "),this);Pa.addEventListener(X,"mousedown",this.mousedown);Pa.addEventListener(X,"touchstart",this.touchstart,{passive:!1});Pa.addEventListener(X,"touchmove",this.touchmove);Pa.addEventListener(X,"touchend",this.touchend);Pa.addEventListener(X,"touchcancel",this.reset)};Ye.prototype.down=function(U,X){this.mouseRotate.mousedown(U,
X);this.mousePitch&&this.mousePitch.mousedown(U,X);Pa.disableDrag()};Ye.prototype.move=function(U,X){var W=this.map,fa=this.mouseRotate.mousemoveWindow(U,X);(fa&&fa.bearingDelta&&W.setBearing(W.getBearing()+fa.bearingDelta),this.mousePitch)&&(U=this.mousePitch.mousemoveWindow(U,X))&&U.pitchDelta&&W.setPitch(W.getPitch()+U.pitchDelta)};Ye.prototype.off=function(){var U=this.element;Pa.removeEventListener(U,"mousedown",this.mousedown);Pa.removeEventListener(U,"touchstart",this.touchstart,{passive:!1});
Pa.removeEventListener(U,"touchmove",this.touchmove);Pa.removeEventListener(U,"touchend",this.touchend);Pa.removeEventListener(U,"touchcancel",this.reset);this.offTemp()};Ye.prototype.offTemp=function(){Pa.enableDrag();Pa.removeEventListener(a.window,"mousemove",this.mousemove);Pa.removeEventListener(a.window,"mouseup",this.mouseup)};Ye.prototype.mousedown=function(U){this.down(a.extend({},U,{ctrlKey:!0,preventDefault:function(){return U.preventDefault()}}),Pa.mousePos(this.element,U));Pa.addEventListener(a.window,
"mousemove",this.mousemove);Pa.addEventListener(a.window,"mouseup",this.mouseup)};Ye.prototype.mousemove=function(U){this.move(U,Pa.mousePos(this.element,U))};Ye.prototype.mouseup=function(U){this.mouseRotate.mouseupWindow(U);this.mousePitch&&this.mousePitch.mouseupWindow(U);this.offTemp()};Ye.prototype.touchstart=function(U){1!==U.targetTouches.length?this.reset():(this._startPos=this._lastPos=Pa.touchPos(this.element,U.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return U.preventDefault()}},
this._startPos))};Ye.prototype.touchmove=function(U){1!==U.targetTouches.length?this.reset():(this._lastPos=Pa.touchPos(this.element,U.targetTouches)[0],this.move({preventDefault:function(){return U.preventDefault()}},this._lastPos))};Ye.prototype.touchend=function(U){0===U.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click();this.reset()};Ye.prototype.reset=function(){this.mouseRotate.reset();this.mousePitch&&this.mousePitch.reset();
delete this._startPos;delete this._lastPos;this.offTemp()};var mh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Yg,Gi=function(U){function X(W,fa){var za=this;if(U.call(this),(W instanceof a.window.HTMLElement||fa)&&(W=a.extend({element:W},fa)),a.bindAll("_update _onMove _onUp _addDragHandler _onMapClick _onKeyPress".split(" "),
this),this._anchor=W&&W.anchor||"center",this._color=W&&W.color||"#3FB1CE",this._draggable=W&&W.draggable||!1,this._state="inactive",this._rotation=W&&W.rotation||0,this._rotationAlignment=W&&W.rotationAlignment||"auto",this._pitchAlignment=W&&W.pitchAlignment&&"auto"!==W.pitchAlignment?W.pitchAlignment:this._rotationAlignment,W&&W.element)this._element=W.element,this._offset=a.Point.convert(W&&W.offset||[0,0]);else{this._defaultMarker=!0;this._element=Pa.create("div");this._element.setAttribute("aria-label",
"Map marker");fa=Pa.createNS("http://www.w3.org/2000/svg","svg");fa.setAttributeNS(null,"display","block");fa.setAttributeNS(null,"height","41px");fa.setAttributeNS(null,"width","27px");fa.setAttributeNS(null,"viewBox","0 0 27 41");var Na=Pa.createNS("http://www.w3.org/2000/svg","g");Na.setAttributeNS(null,"stroke","none");Na.setAttributeNS(null,"stroke-width","1");Na.setAttributeNS(null,"fill","none");Na.setAttributeNS(null,"fill-rule","evenodd");Na=Pa.createNS("http://www.w3.org/2000/svg","g");
Na.setAttributeNS(null,"fill-rule","nonzero");var ab=Pa.createNS("http://www.w3.org/2000/svg","g");ab.setAttributeNS(null,"transform","translate(3.0, 29.0)");ab.setAttributeNS(null,"fill","#000000");for(var mb=0,Mb=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];mb<Mb.length;mb+=1){var Ub=Mb[mb],Zb=Pa.createNS("http://www.w3.org/2000/svg",
"ellipse");Zb.setAttributeNS(null,"opacity","0.04");Zb.setAttributeNS(null,"cx","10.5");Zb.setAttributeNS(null,"cy","5.80029008");Zb.setAttributeNS(null,"rx",Ub.rx);Zb.setAttributeNS(null,"ry",Ub.ry);ab.appendChild(Zb)}mb=Pa.createNS("http://www.w3.org/2000/svg","g");mb.setAttributeNS(null,"fill",this._color);Mb=Pa.createNS("http://www.w3.org/2000/svg","path");Mb.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");
mb.appendChild(Mb);Mb=Pa.createNS("http://www.w3.org/2000/svg","g");Mb.setAttributeNS(null,"opacity","0.25");Mb.setAttributeNS(null,"fill","#000000");Ub=Pa.createNS("http://www.w3.org/2000/svg","path");Ub.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
Mb.appendChild(Ub);Ub=Pa.createNS("http://www.w3.org/2000/svg","g");Ub.setAttributeNS(null,"transform","translate(6.0, 7.0)");Ub.setAttributeNS(null,"fill","#FFFFFF");Zb=Pa.createNS("http://www.w3.org/2000/svg","g");Zb.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Jc=Pa.createNS("http://www.w3.org/2000/svg","circle");Jc.setAttributeNS(null,"fill","#000000");Jc.setAttributeNS(null,"opacity","0.25");Jc.setAttributeNS(null,"cx","5.5");Jc.setAttributeNS(null,"cy","5.5");Jc.setAttributeNS(null,
"r","5.4999962");var Ic=Pa.createNS("http://www.w3.org/2000/svg","circle");Ic.setAttributeNS(null,"fill","#FFFFFF");Ic.setAttributeNS(null,"cx","5.5");Ic.setAttributeNS(null,"cy","5.5");Ic.setAttributeNS(null,"r","5.4999962");Zb.appendChild(Jc);Zb.appendChild(Ic);Na.appendChild(ab);Na.appendChild(mb);Na.appendChild(Mb);Na.appendChild(Ub);Na.appendChild(Zb);fa.appendChild(Na);this._element.appendChild(fa);this._offset=a.Point.convert(W&&W.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");
this._element.addEventListener("dragstart",function(yc){yc.preventDefault()});this._element.addEventListener("mousedown",function(yc){yc.preventDefault()});this._element.addEventListener("focus",function(){var yc=za._map.getContainer();yc.scrollTop=0;yc.scrollLeft=0});eb(this._element,this._anchor,"marker");this._popup=null}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.addTo=function(W){return this.remove(),this._map=W,W.getCanvasContainer().appendChild(this._element),
W.on("move",this._update),W.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},X.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",
this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Pa.remove(this._element),this._popup&&this._popup.remove(),this},X.prototype.getLngLat=function(){return this._lngLat},X.prototype.setLngLat=function(W){return this._lngLat=a.LngLat.convert(W),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},X.prototype.getElement=function(){return this._element},X.prototype.setPopup=function(W){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",
this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),W){if(!("offset"in W.options)){var fa=Math.sqrt(Math.pow(13.5,2)/2);W.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[fa,-1*(24.6+fa)],"bottom-right":[-fa,-1*(24.6+fa)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=W;this._lngLat&&this._popup.setLngLat(this._lngLat);(this._originalTabIndex=this._element.getAttribute("tabindex"))||this._element.setAttribute("tabindex",
"0");this._element.addEventListener("keypress",this._onKeyPress)}return this},X.prototype._onKeyPress=function(W){var fa=W.code;W=W.charCode||W.keyCode;"Space"!==fa&&"Enter"!==fa&&32!==W&&13!==W||this.togglePopup()},X.prototype._onMapClick=function(W){W=W.originalEvent.target;var fa=this._element;this._popup&&(W===fa||fa.contains(W))&&this.togglePopup()},X.prototype.getPopup=function(){return this._popup},X.prototype.togglePopup=function(){var W=this._popup;return W?(W.isOpen()?W.remove():W.addTo(this._map),
this):this},X.prototype._update=function(W){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ha(this._lngLat,this._pos,this._map.transform));this._pos=this._map.project(this._lngLat)._add(this._offset);var fa="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?fa="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(fa="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var za="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?
za="rotateX(0deg)":"map"===this._pitchAlignment&&(za="rotateX("+this._map.getPitch()+"deg)");W&&"moveend"!==W.type||(this._pos=this._pos.round());Pa.setTransform(this._element,mh[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+za+" "+fa)}},X.prototype.getOffset=function(){return this._offset},X.prototype.setOffset=function(W){return this._offset=a.Point.convert(W),this._update(),this},X.prototype._onMove=function(W){this._pos=W.point.sub(this._positionDelta);this._lngLat=this._map.unproject(this._pos);
this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new a.Event("dragstart")));this.fire(new a.Event("drag"))},X.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===this._state&&this.fire(new a.Event("dragend"));this._state="inactive"},X.prototype._addDragHandler=function(W){this._element.contains(W.originalEvent.target)&&
(W.preventDefault(),this._positionDelta=W.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},X.prototype.setDraggable=function(W){return this._draggable=!!W,this._map&&(W?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",
this._addDragHandler))),this},X.prototype.isDraggable=function(){return this._draggable},X.prototype.setRotation=function(W){return this._rotation=W||0,this._update(),this},X.prototype.getRotation=function(){return this._rotation},X.prototype.setRotationAlignment=function(W){return this._rotationAlignment=W||"auto",this._update(),this},X.prototype.getRotationAlignment=function(){return this._rotationAlignment},X.prototype.setPitchAlignment=function(W){return this._pitchAlignment=W&&"auto"!==W?W:this._rotationAlignment,
this._update(),this},X.prototype.getPitchAlignment=function(){return this._pitchAlignment},X}(a.Evented),vg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Zg=0,di=!1,Qg=function(U){function X(W){U.call(this);this.options=a.extend({},vg,W);a.bindAll("_onSuccess _onError _onZoom _finish _setupUI _updateCamera _updateMarker".split(" "),this)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&
U.prototype)).constructor=X,X.prototype.onAdd=function(W){var fa;return this._map=W,this._container=Pa.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),fa=this._setupUI,void 0!==Yg?fa(Yg):void 0!==a.window.navigator.permissions?a.window.navigator.permissions.query({name:"geolocation"}).then(function(za){fa(Yg="denied"!==za.state)}):fa(Yg=!!a.window.navigator.geolocation),this._container},X.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),
this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove();Pa.remove(this._container);this._map.off("zoom",this._onZoom);this._map=void 0;Zg=0;di=!1},X.prototype._isOutOfMapMaxBounds=function(W){var fa=this._map.getMaxBounds();W=W.coords;return fa&&(W.longitude<fa.getWest()||W.longitude>fa.getEast()||W.latitude<fa.getSouth()||W.latitude>
fa.getNorth())},X.prototype._setErrorState=function(){switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},X.prototype._onSuccess=function(W){if(this._map){if(this._isOutOfMapMaxBounds(W))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",W)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=
W,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(W);this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(W);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new a.Event("geolocate",W));this._finish()}},X.prototype._updateCamera=function(W){var fa=new a.LngLat(W.coords.longitude,W.coords.latitude);W=W.coords.accuracy;
var za=this._map.getBearing();za=a.extend({bearing:za},this.options.fitBoundsOptions);this._map.fitBounds(fa.toBounds(W),za,{geolocateSource:!0})},X.prototype._updateMarker=function(W){if(W){var fa=new a.LngLat(W.coords.longitude,W.coords.latitude);this._accuracyCircleMarker.setLngLat(fa).addTo(this._map);this._userLocationDotMarker.setLngLat(fa).addTo(this._map);this._accuracy=W.coords.accuracy;this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),
this._accuracyCircleMarker.remove()},X.prototype._updateCircleRadius=function(){var W=this._map._container.clientHeight/2,fa=this._map.unproject([0,W]);W=this._map.unproject([1,W]);fa=fa.distanceTo(W);fa=Math.ceil(2*this._accuracy/fa);this._circleElement.style.width=fa+"px";this._circleElement.style.height=fa+"px"},X.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},X.prototype._onError=function(W){if(this._map){if(this.options.trackUserLocation)if(1===
W.code){this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.disabled=!0;var fa=this._map._getUIString("GeolocateControl.LocationNotAvailable");
this._geolocateButton.title=fa;this._geolocateButton.setAttribute("aria-label",fa);void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===W.code&&di)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new a.Event("error",W));this._finish()}},X.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},X.prototype._setupUI=function(W){var fa=
this;(this._container.addEventListener("contextmenu",function(za){return za.preventDefault()}),this._geolocateButton=Pa.create("button","mapboxgl-ctrl-geolocate",this._container),Pa.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===W)?(a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),W=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=
!0,this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W)):(W=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W));this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF");this.options.showUserLocation&&(this._dotElement=Pa.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Gi(this._dotElement),this._circleElement=
Pa.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Gi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom));this._geolocateButton.addEventListener("click",this.trigger.bind(this));this._setup=!0;this.options.trackUserLocation&&this._map.on("movestart",function(za){za.geolocateSource||"ACTIVE_LOCK"!==fa._watchState||za.originalEvent&&"resize"===za.originalEvent.type||(fa._watchState=
"BACKGROUND",fa._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),fa._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),fa.fire(new a.Event("trackuserlocationend")))})},X.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new a.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":Zg--;
di=!1;this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new a.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState=
"ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var W;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.setAttribute("aria-pressed","true");1<++Zg?(W={maximumAge:6E5,timeout:0},di=!0):(W=this.options.positionOptions,di=!1);this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,W)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},X.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID);
this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},X}(a.Evented),wg={maxWidth:100,unit:"metric"},Xf=function(U){this.options=a.extend({},wg,U);a.bindAll(["_onMove","setUnit"],this)};Xf.prototype.getDefaultPosition=function(){return"bottom-left"};Xf.prototype._onMove=function(){hb(this._map,this._container,this.options)};Xf.prototype.onAdd=
function(U){return this._map=U,this._container=Pa.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",U.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};Xf.prototype.onRemove=function(){Pa.remove(this._container);this._map.off("move",this._onMove);this._map=void 0};Xf.prototype.setUnit=function(U){this.options.unit=U;hb(this._map,this._container,this.options)};var og=function(U){this._fullscreen=!1;U&&U.container&&(U.container instanceof a.window.HTMLElement?this._container=
U.container:a.warnOnce("Full screen control 'container' must be a DOM element."));a.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};og.prototype.onAdd=
function(U){return this._map=U,this._container||(this._container=this._map.getContainer()),this._controlContainer=Pa.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer};og.prototype.onRemove=function(){Pa.remove(this._controlContainer);this._map=null;a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};
og.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)};og.prototype._setupUI=function(){var U=this._fullscreenButton=Pa.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Pa.create("span","mapboxgl-ctrl-icon",U).setAttribute("aria-hidden",!0);U.type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",
this._onClickFullscreen);a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};og.prototype._updateTitle=function(){var U=this._getTitle();this._fullscreenButton.setAttribute("aria-label",U);this._fullscreenButton.title=U};og.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")};og.prototype._isFullscreen=function(){return this._fullscreen};og.prototype._changeIcon=function(){(a.window.document.fullscreenElement||
a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())};og.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?
a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};
var xj={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},pi=function(U){function X(W){U.call(this);this.options=a.extend(Object.create(xj),W);a.bindAll("_update _onClose remove _onMouseMove _onMouseUp _onDrag".split(" "),this)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.addTo=function(W){return this._map&&this.remove(),this._map=W,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",
this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},X.prototype.isOpen=function(){return!!this._map},X.prototype.remove=function(){return this._content&&Pa.remove(this._content),
this._container&&(Pa.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},X.prototype.getLngLat=function(){return this._lngLat},X.prototype.setLngLat=function(W){return this._lngLat=
a.LngLat.convert(W),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},X.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),
this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},X.prototype.getElement=function(){return this._container},X.prototype.setText=function(W){return this.setDOMContent(a.window.document.createTextNode(W))},X.prototype.setHTML=function(W){var fa=a.window.document.createDocumentFragment(),za=a.window.document.createElement("body");for(za.innerHTML=W;W=za.firstChild;)fa.appendChild(W);
return this.setDOMContent(fa)},X.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},X.prototype.setMaxWidth=function(W){return this.options.maxWidth=W,this._update(),this},X.prototype.setDOMContent=function(W){return this._createContent(),this._content.appendChild(W),this._update(),this},X.prototype.addClassName=function(W){this._container&&this._container.classList.add(W)},X.prototype.removeClassName=function(W){this._container&&this._container.classList.remove(W)},
X.prototype.toggleClassName=function(W){if(this._container)return this._container.classList.toggle(W)},X.prototype._createContent=function(){this._content&&Pa.remove(this._content);this._content=Pa.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=Pa.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",
this._onClose))},X.prototype._onMouseUp=function(W){this._update(W.point)},X.prototype._onMouseMove=function(W){this._update(W.point)},X.prototype._onDrag=function(W){this._update(W.point)},X.prototype._update=function(W){var fa=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Pa.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Pa.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&
this.options.className.split(" ").forEach(function(mb){return fa._container.classList.add(mb)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ha(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||W)){W=this._pos=this._trackPointer&&W?W:this._map.project(this._lngLat);
var za=this.options.anchor,Na=function Ub(Mb){if(Mb){if("number"==typeof Mb){var Zb=Math.round(Math.sqrt(.5*Math.pow(Mb,2)));return{center:new a.Point(0,0),top:new a.Point(0,Mb),"top-left":new a.Point(Zb,Zb),"top-right":new a.Point(-Zb,Zb),bottom:new a.Point(0,-Mb),"bottom-left":new a.Point(Zb,-Zb),"bottom-right":new a.Point(-Zb,-Zb),left:new a.Point(Mb,0),right:new a.Point(-Mb,0)}}return Mb instanceof a.Point||Array.isArray(Mb)?(Mb=a.Point.convert(Mb),{center:Mb,top:Mb,"top-left":Mb,"top-right":Mb,
bottom:Mb,"bottom-left":Mb,"bottom-right":Mb,left:Mb,right:Mb}):{center:a.Point.convert(Mb.center||[0,0]),top:a.Point.convert(Mb.top||[0,0]),"top-left":a.Point.convert(Mb["top-left"]||[0,0]),"top-right":a.Point.convert(Mb["top-right"]||[0,0]),bottom:a.Point.convert(Mb.bottom||[0,0]),"bottom-left":a.Point.convert(Mb["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(Mb["bottom-right"]||[0,0]),left:a.Point.convert(Mb.left||[0,0]),right:a.Point.convert(Mb.right||[0,0])}}return Ub(new a.Point(0,0))}(this.options.offset);
if(!za){za=this._container.offsetWidth;var ab=this._container.offsetHeight;ab=W.y+Na.bottom.y<ab?["top"]:W.y>this._map.transform.height-ab?["bottom"]:[];W.x<za/2?ab.push("left"):W.x>this._map.transform.width-za/2&&ab.push("right");za=0===ab.length?"bottom":ab.join("-")}W=W.add(Na[za]).round();Pa.setTransform(this._container,mh[za]+" translate("+W.x+"px,"+W.y+"px)");eb(this._container,za,"popup")}},X.prototype._onClose=function(){this.remove()},X}(a.Evented),ei={version:a.version,supported:ib,setRTLTextPlugin:a.setRTLTextPlugin,
getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Fi,NavigationControl:gg,GeolocateControl:Qg,AttributionControl:Gg,ScaleControl:Xf,FullscreenControl:og,Popup:pi,Marker:Gi,Style:yd,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){(Wd||(Wd=new xe),Wd).acquire("mapboxgl_preloaded_worker_pool")},clearPrewarmedResources:function(){var U=Wd;U&&(U.isPreloaded()&&1===U.numActive()?(U.release("mapboxgl_preloaded_worker_pool"),
Wd=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(U){a.config.ACCESS_TOKEN=U},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(U){a.config.API_URL=U},get workerCount(){return xe.workerCount},set workerCount(U){xe.workerCount=U},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},
set maxParallelImageRequests(U){a.config.MAX_PARALLEL_IMAGE_REQUESTS=U},clearStorage:function(U){a.clearTileCache(U)},workerUrl:""};return ei});return h})},{}],448:[function(b,y,F){function q(p,h,a){for(var f=Array(p),d=0;d<p;++d)f[d]=0,d===h&&(f[d]+=.5),d===a&&(f[d]+=.5);return f}y.exports=function(p){for(var h=1<<p+1,a=Array(h),f=0;f<h;++f){var d=f;var l=p,k=f;if(0===k||k===(1<<l+1)-1)var c=[];else{var e=[];c=[];for(var g=0;g<=l;++g)if(k&1<<g){e.push(q(l,g-1,g-1));c.push(null);for(var m=0;m<=l;++m)~k&
1<<m&&(e.push(q(l,g-1,m-1)),c.push([g,m]))}l=n(e);k=[];g=0;b:for(;g<l.length;++g){e=l[g];var r=[];for(m=0;m<e.length;++m){if(!c[e[m]])continue b;r.push(c[e[m]].slice())}k.push(r)}c=k}a[d]=c}return a};var n=b("convex-hull")},{"convex-hull":135}],449:[function(b,y,F){function q(m,r,u,v,w){m[0]=r[0]*v+u[0]*w;m[1]=r[1]*v+u[1]*w;m[2]=r[2]*v+u[2]*w}var n=b("./normalize");F=b("gl-mat4/create");var p=b("gl-mat4/clone"),h=b("gl-mat4/determinant"),a=b("gl-mat4/invert"),f=b("gl-mat4/transpose"),d={length:b("gl-vec3/length"),
normalize:b("gl-vec3/normalize"),dot:b("gl-vec3/dot"),cross:b("gl-vec3/cross")},l=F(),k=F(),c=[0,0,0,0],e=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];y.exports=function(m,r,u,v,w,D){r||(r=[0,0,0]);u||(u=[0,0,0]);v||(v=[0,0,0]);w||(w=[0,0,0,1]);D||(D=[0,0,0,1]);if(!n(l,m))return!1;p(k,l);k[3]=0;k[7]=0;k[11]=0;k[15]=1;if(Math.abs(1E-8>h(k)))return!1;var C=l[3],x=l[7],A=l[11];m=l[12];var B=l[13],t=l[14],G=l[15];if(0!==C||0!==x||0!==A){c[0]=C;c[1]=x;c[2]=A;c[3]=G;if(!a(k,k))return!1;f(k,k);C=c[0];x=c[1];A=c[2];
G=c[3];w[0]=k[0]*C+k[4]*x+k[8]*A+k[12]*G;w[1]=k[1]*C+k[5]*x+k[9]*A+k[13]*G;w[2]=k[2]*C+k[6]*x+k[10]*A+k[14]*G;w[3]=k[3]*C+k[7]*x+k[11]*A+k[15]*G}else w[0]=w[1]=w[2]=0,w[3]=1;r[0]=m;r[1]=B;r[2]=t;e[0][0]=l[0];e[0][1]=l[1];e[0][2]=l[2];e[1][0]=l[4];e[1][1]=l[5];e[1][2]=l[6];e[2][0]=l[8];e[2][1]=l[9];e[2][2]=l[10];u[0]=d.length(e[0]);d.normalize(e[0],e[0]);v[0]=d.dot(e[0],e[1]);q(e[1],e[1],e[0],1,-v[0]);u[1]=d.length(e[1]);d.normalize(e[1],e[1]);v[0]/=u[1];v[1]=d.dot(e[0],e[2]);q(e[2],e[2],e[0],1,-v[1]);
v[2]=d.dot(e[1],e[2]);q(e[2],e[2],e[1],1,-v[2]);u[2]=d.length(e[2]);d.normalize(e[2],e[2]);v[1]/=u[2];v[2]/=u[2];d.cross(g,e[1],e[2]);if(0>d.dot(e[0],g))for(r=0;3>r;r++)u[r]*=-1,e[r][0]*=-1,e[r][1]*=-1,e[r][2]*=-1;D[0]=.5*Math.sqrt(Math.max(1+e[0][0]-e[1][1]-e[2][2],0));D[1]=.5*Math.sqrt(Math.max(1-e[0][0]+e[1][1]-e[2][2],0));D[2]=.5*Math.sqrt(Math.max(1-e[0][0]-e[1][1]+e[2][2],0));D[3]=.5*Math.sqrt(Math.max(1+e[0][0]+e[1][1]+e[2][2],0));e[2][1]>e[1][2]&&(D[0]=-D[0]);e[0][2]>e[2][0]&&(D[1]=-D[1]);
e[1][0]>e[0][1]&&(D[2]=-D[2]);return!0}},{"./normalize":450,"gl-mat4/clone":272,"gl-mat4/create":273,"gl-mat4/determinant":274,"gl-mat4/invert":278,"gl-mat4/transpose":289,"gl-vec3/cross":339,"gl-vec3/dot":344,"gl-vec3/length":354,"gl-vec3/normalize":361}],450:[function(b,y,F){y.exports=function(q,n){var p=n[15];if(0===p)return!1;p=1/p;for(var h=0;16>h;h++)q[h]=n[h]*p;return!0}},{}],451:[function(b,y,F){function q(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,
0,0,1]}}var n=b("gl-vec3/lerp"),p=b("mat4-recompose"),h=b("mat4-decompose"),a=b("gl-mat4/determinant"),f=b("quat-slerp"),d=q(),l=q(),k=q();y.exports=function(c,e,g,m){if(0===a(e)||0===a(g))return!1;e=h(e,d.translate,d.scale,d.skew,d.perspective,d.quaternion);g=h(g,l.translate,l.scale,l.skew,l.perspective,l.quaternion);if(!e||!g)return!1;n(k.translate,d.translate,l.translate,m);n(k.skew,d.skew,l.skew,m);n(k.scale,d.scale,l.scale,m);n(k.perspective,d.perspective,l.perspective,m);f(k.quaternion,d.quaternion,
l.quaternion,m);p(c,k.translate,k.scale,k.skew,k.perspective,k.quaternion);return!0}},{"gl-mat4/determinant":274,"gl-vec3/lerp":355,"mat4-decompose":449,"mat4-recompose":452,"quat-slerp":501}],452:[function(b,y,F){var q={identity:b("gl-mat4/identity"),translate:b("gl-mat4/translate"),multiply:b("gl-mat4/multiply"),create:b("gl-mat4/create"),scale:b("gl-mat4/scale"),fromRotationTranslation:b("gl-mat4/fromRotationTranslation")};q.create();var n=q.create();y.exports=function(p,h,a,f,d,l){q.identity(p);
q.fromRotationTranslation(p,l,h);p[3]=d[0];p[7]=d[1];p[11]=d[2];p[15]=d[3];q.identity(n);0!==f[2]&&(n[9]=f[2],q.multiply(p,p,n));0!==f[1]&&(n[9]=0,n[8]=f[1],q.multiply(p,p,n));0!==f[0]&&(n[8]=0,n[4]=f[0],q.multiply(p,p,n));q.scale(p,p,a);return p}},{"gl-mat4/create":273,"gl-mat4/fromRotationTranslation":276,"gl-mat4/identity":277,"gl-mat4/multiply":280,"gl-mat4/scale":287,"gl-mat4/translate":288}],453:[function(b,y,F){y.exports=Math.log2||function(q){return Math.log(q)*Math.LOG2E}},{}],454:[function(b,
y,F){function q(m){this._components=m.slice();this._time=[0];this.prevMatrix=m.slice();this.nextMatrix=m.slice();this.computedMatrix=m.slice();this.computedInverse=m.slice();this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var n=b("binary-search-bounds"),p=b("mat4-interpolate"),h=b("gl-mat4/invert"),a=b("gl-mat4/rotateX"),f=b("gl-mat4/rotateY"),d=b("gl-mat4/rotateZ"),l=b("gl-mat4/lookAt"),k=b("gl-mat4/translate");
b("gl-mat4/scale");var c=b("gl-vec3/normalize"),e=[0,0,0];y.exports=function(m){m=m||{};return new q(m.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};b=q.prototype;b.recalcMatrix=function(m){var r=this._time,u=n.le(r,m),v=this.computedMatrix;if(!(0>u)){var w=this._components;if(u===r.length-1)for(var D=16*u,C=0;16>C;++C)v[C]=w[D++];else{var x=r[u+1]-r[u];D=16*u;var A=this.prevMatrix,B=!0;for(C=0;16>C;++C)A[C]=w[D++];var t=this.nextMatrix;for(C=0;16>C;++C)t[C]=w[D++],B=B&&A[C]===t[C];if(1E-6>x||B)for(C=
0;16>C;++C)v[C]=A[C];else p(v,A,t,(m-r[u])/x)}C=this.computedUp;C[0]=v[1];C[1]=v[5];C[2]=v[9];c(C,C);C=this.computedInverse;h(C,v);m=this.computedEye;r=C[15];m[0]=C[12]/r;m[1]=C[13]/r;m[2]=C[14]/r;r=this.computedCenter;u=Math.exp(this.computedRadius[0]);for(C=0;3>C;++C)r[C]=m[C]-v[2+4*C]*u}};b.idle=function(m){if(!(m<this.lastT())){for(var r=this._components,u=r.length-16,v=0;16>v;++v)r.push(r[u++]);this._time.push(m)}};b.flush=function(m){m=n.gt(this._time,m)-2;0>m||(this._time.splice(0,m),this._components.splice(0,
16*m))};b.lastT=function(){return this._time[this._time.length-1]};b.lookAt=function(m,r,u,v){this.recalcMatrix(m);r=r||this.computedEye;u=u||e;v=v||this.computedUp;this.setMatrix(m,l(this.computedMatrix,r,u,v));for(v=m=0;3>v;++v)m+=Math.pow(u[v]-r[v],2);m=Math.log(Math.sqrt(m));this.computedRadius[0]=m};b.rotate=function(m,r,u,v){this.recalcMatrix(m);var w=this.computedInverse;r&&f(w,w,r);u&&a(w,w,u);v&&d(w,w,v);this.setMatrix(m,h(this.computedMatrix,w))};var g=[0,0,0];b.pan=function(m,r,u,v){g[0]=
-(r||0);g[1]=-(u||0);g[2]=-(v||0);this.recalcMatrix(m);r=this.computedInverse;k(r,r,g);this.setMatrix(m,h(r,r))};b.translate=function(m,r,u,v){g[0]=r||0;g[1]=u||0;g[2]=v||0;this.recalcMatrix(m);r=this.computedMatrix;k(r,r,g);this.setMatrix(m,r)};b.setMatrix=function(m,r){if(!(m<this.lastT()))for(this._time.push(m),m=0;16>m;++m)this._components.push(r[m])};b.setDistance=function(m,r){this.computedRadius[0]=r};b.setDistanceLimits=function(m,r){var u=this._limits;u[0]=m;u[1]=r};b.getDistanceLimits=function(m){var r=
this._limits;return m?(m[0]=r[0],m[1]=r[1],m):r}},{"binary-search-bounds":455,"gl-mat4/invert":278,"gl-mat4/lookAt":279,"gl-mat4/rotateX":284,"gl-mat4/rotateY":285,"gl-mat4/rotateZ":286,"gl-mat4/scale":287,"gl-mat4/translate":288,"gl-vec3/normalize":361,"mat4-interpolate":451}],455:[function(b,y,F){arguments[4][243][0].apply(F,arguments)},{dup:243}],456:[function(b,y,F){y.exports=function(n){var p=n.length;if(3>p){for(var h=Array(p),a=0;a<p;++a)h[a]=a;return 2===p&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?
[0]:h}h=Array(p);for(a=0;a<p;++a)h[a]=a;h.sort(function(e,g){var m=n[e][0]-n[g][0];return m?m:n[e][1]-n[g][1]});var f=[h[0],h[1]],d=[h[0],h[1]];for(a=2;a<p;++a){for(var l=h[a],k=n[l],c=f.length;1<c&&0>=q(n[f[c-2]],n[f[c-1]],k);)--c,f.pop();f.push(l);for(c=d.length;1<c&&0<=q(n[d[c-2]],n[d[c-1]],k);)--c,d.pop();d.push(l)}h=Array(d.length+f.length-2);a=p=0;for(l=f.length;a<l;++a)h[p++]=f[a];for(a=d.length-2;0<a;--a)h[p++]=d[a];return h};var q=b("robust-orientation")[3]},{"robust-orientation":520}],457:[function(b,
y,F){y.exports=function(n,p){function h(C){var x=!1;"altKey"in C&&(x=x||C.altKey!==v.alt,v.alt=!!C.altKey);"shiftKey"in C&&(x=x||C.shiftKey!==v.shift,v.shift=!!C.shiftKey);"ctrlKey"in C&&(x=x||C.ctrlKey!==v.control,v.control=!!C.ctrlKey);"metaKey"in C&&(x=x||C.metaKey!==v.meta,v.meta=!!C.metaKey);return x}function a(C,x){var A=q.x(x),B=q.y(x);"buttons"in x&&(C=x.buttons|0);if(C!==m||A!==r||B!==u||h(x))m=C|0,r=A||0,u=B||0,p&&p(m,r,u,v)}function f(C){a(0,C)}function d(){if(m||r||u||v.shift||v.alt||
v.meta||v.control)m=r=u=0,v.shift=v.alt=v.control=v.meta=!1,p&&p(0,0,0,v)}function l(C){h(C)&&p&&p(m,r,u,v)}function k(C){0===q.buttons(C)?a(0,C):a(m,C)}function c(C){a(m|q.buttons(C),C)}function e(C){a(m&~q.buttons(C),C)}function g(){w||(w=!0,n.addEventListener("mousemove",k),n.addEventListener("mousedown",c),n.addEventListener("mouseup",e),n.addEventListener("mouseleave",f),n.addEventListener("mouseenter",f),n.addEventListener("mouseout",f),n.addEventListener("mouseover",f),n.addEventListener("blur",
d),n.addEventListener("keyup",l),n.addEventListener("keydown",l),n.addEventListener("keypress",l),n!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}p||(p=n,n=window);var m=0,r=0,u=0,v={shift:!1,alt:!1,control:!1,meta:!1},w=!1;g();var D={element:n};Object.defineProperties(D,{enabled:{get:function(){return w},set:function(C){C?g():w&&(w=!1,n.removeEventListener("mousemove",k),n.removeEventListener("mousedown",
c),n.removeEventListener("mouseup",e),n.removeEventListener("mouseleave",f),n.removeEventListener("mouseenter",f),n.removeEventListener("mouseout",f),n.removeEventListener("mouseover",f),n.removeEventListener("blur",d),n.removeEventListener("keyup",l),n.removeEventListener("keydown",l),n.removeEventListener("keypress",l),n!==window&&(window.removeEventListener("blur",d),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},
buttons:{get:function(){return m},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return v},enumerable:!0}});return D};var q=b("mouse-event")},{"mouse-event":459}],458:[function(b,y,F){var q={left:0,top:0};y.exports=function(n,p,h){p=p||n.currentTarget||n.srcElement;Array.isArray(h)||(h=[0,0]);var a=n.clientX||0;n=n.clientY||0;p=p===window||p===document||p===document.body?q:p.getBoundingClientRect();h[0]=a-p.left;h[1]=n-p.top;
return h}},{}],459:[function(b,y,F){function q(n){return n.target||n.srcElement||window}F.buttons=function(n){if("object"===typeof n){if("buttons"in n)return n.buttons;if("which"in n){n=n.which;if(2===n)return 4;if(3===n)return 2;if(0<n)return 1<<n-1}else if("button"in n){n=n.button;if(1===n)return 4;if(2===n)return 2;if(0<=n)return 1<<n}}return 0};F.element=q;F.x=function(n){if("object"===typeof n){if("offsetX"in n)return n.offsetX;var p=q(n).getBoundingClientRect();return n.clientX-p.left}return 0};
F.y=function(n){if("object"===typeof n){if("offsetY"in n)return n.offsetY;var p=q(n).getBoundingClientRect();return n.clientY-p.top}return 0}},{}],460:[function(b,y,F){var q=b("to-px");y.exports=function(n,p,h){"function"===typeof n&&(h=!!p,p=n,n=window);var a=q("ex",n),f=function(d){h&&d.preventDefault();var l=d.deltaX||0,k=d.deltaY||0,c=d.deltaZ||0,e=1;switch(d.deltaMode){case 1:e=a;break;case 2:e=window.innerHeight}l*=e;k*=e;c*=e;if(l||k||c)return p(l,k,c,d)};n.addEventListener("wheel",f);return f}},
{"to-px":550}],461:[function(b,y,F){function q(c,e,g){for(var m=0,r=0;r<c;++r)e&1<<r&&(m|=1<<g[r]);return m}function n(c,e,g,m,r,u){function v(K,N){t.push("for(","i"+r[K],"\x3d",N,";","i"+r[K],"\x3c","s"+r[K],";","++","i"+r[K],"){")}function w(K){for(var N=0;N<x;++N)t.push("p"+N,"+\x3d","u"+N+"_"+r[K],";");t.push("}")}function D(){for(var K=1;K<1<<A;++K)t.push(k,"\x3d","e"+K,";","e"+K,"\x3d","y"+K,";","y"+K,"\x3d",k,";")}function C(K,N){if(0>K){for(var O=0;O<x;++O)u[O]?t.push("c"+O+"_0","\x3d","d"+
O,".get(","p"+O,");"):t.push("c"+O+"_0","\x3d","d"+O,"[","p"+O,"];");K=[];for(O=0;O<x;++O)K.push("c"+O+"_0");for(O=0;O<m;++O)K.push("x"+O);t.push("b0","\x3d",a,"[",l,"]\x3dphase(",K.join(),");");for(K=1;K<1<<A;++K)t.push("b"+K,"\x3d",a,"[",l,"+","e"+K,"];");O=[];for(K=1;K<1<<A;++K)O.push("(b0!\x3d\x3db"+K+")");t.push("if(",O.join("||"),"){");var Q=[];for(O=0;O<A;++O)Q.push("i"+O);for(O=0;O<x;++O)for(Q.push("c"+O+"_0"),K=1;K<1<<A;++K)u[O]?t.push("c"+O+"_"+K,"\x3d","d"+O,".get(","p"+O,"+","d"+O+"_"+
K,");"):t.push("c"+O+"_"+K,"\x3d","d"+O,"[","p"+O,"+","d"+O+"_"+K,"];"),Q.push("c"+O+"_"+K);for(O=0;O<1<<A;++O)Q.push("b"+O);for(O=0;O<m;++O)Q.push("x"+O);t.push("vertex(",Q.join(),");","v0","\x3d",h,"[",l,"]\x3d",f,"++;");O=(1<<A)-1;Q="b"+O;for(K=0;K<A;++K)if(0===(N&~(1<<K))){for(var P=O^1<<K,T="b"+P,V=[],aa=P;0<aa;aa=aa-1&P)V.push(h+"["+l+"+e"+aa+"]");V.push("v0");for(aa=0;aa<x;++aa)K&1?V.push("c"+aa+"_"+O,"c"+aa+"_"+P):V.push("c"+aa+"_"+P,"c"+aa+"_"+O);K&1?V.push(Q,T):V.push(T,Q);for(aa=0;aa<m;++aa)V.push("x"+
aa);t.push("if(",Q,"!\x3d\x3d",T,"){","face(",V.join(),")}")}t.push("}",l,"+\x3d1;")}else{for(O=K-1;0<=O;--O)v(O,0);Q=[];for(O=0;O<x;++O)u[O]?Q.push("d"+O+".get(p"+O+")"):Q.push("d"+O+"[p"+O+"]");for(O=0;O<m;++O)Q.push("x"+O);t.push(a,"[",l,"++]\x3dphase(",Q.join(),");");for(O=0;O<K;++O)w(O);for(O=0;O<x;++O)t.push("p"+O,"+\x3d","u"+O+"_"+r[K],";");t.push("if(","s"+r[K],"\x3e0){","i"+r[K],"\x3d1;");C(K-1,N|1<<r[K]);for(O=0;O<x;++O)t.push("p"+O,"+\x3d","u"+O+"_"+r[K],";");K===A-1&&(t.push(l,"\x3d0;"),
D());v(K,2);C(K-1,N);K===A-1&&(t.push("if(","i"+r[A-1],"\x261){",l,"\x3d0;}"),D());w(K);t.push("}")}}var x=u.length,A=r.length;if(2>A)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var B="extractContour"+r.join("_"),t=[],G=[],H=[],I=0;I<x;++I)H.push("a"+I);for(I=0;I<m;++I)H.push("x"+I);for(I=0;I<A;++I)G.push("s"+I+"\x3da0.shape["+I+"]|0");for(I=0;I<x;++I){G.push("d"+I+"\x3da"+I+".data","o"+I+"\x3da"+I+".offset|0");for(var J=0;J<A;++J)G.push("t"+I+"_"+J+"\x3da"+I+".stride["+
J+"]|0")}for(I=0;I<x;++I)for(G.push("p"+I+"\x3do"+I),G.push("c"+I+"_0"),J=1;J<1<<A;++J){for(var L=[],E=0;E<A;++E)J&1<<E&&L.push("-t"+(I+"_"+E));G.push("d"+I+"_"+J+"\x3d("+L.join("")+")|0");G.push("c"+I+"_"+J+"\x3d0")}for(I=0;I<x;++I)for(J=0;J<A;++J)E=["t"+I+"_"+r[J]],0<J&&E.push("t"+I+"_"+r[J-1]+"*s"+r[J-1]),G.push("u"+I+"_"+r[J]+"\x3d("+E.join("-")+")|0");for(I=0;I<A;++I)G.push("i"+I+"\x3d0");G.push(f+"\x3d0");J=["2"];for(I=A-2;0<=I;--I)J.push("s"+r[I]);G.push(d+"\x3d("+J.join("*")+")|0",a+"\x3dmallocUint32("+
d+")",h+"\x3dmallocUint32("+d+")",l+"\x3d0");G.push("b0\x3d0");for(J=1;J<1<<A;++J){I=[];L=[];for(E=0;E<A;++E)J&1<<E&&(0===L.length?I.push("1"):I.unshift(L.join("*"))),L.push("s"+r[E]);E="";0>I[0].indexOf("s"+r[A-2])&&(E="-");L=q(A,J,r);G.push("e"+L+"\x3d(-"+I.join("-")+")|0","y"+L+"\x3d("+E+I.join("-")+")|0","b"+L+"\x3d0")}G.push("v0\x3d0",k+"\x3d0");C(A-1,0);t.push("freeUint32(",h,");freeUint32(",a,");");B=["'use strict';function ",B,"(",H.join(),"){var ",G.join(),";",t.join(""),"}return ",B].join("");
return(new Function("vertex","face","phase","mallocUint32","freeUint32",B))(c,e,g,p.mallocUint32,p.freeUint32)}var p=b("typedarray-pool");y.exports=function(c){function e(D){throw Error("ndarray-extract-contour: "+D);}"object"!==typeof c&&e("Must specify arguments");var g=c.order;Array.isArray(g)||e("Must specify order");var m=c.arrayArguments||1;1>m&&e("Must have at least one array argument");var r=c.scalarArguments||0;0>r&&e("Scalar arg count must be \x3e 0");"function"!==typeof c.vertex&&e("Must specify vertex creation function");
"function"!==typeof c.cell&&e("Must specify cell creation function");"function"!==typeof c.phase&&e("Must specify phase function");for(var u=c.getters||[],v=Array(m),w=0;w<m;++w)0<=u.indexOf(w)?v[w]=!0:v[w]=!1;return n(c.vertex,c.cell,c.phase,r,g,v)};var h="V",a="P",f="N",d="Q",l="X",k="T"},{"typedarray-pool":567}],462:[function(b,y,F){function q(k){if(k in h)return h[k];for(var c=[],e=0;e<k;++e)c.push("out",e,"s\x3d0.5*(inp",e,"l-inp",e,"r);");var g=["array"],m=["junk"];for(e=0;e<k;++e){g.push("array");
m.push("out"+e+"s");var r=n(k);r[e]=-1;g.push({array:0,offset:r.slice()});r[e]=1;g.push({array:0,offset:r.slice()});m.push("inp"+e+"l","inp"+e+"r")}return h[k]=p({args:g,pre:f,post:f,body:{body:c.join(""),args:m.map(function(u){return{name:u,lvalue:0===u.indexOf("out"),rvalue:0===u.indexOf("inp"),count:"junk"!==u|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+k})}y.exports=function(k,c,e){if(Array.isArray(e)){if(e.length!==c.dimension)throw Error("ndarray-gradient: invalid boundary conditions");
}else e="string"===typeof e?n(c.dimension,e):n(c.dimension,"clamp");if(k.dimension!==c.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");if(k.shape[c.dimension]!==c.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var g=0;g<c.dimension;++g)if(k.shape[g]!==c.shape[g])throw Error("ndarray-gradient: shape mismatch");if(0===c.size)return k;if(0>=c.dimension)return k.set(0),k;var m=e;e=m.join();g=a[e];if(!g){g=m.length;for(var r=
["function gradient(dst,src){var s\x3dsrc.shape.slice();"],u=0;u<1<<g;++u){for(var v=[],w=0;w<g;++w)u&1<<w&&v.push(w+1);for(var D=0;D<1<<v.length;++D){var C=v.slice();for(w=0;w<v.length;++w)D&1<<w&&(C[w]=-C[w]);w=C;C=g-w.length;for(var x=[],A=[],B=[],t=0;t<g;++t)0<=w.indexOf(t+1)?B.push("0"):0<=w.indexOf(-(t+1))?B.push("s["+t+"]-1"):(B.push("-1"),x.push("1"),A.push("s["+t+"]-2"));A=".lo("+x.join()+").hi("+A.join()+")";0===x.length&&(A="");if(0<C){r.push("if(1");for(t=0;t<g;++t)0<=w.indexOf(t+1)||
0<=w.indexOf(-(t+1))||r.push("\x26\x26s[",t,"]\x3e2");r.push("){grad",C,"(src.pick(",B.join(),")",A);for(t=0;t<g;++t)0<=w.indexOf(t+1)||0<=w.indexOf(-(t+1))||r.push(",dst.pick(",B.join(),",",t,")",A);r.push(");")}for(t=0;t<w.length;++t){x=Math.abs(w[t])-1;var G="dst.pick("+B.join()+","+x+")"+A;switch(m[x]){case "clamp":var H=B.slice(),I=B.slice();0>w[t]?H[x]="s["+x+"]-2":I[x]="1";0===C?r.push("if(s[",x,"]\x3e1){dst.set(",B.join(),",",x,",0.5*(src.get(",H.join(),")-src.get(",I.join(),")))}else{dst.set(",
B.join(),",",x,",0)};"):r.push("if(s[",x,"]\x3e1){diff(",G,",src.pick(",H.join(),")",A,",src.pick(",I.join(),")",A,");}else{zero(",G,");};");break;case "mirror":0===C?r.push("dst.set(",B.join(),",",x,",0);"):r.push("zero(",G,");");break;case "wrap":H=B.slice();I=B.slice();0>w[t]?(H[x]="s["+x+"]-2",I[x]="0"):(H[x]="s["+x+"]-1",I[x]="1");0===C?r.push("if(s[",x,"]\x3e2){dst.set(",B.join(),",",x,",0.5*(src.get(",H.join(),")-src.get(",I.join(),")))}else{dst.set(",B.join(),",",x,",0)};"):r.push("if(s[",
x,"]\x3e2){diff(",G,",src.pick(",H.join(),")",A,",src.pick(",I.join(),")",A,");}else{zero(",G,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<C&&r.push("};")}}r.push("return dst;};return gradient");m=["diff","zero"];v=[d,l];for(u=1;u<=g;++u)m.push("grad"+u),v.push(q(u));m.push(r.join(""));g=Function.apply(void 0,m).apply(void 0,v);h[e]=g}return g(k,c)};var n=b("dup"),p=b("cwise-compiler"),h={},a={},f={body:"",args:[],thisVars:[],localVars:[]},d=p({args:["array",
"array","array"],pre:f,post:f,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out\x3d0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),l=p({args:["array"],pre:f,post:f,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out\x3d0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":151,dup:176}],463:[function(b,y,F){function q(a,f){var d=Math.floor(f);f-=d;var l=0<=d+1&&
d+1<a.shape[0],k=0<=d&&d<a.shape[0]?+a.get(d):0;a=l?+a.get(d+1):0;return(1-f)*k+f*a}function n(a,f,d){var l=Math.floor(f);f-=l;var k=0<=l&&l<a.shape[0],c=0<=l+1&&l+1<a.shape[0],e=Math.floor(d);d-=e;var g=0<=e&&e<a.shape[1],m=0<=e+1&&e+1<a.shape[1],r=k&&g?a.get(l,e):0;k=k&&m?a.get(l,e+1):0;g=c&&g?a.get(l+1,e):0;a=c&&m?a.get(l+1,e+1):0;return(1-d)*((1-f)*r+f*g)+d*((1-f)*k+f*a)}function p(a,f,d,l){var k=Math.floor(f);f-=k;var c=0<=k&&k<a.shape[0],e=0<=k+1&&k+1<a.shape[0],g=Math.floor(d);d-=g;var m=0<=
g&&g<a.shape[1],r=0<=g+1&&g+1<a.shape[1],u=Math.floor(l);l-=u;var v=0<=u&&u<a.shape[2],w=0<=u+1&&u+1<a.shape[2],D=c&&m&&v?a.get(k,g,u):0,C=c&&r&&v?a.get(k,g+1,u):0,x=e&&m&&v?a.get(k+1,g,u):0;v=e&&r&&v?a.get(k+1,g+1,u):0;var A=c&&m&&w?a.get(k,g,u+1):0;c=c&&r&&w?a.get(k,g+1,u+1):0;m=e&&m&&w?a.get(k+1,g,u+1):0;a=e&&r&&w?a.get(k+1,g+1,u+1):0;return(1-l)*((1-d)*((1-f)*D+f*x)+d*((1-f)*C+f*v))+l*((1-d)*((1-f)*A+f*m)+d*((1-f)*c+f*a))}function h(a){var f=a.shape.length|0,d=Array(f),l=Array(f),k=Array(f),c=
Array(f),e;for(e=0;e<f;++e){var g=+arguments[e+1];d[e]=Math.floor(g);l[e]=g-d[e];k[e]=0<=d[e]&&d[e]<a.shape[e];c[e]=0<=d[e]+1&&d[e]+1<a.shape[e]}g=0;var m;e=0;a:for(;e<1<<f;++e){var r=1;var u=a.offset;for(m=0;m<f;++m)if(e&1<<m){if(!c[m])continue a;r*=l[m];u+=a.stride[m]*(d[m]+1)}else{if(!k[m])continue a;r*=1-l[m];u+=a.stride[m]*d[m]}g+=r*a.data[u]}return g}y.exports=function(a,f,d,l){switch(a.shape.length){case 0:return 0;case 1:return q(a,f);case 2:return n(a,f,d);case 3:return p(a,f,d,l);default:return h.apply(void 0,
arguments)}};y.exports.d1=q;y.exports.d2=n;y.exports.d3=p},{}],464:[function(b,y,F){function q(e){if(!e)return h;for(var g=0;g<e.args.length;++g){var m=e.args[g];e.args[g]=0===g?{name:m,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:m,lvalue:!1,rvalue:!0,count:1}}e.thisVars||(e.thisVars=[]);e.localVars||(e.localVars=[]);return e}function n(e){for(var g=[],m=0;m<e.args.length;++m)g.push("a"+m);g=new Function("P",["return function ",e.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));
e=p({args:e.args,pre:q(e.pre),body:q(e.body),post:q(e.proc),funcName:e.funcName});return g(e)}var p=b("cwise-compiler"),h={body:"",args:[],thisVars:[],localVars:[]},a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};(function(){for(var e in a){var g=a[e];F[e]=n({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+g+"c"},funcName:e});F[e+"eq"]=n({args:["array","array"],body:{args:["a","b"],body:"a"+g+
"\x3db"},rvalue:!0,funcName:e+"eq"});F[e+"s"]=n({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+g+"s"},funcName:e+"s"});F[e+"seq"]=n({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"\x3ds"},rvalue:!0,funcName:e+"seq"})}})();var f={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var e in f){var g=f[e];F[e]=n({args:["array","array"],body:{args:["a","b"],body:"a\x3d"+g+"b"},funcName:e});F[e+"eq"]=n({args:["array"],body:{args:["a"],body:"a\x3d"+g+"a"},rvalue:!0,
count:2,funcName:e+"eq"})}})();var d={and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d"};(function(){for(var e in d){var g=d[e];F[e]=n({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+g+"c"},funcName:e});F[e+"s"]=n({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+g+"s"},funcName:e+"s"});F[e+"eq"]=n({args:["array","array"],body:{args:["a","b"],body:"a\x3da"+g+"b"},rvalue:!0,count:2,funcName:e+"eq"});
F[e+"seq"]=n({args:["array","scalar"],body:{args:["a","s"],body:"a\x3da"+g+"s"},rvalue:!0,count:2,funcName:e+"seq"})}})();var l="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var e=0;e<l.length;++e){var g=l[e];F[g]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b)",thisVars:["this_f"]},funcName:g});F[g+"eq"]=n({args:["array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},
body:{args:["a"],body:"a\x3dthis_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var k=["max","min","atan2","pow"];(function(){for(var e=0;e<k.length;++e){var g=k[e];F[g]=n({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:g});F[g+"s"]=n({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",
thisVars:["this_f"]},funcName:g+"s"});F[g+"eq"]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"});F[g+"seq"]=n({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var c=["atan2","pow"];(function(){for(var e=0;e<c.length;++e){var g=
c[e];F[g+"op"]=n({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:g+"op"});F[g+"ops"]=n({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"});F[g+"opeq"]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a",
"b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"});F[g+"opseq"]=n({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})();F.any=p({args:["array"],pre:h,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});
F.all=p({args:["array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});F.sum=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});F.prod=
p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});F.norm2squared=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],
thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});F.norm2=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});F.norminf=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:4}],body:"if(-a\x3ethis_s){this_s\x3d-a}else if(a\x3ethis_s){this_s\x3da}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});F.norm1=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+\x3da\x3c0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});
F.sup=p({args:["array"],pre:{body:"this_h\x3d-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3ethis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});F.inf=p({args:["array"],pre:{body:"this_h\x3dInfinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3cthis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});F.argmin=p({args:["index","array","shape"],pre:{body:"{this_v\x3dInfinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3cthis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});F.argmax=p({args:["index","array","shape"],pre:{body:"{this_v\x3d-Infinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,
count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3ethis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});F.random=
n({args:["array"],pre:{args:[],body:"this_f\x3dMath.random",thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f()",thisVars:["this_f"]},funcName:"random"});F.assign=n({args:["array","array"],body:{args:["a","b"],body:"a\x3db"},funcName:"assign"});F.assigns=n({args:["array","scalar"],body:{args:["a","b"],body:"a\x3db"},funcName:"assigns"});F.equals=p({args:["array","array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!\x3d\x3dy){return false}",
localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":151}],465:[function(b,y,F){var q=b("ndarray"),n=b("./doConvert.js");y.exports=function(p,h){for(var a=[],f=p,d=1;Array.isArray(f);)a.push(f.length),d*=f.length,f=f[0];if(0===a.length)return q();h||(h=q(new Float64Array(d),a));n(h,p);return h}},{"./doConvert.js":466,ndarray:469}],466:[function(b,y,F){y.exports=b("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",
args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v\x3d_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i\x3d0;_inline_1_i\x3c_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v\x3d_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_\x3d_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i",
"_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":151}],467:[function(b,y,F){function q(f){switch(f){case "uint8":return[a.mallocUint8,a.freeUint8];case "uint16":return[a.mallocUint16,a.freeUint16];case "uint32":return[a.mallocUint32,a.freeUint32];case "int8":return[a.mallocInt8,a.freeInt8];case "int16":return[a.mallocInt16,a.freeInt16];case "int32":return[a.mallocInt32,a.freeInt32];case "float32":return[a.mallocFloat,a.freeFloat];
case "float64":return[a.mallocDouble,a.freeDouble];default:return null}}function n(f){for(var d=[],l=0;l<f;++l)d.push("s"+l);for(l=0;l<f;++l)d.push("n"+l);for(l=1;l<f;++l)d.push("d"+l);for(l=1;l<f;++l)d.push("e"+l);for(l=1;l<f;++l)d.push("f"+l);return d}function p(f,d){function l(w){return"generic"===d?["data.get(",w,")"].join(""):["data[",w,"]"].join("")}function k(w,D){return"generic"===d?["data.set(",w,",",D,")"].join(""):["data[",w,"]\x3d",D].join("")}var c=["'use strict'"],e=["ndarrayInsertionSort",
f.join("d"),d].join(""),g=["left","right","data","offset"].concat(n(f.length)),m=q(d),r=["i,j,cptr,ptr\x3dleft*s0+offset"];if(1<f.length){for(var u=[],v=1;v<f.length;++v)r.push("i"+v),u.push("n"+v);m?r.push("scratch\x3dmalloc("+u.join("*")+")"):r.push("scratch\x3dnew Array("+u.join("*")+")");r.push("dptr","sptr","a","b")}else r.push("scratch");c.push(["function ",e,"(",g.join(","),"){var ",r.join(",")].join(""),"for(i\x3dleft+1;i\x3c\x3dright;++i){","j\x3di;ptr+\x3ds0","cptr\x3dptr");if(1<f.length){c.push("dptr\x3d0;sptr\x3dptr");
for(v=f.length-1;0<=v;--v)g=f[v],0!==g&&c.push(["for(i",g,"\x3d0;i",g,"\x3cn",g,";++i",g,"){"].join(""));c.push("scratch[dptr++]\x3d",l("sptr"));for(v=0;v<f.length;++v)g=f[v],0!==g&&c.push("sptr+\x3dd"+g,"}");c.push("__g:while(j--\x3eleft){","dptr\x3d0","sptr\x3dcptr-s0");for(v=1;v<f.length;++v)1===v&&c.push("__l:"),c.push(["for(i",v,"\x3d0;i",v,"\x3cn",v,";++i",v,"){"].join(""));c.push(["a\x3d",l("sptr"),"\nb\x3dscratch[dptr]\nif(a\x3cb){break __g}\nif(a\x3eb){break __l}"].join(""));for(v=f.length-
1;1<=v;--v)c.push("sptr+\x3de"+v,"dptr+\x3df"+v,"}");c.push("dptr\x3dcptr;sptr\x3dcptr-s0");for(v=f.length-1;0<=v;--v)g=f[v],0!==g&&c.push(["for(i",g,"\x3d0;i",g,"\x3cn",g,";++i",g,"){"].join(""));c.push(k("dptr",l("sptr")));for(v=0;v<f.length;++v)g=f[v],0!==g&&c.push(["dptr+\x3dd",g,";sptr+\x3dd",g].join(""),"}");c.push("cptr-\x3ds0\n}");c.push("dptr\x3dcptr;sptr\x3d0");for(v=f.length-1;0<=v;--v)g=f[v],0!==g&&c.push(["for(i",g,"\x3d0;i",g,"\x3cn",g,";++i",g,"){"].join(""));c.push(k("dptr","scratch[sptr++]"));
for(v=0;v<f.length;++v)g=f[v],0!==g&&c.push("dptr+\x3dd"+g,"}")}else c.push("scratch\x3d"+l("ptr"),"while((j--\x3eleft)\x26\x26("+l("cptr-s0")+"\x3escratch)){",k("cptr",l("cptr-s0")),"cptr-\x3ds0","}",k("cptr","scratch"));c.push("}");1<f.length&&m&&c.push("free(scratch)");c.push("} return "+e);if(m)return f=new Function("malloc","free",c.join("\n")),f(m[0],m[1]);f=new Function(c.join("\n"));return f()}function h(f,d,l){function k(N){return["(offset+",N,"*s0)"].join("")}function c(N){return"generic"===
d?["data.get(",N,")"].join(""):["data[",N,"]"].join("")}function e(N,O){return"generic"===d?["data.set(",N,",",O,")"].join(""):["data[",N,"]\x3d",O].join("")}function g(N,O,Q){if(1===N.length)G.push("ptr0\x3d"+k(N[0]));else for(var P=0;P<N.length;++P)G.push(["b_ptr",P,"\x3ds0*",N[P]].join(""));O&&G.push("pivot_ptr\x3d0");G.push("ptr_shift\x3doffset");for(P=f.length-1;0<=P;--P){var T=f[P];0!==T&&G.push(["for(i",T,"\x3d0;i",T,"\x3cn",T,";++i",T,"){"].join(""))}if(1<N.length)for(P=0;P<N.length;++P)G.push(["ptr",
P,"\x3db_ptr",P,"+ptr_shift"].join(""));G.push(Q);O&&G.push("++pivot_ptr");for(P=0;P<f.length;++P)T=f[P],0!==T&&(1<N.length?G.push("ptr_shift+\x3dd"+T):G.push("ptr0+\x3dd"+T),G.push("}"))}function m(N,O,Q,P){if(1===O.length)G.push("ptr0\x3d"+k(O[0]));else{for(var T=0;T<O.length;++T)G.push(["b_ptr",T,"\x3ds0*",O[T]].join(""));G.push("ptr_shift\x3doffset")}Q&&G.push("pivot_ptr\x3d0");N&&G.push(N+":");for(T=1;T<f.length;++T)G.push(["for(i",T,"\x3d0;i",T,"\x3cn",T,";++i",T,"){"].join(""));if(1<O.length)for(T=
0;T<O.length;++T)G.push(["ptr",T,"\x3db_ptr",T,"+ptr_shift"].join(""));G.push(P);for(T=f.length-1;1<=T;--T)Q&&G.push("pivot_ptr+\x3df"+T),1<O.length?G.push("ptr_shift+\x3de"+T):G.push("ptr0+\x3de"+T),G.push("}")}function r(){1<f.length&&J&&G.push("free(pivot1)","free(pivot2)")}function u(N,O){N="el"+N;O="el"+O;if(1<f.length){var Q="__l"+ ++L;m(Q,[N,O],!1,["comp\x3d",c("ptr0"),"-",c("ptr1"),"\nif(comp\x3e0){tmp0\x3d",N,";",N,"\x3d",O,";",O,"\x3dtmp0;break ",Q,"}\nif(comp\x3c0){break ",Q,"}"].join(""))}else G.push(["if(",
c(k(N)),"\x3e",c(k(O)),"){tmp0\x3d",N,";",N,"\x3d",O,";",O,"\x3dtmp0}"].join(""))}function v(N,O){1<f.length?g([N,O],!1,e("ptr0",c("ptr1"))):G.push(e(k(N),c(k(O))))}function w(N,O,Q){if(1<f.length){var P="__l"+ ++L;m(P,[O],!0,[N,"\x3d",c("ptr0"),"-pivot",Q,"[pivot_ptr]\nif(",N,"!\x3d\x3d0){break ",P,"}"].join(""))}else G.push([N,"\x3d",c(k(O)),"-pivot",Q].join(""))}function D(N,O){1<f.length?g([N,O],!1,["tmp\x3d",c("ptr0"),"\n",e("ptr0",c("ptr1")),"\n",e("ptr1","tmp")].join("")):G.push(["ptr0\x3d",
k(N),"\nptr1\x3d",k(O),"\ntmp\x3d",c("ptr0"),"\n",e("ptr0",c("ptr1")),"\n",e("ptr1","tmp")].join(""))}function C(N,O,Q){1<f.length?(g([N,O,Q],!1,["tmp\x3d",c("ptr0"),"\n",e("ptr0",c("ptr1")),"\n",e("ptr1",c("ptr2")),"\n",e("ptr2","tmp")].join("")),G.push("++"+O,"--"+Q)):G.push(["ptr0\x3d",k(N),"\nptr1\x3d",k(O),"\nptr2\x3d",k(Q),"\n++",O,"\n--",Q,"\ntmp\x3d",c("ptr0"),"\n",e("ptr0",c("ptr1")),"\n",e("ptr1",c("ptr2")),"\n",e("ptr2","tmp")].join(""))}function x(N,O){D(N,O);G.push("--"+O)}function A(N,
O,Q){1<f.length?g([N,O],!0,[e("ptr0",c("ptr1")),"\n",e("ptr1",["pivot",Q,"[pivot_ptr]"].join(""))].join("")):G.push(e(k(N),c(k(O))),e(k(O),"pivot"+Q))}function B(N,O){G.push(["if((",O,"-",N,")\x3c\x3d32){\ninsertionSort(",N,",",O,",data,offset,",n(f.length).join(","),")\n}else{\n",H,"(",N,",",O,",data,offset,",n(f.length).join(","),")\n}"].join(""))}function t(N,O,Q){1<f.length?(G.push(["__l",++L,":while(true){"].join("")),g([N],!0,["if(",c("ptr0"),"!\x3d\x3dpivot",O,"[pivot_ptr]){break __l",L,"}"].join("")),
G.push(Q,"}")):G.push(["while(",c(k(N)),"\x3d\x3d\x3dpivot",O,"){",Q,"}"].join(""))}var G=["'use strict'"],H=["ndarrayQuickSort",f.join("d"),d].join(""),I=["left","right","data","offset"].concat(n(f.length)),J=q(d),L=0;G.push(["function ",H,"(",I.join(","),"){"].join(""));I="sixth\x3d((right-left+1)/6)|0 index1\x3dleft+sixth index5\x3dright-sixth index3\x3d(left+right)\x3e\x3e1 index2\x3dindex3-sixth index4\x3dindex3+sixth el1\x3dindex1 el2\x3dindex2 el3\x3dindex3 el4\x3dindex4 el5\x3dindex5 less\x3dleft+1 great\x3dright-1 pivots_are_equal\x3dtrue tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1\x3d0 comp_pivot2\x3d0 comp\x3d0".split(" ");
if(1<f.length){for(var E=[],K=1;K<f.length;++K)E.push("n"+K),I.push("i"+K);for(K=0;8>K;++K)I.push("b_ptr"+K);I.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize\x3d"+E.join("*"));J?I.push("pivot1\x3dmalloc(elementSize)","pivot2\x3dmalloc(elementSize)"):I.push("pivot1\x3dnew Array(elementSize),pivot2\x3dnew Array(elementSize)")}else I.push("pivot1","pivot2");G.push("var "+I.join(","));u(1,2);u(4,5);u(1,3);u(2,3);u(1,4);u(3,4);u(2,5);u(2,3);u(4,5);1<f.length?g("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),
!0,["pivot1[pivot_ptr]\x3d",c("ptr1"),"\npivot2[pivot_ptr]\x3d",c("ptr3"),"\npivots_are_equal\x3dpivots_are_equal\x26\x26(pivot1[pivot_ptr]\x3d\x3d\x3dpivot2[pivot_ptr])\nx\x3d",c("ptr0"),"\ny\x3d",c("ptr2"),"\nz\x3d",c("ptr4"),"\n",e("ptr5","x"),"\n",e("ptr6","y"),"\n",e("ptr7","z")].join("")):G.push(["pivot1\x3d",c(k("el2")),"\npivot2\x3d",c(k("el4")),"\npivots_are_equal\x3dpivot1\x3d\x3d\x3dpivot2\nx\x3d",c(k("el1")),"\ny\x3d",c(k("el3")),"\nz\x3d",c(k("el5")),"\n",e(k("index1"),"x"),"\n",e(k("index3"),
"y"),"\n",e(k("index5"),"z")].join(""));v("index2","left");v("index4","right");G.push("if(pivots_are_equal){");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");w("comp","k",1);G.push("if(comp\x3d\x3d\x3d0){continue}");G.push("if(comp\x3c0){");G.push("if(k!\x3d\x3dless){");D("k","less");G.push("}");G.push("++less");G.push("}else{");G.push("while(true){");w("comp","great",1);G.push("if(comp\x3e0){");G.push("great--");G.push("}else if(comp\x3c0){");C("k","less","great");G.push("break");G.push("}else{");
x("k","great");G.push("break");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}else{");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");w("comp_pivot1","k",1);G.push("if(comp_pivot1\x3c0){");G.push("if(k!\x3d\x3dless){");D("k","less");G.push("}");G.push("++less");G.push("}else{");w("comp_pivot2","k",2);G.push("if(comp_pivot2\x3e0){");G.push("while(true){");w("comp","great",2);G.push("if(comp\x3e0){");G.push("if(--great\x3ck){break}");G.push("continue");G.push("}else{");w("comp","great",1);G.push("if(comp\x3c0){");
C("k","less","great");G.push("}else{");x("k","great");G.push("}");G.push("break");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");A("left","(less-1)",1);A("right","(great+1)",2);B("left","(less-2)");B("(great+2)","right");G.push("if(pivots_are_equal){");r();G.push("return");G.push("}");G.push("if(less\x3cindex1\x26\x26great\x3eindex5){");t("less",1,"++less");t("great",2,"--great");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");w("comp_pivot1","k",1);G.push("if(comp_pivot1\x3d\x3d\x3d0){");
G.push("if(k!\x3d\x3dless){");D("k","less");G.push("}");G.push("++less");G.push("}else{");w("comp_pivot2","k",2);G.push("if(comp_pivot2\x3d\x3d\x3d0){");G.push("while(true){");w("comp","great",2);G.push("if(comp\x3d\x3d\x3d0){");G.push("if(--great\x3ck){break}");G.push("continue");G.push("}else{");w("comp","great",1);G.push("if(comp\x3c0){");C("k","less","great");G.push("}else{");x("k","great");G.push("}");G.push("break");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");r();
B("less","great");G.push("}return "+H);if(1<f.length&&J)return I=new Function("insertionSort","malloc","free",G.join("\n")),I(l,J[0],J[1]);I=new Function("insertionSort",G.join("\n"));return I(l)}var a=b("typedarray-pool");y.exports=function(f,d){var l=["'use strict'"],k=["ndarraySortWrapper",f.join("d"),d].join("");l.push(["function ",k,"(array){"].join(""));for(var c=["data\x3darray.data,offset\x3darray.offset|0,shape\x3darray.shape,stride\x3darray.stride"],e=0;e<f.length;++e)c.push(["s",e,"\x3dstride[",
e,"]|0,n",e,"\x3dshape[",e,"]|0"].join(""));var g=Array(f.length),m=[];for(e=0;e<f.length;++e){var r=f[e];0!==r&&(g[r]=0===m.length?"1":m.join("*"),m.push("n"+r))}var u=m=-1;for(e=0;e<f.length;++e)r=f[e],0!==r&&(0<m?c.push(["d",r,"\x3ds",r,"-d",m,"*n",m].join("")):c.push(["d",r,"\x3ds",r].join("")),m=r),r=f.length-1-e,0!==r&&(0<u?c.push(["e",r,"\x3ds",r,"-e",u,"*n",u,",f",r,"\x3d",g[r],"-f",u,"*n",u].join("")):c.push(["e",r,"\x3ds",r,",f",r,"\x3d",g[r]].join("")),u=r);l.push("var "+c.join(","));c=
["0","n0-1","data","offset"].concat(n(f.length));l.push(["if(n0\x3c\x3d32){insertionSort(",c.join(","),")}else{quickSort(",c.join(","),")}"].join(""));l.push("}return "+k);l=new Function("insertionSort","quickSort",l.join("\n"));k=p(f,d);f=h(f,d,k);return l(k,f)}},{"typedarray-pool":567}],468:[function(b,y,F){var q=b("./lib/compile_sort.js"),n={};y.exports=function(p){var h=p.order,a=p.dtype,f=[h,a].join(":"),d=n[f];d||(n[f]=d=q(h,a));d(p);return p}},{"./lib/compile_sort.js":467}],469:[function(b,
y,F){function q(k,c){return k[0]-c[0]}function n(){var k=this.stride,c=Array(k.length),e;for(e=0;e<c.length;++e)c[e]=[Math.abs(k[e]),e];c.sort(q);k=Array(c.length);for(e=0;e<k.length;++e)k[e]=c[e][1];return k}function p(k,c){var e=["View",c,"d",k].join("");0>c&&(e="View_Nil"+k);var g="generic"===k;if(-1===c)return c=new Function("function "+e+"(a){this.data\x3da;};var proto\x3d"+e+".prototype;proto.dtype\x3d'"+k+"';proto.index\x3dfunction(){return -1};proto.size\x3d0;proto.dimension\x3d-1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction(){return new "+
e+"(this.data);};proto.get\x3dproto.set\x3dfunction(){};proto.pick\x3dfunction(){return null};return function construct_"+e+"(a){return new "+e+"(a);}"),c();if(0===c)return c=new Function("TrivialArray","function "+e+"(a,d) {this.data \x3d a;this.offset \x3d d};var proto\x3d"+e+".prototype;proto.dtype\x3d'"+k+"';proto.index\x3dfunction(){return this.offset};proto.dimension\x3d0;proto.size\x3d1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction "+
e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick\x3dfunction "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf\x3dproto.get\x3dfunction "+e+"_get(){return "+(g?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set\x3dfunction "+e+"_set(v){return "+(g?"this.data.set(this.offset,v)":"this.data[this.offset]\x3dv")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}"),c(l[k][0]);var m=["'use strict'"];var r=a(c),u=r.map(function(C){return"i"+C}),v=
"this.offset+"+r.map(function(C){return"this.stride["+C+"]*i"+C}).join("+"),w=r.map(function(C){return"b"+C}).join(","),D=r.map(function(C){return"c"+C}).join(",");m.push("function "+e+"(a,"+w+","+D+",d){this.data\x3da","this.shape\x3d["+w+"]","this.stride\x3d["+D+"]","this.offset\x3dd|0}","var proto\x3d"+e+".prototype","proto.dtype\x3d'"+k+"'","proto.dimension\x3d"+c);m.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+r.map(function(C){return"this.shape["+C+"]"}).join("*"),
"}})");1===c?m.push("proto.order\x3d[0]"):(m.push("Object.defineProperty(proto,'order',{get:"),4>c?(m.push("function "+e+"_order(){"),2===c?m.push("return (Math.abs(this.stride[0])\x3eMath.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===c&&m.push("var s0\x3dMath.abs(this.stride[0]),s1\x3dMath.abs(this.stride[1]),s2\x3dMath.abs(this.stride[2]);if(s0\x3es1){if(s1\x3es2){return [2,1,0];}else if(s0\x3es2){return [1,2,0];}else{return [1,0,2];}}else if(s0\x3es2){return [2,0,1];}else if(s2\x3es1){return [0,1,2];}else{return [0,2,1];}}})")):
m.push("ORDER})"));m.push("proto.set\x3dfunction "+e+"_set("+u.join(",")+",v){");g?m.push("return this.data.set("+v+",v)}"):m.push("return this.data["+v+"]\x3dv}");m.push("proto.get\x3dfunction "+e+"_get("+u.join(",")+"){");g?m.push("return this.data.get("+v+")}"):m.push("return this.data["+v+"]}");m.push("proto.index\x3dfunction "+e+"_index(",u.join(),"){return "+v+"}");m.push("proto.hi\x3dfunction "+e+"_hi("+u.join(",")+"){return new "+e+"(this.data,"+r.map(function(C){return["(typeof i",C,"!\x3d\x3d'number'||i",
C,"\x3c0)?this.shape[",C,"]:i",C,"|0"].join("")}).join(",")+","+r.map(function(C){return"this.stride["+C+"]"}).join(",")+",this.offset)}");g=r.map(function(C){return"a"+C+"\x3dthis.shape["+C+"]"});v=r.map(function(C){return"c"+C+"\x3dthis.stride["+C+"]"});m.push("proto.lo\x3dfunction "+e+"_lo("+u.join(",")+"){var b\x3dthis.offset,d\x3d0,"+g.join(",")+","+v.join(","));for(g=0;g<c;++g)m.push("if(typeof i"+g+"\x3d\x3d\x3d'number'\x26\x26i"+g+"\x3e\x3d0){d\x3di"+g+"|0;b+\x3dc"+g+"*d;a"+g+"-\x3dd}");m.push("return new "+
e+"(this.data,"+r.map(function(C){return"a"+C}).join(",")+","+r.map(function(C){return"c"+C}).join(",")+",b)}");m.push("proto.step\x3dfunction "+e+"_step("+u.join(",")+"){var "+r.map(function(C){return"a"+C+"\x3dthis.shape["+C+"]"}).join(",")+","+r.map(function(C){return"b"+C+"\x3dthis.stride["+C+"]"}).join(",")+",c\x3dthis.offset,d\x3d0,ceil\x3dMath.ceil");for(g=0;g<c;++g)m.push("if(typeof i"+g+"\x3d\x3d\x3d'number'){d\x3di"+g+"|0;if(d\x3c0){c+\x3db"+g+"*(a"+g+"-1);a"+g+"\x3dceil(-a"+g+"/d)}else{a"+
g+"\x3dceil(a"+g+"/d)}b"+g+"*\x3dd}");m.push("return new "+e+"(this.data,"+r.map(function(C){return"a"+C}).join(",")+","+r.map(function(C){return"b"+C}).join(",")+",c)}");v=Array(c);w=Array(c);for(g=0;g<c;++g)v[g]="a[i"+g+"]",w[g]="b[i"+g+"]";m.push("proto.transpose\x3dfunction "+e+"_transpose("+u+"){"+u.map(function(C,x){return C+"\x3d("+C+"\x3d\x3d\x3dundefined?"+x+":"+C+"|0)"}).join(";"),"var a\x3dthis.shape,b\x3dthis.stride;return new "+e+"(this.data,"+v.join(",")+","+w.join(",")+",this.offset)}");
m.push("proto.pick\x3dfunction "+e+"_pick("+u+"){var a\x3d[],b\x3d[],c\x3dthis.offset");for(g=0;g<c;++g)m.push("if(typeof i"+g+"\x3d\x3d\x3d'number'\x26\x26i"+g+"\x3e\x3d0){c\x3d(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");m.push("var ctor\x3dCTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");m.push("return function construct_"+e+"(data,shape,stride,offset){return new "+e+"(data,"+r.map(function(C){return"shape["+C+"]"}).join(",")+","+r.map(function(C){return"stride["+
C+"]"}).join(",")+",offset)}");c=new Function("CTOR_LIST","ORDER",m.join("\n"));return c(l[k],n)}function h(k){if(f(k))return"buffer";if(d)switch(Object.prototype.toString.call(k)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";
case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(k)?"array":"generic"}var a=b("iota-array"),f=b("is-buffer"),d="undefined"!==typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};(function(){for(var k in l)l[k].push(p(k,-1))});y.exports=function(k,c,e,g){if(void 0===
k){var m=l.array[0];return m([])}"number"===typeof k&&(k=[k]);void 0===c&&(c=[k.length]);m=c.length;if(void 0===e){e=Array(m);for(var r=m-1,u=1;0<=r;--r)e[r]=u,u*=c[r]}if(void 0===g)for(r=g=0;r<m;++r)0>e[r]&&(g-=(c[r]-1)*e[r]);r=h(k);for(u=l[r];u.length<=m+1;)u.push(p(r,u.length-1));m=u[m+1];return m(k,c,e,g)}},{"iota-array":437,"is-buffer":439}],470:[function(b,y,F){var q=b("double-bits"),n=Math.pow(2,-1074);y.exports=function(p,h){if(isNaN(p)||isNaN(h))return NaN;if(p===h)return p;if(0===p)return 0>
h?-n:n;var a=q.hi(p),f=q.lo(p);h>p===0<p?4294967295===f?(a+=1,f=0):f+=1:0===f?(f=4294967295,--a):--f;return q.pack(f,a)}},{"double-bits":173}],471:[function(b,y,F){function q(d,l,k,c){return["C",d,l,k,c,k,c]}function n(d,l,k,c,e,g){return["C",d/3+2/3*k,l/3+2/3*c,e/3+2/3*k,g/3+2/3*c,e,g]}function p(d,l,k,c,e,g,m,r,u,v){if(v)x=v[0],g=v[1],D=v[2],C=v[3];else{x=h(d,l,-e);d=x.x;l=x.y;x=h(r,u,-e);r=x.x;u=x.y;x=(d-r)/2;D=(l-u)/2;C=x*x/(k*k)+D*D/(c*c);1<C&&(C=Math.sqrt(C),k*=C,c*=C);C=k*k;var w=c*c;g=(g==
m?-1:1)*Math.sqrt(Math.abs((C*w-C*D*D-w*x*x)/(C*D*D+w*x*x)));Infinity==g&&(g=1);var D=g*k*D/c+(d+r)/2,C=g*-c*x/k+(l+u)/2,x=Math.asin(((l-C)/c).toFixed(9));g=Math.asin(((u-C)/c).toFixed(9));x=d<D?a-x:x;g=r<D?a-g:g;0>x&&(x=2*a+x);0>g&&(g=2*a+g);m&&x>g&&(x-=2*a);!m&&g>x&&(g-=2*a)}if(Math.abs(g-x)>f){var A=g;w=r;var B=u;g=x+f*(m&&g>x?1:-1);r=D+k*Math.cos(g);u=C+c*Math.sin(g);A=p(r,u,k,c,e,0,m,w,B,[g,A,D,C])}m=Math.tan((g-x)/4);k=4/3*k*m;c=4/3*c*m;d=[2*d-(d+k*Math.sin(x)),2*l-(l-c*Math.cos(x)),r+k*Math.sin(g),
u-c*Math.cos(g),r,u];if(v)return d;A&&(d=d.concat(A));for(v=0;v<d.length;)l=h(d[v],d[v+1],e),d[v++]=l.x,d[v++]=l.y;return d}function h(d,l,k){return{x:d*Math.cos(k)-l*Math.sin(k),y:d*Math.sin(k)+l*Math.cos(k)}}var a=Math.PI,f=a/180*120;y.exports=function(d){for(var l,k=[],c=0,e=0,g=0,m=0,r=null,u=null,v=0,w=0,D=0,C=d.length;D<C;D++){var x=d[D],A=x[0];switch(A){case "M":g=x[1];m=x[2];break;case "A":x=p(v,w,x[1],x[2],a/180*x[3],x[4],x[5],x[6],x[7]);x.unshift("C");7<x.length&&(k.push(x.splice(0,7)),
x.unshift("C"));break;case "S":if("C"==l||"S"==l)v+=v-c,w+=w-e;x=["C",v,w,x[1],x[2],x[3],x[4]];break;case "T":"Q"==l||"T"==l?(r=2*v-r,u=2*w-u):(r=v,u=w);x=n(v,w,r,u,x[1],x[2]);break;case "Q":r=x[1];u=x[2];x=n(v,w,x[1],x[2],x[3],x[4]);break;case "L":x=q(v,w,x[1],x[2]);break;case "H":x=q(v,w,x[1],w);break;case "V":x=q(v,w,v,x[1]);break;case "Z":x=q(v,w,g,m)}l=A;v=x[x.length-2];w=x[x.length-1];4<x.length?(c=x[x.length-4],e=x[x.length-3]):(c=v,e=w);k.push(x)}return k}},{}],472:[function(b,y,F){F.vertexNormals=
function(q,n,p){var h=n.length,a=Array(h);p=void 0===p?1E-6:p;for(var f=0;f<h;++f)a[f]=[0,0,0];for(f=0;f<q.length;++f)for(var d=q[f],l,k=d[d.length-1],c=d[0],e=0;e<d.length;++e){l=k;k=c;c=d[(e+1)%d.length];var g=n[l],m=n[k],r=n[c],u=Array(3),v=0,w=Array(3),D=0;for(l=0;3>l;++l)u[l]=g[l]-m[l],v+=u[l]*u[l],w[l]=r[l]-m[l],D+=w[l]*w[l];if(v*D>p)for(g=a[k],v=1/Math.sqrt(v*D),l=0;3>l;++l)D=(l+1)%3,m=(l+2)%3,g[l]+=v*(w[D]*u[m]-w[m]*u[D])}for(f=0;f<h;++f){g=a[f];for(l=q=0;3>l;++l)q+=g[l]*g[l];if(q>p)for(v=
1/Math.sqrt(q),l=0;3>l;++l)g[l]*=v;else for(l=0;3>l;++l)g[l]=0}return a};F.faceNormals=function(q,n,p){var h=q.length,a=Array(h);p=void 0===p?1E-6:p;for(var f=0;f<h;++f){for(var d=q[f],l=Array(3),k=0;3>k;++k)l[k]=n[d[k]];d=Array(3);var c=Array(3);for(k=0;3>k;++k)d[k]=l[1][k]-l[0][k],c[k]=l[2][k]-l[0][k];l=Array(3);var e=0;for(k=0;3>k;++k){var g=(k+1)%3,m=(k+2)%3;l[k]=d[g]*c[m]-d[m]*c[g];e+=l[k]*l[k]}e=e>p?1/Math.sqrt(e):0;for(k=0;3>k;++k)l[k]*=e;a[f]=l}return a}},{}],473:[function(b,y,F){var q=Object.getOwnPropertySymbols,
n=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;y.exports=function(){try{if(!Object.assign)return!1;var h=new String("abc");h[5]="de";if("5"===Object.getOwnPropertyNames(h)[0])return!1;var a={};for(h=0;10>h;h++)a["_"+String.fromCharCode(h)]=h;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(d){return a[d]}).join(""))return!1;var f={};"abcdefghijklmnopqrst".split("").forEach(function(d){f[d]=d});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},f)).join("")?
!1:!0}catch(d){return!1}}()?Object.assign:function(h,a){if(null===h||void 0===h)throw new TypeError("Object.assign cannot be called with null or undefined");var f=Object(h);for(var d,l=1;l<arguments.length;l++){var k=Object(arguments[l]);for(var c in k)n.call(k,c)&&(f[c]=k[c]);if(q){d=q(k);for(var e=0;e<d.length;e++)p.call(k,d[e])&&(f[d[e]]=k[d[e]])}}return f}},{}],474:[function(b,y,F){y.exports=function(q,n,p,h,a,f,d,l,k,c){var e=n+f+c;if(0<g){var g=Math.sqrt(e+1);q[0]=.5*(d-k)/g;q[1]=.5*(l-h)/g;
q[2]=.5*(p-f)/g;q[3]=.5*g}else c=Math.max(n,f,c),g=Math.sqrt(2*c-e+1),n>=c?(q[0]=.5*g,q[1]=.5*(a+p)/g,q[2]=.5*(l+h)/g,q[3]=.5*(d-k)/g):f>=c?(q[0]=.5*(p+a)/g,q[1]=.5*g,q[2]=.5*(k+d)/g,q[3]=.5*(l-h)/g):(q[0]=.5*(h+l)/g,q[1]=.5*(d+k)/g,q[2]=.5*g,q[3]=.5*(p-a)/g);return q}},{}],475:[function(b,y,F){function q(c,e,g){return Math.sqrt(Math.pow(c,2)+Math.pow(e,2)+Math.pow(g,2))}function n(c,e,g,m){return Math.sqrt(Math.pow(c,2)+Math.pow(e,2)+Math.pow(g,2)+Math.pow(m,2))}function p(c,e){var g=e[0],m=e[1],
r=e[2];e=e[3];var u=n(g,m,r,e);1E-6<u?(c[0]=g/u,c[1]=m/u,c[2]=r/u,c[3]=e/u):(c[0]=c[1]=c[2]=0,c[3]=1)}function h(c,e,g){this.radius=a([g]);this.center=a(e);this.rotation=a(c);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}y.exports=function(c){c=c||{};var e=c.center||[0,0,0],g=c.rotation||[0,0,
0,1],m=c.radius||1;e=[].slice.call(e,0,3);g=[].slice.call(g,0,4);p(g,g);e=new h(g,e,Math.log(m));e.setDistanceLimits(c.zoomMin,c.zoomMax);("eye"in c||"up"in c)&&e.lookAt(0,c.eye,c.center,c.up);return e};var a=b("filtered-vector"),f=b("gl-mat4/lookAt"),d=b("gl-mat4/fromQuat"),l=b("gl-mat4/invert"),k=b("./lib/quatFromFrame");b=h.prototype;b.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};b.recalcMatrix=function(c){this.radius.curve(c);this.center.curve(c);
this.rotation.curve(c);var e=this.computedRotation;p(e,e);c=this.computedMatrix;d(c,e);var g=this.computedCenter;e=this.computedEye;var m=this.computedUp,r=Math.exp(this.computedRadius[0]);e[0]=g[0]+r*c[2];e[1]=g[1]+r*c[6];e[2]=g[2]+r*c[10];m[0]=c[1];m[1]=c[5];m[2]=c[9];for(g=0;3>g;++g){for(r=m=0;3>r;++r)m+=c[g+4*r]*e[r];c[12+g]=-m}};b.getMatrix=function(c,e){this.recalcMatrix(c);c=this.computedMatrix;if(e){for(var g=0;16>g;++g)e[g]=c[g];return e}return c};b.idle=function(c){this.center.idle(c);this.radius.idle(c);
this.rotation.idle(c)};b.flush=function(c){this.center.flush(c);this.radius.flush(c);this.rotation.flush(c)};b.pan=function(c,e,g,m){e=e||0;g=g||0;m=m||0;this.recalcMatrix(c);var r=this.computedMatrix,u=r[1],v=r[5],w=r[9],D=q(u,v,w);u/=D;v/=D;w/=D;D=r[0];var C=r[4],x=r[8],A=D*u+C*v+x*w;D-=u*A;C-=v*A;x-=w*A;A=q(D,C,x);D/=A;C/=A;x/=A;A=r[2];var B=r[6];r=r[10];var t=A*u+B*v+r*w,G=A*D+B*C+r*x;q(A-(t*u+G*D),B-(t*v+G*C),r-(t*w+G*x));this.center.move(c,D*e+u*g,C*e+v*g,x*e+w*g);e=Math.exp(this.computedRadius[0]);
e=Math.max(1E-4,e+m);this.radius.set(c,Math.log(e))};b.rotate=function(c,e,g,m){this.recalcMatrix(c);e=e||0;g=g||0;var r=this.computedMatrix,u=r[2],v=r[6],w=r[10],D=e*r[0]+g*r[1],C=e*r[4]+g*r[5];r=e*r[8]+g*r[9];g=-(v*r-w*C);r=-(w*D-u*r);D=-(u*C-v*D);C=Math.sqrt(Math.max(0,1-Math.pow(g,2)-Math.pow(r,2)-Math.pow(D,2)));var x=n(g,r,D,C);1E-6<x?(g/=x,r/=x,D/=x,C/=x):(g=r=D=0,C=1);x=this.computedRotation;var A=x[0],B=x[1],t=x[2],G=x[3];x=A*C+G*g+B*D-t*r;var H=B*C+G*r+t*g-A*D,I=t*C+G*D+A*r-B*g;A=G*C-A*
g-B*r-t*D;m&&(g=u,r=v,D=w,m=Math.sin(m)/q(g,r,D),g*=m,r*=m,D*=m,C=Math.cos(e),x=x*C+A*g+H*D-I*r,H=H*C+A*r+I*g-x*D,I=I*C+A*D+x*r-H*g,A=A*C-x*g-H*r-I*D);e=n(x,H,I,A);1E-6<e?(x/=e,H/=e,I/=e,A/=e):(x=H=I=0,A=1);this.rotation.set(c,x,H,I,A)};b.lookAt=function(c,e,g,m){this.recalcMatrix(c);g=g||this.computedCenter;e=e||this.computedEye;m=m||this.computedUp;var r=this.computedMatrix;f(r,e,g,m);m=this.computedRotation;k(m,r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10]);p(m,m);this.rotation.set(c,m[0],m[1],
m[2],m[3]);for(m=r=0;3>m;++m)r+=Math.pow(g[m]-e[m],2);this.radius.set(c,.5*Math.log(Math.max(r,1E-6)));this.center.set(c,g[0],g[1],g[2])};b.translate=function(c,e,g,m){this.center.move(c,e||0,g||0,m||0)};b.setMatrix=function(c,e){var g=this.computedRotation;k(g,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]);p(g,g);this.rotation.set(c,g[0],g[1],g[2],g[3]);g=this.computedMatrix;l(g,e);var m=g[15];if(1E-6<Math.abs(m)){e=g[12]/m;var r=g[13]/m;m=g[14]/m;this.recalcMatrix(c);var u=Math.exp(this.computedRadius[0]);
this.center.set(c,e-g[2]*u,r-g[6]*u,m-g[10]*u)}else this.center.idle(c);this.radius.idle(c)};b.setDistance=function(c,e){0<e&&this.radius.set(c,Math.log(e))};b.setDistanceLimits=function(c,e){c=0<c?Math.log(c):-Infinity;e=0<e?Math.log(e):Infinity;e=Math.max(e,c);this.radius.bounds[0][0]=c;this.radius.bounds[1][0]=e};b.getDistanceLimits=function(c){var e=this.radius.bounds;return c?(c[0]=Math.exp(e[0][0]),c[1]=Math.exp(e[1][0]),c):[Math.exp(e[0][0]),Math.exp(e[1][0])]};b.toJSON=function(){this.recalcMatrix(this.lastT());
return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};b.fromJSON=function(c){var e=this.lastT(),g=c.center;g&&this.center.set(e,g[0],g[1],g[2]);(g=c.rotation)&&this.rotation.set(e,g[0],g[1],g[2],g[3]);(g=c.distance)&&0<g&&this.radius.set(e,Math.log(g));this.setDistanceLimits(c.zoomMin,c.zoomMax)}},{"./lib/quatFromFrame":474,"filtered-vector":242,"gl-mat4/fromQuat":275,
"gl-mat4/invert":278,"gl-mat4/lookAt":279}],476:[function(b,y,F){var q=b("repeat-string");y.exports=function(n,p,h){return q("undefined"!==typeof h?h+"":" ",p)+n}},{"repeat-string":513}],477:[function(b,y,F){function q(h,a){function f(c,e,g){g=[];for(var m,r=0;m=k.exec(c);){if(1E4<r++)throw Error("Circular references in parenthesis");g.push(c.slice(0,m.index));g.push(f(e[m[1]],e));c=c.slice(m.index+m[0].length)}g.push(c);return g}if("string"!==typeof h)return[h];var d=[h];"string"===typeof a||Array.isArray(a)?
a={brackets:a}:a||(a={});h=a.brackets?Array.isArray(a.brackets)?a.brackets:[a.brackets]:["{}","[]","()"];var l=a.escape||"___";a=!!a.flat;h.forEach(function(c){function e(r,u,v){r=d.push(r.slice(c[0].length,-c[1].length))-1;m.push(r);return l+r+l}var g=new RegExp(["\\",c[0],"[^\\",c[0],"\\",c[1],"]*\\",c[1]].join("")),m=[];d.forEach(function(r,u){for(var v,w=0;r!=v;)if(v=r,r=r.replace(g,e),1E4<w++)throw Error("References have circular dependency. Please, check them.");d[u]=r});m=m.reverse();d=d.map(function(r){m.forEach(function(u){r=
r.replace(new RegExp("(\\"+l+u+"\\"+l+")","g"),c[0]+"$1"+c[1])});return r})});var k=new RegExp("\\"+l+"([0-9]+)\\"+l);return a?d:f(d[0],d)}function n(h,a){function f(c,e){if(null==h[e])throw Error("Reference "+e+"is undefined");return h[e]}if(a&&a.flat){var d=a&&a.escape||"___";a=h[0];if(!a)return"";d=new RegExp("\\"+d+"([0-9]+)\\"+d);for(var l=0;a!=k;){if(1E4<l++)throw Error("Circular references in "+h);var k=a;a=a.replace(d,f)}return a}return h.reduce(function m(e,g){Array.isArray(g)&&(g=g.reduce(m,
""));return e+g},"")}function p(h,a){return Array.isArray(h)?n(h,a):q(h,a)}p.parse=q;p.stringify=n;y.exports=p},{}],478:[function(b,y,F){var q=b("pick-by-alias");y.exports=function(n){1<arguments.length&&(n=arguments);"string"===typeof n?n=n.split(/\s/).map(parseFloat):"number"===typeof n&&(n=[n]);if(n.length&&"number"===typeof n[0])var p=1===n.length?{width:n[0],height:n[0],x:0,y:0}:2===n.length?{width:n[0],height:n[1],x:0,y:0}:{x:n[0],y:n[1],width:n[2]-n[0]||0,height:n[3]-n[1]||0};else n&&(n=q(n,
{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),p={x:n.left||0,y:n.top||0},p.width=null==n.width?n.right?n.right-p.x:0:n.width,p.height=null==n.height?n.bottom?n.bottom-p.y:0:n.height);return p}},{"pick-by-alias":485}],479:[function(b,y,F){y.exports=function(h){var a=[];h.replace(n,function(f,d,l){f=d.toLowerCase();l=(l=l.match(p))?l.map(Number):[];"m"==f&&2<l.length&&(a.push([d].concat(l.splice(0,2))),f="l",
d="m"==d?"l":"L");for(;;){if(l.length==q[f])return l.unshift(d),a.push(l);if(l.length<q[f])throw Error("malformed path data");a.push([d].concat(l.splice(0,q[f])))}});return a};var q={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/ig,p=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],480:[function(b,y,F){y.exports=function(q,n){n||(n=[0,""]);q=String(q);var p=parseFloat(q,10);n[0]=p;n[1]=q.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return n}},{}],481:[function(b,y,F){(function(q){function n(a,
f){for(var d=0,l=a.length-1;0<=l;l--){var k=a[l];"."===k?a.splice(l,1):".."===k?(a.splice(l,1),d++):d&&(a.splice(l,1),d--)}if(f)for(;d--;d)a.unshift("..");return a}function p(a,f){if(a.filter)return a.filter(f);for(var d=[],l=0;l<a.length;l++)f(a[l],l,a)&&d.push(a[l]);return d}F.resolve=function(){for(var a="",f=!1,d=arguments.length-1;-1<=d&&!f;d--){var l=0<=d?arguments[d]:q.cwd();if("string"!==typeof l)throw new TypeError("Arguments to path.resolve must be strings");l&&(a=l+"/"+a,f="/"===l.charAt(0))}a=
n(p(a.split("/"),function(k){return!!k}),!f).join("/");return(f?"/":"")+a||"."};F.normalize=function(a){var f=F.isAbsolute(a),d="/"===h(a,-1);(a=n(p(a.split("/"),function(l){return!!l}),!f).join("/"))||f||(a=".");a&&d&&(a+="/");return(f?"/":"")+a};F.isAbsolute=function(a){return"/"===a.charAt(0)};F.join=function(){var a=Array.prototype.slice.call(arguments,0);return F.normalize(p(a,function(f,d){if("string"!==typeof f)throw new TypeError("Arguments to path.join must be strings");return f}).join("/"))};
F.relative=function(a,f){function d(e){for(var g=0;g<e.length&&""===e[g];g++);for(var m=e.length-1;0<=m&&""===e[m];m--);return g>m?[]:e.slice(g,m-g+1)}a=F.resolve(a).substr(1);f=F.resolve(f).substr(1);a=d(a.split("/"));f=d(f.split("/"));for(var l=Math.min(a.length,f.length),k=l,c=0;c<l;c++)if(a[c]!==f[c]){k=c;break}l=[];for(c=k;c<a.length;c++)l.push("..");l=l.concat(f.slice(k));return l.join("/")};F.sep="/";F.delimiter=":";F.dirname=function(a){"string"!==typeof a&&(a+="");if(0===a.length)return".";
for(var f=a.charCodeAt(0),d=47===f,l=-1,k=!0,c=a.length-1;1<=c;--c)if(f=a.charCodeAt(c),47===f){if(!k){l=c;break}}else k=!1;return-1===l?d?"/":".":d&&1===l?"/":a.slice(0,l)};F.basename=function(a,f){"string"!==typeof a&&(a+="");var d=0,l=-1,k=!0,c;for(c=a.length-1;0<=c;--c)if(47===a.charCodeAt(c)){if(!k){d=c+1;break}}else-1===l&&(k=!1,l=c+1);a=-1===l?"":a.slice(d,l);f&&a.substr(-1*f.length)===f&&(a=a.substr(0,a.length-f.length));return a};F.extname=function(a){"string"!==typeof a&&(a+="");for(var f=
-1,d=0,l=-1,k=!0,c=0,e=a.length-1;0<=e;--e){var g=a.charCodeAt(e);if(47===g){if(!k){d=e+1;break}}else-1===l&&(k=!1,l=e+1),46===g?-1===f?f=e:1!==c&&(c=1):-1!==f&&(c=-1)}return-1===f||-1===l||0===c||1===c&&f===l-1&&f===d+1?"":a.slice(f,l)};var h="b"==="ab".substr(-1)?function(a,f,d){return a.substr(f,d)}:function(a,f,d){0>f&&(f=a.length+f);return a.substr(f,d)}}).call(this,b("_process"))},{_process:500}],482:[function(b,y,F){(function(q){(function(){if("undefined"!==typeof performance&&null!==performance&&
performance.now)y.exports=function(){return performance.now()};else if("undefined"!==typeof q&&null!==q&&q.hrtime){y.exports=function(){return(p()-f)/1E6};var n=q.hrtime;var p=function(){var l=n();return 1E9*l[0]+l[1]};var h=p();var a=1E9*q.uptime();var f=h-a}else if(Date.now){y.exports=function(){return Date.now()-d};var d=Date.now()}else y.exports=function(){return(new Date).getTime()-d},d=(new Date).getTime()}).call(this)}).call(this,b("_process"))},{_process:500}],483:[function(b,y,F){y.exports=
function(p){var h=p.length;if(h<q)for(var a=1,f=0;f<h;++f)for(var d=0;d<f;++d)if(p[f]<p[d])a=-a;else{if(p[f]===p[d])return 0}else{var l=n.mallocUint8(h);for(f=0;f<h;++f)l[f]=0;a=1;for(f=0;f<h;++f)if(!l[f]){var k=1;l[f]=1;for(d=p[f];d!==f;d=p[d]){if(l[d])return n.freeUint8(l),0;k+=1;l[d]=1}k&1||(a=-a)}n.freeUint8(l)}return a};var q=32,n=b("typedarray-pool")},{"typedarray-pool":567}],484:[function(b,y,F){var q=b("typedarray-pool"),n=b("invert-permutation");F.rank=function(p){var h=p.length;switch(h){case 0:case 1:return 0;
case 2:return p[1]}var a=q.mallocUint32(h),f=q.mallocUint32(h),d=0,l;n(p,f);for(l=0;l<h;++l)a[l]=p[l];for(l=h-1;0<l;--l)h=f[l],p=a[l],a[l]=a[h],a[h]=p,f[l]=f[p],f[p]=h,d=(d+p)*l;q.freeUint32(f);q.freeUint32(a);return d};F.unrank=function(p,h,a){switch(p){case 0:return a?a:[];case 1:return a?(a[0]=0,a):[0];case 2:return a?(h?(a[0]=0,a[1]=1):(a[0]=1,a[1]=0),a):h?[0,1]:[1,0]}a=a||Array(p);var f,d=1;a[0]=0;for(f=1;f<p;++f)a[f]=f,d=d*f|0;for(f=p-1;0<f;--f){p=h/d|0;h=h-p*d|0;d=d/f|0;var l=a[f]|0;a[f]=a[p]|
0;a[p]=l|0}return a}},{"invert-permutation":436,"typedarray-pool":567}],485:[function(b,y,F){function q(p){if(n[p])return n[p];"string"===typeof p&&(p=n[p]=p.split(/\s*,\s*|\s+/));return p}y.exports=function(p,h,a){var f={},d,l;"string"===typeof h&&(h=q(h));if(Array.isArray(h)){var k={};for(l=0;l<h.length;l++)k[h[l]]=!0;h=k}for(d in h)h[d]=q(h[d]);k={};for(d in h){var c=h[d];if(Array.isArray(c))for(l=0;l<c.length;l++){var e=c[l];a&&(k[e]=!0);if(e in p){f[d]=p[e];if(a)for(;l<c.length;l++)k[c[l]]=!0;
break}}else d in p&&(h[d]&&(f[d]=p[d]),a&&(k[d]=!0))}if(a)for(d in p)k[d]||(f[d]=p[d]);return f};var n={}},{}],486:[function(b,y,F){y.exports=function(n,p){function h(m,r){r=k[r][m[r]];r.splice(r.indexOf(m),1)}function a(m,r,u){var v;for(v=0;2>v;++v)if(0<k[v][r].length){var w=k[v][r][0];var D=v;break}v=w[D^1];for(var C=0;2>C;++C)for(var x=k[C][r],A=0;A<x.length;++A){var B=x[A],t=B[C^1];0<q(p[m],p[r],p[v],p[t])&&(w=B,v=t,D=C)}if(u)return v;w&&h(w,D);return v}function f(m,r){var u=k[r][m][0],v=[m];
h(u,r);for(r=u[r^1];;){for(;r!==m;)v.push(r),r=a(v[v.length-2],r,!1);if(0===k[0][m].length+k[1][m].length)break;r=v[v.length-1];u=m;var w=v[1],D=a(r,u,!0);if(0>q(p[r],p[u],p[w],p[D]))break;v.push(m);r=a(r,u)}return v}for(var d=p.length|0,l=n.length,k=[Array(d),Array(d)],c=0;c<d;++c)k[0][c]=[],k[1][c]=[];for(c=0;c<l;++c){var e=n[c];k[0][e[0]].push(e);k[1][e[1]].push(e)}n=[];for(c=0;c<d;++c)0===k[0][c].length+k[1][c].length&&n.push([c]);for(c=0;c<d;++c)for(l=0;2>l;++l){for(e=[];0<k[l][c].length;){var g=
f(c,l);g[1]===g[g.length-1]?e.push.apply(e,g):(0<e.length&&n.push(e),e=g)}0<e.length&&n.push(e)}return n};var q=b("compare-angle")},{"compare-angle":132}],487:[function(b,y,F){y.exports=function(n,p){for(var h=q(n,p.length),a=Array(p.length),f=Array(p.length),d=[],l=0;l<p.length;++l){var k=h[l].length;f[l]=k;a[l]=!0;1>=k&&d.push(l)}for(;0<d.length;)for(k=d.pop(),a[k]=!1,k=h[k],l=0;l<k.length;++l){var c=k[l];0===--f[c]&&d.push(c)}h=Array(p.length);f=[];for(l=0;l<p.length;++l)a[l]?(k=f.length,h[l]=
k,f.push(p[l])):h[l]=-1;p=[];for(l=0;l<n.length;++l)d=n[l],a[d[0]]&&a[d[1]]&&p.push([h[d[0]],h[d[1]]]);return[p,f]};var q=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":178}],488:[function(b,y,F){function q(c,e){for(var g=Array(c),m=0;m<c;++m)g[m]=e;return g}function n(c){for(var e=Array(c),g=0;g<c;++g)e[g]=[];return e}y.exports=function(c,e){function g(L){for(var E=L.length,K=0;K<E;++K)if(!I[L[K]])return!1;return!0}var m=k(c,e);c=m[0];e=m[1];for(var r=e.length,u=p(c,e.length),v=0;v<r;++v)if(1===
u[v].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");c=h(c,e);c=c.filter(function(L){for(var E=L.length,K=[0],N=0;N<E;++N){var O=e[L[N]],Q=e[L[(N+1)%E]],P=f(-O[0],O[1]),T=f(-O[0],Q[1]);O=f(Q[0],O[1]);Q=f(Q[0],Q[1]);K=d(K,d(d(P,T),d(O,Q)))}return 0<K[K.length-1]});m=c.length;var w=Array(m),D=Array(m);for(v=0;v<m;++v){w[v]=v;var C=Array(m);u=c[v].map(function(L){return e[L]});var x=a([u]),A=0,B=0;a:for(;B<m;++B)if(C[B]=0,v!==B){u=c[B];for(var t=u.length,G=0;G<t;++G){var H=x(e[u[G]]);
if(0!==H){0>H&&(C[B]=1,A+=1);continue a}}C[B]=1;A+=1}D[v]=[A,v,C]}D.sort(function(L,E){return E[0]-L[0]});for(v=0;v<m;++v)for(C=D[v],u=C[1],t=C[2],B=0;B<m;++B)t[B]&&(w[B]=u);D=n(m);for(v=0;v<m;++v)D[v].push(w[v]),D[w[v]].push(v);C={};var I=q(r,!1);for(v=0;v<m;++v)for(u=c[v],t=u.length,B=0;B<t;++B)r=u[B],x=u[(B+1)%t],A=Math.min(r,x)+":"+Math.max(r,x),A in C?(A=C[A],D[A].push(v),D[v].push(A),I[r]=I[x]=!0):C[A]=v;B=[];r=q(m,-1);for(v=0;v<m;++v)w[v]!==v||g(c[v])?r[v]=-1:(B.push(v),r[v]=0);for(m=[];0<
B.length;){v=B.pop();w=D[v];l(w,function(L,E){return L-E});t=w.length;C=r[v];if(0===C){u=c[v];var J=[u]}for(v=0;v<t;++v)u=w[v],0<=r[u]||(r[u]=C^1,B.push(u),0===C&&(u=c[u],g(u)||(u.reverse(),J.push(u))));0===C&&m.push(J)}return m};var p=b("edges-to-adjacency-list"),h=b("planar-dual"),a=b("point-in-big-polygon"),f=b("two-product"),d=b("robust-sum"),l=b("uniq"),k=b("./lib/trim-leaves")},{"./lib/trim-leaves":487,"edges-to-adjacency-list":178,"planar-dual":486,"point-in-big-polygon":490,"robust-sum":525,
"two-product":554,uniq:569}],489:[function(b,y,F){arguments[4][243][0].apply(F,arguments)},{dup:243}],490:[function(b,y,F){function q(){return!0}function n(g){return function(m,r){return(m=g[m])?!!m.queryPoint(r,q):!1}}function p(g){for(var m={},r=0;r<g.length;++r){var u=g[r],v=u[0][0],w=u[0][1];u=u[1][1];w=[Math.min(w,u),Math.max(w,u)];v in m?m[v].push(w):m[v]=[w]}g={};v=Object.keys(m);for(r=0;r<v.length;++r)g[v[r]]=c(m[v[r]]);return n(g)}function h(g,m){return function(r){var u=e.le(m,r[0]);if(0>
u)return 1;var v=g[u];if(!v)if(0<u&&m[u]===r[0])v=g[u-1];else return 1;for(u=1;v;){var w=v.key,D=l(r,w[0],w[1]);if(w[0][0]<w[1][0])if(0>D)v=v.left;else if(0<D)u=-1,v=v.right;else return 0;else if(0<D)v=v.left;else if(0>D)u=1,v=v.right;else return 0}return u}}function a(g){return 1}function f(g){return function(m){return g(m[0],m[1])?0:1}}function d(g,m){return function(r){return g(r[0],r[1])?0:m(r)}}y.exports=function(g){for(var m=g.length,r=[],u=[],v=0;v<m;++v)for(var w=g[v],D=w.length,C=D-1,x=0;x<
D;C=x++){C=w[C];var A=w[x];C[0]===A[0]?u.push([C,A]):r.push([C,A])}if(0===r.length)return 0===u.length?a:f(p(u));g=k(r);g=h(g.slabs,g.coordinates);return 0===u.length?g:d(p(u),g)};var l=b("robust-orientation")[3],k=b("slab-decomposition"),c=b("interval-tree-1d"),e=b("binary-search-bounds")},{"binary-search-bounds":489,"interval-tree-1d":434,"robust-orientation":520,"slab-decomposition":537}],491:[function(b,y,F){function q(c,e,g){c=k.segments(c);e=k.segments(e);e=k.combine(c,e);g=g(e);return k.polygon(g)}
var n=b("./lib/build-log");F=b("./lib/epsilon");var p=b("./lib/intersecter"),h=b("./lib/segment-chainer"),a=b("./lib/segment-selector"),f=b("./lib/geojson"),d=!1,l=F();var k={buildLog:function(c){!0===c?d=n():!1===c&&(d=!1);return!1===d?!1:d.list},epsilon:function(c){return l.epsilon(c)},segments:function(c){var e=p(!0,l,d);c.regions.forEach(e.addRegion);return{segments:e.calculate(c.inverted),inverted:c.inverted}},combine:function(c,e){return{combined:p(!1,l,d).calculate(c.segments,c.inverted,e.segments,
e.inverted),inverted1:c.inverted,inverted2:e.inverted}},selectUnion:function(c){return{segments:a.union(c.combined,d),inverted:c.inverted1||c.inverted2}},selectIntersect:function(c){return{segments:a.intersect(c.combined,d),inverted:c.inverted1&&c.inverted2}},selectDifference:function(c){return{segments:a.difference(c.combined,d),inverted:c.inverted1&&!c.inverted2}},selectDifferenceRev:function(c){return{segments:a.differenceRev(c.combined,d),inverted:!c.inverted1&&c.inverted2}},selectXor:function(c){return{segments:a.xor(c.combined,
d),inverted:c.inverted1!==c.inverted2}},polygon:function(c){return{regions:h(c.segments,l,d),inverted:c.inverted}},polygonFromGeoJSON:function(c){return f.toPolygon(k,c)},polygonToGeoJSON:function(c){return f.fromPolygon(k,l,c)},union:function(c,e){return q(c,e,k.selectUnion)},intersect:function(c,e){return q(c,e,k.selectIntersect)},difference:function(c,e){return q(c,e,k.selectDifference)},differenceRev:function(c,e){return q(c,e,k.selectDifferenceRev)},xor:function(c,e){return q(c,e,k.selectXor)}};
"object"===typeof window&&(window.PolyBool=k);y.exports=k},{"./lib/build-log":492,"./lib/epsilon":493,"./lib/geojson":494,"./lib/intersecter":495,"./lib/segment-chainer":497,"./lib/segment-selector":498}],492:[function(b,y,F){y.exports=function(){function q(a,f){n.list.push({type:a,data:f?JSON.parse(JSON.stringify(f)):void 0});return n}var n,p=0,h=!1;return n={list:[],segmentId:function(){return p++},checkIntersection:function(a,f){return q("check",{seg1:a,seg2:f})},segmentChop:function(a,f){q("div_seg",
{seg:a,pt:f});return q("chop",{seg:a,pt:f})},statusRemove:function(a){return q("pop_seg",{seg:a})},segmentUpdate:function(a){return q("seg_update",{seg:a})},segmentNew:function(a,f){return q("new_seg",{seg:a,primary:f})},segmentRemove:function(a){return q("rem_seg",{seg:a})},tempStatus:function(a,f,d){return q("temp_status",{seg:a,above:f,below:d})},rewind:function(a){return q("rewind",{seg:a})},status:function(a,f,d){return q("status",{seg:a,above:f,below:d})},vert:function(a){if(a===h)return n;
h=a;return q("vert",{x:a})},log:function(a){"string"!==typeof a&&(a=JSON.stringify(a,!1,"  "));return q("log",{txt:a})},reset:function(){return q("reset")},selected:function(a){return q("selected",{segs:a})},chainStart:function(a){return q("chain_start",{seg:a})},chainRemoveHead:function(a,f){return q("chain_rem_head",{index:a,pt:f})},chainRemoveTail:function(a,f){return q("chain_rem_tail",{index:a,pt:f})},chainNew:function(a,f){return q("chain_new",{pt1:a,pt2:f})},chainMatch:function(a){return q("chain_match",
{index:a})},chainClose:function(a){return q("chain_close",{index:a})},chainAddHead:function(a,f){return q("chain_add_head",{index:a,pt:f})},chainAddTail:function(a,f){return q("chain_add_tail",{index:a,pt:f})},chainConnect:function(a,f){return q("chain_con",{index1:a,index2:f})},chainReverse:function(a){return q("chain_rev",{index:a})},chainJoin:function(a,f){return q("chain_join",{index1:a,index2:f})},done:function(){return q("done")}}}},{}],493:[function(b,y,F){y.exports=function(q){"number"!==
typeof q&&(q=1E-10);var n={epsilon:function(p){"number"===typeof p&&(q=p);return q},pointAboveOrOnLine:function(p,h,a){var f=h[0];h=h[1];return(a[0]-f)*(p[1]-h)-(a[1]-h)*(p[0]-f)>=-q},pointBetween:function(p,h,a){var f=a[0]-h[0];a=a[1]-h[1];p=(p[0]-h[0])*f+(p[1]-h[1])*a;return p<q||p-(f*f+a*a)>-q?!1:!0},pointsSameX:function(p,h){return Math.abs(p[0]-h[0])<q},pointsSameY:function(p,h){return Math.abs(p[1]-h[1])<q},pointsSame:function(p,h){return n.pointsSameX(p,h)&&n.pointsSameY(p,h)},pointsCompare:function(p,
h){return n.pointsSameX(p,h)?n.pointsSameY(p,h)?0:p[1]<h[1]?-1:1:p[0]<h[0]?-1:1},pointsCollinear:function(p,h,a){return Math.abs((p[0]-h[0])*(h[1]-a[1])-(h[0]-a[0])*(p[1]-h[1]))<q},linesIntersect:function(p,h,a,f){var d=h[0]-p[0];h=h[1]-p[1];var l=f[0]-a[0],k=f[1]-a[1];f=d*k-h*l;if(Math.abs(f)<q)return!1;var c=p[0]-a[0];a=p[1]-a[1];l=(l*a-k*c)/f;a=(d*a-h*c)/f;p={alongA:0,alongB:0,pt:[p[0]+l*d,p[1]+l*h]};p.alongA=l<=-q?-2:l<q?-1:l-1<=-q?0:l-1<q?1:2;p.alongB=a<=-q?-2:a<q?-1:a-1<=-q?0:a-1<q?1:2;return p},
pointInsideRegion:function(p,h){var a=p[0];p=p[1];for(var f=h[h.length-1][0],d=h[h.length-1][1],l=!1,k=0;k<h.length;k++){var c=h[k][0],e=h[k][1];e-p>q!=d-p>q&&(f-c)*(p-e)/(d-e)+c-a>q&&(l=!l);f=c;d=e}return l}};return n}},{}],494:[function(b,y,F){y.exports={toPolygon:function(q,n){function p(f){function d(c){c=c.slice(0,c.length-1);return q.segments({inverted:!1,regions:[c]})}if(0>=f.length)return q.segments({inverted:!1,regions:[]});for(var l=d(f[0]),k=1;k<f.length;k++)l=q.selectDifference(q.combine(l,
d(f[k])));return l}if("Polygon"===n.type)return q.polygon(p(n.coordinates));if("MultiPolygon"===n.type){for(var h=q.segments({inverted:!1,regions:[]}),a=0;a<n.coordinates.length;a++)h=q.selectUnion(q.combine(h,p(n.coordinates[a])));return q.polygon(h)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");},fromPolygon:function(q,n,p){function h(e,g){return n.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],g)}function a(e,g){for(var m=0;m<e.children.length;m++){var r=
e.children[m];if(h(g,r.region)){a(r,g);return}}var u={region:g,children:[]};for(m=0;m<e.children.length;m++)r=e.children[m],h(r.region,g)&&(u.children.push(r),e.children.splice(m,1),m--);e.children.push(u)}function f(e,g){for(var m=0,r=e[e.length-1][0],u=e[e.length-1][1],v=[],w=0;w<e.length;w++){var D=e[w][0],C=e[w][1];v.push([D,C]);m+=C*r-D*u;r=D;u=C}0>m!==g&&v.reverse();v.push([v[0][0],v[0][1]]);return v}function d(e){var g=[f(e.region,!1)];c.push(g);for(var m=0;m<e.children.length;m++){var r=g,
u=r.push;var v=e.children[m];for(var w=0;w<v.children.length;w++)d(v.children[w]);v=f(v.region,!0);u.call(r,v)}}p=q.polygon(q.segments(p));q={region:null,children:[]};for(var l=0;l<p.regions.length;l++){var k=p.regions[l];3>k.length||a(q,k)}var c=[];for(l=0;l<q.children.length;l++)d(q.children[l]);return 0>=c.length?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}}},{}],495:[function(b,y,F){var q=b("./linked-list");y.exports=function(n,
p,h){function a(e,g,m){return{id:h?h.segmentId():-1,start:e,end:g,myFill:{above:m.myFill.above,below:m.myFill.below},otherFill:null}}function f(e,g){c.insertBefore(e,function(m){var r=e.isStart;var u=m.isStart,v=m.pt;m=m.other.pt;var w=p.pointsCompare(e.pt,v);r=0!==w?w:p.pointsSame(g,m)?0:r!==u?r?1:-1:p.pointAboveOrOnLine(g,u?v:m,u?m:v)?1:-1;return 0>r})}function d(e,g){var m=q.node({isStart:!0,pt:e.start,seg:e,primary:g,other:null,status:null});f(m,e.end);e=q.node({isStart:!1,pt:e.end,seg:e,primary:g,
other:m,status:null});m.other=e;f(e,m.pt);return m}function l(e,g){var m=a(g,e.seg.end,e.seg);h&&h.segmentChop(e.seg,g);e.other.remove();e.seg.end=g;e.other.pt=g;f(e.other,e.pt);return d(m,e.primary)}function k(e,g){function m(t){return u.findTransition(function(G){var H=G.ev;G=t.seg.start;var I=t.seg.end,J=H.seg.start;H=H.seg.end;G=p.pointsCollinear(G,J,H)?p.pointsCollinear(I,J,H)?1:p.pointAboveOrOnLine(I,J,H)?1:-1:p.pointAboveOrOnLine(G,J,H)?1:-1;return 0<G})}function r(t,G){var H=t.seg,I=G.seg,
J=H.start,L=H.end,E=I.start,K=I.end;h&&h.checkIntersection(H,I);H=p.linesIntersect(J,L,E,K);if(!1===H){if(!p.pointsCollinear(J,L,E)||p.pointsSame(J,K)||p.pointsSame(L,E))return!1;H=p.pointsSame(J,E);I=p.pointsSame(L,K);if(H&&I)return G;var N=!H&&p.pointBetween(J,E,K);E=!I&&p.pointBetween(L,E,K);if(H)return E?l(G,L):l(t,K),G;N&&(I||(E?l(G,L):l(t,K)),l(G,J))}else 0===H.alongA&&(-1===H.alongB?l(t,E):0===H.alongB?l(t,H.pt):1===H.alongB&&l(t,K)),0===H.alongB&&(-1===H.alongA?l(G,J):0===H.alongA?l(G,H.pt):
1===H.alongA&&l(G,L));return!1}for(var u=q.create(),v=[];!c.isEmpty();){var w=c.getHead();h&&h.vert(w.pt[0]);if(w.isStart){h&&h.segmentNew(w.seg,w.primary);var D=m(w),C=D.before?D.before.ev:null,x=D.after?D.after.ev:null;h&&h.tempStatus(w.seg,C?C.seg:!1,x?x.seg:!1);var A=function(){if(C){var t=r(w,C);if(t)return t}return x?r(w,x):!1}();if(A){if(n){var B;if(B=null===w.seg.myFill.below?!0:w.seg.myFill.above!==w.seg.myFill.below)A.seg.myFill.above=!A.seg.myFill.above}else A.seg.otherFill=w.seg.myFill;
h&&h.segmentUpdate(A.seg);w.other.remove();w.remove()}if(c.getHead()!==w){h&&h.rewind(w.seg);continue}n?(B=null===w.seg.myFill.below?!0:w.seg.myFill.above!==w.seg.myFill.below,w.seg.myFill.below=x?x.seg.myFill.above:e,w.seg.myFill.above=B?!w.seg.myFill.below:w.seg.myFill.below):null===w.seg.otherFill&&(A=x?w.primary===x.primary?x.seg.otherFill.above:x.seg.myFill.above:w.primary?g:e,w.seg.otherFill={above:A,below:A});h&&h.status(w.seg,C?C.seg:!1,x?x.seg:!1);w.other.status=D.insert(q.node({ev:w}))}else{D=
w.status;if(null===D)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");u.exists(D.prev)&&u.exists(D.next)&&r(D.prev.ev,D.next.ev);h&&h.statusRemove(D.ev.seg);D.remove();w.primary||(D=w.seg.myFill,w.seg.myFill=w.seg.otherFill,w.seg.otherFill=D);v.push(w.seg)}c.getHead().remove()}h&&h.done();return v}var c=q.create();return n?{addRegion:function(e){for(var g,m=e[e.length-1],r=0;r<e.length;r++){g=m;m=e[r];var u=p.pointsCompare(g,m);if(0!==u){var v=
0>u?g:m;g=0>u?m:g;v={id:h?h.segmentId():-1,start:v,end:g,myFill:{above:null,below:null},otherFill:null};d(v,!0)}}},calculate:function(e){return k(e,!1)}}:{calculate:function(e,g,m,r){e.forEach(function(u){d(a(u.start,u.end,u),!0)});m.forEach(function(u){d(a(u.start,u.end,u),!1)});return k(g,r)}}}},{"./linked-list":496}],496:[function(b,y,F){y.exports={create:function(){var q={root:{root:!0,next:null},exists:function(n){return null===n||n===q.root?!1:!0},isEmpty:function(){return null===q.root.next},
getHead:function(){return q.root.next},insertBefore:function(n,p){for(var h=q.root,a=q.root.next;null!==a;){if(p(a)){n.prev=a.prev;n.next=a;a.prev.next=n;a.prev=n;return}h=a;a=a.next}h.next=n;n.prev=h;n.next=null},findTransition:function(n){for(var p=q.root,h=q.root.next;null!==h&&!n(h);)p=h,h=h.next;return{before:p===q.root?null:p,after:h,insert:function(a){a.prev=p;a.next=h;p.next=a;null!==h&&(h.prev=a);return a}}}};return q},node:function(q){q.prev=null;q.next=null;q.remove=function(){if(q.prev.next=
q.next)q.next.prev=q.prev;q.prev=null;q.next=null};return q}}},{}],497:[function(b,y,F){y.exports=function(q,n,p){var h=[],a=[];q.forEach(function(f){function d(x,A,B){r.index=x;r.matches_head=A;r.matches_pt1=B;if(r===g)return r=m,!1;r=null;return!0}function l(x){p&&p.chainReverse(x);h[x].reverse()}function k(x,A){var B=h[x],t=h[A],G=B[B.length-1],H=B[B.length-2],I=t[0],J=t[1];n.pointsCollinear(H,G,I)&&(p&&p.chainRemoveTail(x,G),B.pop(),G=H);n.pointsCollinear(G,I,J)&&(p&&p.chainRemoveHead(A,I),t.shift());
p&&p.chainJoin(x,A);h[x]=B.concat(t);h.splice(A,1)}var c=f.start,e=f.end;if(n.pointsSame(c,e))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{p&&p.chainStart(f);for(var g={index:0,matches_head:!1,matches_pt1:!1},m={index:0,matches_head:!1,matches_pt1:!1},r=g,u=0;u<h.length;u++){f=h[u];var v=f[0];f=f[f.length-1];if(n.pointsSame(v,c)){if(d(u,!0,!0))break}else if(n.pointsSame(v,e)){if(d(u,!0,!1))break}else if(n.pointsSame(f,c)){if(d(u,
!1,!0))break}else if(n.pointsSame(f,e)&&d(u,!1,!1))break}if(r===g)h.push([c,e]),p&&p.chainNew(c,e);else if(r===m){p&&p.chainMatch(g.index);u=g.index;c=g.matches_pt1?e:c;e=g.matches_head;f=h[u];v=e?f[0]:f[f.length-1];var w=e?f[1]:f[f.length-2],D=e?f[f.length-1]:f[0],C=e?f[f.length-2]:f[1];n.pointsCollinear(w,v,c)&&(e?(p&&p.chainRemoveHead(g.index,c),f.shift()):(p&&p.chainRemoveTail(g.index,c),f.pop()),v=w);n.pointsSame(D,c)?(h.splice(u,1),n.pointsCollinear(C,D,v)&&(e?(p&&p.chainRemoveTail(g.index,
v),f.pop()):(p&&p.chainRemoveHead(g.index,v),f.shift())),p&&p.chainClose(g.index),a.push(f)):e?(p&&p.chainAddHead(g.index,c),f.unshift(c)):(p&&p.chainAddTail(g.index,c),f.push(c))}else f=g.index,u=m.index,p&&p.chainConnect(f,u),c=h[f].length<h[u].length,g.matches_head?m.matches_head?c?(l(f),k(f,u)):(l(u),k(u,f)):k(u,f):m.matches_head?k(f,u):c?(l(f),k(u,f)):(l(u),k(f,u))}});return a}},{}],498:[function(b,y,F){function q(n,p,h){var a=[];n.forEach(function(f){var d=(f.myFill.above?8:0)+(f.myFill.below?
4:0)+(f.otherFill&&f.otherFill.above?2:0)+(f.otherFill&&f.otherFill.below?1:0);0!==p[d]&&a.push({id:h?h.segmentId():-1,start:f.start,end:f.end,myFill:{above:1===p[d],below:2===p[d]},otherFill:null})});h&&h.selected(a);return a}y.exports={union:function(n,p){return q(n,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],p)},intersect:function(n,p){return q(n,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],p)},difference:function(n,p){return q(n,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],p)},differenceRev:function(n,p){return q(n,[0,2,1,0,
0,0,1,1,0,2,0,2,0,0,0,0],p)},xor:function(n,p){return q(n,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],p)}}},{}],499:[function(b,y,F){var q=new Float64Array(4),n=new Float64Array(4),p=new Float64Array(4);y.exports=function(h,a,f,d,l){q.length<d.length&&(q=new Float64Array(d.length),n=new Float64Array(d.length),p=new Float64Array(d.length));for(var k=0;k<d.length;++k)q[k]=h[k]-d[k],n[k]=a[k]-h[k],p[k]=f[k]-h[k];var c=0,e=0,g=0,m=0,r=0,u=0;for(k=0;k<d.length;++k){var v=n[k],w=p[k],D=q[k];c+=v*v;e+=v*w;g+=w*w;
m+=D*v;r+=D*w;u+=D*D}k=Math.abs(c*g-e*e);v=e*r-g*m;w=e*m-c*r;v+w<=k?0>v?0>w?0>m?(w=0,-m>=c?(v=1,c=c+2*m+u):(v=-m/c,c=m*v+u)):(v=0,0<=r?(w=0,c=u):-r>=g?(w=1,c=g+2*r+u):(w=-r/g,c=r*w+u)):(v=0,0<=r?(w=0,c=u):-r>=g?(w=1,c=g+2*r+u):(w=-r/g,c=r*w+u)):0>w?(w=0,0<=m?(v=0,c=u):-m>=c?(v=1,c=c+2*m+u):(v=-m/c,c=m*v+u)):(k=1/k,v*=k,w*=k,c=v*(c*v+e*w+2*m)+w*(e*v+g*w+2*r)+u):0>v?(v=e+m,k=g+r,k>v?(k-=v,v=c-2*e+g,k>=v?(v=1,w=0,c=c+2*m+u):(v=k/v,w=1-v,c=v*(c*v+e*w+2*m)+w*(e*v+g*w+2*r)+u)):(v=0,0>=k?(w=1,c=g+2*r+u):
0<=r?(w=0,c=u):(w=-r/g,c=r*w+u))):0>w?(v=e+r,k=c+m,k>v?(k-=v,v=c-2*e+g,k>=v?(w=1,v=0,c=g+2*r+u):(w=k/v,v=1-w,c=v*(c*v+e*w+2*m)+w*(e*v+g*w+2*r)+u)):(w=0,0>=k?(v=1,c=c+2*m+u):0<=m?(v=0,c=u):(v=-m/c,c=m*v+u))):(k=g+r-e-m,0>=k?(v=0,w=1,c=g+2*r+u):(v=c-2*e+g,k>=v?(v=1,w=0,c=c+2*m+u):(v=k/v,w=1-v,c=v*(c*v+e*w+2*m)+w*(e*v+g*w+2*r)+u)));e=1-v-w;for(k=0;k<d.length;++k)l[k]=e*h[k]+v*a[k]+w*f[k];return 0>c?0:c}},{}],500:[function(b,y,F){function q(){throw Error("setTimeout has not been defined");}function n(){throw Error("clearTimeout has not been defined");
}function p(u){if(k===setTimeout)return setTimeout(u,0);if((k===q||!k)&&setTimeout)return k=setTimeout,setTimeout(u,0);try{return k(u,0)}catch(v){try{return k.call(null,u,0)}catch(w){return k.call(this,u,0)}}}function h(u){if(c===clearTimeout)return clearTimeout(u);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(u);try{return c(u)}catch(v){try{return c.call(null,u)}catch(w){return c.call(this,u)}}}function a(){g&&m&&(g=!1,m.length?e=m.concat(e):r=-1,e.length&&f())}function f(){if(!g){var u=
p(a);g=!0;for(var v=e.length;v;){m=e;for(e=[];++r<v;)m&&m[r].run();r=-1;v=e.length}m=null;g=!1;h(u)}}function d(u,v){this.fun=u;this.array=v}function l(){}b=y.exports={};try{var k="function"===typeof setTimeout?setTimeout:q}catch(u){k=q}try{var c="function"===typeof clearTimeout?clearTimeout:n}catch(u){c=n}var e=[],g=!1,m,r=-1;b.nextTick=function(u){var v=Array(arguments.length-1);if(1<arguments.length)for(var w=1;w<arguments.length;w++)v[w-1]=arguments[w];e.push(new d(u,v));1!==e.length||g||p(f)};
d.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=l;b.addListener=l;b.once=l;b.off=l;b.removeListener=l;b.removeAllListeners=l;b.emit=l;b.prependListener=l;b.prependOnceListener=l;b.listeners=function(u){return[]};b.binding=function(u){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(u){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},
{}],501:[function(b,y,F){y.exports=b("gl-quat/slerp")},{"gl-quat/slerp":304}],502:[function(b,y,F){(function(q){var n=b("performance-now"),p="undefined"===typeof window?q:window;q=["moz","webkit"];for(var h=p.requestAnimationFrame,a=p.cancelAnimationFrame||p.cancelRequestAnimationFrame,f=0;!h&&f<q.length;f++)h=p[q[f]+"RequestAnimationFrame"],a=p[q[f]+"CancelAnimationFrame"]||p[q[f]+"CancelRequestAnimationFrame"];if(!h||!a){var d=0,l=0,k=[],c=1E3/60;h=function(e){if(0===k.length){var g=n(),m=Math.max(0,
c-(g-d));d=m+g;setTimeout(function(){for(var r=k.slice(0),u=k.length=0;u<r.length;u++)if(!r[u].cancelled)try{r[u].callback(d)}catch(v){setTimeout(function(){throw v;},0)}},Math.round(m))}k.push({handle:++l,callback:e,cancelled:!1});return l};a=function(e){for(var g=0;g<k.length;g++)k[g].handle===e&&(k[g].cancelled=!0)}}y.exports=function(e){return h.call(p,e)};y.exports.cancel=function(){a.apply(p,arguments)};y.exports.polyfill=function(e){e||(e=p);e.requestAnimationFrame=h;e.cancelAnimationFrame=
a}}).call(this,"undefined"!==typeof fb?fb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":482}],503:[function(b,y,F){var q=b("big-rat/add");y.exports=function(n,p){for(var h=n.length,a=Array(h),f=0;f<h;++f)a[f]=q(n[f],p[f]);return a}},{"big-rat/add":80}],504:[function(b,y,F){y.exports=function(n){for(var p=Array(n.length),h=0;h<n.length;++h)p[h]=q(n[h]);return p};var q=b("big-rat")},{"big-rat":83}],505:[function(b,y,F){var q=b("big-rat"),n=b("big-rat/mul");
y.exports=function(p,h){h=q(h);for(var a=p.length,f=Array(a),d=0;d<a;++d)f[d]=n(p[d],h);return f}},{"big-rat":83,"big-rat/mul":92}],506:[function(b,y,F){var q=b("big-rat/sub");y.exports=function(n,p){for(var h=n.length,a=Array(h),f=0;f<h;++f)a[f]=q(n[f],p[f]);return a}},{"big-rat/sub":94}],507:[function(b,y,F){var q=b("compare-cell"),n=b("compare-oriented-cell"),p=b("cell-orientation");y.exports=function(h){h.sort(n);for(var a=h.length,f=0,d=0;d<a;++d){var l=h[d],k=p(l);if(0!==k){if(0<f){var c=h[f-
1];if(0===q(l,c)&&p(c)!==k){--f;continue}}h[f++]=l}}h.length=f;return h}},{"cell-orientation":117,"compare-cell":133,"compare-oriented-cell":134}],508:[function(b,y,F){var q=b("array-bounds"),n=b("color-normalize"),p=b("update-diff"),h=b("pick-by-alias"),a=b("object-assign"),f=b("flatten-vertex-data");b=b("to-float32");var d=b.float32,l=b.fract32;y.exports=function(c,e){function g(I){I?u(I):null===I&&v();m()}function m(I){if("number"===typeof I)return r(I);I&&!Array.isArray(I)&&(I=[I]);c._refresh();
C.forEach(function(J,L){J&&(I&&(J.draw=I[L]?!0:!1),J.draw?r(L):J.draw=!0)})}function r(I){"number"===typeof I&&(I=C[I]);null!=I&&I&&I.count&&I.color&&I.opacity&&I.positions&&1<I.positions.length&&(I.scaleRatio=[I.scale[0]*I.viewport.width,I.scale[1]*I.viewport.height],H(I),I.after&&I.after(I))}function u(I){if(I){null!=I.length?"number"===typeof I[0]&&(I=[{positions:I}]):Array.isArray(I)||(I=[I]);var J=0,L=0;g.groups=C=I.map(function(O,Q){var P=C[Q];if(O)"function"===typeof O?O={after:O}:"number"===
typeof O[0]&&(O={positions:O});else return P;O=h(O,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});P||(C[Q]=P={id:Q,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},O=a({},D,O));p(P,O,[{lineWidth:function(T){return.5*+T},capSize:function(T){return.5*+T},opacity:parseFloat,
errors:function(T){T=f(T);L+=T.length;return T},positions:function(T,V){T=f(T,"float64");V.count=Math.floor(T.length/2);V.bounds=q(T,2);V.offset=J;J+=V.count;return T}},{color:function(T,V){V=V.count;T||(T="transparent");if(!Array.isArray(T)||"number"===typeof T[0]){var aa=T;T=Array(V);for(var ba=0;ba<V;ba++)T[ba]=aa}if(T.length<V)throw Error("Not enough colors");aa=new Uint8Array(4*V);for(ba=0;ba<V;ba++){var Y=n(T[ba],"uint8");aa.set(Y,4*ba)}return aa},range:function(T,V,aa){aa=V.bounds;T||(T=aa);
V.scale=[1/(T[2]-T[0]),1/(T[3]-T[1])];V.translate=[-T[0],-T[1]];V.scaleFract=l(V.scale);V.translateFract=l(V.translate);return T},viewport:function(T){if(Array.isArray(T))var V={x:T[0],y:T[1],width:T[2]-T[0],height:T[3]-T[1]};else T?(V={x:T.x||T.left||0,y:T.y||T.top||0},V.width=T.right?T.right-V.x:T.w||T.width||0,V.height=T.bottom?T.bottom-V.y:T.h||T.height||0):V={x:0,y:0,width:w.drawingBufferWidth,height:w.drawingBufferHeight};return V}}]);return P});if(J||L){I=C.reduce(function(O,Q,P){return O+
(Q?Q.count:0)},0);var E=new Float64Array(2*I),K=new Uint8Array(4*I),N=new Float32Array(4*I);C.forEach(function(O,Q){if(O){Q=O.positions;var P=O.offset,T=O.errors;O.count&&(K.set(O.color,4*P),N.set(T,4*P),E.set(Q,2*P))}});A(d(E));B(l(E));x(K);t(N)}}}function v(){A.destroy();B.destroy();x.destroy();t.destroy();G.destroy()}"function"===typeof c?(e||(e={}),e.regl=c):e=c;e.length&&(e.positions=e);c=e.regl;if(!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");
var w=c._gl,D={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},C=[];var x=c.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});var A=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var B=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var t=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var G=c.buffer({usage:"static",type:"float",data:k});u(e);var H=c({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor \x3d color / 255.;\n\n\t\t\tvec2 pixelOffset \x3d lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy \x3d -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position \x3d position + dxy;\n\n\t\t\tvec2 pos \x3d (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos +\x3d pixelOffset / viewport.zw;\n\n\t\t\tgl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor \x3d fragColor;\n\t\t\tgl_FragColor.a *\x3d opacity;\n\t\t}\n\t\t",uniforms:{range:c.prop("range"),lineWidth:c.prop("lineWidth"),capSize:c.prop("capSize"),opacity:c.prop("opacity"),scale:c.prop("scale"),translate:c.prop("translate"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),viewport:function(I,J){return[J.viewport.x,J.viewport.y,I.viewportWidth,
I.viewportHeight]}},attributes:{color:{buffer:x,offset:function(I,J){return 4*J.offset},divisor:1},position:{buffer:A,offset:function(I,J){return 8*J.offset},divisor:1},positionFract:{buffer:B,offset:function(I,J){return 8*J.offset},divisor:1},error:{buffer:t,offset:function(I,J){return 16*J.offset},divisor:1},direction:{buffer:G,stride:24,offset:0},lineOffset:{buffer:G,stride:24,offset:8},capOffset:{buffer:G,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport"),stencil:!1,instances:c.prop("count"),count:k.length});a(g,{update:u,draw:m,destroy:v,regl:c,gl:w,canvas:w.canvas,groups:C});return g};var k=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":70,"color-normalize":125,"flatten-vertex-data":244,"object-assign":473,"pick-by-alias":485,
"to-float32":549,"update-diff":571}],509:[function(b,y,F){function q(m,r){if(!(this instanceof q))return new q(m,r);"function"===typeof m?(r||(r={}),r.regl=m):r=m;r.length&&(r.positions=r);m=r.regl;if(!m.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=m._gl;this.regl=m;this.passes=[];this.shaders=q.shaders.has(m)?q.shaders.get(m):q.shaders.set(m,q.createShaders(m)).get(m);this.update(r)}var n=b("color-normalize"),p=b("array-bounds"),
h=b("object-assign"),a=b("glslify"),f=b("pick-by-alias"),d=b("flatten-vertex-data"),l=b("earcut"),k=b("array-normalize");F=b("to-float32");var c=F.float32,e=F.fract32;F=b("es6-weak-map");var g=b("parse-rect");y.exports=q;q.dashMult=2;q.maxPatternLength=256;q.precisionThreshold=3E6;q.maxPoints=1E4;q.maxLines=2048;q.shaders=new F;q.createShaders=function(m){var r=m.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),u={primitive:"triangle strip",instances:m.prop("count"),count:4,offset:0,uniforms:{miterMode:function(D,
C){return"round"===C.join?2:1},miterLimit:m.prop("miterLimit"),scale:m.prop("scale"),scaleFract:m.prop("scaleFract"),translateFract:m.prop("translateFract"),translate:m.prop("translate"),thickness:m.prop("thickness"),dashPattern:m.prop("dashTexture"),opacity:m.prop("opacity"),pixelRatio:m.context("pixelRatio"),id:m.prop("id"),dashSize:m.prop("dashLength"),viewport:function(D,C){return[C.viewport.x,C.viewport.y,D.viewportWidth,D.viewportHeight]},depth:m.prop("depth")},blend:{enable:!0,color:[0,0,0,
0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(D,C){return!C.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:m.prop("viewport")},viewport:m.prop("viewport")},v=m(h({vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineOffset \x3d lineTop * 2. - 1.;\n\n\tvec2 diff \x3d (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent \x3d normalize(diff * scale * viewport.zw);\n\tvec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n\tvec2 position \x3d project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha \x3d 1.;\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:r,divisor:0,
stride:8,offset:0},lineTop:{buffer:r,divisor:0,stride:8,offset:4},aCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:m.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},u));try{var w=m(h({cull:{enable:!0,face:"back"},vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD \x3d -.875;\nconst float MIN_DIFF \x3d 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord \x3d aCoord, bCoord \x3d bCoord, prevCoord \x3d prevCoord, nextCoord \x3d nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x \x3d (abs(scale.x) \x3c MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y \x3d (abs(scale.y) \x3c MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio \x3d adjustedScale * viewport.zw;\n\tvec2 normalWidth \x3d thickness / scaleRatio;\n\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineBot \x3d 1. - lineTop;\n\n\tfragColor \x3d (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord \x3d\x3d prevCoord) prevCoord \x3d aCoord + normalize(bCoord - aCoord);\n\tif (bCoord \x3d\x3d nextCoord) nextCoord \x3d bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff \x3d aCoord - prevCoord;\n\tvec2 currDiff \x3d bCoord - aCoord;\n\tvec2 nextDiff \x3d nextCoord - bCoord;\n\n\tvec2 prevTangent \x3d normalize(prevDiff * scaleRatio);\n\tvec2 currTangent \x3d normalize(currDiff * scaleRatio);\n\tvec2 nextTangent \x3d normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal \x3d vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal \x3d vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal \x3d vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection \x3d normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection \x3d normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff \x3d abs(prevTangent - currTangent);\n\tvec2 nextTanDiff \x3d abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) \x3c MIN_DIFF) {\n\t\tstartJoinDirection \x3d currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) \x3c MIN_DIFF) {\n\t\tendJoinDirection \x3d currNormal;\n\t}\n\tif (aCoord \x3d\x3d bCoord) {\n\t\tendJoinDirection \x3d startJoinDirection;\n\t\tcurrNormal \x3d prevNormal;\n\t\tcurrTangent \x3d prevTangent;\n\t}\n\n\ttangent \x3d currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift \x3d dot(currNormal, startJoinDirection);\n\tfloat endJoinShift \x3d dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio \x3d abs(1. / startJoinShift);\n\tfloat endMiterRatio \x3d abs(1. / endJoinShift);\n\n\tvec2 startJoin \x3d startJoinDirection * startMiterRatio;\n\tvec2 endJoin \x3d endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin \x3d sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin \x3d -startTopJoin;\n\n\tendTopJoin \x3d sign(endJoinShift) * endJoin * .5;\n\tendBotJoin \x3d -endTopJoin;\n\n\tvec2 aTopCoord \x3d aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord \x3d bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord \x3d aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord \x3d bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping \x3d distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping \x3d distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse \x3d dot(currTangent, prevTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\tbool nextReverse \x3d dot(currTangent, nextTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord \x3d aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord \x3d aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse \x26\x26 baClipping \x3e 0. \x26\x26 baClipping \x3c length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -\x3d normalWidth * endTopJoin;\n\t\tbTopCoord +\x3d normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord \x3d bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord \x3d bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse \x26\x26 abClipping \x3e 0. \x26\x26 abClipping \x3c length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -\x3d normalWidth * startBotJoin;\n\t\taBotCoord +\x3d normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition \x3d (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition \x3d (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition \x3d (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition \x3d (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position \x3d (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord \x3d aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord \x3d bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position \x3d vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter \x3d step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter \x3d step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha \x3d 1., distToStart, distToEnd;\n\tfloat cutoff \x3d thickness * .5;\n\n\t//bevel miter\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:r,divisor:0,stride:8,offset:0},lineTop:{buffer:r,divisor:0,stride:8,offset:4},aColor:{buffer:m.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:m.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:m.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},u))}catch(D){w=v}return{fill:m({primitive:"triangle",elements:function(D,C){return C.triangles},offset:0,vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES \x3d 256.;\n\nvoid main() {\n\tfloat depth \x3d (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position \x3d position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n\tfragColor.a *\x3d opacity;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor \x3d fragColor;\n}\n"]),uniforms:{scale:m.prop("scale"),color:m.prop("fill"),scaleFract:m.prop("scaleFract"),translateFract:m.prop("translateFract"),translate:m.prop("translate"),opacity:m.prop("opacity"),pixelRatio:m.context("pixelRatio"),id:m.prop("id"),viewport:function(D,C){return[C.viewport.x,C.viewport.y,D.viewportWidth,D.viewportHeight]}},attributes:{position:{buffer:m.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:8}},blend:u.blend,depth:{enable:!1},scissor:u.scissor,stencil:u.stencil,viewport:u.viewport}),rect:v,miter:w}};q.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};q.prototype.render=function(){for(var m=[],r=arguments.length;r--;)m[r]=arguments[r];m.length&&this.update.apply(this,m);this.draw()};q.prototype.draw=
function(){for(var m=this,r=[],u=arguments.length;u--;)r[u]=arguments[u];(r.length?r:this.passes).forEach(function(v,w){if(v&&Array.isArray(v))return m.draw.apply(m,v);"number"===typeof v&&(v=m.passes[v]);v&&1<v.count&&v.opacity&&(m.regl._refresh(),v.fill&&v.triangles&&2<v.triangles.length&&m.shaders.fill(v),v.thickness&&(v.scale[0]*v.viewport.width>q.precisionThreshold||v.scale[1]*v.viewport.height>q.precisionThreshold?m.shaders.rect(v):"rect"===v.join||!v.join&&(2>=v.thickness||v.count>=q.maxPoints)?
m.shaders.rect(v):m.shaders.miter(v)))});return this};q.prototype.update=function(m){var r=this;if(m){null!=m.length?"number"===typeof m[0]&&(m=[{positions:m}]):Array.isArray(m)||(m=[m]);var u=this.regl,v=this.gl;m.forEach(function(C,x){var A=r.passes[x];if(void 0!==C)if(null===C)r.passes[x]=null;else{"number"===typeof C[0]&&(C={positions:C});C=f(C,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"});A||(r.passes[x]=A={id:x,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:u.texture({channels:1,
data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},C=h({},q.defaults,C));null!=C.thickness&&(A.thickness=parseFloat(C.thickness));null!=C.opacity&&(A.opacity=parseFloat(C.opacity));null!=C.miterLimit&&(A.miterLimit=parseFloat(C.miterLimit));null!=C.overlay&&
(A.overlay=!!C.overlay,x<q.maxLines&&(A.depth=2*(q.maxLines-1-x%q.maxLines)/q.maxLines-1));null!=C.join&&(A.join=C.join);null!=C.hole&&(A.hole=C.hole);null!=C.fill&&(A.fill=C.fill?n(C.fill,"uint8"):null);null!=C.viewport&&(A.viewport=g(C.viewport));A.viewport||(A.viewport=g([v.drawingBufferWidth,v.drawingBufferHeight]));null!=C.close&&(A.close=C.close);null===C.positions&&(C.positions=[]);if(C.positions){if(C.positions.x&&C.positions.y){var B=C.positions.x,t=C.positions.y;var G=A.count=Math.max(B.length,
t.length);x=new Float64Array(2*G);for(var H=0;H<G;H++)x[2*H]=B[H],x[2*H+1]=t[H]}else x=d(C.positions,"float64"),G=A.count=Math.floor(x.length/2);B=A.bounds=p(x,2);if(A.fill){H=[];t={};for(var I=0,J=0,L=0,E=A.count;J<E;J++){var K=x[2*J],N=x[2*J+1];isNaN(K)||isNaN(N)||null==K||null==N?(K=x[2*I],N=x[2*I+1],t[J]=I):I=J;H[L++]=K;H[L++]=N}H=l(H,A.hole||[]);I=0;for(J=H.length;I<J;I++)null!=t[H[I]]&&(H[I]=t[H[I]]);A.triangles=H}t=new Float64Array(x);k(t,2,B);B=new Float64Array(2*G+6);A.close?x[0]===x[2*G-
2]&&x[1]===x[2*G-1]?(B[0]=t[2*G-4],B[1]=t[2*G-3]):(B[0]=t[2*G-2],B[1]=t[2*G-1]):(B[0]=t[0],B[1]=t[1]);B.set(t,2);A.close?x[0]===x[2*G-2]&&x[1]===x[2*G-1]?(B[2*G+2]=t[2],B[2*G+3]=t[3],--A.count):(B[2*G+2]=t[0],B[2*G+3]=t[1],B[2*G+4]=t[2],B[2*G+5]=t[3]):(B[2*G+2]=t[2*G-2],B[2*G+3]=t[2*G-1],B[2*G+4]=t[2*G-2],B[2*G+5]=t[2*G-1]);A.positionBuffer(c(B));A.positionFractBuffer(e(B))}C.range?A.range=C.range:A.range||(A.range=A.bounds);(C.range||C.positions)&&A.count&&(x=A.bounds,G=A.range[2]-A.range[0],B=A.range[3]-
A.range[1],A.scale=[(x[2]-x[0])/G,(x[3]-x[1])/B],A.translate=[-A.range[0]/G+x[0]/G||0,-A.range[1]/B+x[1]/B||0],A.scaleFract=e(A.scale),A.translateFract=e(A.translate));if(C.dashes){if(!C.dashes||2>C.dashes.length)x=1,G=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(G=x=0;G<C.dashes.length;++G)x+=C.dashes[G];G=new Uint8Array(x*q.dashMult);B=0;t=255;for(H=0;2>H;H++)for(I=0;I<C.dashes.length;++I){J=0;for(L=C.dashes[I]*q.dashMult*.5;J<L;++J)G[B++]=t;t^=255}}A.dashLength=x;A.dashTexture({channels:1,
data:G,width:G.length,height:1,mag:"linear",min:"linear"},0,0)}if(C.color){x=A.count;(G=C.color)||(G="transparent");C=new Uint8Array(4*x+4);if(Array.isArray(G)&&"number"!==typeof G[0]){for(B=0;B<x;B++)t=n(G[B],"uint8"),C.set(t,4*B);C.set(n(G[0],"uint8"),4*x)}else for(G=n(G,"uint8"),B=0;B<x+1;B++)C.set(G,4*B);A.colorBuffer({usage:"dynamic",type:"uint8",data:C})}}});if(m.length<this.passes.length){for(var w=m.length;w<this.passes.length;w++){var D=this.passes[w];D&&(D.colorBuffer.destroy(),D.positionBuffer.destroy(),
D.dashTexture.destroy())}this.passes.length=m.length}m=[];for(w=0;w<this.passes.length;w++)null!==this.passes[w]&&m.push(this.passes[w]);this.passes=m;return this}};q.prototype.destroy=function(){this.passes.forEach(function(m){m.colorBuffer.destroy();m.positionBuffer.destroy();m.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":70,"array-normalize":71,"color-normalize":125,earcut:177,"es6-weak-map":233,"flatten-vertex-data":244,glslify:413,"object-assign":473,"parse-rect":478,
"pick-by-alias":485,"to-float32":549}],510:[function(b,y,F){function q(w,D){if(w){if("string"===typeof w)return n(w,D);var C=Object.prototype.toString.call(w).slice(8,-1);"Object"===C&&w.constructor&&(C=w.constructor.name);if("Map"===C||"Set"===C)return Array.from(w);if("Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return n(w,D)}}function n(w,D){if(null==D||D>w.length)D=w.length;for(var C=0,x=Array(D);C<D;C++)x[C]=w[C];return x}function p(w,D){var C=this;if(!(this instanceof
p))return new p(w,D);"function"===typeof w?(D||(D={}),D.regl=w):(D=w,w=null);D&&D.length&&(D.positions=D);w=D.regl;var x=w._gl,A=[];this.tooManyColors=m;var B=w.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});l(this,{regl:w,gl:x,groups:[],markerCache:[null],markerTextures:[null],palette:A,paletteIds:{},paletteTexture:B,maxColors:255,maxSize:100,canvas:x.canvas});this.update(D);x={uniforms:{constPointSize:!!D.constPointSize,
pixelRatio:w.context("pixelRatio"),palette:B,paletteSize:function(t,G){return[C.tooManyColors?0:255,B.height]},scale:w.prop("scale"),scaleFract:w.prop("scaleFract"),translate:w.prop("translate"),translateFract:w.prop("translateFract"),opacity:w.prop("opacity"),marker:w.prop("markerTexture")},attributes:{x:function(t,G){return G.xAttr||{buffer:G.positionBuffer,stride:8,offset:0}},y:function(t,G){return G.yAttr||{buffer:G.positionBuffer,stride:8,offset:4}},xFract:function(t,G){return G.xAttr?{constant:[0,
0]}:{buffer:G.positionFractBuffer,stride:8,offset:0}},yFract:function(t,G){return G.yAttr?{constant:[0,0]}:{buffer:G.positionFractBuffer,stride:8,offset:4}},size:function(t,G){return G.size.length?{buffer:G.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*G.size/C.maxSize)]}},borderSize:function(t,G){return G.borderSize.length?{buffer:G.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*G.borderSize/C.maxSize)]}},colorId:function(t,G){return G.color.length?{buffer:G.colorBuffer,stride:C.tooManyColors?
8:4,offset:0}:{constant:C.tooManyColors?A.slice(4*G.color,4*G.color+4):[G.color]}},borderColorId:function(t,G){return G.borderColor.length?{buffer:G.colorBuffer,stride:C.tooManyColors?8:4,offset:C.tooManyColors?4:2}:{constant:C.tooManyColors?A.slice(4*G.borderColor,4*G.borderColor+4):[G.borderColor]}},isActive:function(t,G){return!0===G.activation?{constant:[1]}:G.activation?G.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",
dstAlpha:"one"}},scissor:{enable:!0,box:w.prop("viewport")},viewport:w.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:w.prop("elements"),count:w.prop("count"),offset:w.prop("offset"),primitive:"points"};D=l({},x);D.frag=k(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist \x3d texture2D(marker, gl_PointCoord).r, delta \x3d fragWidth;\n\n  // max-distance alpha\n  if (dist \x3c 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel \x3d\x3d fragColorLevel || fragBorderColor.a \x3d\x3d 0.) {\n    float colorAmt \x3d smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor \x3d vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt \x3d smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt \x3d smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color \x3d fragBorderColor;\n    color.a *\x3d borderColorAmt;\n    color \x3d mix(color, fragColor, colorAmt);\n    color.a *\x3d opacity;\n\n    gl_FragColor \x3d color;\n  }\n\n}\n"]);
D.vert=k(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\n\nconst float maxSize \x3d 100.;\nconst float borderLevel \x3d .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d 2. * size * pointSizeScale;\n  fragPointSize \x3d size * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n\n  fragBorderColorLevel \x3d clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel \x3d clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=w(D);x=l({},x);x.frag=k(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt \x3d clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha \x3d 1.0, delta \x3d fragWidth;\n\n\tradius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius \x3e 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -\x3d smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius \x3d fragBorderRadius;\n\tfloat ratio \x3d smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color \x3d mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *\x3d alpha * opacity;\n\tgl_FragColor \x3d color;\n}\n"]);
x.vert=k(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize \x3d 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d (size + borderSize) * pointSizeScale;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius \x3d 1. - 2. * borderSize / (size + borderSize);\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor.a \x3d\x3d 0. || borderSize \x3d\x3d 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n}\n"]);
m&&(x.frag=x.frag.replace("smoothstep","smoothStep"),D.frag=D.frag.replace("smoothstep","smoothStep"));this.drawCircle=w(x)}var h=b("color-normalize"),a=b("array-bounds"),f=b("color-id"),d=b("@plotly/point-cluster"),l=b("object-assign"),k=b("glslify"),c=b("pick-by-alias"),e=b("update-diff"),g=b("flatten-vertex-data"),m=b("is-iexplorer"),r=b("to-float32"),u=b("parse-rect");p.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};p.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};p.prototype.draw=function(){for(var w=this,D=arguments.length,C=Array(D),x=0;x<D;x++)C[x]=arguments[x];D=this.groups;1===C.length&&Array.isArray(C[0])&&(null===C[0][0]||Array.isArray(C[0][0]))&&(C=C[0]);this.regl._refresh();if(C.length)for(D=0;D<C.length;D++)this.drawItem(D,C[D]);else D.forEach(function(A,B){w.drawItem(B)});return this};p.prototype.drawItem=
function(w,D){var C=this.groups;w=C[w];"number"===typeof D&&(w=C[D],D=null);if(w&&w.count&&w.opacity){w.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,w,D));C=[];for(var x=1;x<w.activation.length;x++)if(w.activation[x]&&(!0===w.activation[x]||w.activation[x].data.length)){var A=C.push,B=A.apply,t=this.getMarkerDrawOptions(x,w,D);var G=t;G=Array.isArray(G)?n(G):void 0;G||(G="undefined"!==typeof Symbol&&Symbol.iterator in Object(t)?Array.from(t):void 0);if(!(t=G||q(t)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
B.call(A,C,t)}C.length&&this.drawMarker(C)}};p.prototype.getMarkerDrawOptions=function(w,D,C){var x=D.range,A=D.tree,B=D.viewport,t=D.activation,G=D.selectionBuffer,H=D.count;if(!A)return C?[l({},D,{markerTexture:this.markerTextures[w],activation:t[w],count:C.length,elements:C,offset:0})]:[l({},D,{markerTexture:this.markerTextures[w],activation:t[w],offset:0})];var I=[];x=A.range(x,{lod:!0,px:[(x[2]-x[0])/B.width,(x[3]-x[1])/B.height]});if(C){A=t[w].data;H=new Uint8Array(H);for(B=0;B<C.length;B++){var J=
C[B];H[J]=A?A[J]:1}G.subdata(H)}for(H=x.length;H--;){A=x[H];B=A;B=Array.isArray(B)?B:void 0;if(!B)if(B=void 0,"undefined"!==typeof Symbol&&Symbol.iterator in Object(A)){J=[];var L=!0,E=!1,K=void 0;try{for(var N=A[Symbol.iterator]();!(L=(B=N.next()).done)&&(J.push(B.value),2!==J.length);L=!0);}catch(O){E=!0,K=O}finally{try{if(!L&&null!=N["return"])N["return"]()}finally{if(E)throw K;}}B=J}else B=void 0;if(!(A=B||q(A,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
B=A[0];I.push(l({},D,{markerTexture:this.markerTextures[w],activation:C?G:t[w],offset:B,count:A[1]-B}))}return I};p.prototype.update=function(){for(var w=this,D=arguments.length,C=Array(D),x=0;x<D;x++)C[x]=arguments[x];if(C.length){1===C.length&&Array.isArray(C[0])&&(C=C[0]);var A=this.groups,B=this.gl,t=this.regl,G=this.maxSize,H=this.maxColors,I=this.palette;this.groups=A=C.map(function(J,L){var E=A[L];if(void 0===J)return E;null===J?J={positions:null}:"function"===typeof J?J={ondraw:J}:"number"===
typeof J[0]&&(J={positions:J});J=c(J,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",
opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});null===J.positions&&(J.positions=[]);null!=J.tooManyColors&&(w.tooManyColors=J.tooManyColors);E||(A[L]=E={id:L,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:t.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:t.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:t.buffer({data:new Uint8Array(0),
usage:"dynamic",type:"uint8"}),positionBuffer:t.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:t.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},J=l({},p.defaults,J));!J.positions||"marker"in J||(J.marker=E.marker,delete E.marker);!J.marker||"positions"in J||(J.positions=E.positions,delete E.positions);var K=0,N=0;e(E,J,[{snap:!0,size:function(aa,ba){null==aa&&(aa=p.defaults.size);K+=aa&&aa.length?1:0;return aa},borderSize:function(aa,ba){null==aa&&
(aa=p.defaults.borderSize);K+=aa&&aa.length?1:0;return aa},opacity:parseFloat,color:function(aa,ba){null==aa&&(aa=p.defaults.color);aa=w.updateColor(aa);N++;return aa},borderColor:function(aa,ba){null==aa&&(aa=p.defaults.borderColor);aa=w.updateColor(aa);N++;return aa},bounds:function(aa,ba,Y){"range"in Y||(Y.range=null);return aa},positions:function(aa,ba,Y){var ea=ba.snap,da=ba.positionBuffer,ca=ba.positionFractBuffer,la=ba.selectionBuffer;if(aa.x||aa.y)return ba.xAttr=aa.x.length?{buffer:t.buffer(aa.x),
offset:0,stride:4,count:aa.x.length}:{buffer:aa.x.buffer,offset:4*aa.x.offset||0,stride:4*(aa.x.stride||1),count:aa.x.count},ba.yAttr=aa.y.length?{buffer:t.buffer(aa.y),offset:0,stride:4,count:aa.y.length}:{buffer:aa.y.buffer,offset:4*aa.y.offset||0,stride:4*(aa.y.stride||1),count:aa.y.count},ba.count=Math.max(ba.xAttr.count,ba.yAttr.count),aa;aa=g(aa,"float64");var pa=ba.count=Math.floor(aa.length/2),qa=ba.bounds=pa?a(aa,2):null;Y.range||ba.range||(delete ba.range,Y.range=qa);Y.marker||ba.marker||
(delete ba.marker,Y.marker=null);ea&&(!0===ea||pa>ea)?ba.tree=d(aa,{bounds:qa}):ea&&ea.length&&(ba.tree=ea);ba.tree&&(Y={primitive:"points",usage:"static",data:ba.tree,type:"uint32"},ba.elements?ba.elements(Y):ba.elements=t.elements(Y));da({data:r.float(aa),usage:"dynamic"});ca({data:r.fract(aa),usage:"dynamic"});la({data:new Uint8Array(pa),type:"uint8",usage:"stream"});return aa}},{marker:function(aa,ba,Y){Y=ba.activation;Y.forEach(function(pa){return pa&&pa.destroy&&pa.destroy()});Y.length=0;if(aa&&
"number"!==typeof aa[0]){for(var ea=[],da=0,ca=Math.min(aa.length,ba.count);da<ca;da++){var la=w.addMarker(aa[da]);ea[la]||(ea[la]=new Uint8Array(ba.count));ea[la][da]=1}for(ba=0;ba<ea.length;ba++)if(ea[ba]){da={data:ea[ba],type:"uint8",usage:"static"};if(Y[ba])Y[ba](da);else Y[ba]=t.buffer(da);Y[ba].data=ea[ba]}}else ea=w.addMarker(aa),Y[ea]=!0;return aa},range:function(aa,ba,Y){if(Y=ba.bounds)return aa||(aa=Y),ba.scale=[1/(aa[2]-aa[0]),1/(aa[3]-aa[1])],ba.translate=[-aa[0],-aa[1]],ba.scaleFract=
r.fract(ba.scale),ba.translateFract=r.fract(ba.translate),aa},viewport:function(aa){return u(aa||[B.drawingBufferWidth,B.drawingBufferHeight])}}]);if(K){var O=E;J=O.count;L=O.size;var Q=O.borderSize;O=O.sizeBuffer;var P=new Uint8Array(2*J);if(L.length||Q.length)for(var T=0;T<J;T++)P[2*T]=Math.round(255*(null==L[T]?L:L[T])/G),P[2*T+1]=Math.round(255*(null==Q[T]?Q:Q[T])/G);O({data:P,usage:"dynamic"})}if(N){O=E;J=O.count;L=O.color;Q=O.borderColor;O=O.colorBuffer;if(w.tooManyColors){if(L.length||Q.length){var V=
new Uint8Array(8*J);for(P=0;P<J;P++)T=L[P],V[8*P]=I[4*T],V[8*P+1]=I[4*T+1],V[8*P+2]=I[4*T+2],V[8*P+3]=I[4*T+3],T=Q[P],V[8*P+4]=I[4*T],V[8*P+5]=I[4*T+1],V[8*P+6]=I[4*T+2],V[8*P+7]=I[4*T+3]}}else if(L.length||Q.length)for(V=new Uint8Array(4*J+2),P=0;P<J;P++)null!=L[P]&&(V[4*P]=L[P]%H,V[4*P+1]=Math.floor(L[P]/H)),null!=Q[P]&&(V[4*P+2]=Q[P]%H,V[4*P+3]=Math.floor(Q[P]/H));O({data:V||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return E})}};p.prototype.addMarker=function(w){var D=this.markerTextures,
C=this.regl,x=this.markerCache,A=null==w?0:x.indexOf(w);if(0<=A)return A;if(w instanceof Uint8Array||w instanceof Uint8ClampedArray)var B=w;else{B=new Uint8Array(w.length);A=0;for(var t=w.length;A<t;A++)B[A]=255*w[A]}t=Math.floor(Math.sqrt(B.length));A=D.length;x.push(w);D.push(C.texture({channels:1,data:B,radius:t,mag:"linear",min:"linear"}));return A};p.prototype.updateColor=function(w){var D=this.paletteIds,C=this.palette,x=this.maxColors;Array.isArray(w)||(w=[w]);var A=[];if("number"===typeof w[0]){var B=
[];if(Array.isArray(w))for(var t=0;t<w.length;t+=4)B.push(w.slice(t,t+4));else for(t=0;t<w.length;t+=4)B.push(w.subarray(t,t+4));w=B}for(B=0;B<w.length;B++){t=w[B];t=h(t,"uint8");var G=f(t,!1);if(null==D[G]){var H=C.length;D[G]=Math.floor(H/4);C[H]=t[0];C[H+1]=t[1];C[H+2]=t[2];C[H+3]=t[3]}A[B]=D[G]}!this.tooManyColors&&C.length>4*x&&(this.tooManyColors=!0);this.updatePalette(C);return 1===A.length?A[0]:A};p.prototype.updatePalette=function(w){if(!this.tooManyColors){var D=this.maxColors,C=this.paletteTexture,
x=Math.ceil(.25*w.length/D);if(1<x){w=w.slice();for(var A=.25*w.length%D;A<x*D;A++)w.push(0,0,0,0)}C.height<x&&C.resize(D,x);C.subimage({width:Math.min(.25*w.length,D),height:x,data:w},0,0)}};p.prototype.destroy=function(){this.groups.forEach(function(w){w.sizeBuffer.destroy();w.positionBuffer.destroy();w.positionFractBuffer.destroy();w.colorBuffer.destroy();w.activation.forEach(function(D){return D&&D.destroy&&D.destroy()});w.selectionBuffer.destroy();w.elements&&w.elements.destroy()});this.groups.length=
0;this.paletteTexture.destroy();this.markerTextures.forEach(function(w){return w&&w.destroy&&w.destroy()});return this};var v=b("object-assign");y.exports=function(w,D){w=new p(w,D);D=w.render.bind(w);v(D,{render:D,update:w.update.bind(w),draw:w.draw.bind(w),destroy:w.destroy.bind(w),regl:w.regl,gl:w.gl,canvas:w.gl.canvas,groups:w.groups,markers:w.markerCache,palette:w.palette});return D}},{"@plotly/point-cluster":57,"array-bounds":70,"color-id":123,"color-normalize":125,"flatten-vertex-data":244,
glslify:413,"is-iexplorer":440,"object-assign":473,"parse-rect":478,"pick-by-alias":485,"to-float32":549,"update-diff":571}],511:[function(b,y,F){function q(e,g){if(!(this instanceof q))return new q(e,g);this.traces=[];this.passes={};this.regl=e;this.scatter=h(e);this.canvas=this.scatter.canvas}function n(e,g,m){g=e[g];var r=e[m];2<g.length?(e=g[1],g=g[3]):g.length?(e=g[0],g=g[1]):(e=g.y,g=g.y+g.height);2<r.length?(m=r[0],r=r[2]):r.length?(m=r[0],r=r[1]):(m=r.x,r=r.x+r.width);return[m,e,r,g]}function p(e){if("number"===
typeof e)return[e,e,e,e];if(2===e.length)return[e[0],e[1],e[0],e[1]];e=k(e);return[e.x,e.y,e.x+e.width,e.y+e.height]}var h=b("regl-scatter2d"),a=b("pick-by-alias"),f=b("array-bounds"),d=b("raf"),l=b("array-range"),k=b("parse-rect"),c=b("flatten-vertex-data");y.exports=q;q.prototype.render=function(){for(var e=this,g=[],m=arguments.length;m--;)g[m]=arguments[m];g.length&&this.update.apply(this,g);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();this.dirty?null==this.planned&&(this.planned=
d(function(){e.draw();e.dirty=!0;e.planned=null})):(this.draw(),this.dirty=!0,d(function(){e.dirty=!1}));return this};q.prototype.update=function(){for(var e,g=[],m=arguments.length;m--;)g[m]=arguments[m];if(g.length){for(m=0;m<g.length;m++)this.updateItem(m,g[m]);this.traces=this.traces.filter(Boolean);g=[];for(var r=m=0;r<this.traces.length;r++){for(var u=this.traces[r],v=this.traces[r].passes,w=0;w<v.length;w++)g.push(this.passes[v[w]]);u.passOffset=m;m+=u.passes.length}(e=this.scatter).update.apply(e,
g);return this}};q.prototype.updateItem=function(e,g){var m=this.regl;if(null===g)return this.traces[e]=null,this;if(!g)return this;g=a(g,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",
marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});e=this.traces[e]||(this.traces[e]={id:e,buffer:m.buffer({usage:"dynamic",type:"float",
data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:k([m._gl.drawingBufferWidth,m._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=g.color&&(e.color=g.color);null!=g.size&&(e.size=g.size);null!=g.marker&&(e.marker=g.marker);null!=g.borderColor&&(e.borderColor=g.borderColor);null!=g.borderSize&&(e.borderSize=g.borderSize);null!=g.opacity&&(e.opacity=g.opacity);g.viewport&&(e.viewport=k(g.viewport));null!=
g.diagonal&&(e.diagonal=g.diagonal);null!=g.upper&&(e.upper=g.upper);null!=g.lower&&(e.lower=g.lower);if(g.data)for(e.buffer(c(g.data)),e.columns=g.data.length,e.count=g.data[0].length,e.bounds=[],m=0;m<e.columns;m++)e.bounds[m]=f(g.data[m],1);if(g.range){e.range=g.range;var r=e.range&&"number"!==typeof e.range[0]}g.domain&&(e.domain=g.domain);m=!1;null!=g.padding&&(Array.isArray(g.padding)&&g.padding.length===e.columns&&"number"===typeof g.padding[g.padding.length-1]?(e.padding=g.padding.map(p),
m=!0):e.padding=p(g.padding));var u=e.columns,v=e.count,w=e.viewport.width,D=e.viewport.height,C=e.viewport.x,x=e.viewport.y,A=w/u,B=D/u;e.passes=[];for(var t=0;t<u;t++)for(var G=0;G<u;G++)if(e.diagonal||G!==t)if(e.upper||!(t>G))if(e.lower||!(t<G)){var H=e.id;H=(null!=H.id?H.id:H)<<16|(t&255)<<8|G&255;var I=this.passes[H]||(this.passes[H]={});g.data&&(I.positions=g.transpose?{x:{buffer:e.buffer,offset:G,count:v,stride:u},y:{buffer:e.buffer,offset:t,count:v,stride:u}}:{x:{buffer:e.buffer,offset:G*
v,count:v},y:{buffer:e.buffer,offset:t*v,count:v}},I.bounds=n(e.bounds,t,G));if(g.domain||g.viewport||g.data){var J=m?n(e.padding,t,G):e.padding;if(e.domain){var L=n(e.domain,t,G);I.viewport=[C+L[0]*w+J[0],x+L[1]*D+J[1],C+L[2]*w-J[2],x+L[3]*D-J[3]]}else I.viewport=[C+G*A+A*J[0],x+t*B+B*J[1],C+(G+1)*A-A*J[2],x+(t+1)*B-B*J[3]]}g.color&&(I.color=e.color);g.size&&(I.size=e.size);g.marker&&(I.marker=e.marker);g.borderSize&&(I.borderSize=e.borderSize);g.borderColor&&(I.borderColor=e.borderColor);g.opacity&&
(I.opacity=e.opacity);g.range&&(I.range=r?n(e.range,t,G):e.range||I.bounds);e.passes.push(H)}return this};q.prototype.draw=function(){for(var e,g=[],m=arguments.length;m--;)g[m]=arguments[m];if(g.length){var r=[];for(m=0;m<g.length;m++)if("number"===typeof g[m]){var u=this.traces[g[m]],v=u.passOffset;r.push.apply(r,l(v,v+u.passes.length))}else if(g[m].length){var w=g[m];u=this.traces[m];v=u.passes;var D=u.passOffset;v=v.map(function(C,x){r[D+x]=w})}(e=this.scatter).draw.apply(e,r)}else this.scatter.draw();
return this};q.prototype.destroy=function(){this.traces.forEach(function(e){e.buffer&&e.buffer.destroy&&e.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":70,"array-range":72,"flatten-vertex-data":244,"parse-rect":478,"pick-by-alias":485,raf:502,"regl-scatter2d":510}],512:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?y.exports=n():q.createREGL=n()})(this,function(){function q(Db,Yb){this.id=ha++;this.type=Db;this.data=
Yb}function n(Db){if(0===Db.length)return[];var Yb=Db.charAt(0),Fc=Db.charAt(Db.length-1);if(1<Db.length&&Yb===Fc&&('"'===Yb||"'"===Yb))return['"'+Db.substr(1,Db.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Yb=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Db))return n(Db.substr(0,Yb.index)).concat(n(Yb[1])).concat(n(Db.substr(Yb.index+Yb[0].length)));Yb=Db.split(".");if(1===Yb.length)return['"'+Db.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];Db=[];for(Fc=0;Fc<Yb.length;++Fc)Db=
Db.concat(n(Yb[Fc]));return Db}function p(Db){return"["+n(Db).join("][")+"]"}function h(){var Db={"":0},Yb=[""];return{id:function(Fc){var mc=Db[Fc];if(mc)return mc;mc=Db[Fc]=Yb.length;Yb.push(Fc);return mc},str:function(Fc){return Yb[Fc]}}}function a(Db,Yb,Fc){function mc(){var wb=window.innerWidth,zb=window.innerHeight;Db!==document.body&&(zb=Db.getBoundingClientRect(),wb=zb.right-zb.left,zb=zb.bottom-zb.top);qc.width=Fc*wb;qc.height=Fc*zb;ra(qc.style,{width:wb+"px",height:zb+"px"})}var qc=document.createElement("canvas");
ra(qc.style,{border:0,margin:0,padding:0,top:0,left:0});Db.appendChild(qc);Db===document.body&&(qc.style.position="absolute",ra(Db.style,{margin:0,padding:0}));var rc;Db!==document.body&&"function"===typeof ResizeObserver?(rc=new ResizeObserver(function(){setTimeout(mc)}),rc.observe(Db)):window.addEventListener("resize",mc,!1);mc();return{canvas:qc,onDestroy:function(){rc?rc.disconnect():window.removeEventListener("resize",mc);Db.removeChild(qc)}}}function f(Db,Yb){function Fc(mc){try{return Db.getContext(mc,
Yb)}catch(qc){return null}}return Fc("webgl")||Fc("experimental-webgl")||Fc("webgl-experimental")}function d(Db){return"string"===typeof Db?Db.split():Db}function l(Db){return"string"===typeof Db?document.querySelector(Db):Db}function k(Db){var Yb=Db||{},Fc,mc,qc,rc;Db={};var wb=[],zb=[],fc="undefined"===typeof window?1:window.devicePixelRatio,zc=!1,Gc=function(bc){},$b=function(){};"string"===typeof Yb?Fc=document.querySelector(Yb):"object"===typeof Yb&&("string"===typeof Yb.nodeName&&"function"===
typeof Yb.appendChild&&"function"===typeof Yb.getBoundingClientRect?Fc=Yb:"function"===typeof Yb.drawArrays||"function"===typeof Yb.drawElements?(rc=Yb,qc=rc.canvas):("gl"in Yb?rc=Yb.gl:"canvas"in Yb?qc=l(Yb.canvas):"container"in Yb&&(mc=l(Yb.container)),"attributes"in Yb&&(Db=Yb.attributes),"extensions"in Yb&&(wb=d(Yb.extensions)),"optionalExtensions"in Yb&&(zb=d(Yb.optionalExtensions)),"onDone"in Yb&&(Gc=Yb.onDone),"profile"in Yb&&(zc=!!Yb.profile),"pixelRatio"in Yb&&(fc=+Yb.pixelRatio)));Fc&&("canvas"===
Fc.nodeName.toLowerCase()?qc=Fc:mc=Fc);if(!rc){if(!qc){Fc=a(mc||document.body,Gc,fc);if(!Fc)return null;qc=Fc.canvas;$b=Fc.onDestroy}void 0===Db.premultipliedAlpha&&(Db.premultipliedAlpha=!0);rc=f(qc,Db)}return rc?{gl:rc,canvas:qc,container:mc,extensions:wb,optionalExtensions:zb,pixelRatio:fc,profile:zc,onDone:Gc,onDestroy:$b}:($b(),Gc("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function c(Db,Yb){function Fc(wb){wb=wb.toLowerCase();try{var zb=
mc[wb]=Db.getExtension(wb)}catch(fc){}return!!zb}for(var mc={},qc=0;qc<Yb.extensions.length;++qc){var rc=Yb.extensions[qc];if(!Fc(rc))return Yb.onDestroy(),Yb.onDone('"'+rc+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}Yb.optionalExtensions.forEach(Fc);return{extensions:mc,restore:function(){Object.keys(mc).forEach(function(wb){if(mc[wb]&&!Fc(wb))throw Error("(regl): error restoring extension "+wb);})}}}function e(Db,Yb){for(var Fc=
Array(Db),mc=0;mc<Db;++mc)Fc[mc]=Yb(mc);return Fc}function g(Db){var Yb=(65535<Db)<<4;Db>>>=Yb;var Fc=(255<Db)<<3;Db>>>=Fc;Yb|=Fc;Fc=(15<Db)<<2;Db>>>=Fc;Yb|=Fc;Fc=(3<Db)<<1;return Yb|Fc|Db>>>Fc>>1}function m(){function Db(mc){a:{for(var qc=16;268435456>=qc;qc*=16)if(mc<=qc){mc=qc;break a}mc=0}qc=Fc[g(mc)>>2];return 0<qc.length?qc.pop():new ArrayBuffer(mc)}function Yb(mc){Fc[g(mc.byteLength)>>2].push(mc)}var Fc=e(8,function(){return[]});return{alloc:Db,free:Yb,allocType:function(mc,qc){switch(mc){case 5120:mc=
new Int8Array(Db(qc),0,qc);break;case 5121:mc=new Uint8Array(Db(qc),0,qc);break;case 5122:mc=new Int16Array(Db(2*qc),0,qc);break;case 5123:mc=new Uint16Array(Db(2*qc),0,qc);break;case 5124:mc=new Int32Array(Db(4*qc),0,qc);break;case 5125:mc=new Uint32Array(Db(4*qc),0,qc);break;case 5126:mc=new Float32Array(Db(4*qc),0,qc);break;default:return null}return mc.length!==qc?mc.subarray(0,qc):mc},freeType:function(mc){Yb(mc.buffer)}}}function r(Db){return!!Db&&"object"===typeof Db&&Array.isArray(Db.shape)&&
Array.isArray(Db.stride)&&"number"===typeof Db.offset&&Db.shape.length===Db.stride.length&&(Array.isArray(Db.data)||Ha(Db.data))}function u(Db,Yb,Fc,mc,qc,rc){for(var wb=0;wb<Yb;++wb)for(var zb=Db[wb],fc=0;fc<Fc;++fc)for(var zc=zb[fc],Gc=0;Gc<mc;++Gc)qc[rc++]=zc[Gc]}function v(Db,Yb,Fc,mc,qc){for(var rc=1,wb=Fc+1;wb<Yb.length;++wb)rc*=Yb[wb];var zb=Yb[Fc];if(4===Yb.length-Fc){var fc=Yb[Fc+1],zc=Yb[Fc+2];Yb=Yb[Fc+3];for(wb=0;wb<zb;++wb)u(Db[wb],fc,zc,Yb,mc,qc),qc+=rc}else for(wb=0;wb<zb;++wb)v(Db[wb],
Yb,Fc+1,mc,qc),qc+=rc}function w(Db){return ob[Object.prototype.toString.call(Db)]|0}function D(Db,Yb){for(var Fc=0;Fc<Yb.length;++Fc)Db[Fc]=Yb[Fc]}function C(Db,Yb,Fc,mc,qc,rc,wb){for(var zb=0,fc=0;fc<Fc;++fc)for(var zc=0;zc<mc;++zc)Db[zb++]=Yb[qc*fc+rc*zc+wb]}function x(Db,Yb,Fc,mc){function qc($b){this.id=fc++;this.buffer=Db.createBuffer();this.type=$b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;Fc.profile&&(this.stats={size:0})}function rc($b,bc,
Eb){$b.byteLength=bc.byteLength;Db.bufferData($b.type,bc,Eb)}function wb($b,bc,Eb,xb,Cb,Jb){$b.usage=Eb;if(Array.isArray(bc)){if($b.dtype=xb||5126,0<bc.length)if(Array.isArray(bc[0])){Cb=tb(bc);for(var ac=xb=1;ac<Cb.length;++ac)xb*=Cb[ac];$b.dimension=xb;bc=sb(bc,Cb,$b.dtype);rc($b,bc,Eb);Jb?$b.persistentData=bc:ya.freeType(bc)}else"number"===typeof bc[0]?($b.dimension=Cb,Cb=ya.allocType($b.dtype,bc.length),D(Cb,bc),rc($b,Cb,Eb),Jb?$b.persistentData=Cb:ya.freeType(Cb)):Ha(bc[0])&&($b.dimension=bc[0].length,
$b.dtype=xb||w(bc[0])||5126,bc=sb(bc,[bc.length,bc[0].length],$b.dtype),rc($b,bc,Eb),Jb?$b.persistentData=bc:ya.freeType(bc))}else if(Ha(bc))$b.dtype=xb||w(bc),$b.dimension=Cb,rc($b,bc,Eb),Jb&&($b.persistentData=new Uint8Array(new Uint8Array(bc.buffer)));else if(r(bc)){Cb=bc.shape;var Kc=bc.stride;ac=bc.offset;var vc=0,Lc=0,Zc=0,Wc=0;1===Cb.length?(vc=Cb[0],Lc=1,Zc=Kc[0],Wc=0):2===Cb.length&&(vc=Cb[0],Lc=Cb[1],Zc=Kc[0],Wc=Kc[1]);$b.dtype=xb||w(bc.data)||5126;$b.dimension=Lc;Cb=ya.allocType($b.dtype,
vc*Lc);C(Cb,bc.data,vc,Lc,Zc,Wc,ac);rc($b,Cb,Eb);Jb?$b.persistentData=Cb:ya.freeType(Cb)}else bc instanceof ArrayBuffer&&($b.dtype=5121,$b.dimension=Cb,rc($b,bc,Eb),Jb&&($b.persistentData=new Uint8Array(new Uint8Array(bc))))}function zb($b){Yb.bufferCount--;mc($b);Db.deleteBuffer($b.buffer);$b.buffer=null;delete zc[$b.id]}var fc=0,zc={};qc.prototype.bind=function(){Db.bindBuffer(this.type,this.buffer)};qc.prototype.destroy=function(){zb(this)};var Gc=[];Fc.profile&&(Yb.getTotalBufferSize=function(){var $b=
0;Object.keys(zc).forEach(function(bc){$b+=zc[bc].stats.size});return $b});return{create:function($b,bc,Eb,xb){function Cb(ac){var Kc=35044,vc=null,Lc=0,Zc=0,Wc=1;Array.isArray(ac)||Ha(ac)||r(ac)||ac instanceof ArrayBuffer?vc=ac:"number"===typeof ac?Lc=ac|0:ac&&("data"in ac&&(vc=ac.data),"usage"in ac&&(Kc=Pa[ac.usage]),"type"in ac&&(Zc=ib[ac.type]),"dimension"in ac&&(Wc=ac.dimension|0),"length"in ac&&(Lc=ac.length|0));Jb.bind();vc?wb(Jb,vc,Kc,Zc,Wc,xb):(Lc&&Db.bufferData(Jb.type,Lc,Kc),Jb.dtype=Zc||
5121,Jb.usage=Kc,Jb.dimension=Wc,Jb.byteLength=Lc);Fc.profile&&(Jb.stats.size=Jb.byteLength*Aa[Jb.dtype]);return Cb}Yb.bufferCount++;var Jb=new qc(bc);zc[Jb.id]=Jb;Eb||Cb($b);Cb._reglType="buffer";Cb._buffer=Jb;Cb.subdata=function(ac,Kc){Kc=(Kc||0)|0;Jb.bind();if(Ha(ac)||ac instanceof ArrayBuffer)Db.bufferSubData(Jb.type,Kc,ac);else if(Array.isArray(ac)){if(0<ac.length)if("number"===typeof ac[0]){var vc=ya.allocType(Jb.dtype,ac.length);D(vc,ac);Db.bufferSubData(Jb.type,Kc,vc);ya.freeType(vc)}else if(Array.isArray(ac[0])||
Ha(ac[0])){var Lc=tb(ac);vc=sb(ac,Lc,Jb.dtype);Db.bufferSubData(Jb.type,Kc,vc);ya.freeType(vc)}}else if(r(ac)){Lc=ac.shape;var Zc=ac.stride,Wc=vc=0,ld=0,xd=0;1===Lc.length?(vc=Lc[0],Wc=1,ld=Zc[0],xd=0):2===Lc.length&&(vc=Lc[0],Wc=Lc[1],ld=Zc[0],xd=Zc[1]);Lc=Array.isArray(ac.data)?Jb.dtype:w(ac.data);Lc=ya.allocType(Lc,vc*Wc);C(Lc,ac.data,vc,Wc,ld,xd,ac.offset);Db.bufferSubData(Jb.type,Kc,Lc);ya.freeType(Lc)}return Cb};Fc.profile&&(Cb.stats=Jb.stats);Cb.destroy=function(){zb(Jb)};return Cb},createStream:function($b,
bc){var Eb=Gc.pop();Eb||(Eb=new qc($b));Eb.bind();wb(Eb,bc,35040,0,1,!1);return Eb},destroyStream:function($b){Gc.push($b)},clear:function(){eb(zc).forEach(zb);Gc.forEach(zb)},getBuffer:function($b){return $b&&$b._buffer instanceof qc?$b._buffer:null},restore:function(){eb(zc).forEach(function($b){$b.buffer=Db.createBuffer();Db.bindBuffer($b.type,$b.buffer);Db.bufferData($b.type,$b.persistentData||$b.byteLength,$b.usage)})},_initBuffer:wb}}function A(Db,Yb,Fc,mc){function qc($b){this.id=fc++;zb[this.id]=
this;this.buffer=$b;this.primType=4;this.type=this.vertCount=0}function rc($b,bc,Eb,xb,Cb,Jb,ac){$b.buffer.bind();var Kc;bc?((Kc=ac)||Ha(bc)&&(!r(bc)||Ha(bc.data))||(Kc=Yb.oes_element_index_uint?5125:5123),Fc._initBuffer($b.buffer,bc,Eb,Kc,3)):(Db.bufferData(34963,Jb,Eb),$b.buffer.dtype=Kc||5121,$b.buffer.usage=Eb,$b.buffer.dimension=3,$b.buffer.byteLength=Jb);Kc=ac;if(!ac){switch($b.buffer.dtype){case 5121:case 5120:Kc=5121;break;case 5123:case 5122:Kc=5123;break;case 5125:case 5124:Kc=5125}$b.buffer.dtype=
Kc}$b.type=Kc;bc=Cb;0>bc&&(bc=$b.buffer.byteLength,5123===Kc?bc>>=1:5125===Kc&&(bc>>=2));$b.vertCount=bc;bc=xb;0>xb&&(bc=4,xb=$b.buffer.dimension,1===xb&&(bc=0),2===xb&&(bc=1),3===xb&&(bc=4));$b.primType=bc}function wb($b){mc.elementsCount--;delete zb[$b.id];$b.buffer.destroy();$b.buffer=null}var zb={},fc=0,zc={uint8:5121,uint16:5123};Yb.oes_element_index_uint&&(zc.uint32=5125);qc.prototype.bind=function(){this.buffer.bind()};var Gc=[];return{create:function($b,bc){function Eb(Jb){if(Jb)if("number"===
typeof Jb)xb(Jb),Cb.primType=4,Cb.vertCount=Jb|0,Cb.type=5121;else{var ac=null,Kc=35044,vc=-1,Lc=-1,Zc=0,Wc=0;if(Array.isArray(Jb)||Ha(Jb)||r(Jb))ac=Jb;else if("data"in Jb&&(ac=Jb.data),"usage"in Jb&&(Kc=Pa[Jb.usage]),"primitive"in Jb&&(vc=Ka[Jb.primitive]),"count"in Jb&&(Lc=Jb.count|0),"type"in Jb&&(Wc=zc[Jb.type]),"length"in Jb)Zc=Jb.length|0;else if(Zc=Lc,5123===Wc||5122===Wc)Zc*=2;else if(5125===Wc||5124===Wc)Zc*=4;rc(Cb,ac,Kc,vc,Lc,Zc,Wc)}else xb(),Cb.primType=4,Cb.vertCount=0,Cb.type=5121;return Eb}
var xb=Fc.create(null,34963,!0),Cb=new qc(xb._buffer);mc.elementsCount++;Eb($b);Eb._reglType="elements";Eb._elements=Cb;Eb.subdata=function(Jb,ac){xb.subdata(Jb,ac);return Eb};Eb.destroy=function(){wb(Cb)};return Eb},createStream:function($b){var bc=Gc.pop();bc||(bc=new qc(Fc.create(null,34963,!0,!1)._buffer));rc(bc,$b,35040,-1,-1,0,0);return bc},destroyStream:function($b){Gc.push($b)},getElements:function($b){return"function"===typeof $b&&$b._elements instanceof qc?$b._elements:null},clear:function(){eb(zb).forEach(wb)}}}
function B(Db){for(var Yb=ya.allocType(5123,Db.length),Fc=0;Fc<Db.length;++Fc)if(isNaN(Db[Fc]))Yb[Fc]=65535;else if(Infinity===Db[Fc])Yb[Fc]=31744;else if(-Infinity===Db[Fc])Yb[Fc]=64512;else{Qa[0]=Db[Fc];var mc=Xa[0],qc=mc>>>31<<15,rc=(mc<<1>>>24)-127;mc=mc>>13&1023;Yb[Fc]=-24>rc?qc:-14>rc?qc+(mc+1024>>-14-rc):15<rc?qc+31744:qc+(rc+15<<10)+mc}return Yb}function t(Db){return Array.isArray(Db)||Ha(Db)}function G(Db){return"[object "+Db+"]"}function H(Db){return Array.isArray(Db)&&(0===Db.length||"number"===
typeof Db[0])}function I(Db){return Array.isArray(Db)&&0!==Db.length&&t(Db[0])?!0:!1}function J(Db){return Object.prototype.toString.call(Db)}function L(Db){if(!Db)return!1;var Yb=J(Db);return 0<=Ma.indexOf(Yb)?!0:H(Db)||I(Db)||r(Db)}function E(Db,Yb){36193===Db.type?(Db.data=B(Yb),ya.freeType(Yb)):Db.data=Yb}function K(Db,Yb,Fc,mc,qc,rc){Db="undefined"!==typeof Sa[Db]?Sa[Db]:Ia[Db]*cb[Yb];rc&&(Db*=6);if(qc){for(mc=0;1<=Fc;)mc+=Db*Fc*Fc,Fc/=2;return mc}return Db*Fc*mc}function N(Db,Yb,Fc,mc,qc,rc,
wb){function zb(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function fc(Ra,Gb){Ra.internalformat=Gb.internalformat;Ra.format=Gb.format;Ra.type=Gb.type;Ra.compressed=Gb.compressed;Ra.premultiplyAlpha=Gb.premultiplyAlpha;Ra.flipY=Gb.flipY;Ra.unpackAlignment=Gb.unpackAlignment;Ra.colorSpace=Gb.colorSpace;Ra.width=Gb.width;Ra.height=Gb.height;Ra.channels=Gb.channels}
function zc(Ra,Gb){if("object"===typeof Gb&&Gb){"premultiplyAlpha"in Gb&&(Ra.premultiplyAlpha=Gb.premultiplyAlpha);"flipY"in Gb&&(Ra.flipY=Gb.flipY);"alignment"in Gb&&(Ra.unpackAlignment=Gb.alignment);"colorSpace"in Gb&&(Ra.colorSpace=Ce[Gb.colorSpace]);"type"in Gb&&(Ra.type=Rd[Gb.type]);var Ab=Ra.width,Ob=Ra.height,Bc=Ra.channels,Tc=!1;"shape"in Gb?(Ab=Gb.shape[0],Ob=Gb.shape[1],3===Gb.shape.length&&(Bc=Gb.shape[2],Tc=!0)):("radius"in Gb&&(Ab=Ob=Gb.radius),"width"in Gb&&(Ab=Gb.width),"height"in Gb&&
(Ob=Gb.height),"channels"in Gb&&(Bc=Gb.channels,Tc=!0));Ra.width=Ab|0;Ra.height=Ob|0;Ra.channels=Bc|0;Ab=!1;"format"in Gb&&(Ab=Gb.format,Ob=Ra.internalformat=Sc[Ab],Ra.format=Be[Ob],Ab in Rd&&!("type"in Gb)&&(Ra.type=Rd[Ab]),Ab in md&&(Ra.compressed=!0),Ab=!0);!Tc&&Ab?Ra.channels=Ia[Ra.format]:Tc&&!Ab&&Ra.channels!==db[Ra.format]&&(Ra.format=Ra.internalformat=db[Ra.channels])}}function Gc(Ra){Db.pixelStorei(37440,Ra.flipY);Db.pixelStorei(37441,Ra.premultiplyAlpha);Db.pixelStorei(37443,Ra.colorSpace);
Db.pixelStorei(3317,Ra.unpackAlignment)}function $b(){zb.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function bc(Ra,Gb){var Ab=null;L(Gb)?Ab=Gb:Gb&&(zc(Ra,Gb),"x"in Gb&&(Ra.xOffset=Gb.x|0),"y"in Gb&&(Ra.yOffset=Gb.y|0),L(Gb.data)&&(Ab=Gb.data));if(Gb.copy){Gb=qc.viewportWidth;var Ob=qc.viewportHeight;Ra.width=Ra.width||Gb-Ra.xOffset;Ra.height=Ra.height||Ob-Ra.yOffset;Ra.needsCopy=!0}else if(!Ab)Ra.width=Ra.width||1,Ra.height=Ra.height||
1,Ra.channels=Ra.channels||4;else if(Ha(Ab))Ra.channels=Ra.channels||4,Ra.data=Ab,"type"in Gb||5121!==Ra.type||(Ra.type=ob[Object.prototype.toString.call(Ab)]|0);else if(H(Ab)){Ra.channels=Ra.channels||4;Gb=Ab;Ob=Gb.length;switch(Ra.type){case 5121:case 5123:case 5125:case 5126:Ob=ya.allocType(Ra.type,Ob);Ob.set(Gb);Ra.data=Ob;break;case 36193:Ra.data=B(Gb)}Ra.alignment=1;Ra.needsFree=!0}else if(r(Ab)){Gb=Ab.data;Array.isArray(Gb)||5121!==Ra.type||(Ra.type=ob[Object.prototype.toString.call(Gb)]|0);
Ob=Ab.shape;var Bc=Ab.stride,Tc,jc;3===Ob.length?(Tc=Ob[2],jc=Bc[2]):jc=Tc=1;var Oc=Ob[0];var gd=Ob[1];Ob=Bc[0];Bc=Bc[1];Ra.alignment=1;Ra.width=Oc;Ra.height=gd;Ra.channels=Tc;Ra.format=Ra.internalformat=db[Tc];Ra.needsFree=!0;Oc=jc;Ab=Ab.offset;Tc=Ra.width;jc=Ra.height;gd=Ra.channels;for(var vd=ya.allocType(36193===Ra.type?5126:Ra.type,Tc*jc*gd),Nb=0,dc=0;dc<jc;++dc)for(var Mc=0;Mc<Tc;++Mc)for(var cd=0;cd<gd;++cd)vd[Nb++]=Gb[Ob*Mc+Bc*dc+Oc*cd+Ab];E(Ra,vd)}else if(J(Ab)===Ua||J(Ab)===$a||J(Ab)===
xa)J(Ab)===Ua||J(Ab)===$a?Ra.element=Ab:Ra.element=Ab.canvas,Ra.width=Ra.element.width,Ra.height=Ra.element.height,Ra.channels=4;else if(J(Ab)===Ga)Ra.element=Ab,Ra.width=Ab.width,Ra.height=Ab.height,Ra.channels=4;else if(J(Ab)===Va)Ra.element=Ab,Ra.width=Ab.naturalWidth,Ra.height=Ab.naturalHeight,Ra.channels=4;else if(J(Ab)===gb)Ra.element=Ab,Ra.width=Ab.videoWidth,Ra.height=Ab.videoHeight,Ra.channels=4;else if(I(Ab)){Gb=Ra.width||Ab[0].length;Ob=Ra.height||Ab.length;Bc=Ra.channels;Bc=t(Ab[0][0])?
Bc||Ab[0][0].length:Bc||1;Oc=hb.shape(Ab);Tc=1;for(jc=0;jc<Oc.length;++jc)Tc*=Oc[jc];Tc=ya.allocType(36193===Ra.type?5126:Ra.type,Tc);hb.flatten(Ab,Oc,"",Tc);E(Ra,Tc);Ra.alignment=1;Ra.width=Gb;Ra.height=Ob;Ra.channels=Bc;Ra.format=Ra.internalformat=db[Bc];Ra.needsFree=!0}}function Eb(Ra,Gb,Ab,Ob,Bc){var Tc=Ra.element,jc=Ra.data,Oc=Ra.internalformat,gd=Ra.format,vd=Ra.type,Nb=Ra.width,dc=Ra.height;Gc(Ra);Tc?Db.texSubImage2D(Gb,Bc,Ab,Ob,gd,vd,Tc):Ra.compressed?Db.compressedTexSubImage2D(Gb,Bc,Ab,Ob,
Oc,Nb,dc,jc):Ra.needsCopy?(mc(),Db.copyTexSubImage2D(Gb,Bc,Ab,Ob,Ra.xOffset,Ra.yOffset,Nb,dc)):Db.texSubImage2D(Gb,Bc,Ab,Ob,Nb,dc,gd,vd,jc)}function xb(){return Ge.pop()||new $b}function Cb(Ra){Ra.needsFree&&ya.freeType(Ra.data);$b.call(Ra);Ge.push(Ra)}function Jb(){zb.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function ac(Ra,Gb,Ab){var Ob=Ra.images[0]=xb();Ra.mipmask=1;Ob.width=Ra.width=Gb;Ob.height=Ra.height=Ab;Ob.channels=Ra.channels=4}function Kc(Ra,
Gb){if(L(Gb)){var Ab=Ra.images[0]=xb();fc(Ab,Ra);bc(Ab,Gb);Ra.mipmask=1}else if(zc(Ra,Gb),Array.isArray(Gb.mipmap)){Gb=Gb.mipmap;for(var Ob=0;Ob<Gb.length;++Ob)Ab=Ra.images[Ob]=xb(),fc(Ab,Ra),Ab.width>>=Ob,Ab.height>>=Ob,bc(Ab,Gb[Ob]),Ra.mipmask|=1<<Ob}else Ab=Ra.images[0]=xb(),fc(Ab,Ra),bc(Ab,Gb),Ra.mipmask=1;fc(Ra,Ra.images[0])}function vc(Ra,Gb){Ra=Ra.images;for(var Ab=0;Ab<Ra.length&&Ra[Ab];++Ab){var Ob=Ra[Ab],Bc=Gb,Tc=Ab,jc=Ob.element,Oc=Ob.data,gd=Ob.internalformat,vd=Ob.format,Nb=Ob.type,dc=
Ob.width,Mc=Ob.height;Gc(Ob);jc?Db.texImage2D(Bc,Tc,vd,vd,Nb,jc):Ob.compressed?Db.compressedTexImage2D(Bc,Tc,gd,dc,Mc,0,Oc):Ob.needsCopy?(mc(),Db.copyTexImage2D(Bc,Tc,vd,Ob.xOffset,Ob.yOffset,dc,Mc,0)):Db.texImage2D(Bc,Tc,vd,dc,Mc,0,vd,Nb,Oc||null)}}function Lc(){var Ra=Ue.pop()||new Jb;zb.call(Ra);for(var Gb=Ra.mipmask=0;16>Gb;++Gb)Ra.images[Gb]=null;return Ra}function Zc(Ra){for(var Gb=Ra.images,Ab=0;Ab<Gb.length;++Ab)Gb[Ab]&&Cb(Gb[Ab]),Gb[Ab]=null;Ue.push(Ra)}function Wc(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function ld(Ra,Gb){"min"in Gb&&(Ra.minFilter=Ld[Gb.min],0<=pb.indexOf(Ra.minFilter)&&!("faces"in Gb)&&(Ra.genMipmaps=!0));"mag"in Gb&&(Ra.magFilter=Jd[Gb.mag]);var Ab=Ra.wrapS,Ob=Ra.wrapT;if("wrap"in Gb){var Bc=Gb.wrap;"string"===typeof Bc?Ab=Ob=Dd[Bc]:Array.isArray(Bc)&&(Ab=Dd[Bc[0]],Ob=Dd[Bc[1]])}else"wrapS"in Gb&&(Ab=Dd[Gb.wrapS]),"wrapT"in Gb&&(Ob=Dd[Gb.wrapT]);Ra.wrapS=Ab;Ra.wrapT=Ob;"anisotropic"in Gb&&
(Ra.anisotropic=Gb.anisotropic);if("mipmap"in Gb){Ab=!1;switch(typeof Gb.mipmap){case "string":Ra.mipmapHint=Yc[Gb.mipmap];Ab=Ra.genMipmaps=!0;break;case "boolean":Ab=Ra.genMipmaps=Gb.mipmap;break;case "object":Ra.genMipmaps=!1,Ab=!0}!Ab||"min"in Gb||(Ra.minFilter=9984)}}function xd(Ra,Gb){Db.texParameteri(Gb,10241,Ra.minFilter);Db.texParameteri(Gb,10240,Ra.magFilter);Db.texParameteri(Gb,10242,Ra.wrapS);Db.texParameteri(Gb,10243,Ra.wrapT);Yb.ext_texture_filter_anisotropic&&Db.texParameteri(Gb,34046,
Ra.anisotropic);Ra.genMipmaps&&(Db.hint(33170,Ra.mipmapHint),Db.generateMipmap(Gb))}function hd(Ra){zb.call(this);this.mipmask=0;this.internalformat=6408;this.id=uf++;this.refCount=1;this.target=Ra;this.texture=Db.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Wc;wb.profile&&(this.stats={size:0})}function Cd(Ra){Db.activeTexture(33984);Db.bindTexture(Ra.target,Ra.texture)}function Kd(){var Ra=$e[0];Ra?Db.bindTexture(Ra.target,Ra.texture):Db.bindTexture(3553,null)}function pd(Ra){var Gb=
Ra.texture,Ab=Ra.unit,Ob=Ra.target;0<=Ab&&(Db.activeTexture(33984+Ab),Db.bindTexture(Ob,null),$e[Ab]=null);Db.deleteTexture(Gb);Ra.texture=null;Ra.params=null;Ra.pixels=null;Ra.refCount=0;delete hf[Ra.id];rc.textureCount--}var Yc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Dd={repeat:10497,clamp:33071,mirror:33648},Jd={nearest:9728,linear:9729},Ld=ra({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Jd),Ce=
{none:0,browser:37444},Rd={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Sc={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},md={};Yb.ext_srgb&&(Sc.srgb=35904,Sc.srgba=35906);Yb.oes_texture_float&&(Rd.float32=Rd["float"]=5126);Yb.oes_texture_half_float&&(Rd.float16=Rd["half float"]=36193);Yb.webgl_depth_texture&&(ra(Sc,{depth:6402,"depth stencil":34041}),ra(Rd,{uint16:5123,uint32:5125,"depth stencil":34042}));Yb.webgl_compressed_texture_s3tc&&
ra(md,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});Yb.webgl_compressed_texture_atc&&ra(md,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});Yb.webgl_compressed_texture_pvrtc&&ra(md,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});Yb.webgl_compressed_texture_etc1&&(md["rgb etc1"]=36196);var Gd=Array.prototype.slice.call(Db.getParameter(34467));Object.keys(md).forEach(function(Ra){var Gb=
md[Ra];0<=Gd.indexOf(Gb)&&(Sc[Ra]=Gb)});var Md=Object.keys(Sc);Fc.textureFormats=Md;var me=[];Object.keys(Sc).forEach(function(Ra){me[Sc[Ra]]=Ra});var xe=[];Object.keys(Rd).forEach(function(Ra){xe[Rd[Ra]]=Ra});var Wd=[];Object.keys(Jd).forEach(function(Ra){Wd[Jd[Ra]]=Ra});var Qd=[];Object.keys(Ld).forEach(function(Ra){Qd[Ld[Ra]]=Ra});var Ae=[];Object.keys(Dd).forEach(function(Ra){Ae[Dd[Ra]]=Ra});var Be=Md.reduce(function(Ra,Gb){var Ab=Sc[Gb];6409===Ab||6406===Ab||6409===Ab||6410===Ab||6402===Ab||
34041===Ab||Yb.ext_srgb&&(35904===Ab||35906===Ab)?Ra[Ab]=Ab:32855===Ab||0<=Gb.indexOf("rgba")?Ra[Ab]=6408:Ra[Ab]=6407;return Ra},{}),Ge=[],Ue=[],uf=0,hf={},pf=Fc.maxTextureUnits,$e=Array(pf).map(function(){return null});ra(hd.prototype,{bind:function(){this.bindCount+=1;var Ra=this.unit;if(0>Ra){for(var Gb=0;Gb<pf;++Gb){var Ab=$e[Gb];if(Ab){if(0<Ab.bindCount)continue;Ab.unit=-1}$e[Gb]=this;Ra=Gb;break}wb.profile&&rc.maxTextureUnits<Ra+1&&(rc.maxTextureUnits=Ra+1);this.unit=Ra;Db.activeTexture(33984+
Ra);Db.bindTexture(this.target,this.texture)}return Ra},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&pd(this)}});wb.profile&&(rc.getTotalTextureSize=function(){var Ra=0;Object.keys(hf).forEach(function(Gb){Ra+=hf[Gb].stats.size});return Ra});return{create2D:function(Ra,Gb){function Ab(Bc,Tc){var jc=Ob.texInfo;Wc.call(jc);var Oc=Lc();"number"===typeof Bc?"number"===typeof Tc?ac(Oc,Bc|0,Tc|0):ac(Oc,Bc|0,Bc|0):Bc?(ld(jc,Bc),Kc(Oc,Bc)):ac(Oc,1,1);jc.genMipmaps&&(Oc.mipmask=
(Oc.width<<1)-1);Ob.mipmask=Oc.mipmask;fc(Ob,Oc);Ob.internalformat=Oc.internalformat;Ab.width=Oc.width;Ab.height=Oc.height;Cd(Ob);vc(Oc,3553);xd(jc,3553);Kd();Zc(Oc);wb.profile&&(Ob.stats.size=K(Ob.internalformat,Ob.type,Oc.width,Oc.height,jc.genMipmaps,!1));Ab.format=me[Ob.internalformat];Ab.type=xe[Ob.type];Ab.mag=Wd[jc.magFilter];Ab.min=Qd[jc.minFilter];Ab.wrapS=Ae[jc.wrapS];Ab.wrapT=Ae[jc.wrapT];return Ab}var Ob=new hd(3553);hf[Ob.id]=Ob;rc.textureCount++;Ab(Ra,Gb);Ab.subimage=function(Bc,Tc,
jc,Oc){Tc|=0;jc|=0;Oc|=0;var gd=xb();fc(gd,Ob);gd.width=0;gd.height=0;bc(gd,Bc);gd.width=gd.width||(Ob.width>>Oc)-Tc;gd.height=gd.height||(Ob.height>>Oc)-jc;Cd(Ob);Eb(gd,3553,Tc,jc,Oc);Kd();Cb(gd);return Ab};Ab.resize=function(Bc,Tc){Bc|=0;Tc=Tc|0||Bc;if(Bc===Ob.width&&Tc===Ob.height)return Ab;Ab.width=Ob.width=Bc;Ab.height=Ob.height=Tc;Cd(Ob);for(var jc=0;Ob.mipmask>>jc;++jc){var Oc=Bc>>jc,gd=Tc>>jc;if(!Oc||!gd)break;Db.texImage2D(3553,jc,Ob.format,Oc,gd,0,Ob.format,Ob.type,null)}Kd();wb.profile&&
(Ob.stats.size=K(Ob.internalformat,Ob.type,Bc,Tc,!1,!1));return Ab};Ab._reglType="texture2d";Ab._texture=Ob;wb.profile&&(Ab.stats=Ob.stats);Ab.destroy=function(){Ob.decRef()};return Ab},createCube:function(Ra,Gb,Ab,Ob,Bc,Tc){function jc(vd,Nb,dc,Mc,cd,Rc){var $c,Qb=Oc.texInfo;Wc.call(Qb);for($c=0;6>$c;++$c)gd[$c]=Lc();if("number"===typeof vd||!vd)for(vd=vd|0||1,$c=0;6>$c;++$c)ac(gd[$c],vd,vd);else if("object"===typeof vd)if(Nb)Kc(gd[0],vd),Kc(gd[1],Nb),Kc(gd[2],dc),Kc(gd[3],Mc),Kc(gd[4],cd),Kc(gd[5],
Rc);else if(ld(Qb,vd),zc(Oc,vd),"faces"in vd)for(vd=vd.faces,$c=0;6>$c;++$c)fc(gd[$c],Oc),Kc(gd[$c],vd[$c]);else for($c=0;6>$c;++$c)Kc(gd[$c],vd);fc(Oc,gd[0]);Oc.mipmask=Qb.genMipmaps?(gd[0].width<<1)-1:gd[0].mipmask;Oc.internalformat=gd[0].internalformat;jc.width=gd[0].width;jc.height=gd[0].height;Cd(Oc);for($c=0;6>$c;++$c)vc(gd[$c],34069+$c);xd(Qb,34067);Kd();wb.profile&&(Oc.stats.size=K(Oc.internalformat,Oc.type,jc.width,jc.height,Qb.genMipmaps,!0));jc.format=me[Oc.internalformat];jc.type=xe[Oc.type];
jc.mag=Wd[Qb.magFilter];jc.min=Qd[Qb.minFilter];jc.wrapS=Ae[Qb.wrapS];jc.wrapT=Ae[Qb.wrapT];for($c=0;6>$c;++$c)Zc(gd[$c]);return jc}var Oc=new hd(34067);hf[Oc.id]=Oc;rc.cubeCount++;var gd=Array(6);jc(Ra,Gb,Ab,Ob,Bc,Tc);jc.subimage=function(vd,Nb,dc,Mc,cd){dc|=0;Mc|=0;cd|=0;var Rc=xb();fc(Rc,Oc);Rc.width=0;Rc.height=0;bc(Rc,Nb);Rc.width=Rc.width||(Oc.width>>cd)-dc;Rc.height=Rc.height||(Oc.height>>cd)-Mc;Cd(Oc);Eb(Rc,34069+vd,dc,Mc,cd);Kd();Cb(Rc);return jc};jc.resize=function(vd){vd|=0;if(vd!==Oc.width){jc.width=
Oc.width=vd;jc.height=Oc.height=vd;Cd(Oc);for(var Nb=0;6>Nb;++Nb)for(var dc=0;Oc.mipmask>>dc;++dc)Db.texImage2D(34069+Nb,dc,Oc.format,vd>>dc,vd>>dc,0,Oc.format,Oc.type,null);Kd();wb.profile&&(Oc.stats.size=K(Oc.internalformat,Oc.type,jc.width,jc.height,!1,!0));return jc}};jc._reglType="textureCube";jc._texture=Oc;wb.profile&&(jc.stats=Oc.stats);jc.destroy=function(){Oc.decRef()};return jc},clear:function(){for(var Ra=0;Ra<pf;++Ra)Db.activeTexture(33984+Ra),Db.bindTexture(3553,null),$e[Ra]=null;eb(hf).forEach(pd);
rc.cubeCount=0;rc.textureCount=0},getTexture:function(Ra){return null},restore:function(){for(var Ra=0;Ra<pf;++Ra){var Gb=$e[Ra];Gb&&(Gb.bindCount=0,Gb.unit=-1,$e[Ra]=null)}eb(hf).forEach(function(Ab){Ab.texture=Db.createTexture();Db.bindTexture(Ab.target,Ab.texture);for(var Ob=0;32>Ob;++Ob)if(0!==(Ab.mipmask&1<<Ob))if(3553===Ab.target)Db.texImage2D(3553,Ob,Ab.internalformat,Ab.width>>Ob,Ab.height>>Ob,0,Ab.internalformat,Ab.type,null);else for(var Bc=0;6>Bc;++Bc)Db.texImage2D(34069+Bc,Ob,Ab.internalformat,
Ab.width>>Ob,Ab.height>>Ob,0,Ab.internalformat,Ab.type,null);xd(Ab.texInfo,Ab.target)})}}}function O(Db,Yb,Fc,mc,qc,rc){function wb(hd,Cd,Kd){this.target=hd;this.texture=Cd;this.renderbuffer=Kd;var pd=hd=0;Cd?(hd=Cd.width,pd=Cd.height):Kd&&(hd=Kd.width,pd=Kd.height);this.width=hd;this.height=pd}function zb(hd){hd&&(hd.texture&&hd.texture._texture.decRef(),hd.renderbuffer&&hd.renderbuffer._renderbuffer.decRef())}function fc(hd,Cd,Kd){hd&&(hd.texture?hd.texture._texture.refCount+=1:hd.renderbuffer._renderbuffer.refCount+=
1)}function zc(hd,Cd){Cd&&(Cd.texture?Db.framebufferTexture2D(36160,hd,Cd.target,Cd.texture._texture.texture,0):Db.framebufferRenderbuffer(36160,hd,36161,Cd.renderbuffer._renderbuffer.renderbuffer))}function Gc(hd){var Cd=3553,Kd=null,pd=null,Yc=hd;"object"===typeof hd&&(Yc=hd.data,"target"in hd&&(Cd=hd.target|0));hd=Yc._reglType;"texture2d"===hd?Kd=Yc:"textureCube"===hd?Kd=Yc:"renderbuffer"===hd&&(pd=Yc,Cd=36161);return new wb(Cd,Kd,pd)}function $b(hd,Cd,Kd,pd,Yc){if(Kd)return hd=mc.create2D({width:hd,
height:Cd,format:pd,type:Yc}),hd._texture.refCount=0,new wb(3553,hd,null);hd=qc.create({width:hd,height:Cd,format:pd});hd._renderbuffer.refCount=0;return new wb(36161,null,hd)}function bc(hd){return hd&&(hd.texture||hd.renderbuffer)}function Eb(hd,Cd,Kd){hd&&(hd.texture?hd.texture.resize(Cd,Kd):hd.renderbuffer&&hd.renderbuffer.resize(Cd,Kd),hd.width=Cd,hd.height=Kd)}function xb(){this.id=ld++;xd[this.id]=this;this.framebuffer=Db.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];
this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Cb(hd){hd.colorAttachments.forEach(zb);zb(hd.depthAttachment);zb(hd.stencilAttachment);zb(hd.depthStencilAttachment)}function Jb(hd){Db.deleteFramebuffer(hd.framebuffer);hd.framebuffer=null;rc.framebufferCount--;delete xd[hd.id]}function ac(hd){var Cd;Db.bindFramebuffer(36160,hd.framebuffer);var Kd=hd.colorAttachments;for(Cd=0;Cd<Kd.length;++Cd)zc(36064+Cd,Kd[Cd]);for(Cd=Kd.length;Cd<Fc.maxColorAttachments;++Cd)Db.framebufferTexture2D(36160,
36064+Cd,3553,null,0);Db.framebufferTexture2D(36160,33306,3553,null,0);Db.framebufferTexture2D(36160,36096,3553,null,0);Db.framebufferTexture2D(36160,36128,3553,null,0);zc(36096,hd.depthAttachment);zc(36128,hd.stencilAttachment);zc(33306,hd.depthStencilAttachment);Db.checkFramebufferStatus(36160);Db.isContextLost();Db.bindFramebuffer(36160,vc.next?vc.next.framebuffer:null);vc.cur=vc.next;Db.getError()}function Kc(hd,Cd){function Kd(Yc,Dd){var Jd=0,Ld=0,Ce=!0,Rd=!0;var Sc=null;var md=!0,Gd="rgba",
Md="uint8",me=1,xe=null,Wd=null,Qd=null,Ae=!1;if("number"===typeof Yc)Jd=Yc|0,Ld=Dd|0||Jd;else if(Yc){"shape"in Yc?(Ld=Yc.shape,Jd=Ld[0],Ld=Ld[1]):("radius"in Yc&&(Jd=Ld=Yc.radius),"width"in Yc&&(Jd=Yc.width),"height"in Yc&&(Ld=Yc.height));if("color"in Yc||"colors"in Yc)Sc=Yc.color||Yc.colors,Array.isArray(Sc);if(!Sc){"colorCount"in Yc&&(me=Yc.colorCount|0);"colorTexture"in Yc&&(md=!!Yc.colorTexture,Gd="rgba4");if("colorType"in Yc&&(Md=Yc.colorType,!md))if("half float"===Md||"float16"===Md)Gd="rgba16f";
else if("float"===Md||"float32"===Md)Gd="rgba32f";"colorFormat"in Yc&&(Gd=Yc.colorFormat,0<=Lc.indexOf(Gd)?md=!0:0<=Zc.indexOf(Gd)&&(md=!1))}if("depthTexture"in Yc||"depthStencilTexture"in Yc)Ae=!(!Yc.depthTexture&&!Yc.depthStencilTexture);"depth"in Yc&&("boolean"===typeof Yc.depth?Ce=Yc.depth:(xe=Yc.depth,Rd=!1));"stencil"in Yc&&("boolean"===typeof Yc.stencil?Rd=Yc.stencil:(Wd=Yc.stencil,Ce=!1));"depthStencil"in Yc&&("boolean"===typeof Yc.depthStencil?Ce=Rd=Yc.depthStencil:(Qd=Yc.depthStencil,Rd=
Ce=!1))}else Jd=Ld=1;var Be=Dd=null,Ge=null;if(Array.isArray(Sc))Yc=Sc.map(Gc);else if(Sc)Yc=[Gc(Sc)];else for(Yc=Array(me),Sc=0;Sc<me;++Sc)Yc[Sc]=$b(Jd,Ld,md,Gd,Md);Jd=Jd||Yc[0].width;Ld=Ld||Yc[0].height;xe?Dd=Gc(xe):Ce&&!Rd&&(Dd=$b(Jd,Ld,Ae,"depth","uint32"));Wd?Be=Gc(Wd):Rd&&!Ce&&(Be=$b(Jd,Ld,!1,"stencil","uint8"));Qd?Ge=Gc(Qd):!xe&&!Wd&&Rd&&Ce&&(Ge=$b(Jd,Ld,Ae,"depth stencil","depth stencil"));Ce=null;for(Sc=0;Sc<Yc.length;++Sc)fc(Yc[Sc],Jd,Ld),Yc[Sc]&&Yc[Sc].texture&&(Rd=yb[Yc[Sc].texture._texture.format]*
Hb[Yc[Sc].texture._texture.type],null===Ce&&(Ce=Rd));fc(Dd,Jd,Ld);fc(Be,Jd,Ld);fc(Ge,Jd,Ld);Cb(pd);pd.width=Jd;pd.height=Ld;pd.colorAttachments=Yc;pd.depthAttachment=Dd;pd.stencilAttachment=Be;pd.depthStencilAttachment=Ge;Kd.color=Yc.map(bc);Kd.depth=bc(Dd);Kd.stencil=bc(Be);Kd.depthStencil=bc(Ge);Kd.width=pd.width;Kd.height=pd.height;ac(pd);return Kd}var pd=new xb;rc.framebufferCount++;Kd(hd,Cd);return ra(Kd,{resize:function(Yc,Dd){Yc=Math.max(Yc|0,1);Dd=Math.max(Dd|0||Yc,1);if(Yc===pd.width&&Dd===
pd.height)return Kd;for(var Jd=pd.colorAttachments,Ld=0;Ld<Jd.length;++Ld)Eb(Jd[Ld],Yc,Dd);Eb(pd.depthAttachment,Yc,Dd);Eb(pd.stencilAttachment,Yc,Dd);Eb(pd.depthStencilAttachment,Yc,Dd);pd.width=Kd.width=Yc;pd.height=Kd.height=Dd;ac(pd);return Kd},_reglType:"framebuffer",_framebuffer:pd,destroy:function(){Jb(pd);Cb(pd)},use:function(Yc){vc.setFBO({framebuffer:Kd},Yc)}})}var vc={cur:null,next:null,dirty:!1,setFBO:null},Lc=["rgba"],Zc=["rgba4","rgb565","rgb5 a1"];Yb.ext_srgb&&Zc.push("srgba");Yb.ext_color_buffer_half_float&&
Zc.push("rgba16f","rgb16f");Yb.webgl_color_buffer_float&&Zc.push("rgba32f");var Wc=["uint8"];Yb.oes_texture_half_float&&Wc.push("half float","float16");Yb.oes_texture_float&&Wc.push("float","float32");var ld=0,xd={};return ra(vc,{getFramebuffer:function(hd){return"function"===typeof hd&&"framebuffer"===hd._reglType&&(hd=hd._framebuffer,hd instanceof xb)?hd:null},create:Kc,createCube:function(hd){function Cd(pd){var Yc={color:null},Dd=0,Jd=null;var Ld="rgba";var Ce="uint8",Rd=1;if("number"===typeof pd)Dd=
pd|0;else if(pd){"shape"in pd?Dd=pd.shape[0]:("radius"in pd&&(Dd=pd.radius|0),"width"in pd?Dd=pd.width|0:"height"in pd&&(Dd=pd.height|0));if("color"in pd||"colors"in pd)Jd=pd.color||pd.colors,Array.isArray(Jd);Jd||("colorCount"in pd&&(Rd=pd.colorCount|0),"colorType"in pd&&(Ce=pd.colorType),"colorFormat"in pd&&(Ld=pd.colorFormat));"depth"in pd&&(Yc.depth=pd.depth);"stencil"in pd&&(Yc.stencil=pd.stencil);"depthStencil"in pd&&(Yc.depthStencil=pd.depthStencil)}else Dd=1;if(Jd)if(Array.isArray(Jd))for(pd=
[],Ld=0;Ld<Jd.length;++Ld)pd[Ld]=Jd[Ld];else pd=[Jd];else for(pd=Array(Rd),Jd={radius:Dd,format:Ld,type:Ce},Ld=0;Ld<Rd;++Ld)pd[Ld]=mc.createCube(Jd);Yc.color=Array(pd.length);for(Ld=0;Ld<pd.length;++Ld)Rd=pd[Ld],Dd=Dd||Rd.width,Yc.color[Ld]={target:34069,data:pd[Ld]};for(Ld=0;6>Ld;++Ld){for(Rd=0;Rd<pd.length;++Rd)Yc.color[Rd].target=34069+Ld;0<Ld&&(Yc.depth=Kd[0].depth,Yc.stencil=Kd[0].stencil,Yc.depthStencil=Kd[0].depthStencil);if(Kd[Ld])Kd[Ld](Yc);else Kd[Ld]=Kc(Yc)}return ra(Cd,{width:Dd,height:Dd,
color:pd})}var Kd=Array(6);Cd(hd);return ra(Cd,{faces:Kd,resize:function(pd){var Yc=pd|0;if(Yc===Cd.width)return Cd;var Dd=Cd.color;for(pd=0;pd<Dd.length;++pd)Dd[pd].resize(Yc);for(pd=0;6>pd;++pd)Kd[pd].resize(Yc);Cd.width=Cd.height=Yc;return Cd},_reglType:"framebufferCube",destroy:function(){Kd.forEach(function(pd){pd.destroy()})}})},clear:function(){eb(xd).forEach(Jb)},restore:function(){vc.cur=null;vc.next=null;vc.dirty=!0;eb(xd).forEach(function(hd){hd.framebuffer=Db.createFramebuffer();ac(hd)})}})}
function Q(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function P(Db,Yb,Fc,mc,qc){function rc(Cb){if(Cb!==xb.currentVAO){var Jb=Yb.oes_vertex_array_object;Cb?Jb.bindVertexArrayOES(Cb.vao):Jb.bindVertexArrayOES(null);xb.currentVAO=Cb}}function wb(Cb){if(Cb!==xb.currentVAO){if(Cb)Cb.bindAttrs();else for(var Jb=Yb.angle_instanced_arrays,ac=0;ac<$b.length;++ac){var Kc=$b[ac];Kc.buffer?(Db.enableVertexAttribArray(ac),
Db.vertexAttribPointer(ac,Kc.size,Kc.type,Kc.normalized,Kc.stride,Kc.offfset),Jb&&Jb.vertexAttribDivisorANGLE(ac,Kc.divisor)):(Db.disableVertexAttribArray(ac),Db.vertexAttrib4f(ac,Kc.x,Kc.y,Kc.z,Kc.w))}xb.currentVAO=Cb}}function zb(){eb(Eb).forEach(function(Cb){Cb.destroy()})}function fc(){this.id=++bc;this.attributes=[];var Cb=Yb.oes_vertex_array_object;this.vao=Cb?Cb.createVertexArrayOES():null;Eb[this.id]=this;this.buffers=[]}function zc(){Yb.oes_vertex_array_object&&eb(Eb).forEach(function(Cb){Cb.refresh()})}
var Gc=Fc.maxAttributes,$b=Array(Gc);for(Fc=0;Fc<Gc;++Fc)$b[Fc]=new Q;var bc=0,Eb={},xb={Record:Q,scope:{},state:$b,currentVAO:null,targetVAO:null,restore:Yb.oes_vertex_array_object?zc:function(){},createVAO:function(Cb){function Jb(Kc){for(var vc=0;vc<ac.buffers.length;++vc)ac.buffers[vc].destroy();ac.buffers.length=0;vc=ac.attributes;vc.length=Kc.length;for(var Lc=0;Lc<Kc.length;++Lc){var Zc=Kc[Lc],Wc=vc[Lc]=new Q;Array.isArray(Zc)||Ha(Zc)||r(Zc)?(Zc=qc.create(Zc,34962,!1,!0),Wc.buffer=qc.getBuffer(Zc),
Wc.size=Wc.buffer.dimension|0,Wc.normalized=!1,Wc.type=Wc.buffer.dtype,Wc.offset=0,Wc.stride=0,Wc.divisor=0,Wc.state=1,ac.buffers.push(Zc)):qc.getBuffer(Zc)?(Wc.buffer=qc.getBuffer(Zc),Wc.size=Wc.buffer.dimension|0,Wc.normalized=!1,Wc.type=Wc.buffer.dtype,Wc.offset=0,Wc.stride=0,Wc.divisor=0,Wc.state=1):qc.getBuffer(Zc.buffer)?(Wc.buffer=qc.getBuffer(Zc.buffer),Wc.size=(+Zc.size||Wc.buffer.dimension)|0,Wc.normalized=!!Zc.normalized||!1,Wc.type="type"in Zc?ib[Zc.type]:Wc.buffer.dtype,Wc.offset=(Zc.offset||
0)|0,Wc.stride=(Zc.stride||0)|0,Wc.divisor=(Zc.divisor||0)|0,Wc.state=1):"x"in Zc&&(Wc.x=+Zc.x||0,Wc.y=+Zc.y||0,Wc.z=+Zc.z||0,Wc.w=+Zc.w||0,Wc.state=2)}ac.refresh();return Jb}var ac=new fc;mc.vaoCount+=1;Jb.destroy=function(){ac.destroy()};Jb._vao=ac;Jb._reglType="vao";return Jb(Cb)},getVAO:function(Cb){return"function"===typeof Cb&&Cb._vao?Cb._vao:null},destroyBuffer:function(Cb){for(var Jb=0;Jb<$b.length;++Jb){var ac=$b[Jb];ac.buffer===Cb&&(Db.disableVertexAttribArray(Jb),ac.buffer=null)}},setVAO:Yb.oes_vertex_array_object?
rc:wb,clear:Yb.oes_vertex_array_object?zb:function(){}};fc.prototype.bindAttrs=function(){for(var Cb=Yb.angle_instanced_arrays,Jb=this.attributes,ac=0;ac<Jb.length;++ac){var Kc=Jb[ac];Kc.buffer?(Db.enableVertexAttribArray(ac),Db.bindBuffer(34962,Kc.buffer.buffer),Db.vertexAttribPointer(ac,Kc.size,Kc.type,Kc.normalized,Kc.stride,Kc.offset),Cb&&Cb.vertexAttribDivisorANGLE(ac,Kc.divisor)):(Db.disableVertexAttribArray(ac),Db.vertexAttrib4f(ac,Kc.x,Kc.y,Kc.z,Kc.w))}for(Cb=Jb.length;Cb<Gc;++Cb)Db.disableVertexAttribArray(Cb)};
fc.prototype.refresh=function(){var Cb=Yb.oes_vertex_array_object;Cb&&(Cb.bindVertexArrayOES(this.vao),this.bindAttrs(),xb.currentVAO=this)};fc.prototype.destroy=function(){if(this.vao){var Cb=Yb.oes_vertex_array_object;this===xb.currentVAO&&(xb.currentVAO=null,Cb.bindVertexArrayOES(null));Cb.deleteVertexArrayOES(this.vao);this.vao=null}Eb[this.id]&&(delete Eb[this.id],--mc.vaoCount)};return xb}function T(Db,Yb,Fc,mc){function qc(xb,Cb,Jb,ac){this.name=xb;this.id=Cb;this.location=Jb;this.info=ac}
function rc(xb,Cb){for(var Jb=0;Jb<xb.length;++Jb)if(xb[Jb].id===Cb.id){xb[Jb].location=Cb.location;return}xb.push(Cb)}function wb(xb,Cb,Jb){Jb=35632===xb?zc:Gc;var ac=Jb[Cb];if(!ac){var Kc=Yb.str(Cb);ac=Db.createShader(xb);Db.shaderSource(ac,Kc);Db.compileShader(ac);Jb[Cb]=ac}return ac}function zb(xb,Cb){this.id=Eb++;this.fragId=xb;this.vertId=Cb;this.program=null;this.uniforms=[];this.attributes=[];mc.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function fc(xb,Cb,Jb){var ac=wb(35632,
xb.fragId);var Kc=wb(35633,xb.vertId);Cb=xb.program=Db.createProgram();Db.attachShader(Cb,ac);Db.attachShader(Cb,Kc);if(Jb)for(ac=0;ac<Jb.length;++ac)Kc=Jb[ac],Db.bindAttribLocation(Cb,Kc[0],Kc[1]);Db.linkProgram(Cb);Kc=Db.getProgramParameter(Cb,35718);mc.profile&&(xb.stats.uniformsCount=Kc);var vc=xb.uniforms;for(ac=0;ac<Kc;++ac)if(Jb=Db.getActiveUniform(Cb,ac))if(1<Jb.size)for(var Lc=0;Lc<Jb.size;++Lc){var Zc=Jb.name.replace("[0]","["+Lc+"]");rc(vc,new qc(Zc,Yb.id(Zc),Db.getUniformLocation(Cb,Zc),
Jb))}else rc(vc,new qc(Jb.name,Yb.id(Jb.name),Db.getUniformLocation(Cb,Jb.name),Jb));Kc=Db.getProgramParameter(Cb,35721);mc.profile&&(xb.stats.attributesCount=Kc);xb=xb.attributes;for(ac=0;ac<Kc;++ac)(Jb=Db.getActiveAttrib(Cb,ac))&&rc(xb,new qc(Jb.name,Yb.id(Jb.name),Db.getAttribLocation(Cb,Jb.name),Jb))}var zc={},Gc={},$b={},bc=[],Eb=0;mc.profile&&(Fc.getMaxUniformsCount=function(){var xb=0;bc.forEach(function(Cb){Cb.stats.uniformsCount>xb&&(xb=Cb.stats.uniformsCount)});return xb},Fc.getMaxAttributesCount=
function(){var xb=0;bc.forEach(function(Cb){Cb.stats.attributesCount>xb&&(xb=Cb.stats.attributesCount)});return xb});return{clear:function(){var xb=Db.deleteShader.bind(Db);eb(zc).forEach(xb);zc={};eb(Gc).forEach(xb);Gc={};bc.forEach(function(Cb){Db.deleteProgram(Cb.program)});bc.length=0;$b={};Fc.shaderCount=0},program:function(xb,Cb,Jb,ac){var Kc=$b[Cb];Kc||(Kc=$b[Cb]={});var vc=Kc[xb];if(vc&&!ac)return vc;Cb=new zb(Cb,xb);Fc.shaderCount++;fc(Cb,Jb,ac);vc||(Kc[xb]=Cb);bc.push(Cb);return Cb},restore:function(){zc=
{};Gc={};for(var xb=0;xb<bc.length;++xb)fc(bc[xb],null,bc[xb].attributes.map(function(Cb){return[Cb.location,Cb.name]}))},shader:wb,frag:-1,vert:-1}}function V(Db,Yb,Fc,mc,qc,rc,wb){function zb(zc){var Gc=null===Yb.next?5121:Yb.next.colorAttachments[0].texture._texture.type;var $b=0,bc=0,Eb=mc.framebufferWidth,xb=mc.framebufferHeight,Cb=null;Ha(zc)?Cb=zc:zc&&($b=zc.x|0,bc=zc.y|0,Eb=(zc.width||mc.framebufferWidth-$b)|0,xb=(zc.height||mc.framebufferHeight-bc)|0,Cb=zc.data||null);Fc();zc=Eb*xb*4;Cb||
(5121===Gc?Cb=new Uint8Array(zc):5126===Gc&&(Cb=Cb||new Float32Array(zc)));Db.pixelStorei(3333,4);Db.readPixels($b,bc,Eb,xb,6408,Gc,Cb);return Cb}function fc(zc){var Gc;Yb.setFBO({framebuffer:zc.framebuffer},function(){Gc=zb(zc)});return Gc}return function(zc){return zc&&"framebuffer"in zc?fc(zc):zb(zc)}}function aa(Db){return Array.prototype.slice.call(Db)}function ba(Db){return aa(Db).join("")}function Y(){function Db(){var zb=[],fc=[];return ra(function(){zb.push.apply(zb,aa(arguments))},{def:function(){var zc=
"v"+Fc++;fc.push(zc);0<arguments.length&&(zb.push(zc,"\x3d"),zb.push.apply(zb,aa(arguments)),zb.push(";"));return zc},toString:function(){return ba([0<fc.length?"var "+fc.join(",")+";":"",ba(zb)])}})}function Yb(){function zb(bc,Eb){zc(bc,Eb,"\x3d",fc.def(bc,Eb),";")}var fc=Db(),zc=Db(),Gc=fc.toString,$b=zc.toString;return ra(function(){fc.apply(fc,aa(arguments))},{def:fc.def,entry:fc,exit:zc,save:zb,set:function(bc,Eb,xb){zb(bc,Eb);fc(bc,Eb,"\x3d",xb,";")},toString:function(){return Gc()+$b()}})}
var Fc=0,mc=[],qc=[],rc=Db(),wb={};return{global:rc,link:function(zb){for(var fc=0;fc<qc.length;++fc)if(qc[fc]===zb)return mc[fc];fc="g"+Fc++;mc.push(fc);qc.push(zb);return fc},block:Db,proc:function(zb,fc){function zc(){var Eb="a"+Gc.length;Gc.push(Eb);return Eb}var Gc=[];fc=fc||0;for(var $b=0;$b<fc;++$b)zc();$b=Yb();var bc=$b.toString;return wb[zb]=ra($b,{arg:zc,toString:function(){return ba(["function(",Gc.join(),"){",bc(),"}"])}})},scope:Yb,cond:function(){var zb=ba(arguments),fc=Yb(),zc=Yb(),
Gc=fc.toString,$b=zc.toString;return ra(fc,{then:function(){fc.apply(fc,aa(arguments));return this},"else":function(){zc.apply(zc,aa(arguments));return this},toString:function(){var bc=$b();bc&&(bc="else{"+bc+"}");return ba(["if(",zb,"){",Gc(),"}",bc])}})},compile:function(){var zb=['"use strict";',rc,"return {"];Object.keys(wb).forEach(function(zc){zb.push('"',zc,'":',wb[zc].toString(),",")});zb.push("}");var fc=ba(zb).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,
mc.concat(fc)).apply(null,qc)}}}function ea(Db){return Array.isArray(Db)||Ha(Db)||r(Db)}function da(Db){return Db.sort(function(Yb,Fc){return"viewport"===Yb?-1:"viewport"===Fc?1:Yb<Fc?-1:1})}function ca(Db,Yb,Fc,mc){this.thisDep=Db;this.contextDep=Yb;this.propDep=Fc;this.append=mc}function la(Db){return Db&&!(Db.thisDep||Db.contextDep||Db.propDep)}function pa(Db){return new ca(!1,!1,!1,Db)}function qa(Db,Yb){var Fc=Db.type;return 0===Fc?(Fc=Db.data.length,new ca(!0,1<=Fc,2<=Fc,Yb)):4===Fc?(Fc=Db.data,
new ca(Fc.thisDep,Fc.contextDep,Fc.propDep,Yb)):new ca(3===Fc,2===Fc,1===Fc,Yb)}function oa(Db,Yb,Fc,mc,qc,rc,wb,zb,fc,zc,Gc,$b,bc,Eb,xb){function Cb(Nb){return Nb.replace(".","_")}function Jb(Nb,dc,Mc){var cd=Cb(Nb);Bc.push(Nb);Ob[cd]=Ab[cd]=!!Mc;Tc[cd]=dc}function ac(Nb,dc,Mc){var cd=Cb(Nb);Bc.push(Nb);Array.isArray(Mc)?(Ab[cd]=Mc.slice(),Ob[cd]=Mc.slice()):Ab[cd]=Ob[cd]=Mc;jc[cd]=dc}function Kc(){var Nb=Y(),dc=Nb.link,Mc=Nb.global;Nb.id=vd++;Nb.batchId="0";var cd=dc(Oc),Rc=Nb.shared={props:"a0"};
Object.keys(Oc).forEach(function(cc){Rc[cc]=Mc.def(cd,".",cc)});var $c=Nb.next={},Qb=Nb.current={};Object.keys(jc).forEach(function(cc){Array.isArray(Ab[cc])&&($c[cc]=Mc.def(Rc.next,".",cc),Qb[cc]=Mc.def(Rc.current,".",cc))});var oc=Nb.constants={};Object.keys(gd).forEach(function(cc){oc[cc]=Mc.def(JSON.stringify(gd[cc]))});Nb.invoke=function(cc,sc){switch(sc.type){case 0:var jd=["this",Rc.context,Rc.props,Nb.batchId];return cc.def(dc(sc.data),".call(",jd.slice(0,Math.max(sc.data.length+1,4)),")");
case 1:return cc.def(Rc.props,sc.data);case 2:return cc.def(Rc.context,sc.data);case 3:return cc.def("this",sc.data);case 4:return sc.data.append(Nb,cc),sc.data.ref}};Nb.attribCache={};var Cc={};Nb.scopeAttrib=function(cc){cc=Yb.id(cc);if(cc in Cc)return Cc[cc];var sc=zc.scope[cc];sc||(sc=zc.scope[cc]=new pf);return Cc[cc]=dc(sc)};return Nb}function vc(Nb){var dc=Nb["static"];Nb=Nb.dynamic;if("profile"in dc){var Mc=!!dc.profile;var cd=pa(function($c,Qb){return Mc});cd.enable=Mc}else if("profile"in
Nb){var Rc=Nb.profile;cd=qa(Rc,function($c,Qb){return $c.invoke(Qb,Rc)})}return cd}function Lc(Nb,dc){dc=Nb["static"];Nb=Nb.dynamic;if("framebuffer"in dc){var Mc=dc.framebuffer;return Mc?(Mc=zb.getFramebuffer(Mc),pa(function(Rc,$c){var Qb=Rc.link(Mc);Rc=Rc.shared;$c.set(Rc.framebuffer,".next",Qb);Rc=Rc.context;$c.set(Rc,".framebufferWidth",Qb+".width");$c.set(Rc,".framebufferHeight",Qb+".height");return Qb})):pa(function(Rc,$c){Rc=Rc.shared;$c.set(Rc.framebuffer,".next","null");Rc=Rc.context;$c.set(Rc,
".framebufferWidth",Rc+".drawingBufferWidth");$c.set(Rc,".framebufferHeight",Rc+".drawingBufferHeight");return"null"})}if("framebuffer"in Nb){var cd=Nb.framebuffer;return qa(cd,function(Rc,$c){var Qb=Rc.invoke($c,cd);Rc=Rc.shared;var oc=Rc.framebuffer;Qb=$c.def(oc,".getFramebuffer(",Qb,")");$c.set(oc,".next",Qb);Rc=Rc.context;$c.set(Rc,".framebufferWidth",Qb+"?"+Qb+".width:"+Rc+".drawingBufferWidth");$c.set(Rc,".framebufferHeight",Qb+"?"+Qb+".height:"+Rc+".drawingBufferHeight");return Qb})}return null}
function Zc(Nb,dc,Mc){function cd(oc){if(oc in Rc){var Cc=Rc[oc];oc=!0;var cc=Cc.x|0,sc=Cc.y|0,jd,yd;"width"in Cc?jd=Cc.width|0:oc=!1;"height"in Cc?yd=Cc.height|0:oc=!1;return new ca(!oc&&dc&&dc.thisDep,!oc&&dc&&dc.contextDep,!oc&&dc&&dc.propDep,function(Fd,Ed){Fd=Fd.shared.context;var ye=jd;"width"in Cc||(ye=Ed.def(Fd,".","framebufferWidth","-",cc));var ze=yd;"height"in Cc||(ze=Ed.def(Fd,".","framebufferHeight","-",sc));return[cc,sc,ye,ze]})}if(oc in $c){var Id=$c[oc];oc=qa(Id,function(Fd,Ed){var ye=
Fd.invoke(Ed,Id);Fd=Fd.shared.context;var ze=Ed.def(ye,".x|0"),Ne=Ed.def(ye,".y|0"),ue=Ed.def('"width" in ',ye,"?",ye,".width|0:","(",Fd,".","framebufferWidth","-",ze,")");ye=Ed.def('"height" in ',ye,"?",ye,".height|0:","(",Fd,".","framebufferHeight","-",Ne,")");return[ze,Ne,ue,ye]});dc&&(oc.thisDep=oc.thisDep||dc.thisDep,oc.contextDep=oc.contextDep||dc.contextDep,oc.propDep=oc.propDep||dc.propDep);return oc}return dc?new ca(dc.thisDep,dc.contextDep,dc.propDep,function(Fd,Ed){Fd=Fd.shared.context;
return[0,0,Ed.def(Fd,".","framebufferWidth"),Ed.def(Fd,".","framebufferHeight")]}):null}var Rc=Nb["static"],$c=Nb.dynamic;if(Nb=cd("viewport")){var Qb=Nb;Nb=new ca(Nb.thisDep,Nb.contextDep,Nb.propDep,function(oc,Cc){var cc=Qb.append(oc,Cc);oc=oc.shared.context;Cc.set(oc,".viewportWidth",cc[2]);Cc.set(oc,".viewportHeight",cc[3]);return cc})}return{viewport:Nb,scissor_box:cd("scissor.box")}}function Wc(Nb,dc){Nb=Nb["static"];if("string"===typeof Nb.frag&&"string"===typeof Nb.vert){if(0<Object.keys(dc.dynamic).length)return null;
Nb=dc["static"];dc=Object.keys(Nb);if(0<dc.length&&"number"===typeof Nb[dc[0]]){for(var Mc=[],cd=0;cd<dc.length;++cd)Mc.push([Nb[dc[cd]]|0,dc[cd]]);return Mc}}return null}function ld(Nb,dc,Mc){function cd(cc){if(cc in Rc){var sc=Yb.id(Rc[cc]);cc=pa(function(){return sc});cc.id=sc;return cc}if(cc in $c){var jd=$c[cc];return qa(jd,function(yd,Id){var Fd=yd.invoke(Id,jd);return Id.def(yd.shared.strings,".id(",Fd,")")})}return null}var Rc=Nb["static"],$c=Nb.dynamic,Qb=cd("frag"),oc=cd("vert"),Cc=null;
la(Qb)&&la(oc)?(Cc=Gc.program(oc.id,Qb.id,null,Mc),Nb=pa(function(cc,sc){return cc.link(Cc)})):Nb=new ca(Qb&&Qb.thisDep||oc&&oc.thisDep,Qb&&Qb.contextDep||oc&&oc.contextDep,Qb&&Qb.propDep||oc&&oc.propDep,function(cc,sc){var jd=cc.shared.shader;var yd=Qb?Qb.append(cc,sc):sc.def(jd,".","frag");cc=oc?oc.append(cc,sc):sc.def(jd,".","vert");return sc.def(jd+".program("+cc+","+yd+")")});return{frag:Qb,vert:oc,progVar:Nb,program:Cc}}function xd(Nb,dc){function Mc(oc,Cc){if(oc in cd){var cc=cd[oc]|0;return pa(function(jd,
yd){Cc&&(jd.OFFSET=cc);return cc})}if(oc in Rc){var sc=Rc[oc];return qa(sc,function(jd,yd){yd=jd.invoke(yd,sc);Cc&&(jd.OFFSET=yd);return yd})}return Cc&&$c?pa(function(jd,yd){jd.OFFSET="0";return 0}):null}var cd=Nb["static"],Rc=Nb.dynamic,$c=function(){if("elements"in cd){var oc=cd.elements;ea(oc)?oc=rc.getElements(rc.create(oc,!0)):oc&&(oc=rc.getElements(oc));var Cc=pa(function(sc,jd){return oc?(jd=sc.link(oc),sc.ELEMENTS=jd):sc.ELEMENTS=null});Cc.value=oc;return Cc}if("elements"in Rc){var cc=Rc.elements;
return qa(cc,function(sc,jd){var yd=sc.shared,Id=yd.isBufferArgs;yd=yd.elements;var Fd=sc.invoke(jd,cc),Ed=jd.def("null");Id=jd.def(Id,"(",Fd,")");Fd=sc.cond(Id).then(Ed,"\x3d",yd,".createStream(",Fd,");")["else"](Ed,"\x3d",yd,".getElements(",Fd,");");jd.entry(Fd);jd.exit(sc.cond(Id).then(yd,".destroyStream(",Ed,");"));return sc.ELEMENTS=Ed})}return null}(),Qb=Mc("offset",!0);return{elements:$c,primitive:function(){if("primitive"in cd){var oc=cd.primitive;return pa(function(cc,sc){return Ka[oc]})}if("primitive"in
Rc){var Cc=Rc.primitive;return qa(Cc,function(cc,sc){var jd=cc.constants.primTypes;cc=cc.invoke(sc,Cc);return sc.def(jd,"[",cc,"]")})}return $c?la($c)?$c.value?pa(function(cc,sc){return sc.def(cc.ELEMENTS,".primType")}):pa(function(){return 4}):new ca($c.thisDep,$c.contextDep,$c.propDep,function(cc,sc){cc=cc.ELEMENTS;return sc.def(cc,"?",cc,".primType:",4)}):null}(),count:function(){if("count"in cd){var oc=cd.count|0;return pa(function(){return oc})}if("count"in Rc){var Cc=Rc.count;return qa(Cc,function(cc,
sc){return cc.invoke(sc,Cc)})}return $c?la($c)?$c?Qb?new ca(Qb.thisDep,Qb.contextDep,Qb.propDep,function(cc,sc){return sc.def(cc.ELEMENTS,".vertCount-",cc.OFFSET)}):pa(function(cc,sc){return sc.def(cc.ELEMENTS,".vertCount")}):pa(function(){return-1}):new ca($c.thisDep||Qb.thisDep,$c.contextDep||Qb.contextDep,$c.propDep||Qb.propDep,function(cc,sc){var jd=cc.ELEMENTS;return cc.OFFSET?sc.def(jd,"?",jd,".vertCount-",cc.OFFSET,":-1"):sc.def(jd,"?",jd,".vertCount:-1")}):null}(),instances:Mc("instances",
!1),offset:Qb}}function hd(Nb,dc){var Mc=Nb["static"],cd=Nb.dynamic,Rc={};Bc.forEach(function($c){function Qb(Cc,cc){if($c in Mc){var sc=Cc(Mc[$c]);Rc[oc]=pa(function(){return sc})}else if($c in cd){var jd=cd[$c];Rc[oc]=qa(jd,function(yd,Id){return cc(yd,Id,yd.invoke(Id,jd))})}}var oc=Cb($c);switch($c){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return Qb(function(Cc){return Cc},
function(Cc,cc,sc){return sc});case "depth.func":return Qb(function(Cc){return ad[Cc]},function(Cc,cc,sc){return cc.def(Cc.constants.compareFuncs,"[",sc,"]")});case "depth.range":return Qb(function(Cc){return Cc},function(Cc,cc,sc){Cc=cc.def("+",sc,"[0]");cc=cc.def("+",sc,"[1]");return[Cc,cc]});case "blend.func":return Qb(function(Cc){return[Ac["srcRGB"in Cc?Cc.srcRGB:Cc.src],Ac["dstRGB"in Cc?Cc.dstRGB:Cc.dst],Ac["srcAlpha"in Cc?Cc.srcAlpha:Cc.src],Ac["dstAlpha"in Cc?Cc.dstAlpha:Cc.dst]]},function(Cc,
cc,sc){function jd(Ed,ye){return cc.def('"',Ed,ye,'" in ',sc,"?",sc,".",Ed,ye,":",sc,".",Ed)}Cc=Cc.constants.blendFuncs;var yd=jd("src","RGB"),Id=jd("dst","RGB");yd=cc.def(Cc,"[",yd,"]");var Fd=cc.def(Cc,"[",jd("src","Alpha"),"]");Id=cc.def(Cc,"[",Id,"]");Cc=cc.def(Cc,"[",jd("dst","Alpha"),"]");return[yd,Id,Fd,Cc]});case "blend.equation":return Qb(function(Cc){if("string"===typeof Cc)return[$e[Cc],$e[Cc]];if("object"===typeof Cc)return[$e[Cc.rgb],$e[Cc.alpha]]},function(Cc,cc,sc){var jd=Cc.constants.blendEquations,
yd=cc.def(),Id=cc.def();Cc=Cc.cond("typeof ",sc,'\x3d\x3d\x3d"string"');Cc.then(yd,"\x3d",Id,"\x3d",jd,"[",sc,"];");Cc["else"](yd,"\x3d",jd,"[",sc,".rgb];",Id,"\x3d",jd,"[",sc,".alpha];");cc(Cc);return[yd,Id]});case "blend.color":return Qb(function(Cc){return e(4,function(cc){return+Cc[cc]})},function(Cc,cc,sc){return e(4,function(jd){return cc.def("+",sc,"[",jd,"]")})});case "stencil.mask":return Qb(function(Cc){return Cc|0},function(Cc,cc,sc){return cc.def(sc,"|0")});case "stencil.func":return Qb(function(Cc){return[ad[Cc.cmp||
"keep"],Cc.ref||0,"mask"in Cc?Cc.mask:-1]},function(Cc,cc,sc){Cc=cc.def('"cmp" in ',sc,"?",Cc.constants.compareFuncs,"[",sc,".cmp]",":",7680);var jd=cc.def(sc,".ref|0");cc=cc.def('"mask" in ',sc,"?",sc,".mask|0:-1");return[Cc,jd,cc]});case "stencil.opFront":case "stencil.opBack":return Qb(function(Cc){return["stencil.opBack"===$c?1029:1028,Nc[Cc.fail||"keep"],Nc[Cc.zfail||"keep"],Nc[Cc.zpass||"keep"]]},function(Cc,cc,sc){function jd(Id){return cc.def('"',Id,'" in ',sc,"?",yd,"[",sc,".",Id,"]:",7680)}
var yd=Cc.constants.stencilOps;return["stencil.opBack"===$c?1029:1028,jd("fail"),jd("zfail"),jd("zpass")]});case "polygonOffset.offset":return Qb(function(Cc){return[Cc.factor|0,Cc.units|0]},function(Cc,cc,sc){Cc=cc.def(sc,".factor|0");cc=cc.def(sc,".units|0");return[Cc,cc]});case "cull.face":return Qb(function(Cc){var cc=0;"front"===Cc?cc=1028:"back"===Cc&&(cc=1029);return cc},function(Cc,cc,sc){return cc.def(sc,'\x3d\x3d\x3d"front"?',1028,":",1029)});case "lineWidth":return Qb(function(Cc){return Cc},
function(Cc,cc,sc){return sc});case "frontFace":return Qb(function(Cc){return ed[Cc]},function(Cc,cc,sc){return cc.def(sc+'\x3d\x3d\x3d"cw"?2304:2305')});case "colorMask":return Qb(function(Cc){return Cc.map(function(cc){return!!cc})},function(Cc,cc,sc){return e(4,function(jd){return"!!"+sc+"["+jd+"]"})});case "sample.coverage":return Qb(function(Cc){return["value"in Cc?Cc.value:1,!!Cc.invert]},function(Cc,cc,sc){Cc=cc.def('"value" in ',sc,"?+",sc,".value:1");cc=cc.def("!!",sc,".invert");return[Cc,
cc]})}});return Rc}function Cd(Nb,dc){var Mc=Nb["static"],cd=Nb.dynamic,Rc={};Object.keys(Mc).forEach(function($c){var Qb=Mc[$c];if("number"===typeof Qb||"boolean"===typeof Qb)var oc=pa(function(){return Qb});else if("function"===typeof Qb){var Cc=Qb._reglType;if("texture2d"===Cc||"textureCube"===Cc)oc=pa(function(cc){return cc.link(Qb)});else if("framebuffer"===Cc||"framebufferCube"===Cc)oc=pa(function(cc){return cc.link(Qb.color[0])})}else t(Qb)&&(oc=pa(function(cc){return cc.global.def("[",e(Qb.length,
function(sc){return Qb[sc]}),"]")}));oc.value=Qb;Rc[$c]=oc});Object.keys(cd).forEach(function($c){var Qb=cd[$c];Rc[$c]=qa(Qb,function(oc,Cc){return oc.invoke(Cc,Qb)})});return Rc}function Kd(Nb,dc){var Mc=Nb["static"],cd=Nb.dynamic,Rc={};Object.keys(Mc).forEach(function($c){var Qb=Mc[$c],oc=Yb.id($c),Cc=new pf;if(ea(Qb))Cc.state=1,Cc.buffer=qc.getBuffer(qc.create(Qb,34962,!1,!0)),Cc.type=0;else{var cc=qc.getBuffer(Qb);if(cc)Cc.state=1,Cc.buffer=cc,Cc.type=0;else if("constant"in Qb){var sc=Qb.constant;
Cc.buffer="null";Cc.state=2;"number"===typeof sc?Cc.x=sc:Vb.forEach(function(ye,ze){ze<sc.length&&(Cc[ye]=sc[ze])})}else{cc=ea(Qb.buffer)?qc.getBuffer(qc.create(Qb.buffer,34962,!1,!0)):qc.getBuffer(Qb.buffer);var jd=Qb.offset|0,yd=Qb.stride|0,Id=Qb.size|0,Fd=!!Qb.normalized,Ed=0;"type"in Qb&&(Ed=ib[Qb.type]);Qb=Qb.divisor|0;Cc.buffer=cc;Cc.state=1;Cc.size=Id;Cc.normalized=Fd;Cc.type=Ed||cc.dtype;Cc.offset=jd;Cc.stride=yd;Cc.divisor=Qb}}Rc[$c]=pa(function(ye,ze){ze=ye.attribCache;if(oc in ze)return ze[oc];
var Ne={isStream:!1};Object.keys(Cc).forEach(function(ue){Ne[ue]=Cc[ue]});Cc.buffer&&(Ne.buffer=ye.link(Cc.buffer),Ne.type=Ne.type||Ne.buffer+".dtype");return ze[oc]=Ne})});Object.keys(cd).forEach(function($c){var Qb=cd[$c];Rc[$c]=qa(Qb,function(oc,Cc){function cc(ze){Cc(Id[ze],"\x3d",sc,".",ze,"|0;")}var sc=oc.invoke(Cc,Qb),jd=oc.shared;oc=oc.constants;var yd=jd.isBufferArgs;jd=jd.buffer;var Id={isStream:Cc.def(!1)},Fd=new pf;Fd.state=1;Object.keys(Fd).forEach(function(ze){Id[ze]=Cc.def(""+Fd[ze])});
var Ed=Id.buffer,ye=Id.type;Cc("if(",yd,"(",sc,")){",Id.isStream,"\x3dtrue;",Ed,"\x3d",jd,".createStream(",34962,",",sc,");",ye,"\x3d",Ed,".dtype;","}else{",Ed,"\x3d",jd,".getBuffer(",sc,");","if(",Ed,"){",ye,"\x3d",Ed,".dtype;",'}else if("constant" in ',sc,"){",Id.state,"\x3d",2,";","if(typeof "+sc+'.constant \x3d\x3d\x3d "number"){',Id[Vb[0]],"\x3d",sc,".constant;",Vb.slice(1).map(function(ze){return Id[ze]}).join("\x3d"),"\x3d0;","}else{",Vb.map(function(ze,Ne){return Id[ze]+"\x3d"+sc+".constant.length\x3e"+
Ne+"?"+sc+".constant["+Ne+"]:0;"}).join(""),"}}else{","if(",yd,"(",sc,".buffer)){",Ed,"\x3d",jd,".createStream(",34962,",",sc,".buffer);","}else{",Ed,"\x3d",jd,".getBuffer(",sc,".buffer);","}",ye,'\x3d"type" in ',sc,"?",oc.glTypes,"[",sc,".type]:",Ed,".dtype;",Id.normalized,"\x3d!!",sc,".normalized;");cc("size");cc("offset");cc("stride");cc("divisor");Cc("}}");Cc.exit("if(",Id.isStream,"){",jd,".destroyStream(",Ed,");","}");return Id})});return Rc}function pd(Nb,dc){dc=Nb["static"];Nb=Nb.dynamic;
if("vao"in dc){var Mc=dc.vao;null!==Mc&&null===zc.getVAO(Mc)&&(Mc=zc.createVAO(Mc));return pa(function(Rc){return Rc.link(zc.getVAO(Mc))})}if("vao"in Nb){var cd=Nb.vao;return qa(cd,function(Rc,$c){var Qb=Rc.invoke($c,cd);return $c.def(Rc.shared.vao+".getVAO("+Qb+")")})}return null}function Yc(Nb){var dc=Nb["static"],Mc=Nb.dynamic,cd={};Object.keys(dc).forEach(function(Rc){var $c=dc[Rc];cd[Rc]=pa(function(Qb,oc){return"number"===typeof $c||"boolean"===typeof $c?""+$c:Qb.link($c)})});Object.keys(Mc).forEach(function(Rc){var $c=
Mc[Rc];cd[Rc]=qa($c,function(Qb,oc){return Qb.invoke(oc,$c)})});return cd}function Dd(Nb,dc,Mc,cd,Rc){function $c(Ed){var ye=Cc[Ed];ye&&(sc[Ed]=ye)}var Qb=Wc(Nb,dc),oc=Lc(Nb,Rc),Cc=Zc(Nb,oc,Rc),cc=xd(Nb,Rc),sc=hd(Nb,Rc),jd=ld(Nb,Rc,Qb);$c("viewport");$c(Cb("scissor.box"));var yd=0<Object.keys(sc).length;oc={framebuffer:oc,draw:cc,shader:jd,state:sc,dirty:yd,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};oc.profile=vc(Nb,Rc);oc.uniforms=Cd(Mc,Rc);oc.drawVAO=oc.scopeVAO=pd(Nb,Rc);if(!oc.drawVAO&&
jd.program&&!Qb&&Fc.angle_instanced_arrays){var Id=!0;Nb=jd.program.attributes.map(function(Ed){Ed=dc["static"][Ed];Id=Id&&!!Ed;return Ed});if(Id&&0<Nb.length){var Fd=zc.getVAO(zc.createVAO(Nb));oc.drawVAO=new ca(null,null,null,function(Ed,ye){return Ed.link(Fd)});oc.useVAO=!0}}Qb?oc.useVAO=!0:oc.attributes=Kd(dc,Rc);oc.context=Yc(cd,Rc);return oc}function Jd(Nb,dc,Mc){var cd=Nb.shared.context,Rc=Nb.scope();Object.keys(Mc).forEach(function($c){dc.save(cd,"."+$c);Rc(cd,".",$c,"\x3d",Mc[$c].append(Nb,
dc),";")});dc(Rc)}function Ld(Nb,dc,Mc,cd){var Rc=Nb.shared,$c=Rc.gl,Qb=Rc.framebuffer,oc;Gb&&(oc=dc.def(Rc.extensions,".webgl_draw_buffers"));var Cc=Nb.constants;Rc=Cc.drawBuffer;Cc=Cc.backBuffer;Nb=Mc?Mc.append(Nb,dc):dc.def(Qb,".next");cd||dc("if(",Nb,"!\x3d\x3d",Qb,".cur){");dc("if(",Nb,"){",$c,".bindFramebuffer(",36160,",",Nb,".framebuffer);");Gb&&dc(oc,".drawBuffersWEBGL(",Rc,"[",Nb,".colorAttachments.length]);");dc("}else{",$c,".bindFramebuffer(",36160,",null);");Gb&&dc(oc,".drawBuffersWEBGL(",
Cc,");");dc("}",Qb,".cur\x3d",Nb,";");cd||dc("}")}function Ce(Nb,dc,Mc){var cd=Nb.shared,Rc=cd.gl,$c=Nb.current,Qb=Nb.next,oc=cd.current,Cc=cd.next,cc=Nb.cond(oc,".dirty");Bc.forEach(function(sc){sc=Cb(sc);if(!(sc in Mc.state))if(sc in Qb){var jd=Qb[sc];var yd=$c[sc];var Id=e(Ab[sc].length,function(Fd){return cc.def(jd,"[",Fd,"]")});cc(Nb.cond(Id.map(function(Fd,Ed){return Fd+"!\x3d\x3d"+yd+"["+Ed+"]"}).join("||")).then(Rc,".",jc[sc],"(",Id,");",Id.map(function(Fd,Ed){return yd+"["+Ed+"]\x3d"+Fd}).join(";"),
";"))}else jd=cc.def(Cc,".",sc),Id=Nb.cond(jd,"!\x3d\x3d",oc,".",sc),cc(Id),sc in Tc?Id(Nb.cond(jd).then(Rc,".enable(",Tc[sc],");")["else"](Rc,".disable(",Tc[sc],");"),oc,".",sc,"\x3d",jd,";"):Id(Rc,".",jc[sc],"(",jd,");",oc,".",sc,"\x3d",jd,";")});0===Object.keys(Mc.state).length&&cc(oc,".dirty\x3dfalse;");dc(cc)}function Rd(Nb,dc,Mc,cd){var Rc=Nb.shared,$c=Nb.current,Qb=Rc.current,oc=Rc.gl;da(Object.keys(Mc)).forEach(function(Cc){var cc=Mc[Cc];if(!cd||cd(cc)){var sc=cc.append(Nb,dc);if(Tc[Cc]){var jd=
Tc[Cc];la(cc)?sc?dc(oc,".enable(",jd,");"):dc(oc,".disable(",jd,");"):dc(Nb.cond(sc).then(oc,".enable(",jd,");")["else"](oc,".disable(",jd,");"));dc(Qb,".",Cc,"\x3d",sc,";")}else if(t(sc)){var yd=$c[Cc];dc(oc,".",jc[Cc],"(",sc,");",sc.map(function(Id,Fd){return yd+"["+Fd+"]\x3d"+Id}).join(";"),";")}else dc(oc,".",jc[Cc],"(",sc,");",Qb,".",Cc,"\x3d",sc,";")}})}function Sc(Nb,dc){Ra&&(Nb.instancing=dc.def(Nb.shared.extensions,".angle_instanced_arrays"))}function md(Nb,dc,Mc,cd,Rc){function $c(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function Qb(Ed){Id=dc.def();Ed(Id,"\x3d",$c(),";");"string"===typeof Rc?Ed(sc,".count+\x3d",Rc,";"):Ed(sc,".count++;");Eb&&(cd?(Fd=dc.def(),Ed(Fd,"\x3d",yd,".getNumPendingQueries();")):Ed(yd,".beginQuery(",sc,");"))}function oc(Ed){Ed(sc,".cpuTime+\x3d",$c(),"-",Id,";");Eb&&(cd?Ed(yd,".pushScopeStats(",Fd,",",yd,".getNumPendingQueries(),",sc,");"):Ed(yd,".endQuery();"))}function Cc(Ed){var ye=dc.def(jd,".profile");dc(jd,".profile\x3d",Ed,";");dc.exit(jd,
".profile\x3d",ye,";")}var cc=Nb.shared,sc=Nb.stats,jd=cc.current,yd=cc.timer;Mc=Mc.profile;var Id,Fd;if(Mc){if(la(Mc)){Mc.enable?(Qb(dc),oc(dc.exit),Cc("true")):Cc("false");return}Mc=Mc.append(Nb,dc);Cc(Mc)}else Mc=dc.def(jd,".profile");cc=Nb.block();Qb(cc);dc("if(",Mc,"){",cc,"}");Nb=Nb.block();oc(Nb);dc.exit("if(",Mc,"){",Nb,"}")}function Gd(Nb,dc,Mc,cd,Rc){function $c(Cc){switch(Cc){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;
default:return 1}}function Qb(Cc,cc,sc){function jd(){dc("if(!",Ed,".buffer){",Id,".enableVertexAttribArray(",Fd,");}");var ue=sc.type;var Ke=sc.size?dc.def(sc.size,"||",cc):cc;dc("if(",Ed,".type!\x3d\x3d",ue,"||",Ed,".size!\x3d\x3d",Ke,"||",Ne.map(function(mf){return Ed+"."+mf+"!\x3d\x3d"+sc[mf]}).join("||"),"){",Id,".bindBuffer(",34962,",",ye,".buffer);",Id,".vertexAttribPointer(",[Fd,Ke,ue,sc.normalized,sc.stride,sc.offset],");",Ed,".type\x3d",ue,";",Ed,".size\x3d",Ke,";",Ne.map(function(mf){return Ed+
"."+mf+"\x3d"+sc[mf]+";"}).join(""),"}");Ra&&(ue=sc.divisor,dc("if(",Ed,".divisor!\x3d\x3d",ue,"){",Nb.instancing,".vertexAttribDivisorANGLE(",[Fd,ue],");",Ed,".divisor\x3d",ue,";}"))}function yd(){dc("if(",Ed,".buffer){",Id,".disableVertexAttribArray(",Fd,");",Ed,".buffer\x3dnull;","}if(",Vb.map(function(ue,Ke){return Ed+"."+ue+"!\x3d\x3d"+ze[Ke]}).join("||"),"){",Id,".vertexAttrib4f(",Fd,",",ze,");",Vb.map(function(ue,Ke){return Ed+"."+ue+"\x3d"+ze[Ke]+";"}).join(""),"}")}var Id=oc.gl,Fd=dc.def(Cc,
".location"),Ed=dc.def(oc.attributes,"[",Fd,"]");Cc=sc.state;var ye=sc.buffer,ze=[sc.x,sc.y,sc.z,sc.w],Ne=["buffer","normalized","offset","stride"];1===Cc?jd():2===Cc?yd():(dc("if(",Cc,"\x3d\x3d\x3d",1,"){"),jd(),dc("}else{"),yd(),dc("}"))}var oc=Nb.shared;cd.forEach(function(Cc){var cc=Cc.name,sc=Mc.attributes[cc];if(sc){if(!Rc(sc))return;var jd=sc.append(Nb,dc)}else{if(!Rc(Pc))return;var yd=Nb.scopeAttrib(cc);jd={};Object.keys(new pf).forEach(function(Id){jd[Id]=dc.def(yd,".",Id)})}Qb(Nb.link(Cc),
$c(Cc.info.type),jd)})}function Md(Nb,dc,Mc,cd,Rc){for(var $c=Nb.shared,Qb=$c.gl,oc,Cc=0;Cc<cd.length;++Cc){var cc=cd[Cc],sc=cc.name,jd=cc.info.type,yd=Mc.uniforms[sc];cc=Nb.link(cc)+".location";if(yd){if(!Rc(yd))continue;if(la(yd)){sc=yd.value;if(35678===jd||35680===jd)jd=Nb.link(sc._texture||sc.color[0]._texture),dc(Qb,".uniform1i(",cc,",",jd+".bind());"),dc.exit(jd,".unbind();");else if(35674===jd||35675===jd||35676===jd)sc=Nb.global.def("new Float32Array(["+Array.prototype.slice.call(sc)+"])"),
yd=2,35675===jd?yd=3:35676===jd&&(yd=4),dc(Qb,".uniformMatrix",yd,"fv(",cc,",false,",sc,");");else{switch(jd){case 5126:oc="1f";break;case 35664:oc="2f";break;case 35665:oc="3f";break;case 35666:oc="4f";break;case 35670:oc="1i";break;case 5124:oc="1i";break;case 35671:oc="2i";break;case 35667:oc="2i";break;case 35672:oc="3i";break;case 35668:oc="3i";break;case 35673:oc="4i";break;case 35669:oc="4i"}dc(Qb,".uniform",oc,"(",cc,",",t(sc)?Array.prototype.slice.call(sc):sc,");")}continue}else var Id=yd.append(Nb,
dc)}else{if(!Rc(Pc))continue;Id=dc.def($c.uniforms,"[",Yb.id(sc),"]")}35678===jd?dc("if(",Id,"\x26\x26",Id,'._reglType\x3d\x3d\x3d"framebuffer"){',Id,"\x3d",Id,".color[0];","}"):35680===jd&&dc("if(",Id,"\x26\x26",Id,'._reglType\x3d\x3d\x3d"framebufferCube"){',Id,"\x3d",Id,".color[0];","}");sc=1;switch(jd){case 35678:case 35680:jd=dc.def(Id,"._texture");dc(Qb,".uniform1i(",cc,",",jd,".bind());");dc.exit(jd,".unbind();");continue;case 5124:case 35670:oc="1i";break;case 35667:case 35671:oc="2i";sc=2;
break;case 35668:case 35672:oc="3i";sc=3;break;case 35669:case 35673:oc="4i";sc=4;break;case 5126:oc="1f";break;case 35664:oc="2f";sc=2;break;case 35665:oc="3f";sc=3;break;case 35666:oc="4f";sc=4;break;case 35674:oc="Matrix2fv";break;case 35675:oc="Matrix3fv";break;case 35676:oc="Matrix4fv"}dc(Qb,".uniform",oc,"(",cc,",");if("M"===oc.charAt(0)){cc=Math.pow(jd-35674+2,2);var Fd=Nb.global.def("new Float32Array(",cc,")");dc("false,(Array.isArray(",Id,")||",Id," instanceof Float32Array)?",Id,":(",e(cc,
function(Ed){return Fd+"["+Ed+"]\x3d"+Id+"["+Ed+"]"}),",",Fd,")")}else 1<sc?dc(e(sc,function(Ed){return Id+"["+Ed+"]"})):dc(Id);dc(");")}}function me(Nb,dc,Mc,cd){function Rc(ue){var Ke=sc[ue];return Ke?Ke.contextDep&&cd.contextDynamic||Ke.propDep?Ke.append(Nb,Mc):Ke.append(Nb,dc):dc.def(cc,".",ue)}function $c(){function ue(){Mc(ye,".drawElementsInstancedANGLE(",[yd,Fd,ze,Id+"\x3c\x3c(("+ze+"-5121)\x3e\x3e1)",Ed],");")}function Ke(){Mc(ye,".drawArraysInstancedANGLE(",[yd,Id,Fd,Ed],");")}jd?Ne?ue():
(Mc("if(",jd,"){"),ue(),Mc("}else{"),Ke(),Mc("}")):Ke()}function Qb(){function ue(){Mc(Cc+".drawElements("+[yd,Fd,ze,Id+"\x3c\x3c(("+ze+"-5121)\x3e\x3e1)"]+");")}function Ke(){Mc(Cc+".drawArrays("+[yd,Id,Fd]+");")}jd?Ne?ue():(Mc("if(",jd,"){"),ue(),Mc("}else{"),Ke(),Mc("}")):Ke()}var oc=Nb.shared,Cc=oc.gl,cc=oc.draw,sc=cd.draw,jd=function(){var ue=sc.elements,Ke=dc;if(ue){if(ue.contextDep&&cd.contextDynamic||ue.propDep)Ke=Mc;ue=ue.append(Nb,Ke)}else ue=Ke.def(cc,".","elements");ue&&Ke("if("+ue+")"+
Cc+".bindBuffer(34963,"+ue+".buffer.buffer);");return ue}(),yd=Rc("primitive"),Id=Rc("offset"),Fd=function(){var ue=sc.count,Ke=dc;if(ue){if(ue.contextDep&&cd.contextDynamic||ue.propDep)Ke=Mc;ue=ue.append(Nb,Ke)}else ue=Ke.def(cc,".","count");return ue}();if("number"===typeof Fd){if(0===Fd)return}else Mc("if(",Fd,"){"),Mc.exit("}");var Ed,ye;Ra&&(Ed=Rc("instances"),ye=Nb.instancing);var ze=jd+".type",Ne=sc.elements&&la(sc.elements);Ra&&("number"!==typeof Ed||0<=Ed)?"string"===typeof Ed?(Mc("if(",
Ed,"\x3e0){"),$c(),Mc("}else if(",Ed,"\x3c0){"),Qb(),Mc("}")):$c():Qb()}function xe(Nb,dc,Mc,cd,Rc){dc=Kc();Rc=dc.proc("body",Rc);Ra&&(dc.instancing=Rc.def(dc.shared.extensions,".angle_instanced_arrays"));Nb(dc,Rc,Mc,cd);return dc.compile().body}function Wd(Nb,dc,Mc,cd){Sc(Nb,dc);Mc.useVAO?Mc.drawVAO?dc(Nb.shared.vao,".setVAO(",Mc.drawVAO.append(Nb,dc),");"):dc(Nb.shared.vao,".setVAO(",Nb.shared.vao,".targetVAO);"):(dc(Nb.shared.vao,".setVAO(null);"),Gd(Nb,dc,Mc,cd.attributes,function(){return!0}));
Md(Nb,dc,Mc,cd.uniforms,function(){return!0});me(Nb,dc,dc,Mc)}function Qd(Nb,dc){var Mc=Nb.proc("draw",1);Sc(Nb,Mc);Jd(Nb,Mc,dc.context);Ld(Nb,Mc,dc.framebuffer);Ce(Nb,Mc,dc);Rd(Nb,Mc,dc.state);md(Nb,Mc,dc,!1,!0);var cd=dc.shader.progVar.append(Nb,Mc);Mc(Nb.shared.gl,".useProgram(",cd,".program);");if(dc.shader.program)Wd(Nb,Mc,dc,dc.shader.program);else{Mc(Nb.shared.vao,".setVAO(null);");var Rc=Nb.global.def("{}"),$c=Mc.def(cd,".id"),Qb=Mc.def(Rc,"[",$c,"]");Mc(Nb.cond(Qb).then(Qb,".call(this,a0);")["else"](Qb,
"\x3d",Rc,"[",$c,"]\x3d",Nb.link(function(oc){return xe(Wd,Nb,dc,oc,1)}),"(",cd,");",Qb,".call(this,a0);"))}0<Object.keys(dc.state).length&&Mc(Nb.shared.current,".dirty\x3dtrue;")}function Ae(Nb,dc,Mc,cd){function Rc(){return!0}Nb.batchId="a1";Sc(Nb,dc);Gd(Nb,dc,Mc,cd.attributes,Rc);Md(Nb,dc,Mc,cd.uniforms,Rc);me(Nb,dc,dc,Mc)}function Be(Nb,dc,Mc,cd){function Rc(jd){return jd.contextDep&&Qb||jd.propDep}function $c(jd){return!Rc(jd)}Sc(Nb,dc);var Qb=Mc.contextDep,oc=dc.def(),Cc=dc.def();Nb.shared.props=
Cc;Nb.batchId=oc;var cc=Nb.scope(),sc=Nb.scope();dc(cc.entry,"for(",oc,"\x3d0;",oc,"\x3c","a1",";++",oc,"){",Cc,"\x3d","a0","[",oc,"];",sc,"}",cc.exit);Mc.needsContext&&Jd(Nb,sc,Mc.context);Mc.needsFramebuffer&&Ld(Nb,sc,Mc.framebuffer);Rd(Nb,sc,Mc.state,Rc);Mc.profile&&Rc(Mc.profile)&&md(Nb,sc,Mc,!1,!0);cd?(Mc.useVAO?Mc.drawVAO?Rc(Mc.drawVAO)?sc(Nb.shared.vao,".setVAO(",Mc.drawVAO.append(Nb,sc),");"):cc(Nb.shared.vao,".setVAO(",Mc.drawVAO.append(Nb,cc),");"):cc(Nb.shared.vao,".setVAO(",Nb.shared.vao,
".targetVAO);"):(cc(Nb.shared.vao,".setVAO(null);"),Gd(Nb,cc,Mc,cd.attributes,$c),Gd(Nb,sc,Mc,cd.attributes,Rc)),Md(Nb,cc,Mc,cd.uniforms,$c),Md(Nb,sc,Mc,cd.uniforms,Rc),me(Nb,cc,sc,Mc)):(dc=Nb.global.def("{}"),cd=Mc.shader.progVar.append(Nb,sc),Cc=sc.def(cd,".id"),cc=sc.def(dc,"[",Cc,"]"),sc(Nb.shared.gl,".useProgram(",cd,".program);","if(!",cc,"){",cc,"\x3d",dc,"[",Cc,"]\x3d",Nb.link(function(jd){return xe(Ae,Nb,Mc,jd,2)}),"(",cd,");}",cc,".call(this,a0[",oc,"],",oc,");"))}function Ge(Nb,dc){function Mc(cc){return cc.contextDep&&
Rc||cc.propDep}var cd=Nb.proc("batch",2);Nb.batchId="0";Sc(Nb,cd);var Rc=!1,$c=!0;Object.keys(dc.context).forEach(function(cc){Rc=Rc||dc.context[cc].propDep});Rc||(Jd(Nb,cd,dc.context),$c=!1);var Qb=dc.framebuffer,oc=!1;Qb?(Qb.propDep?Rc=oc=!0:Qb.contextDep&&Rc&&(oc=!0),oc||Ld(Nb,cd,Qb)):Ld(Nb,cd,null);dc.state.viewport&&dc.state.viewport.propDep&&(Rc=!0);Ce(Nb,cd,dc);Rd(Nb,cd,dc.state,function(cc){return!Mc(cc)});dc.profile&&Mc(dc.profile)||md(Nb,cd,dc,!1,"a1");dc.contextDep=Rc;dc.needsContext=$c;
dc.needsFramebuffer=oc;$c=dc.shader.progVar;if($c.contextDep&&Rc||$c.propDep)Be(Nb,cd,dc,null);else if($c=$c.append(Nb,cd),cd(Nb.shared.gl,".useProgram(",$c,".program);"),dc.shader.program)Be(Nb,cd,dc,dc.shader.program);else{cd(Nb.shared.vao,".setVAO(null);");Qb=Nb.global.def("{}");oc=cd.def($c,".id");var Cc=cd.def(Qb,"[",oc,"]");cd(Nb.cond(Cc).then(Cc,".call(this,a0,a1);")["else"](Cc,"\x3d",Qb,"[",oc,"]\x3d",Nb.link(function(cc){return xe(Be,Nb,dc,cc,2)}),"(",$c,");",Cc,".call(this,a0,a1);"))}0<
Object.keys(dc.state).length&&cd(Nb.shared.current,".dirty\x3dtrue;")}function Ue(Nb,dc){function Mc(Qb){var oc=dc.shader[Qb];oc&&cd.set(Rc.shader,"."+Qb,oc.append(Nb,cd))}var cd=Nb.proc("scope",3);Nb.batchId="a2";var Rc=Nb.shared,$c=Rc.current;Jd(Nb,cd,dc.context);dc.framebuffer&&dc.framebuffer.append(Nb,cd);da(Object.keys(dc.state)).forEach(function(Qb){var oc=dc.state[Qb].append(Nb,cd);t(oc)?oc.forEach(function(Cc,cc){cd.set(Nb.next[Qb],"["+cc+"]",Cc)}):cd.set(Rc.next,"."+Qb,oc)});md(Nb,cd,dc,
!0,!0);["elements","offset","count","instances","primitive"].forEach(function(Qb){var oc=dc.draw[Qb];oc&&cd.set(Rc.draw,"."+Qb,""+oc.append(Nb,cd))});Object.keys(dc.uniforms).forEach(function(Qb){cd.set(Rc.uniforms,"["+Yb.id(Qb)+"]",dc.uniforms[Qb].append(Nb,cd))});Object.keys(dc.attributes).forEach(function(Qb){var oc=dc.attributes[Qb].append(Nb,cd),Cc=Nb.scopeAttrib(Qb);Object.keys(new pf).forEach(function(cc){cd.set(Cc,"."+cc,oc[cc])})});dc.scopeVAO&&cd.set(Rc.vao,".targetVAO",dc.scopeVAO.append(Nb,
cd));Mc("vert");Mc("frag");0<Object.keys(dc.state).length&&(cd($c,".dirty\x3dtrue;"),cd.exit($c,".dirty\x3dtrue;"));cd("a1(",Nb.shared.context,",a0,",Nb.batchId,");")}function uf(Nb){if("object"===typeof Nb&&!t(Nb)){for(var dc=Object.keys(Nb),Mc=0;Mc<dc.length;++Mc)if(ma.isDynamic(Nb[dc[Mc]]))return!0;return!1}}function hf(Nb,dc,Mc){function cd(jd,yd){Qb.forEach(function(Id){var Fd=Rc[Id];ma.isDynamic(Fd)&&(Fd=jd.invoke(yd,Fd),yd(sc,".",Id,"\x3d",Fd,";"))})}var Rc=dc["static"][Mc];if(Rc&&uf(Rc)){var $c=
Nb.global,Qb=Object.keys(Rc),oc=!1,Cc=!1,cc=!1,sc=Nb.global.def("{}");Qb.forEach(function(jd){var yd=Rc[jd];if(ma.isDynamic(yd))"function"===typeof yd&&(yd=Rc[jd]=ma.unbox(yd)),jd=qa(yd,null),oc=oc||jd.thisDep,cc=cc||jd.propDep,Cc=Cc||jd.contextDep;else{$c(sc,".",jd,"\x3d");switch(typeof yd){case "number":$c(yd);break;case "string":$c('"',yd,'"');break;case "object":Array.isArray(yd)&&$c("[",yd.join(),"]");break;default:$c(Nb.link(yd))}$c(";")}});dc.dynamic[Mc]=new ma.DynamicVariable(4,{thisDep:oc,
contextDep:Cc,propDep:cc,ref:sc,append:cd});delete dc["static"][Mc]}}var pf=zc.Record,$e={add:32774,subtract:32778,"reverse subtract":32779};Fc.ext_blend_minmax&&($e.min=32775,$e.max=32776);var Ra=Fc.angle_instanced_arrays,Gb=Fc.webgl_draw_buffers,Ab={dirty:!0,profile:xb.profile},Ob={},Bc=[],Tc={},jc={};Jb("dither",3024);Jb("blend.enable",3042);ac("blend.color","blendColor",[0,0,0,0]);ac("blend.equation","blendEquationSeparate",[32774,32774]);ac("blend.func","blendFuncSeparate",[1,0,1,0]);Jb("depth.enable",
2929,!0);ac("depth.func","depthFunc",513);ac("depth.range","depthRange",[0,1]);ac("depth.mask","depthMask",!0);ac("colorMask","colorMask",[!0,!0,!0,!0]);Jb("cull.enable",2884);ac("cull.face","cullFace",1029);ac("frontFace","frontFace",2305);ac("lineWidth","lineWidth",1);Jb("polygonOffset.enable",32823);ac("polygonOffset.offset","polygonOffset",[0,0]);Jb("sample.alpha",32926);Jb("sample.enable",32928);ac("sample.coverage","sampleCoverage",[1,!1]);Jb("stencil.enable",2960);ac("stencil.mask","stencilMask",
-1);ac("stencil.func","stencilFunc",[519,0,-1]);ac("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);ac("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);Jb("scissor.enable",3089);ac("scissor.box","scissor",[0,0,Db.drawingBufferWidth,Db.drawingBufferHeight]);ac("viewport","viewport",[0,0,Db.drawingBufferWidth,Db.drawingBufferHeight]);var Oc={gl:Db,context:bc,strings:Yb,next:Ob,current:Ab,draw:$b,elements:rc,buffer:qc,shader:Gc,attributes:zc.state,vao:zc,uniforms:fc,framebuffer:zb,
extensions:Fc,timer:Eb,isBufferArgs:ea},gd={primTypes:Ka,compareFuncs:ad,blendFuncs:Ac,blendEquations:$e,stencilOps:Nc,glTypes:ib,orientationType:ed};Gb&&(gd.backBuffer=[1029],gd.drawBuffer=e(mc.maxDrawbuffers,function(Nb){return 0===Nb?[0]:e(Nb,function(dc){return 36064+dc})}));var vd=0;return{next:Ob,current:Ab,procs:function(){var Nb=Kc(),dc=Nb.proc("poll"),Mc=Nb.proc("refresh"),cd=Nb.block();dc(cd);Mc(cd);var Rc=Nb.shared,$c=Rc.gl,Qb=Rc.next,oc=Rc.current;cd(oc,".dirty\x3dfalse;");Ld(Nb,dc);Ld(Nb,
Mc,null,!0);var Cc;Ra&&(Cc=Nb.link(Ra));Fc.oes_vertex_array_object&&Mc(Nb.link(Fc.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var cc=0;cc<mc.maxAttributes;++cc){var sc=Mc.def(Rc.attributes,"[",cc,"]"),jd=Nb.cond(sc,".buffer");jd.then($c,".enableVertexAttribArray(",cc,");",$c,".bindBuffer(",34962,",",sc,".buffer.buffer);",$c,".vertexAttribPointer(",cc,",",sc,".size,",sc,".type,",sc,".normalized,",sc,".stride,",sc,".offset);")["else"]($c,".disableVertexAttribArray(",cc,");",$c,".vertexAttrib4f(",
cc,",",sc,".x,",sc,".y,",sc,".z,",sc,".w);",sc,".buffer\x3dnull;");Mc(jd);Ra&&Mc(Cc,".vertexAttribDivisorANGLE(",cc,",",sc,".divisor);")}Mc(Nb.shared.vao,".currentVAO\x3dnull;",Nb.shared.vao,".setVAO(",Nb.shared.vao,".targetVAO);");Object.keys(Tc).forEach(function(yd){var Id=Tc[yd],Fd=cd.def(Qb,".",yd),Ed=Nb.block();Ed("if(",Fd,"){",$c,".enable(",Id,")}else{",$c,".disable(",Id,")}",oc,".",yd,"\x3d",Fd,";");Mc(Ed);dc("if(",Fd,"!\x3d\x3d",oc,".",yd,"){",Ed,"}")});Object.keys(jc).forEach(function(yd){var Id=
jc[yd],Fd=Ab[yd],Ed,ye,ze=Nb.block();ze($c,".",Id,"(");t(Fd)?(Id=Fd.length,Ed=Nb.global.def(Qb,".",yd),ye=Nb.global.def(oc,".",yd),ze(e(Id,function(Ne){return Ed+"["+Ne+"]"}),");",e(Id,function(Ne){return ye+"["+Ne+"]\x3d"+Ed+"["+Ne+"];"}).join("")),dc("if(",e(Id,function(Ne){return Ed+"["+Ne+"]!\x3d\x3d"+ye+"["+Ne+"]"}).join("||"),"){",ze,"}")):(Ed=cd.def(Qb,".",yd),ye=cd.def(oc,".",yd),ze(Ed,");",oc,".",yd,"\x3d",Ed,";"),dc("if(",Ed,"!\x3d\x3d",ye,"){",ze,"}"));Mc(ze)});return Nb.compile()}(),compile:function(Nb,
dc,Mc,cd,Rc){var $c=Kc();$c.stats=$c.link(Rc);Object.keys(dc["static"]).forEach(function(Qb){hf($c,dc,Qb)});lc.forEach(function(Qb){hf($c,Nb,Qb)});Mc=Dd(Nb,dc,Mc,cd,$c);Qd($c,Mc);Ue($c,Mc);Ge($c,Mc);return $c.compile()}}}function ka(Db,Yb){for(var Fc=0;Fc<Db.length;++Fc)if(Db[Fc]===Yb)return Fc;return-1}var ra=function(Db,Yb){for(var Fc=Object.keys(Yb),mc=0;mc<Fc.length;++mc)Db[Fc[mc]]=Yb[Fc[mc]];return Db},ha=0,ma={DynamicVariable:q,define:function(Db,Yb){return new q(Db,p(Yb+""))},isDynamic:function(Db){return"function"===
typeof Db&&!Db._reglType||Db instanceof q},unbox:function(Db,Yb){return"function"===typeof Db?new q(0,Db):Db},accessor:p},wa={next:"function"===typeof requestAnimationFrame?function(Db){return requestAnimationFrame(Db)}:function(Db){return setTimeout(Db,16)},cancel:"function"===typeof cancelAnimationFrame?function(Db){return cancelAnimationFrame(Db)}:clearTimeout},na="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},ya=m();ya.zero=m();
var Fa=function(Db,Yb){var Fc=1;Yb.ext_texture_filter_anisotropic&&(Fc=Db.getParameter(34047));var mc=1,qc=1;Yb.webgl_draw_buffers&&(mc=Db.getParameter(34852),qc=Db.getParameter(36063));var rc=!!Yb.oes_texture_float;if(rc){rc=Db.createTexture();Db.bindTexture(3553,rc);Db.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var wb=Db.createFramebuffer();Db.bindFramebuffer(36160,wb);Db.framebufferTexture2D(36160,36064,3553,rc,0);Db.bindTexture(3553,null);if(36053!==Db.checkFramebufferStatus(36160))rc=!1;else{Db.viewport(0,
0,1,1);Db.clearColor(1,0,0,1);Db.clear(16384);var zb=ya.allocType(5126,4);Db.readPixels(0,0,1,1,6408,5126,zb);Db.getError()?rc=!1:(Db.deleteFramebuffer(wb),Db.deleteTexture(rc),rc=1===zb[0]);ya.freeType(zb)}}zb=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(zb=Db.createTexture(),wb=ya.allocType(5121,36),Db.activeTexture(33984),Db.bindTexture(34067,zb),Db.texImage2D(34069,0,6408,3,3,0,6408,5121,wb),ya.freeType(wb),
Db.bindTexture(34067,null),Db.deleteTexture(zb),zb=!Db.getError());return{colorBits:[Db.getParameter(3410),Db.getParameter(3411),Db.getParameter(3412),Db.getParameter(3413)],depthBits:Db.getParameter(3414),stencilBits:Db.getParameter(3415),subpixelBits:Db.getParameter(3408),extensions:Object.keys(Yb).filter(function(fc){return!!Yb[fc]}),maxAnisotropic:Fc,maxDrawbuffers:mc,maxColorAttachments:qc,pointSizeDims:Db.getParameter(33901),lineWidthDims:Db.getParameter(33902),maxViewportDims:Db.getParameter(3386),
maxCombinedTextureUnits:Db.getParameter(35661),maxCubeMapSize:Db.getParameter(34076),maxRenderbufferSize:Db.getParameter(34024),maxTextureUnits:Db.getParameter(34930),maxTextureSize:Db.getParameter(3379),maxAttributes:Db.getParameter(34921),maxVertexUniforms:Db.getParameter(36347),maxVertexTextureUnits:Db.getParameter(35660),maxVaryingVectors:Db.getParameter(36348),maxFragmentUniforms:Db.getParameter(36349),glsl:Db.getParameter(35724),renderer:Db.getParameter(7937),vendor:Db.getParameter(7936),version:Db.getParameter(7938),
readFloat:rc,npotTextureCube:zb}},Ha=function(Db){return Db instanceof Uint8Array||Db instanceof Uint16Array||Db instanceof Uint32Array||Db instanceof Int8Array||Db instanceof Int16Array||Db instanceof Int32Array||Db instanceof Float32Array||Db instanceof Float64Array||Db instanceof Uint8ClampedArray},eb=function(Db){return Object.keys(Db).map(function(Yb){return Db[Yb]})},hb={shape:function(Db){for(var Yb=[];Db.length;Db=Db[0])Yb.push(Db.length);return Yb},flatten:function(Db,Yb,Fc,mc){var qc=1;
if(Yb.length)for(var rc=0;rc<Yb.length;++rc)qc*=Yb[rc];else qc=0;Fc=mc||ya.allocType(Fc,qc);switch(Yb.length){case 0:break;case 1:mc=Yb[0];for(Yb=0;Yb<mc;++Yb)Fc[Yb]=Db[Yb];break;case 2:mc=Yb[0];Yb=Yb[1];for(rc=qc=0;rc<mc;++rc)for(var wb=Db[rc],zb=0;zb<Yb;++zb)Fc[qc++]=wb[zb];break;case 3:u(Db,Yb[0],Yb[1],Yb[2],Fc,0);break;default:v(Db,Yb,0,Fc,0)}return Fc}},ob={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ib={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},Pa={dynamic:35048,stream:35040,"static":35044},sb=hb.flatten,tb=hb.shape,Aa=[];Aa[5120]=1;Aa[5122]=2;Aa[5124]=4;Aa[5121]=1;Aa[5123]=2;Aa[5125]=4;Aa[5126]=4;var Ka={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,
"triangle fan":6},Qa=new Float32Array(1),Xa=new Uint32Array(Qa.buffer),pb=[9984,9986,9985,9987],db=[0,6409,6410,6407,6408],Ia={};Ia[6409]=Ia[6406]=Ia[6402]=1;Ia[34041]=Ia[6410]=2;Ia[6407]=Ia[35904]=3;Ia[6408]=Ia[35906]=4;var Ua=G("HTMLCanvasElement"),$a=G("OffscreenCanvas"),xa=G("CanvasRenderingContext2D"),Ga=G("ImageBitmap"),Va=G("HTMLImageElement"),gb=G("HTMLVideoElement"),Ma=Object.keys(ob).concat([Ua,$a,xa,Ga,Va,gb]),cb=[];cb[5121]=1;cb[5126]=4;cb[36193]=2;cb[5123]=2;cb[5125]=4;var Sa=[];Sa[32854]=
2;Sa[32855]=2;Sa[36194]=2;Sa[34041]=4;Sa[33776]=.5;Sa[33777]=.5;Sa[33778]=1;Sa[33779]=1;Sa[35986]=.5;Sa[35987]=1;Sa[34798]=1;Sa[35840]=.5;Sa[35841]=.25;Sa[35842]=.5;Sa[35843]=.25;Sa[36196]=.5;var lb=[];lb[32854]=2;lb[32855]=2;lb[36194]=2;lb[33189]=2;lb[36168]=1;lb[34041]=4;lb[35907]=4;lb[34836]=16;lb[34842]=8;lb[34843]=6;var rb=function(Db,Yb,Fc,mc,qc){function rc($b){this.id=zc++;this.refCount=1;this.renderbuffer=$b;this.format=32854;this.height=this.width=0;qc.profile&&(this.stats={size:0})}function wb($b){var bc=
$b.renderbuffer;Db.bindRenderbuffer(36161,null);Db.deleteRenderbuffer(bc);$b.renderbuffer=null;$b.refCount=0;delete Gc[$b.id];mc.renderbufferCount--}var zb={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Yb.ext_srgb&&(zb.srgba=35907);Yb.ext_color_buffer_half_float&&(zb.rgba16f=34842,zb.rgb16f=34843);Yb.webgl_color_buffer_float&&(zb.rgba32f=34836);var fc=[];Object.keys(zb).forEach(function($b){fc[zb[$b]]=$b});var zc=0,Gc={};rc.prototype.decRef=function(){0>=
--this.refCount&&wb(this)};qc.profile&&(mc.getTotalRenderbufferSize=function(){var $b=0;Object.keys(Gc).forEach(function(bc){$b+=Gc[bc].stats.size});return $b});return{create:function($b,bc){function Eb(Cb,Jb){var ac=0,Kc=0,vc=32854;"object"===typeof Cb&&Cb?("shape"in Cb?(Kc=Cb.shape,ac=Kc[0]|0,Kc=Kc[1]|0):("radius"in Cb&&(ac=Kc=Cb.radius|0),"width"in Cb&&(ac=Cb.width|0),"height"in Cb&&(Kc=Cb.height|0)),"format"in Cb&&(vc=zb[Cb.format])):"number"===typeof Cb?(ac=Cb|0,Kc="number"===typeof Jb?Jb|0:
ac):Cb||(ac=Kc=1);if(ac!==xb.width||Kc!==xb.height||vc!==xb.format)return Eb.width=xb.width=ac,Eb.height=xb.height=Kc,xb.format=vc,Db.bindRenderbuffer(36161,xb.renderbuffer),Db.renderbufferStorage(36161,vc,ac,Kc),qc.profile&&(xb.stats.size=lb[xb.format]*xb.width*xb.height),Eb.format=fc[xb.format],Eb}var xb=new rc(Db.createRenderbuffer());Gc[xb.id]=xb;mc.renderbufferCount++;Eb($b,bc);Eb.resize=function(Cb,Jb){Cb|=0;Jb=Jb|0||Cb;if(Cb===xb.width&&Jb===xb.height)return Eb;Eb.width=xb.width=Cb;Eb.height=
xb.height=Jb;Db.bindRenderbuffer(36161,xb.renderbuffer);Db.renderbufferStorage(36161,xb.format,Cb,Jb);qc.profile&&(xb.stats.size=lb[xb.format]*xb.width*xb.height);return Eb};Eb._reglType="renderbuffer";Eb._renderbuffer=xb;qc.profile&&(Eb.stats=xb.stats);Eb.destroy=function(){xb.decRef()};return Eb},clear:function(){eb(Gc).forEach(wb)},restore:function(){eb(Gc).forEach(function($b){$b.renderbuffer=Db.createRenderbuffer();Db.bindRenderbuffer(36161,$b.renderbuffer);Db.renderbufferStorage(36161,$b.format,
$b.width,$b.height)});Db.bindRenderbuffer(36161,null)}}},yb=[];yb[6408]=4;yb[6407]=3;var Hb=[];Hb[5121]=1;Hb[5126]=4;Hb[36193]=2;var Vb=["x","y","z","w"],lc="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ac={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ad={never:512,less:513,"\x3c":513,equal:514,"\x3d":514,"\x3d\x3d":514,"\x3d\x3d\x3d":514,lequal:515,"\x3c\x3d":515,greater:516,"\x3e":516,notequal:517,"!\x3d":517,"!\x3d\x3d":517,gequal:518,"\x3e\x3d":518,always:519},Nc={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ed={cw:2304,ccw:2305},Pc=new ca(!1,!1,!1,function(){}),
sd=function(Db,Yb){function Fc(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function mc(Gc,$b,bc){var Eb=wb.pop()||new Fc;Eb.startQueryIndex=Gc;Eb.endQueryIndex=$b;Eb.sum=0;Eb.stats=bc;zb.push(Eb)}if(!Yb.ext_disjoint_timer_query)return null;var qc=[],rc=[],wb=[],zb=[],fc=[],zc=[];return{beginQuery:function(Gc){var $b=qc.pop()||Yb.ext_disjoint_timer_query.createQueryEXT();Yb.ext_disjoint_timer_query.beginQueryEXT(35007,$b);rc.push($b);mc(rc.length-1,rc.length,Gc)},endQuery:function(){Yb.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:mc,update:function(){var Gc;var $b=rc.length;if(0!==$b){zc.length=Math.max(zc.length,$b+1);fc.length=Math.max(fc.length,$b+1);fc[0]=0;var bc=zc[0]=0;for(Gc=$b=0;Gc<rc.length;++Gc){var Eb=rc[Gc];Yb.ext_disjoint_timer_query.getQueryObjectEXT(Eb,34919)?(bc+=Yb.ext_disjoint_timer_query.getQueryObjectEXT(Eb,34918),qc.push(Eb)):rc[$b++]=Eb;fc[Gc+1]=bc;zc[Gc+1]=$b}rc.length=$b;for(Gc=$b=0;Gc<zb.length;++Gc){bc=zb[Gc];var xb=bc.startQueryIndex;Eb=bc.endQueryIndex;bc.sum+=fc[Eb]-fc[xb];xb=zc[xb];
Eb=zc[Eb];Eb===xb?(bc.stats.gpuTime+=bc.sum/1E6,wb.push(bc)):(bc.startQueryIndex=xb,bc.endQueryIndex=Eb,zb[$b++]=bc)}zb.length=$b}},getNumPendingQueries:function(){return rc.length},clear:function(){qc.push.apply(qc,rc);for(var Gc=0;Gc<qc.length;Gc++)Yb.ext_disjoint_timer_query.deleteQueryEXT(qc[Gc]);rc.length=0;qc.length=0},restore:function(){rc.length=0;qc.length=0}}};return function(Db){function Yb(){if(0===Sc.length)vc&&vc.update(),me=null;else{me=wa.next(Yb);Gc();for(var Wd=Sc.length-1;0<=Wd;--Wd){var Qd=
Sc[Wd];Qd&&Qd(ld,null,0)}Eb.flush();vc&&vc.update()}}function Fc(){!me&&0<Sc.length&&(me=wa.next(Yb))}function mc(){me&&(wa.cancel(Yb),me=null)}function qc(Wd){Wd.preventDefault();mc();md.forEach(function(Qd){Qd()})}function rc(Wd){Eb.getError();Cb.restore();pd.restore();hd.restore();Yc.restore();Dd.restore();Jd.restore();Cd.restore();vc&&vc.restore();Ld.procs.refresh();Fc();Gd.forEach(function(Qd){Qd()})}function wb(Wd){function Qd(Ra){var Gb={},Ab={};Object.keys(Ra).forEach(function(Ob){var Bc=
Ra[Ob];ma.isDynamic(Bc)?Ab[Ob]=ma.unbox(Bc,Ob):Gb[Ob]=Bc});return{dynamic:Ab,"static":Gb}}var Ae=Qd(Wd.context||{}),Be=Qd(Wd.uniforms||{}),Ge=Qd(Wd.attributes||{}),Ue=Qd(function(Ra){function Gb(Ob){if(Ob in Ab){var Bc=Ab[Ob];delete Ab[Ob];Object.keys(Bc).forEach(function(Tc){Ab[Ob+"."+Tc]=Bc[Tc]})}}var Ab=ra({},Ra);delete Ab.uniforms;delete Ab.attributes;delete Ab.context;delete Ab.vao;"stencil"in Ab&&Ab.stencil.op&&(Ab.stencil.opBack=Ab.stencil.opFront=Ab.stencil.op,delete Ab.stencil.op);Gb("blend");
Gb("depth");Gb("cull");Gb("stencil");Gb("polygonOffset");Gb("scissor");Gb("sample");"vao"in Ra&&(Ab.vao=Ra.vao);return Ab}(Wd));Wd={gpuTime:0,cpuTime:0,count:0};Ae=Ld.compile(Ue,Ge,Be,Ae,Wd);var uf=Ae.draw,hf=Ae.batch,pf=Ae.scope,$e=[];return ra(function(Ra,Gb){var Ab;if("function"===typeof Ra)return pf.call(this,null,Ra,0);if("function"===typeof Gb)if("number"===typeof Ra)for(Ab=0;Ab<Ra;++Ab)pf.call(this,null,Gb,Ab);else if(Array.isArray(Ra))for(Ab=0;Ab<Ra.length;++Ab)pf.call(this,Ra[Ab],Gb,Ab);
else return pf.call(this,Ra,Gb,0);else if("number"===typeof Ra){if(0<Ra){Gb=hf.call;for(Ab=Ra|0;$e.length<Ab;)$e.push(null);return Gb.call(hf,this,$e,Ra|0)}}else if(Array.isArray(Ra)){if(Ra.length)return hf.call(this,Ra,Ra.length)}else return uf.call(this,Ra)},{stats:Wd})}function zb(Wd,Qd){Wd=0;Ld.procs.poll();var Ae=Qd.color;Ae&&(Eb.clearColor(+Ae[0]||0,+Ae[1]||0,+Ae[2]||0,+Ae[3]||0),Wd|=16384);"depth"in Qd&&(Eb.clearDepth(+Qd.depth),Wd|=256);"stencil"in Qd&&(Eb.clearStencil(Qd.stencil|0),Wd|=1024);
Eb.clear(Wd)}function fc(Wd){Sc.push(Wd);Fc();return{cancel:function(){function Qd(){var Be=ka(Sc,Qd);Sc[Be]=Sc[Sc.length-1];--Sc.length;0>=Sc.length&&mc()}var Ae=ka(Sc,Wd);Sc[Ae]=Qd}}}function zc(){var Wd=Ce.viewport,Qd=Ce.scissor_box;Wd[0]=Wd[1]=Qd[0]=Qd[1]=0;ld.viewportWidth=ld.framebufferWidth=ld.drawingBufferWidth=Wd[2]=Qd[2]=Eb.drawingBufferWidth;ld.viewportHeight=ld.framebufferHeight=ld.drawingBufferHeight=Wd[3]=Qd[3]=Eb.drawingBufferHeight}function Gc(){ld.tick+=1;ld.time=bc();zc();Ld.procs.poll()}
function $b(){zc();Ld.procs.refresh();vc&&vc.update()}function bc(){return(na()-Lc)/1E3}Db=k(Db);if(!Db)return null;var Eb=Db.gl,xb=Eb.getContextAttributes();Eb.isContextLost();var Cb=c(Eb,Db);if(!Cb)return null;var Jb=h(),ac={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Kc=Cb.extensions,vc=sd(Eb,Kc),Lc=na(),Zc=Eb.drawingBufferWidth,Wc=Eb.drawingBufferHeight,ld={tick:0,time:0,viewportWidth:Zc,viewportHeight:Wc,
framebufferWidth:Zc,framebufferHeight:Wc,drawingBufferWidth:Zc,drawingBufferHeight:Wc,pixelRatio:Db.pixelRatio},xd=Fa(Eb,Kc),hd=x(Eb,ac,Db,function(Wd){return Cd.destroyBuffer(Wd)}),Cd=P(Eb,Kc,xd,ac,hd),Kd=A(Eb,Kc,hd,ac),pd=T(Eb,Jb,ac,Db),Yc=N(Eb,Kc,xd,function(){Ld.procs.poll()},ld,ac,Db),Dd=rb(Eb,Kc,xd,ac,Db),Jd=O(Eb,Kc,xd,Yc,Dd,ac),Ld=oa(Eb,Jb,Kc,xd,hd,Kd,Yc,Jd,{},Cd,pd,{elements:null,primitive:4,count:-1,offset:0,instances:-1},ld,vc,Db);Jb=V(Eb,Jd,Ld.procs.poll,ld,xb,Kc,xd);var Ce=Ld.next,Rd=
Eb.canvas,Sc=[],md=[],Gd=[],Md=[Db.onDestroy],me=null;Rd&&(Rd.addEventListener("webglcontextlost",qc,!1),Rd.addEventListener("webglcontextrestored",rc,!1));var xe=Jd.setFBO=wb({framebuffer:ma.define.call(null,1,"framebuffer")});$b();xb=ra(wb,{clear:function(Wd){if("framebuffer"in Wd)if(Wd.framebuffer&&"framebufferCube"===Wd.framebuffer_reglType)for(var Qd=0;6>Qd;++Qd)xe(ra({framebuffer:Wd.framebuffer.faces[Qd]},Wd),zb);else xe(Wd,zb);else zb(null,Wd)},prop:ma.define.bind(null,1),context:ma.define.bind(null,
2),"this":ma.define.bind(null,3),draw:wb({}),buffer:function(Wd){return hd.create(Wd,34962,!1,!1)},elements:function(Wd){return Kd.create(Wd,!1)},texture:Yc.create2D,cube:Yc.createCube,renderbuffer:Dd.create,framebuffer:Jd.create,framebufferCube:Jd.createCube,vao:Cd.createVAO,attributes:xb,frame:fc,on:function(Wd,Qd){switch(Wd){case "frame":return fc(Qd);case "lost":var Ae=md;break;case "restore":Ae=Gd;break;case "destroy":Ae=Md}Ae.push(Qd);return{cancel:function(){for(var Be=0;Be<Ae.length;++Be)if(Ae[Be]===
Qd){Ae[Be]=Ae[Ae.length-1];Ae.pop();break}}}},limits:xd,hasExtension:function(Wd){return 0<=xd.extensions.indexOf(Wd.toLowerCase())},read:Jb,destroy:function(){Sc.length=0;mc();Rd&&(Rd.removeEventListener("webglcontextlost",qc),Rd.removeEventListener("webglcontextrestored",rc));pd.clear();Jd.clear();Dd.clear();Yc.clear();Kd.clear();hd.clear();Cd.clear();vc&&vc.clear();Md.forEach(function(Wd){Wd()})},_gl:Eb,_refresh:$b,poll:function(){Gc();vc&&vc.update()},now:bc,stats:ac});Db.onDone(null,xb);return xb}})},
{}],513:[function(b,y,F){var q="",n;y.exports=function(p,h){if("string"!==typeof p)throw new TypeError("expected a string");if(1===h)return p;if(2===h)return p+p;var a=p.length*h;if(n!==p||"undefined"===typeof n)n=p,q="";else if(q.length>=a)return q.substr(0,a);for(;a>q.length&&1<h;)h&1&&(q+=p),h>>=1,p+=p;q+=p;return q=q.substr(0,a)}},{}],514:[function(b,y,F){(function(q){y.exports=q.performance&&q.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,
"undefined"!==typeof fb?fb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],515:[function(b,y,F){y.exports=function(q){for(var n=q.length,p=q[q.length-1],h=n,a=n-2;0<=a;--a){var f=p,d=q[a];p=f+d;f=p-f;if(d-=f)q[--h]=p,p=d}var l=0;for(a=h;a<n;++a)f=q[a],d=p,p=f+d,f=p-f,(d-=f)&&(q[l++]=d);q[l++]=p;q.length=l;return q}},{}],516:[function(b,y,F){function q(k){if(1===k.length)return k[0];if(2===k.length)return["sum(",k[0],",",k[1],")"].join("");var c=k.length>>1;return["sum(",
q(k.slice(0,c)),",",q(k.slice(c)),")"].join("")}function n(k){if(2===k.length)return["sum(prod(",k[0][0],",",k[1][1],"),prod(-",k[0][1],",",k[1][0],"))"].join("");for(var c=[],e=0;e<k.length;++e){for(var g=c,m=g.push,r=k,u=e,v=Array(r.length-1),w=1;w<r.length;++w)for(var D=v[w-1]=Array(r.length-1),C=0,x=0;C<r.length;++C)C!==u&&(D[x++]=r[w][C]);r=n(v);u=e&1?"-":"";m.call(g,["scale(",r,",",u,k[0][e],")"].join(""))}return q(c)}function p(k){for(var c=Function,e=Array(k),g=0;g<k;++g){e[g]=Array(k);for(var m=
0;m<k;++m)e[g][m]=["m[",g,"][",m,"]"].join("")}return(new c("sum","scale","prod","compress",["function robustDeterminant",k,"(m){return compress(",n(e),")};return robustDeterminant",k].join("")))(a,f,h,d)}var h=b("two-product"),a=b("robust-sum"),f=b("robust-scale"),d=b("robust-compress"),l=[function(){return[0]},function(k){return[k[0][0]]}];(function(){for(;6>l.length;)l.push(p(l.length));for(var k=[],c=["function robustDeterminant(m){switch(m.length){"],e=0;6>e;++e)k.push("det"+e),c.push("case ",
e,":return det",e,"(m);");c.push("}var det\x3dCACHE[m.length];if(!det)det\x3dCACHE[m.length]\x3dgen(m.length);return det(m);}return robustDeterminant");k.push("CACHE","gen",c.join(""));k=Function.apply(void 0,k);y.exports=k.apply(void 0,l.concat([l,p]));for(e=0;e<l.length;++e)y.exports[e]=l[e]})()},{"robust-compress":515,"robust-scale":522,"robust-sum":525,"two-product":554}],517:[function(b,y,F){var q=b("two-product"),n=b("robust-sum");y.exports=function(p,h){for(var a=q(p[0],h[0]),f=1;f<p.length;++f)a=
n(a,q(p[f],h[f]));return a}},{"robust-sum":525,"two-product":554}],518:[function(b,y,F){function q(g,m){for(var r=Array(g.length-1),u=1;u<g.length;++u)for(var v=r[u-1]=Array(g.length-1),w=0,D=0;w<g.length;++w)w!==m&&(v[D++]=g[u][w]);return r}function n(g){if(1===g.length)return g[0];if(2===g.length)return["sum(",g[0],",",g[1],")"].join("");var m=g.length>>1;return["sum(",n(g.slice(0,m)),",",n(g.slice(m)),")"].join("")}function p(g,m){return"m"===g.charAt(0)?"w"===m.charAt(0)?(g=g.split("["),["w",
m.substr(1),"m",g[0].substr(1)].join("")):["prod(",g,",",m,")"].join(""):p(m,g)}function h(g){if(2===g.length)return[["diff(",p(g[0][0],g[1][1]),",",p(g[1][0],g[0][1]),")"].join("")];for(var m=[],r=0;r<g.length;++r){var u=m,v=u.push,w=n(h(q(g,r)));var D=r&1?"-":"";v.call(u,["scale(",w,",",D,g[0][r],")"].join(""))}return m}function a(g){for(var m=[],r=[],u=Array(g),v=0;v<g;++v){u[v]=Array(g);for(var w=0;w<g;++w)u[v][w]=["m",w,"[",g-v-2,"]"].join("")}for(v=0;v<g;++v)u[0][v]="1",u[g-1][v]="w"+v;for(v=
0;v<g;++v)0===(v&1)?m.push.apply(m,h(q(u,v))):r.push.apply(r,h(q(u,v)));m=n(m);r=n(r);u="exactInSphere"+g;w=[];for(v=0;v<g;++v)w.push("m"+v);w=["function ",u,"(",w.join(),"){"];for(v=0;v<g;++v){var D=w,C=D.push,x=v;var A=v;for(var B=g,t=[],G=0;G<B-2;++G)t.push(["prod(m",A,"[",G,"],m",A,"[",G,"])"].join(""));A=n(t);C.call(D,"var w",x,"\x3d",A,";");for(D=0;D<g;++D)D!==v&&w.push("var w",v,"m",D,"\x3dscale(w",v,",m",D,"[0]);")}w.push("var p\x3d",m,",n\x3d",r,",d\x3ddiff(p,n);return d[d.length-1];}return ",
u);return(new Function("sum","diff","prod","scale",w.join("")))(l,k,d,c)}function f(g){var m=e[g.length];m||(m=e[g.length]=a(g.length));return m.apply(void 0,g)}var d=b("two-product"),l=b("robust-sum"),k=b("robust-subtract"),c=b("robust-scale"),e=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=e.length;)e.push(a(e.length));for(var g=[],m=["slow"],r=0;6>=r;++r)g.push("a"+r),m.push("o"+r);var u=["function testInSphere(",g.join(),"){switch(arguments.length){case 0:case 1:return 0;"];
for(r=2;6>=r;++r)u.push("case ",r,":return o",r,"(",g.slice(0,r).join(),");");u.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return testInSphere");m.push(u.join(""));g=Function.apply(void 0,m);y.exports=g.apply(void 0,[f].concat(e));for(r=0;6>=r;++r)y.exports[r]=e[r]})()},{"robust-scale":522,"robust-subtract":524,"robust-sum":525,"two-product":554}],519:[function(b,y,F){function q(h){for(var a="robustLinearSolve"+h+"d",
f=["function ",a,"(A,b){return ["],d=0;d<h;++d){f.push("det([");for(var l=0;l<h;++l){0<l&&f.push(",");f.push("[");for(var k=0;k<h;++k)0<k&&f.push(","),k===d?f.push("+b[",l,"]"):f.push("+A[",l,"][",k,"]");f.push("]")}f.push("]),")}f.push("det(A)]}return ",a);a=new Function("det",f.join(""));return 6>h?a(n[h]):a(n)}var n=b("robust-determinant"),p=[function(){return[0]},function(h,a){return[[a[0]],[h[0][0]]]}];(function(){for(;6>p.length;)p.push(q(p.length));for(var h=[],a=["function dispatchLinearSolve(A,b){switch(A.length){"],
f=0;6>f;++f)h.push("s"+f),a.push("case ",f,":return s",f,"(A,b);");a.push("}var s\x3dCACHE[A.length];if(!s)s\x3dCACHE[A.length]\x3dg(A.length);return s(A,b)}return dispatchLinearSolve");h.push("CACHE","g",a.join(""));h=Function.apply(void 0,h);y.exports=h.apply(void 0,p.concat([p,q]));for(f=0;6>f;++f)y.exports[f]=p[f]})()},{"robust-determinant":516}],520:[function(b,y,F){function q(m,r){for(var u=Array(m.length-1),v=1;v<m.length;++v)for(var w=u[v-1]=Array(m.length-1),D=0,C=0;D<m.length;++D)D!==r&&
(w[C++]=m[v][D]);return u}function n(m){if(1===m.length)return m[0];if(2===m.length)return["sum(",m[0],",",m[1],")"].join("");var r=m.length>>1;return["sum(",n(m.slice(0,r)),",",n(m.slice(r)),")"].join("")}function p(m){if(2===m.length)return[["sum(prod(",m[0][0],",",m[1][1],"),prod(-",m[0][1],",",m[1][0],"))"].join("")];for(var r=[],u=0;u<m.length;++u){var v=r,w=v.push,D=n(p(q(m,u)));var C=u&1?"-":"";w.call(v,["scale(",D,",",C,m[0][u],")"].join(""))}return r}function h(m){for(var r=[],u=[],v=Array(m),
w=0;w<m;++w){v[w]=Array(m);for(var D=0;D<m;++D)v[w][D]=["m",D,"[",m-w-1,"]"].join("")}w=[];for(D=0;D<m;++D)0===(D&1)?r.push.apply(r,p(q(v,D))):u.push.apply(u,p(q(v,D))),w.push("m"+D);r=n(r);u=n(u);m="orientation"+m+"Exact";m=["function ",m,"(",w.join(),"){var p\x3d",r,",n\x3d",u,",d\x3dsub(p,n);return d[d.length-1];};return ",m].join("");return(new Function("sum","prod","scale","sub",m))(d,f,l,k)}function a(m){var r=g[m.length];r||(r=g[m.length]=h(m.length));return r.apply(void 0,m)}var f=b("two-product"),
d=b("robust-sum"),l=b("robust-scale"),k=b("robust-subtract"),c=h(3),e=h(4),g=[function(){return 0},function(){return 0},function(m,r){return r[0]-m[0]},function(m,r,u){var v=(m[1]-u[1])*(r[0]-u[0]),w=(m[0]-u[0])*(r[1]-u[1]),D=v-w;if(0<v){if(0>=w)return D;v+=w}else if(0>v){if(0<=w)return D;v=-(v+w)}else return D;v*=3.3306690738754716E-16;return D>=v||D<=-v?D:c(m,r,u)},function(m,r,u,v){var w=m[0]-v[0],D=r[0]-v[0],C=u[0]-v[0],x=m[1]-v[1],A=r[1]-v[1],B=u[1]-v[1],t=m[2]-v[2],G=r[2]-v[2],H=u[2]-v[2],I=
D*B,J=C*A;C*=x;B*=w;w*=A;x*=D;D=t*(I-J)+G*(C-B)+H*(w-x);t=7.771561172376103E-16*((Math.abs(I)+Math.abs(J))*Math.abs(t)+(Math.abs(C)+Math.abs(B))*Math.abs(G)+(Math.abs(w)+Math.abs(x))*Math.abs(H));return D>t||-D>t?D:e(m,r,u,v)}];(function(){for(;5>=g.length;)g.push(h(g.length));for(var m=[],r=["slow"],u=0;5>=u;++u)m.push("a"+u),r.push("o"+u);var v=["function getOrientation(",m.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(u=2;5>=u;++u)v.push("case ",u,":return o",u,"(",m.slice(0,
u).join(),");");v.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return getOrientation");r.push(v.join(""));m=Function.apply(void 0,r);y.exports=m.apply(void 0,[a].concat(g));for(u=0;5>=u;++u)y.exports[u]=g[u]})()},{"robust-scale":522,"robust-subtract":524,"robust-sum":525,"two-product":554}],521:[function(b,y,F){var q=b("robust-sum"),n=b("robust-scale");y.exports=function(p,h){if(1===p.length)return n(h,p[0]);if(1===h.length)return n(p,
h[0]);if(0===p.length||0===h.length)return[0];var a=[0];if(p.length<h.length)for(var f=0;f<p.length;++f)a=q(a,n(h,p[f]));else for(f=0;f<h.length;++f)a=q(a,n(p,h[f]));return a}},{"robust-scale":522,"robust-sum":525}],522:[function(b,y,F){var q=b("two-product"),n=b("two-sum");y.exports=function(p,h){var a=p.length;if(1===a)return p=q(p[0],h),p[0]?p:[p[1]];var f=Array(2*a),d=[.1,.1],l=[.1,.1],k=0;q(p[0],h,d);d[0]&&(f[k++]=d[0]);for(var c=1;c<a;++c){q(p[c],h,l);n(d[1],l[0],d);d[0]&&(f[k++]=d[0]);var e=
l[1],g=d[1],m=e+g;e=g-(m-e);d[1]=m;e&&(f[k++]=e)}d[1]&&(f[k++]=d[1]);0===k&&(f[k++]=0);f.length=k;return f}},{"two-product":554,"two-sum":555}],523:[function(b,y,F){y.exports=function(n,p,h,a){var f=q(n,h,a),d=q(p,h,a);if(0<f&&0<d||0>f&&0>d)return!1;var l=q(h,n,p),k=q(a,n,p);if(0<l&&0<k||0>l&&0>k)return!1;if(0===f&&0===d&&0===l&&0===k){a:{for(f=0;2>f;++f){d=n[f];l=p[f];k=Math.max(d,l);var c=h[f],e=a[f],g=Math.min(c,e);if(Math.max(c,e)<Math.min(d,l)||k<g){n=!1;break a}}n=!0}return n}return!0};var q=
b("robust-orientation")[3]},{"robust-orientation":520}],524:[function(b,y,F){y.exports=function(q,n){var p=q.length|0,h=n.length|0;if(1===p&&1===h)return q=q[0],p=-n[0],n=q+p,h=n-q,n=(q=q-(n-h)+(p-h))?[q,n]:[n],n;var a=Array(p+h),f=0,d=0,l=0,k=Math.abs,c=q[d],e=k(c),g=-n[l],m=k(g);if(e<m){var r=c;d+=1;d<p&&(c=q[d],e=k(c))}else r=g,l+=1,l<h&&(g=-n[l],m=k(g));if(d<p&&e<m||l>=h){var u=c;d+=1;d<p&&(c=q[d],e=k(c))}else u=g,l+=1,l<h&&(g=-n[l],m=k(g));var v=u+r;r-=v-u;for(var w=v,D;d<p&&l<h;)e<m?(u=c,d+=
1,d<p&&(c=q[d],e=k(c))):(u=g,l+=1,l<h&&(g=-n[l],m=k(g))),v=u+r,u=v-u,(u=r-u)&&(a[f++]=u),u=w+v,D=u-w,r=u-D,v-=D,w-=r,r=w+v,w=u;for(;d<p;)u=c,v=u+r,u=v-u,(u=r-u)&&(a[f++]=u),u=w+v,D=u-w,r=u-D,v-=D,w-=r,r=w+v,w=u,d+=1,d<p&&(c=q[d]);for(;l<h;)u=g,v=u+r,u=v-u,(u=r-u)&&(a[f++]=u),u=w+v,D=u-w,r=u-D,v-=D,w-=r,r=w+v,w=u,l+=1,l<h&&(g=-n[l]);r&&(a[f++]=r);w&&(a[f++]=w);f||(a[f++]=0);a.length=f;return a}},{}],525:[function(b,y,F){y.exports=function(q,n){var p=q.length|0,h=n.length|0;if(1===p&&1===h)return q=
q[0],p=n[0],n=q+p,h=n-q,n=(q=q-(n-h)+(p-h))?[q,n]:[n],n;var a=Array(p+h),f=0,d=0,l=0,k=Math.abs,c=q[d],e=k(c),g=n[l],m=k(g);if(e<m){var r=c;d+=1;d<p&&(c=q[d],e=k(c))}else r=g,l+=1,l<h&&(g=n[l],m=k(g));if(d<p&&e<m||l>=h){var u=c;d+=1;d<p&&(c=q[d],e=k(c))}else u=g,l+=1,l<h&&(g=n[l],m=k(g));var v=u+r;r-=v-u;for(var w=v,D;d<p&&l<h;)e<m?(u=c,d+=1,d<p&&(c=q[d],e=k(c))):(u=g,l+=1,l<h&&(g=n[l],m=k(g))),v=u+r,u=v-u,(u=r-u)&&(a[f++]=u),u=w+v,D=u-w,r=u-D,v-=D,w-=r,r=w+v,w=u;for(;d<p;)u=c,v=u+r,u=v-u,(u=r-u)&&
(a[f++]=u),u=w+v,D=u-w,r=u-D,v-=D,w-=r,r=w+v,w=u,d+=1,d<p&&(c=q[d]);for(;l<h;)u=g,v=u+r,u=v-u,(u=r-u)&&(a[f++]=u),u=w+v,D=u-w,r=u-D,v-=D,w-=r,r=w+v,w=u,l+=1,l<h&&(g=n[l]);r&&(a[f++]=r);w&&(a[f++]=w);f||(a[f++]=0);a.length=f;return a}},{}],526:[function(b,y,F){y.exports=function(q){return 0>q?-1:0<q?1:0}},{}],527:[function(b,y,F){y.exports=function(p){return n(q(p))};var q=b("boundary-cells"),n=b("reduce-simplicial-complex")},{"boundary-cells":100,"reduce-simplicial-complex":507}],528:[function(b,
y,F){y.exports=function(a,f,d,l){d=d||0;if("undefined"===typeof l){for(var k=a.length,c=l=0;c<k;++c)l=Math.max(l,a[c].length)|0;--l}if(0===a.length||1>l)return{cells:[],vertexIds:[],vertexWeights:[]};c=+d;var e=f.length;k=n.mallocUint8(e);for(var g=0;g<e;++g)k[g]=f[g]<c|0;var m=l,r=a.length;c=n.mallocUint32(2*(m*(m+1)/2*r|0));for(g=e=0;g<r;++g){var u=a[g];m=u.length;for(var v=0;v<m;++v)for(var w=0;w<v;++w){var D=u[w],C=u[v];c[e++]=Math.min(D,C)|0;c[e++]=Math.max(D,C)|0}}p(q(c,[e/2|0,2]));for(g=m=
2;g<e;g+=2)if(c[g-2]!==c[g]||c[g-1]!==c[g+1])c[m++]=c[g],c[m++]=c[g+1];c=q(c,[m/2|0,2]);d=+d;e=c.data;g=c.shape[0];m=n.mallocDouble(g);for(u=r=0;u<g;++u)v=e[2*u],w=e[2*u+1],k[v]!==k[w]&&(D=f[v],C=f[w],e[2*r]=v,e[2*r+1]=w,m[r++]=(C-d)/(C-D));c.shape[0]=r;d=q(m,[r]);e=f.length|0;f=n.mallocInt32(2*e);g=c.shape[0];m=c.data;for(u=r=f[0]=0;u<g;++u)if(v=m[2*u],v!==r){for(f[2*r+1]=u;++r<v;)f[2*r]=u,f[2*r+1]=u;f[2*r]=u}for(f[2*r+1]=g;++r<e;)f[2*r]=f[2*r+1]=g;a=h(l)(a,c.data,f,k);e=c.shape[0]|0;g=c.data;l=
Array(e);for(m=0;m<e;++m)l[m]=[g[2*m],g[2*m+1]];e=[].slice.call(d.data,0,d.shape[0]);n.free(k);n.free(c.data);n.free(d.data);n.free(f);return{cells:a,vertexIds:l,vertexWeights:e}};var q=b("ndarray"),n=b("typedarray-pool"),p=b("ndarray-sort"),h=b("./lib/codegen")},{"./lib/codegen":529,ndarray:469,"ndarray-sort":468,"typedarray-pool":567}],529:[function(b,y,F){y.exports=function(h){var a=p[h];if(!a){a=p;var f=Array(h+1);f[0]=[[]];for(var d=1;d<=h;++d)for(var l=f[d]=n(d),k=0;k<l.length;++k);var c=["function B(C,E,i,j){",
"var a\x3dMath.min(i,j)|0,b\x3dMath.max(i,j)|0,l\x3dC[2*a],h\x3dC[2*a+1];","while(l\x3ch){","var m\x3d(l+h)\x3e\x3e1,v\x3dE[2*m+1];","if(v\x3d\x3d\x3db){return m}","if(b\x3cv){h\x3dm}else{l\x3dm+1}","}","return l;","};","function getContour",h,"d(F,E,C,S){","var n\x3dF.length,R\x3d[];","for(var i\x3d0;i\x3cn;++i){var c\x3dF[i],l\x3dc.length;"];for(d=h+1;1<d;--d){d<h+1&&c.push("else ");c.push("if(l\x3d\x3d\x3d",d,"){");l=[];for(k=0;k<d;++k)l.push("(S[c["+k+"]]\x3c\x3c"+k+")");c.push("var M\x3d",l.join("+"),
";if(M\x3d\x3d\x3d0||M\x3d\x3d\x3d",(1<<d)-1,"){continue}switch(M){");l=f[d-1];for(k=0;k<l.length;++k){c.push("case ",k,":");var e=l[k];if(!(0>=e.length)){c.push("R.push(");for(var g=0;g<e.length;++g){var m=e[g];0<g&&c.push(",");c.push("[");for(var r=0;r<m.length;++r){var u=m[r];0<r&&c.push(",");c.push("B(C,E,c[",u[0],"],c[",u[1],"])")}c.push("]")}c.push(");")}c.push("break;")}c.push("}}")}c.push("}return R;};return getContour",h,"d");f=(new Function("pool",c.join("")))(q);a=a[h]=f}return a};var q=
b("typedarray-pool"),n=b("marching-simplex-table"),p={}},{"marching-simplex-table":448,"typedarray-pool":567}],530:[function(b,y,F){function q(c,e){var g=c.length,m=c.length-e.length,r=Math.min;if(m)return m;switch(g){case 0:return 0;case 1:return c[0]-e[0];case 2:return(g=c[0]+c[1]-e[0]-e[1])?g:r(c[0],c[1])-r(e[0],e[1]);case 3:m=c[0]+c[1];var u=e[0]+e[1];if(g=m+c[2]-(u+e[2]))return g;var v=r(c[0],c[1]),w=r(e[0],e[1]);return(g=r(v,c[2])-r(w,e[2]))?g:r(v+c[2],m)-r(w+e[2],u);default:c=c.slice(0);c.sort();
e=e.slice(0);e.sort();for(r=0;r<g;++r)if(m=c[r]-e[r])return m;return 0}}function n(c,e){return q(c[0],e[0])}function p(c,e){if(e){for(var g=c.length,m=Array(g),r=0;r<g;++r)m[r]=[c[r],e[r]];m.sort(n);for(r=0;r<g;++r)c[r]=m[r][0],e[r]=m[r][1]}else c.sort(q);return c}function h(c){if(0===c.length)return[];for(var e=1,g=c.length,m=1;m<g;++m){var r=c[m];q(r,c[m-1])&&(m===e?e++:c[e++]=r)}c.length=e;return c}function a(c,e){for(var g=0,m=c.length-1,r=-1;g<=m;){var u=g+m>>1,v=q(c[u],e);0>=v?(0===v&&(r=u),
g=u+1):0<v&&(m=u-1)}return r}function f(c,e){for(var g=Array(c.length),m=0,r=g.length;m<r;++m)g[m]=[];r=[];m=0;for(var u=e.length;m<u;++m)for(var v=e[m],w=v.length,D=1,C=1<<w;D<C;++D){r.length=l.popCount(D);for(var x=0,A=0;A<w;++A)D&1<<A&&(r[x++]=v[A]);x=a(c,r);if(!(0>x))for(;!(g[x++].push(m),x>=c.length||0!==q(c[x],r)););}return g}function d(c,e){if(0>e)return[];for(var g=[],m=(1<<e+1)-1,r=0;r<c.length;++r)for(var u=c[r],v=m;v<1<<u.length;v=l.nextCombination(v)){for(var w=Array(e+1),D=0,C=0;C<u.length;++C)v&
1<<C&&(w[D++]=u[C]);g.push(w)}return p(g)}"use restrict";var l=b("bit-twiddle"),k=b("union-find");F.dimension=function(c){for(var e=0,g=Math.max,m=0,r=c.length;m<r;++m)e=g(e,c[m].length);return e-1};F.countVertices=function(c){for(var e=-1,g=Math.max,m=0,r=c.length;m<r;++m)for(var u=c[m],v=0,w=u.length;v<w;++v)e=g(e,u[v]);return e+1};F.cloneCells=function(c){for(var e=Array(c.length),g=0,m=c.length;g<m;++g)e[g]=c[g].slice(0);return e};F.compareCells=q;F.normalize=p;F.unique=h;F.findCell=a;F.incidence=
f;F.dual=function(c,e){if(!e)return f(h(d(c,0)),c,0);for(var g=Array(e),m=0;m<e;++m)g[m]=[];m=0;for(e=c.length;m<e;++m)for(var r=c[m],u=0,v=r.length;u<v;++u)g[r[u]].push(m);return g};F.explode=function(c){for(var e=[],g=0,m=c.length;g<m;++g)for(var r=c[g],u=r.length|0,v=1,w=1<<u;v<w;++v){for(var D=[],C=0;C<u;++C)v>>>C&1&&D.push(r[C]);e.push(D)}return p(e)};F.skeleton=d;F.boundary=function(c){for(var e=[],g=0,m=c.length;g<m;++g)for(var r=c[g],u=0,v=r.length;u<v;++u){for(var w=Array(r.length-1),D=0,
C=0;D<v;++D)D!==u&&(w[C++]=r[D]);e.push(w)}return p(e)};F.connectedComponents=function(c,e){if(e){e=new k(e);for(var g=0;g<c.length;++g)for(var m=c[g],r=0;r<m.length;++r)for(var u=r+1;u<m.length;++u)e.link(m[r],m[u]);m=[];r=e.ranks;for(g=0;g<r.length;++g)r[g]=-1;for(g=0;g<c.length;++g)u=e.find(c[g][0]),0>r[u]?(r[u]=m.length,m.push([c[g].slice(0)])):m[r[u]].push(c[g].slice(0));return m}e=h(p(d(c,0)));g=new k(e.length);for(m=0;m<c.length;++m)for(r=c[m],u=0;u<r.length;++u)for(var v=a(e,[r[u]]),w=u+1;w<
r.length;++w)g.link(v,a(e,[r[w]]));r=[];u=g.ranks;for(m=0;m<u.length;++m)u[m]=-1;for(m=0;m<c.length;++m)v=g.find(a(e,[c[m][0]])),0>u[v]?(u[v]=r.length,r.push([c[m].slice(0)])):r[u[v]].push(c[m].slice(0));return r}},{"bit-twiddle":97,"union-find":568}],531:[function(b,y,F){arguments[4][97][0].apply(F,arguments)},{dup:97}],532:[function(b,y,F){arguments[4][530][0].apply(F,arguments)},{"bit-twiddle":531,dup:530,"union-find":533}],533:[function(b,y,F){function q(n){this.roots=Array(n);this.ranks=Array(n);
for(var p=0;p<n;++p)this.roots[p]=p,this.ranks[p]=0}"use restrict";y.exports=q;q.prototype.length=function(){return this.roots.length};q.prototype.makeSet=function(){var n=this.roots.length;this.roots.push(n);this.ranks.push(0);return n};q.prototype.find=function(n){for(var p=this.roots;p[n]!==n;){var h=p[n];p[n]=p[h];n=h}return n};q.prototype.link=function(n,p){n=this.find(n);p=this.find(p);if(n!==p){var h=this.ranks,a=this.roots,f=h[n],d=h[p];f<d?a[n]=p:d<f?a[p]=n:(a[p]=n,++h[n])}}},{}],534:[function(b,
y,F){y.exports=function(p,h,a){function f(J){if(C[J])return Infinity;var L=v[J],E=w[J];if(0>L||0>E)return Infinity;L=h[L];E=h[E];return Math.abs(q(h[J],L,E))/Math.sqrt(Math.pow(L[0]-E[0],2)+Math.pow(L[1]-E[1],2))}function d(J,L){var E=t[J],K=t[L];t[J]=K;t[L]=E;G[E]=L;G[K]=J}function l(J){for(var L=D[t[J]];;){var E=L,K=2*J+1,N=2*(J+1),O=J;if(K<H){var Q=D[t[K]];Q<E&&(O=K,E=Q)}N<H&&D[t[N]]<E&&(O=N);if(O===J)return J;d(J,O);J=O}}function k(J){for(var L=D[t[J]];0<J;){var E=J&1?J-1>>1:(J>>1)-1;if(0<=E&&
L<D[t[E]])d(J,E),J=E;else return J}}function c(){if(0<H){var J=t[0];d(0,H-1);--H;l(0);return J}return-1}function e(J,L){var E=t[J];if(D[E]===L)return J;D[E]=-Infinity;k(J);c();D[E]=L;H+=1;return k(H-1)}function g(J){if(!C[J]){C[J]=!0;var L=v[J];J=w[J];0<=v[J]&&(v[J]=L);0<=w[L]&&(w[L]=J);0<=G[L]&&e(G[L],f(L));0<=G[J]&&e(G[J],f(J))}}function m(J,L){if(0>J[L])return L;var E=L,K=L;do{var N=J[K];if(!C[K]||0>N||N===K)break;K=N;N=J[K];if(!C[K]||0>N||N===K)break;K=N;E=J[E]}while(E!==K);for(;L!==K;L=J[L])J[L]=
K;return K}for(var r=h.length,u=p.length,v=Array(r),w=Array(r),D=Array(r),C=Array(r),x=0;x<r;++x)v[x]=w[x]=-1,D[x]=Infinity,C[x]=!1;for(x=0;x<u;++x){var A=p[x];if(2!==A.length)throw Error("Input must be a graph");var B=A[1];A=A[0];w[A]=-1!==w[A]?-2:B;v[B]=-1!==v[B]?-2:A}var t=[],G=Array(r);for(x=0;x<r;++x)Infinity>(D[x]=f(x))?(G[x]=t.length,t.push(x)):G[x]=-1;var H=t.length;for(x=H>>1;0<=x;--x)l(x);for(;;){x=c();if(0>x||D[x]>a)break;g(x)}a=[];for(x=0;x<r;++x)C[x]||(G[x]=a.length,a.push(h[x].slice()));
var I=[];p.forEach(function(J){var L=m(v,J[0]);J=m(w,J[1]);0<=L&&0<=J&&L!==J&&(L=G[L],J=G[J],L!==J&&I.push([L,J]))});n.unique(n.normalize(I));return{positions:a,edges:I}};var q=b("robust-orientation"),n=b("simplicial-complex")},{"robust-orientation":520,"simplicial-complex":532}],535:[function(b,y,F){function q(p,h){if(h[0][0]<h[1][0]){var a=h[0];h=h[1]}else if(h[0][0]>h[1][0])a=h[1],h=h[0];else{a=Math.min(p[0][1],p[1][1]);p=Math.max(p[0][1],p[1][1]);var f=Math.min(h[0][1],h[1][1]);h=Math.max(h[0][1],
h[1][1]);return p<f?p-f:a>h?a-h:p-h}p[0][1]<p[1][1]?(f=p[0],p=p[1]):(f=p[1],p=p[0]);return(f=n(h,a,f))?f:(f=n(h,a,p))?f:p-h}y.exports=function(p,h){if(h[0][0]<h[1][0]){var a=h[0];var f=h[1]}else if(h[0][0]>h[1][0])a=h[1],f=h[0];else return q(h,p);if(p[0][0]<p[1][0])h=p[0],p=p[1];else if(p[0][0]>p[1][0])h=p[1],p=p[0];else return-q(p,h);var d=n(a,f,p),l=n(a,f,h);if(0>d){if(0>=l)return d}else if(0<d){if(0<=l)return d}else if(l)return l;d=n(p,h,f);l=n(p,h,a);if(0>d){if(0>=l)return d}else if(0<d){if(0<=
l)return d}else if(l)return l;return f[0]-p[0]};var n=b("robust-orientation")},{"robust-orientation":520}],536:[function(b,y,F){arguments[4][243][0].apply(F,arguments)},{dup:243}],537:[function(b,y,F){function q(c,e,g){this.slabs=c;this.coordinates=e;this.horizontal=g}function n(c,e){return c.y-e}function p(c,e){for(var g=null;c;){var m=c.key;if(m[0][0]<m[1][0]){var r=m[0];var u=m[1]}else r=m[1],u=m[0];r=l(r,u,e);if(0>r)c=c.left;else if(0<r)if(e[0]!==m[1][0])g=c,c=c.right;else{if(m=p(c.right,e))return m;
c=c.left}else{if(e[0]!==m[1][0])return c;if(m=p(c.right,e))return m;c=c.left}}return g}function h(c,e,g,m){this.y=c;this.index=e;this.start=g;this.closed=m}function a(c,e,g,m){this.x=c;this.segment=e;this.create=g;this.index=m}y.exports=function(c){for(var e=c.length,g=2*e,m=Array(g),r=0;r<e;++r){var u=c[r],v=u[0][0]<u[1][0];m[2*r]=new a(u[0][0],u,v,r);m[2*r+1]=new a(u[1][0],u,!v,r)}m.sort(function(x,A){var B=x.x-A.x;return B?B:(B=x.create-A.create)?B:Math.min(x.segment[0][1],x.segment[1][1])-Math.min(A.segment[0][1],
A.segment[1][1])});c=d(k);e=[];u=[];v=[];for(r=0;r<g;){for(var w=m[r].x,D=[];r<g;){var C=m[r];if(C.x!==w)break;r+=1;C.segment[0][0]===C.x&&C.segment[1][0]===C.x?C.create&&(C.segment[0][1]<C.segment[1][1]?(D.push(new h(C.segment[0][1],C.index,!0,!0)),D.push(new h(C.segment[1][1],C.index,!1,!1))):(D.push(new h(C.segment[1][1],C.index,!0,!1)),D.push(new h(C.segment[0][1],C.index,!1,!0)))):c=C.create?c.insert(C.segment,C.index):c.remove(C.segment)}e.push(c.root);u.push(w);v.push(D)}return new q(e,u,v)};
var f=b("binary-search-bounds"),d=b("functional-red-black-tree"),l=b("robust-orientation"),k=b("./lib/order-segments");q.prototype.castUp=function(c){var e=f.le(this.coordinates,c[0]);if(0>e)return-1;var g=p(this.slabs[e],c),m=-1;g&&(m=g.value);if(this.coordinates[e]===c[0]){var r=null;g&&(r=g.key);0<e&&(g=p(this.slabs[e-1],c))&&(r?0<k(g.key,r)&&(r=g.key,m=g.value):(m=g.value,r=g.key));g=this.horizontal[e];if(0<g.length){var u=f.ge(g,c[1],n);if(u<g.length){e=g[u];if(c[1]===e.y){if(e.closed)return e.index;
for(;u<g.length-1&&g[u+1].y===c[1];)if(u+=1,e=g[u],e.closed)return e.index;if(e.y===c[1]&&!e.start){u+=1;if(u>=g.length)return m;e=g[u]}}e.start?r?(c=l(r[0],r[1],[c[0],e.y]),r[0][0]>r[1][0]&&(c=-c),0<c&&(m=e.index)):m=e.index:e.y!==c[1]&&(m=e.index)}}}return m}},{"./lib/order-segments":535,"binary-search-bounds":536,"functional-red-black-tree":247,"robust-orientation":520}],538:[function(b,y,F){function q(a,f){a=h(p(a,f),[f[f.length-1]]);return a[a.length-1]}function n(a,f,d,l){f=-f/(l-f);0>f?f=0:
1<f&&(f=1);l=1-f;for(var k=a.length,c=Array(k),e=0;e<k;++e)c[e]=f*a[e]+l*d[e];return c}var p=b("robust-dot-product"),h=b("robust-sum");y.exports=function(a,f){for(var d=[],l=[],k=q(a[a.length-1],f),c=a[a.length-1],e,g=0;g<a.length;++g,c=e){e=a[g];var m=q(e,f);if(0>k&&0<m||0<k&&0>m)k=n(c,m,e,k),d.push(k),l.push(k.slice());0>m?l.push(e.slice()):0<m?d.push(e.slice()):(d.push(e.slice()),l.push(e.slice()));k=m}return{positive:d,negative:l}};y.exports.positive=function(a,f){for(var d=[],l=q(a[a.length-
1],f),k=a[a.length-1],c,e=0;e<a.length;++e,k=c){c=a[e];var g=q(c,f);(0>l&&0<g||0<l&&0>g)&&d.push(n(k,g,c,l));0<=g&&d.push(c.slice());l=g}return d};y.exports.negative=function(a,f){for(var d=[],l=q(a[a.length-1],f),k=a[a.length-1],c,e=0;e<a.length;++e,k=c){c=a[e];var g=q(c,f);(0>l&&0<g||0<l&&0>g)&&d.push(n(k,g,c,l));0>=g&&d.push(c.slice());l=g}return d}},{"robust-dot-product":517,"robust-sum":525}],539:[function(b,y,F){!function(){function q(a){var f=a;if(h[f])f=h[f];else{for(var d=f,l,k=[],c=0;d;){if(null!==
(l=p.text.exec(d)))k.push(l[0]);else if(null!==(l=p.modulo.exec(d)))k.push("%");else if(null!==(l=p.placeholder.exec(d))){if(l[2]){c|=1;var e=[],g=l[2],m;if(null!==(m=p.key.exec(g)))for(e.push(m[1]);""!==(g=g.substring(m[0].length));)if(null!==(m=p.key_access.exec(g)))e.push(m[1]);else if(null!==(m=p.index_access.exec(g)))e.push(m[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");l[2]=e}else c|=
2;if(3===c)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");k.push({placeholder:l[0],param_no:l[1],keys:l[2],sign:l[3],pad_char:l[4],align:l[5],width:l[6],precision:l[7],type:l[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");d=d.substring(l[0].length)}f=h[f]=k}d=arguments;l=1;k=f.length;e="";var r,u;for(g=0;g<k;g++)if("string"===typeof f[g])e+=f[g];else if("object"===typeof f[g]){m=f[g];if(m.keys)for(c=d[l],r=0;r<m.keys.length;r++){if(void 0==
c)throw Error(q('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[r],m.keys[r-1]));c=c[m.keys[r]]}else c=m.param_no?d[m.param_no]:d[l++];p.not_type.test(m.type)&&p.not_primitive.test(m.type)&&c instanceof Function&&(c=c());if(p.numeric_arg.test(m.type)&&"number"!==typeof c&&isNaN(c))throw new TypeError(q("[sprintf] expecting number but found %T",c));p.number.test(m.type)&&(u=0<=c);switch(m.type){case "b":c=parseInt(c,10).toString(2);break;case "c":c=String.fromCharCode(parseInt(c,
10));break;case "d":case "i":c=parseInt(c,10);break;case "j":c=JSON.stringify(c,null,m.width?parseInt(m.width):0);break;case "e":c=m.precision?parseFloat(c).toExponential(m.precision):parseFloat(c).toExponential();break;case "f":c=m.precision?parseFloat(c).toFixed(m.precision):parseFloat(c);break;case "g":c=m.precision?String(Number(c.toPrecision(m.precision))):parseFloat(c);break;case "o":c=(parseInt(c,10)>>>0).toString(8);break;case "s":c=String(c);c=m.precision?c.substring(0,m.precision):c;break;
case "t":c=String(!!c);c=m.precision?c.substring(0,m.precision):c;break;case "T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase();c=m.precision?c.substring(0,m.precision):c;break;case "u":c=parseInt(c,10)>>>0;break;case "v":c=c.valueOf();c=m.precision?c.substring(0,m.precision):c;break;case "x":c=(parseInt(c,10)>>>0).toString(16);break;case "X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase()}if(p.json.test(m.type))e+=c;else{if(!p.number.test(m.type)||u&&!m.sign)var v="";else v=u?"+":
"-",c=c.toString().replace(p.sign,"");r=m.pad_char?"0"===m.pad_char?"0":m.pad_char.charAt(1):" ";var w=m.width-(v+c).length;w=m.width?0<w?r.repeat(w):"":"";e+=m.align?v+c+w:"0"===r?v+w+c:w+v+c}}return e}function n(a,f){return q.apply(null,[a].concat(f||[]))}var p={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,
key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},h=Object.create(null);"undefined"!==typeof F&&(F.sprintf=q,F.vsprintf=n);"undefined"!==typeof window&&(window.sprintf=q,window.vsprintf=n)}()},{}],540:[function(b,y,F){var q=b("parenthesis");y.exports=function(n,p,h){if(null==n)throw Error("First argument should be a string");if(null==p)throw Error("Separator should be a string or a RegExp");if(!h)h={};else if("string"===typeof h||Array.isArray(h))h=
{ignore:h};null==h.escape&&(h.escape=!0);null==h.ignore?h.ignore="[] () {} \x3c\x3e \"\" '' ``  ".split(" "):("string"===typeof h.ignore&&(h.ignore=[h.ignore]),h.ignore=h.ignore.map(function(k){1===k.length&&(k+=k);return k}));n=q.parse(n,{flat:!0,brackets:h.ignore});var a=n[0].split(p);if(h.escape){h=[];for(var f=0;f<a.length;f++){var d=a[f],l=a[f+1];"\\"===d[d.length-1]&&"\\"!==d[d.length-2]?(h.push(d+p+l),f++):h.push(d)}a=h}for(f=0;f<a.length;f++)n[0]=a[f],a[f]=q.stringify(n,{flat:!0});return a}},
{parenthesis:477}],541:[function(b,y,F){y.exports=function(q){function n(v){var w=[v],D=[v];h[v]=a[v]=e;f[v]=!0;for(e+=1;0<D.length;){v=D[D.length-1];var C=q[v];if(d[v]<C.length){for(var x=d[v];x<C.length;++x){var A=C[x];if(0>h[A]){h[A]=a[A]=e;f[A]=!0;e+=1;w.push(A);D.push(A);break}else f[A]&&(a[v]=Math.min(a[v],a[A])|0);0<=l[A]&&k[v].push(l[A])}d[v]=x}else{if(a[v]===h[v]){var B=[];C=[];A=0;for(x=w.length-1;0<=x;--x){var t=w[x];f[t]=!1;B.push(t);C.push(k[t]);A+=k[t].length;l[t]=g.length;if(t===v){w.length=
x;break}}g.push(B);v=Array(A);for(x=0;x<C.length;x++)for(B=0;B<C[x].length;B++)v[--A]=C[x][B];m.push(v)}D.pop()}}}for(var p=q.length,h=Array(p),a=Array(p),f=Array(p),d=Array(p),l=Array(p),k=Array(p),c=0;c<p;++c)h[c]=-1,a[c]=0,f[c]=!1,d[c]=0,l[c]=-1,k[c]=[];var e=0,g=[],m=[];for(c=0;c<p;++c)0>h[c]&&n(c);for(c=0;c<m.length;c++){var r=m[c];if(0!==r.length){r.sort(function(v,w){return v-w});p=[r[0]];for(var u=1;u<r.length;u++)r[u]!==r[u-1]&&p.push(r[u]);m[c]=p}}return{components:g,adjacencyList:m}}},
{}],542:[function(b,y,F){function q(f,d){var l=f.length,k=["'use strict';"],c="surfaceNets"+f.join("_")+"d"+d;k.push("var contour\x3dgenContour({","order:[",f.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p \x3e c)|0 },");"generic"===d&&k.push("getters:[0],");var e=[];d=[];for(f=0;f<l;++f)e.push("d"+f),d.push("d"+f);for(f=0;f<1<<l;++f)e.push("v"+f),d.push("v"+f);for(f=0;f<1<<l;++f)e.push("p"+f),d.push("p"+f);e.push("a","b","c");d.push("a","c");k.push("vertex:function vertexFunc(",
e.join(),"){");e=[];for(f=0;f<1<<l;++f)e.push("(p"+f+"\x3c\x3c"+f+")");k.push("var m\x3d(",e.join("+"),")|0;if(m\x3d\x3d\x3d0||m\x3d\x3d\x3d",(1<<(1<<l))-1,"){return}");e=[];var g=[];128>=1<<(1<<l)?(k.push("switch(m){"),g=k):k.push("switch(m\x3e\x3e\x3e7){");for(f=0;f<1<<(1<<l);++f){128<1<<(1<<l)&&0===f%128&&(0<e.length&&g.push("}}"),g="vExtra"+e.length,k.push("case ",f>>>7,":",g,"(m\x260x7f,",d.join(),");break;"),g=["function ",g,"(m,",d.join(),"){switch(m){"],e.push(g));g.push("case ",f&127,":");
for(var m=Array(l),r=Array(l),u=Array(l),v=Array(l),w=0,D=0;D<l;++D)m[D]=[],r[D]=[],u[D]=0,v[D]=0;for(D=0;D<1<<l;++D)for(var C=0;C<l;++C){var x=D^1<<C;if(!(x>D)&&!(f&1<<x)!==!(f&1<<D)){var A=1;f&1<<x?r[C].push("v"+x+"-v"+D):(r[C].push("v"+D+"-v"+x),A=-A);0>A?(m[C].push("-v"+D+"-v"+x),u[C]+=2):(m[C].push("v"+D+"+v"+x),u[C]-=2);w+=1;for(A=0;A<l;++A)A!==C&&(x&1<<A?v[A]+=1:--v[A])}}D=[];for(C=0;C<l;++C)0===m[C].length?D.push("d"+C+"-0.5"):(x="",0>u[C]?x=u[C]+"*c":0<u[C]&&(x="+"+u[C]+"*c"),D.push("d"+
C+"-"+(.5+v[C]/w*.5)+"-"+m[C].length/w*.5+"*("+m[C].join("+")+x+")/("+r[C].join("+")+")"));g.push("a.push([",D.join(),"]);","break;")}k.push("}},");0<e.length&&g.push("}}");d=[];for(f=0;f<1<<l-1;++f)d.push("v"+f);d.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",d.join(),"){");l=p(l-1);k.push("if(p0){b.push(",l.map(function(B){return"["+B.map(function(t){return"v"+t})+"]"}).join(),")}else{b.push(",l.map(function(B){B=B.slice();B.reverse();return"["+B.map(function(t){return"v"+
t})+"]"}).join(),")}}});function ",c,"(array,level){var verts\x3d[],cells\x3d[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",c,";");for(f=0;f<e.length;++f)k.push(e[f].join(""));return(new Function("genContour",k.join("")))(n)}y.exports=function(f,d){if(0>=f.dimension)return{positions:[],cells:[]};if(1===f.dimension){f=h(f,d);d=f.length;for(var l=Array(d),k=Array(d),c=0;c<d;++c)l[c]=[f[c]],k[c]=[c];return{positions:l,cells:k}}l=f.order.join()+"-"+f.dtype;k=a[l];
d=+d||0;k||(k=a[l]=q(f.order,f.dtype));return k(f,d)};var n=b("ndarray-extract-contour"),p=b("triangulate-hypercube"),h=b("zero-crossings"),a={}},{"ndarray-extract-contour":461,"triangulate-hypercube":552,"zero-crossings":596}],543:[function(b,y,F){Object.defineProperty(F,"__esModule",{value:!0});var q=function(){return function(d,l){if(Array.isArray(d))return d;if(Symbol.iterator in Object(d)){var k=[],c=!0,e=!1,g=void 0;try{for(var m=d[Symbol.iterator](),r;!(c=(r=m.next()).done)&&(k.push(r.value),
!l||k.length!==l);c=!0);}catch(u){e=!0,g=u}finally{try{if(!c&&m["return"])m["return"]()}finally{if(e)throw g;}}return k}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),n=2*Math.PI,p=function(d,l,k,c,e,g,m){var r=d.x;d=d.y;r*=l;d*=k;return{x:c*r-e*d+g,y:e*r+c*d+m}},h=function(d,l){var k=1.5707963267948966===l?.551915024494:-1.5707963267948966===l?-.551915024494:4/3*Math.tan(l/4),c=Math.cos(d),e=Math.sin(d),g=Math.cos(d+l);d=Math.sin(d+l);return[{x:c-e*k,y:e+c*k},{x:g+
d*k,y:d-g*k},{x:g,y:d}]},a=function(d,l,k,c){var e=d*k+l*c;1<e&&(e=1);-1>e&&(e=-1);return(0>d*c-l*k?-1:1)*Math.acos(e)},f=function(d,l,k,c,e,g,m,r,u,v,w,D){var C=Math.pow(e,2),x=Math.pow(g,2),A=Math.pow(w,2),B=Math.pow(D,2),t=C*x-C*B-x*A;0>t&&(t=0);t=Math.sqrt(t/(C*B+x*A))*(m===r?-1:1);m=t*e/g*D;t=t*-g/e*w;d=v*m-u*t+(d+k)/2;l=u*m+v*t+(l+c)/2;c=(w-m)/e;u=(D-t)/g;e=(-w-m)/e;D=(-D-t)/g;g=a(1,0,c,u);D=a(c,u,e,D);0===r&&0<D&&(D-=n);1===r&&0>D&&(D+=n);return[d,l,g,D]};F.default=function(d){var l=d.px,k=
d.py,c=d.cx,e=d.cy,g=d.rx,m=d.ry,r=d.xAxisRotation,u=void 0===r?0:r;r=d.largeArcFlag;var v=d.sweepFlag;d=[];if(0===g||0===m)return[];var w=Math.sin(u*n/360),D=Math.cos(u*n/360);u=D*(l-c)/2+w*(k-e)/2;var C=-w*(l-c)/2+D*(k-e)/2;if(0===u&&0===C)return[];g=Math.abs(g);m=Math.abs(m);var x=Math.pow(u,2)/Math.pow(g,2)+Math.pow(C,2)/Math.pow(m,2);1<x&&(g*=Math.sqrt(x),m*=Math.sqrt(x));l=f(l,k,c,e,g,m,void 0===r?0:r,void 0===v?0:v,w,D,u,C);k=q(l,4);var A=k[0],B=k[1];l=k[2];k=k[3];c=Math.abs(k)/(n/4);1E-7>
Math.abs(1-c)&&(c=1);c=Math.max(Math.ceil(c),1);k/=c;for(e=0;e<c;e++)d.push(h(l,k)),l+=k;return d.map(function(t){var G=p(t[0],g,m,D,w,A,B),H=G.x;G=G.y;var I=p(t[1],g,m,D,w,A,B),J=I.x;I=I.y;t=p(t[2],g,m,D,w,A,B);return{x1:H,y1:G,x2:J,y2:I,x:t.x,y:t.y}})};y.exports=F.default},{}],544:[function(b,y,F){var q=b("parse-svg-path"),n=b("abs-svg-path"),p=b("normalize-svg-path"),h=b("is-svg-path"),a=b("assert");y.exports=function(f){Array.isArray(f)&&1===f.length&&"string"===typeof f[0]&&(f=f[0]);"string"===
typeof f&&(a(h(f),"String is not an SVG path."),f=q(f));a(Array.isArray(f),"Argument should be a string or an array of path segments.");f=n(f);f=p(f);if(!f.length)return[0,0,0,0];for(var d=[Infinity,Infinity,-Infinity,-Infinity],l=0,k=f.length;l<k;l++)for(var c=f[l].slice(1),e=0;e<c.length;e+=2)c[e+0]<d[0]&&(d[0]=c[e+0]),c[e+1]<d[1]&&(d[1]=c[e+1]),c[e+0]>d[2]&&(d[2]=c[e+0]),c[e+1]>d[3]&&(d[3]=c[e+1]);return d}},{"abs-svg-path":65,assert:73,"is-svg-path":445,"normalize-svg-path":545,"parse-svg-path":479}],
545:[function(b,y,F){function q(h,a,f,d){return["C",h,a,f,d,f,d]}function n(h,a,f,d,l,k){return["C",h/3+2/3*f,a/3+2/3*d,l/3+2/3*f,k/3+2/3*d,l,k]}y.exports=function(h){for(var a,f=[],d=0,l=0,k=0,c=0,e=null,g=null,m=0,r=0,u=0,v=h.length;u<v;u++){var w=h[u],D=w[0];switch(D){case "M":k=w[1];c=w[2];break;case "A":var C=p({px:m,py:r,cx:w[6],cy:w[7],rx:w[1],ry:w[2],xAxisRotation:w[3],largeArcFlag:w[4],sweepFlag:w[5]});if(!C.length)continue;for(a=0;a<C.length;a++)w=C[a],w=["C",w.x1,w.y1,w.x2,w.y2,w.x,w.y],
a<C.length-1&&f.push(w);break;case "S":C=m;if("C"==a||"S"==a)C+=C-d,r+=r-l;w=["C",C,r,w[1],w[2],w[3],w[4]];break;case "T":"Q"==a||"T"==a?(e=2*m-e,g=2*r-g):(e=m,g=r);w=n(m,r,e,g,w[1],w[2]);break;case "Q":e=w[1];g=w[2];w=n(m,r,w[1],w[2],w[3],w[4]);break;case "L":w=q(m,r,w[1],w[2]);break;case "H":w=q(m,r,w[1],r);break;case "V":w=q(m,r,m,w[1]);break;case "Z":w=q(m,r,k,c)}a=D;m=w[w.length-2];r=w[w.length-1];4<w.length?(d=w[w.length-4],l=w[w.length-3]):(d=m,l=r);f.push(w)}return f};var p=b("svg-arc-to-cubic-bezier")},
{"svg-arc-to-cubic-bezier":543}],546:[function(b,y,F){function q(){if(null!=k)return k;var c=document.createElement("canvas").getContext("2d");c.canvas.width=c.canvas.height=1;if(!window.Path2D)return k=!1;var e=new Path2D("M0,0h1v1h-1v-1Z");c.fillStyle="black";c.fill(e);return k=(c=c.getImageData(0,0,1,1))&&c.data&&255===c.data[3]}var n=b("svg-path-bounds"),p=b("parse-svg-path"),h=b("draw-svg-path"),a=b("is-svg-path"),f=b("bitmap-sdf"),d=document.createElement("canvas"),l=d.getContext("2d");y.exports=
function(c,e){if(!a(c))throw Error("Argument should be valid svg path string");e||(e={});if(e.shape){var g=e.shape[0];var m=e.shape[1]}else g=d.width=e.w||e.width||200,m=d.height=e.h||e.height||200;var r=Math.min(g,m),u=e.stroke||0,v=e.viewbox||e.viewBox||n(c);v=[g/(v[2]-v[0]),m/(v[3]-v[1])];v=Math.min(v[0]||0,v[1]||0)/2;l.fillStyle="black";l.fillRect(0,0,g,m);l.fillStyle="white";u&&("number"!=typeof u&&(u=1),l.strokeStyle=0<u?"white":"black",l.lineWidth=Math.abs(u));l.translate(.5*g,.5*m);l.scale(v,
v);q()?(c=new Path2D(c),l.fill(c),u&&l.stroke(c)):(c=p(c),h(l,c),l.fill(),u&&l.stroke());l.setTransform(1,0,0,1,0,0);return f(l,{cutoff:null!=e.cutoff?e.cutoff:.5,radius:null!=e.radius?e.radius:.5*r})};var k},{"bitmap-sdf":98,"draw-svg-path":174,"is-svg-path":445,"parse-svg-path":479,"svg-path-bounds":544}],547:[function(b,y,F){(function(q){function n(a,f,d){d=d||{};var l=h[a];l||(l=h[a]={" ":{data:new Float32Array(0),shape:.2}});var k=l[f];if(!k)if(1>=f.length||!/\d/.test(f)){k=p(f,{triangles:!0,
font:a,textAlign:d.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});d=k.cells;k=k.positions;for(var c=new Float32Array(6*d.length),e=a=0,g=0;g<d.length;++g)for(var m=d[g],r=0;3>r;++r){var u=k[m[r]];c[a++]=u[0];c[a++]=u[1]+1.4;e=Math.max(u[0],e)}k=l[f]={data:c,shape:e}}else{e=f.split(/(\d|\s)/);d=Array(e.length);for(c=k=g=0;c<e.length;++c)d[c]=n(a,e[c]),g+=d[c].data.length,k+=d[c].shape,0<c&&(k+=.02);a=new Float32Array(g);e=0;
g=-.5*k;for(c=0;c<d.length;++c){m=d[c].data;for(r=0;r<m.length;r+=2)a[e++]=m[r]+g,a[e++]=m[r+1];g+=d[c].shape+.02}k=l[f]={data:a,shape:k}}return k}y.exports=n;var p=b("vectorize-text");q=window||q.global||{};var h=q.__TEXT_CACHE||{};q.__TEXT_CACHE={}}).call(this,b("_process"))},{_process:500,"vectorize-text":572}],548:[function(b,y,F){(function(q){function n(V,aa){var ba,Y;V=V?V:"";aa=aa||{};if(V instanceof n)return V;if(!(this instanceof n))return new n(V,aa);var ea=V;var da={r:0,g:0,b:0};var ca=
1;var la=ba=!1;if("string"==typeof ea)a:{ea=ea.replace(I,"").replace(J,"").toLowerCase();var pa=!1;if(Q[ea])ea=Q[ea],pa=!0;else if("transparent"==ea){ea={r:0,g:0,b:0,a:0,format:"name"};break a}ea=(Y=T.rgb.exec(ea))?{r:Y[1],g:Y[2],b:Y[3]}:(Y=T.rgba.exec(ea))?{r:Y[1],g:Y[2],b:Y[3],a:Y[4]}:(Y=T.hsl.exec(ea))?{h:Y[1],s:Y[2],l:Y[3]}:(Y=T.hsla.exec(ea))?{h:Y[1],s:Y[2],l:Y[3],a:Y[4]}:(Y=T.hsv.exec(ea))?{h:Y[1],s:Y[2],v:Y[3]}:(Y=T.hsva.exec(ea))?{h:Y[1],s:Y[2],v:Y[3],a:Y[4]}:(Y=T.hex8.exec(ea))?{r:parseInt(Y[1],
16),g:parseInt(Y[2],16),b:parseInt(Y[3],16),a:parseInt(Y[4],16)/255,format:pa?"name":"hex8"}:(Y=T.hex6.exec(ea))?{r:parseInt(Y[1],16),g:parseInt(Y[2],16),b:parseInt(Y[3],16),format:pa?"name":"hex"}:(Y=T.hex4.exec(ea))?{r:parseInt(Y[1]+""+Y[1],16),g:parseInt(Y[2]+""+Y[2],16),b:parseInt(Y[3]+""+Y[3],16),a:parseInt(Y[4]+""+Y[4],16)/255,format:pa?"name":"hex8"}:(Y=T.hex3.exec(ea))?{r:parseInt(Y[1]+""+Y[1],16),g:parseInt(Y[2]+""+Y[2],16),b:parseInt(Y[3]+""+Y[3],16),format:pa?"name":"hex"}:!1}if("object"==
typeof ea){if(H(ea.r)&&H(ea.g)&&H(ea.b))da=ea.g,ba=ea.b,da={r:255*B(ea.r,255),g:255*B(da,255),b:255*B(ba,255)},ba=!0,la="%"===String(ea.r).substr(-1)?"prgb":"rgb";else if(H(ea.h)&&H(ea.s)&&H(ea.v)){da=G(ea.s);la=G(ea.v);Y=ea.h;ba=da;da=la;Y=6*B(Y,360);ba=B(ba,100);da=B(da,100);la=q.floor(Y);var qa=Y-la;Y=da*(1-ba);pa=da*(1-qa*ba);ba=da*(1-(1-qa)*ba);la%=6;da={r:255*[da,pa,Y,Y,ba,da][la],g:255*[ba,da,da,pa,Y,Y][la],b:255*[Y,Y,ba,da,da,pa][la]};ba=!0;la="hsv"}else H(ea.h)&&H(ea.s)&&H(ea.l)&&(da=G(ea.s),
ba=G(ea.l),da=h(ea.h,da,ba),ba=!0,la="hsl");ea.hasOwnProperty("a")&&(ca=ea.a)}ca=A(ca);ea=ea.format||la;la=K(255,N(da.r,0));Y=K(255,N(da.g,0));da=K(255,N(da.b,0));this._originalInput=V;this._r=la;this._g=Y;this._b=da;this._a=ca;this._roundA=E(100*this._a)/100;this._format=aa.format||ea;this._gradientType=aa.gradientType;1>this._r&&(this._r=E(this._r));1>this._g&&(this._g=E(this._g));1>this._b&&(this._b=E(this._b));this._ok=ba;this._tc_id=L++}function p(V,aa,ba){V=B(V,255);aa=B(aa,255);ba=B(ba,255);
var Y=N(V,aa,ba),ea=K(V,aa,ba),da=(Y+ea)/2;if(Y==ea)var ca=ea=0;else{var la=Y-ea;ea=.5<da?la/(2-Y-ea):la/(Y+ea);switch(Y){case V:ca=(aa-ba)/la+(aa<ba?6:0);break;case aa:ca=(ba-V)/la+2;break;case ba:ca=(V-aa)/la+4}ca/=6}return{h:ca,s:ea,l:da}}function h(V,aa,ba){function Y(ca,la,pa){0>pa&&(pa+=1);1<pa&&--pa;return pa<1/6?ca+6*(la-ca)*pa:.5>pa?la:pa<2/3?ca+(la-ca)*(2/3-pa)*6:ca}V=B(V,360);aa=B(aa,100);ba=B(ba,100);if(0===aa)ba=aa=V=ba;else{var ea=.5>ba?ba*(1+aa):ba+aa-ba*aa,da=2*ba-ea;ba=Y(da,ea,V+
1/3);aa=Y(da,ea,V);V=Y(da,ea,V-1/3)}return{r:255*ba,g:255*aa,b:255*V}}function a(V,aa,ba){V=B(V,255);aa=B(aa,255);ba=B(ba,255);var Y=N(V,aa,ba),ea=K(V,aa,ba),da=Y-ea;if(Y==ea)var ca=0;else{switch(Y){case V:ca=(aa-ba)/da+(aa<ba?6:0);break;case aa:ca=(ba-V)/da+2;break;case ba:ca=(V-aa)/da+4}ca/=6}return{h:ca,s:0===Y?0:da/Y,v:Y}}function f(V,aa,ba,Y){V=[t(E(V).toString(16)),t(E(aa).toString(16)),t(E(ba).toString(16))];return Y&&V[0].charAt(0)==V[0].charAt(1)&&V[1].charAt(0)==V[1].charAt(1)&&V[2].charAt(0)==
V[2].charAt(1)?V[0].charAt(0)+V[1].charAt(0)+V[2].charAt(0):V.join("")}function d(V,aa,ba,Y){return[t(q.round(255*parseFloat(Y)).toString(16)),t(E(V).toString(16)),t(E(aa).toString(16)),t(E(ba).toString(16))].join("")}function l(V,aa){aa=0===aa?0:aa||10;V=n(V).toHsl();V.s-=aa/100;V.s=K(1,N(0,V.s));return n(V)}function k(V,aa){aa=0===aa?0:aa||10;V=n(V).toHsl();V.s+=aa/100;V.s=K(1,N(0,V.s));return n(V)}function c(V){return n(V).desaturate(100)}function e(V,aa){aa=0===aa?0:aa||10;V=n(V).toHsl();V.l+=
aa/100;V.l=K(1,N(0,V.l));return n(V)}function g(V,aa){aa=0===aa?0:aa||10;V=n(V).toRgb();V.r=N(0,K(255,V.r-E(255*-(aa/100))));V.g=N(0,K(255,V.g-E(255*-(aa/100))));V.b=N(0,K(255,V.b-E(255*-(aa/100))));return n(V)}function m(V,aa){aa=0===aa?0:aa||10;V=n(V).toHsl();V.l-=aa/100;V.l=K(1,N(0,V.l));return n(V)}function r(V,aa){V=n(V).toHsl();aa=(V.h+aa)%360;V.h=0>aa?360+aa:aa;return n(V)}function u(V){V=n(V).toHsl();V.h=(V.h+180)%360;return n(V)}function v(V){var aa=n(V).toHsl(),ba=aa.h;return[n(V),n({h:(ba+
120)%360,s:aa.s,l:aa.l}),n({h:(ba+240)%360,s:aa.s,l:aa.l})]}function w(V){var aa=n(V).toHsl(),ba=aa.h;return[n(V),n({h:(ba+90)%360,s:aa.s,l:aa.l}),n({h:(ba+180)%360,s:aa.s,l:aa.l}),n({h:(ba+270)%360,s:aa.s,l:aa.l})]}function D(V){var aa=n(V).toHsl(),ba=aa.h;return[n(V),n({h:(ba+72)%360,s:aa.s,l:aa.l}),n({h:(ba+216)%360,s:aa.s,l:aa.l})]}function C(V,aa,ba){aa=aa||6;ba=ba||30;var Y=n(V).toHsl();ba=360/ba;V=[n(V)];for(Y.h=(Y.h-(ba*aa>>1)+720)%360;--aa;)Y.h=(Y.h+ba)%360,V.push(n(Y));return V}function x(V,
aa){aa=aa||6;var ba=n(V).toHsv();V=ba.h;var Y=ba.s;ba=ba.v;for(var ea=[],da=1/aa;aa--;)ea.push(n({h:V,s:Y,v:ba})),ba=(ba+da)%1;return ea}function A(V){V=parseFloat(V);if(isNaN(V)||0>V||1<V)V=1;return V}function B(V,aa){var ba=V;"string"==typeof ba&&-1!=ba.indexOf(".")&&1===parseFloat(ba)&&(V="100%");ba="string"===typeof V&&-1!=V.indexOf("%");V=K(aa,N(0,parseFloat(V)));ba&&(V=parseInt(V*aa,10)/100);return 1E-6>q.abs(V-aa)?1:V%aa/parseFloat(aa)}function t(V){return 1==V.length?"0"+V:""+V}function G(V){1>=
V&&(V=100*V+"%");return V}function H(V){return!!T.CSS_UNIT.exec(V)}var I=/^\s+/,J=/\s+$/,L=0,E=q.round,K=q.min,N=q.max,O=q.random;n.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var V=this.toRgb();return(299*V.r+587*V.g+114*V.b)/1E3},getLuminance:function(){var V=
this.toRgb();var aa=V.r/255;var ba=V.g/255;V=V.b/255;aa=.03928>=aa?aa/12.92:q.pow((aa+.055)/1.055,2.4);ba=.03928>=ba?ba/12.92:q.pow((ba+.055)/1.055,2.4);V=.03928>=V?V/12.92:q.pow((V+.055)/1.055,2.4);return.2126*aa+.7152*ba+.0722*V},setAlpha:function(V){this._a=A(V);this._roundA=E(100*this._a)/100;return this},toHsv:function(){var V=a(this._r,this._g,this._b);return{h:360*V.h,s:V.s,v:V.v,a:this._a}},toHsvString:function(){var V=a(this._r,this._g,this._b),aa=E(360*V.h),ba=E(100*V.s);V=E(100*V.v);return 1==
this._a?"hsv("+aa+", "+ba+"%, "+V+"%)":"hsva("+aa+", "+ba+"%, "+V+"%, "+this._roundA+")"},toHsl:function(){var V=p(this._r,this._g,this._b);return{h:360*V.h,s:V.s,l:V.l,a:this._a}},toHslString:function(){var V=p(this._r,this._g,this._b),aa=E(360*V.h),ba=E(100*V.s);V=E(100*V.l);return 1==this._a?"hsl("+aa+", "+ba+"%, "+V+"%)":"hsla("+aa+", "+ba+"%, "+V+"%, "+this._roundA+")"},toHex:function(V){return f(this._r,this._g,this._b,V)},toHexString:function(V){return"#"+this.toHex(V)},toHex8:function(V){var aa=
this._g,ba=this._b,Y=this._a;aa=[t(E(this._r).toString(16)),t(E(aa).toString(16)),t(E(ba).toString(16)),t(q.round(255*parseFloat(Y)).toString(16))];V=V&&aa[0].charAt(0)==aa[0].charAt(1)&&aa[1].charAt(0)==aa[1].charAt(1)&&aa[2].charAt(0)==aa[2].charAt(1)&&aa[3].charAt(0)==aa[3].charAt(1)?aa[0].charAt(0)+aa[1].charAt(0)+aa[2].charAt(0)+aa[3].charAt(0):aa.join("");return V},toHex8String:function(V){return"#"+this.toHex8(V)},toRgb:function(){return{r:E(this._r),g:E(this._g),b:E(this._b),a:this._a}},toRgbString:function(){return 1==
this._a?"rgb("+E(this._r)+", "+E(this._g)+", "+E(this._b)+")":"rgba("+E(this._r)+", "+E(this._g)+", "+E(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:E(100*B(this._r,255))+"%",g:E(100*B(this._g,255))+"%",b:E(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+E(100*B(this._r,255))+"%, "+E(100*B(this._g,255))+"%, "+E(100*B(this._b,255))+"%)":"rgba("+E(100*B(this._r,255))+"%, "+E(100*B(this._g,255))+"%, "+E(100*B(this._b,255))+"%, "+this._roundA+
")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:P[f(this._r,this._g,this._b,!0)]||!1},toFilter:function(V){var aa="#"+d(this._r,this._g,this._b,this._a),ba=aa,Y=this._gradientType?"GradientType \x3d 1, ":"";V&&(V=n(V),ba="#"+d(V._r,V._g,V._b,V._a));return"progid:DXImageTransform.Microsoft.gradient("+Y+"startColorstr\x3d"+aa+",endColorstr\x3d"+ba+")"},toString:function(V){var aa=!!V;V=V||this._format;var ba=!1,Y=1>this._a&&0<=this._a;if(!aa&&Y&&("hex"===V||"hex6"===V||"hex3"===
V||"hex4"===V||"hex8"===V||"name"===V))return"name"===V&&0===this._a?this.toName():this.toRgbString();"rgb"===V&&(ba=this.toRgbString());"prgb"===V&&(ba=this.toPercentageRgbString());if("hex"===V||"hex6"===V)ba=this.toHexString();"hex3"===V&&(ba=this.toHexString(!0));"hex4"===V&&(ba=this.toHex8String(!0));"hex8"===V&&(ba=this.toHex8String());"name"===V&&(ba=this.toName());"hsl"===V&&(ba=this.toHslString());"hsv"===V&&(ba=this.toHsvString());return ba||this.toHexString()},clone:function(){return n(this.toString())},
_applyModification:function(V,aa){V=V.apply(null,[this].concat([].slice.call(aa)));this._r=V._r;this._g=V._g;this._b=V._b;this.setAlpha(V._a);return this},lighten:function(){return this._applyModification(e,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(k,arguments)},greyscale:function(){return this._applyModification(c,
arguments)},spin:function(){return this._applyModification(r,arguments)},_applyCombination:function(V,aa){return V.apply(null,[this].concat([].slice.call(aa)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(u,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(D,arguments)},triad:function(){return this._applyCombination(v,arguments)},tetrad:function(){return this._applyCombination(w,
arguments)}};n.fromRatio=function(V,aa){if("object"==typeof V){var ba={},Y;for(Y in V)V.hasOwnProperty(Y)&&(ba[Y]="a"===Y?V[Y]:G(V[Y]));V=ba}return n(V,aa)};n.equals=function(V,aa){return V&&aa?n(V).toRgbString()==n(aa).toRgbString():!1};n.random=function(){return n.fromRatio({r:O(),g:O(),b:O()})};n.mix=function(V,aa,ba){ba=0===ba?0:ba||50;V=n(V).toRgb();aa=n(aa).toRgb();ba/=100;return n({r:(aa.r-V.r)*ba+V.r,g:(aa.g-V.g)*ba+V.g,b:(aa.b-V.b)*ba+V.b,a:(aa.a-V.a)*ba+V.a})};n.readability=function(V,aa){V=
n(V);aa=n(aa);return(q.max(V.getLuminance(),aa.getLuminance())+.05)/(q.min(V.getLuminance(),aa.getLuminance())+.05)};n.isReadable=function(V,aa,ba){V=n.readability(V,aa);aa=!1;var Y=ba||{level:"AA",size:"small"};ba=(Y.level||"AA").toUpperCase();Y=(Y.size||"small").toLowerCase();"AA"!==ba&&"AAA"!==ba&&(ba="AA");"small"!==Y&&"large"!==Y&&(Y="small");switch(ba+Y){case "AAsmall":case "AAAlarge":aa=4.5<=V;break;case "AAlarge":aa=3<=V;break;case "AAAsmall":aa=7<=V}return aa};n.mostReadable=function(V,aa,
ba){var Y=null,ea=0;ba=ba||{};var da=ba.includeFallbackColors;var ca=ba.level;var la=ba.size;for(var pa=0;pa<aa.length;pa++){var qa=n.readability(V,aa[pa]);qa>ea&&(ea=qa,Y=n(aa[pa]))}if(n.isReadable(V,Y,{level:ca,size:la})||!da)return Y;ba.includeFallbackColors=!1;return n.mostReadable(V,["#fff","#000"],ba)};var Q=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",
brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",
darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",
lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",
mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",
pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",
whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=n.hexNames=function(V){var aa={},ba;for(ba in V)V.hasOwnProperty(ba)&&(aa[V[ba]]=ba);return aa}(Q),T={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof y&&y.exports?
y.exports=n:window.tinycolor=n})(Math)},{}],549:[function(b,y,F){function q(p){if(p.length){if(p instanceof Float32Array)return p;var h=new Float32Array(p);h.set(p);return h}n[0]=p;return n[0]}y.exports=q;y.exports.float32=y.exports.float=q;y.exports.fract32=y.exports.fract=function(p){if(p.length){for(var h=q(p),a=0,f=h.length;a<f;a++)h[a]=p[a]-h[a];return h}return q(p-q(p))};var n=new Float32Array(1)},{}],550:[function(b,y,F){function q(a,f){f=p(getComputedStyle(a).getPropertyValue(f));return f[0]*
n(f[1],a)}function n(a,f){f=f||document.body;a=(a||"px").trim().toLowerCase();if(f===window||f===document)f=document.body;switch(a){case "%":return f.clientHeight/100;case "ch":case "ex":var d=document.createElement("div");d.style["font-size"]="128"+a;f.appendChild(d);a=q(d,"font-size")/128;f.removeChild(d);return a;case "em":return q(f,"font-size");case "rem":return q(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,
window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return h;case "cm":return h/2.54;case "mm":return h/25.4;case "pt":return h/72;case "pc":return h/6}return 1}var p=b("parse-unit");y.exports=n;var h=96},{"parse-unit":480}],551:[function(b,y,F){(function(q,n){"object"===typeof F&&"undefined"!==typeof y?n(F):(q=q||self,n(q.topojson=q.topojson||{}))})(this,function(q){function n(m){return m}function p(m){if(null==m)return n;var r,u,v=m.scale[0],w=
m.scale[1],D=m.translate[0],C=m.translate[1];return function(x,A){A||(r=u=0);A=2;var B=x.length,t=Array(B);t[0]=(r+=x[0])*v+D;for(t[1]=(u+=x[1])*w+C;A<B;)t[A]=x[A],++A;return t}}function h(m){function r(B){B=v(B);B[0]<D&&(D=B[0]);B[0]>x&&(x=B[0]);B[1]<C&&(C=B[1]);B[1]>A&&(A=B[1])}function u(B){switch(B.type){case "GeometryCollection":B.geometries.forEach(u);break;case "Point":r(B.coordinates);break;case "MultiPoint":B.coordinates.forEach(r)}}var v=p(m.transform),w,D=Infinity,C=D,x=-D,A=-D;m.arcs.forEach(function(B){for(var t=
-1,G=B.length,H;++t<G;)H=v(B[t],t),H[0]<D&&(D=H[0]),H[0]>x&&(x=H[0]),H[1]<C&&(C=H[1]),H[1]>A&&(A=H[1])});for(w in m.objects)u(m.objects[w]);return[D,C,x,A]}function a(m,r){var u=r.id,v=r.bbox,w=null==r.properties?{}:r.properties;m=f(m,r);return null==u&&null==v?{type:"Feature",properties:w,geometry:m}:null==v?{type:"Feature",id:u,properties:w,geometry:m}:{type:"Feature",id:u,bbox:v,properties:w,geometry:m}}function f(m,r){function u(B){return x(B)}function v(B){for(var t=[],G=0,H=B.length;G<H;++G){var I=
B[G],J=t;J.length&&J.pop();for(var L=A[0>I?~I:I],E=0,K=L.length;E<K;++E)J.push(x(L[E],E));if(0>I)for(I=J,J=I.length,L=J-K;L<--J;)K=I[L],I[L++]=I[J],I[J]=K}2>t.length&&t.push(t[0]);return t}function w(B){for(B=v(B);4>B.length;)B.push(B[0]);return B}function D(B){return B.map(w)}function C(B){var t=B.type;switch(t){case "GeometryCollection":return{type:t,geometries:B.geometries.map(C)};case "Point":B=x(B.coordinates);break;case "MultiPoint":B=B.coordinates.map(u);break;case "LineString":B=v(B.arcs);
break;case "MultiLineString":B=B.arcs.map(v);break;case "Polygon":B=D(B.arcs);break;case "MultiPolygon":B=B.arcs.map(D);break;default:return null}return{type:t,coordinates:B}}var x=p(m.transform),A=m.arcs;return C(r)}function d(m,r){function u(B){var t=m.arcs[0>B?~B:B],G=t[0];if(m.transform){var H=[0,0];t.forEach(function(I){H[0]+=I[0];H[1]+=I[1]})}else H=t[t.length-1];return 0>B?[H,G]:[G,H]}function v(B,t){for(var G in B){var H=B[G];delete t[H.start];delete H.start;delete H.end;H.forEach(function(I){w[0>
I?~I:I]=1});x.push(H)}}var w={},D={},C={},x=[],A=-1;r.forEach(function(B,t){var G=m.arcs[0>B?~B:B];3>G.length&&!G[1][0]&&!G[1][1]&&(G=r[++A],r[A]=B,r[t]=G)});r.forEach(function(B){var t=u(B),G=t[0],H=t[1];(t=C[G])?(delete C[t.end],t.push(B),t.end=H,(B=D[H])?(delete D[B.start],G=B===t?t:t.concat(B),D[G.start=t.start]=C[G.end=B.end]=G):D[t.start]=C[t.end]=t):(t=D[H])?(delete D[t.start],t.unshift(B),t.start=G,(B=C[G])?(delete C[B.end],G=B===t?t:B.concat(t),D[G.start=B.start]=C[G.end=t.end]=G):D[t.start]=
C[t.end]=t):(t=[B],D[t.start=G]=C[t.end=H]=t)});v(C,D);v(D,C);r.forEach(function(B){w[0>B?~B:B]||x.push([B])});return x}function l(m,r,u){var v;if(1<arguments.length)var w=k(m,r,u);else{var D=0;for(w=Array(v=m.arcs.length);D<v;++D)w[D]=D}return{type:"MultiLineString",arcs:d(m,w)}}function k(m,r,u){function v(t){var G=0>t?~t:t;(A[G]||(A[G]=[])).push({i:t,g:B})}function w(t){t.forEach(v)}function D(t){t.forEach(w)}function C(t){switch(B=t,t.type){case "GeometryCollection":t.geometries.forEach(C);break;
case "LineString":w(t.arcs);break;case "MultiLineString":case "Polygon":D(t.arcs);break;case "MultiPolygon":t.arcs.forEach(D)}}var x=[],A=[],B;C(r);A.forEach(null==u?function(t){x.push(t[0].i)}:function(t){u(t[0].g,t[t.length-1].g)&&x.push(t[0].i)});return x}function c(m,r){function u(A){switch(A.type){case "GeometryCollection":A.geometries.forEach(u);break;case "Polygon":v(A.arcs);break;case "MultiPolygon":A.arcs.forEach(v)}}function v(A){A.forEach(function(B){B.forEach(function(t){(D[t=0>t?~t:t]||
(D[t]=[])).push(A)})});C.push(A)}function w(A){A=f(m,{type:"Polygon",arcs:[A]}).coordinates[0];for(var B=-1,t=A.length,G,H=A[t-1],I=0;++B<t;)G=H,H=A[B],I+=G[0]*H[1]-G[1]*H[0];return Math.abs(I)}var D={},C=[],x=[];r.forEach(u);C.forEach(function(A){if(!A._){var B=[],t=[A];A._=1;for(x.push(B);A=t.pop();)B.push(A),A.forEach(function(G){G.forEach(function(H){D[0>H?~H:H].forEach(function(I){I._||(I._=1,t.push(I))})})})}});C.forEach(function(A){delete A._});return{type:"MultiPolygon",arcs:x.map(function(A){var B=
[];A.forEach(function(I){I.forEach(function(J){J.forEach(function(L){2>D[0>L?~L:L].length&&B.push(L)})})});B=d(m,B);if(1<(A=B.length))for(var t=1,G=w(B[0]),H;t<A;++t)(H=w(B[t]))>G&&(G=B[0],B[0]=B[t],B[t]=G,G=H);return B}).filter(function(A){return 0<A.length})}}function e(m,r){for(var u=0,v=m.length;u<v;){var w=u+v>>>1;m[w]<r?u=w+1:v=w}return u}function g(m){if(null==m)return n;var r,u,v=m.scale[0],w=m.scale[1],D=m.translate[0],C=m.translate[1];return function(x,A){A||(r=u=0);A=2;var B=x.length,t=
Array(B),G=Math.round((x[0]-D)/v),H=Math.round((x[1]-C)/w);t[0]=G-r;r=G;t[1]=H-u;for(u=H;A<B;)t[A]=x[A],++A;return t}}q.bbox=h;q.feature=function(m,r){"string"===typeof r&&(r=m.objects[r]);return"GeometryCollection"===r.type?{type:"FeatureCollection",features:r.geometries.map(function(u){return a(m,u)})}:a(m,r)};q.merge=function(m){return f(m,c.apply(this,arguments))};q.mergeArcs=c;q.mesh=function(m){return f(m,l.apply(this,arguments))};q.meshArcs=l;q.neighbors=function(m){function r(J,L){J.forEach(function(E){0>
E&&(E=~E);var K=w[E];K?K.push(L):w[E]=[L]})}function u(J,L){J.forEach(function(E){r(E,L)})}function v(J,L){if("GeometryCollection"===J.type)J.geometries.forEach(function(E){v(E,L)});else if(J.type in C)C[J.type](J.arcs,L)}var w={},D=m.map(function(){return[]}),C={LineString:r,MultiLineString:u,Polygon:u,MultiPolygon:function(J,L){J.forEach(function(E){u(E,L)})}};m.forEach(v);for(var x in w){m=w[x];for(var A=m.length,B=0;B<A;++B)for(var t=B+1;t<A;++t){var G=m[B],H=m[t],I;(I=D[G])[x=e(I,H)]!==H&&I.splice(x,
0,H);(I=D[H])[x=e(I,G)]!==G&&I.splice(x,0,G)}}return D};q.quantize=function(m,r){function u(G){return B(G)}function v(G){switch(G.type){case "GeometryCollection":var H={type:"GeometryCollection",geometries:G.geometries.map(v)};break;case "Point":H={type:"Point",coordinates:B(G.coordinates)};break;case "MultiPoint":H={type:"MultiPoint",coordinates:G.coordinates.map(u)};break;default:return G}null!=G.id&&(H.id=G.id);null!=G.bbox&&(H.bbox=G.bbox);null!=G.properties&&(H.properties=G.properties);return H}
if(m.transform)throw Error("already quantized");if(r&&r.scale)var w=m.bbox;else{if(!(2<=(A=Math.floor(r))))throw Error("n must be 2");w=m.bbox||h(m);r=w[0];var D=w[1],C=w[2],x=w[3],A;r={scale:[C-r?(C-r)/(A-1):1,x-D?(x-D)/(A-1):1],translate:[r,D]}}var B=g(r),t;D=m.objects;C={};for(t in D)C[t]=v(D[t]);return{type:"Topology",bbox:w,transform:r,objects:C,arcs:m.arcs.map(function(G){var H=0,I=1,J=G.length,L,E=Array(J);for(E[0]=B(G[0],0);++H<J;)if((L=B(G[H],H))[0]||L[1])E[I++]=L;1===I&&(E[I++]=[0,0]);
E.length=I;return E})}};q.transform=p;q.untransform=g;Object.defineProperty(q,"__esModule",{value:!0})})},{}],552:[function(b,y,F){y.exports=function(h){if(0>h)return[];if(0===h)return[[0]];for(var a=Math.round(p(h+1))|0,f=[],d=0;d<a;++d){for(var l=q.unrank(h,d),k=[0],c=0,e=0;e<l.length;++e)c+=1<<l[e],k.push(c);1>n(l)&&(k[0]=c,k[h]=0);f.push(k)}return f};var q=b("permutation-rank"),n=b("permutation-parity"),p=b("gamma")},{gamma:248,"permutation-parity":483,"permutation-rank":484}],553:[function(b,
y,F){function q(e,g,m){return Math.sqrt(Math.pow(e,2)+Math.pow(g,2)+Math.pow(m,2))}function n(e){var g=Math.abs(e[0]),m=Math.abs(e[1]),r=Math.abs(e[2]),u=[0,0,0];g>Math.max(m,r)?u[2]=1:m>Math.max(g,r)?u[0]=1:u[1]=1;for(r=m=g=0;3>r;++r)g+=e[r]*e[r],m+=u[r]*e[r];for(r=0;3>r;++r)u[r]-=m/g*e[r];l(u,u);return u}function p(e,g,m,r,u,v,w,D){this.center=h(m);this.up=h(r);this.right=h(u);this.radius=h([v]);this.angle=h([w,D]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(e,
g);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=Array(16);for(e=0;16>e;++e)this.computedMatrix[e]=.5;this.recalcMatrix(0)}y.exports=function(e){e=e||{};var g=e.center||[0,0,0],m=e.up||[0,1,0],r=e.right||n(m),u=e.radius||1,v=e.theta||0,w=e.phi||0;g=[].slice.call(g,0,3);m=[].slice.call(m,
0,3);l(m,m);r=[].slice.call(r,0,3);l(r,r);"eye"in e&&(u=e.eye,v=[u[0]-g[0],u[1]-g[1],u[2]-g[2]],d(r,v,m),1E-6>q(r[0],r[1],r[2])?r=n(m):l(r,r),u=q(v[0],v[1],v[2]),w=k(m,v)/u,v=k(r,v)/u,w=Math.acos(w),v=Math.acos(v));u=Math.log(u);return new p(e.zoomMin,e.zoomMax,g,m,r,u,v,w)};var h=b("filtered-vector"),a=b("gl-mat4/invert"),f=b("gl-mat4/rotate"),d=b("gl-vec3/cross"),l=b("gl-vec3/normalize"),k=b("gl-vec3/dot");b=p.prototype;b.setDistanceLimits=function(e,g){e=0<e?Math.log(e):-Infinity;g=0<g?Math.log(g):
Infinity;g=Math.max(g,e);this.radius.bounds[0][0]=e;this.radius.bounds[1][0]=g};b.getDistanceLimits=function(e){var g=this.radius.bounds[0];return e?(e[0]=Math.exp(g[0][0]),e[1]=Math.exp(g[1][0]),e):[Math.exp(g[0][0]),Math.exp(g[1][0])]};b.recalcMatrix=function(e){this.center.curve(e);this.up.curve(e);this.right.curve(e);this.radius.curve(e);this.angle.curve(e);for(var g=this.computedUp,m=this.computedRight,r=0,u=0,v=0;3>v;++v)u+=g[v]*m[v],r+=g[v]*g[v];var w=Math.sqrt(r);for(v=e=0;3>v;++v)m[v]-=g[v]*
u/r,e+=m[v]*m[v],g[v]/=w;e=Math.sqrt(e);for(v=0;3>v;++v)m[v]/=e;var D=this.computedToward;d(D,g,m);l(D,D);e=Math.exp(this.computedRadius[0]);w=this.computedAngle[0];r=this.computedAngle[1];u=Math.cos(w);w=Math.sin(w);var C=Math.cos(r),x=Math.sin(r);r=this.computedCenter;var A=u*C,B=w*C,t=-u*x,G=-w*x;u=this.computedEye;w=this.computedMatrix;for(v=0;3>v;++v){var H=A*m[v]+B*D[v]+x*g[v];w[4*v+1]=t*m[v]+G*D[v]+C*g[v];w[4*v+2]=H;w[4*v+3]=0}m=w[1];v=w[5];x=w[9];D=w[2];C=w[6];A=w[10];g=v*A-x*C;x=x*D-m*A;
m=m*C-v*D;v=q(g,x,m);w[0]=g/v;w[4]=x/v;w[8]=m/v;for(v=0;3>v;++v)u[v]=r[v]+w[2+4*v]*e;for(v=0;3>v;++v){for(r=e=0;3>r;++r)e+=w[v+4*r]*u[r];w[12+v]=-e}w[15]=1};b.getMatrix=function(e,g){this.recalcMatrix(e);e=this.computedMatrix;if(g){for(var m=0;16>m;++m)g[m]=e[m];return g}return e};var c=[0,0,0];b.rotate=function(e,g,m,r){this.angle.move(e,g,m);if(r){this.recalcMatrix(e);g=this.computedMatrix;c[0]=g[2];c[1]=g[6];c[2]=g[10];m=this.computedUp;for(var u=this.computedRight,v=this.computedToward,w=0;3>
w;++w)g[4*w]=m[w],g[4*w+1]=u[w],g[4*w+2]=v[w];f(g,g,r,c);for(w=0;3>w;++w)m[w]=g[4*w],u[w]=g[4*w+1];this.up.set(e,m[0],m[1],m[2]);this.right.set(e,u[0],u[1],u[2])}};b.pan=function(e,g,m,r){g=g||0;m=m||0;r=r||0;this.recalcMatrix(e);var u=this.computedMatrix,v=u[1],w=u[5],D=u[9],C=q(v,w,D);v/=C;w/=C;D/=C;C=u[0];var x=u[4];u=u[8];var A=C*v+x*w+u*D;C-=v*A;x-=w*A;u-=D*A;A=q(C,x,u);this.center.move(e,C/A*g+v*m,x/A*g+w*m,u/A*g+D*m);g=Math.exp(this.computedRadius[0]);g=Math.max(1E-4,g+r);this.radius.set(e,
Math.log(g))};b.translate=function(e,g,m,r){this.center.move(e,g||0,m||0,r||0)};b.setMatrix=function(e,g,m,r){var u=1;"number"===typeof m&&(u=m|0);if(0>u||3<u)u=1;var v=(u+2)%3;g||(this.recalcMatrix(e),g=this.computedMatrix);m=g[u];var w=g[u+4],D=g[u+8];if(r){r=Math.abs(m);var C=Math.abs(D),x=Math.max(r,Math.abs(w),C);r===x?(m=0>m?-1:1,w=D=0):C===x?(D=0>D?-1:1,m=w=0):(w=0>w?-1:1,m=D=0)}else r=q(m,w,D),m/=r,w/=r,D/=r;r=g[v];C=g[v+4];v=g[v+8];x=r*m+C*w+v*D;r-=m*x;C-=w*x;v-=D*x;x=q(r,C,v);r/=x;C/=x;
v/=x;x=w*v-D*C;var A=D*r-m*v,B=m*C-w*r,t=q(x,A,B);x/=t;A/=t;B/=t;this.center.jump(e,H,I,J);this.radius.idle(e);this.up.jump(e,m,w,D);this.right.jump(e,r,C,v);if(2===u)I=g[1],J=g[5],m=g[9],H=0>G?-Math.PI/2:Math.PI/2,I=Math.atan2(I*x+J*A+m*B,I*r+J*C+m*v);else{I=g[2];J=g[6];var G=g[10];H=Math.asin(Math.min(1,Math.max(-1,I*m+J*w+G*D)));I=Math.atan2(I*x+J*A+G*B,I*r+J*C+G*v)}this.angle.jump(e,I,H);this.recalcMatrix(e);G=g[2];m=g[6];w=g[10];J=this.computedMatrix;a(J,g);g=J[15];var H=J[12]/g,I=J[13]/g,J=
J[14]/g;g=Math.exp(this.computedRadius[0]);this.center.jump(e,H-G*g,I-m*g,J-w*g)};b.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};b.idle=function(e){this.center.idle(e);this.up.idle(e);this.right.idle(e);this.radius.idle(e);this.angle.idle(e)};b.flush=function(e){this.center.flush(e);this.up.flush(e);this.right.flush(e);this.radius.flush(e);this.angle.flush(e)};b.setDistance=function(e,g){0<g&&this.radius.set(e,Math.log(g))};
b.lookAt=function(e,g,m,r){this.recalcMatrix(e);g=g||this.computedEye;m=m||this.computedCenter;r=r||this.computedUp;var u=r[0],v=r[1];r=r[2];var w=q(u,v,r);if(!(1E-6>w)){u/=w;v/=w;r/=w;w=g[0]-m[0];var D=g[1]-m[1];g=g[2]-m[2];var C=q(w,D,g);if(!(1E-6>C)){w/=C;D/=C;g/=C;var x=this.computedRight,A=x[0],B=x[1];x=x[2];var t=u*A+v*B+r*x;A-=t*u;B-=t*v;x-=t*r;t=q(A,B,x);if(.01>t&&(A=v*g-r*D,B=r*w-u*g,x=u*D-v*w,t=q(A,B,x),1E-6>t))return;A/=t;B/=t;x/=t;this.up.set(e,u,v,r);this.right.set(e,A,B,x);this.center.set(e,
m[0],m[1],m[2]);this.radius.set(e,Math.log(C));m=v*x-r*B;C=r*A-u*x;t=u*B-v*A;var G=q(m,C,t);u=Math.asin(Math.min(1,Math.max(-1,u*w+v*D+r*g)));v=Math.atan2(m/G*w+C/G*D+t/G*g,A*w+B*D+x*g);w=this.angle._state;r=w[w.length-1];w=w[w.length-2];r%=2*Math.PI;D=Math.abs(r-v);g=Math.abs(r-2*Math.PI-v);Math.abs(r+2*Math.PI-v)<D&&(r+=2*Math.PI);g<D&&(r-=2*Math.PI);this.angle.jump(this.angle.lastT(),r,w);this.angle.set(e,v,u)}}}},{"filtered-vector":242,"gl-mat4/invert":278,"gl-mat4/rotate":283,"gl-vec3/cross":339,
"gl-vec3/dot":344,"gl-vec3/normalize":361}],554:[function(b,y,F){y.exports=function(n,p,h){var a=n*p,f=q*n;f-=f-n;n-=f;var d=q*p;d-=d-p;p-=d;p=n*p-(a-f*d-n*d-f*p);return h?(h[0]=p,h[1]=a,h):[p,a]};var q=+(Math.pow(2,27)+1)},{}],555:[function(b,y,F){y.exports=function(q,n,p){var h=q+n,a=h-q;n-=a;q-=h-a;return p?(p[0]=q+n,p[1]=h,p):[q+n,h]}},{}],556:[function(b,y,F){var q=b("../prototype/is");y.exports=function(n){if("function"!==typeof n||!hasOwnProperty.call(n,"length"))return!1;try{if("number"!==
typeof n.length||"function"!==typeof n.call||"function"!==typeof n.apply)return!1}catch(p){return!1}return!q(n)}},{"../prototype/is":563}],557:[function(b,y,F){var q=b("../value/is"),n=b("../object/is"),p=b("../string/coerce"),h=b("./to-short-string");y.exports=function(a,f,d){if(!n(d))throw new TypeError(f.replace("%v",h(a)));if(!q(a)){if("default"in d)return d["default"];if(d.isOptional)return null}d=p(d.errorMessage);q(d)||(d=f);throw new TypeError(d.replace("%v",h(a)));}},{"../object/is":560,
"../string/coerce":564,"../value/is":566,"./to-short-string":559}],558:[function(b,y,F){y.exports=function(q){try{return q.toString()}catch(n){try{return String(q)}catch(p){return null}}}},{}],559:[function(b,y,F){var q=b("./safe-to-string"),n=/[\n\r\u2028\u2029]/g;y.exports=function(p){p=q(p);if(null===p)return"\x3cNon-coercible to string value\x3e";100<p.length&&(p=p.slice(0,99)+"");return p=p.replace(n,function(h){switch(h){case "\n":return"\\n";case "\r":return"\\r";case "\u2028":return"\\u2028";
case "\u2029":return"\\u2029";default:throw Error("Unexpected character");}})}},{"./safe-to-string":558}],560:[function(b,y,F){var q=b("../value/is"),n={object:!0,"function":!0,undefined:!0};y.exports=function(p){return q(p)?hasOwnProperty.call(n,typeof p):!1}},{"../value/is":566}],561:[function(b,y,F){var q=b("../lib/resolve-exception"),n=b("./is");y.exports=function(p,h){return n(p)?p:q(p,"%v is not a plain function",h)}},{"../lib/resolve-exception":557,"./is":562}],562:[function(b,y,F){var q=b("../function/is"),
n=/^\s*class[\s{/}]/,p=Function.prototype.toString;y.exports=function(h){return!q(h)||n.test(p.call(h))?!1:!0}},{"../function/is":556}],563:[function(b,y,F){var q=b("../object/is");y.exports=function(n){if(!q(n))return!1;try{return n.constructor?n.constructor.prototype===n:!1}catch(p){return!1}}},{"../object/is":560}],564:[function(b,y,F){var q=b("../value/is"),n=b("../object/is"),p=Object.prototype.toString;y.exports=function(h){if(!q(h))return null;if(n(h)){var a=h.toString;if("function"!==typeof a||
a===p)return null}return""+h}},{"../object/is":560,"../value/is":566}],565:[function(b,y,F){var q=b("../lib/resolve-exception"),n=b("./is");y.exports=function(p,h){return n(p)?p:q(p,"Cannot use %v",h)}},{"../lib/resolve-exception":557,"./is":566}],566:[function(b,y,F){y.exports=function(q){return void 0!==q&&null!==q}},{}],567:[function(b,y,F){(function(q){function n(I){if(I){var J=w.log2(I.length||I.byteLength);G[J].push(I)}}function p(I){I=w.nextPow2(I);var J=w.log2(I);J=G[J];return 0<J.length?
J.pop():new ArrayBuffer(I)}function h(I){return new Uint8Array(p(I),0,I)}function a(I){return new Uint16Array(p(2*I),0,I)}function f(I){return new Uint32Array(p(4*I),0,I)}function d(I){return new Int8Array(p(I),0,I)}function l(I){return new Int16Array(p(2*I),0,I)}function k(I){return new Int32Array(p(4*I),0,I)}function c(I){return new Float32Array(p(4*I),0,I)}function e(I){return new Float64Array(p(8*I),0,I)}function g(I){return x?new Uint8ClampedArray(p(I),0,I):h(I)}function m(I){return A?new BigUint64Array(p(8*
I),0,I):null}function r(I){return B?new BigInt64Array(p(8*I),0,I):null}function u(I){return new DataView(p(I),0,I)}function v(I){I=w.nextPow2(I);var J=w.log2(I);J=H[J];return 0<J.length?J.pop():new C(I)}var w=b("bit-twiddle"),D=b("dup"),C=b("buffer").Buffer;q.__TYPEDARRAY_POOL||(q.__TYPEDARRAY_POOL={UINT8:D([32,0]),UINT16:D([32,0]),UINT32:D([32,0]),BIGUINT64:D([32,0]),INT8:D([32,0]),INT16:D([32,0]),INT32:D([32,0]),BIGINT64:D([32,0]),FLOAT:D([32,0]),DOUBLE:D([32,0]),DATA:D([32,0]),UINT8C:D([32,0]),
BUFFER:D([32,0])});var x="undefined"!==typeof Uint8ClampedArray,A="undefined"!==typeof BigUint64Array,B="undefined"!==typeof BigInt64Array,t=q.__TYPEDARRAY_POOL;t.UINT8C||(t.UINT8C=D([32,0]));t.BIGUINT64||(t.BIGUINT64=D([32,0]));t.BIGINT64||(t.BIGINT64=D([32,0]));t.BUFFER||(t.BUFFER=D([32,0]));var G=t.DATA,H=t.BUFFER;F.free=function(I){if(C.isBuffer(I))H[w.log2(I.length)].push(I);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(I)&&(I=I.buffer),I){var J=w.log2(I.length||I.byteLength)|
0;G[J].push(I)}};F.freeUint8=F.freeUint16=F.freeUint32=F.freeBigUint64=F.freeInt8=F.freeInt16=F.freeInt32=F.freeBigInt64=F.freeFloat32=F.freeFloat=F.freeFloat64=F.freeDouble=F.freeUint8Clamped=F.freeDataView=function(I){n(I.buffer)};F.freeArrayBuffer=n;F.freeBuffer=function(I){H[w.log2(I.length)].push(I)};F.malloc=function(I,J){if(void 0===J||"arraybuffer"===J)return p(I);switch(J){case "uint8":return h(I);case "uint16":return a(I);case "uint32":return f(I);case "int8":return d(I);case "int16":return l(I);
case "int32":return k(I);case "float":case "float32":return c(I);case "double":case "float64":return e(I);case "uint8_clamped":return g(I);case "bigint64":return r(I);case "biguint64":return m(I);case "buffer":return v(I);case "data":case "dataview":return u(I)}return null};F.mallocArrayBuffer=p;F.mallocUint8=h;F.mallocUint16=a;F.mallocUint32=f;F.mallocInt8=d;F.mallocInt16=l;F.mallocInt32=k;F.mallocFloat32=F.mallocFloat=c;F.mallocFloat64=F.mallocDouble=e;F.mallocUint8Clamped=g;F.mallocBigUint64=m;
F.mallocBigInt64=r;F.mallocDataView=u;F.mallocBuffer=v;F.clearCache=function(){for(var I=0;32>I;++I)t.UINT8[I].length=0,t.UINT16[I].length=0,t.UINT32[I].length=0,t.INT8[I].length=0,t.INT16[I].length=0,t.INT32[I].length=0,t.FLOAT[I].length=0,t.DOUBLE[I].length=0,t.BIGUINT64[I].length=0,t.BIGINT64[I].length=0,t.UINT8C[I].length=0,G[I].length=0,H[I].length=0}}).call(this,"undefined"!==typeof fb?fb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":97,buffer:111,dup:176}],
568:[function(b,y,F){function q(n){this.roots=Array(n);this.ranks=Array(n);for(var p=0;p<n;++p)this.roots[p]=p,this.ranks[p]=0}"use restrict";y.exports=q;b=q.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var n=this.roots.length;this.roots.push(n);this.ranks.push(0);return n};b.find=function(n){for(var p=n,h=this.roots;h[n]!==n;)n=h[n];for(;h[p]!==n;){var a=h[p];h[p]=n;p=a}return n};b.link=function(n,p){n=this.find(n);p=this.find(p);if(n!==
p){var h=this.ranks,a=this.roots,f=h[n],d=h[p];f<d?a[n]=p:d<f?a[p]=n:(a[p]=n,++h[n])}}},{}],569:[function(b,y,F){y.exports=function(q,n,p){if(0===q.length)return q;if(n){p||q.sort(n);p=1;for(var h=q.length,a=q[0],f,d=1;d<h;++d)f=a,a=q[d],n(a,f)&&(d===p?p++:q[p++]=a);q.length=p;return q}p||q.sort();n=1;p=q.length;h=q[0];for(f=1;f<p;++f)a=h,h=q[f],h!==a&&(f===n?n++:q[n++]=h);q.length=n;return q}},{}],570:[function(b,y,F){var q=/['"]/;y.exports=function(n){if(!n)return"";q.test(n.charAt(0))&&(n=n.substr(1));
q.test(n.charAt(n.length-1))&&(n=n.substr(0,n.length-1));return n}},{}],571:[function(b,y,F){y.exports=function(q,n,p){Array.isArray(p)||(p=[].slice.call(arguments,2));for(var h=0,a=p.length;h<a;h++){var f=p[h],d;for(d in f)if((void 0===n[d]||Array.isArray(n[d])||q[d]!==n[d])&&d in n){if(!0===f[d])var l=n[d];else if(!1===f[d])continue;else if("function"===typeof f[d]&&(l=f[d](n[d],q,n),void 0===l))continue;q[d]=l}}return q}},{}],572:[function(b,y,F){y.exports=function(h,a){if("object"!==typeof a||
null===a)a={};return q(h,a.canvas||n,a.context||p,a)};var q=b("./lib/vtext"),n=null,p=null;"undefined"!==typeof document&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,p=n.getContext("2d"))},{"./lib/vtext":573}],573:[function(b,y,F){function q(B,t,G,H){var I="\x3c"+B+"\x3e";B="\x3c/"+B+"\x3e";for(var J=I.length,L=B.length,E=t[0]===w||t[0]===x,K=0,N;-1<K;){K=G.indexOf(I,K);if(-1===K)break;N=G.indexOf(B,K+J);if(-1===N)break;if(N<=K)break;for(var O=K;O<N+L;++O)if(O<K+J||O>=N)H[O]=null,
G=G.substr(0,O)+" "+G.substr(O+1);else if(null!==H[O]){var Q=H[O].indexOf(t[0]);-1===Q?H[O]+=t:E&&(H[O]=H[O].substr(0,Q+1)+(1+parseInt(H[O][Q+1]))+H[O].substr(Q+2))}K+=J;K=G.substr(K,N-K).indexOf(I);K=-1!==K?K:N+L}return H}function n(B,t,G){for(var H=t.textAlign||"start",I=t.textBaseline||"alphabetic",J=[1073741824,1073741824],L=[0,0],E=B.length,K=0;K<E;++K)for(var N=B[K],O=0;2>O;++O)J[O]=Math.min(J[O],N[O])|0,L[O]=Math.max(L[O],N[O])|0;var Q=0;switch(H){case "center":Q=-.5*(J[0]+L[0]);break;case "right":case "end":Q=
-L[0];break;case "left":case "start":Q=-J[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+H+"'");}var P=0;switch(I){case "hanging":case "top":P=-J[1];break;case "middle":P=-.5*(J[1]+L[1]);break;case "alphabetic":case "ideographic":P=-3*G;break;case "bottom":P=-L[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+I+"'");}var T=1/G;"lineHeight"in t?T*=+t.lineHeight:"width"in t?T=t.width/(L[0]-J[0]):"height"in t&&(T=t.height/(L[1]-J[1]));return B.map(function(V){return[T*
(V[0]+Q),T*(V[1]+P)]})}function p(B,t,G,H,I,J){function L(){if(""!==Y){var qa=t.measureText(Y).width;t.fillText(Y,V+da,aa+ca);da+=qa}}function E(){return""+Math.round(la)+"px "}function K(qa,oa){var ka=""+t.font;if(!0===J.subscripts){var ra=qa.indexOf(x),ha=oa.indexOf(x);ra=-1<ra?parseInt(qa[1+ra]):0;ha=-1<ha?parseInt(oa[1+ha]):0;ra!==ha&&(ka=ka.replace(E(),"?px "),la*=Math.pow(.75,ha-ra),ka=ka.replace("?px ",E()));ca+=.25*T*(ha-ra)}!0===J.superscripts&&(ra=qa.indexOf(w),ha=oa.indexOf(w),ra=-1<ra?
parseInt(qa[1+ra]):0,ha=-1<ha?parseInt(oa[1+ha]):0,ra!==ha&&(ka=ka.replace(E(),"?px "),la*=Math.pow(.75,ha-ra),ka=ka.replace("?px ",E())),ca-=.25*T*(ha-ra));!0===J.bolds&&(ha=-1<qa.indexOf(m),ra=-1<oa.indexOf(m),!ha&&ra&&(ka=ma?ka.replace("italic ","italic bold "):"bold "+ka),ha&&!ra&&(ka=ka.replace("bold ","")));if(!0===J.italics){var ma=-1<qa.indexOf(u);qa=-1<oa.indexOf(u);!ma&&qa&&(ka="italic "+ka);ma&&!qa&&(ka=ka.replace("italic ",""))}t.font=ka}G=G.replace(/\n/g,"");G=!0===J.breaklines?G.replace(/<br>/g,
"\n"):G.replace(/<br>/g," ");var N="",O=[];for(ba=0;ba<G.length;++ba)O[ba]=N;!0===J.bolds&&(O=q(g,m,G,O));!0===J.italics&&(O=q(r,u,G,O));!0===J.superscripts&&(O=q(v,D,G,O));!0===J.subscripts&&(O=q(C,A,G,O));var Q=[],P="";for(ba=0;ba<G.length;++ba)null!==O[ba]&&(P+=G[ba],Q.push(O[ba]));O=P.split("\n");G=O.length;var T=Math.round(I*H),V=H,aa=2*H;I=0;ba=G*T+aa;B.height<ba&&(B.height=ba);t.fillStyle="#000";t.fillRect(0,0,B.width,B.height);t.fillStyle="#fff";var ba;P=0;var Y="";for(B=0;B<G;++B){var ea=
O[B]+"\n";var da=0;var ca=B*T;var la=H;Y="";for(ba=0;ba<ea.length;++ba){var pa=ba+P<Q.length?Q[ba+P]:Q[Q.length-1];N===pa?Y+=ea[ba]:(L(),Y=ea[ba],void 0!==pa&&(K(N,pa),N=pa))}L();P+=ea.length;ba=Math.round(da+2*V)|0;I<ba&&(I=ba)}H=I;N=aa+T*G;return d(t.getImageData(0,0,H,N).data,[N,H,4]).pick(-1,-1,0).transpose(1,0)}function h(B,t,G,H){B=f(B,128);H=H?l(B.cells,B.positions,.25):{edges:B.cells,positions:B.positions};G=n(H.positions,t,G);B=H.edges;H="ccw"===t.orientation;k(G,B);if(t.polygons||t.polygon||
t.polyline){t=e(B,G);B=Array(t.length);for(var I=0;I<t.length;++I){for(var J=t[I],L=Array(J.length),E=0;E<J.length;++E){for(var K=J[E],N=Array(K.length),O=0;O<K.length;++O)N[O]=G[K[O]].slice();H&&N.reverse();L[E]=N}B[I]=L}return B}return t.triangles||t.triangulate||t.triangle?{cells:c(G,B,{delaunay:!1,exterior:!1,interior:!0}),positions:G}:{edges:B,positions:G}}function a(B,t,G){try{return h(B,t,G,!0)}catch(H){}try{return h(B,t,G,!1)}catch(H){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||
t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}y.exports=function(B,t,G,H){var I=64,J=1.25,L={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};H&&(H.size&&0<H.size&&(I=H.size),H.lineSpacing&&0<H.lineSpacing&&(J=H.lineSpacing),H.styletags&&H.styletags.breaklines&&(L.breaklines=H.styletags.breaklines?!0:!1),H.styletags&&H.styletags.bolds&&(L.bolds=H.styletags.bolds?!0:!1),H.styletags&&H.styletags.italics&&(L.italics=H.styletags.italics?!0:!1),H.styletags&&
H.styletags.subscripts&&(L.subscripts=H.styletags.subscripts?!0:!1),H.styletags&&H.styletags.superscripts&&(L.superscripts=H.styletags.superscripts?!0:!1));G.font=[H.fontStyle,H.fontVariant,H.fontWeight,I+"px",H.font].filter(function(E){return E}).join(" ");G.textAlign="start";G.textBaseline="alphabetic";G.direction="ltr";B=p(t,G,B,I,J,L);return a(B,H,I)};y.exports.processPixels=a;var f=b("surface-nets"),d=b("ndarray"),l=b("simplify-planar-graph"),k=b("clean-pslg"),c=b("cdt2d"),e=b("planar-graph-to-polyline"),
g="b",m="b|",r="i",u="i|",v="sup",w="+",D="+1",C="sub",x="-",A="-1"},{cdt2d:112,"clean-pslg":121,ndarray:469,"planar-graph-to-polyline":488,"simplify-planar-graph":534,"surface-nets":542}],574:[function(b,y,F){(function(){function q(D){D.permitHostObjects___&&D.permitHostObjects___(q)}function n(D){return!("weakmap:"==D.substr(0,8)&&"___"===D.substr(D.length-3))}function p(D){if(D!==Object(D))throw new TypeError("Not an object: "+D);var C=D[m];if(C&&C.key===D)return C;if(g(D)){C={key:D};try{return e(D,
m,{value:C,writable:!1,enumerable:!1,configurable:!1}),C}catch(x){}}}function h(D){D.prototype=null;return Object.freeze(D)}function a(){u||"undefined"===typeof console||(u=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=q);var f=!1;if("function"===typeof WeakMap){var d=WeakMap;if("undefined"===typeof navigator||!/Firefox/.test(navigator.userAgent)){var l=
new d,k=Object.freeze({});l.set(k,1);if(1!==l.get(k))f=!0;else{y.exports=WeakMap;return}}}var c=Object.getOwnPropertyNames,e=Object.defineProperty,g=Object.isExtensible,m="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array&&(l=new ArrayBuffer(25),l=new Uint8Array(l),crypto.getRandomValues(l),m="weakmap:rand:"+Array.prototype.map.call(l,function(D){return(D%36).toString(36)}).join("")+
"___");e(Object,"getOwnPropertyNames",{value:function(D){return c(D).filter(n)}});if("getPropertyNames"in Object){var r=Object.getPropertyNames;e(Object,"getPropertyNames",{value:function(D){return r(D).filter(n)}})}(function(){var D=Object.freeze;e(Object,"freeze",{value:function(A){p(A);return D(A)}});var C=Object.seal;e(Object,"seal",{value:function(A){p(A);return C(A)}});var x=Object.preventExtensions;e(Object,"preventExtensions",{value:function(A){p(A);return x(A)}})})();var u=!1,v=0,w=function(){this instanceof
w||a();var D=[],C=[],x=v++;return Object.create(w.prototype,{get___:{value:h(function(A,B){var t=p(A);if(t)return x in t?t[x]:B;A=D.indexOf(A);return 0<=A?C[A]:B})},has___:{value:h(function(A){var B=p(A);return B?x in B:0<=D.indexOf(A)})},set___:{value:h(function(A,B){var t;(t=p(A))?t[x]=B:(t=D.indexOf(A),0<=t?C[t]=B:(t=D.length,C[t]=B,D[t]=A));return this})},delete___:{value:h(function(A){var B=p(A);if(B)return x in B&&delete B[x];A=D.indexOf(A);if(0>A)return!1;B=D.length-1;D[A]=void 0;C[A]=C[B];
D[A]=D[B];D.length=B;C.length=B;return!0})}})};w.prototype=Object.create(Object.prototype,{get:{value:function(D,C){return this.get___(D,C)},writable:!0,configurable:!0},has:{value:function(D){return this.has___(D)},writable:!0,configurable:!0},set:{value:function(D,C){return this.set___(D,C)},writable:!0,configurable:!0},"delete":{value:function(D){return this.delete___(D)},writable:!0,configurable:!0}});"function"===typeof d?function(){function D(){this instanceof w||a();var C=new d,x=void 0,A=
!1;var B=f?function(t,G){C.set(t,G);C.has(t)||(x||(x=new w),x.set(t,G));return this}:function(t,G){if(A)try{C.set(t,G)}catch(H){x||(x=new w),x.set___(t,G)}else C.set(t,G);return this};return Object.create(w.prototype,{get___:{value:h(function(t,G){return x?C.has(t)?C.get(t):x.get___(t,G):C.get(t,G)})},has___:{value:h(function(t){return C.has(t)||(x?x.has___(t):!1)})},set___:{value:h(B)},delete___:{value:h(function(t){var G=!!C["delete"](t);return x?x.delete___(t)||G:G})},permitHostObjects___:{value:h(function(t){if(t===
q)A=!0;else throw Error("bogus call to permitHostObjects___");})}})}f&&"undefined"!==typeof Proxy&&(Proxy=void 0);D.prototype=w.prototype;y.exports=D;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==typeof Proxy&&(Proxy=void 0),y.exports=w)}})()},{}],575:[function(b,y,F){var q=b("./hidden-store.js");y.exports=function(){var n={};return function(p){if(("object"!==typeof p||null===p)&&"function"!==typeof p)throw Error("Weakmap-shim: Key must be object");
var h=p.valueOf(n);return h&&h.identity===n?h:q(p,n)}}},{"./hidden-store.js":576}],576:[function(b,y,F){y.exports=function(q,n){var p={identity:n},h=q.valueOf;Object.defineProperty(q,"valueOf",{value:function(a){return a!==n?h.apply(this,arguments):p},writable:!0});return p}},{}],577:[function(b,y,F){var q=b("./create-store.js");y.exports=function(){var n=q();return{get:function(p,h){p=n(p);return p.hasOwnProperty("value")?p.value:h},set:function(p,h){n(p).value=h;return this},has:function(p){return"value"in
n(p)},"delete":function(p){return delete n(p).value}}}},{"./create-store.js":575}],578:[function(b,y,F){var q=b("get-canvas-context");y.exports=function(n){return q("webgl",n)}},{"get-canvas-context":249}],579:[function(b,y,F){function q(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var p=n.instance();q.prototype=new n.baseCalendar;b(q.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",
epochs:["BEC","EC"],monthNumbers:function(c,e){if("string"===typeof c)return(e=c.match(a))?e[0]:"";var g=this._validateYear(c);c=c.month();var m=""+this.toChineseMonth(g,c);e&&2>m.length&&(m="0"+m);this.isIntercalaryMonth(g,c)&&(m+="i");return m},monthNames:function(c){if("string"===typeof c){var e=c.match(f);return e?e[0]:""}e=this._validateYear(c);c=c.month();var g="           ".split(" ")[this.toChineseMonth(e,c)-1];this.isIntercalaryMonth(e,c)&&(g=""+g);return g},monthNamesShort:function(c){if("string"===
typeof c){var e=c.match(d);return e?e[0]:""}e=this._validateYear(c);c=c.month();var g="           ".split(" ")[this.toChineseMonth(e,c)-1];this.isIntercalaryMonth(e,c)&&(g=""+g);return g},parseMonth:function(c,e){c=this._validateYear(c);var g=parseInt(e);if(isNaN(g)){if(""===e[0]){var m=!0;e=e.substring(1)}""===e[e.length-1]&&(e=e.substring(0,e.length-1));g=1+"           ".split(" ").indexOf(e)}else e=e[e.length-1],m="i"===e||"I"===e;return this.toMonthIndex(c,g,m)},
dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,e){c.year&&(c=c.year());if("number"!==typeof c||1888>c||2111<c)throw e.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,e,g){c=this.intercalaryMonth(c);if(g&&e!==c||1>e||12<e)throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);
return c?!g&&e<=c?e-1:e:e-1},toChineseMonth:function(c,e){c.year&&(c=c.year(),e=c.month());c=this.intercalaryMonth(c);if(0>e||e>(c?12:11))throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?e<c?e+1:e:e+1},intercalaryMonth:function(c){c=this._validateYear(c);return l[c-l[0]]>>13},isIntercalaryMonth:function(c,e){c.year&&(c=c.year(),e=c.month());c=this.intercalaryMonth(c);return!!c&&c===e},leapYear:function(c){return 0!==this.intercalaryMonth(c)},weekOfYear:function(c,e,g){var m=this._validateYear(c,
n.local.invalidyear);m=k[m-k[0]];m=p.newDate(m>>9&4095,m>>5&15,m&31);m.add(4-(m.dayOfWeek()||7),"d");c=this.toJD(c,e,g)-m.toJD();return 1+Math.floor(c/7)},monthsInYear:function(c){return this.leapYear(c)?13:12},daysInMonth:function(c,e){c.year&&(e=c.month(),c=c.year());c=this._validateYear(c);c=l[c-l[0]];if(e>(c>>13?12:11))throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-e?30:29},weekDay:function(c,e,g){return 6>(this.dayOfWeek(c,e,g)||7)},toJD:function(c,e,g){r=this._validate(c,
r,g,n.local.invalidDate);c=this._validateYear(r.year());e=r.month();g=r.day();var m=this.isIntercalaryMonth(c,e),r=this.toChineseMonth(c,e);if("object"===typeof c)e=r||{};else{if(!("number"===typeof c&&1888<=c&&2111>=c))throw Error("Lunar year outside range 1888-2111");if(!("number"===typeof r&&1<=r&&12>=r))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof g&&1<=g&&30>=g))throw Error("Lunar day outside range 1 - 30");if("object"===typeof m){var u=!1;e=m}else u=!!m,e={};c={year:c,
month:r,day:g,isIntercalary:u}}r=c.day-1;g=l[c.year-l[0]];m=(m=g>>13)?c.month>m?c.month:c.isIntercalary?c.month:c.month-1:c.month-1;for(u=0;u<m;u++)r+=g&1<<12-u?30:29;c=k[c.year-k[0]];c=new Date(c>>9&4095,(c>>5&15)-1,(c&31)+r);e.year=c.getFullYear();e.month=1+c.getMonth();e.day=c.getDate();return p.toJD(e.year,e.month,e.day)},fromJD:function(c){var e=p.fromJD(c),g=e.year();c=e.month();e=e.day();if("object"===typeof g)c=c||{};else{if(!("number"===typeof g&&1888<=g&&2111>=g))throw Error("Solar year outside range 1888-2111");
if(!("number"===typeof c&&1<=c&&12>=c))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof e&&1<=e&&31>=e))throw Error("Solar day outside range 1 - 31");g={year:g,month:c,day:e};c={}}e=k[g.year-k[0]];c.year=(g.year<<9|g.month<<5|g.day)>=e?g.year:g.year-1;e=k[c.year-k[0]];g=Math.round((new Date(g.year,g.month-1,g.day)-new Date(e>>9&4095,(e>>5&15)-1,e&31))/864E5);var m=l[c.year-l[0]];for(e=0;13>e;e++){var r=m&1<<12-e?30:29;if(g<r)break;g-=r}m>>=13;!m||e<m?(c.isIntercalary=!1,c.month=
1+e):(c.isIntercalary=e===m?!0:!1,c.month=e);c.day=1+g;g=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,g,c.day)},fromString:function(c){c=c.match(h);var e=this._validateYear(+c[1]),g=this.toMonthIndex(e,+c[2],!!c[3]);return this.newDate(e,g,+c[4])},add:function(c,e,g){var m=c.year(),r=c.month(),u=this.isIntercalaryMonth(m,r);m=this.toChineseMonth(m,r);c=Object.getPrototypeOf(q.prototype).add.call(this,c,e,g);"y"===g&&(e=c.year(),g=c.month(),r=this.isIntercalaryMonth(e,
m),u=u&&r?this.toMonthIndex(e,m,!0):this.toMonthIndex(e,m,!1),u!==g&&c.month(u));return c}});var h=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,f=/^??[]?/m,d=/^??[]?/m;n.calendars.chinese=q;var l=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,
1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,
6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],k=[1887,966732,967231,967733,968265,968766,969297,969798,
970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,
1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,
1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,
1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":593,"object-assign":473}],580:[function(b,y,F){function q(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");q.prototype=new n.baseCalendar;b(q.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,
firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",
firstDay:0,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,n.local.invalidYear);p=p.year()+(0>p.year()?1:0);return 3===p%4||-1===p%4},monthsInYear:function(p){this._validate(p,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(p,h,a){p=this.newDate(p,h,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,h){p=this._validate(p,h,this.minDay,n.local.invalidMonth);return this.daysPerMonth[p.month()-
1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,h,a){return 6>(this.dayOfWeek(p,h,a)||7)},toJD:function(p,h,a){h=this._validate(p,h,a,n.local.invalidDate);p=h.year();0>p&&p++;return h.day()+30*(h.month()-1)+365*(p-1)+Math.floor(p/4)+this.jdEpoch-1},fromJD:function(p){var h=Math.floor(p)+.5-this.jdEpoch,a=Math.floor((h-Math.floor((h+366)/1461))/365)+1;0>=a&&a--;h=Math.floor(p)+.5-this.newDate(a,1,1).toJD();p=Math.floor(h/30)+1;return this.newDate(a,p,h-30*(p-1)+1)}});n.calendars.coptic=
q},{"../main":593,"object-assign":473}],581:[function(b,y,F){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");q.prototype=new n.baseCalendar;b(q.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),
monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(h){this._validate(h,this.minMonth,this.minDay,n.local.invalidYear);return!1},monthsInYear:function(h){this._validate(h,this.minMonth,this.minDay,n.local.invalidYear);
return 13},daysInYear:function(h){this._validate(h,this.minMonth,this.minDay,n.local.invalidYear);return 400},weekOfYear:function(h,a,f){h=this.newDate(h,a,f);h.add(-h.dayOfWeek(),"d");return Math.floor((h.dayOfYear()-1)/8)+1},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[h.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(h,a,f){return(this._validate(h,a,f,n.local.invalidDate).day()+1)%8},weekDay:function(h,a,f){h=this.dayOfWeek(h,
a,f);return 2<=h&&6>=h},extraInfo:function(h,a,f){h=this._validate(h,a,f,n.local.invalidDate);return{century:p[Math.floor((h.year()-1)/100)+1]||""}},toJD:function(h,a,f){f=this._validate(h,a,f,n.local.invalidDate);h=f.year()+(0>f.year()?1:0);a=f.month();f=f.day();return f+(1<a?16:0)+(2<a?32*(a-2):0)+400*(h-1)+this.jdEpoch-1},fromJD:function(h){h=Math.floor(h+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(h/400)+1;h-=400*(a-1);h+=15<h?16:0;var f=Math.floor(h/32)+1;return this.newDate(0>=a?a-1:a,f,
h-32*(f-1)+1)}});var p={20:"Fruitbat",21:"Anchovy"};n.calendars.discworld=q},{"../main":593,"object-assign":473}],582:[function(b,y,F){function q(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");q.prototype=new n.baseCalendar;b(q.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),
monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,n.local.invalidYear);p=p.year()+(0>p.year()?1:0);return 3===p%4||-1===p%4},monthsInYear:function(p){this._validate(p,this.minMonth,
this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(p,h,a){p=this.newDate(p,h,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,h){p=this._validate(p,h,this.minDay,n.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,h,a){return 6>(this.dayOfWeek(p,h,a)||7)},toJD:function(p,h,a){h=this._validate(p,h,a,n.local.invalidDate);p=h.year();0>
p&&p++;return h.day()+30*(h.month()-1)+365*(p-1)+Math.floor(p/4)+this.jdEpoch-1},fromJD:function(p){var h=Math.floor(p)+.5-this.jdEpoch,a=Math.floor((h-Math.floor((h+366)/1461))/365)+1;0>=a&&a--;h=Math.floor(p)+.5-this.newDate(a,1,1).toJD();p=Math.floor(h/30)+1;return this.newDate(a,p,h-30*(p-1)+1)}});n.calendars.ethiopian=q},{"../main":593,"object-assign":473}],583:[function(b,y,F){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function n(h,a){return h-a*Math.floor(h/
a)}var p=b("../main");b=b("object-assign");q.prototype=new p.baseCalendar;b(q.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),
dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,p.local.invalidYear);return this._leapYear(h.year())},_leapYear:function(h){return 7>n(7*(0>h?h+1:h)+1,19)},monthsInYear:function(h){this._validate(h,this.minMonth,this.minDay,p.local.invalidYear);return this._leapYear(h.year?h.year():h)?13:12},weekOfYear:function(h,a,f){h=
this.newDate(h,a,f);h.add(-h.dayOfWeek(),"d");return Math.floor((h.dayOfYear()-1)/7)+1},daysInYear:function(h){h=this._validate(h,this.minMonth,this.minDay,p.local.invalidYear).year();return this.toJD(-1===h?1:h+1,7,1)-this.toJD(h,7,1)},daysInMonth:function(h,a){h.year&&(a=h.month(),h=h.year());this._validate(h,a,this.minDay,p.local.invalidMonth);return 12===a&&this.leapYear(h)?30:8===a&&5===n(this.daysInYear(h),10)?30:9===a&&3===n(this.daysInYear(h),10)?29:this.daysPerMonth[a-1]},weekDay:function(h,
a,f){return 6!==this.dayOfWeek(h,a,f)},extraInfo:function(h,a,f){h=this._validate(h,a,f,p.local.invalidDate);return{yearType:(this.leapYear(h)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(h)%10-3]}},toJD:function(h,a,f){f=this._validate(h,a,f,p.local.invalidDate);h=f.year();a=f.month();f=f.day();var d=0>=h?h+1:h;f=this.jdEpoch+this._delay1(d)+this._delay2(d)+f+1;if(7>a){for(d=7;d<=this.monthsInYear(h);d++)f+=this.daysInMonth(h,d);d=1}else d=7;for(;d<a;d++)f+=this.daysInMonth(h,
d);return f},_delay1:function(h){h=Math.floor((235*h-234)/19);h=29*h+Math.floor((12084+13753*h)/25920);3>n(3*(h+1),7)&&h++;return h},_delay2:function(h){var a=this._delay1(h-1),f=this._delay1(h);return 356===this._delay1(h+1)-f?2:382===f-a?1:0},fromJD:function(h){h=Math.floor(h)+.5;for(var a=Math.floor(98496*(h-this.jdEpoch)/35975351)-1;h>=this.toJD(-1===a?1:a+1,7,1);)a++;for(var f=h<this.toJD(a,1,1)?7:1;h>this.toJD(a,f,this.daysInMonth(a,f));)f++;h=h-this.toJD(a,f,1)+1;return this.newDate(a,f,h)}});
p.calendars.hebrew=q},{"../main":593,"object-assign":473}],584:[function(b,y,F){function q(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");q.prototype=new n.baseCalendar;b(q.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),
monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-khams;Yawm al-jum'a;Yawm as-sabt".split(";"),dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(p){return 11>(11*this._validate(p,this.minMonth,this.minDay,n.local.invalidYear).year()+14)%30},weekOfYear:function(p,
h,a){p=this.newDate(p,h,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInYear:function(p){return this.leapYear(p)?355:354},daysInMonth:function(p,h){p=this._validate(p,h,this.minDay,n.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(12===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,h,a){return 5!==this.dayOfWeek(p,h,a)},toJD:function(p,h,a){a=this._validate(p,h,a,n.local.invalidDate);p=a.year();h=a.month();a=a.day();p=0>=p?p+1:p;return a+Math.ceil(29.5*
(h-1))+354*(p-1)+Math.floor((3+11*p)/30)+this.jdEpoch-1},fromJD:function(p){p=Math.floor(p)+.5;var h=Math.floor((30*(p-this.jdEpoch)+10646)/10631);h=0>=h?h-1:h;var a=Math.min(12,Math.ceil((p-29-this.toJD(h,1,1))/29.5)+1);p=p-this.toJD(h,a,1)+1;return this.newDate(h,a,p)}});n.calendars.islamic=q},{"../main":593,"object-assign":473}],585:[function(b,y,F){function q(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");q.prototype=new n.baseCalendar;
b(q.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,n.local.invalidYear);p=0>p.year()?p.year()+1:p.year();return 0===p%4},weekOfYear:function(p,h,a){p=this.newDate(p,h,a);p.add(4-(p.dayOfWeek()||7),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,h){p=this._validate(p,h,this.minDay,n.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(2===p.month()&&this.leapYear(p.year())?
1:0)},weekDay:function(p,h,a){return 6>(this.dayOfWeek(p,h,a)||7)},toJD:function(p,h,a){a=this._validate(p,h,a,n.local.invalidDate);p=a.year();h=a.month();a=a.day();0>p&&p++;2>=h&&(p--,h+=12);return Math.floor(365.25*(p+4716))+Math.floor(30.6001*(h+1))+a-1524.5},fromJD:function(p){var h=Math.floor(p+.5)+1524,a=Math.floor((h-122.1)/365.25),f=Math.floor(365.25*a),d=Math.floor((h-f)/30.6001);p=d-Math.floor(14>d?1:13);a-=Math.floor(2<p?4716:4715);h=h-f-Math.floor(30.6001*d);0>=a&&a--;return this.newDate(a,
p,h)}});n.calendars.julian=q},{"../main":593,"object-assign":473}],586:[function(b,y,F){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function n(h,a){return h-a*Math.floor(h/a)}var p=b("../main");b=b("object-assign");q.prototype=new p.baseCalendar;b(q.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),
dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},
leapYear:function(h){this._validate(h,this.minMonth,this.minDay,p.local.invalidYear);return!1},formatYear:function(h){h=this._validate(h,this.minMonth,this.minDay,p.local.invalidYear).year();var a=Math.floor(h/400);h%=400;h+=0>h?400:0;return a+"."+Math.floor(h/20)+"."+h%20},forYear:function(h){h=h.split(".");if(3>h.length)throw"Invalid Mayan year";for(var a=0,f=0;f<h.length;f++){var d=parseInt(h[f],10);if(19<Math.abs(d)||0<f&&0>d)throw"Invalid Mayan year";a=20*a+d}return a},monthsInYear:function(h){this._validate(h,
this.minMonth,this.minDay,p.local.invalidYear);return 18},weekOfYear:function(h,a,f){this._validate(h,a,f,p.local.invalidDate);return 0},daysInYear:function(h){this._validate(h,this.minMonth,this.minDay,p.local.invalidYear);return 360},daysInMonth:function(h,a){this._validate(h,a,this.minDay,p.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(h,a,f){return this._validate(h,a,f,p.local.invalidDate).day()},weekDay:function(h,a,f){this._validate(h,a,f,p.local.invalidDate);
return!0},extraInfo:function(h,a,f){a=this._validate(h,a,f,p.local.invalidDate).toJD();h=this._toHaab(a);a=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[h[0]-1],haabMonth:h[0],haabDay:h[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(h){h-=this.jdEpoch;h=n(h+8+340,365);return[Math.floor(h/20)+1,n(h,20)]},_toTzolkin:function(h){h-=this.jdEpoch;return[n(h+20-1,20)+1,n(h+4-1,13)+1]},toJD:function(h,a,f){h=this._validate(h,a,f,
p.local.invalidDate);return h.day()+20*h.month()+360*h.year()+this.jdEpoch},fromJD:function(h){h=Math.floor(h)+.5-this.jdEpoch;var a=Math.floor(h/360);h%=360;h+=0>h?360:0;return this.newDate(a,Math.floor(h/20),h%20)}});p.calendars.mayan=q},{"../main":593,"object-assign":473}],587:[function(b,y,F){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");q.prototype=new n.baseCalendar;var p=n.instance("gregorian");b(q.prototype,{name:"Nanakshahi",
jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),
dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return p.leapYear(h.year()+(1>h.year()?1:0)+1469)},weekOfYear:function(h,a,f){h=this.newDate(h,a,f);h.add(1-(h.dayOfWeek()||7),"d");return Math.floor((h.dayOfYear()-1)/7)+1},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[h.month()-
1]+(12===h.month()&&this.leapYear(h.year())?1:0)},weekDay:function(h,a,f){return 6>(this.dayOfWeek(h,a,f)||7)},toJD:function(h,a,f){a=this._validate(h,a,f,n.local.invalidMonth);h=a.year();0>h&&h++;f=a.day();for(var d=1;d<a.month();d++)f+=this.daysPerMonth[d-1];return f+p.toJD(h+1468,3,13)},fromJD:function(h){h=Math.floor(h+.5);for(var a=Math.floor((h-(this.jdEpoch-1))/366);h>=this.toJD(a+1,1,1);)a++;h=h-Math.floor(this.toJD(a,1,1)+.5)+1;for(var f=1;h>this.daysInMonth(a,f);)h-=this.daysInMonth(a,f),
f++;return this.newDate(a,f,h)}});n.calendars.nanakshahi=q},{"../main":593,"object-assign":473}],588:[function(b,y,F){function q(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");q.prototype=new n.baseCalendar;b(q.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),
monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(p){return this.daysInYear(p)!==this.daysPerYear},weekOfYear:function(p,h,a){p=this.newDate(p,h,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-
1)/7)+1},daysInYear:function(p){p=this._validate(p,this.minMonth,this.minDay,n.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[p])return this.daysPerYear;for(var h=0,a=this.minMonth;12>=a;a++)h+=this.NEPALI_CALENDAR_DATA[p][a];return h},daysInMonth:function(p,h){p.year&&(h=p.month(),p=p.year());this._validate(p,h,this.minDay,n.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[p]?this.daysPerMonth[h-1]:this.NEPALI_CALENDAR_DATA[p][h]},weekDay:function(p,
h,a){return 6!==this.dayOfWeek(p,h,a)},toJD:function(p,h,a){a=this._validate(p,h,a,n.local.invalidDate);p=a.year();h=a.month();a=a.day();var f=n.instance(),d=0,l=h,k=p;this._createMissingCalendarData(p);p-=9<l||9===l&&a>=this.NEPALI_CALENDAR_DATA[k][0]?56:57;9!==h&&(d=a,l--);for(;9!==l;)0>=l&&(l=12,k--),d+=this.NEPALI_CALENDAR_DATA[k][l],l--;9===h?(d+=a-this.NEPALI_CALENDAR_DATA[k][0],0>d&&(d+=f.daysInYear(p))):d+=this.NEPALI_CALENDAR_DATA[k][9]-this.NEPALI_CALENDAR_DATA[k][0];return f.newDate(p,
1,1).add(d,"d").toJD()},fromJD:function(p){p=n.instance().fromJD(p);var h=p.year();p=p.dayOfYear();h+=56;this._createMissingCalendarData(h);for(var a=9,f=this.NEPALI_CALENDAR_DATA[h][a]-this.NEPALI_CALENDAR_DATA[h][0]+1;p>f;)a++,12<a&&(a=1,h++),f+=this.NEPALI_CALENDAR_DATA[h][a];return this.newDate(h,a,this.NEPALI_CALENDAR_DATA[h][a]-(f-p))},_createMissingCalendarData:function(p){var h=this.daysPerMonth.slice(0);h.unshift(17);for(var a=p-1;a<p+2;a++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[a]&&
(this.NEPALI_CALENDAR_DATA[a]=h)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,
30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,
29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,
30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,
31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,
31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,
32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,
31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,
31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,
31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,
31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,
31,32,31,32,30,31,30,29,30,29,30,30]}});n.calendars.nepali=q},{"../main":593,"object-assign":473}],589:[function(b,y,F){function q(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");q.prototype=new n.baseCalendar;b(q.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),
monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Chharshambe Panjshambe Jom'e Shambe".split(" "),dayNamesShort:"Yek Do Se Ch Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,n.local.invalidYear);return 682>682*((p.year()-(0<p.year()?474:473))%2820+512)%2816},weekOfYear:function(p,h,a){p=
this.newDate(p,h,a);p.add(-((p.dayOfWeek()+1)%7),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,h){p=this._validate(p,h,this.minDay,n.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(12===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,h,a){return 5!==this.dayOfWeek(p,h,a)},toJD:function(p,h,a){a=this._validate(p,h,a,n.local.invalidDate);p=a.year();h=a.month();a=a.day();p-=0<=p?474:473;var f=474+(p-2820*Math.floor(p/2820));return a+(7>=h?31*(h-1):30*(h-
1)+6)+Math.floor((682*f-110)/2816)+365*(f-1)+1029983*Math.floor(p/2820)+this.jdEpoch-1},fromJD:function(p){p=Math.floor(p)+.5;var h=p-this.toJD(475,1,1),a=Math.floor(h/1029983);h-=1029983*Math.floor(h/1029983);var f=2820;1029982!==h&&(f=Math.floor(h/366),f=Math.floor((2134*f+2816*(h-366*Math.floor(h/366))+2815)/1028522)+f+1);a=f+2820*a+474;a=0>=a?a-1:a;h=p-this.toJD(a,1,1)+1;h=186>=h?Math.ceil(h/31):Math.ceil((h-6)/30);p=p-this.toJD(a,h,1)+1;return this.newDate(a,h,p)}});n.calendars.persian=q;n.calendars.jalali=
q},{"../main":593,"object-assign":473}],590:[function(b,y,F){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var p=n.instance();q.prototype=new n.baseCalendar;b(q.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,n.local.invalidYear);h=this._t2gYear(h.year());return p.leapYear(h)},weekOfYear:function(h,a,f){a=this._validate(h,this.minMonth,
this.minDay,n.local.invalidYear);h=this._t2gYear(a.year());return p.weekOfYear(h,a.month(),a.day())},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(2===h.month()&&this.leapYear(h.year())?1:0)},weekDay:function(h,a,f){return 6>(this.dayOfWeek(h,a,f)||7)},toJD:function(h,a,f){a=this._validate(h,a,f,n.local.invalidDate);h=this._t2gYear(a.year());return p.toJD(h,a.month(),a.day())},fromJD:function(h){h=p.fromJD(h);var a=this._g2tYear(h.year());
return this.newDate(a,h.month(),h.day())},_t2gYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&-1>=h?1:0)},_g2tYear:function(h){return h-this.yearsOffset-(1<=h&&h<=this.yearsOffset?1:0)}});n.calendars.taiwan=q},{"../main":593,"object-assign":473}],591:[function(b,y,F){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var p=n.instance();q.prototype=new n.baseCalendar;b(q.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,
daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,n.local.invalidYear);h=this._t2gYear(h.year());return p.leapYear(h)},weekOfYear:function(h,a,f){a=this._validate(h,this.minMonth,this.minDay,n.local.invalidYear);h=this._t2gYear(a.year());return p.weekOfYear(h,a.month(),a.day())},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(2===h.month()&&this.leapYear(h.year())?
1:0)},weekDay:function(h,a,f){return 6>(this.dayOfWeek(h,a,f)||7)},toJD:function(h,a,f){a=this._validate(h,a,f,n.local.invalidDate);h=this._t2gYear(a.year());return p.toJD(h,a.month(),a.day())},fromJD:function(h){h=p.fromJD(h);var a=this._g2tYear(h.year());return this.newDate(a,h.month(),h.day())},_t2gYear:function(h){return h-this.yearsOffset-(1<=h&&h<=this.yearsOffset?1:0)},_g2tYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&-1>=h?1:0)}});n.calendars.thai=q},{"../main":593,"object-assign":473}],
592:[function(b,y,F){function q(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");q.prototype=new n.baseCalendar;b(q.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thalth;Yawm al-Arba;Yawm al-Khams;Yawm al-Juma;Yawm al-Sabt".split(";"),dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,n.local.invalidYear);return 355===this.daysInYear(h.year())},weekOfYear:function(h,a,f){h=this.newDate(h,a,f);h.add(-h.dayOfWeek(),"d");return Math.floor((h.dayOfYear()-1)/7)+1},daysInYear:function(h){for(var a=
0,f=1;12>=f;f++)a+=this.daysInMonth(h,f);return a},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,n.local.invalidMonth).toJD()-24E5+.5;for(var f=a=0;f<p.length;f++){if(p[f]>h)return p[a]-p[a-1];a++}return 30},weekDay:function(h,a,f){return 5!==this.dayOfWeek(h,a,f)},toJD:function(h,a,f){h=this._validate(h,a,f,n.local.invalidDate);a=12*(h.year()-1)+h.month()-15292;return h.day()+p[a-1]-1+24E5-.5},fromJD:function(h){h=h-24E5+.5;for(var a=0,f=0;f<p.length&&!(p[f]>h);f++)a++;f=a+15292;var d=
Math.floor((f-1)/12);return this.newDate(d+1,f-12*d,h-p[a-1]+1)},isValid:function(h,a,f){var d=n.baseCalendar.prototype.isValid.apply(this,arguments);d&&(h=null!=h.year?h.year:h,d=1276<=h&&1500>=h);return d},_validate:function(h,a,f,d){var l=n.baseCalendar.prototype._validate.apply(this,arguments);if(1276>l.year||1500<l.year)throw d.replace(/\{0\}/,this.local.name);return l}});n.calendars.ummalqura=q;var p=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,
729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,
3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,
6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,
9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,
12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,
14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,
17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,
19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,
22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,
24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,
27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,
29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,
32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,
34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,
37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,
39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,
42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,
44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,
46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,
49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,
51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,
54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,
56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,
59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,
61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,
64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,
66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,
69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,
71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,
74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,
76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,
79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":593,"object-assign":473}],593:[function(b,y,F){function q(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];
this.calendars={};this._localCals={}}function n(d,l,k,c){this._calendar=d;this._year=l;this._month=k;this._day=c;if(0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(f.local.invalidDate||f.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function p(d,l){d=""+d;return"000000".substring(0,l-d.length)+d}function h(){this.shortYearCutoff="+10"}function a(d){this.local=this.regionalOptions[d]||this.regionalOptions[""]}b=b("object-assign");
b(q.prototype,{instance:function(d,l){d=(d||"gregorian").toLowerCase();l=l||"";var k=this._localCals[d+"-"+l];!k&&this.calendars[d]&&(k=new this.calendars[d](l),this._localCals[d+"-"+l]=k);if(!k)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,d);return k},newDate:function(d,l,k,c,e){c=(null!=d&&d.year?d.calendar():"string"===typeof c?this.instance(c,e):c)||this.instance();return c.newDate(d,l,k)},substituteDigits:function(d){return function(l){return(l+
"").replace(/[0-9]/g,function(k){return d[k]})}},substituteChineseDigits:function(d,l){return function(k){for(var c="",e=0;0<k;){var g=k%10;c=(0===g?"":d[g]+l[e])+c;e++;k=Math.floor(k/10)}0===c.indexOf(d[1]+l[1])&&(c=c.substr(1));return c||d[0]}}});b(n.prototype,{newDate:function(d,l,k){return this._calendar.newDate(null==d?this:d,l,k)},year:function(d){return 0===arguments.length?this._year:this.set(d,"y")},month:function(d){return 0===arguments.length?this._month:this.set(d,"m")},day:function(d){return 0===
arguments.length?this._day:this.set(d,"d")},date:function(d,l,k){if(!this._calendar.isValid(d,l,k))throw(f.local.invalidDate||f.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);this._year=d;this._month=l;this._day=k;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},
daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(d,l){return this._calendar.add(this,d,l)},set:function(d,l){return this._calendar.set(this,d,l)},compareTo:function(d){if(this._calendar.name!==
d._calendar.name)throw(f.local.differentCalendars||f.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,d._calendar.local.name);d=this._year!==d._year?this._year-d._year:this._month!==d._month?this.monthOfYear()-d.monthOfYear():this._day-d._day;return 0===d?0:0>d?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(d){return this._calendar.fromJD(d)},toJSDate:function(){return this._calendar.toJSDate(this)},
fromJSDate:function(d){return this._calendar.fromJSDate(d)},toString:function(){return(0>this.year()?"-":"")+p(Math.abs(this.year()),4)+"-"+p(this.month(),2)+"-"+p(this.day(),2)}});b(h.prototype,{_validateLevel:0,newDate:function(d,l,k){if(null==d)return this.today();d.year&&(this._validate(d,l,k,f.local.invalidDate||f.regionalOptions[""].invalidDate),k=d.day(),l=d.month(),d=d.year());return new n(this,d,l,k)},today:function(){return this.fromJSDate(new Date)},epoch:function(d){return 0>this._validate(d,
this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(d){d=this._validate(d,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return(0>d.year()?"-":"")+p(Math.abs(d.year()),4)},monthsInYear:function(d){this._validate(d,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return 12},monthOfYear:function(d,l){d=this._validate(d,l,this.minDay,
f.local.invalidMonth||f.regionalOptions[""].invalidMonth);return(d.month()+this.monthsInYear(d)-this.firstMonth)%this.monthsInYear(d)+this.minMonth},fromMonthOfYear:function(d,l){l=(l+this.firstMonth-2*this.minMonth)%this.monthsInYear(d)+this.minMonth;this._validate(d,l,this.minDay,f.local.invalidMonth||f.regionalOptions[""].invalidMonth);return l},daysInYear:function(d){d=this._validate(d,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return this.leapYear(d)?366:
365},dayOfYear:function(d,l,k){d=this._validate(d,l,k,f.local.invalidDate||f.regionalOptions[""].invalidDate);return d.toJD()-this.newDate(d.year(),this.fromMonthOfYear(d.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(d,l,k){d=this._validate(d,l,k,f.local.invalidDate||f.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(d))+2)%this.daysInWeek()},extraInfo:function(d,l,k){this._validate(d,l,k,f.local.invalidDate||f.regionalOptions[""].invalidDate);
return{}},add:function(d,l,k){this._validate(d,this.minMonth,this.minDay,f.local.invalidDate||f.regionalOptions[""].invalidDate);return this._correctAdd(d,this._add(d,l,k),l,k)},_add:function(d,l,k){this._validateLevel++;if("d"===k||"w"===k){l=d.toJD()+l*("w"===k?this.daysInWeek():1);var c=d.calendar().fromJD(l);this._validateLevel--;return[c.year(),c.month(),c.day()]}try{var e=d.year()+("y"===k?l:0),g=d.monthOfYear()+("m"===k?l:0);c=d.day();if("y"===k)d.month()!==this.fromMonthOfYear(e,g)&&(g=this.newDate(e,
d.month(),this.minDay).monthOfYear()),g=Math.min(g,this.monthsInYear(e)),c=Math.min(c,this.daysInMonth(e,this.fromMonthOfYear(e,g)));else if("m"===k){for(;g<this.minMonth;)e--,g+=this.monthsInYear(e);for(var m=this.monthsInYear(e);g>m-1+this.minMonth;)e++,g-=m,m=this.monthsInYear(e);c=Math.min(c,this.daysInMonth(e,this.fromMonthOfYear(e,g)))}var r=[e,this.fromMonthOfYear(e,g),c];this._validateLevel--;return r}catch(u){throw this._validateLevel--,u;}},_correctAdd:function(d,l,k,c){this.hasYearZero||
"y"!==c&&"m"!==c||0!==l[0]&&0<d.year()===0<l[0]||(l={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[c],l=this._add(d,k*l[0]+(0>k?-1:1)*l[1],l[2]));return d.date(l[0],l[1],l[2])},set:function(d,l,k){this._validate(d,this.minMonth,this.minDay,f.local.invalidDate||f.regionalOptions[""].invalidDate);var c="y"===k?l:d.year(),e="m"===k?l:d.month();l="d"===k?l:d.day();if("y"===k||"m"===k)l=Math.min(l,this.daysInMonth(c,e));return d.date(c,
e,l)},isValid:function(d,l,k){this._validateLevel++;var c=this.hasYearZero||0!==d;c&&(d=this.newDate(d,l,this.minDay),c=l>=this.minMonth&&l-this.minMonth<this.monthsInYear(d)&&k>=this.minDay&&k-this.minDay<this.daysInMonth(d));this._validateLevel--;return c},toJSDate:function(d,l,k){d=this._validate(d,l,k,f.local.invalidDate||f.regionalOptions[""].invalidDate);return f.instance().fromJD(this.toJD(d)).toJSDate()},fromJSDate:function(d){return this.fromJD(f.instance().fromJSDate(d).toJD())},_validate:function(d,
l,k,c){if(d.year){if(0===this._validateLevel&&this.name!==d.calendar().name)throw(f.local.differentCalendars||f.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,d.calendar().local.name);return d}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(d,l,k))throw c.replace(/\{0\}/,this.local.name);var e=this.newDate(d,l,k);this._validateLevel--;return e}catch(g){throw this._validateLevel--,g;}}});a.prototype=new h;b(a.prototype,{name:"Gregorian",
jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(d){d=this._validate(d,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);d=d.year()+(0>d.year()?1:0);return 0===d%4&&(0!==d%100||0===d%400)},weekOfYear:function(d,l,k){d=this.newDate(d,l,k);d.add(4-(d.dayOfWeek()||7),"d");return Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(d,l){d=this._validate(d,l,this.minDay,f.local.invalidMonth||f.regionalOptions[""].invalidMonth);return this.daysPerMonth[d.month()-
1]+(2===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(d,l,k){return 6>(this.dayOfWeek(d,l,k)||7)},toJD:function(d,l,k){k=this._validate(d,l,k,f.local.invalidDate||f.regionalOptions[""].invalidDate);d=k.year();l=k.month();k=k.day();0>d&&d++;3>l&&(l+=12,d--);var c=Math.floor(d/100);return Math.floor(365.25*(d+4716))+Math.floor(30.6001*(l+1))+k+(2-c+Math.floor(c/4))-1524.5},fromJD:function(d){d=Math.floor(d+.5);var l=Math.floor((d-1867216.25)/36524.25);l=d+1+l-Math.floor(l/4);var k=l+1524;
d=Math.floor((k-122.1)/365.25);var c=Math.floor(365.25*d);l=Math.floor((k-c)/30.6001);k=k-c-Math.floor(30.6001*l);l-=13.5<l?13:1;d-=2.5<l?4716:4715;0>=d&&d--;return this.newDate(d,l,k)},toJSDate:function(d,l,k){d=this._validate(d,l,k,f.local.invalidDate||f.regionalOptions[""].invalidDate);d=new Date(d.year(),d.month()-1,d.day());d.setHours(0);d.setMinutes(0);d.setSeconds(0);d.setMilliseconds(0);d.setHours(12<d.getHours()?d.getHours()+2:0);return d},fromJSDate:function(d){return this.newDate(d.getFullYear(),
d.getMonth()+1,d.getDate())}});var f=y.exports=new q;f.cdate=n;f.baseCalendar=h;f.calendars.gregorian=a},{"object-assign":473}],594:[function(b,y,F){y=b("object-assign");var q=b("./main");y(q.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});
q.local=q.regionalOptions[""];y(q.cdate.prototype,{formatDate:function(n,p){"string"!==typeof n&&(p=n,n="");return this._calendar.formatDate(n||"",this,p)}});y(q.baseCalendar.prototype,{UNIX_EPOCH:q.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:q.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",
RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(n,p,h){"string"!==typeof n&&(h=p,p=n,n="");if(!p)return"";if(p.calendar()!==this)throw q.local.invalidFormat||q.regionalOptions[""].invalidFormat;n=n||this.local.dateFormat;h=h||{};for(var a=h.dayNamesShort||this.local.dayNamesShort,f=h.dayNames||this.local.dayNames,d=h.monthNumbers||this.local.monthNumbers,l=h.monthNamesShort||this.local.monthNamesShort,k=h.monthNames||this.local.monthNames,c=function(A,B){for(var t=1;x+
t<n.length&&n.charAt(x+t)===A;)t++;x+=t-1;return 1<Math.floor(t/(B||1))},e=function(A,B,t,G){B=""+B;if(c(A,G))for(;B.length<t;)B="0"+B;return B},g=function(A,B,t,G){return c(A)?G[B]:t[B]},m=this,r=function(A){return"function"===typeof d?d.call(m,A,c("m")):w(e("m",A.month(),2))},u=function(A,B){return B?"function"===typeof k?k.call(m,A):k[A.month()-m.minMonth]:"function"===typeof l?l.call(m,A):l[A.month()-m.minMonth]},v=this.local.digits,w=function(A){return h.localNumbers&&v?v(A):A},D="",C=!1,x=0;x<
n.length;x++)if(C)"'"!==n.charAt(x)||c("'")?D+=n.charAt(x):C=!1;else switch(n.charAt(x)){case "d":D+=w(e("d",p.day(),2));break;case "D":D+=g("D",p.dayOfWeek(),a,f);break;case "o":D+=e("o",p.dayOfYear(),3);break;case "w":D+=e("w",p.weekOfYear(),2);break;case "m":D+=r(p);break;case "M":D+=u(p,c("M"));break;case "y":D+=c("y",2)?p.year():(10>p.year()%100?"0":"")+p.year()%100;break;case "Y":c("Y",2);D+=p.formatYear();break;case "J":D+=p.toJD();break;case "@":D+=(p.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;
break;case "!":D+=(p.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":c("'")?D+="'":C=!0;break;default:D+=n.charAt(x)}return D},parseDate:function(n,p,h){if(null==p)throw q.local.invalidArguments||q.regionalOptions[""].invalidArguments;p="object"===typeof p?p.toString():p+"";if(""===p)return null;n=n||this.local.dateFormat;h=h||{};var a=h.shortYearCutoff||this.shortYearCutoff;a="string"!==typeof a?a:this.today().year()%100+parseInt(a,10);for(var f=h.dayNamesShort||this.local.dayNamesShort,
d=h.dayNames||this.local.dayNames,l=h.parseMonth||this.local.parseMonth,k=h.monthNumbers||this.local.monthNumbers,c=h.monthNamesShort||this.local.monthNamesShort,e=h.monthNames||this.local.monthNames,g=h=-1,m=-1,r=-1,u=-1,v=!1,w=!1,D=function(J,L){for(var E=1;I+E<n.length&&n.charAt(I+E)===J;)E++;I+=E-1;return 1<Math.floor(E/(L||1))},C=function(J,L){L=D(J,L);J=[2,3,L?4:2,L?4:2,10,11,20]["oyYJ@!".indexOf(J)+1];J=new RegExp("^-?\\d{1,"+J+"}");J=p.substring(H).match(J);if(!J)throw(q.local.missingNumberAt||
q.regionalOptions[""].missingNumberAt).replace(/\{0\}/,H);H+=J[0].length;return parseInt(J[0],10)},x=this,A=function(){if("function"===typeof k){D("m");var J=k.call(x,p.substring(H));H+=J.length;return J}return C("m")},B=function(J,L,E,K){J=D(J,K)?E:L;for(L=0;L<J.length;L++)if(p.substr(H,J[L].length).toLowerCase()===J[L].toLowerCase())return H+=J[L].length,L+x.minMonth;throw(q.local.unknownNameAt||q.regionalOptions[""].unknownNameAt).replace(/\{0\}/,H);},t=function(){if("function"===typeof e){var J=
D("M")?e.call(x,p.substring(H)):c.call(x,p.substring(H));H+=J.length;return J}return B("M",c,e)},G=function(){if(p.charAt(H)!==n.charAt(I))throw(q.local.unexpectedLiteralAt||q.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,H);H++},H=0,I=0;I<n.length;I++)if(w)"'"!==n.charAt(I)||D("'")?G():w=!1;else switch(n.charAt(I)){case "d":r=C("d");break;case "D":B("D",f,d);break;case "o":u=C("o");break;case "w":C("w");break;case "m":m=A();break;case "M":m=t();break;case "y":g=I;v=!D("y",2);I=g;g=C("y",
2);break;case "Y":g=C("Y",2);break;case "J":h=C("J")+.5;"."===p.charAt(H)&&(H++,C("J"));break;case "@":h=C("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":h=C("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case "*":H=p.length;break;case "'":D("'")?G():w=!0;break;default:G()}if(H<p.length)throw q.local.unexpectedText||q.regionalOptions[""].unexpectedText;-1===g?g=this.today().year():100>g&&v&&(g+=-1===a?1900:this.today().year()-this.today().year()%100-(g<=a?0:100));"string"===typeof m&&(m=l.call(this,
g,m));if(-1<u)for(m=1,r=u,a=this.daysInMonth(g,m);r>a;a=this.daysInMonth(g,m))m++,r-=a;return-1<h?this.fromJD(h):this.newDate(g,m,r)},determineDate:function(n,p,h,a,f){h&&"object"!==typeof h&&(f=a,a=h,h=null);"string"!==typeof a&&(f=a,a="");p=p?p.newDate():null;if(null==n)n=p;else{if("string"===typeof n)a:{try{var d=this.parseDate(a,n,f);break a}catch(l){}n=n.toLowerCase();h=(n.match(/^c/)&&h?h.newDate():null)||this.today();a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(f=a.exec(n);f;)h.add(parseInt(f[1],10),
f[2]||"d"),f=a.exec(n);d=h}else d="number"===typeof n?isNaN(n)||Infinity===n||-Infinity===n?p:this.today().add(n,"d"):this.newDate(n);n=d}return n}})},{"./main":593,"object-assign":473}],595:[function(b,y,F){y.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da \x3d _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db \x3d _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da \x3e\x3d 0) !\x3d\x3d (_inline_1_db \x3e\x3d 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":151}],596:[function(b,y,F){y.exports=function(n,p){var h=[];p=+p||0;q(n.hi(n.shape[0]-1),h,p);return h};var q=b("./lib/zc-core")},
{"./lib/zc-core":595}],597:[function(b,y,F){y.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],598:[function(b,y,F){F=
b("./arrow_paths");var q=b("../../plots/font_attributes"),n=b("../../plots/cartesian/constants");b=b("../../plot_api/plot_template").templatedArray;y.exports=b("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:q({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",
min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},
borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:F.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:F.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},
startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",
values:["pixel",n.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",
values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:q({editType:"arraydraw"}),
editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/font_attributes":825,"./arrow_paths":597}],599:[function(b,y,F){function q(f){p.filterVisible(f._fullLayout.annotations).forEach(function(d){var l=h.getFromId(f,d.xref),k=h.getFromId(f,d.yref);d._extremes={};l&&n(d,l);k&&n(d,k)})}function n(f,d){var l=d._id,k=l.charAt(0),
c=f[k],e=f["a"+k],g=f["_"+k+"padplus"],m=f["_"+k+"padminus"],r={x:1,y:-1}[k]*f[k+"shift"],u=3*f.arrowsize*f.arrowwidth||0,v=u+r,w=u-r,D=3*f.startarrowsize*f.arrowwidth||0;u=D+r;r=D-r;f["a"+k+"ref"]===f[k+"ref"]?(k=h.findExtremes(d,[d.r2c(c)],{ppadplus:v,ppadminus:w}),d=h.findExtremes(d,[d.r2c(e)],{ppadplus:Math.max(g,u),ppadminus:Math.max(m,r)}),d={min:[k.min[0],d.min[0]],max:[k.max[0],d.max[0]]}):(u=e?u+e:u,r=e?r-e:r,d=h.findExtremes(d,[d.r2c(c)],{ppadplus:Math.max(g,v,u),ppadminus:Math.max(m,w,
r)}));f._extremes[l]=d}var p=b("../../lib"),h=b("../../plots/cartesian/axes"),a=b("./draw").draw;y.exports=function(f){if(p.filterVisible(f._fullLayout.annotations).length&&f._fullData.length)return p.syncOrAsync([a,q],f)}},{"../../lib":749,"../../plots/cartesian/axes":797,"./draw":604}],600:[function(b,y,F){function q(f,d){f=f._fullLayout.annotations;var l=[],k=[],c=[],e=(d||[]).length,g,m,r;for(g=0;g<f.length;g++){var u=f[g];if(r=u.clicktoshow){for(m=0;m<e;m++){var v=d[m];var w=v.xaxis;var D=v.yaxis;
if(w._id===u.xref&&D._id===u.yref&&w.d2r(v.x)===n(u._xclick,w)&&D.d2r(v.y)===n(u._yclick,D)){v=u.visible?"onout"===r?k:c:l;v.push(g);break}}m===e&&u.visible&&"onout"===r&&k.push(g)}}return{on:l,off:k,explicitOff:c}}function n(f,d){return"log"===d.type?d.l2r(f):d.d2r(f)}var p=b("../../lib"),h=b("../../registry"),a=b("../../plot_api/plot_template").arrayEditor;y.exports={hasClickToShow:function(f,d){f=q(f,d);return 0<f.on.length||0<f.explicitOff.length},onClick:function(f,d){var l=q(f,d);d=l.on;l=l.off.concat(l.explicitOff);
var k={},c=f._fullLayout.annotations,e;if(d.length||l.length){for(e=0;e<d.length;e++){var g=a(f.layout,"annotations",c[d[e]]);g.modifyItem("visible",!0);p.extendFlat(k,g.getUpdateObj())}for(e=0;e<l.length;e++)g=a(f.layout,"annotations",c[l[e]]),g.modifyItem("visible",!1),p.extendFlat(k,g.getUpdateObj());return h.call("update",f,{},k)}}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880}],601:[function(b,y,F){var q=b("../../lib"),n=b("../color");y.exports=function(p,h,a,f){f("opacity");
p=f("bgcolor");var d=f("bordercolor");d=n.opacity(d);f("borderpad");var l=f("borderwidth"),k=f("showarrow");f("text",k?" ":a._dfltTitle.annotation);f("textangle");q.coerceFont(f,"font",a.font);f("width");f("align");f("height")&&f("valign");if(k){k=f("arrowside");if(-1!==k.indexOf("end")){var c=f("arrowhead");var e=f("arrowsize")}-1!==k.indexOf("start")&&(f("startarrowhead",c),f("startarrowsize",e));f("arrowcolor",d?h.bordercolor:n.defaultLine);f("arrowwidth",2*(d&&l||1));f("standoff");f("startstandoff")}h=
f("hovertext");a=a.hoverlabel||{};h&&(p=f("hoverlabel.bgcolor",a.bgcolor||(n.opacity(p)?n.rgb(p):n.defaultLine)),p=f("hoverlabel.bordercolor",a.bordercolor||n.contrast(p)),q.coerceFont(f,"hoverlabel.font",{family:a.font.family,size:a.font.size,color:a.font.color||p}));f("captureevents",!!h)}},{"../../lib":749,"../color":615}],602:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../../lib/to_log_range");y.exports=function(p,h,a,f){function d(g){var m=k[g];m=l?n(m,h.range):Math.pow(10,m);q(m)||(m=null);
f(c+g,m)}h=h||{};var l="log"===a&&"linear"===h.type;a="linear"===a&&"log"===h.type;if(l||a){p=p._fullLayout.annotations;a=h._id.charAt(0);for(var k,c,e=0;e<p.length;e++)k=p[e],c="annotations["+e+"].",k[a+"ref"]===h._id&&d(a),k["a"+a+"ref"]===h._id&&d("a"+a)}}},{"../../lib/to_log_range":775,"fast-isnumeric":241}],603:[function(b,y,F){function q(d,l,k){function c(x,A){return n.coerce(d,l,f,x,A)}var e=c("visible"),g=c("clicktoshow");if(e||g){a(d,l,k,c);e=l.showarrow;var m=["x","y"],r=[-10,-30];k={_fullLayout:k};
for(var u=0;2>u;u++){var v=m[u],w=p.coerceRef(d,l,k,v,"","paper");"paper"!==w&&p.getFromId(k,w)._annIndices.push(l._index);p.coercePosition(l,k,c,w,v,.5);if(e){var D="a"+v,C=p.coerceRef(d,l,k,D,"pixel");"pixel"!==C&&C!==w&&(C=l[D]="pixel");p.coercePosition(l,k,c,C,D,"pixel"===C?r[u]:.4)}c(v+"anchor");c(v+"shift")}n.noneOrAll(d,l,["x","y"]);e&&n.noneOrAll(d,l,["ax","ay"]);g&&(g=c("xclick"),e=c("yclick"),l._xclick=void 0===g?l.x:p.cleanPosition(g,k,l.xref),l._yclick=void 0===e?l.y:p.cleanPosition(e,
k,l.yref))}}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../../plots/array_container_defaults"),a=b("./common_defaults"),f=b("./attributes");y.exports=function(d,l){h(d,l,{name:"annotations",handleItemDefaults:q})}},{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":598,"./common_defaults":601}],604:[function(b,y,F){function q(v,w){var D=v._fullLayout.annotations[w]||{},C=d.getFromId(v,D.xref),x=d.getFromId(v,D.yref);C&&C.setScale();
x&&x.setScale();n(v,D,w,!1,C,x)}function n(v,w,D,C,x,A){function B(ka){ka={index:D,annotation:w._input,fullAnnotation:w,event:ka};C&&(ka.subplotId=C);return ka}function t(ka){ka.call(k.font,qa).attr({"text-anchor":{left:"start",right:"end"}[w.align]||"middle"});e.convertToTspans(ka,v,G);return ka}function G(){function ka(Va,gb){"auto"===gb&&(gb=Va<1/3?"left":Va>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[gb]}var ra=oa.selectAll("a");1===ra.size()&&ra.text()===
oa.text()&&Y.insert("a",":first-child").attr({"xlink:xlink:href":ra.attr("xlink:href"),"xlink:xlink:show":ra.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ca.node());ra=Y.select(".annotation-text-math-group");for(var ha=!ra.empty(),ma=k.bBox((ha?ra:oa).node()),wa=ma.width,na=ma.height,ya=w.width||wa,Fa=w.height||na,Ha=Math.round(ya+2*da),eb=Math.round(Fa+2*da),hb=!1,ob=["x","y"],ib=0;ib<ob.length;ib++){var Pa=ob[ib],sb=w[Pa+"ref"]||Pa,tb=w["a"+Pa+"ref"],Aa={x,y:A}[Pa],Ka=(T+("x"===
Pa?0:-90))*Math.PI/180,Qa=Ha*Math.cos(Ka),Xa=eb*Math.sin(Ka);Ka=Math.abs(Qa)+Math.abs(Xa);var pb=w[Pa+"anchor"],db=w[Pa+"shift"]*("x"===Pa?1:-1),Ia=P[Pa];if(Aa){var Ua=Aa.r2fraction(w[Pa]);if(0>Ua||1<Ua)if(tb===sb){if(Ua=Aa.r2fraction(w["a"+Pa]),0>Ua||1<Ua)hb=!0}else hb=!0;Ua=Aa._offset+Aa.r2p(w[Pa]);var $a=.5}else"x"===Pa?($a=w[Pa],Ua=I.l+I.w*$a):($a=1-w[Pa],Ua=I.t+I.h*$a),$a=w.showarrow?.5:$a;w.showarrow?(Ia.head=Ua,pb=w["a"+Pa],Qa=Qa*ka(.5,w.xanchor)-Xa*ka(.5,w.yanchor),tb===sb?(Ia.tail=Aa._offset+
Aa.r2p(pb),Aa=Qa):(Ia.tail=Ua+pb,Aa=Qa+pb),Ia.text=Ia.tail+Qa,Ua=H["x"===Pa?"width":"height"],"paper"===sb&&(Ia.head=f.constrain(Ia.head,1,Ua-1)),"pixel"===tb&&(sb=-Math.max(Ia.tail-3,Ia.text),tb=Math.min(Ia.tail+3,Ia.text)-Ua,0<sb?(Ia.tail+=sb,Ia.text+=sb):0<tb&&(Ia.tail-=tb,Ia.text-=tb)),Ia.tail+=db,Ia.head+=db):(Aa=Qa=Ka*ka($a,pb),Ia.text=Ua+Qa);Ia.text+=db;Qa+=db;Aa+=db;w["_"+Pa+"padplus"]=Ka/2+Aa;w["_"+Pa+"padminus"]=Ka/2-Aa;w["_"+Pa+"size"]=Ka;w["_"+Pa+"shift"]=Qa}if(hb)Y.remove();else{ob=hb=
0;"left"!==w.align&&(hb=(ya-wa)*("center"===w.align?.5:1));"top"!==w.valign&&(ob=(Fa-na)*("middle"===w.valign?.5:1));ha?ra.select("svg").attr({x:da+hb-1,y:da+ob}).call(k.setClipUrl,la?Q:null,v):oa.call(e.positionText,da+hb-ma.left,da+ob-ma.top).call(k.setClipUrl,la?Q:null,v);pa.select("rect").call(k.setRect,da,da,ya,Fa);ca.call(k.setRect,ea/2,ea/2,Ha-ea,eb-ea);Y.call(k.setTranslate,Math.round(P.x.text-Ha/2),Math.round(P.y.text-eb/2));aa.attr({transform:"rotate("+T+","+P.x.text+","+P.y.text+")"});
var xa=function(Va,gb){V.selectAll(".annotation-arrow-g").remove();var Ma=P.x.head,cb=P.y.head,Sa=P.x.tail+Va,lb=P.y.tail+gb,rb=P.x.text+Va;Va=P.y.text+gb;gb=f.rotationXYMatrix(T,rb,Va);var yb=f.apply2DTransform(gb);gb=f.apply2DTransform2(gb);var Hb=+ca.attr("width"),Vb=+ca.attr("height");rb-=.5*Hb;Hb=rb+Hb;Va-=.5*Vb;Vb=Va+Vb;gb=[[rb,Va,rb,Vb],[rb,Vb,Hb,Vb],[Hb,Vb,Hb,Va],[Hb,Va,rb,Va]].map(gb);if(!gb.reduce(function(Nc,ed){return Nc^!!f.segmentsIntersect(Ma,cb,Ma+1E6,cb+1E6,ed[0],ed[1],ed[2],ed[3])},
!1)){gb.forEach(function(Nc){if(Nc=f.segmentsIntersect(Sa,lb,Ma,cb,Nc[0],Nc[1],Nc[2],Nc[3]))Sa=Nc.x,lb=Nc.y});gb=w.arrowwidth;Vb=w.arrowcolor;Va=w.arrowside;var lc=V.append("g").style({opacity:l.opacity(Vb)}).classed("annotation-arrow-g",!0);Vb=lc.append("path").attr("d","M"+Sa+","+lb+"L"+Ma+","+cb).style("stroke-width",gb+"px").call(l.stroke,l.rgb(Vb));u(Vb,Va,w);if(J.annotationPosition&&Vb.node().parentNode&&!C){Va=Ma;Vb=cb;w.standoff&&(rb=Math.sqrt(Math.pow(Ma-Sa,2)+Math.pow(cb-lb,2)),Va+=w.standoff*
(Sa-Ma)/rb,Vb+=w.standoff*(lb-cb)/rb);gb=lc.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Sa-Va)+","+(lb-Vb),transform:"translate("+Va+","+Vb+")"}).style("stroke-width",gb+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");var Ac,ad;m.init({element:gb.node(),gd:v,prepFn:function(){var Nc=k.getTranslate(Y);Ac=Nc.x;ad=Nc.y;x&&x.autorange&&K(x._name+".autorange",!0);A&&A.autorange&&K(A._name+".autorange",!0)},
moveFn:function(Nc,ed){var Pc=yb(Ac,ad),sd=Pc[0]+Nc;Pc=Pc[1]+ed;Y.call(k.setTranslate,sd,Pc);N("x",x?x.p2r(x.r2p(w.x)+Nc):w.x+Nc/I.w);N("y",A?A.p2r(A.r2p(w.y)+ed):w.y-ed/I.h);w.axref===w.xref&&N("ax",x.p2r(x.r2p(w.ax)+Nc));w.ayref===w.yref&&N("ay",A.p2r(A.r2p(w.ay)+ed));lc.attr("transform","translate("+Nc+","+ed+")");aa.attr({transform:"rotate("+T+","+sd+","+Pc+")"})},doneFn:function(){h.call("_guiRelayout",v,O());var Nc=document.querySelector(".js-notes-box-panel");Nc&&Nc.redraw(Nc.selectedObj)}})}}};
w.showarrow&&xa(0,0);if(ba){var Ga;m.init({element:Y.node(),gd:v,prepFn:function(){Ga=aa.attr("transform")},moveFn:function(Va,gb){var Ma="pointer";if(w.showarrow)w.axref===w.xref?N("ax",x.p2r(x.r2p(w.ax)+Va)):N("ax",w.ax+Va),w.ayref===w.yref?N("ay",A.p2r(A.r2p(w.ay)+gb)):N("ay",w.ay+gb),xa(Va,gb);else{if(C)return;if(x)var cb=x.p2r(x.r2p(w.x)+Va);else cb=w._xsize/I.w,cb=m.align(w.x+(w._xshift-w.xshift)/I.w-cb/2+Va/I.w,cb,0,1,w.xanchor);if(A)var Sa=A.p2r(A.r2p(w.y)+gb);else Sa=w._ysize/I.h,Sa=m.align(w.y-
(w._yshift+w.yshift)/I.h-Sa/2-gb/I.h,Sa,0,1,w.yanchor);N("x",cb);N("y",Sa);x&&A||(Ma=m.getCursor(x?.5:cb,A?.5:Sa,w.xanchor,w.yanchor))}aa.attr({transform:"translate("+Va+","+gb+")"+Ga});g(Y,Ma)},clickFn:function(Va,gb){w.captureevents&&v.emit("plotly_clickannotation",B(gb))},doneFn:function(){g(Y);h.call("_guiRelayout",v,O());var Va=document.querySelector(".js-notes-box-panel");Va&&Va.redraw(Va.selectedObj)}})}}}var H=v._fullLayout,I=v._fullLayout._size,J=v._context.edits;if(C){var L="annotation-"+
C;var E=C+".annotations"}else L="annotation",E="annotations";E=r(v.layout,E,w);var K=E.modifyBase,N=E.modifyItem,O=E.getUpdateObj;H._infolayer.selectAll("."+L+'[data-index\x3d"'+D+'"]').remove();var Q="clip"+H._uid+"_ann"+D;if(w._input&&!1!==w.visible){var P={x:{},y:{}},T=+w.textangle||0,V=H._infolayer.append("g").classed(L,!0).attr("data-index",String(D)).style("opacity",w.opacity),aa=V.append("g").classed("annotation-text-g",!0),ba=J[w.showarrow?"annotationTail":"annotationPosition"];L=w.captureevents||
J.annotationText||ba;var Y=aa.append("g").style("pointer-events",L?"all":null).call(g,"pointer").on("click",function(){v._dragging=!1;v.emit("plotly_clickannotation",B(p.event))});if(w.hovertext)Y.on("mouseover",function(){var ka=w.hoverlabel,ra=ka.font,ha=this.getBoundingClientRect(),ma=v.getBoundingClientRect();c.loneHover({x0:ha.left-ma.left,x1:ha.right-ma.left,y:(ha.top+ha.bottom)/2-ma.top,text:w.hovertext,color:ka.bgcolor,borderColor:ka.bordercolor,fontFamily:ra.family,fontSize:ra.size,fontColor:ra.color},
{container:H._hoverlayer.node(),outerContainer:H._paper.node(),gd:v})}).on("mouseout",function(){c.loneUnhover(H._hoverlayer.node())});var ea=w.borderwidth,da=ea+w.borderpad,ca=Y.append("rect").attr("class","bg").style("stroke-width",ea+"px").call(l.stroke,w.bordercolor).call(l.fill,w.bgcolor),la=w.width||w.height,pa=H._topclips.selectAll("#"+Q).data(la?[0]:[]);pa.enter().append("clipPath").classed("annclip",!0).attr("id",Q).append("rect");pa.exit().remove();var qa=w.font;L=H._meta?f.templateString(w.text,
H._meta):w.text;var oa=Y.append("text").classed("annotation-text",!0).text(L);if(J.annotationText)oa.call(e.makeEditable,{delegate:Y,gd:v}).call(t).on("edit",function(ka){w.text=ka;this.call(t);N("text",ka);x&&x.autorange&&K(x._name+".autorange",!0);A&&A.autorange&&K(A._name+".autorange",!0);h.call("_guiRelayout",v,O())});else oa.call(t)}else p.selectAll("#"+Q).remove()}var p=b("d3"),h=b("../../registry"),a=b("../../plots/plots"),f=b("../../lib"),d=b("../../plots/cartesian/axes"),l=b("../color"),
k=b("../drawing"),c=b("../fx"),e=b("../../lib/svg_text_utils"),g=b("../../lib/setcursor"),m=b("../dragelement"),r=b("../../plot_api/plot_template").arrayEditor,u=b("./draw_arrow_head");y.exports={draw:function(v){var w=v._fullLayout;w._infolayer.selectAll(".annotation").remove();for(var D=0;D<w.annotations.length;D++)w.annotations[D].visible&&q(v,D);return a.previousPromises(v)},drawOne:q,drawRaw:n}},{"../../lib":749,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,
"../../plots/cartesian/axes":797,"../../plots/plots":860,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"../fx":655,"./draw_arrow_head":605,d3:169}],605:[function(b,y,F){var q=b("d3"),n=b("../color"),p=b("./arrow_paths");y.exports=function(h,a,f){function d(){h.style("stroke-dasharray","0px,100px")}function l(G,H,I,J){G.path&&(G.noRotate&&(I=0),q.select(k.parentNode).append("path").attr({"class":h.attr("class"),d:G.path,transform:"translate("+H.x+","+H.y+")"+(I?"rotate("+
180*I/Math.PI+")":"")+"scale("+J+")"}).style({fill:n.rgb(f.arrowcolor),"stroke-width":0}))}var k=h.node(),c=p[f.arrowhead||0],e=p[f.startarrowhead||0],g=(f.arrowwidth||1)*(f.arrowsize||1),m=(f.arrowwidth||1)*(f.startarrowsize||1),r=0<=a.indexOf("start");a=0<=a.indexOf("end");var u=c.backoff*g+f.standoff,v=e.backoff*m+f.startstandoff;if("line"===k.nodeName){var w={x:+h.attr("x1"),y:+h.attr("y1")};var D={x:+h.attr("x2"),y:+h.attr("y2")};var C=w.x-D.x,x=w.y-D.y;var A=Math.atan2(x,C);var B=A+Math.PI;
if(u&&v&&u+v>Math.sqrt(C*C+x*x)){d();return}if(u){if(u*u>C*C+x*x){d();return}var t=u*Math.sin(A);D.x+=u*Math.cos(A);D.y+=t;h.attr({x2:D.x,y2:D.y})}if(v){if(v*v>C*C+x*x){d();return}u=v*Math.sin(A);w.x-=v*Math.cos(A);w.y-=u;h.attr({x1:w.x,y1:w.y})}}else if("path"===k.nodeName){C=k.getTotalLength();x="";if(C<u+v){d();return}w=k.getPointAtLength(0);A=k.getPointAtLength(.1);A=Math.atan2(w.y-A.y,w.x-A.x);w=k.getPointAtLength(Math.min(v,C));x="0px,"+v+"px,";D=k.getPointAtLength(C);B=k.getPointAtLength(C-
.1);B=Math.atan2(D.y-B.y,D.x-B.x);D=k.getPointAtLength(Math.max(0,C-u));h.style("stroke-dasharray",x+(C-(x?v+u:u)+"px,"+C+"px"))}r&&l(e,w,A,m);a&&l(c,D,B,g)}},{"../color":615,"./arrow_paths":597,d3:169}],606:[function(b,y,F){F=b("./draw");var q=b("./click");y.exports={moduleType:"component",name:"annotations",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("annotations"),calcAutorange:b("./calc_autorange"),draw:F.draw,
drawOne:F.drawOne,drawRaw:F.drawRaw,hasClickToShow:q.hasClickToShow,onClick:q.onClick,convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":809,"./attributes":598,"./calc_autorange":599,"./click":600,"./convert_coords":602,"./defaults":603,"./draw":604}],607:[function(b,y,F){F=b("../annotations/attributes");var q=b("../../plot_api/edit_types").overrideAll;b=b("../../plot_api/plot_template").templatedArray;y.exports=q(b("annotation",{visible:F.visible,x:{valType:"any"},
y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:F.xanchor,xshift:F.xshift,yanchor:F.yanchor,yshift:F.yshift,text:F.text,textangle:F.textangle,font:F.font,width:F.width,height:F.height,opacity:F.opacity,align:F.align,valign:F.valign,bgcolor:F.bgcolor,bordercolor:F.bordercolor,borderpad:F.borderpad,borderwidth:F.borderwidth,showarrow:F.showarrow,arrowcolor:F.arrowcolor,arrowhead:F.arrowhead,startarrowhead:F.startarrowhead,arrowside:F.arrowside,arrowsize:F.arrowsize,
startarrowsize:F.startarrowsize,arrowwidth:F.arrowwidth,standoff:F.standoff,startstandoff:F.startstandoff,hovertext:F.hovertext,hoverlabel:F.hoverlabel,captureevents:F.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../annotations/attributes":598}],608:[function(b,y,F){function q(h,a){var f=a.fullSceneLayout.domain,d=a.fullLayout._size;a={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};h._xa={};n.extendFlat(h._xa,a);p.setConvert(h._xa);
h._xa._offset=d.l+f.x[0]*d.w;h._xa.l2p=function(){return.5*(1+h._pdata[0]/h._pdata[3])*d.w*(f.x[1]-f.x[0])};h._ya={};n.extendFlat(h._ya,a);p.setConvert(h._ya);h._ya._offset=d.t+(1-f.y[1])*d.h;h._ya.l2p=function(){return.5*(1-h._pdata[1]/h._pdata[3])*d.h*(f.y[1]-f.y[0])}}var n=b("../../lib"),p=b("../../plots/cartesian/axes");y.exports=function(h){for(var a=h.fullSceneLayout.annotations,f=0;f<a.length;f++)q(a[f],h);h.fullLayout._infolayer.selectAll(".annotation-"+h.id).remove()}},{"../../lib":749,"../../plots/cartesian/axes":797}],
609:[function(b,y,F){function q(d,l,k,c){function e(m,r){return n.coerce(d,l,f,m,r)}function g(m){var r=m+"axis",u={_fullLayout:{}};u._fullLayout[r]=k[r];return p.coercePosition(l,u,e,m,m,.5)}e("visible")&&(a(d,l,c.fullLayout,e),g("x"),g("y"),g("z"),n.noneOrAll(d,l,["x","y","z"]),l.xref="x",l.yref="y",l.zref="z",e("xanchor"),e("yanchor"),e("xshift"),e("yshift"),l.showarrow&&(l.axref="pixel",l.ayref="pixel",e("ax",-10),e("ay",-30),n.noneOrAll(d,l,["ax","ay"])))}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),
h=b("../../plots/array_container_defaults"),a=b("../annotations/common_defaults"),f=b("./attributes");y.exports=function(d,l,k){h(d,l,{name:"annotations",handleItemDefaults:q,fullLayout:k.fullLayout})}},{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"../annotations/common_defaults":601,"./attributes":607}],610:[function(b,y,F){var q=b("../annotations/draw").drawRaw,n=b("../../plots/gl3d/project"),p=["x","y","z"];y.exports=function(h){for(var a=h.fullSceneLayout,
f=h.dataScale,d=a.annotations,l=0;l<d.length;l++){for(var k=d[l],c=!1,e=0;3>e;e++){var g=p[e];g=a[g+"axis"].r2fraction(k[g]);if(0>g||1<g){c=!0;break}}c?h.fullLayout._infolayer.select(".annotation-"+h.id+'[data-index\x3d"'+l+'"]').remove():(k._pdata=n(h.glplot.cameraParams,[a.xaxis.r2l(k.x)*f[0],a.yaxis.r2l(k.y)*f[1],a.zaxis.r2l(k.z)*f[2]]),q(h.graphDiv,k,l,h.id,k._xa,k._ya))}}},{"../../plots/gl3d/project":848,"../annotations/draw":604}],611:[function(b,y,F){var q=b("../../registry"),n=b("../../lib");
y.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),includeBasePlot:function(p,h){var a=q.subplotsRegistry.gl3d;if(a)for(var f=a.attrRegex,d=Object.keys(p),l=0;l<d.length;l++){var k=d[l];f.test(k)&&(p[k].annotations||[]).length&&(n.pushUnique(h._basePlotModules,a),n.pushUnique(h._subplots.gl3d,k))}},convert:b("./convert"),draw:b("./draw")}},{"../../lib":749,"../../registry":880,
"./attributes":607,"./convert":608,"./defaults":609,"./draw":610}],612:[function(b,y,F){y.exports=b("world-calendars/dist/main");b("world-calendars/dist/plus");b("world-calendars/dist/calendars/chinese");b("world-calendars/dist/calendars/coptic");b("world-calendars/dist/calendars/discworld");b("world-calendars/dist/calendars/ethiopian");b("world-calendars/dist/calendars/hebrew");b("world-calendars/dist/calendars/islamic");b("world-calendars/dist/calendars/julian");b("world-calendars/dist/calendars/mayan");
b("world-calendars/dist/calendars/nanakshahi");b("world-calendars/dist/calendars/nepali");b("world-calendars/dist/calendars/persian");b("world-calendars/dist/calendars/taiwan");b("world-calendars/dist/calendars/thai");b("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":579,"world-calendars/dist/calendars/coptic":580,"world-calendars/dist/calendars/discworld":581,"world-calendars/dist/calendars/ethiopian":582,"world-calendars/dist/calendars/hebrew":583,"world-calendars/dist/calendars/islamic":584,
"world-calendars/dist/calendars/julian":585,"world-calendars/dist/calendars/mayan":586,"world-calendars/dist/calendars/nanakshahi":587,"world-calendars/dist/calendars/nepali":588,"world-calendars/dist/calendars/persian":589,"world-calendars/dist/calendars/taiwan":590,"world-calendars/dist/calendars/thai":591,"world-calendars/dist/calendars/ummalqura":592,"world-calendars/dist/main":593,"world-calendars/dist/plus":594}],613:[function(b,y,F){function q(r){var u=e[r];return u?u:u=e[r]=h.instance(r)}
function n(r){return a.extendFlat({},l,{description:r})}function p(r){return"Sets the calendar system to use with `"+r+"` date data."}var h=b("./calendars"),a=b("../../lib");b=b("../../constants/numerical");var f=b.EPOCHJD,d=b.ONEDAY,l={valType:"enumerated",values:Object.keys(h.calendars),editType:"calc",dflt:"gregorian"},k=function(r,u,v,w){var D={};D[v]=l;return a.coerce(r,u,D,v,w)},c={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},
m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},e={};b={xcalendar:n(p("x"))};F=a.extendFlat({},b,{ycalendar:n(p("y"))});var g=a.extendFlat({},F,{zcalendar:n(p("z"))}),m=n("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
y.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:F,bar:F,box:F,heatmap:F,contour:F,histogram:F,histogram2d:F,histogram2dcontour:F,scatter3d:g,surface:g,mesh3d:g,scattergl:F,ohlc:b,candlestick:b},layout:{calendar:n("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:m},yaxis:{calendar:m},scene:{xaxis:{calendar:m},yaxis:{calendar:m},zaxis:{calendar:m}},polar:{radialaxis:{calendar:m}}},transforms:{filter:{valuecalendar:n("Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:n("Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:l,handleDefaults:k,handleTraceDefaults:function(r,u,v,w){for(var D=0;D<v.length;D++)k(r,u,v[D]+"calendar",w.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",
islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",
ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],
thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:q,worldCalFmt:function(r,u,v){u=Math.floor((u+.05)/d)+f;v=q(v).fromJD(u);u=0;for(var w,D,C;-1!==(u=r.indexOf("%",u));)w=r.charAt(u+1),"0"===w||"-"===w||"_"===w?(C=3,D=r.charAt(u+2),"_"===w&&(w="-")):(D=w,w="0",C=2),(D=c[D])?(w="##"===D?"##":v.formatDate(D[w]),r=r.substr(0,u)+w+r.substr(u+C),u+=w.length):u+=C;return r}}},{"../../constants/numerical":724,"../../lib":749,"./calendars":612}],614:[function(b,y,F){F.defaults=
"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");F.defaultLine="#444";F.lightLine="#eee";F.background="#fff";F.borderLine="#BEC8D9";F.lightFraction=1E3/11},{}],615:[function(b,y,F){function q(d){if(p(d)||"string"!==typeof d)return d;var l=d.trim();if("rgb"!==l.substr(0,3))return d;var k=l.match(/^rgba?\s*\(([^()]*)\)$/);if(!k)return d;k=k[1].trim().split(/\s*[\s,]\s*/);l="a"===l.charAt(3)&&4===k.length;if(!l&&3!==k.length)return d;for(var c=0;c<k.length;c++){if(!k[c].length)return d;
k[c]=Number(k[c]);if(!(0<=k[c]))return d;if(3===c)1<k[c]&&(k[c]=1);else if(1<=k[c])return d}d=Math.round(255*k[0])+", "+Math.round(255*k[1])+", "+Math.round(255*k[2]);return l?"rgba("+d+", "+k[3]+")":"rgb("+d+")"}var n=b("tinycolor2"),p=b("fast-isnumeric"),h=y.exports={};b=b("./attributes");h.defaults=b.defaults;var a=h.defaultLine=b.defaultLine;h.lightLine=b.lightLine;var f=h.background=b.background;h.tinyRGB=function(d){d=d.toRgb();return"rgb("+Math.round(d.r)+", "+Math.round(d.g)+", "+Math.round(d.b)+
")"};h.rgb=function(d){return h.tinyRGB(n(d))};h.opacity=function(d){return d?n(d).getAlpha():0};h.addOpacity=function(d,l){d=n(d).toRgb();return"rgba("+Math.round(d.r)+", "+Math.round(d.g)+", "+Math.round(d.b)+", "+l+")"};h.combine=function(d,l){var k=n(d).toRgb();if(1===k.a)return n(d).toRgbString();d=n(l||f).toRgb();d=1===d.a?d:{r:255*(1-d.a)+d.r*d.a,g:255*(1-d.a)+d.g*d.a,b:255*(1-d.a)+d.b*d.a};return n({r:d.r*(1-k.a)+k.r*k.a,g:d.g*(1-k.a)+k.g*k.a,b:d.b*(1-k.a)+k.b*k.a}).toRgbString()};h.contrast=
function(d,l,k){var c=n(d);1!==c.getAlpha()&&(c=n(h.combine(d,f)));return(c.isDark()?l?c.lighten(l):f:k?c.darken(k):a).toString()};h.stroke=function(d,l){l=n(l);d.style({stroke:h.tinyRGB(l),"stroke-opacity":l.getAlpha()})};h.fill=function(d,l){l=n(l);d.style({fill:h.tinyRGB(l),"fill-opacity":l.getAlpha()})};h.clean=function(d){if(d&&"object"===typeof d){var l=Object.keys(d),k;for(k=0;k<l.length;k++){var c=l[k];var e=d[c];if("color"===c.substr(c.length-5))if(Array.isArray(e))for(c=0;c<e.length;c++)e[c]=
q(e[c]);else d[c]=q(e);else if("colorscale"===c.substr(c.length-10)&&Array.isArray(e))for(c=0;c<e.length;c++)Array.isArray(e[c])&&(e[c][1]=q(e[c][1]));else if(Array.isArray(e)){if(c=e[0],!Array.isArray(c)&&c&&"object"===typeof c)for(c=0;c<e.length;c++)h.clean(e[c])}else e&&"object"===typeof e&&h.clean(e)}}}},{"./attributes":614,"fast-isnumeric":241,tinycolor2:548}],616:[function(b,y,F){F=b("../../plots/cartesian/layout_attributes");var q=b("../../plots/font_attributes"),n=b("../../lib/extend").extendFlat;
b=b("../../plot_api/edit_types").overrideAll;y.exports=b({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:F.linecolor,outlinewidth:F.linewidth,bordercolor:F.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:F.tickmode,nticks:F.nticks,tick0:F.tick0,dtick:F.dtick,tickvals:F.tickvals,ticktext:F.ticktext,ticks:n({},F.ticks,{dflt:""}),ticklen:F.ticklen,tickwidth:F.tickwidth,tickcolor:F.tickcolor,showticklabels:F.showticklabels,tickfont:q({}),tickangle:F.tickangle,
tickformat:F.tickformat,tickformatstops:F.tickformatstops,tickprefix:F.tickprefix,showtickprefix:F.showtickprefix,ticksuffix:F.ticksuffix,showticksuffix:F.showticksuffix,separatethousands:F.separatethousands,exponentformat:F.exponentformat,showexponent:F.showexponent,title:{text:{valType:"string"},font:q({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:q({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},
"colorbars","from-root")},{"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/cartesian/layout_attributes":811,"../../plots/font_attributes":825}],617:[function(b,y,F){y.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],618:[function(b,y,F){var q=b("../../lib"),n=b("../../plot_api/plot_template"),
p=b("../../plots/cartesian/tick_value_defaults"),h=b("../../plots/cartesian/tick_mark_defaults"),a=b("../../plots/cartesian/tick_label_defaults"),f=b("./attributes");y.exports=function(d,l,k){function c(m,r){return q.coerce(g,e,f,m,r)}var e=n.newContainer(l,"colorbar"),g=d.colorbar||{};d=c("thicknessmode");c("thickness","fraction"===d?30/(k.width-k.margin.l-k.margin.r):30);d=c("lenmode");c("len","fraction"===d?1:k.height-k.margin.t-k.margin.b);c("x");c("xanchor");c("xpad");c("y");c("yanchor");c("ypad");
q.noneOrAll(g,e,["x","y"]);c("outlinecolor");c("outlinewidth");c("bordercolor");c("borderwidth");c("bgcolor");p(g,e,c,"linear");d={outerTicks:!1,font:k.font};a(g,e,c,"linear",d);h(g,e,c,"linear",d);c("title.text",k._dfltTitle.colorbar);q.coerceFont(c,"title.font",k.font);c("title.side")}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_mark_defaults":819,"../../plots/cartesian/tick_value_defaults":820,"./attributes":616}],
619:[function(b,y,F){function q(J){function L(la){return m(la,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function E(){"function"===typeof V.calc?V.calc(J,T,Q):(Q._fillgradient=P.reversescale?C(P.colorscale):P.colorscale,Q._zrange=[P[V.min],P[V.max]])}for(var K=J._fullLayout,N=J.calcdata,O=[],Q,P,T,V,aa=0;aa<N.length;aa++){T=N[aa][0].trace;var ba=T._module.colorbar;if(!0===T.visible&&ba){var Y=
Array.isArray(ba);ba=Y?ba:[ba];for(var ea=0;ea<ba.length;ea++){V=ba[ea];var da=V.container;(P=da?T[da]:T)&&P.showscale&&(Q=L(P.colorbar),Q._id="cb"+T.uid+(Y&&da?"-"+da:""),Q._traceIndex=T.index,Q._propPrefix=(da?da+".":"")+"colorbar.",Q._meta=T._meta,E(),O.push(Q))}}}for(var ca in K._colorAxes)P=K[ca],P.showscale&&(N=K._colorAxes[ca],Q=L(P.colorbar),Q._id="cb"+ca,Q._propPrefix=ca+".colorbar.",Q._meta=K._meta,V={min:"cmin",max:"cmax"},"heatmap"!==N[0]&&(T=N[1],V.calc=T._module.colorbar.calc),E(),O.push(Q));
return O}function n(J,L,E){function K(Pa,sb){var tb={propContainer:Ha,propName:L._propPrefix+"title",traceIndex:L._traceIndex,_meta:L._meta,placeholder:N._dfltTitle.colorbar,containerGroup:J.select("."+I.cbtitle)},Aa="h"===Pa.charAt(0)?Pa.substr(1):"h"+Pa;J.selectAll("."+Aa+",."+Aa+"-math-group").remove();w.draw(E,Pa,m(tb,sb||{}))}var N=E._fullLayout,O=N._size,Q=L._fillcolor,P=L._line,T=L.title,V=T.side,aa=L._zrange||f.extent(("function"===typeof Q?Q:P.color).domain()),ba="function"===typeof P.color?
P.color:function(){return P.color},Y="function"===typeof Q?Q:function(){return Q},ea=L._levels,da=h(E,L,aa),ca=da.fill,la=da.line,pa=Math.round(L.thickness*("fraction"===L.thicknessmode?O.w:1));da=pa/O.w;var qa=Math.round(L.len*("fraction"===L.lenmode?O.h:1)),oa=qa/O.h,ka=L.xpad/O.w,ra=(L.borderwidth+L.outlinewidth)/2,ha=L.ypad/O.h,ma=Math.round(L.x*O.w+L.xpad),wa=L.x-da*({middle:.5,right:1}[L.xanchor]||0),na=L.y+oa*(({top:-.5,bottom:.5}[L.yanchor]||0)-.5),ya=Math.round(O.h*(1-na)),Fa=ya-qa;L._lenFrac=
oa;L._thickFrac=da;L._xLeftFrac=wa;L._yBottomFrac=na;var Ha=L._axis=a(E,L,aa);Ha.position=L.x+ka+da;-1!==["top","bottom"].indexOf(V)&&(Ha.title.side=V,Ha.titlex=L.x+ka,Ha.titley=na+("top"===T.side?oa-ha:ha));P.color&&"auto"===L.tickmode&&(Ha.tickmode="linear",Ha.tick0=ea.start,T=ea.size,da=g.constrain((ya-Fa)/50,4,15)+1,da=(aa[1]-aa[0])/((L.nticks||da)*T),1<da&&(qa=Math.pow(10,Math.floor(Math.log(da)/Math.LN10)),T*=qa*g.roundUp(da/qa,[2,5,10]),2E-6>(Math.abs(ea.start)/ea.size+1E-6)%1&&(Ha.tick0=0)),
Ha.dtick=T);Ha.domain=[na+ha,na+oa-ha];Ha.setScale();J.attr("transform","translate("+Math.round(O.l)+","+Math.round(O.t)+")");var eb=J.select("."+I.cbtitleunshift).attr("transform","translate(-"+Math.round(O.l)+",-"+Math.round(O.t)+")"),hb=J.select("."+I.cbaxis),ob,ib=0;return g.syncOrAsync([l.previousPromises,function(){if(-1!==["top","bottom"].indexOf(V)){var Pa=Ha.title.font.size;K(Ha._id+"title",{attributes:{x:O.l+(L.x+ka)*O.w,y:"top"===V?(1-(na+oa-ha))*O.h+O.t+3+.75*Pa:(1-(na+ha))*O.h+O.t-3-
.25*Pa,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(V)){var Pa=J.select("."+I.cbtitle),sb=Pa.select("text"),tb=[-L.outlinewidth/2,L.outlinewidth/2],Aa=Pa.select(".h"+Ha._id+"title-math-group").node(),Ka=15.6;sb.node()&&(Ka=parseInt(sb.node().style.fontSize,10)*t);Aa?(ib=u.bBox(Aa).height,ib>Ka&&(tb[1]-=(ib-Ka)/2)):sb.node()&&!sb.classed(I.jsPlaceholder)&&(ib=u.bBox(sb.node()).height);ib&&(ib+=5,"top"===V?(Ha.domain[1]-=ib/O.h,tb[1]*=-1):(Ha.domain[0]+=ib/O.h,sb=D.lineCount(sb),
tb[1]+=(1-sb)*Ka),Pa.attr("transform","translate("+tb+")"),Ha.setScale())}J.selectAll("."+I.cbfills+",."+I.cblines).attr("transform","translate(0,"+Math.round(O.h*(1-Ha.domain[1]))+")");hb.attr("transform","translate(0,"+Math.round(-O.t)+")");Pa=J.select("."+I.cbfills).selectAll("rect."+I.cbfill).data(ca);Pa.enter().append("rect").classed(I.cbfill,!0).style("stroke","none");Pa.exit().remove();var Qa=aa.map(Ha.c2p).map(Math.round).sort(function(Xa,pb){return Xa-pb});Pa.each(function(Xa,pb){pb=[0===
pb?aa[0]:(ca[pb]+ca[pb-1])/2,pb===ca.length-1?aa[1]:(ca[pb]+ca[pb+1])/2].map(Ha.c2p).map(Math.round);pb[1]=g.constrain(pb[1]+(pb[1]>pb[0])?1:-1,Qa[0],Qa[1]);pb=f.select(this).attr({x:ma,width:Math.max(pa,2),y:f.min(pb),height:Math.max(f.max(pb)-f.min(pb),2)});L._fillgradient?u.gradient(pb,E,L._id,"vertical",L._fillgradient,"fill"):(Xa=Y(Xa).replace("e-",""),pb.attr("fill",d(Xa).toHexString()))});Pa=J.select("."+I.cblines).selectAll("path."+I.cbline).data(P.color&&P.width?la:[]);Pa.enter().append("path").classed(I.cbline,
!0);Pa.exit().remove();Pa.each(function(Xa){f.select(this).attr("d","M"+ma+","+(Math.round(Ha.c2p(Xa))+P.width/2%1)+"h"+pa).call(u.lineGroupStyle,P.width,ba(Xa),P.dash)});hb.selectAll("g."+Ha._id+"tick,path").remove();Pa=ma+pa+(L.outlinewidth||0)/2-("outside"===L.ticks?1:0);tb=c.calcTicks(Ha);Ka=c.makeTransFn(Ha);sb=c.getTickSigns(Ha)[2];c.drawTicks(E,Ha,{vals:"inside"===Ha.ticks?c.clipEnds(Ha,tb):tb,layer:hb,path:c.makeTickPath(Ha,Pa,sb),transFn:Ka});return c.drawLabels(E,Ha,{vals:tb,layer:hb,transFn:Ka,
labelFns:c.makeLabelFns(Ha,Pa)})},function(){if(-1===["top","bottom"].indexOf(V)){var Pa=Ha.title.font.size,sb=Ha._offset+Ha._length/2;Pa=O.l+(Ha.position||0)*O.w+("right"===Ha.side?10+Pa*(Ha.showticklabels?1:.5):-10-Pa*(Ha.showticklabels?.5:0));K("h"+Ha._id+"title",{avoid:{selection:f.select(E).selectAll("g."+Ha._id+"tick"),side:V,offsetLeft:O.l,offsetTop:0,maxShift:N.width},attributes:{x:Pa,y:sb,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},l.previousPromises,function(){var Pa=pa+
L.outlinewidth/2+u.bBox(hb.node()).width;ob=eb.select("text");if(ob.node()&&!ob.classed(I.jsPlaceholder)){var sb=eb.select(".h"+Ha._id+"title-math-group").node();sb=sb&&-1!==["top","bottom"].indexOf(V)?u.bBox(sb).width:u.bBox(eb.node()).right-ma-O.l;Pa=Math.max(Pa,sb)}sb=2*L.xpad+Pa+L.borderwidth+L.outlinewidth/2;var tb=ya-Fa;J.select("."+I.cbbg).attr({x:ma-L.xpad-(L.borderwidth+L.outlinewidth)/2,y:Fa-ra,width:Math.max(sb,2),height:Math.max(tb+2*ra,2)}).call(v.fill,L.bgcolor).call(v.stroke,L.bordercolor).style("stroke-width",
L.borderwidth);J.selectAll("."+I.cboutline).attr({x:ma,y:Fa+L.ypad+("top"===V?ib:0),width:Math.max(pa,2),height:Math.max(tb-2*L.ypad-ib,2)}).call(v.stroke,L.outlinecolor).style({fill:"none","stroke-width":L.outlinewidth});J.attr("transform","translate("+(O.l-({center:.5,right:1}[L.xanchor]||0)*sb)+","+O.t+")");Pa={};var Aa=G[L.yanchor],Ka=H[L.yanchor];"pixels"===L.lenmode?(Pa.y=L.y,Pa.t=tb*Aa,Pa.b=tb*Ka):(Pa.t=Pa.b=0,Pa.yt=L.y+L.len*Aa,Pa.yb=L.y-L.len*Ka);tb=G[L.xanchor];Aa=H[L.xanchor];"pixels"===
L.thicknessmode?(Pa.x=L.x,Pa.l=sb*tb,Pa.r=sb*Aa):(sb-=pa,Pa.l=sb*tb,Pa.r=sb*Aa,Pa.xl=L.x-L.thickness*tb,Pa.xr=L.x+L.thickness*Aa);l.autoMargin(E,L._id,Pa)}],E)}function p(J,L,E){var K=E._fullLayout._size,N,O,Q;e.init({element:J.node(),gd:E,prepFn:function(){N=J.attr("transform");r(J)},moveFn:function(P,T){J.attr("transform",N+" translate("+P+","+T+")");O=e.align(L._xLeftFrac+P/K.w,L._thickFrac,0,1,L.xanchor);Q=e.align(L._yBottomFrac-T/K.h,L._lenFrac,0,1,L.yanchor);P=e.getCursor(O,Q,L.xanchor,L.yanchor);
r(J,P)},doneFn:function(){r(J);if(void 0!==O&&void 0!==Q){var P={};P[L._propPrefix+"x"]=O;P[L._propPrefix+"y"]=Q;void 0!==L._traceIndex?k.call("_guiRestyle",E,P,L._traceIndex):k.call("_guiRelayout",E,P)}}})}function h(J,L,E){var K=L._levels;J=[];var N=[],O,Q=K.end+K.size/100,P=K.size,T=1.001*E[0]-.001*E[1],V=1.001*E[1]-.001*E[0];for(O=0;1E5>O;O++){var aa=K.start+O*P;if(0<P?aa>=Q:aa<=Q)break;aa>T&&aa<V&&J.push(aa)}if(L._fillgradient)N=[0];else if("function"===typeof L._fillcolor)if(L=L._filllevels)for(Q=
L.end+L.size/100,P=L.size,O=0;1E5>O;O++){aa=L.start+O*P;if(0<P?aa>=Q:aa<=Q)break;aa>E[0]&&aa<E[1]&&N.push(aa)}else N=J.map(function(ba){return ba-K.size/2}),N.push(N[N.length-1]+K.size);else L._fillcolor&&"string"===typeof L._fillcolor&&(N=[0]);0>K.size&&(J.reverse(),N.reverse());return{line:J,fill:N}}function a(J,L,E){function K(Q,P){return g.coerce(N,O,B,Q,P)}J=J._fullLayout;var N={type:"linear",range:E,tickmode:L.tickmode,nticks:L.nticks,tick0:L.tick0,dtick:L.dtick,tickvals:L.tickvals,ticktext:L.ticktext,
ticks:L.ticks,ticklen:L.ticklen,tickwidth:L.tickwidth,tickcolor:L.tickcolor,showticklabels:L.showticklabels,tickfont:L.tickfont,tickangle:L.tickangle,tickformat:L.tickformat,exponentformat:L.exponentformat,separatethousands:L.separatethousands,showexponent:L.showexponent,showtickprefix:L.showtickprefix,tickprefix:L.tickprefix,showticksuffix:L.showticksuffix,ticksuffix:L.ticksuffix,title:L.title,showline:!0,anchor:"free",side:"right",position:1},O={type:"linear",_id:"y"+L._id};L={letter:"y",font:J.font,
noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:J.calendar};x(N,O,K,L,J);A(N,O,K,L);return O}var f=b("d3"),d=b("tinycolor2"),l=b("../../plots/plots"),k=b("../../registry"),c=b("../../plots/cartesian/axes"),e=b("../dragelement"),g=b("../../lib"),m=b("../../lib/extend").extendFlat,r=b("../../lib/setcursor"),u=b("../drawing"),v=b("../color"),w=b("../titles"),D=b("../../lib/svg_text_utils"),C=b("../colorscale/helpers").flipScale,x=b("../../plots/cartesian/axis_defaults"),A=b("../../plots/cartesian/position_defaults"),
B=b("../../plots/cartesian/layout_attributes");F=b("../../constants/alignment");var t=F.LINE_SPACING,G=F.FROM_TL,H=F.FROM_BR,I=b("./constants").cn;y.exports={draw:function(J){var L=J._fullLayout._infolayer.selectAll("g."+I.colorbar).data(q(J),function(E){return E._id});L.enter().append("g").attr("class",function(E){return E._id}).classed(I.colorbar,!0);L.each(function(E){var K=f.select(this);g.ensureSingle(K,"rect",I.cbbg);g.ensureSingle(K,"g",I.cbfills);g.ensureSingle(K,"g",I.cblines);g.ensureSingle(K,
"g",I.cbaxis,function(O){O.classed(I.crisp,!0)});g.ensureSingle(K,"g",I.cbtitleunshift,function(O){O.append("g").classed(I.cbtitle,!0)});g.ensureSingle(K,"rect",I.cboutline);var N=n(K,E,J);N&&N.then&&(J._promises||[]).push(N);J._context.edits.colorbarPosition&&p(K,E,J)});L.exit().each(function(E){l.autoMargin(J,E._id)}).remove();L.order()}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/extend":739,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,
"../../plots/cartesian/axis_defaults":799,"../../plots/cartesian/layout_attributes":811,"../../plots/cartesian/position_defaults":814,"../../plots/plots":860,"../../registry":880,"../color":615,"../colorscale/helpers":626,"../dragelement":634,"../drawing":637,"../titles":710,"./constants":617,d3:169,tinycolor2:548}],620:[function(b,y,F){var q=b("../../lib");y.exports=function(n){return q.isPlainObject(n.colorbar)}},{"../../lib":749}],621:[function(b,y,F){y.exports={moduleType:"component",name:"colorbar",
attributes:b("./attributes"),supplyDefaults:b("./defaults"),draw:b("./draw").draw,hasColorbar:b("./has_colorbar")}},{"./attributes":616,"./defaults":618,"./draw":619,"./has_colorbar":620}],622:[function(b,y,F){var q=b("../colorbar/attributes"),n=b("../../lib/regex").counter,p=b("./scales.js").scales;Object.keys(p);y.exports=function(h,a){a=a||{};var f=a.cLetter||"c";h="noScale"in a?a.noScale:"marker.line"===(h||"");var d="showScaleDflt"in a?a.showScaleDflt:"z"===f,l="string"===typeof a.colorscaleDflt?
p[a.colorscaleDflt]:null,k=a.editTypeOverride||"";var c="colorAttr"in a?a.colorAttr:{z:"z",c:"color"}[f];var e=f+"auto",g=f+"min",m=f+"max",r={};r[g]=r[m]=void 0;var u={};u[e]=!1;var v={};"color"===c&&(v.color={valType:"color",arrayOk:!0,editType:k||"style"},a.anim&&(v.color.anim=!0));v[e]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:r};v[g]={valType:"number",dflt:null,editType:k||"plot",impliedEdits:u};v[m]={valType:"number",dflt:null,editType:k||"plot",impliedEdits:u};v[f+"mid"]={valType:"number",
dflt:null,editType:"calc",impliedEdits:r};v.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1}};v.autocolorscale={valType:"boolean",dflt:!1===a.autoColorDflt?!1:!0,editType:"calc",impliedEdits:{colorscale:void 0}};v.reversescale={valType:"boolean",dflt:!1,editType:"plot"};h||(v.showscale={valType:"boolean",dflt:d,editType:"calc"},v.colorbar=q);a.noColorAxis||(v.coloraxis={valType:"subplotid",regex:n("coloraxis"),dflt:null,editType:"calc"});return v}},{"../../lib/regex":765,
"../colorbar/attributes":616,"./scales.js":630}],623:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../../lib"),p=b("./helpers").extractOpts;y.exports=function(h,a,f){h=h._fullLayout;var d=f.vals;a=(f=f.containerStr)?n.nestedProperty(a,f).get():a;f=p(a);var l=!1!==f.auto,k=f.min,c=f.max,e=f.mid;void 0===k?k=n.aggNums(Math.min,null,d):l&&(k=a._colorAx&&q(k)?Math.min(k,n.aggNums(Math.min,null,d)):n.aggNums(Math.min,null,d));void 0===c?c=n.aggNums(Math.max,null,d):l&&(c=a._colorAx&&q(c)?Math.max(c,
n.aggNums(Math.max,null,d)):n.aggNums(Math.max,null,d));l&&void 0!==e&&(c-e>e-k?k=e-(c-e):c-e<e-k&&(c=e+(e-k)));k===c&&(k-=.5,c+=.5);f._sync("min",k);f._sync("max",c);f.autocolorscale&&f._sync("colorscale",0>k*c?h.colorscale.diverging:0<=k?h.colorscale.sequential:h.colorscale.sequentialminus)}},{"../../lib":749,"./helpers":626,"fast-isnumeric":241}],624:[function(b,y,F){var q=b("../../lib"),n=b("./helpers").hasColorscale,p=b("./helpers").extractOpts;y.exports=function(h,a){function f(m,r){var u=m["_"+
r];void 0!==u&&(m[r]=u)}function d(m,r){if(m=r.container?q.nestedProperty(m,r.container).get():m)if(m.coloraxis)m._colorAx=a[m.coloraxis];else{var u=p(m),v=u.auto;(v||void 0===u.min)&&f(m,r.min);(v||void 0===u.max)&&f(m,r.max);u.autocolorscale&&f(m,"colorscale")}}for(var l=0;l<h.length;l++){var k=h[l],c=k._module.colorbar;if(c)if(Array.isArray(c))for(var e=0;e<c.length;e++)d(k,c[e]);else d(k,c);n(k,"marker.line")&&d(k,{container:"marker.line",min:"cmin",max:"cmax"})}for(var g in a._colorAxes)d(a[g],
{min:"cmin",max:"cmax"})}},{"../../lib":749,"./helpers":626}],625:[function(b,y,F){function q(l,k){var c=k.slice(0,k.length-1);return k?p.nestedProperty(l,c).get()||{}:l}var n=b("fast-isnumeric"),p=b("../../lib"),h=b("../colorbar/has_colorbar"),a=b("../colorbar/defaults"),f=b("./scales").isValid,d=b("../../registry").traceIs;y.exports=function r(k,c,e,g,m){var u=m.prefix,v=m.cLetter,w="_module"in c,D=q(k,u),C=q(c,u),x=q(c._template||{},u)||{},A=function(){delete k.coloraxis;delete c.coloraxis;return r(k,
c,e,g,m)};if(w){var B=e._colorAxes||{},t=g(u+"coloraxis");if(t){u=d(c,"contour")&&p.nestedProperty(c,"contours.coloring").get()||"heatmap";(w=B[t])?(w[2].push(A),w[0]!==u&&(w[0]=!1,p.warn(["Ignoring coloraxis:",t,"setting as it is linked to incompatible colorscales."].join(" ")))):B[t]=[u,c,[A]];return}}A=D[v+"min"];B=D[v+"max"];A=n(A)&&n(B)&&A<B;g(u+v+"auto",!A)?g(u+v+"mid"):(g(u+v+"min"),g(u+v+"max"));v=D.colorscale;A=x.colorscale;var G;void 0!==v&&(G=!f(v));void 0!==A&&(G=!f(A));g(u+"autocolorscale",
G);g(u+"colorscale");g(u+"reversescale");if("marker.line."!==u){var H;u&&w&&(H=h(D));g(u+"showscale",H)&&(u&&x&&(C._template=x),a(D,C,e))}}},{"../../lib":749,"../../registry":880,"../colorbar/defaults":618,"../colorbar/has_colorbar":620,"./scales":630,"fast-isnumeric":241}],626:[function(b,y,F){function q(r){var u=r._colorAx,v=u?u:r;r={};var w;for(w=0;w<g.length;w++){var D=g[w];r[D]=v[D]}if(u){var C="c";for(w=0;w<m.length;w++)D=m[w],r[D]=v["c"+D]}else{for(w=0;w<m.length;w++){D=m[w];var x="c"+D;x in
v?r[D]=v[x]:(x="z"+D,x in v&&(r[D]=v[x]))}C=x.charAt(0)}r._sync=function(A,B){A=-1!==m.indexOf(A)?C+A:A;v[A]=v["_"+A]=B};return r}function n(r){var u=q(r);r=u.min;var v=u.max;u=u.reversescale?p(u.colorscale):u.colorscale;for(var w=u.length,D=Array(w),C=Array(w),x=0;x<w;x++){var A=u[x];D[x]=r+A[0]*(v-r);C[x]=A[1]}return{domain:D,range:C}}function p(r){var u=r.length,v=Array(u);--u;for(var w=0;0<=u;u--,w++){var D=r[u];v[w]=[1-D[0],D[1]]}return v}function h(r,u){u=u||{};var v=r.domain,w=r.range;r=w.length;
for(var D=Array(r),C=0;C<r;C++){var x=d(w[C]).toRgb();D[C]=[x.r,x.g,x.b,x.a]}var A=f.scale.linear().domain(v).range(D).clamp(!0);v=u.noNumericCheck;u=u.returnArray;u=v&&u?A:v?function(B){return a(A(B))}:u?function(B){return l(B)?A(B):d(B).isValid()?B:c.defaultLine}:function(B){return l(B)?a(A(B)):d(B).isValid()?B:c.defaultLine};u.domain=A.domain;u.range=function(){return w};return u}function a(r){return d({r:r[0],g:r[1],b:r[2],a:r[3]}).toRgbString()}var f=b("d3"),d=b("tinycolor2"),l=b("fast-isnumeric"),
k=b("../../lib"),c=b("../color"),e=b("./scales").isValid,g=["showscale","autocolorscale","colorscale","reversescale","colorbar"],m=["min","max","mid","auto"];y.exports={hasColorscale:function(r,u,v){r=u?k.nestedProperty(r,u).get()||{}:r;v=r[v||"color"];u=!1;if(k.isArrayOrTypedArray(v))for(var w=0;w<v.length;w++)if(l(v[w])){u=!0;break}return k.isPlainObject(r)&&(u||!0===r.showscale||l(r.cmin)&&l(r.cmax)||e(r.colorscale)||k.isPlainObject(r.colorbar))},extractOpts:q,extractScale:n,flipScale:p,makeColorScaleFunc:h,
makeColorScaleFuncFromTrace:function(r,u){return h(n(r),u)}}},{"../../lib":749,"../color":615,"./scales":630,d3:169,"fast-isnumeric":241,tinycolor2:548}],627:[function(b,y,F){F=b("./scales");var q=b("./helpers");y.exports={moduleType:"component",name:"colorscale",attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),handleDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc"),scales:F.scales,defaultScale:F.defaultScale,
getScale:F.get,isValidScale:F.isValid,hasColorscale:q.hasColorscale,extractOpts:q.extractOpts,extractScale:q.extractScale,flipScale:q.flipScale,makeColorScaleFunc:q.makeColorScaleFunc,makeColorScaleFuncFromTrace:q.makeColorScaleFuncFromTrace}},{"./attributes":622,"./calc":623,"./cross_trace_defaults":624,"./defaults":625,"./helpers":626,"./layout_attributes":628,"./layout_defaults":629,"./scales":630}],628:[function(b,y,F){F=b("../../lib/extend").extendFlat;var q=b("./attributes");b=b("./scales").scales;
y.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:F({_isSubplotObj:!0,editType:"calc"},q("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":739,"./attributes":622,"./scales":630}],629:[function(b,y,F){var q=b("../../lib"),n=b("../../plot_api/plot_template"),
p=b("./layout_attributes"),h=b("./defaults");y.exports=function(a,f){function d(r,u){return q.coerce(e,g,p.coloraxis,r,u)}q.coerce(a,f,p,"colorscale.sequential",void 0);q.coerce(a,f,p,"colorscale.sequentialminus",void 0);q.coerce(a,f,p,"colorscale.diverging",void 0);var l=f._colorAxes,k;for(k in l){var c=l[k];if(c[0]){var e=a[k]||{};var g=n.newContainer(f,k,"coloraxis");g._name=k;h(e,g,f,d,{prefix:"",cLetter:"c"})}else{for(var m=0;m<c[2].length;m++)c[2][m]();delete f._colorAxes[k]}}}},{"../../lib":749,
"../../plot_api/plot_template":787,"./defaults":625,"./layout_attributes":628}],630:[function(b,y,F){function q(a){var f=0;if(!Array.isArray(a)||2>a.length||!a[0]||!a[a.length-1]||0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var d=0;d<a.length;d++){var l=a[d];if(2!==l.length||+l[0]<f||!n(l[1]).isValid())return!1;f=+l[0]}return!0}var n=b("tinycolor2"),p={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],
[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],
[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],
[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],
[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],
[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],
[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,
"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},h=p.RdBu;y.exports={scales:p,defaultScale:h,get:function(a,f){function d(){try{a=p[a]||JSON.parse(a)}catch(l){a=f}}f||(f=h);if(!a)return f;"string"===typeof a&&(d(),"string"===typeof a&&d());return q(a)?a:f},isValid:function(a){return void 0!==p[a]?!0:q(a)}}},{tinycolor2:548}],631:[function(b,y,F){y.exports=function(q,n,p,h,a){q=(q-p)/(h-p);
n=q+n/(h-p);p=(q+n)/2;return"left"===a||"bottom"===a?q:"center"===a||"middle"===a?p:"right"===a||"top"===a?n:q<2/3-p?q:n>4/3-p?n:p}},{}],632:[function(b,y,F){var q=b("../../lib"),n=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];y.exports=function(p,h,a,f){p="left"===a?0:"center"===a?1:"right"===a?2:q.constrain(Math.floor(3*p),0,2);h="bottom"===f?0:"middle"===f?1:"top"===f?2:q.constrain(Math.floor(3*h),0,2);return n[h][p]}},{"../../lib":749}],
633:[function(b,y,F){F.selectMode=function(q){return"lasso"===q||"select"===q};F.drawMode=function(q){return"drawclosedpath"===q||"drawopenpath"===q||"drawline"===q||"drawrect"===q||"drawcircle"===q};F.openMode=function(q){return"drawline"===q||"drawopenpath"===q};F.rectMode=function(q){return"select"===q||"drawline"===q||"drawrect"===q||"drawcircle"===q};F.freeMode=function(q){return"lasso"===q||"drawclosedpath"===q||"drawopenpath"===q};F.selectingOrDrawing=function(q){return F.freeMode(q)||F.rectMode(q)}},
{}],634:[function(b,y,F){function q(){var k=document.createElement("div");k.className="dragcover";var c=k.style;c.position="fixed";c.left=0;c.right=0;c.top=0;c.bottom=0;c.zIndex=999999999;c.background="none";document.body.appendChild(k);return k}function n(k){return p(k.changedTouches?k.changedTouches[0]:k,document.body)}var p=b("mouse-event-offset"),h=b("has-hover"),a=b("has-passive-events"),f=b("../../lib").removeElement,d=b("../../plots/cartesian/constants"),l=y.exports={};l.align=b("./align");
l.getCursor=b("./cursor");b=b("./unhover");l.unhover=b.wrapped;l.unhoverRaw=b.raw;l.init=function(k){function c(J,L,E){Math.abs(J)<E&&(J=0);Math.abs(L)<E&&(L=0);return[J,L]}function e(J){r._dragged=!1;r._dragging=!0;var L=n(J);D=L[0];C=L[1];G=J.target;t=J;H=2===J.buttons||J.ctrlKey;"undefined"===typeof J.clientX&&"undefined"===typeof J.clientY&&(J.clientX=D,J.clientY=C);x=(new Date).getTime();x-r._mouseDownTime<v?u+=1:(u=1,r._mouseDownTime=x);k.prepFn&&k.prepFn(J,D,C);h&&!H?(B=q(),B.style.cursor=
window.getComputedStyle(w).cursor):h||(B=document,A=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(w).cursor);document.addEventListener("mouseup",m);document.addEventListener("touchend",m);!1!==k.dragmode&&(J.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}))}function g(J){J.preventDefault();J=n(J);var L=I(J[0]-D,J[1]-C,k.minDrag||d.MINDRAG);J=L[0];L=L[1];if(J||L)r._dragged=
!0,l.unhover(r);r._dragged&&k.moveFn&&!H&&(r._dragdata={element:w,dx:J,dy:L},k.moveFn(J,L))}function m(J){delete r._dragdata;!1!==k.dragmode&&(J.preventDefault(),document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g));document.removeEventListener("mouseup",m);document.removeEventListener("touchend",m);h?f(B):A&&(B.documentElement.style.cursor=A,A=null);if(r._dragging){r._dragging=!1;(new Date).getTime()-r._mouseDownTime>v&&(u=Math.max(u-1,1));if(r._dragged)k.doneFn&&
k.doneFn();else if(k.clickFn&&k.clickFn(u,t),!H){try{var L=new MouseEvent("click",J)}catch(K){var E=n(J);L=document.createEvent("MouseEvents");L.initMouseEvent("click",J.bubbles,J.cancelable,J.view,J.detail,J.screenX,J.screenY,E[0],E[1],J.ctrlKey,J.altKey,J.shiftKey,J.metaKey,J.button,J.relatedTarget)}G.dispatchEvent(L)}r._dragging=!1}r._dragged=!1}var r=k.gd,u=1,v=r._context.doubleClickDelay,w=k.element,D,C,x,A,B,t,G,H;r._mouseDownTime||(r._mouseDownTime=0);w.style.pointerEvents="all";w.onmousedown=
e;a?(w._ontouchstart&&w.removeEventListener("touchstart",w._ontouchstart),w._ontouchstart=e,w.addEventListener("touchstart",e,{passive:!1})):w.ontouchstart=e;var I=k.clampFn||c};l.coverSlip=q},{"../../lib":749,"../../plots/cartesian/constants":803,"./align":631,"./cursor":632,"./unhover":635,"has-hover":414,"has-passive-events":415,"mouse-event-offset":458}],635:[function(b,y,F){var q=b("../../lib/events"),n=b("../../lib/throttle"),p=b("../../lib/dom").getGraphDiv,h=b("../fx/constants"),a=y.exports=
{};a.wrapped=function(f,d,l){f=p(f);f._fullLayout&&n.clear(f._fullLayout._uid+h.HOVERID);a.raw(f,d,l)};a.raw=function(f,d){var l=f._fullLayout,k=f._hoverdata;d||(d={});d.target&&!1===q.triggerHandler(f,"plotly_beforehover",d)||(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),f._hoverdata=void 0,d.target&&k&&f.emit("plotly_unhover",{event:d,points:k}))}},{"../../lib/dom":737,"../../lib/events":738,"../../lib/throttle":774,"../fx/constants":649}],
636:[function(b,y,F){F.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid",editType:"style"}},{}],637:[function(b,y,F){function q(O,Q){return A.symbolFuncs[O%100](Q)+(200<=O?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function n(O,Q,P,T){var V=d.select(O.node().parentNode),aa=-1!==Q.indexOf("top")?"top":-1!==Q.indexOf("bottom")?"bottom":"middle";Q=-1!==Q.indexOf("left")?"end":-1!==Q.indexOf("right")?"start":"middle";var ba=T?T/.8+1:0,Y=(r.lineCount(O)-1)*v+1;
T=I[Q]*ba;P=.75*P+I[aa]*ba+(I[aa]-1)*Y*P/2;O.attr("text-anchor",Q);V.attr("transform","translate("+T+","+P+")")}function p(O,Q){O=O.ts||Q.textfont.size;return l(O)&&0<O?O:0}function h(O,Q,P,T){var V=O[0]-Q[0],aa=O[1]-Q[1],ba=P[0]-Q[0],Y=P[1]-Q[1];P=Math.pow(V*V+aa*aa,.25);O=Math.pow(ba*ba+Y*Y,.25);V=(O*O*V-P*P*ba)*T;T*=O*O*aa-P*P*Y;aa=3*O*(P+O);P=3*P*(P+O);return[[d.round(Q[0]+(aa&&V/aa),2),d.round(Q[1]+(aa&&T/aa),2)],[d.round(Q[0]-(P&&V/P),2),d.round(Q[1]-(P&&T/P),2)]]}function a(O){var Q=O.getAttribute("data-unformatted");
if(null!==Q)return Q+O.getAttribute("data-math")+O.getAttribute("text-anchor")+O.getAttribute("style")}function f(O,Q){if(!O)return null;Q=Q._context;return"url('"+(Q._exportedPlot?"":Q._baseUrl||"")+"#"+O+"')"}var d=b("d3"),l=b("fast-isnumeric"),k=b("tinycolor2"),c=b("../../registry"),e=b("../color"),g=b("../colorscale"),m=b("../../lib"),r=b("../../lib/svg_text_utils"),u=b("../../constants/xmlns_namespaces"),v=b("../../constants/alignment").LINE_SPACING,w=b("../../constants/interactions").DESELECTDIM,
D=b("../../traces/scatter/subtypes"),C=b("../../traces/scatter/make_bubble_size_func"),x=b("../../components/fx/helpers").appendArrayPointValue,A=y.exports={};A.font=function(O,Q,P,T){m.isPlainObject(Q)&&(T=Q.color,P=Q.size,Q=Q.family);Q&&O.style("font-family",Q);P+1&&O.style("font-size",P+"px");T&&O.call(e.fill,T)};A.setPosition=function(O,Q,P){O.attr("x",Q).attr("y",P)};A.setSize=function(O,Q,P){O.attr("width",Q).attr("height",P)};A.setRect=function(O,Q,P,T,V){O.call(A.setPosition,Q,P).call(A.setSize,
T,V)};A.translatePoint=function(O,Q,P,T){P=P.c2p(O.x);O=T.c2p(O.y);if(l(P)&&l(O)&&Q.node())"text"===Q.node().nodeName?Q.attr("x",P).attr("y",O):Q.attr("transform","translate("+P+","+O+")");else return!1;return!0};A.translatePoints=function(O,Q,P){O.each(function(T){var V=d.select(this);A.translatePoint(T,V,Q,P)})};A.hideOutsideRangePoint=function(O,Q,P,T,V,aa){Q.attr("display",P.isPtWithinRange(O,V)&&T.isPtWithinRange(O,aa)?null:"none")};A.hideOutsideRangePoints=function(O,Q){if(Q._hasClipOnAxisFalse){var P=
Q.xaxis,T=Q.yaxis;O.each(function(V){V=V[0].trace;var aa=V.xcalendar,ba=V.ycalendar;V=c.traceIs(V,"bar-like")?".bartext":".point,.textpoint";O.selectAll(V).each(function(Y){A.hideOutsideRangePoint(Y,d.select(this),P,T,aa,ba)})})}};A.crispRound=function(O,Q,P){return Q&&l(Q)?O._context.staticPlot?Q:1>Q?1:Math.round(Q):P||0};A.singleLineStyle=function(O,Q,P,T,V){Q.style("fill","none");O=(((O||[])[0]||{}).trace||{}).line||{};P=P||O.width||0;V=V||O.dash||"";e.stroke(Q,T||O.color);A.dashLine(Q,V,P)};A.lineGroupStyle=
function(O,Q,P,T){O.style("fill","none").each(function(V){V=(((V||[])[0]||{}).trace||{}).line||{};var aa=Q||V.width||0,ba=T||V.dash||"";d.select(this).call(e.stroke,P||V.color).call(A.dashLine,ba,aa)})};A.dashLine=function(O,Q,P){P=+P||0;Q=A.dashStyle(Q,P);O.style({"stroke-dasharray":Q,"stroke-width":P+"px"})};A.dashStyle=function(O,Q){Q=Math.max(+Q||1,3);"solid"===O?O="":"dot"===O?O=Q+"px,"+Q+"px":"dash"===O?O=3*Q+"px,"+3*Q+"px":"longdash"===O?O=5*Q+"px,"+5*Q+"px":"dashdot"===O?O=3*Q+"px,"+Q+"px,"+
Q+"px,"+Q+"px":"longdashdot"===O&&(O=5*Q+"px,"+2*Q+"px,"+Q+"px,"+2*Q+"px");return O};A.singleFillStyle=function(O){var Q=(((d.select(O.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;Q&&O.call(e.fill,Q)};A.fillGroupStyle=function(O){O.style("stroke-width",0).each(function(Q){var P=d.select(this);Q[0].trace&&P.call(e.fill,Q[0].trace.fillcolor)})};var B=b("./symbol_defs");A.symbolNames=[];A.symbolFuncs=[];A.symbolNeedLines={};A.symbolNoDot={};A.symbolNoFill={};A.symbolList=[];Object.keys(B).forEach(function(O){var Q=
B[O],P=Q.n;A.symbolList.push(P,String(P),O,P+100,String(P+100),O+"-open");A.symbolNames[P]=O;A.symbolFuncs[P]=Q.f;Q.needLine&&(A.symbolNeedLines[P]=!0);Q.noDot?A.symbolNoDot[P]=!0:A.symbolList.push(P+200,String(P+200),O+"-dot",P+300,String(P+300),O+"-open-dot");Q.noFill&&(A.symbolNoFill[P]=!0)});var t=A.symbolNames.length;A.symbolNumber=function(O){if(l(O))O=+O;else if("string"===typeof O){var Q=0;0<O.indexOf("-open")&&(Q=100,O=O.replace("-open",""));0<O.indexOf("-dot")&&(Q+=200,O=O.replace("-dot",
""));O=A.symbolNames.indexOf(O);0<=O&&(O+=Q)}return O%100>=t||400<=O?0:Math.floor(Math.max(O,0))};b={x1:1,x2:0,y1:0,y2:0};y={x1:0,x2:0,y1:1,y2:0};var G=d.format("~.1f"),H={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:y},verticalreversed:{node:"linearGradient",attrs:y,reversed:!0}};A.gradient=function(O,Q,P,T,V,aa){for(var ba=
V.length,Y=H[T],ea=Array(ba),da=0;da<ba;da++)Y.reversed?ea[ba-1-da]=[G(100*(1-V[da][0])),V[da][1]]:ea[da]=[G(100*V[da][0]),V[da][1]];V=Q._fullLayout;var ca="g"+V._uid+"-"+P;P=V._defs.select(".gradients").selectAll("#"+ca).data([T+ea.join(";")],m.identity);P.exit().remove();P.enter().append(Y.node).each(function(){var la=d.select(this);Y.attrs&&la.attr(Y.attrs);la.attr("id",ca);la=la.selectAll("stop").data(ea);la.exit().remove();la.enter().append("stop");la.each(function(pa){var qa=k(pa[1]);d.select(this).attr({offset:pa[0]+
"%","stop-color":e.tinyRGB(qa),"stop-opacity":qa.getAlpha()})})});O.style(aa,f(ca,Q)).style(aa+"-opacity",null);O="."+d.select(O.node().parentNode).attr("class").replace(/\s/g,".")+"\x3e."+O.attr("class").replace(/\s/g,".");V._gradientUrlQueryParts[O]=1};A.initGradients=function(O){O=O._fullLayout;m.ensureSingle(O._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove();O._gradientUrlQueryParts={}};A.pointStyle=function(O,Q,P){if(O.size()){var T=A.makePointStyleFns(Q);O.each(function(V){A.singlePointStyle(V,
d.select(this),Q,T,P)})}};A.singlePointStyle=function(O,Q,P,T,V){var aa=P.marker,ba=aa.line;Q.style("opacity",T.selectedOpacityFn?T.selectedOpacityFn(O):void 0===O.mo?aa.opacity:O.mo);if(T.ms2mrc){var Y="various"===O.ms||"various"===aa.size?3:T.ms2mrc(O.ms);O.mrc=Y;T.selectedSizeFn&&(Y=O.mrc=T.selectedSizeFn(O));var ea=A.symbolNumber(O.mx||aa.symbol)||0;O.om=100<=ea%200;Q.attr("d",q(ea,Y))}Y=!1;if(O.so){ea=ba.outlierwidth;var da=ba.outliercolor;ba=aa.outliercolor}else ea=(ba||{}).width,ea=(O.mlw+
1||ea+1||(O.trace?(O.trace.marker.line||{}).width:0)+1)-1||0,da="mlc"in O?O.mlcc=T.lineScale(O.mlc):m.isArrayOrTypedArray(ba.color)?e.defaultLine:ba.color,m.isArrayOrTypedArray(aa.color)&&(Y=!0),ba="mc"in O?O.mcc=T.markerScale(O.mc):aa.color||"rgba(0,0,0,0)",T.selectedColorFn&&(ba=T.selectedColorFn(O));if(O.om)Q.call(e.stroke,ba).style({"stroke-width":(ea||1)+"px",fill:"none"});else{Q.style("stroke-width",(O.isBlank?0:ea)+"px");var ca=aa.gradient;(T=O.mgt)?Y=!0:T=ca&&ca.type;Array.isArray(T)&&(T=
T[0],H[T]||(T=0));T&&"none"!==T?((aa=O.mgc)?Y=!0:aa=ca.color,P=P.uid,Y&&(P+="-"+O.i),A.gradient(Q,V,P,T,[[0,aa],[1,ba]],"fill")):e.fill(Q,ba);ea&&e.stroke(Q,da)}};A.makePointStyleFns=function(O){var Q={},P=O.marker;Q.markerScale=A.tryColorscale(P,"");Q.lineScale=A.tryColorscale(P,"line");c.traceIs(O,"symbols")&&(Q.ms2mrc=D.isBubble(O)?C(O):function(){return(P.size||6)/2});O.selectedpoints&&m.extendFlat(Q,A.makeSelectedPointStyleFns(O));return Q};A.makeSelectedPointStyleFns=function(O){var Q={},P=
O.marker||{},T=(O.selected||{}).marker||{},V=(O.unselected||{}).marker||{},aa=T.opacity,ba=V.opacity,Y=void 0!==aa,ea=void 0!==ba;if(m.isArrayOrTypedArray(P.opacity)||Y||ea)Q.selectedOpacityFn=function(ha){var ma=void 0===ha.mo?P.opacity:ha.mo;return ha.selected?Y?aa:ma:ea?ba:w*ma};var da=P.color,ca=T.color,la=V.color;if(ca||la)Q.selectedColorFn=function(ha){var ma=ha.mcc||da;return ha.selected?ca||ma:la||ma};var pa=P.size,qa=T.size,oa=V.size,ka=void 0!==qa,ra=void 0!==oa;c.traceIs(O,"symbols")&&
(ka||ra)&&(Q.selectedSizeFn=function(ha){var ma=ha.mrc||pa/2;return ha.selected?ka?qa/2:ma:ra?oa/2:ma});return Q};A.makeSelectedTextStyleFns=function(O){var Q={},P=(O.textfont||{}).color,T=((O.selected||{}).textfont||{}).color,V=((O.unselected||{}).textfont||{}).color;Q.selectedTextColorFn=function(aa){var ba=aa.tc||P;return aa.selected?T||ba:V?V:T?ba:e.addOpacity(ba,w)};return Q};A.selectedPointStyle=function(O,Q){if(O.size()&&Q.selectedpoints){var P=A.makeSelectedPointStyleFns(Q),T=Q.marker||{},
V=[];P.selectedOpacityFn&&V.push(function(aa,ba){aa.style("opacity",P.selectedOpacityFn(ba))});P.selectedColorFn&&V.push(function(aa,ba){e.fill(aa,P.selectedColorFn(ba))});P.selectedSizeFn&&V.push(function(aa,ba){var Y=ba.mx||T.symbol||0,ea=P.selectedSizeFn(ba);aa.attr("d",q(A.symbolNumber(Y),ea));ba.mrc2=ea});V.length&&O.each(function(aa){for(var ba=d.select(this),Y=0;Y<V.length;Y++)V[Y](ba,aa)})}};A.tryColorscale=function(O,Q){if(O=Q?m.nestedProperty(O,Q).get():O)if(Q=O.color,(O.colorscale||O._colorAx)&&
m.isArrayOrTypedArray(Q))return g.makeColorScaleFuncFromTrace(O);return m.identity};var I={start:1,end:-1,middle:0,bottom:1,top:-1};A.textPointStyle=function(O,Q,P){if(O.size()){if(Q.selectedpoints)var T=A.makeSelectedTextStyleFns(Q).selectedTextColorFn;var V=Q.texttemplate,aa=P._fullLayout;O.each(function(ba){var Y=d.select(this),ea=V?m.extractOption(ba,Q,"txt","texttemplate"):m.extractOption(ba,Q,"tx","text");if(ea||0===ea){if(V){var da=Q._module.formatLabels?Q._module.formatLabels(ba,Q,aa):{},
ca={};x(ca,Q,ba.i);ea=m.texttemplateString(ea,da,aa._d3locale,ca,ba,Q._meta||{})}da=ba.tp||Q.textposition;ca=p(ba,Q);var la=T?T(ba):ba.tc||Q.textfont.color;Y.call(A.font,ba.tf||Q.textfont.family,ca,la).text(ea).call(r.convertToTspans,P).call(n,da,ca,ba.mrc)}else Y.remove()})}};A.selectedTextStyle=function(O,Q){if(O.size()&&Q.selectedpoints){var P=A.makeSelectedTextStyleFns(Q);O.each(function(T){var V=d.select(this),aa=P.selectedTextColorFn(T),ba=T.tp||Q.textposition,Y=p(T,Q);e.fill(V,aa);n(V,ba,Y,
T.mrc2||T.mrc)})}};A.smoothopen=function(O,Q){if(3>O.length)return"M"+O.join("L");var P="M"+O[0],T=[],V;for(V=1;V<O.length-1;V++)T.push(h(O[V-1],O[V],O[V+1],Q));P+="Q"+T[0][0]+" "+O[1];for(V=2;V<O.length-1;V++)P+="C"+T[V-2][1]+" "+T[V-1][0]+" "+O[V];return P+="Q"+T[O.length-3][1]+" "+O[O.length-1]};A.smoothclosed=function(O,Q){if(3>O.length)return"M"+O.join("L")+"Z";var P="M"+O[0],T=O.length-1,V=[h(O[T],O[0],O[1],Q)],aa;for(aa=1;aa<T;aa++)V.push(h(O[aa-1],O[aa],O[aa+1],Q));V.push(h(O[T-1],O[T],O[0],
Q));for(aa=1;aa<=T;aa++)P+="C"+V[aa-1][1]+" "+V[aa][0]+" "+O[aa];return P+="C"+V[T][1]+" "+V[0][0]+" "+O[0]+"Z"};var J={hv:function(O,Q){return"H"+d.round(Q[0],2)+"V"+d.round(Q[1],2)},vh:function(O,Q){return"V"+d.round(Q[1],2)+"H"+d.round(Q[0],2)},hvh:function(O,Q){return"H"+d.round((O[0]+Q[0])/2,2)+"V"+d.round(Q[1],2)+"H"+d.round(Q[0],2)},vhv:function(O,Q){return"V"+d.round((O[1]+Q[1])/2,2)+"H"+d.round(Q[0],2)+"V"+d.round(Q[1],2)}},L=function(O,Q){return"L"+d.round(Q[0],2)+","+d.round(Q[1],2)};A.steps=
function(O){var Q=J[O]||L;return function(P){for(var T="M"+d.round(P[0][0],2)+","+d.round(P[0][1],2),V=1;V<P.length;V++)T+=Q(P[V-1],P[V]);return T}};A.makeTester=function(){var O=m.ensureSingleById(d.select("body"),"svg","js-plotly-tester",function(P){P.attr(u.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Q=m.ensureSingle(O,"path","js-reference-point",function(P){P.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});
A.tester=O;A.testref=Q};A.savedBBoxes={};var E=0;A.bBox=function(O,Q,P){P||(P=a(O));var T;if(P){if(T=A.savedBBoxes[P])return m.extendFlat({},T)}else if(1===O.childNodes.length){var V=O.childNodes[0];if(P=a(V)){T=+V.getAttribute("x")||0;var aa=+V.getAttribute("y")||0,ba=V.getAttribute("transform");if(!ba)return P=A.bBox(V,!1,P),T&&(P.left+=T,P.right+=T),aa&&(P.top+=aa,P.bottom+=aa),P;P+="~"+T+"~"+aa+"~"+ba;if(T=A.savedBBoxes[P])return m.extendFlat({},T)}}if(!Q){var Y=A.tester.node();O=O.cloneNode(!0);
Y.appendChild(O)}d.select(O).attr("transform",null).call(r.positionText,0,0);T=O.getBoundingClientRect();aa=A.testref.node().getBoundingClientRect();Q||Y.removeChild(O);Q={height:T.height,width:T.width,left:T.left-aa.left,top:T.top-aa.top,right:T.right-aa.left,bottom:T.bottom-aa.top};1E4<=E&&(A.savedBBoxes={},E=0);P&&(A.savedBBoxes[P]=Q);E++;return m.extendFlat({},Q)};A.setClipUrl=function(O,Q,P){O.attr("clip-path",f(Q,P))};A.getTranslate=function(O){O=(O[O.attr?"attr":"getAttribute"]("transform")||
"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Q,P,T){return[P,T].join(" ")}).split(" ");return{x:+O[0]||0,y:+O[1]||0}};A.setTranslate=function(O,Q,P){var T=O.attr?"attr":"setAttribute",V=O[O.attr?"attr":"getAttribute"]("transform")||"";Q=Q||0;P=P||0;V=V.replace(/(\btranslate\(.*?\);?)/,"").trim();V=(V+(" translate("+Q+", "+P+")")).trim();O[T]("transform",V);return V};A.getScale=function(O){O=(O[O.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,
function(Q,P,T){return[P,T].join(" ")}).split(" ");return{x:+O[0]||1,y:+O[1]||1}};A.setScale=function(O,Q,P){var T=O.attr?"attr":"setAttribute",V=O[O.attr?"attr":"getAttribute"]("transform")||"";Q=Q||1;P=P||1;V=V.replace(/(\bscale\(.*?\);?)/,"").trim();V=(V+(" scale("+Q+", "+P+")")).trim();O[T]("transform",V);return V};var K=/\s*sc.*/;A.setPointGroupScale=function(O,Q,P){Q=Q||1;P=P||1;if(O){var T=1===Q&&1===P?"":" scale("+Q+","+P+")";O.each(function(){var V=(this.getAttribute("transform")||"").replace(K,
"");V+=T;V=V.trim();this.setAttribute("transform",V)})}};var N=/translate\([^)]*\)\s*$/;A.setTextPointsScale=function(O,Q,P){O&&O.each(function(){var T=d.select(this),V=T.select("text");if(V.node()){var aa=parseFloat(V.attr("x")||0);var ba=parseFloat(V.attr("y")||0);V=(T.attr("transform")||"").match(N);aa=1===Q&&1===P?[]:["translate("+aa+","+ba+")","scale("+Q+","+P+")","translate("+-aa+","+-ba+")"];V&&aa.push(V);T.attr("transform",aa.join(" "))}})}},{"../../components/fx/helpers":651,"../../constants/alignment":717,
"../../constants/interactions":723,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../lib/svg_text_utils":773,"../../registry":880,"../../traces/scatter/make_bubble_size_func":1172,"../../traces/scatter/subtypes":1179,"../color":615,"../colorscale":627,"./symbol_defs":638,d3:169,"fast-isnumeric":241,tinycolor2:548}],638:[function(b,y,F){var q=b("d3");y.exports={circle:{n:0,f:function(n){n=q.round(n,2);return"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z"}},square:{n:1,
f:function(n){n=q.round(n,2);return"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"}},diamond:{n:2,f:function(n){n=q.round(1.3*n,2);return"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"Z"}},cross:{n:3,f:function(n){var p=q.round(.4*n,2);n=q.round(1.2*n,2);return"M"+n+","+p+"H"+p+"V"+n+"H-"+p+"V"+p+"H-"+n+"V-"+p+"H-"+p+"V-"+n+"H"+p+"V-"+p+"H"+n+"Z"}},x:{n:4,f:function(n){n=q.round(.8*n/Math.sqrt(2),2);var p="l"+n+","+n,h="l"+n+",-"+n,a="l-"+n+",-"+n,f="l-"+n+","+n;return"M0,"+n+p+h+a+h+a+f+a+f+p+f+p+"Z"}},"triangle-up":{n:5,
f:function(n){var p=q.round(2*n/Math.sqrt(3),2),h=q.round(n/2,2);n=q.round(n,2);return"M-"+p+","+h+"H"+p+"L0,-"+n+"Z"}},"triangle-down":{n:6,f:function(n){var p=q.round(2*n/Math.sqrt(3),2),h=q.round(n/2,2);n=q.round(n,2);return"M-"+p+",-"+h+"H"+p+"L0,"+n+"Z"}},"triangle-left":{n:7,f:function(n){var p=q.round(2*n/Math.sqrt(3),2),h=q.round(n/2,2);n=q.round(n,2);return"M"+h+",-"+p+"V"+p+"L-"+n+",0Z"}},"triangle-right":{n:8,f:function(n){var p=q.round(2*n/Math.sqrt(3),2),h=q.round(n/2,2);n=q.round(n,
2);return"M-"+h+",-"+p+"V"+p+"L"+n+",0Z"}},"triangle-ne":{n:9,f:function(n){var p=q.round(.6*n,2);n=q.round(1.2*n,2);return"M-"+n+",-"+p+"H"+p+"V"+n+"Z"}},"triangle-se":{n:10,f:function(n){var p=q.round(.6*n,2);n=q.round(1.2*n,2);return"M"+p+",-"+n+"V"+p+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(n){var p=q.round(.6*n,2);n=q.round(1.2*n,2);return"M"+n+","+p+"H-"+p+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(n){var p=q.round(.6*n,2);n=q.round(1.2*n,2);return"M-"+p+","+n+"V-"+p+"H"+n+"Z"}},pentagon:{n:13,
f:function(n){var p=q.round(.951*n,2),h=q.round(.588*n,2),a=q.round(-n,2),f=q.round(-.309*n,2);n=q.round(.809*n,2);return"M"+p+","+f+"L"+h+","+n+"H-"+h+"L-"+p+","+f+"L0,"+a+"Z"}},hexagon:{n:14,f:function(n){var p=q.round(n,2),h=q.round(n/2,2);n=q.round(n*Math.sqrt(3)/2,2);return"M"+n+",-"+h+"V"+h+"L0,"+p+"L-"+n+","+h+"V-"+h+"L0,-"+p+"Z"}},hexagon2:{n:15,f:function(n){var p=q.round(n,2),h=q.round(n/2,2);n=q.round(n*Math.sqrt(3)/2,2);return"M-"+h+","+n+"H"+h+"L"+p+",0L"+h+",-"+n+"H-"+h+"L-"+p+",0Z"}},
octagon:{n:16,f:function(n){var p=q.round(.924*n,2);n=q.round(.383*n,2);return"M-"+n+",-"+p+"H"+n+"L"+p+",-"+n+"V"+n+"L"+n+","+p+"H-"+n+"L-"+p+","+n+"V-"+n+"Z"}},star:{n:17,f:function(n){var p=1.4*n;n=q.round(.225*p,2);var h=q.round(.951*p,2),a=q.round(.363*p,2),f=q.round(.588*p,2),d=q.round(-p,2),l=q.round(-.309*p,2),k=q.round(.118*p,2),c=q.round(.809*p,2);p=q.round(.382*p,2);return"M"+n+","+l+"H"+h+"L"+a+","+k+"L"+f+","+c+"L0,"+p+"L-"+f+","+c+"L-"+a+","+k+"L-"+h+","+l+"H-"+n+"L0,"+d+"Z"}},hexagram:{n:18,
f:function(n){var p=q.round(.66*n,2),h=q.round(.38*n,2);n=q.round(.76*n,2);return"M-"+n+",0l-"+h+",-"+p+"h"+n+"l"+h+",-"+p+"l"+h+","+p+"h"+n+"l-"+h+","+p+"l"+h+","+p+"h-"+n+"l-"+h+","+p+"l-"+h+",-"+p+"h-"+n+"Z"}},"star-triangle-up":{n:19,f:function(n){var p=q.round(n*Math.sqrt(3)*.8,2),h=q.round(.8*n,2),a=q.round(1.6*n,2);n=q.round(4*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+p+","+h+n+p+","+h+n+"0,-"+a+n+"-"+p+","+h+"Z"}},"star-triangle-down":{n:20,f:function(n){var p=q.round(n*Math.sqrt(3)*.8,2),
h=q.round(.8*n,2),a=q.round(1.6*n,2);n=q.round(4*n,2);n="A "+n+","+n+" 0 0 1 ";return"M"+p+",-"+h+n+"-"+p+",-"+h+n+"0,"+a+n+p+",-"+h+"Z"}},"star-square":{n:21,f:function(n){var p=q.round(1.1*n,2);n=q.round(2*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+p+",-"+p+n+"-"+p+","+p+n+p+","+p+n+p+",-"+p+n+"-"+p+",-"+p+"Z"}},"star-diamond":{n:22,f:function(n){var p=q.round(1.4*n,2);n=q.round(1.9*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+p+",0"+n+"0,"+p+n+p+",0"+n+"0,-"+p+n+"-"+p+",0Z"}},"diamond-tall":{n:23,f:function(n){var p=
q.round(.7*n,2);n=q.round(1.4*n,2);return"M0,"+n+"L"+p+",0L0,-"+n+"L-"+p+",0Z"}},"diamond-wide":{n:24,f:function(n){var p=q.round(1.4*n,2);n=q.round(.7*n,2);return"M0,"+n+"L"+p+",0L0,-"+n+"L-"+p+",0Z"}},hourglass:{n:25,f:function(n){n=q.round(n,2);return"M"+n+","+n+"H-"+n+"L"+n+",-"+n+"H-"+n+"Z"},noDot:!0},bowtie:{n:26,f:function(n){n=q.round(n,2);return"M"+n+","+n+"V-"+n+"L-"+n+","+n+"V-"+n+"Z"},noDot:!0},"circle-cross":{n:27,f:function(n){n=q.round(n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+
",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(n){var p=q.round(n,2);n=q.round(n/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(n){n=q.round(n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(n){n=q.round(n,2);return"M"+
n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(n){n=q.round(1.3*n,2);return"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"ZM0,-"+n+"V"+n+"M-"+n+",0H"+n},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(n){var p=q.round(1.3*n,2);n=q.round(.65*n,2);return"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(n){n=q.round(1.4*n,2);return"M0,"+
n+"V-"+n+"M"+n+",0H-"+n},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(n){n=q.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(n){var p=q.round(1.2*n,2);n=q.round(.85*n,2);return"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(n){var p=q.round(n/2,2);n=q.round(n,2);return"M"+p+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+p+"H-"+
n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(n){var p=q.round(1.2*n,2),h=q.round(1.6*n,2);n=q.round(.8*n,2);return"M-"+p+","+n+"L0,0M"+p+","+n+"L0,0M0,-"+h+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(n){var p=q.round(1.2*n,2),h=q.round(1.6*n,2);n=q.round(.8*n,2);return"M-"+p+",-"+n+"L0,0M"+p+",-"+n+"L0,0M0,"+h+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(n){var p=q.round(1.2*n,2),h=q.round(1.6*n,2);n=q.round(.8*n,2);return"M"+n+","+p+
"L0,0M"+n+",-"+p+"L0,0M-"+h+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(n){var p=q.round(1.2*n,2),h=q.round(1.6*n,2);n=q.round(.8*n,2);return"M-"+n+","+p+"L0,0M-"+n+",-"+p+"L0,0M"+h+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(n){n=q.round(1.4*n,2);return"M"+n+",0H-"+n},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(n){n=q.round(1.4*n,2);return"M0,"+n+"V-"+n},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(n){n=q.round(n,2);return"M"+
n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(n){n=q.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(n){var p=q.round(n,2);n=q.round(2*n,2);return"M0,0L-"+p+","+n+"H"+p+"Z"},noDot:!0},"arrow-down":{n:46,f:function(n){var p=q.round(n,2);n=q.round(2*n,2);return"M0,0L-"+p+",-"+n+"H"+p+"Z"},noDot:!0},"arrow-left":{n:47,f:function(n){var p=q.round(2*n,2);n=q.round(n,2);return"M0,0L"+p+",-"+n+"V"+n+"Z"},noDot:!0},
"arrow-right":{n:48,f:function(n){var p=q.round(2*n,2);n=q.round(n,2);return"M0,0L-"+p+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(n){var p=q.round(n,2);n=q.round(2*n,2);return"M-"+p+",0H"+p+"M0,0L-"+p+","+n+"H"+p+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(n){var p=q.round(n,2);n=q.round(2*n,2);return"M-"+p+",0H"+p+"M0,0L-"+p+",-"+n+"H"+p+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(n){var p=q.round(2*n,2);n=q.round(n,2);return"M0,-"+n+"V"+n+"M0,0L"+
p+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(n){var p=q.round(2*n,2);n=q.round(n,2);return"M0,-"+n+"V"+n+"M0,0L-"+p+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0}}},{d3:169}],639:[function(b,y,F){y.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},
value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",
editType:"style"}}}},{}],640:[function(b,y,F){function q(d,l,k,c){var e=l["error_"+c]||{},g=[];if(e.visible&&-1!==["linear","log"].indexOf(k.type)){e=f(e);for(var m=0;m<d.length;m++){var r=d[m],u=r.i;if(void 0===u)u=m;else if(null===u)continue;var v=r[c];if(n(k.c2l(v))){var w=e(v,u);n(w[0])&&n(w[1])&&(u=r[c+"s"]=v-w[0],r=r[c+"h"]=v+w[1],g.push(u,r))}}d=l._extremes[k._id];k=h.findExtremes(k,g,a.extendFlat({tozero:d.opts.tozero},{padded:!0}));d.min=d.min.concat(k.min);d.max=d.max.concat(k.max)}}var n=
b("fast-isnumeric"),p=b("../../registry"),h=b("../../plots/cartesian/axes"),a=b("../../lib"),f=b("./compute_error");y.exports=function(d){for(var l=d.calcdata,k=0;k<l.length;k++){var c=l[k],e=c[0].trace;if(!0===e.visible&&p.traceIs(e,"errorBarsOK")){var g=h.getFromId(d,e.xaxis),m=h.getFromId(d,e.yaxis);q(c,e,g,"x");q(c,e,m,"y")}}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./compute_error":641,"fast-isnumeric":241}],641:[function(b,y,F){function q(n,p){if("percent"===
n)return function(h){return Math.abs(h*p/100)};if("constant"===n)return function(){return Math.abs(p)};if("sqrt"===n)return function(h){return Math.sqrt(Math.abs(h))}}y.exports=function(n){var p=n.type,h=n.symmetric;if("data"===p){var a=n.array||[];if(h)return function(k,c){k=+a[c];return[k,k]};var f=n.arrayminus||[];return function(k,c){k=+a[c];c=+f[c];return isNaN(k)&&isNaN(c)?[NaN,NaN]:[c||0,k||0]}}var d=q(p,n.value),l=q(p,n.valueminus);return h||void 0===n.valueminus?function(k){k=d(k);return[k,
k]}:function(k){return[l(k),d(k)]}}},{}],642:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../../registry"),p=b("../../lib"),h=b("../../plot_api/plot_template"),a=b("./attributes");y.exports=function(f,d,l,k){function c(r,u){return p.coerce(m,g,a,r,u)}var e="error_"+k.axis,g=h.newContainer(d,e),m=f[e]||{};if(!1!==c("visible",void 0!==m.array||void 0!==m.value||"sqrt"===m.type)){f=c("type","array"in m?"data":"percent");e=!0;"sqrt"!==f&&(e=c("symmetric",!(("data"===f?"arrayminus":"valueminus")in m)));
if("data"===f)c("array"),c("traceref"),e||(c("arrayminus"),c("tracerefminus"));else if("percent"===f||"constant"===f)c("value"),e||c("valueminus");f="copy_"+k.inherit+"style";k.inherit&&(d["error_"+k.inherit]||{}).visible&&c(f,!(m.color||q(m.thickness)||q(m.width)));k.inherit&&g[f]||(c("color",l),c("thickness"),c("width",n.traceIs(d,"gl3d")?0:4))}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880,"./attributes":639,"fast-isnumeric":241}],643:[function(b,y,F){var q=b("../../lib");
F=b("../../plot_api/edit_types").overrideAll;var n=b("./attributes"),p={error_x:q.extendFlat({},n),error_y:q.extendFlat({},n)};delete p.error_x.copy_zstyle;delete p.error_y.copy_zstyle;delete p.error_y.copy_ystyle;q={error_x:q.extendFlat({},n),error_y:q.extendFlat({},n),error_z:q.extendFlat({},n)};delete q.error_x.copy_ystyle;delete q.error_y.copy_ystyle;delete q.error_z.copy_ystyle;delete q.error_z.copy_zstyle;y.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:p,bar:p,histogram:p,
scatter3d:F(q,"calc","nested"),scattergl:F(p,"calc","nested")}},supplyDefaults:b("./defaults"),calc:b("./calc"),makeComputeError:b("./compute_error"),plot:b("./plot"),style:b("./style"),hoverInfo:function(h,a,f){(a.error_y||{}).visible&&(f.yerr=h.yh-h.y,a.error_y.symmetric||(f.yerrneg=h.y-h.ys));(a.error_x||{}).visible&&(f.xerr=h.xh-h.x,a.error_x.symmetric||(f.xerrneg=h.x-h.xs))}}},{"../../lib":749,"../../plot_api/edit_types":780,"./attributes":639,"./calc":640,"./compute_error":641,"./defaults":642,
"./plot":644,"./style":645}],644:[function(b,y,F){var q=b("d3"),n=b("fast-isnumeric"),p=b("../drawing"),h=b("../../traces/scatter/subtypes");y.exports=function(a,f,d,l){var k,c=d.xaxis,e=d.yaxis,g=l&&0<l.duration;f.each(function(m){var r=m[0].trace,u=r.error_x||{},v=r.error_y||{},w;r.ids&&(w=function(C){return C.id});var D=h.hasMarkers(r)&&0<r.marker.maxdisplayed;v.visible||u.visible||(m=[]);r=q.select(this).selectAll("g.errorbar").data(m,w);r.exit().remove();m.length&&(u.visible||r.selectAll("path.xerror").remove(),
v.visible||r.selectAll("path.yerror").remove(),r.style("opacity",1),m=r.enter().append("g").classed("errorbar",!0),g&&m.style("opacity",0).transition().duration(l.duration).style("opacity",1),p.setClipUrl(r,d.layerClipId,a),r.each(function(C){var x=q.select(this),A=c.c2p(C.x),B=e.c2p(C.y);if(void 0!==C.yh){var t=e.c2p(C.yh);var G=e.c2p(C.ys);if(!n(G)){var H=!0;G=e.c2p(C.ys,!0)}}if(void 0!==C.xh){var I=c.c2p(C.xh);var J=c.c2p(C.xs);if(!n(J)){var L=!0;J=c.c2p(C.xs,!0)}}if(!D||C.vis){C=x.select("path.yerror");
if(v.visible&&n(A)&&n(t)&&n(G)){var E=v.width;A="M"+(A-E)+","+t+"h"+2*E+"m-"+E+",0V"+G;H||(A+="m-"+E+",0h"+2*E);(k=!C.size())?C=x.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):g&&(C=C.transition().duration(l.duration).ease(l.easing));C.attr("d",A)}else C.remove();H=x.select("path.xerror");u.visible&&n(B)&&n(I)&&n(J)?(t=(u.copy_ystyle?v:u).width,A="M"+I+","+(B-t)+"v"+2*t+"m0,-"+t+"H"+J,L||(A+="m0,-"+t+"v"+2*t),(k=!H.size())?H=x.append("path").style("vector-effect",
"non-scaling-stroke").classed("xerror",!0):g&&(H=H.transition().duration(l.duration).ease(l.easing)),H.attr("d",A)):H.remove()}}))})}},{"../../traces/scatter/subtypes":1179,"../drawing":637,d3:169,"fast-isnumeric":241}],645:[function(b,y,F){var q=b("d3"),n=b("../color");y.exports=function(p){p.each(function(h){var a=h[0].trace;h=a.error_y||{};a=a.error_x||{};var f=q.select(this);f.selectAll("path.yerror").style("stroke-width",h.thickness+"px").call(n.stroke,h.color);a.copy_ystyle&&(a=h);f.selectAll("path.xerror").style("stroke-width",
a.thickness+"px").call(n.stroke,a.color)})}},{"../color":615,d3:169}],646:[function(b,y,F){F=b("../../plots/font_attributes");var q=b("./layout_attributes").hoverlabel;b=b("../../lib/extend").extendFlat;y.exports={hoverlabel:{bgcolor:b({},q.bgcolor,{arrayOk:!0}),bordercolor:b({},q.bordercolor,{arrayOk:!0}),font:F({arrayOk:!0,editType:"none"}),align:b({},q.align,{arrayOk:!0}),namelength:b({},q.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":739,"../../plots/font_attributes":825,"./layout_attributes":656}],
647:[function(b,y,F){function q(h,a,f,d){d=d||n.identity;Array.isArray(h)&&(a[0][f]=d(h))}var n=b("../../lib"),p=b("../../registry");y.exports=function(h){function a(e){return function(g){return n.coerceHoverinfo({hoverinfo:g},{_module:e._module},d)}}var f=h.calcdata,d=h._fullLayout;for(h=0;h<f.length;h++){var l=f[h],k=l[0].trace;if(!p.traceIs(k,"pie-like")){var c=p.traceIs(k,"2dMap")?q:n.fillArray;c(k.hoverinfo,l,"hi",a(k));k.hovertemplate&&c(k.hovertemplate,l,"ht");k.hoverlabel&&(c(k.hoverlabel.bgcolor,
l,"hbg"),c(k.hoverlabel.bordercolor,l,"hbc"),c(k.hoverlabel.font.size,l,"hts"),c(k.hoverlabel.font.color,l,"htc"),c(k.hoverlabel.font.family,l,"htf"),c(k.hoverlabel.namelength,l,"hnl"),c(k.hoverlabel.align,l,"hta"))}}}},{"../../lib":749,"../../registry":880}],648:[function(b,y,F){var q=b("../../registry"),n=b("./hover").hover;y.exports=function(p,h,a){function f(){p.emit("plotly_click",{points:p._hoverdata,event:h})}var d=q.getComponentMethod("annotations","onClick")(p,p._hoverdata);void 0!==a&&n(p,
h,a,!0);p._hoverdata&&h&&h.target&&(d&&d.then?d.then(f):f(),h.stopImmediatePropagation&&h.stopImmediatePropagation())}},{"../../registry":880,"./hover":652}],649:[function(b,y,F){y.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],650:[function(b,y,F){var q=b("../../lib"),n=b("./attributes"),p=b("./hoverlabel_defaults");y.exports=function(h,a,f,d){f=q.extendFlat({},d.hoverlabel);a.hovertemplate&&(f.namelength=-1);
p(h,a,function(l,k){return q.coerce(h,a,n,l,k)},f)}},{"../../lib":749,"./attributes":646,"./hoverlabel_defaults":653}],651:[function(b,y,F){function q(f,d){if(Array.isArray(d)){if(Array.isArray(f)&&Array.isArray(f[d[0]]))return f[d[0]][d[1]]}else return f[d]}var n=b("../../lib");F.getSubplot=function(f){return f.subplot||f.xaxis+f.yaxis||f.geo};F.isTraceInSubplots=function(f,d){if("splom"===f.type){var l=f.xaxes||[];f=f.yaxes||[];for(var k=0;k<l.length;k++)for(var c=0;c<f.length;c++)if(-1!==d.indexOf(l[k]+
f[c]))return!0;return!1}return-1!==d.indexOf(F.getSubplot(f))};F.flat=function(f,d){for(var l=Array(f.length),k=0;k<f.length;k++)l[k]=d;return l};F.p2c=function(f,d){for(var l=Array(f.length),k=0;k<f.length;k++)l[k]=f[k].p2c(d);return l};F.getDistanceFunction=function(f,d,l,k){return"closest"===f?k||F.quadrature(d,l):"x"===f.charAt(0)?d:l};F.getClosest=function(f,d,l){if(!1!==l.index)0<=l.index&&l.index<f.length?l.distance=0:l.index=!1;else for(var k=0;k<f.length;k++){var c=d(f[k]);c<=l.distance&&
(l.index=k,l.distance=c)}return l};F.inbox=function(f,d,l){return 0>f*d||0===f?l:Infinity};F.quadrature=function(f,d){return function(l){var k=f(l);l=d(l);return Math.sqrt(k*k+l*l)}};F.makeEventData=function(f,d,l){var k="index"in f?f.index:f.pointNumber,c={data:d._input,fullData:d,curveNumber:d.index,pointNumber:k};if(d._indexToPoints){var e=d._indexToPoints[k];1===e.length?c.pointIndex=e[0]:c.pointIndices=e}else c.pointIndex=k;d._module.eventData?c=d._module.eventData(c,f,d,l,k):("xVal"in f?c.x=
f.xVal:"x"in f&&(c.x=f.x),"yVal"in f?c.y=f.yVal:"y"in f&&(c.y=f.y),f.xa&&(c.xaxis=f.xa),f.ya&&(c.yaxis=f.ya),void 0!==f.zLabelVal&&(c.z=f.zLabelVal));F.appendArrayPointValue(c,d,k);return c};F.appendArrayPointValue=function(f,d,l){var k=d._arrayAttrs;if(k)for(var c=0;c<k.length;c++){var e=k[c],g=p[e]||e;void 0===f[g]&&(e=n.nestedProperty(d,e).get(),e=q(e,l),void 0!==e&&(f[g]=e))}};F.appendArrayMultiPointValues=function(f,d,l){var k=d._arrayAttrs;if(k)for(var c=0;c<k.length;c++){var e=k[c],g=p[e]||
e;if(void 0===f[g]){e=n.nestedProperty(d,e).get();for(var m=Array(l.length),r=0;r<l.length;r++)m[r]=q(e,l[r]);f[g]=m}}};var p={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"},h={x:!0,y:!0},a={"x unified":!0,"y unified":!0};F.isUnifiedHover=function(f){return"string"!==typeof f?!1:!!a[f]};F.isXYhover=function(f){return"string"!==typeof f?!1:!!h[f]}},{"../../lib":749}],652:[function(b,y,F){function q(P,T,V,aa){function ba(xa,Ga){for(Ha=0;Ha<Fa.length;Ha++)if((eb=
Fa[Ha])&&eb[0]&&eb[0].trace&&(Qa=eb[0].trace,!0===Qa.visible&&0!==Qa._length&&-1===["carpet","contourcarpet"].indexOf(Qa._module.name))){"splom"===Qa.type?(ob=0,hb=da[ob]):(hb=t.getSubplot(Qa),ob=da.indexOf(hb));ib=ma;t.isUnifiedHover(ib)&&(ib=ib.charAt(0));tb={cd:eb,trace:Qa,xa:qa[ob],ya:oa[ob],maxHoverDistance:wa,maxSpikeDistance:na,index:!1,distance:Math.min(db,wa),spikeDistance:Infinity,xSpike:void 0,ySpike:void 0,color:C.defaultLine,name:Qa.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,
yLabelVal:void 0,zLabelVal:void 0,text:void 0};ca[hb]&&(tb.subplot=ca[hb]._subplot);ca._splomScenes&&ca._splomScenes[Qa.uid]&&(tb.scene=ca._splomScenes[Qa.uid]);Aa=ya.length;if("array"===ib){var Va=T[Ha];"pointNumber"in Va?(tb.index=Va.pointNumber,ib="closest"):(ib="","xval"in Va&&(Pa=Va.xval,ib="x"),"yval"in Va&&(sb=Va.yval,ib=ib?"closest":"y"))}else void 0!==xa&&void 0!==Ga?(Pa=xa,sb=Ga):(Pa=Xa[ob],sb=pb[ob]);if(0!==wa)if(Qa._module&&Qa._module.hoverPoints){if(Va=Qa._module.hoverPoints(tb,Pa,sb,
ib,ca._hoverlayer))for(var gb,Ma=0;Ma<Va.length;Ma++)gb=Va[Ma],g(gb.x0)&&g(gb.y0)&&ya.push(d(gb,ma))}else r.log("Unrecognized trace type in hover:",Qa);"closest"===ma&&ya.length>Aa&&(ya.splice(0,Aa),db=ya[0].distance);pa&&0!==na&&0===ya.length&&(tb.distance=na,tb.index=!1,(Va=Qa._module.hoverPoints(tb,Pa,sb,"closest",ca._hoverlayer))&&(Va=Va.filter(function(cb){return cb.spikeDistance<=na})),Va&&Va.length)&&(gb=Va.filter(function(cb){return cb.xa.showspikes&&"hovered data"!==cb.xa.spikesnap}),gb.length&&
(gb=gb[0],g(gb.x0)&&g(gb.y0)&&(gb=ea(gb),!Ka.vLinePoint||Ka.vLinePoint.spikeDistance>gb.spikeDistance))&&(Ka.vLinePoint=gb),Va=Va.filter(function(cb){return cb.ya.showspikes&&"hovered data"!==cb.ya.spikesnap}),Va.length&&(Va=Va[0],g(Va.x0)&&g(Va.y0)&&(gb=ea(Va),!Ka.hLinePoint||Ka.hLinePoint.spikeDistance>gb.spikeDistance))&&(Ka.hLinePoint=gb))}}function Y(xa,Ga){for(var Va=null,gb=Infinity,Ma,cb=0;cb<xa.length;cb++)Ma=xa[cb].spikeDistance,Ma<=gb&&Ma<=Ga&&(Va=xa[cb],gb=Ma);return Va}function ea(xa){return xa?
{xa:xa.xa,ya:xa.ya,x:void 0!==xa.xSpike?xa.xSpike:(xa.x0+xa.x1)/2,y:void 0!==xa.ySpike?xa.ySpike:(xa.y0+xa.y1)/2,distance:xa.distance,spikeDistance:xa.spikeDistance,curveNumber:xa.trace.index,color:xa.color,pointNumber:xa.index}:null}V||(V="xy");var da=Array.isArray(V)?V:[V],ca=P._fullLayout,la=ca._plots||[];V=la[V];var pa=ca._has("cartesian");V&&(V=V.overlays.map(function(xa){return xa.id}),da=da.concat(V));V=da.length;for(var qa=Array(V),oa=Array(V),ka=!1,ra=0;ra<V;ra++){var ha=da[ra];if(la[ha])ka=
!0,qa[ra]=la[ha].xaxis,oa[ra]=la[ha].yaxis;else if(ca[ha]&&ca[ha]._subplot)ha=ca[ha]._subplot,qa[ra]=ha.xaxis,oa[ra]=ha.yaxis;else{r.warn("Unrecognized subplot: "+ha);return}}var ma=T.hovermode||ca.hovermode;ma&&!ka&&(ma="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(ma)||!P.calcdata||P.querySelector(".zoombox")||P._dragging)return x.unhoverRaw(P,T);var wa=-1===ca.hoverdistance?Infinity:ca.hoverdistance,na=-1===ca.spikedistance?Infinity:ca.spikedistance,ya=[],Fa=[],Ha,eb,hb,
ob,ib,Pa,sb,tb,Aa,Ka={hLinePoint:null,vLinePoint:null};la=!1;if(Array.isArray(T))for(ma="array",ra=0;ra<T.length;ra++){if(eb=P.calcdata[T[ra].curveNumber||0]){var Qa=eb[0].trace;"skip"!==eb[0].trace.hoverinfo&&(Fa.push(eb),"h"===Qa.orientation&&(la=!0))}}else{for(Ha=0;Ha<P.calcdata.length;Ha++)eb=P.calcdata[Ha],Qa=eb[0].trace,"skip"!==Qa.hoverinfo&&t.isTraceInSubplots(Qa,da)&&(Fa.push(eb),"h"===Qa.orientation&&(la=!0));if(T.target){if(!1===u.triggerHandler(P,"plotly_beforehover",T))return;ka=T.target.getBoundingClientRect();
V=T.clientX-ka.left;ka=T.clientY-ka.top;if(0>V||V>qa[0]._length||0>ka||ka>oa[0]._length)return x.unhoverRaw(P,T)}else V="xpx"in T?T.xpx:qa[0]._length/2,ka="ypx"in T?T.ypx:oa[0]._length/2;T.pointerX=V+qa[0]._offset;T.pointerY=ka+oa[0]._offset;var Xa="xval"in T?t.flat(da,T.xval):t.p2c(qa,V);var pb="yval"in T?t.flat(da,T.yval):t.p2c(oa,ka);if(!g(Xa[0])||!g(pb[0]))return r.warn("Fx.hover failed",T,P),x.unhoverRaw(P,T)}var db=Infinity;ba();V={fullLayout:ca,container:ca._hoverlayer,outerContainer:ca._paperdiv,
event:T};P._spikepoints={vLinePoint:Ka.vLinePoint,hLinePoint:Ka.hLinePoint};pa&&0!==na&&0!==ya.length&&(ka=ya.filter(function(xa){return xa.ya.showspikes}),ka=Y(ka,na),Ka.hLinePoint=ea(ka),ka=ya.filter(function(xa){return xa.xa.showspikes}),ka=Y(ka,na),Ka.vLinePoint=ea(ka));if(0===ya.length)return aa=x.unhoverRaw(P,T),!pa||null===Ka.hLinePoint&&null===Ka.vLinePoint||l(P,Ka,V),aa;pa&&l(P,Ka,V);ya.sort(function(xa,Ga){return xa.distance-Ga.distance});if(t.isXYhover(ib)&&0!==ya[0].length&&"splom"!==
ya[0].trace.type){V=ya[0];ka=V.cd[V.index];ra="group"===ca.boxmode||"group"===ca.violinmode;ha=V.xVal;var Ia=V.xa;"category"===Ia.type&&(ha=Ia._categoriesMap[ha]);"date"===Ia.type&&(ha=Ia.d2c(ha));ka&&ka.t&&ka.t.posLetter===Ia._id&&ra&&(ha+=ka.t.dPos);var Ua=V.yVal;Ia=V.ya;"category"===Ia.type&&(Ua=Ia._categoriesMap[Ua]);"date"===Ia.type&&(Ua=Ia.d2c(Ua));ka&&ka.t&&ka.t.posLetter===Ia._id&&ra&&(Ua+=ka.t.dPos);ba(ha,Ua);var $a={};ya=ya.filter(function(xa){xa=n(xa);if(!$a[xa])return $a[xa]=!0,$a[xa]})}V=
P._hoverdata;ka=[];for(ra=0;ra<ya.length;ra++)ha=ya[ra],Ia=t.makeEventData(ha,ha.trace,ha.cd),!1!==ha.hovertemplate&&(Ua=!1,ha.cd[ha.index]&&ha.cd[ha.index].ht&&(Ua=ha.cd[ha.index].ht),ha.hovertemplate=Ua||ha.trace.hovertemplate||!1),ha.eventData=[Ia],ka.push(Ia);P._hoverdata=ka;la="y"===ma&&(1<Fa.length||1<ya.length)||"closest"===ma&&la&&1<ya.length;ra=C.combine(ca.plot_bgcolor||C.background,ca.paper_bgcolor);ra=p(ya,{hovermode:ma,rotateLabels:la,bgColor:ra,container:ca._hoverlayer,outerContainer:ca._paperdiv,
commonLabelOpts:ca.hoverlabel,hoverdistance:ca.hoverdistance},P);t.isUnifiedHover(ma)||(a(ra,la?"xa":"ya",ca),f(ra,la));T.target&&T.target.tagName&&(la=B.getComponentMethod("annotations","hasClickToShow")(P,ka),w(e.select(T.target),la?"pointer":""));T.target&&!aa&&k(P,T,V)&&(V&&P.emit("plotly_unhover",{event:T,points:V}),P.emit("plotly_hover",{event:T,points:P._hoverdata,xaxes:qa,yaxes:oa,xvals:Xa,yvals:pb}))}function n(P){return[P.trace.index,P.index,P.x0,P.y0,P.name,P.attr,P.xa,P.ya||""].join()}
function p(P,T,V){function aa(Pa){return Pa.filter(function(sb){return void 0!==sb.zLabelVal||(sb[ma]||"").split(" ")[0]===na})}var ba=V._fullLayout,Y=T.hovermode,ea=T.rotateLabels,da=T.bgColor,ca=T.container,la=T.outerContainer,pa=T.commonLabelOpts||{},qa=T.fontFamily||G.HOVERFONT,oa=T.fontSize||G.HOVERFONTSIZE,ka=P[0],ra=ka.xa,ha=ka.ya,ma="y"===Y.charAt(0)?"yLabel":"xLabel",wa=ka[ma],na=(String(wa)||"").split(" ")[0];la=la.node().getBoundingClientRect();var ya=la.top,Fa=la.width,Ha=la.height,eb=
void 0!==wa&&ka.distance<=T.hoverdistance&&("x"===Y||"y"===Y);if(eb){la=!0;var hb,ob;for(hb=0;hb<P.length;hb++)if(la&&void 0===P[hb].zLabel&&(la=!1),ob=P[hb].hoverinfo||P[hb].trace.hoverinfo)if(ob=Array.isArray(ob)?ob:ob.split("+"),-1===ob.indexOf("all")&&-1===ob.indexOf(Y)){eb=!1;break}la&&(eb=!1)}la=ca.selectAll("g.axistext").data(eb?[0]:[]);la.enter().append("g").classed("axistext",!0);la.exit().remove();la.each(function(){var Pa=e.select(this),sb=r.ensureSingle(Pa,"path","",function(xa){xa.style({"stroke-width":"1px"})}),
tb=r.ensureSingle(Pa,"text","",function(xa){xa.attr("data-notex",1)}),Aa=pa.bgcolor||C.defaultLine,Ka=pa.bordercolor||C.contrast(Aa),Qa=C.contrast(Aa),Xa={family:pa.font.family||qa,size:pa.font.size||oa,color:pa.font.color||Qa};sb.style({fill:Aa,stroke:Ka});tb.text(wa).call(D.font,Xa).call(v.positionText,0,0).call(v.convertToTspans,V);Pa.attr("transform","");var pb=tb.node().getBoundingClientRect();if("x"===Y)Qa="top"===ra.side?"-":"",tb.attr("text-anchor","middle").call(v.positionText,0,"top"===
ra.side?ya-pb.bottom-N-O:ya-pb.top+N+O),Aa=ra._offset+(ka.x0+ka.x1)/2,Ka=ha._offset+("top"===ra.side?0:ha._length),tb=pb.width/2+O,Aa<tb?(Aa=tb,sb.attr("d","M-"+(tb-N)+",0L-"+(tb-2*N)+","+Qa+N+"H"+(O+pb.width/2)+"v"+Qa+(2*O+pb.height)+"H-"+tb+"V"+Qa+N+"Z")):Aa>ba.width-tb?(Aa=ba.width-tb,sb.attr("d","M"+(tb-N)+",0L"+tb+","+Qa+N+"v"+Qa+(2*O+pb.height)+"H-"+tb+"V"+Qa+N+"H"+(tb-2*N)+"Z")):sb.attr("d","M0,0L"+N+","+Qa+N+"H"+(O+pb.width/2)+"v"+Qa+(2*O+pb.height)+"H-"+(O+pb.width/2)+"V"+Qa+N+"H-"+N+"Z");
else{if("right"===ha.side){Qa="start";var db=1;var Ia="";Aa=ra._offset+ra._length}else Qa="end",db=-1,Ia="-",Aa=ra._offset;Ka=ha._offset+(ka.y0+ka.y1)/2;tb.attr("text-anchor",Qa);sb.attr("d","M0,0L"+Ia+N+","+N+"V"+(O+pb.height/2)+"h"+Ia+(2*O+pb.width)+"V-"+(O+pb.height/2)+"H"+Ia+N+"V-"+N+"Z");var Ua=pb.height/2;Ia=ya-pb.top-Ua;sb="clip"+ba._uid+"commonlabel"+ha._id;if(Aa<pb.width+2*O+N){db="M-"+(N+O)+"-"+Ua+"h-"+(pb.width-O)+"V"+Ua+"h"+(pb.width-O)+"Z";var $a=pb.width-Aa+O;v.positionText(tb,$a,Ia);
"end"===Qa&&tb.selectAll("tspan").each(function(){var xa=e.select(this),Ga=D.tester.append("text").text(xa.text()).call(D.font,Xa),Va=Ga.node().getBoundingClientRect();Math.round(Va.width)<Math.round(pb.width)&&xa.attr("x",$a-Va.width);Ga.remove()})}else v.positionText(tb,db*(O+N),Ia),db=null;Qa=ba._topclips.selectAll("#"+sb).data(db?[0]:[]);Qa.enter().append("clipPath").attr("id",sb).append("path");Qa.exit().remove();Qa.select("path").attr("d",db);D.setClipUrl(tb,db?sb:null,V)}Pa.attr("transform",
"translate("+Aa+","+Ka+")");P=aa(P)});if(t.isUnifiedHover(Y)){ca.selectAll("g.hovertext").remove();void 0!==wa&&ka.distance<=T.hoverdistance&&(P=aa(P));if(0===P.length)return;T={};H({showlegend:!0,legend:{title:{text:wa,font:ba.hoverlabel.font},font:ba.hoverlabel.font,bgcolor:ba.hoverlabel.bgcolor,bordercolor:ba.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ba.legend?ba.legend.traceorder:void 0,orientation:"v"}},T,V._fullData);T=T.legend;T.entries=[];for(la=0;la<P.length;la++){ob=
h(P[la],!0,Y,ba,wa);hb=ob[0];var ib=ob[1];ob=P[la];ob.name=ib;ob.text=""!==ib?ib+" : "+hb:hb;if(hb=ob.cd[ob.index])hb.mc&&(ob.mc=hb.mc),hb.mcc&&(ob.mc=hb.mcc),hb.mlc&&(ob.mlc=hb.mlc),hb.mlcc&&(ob.mlc=hb.mlcc),hb.mlw&&(ob.mlw=hb.mlw),hb.mrc&&(ob.mrc=hb.mrc),hb.dir&&(ob.dir=hb.dir);ob._distinct=!0;T.entries.push([ob])}T.entries.sort(function(Pa,sb){return Pa[0].trace.index-sb[0].trace.index});T.layer=ca;I(V,T);T=r.mean(P.map(function(Pa){return(Pa.y0+Pa.y1)/2}));la=r.mean(P.map(function(Pa){return(Pa.x0+
Pa.x1)/2}));ca=ca.select("g.legend");hb=ca.node().getBoundingClientRect();la+=ra._offset;T+=ha._offset-hb.height/2;ob=hb.width+2*O;la=!(la+ob<=Fa)&&0<=la-ob?la-ob:la+2*O;hb=hb.height+2*O;ob=T+hb>=Ha;hb<=Ha&&(T<=ya?T=ha._offset+2*O:ob&&(T=Ha-hb));ca.attr("transform","translate("+la+","+T+")");return ca}ca=ca.selectAll("g.hovertext").data(P,function(Pa){return n(Pa)});ca.enter().append("g").classed("hovertext",!0).each(function(){var Pa=e.select(this);Pa.append("rect").call(C.fill,C.addOpacity(da,.8));
Pa.append("text").classed("name",!0);Pa.append("path").style("stroke-width","1px");Pa.append("text").classed("nums",!0).call(D.font,qa,oa)});ca.exit().remove();ca.each(function(Pa){var sb=e.select(this).attr("transform",""),tb=Pa.bgcolor||Pa.color,Aa=C.combine(C.opacity(tb)?tb:C.defaultLine,da),Ka=C.combine(C.opacity(Pa.color)?Pa.color:C.defaultLine,da),Qa=Pa.borderColor||C.contrast(Aa);tb=h(Pa,eb,Y,ba,wa,sb);var Xa=tb[0],pb=tb[1];tb=sb.select("text.nums").call(D.font,Pa.fontFamily||qa,Pa.fontSize||
oa,Pa.fontColor||Qa).text(Xa).attr("data-notex",1).call(v.positionText,0,0).call(v.convertToTspans,V);var db=sb.select("text.name"),Ia=0,Ua=0;pb&&pb!==Xa?(db.call(D.font,Pa.fontFamily||qa,Pa.fontSize||oa,Ka).text(pb).attr("data-notex",1).call(v.positionText,0,0).call(v.convertToTspans,V),Ua=db.node().getBoundingClientRect(),Ia=Ua.width+2*O,Ua=Ua.height+2*O):(db.remove(),sb.select("rect").remove());sb.select("path").style({fill:Aa,stroke:Qa});var $a=tb.node().getBoundingClientRect();Aa=Pa.xa._offset+
(Pa.x0+Pa.x1)/2;Qa=Pa.ya._offset+(Pa.y0+Pa.y1)/2;Ka=Math.abs(Pa.x1-Pa.x0);Xa=Math.abs(Pa.y1-Pa.y0);pb=$a.width+N+O+Ia;Pa.ty0=ya-$a.top;Pa.bx=$a.width+2*O;Pa.by=Math.max($a.height+2*O,Ua);Pa.anchor="start";Pa.txwidth=$a.width;Pa.tx2width=Ia;Pa.offset=0;ea?(Pa.pos=Aa,Ua=Qa+Xa/2+pb<=Ha,("top"===Pa.idealAlign||!Ua)&&0<=Qa-Xa/2-pb?(Qa-=Xa/2,Pa.anchor="end"):Ua?(Qa+=Xa/2,Pa.anchor="start"):Pa.anchor="middle"):(Pa.pos=Qa,Ua=Aa+Ka/2+pb<=Fa,("left"===Pa.idealAlign||!Ua)&&0<=Aa-Ka/2-pb?(Aa-=Ka/2,Pa.anchor=
"end"):Ua?(Aa+=Ka/2,Pa.anchor="start"):(Pa.anchor="middle",Ka=pb/2,Ua=Aa+Ka-Fa,Ka=Aa-Ka,0<Ua&&(Aa-=Ua),0>Ka&&(Aa+=-Ka)));tb.attr("text-anchor",Pa.anchor);Ia&&db.attr("text-anchor",Pa.anchor);sb.attr("transform","translate("+Aa+","+Qa+")"+(ea?"rotate("+J+")":""))});return ca}function h(P,T,V,aa,ba,Y){var ea="",da="";void 0!==P.nameOverride&&(P.name=P.nameOverride);P.name&&(P.trace._meta&&(P.name=r.templateString(P.name,P.trace._meta)),ea=c(P.name,P.nameLength));void 0!==P.zLabel?(void 0!==P.xLabel&&
(da+="x: "+P.xLabel+"\x3cbr\x3e"),void 0!==P.yLabel&&(da+="y: "+P.yLabel+"\x3cbr\x3e"),"choropleth"!==P.trace.type&&"choroplethmapbox"!==P.trace.type&&(da+=(da?"z: ":"")+P.zLabel)):T&&P[V.charAt(0)+"Label"]===ba?da=P[("x"===V.charAt(0)?"y":"x")+"Label"]||"":void 0===P.xLabel?void 0!==P.yLabel&&"scattercarpet"!==P.trace.type&&(da=P.yLabel):da=void 0===P.yLabel?P.xLabel:"("+P.xLabel+", "+P.yLabel+")";!P.text&&0!==P.text||Array.isArray(P.text)||(da+=(da?"\x3cbr\x3e":"")+P.text);void 0!==P.extraText&&
(da+=(da?"\x3cbr\x3e":"")+P.extraText);Y&&""===da&&!P.hovertemplate&&(""===ea&&Y.remove(),da=ea);T=aa._d3locale;V=P.hovertemplate||!1;aa=P.hovertemplateLabels||P;ba=P.eventData[0]||{};V&&(da=r.hovertemplateString(V,aa,T,ba,P.trace._meta),da=da.replace(Q,function(ca,la){ea=c(la,P.nameLength);return""}));return[da,ea]}function a(P,T,V){function aa(na){var ya=na[0],Fa=na[na.length-1];pa=ya.pmin-ya.pos-ya.dp+ya.size;qa=Fa.pos+Fa.dp+Fa.size-ya.pmax;if(.01<pa){for(ka=na.length-1;0<=ka;ka--)na[ka].dp+=pa;
la=!1}if(!(.01>qa)){if(-.01>pa){for(ka=na.length-1;0<=ka;ka--)na[ka].dp-=qa;la=!1}if(la){for(oa=Fa=0;oa<na.length;oa++)ra=na[oa],ra.pos+ra.dp+ra.size>ya.pmax&&Fa++;for(oa=na.length-1;0<=oa&&!(0>=Fa);oa--)ra=na[oa],ra.pos>ya.pmax-1&&(ra.del=!0,Fa--);for(oa=0;oa<na.length&&!(0>=Fa);oa++)if(ra=na[oa],ra.pos<ya.pmin+1)for(ra.del=!0,Fa--,qa=2*ra.size,ka=na.length-1;0<=ka;ka--)na[ka].dp-=qa;for(oa=na.length-1;0<=oa&&!(0>=Fa);oa--)ra=na[oa],ra.pos+ra.dp+ra.size>ya.pmax&&(ra.del=!0,Fa--)}}}var ba=0,Y=1,ea=
P.size(),da=Array(ea),ca=0;P.each(function(na){var ya=na[T],Fa="x"===ya._id.charAt(0);ya=ya.range;0===ca&&ya&&ya[0]>ya[1]!==Fa&&(Y=-1);da[ca++]=[{datum:na,traceIndex:na.trace.index,dp:0,pos:na.pos,posref:na.posref,size:na.by*(Fa?L:1)/2,pmin:0,pmax:Fa?V.width:V.height}]});da.sort(function(na,ya){return na[0].posref-ya[0].posref||Y*(ya[0].traceIndex-na[0].traceIndex)});for(var la,pa,qa,oa,ka,ra,ha;!la&&ba<=ea;){ba++;la=!0;for(oa=0;oa<da.length-1;){P=da[oa];ha=da[oa+1];var ma=P[P.length-1],wa=ha[0];
pa=ma.pos+ma.dp+ma.size-wa.pos-wa.dp+wa.size;if(.01<pa&&ma.pmin===wa.pmin&&ma.pmax===wa.pmax){for(ka=ha.length-1;0<=ka;ka--)ha[ka].dp+=pa;P.push.apply(P,ha);da.splice(oa+1,1);ha=0;for(ka=P.length-1;0<=ka;ka--)ha+=P[ka].dp;qa=ha/P.length;for(ka=P.length-1;0<=ka;ka--)P[ka].dp-=qa;la=!1}else oa++}da.forEach(aa)}for(oa=da.length-1;0<=oa;oa--)for(ba=da[oa],ka=ba.length-1;0<=ka;ka--)ea=ba[ka],P=ea.datum,P.offset=ea.dp,P.del=ea.del}function f(P,T){P.each(function(V){var aa=e.select(this);if(V.del)return aa.remove();
var ba=aa.select("text.nums"),Y=V.anchor,ea="end"===Y?-1:1,da={start:1,end:-1,middle:0}[Y],ca=da*(N+O),la=ca+da*(V.txwidth+O),pa=0,qa=V.offset;"middle"===Y&&(ca-=V.tx2width/2,la+=V.txwidth/2+O);T&&(qa*=-K,pa=V.offset*E);aa.select("path").attr("d","middle"===Y?"M-"+(V.bx/2+V.tx2width/2)+","+(qa-V.by/2)+"h"+V.bx+"v"+V.by+"h-"+V.bx+"Z":"M0,0L"+(ea*N+pa)+","+(N+qa)+"v"+(V.by/2-N)+"h"+ea*V.bx+"v-"+V.by+"H"+(ea*N+pa)+"V"+(qa-N)+"Z");ea=ca+pa;ca=qa+V.ty0-V.by/2+O;var oa=V.textAlign||"auto";"auto"!==oa&&
("left"===oa&&"start"!==Y?(ba.attr("text-anchor","start"),ea="middle"===Y?-V.bx/2-V.tx2width/2+O:-V.bx-O):"right"===oa&&"end"!==Y&&(ba.attr("text-anchor","end"),ea="middle"===Y?V.bx/2-V.tx2width/2-O:V.bx+O));ba.call(v.positionText,ea,ca);V.tx2width&&(aa.select("text.name").call(v.positionText,la+da*O+pa,qa+V.ty0-V.by/2+O),aa.select("rect").call(D.setRect,la+(da-1)*V.tx2width/2+pa,qa-V.by/2-1,V.tx2width,V.by+2))})}function d(P,T){function V(pa){return pa||g(pa)&&0===pa}function aa(pa,qa,oa){qa=ca(qa,
oa);V(qa)&&(P[pa]=qa)}var ba=P.index,Y=P.trace||{},ea=P.cd[0],da=P.cd[ba]||{},ca=Array.isArray(ba)?function(pa,qa){pa=r.castOption(ea,ba,pa);return V(pa)?pa:r.extractOption({},Y,"",qa)}:function(pa,qa){return r.extractOption(da,Y,pa,qa)};aa("hoverinfo","hi","hoverinfo");aa("bgcolor","hbg","hoverlabel.bgcolor");aa("borderColor","hbc","hoverlabel.bordercolor");aa("fontFamily","htf","hoverlabel.font.family");aa("fontSize","hts","hoverlabel.font.size");aa("fontColor","htc","hoverlabel.font.color");aa("nameLength",
"hnl","hoverlabel.namelength");aa("textAlign","hta","hoverlabel.align");P.posref="y"===T||"closest"===T&&"h"===Y.orientation?P.xa._offset+(P.x0+P.x1)/2:P.ya._offset+(P.y0+P.y1)/2;P.x0=r.constrain(P.x0,0,P.xa._length);P.x1=r.constrain(P.x1,0,P.xa._length);P.y0=r.constrain(P.y0,0,P.ya._length);P.y1=r.constrain(P.y1,0,P.ya._length);void 0!==P.xLabelVal&&(P.xLabel="xLabel"in P?P.xLabel:A.hoverLabelText(P.xa,P.xLabelVal),P.xVal=P.xa.c2d(P.xLabelVal));void 0!==P.yLabelVal&&(P.yLabel="yLabel"in P?P.yLabel:
A.hoverLabelText(P.ya,P.yLabelVal),P.yVal=P.ya.c2d(P.yLabelVal));void 0!==P.zLabelVal&&void 0===P.zLabel&&(P.zLabel=String(P.zLabelVal));if(!(isNaN(P.xerr)||"log"===P.xa.type&&0>=P.xerr)){var la=A.tickText(P.xa,P.xa.c2l(P.xerr),"hover").text;P.xLabel=void 0!==P.xerrneg?P.xLabel+(" +"+la+" / -"+A.tickText(P.xa,P.xa.c2l(P.xerrneg),"hover").text):P.xLabel+("  "+la);"x"===T&&(P.distance+=1)}isNaN(P.yerr)||"log"===P.ya.type&&0>=P.yerr||(la=A.tickText(P.ya,P.ya.c2l(P.yerr),"hover").text,P.yLabel=void 0!==
P.yerrneg?P.yLabel+(" +"+la+" / -"+A.tickText(P.ya,P.ya.c2l(P.yerrneg),"hover").text):P.yLabel+("  "+la),"y"===T&&(P.distance+=1));(T=P.hoverinfo||P.trace.hoverinfo)&&"all"!==T&&(T=Array.isArray(T)?T:T.split("+"),-1===T.indexOf("x")&&(P.xLabel=void 0),-1===T.indexOf("y")&&(P.yLabel=void 0),-1===T.indexOf("z")&&(P.zLabel=void 0),-1===T.indexOf("text")&&(P.text=void 0),-1===T.indexOf("name")&&(P.name=void 0));return P}function l(P,T,V){var aa=V.container,ba=V.fullLayout,Y=ba._size;V=V.event;var ea=
!!T.hLinePoint,da=!!T.vLinePoint;aa.selectAll(".spikeline").remove();if(da||ea){ba=C.combine(ba.plot_bgcolor,ba.paper_bgcolor);if(ea){var ca=T.hLinePoint;var la=ca&&ca.xa;ea=ca&&ca.ya;if("cursor"===ea.spikesnap){var pa=V.pointerX;la=V.pointerY}else pa=la._offset+ca.x,la=ea._offset+ca.y;var qa=1.5>m.readability(ca.color,ba)?C.contrast(ba):ca.color;ca=ea.spikemode;var oa=ea.spikethickness;qa=ea.spikecolor||qa;var ka=A.getPxPosition(P,ea);if(-1!==ca.indexOf("toaxis")||-1!==ca.indexOf("across")){if(-1!==
ca.indexOf("toaxis")){var ra=ka;var ha=pa}-1!==ca.indexOf("across")&&(ra=ea._counterDomainMin,ha=ea._counterDomainMax,"free"===ea.anchor&&(ra=Math.min(ra,ea.position),ha=Math.max(ha,ea.position)),ra=Y.l+ra*Y.w,ha=Y.l+ha*Y.w);aa.insert("line",":first-child").attr({x1:ra,x2:ha,y1:la,y2:la,"stroke-width":oa,stroke:qa,"stroke-dasharray":D.dashStyle(ea.spikedash,oa)}).classed("spikeline",!0).classed("crisp",!0);aa.insert("line",":first-child").attr({x1:ra,x2:ha,y1:la,y2:la,"stroke-width":oa+2,stroke:ba}).classed("spikeline",
!0).classed("crisp",!0)}-1!==ca.indexOf("marker")&&aa.insert("circle",":first-child").attr({cx:ka+("right"!==ea.side?oa:-oa),cy:la,r:oa,fill:qa}).classed("spikeline",!0)}if(da){la=(da=T.vLinePoint)&&da.xa;ea=da&&da.ya;"cursor"===la.spikesnap?(T=V.pointerX,ea=V.pointerY):(T=la._offset+da.x,ea=ea._offset+da.y);ra=1.5>m.readability(da.color,ba)?C.contrast(ba):da.color;V=la.spikemode;da=la.spikethickness;ra=la.spikecolor||ra;P=A.getPxPosition(P,la);if(-1!==V.indexOf("toaxis")||-1!==V.indexOf("across")){if(-1!==
V.indexOf("toaxis")){var ma=P;var wa=ea}-1!==V.indexOf("across")&&(wa=la._counterDomainMin,ma=la._counterDomainMax,"free"===la.anchor&&(wa=Math.min(wa,la.position),ma=Math.max(ma,la.position)),ma=Y.t+(1-ma)*Y.h,wa=Y.t+(1-wa)*Y.h);aa.insert("line",":first-child").attr({x1:T,x2:T,y1:ma,y2:wa,"stroke-width":da,stroke:ra,"stroke-dasharray":D.dashStyle(la.spikedash,da)}).classed("spikeline",!0).classed("crisp",!0);aa.insert("line",":first-child").attr({x1:T,x2:T,y1:ma,y2:wa,"stroke-width":da+2,stroke:ba}).classed("spikeline",
!0).classed("crisp",!0)}-1!==V.indexOf("marker")&&aa.insert("circle",":first-child").attr({cx:T,cy:P-("top"!==la.side?da:-da),r:da,fill:ra}).classed("spikeline",!0)}}}function k(P,T,V){if(!V||V.length!==P._hoverdata.length)return!0;for(T=V.length-1;0<=T;T--){var aa=V[T],ba=P._hoverdata[T];if(aa.curveNumber!==ba.curveNumber||String(aa.pointNumber)!==String(ba.pointNumber)||String(aa.pointNumbers)!==String(ba.pointNumbers))return!0}return!1}function c(P,T){return v.plainText(P||"",{len:T,allowedTags:"br sub sup b i em".split(" ")})}
var e=b("d3"),g=b("fast-isnumeric"),m=b("tinycolor2"),r=b("../../lib"),u=b("../../lib/events"),v=b("../../lib/svg_text_utils"),w=b("../../lib/override_cursor"),D=b("../drawing"),C=b("../color"),x=b("../dragelement"),A=b("../../plots/cartesian/axes"),B=b("../../registry"),t=b("./helpers"),G=b("./constants"),H=b("../legend/defaults"),I=b("../legend/draw"),J=G.YANGLE;b=Math.PI*J/180;var L=1/Math.sin(b),E=Math.cos(b),K=Math.sin(b),N=G.HOVERARROWSIZE,O=G.HOVERTEXTPAD;F.hover=function(P,T,V,aa){P=r.getGraphDiv(P);
r.throttle(P._fullLayout._uid+G.HOVERID,G.HOVERMINTIME,function(){q(P,T,V,aa)})};F.loneHover=function(P,T){var V=!0;Array.isArray(P)||(V=!1,P=[P]);P=P.map(function(da){return{color:da.color||C.defaultLine,x0:da.x0||da.x||0,x1:da.x1||da.x||0,y0:da.y0||da.y||0,y1:da.y1||da.y||0,xLabel:da.xLabel,yLabel:da.yLabel,zLabel:da.zLabel,text:da.text,name:da.name,idealAlign:da.idealAlign,borderColor:da.borderColor,fontFamily:da.fontFamily,fontSize:da.fontSize,fontColor:da.fontColor,nameLength:da.nameLength,textAlign:da.textAlign,
trace:da.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:da.hovertemplate||!1,eventData:da.eventData||!1,hovertemplateLabels:da.hovertemplateLabels||!1}});var aa=e.select(T.container),ba=T.outerContainer?e.select(T.outerContainer):aa;aa={hovermode:"closest",rotateLabels:!1,bgColor:T.bgColor||C.background,container:aa,outerContainer:ba};P=p(P,aa,T.gd);var Y=0,ea=0;P.sort(function(da,ca){return da.y0-ca.y0}).each(function(da,ca){var la=da.y0-da.by/2;da.offset=la-5<
Y?Y-la+5:0;Y=la+da.by+da.offset;ca===T.anchorIndex&&(ea=da.offset)}).each(function(da){da.offset-=ea});f(P,aa.rotateLabels);return V?P:P.node()};var Q=/<extra>([\s\S]*)<\/extra>/},{"../../lib":749,"../../lib/events":738,"../../lib/override_cursor":760,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"../legend/defaults":667,"../legend/draw":668,"./constants":649,"./helpers":651,d3:169,"fast-isnumeric":241,tinycolor2:548}],
653:[function(b,y,F){var q=b("../../lib"),n=b("../color"),p=b("./helpers").isUnifiedHover;y.exports=function(h,a,f,d){function l(k){d.font[k]||(d.font[k]=a.legend?a.legend.font[k]:a.font[k])}d=d||{};a&&p(a.hovermode)&&(d.font||(d.font={}),l("size"),l("family"),l("color"),a.legend?(d.bgcolor||(d.bgcolor=n.combine(a.legend.bgcolor,a.paper_bgcolor)),d.bordercolor||(d.bordercolor=a.legend.bordercolor)):d.bgcolor||(d.bgcolor=a.paper_bgcolor));f("hoverlabel.bgcolor",d.bgcolor);f("hoverlabel.bordercolor",
d.bordercolor);f("hoverlabel.namelength",d.namelength);q.coerceFont(f,"hoverlabel.font",d.font);f("hoverlabel.align",d.align)}},{"../../lib":749,"../color":615,"./helpers":651}],654:[function(b,y,F){function q(h,a){a=a._scatterStackOpts||{};for(var f=0;f<h.length;f++){var d=h[f],l=(a[d.xaxis+d.yaxis]||{})[d.stackgroup]||{};if("h"!==d.orientation&&"h"!==l.orientation)return!1}return!0}var n=b("../../lib"),p=b("./layout_attributes");y.exports=function(h,a,f){function d(k,c){return void 0!==a[k]?a[k]:
n.coerce(h,a,p,k,c)}var l=d("clickmode");a._has("cartesian")?-1<l.indexOf("select")?f="closest":(a._isHoriz=q(f,a),f=a._isHoriz?"y":"x"):f="closest";return d("hovermode",f)}},{"../../lib":749,"./layout_attributes":656}],655:[function(b,y,F){var q=b("d3"),n=b("../../lib");F=b("../dragelement");var p=b("./helpers"),h=b("./layout_attributes"),a=b("./hover");y.exports={moduleType:"component",name:"fx",constants:b("./constants"),schema:{layout:h},attributes:b("./attributes"),layoutAttributes:h,supplyLayoutGlobalDefaults:b("./layout_global_defaults"),
supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),getDistanceFunction:p.getDistanceFunction,getClosest:p.getClosest,inbox:p.inbox,quadrature:p.quadrature,appendArrayPointValue:p.appendArrayPointValue,castHoverOption:function(f,d,l){return n.castOption(f,d,"hoverlabel."+l)},castHoverinfo:function(f,d,l){return n.castOption(f,l,"hoverinfo",function(k){return n.coerceHoverinfo({hoverinfo:k},{_module:f._module},d)})},hover:a.hover,unhover:F.unhover,loneHover:a.loneHover,
loneUnhover:function(f){f=n.isD3Selection(f)?f:q.select(f);f.selectAll("g.hovertext").remove();f.selectAll(".spikeline").remove()},click:b("./click")}},{"../../lib":749,"../dragelement":634,"./attributes":646,"./calc":647,"./click":648,"./constants":649,"./defaults":650,"./helpers":651,"./hover":652,"./layout_attributes":656,"./layout_defaults":657,"./layout_global_defaults":658,d3:169}],656:[function(b,y,F){F=b("./constants");b=b("../../plots/font_attributes")({editType:"none"});b.family.dflt=F.HOVERFONT;
b.size.dflt=F.HOVERFONTSIZE;y.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},
spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":825,"./constants":649}],657:[function(b,
y,F){var q=b("../../lib"),n=b("./helpers").isUnifiedHover,p=b("./layout_attributes"),h=b("./hovermode_defaults"),a=b("./hoverlabel_defaults");y.exports=function(f,d,l){function k(g,m){return q.coerce(f,d,p,g,m)}if(l=h(f,d,l))k("hoverdistance"),k("spikedistance",n(l)?-1:void 0);"select"===k("dragmode")&&k("selectdirection");l=d._has("mapbox");var c=d._has("geo"),e=d._basePlotModules.length;"zoom"===d.dragmode&&((l||c)&&1===e||l&&c&&2===e)&&(d.dragmode="pan");a(f,d,k)}},{"../../lib":749,"./helpers":651,
"./hoverlabel_defaults":653,"./hovermode_defaults":654,"./layout_attributes":656}],658:[function(b,y,F){var q=b("../../lib"),n=b("./hoverlabel_defaults"),p=b("./layout_attributes");y.exports=function(h,a){n(h,a,function(f,d){return q.coerce(h,a,p,f,d)})}},{"../../lib":749,"./hoverlabel_defaults":653,"./layout_attributes":656}],659:[function(b,y,F){function q(k,c,e){c=c[e+"axes"];k=Object.keys((k._splomAxes||{})[e]||{});if(Array.isArray(c))return c;if(k.length)return k}function n(k,c,e,g,m,r){e=c(k+
"gap",e);var u=c("domain."+k);c(k+"side",g);k=Array(m);c=u[0];u=(u[1]-c)/(m-e);e=u*(1-e);for(g=0;g<m;g++){var v=c+u*g;k[r?m-1-g:g]=[v,v+e]}return k}function p(k,c,e,g,m){function r(w,D){-1!==c.indexOf(D)&&void 0===g[D]?(u[w]=D,g[D]=w):u[w]=""}var u=Array(e),v;if(Array.isArray(k))for(v=0;v<e;v++)r(v,k[v]);else for(r(0,m),v=1;v<e;v++)r(v,m+(v+1));return u}var h=b("../../lib");F=b("../../lib/regex").counter;var a=b("../../plots/domain").attributes,f=b("../../plots/cartesian/constants").idRegex,d=b("../../plot_api/plot_template"),
l={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[F("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[f.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",
freeLength:!0,items:{valType:"enumerated",values:[f.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left",
"left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};y.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:function(k,c){function e(t,G){return h.coerce(g,x,l,t,G)}var g=k.grid||{},m=q(c,g,"x"),r=q(c,g,"y");if(k.grid||m||r){k=Array.isArray(g.subplots)&&Array.isArray(g.subplots[0]);var u=Array.isArray(m),v=Array.isArray(r),w=u&&m!==g.xaxes&&v&&r!==g.yaxes;if(k){var D=g.subplots.length;var C=g.subplots[0].length}else v&&
(D=r.length),u&&(C=m.length);var x=d.newContainer(c,"grid");m=e("rows",D);C=e("columns",C);if(1<m*C){k||u||v||"independent"===e("pattern")&&(k=!0);x._hasSubplotGrid=k;u="top to bottom"===e("roworder");v=k?.3:.1;if(w&&c._splomGridDflt){var A=c._splomGridDflt.xside;var B=c._splomGridDflt.yside}x._domains={x:n("x",e,k?.2:.1,A,C),y:n("y",e,v,B,m,u)}}else delete c.grid}},contentDefaults:function(k,c){var e=c.grid;if(e&&e._domains){var g=k.grid||{};k=c._subplots;var m=e._hasSubplotGrid,r=e.rows,u=e.columns,
v="independent"===e.pattern,w,D=e._axisMap={};if(m){var C=g.subplots||[];var x=e.subplots=Array(r);var A=1;for(c=0;c<r;c++){var B=x[c]=Array(u),t=C[c]||[];for(w=0;w<u;w++)if(v?(g=1===A?"xy":"x"+A+"y"+A,A++):g=t[w],B[w]="",-1!==k.cartesian.indexOf(g)){var G=g.indexOf("y");var H=g.slice(0,G);G=g.slice(G);void 0!==D[H]&&D[H]!==w||void 0!==D[G]&&D[G]!==c||(B[w]=g,D[H]=w,D[G]=c)}}}else G=q(c,g,"x"),c=q(c,g,"y"),e.xaxes=p(G,k.xaxis,u,D,"x"),e.yaxes=p(c,k.yaxis,r,D,"y");v=e._anchors={};w="top to bottom"===
e.roworder;for(var I in D)if(c=I.charAt(0),g=e[c+"side"],8>g.length)v[I]="free";else if("x"===c)if("t"===g.charAt(0)===w?(c=0,C=1,A=r):(c=r-1,A=C=-1),m)for(H=D[I];c!==A;c+=C){if(g=x[c][H])if(G=g.indexOf("y"),g.slice(0,G)===I){v[I]=g.slice(G);break}}else for(;c!==A;c+=C){if(G=e.yaxes[c],-1!==k.cartesian.indexOf(I+G)){v[I]=G;break}}else if("l"===g.charAt(0)?(c=0,C=1,A=u):(c=u-1,A=C=-1),m)for(H=D[I];c!==A;c+=C){if(g=x[H][c])if(G=g.indexOf("y"),g.slice(G)===I){v[I]=g.slice(0,G);break}}else for(;c!==A;c+=
C)if(H=e.xaxes[c],-1!==k.cartesian.indexOf(H+I)){v[I]=H;break}}}}},{"../../lib":749,"../../lib/regex":765,"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/domain":824}],660:[function(b,y,F){F=b("../../plots/cartesian/constants");b=b("../../plot_api/plot_template").templatedArray;y.exports=b("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",
editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",F.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",F.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803}],661:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../../lib/to_log_range");y.exports=function(p,h,a,f){h=h||{};var d="log"===a&&"linear"===
h.type;a="linear"===a&&"log"===h.type;if(d||a){p=p._fullLayout.images;a=h._id.charAt(0);for(var l,k,c=0;c<p.length;c++)if(l=p[c],k="images["+c+"].",l[a+"ref"]===h._id){var e=l[a];l=l["size"+a];d?(e=n(e,h.range),l=l/Math.pow(10,e)/2,l=2*Math.log(l+Math.sqrt(1+l*l))/Math.LN10):(e=Math.pow(10,e),l=e*(Math.pow(10,l/2)-Math.pow(10,-l/2)));q(e)?q(l)||(l=null):l=e=null;f(k+a,e);f(k+"size"+a,l)}}}},{"../../lib/to_log_range":775,"fast-isnumeric":241}],662:[function(b,y,F){function q(f,d,l){function k(r,u){return n.coerce(f,
d,a,r,u)}var c=k("source");if(!k("visible",!!c))return d;k("layer");k("xanchor");k("yanchor");k("sizex");k("sizey");k("sizing");k("opacity");l={_fullLayout:l};c=["x","y"];for(var e=0;2>e;e++){var g=c[e],m=p.coerceRef(f,d,l,g,"paper");"paper"!==m&&p.getFromId(l,m)._imgIndices.push(d._index);p.coercePosition(d,l,k,m,g,0)}return d}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../../plots/array_container_defaults"),a=b("./attributes");y.exports=function(f,d){h(f,d,{name:"images",handleItemDefaults:q})}},
{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":660}],663:[function(b,y,F){var q=b("d3"),n=b("../drawing"),p=b("../../plots/cartesian/axes"),h=b("../../constants/xmlns_namespaces");y.exports=function(a){function f(w){var D=q.select(this);if(this._imgSrc!==w.source)if(D.attr("xmlns",h.svg),w.source&&"data:"===w.source.slice(0,5))D.attr("xlink:href",w.source),this._imgSrc=w.source;else{var C=new Promise(function(x){function A(){D.remove();
x()}var B=new Image;this.img=B;B.setAttribute("crossOrigin","anonymous");B.onerror=A;B.onload=function(){var t=document.createElement("canvas");t.width=this.width;t.height=this.height;t.getContext("2d").drawImage(this,0,0);t=t.toDataURL("image/png");D.attr("xlink:href",t);x()};D.on("error",A);this._imgSrc=B.src=w.source}.bind(this));a._promises.push(C)}}function d(w){var D=q.select(this),C=p.getFromId(a,w.xref),x=p.getFromId(a,w.yref),A=l._size,B=C?Math.abs(C.l2p(w.sizex)-C.l2p(0)):w.sizex*A.w,t=
x?Math.abs(x.l2p(w.sizey)-x.l2p(0)):w.sizey*A.h,G=B*v.x[w.xanchor].offset,H=t*v.y[w.yanchor].offset,I=v.x[w.xanchor].sizing+v.y[w.yanchor].sizing;G=(C?C.r2p(w.x)+C._offset:w.x*A.w+A.l)+G;A=(x?x.r2p(w.y)+x._offset:A.h-w.y*A.h+A.t)+H;switch(w.sizing){case "fill":I+=" slice";break;case "stretch":I="none"}D.attr({x:G,y:A,width:B,height:t,preserveAspectRatio:I,opacity:w.opacity});w=(C?C._id:"")+(x?x._id:"");n.setClipUrl(D,w?"clip"+l._uid+w:null,a)}var l=a._fullLayout,k=[],c={},e=[],g;for(g=0;g<l.images.length;g++){var m=
l.images[g];if(m.visible)if("below"===m.layer&&"paper"!==m.xref&&"paper"!==m.yref){var r=m.xref+m.yref;var u=l._plots[r];u?(u.mainplot&&(r=u.mainplot.id),c[r]||(c[r]=[]),c[r].push(m)):e.push(m)}else"above"===m.layer?k.push(m):e.push(m)}var v={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};g=l._imageLowerLayer.selectAll("image").data(e);r=l._imageUpperLayer.selectAll("image").data(k);
g.enter().append("image");r.enter().append("image");g.exit().remove();r.exit().remove();g.each(function(w){f.bind(this)(w);d.bind(this)(w)});r.each(function(w){f.bind(this)(w);d.bind(this)(w)});k=Object.keys(l._plots);for(g=0;g<k.length;g++)r=k[g],e=l._plots[r],e.imagelayer&&(r=e.imagelayer.selectAll("image").data(c[r]||[]),r.enter().append("image"),r.exit().remove(),r.each(function(w){f.bind(this)(w);d.bind(this)(w)}))}},{"../../constants/xmlns_namespaces":725,"../../plots/cartesian/axes":797,"../drawing":637,
d3:169}],664:[function(b,y,F){y.exports={moduleType:"component",name:"images",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("images"),draw:b("./draw"),convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":809,"./attributes":660,"./convert_coords":661,"./defaults":662,"./draw":663}],665:[function(b,y,F){F=b("../../plots/font_attributes");b=b("../color/attributes");y.exports={bgcolor:{valType:"color",
editType:"legend"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:F({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},
itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},
uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:F({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":825,"../color/attributes":614}],666:[function(b,y,F){y.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,
scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,textGap:40,itemGap:5}},{}],667:[function(b,y,F){var q=b("../../registry"),n=b("../../lib"),p=b("../../plot_api/plot_template"),h=b("./attributes"),a=b("../../plots/layout_attributes"),f=b("./helpers");y.exports=function(d,l,k){function c(D,C){return n.coerce(e,w,h,D,C)}for(var e=d.legend||{},g=0,m=!1,r="normal",u=0;u<k.length;u++){var v=k[u];if(v.visible){if(v.showlegend||v._dfltShowLegend&&!(v._module&&v._module.attributes&&v._module.attributes.showlegend&&
!1===v._module.attributes.showlegend.dflt))g++,v.showlegend&&(m=!0,(q.traceIs(v,"pie-like")||!0===v._input.showlegend)&&g++);if(q.traceIs(v,"bar")&&"stack"===l.barmode||-1!==["tonextx","tonexty"].indexOf(v.fill))r=f.isGrouped({traceorder:r})?"grouped+reversed":"reversed";void 0!==v.legendgroup&&""!==v.legendgroup&&(r=f.isReversed({traceorder:r})?"reversed+grouped":"grouped")}}k=n.coerce(d,l,a,"showlegend",m&&1<g);if(!1!==k||e.uirevision){var w=p.newContainer(l,"legend");c("uirevision",l.uirevision);
!1!==k&&(c("bgcolor",l.paper_bgcolor),c("bordercolor"),c("borderwidth"),n.coerceFont(c,"font",l.font),k=c("orientation"),"h"===k?(g=0,q.getComponentMethod("rangeslider","isVisible")(d.xaxis)?(d=1.1,m="bottom"):(d=-.1,m="top")):(g=1.02,d=1,m="auto"),c("traceorder",r),f.isGrouped(l.legend)&&c("tracegroupgap"),c("itemsizing"),c("itemclick"),c("itemdoubleclick"),c("x",g),c("xanchor"),c("y",d),c("yanchor",m),c("valign"),n.noneOrAll(e,w,["x","y"]),c("title.text")&&(c("title.side","h"===k?"left":"top"),
n.coerceFont(c,"title.font",l.font)))}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/layout_attributes":851,"../../registry":880,"./attributes":665,"./helpers":671}],668:[function(b,y,F){function q(L,E,K,N,O){var Q=K.data()[0][0].trace;O={event:O,node:K.node(),curveNumber:Q.index,expandedIndex:Q._expandedIndex,data:L.data,layout:L.layout,frames:L._transitionData._frames,config:L._context,fullData:L._fullData,fullLayout:L._fullLayout};Q._group&&(O.group=Q._group);r.traceIs(Q,"pie-like")&&
(O.label=K.datum()[0].label);!1!==u.triggerHandler(L,"plotly_legendclick",O)&&(1===N?E._clickTimeout=setTimeout(function(){x(K,L,N)},L._context.doubleClickDelay):2===N&&(E._clickTimeout&&clearTimeout(E._clickTimeout),L._legendMouseDownTime=0,!1!==u.triggerHandler(L,"plotly_legenddoubleclick",O)&&x(K,L,N)))}function n(L,E,K){var N=L.data()[0][0],O=N.trace,Q=r.traceIs(O,"pie-like"),P=O.index,T=K._main&&E._context.edits.legendText&&!Q,V=K._maxNameLength;K.entries?Q=N.text:(Q=Q?N.label:O.name,O._meta&&
(Q=g.templateString(Q,O._meta)));O=g.ensureSingle(L,"text","legendtext");O.attr("text-anchor","start").classed("user-select-none",!0).call(w.font,K.font).text(T?p(Q,V):Q);C.positionText(O,A.textGap,0);if(T)O.call(C.makeEditable,{gd:E,text:Q}).call(a,L,E,K).on("edit",function(aa){this.text(p(aa,V)).call(a,L,E,K);var ba=N.trace._fullInput||{},Y={};r.hasTransform(ba,"groupby")?(Y=r.getTransformIndices(ba,"groupby"),ba=g.keyedContainer(ba,"transforms["+Y[Y.length-1]+"].styles","target","value.name"),
ba.set(N.trace._group,aa),Y=ba.constructUpdate()):Y.name=aa;return r.call("_guiRestyle",E,Y,P)});else a(O,L,E,K)}function p(L,E){E=Math.max(4,E);if(L&&L.trim().length>=E/2)return L;L=L||"";for(E-=L.length;0<E;E--)L+=" ";return L}function h(L,E){var K=E._context.doubleClickDelay,N,O=1,Q=g.ensureSingle(L,"rect","legendtoggle",function(P){P.style("cursor","pointer").attr("pointer-events","all").call(D.fill,"rgba(0,0,0,0)")});Q.on("mousedown",function(){N=(new Date).getTime();N-E._legendMouseDownTime<
K?O+=1:(O=1,E._legendMouseDownTime=N)});Q.on("mouseup",function(){if(!E._dragged&&!E._editing){var P=E._fullLayout.legend;(new Date).getTime()-E._legendMouseDownTime>K&&(O=Math.max(O-1,1));q(E,P,L,O,e.event)}})}function a(L,E,K,N){N._main||L.attr("data-notex",!0);C.convertToTspans(L,K,function(){var O=N,Q=E.data()[0][0];if(O._main&&Q&&!Q.trace.showlegend)E.remove();else{var P=E.select("g[class*\x3dmath-group]"),T=P.node();O||(O=K._fullLayout.legend);var V=O.borderwidth,aa=(Q?O:O.title).font.size*
B;if(T){var ba=w.bBox(T);T=ba.height;ba=ba.width;Q?w.setTranslate(P,0,.25*T):w.setTranslate(P,V,.75*T+V)}else{P=E.select(Q?".legendtext":".legendtitletext");var Y=C.lineCount(P);ba=P.node();T=aa*Y;ba=ba?w.bBox(ba).width:0;Q?C.positionText(P,A.textGap,-(aa*((Y-1)/2-.3))):C.positionText(P,A.titlePad+V,aa+V)}Q?(Q.lineHeight=aa,Q.height=Math.max(T,16)+3,Q.width=ba):(O._titleWidth=ba,O._titleHeight=T)}})}function f(L){var E=0,K=0,N=L.title.side;N&&(-1!==N.indexOf("left")&&(E=L._titleWidth),-1!==N.indexOf("top")&&
(K=L._titleHeight));return[E,K]}function d(L,E,K,N){var O=L._fullLayout;N||(N=O.legend);var Q=O._size,P=J.isVertical(N),T=J.isGrouped(N),V=N.borderwidth,aa=2*V,ba=A.textGap,Y=A.itemGap,ea=2*(V+Y),da=c(N),ca=0>N.y||0===N.y&&"top"===da,la=1<N.y||1===N.y&&"bottom"===da;N._maxHeight=Math.max(ca||la?O.height/2:Q.h,30);var pa=0;N._width=0;N._height=0;var qa=f(N);if(P)K.each(function(ib){var Pa=ib[0].height;w.setTranslate(this,V+qa[0],V+qa[1]+N._height+Pa/2+Y);N._height+=Pa;N._width=Math.max(N._width,ib[0].width)}),
pa=ba+N._width,N._width+=Y+ba+aa,N._height+=ea,T&&(E.each(function(ib,Pa){w.setTranslate(this,0,Pa*N.tracegroupgap)}),N._height+=(N._lgroupsLength-1)*N.tracegroupgap);else{da=k(N);var oa=1<N.x||1===N.x&&"left"===da;ca=la||ca;O=O.width/2;N._maxWidth=Math.max(0>N.x||0===N.x&&"right"===da?ca&&"left"===da?Q.l+Q.w:O:oa?ca&&"right"===da?Q.r+Q.w:O:Q.w,2*ba);var ka=0,ra=0;K.each(function(ib){ib=ib[0].width+ba;ka=Math.max(ka,ib);ra+=ib});pa=null;var ha=0;if(T){var ma=0,wa=0,na=0;E.each(function(){var ib=0,
Pa=0;e.select(this).selectAll("g.traces").each(function(tb){var Aa=tb[0].height;w.setTranslate(this,qa[0],qa[1]+V+Y+Aa/2+Pa);Pa+=Aa;ib=Math.max(ib,ba+tb[0].width)});ma=Math.max(ma,Pa);var sb=ib+Y;sb+V+wa>N._maxWidth&&(ha=Math.max(ha,wa),wa=0,na+=ma+N.tracegroupgap,ma=Pa);w.setTranslate(this,wa,na);wa+=sb});N._width=Math.max(ha,wa)+V;N._height=na+ma+ea}else{E=K.size();var ya=ra+aa+(E-1)*Y<N._maxWidth,Fa=0,Ha=0,eb=0,hb=0;K.each(function(ib){var Pa=ib[0].height;ib=ba+ib[0].width;var sb=(ya?ib:ka)+Y;
sb+V+Ha>N._maxWidth&&(ha=Math.max(ha,hb),Ha=0,eb+=Fa,N._height+=Fa,Fa=0);w.setTranslate(this,qa[0]+V+Ha,qa[1]+V+eb+Pa/2+Y);hb=Ha+ib+Y;Ha+=sb;Fa=Math.max(Fa,Pa)});ya?(N._width=Ha+aa,N._height=Fa+ea):(N._width=Math.max(ha,hb)+aa,N._height+=Fa+ea)}}N._width=Math.ceil(Math.max(N._width+qa[0],N._titleWidth+2*(V+A.titlePad)));N._height=Math.ceil(Math.max(N._height+qa[1],N._titleHeight+2*(V+A.itemGap)));N._effHeight=Math.min(N._height,N._maxHeight);L=L._context.edits;var ob=L.legendText||L.legendPosition;
K.each(function(ib){var Pa=e.select(this).select(".legendtoggle"),sb=ib[0].height;ib=ob?ba:pa||ba+ib[0].width;P||(ib+=Y/2);w.setRect(Pa,0,-sb/2,ib,sb)})}function l(L){var E=L._fullLayout.legend,K=k(E),N=c(E);return m.autoMargin(L,"legend",{x:E.x,y:E.y,l:E._width*t[K],r:E._width*G[K],b:E._effHeight*G[N],t:E._effHeight*t[N]})}function k(L){return g.isRightAnchor(L)?"right":g.isCenterAnchor(L)?"center":"left"}function c(L){return g.isBottomAnchor(L)?"bottom":g.isMiddleAnchor(L)?"middle":"top"}var e=
b("d3"),g=b("../../lib"),m=b("../../plots/plots"),r=b("../../registry"),u=b("../../lib/events"),v=b("../dragelement"),w=b("../drawing"),D=b("../color"),C=b("../../lib/svg_text_utils"),x=b("./handle_click"),A=b("./constants");F=b("../../constants/alignment");var B=F.LINE_SPACING,t=F.FROM_TL,G=F.FROM_BR,H=b("./get_legend_data"),I=b("./style"),J=b("./helpers");y.exports=function(L,E){var K=L._fullLayout,N="legend"+K._uid;if(E){var O=E.layer;N+="-hover"}else E=K.legend||{},E._main=!0,O=K._infolayer;if(O){L._legendMouseDownTime||
(L._legendMouseDownTime=0);if(E._main){if(!L.calcdata)return;var Q=K.showlegend&&H(L.calcdata,E)}else{if(!E.entries)return;Q=H(E.entries,E)}var P=K.hiddenlabels||[];if(E._main&&(!K.showlegend||!Q.length))return O.selectAll(".legend").remove(),K._topdefs.select("#"+N).remove(),m.autoMargin(L,"legend");var T=g.ensureSingle(O,"g","legend",function(pa){E._main&&pa.attr("pointer-events","all")}),V=g.ensureSingleById(K._topdefs,"clipPath",N,function(pa){pa.append("rect")}),aa=g.ensureSingle(T,"rect","bg",
function(pa){pa.attr("shape-rendering","crispEdges")});aa.call(D.stroke,E.bordercolor).call(D.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px");var ba=g.ensureSingle(T,"g","scrollbox"),Y=E.title;E._titleWidth=0;E._titleHeight=0;if(Y.text){var ea=g.ensureSingle(ba,"text","legendtitletext");ea.attr("text-anchor","start").classed("user-select-none",!0).call(w.font,Y.font).text(Y.text);a(ea,ba,L,E)}else ba.selectAll(".legendtitletext").remove();var da=g.ensureSingle(T,"rect","scrollbar",function(pa){pa.attr(A.scrollBarEnterAttrs).call(D.fill,
A.scrollBarColor)}),ca=ba.selectAll("g.groups").data(Q);ca.enter().append("g").attr("class","groups");ca.exit().remove();var la=ca.selectAll("g.traces").data(g.identity);la.enter().append("g").attr("class","traces");la.exit().remove();la.style("opacity",function(pa){var qa=pa[0].trace;return r.traceIs(qa,"pie-like")?-1!==P.indexOf(pa[0].label)?.5:1:"legendonly"===qa.visible?.5:1}).each(function(){e.select(this).call(n,L,E)}).call(I,L,E).each(function(){E._main&&e.select(this).call(h,L)});g.syncOrAsync([m.previousPromises,
function(){return d(L,ca,la,E)},function(){function pa(Aa,Ka,Qa){E._scrollY=L._fullLayout.legend._scrollY=Aa;w.setTranslate(ba,0,-Aa);w.setRect(da,E._width,A.scrollBarMargin+Aa*Qa,A.scrollBarWidth,Ka);V.select("rect").attr("y",oa+Aa)}if(!E._main||!l(L)){var qa=K._size,oa=E.borderwidth,ka=qa.l+qa.w*E.x-t[k(E)]*E._width,ra=qa.t+qa.h*(1-E.y)-t[c(E)]*E._effHeight;if(E._main&&K.margin.autoexpand){var ha=ka,ma=ra;ka=g.constrain(ka,0,K.width-E._width);ra=g.constrain(ra,0,K.height-E._effHeight);ka!==ha&&
g.log("Constrain legend.x to make legend fit inside graph");ra!==ma&&g.log("Constrain legend.y to make legend fit inside graph")}E._main&&w.setTranslate(T,ka,ra);da.on(".drag",null);T.on("wheel",null);if(!E._main||E._height<=E._maxHeight||L._context.staticPlot)ka=E._effHeight,E._main||(ka=E._height),aa.attr({width:E._width-oa,height:ka-oa,x:oa/2,y:oa/2}),w.setTranslate(ba,0,0),V.select("rect").attr({width:E._width-2*oa,height:ka-2*oa,x:oa,y:oa}),w.setClipUrl(ba,N,L),w.setRect(da,0,0,0,0),delete E._scrollY;
else{var wa=Math.max(A.scrollBarMinHeight,E._effHeight*E._effHeight/E._height),na=E._effHeight-wa-2*A.scrollBarMargin,ya=E._height-E._effHeight,Fa=na/ya,Ha=Math.min(E._scrollY||0,ya);aa.attr({width:E._width-2*oa+A.scrollBarWidth+A.scrollBarMargin,height:E._effHeight-oa,x:oa/2,y:oa/2});V.select("rect").attr({width:E._width-2*oa+A.scrollBarWidth+A.scrollBarMargin,height:E._effHeight-2*oa,x:oa,y:oa+Ha});w.setClipUrl(ba,N,L);pa(Ha,wa,Fa);T.on("wheel",function(){Ha=g.constrain(E._scrollY+e.event.deltaY/
na*ya,0,ya);pa(Ha,wa,Fa);0!==Ha&&Ha!==ya&&e.event.preventDefault()});var eb,hb,ob;ka=e.behavior.drag().on("dragstart",function(){var Aa=e.event.sourceEvent;eb="touchstart"===Aa.type?Aa.changedTouches[0].clientY:Aa.clientY;ob=Ha}).on("drag",function(){var Aa=e.event.sourceEvent;2===Aa.buttons||Aa.ctrlKey||(hb="touchmove"===Aa.type?Aa.changedTouches[0].clientY:Aa.clientY,Ha=g.constrain((hb-eb)/Fa+ob,0,ya),pa(Ha,wa,Fa))});da.call(ka);ka=e.behavior.drag().on("dragstart",function(){var Aa=e.event.sourceEvent;
"touchstart"===Aa.type&&(eb=Aa.changedTouches[0].clientY,ob=Ha)}).on("drag",function(){var Aa=e.event.sourceEvent;"touchmove"===Aa.type&&(hb=Aa.changedTouches[0].clientY,Ha=g.constrain((eb-hb)/Fa+ob,0,ya),pa(Ha,wa,Fa))});ba.call(ka)}if(L._context.edits.legendPosition){var ib,Pa,sb,tb;T.classed("cursor-move",!0);v.init({element:T.node(),gd:L,prepFn:function(){var Aa=w.getTranslate(T);sb=Aa.x;tb=Aa.y},moveFn:function(Aa,Ka){Aa=sb+Aa;Ka=tb+Ka;w.setTranslate(T,Aa,Ka);ib=v.align(Aa,0,qa.l,qa.l+qa.w,E.xanchor);
Pa=v.align(Ka,0,qa.t+qa.h,qa.t,E.yanchor)},doneFn:function(){void 0!==ib&&void 0!==Pa&&r.call("_guiRelayout",L,{"legend.x":ib,"legend.y":Pa})},clickFn:function(Aa,Ka){var Qa=O.selectAll("g.traces").filter(function(){var Xa=this.getBoundingClientRect();return Ka.clientX>=Xa.left&&Ka.clientX<=Xa.right&&Ka.clientY>=Xa.top&&Ka.clientY<=Xa.bottom});0<Qa.size()&&q(L,T,Qa,Aa,Ka)}})}}}],L)}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/events":738,"../../lib/svg_text_utils":773,"../../plots/plots":860,
"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"./constants":666,"./get_legend_data":669,"./handle_click":670,"./helpers":671,"./style":673,d3:169}],669:[function(b,y,F){var q=b("../../registry"),n=b("./helpers");y.exports=function(p,h){function a(C,x){""!==C&&n.isGrouped(h)?-1===d.indexOf(C)?(d.push(C),l=!0,f[C]=[[x]]):f[C].push([x]):(C="~~i"+c,d.push(C),f[C]=[[x]],c++)}var f={},d=[],l=!1,k={},c=0,e=0,g,m=h._main;for(g=0;g<p.length;g++){var r=p[g];var u=r[0];var v=u.trace,
w=v.legendgroup;if(!m||v.visible&&v.showlegend)if(q.traceIs(v,"pie-like"))for(k[w]||(k[w]={}),u=0;u<r.length;u++){var D=r[u].label;k[w][D]||(a(w,{label:D,color:r[u].color,i:r[u].i,trace:v,pts:r[u].pts}),k[w][D]=!0,e=Math.max(e,(D||"").length))}else a(w,u),e=Math.max(e,(v.name||"").length)}if(!d.length)return[];p=d.length;if(l&&n.isGrouped(h))for(m=Array(p),g=0;g<p;g++)k=f[d[g]],m[g]=n.isReversed(h)?k.reverse():k;else{m=[Array(p)];for(g=0;g<p;g++)k=f[d[g]][0],m[0][n.isReversed(h)?p-g-1:g]=k;p=1}h._lgroupsLength=
p;h._maxNameLength=e;return m}},{"../../registry":880,"./helpers":671}],670:[function(b,y,F){var q=b("../../lib"),n=b("../../registry"),p=!0;y.exports=function(h,a,f){function d(B,t,G){var H=u.indexOf(B),I=r[t];I||(I=r[t]=[]);-1===u.indexOf(B)&&(u.push(B),H=u.length-1);I[H]=G;return H}function l(B,t){var G=B._fullInput;if(n.hasTransform(G,"groupby")){var H=v[G.index];H||(H=n.getTransformIndices(G,"groupby"),H=q.keyedContainer(G,"transforms["+H[H.length-1]+"].styles","target","value.visible"),v[G.index]=
H);var I=H.get(B._group);void 0===I&&(I=!0);!1!==I&&H.set(B._group,t);w[G.index]=d(G.index,"visible",!1===G.visible?!1:!0)}else d(G.index,"visible",!1===G.visible?!1:t)}var k=a._fullLayout;if(!a._dragged&&!a._editing){var c=k.legend.itemclick,e=k.legend.itemdoubleclick;1===f&&"toggle"===c&&"toggleothers"===e&&p&&a.data&&a._context.showTips&&q.notifier(q._(a,"Double-click on legend to isolate one trace"),"long");p=!1;var g;1===f?g=c:2===f&&(g=e);if(g){var m=k.hiddenlabels?k.hiddenlabels.slice():[];
h=h.data()[0][0];f=a._fullData;k=h.trace;c=k.legendgroup;var r={},u=[],v=[],w=[];if(n.traceIs(k,"pie-like")){var D=h.label;h=m.indexOf(D);"toggle"===g?-1===h?m.push(D):m.splice(h,1):"toggleothers"===g&&(m=[],a.calcdata[0].forEach(function(B){D!==B.label&&m.push(B.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===m.length&&-1===h&&(m=[]));n.call("_guiRelayout",a,"hiddenlabels",m)}else{e=c&&c.length;var C=[];if(e)for(h=0;h<f.length;h++){var x=f[h];x.visible&&x.legendgroup===c&&
C.push(h)}if("toggle"===g){switch(k.visible){case !0:var A="legendonly";break;case !1:A=!1;break;case "legendonly":A=!0}if(e)for(h=0;h<f.length;h++)!1!==f[h].visible&&f[h].legendgroup===c&&l(f[h],A);else l(k,A)}else if("toggleothers"===g){C=!0;for(h=0;h<f.length;h++)if(x=f[h]===k,g=!0!==f[h].showlegend,!(x||g||(x=e&&f[h].legendgroup===c,x||!0!==f[h].visible||n.traceIs(f[h],"notLegendIsolatable")))){C=!1;break}for(h=0;h<f.length;h++)if(!1!==f[h].visible&&!n.traceIs(f[h],"notLegendIsolatable"))switch(k.visible){case "legendonly":l(f[h],
!0);break;case !0:A=C?!0:"legendonly",x=f[h]===k,g=!0!==f[h].showlegend&&!f[h].legendgroup,x=x||e&&f[h].legendgroup===c,l(f[h],x||g?!0:A)}}for(h=0;h<v.length;h++)if(g=v[h])for(c=g.constructUpdate(),A=Object.keys(c),g=0;g<A.length;g++)f=A[g],k=r[f]=r[f]||[],k[w[h]]=c[f];k=Object.keys(r);for(h=0;h<k.length;h++)for(f=k[h],g=0;g<u.length;g++)r[f].hasOwnProperty(g)||(r[f][g]=void 0);n.call("_guiRestyle",a,r,u)}}}}},{"../../lib":749,"../../registry":880}],671:[function(b,y,F){F.isGrouped=function(q){return-1!==
(q.traceorder||"").indexOf("grouped")};F.isVertical=function(q){return"h"!==q.orientation};F.isReversed=function(q){return-1!==(q.traceorder||"").indexOf("reversed")}},{}],672:[function(b,y,F){y.exports={moduleType:"component",name:"legend",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw"),style:b("./style")}},{"./attributes":665,"./defaults":667,"./draw":668,"./style":673}],673:[function(b,y,F){function q(e,g){return(g?"radial":"horizontal")+(e?"":"reversed")}
var n=b("d3"),p=b("../../registry"),h=b("../../lib"),a=b("../drawing"),f=b("../color"),d=b("../colorscale/helpers").extractOpts,l=b("../../traces/scatter/subtypes"),k=b("../../traces/pie/style_one"),c=b("../../traces/pie/helpers").castOption;y.exports=function(e,g,m){function r(C,x,A){var B=C[0].trace,t=B.marker||{},G=t.line||{};B=A?B.visible&&B.type===A:p.traceIs(B,"bar");C=n.select(x).select("g.legendpoints").selectAll("path.legend"+A).data(B?[C]:[]);C.enter().append("path").classed("legend"+A,
!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");C.exit().remove();C.each(function(H){var I=n.select(this);H=H[0];var J=D(H.mlw,t.line,5,2);I.style("stroke-width",J+"px").call(f.fill,H.mc||t.color);J&&f.stroke(I,H.mlc||G.color)})}function u(C,x,A){var B=C[0],t=B.trace,G=A?t.visible&&t.type===A:p.traceIs(t,A);C=n.select(x).select("g.legendpoints").selectAll("path.legend"+A).data(G?[C]:[]);C.enter().append("path").classed("legend"+A,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");
C.exit().remove();C.size()&&(A=(t.marker||{}).line,x=D(c(A.width,B.pts),A,5,2),t=h.minExtend(t,{marker:{line:{width:x}}}),t.marker.line.color=A.color,B=h.minExtend(B,{trace:t}),k(C,B,t))}var v=g._fullLayout;m||(m=v.legend);var w="constant"===m.itemsizing,D=function(C,x,A,B){if(!(C+1))if(x&&0<x.width)C=x.width;else return 0;return w?B:Math.min(C,A)};e.each(function(C){var x=n.select(this);x=h.ensureSingle(x,"g","layers");x.style("opacity",C[0].trace.opacity);var A=m.valign,B=C[0].lineHeight,t=C[0].height;
"middle"!==A&&B&&t?x.attr("transform","translate(0,"+.5*{top:1,bottom:-1}[A]*(B-t+3)+")"):x.attr("transform",null);x.selectAll("g.legendfill").data([C]).enter().append("g").classed("legendfill",!0);x.selectAll("g.legendlines").data([C]).enter().append("g").classed("legendlines",!0);x=x.selectAll("g.legendsymbols").data([C]);x.enter().append("g").classed("legendsymbols",!0);x.selectAll("g.legendpoints").data([C]).enter().append("g").classed("legendpoints",!0)}).each(function(C){var x=C[0].trace;C=
[];if(x.visible)switch(x.type){case "histogram2d":case "heatmap":C=[["M-15,-2V4H15V-2Z"]];var A=!0;break;case "choropleth":case "choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]];A=!0;break;case "densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];A="radial";break;case "cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];A=!1;break;case "streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],
["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];A=!1;break;case "surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];A=!0;break;case "mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];A=!1;break;case "volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];A=!0;break;case "isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],A=!1}C=n.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);
C.enter().append("path").classed("legend3dandfriends",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);C.exit().remove();C.each(function(B,t){var G=n.select(this),H=d(x),I=H.colorscale,J=H.reversescale;H=function(E){E.size()&&a.gradient(E,g,"legendfill-"+x.uid,q(J,"radial"===A),I,"fill")};if(I)A||(L=I.length,L=0===t?I[J?L-1:0][1]:1===t?I[J?0:L-1][1]:I[Math.floor((L-1)/2)][1]);else{var L=x.vertexcolor||x.facecolor||x.color;L=h.isArrayOrTypedArray(L)?L[t]||L[0]:L}G.attr("d",B[0]);
L?G.call(f.fill,L):G.call(H)})}).each(function(C){var x=C[0].trace,A="waterfall"===x.type;if(C[0]._distinct&&A)return A=C[0].trace[C[0].dir].marker,C[0].mc=A.color,C[0].mlw=A.line.width,C[0].mlc=A.line.color,r(C,this,"waterfall");var B=[];x.visible&&A&&(B=C[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);C=n.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(B);
C.enter().append("path").classed("legendwaterfall",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);C.exit().remove();C.each(function(t){var G=n.select(this),H=x[t[0]].marker,I=D(void 0,H.line,5,2);G.attr("d",t[1]).style("stroke-width",I+"px").call(f.fill,H.color);I&&G.call(f.stroke,H.line.color)})}).each(function(C){r(C,this,"funnel")}).each(function(C){r(C,this)}).each(function(C){var x=C[0].trace,A=n.select(this).select("g.legendpoints").selectAll("path.legendbox").data(x.visible&&
p.traceIs(x,"box-violin")?[C]:[]);A.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");A.exit().remove();A.each(function(){var B=n.select(this);if("all"!==x.boxpoints&&"all"!==x.points||0!==f.opacity(x.fillcolor)||0!==f.opacity((x.line||{}).color)){var t=D(void 0,x.line,5,2);B.style("stroke-width",t+"px").call(f.fill,x.fillcolor);t&&f.stroke(B,x.line.color)}else B=h.minExtend(x,{marker:{size:w?12:h.constrain(x.marker.size,2,16),sizeref:1,sizemin:1,
sizemode:"diameter"}}),A.call(a.pointStyle,B,g)})}).each(function(C){u(C,this,"funnelarea")}).each(function(C){u(C,this,"pie")}).each(function(C){var x=C[0],A=x.trace,B=A.visible&&A.fill&&"none"!==A.fill,t=l.hasLines(A),G=A.contours,H=!1,I=!1,J=d(A),L=J.colorscale,E=J.reversescale,K=function(Q){Q.size()&&a.gradient(Q,g,"legendfill-"+A.uid,q(E),L,"fill")};J=function(Q){if(Q.size()){var P="legendline-"+A.uid;a.lineGroupStyle(Q);a.gradient(Q,g,P,q(E),L,"stroke")}};if(G){var N=G.coloring;"lines"===N?
H=!0:t="none"===N||"heatmap"===N||G.showlines;if("constraint"===G.type)B="\x3d"!==G._operation;else if("fill"===N||"heatmap"===N)I=!0}G=l.hasMarkers(A)||l.hasText(A)||!B&&!I?"M5,0":t||H?"M5,-2":"M5,-3";N=n.select(this);C=N.select(".legendfill").selectAll("path").data(B||I?[C]:[]);C.enter().append("path").classed("js-fill",!0);C.exit().remove();C.attr("d",G+"h30v6h-30z").call(B?a.fillGroupStyle:K);if(t||H){B=D(void 0,A.line,10,5);B=h.minExtend(A,{line:{width:B}});var O=[h.minExtend(x,{trace:B})]}x=
N.select(".legendlines").selectAll("path").data(t||H?[O]:[]);x.enter().append("path").classed("js-line",!0);x.exit().remove();x.attr("d",G+(H?"l30,0.0001":"h30")).call(t?a.lineGroupStyle:J)}).each(function(C){function x(E,K,N,O){E=h.nestedProperty(t,E).get();K=h.isArrayOrTypedArray(E)&&K?K(E):E;w&&K&&void 0!==O&&(K=O);if(N){if(K<N[0])return N[0];if(K>N[1])return N[1]}return K}function A(E){return B._distinct&&B.index&&E[B.index]?E[B.index]:E[0]}var B=C[0],t=B.trace;C=l.hasMarkers(t);var G=l.hasText(t),
H=l.hasLines(t);if(C||G||H){var I={};var J={};if(C){I.mc=x("marker.color",A);I.mx=x("marker.symbol",A);I.mo=x("marker.opacity",h.mean,[.2,1]);I.mlc=x("marker.line.color",A);I.mlw=x("marker.line.width",h.mean,[0,5],2);J.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var L=x("marker.size",h.mean,[2,16],12);I.ms=L;J.marker.size=L}H&&(J.line={width:x("line.width",A,[0,10],5)});G&&(I.tx="Aa",I.tp=x("textposition",A),I.ts=10,I.tc=x("textfont.color",A),I.tf=x("textfont.family",A));I=[h.minExtend(B,I)];
J=h.minExtend(t,J);J.selectedpoints=null;J.texttemplate=null}H=n.select(this).select("g.legendpoints");L=H.selectAll("path.scatterpts").data(C?I:[]);L.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)");L.exit().remove();L.call(a.pointStyle,J,g);C&&(I[0].mrc=3);C=H.selectAll("g.pointtext").data(G?I:[]);C.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)");C.exit().remove();C.selectAll("text").call(a.textPointStyle,
J,g)}).each(function(C){var x=C[0].trace;C=n.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(x.visible&&"candlestick"===x.type?[C,C]:[]);C.enter().append("path").classed("legendcandle",!0).attr("d",function(A,B){return B?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);C.exit().remove();C.each(function(A,B){A=n.select(this);B=x[B?"increasing":"decreasing"];var t=D(void 0,B.line,5,2);A.style("stroke-width",t+"px").call(f.fill,
B.fillcolor);t&&f.stroke(A,B.line.color)})}).each(function(C){var x=C[0].trace;C=n.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(x.visible&&"ohlc"===x.type?[C,C]:[]);C.enter().append("path").classed("legendohlc",!0).attr("d",function(A,B){return B?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);C.exit().remove();C.each(function(A,B){A=n.select(this);B=x[B?"increasing":"decreasing"];var t=D(void 0,B.line,5,2);A.style("fill",
"none").call(a.dashLine,B.line.dash,t);t&&f.stroke(A,B.line.color)})})}},{"../../lib":749,"../../registry":880,"../../traces/pie/helpers":1134,"../../traces/pie/style_one":1140,"../../traces/scatter/subtypes":1179,"../color":615,"../colorscale/helpers":626,"../drawing":637,d3:169}],674:[function(b,y,F){function q(v,w){var D=w.currentTarget,C=D.getAttribute("data-attr");w=D.getAttribute("data-val")||!0;var x=v._fullLayout,A={},B=g.list(v,null,!0),t=x._cartesianSpikesEnabled,G;if("zoom"===C){C="in"===
w?.5:2;D=(1+C)/2;var H=(1-C)/2;for(G=0;G<B.length;G++)if(C=B[G],!C.fixedrange){var I=C._name;if("auto"===w)A[I+".autorange"]=!0;else if("reset"===w){if(void 0===C._rangeInitial)A[I+".autorange"]=!0;else{var J=C._rangeInitial.slice();A[I+".range[0]"]=J[0];A[I+".range[1]"]=J[1]}void 0!==C._showSpikeInitial&&(A[I+".showspikes"]=C._showSpikeInitial,"on"!==t||C._showSpikeInitial||(t="off"))}else J=[C.r2l(C.range[0]),C.r2l(C.range[1])],J=[D*J[0]+H*J[1],D*J[1]+H*J[0]],A[I+".range[0]"]=C.l2r(J[0]),A[I+".range[1]"]=
C.l2r(J[1])}}else"hovermode"!==C||"x"!==w&&"y"!==w||(w=x._isHoriz?"y":"x",D.setAttribute("data-val",w)),A[C]=w;x._cartesianSpikesEnabled=t;c.call("_guiRelayout",v,A)}function n(v,w){w=w.currentTarget;var D=w.getAttribute("data-attr");w=w.getAttribute("data-val")||!0;var C=v._fullLayout._subplots.gl3d||[],x={};D=D.split(".");for(var A=0;A<C.length;A++)x[C[A]+"."+D[1]]=w;x.dragmode="pan"===w?w:"zoom";c.call("_guiRelayout",v,x)}function p(v,w){var D=w.currentTarget.getAttribute("data-attr");w="resetLastSave"===
D;D="resetDefault"===D;for(var C=v._fullLayout,x=C._subplots.gl3d||[],A={},B=0;B<x.length;B++){var t=x[B],G=t+".camera",H=t+".aspectratio",I=t+".aspectmode";t=C[t]._scene;if(w){A[G+".up"]=t.viewInitial.up;A[G+".eye"]=t.viewInitial.eye;A[G+".center"]=t.viewInitial.center;var J=!0}else D&&(A[G+".up"]=null,A[G+".eye"]=null,A[G+".center"]=null,J=!0);J&&(A[H+".x"]=t.viewInitial.aspectratio.x,A[H+".y"]=t.viewInitial.aspectratio.y,A[H+".z"]=t.viewInitial.aspectratio.z,A[I]=t.viewInitial.aspectmode)}c.call("_guiRelayout",
v,A)}function h(v,w){w=w.currentTarget;var D=w._previousVal;v=v._fullLayout;var C=v._subplots.gl3d||[],x=["xaxis","yaxis","zaxis"],A={},B={};if(D)B=D,w._previousVal=null;else{for(D=0;D<C.length;D++){var t=C[D],G=v[t],H=t+".hovermode";A[H]=G.hovermode;B[H]=!1;for(H=0;3>H;H++){var I=x[H],J=t+"."+I+".showspikes";B[J]=!1;A[J]=G[I].showspikes}}w._previousVal=A}return B}function a(v,w){var D=w.currentTarget;w=D.getAttribute("data-attr");D=D.getAttribute("data-val")||!0;for(var C=v._fullLayout,x=C._subplots.geo||
[],A=0;A<x.length;A++){var B=x[A],t=C[B];"zoom"===w&&(t=t.projection.scale,c.call("_guiRelayout",v,B+".projection.scale","in"===D?2*t:.5*t))}"reset"===w&&k(v,"geo")}function f(v){v=v._fullLayout;return v.hovermode?!1:v._has("cartesian")?v._isHoriz?"y":"x":"closest"}function d(v){var w=f(v);c.call("_guiRelayout",v,"hovermode",w)}function l(v,w){w=w.currentTarget.getAttribute("data-val");for(var D=v._fullLayout,C=D._subplots.mapbox||[],x={},A=0;A<C.length;A++){var B=C[A],t=D[B].zoom;x[B+".zoom"]="in"===
w?1.05*t:t/1.05}c.call("_guiRelayout",v,x)}function k(v,w){var D=v._fullLayout;w=D._subplots[w]||[];for(var C={},x=0;x<w.length;x++)for(var A=w[x],B=D[A]._subplot.viewInitial,t=Object.keys(B),G=0;G<t.length;G++){var H=t[G];C[A+"."+H]=B[H]}c.call("_guiRelayout",v,C)}var c=b("../../registry"),e=b("../../plots/plots"),g=b("../../plots/cartesian/axis_ids");F=b("../../fonts/ploticon");var m=b("../shapes/draw").eraseActiveShape,r=b("../../lib"),u=r._;b=y.exports={};b.toImage={name:"toImage",title:function(v){return"png"===
((v._context.toImageButtonOptions||{}).format||"png")?u(v,"Download plot as a png"):u(v,"Download plot")},icon:F.camera,click:function(v){var w=v._context.toImageButtonOptions,D={format:w.format||"png"};r.notifier(u(v,"Taking snapshot - this may take a few seconds"),"long");"svg"!==D.format&&r.isIE()&&(r.notifier(u(v,"IE only supports svg.  Changing format to svg."),"long"),D.format="svg");["filename","width","height","scale"].forEach(function(C){C in w&&(D[C]=w[C])});c.call("downloadImage",v,D).then(function(C){r.notifier(u(v,
"Snapshot succeeded")+" - "+C,"long")}).catch(function(){r.notifier(u(v,"Sorry, there was a problem downloading your snapshot!"),"long")})}};b.sendDataToCloud={name:"sendDataToCloud",title:function(v){return u(v,"Edit in Chart Studio")},icon:F.disk,click:function(v){e.sendDataToCloud(v)}};b.editInChartStudio={name:"editInChartStudio",title:function(v){return u(v,"Edit in Chart Studio")},icon:F.pencil,click:function(v){e.sendDataToCloud(v)}};b.zoom2d={name:"zoom2d",title:function(v){return u(v,"Zoom")},
attr:"dragmode",val:"zoom",icon:F.zoombox,click:q};b.pan2d={name:"pan2d",title:function(v){return u(v,"Pan")},attr:"dragmode",val:"pan",icon:F.pan,click:q};b.select2d={name:"select2d",title:function(v){return u(v,"Box Select")},attr:"dragmode",val:"select",icon:F.selectbox,click:q};b.lasso2d={name:"lasso2d",title:function(v){return u(v,"Lasso Select")},attr:"dragmode",val:"lasso",icon:F.lasso,click:q};b.drawclosedpath={name:"drawclosedpath",title:function(v){return u(v,"Draw closed freeform")},attr:"dragmode",
val:"drawclosedpath",icon:F.drawclosedpath,click:q};b.drawopenpath={name:"drawopenpath",title:function(v){return u(v,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:F.drawopenpath,click:q};b.drawline={name:"drawline",title:function(v){return u(v,"Draw line")},attr:"dragmode",val:"drawline",icon:F.drawline,click:q};b.drawrect={name:"drawrect",title:function(v){return u(v,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:F.drawrect,click:q};b.drawcircle={name:"drawcircle",title:function(v){return u(v,
"Draw circle")},attr:"dragmode",val:"drawcircle",icon:F.drawcircle,click:q};b.eraseshape={name:"eraseshape",title:function(v){return u(v,"Erase active shape")},icon:F.eraseshape,click:m};b.zoomIn2d={name:"zoomIn2d",title:function(v){return u(v,"Zoom in")},attr:"zoom",val:"in",icon:F.zoom_plus,click:q};b.zoomOut2d={name:"zoomOut2d",title:function(v){return u(v,"Zoom out")},attr:"zoom",val:"out",icon:F.zoom_minus,click:q};b.autoScale2d={name:"autoScale2d",title:function(v){return u(v,"Autoscale")},
attr:"zoom",val:"auto",icon:F.autoscale,click:q};b.resetScale2d={name:"resetScale2d",title:function(v){return u(v,"Reset axes")},attr:"zoom",val:"reset",icon:F.home,click:q};b.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(v){return u(v,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:F.tooltip_basic,gravity:"ne",click:q};b.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(v){return u(v,"Compare data on hover")},attr:"hovermode",val:function(v){return v._fullLayout._isHoriz?
"y":"x"},icon:F.tooltip_compare,gravity:"ne",click:q};b.zoom3d={name:"zoom3d",title:function(v){return u(v,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:F.zoombox,click:n};b.pan3d={name:"pan3d",title:function(v){return u(v,"Pan")},attr:"scene.dragmode",val:"pan",icon:F.pan,click:n};b.orbitRotation={name:"orbitRotation",title:function(v){return u(v,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:F["3d_rotate"],click:n};b.tableRotation={name:"tableRotation",title:function(v){return u(v,
"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:F["z-axis"],click:n};b.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(v){return u(v,"Reset camera to default")},attr:"resetDefault",icon:F.home,click:p};b.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(v){return u(v,"Reset camera to last save")},attr:"resetLastSave",icon:F.movie,click:p};b.hoverClosest3d={name:"hoverClosest3d",title:function(v){return u(v,"Toggle show closest data on hover")},attr:"hovermode",
val:null,toggle:!0,icon:F.tooltip_basic,gravity:"ne",click:function(v,w){w=h(v,w);c.call("_guiRelayout",v,w)}};b.zoomInGeo={name:"zoomInGeo",title:function(v){return u(v,"Zoom in")},attr:"zoom",val:"in",icon:F.zoom_plus,click:a};b.zoomOutGeo={name:"zoomOutGeo",title:function(v){return u(v,"Zoom out")},attr:"zoom",val:"out",icon:F.zoom_minus,click:a};b.resetGeo={name:"resetGeo",title:function(v){return u(v,"Reset")},attr:"reset",val:null,icon:F.autoscale,click:a};b.hoverClosestGeo={name:"hoverClosestGeo",
title:function(v){return u(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:F.tooltip_basic,gravity:"ne",click:d};b.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(v){return u(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:F.tooltip_basic,gravity:"ne",click:d};b.hoverClosestPie={name:"hoverClosestPie",title:function(v){return u(v,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:F.tooltip_basic,gravity:"ne",
click:d};b.resetViewSankey={name:"resetSankeyGroup",title:function(v){return u(v,"Reset view")},icon:F.home,click:function(v){for(var w={"node.groups":[],"node.x":[],"node.y":[]},D=0;D<v._fullData.length;D++){var C=v._fullData[D]._viewInitial;w["node.groups"].push(C.node.groups.slice());w["node.x"].push(C.node.x.slice());w["node.y"].push(C.node.y.slice())}c.call("restyle",v,w)}};b.toggleHover={name:"toggleHover",title:function(v){return u(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,
toggle:!0,icon:F.tooltip_basic,gravity:"ne",click:function(v,w){w=h(v,w);w.hovermode=f(v);c.call("_guiRelayout",v,w)}};b.resetViews={name:"resetViews",title:function(v){return u(v,"Reset views")},icon:F.home,click:function(v,w){var D=w.currentTarget;D.setAttribute("data-attr","zoom");D.setAttribute("data-val","reset");q(v,w);D.setAttribute("data-attr","resetLastSave");p(v,w);k(v,"geo");k(v,"mapbox")}};b.toggleSpikelines={name:"toggleSpikelines",title:function(v){return u(v,"Toggle Spike Lines")},
icon:F.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(v){var w=v._fullLayout;w._cartesianSpikesEnabled="on"===w._cartesianSpikesEnabled?"off":"on";w=c;for(var D=w.call,C="on"===v._fullLayout._cartesianSpikesEnabled,x=g.list(v,null,!0),A={},B=0;B<x.length;B++){var t=x[B];A[t._name+".showspikes"]=C?!0:t._showSpikeInitial}D.call(w,"_guiRelayout",v,A)}};b.resetViewMapbox={name:"resetViewMapbox",title:function(v){return u(v,"Reset view")},attr:"reset",icon:F.home,click:function(v){k(v,
"mapbox")}};b.zoomInMapbox={name:"zoomInMapbox",title:function(v){return u(v,"Zoom in")},attr:"zoom",val:"in",icon:F.zoom_plus,click:l};b.zoomOutMapbox={name:"zoomOutMapbox",title:function(v){return u(v,"Zoom out")},attr:"zoom",val:"out",icon:F.zoom_minus,click:l}},{"../../fonts/ploticon":728,"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../shapes/draw":696}],675:[function(b,y,F){F.manage=b("./manage")},{"./manage":676}],676:[function(b,y,F){function q(m){function r(T){if(T.length){for(var V=
[],aa=0;aa<T.length;aa++){var ba=T[aa];-1===D.indexOf(ba)&&V.push(e[ba])}N.push(V)}}var u=m._fullLayout,v=m._fullData,w=m._context,D=w.modeBarButtonsToRemove;m=w.modeBarButtonsToAdd;var C=u._has("cartesian"),x=u._has("gl3d"),A=u._has("geo"),B=u._has("pie"),t=u._has("funnelarea"),G=u._has("gl2d"),H=u._has("ternary"),I=u._has("mapbox"),J=u._has("polar"),L=u._has("sankey"),E=n(u),K=k(u.hovermode),N=[],O=["toImage"];w.showEditInChartStudio?O.push("editInChartStudio"):w.showSendToCloud&&O.push("sendDataToCloud");
r(O);w=[];O=[];var Q=[],P=[];1<(C||G||B||t||H)+A+x+I+J?(O=["toggleHover"],Q=["resetViews"]):A?(w=["zoomInGeo","zoomOutGeo"],O=["hoverClosestGeo"],Q=["resetGeo"]):x?(O=["hoverClosest3d"],Q=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(w=["zoomInMapbox","zoomOutMapbox"],O=["toggleHover"],Q=["resetViewMapbox"]):G?O=["hoverClosestGl2d"]:B?O=["hoverClosestPie"]:L?(O=["hoverClosestCartesian","hoverCompareCartesian"],Q=["resetViewSankey"]):O=["toggleHover"];C&&(O=["toggleSpikelines","hoverClosestCartesian",
"hoverCompareCartesian"]);if(h(v)||K)O=[];!C&&!G||E||(w=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==Q[0]&&(Q=["resetScale2d"]));x?P=["zoom3d","pan3d","orbitRotation","tableRotation"]:(C||G)&&!E||H?P=["zoom2d","pan2d"]:I||A?P=["pan2d"]:J&&(P=["zoom2d"]);p(v)&&P.push("select2d","lasso2d");if(Array.isArray(m)){v=[];for(C=0;C<m.length;C++)x=m[C],"string"===typeof x?-1!==g.indexOf(x)&&(u._has("mapbox")||u._has("cartesian"))&&P.push(x):v.push(x);m=v}r(P);r(w.concat(Q));r(O);return a(N,m)}function n(m){m=
f.list({_fullLayout:m},null,!0);for(var r=0;r<m.length;r++)if(!m[r].fixedrange)return!1;return!0}function p(m){for(var r=!1,u=0;u<m.length&&!r;u++){var v=m[u];if(v._module&&v._module.selectPoints)if(l.traceIs(v,"scatter-like")){if(d.hasMarkers(v)||d.hasText(v))r=!0}else if(l.traceIs(v,"box-violin")){if("all"===v.boxpoints||"all"===v.points)r=!0}else r=!0}return r}function h(m){for(var r=0;r<m.length;r++)if(!l.traceIs(m[r],"noHover"))return!1;return!0}function a(m,r){if(r.length)if(Array.isArray(r[0]))for(var u=
0;u<r.length;u++)m.push(r[u]);else m.push(r);return m}var f=b("../../plots/cartesian/axis_ids"),d=b("../../traces/scatter/subtypes"),l=b("../../registry"),k=b("../fx/helpers").isUnifiedHover,c=b("./modebar"),e=b("./buttons");y.exports=function(m){var r=m._fullLayout,u=m._context,v=r._modeBar;if(u.displayModeBar||u.watermark){if(!Array.isArray(u.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(u.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");
var w=u.modeBarButtons;if(Array.isArray(w)&&w.length)for(u=0;u<w.length;u++)for(var D=w[u],C=0;C<D.length;C++){var x=D[C];if("string"===typeof x)if(void 0!==e[x])w[u][C]=e[x];else throw Error("*modeBarButtons* configuration options invalid button name");}else w=!u.displayModeBar&&u.watermark?[]:q(m);v?v.update(m,w):r._modeBar=c(m,w)}else v&&(v.destroy(),delete r._modeBar)};var g="drawline drawopenpath drawclosedpath drawcircle drawrect eraseshape".split(" ")},{"../../plots/cartesian/axis_ids":800,
"../../registry":880,"../../traces/scatter/subtypes":1179,"../fx/helpers":651,"./buttons":674,"./modebar":677}],677:[function(b,y,F){function q(d){this.container=d.container;this.element=document.createElement("div");this.update(d.graphInfo,d.buttons);this.container.appendChild(this.element)}var n=b("d3"),p=b("fast-isnumeric"),h=b("../../lib"),a=b("../../fonts/ploticon"),f=new DOMParser;b=q.prototype;b.update=function(d,l){this.graphInfo=d;d=this.graphInfo._context;var k=this.graphInfo._fullLayout,
c="modebar-"+k._uid;this.element.setAttribute("id",c);this._uid=c;this.element.className="modebar";"hover"===d.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");"v"===k.modebar.orientation&&(this.element.className+=" vertical",l=l.reverse());var e=k.modebar,g="hover"===d.displayModeBar?".js-plotly-plot .plotly:hover ":"";h.deleteRelatedStyleRule(c);h.addRelatedStyleRule(c,g+"#"+c+" .modebar-group","background-color: "+e.bgcolor);h.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path",
"fill: "+e.color);h.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path","fill: "+e.activecolor);h.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+e.activecolor);c=!this.hasButtons(l);e=this.hasLogo!==d.displaylogo;g=this.locale!==d.locale;this.locale=d.locale;if(c||e||g)if(this.removeAllButtons(),this.updateButtons(l),d.watermark||d.displaylogo)l=this.getLogo(),d.watermark&&(l.className+=" watermark"),"v"===k.modebar.orientation?this.element.insertBefore(l,this.element.childNodes[0]):
this.element.appendChild(l),this.hasLogo=!0;this.updateActiveButton()};b.updateButtons=function(d){var l=this;this.buttons=d;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(k){var c=l.createGroup();k.forEach(function(e){var g=e.name;if(!g)throw Error("must provide button 'name' in button config");if(-1!==l.buttonsNames.indexOf(g))throw Error("button name '"+g+"' is taken");l.buttonsNames.push(g);e=l.createButton(e);l.buttonElements.push(e);c.appendChild(e)});l.element.appendChild(c)})};
b.createGroup=function(){var d=document.createElement("div");d.className="modebar-group";return d};b.createButton=function(d){var l=this,k=document.createElement("a");k.setAttribute("rel","tooltip");k.className="modebar-btn";var c=d.title;void 0===c?c=d.name:"function"===typeof c&&(c=c(this.graphInfo));(c||0===c)&&k.setAttribute("data-title",c);void 0!==d.attr&&k.setAttribute("data-attr",d.attr);c=d.val;void 0!==c&&("function"===typeof c&&(c=c(this.graphInfo)),k.setAttribute("data-val",c));if("function"!==
typeof d.click)throw Error("must provide button 'click' function in button config");k.addEventListener("click",function(e){d.click(l.graphInfo,e);l.updateActiveButton(e.currentTarget)});k.setAttribute("data-toggle",d.toggle||!1);d.toggle&&n.select(k).classed("active",!0);c=d.icon;"function"===typeof c?k.appendChild(c()):k.appendChild(this.createIcon(c||a.question));k.setAttribute("data-gravity",d.gravity||"n");return k};b.createIcon=function(d){var l=p(d.height)?Number(d.height):d.ascent-d.descent;
if(d.path){var k=document.createElementNS("http://www.w3.org/2000/svg","svg");k.setAttribute("viewBox",[0,0,d.width,l].join(" "));k.setAttribute("class","icon");l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",d.path);d.transform?l.setAttribute("transform",d.transform):void 0!==d.ascent&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+d.ascent+")");k.appendChild(l)}d.svg&&(k=f.parseFromString(d.svg,"application/xml").childNodes[0]);k.setAttribute("height","1em");
k.setAttribute("width","1em");return k};b.updateActiveButton=function(d){var l=this.graphInfo._fullLayout,k=void 0!==d?d.getAttribute("data-attr"):null;this.buttonElements.forEach(function(c){var e=c.getAttribute("data-val")||!0,g=c.getAttribute("data-attr"),m="true"===c.getAttribute("data-toggle");c=n.select(c);m?g===k&&c.classed("active",!c.classed("active")):(g=null===g?g:h.nestedProperty(l,g).get(),c.classed("active",g===e))})};b.hasButtons=function(d){var l=this.buttons;if(!l||d.length!==l.length)return!1;
for(var k=0;k<d.length;++k){if(d[k].length!==l[k].length)return!1;for(var c=0;c<d[k].length;c++)if(d[k][c].name!==l[k][c].name)return!1}return!0};b.getLogo=function(){var d=this.createGroup(),l=document.createElement("a");l.href="https://plotly.com/";l.target="_blank";l.setAttribute("data-title",h._(this.graphInfo,"Produced with Plotly"));l.className="modebar-btn plotlyjsicon modebar-btn--logo";l.appendChild(this.createIcon(a.newplotlylogo));d.appendChild(l);return d};b.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);
this.hasLogo=!1};b.destroy=function(){h.removeElement(this.container.querySelector(".modebar"));h.deleteRelatedStyleRule(this._uid)};y.exports=function(d,l){var k=d._fullLayout;d=new q({graphInfo:d,container:k._modebardiv.node(),buttons:l});k._privateplot&&n.select(d.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return d}},{"../../fonts/ploticon":728,"../../lib":749,d3:169,"fast-isnumeric":241}],678:[function(b,y,F){F=b("../../plots/font_attributes");var q=b("../color/attributes");
b=b("../../plot_api/plot_template").templatedArray;b=b("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});y.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,
x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:F({editType:"plot"}),bgcolor:{valType:"color",dflt:q.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:q.defaultLine,editType:"plot"},borderwidth:{valType:"number",
min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":787,"../../plots/font_attributes":825,"../color/attributes":614}],679:[function(b,y,F){y.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],680:[function(b,y,F){function q(k,c,e,g){function m(r,u){return p.coerce(k,c,d.buttons,r,u)}e=g.calendar;m("visible")&&(g=m("step"),"all"!==g&&(!e||"gregorian"===e||"month"!==g&&"year"!==g?m("stepmode"):c.stepmode="backward",m("count")),m("label"))}function n(k,
c,e){e=e.filter(function(u){return c[u].anchor===k._id});for(var g=0,m=0;m<e.length;m++){var r=c[e[m]].domain;r&&(g=Math.max(r[1],g))}return[k.domain[0],g+l.yPad]}var p=b("../../lib"),h=b("../color"),a=b("../../plot_api/plot_template"),f=b("../../plots/array_container_defaults"),d=b("./attributes"),l=b("./constants");y.exports=function(k,c,e,g,m){function r(w,D){return p.coerce(u,v,d,w,D)}var u=k.rangeselector||{},v=a.newContainer(c,"rangeselector");m=f(u,v,{name:"buttons",handleItemDefaults:q,calendar:m});
r("visible",0<m.length)&&(g=n(c,e,g),r("x",g[0]),r("y",g[1]),p.noneOrAll(k,c,["x","y"]),r("xanchor"),r("yanchor"),p.coerceFont(r,"font",e.font),k=r("bgcolor"),r("activecolor",h.contrast(k,l.lightAmount,l.darkAmount)),r("bordercolor"),r("borderwidth"))}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../color":615,"./attributes":678,"./constants":679}],681:[function(b,y,F){function q(A){A=u.list(A,"x",!0);for(var B=[],t=0;t<A.length;t++){var G=A[t];
G.rangeselector&&G.rangeselector.visible&&B.push(G)}return B}function n(A){return A._id}function p(A,B,t){if("all"===B.step)return!0===A.autorange;B=Object.keys(t);return A.range[0]===t[B[0]]&&A.range[1]===t[B[1]]}function h(A,B,t){A=m.ensureSingle(A,"rect","selector-rect",function(G){G.attr("shape-rendering","crispEdges")});A.attr({rx:C.rx,ry:C.ry});A.call(e.stroke,B.bordercolor).call(e.fill,t._isActive||t._isHovered?B.activecolor:B.bgcolor).style("stroke-width",B.borderwidth+"px")}function a(A,
B,t,G){m.ensureSingle(A,"text","selector-text",function(H){H.classed("user-select-none",!0).attr("text-anchor","middle")}).call(g.font,B.font).text(f(t,G._fullLayout._meta)).call(function(H){r.convertToTspans(H,G)})}function f(A,B){return A.label?B?m.templateString(A.label,B):A.label:"all"===A.step?"all":A.count+A.step.charAt(0)}function d(A,B,t,G,H){var I=0,J=0,L=t.borderwidth;B.each(function(){var O=l.select(this).select(".selector-text");O=Math.max(t.font.size*v*r.lineCount(O),16)+3;J=Math.max(J,
O)});B.each(function(){var O=l.select(this),Q=O.select(".selector-rect"),P=O.select(".selector-text"),T=P.node()&&g.bBox(P.node()).width,V=t.font.size*v,aa=r.lineCount(P);T=Math.max(T+10,C.minButtonWidth);O.attr("transform","translate("+(L+I)+","+L+")");Q.attr({x:0,y:0,width:T,height:J});r.positionText(P,T/2,J/2-(aa-1)*V/2+3);I+=T+5});var E=A._fullLayout._size;B=E.l+E.w*t.x;E=E.t+E.h*(1-t.y);var K="left";m.isRightAnchor(t)&&(B-=I,K="right");m.isCenterAnchor(t)&&(B-=I/2,K="center");var N="top";m.isBottomAnchor(t)&&
(E-=J,N="bottom");m.isMiddleAnchor(t)&&(E-=J/2,N="middle");I=Math.ceil(I);J=Math.ceil(J);B=Math.round(B);E=Math.round(E);c.autoMargin(A,G+"-range-selector",{x:t.x,y:t.y,l:I*w[K],r:I*D[K],b:J*D[N],t:J*w[N]});H.attr("transform","translate("+B+","+E+")")}var l=b("d3"),k=b("../../registry"),c=b("../../plots/plots"),e=b("../color"),g=b("../drawing"),m=b("../../lib"),r=b("../../lib/svg_text_utils"),u=b("../../plots/cartesian/axis_ids");F=b("../../constants/alignment");var v=F.LINE_SPACING,w=F.FROM_TL,D=
F.FROM_BR,C=b("./constants"),x=b("./get_update_object");y.exports=function(A){var B=A._fullLayout._infolayer.selectAll(".rangeselector").data(q(A),n);B.enter().append("g").classed("rangeselector",!0);B.exit().remove();B.style({cursor:"pointer","pointer-events":"all"});B.each(function(t){var G=l.select(this),H=t.rangeselector,I=G.selectAll("g.button").data(m.filterVisible(H.buttons));I.enter().append("g").classed("button",!0);I.exit().remove();I.each(function(J){var L=l.select(this),E=x(t,J);J._isActive=
p(t,J,E);L.call(h,H,J);L.call(a,H,J,A);L.on("click",function(){A._dragged||k.call("_guiRelayout",A,E)});L.on("mouseover",function(){J._isHovered=!0;L.call(h,H,J)});L.on("mouseout",function(){J._isHovered=!1;L.call(h,H,J)})});d(A,I,H,t._name,G)})}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../color":615,"../drawing":637,"./constants":679,"./get_update_object":682,d3:169}],682:[function(b,
y,F){var q=b("d3");y.exports=function(n,p){var h=n._name,a={};if("all"===p.step)a[h+".autorange"]=!0;else{var f=n.range,d=new Date(n.r2l(f[1])),l=p.step,k=p.count;switch(p.stepmode){case "backward":var c=n.l2r(+q.time[l].utc.offset(d,-k));break;case "todate":p=q.time[l].utc.offset(d,-k),c=n.l2r(+q.time[l].utc.ceil(p))}n=[c,f[1]];a[h+".range[0]"]=n[0];a[h+".range[1]"]=n[1]}return a}},{d3:169}],683:[function(b,y,F){y.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:b("./attributes")}}},
layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":678,"./defaults":680,"./draw":681}],684:[function(b,y,F){b=b("../color/attributes");y.exports={bgcolor:{valType:"color",dflt:b.background,editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",
items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":614}],685:[function(b,y,F){var q=b("../../plots/cartesian/axis_ids").list,n=b("../../plots/cartesian/autorange").getAutoRange,p=b("./constants");y.exports=function(h){for(var a=
q(h,"x",!0),f=0;f<a.length;f++){var d=a[f],l=d[p.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=n(h,d))}}},{"../../plots/cartesian/autorange":796,"../../plots/cartesian/axis_ids":800,"./constants":686}],686:[function(b,y,F){y.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",
grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",
grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],687:[function(b,y,F){var q=b("../../lib"),n=b("../../plot_api/plot_template"),p=b("../../plots/cartesian/axis_ids"),h=b("./attributes"),a=b("./oppaxis_attributes");y.exports=function(f,d,l){function k(D,C){return q.coerce(g,m,h,D,C)}function c(D,C){return q.coerce(u,v,a,D,C)}f=f[l];var e=d[l];if(f.rangeslider||d._requestRangeslider[e._id]){q.isPlainObject(f.rangeslider)||
(f.rangeslider={});var g=f.rangeslider,m=n.newContainer(e,"rangeslider");if(k("visible")){k("bgcolor",d.plot_bgcolor);k("bordercolor");k("borderwidth");k("thickness");k("autorange",!e.isValidRange(g.range));k("range");if(f=d._subplots)for(f=f.cartesian.filter(function(D){return D.substr(0,D.indexOf("y"))===p.name2id(l)}).map(function(D){return D.substr(D.indexOf("y"),D.length)}),f=q.simpleMap(f,p.id2name),e=0;e<f.length;e++){var r=f[e];var u=g[r]||{};var v=n.newContainer(m,r,"yaxis");r=d[r];var w;
u.range&&r.isValidRange(u.range)&&(w="fixed");"match"!==c("rangemode",w)&&c("range",r.range.slice())}m._input=g}}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/cartesian/axis_ids":800,"./attributes":684,"./oppaxis_attributes":691}],688:[function(b,y,F){function q(B,t,G,H){function I(){function K(Y){var ea=+(Y.clientX||Y.touches[0].clientX)-P;switch(Q){case J:var da="ew-resize";Y=V+ea;ea=aa+ea;break;case L:da="col-resize";Y=V+ea;ea=aa;break;case E:da="col-resize";Y=V;ea=aa+ea;
break;default:da="ew-resize",Y=T,ea=T+ea}if(ea<Y){var ca=ea;ea=Y;Y=ca}H._pixelMin=Y;H._pixelMax=ea;x(c.select(ba),da);n(B,t,G,H)}function N(){ba.removeEventListener("mousemove",K);ba.removeEventListener("mouseup",N);this.removeEventListener("touchmove",K);this.removeEventListener("touchend",N);m.removeElement(ba)}var O=c.event,Q=O.target,P=O.clientX||O.touches[0].clientX,T=P-B.node().getBoundingClientRect().left,V=H.d2p(G._rl[0]),aa=H.d2p(G._rl[1]),ba=C.coverSlip();this.addEventListener("touchmove",
K);this.addEventListener("touchend",N);ba.addEventListener("mousemove",K);ba.addEventListener("mouseup",N)}var J=B.select("rect."+A.slideBoxClassName).node(),L=B.select("rect."+A.grabAreaMinClassName).node(),E=B.select("rect."+A.grabAreaMaxClassName).node();B.on("mousedown",I);B.on("touchstart",I)}function n(B,t,G,H){var I=G.l2r(m.constrain(H.p2d(H._pixelMin),H._rl[0],H._rl[1])),J=G.l2r(m.constrain(H.p2d(H._pixelMax),H._rl[0],H._rl[1]));window.requestAnimationFrame(function(){e.call("_guiRelayout",
t,G._name+".range",[I,J])})}function p(B,t,G,H,I,J){t=A.handleWidth/2;var L=m.constrain(H.d2p(G._rl[0]),0,H._width);G=m.constrain(H.d2p(G._rl[1]),0,H._width);B.select("rect."+A.slideBoxClassName).attr("x",L).attr("width",G-L);B.select("rect."+A.maskMinClassName).attr("width",L);B.select("rect."+A.maskMaxClassName).attr("x",G).attr("width",H._width-G);"match"!==J.rangemode&&(J=H._height-m.constrain(H.d2pOppAxis(I._rl[1]),0,H._height),I=H._height-m.constrain(H.d2pOppAxis(I._rl[0]),0,H._height),B.select("rect."+
A.maskMinOppAxisClassName).attr("x",L).attr("height",J).attr("width",G-L),B.select("rect."+A.maskMaxOppAxisClassName).attr("x",L).attr("y",I).attr("height",H._height-I).attr("width",G-L),B.select("rect."+A.slideBoxClassName).attr("y",J).attr("height",I-J));I=Math.round(m.constrain(L-t,-t,H._width+t))-.5;H=Math.round(m.constrain(G-t,-t,H._width+t))+.5;B.select("g."+A.grabberMinClassName).attr("transform","translate("+I+",0.5)");B.select("g."+A.grabberMaxClassName).attr("transform","translate("+H+",0.5)")}
function h(B,t,G,H){B=m.ensureSingle(B,"rect",A.bgClassName,function(J){J.attr({x:0,y:0,"shape-rendering":"crispEdges"})});G=0===H.borderwidth%2?H.borderwidth:H.borderwidth-1;var I=-H._offsetShift;t=r.crispRound(t,H.borderwidth);B.attr({width:H._width+G,height:H._height+G,transform:"translate("+I+","+I+")",fill:H.bgcolor,stroke:H.bordercolor,"stroke-width":t})}function a(B,t,G,H){m.ensureSingleById(t._fullLayout._topdefs,"clipPath",H._clipId,function(I){I.append("rect").attr({x:0,y:0})}).select("rect").attr({width:H._width,
height:H._height})}function f(B,t,G,H){var I=t.calcdata;B=B.selectAll("g."+A.rangePlotClassName).data(G._subplotsWith,m.identity);B.enter().append("g").attr("class",function(L){return A.rangePlotClassName+" "+L}).call(r.setClipUrl,H._clipId,t);B.order();B.exit().remove();var J;B.each(function(L,E){var K=c.select(this);E=0===E;var N=D.getFromId(t,L,"y"),O=N._name,Q=H[O],P={data:[],layout:{xaxis:{type:G.type,domain:[0,1],range:H.range.slice(),calendar:G.calendar},width:H._width,height:H._height,margin:{t:0,
b:0,l:0,r:0}},_context:t._context};G.rangebreaks&&(P.layout.xaxis.rangebreaks=G.rangebreaks);P.layout[O]={type:N.type,domain:[0,1],range:"match"!==Q.rangemode?Q.range.slice():N.range.slice(),calendar:N.calendar};N.rangebreaks&&(P.layout[O].rangebreaks=N.rangebreaks);g.supplyDefaults(P);N=P._fullLayout.xaxis;O=P._fullLayout[O];N.clearCalc();N.setScale();O.clearCalc();O.setScale();K={id:L,plotgroup:K,xaxis:N,yaxis:O,isRangePlot:!0};E?J=K:(K.mainplot="xy",K.mainplotinfo=J);E=w;O=E.rangePlot;P=[];for(N=
0;N<I.length;N++){Q=I[N];var T=Q[0].trace;T.xaxis+T.yaxis===L&&P.push(Q)}O.call(E,t,K,P)})}function d(B,t,G,H,I){m.ensureSingle(B,"rect",A.maskMinClassName,function(J){J.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",H._height).call(u.fill,A.maskColor);m.ensureSingle(B,"rect",A.maskMaxClassName,function(J){J.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",H._height).call(u.fill,A.maskColor);"match"!==I.rangemode&&(m.ensureSingle(B,"rect",A.maskMinOppAxisClassName,function(J){J.attr({y:0,
"shape-rendering":"crispEdges"})}).attr("width",H._width).call(u.fill,A.maskOppAxisColor),m.ensureSingle(B,"rect",A.maskMaxOppAxisClassName,function(J){J.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",H._width).style("border-top",A.maskOppBorder).call(u.fill,A.maskOppAxisColor))}function l(B,t,G,H){t._context.staticPlot||m.ensureSingle(B,"rect",A.slideBoxClassName,function(I){I.attr({y:0,cursor:A.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:H._height,fill:A.slideBoxFill})}
function k(B,t,G,H){G=m.ensureSingle(B,"g",A.grabberMinClassName);B=m.ensureSingle(B,"g",A.grabberMaxClassName);var I={x:0,width:A.handleWidth,rx:A.handleRadius,fill:u.background,stroke:u.defaultLine,"stroke-width":A.handleStrokeWidth,"shape-rendering":"crispEdges"},J={y:Math.round(H._height/4),height:Math.round(H._height/2)};m.ensureSingle(G,"rect",A.handleMinClassName,function(E){E.attr(I)}).attr(J);m.ensureSingle(B,"rect",A.handleMaxClassName,function(E){E.attr(I)}).attr(J);if(!t._context.staticPlot){var L=
{width:A.grabAreaWidth,x:0,y:0,fill:A.grabAreaFill,cursor:A.grabAreaCursor};m.ensureSingle(G,"rect",A.grabAreaMinClassName,function(E){E.attr(L)}).attr("height",H._height);m.ensureSingle(B,"rect",A.grabAreaMaxClassName,function(E){E.attr(L)}).attr("height",H._height)}}var c=b("d3"),e=b("../../registry"),g=b("../../plots/plots"),m=b("../../lib"),r=b("../drawing"),u=b("../color"),v=b("../titles"),w=b("../../plots/cartesian"),D=b("../../plots/cartesian/axis_ids"),C=b("../dragelement"),x=b("../../lib/setcursor"),
A=b("./constants");y.exports=function(B){for(var t=B._fullLayout,G=t._rangeSliderData,H=0;H<G.length;H++){var I=G[H][A.name];I._clipId=I._id+"-"+t._uid}H=t._infolayer.selectAll("g."+A.containerClassName).data(G,function(J){return J._name});H.exit().each(function(J){t._topdefs.select("#"+J[A.name]._clipId).remove()}).remove();0!==G.length&&(H.enter().append("g").classed(A.containerClassName,!0).attr("pointer-events","all"),H.each(function(J){var L=c.select(this),E=J[A.name],K=t[D.id2name(J.anchor)],
N=E[D.id2name(J.anchor)];if(E.range){var O=m.simpleMap(E.range,J.r2l),Q=m.simpleMap(J.range,J.r2l);E.range=E._input.range=m.simpleMap(Q[0]<Q[1]?[Math.min(O[0],Q[0]),Math.max(O[1],Q[1])]:[Math.max(O[0],Q[0]),Math.min(O[1],Q[1])],J.l2r)}J.cleanRange("rangeslider.range");Q=t._size;var P=J.domain;E._width=Q.w*(P[1]-P[0]);O=Math.round(Q.t+Q.h*(1-J._counterDomainMin)+("bottom"===J.side?J._depth:0)+E._offsetShift+A.extraPad);L.attr("transform","translate("+Math.round(Q.l+Q.w*P[0])+","+O+")");E._rl=m.simpleMap(E.range,
J.r2l);var T=E._rl[0];Q=E._rl[1];var V=Q-T;E.p2d=function(pa){return pa/E._width*V+T};E.d2p=function(pa){return(pa-T)/V*E._width};if(J.rangebreaks){var aa=J.locateBreaks(T,Q);if(aa.length){var ba=0;for(P=0;P<aa.length;P++){var Y=aa[P];ba+=Y.max-Y.min}var ea=E._width/(Q-T-ba),da=[-ea*T];for(P=0;P<aa.length;P++)Y=aa[P],da.push(da[da.length-1]-ea*(Y.max-Y.min));E.d2p=function(pa){for(var qa=da[0],oa=0;oa<aa.length;oa++){var ka=aa[oa];if(pa>=ka.max)qa=da[oa+1];else if(pa<ka.min)break}return qa+ea*pa};
for(P=0;P<aa.length;P++)Y=aa[P],Y.pmin=E.d2p(Y.min),Y.pmax=E.d2p(Y.max);E.p2d=function(pa){for(var qa=da[0],oa=0;oa<aa.length;oa++){var ka=aa[oa];if(pa>=ka.pmax)qa=da[oa+1];else if(pa<ka.pmin)break}return(pa-qa)/ea}}}if("match"!==N.rangemode){var ca=K.r2l(N.range[0]),la=K.r2l(N.range[1])-ca;E.d2pOppAxis=function(pa){return(pa-ca)/la*E._height}}L.call(h,B,J,E).call(a,B,J,E).call(f,B,J,E).call(d,B,J,E,N).call(l,B,J,E).call(k,B,J,E);q(L,B,J,E);p(L,B,J,E,K,N);"bottom"===J.side&&v.draw(B,J._id+"title",
{propContainer:J,propName:J._name+".title",placeholder:t._dfltTitle.x,attributes:{x:J._offset+J._length/2,y:O+E._height+E._offsetShift+10+1.5*J.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":749,"../../lib/setcursor":769,"../../plots/cartesian":810,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"../titles":710,"./constants":686,d3:169}],689:[function(b,y,F){function q(d){return(d=d&&d[f])&&d.visible}
var n=b("../../plots/cartesian/axis_ids"),p=b("../../lib/svg_text_utils"),h=b("./constants"),a=b("../../constants/alignment").LINE_SPACING,f=h.name;F.isVisible=q;F.makeData=function(d){var l=n.list({_fullLayout:d},"x",!0),k=d.margin,c=[];if(!d._has("gl2d"))for(var e=0;e<l.length;e++){var g=l[e];if(q(g)){c.push(g);var m=g[f];m._id=f+g._id;m._height=(d.height-k.b-k.t)*m.thickness;m._offsetShift=Math.floor(m.borderwidth/2)}}d._rangeSliderData=c};F.autoMarginOpts=function(d,l){d=d._fullLayout;var k=l[f],
c=l._id.charAt(0),e=0,g=0;"bottom"===l.side&&(e=l._depth,l.title.text!==d._dfltTitle[c]&&(g=1.5*l.title.font.size+10+k._offsetShift,c=(l.title.text.match(p.BR_TAG_ALL)||[]).length,g+=c*l.title.font.size*a));return{x:0,y:l._counterDomainMin,l:0,r:0,t:0,b:k._height+e+Math.max(d.margin.b,g),pad:h.extraPad+2*k._offsetShift}}},{"../../constants/alignment":717,"../../lib/svg_text_utils":773,"../../plots/cartesian/axis_ids":800,"./constants":686}],690:[function(b,y,F){F=b("../../lib");var q=b("./attributes"),
n=b("./oppaxis_attributes"),p=b("./helpers");y.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:F.extendFlat({},q,{yaxis:n})}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),calcAutorange:b("./calc_autorange"),draw:b("./draw"),isVisible:p.isVisible,makeData:p.makeData,autoMarginOpts:p.autoMarginOpts}},{"../../lib":749,"./attributes":684,"./calc_autorange":685,"./defaults":687,"./draw":688,"./helpers":689,"./oppaxis_attributes":691}],691:[function(b,
y,F){y.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],692:[function(b,y,F){F=b("../annotations/attributes");var q=b("../../traces/scatter/attributes").line,n=b("../drawing/attributes").dash,p=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;y.exports=b("shape",
{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:p({},F.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},
yref:p({},F.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:p({},q.color,{editType:"arraydraw"}),width:p({},q.width,{editType:"calc+arraydraw"}),dash:p({},n,{editType:"arraydraw"}),
editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../lib/extend":739,"../../plot_api/plot_template":787,"../../traces/scatter/attributes":1155,"../annotations/attributes":598,"../drawing/attributes":636}],693:[function(b,y,F){function q(d,l,k,c,e,g){d/=2;return"pixel"===
l?(k=e?f.extractPathCoords(e,g?a.paramIsY:a.paramIsX):[k,c],l=p.aggNums(Math.max,null,k),k=p.aggNums(Math.min,null,k),k=0>k?Math.abs(k)+d:d,l=0<l?l+d:d,{ppad:d,ppadplus:g?k:l,ppadminus:g?l:k}):{ppad:d}}function n(d,l,k,c,e){var g="category"===d.type||"multicategory"===d.type?d.r2c:d.d2c;if(void 0!==l)return[g(l),g(k)];if(c){l=Infinity;k=-Infinity;c=c.match(a.segmentRE);var m;"date"===d.type&&(g=f.decodeDate(g));for(d=0;d<c.length;d++){var r=c[d];r=e[r.charAt(0)].drawn;void 0!==r&&(!(m=c[d].substr(1).match(a.paramRE))||
m.length<r||(r=g(m[r]),r<l&&(l=r),r>k&&(k=r)))}if(k>=l)return[l,k]}}var p=b("../../lib"),h=b("../../plots/cartesian/axes"),a=b("./constants"),f=b("./helpers");y.exports=function(d){var l=p.filterVisible(d._fullLayout.shapes);if(l.length&&d._fullData.length)for(var k=0;k<l.length;k++){var c=l[k];c._extremes={};if("paper"!==c.xref){var e="pixel"===c.xsizemode?c.xanchor:c.x0;var g="pixel"===c.xsizemode?c.xanchor:c.x1;var m=h.getFromId(d,c.xref);(e=n(m,e,g,c.path,a.paramIsX))&&(c._extremes[m._id]=h.findExtremes(m,
e,q(c.line.width,c.xsizemode,c.x0,c.x1,c.path,!1)))}"paper"!==c.yref&&(e="pixel"===c.ysizemode?c.yanchor:c.y0,g="pixel"===c.ysizemode?c.yanchor:c.y1,m=h.getFromId(d,c.yref),(e=n(m,e,g,c.path,a.paramIsY))&&(c._extremes[m._id]=h.findExtremes(m,e,q(c.line.width,c.ysizemode,c.y0,c.y1,c.path,!0))))}}},{"../../lib":749,"../../plots/cartesian/axes":797,"./constants":694,"./helpers":703}],694:[function(b,y,F){y.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,
drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],695:[function(b,y,F){function q(d,l,k){function c(I,J){return n.coerce(d,l,a,I,J)}if(c("visible")){var e=c("path");e=c("type",e?"path":"rect");"path"!==l.type&&delete l.path;
c("editable");c("layer");c("opacity");c("fillcolor");c("fillrule");c("line.width")&&(c("line.color"),c("line.dash"));for(var g=c("xsizemode"),m=c("ysizemode"),r=["x","y"],u=0;2>u;u++){var v=r[u],w=v+"anchor",D="x"===v?g:m,C={_fullLayout:k},x=p.coerceRef(d,l,C,v,"","paper");if("paper"!==x){var A=p.getFromId(C,x);A._shapeIndices.push(l._index);var B=f.rangeToShapePosition(A);A=f.shapePositionToRange(A)}else A=B=n.identity;if("path"!==e){var t=v+"0";v+="1";var G=d[t],H=d[v];d[t]=A(d[t],!0);d[v]=A(d[v],
!0);"pixel"===D?(c(t,0),c(v,10)):(p.coercePosition(l,C,c,x,t,.25),p.coercePosition(l,C,c,x,v,.75));l[t]=B(l[t]);l[v]=B(l[v]);d[t]=G;d[v]=H}"pixel"===D&&(D=d[w],d[w]=A(d[w],!0),p.coercePosition(l,C,c,x,w,.25),l[w]=B(l[w]),d[w]=D)}"path"===e?c("path"):n.noneOrAll(d,l,["x0","x1","y0","y1"])}}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),f=b("./helpers");y.exports=function(d,l){h(d,l,{name:"shapes",handleItemDefaults:q})}},{"../../lib":749,
"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":692,"./helpers":703}],696:[function(b,y,F){function q(B){var t=B._fullLayout;t._shapeUpperLayer.selectAll("path").remove();t._shapeLowerLayer.selectAll("path").remove();for(var G in t._plots){var H=t._plots[G].shapelayer;H&&H.selectAll("path").remove()}for(G=0;G<t.shapes.length;G++)t.shapes[G].visible&&n(B,G)}function n(B,t){function G(L){var E=a(B,I),K={"data-index":t,"fill-rule":I.fillrule,d:E},N=I.opacity,
O=I.fillcolor,Q=I.line.width?I.line.color:"rgba(0,0,0,0)",P=I.line.width,T=I.line.dash;P||!0!==I.editable||(P=5,T="solid");var V="Z"!==E[E.length-1],aa=!B._context.edits.shapePosition&&I.editable&&B._fullLayout._activeShapeIndex===t;aa&&(O=V?"rgba(0,0,0,0)":B._fullLayout.activeshape.fillcolor,N=B._fullLayout.activeshape.opacity);var ba=L.append("path").attr(K).style("opacity",N).call(u.stroke,Q).call(u.fill,O).call(v.dashLine,T,P);p(ba,B,I);if(aa||B._context.edits.shapePosition)var Y=w(B.layout,"shapes",
I);aa?(ba.style({cursor:"move"}),L={element:ba.node(),plotinfo:J,gd:B,editHelpers:Y,isActiveShape:!0},E=g(E,B),m(E,ba,L)):B._context.edits.shapePosition?h(B,ba,I,t,L,Y):!0===I.editable&&ba.style("pointer-events",V||.5>=u.opacity(O)*N?"stroke":"all");ba.node().addEventListener("click",function(){a:{if(!B._context.edits.shapePosition){var ea=+ba.node().getAttribute("data-index");if(0<=ea){if(ea===B._fullLayout._activeShapeIndex){l(B);ea=void 0;break a}B._fullLayout._activeShapeIndex=ea;B._fullLayout._deactivateShape=
l;q(B)}}ea=void 0}return ea})}B._fullLayout._paperdiv.selectAll('.shapelayer [data-index\x3d"'+t+'"]').remove();var H=A.makeOptionsAndPlotinfo(B,t),I=H.options,J=H.plotinfo;I._input&&!1!==I.visible&&("below"!==I.layer?G(B._fullLayout._shapeUpperLayer):"paper"===I.xref||"paper"===I.yref?G(B._fullLayout._shapeLowerLayer):J._hadPlotinfo?G((J.mainplotinfo||J).shapelayer):G(B._fullLayout._shapeLowerLayer))}function p(B,t,G){G=(G.xref+G.yref).replace(/paper/g,"");v.setClipUrl(B,G?"clip"+t._fullLayout._uid+
G:null,t)}function h(B,t,G,H,I,J){function L(){var tb=Math.max(G.line.width,10),Aa=I.append("g").attr("data-index",H);Aa.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":tb,"stroke-opacity":"0"});var Ka={"fill-opacity":"0"};tb=Math.max(tb/2,10);Aa.append("circle").attr({"data-line-point":"start-point",cx:Q?Ha(G.xanchor)+G.x0:Ha(G.x0),cy:P?eb(G.yanchor)-G.y0:eb(G.y0),r:tb}).style(Ka).classed("cursor-grab",!0);Aa.append("circle").attr({"data-line-point":"end-point",cx:Q?Ha(G.xanchor)+
G.x1:Ha(G.x1),cy:P?eb(G.yanchor)-G.y1:eb(G.y1),r:tb}).style(Ka).classed("cursor-grab",!0);return Aa}function E(tb){if(B._fullLayout._drawing)sb=null;else if(T)sb="path"===tb.target.tagName?"move":"start-point"===tb.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Aa=Pa.element.getBoundingClientRect(),Ka=Aa.right-Aa.left,Qa=Aa.bottom-Aa.top,Xa=tb.clientX-Aa.left;Aa=tb.clientY-Aa.top;tb=!V&&10<Ka&&10<Qa&&!tb.shiftKey?D.getCursor(Xa/Ka,1-Aa/Qa):"move";
C(t,tb);sb=tb.split("-")[0]}}function K(tb,Aa){if("path"===G.type){var Ka=function(Xa){return Xa},Qa=Ka;Q?aa("xanchor",G.xanchor=hb(ca+tb)):(Qa=function(Xa){return hb(Ha(Xa)+tb)},ya&&"date"===ya.type&&(Qa=A.encodeDate(Qa)));P?aa("yanchor",G.yanchor=ob(la+Aa)):(Ka=function(Xa){return ob(eb(Xa)+Aa)},Fa&&"date"===Fa.type&&(Ka=A.encodeDate(Ka)));aa("path",G.path=d(na,Qa,Ka))}else Q?aa("xanchor",G.xanchor=hb(ca+tb)):(aa("x0",G.x0=hb(ba+tb)),aa("x1",G.x1=hb(ea+tb))),P?aa("yanchor",G.yanchor=ob(la+Aa)):
(aa("y0",G.y0=ob(Y+Aa)),aa("y1",G.y1=ob(da+Aa)));t.attr("d",a(B,G));O(I,G)}function N(tb,Aa){if(V){var Ka=function(Ua){return Ua},Qa=Ka;Q?aa("xanchor",G.xanchor=hb(ca+tb)):(Qa=function(Ua){return hb(Ha(Ua)+tb)},ya&&"date"===ya.type&&(Qa=A.encodeDate(Qa)));P?aa("yanchor",G.yanchor=ob(la+Aa)):(Ka=function(Ua){return ob(eb(Ua)+Aa)},Fa&&"date"===Fa.type&&(Ka=A.encodeDate(Ka)));aa("path",G.path=d(na,Qa,Ka))}else if(T)"resize-over-start-point"===sb?(Qa=ba+tb,Ka=P?Y-Aa:Y+Aa,aa("x0",G.x0=Q?Qa:hb(Qa)),aa("y0",
G.y0=P?Ka:ob(Ka))):"resize-over-end-point"===sb&&(Qa=ea+tb,Ka=P?da-Aa:da+Aa,aa("x1",G.x1=Q?Qa:hb(Qa)),aa("y1",G.y1=P?Ka:ob(Ka)));else{Qa=-1!==sb.indexOf("n");Ka=-1!==sb.indexOf("s");var Xa=-1!==sb.indexOf("w"),pb=-1!==sb.indexOf("e"),db=Qa?pa+Aa:pa,Ia=Ka?qa+Aa:qa;Xa=Xa?oa+tb:oa;pb=pb?ka+tb:ka;P&&(Qa&&(db=pa-Aa),Ka&&(Ia=qa-Aa));if(!P&&10<Ia-db||P&&10<db-Ia)aa(ra,G[ra]=P?db:ob(db)),aa(ha,G[ha]=P?Ia:ob(Ia));10<pb-Xa&&(aa(ma,G[ma]=Q?Xa:hb(Xa)),aa(wa,G[wa]=Q?pb:hb(pb)))}t.attr("d",a(B,G));O(I,G)}function O(tb,
Aa){if(Q||P){var Ka="path"!==Aa.type;tb=tb.selectAll(".visual-cue").data([0]);tb.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Qa=Ha(Q?Aa.xanchor:c.midRange(Ka?[Aa.x0,Aa.x1]:A.extractPathCoords(Aa.path,x.paramIsX)));Aa=eb(P?Aa.yanchor:c.midRange(Ka?[Aa.y0,Aa.y1]:A.extractPathCoords(Aa.path,x.paramIsY)));Qa=A.roundPositionForSharpStrokeRendering(Qa,1);Aa=A.roundPositionForSharpStrokeRendering(Aa,1);Q&&P?tb.attr("d","M"+
(Qa-1-1)+","+(Aa-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):Q?tb.attr("d","M"+(Qa-1-1)+","+(Aa-9-1)+"v18 h2 v-18 Z"):tb.attr("d","M"+(Qa-9-1)+","+(Aa-1-1)+"h18 v2 h-18 Z")}}var Q="pixel"===G.xsizemode,P="pixel"===G.ysizemode,T="line"===G.type,V="path"===G.type,aa=J.modifyItem,ba,Y,ea,da,ca,la,pa,qa,oa,ka,ra,ha,ma,wa,na,ya=e.getFromId(B,G.xref),Fa=e.getFromId(B,G.yref),Ha=A.getDataToPixel(B,ya),eb=A.getDataToPixel(B,Fa,!0),hb=A.getPixelToData(B,ya),ob=A.getPixelToData(B,Fa,!0),ib=T?L():t,Pa={element:ib.node(),
gd:B,prepFn:function(tb){if(!B._fullLayout._drawing){Q&&(ca=Ha(G.xanchor));P&&(la=eb(G.yanchor));"path"===G.type?na=G.path:(ba=Q?G.x0:Ha(G.x0),Y=P?G.y0:eb(G.y0),ea=Q?G.x1:Ha(G.x1),da=P?G.y1:eb(G.y1));ba<ea?(oa=ba,ma="x0",ka=ea,wa="x1"):(oa=ea,ma="x1",ka=ba,wa="x0");!P&&Y<da||P&&Y>da?(pa=Y,ra="y0",qa=da,ha="y1"):(pa=da,ra="y1",qa=Y,ha="y0");E(tb);O(I,G);var Aa=G.xref,Ka=G.yref,Qa=e.getFromId(B,Aa),Xa=e.getFromId(B,Ka),pb="";"paper"===Aa||Qa.autorange||(pb+=Aa);"paper"===Ka||Xa.autorange||(pb+=Ka);
v.setClipUrl(t,pb?"clip"+B._fullLayout._uid+pb:null,B);Pa.moveFn="move"===sb?K:N;Pa.altKey=tb.altKey}},doneFn:function(){B._fullLayout._drawing||(C(t),I.selectAll(".visual-cue").remove(),p(t,B,G),k.call("_guiRelayout",B,J.getUpdateObj()))},clickFn:function(){B._fullLayout._drawing||I.selectAll(".visual-cue").remove()}},sb;D.init(Pa);ib.node().onmousemove=E}function a(B,t){var G=t.type,H=e.getFromId(B,t.xref),I=e.getFromId(B,t.yref),J=B._fullLayout._size;if(H){var L=A.shapePositionToRange(H);var E=
function(Q){return H._offset+H.r2p(L(Q,!0))}}else E=function(Q){return J.l+J.w*Q};if(I){var K=A.shapePositionToRange(I);var N=function(Q){return I._offset+I.r2p(K(Q,!0))}}else N=function(Q){return J.t+J.h*(1-Q)};if("path"===G)return H&&"date"===H.type&&(E=A.decodeDate(E)),I&&"date"===I.type&&(N=A.decodeDate(N)),f(t,E,N);if("pixel"===t.xsizemode){E=E(t.xanchor);B=E+t.x0;var O=E+t.x1}else B=E(t.x0),O=E(t.x1);"pixel"===t.ysizemode?(N=N(t.yanchor),E=N-t.y0,t=N-t.y1):(E=N(t.y0),t=N(t.y1));if("line"===
G)return"M"+B+","+E+"L"+O+","+t;if("rect"===G)return"M"+B+","+E+"H"+O+"V"+t+"H"+B+"Z";G=(B+O)/2;t=(E+t)/2;B=Math.abs(G-B);E=Math.abs(t-E);N="A"+B+","+E;B=G+B+","+t;return"M"+B+N+" 0 1,1 "+(G+","+(t-E))+N+" 0 0,1 "+B+"Z"}function f(B,t,G){var H=B.xsizemode,I=B.ysizemode,J=B.xanchor,L=B.yanchor;return B.path.replace(x.segmentRE,function(E){var K=0,N=E.charAt(0),O=x.paramIsX[N],Q=x.paramIsY[N],P=x.numParams[N],T=E.substr(1).replace(x.paramRE,function(V){O[K]?V="pixel"===H?t(J)+Number(V):t(V):Q[K]&&(V=
"pixel"===I?G(L)-Number(V):G(V));K++;K>P&&(V="X");return V});K>P&&(T=T.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+E));return N+T})}function d(B,t,G){return B.replace(x.segmentRE,function(H){var I=0,J=H.charAt(0),L=x.paramIsX[J],E=x.paramIsY[J],K=x.numParams[J];H=H.substr(1).replace(x.paramRE,function(N){if(I>=K)return N;L[I]?N=t(N):E[I]&&(N=G(N));I++;return N});return J+H})}function l(B){!B._context.edits.shapePosition&&0<=B._fullLayout._activeShapeIndex&&(r(B),delete B._fullLayout._activeShapeIndex,
q(B))}var k=b("../../registry"),c=b("../../lib"),e=b("../../plots/cartesian/axes"),g=b("./draw_newshape/helpers").readPaths,m=b("./draw_newshape/display_outlines"),r=b("../../plots/cartesian/handle_outline").clearOutlineControllers,u=b("../color"),v=b("../drawing"),w=b("../../plot_api/plot_template").arrayEditor,D=b("../dragelement"),C=b("../../lib/setcursor"),x=b("./constants"),A=b("./helpers");y.exports={draw:q,drawOne:n,eraseActiveShape:function(B){if(!B._context.edits.shapePosition){r(B);var t=
B._fullLayout._activeShapeIndex,G=(B.layout||{}).shapes||[];if(t<G.length){for(var H=[],I=0;I<G.length;I++)I!==t&&H.push(G[I]);delete B._fullLayout._activeShapeIndex;k.call("_guiRelayout",B,{shapes:H})}}}}},{"../../lib":749,"../../lib/setcursor":769,"../../plot_api/plot_template":787,"../../plots/cartesian/axes":797,"../../plots/cartesian/handle_outline":807,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"./constants":694,"./draw_newshape/display_outlines":700,"./draw_newshape/helpers":701,
"./helpers":703}],697:[function(b,y,F){F=b("../../drawing/attributes").dash;b=b("../../../lib/extend").extendFlat;y.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:b({},F,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},
layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":739,"../../drawing/attributes":636}],698:[function(b,y,F){y.exports={CIRCLE_SIDES:32,i000:0,i090:8,
i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],699:[function(b,y,F){var q=b("../../color");y.exports=function(n,p,h){h("newshape.drawdirection");h("newshape.layer");h("newshape.fillcolor");h("newshape.fillrule");h("newshape.opacity");h("newshape.line.width")&&(h("newshape.line.color",q.contrast((n||{}).plot_bgcolor||"#FFF")),h("newshape.line.dash"));h("activeshape.fillcolor");h("activeshape.opacity")}},{"../../color":615}],700:[function(b,y,F){function q(r,
u){for(var v=0;v<u.length;v++){var w=u[v];r[v]=[];for(var D=0;D<w.length;D++){r[v][D]=[];for(var C=0;C<w[D].length;C++)r[v][D][C]=w[D][C]}}return r}var n=b("../../dragelement"),p=b("../../dragelement/helpers").drawMode,h=b("../../../registry");F=b("./constants");var a=F.i000,f=F.i090,d=F.i180,l=F.i270,k=b("../../../plots/cartesian/handle_outline").clearOutlineControllers;F=b("./helpers");var c=F.pointsShapeRectangle,e=F.pointsShapeEllipse,g=F.writePaths,m=b("./newshapes");y.exports=function C(u,v,
w,D){function x(){C(u,v,w,D++);e(u[0])&&A({redrawing:!0})}function A(ba){w.isActiveShape=!1;var Y=m(v,w);Object.keys(Y).length&&h.call((ba||{}).redrawing?"relayout":"_guiRelayout",K,Y)}function B(ba){P=+ba.srcElement.getAttribute("data-i");T=+ba.srcElement.getAttribute("data-j");Q[P][T].moveFn=t}function t(ba,Y){if(u.length){var ea=V[P][T][1],da=V[P][T][2],ca=u[P],la=ca.length;if(c(ca)){for(var pa=0;pa<la;pa++)if(pa!==T){var qa=ca[pa];qa[1]===ca[T][1]&&(qa[1]=ea+ba);qa[2]===ca[T][2]&&(qa[2]=da+Y)}ca[T][1]=
ea+ba;ca[T][2]=da+Y;if(!c(ca))for(ba=0;ba<la;ba++)for(Y=0;Y<ca[ba].length;Y++)ca[ba][Y]=V[P][ba][Y]}else ca[T][1]=ea+ba,ca[T][2]=da+Y;x()}}function G(){A()}function H(ba,Y){if(2===ba&&(P=+Y.srcElement.getAttribute("data-i"),T=+Y.srcElement.getAttribute("data-j"),ba=u[P],!c(ba)&&!e(ba)&&u.length&&u[P]&&u[P].length)){ba=[];for(Y=0;Y<u[P].length;Y++)Y!==T&&ba.push(u[P][Y]);1<ba.length&&(2!==ba.length||"Z"!==ba[1][0])&&(0===T&&(ba[0][0]="M"),u[P]=ba,x(),A())}}function I(ba){Q=[];for(var Y=0;Y<u.length;Y++){var ea=
u[Y],da=!c(ea)&&e(ea);Q[Y]=[];for(var ca=0;ca<ea.length;ca++)if("Z"!==ea[ca][0]&&(!da||ca===a||ca===f||ca===d||ca===l)){var la=ea[ca][1],pa=ea[ca][2];la=ba.append("circle").classed("cursor-grab",!0).attr("data-i",Y).attr("data-j",ca).attr("cx",la).attr("cy",pa).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});Q[Y][ca]={element:la.node(),gd:K,prepFn:B,doneFn:G,clickFn:H};n.init(Q[Y][ca])}}}function J(ba,Y){if(u.length)for(var ea=0;ea<u.length;ea++)for(var da=
0;da<u[ea].length;da++)for(var ca=0;ca+2<u[ea][da].length;ca+=2)u[ea][da][ca+1]=V[ea][da][ca+1]+ba,u[ea][da][ca+2]=V[ea][da][ca+2]+Y;x()}function L(ba){(P=+ba.srcElement.getAttribute("data-i"))||(P=0);aa[P].moveFn=J}function E(){A()}D||(D=0);var K=w.gd,N=w.isActiveShape,O=K._fullLayout._zoomlayer;p(w.dragmode)?K._fullLayout._drawing=!0:0<=K._fullLayout._activeShapeIndex&&k(K);v.attr("d",g(u));var Q,P,T;if(N&&!D){var V=q([],u);N=O.append("g").attr("class","outline-controllers");I(N);var aa=[];u.length&&
(aa[0]={element:v[0][0],gd:K,prepFn:L,doneFn:E},n.init(aa[0]))}}},{"../../../plots/cartesian/handle_outline":807,"../../../registry":880,"../../dragelement":634,"../../dragelement/helpers":633,"./constants":698,"./helpers":701,"./newshapes":702}],701:[function(b,y,F){function q(c,e){return 1E-6>=Math.abs(c-e)}function n(c,e){var g=e[1]-c[1];c=e[2]-c[2];return Math.sqrt(g*g+c*c)}var p=b("parse-svg-path");y=b("./constants");var h=y.CIRCLE_SIDES,a=y.SQRT2;b=b("../../../plots/cartesian/helpers");var f=
b.p2r,d=b.r2p,l=[0,3,4,5,6,1,2],k=[0,3,4,1,2];F.writePaths=function(c){var e=c.length;if(!e)return"M0,0Z";for(var g="",m=0;m<e;m++)for(var r=c[m].length,u=0;u<r;u++){var v=c[m][u][0];if("Z"===v)g+="Z";else for(var w=c[m][u].length,D=0;D<w;D++){var C=D;"Q"===v||"S"===v?C=k[D]:"C"===v&&(C=l[D]);g+=c[m][u][C];0<D&&D<w-1&&(g+=",")}}return g};F.readPaths=function(c,e,g,m){c=p(c);var r=[],u=-1,v,w=0,D=0;var C=w;var x=D;for(var A=0;A<c.length;A++){var B=[],t=v=c[A][0];switch(v){case "M":u++;r[u]=[];w=+c[A][1];
D=+c[A][2];B.push([t,w,D]);C=w;x=D;break;case "Q":case "S":v=+c[A][1];var G=+c[A][2];w=+c[A][3];D=+c[A][4];B.push([t,w,D,v,G]);break;case "C":v=+c[A][1];G=+c[A][2];var H=+c[A][3];var I=+c[A][4];w=+c[A][5];D=+c[A][6];B.push([t,w,D,v,G,H,I]);break;case "T":case "L":w=+c[A][1];D=+c[A][2];B.push([t,w,D]);break;case "H":t="L";w=+c[A][1];B.push([t,w,D]);break;case "V":t="L";D=+c[A][1];B.push([t,w,D]);break;case "A":t="L";H=+c[A][1];G=+c[A][2];+c[A][4]||(H=-H,G=-G);I=w-H;var J=D;for(v=1;v<=h/2;v++){var L=
2*Math.PI*v/h;B.push([t,I+H*Math.cos(L),J+G*Math.sin(L)])}break;case "Z":if(w!==C||D!==x)w=C,D=x,B.push([t,w,D])}t=(g||{}).domain;H=e._fullLayout._size;G=g&&"pixel"===g.xsizemode;I=g&&"pixel"===g.ysizemode;J=!1===m;for(L=0;L<B.length;L++){for(v=0;7>v+2;v+=2){var E=B[L][v+1],K=B[L][v+2];void 0!==E&&void 0!==K&&(w=E,D=K,g&&(g.xaxis&&g.xaxis.p2r?(J&&(E-=g.xaxis._offset),E=G?d(g.xaxis,g.xanchor)+E:f(g.xaxis,E)):(J&&(E-=H.l),E=t?t.x[0]+E/H.w:E/H.w),g.yaxis&&g.yaxis.p2r?(J&&(K-=g.yaxis._offset),K=I?d(g.yaxis,
g.yanchor)-K:f(g.yaxis,K)):(J&&(K-=H.t),K=t?t.y[1]-K/H.h:1-K/H.h)),B[L][v+1]=E,B[L][v+2]=K)}r[u].push(B[L].slice())}}return r};F.pointsShapeRectangle=function(c){if(5!==c.length)return!1;for(var e=1;3>e;e++)if(!q(c[0][e]-c[1][e],c[3][e]-c[2][e])||!q(c[0][e]-c[3][e],c[1][e]-c[2][e]))return!1;return q(c[0][1],c[1][1])||q(c[0][1],c[3][1])?!!(n(c[0],c[1])*n(c[0],c[3])):!1};F.pointsShapeEllipse=function(c){var e=c.length;if(e!==h+1)return!1;e=h;for(var g=0;g<e;g++){var m=(2*e-g)%e,r=(e/2+m)%e;if(!q(n(c[g],
c[(e/2+g)%e]),n(c[m],c[r])))return!1}return!0};F.handleEllipse=function(c,e,g){if(!c)return[e,g];var m=F.ellipseOver({x0:e[0],y0:e[1],x1:g[0],y1:g[1]});c=(m.x1+m.x0)/2;e=(m.y1+m.y0)/2;g=(m.x1-m.x0)/2;m=(m.y1-m.y0)/2;g||(g=m/=a);m||(m=g/=a);for(var r=[],u=0;u<h;u++){var v=2*u*Math.PI/h;r.push([c+g*Math.cos(v),e+m*Math.sin(v)])}return r};F.ellipseOver=function(c){var e=c.x0,g=c.y0,m=c.x1,r=c.y1;c=m-e;var u=r-g;e=(e-c+m)/2;g=(g-u+r)/2;c*=a;u*=a;return{x0:e-c,y0:g-u,x1:e+c,y1:g+u}}},{"../../../plots/cartesian/helpers":808,
"./constants":698,"parse-svg-path":479}],702:[function(b,y,F){F=b("../../dragelement/helpers");var q=F.drawMode,n=F.openMode;F=b("./constants");var p=F.i000,h=F.i090,a=F.i180,f=F.i270,d=F.cos45,l=F.sin45;F=b("../../../plots/cartesian/helpers");var k=F.p2r,c=F.r2p,e=b("../../../plots/cartesian/handle_outline").clearSelect;b=b("./helpers");var g=b.readPaths,m=b.writePaths,r=b.ellipseOver;y.exports=function(u,v){if(u.length&&(u=u[0][0])){var w=u.getAttribute("d");u=v.gd;var D=u._fullLayout.newshape,
C=v.plotinfo,x=C.xaxis,A=C.yaxis,B=!!C.domain||!C.xaxis,t=!!C.domain||!C.yaxis,G=v.isActiveShape,H=v.dragmode,I=(u.layout||{}).shapes||[];if(!q(H)&&void 0!==G){var J=u._fullLayout._activeShapeIndex;if(J<I.length)switch(u._fullLayout.shapes[J].type){case "rect":H="drawrect";break;case "circle":H="drawcircle";break;case "line":H="drawline";break;case "path":H=I[J].path||"",H="Z"===H[H.length-1]?"drawclosedpath":"drawopenpath"}}J=n(H);w=g(w,u,C,G);B={editable:!0,xref:B?"paper":x._id,yref:t?"paper":A._id,
layer:D.layer,opacity:D.opacity,line:{color:D.line.color,width:D.line.width,dash:D.line.dash}};J||(B.fillcolor=D.fillcolor,B.fillrule=D.fillrule);var L;1===w.length&&(L=w[0]);if(L&&"drawrect"===H)B.type="rect",B.x0=L[0][1],B.y0=L[0][2],B.x1=L[2][1],B.y1=L[2][2];else if(L&&"drawline"===H)B.type="line",B.x0=L[0][1],B.y0=L[0][2],B.x1=L[1][1],B.y1=L[1][2];else if(L&&"drawcircle"===H){B.type="circle";w=L[p][1];A=L[h][1];D=L[a][1];x=L[f][1];t=L[p][2];H=L[h][2];J=L[a][2];var E=L[f][2];L=C.xaxis&&("date"===
C.xaxis.type||"log"===C.xaxis.type);var K=C.yaxis&&("date"===C.yaxis.type||"log"===C.yaxis.type);L&&(w=c(C.xaxis,w),A=c(C.xaxis,A),D=c(C.xaxis,D),x=c(C.xaxis,x));K&&(t=c(C.yaxis,t),H=c(C.yaxis,H),J=c(C.yaxis,J),E=c(C.yaxis,E));var N=(A+x)/2,O=(t+J)/2;w=r({x0:N,y0:O,x1:N+(x-A+D-w)/2*d,y1:O+(E-H+J-t)/2*l});L&&(w.x0=k(C.xaxis,w.x0),w.x1=k(C.xaxis,w.x1));K&&(w.y0=k(C.yaxis,w.y0),w.y1=k(C.yaxis,w.y1));B.x0=w.x0;B.y0=w.y0;B.x1=w.x1;B.y1=w.y1}else{B.type="path";if(x&&A&&(C="date"===x.type,L="date"===A.type,
C||L))for(A=0;A<w.length;A++)for(D=0;D<w[A].length;D++)for(x=0;x+2<w[A][D].length;x+=2)C&&(w[A][D][x+1]=w[A][D][x+1].replace(" ","_")),L&&(w[A][D][x+2]=w[A][D][x+2].replace(" ","_"));B.path=m(w)}e(u);v=v.editHelpers;C=(v||{}).modifyItem;L=[];for(w=0;w<I.length;w++)if(A=u._fullLayout.shapes[w],L[w]=A._input,void 0!==G&&w===u._fullLayout._activeShapeIndex)switch(D=B,A.type){case "line":case "rect":case "circle":C("x0",D.x0);C("x1",D.x1);C("y0",D.y0);C("y1",D.y1);break;case "path":C("path",D.path)}return void 0===
G?(L.push(B),L):v?v.getUpdateObj():{}}}},{"../../../plots/cartesian/handle_outline":807,"../../../plots/cartesian/helpers":808,"../../dragelement/helpers":633,"./constants":698,"./helpers":701}],703:[function(b,y,F){var q=b("./constants"),n=b("../../lib");F.rangeToShapePosition=function(p){return"log"===p.type?p.r2d:function(h){return h}};F.shapePositionToRange=function(p){return"log"===p.type?p.d2r:function(h){return h}};F.decodeDate=function(p){return function(h){h.replace&&(h=h.replace("_"," "));
return p(h)}};F.encodeDate=function(p){return function(h){return p(h).replace(" ","_")}};F.extractPathCoords=function(p,h){var a=[];p.match(q.segmentRE).forEach(function(f){var d=h[f.charAt(0)].drawn;void 0!==d&&(f=f.substr(1).match(q.paramRE),!f||f.length<d||a.push(n.cleanNumber(f[d])))});return a};F.getDataToPixel=function(p,h,a){var f=p._fullLayout._size;if(h){var d=F.shapePositionToRange(h);p=function(l){return h._offset+h.r2p(d(l,!0))};"date"===h.type&&(p=F.decodeDate(p))}else p=a?function(l){return f.t+
f.h*(1-l)}:function(l){return f.l+f.w*l};return p};F.getPixelToData=function(p,h,a){var f=p._fullLayout._size;if(h){var d=F.rangeToShapePosition(h);p=function(l){return d(h.p2r(l-h._offset))}}else p=a?function(l){return 1-(l-f.t)/f.h}:function(l){return(l-f.l)/f.w};return p};F.roundPositionForSharpStrokeRendering=function(p,h){p=Math.round(p);return 1===Math.round(h%2)?p+.5:p};F.makeOptionsAndPlotinfo=function(p,h){h=p._fullLayout.shapes[h]||{};var a=p._fullLayout._plots[h.xref+h.yref];a?a._hadPlotinfo=
!0:(a={},h.xref&&"paper"!==h.xref&&(a.xaxis=p._fullLayout[h.xref+"axis"]),h.yref&&"paper"!==h.yref&&(a.yaxis=p._fullLayout[h.yref+"axis"]));a.xsizemode=h.xsizemode;a.ysizemode=h.ysizemode;a.xanchor=h.xanchor;a.yanchor=h.yanchor;return{options:h,plotinfo:a}}},{"../../lib":749,"./constants":694}],704:[function(b,y,F){F=b("./draw");y.exports={moduleType:"component",name:"shapes",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),supplyDrawNewShapeDefaults:b("./draw_newshape/defaults"),
includeBasePlot:b("../../plots/cartesian/include_components")("shapes"),calcAutorange:b("./calc_autorange"),draw:F.draw,drawOne:F.drawOne}},{"../../plots/cartesian/include_components":809,"./attributes":692,"./calc_autorange":693,"./defaults":695,"./draw":696,"./draw_newshape/defaults":699}],705:[function(b,y,F){F=b("../../plots/font_attributes");var q=b("../../plots/pad_attributes"),n=b("../../lib/extend").extendDeepAll,p=b("../../plot_api/edit_types").overrideAll,h=b("../../plots/animation_attributes"),
a=b("../../plot_api/plot_template").templatedArray;b=b("./constants");var f=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});y.exports=p(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},
steps:f,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:n(q({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",
values:h.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:F({})},font:F({}),activebgcolor:{valType:"color",dflt:b.gripBgActiveColor},bgcolor:{valType:"color",dflt:b.railBgColor},bordercolor:{valType:"color",dflt:b.railBorderColor},borderwidth:{valType:"number",min:0,dflt:b.railBorderWidth},
ticklen:{valType:"number",min:0,dflt:b.tickLength},tickcolor:{valType:"color",dflt:b.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:b.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/animation_attributes":792,"../../plots/font_attributes":825,"../../plots/pad_attributes":859,"./constants":706}],706:[function(b,y,F){y.exports={name:"sliders",containerClassName:"slider-container",
groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,
railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],707:[function(b,y,F){function q(l,
k,c){function e(u,v){return p.coerce(l,k,a,u,v)}for(var g=h(l,k,{name:"steps",handleItemDefaults:n}),m=0,r=0;r<g.length;r++)g[r].visible&&m++;if(2>m?k.visible=!1:e("visible"))k._stepCount=m,m=k._visibleSteps=p.filterVisible(g),r=e("active"),(g[r]||{}).visible||(k.active=m[0]._index),e("x"),e("y"),p.noneOrAll(l,k,["x","y"]),e("xanchor"),e("yanchor"),e("len"),e("lenmode"),e("pad.t"),e("pad.r"),e("pad.b"),e("pad.l"),p.coerceFont(e,"font",c.font),e("currentvalue.visible")&&(e("currentvalue.xanchor"),
e("currentvalue.prefix"),e("currentvalue.suffix"),e("currentvalue.offset"),p.coerceFont(e,"currentvalue.font",k.font)),e("transition.duration"),e("transition.easing"),e("bgcolor"),e("activebgcolor"),e("bordercolor"),e("borderwidth"),e("ticklen"),e("tickwidth"),e("tickcolor"),e("minorticklen")}function n(l,k){function c(g,m){return p.coerce(l,k,d,g,m)}if("skip"===l.method||Array.isArray(l.args)?c("visible"):k.visible=!1){c("method");c("args");var e=c("label","step-"+k._index);c("value",e);c("execute")}}
var p=b("../../lib"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),f=b("./constants").name,d=a.steps;y.exports=function(l,k){h(l,k,{name:f,handleItemDefaults:q})}},{"../../lib":749,"../../plots/array_container_defaults":793,"./attributes":705,"./constants":706}],708:[function(b,y,F){function q(K,N){K=K[I.name];for(var O=[],Q=0;Q<K.length;Q++){var P=K[Q];P.visible&&(P._gd=N,O.push(P))}return O}function n(K){return K._index}function p(K,N){var O=B.tester.selectAll("g."+I.labelGroupClass).data(N._visibleSteps);
O.enter().append("g").classed(I.labelGroupClass,!0);var Q=0,P=0;O.each(function(ba){var Y=C.select(this);if(ba=d(Y,{step:ba},N).node())ba=B.bBox(ba),P=Math.max(P,ba.height),Q=Math.max(Q,ba.width)});O.remove();var T=N._dims={};T.inputAreaWidth=Math.max(I.railWidth,I.gripHeight);var V=K._fullLayout._size;T.lx=V.l+V.w*N.x;T.ly=V.t+V.h*(1-N.y);T.outerLength="fraction"===N.lenmode?Math.round(V.w*N.len):N.len;T.inputAreaStart=0;T.inputAreaLength=Math.round(T.outerLength-N.pad.l-N.pad.r);T.labelStride=Math.max(1,
Math.ceil((Q+I.labelPadding)/((T.inputAreaLength-2*I.stepInset)/(N._stepCount-1))));T.labelHeight=P;T.currentValueMaxWidth=0;T.currentValueHeight=0;T.currentValueTotalHeight=0;T.currentValueMaxLines=1;if(N.currentvalue.visible){var aa=B.tester.append("g");O.each(function(ba){var Y=a(aa,N,ba.label);ba=Y.node()&&B.bBox(Y.node())||{width:0,height:0};Y=G.lineCount(Y);T.currentValueMaxWidth=Math.max(T.currentValueMaxWidth,Math.ceil(ba.width));T.currentValueHeight=Math.max(T.currentValueHeight,Math.ceil(ba.height));
T.currentValueMaxLines=Math.max(T.currentValueMaxLines,Y)});T.currentValueTotalHeight=T.currentValueHeight+N.currentvalue.offset;aa.remove()}T.height=T.currentValueTotalHeight+I.tickOffset+N.ticklen+I.labelOffset+T.labelHeight+N.pad.t+N.pad.b;O="left";t.isRightAnchor(N)&&(T.lx-=T.outerLength,O="right");t.isCenterAnchor(N)&&(T.lx-=T.outerLength/2,O="center");V="top";t.isBottomAnchor(N)&&(T.ly-=T.height,V="bottom");t.isMiddleAnchor(N)&&(T.ly-=T.height/2,V="middle");T.outerLength=Math.ceil(T.outerLength);
T.height=Math.ceil(T.height);T.lx=Math.round(T.lx);T.ly=Math.round(T.ly);V={y:N.y,b:T.height*E[V],t:T.height*L[V]};"fraction"===N.lenmode?(V.l=0,V.xl=N.x-N.len*L[O],V.r=0,V.xr=N.x+N.len*E[O]):(V.x=N.x,V.l=T.outerLength*L[O],V.r=T.outerLength*E[O]);x.autoMargin(K,I.autoMarginIdRoot+N._index,V)}function h(K,N,O){(O.steps[O.active]||{}).visible||(O.active=O._visibleSteps[0]._index);N.call(a,O).call(D,O).call(l,O).call(g,O).call(w,K,O).call(f,K,O);K=O._dims;B.setTranslate(N,K.lx+O.pad.l,K.ly+O.pad.t);
N.call(r,O,!1);N.call(a,O)}function a(K,N,O){if(N.currentvalue.visible){var Q=N._dims;switch(N.currentvalue.xanchor){case "right":var P=Q.inputAreaLength-I.currentValueInset-Q.currentValueMaxWidth;var T="left";break;case "center":P=.5*Q.inputAreaLength;T="middle";break;default:P=I.currentValueInset,T="left"}K=t.ensureSingle(K,"text",I.labelClass,function(ba){ba.classed("user-select-none",!0).attr({"text-anchor":T,"data-notex":1})});var V=N.currentvalue.prefix?N.currentvalue.prefix:"";if("string"===
typeof O)V+=O;else{O=N.steps[N.active].label;var aa=N._gd._fullLayout._meta;aa&&(O=t.templateString(O,aa));V+=O}N.currentvalue.suffix&&(V+=N.currentvalue.suffix);K.call(B.font,N.currentvalue.font).text(V).call(G.convertToTspans,N._gd);V=G.lineCount(K);G.positionText(K,P,(Q.currentValueMaxLines+1-V)*N.currentvalue.font.size*J);return K}}function f(K,N,O){t.ensureSingle(K,"rect",I.gripRectClass,function(Q){Q.call(e,N,K,O).style("pointer-events","all")}).attr({width:I.gripWidth,height:I.gripHeight,rx:I.gripRadius,
ry:I.gripRadius}).call(A.stroke,O.bordercolor).call(A.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px")}function d(K,N,O){K=t.ensureSingle(K,"text",I.labelClass,function(P){P.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})});N=N.step.label;var Q=O._gd._fullLayout._meta;Q&&(N=t.templateString(N,Q));K.call(B.font,O.font).text(N).call(G.convertToTspans,O._gd);return K}function l(K,N){K=t.ensureSingle(K,"g",I.labelsClass);var O=N._dims;K=K.selectAll("g."+I.labelGroupClass).data(O.labelSteps);
K.enter().append("g").classed(I.labelGroupClass,!0);K.exit().remove();K.each(function(Q){var P=C.select(this);P.call(d,Q,N);B.setTranslate(P,u(N,Q.fraction),I.tickOffset+N.ticklen+N.font.size*J+I.labelOffset+O.currentValueTotalHeight)})}function k(K,N,O,Q,P){Q=O._visibleSteps[Math.round(Q*(O._stepCount-1))]._index;Q!==O.active&&c(K,N,O,Q,!0,P)}function c(K,N,O,Q,P,T){var V=O.active;O.active=Q;H(K.layout,I.name,O).applyUpdate("active",Q);Q=O.steps[O.active];N.call(r,O,T);N.call(a,O);K.emit("plotly_sliderchange",
{slider:O,step:O.steps[O.active],interaction:P,previousActive:V});Q&&Q.method&&P&&(N._nextMethod?(N._nextMethod.step=Q,N._nextMethod.doCallback=P,N._nextMethod.doTransition=T):(N._nextMethod={step:Q,doCallback:P,doTransition:T},N._nextMethodRaf=window.requestAnimationFrame(function(){var aa=N._nextMethod.step;aa.method&&(aa.execute&&x.executeAPICommand(K,aa.method,aa.args),N._nextMethod=null,N._nextMethodRaf=null)})))}function e(K,N,O){var Q=O.node(),P=C.select(N);K.on("mousedown",function(){var T=
O.data()[0];N.emit("plotly_sliderstart",{slider:T});var V=O.select("."+I.gripRectClass);C.event.stopPropagation();C.event.preventDefault();V.call(A.fill,T.activebgcolor);var aa=v(T,C.mouse(Q)[0]);k(N,O,T,aa,!0);T._dragging=!0;P.on("mousemove",function(){var ba=O.data()[0],Y=v(ba,C.mouse(Q)[0]);k(N,O,ba,Y,!1)});P.on("mouseup",function(){var ba=O.data()[0];ba._dragging=!1;V.call(A.fill,ba.bgcolor);P.on("mouseup",null);P.on("mousemove",null);N.emit("plotly_sliderend",{slider:ba,step:ba.steps[ba.active]})})})}
function g(K,N){K=K.selectAll("rect."+I.tickRectClass).data(N._visibleSteps);var O=N._dims;K.enter().append("rect").classed(I.tickRectClass,!0);K.exit().remove();K.attr({width:N.tickwidth+"px","shape-rendering":"crispEdges"});K.each(function(Q,P){Q=0===P%O.labelStride;var T=C.select(this);T.attr({height:Q?N.ticklen:N.minorticklen}).call(A.fill,N.tickcolor);B.setTranslate(T,u(N,P/(N._stepCount-1))-.5*N.tickwidth,(Q?I.tickOffset:I.minorTickOffset)+O.currentValueTotalHeight)})}function m(K){var N=K._dims;
N.labelSteps=[];for(var O=K._stepCount,Q=0;Q<O;Q+=N.labelStride)N.labelSteps.push({fraction:Q/(O-1),step:K._visibleSteps[Q]})}function r(K,N,O){K=K.select("rect."+I.gripRectClass);for(var Q=0,P=0;P<N._stepCount;P++)if(N._visibleSteps[P]._index===N.active){Q=P;break}Q=u(N,Q/(N._stepCount-1));N._invokingCommand||(O&&0<N.transition.duration&&(K=K.transition().duration(N.transition.duration).ease(N.transition.easing)),K.attr("transform","translate("+(Q-.5*I.gripWidth)+","+N._dims.currentValueTotalHeight+
")"))}function u(K,N){K=K._dims;return K.inputAreaStart+I.stepInset+(K.inputAreaLength-2*I.stepInset)*Math.min(1,Math.max(0,N))}function v(K,N){K=K._dims;return Math.min(1,Math.max(0,(N-I.stepInset-K.inputAreaStart)/(K.inputAreaLength-2*I.stepInset-2*K.inputAreaStart)))}function w(K,N,O){var Q=O._dims,P=t.ensureSingle(K,"rect",I.railTouchRectClass,function(T){T.call(e,N,K,O).style("pointer-events","all")});P.attr({width:Q.inputAreaLength,height:Math.max(Q.inputAreaWidth,I.tickOffset+O.ticklen+Q.labelHeight)}).call(A.fill,
O.bgcolor).attr("opacity",0);B.setTranslate(P,0,Q.currentValueTotalHeight)}function D(K,N){var O=N._dims,Q=O.inputAreaLength-2*I.railInset;K=t.ensureSingle(K,"rect",I.railRectClass);K.attr({width:Q,height:I.railWidth,rx:I.railRadius,ry:I.railRadius,"shape-rendering":"crispEdges"}).call(A.stroke,N.bordercolor).call(A.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px");B.setTranslate(K,I.railInset,.5*(O.inputAreaWidth-I.railWidth)+O.currentValueTotalHeight)}var C=b("d3"),x=b("../../plots/plots"),
A=b("../color"),B=b("../drawing"),t=b("../../lib"),G=b("../../lib/svg_text_utils"),H=b("../../plot_api/plot_template").arrayEditor,I=b("./constants");b=b("../../constants/alignment");var J=b.LINE_SPACING,L=b.FROM_TL,E=b.FROM_BR;y.exports=function(K){function N(T){T._commandObserver&&(T._commandObserver.remove(),delete T._commandObserver);x.autoMargin(K,I.autoMarginIdRoot+T._index)}var O=K._fullLayout,Q=q(O,K);O=O._infolayer.selectAll("g."+I.containerClassName).data(0<Q.length?[0]:[]);O.enter().append("g").classed(I.containerClassName,
!0).style("cursor","ew-resize");O.exit().each(function(){C.select(this).selectAll("g."+I.groupClassName).each(N)}).remove();if(0!==Q.length){O=O.selectAll("g."+I.groupClassName).data(Q,n);O.enter().append("g").classed(I.groupClassName,!0);O.exit().each(N).remove();for(var P=0;P<Q.length;P++)p(K,Q[P]);O.each(function(T){var V=C.select(this);m(T);x.manageCommandObserver(K,T,T._visibleSteps,function(aa){var ba=V.data()[0];ba.active!==aa.index&&(ba._dragging||c(K,V,ba,aa.index,!1,!0))});h(K,C.select(this),
T)})}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,"../../plots/plots":860,"../color":615,"../drawing":637,"./constants":706,d3:169}],709:[function(b,y,F){F=b("./constants");y.exports={moduleType:"component",name:F.name,layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":705,"./constants":706,"./defaults":707,"./draw":708}],710:[function(b,y,F){var q=b("d3"),n=b("fast-isnumeric"),
p=b("../../plots/plots"),h=b("../../registry"),a=b("../../lib"),f=b("../drawing"),d=b("../color"),l=b("../../lib/svg_text_utils"),k=b("../../constants/interactions"),c=b("../../constants/alignment").OPPOSITE_SIDE,e=/ [XY][0-9]* /;y.exports={draw:function(g,m,r){function u(V){a.syncOrAsync([v,w],V)}function v(V){if(G){var aa="";G.rotate&&(aa+="rotate("+[G.rotate,t.x,t.y]+")");G.offset&&(aa+="translate(0, "+G.offset+")")}else aa=null;V.attr("transform",aa);V.style({"font-family":N,"font-size":q.round(O,
2)+"px",fill:d.rgb(Q),opacity:J*d.opacity(Q),"font-weight":p.fontWeight}).attr(t).call(l.convertToTspans,g);return p.previousPromises(g)}function w(V){V=q.select(V.node().parentNode);if(B&&B.selection&&B.side&&K){V.attr("transform",null);var aa=c[B.side],ba="left"===B.side||"top"===B.side?-1:1,Y=n(B.pad)?B.pad:2,ea=f.bBox(V.node()),da={left:0,top:0,right:I.width,bottom:I.height};da=B.maxShift||ba*(da[B.side]-ea[B.side]);var ca=0;if(0>da)ca=da;else{var la=B.offsetLeft||0,pa=B.offsetTop||0;ea.left-=
la;ea.right-=la;ea.top-=pa;ea.bottom-=pa;B.selection.each(function(){var qa=f.bBox(this);a.bBoxIntersect(ea,qa,Y)&&(ca=Math.max(ca,ba*(qa[B.side]-ea[aa])+Y))});ca=Math.min(da,ca)}(0<ca||0>da)&&V.attr("transform","translate("+{left:[-ca,0],right:[ca,0],top:[0,-ca],bottom:[0,ca]}[B.side]+")")}}function D(){J=0;L=!0;T.text(x).on("mouseover.opacity",function(){q.select(this).transition().duration(k.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){q.select(this).transition().duration(k.HIDE_PLACEHOLDER).style("opacity",
0)})}var C=r.propName,x=r.placeholder,A=r.traceIndex,B=r.avoid||{},t=r.attributes,G=r.transform,H=r.containerGroup,I=g._fullLayout,J=1,L=!1,E=r.propContainer.title,K=(E&&E.text?E.text:"").trim();E=E&&E.font?E.font:{};var N=E.family,O=E.size,Q=E.color,P;"title.text"===C?P="titleText":-1!==C.indexOf("axis")?P="axisTitleText":C.indexOf(!0)&&(P="colorbarTitleText");P=g._context.edits[P];""===K?J=0:K.replace(e," % ")===x.replace(e," % ")&&(J=.2,L=!0,P||(K=""));r._meta?K=a.templateString(K,r._meta):I._meta&&
(K=a.templateString(K,I._meta));r=K||P;H||(H=a.ensureSingle(I._infolayer,"g","g-"+m));var T=H.selectAll("text").data(r?[0]:[]);T.enter().append("text");T.text(K).attr("class",m);T.exit().remove();if(!r)return H;T.call(u);if(P){if(K)T.on(".opacity",null);else D();T.call(l.makeEditable,{gd:g}).on("edit",function(V){void 0!==A?h.call("_guiRestyle",g,C,V,A):h.call("_guiRelayout",g,C,V)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(u)}).on("input",function(V){this.text(V||" ").call(l.positionText,
t.x,t.y)})}T.classed("js-placeholder",L);return H}}},{"../../constants/alignment":717,"../../constants/interactions":723,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../../registry":880,"../color":615,"../drawing":637,d3:169,"fast-isnumeric":241}],711:[function(b,y,F){F=b("../../plots/font_attributes");var q=b("../color/attributes"),n=b("../../lib/extend").extendFlat,p=b("../../plot_api/edit_types").overrideAll,h=b("../../plots/pad_attributes");b=b("../../plot_api/plot_template").templatedArray;
var a=b("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});y.exports=p(b("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],
visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle",
"bottom"],dflt:"top"},pad:n(h({editType:"arraydraw"}),{}),font:F({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:q.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/font_attributes":825,"../../plots/pad_attributes":859,"../color/attributes":614}],712:[function(b,y,F){y.exports={name:"updatemenus",containerClassName:"updatemenu-container",
headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,
arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],713:[function(b,y,F){function q(l,k,c){function e(m,r){return p.coerce(l,k,a,m,r)}var g=h(l,k,{name:"buttons",handleItemDefaults:n});e("visible",0<g.length)&&(e("active"),e("direction"),e("type"),e("showactive"),e("x"),e("y"),p.noneOrAll(l,k,["x","y"]),e("xanchor"),e("yanchor"),e("pad.t"),e("pad.r"),e("pad.b"),
e("pad.l"),p.coerceFont(e,"font",c.font),e("bgcolor",c.paper_bgcolor),e("bordercolor"),e("borderwidth"))}function n(l,k){function c(e,g){return p.coerce(l,k,d,e,g)}c("visible","skip"===l.method||Array.isArray(l.args))&&(c("method"),c("args"),c("args2"),c("label"),c("execute"))}var p=b("../../lib"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),f=b("./constants").name,d=a.buttons;y.exports=function(l,k){h(l,k,{name:f,handleItemDefaults:q})}},{"../../lib":749,"../../plots/array_container_defaults":793,
"./attributes":711,"./constants":712}],714:[function(b,y,F){function q(J){return J._index}function n(J,L){return+J.attr(H.menuIndexAttrName)===L._index}function p(J,L,E,K,N,O,Q,P){L.active=Q;t(J.layout,H.name,L).applyUpdate("active",Q);"buttons"===L.type?a(J,K,null,null,L):"dropdown"===L.type&&(N.attr(H.menuIndexAttrName,"-1"),h(J,K,N,O,L),P||a(J,K,N,O,L))}function h(J,L,E,K,N){var O=A.ensureSingle(L,"g",H.headerClassName,function(V){V.style("pointer-events","all")}),Q=N._dims,P={y:N.pad.t,yPad:0,
x:N.pad.l,xPad:0,index:0},T={width:Q.headerWidth,height:Q.headerHeight};O.call(l,N,N.buttons[N.active]||H.blankHeaderOpts,J).call(u,N,P,T);A.ensureSingle(L,"text",H.headerArrowClassName,function(V){V.classed("user-select-none",!0).attr("text-anchor","end").call(x.font,N.font).text(H.arrowSymbol[N.direction])}).attr({x:Q.headerWidth-H.arrowOffsetX+N.pad.l,y:Q.headerHeight/2+H.textOffsetY+N.pad.t});O.on("click",function(){E.call(v,String(n(E,N)?-1:N._index));a(J,L,E,K,N)});O.on("mouseover",function(){O.call(g)});
O.on("mouseout",function(){O.call(m,N)});x.setTranslate(L,Q.lx,Q.ly)}function a(J,L,E,K,N){E||(E=L,E.attr("pointer-events","all"));var O=-1!==+E.attr(H.menuIndexAttrName)||"buttons"===N.type?N.buttons:[],Q="dropdown"===N.type?H.dropdownButtonClassName:H.buttonClassName,P=E.selectAll("g."+Q).data(A.filterVisible(O));O=P.enter().append("g").classed(Q,!0);Q=P.exit();"dropdown"===N.type?(O.attr("opacity","0").transition().attr("opacity","1"),Q.transition().attr("opacity","0").remove()):Q.remove();var T=
0,V=0;O=N._dims;Q=-1!==["up","down"].indexOf(N.direction);"dropdown"===N.type&&(Q?V=O.headerHeight+H.gapButtonHeader:T=O.headerWidth+H.gapButtonHeader);"dropdown"===N.type&&"up"===N.direction&&(V=-H.gapButtonHeader+H.gapButton-O.openHeight);"dropdown"===N.type&&"left"===N.direction&&(T=-H.gapButtonHeader+H.gapButton-O.openWidth);var aa={x:O.lx+T+N.pad.l,y:O.ly+V+N.pad.t,yPad:H.gapButton,xPad:H.gapButton,index:0};T={l:aa.x+N.borderwidth,t:aa.y+N.borderwidth};P.each(function(ba,Y){var ea=w.select(this);
ea.call(l,N,ba,J).call(u,N,aa);ea.on("click",function(){w.event.defaultPrevented||(ba.execute&&(ba.args2&&N.active===Y?(p(J,N,ba,L,E,K,-1),D.executeAPICommand(J,ba.method,ba.args2)):(p(J,N,ba,L,E,K,Y),D.executeAPICommand(J,ba.method,ba.args))),J.emit("plotly_buttonclicked",{menu:N,button:ba,active:N.active}))});ea.on("mouseover",function(){ea.call(g)});ea.on("mouseout",function(){ea.call(m,N);P.call(e,N)})});P.call(e,N);Q?(T.w=Math.max(O.openWidth,O.headerWidth),T.h=aa.y-T.t):(T.w=aa.x-T.l,T.h=Math.max(O.openHeight,
O.headerHeight));T.direction=N.direction;K&&(P.size()?f(J,L,E,K,N,T):d(K))}function f(J,L,E,K,N,O){L=N.direction;J=N._dims;N=N.active;var Q,P;if("up"===L||"down"===L)for(L=P=0;L<N;L++)P+=J.heights[L]+H.gapButton;else for(L=Q=0;L<N;L++)Q+=J.widths[L]+H.gapButton;K.enable(O,Q,P);K.hbar&&K.hbar.attr("opacity","0").transition().attr("opacity","1");K.vbar&&K.vbar.attr("opacity","0").transition().attr("opacity","1")}function d(J){var L=!!J.hbar,E=!!J.vbar;L&&J.hbar.transition().attr("opacity","0").each("end",
function(){L=!1;E||J.disable()});E&&J.vbar.transition().attr("opacity","0").each("end",function(){E=!1;L||J.disable()})}function l(J,L,E,K){J.call(k,L).call(c,L,E,K)}function k(J,L){A.ensureSingle(J,"rect",H.itemRectClassName,function(E){E.attr({rx:H.rx,ry:H.ry,"shape-rendering":"crispEdges"})}).call(C.stroke,L.bordercolor).call(C.fill,L.bgcolor).style("stroke-width",L.borderwidth+"px")}function c(J,L,E,K){J=A.ensureSingle(J,"text",H.itemTextClassName,function(O){O.classed("user-select-none",!0).attr({"text-anchor":"start",
"data-notex":1})});E=E.label;var N=K._fullLayout._meta;N&&(E=A.templateString(E,N));J.call(x.font,L.font).text(E).call(B.convertToTspans,K)}function e(J,L){var E=L.active;J.each(function(K,N){K=w.select(this);N===E&&L.showactive&&K.select("rect."+H.itemRectClassName).call(C.fill,H.activeColor)})}function g(J){J.select("rect."+H.itemRectClassName).call(C.fill,H.hoverColor)}function m(J,L){J.select("rect."+H.itemRectClassName).call(C.fill,L.bgcolor)}function r(J,L){var E=L._dims={width1:0,height1:0,
heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},K=x.tester.selectAll("g."+H.dropdownButtonClassName).data(A.filterVisible(L.buttons));K.enter().append("g").classed(H.dropdownButtonClassName,!0);var N=-1!==["up","down"].indexOf(L.direction);K.each(function(T,V){var aa=w.select(this);aa.call(l,L,T,J);aa=aa.select("."+H.itemTextClassName);T=aa.node()&&x.bBox(aa.node()).width;T=Math.max(T+H.textPadX,H.minWidth);var ba=L.font.size*G;aa=B.lineCount(aa);aa=Math.max(ba*
aa,H.minHeight)+H.textOffsetY;aa=Math.ceil(aa);T=Math.ceil(T);E.widths[V]=T;E.heights[V]=aa;E.height1=Math.max(E.height1,aa);E.width1=Math.max(E.width1,T);N?(E.totalWidth=Math.max(E.totalWidth,T),E.openWidth=E.totalWidth,E.totalHeight+=aa+H.gapButton,E.openHeight+=aa+H.gapButton):(E.totalWidth+=T+H.gapButton,E.openWidth+=T+H.gapButton,E.totalHeight=Math.max(E.totalHeight,aa),E.openHeight=E.totalHeight)});N?E.totalHeight-=H.gapButton:E.totalWidth-=H.gapButton;E.headerWidth=E.width1+H.arrowPadX;E.headerHeight=
E.height1;"dropdown"===L.type&&(N?(E.width1+=H.arrowPadX,E.totalHeight=E.height1):E.totalWidth=E.width1,E.totalWidth+=H.arrowPadX);K.remove();K=E.totalWidth+L.pad.l+L.pad.r;var O=E.totalHeight+L.pad.t+L.pad.b,Q=J._fullLayout._size;E.lx=Q.l+Q.w*L.x;E.ly=Q.t+Q.h*(1-L.y);Q="left";A.isRightAnchor(L)&&(E.lx-=K,Q="right");A.isCenterAnchor(L)&&(E.lx-=K/2,Q="center");var P="top";A.isBottomAnchor(L)&&(E.ly-=O,P="bottom");A.isMiddleAnchor(L)&&(E.ly-=O/2,P="middle");E.totalWidth=Math.ceil(E.totalWidth);E.totalHeight=
Math.ceil(E.totalHeight);E.lx=Math.round(E.lx);E.ly=Math.round(E.ly);D.autoMargin(J,H.autoMarginIdRoot+L._index,{x:L.x,y:L.y,l:K*({right:1,center:.5}[Q]||0),r:K*({left:1,center:.5}[Q]||0),b:O*({top:1,middle:.5}[P]||0),t:O*({bottom:1,middle:.5}[P]||0)})}function u(J,L,E,K){K=K||{};var N=J.select("."+H.itemRectClassName),O=J.select("."+H.itemTextClassName),Q=L.borderwidth,P=E.index,T=L._dims;x.setTranslate(J,Q+E.x,Q+E.y);J=-1!==["up","down"].indexOf(L.direction);Q=K.height||(J?T.heights[P]:T.height1);
N.attr({x:0,y:0,width:K.width||(J?T.width1:T.widths[P]),height:Q});L=L.font.size*G;K=B.lineCount(O);B.positionText(O,H.textOffsetX,Q/2-(K-1)*L/2+H.textOffsetY);J?E.y+=T.heights[P]+E.yPad:E.x+=T.widths[P]+E.xPad;E.index++}function v(J,L){J.attr(H.menuIndexAttrName,L||"-1").selectAll("g."+H.dropdownButtonClassName).remove()}var w=b("d3"),D=b("../../plots/plots"),C=b("../color"),x=b("../drawing"),A=b("../../lib"),B=b("../../lib/svg_text_utils"),t=b("../../plot_api/plot_template").arrayEditor,G=b("../../constants/alignment").LINE_SPACING,
H=b("./constants"),I=b("./scrollbox");y.exports=function(J){function L(T){D.autoMargin(J,H.autoMarginIdRoot+T._index)}var E=J._fullLayout,K=A.filterVisible(E[H.name]),N=E._menulayer.selectAll("g."+H.containerClassName).data(0<K.length?[0]:[]);N.enter().append("g").classed(H.containerClassName,!0).style("cursor","pointer");N.exit().each(function(){w.select(this).selectAll("g."+H.headerGroupClassName).each(L)}).remove();if(0!==K.length){var O=N.selectAll("g."+H.headerGroupClassName).data(K,q);O.enter().append("g").classed(H.headerGroupClassName,
!0);var Q=A.ensureSingle(N,"g",H.dropdownButtonGroupClassName,function(T){T.style("pointer-events","all")});for(N=0;N<K.length;N++)r(J,K[N]);var P=new I(J,Q,"updatemenus"+E._uid);O.enter().size()&&(Q.node().parentNode.appendChild(Q.node()),Q.call(v));O.exit().each(function(T){Q.call(v);L(T)}).remove();O.each(function(T){var V=w.select(this),aa="dropdown"===T.type?Q:null;D.manageCommandObserver(J,T,T.buttons,function(ba){p(J,T,T.buttons[ba.index],V,aa,P,ba.index,!0)});"dropdown"===T.type?(h(J,V,Q,
P,T),n(Q,T)&&a(J,V,Q,P,T)):a(J,V,null,null,T)})}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,"../../plots/plots":860,"../color":615,"../drawing":637,"./constants":712,"./scrollbox":716,d3:169}],715:[function(b,y,F){arguments[4][709][0].apply(F,arguments)},{"./attributes":711,"./constants":712,"./defaults":713,"./draw":714,dup:709}],716:[function(b,y,F){function q(f,d,l){this.gd=f;this.container=d;this.id=l;this.vbar=this.hbar=
this.translateY=this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}y.exports=q;var n=b("d3"),p=b("../color"),h=b("../drawing"),a=b("../../lib");q.barWidth=2;q.barLength=20;q.barRadius=2;q.barPad=1;q.barColor="#808BA4";q.prototype.enable=function(f,d,l){var k=this.gd._fullLayout,
c=k.width,e=k.height;this.position=f;f=this.position.l;var g=this.position.w,m=this.position.t,r=this.position.h,u=this.position.direction,v="down"===u,w="left"===u,D="up"===u,C=g,x=r;v||w||"right"===u||D||(this.position.direction="down",v=!0);if(v||D){var A=f;var B=A+C;v?(D=m,u=Math.min(D+x,e)):(u=m+x,D=Math.max(u-x,0));x=u-D}else D=m,u=D+x,w?(B=f+C,A=Math.max(B-C,0)):(A=f,B=Math.min(A+C,c)),C=B-A;this._box={l:A,t:D,w:C,h:x};v=g>C;var t=q.barLength+2*q.barPad;w=q.barWidth+2*q.barPad;var G=m+r;G+
w>e&&(G=e-w);e=this.container.selectAll("rect.scrollbar-horizontal").data(v?[0]:[]);e.exit().on(".drag",null).remove();e.enter().append("rect").classed("scrollbar-horizontal",!0).call(p.fill,q.barColor);v?(this.hbar=e.attr({rx:q.barRadius,ry:q.barRadius,x:f,y:G,width:t,height:w}),this._hbarXMin=f+t/2,this._hbarTranslateMax=C-t):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);e=r>x;C=q.barWidth+2*q.barPad;t=q.barLength+2*q.barPad;G=f+g;G+C>c&&(G=c-C);c=this.container.selectAll("rect.scrollbar-vertical").data(e?
[0]:[]);c.exit().on(".drag",null).remove();c.enter().append("rect").classed("scrollbar-vertical",!0).call(p.fill,q.barColor);e?(this.vbar=c.attr({rx:q.barRadius,ry:q.barRadius,x:G,y:m,width:C,height:t}),this._vbarYMin=m+t/2,this._vbarTranslateMax=x-t):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);c=this.id;x=A-.5;B=e?B+C+.5:B+.5;D-=.5;u=v?u+w+.5:u+.5;k=k._topdefs.selectAll("#"+c).data(v||e?[0]:[]);k.exit().remove();k.enter().append("clipPath").attr("id",c).append("rect");
v||e?(this._clipRect=k.select("rect").attr({x:Math.floor(x),y:Math.floor(D),width:Math.ceil(B)-Math.floor(x),height:Math.ceil(u)-Math.floor(D)}),this.container.call(h.setClipUrl,c,this.gd),this.bg.attr({x:f,y:m,width:g,height:r})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect);if(v||e)k=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",
null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(k),k=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault();n.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),v&&this.hbar.on(".drag",null).call(k),e&&this.vbar.on(".drag",null).call(k);this.setTranslate(d,l)};q.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect;
this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};q.prototype._onBoxDrag=function(){var f=this.translateX,d=this.translateY;this.hbar&&(f-=n.event.dx);this.vbar&&(d-=n.event.dy);this.setTranslate(f,d)};q.prototype._onBoxWheel=function(){var f=this.translateX,d=this.translateY;this.hbar&&(f+=n.event.deltaY);
this.vbar&&(d+=n.event.deltaY);this.setTranslate(f,d)};q.prototype._onBarDrag=function(){var f=this.translateX,d=this.translateY;if(this.hbar){f+=this._hbarXMin;var l=f+this._hbarTranslateMax;f=(a.constrain(n.event.x,f,l)-f)/(l-f)*(this.position.w-this._box.w)}this.vbar&&(d+=this._vbarYMin,l=d+this._vbarTranslateMax,d=(a.constrain(n.event.y,d,l)-d)/(l-d)*(this.position.h-this._box.h));this.setTranslate(f,d)};q.prototype.setTranslate=function(f,d){var l=this.position.w-this._box.w,k=this.position.h-
this._box.h;f=a.constrain(f||0,0,l);d=a.constrain(d||0,0,k);this.translateX=f;this.translateY=d;this.container.call(h.setTranslate,this._box.l-this.position.l-f,this._box.t-this.position.t-d);this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+f-.5),y:Math.floor(this.position.t+d-.5)});this.hbar&&this.hbar.call(h.setTranslate,f+f/l*this._hbarTranslateMax,d);this.vbar&&this.vbar.call(h.setTranslate,f,d+d/k*this._vbarTranslateMax)}},{"../../lib":749,"../color":615,"../drawing":637,d3:169}],
717:[function(b,y,F){y.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],718:[function(b,y,F){y.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},{}],719:[function(b,y,F){y.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",
DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],720:[function(b,y,F){y.exports={COMPARISON_OPS:"\x3d !\x3d \x3c \x3e\x3d \x3e \x3c\x3d".split(" "),COMPARISON_OPS2:["\x3d","\x3c","\x3e\x3d","\x3e","\x3c\x3d"],INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"\x3d":"\x3d","\x3c":"\x3c","\x3c\x3d":"\x3c","\x3e":"\x3e","\x3e\x3d":"\x3e","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],721:[function(b,
y,F){y.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],722:[function(b,y,F){y.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},{}],723:[function(b,y,F){y.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,DESELECTDIM:.2}},{}],724:[function(b,y,F){y.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1E4,ONEMAXYEAR:316224E5,ONEAVGYEAR:315576E5,
ONEMINYEAR:31536E6,ONEMAXQUARTER:79488E5,ONEAVGQUARTER:78894E5,ONEMINQUARTER:76896E5,ONEMAXMONTH:26784E5,ONEAVGMONTH:26298E5,ONEMINMONTH:24192E5,ONEWEEK:6048E5,ONEDAY:864E5,ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},{}],725:[function(b,y,F){F.xmlns="http://www.w3.org/2000/xmlns/";F.svg="http://www.w3.org/2000/svg";F.xlink="http://www.w3.org/1999/xlink";F.svgAttrs={xmlns:F.svg,"xmlns:xlink":F.xlink}},{}],726:[function(b,y,F){F.version=b("./version").version;
b("es6-promise").polyfill();b("../build/plotcss");b("./fonts/mathjax_config")();y=b("./registry");y=F.register=y.register;for(var q=b("./plot_api"),n=Object.keys(q),p=0;p<n.length;p++){var h=n[p];"_"!==h.charAt(0)&&(F[h]=q[h]);y({moduleType:"apiMethod",name:h,fn:q[h]})}y(b("./traces/scatter"));y([b("./components/legend"),b("./components/fx"),b("./components/annotations"),b("./components/annotations3d"),b("./components/shapes"),b("./components/images"),b("./components/updatemenus"),b("./components/sliders"),
b("./components/rangeslider"),b("./components/rangeselector"),b("./components/grid"),b("./components/errorbars"),b("./components/colorscale"),b("./components/colorbar")]);y([b("./locale-en"),b("./locale-en-us")]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(y(window.PlotlyLocales),delete window.PlotlyLocales);F.Icons=b("./fonts/ploticon");F.Plots=b("./plots/plots");F.Fx=b("./components/fx");F.Snapshot=b("./snapshot");F.PlotSchema=b("./plot_api/plot_schema");F.Queue=b("./lib/queue");
F.d3=b("d3")},{"../build/plotcss":1,"./components/annotations":606,"./components/annotations3d":611,"./components/colorbar":621,"./components/colorscale":627,"./components/errorbars":643,"./components/fx":655,"./components/grid":659,"./components/images":664,"./components/legend":672,"./components/rangeselector":683,"./components/rangeslider":690,"./components/shapes":704,"./components/sliders":709,"./components/updatemenus":715,"./fonts/mathjax_config":727,"./fonts/ploticon":728,"./lib/queue":764,
"./locale-en":778,"./locale-en-us":777,"./plot_api":782,"./plot_api/plot_schema":786,"./plots/plots":860,"./registry":880,"./snapshot":885,"./traces/scatter":1167,"./version":1337,d3:169,"es6-promise":224}],727:[function(b,y,F){y.exports=function(){"undefined"!==typeof MathJax&&"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],728:[function(b,
y,F){y.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",
transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},
eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",
transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 132 132'\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}\x3c/style\x3e\x3c/defs\x3e\x3ctitle\x3eplotly-logomark\x3c/title\x3e\x3cg id\x3d'symbol'\x3e\x3crect class\x3d'cls-1' width\x3d'132' height\x3d'132' rx\x3d'6' ry\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'54' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'102' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'54' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'54' r\x3d'6'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/\x3e\x3c/g\x3e\x3c/svg\x3e"}}},
{}],729:[function(b,y,F){F.isLeftAnchor=function(q){return"left"===q.xanchor||"auto"===q.xanchor&&q.x<=1/3};F.isCenterAnchor=function(q){return"center"===q.xanchor||"auto"===q.xanchor&&q.x>1/3&&q.x<2/3};F.isRightAnchor=function(q){return"right"===q.xanchor||"auto"===q.xanchor&&q.x>=2/3};F.isTopAnchor=function(q){return"top"===q.yanchor||"auto"===q.yanchor&&q.y>=2/3};F.isMiddleAnchor=function(q){return"middle"===q.yanchor||"auto"===q.yanchor&&q.y>1/3&&q.y<2/3};F.isBottomAnchor=function(q){return"bottom"===
q.yanchor||"auto"===q.yanchor&&q.y<=1/3}},{}],730:[function(b,y,F){function q(k){return Math.abs(k[1]-k[0])>l-1E-14}function n(k,c){return f(c-k,l)}function p(k,c){if(q(c))return!0;if(c[0]<c[1]){var e=c[0];c=c[1]}else e=c[1],c=c[0];e=a(e,l);c=a(c,l);e>c&&(c+=l);k=a(k,l);var g=k+l;return k>=e&&k<=c||g>=e&&g<=c}function h(k,c,e,g,m,r,u){function v(B,t){return[B*Math.cos(t)+m,r-B*Math.sin(t)]}function w(B,t,G){return"A"+[B,B]+" "+[0,A,G]+" "+v(B,t)}m=m||0;r=r||0;var D=q([e,g]);if(D){var C=0;var x=d;
e=l}else e<g?(C=e,e=g):C=g;k<c?(g=k,k=c):g=c;var A=Math.abs(e-C)<=d?0:1;D?D=null===g?"M"+v(k,C)+w(k,x,0)+w(k,e,0)+"Z":"M"+v(g,C)+w(g,x,0)+w(g,e,0)+"ZM"+v(k,C)+w(k,x,1)+w(k,e,1)+"Z":null===g?(D="M"+v(k,C)+w(k,e,0),u&&(D+="L0,0Z")):D="M"+v(g,C)+"L"+v(k,C)+w(k,e,0)+"L"+v(g,e)+w(g,C,1)+"Z";return D}b=b("./mod");var a=b.mod,f=b.modHalf,d=Math.PI,l=2*d;y.exports={deg2rad:function(k){return k/180*d},rad2deg:function(k){return k/d*180},angleDelta:n,angleDist:function(k,c){return Math.abs(n(k,c))},isFullCircle:q,
isAngleInsideSector:p,isPtInsideSector:function(k,c,e,g){if(!p(c,g))return!1;e[0]<e[1]?(c=e[0],e=e[1]):(c=e[1],e=e[0]);return k>=c&&k<=e},pathArc:function(k,c,e,g,m){return h(null,k,c,e,g,m,0)},pathSector:function(k,c,e,g,m){return h(null,k,c,e,g,m,1)},pathAnnulus:function(k,c,e,g,m,r){return h(k,c,e,g,m,r,1)}}},{"./mod":756}],731:[function(b,y,F){function q(d){return a.isView(d)&&!(d instanceof f)}function n(d){return h(d)||q(d)}function p(d,l,k){if(n(d)){if(n(d[0])){for(var c=0;c<d.length;c++)k=
l(k,d[c].length);return k}return d.length}return 0}var h=Array.isArray,a="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},f="undefined"===typeof DataView?function(){}:DataView;F.isTypedArray=q;F.isArrayOrTypedArray=n;F.isArray1D=function(d){return!n(d[0])};F.ensureArray=function(d,l){h(d)||(d=[]);d.length=l;return d};F.concat=function(){var d=[],l=!0,k=0,c,e;for(c=0;c<arguments.length;c++){var g=arguments[c];if(e=g.length){if(m)d.push(g);else{var m=g;
var r=e}if(h(g))var u=!1;else l=!1,k?u!==g.constructor&&(u=!1):u=g.constructor;k+=e}}if(!k)return[];if(!d.length)return m;if(l)return m.concat.apply(m,d);if(u){l=new u(k);l.set(m);for(c=0;c<d.length;c++)g=d[c],l.set(g,r),r+=g.length;return l}l=Array(k);for(k=0;k<m.length;k++)l[k]=m[k];for(c=0;c<d.length;c++){g=d[c];for(k=0;k<g.length;k++)l[r+k]=g[k];r+=k}return l};F.maxRowLength=function(d){return p(d,Math.max,0)};F.minRowLength=function(d){return p(d,Math.min,Infinity)}},{}],732:[function(b,y,F){var q=
b("fast-isnumeric"),n=b("../constants/numerical").BADNUM,p=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;y.exports=function(h){"string"===typeof h&&(h=h.replace(p,""));return q(h)?Number(h):n}},{"../constants/numerical":724,"fast-isnumeric":241}],733:[function(b,y,F){y.exports=function(q){q=q._fullLayout;q._glcanvas&&q._glcanvas.size()&&q._glcanvas.each(function(n){n.regl&&n.regl.clear({color:!0,depth:!0})})}},{}],734:[function(b,y,F){y.exports=function(q){q._responsiveChartHandler&&(window.removeEventListener("resize",
q._responsiveChartHandler),delete q._responsiveChartHandler)}},{}],735:[function(b,y,F){function q(e,g){var m=F.valObjectMeta[g.valType];if(g.arrayOk&&c(e))return!0;if(m.validateFunction)return m.validateFunction(e,g);var r={},u=r;m.coerceFunction(e,{set:function(v){u=v}},r,g);return u!==r}var n=b("fast-isnumeric"),p=b("tinycolor2"),h=b("../plots/attributes"),a=b("../components/colorscale/scales"),f=b("../constants/interactions").DESELECTDIM,d=b("./nested_property"),l=b("./regex").counter,k=b("./mod").modHalf,
c=b("./array").isArrayOrTypedArray;F.valObjectMeta={data_array:{coerceFunction:function(e,g,m){c(e)?g.set(e):void 0!==m&&g.set(m)}},enumerated:{coerceFunction:function(e,g,m,r){r.coerceNumber&&(e=+e);-1===r.values.indexOf(e)?g.set(m):g.set(e)},validateFunction:function(e,g){g.coerceNumber&&(e=+e);g=g.values;for(var m=0;m<g.length;m++){var r=String(g[m]);if("/"===r.charAt(0)&&"/"===r.charAt(r.length-1)){if((new RegExp(r.substr(1,r.length-2))).test(e))return!0}else if(e===g[m])return!0}return!1}},"boolean":{coerceFunction:function(e,
g,m){!0===e||!1===e?g.set(e):g.set(m)}},number:{coerceFunction:function(e,g,m,r){!n(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?g.set(m):g.set(+e)}},integer:{coerceFunction:function(e,g,m,r){e%1||!n(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?g.set(m):g.set(+e)}},string:{coerceFunction:function(e,g,m,r){"string"!==typeof e?!0===r.strict||"number"!==typeof e?g.set(m):g.set(String(e)):r.noBlank&&!e?g.set(m):g.set(e)}},color:{coerceFunction:function(e,g,m){p(e).isValid()?g.set(e):g.set(m)}},
colorlist:{coerceFunction:function(e,g,m){function r(u){return p(u).isValid()}Array.isArray(e)&&e.length?e.every(r)?g.set(e):g.set(m):g.set(m)}},colorscale:{coerceFunction:function(e,g,m){g.set(a.get(e,m))}},angle:{coerceFunction:function(e,g,m){"auto"===e?g.set("auto"):n(e)?g.set(k(+e,360)):g.set(m)}},subplotid:{coerceFunction:function(e,g,m,r){r=r.regex||l(m);"string"===typeof e&&r.test(e)?g.set(e):g.set(m)},validateFunction:function(e,g){g=g.dflt;return e===g?!0:"string"!==typeof e?!1:l(g).test(e)?
!0:!1}},flaglist:{coerceFunction:function(e,g,m,r){if("string"!==typeof e)g.set(m);else if(-1!==(r.extras||[]).indexOf(e))g.set(e);else{e=e.split("+");for(var u=0;u<e.length;){var v=e[u];-1===r.flags.indexOf(v)||e.indexOf(v)<u?e.splice(u,1):u++}e.length?g.set(e.join("+")):g.set(m)}}},any:{coerceFunction:function(e,g,m){void 0===e?g.set(m):g.set(e)}},info_array:{coerceFunction:function(e,g,m,r){function u(H,I,J){var L;void 0===J&&(J=I.dflt);F.valObjectMeta[I.valType].coerceFunction(H,{set:function(E){L=
E}},J,I);return L}var v=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(e)&&Array.isArray(e[0]);if(Array.isArray(e)){r=r.items;var w=[],D=Array.isArray(r),C=D&&v&&Array.isArray(r[0]);C=v&&D&&!C;var x=D&&!C?r.length:e.length,A;m=Array.isArray(m)?m:[];if(v)for(v=0;v<x;v++){w[v]=[];var B=Array.isArray(e[v])?e[v]:[];var t=C?r.length:D?r[v].length:B.length;for(A=0;A<t;A++){var G=C?r[A]:D?r[v][A]:r;G=u(B[A],G,(m[v]||[])[A]);void 0!==G&&(w[v][A]=G)}}else for(v=0;v<x;v++)G=u(e[v],D?r[v]:r,m[v]),void 0!==
G&&(w[v]=G);g.set(w)}else g.set(m)},validateFunction:function(e,g){if(!Array.isArray(e))return!1;var m=g.items,r=Array.isArray(m),u=2===g.dimensions;if(!g.freeLength&&e.length!==m.length)return!1;for(var v=0;v<e.length;v++)if(u){if(!Array.isArray(e[v])||!g.freeLength&&e[v].length!==m[v].length)return!1;for(var w=0;w<e[v].length;w++)if(!q(e[v][w],r?m[v][w]:m))return!1}else if(!q(e[v],r?m[v]:m))return!1;return!0}}};F.coerce=function(e,g,m,r,u){m=d(m,r).get();var v=d(e,r);e=d(g,r);v=v.get();g=g._template;
void 0===v&&g&&(v=d(g,r).get(),g=0);void 0===u&&(u=m.dflt);if(m.arrayOk&&c(v))return e.set(v),v;var w=F.valObjectMeta[m.valType].coerceFunction;w(v,e,u,m);var D=e.get();g&&D===u&&!q(v,m)&&(v=d(g,r).get(),w(v,e,u,m),D=e.get());return D};F.coerce2=function(e,g,m,r,u){var v=d(e,r);e=F.coerce(e,g,m,r,u);v=v.get();return void 0!==v&&null!==v?e:!1};F.coerceFont=function(e,g,m){var r={};m=m||{};r.family=e(g+".family",m.family);r.size=e(g+".size",m.size);r.color=e(g+".color",m.color);return r};F.coerceHoverinfo=
function(e,g,m){var r=g._module.attributes;r=r.hoverinfo?r:h;var u=r.hoverinfo;if(1===m._dataLength){m="all"===u.dflt?u.flags.slice():u.dflt.split("+");m.splice(m.indexOf("name"),1);var v=m.join("+")}return F.coerce(e,g,r,"hoverinfo",v)};F.coerceSelectionMarkerOpacity=function(e,g){if(e.marker){var m=e.marker.opacity;if(void 0!==m){if(!c(m)&&!e.selected&&!e.unselected){var r=m;var u=f*m}g("selected.marker.opacity",r);g("unselected.marker.opacity",u)}}};F.validate=q},{"../components/colorscale/scales":630,
"../constants/interactions":723,"../plots/attributes":794,"./array":731,"./mod":756,"./nested_property":757,"./regex":765,"fast-isnumeric":241,tinycolor2:548}],736:[function(b,y,F){function q(L){return L&&u.componentsRegistry.calendars&&"string"===typeof L&&"gregorian"!==L}function n(L,E){return String(L+Math.pow(10,E)).substr(1)}function p(L,E,K,N,O){if(E||K||N||O)if(L+=" "+n(E,2)+":"+n(K,2),N||O)if(L+=":"+n(N,2),O){for(E=4;0===O%10;)--E,O/=10;L+="."+n(O,E)}return L}function h(L,E,K,N){L=L.replace(H,
function(Q){Q=Math.min(+Q.charAt(1)||6,6);return(E/1E3%1+2).toFixed(Q).substr(2).replace(/0+$/,"")||"0"});var O=new Date(Math.floor(E+.05));if(q(N))try{L=u.getComponentMethod("calendars","worldCalFmt")(L,E,N)}catch(Q){return"Invalid"}return K(L)(O)}var a=b("d3-time-format").timeFormat,f=b("fast-isnumeric"),d=b("./loggers"),l=b("./mod").mod;y=b("../constants/numerical");var k=y.BADNUM,c=y.ONEDAY,e=y.ONEHOUR,g=y.ONEMIN,m=y.ONESEC,r=y.EPOCHJD,u=b("../registry"),v=b("d3-time-format").utcFormat,w=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,
D=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,C=(new Date).getFullYear()-70;F.dateTick0=function(L,E){return q(L)?E?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[L]:u.getComponentMethod("calendars","CANONICAL_TICK")[L]:E?"2000-01-02":"2000-01-01"};F.dfltRange=function(L){return q(L)?u.getComponentMethod("calendars","DFLTRANGE")[L]:["2000-01-01","2001-01-01"]};F.isJSDate=function(L){return"object"===
typeof L&&null!==L&&"function"===typeof L.getTime};F.dateTime2ms=function(L,E){if(F.isJSDate(L)){E=L.getTimezoneOffset()*g;var K=(L.getUTCMinutes()-L.getMinutes())*g+(L.getUTCSeconds()-L.getSeconds())*m+(L.getUTCMilliseconds()-L.getMilliseconds());if(K){var N=3*g;E=E-N/2+l(K-E+N/2,N)}L=Number(L)-E;return L>=x&&L<=A?L:k}if("string"!==typeof L&&"number"!==typeof L)return k;L=String(L);K=q(E);var O=L.charAt(0);!K||"G"!==O&&"g"!==O||(L=L.substr(1),E="");O=K&&"chinese"===E.substr(0,7);var Q=L.match(O?
D:w);if(!Q)return k;L=Q[1];var P=Q[3]||"1",T=Number(Q[5]||1),V=Number(Q[7]||0),aa=Number(Q[9]||0);Q=Number(Q[11]||0);if(K){if(2===L.length)return k;L=Number(L);try{var ba=u.getComponentMethod("calendars","getCal")(E);if(O){var Y="i"===P.charAt(P.length-1);P=parseInt(P,10);N=ba.newDate(L,ba.toMonthIndex(L,P,Y),T)}else N=ba.newDate(L,Number(P),T)}catch(ea){return k}return N?(N.toJD()-r)*c+V*e+aa*g+Q*m:k}L=2===L.length?(Number(L)+2E3-C)%100+C:Number(L);--P;E=new Date(Date.UTC(2E3,P,T,V,aa));E.setUTCFullYear(L);
return E.getUTCMonth()!==P||E.getUTCDate()!==T?k:E.getTime()+Q*m};var x=F.MIN_MS=F.dateTime2ms("-9999");var A=F.MAX_MS=F.dateTime2ms("9999-12-31 23:59:59.9999");F.isDateTime=function(L,E){return F.dateTime2ms(L,E)!==k};var B=90*c,t=3*e,G=5*g;F.ms2DateTime=function(L,E,K){if("number"!==typeof L||!(L>=x&&L<=A))return k;E||(E=0);var N=Math.floor(10*l(L+.05,1)),O=Math.round(L-N/10);if(q(K)){var Q=Math.floor(O/c)+r;L=Math.floor(l(L,c));try{var P=u.getComponentMethod("calendars","getCal")(K).fromJD(Q).formatDate("yyyy-mm-dd")}catch(T){P=
v("G%Y-%m-%d")(new Date(O))}if("-"===P.charAt(0))for(;11>P.length;)P="-0"+P.substr(1);else for(;10>P.length;)P="0"+P;K=E<B?Math.floor(L/e):0;O=E<B?Math.floor(L%e/g):0;Q=E<t?Math.floor(L%g/m):0;E=E<G?L%m*10+N:0}else L=new Date(O),P=v("%Y-%m-%d")(L),K=E<B?L.getUTCHours():0,O=E<B?L.getUTCMinutes():0,Q=E<t?L.getUTCSeconds():0,E=E<G?10*L.getUTCMilliseconds()+N:0;return p(P,K,O,Q,E)};F.ms2DateTimeLocal=function(L){if(!(L>=x+c&&L<=A-c))return k;var E=Math.floor(10*l(L+.05,1)),K=new Date(Math.round(L-E/10));
L=a("%Y-%m-%d")(K);var N=K.getHours(),O=K.getMinutes(),Q=K.getSeconds();E=10*K.getUTCMilliseconds()+E;return p(L,N,O,Q,E)};F.cleanDate=function(L,E,K){if(L===k)return E;if(F.isJSDate(L)||"number"===typeof L&&isFinite(L)){if(q(K))return d.error("JS Dates and milliseconds are incompatible with world calendars",L),E;L=F.ms2DateTimeLocal(+L);if(!L&&void 0!==E)return E}else if(!F.isDateTime(L,K))return d.error("unrecognized date",L),E;return L};var H=/%\d?f/g,I=[59,59.9,59.99,59.999,59.9999];F.formatDate=
function(L,E,K,N,O,Q){O=q(O)&&O;if(!E)if("y"===K)E=Q.year;else if("m"===K)E=Q.month;else if("d"===K)E=Q.dayMonth+"\n"+Q.year;else{E=K;K=l(L+.05,c);K=n(Math.floor(K/e),2)+":"+n(l(Math.floor(K/g),60),2);if("M"!==E){f(E)||(E=0);var P=(100+Math.min(l(L/m,60),I[E])).toFixed(E).substr(1);0<E&&(P=P.replace(/0+$/,"").replace(/[\.]$/,""));K+=":"+P}return K+"\n"+h(Q.dayMonthYear,L,N,O)}return h(E,L,N,O)};var J=3*c;F.incrementMonth=function(L,E,K){K=q(K)&&K;var N=l(L,c);L=Math.round(L-N);if(K)try{var O=Math.round(L/
c)+r,Q=u.getComponentMethod("calendars","getCal")(K),P=Q.fromJD(O);E%12?Q.add(P,E,"m"):Q.add(P,E/12,"y");return(P.toJD()-r)*c+N}catch(T){d.error("invalid ms "+L+" in calendar "+K)}L=new Date(L+J);return L.setUTCMonth(L.getUTCMonth()+E)+N-J};F.findExactDates=function(L,E){for(var K=0,N=0,O=0,Q=0,P,T=q(E)&&u.getComponentMethod("calendars","getCal")(E),V=0;V<L.length;V++)if(E=L[V],!f(E))Q++;else if(!(E%c))if(T)try{P=T.fromJD(E/c+r),1===P.day()?1===P.month()?K++:N++:O++}catch(aa){}else P=new Date(E),
1===P.getUTCDate()?0===P.getUTCMonth()?K++:N++:O++;N+=K;L=L.length-Q;return{exactYears:K/L,exactMonths:N/L,exactDays:(O+N)/L}}},{"../constants/numerical":724,"../registry":880,"./loggers":753,"./mod":756,"d3-time-format":166,"fast-isnumeric":241}],737:[function(b,y,F){function q(a){var f=a&&a.parentNode;f&&f.removeChild(a)}function n(a,f,d){a="plotly.js-style-"+a;var l=document.getElementById(a);l||(l=document.createElement("style"),l.setAttribute("id",a),l.appendChild(document.createTextNode("")),
document.head.appendChild(l));a=l.sheet;a.insertRule?a.insertRule(f+"{"+d+"}",0):a.addRule?a.addRule(f,d,0):h.warn("addStyleRule failed")}var p=b("d3"),h=b("./loggers");y.exports={getGraphDiv:function(a){if("string"===typeof a){var f=document.getElementById(a);if(null===f)throw Error("No DOM element with id '"+a+"' exists on the page.");return f}if(null===a||void 0===a)throw Error("DOM element provided is null or undefined");return a},isPlotDiv:function(a){a=p.select(a);return a.node()instanceof HTMLElement&&
a.size()&&a.classed("js-plotly-plot")},removeElement:q,addStyleRule:function(a,f){n("global",a,f)},addRelatedStyleRule:n,deleteRelatedStyleRule:function(a){(a=document.getElementById("plotly.js-style-"+a))&&q(a)}}},{"./loggers":753,d3:169}],738:[function(b,y,F){var q=b("events").EventEmitter;y.exports={init:function(n){if(n._ev instanceof q)return n;var p=new q,h=new q;n._ev=p;n._internalEv=h;n.on=p.on.bind(p);n.once=p.once.bind(p);n.removeListener=p.removeListener.bind(p);n.removeAllListeners=p.removeAllListeners.bind(p);
n._internalOn=h.on.bind(h);n._internalOnce=h.once.bind(h);n._removeInternalListener=h.removeListener.bind(h);n._removeAllInternalListeners=h.removeAllListeners.bind(h);n.emit=function(a,f){"undefined"!==typeof jQuery&&jQuery(n).trigger(a,f);p.emit(a,f);h.emit(a,f)};return n},triggerHandler:function(n,p,h){function a(k){if(k.listener){if(d.removeListener(p,k.listener),!k.fired)return k.fired=!0,k.listener.apply(d,[h])}else return k.apply(d,[h])}var f;"undefined"!==typeof jQuery&&(f=jQuery(n).triggerHandler(p,
h));var d=n._ev;if(!d)return f;n=d._events[p];if(!n)return f;n=Array.isArray(n)?n:[n];var l;for(l=0;l<n.length-1;l++)a(n[l]);n=a(n[l]);return void 0!==f?f:n},purge:function(n){delete n._ev;delete n.on;delete n.once;delete n.removeListener;delete n.removeAllListeners;delete n.emit;delete n._ev;delete n._internalEv;delete n._internalOn;delete n._internalOnce;delete n._removeInternalListener;delete n._removeAllInternalListeners;return n}}},{events:110}],739:[function(b,y,F){function q(h,a,f,d){var l=
h[0],k=h.length,c,e,g;if(2===k&&p(l)&&p(h[1])&&0===l.length){a:{var m=h[1];for(e=0;e<m.length;e++){var r=m[e];if(null!==r&&"object"===typeof r){m=!1;break a}void 0!==r&&(l[e]=r)}m=!0}if(m)return l;l.splice(0,l.length)}for(r=1;r<k;r++)for(c in m=h[r],m){var u=l[c];e=m[c];if(d&&p(e))l[c]=e;else if(a&&e&&(n(e)||(g=p(e))))g?(g=!1,u=u&&p(u)?u:[]):u=u&&n(u)?u:{},l[c]=q([u,e],a,f,d);else if("undefined"!==typeof e||f)l[c]=e}return l}var n=b("./is_plain_object.js"),p=Array.isArray;F.extendFlat=function(){return q(arguments,
!1,!1,!1)};F.extendDeep=function(){return q(arguments,!0,!1,!1)};F.extendDeepAll=function(){return q(arguments,!0,!0,!1)};F.extendDeepNoArrays=function(){return q(arguments,!0,!1,!0)}},{"./is_plain_object.js":750}],740:[function(b,y,F){y.exports=function(q){for(var n={},p=[],h=0,a=0;a<q.length;a++){var f=q[a];1!==n[f]&&(n[f]=1,p[h++]=f)}return p}},{}],741:[function(b,y,F){function q(p){return!0===p.visible}function n(p){p=p[0].trace;return!0===p.visible&&0!==p._length}y.exports=function(p){for(var h=
Array.isArray(p)&&Array.isArray(p[0])&&p[0][0]&&p[0][0].trace?n:q,a=[],f=0;f<p.length;f++){var d=p[f];h(d)&&a.push(d)}return a}},{}],742:[function(b,y,F){function q(m){m=m.geojson;var r=window.PlotlyGeoAssets||{};r="string"===typeof m?r[m]:m;return l(r)?r:(d.error("Oops ... something went wrong when fetching "+m),!1)}var n=b("d3"),p=b("country-regex"),h=b("@turf/area"),a=b("@turf/centroid"),f=b("@turf/bbox");F=b("./identity");var d=b("./loggers"),l=b("./is_plain_object"),k=b("./nested_property"),
c=b("./polygon"),e=Object.keys(p),g={"ISO-3":F,"USA-states":F,"country names":function(m){for(var r=0;r<e.length;r++){var u=e[r];if((new RegExp(p[u])).test(m.trim().toLowerCase()))return u}d.log("Unrecognized country name: "+m+".");return!1}};y.exports={locationToFeature:function(m,r,u){if(!r||"string"!==typeof r)return!1;r=g[m](r);var v;if(r){if("USA-states"===m)for(m=[],v=0;v<u.length;v++){var w=u[v];w.properties&&w.properties.gu&&"USA"===w.properties.gu&&m.push(w)}else m=u;for(v=0;v<m.length;v++)if(w=
m[v],w.id===r)return w;d.log(["Location with id",r,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(m){function r(x){for(var A=0;A<x.length-1;A++)if(0<x[A][0]&&0>x[A+1][0])return A;return null}var u=m.geometry,v=u.coordinates;m=m.id;var w=[],D,C;m="RUS"===m||"FJI"===m?function(x){if(null===r(x))var A=x;else for(A=Array(x.length),C=0;C<x.length;C++)A[C]=[0>x[C][0]?x[C][0]+360:x[C][0],x[C][1]];w.push(c.tester(A))}:"ATA"===m?function(x){var A=
r(x);if(null===A)return w.push(c.tester(x));var B=Array(x.length+1),t=0;for(C=0;C<x.length;C++)C>A?B[t++]=[x[C][0]+360,x[C][1]]:C===A?(B[t++]=x[C],B[t++]=[x[C][0],-90]):B[t++]=x[C];x=c.tester(B);x.pts.pop();w.push(x)}:function(x){w.push(c.tester(x))};switch(u.type){case "MultiPolygon":for(u=0;u<v.length;u++)for(D=0;D<v[u].length;D++)m(v[u][D]);break;case "Polygon":for(u=0;u<v.length;u++)m(v[u])}return w},getTraceGeojson:q,extractTraceFeature:function(m){function r(B){var t=k(B,u.featureidkey||"id").get(),
G=w[t];if(G){var H=B.geometry;if("Polygon"===H.type||"MultiPolygon"===H.type){H={type:"Feature",id:t,geometry:H,properties:{}};var I=H.properties,J=H.geometry;if("MultiPolygon"===J.type){J=J.coordinates;for(var L=0,E=0;E<J.length;E++){var K={type:"Polygon",coordinates:J[E]},N=h.default(K);if(N>L){L=N;var O=K}}}else O=J;O=a.default(O).geometry.coordinates;I.ct=O;G.fIn=B;G.fOut=H;D.push(H)}else d.log(["Location",G.loc,"does not have a valid GeoJSON geometry. Traces with locationmode *geojson-id* only support *Polygon* and *MultiPolygon* geometries."].join(" "))}delete w[t]}
var u=m[0].trace,v=q(u);if(!v)return!1;var w={},D=[],C;for(C=0;C<u._length;C++){var x=m[C];if(x.loc||0===x.loc)w[x.loc]=x}switch(v.type){case "FeatureCollection":m=v.features;for(C=0;C<m.length;C++)r(m[C]);break;case "Feature":r(v);break;default:return d.warn(["Invalid GeoJSON type",(v.type||"none")+".","Traces with locationmode *geojson-id* only support *FeatureCollection* and *Feature* types."].join(" ")),!1}for(var A in w)d.log(["Location *"+A+"*","does not have a matching feature with id-key",
"*"+u.featureidkey+"*."].join(" "));return D},fetchTraceGeoData:function(m){function r(x){return new Promise(function(A,B){n.json(x,function(t,G){if(t)return delete v[x],B(Error(404===t.status?'GeoJSON at URL "'+x+'" does not exist.':"Unexpected error while fetching from "+x));v[x]=G;return A(G)})})}function u(x){return new Promise(function(A,B){var t=0,G=setInterval(function(){if(v[x]&&"pending"!==v[x])return clearInterval(G),A(v[x]);if(100<t)return clearInterval(G),B("Unexpected error while fetching from "+
x);t++},50)})}for(var v=window.PlotlyGeoAssets||{},w=[],D=0;D<m.length;D++){var C=m[D][0].trace.geojson;"string"===typeof C&&(v[C]?"pending"===v[C]&&w.push(u(C)):(v[C]="pending",w.push(r(C))))}return w},computeBbox:function(m){return f.default(m)}}},{"./identity":747,"./is_plain_object":750,"./loggers":753,"./nested_property":757,"./polygon":761,"@turf/area":59,"@turf/bbox":60,"@turf/centroid":61,"country-regex":139,d3:169}],743:[function(b,y,F){var q=b("../constants/numerical").BADNUM;F.calcTraceToLineCoords=
function(n){for(var p=n[0].trace.connectgaps,h=[],a=[],f=0;f<n.length;f++){var d=n[f].lonlat;d[0]!==q?a.push(d):!p&&0<a.length&&(h.push(a),a=[])}0<a.length&&h.push(a);return h};F.makeLine=function(n){return 1===n.length?{type:"LineString",coordinates:n[0]}:{type:"MultiLineString",coordinates:n}};F.makePolygon=function(n){if(1===n.length)return{type:"Polygon",coordinates:n};for(var p=Array(n.length),h=0;h<n.length;h++)p[h]=[n[h]];return{type:"MultiPolygon",coordinates:p}};F.makeBlank=function(){return{type:"Point",
coordinates:[]}}},{"../constants/numerical":724}],744:[function(b,y,F){function q(d,l,k,c,e,g,m,r){k-=d;var u=e-d;e=m-e;c-=l;m=g-l;r-=g;g=k*r-e*c;if(0===g)return null;r=(u*r-e*m)/g;u=(u*c-k*m)/g;return 0>u||1<u||0>r||1<r?null:{x:d+k*r,y:l+c*r}}function n(d,l,k,c,e){var g=c*d+e*l;if(0>g)return c*c+e*e;if(g>k)return k=c-d,l=e-l,k*k+l*l;l=c*l-e*d;return l*l/k}var p=b("./mod").mod;F.segmentsIntersect=q;F.segmentDistance=function(d,l,k,c,e,g,m,r){if(q(d,l,k,c,e,g,m,r))return 0;var u=k-d,v=c-l,w=m-e,D=
r-g,C=u*u+v*v,x=w*w+D*D;d=Math.min(n(u,v,C,e-d,g-l),n(u,v,C,m-d,r-l),n(w,D,x,d-e,l-g),n(w,D,x,k-e,c-g));return Math.sqrt(d)};var h,a,f;F.getTextLocation=function(d,l,k,c){if(d!==a||c!==f)h={},a=d,f=c;if(h[k])return h[k];var e=d.getPointAtLength(p(k-c/2,l));c=d.getPointAtLength(p(k+c/2,l));var g=Math.atan((c.y-e.y)/(c.x-e.x));d=d.getPointAtLength(p(k,l));e={x:(4*d.x+e.x+c.x)/6,y:(4*d.y+e.y+c.y)/6,theta:g};return h[k]=e};F.clearLocationCache=function(){a=null};F.getVisibleSegment=function(d,l,k){function c(x){var A=
d.getPointAtLength(x);0===x?w=A:x===u&&(D=A);x=A.x<e?e-A.x:A.x>g?A.x-g:0;A=A.y<m?m-A.y:A.y>r?A.y-r:0;return Math.sqrt(x*x+A*A)}var e=l.left,g=l.right,m=l.top,r=l.bottom;l=0;for(var u=d.getTotalLength(),v=u,w,D,C=c(l);C;){l+=C+k;if(l>v)return;C=c(l)}for(C=c(v);C;){v-=C+k;if(l>v)return;C=c(v)}return{min:l,max:v,len:v-l,total:u,isClosed:0===l&&v===u&&.1>Math.abs(w.x-D.x)&&.1>Math.abs(w.y-D.y)}};F.findPointOnPath=function(d,l,k,c){c=c||{};var e=c.pathLength||d.getTotalLength(),g=c.tolerance||.001;c=c.iterationLimit||
30;for(var m=d.getPointAtLength(0)[k]>d.getPointAtLength(e)[k]?-1:1,r=0,u=0,v,w,D;r<c&&!(v=(u+e)/2,w=d.getPointAtLength(v),D=w[k]-l,Math.abs(D)<g);)0<m*D?e=v:u=v,r++;return w}},{"./mod":756}],745:[function(b,y,F){function q(c,e){c[3]*=e;return c}function n(c){if(h(c))return k;c=f(c);return c.length?c:k}function p(c){return h(c)?c:1}var h=b("fast-isnumeric"),a=b("tinycolor2"),f=b("color-normalize"),d=b("../components/colorscale");F=b("../components/color/attributes").defaultLine;var l=b("./array").isArrayOrTypedArray,
k=f(F);y.exports={formatColor:function(c,e,g){var m=c.color,r=l(m),u=l(e),v=[];var w=void 0!==d.extractOpts(c).colorscale?d.makeColorScaleFuncFromTrace(c):n;c=r?function(x,A){return void 0===x[A]?k:f(w(x[A]))}:n;var D=u?function(x,A){return void 0===x[A]?1:p(x[A])}:p;if(r||u)for(var C=0;C<g;C++)r=c(m,C),u=D(e,C),v[C]=q(r,u);else v=q(f(m),e);return v},parseColorScale:function(c,e){void 0===e&&(e=1);c=d.extractOpts(c);return(c.reversescale?d.flipScale(c.colorscale):c.colorscale).map(function(g){var m=
g[0];g=a(g[1]).toRgb();return{index:m,rgb:[g.r,g.g,g.b,e]}})}}},{"../components/color/attributes":614,"../components/colorscale":627,"./array":731,"color-normalize":125,"fast-isnumeric":241,tinycolor2:548}],746:[function(b,y,F){function q(n){return[n]}b=b("./identity");y.exports={keyFun:function(n){return n.key},repeat:q,descend:b,wrap:q,unwrap:function(n){return n[0]}}},{"./identity":747}],747:[function(b,y,F){y.exports=function(q){return q}},{}],748:[function(b,y,F){y.exports=function(q,n){if(!n)return q;
var p=1/Math.abs(n);p=1<p?(p*q+p*n)/p:q+n;var h=String(p).length;16<h&&h>=String(q).length+String(n).length&&(q=parseFloat(p).toPrecision(12),-1===q.indexOf("e+")&&(p=+q));return p}},{}],749:[function(b,y,F){function q(C){var x={},A;for(A in C)for(var B=C[A],t=0;t<B.length;t++)x[B[t]]=+A;return x}function n(C,x,A){var B=this,t=arguments;x||(x={});var G={};return C.replace(l.TEMPLATE_STRING_REGEX,function(H,I,J){var L,E;for(E=3;E<t.length;E++)if(L=t[E]){if(L.hasOwnProperty(I)){var K=L[I];break}r.test(I)||
(K=G[I]||l.nestedProperty(L,I).get())&&(G[I]=K);if(void 0!==K)break}if(void 0===K&&B)return B.count<B.max&&l.warn("Variable '"+I+"' in "+B.name+" could not be found!"),B.count===B.max&&l.warn("Too many "+B.name+" warnings - additional warnings will be suppressed"),B.count++,H;J?(":"===J[0]&&(H=A?A.numberFormat:p.format,K=H(J.replace(w,""))(K)),"|"===J[0]&&(H=A?A.timeFormat:h,K=l.dateTime2ms(K),K=l.formatDate(K,J.replace(w,""),!1,H))):x.hasOwnProperty(I+"Label")&&(K=x[I+"Label"]);return K})}var p=
b("d3"),h=b("d3-time-format").utcFormat,a=b("fast-isnumeric");F=b("../constants/numerical");var f=F.FP_SAFE,d=F.BADNUM,l=y.exports={};l.nestedProperty=b("./nested_property");l.keyedContainer=b("./keyed_container");l.relativeAttr=b("./relative_attr");l.isPlainObject=b("./is_plain_object");l.toLogRange=b("./to_log_range");l.relinkPrivateKeys=b("./relink_private");y=b("./array");l.isTypedArray=y.isTypedArray;l.isArrayOrTypedArray=y.isArrayOrTypedArray;l.isArray1D=y.isArray1D;l.ensureArray=y.ensureArray;
l.concat=y.concat;l.maxRowLength=y.maxRowLength;l.minRowLength=y.minRowLength;y=b("./mod");l.mod=y.mod;l.modHalf=y.modHalf;y=b("./coerce");l.valObjectMeta=y.valObjectMeta;l.coerce=y.coerce;l.coerce2=y.coerce2;l.coerceFont=y.coerceFont;l.coerceHoverinfo=y.coerceHoverinfo;l.coerceSelectionMarkerOpacity=y.coerceSelectionMarkerOpacity;l.validate=y.validate;y=b("./dates");l.dateTime2ms=y.dateTime2ms;l.isDateTime=y.isDateTime;l.ms2DateTime=y.ms2DateTime;l.ms2DateTimeLocal=y.ms2DateTimeLocal;l.cleanDate=
y.cleanDate;l.isJSDate=y.isJSDate;l.formatDate=y.formatDate;l.incrementMonth=y.incrementMonth;l.dateTick0=y.dateTick0;l.dfltRange=y.dfltRange;l.findExactDates=y.findExactDates;l.MIN_MS=y.MIN_MS;l.MAX_MS=y.MAX_MS;y=b("./search");l.findBin=y.findBin;l.sorterAsc=y.sorterAsc;l.sorterDes=y.sorterDes;l.distinctVals=y.distinctVals;l.roundUp=y.roundUp;l.sort=y.sort;l.findIndexOfMin=y.findIndexOfMin;y=b("./stats");l.aggNums=y.aggNums;l.len=y.len;l.mean=y.mean;l.median=y.median;l.midRange=y.midRange;l.variance=
y.variance;l.stdev=y.stdev;l.interp=y.interp;y=b("./matrix");l.init2dArray=y.init2dArray;l.transposeRagged=y.transposeRagged;l.dot=y.dot;l.translationMatrix=y.translationMatrix;l.rotationMatrix=y.rotationMatrix;l.rotationXYMatrix=y.rotationXYMatrix;l.apply2DTransform=y.apply2DTransform;l.apply2DTransform2=y.apply2DTransform2;y=b("./angles");l.deg2rad=y.deg2rad;l.rad2deg=y.rad2deg;l.angleDelta=y.angleDelta;l.angleDist=y.angleDist;l.isFullCircle=y.isFullCircle;l.isAngleInsideSector=y.isAngleInsideSector;
l.isPtInsideSector=y.isPtInsideSector;l.pathArc=y.pathArc;l.pathSector=y.pathSector;l.pathAnnulus=y.pathAnnulus;y=b("./anchor_utils");l.isLeftAnchor=y.isLeftAnchor;l.isCenterAnchor=y.isCenterAnchor;l.isRightAnchor=y.isRightAnchor;l.isTopAnchor=y.isTopAnchor;l.isMiddleAnchor=y.isMiddleAnchor;l.isBottomAnchor=y.isBottomAnchor;y=b("./geometry2d");l.segmentsIntersect=y.segmentsIntersect;l.segmentDistance=y.segmentDistance;l.getTextLocation=y.getTextLocation;l.clearLocationCache=y.clearLocationCache;l.getVisibleSegment=
y.getVisibleSegment;l.findPointOnPath=y.findPointOnPath;y=b("./extend");l.extendFlat=y.extendFlat;l.extendDeep=y.extendDeep;l.extendDeepAll=y.extendDeepAll;l.extendDeepNoArrays=y.extendDeepNoArrays;y=b("./loggers");l.log=y.log;l.warn=y.warn;l.error=y.error;y=b("./regex");l.counterRegex=y.counter;y=b("./throttle");l.throttle=y.throttle;l.throttleDone=y.done;l.clearThrottle=y.clear;y=b("./dom");l.getGraphDiv=y.getGraphDiv;l.isPlotDiv=y.isPlotDiv;l.removeElement=y.removeElement;l.addStyleRule=y.addStyleRule;
l.addRelatedStyleRule=y.addRelatedStyleRule;l.deleteRelatedStyleRule=y.deleteRelatedStyleRule;l.clearResponsive=b("./clear_responsive");l.makeTraceGroups=b("./make_trace_groups");l._=b("./localize");l.notifier=b("./notifier");l.filterUnique=b("./filter_unique");l.filterVisible=b("./filter_visible");l.pushUnique=b("./push_unique");l.increment=b("./increment");l.cleanNumber=b("./clean_number");l.ensureNumber=function(C){if(!a(C))return d;C=Number(C);return C<-f||C>f?d:a(C)?Number(C):d};l.isIndex=function(C,
x){return void 0!==x&&C>=x?!1:a(C)&&0<=C&&0===C%1};l.noop=b("./noop");l.identity=b("./identity");l.repeat=function(C,x){for(var A=Array(x),B=0;B<x;B++)A[B]=C;return A};l.swapAttrs=function(C,x,A,B){A||(A="x");B||(B="y");for(var t=0;t<x.length;t++){var G=x[t],H=l.nestedProperty(C,G.replace("?",A));G=l.nestedProperty(C,G.replace("?",B));var I=H.get();H.set(G.get());G.set(I)}};l.raiseToTop=function(C){C.parentNode.appendChild(C)};l.cancelTransition=function(C){return C.transition().duration(0)};l.constrain=
function(C,x,A){return x>A?Math.max(A,Math.min(x,C)):Math.max(x,Math.min(A,C))};l.bBoxIntersect=function(C,x,A){A=A||0;return C.left<=x.right+A&&x.left<=C.right+A&&C.top<=x.bottom+A&&x.top<=C.bottom+A};l.simpleMap=function(C,x,A,B,t){for(var G=C.length,H=Array(G),I=0;I<G;I++)H[I]=x(C[I],A,B,t);return H};l.randstr=function G(x,A,B,t){B||(B=16);void 0===A&&(A=24);if(0>=A)return"0";var H=Math.log(Math.pow(2,A))/Math.log(B),I="",J;for(J=2;Infinity===H;J*=2)H=Math.log(Math.pow(2,A/J))/Math.log(B)*J;var L=
H-Math.floor(H);for(J=0;J<Math.floor(H);J++){var E=Math.floor(Math.random()*B).toString(B);I=E+I}L&&(H=Math.pow(B,L),E=Math.floor(Math.random()*H).toString(B),I=E+I);H=parseInt(I,B);return x&&x[I]||Infinity!==H&&H>=Math.pow(2,A)?10<t?(l.warn("randstr failed uniqueness"),I):G(x,A,B,(t||0)+1):I};l.OptionControl=function(x,A){x||(x={});A||(A="opt");var B={optionList:[],_newoption:function(t){t[A]=x;B[t.name]=t;B.optionList.push(t)}};B["_"+A]=x;return B};l.smooth=function(x,A){A=Math.round(A)||0;if(2>
A)return x;var B=x.length,t=2*B,G=2*A-1,H=Array(G),I=Array(B),J,L,E;for(J=0;J<G;J++)H[J]=(1-Math.cos(Math.PI*(J+1)/A))/(2*A);for(J=0;J<B;J++){for(L=E=0;L<G;L++){var K=J+L+1-A;K<-B?K-=t*Math.round(K/t):K>=t&&(K-=t*Math.floor(K/t));0>K?K=-1-K:K>=B&&(K=t-1-K);E+=x[K]*H[L]}I[J]=E}return I};l.syncOrAsync=function(x,A,B){function t(){return l.syncOrAsync(x,A,B)}for(var G;x.length;)if(G=x.splice(0,1)[0],(G=G(A))&&G.then)return G.then(t).then(void 0,l.promiseError);return B&&B(A)};l.stripTrailingSlash=function(x){return"/"===
x.substr(-1)?x.substr(0,x.length-1):x};l.noneOrAll=function(x,A,B){if(x){var t=!1,G=!0,H;for(H=0;H<B.length;H++){var I=x[B[H]];void 0!==I&&null!==I?t=!0:G=!1}if(t&&!G)for(H=0;H<B.length;H++)x[B[H]]=A[B[H]]}};l.mergeArray=function(x,A,B,t){var G="function"===typeof t;if(l.isArrayOrTypedArray(x))for(var H=Math.min(x.length,A.length),I=0;I<H;I++){var J=x[I];A[I][B]=G?t(J):J}};l.mergeArrayCastPositive=function(x,A,B){return l.mergeArray(x,A,B,function(t){t=+t;return isFinite(t)?0<t?t:0:0})};l.fillArray=
function(x,A,B,t){t=t||l.identity;if(l.isArrayOrTypedArray(x))for(var G=0;G<A.length;G++)A[G][B]=t(x[G])};l.castOption=function(x,A,B,t){t=t||l.identity;x=l.nestedProperty(x,B).get();return l.isArrayOrTypedArray(x)?Array.isArray(A)&&l.isArrayOrTypedArray(x[A[0]])?t(x[A[0]][A[1]]):t(x[A]):x};l.extractOption=function(x,A,B,t){if(B in x)return x[B];x=l.nestedProperty(A,t).get();if(!Array.isArray(x))return x};l.tagSelected=function(x,A,B){var t=A.selectedpoints;A=A._indexToPoints;var G;A&&(G=q(A));for(A=
0;A<t.length;A++){var H=t[A];if(l.isIndex(H)||l.isArrayOrTypedArray(H)&&l.isIndex(H[0])&&l.isIndex(H[1]))H=G?G[H]:H,H=B?B[H]:H,void 0!==H&&H<x.length&&(x[H].selected=1)}};l.selIndices2selPoints=function(x){var A=x.selectedpoints;if(x=x._indexToPoints){x=q(x);for(var B=[],t=0;t<A.length;t++){var G=A[t];l.isIndex(G)&&(G=x[G],l.isIndex(G)&&B.push(G))}return B}return A};l.getTargetArray=function(x,A){A=A.target;return"string"===typeof A&&A?(x=l.nestedProperty(x,A).get(),Array.isArray(x)?x:!1):Array.isArray(A)?
A:!1};l.minExtend=function(x,A){var B={};"object"!==typeof A&&(A={});var t=Object.keys(x),G;for(G=0;G<t.length;G++){var H=t[G];var I=x[H];"_"!==H.charAt(0)&&"function"!==typeof I&&("module"===H?B[H]=I:Array.isArray(I)?B[H]="colorscale"===H?I.slice():I.slice(0,3):l.isTypedArray(I)?B[H]=I.subarray(0,3):B[H]=I&&"object"===typeof I?l.minExtend(x[H],A[H]):I)}t=Object.keys(A);for(G=0;G<t.length;G++)H=t[G],I=A[H],"object"===typeof I&&H in B&&"object"===typeof B[H]||(B[H]=I);return B};l.titleCase=function(x){return x.charAt(0).toUpperCase()+
x.substr(1)};l.containsAny=function(x,A){for(var B=0;B<A.length;B++)if(-1!==x.indexOf(A[B]))return!0;return!1};l.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob};var k=/MSIE [1-9]\./;l.isIE9orBelow=function(){return l.isIE()&&k.test(window.navigator.userAgent)};var c=/Version\/[\d\.]+.*Safari/;l.isSafari=function(){return c.test(window.navigator.userAgent)};var e=/iPad|iPhone|iPod/;l.isIOS=function(){return e.test(window.navigator.userAgent)};l.isD3Selection=function(x){return x&&
"function"===typeof x.classed};l.ensureSingle=function(x,A,B,t){var G=x.select(A+(B?"."+B:""));if(G.size())return G;x=x.append(A);B&&x.classed(B,!0);t&&x.call(t);return x};l.ensureSingleById=function(x,A,B,t){var G=x.select(A+"#"+B);if(G.size())return G;x=x.append(A).attr("id",B);t&&x.call(t);return x};l.objectFromPath=function(x,A){x=x.split(".");for(var B,t=B={},G=0;G<x.length;G++){var H=x[G],I;(I=x[G].match(/(.*)\[([0-9]+)\]/))?(H=I[1],I=I[2],B=B[H]=[],B[I]=G===x.length-1?A:{},B=B[I]):(B[H]=G===
x.length-1?A:{},B=B[H])}return t};var g=/^([^\[\.]+)\.(.+)?/,m=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;l.expandObjectPaths=function(x){var A,B;if("object"===typeof x&&!Array.isArray(x))for(B in x)if(x.hasOwnProperty(B))if(A=B.match(g)){var t=x[B];var G=A[1];delete x[B];x[G]=l.extendDeepNoArrays(x[G]||{},l.objectFromPath(B,l.expandObjectPaths(t))[G])}else if(A=B.match(m)){t=x[B];G=A[1];var H=parseInt(A[2]);delete x[B];x[G]=x[G]||[];"."===A[3]?(A=A[4],G=x[G][H]=x[G][H]||{},l.extendDeepNoArrays(G,l.objectFromPath(A,
l.expandObjectPaths(t)))):x[G][H]=l.expandObjectPaths(t)}else x[B]=l.expandObjectPaths(x[B]);return x};l.numSeparate=function(x,A,B){B||(B=!1);if("string"!==typeof A||0===A.length)throw Error("Separator string required for formatting!");"number"===typeof x&&(x=String(x));var t=/(\d+)(\d{3})/,G=A.charAt(0);A=A.charAt(1);x=x.split(".");var H=x[0];G=1<x.length?G+x[1]:"";if(A&&(1<x.length||4<H.length||B))for(;t.test(H);)H=H.replace(t,"$1"+A+"$2");return H+G};l.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;
var r=/^\w*$/;l.templateString=function(x,A){var B={};return x.replace(l.TEMPLATE_STRING_REGEX,function(t,G){r.test(G)?t=A[G]:(B[G]=B[G]||l.nestedProperty(A,G).get,t=B[G]());return l.isValidTextValue(t)?t:""})};var u={max:10,count:0,name:"hovertemplate"};l.hovertemplateString=function(){return n.apply(u,arguments)};var v={max:10,count:0,name:"texttemplate"};l.texttemplateString=function(){return n.apply(v,arguments)};var w=/^[:|\|]/;l.subplotSort=function(x,A){for(var B=Math.min(x.length,A.length)+
1,t=0,G=0,H=0;H<B;H++){var I=x.charCodeAt(H)||0,J=A.charCodeAt(H)||0,L=48<=I&&57>=I,E=48<=J&&57>=J;L&&(t=10*t+I-48);E&&(G=10*G+J-48);if(!L||!E){if(t!==G)return t-G;if(I!==J)return I-J}}return G-t};var D=2E9;l.seedPseudoRandom=function(){D=2E9};l.pseudoRandom=function(){var x=D;D=(69069*D+1)%4294967296;return 429496729>Math.abs(D-x)?l.pseudoRandom():D/4294967296};l.fillText=function(x,A,B){var t=Array.isArray(B)?function(H){B.push(H)}:function(H){B.text=H},G=l.extractOption(x,A,"htx","hovertext");
if(l.isValidTextValue(G))return t(G);x=l.extractOption(x,A,"tx","text");if(l.isValidTextValue(x))return t(x)};l.isValidTextValue=function(x){return x||0===x};l.formatPercent=function(x,A){A=A||0;x=(Math.round(100*x*Math.pow(10,A))*Math.pow(.1,A)).toFixed(A)+"%";for(var B=0;B<A;B++)-1!==x.indexOf(".")&&(x=x.replace("0%","%"),x=x.replace(".%","%"));return x};l.isHidden=function(x){x=window.getComputedStyle(x).display;return!x||"none"===x};l.getTextTransform=function(x){var A=x.noCenter,B=x.textX,t=
x.textY,G=x.targetX,H=x.targetY,I=x.anchorX||0,J=x.anchorY||0,L=x.rotate;(x=x.scale)?1<x&&(x=1):x=0;return"translate("+(G-x*(B+I))+","+(H-x*(t+J))+")"+(1>x?"scale("+x+")":"")+(L?"rotate("+L+(A?"":" "+B+" "+t)+")":"")};l.ensureUniformFontSize=function(x,A){var B=l.extendFlat({},A);B.size=Math.max(A.size,x._fullLayout.uniformtext.minsize||0);return B}},{"../constants/numerical":724,"./anchor_utils":729,"./angles":730,"./array":731,"./clean_number":732,"./clear_responsive":734,"./coerce":735,"./dates":736,
"./dom":737,"./extend":739,"./filter_unique":740,"./filter_visible":741,"./geometry2d":744,"./identity":747,"./increment":748,"./is_plain_object":750,"./keyed_container":751,"./localize":752,"./loggers":753,"./make_trace_groups":754,"./matrix":755,"./mod":756,"./nested_property":757,"./noop":758,"./notifier":759,"./push_unique":763,"./regex":765,"./relative_attr":766,"./relink_private":767,"./search":768,"./stats":771,"./throttle":774,"./to_log_range":775,d3:169,"d3-time-format":166,"fast-isnumeric":241}],
750:[function(b,y,F){y.exports=function(q){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(q):"[object Object]"===Object.prototype.toString.call(q)&&Object.getPrototypeOf(q)===Object.prototype}},{}],751:[function(b,y,F){var q=b("./nested_property"),n=/^\w*$/;y.exports=function(p,h,a,f){a=a||"name";f=f||"value";var d,l={};if(h&&h.length){var k=q(p,h);var c=k.get()}else c=p;h=h||"";var e={};if(c)for(d=0;d<c.length;d++)e[c[d][a]]=d;var g=n.test(f),
m={set:function(r,u){var v=null===u?4:0;if(!c){if(!k||4===v)return;c=[];k.set(c)}var w=e[r];if(void 0===w){if(4===v)return;v|=3;w=c.length;e[r]=w}else u!==(g?c[w][f]:q(c[w],f).get())&&(v|=2);var D=c[w]=c[w]||{};D[a]=r;g?D[f]=u:q(D,f).set(u);null!==u&&(v&=-5);l[w]|=v;return m},get:function(r){if(c&&(r=e[r],void 0!==r))return g?c[r][f]:q(c[r],f).get()},rename:function(r,u){var v=e[r];if(void 0===v)return m;l[v]|=1;e[u]=v;delete e[r];c[v][a]=u;return m},remove:function(r){var u=e[r];if(void 0===u)return m;
var v=c[u];if(2<Object.keys(v).length)return l[u]|=2,m.set(r,null);if(g){for(d=u;d<c.length;d++)l[d]|=3;for(d=u;d<c.length;d++)e[c[d][a]]--;c.splice(u,1);delete e[r]}else q(v,f).set(null),l[u]|=6;return m},constructUpdate:function(){for(var r,u,v={},w=Object.keys(l),D=0;D<w.length;D++)u=w[D],r=h+"["+u+"]",c[u]?(l[u]&1&&(v[r+"."+a]=c[u][a]),l[u]&2&&(v[r+"."+f]=g?l[u]&4?null:c[u][f]:l[u]&4?null:q(c[u],f).get())):v[r]=null;return v}};return m}},{"./nested_property":757}],752:[function(b,y,F){var q=b("../registry");
y.exports=function(n,p){for(var h=n._context.locale,a=0;2>a;a++){for(var f=n._context.locales,d=0;2>d;d++){if(f=(f[h]||{}).dictionary)if(f=f[p])return f;f=q.localeRegistry}d=h.split("-")[0];if(d===h)break;h=d}return p}},{"../registry":880}],753:[function(b,y,F){function q(h,a){if(h&&h.apply)try{h.apply(console,a);return}catch(d){}for(var f=0;f<a.length;f++)try{h(a[f])}catch(d){console.log(a[f])}}var n=b("../plot_api/plot_config").dfltConfig,p=b("./notifier");b=y.exports={};b.log=function(){var h;
if(1<n.logging){var a=["LOG:"];for(h=0;h<arguments.length;h++)a.push(arguments[h]);q(console.trace||console.log,a)}if(1<n.notifyOnLogging){a=[];for(h=0;h<arguments.length;h++)a.push(arguments[h]);p(a.join("\x3cbr\x3e"),"long")}};b.warn=function(){var h;if(0<n.logging){var a=["WARN:"];for(h=0;h<arguments.length;h++)a.push(arguments[h]);q(console.trace||console.log,a)}if(0<n.notifyOnLogging){a=[];for(h=0;h<arguments.length;h++)a.push(arguments[h]);p(a.join("\x3cbr\x3e"),"stick")}};b.error=function(){var h;
if(0<n.logging){var a=["ERROR:"];for(h=0;h<arguments.length;h++)a.push(arguments[h]);q(console.error,a)}if(0<n.notifyOnLogging){a=[];for(h=0;h<arguments.length;h++)a.push(arguments[h]);p(a.join("\x3cbr\x3e"),"stick")}}},{"../plot_api/plot_config":785,"./notifier":759}],754:[function(b,y,F){var q=b("d3");y.exports=function(n,p,h){p=n.selectAll("g."+h.replace(/\s/g,".")).data(p,function(f){return f[0].trace.uid});p.exit().remove();p.enter().append("g").attr("class",h);p.order();var a=n.classed("rangeplot")?
"nodeRangePlot3":"node3";p.each(function(f){f[0][a]=q.select(this)});return p}},{d3:169}],755:[function(b,y,F){F.init2dArray=function(q,n){for(var p=Array(q),h=0;h<q;h++)p[h]=Array(n);return p};F.transposeRagged=function(q){var n=0,p=q.length,h,a;for(h=0;h<p;h++)n=Math.max(n,q[h].length);var f=Array(n);for(h=0;h<n;h++)for(f[h]=Array(p),a=0;a<p;a++)f[h][a]=q[a][h];return f};F.dot=function(q,n){if(!q.length||!n.length||q.length!==n.length)return null;var p=q.length,h;if(q[0].length){var a=Array(p);
for(h=0;h<p;h++)a[h]=F.dot(q[h],n)}else if(n[0].length)for(n=F.transposeRagged(n),a=Array(n.length),h=0;h<n.length;h++)a[h]=F.dot(q,n[h]);else for(h=a=0;h<p;h++)a+=q[h]*n[h];return a};F.translationMatrix=function(q,n){return[[1,0,q],[0,1,n],[0,0,1]]};F.rotationMatrix=function(q){q=q*Math.PI/180;return[[Math.cos(q),-Math.sin(q),0],[Math.sin(q),Math.cos(q),0],[0,0,1]]};F.rotationXYMatrix=function(q,n,p){return F.dot(F.dot(F.translationMatrix(n,p),F.rotationMatrix(q)),F.translationMatrix(-n,-p))};F.apply2DTransform=
function(q){return function(){var n=arguments;3===n.length&&(n=n[0]);n=1===arguments.length?n[0]:[n[0],n[1]];return F.dot(q,[n[0],n[1],1]).slice(0,2)}};F.apply2DTransform2=function(q){var n=F.apply2DTransform(q);return function(p){return n(p.slice(0,2)).concat(n(p.slice(2,4)))}}},{}],756:[function(b,y,F){y.exports={mod:function(q,n){q%=n;return 0>q?q+n:q},modHalf:function(q,n){return Math.abs(q)>n/2?q-Math.round(q/n)*n:q}}},{}],757:[function(b,y,F){function q(k,c){return function(){var e=k,g,m;for(g=
0;g<c.length-1;g++){var r=c[g];if(-1===r){r=!0;var u=[];for(m=0;m<e.length;m++)u[m]=q(e[m],c.slice(g+1))(),u[m]!==u[0]&&(r=!1);return r?u[0]:u}if("number"===typeof r&&!d(e))return;e=e[r];if("object"!==typeof e||null===e)return}if("object"===typeof e&&null!==e&&(u=e[c[g]],null!==u))return u}}function n(k,c){return void 0===k||null===k&&!c.match(l)}function p(k,c,e){return function(g){var m=k,r="",u=[[k,r]],v=n(g,e),w;for(w=0;w<c.length-1;w++){var D=c[w];if("number"===typeof D&&!d(m))throw"array index but container is not an array";
if(-1===D){v=m;r=c.slice(w+1);D=g;var C=e,x=d(D),A=!0,B=D,t=C.replace("-1",0),G=x?!1:n(D,t),H=r[0];for(u=0;u<v.length;u++)t=C.replace("-1",u),x&&(B=D[u%D.length],G=n(B,t)),G&&(A=!1),h(v,u,H,G)&&p(v[u],r,C.replace("-1",u))(B);if(v=!A)break;else return}if(!h(m,D,c[w+1],v))break;m=m[D];if("object"!==typeof m||null===m)throw"container is not an object";C=D;f(D)?C="["+D+"]":r&&(C="."+D);r+=C;u.push([m,r])}if(v){if(w===c.length-1&&(delete m[c[w]],Array.isArray(m)&&+c[w]===m.length-1))for(;m.length&&void 0===
m[m.length-1];)m.pop()}else m[c[w]]=g}}function h(k,c,e,g){if(void 0===k[c]){if(g)return!1;k[c]="number"===typeof e?[]:{}}return!0}function a(k,c,e){return{set:function(){throw"bad container";},get:function(){},astr:c,parts:e,obj:k}}var f=b("fast-isnumeric"),d=b("./array").isArrayOrTypedArray;y.exports=function(k,c){if(f(c))c=String(c);else if("string"!==typeof c||"[-1]"===c.substr(c.length-4))throw"bad property string";for(var e=0,g=c.split("."),m,r;e<g.length;){if(m=String(g[e]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(m[1])g[e]=
m[1];else if(0===e)g.splice(0,1);else throw"bad property string";m=m[2].substr(1,m[2].length-2).split("][");for(r=0;r<m.length;r++)e++,g.splice(e,0,Number(m[r]))}e++}return"object"!==typeof k?a(k,c,g):{set:p(k,g,c),get:q(k,g),astr:c,parts:g,obj:k}};var l=/(^|\.)args\[/},{"./array":731,"fast-isnumeric":241}],758:[function(b,y,F){y.exports=function(){}},{}],759:[function(b,y,F){var q=b("d3"),n=b("fast-isnumeric"),p=[];y.exports=function(h,a){function f(l){l.duration(700).style("opacity",0).each("end",
function(k){k=p.indexOf(k);-1!==k&&p.splice(k,1);q.select(this).remove()})}if(-1===p.indexOf(h)){p.push(h);var d=1E3;n(a)?d=a:"long"===a&&(d=3E3);h=q.select("body").selectAll(".plotly-notifier").data([0]);h.enter().append("div").classed("plotly-notifier",!0);h.selectAll(".notifier-note").data(p).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(l){var k=q.select(this);k.append("button").classed("notifier-close",!0).html("\x26times;").on("click",function(){k.transition().call(f)});
var c=k.append("p");l=l.split(/<br\s*\/?>/g);for(var e=0;e<l.length;e++)e&&c.append("br"),c.append("span").text(l[e]);"stick"===a?k.transition().duration(350).style("opacity",1):k.transition().duration(700).style("opacity",1).transition().delay(d).call(f)})}}},{d3:169,"fast-isnumeric":241}],760:[function(b,y,F){var q=b("./setcursor");y.exports=function(n,p){var h=n.attr("data-savedcursor");if(p){if(!h){h=(n.attr("class")||"").split(" ");for(var a=0;a<h.length;a++){var f=h[a];0===f.indexOf("cursor-")&&
n.attr("data-savedcursor",f.substr(7)).classed(f,!1)}n.attr("data-savedcursor")||n.attr("data-savedcursor","!!")}q(n,p)}else h&&(n.attr("data-savedcursor",null),"!!"===h?q(n):q(n,h))}},{"./setcursor":769}],761:[function(b,y,F){var q=b("./matrix").dot,n=b("../constants/numerical").BADNUM,p=y.exports={};p.tester=function(h){function a(v,w){var D=v[0],C=v[1];return D===n||D<l||D>k||C===n||C<c||C>e||w&&m(v)?!1:!0}function f(v,w){var D=v[0];v=v[1];if(D===n||D<l||D>k||v===n||v<c||v>e)return!1;var C=d.length,
x=d[0][0],A=d[0][1],B=0,t;for(t=1;t<C;t++){var G=x;var H=A;x=d[t][0];A=d[t][1];var I=Math.min(G,x);if(!(D<I||D>Math.max(G,x)||v>Math.max(H,A)))if(v<Math.min(H,A))D!==I&&B++;else{G=x===G?v:H+(D-G)*(A-H)/(x-G);if(v===G)return 1===t&&w?!1:!0;v<=G&&D!==I&&B++}}return 1===B%2}var d=h.slice(),l=d[0][0],k=l,c=d[0][1],e=c;d.push(d[0]);for(h=1;h<d.length;h++)l=Math.min(l,d[h][0]),k=Math.max(k,d[h][0]),c=Math.min(c,d[h][1]),e=Math.max(e,d[h][1]);var g=!1;if(5===d.length)if(d[0][0]===d[1][0]){if(d[2][0]===d[3][0]&&
d[0][1]===d[3][1]&&d[1][1]===d[2][1]){g=!0;var m=function(v){return v[0]===d[0][0]}}}else d[0][1]===d[1][1]&&d[2][1]===d[3][1]&&d[0][0]===d[3][0]&&d[1][0]===d[2][0]&&(g=!0,m=function(v){return v[1]===d[0][1]});var r=!0,u=d[0];for(h=1;h<d.length;h++)if(u[0]!==d[h][0]||u[1]!==d[h][1]){r=!1;break}return{xmin:l,xmax:k,ymin:c,ymax:e,pts:d,contains:g?a:f,isRect:g,degenerate:r}};p.isSegmentBent=function(h,a,f,d){var l=h[a],k=[h[f][0]-l[0],h[f][1]-l[1]],c=q(k,k),e=Math.sqrt(c);e=[-k[1]/e,k[0]/e];for(a+=1;a<
f;a++){var g=[h[a][0]-l[0],h[a][1]-l[1]];var m=q(g,k);if(0>m||m>c||Math.abs(q(g,e))>d)return!0}return!1};p.filter=function(h,a){function f(e){h.push(e);e=d.length;var g=l;d.splice(k+1);for(var m=g+1;m<h.length;m++)if(m===h.length-1||p.isSegmentBent(h,g,m+1,a))d.push(h[m]),d.length<e-2&&(l=m,k=d.length-1),g=m}var d=[h[0]],l=0,k=0;if(1<h.length){var c=h.pop();f(c)}return{addPt:f,raw:h,filtered:d}}},{"../constants/numerical":724,"./matrix":755}],762:[function(b,y,F){(function(q){var n=b("./show_no_webgl_msg"),
p=b("regl");y.exports=function(h,a){var f=h._fullLayout,d=!0;f._glcanvas.each(function(l){if(!l.regl&&(!l.pick||f._has("parcoords"))){try{l.regl=p({canvas:this,attributes:{antialias:!l.pick,preserveDrawingBuffer:!0},pixelRatio:h._context.plotGlPixelRatio||q.devicePixelRatio,extensions:a||[]})}catch(k){d=!1}l.regl||(d=!1);d&&this.addEventListener("webglcontextlost",function(k){h&&h.emit&&h.emit("plotly_webglcontextlost",{event:k,layer:l.key})},!1)}});d||n({container:f._glcontainer.node()});return d}}).call(this,
"undefined"!==typeof fb?fb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":770,regl:512}],763:[function(b,y,F){y.exports=function(q,n){if(n instanceof RegExp){for(var p=n.toString(),h=0;h<q.length;h++)if(q[h]instanceof RegExp&&q[h].toString()===p)return q;q.push(n)}else!n&&0!==n||-1!==q.indexOf(n)||q.push(n);return q}},{}],764:[function(b,y,F){var q=b("../lib"),n=b("../plot_api/plot_config").dfltConfig,p={add:function(h,a,f,d,l){h.undoQueue=h.undoQueue||
{index:0,queue:[],sequence:!1};var k=h.undoQueue.index;if(h.autoplay)h.undoQueue.inSequence||(h.autoplay=!1);else{if(!h.undoQueue.sequence||h.undoQueue.beginSequence){var c={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};h.undoQueue.queue.splice(k,h.undoQueue.queue.length-k,c);h.undoQueue.index+=1}else c=h.undoQueue.queue[k-1];h.undoQueue.beginSequence=!1;c&&(c.undo.calls.unshift(a),c.undo.args.unshift(f),c.redo.calls.push(d),c.redo.args.push(l));h.undoQueue.queue.length>n.queueLength&&(h.undoQueue.queue.shift(),
h.undoQueue.index--)}},startSequence:function(h){h.undoQueue=h.undoQueue||{index:0,queue:[],sequence:!1};h.undoQueue.sequence=!0;h.undoQueue.beginSequence=!0},stopSequence:function(h){h.undoQueue=h.undoQueue||{index:0,queue:[],sequence:!1};h.undoQueue.sequence=!1;h.undoQueue.beginSequence=!1},undo:function(h){var a;if(h.framework&&h.framework.isPolar)h.framework.undo();else if(!(void 0===h.undoQueue||isNaN(h.undoQueue.index)||0>=h.undoQueue.index)){h.undoQueue.index--;var f=h.undoQueue.queue[h.undoQueue.index];
h.undoQueue.inSequence=!0;for(a=0;a<f.undo.calls.length;a++)p.plotDo(h,f.undo.calls[a],f.undo.args[a]);h.undoQueue.inSequence=!1;h.autoplay=!1}},redo:function(h){var a;if(h.framework&&h.framework.isPolar)h.framework.redo();else if(!(void 0===h.undoQueue||isNaN(h.undoQueue.index)||h.undoQueue.index>=h.undoQueue.queue.length)){var f=h.undoQueue.queue[h.undoQueue.index];h.undoQueue.inSequence=!0;for(a=0;a<f.redo.calls.length;a++)p.plotDo(h,f.redo.calls[a],f.redo.args[a]);h.undoQueue.inSequence=!1;h.autoplay=
!1;h.undoQueue.index++}},plotDo:function(h,a,f){h.autoplay=!0;for(var d=[],l,k=0;k<f.length;k++)l=f[k],d[k]=l===h?l:"object"===typeof l?Array.isArray(l)?q.extendDeep([],l):q.extendDeepAll({},l):l;a.apply(null,d)}};y.exports=p},{"../lib":749,"../plot_api/plot_config":785}],765:[function(b,y,F){F.counter=function(q,n,p,h){n=(n||"")+(p?"":"$");h=!1===h?"":"^";return"xy"===q?new RegExp(h+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(h+q+"([2-9]|[1-9][0-9]+)?"+n)}},{}],766:[function(b,y,F){var q=
/^(.*)(\.[^\.\[\]]+|\[\d\])$/,n=/^[^\.\[\]]+$/;y.exports=function(p,h){for(;h;){var a=p.match(q);if(a)p=a[1];else if(p.match(n))p="";else throw Error("bad relativeAttr call:"+[p,h]);if("^"===h.charAt(0))h=h.slice(1);else break}return p&&"["!==h.charAt(0)?p+"."+h:p+h}},{}],767:[function(b,y,F){var q=b("./array").isArrayOrTypedArray,n=b("./is_plain_object");y.exports=function f(h,a){for(var d in a){var l=a[d],k=h[d];if(k!==l)if("_"===d.charAt(0)||"function"===typeof l)d in h||(h[d]=l);else if(q(l)&&
q(k)&&n(l[0])){if("customdata"!==d&&"ids"!==d)for(var c=Math.min(l.length,k.length),e=0;e<c;e++)k[e]!==l[e]&&n(l[e])&&n(k[e])&&f(k[e],l[e])}else n(l)&&n(k)&&(f(k,l),Object.keys(k).length||delete h[d])}}},{"./array":731,"./is_plain_object":750}],768:[function(b,y,F){function q(k,c){return k<c}function n(k,c){return k<=c}function p(k,c){return k>c}function h(k,c){return k>=c}var a=b("fast-isnumeric"),f=b("./loggers"),d=b("./identity"),l=b("../constants/numerical").BADNUM;F.findBin=function(k,c,e){if(a(c.start))return e?
Math.ceil((k-c.start)/c.size-1E-9)-1:Math.floor((k-c.start)/c.size+1E-9);var g=0,m=c.length,r=0,u=1<m?(c[m-1]-c[0])/(m-1):1;var v=0<=u?e?q:n:e?h:p;for(k+=1E-9*u*(e?-1:1)*(0<=u?1:-1);g<m&&100>r++;)e=Math.floor((g+m)/2),v(c[e],k)?g=e+1:m=e;90<r&&f.log("Long binary search...");return g-1};F.sorterAsc=function(k,c){return k-c};F.sorterDes=function(k,c){return c-k};F.distinctVals=function(k,c){var e=(c||{}).unitMinDiff;k=k.slice();k.sort(F.sorterAsc);for(c=k.length-1;-1<c&&k[c]===l;c--);var g=1;e||(g=
k[c]-k[0]||1);e=g/(c||1)/1E4;for(var m=[],r,u=0;u<=c;u++){var v=k[u],w=v-r;void 0===r?(m.push(v),r=v):w>e&&(g=Math.min(g,w),m.push(v),r=v)}return{vals:m,minDiff:g}};F.roundUp=function(k,c,e){for(var g=0,m=c.length-1,r=0,u=e?0:1,v=e?1:0,w=e?Math.ceil:Math.floor;g<m&&100>r++;)e=w((g+m)/2),c[e]<=k?g=e+u:m=e-v;return c[g]};F.sort=function(k,c){for(var e=0,g=0,m=1;m<k.length;m++){var r=c(k[m],k[m-1]);0>r?e=1:0<r&&(g=1);if(e&&g)return k.sort(c)}return g?k:k.reverse()};F.findIndexOfMin=function(k,c){c=c||
d;for(var e=Infinity,g,m=0;m<k.length;m++){var r=c(k[m]);r<e&&(e=r,g=m)}return g}},{"../constants/numerical":724,"./identity":747,"./loggers":753,"fast-isnumeric":241}],769:[function(b,y,F){y.exports=function(q,n){(q.attr("class")||"").split(" ").forEach(function(p){0===p.indexOf("cursor-")&&q.classed(p,!1)});n&&q.classed("cursor-"+n,!0)}},{}],770:[function(b,y,F){var q=b("../components/color"),n=function(){};y.exports=function(p){for(var h in p)"function"===typeof p[h]&&(p[h]=n);p.destroy=function(){p.container.parentNode.removeChild(p.container)};
h=document.createElement("div");h.className="no-webgl";h.style.cursor="pointer";h.style.fontSize="24px";h.style.color=q.defaults[0];h.style.position="absolute";h.style.left=h.style.top="0px";h.style.width=h.style.height="100%";h.style["background-color"]=q.lightLine;h.style["z-index"]=30;var a=document.createElement("p");a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";a.style.position="relative";a.style.top="50%";a.style.left="50%";a.style.height=
"30%";a.style.width="50%";a.style.margin="-15% 0 0 -25%";h.appendChild(a);p.container.appendChild(h);p.container.style.background="#FFFFFF";p.container.onclick=function(){window.open("https://get.webgl.org")};return!1}},{"../components/color":615}],771:[function(b,y,F){var q=b("fast-isnumeric"),n=b("./array").isArrayOrTypedArray;F.aggNums=function(p,h,a,f){var d;if(!f||f>a.length)f=a.length;q(h)||(h=!1);if(n(a[0])){var l=Array(f);for(d=0;d<f;d++)l[d]=F.aggNums(p,h,a[d]);a=l}for(d=0;d<f;d++)q(h)?q(a[d])&&
(h=p(+h,+a[d])):h=a[d];return h};F.len=function(p){return F.aggNums(function(h){return h+1},0,p)};F.mean=function(p,h){h||(h=F.len(p));return F.aggNums(function(a,f){return a+f},0,p)/h};F.midRange=function(p){if(void 0!==p&&0!==p.length)return(F.aggNums(Math.max,null,p)+F.aggNums(Math.min,null,p))/2};F.variance=function(p,h,a){h||(h=F.len(p));q(a)||(a=F.mean(p,h));return F.aggNums(function(f,d){return f+Math.pow(d-a,2)},0,p)/h};F.stdev=function(p,h,a){return Math.sqrt(F.variance(p,h,a))};F.median=
function(p){p=p.slice().sort();return F.interp(p,.5)};F.interp=function(p,h){if(!q(h))throw"n should be a finite number";h=h*p.length-.5;if(0>h)return p[0];if(h>p.length-1)return p[p.length-1];var a=h%1;return a*p[Math.ceil(h)]+(1-a)*p[Math.floor(h)]}},{"./array":731,"fast-isnumeric":241}],772:[function(b,y,F){var q=b("color-normalize");y.exports=function(n){return n?q(n):[0,0,0,1]}},{"color-normalize":125}],773:[function(b,y,F){function q(E,K,N){var O,Q,P,T;MathJax.Hub.Queue(function(){Q=d.extendDeepAll({},
MathJax.Hub.config);P=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){O=MathJax.Hub.config.menuSettings.renderer;if("SVG"!==O)return MathJax.Hub.setRenderer("SVG")},function(){var V="math-output-"+d.randstr({},64);T=f.select("body").append("div").attr({id:V}).style({visibility:"hidden",position:"absolute"}).style({"font-size":K.fontSize+
"px"}).text(E.replace(e,"\\lt ").replace(g,"\\gt "));return MathJax.Hub.Typeset(T.node())},function(){var V=f.select("body").select("#MathJax_SVG_glyphs");if(T.select(".MathJax_SVG").empty()||!T.select("svg").node())d.log("There was an error in the tex syntax.",E),N();else{var aa=T.select("svg").node().getBoundingClientRect();N(T.select(".MathJax_SVG"),V,aa)}T.remove();if("SVG"!==O)return MathJax.Hub.setRenderer(O)},function(){void 0!==P&&(MathJax.Hub.processSectionDelay=P);return MathJax.Hub.Config(Q)})}
function n(E,K){return E?(E=(E=E.match(K))&&(E[3]||E[4]))&&p(E):null}function p(E){return E.replace(L,function(K,N){if("#"===N.charAt(0))if(N="x"===N.charAt(1)?parseInt(N.substr(2),16):parseInt(N.substr(1),10),1114111<N)N=void 0;else{var O=String.fromCodePoint;O?N=O(N):(O=String.fromCharCode,N=65535>=N?O(N):O((N>>10)+55232,N%1024+56320))}else N=J[N];return N||K})}function h(E,K){function N(){aa++;var oa=document.createElementNS(l.svg,"tspan");f.select(oa).attr({class:"line",dy:aa*k+"em"});E.appendChild(oa);
ba=oa;var ka=V;V=[{node:oa}];if(1<ka.length)for(oa=1;oa<ka.length;oa++)O(ka[oa])}function O(oa){var ka=oa.type,ra={};if("a"===ka){var ha="a";var ma=oa.target,wa=oa.href,na=oa.popup;wa&&(ra={"xlink:xlink:show":"_blank"===ma||"_"!==ma.charAt(0)?"new":"replace",target:ma,"xlink:xlink:href":wa},na&&(ra.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+na+'");return false;'))}else ha="tspan";oa.style&&(ra.style=oa.style);ha=document.createElementNS(l.svg,ha);"sup"===ka||"sub"===ka?(Q(ba,v),
ba.appendChild(ha),ma=document.createElementNS(l.svg,"tspan"),Q(ma,v),f.select(ma).attr("dy",u[ka]),ra.dy=r[ka],ba.appendChild(ha),ba.appendChild(ma)):ba.appendChild(ha);f.select(ha).attr(ra);ba=oa.node=ha;V.push(oa)}function Q(oa,ka){oa.appendChild(document.createTextNode(ka))}function P(oa){if(1===V.length)d.log("Ignoring unexpected end tag \x3c/"+oa+"\x3e.",K);else{var ka=V.pop();oa!==ka.type&&d.log("Start tag \x3c"+ka.type+"\x3e doesnt match end tag \x3c"+oa+"\x3e. Pretending it did match.",K);
ba=V[V.length-1].node}}K=K.replace(D," ");var T=!1,V=[],aa=-1;if(A.test(K))N();else{var ba=E;V=[{node:E}]}for(var Y=K.split(C),ea=0;ea<Y.length;ea++){var da=Y[ea],ca=da.match(x),la=ca&&ca[2].toLowerCase(),pa=m[la];if("br"===la)N();else if(void 0===pa)Q(ba,p(da));else if(ca[1])P(la);else{da=ca[4];ca={type:la};var qa=n(da,B);qa?(qa=qa.replace(I,"$1 fill:"),pa&&(qa+=";"+pa)):pa&&(qa=pa);qa&&(ca.style=qa);"a"===la&&(T=!0,la=n(da,t))&&(pa=document.createElement("a"),pa.href=la,-1!==w.indexOf(pa.protocol)&&
(ca.href=encodeURI(decodeURI(la)),ca.target=n(da,G)||"_blank",ca.popup=n(da,H)));O(ca)}}return T}function a(E,K,N){var O=N.horizontalAlign;N=N.verticalAlign||"top";var Q=E.node().getBoundingClientRect(),P=K.node().getBoundingClientRect(),T;var V="bottom"===N?function(){return Q.bottom-T.height}:"middle"===N?function(){return Q.top+(Q.height-T.height)/2}:function(){return Q.top};var aa="right"===O?function(){return Q.right-T.width}:"center"===O?function(){return Q.left+(Q.width-T.width)/2}:function(){return Q.left};
return function(){T=this.node().getBoundingClientRect();this.style({top:V()-P.top+"px",left:aa()-P.left+"px","z-index":1E3});return this}}var f=b("d3"),d=b("../lib"),l=b("../constants/xmlns_namespaces"),k=b("../constants/alignment").LINE_SPACING,c=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;F.convertToTspans=function(E,K,N){function O(){T.empty()||(V=E.attr("class")+"-math",T.select("svg."+V).remove());E.text("").style("white-space","pre");h(E.node(),Q)&&E.style("pointer-events","all");F.positionText(E);N&&N.call(E)}
var Q=E.text(),P=!E.attr("data-notex")&&"undefined"!==typeof MathJax&&Q.match(c),T=f.select(E.node().parentNode);if(!T.empty()){var V=E.attr("class")?E.attr("class").split(" ")[0]:"text";V+="-math";T.selectAll("svg."+V).remove();T.selectAll("g."+V+"-group").remove();E.style("display",null).attr({"data-unformatted":Q,"data-math":"N"});P?(K&&K._promises||[]).push(new Promise(function(aa){E.style("display","none");var ba=parseInt(E.node().style.fontSize,10);q(P[2],{fontSize:ba},function(Y,ea,da){T.selectAll("svg."+
V).remove();T.selectAll("g."+V+"-group").remove();if((Y=Y&&Y.select("svg"))&&Y.node()){var ca=T.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":Q,"data-math":"Y"});ca.node().appendChild(Y.node());ea&&ea.node()&&Y.node().insertBefore(ea.node().cloneNode(!0),Y.node().firstChild);Y.attr({"class":V,height:da.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});ea=E.node().style.fill||"black";da=Y.select("g");da.attr({fill:ea,
stroke:ea});ea=da.node().getBoundingClientRect().width;da=da.node().getBoundingClientRect().height;var la=+E.attr("x")-ea*{start:0,middle:.5,end:1}[E.attr("text-anchor")||"start"],pa=-(ba||E.node().getBoundingClientRect().height)/4;"y"===V[0]?(ca.attr({transform:"rotate("+[-90,+E.attr("x"),+E.attr("y")]+") translate("+[-ea/2,pa-da/2]+")"}),Y.attr({x:+E.attr("x"),y:+E.attr("y")})):"l"===V[0]?Y.attr({x:E.attr("x"),y:pa-da/2}):"a"===V[0]&&0!==V.indexOf("atitle")?Y.attr({x:0,y:pa}):Y.attr({x:la,y:+E.attr("y")+
pa-da/2});N&&N.call(E,ca);aa(ca)}else O(),aa()})})):O();return E}};var e=/(<|&lt;|&#60;)/g,g=/(>|&gt;|&#62;)/g,m={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},r={sub:"0.3em",sup:"-0.6em"},u={sub:"-0.21em",sup:"0.42em"},v="",w=["http:","https:","mailto:","",void 0,":"],D=F.NEWLINES=/(\r\n?|\n)/g,C=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,A=/<br(\s+.*)?>/i;F.BR_TAG_ALL=/<br(\s+.*)?>/gi;var B=
/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,t=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,G=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,H=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,I=/(^|;)\s*color:/;F.plainText=function(E,K){K=K||{};var N=void 0!==K.len&&-1!==K.len?K.len:Infinity;K=void 0!==K.allowedTags?K.allowedTags:["br"];var O=E.split(C);E=[];for(var Q="",P=0,T=0;T<O.length;T++){var V=O[T],aa=V.match(x);if(aa=aa&&aa[2].toLowerCase())-1!==K.indexOf(aa)&&(E.push(V),Q=aa);
else{aa=V.length;if(P+aa<N)E.push(V),P+=aa;else if(P<N){K=N-P;Q&&("br"!==Q||3>=K||3>=aa)&&E.pop();3<N?E.push(V.substr(0,K-3)+"..."):E.push(V.substr(0,K));break}Q=""}}return E.join("")};var J={mu:"",amp:"\x26",lt:"\x3c",gt:"\x3e",nbsp:"",times:"",plusmn:"",deg:""},L=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;F.convertEntities=p;F.sanitizeHTML=function(E){E=E.replace(D," ");var K=document.createElement("p"),N=K,O=[];E=E.split(C);for(var Q=0;Q<E.length;Q++){var P=E[Q],T=P.match(x),V=T&&T[2].toLowerCase();
if(V in m)if(T[1])O.length&&(N=O.pop());else{T=T[4];P=(P=n(T,B))?{style:P}:{};if("a"===V){var aa=n(T,t);if(aa){var ba=document.createElement("a");ba.href=aa;-1!==w.indexOf(ba.protocol)&&(P.href=encodeURI(decodeURI(aa)),T=n(T,G))&&(P.target=T)}}V=document.createElement(V);N.appendChild(V);f.select(V).attr(P);N=V;O.push(V)}else N.appendChild(document.createTextNode(p(P)))}return K.innerHTML};F.lineCount=function(E){return E.selectAll("tspan.line").size()||1};F.positionText=function(E,K,N){return E.each(function(){function O(V,
aa){void 0===aa?(aa=Q.attr(V),null===aa&&(Q.attr(V,0),aa=0)):Q.attr(V,aa);return aa}var Q=f.select(this),P=O("x",K),T=O("y",N);"text"===this.nodeName&&Q.selectAll("tspan.line").attr({x:P,y:T})})};F.makeEditable=function(E,K){function N(){Q();E.style({opacity:0});var ba=aa.attr("class");(ba=ba?"."+ba.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&f.select(E.node().parentNode).select(ba).style({opacity:0})}function O(ba){ba=ba.node();var Y=document.createRange();Y.selectNodeContents(ba);var ea=
window.getSelection();ea.removeAllRanges();ea.addRange(Y);ba.focus()}function Q(){var ba=f.select(P).select(".svg-container"),Y=ba.append("div"),ea=E.node().style,da=parseFloat(ea.fontSize||12),ca=K.text;void 0===ca&&(ca=E.attr("data-unformatted"));Y.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ea.fontFamily||"Arial","font-size":da,color:K.fill||ea.fill||"black",opacity:1,"background-color":K.background||"transparent",outline:"#ffffff33 1px solid",margin:[-da/8+
1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ca).call(a(E,ba,K)).on("blur",function(){P._editing=!1;E.text(this.textContent).style({opacity:1});var la=f.select(this).attr("class");(la=la?"."+la.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&f.select(E.node().parentNode).select(la).style({opacity:0});la=this.textContent;f.select(this).transition().duration(0).remove();f.select(document).on("mouseup",null);V.edit.call(E,la)}).on("focus",
function(){var la=this;P._editing=!0;f.select(document).on("mouseup",function(){if(f.event.target===la)return!1;document.activeElement===Y.node()&&Y.node().blur()})}).on("keyup",function(){27===f.event.which?(P._editing=!1,E.style({opacity:1}),f.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),V.cancel.call(E,this.textContent)):(V.input.call(E,this.textContent),f.select(this).call(a(E,ba,K)))}).on("keydown",function(){13===f.event.which&&this.blur()}).call(O)}
var P=K.gd,T=K.delegate,V=f.dispatch("edit","input","cancel"),aa=T||E;E.style({"pointer-events":T?"none":"all"});if(1!==E.size())throw Error("boo");if(K.immediate)N();else aa.on("click",N);return f.rebind(E,V,"on")}},{"../constants/alignment":717,"../constants/xmlns_namespaces":725,"../lib":749,d3:169}],774:[function(b,y,F){function q(p){p&&null!==p.timer&&(clearTimeout(p.timer),p.timer=null)}var n={};F.throttle=function(p,h,a){function f(){a();d.ts=Date.now();d.onDone&&(d.onDone(),d.onDone=null)}
var d=n[p],l=Date.now();if(!d){for(var k in n)n[k].ts<l-6E4&&delete n[k];d=n[p]={ts:0,timer:null}}q(d);l>d.ts+h?f():d.timer=setTimeout(function(){f();d.timer=null},h)};F.done=function(p){var h=n[p];return h&&h.timer?new Promise(function(a){var f=h.onDone;h.onDone=function(){f&&f();a();h.onDone=null}}):Promise.resolve()};F.clear=function(p){if(p)q(n[p]),delete n[p];else for(var h in n)F.clear(h)}},{}],775:[function(b,y,F){var q=b("fast-isnumeric");y.exports=function(n,p){if(0<n)return Math.log(n)/
Math.LN10;n=Math.log(Math.min(p[0],p[1]))/Math.LN10;q(n)||(n=Math.log(Math.max(p[0],p[1]))/Math.LN10-6);return n}},{"fast-isnumeric":241}],776:[function(b,y,F){y=y.exports={};var q=b("../plots/geo/constants").locationmodeToLayer,n=b("topojson-client").feature;y.getTopojsonName=function(p){return[p.scope.replace(/ /g,"-"),"_",p.resolution.toString(),"m"].join("")};y.getTopojsonPath=function(p,h){return p+h+".json"};y.getTopojsonFeatures=function(p,h){return n(h,h.objects[q[p.locationmode]]).features}},
{"../plots/geo/constants":827,"topojson-client":551}],777:[function(b,y,F){y.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],778:[function(b,y,F){y.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],779:[function(b,y,F){var q=b("../registry");y.exports=function(n){for(var p=q.layoutArrayContainers,h=q.layoutArrayRegexes,
a=n.split("[")[0],f,d,l=0;l<h.length;l++)if((d=n.match(h[l]))&&0===d.index){f=d[0];break}f||(f=p[p.indexOf(a)]);if(!f)return!1;n=n.substr(f.length);return n?(d=n.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:f,index:Number(d[1]),property:d[3]||""}:!1:{array:f,index:"",property:""}}},{"../registry":880}],780:[function(b,y,F){function q(l){for(var k={},c=0;c<l.length;c++)k[l[c]]=!1;return k}function n(l,k,c){l=h({},l);for(var e in l){var g=l[e];a(g)&&(l[e]=p(g,k,c,e))}"from-root"===c&&(l.editType=
k);return l}function p(l,k,c,e){if(l.valType){c=h({},l);c.editType=k;if(Array.isArray(l.items))for(c.items=Array(l.items.length),e=0;e<l.items.length;e++)c.items[e]=p(l.items[e],k,"from-root");return c}return n(l,k,"_"===e.charAt(0)?"nested":"from-root")}b=b("../lib");var h=b.extendFlat,a=b.isPlainObject;b={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};F={valType:"flaglist",extras:["none"],flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw colorbars".split(" ")};
var f=b.flags.slice().concat(["fullReplot"]),d=F.flags.slice().concat("layoutReplot");y.exports={traces:b,layout:F,traceFlags:function(){return q(f)},layoutFlags:function(){return q(d)},update:function(l,k){if((k=k.editType)&&"none"!==k){k=k.split("+");for(var c=0;c<k.length;c++)l[k[c]]=!0}},overrideAll:n}},{"../lib":749}],781:[function(b,y,F){function q(D,C){var x=D[C],A=C.charAt(0);x&&"paper"!==x&&(D[C]=m(x,A))}function n(D){function C(x,A){var B=D.title&&D.title[A];D[x]&&!B&&(D.title||(D.title=
{}),D.title[A]=D[x],delete D[x])}if(D){if("string"===typeof D.title||"number"===typeof D.title)D.title={text:D.title};C("titlefont","font");C("titleposition","position");C("titleside","side");C("titleoffset","offset")}}function p(D){if(!c.isPlainObject(D))return!1;var C=D.name;delete D.name;delete D.showlegend;return("string"===typeof C||"number"===typeof C)&&String(C)}function h(D){var C="middle",x="center";"string"===typeof D&&(-1!==D.indexOf("top")?C="top":-1!==D.indexOf("bottom")&&(C="bottom"),
-1!==D.indexOf("left")?x="left":-1!==D.indexOf("right")&&(x="right"));return C+" "+x}function a(D,C){return C in D&&"object"===typeof D[C]&&0===Object.keys(D[C]).length}function f(D){var C=D.search(v);if(0<C)return D.substr(0,C)}var d=b("fast-isnumeric"),l=b("gl-mat4/fromQuat"),k=b("../registry"),c=b("../lib"),e=b("../plots/plots");y=b("../plots/cartesian/axis_ids");var g=b("../components/color"),m=y.cleanId,r=y.getFromTrace,u=k.traceIs;F.clearPromiseQueue=function(D){Array.isArray(D._promises)&&
0<D._promises.length&&c.log("Clearing previous rejected promises from queue.");D._promises=[]};F.cleanLayout=function(D){var C;D||(D={});D.xaxis1&&(D.xaxis||(D.xaxis=D.xaxis1),delete D.xaxis1);D.yaxis1&&(D.yaxis||(D.yaxis=D.yaxis1),delete D.yaxis1);D.scene1&&(D.scene||(D.scene=D.scene1),delete D.scene1);var x=(e.subplotsRegistry.cartesian||{}).attrRegex,A=(e.subplotsRegistry.polar||{}).attrRegex,B=(e.subplotsRegistry.ternary||{}).attrRegex,t=(e.subplotsRegistry.gl3d||{}).attrRegex,G=Object.keys(D);
for(C=0;C<G.length;C++){var H=G[C];if(x&&x.test(H)){H=D[H];H.anchor&&"free"!==H.anchor&&(H.anchor=m(H.anchor));H.overlaying&&(H.overlaying=m(H.overlaying));H.type||(H.isdate?H.type="date":H.islog?H.type="log":!1===H.isdate&&!1===H.islog&&(H.type="linear"));if("withzero"===H.autorange||"tozero"===H.autorange)H.autorange=!0,H.rangemode="tozero";delete H.islog;delete H.isdate;delete H.categories;a(H,"domain")&&delete H.domain;void 0!==H.autotick&&(void 0===H.tickmode&&(H.tickmode=H.autotick?"auto":"linear"),
delete H.autotick);n(H)}else if(A&&A.test(H))n(D[H].radialaxis);else if(B&&B.test(H))H=D[H],n(H.aaxis),n(H.baxis),n(H.caxis);else if(t&&t.test(H)){H=D[H];var I=H.cameraposition;if(Array.isArray(I)&&4===I[0].length){var J=I[1],L=I[2],E=l([],I[0]),K=[];for(I=0;3>I;++I)K[I]=J[I]+L*E[2+4*I];H.camera={eye:{x:K[0],y:K[1],z:K[2]},center:{x:J[0],y:J[1],z:J[2]},up:{x:0,y:0,z:1}};delete H.cameraposition}n(H.xaxis);n(H.yaxis);n(H.zaxis)}}x=Array.isArray(D.annotations)?D.annotations.length:0;for(C=0;C<x;C++)A=
D.annotations[C],c.isPlainObject(A)&&(A.ref&&("paper"===A.ref?(A.xref="paper",A.yref="paper"):"data"===A.ref&&(A.xref="x",A.yref="y"),delete A.ref),q(A,"xref"),q(A,"yref"));x=Array.isArray(D.shapes)?D.shapes.length:0;for(C=0;C<x;C++)A=D.shapes[C],c.isPlainObject(A)&&(q(A,"xref"),q(A,"yref"));if(C=D.legend)3<C.x?(C.x=1.02,C.xanchor="left"):-2>C.x&&(C.x=-.02,C.xanchor="right"),3<C.y?(C.y=1.02,C.yanchor="bottom"):-2>C.y&&(C.y=-.02,C.yanchor="top");n(D);"rotate"===D.dragmode&&(D.dragmode="orbit");g.clean(D);
D.template&&D.template.layout&&F.cleanLayout(D.template.layout);return D};F.cleanData=function(D){for(var C=0;C<D.length;C++){var x=D[C];"histogramy"===x.type&&"xbins"in x&&!("ybins"in x)&&(x.ybins=x.xbins,delete x.xbins);if(x.error_y&&"opacity"in x.error_y){var A=g.defaults;A=x.error_y.color||(u(x,"bar")?g.defaultLine:A[C%A.length]);x.error_y.color=g.addOpacity(g.rgb(A),g.opacity(A)*x.error_y.opacity);delete x.error_y.opacity}"bardir"in x&&("h"!==x.bardir||!u(x,"bar")&&"histogram"!==x.type.substr(0,
9)||(x.orientation="h",F.swapXYData(x)),delete x.bardir);"histogramy"===x.type&&F.swapXYData(x);if("histogramx"===x.type||"histogramy"===x.type)x.type="histogram";"scl"in x&&!("colorscale"in x)&&(x.colorscale=x.scl,delete x.scl);"reversescl"in x&&!("reversescale"in x)&&(x.reversescale=x.reversescl,delete x.reversescl);x.xaxis&&(x.xaxis=m(x.xaxis,"x"));x.yaxis&&(x.yaxis=m(x.yaxis,"y"));u(x,"gl3d")&&x.scene&&(x.scene=e.subplotsRegistry.gl3d.cleanId(x.scene));if(!u(x,"pie-like")&&!u(x,"bar-like"))if(Array.isArray(x.textposition))for(A=
0;A<x.textposition.length;A++)x.textposition[A]=h(x.textposition[A]);else x.textposition&&(x.textposition=h(x.textposition));(A=k.getModule(x))&&A.colorbar&&(A=(A=A.colorbar.container)?x[A]:x)&&A.colorscale&&("YIGnBu"===A.colorscale&&(A.colorscale="YlGnBu"),"YIOrRd"===A.colorscale&&(A.colorscale="YlOrRd"));if("surface"===x.type&&c.isPlainObject(x.contours)){var B=["x","y","z"];for(A=0;A<B.length;A++){var t=x.contours[B[A]];c.isPlainObject(t)&&(t.highlightColor&&(t.highlightcolor=t.highlightColor,
delete t.highlightColor),t.highlightWidth&&(t.highlightwidth=t.highlightWidth,delete t.highlightWidth))}}if("candlestick"===x.type||"ohlc"===x.type){B=!1!==(x.increasing||{}).showlegend;t=!1!==(x.decreasing||{}).showlegend;A=p(x.increasing);var G=p(x.decreasing);if(!1!==A&&!1!==G){if(!B||t)if(t&&!B)A=G;else if(A.trim()){if(G.trim()){t=Math.min(A.length,G.length);for(B=0;B<t&&A.charAt(B)===G.charAt(B);B++);A=A.substr(0,B).trim()}}else A=G;A&&(x.name=A)}else!A&&!G||x.name||(x.name=A||G)}if(Array.isArray(x.transforms))for(B=
x.transforms,A=0;A<B.length;A++)if(t=B[A],c.isPlainObject(t))switch(t.type){case "filter":t.filtersrc&&(t.target=t.filtersrc,delete t.filtersrc);t.calendar&&(t.valuecalendar||(t.valuecalendar=t.calendar),delete t.calendar);break;case "groupby":if(t.styles=t.styles||t.style,t.styles&&!Array.isArray(t.styles)){G=t.styles;var H=Object.keys(G);t.styles=[];for(var I=0;I<H.length;I++)t.styles.push({target:H[I],value:G[H[I]]})}}a(x,"line")&&delete x.line;"marker"in x&&(a(x.marker,"line")&&delete x.marker.line,
a(x,"marker")&&delete x.marker);g.clean(x);x.autobinx&&(delete x.autobinx,delete x.xbins);x.autobiny&&(delete x.autobiny,delete x.ybins);n(x);x.colorbar&&n(x.colorbar);x.marker&&x.marker.colorbar&&n(x.marker.colorbar);x.line&&x.line.colorbar&&n(x.line.colorbar);x.aaxis&&n(x.aaxis);x.baxis&&n(x.baxis)}};F.swapXYData=function(D){c.swapAttrs(D,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));Array.isArray(D.z)&&Array.isArray(D.z[0])&&(D.transpose?delete D.transpose:D.transpose=!0);if(D.error_x&&
D.error_y){var C=D.error_y;C="copy_ystyle"in C?C.copy_ystyle:!(C.color||C.thickness||C.width);c.swapAttrs(D,["error_?.copy_ystyle"]);C&&c.swapAttrs(D,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof D.hoverinfo){var x=D.hoverinfo.split("+");for(C=0;C<x.length;C++)"x"===x[C]?x[C]="y":"y"===x[C]&&(x[C]="x");D.hoverinfo=x.join("+")}};F.coerceTraceIndices=function(D,C){if(d(C))return[C];if(!Array.isArray(C)||!C.length)return D.data.map(function(B,t){return t});if(Array.isArray(C)){for(var x=
[],A=0;A<C.length;A++)c.isIndex(C[A],D.data.length)?x.push(C[A]):c.warn("trace index (",C[A],") is not a number or is out of bounds");return x}return C};F.manageArrayContainers=function(D,C,x){var A=D.obj,B=D.parts,t=B.length,G=B[t-1],H=d(G);H&&null===C?(D=B.slice(0,t-1).join("."),c.nestedProperty(A,D).get().splice(G,1)):(H&&void 0===D.get()&&void 0===D.get()&&(x[D.astr]=null),D.set(C))};var v=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;F.hasParent=function(D,C){for(C=f(C);C;){if(C in D)return!0;C=f(C)}return!1};
var w=["x","y","z"];F.clearAxisTypes=function(D,C,x){for(var A=0;A<C.length;A++)for(var B=D._fullData[A],t=0;3>t;t++){var G=r(D,B,w[t]);if(G&&"log"!==G.type){var H=G._name;G=G._id.substr(1);if("scene"===G.substr(0,5)){if(void 0!==x[G])continue;H=G+"."+H}G=H+".type";void 0===x[H]&&void 0===x[G]&&c.nestedProperty(D.layout,G).set(null)}}}},{"../components/color":615,"../lib":749,"../plots/cartesian/axis_ids":800,"../plots/plots":860,"../registry":880,"fast-isnumeric":241,"gl-mat4/fromQuat":275}],782:[function(b,
y,F){y=b("./plot_api");F.plot=y.plot;F.newPlot=y.newPlot;F.restyle=y.restyle;F.relayout=y.relayout;F.redraw=y.redraw;F.update=y.update;F._guiRestyle=y._guiRestyle;F._guiRelayout=y._guiRelayout;F._guiUpdate=y._guiUpdate;F._storeDirectGUIEdit=y._storeDirectGUIEdit;F.react=y.react;F.extendTraces=y.extendTraces;F.prependTraces=y.prependTraces;F.addTraces=y.addTraces;F.deleteTraces=y.deleteTraces;F.moveTraces=y.moveTraces;F.purge=y.purge;F.addFrames=y.addFrames;F.deleteFrames=y.deleteFrames;F.animate=
y.animate;F.setPlotConfig=y.setPlotConfig;F.toImage=b("./to_image");F.validate=b("./validate");F.downloadImage=b("../snapshot/download");b=b("./template_api");F.makeTemplate=b.makeTemplate;F.validateTemplate=b.validateTemplate},{"../snapshot/download":882,"./plot_api":784,"./template_api":789,"./to_image":790,"./validate":791}],783:[function(b,y,F){var q=b("../lib/is_plain_object"),n=b("../lib/noop"),p=b("../lib/loggers"),h=b("../lib/search").sorterAsc,a=b("../registry");F.containerArrayMatch=b("./container_array_match");
var f=F.isAddVal=function(l){return"add"===l||q(l)},d=F.isRemoveVal=function(l){return null===l||"remove"===l};F.applyContainerArrayChanges=function(l,k,c,e,g){var m=k.astr,r=a.getComponentMethod(m,"supplyLayoutDefaults"),u=a.getComponentMethod(m,"draw"),v=a.getComponentMethod(m,"drawOne");e=e.replot||e.recalc||r===n||u===n;var w=l.layout,D=l._fullLayout;if(c[""]){1<Object.keys(c).length&&p.warn("Full array edits are incompatible with other edits",m);v=c[""][""];if(d(v))k.set(null);else if(Array.isArray(v))k.set(v);
else return p.warn("Unrecognized full array edit value",m,v),!0;if(e)return!1;r(w,D);u(l);return!0}var C=Object.keys(c).map(Number).sort(h),x=k.get(),A=x||[],B=g(D,m).get(),t=[],G=-1,H=A.length,I;for(I=0;I<C.length;I++){var J=C[I];var L=c[J];var E=Object.keys(L);var K=L[""];var N=f(K);if(0>J||J>A.length-(N?0:1))p.warn("index out of range",m,J);else if(void 0!==K)1<E.length&&p.warn("Insertion \x26 removal are incompatible with edits to the same index.",m,J),d(K)?t.push(J):N?("add"===K&&(K={}),A.splice(J,
0,K),B&&B.splice(J,0,{})):p.warn("Unrecognized full object edit value",m,J,K),-1===G&&(G=J);else for(K=0;K<E.length;K++)N=m+"["+J+"].",g(A[J],E[K],N).set(L[E[K]])}for(I=t.length-1;0<=I;I--)A.splice(t[I],1),B&&B.splice(t[I],1);A.length?x||k.set(A):k.set(null);if(e)return!1;r(w,D);if(v!==n){if(-1===G)k=C;else{H=Math.max(A.length,H);k=[];for(I=0;I<C.length;I++){J=C[I];if(J>=G)break;k.push(J)}for(I=G;I<H;I++)k.push(I)}for(I=0;I<k.length;I++)v(l,k[I])}else u(l);return!0}},{"../lib/is_plain_object":750,
"../lib/loggers":753,"../lib/noop":758,"../lib/search":768,"../registry":880,"./container_array_match":779}],784:[function(b,y,F){function q(Ia){var Ua=Ia._fullLayout;Ua._redrawFromAutoMarginCount?Ua._redrawFromAutoMarginCount--:Ia.emit("plotly_afterplot")}function n(Ia,Ua){try{Ia._fullLayout._paper.style("background",Ua)}catch($a){ca.error($a)}}function p(Ia,Ua){Ua=na.combine(Ua,"white");n(Ia,Ua)}function h(Ia,Ua){if(!Ia._context){Ia._context=ca.extendDeep({},hb);var $a=Y.select("base");Ia._context._baseUrl=
$a.size()&&$a.attr("href")?window.location.href.split("#")[0]:""}var xa=Ia._context;if(Ua){var Ga=Object.keys(Ua);for($a=0;$a<Ga.length;$a++){var Va=Ga[$a];"editable"!==Va&&"edits"!==Va&&Va in xa&&(xa[Va]="setBackground"===Va&&"opaque"===Ua[Va]?p:Ua[Va])}Ua.plot3dPixelRatio&&!xa.plotGlPixelRatio&&(xa.plotGlPixelRatio=xa.plot3dPixelRatio);Va=Ua.editable;if(void 0!==Va)for(xa.editable=Va,Ga=Object.keys(xa.edits),$a=0;$a<Ga.length;$a++)xa.edits[Ga[$a]]=Va;if(Ua.edits)for(Ga=Object.keys(Ua.edits),$a=
0;$a<Ga.length;$a++)Va=Ga[$a],Va in xa.edits&&(xa.edits[Va]=Ua.edits[Va]);xa._exportedPlot=Ua._exportedPlot}xa.staticPlot&&(xa.editable=!1,xa.edits={},xa.autosizable=!1,xa.scrollZoom=!1,xa.doubleClick=!1,xa.showTips=!1,xa.showLink=!1,xa.displayModeBar=!1);"hover"!==xa.displayModeBar||da||(xa.displayModeBar=!0);if("transparent"===xa.setBackground||"function"!==typeof xa.setBackground)xa.setBackground=n;xa._hasZeroHeight=xa._hasZeroHeight||0===Ia.clientHeight;xa._hasZeroWidth=xa._hasZeroWidth||0===
Ia.clientWidth;$a=xa.scrollZoom;Ia=xa._scrollZoom={};if(!0===$a)Ia.cartesian=1,Ia.gl3d=1,Ia.geo=1,Ia.mapbox=1;else if("string"===typeof $a)for(Ua=$a.split("+"),$a=0;$a<Ua.length;$a++)Ia[Ua[$a]]=1;else!1!==$a&&(Ia.gl3d=1,Ia.geo=1,Ia.mapbox=1)}function a(Ia,Ua,$a){var xa=Y.select(Ia).selectAll(".plot-container").data([0]);xa.enter().insert("div",":first-child").classed("plot-container plotly",!0);xa=xa.selectAll(".svg-container").data([0]);xa.enter().append("div").classed("svg-container",!0).style("position",
"relative");xa.html("");Ua&&(Ia.data=Ua);$a&&(Ia.layout=$a);ha.manager.fillLayout(Ia);xa.style({width:Ia._fullLayout.width+"px",height:Ia._fullLayout.height+"px"});Ia.framework=ha.manager.framework(Ia);Ia.framework({data:Ia.data,layout:Ia.layout},xa.node());Ia.framework.setUndoPoint();xa=Ia.framework.svg();Ua=1;$a=Ia._fullLayout.title?Ia._fullLayout.title.text:"";""!==$a&&$a||(Ua=0);var Ga=function(){this.call(Ha.convertToTspans,Ia)};xa=xa.select(".title-group text").call(Ga);if(Ia._context.edits.titleText){var Va=
ca._(Ia,"Click to enter Plot title");$a&&$a!==Va||(Ua=.2,xa.attr({"data-unformatted":Va}).text(Va).style({opacity:Ua}).on("mouseover.opacity",function(){Y.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){Y.select(this).transition().duration(1E3).style("opacity",0)}));var gb=function(){this.call(Ha.makeEditable,{gd:Ia}).on("edit",function(Ma){Ia.framework({layout:{title:{text:Ma}}});this.text(Ma).call(Ga);this.call(gb)}).on("cancel",function(){var Ma=this.attr("data-unformatted");
this.text(Ma).call(Ga)})};xa.call(gb)}Ia._context.setBackground(Ia,Ia._fullLayout.paper_bgcolor);ra.addLinks(Ia);return Promise.resolve()}function f(Ia,Ua){Ua+=1;var $a=[],xa;for(xa=0;xa<Ia.length;xa++){var Ga=Ia[xa];0>Ga?$a.push(Ua+Ga):$a.push(Ga)}return $a}function d(Ia,Ua,$a){var xa;for(xa=0;xa<Ua.length;xa++){var Ga=Ua[xa];if(Ga!==parseInt(Ga,10))throw Error("all values in "+$a+" must be integers");if(Ga>=Ia.data.length||Ga<-Ia.data.length)throw Error($a+" must be valid indices for gd.data.");
if(-1<Ua.indexOf(Ga,xa+1)||0<=Ga&&-1<Ua.indexOf(-Ia.data.length+Ga)||0>Ga&&-1<Ua.indexOf(Ia.data.length+Ga))throw Error("each index in "+$a+" must be unique.");}}function l(Ia,Ua,$a){if(!Array.isArray(Ia.data))throw Error("gd.data must be an array.");if("undefined"===typeof Ua)throw Error("currentIndices is a required argument.");Array.isArray(Ua)||(Ua=[Ua]);d(Ia,Ua,"currentIndices");"undefined"===typeof $a||Array.isArray($a)||($a=[$a]);"undefined"!==typeof $a&&d(Ia,$a,"newIndices");if("undefined"!==
typeof $a&&Ua.length!==$a.length)throw Error("current and new indices must be of equal length.");}function k(Ia,Ua,$a){if(!Array.isArray(Ia.data))throw Error("gd.data must be an array.");if("undefined"===typeof Ua)throw Error("traces must be defined.");Array.isArray(Ua)||(Ua=[Ua]);for(Ia=0;Ia<Ua.length;Ia++){var xa=Ua[Ia];if("object"!==typeof xa||Array.isArray(xa)||null===xa)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof $a||Array.isArray($a)||($a=[$a]);
if("undefined"!==typeof $a&&$a.length!==Ua.length)throw Error("if indices is specified, traces.length must equal indices.length");}function c(Ia,Ua,$a,xa,Ga){var Va=ca.isPlainObject(xa);if(!Array.isArray(Ia.data))throw Error("gd.data must be an array");if(!ca.isPlainObject(Ua))throw Error("update must be a key:value object");if("undefined"===typeof $a)throw Error("indices must be an integer or array of integers");d(Ia,$a,"indices");for(var gb in Ua){if(!Array.isArray(Ua[gb])||Ua[gb].length!==$a.length)throw Error("attribute "+
gb+" must be an array of length equal to indices array length");if(Va&&!(gb in xa&&Array.isArray(xa[gb])&&xa[gb].length===Ua[gb].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");}Va=$a;gb=ca.isPlainObject(xa);$a=[];Array.isArray(Va)||(Va=[Va]);Va=f(Va,Ia.data.length-1);for(var Ma in Ua)for(var cb=0;cb<Va.length;cb++){var Sa=Ia.data[Va[cb]];var lb=la(Sa,Ma);Sa=lb.get();var rb=Ua[Ma][cb];if(!ca.isArrayOrTypedArray(rb))throw Error("attribute: "+
Ma+" index: "+cb+" must be an array");if(!ca.isArrayOrTypedArray(Sa))throw Error("cannot extend missing or non-array attribute: "+Ma);if(Sa.constructor!==rb.constructor)throw Error("cannot extend array with an array of a different type: "+Ma);var yb=gb?xa[Ma][cb]:xa;ea(yb)||(yb=-1);$a.push({prop:lb,target:Sa,insert:rb,maxp:Math.floor(yb)})}Ia={};Ua={};for(xa=0;xa<$a.length;xa++)Ma=$a[xa].prop,Va=Ga($a[xa].target,$a[xa].insert,$a[xa].maxp),Ma.set(Va[0]),Array.isArray(Ia[Ma.astr])||(Ia[Ma.astr]=[]),
Ia[Ma.astr].push(Va[1]),Array.isArray(Ua[Ma.astr])||(Ua[Ma.astr]=[]),Ua[Ma.astr].push($a[xa].target.length);return{update:Ia,maxPoints:Ua}}function e(Ia,Ua){var $a=new Ia.constructor(Ia.length+Ua.length);$a.set(Ia);$a.set(Ua,Ia.length);return $a}function g(Ia,Ua,$a,xa){Ia=ca.getGraphDiv(Ia);var Ga=c(Ia,Ua,$a,xa,function(gb,Ma,cb){if(ca.isTypedArray(gb))if(0>cb){var Sa=new gb.constructor(0);gb=e(gb,Ma);if(0>cb)var lb=gb;else lb=Sa,Sa=gb}else if(lb=new gb.constructor(cb),Sa=new gb.constructor(gb.length+
Ma.length-cb),cb===Ma.length)lb.set(Ma),Sa.set(gb);else if(cb<Ma.length)cb=Ma.length-cb,lb.set(Ma.subarray(cb)),Sa.set(gb),Sa.set(Ma.subarray(0,cb),gb.length);else{cb-=Ma.length;var rb=gb.length-cb;lb.set(gb.subarray(rb));lb.set(Ma,cb);Sa.set(gb.subarray(0,rb))}else lb=gb.concat(Ma),Sa=0<=cb&&cb<lb.length?lb.splice(0,lb.length-cb):[];return[lb,Sa]}),Va=F.redraw(Ia);qa.add(Ia,F.prependTraces,[Ia,Ga.update,$a,Ga.maxPoints],g,arguments);return Va}function m(Ia,Ua,$a,xa){Ia=ca.getGraphDiv(Ia);var Ga=
c(Ia,Ua,$a,xa,function(gb,Ma,cb){if(ca.isTypedArray(gb))if(0>=cb){var Sa=new gb.constructor(0);gb=e(Ma,gb);if(0>cb)var lb=gb;else lb=Sa,Sa=gb}else lb=new gb.constructor(cb),Sa=new gb.constructor(gb.length+Ma.length-cb),cb===Ma.length?(lb.set(Ma),Sa.set(gb)):cb<Ma.length?(cb=Ma.length-cb,lb.set(Ma.subarray(0,cb)),Sa.set(Ma.subarray(cb)),Sa.set(gb,cb)):(cb-=Ma.length,lb.set(Ma),lb.set(gb.subarray(0,cb),Ma.length),Sa.set(gb.subarray(cb)));else lb=Ma.concat(gb),Sa=0<=cb&&cb<lb.length?lb.splice(cb,lb.length):
[];return[lb,Sa]}),Va=F.redraw(Ia);qa.add(Ia,F.extendTraces,[Ia,Ga.update,$a,Ga.maxPoints],m,arguments);return Va}function r(Ia,Ua,$a){Ia=ca.getGraphDiv(Ia);var xa=[],Ga=F.deleteTraces,Va=[Ia,xa],gb=[Ia,Ua],Ma;k(Ia,Ua,$a);Array.isArray(Ua)||(Ua=[Ua]);Ua=Ua.map(function(cb){return ca.extendFlat({},cb)});ib.cleanData(Ua);for(Ma=0;Ma<Ua.length;Ma++)Ia.data.push(Ua[Ma]);for(Ma=0;Ma<Ua.length;Ma++)xa.push(-Ua.length+Ma);if("undefined"===typeof $a)return Ua=F.redraw(Ia),qa.add(Ia,Ga,Va,r,gb),Ua;Array.isArray($a)||
($a=[$a]);try{l(Ia,xa,$a)}catch(cb){throw Ia.data.splice(Ia.data.length-Ua.length,Ua.length),cb;}qa.startSequence(Ia);qa.add(Ia,Ga,Va,r,gb);Ua=F.moveTraces(Ia,xa,$a);qa.stopSequence(Ia);return Ua}function u(Ia,Ua){Ia=ca.getGraphDiv(Ia);var $a=[],xa=F.addTraces,Ga=[Ia,$a,Ua],Va=[Ia,Ua],gb;if("undefined"===typeof Ua)throw Error("indices must be an integer or array of integers.");Array.isArray(Ua)||(Ua=[Ua]);d(Ia,Ua,"indices");Ua=f(Ua,Ia.data.length-1);Ua.sort(ca.sorterDes);for(gb=0;gb<Ua.length;gb+=
1){var Ma=Ia.data.splice(Ua[gb],1)[0];$a.push(Ma)}Ua=F.redraw(Ia);qa.add(Ia,xa,Ga,u,Va);return Ua}function v(Ia,Ua,$a){Ia=ca.getGraphDiv(Ia);var xa=[],Ga=[],Va=[Ia,$a,Ua],gb=[Ia,Ua,$a],Ma;l(Ia,Ua,$a);Ua=Array.isArray(Ua)?Ua:[Ua];if("undefined"===typeof $a)for($a=[],Ma=0;Ma<Ua.length;Ma++)$a.push(-Ua.length+Ma);$a=Array.isArray($a)?$a:[$a];Ua=f(Ua,Ia.data.length-1);$a=f($a,Ia.data.length-1);for(Ma=0;Ma<Ia.data.length;Ma++)-1===Ua.indexOf(Ma)&&xa.push(Ia.data[Ma]);for(Ma=0;Ma<Ua.length;Ma++)Ga.push({newIndex:$a[Ma],
trace:Ia.data[Ua[Ma]]});Ga.sort(function(cb,Sa){return cb.newIndex-Sa.newIndex});for(Ma=0;Ma<Ga.length;Ma+=1)xa.splice(Ga[Ma].newIndex,0,Ga[Ma].trace);Ia.data=xa;Ua=F.redraw(Ia);qa.add(Ia,v,Va,v,gb);return Ua}function w(Ia,Ua,$a,xa){Ia=ca.getGraphDiv(Ia);ib.clearPromiseQueue(Ia);var Ga={};if("string"===typeof Ua)Ga[Ua]=$a;else if(ca.isPlainObject(Ua))Ga=ca.extendFlat({},Ua),void 0===xa&&(xa=$a);else return ca.warn("Restyle fail.",Ua,$a,xa),Promise.reject();Object.keys(Ga).length&&(Ia.changed=!0);
Ua=ib.coerceTraceIndices(Ia,xa);var Va=A(Ia,Ga,Ua);Ga=Va.flags;Ga.calc&&(Ia.calcdata=void 0);Ga.clearAxisTypes&&ib.clearAxisTypes(Ia,Ua,{});Ua=[];Ga.fullReplot?Ua.push(F.plot):(Ua.push(ra.previousPromises),ra.supplyDefaults(Ia),Ga.markerSize&&(ra.doCalcdata(Ia),H(Ua)),Ga.style&&Ua.push(Pa.doTraceStyle),Ga.colorbars&&Ua.push(Pa.doColorBars),Ua.push(q));Ua.push(ra.rehover,ra.redrag);qa.add(Ia,w,[Ia,Va.undoit,Va.traces],w,[Ia,Va.redoit,Va.traces]);(Ga=ca.syncOrAsync(Ua,Ia))&&Ga.then||(Ga=Promise.resolve());
return Ga.then(function(){Ia.emit("plotly_restyle",Va.eventData);return Ia})}function D(Ia){return void 0===Ia?null:Ia}function C(Ia,Ua){return Ua?function($a,xa,Ga){var Va=la($a,xa),gb=Va.set;Va.set=function(Ma){x((Ga||"")+xa,Va.get(),Ma,Ia);gb(Ma)};return Va}:la}function x(Ia,Ua,$a,xa){if(Array.isArray(Ua)||Array.isArray($a)){var Ga=Array.isArray(Ua)?Ua:[];$a=Array.isArray($a)?$a:[];Ua=Math.max(Ga.length,$a.length);for(var Va=0;Va<Ua;Va++)x(Ia+"["+Va+"]",Ga[Va],$a[Va],xa)}else if(ca.isPlainObject(Ua)||
ca.isPlainObject($a))for(Ga in Ua=ca.isPlainObject(Ua)?Ua:{},$a=ca.isPlainObject($a)?$a:{},Va=ca.extendFlat({},Ua,$a),Va)x(Ia+"."+Ga,Ua[Ga],$a[Ga],xa);else void 0===xa[Ia]&&(xa[Ia]=D(Ua))}function A(Ia,Ua,$a){function xa(){return $a.map(function(){})}function Ga(xb){xb=ma.id2name(xb);-1===Eb.indexOf(xb)&&Eb.push(xb)}function Va(xb){return"LAYOUT"+xb+".autorange"}function gb(xb){return"LAYOUT"+xb+".range"}function Ma(xb){for(var Cb=xb;Cb<yb.length;Cb++)if(yb[Cb]._input===Hb[xb])return yb[Cb]}function cb(xb,
Cb,Jb){if(Array.isArray(xb))xb.forEach(function(vc){cb(vc,Cb,Jb)});else if(!(xb in Ua||ib.hasParent(Ua,xb))){if("LAYOUT"===xb.substr(0,6))var ac=lc(Ia.layout,xb.replace("LAYOUT",""));else{ac=$a[Jb];var Kc=rb._tracePreGUI[Ma(ac)._fullInput.uid];ac=C(Kc,Vb)(Hb[ac],xb)}xb in Pc||(Pc[xb]=xa());void 0===Pc[xb][Jb]&&(Pc[xb][Jb]=D(ac.get()));void 0!==Cb&&ac.set(Cb)}}function Sa(xb){return function(Cb){return yb[Cb][xb]}}function lb(xb){return function(Cb,Jb){return!1===Cb?yb[$a[Jb]][xb]:null}}var rb=Ia._fullLayout,
yb=Ia._fullData,Hb=Ia.data,Vb=rb._guiEditing,lc=C(rb._preGUI,Vb),Ac=ca.extendDeepAll({},Ua),ad;B(Ua);var Nc=sb.traceFlags(),ed={},Pc={};for(Yb in Ua){if(ib.hasParent(Ua,Yb))throw Error("cannot set "+Yb+" and a parent attribute simultaneously");var sd=Ua[Yb],Db;if("autobinx"===Yb||"autobiny"===Yb){var Yb=Yb.charAt(Yb.length-1)+"bins";sd=Array.isArray(sd)?sd.map(lb(Yb)):!1===sd?$a.map(Sa(Yb)):null}ed[Yb]=sd;if("LAYOUT"===Yb.substr(0,6)){var Fc=lc(Ia.layout,Yb.replace("LAYOUT",""));Pc[Yb]=[D(Fc.get())];
Fc.set(Array.isArray(sd)?sd[0]:sd);Nc.calc=!0}else{Pc[Yb]=xa();for(ad=0;ad<$a.length;ad++){var mc=Hb[$a[ad]];var qc=Ma($a[ad]);Fc=C(rb._tracePreGUI[qc._fullInput.uid],Vb)(mc,Yb);var rc=Fc.get();var wb=Array.isArray(sd)?sd[ad%sd.length]:sd;if(void 0!==wb){var zb=Fc.parts[Fc.parts.length-1],fc=(Db=Yb.substr(0,Yb.length-zb.length-1))?Db+".":"",zc=Db?la(qc,Db).get():qc;if((Db=ka.getTraceValObject(qc,Fc.parts))&&Db.impliedEdits&&null!==wb)for(var Gc in Db.impliedEdits)cb(ca.relativeAttr(Yb,Gc),Db.impliedEdits[Gc],
ad);else if("thicknessmode"!==zb&&"lenmode"!==zb||rc===wb||"fraction"!==wb&&"pixels"!==wb||!zc)"type"!==Yb||"pie"===wb===("pie"===rc)&&"funnelarea"===wb===("funnelarea"===rc)||(fc="x",zc="y","bar"!==wb&&"bar"!==rc||"h"!==mc.orientation||(fc="y",zc="x"),ca.swapAttrs(mc,["?","?src"],"labels",fc),ca.swapAttrs(mc,["d?","?0"],"label",fc),ca.swapAttrs(mc,["?","?src"],"values",zc),"pie"===rc||"funnelarea"===rc?(la(mc,"marker.color").set(la(mc,"marker.colors").get()),rb._pielayer.selectAll("g.trace").remove()):
oa.traceIs(mc,"cartesian")&&la(mc,"marker.colors").set(la(mc,"marker.color").get()));else{var $b=rb._size,bc=zc.orient;bc="top"===bc||"bottom"===bc;"thicknessmode"===zb?(zb=bc?$b.h:$b.w,cb(fc+"thickness",zc.thickness*("fraction"===wb?1/zb:zb),ad)):(zb=bc?$b.w:$b.h,cb(fc+"len",zc.len*("fraction"===wb?1/zb:zb),ad))}Pc[Yb][ad]=D(rc);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Yb)){if("orientation"===Yb){if(Fc.set(wb),rc=mc.x&&!mc.y?"h":"v",(Fc.get()||rc)===qc.orientation)continue}else"orientationaxes"===
Yb&&(mc.orientation={v:"h",h:"v"}[qc.orientation]);ib.swapXYData(mc);Nc.calc=Nc.clearAxisTypes=!0}else-1!==ra.dataArrayContainers.indexOf(Fc.parts[0])?(ib.manageArrayContainers(Fc,wb,Pc),Nc.calc=!0):(Db?Db.arrayOk&&!oa.traceIs(qc,"regl")&&(ca.isArrayOrTypedArray(wb)||ca.isArrayOrTypedArray(rc))?Nc.calc=!0:sb.update(Nc,Db):Nc.calc=!0,Fc.set(wb))}}-1!==["swapxyaxes","orientationaxes"].indexOf(Yb)&&ma.swap(Ia,$a);"orientationaxes"===Yb&&(ad=la(Ia.layout,"hovermode"),sd=ad.get(),"x"===sd?ad.set("y"):
"y"===sd?ad.set("x"):"x unified"===sd?ad.set("y unified"):"y unified"===sd&&ad.set("x unified"));if(-1!==["orientation","type"].indexOf(Yb)){var Eb=[];for(ad=0;ad<$a.length;ad++)sd=Hb[$a[ad]],oa.traceIs(sd,"cartesian")&&(Ga(sd.xaxis||"x"),Ga(sd.yaxis||"y"));cb(Eb.map(Va),!0,0);cb(Eb.map(gb),[0,1],0)}}}if(Nc.calc||Nc.plot)Nc.fullReplot=!0;return{flags:Nc,undoit:Pc,redoit:ed,traces:$a,eventData:ca.extendDeepNoArrays([],[Ac,$a])}}function B(Ia){function Ua(cb,Sa){Ia[Sa]=Ia[cb];delete Ia[cb]}var $a=ca.counterRegex("axis",
".title",!1,!1),xa=/colorbar\.title$/,Ga=Object.keys(Ia),Va;for(Va=0;Va<Ga.length;Va++){var gb=Ga[Va];var Ma=Ia[gb];"title"!==gb&&!$a.test(gb)&&!xa.test(gb)||"string"!==typeof Ma&&"number"!==typeof Ma?-1<gb.indexOf("titlefont")?Ua(gb,gb.replace("titlefont","title.font")):-1<gb.indexOf("titleposition")?Ua(gb,gb.replace("titleposition","title.position")):-1<gb.indexOf("titleside")?Ua(gb,gb.replace("titleside","title.side")):-1<gb.indexOf("titleoffset")&&Ua(gb,gb.replace("titleoffset","title.offset")):
Ua(gb,gb.replace("title","title.text"))}}function t(Ia,Ua,$a){Ia=ca.getGraphDiv(Ia);ib.clearPromiseQueue(Ia);if(Ia.framework&&Ia.framework.isPolar)return Promise.resolve(Ia);var xa={};if("string"===typeof Ua)xa[Ua]=$a;else if(ca.isPlainObject(Ua))xa=ca.extendFlat({},Ua);else return ca.warn("Relayout fail.",Ua,$a),Promise.reject();Object.keys(xa).length&&(Ia.changed=!0);var Ga=I(Ia,xa);Ua=Ga.flags;Ua.calc&&(Ia.calcdata=void 0);$a=[ra.previousPromises];Ua.layoutReplot?$a.push(Pa.layoutReplot):Object.keys(xa).length&&
(G(Ia,Ua,Ga)||ra.supplyDefaults(Ia),Ua.legend&&$a.push(Pa.doLegend),Ua.layoutstyle&&$a.push(Pa.layoutStyles),Ua.axrange&&H($a,Ga.rangesAltered),Ua.ticks&&$a.push(Pa.doTicksRelayout),Ua.modebar&&$a.push(Pa.doModeBar),Ua.camera&&$a.push(Pa.doCamera),Ua.colorbars&&$a.push(Pa.doColorBars),$a.push(q));$a.push(ra.rehover,ra.redrag);qa.add(Ia,t,[Ia,Ga.undoit],t,[Ia,Ga.redoit]);(xa=ca.syncOrAsync($a,Ia))&&xa.then||(xa=Promise.resolve(Ia));return xa.then(function(){Ia.emit("plotly_relayout",Ga.eventData);
return Ia})}function G(Ia,Ua,$a){var xa=Ia._fullLayout;if(!Ua.axrange)return!1;for(var Ga in Ua)if("axrange"!==Ga&&Ua[Ga])return!1;for(var Va in $a.rangesAltered)if($a=ma.id2name(Va),Ua=Ia.layout[$a],$a=xa[$a],$a.autorange=Ua.autorange,$a.range=Ua.range.slice(),$a.cleanRange(),$a._matchGroup)for(var gb in $a._matchGroup)gb!==Va&&(Ua=xa[ma.id2name(gb)],Ua.autorange=$a.autorange,Ua.range=$a.range.slice(),Ua._input.range=$a.range.slice());return!0}function H(Ia,Ua){Ia.push(eb,Pa.doAutoRangeAndConstraints,
Ua?function($a){var xa=[],Ga=!0,Va;for(Va in Ua){var gb=ma.getFromId($a,Va);xa.push(Va);if(gb._matchGroup)for(var Ma in gb._matchGroup)Ua[Ma]||xa.push(Ma);gb.automargin&&(Ga=!1)}return ma.draw($a,xa,{skipTitle:Ga})}:function($a){return ma.draw($a,"redraw")},Pa.drawData,Pa.finalDraw)}function I(Ia,Ua){function $a(zb,fc){if(Array.isArray(zb))zb.forEach(function(Gc){$a(Gc,fc)});else if(!(zb in Ua||ib.hasParent(Ua,zb))){var zc=gb(Ga,zb);zb in Vb||(Vb[zb]=D(zc.get()));void 0!==fc&&zc.set(fc)}}function xa(zb){zb=
ma.name2id(zb.split(".")[0]);lc[zb]=1;return zb}var Ga=Ia.layout,Va=Ia._fullLayout,gb=C(Va._preGUI,Va._guiEditing),Ma=Object.keys(Ua),cb=ma.list(Ia),Sa=ca.extendDeepAll({},Ua),lb={},rb,yb;B(Ua);Ma=Object.keys(Ua);for(rb=0;rb<Ma.length;rb++)if(0===Ma[rb].indexOf("allaxes")){for(yb=0;yb<cb.length;yb++){var Hb=cb[yb]._id.substr(1);Hb=-1!==Hb.indexOf("scene")?Hb+".":"";Hb=Ma[rb].replace("allaxes",Hb+cb[yb]._name);Ua[Hb]||(Ua[Hb]=Ua[Ma[rb]])}delete Ua[Ma[rb]]}Ma=sb.layoutFlags();cb={};var Vb={},lc={},
Ac,ad;for(ad in Ua){if(ib.hasParent(Ua,ad))throw Error("cannot set "+ad+" and a parent attribute simultaneously");rb=gb(Ga,ad);yb=Ua[ad];for(Hb=rb.parts.length-1;0<Hb&&"string"!==typeof rb.parts[Hb];)Hb--;var Nc=rb.parts[Hb],ed=rb.parts[Hb-1]+"."+Nc,Pc=rb.parts.slice(0,Hb).join("."),sd=la(Ia.layout,Pc).get(),Db=la(Va,Pc).get(),Yb=rb.get();if(void 0!==yb){cb[ad]=yb;Vb[ad]="reverse"===Nc?yb:D(Yb);if((Hb=ka.getLayoutValObject(Va,rb.parts))&&Hb.impliedEdits&&null!==yb)for(var Fc in Hb.impliedEdits)$a(ca.relativeAttr(ad,
Fc),Hb.impliedEdits[Fc]);-1!==["width","height"].indexOf(ad)?yb?($a("autosize",null),ed="height"===ad?"width":"height",$a(ed,Va[ed])):Va[ad]=Ia._initialAutoSize[ad]:"autosize"===ad?($a("width",yb?null:Va.width),$a("height",yb?null:Va.height)):ed.match(Ka)?(xa(ed),la(Va,Pc+"._inputRange").set(null)):ed.match(Qa)?(xa(ed),la(Va,Pc+"._inputRange").set(null),ed=la(Va,Pc).get(),ed._inputDomain&&(ed._input.domain=ed._inputDomain.slice())):ed.match(Xa)&&la(Va,Pc+"._inputDomain").set(null);if("type"===Nc){var mc=
sd;ed="linear"===Db.type&&"log"===yb;var qc="log"===Db.type&&"linear"===yb;ed||qc?(mc&&mc.range?Db.autorange?ed&&(mc.range=mc.range[1]>mc.range[0]?[1,2]:[2,1]):(qc=mc.range[0],mc=mc.range[1],ed?(0>=qc&&0>=mc&&$a(Pc+".autorange",!0),0>=qc?qc=mc/1E6:0>=mc&&(mc=qc/1E6),$a(Pc+".range[0]",Math.log(qc)/Math.LN10),$a(Pc+".range[1]",Math.log(mc)/Math.LN10)):($a(Pc+".range[0]",Math.pow(10,qc)),$a(Pc+".range[1]",Math.pow(10,mc)))):$a(Pc+".autorange",!0),Array.isArray(Va._subplots.polar)&&Va._subplots.polar.length&&
Va[rb.parts[0]]&&"radialaxis"===rb.parts[1]&&delete Va[rb.parts[0]]._subplot.viewInitial["radialaxis.range"],oa.getComponentMethod("annotations","convertCoords")(Ia,Db,yb,$a),oa.getComponentMethod("images","convertCoords")(Ia,Db,yb,$a)):($a(Pc+".autorange",!0),$a(Pc+".range",null));la(Va,Pc+"._inputRange").set(null)}else Nc.match(tb)&&(ed=la(Va,ad).get(),(mc=(yb||{}).type)&&"-"!==mc||(mc="linear"),oa.getComponentMethod("annotations","convertCoords")(Ia,ed,mc,$a),oa.getComponentMethod("images","convertCoords")(Ia,
ed,mc,$a));if(ed=ob.containerArrayMatch(ad)){var rc=ed.array;rb=ed.index;Nc=ed.property;Hb=Hb||{editType:"calc"};""!==rb&&""===Nc&&(ob.isAddVal(yb)?Vb[ad]=null:ob.isRemoveVal(yb)?Vb[ad]=(la(Ga,rc).get()||[])[rb]:ca.warn("unrecognized full object value",Ua));sb.update(Ma,Hb);lb[rc]||(lb[rc]={});(Hb=lb[rc][rb])||(Hb=lb[rc][rb]={});Hb[Nc]=yb;delete Ua[ad]}else"reverse"===Nc?(sd.range?sd.range.reverse():($a(Pc+".autorange",!0),sd.range=[1,0]),Db.autorange?Ma.calc=!0:Ma.plot=!0):(Va._has("scatter-like")&&
Va._has("regl")&&"dragmode"===ad&&("lasso"===yb||"select"===yb)&&"lasso"!==Yb&&"select"!==Yb?Ma.plot=!0:Va._has("gl2d")?Ma.plot=!0:Hb?sb.update(Ma,Hb):Ma.calc=!0,rb.set(yb))}}for(rc in lb)ob.applyContainerArrayChanges(Ia,gb(Ga,rc),lb[rc],Ma,gb)||(Ma.plot=!0);Va=Va._axisConstraintGroups||[];for(Ac in lc)for(rb=0;rb<Va.length;rb++)if(lb=Va[rb],lb[Ac]){Ma.calc=!0;for(var wb in lb)lc[wb]||(ma.getFromId(Ia,wb)._constraintShrinkable=!0)}if(J(Ia)||Ua.height||Ua.width)Ma.plot=!0;if(Ma.plot||Ma.calc)Ma.layoutReplot=
!0;return{flags:Ma,rangesAltered:lc,undoit:Vb,redoit:cb,eventData:Sa}}function J(Ia){var Ua=Ia._fullLayout,$a=Ua.width,xa=Ua.height;Ia.layout.autosize&&ra.plotAutoSize(Ia,Ia.layout,Ua);return Ua.width!==$a||Ua.height!==xa}function L(Ia,Ua,$a,xa){Ia=ca.getGraphDiv(Ia);ib.clearPromiseQueue(Ia);if(Ia.framework&&Ia.framework.isPolar)return Promise.resolve(Ia);ca.isPlainObject(Ua)||(Ua={});ca.isPlainObject($a)||($a={});Object.keys(Ua).length&&(Ia.changed=!0);Object.keys($a).length&&(Ia.changed=!0);xa=
ib.coerceTraceIndices(Ia,xa);var Ga=A(Ia,ca.extendFlat({},Ua),xa);Ua=Ga.flags;var Va=I(Ia,ca.extendFlat({},$a)),gb=Va.flags;if(Ua.calc||gb.calc)Ia.calcdata=void 0;Ua.clearAxisTypes&&ib.clearAxisTypes(Ia,xa,$a);$a=[];gb.layoutReplot?$a.push(Pa.layoutReplot):Ua.fullReplot?$a.push(F.plot):($a.push(ra.previousPromises),G(Ia,gb,Va)||ra.supplyDefaults(Ia),Ua.style&&$a.push(Pa.doTraceStyle),(Ua.colorbars||gb.colorbars)&&$a.push(Pa.doColorBars),gb.legend&&$a.push(Pa.doLegend),gb.layoutstyle&&$a.push(Pa.layoutStyles),
gb.axrange&&H($a,Va.rangesAltered),gb.ticks&&$a.push(Pa.doTicksRelayout),gb.modebar&&$a.push(Pa.doModeBar),gb.camera&&$a.push(Pa.doCamera),$a.push(q));$a.push(ra.rehover,ra.redrag);qa.add(Ia,L,[Ia,Ga.undoit,Va.undoit,Ga.traces],L,[Ia,Ga.redoit,Va.redoit,Ga.traces]);($a=ca.syncOrAsync($a,Ia))&&$a.then||($a=Promise.resolve(Ia));return $a.then(function(){Ia.emit("plotly_update",{data:Ga.eventData,layout:Va.eventData});return Ia})}function E(Ia){return function(Ua){Ua._fullLayout._guiEditing=!0;var $a=
Ia.apply(null,arguments);Ua._fullLayout._guiEditing=!1;return $a}}function K(Ia,Ua){for(var $a=0;$a<Ua.length;$a++){var xa=Ua[$a],Ga=Ia.match(xa.pattern);if(Ga)return{head:Ga[1],attr:xa.attr}}}function N(Ia,Ua){var $a=la(Ua,Ia).get();if(void 0!==$a)return $a;Ia=Ia.split(".");for(Ia.pop();1<Ia.length;)if(Ia.pop(),$a=la(Ua,Ia.join(".")+".uirevision").get(),void 0!==$a)return $a;return Ua.uirevision}function O(Ia,Ua){var $a=ca.isPlainObject(Ia),xa=Array.isArray(Ia);return $a||xa?($a&&ca.isPlainObject(Ua)||
xa&&Array.isArray(Ua))&&JSON.stringify(Ia)===JSON.stringify(Ua):Ia===Ua}function Q(Ia,Ua,$a,xa){var Ga=xa._preGUI,Va,gb,Ma,cb=[],Sa={};for(Va in Ga){if(gb=K(Va,pb)){if(gb=gb.attr||gb.head+".uirevision",(gb=(Ma=la(xa,gb).get())&&N(gb,Ua))&&gb===Ma){Ma=Ga[Va];null===Ma&&(Ma=void 0);gb=la(Ua,Va);var lb=gb.get();if(O(lb,Ma)){void 0===lb&&"autorange"===Va.substr(Va.length-9)&&cb.push(Va.substr(0,Va.length-10));gb.set(D(la(xa,Va).get()));continue}}}else ca.warn("unrecognized GUI edit: "+Va);delete Ga[Va];
"range["===Va.substr(Va.length-8,6)&&(Sa[Va.substr(0,Va.length-9)]=1)}for(Ga=0;Ga<cb.length;Ga++)Ma=cb[Ga],Sa[Ma]&&(Ma=la(Ua,Ma).get())&&delete Ma.autorange;cb=xa._tracePreGUI;for(var rb in cb)for(Va in Sa=cb[rb],Ga=null,Sa){if(!Ga){a:{for(Ga=0;Ga<$a.length;Ga++)if($a[Ga]._fullInput.uid===rb)break a;Ga=-1}if(0>Ga){delete cb[rb];break}var yb=$a[Ga]._fullInput;a:{Ga=yb.index;for(Ma=0;Ma<Ia.length;Ma++)if(Ia[Ma].uid===rb){Ga=Ma;break a}Ga=!Ia[Ga]||Ia[Ga].uid?-1:Ga}if(0>Ga){delete cb[rb];break}Ga=Ia[Ga]}if(gb=
K(Va,db)){if(gb.attr?gb=(Ma=la(xa,gb.attr).get())&&N(gb.attr,Ua):(Ma=yb.uirevision,gb=Ga.uirevision,void 0===gb&&(gb=Ua.uirevision)),gb&&gb===Ma&&(Ma=Sa[Va],null===Ma&&(Ma=void 0),gb=la(Ga,Va),lb=gb.get(),O(lb,Ma))){gb.set(D(la(yb,Va).get()));continue}}else ca.warn("unrecognized GUI edit: "+Va+" in trace uid "+rb);delete Sa[Va]}}function P(Ia,Ua,$a,xa,Ga,Va){var gb=Ua.length===$a.length;if(!Ga&&!gb)return{fullReplot:!0,calc:!0};var Ma=sb.traceFlags();Ma.arrays={};Ma.nChanges=0;Ma.nChangesAnim=0;xa=
{getValObject:function(Sa){Sa=ka.getTraceValObject(cb,Sa);!cb._module.animatable&&Sa.anim&&(Sa.anim=!1);return Sa},flags:Ma,immutable:xa,transition:Ga,newDataRevision:Va,gd:Ia};Va={};for(Ia=0;Ia<Ua.length;Ia++)if($a[Ia]){var cb=$a[Ia]._fullInput;ra.hasMakesDataTransform(cb)&&(cb=$a[Ia]);Va[cb.uid]||(Va[cb.uid]=1,V(Ua[Ia]._fullInput,cb,[],xa))}if(Ma.calc||Ma.plot)Ma.fullReplot=!0;Ga&&Ma.nChanges&&Ma.nChangesAnim&&(Ma.anim=Ma.nChanges===Ma.nChangesAnim&&gb?"all":"some");return Ma}function T(Ia,Ua,$a,
xa,Ga){var Va=sb.layoutFlags();Va.arrays={};Va.rangesAltered={};Va.nChanges=0;Va.nChangesAnim=0;V(Ua,$a,[],{getValObject:function(gb){return ka.getLayoutValObject($a,gb)},flags:Va,immutable:xa,transition:Ga,gd:Ia});if(Va.plot||Va.calc)Va.layoutReplot=!0;Ga&&Va.nChanges&&Va.nChangesAnim&&(Va.anim=Va.nChanges===Va.nChangesAnim?"all":"some");return Va}function V(Ia,Ua,$a,xa){function Ga(){var Db=Va.editType;if(lb&&-1!==Db.indexOf("arraydraw"))ca.pushUnique(cb.arrays[lb],rb);else{sb.update(cb,Va);"none"!==
Db&&cb.nChanges++;xa.transition&&Va.anim&&cb.nChangesAnim++;if(Ka.test(lc)||Qa.test(lc))cb.rangesAltered[$a[0]]=1;Xa.test(lc)&&la(Ua,"_inputDomain").set(null);"datarevision"===gb&&(cb.newDataRevision=1)}}var Va,gb,Ma=xa.getValObject,cb=xa.flags,Sa=xa.immutable,lb=xa.inArray,rb=xa.arrayIndex;for(gb in Ia){if(cb.calc&&!xa.transition)return;var yb=Ia[gb],Hb=Ua[gb],Vb=$a.concat(gb);var lc=Vb.join(".");if("_"!==gb.charAt(0)&&"function"!==typeof yb&&yb!==Hb){if(("tick0"===gb||"dtick"===gb)&&"geo"!==$a[0]){var Ac=
Ua.tickmode;if("auto"===Ac||"array"===Ac||!Ac)continue}if(!("range"===gb&&Ua.autorange||("zmin"===gb||"zmax"===gb)&&"contourcarpet"===Ua.type||!(Va=Ma(Vb))||Va._compareAsJSON&&JSON.stringify(yb)===JSON.stringify(Hb))){Ac=Va.valType;var ad="data_array"===Va.valType||Va.arrayOk,Nc=Array.isArray(yb),ed=Array.isArray(Hb);if(Nc&&ed){var Pc="_input_"+gb,sd=Ia[Pc];Pc=Ua[Pc];if(Array.isArray(sd)&&sd===Pc)continue}if(void 0===Hb)ad&&Nc?cb.calc=!0:Ga();else if(Va._isLinkedToArray){ad=[];Nc=!1;lb||(cb.arrays[gb]=
ad);ed=Math.min(yb.length,Hb.length);sd=Math.max(yb.length,Hb.length);if(ed!==sd)if("arraydraw"===Va.editType)Nc=!0;else{Ga();continue}for(Ac=0;Ac<ed;Ac++)V(yb[Ac],Hb[Ac],Vb.concat(Ac),ca.extendFlat({inArray:gb,arrayIndex:Ac},xa));if(Nc)for(Ac=ed;Ac<sd;Ac++)ad.push(Ac)}else!Ac&&ca.isPlainObject(yb)?V(yb,Hb,Vb,xa):ad?Nc&&ed?(Sa&&(cb.calc=!0),(Sa||xa.newDataRevision)&&Ga()):Nc!==ed?cb.calc=!0:Ga():Nc&&ed?(yb.length!==Hb.length||String(yb)!==String(Hb))&&Ga():Ga()}}}for(gb in Ua)if(!(gb in Ia||"_"===
gb.charAt(0)||"function"===typeof Ua[gb]))if(Va=Ma($a.concat(gb)),("data_array"===Va.valType||Va.arrayOk)&&Array.isArray(Ua[gb])){cb.calc=!0;break}else Ga()}function aa(Ia,Ua){for(var $a in Ia)if("_"!==$a.charAt(0)){var xa=Ia[$a],Ga=Ua[$a];if(xa!==Ga)if(ca.isPlainObject(xa)&&ca.isPlainObject(Ga)){if(aa(xa,Ga))return!0}else if(Array.isArray(xa)&&Array.isArray(Ga)){if(xa.length!==Ga.length)return!0;for(var Va=0;Va<xa.length;Va++)if(xa[Va]!==Ga[Va])if(ca.isPlainObject(xa[Va])&&ca.isPlainObject(Ga[Va])){if(aa(xa[Va],
Ga[Va]))return!0}else return!0}else return!0}}function ba(Ia){var Ua=Y.select(Ia),$a=Ia._fullLayout;$a._container=Ua.selectAll(".plot-container").data([0]);$a._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0);$a._paperdiv=$a._container.selectAll(".svg-container").data([0]);$a._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative");$a._glcontainer=$a._paperdiv.selectAll(".gl-container").data([{}]);$a._glcontainer.enter().append("div").classed("gl-container",
!0);$a._paperdiv.selectAll(".main-svg").remove();$a._paperdiv.select(".modebar-container").remove();$a._paper=$a._paperdiv.insert("svg",":first-child").classed("main-svg",!0);$a._toppaper=$a._paperdiv.append("svg").classed("main-svg",!0);$a._modebardiv=$a._paperdiv.append("div");$a._hoverpaper=$a._paperdiv.append("svg").classed("main-svg",!0);if(!$a._uid){var xa={};Y.selectAll("defs").each(function(){this.id&&(xa[this.id.split("-")[1]]=1)});$a._uid=ca.randstr(xa)}$a._paperdiv.selectAll(".main-svg").attr(Fa.svgAttrs);
$a._defs=$a._paper.append("defs").attr("id","defs-"+$a._uid);$a._clips=$a._defs.append("g").classed("clips",!0);$a._topdefs=$a._toppaper.append("defs").attr("id","topdefs-"+$a._uid);$a._topclips=$a._topdefs.append("g").classed("clips",!0);$a._bgLayer=$a._paper.append("g").classed("bglayer",!0);$a._draggers=$a._paper.append("g").classed("draglayer",!0);Ua=$a._paper.append("g").classed("layer-below",!0);$a._imageLowerLayer=Ua.append("g").classed("imagelayer",!0);$a._shapeLowerLayer=Ua.append("g").classed("shapelayer",
!0);$a._cartesianlayer=$a._paper.append("g").classed("cartesianlayer",!0);$a._polarlayer=$a._paper.append("g").classed("polarlayer",!0);$a._ternarylayer=$a._paper.append("g").classed("ternarylayer",!0);$a._geolayer=$a._paper.append("g").classed("geolayer",!0);$a._funnelarealayer=$a._paper.append("g").classed("funnelarealayer",!0);$a._pielayer=$a._paper.append("g").classed("pielayer",!0);$a._treemaplayer=$a._paper.append("g").classed("treemaplayer",!0);$a._sunburstlayer=$a._paper.append("g").classed("sunburstlayer",
!0);$a._indicatorlayer=$a._toppaper.append("g").classed("indicatorlayer",!0);$a._glimages=$a._paper.append("g").classed("glimages",!0);Ua=$a._toppaper.append("g").classed("layer-above",!0);$a._imageUpperLayer=Ua.append("g").classed("imagelayer",!0);$a._shapeUpperLayer=Ua.append("g").classed("shapelayer",!0);$a._infolayer=$a._toppaper.append("g").classed("infolayer",!0);$a._menulayer=$a._toppaper.append("g").classed("menulayer",!0);$a._zoomlayer=$a._toppaper.append("g").classed("zoomlayer",!0);$a._hoverlayer=
$a._hoverpaper.append("g").classed("hoverlayer",!0);$a._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px");Ia.emit("plotly_framework")}var Y=b("d3"),ea=b("fast-isnumeric"),da=b("has-hover"),ca=b("../lib"),la=ca.nestedProperty,pa=b("../lib/events"),qa=b("../lib/queue"),oa=b("../registry"),ka=b("./plot_schema"),ra=b("../plots/plots"),ha=b("../plots/polar/legacy"),ma=b("../plots/cartesian/axes"),wa=b("../components/drawing"),na=b("../components/color"),
ya=b("../plots/cartesian/graph_interact").initInteractions,Fa=b("../constants/xmlns_namespaces"),Ha=b("../lib/svg_text_utils"),eb=b("../plots/cartesian/select").clearSelect,hb=b("./plot_config").dfltConfig,ob=b("./manage_arrays"),ib=b("./helpers"),Pa=b("./subroutines"),sb=b("./edit_types"),tb=b("../plots/cartesian/constants").AX_NAME_PATTERN,Aa=0,Ka=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Qa=/^[xyz]axis[0-9]*\.autorange$/,Xa=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/,pb=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},
{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,
attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],db=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];F.animate=function(Ia,Ua,$a){function xa(Ma,cb){var Sa=
0;return function(){if(Ma&&++Sa===cb)return Ma()}}Ia=ca.getGraphDiv(Ia);if(!ca.isPlotDiv(Ia))throw Error("This element is not a Plotly plot: "+Ia+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ga=Ia._transitionData;Ga._frameQueue||(Ga._frameQueue=[]);$a=ra.supplyAnimationDefaults($a);var Va=$a.transition,gb=$a.frame;void 0===Ga._frameWaitingCnt&&(Ga._frameWaitingCnt=0);return new Promise(function(Ma,cb){function Sa(){if(0!==
Ga._frameQueue.length){for(;Ga._frameQueue.length;){var Pc=Ga._frameQueue.pop();if(Pc.onInterrupt)Pc.onInterrupt()}Ia.emit("plotly_animationinterrupted",[])}}function lb(Pc){if(0!==Pc.length){for(var sd=0;sd<Pc.length;sd++){var Db="byname"===Pc[sd].type?ra.computeFrame(Ia,Pc[sd].name):Pc[sd].data;var Yb=sd;Yb=Array.isArray(gb)?Yb>=gb.length?gb[0]:gb[Yb]:gb;var Fc=sd;Fc=Array.isArray(Va)?Fc>=Va.length?Va[0]:Va[Fc]:Va;Fc.duration=Math.min(Fc.duration,Yb.duration);Db={frame:Db,name:Pc[sd].name,frameOpts:Yb,
transitionOpts:Fc};sd===Pc.length-1&&(Db.onComplete=xa(Ma,2),Db.onInterrupt=cb);Ga._frameQueue.push(Db)}"immediate"===$a.mode&&(Ga._lastFrameAt=-Infinity);Ga._animationRaf||yb()}}function rb(){if(Ga._currentFrame&&Ga._currentFrame.onComplete)Ga._currentFrame.onComplete();var Pc=Ga._currentFrame=Ga._frameQueue.shift();if(Pc){var sd=Pc.name?Pc.name.toString():null;Ia._fullLayout._currentFrame=sd;Ga._lastFrameAt=Date.now();Ga._timeToNext=Pc.frameOpts.duration;ra.transition(Ia,Pc.frame.data,Pc.frame.layout,
ib.coerceTraceIndices(Ia,Pc.frame.traces),Pc.frameOpts,Pc.transitionOpts).then(function(){if(Pc.onComplete)Pc.onComplete()});Ia.emit("plotly_animatingframe",{name:sd,frame:Pc.frame,animation:{frame:Pc.frameOpts,transition:Pc.transitionOpts}})}else Ia.emit("plotly_animated"),window.cancelAnimationFrame(Ga._animationRaf),Ga._animationRaf=null}function yb(){Ia.emit("plotly_animating");Ga._lastFrameAt=-Infinity;Ga._timeToNext=0;Ga._runningTransitions=0;Ga._currentFrame=null;var Pc=function(){Ga._animationRaf=
window.requestAnimationFrame(Pc);Date.now()-Ga._lastFrameAt>Ga._timeToNext&&rb()};Pc()}function Hb(Pc){Array.isArray(Va)?Pc.transitionOpts=Vb>=Va.length?Va[Vb]:Va[0]:Pc.transitionOpts=Va;Vb++;return Pc}var Vb=0,lc,Ac=[],ad=void 0===Ua||null===Ua;var Nc=Array.isArray(Ua);if(!ad&&!Nc&&ca.isPlainObject(Ua))Ac.push({type:"object",data:Hb(ca.extendFlat({},Ua))});else if(ad||-1!==["string","number"].indexOf(typeof Ua))for(Nc=0;Nc<Ga._frames.length;Nc++)(lc=Ga._frames[Nc])&&(ad||String(lc.group)===String(Ua))&&
Ac.push({type:"byname",name:String(lc.name),data:Hb({name:lc.name})});else if(Nc)for(Nc=0;Nc<Ua.length;Nc++)lc=Ua[Nc],-1!==["number","string"].indexOf(typeof lc)?(lc=String(lc),Ac.push({type:"byname",name:lc,data:Hb({name:lc})})):ca.isPlainObject(lc)&&Ac.push({type:"object",data:Hb(ca.extendFlat({},lc))});for(Nc=0;Nc<Ac.length;Nc++)if(lc=Ac[Nc],"byname"===lc.type&&!Ga._frameHash[lc.data.name]){ca.warn('animate failure: frame not found: "'+lc.data.name+'"');cb();return}-1!==["next","immediate"].indexOf($a.mode)&&
Sa();"reverse"===$a.direction&&Ac.reverse();var ed=Ia._fullLayout._currentFrame;if(ed&&$a.fromcurrent){ad=-1;for(Nc=0;Nc<Ac.length;Nc++)if(lc=Ac[Nc],"byname"===lc.type&&lc.name===ed){ad=Nc;break}if(0<ad&&ad<Ac.length-1){ed=[];for(Nc=0;Nc<Ac.length;Nc++)lc=Ac[Nc],("byname"!==Ac[Nc].type||Nc>ad)&&ed.push(lc);Ac=ed}}0<Ac.length?lb(Ac):(Ia.emit("plotly_animated"),Ma())})};F.addFrames=function(Ia,Ua,$a){Ia=ca.getGraphDiv(Ia);if(null===Ua||void 0===Ua)return Promise.resolve();if(!ca.isPlotDiv(Ia))throw Error("This element is not a Plotly plot: "+
Ia+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var xa,Ga=Ia._transitionData._frames,Va=Ia._transitionData._frameHash;if(!Array.isArray(Ua))throw Error("addFrames failure: frameList must be an Array of frame definitions"+Ua);var gb=Ga.length+2*Ua.length;var Ma=[],cb={};for(xa=Ua.length-1;0<=xa;xa--)if(ca.isPlainObject(Ua[xa])){var Sa=Ua[xa].name;var lb=(Va[Sa]||cb[Sa]||{}).name,rb=Ua[xa].name,yb=Va[lb]||
cb[lb];lb&&rb&&"number"===typeof rb&&yb&&5>Aa&&(Aa++,ca.warn('addFrames: overwriting frame "'+(Va[lb]||cb[lb]).name+'" with a frame whose name of type "number" also equates to "'+lb+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===Aa&&ca.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));cb[Sa]={name:Sa};
Ma.push({frame:ra.supplyFrameDefaults(Ua[xa]),index:$a&&void 0!==$a[xa]&&null!==$a[xa]?$a[xa]:gb+xa})}Ma.sort(function(Hb,Vb){return Hb.index>Vb.index?-1:Hb.index<Vb.index?1:0});Ua=[];$a=[];cb=Ga.length;for(xa=Ma.length-1;0<=xa;xa--){gb=Ma[xa].frame;"number"===typeof gb.name&&ca.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");if(!gb.name)for(;Va[gb.name="frame "+Ia._transitionData._counter++];);if(Va[gb.name]){for(Sa=0;Sa<Ga.length&&(Ga[Sa]||
{}).name!==gb.name;Sa++);Ua.push({type:"replace",index:Sa,value:gb});$a.unshift({type:"replace",index:Sa,value:Ga[Sa]})}else Sa=Math.max(0,Math.min(Ma[xa].index,cb)),Ua.push({type:"insert",index:Sa,value:gb}),$a.unshift({type:"delete",index:Sa}),cb++}Ga=xa=ra.modifyFrames;Va=[Ia,$a];Ma=[Ia,Ua];qa&&qa.add(Ia,xa,Va,Ga,Ma);return ra.modifyFrames(Ia,Ua)};F.deleteFrames=function(Ia,Ua){Ia=ca.getGraphDiv(Ia);if(!ca.isPlotDiv(Ia))throw Error("This element is not a Plotly plot: "+Ia);var $a,xa=Ia._transitionData._frames,
Ga=[],Va=[];if(!Ua)for(Ua=[],$a=0;$a<xa.length;$a++)Ua.push($a);Ua=Ua.slice();Ua.sort();for($a=Ua.length-1;0<=$a;$a--){var gb=Ua[$a];Ga.push({type:"delete",index:gb});Va.unshift({type:"insert",index:gb,value:xa[gb]})}$a=Ua=ra.modifyFrames;Va=[Ia,Va];gb=[Ia,Ga];qa&&qa.add(Ia,Ua,Va,$a,gb);return ra.modifyFrames(Ia,Ga)};F.addTraces=r;F.deleteTraces=u;F.extendTraces=g;F.moveTraces=v;F.prependTraces=m;F.newPlot=function(Ia,Ua,$a,xa){Ia=ca.getGraphDiv(Ia);ra.cleanPlot([],{},Ia._fullData||[],Ia._fullLayout||
{});ra.purge(Ia);return F.plot(Ia,Ua,$a,xa)};F.plot=function(Ia,Ua,$a,xa){function Ga(){for(var Ac=yb._basePlotModules,ad=0;ad<Ac.length;ad++)Ac[ad].drawFramework&&Ac[ad].drawFramework(Ia);!yb._glcanvas&&yb._has("gl")&&(yb._glcanvas=yb._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Nc){return Nc.key}),yb._glcanvas.enter().append("canvas").attr("class",function(Nc){return"gl-canvas gl-canvas-"+
Nc.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));if(yb._glcanvas&&(yb._glcanvas.attr("width",yb.width).attr("height",yb.height),(Ac=yb._glcanvas.data()[0].regl)&&(Math.floor(yb.width)!==Ac._gl.drawingBufferWidth||Math.floor(yb.height)!==Ac._gl.drawingBufferHeight)))if(lc)ca.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");else return ca.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),
ra.cleanPlot([],{},Ia._fullData,yb),ra.supplyDefaults(Ia),yb=Ia._fullLayout,ra.doCalcdata(Ia),lc++,Ga();"h"===yb.modebar.orientation?yb._modebardiv.style("height",null).style("width","100%"):yb._modebardiv.style("width",null).style("height",yb.height+"px");return ra.previousPromises(Ia)}function Va(){ra.clearAutoMarginIds(Ia);Pa.drawMarginPushers(Ia);ma.allowAutoMargin(Ia);if(yb._has("pie"))for(var Ac=Ia._fullData,ad=0;ad<Ac.length;ad++){var Nc=Ac[ad];"pie"===Nc.type&&Nc.automargin&&ra.allowAutoMargin(Ia,
"pie."+Nc.uid+".automargin")}ra.doAutoMargin(Ia);return ra.previousPromises(Ia)}function gb(){if(Hb)return ca.syncOrAsync([oa.getComponentMethod("shapes","calcAutorange"),oa.getComponentMethod("annotations","calcAutorange"),Ma],Ia);Ma()}function Ma(){Ia._transitioning||(Pa.doAutoRangeAndConstraints(Ia),rb&&ma.saveRangeInitial(Ia),oa.getComponentMethod("rangeslider","calcAutorange")(Ia))}function cb(){return ma.draw(Ia,rb?"":"redraw")}Ia=ca.getGraphDiv(Ia);pa.init(Ia);if(ca.isPlainObject(Ua)){var Sa=
Ua;Ua=Sa.data;$a=Sa.layout;xa=Sa.config;var lb=Sa.frames}if(!1===pa.triggerHandler(Ia,"plotly_beforeplot",[Ua,$a,xa]))return Promise.reject();Ua||$a||ca.isPlotDiv(Ia)||ca.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",Ia);h(Ia,xa);$a||($a={});Y.select(Ia).classed("js-plotly-plot",!0);wa.makeTester();Array.isArray(Ia._promises)||(Ia._promises=[]);var rb=0===(Ia.data||[]).length&&Array.isArray(Ua);Array.isArray(Ua)&&(ib.cleanData(Ua),rb?Ia.data=Ua:Ia.data.push.apply(Ia.data,
Ua),Ia.empty=!1);if(!Ia.layout||rb)Ia.layout=ib.cleanLayout($a);ra.supplyDefaults(Ia);var yb=Ia._fullLayout;xa=yb._has("cartesian");if(!yb._has("polar")&&Ua&&Ua[0]&&Ua[0].r)return ca.log("Legacy polar charts are deprecated!"),a(Ia,Ua,$a);yb._replotting=!0;if(rb||yb._shouldCreateBgLayer)ba(Ia),yb._shouldCreateBgLayer&&delete yb._shouldCreateBgLayer;Ia.framework!==ba&&(Ia.framework=ba,ba(Ia));wa.initGradients(Ia);rb&&ma.saveShowSpikeInitial(Ia);var Hb=!Ia.calcdata||Ia.calcdata.length!==(Ia._fullData||
[]).length;Hb&&ra.doCalcdata(Ia);for(Ua=0;Ua<Ia.calcdata.length;Ua++)Ia.calcdata[Ua][0].trace=Ia._fullData[Ua];Ia._context.responsive?Ia._responsiveChartHandler||(Ia._responsiveChartHandler=function(){ca.isHidden(Ia)||ra.resize(Ia)},window.addEventListener("resize",Ia._responsiveChartHandler)):ca.clearResponsive(Ia);var Vb=ca.extendFlat({},yb._size),lc=0;Ua=[ra.previousPromises,function(){if(lb)return F.addFrames(Ia,lb)},Ga,Va,function(){if(ra.didMarginChange(Vb,yb._size))return ca.syncOrAsync([Va,
Pa.layoutStyles],Ia)}];xa&&Ua.push(gb);Ua.push(Pa.layoutStyles);xa&&Ua.push(cb);Ua.push(Pa.drawData,Pa.finalDraw,ya,ra.addLinks,ra.rehover,ra.redrag,ra.doAutoMargin,ra.previousPromises);(Ua=ca.syncOrAsync(Ua,Ia))&&Ua.then||(Ua=Promise.resolve());return Ua.then(function(){q(Ia);return Ia})};F.purge=function(Ia){Ia=ca.getGraphDiv(Ia);var Ua=Ia._fullLayout||{};ra.cleanPlot([],{},Ia._fullData||[],Ua);ra.purge(Ia);pa.purge(Ia);Ua._container&&Ua._container.remove();delete Ia._context;return Ia};F.react=
function(Ia,Ua,$a,xa){function Ga(){return F.addFrames(Ia,Sa)}var Va;Ia=ca.getGraphDiv(Ia);ib.clearPromiseQueue(Ia);var gb=Ia._fullData,Ma=Ia._fullLayout;if(ca.isPlotDiv(Ia)&&gb&&Ma){if(ca.isPlainObject(Ua)){var cb=Ua;Ua=cb.data;$a=cb.layout;xa=cb.config;var Sa=cb.frames}cb=!1;xa&&(cb=ca.extendDeep({},Ia._context),Ia._context=void 0,h(Ia,xa),cb=aa(cb,Ia._context));Ia.data=Ua||[];ib.cleanData(Ia.data);Ia.layout=$a||{};ib.cleanLayout(Ia.layout);Q(Ia.data,Ia.layout,gb,Ma);xa=Object.getOwnPropertyNames(Ma);
for(var lb=0;lb<xa.length;lb++){var rb=xa[lb],yb=rb.substring(0,5);("xaxis"===yb||"yaxis"===yb)&&(rb=Ma[rb]._emptyCategories)&&rb()}ra.supplyDefaults(Ia,{skipUpdateCalc:!0});lb=Ia._fullData;xa=Ia._fullLayout;rb=void 0===xa.datarevision;yb=xa.transition;var Hb=T(Ia,Ma,xa,rb,yb),Vb=P(Ia,gb,lb,rb,yb,Hb.newDataRevision);J(Ia)&&(Hb.layoutReplot=!0);Vb.calc||Hb.calc?Ia.calcdata=void 0:ra.supplyDefaultsUpdateCalc(Ia.calcdata,lb);gb=[];Sa&&(Ia._transitionData={},ra.createTransitionData(Ia),gb.push(Ga));if(xa.transition&&
!cb&&(Vb.anim||Hb.anim))Hb.ticks&&gb.push(Pa.doTicksRelayout),ra.doCalcdata(Ia),Pa.doAutoRangeAndConstraints(Ia),gb.push(function(){return ra.transitionFromReact(Ia,Vb,Hb,Ma)});else if(Vb.fullReplot||Hb.layoutReplot||cb)Ia._fullLayout._skipDefaults=!0,gb.push(F.plot);else{for(Va in Hb.arrays)if(cb=Hb.arrays[Va],cb.length)if(xa=oa.getComponentMethod(Va,"drawOne"),xa!==ca.noop)for(lb=0;lb<cb.length;lb++)xa(Ia,cb[lb]);else{cb=oa.getComponentMethod(Va,"draw");if(cb===ca.noop)throw Error("cannot draw components: "+
Va);cb(Ia)}gb.push(ra.previousPromises);Vb.style&&gb.push(Pa.doTraceStyle);(Vb.colorbars||Hb.colorbars)&&gb.push(Pa.doColorBars);Hb.legend&&gb.push(Pa.doLegend);Hb.layoutstyle&&gb.push(Pa.layoutStyles);Hb.axrange&&H(gb);Hb.ticks&&gb.push(Pa.doTicksRelayout);Hb.modebar&&gb.push(Pa.doModeBar);Hb.camera&&gb.push(Pa.doCamera);gb.push(q)}gb.push(ra.rehover,ra.redrag);(Va=ca.syncOrAsync(gb,Ia))&&Va.then||(Va=Promise.resolve(Ia))}else Va=F.newPlot(Ia,Ua,$a,xa);return Va.then(function(){Ia.emit("plotly_react",
{data:Ua,layout:$a});return Ia})};F.redraw=function(Ia){Ia=ca.getGraphDiv(Ia);if(!ca.isPlotDiv(Ia))throw Error("This element is not a Plotly plot: "+Ia);ib.cleanData(Ia.data);ib.cleanLayout(Ia.layout);Ia.calcdata=void 0;return F.plot(Ia).then(function(){Ia.emit("plotly_redraw");return Ia})};F.relayout=t;F.restyle=w;F.setPlotConfig=function(Ia){return ca.extendFlat(hb,Ia)};F.update=L;F._guiRelayout=E(t);F._guiRestyle=E(w);F._guiUpdate=E(L);F._storeDirectGUIEdit=function(Ia,Ua,$a){for(var xa in $a){var Ga=
la(Ia,xa);x(xa,Ga.get(),$a[xa],Ua)}}},{"../components/color":615,"../components/drawing":637,"../constants/xmlns_namespaces":725,"../lib":749,"../lib/events":738,"../lib/queue":764,"../lib/svg_text_utils":773,"../plots/cartesian/axes":797,"../plots/cartesian/constants":803,"../plots/cartesian/graph_interact":806,"../plots/cartesian/select":816,"../plots/plots":860,"../plots/polar/legacy":868,"../registry":880,"./edit_types":780,"./helpers":781,"./manage_arrays":783,"./plot_config":785,"./plot_schema":786,
"./subroutines":788,d3:169,"fast-isnumeric":241,"has-hover":414}],785:[function(b,y,F){function q(n,p){for(var h in n){var a=n[h];a.valType?p[h]=a.dflt:(p[h]||(p[h]={}),q(a,p[h]))}}b={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",
dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",
values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",
dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",
dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};F={};q(b,F);y.exports={configAttributes:b,dfltConfig:F}},{}],786:[function(b,y,F){function q(E,K){var N,O,Q=E._basePlotModules;if(Q){for(N=0;N<Q.length;N++){var P=Q[N];if(P.attrRegex&&P.attrRegex.test(K)){if(P.layoutAttrOverrides)return P.layoutAttrOverrides;
if(!T&&P.layoutAttributes)var T=P.layoutAttributes}if((P=P.baseLayoutAttrOverrides)&&K in P)return P[K]}if(T)return T}if(Q=E._modules)for(N=0;N<Q.length;N++)if((E=Q[N].layoutAttributes)&&K in E)return E[K];for(O in m.componentsRegistry){P=m.componentsRegistry[O];if("colorscale"===P.name&&0===K.indexOf("coloraxis"))return P.layoutAttributes[K];if(!P.schema&&K===P.name)return P.layoutAttributes}return K in u?u[K]:"radialaxis"===K||"angularaxis"===K?x[K]:x.layout[K]||!1}function n(E,K,N){if(!E)return!1;
if(E._isLinkedToArray)if(p(K[N]))N++;else if(N<K.length)return!1;for(;N<K.length;N++){var O=E[K[N]];if(G(O))E=O;else break;if(N===K.length-1)break;if(E._isLinkedToArray){if(N++,!p(K[N]))return!1}else if("info_array"===E.valType){N++;O=K[N];if(!p(O))return!1;var Q=E.items;if(Array.isArray(Q)){if(O>=Q.length)return!1;if(2===E.dimensions){N++;if(K.length===N)break;E=K[N];if(!p(E))return!1;E=Q[O][E]}else E=Q[O]}else E=Q}}return E}function p(E){return E===Math.round(E)&&0<=E}function h(E){if("area"===
E){var K={attributes:C};var N={}}else K=m.modules[E]._module,N=K.basePlotModule;var O={type:null},Q=t({},r),P=t({},K.attributes);F.crawl(P,function(T,V,aa,ba,Y){I(Q,Y).set(void 0);void 0===T&&I(P,Y).set(void 0)});t(O,Q);m.traceIs(E,"noOpacity")&&delete O.opacity;m.traceIs(E,"showLegend")||(delete O.showlegend,delete O.legendgroup);m.traceIs(E,"noHover")&&(delete O.hoverinfo,delete O.hoverlabel);K.selectPoints||delete O.selectedpoints;t(O,P);N.attributes&&t(O,N.attributes);O.type=E;E={meta:K.meta||
{},categories:K.categories||{},animatable:!!K.animatable,type:E,attributes:l(O)};K.layoutAttributes&&(N={},t(N,K.layoutAttributes),E.layoutAttributes=l(N));K.animatable||F.crawl(E,function(T){F.isValObject(T)&&"anim"in T&&delete T.anim});return E}function a(){var E={},K;t(E,u);for(K in m.subplotsRegistry){var N=m.subplotsRegistry[K];if(N.layoutAttributes)if(Array.isArray(N.attr))for(var O=0;O<N.attr.length;O++)g(E,N,N.attr[O]);else g(E,N,"subplot"===N.attr?N.name:N.attr)}B(E,{radialaxis:x.radialaxis,
angularaxis:x.angularaxis});B(E,x.layout);for(K in m.componentsRegistry)if(N=m.componentsRegistry[K],(O=N.schema)&&(O.subplots||O.layout)){if((N=O.subplots)&&N.xaxis&&!N.yaxis)for(var Q in N.xaxis)delete E.yaxis[Q]}else"colorscale"===N.name?t(E,N.layoutAttributes):N.layoutAttributes&&(O=N.layoutAttributes,N=I(E,N.name),N.set(t(N.get()||{},O)));return{layoutAttributes:l(E)}}function f(E){var K=t({},m.transformsRegistry[E].attributes);Object.keys(m.componentsRegistry).forEach(function(N){var O=m.componentsRegistry[N];
O.schema&&O.schema.transforms&&O.schema.transforms[E]&&Object.keys(O.schema.transforms[E]).forEach(function(Q){var P=O.schema.transforms[E][Q];Q=I(K,Q);Q.set(t(Q.get()||{},P))})});return{attributes:l(K)}}function d(){var E={frames:t({},v)};l(E);return E.frames}function l(E){k(E);c(E);e(E);return E}function k(E){F.crawl(E,function(K,N,O){F.isValObject(K)?"data_array"===K.valType?(K.role="data",O[N+"src"]={valType:"string",editType:"none"}):!0===K.arrayOk&&(O[N+"src"]={valType:"string",editType:"none"}):
G(K)&&(K.role="object")})}function c(E){F.crawl(E,function(K,N,O){if(K){var Q=K._isLinkedToArray;Q&&(delete K._isLinkedToArray,O[N]={items:{}},O[N].items[Q]=K,O[N].role="object")}})}function e(E){function K(N){for(var O in N)if(G(N[O]))K(N[O]);else if(Array.isArray(N[O]))for(var Q=0;Q<N[O].length;Q++)K(N[O][Q]);else N[O]instanceof RegExp&&(N[O]=N[O].toString())}K(E)}function g(E,K,N){E=I(E,N);K=t({},K.layoutAttributes);K._isSubplotObj=!0;E.set(K)}var m=b("../registry");y=b("../lib");var r=b("../plots/attributes"),
u=b("../plots/layout_attributes"),v=b("../plots/frame_attributes"),w=b("../plots/animation_attributes"),D=b("./plot_config").configAttributes,C=b("../plots/polar/legacy/area_attributes"),x=b("../plots/polar/legacy/axis_attributes"),A=b("./edit_types"),B=y.extendFlat,t=y.extendDeepAll,G=y.isPlainObject,H=y.isArrayOrTypedArray,I=y.nestedProperty,J=y.valObjectMeta,L=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];F.IS_SUBPLOT_OBJ="_isSubplotObj";F.IS_LINKED_TO_ARRAY="_isLinkedToArray";
F.DEPRECATED="_deprecated";F.UNDERSCORE_ATTRS=L;F.get=function(){var E={};m.allTypes.concat("area").forEach(function(N){E[N]=h(N)});var K={};Object.keys(m.transformsRegistry).forEach(function(N){K[N]=f(N)});return{defs:{valObjects:J,metaKeys:L.concat(["description","role","editType","impliedEdits"]),editType:{traces:A.traces,layout:A.layout},impliedEdits:{}},traces:E,layout:a(),transforms:K,frames:d(),animation:l(w),config:l(D)}};F.crawl=function(E,K,N,O){var Q=N||0;O=O||"";Object.keys(E).forEach(function(P){var T=
E[P];if(-1===L.indexOf(P)){var V=(O?O+".":"")+P;K(T,P,E,Q,V);F.isValObject(T)||G(T)&&"impliedEdits"!==P&&F.crawl(T,K,Q+1,V)}})};F.isValObject=function(E){return E&&void 0!==E.valType};F.findArrayAttributes=function(E){function K(ea,da,ca,la){Q=Q.slice(0,la).concat([da]);P=P.slice(0,la).concat([ea&&ea._isLinkedToArray]);!ea||"data_array"!==ea.valType&&!0!==ea.arrayOk||"colorbar"===Q[la-1]&&("ticktext"===da||"tickvals"===da)||N(T,0,"")}function N(ea,da,ca){ea=ea[Q[da]];ca+=Q[da];if(da===Q.length-1)H(ea)&&
O.push(V+ca);else if(P[da]){if(Array.isArray(ea))for(var la=0;la<ea.length;la++)G(ea[la])&&N(ea[la],da+1,ca+"["+la+"].")}else G(ea)&&N(ea,da+1,ca+".")}var O=[],Q=[],P=[];var T=E;var V="";F.crawl(r,K);E._module&&E._module.attributes&&F.crawl(E._module.attributes,K);if(E=E.transforms)for(var aa=0;aa<E.length;aa++){var ba=E[aa],Y=ba._module;Y&&(V="transforms["+aa+"].",T=ba,F.crawl(Y.attributes,K))}return O};F.getTraceValObject=function(E,K){var N=K[0],O=1;if("transforms"===N){if(1===K.length)return r.transforms;
N=E.transforms;if(!Array.isArray(N)||!N.length)return!1;O=K[1];if(!p(O)||O>=N.length)return!1;E=(E=(m.transformsRegistry[N[O].type]||{}).attributes)&&E[K[2]];O=3}else if("area"===E.type)E=C[N];else{var Q=E._module;Q||(Q=(m.modules[E.type||r.type.dflt]||{})._module);if(!Q)return!1;E=(E=Q.attributes)&&E[N];E||(Q=Q.basePlotModule)&&Q.attributes&&(E=Q.attributes[N]);E||(E=r[N])}return n(E,K,O)};F.getLayoutValObject=function(E,K){E=q(E,K[0]);return n(E,K,1)}},{"../lib":749,"../plots/animation_attributes":792,
"../plots/attributes":794,"../plots/frame_attributes":826,"../plots/layout_attributes":851,"../plots/polar/legacy/area_attributes":866,"../plots/polar/legacy/axis_attributes":867,"../registry":880,"./edit_types":780,"./plot_config":785}],787:[function(b,y,F){function q(a){"s"!==a.charAt(a.length-1)&&n.warn("bad argument to arrayDefaultKey: "+a);return a.substr(0,a.length-1)+"defaults"}var n=b("../lib"),p=b("../plots/attributes"),h={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",
editType:"calc"}};F.templatedArray=function(a,f){f._isLinkedToArray=a;f.name=h.name;f.templateitemname=h.templateitemname;return f};F.traceTemplater=function(a){var f={},d;for(d in a){var l=a[d];Array.isArray(l)&&l.length&&(f[d]=0)}return{newTrace:function(k){d=n.coerce(k,{},p,"type");k={type:d,_template:null};if(d in f){l=a[d];var c=f[d]%l.length;f[d]++;k._template=l[c]}return k}}};F.newContainer=function(a,f,d){var l=a._template;d=l&&(l[f]||d&&l[d]);n.isPlainObject(d)||(d=null);return a[f]={_template:d}};
F.arrayTemplater=function(a,f,d){var l=(a=a._template)&&a[q(f)],k=a&&a[f];Array.isArray(k)&&k.length||(k=[]);var c={};return{newItem:function(e){var g={name:e.name,_input:e},m=g.templateitemname=e.templateitemname;if(!m||"string"!==typeof m)return g._template=l,g;for(var r=0;r<k.length;r++){var u=k[r];if(u.name===m)return c[m]=1,g._template=u,g}g[d]=e[d]||!1;g._template=!1;return g},defaultItems:function(){for(var e=[],g=0;g<k.length;g++){var m=k[g],r=m.name;if(r&&"string"===typeof r&&!c[r]){var u=
{_template:m,name:r,_input:{_templateitemname:r}};u.templateitemname=m.templateitemname;e.push(u);c[r]=1}}return e}}};F.arrayDefaultKey=q;F.arrayEditor=function(a,f,d){function l(){u={};m&&(u[r]={},u[r].templateitemname=m)}function k(v,w){m?n.nestedProperty(u[r],v).set(w):u[r+"."+v]=w}function c(){var v=u;l();return v}var e=(n.nestedProperty(a,f).get()||[]).length,g=d._index,m=g>=e&&(d._input||{})._templateitemname;m&&(g=e);var r=f+"["+g+"]",u;l();return{modifyBase:function(v,w){u[v]=w},modifyItem:k,
getUpdateObj:c,applyUpdate:function(v,w){v&&k(v,w);v=c();for(var D in v)n.nestedProperty(a,D).set(v[D])}}}},{"../lib":749,"../plots/attributes":794}],788:[function(b,y,F){function q(x,A,B){for(var t=0;t<B.length;t++){var G=B[t][0],H=B[t][1];if(!(G[0]>=x[1]||G[1]<=x[0])&&H[0]<A[1]&&H[1]>A[0])return!0}return!1}function n(x){function A(oa,ka,ra){var ha=oa._lw/2;return"x"===oa._id.charAt(0)?ka?"top"===ra?ka._offset-E-ha:ka._offset+ka._length+E+ha:L.t+L.h*(1-(oa.position||0))+ha%1:ka?"right"===ra?ka._offset+
ka._length+E+ha:ka._offset-E-ha:L.l+L.w*(oa.position||0)+ha%1}function B(oa){return"M"+ca+","+oa+"H"+la}function t(oa){return"M"+ea._offset+","+oa+"h"+ea._length}function G(oa){return"M"+oa+","+qa+"V"+pa}function H(oa){return"M"+oa+","+da._offset+"v"+da._length}function I(oa,ka,ra){if(!oa.showline||O!==oa._mainSubplot)return"";if(!oa._anchorAxis)return ra(oa._mainLinePosition);ra=ka(oa._mainLinePosition);oa.mirror&&(ra+=ka(oa._mainMirrorPosition));return ra}var J=x._fullLayout,L=J._size,E=L.p,K=u.list(x,
"",!0),N,O;J._paperdiv.style({width:x._context.responsive&&J.autosize&&!x._context._hasZeroWidth&&!x.layout.width?"100%":J.width+"px",height:x._context.responsive&&J.autosize&&!x._context._hasZeroHeight&&!x.layout.height?"100%":J.height+"px"}).selectAll(".main-svg").call(g.setSize,J.width,J.height);x._context.setBackground(x,J.paper_bgcolor);F.drawMainTitle(x);r.manage(x);if(!J._has("cartesian"))return l.previousPromises(x);for(N=0;N<K.length;N++){var Q=K[N];var P=Q._anchorAxis;Q._linepositions={};
Q._lw=g.crispRound(x,Q.linewidth,1);Q._mainLinePosition=A(Q,P,Q.side);Q._mainMirrorPosition=Q.mirror&&P?A(Q,P,v.OPPOSITE_SIDE[Q.side]):null}N=[];P=[];var T=[],V=1===e.opacity(J.paper_bgcolor)&&1===e.opacity(J.plot_bgcolor)&&J.paper_bgcolor===J.plot_bgcolor;for(O in J._plots)if(Q=J._plots[O],Q.mainplot)Q.bg&&Q.bg.remove(),Q.bg=void 0;else{var aa=Q.xaxis.domain,ba=Q.yaxis.domain,Y=Q.plotgroup;q(aa,ba,T)?(aa=Y.node(),Q=Q.bg=k.ensureSingle(Y,"rect","bg"),aa.insertBefore(Q.node(),aa.childNodes[0]),P.push(O)):
(Y.select("rect.bg").remove(),T.push([aa,ba]),V||(N.push(O),P.push(O)))}Q=J._bgLayer.selectAll(".bg").data(N);Q.enter().append("rect").classed("bg",!0);Q.exit().remove();Q.each(function(oa){J._plots[oa].bg=f.select(this)});for(N=0;N<P.length;N++){Q=J._plots[P[N]];var ea=Q.xaxis;var da=Q.yaxis;Q.bg&&Q.bg.call(g.setRect,ea._offset-E,da._offset-E,ea._length+2*E,da._length+2*E).call(e.fill,J.plot_bgcolor).style("stroke-width",0)}if(!J._hasOnlyLargeSploms)for(O in J._plots)Q=J._plots[O],ea=Q.xaxis,da=
Q.yaxis,P=Q.clipId="clip"+J._uid+O+"plot",N=k.ensureSingleById(J._clips,"clipPath",P,function(oa){oa.classed("plotclip",!0).append("rect")}),Q.clipRect=N.select("rect").attr({width:ea._length,height:da._length}),g.setTranslate(Q.plot,ea._offset,da._offset),Q._hasClipOnAxisFalse?N=null:(N=P,P=null),g.setClipUrl(Q.plot,N,x),Q.layerClipId=P;for(O in J._plots){Q=J._plots[O];ea=Q.xaxis;da=Q.yaxis;V="M0,0";if(p(ea,O)){P=a(ea,"left",da,K);var ca=ea._offset-(P?E+P:0);P=a(ea,"right",da,K);var la=ea._offset+
ea._length+(P?E+P:0);N=A(ea,da,"bottom");T=A(ea,da,"top");P=!ea._anchorAxis||O!==ea._mainSubplot;!P||"allticks"!==ea.mirror&&"all"!==ea.mirror||(ea._linepositions[O]=[N,T]);V=I(ea,B,t);P&&ea.showline&&("all"===ea.mirror||"allticks"===ea.mirror)&&(V+=B(N)+B(T));Q.xlines.style("stroke-width",ea._lw+"px").call(e.stroke,ea.showline?ea.linecolor:"rgba(0,0,0,0)")}Q.xlines.attr("d",V);V="M0,0";if(p(da,O)){P=a(da,"bottom",ea,K);var pa=da._offset+da._length+(P?E:0);P=a(da,"top",ea,K);var qa=da._offset-(P?
E:0);N=A(da,ea,"left");T=A(da,ea,"right");P=!da._anchorAxis||O!==da._mainSubplot;!P||"allticks"!==da.mirror&&"all"!==da.mirror||(da._linepositions[O]=[N,T]);V=I(da,G,H);P&&da.showline&&("all"===da.mirror||"allticks"===da.mirror)&&(V+=G(N)+G(T));Q.ylines.style("stroke-width",da._lw+"px").call(e.stroke,da.showline?da.linecolor:"rgba(0,0,0,0)")}Q.ylines.attr("d",V)}u.makeClipPaths(x);return l.previousPromises(x)}function p(x,A){return(x.ticks||x.showline)&&(A===x._mainSubplot||"all"===x.mirror||"allticks"===
x.mirror)}function h(x,A,B){if(!B.showline||!B._lw)return!1;if("all"===B.mirror||"allticks"===B.mirror)return!0;var t=B._anchorAxis;if(!t)return!1;var G=v.FROM_BL[A];return B.side===A?t.domain[G]===x.domain[G]:B.mirror&&t.domain[1-G]===x.domain[1-G]}function a(x,A,B,t){if(h(x,A,B))return B._lw;for(var G=0;G<t.length;G++){var H=t[G];if(H._mainAxis===B._mainAxis&&h(x,A,H))return H._lw}return 0}var f=b("d3"),d=b("../registry"),l=b("../plots/plots"),k=b("../lib"),c=b("../lib/clear_gl_canvases"),e=b("../components/color"),
g=b("../components/drawing"),m=b("../components/titles"),r=b("../components/modebar"),u=b("../plots/cartesian/axes"),v=b("../constants/alignment");y=b("../plots/cartesian/constraints");var w=y.enforce,D=y.clean,C=b("../plots/cartesian/autorange").doAutoRange;F.layoutStyles=function(x){return k.syncOrAsync([l.doAutoMargin,n],x)};F.drawMainTitle=function(x){var A=x._fullLayout;var B=A.title;var t="middle";k.isRightAnchor(B)?t="end":k.isLeftAnchor(B)&&(t="start");B=t;t=A.title;var G="0em";k.isTopAnchor(t)?
G=v.CAP_SHIFT+"em":k.isMiddleAnchor(t)&&(G=v.MID_SHIFT+"em");t=G;G=m.draw;var H=A._dfltTitle.plot;a:{var I=A.title;var J=A._size,L=0;"start"===B?L=I.pad.l:"end"===B&&(L=-I.pad.r);switch(I.xref){case "paper":I=J.l+J.w*I.x+L;break a;default:I=A.width*I.x+L}}a:{J=A.title;L=A._size;var E=0;"0em"!==t&&t?t===v.CAP_SHIFT+"em"&&(E=J.pad.t):E=-J.pad.b;if("auto"===J.y)J=L.t/2;else switch(J.yref){case "paper":J=L.t+L.h-L.h*J.y+E;break a;default:J=A.height-A.height*J.y+E}}G.call(m,x,"gtitle",{propContainer:A,
propName:"title.text",placeholder:H,attributes:{x:I,y:J,"text-anchor":B,dy:t}})};F.doTraceStyle=function(x){var A=x.calcdata,B=[],t;for(t=0;t<A.length;t++){var G=A[t],H=G[0]||{},I=H.trace||{},J=I._module||{},L=J.arraysToCalcdata;L&&L(G,I);(G=J.editStyle)&&B.push({fn:G,cd0:H})}if(B.length){for(t=0;t<B.length;t++)A=B[t],A.fn(x,A.cd0);c(x);F.redrawReglTraces(x)}l.style(x);d.getComponentMethod("legend","draw")(x);return l.previousPromises(x)};F.doColorBars=function(x){d.getComponentMethod("colorbar",
"draw")(x);return l.previousPromises(x)};F.layoutReplot=function(x){var A=x.layout;x.layout=void 0;return d.call("plot",x,"",A)};F.doLegend=function(x){d.getComponentMethod("legend","draw")(x);return l.previousPromises(x)};F.doTicksRelayout=function(x){u.draw(x,"redraw");x._fullLayout._hasOnlyLargeSploms&&(d.subplotsRegistry.splom.updateGrid(x),c(x),F.redrawReglTraces(x));F.drawMainTitle(x);return l.previousPromises(x)};F.doModeBar=function(x){var A=x._fullLayout;r.manage(x);for(var B=0;B<A._basePlotModules.length;B++){var t=
A._basePlotModules[B].updateFx;t&&t(x)}return l.previousPromises(x)};F.doCamera=function(x){x=x._fullLayout;for(var A=x._subplots.gl3d,B=0;B<A.length;B++){var t=x[A[B]];t._scene.setViewport(t)}};F.drawData=function(x){var A=x._fullLayout;c(x);for(var B=A._basePlotModules,t=0;t<B.length;t++)B[t].plot(x);F.redrawReglTraces(x);l.style(x);d.getComponentMethod("shapes","draw")(x);d.getComponentMethod("annotations","draw")(x);d.getComponentMethod("images","draw")(x);A._replotting=!1;return l.previousPromises(x)};
F.redrawReglTraces=function(x){var A=x._fullLayout;if(A._has("regl")){var B=x._fullData;x=[];var t=[],G;A._hasOnlyLargeSploms&&A._splomGrid.draw();for(G=0;G<B.length;G++){var H=B[G];!0===H.visible&&0!==H._length&&("splom"===H.type?A._splomScenes[H.uid].draw():"scattergl"===H.type?k.pushUnique(x,H.xaxis+H.yaxis):"scatterpolargl"===H.type&&k.pushUnique(t,H.subplot))}for(G=0;G<x.length;G++)B=A._plots[x[G]],B._scene&&B._scene.draw();for(G=0;G<t.length;G++)B=A[t[G]]._subplot,B._scene&&B._scene.draw()}};
F.doAutoRangeAndConstraints=function(x){var A=x._fullLayout,B=u.list(x,"",!0);A=A._axisMatchGroups||[];for(var t={},G,H=0;H<B.length;H++)G=B[H],D(x,G),C(x,G),t[G._id]=1;w(x);B=0;a:for(;B<A.length;B++){H=A[B];var I=null,J;for(J in H)if(G=u.getFromId(x,J),t[G._id]){if(!1===G.autorange)continue a;G=k.simpleMap(G.range,G.r2l);I?I[0]<I[1]?(I[0]=Math.min(I[0],G[0]),I[1]=Math.max(I[1],G[1])):(I[0]=Math.max(I[0],G[0]),I[1]=Math.min(I[1],G[1])):I=G}for(J in H)G=u.getFromId(x,J),G.range=k.simpleMap(I,G.l2r),
G._input.range=G.range.slice(),G.setScale()}};F.finalDraw=function(x){d.getComponentMethod("rangeslider","draw")(x);d.getComponentMethod("rangeselector","draw")(x)};F.drawMarginPushers=function(x){d.getComponentMethod("legend","draw")(x);d.getComponentMethod("rangeselector","draw")(x);d.getComponentMethod("sliders","draw")(x);d.getComponentMethod("updatemenus","draw")(x);d.getComponentMethod("colorbar","draw")(x)}},{"../components/color":615,"../components/drawing":637,"../components/modebar":675,
"../components/titles":710,"../constants/alignment":717,"../lib":749,"../lib/clear_gl_canvases":733,"../plots/cartesian/autorange":796,"../plots/cartesian/axes":797,"../plots/cartesian/constraints":804,"../plots/plots":860,"../registry":880,d3:169}],789:[function(b,y,F){function q(u,v){function w(H,I,J){if(k(I)&&k(H))q(H,I);else if(Array.isArray(I)&&Array.isArray(H)){H=m.arrayTemplater({_template:u},J);for(x=0;x<I.length;x++){J=I[x];var L=H.newItem(J)._template;L&&q(L,J)}H=H.defaultItems();for(x=
0;x<H.length;x++)I.push(H[x]._template);for(x=0;x<I.length;x++)delete I[x].templateitemname}}u=l.extendDeep({},u);var D=Object.keys(u).sort(),C,x;for(C=0;C<D.length;C++){var A=D[C],B=u[A];A in v?w(B,v[A],A):v[A]=B;if(n(A)===A)for(var t in v){var G=n(t);t===G||G!==A||t in u||w(B,v[t],A)}}}function n(u){return u.replace(/[0-9]+$/,"")}function p(u,v,w,D,C){var x=C&&w(C),A;for(A in u){var B=u[A],t=f(u,A,D),G=f(u,A,C),H=w(G);if(!H){var I=n(A);I!==A&&(G=f(u,I,C),H=w(G))}if(!(x&&x===H||!H||H._noTemplating||
"data_array"===H.valType||H.arrayOk&&Array.isArray(B)))if(!H.valType&&k(B))p(B,v,w,t,G);else if(H._isLinkedToArray&&Array.isArray(B)){var J=!1;H=0;I={};for(var L=0;L<B.length;L++){var E=B[L];if(k(E)){var K=E.name;K?I[K]||(p(E,v,w,f(B,H,t),f(B,H,G)),H++,I[K]=1):J||(J=m.arrayDefaultKey(A),J=f(u,J,D),K=f(B,H,t),p(E,v,w,K,f(B,H,G)),E=l.nestedProperty(v,K),l.nestedProperty(v,J).set(E.get()),E.set(null),J=!0)}}}else l.nestedProperty(v,t).set(B)}}function h(u,v){return c.getLayoutValObject(u,l.nestedProperty({},
v).parts)}function a(u,v){return c.getTraceValObject(u,l.nestedProperty({},v).parts)}function f(u,v,w){return w?Array.isArray(u)?w+"["+v+"]":w+"."+v:v}function d(u){switch(u.code){case "data":var v="The template has no key data.";break;case "layout":v="The template has no key layout.";break;case "missing":v=u.path?"There are no templates for item "+u.path+" with name "+u.templateitemname:"There are no templates for trace "+u.index+", of type "+u.traceType+".";break;case "unused":v=u.path?"The template item at "+
u.path+" was not used in constructing the plot.":u.dataCount?"Some of the templates of type "+u.traceType+" were not used. The template has "+u.templateCount+" traces, the data only has "+u.dataCount+" of this type.":"The template has "+u.templateCount+" traces of type "+u.traceType+" but there are none in the data.";break;case "reused":v="Some of the templates of type "+u.traceType+" were used more than once. The template has "+u.templateCount+" traces, the data has "+u.dataCount+" of this type."}u.msg=
v;return u}var l=b("../lib"),k=l.isPlainObject,c=b("./plot_schema"),e=b("../plots/plots"),g=b("../plots/attributes"),m=b("./plot_template"),r=b("./plot_config").dfltConfig;F.makeTemplate=function(u){u=l.isPlainObject(u)?u:l.getGraphDiv(u);u=l.extendDeep({_context:r},{data:u.data,layout:u.layout});e.supplyDefaults(u);var v=u.data||[],w=u.layout||{};w._basePlotModules=u._fullLayout._basePlotModules;w._modules=u._fullLayout._modules;var D={data:{},layout:{}};v.forEach(function(t){var G={};p(t,G,a.bind(null,
t));t=l.coerce(t,{},g,"type");var H=D.data[t];H||(H=D.data[t]=[]);H.push(G)});p(w,D.layout,h.bind(null,w));delete D.layout.template;u=w.template;if(k(u)){v=u.layout;var C;k(v)&&q(v,D.layout);var x=u.data;if(k(x)){for(C in D.data)if(v=x[C],Array.isArray(v)){var A=D.data[C];var B=A.length;w=v.length;for(u=0;u<B;u++)q(v[u%w],A[u]);for(u=B;u<w;u++)A.push(l.extendDeep({},v[u]))}for(C in x)C in D.data||(D.data[C]=l.extendDeep([],x[C]))}}return D};F.validateTemplate=function(u,v){function w(J,L){for(var E in J)if("_"!==
E.charAt(0)&&k(J[E])){var K=n(E),N=[],O;for(O=0;O<L.length;O++)N.push(f(J,E,L[O])),K!==E&&N.push(f(J,K,L[O]));for(O=0;O<N.length;O++)G[N[O]]=1;w(J[E],N)}}function D(J,L){for(var E in J)if(-1===E.indexOf("defaults")&&k(J[E])){var K=f(J,E,L);G[K]?D(J[E],K):t.push({code:"unused",path:K})}}function C(J,L){for(var E in J)if("_"!==E.charAt(0)){var K=J[E],N=f(J,E,L);if(k(K))Array.isArray(J)&&!1===K._template&&K.templateitemname&&t.push({code:"missing",path:N,templateitemname:K.templateitemname}),C(K,N);
else{var O;if(O=Array.isArray(K))a:{O=K;for(var Q=0;Q<O.length;Q++)if(k(O[Q])){O=!0;break a}O=void 0}O&&C(K,N)}}}var x=l.extendDeep({},{_context:r,data:u.data,layout:u.layout}),A=x.layout||{};k(v)||(v=A.template||{});var B=v.layout;u=v.data;var t=[];x.layout=A;x.layout.template=v;e.supplyDefaults(x);v=x._fullLayout;x=x._fullData;var G={};k(B)?(w(v,["layout"]),D(B,"layout")):t.push({code:"layout"});if(k(u)){B={};for(A=0;A<x.length;A++){var H=x[A];var I=H.type;B[I]=(B[I]||0)+1;H._fullInput._template||
t.push({code:"missing",index:H._fullInput.index,traceType:I})}for(I in u)A=u[I].length,H=B[I]||0,A>H?t.push({code:"unused",traceType:I,templateCount:A,dataCount:H}):H>A&&t.push({code:"reused",traceType:I,templateCount:A,dataCount:H})}else t.push({code:"data"});C({data:x,layout:v},"");if(t.length)return t.map(d)}},{"../lib":749,"../plots/attributes":794,"../plots/plots":860,"./plot_config":785,"./plot_schema":786,"./plot_template":787}],790:[function(b,y,F){var q=b("fast-isnumeric"),n=b("./plot_api"),
p=b("../plots/plots"),h=b("../lib"),a=b("../snapshot/helpers"),f=b("../snapshot/tosvg"),d=b("../snapshot/svgtoimg"),l=b("../version").version,k={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};y.exports=function(c,e){function g(K){return!(K in e)||h.validate(e[K],k[K])}function m(K,
N){return h.coerce(e,C,k,K,N)}function r(){return new Promise(function(K){setTimeout(K,a.getDelay(I._fullLayout))})}function u(){return new Promise(function(K,N){var O=f(I,x,t),Q=I._fullLayout.width,P=I._fullLayout.height;if("full-json"===x)return N=p.graphJson(I,!1,"keepdata","object",!0,!0),N.version=l,N=JSON.stringify(N),n.purge(I),document.body.removeChild(I),H?K(N):K(a.encodeJSON(N));n.purge(I);document.body.removeChild(I);if("svg"===x)return H?K(O):K(a.encodeSVG(O));var T=document.createElement("canvas");
T.id=h.randstr();d({format:x,width:Q,height:P,scale:t,canvas:T,svg:O,promise:!0}).then(K).catch(N)})}e=e||{};if(h.isPlainObject(c)){var v=c.data||[];var w=c.layout||{};var D=c.config||{};c={}}else c=h.getGraphDiv(c),v=h.extendDeep([],c.data),w=h.extendDeep({},c.layout),D=c._context,c=c._fullLayout||{};if(!g("width")&&null!==e.width||!g("height")&&null!==e.height)throw Error("Height and width should be pixel values.");if(!g("format"))throw Error("Image format is not jpeg, png, svg or webp.");var C=
{},x=m("format"),A=m("width"),B=m("height"),t=m("scale"),G=m("setBackground"),H=m("imageDataOnly"),I=document.createElement("div");I.style.position="absolute";I.style.left="-5000px";document.body.appendChild(I);var J=h.extendFlat({},w);A?J.width=A:null===e.width&&q(c.width)&&(J.width=c.width);B?J.height=B:null===e.height&&q(c.height)&&(J.height=c.height);var L=h.extendFlat({},D,{_exportedPlot:!0,staticPlot:!0,setBackground:G}),E=a.getRedrawFunc(I);return new Promise(function(K,N){n.plot(I,v,J,L).then(E).then(r).then(u).then(function(O){O=
H?O.replace(a.IMAGE_URL_PREFIX,""):O;K(O)}).catch(function(O){N(O)})})}},{"../lib":749,"../plots/plots":860,"../snapshot/helpers":884,"../snapshot/svgtoimg":886,"../snapshot/tosvg":888,"../version":1337,"./plot_api":784,"fast-isnumeric":241}],791:[function(b,y,F){function q(r,u,v,w,D,C){C=C||[];for(var x=Object.keys(r),A=0;A<x.length;A++){var B=x[A];if("transforms"!==B){var t=C.slice();t.push(B);var G=r[B],H=u[B];var I=v;if(B in I)var J=I[B];else J=h(B),J=I[J.keyMinusId];var L=(J||{}).valType,E="info_array"===
L,K="colorscale"===L;I=(J||{}).items;var N=v;var O=B,Q=h(O),P=Q.keyMinusId;Q=Q.id;N=P in N&&N[P]._isSubplotObj&&Q?!0:O in N;if(N)if(k(G)&&k(H)&&"any"!==L)q(G,H,J,w,D,t);else if(E&&c(G))if(G.length>H.length&&w.push(p("unused",D,t.concat(H.length))),B=H.length,(L=Array.isArray(I))&&(B=Math.min(B,I.length)),2===J.dimensions)for(E=0;E<B;E++)if(c(G[E]))for(G[E].length>H[E].length&&w.push(p("unused",D,t.concat(E,H[E].length))),P=H[E].length,J=0;J<(L?Math.min(P,I[E].length):P);J++)K=L?I[E][J]:I,N=G[E][J],
O=H[E][J],a.validate(N,K)?O!==N&&O!==+N&&w.push(p("dynamic",D,t.concat(E,J),N,O)):w.push(p("value",D,t.concat(E,J),N));else w.push(p("array",D,t.concat(E),G[E]));else for(E=0;E<B;E++)K=L?I[E]:I,N=G[E],O=H[E],a.validate(N,K)?O!==N&&O!==+N&&w.push(p("dynamic",D,t.concat(E),N,O)):w.push(p("value",D,t.concat(E),N));else if(J.items&&!E&&c(G)){I=I[Object.keys(I)[0]];B=[];for(J=0;J<H.length;J++)E=H[J]._index||J,L=t.slice(),L.push(E),k(G[E])&&k(H[J])&&(B.push(E),E=G[E],K=H[J],k(E)&&!1!==E.visible&&!1===K.visible?
w.push(p("invisible",D,L)):q(E,K,I,w,D,L));for(J=0;J<G.length;J++)L=t.slice(),L.push(J),k(G[J])?-1===B.indexOf(J)&&w.push(p("unused",D,L)):w.push(p("object",D,L,G[J]))}else!k(G)&&k(H)?w.push(p("object",D,t,G)):e(G)||!e(H)||E||K?B in u?a.validate(G,J)?"enumerated"===J.valType&&(J.coerceNumber&&G!==+H||G!==H)&&w.push(p("dynamic",D,t,G,H)):w.push(p("value",D,t,G)):w.push(p("unused",D,t,G)):w.push(p("array",D,t,G));else w.push(p("schema",D,t))}}return w}function n(r){return c(r)?"In data trace "+r[1]+
", ":"In "+r+", "}function p(r,u,v,w,D){v=v||"";if(c(u)){var C=u[0];var x=u[1]}else C=u,x=null;var A=v;if(c(A)){for(var B="",t=0;t<A.length;t++){var G=A[t];B="number"===typeof G?B.substr(0,B.length-1)+"["+G+"]":B+G;t<A.length-1&&(B+=".")}A=B}else A=String(A);u=g[r](u,A,w,D);a.log(u);return{code:r,container:C,trace:x,path:v,astr:A,msg:u}}function h(r){r=r.match(m);return{keyMinusId:r&&r[1],id:r&&r[2]}}var a=b("../lib"),f=b("../plots/plots"),d=b("./plot_schema"),l=b("./plot_config").dfltConfig,k=a.isPlainObject,
c=Array.isArray,e=a.isArrayOrTypedArray;y.exports=function(r,u){void 0===r&&(r=[]);void 0===u&&(u={});var v=d.get(),w=[],D={_context:a.extendFlat({},l)};if(c(r)){D.data=a.extendDeep([],r);var C=r}else D.data=[],C=[],w.push(p("array","data"));if(k(u)){D.layout=a.extendDeep({},u);var x=u}else D.layout={},x={},1<arguments.length&&w.push(p("object","layout"));f.supplyDefaults(D);for(var A=D._fullData,B=C.length,t=0;t<B;t++){var G=C[t],H=["data",t];if(k(G)){var I=A[t],J=I.type,L=v.traces[J].attributes;
L.type={valType:"enumerated",values:[J]};!1===I.visible&&!1!==G.visible&&w.push(p("invisible",H));q(G,I,L,w,H);G=G.transforms;I=I.transforms;if(G)for(c(G)||w.push(p("array",H,["transforms"])),H.push("transforms"),J=0;J<G.length;J++){L=["transforms",J];var E=G[J].type;k(G[J])?(E=v.transforms[E]?v.transforms[E].attributes:{},E.type={valType:"enumerated",values:Object.keys(v.transforms)},q(G[J],I[J],E,w,H,L)):w.push(p("object",H,L))}}else w.push(p("object",H))}D=D._fullLayout;C=v.layout.layoutAttributes;
for(B=0;B<A.length;B++)t=A[B],H=v.traces[t.type],(G=H.layoutAttributes)&&(t.subplot?a.extendFlat(C[H.attributes.subplot.dflt],G):a.extendFlat(C,G));q(x,D,C,w,"layout");return 0===w.length?void 0:w};var g={object:function(r,u){return("layout"===r&&""===u?"The layout argument":"data"===r[0]&&""===u?"Trace "+r[1]+" in the data argument":n(r)+"key "+u)+" must be linked to an object container"},array:function(r,u){return("data"===r?"The data argument":n(r)+"key "+u)+" must be linked to an array container"},
schema:function(r,u){return n(r)+"key "+u+" is not part of the schema"},unused:function(r,u,v){v=k(v)?"container":"key";return n(r)+v+" "+u+" did not get coerced"},dynamic:function(r,u,v,w){return[n(r)+"key",u,"(set to '"+v+"')","got reset to","'"+w+"'","during defaults."].join(" ")},invisible:function(r,u){return(u?n(r)+"item "+u:"Trace "+r[1])+" got defaulted to be not visible"},value:function(r,u,v){return[n(r)+"key "+u,"is set to an invalid value ("+v+")"].join(" ")}},m=a.counterRegex("([a-z]+)")},
{"../lib":749,"../plots/plots":860,"./plot_config":785,"./plot_schema":786}],792:[function(b,y,F){y.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",
values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],793:[function(b,
y,F){var q=b("../lib"),n=b("../plot_api/plot_template");y.exports=function(p,h,a){var f=a.name,d=a.inclusionAttr||"visible",l=h[f],k=q.isArrayOrTypedArray(p[f])?p[f]:[];p=h[f]=[];var c=n.arrayTemplater(h,f,d);for(f=0;f<k.length;f++){var e=k[f];if(q.isPlainObject(e))var g=c.newItem(e);else g=c.newItem({}),g[d]=!1;g._index=f;!1!==g[d]&&a.handleItemDefaults(e,g,h,a);p.push(g)}d=c.defaultItems();for(f=0;f<d.length;f++)g=d[f],g._index=p.length,a.handleItemDefaults({},g,h,a,{}),p.push(g);if(q.isArrayOrTypedArray(l))for(h=
Math.min(l.length,p.length),f=0;f<h;f++)q.relinkPrivateKeys(p[f],l[f]);return p}},{"../lib":749,"../plot_api/plot_template":787}],794:[function(b,y,F){b=b("../components/fx/attributes");y.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",
min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:b.hoverlabel,stream:{token:{valType:"string",
noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":646}],795:[function(b,y,F){y.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],796:[function(b,y,F){function q(g,m){function r(P,T){return Math.max(P,
D(T))}var u,v,w=[],D=n(m);w=p(g,m);var C=w.min,x=w.max;if(0===C.length||0===x.length)return k.simpleMap(m.range,m.r2l);w=C[0].val;var A=x[0].val;for(u=1;u<C.length&&w===A;u++)w=Math.min(w,C[u].val);for(u=1;u<x.length&&w===A;u++)A=Math.max(A,x[u].val);g=!1;m.range&&(g=k.simpleMap(m.range,m.r2l),g=g[1]<g[0]);"reversed"===m.autorange&&(g=!0,m.autorange=!0);var B=m.rangemode,t="tozero"===B,G="nonnegative"===B;B=m._length;var H=B/10,I=function(P,T){var V=0;if(m.rangebreaks)for(P=m.locateBreaks(P,T),T=
0;T<P.length;T++){var aa=P[T];V+=aa.max-aa.min}return V},J=0;for(u=0;u<C.length;u++){var L=C[u];for(v=0;v<x.length;v++){var E=x[v];var K=E.val-L.val-I(L.val,E.val);if(0<K){var N=B-D(L)-D(E);if(N>H){if(K/N>J){var O=L;var Q=E;J=K/N}}else K/B>J&&(O={val:L.val,pad:0},Q={val:E.val,pad:0},J=K/B)}}}w===A?(L=w-1,E=w+1,t?0===w?w=[0,1]:(C=(0<w?x:C).reduce(r,0),C=w/(1-Math.min(.5,C/B)),w=0<w?[0,C]:[C,0]):w=G?[Math.max(0,L),Math.max(1,E)]:[L,E]):(t?(0<=O.val&&(O={val:0,pad:0}),0>=Q.val&&(Q={val:0,pad:0})):G&&
(0>O.val-J*D(O)&&(O={val:0,pad:0}),0>=Q.val&&(Q={val:1,pad:0})),J=(Q.val-O.val-I(L.val,E.val))/(B-D(O)-D(Q)),w=[O.val-J*D(O),Q.val+J*D(Q)]);g&&w.reverse();return k.simpleMap(w,m.l2r||Number)}function n(g){var m=g._length/20;"domain"===g.constrain&&g._inputDomain&&(m*=(g._inputDomain[1]-g._inputDomain[0])/(g.domain[1]-g.domain[0]));return function(r){return r.pad+(r.extrapad?m:0)}}function p(g,m){function r(B,t){for(C=0;C<t.length;C++){var G=B[t[C]],H=(G._extremes||{})[u];if(!0===G.visible&&H){for(x=
0;x<H.min.length;x++)A=H.min[x],h(w,A.val,A.pad,{extrapad:A.extrapad},f);for(x=0;x<H.max.length;x++)A=H.max[x],h(D,A.val,A.pad,{extrapad:A.extrapad},d)}}}var u=m._id,v=g._fullLayout,w=[],D=[],C,x,A;r(g._fullData,m._traceIndices);r(v.annotations||[],m._annIndices||[]);r(v.shapes||[],m._shapeIndices||[]);return{min:w,max:D}}function h(g,m,r,u,v){var w=u.tozero;u=u.extrapad;for(var D=!0,C=0;C<g.length&&D;C++){var x=g[C];if(v(x.val,m)&&x.pad>=r&&(x.extrapad||!u)){D=!1;break}else v(m,x.val)&&x.pad<=r&&
(u||!x.extrapad)&&(g.splice(C,1),C--)}D&&(v=w&&0===m,g.push({val:m,pad:v?0:r,extrapad:v?!1:u}))}function a(g){return l(g)&&Math.abs(g)<c}function f(g,m){return g<=m}function d(g,m){return g>=m}var l=b("fast-isnumeric"),k=b("../../lib"),c=b("../../constants/numerical").FP_SAFE,e=b("../../registry");y.exports={getAutoRange:q,makePadFn:n,doAutoRange:function(g,m){m.setScale();if(m.autorange){m.range=q(g,m);m._r=m.range.slice();m._rl=k.simpleMap(m._r,m.r2l);var r=m._input,u={};u[m._attr+".range"]=m.range;
u[m._attr+".autorange"]=m.autorange;e.call("_storeDirectGUIEdit",g.layout,g._fullLayout._preGUI,u);r.range=m.range.slice();r.autorange=m.autorange}(r=m._anchorAxis)&&r.rangeslider&&((u=r.rangeslider[m._name])&&"auto"===u.rangemode&&(u.range=q(g,m)),r._input.rangeslider[m._name]=k.extendFlat({},u))},findExtremes:function(g,m,r){function u(Y){if(Array.isArray(Y))return t=!0,function(da){return Math.max(Number(Y[da]||0),0)};var ea=Math.max(Number(Y||0),0);return function(){return ea}}function v(Y){I=
m[Y];l(I)&&(E=N(Y),K=O(Y),G?(J=g.c2l(I)-P(Y),L=g.c2l(I)+Q(Y)):(T=I-P(Y),V=I+Q(Y),B&&T<V/10&&(T=V/10),J=g.c2l(T),L=g.c2l(V)),A&&(J=Math.min(0,J),L=Math.max(0,L)),a(J)&&h(w,J,K,ba,f),a(L)&&h(D,L,E,ba,d))}r||(r={});g._m||g.setScale();var w=[],D=[],C=m.length,x=r.padded||!1,A=r.tozero&&("linear"===g.type||"-"===g.type),B="log"===g.type,t=!1,G=r.vpadLinearized||!1,H,I,J,L,E,K,N=u((0<g._m?r.ppadplus:r.ppadminus)||r.ppad||0),O=u((0<g._m?r.ppadminus:r.ppadplus)||r.ppad||0),Q=u(r.vpadplus||r.vpad),P=u(r.vpadminus||
r.vpad);if(!t){var T=Infinity;var V=-Infinity;if(B)for(H=0;H<C;H++){var aa=m[H];aa<T&&0<aa&&(T=aa);aa>V&&aa<c&&(V=aa)}else for(H=0;H<C;H++)aa=m[H],aa<T&&aa>-c&&(T=aa),aa>V&&aa<c&&(V=aa);m=[T,V];C=2}var ba={tozero:A,extrapad:x};x=Math.min(6,C);for(H=0;H<x;H++)v(H);for(H=C-1;H>=x;H--)v(H);return{min:w,max:D,opts:r}},concatExtremes:p}},{"../../constants/numerical":724,"../../lib":749,"../../registry":880,"fast-isnumeric":241}],797:[function(b,y,F){function q(xa){var Ga=1E-4*(xa[1]-xa[0]);return[xa[0]-
Ga,xa[1]+Ga]}function n(xa){return+xa}function p(xa){return String(xa)}function h(xa,Ga,Va,gb,Ma){function cb(Vb){return 2>(1+100*(Vb-xa)/Va.dtick)%100}for(var Sa=0,lb=0,rb=0,yb=0,Hb=0;Hb<Ga.length;Hb++)0===Ga[Hb]%1?rb++:E(Ga[Hb])||yb++,cb(Ga[Hb])&&Sa++,cb(Ga[Hb]+Va.dtick/2)&&lb++;Ga=Ga.length-yb;rb===Ga&&"date"!==Va.type?1>Va.dtick?xa=gb-.5*Va.dtick:(xa-=.5,xa+Va.dtick<gb&&(xa+=Va.dtick)):lb<.1*Ga&&(Sa>.3*Ga||cb(gb)||cb(Ma))&&(Ma=Va.dtick/2,xa+=xa+Ma<gb?Ma:-Ma);return xa}function a(xa){var Ga=xa.tickvals,
Va=xa.ticktext,gb=Array(Ga.length),Ma=O.simpleMap(xa.range,xa.r2l),cb=q(Ma);Ma=Math.min(cb[0],cb[1]);cb=Math.max(cb[0],cb[1]);var Sa=0;Array.isArray(Va)||(Va=[]);var lb="category"===xa.type?xa.d2l_noadd:xa.d2l;"log"===xa.type&&"L"!==String(xa.dtick).charAt(0)&&(xa.dtick="L"+Math.pow(10,Math.floor(Math.min(xa.range[0],xa.range[1]))-1));for(var rb=0;rb<Ga.length;rb++){var yb=lb(Ga[rb]);yb>Ma&&yb<cb&&(gb[Sa]=void 0===Va[rb]?Pa.tickText(xa,yb):l(xa,yb,String(Va[rb])),Sa++)}Sa<Ga.length&&gb.splice(Sa,
Ga.length-Sa);xa.rangebreaks&&(gb=gb.filter(function(Hb){return xa.maskBreaks(Hb.x)!==Ha}));return gb}function f(xa,Ga,Va){return Ga*O.roundUp(xa/Ga,Va)}function d(xa){var Ga=xa.dtick;xa._tickexponent=0;E(Ga)||"string"===typeof Ga||(Ga=1);if("category"===xa.type||"multicategory"===xa.type)xa._tickround=null;if("date"===xa.type){var Va=xa.r2l(xa.tick0),gb=xa.l2r(Va).replace(/(^-|i)/g,""),Ma=gb.length;"M"===String(Ga).charAt(0)?10<Ma||"01-01"!==gb.substr(5)?xa._tickround="d":xa._tickround=0===+Ga.substr(1)%
12?"y":"m":Ga>=ha&&10>=Ma||Ga>=15*ha?xa._tickround="d":Ga>=na&&16>=Ma||Ga>=wa?xa._tickround="M":Ga>=ya&&19>=Ma||Ga>=na?xa._tickround="S":(Ga=xa.l2r(Va+Ga).replace(/^-/,"").length,xa._tickround=Math.max(Ma,Ga)-20,0>xa._tickround&&(xa._tickround=4))}else E(Ga)||"L"===Ga.charAt(0)?(Ma=xa.range.map(xa.r2d||Number),E(Ga)||(Ga=Number(Ga.substr(1))),xa._tickround=2-Math.floor(Math.log(Ga)/Math.LN10+.01),Ga=Math.floor(Math.log(Math.max(Math.abs(Ma[0]),Math.abs(Ma[1])))/Math.LN10+.01),3<Math.abs(Ga)&&(!v(xa.exponentformat)||
14<Ga||-15>Ga?xa._tickexponent=Ga:xa._tickexponent=3*Math.round((Ga-1)/3))):xa._tickround=null}function l(xa,Ga,Va){xa=xa.tickfont||{};return{x:Ga,dx:0,dy:0,text:Va||"",fontSize:xa.size,font:xa.family,fontColor:xa.color}}function k(xa,Ga,Va,gb){var Ma=xa._tickround,cb=Va&&xa.hoverformat||Pa.getTickFormat(xa);gb&&(Ma=E(Ma)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Ma]);cb=O.formatDate(Ga.x,cb,Ma,xa._dateFormat,xa.calendar,xa._extraFormat);var Sa=cb.indexOf("\n");if(-1!==Sa){var lb=cb.substr(Sa+1);cb=cb.substr(0,
Sa)}gb&&("00:00:00"===cb||"00:00"===cb?(cb=lb,lb=""):8===cb.length&&(cb=cb.replace(/:00$/,"")));lb&&(Va?cb="d"===Ma?cb+(", "+lb):lb+(cb?", "+cb:""):xa._inCalcTicks&&lb===xa._prevDateHead||(cb+="\x3cbr\x3e"+lb,xa._prevDateHead=lb));Ga.text=cb}function c(xa,Ga,Va,gb,Ma){var cb=xa.dtick;Va=Ga.x;var Sa=xa.tickformat,lb="string"===typeof cb&&cb.charAt(0);"never"===Ma&&(Ma="");gb&&"L"!==lb&&(cb="L3",lb="L");if(Sa||"L"===lb)Ga.text=w(Math.pow(10,Va),xa,Ma,gb);else if(E(cb)||"D"===lb&&.1>O.mod(Va+.01,1))gb=
Math.round(Va),Ma=Math.abs(gb),Sa=xa.exponentformat,"power"===Sa||v(Sa)&&(14<gb||-15>gb)?(Ga.text=0===gb?1:1===gb?"10":"10\x3csup\x3e"+(1<gb?"":Fa)+Ma+"\x3c/sup\x3e",Ga.fontSize*=1.25):("e"===Sa||"E"===Sa)&&2<Ma?Ga.text="1"+Sa+(0<gb?"+":Fa)+Ma:(Ga.text=w(Math.pow(10,Va),xa,"","fakehover"),"D1"===cb&&"y"===xa._id.charAt(0)&&(Ga.dy-=Ga.fontSize/6));else if("D"===lb)Ga.text=String(Math.round(Math.pow(10,O.mod(Va,1)))),Ga.fontSize*=.75;else throw"unrecognized dtick "+String(cb);"D1"===xa.dtick&&(cb=String(Ga.text).charAt(0),
"0"===cb||"1"===cb)&&("y"===xa._id.charAt(0)?Ga.dx-=Ga.fontSize/4:(Ga.dy+=Ga.fontSize/2,Ga.dx+=(xa.range[1]>xa.range[0]?1:-1)*Ga.fontSize*(0>Va?.5:.25)))}function e(xa,Ga){xa=xa._categories[Math.round(Ga.x)];void 0===xa&&(xa="");Ga.text=String(xa)}function g(xa,Ga,Va){var gb=xa._categories[Math.round(Ga.x)]||[];xa=void 0===gb[1]?"":String(gb[1]);gb=void 0===gb[0]?"":String(gb[0]);Va?Ga.text=gb+" - "+xa:(Ga.text=xa,Ga.text2=gb)}function m(xa,Ga,Va,gb,Ma){"never"===Ma?Ma="":"all"===xa.showexponent&&
1E-6>Math.abs(Ga.x/xa.dtick)&&(Ma="hide");Ga.text=w(Ga.x,xa,Ma,gb)}function r(xa,Ga,Va,gb,Ma){"radians"!==xa.thetaunit||Va?Ga.text=w(Ga.x,xa,Ma,gb):(Va=Ga.x/180,0===Va?Ga.text="0":(Va=u(Va),100<=Va[1]?Ga.text=w(O.deg2rad(Ga.x),xa,Ma,gb):(xa=0>Ga.x,Ga.text=1===Va[1]?1===Va[0]?"":Va[0]+"":["\x3csup\x3e",Va[0],"\x3c/sup\x3e\x3csub\x3e",Va[1],"\x3c/sub\x3e"].join(""),xa&&(Ga.text=Fa+Ga.text))))}function u(xa){function Ga(Ma,cb){return 1E-6>=Math.abs(cb-0)?Ma:Ga(cb,Ma%cb)}var Va=function(Ma){for(var cb=
1;!(1E-6>=Math.abs(Math.round(Ma*cb)/cb-Ma));)cb*=10;return cb}(xa);xa*=Va;var gb=Math.abs(Ga(xa,Va));return[Math.round(xa/gb),Math.round(Va/gb)]}function v(xa){return"SI"===xa||"B"===xa}function w(xa,Ga,Va,gb){var Ma=0>xa,cb=Ga._tickround;Va=Va||Ga.exponentformat||"B";var Sa=Ga._tickexponent,lb=Pa.getTickFormat(Ga),rb=Ga.separatethousands;gb&&(Sa={exponentformat:Va,dtick:"none"===Ga.showexponent?Ga.dtick:E(xa)?Math.abs(xa)||1:1,range:"none"===Ga.showexponent?Ga.range.map(Ga.r2d):[0,xa||1]},d(Sa),
cb=(Number(Sa._tickround)||0)+4,Sa=Sa._tickexponent,Ga.hoverformat&&(lb=Ga.hoverformat));if(lb)return Ga._numFormat(lb)(xa).replace(/-/g,Fa);gb=Math.pow(10,-cb)/2;"none"===Va&&(Sa=0);xa=Math.abs(xa);if(xa<gb)xa="0",Ma=!1;else{xa+=gb;Sa&&(xa*=Math.pow(10,-Sa),cb+=Sa);if(0===cb)xa=String(Math.floor(xa));else if(0>cb)for(xa=String(Math.round(xa)),xa=xa.substr(0,xa.length+cb);0>cb;cb++)xa+="0";else xa=String(xa),(gb=xa.indexOf(".")+1)&&(xa=xa.substr(0,gb+cb).replace(/\.?0+$/,""));xa=O.numSeparate(xa,
Ga._separators,rb)}Sa&&"hide"!==Va&&(v(Va)&&(14<Sa||-15>Sa)&&(Va="power"),Ga=0>Sa?Fa+-Sa:"power"!==Va?"+"+Sa:String(Sa),"e"===Va||"E"===Va?xa+=Va+Ga:"power"===Va?xa+="10\x3csup\x3e"+Ga+"\x3c/sup\x3e":"B"===Va&&9===Sa?xa+="B":v(Va)&&(xa+=$a[Sa/3+5]));return Ma?Fa+xa:xa}function D(xa,Ga){var Va=[],gb=function(Ma,cb){cb=Ma.xbnd[cb];null!==cb&&Va.push(O.extendFlat({},Ma,{x:cb}))};if(Ga.length){for(xa=0;xa<Ga.length;xa++)gb(Ga[xa],0);gb(Ga[xa-1],1)}return Va}function C(xa,Ga){var Va=[],gb=Ga.length&&
Ga[Ga.length-1].x<Ga[0].x,Ma=function(lb,rb){rb=lb.xbnd[rb];null!==rb&&Va.push(O.extendFlat({},lb,{x:rb}))};if(xa.showdividers&&Ga.length){for(xa=0;xa<Ga.length;xa++){var cb=Ga[xa];cb.text2!==Sa&&Ma(cb,gb?1:0);var Sa=cb.text2}Ma(Ga[xa-1],gb?0:1)}return Va}function x(xa,Ga){if(xa._selections[Ga].size()){var Va=Infinity;var gb=-Infinity;var Ma=Infinity;var cb=-Infinity;xa._selections[Ga].each(function(){var Sa=H(this);Sa=V.bBox(Sa.node().parentNode);Va=Math.min(Va,Sa.top);gb=Math.max(gb,Sa.bottom);
Ma=Math.min(Ma,Sa.left);cb=Math.max(cb,Sa.right)})}else cb=Ma=gb=Va=0;return{top:Va,bottom:gb,left:Ma,right:cb,height:gb-Va,width:cb-Ma}}function A(xa){return[xa.text,xa.x,xa.axInfo,xa.font,xa.fontSize,xa.fontColor].join("_")}function B(xa){var Ga=xa.title.font.size,Va=(xa.title.text.match(Q.BR_TAG_ALL)||[]).length;return xa.title.hasOwnProperty("standoff")?Va?Ga*(hb+Va*ob):Ga*hb:Va?Ga*(Va+1)*ob:Ga}function t(xa,Ga){Ga=xa.l2p(Ga);return 1<Ga&&Ga<xa._length-1}function G(xa,Ga,Va,gb){function Ma(Hb){function Vb(ad){return"number"===
typeof ad&&Math.abs(ad-yb)<lc}if(!Hb.showline||!Hb.linewidth)return!1;var lc=Math.max((Hb.linewidth+Ga.zerolinewidth)/2,1);if(Vb(Hb._mainLinePosition)||Vb(Hb._mainMirrorPosition))return!0;Hb=Hb._linepositions||{};for(var Ac in Hb)if(Vb(Hb[Ac][0])||Vb(Hb[Ac][1]))return!0}var cb=Va._mainAxis;if(cb){var Sa=xa._fullLayout,lb=Ga._id.charAt(0),rb=Pa.counterLetter(Ga._id),yb=Ga._offset+(Math.abs(gb[0])<Math.abs(gb[1])===("x"===lb)?0:Ga._length);gb=Sa._plots[Va._mainSubplot];if(!(gb.mainplotinfo||gb).overlays.length)return Ma(Va,
yb);xa=Pa.list(xa,rb);for(Va=0;Va<xa.length;Va++)if(rb=xa[Va],rb._mainAxis===cb&&Ma(rb,yb))return!0}}function H(xa){xa=L.select(xa);var Ga=xa.select(".text-math-group");return Ga.empty()?xa.select("text"):Ga}function I(xa){return xa._id+".automargin"}function J(xa,Ga){for(var Va=0;Va<Ga.length;Va++)-1===xa.indexOf(Ga[Va])&&xa.push(Ga[Va])}var L=b("d3"),E=b("fast-isnumeric"),K=b("../../plots/plots"),N=b("../../registry"),O=b("../../lib"),Q=b("../../lib/svg_text_utils"),P=b("../../components/titles"),
T=b("../../components/color"),V=b("../../components/drawing"),aa=b("./layout_attributes"),ba=b("./clean_ticks");F=b("../../constants/numerical");var Y=F.ONEMAXYEAR,ea=F.ONEAVGYEAR,da=F.ONEMINYEAR,ca=F.ONEMAXQUARTER,la=F.ONEAVGQUARTER,pa=F.ONEMINQUARTER,qa=F.ONEMAXMONTH,oa=F.ONEAVGMONTH,ka=F.ONEMINMONTH,ra=F.ONEWEEK,ha=F.ONEDAY,ma=ha/2,wa=F.ONEHOUR,na=F.ONEMIN,ya=F.ONESEC,Fa=F.MINUS_SIGN,Ha=F.BADNUM;F=b("../../constants/alignment");var eb=F.MID_SHIFT,hb=F.CAP_SHIFT,ob=F.LINE_SPACING,ib=F.OPPOSITE_SIDE,
Pa=y.exports={};Pa.setConvert=b("./set_convert");var sb=b("./axis_autotype"),tb=b("./axis_ids");Pa.id2name=tb.id2name;Pa.name2id=tb.name2id;Pa.cleanId=tb.cleanId;Pa.list=tb.list;Pa.listIds=tb.listIds;Pa.getFromId=tb.getFromId;Pa.getFromTrace=tb.getFromTrace;b=b("./autorange");Pa.getAutoRange=b.getAutoRange;Pa.findExtremes=b.findExtremes;Pa.coerceRef=function(xa,Ga,Va,gb,Ma,cb){var Sa=gb.charAt(gb.length-1);Va=Va._fullLayout._subplots[Sa+"axis"];gb+="ref";Sa={};Ma||(Ma=Va[0]||cb);cb||(cb=Ma);Sa[gb]=
{valType:"enumerated",values:Va.concat(cb?[cb]:[]),dflt:Ma};return O.coerce(xa,Ga,Sa,gb)};Pa.coercePosition=function(xa,Ga,Va,gb,Ma,cb){"paper"===gb||"pixel"===gb?(Ga=O.ensureNumber,Va=Va(Ma,cb)):(Ga=Pa.getFromId(Ga,gb),cb=Ga.fraction2r(cb),Va=Va(Ma,cb),Ga=Ga.cleanPos);xa[Ma]=Ga(Va)};Pa.cleanPosition=function(xa,Ga,Va){return("paper"===Va||"pixel"===Va?O.ensureNumber:Pa.getFromId(Ga,Va).cleanPos)(xa)};Pa.redrawComponents=function(xa,Ga){function Va(Ma,cb,Sa,lb){Ma=N.getComponentMethod(Ma,cb);cb={};
for(var rb=0;rb<Ga.length;rb++)for(var yb=gb[Pa.id2name(Ga[rb])][Sa],Hb=0;Hb<yb.length;Hb++){var Vb=yb[Hb];if(!cb[Vb]&&(Ma(xa,Vb),cb[Vb]=1,lb))return}}Ga=Ga?Ga:Pa.listIds(xa);var gb=xa._fullLayout;Va("annotations","drawOne","_annIndices");Va("shapes","drawOne","_shapeIndices");Va("images","draw","_imgIndices",!0)};var Aa=Pa.getDataConversions=function(xa,Ga,Va,gb){Va="x"===Va||"y"===Va||"z"===Va?Va:gb;if(Array.isArray(Va)){if(xa={type:sb(gb),_categories:[]},Pa.setConvert(xa),"category"===xa.type)for(Ga=
0;Ga<gb.length;Ga++)xa.d2c(gb[Ga])}else xa=Pa.getFromTrace(xa,Ga,Va);return xa?{d2c:xa.d2c,c2d:xa.c2d}:"ids"===Va?{d2c:p,c2d:p}:{d2c:n,c2d:n}};Pa.getDataToCoordFunc=function(xa,Ga,Va,gb){return Aa(xa,Ga,Va,gb).d2c};Pa.counterLetter=function(xa){xa=xa.charAt(0);if("x"===xa)return"y";if("y"===xa)return"x"};Pa.minDtick=function(xa,Ga,Va,gb){if(-1!==["log","category","multicategory"].indexOf(xa.type)||!gb)xa._minDtick=0;else if(void 0===xa._minDtick)xa._minDtick=Ga,xa._forceTick0=Va;else if(xa._minDtick)if(2E-6>
(xa._minDtick/Ga+1E-6)%1&&2E-6>((Va-xa._forceTick0)/Ga%1+1.000001)%1)xa._minDtick=Ga,xa._forceTick0=Va;else if(2E-6<(Ga/xa._minDtick+1E-6)%1||2E-6<((Va-xa._forceTick0)/xa._minDtick%1+1.000001)%1)xa._minDtick=0};Pa.saveRangeInitial=function(xa,Ga){xa=Pa.list(xa,"",!0);for(var Va=!1,gb=0;gb<xa.length;gb++){var Ma=xa[gb],cb=void 0===Ma._rangeInitial,Sa=cb||!(Ma.range[0]===Ma._rangeInitial[0]&&Ma.range[1]===Ma._rangeInitial[1]);if(cb&&!1===Ma.autorange||Ga&&Sa)Ma._rangeInitial=Ma.range.slice(),Va=!0}return Va};
Pa.saveShowSpikeInitial=function(xa,Ga){for(var Va=Pa.list(xa,"",!0),gb=!1,Ma="on",cb=0;cb<Va.length;cb++){var Sa=Va[cb],lb=void 0===Sa._showSpikeInitial,rb=lb||Sa.showspikes!==Sa._showspikes;if(lb||Ga&&rb)Sa._showSpikeInitial=Sa.showspikes,gb=!0;"on"!==Ma||Sa.showspikes||(Ma="off")}xa._fullLayout._cartesianSpikesEnabled=Ma;return gb};Pa.autoBin=function(xa,Ga,Va,gb,Ma,cb){var Sa=O.aggNums(Math.min,null,xa),lb=O.aggNums(Math.max,null,xa);if("category"===Ga.type||"multicategory"===Ga.type)return{start:Sa-
.5,end:lb+.5,size:Math.max(1,Math.round(cb)||1),_dataSpan:lb-Sa};Ma||(Ma=Ga.calendar);var rb="log"===Ga.type?{type:"linear",range:[Sa,lb]}:{type:Ga.type,range:O.simpleMap([Sa,lb],Ga.c2r,0,Ma),calendar:Ma};Pa.setConvert(rb);(cb=cb&&ba.dtick(cb,rb.type))?(rb.dtick=cb,rb.tick0=ba.tick0(void 0,rb.type,Ma)):(Va?gb=(lb-Sa)/Va:(Va=O.distinctVals(xa),cb=Math.pow(10,Math.floor(Math.log(Va.minDiff)/Math.LN10)),Va=cb*O.roundUp(Va.minDiff/cb,[.9,1.9,4.9,9.9],!0),gb=Math.max(Va,2*O.stdev(xa)/Math.pow(xa.length,
gb?.25:.4)),E(gb)||(gb=1)),Pa.autoTicks(rb,gb));gb=rb.dtick;Va=Pa.tickIncrement(Pa.tickFirst(rb),gb,"reverse",Ma);if("number"===typeof gb)Va=h(Va,xa,rb,Sa,lb),rb=1+Math.floor((lb-Va)/gb),xa=Va+rb*gb;else{if("M"===rb.dtick.charAt(0))a:{rb=Va;xa=O.findExactDates(xa,Ma);if(.8<xa.exactDays&&(Va=Number(gb.substr(1)),rb=.8<xa.exactYears&&0===Va%12?Pa.tickIncrement(rb,"M6","reverse")+1.5*ha:.8<xa.exactMonths?Pa.tickIncrement(rb,"M1","reverse")+15.5*ha:rb-ma,xa=Pa.tickIncrement(rb,gb),xa<=Sa)){Va=xa;break a}Va=
rb}xa=Va;for(rb=0;xa<=lb;)xa=Pa.tickIncrement(xa,gb,!1,Ma),rb++}return{start:Ga.c2r(Va,0,Ma),end:Ga.c2r(xa,0,Ma),size:gb,_dataSpan:lb-Sa}};Pa.prepTicks=function(xa,Ga){Ga=O.simpleMap(xa.range,xa.r2l,void 0,void 0,Ga);if("auto"===xa.tickmode||!xa.dtick){var Va=xa.nticks;Va||("category"===xa.type||"multicategory"===xa.type?(Va=xa.tickfont?1.2*(xa.tickfont.size||12):15,Va=xa._length/Va):(Va="y"===xa._id.charAt(0)?40:80,Va=O.constrain(xa._length/Va,4,9)+1),"radialaxis"===xa._name&&(Va*=2));"array"===
xa.tickmode&&(Va*=100);xa._roughDTick=(Math.abs(Ga[1]-Ga[0])-(xa._lBreaks||0))/Va;Pa.autoTicks(xa,xa._roughDTick);0<xa._minDtick&&xa.dtick<2*xa._minDtick&&(xa.dtick=xa._minDtick,xa.tick0=xa.l2r(xa._forceTick0))}xa.tick0||(xa.tick0="date"===xa.type?"2000-01-01":0);"date"===xa.type&&.1>xa.dtick&&(xa.dtick=.1);d(xa)};Pa.calcTicks=function(xa,Ga){Pa.prepTicks(xa,Ga);var Va=O.simpleMap(xa.range,xa.r2l,void 0,void 0,Ga);if("array"===xa.tickmode)return a(xa);xa._tmin=Pa.tickFirst(xa,Ga);Ga=q(Va);var gb=
Ga[1],Ma=Va[1]<Va[0];if(xa._tmin<Ga[0]!==Ma)return[];if("category"===xa.type||"multicategory"===xa.type)gb=Ma?Math.max(-.5,gb):Math.min(xa._categories.length-.5,gb);var cb="log"===xa.type&&!(E(xa.dtick)||"L"===xa.dtick.charAt(0)),Sa=null,lb=Math.max(1E3,xa._length||0);Ga=[];for(var rb=xa._tmin;(Ma?rb>=gb:rb<=gb)&&!(Ga.length>lb||rb===Sa);rb=Pa.tickIncrement(rb,xa.dtick,Ma,xa.calendar)){Sa=rb;var yb=!1;cb&&rb!==(rb|0)&&(yb=!0);Ga.push({minor:yb,value:rb})}(gb="period"===xa.ticklabelmode)&&Ga.unshift({minor:!1,
value:Pa.tickIncrement(Ga[0].value,xa.dtick,!Ma,xa.caldendar)});if(xa.rangebreaks&&(yb=Ga.length)){cb=0;"auto"===xa.tickmode&&(cb=("y"===xa._id.charAt(0)?2:6)*(xa.tickfont?xa.tickfont.size:12));Sa=[];lb=Ma?1:-1;rb=Ma?yb-1:0;for(Ma=Ma?0:yb-1;lb*Ma<=lb*rb;Ma+=lb){yb=Ga[Ma];if(xa.maskBreaks(yb.value)===Ha){var Hb=yb;a:{var Vb=yb.value;for(var lc=xa._rangebreaks.length,Ac=0;Ac<lc;Ac++){var ad=xa._rangebreaks[Ac];if(Vb>=ad.min&&Vb<ad.max){Vb=ad.max;break a}}}Hb.value=Vb;if(xa._rl&&(xa._rl[0]===yb.value||
xa._rl[1]===yb.value))continue}Hb=xa.c2p(yb.value);if(Hb===Nc)Sa[Sa.length-1].value<yb.value&&(Sa[Sa.length-1]=yb);else if(void 0===Nc||Math.abs(Hb-Nc)>cb){var Nc=Hb;Sa.push(yb)}}Ga=Sa.reverse()}"angularaxis"===xa._id&&360===Math.abs(Va[1]-Va[0])&&Ga.pop();xa._tmax=(Ga[Ga.length-1]||{}).value;xa._prevDateHead="";xa._inCalcTicks=!0;Nc=Math.min(Va[0],Va[1]);Va=Math.max(Va[0],Va[1]);var ed;cb=Pa.getTickFormat(xa);gb&&cb&&(/%[fLQsSMX]/.test(cb)||(/%[HI]/.test(cb)?ed=wa:/%p/.test(cb)?ed=ma:/%[Aadejuwx]/.test(cb)?
ed=ha:/%[UVW]/.test(cb)?ed=ra:/%[Bbm]/.test(cb)?ed=oa:/%[q]/.test(cb)?ed=la:/%[Yy]/.test(cb)&&(ed=ea)));cb=[];for(Sa=0;Sa<Ga.length;Sa++)if(lb=Pa.tickText(xa,Ga[Sa].value,!1,Ga[Sa].minor),!gb||Pc!==lb.text){var Pc=lb.text;cb.push(lb)}if(gb){Pc=!1;for(Sa=0;Sa<cb.length;Sa++){Ga=cb[Sa].x;Sa<cb.length-1?(gb=Sa,lb=Sa+1):(gb=0<Sa?Sa-1:Sa,lb=Sa);gb=cb[gb].x;lb=cb[lb].x;rb=Math.abs(lb-gb);yb=ed||rb;Ma=0;yb>=da?Ma=rb>=da&&rb<=Y?rb:ea:ed===la&&yb>=pa?Ma=rb>=pa&&rb<=ca?rb:la:yb>=ka?Ma=rb>=ka&&rb<=qa?rb:oa:
ed===ra&&yb>=ra?Ma=ra:yb>=ha?Ma=ha:ed===ma&&yb>=ma?Ma=ma:ed===wa&&yb>=wa&&(Ma=wa);if(Ma&&xa.rangebreaks){for(Vb=Hb=yb=0;42>Vb;Vb++)lc=Vb/42,xa.maskBreaks(gb*(1-lc)+lb*lc)!==Ha&&(.5>lc?yb++:Hb++);Hb&&(Ma*=(yb+Hb)/42)}Ma<=rb&&(Ga+=Ma/2);cb[Sa].periodX=Ga;if(Ga>Va||Ga<Nc)cb[Sa].text=" ",Pc=!0}if(Pc)for(Sa=0;Sa<cb.length;Sa++)if(cb[Sa].periodX<=Va&&cb[Sa].periodX>=Nc){xa._prevDateHead="";cb[Sa].text=Pa.tickText(xa,cb[Sa].x).text;break}}xa._inCalcTicks=!1;return cb};var Ka=[2,5,10],Qa=[1,2,3,6,12],Xa=
[1,2,5,10,15,30],pb=[1,2,3,7,14],db=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ia=[-.301,0,.301,.699,1],Ua=[15,30,45,90,180];Pa.autoTicks=function(xa,Ga){function Va(cb){return Math.pow(cb,Math.floor(Math.log(Ga)/Math.LN10))}if("date"===xa.type){xa.tick0=O.dateTick0(xa.calendar);var gb=2*Ga;if(gb>ea)Ga/=ea,gb=Va(10),xa.dtick="M"+12*f(Ga,gb,Ka);else if(gb>oa)Ga/=oa,xa.dtick="M"+f(Ga,1,Qa);else if(gb>ha){if(xa.dtick=f(Ga,ha,xa._hasDayOfWeekBreaks?[1,2,7,14]:pb),xa.tick0=O.dateTick0(xa.calendar,
!0),gb=Pa.getTickFormat(xa),/%[uVW]/.test(gb)){gb=xa.tick0.length;var Ma=+xa.tick0[gb-1];xa.tick0=xa.tick0.substring(0,gb-2)+String(Ma+1)}}else gb>wa?xa.dtick=f(Ga,wa,Qa):gb>na?xa.dtick=f(Ga,na,Xa):gb>ya?xa.dtick=f(Ga,ya,Xa):(gb=Va(10),xa.dtick=f(Ga,gb,Ka))}else"log"===xa.type?(xa.tick0=0,gb=O.simpleMap(xa.range,xa.r2l),.7<Ga?xa.dtick=Math.ceil(Ga):1>Math.abs(gb[1]-gb[0])?(Ga=Math.abs(Math.pow(10,gb[1])-Math.pow(10,gb[0]))/(1.5*Math.abs((gb[1]-gb[0])/Ga)),gb=Va(10),xa.dtick="L"+f(Ga,gb,Ka)):xa.dtick=
.3<Ga?"D2":"D1"):"category"===xa.type||"multicategory"===xa.type?(xa.tick0=0,xa.dtick=Math.ceil(Math.max(Ga,1))):"angularaxis"===xa._id?(xa.tick0=0,xa.dtick=f(Ga,1,Ua)):(xa.tick0=0,gb=Va(10),xa.dtick=f(Ga,gb,Ka));0===xa.dtick&&(xa.dtick=1);if(!E(xa.dtick)&&"string"!==typeof xa.dtick)throw gb=xa.dtick,xa.dtick=1,"ax.dtick error: "+String(gb);};Pa.tickIncrement=function(xa,Ga,Va,gb){var Ma=Va?-1:1;if(E(Ga))return O.increment(xa,Ma*Ga);var cb=Ga.charAt(0),Sa=Ma*Number(Ga.substr(1));if("M"===cb)return O.incrementMonth(xa,
Sa,gb);if("L"===cb)return Math.log(Math.pow(10,xa)+Sa)/Math.LN10;if("D"===cb)return Ga="D2"===Ga?Ia:db,xa+=.01*Ma,Va=O.roundUp(O.mod(xa,1),Ga,Va),Math.floor(xa)+Math.log(L.round(Math.pow(10,Va),1))/Math.LN10;throw"unrecognized dtick "+String(Ga);};Pa.tickFirst=function(xa,Ga){var Va=xa.r2l||Number,gb=O.simpleMap(xa.range,Va,void 0,void 0,Ga),Ma=(Ga=gb[1]<gb[0])?Math.floor:Math.ceil;gb=q(gb)[0];var cb=xa.dtick,Sa=Va(xa.tick0);if(E(cb)){Ga=Ma((gb-Sa)/cb)*cb+Sa;if("category"===xa.type||"multicategory"===
xa.type)Ga=O.constrain(Ga,0,xa._categories.length-1);return Ga}Va=cb.charAt(0);var lb=Number(cb.substr(1));if("M"===Va){Ma=0;for(var rb,yb;10>Ma;){rb=Pa.tickIncrement(Sa,cb,Ga,xa.calendar);if(0>=(rb-gb)*(Sa-gb))return Ga?Math.min(Sa,rb):Math.max(Sa,rb);rb=(gb-(Sa+rb)/2)/(rb-Sa);yb=Va+(Math.abs(Math.round(rb))||1)*lb;Sa=Pa.tickIncrement(Sa,yb,0>rb?!Ga:Ga,xa.calendar);Ma++}O.error("tickFirst did not converge",xa);return Sa}if("L"===Va)return Math.log(Ma((Math.pow(10,gb)-Sa)/lb)*lb+Sa)/Math.LN10;if("D"===
Va)return xa="D2"===cb?Ia:db,xa=O.roundUp(O.mod(gb,1),xa,Ga),Math.floor(gb)+Math.log(L.round(Math.pow(10,xa),1))/Math.LN10;throw"unrecognized dtick "+String(cb);};Pa.tickText=function(xa,Ga,Va,gb){function Ma(Vb){if(void 0===Vb)return!0;if(Va)return"none"===Vb;var lc={first:xa._tmin,last:xa._tmax}[Vb];return"all"!==Vb&&Ga!==lc}var cb=l(xa,Ga),Sa="array"===xa.tickmode,lb=Va||Sa,rb=xa.type,yb="category"===rb?xa.d2l_noadd:xa.d2l;if(Sa&&Array.isArray(xa.ticktext)){Sa=O.simpleMap(xa.range,xa.r2l);var Hb=
(Math.abs(Sa[1]-Sa[0])-(xa._lBreaks||0))/1E4;for(Sa=0;Sa<xa.ticktext.length&&!(Math.abs(Ga-yb(xa.tickvals[Sa]))<Hb);Sa++);if(Sa<xa.ticktext.length)return cb.text=String(xa.ticktext[Sa]),cb}yb=Va?"never":"none"!==xa.exponentformat&&Ma(xa.showexponent)?"hide":"";"date"===rb?k(xa,cb,Va,lb):"log"===rb?c(xa,cb,Va,lb,yb):"category"===rb?e(xa,cb):"multicategory"===rb?g(xa,cb,Va):"angularaxis"===xa._id?r(xa,cb,Va,lb,yb):m(xa,cb,Va,lb,yb);gb||(xa.tickprefix&&!Ma(xa.showtickprefix)&&(cb.text=xa.tickprefix+
cb.text),xa.ticksuffix&&!Ma(xa.showticksuffix)&&(cb.text+=xa.ticksuffix));if("boundaries"===xa.tickson||xa.showdividers)gb=function(Vb){var lc=xa.l2p(Vb);return 0<=lc&&lc<=xa._length?Vb:null},cb.xbnd=[gb(cb.x-.5),gb(cb.x+xa.dtick-.5)];return cb};Pa.hoverLabelText=function(xa,Ga,Va){if(Va!==Ha&&Va!==Ga)return Pa.hoverLabelText(xa,Ga)+" - "+Pa.hoverLabelText(xa,Va);Va="log"===xa.type&&0>=Ga;xa=Pa.tickText(xa,xa.c2l(Va?-Ga:Ga),"hover").text;return Va?0===Ga?"0":Fa+xa:xa};var $a="f p n  m  k M G T".split(" ");
Pa.getTickFormat=function(xa){function Ga(rb){return"string"!==typeof rb?rb:Number(rb.replace("M",""))*oa}function Va(rb,yb){var Hb=["L","D"];if(typeof rb===typeof yb){if("number"===typeof rb)return rb-yb;var Vb=Hb.indexOf(rb.charAt(0));Hb=Hb.indexOf(yb.charAt(0));return Vb===Hb?Number(rb.replace(/(L|D)/g,""))-Number(yb.replace(/(L|D)/g,"")):Vb-Hb}return"number"===typeof rb?1:-1}function gb(rb,yb,Hb){Hb=Hb||function(lc){return lc};var Vb=yb[0];yb=yb[1];return(!Vb&&"number"!==typeof Vb||Hb(Vb)<=Hb(rb))&&
(!yb&&"number"!==typeof yb||Hb(yb)>=Hb(rb))}function Ma(rb,yb){var Hb=null===yb[0],Vb=null===yb[1],lc=0<=Va(rb,yb[0]);rb=0>=Va(rb,yb[1]);return(Hb||lc)&&(Vb||rb)}var cb;if(xa.tickformatstops&&0<xa.tickformatstops.length)switch(xa.type){case "date":case "linear":for(cb=0;cb<xa.tickformatstops.length;cb++){var Sa=xa.tickformatstops[cb];if(Sa.enabled&&gb(xa.dtick,Sa.dtickrange,Ga)){var lb=Sa;break}}break;case "log":for(cb=0;cb<xa.tickformatstops.length;cb++)if(Sa=xa.tickformatstops[cb],Sa.enabled&&Ma(xa.dtick,
Sa.dtickrange)){lb=Sa;break}}return lb?lb.value:xa.tickformat};Pa.getSubplots=function(xa,Ga){xa=xa._fullLayout._subplots;xa=xa.cartesian.concat(xa.gl2d||[]);Ga=Ga?Pa.findSubplotsWithAxis(xa,Ga):xa;Ga.sort(function(Va,gb){Va=Va.substr(1).split("y");gb=gb.substr(1).split("y");return Va[0]===gb[0]?+Va[1]-+gb[1]:+Va[0]-+gb[0]});return Ga};Pa.findSubplotsWithAxis=function(xa,Ga){Ga=new RegExp("x"===Ga._id.charAt(0)?"^"+Ga._id+"y":Ga._id+"$");for(var Va=[],gb=0;gb<xa.length;gb++){var Ma=xa[gb];Ga.test(Ma)&&
Va.push(Ma)}return Va};Pa.makeClipPaths=function(xa){var Ga=xa._fullLayout;if(!Ga._hasOnlyLargeSploms){var Va={_offset:0,_length:Ga.width,_id:""},gb={_offset:0,_length:Ga.height,_id:""},Ma=Pa.list(xa,"x",!0);xa=Pa.list(xa,"y",!0);var cb=[],Sa,lb;for(Sa=0;Sa<Ma.length;Sa++)for(cb.push({x:Ma[Sa],y:gb}),lb=0;lb<xa.length;lb++)0===Sa&&cb.push({x:Va,y:xa[lb]}),cb.push({x:Ma[Sa],y:xa[lb]});Va=Ga._clips.selectAll(".axesclip").data(cb,function(rb){return rb.x._id+rb.y._id});Va.enter().append("clipPath").classed("axesclip",
!0).attr("id",function(rb){return"clip"+Ga._uid+rb.x._id+rb.y._id}).append("rect");Va.exit().remove();Va.each(function(rb){L.select(this).select("rect").attr({x:rb.x._offset||0,y:rb.y._offset||0,width:rb.x._length||1,height:rb.y._length||1})})}};Pa.draw=function(xa,Ga,Va){var gb=xa._fullLayout;"redraw"===Ga&&gb._paper.selectAll("g.subplot").each(function(Ma){Ma=gb._plots[Ma[0]];var cb=Ma.xaxis,Sa=Ma.yaxis;Ma.xaxislayer.selectAll("."+cb._id+"tick").remove();Ma.yaxislayer.selectAll("."+Sa._id+"tick").remove();
Ma.xaxislayer.selectAll("."+cb._id+"tick2").remove();Ma.yaxislayer.selectAll("."+Sa._id+"tick2").remove();Ma.xaxislayer.selectAll("."+cb._id+"divider").remove();Ma.yaxislayer.selectAll("."+Sa._id+"divider").remove();Ma.gridlayer&&Ma.gridlayer.selectAll("path").remove();Ma.zerolinelayer&&Ma.zerolinelayer.selectAll("path").remove();gb._infolayer.select(".g-"+cb._id+"title").remove();gb._infolayer.select(".g-"+Sa._id+"title").remove()});Ga=Ga&&"redraw"!==Ga?Ga:Pa.listIds(xa);return O.syncOrAsync(Ga.map(function(Ma){return function(){if(Ma){var cb=
Pa.getFromId(xa,Ma),Sa=Pa.drawOne(xa,cb,Va);cb._r=cb.range.slice();cb._rl=O.simpleMap(cb._r,cb.r2l);return Sa}}}))};Pa.drawOne=function(xa,Ga,Va){function gb($b){$b=Sa+($b||"tick");ad[$b]||(ad[$b]=x(Ga,$b));return ad[$b]}Va=Va||{};var Ma;Ga.setScale();var cb=xa._fullLayout,Sa=Ga._id,lb=Sa.charAt(0),rb=Pa.counterLetter(Sa),yb=cb._plots[Ga._mainSubplot];if(yb){var Hb=yb[lb+"axislayer"],Vb=Ga._mainLinePosition,lc=Ga._mainMirrorPosition,Ac=Ga._vals=Pa.calcTicks(Ga);yb=[Ga.mirror,Vb,lc].join("_");for(Ma=
0;Ma<Ac.length;Ma++)Ac[Ma].axInfo=yb;Ga._selections={};Ga._tickAngles&&(Ga._prevTickAngles=Ga._tickAngles);Ga._tickAngles={};Ga._depth=null;var ad={};if(Ga.visible){var Nc=Pa.makeTransFn(Ga),ed="period"===Ga.ticklabelmode?Pa.makeTransPeriodFn(Ga):Pa.makeTransFn(Ga);"boundaries"===Ga.tickson?(yb=D(Ga,Ac),Ma=Pa.clipEnds(Ga,yb),yb="inside"===Ga.ticks?Ma:yb):(Ma=Pa.clipEnds(Ga,Ac),yb="inside"===Ga.ticks?Ma:Ac);var Pc=Ga._gridVals=Ma,sd=C(Ga,Ac);if(!cb._hasOnlyLargeSploms){var Db=Ga._subplotsWith,Yb={};
for(Ma=0;Ma<Db.length;Ma++){var Fc=Db[Ma];var mc=cb._plots[Fc];Fc=mc[rb+"axis"];var qc=Fc._mainAxis._id;Yb[qc]||(Yb[qc]=1,qc="x"===lb?"M0,"+Fc._offset+"v"+Fc._length:"M"+Fc._offset+",0h"+Fc._length,Pa.drawGrid(xa,Ga,{vals:Pc,counterAxis:Fc,layer:mc.gridlayer.select("."+Sa),path:qc,transFn:Nc}),Pa.drawZeroLine(xa,Ga,{counterAxis:Fc,layer:mc.zerolinelayer,path:qc,transFn:Nc}))}}var rc=Pa.getTickSigns(Ga);Pc=[];if(Ga.ticks){Ma=Pa.makeTickPath(Ga,Vb,rc[2]);if(Ga._anchorAxis&&Ga.mirror&&!0!==Ga.mirror){var wb=
Pa.makeTickPath(Ga,lc,rc[3]);var zb=Ma+wb}else wb="",zb=Ma;if(Ga.showdividers&&"outside"===Ga.ticks&&"boundaries"===Ga.tickson){var fc={};for(Ma=0;Ma<sd.length;Ma++)fc[sd[Ma].x]=1;lc=function($b){return fc[$b.x]?wb:zb}}else lc=zb;Pa.drawTicks(xa,Ga,{vals:yb,layer:Hb,path:lc,transFn:Nc});"allticks"===Ga.mirror&&(Pc=Object.keys(Ga._linepositions||{}))}for(Ma=0;Ma<Pc.length;Ma++)Fc=Pc[Ma],mc=cb._plots[Fc],lc=Ga._linepositions[Fc]||[],lc=Pa.makeTickPath(Ga,lc[0],rc[0])+Pa.makeTickPath(Ga,lc[1],rc[1]),
Pa.drawTicks(xa,Ga,{vals:yb,layer:mc[lb+"axislayer"],path:lc,transFn:Nc});yb=[];yb.push(function(){return Pa.drawLabels(xa,Ga,{vals:Ac,layer:Hb,transFn:ed,labelFns:Pa.makeLabelFns(Ga,Vb)})});if("multicategory"===Ga.type){var zc={x:2,y:10}[lb];yb.push(function(){var $b={x:"height",y:"width"}[lb];$b=gb()[$b]+zc+(Ga._tickAngles[Sa+"tick"]?Ga.tickfont.size*ob:0);for(var bc=Pa,Eb=bc.drawLabels,xb=[],Cb={},Jb=0;Jb<Ac.length;Jb++){var ac=Ac[Jb];Cb[ac.text2]?Cb[ac.text2].push(ac.x):Cb[ac.text2]=[ac.x]}for(var Kc in Cb)xb.push(l(Ga,
O.interp(Cb[Kc],.5),Kc));return Eb.call(bc,xa,Ga,{vals:xb,layer:Hb,cls:Sa+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Nc,labelFns:Pa.makeLabelFns(Ga,Vb+$b*rc[4])})});yb.push(function(){Ga._depth=rc[4]*(gb("tick2")[Ga.side]-Vb);var $b=Pa.makeTickPath(Ga,Vb,rc[4],Ga._depth),bc=Ga._id+"divider",Eb=Hb.selectAll("path."+bc).data(sd,A);Eb.exit().remove();Eb.enter().insert("path",":first-child").classed(bc,1).classed("crisp",1).call(T.stroke,Ga.dividercolor).style("stroke-width",V.crispRound(xa,Ga.dividerwidth,
1)+"px");Eb.attr("transform",Nc).attr("d",$b)})}else Ga.title.hasOwnProperty("standoff")&&yb.push(function(){Ga._depth=rc[4]*(gb()[Ga.side]-Vb)});var Gc=N.getComponentMethod("rangeslider","isVisible")(Ga);yb.push(function(){var $b=Ga.side.charAt(0),bc=ib[Ga.side].charAt(0),Eb=Pa.getPxPosition(xa,Ga),xb="outside"===Ga.ticks?Ga.ticklen:0,Cb;if(Ga.automargin||Gc)if("multicategory"===Ga.type)var Jb=gb("tick2");else Jb=gb(),"x"===lb&&"b"===$b&&(Ga._depth=Math.max(0<Jb.width?Jb.bottom-Eb:0,xb));if(Ga.automargin){var ac=
{x:0,y:0,r:0,l:0,t:0,b:0};var Kc=[0,1];"x"===lb?("b"===$b?ac[$b]=Ga._depth:(ac[$b]=Ga._depth=Math.max(0<Jb.width?Eb-Jb.top:0,xb),Kc.reverse()),0<Jb.width&&(Eb=Jb.right-(Ga._offset+Ga._length),0<Eb&&(ac.xr=1,ac.r=Eb),Jb=Ga._offset-Jb.left,0<Jb&&(ac.xl=0,ac.l=Jb))):("l"===$b?ac[$b]=Ga._depth=Math.max(0<Jb.height?Eb-Jb.left:0,xb):(ac[$b]=Ga._depth=Math.max(0<Jb.height?Jb.right-Eb:0,xb),Kc.reverse()),0<Jb.height&&(Eb=Jb.bottom-(Ga._offset+Ga._length),0<Eb&&(ac.yb=0,ac.b=Eb),Jb=Ga._offset-Jb.top,0<Jb&&
(ac.yt=1,ac.t=Jb)));ac[rb]="free"===Ga.anchor?Ga.position:Ga._anchorAxis.domain[Kc[0]];Ga.title.text!==cb._dfltTitle[lb]&&(ac[$b]+=B(Ga)+(Ga.title.standoff||0));if(Ga.mirror&&"free"!==Ga.anchor){var vc={x:0,y:0,r:0,l:0,t:0,b:0};vc[bc]=Ga.linewidth;Ga.mirror&&!0!==Ga.mirror&&(vc[bc]+=xb);if(!0===Ga.mirror||"ticks"===Ga.mirror)vc[rb]=Ga._anchorAxis.domain[Kc[1]];else if("all"===Ga.mirror||"allticks"===Ga.mirror)vc[rb]=[Ga._counterDomainMin,Ga._counterDomainMax][Kc[1]]}}Gc&&(Cb=N.getComponentMethod("rangeslider",
"autoMarginOpts")(xa,Ga));K.autoMargin(xa,I(Ga),ac);K.autoMargin(xa,I(Ga)+".mirror",vc);K.autoMargin(xa,Ga._id+".rangeslider",Cb)});Va.skipTitle||Gc&&"bottom"===Ga.side||yb.push(function(){var $b=xa._fullLayout,bc=Ga._id,Eb=bc.charAt(0),xb=Ga.title.font.size;if(Ga.title.hasOwnProperty("standoff"))var Cb=Ga._depth+Ga.title.standoff+B(Ga);else Cb="multicategory"===Ga.type?Ga._depth:10+1.5*xb+(Ga.linewidth?Ga.linewidth-1:0),Cb="x"===Eb?Cb+("top"===Ga.side?xb*(Ga.showticklabels?1:0):xb*(Ga.showticklabels?
1.5:.5)):Cb+("right"===Ga.side?xb*(Ga.showticklabels?1:.5):xb*(Ga.showticklabels?.5:0));var Jb=Pa.getPxPosition(xa,Ga);if("x"===Eb){xb=Ga._offset+Ga._length/2;var ac="top"===Ga.side?Jb-Cb:Jb+Cb}else{ac=Ga._offset+Ga._length/2;xb="right"===Ga.side?Jb+Cb:Jb-Cb;var Kc={rotate:"-90",offset:0}}if("multicategory"!==Ga.type){Cb=Ga._selections[Ga._id+"tick"];var vc={selection:Cb,side:Ga.side};Cb&&Cb.node()&&Cb.node().parentNode&&(Cb=V.getTranslate(Cb.node().parentNode),vc.offsetLeft=Cb.x,vc.offsetTop=Cb.y);
Ga.title.hasOwnProperty("standoff")&&(vc.pad=0)}return P.draw(xa,bc+"title",{propContainer:Ga,propName:Ga._name+".title.text",placeholder:$b._dfltTitle[Eb],avoid:vc,transform:Kc,attributes:{x:xb,y:ac,"text-anchor":"middle"}})});return O.syncOrAsync(yb)}}};Pa.getTickSigns=function(xa){var Ga=xa._id.charAt(0),Va=xa.side==={x:"top",y:"right"}[Ga]?1:-1;Va=[-1,1,Va,-Va];"inside"!==xa.ticks===("x"===Ga)&&(Va=Va.map(function(gb){return-gb}));xa.side&&Va.push({l:-1,t:-1,r:1,b:1}[xa.side.charAt(0)]);return Va};
Pa.makeTransFn=function(xa){var Ga=xa._id.charAt(0),Va=xa._offset;return"x"===Ga?function(gb){return"translate("+(Va+xa.l2p(gb.x))+",0)"}:function(gb){return"translate(0,"+(Va+xa.l2p(gb.x))+")"}};Pa.makeTransPeriodFn=function(xa){var Ga=xa._id.charAt(0),Va=xa._offset;return"x"===Ga?function(gb){return"translate("+(Va+xa.l2p(gb.periodX))+",0)"}:function(gb){return"translate(0,"+(Va+xa.l2p(gb.periodX))+")"}};Pa.makeTickPath=function(xa,Ga,Va,gb){gb=void 0!==gb?gb:xa.ticklen;var Ma=xa._id.charAt(0);
xa=(xa.linewidth||1)/2;return"x"===Ma?"M0,"+(Ga+xa*Va)+"v"+gb*Va:"M"+(Ga+xa*Va)+",0h"+gb*Va};Pa.makeLabelFns=function(xa,Ga,Va){var gb=xa._id.charAt(0),Ma="boundaries"!==xa.tickson&&"outside"===xa.ticks,cb=0,Sa=0;Ma&&(cb+=xa.ticklen);Va&&"outside"===xa.ticks&&(Sa=O.deg2rad(Va),cb=xa.ticklen*Math.cos(Sa)+1,Sa=xa.ticklen*Math.sin(Sa));xa.showticklabels&&(Ma||xa.showline)&&(cb+=.2*xa.tickfont.size);cb+=(xa.linewidth||1)/2;Ma={labelStandoff:cb,labelShift:Sa};if("x"===gb){var lb="bottom"===xa.side?1:-1;
var rb=Sa*lb;var yb=Ga+cb*lb;var Hb="bottom"===xa.side?1:-.2;Ma.xFn=function(Vb){return Vb.dx+rb};Ma.yFn=function(Vb){return Vb.dy+yb+Vb.fontSize*Hb};Ma.anchorFn=function(Vb,lc){return E(lc)&&0!==lc&&180!==lc?0>lc*lb?"end":"start":"middle"};Ma.heightFn=function(Vb,lc,Ac){return-60>lc||60<lc?-.5*Ac:"top"===xa.side?-Ac:0}}else"y"===gb&&(lb="right"===xa.side?1:-1,rb=cb,yb=-Sa*lb,Hb=90===Math.abs(xa.tickangle)?.5:0,Ma.xFn=function(Vb){return Vb.dx+Ga+(rb+Vb.fontSize*Hb)*lb},Ma.yFn=function(Vb){return Vb.dy+
yb+Vb.fontSize*eb},Ma.anchorFn=function(Vb,lc){return E(lc)&&90===Math.abs(lc)?"middle":"right"===xa.side?"start":"end"},Ma.heightFn=function(Vb,lc,Ac){lc*="left"===xa.side?1:-1;return-30>lc?-Ac:30>lc?-.5*Ac:0});return Ma};Pa.drawTicks=function(xa,Ga,Va){Va=Va||{};var gb=Ga._id+"tick",Ma=Va.vals;"period"===Ga.ticklabelmode&&(Ma=Ma.slice(),Ma.shift());Ma=Va.layer.selectAll("path."+gb).data(Ga.ticks?Ma:[],A);Ma.exit().remove();Ma.enter().append("path").classed(gb,1).classed("ticks",1).classed("crisp",
!1!==Va.crisp).call(T.stroke,Ga.tickcolor).style("stroke-width",V.crispRound(xa,Ga.tickwidth,1)+"px").attr("d",Va.path);Ma.attr("transform",Va.transFn)};Pa.drawGrid=function(xa,Ga,Va){Va=Va||{};var gb=Ga._id+"grid",Ma=Va.vals,cb=Va.counterAxis;if(!1===Ga.showgrid)Ma=[];else if(cb&&Pa.shouldShowZeroLine(xa,Ga,cb)){cb="array"===Ga.tickmode;for(var Sa=0;Sa<Ma.length;Sa++){var lb=Ma[Sa].x;if(cb?!lb:Math.abs(lb)<Ga.dtick/100)if(Ma=Ma.slice(0,Sa).concat(Ma.slice(Sa+1)),cb)Sa--;else break}}Ma=Va.layer.selectAll("path."+
gb).data(Ma,A);Ma.exit().remove();Ma.enter().append("path").classed(gb,1).classed("crisp",!1!==Va.crisp);Ga._gw=V.crispRound(xa,Ga.gridwidth,1);Ma.attr("transform",Va.transFn).attr("d",Va.path).call(T.stroke,Ga.gridcolor||"#ddd").style("stroke-width",Ga._gw+"px");"function"===typeof Va.path&&Ma.attr("d",Va.path)};Pa.drawZeroLine=function(xa,Ga,Va){Va=Va||Va;var gb=Ga._id+"zl",Ma=Pa.shouldShowZeroLine(xa,Ga,Va.counterAxis);Ma=Va.layer.selectAll("path."+gb).data(Ma?[{x:0,id:Ga._id}]:[]);Ma.exit().remove();
Ma.enter().append("path").classed(gb,1).classed("zl",1).classed("crisp",!1!==Va.crisp).each(function(){Va.layer.selectAll("path").sort(function(cb,Sa){return tb.idSort(cb.id,Sa.id)})});Ma.attr("transform",Va.transFn).attr("d",Va.path).call(T.stroke,Ga.zerolinecolor||T.defaultLine).style("stroke-width",V.crispRound(xa,Ga.zerolinewidth,Ga._gw||1)+"px")};Pa.drawLabels=function(xa,Ga,Va){function gb(ed,Pc){ed.each(function(sd){var Db=L.select(this),Yb=Db.select(".text-math-group"),Fc=Hb.anchorFn(sd,Pc),
mc=Va.transFn.call(Db.node(),sd)+(E(Pc)&&0!==+Pc?" rotate("+Pc+","+Hb.xFn(sd)+","+(Hb.yFn(sd)-sd.fontSize/2)+")":""),qc=Q.lineCount(Db),rc=ob*sd.fontSize;(sd=Hb.heightFn(sd,E(Pc)?+Pc:0,(qc-1)*rc))&&(mc+=" translate(0, "+sd+")");Yb.empty()?Db.select("text").attr({transform:mc,"text-anchor":Fc}):(Db=V.bBox(Yb.node()).width*{end:-.5,start:.5}[Fc],Yb.attr("transform",mc+(Db?"translate("+Db+",0)":"")))})}function Ma(){gb(Ac,Vb);if(yb.length&&"x"===lb&&!E(Vb)&&("log"!==Ga.type||"D"!==String(Ga.dtick).charAt(0))){var ed=
Nc=0,Pc=[];Ac.each(function(mc){ed=Math.max(ed,mc.fontSize);mc=Ga.l2p(mc.x);var qc=H(this);qc=V.bBox(qc.node());Pc.push({top:0,bottom:10,height:10,left:mc-qc.width/2,right:mc+qc.width/2+2,width:qc.width+2})});if("boundaries"!==Ga.tickson&&!Ga.showdividers||Va.secondary){var sd=yb.length;var Db=Math.abs((yb[sd-1].x-yb[0].x)*Ga._m)/(sd-1)<2.5*ed||"multicategory"===Ga.type;for(sd=0;sd<Pc.length-1;sd++)if(O.bBoxIntersect(Pc[sd],Pc[sd+1])){Nc=Db?90:30;break}}else for(Db=2,Ga.ticks&&(Db+=Ga.tickwidth/2),
sd=0;sd<Pc.length;sd++){var Yb=yb[sd].xbnd,Fc=Pc[sd];if(null!==Yb[0]&&Fc.left-Ga.l2p(Yb[0])<Db||null!==Yb[1]&&Ga.l2p(Yb[1])-Fc.right<Db){Nc=90;break}}Nc&&gb(Ac,Nc)}}Va=Va||{};var cb=xa._fullLayout,Sa=Ga._id,lb=Sa.charAt(0),rb=Va.cls||Sa+"tick",yb=Va.vals,Hb=Va.labelFns,Vb=Va.secondary?0:Ga.tickangle,lc=(Ga._prevTickAngles||{})[rb],Ac=Va.layer.selectAll("g."+rb).data(Ga.showticklabels?yb:[],A),ad=[];Ac.enter().append("g").classed(rb,1).append("text").attr("text-anchor","middle").each(function(ed){var Pc=
L.select(this),sd=xa._promises.length;Pc.call(Q.positionText,Hb.xFn(ed),Hb.yFn(ed)).call(V.font,ed.font,ed.fontSize,ed.fontColor).text(ed.text).call(Q.convertToTspans,xa);xa._promises[sd]?ad.push(xa._promises.pop().then(function(){gb(Pc,Vb)})):gb(Pc,Vb)});Ac.exit().remove();Va.repositionOnUpdate&&Ac.each(function(ed){L.select(this).select("text").call(Q.positionText,Hb.xFn(ed),Hb.yFn(ed))});gb(Ac,lc+1?lc:Vb);var Nc=null;Ga._selections&&(Ga._selections[rb]=Ac);Sa=[function(){return ad.length&&Promise.all(ad)}];
Ga.automargin&&cb._redrawFromAutoMarginCount&&90===lc?(Nc=90,Sa.push(function(){gb(Ac,lc)})):Sa.push(Ma);Ga._tickAngles&&Sa.push(function(){Ga._tickAngles[rb]=null===Nc?E(Vb)?Vb:0:Nc});(cb=O.syncOrAsync(Sa))&&cb.then&&xa._promises.push(cb);return cb};Pa.getPxPosition=function(xa,Ga){xa=xa._fullLayout._size;var Va=Ga._id.charAt(0),gb=Ga.side,Ma;"free"!==Ga.anchor?Ma=Ga._anchorAxis:"x"===Va?Ma={_offset:xa.t+(1-(Ga.position||0))*xa.h,_length:0}:"y"===Va&&(Ma={_offset:xa.l+(Ga.position||0)*xa.w,_length:0});
if("top"===gb||"left"===gb)return Ma._offset;if("bottom"===gb||"right"===gb)return Ma._offset+Ma._length};Pa.shouldShowZeroLine=function(xa,Ga,Va){var gb=O.simpleMap(Ga.range,Ga.r2l),Ma;if(Ma=0>=gb[0]*gb[1]&&Ga.zeroline&&("linear"===Ga.type||"-"===Ga.type)&&!(Ga.rangebreaks&&Ga.maskBreaks(0)===Ha)){if(!(Va=t(Ga,0)||!G(xa,Ga,Va,gb)))a:{xa=xa._fullData;Va=Ga._mainSubplot;Ga=Ga._id.charAt(0);for(gb=0;gb<xa.length;gb++)if(Ma=xa[gb],!0===Ma.visible&&Ma.xaxis+Ma.yaxis===Va){if(N.traceIs(Ma,"bar-like")&&
Ma.orientation==={x:"h",y:"v"}[Ga]){Va=!0;break a}if(Ma.fill&&Ma.fill.charAt(Ma.fill.length-1)===Ga){Va=!0;break a}}Va=!1}Ma=Va}return Ma};Pa.clipEnds=function(xa,Ga){return Ga.filter(function(Va){return t(xa,Va.x)})};Pa.allowAutoMargin=function(xa){for(var Ga=Pa.list(xa,"",!0),Va=0;Va<Ga.length;Va++){var gb=Ga[Va];gb.automargin&&(K.allowAutoMargin(xa,I(gb)),gb.mirror&&K.allowAutoMargin(xa,I(gb)+".mirror"));N.getComponentMethod("rangeslider","isVisible")(gb)&&K.allowAutoMargin(xa,gb._id+".rangeslider")}};
Pa.swap=function(xa,Ga){var Va=[],gb,Ma;for(gb=0;gb<Ga.length;gb++){var cb=[],Sa=xa._fullData[Ga[gb]].xaxis,lb=xa._fullData[Ga[gb]].yaxis;if(Sa&&lb){for(Ma=0;Ma<Va.length;Ma++)-1===Va[Ma].x.indexOf(Sa)&&-1===Va[Ma].y.indexOf(lb)||cb.push(Ma);if(cb.length){var rb=Va[cb[0]];if(1<cb.length)for(Ma=1;Ma<cb.length;Ma++){var yb=Va[cb[Ma]];J(rb.x,yb.x);J(rb.y,yb.y)}J(rb.x,[Sa]);J(rb.y,[lb])}else Va.push({x:[Sa],y:[lb]})}}for(Ga=0;Ga<Va.length;Ga++){var Hb;Ma=xa;cb=Va[Ga].x;Sa=Va[Ga].y;rb=[];yb=[];lb=Ma.layout;
for(gb=0;gb<cb.length;gb++)rb.push(Pa.getFromId(Ma,cb[gb]));for(gb=0;gb<Sa.length;gb++)yb.push(Pa.getFromId(Ma,Sa[gb]));var Vb=Object.keys(aa),lc="anchor domain overlaying position side tickangle editType".split(" "),Ac=["linear","log"];for(gb=0;gb<Vb.length;gb++){var ad=Vb[gb],Nc=rb[0][ad],ed=yb[0][ad],Pc=!0,sd=!1,Db=!1;if("_"!==ad.charAt(0)&&"function"!==typeof Nc&&-1===lc.indexOf(ad)){for(Hb=1;Hb<rb.length&&Pc;Hb++){var Yb=rb[Hb][ad];"type"===ad&&-1!==Ac.indexOf(Nc)&&-1!==Ac.indexOf(Yb)&&Nc!==
Yb?sd=!0:Yb!==Nc&&(Pc=!1)}for(Hb=1;Hb<yb.length&&Pc;Hb++)Nc=yb[Hb][ad],"type"===ad&&-1!==Ac.indexOf(ed)&&-1!==Ac.indexOf(Nc)&&ed!==Nc?Db=!0:yb[Hb][ad]!==ed&&(Pc=!1);if(Pc){sd&&(lb[rb[0]._name].type="linear");Db&&(lb[yb[0]._name].type="linear");Hb=lb;ed=rb;Pc=yb;Yb=Ma._fullLayout._dfltTitle;sd=O.nestedProperty;Db=sd(Hb[ed[0]._name],ad).get();Nc=sd(Hb[Pc[0]._name],ad).get();"title"===ad&&(Db&&Db.text===Yb.x&&(Db.text=Yb.y),Nc&&Nc.text===Yb.y&&(Nc.text=Yb.x));for(Yb=0;Yb<ed.length;Yb++)sd(Hb,ed[Yb]._name+
"."+ad).set(Nc);for(Yb=0;Yb<Pc.length;Yb++)sd(Hb,Pc[Yb]._name+"."+ad).set(Db)}}}for(gb=0;gb<Ma._fullLayout.annotations.length;gb++)rb=Ma._fullLayout.annotations[gb],-1!==cb.indexOf(rb.xref)&&-1!==Sa.indexOf(rb.yref)&&O.swapAttrs(lb.annotations[gb],["?"])}}},{"../../components/color":615,"../../components/drawing":637,"../../components/titles":710,"../../constants/alignment":717,"../../constants/numerical":724,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../../registry":880,
"./autorange":796,"./axis_autotype":798,"./axis_ids":800,"./clean_ticks":802,"./layout_attributes":811,"./set_convert":817,d3:169,"fast-isnumeric":241}],798:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../../lib"),p=b("../../constants/numerical").BADNUM;y.exports=function(h,a,f){f=f||{};if(f=!f.noMultiCategory)f=n.isArrayOrTypedArray(h[0])&&n.isArrayOrTypedArray(h[1]);if(f)return"multicategory";f=Math.max(1,(h.length-1)/1E3);for(var d=0,l=0,k={},c=0;c<h.length;c+=f){var e=h[Math.round(c)],g=String(e);
k[g]||(k[g]=1,n.isDateTime(e,a)&&(d+=1),q(e)&&(l+=1))}if(d>2*l)return"date";a=Math.max(1,(h.length-1)/1E3);d=f=0;l={};for(k=0;k<h.length;k+=a)c=h[Math.round(k)],e=String(c),l[e]||(l[e]=1,"boolean"===typeof c?d++:n.cleanNumber(c)!==p?f++:"string"===typeof c&&d++);if(d>2*f)return"category";a:{if(h)for(a=0;a<h.length;a++)if(q(h[a])){h=!0;break a}h=!1}return h?"linear":"-"}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],799:[function(b,y,F){function q(w,D,C){function x(H,I){return a.coerce(w,
D,d.rangebreaks,H,I)}if(x("enabled")){var A=x("bounds");if(A&&2<=A.length){var B="",t,G;if(2===A.length)for(t=0;2>t;t++)if(G=n(A[t])){B=r;break}B=x("pattern",B);if(B===r)for(t=0;2>t;t++)(G=n(A[t]))&&(D.bounds[t]=A[t]=G-1);if(B)for(t=0;2>t;t++)switch(G=A[t],B){case r:if(!p(G)){D.enabled=!1;return}G=+G;if(G!==Math.floor(G)||0>G||7<=G){D.enabled=!1;return}D.bounds[t]=A[t]=G;break;case u:if(!p(G)){D.enabled=!1;return}G=+G;if(0>G||24<G){D.enabled=!1;return}D.bounds[t]=A[t]=G}!1===C.autorange&&(C=C.range,
C[0]<C[1]?A[0]<C[0]&&A[1]>C[1]&&(D.enabled=!1):A[0]>C[0]&&A[1]<C[1]&&(D.enabled=!1))}else(A=x("values"))&&A.length?x("dvalue"):D.enabled=!1}}function n(w){if("string"===typeof w)return v[w.substr(0,3).toLowerCase()]}var p=b("fast-isnumeric"),h=b("../../registry"),a=b("../../lib"),f=b("../array_container_defaults"),d=b("./layout_attributes"),l=b("./tick_value_defaults"),k=b("./tick_mark_defaults"),c=b("./tick_label_defaults"),e=b("./category_order_defaults"),g=b("./line_grid_defaults"),m=b("./set_convert"),
r=b("./constants").WEEKDAY_PATTERN,u=b("./constants").HOUR_PATTERN;y.exports=function(w,D,C,x,A){var B=x.letter,t=x.font||{},G=x.splomStash||{},H=C("visible",!x.visibleDflt),I=D._template||{};I=D.type||I.type||"-";"date"===I&&h.getComponentMethod("calendars","handleDefaults")(w,D,"calendar",x.calendar);m(D,A);var J=!D.isValidRange(w.range);J&&x.reverseDflt&&(J="reversed");!C("autorange",J)||"linear"!==I&&"-"!==I||C("rangemode");C("range");D.cleanRange();e(w,D,C,x);"category"===I||x.noHover||C("hoverformat");
J=C("color");var L=J!==d.color.dflt?J:t.color;B=G.label||A._dfltTitle[B];c(w,D,C,I,x,{pass:1});if(!H)return D;C("title.text",B);a.coerceFont(C,"title.font",{family:t.family,size:Math.round(1.2*t.size),color:L});l(w,D,C,I);c(w,D,C,I,x,{pass:2});k(w,D,C,x);g(w,D,C,{dfltColor:J,bgColor:x.bgColor,showGrid:x.showGrid,attributes:d});(D.showline||D.ticks)&&C("mirror");x.automargin&&C("automargin");t="multicategory"===I;if(!x.noTickson&&("category"===I||t)&&(D.ticks||D.showgrid)){var E;t&&(E="boundaries");
C("tickson",E)}t&&C("showdividers")&&(C("dividercolor"),C("dividerwidth"));if("date"===I)if(x.noTicklabelmode||C("ticklabelmode"),f(w,D,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:q}),D.rangebreaks.length){for(w=0;w<D.rangebreaks.length;w++)if(D.rangebreaks[w].pattern===r){D._hasDayOfWeekBreaks=!0;break}m(D,A);if(A._has("scattergl")||A._has("splom"))for(A=0;A<x.data.length;A++)if(w=x.data[A],"scattergl"===w.type||"splom"===w.type)w.visible=!1,a.warn(w.type+" traces do not work on axes with rangebreaks. Setting trace "+
w.index+" to `visible: false`.")}else delete D.rangebreaks;return D};var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7}},{"../../lib":749,"../../registry":880,"../array_container_defaults":793,"./category_order_defaults":801,"./constants":803,"./layout_attributes":811,"./line_grid_defaults":813,"./set_convert":817,"./tick_label_defaults":818,"./tick_mark_defaults":819,"./tick_value_defaults":820,"fast-isnumeric":241}],800:[function(b,y,F){var q=b("../../registry"),n=b("./constants");F.id2name=function(p){if("string"===
typeof p&&p.match(n.AX_ID_PATTERN)){var h=p.substr(1);"1"===h&&(h="");return p.charAt(0)+"axis"+h}};F.name2id=function(p){if(p.match(n.AX_NAME_PATTERN)){var h=p.substr(5);"1"===h&&(h="");return p.charAt(0)+h}};F.cleanId=function(p,h){if("string"===typeof p&&p.match(n.AX_ID_PATTERN)&&(!h||p.charAt(0)===h))return h=p.substr(1).replace(/^0+/,""),"1"===h&&(h=""),p.charAt(0)+h};F.list=function(p,h,a){var f=p._fullLayout;if(!f)return[];var d=F.listIds(p,h);p=Array(d.length);var l;for(l=0;l<d.length;l++){var k=
d[l];p[l]=f[k.charAt(0)+"axis"+k.substr(1)]}if(!a)for(a=f._subplots.gl3d||[],l=0;l<a.length;l++)d=f[a[l]],h?p.push(d[h+"axis"]):p.push(d.xaxis,d.yaxis,d.zaxis);return p};F.listIds=function(p,h){p=p._fullLayout;if(!p)return[];p=p._subplots;return h?p[h+"axis"]:p.xaxis.concat(p.yaxis)};F.getFromId=function(p,h,a){p=p._fullLayout;"x"===a?h=h.replace(/y[0-9]*/,""):"y"===a&&(h=h.replace(/x[0-9]*/,""));return p[F.id2name(h)]};F.getFromTrace=function(p,h,a){var f=p._fullLayout,d=null;q.traceIs(h,"gl3d")?
(p=h.scene,"scene"===p.substr(0,5)&&(d=f[p][a+"axis"])):d=F.getFromId(p,h[a+"axis"]||a);return d};F.idSort=function(p,h){var a=p.charAt(0),f=h.charAt(0);return a!==f?a>f?1:-1:+(p.substr(1)||1)-+(h.substr(1)||1)};F.getAxisGroup=function(p,h){p=p._axisMatchGroups;for(var a=0;a<p.length;a++)if(p[a][h])return"g"+a;return h}},{"../../registry":880,"./constants":803}],801:[function(b,y,F){y.exports=function(q,n,p,h){if("category"===n.type){q=q.categoryarray;q=Array.isArray(q)&&0<q.length;var a;q&&(a="array");
a=p("categoryorder",a);var f;"array"===a&&(f=p("categoryarray"));q||"array"!==a||(a=n.categoryorder="trace");if("trace"===a)n._initialCategories=[];else if("array"===a)n._initialCategories=f.slice();else{p=h.dataAttr||n._id.charAt(0);f={};var d;if(h.axData)q=h.axData;else for(q=[],d=0;d<h.data.length;d++){var l=h.data[d];l[p+"axis"]===n._id&&q.push(l)}for(d=0;d<q.length;d++)for(l=q[d][p],h=0;h<l.length;h++){var k=l[h];null!==k&&void 0!==k&&(f[k]=1)}f=Object.keys(f).sort();"category ascending"===a?
n._initialCategories=f:"category descending"===a&&(n._initialCategories=f.reverse())}}}},{}],802:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../../lib"),p=b("../../constants/numerical").ONEDAY;F.dtick=function(h,a){var f="log"===a,d="date"===a,l="category"===a;a=d?p:1;if(!h)return a;if(q(h))return h=Number(h),0>=h?a:l?Math.max(1,Math.round(h)):d?Math.max(.1,h):h;if("string"!==typeof h||!d&&!f)return a;l=h.charAt(0);var k=h.substr(1);k=q(k)?Number(k):0;return 0>=k||!(d&&"M"===l&&k===Math.round(k)||
f&&"L"===l||f&&"D"===l&&(1===k||2===k))?a:h};F.tick0=function(h,a,f,d){if("date"===a)return n.cleanDate(h,n.dateTick0(f));if("D1"!==d&&"D2"!==d)return q(h)?Number(h):0}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],803:[function(b,y,F){b=b("../../lib/regex").counter;y.exports={idRegex:{x:b("x"),y:b("y")},attrRegex:b("[xy]axis"),xAxisMatch:b("xaxis"),yAxisMatch:b("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,
HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"imagelayer heatmaplayer contourcarpetlayer contourlayer funnellayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above",
"below traces":"below"}}},{"../../lib/regex":765}],804:[function(b,y,F){function q(e,g,m,r,u){var v="range"!==u,w=r[a(g)].type,D;u=[];for(D=0;D<m.length;D++){var C=m[D];if(C!==g){var x=r[a(C)];x.type===w&&(x.fixedrange?v&&x.anchor&&r[a(x.anchor)].fixedrange&&u.push(C):u.push(C))}}for(D=0;D<e.length;D++)if(e[D][g]){e=e[D];g=[];for(D=0;D<u.length;D++)C=u[D],e[C]||g.push(C);return{linkableAxes:g,thisGroup:e}}return{linkableAxes:u,thisGroup:null}}function n(e,g,m,r,u){var v;if(null===g){g={};g[m]=1;var w=
e.length;e.push(g)}else w=e.indexOf(g);var D=Object.keys(g);for(v=0;v<e.length;v++)if(m=e[v],v!==w&&m[r]){var C=m[r];for(v=0;v<D.length;v++)r=D[v],m[r]=C*u*g[r];e.splice(w,1);return}if(1!==u)for(v=0;v<D.length;v++)g[D[v]]*=u;g[r]=1}function p(e,g){var m=e._inputDomain,r=m[0]+(m[1]-m[0])*c[e.constraintoward];e.domain=e._input.domain=[r+(m[0]-r)/g,r+(m[1]-r)/g];e.setScale()}var h=b("../../lib"),a=b("./axis_ids").id2name,f=b("./scale_zoom"),d=b("./autorange").makePadFn,l=b("./autorange").concatExtremes,
k=b("../../constants/numerical").ALMOST_EQUAL,c=b("../../constants/alignment").FROM_BL;F.handleConstraintDefaults=function(e,g,m,r){var u=r.allAxisIds,v=r.layoutOut,w=r.scaleanchorDflt,D=r.constrainDflt;r=v._axisConstraintGroups;var C=v._axisMatchGroups,x=g._id,A=x.charAt(0);A=((v._splomAxes||{})[A]||{})[x]||{};x=g._id;var B=x.charAt(0);D=m("constrain",D);h.coerce(e,g,{constraintoward:{valType:"enumerated",values:"x"===B?["left","center","right"]:["bottom","middle","top"],dflt:"x"===B?"center":"middle"}},
"constraintoward");if((e.matches||A.matches)&&!g.fixedrange){var t=q(C,x,u,v);var G=h.coerce(e,g,{matches:{valType:"enumerated",values:t.linkableAxes||[],dflt:A.matches}},"matches")}if(!(G||g.fixedrange&&"domain"!==D)&&(e.scaleanchor||w)){var H=q(r,x,u,v,D);var I=h.coerce(e,g,{scaleanchor:{valType:"enumerated",values:H.linkableAxes||[]}},"scaleanchor",w)}G?(delete g.constrain,n(C,t.thisGroup,x,G,1)):-1!==u.indexOf(e.matches)&&h.warn("ignored "+g._name+'.matches: "'+e.matches+'" to avoid either an infinite loop or because the target axis has fixed range.');
I?(e=m("scaleratio"),e||(e=g.scaleratio=1),n(r,H.thisGroup,x,I,e)):-1!==u.indexOf(e.scaleanchor)&&h.warn("ignored "+g._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the target axis has fixed range or this axis declares a *matches* constraint.')};F.enforce=function(e){var g=e._fullLayout,m=g._axisConstraintGroups||[],r,u,v,w;for(r=0;r<m.length;r++){var D=m[r],C=Object.keys(D),x=Infinity,A=0,B=Infinity,t={},G={},H=!1;for(u=
0;u<C.length;u++){var I=C[u];G[I]=v=g[a(I)];v._inputDomain?v.domain=v._inputDomain.slice():v._inputDomain=v.domain.slice();v._inputRange||(v._inputRange=v.range.slice());v.setScale();t[I]=w=Math.abs(v._m)/D[I];x=Math.min(x,w);"domain"!==v.constrain&&v._constraintShrinkable||(B=Math.min(B,w));delete v._constraintShrinkable;A=Math.max(A,w);"domain"===v.constrain&&(H=!0)}if(!(x>k*A)||H)for(u=0;u<C.length;u++)if(I=C[u],w=t[I],v=G[I],I=v.constrain,w!==B||"domain"===I)if(w/=B,"range"===I)f(v,w);else if(I=
v._inputDomain,D=(v.domain[1]-v.domain[0])/(I[1]-I[0]),x=(v.r2l(v.range[1])-v.r2l(v.range[0]))/(v.r2l(v._inputRange[1])-v.r2l(v._inputRange[0])),w/=D,1>w*x)v.domain=v._input.domain=I.slice(),f(v,w);else{1>x&&(v.range=v._input.range=v._inputRange.slice(),w*=x);if(v.autorange){I=v.r2l(v.range[0]);D=v.r2l(v.range[1]);var J=(I+D)/2;A=x=J;H=Math.abs(D-J);var L=J-H*w*1.0001;J+=H*w*1.0001;var E=d(v);p(v,w);var K=Math.abs(v._m),N=l(e,v),O=N.min;N=N.max;var Q;for(Q=0;Q<O.length;Q++){var P=O[Q].val-E(O[Q])/
K;P>L&&P<x&&(x=P)}for(Q=0;Q<N.length;Q++)P=N[Q].val+E(N[Q])/K,P<J&&P>A&&(A=P);w/=(A-x)/(2*H);x=v.l2r(x);A=v.l2r(A);v.range=v._input.range=I<D?[x,A]:[A,x]}p(v,w)}}};F.clean=function(e,g){if(g._inputDomain){var m=!1,r=g._id;e=e._fullLayout._axisConstraintGroups;for(var u=0;u<e.length;u++)if(e[u][r]){m=!0;break}m&&"domain"===g.constrain||(g._input.domain=g.domain=g._inputDomain,delete g._inputDomain)}}},{"../../constants/alignment":717,"../../constants/numerical":724,"../../lib":749,"./autorange":796,
"./axis_ids":800,"./scale_zoom":815}],805:[function(b,y,F){function q(qa,oa,ka,ra){oa=B.ensureSingle(qa.draglayer,oa,ka,function(ha){ha.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",qa.id)});oa.call(L,ra);return oa.node()}function n(qa,oa,ka,ra,ha,ma,wa){qa=q(qa,"rect",oa,ka);D.select(qa).call(H.setRect,ra,ha,ma,wa);return qa}function p(qa,oa){for(var ka=0;ka<qa.length;ka++)if(!qa[ka].fixedrange)return oa;return""}function h(qa,oa){var ka=qa.range[oa];oa=Math.abs(ka-
qa.range[1-oa]);if("date"===qa.type)return ka;if("log"===qa.type)return qa=Math.ceil(Math.max(0,-Math.log(oa)/Math.LN10))+3,D.format("."+qa+"g")(Math.pow(10,ka));qa=Math.floor(Math.log(Math.abs(ka))/Math.LN10)-Math.floor(Math.log(oa)/Math.LN10)+4;return D.format("."+String(qa)+"g")(ka)}function a(qa,oa,ka,ra,ha){for(var ma=0;ma<qa.length;ma++){var wa=qa[ma];if(!wa.fixedrange)if(wa.rangebreaks){var na="y"===wa._id.charAt(0),ya=na?1-ka:ka;ra[wa._name+".range[0]"]=wa.l2r(wa.p2l((na?1-oa:oa)*wa._length));
ra[wa._name+".range[1]"]=wa.l2r(wa.p2l(ya*wa._length))}else na=wa._rl[0],ya=wa._rl[1]-na,ra[wa._name+".range[0]"]=wa.l2r(na+ya*oa),ra[wa._name+".range[1]"]=wa.l2r(na+ya*ka)}ha&&ha.length&&(qa=(oa+(1-ka))/2,a(ha,qa,1-qa,ra,[]))}function f(qa,oa){for(var ka=0;ka<qa.length;ka++){var ra=qa[ka];if(!ra.fixedrange)if(ra.rangebreaks){var ha=ra._length,ma=ra.p2l(0+oa)-ra.p2l(0);ha=ra.p2l(ha+oa)-ra.p2l(ha);ma=(ma+ha)/2;ra.range=[ra.l2r(ra._rl[0]-ma),ra.l2r(ra._rl[1]-ma)]}else ra.range=[ra.l2r(ra._rl[0]-oa/
ra._m),ra.l2r(ra._rl[1]-oa/ra._m)]}}function d(qa,oa,ka){return qa?"nsew"===qa?ka?"":"pan"===oa?"move":"crosshair":qa.toLowerCase()+"-resize":"pointer"}function l(qa,oa,ka,ra,ha){return qa.append("path").attr("class","zoombox").style({fill:.2<oa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+ka+", "+ra+")").attr("d",ha+"Z")}function k(qa,oa,ka){return qa.append("path").attr("class","zoombox-corners").style({fill:G.background,stroke:G.defaultLine,"stroke-width":1,
opacity:0}).attr("transform","translate("+oa+", "+ka+")").attr("d","M0,0Z")}function c(qa,oa,ka,ra,ha,ma){qa.attr("d",ra+"M"+ka.l+","+ka.t+"v"+ka.h+"h"+ka.w+"v-"+ka.h+"h-"+ka.w+"Z");e(qa,oa,ha,ma)}function e(qa,oa,ka,ra){ka||(qa.transition().style("fill",.2<ra?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),oa.transition().style("opacity",1).duration(200))}function g(qa){D.select(qa).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function m(qa){pa&&
qa.data&&qa._context.showTips&&(B.notifier(B._(qa,"Double-click to zoom back out"),"long"),pa=!1)}function r(qa){var oa=Math.floor(Math.min(qa.b-qa.t,qa.r-qa.l,la)/2);return"M"+(qa.l-3.5)+","+(qa.t-.5+oa)+"h3v"+-oa+"h"+oa+"v-3h-"+(oa+3)+"ZM"+(qa.r+3.5)+","+(qa.t-.5+oa)+"h-3v"+-oa+"h"+-oa+"v-3h"+(oa+3)+"ZM"+(qa.r+3.5)+","+(qa.b+.5-oa)+"h-3v"+oa+"h"+-oa+"v3h"+(oa+3)+"ZM"+(qa.l-3.5)+","+(qa.b+.5-oa)+"h3v"+oa+"h"+oa+"v3h-"+(oa+3)+"Z"}function u(qa,oa,ka,ra){for(var ha=!1,ma={},wa={},na,ya,Fa,Ha,eb=0;eb<
oa.length;eb++){var hb=oa[eb];for(na in ka)if(hb[na]){for(Fa in hb)("x"===Fa.charAt(0)?ka:ra)[Fa]||(ma[Fa]=na);for(ya in ra)hb[ya]&&(ha=!0)}for(ya in ra)if(hb[ya])for(Ha in hb)("x"===Ha.charAt(0)?ka:ra)[Ha]||(wa[Ha]=ya)}ha&&(B.extendFlat(ma,wa),wa={});oa={};ka=[];for(Fa in ma)ra=V(qa,Fa),ka.push(ra),oa[ra._id]=ra;Fa={};ra=[];for(Ha in wa)na=V(qa,Ha),ra.push(na),Fa[na._id]=na;return{xaHash:oa,yaHash:Fa,xaxes:ka,yaxes:ra,xLinks:ma,yLinks:wa,isSubplotConstrained:ha}}function v(qa,oa){if(x){var ka=void 0!==
qa.onwheel?"wheel":"mousewheel";qa._onwheel&&qa.removeEventListener(ka,qa._onwheel);qa._onwheel=oa;qa.addEventListener(ka,oa,{passive:!1})}else void 0!==qa.onwheel?qa.onwheel=oa:void 0!==qa.onmousewheel?qa.onmousewheel=oa:qa.isAddedWheelEvent||(qa.isAddedWheelEvent=!0,qa.addEventListener("wheel",oa,{passive:!1}))}function w(qa){var oa=[],ka;for(ka in qa)oa.push(qa[ka]);return oa}var D=b("d3"),C=b("tinycolor2"),x=b("has-passive-events"),A=b("../../registry"),B=b("../../lib"),t=b("../../lib/svg_text_utils"),
G=b("../../components/color"),H=b("../../components/drawing"),I=b("../../components/fx"),J=b("./axes"),L=b("../../lib/setcursor"),E=b("../../components/dragelement");F=b("../../components/dragelement/helpers");var K=F.selectingOrDrawing,N=F.freeMode,O=b("../../constants/alignment").FROM_TL,Q=b("../../lib/clear_gl_canvases"),P=b("../../plot_api/subroutines").redrawReglTraces,T=b("../plots"),V=b("./axis_ids").getFromId,aa=b("./select").prepSelect,ba=b("./select").clearSelect,Y=b("./select").selectOnClick,
ea=b("./scale_zoom"),da=b("./constants"),ca=da.MINDRAG,la=da.MINZOOM,pa=!0;y.exports={makeDragBox:function(qa,oa,ka,ra,ha,ma,wa,na){function ya(){xa=oa.xaxis;Ga=oa.yaxis;rb=xa._length;yb=Ga._length;Sa=xa._offset;lb=Ga._offset;Va={};Va[xa._id]=xa;gb={};gb[Ga._id]=Ga;if(wa&&na)for(var vc=oa.overlays,Lc=0;Lc<vc.length;Lc++){var Zc=vc[Lc].xaxis;Va[Zc._id]=Zc;Zc=vc[Lc].yaxis;gb[Zc._id]=Zc}Ma=w(Va);cb=w(gb);lc=p(Ma,na);Ac=p(cb,wa);ad=!Ac&&!lc;Hb=u(qa,qa._fullLayout._axisConstraintGroups,Va,gb);Vb=u(qa,
qa._fullLayout._axisMatchGroups,Va,gb);Nc=na||Hb.isSubplotConstrained||Vb.isSubplotConstrained;ed=wa||Hb.isSubplotConstrained||Vb.isSubplotConstrained;vc=qa._fullLayout;Pc=vc._has("scattergl");sd=vc._has("splom");Db=vc._has("svg")}function Fa(vc,Lc){var Zc=qc.gd;if(0<=Zc._fullLayout._activeShapeIndex)Zc._fullLayout._deactivateShape(Zc);else{var Wc=Zc._fullLayout.clickmode;g(Zc);2!==vc||$a||Aa();if(Ua)-1<Wc.indexOf("select")&&Y(Lc,Zc,Ma,cb,oa.id,qc),-1<Wc.indexOf("event")&&I.click(Zc,Lc,oa.id);else if(1===
vc&&$a){var ld=wa?Ga:xa;vc="s"===wa||"w"===na?0:1;var xd=ld._name+".range["+vc+"]";vc=h(ld,vc);Lc="left";Wc="middle";if(!ld.fixedrange&&(wa?(Wc="n"===wa?"top":"bottom","right"===ld.side&&(Lc="right")):"e"===na&&(Lc="right"),Zc._context.showAxisRangeEntryBoxes))D.select(mc).call(t.makeEditable,{gd:Zc,immediate:!0,background:Zc._fullLayout.paper_bgcolor,text:String(vc),fill:ld.tickfont?ld.tickfont.color:"#444",horizontalAlign:Lc,verticalAlign:Wc}).on("edit",function(hd){hd=ld.d2r(hd);void 0!==hd&&A.call("_guiRelayout",
Zc,xd,hd)})}}}function Ha(vc,Lc,Zc){vc=mc.getBoundingClientRect();rc=Lc-vc.left;wb=Zc-vc.top;zb={l:rc,r:rc,w:0,t:wb,b:wb,h:0};fc=qa._hmpixcount?qa._hmlumcount/qa._hmpixcount:C(qa._fullLayout.plot_bgcolor).getLuminance();zc="M0,0H"+rb+"V"+yb+"H0V0";Gc=!1;$b="xy";xb=!1;bc=l(Ia,fc,Sa,lb,zc);Eb=k(Ia,Sa,lb)}function eb(vc,Lc){function Zc(){$b="";zb.r=zb.l;zb.t=zb.b;Eb.attr("d","M0,0Z")}if(qa._transitioningWithDuration)return!1;vc=Math.max(0,Math.min(rb,vc+rc));Lc=Math.max(0,Math.min(yb,Lc+wb));var Wc=
Math.abs(vc-rc),ld=Math.abs(Lc-wb);zb.l=Math.min(rc,vc);zb.r=Math.max(rc,vc);zb.t=Math.min(wb,Lc);zb.b=Math.max(wb,Lc);Hb.isSubplotConstrained?Wc>la||ld>la?($b="xy",Wc/rb>ld/yb?(ld=Wc*yb/rb,wb>Lc?zb.t=wb-ld:zb.b=wb+ld):(Wc=ld*rb/yb,rc>vc?zb.l=rc-Wc:zb.r=rc+Wc),Eb.attr("d",r(zb))):Zc():Vb.isSubplotConstrained?Wc>la||ld>la?($b="xy",vc=Math.min(zb.l/rb,(yb-zb.b)/yb),Lc=Math.max(zb.r/rb,(yb-zb.t)/yb),zb.l=vc*rb,zb.r=Lc*rb,zb.b=(1-vc)*yb,zb.t=(1-Lc)*yb,Eb.attr("d",r(zb))):Zc():!Ac||ld<Math.min(Math.max(.6*
Wc,ca),la)?Wc<ca||!lc?Zc():(zb.t=0,zb.b=yb,$b="x",Eb.attr("d","M"+(zb.l-.5)+","+(wb-la-.5)+"h-3v"+(2*la+1)+"h3ZM"+(zb.r+.5)+","+(wb-la-.5)+"h3v"+(2*la+1)+"h-3Z")):!lc||Wc<Math.min(.6*ld,la)?(zb.l=0,zb.r=rb,$b="y",Eb.attr("d","M"+(rc-la-.5)+","+(zb.t-.5)+"v-3h"+(2*la+1)+"v3ZM"+(rc-la-.5)+","+(zb.b+.5)+"v3h"+(2*la+1)+"v-3Z")):($b="xy",Eb.attr("d",r(zb)));zb.w=zb.r-zb.l;zb.h=zb.b-zb.t;$b&&(xb=!0);qa._dragged=xb;c(bc,Eb,zb,zc,Gc,fc);hb();qa.emit("plotly_relayouting",Yb);Gc=!0}function hb(){Yb={};if("xy"===
$b||"x"===$b)a(Ma,zb.l/rb,zb.r/rb,Yb,Hb.xaxes),sb("x",Yb);if("xy"===$b||"y"===$b)a(cb,(yb-zb.b)/yb,(yb-zb.t)/yb,Yb,Hb.yaxes),sb("y",Yb)}function ob(){hb();g(qa);Ka();m(qa)}function ib(vc){function Lc(hd,Cd,Kd){if(!hd.fixedrange){var pd=B.simpleMap(hd.range,hd.r2l),Yc=pd[0]+(pd[1]-pd[0])*Cd;hd.range=pd.map(function(Dd){return hd.l2r(Yc+(Dd-Yc)*Kd)})}}if(qa._context._scrollZoom.cartesian||qa._fullLayout._enablescrollzoom)if(qc.plotinfo.selection=!1,ba(qa),qa._transitioningWithDuration)vc.preventDefault(),
vc.stopPropagation();else{ya();clearTimeout(Jb);var Zc=-vc.deltaY;isFinite(Zc)||(Zc=vc.wheelDelta/10);if(isFinite(Zc)){Zc=Math.exp(-Math.min(Math.max(Zc,-20),20)/200);var Wc=Kc.draglayer.select(".nsewdrag").node().getBoundingClientRect(),ld=(vc.clientX-Wc.left)/Wc.width;Wc=(Wc.bottom-vc.clientY)/Wc.height;var xd;if(Nc){na||(ld=.5);for(xd=0;xd<Ma.length;xd++)Lc(Ma[xd],ld,Zc);sb("x");Cb[2]*=Zc;Cb[0]+=Cb[2]*ld*(1/Zc-1)}if(ed){wa||(Wc=.5);for(xd=0;xd<cb.length;xd++)Lc(cb[xd],Wc,Zc);sb("y");Cb[3]*=Zc;
Cb[1]+=Cb[3]*(1-Wc)*(1/Zc-1)}Qa(Cb);tb();qa.emit("plotly_relayouting",Yb);Jb=setTimeout(function(){Cb=[0,0,rb,yb];Ka()},ac);vc.preventDefault()}else B.log("Did not find wheel motion attributes: ",vc)}}function Pa(vc,Lc){function Zc(hd,Cd,Kd){for(var pd=1-Cd,Yc,Dd,Jd=0;Jd<hd.length;Jd++){var Ld=hd[Jd];if(!Ld.fixedrange){Yc=Ld;Dd=Kd/Ld._length;Dd=Ld._rl[pd]+(Ld._rl[Cd]-Ld._rl[pd])/(1-(0<=Dd?Math.min(Dd,.9):1/(1/Math.max(Dd,-.3)+3.222)));var Ce=Ld.l2r(Dd);!1!==Ce&&void 0!==Ce&&(Ld.range[Cd]=Ce)}}return Yc._length*
(Yc._rl[Cd]-Dd)/(Yc._rl[Cd]-Yc._rl[pd])}if(!qa._transitioningWithDuration){qa._fullLayout._replotting=!0;if("ew"===lc||"ns"===Ac)lc&&(f(Ma,vc),sb("x")),Ac&&(f(cb,Lc),sb("y")),Qa([lc?-vc:0,Ac?-Lc:0,rb,yb]);else{if(Hb.isSubplotConstrained&&lc&&Ac){var Wc="w"===lc===("n"===Ac)?1:-1;Lc=(vc/rb+Wc*Lc/yb)/2;vc=Lc*rb;Lc=Wc*Lc*yb}"w"===lc?vc=Zc(Ma,0,vc):"e"===lc?vc=Zc(Ma,1,-vc):lc||(vc=0);"n"===Ac?Lc=Zc(cb,1,Lc):"s"===Ac?Lc=Zc(cb,0,-Lc):Ac||(Lc=0);Wc="w"===lc?vc:0;var ld="n"===Ac?Lc:0;if(Hb.isSubplotConstrained){var xd;
if(!lc&&1===Ac.length){for(xd=0;xd<Ma.length;xd++)Ma[xd].range=Ma[xd]._r.slice(),ea(Ma[xd],1-Lc/yb);vc=Lc*rb/yb;Wc=vc/2}if(!Ac&&1===lc.length){for(xd=0;xd<cb.length;xd++)cb[xd].range=cb[xd]._r.slice(),ea(cb[xd],1-vc/rb);Lc=vc*yb/rb;ld=Lc/2}}sb("x");sb("y");Qa([Wc,ld,rb-vc,yb-Lc])}tb();qa.emit("plotly_relayouting",Yb)}}function sb(vc,Lc){var Zc=Vb.isSubplotConstrained?{x:cb,y:Ma}[vc]:Vb[vc+"axes"];vc=Vb.isSubplotConstrained?{x:Ma,y:cb}[vc]:[];for(var Wc=0;Wc<Zc.length;Wc++){var ld=Zc[Wc],xd=ld._id;
xd=Vb.xLinks[xd]||Vb.yLinks[xd];if(xd=vc[0]||Va[xd]||gb[xd])Lc?(Lc[ld._name+".range[0]"]=Lc[xd._name+".range[0]"],Lc[ld._name+".range[1]"]=Lc[xd._name+".range[1]"]):ld.range=xd.range.slice()}}function tb(){function vc(ld){for(Zc=0;Zc<ld.length;Zc++)ld[Zc].fixedrange||Lc.push(ld[Zc]._id)}var Lc=[],Zc;Nc&&(vc(Ma),vc(Hb.xaxes),vc(Vb.xaxes));ed&&(vc(cb),vc(Hb.yaxes),vc(Vb.yaxes));Yb={};for(Zc=0;Zc<Lc.length;Zc++){var Wc=V(qa,Lc[Zc]);J.drawOne(qa,Wc,{skipTitle:!0});Yb[Wc._name+".range[0]"]=Wc.range[0];
Yb[Wc._name+".range[1]"]=Wc.range[1]}J.redrawComponents(qa,Lc)}function Aa(){if(!qa._transitioningWithDuration){var vc=qa._context.doubleClick,Lc=[];lc&&(Lc=Lc.concat(Ma));Ac&&(Lc=Lc.concat(cb));Vb.xaxes&&(Lc=Lc.concat(Vb.xaxes));Vb.yaxes&&(Lc=Lc.concat(Vb.yaxes));var Zc={},Wc;if("reset+autosize"===vc)for(vc="autosize",Wc=0;Wc<Lc.length;Wc++){var ld=Lc[Wc];if(ld._rangeInitial&&(ld.range[0]!==ld._rangeInitial[0]||ld.range[1]!==ld._rangeInitial[1])||!ld._rangeInitial&&!ld.autorange){vc="reset";break}}if("autosize"===
vc)for(Wc=0;Wc<Lc.length;Wc++)ld=Lc[Wc],ld.fixedrange||(Zc[ld._name+".autorange"]=!0);else if("reset"===vc){if(lc||Hb.isSubplotConstrained)Lc=Lc.concat(Hb.xaxes);Ac&&!Hb.isSubplotConstrained&&(Lc=Lc.concat(Hb.yaxes));Hb.isSubplotConstrained&&(lc?Ac||(Lc=Lc.concat(cb)):Lc=Lc.concat(Ma));for(Wc=0;Wc<Lc.length;Wc++)ld=Lc[Wc],ld.fixedrange||(ld._rangeInitial?(vc=ld._rangeInitial,Zc[ld._name+".range[0]"]=vc[0],Zc[ld._name+".range[1]"]=vc[1]):Zc[ld._name+".autorange"]=!0)}qa.emit("plotly_doubleclick",null);
A.call("_guiRelayout",qa,Zc)}}function Ka(){Qa([0,0,rb,yb]);B.syncOrAsync([T.previousPromises,function(){qa._fullLayout._replotting=!1;A.call("_guiRelayout",qa,Yb)}],qa)}function Qa(vc){var Lc=qa._fullLayout,Zc=Lc._plots;Lc=Lc._subplots.cartesian;var Wc;sd&&A.subplotsRegistry.splom.drag(qa);if(Pc)for(Wc=0;Wc<Lc.length;Wc++){var ld=Zc[Lc[Wc]];var xd=ld.xaxis;var hd=ld.yaxis;if(ld._scene){var Cd=B.simpleMap(xd.range,xd.r2l);hd=B.simpleMap(hd.range,hd.r2l);ld._scene.update({range:[Cd[0],hd[0],Cd[1],
hd[1]]})}}if(sd||Pc)Q(qa),P(qa);if(Db){Cd=vc[2]/xa._length;var Kd=vc[3]/Ga._length;for(Wc=0;Wc<Lc.length;Wc++){ld=Zc[Lc[Wc]];xd=ld.xaxis;hd=ld.yaxis;var pd=ed&&!hd.fixedrange&&gb[hd._id];if(Nc&&!xd.fixedrange&&Va[xd._id]){var Yc=Cd;var Dd=na?vc[0]:db(xd,Yc)}else Vb.xaHash[xd._id]?(Yc=Cd,Dd=vc[0]*xd._length/xa._length):Vb.yaHash[xd._id]?(Yc=Kd,Dd="ns"===Ac?-vc[1]*xd._length/Ga._length:db(xd,Yc,{n:"top",s:"bottom"}[Ac])):(Yc=Xa(xd,Cd,Kd),Dd=pb(xd,Yc));if(pd){pd=Kd;var Jd=wa?vc[1]:db(hd,pd)}else Vb.yaHash[hd._id]?
(pd=Kd,Jd=vc[1]*hd._length/Ga._length):Vb.xaHash[hd._id]?(pd=Cd,Jd="ew"===lc?-vc[0]*hd._length/xa._length:db(hd,pd,{e:"right",w:"left"}[lc])):(pd=Xa(hd,Cd,Kd),Jd=pb(hd,pd));if(Yc||pd){Yc||(Yc=1);pd||(pd=1);xd=xd._offset-Dd/Yc;hd=hd._offset-Jd/pd;ld.clipRect.call(H.setTranslate,Dd,Jd).call(H.setScale,Yc,pd);ld.plot.call(H.setTranslate,xd,hd).call(H.setScale,1/Yc,1/pd);if(Yc!==ld.xScaleFactor||pd!==ld.yScaleFactor)H.setPointGroupScale(ld.zoomScalePts,Yc,pd),H.setTextPointsScale(ld.zoomScaleTxt,Yc,pd);
H.hideOutsideRangePoints(ld.clipOnAxisFalseTraces,ld);ld.xScaleFactor=Yc;ld.yScaleFactor=pd}}}}function Xa(vc,Lc,Zc){return vc.fixedrange?0:Nc&&Hb.xaHash[vc._id]?Lc:ed&&(Hb.isSubplotConstrained?Hb.xaHash:Hb.yaHash)[vc._id]?Zc:0}function pb(vc,Lc){return Lc?(vc.range=vc._r.slice(),ea(vc,Lc),db(vc,Lc)):0}function db(vc,Lc,Zc){return vc._length*(1-Lc)*O[Zc||vc.constraintoward||"middle"]}var Ia=qa._fullLayout._zoomlayer,Ua="nsew"===wa+na,$a=1===(wa+na).length,xa,Ga,Va,gb,Ma,cb,Sa,lb,rb,yb,Hb,Vb,lc,Ac,
ad,Nc,ed,Pc,sd,Db,Yb;ya();var Fc=d(Ac+lc,qa._fullLayout.dragmode,Ua),mc=n(oa,wa+na+"drag",Fc,ka,ra,ha,ma);if(ad&&!Ua)return mc.onmousedown=null,mc.style.pointerEvents="none",mc;var qc={element:mc,gd:qa,plotinfo:oa,prepFn:function(vc,Lc,Zc){var Wc=qc.dragmode,ld=qa._fullLayout.dragmode;ld!==Wc&&(qc.dragmode=ld);ya();ad||(Ua?vc.shiftKey?"pan"===ld?ld="zoom":K(ld)||(ld="pan"):vc.ctrlKey&&(ld="pan"):ld="pan");N(ld)?qc.minDrag=1:qc.minDrag=void 0;K(ld)?(qc.xaxes=Ma,qc.yaxes=cb,aa(vc,Lc,Zc,qc,ld)):(qc.clickFn=
Fa,K(Wc)&&(qc.plotinfo.selection=!1,ba(qa)),ad||("zoom"===ld?(qc.moveFn=eb,qc.doneFn=ob,qc.minDrag=1,Ha(vc,Lc,Zc)):"pan"===ld&&(qc.moveFn=Pa,qc.doneFn=Ka)));qa._fullLayout._redrag=function(){var xd=qa._dragdata;xd&&xd.element===mc&&!K(qa._fullLayout.dragmode)&&(ya(),Qa([0,0,rb,yb]),qc.moveFn(xd.dx,xd.dy))}}};E.init(qc);var rc,wb,zb,fc,zc,Gc,$b,bc,Eb,xb,Cb=[0,0,rb,yb],Jb=null,ac=da.REDRAWDELAY,Kc=oa.mainplot?qa._fullLayout._plots[oa.mainplot]:oa;1!==wa.length*na.length&&v(mc,ib);return mc},makeDragger:q,
makeRectDragger:n,makeZoombox:l,makeCorners:k,updateZoombox:c,xyCorners:r,transitionZoombox:e,removeZoombox:g,showDoubleClickNotifier:m,attachWheelEventHandler:v}},{"../../components/color":615,"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../constants/alignment":717,"../../lib":749,"../../lib/clear_gl_canvases":733,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plot_api/subroutines":788,
"../../registry":880,"../plots":860,"./axes":797,"./axis_ids":800,"./constants":803,"./scale_zoom":815,"./select":816,d3:169,"has-passive-events":415,tinycolor2:548}],806:[function(b,y,F){var q=b("d3"),n=b("../../components/fx"),p=b("../../components/dragelement"),h=b("../../lib/setcursor"),a=b("./dragbox").makeDragBox,f=b("./constants").DRAGGERSIZE;F.initInteractions=function(d){var l=d._fullLayout;if(d._context.staticPlot)q.select(d).selectAll(".drag").remove();else if(l._has("cartesian")||l._has("splom")){Object.keys(l._plots||
{}).sort(function(c,e){return(l._plots[c].mainplot&&!0)===(l._plots[e].mainplot&&!0)?(c=c.split("y"),e=e.split("y"),c[0]===e[0]?Number(c[1]||1)-Number(e[1]||1):Number(c[0]||1)-Number(e[0]||1)):l._plots[c].mainplot?1:-1}).forEach(function(c){var e=l._plots[c],g=e.xaxis,m=e.yaxis;if(!e.mainplot){var r=a(d,e,g._offset,m._offset,g._length,m._length,"ns","ew");r.onmousemove=function(v){d._fullLayout._rehover=function(){d._fullLayout._hoversubplot===c&&d._fullLayout._plots[c]&&n.hover(d,v,c)};n.hover(d,
v,c);d._fullLayout._lasthover=r;d._fullLayout._hoversubplot=c};r.onmouseout=function(v){d._dragging||(d._fullLayout._hoversubplot=null,p.unhover(d,v))};d._context.showAxisDragHandles&&(a(d,e,g._offset-f,m._offset-f,f,f,"n","w"),a(d,e,g._offset+g._length,m._offset-f,f,f,"n","e"),a(d,e,g._offset-f,m._offset+m._length,f,f,"s","w"),a(d,e,g._offset+g._length,m._offset+m._length,f,f,"s","e"))}if(d._context.showAxisDragHandles){if(c===g._mainSubplot){var u=g._mainLinePosition;"top"===g.side&&(u-=f);a(d,
e,g._offset+.1*g._length,u,.8*g._length,f,"","ew");a(d,e,g._offset,u,.1*g._length,f,"","w");a(d,e,g._offset+.9*g._length,u,.1*g._length,f,"","e")}c===m._mainSubplot&&(g=m._mainLinePosition,"right"!==m.side&&(g-=f),a(d,e,g,m._offset+.1*m._length,f,.8*m._length,"ns",""),a(d,e,g,m._offset+.9*m._length,f,.1*m._length,"s",""),a(d,e,g,m._offset,f,.1*m._length,"n",""))}});var k=l._hoverlayer.node();k.onmousemove=function(c){c.target=d._fullLayout._lasthover;n.hover(d,c,l._hoversubplot)};k.onclick=function(c){c.target=
d._fullLayout._lasthover;n.click(d,c)};k.onmousedown=function(c){d._fullLayout._lasthover.onmousedown(c)};F.updateFx(d)}};F.updateFx=function(d){d=d._fullLayout;h(d._draggers,"pan"===d.dragmode?"move":"crosshair")}},{"../../components/dragelement":634,"../../components/fx":655,"../../lib/setcursor":769,"./constants":803,"./dragbox":805,d3:169}],807:[function(b,y,F){y.exports={clearOutlineControllers:function(q){(q=q._fullLayout._zoomlayer)&&q.selectAll(".outline-controllers").remove()},clearSelect:function(q){var n=
q._fullLayout._zoomlayer;n&&n.selectAll(".select-outline").remove();q._fullLayout._drawing=!1}}},{}],808:[function(b,y,F){function q(n,p){switch(n.type){case "log":return n.p2d(p);case "date":return n.p2r(p,0,n.calendar);default:return n.p2r(p)}}y.exports={p2r:q,r2p:function(n,p){switch(n.type){case "log":return n.d2p(p);case "date":return n.r2p(p,0,n.calendar);default:return n.r2p(p)}},axValue:function(n){var p="y"===n._id.charAt(0)?1:0;return function(h){return q(n,h[p])}},getTransform:function(n){return"translate("+
n.xaxis._offset+","+n.yaxis._offset+")"}}},{}],809:[function(b,y,F){var q=b("../../registry"),n=b("../../lib");y.exports=function(p){return function(h,a){h=h[p];if(Array.isArray(h)){var f=q.subplotsRegistry.cartesian,d=f.idRegex,l=a._subplots,k=l.xaxis,c=l.yaxis;l=l.cartesian;for(var e=a._has("cartesian")||a._has("gl2d"),g=0;g<h.length;g++){var m=h[g];if(n.isPlainObject(m)){var r=m.xref;m=m.yref;var u=d.x.test(r),v=d.y.test(m);if(u||v){e||n.pushUnique(a._basePlotModules,f);var w=!1;u&&-1===k.indexOf(r)&&
(k.push(r),w=!0);v&&-1===c.indexOf(m)&&(c.push(m),w=!0);w&&u&&v&&l.push(r+m)}}}}}}},{"../../lib":749,"../../registry":880}],810:[function(b,y,F){function q(w,D,C){return k.ensureSingle(w,D,C,function(x){x.datum(C)})}function n(w,D,C,x,A){for(var B=r.traceLayerClasses,t=w._fullLayout,G=t._modules,H,I,J=[],L=[],E=0;E<G.length;E++){H=G[E];I=H.name;var K=l.modules[I].categories;if(K.svg){var N=H.layerName||I+"layer";H=H.plot;C=g(C,H);I=C[0];C=C[1];I.length&&J.push({i:B.indexOf(N),className:N,plotMethod:H,
cdModule:I});K.zoomScale&&L.push("."+N)}}J.sort(function(O,Q){return O.i-Q.i});B=D.plot.selectAll("g.mlayer").data(J,function(O){return O.className});B.enter().append("g").attr("class",function(O){return O.className}).classed("mlayer",!0).classed("rangeplot",D.isRangePlot);B.exit().remove();B.order();B.each(function(O){var Q=d.select(this),P=O.className;O.plotMethod(w,D,O.cdModule,Q,x,A);-1===r.clipOnAxisFalseQuery.indexOf("."+P)&&e.setClipUrl(Q,D.layerClipId,w)});t._has("scattergl")&&(H=l.getModule("scattergl"),
I=g(C,H)[0],H.plot(w,D,I));w._context.staticPlot||(D._hasClipOnAxisFalse&&(D.clipOnAxisFalseTraces=D.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length&&(t=D.plot.selectAll(L.join(",")).selectAll(".trace"),D.zoomScalePts=t.selectAll("path.point"),D.zoomScaleTxt=t.selectAll(".textpoint")))}function p(w){w=w._fullLayout;var D=w._subplots.cartesian,C=D.length,x,A=[],B=[];for(x=0;x<C;x++){var t=D[x];var G=w._plots[t];var H=G.xaxis;var I=G.yaxis;H=H._mainAxis._id+I._mainAxis._id;
I=w._plots[H];G.overlays=[];H!==t&&I?(G.mainplot=H,G.mainplotinfo=I,B.push(t)):(G.mainplot=void 0,G.mainplotinfo=void 0,A.push(t))}for(x=0;x<B.length;x++)t=B[x],G=w._plots[t],G.mainplotinfo.overlays.push(G);D=A.concat(B);A=Array(C);for(x=0;x<C;x++){t=D[x];G=w._plots[t];H=G.xaxis;I=G.yaxis;H=[t,H.layer,I.layer,H.overlaying||"",I.overlaying||""];for(t=0;t<G.overlays.length;t++)H.push(G.overlays[t].id);A[x]=H}return A}function h(w,D){var C=D.plotgroup,x=D.id,A=r.layerValue2layerClass[D.xaxis.layer],
B=r.layerValue2layerClass[D.yaxis.layer];w=w._fullLayout._hasOnlyLargeSploms;if(D.mainplot){C=D.mainplotinfo;var t=C.plotgroup,G=x+"-x",H=x+"-y";D.gridlayer=C.gridlayer;D.zerolinelayer=C.zerolinelayer;v(C.overlinesBelow,"path",G);v(C.overlinesBelow,"path",H);v(C.overaxesBelow,"g",G);v(C.overaxesBelow,"g",H);D.plot=v(C.overplot,"g",x);v(C.overlinesAbove,"path",G);v(C.overlinesAbove,"path",H);v(C.overaxesAbove,"g",G);v(C.overaxesAbove,"g",H);D.xlines=t.select(".overlines-"+A).select("."+G);D.ylines=
t.select(".overlines-"+B).select("."+H);D.xaxislayer=t.select(".overaxes-"+A).select("."+G);D.yaxislayer=t.select(".overaxes-"+B).select("."+H)}else w?(D.xlines=v(C,"path","xlines-above"),D.ylines=v(C,"path","ylines-above"),D.xaxislayer=v(C,"g","xaxislayer-above"),D.yaxislayer=v(C,"g","yaxislayer-above")):(x=v(C,"g","layer-subplot"),D.shapelayer=v(x,"g","shapelayer"),D.imagelayer=v(x,"g","imagelayer"),D.gridlayer=v(C,"g","gridlayer"),D.zerolinelayer=v(C,"g","zerolinelayer"),v(C,"path","xlines-below"),
v(C,"path","ylines-below"),D.overlinesBelow=v(C,"g","overlines-below"),v(C,"g","xaxislayer-below"),v(C,"g","yaxislayer-below"),D.overaxesBelow=v(C,"g","overaxes-below"),D.plot=v(C,"g","plot"),D.overplot=v(C,"g","overplot"),D.xlines=v(C,"path","xlines-above"),D.ylines=v(C,"path","ylines-above"),D.overlinesAbove=v(C,"g","overlines-above"),v(C,"g","xaxislayer-above"),v(C,"g","yaxislayer-above"),D.overaxesAbove=v(C,"g","overaxes-above"),D.xlines=C.select(".xlines-"+A),D.ylines=C.select(".ylines-"+B),
D.xaxislayer=C.select(".xaxislayer-"+A),D.yaxislayer=C.select(".yaxislayer-"+B));w||(q(D.gridlayer,"g",D.xaxis._id),q(D.gridlayer,"g",D.yaxis._id),D.gridlayer.selectAll("g").map(function(I){return I[0]}).sort(m.idSort));D.xlines.style("fill","none").classed("crisp",!0);D.ylines.style("fill","none").classed("crisp",!0)}function a(w,D){if(w){var C={};w.each(function(t){t=t[0];d.select(this).remove();f(t,D);C[t]=!0});for(var x in D._plots){w=D._plots[x].overlays||[];for(var A=0;A<w.length;A++){var B=
w[A];C[B.id]&&B.plot.selectAll(".trace").remove()}}}}function f(w,D){D._draggers.selectAll("g."+w).remove();D._defs.select("#clip"+D._uid+w+"plot").remove()}var d=b("d3"),l=b("../../registry"),k=b("../../lib"),c=b("../plots"),e=b("../../components/drawing"),g=b("../get_data").getModuleCalcData,m=b("./axis_ids"),r=b("./constants"),u=b("../../constants/xmlns_namespaces"),v=k.ensureSingle;F.name="cartesian";F.attr=["xaxis","yaxis"];F.idRoot=["x","y"];F.idRegex=r.idRegex;F.attrRegex=r.attrRegex;F.attributes=
b("./attributes");F.layoutAttributes=b("./layout_attributes");F.supplyLayoutDefaults=b("./layout_defaults");F.transitionAxes=b("./transition_axes");F.finalizeSubplots=function(w,D){var C=D._subplots;D=C.xaxis;var x=C.yaxis,A=C.cartesian;C=A.concat(C.gl2d||[]);var B={},t={},G;for(G=0;G<C.length;G++){var H=C[G].split("y");B[H[0]]=1;t["y"+H[1]]=1}for(G=0;G<D.length;G++)if(H=D[G],!B[H]){var I=(w[m.id2name(H)]||{}).anchor;r.idRegex.y.test(I)||(I="y");A.push(H+I);C.push(H+I);t[I]||(t[I]=1,k.pushUnique(x,
I))}for(G=0;G<x.length;G++)I=x[G],t[I]||(H=(w[m.id2name(I)]||{}).anchor,r.idRegex.x.test(H)||(H="x"),A.push(H+I),C.push(H+I),B[H]||(B[H]=1,k.pushUnique(D,H)));if(!C.length){I=H="";for(var J in w)if(r.attrRegex.test(J))if("x"===J.charAt(0)){if(!H||+J.substr(5)<+H.substr(5))H=J}else if(!I||+J.substr(5)<+I.substr(5))I=J;H=H?m.name2id(H):"x";I=I?m.name2id(I):"y";D.push(H);x.push(I);A.push(H+I)}};F.plot=function(w,D,C,x){var A=w._fullLayout,B=A._subplots.cartesian,t=w.calcdata,G;if(!Array.isArray(D))for(D=
[],G=0;G<t.length;G++)D.push(G);for(G=0;G<B.length;G++){for(var H=B[G],I=A._plots[H],J=[],L,E=0;E<t.length;E++){var K=t[E],N=K[0].trace;if(N.xaxis+N.yaxis===H){if(-1!==D.indexOf(N.index)||N.carpet)L&&L[0].trace.xaxis+L[0].trace.yaxis===H&&-1!==["tonextx","tonexty","tonext"].indexOf(N.fill)&&-1===J.indexOf(L)&&J.push(L),J.push(K);L=K}}n(w,I,J,C,x)}};F.clean=function(w,D,C,x){var A=x._plots||{};w=D._plots||{};C=x._subplots||{};var B;if(x._hasOnlyLargeSploms&&!D._hasOnlyLargeSploms)for(B in A){var t=
A[B];t.plotgroup&&t.plotgroup.remove()}t=x._has&&x._has("gl");var G=D._has&&D._has("gl");if(t&&!G)for(B in A)t=A[B],t._scene&&t._scene.destroy();if(C.xaxis&&C.yaxis)for(A=m.listIds({_fullLayout:x}),B=0;B<A.length;B++)t=A[B],D[m.id2name(t)]||x._infolayer.selectAll(".g-"+t+"title").remove();B=x._has&&x._has("cartesian");D=D._has&&D._has("cartesian");if(B&&!D)a(x._cartesianlayer.selectAll(".subplot"),x),x._defs.selectAll(".axesclip").remove(),delete x._axisConstraintGroups;else if(C.cartesian)for(B=
0;B<C.cartesian.length;B++)D=C.cartesian[B],w[D]||(x._cartesianlayer.selectAll("."+D+",."+D+"-x,."+D+"-y").remove(),f(D,x))};F.drawFramework=function(w){var D=w._fullLayout,C=p(w);C=D._cartesianlayer.selectAll(".subplot").data(C,String);C.enter().append("g").attr("class",function(x){return"subplot "+x[0]});C.order();C.exit().call(a,D);C.each(function(x){x=x[0];var A=D._plots[x];A.plotgroup=d.select(this);h(w,A);A.draglayer=v(D._draggers,"g",x)})};F.rangePlot=function(w,D,C){h(w,D);n(w,D,C);c.style(w)};
F.toSVG=function(w){var D=w._fullLayout._glimages,C=d.select(w).selectAll(".svg-container");C.filter(function(x,A){return A===C.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var x=this.toDataURL("image/png");D.append("svg:image").attr({xmlns:u.svg,"xlink:href":x,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})};F.updateFx=b("./graph_interact").updateFx},{"../../components/drawing":637,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../registry":880,
"../get_data":834,"../plots":860,"./attributes":795,"./axis_ids":800,"./constants":803,"./graph_interact":806,"./layout_attributes":811,"./layout_defaults":812,"./transition_axes":821,d3:169}],811:[function(b,y,F){F=b("../font_attributes");var q=b("../../components/color/attributes"),n=b("../../components/drawing/attributes").dash,p=b("../../lib/extend").extendFlat,h=b("../../plot_api/plot_template").templatedArray;b("../../constants/docs");b("../../constants/docs");var a=b("../../constants/numerical").ONEDAY;
b=b("./constants");var f=b.HOUR_PATTERN,d=b.WEEKDAY_PATTERN;y.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:q.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:F({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],
dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",
values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),editType:"plot"},matches:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"calc"},rangebreaks:h("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},
bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,f,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",
min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],
dflt:"instant",editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:q.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",
dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:p({},n,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:F({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",
values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",
dflt:"",editType:"ticks"},tickformatstops:h("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:q.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",
min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:q.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:q.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:q.defaultLine,editType:"ticks"},
dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",
min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:"trace;category ascending;category descending;array;total ascending;total descending;min ascending;min descending;max ascending;max descending;sum ascending;sum descending;mean ascending;mean descending;median ascending;median descending".split(";"),dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",
editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:F({editType:"ticks"})}}},{"../../components/color/attributes":614,"../../components/drawing/attributes":636,"../../constants/docs":719,"../../constants/numerical":724,"../../lib/extend":739,"../../plot_api/plot_template":787,"../font_attributes":825,"./constants":803}],812:[function(b,y,F){function q(D,C,x){Array.isArray(D[C])?
D[C].push(x):D[C]=[x]}var n=b("../../lib"),p=b("../../components/color"),h=b("../../components/fx/helpers").isUnifiedHover,a=b("../../components/fx/hovermode_defaults"),f=b("../../plot_api/plot_template"),d=b("../layout_attributes"),l=b("./layout_attributes"),k=b("./type_defaults"),c=b("./axis_defaults"),e=b("./constraints").handleConstraintDefaults,g=b("./position_defaults");F=b("./axis_ids");var m=F.id2name,r=F.name2id,u=b("./constants").AX_ID_PATTERN;b=b("../../registry");var v=b.traceIs,w=b.getComponentMethod;
y.exports=function(D,C,x){function A(){ma._traceIndices=(I[ka]||[]).map(function(ob){return ob._expandedIndex});ma._annIndices=[];ma._shapeIndices=[];ma._imgIndices=[];ma._subplotsWith=[];ma._counterAxes=[];ma._name=ma._attr=ka;ma._id=ra}function B(ob,ib){return n.coerce(ha,ma,l,ob,ib)}function t(ob,ib){return n.coerce2(ha,ma,l,ob,ib)}function G(ob,ib){ob="x"===ob?da:ca;for(var Pa=[],sb=0;sb<ob.length;sb++){var tb=ob[sb];tb===ib||(D[tb]||{}).overlaying||Pa.push(r(tb))}return Pa}function H(){var ob=
ha.matches;u.test(ob)&&-1===la.indexOf(ob)&&(pa[ob]=ha.type,qa=Object.keys(pa))}var I={},J={},L={},E={},K={},N={},O={},Q={},P={},T={},V,aa;for(V=0;V<x.length;V++){var ba=x[V];if(v(ba,"cartesian")||v(ba,"gl2d")){if(ba.xaxis){var Y=m(ba.xaxis);q(I,Y,ba)}else if(ba.xaxes)for(aa=0;aa<ba.xaxes.length;aa++)q(I,m(ba.xaxes[aa]),ba);if(ba.yaxis){var ea=m(ba.yaxis);q(I,ea,ba)}else if(ba.yaxes)for(aa=0;aa<ba.yaxes.length;aa++)q(I,m(ba.yaxes[aa]),ba);"funnel"===ba.type?"h"===ba.orientation?(Y&&(J[Y]=!0),ea&&
(O[ea]=!0)):ea&&(L[ea]=!0):"image"===ba.type?(ea&&(Q[ea]=!0),Y&&(Q[Y]=!0)):(ea&&(K[ea]=!0,N[ea]=!0),(!v(ba,"carpet")||"carpet"===ba.type&&!ba._cheater)&&Y&&(E[Y]=!0));"carpet"===ba.type&&ba._cheater&&Y&&(J[Y]=!0);v(ba,"2dMap")&&(P[Y]=!0,P[ea]=!0);v(ba,"oriented")&&(T["h"===ba.orientation?ea:Y]=!0)}}aa=C._subplots;V=aa.xaxis;Y=aa.yaxis;var da=n.simpleMap(V,m),ca=n.simpleMap(Y,m);aa=da.concat(ca);ba=p.background;V.length&&Y.length&&(ba=n.coerce(D,C,d,"plot_bgcolor"));ba=p.combine(ba,C.paper_bgcolor);
Y={x:Y,y:V};var la=Y.x.concat(Y.y),pa={},qa=[];ea=a(D,C,x);var oa=h(ea);for(V=0;V<aa.length;V++){var ka=aa[V];var ra=r(ka);x=ka.charAt(0);n.isPlainObject(D[ka])||(D[ka]={});var ha=D[ka];var ma=f.newContainer(C,ka,x+"axis");A();var wa={letter:x,font:C.font,outerTicks:P[ka],showGrid:!T[ka],data:I[ka]||[],bgColor:ba,calendar:C.calendar,automargin:!0,visibleDflt:"x"===x&&!E[ka]&&J[ka]||"y"===x&&!K[ka]&&L[ka],reverseDflt:"y"===x&&(!N[ka]&&O[ka]||Q[ka]),splomStash:((C._splomAxes||{})[x]||{})[ra]};B("uirevision",
C.uirevision);k(ha,ma,B,wa);c(ha,ma,B,wa,C);wa=oa&&x===ea.charAt(0);var na=t("spikecolor",oa?ma.color:void 0),ya=t("spikethickness",oa?1.5:void 0),Fa=t("spikedash",oa?"dot":void 0),Ha=t("spikemode",oa?"across":void 0),eb=t("spikesnap",oa?"hovered data":void 0);B("showspikes",!!wa||!!na||!!ya||!!Fa||!!Ha||!!eb)||(delete ma.spikecolor,delete ma.spikethickness,delete ma.spikedash,delete ma.spikemode,delete ma.spikesnap);g(ha,ma,B,{letter:x,counterAxes:Y[x],overlayableAxes:G(x,ka),grid:C.grid});B("title.standoff");
H();ma._input=ha}for(V=0;V<qa.length;)ra=qa[V++],ka=m(ra),x=ka.charAt(0),n.isPlainObject(D[ka])||(D[ka]={}),ha=D[ka],ma=f.newContainer(C,ka,x+"axis"),A(),J={letter:x,font:C.font,outerTicks:P[ka],showGrid:!T[ka],data:[],bgColor:ba,calendar:C.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,splomStash:((C._splomAxes||{})[x]||{})[ra]},B("uirevision",C.uirevision),ma.type=pa[ra]||"linear",c(ha,ma,B,J,C),g(ha,ma,B,{letter:x,counterAxes:Y[x],overlayableAxes:G(x,ka),grid:C.grid}),B("fixedrange"),H(),
ma._input=ha;P=w("rangeslider","handleDefaults");T=w("rangeselector","handleDefaults");for(V=0;V<da.length;V++)ka=da[V],ha=D[ka],ma=C[ka],P(D,C,ka),"date"===ma.type&&T(ha,ma,C,ca,ma.calendar),B("fixedrange");for(V=0;V<ca.length;V++)ka=ca[V],ha=D[ka],ma=C[ka],P=C[m(ma.anchor)],P=w("rangeslider","isVisible")(P),B("fixedrange",P);P=C._axisConstraintGroups=[];T=C._axisMatchGroups=[];J=la.concat(qa);aa=aa.concat(n.simpleMap(qa,m));for(V=0;V<aa.length;V++)ka=aa[V],x=ka.charAt(0),ha=D[ka],ma=C[ka],L="y"===
x&&!ha.hasOwnProperty("scaleanchor")&&Q[ka]?ma.anchor:void 0,E=!ha.hasOwnProperty("constrain")&&Q[ka]?"domain":void 0,e(ha,ma,B,{allAxisIds:J,layoutOut:C,scaleanchorDflt:L,constrainDflt:E});for(V=0;V<T.length;V++){Q=T[V];J=aa=null;for(ra in Q)ma=C[m(ra)],ma.matches||(aa=ma.range,J=ma.autorange);if(null===aa||null===J)for(ra in Q){ma=C[m(ra)];aa=ma.range;J=ma.autorange;break}for(ra in Q)ma=C[m(ra)],ma.matches&&(ma.range=aa.slice(),ma.autorange=J),ma._matchGroup=Q;if(P.length)for(ra in Q)for(aa=0;aa<
P.length;aa++){Q=P[aa];for(var hb in Q)ra===hb&&(n.warn("Axis "+hb+" is set with both a *scaleanchor* and *matches* constraint; ignoring the scale constraint."),delete Q[hb],2>Object.keys(Q).length&&P.splice(aa,1))}}}},{"../../components/color":615,"../../components/fx/helpers":651,"../../components/fx/hovermode_defaults":654,"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880,"../layout_attributes":851,"./axis_defaults":799,"./axis_ids":800,"./constants":803,"./constraints":804,
"./layout_attributes":811,"./position_defaults":814,"./type_defaults":822}],813:[function(b,y,F){var q=b("tinycolor2").mix,n=b("../../components/color/attributes").lightFraction,p=b("../../lib");y.exports=function(h,a,f,d){function l(g,m){return p.coerce2(h,a,d.attributes,g,m)}d=d||{};var k=d.dfltColor,c=l("linecolor",k),e=l("linewidth");f("showline",d.showLine||!!c||!!e)||(delete a.linecolor,delete a.linewidth);c=q(k,d.bgColor,d.blend||n).toRgbString();c=l("gridcolor",c);e=l("gridwidth");f("showgrid",
d.showGrid||!!c||!!e)||(delete a.gridcolor,delete a.gridwidth);d.noZeroLine||(k=l("zerolinecolor",k),c=l("zerolinewidth"),f("zeroline",d.showGrid||!!k||!!c)||(delete a.zerolinecolor,delete a.zerolinewidth))}},{"../../components/color/attributes":614,"../../lib":749,tinycolor2:548}],814:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../../lib");y.exports=function(p,h,a,f){var d=f.counterAxes||[],l=f.overlayableAxes||[],k=f.letter;f=f.grid;if(f){var c=f._domains[k][f._axisMap[h._id]];var e=f._anchors[h._id];
if(c){var g=f[k+"side"].split(" ")[0];var m=f.domain[k]["right"===g||"top"===g?1:0]}}c=c||[0,1];e=e||(q(p.position)?"free":d[0]||"free");g=g||("x"===k?"bottom":"left");m=m||0;"free"===n.coerce(p,h,{anchor:{valType:"enumerated",values:["free"].concat(d),dflt:e}},"anchor")&&a("position",m);n.coerce(p,h,{side:{valType:"enumerated",values:"x"===k?["bottom","top"]:["left","right"],dflt:g}},"side");d=!1;l.length&&(d=n.coerce(p,h,{overlaying:{valType:"enumerated",values:[!1].concat(l),dflt:!1}},"overlaying"));
d||(l=a("domain",c),l[0]>l[1]-1/4096&&(h.domain=c),n.noneOrAll(p.domain,h.domain,c));a("layer");return h}},{"../../lib":749,"fast-isnumeric":241}],815:[function(b,y,F){var q=b("../../constants/alignment").FROM_BL;y.exports=function(n,p,h){void 0===h&&(h=q[n.constraintoward||"center"]);var a=[n.r2l(n.range[0]),n.r2l(n.range[1])];h=a[0]+(a[1]-a[0])*h;n.range=n._input.range=[n.l2r(h+(a[0]-h)*p),n.l2r(h+(a[1]-h)*p)]}},{"../../constants/alignment":717}],816:[function(b,y,F){function q(da,ca,la,pa,qa,oa,
ka){var ra=ca._hoverdata,ha=-1<ca._fullLayout.clickmode.indexOf("event"),ma=[],wa;if(ra&&Array.isArray(ra)&&!0!==ra[0].hoverOnBox){a(da,ca,oa);la=d(ca,la,pa,qa);ra=ra[0];pa=-1;qa=[];var na;for(na=0;na<la.length;na++){var ya=la[na];if(ra.fullData._expandedIndex===ya.cd[0].trace._expandedIndex){if(!0===ra.hoverOnBox)break;void 0!==ra.pointNumber?pa=ra.pointNumber:void 0!==ra.binNumber&&(pa=ra.binNumber,qa=ra.pointNumbers);break}}ya={pointNumber:pa,pointNumbers:qa,searchInfo:ya};if(0<ya.pointNumbers.length)a:{pa=
[];for(ra=0;ra<la.length;ra++)qa=la[ra],qa.cd[0].trace.selectedpoints&&0<qa.cd[0].trace.selectedpoints.length&&pa.push(qa);if(1===pa.length&&(ra=pa[0]===ya.searchInfo)&&(pa=ya.searchInfo.cd[0].trace,pa.selectedpoints.length===ya.pointNumbers.length)){for(ra=0;ra<ya.pointNumbers.length;ra++)if(0>pa.selectedpoints.indexOf(ya.pointNumbers[ra])){ra=!1;break a}ra=!0;break a}ra=!1}else{a:{for(pa=ra=0;pa<la.length;pa++)if(qa=la[pa],qa=qa.cd[0].trace,qa.selectedpoints){if(1<qa.selectedpoints.length){ra=!1;
break a}ra+=qa.selectedpoints.length;if(1<ra){ra=!1;break a}}ra=1===ra}ra=ra&&(wa=l(ya))}if(ra){ka&&ka.remove();for(wa=0;wa<la.length;wa++)ka=la[wa],ka._module.selectPoints(ka,!1);k(ca,la);f(oa);ha&&ca.emit("plotly_deselect",null)}else{da=da.shiftKey&&(void 0!==wa?wa:l(ya));da={pointNumber:ya.pointNumber,searchInfo:ya.searchInfo,subtract:da};wa=oa.selectionDefs.concat([da]);ya=h(wa);for(wa=0;wa<la.length;wa++)if(ra=la[wa]._module.selectPoints(la[wa],ya),ra=e(ra,la[wa]),ma.length)for(pa=0;pa<ra.length;pa++)ma.push(ra[pa]);
else ma=ra;ma={points:ma};k(ca,la,ma);da&&oa&&oa.selectionDefs.push(da);ka&&(la=oa.mergedPolygons,da=B(oa.dragmode),G(g(la,da),ka,oa));ha&&ca.emit("plotly_selected",ma)}}}function n(da){return"pointNumber"in da&&"searchInfo"in da}function p(da){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ca,la,pa,qa){return qa.cd[0].trace._expandedIndex===da.searchInfo.cd[0].trace._expandedIndex&&pa===da.pointNumber},isRect:!1,degenerate:!1,subtract:da.subtract}}function h(da){for(var ca=[],la=n(da[0])?
0:da[0][0][0],pa=la,qa=n(da[0])?0:da[0][0][1],oa=qa,ka=0;ka<da.length;ka++)if(n(da[ka]))ca.push(p(da[ka]));else{var ra=L.tester(da[ka]);ra.subtract=da[ka].subtract;ca.push(ra);la=Math.min(la,ra.xmin);pa=Math.max(pa,ra.xmax);qa=Math.min(qa,ra.ymin);oa=Math.max(oa,ra.ymax)}return{xmin:la,xmax:pa,ymin:qa,ymax:oa,pts:[],contains:function(ha,ma,wa,na){for(var ya=!1,Fa=0;Fa<ca.length;Fa++)ca[Fa].contains(ha,ma,wa,na)&&(ya=!1===ca[Fa].subtract);return ya},isRect:!1,degenerate:!1}}function a(da,ca,la){ca._fullLayout._drawing=
!1;var pa=ca._fullLayout,qa=la.plotinfo,oa=la.dragmode,ka=pa._lastSelectedSubplot&&pa._lastSelectedSubplot===qa.id;da=(da.shiftKey||da.altKey)&&!(A(oa)&&B(oa));ka&&da&&qa.selection&&qa.selection.selectionDefs&&!la.selectionDefs?(la.selectionDefs=qa.selection.selectionDefs,la.mergedPolygons=qa.selection.mergedPolygons):da&&qa.selection||f(la);ka||(aa(ca),pa._lastSelectedSubplot=qa.id)}function f(da){var ca=da.dragmode,la=da.plotinfo,pa=da.gd;0<=pa._fullLayout._activeShapeIndex&&pa._fullLayout._deactivateShape(pa);
A(ca)&&(ca=pa._fullLayout._zoomlayer.selectAll(".select-outline-"+la.id))&&pa._fullLayout._drawing&&((ca=I(ca,da))&&r.call("_guiRelayout",pa,{shapes:ca}),pa._fullLayout._drawing=!1);la.selection={};la.selection.selectionDefs=da.selectionDefs=[];la.selection.mergedPolygons=da.mergedPolygons=[]}function d(da,ca,la,pa){function qa(na,ya,Fa,Ha){return{_module:na,cd:ya,xaxis:Fa,yaxis:Ha}}var oa=[],ka=ca.map(function(na){return na._id}),ra=la.map(function(na){return na._id}),ha;for(ha=0;ha<da.calcdata.length;ha++){var ma=
da.calcdata[ha];var wa=ma[0].trace;!0===wa.visible&&wa._module&&wa._module.selectPoints&&(!pa||wa.subplot!==pa&&wa.geo!==pa?"splom"===wa.type&&wa._xaxes[ka[0]]&&wa._yaxes[ra[0]]?(ma=qa(wa._module,ma,ca[0],la[0]),ma.scene=da._fullLayout._splomScenes[wa.uid],oa.push(ma)):"sankey"===wa.type?(wa=qa(wa._module,ma,ca[0],la[0]),oa.push(wa)):-1!==ka.indexOf(wa.xaxis)&&-1!==ra.indexOf(wa.yaxis)&&oa.push(qa(wa._module,ma,K(da,wa.xaxis),K(da,wa.yaxis))):oa.push(qa(wa._module,ma,ca[0],la[0])))}return oa}function l(da){var ca=
da.searchInfo.cd[0].trace,la=da.pointNumber;da=da.pointNumbers;la=0<da.length?da[0]:la;return ca.selectedpoints?-1<ca.selectedpoints.indexOf(la):!1}function k(da,ca,la){var pa;for(pa=0;pa<ca.length;pa++){var qa=ca[pa].cd[0].trace._fullInput;var oa=da._fullLayout._tracePreGUI[qa.uid]||{};void 0===oa.selectedpoints&&(oa.selectedpoints=qa._input.selectedpoints||null)}if(la){la=la.points||[];for(pa=0;pa<ca.length;pa++){var ka=ca[pa].cd[0].trace;ka._input.selectedpoints=ka._fullInput.selectedpoints=[];
ka._fullInput!==ka&&(ka.selectedpoints=[])}for(pa=0;pa<la.length;pa++){qa=la[pa];oa=qa.data;var ra=qa.fullData;qa.pointIndices?([].push.apply(oa.selectedpoints,qa.pointIndices),ka._fullInput!==ka&&[].push.apply(ra.selectedpoints,qa.pointIndices)):(oa.selectedpoints.push(qa.pointIndex),ka._fullInput!==ka&&ra.selectedpoints.push(qa.pointIndex))}}else for(pa=0;pa<ca.length;pa++)ka=ca[pa].cd[0].trace,delete ka.selectedpoints,delete ka._input.selectedpoints,ka._fullInput!==ka&&delete ka._fullInput.selectedpoints;
qa=!1;for(pa=0;pa<ca.length;pa++)if(oa=ca[pa],la=oa.cd,ka=la[0].trace,r.traceIs(ka,"regl")&&(qa=!0),ka=oa._module,ka=ka.styleOnSelect||ka.style)ka(da,la,la[0].node3),la[0].nodeRangePlot3&&ka(da,la,la[0].nodeRangePlot3);qa&&(N(da),O(da))}function c(da,ca,la){if(la)return da=m.difference({regions:da,inverted:!1},{regions:[ca],inverted:!1}),da.regions;da=m.union({regions:da,inverted:!1},{regions:[ca],inverted:!1});return da.regions}function e(da,ca){if(Array.isArray(da)){var la=ca.cd;ca=ca.cd[0].trace;
for(var pa=0;pa<da.length;pa++)da[pa]=D(da[pa],ca,la)}return da}function g(da,ca){for(var la=[],pa=0;pa<da.length;pa++){la[pa]=[];for(var qa=0;qa<da[pa].length;qa++){la[pa][qa]=[];la[pa][qa][0]=qa?"L":"M";for(var oa=0;oa<da[pa][qa].length;oa++)la[pa][qa].push(da[pa][qa][oa])}ca||la[pa].push(["Z",la[pa][0][1],la[pa][0][2]])}return la}var m=b("polybooljs"),r=b("../../registry"),u=b("../../components/drawing").dashStyle,v=b("../../components/color"),w=b("../../components/fx"),D=b("../../components/fx/helpers").makeEventData;
F=b("../../components/dragelement/helpers");var C=F.freeMode,x=F.rectMode,A=F.drawMode,B=F.openMode,t=F.selectMode,G=b("../../components/shapes/draw_newshape/display_outlines"),H=b("../../components/shapes/draw_newshape/helpers").handleEllipse,I=b("../../components/shapes/draw_newshape/newshapes"),J=b("../../lib"),L=b("../../lib/polygon"),E=b("../../lib/throttle"),K=b("./axis_ids").getFromId,N=b("../../lib/clear_gl_canvases"),O=b("../../plot_api/subroutines").redrawReglTraces,Q=b("./constants"),P=
Q.MINSELECT,T=L.filter,V=L.tester,aa=b("./handle_outline").clearSelect;b=b("./helpers");var ba=b.p2r,Y=b.axValue,ea=b.getTransform;y.exports={prepSelect:function(da,ca,la,pa,qa){function oa(yb,Hb){return yb-Hb}var ka=C(qa),ra=x(qa),ha=B(qa),ma=A(qa),wa=t(qa),na="drawcircle"===qa,ya="drawline"===qa||na,Fa=pa.gd,Ha=Fa._fullLayout,eb=Ha._zoomlayer,hb=pa.element.getBoundingClientRect(),ob=pa.plotinfo,ib=ea(ob),Pa=ca-hb.left,sb=la-hb.top,tb=Pa,Aa=sb;ca="M"+Pa+","+sb;var Ka=pa.xaxes[0]._length,Qa=pa.yaxes[0]._length,
Xa=pa.xaxes.concat(pa.yaxes),pb=da.altKey&&!(A(qa)&&ha),db,Ia,Ua,$a,xa,Ga,Va;a(da,Fa,pa);ka&&(db=T([[Pa,sb]],Q.BENDPX));var gb=eb.selectAll("path.select-outline-"+ob.id).data(ma?[0]:[1,2]);da=Ha.newshape;gb.enter().append("path").attr("class",function(yb){return"select-outline select-outline-"+yb+" select-outline-"+ob.id}).style(ma?{opacity:da.opacity/2,fill:ha?void 0:da.fillcolor,stroke:da.line.color,"stroke-dasharray":u(da.line.dash,da.line.width),"stroke-width":da.line.width+"px"}:{}).attr("fill-rule",
da.fillrule).classed("cursor-move",ma?!0:!1).attr("transform",ib).attr("d",ca+"Z");var Ma=eb.append("path").attr("class","zoombox-corners").style({fill:v.background,stroke:v.defaultLine,"stroke-width":1}).attr("transform",ib).attr("d","M0,0Z"),cb=Ha._uid+Q.SELECTID,Sa=[],lb=d(Fa,pa.xaxes,pa.yaxes,pa.subplot);var rb=ob.fillRangeItems?ob.fillRangeItems:ra?function(yb,Hb){yb=yb.range={};for(xa=0;xa<Xa.length;xa++){var Vb=Xa[xa],lc=Vb._id.charAt(0);yb[Vb._id]=[ba(Vb,Hb[lc+"min"]),ba(Vb,Hb[lc+"max"])].sort(oa)}}:
function(yb,Hb,Vb){yb=yb.lassoPoints={};for(xa=0;xa<Xa.length;xa++)Hb=Xa[xa],yb[Hb._id]=Vb.filtered.map(Y(Hb))};pa.moveFn=function(yb,Hb){tb=Math.max(0,Math.min(Ka,yb+Pa));Aa=Math.max(0,Math.min(Qa,Hb+sb));yb=Math.abs(tb-Pa);Hb=Math.abs(Aa-sb);if(ra){if(wa){var Vb=Ha.selectdirection;Vb="any"===Vb?Hb<Math.min(.6*yb,P)?"h":yb<Math.min(.6*Hb,P)?"v":"d":Vb;switch(Vb){case "h":var lc=na?Qa/2:0;var Ac=Qa;break;case "v":lc=na?Ka/2:0,Ac=Ka}}if(ma)switch(Ha.newshape.drawdirection){case "vertical":Vb="h";lc=
na?Qa/2:0;Ac=Qa;break;case "horizontal":Vb="v";lc=na?Ka/2:0;Ac=Ka;break;case "ortho":yb<Hb?(Vb="h",lc=sb,Ac=Aa):(Vb="v",lc=Pa,Ac=tb);break;default:Vb="d"}"h"===Vb?($a=ya?H(na,[tb,lc],[tb,Ac]):[[Pa,lc],[Pa,Ac],[tb,Ac],[tb,lc]],$a.xmin=ya?tb:Math.min(Pa,tb),$a.xmax=ya?tb:Math.max(Pa,tb),$a.ymin=Math.min(lc,Ac),$a.ymax=Math.max(lc,Ac),Ma.attr("d","M"+$a.xmin+","+(sb-P)+"h-4v"+2*P+"h4ZM"+($a.xmax-1)+","+(sb-P)+"h4v"+2*P+"h-4Z")):"v"===Vb?($a=ya?H(na,[lc,Aa],[Ac,Aa]):[[lc,sb],[lc,Aa],[Ac,Aa],[Ac,sb]],
$a.xmin=Math.min(lc,Ac),$a.xmax=Math.max(lc,Ac),$a.ymin=ya?Aa:Math.min(sb,Aa),$a.ymax=ya?Aa:Math.max(sb,Aa),Ma.attr("d","M"+(Pa-P)+","+$a.ymin+"v-4h"+2*P+"v4ZM"+(Pa-P)+","+($a.ymax-1)+"v4h"+2*P+"v-4Z")):"d"===Vb&&($a=ya?H(na,[Pa,sb],[tb,Aa]):[[Pa,sb],[Pa,Aa],[tb,Aa],[tb,sb]],$a.xmin=Math.min(Pa,tb),$a.xmax=Math.max(Pa,tb),$a.ymin=Math.min(sb,Aa),$a.ymax=Math.max(sb,Aa),Ma.attr("d","M0,0Z"))}else ka&&(db.addPt([tb,Aa]),$a=db.filtered);pa.selectionDefs&&pa.selectionDefs.length?(Ua=c(pa.mergedPolygons,
$a,pb),$a.subtract=pb,Ia=h(pa.selectionDefs.concat([$a]))):(Ua=[$a],Ia=V($a));G(g(Ua,ha),gb,pa);wa&&E.throttle(cb,Q.SELECTDELAY,function(){Sa=[];var ad=[];for(xa=0;xa<lb.length;xa++){Ga=lb[xa];var Nc=Ga._module.selectPoints(Ga,Ia);ad.push(Nc);Nc=e(Nc,Ga);if(Sa.length)for(var ed=0;ed<Nc.length;ed++)Sa.push(Nc[ed]);else Sa=Nc}Va={points:Sa};k(Fa,lb,Va);rb(Va,$a,db);pa.gd.emit("plotly_selecting",Va)})};pa.clickFn=function(yb,Hb){Ma.remove();if(0<=Fa._fullLayout._activeShapeIndex)Fa._fullLayout._deactivateShape(Fa);
else if(!ma){var Vb=Ha.clickmode;E.done(cb).then(function(){E.clear(cb);if(2===yb){gb.remove();for(xa=0;xa<lb.length;xa++)Ga=lb[xa],Ga._module.selectPoints(Ga,!1);k(Fa,lb);f(pa);Fa.emit("plotly_deselect",null)}else-1<Vb.indexOf("select")&&q(Hb,Fa,pa.xaxes,pa.yaxes,pa.subplot,pa,gb),"event"===Vb&&Fa.emit("plotly_selected",void 0);w.click(Fa,Hb)}).catch(J.error)}};pa.doneFn=function(){Ma.remove();E.done(cb).then(function(){E.clear(cb);pa.gd.emit("plotly_selected",Va);$a&&pa.selectionDefs&&($a.subtract=
pb,pa.selectionDefs.push($a),pa.mergedPolygons.length=0,[].push.apply(pa.mergedPolygons,Ua));pa.doneFnCompleted&&pa.doneFnCompleted(Sa)}).catch(J.error);ma&&f(pa)}},clearSelect:aa,clearSelectionsCache:f,selectOnClick:q}},{"../../components/color":615,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../components/fx/helpers":651,"../../components/shapes/draw_newshape/display_outlines":700,"../../components/shapes/draw_newshape/helpers":701,"../../components/shapes/draw_newshape/newshapes":702,
"../../lib":749,"../../lib/clear_gl_canvases":733,"../../lib/polygon":761,"../../lib/throttle":774,"../../plot_api/subroutines":788,"../../registry":880,"./axis_ids":800,"./constants":803,"./handle_outline":807,"./helpers":808,polybooljs:491}],817:[function(b,y,F){function q(t){return Math.pow(10,t)}var n=b("d3"),p=b("d3-time-format").utcFormat,h=b("fast-isnumeric"),a=b("../../lib"),f=a.cleanNumber,d=a.ms2DateTime,l=a.dateTime2ms,k=a.ensureNumber,c=a.isArrayOrTypedArray;F=b("../../constants/numerical");
var e=F.FP_SAFE,g=F.BADNUM,m=F.LOG_CLIP,r=F.ONEWEEK,u=F.ONEDAY,v=F.ONEHOUR,w=F.ONEMIN,D=F.ONESEC,C=b("./axis_ids"),x=b("./constants"),A=x.HOUR_PATTERN,B=x.WEEKDAY_PATTERN;y.exports=function(t,G){function H(ba,Y){return 0<ba?Math.log(ba)/Math.LN10:0>=ba&&Y&&t.range&&2===t.range.length?(ba=t.range[0],Y=t.range[1],.5*(ba+Y-2*m*Math.abs(ba-Y))):g}function I(ba,Y,ea,da){if((da||{}).msUTC&&h(ba))return+ba;Y=l(ba,ea||t.calendar);if(Y===g)if(h(ba))ba=+ba,Y=Math.floor(10*a.mod(ba+.05,1)),Y=l(new Date(Math.round(ba-
Y/10)))+Y/10;else return g;return Y}function J(ba,Y,ea){return d(ba,Y,ea||t.calendar)}function L(ba){return t._categories[Math.round(ba)]}function E(ba){if(null!==ba&&void 0!==ba){void 0===t._categoriesMap&&(t._categoriesMap={});if(void 0!==t._categoriesMap[ba])return t._categoriesMap[ba];t._categories.push("number"===typeof ba?String(ba):ba);var Y=t._categories.length-1;return t._categoriesMap[ba]=Y}return g}function K(ba){if(t._categoriesMap)return t._categoriesMap[ba]}function N(ba){var Y=K(ba);
if(void 0!==Y)return Y;if(h(ba))return+ba}G=G||{};var O=t._id||"x",Q=O.charAt(0),P=function(ba){return h(ba)?n.round(t._b+t._m*ba,2):g},T=function(ba){return(ba-t._b)/t._m};if(t.rangebreaks){var V="y"===Q;P=function(ba){if(!h(ba))return g;var Y=t._rangebreaks.length;if(!Y)return n.round(t._b+t._m*ba,2);var ea=V;t.range[0]>t.range[1]&&(ea=!ea);ea=ea?-1:1;for(var da=ea*ba,ca=0,la=0;la<Y;la++){var pa=ea*t._rangebreaks[la].min,qa=ea*t._rangebreaks[la].max;if(da<pa)break;if(da>qa)ca=la+1;else{ca=da<(pa+
qa)/2?la:la+1;break}}Y=t._B[ca]||0;return isFinite(Y)?n.round(Y+t._m2*ba,2):0};T=function(ba){var Y=t._rangebreaks.length;if(!Y)return(ba-t._b)/t._m;for(var ea=0,da=0;da<Y&&!(ba<t._rangebreaks[da].pmin);da++)ba>t._rangebreaks[da].pmax&&(ea=da+1);return(ba-t._B[ea])/t._m2}}t.c2l="log"===t.type?H:k;t.l2c="log"===t.type?q:k;t.l2p=P;t.p2l=T;t.c2p="log"===t.type?function(ba,Y){return P(H(ba,Y))}:P;t.p2c="log"===t.type?function(ba){return q(T(ba))}:T;-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=t.d2c=
t.r2c=t.d2l=t.r2l=f,t.c2d=t.c2r=t.l2d=t.l2r=k,t.d2p=t.r2p=function(ba){return t.l2p(f(ba))},t.p2d=t.p2r=T,t.cleanPos=k):"log"===t.type?(t.d2r=t.d2l=function(ba,Y){return H(f(ba),Y)},t.r2d=t.r2c=function(ba){return q(f(ba))},t.d2c=t.r2l=f,t.c2d=t.l2r=k,t.c2r=H,t.l2d=q,t.d2p=function(ba,Y){return t.l2p(t.d2r(ba,Y))},t.p2d=function(ba){return q(T(ba))},t.r2p=function(ba){return t.l2p(f(ba))},t.p2r=T,t.cleanPos=k):"date"===t.type?(t.d2r=t.r2d=a.identity,t.d2c=t.r2c=t.d2l=t.r2l=I,t.c2d=t.c2r=t.l2d=t.l2r=
J,t.d2p=t.r2p=function(ba,Y,ea){return t.l2p(I(ba,0,ea))},t.p2d=t.p2r=function(ba,Y,ea){return J(T(ba),Y,ea)},t.cleanPos=function(ba){return a.cleanDate(ba,g,t.calendar)}):"category"===t.type?(t.d2c=t.d2l=E,t.r2d=t.c2d=t.l2d=L,t.d2r=t.d2l_noadd=N,t.r2c=function(ba){ba=N(ba);return void 0!==ba?ba:t.fraction2r(.5)},t.l2r=t.c2r=k,t.r2l=N,t.d2p=function(ba){return t.l2p(t.r2c(ba))},t.p2d=function(ba){return L(T(ba))},t.r2p=t.d2p,t.p2r=T,t.cleanPos=function(ba){return"string"===typeof ba&&""!==ba?ba:k(ba)}):
"multicategory"===t.type&&(t.r2d=t.c2d=t.l2d=L,t.d2r=t.d2l_noadd=N,t.r2c=function(ba){ba=N(ba);return void 0!==ba?ba:t.fraction2r(.5)},t.r2c_just_indices=K,t.l2r=t.c2r=k,t.r2l=N,t.d2p=function(ba){return t.l2p(t.r2c(ba))},t.p2d=function(ba){return L(T(ba))},t.r2p=t.d2p,t.p2r=T,t.cleanPos=function(ba){return Array.isArray(ba)||"string"===typeof ba&&""!==ba?ba:k(ba)},t.setupMultiCategory=function(ba){var Y=t._traceIndices,ea,da=G._axisMatchGroups;if(da&&da.length&&0===t._categories.length)for(ea=0;ea<
da.length;ea++){var ca=da[ea];if(ca[O])for(var la in ca)la!==O&&(ca=G[C.id2name(la)],Y=Y.concat(ca._traceIndices))}var pa=[[0,{}],[0,{}]];da=[];for(ea=0;ea<Y.length;ea++)if(ca=ba[Y[ea]],Q in ca){la=ca[Q];var qa=ca._length||a.minRowLength(la);if(c(la[0])&&c(la[1]))for(ca=0;ca<qa;ca++){var oa=la[0][ca],ka=la[1][ca];null!==oa&&void 0!==oa&&null!==ka&&void 0!==ka&&(da.push([oa,ka]),oa in pa[0][1]||(pa[0][1][oa]=pa[0][0]++),ka in pa[1][1]||(pa[1][1][ka]=pa[1][0]++))}}da.sort(function(ra,ha){var ma=pa[0][1];
if(ma=ma[ra[0]]-ma[ha[0]])return ma;ma=pa[1][1];return ma[ra[1]]-ma[ha[1]]});for(ea=0;ea<da.length;ea++)E(da[ea])});t.fraction2r=function(ba){var Y=t.r2l(t.range[0]),ea=t.r2l(t.range[1]);return t.l2r(Y+ba*(ea-Y))};t.r2fraction=function(ba){var Y=t.r2l(t.range[0]),ea=t.r2l(t.range[1]);return(t.r2l(ba)-Y)/(ea-Y)};t.cleanRange=function(ba,Y){Y||(Y={});ba||(ba="range");var ea=a.nestedProperty(t,ba).get();var da="date"===t.type?a.dfltRange(t.calendar):"y"===Q?x.DFLTRANGEY:Y.dfltRange||x.DFLTRANGEX;da=
da.slice();if("tozero"===t.rangemode||"nonnegative"===t.rangemode)da[0]=0;if(ea&&2===ea.length)for("date"!==t.type||t.autorange||(ea[0]=a.cleanDate(ea[0],g,t.calendar),ea[1]=a.cleanDate(ea[1],g,t.calendar)),Y=0;2>Y;Y++)if("date"===t.type){if(!a.isDateTime(ea[Y],t.calendar)){t[ba]=da;break}if(t.r2l(ea[0])===t.r2l(ea[1])){ba=a.constrain(t.r2l(ea[0]),a.MIN_MS+1E3,a.MAX_MS-1E3);ea[0]=t.l2r(ba-1E3);ea[1]=t.l2r(ba+1E3);break}}else{if(!h(ea[Y]))if(h(ea[1-Y]))ea[Y]=ea[1-Y]*(Y?10:.1);else{t[ba]=da;break}ea[Y]<
-e?ea[Y]=-e:ea[Y]>e&&(ea[Y]=e);if(ea[0]===ea[1]){var ca=Math.max(1,Math.abs(1E-6*ea[0]));ea[0]-=ca;ea[1]+=ca}}else a.nestedProperty(t,ba).set(da)};t.setScale=function(ba){var Y=G._size;if(t.overlaying){var ea=C.getFromId({_fullLayout:G},t.overlaying);t.domain=ea.domain}ea=ba&&t._r?"_r":"range";var da=t.calendar;t.cleanRange(ea);ba=t.r2l(t[ea][0],da);ea=t.r2l(t[ea][1],da);(da="y"===Q)?(t._offset=Y.t+(1-t.domain[1])*Y.h,t._length=Y.h*(t.domain[1]-t.domain[0]),t._m=t._length/(ba-ea),t._b=-t._m*ea):(t._offset=
Y.l+t.domain[0]*Y.w,t._length=Y.w*(t.domain[1]-t.domain[0]),t._m=t._length/(ea-ba),t._b=-t._m*ba);t._rangebreaks=[];t._lBreaks=0;t._m2=0;t._B=[];if(t.rangebreaks&&(t._rangebreaks=t.locateBreaks(Math.min(ba,ea),Math.max(ba,ea)),t._rangebreaks.length)){for(Y=0;Y<t._rangebreaks.length;Y++){var ca=t._rangebreaks[Y];t._lBreaks+=Math.abs(ca.max-ca.min)}Y=da;ba>ea&&(Y=!Y);Y&&t._rangebreaks.reverse();var la=Y?-1:1;t._m2=la*t._length/(Math.abs(ea-ba)-t._lBreaks);t._B.push(-t._m2*(da?ea:ba));for(Y=0;Y<t._rangebreaks.length;Y++)ca=
t._rangebreaks[Y],t._B.push(t._B[t._B.length-1]-la*t._m2*(ca.max-ca.min));for(Y=0;Y<t._rangebreaks.length;Y++)ca=t._rangebreaks[Y],ca.pmin=P(ca.min),ca.pmax=P(ca.max)}if(!isFinite(t._m)||!isFinite(t._b)||0>t._length)throw G._replotting=!1,Error("Something went wrong with axis scaling");};t.maskBreaks=function(ba){for(var Y=t.rangebreaks||[],ea,da,ca,la,pa=0;pa<Y.length;pa++){var qa=Y[pa];if(qa.enabled)if(qa.bounds){var oa=qa.pattern;ea=a.simpleMap(qa.bounds,oa?f:t.d2c);da=ea[0];ea=ea[1];switch(oa){case B:la=
new Date(ba);ca=la.getUTCDay();da>ea&&(ea+=7,ca<da&&(ca+=7));break;case A:la=new Date(ba);ca=la.getUTCHours();qa=la.getUTCMinutes();oa=la.getUTCSeconds();la=la.getUTCMilliseconds();ca+=qa/60+oa/3600+la/36E5;da>ea&&(ea+=24,ca<da&&(ca+=24));break;case "":ca=ba}if(ca>=da&&ca<ea)return g}else for(oa=a.simpleMap(qa.values,t.d2c).sort(a.sorterAsc),la=0;la<oa.length;la++)if(da=oa[la],ea=da+qa.dvalue,ba>=da&&ba<ea)return g}return ba};t.locateBreaks=function(ba,Y){var ea,da=[];if(!t.rangebreaks)return da;
var ca=t.rangebreaks.slice().sort(function(wa,na){return wa.pattern===B&&na.pattern===A?-1:na.pattern===B&&wa.pattern===A?1:0}),la=function(wa,na){wa=a.constrain(wa,ba,Y);na=a.constrain(na,ba,Y);if(wa!==na){for(var ya=!0,Fa=0;Fa<da.length;Fa++){var Ha=da[Fa];wa<Ha.max&&na>=Ha.min&&(wa<Ha.min&&(Ha.min=wa),na>Ha.max&&(Ha.max=na),ya=!1)}ya&&da.push({min:wa,max:na})}};for(ea=0;ea<ca.length;ea++){var pa=ca[ea];if(pa.enabled)if(pa.bounds){var qa=ba,oa=Y;pa.pattern&&(qa=Math.floor(qa));var ka=a.simpleMap(pa.bounds,
pa.pattern?f:t.r2l);var ra=ka[0];var ha=ka[1];var ma=new Date(qa);switch(pa.pattern){case B:pa=r;ha=((ha<ra?7:0)+(ha-ra))*u;qa+=ra*u-(ma.getUTCDay()*u+ma.getUTCHours()*v+ma.getUTCMinutes()*w+ma.getUTCSeconds()*D+ma.getUTCMilliseconds());break;case A:pa=u;ha=((ha<ra?24:0)+(ha-ra))*v;qa+=ra*v-(ma.getUTCHours()*v+ma.getUTCMinutes()*w+ma.getUTCSeconds()*D+ma.getUTCMilliseconds());break;default:qa=Math.min(ka[0],ka[1]),oa=Math.max(ka[0],ka[1]),ha=pa=oa-qa}for(ra=qa;ra<oa;ra+=pa)la(ra,ra+ha)}else for(oa=
a.simpleMap(pa.values,t.d2c),qa=0;qa<oa.length;qa++)ra=oa[qa],ha=ra+pa.dvalue,la(ra,ha)}da.sort(function(wa,na){return wa.min-na.min});return da};t.makeCalcdata=function(ba,Y,ea){var da;var ca=t.type;var la="date"===ca&&ba[Y+"calendar"];if(Y in ba){Y=ba[Y];ba=ba._length||a.minRowLength(Y);if(a.isTypedArray(Y)&&("linear"===ca||"log"===ca)){if(ba===Y.length)return Y;if(Y.subarray)return Y.subarray(0,ba)}if("multicategory"===ca){ea=Array(ba);for(la=0;la<ba;la++)ea[la]=K([(Y[0]||[])[la],(Y[1]||[])[la]]);
return ea}ca=Array(ba);for(da=0;da<ba;da++)ca[da]=t.d2c(Y[da],0,la,ea)}else for(ea=(Y+"0"in ba)?t.d2c(ba[Y+"0"],0,la):0,la=ba["d"+Y]?Number(ba["d"+Y]):1,Y=ba[{x:"y",y:"x"}[Y]],ba=ba._length||Y.length,ca=Array(ba),da=0;da<ba;da++)ca[da]=ea+da*la;if(t.rangebreaks)for(da=0;da<ba;da++)ca[da]=t.maskBreaks(ca[da]);return ca};t.isValidRange=function(ba){return Array.isArray(ba)&&2===ba.length&&h(t.r2l(ba[0]))&&h(t.r2l(ba[1]))};t.isPtWithinRange=function(ba,Y){ba=t.c2l(ba[Q],null,Y);Y=t.r2l(t.range[0]);var ea=
t.r2l(t.range[1]);return Y<ea?Y<=ba&&ba<=ea:ea<=ba&&ba<=Y};t._emptyCategories=function(){t._categories=[];t._categoriesMap={}};t.clearCalc=function(){var ba=G._axisMatchGroups;if(ba&&ba.length){for(var Y=!1,ea=0;ea<ba.length;ea++){var da=ba[ea];if(da[O]){Y=!0;ea=ba=null;for(var ca in da)if(da=G[C.id2name(ca)],da._categories){ba=da._categories;ea=da._categoriesMap;break}ba&&ea?(t._categories=ba,t._categoriesMap=ea):t._emptyCategories();break}}Y||t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(Y=
0;Y<t._initialCategories.length;Y++)E(t._initialCategories[Y])};t.sortByInitialCategories=function(){var ba=[];t._emptyCategories();if(t._initialCategories)for(var Y=0;Y<t._initialCategories.length;Y++)E(t._initialCategories[Y]);ba=ba.concat(t._traceIndices);Y=t._matchGroup;for(var ea in Y)O!==ea&&(Y=G[C.id2name(ea)],Y._categories=t._categories,Y._categoriesMap=t._categoriesMap,ba=ba.concat(Y._traceIndices));return ba};var aa=G._d3locale;"date"===t.type&&(t._dateFormat=aa?aa.timeFormat:p,t._extraFormat=
G._extraFormat);t._separators=G.separators;t._numFormat=aa?aa.numberFormat:n.format;delete t._minDtick;delete t._forceTick0}},{"../../constants/numerical":724,"../../lib":749,"./axis_ids":800,"./constants":803,d3:169,"d3-time-format":166,"fast-isnumeric":241}],818:[function(b,y,F){function q(f){var d=["showexponent","showtickprefix","showticksuffix"].filter(function(l){return void 0!==f[l]});if(d.every(function(l){return f[l]===f[d[0]]})||1===d.length)return f[d[0]]}function n(f,d){p.coerce(f,d,h.tickformatstops,
"enabled",void 0)&&(p.coerce(f,d,h.tickformatstops,"dtickrange",void 0),p.coerce(f,d,h.tickformatstops,"value",void 0))}var p=b("../../lib"),h=b("./layout_attributes"),a=b("../array_container_defaults");y.exports=function(f,d,l,k,c,e){if(!e||1===e.pass){var g=q(f);l("tickprefix")&&l("showtickprefix",g);l("ticksuffix",c.tickSuffixDflt)&&l("showticksuffix",g)}e&&2!==e.pass||(e=q(f),l("tickprefix")&&l("showtickprefix",e),l("ticksuffix",c.tickSuffixDflt)&&l("showticksuffix",e),l("showticklabels")&&(c=
c.font||{},g=d.color,p.coerceFont(l,"tickfont",{family:c.family,size:c.size,color:g&&g!==h.color.dflt?g:c.color}),l("tickangle"),"category"!==k&&(c=l("tickformat"),a(f,d,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:n}),d.tickformatstops.length||delete d.tickformatstops,c||"date"===k||(l("showexponent",e),l("exponentformat"),l("separatethousands")))))}},{"../../lib":749,"../array_container_defaults":793,"./layout_attributes":811}],819:[function(b,y,F){var q=b("../../lib"),n=b("./layout_attributes");
y.exports=function(p,h,a,f){var d=q.coerce2(p,h,n,"ticklen"),l=q.coerce2(p,h,n,"tickwidth");p=q.coerce2(p,h,n,"tickcolor",h.color);a("ticks",f.outerTicks||d||l||p?"outside":"")||(delete h.ticklen,delete h.tickwidth,delete h.tickcolor)}},{"../../lib":749,"./layout_attributes":811}],820:[function(b,y,F){var q=b("./clean_ticks"),n=b("../../lib").isArrayOrTypedArray;y.exports=function(p,h,a,f){function d(e){var g=p[e];return void 0!==g?g:(h._template||{})[e]}var l=d("tick0"),k=d("dtick"),c=d("tickvals");
c=n(c)?"array":k?"linear":"auto";c=a("tickmode",c);"auto"===c?a("nticks"):"linear"===c?(a=h.dtick=q.dtick(k,f),h.tick0=q.tick0(l,f,h.calendar,a)):"multicategory"!==f&&(void 0===a("tickvals")?h.tickmode="auto":a("ticktext"))}},{"../../lib":749,"./clean_ticks":802}],821:[function(b,y,F){var q=b("d3"),n=b("../../registry"),p=b("../../lib"),h=b("../../components/drawing"),a=b("./axes");y.exports=function(f,d,l,k){function c(x){var A=x.xaxis,B=x.yaxis;r._defs.select("#"+x.clipId+"\x3e rect").call(h.setTranslate,
0,0).call(h.setScale,1,1);x.plot.call(h.setTranslate,A._offset,B._offset).call(h.setScale,1,1);A=x.plot.selectAll(".scatterlayer .trace");A.selectAll(".point").call(h.setPointGroupScale,1,1);A.selectAll(".textpoint").call(h.setTextPointsScale,1,1);A.call(h.hideOutsideRangePoints,x)}function e(){for(var x={},A=0;A<d.length;A++){var B=d[A],t=B.plotinfo.xaxis,G=B.plotinfo.yaxis;B.xr1&&(x[t._name+".range"]=B.xr1.slice());B.yr1&&(x[G._name+".range"]=B.yr1.slice())}u&&u();return n.call("relayout",f,x).then(function(){for(var H=
0;H<d.length;H++)c(d[H].plotinfo)})}function g(){for(var x={},A=0;A<d.length;A++){var B=d[A],t=B.plotinfo.xaxis,G=B.plotinfo.yaxis;B.xr0&&(x[t._name+".range"]=B.xr0.slice());B.yr0&&(x[G._name+".range"]=B.yr0.slice())}return n.call("relayout",f,x).then(function(){for(var H=0;H<d.length;H++)c(d[H].plotinfo)})}function m(){v=Date.now();for(var x=w(Math.min(1,(v-D)/l.duration)),A=0;A<d.length;A++){var B=d[A],t=x,G=B.plotinfo,H=G.xaxis,I=G.yaxis,J=H._length,L=I._length,E=!!B.xr1,K=!!B.yr1,N=[];if(E){var O=
p.simpleMap(B.xr0,H.r2l),Q=p.simpleMap(B.xr1,H.r2l),P=O[1]-O[0],T=Q[1]-Q[0];N[0]=(O[0]*(1-t)+t*Q[0]-O[0])/(O[1]-O[0])*J;N[2]=J*(1-t+t*T/P);H.range[0]=H.l2r(O[0]*(1-t)+t*Q[0]);H.range[1]=H.l2r(O[1]*(1-t)+t*Q[1])}else N[0]=0,N[2]=J;K?(O=p.simpleMap(B.yr0,I.r2l),B=p.simpleMap(B.yr1,I.r2l),Q=O[1]-O[0],P=B[1]-B[0],N[1]=(O[1]*(1-t)+t*B[1]-O[1])/(O[0]-O[1])*L,N[3]=L*(1-t+t*P/Q),I.range[0]=H.l2r(O[0]*(1-t)+t*B[0]),I.range[1]=I.l2r(O[1]*(1-t)+t*B[1])):(N[1]=0,N[3]=L);a.drawOne(f,H,{skipTitle:!0});a.drawOne(f,
I,{skipTitle:!0});a.redrawComponents(f,[H._id,I._id]);t=E?J/N[2]:1;B=K?L/N[3]:1;H=H._offset-(E?N[0]/N[2]*J:0);I=I._offset-(K?N[1]/N[3]*L:0);G.clipRect.call(h.setTranslate,E?N[0]:0,K?N[1]:0).call(h.setScale,1/t,1/B);G.plot.call(h.setTranslate,H,I).call(h.setScale,t,B);h.setPointGroupScale(G.zoomScalePts,1/t,1/B);h.setTextPointsScale(G.zoomScaleTxt,1/t,1/B)}v-D>l.duration?(e(),C=window.cancelAnimationFrame(m)):C=window.requestAnimationFrame(m)}var r=f._fullLayout;if(0===d.length)a.redrawComponents(f);
else{var u;k&&(u=k());var v,w=q.ease(l.easing);f._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(C);C=null;return g()});var D=Date.now();var C=window.requestAnimationFrame(m);return Promise.resolve()}}},{"../../components/drawing":637,"../../lib":749,"../../registry":880,"./axes":797,d3:169}],822:[function(b,y,F){function q(h,a){var f={v:"x",h:"y"}[h.orientation||"v"],d=n(h,"box-violin"),l=n(h._fullInput||{},"candlestick");return d&&!l&&a===f&&void 0===h[f]&&void 0===
h[f+"0"]}var n=b("../../registry").traceIs,p=b("./axis_autotype");y.exports=function(h,a,f,d){if("-"===f("type",(d.splomStash||{}).type)){f=d.data;if("-"===a.type){d=a._id;var l=d.charAt(0);-1!==d.indexOf("scene")&&(d=l);b:{for(var k=d,c=0;c<f.length;c++){var e=f[c];if("splom"===e.type&&0<e._length&&(e["_"+l+"axes"]||{})[k]||(e[l+"axis"]||l)===k&&(q(e,l)||(e[l]||[]).length||e[l+"0"])){var g=e;break b}}g=void 0}if(g)if("histogram"===g.type&&l==={v:"y",h:"x"}[g.orientation||"v"])a.type="linear";else if(e=
l+"calendar",k=g[e],c={noMultiCategory:!n(g,"cartesian")||n(g,"noMultiCategory")},"box"===g.type&&g._hasPreCompStats&&l==={h:"x",v:"y"}[g.orientation||"v"]&&(c.noMultiCategory=!0),q(g,l)){var m={v:"x",h:"y"}[g.orientation||"v"],r=[];for(g=0;g<f.length;g++){var u=f[g];n(u,"box-violin")&&(u[l+"axis"]||l)===d&&(void 0!==u[m]?r.push(u[m][0]):void 0!==u.name?r.push(u.name):r.push("text"),u[e]!==k&&(k=void 0))}a.type=p(r,k,c)}else"splom"===g.type?(f=g.dimensions[g._axesDim[d]],f.visible&&(a.type=p(f.values,
k,c))):a.type=p(g[l]||[g[l+"0"]],k,c)}"-"===a.type?a.type="linear":h.type=a.type}}},{"../../registry":880,"./axis_autotype":798}],823:[function(b,y,F){function q(d,l,k){var c=!1;if("data"===l.type)d=d._fullData[null!==l.traces?l.traces[0]:0];else if("layout"===l.type)d=d._fullLayout;else return!1;d=f.nestedProperty(d,l.prop).get();k=k[l.type]=k[l.type]||{};k.hasOwnProperty(l.prop)&&k[l.prop]!==d&&(c=!0);k[l.prop]=d;return{changed:c,value:d}}function n(d,l){var k=[];d=l[0];var c={};if("string"===typeof d)c[d]=
l[1];else if(f.isPlainObject(d))c=d;else return k;h(c,function(e,g,m){k.push({type:"layout",prop:e,value:m})},"",0);return k}function p(d,l){var k=[];var c=l[0];var e=l[1];var g=l[2];l={};if("string"===typeof c)l[c]=e;else if(f.isPlainObject(c))l=c,void 0===g&&(g=e);else return k;void 0===g&&(g=null);h(l,function(m,r,u){if(Array.isArray(u)){u=u.slice();var v=Math.min(u.length,d.data.length);g&&(v=Math.min(v,g.length));r=[];for(var w=0;w<v;w++)r[w]=g?g[w]:w}else r=g?g.slice():null;if(null===r)Array.isArray(u)&&
(u=u[0]);else if(Array.isArray(r)){if(!Array.isArray(u))for(v=u,u=[],w=0;w<r.length;w++)u[w]=v;u.length=Math.min(r.length,u.length)}k.push({type:"data",prop:m,traces:r,value:u})},"",0);return k}function h(d,l,k,c){Object.keys(d).forEach(function(e){var g=d[e];if("_"!==e[0]){var m=k+(0<c?".":"")+e;f.isPlainObject(g)?h(g,l,m,c+1):l(m,e,g)}})}var a=b("../registry"),f=b("../lib");F.manageCommandObserver=function(d,l,k,c){var e={},g=!0;l&&l._commandObserver&&(e=l._commandObserver);e.cache||(e.cache={});
e.lookupTable={};var m=F.hasSimpleAPICommandBindings(d,k,e.lookupTable);if(l&&l._commandObserver){if(m)return e;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,e}if(m){q(d,m,e.cache);e.check=function(){if(g){var u=q(d,m,e.cache);u.changed&&c&&void 0!==e.lookupTable[u.value]&&(e.disable(),Promise.resolve(c({value:u.value,type:m.type,prop:m.prop,traces:m.traces,index:e.lookupTable[u.value]})).then(e.enable,e.enable));return u.changed}};var r="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");
for(k=0;k<r.length;k++)d._internalOn(r[k],e.check);e.remove=function(){for(var u=0;u<r.length;u++)d._removeInternalListener(r[u],e.check)}}else f.log("Unable to automatically bind plot updates to API command"),e.lookupTable={},e.remove=function(){};e.disable=function(){g=!1};e.enable=function(){g=!0};l&&(l._commandObserver=e);return e};F.hasSimpleAPICommandBindings=function(d,l,k){var c,e=l.length;for(c=0;c<e;c++){var g=l[c];var m=g.method;g=g.args;Array.isArray(g)||(g=[]);if(!m)return!1;g=F.computeAPICommandBindings(d,
m,g);if(1!==g.length)return!1;if(u){m=g[0];if(m.type!==u.type||m.prop!==u.prop)return!1;if(Array.isArray(u.traces))if(Array.isArray(m.traces)){m.traces.sort();for(var r=0;r<u.traces.length;r++)if(u.traces[r]!==m.traces[r])return!1}else return!1;else if(m.prop!==u.prop)return!1}else{var u=g[0];Array.isArray(u.traces)&&u.traces.sort()}m=g[0];m=m.value;if(Array.isArray(m))if(1===m.length)m=m[0];else return!1;k&&(k[m]=c)}return u};F.executeAPICommand=function(d,l,k){if("skip"===l)return Promise.resolve();
var c=a.apiMethodRegistry[l];d=[d];Array.isArray(k)||(k=[]);for(var e=0;e<k.length;e++)d.push(k[e]);return c.apply(null,d).catch(function(g){f.warn("API call to Plotly."+l+" rejected.",g);return Promise.reject(g)})};F.computeAPICommandBindings=function(d,l,k){Array.isArray(k)||(k=[]);switch(l){case "restyle":d=p(d,k);break;case "relayout":d=n(d,k);break;case "update":d=p(d,[k[0],k[2]]).concat(n(d,[k[1]]));break;case "animate":d=k;d=Array.isArray(d[0])&&1===d[0].length&&-1!==["string","number"].indexOf(typeof d[0][0])?
[{type:"layout",prop:"_currentFrame",value:d[0][0].toString()}]:[];break;default:d=[]}return d}},{"../lib":749,"../registry":880}],824:[function(b,y,F){var q=b("../lib/extend").extendFlat;F.attributes=function(n,p){n=n||{};p={valType:"info_array",editType:n.editType,items:[{valType:"number",min:0,max:1,editType:n.editType},{valType:"number",min:0,max:1,editType:n.editType}],dflt:[0,1]};p={x:q({},p,{}),y:q({},p,{}),editType:n.editType};n.noGridCell||(p.row={valType:"integer",min:0,dflt:0,editType:n.editType},
p.column={valType:"integer",min:0,dflt:0,editType:n.editType});return p};F.defaults=function(n,p,h,a){var f=a&&a.x||[0,1];a=a&&a.y||[0,1];if(p=p.grid){var d=h("domain.column");void 0!==d&&(d<p.columns?f=p._domains.x[d]:delete n.domain.column);d=h("domain.row");void 0!==d&&(d<p.rows?a=p._domains.y[d]:delete n.domain.row)}p=h("domain.x",f);h=h("domain.y",a);p[0]<p[1]||(n.domain.x=f.slice());h[0]<h[1]||(n.domain.y=a.slice())}},{"../lib/extend":739}],825:[function(b,y,F){y.exports=function(q){var n=q.editType,
p=q.colorEditType;void 0===p&&(p=n);n={family:{valType:"string",noBlank:!0,strict:!0,editType:n},size:{valType:"number",min:1,editType:n},color:{valType:"color",editType:p},editType:n};q.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0);return n}},{}],826:[function(b,y,F){y.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],827:[function(b,
y,F){F.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator",
"albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"};F.axesNames=["lonaxis","lataxis"];F.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};F.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};F.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,
-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,
-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};F.clipPad=.001;F.precision=.1;F.landColor="#F0DC82";F.waterColor="#3399FF";F.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};F.sphereSVG={type:"Sphere"};F.fillLayers={ocean:1,land:1,lakes:1};F.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};F.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");F.layersForChoropleth=
"bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");F.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],828:[function(b,y,F){function q(t){this.id=t.id;this.graphDiv=t.graphDiv;this.container=t.container;this.topojsonURL=t.topojsonURL;this.isStatic=t.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.scope=this.projection=
this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths={};this.dataPoints={};this.bgRect=this.clipRect=this.clipDef=null;this.makeFramework()}function n(t){var G=t.projection.type,H=a.geo[C.projNames[G]](),I=t._isClipped?C.lonaxisSpan[G]/2:null;t=["center","rotate","parallels","clipExtent"];G=function(E){return E?H:[]};for(var J=0;J<t.length;J++){var L=t[J];"function"!==typeof H[L]&&(H[L]=G)}H.isLonLatOverEdges=function(E){if(null===
H(E))return!0;if(I){var K=H.rotate();return a.geo.distance(E,[-K[0],-K[1]])>I*Math.PI/180}return!1};H.getPath=function(){return a.geo.path().projection(H)};H.getBounds=function(E){return H.getPath().bounds(E)};H.fitExtent=function(E,K){var N=E[1][0]-E[0][0],O=E[1][1]-E[0][1],Q=H.clipExtent&&H.clipExtent();H.scale(150).translate([0,0]);Q&&H.clipExtent(null);var P=H.getBounds(K);K=Math.min(N/(P[1][0]-P[0][0]),O/(P[1][1]-P[0][1]));N=+E[0][0]+(N-K*(P[1][0]+P[0][0]))/2;E=+E[0][1]+(O-K*(P[1][1]+P[0][1]))/
2;Q&&H.clipExtent(Q);return H.scale(150*K).translate([N,E])};H.precision(C.precision);I&&H.clipAngle(I-C.clipPad);return H}function p(t,G,H){var I=G[t],J=C.scopeDefaults[G.scope];if("lonaxis"===t){var L=J.lonaxisRange;var E=J.lataxisRange;var K=function(O,Q){return[O,Q]}}else"lataxis"===t&&(L=J.lataxisRange,E=J.lonaxisRange,K=function(O,Q){return[Q,O]});I={type:"linear",range:[L[0],L[1]-1E-6],tick0:I.tick0,dtick:I.dtick};g.setConvert(I,H);H=g.calcTicks(I);G.isScoped||"lonaxis"!==t||H.pop();t=H.length;
G=Array(t);for(I=0;I<t;I++){J=H[I].x;L=G[I]=[];for(var N=E[0];N<E[1]+2.5;N+=2.5)L.push(K(J,N))}return{type:"MultiLineString",coordinates:G}}function h(t,G){var H=C.clipPad,I=t[0]+H;t=t[1]-H;var J=G[0]+H;G=G[1]-H;0<I&&0>t&&(t+=360);H=(t-I)/4;return{type:"Polygon",coordinates:[[[I,J],[I,G],[I+H,G],[I+2*H,G],[I+3*H,G],[t,G],[t,J],[t-H,J],[t-2*H,J],[t-3*H,J],[I,J]]]}}var a=b("d3"),f=b("../../registry"),d=b("../../lib"),l=b("../../components/color"),k=b("../../components/drawing"),c=b("../../components/fx"),
e=b("../plots"),g=b("../cartesian/axes"),m=b("../cartesian/autorange").getAutoRange,r=b("../../components/dragelement"),u=b("../cartesian/select").prepSelect,v=b("../cartesian/select").clearSelect,w=b("../cartesian/select").selectOnClick,D=b("./zoom"),C=b("./constants"),x=b("../../lib/geo_location_utils"),A=b("../../lib/topojson_utils"),B=b("topojson-client").feature;b("./projections")(a);b=q.prototype;y.exports=function(t){return new q(t)};b.plot=function(t,G,H){var I=this,J=G[this.id],L=[],E=!1,
K;for(K in C.layerNameToAdjective)if("frame"!==K&&J["show"+K]){E=!0;break}for(K=0;K<t.length;K++)if(t[0][0].trace.locationmode){E=!0;break}E&&(J=A.getTopojsonName(J),null===I.topojson||J!==I.topojsonName)&&(I.topojsonName=J,void 0===PlotlyGeoAssets.topojson[I.topojsonName]&&L.push(I.fetchTopojson()));L=L.concat(x.fetchTraceGeoData(t));H.push(new Promise(function(N,O){Promise.all(L).then(function(){I.topojson=PlotlyGeoAssets.topojson[I.topojsonName];I.update(t,G);N()}).catch(O)}))};b.fetchTopojson=
function(){var t=this,G=A.getTopojsonPath(t.topojsonURL,t.topojsonName);return new Promise(function(H,I){a.json(G,function(J,L){if(J)return 404===J.status?I(Error(["plotly.js could not find topojson file at",G,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):I(Error(["unexpected error while fetching topojson file at",G].join(" ")));PlotlyGeoAssets.topojson[t.topojsonName]=L;H()})})};b.update=function(t,G){var H=G[this.id];this.hasChoropleth=!1;for(var I=0;I<t.length;I++){var J=
t[I],L=J[0].trace;"choropleth"===L.type&&(this.hasChoropleth=!0);!0===L.visible&&0<L._length&&L._module.calcGeoJSON(J,G)}this.updateProjection(t,G)||(this.viewInitial&&this.scope===H.scope||this.saveViewInitial(H),this.scope=H.scope,this.updateBaseLayers(G,H),this.updateDims(G,H),this.updateFx(G,H),e.generalUpdatePerTraceModule(this.graphDiv,this,t,H),t=this.layers.frontplot.select(".scatterlayer"),this.dataPoints.point=t.selectAll(".point"),this.dataPoints.text=t.selectAll("text"),this.dataPaths.line=
t.selectAll(".js-line"),t=this.layers.backplot.select(".choroplethlayer"),this.dataPaths.choropleth=t.selectAll("path"),this.render())};b.updateProjection=function(t,G){t=this.graphDiv;var H=G[this.id],I=G._size,J=H.domain,L=H.projection,E=H.lonaxis,K=H.lataxis,N=E._ax,O=K._ax;G=this.projection=n(H);J=[[I.l+I.w*J.x[0],I.t+I.h*(1-J.y[1])],[I.l+I.w*J.x[1],I.t+I.h*(1-J.y[0])]];I=H.center||{};var Q=L.rotation||{},P=E.range||[],T=K.range||[];H.fitbounds&&(N._length=J[1][0]-J[0][0],O._length=J[1][1]-J[0][1],
N.range=m(t,N),O.range=m(t,O),K=(N.range[0]+N.range[1])/2,E=(O.range[0]+O.range[1])/2,H._isScoped?I={lon:K,lat:E}:H._isClipped?(I={lon:K,lat:E},Q={lon:K,lat:E,roll:Q.roll},T=L.type,P=C.lonaxisSpan[T]/2||180,T=C.lataxisSpan[T]/2||90,P=[K-P,K+P],T=[E-T,E+T]):(I={lon:K,lat:E},Q={lon:K,lat:Q.lat,roll:Q.roll}));G.center([I.lon-Q.lon,I.lat-Q.lat]).rotate([-Q.lon,-Q.lat,Q.roll]).parallels(L.parallels);Q=h(P,T);G.fitExtent(J,Q);J=this.bounds=G.getBounds(Q);K=this.fitScale=G.scale();Q=G.translate();if(!(isFinite(J[0][0])&&
isFinite(J[0][1])&&isFinite(J[1][0])&&isFinite(J[1][1]))||isNaN(Q[0])||isNaN(Q[0])){G=["fitbounds","projection.rotation","center","lonaxis.range","lataxis.range"];H={};for(I=0;I<G.length;I++)H[this.id+"."+G[I]]=null;this.viewInitial=null;d.warn("Invalid geo settings, relayout'ing to default view.");t._promises.push(f.call("relayout",t,H));return"Invalid geo settings, relayout'ing to default view."}H.fitbounds?(t=G.getBounds(h(N.range,O.range)),t=Math.min((J[1][0]-J[0][0])/(t[1][0]-t[0][0]),(J[1][1]-
J[0][1])/(t[1][1]-t[0][1])),isFinite(t)?G.scale(t*K):d.warn("Something went wrong during"+this.id+"fitbounds computations.")):G.scale(L.scale*K);t=this.midPt=[(J[0][0]+J[1][0])/2,(J[0][1]+J[1][1])/2];G.translate([Q[0]+(t[0]-Q[0]),Q[1]+(t[1]-Q[1])]).clipExtent(J);H._isAlbersUsa&&(t=G([I.lon,I.lat]),H=G.translate(),G.translate([H[0]-(t[0]-H[0]),H[1]-(t[1]-H[1])]))};b.updateBaseLayers=function(t,G){function H(N){return"lonaxis"===N||"lataxis"===N}var I=this,J=I.topojson,L=I.layers,E=I.basePaths,K=(this.hasChoropleth?
C.layersForChoropleth:C.layers).filter(function(N){return C.lineLayers[N]||C.fillLayers[N]?G["show"+N]:H(N)?G[N].showgrid:!0});K=I.framework.selectAll(".layer").data(K,String);K.exit().each(function(N){delete L[N];delete E[N];a.select(this).remove()});K.enter().append("g").attr("class",function(N){return"layer "+N}).each(function(N){var O=L[N]=a.select(this);"bg"===N?I.bgRect=O.append("rect").style("pointer-events","all"):H(N)?E[N]=O.append("path").style("fill","none"):"backplot"===N?O.append("g").classed("choroplethlayer",
!0):"frontplot"===N?O.append("g").classed("scatterlayer",!0):C.lineLayers[N]?E[N]=O.append("path").style("fill","none").style("stroke-miterlimit",2):C.fillLayers[N]&&(E[N]=O.append("path").style("stroke","none"))});K.order();K.each(function(N){var O=E[N],Q=C.layerNameToAdjective[N];"frame"===N?O.datum(C.sphereSVG):C.lineLayers[N]||C.fillLayers[N]?O.datum(B(J,J.objects[N])):H(N)&&O.datum(p(N,G,t)).call(l.stroke,G[N].gridcolor).call(k.dashLine,"",G[N].gridwidth);C.lineLayers[N]?O.call(l.stroke,G[Q+
"color"]).call(k.dashLine,"",G[Q+"width"]):C.fillLayers[N]&&O.call(l.fill,G[Q+"color"])})};b.updateDims=function(t,G){var H=this.bounds,I=(G.framewidth||0)/2;t=H[0][0]-I;var J=H[0][1]-I,L=H[1][0]-t+I;H=H[1][1]-J+I;k.setRect(this.clipRect,t,J,L,H);this.bgRect.call(k.setRect,t,J,L,H).call(l.fill,G.bgcolor);this.xaxis._offset=t;this.xaxis._length=L;this.yaxis._offset=J;this.yaxis._length=H};b.updateFx=function(t,G){function H(){var P=J.viewInitial,T={},V;for(V in P)T[J.id+"."+V]=P[V];f.call("_guiRelayout",
L,T);L.emit("plotly_doubleclick",null)}function I(P){return J.projection.invert([P[0]+J.xaxis._offset,P[1]+J.yaxis._offset])}var J=this,L=J.graphDiv,E=J.bgRect,K=t.dragmode,N=t.clickmode;if(!J.isStatic){var O;"select"===K?O=function(P,T){(P.range={})[J.id]=[I([T.xmin,T.ymin]),I([T.xmax,T.ymax])]}:"lasso"===K&&(O=function(P,T,V){(P.lassoPoints={})[J.id]=V.filtered.map(I)});var Q={element:J.bgRect.node(),gd:L,plotinfo:{id:J.id,xaxis:J.xaxis,yaxis:J.yaxis,fillRangeItems:O},xaxes:[J.xaxis],yaxes:[J.yaxis],
subplot:J.id,clickFn:function(P){2===P&&v(L)}};if("pan"===K){if(E.node().onmousedown=null,E.call(D(J,G)),E.on("dblclick.zoom",H),!L._context._scrollZoom.geo)E.on("wheel.zoom",null)}else if("select"===K||"lasso"===K)E.on(".zoom",null),Q.prepFn=function(P,T,V){u(P,T,V,Q,K)},r.init(Q);E.on("mousemove",function(){var P=J.projection.invert(a.mouse(this));if(!P||isNaN(P[0])||isNaN(P[1]))return r.unhover(L,a.event);J.xaxis.p2c=function(){return P[0]};J.yaxis.p2c=function(){return P[1]};c.hover(L,a.event,
J.id)});E.on("mouseout",function(){L._dragging||r.unhover(L,a.event)});E.on("click",function(){"select"!==K&&"lasso"!==K&&(-1<N.indexOf("select")&&w(a.event,L,[J.xaxis],[J.yaxis],J.id,Q),-1<N.indexOf("event")&&c.click(L,a.event))})}};b.makeFramework=function(){var t=this,G=t.graphDiv,H=G._fullLayout,I="clip"+H._uid+t.id;t.clipDef=H._clips.append("clipPath").attr("id",I);t.clipRect=t.clipDef.append("rect");t.framework=a.select(t.container).append("g").attr("class","geo "+t.id).call(k.setClipUrl,I,
G);t.project=function(J){return(J=t.projection(J))?[J[0]-t.xaxis._offset,J[1]-t.yaxis._offset]:[null,null]};t.xaxis={_id:"x",c2p:function(J){return t.project(J)[0]}};t.yaxis={_id:"y",c2p:function(J){return t.project(J)[1]}};t.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};g.setConvert(t.mockAxis,H)};b.saveViewInitial=function(t){var G=t.center||{},H=t.projection,I=H.rotation||{};this.viewInitial={fitbounds:t.fitbounds,"projection.scale":H.scale};d.extendFlat(this.viewInitial,t._isScoped?
{"center.lon":G.lon,"center.lat":G.lat}:t._isClipped?{"projection.rotation.lon":I.lon,"projection.rotation.lat":I.lat}:{"center.lon":G.lon,"center.lat":G.lat,"projection.rotation.lon":I.lon})};b.render=function(){function t(L){return(L=H(L.lonlat))?"translate("+L[0]+","+L[1]+")":null}function G(L){return H.isLonLatOverEdges(L.lonlat)?"none":null}var H=this.projection,I=H.getPath(),J;for(J in this.basePaths)this.basePaths[J].attr("d",I);for(J in this.dataPaths)this.dataPaths[J].attr("d",function(L){return I(L.geojson)});
for(J in this.dataPoints)this.dataPoints[J].attr("display",G).attr("transform",t)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/drawing":637,"../../components/fx":655,"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/topojson_utils":776,"../../registry":880,"../cartesian/autorange":796,"../cartesian/axes":797,"../cartesian/select":816,"../plots":860,"./constants":827,"./projections":832,"./zoom":833,d3:169,"topojson-client":551}],829:[function(b,
y,F){var q=b("../../plots/get_data").getSubplotCalcData;F=b("../../lib").counterRegex;var n=b("./geo");F=F("geo");y.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:F,attrRegex:F,attributes:{geo:{valType:"subplotid",dflt:"geo",editType:"calc"}},layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(p){for(var h=p._fullLayout,a=p.calcdata,f=h._subplots.geo,d=0;d<f.length;d++){var l=f[d],k=q(a,"geo",l),c=h[l]._subplot;c||(c=n({id:l,graphDiv:p,container:h._geolayer.node(),
topojsonURL:p._context.topojsonURL,staticPlot:p._context.staticPlot}),h[l]._subplot=c);c.plot(k,h,p._promises)}},updateFx:function(p){p=p._fullLayout;for(var h=p._subplots.geo,a=0;a<h.length;a++){var f=p[h[a]];f._subplot.updateFx(p,f)}},clean:function(p,h,a,f){p=f._subplots.geo||[];for(a=0;a<p.length;a++){var d=p[a],l=f[d]._subplot;!h[d]&&l&&(l.framework.remove(),l.clipDef.remove())}}}},{"../../lib":749,"../../plots/get_data":834,"./geo":828,"./layout_attributes":830,"./layout_defaults":831}],830:[function(b,
y,F){F=b("../../components/color/attributes");var q=b("../domain").attributes,n=b("./constants");b=b("../../plot_api/edit_types").overrideAll;var p={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:F.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(y.exports=b({domain:q({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations",
"geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(n.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(n.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},
visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:F.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:n.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:n.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:n.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:n.waterColor},
riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:F.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:F.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:F.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:F.background},lonaxis:p,lataxis:p},"plot","from-root")).uirevision=
{valType:"any",editType:"none"}},{"../../components/color/attributes":614,"../../plot_api/edit_types":780,"../domain":824,"./constants":827}],831:[function(b,y,F){function q(l,k,c,e){var g=h(e.fullData,"geo",e.id).map(function(I){return I._expandedIndex});e=c("resolution");var m=c("scope"),r=a.scopeDefaults[m],u=c("projection.type",r.projType),v=k._isAlbersUsa="albers usa"===u;v&&(m=k.scope="usa");var w=k._isScoped="world"!==m,D=k._isConic=-1!==u.indexOf("conic"),C=k._isClipped=!!a.lonaxisSpan[u];
!1===l.visible&&(l=n.extendDeep({},k._template),l.showcoastlines=!1,l.showcountries=!1,l.showframe=!1,l.showlakes=!1,l.showland=!1,l.showocean=!1,l.showrivers=!1,l.showsubunits=!1,l.lonaxis&&(l.lonaxis.showgrid=!1),l.lataxis&&(l.lataxis.showgrid=!1),k._template=l);l=c("visible");for(var x,A=0;A<d.length;A++){var B=d[A];x=[30,10][A];if(w)var t=r[B+"Range"];else{t=a[B+"Span"];t=(t[u]||t["*"])/2;var G=c("projection.rotation."+B.substr(0,3),r.projRotate[A]);t=[G-t,G+t]}t=c(B+".range",t);c(B+".tick0");
c(B+".dtick",x);if(x=c(B+".showgrid",l?void 0:!1))c(B+".gridcolor"),c(B+".gridwidth");k[B]._ax={type:"linear",_id:B.slice(0,3),_traceIndices:g,setScale:n.identity,c2l:n.identity,r2l:n.identity,autorange:!0,range:t.slice(),_m:1,_input:{}}}A=k.lonaxis.range;g=k.lataxis.range;u=A[0];A=A[1];0<u&&0>A&&(A+=360);u=(u+A)/2;if(!v){A=w?r.projRotate:[u,0,0];var H=c("projection.rotation.lon",A[0]);c("projection.rotation.lat",A[1]);c("projection.rotation.roll",A[2]);if(x=c("showcoastlines",!w&&l))c("coastlinecolor"),
c("coastlinewidth");(x=c("showocean",l?void 0:!1))&&c("oceancolor")}v?(H=-96.6,v=38.7):(H=w?u:H,v=(g[0]+g[1])/2);c("center.lon",H);c("center.lat",v);D&&c("projection.parallels",r.projParallels||[0,60]);c("projection.scale");(x=c("showland",l?void 0:!1))&&c("landcolor");(x=c("showlakes",l?void 0:!1))&&c("lakecolor");if(x=c("showrivers",l?void 0:!1))c("rivercolor"),c("riverwidth");if(x=c("showcountries",w&&"usa"!==m&&l))c("countrycolor"),c("countrywidth");if("usa"===m||"north america"===m&&50===e)c("showsubunits",
l),c("subunitcolor"),c("subunitwidth");!w&&(x=c("showframe",l))&&(c("framecolor"),c("framewidth"));c("bgcolor");c("fitbounds")&&(delete k.projection.scale,w?(delete k.center.lon,delete k.center.lat):C?(delete k.center.lon,delete k.center.lat,delete k.projection.rotation.lon,delete k.projection.rotation.lat,delete k.lonaxis.range,delete k.lataxis.range):(delete k.center.lon,delete k.center.lat,delete k.projection.rotation.lon))}var n=b("../../lib"),p=b("../subplot_defaults"),h=b("../get_data").getSubplotData,
a=b("./constants"),f=b("./layout_attributes"),d=a.axesNames;y.exports=function(l,k,c){p(l,k,c,{type:"geo",attributes:f,handleDefaults:q,fullData:c,partition:"y"})}},{"../../lib":749,"../get_data":834,"../subplot_defaults":874,"./constants":827,"./layout_attributes":830}],832:[function(b,y,F){y.exports=function(q){function n(P,T){return{type:"Feature",id:P.id,properties:P.properties,geometry:p(P.geometry,T)}}function p(P,T){if(!P)return null;if("GeometryCollection"===P.type)return{type:"GeometryCollection",
geometries:object.geometries.map(function(aa){return p(aa,T)})};if(!G.hasOwnProperty(P.type))return null;var V=G[P.type];q.geo.stream(P,T(V));return V.result()}function h(){}function a(P){return 1<P?I:-1>P?-I:Math.asin(P)}function f(P){return 1<P?0:-1>P?H:Math.acos(P)}function d(P,T){var V=(2+I)*Math.sin(T);T/=2;for(var aa=0,ba=Infinity;10>aa&&1E-6<Math.abs(ba);aa++)ba=Math.cos(T),T-=ba=(T+Math.sin(T)*(ba+2)-V)/(2*ba*(1+ba));return[2/Math.sqrt(H*(4+H))*P*(1+Math.cos(T)),2*Math.sqrt(H/(4+H))*Math.sin(T)]}
function l(P,T){function V(aa,ba){aa=N(aa/T,ba);aa[0]*=P;return aa}2>arguments.length&&(T=P);if(1===T)return N;if(Infinity===T)return k;V.invert=function(aa,ba){aa=N.invert(aa/P,ba);aa[0]*=T;return aa};return V}function k(P,T){return[P*Math.cos(T)/Math.cos(T/=2),2*Math.sin(T)]}function c(P,T){return[3*P/(2*H)*Math.sqrt(H*H/3-T*T),T]}function e(P,T){return[P,1.25*Math.log(Math.tan(H/4+.4*T))]}function g(P){return function(T){var V=P*Math.sin(T),aa=30,ba;do T-=ba=(T+Math.sin(T)-V)/(1+Math.cos(T));while(1E-6<
Math.abs(ba)&&0<--aa);return T/2}}function m(P,T){var V=T*T,aa=V*V;return[P*(.8707-.131979*V+aa*(-.013791+aa*(.003971*V-.001529*aa))),T*(1.007226+V*(.015085+aa*(-.044475+.028874*V-.005916*aa)))]}function r(P,T){var V=Math.min(18,36*Math.abs(T)/H),aa=Math.floor(V);V-=aa;var ba=(ca=Q[aa])[0],Y=ca[1],ea=(ca=Q[++aa])[0],da=ca[1];aa=(ca=Q[Math.min(19,++aa)])[0];ca=ca[1];var ca;return[P*(ea+V*(aa-ba)/2+V*V*(aa-2*ea+ba)/2),(0<T?I:-I)*(da+V*(ca-Y)/2+V*V*(ca-2*da+Y)/2)]}function u(P,T){return[P*Math.cos(T),
T]}function v(P,T){var V=Math.cos(T);var aa=(aa=f(V*Math.cos(P/=2)))?aa/Math.sin(aa):1;return[2*V*Math.sin(P)*aa,Math.sin(T)*aa]}function w(P,T){var V=v(P,T);return[(V[0]+P/I)/2,(V[1]+T)/2]}q.geo.project=function(P,T){T=T.stream;if(!T)throw Error("not yet supported");return(P&&D.hasOwnProperty(P.type)?D[P.type]:p)(P,T)};var D={Feature:n,FeatureCollection:function(P,T){return{type:"FeatureCollection",features:P.features.map(function(V){return n(V,T)})}}},C=[],x=[],A={point:function(P,T){C.push([P,
T])},result:function(){var P=C.length?2>C.length?{type:"Point",coordinates:C[0]}:{type:"MultiPoint",coordinates:C}:null;C=[];return P}},B={lineStart:h,point:function(P,T){C.push([P,T])},lineEnd:function(){C.length&&(x.push(C),C=[])},result:function(){var P=x.length?2>x.length?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x}:null;x=[];return P}},t={polygonStart:h,lineStart:h,point:function(P,T){C.push([P,T])},lineEnd:function(){var P=C.length;if(P){do C.push(C[0].slice());
while(4>++P);x.push(C);C=[]}},polygonEnd:h,result:function(){if(!x.length)return null;var P=[],T=[];x.forEach(function(V){if(4>(ba=V.length))var aa=!1;else{aa=0;for(var ba,Y=V[ba-1][1]*V[0][0]-V[ba-1][0]*V[0][1];++aa<ba;)Y+=V[aa-1][1]*V[aa][0]-V[aa-1][0]*V[aa][1];aa=0>=Y}aa?P.push([V]):T.push(V)});T.forEach(function(V){var aa=V[0];P.some(function(ba){for(var Y=ba[0],ea=aa[0],da=aa[1],ca=!1,la=0,pa=Y.length,qa=pa-1;la<pa;qa=la++){var oa=Y[la],ka=oa[0];oa=oa[1];var ra=Y[qa];qa=ra[0];ra=ra[1];oa>da^
ra>da&&ea<(qa-ka)*(da-oa)/(ra-oa)+ka&&(ca=!ca)}if(ca)return ba.push(V),!0})||P.push([V])});x=[];return P.length?1<P.length?{type:"MultiPolygon",coordinates:P}:{type:"Polygon",coordinates:P[0]}:null}},G={Point:A,MultiPoint:A,LineString:B,MultiLineString:B,Polygon:t,MultiPolygon:t,Sphere:t},H=Math.PI,I=H/2,J=H/180,L=180/H,E=q.geo.projection,K=q.geo.projectionMutator;q.geo.interrupt=function(P){function T(ca,la){for(var pa=0>la?-1:1,qa=ba[+(0>la)],oa=0,ka=qa.length-1;oa<ka&&ca>qa[oa][2][0];++oa);ca=
P(ca-qa[oa][1][0],la);ca[0]+=P(qa[oa][1][0],pa*la>pa*qa[oa][0][1]?qa[oa][0][1]:la)[0];return ca}function V(){Y=ba.map(function(ca){return ca.map(function(la){var pa=P(la[0][0],la[0][1])[0],qa=P(la[2][0],la[2][1])[0],oa=P(la[1][0],la[0][1])[1];la=P(la[1][0],la[1][1])[1];if(oa>la){var ka=oa;oa=la;la=ka}return[[pa,oa],[qa,la]]})})}function aa(ca,la){for(var pa=-1,qa=ca.length,oa=ca[0],ka,ra,ha,ma=[];++pa<qa;){ka=ca[pa];ra=(ka[0]-oa[0])/la;ha=(ka[1]-oa[1])/la;for(var wa=0;wa<la;++wa)ma.push([oa[0]+wa*
ra,oa[1]+wa*ha]);oa=ka}ma.push(ka);return ma}var ba=[[[[-H,0],[0,I],[H,0]]],[[[-H,0],[0,-I],[H,0]]]],Y;P.invert&&(T.invert=function(ca,la){for(var pa=Y[+(0>la)],qa=ba[+(0>la)],oa=0,ka=pa.length;oa<ka;++oa){var ra=pa[oa];if(ra[0][0]<=ca&&ca<ra[1][0]&&ra[0][1]<=la&&la<ra[1][1])return pa=P.invert(ca-P(qa[oa][1][0],0)[0],la),pa[0]+=qa[oa][1][0],qa=T(pa[0],pa[1]),ca=[ca,la],1E-6>Math.abs(qa[0]-ca[0])&&1E-6>Math.abs(qa[1]-ca[1])?pa:null}});var ea=q.geo.projection(T),da=ea.stream;ea.stream=function(ca){var la=
ea.rotate(),pa=da(ca),qa=(ea.rotate([0,0]),da(ca));ea.rotate(la);pa.sphere=function(){var oa=q.geo,ka=oa.stream;var ra=[];for(var ha=0,ma=ba[0].length;ha<ma;++ha){var wa=ba[0][ha],na=180*wa[0][0]/H,ya=180*wa[0][1]/H,Fa=180*wa[1][1]/H,Ha=180*wa[2][0]/H;wa=180*wa[2][1]/H;ra.push(aa([[na+1E-6,ya+1E-6],[na+1E-6,Fa-1E-6],[Ha-1E-6,Fa-1E-6],[Ha-1E-6,wa+1E-6]],30))}for(ha=ba[1].length-1;0<=ha;--ha)wa=ba[1][ha],na=180*wa[0][0]/H,ya=180*wa[0][1]/H,Fa=180*wa[1][1]/H,Ha=180*wa[2][0]/H,wa=180*wa[2][1]/H,ra.push(aa([[Ha-
1E-6,wa-1E-6],[Ha-1E-6,Fa+1E-6],[na+1E-6,Fa+1E-6],[na+1E-6,ya-1E-6]],30));ra={type:"Polygon",coordinates:[q.merge(ra)]};ka.call(oa,ra,qa)};return pa};ea.lobes=function(ca){if(!arguments.length)return ba.map(function(la){return la.map(function(pa){return[[180*pa[0][0]/H,180*pa[0][1]/H],[180*pa[1][0]/H,180*pa[1][1]/H],[180*pa[2][0]/H,180*pa[2][1]/H]]})});ba=ca.map(function(la){return la.map(function(pa){return[[pa[0][0]*H/180,pa[0][1]*H/180],[pa[1][0]*H/180,pa[1][1]*H/180],[pa[2][0]*H/180,pa[2][1]*
H/180]]})});V();return ea};return ea};d.invert=function(P,T){T=.5*T*Math.sqrt((4+H)/H);var V=a(T),aa=Math.cos(V);return[P/(2/Math.sqrt(H*(4+H))*(1+aa)),a((V+T*(aa+2))/(2+I))]};(q.geo.eckert4=function(){return E(d)}).raw=d;var N=q.geo.azimuthalEqualArea.raw;k.invert=function(P,T){T=2*a(T/2);return[P*Math.cos(T/2)/Math.cos(T),T]};(q.geo.hammer=function(){var P=2,T=K(l),V=T(P);V.coefficient=function(aa){return arguments.length?T(P=+aa):P};return V}).raw=l;c.invert=function(P,T){return[2/3*H*P/Math.sqrt(H*
H/3-T*T),T]};(q.geo.kavrayskiy7=function(){return E(c)}).raw=c;e.invert=function(P,T){return[P,2.5*Math.atan(Math.exp(.8*T))-.625*H]};(q.geo.miller=function(){return E(e)}).raw=e;g(H);var O=function(P,T,V){function aa(Y,ea){return[P*Y*Math.cos(ea=ba(ea)),T*Math.sin(ea)]}var ba=g(V);aa.invert=function(Y,ea){ea=a(ea/T);return[Y/(P*Math.cos(ea)),a((2*ea+Math.sin(2*ea))/V)]};return aa}(Math.SQRT2/I,Math.SQRT2,H);(q.geo.mollweide=function(){return E(O)}).raw=O;m.invert=function(P,T){var V=T,aa=25;do{var ba=
V*V;var Y=ba*ba;V-=Y=(V*(1.007226+ba*(.015085+Y*(-.044475+.028874*ba-.005916*Y)))-T)/(1.007226+ba*(.045255+Y*(-.311325+.259866*ba-.005916*11*Y)))}while(1E-6<Math.abs(Y)&&0<--aa);return[P/(.8707+(ba=V*V)*(-.131979+ba*(-.013791+ba*ba*ba*(.003971-.001529*ba)))),V]};(q.geo.naturalEarth=function(){return E(m)}).raw=m;var Q=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,
.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Q.forEach(function(P){P[1]*=1.0144});r.invert=function(P,T){var V=T/I,aa=90*V,ba=Math.min(18,Math.abs(aa/5)),Y=Math.max(0,Math.floor(ba));do{var ea=Q[Y][1],da=Q[Y+1][1],ca=Q[Math.min(19,Y+2)][1],la=ca-ea,pa=2*(Math.abs(V)-da)/la;ea=(ca-2*da+ea)/la;pa*=1-ea*pa*(1-2*ea*pa);if(0<=pa||1===Y){aa=(0<=T?5:-5)*(pa+ba);V=50;do ba=Math.min(18,Math.abs(aa)/5),Y=Math.floor(ba),pa=ba-Y,ea=Q[Y][1],da=Q[Y+1][1],ca=Q[Math.min(19,Y+2)][1],aa-=
(ba=(0<=T?I:-I)*(da+pa*(ca-ea)/2+pa*pa*(ca-2*da+ea)/2)-T)*L;while(1E-12<Math.abs(ba)&&0<--V);break}}while(0<=--Y);T=Q[Y][0];ba=Q[Y+1][0];Y=Q[Math.min(19,Y+2)][0];return[P/(ba+pa*(Y-T)/2+pa*pa*(Y-2*ba+T)/2),aa*J]};(q.geo.robinson=function(){return E(r)}).raw=r;u.invert=function(P,T){return[P/Math.cos(T),T]};(q.geo.sinusoidal=function(){return E(u)}).raw=u;v.invert=function(P,T){if(!(P*P+4*T*T>H*H+1E-6)){var V=P,aa=T,ba=25;do{var Y=Math.sin(V),ea=Math.sin(V/2),da=Math.cos(V/2),ca=Math.sin(aa),la=Math.cos(aa),
pa=Math.sin(2*aa),qa=ca*ca,oa=la*la,ka=ea*ea,ra=1-oa*da*da,ha=ra?f(la*da)*Math.sqrt(ma=1/ra):ma=0,ma;ra=2*ha*la*ea-P;var wa=ha*ca-T,na=ma*(oa*ka+ha*la*da*qa),ya=ma*(.5*Y*pa-2*ha*ca*ea);Y=.25*ma*(pa*ea-ha*ca*oa*Y);la=ma*(qa*da+ha*ka*la);da=ya*Y-la*na;if(!da)break;ya=(wa*ya-ra*la)/da;ra=(ra*Y-wa*na)/da;V-=ya;aa-=ra}while((1E-6<Math.abs(ya)||1E-6<Math.abs(ra))&&0<--ba);return[V,aa]}};(q.geo.aitoff=function(){return E(v)}).raw=v;w.invert=function(P,T){var V=P,aa=T,ba=25;do{var Y=Math.cos(aa),ea=Math.sin(aa),
da=Math.sin(2*aa),ca=ea*ea,la=Y*Y,pa=Math.sin(V),qa=Math.cos(V/2),oa=Math.sin(V/2),ka=oa*oa,ra=1-la*qa*qa,ha=ra?f(Y*qa)*Math.sqrt(ma=1/ra):ma=0,ma;ra=.5*(2*ha*Y*oa+V/I)-P;var wa=.5*(ha*ea+aa)-T,na=.5*ma*(la*ka+ha*Y*qa*ca)+.5/I,ya=ma*(pa*da/4-ha*ea*oa);ea=.125*ma*(da*oa-ha*ea*la*pa);ca=.5*ma*(ca*qa+ha*ka*Y)+.5;Y=ya*ea-ca*na;ya=(wa*ya-ra*ca)/Y;ra=(ra*ea-wa*na)/Y;V-=ya;aa-=ra}while((1E-6<Math.abs(ya)||1E-6<Math.abs(ra))&&0<--ba);return[V,aa]};(q.geo.winkel3=function(){return E(w)}).raw=w}},{}],833:[function(b,
y,F){function q(C,x){return g.behavior.zoom().translate(x.translate()).scale(x.scale())}function n(C,x,A){function B(N,O){E[t+"."+N]=m.nestedProperty(I,N).get();r.call("_storeDirectGUIEdit",H,J._preGUI,E);var Q=m.nestedProperty(L,N);Q.get()!==O&&(Q.set(O),m.nestedProperty(I,N).set(O),K[t+"."+N]=O)}var t=C.id,G=C.graphDiv,H=G.layout,I=H[t],J=G._fullLayout,L=J[t],E={},K={};A(B);B("projection.scale",x.scale()/C.fitScale);B("fitbounds",!1);G.emit("plotly_relayout",K)}function p(C,x){function A(t){var G=
x.invert(C.midPt);t("center.lon",G[0]);t("center.lat",G[1])}var B=q(C,x);B.on("zoomstart",function(){g.select(this).style(w)}).on("zoom",function(){x.scale(g.event.scale).translate(g.event.translate);C.render();var t=x.invert(C.midPt);C.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":x.scale()/C.fitScale,"geo.center.lon":t[0],"geo.center.lat":t[1]})}).on("zoomend",function(){g.select(this).style(D);n(C,x,A)});return B}function h(C,x){function A(O){var Q=x.rotate(),P=x.invert(C.midPt);O("projection.rotation.lon",
-Q[0]);O("center.lon",P[0]);O("center.lat",P[1])}var B=q(C,x),t,G,H,I,J,L,E,K,N;B.on("zoomstart",function(){g.select(this).style(w);t=g.mouse(this);G=x.rotate();H=x.translate();I=G;J=x.invert(t)}).on("zoom",function(){L=g.mouse(this);var O=t;var Q=x.invert(O);Q?(Q=x(Q),O=2<Math.abs(Q[0]-O[0])||2<Math.abs(Q[1]-O[1])):O=!0;O?(B.scale(x.scale()),B.translate(x.translate())):(x.scale(g.event.scale),x.translate([H[0],g.event.translate[1]]),J?x.invert(L)&&(K=x.invert(L),E=[I[0]+(K[0]-J[0]),G[1],G[2]],x.rotate(E),
I=E):(t=L,J=x.invert(t)),N=!0,C.render(),O=x.rotate(),Q=x.invert(C.midPt),C.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":x.scale()/C.fitScale,"geo.center.lon":Q[0],"geo.center.lat":Q[1],"geo.projection.rotation.lon":-O[0]}))}).on("zoomend",function(){g.select(this).style(D);N&&n(C,x,A)});return B}function a(C,x){function A(L){H++||L({type:"zoomstart"})}function B(L){var E=x.rotate();L("projection.rotation.lon",-E[0]);L("projection.rotation.lat",-E[1])}x.rotate();x.scale();var t=q(C,
x),G=e(t,"zoomstart","zoom","zoomend"),H=0,I=t.on,J;t.on("zoomstart",function(){g.select(this).style(w);var L=g.mouse(this),E=x.rotate(),K=E,N=x.translate(),O=d(E);J=f(x,L);I.call(t,"zoom",function(){var Q=g.mouse(this);x.scale(g.event.scale);if(!J)L=Q,J=f(x,L);else if(f(x,Q)){x.rotate(E).translate(N);var P=f(x,Q);var T=J;if(T&&P){Q=[T[1]*P[2]-T[2]*P[1],T[2]*P[0]-T[0]*P[2],T[0]*P[1]-T[1]*P[0]];var V=Math.sqrt(c(Q,Q));P=.5*Math.acos(Math.max(-1,Math.min(1,c(T,P))));T=Math.sin(P)/V;var aa=V&&[Math.cos(P),
Q[2]*T,-Q[1]*T,Q[0]*T]}else aa=void 0;Q=O[0];V=O[1];P=O[2];T=O[3];var ba=aa[0],Y=aa[1],ea=aa[2];aa=aa[3];Q=[Q*ba-V*Y-P*ea-T*aa,Q*Y+V*ba+P*aa-T*ea,Q*ea-V*aa+P*ba+T*Y,Q*aa+V*ea-P*Y+T*ba];P=[Math.atan2(2*(Q[0]*Q[1]+Q[2]*Q[3]),1-2*(Q[1]*Q[1]+Q[2]*Q[2]))*v,Math.asin(Math.max(-1,Math.min(1,2*(Q[0]*Q[2]-Q[3]*Q[1]))))*v,Math.atan2(2*(Q[0]*Q[3]+Q[1]*Q[2]),1-2*(Q[2]*Q[2]+Q[3]*Q[3]))*v];V=J;Q=K;ba=k(V,2,P[0]);ba=k(ba,1,P[1]);ba=k(ba,0,P[2]-Q[2]);T=V[0];aa=V[1];V=V[2];P=ba[0];Y=ba[1];ba=ba[2];ea=Math.atan2(aa,
T)*v;aa=Math.sqrt(T*T+aa*aa);Math.abs(Y)>aa?(T=(0<Y?90:-90)-ea,aa=0):(T=Math.asin(Y/aa)*v-ea,aa=Math.sqrt(aa*aa-Y*Y));Y=180-T-2*ea;ea=(Math.atan2(ba,P)-Math.atan2(V,aa))*v;V=(Math.atan2(ba,P)-Math.atan2(V,-aa))*v;P=l(Q[0],Q[1],T,ea);ba=l(Q[0],Q[1],Y,V);Q=P<=ba?[T,ea,Q[2]]:[Y,V,Q[2]];isFinite(Q[0])&&isFinite(Q[1])&&isFinite(Q[2])||(Q=K);x.rotate(Q);K=Q}G.of(this,arguments)({type:"zoom"})});A(G.of(this,arguments))}).on("zoomend",function(){g.select(this).style(D);I.call(t,"zoom",null);var L=G.of(this,
arguments);--H||L({type:"zoomend"});n(C,x,B)}).on("zoom.redraw",function(){C.render();var L=x.rotate();C.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":x.scale()/C.fitScale,"geo.projection.rotation.lon":-L[0],"geo.projection.rotation.lat":-L[1]})});return g.rebind(t,G,"on")}function f(C,x){if(C=(x=C.invert(x))&&isFinite(x[0])&&isFinite(x[1])){C=x[0]*u;x=x[1]*u;var A=Math.cos(x);C=[A*Math.cos(C),A*Math.sin(C),Math.sin(x)]}return C}function d(C){var x=.5*C[0]*u,A=.5*C[1]*u,B=.5*C[2]*u;C=
Math.sin(x);x=Math.cos(x);var t=Math.sin(A);A=Math.cos(A);var G=Math.sin(B);B=Math.cos(B);return[x*A*B+C*t*G,C*A*B-x*t*G,x*t*B+C*A*G,x*A*G-C*t*B]}function l(C,x,A,B){C=((A-C)%360+540)%360-180;x=((B-x)%360+540)%360-180;return Math.sqrt(C*C+x*x)}function k(C,x,A){var B=A*u;A=C.slice();var t=0===x?1:0;x=2===x?1:2;var G=Math.cos(B);B=Math.sin(B);A[t]=C[t]*G-C[x]*B;A[x]=C[x]*G+C[t]*B;return A}function c(C,x){for(var A=0,B=0,t=C.length;B<t;++B)A+=C[B]*x[B];return A}function e(C){for(var x=0,A=arguments.length,
B=[];++x<A;)B.push(arguments[x]);var t=g.dispatch.apply(null,B);t.of=function(G,H){return function(I){try{var J=I.sourceEvent=g.event;I.target=C;g.event=I;t[I.type].apply(G,H)}finally{g.event=J}}};return t}var g=b("d3"),m=b("../../lib"),r=b("../../registry"),u=Math.PI/180,v=180/Math.PI,w={cursor:"pointer"},D={cursor:"auto"};y.exports=function(C,x){return(x._isScoped?p:x._isClipped?a:h)(C,C.projection)}},{"../../lib":749,"../../registry":880,d3:169}],834:[function(b,y,F){var q=b("../registry"),n=b("./cartesian/constants").SUBPLOT_PATTERN;
F.getSubplotCalcData=function(p,h,a){h=q.subplotsRegistry[h];if(!h)return[];h=h.attr;for(var f=[],d=0;d<p.length;d++){var l=p[d];l[0].trace[h]===a&&f.push(l)}return f};F.getModuleCalcData=function(p,h){var a=[],f=[];h="string"===typeof h?q.getModule(h).plot:"function"===typeof h?h:h.plot;if(!h)return[a,p];for(var d=0;d<p.length;d++){var l=p[d],k=l[0].trace;!0===k.visible&&0!==k._length&&(k._module.plot===h?a.push(l):f.push(l))}return[a,f]};F.getSubplotData=function(p,h,a){if(!q.subplotsRegistry[h])return[];
var f=q.subplotsRegistry[h].attr,d=[];if("gl2d"===h){var l=a.match(n);var k="x"+l[1];var c="y"+l[2]}for(var e=0;e<p.length;e++)l=p[e],"gl2d"===h&&q.traceIs(l,"gl2d")?l[f[0]]===k&&l[f[1]]===c&&d.push(l):l[f]===a&&d.push(l);return d}},{"../registry":880,"./cartesian/constants":803}],835:[function(b,y,F){function q(d,l){this.element=d;this.plot=l;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=
[0,0];this.dragStart=[0,0]}var n=b("mouse-change"),p=b("mouse-wheel"),h=b("mouse-event-offset"),a=b("../cartesian/constants"),f=b("has-passive-events");y.exports=function(d){function l(){for(var m=d.graphDiv._fullLayout._axisConstraintGroups,r=d.xaxis._id,u=d.yaxis._id,v=0;v<m.length;v++)if(-1!==m[v][r]){if(-1!==m[v][u])return!0;break}return!1}function k(m,r,u){function v(t,G,H){var I=Math.min(G,H);G=Math.max(G,H);I!==G?(w[t]=I,w[t+2]=G,g.dataBox=w,d.setRanges(w)):(d.selectBox.selectBox=[0,0,1,1],
d.glplot.setDirty())}var w=d.calcDataBox(),D=e.viewBox,C=g.lastPos[0],x=g.lastPos[1],A=a.MINDRAG*e.pixelRatio,B=a.MINZOOM*e.pixelRatio;r*=e.pixelRatio;u*=e.pixelRatio;u=D[3]-D[1]-u;switch(d.fullLayout.dragmode){case "zoom":m?(x=r/(D[2]-D[0])*(w[2]-w[0])+w[0],D=u/(D[3]-D[1])*(w[3]-w[1])+w[1],g.boxInited||(g.boxStart[0]=x,g.boxStart[1]=D,g.dragStart[0]=r,g.dragStart[1]=u),g.boxEnd[0]=x,g.boxEnd[1]=D,g.boxInited=!0,g.boxEnabled||g.boxStart[0]===g.boxEnd[0]&&g.boxStart[1]===g.boxEnd[1]||(g.boxEnabled=
!0),D=Math.abs(g.dragStart[0]-r)<B,B=Math.abs(g.dragStart[1]-u)<B,!l()||D&&B?(D&&(g.boxEnd[0]=g.boxStart[0]),B&&(g.boxEnd[1]=g.boxStart[1])):(B=g.boxEnd[0]-g.boxStart[0],D=g.boxEnd[1]-g.boxStart[1],x=(w[3]-w[1])/(w[2]-w[0]),Math.abs(B*x)>Math.abs(D)?(g.boxEnd[1]=g.boxStart[1]+Math.abs(B)*x*(0<=D?1:-1),g.boxEnd[1]<w[1]?(g.boxEnd[1]=w[1],g.boxEnd[0]=g.boxStart[0]+(w[1]-g.boxStart[1])/Math.abs(x)):g.boxEnd[1]>w[3]&&(g.boxEnd[1]=w[3],g.boxEnd[0]=g.boxStart[0]+(w[3]-g.boxStart[1])/Math.abs(x))):(g.boxEnd[0]=
g.boxStart[0]+Math.abs(D)/x*(0<=B?1:-1),g.boxEnd[0]<w[0]?(g.boxEnd[0]=w[0],g.boxEnd[1]=g.boxStart[1]+(w[0]-g.boxStart[0])*Math.abs(x)):g.boxEnd[0]>w[2]&&(g.boxEnd[0]=w[2],g.boxEnd[1]=g.boxStart[1]+(w[2]-g.boxStart[0])*Math.abs(x))))):g.boxEnabled?(B=g.boxStart[0]!==g.boxEnd[0],D=g.boxStart[1]!==g.boxEnd[1],B||D?(B&&(v(0,g.boxStart[0],g.boxEnd[0]),d.xaxis.autorange=!1),D&&(v(1,g.boxStart[1],g.boxEnd[1]),d.yaxis.autorange=!1),d.relayoutCallback()):d.glplot.setDirty(),g.boxEnabled=!1,g.boxInited=!1):
g.boxInited&&(g.boxInited=!1);break;case "pan":g.boxEnabled=!1,g.boxInited=!1,m?(g.panning||(g.dragStart[0]=r,g.dragStart[1]=u),Math.abs(g.dragStart[0]-r)<A&&(r=g.dragStart[0]),Math.abs(g.dragStart[1]-u)<A&&(u=g.dragStart[1]),B=(C-r)*(w[2]-w[0])/(e.viewBox[2]-e.viewBox[0]),D=(x-u)*(w[3]-w[1])/(e.viewBox[3]-e.viewBox[1]),w[0]+=B,w[2]+=B,w[1]+=D,w[3]+=D,d.setRanges(w),g.panning=!0,g.lastInputTime=Date.now(),d.xaxis.autorange=!1,d.yaxis.autorange=!1,d.cameraChanged(),d.handleAnnotations()):g.panning&&
(g.panning=!1,d.relayoutCallback())}g.lastPos[0]=r;g.lastPos[1]=u}var c=d.mouseContainer,e=d.glplot,g=new q(c,e);g.mouseListener=n(c,k);c.addEventListener("touchstart",function(m){var r=h(m.changedTouches[0],c);k(0,r[0],r[1]);k(1,r[0],r[1]);m.preventDefault()},f?{passive:!1}:!1);c.addEventListener("touchmove",function(m){m.preventDefault();var r=h(m.changedTouches[0],c);k(1,r[0],r[1]);m.preventDefault()},f?{passive:!1}:!1);c.addEventListener("touchend",function(m){k(0,g.lastPos[0],g.lastPos[1]);m.preventDefault()},
f?{passive:!1}:!1);g.wheelListener=p(c,function(m,r){if(!d.scrollZoom)return!1;m=d.calcDataBox();var u=e.viewBox;r=Math.exp(5*r/(u[3]-u[1]));var v=g.lastPos[0]/(u[2]-u[0])*(m[2]-m[0])+m[0];u=g.lastPos[1]/(u[3]-u[1])*(m[3]-m[1])+m[1];m[0]=(m[0]-v)*r+v;m[2]=(m[2]-v)*r+v;m[1]=(m[1]-u)*r+u;m[3]=(m[3]-u)*r+u;d.setRanges(m);g.lastInputTime=Date.now();d.xaxis.autorange=!1;d.yaxis.autorange=!1;d.cameraChanged();d.handleAnnotations();d.relayoutCallback();return!0},!0);return g}},{"../cartesian/constants":803,
"has-passive-events":415,"mouse-change":457,"mouse-event-offset":458,"mouse-wheel":460}],836:[function(b,y,F){function q(a){this.scene=a;this.gl=a.gl;this.pixelRatio=a.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,
0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=[12,12];this.labelFont=["sans-serif","sans-serif"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=
[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.static=this.scene.staticPlot}var n=b("../cartesian/axes"),p=b("../../lib/str2rgbarray");b=q.prototype;var h=["xaxis","yaxis"];b.merge=function(a){this.titleEnable=!1;this.backgroundColor=p(a.plot_bgcolor);
var f,d;for(d=0;2>d;++d){var l=h[d];var k=l.charAt(0);var c=a[this.scene[l]._name];k=c.title.text===this.scene.fullLayout._dfltTitle[k]?"":c.title.text;for(f=0;2>=f;f+=2)this.labelEnable[d+f]=!1,this.labels[d+f]=k,this.labelColor[d+f]=p(c.title.font.color),this.labelFont[d+f]=c.title.font.family,this.labelSize[d+f]=c.title.font.size,this.labelPad[d+f]=this.getLabelPad(l,c),this.tickEnable[d+f]=!1,this.tickColor[d+f]=p((c.tickfont||{}).color),this.tickAngle[d+f]="auto"===c.tickangle?0:Math.PI*-c.tickangle/
180,this.tickPad[d+f]=this.getTickPad(c),this.tickMarkLength[d+f]=0,this.tickMarkWidth[d+f]=c.tickwidth||0,this.tickMarkColor[d+f]=p(c.tickcolor),this.borderLineEnable[d+f]=!1,this.borderLineColor[d+f]=p(c.linecolor),this.borderLineWidth[d+f]=c.linewidth||0;f=this.hasSharedAxis(c);k=this.hasAxisInDfltPos(l,c)&&!f;l=this.hasAxisInAltrPos(l,c)&&!f;var e=c.mirror||!1;var g=f?-1!==String(e).indexOf("all"):!!e;f=f?"allticks"===e:-1!==String(e).indexOf("ticks");k?this.labelEnable[d]=!0:l&&(this.labelEnable[d+
2]=!0);k?this.tickEnable[d]=c.showticklabels:l&&(this.tickEnable[d+2]=c.showticklabels);if(k||g)this.borderLineEnable[d]=c.showline;if(l||g)this.borderLineEnable[d+2]=c.showline;if(k||f)this.tickMarkLength[d]=this.getTickMarkLength(c);if(l||f)this.tickMarkLength[d+2]=this.getTickMarkLength(c);this.gridLineEnable[d]=c.showgrid;this.gridLineColor[d]=p(c.gridcolor);this.gridLineWidth[d]=c.gridwidth;this.zeroLineEnable[d]=c.zeroline;this.zeroLineColor[d]=p(c.zerolinecolor);this.zeroLineWidth[d]=c.zerolinewidth}};
b.hasSharedAxis=function(a){var f=this.scene;return 0!==n.findSubplotsWithAxis(f.fullLayout._subplots.gl2d,a).indexOf(f.id)};b.hasAxisInDfltPos=function(a,f){f=f.side;if("xaxis"===a)return"bottom"===f;if("yaxis"===a)return"left"===f};b.hasAxisInAltrPos=function(a,f){f=f.side;if("xaxis"===a)return"top"===f;if("yaxis"===a)return"right"===f};b.getLabelPad=function(a,f){var d=f.title.font.size,l=f.showticklabels;if("xaxis"===a)return"top"===f.side?-10+d*(1.5+(l?1:0)):-10+d*(1.5+(l?.5:0));if("yaxis"===
a)return"right"===f.side?10+d*(1.5+(l?1:.5)):10+d*(1.5+(l?.5:0))};b.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15};b.getTickMarkLength=function(a){if(!a.ticks)return 0;var f=a.ticklen;return"inside"===a.ticks?-f:f};y.exports=function(a){return new q(a)}},{"../../lib/str2rgbarray":772,"../cartesian/axes":797}],837:[function(b,y,F){y=b("../../plot_api/edit_types").overrideAll;var q=b("./scene2d"),n=b("../layout_attributes"),p=b("../../constants/xmlns_namespaces"),h=b("../cartesian/constants"),
a=b("../cartesian"),f=b("../../components/fx/layout_attributes"),d=b("../get_data").getSubplotData;F.name="gl2d";F.attr=["xaxis","yaxis"];F.idRoot=["x","y"];F.idRegex=h.idRegex;F.attrRegex=h.attrRegex;F.attributes=b("../cartesian/attributes");F.supplyLayoutDefaults=function(l,k,c){k._has("cartesian")||a.supplyLayoutDefaults(l,k,c)};F.layoutAttrOverrides=y(a.layoutAttributes,"plot","from-root");F.baseLayoutAttrOverrides=y({plot_bgcolor:n.plot_bgcolor,hoverlabel:f.hoverlabel},"plot","nested");F.plot=
function(l){for(var k=l._fullLayout,c=l._fullData,e=k._subplots.gl2d,g=0;g<e.length;g++){var m=e[g],r=k._plots[m],u=d(c,"gl2d",m),v=r._scene2d;void 0===v&&(v=new q({id:m,graphDiv:l,container:l.querySelector(".gl-container"),staticPlot:l._context.staticPlot,plotGlPixelRatio:l._context.plotGlPixelRatio},k),r._scene2d=v);v.plot(u,l.calcdata,k,l.layout)}};F.clean=function(l,k,c,e){for(var g=e._subplots.gl2d||[],m=0;m<g.length;m++){var r=g[m],u=e._plots[r];u._scene2d&&0===d(l,"gl2d",r).length&&(u._scene2d.destroy(),
delete e._plots[r])}a.clean.apply(this,arguments)};F.drawFramework=function(l){l._context.staticPlot||a.drawFramework(l)};F.toSVG=function(l){l=l._fullLayout;for(var k=l._subplots.gl2d,c=0;c<k.length;c++){var e=l._plots[k[c]]._scene2d,g=e.toImage("png");l._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":g,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"});e.destroy()}};F.updateFx=function(l){l=l._fullLayout;for(var k=l._subplots.gl2d,c=0;c<k.length;c++)l._plots[k[c]]._scene2d.updateFx(l.dragmode)}},
{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":725,"../../plot_api/edit_types":780,"../cartesian":810,"../cartesian/attributes":795,"../cartesian/constants":803,"../get_data":834,"../layout_attributes":851,"./scene2d":838}],838:[function(b,y,F){function q(A,B){this.container=A.container;this.graphDiv=A.graphDiv;this.pixelRatio=A.plotGlPixelRatio||window.devicePixelRatio;this.id=A.id;this.staticPlot=!!A.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;
this.fullData=null;this.updateRefs(B);this.makeFramework();this.stopped||(this.glplotOptions=k(this),this.glplotOptions.merge(B),this.glplot=a(this.glplotOptions),this.camera=c(this),this.traces={},this.spikes=f(this.glplot),this.selectBox=d(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var n=b("../../registry"),p=b("../../plots/cartesian/axes"),h=b("../../components/fx"),a=b("gl-plot2d"),
f=b("gl-spikes2d"),d=b("gl-select-box"),l=b("webgl-context"),k=b("./convert"),c=b("./camera"),e=b("../../lib/show_no_webgl_msg");F=b("../cartesian/constraints");var g=F.enforce,m=F.clean,r=b("../cartesian/autorange").doAutoRange;F=b("../../components/dragelement/helpers");var u=F.drawMode,v=F.selectMode,w=["xaxis","yaxis"],D,C,x=b("../cartesian/constants").SUBPLOT_PATTERN;y.exports=q;b=q.prototype;b.makeFramework=function(){if(this.staticPlot){if(!C&&(D=document.createElement("canvas"),C=l({canvas:D,
preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!C))throw Error("Error creating static canvas/context for image server");this.canvas=D;this.gl=C}else{var A=this.container.querySelector(".gl-canvas-focus"),B=l({canvas:A,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!B){e(this);this.stopped=!0;return}this.canvas=A;this.gl=B}A=this.canvas;A.style.width="100%";A.style.height="100%";A.style.position="absolute";A.style.top="0px";A.style.left="0px";A.style["pointer-events"]="none";this.updateSize(A);
A.className+=" user-select-none";A=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");A.style.position="absolute";A.style.top=A.style.left="0px";A.style.width=A.style.height="100%";A.style["z-index"]=20;A.style["pointer-events"]="none";B=this.mouseContainer=document.createElement("div");B.style.position="absolute";B.style["pointer-events"]="auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var t=this.container;t.appendChild(A);t.appendChild(B);var G=
this;B.addEventListener("mouseout",function(){G.isMouseOver=!1;G.unhover()});B.addEventListener("mouseover",function(){G.isMouseOver=!0})};b.toImage=function(A){A||(A="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(D);this.updateSize(this.canvas);var B=this.glplot.gl,t=B.drawingBufferWidth,G=B.drawingBufferHeight;B.clearColor(1,1,1,0);B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();B.bindFramebuffer(B.FRAMEBUFFER,null);var H=new Uint8Array(t*
G*4);B.readPixels(0,0,t,G,B.RGBA,B.UNSIGNED_BYTE,H);B=0;for(var I=G-1;B<I;++B,--I)for(var J=0;J<t;++J)for(var L=0;4>L;++L){var E=H[4*(t*B+J)+L];H[4*(t*B+J)+L]=H[4*(t*I+J)+L];H[4*(t*I+J)+L]=E}B=document.createElement("canvas");B.width=t;B.height=G;I=B.getContext("2d");t=I.createImageData(t,G);t.data.set(H);I.putImageData(t,0,0);switch(A){case "jpeg":A=B.toDataURL("image/jpeg");break;case "webp":A=B.toDataURL("image/webp");break;default:A=B.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(D);
return A};b.updateSize=function(A){A||(A=this.canvas);var B=this.pixelRatio,t=this.fullLayout,G=Math.ceil(B*t.width)|0;B=Math.ceil(B*t.height)|0;if(A.width!==G||A.height!==B)A.width=G,A.height=B;return A};b.computeTickMarks=function(){this.xaxis.setScale();this.yaxis.setScale();for(var A=[p.calcTicks(this.xaxis),p.calcTicks(this.yaxis)],B=0;2>B;++B)for(var t=0;t<A[B].length;++t)A[B][t].text+="";return A};b.updateRefs=function(A){this.fullLayout=A;A=this.id.match(x);var B="yaxis"+A[2];this.xaxis=this.fullLayout["xaxis"+
A[1]];this.yaxis=this.fullLayout[B]};b.relayoutCallback=function(){var A=this.graphDiv,B=this.xaxis,t=this.yaxis,G=A.layout,H={},I=H[B._name+".range"]=B.range.slice(),J=H[t._name+".range"]=t.range.slice();H[B._name+".autorange"]=B.autorange;H[t._name+".autorange"]=t.autorange;n.call("_storeDirectGUIEdit",A.layout,A._fullLayout._preGUI,H);var L=G[B._name];L.range=I;L.autorange=B.autorange;B=G[t._name];B.range=J;B.autorange=t.autorange;H.lastInputTime=this.camera.lastInputTime;A.emit("plotly_relayout",
H)};b.cameraChanged=function(){var A=this.camera;this.glplot.setDataBox(this.calcDataBox());var B=this.computeTickMarks(),t=this.glplotOptions.ticks;a:{for(var G=0;2>G;++G){var H=B[G],I=t[G];if(H.length!==I.length){t=!0;break a}for(var J=0;J<H.length;++J)if(H[J].x!==I[J].x){t=!0;break a}}t=!1}t&&(this.glplotOptions.ticks=B,this.glplotOptions.dataBox=A.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};b.handleAnnotations=function(){for(var A=this.graphDiv,B=this.fullLayout.annotations,
t=0;t<B.length;t++){var G=B[t];G.xref===this.xaxis._id&&G.yref===this.yaxis._id&&n.getComponentMethod("annotations","drawOne")(A,t)}};b.destroy=function(){if(this.glplot){var A=this.traces;A&&Object.keys(A).map(function(B){A[B].dispose();delete A[B]});this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);this.glplot=this.fullData=null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);
this.camera=null}};b.plot=function(A,B,t){var G=this.glplot;this.updateRefs(t);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(A,B);this.updateFx(t.dragmode);var H=t.width,I=t.height;this.updateSize(this.canvas);A=this.glplotOptions;A.merge(t);A.screenBox=[0,0,H,I];B={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};m(B,this.xaxis);m(B,this.yaxis);var J=t._size,L=this.xaxis.domain,E=this.yaxis.domain;A.viewBox=[J.l+
L[0]*J.w,J.b+E[0]*J.h,H-J.r-(1-L[1])*J.w,I-J.t-(1-E[1])*J.h];this.mouseContainer.style.width=J.w*(L[1]-L[0])+"px";this.mouseContainer.style.height=J.h*(E[1]-E[0])+"px";this.mouseContainer.height=J.h*(E[1]-E[0]);this.mouseContainer.style.left=J.l+L[0]*J.w+"px";this.mouseContainer.style.top=J.t+(1-E[1])*J.h+"px";for(I=0;2>I;++I)H=this[w[I]],H._length=A.viewBox[I+2]-A.viewBox[I],r(this.graphDiv,H),H.setScale();g(B);A.ticks=this.computeTickMarks();A.dataBox=this.calcDataBox();A.merge(t);G.update(A);this.glplot.draw()};
b.calcDataBox=function(){var A=this.xaxis,B=this.yaxis,t=A.range,G=B.range;A=A.r2l;B=B.r2l;return[A(t[0]),B(G[0]),A(t[1]),B(G[1])]};b.setRanges=function(A){var B=this.xaxis,t=this.yaxis,G=B.l2r,H=t.l2r;B.range=[G(A[0]),G(A[2])];t.range=[H(A[1]),H(A[3])]};b.updateTraces=function(A,B){var t=Object.keys(this.traces),G;this.fullData=A;var H=0;a:for(;H<t.length;H++){var I=t[H],J=this.traces[I];for(G=0;G<A.length;G++){var L=A[G];if(L.uid===I&&L.type===J.type)continue a}J.dispose();delete this.traces[I]}for(H=
0;H<A.length;H++)L=A[H],t=B[H],(G=this.traces[L.uid])?G.update(L,t):(G=L._module.plot(this,L,t),this.traces[L.uid]=G);this.glplot.objects.sort(function(E,K){return E._trace.index-K._trace.index})};b.updateFx=function(A){v(A)||u(A)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===A?"move":"zoom"===A?"crosshair":
null};b.emitPointAction=function(A,B){for(var t=A.trace.uid,G=A.pointIndex,H,I=0;I<this.fullData.length;I++)this.fullData[I].uid===t&&(H=this.fullData[I]);A={x:A.traceCoord[0],y:A.traceCoord[1],curveNumber:H.index,pointNumber:G,data:H._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};h.appendArrayPointValue(A,H,G);this.graphDiv.emit(B,{points:[A]})};b.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var A=this.glplot,B=this.camera,t=B.mouseListener,G=1===this.lastButtonState&&
0===t.buttons,H=this.fullLayout;this.lastButtonState=t.buttons;this.cameraChanged();var I=t.x*A.pixelRatio;t=this.canvas.height-A.pixelRatio*t.y;if(B.boxEnabled&&"zoom"===H.dragmode){this.selectBox.enabled=!0;H=this.selectBox.selectBox=[Math.min(B.boxStart[0],B.boxEnd[0]),Math.min(B.boxStart[1],B.boxEnd[1]),Math.max(B.boxStart[0],B.boxEnd[0]),Math.max(B.boxStart[1],B.boxEnd[1])];for(G=0;2>G;G++)B.boxStart[G]===B.boxEnd[G]&&(H[G]=A.dataBox[G],H[G+2]=A.dataBox[G+2]);A.setDirty()}else if(!B.panning&&
this.isMouseOver){this.selectBox.enabled=!1;var J=H._size;(B=(J=A.pick(I/A.pixelRatio+J.l+this.xaxis.domain[0]*J.w,t/A.pixelRatio-(J.t+(1-this.yaxis.domain[1])*J.h)))&&J.object._trace.handlePick(J))&&G&&this.emitPointAction(B,"plotly_click");J&&"skip"!==J.object._trace.hoverinfo&&H.hovermode&&B&&(!this.lastPickResult||this.lastPickResult.traceUid!==B.trace.uid||this.lastPickResult.dataCoord[0]!==B.dataCoord[0]||this.lastPickResult.dataCoord[1]!==B.dataCoord[1])&&(this.lastPickResult={traceUid:B.trace?
B.trace.uid:null,dataCoord:B.dataCoord.slice()},this.spikes.update({center:J.dataCoord}),B.screenCoord=[((A.viewBox[2]-A.viewBox[0])*(J.dataCoord[0]-A.dataBox[0])/(A.dataBox[2]-A.dataBox[0])+A.viewBox[0])/A.pixelRatio,(this.canvas.height-(A.viewBox[3]-A.viewBox[1])*(J.dataCoord[1]-A.dataBox[1])/(A.dataBox[3]-A.dataBox[1])-A.viewBox[1])/A.pixelRatio],this.emitPointAction(B,"plotly_hover"),G=this.fullData[B.trace.index]||{},I=B.pointIndex,(H=h.castHoverinfo(G,H,I))&&"all"!==H&&(H=H.split("+"),-1===
H.indexOf("x")&&(B.traceCoord[0]=void 0),-1===H.indexOf("y")&&(B.traceCoord[1]=void 0),-1===H.indexOf("z")&&(B.traceCoord[2]=void 0),-1===H.indexOf("text")&&(B.textLabel=void 0),-1===H.indexOf("name")&&(B.name=void 0)),h.loneHover({x:B.screenCoord[0],y:B.screenCoord[1],xLabel:this.hoverFormatter("xaxis",B.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",B.traceCoord[1]),zLabel:B.traceCoord[2],text:B.textLabel,name:B.name,color:h.castHoverOption(G,I,"bgcolor")||B.color,borderColor:h.castHoverOption(G,
I,"bordercolor"),fontFamily:h.castHoverOption(G,I,"font.family"),fontSize:h.castHoverOption(G,I,"font.size"),fontColor:h.castHoverOption(G,I,"font.color"),nameLength:h.castHoverOption(G,I,"namelength"),textAlign:h.castHoverOption(G,I,"align")},{container:this.svgContainer,gd:this.graphDiv}))}J||this.unhover();A.draw()}};b.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),h.loneUnhover(this.svgContainer))};b.hoverFormatter=
function(A,B){if(void 0!==B)return A=this[A],p.tickText(A,A.c2l(B),"hover").text}},{"../../components/dragelement/helpers":633,"../../components/fx":655,"../../lib/show_no_webgl_msg":770,"../../plots/cartesian/axes":797,"../../registry":880,"../cartesian/autorange":796,"../cartesian/constants":803,"../cartesian/constraints":804,"./camera":835,"./convert":836,"gl-plot2d":298,"gl-select-box":310,"gl-spikes2d":319,"webgl-context":578}],839:[function(b,y,F){y=b("../../plot_api/edit_types").overrideAll;
var q=b("../../components/fx/layout_attributes"),n=b("./scene"),p=b("../get_data").getSubplotData,h=b("../../lib"),a=b("../../constants/xmlns_namespaces");F.name="gl3d";F.attr="scene";F.idRoot="scene";F.idRegex=F.attrRegex=h.counterRegex("scene");F.attributes=b("./layout/attributes");F.layoutAttributes=b("./layout/layout_attributes");F.baseLayoutAttrOverrides=y({hoverlabel:q.hoverlabel},"plot","nested");F.supplyLayoutDefaults=b("./layout/defaults");F.plot=function(f){for(var d=f._fullLayout,l=f._fullData,
k=d._subplots.gl3d,c=0;c<k.length;c++){var e=k[c],g=p(l,"gl3d",e),m=d[e],r=m.camera,u=m._scene;u||(u=new n({id:e,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio,camera:r},d),m._scene=u);u.viewInitial||(u.viewInitial={up:{x:r.up.x,y:r.up.y,z:r.up.z},eye:{x:r.eye.x,y:r.eye.y,z:r.eye.z},center:{x:r.center.x,y:r.center.y,z:r.center.z}});u.plot(g,d,f.layout)}};F.clean=function(f,d,l,k){f=k._subplots.gl3d||[];for(l=0;l<
f.length;l++){var c=f[l];!d[c]&&k[c]._scene&&(k[c]._scene.destroy(),k._infolayer&&k._infolayer.selectAll(".annotation-"+c).remove())}};F.toSVG=function(f){f=f._fullLayout;for(var d=f._subplots.gl3d,l=f._size,k=0;k<d.length;k++){var c=f[d[k]],e=c.domain;c=c._scene;var g=c.toImage("png");f._glimages.append("svg:image").attr({xmlns:a.svg,"xlink:href":g,x:l.l+l.w*e.x[0],y:l.t+l.h*(1-e.y[1]),width:l.w*(e.x[1]-e.x[0]),height:l.h*(e.y[1]-e.y[0]),preserveAspectRatio:"none"});c.destroy()}};F.cleanId=function(f){if(f.match(/^scene[0-9]*$/))return f=
f.substr(5),"1"===f&&(f=""),"scene"+f};F.updateFx=function(f){f=f._fullLayout;for(var d=f._subplots.gl3d,l=0;l<d.length;l++)f[d[l]]._scene.updateFx(f.dragmode,f.hovermode)}},{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../plot_api/edit_types":780,"../get_data":834,"./layout/attributes":840,"./layout/defaults":844,"./layout/layout_attributes":845,"./scene":849}],840:[function(b,y,F){y.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},
{}],841:[function(b,y,F){F=b("../../../components/color");var q=b("../../cartesian/layout_attributes"),n=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;y.exports=b({visible:q.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:F.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},
showaxeslabels:{valType:"boolean",dflt:!0},color:q.color,categoryorder:q.categoryorder,categoryarray:q.categoryarray,title:{text:q.title.text,font:q.title.font},type:n({},q.type,{values:["-","linear","log","date","category"]}),autorange:q.autorange,rangemode:q.rangemode,range:n({},q.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:q.tickmode,nticks:q.nticks,tick0:q.tick0,dtick:q.dtick,tickvals:q.tickvals,
ticktext:q.ticktext,ticks:q.ticks,mirror:q.mirror,ticklen:q.ticklen,tickwidth:q.tickwidth,tickcolor:q.tickcolor,showticklabels:q.showticklabels,tickfont:q.tickfont,tickangle:q.tickangle,tickprefix:q.tickprefix,showtickprefix:q.showtickprefix,ticksuffix:q.ticksuffix,showticksuffix:q.showticksuffix,showexponent:q.showexponent,exponentformat:q.exponentformat,separatethousands:q.separatethousands,tickformat:q.tickformat,tickformatstops:q.tickformatstops,hoverformat:q.hoverformat,showline:q.showline,linecolor:q.linecolor,
linewidth:q.linewidth,showgrid:q.showgrid,gridcolor:n({},q.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:q.gridwidth,zeroline:q.zeroline,zerolinecolor:q.zerolinecolor,zerolinewidth:q.zerolinewidth,_deprecated:{title:q._deprecated.title,titlefont:q._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":615,"../../../lib/extend":739,"../../../plot_api/edit_types":780,"../../cartesian/layout_attributes":811}],842:[function(b,y,F){var q=b("tinycolor2").mix,n=b("../../../lib"),p=
b("../../../plot_api/plot_template"),h=b("./axis_attributes"),a=b("../../cartesian/type_defaults"),f=b("../../cartesian/axis_defaults"),d=["xaxis","yaxis","zaxis"],l=13600/187;y.exports=function(k,c,e){function g(w,D){return n.coerce(m,r,h,w,D)}for(var m,r,u=0;u<d.length;u++){var v=d[u];m=k[v]||{};r=p.newContainer(c,v);r._id=v[0]+e.scene;r._name=v;a(m,r,g,e);f(m,r,g,{font:e.font,letter:v[0],data:e.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,bgColor:e.bgColor,calendar:e.calendar},e.fullLayout);
g("gridcolor",q(r.color,e.bgColor,l).toRgbString());g("title.text",v[0]);r.setScale=n.noop;g("showspikes")&&(g("spikesides"),g("spikethickness"),g("spikecolor",r.color));g("showaxeslabels");g("showbackground")&&g("backgroundcolor")}}},{"../../../lib":749,"../../../plot_api/plot_template":787,"../../cartesian/axis_defaults":799,"../../cartesian/type_defaults":822,"./axis_attributes":841,tinycolor2:548}],843:[function(b,y,F){function q(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];
this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans","Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,
0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=
this.tickPad.slice();this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var n=b("../../../lib/str2rgbarray"),p=b("../../../lib"),h=["xaxis","yaxis","zaxis"];q.prototype.merge=function(a,f){for(var d=0;3>d;++d){var l=f[h[d]];l.visible?(this.labels[d]=a._meta?p.templateString(l.title.text,a._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[d]=n(l.title.font.color)),l.title.font.family&&(this.labelFont[d]=l.title.font.family),
l.title.font.size&&(this.labelSize[d]=l.title.font.size)),"showline"in l&&(this.lineEnable[d]=l.showline),"linecolor"in l&&(this.lineColor[d]=n(l.linecolor)),"linewidth"in l&&(this.lineWidth[d]=l.linewidth),"showgrid"in l&&(this.gridEnable[d]=l.showgrid),"gridcolor"in l&&(this.gridColor[d]=n(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[d]=l.gridwidth),"log"===l.type?this.zeroEnable[d]=!1:"zeroline"in l&&(this.zeroEnable[d]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[d]=n(l.zerolinecolor)),
"zerolinewidth"in l&&(this.zeroLineWidth[d]=l.zerolinewidth),this.lineTickEnable[d]="ticks"in l&&l.ticks?!0:!1,"ticklen"in l&&(this.lineTickLength[d]=this._defaultLineTickLength[d]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[d]=n(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[d]=l.tickwidth),"tickangle"in l&&(this.tickAngle[d]="auto"===l.tickangle?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(this.tickEnable[d]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[d]=
n(l.tickfont.color)),l.tickfont.family&&(this.tickFont[d]=l.tickfont.family),l.tickfont.size&&(this.tickSize[d]=l.tickfont.size)),"mirror"in l?-1!==["ticks","all","allticks"].indexOf(l.mirror)?(this.lineTickMirror[d]=!0,this.lineMirror[d]=!0):!0===l.mirror?(this.lineTickMirror[d]=!1,this.lineMirror[d]=!0):(this.lineTickMirror[d]=!1,this.lineMirror[d]=!1):this.lineMirror[d]=!1,"showbackground"in l&&!1!==l.showbackground?(this.backgroundEnable[d]=!0,this.backgroundColor[d]=n(l.backgroundcolor)):this.backgroundEnable[d]=
!1):(this.tickEnable[d]=!1,this.labelEnable[d]=!1,this.lineEnable[d]=!1,this.lineTickEnable[d]=!1,this.gridEnable[d]=!1,this.zeroEnable[d]=!1,this.backgroundEnable[d]=!1)}};y.exports=function(a,f){var d=new q;d.merge(a,f);return d}},{"../../../lib":749,"../../../lib/str2rgbarray":772}],844:[function(b,y,F){function q(k,c,e,g){var m=e("bgcolor");m=p.combine(m,g.paper_bgcolor);for(var r=["up","center","eye"],u=0;u<r.length;u++)e("camera."+r[u]+".x"),e("camera."+r[u]+".y"),e("camera."+r[u]+".z");e("camera.projection.type");
r=!!e("aspectratio.x")&&!!e("aspectratio.y")&&!!e("aspectratio.z");u=e("aspectmode",r?"manual":"auto");r||(k.aspectratio=c.aspectratio={x:1,y:1,z:1},"manual"===u&&(c.aspectmode="auto"),k.aspectmode=c.aspectmode);r=l(g.fullData,"gl3d",g.id);f(k,c,{font:g.font,scene:g.id,data:r,bgColor:m,calendar:g.calendar,fullLayout:g.fullLayout});h.getComponentMethod("annotations3d","handleDefaults")(k,c,g);c=g.getDfltFromLayout("dragmode");!1===c||c||(c="orbit",k.camera&&k.camera.up?(m=k.camera.up.x,r=k.camera.up.y,
k=k.camera.up.z,0!==k&&(m&&r&&k?.999<k/Math.sqrt(m*m+r*r+k*k)&&(c="turntable"):c="turntable")):c="turntable");e("dragmode",c);e("hovermode",g.getDfltFromLayout("hovermode"))}var n=b("../../../lib"),p=b("../../../components/color"),h=b("../../../registry"),a=b("../../subplot_defaults"),f=b("./axis_defaults"),d=b("./layout_attributes"),l=b("../../get_data").getSubplotData;y.exports=function(k,c,e){var g=1<c._basePlotModules.length;a(k,c,e,{type:"gl3d",attributes:d,handleDefaults:q,fullLayout:c,font:c.font,
fullData:e,getDfltFromLayout:function(m){if(!g&&n.validate(k[m],d[m]))return k[m]},paper_bgcolor:c.paper_bgcolor,calendar:c.calendar})}},{"../../../components/color":615,"../../../lib":749,"../../../registry":880,"../../get_data":834,"../../subplot_defaults":874,"./axis_defaults":842,"./layout_attributes":845}],845:[function(b,y,F){function q(h,a,f){return{x:{valType:"number",dflt:h,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:f,editType:"camera"},editType:"camera"}}
F=b("./axis_attributes");var n=b("../../domain").attributes,p=b("../../../lib/extend").extendFlat;b=b("../../../lib").counterRegex;y.exports={_arrayAttrRegexps:[b("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:p(q(0,0,1),{}),center:p(q(0,0,0),{}),eye:p(q(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:n({name:"scene",
editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},
xaxis:F,yaxis:F,zaxis:F,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":749,"../../../lib/extend":739,"../../domain":824,"./axis_attributes":841}],846:[function(b,y,F){function q(){this.enabled=[!0,!0,!0];this.colors=[[0,
0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var n=b("../../../lib/str2rgbarray"),p=["xaxis","yaxis","zaxis"];q.prototype.merge=function(h){for(var a=0;3>a;++a){var f=h[p[a]];f.visible?(this.enabled[a]=f.showspikes,this.colors[a]=n(f.spikecolor),this.drawSides[a]=f.spikesides,this.lineWidth[a]=f.spikethickness):(this.enabled[a]=!1,this.drawSides[a]=!1)}};y.exports=function(h){var a=new q;a.merge(h);return a}},{"../../../lib/str2rgbarray":772}],847:[function(b,y,F){y.exports=
function(h){for(var a=h.axesOptions,f=h.glplot.axesPixels,d=h.fullSceneLayout,l=[[],[],[]],k=0;3>k;++k){var c=d[p[k]];c._length=(f[k].hi-f[k].lo)*f[k].pixelsPerDataUnit/h.dataScale[k];if(Infinity===Math.abs(c._length)||isNaN(c._length))l[k]=[];else{c._input_range=c.range.slice();c.range[0]=f[k].lo/h.dataScale[k];c.range[1]=f[k].hi/h.dataScale[k];c._m=1/(h.dataScale[k]*f[k].pixelsPerDataUnit);c.range[0]===c.range[1]&&(--c.range[0],c.range[1]+=1);var e=c.tickmode;if("auto"===c.tickmode){c.tickmode=
"linear";var g=c.nticks||n.constrain(c._length/40,4,9);q.autoTicks(c,Math.abs(c.range[1]-c.range[0])/g)}g=q.calcTicks(c,{msUTC:!0});for(var m=0;m<g.length;++m)g[m].x*=h.dataScale[k],"date"===c.type&&(g[m].text=g[m].text.replace(/<br>/g," "));l[k]=g;c.tickmode=e}}a.ticks=l;for(k=0;3>k;++k)for(m=0;2>m;++m)a.bounds[m][k]=h.glplot.bounds[m][k];a=Array(3);for(f=0;3>f;++f){d=l[f];k=Array(d.length);for(c=0;c<d.length;++c)k[c]=d[c].x;a[f]=k}h.contourLevels=a};var q=b("../../cartesian/axes"),n=b("../../../lib"),
p=["xaxis","yaxis","zaxis"]},{"../../../lib":749,"../../cartesian/axes":797}],848:[function(b,y,F){function q(n,p){var h=[0,0,0,0],a,f;for(a=0;4>a;++a)for(f=0;4>f;++f)h[f]+=n[4*a+f]*p[a];return h}y.exports=function(n,p){return q(n.projection,q(n.view,q(n.model,[p[0],p[1],p[2],1])))}},{}],849:[function(b,y,F){function q(B,t){var G=document.createElement("div"),H=B.container;this.graphDiv=B.graphDiv;var I=document.createElementNS("http://www.w3.org/2000/svg","svg");I.style.position="absolute";I.style.top=
I.style.left="0px";I.style.width=I.style.height="100%";I.style["z-index"]=20;I.style["pointer-events"]="none";G.appendChild(I);this.svgContainer=I;G.id=B.id;G.style.position="absolute";G.style.top=G.style.left="0px";G.style.width=G.style.height="100%";H.appendChild(G);this.fullLayout=t;this.id=B.id||"scene";this.fullSceneLayout=t[this.id];this.plotArgs=[[],{},{}];this.axesOptions=u(t,t[this.id]);this.spikeOptions=v(t[this.id]);this.container=G;this.staticMode=!!B.staticPlot;this.pixelRatio=this.pixelRatio||
B.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=l.getComponentMethod("annotations3d","convert");this.drawAnnotations=l.getComponentMethod("annotations3d","draw");this.initializeGLPlot()}function n(B,t,G){B=B.fullSceneLayout;for(var H=0;3>H;H++){var I=A[H],J=I.charAt(0);I=B[I];var L=t[J],E=t[J+"calendar"];J=t["_"+J+"length"];if(k.isArrayOrTypedArray(L))for(var K,N=0;N<(J||L.length);N++)if(k.isArrayOrTypedArray(L[N]))for(var O=0;O<L[N].length;++O)K=
I.d2l(L[N][O],0,E),!isNaN(K)&&isFinite(K)&&(G[0][H]=Math.min(G[0][H],K),G[1][H]=Math.max(G[1][H],K));else K=I.d2l(L[N],0,E),!isNaN(K)&&isFinite(K)&&(G[0][H]=Math.min(G[0][H],K),G[1][H]=Math.max(G[1][H],K));else G[0][H]=Math.min(G[0][H],0),G[1][H]=Math.max(G[1][H],J-1)}}function p(B,t){B=B.fullSceneLayout;for(var G=B.annotations||[],H=0;3>H;H++){var I=A[H],J=I.charAt(0);I=B[I];for(var L=0;L<G.length;L++){var E=G[L];E.visible&&(E=I.r2l(E[J]),!isNaN(E)&&isFinite(E)&&(t[0][H]=Math.min(t[0][H],E),t[1][H]=
Math.max(t[1][H],E)))}}}F=b("gl-plot3d");var h=F.createCamera,a=F.createScene,f=b("webgl-context"),d=b("has-passive-events"),l=b("../../registry"),k=b("../../lib"),c=b("../../plots/cartesian/axes"),e=b("../../components/fx"),g=b("../../lib/str2rgbarray"),m=b("../../lib/show_no_webgl_msg"),r=b("./project"),u=b("./layout/convert"),v=b("./layout/spikes"),w=b("./layout/tick_marks"),D=b("is-mobile")({tablet:!0,featureDetect:!0}),C,x;b=q.prototype;b.prepareOptions=function(){var B={canvas:this.canvas,gl:this.gl,
glOptions:{preserveDrawingBuffer:D,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!x&&(C=document.createElement("canvas"),x=f({canvas:C,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!x))throw Error("error creating static canvas/context for image server");B.gl=x;B.canvas=C}return B};b.tryCreatePlot=
function(){var B=this.prepareOptions(),t=!0;try{this.glplot=a(B)}catch(G){if(this.staticMode)t=!1;else try{k.warn(["webgl setup failed possibly due to",D?"disabling":"enabling","preserveDrawingBuffer config. The device may not be supported by is-mobile module! Inverting preserveDrawingBuffer option in second attempt to create webgl scene."].join(" ")),D=B.glOptions.preserveDrawingBuffer=!B.glOptions.preserveDrawingBuffer,this.glplot=a(B)}catch(H){t=!1}}return t};b.initializeGLCamera=function(){var B=
this.fullSceneLayout.camera;this.camera=h(this.container,{center:[B.center.x,B.center.y,B.center.z],eye:[B.eye.x,B.eye.y,B.eye.z],up:[B.up.x,B.up.y,B.up.z],_ortho:"orthographic"===B.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};b.initializeGLPlot=function(){var B=this;B.initializeGLCamera();if(!B.tryCreatePlot())return m(B);B.traces={};B.make4thDimension();var t=B.graphDiv,G=t.layout,H=function(){var J={};B.isCameraChanged(G)&&(J[B.id+".camera"]=B.getCamera());B.isAspectChanged(G)&&(J[B.id+
".aspectratio"]=B.glplot.getAspectratio(),"manual"!==G[B.id].aspectmode&&(B.fullSceneLayout.aspectmode=G[B.id].aspectmode=J[B.id+".aspectmode"]="manual"));return J},I=function(J){if(!1!==J.fullSceneLayout.dragmode){var L=H();J.saveLayout(G);J.graphDiv.emit("plotly_relayout",L)}};B.glplot.canvas.addEventListener("mouseup",function(){I(B)});B.glplot.canvas.addEventListener("wheel",function(J){if(t._context._scrollZoom.gl3d){if(B.camera._ortho){J=J.deltaX>J.deltaY?1.1:1/1.1;var L=B.glplot.getAspectratio();
B.glplot.setAspectratio({x:J*L.x,y:J*L.y,z:J*L.z})}I(B)}},d?{passive:!1}:!1);B.glplot.canvas.addEventListener("mousemove",function(){if(!1!==B.fullSceneLayout.dragmode&&0!==B.camera.mouseListener.buttons){var J=H();B.graphDiv.emit("plotly_relayouting",J)}});B.staticMode||B.glplot.canvas.addEventListener("webglcontextlost",function(J){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:J,layer:B.id})},!1);B.glplot.oncontextloss=function(){B.recoverContext()};B.glplot.onrender=function(){B.render()};
return!0};b.render=function(){function B(ba,Y){ba=t.fullSceneLayout[ba];return c.tickText(ba,ba.d2l(Y),"hover").text}var t=this,G=t.graphDiv,H=t.svgContainer,I=t.container.getBoundingClientRect(),J=I.width;I=I.height;H.setAttributeNS(null,"viewBox","0 0 "+J+" "+I);H.setAttributeNS(null,"width",J);H.setAttributeNS(null,"height",I);w(t);t.glplot.axes.update(t.axesOptions);for(var L=Object.keys(t.traces),E=null,K=t.glplot.selection,N=0;N<L.length;++N){var O=t.traces[L[N]];"skip"!==O.data.hoverinfo&&
O.handlePick(K)&&(E=O);O.setContourLevels&&O.setContourLevels()}if(null!==E){var Q=r(t.glplot.cameraParams,K.dataCoordinate);O=E.data;L=G._fullData[O.index];N=K.index;var P={xLabel:B("xaxis",K.traceCoordinate[0]),yLabel:B("yaxis",K.traceCoordinate[1]),zLabel:B("zaxis",K.traceCoordinate[2])},T=e.castHoverinfo(L,t.fullLayout,N),V=(T||"").split("+");T=T&&"all"===T;L.hovertemplate||T||(-1===V.indexOf("x")&&(P.xLabel=void 0),-1===V.indexOf("y")&&(P.yLabel=void 0),-1===V.indexOf("z")&&(P.zLabel=void 0),
-1===V.indexOf("text")&&(K.textLabel=void 0),-1===V.indexOf("name")&&(E.name=void 0));var aa=[];"cone"===O.type||"streamtube"===O.type?(P.uLabel=B("xaxis",K.traceCoordinate[3]),(T||-1!==V.indexOf("u"))&&aa.push("u: "+P.uLabel),P.vLabel=B("yaxis",K.traceCoordinate[4]),(T||-1!==V.indexOf("v"))&&aa.push("v: "+P.vLabel),P.wLabel=B("zaxis",K.traceCoordinate[5]),(T||-1!==V.indexOf("w"))&&aa.push("w: "+P.wLabel),P.normLabel=K.traceCoordinate[6].toPrecision(3),(T||-1!==V.indexOf("norm"))&&aa.push("norm: "+
P.normLabel),"streamtube"===O.type&&(P.divergenceLabel=K.traceCoordinate[7].toPrecision(3),(T||-1!==V.indexOf("divergence"))&&aa.push("divergence: "+P.divergenceLabel)),K.textLabel&&aa.push(K.textLabel),V=aa.join("\x3cbr\x3e")):"isosurface"===O.type||"volume"===O.type?(P.valueLabel=c.tickText(t._mockAxis,t._mockAxis.d2l(K.traceCoordinate[3]),"hover").text,aa.push("value: "+P.valueLabel),K.textLabel&&aa.push(K.textLabel),V=aa.join("\x3cbr\x3e")):V=K.textLabel;T={x:K.traceCoordinate[0],y:K.traceCoordinate[1],
z:K.traceCoordinate[2],data:L._input,fullData:L,curveNumber:L.index,pointNumber:N};e.appendArrayPointValue(T,L,N);O._module.eventData&&(T=L._module.eventData(T,K,L,{},N));O={points:[T]};t.fullSceneLayout.hovermode&&e.loneHover({trace:L,x:(.5+.5*Q[0]/Q[3])*J,y:(.5-.5*Q[1]/Q[3])*I,xLabel:P.xLabel,yLabel:P.yLabel,zLabel:P.zLabel,text:V,name:E.name,color:e.castHoverOption(L,N,"bgcolor")||E.color,borderColor:e.castHoverOption(L,N,"bordercolor"),fontFamily:e.castHoverOption(L,N,"font.family"),fontSize:e.castHoverOption(L,
N,"font.size"),fontColor:e.castHoverOption(L,N,"font.color"),nameLength:e.castHoverOption(L,N,"namelength"),textAlign:e.castHoverOption(L,N,"align"),hovertemplate:k.castOption(L,N,"hovertemplate"),hovertemplateLabels:k.extendFlat({},T,P),eventData:[T]},{container:H,gd:G});K.buttons&&5>K.distance?G.emit("plotly_click",O):G.emit("plotly_hover",O);Q=O}else e.loneUnhover(H),G.emit("plotly_unhover",Q);t.drawAnnotations(t)};b.recoverContext=function(){var B=this;B.glplot.dispose();var t=function(){B.glplot.gl.isContextLost()?
requestAnimationFrame(t):B.initializeGLPlot()?B.plot.apply(B,B.plotArgs):k.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(t)};var A=["xaxis","yaxis","zaxis"];b.plot=function(B,t,G){this.plotArgs=[B,t,G];if(!this.glplot.contextLost){var H,I,J=t[this.id];G=G[this.id];this.fullLayout=t;this.fullSceneLayout=J;this.axesOptions.merge(t,J);this.spikeOptions.merge(J);this.setViewport(J);this.updateFx(J.dragmode,J.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;
this.glplot.setClearColor(g(J.bgcolor));this.setConvert(E);B?Array.isArray(B)||(B=[B]):B=[];var L=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(H=0;H<B.length;++H){var E=B[H];!0===E.visible&&0!==E._length&&n(this,E,L)}p(this,L);var K=[1,1,1];for(I=0;3>I;++I)K[I]=L[1][I]===L[0][I]?1:1/(L[1][I]-L[0][I]);this.dataScale=K;this.convertAnnotations(this);for(H=0;H<B.length;++H)E=B[H],!0===E.visible&&0!==E._length&&((L=this.traces[E.uid])?L.data.type===E.type?L.update(E):(L.dispose(),
L=E._module.plot(this,E),this.traces[E.uid]=L):(L=E._module.plot(this,E),this.traces[E.uid]=L),L.name=E.name);E=Object.keys(this.traces);H=0;a:for(;H<E.length;++H){for(I=0;I<B.length;++I)if(B[I].uid===E[H]&&!0===B[I].visible&&0!==B[I]._length)continue a;L=this.traces[E[H]];L.dispose();delete this.traces[E[H]]}this.glplot.objects.sort(function(aa,ba){return aa._trace.data.index-ba._trace.data.index});L=[[0,0,0],[0,0,0]];B={};for(H=0;3>H;++H){E=J[A[H]];I=E.type;I in B?(B[I].acc*=K[H],B[I].count+=1):
B[I]={acc:K[H],count:1};if(E.autorange){L[0][H]=Infinity;L[1][H]=-Infinity;var N=this.glplot.objects,O=this.fullSceneLayout.annotations||[],Q=E._name.charAt(0);for(I=0;I<N.length;I++){var P=N[I],T=P.bounds,V=P._trace.data._pad||0;L[0][H]="ErrorBars"===P.constructor.name&&E._lowerLogErrorBound?Math.min(L[0][H],E._lowerLogErrorBound):Math.min(L[0][H],T[0][H]/K[H]-V);L[1][H]=Math.max(L[1][H],T[1][H]/K[H]+V)}for(I=0;I<O.length;I++)N=O[I],N.visible&&(N=E.r2l(N[Q]),L[0][H]=Math.min(L[0][H],N),L[1][H]=Math.max(L[1][H],
N));"rangemode"in E&&"tozero"===E.rangemode&&(L[0][H]=Math.min(L[0][H],0),L[1][H]=Math.max(L[1][H],0));L[0][H]>L[1][H]?(L[0][H]=-1,L[1][H]=1):(I=L[1][H]-L[0][H],L[0][H]-=I/32,L[1][H]+=I/32);"reversed"===E.autorange&&(E=L[0][H],L[0][H]=L[1][H],L[1][H]=E)}else I=E.range,L[0][H]=E.r2l(I[0]),L[1][H]=E.r2l(I[1]);L[0][H]===L[1][H]&&(--L[0][H],L[1][H]+=1);this.glplot.setBounds(H,{min:L[0][H]*K[H],max:L[1][H]*K[H]})}L=J.aspectmode;if("cube"===L)H=[1,1,1];else if("manual"===L)H=J.aspectratio,H=[H.x,H.y,H.z];
else if("auto"===L||"data"===L){O=[1,1,1];for(H=0;3>H;++H)E=J[A[H]],I=E.type,E=B[I],O[H]=Math.pow(E.acc,1/E.count)/K[H];H="data"===L?O:4>=Math.max.apply(null,O)/Math.min.apply(null,O)?O:[1,1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");J.aspectratio.x=G.aspectratio.x=H[0];J.aspectratio.y=G.aspectratio.y=H[1];J.aspectratio.z=G.aspectratio.z=H[2];this.glplot.setAspectratio(J.aspectratio);this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:J.aspectratio.x,
y:J.aspectratio.y,z:J.aspectratio.z});this.viewInitial.aspectmode||(this.viewInitial.aspectmode=J.aspectmode);J=J.domain||null;t=t._size||null;J&&t&&(G=this.container.style,G.position="absolute",G.left=t.l+J.x[0]*t.w+"px",G.top=t.t+(1-J.y[1])*t.h+"px",G.width=t.w*(J.x[1]-J.x[0])+"px",G.height=t.h*(J.y[1]-J.y[0])+"px");this.glplot.redraw()}};b.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,
this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};b.getCamera=function(){this.camera.view.recalcMatrix(this.camera.view.lastT());var B=this.camera;return{up:{x:B.up[0],y:B.up[1],z:B.up[2]},center:{x:B.center[0],y:B.center[1],z:B.center[2]},eye:{x:B.eye[0],y:B.eye[1],z:B.eye[2]},projection:{type:!0===B._ortho?"orthographic":"perspective"}}};b.setViewport=function(B){var t=B.camera;this.camera.lookAt.apply(this,[[t.eye.x,t.eye.y,t.eye.z],[t.center.x,t.center.y,
t.center.z],[t.up.x,t.up.y,t.up.z]]);this.glplot.setAspectratio(B.aspectratio);"orthographic"===t.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())};b.isCameraChanged=function(B){var t=this.getCamera();B=k.nestedProperty(B,this.id+".camera").get();var G=!1;if(void 0===B)G=!0;else{for(var H=0;3>H;H++)for(var I=0;3>I;I++){var J=["up","center","eye"],L=["x","y","z"];if(!B[J[H]]||t[J[H]][L[I]]!==B[J[H]][L[I]]){G=!0;break}}if(!B.projection||
t.projection&&t.projection.type!==B.projection.type)G=!0}return G};b.isAspectChanged=function(B){var t=this.glplot.getAspectratio();B=k.nestedProperty(B,this.id+".aspectratio").get();return void 0===B||B.x!==t.x||B.y!==t.y||B.z!==t.z};b.saveLayout=function(B){var t=this.fullLayout,G=this.isCameraChanged(B),H=this.isAspectChanged(B),I=G||H;if(I){var J={};if(G){var L=this.getCamera();var E=k.nestedProperty(B,this.id+".camera");var K=E.get();J[this.id+".camera"]=K}if(H){var N=this.glplot.getAspectratio();
var O=k.nestedProperty(B,this.id+".aspectratio");K=O.get();J[this.id+".aspectratio"]=K}l.call("_storeDirectGUIEdit",B,t._preGUI,J);G&&(E.set(L),k.nestedProperty(t,this.id+".camera").set(L));H&&(O.set(N),k.nestedProperty(t,this.id+".aspectratio").set(N),this.glplot.redraw())}return I};b.updateFx=function(B,t){var G=this.camera;if(G)if("orbit"===B)G.mode="orbit",G.keyBindingMode="rotate";else if("turntable"===B){G.up=[0,0,1];G.mode="turntable";G.keyBindingMode="rotate";var H=this.graphDiv;B=H._fullLayout;
G=this.fullSceneLayout.camera;var I=G.up.x,J=G.up.y,L=G.up.z;.999>L/Math.sqrt(I*I+J*J+L*L)&&(I=this.id+".camera.up",J={x:0,y:0,z:1},L={},L[I]=J,H=H.layout,l.call("_storeDirectGUIEdit",H,B._preGUI,L),G.up=J,k.nestedProperty(H,I).set(J))}else G.keyBindingMode=B;this.fullSceneLayout.hovermode=t};b.toImage=function(B){B||(B="png");this.staticMode&&this.container.appendChild(C);this.glplot.redraw();var t=this.glplot.gl,G=t.drawingBufferWidth,H=t.drawingBufferHeight;t.bindFramebuffer(t.FRAMEBUFFER,null);
var I=new Uint8Array(G*H*4);t.readPixels(0,0,G,H,t.RGBA,t.UNSIGNED_BYTE,I);t=0;for(var J=H-1;t<J;++t,--J)for(var L=0;L<G;++L)for(var E=0;4>E;++E){var K=4*(G*t+L)+E,N=4*(G*J+L)+E,O=I[K];I[K]=I[N];I[N]=O}for(t=0;t<H;++t)for(J=0;J<G;++J)if(L=4*(G*t+J),E=I[L+3],0<E)for(E=255/E,K=0;3>K;++K)I[L+K]=Math.min(E*I[L+K],255);t=document.createElement("canvas");t.width=G;t.height=H;J=t.getContext("2d");G=J.createImageData(G,H);G.data.set(I);J.putImageData(G,0,0);switch(B){case "jpeg":B=t.toDataURL("image/jpeg");
break;case "webp":B=t.toDataURL("image/webp");break;default:B=t.toDataURL("image/png")}this.staticMode&&this.container.removeChild(C);return B};b.setConvert=function(){for(var B=0;3>B;B++){var t=this.fullSceneLayout[A[B]];c.setConvert(t,this.fullLayout);t.setScale=k.noop}};b.make4thDimension=function(){var B=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};c.setConvert(this._mockAxis,B)};y.exports=q},{"../../components/fx":655,"../../lib":749,"../../lib/show_no_webgl_msg":770,
"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"../../registry":880,"./layout/convert":843,"./layout/spikes":846,"./layout/tick_marks":847,"./project":848,"gl-plot3d":301,"has-passive-events":415,"is-mobile":441,"webgl-context":578}],850:[function(b,y,F){y.exports=function(q,n,p,h){h=h||q.length;for(var a=Array(h),f=0;f<h;f++)a[f]=[q[f],n[f],p[f]];return a}},{}],851:[function(b,y,F){F=b("./font_attributes");var q=b("./animation_attributes"),n=b("../components/color/attributes"),p=b("../components/shapes/draw_newshape/attributes"),
h=b("./pad_attributes");b=b("../lib/extend").extendFlat;var a=F({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif';a.size.dflt=12;a.color.dflt=n.defaultLine;y.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:F({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,
max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:b(h({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,
dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",
dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:n.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:n.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:n.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",
editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},newshape:p.newshape,activeshape:p.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:b({},
q.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:F({editType:"layoutstyle"})}}},{"../components/color/attributes":614,"../components/shapes/draw_newshape/attributes":697,"../lib/extend":739,"./animation_attributes":792,"./font_attributes":825,"./pad_attributes":859}],852:[function(b,y,F){b={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:'\x3ca href\x3d"http://www.openstreetmap.org/about/" target\x3d"_blank"\x3e OpenStreetMap\x3c/a\x3e',
tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e CARTO\x3c/a\x3e',
tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e CARTO\x3c/a\x3e',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",
type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by-sa/3.0"\x3eCC BY SA\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}};F=Object.keys(b);y.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:"basic streets outdoors light dark satellite satellite-streets".split(" "),styleValueDflt:"basic",stylesNonMapbox:b,styleValuesNonMapbox:F,traceLayerPrefix:"plotly-trace-layer-",
layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@1.10.1.",noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",
F.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",
path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",
polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;",
"ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3Csvg viewBox\x3d"0 0 20 20" xmlns\x3d"http://www.w3.org/2000/svg"%3E %3Cpath fill\x3d"%23333333" fill-rule\x3d"evenodd" d\x3d"M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',
"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px",
"ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3C?xml version\x3d"1.0" encoding\x3d"utf-8"?%3E %3Csvg version\x3d"1.1" id\x3d"Layer_1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px" viewBox\x3d"0 0 21 21" style\x3d"enable-background:new 0 0 21 21;" xml:space\x3d"preserve"%3E%3Cg transform\x3d"translate(0,0.01)"%3E%3Cpath d\x3d"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3Cpath d\x3d"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpath d\x3d"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpolygon points\x3d"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},
{}],853:[function(b,y,F){var q=b("../../lib");y.exports=function(n,p){var h=n.split(" ");n=h[0];h=h[1];var a=q.isArrayOrTypedArray(p)?q.mean(p):p;p=.5+a/100;a=1.5+a/100;var f=["",""],d=[0,0];switch(n){case "top":f[0]="top";d[1]=-a;break;case "bottom":f[0]="bottom",d[1]=a}switch(h){case "left":f[1]="right";d[0]=-p;break;case "right":f[1]="left",d[0]=p}return{anchor:f[0]&&f[1]?f.join("-"):f[0]?f[0]:f[1]?f[1]:"center",offset:d}}},{"../../lib":749}],854:[function(b,y,F){function q(e){return"string"===
typeof e&&(-1!==c.styleValuesMapbox.indexOf(e)||0===e.indexOf("mapbox://"))}var n=b("mapbox-gl"),p=b("../../lib"),h=b("../../plots/get_data").getSubplotCalcData,a=b("../../constants/xmlns_namespaces"),f=b("d3"),d=b("../../components/drawing"),l=b("../../lib/svg_text_utils"),k=b("./mapbox"),c=F.constants=b("./constants");F.name="mapbox";F.attr="subplot";F.idRoot="mapbox";F.idRegex=F.attrRegex=p.counterRegex("mapbox");F.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};F.layoutAttributes=
b("./layout_attributes");F.supplyLayoutDefaults=b("./layout_defaults");F.plot=function(e){var g=e._fullLayout,m=e.calcdata,r=g._subplots.mapbox;if(n.version!==c.requiredVersion)throw Error(c.wrongVersionErrorMsg);var u=e._fullLayout;if(""===e._context.mapboxAccessToken)u="";else{for(var v=[],w=[],D=!1,C=!1,x=0;x<r.length;x++){var A=u[r[x]],B=A.accesstoken;q(A.style)&&(B?p.pushUnique(v,B):(q(A._input.style)&&(p.error("Uses Mapbox map style, but did not set an access token."),D=!0),C=!0));B&&p.pushUnique(w,
B)}if(C)throw e=D?c.noAccessTokenErrorMsg:c.missingStyleErrorMsg,p.error(e),Error(e);v.length?(1<v.length&&p.warn(c.multipleTokensErrorMsg),u=v[0]):(w.length&&p.log(["Listed mapbox access token(s)",w.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),u="")}n.accessToken=u;for(u=0;u<r.length;u++)v=r[u],w=h(m,"mapbox",v),D=g[v],C=D._subplot,C||(C=new k(e,v),g[v]._subplot=C),C.viewInitial||(C.viewInitial={center:p.extendFlat({},D.center),zoom:D.zoom,bearing:D.bearing,pitch:D.pitch}),
C.plot(w,g,e._promises)};F.clean=function(e,g,m,r){e=r._subplots.mapbox||[];for(m=0;m<e.length;m++){var u=e[m];!g[u]&&r[u]._subplot&&r[u]._subplot.destroy()}};F.toSVG=function(e){for(var g=e._fullLayout,m=g._subplots.mapbox,r=g._size,u=0;u<m.length;u++){var v=g[m[u]],w=v.domain,D=v._subplot.toImage("png");g._glimages.append("svg:image").attr({xmlns:a.svg,"xlink:href":D,x:r.l+r.w*w.x[0],y:r.t+r.h*(1-w.y[1]),width:r.w*(w.x[1]-w.x[0]),height:r.h*(w.y[1]-w.y[0]),preserveAspectRatio:"none"});v=f.select(v._subplot.div);
null!==v.select(".mapboxgl-ctrl-logo").node().offsetParent&&(D=g._glimages.append("g"),D.attr("transform","translate("+(r.l+r.w*w.x[0]+10)+", "+(r.t+r.h*(1-w.y[0])-31)+")"),D.append("path").attr("d",c.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),D.append("path").attr("d",c.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),D.append("path").attr("d",c.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),D.append("polygon").attr("points",
c.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"}));var C=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map","");v=g._glimages.append("g");var x=v.append("text");x.text(C).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":C});var A=d.bBox(x.node());D=r.w*(w.x[1]-w.x[0]);A.width>D/2&&(A=C.split("|").join("\x3cbr\x3e"),x.text(A).attr("data-unformatted",A).call(l.convertToTspans,
e),A=d.bBox(x.node()));x.attr("transform","translate(-3, "+(-A.height+8)+")");v.insert("rect",".static-attribution").attr({x:-A.width-6,y:-A.height-3,width:A.width+6,height:A.height+3,fill:"rgba(255, 255, 255, 0.75)"});x=1;A.width+6>D&&(x=D/(A.width+6));w=[r.l+r.w*w.x[1],r.t+r.h*(1-w.y[0])];v.attr("transform","translate("+w[0]+","+w[1]+") scale("+x+")")}};F.updateFx=function(e){e=e._fullLayout;for(var g=e._subplots.mapbox,m=0;m<g.length;m++)e[g[m]]._subplot.updateFx(e)}},{"../../components/drawing":637,
"../../constants/xmlns_namespaces":725,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/get_data":834,"./constants":852,"./layout_attributes":856,"./layout_defaults":857,"./mapbox":858,d3:169,"mapbox-gl":447}],855:[function(b,y,F){function q(l,k){this.subplot=l;this.uid=l.uid+"-"+k;this.index=k;this.idSource="source-"+this.uid;this.idLayer=d.layoutLayerPrefix+this.uid;this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function n(l){if(!l.visible)return!1;l=l.source;
if(Array.isArray(l)&&0<l.length){for(var k=0;k<l.length;k++)if("string"!==typeof l[k]||0===l[k].length)return!1;return!0}return h.isPlainObject(l)||"string"===typeof l&&0<l.length}function p(l){var k={},c={};switch(l.type){case "circle":h.extendFlat(c,{"circle-radius":l.circle.radius,"circle-color":l.color,"circle-opacity":l.opacity});break;case "line":h.extendFlat(c,{"line-width":l.line.width,"line-color":l.color,"line-opacity":l.opacity,"line-dasharray":l.line.dash});break;case "fill":h.extendFlat(c,
{"fill-color":l.color,"fill-outline-color":l.fill.outlinecolor,"fill-opacity":l.opacity});break;case "symbol":var e=l.symbol,g=f(e.textposition,e.iconsize);h.extendFlat(k,{"icon-image":e.icon+"-15","icon-size":e.iconsize/10,"text-field":e.text,"text-size":e.textfont.size,"text-anchor":g.anchor,"text-offset":g.offset,"symbol-placement":e.placement});h.extendFlat(c,{"icon-color":l.color,"text-color":e.textfont.color,"text-opacity":l.opacity});break;case "raster":h.extendFlat(c,{"raster-fade-duration":0,
"raster-opacity":l.opacity})}return{layout:k,paint:c}}var h=b("../../lib"),a=b("../../lib/svg_text_utils").sanitizeHTML,f=b("./convert_text_opts"),d=b("./constants");b=q.prototype;b.update=function(l){this.visible?this.needsNewImage(l)?this.updateImage(l):this.needsNewSource(l)?(this.removeLayer(),this.updateSource(l),this.updateLayer(l)):this.needsNewLayer(l)?this.updateLayer(l):this.updateStyle(l):(this.updateSource(l),this.updateLayer(l));this.visible=n(l)};b.needsNewImage=function(l){return this.subplot.map.getSource(this.idSource)&&
"image"===this.sourceType&&"image"===l.sourcetype&&(this.source!==l.source||JSON.stringify(this.coordinates)!==JSON.stringify(l.coordinates))};b.needsNewSource=function(l){return this.sourceType!==l.sourcetype||this.source!==l.source||this.layerType!==l.type};b.needsNewLayer=function(l){return this.layerType!==l.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};b.updateImage=function(l){this.subplot.map.getSource(this.idSource).updateImage({url:l.source,coordinates:l.coordinates})};
b.updateSource=function(l){var k=this.subplot.map;k.getSource(this.idSource)&&k.removeSource(this.idSource);this.sourceType=l.sourcetype;this.source=l.source;if(n(l)){var c=l.sourcetype,e=l.source,g={type:c};if("geojson"===c)var m="data";else"vector"===c?m="string"===typeof e?"url":"tiles":"raster"===c?(m="tiles",g.tileSize=256):"image"===c&&(m="url",g.coordinates=l.coordinates);g[m]=e;l.sourceattribution&&(g.attribution=a(l.sourceattribution));k.addSource(this.idSource,g)}};b.updateLayer=function(l){var k=
this.subplot,c=p(l),e=this.subplot.belowLookup["layout-"+this.index];if("traces"===e)for(var g=k.getMapLayers(),m=0;m<g.length;m++){var r=g[m].id;if("string"===typeof r&&0===r.indexOf(d.traceLayerPrefix)){var u=r;break}}else u=e;this.removeLayer();n(l)&&k.addLayer({id:this.idLayer,source:this.idSource,"source-layer":l.sourcelayer||"",type:l.type,minzoom:l.minzoom,maxzoom:l.maxzoom,layout:c.layout,paint:c.paint},u);this.layerType=l.type;this.below=e};b.updateStyle=function(l){n(l)&&(l=p(l),this.subplot.setOptions(this.idLayer,
"setLayoutProperty",l.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",l.paint))};b.removeLayer=function(){var l=this.subplot.map;l.getLayer(this.idLayer)&&l.removeLayer(this.idLayer)};b.dispose=function(){var l=this.subplot.map;l.getLayer(this.idLayer)&&l.removeLayer(this.idLayer);l.getSource(this.idSource)&&l.removeSource(this.idSource)};y.exports=function(l,k,c){l=new q(l,k);l.update(c);return l}},{"../../lib":749,"../../lib/svg_text_utils":773,"./constants":852,"./convert_text_opts":853}],
856:[function(b,y,F){F=b("../../lib");var q=b("../../components/color").defaultLine,n=b("../domain").attributes,p=b("../font_attributes"),h=b("../../traces/scatter/attributes").textposition,a=b("../../plot_api/edit_types").overrideAll,f=b("../../plot_api/plot_template").templatedArray;b=b("./constants");p=p({});p.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(y.exports=a({_arrayAttrRegexps:[F.counterRegex("mapbox",".layers",!0)],domain:n({name:"mapbox"}),accesstoken:{valType:"string",
noBlank:!0,strict:!0},style:{valType:"any",values:b.styleValuesMapbox.concat(b.styleValuesNonMapbox),dflt:b.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:f("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},
type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:q},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:q}},symbol:{icon:{valType:"string",
dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:p,textposition:F.extendFlat({},h,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":615,"../../lib":749,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../traces/scatter/attributes":1155,"../domain":824,"../font_attributes":825,"./constants":852}],
857:[function(b,y,F){function q(d,l,k,c){k("accesstoken",c.accessToken);k("style");k("center.lon");k("center.lat");k("zoom");k("bearing");k("pitch");a(d,l,{name:"layers",handleItemDefaults:n});l._input=d}function n(d,l){function k(m,r){return p.coerce(d,l,f.layers,m,r)}if(k("visible")){var c=k("sourcetype"),e="raster"===c||"image"===c;k("source");k("sourceattribution");"vector"===c&&k("sourcelayer");"image"===c&&k("coordinates");var g;e&&(g="raster");c=k("type",g);e&&"raster"!==c&&(c=l.type="raster",
p.log("Source types *raster* and *image* must drawn *raster* layer type."));k("below");k("color");k("opacity");k("minzoom");k("maxzoom");"circle"===c&&k("circle.radius");"line"===c&&(k("line.width"),k("line.dash"));"fill"===c&&k("fill.outlinecolor");"symbol"===c&&(k("symbol.icon"),k("symbol.iconsize"),k("symbol.text"),p.coerceFont(k,"symbol.textfont"),k("symbol.textposition"),k("symbol.placement"))}}var p=b("../../lib"),h=b("../subplot_defaults"),a=b("../array_container_defaults"),f=b("./layout_attributes");
y.exports=function(d,l,k){h(d,l,k,{type:"mapbox",attributes:f,handleDefaults:q,partition:"y",accessToken:l._mapboxAccessToken})}},{"../../lib":749,"../array_container_defaults":793,"../subplot_defaults":874,"./layout_attributes":856}],858:[function(b,y,F){function q(A,B){this.id=B;this.gd=A;B=A._fullLayout;A=A._context;this.container=B._glcontainer.node();this.isStatic=A.staticPlot;this.uid=B._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(B);this.styleObj=this.accessToken=
this.map=null;this.traceHash={};this.layerList=[];this.belowLookup={};this.wheeling=this.dragging=!1}function n(A){var B={};a.isPlainObject(A)?(B.id=A.id,B.style=A):"string"===typeof A?(B.id=A,-1!==D.styleValuesMapbox.indexOf(A)?B.style=D.styleUrlPrefix+A+"-"+D.styleUrlSuffix:B.style=D.stylesNonMapbox[A]?D.stylesNonMapbox[A]:A):(B.id=D.styleValueDflt,B.style=D.styleUrlPrefix+D.styleValueDflt+"-"+D.styleUrlSuffix);B.transition={duration:0,delay:0};return B}function p(A){return[A.lon,A.lat]}var h=b("mapbox-gl"),
a=b("../../lib"),f=b("../../lib/geo_location_utils"),d=b("../../registry"),l=b("../cartesian/axes"),k=b("../../components/dragelement"),c=b("../../components/fx");F=b("../../components/dragelement/helpers");var e=F.rectMode,g=F.drawMode,m=F.selectMode,r=b("../cartesian/select").prepSelect,u=b("../cartesian/select").clearSelect,v=b("../cartesian/select").clearSelectionsCache,w=b("../cartesian/select").selectOnClick,D=b("./constants"),C=b("./layers");b=q.prototype;b.plot=function(A,B,t){var G=this,
H=B[G.id];G.map&&H.accesstoken!==G.accessToken&&(G.map.remove(),G.map=null,G.styleObj=null,G.traceHash={},G.layerList=[]);H=G.map?new Promise(function(I,J){G.updateMap(A,B,I,J)}):new Promise(function(I,J){G.createMap(A,B,I,J)});t.push(H)};b.createMap=function(A,B,t,G){var H=this,I=B[H.id],J=H.styleObj=n(I.style);H.accessToken=I.accesstoken;var L=H.map=(new h.Map({container:H.div,style:J.style,center:p(I.center),zoom:I.zoom,bearing:I.bearing,pitch:I.pitch,interactive:!H.isStatic,preserveDrawingBuffer:H.isStatic,
doubleClickZoom:!1,boxZoom:!1,attributionControl:!1})).addControl(new h.AttributionControl({compact:!0}));L._canvas.style.left="0px";L._canvas.style.top="0px";H.rejectOnError(G);H.isStatic||H.initFx(A,B);I=[];I.push(new Promise(function(E){L.once("load",E)}));I=I.concat(f.fetchTraceGeoData(A));Promise.all(I).then(function(){H.fillBelowLookup(A,B);H.updateData(A);H.updateLayout(B);H.resolveOnRender(t)}).catch(G)};b.updateMap=function(A,B,t,G){var H=this,I=H.map,J=B[this.id];H.rejectOnError(G);var L=
[];J=n(J.style);JSON.stringify(H.styleObj)!==JSON.stringify(J)&&(H.styleObj=J,I.setStyle(J.style),H.traceHash={},L.push(new Promise(function(E){I.once("styledata",E)})));L=L.concat(f.fetchTraceGeoData(A));Promise.all(L).then(function(){H.fillBelowLookup(A,B);H.updateData(A);H.updateLayout(B);H.resolveOnRender(t)}).catch(G)};b.fillBelowLookup=function(A,B){var t=B[this.id].layers,G,H=this.belowLookup={},I=!1;for(B=0;B<A.length;B++){var J=A[B][0].trace,L=J._module;"string"===typeof J.below?G=J.below:
L.getBelow&&(G=L.getBelow(J,this));""===G&&(I=!0);H["trace-"+J.uid]=G||""}for(B=0;B<t.length;B++)G=t[B],G="string"===typeof G.below?G.below:I?"traces":"",H["layout-"+B]=G;A={};for(var E in H)G=H[E],A[G]?A[G].push(E):A[G]=[E];for(G in A)if(H=A[G],1<H.length)for(B=0;B<H.length;B++)E=H[B],0===E.indexOf("trace-")?(E=E.split("trace-")[1],this.traceHash[E]&&(this.traceHash[E].below=null)):0===E.indexOf("layout-")&&(E=E.split("layout-")[1],this.layerList[E]&&(this.layerList[E].below=null))};var x={choroplethmapbox:0,
densitymapbox:1,scattermapbox:2};b.updateData=function(A){var B=this.traceHash,t,G=A.slice().sort(function(E,K){return x[E[0].trace.type]-x[K[0].trace.type]});for(t=0;t<G.length;t++){var H=G[t];var I=H[0].trace;var J=B[I.uid];var L=!1;J&&(J.type===I.type?(J.update(H),L=!0):J.dispose());!L&&I._module&&(B[I.uid]=I._module.plot(this,H))}G=Object.keys(B);t=0;a:for(;t<G.length;t++){H=G[t];for(J=0;J<A.length;J++)if(I=A[J][0].trace,H===I.uid)continue a;J=B[H];J.dispose();delete B[H]}};b.updateLayout=function(A){var B=
this.map,t=A[this.id];this.dragging||this.wheeling||(B.setCenter(p(t.center)),B.setZoom(t.zoom),B.setBearing(t.bearing),B.setPitch(t.pitch));this.updateLayers(A);this.updateFramework(A);this.updateFx(A);this.map.resize();this.gd._context._scrollZoom.mapbox?B.scrollZoom.enable():B.scrollZoom.disable()};b.resolveOnRender=function(A){var B=this.map;B.on("render",function G(){B.loaded()&&(B.off("render",G),setTimeout(A,10))})};b.rejectOnError=function(A){function B(){A(Error(D.mapOnErrorMsg))}var t=this.map;
t.once("error",B);t.once("style.error",B);t.once("source.error",B);t.once("tile.error",B);t.once("layer.error",B)};b.createFramework=function(A){var B=this,t=B.div=document.createElement("div");t.id=B.uid;t.style.position="absolute";B.container.appendChild(t);B.xaxis={_id:"x",c2p:function(G){return B.project(G).x}};B.yaxis={_id:"y",c2p:function(G){return B.project(G).y}};B.updateFramework(A);B.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};l.setConvert(B.mockAxis,A)};b.initFx=function(A,
B){function t(){c.loneUnhover(B._hoverlayer)}function G(){var L=H.getView();I.emit("plotly_relayouting",H.getViewEditsWithDerived(L))}var H=this,I=H.gd,J=H.map;J.on("moveend",function(L){if(H.map){var E=I._fullLayout;if(L.originalEvent||H.wheeling){var K=E[H.id];d.call("_storeDirectGUIEdit",I.layout,E._preGUI,H.getViewEdits(K));var N=H.getView();K._input.center=K.center=N.center;K._input.zoom=K.zoom=N.zoom;K._input.bearing=K.bearing=N.bearing;K._input.pitch=K.pitch=N.pitch;I.emit("plotly_relayout",
H.getViewEditsWithDerived(N))}L.originalEvent&&"mouseup"===L.originalEvent.type?H.dragging=!1:H.wheeling&&(H.wheeling=!1);E._rehover&&E._rehover()}});J.on("wheel",function(){H.wheeling=!0});J.on("mousemove",function(L){var E=H.div.getBoundingClientRect();L.clientX=L.point.x+E.left;L.clientY=L.point.y+E.top;L.target.getBoundingClientRect=function(){return E};H.xaxis.p2c=function(){return L.lngLat.lng};H.yaxis.p2c=function(){return L.lngLat.lat};I._fullLayout._rehover=function(){I._fullLayout._hoversubplot===
H.id&&I._fullLayout[H.id]&&c.hover(I,L,H.id)};c.hover(I,L,H.id);I._fullLayout._hoversubplot=H.id});J.on("dragstart",function(){H.dragging=!0;t()});J.on("zoomstart",t);J.on("mouseout",function(){I._fullLayout._hoversubplot=null});J.on("drag",G);J.on("zoom",G);J.on("dblclick",function(){var L=I._fullLayout[H.id];d.call("_storeDirectGUIEdit",I.layout,I._fullLayout._preGUI,H.getViewEdits(L));var E=H.viewInitial;J.setCenter(p(E.center));J.setZoom(E.zoom);J.setBearing(E.bearing);J.setPitch(E.pitch);E=H.getView();
L._input.center=L.center=E.center;L._input.zoom=L.zoom=E.zoom;L._input.bearing=L.bearing=E.bearing;L._input.pitch=L.pitch=E.pitch;I.emit("plotly_doubleclick",null);I.emit("plotly_relayout",H.getViewEditsWithDerived(E))});H.clearSelect=function(){v(H.dragOptions);u(H.dragOptions.gd)};H.onClickInPanFn=function(L){return function(E){var K=I._fullLayout.clickmode;-1<K.indexOf("select")&&w(E.originalEvent,I,[H.xaxis],[H.yaxis],H.id,L);-1<K.indexOf("event")&&c.click(I,E.originalEvent)}}};b.updateFx=function(A){function B(L){L=
t.map.unproject(L);return[L.lng,L.lat]}var t=this,G=t.map,H=t.gd;if(!t.isStatic){var I=A.dragmode;var J=e(I)?function(L,E){(L.range={})[t.id]=[B([E.xmin,E.ymin]),B([E.xmax,E.ymax])]}:function(L,E,K){(L.lassoPoints={})[t.id]=K.filtered.map(B)};t.dragOptions=a.extendDeep(t.dragOptions||{},{dragmode:A.dragmode,element:t.div,gd:H,plotinfo:{id:t.id,domain:A[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:J},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id});G.off("click",t.onClickInPanHandler);m(I)||
g(I)?(G.dragPan.disable(),G.on("zoomstart",t.clearSelect),t.dragOptions.prepFn=function(L,E,K){r(L,E,K,t.dragOptions,I)},k.init(t.dragOptions)):(G.dragPan.enable(),G.off("zoomstart",t.clearSelect),t.div.onmousedown=null,t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),G.on("click",t.onClickInPanHandler))}};b.updateFramework=function(A){var B=A[this.id].domain;A=A._size;var t=this.div.style;t.width=A.w*(B.x[1]-B.x[0])+"px";t.height=A.h*(B.y[1]-B.y[0])+"px";t.left=A.l+B.x[0]*A.w+"px";t.top=A.t+
(1-B.y[1])*A.h+"px";this.xaxis._offset=A.l+B.x[0]*A.w;this.xaxis._length=A.w*(B.x[1]-B.x[0]);this.yaxis._offset=A.t+(1-B.y[1])*A.h;this.yaxis._length=A.h*(B.y[1]-B.y[0])};b.updateLayers=function(A){A=A[this.id].layers;var B=this.layerList,t;if(A.length!==B.length){for(t=0;t<B.length;t++)B[t].dispose();B=this.layerList=[];for(t=0;t<A.length;t++)B.push(C(this,t,A[t]))}else for(t=0;t<A.length;t++)B[t].update(A[t])};b.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};
b.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};b.setOptions=function(A,B,t){for(var G in t)this.map[B](A,G,t[G])};b.getMapLayers=function(){return this.map.getStyle().layers};b.addLayer=function(A,B){var t=this.map;if("string"===typeof B){if(""===B){t.addLayer(A,B);return}for(var G=this.getMapLayers(),H=0;H<G.length;H++)if(B===G[H].id){t.addLayer(A,B);return}a.warn(["Trying to add layer with *below* value",B,"referencing a layer that does not exist or that does not yet exist."].join(" "))}t.addLayer(A)};
b.project=function(A){return this.map.project(new h.LngLat(A[0],A[1]))};b.getView=function(){var A=this.map,B=A.getCenter();B={lon:B.lng,lat:B.lat};var t=A.getCanvas(),G=t.width;t=t.height;return{center:B,zoom:A.getZoom(),bearing:A.getBearing(),pitch:A.getPitch(),_derived:{coordinates:[A.unproject([0,0]).toArray(),A.unproject([G,0]).toArray(),A.unproject([G,t]).toArray(),A.unproject([0,t]).toArray()]}}};b.getViewEdits=function(A){for(var B=this.id,t=["center","zoom","bearing","pitch"],G={},H=0;H<
t.length;H++){var I=t[H];G[B+"."+I]=A[I]}return G};b.getViewEditsWithDerived=function(A){var B=this.id,t=this.getViewEdits(A);t[B+"._derived"]=A._derived;return t};y.exports=q},{"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/fx":655,"../../lib":749,"../../lib/geo_location_utils":742,"../../registry":880,"../cartesian/axes":797,"../cartesian/select":816,"./constants":852,"./layers":855,"mapbox-gl":447}],859:[function(b,y,F){y.exports=function(q){q=q.editType;
return{t:{valType:"number",dflt:0,editType:q},r:{valType:"number",dflt:0,editType:q},b:{valType:"number",dflt:0,editType:q},l:{valType:"number",dflt:0,editType:q},editType:q}}},{}],860:[function(b,y,F){function q(P,T){T.text("");T=T.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(P._context.linkText+" "+String.fromCharCode(187));if(P._context.sendData)T.on("click",function(){L.sendDataToCloud(P)});else{var V=window.location.pathname.split("/"),
aa=window.location.search;T.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+V[2].split(".")[0]+"/"+V[1]+aa})}}function n(P,T){function V(qa,oa){la[oa]=qa;pa[qa]=1}function aa(qa,oa){if(qa&&"string"===typeof qa&&!pa[qa])return V(qa,oa),!0}var ba=T.length,Y=[],ea;for(ea=0;ea<P.length;ea++){var da=P[ea]._fullInput;da!==ca&&Y.push(da);var ca=da}P=Y.length;var la=Array(ba),pa={};for(ea=0;ea<ba;ea++)ca=T[ea].uid,"number"===typeof ca&&(ca=String(ca)),aa(ca,ea)||ea<P&&aa(Y[ea].uid,ea)||V(D.randstr(pa),
ea);return la}function p(P,T){function V(la){for(var pa=!0,qa=0;qa<T.length;qa++){var oa=T[qa];Y[oa]||(la[oa]?Y[oa]=la[oa]:pa=!1)}pa&&(ba=!0)}var aa=P._context.locale;aa||"en-US"===aa;for(var ba=!1,Y={},ea=0;2>ea;ea++){for(var da=P._context.locales,ca=0;2>ca;ca++){if(da=(da[aa]||{}).format)if(V(da),ba)break;da=u.localeRegistry}ca=aa.split("-")[0];if(ba||ca===aa)break;aa=ca}ba||V(u.localeRegistry.en.format);return Y}function h(P){P=P.transforms;if(Array.isArray(P)&&P.length)for(var T=0;T<P.length;T++){var V=
P[T];if((V=V._module||E[V.type])&&V.makesData)return!0}return!1}function a(P,T,V,aa){for(var ba=P.transforms,Y=[P],ea=0;ea<ba.length;ea++){var da=ba[ea],ca=E[da.type];ca&&ca.transform&&(Y=ca.transform(Y,{transform:da,fullTrace:P,fullData:T,layout:V,fullLayout:aa,transformIndex:ea}))}return Y}function f(P){return"string"===typeof P&&"px"===P.substr(P.length-2)&&parseFloat(P)}function d(P){var T=P.margin;P._size||(T=P._size={l:Math.round(T.l),r:Math.round(T.r),t:Math.round(T.t),b:Math.round(T.b),p:Math.round(T.pad)},
T.w=Math.round(P.width)-T.l-T.r,T.h=Math.round(P.height)-T.t-T.b);P._pushmargin||(P._pushmargin={});P._pushmarginIds||(P._pushmarginIds={})}function l(P,T,V){function aa(da){if(da)for(;da.length;)da.shift()}function ba(da){if(P._transitionData)return aa(P._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(V.redraw)return u.call("redraw",P)}).then(function(){P._transitioning=!1;P._transitioningWithDuration=!1;P.emit("plotly_transitioned",[])}).then(da)}var Y=!1,ea=D.syncOrAsync([L.previousPromises,
function(){if(P._transitionData){P._transitioning=!1;var da=P._transitionData._interruptCallbacks,ca=Promise.resolve();if(da)for(;da.length;)ca=ca.then(da.shift());return ca}},V.prepareFn,L.rehover,function(){P.emit("plotly_transitioning",[]);return new Promise(function(da){function ca(){la++;return function(){pa++;Y||pa!==la||ba(da)}}P._transitioning=!0;0<T.duration&&(P._transitioningWithDuration=!0);P._transitionData._interruptCallbacks.push(function(){Y=!0});V.redraw&&P._transitionData._interruptCallbacks.push(function(){return u.call("redraw",
P)});P._transitionData._interruptCallbacks.push(function(){P.emit("plotly_transitioninterrupted",[])});var la=0,pa=0;V.runFn(ca);setTimeout(ca())})}],P);ea&&ea.then||(ea=Promise.resolve());return ea.then(function(){return P})}function k(P,T){function V(ob,ib,Pa){var sb=ib._id.charAt(0);if("histogram2dcontour"===ob){ob=ib._counterAxes[0];ib=A.getFromId(T,ob);var tb="x"===sb||"x"===ob&&"category"===ib.type,Aa="y"===sb||"y"===ob&&"category"===ib.type;return function(Ka,Qa){return 0===Ka||0===Qa||tb&&
Ka===Pa[Qa].length-1||Aa&&Qa===Pa.length-1?-1:("y"===sb?Qa:Ka)-1}}return function(Ka,Qa){return"y"===sb?Qa:Ka}}var aa=[],ba,Y,ea,da,ca={min:function(ob){return D.aggNums(Math.min,null,ob)},max:function(ob){return D.aggNums(Math.max,null,ob)},sum:function(ob){return D.aggNums(function(ib,Pa){return ib+Pa},null,ob)},total:function(ob){return D.aggNums(function(ib,Pa){return ib+Pa},null,ob)},mean:function(ob){return D.mean(ob)},median:function(ob){return D.median(ob)}};for(ba=0;ba<P.length;ba++){var la=
P[ba];if("category"===la.type&&(Y=la.categoryorder.match(Q))){var pa=Y[1],qa=Y[2],oa=[];for(Y=0;Y<la._categories.length;Y++)oa.push([la._categories[Y],[]]);for(Y=0;Y<la._traceIndices.length;Y++){var ka=la._traceIndices[Y];var ra=T._fullData[ka],ha=la._id.charAt(0);if(!0===ra.visible){var ma=ra.type;u.traceIs(ra,"histogram")&&(delete ra._xautoBinFinished,delete ra._yautoBinFinished);var wa=T.calcdata[ka];for(ka=0;ka<wa.length;ka++){var na=wa[ka];if("splom"===ma){var ya=ra._axesDim[la._id];"y"===ha&&
(ea=ra._diag[ya][0])&&(la=T._fullLayout[A.id2name(ea)]);var Fa=na.trace.dimensions[ya].values;for(ea=0;ea<Fa.length;ea++){var Ha=Fa[ea];var eb=la._categoriesMap[Ha];for(da=0;da<na.trace.dimensions.length;da++)da!==ya&&oa[eb][1].push(na.trace.dimensions[da].values[ea])}}else if("scattergl"===ma){for(ea=0;ea<na.t.x.length;ea++){if("x"===ha){eb=Ha=na.t.x[ea];var hb=na.t.y[ea]}"y"===ha&&(eb=Ha=na.t.y[ea],hb=na.t.x[ea]);oa[eb][1].push(hb)}na.t&&na.t._scene&&delete na.t._scene.dirty}else if(na.hasOwnProperty("z"))for(hb=
na.z,na=V(ra.type,la,hb),ea=0;ea<hb.length;ea++)for(da=0;da<hb[ea].length;da++)eb=na(da,ea),eb+1&&oa[eb][1].push(hb[ea][da]);else for("x"===ha?(Ha=na.p+1?na.p:na.x,hb=na.s||na.v||na.y):"y"===ha&&(Ha=na.p+1?na.p:na.y,hb=na.s||na.v||na.x),Array.isArray(hb)||(hb=[hb]),ea=0;ea<hb.length;ea++)oa[Ha][1].push(hb[ea])}}}la._categoriesValue=oa;ra=[];for(Y=0;Y<oa.length;Y++)ra.push([oa[Y][0],ca[pa](oa[Y][1])]);ra.sort(function(ob,ib){return ob[1]-ib[1]});la._categoriesAggregatedValue=ra;la._initialCategories=
ra.map(function(ob){return ob[0]});"descending"===qa&&la._initialCategories.reverse();aa=aa.concat(la.sortByInitialCategories())}}return aa}function c(P,T,V){var aa={},ba;for(ba=0;ba<P.length;ba++){var Y=P[ba];var ea=Y._id;Y.clearCalc();"multicategory"===Y.type&&Y.setupMultiCategory(T);aa[Y._id]=1}P=V._axisMatchGroups||[];for(ba=0;ba<P.length;ba++)for(ea in P[ba])aa[ea]||(Y=V[A.id2name(ea)],Y.clearCalc())}function e(P){var T=P._fullLayout,V=T._visibleModules,aa={},ba,Y;for(ba=0;ba<V.length;ba++){var ea=
V[ba],da=ea.crossTraceCalc;da&&(ea=ea.basePlotModule.name,aa[ea]?D.pushUnique(aa[ea],da):aa[ea]=[da])}for(Y in aa)if(da=aa[Y],ea=T._subplots[Y],Array.isArray(ea))for(V=0;V<ea.length;V++){var ca=ea[V],la="cartesian"===Y?T._plots[ca]:T[ca];for(ba=0;ba<da.length;ba++)da[ba](P,la,ca)}else for(ba=0;ba<da.length;ba++)da[ba](P)}var g=b("d3"),m=b("d3-time-format").timeFormatLocale,r=b("fast-isnumeric"),u=b("../registry"),v=b("../plot_api/plot_schema"),w=b("../plot_api/plot_template"),D=b("../lib"),C=b("../components/color"),
x=b("../constants/numerical").BADNUM,A=b("./cartesian/axis_ids"),B=b("./cartesian/handle_outline").clearSelect,t=b("./animation_attributes"),G=b("./frame_attributes"),H=b("../plots/get_data").getModuleCalcData,I=D.relinkPrivateKeys,J=D._,L=y.exports={};D.extendFlat(L,u);L.attributes=b("./attributes");L.attributes.type.values=L.allTypes;L.fontAttrs=b("./font_attributes");L.layoutAttributes=b("./layout_attributes");L.fontWeight="normal";var E=L.transformsRegistry;b=b("./command");L.executeAPICommand=
b.executeAPICommand;L.computeAPICommandBindings=b.computeAPICommandBindings;L.manageCommandObserver=b.manageCommandObserver;L.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings;L.redrawText=function(P){P=D.getGraphDiv(P);var T=P._fullLayout||{};if(T._has&&T._has("polar")||!P.data||!P.data[0]||!P.data[0].r)return new Promise(function(V){setTimeout(function(){u.getComponentMethod("annotations","draw")(P);u.getComponentMethod("legend","draw")(P);u.getComponentMethod("colorbar","draw")(P);V(L.previousPromises(P))},
300)})};L.resize=function(P){P=D.getGraphDiv(P);var T,V=new Promise(function(aa,ba){P&&!D.isHidden(P)||ba(Error("Resize must be passed a displayed plot div element."));P._redrawTimer&&clearTimeout(P._redrawTimer);P._resolveResize&&(T=P._resolveResize);P._resolveResize=aa;P._redrawTimer=setTimeout(function(){if(!P.layout||P.layout.width&&P.layout.height||D.isHidden(P))aa(P);else{delete P.layout.width;delete P.layout.height;var Y=P.changed;P.autoplay=!0;u.call("relayout",P,{autosize:!0}).then(function(){P.changed=
Y;P._resolveResize===aa&&(delete P._resolveResize,aa(P))})}},100)});T&&T(V);return V};L.previousPromises=function(P){if((P._promises||[]).length)return Promise.all(P._promises).then(function(){P._promises=[]})};L.addLinks=function(P){if(P._context.showLink||P._context.showSources){var T=P._fullLayout,V=D.ensureSingle(T._paper,"text","js-plot-link-container",function(Y){Y.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:C.defaultLine,"pointer-events":"all"}).each(function(){var ea=
g.select(this);ea.append("tspan").classed("js-link-to-tool",!0);ea.append("tspan").classed("js-link-spacer",!0);ea.append("tspan").classed("js-sourcelinks",!0)})}),aa=V.node(),ba={y:T._paper.attr("height")-9};document.body.contains(aa)&&aa.getComputedTextLength()>=T.width-20?(ba["text-anchor"]="start",ba.x=5):(ba["text-anchor"]="end",ba.x=T._paper.attr("width")-7);V.attr(ba);T=V.select(".js-link-to-tool");aa=V.select(".js-link-spacer");V=V.select(".js-sourcelinks");P._context.showSources&&P._context.showSources(P);
P._context.showLink&&q(P,T);aa.text(T.text()&&V.text()?" - ":"")}};L.sendDataToCloud=function(P){var T=(window.PLOTLYENV||{}).BASE_URL||P._context.plotlyServerURL;if(T){P.emit("plotly_beforeexport");var V=g.select(P).append("div").attr("id","hiddenform").style("display","none");T=V.append("form").attr({action:T+"/external",method:"post",target:"_blank"});T.append("input").attr({type:"text",name:"data"}).node().value=L.graphJson(P,!1,"keepdata");T.node().submit();V.remove();P.emit("plotly_afterexport");
return!1}};var K="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),N=["year","month","dayMonth","dayMonthYear"];L.supplyDefaults=function(P,T){T=T&&T.skipUpdateCalc;var V=P._fullLayout||{};if(V._skipDefaults)delete V._skipDefaults;else{var aa=P._fullLayout={},ba=P.layout||{},Y=P._fullData||[],ea=P._fullData=[],da=P.data||[],ca=P.calcdata||[],la=P._context||{};P._transitionData||L.createTransitionData(P);aa._dfltTitle={plot:J(P,"Click to enter Plot title"),
x:J(P,"Click to enter X axis title"),y:J(P,"Click to enter Y axis title"),colorbar:J(P,"Click to enter Colorscale title"),annotation:J(P,"new text")};aa._traceWord=J(P,"trace");var pa=p(P,K);aa._mapboxAccessToken=la.mapboxAccessToken;if(V._initialAutoSizeIsDone){var qa=V.width,oa=V.height;L.supplyLayoutGlobalDefaults(ba,aa,pa);ba.width||(aa.width=qa);ba.height||(aa.height=oa);L.sanitizeMargins(aa)}else L.supplyLayoutGlobalDefaults(ba,aa,pa),qa=!ba.width||!ba.height,oa=aa.autosize,la=la.autosizable,
qa&&(oa||la)?L.plotAutoSize(P,ba,aa):qa&&L.sanitizeMargins(aa),!oa&&qa&&(ba.width=aa.width,ba.height=aa.height);qa=aa.separators;pa.decimal=qa.charAt(0);pa.thousands=qa.charAt(1);pa={numberFormat:g.locale(pa).numberFormat,timeFormat:m(pa).utcFormat};aa._d3locale=pa;aa._extraFormat=p(P,N);aa._initialAutoSizeIsDone=!0;aa._dataLength=da.length;aa._modules=[];aa._visibleModules=[];aa._basePlotModules=[];pa=u.collectableSubplotTypes;qa={};var ka;if(!pa)for(ka in pa=[],la=u.subplotsRegistry,la){var ra=
la[ka].attr;if(ra&&(pa.push(ka),Array.isArray(ra)))for(oa=0;oa<ra.length;oa++)D.pushUnique(pa,ra[oa])}for(ka=0;ka<pa.length;ka++)qa[pa[ka]]=[];qa=aa._subplots=qa;pa=aa._splomAxes={x:{},y:{}};oa=aa._splomSubplots={};aa._splomGridDflt={};aa._scatterStackOpts={};aa._firstScatter={};aa._alignmentOpts={};aa._colorAxes={};aa._requestRangeslider={};aa._traceUids=n(Y,da);aa._globalTransforms=(P._context||{}).globalTransforms;L.supplyDataDefaults(da,ea,ba,aa);ka=Object.keys(pa.x);pa=Object.keys(pa.y);if(1<
ka.length&&1<pa.length){u.getComponentMethod("grid","sizeDefaults")(ba,aa);for(da=0;da<ka.length;da++)D.pushUnique(qa.xaxis,ka[da]);for(da=0;da<pa.length;da++)D.pushUnique(qa.yaxis,pa[da]);for(var ha in oa)D.pushUnique(qa.cartesian,ha)}aa._has=L._hasPlotType.bind(aa);if(Y.length===ea.length)for(da=0;da<ea.length;da++)I(ea[da],Y[da]);L.supplyLayoutModuleDefaults(ba,aa,ea,P._transitionData);ha=aa._visibleModules;ba=[];for(da=0;da<ha.length;da++)(qa=ha[da].crossTraceDefaults)&&D.pushUnique(ba,qa);for(da=
0;da<ba.length;da++)ba[da](ea,aa);aa._hasOnlyLargeSploms=1===aa._basePlotModules.length&&"splom"===aa._basePlotModules[0].name&&15<ka.length&&15<pa.length&&0===aa.shapes.length&&0===aa.images.length;aa._hasCartesian=aa._has("cartesian");aa._hasGeo=aa._has("geo");aa._hasGL3D=aa._has("gl3d");aa._hasGL2D=aa._has("gl2d");aa._hasTernary=aa._has("ternary");aa._hasPie=aa._has("pie");L.linkSubplots(ea,aa,Y,V);L.cleanPlot(ea,aa,Y,V);ba=!(!V._has||!V._has("gl2d"));Y=!(!aa._has||!aa._has("gl2d"));da=!(!V._has||
!V._has("cartesian"));ha=!(!aa._has||!aa._has("cartesian"));ba=da||ba;Y=ha||Y;ba&&!Y?V._bgLayer.remove():Y&&!ba&&(aa._shouldCreateBgLayer=!0);V._zoomlayer&&!P._dragging&&B({_fullLayout:V});P=[];if(aa.meta)var ma=aa._meta={meta:aa.meta,layout:{meta:aa.meta}};for(Y=0;Y<ea.length;Y++)ha=ea[Y],ha.meta?P[ha.index]=ha._meta={meta:ha.meta}:aa.meta&&(ha._meta={meta:aa.meta}),aa.meta&&(ha._meta.layout={meta:aa.meta});P.length&&(ma||(ma=aa._meta={}),ma.data=P);I(aa,V);u.getComponentMethod("colorscale","crossTraceDefaults")(ea,
aa);aa._preGUI||(aa._preGUI={});aa._tracePreGUI||(aa._tracePreGUI={});ma=aa._tracePreGUI;V={};for(var wa in ma)V[wa]="old";for(da=0;da<ea.length;da++)wa=ea[da]._fullInput.uid,V[wa]||(ma[wa]={}),V[wa]="new";for(wa in V)"old"===V[wa]&&delete ma[wa];d(aa);u.getComponentMethod("rangeslider","makeData")(aa);T||ca.length!==ea.length||L.supplyDefaultsUpdateCalc(ca,ea)}};L.supplyDefaultsUpdateCalc=function(P,T){for(var V=0;V<T.length;V++){var aa=T[V],ba=(P[V]||[])[0];if(ba&&ba.trace){var Y=ba.trace;if(Y._hasCalcTransform){var ea=
Y._arrayAttrs,da;for(da=0;da<ea.length;da++){var ca=ea[da];var la=D.nestedProperty(Y,ca).get().slice();D.nestedProperty(aa,ca).set(la)}}ba.trace=aa}}};L.createTransitionData=function(P){P._transitionData||(P._transitionData={});P._transitionData._frames||(P._transitionData._frames=[]);P._transitionData._frameHash||(P._transitionData._frameHash={});P._transitionData._counter||(P._transitionData._counter=0);P._transitionData._interruptCallbacks||(P._transitionData._interruptCallbacks=[])};L._hasPlotType=
function(P){var T,V=this._basePlotModules||[];for(T=0;T<V.length;T++)if(V[T].name===P)return!0;V=this._modules||[];for(T=0;T<V.length;T++){var aa=V[T].name;if(aa===P||(aa=u.modules[aa])&&aa.categories[P])return!0}return!1};L.cleanPlot=function(P,T,V,aa){var ba,Y=aa._basePlotModules||[];for(ba=0;ba<Y.length;ba++){var ea=Y[ba];ea.clean&&ea.clean(P,T,V,aa)}ba=aa._has&&aa._has("gl");T=T._has&&T._has("gl");ba&&!T&&void 0!==aa._glcontainer&&(aa._glcontainer.selectAll(".gl-canvas").remove(),aa._glcontainer.selectAll(".no-webgl").remove(),
aa._glcanvas=null);Y=!!aa._infolayer;ba=0;a:for(;ba<V.length;ba++){ea=V[ba].uid;for(T=0;T<P.length;T++)if(ea===P[T].uid)continue a;Y&&aa._infolayer.select(".cb"+ea).remove()}};L.linkSubplots=function(P,T,V,aa){var ba=aa._plots||{},Y=T._plots={};aa=T._subplots;V={_fullData:P,_fullLayout:T};var ea=aa.cartesian.concat(aa.gl2d||[]);for(aa=0;aa<ea.length;aa++){var da=ea[aa];var ca=ba[da],la=A.getFromId(V,da,"x"),pa=A.getFromId(V,da,"y");ca?ca=Y[da]=ca:(ca=Y[da]={},ca.id=da);la._counterAxes.push(pa._id);
pa._counterAxes.push(la._id);la._subplotsWith.push(da);pa._subplotsWith.push(da);ca.xaxis=la;ca.yaxis=pa;ca._hasClipOnAxisFalse=!1;for(da=0;da<P.length;da++)if(la=P[da],la.xaxis===ca.xaxis._id&&la.yaxis===ca.yaxis._id&&!1===la.cliponaxis){ca._hasClipOnAxisFalse=!0;break}}P=A.list(V,null,!0);for(aa=0;aa<P.length;aa++)ba=P[aa],da=null,ba.overlaying&&(da=A.getFromId(V,ba.overlaying))&&da.overlaying&&(ba.overlaying=!1,da=null),ba._mainAxis=da||ba,da&&(ba.domain=da.domain.slice()),ba._anchorAxis="free"===
ba.anchor?null:A.getFromId(V,ba.anchor);for(aa=0;aa<P.length;aa++){ba=P[aa];ba._counterAxes.sort(A.idSort);ba._subplotsWith.sort(D.subplotSort);Y=da=ba;var qa=T;ea={_fullLayout:qa};ca="x"===Y._id.charAt(0);var oa=Y._mainAxis._anchorAxis,ka=pa=la="";oa&&(ka=oa._mainAxis._id,la=ca?Y._id+ka:ka+Y._id);if(!la||!qa._plots[la])for(la="",qa=Y._counterAxes,oa=0;oa<qa.length;oa++){var ra=qa[oa],ha=ca?Y._id+ra:ra+Y._id;pa||(pa=ha);ra=A.getFromId(ea,ra);if(ka&&ra.overlaying===ka){la=ha;break}}da._mainSubplot=
la||pa;if(ba._counterAxes.length&&(ba.spikemode&&-1!==ba.spikemode.indexOf("across")||ba.automargin&&ba.mirror&&"free"!==ba.anchor||u.getComponentMethod("rangeslider","isVisible")(ba))){Y=1;for(da=ea=0;da<ba._counterAxes.length;da++)ca=A.getFromId(V,ba._counterAxes[da]),Y=Math.min(Y,ca.domain[0]),ea=Math.max(ea,ca.domain[1]);Y<ea&&(ba._counterDomainMin=Y,ba._counterDomainMax=ea)}}};L.clearExpandedTraceDefaultColors=function(P){function T(Y,ea,da,ca){aa[ca]=ea;aa.length=ca+1;"color"===Y.valType&&void 0===
Y.dflt&&ba.push(aa.join("."))}var V;var aa=[];var ba=P._module._colorAttrs;ba||(P._module._colorAttrs=ba=[],v.crawl(P._module.attributes,T));for(V=0;V<ba.length;V++)D.nestedProperty(P,"_input."+ba[V]).get()||D.nestedProperty(P,ba[V]).set(null)};L.supplyDataDefaults=function(P,T,V,aa){function ba(Ha){T.push(Ha);var eb=Ha._module;eb&&(D.pushUnique(Y,eb),!0===Ha.visible&&D.pushUnique(ea,eb),D.pushUnique(da,Ha._module.basePlotModule),ca++,!1!==Ha._input.visible&&la++)}var Y=aa._modules,ea=aa._visibleModules,
da=aa._basePlotModules,ca=0,la=0,pa;aa._transformModules=[];var qa={},oa=[],ka=w.traceTemplater((V.template||{}).data||{});for(pa=0;pa<P.length;pa++){var ra=P[pa];var ha=ka.newTrace(ra);ha.uid=aa._traceUids[pa];L.supplyTraceDefaults(ra,ha,la,aa,pa);ha.index=pa;ha._input=ra;ha._expandedIndex=ca;if(ha.transforms&&ha.transforms.length)for(var ma=!1!==ra.visible&&!1===ha.visible,wa=a(ha,T,V,aa),na=0;na<wa.length;na++){var ya=wa[na],Fa={_template:ha._template,type:ha.type,uid:ha.uid+na};ma&&!1===ya.visible&&
delete ya.visible;L.supplyTraceDefaults(ya,Fa,ca,aa,pa);I(Fa,ya);Fa.index=pa;Fa._input=ra;Fa._fullInput=ha;Fa._expandedIndex=ca;Fa._expandedInput=ya;ba(Fa)}else ha._fullInput=ha,ha._expandedInput=ha,ba(ha);u.traceIs(ha,"carpetAxis")&&(qa[ha.carpet]=ha);u.traceIs(ha,"carpetDependent")&&oa.push(pa)}for(pa=0;pa<oa.length;pa++)ha=T[oa[pa]],ha.visible&&(P=qa[ha.carpet],(ha._carpet=P)&&P.visible?(ha.xaxis=P.xaxis,ha.yaxis=P.yaxis):ha.visible=!1)};L.supplyAnimationDefaults=function(P){P=P||{};var T,V={};
D.coerce(P||{},V,t,"mode",void 0);D.coerce(P||{},V,t,"direction",void 0);D.coerce(P||{},V,t,"fromcurrent",void 0);if(Array.isArray(P.frame))for(V.frame=[],T=0;T<P.frame.length;T++)V.frame[T]=L.supplyAnimationFrameDefaults(P.frame[T]||{});else V.frame=L.supplyAnimationFrameDefaults(P.frame||{});if(Array.isArray(P.transition))for(V.transition=[],T=0;T<P.transition.length;T++)V.transition[T]=L.supplyAnimationTransitionDefaults(P.transition[T]||{});else V.transition=L.supplyAnimationTransitionDefaults(P.transition||
{});return V};L.supplyAnimationFrameDefaults=function(P){var T={};D.coerce(P||{},T,t.frame,"duration",void 0);D.coerce(P||{},T,t.frame,"redraw",void 0);return T};L.supplyAnimationTransitionDefaults=function(P){var T={};D.coerce(P||{},T,t.transition,"duration",void 0);D.coerce(P||{},T,t.transition,"easing",void 0);return T};L.supplyFrameDefaults=function(P){function T(aa,ba){return D.coerce(P,V,G,aa,ba)}var V={};T("group");T("name");T("traces");T("baseframe");T("data");T("layout");return V};L.supplyTraceDefaults=
function(P,T,V,aa,ba){function Y(ha,ma){return D.coerce(P,T,L.attributes,ha,ma)}var ea=aa.colorway||C.defaults;V=ea[V%ea.length];ea=Y("visible");Y("type");Y("name",aa._traceWord+" "+ba);Y("uirevision",aa.uirevision);var da=L.getModule(T);if(T._module=da){var ca=da.basePlotModule,la=ca.attr,pa=ca.attributes;if(la&&pa){var qa=aa._subplots,oa="";if(ea||"gl2d"!==ca.name){if(Array.isArray(la))for(ba=0;ba<la.length;ba++){var ka=la[ba],ra=D.coerce(P,T,pa,ka);qa[ka]&&D.pushUnique(qa[ka],ra);oa+=ra}else oa=
D.coerce(P,T,pa,la);qa[ca.name]&&D.pushUnique(qa[ca.name],oa)}}}ea&&(Y("customdata"),Y("ids"),Y("meta"),u.traceIs(T,"showLegend")?(D.coerce(P,T,da.attributes.showlegend?da.attributes:L.attributes,"showlegend"),Y("legendgroup"),T._dfltShowLegend=!0):T._dfltShowLegend=!1,da&&da.supplyDefaults(P,T,V,aa),u.traceIs(T,"noOpacity")||Y("opacity"),u.traceIs(T,"notLegendIsolatable")&&(T.visible=!!T.visible),u.traceIs(T,"noHover")||(T.hovertemplate||D.coerceHoverinfo(P,T,aa),"parcats"!==T.type&&u.getComponentMethod("fx",
"supplyDefaults")(P,T,V,aa)),da&&da.selectPoints&&Y("selectedpoints"),L.supplyTransformDefaults(P,T,aa));return T};L.hasMakesDataTransform=h;L.supplyTransformDefaults=function(P,T,V){if(T._length||h(P)){var aa=V._globalTransforms||[],ba=V._transformModules||[];if(Array.isArray(P.transforms)||0!==aa.length){aa=aa.concat(P.transforms||[]);for(var Y=T.transforms=[],ea=0;ea<aa.length;ea++){var da=aa[ea],ca=da.type,la=E[ca],pa=!(da._module&&da._module===la),qa=la&&"function"===typeof la.transform;la||
D.warn("Unrecognized transform type "+ca+".");la&&la.supplyDefaults&&(pa||qa)?(da=la.supplyDefaults(da,T,V,P),da.type=ca,da._module=la,D.pushUnique(ba,la)):da=D.extendFlat({},da);Y.push(da)}}}};L.supplyLayoutGlobalDefaults=function(P,T,V){function aa(Y,ea){return D.coerce(P,T,L.layoutAttributes,Y,ea)}var ba=P.template;D.isPlainObject(ba)&&(T.template=ba,T._template=ba.layout,T._dataTemplate=ba.data);ba=D.coerceFont(aa,"font");aa("title.text",T._dfltTitle.plot);D.coerceFont(aa,"title.font",{family:ba.family,
size:Math.round(1.4*ba.size),color:ba.color});aa("title.xref");aa("title.yref");aa("title.x");aa("title.y");aa("title.xanchor");aa("title.yanchor");aa("title.pad.t");aa("title.pad.r");aa("title.pad.b");aa("title.pad.l");aa("uniformtext.mode")&&aa("uniformtext.minsize");aa("autosize",!(P.width&&P.height));aa("width");aa("height");aa("margin.l");aa("margin.r");aa("margin.t");aa("margin.b");aa("margin.pad");aa("margin.autoexpand");P.width&&P.height&&L.sanitizeMargins(T);u.getComponentMethod("grid","sizeDefaults")(P,
T);aa("paper_bgcolor");aa("separators",V.decimal+V.thousands);aa("hidesources");aa("colorway");aa("datarevision");V=aa("uirevision");aa("editrevision",V);aa("selectionrevision",V);aa("modebar.orientation");aa("modebar.bgcolor",C.addOpacity(T.paper_bgcolor,.5));ba=C.contrast(C.rgb(T.modebar.bgcolor));aa("modebar.color",C.addOpacity(ba,.3));aa("modebar.activecolor",C.addOpacity(ba,.7));aa("modebar.uirevision",V);u.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(P,T,aa);aa("meta");D.isPlainObject(P.transition)&&
(aa("transition.duration"),aa("transition.easing"),aa("transition.ordering"));u.getComponentMethod("calendars","handleDefaults")(P,T,"calendar");u.getComponentMethod("fx","supplyLayoutGlobalDefaults")(P,T,aa)};L.plotAutoSize=function(P,T,V){var aa=P._context||{},ba=aa.frameMargins,Y;(Y=D.isPlotDiv(P))&&P.emit("plotly_autosize");aa.fillFrame?(aa=window.innerWidth,Y=window.innerHeight,document.body.style.overflow="hidden"):(Y=Y?window.getComputedStyle(P):{},aa=f(Y.width)||f(Y.maxWidth)||V.width,Y=f(Y.height)||
f(Y.maxHeight)||V.height,r(ba)&&0<ba&&(ba=1-2*ba,aa=Math.round(ba*aa),Y=Math.round(ba*Y)));ba=L.layoutAttributes.width.min;var ea=L.layoutAttributes.height.min;aa<ba&&(aa=ba);Y<ea&&(Y=ea);ba=!T.width&&1<Math.abs(V.width-aa);if((T=!T.height&&1<Math.abs(V.height-Y))||ba)ba&&(V.width=aa),T&&(V.height=Y);P._initialAutoSize||(P._initialAutoSize={width:aa,height:Y});L.sanitizeMargins(V)};L.supplyLayoutModuleDefaults=function(P,T,V,aa){var ba=u.componentsRegistry,Y=T._basePlotModules,ea;var da=u.subplotsRegistry.cartesian;
for(ea in ba){var ca=ba[ea];ca.includeBasePlot&&ca.includeBasePlot(P,T)}Y.length||Y.push(da);T._has("cartesian")&&(u.getComponentMethod("grid","contentDefaults")(P,T),da.finalizeSubplots(P,T));for(var la in T._subplots)T._subplots[la].sort(D.subplotSort);for(da=0;da<Y.length;da++)ca=Y[da],ca.supplyLayoutDefaults&&ca.supplyLayoutDefaults(P,T,V);Y=T._modules;for(da=0;da<Y.length;da++)ca=Y[da],ca.supplyLayoutDefaults&&ca.supplyLayoutDefaults(P,T,V);Y=T._transformModules;for(da=0;da<Y.length;da++)ca=
Y[da],ca.supplyLayoutDefaults&&ca.supplyLayoutDefaults(P,T,V,aa);for(ea in ba)ca=ba[ea],ca.supplyLayoutDefaults&&ca.supplyLayoutDefaults(P,T,V)};L.purge=function(P){var T=P._fullLayout||{};void 0!==T._glcontainer&&(T._glcontainer.selectAll(".gl-canvas").remove(),T._glcontainer.remove(),T._glcanvas=null);T._modeBar&&T._modeBar.destroy();P._transitionData&&(P._transitionData._interruptCallbacks&&(P._transitionData._interruptCallbacks.length=0),P._transitionData._animationRaf&&window.cancelAnimationFrame(P._transitionData._animationRaf));
D.clearThrottle();D.clearResponsive(P);delete P.data;delete P.layout;delete P._fullData;delete P._fullLayout;delete P.calcdata;delete P.framework;delete P.empty;delete P.fid;delete P.undoqueue;delete P.undonum;delete P.autoplay;delete P.changed;delete P._promises;delete P._redrawTimer;delete P._hmlumcount;delete P._hmpixcount;delete P._transitionData;delete P._transitioning;delete P._initialAutoSize;delete P._transitioningWithDuration;delete P._dragging;delete P._dragged;delete P._dragdata;delete P._hoverdata;
delete P._snapshotInProgress;delete P._editing;delete P._mouseDownTime;delete P._legendMouseDownTime;P.removeAllListeners&&P.removeAllListeners()};L.style=function(P){var T=P._fullLayout._visibleModules,V=[],aa;for(aa=0;aa<T.length;aa++){var ba=T[aa];ba.style&&D.pushUnique(V,ba.style)}for(aa=0;aa<V.length;aa++)V[aa](P)};L.sanitizeMargins=function(P){if(P&&P.margin){var T=P.width,V=P.height;P=P.margin;var aa=V-(P.t+P.b);0>T-(P.l+P.r)&&(T=(T-1)/(P.l+P.r),P.l=Math.floor(T*P.l),P.r=Math.floor(T*P.r));
0>aa&&(T=(V-1)/(P.t+P.b),P.t=Math.floor(T*P.t),P.b=Math.floor(T*P.b))}};L.clearAutoMarginIds=function(P){P._fullLayout._pushmarginIds={}};L.allowAutoMargin=function(P,T){P._fullLayout._pushmarginIds[T]=1};L.autoMargin=function(P,T,V){var aa=P._fullLayout,ba=aa._pushmargin,Y=aa._pushmarginIds;if(!1!==aa.margin.autoexpand){if(V){var ea=V.pad;void 0===ea&&(ea=aa.margin,ea=Math.min(12,ea.l,ea.r,ea.t,ea.b));V.l+V.r>.5*aa.width&&(D.log("Margin push",T,"is too big in x, dropping"),V.l=V.r=0);V.b+V.t>.5*
aa.height&&(D.log("Margin push",T,"is too big in y, dropping"),V.b=V.t=0);ba[T]={l:{val:void 0!==V.xl?V.xl:V.x,size:V.l+ea},r:{val:void 0!==V.xr?V.xr:V.x,size:V.r+ea},b:{val:void 0!==V.yb?V.yb:V.y,size:V.b+ea},t:{val:void 0!==V.yt?V.yt:V.y,size:V.t+ea}};Y[T]=1}else delete ba[T],delete Y[T];if(!aa._replotting)return L.doAutoMargin(P)}};L.doAutoMargin=function(P){var T=P._fullLayout;T._size||(T._size={});d(T);var V=T._size,aa=T.margin,ba=D.extendFlat({},V),Y=aa.l,ea=aa.r,da=aa.t,ca=aa.b,la=T.width,
pa=T.height,qa=T._pushmargin,oa=T._pushmarginIds;if(!1!==T.margin.autoexpand){for(var ka in qa)oa[ka]||delete qa[ka];qa.base={l:{val:0,size:Y},r:{val:1,size:ea},t:{val:1,size:da},b:{val:0,size:ca}};for(var ra in qa){var ha=qa[ra].l||{},ma=qa[ra].b||{};ka=ha.val;ha=ha.size;var wa=ma.val;ma=ma.size;for(var na in qa){if(r(ha)&&qa[na].r){var ya=qa[na].r.val,Fa=qa[na].r.size;if(ya>ka){var Ha=(ha*ya+(Fa-la)*ka)/(ya-ka);ya=(Fa*(1-ka)+(ha-la)*(1-ya))/(ya-ka);0<=Ha&&0<=ya&&0<la-(Ha+ya)&&Ha+ya>Y+ea&&(Y=Ha,
ea=ya)}}r(ma)&&qa[na].t&&(ya=qa[na].t.val,Fa=qa[na].t.size,ya>wa&&(Ha=(ma*ya+(Fa-pa)*wa)/(ya-wa),ya=(Fa*(1-wa)+(ma-pa)*(1-ya))/(ya-wa),0<=Ha&&0<=ya&&0<pa-(ya+Ha)&&Ha+ya>ca+da&&(ca=Ha,da=ya)))}}}V.l=Math.round(Y);V.r=Math.round(ea);V.t=Math.round(da);V.b=Math.round(ca);V.p=Math.round(aa.pad);V.w=Math.round(la)-V.l-V.r;V.h=Math.round(pa)-V.t-V.b;if(!T._replotting&&L.didMarginChange(ba,V)){"_redrawFromAutoMarginCount"in T?T._redrawFromAutoMarginCount++:T._redrawFromAutoMarginCount=1;V=3*(1+Object.keys(oa).length);
if(T._redrawFromAutoMarginCount<V)return u.call("plot",P);D.warn("Too many auto-margin redraws.")}};var O="lrtbpwh".split("");L.didMarginChange=function(P,T){for(var V=0;V<O.length;V++){var aa=O[V],ba=P[aa];aa=T[aa];if(!r(ba)||1<Math.abs(aa-ba))return!0}return!1};L.graphJson=function(P,T,V,aa,ba,Y){function ea(la,pa){if("function"===typeof la)return pa?"_function_":null;if(D.isPlainObject(la)){var qa={},oa;Object.keys(la).sort().forEach(function(ka){if(-1===["_","["].indexOf(ka.charAt(0)))if("function"===
typeof la[ka])pa&&(qa[ka]="_function");else{if("keepdata"===V){if("src"===ka.substr(ka.length-3))return}else if("keepstream"===V){if(oa=la[ka+"src"],"string"===typeof oa&&0<oa.indexOf(":")&&!D.isPlainObject(la.stream))return}else if("keepall"!==V&&(oa=la[ka+"src"],"string"===typeof oa&&0<oa.indexOf(":")))return;qa[ka]=ea(la[ka],pa)}});return qa}return Array.isArray(la)?la.map(function(ka){return ea(ka,pa)}):D.isTypedArray(la)?D.simpleMap(la,D.identity):D.isJSDate(la)?D.ms2DateTimeLocal(+la):la}(ba&&
T&&!P._fullData||ba&&!T&&!P._fullLayout)&&L.supplyDefaults(P);var da=ba?P._fullLayout:P.layout,ca=(P._transitionData||{})._frames;ba={data:((ba?P._fullData:P.data)||[]).map(function(la){la=ea(la);T&&delete la.fit;return la})};T||(ba.layout=ea(da));P.framework&&P.framework.isPolar&&(ba=P.framework.getConfig());ca&&(ba.frames=ea(ca));Y&&(ba.config=ea(P._context,!0));return"object"===aa?ba:JSON.stringify(ba)};L.modifyFrames=function(P,T){var V=P._transitionData._frames,aa=P._transitionData._frameHash;
for(P=0;P<T.length;P++){var ba=T[P];switch(ba.type){case "replace":var Y=ba.value;var ea=(V[ba.index]||{}).name,da=Y.name;V[ba.index]=aa[da]=Y;da!==ea&&(delete aa[ea],aa[da]=Y);break;case "insert":Y=ba.value;aa[Y.name]=Y;V.splice(ba.index,0,Y);break;case "delete":Y=V[ba.index],delete aa[Y.name],V.splice(ba.index,1)}}return Promise.resolve()};L.computeFrame=function(P,T){var V=P._transitionData._frameHash,aa;if(!T)throw Error("computeFrame must be given a string frame name");T=V[T.toString()];if(!T)return!1;
P=[T];for(aa=[T.name];T.baseframe&&(T=V[T.baseframe.toString()])&&-1===aa.indexOf(T.name);)P.push(T),aa.push(T.name);for(var ba={};T=P.pop();)if(T.layout&&(ba.layout=L.extendLayout(ba.layout,T.layout)),T.data){ba.data||(ba.data=[]);aa=T.traces;if(!aa)for(aa=[],V=0;V<T.data.length;V++)aa[V]=V;ba.traces||(ba.traces=[]);for(V=0;V<T.data.length;V++){var Y=aa[V];if(void 0!==Y&&null!==Y){var ea=ba.traces.indexOf(Y);-1===ea&&(ea=ba.data.length,ba.traces[ea]=Y);ba.data[ea]=L.extendTrace(ba.data[ea],T.data[V])}}}return ba};
L.recomputeFrameHash=function(P){var T=P._transitionData._frameHash={};P=P._transitionData._frames;for(var V=0;V<P.length;V++){var aa=P[V];aa&&aa.name&&(T[aa.name]=aa)}};L.extendObjectWithContainers=function(P,T,V){T=D.extendDeepNoArrays({},T||{});var aa=D.expandObjectPaths(T);var ba={};if(V&&V.length)for(T=0;T<V.length;T++){var Y=D.nestedProperty(aa,V[T]);var ea=Y.get();void 0===ea?D.nestedProperty(ba,V[T]).set(null):(Y.set(null),D.nestedProperty(ba,V[T]).set(ea))}P=D.extendDeepNoArrays(P||{},aa);
if(V&&V.length)for(T=0;T<V.length;T++)if(Y=D.nestedProperty(ba,V[T]),aa=Y.get()){ea=D.nestedProperty(P,V[T]);var da=ea.get();Array.isArray(da)||(da=[],ea.set(da));for(Y=0;Y<aa.length;Y++){var ca=aa[Y];da[Y]=null===ca?null:L.extendObjectWithContainers(da[Y],ca)}ea.set(da)}return P};L.dataArrayContainers=["transforms","dimensions"];L.layoutArrayContainers=u.layoutArrayContainers;L.extendTrace=function(P,T){return L.extendObjectWithContainers(P,T,L.dataArrayContainers)};L.extendLayout=function(P,T){return L.extendObjectWithContainers(P,
T,L.layoutArrayContainers)};L.transition=function(P,T,V,aa,ba,Y){ba={redraw:ba.redraw};var ea={},da=[];ba.prepareFn=function(){var ca=Array.isArray(T)?T.length:0;ca=aa.slice(0,ca);for(var la=0;la<ca.length;la++){var pa=ca[la],qa=P._fullData[pa]._module;qa&&(qa.animatable&&(qa=qa.basePlotModule.name,ea[qa]||(ea[qa]=[]),ea[qa].push(pa)),P.data[ca[la]]=L.extendTrace(P.data[ca[la]],T[la]))}ca=D.expandObjectPaths(D.extendDeepNoArrays({},V));la=/^[xy]axis[0-9]*$/;for(var oa in ca)la.test(oa)&&delete ca[oa].range;
L.extendLayout(P.layout,ca);delete P.calcdata;L.supplyDefaults(P);L.doCalcdata(P);if(oa=D.expandObjectPaths(V)){ca=P._fullLayout._plots;for(var ka in ca){la=ca[ka];pa=la.xaxis;qa=la.yaxis;var ra=pa.range.slice(),ha=qa.range.slice(),ma=null,wa=null,na=null,ya=null;Array.isArray(oa[pa._name+".range"])?ma=oa[pa._name+".range"].slice():Array.isArray((oa[pa._name]||{}).range)&&(ma=oa[pa._name].range.slice());Array.isArray(oa[qa._name+".range"])?wa=oa[qa._name+".range"].slice():Array.isArray((oa[qa._name]||
{}).range)&&(wa=oa[qa._name].range.slice());ra&&ma&&(pa.r2l(ra[0])!==pa.r2l(ma[0])||pa.r2l(ra[1])!==pa.r2l(ma[1]))&&(na={xr0:ra,xr1:ma});ha&&wa&&(qa.r2l(ha[0])!==qa.r2l(wa[0])||qa.r2l(ha[1])!==qa.r2l(wa[1]))&&(ya={yr0:ha,yr1:wa});(na||ya)&&da.push(D.extendFlat({plotinfo:la},na,ya))}}return Promise.resolve()};ba.runFn=function(ca){var la=P._fullLayout._basePlotModules;var pa=da.length,qa;if(V)for(qa=0;qa<la.length;qa++)la[qa].transitionAxes&&la[qa].transitionAxes(P,da,Y,ca);pa?(la=D.extendFlat({},
Y),la.duration=0,delete ea.cartesian):la=Y;for(var oa in ea)pa=ea[oa],P._fullData[pa[0]]._module.basePlotModule.plot(P,pa,la,ca)};return l(P,Y,ba)};L.transitionFromReact=function(P,T,V,aa){var ba=P._fullLayout,Y=ba.transition,ea={},da=[];ea.prepareFn=function(){var ca=ba._plots;ea.redraw=!1;"some"===T.anim&&(ea.redraw=!0);"some"===V.anim&&(ea.redraw=!0);for(var la in ca){var pa=ca[la],qa=pa.xaxis,oa=pa.yaxis,ka=aa[qa._name].range.slice(),ra=aa[oa._name].range.slice(),ha=qa.range.slice(),ma=oa.range.slice();
qa.setScale();oa.setScale();var wa=null,na=null;if(qa.r2l(ka[0])!==qa.r2l(ha[0])||qa.r2l(ka[1])!==qa.r2l(ha[1]))wa={xr0:ka,xr1:ha};if(oa.r2l(ra[0])!==oa.r2l(ma[0])||oa.r2l(ra[1])!==oa.r2l(ma[1]))na={yr0:ra,yr1:ma};(wa||na)&&da.push(D.extendFlat({plotinfo:pa},wa,na))}return Promise.resolve()};ea.runFn=function(ca){function la(){for(var na=0;na<oa.length;na++)oa[na].transitionAxes&&oa[na].transitionAxes(P,da,ka,ca)}function pa(){for(var na=0;na<oa.length;na++)oa[na].plot(P,ha,ra,ca)}for(var qa=P._fullData,
oa=P._fullLayout._basePlotModules,ka,ra,ha,ma=[],wa=0;wa<qa.length;wa++)ma.push(wa);da.length&&T.anim?"traces first"===Y.ordering?(ka=D.extendFlat({},Y,{duration:0}),ha=ma,ra=Y,setTimeout(la,Y.duration),pa()):(ka=Y,ha=null,ra=D.extendFlat({},Y,{duration:0}),setTimeout(pa,ka.duration),la()):da.length?(ka=Y,la()):T.anim&&(ha=ma,ra=Y,pa())};return l(P,Y,ea)};L.doCalcdata=function(P,T){function V(ha){oa=Y[ha];da=oa._module;if(!0===oa.visible&&oa.transforms)for(da&&da.calc&&(ha=da.calc(P,oa),ha[0]&&ha[0].t&&
ha[0].t._scene&&delete ha[0].t._scene.dirty),la=0;la<oa.transforms.length;la++)ha=oa.transforms[la],(da=E[ha.type])&&da.calcTransform&&(ra=oa._hasCalcTransform=!0,da.calcTransform(P,oa,ha))}function aa(ha,ma){oa=Y[ha];da=oa._module;if(!!da.isContainer===ma){ma=[];if(!0===oa.visible&&0!==oa._length){delete oa._indexToPoints;var wa=oa.transforms||[];for(la=wa.length-1;0<=la;la--)if(wa[la].enabled){oa._indexToPoints=wa[la]._indexToPoints;break}da&&da.calc&&(ma=da.calc(P,oa))}Array.isArray(ma)&&ma[0]||
(ma=[{x,y:x}]);ma[0].t||(ma[0].t={});ma[0].trace=oa;pa[ha]=ma}}var ba=A.list(P),Y=P._fullData,ea=P._fullLayout,da,ca,la,pa=Array(Y.length),qa=(P.calcdata||[]).slice();P.calcdata=pa;ea._numBoxes=0;ea._numViolins=0;ea._violinScaleGroupStats={};P._hmpixcount=0;P._hmlumcount=0;ea._piecolormap={};ea._sunburstcolormap={};ea._treemapcolormap={};ea._funnelareacolormap={};for(ca=0;ca<Y.length;ca++)Array.isArray(T)&&-1===T.indexOf(ca)&&(pa[ca]=qa[ca]);for(ca=0;ca<Y.length;ca++){var oa=Y[ca];oa._arrayAttrs=
v.findArrayAttributes(oa);oa._extremes={}}T=ea._subplots.polar||[];for(ca=0;ca<T.length;ca++)ba.push(ea[T[ca]].radialaxis,ea[T[ca]].angularaxis);for(var ka in ea._colorAxes)ca=ea[ka],!1!==ca.cauto&&(delete ca.cmin,delete ca.cmax);var ra=!1;c(ba,Y,ea);for(ca=0;ca<Y.length;ca++)aa(ca,!0);for(ca=0;ca<Y.length;ca++)V(ca);ra&&c(ba,Y,ea);for(ca=0;ca<Y.length;ca++)aa(ca,!0);for(ca=0;ca<Y.length;ca++)aa(ca,!1);e(P);ba=k(ba,P);if(ba.length){ea._numBoxes=0;for(ca=ea._numViolins=0;ca<ba.length;ca++)aa(ba[ca],
!0);for(ca=0;ca<ba.length;ca++)aa(ba[ca],!1);e(P)}u.getComponentMethod("fx","calc")(P);u.getComponentMethod("errorbars","calc")(P)};var Q=/(total|sum|min|max|mean|median) (ascending|descending)/;L.rehover=function(P){P._fullLayout._rehover&&P._fullLayout._rehover()};L.redrag=function(P){P._fullLayout._redrag&&P._fullLayout._redrag()};L.generalUpdatePerTraceModule=function(P,T,V,aa){var ba=T.traceHash,Y={},ea;for(ea=0;ea<V.length;ea++){var da=V[ea],ca=da[0].trace;ca.visible&&(Y[ca.type]=Y[ca.type]||
[],Y[ca.type].push(da))}for(var la in ba)Y[la]||(V=ba[la][0],V[0].trace.visible=!1,Y[la]=[V]);for(var pa in Y)ba=Y[pa],ba[0][0].trace._module.plot(P,T,D.filterVisible(ba),aa);T.traceHash=Y};L.plotBasePlot=function(P,T,V,aa,ba){P=u.getModule(P);V=H(T.calcdata,P)[0];P.plot(T,V,aa,ba)};L.cleanBasePlot=function(P,T,V,aa,ba){T=ba._has&&ba._has(P);V=V._has&&V._has(P);T&&!V&&ba["_"+P+"layer"].selectAll("g.trace").remove()}},{"../components/color":615,"../constants/numerical":724,"../lib":749,"../plot_api/plot_schema":786,
"../plot_api/plot_template":787,"../plots/get_data":834,"../registry":880,"./animation_attributes":792,"./attributes":794,"./cartesian/axis_ids":800,"./cartesian/handle_outline":807,"./command":823,"./font_attributes":825,"./frame_attributes":826,"./layout_attributes":851,d3:169,"d3-time-format":166,"fast-isnumeric":241}],861:[function(b,y,F){y.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),
radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],862:[function(b,y,F){function q(g,m,r,u){var v=u[0];u=u[1];var w=h(Math.sin(m)-Math.sin(g));g=h(Math.cos(m)-Math.cos(g));r=Math.tan(r);var D=h(1/r),C=w/g;m=u-C*v;D?w&&g?(w=m/(r-C),v=r*w):g?(w=u*D,v=u):(w=v,v*=r):w&&g?(w=0,v=m):g?(w=0,v=u):w=v=NaN;return[w,v]}function n(g,m,r,u){function v(B,t,G){return q(B,t,G,[g*Math.cos(B),g*Math.sin(B)])}var w=u.length,D=[];var C=l(u,function(B){return k(B,
[m,r])?e(B,m):Infinity});var x=v(u[C],u[f.mod(C-1,w)],m);D.push(x);for(x=0;x<w;C++,x++){var A=u[f.mod(C,w)];if(!k(A,[m,r]))break;D.push([g*Math.cos(A),g*Math.sin(A)])}C=l(u,function(B){return k(B,[m,r])?e(B,r):Infinity});u=v(u[C],u[f.mod(C+1,w)],r);D.push(u);D.push([0,0]);D.push(D[0].slice());return D}function p(g,m,r,u){if(f.isFullCircle([m,r])){m=u.length;r=Array(m+1);var v;for(v=0;v<m;v++){var w=u[v];r[v]=[g*Math.cos(w),g*Math.sin(w)]}r[v]=r[0].slice();g=r}else g=n(g,m,r,u);return g}function h(g){return 1E-10<
Math.abs(g)?g:0}function a(g,m,r){m=m||0;r=r||0;for(var u=g.length,v=Array(u),w=0;w<u;w++){var D=g[w];v[w]=[m+D[0],r-D[1]]}return v}var f=b("../../lib"),d=b("../../lib/polygon").tester,l=f.findIndexOfMin,k=f.isAngleInsideSector,c=f.angleDelta,e=f.angleDist;y.exports={isPtInsidePolygon:function(g,m,r,u,v){if(!k(m,u))return!1;if(r[0]<r[1]){var w=r[0];r=r[1]}else w=r[1],r=r[0];w=d(p(w,u[0],u[1],v));u=d(p(r,u[0],u[1],v));g=[g*Math.cos(m),g*Math.sin(m)];return u.contains(g)&&!w.contains(g)},findPolygonOffset:function(g,
m,r,u){var v=Infinity,w=Infinity;g=p(g,m,r,u);for(m=0;m<g.length;m++)r=g[m],v=Math.min(v,r[0]),w=Math.min(w,-r[1]);return[v,w]},findEnclosingVertexAngles:function(g,m){var r=l(m,function(v){v=c(v,g);return 0<v?v:Infinity}),u=f.mod(r+1,m.length);return[m[r],m[u]]},findIntersectionXY:q,findXYatLength:function(g,m,r,u){var v=-m*r,w=m*m+1,D=2*(m*v-r);r=Math.sqrt(D*D-4*w*(v*v+r*r-g*g));g=(-D+r)/(2*w);w=(-D-r)/(2*w);return[[g,m*g+v+u],[w,m*w+v+u]]},clampTiny:h,pathPolygon:function(g,m,r,u,v,w){g=p(g,m,
r,u);return"M"+a(g,v,w).join("L")},pathPolygonAnnulus:function(g,m,r,u,v,w,D){if(g<m){var C=g;g=m}else C=m;C=a(p(C,r,u,v),w,D);return"M"+a(p(g,r,u,v),w,D).reverse().join("L")+"M"+C.join("L")}}},{"../../lib":749,"../../lib/polygon":761}],863:[function(b,y,F){var q=b("../get_data").getSubplotCalcData,n=b("../../lib").counterRegex,p=b("./polar"),h=b("./constants");F=h.attr;var a=h.name;n=n(a);h={};h[F]={valType:"subplotid",dflt:a,editType:"calc"};y.exports={attr:F,name:a,idRoot:a,idRegex:n,attrRegex:n,
attributes:h,layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(f){for(var d=f._fullLayout,l=f.calcdata,k=d._subplots[a],c=0;c<k.length;c++){var e=k[c],g=q(l,a,e),m=d[e]._subplot;m||(m=p(f,e),d[e]._subplot=m);m.plot(g,d,f._promises)}},clean:function(f,d,l,k){f=k._subplots[a]||[];l=k._has&&k._has("gl");var c=d._has&&d._has("gl");l=l&&!c;for(c=0;c<f.length;c++){var e=f[c],g=k[e]._subplot;if(!d[e]&&g){g.framework.remove();g.layers["radial-axis-title"].remove();
for(var m in g.clipPaths)g.clipPaths[m].remove()}l&&g._scene&&(g._scene.destroy(),g._scene=null)}},toSVG:b("../cartesian").toSVG}},{"../../lib":749,"../cartesian":810,"../get_data":834,"./constants":861,"./layout_attributes":864,"./layout_defaults":865,"./polar":872}],864:[function(b,y,F){F=b("../../components/color/attributes");var q=b("../cartesian/layout_attributes"),n=b("../domain").attributes,p=b("../../lib").extendFlat,h=b("../../plot_api/edit_types").overrideAll;b=h({color:q.color,showline:p({},
q.showline,{dflt:!0}),linecolor:q.linecolor,linewidth:q.linewidth,showgrid:p({},q.showgrid,{dflt:!0}),gridcolor:q.gridcolor,gridwidth:q.gridwidth},"plot","from-root");h=h({tickmode:q.tickmode,nticks:q.nticks,tick0:q.tick0,dtick:q.dtick,tickvals:q.tickvals,ticktext:q.ticktext,ticks:q.ticks,ticklen:q.ticklen,tickwidth:q.tickwidth,tickcolor:q.tickcolor,showticklabels:q.showticklabels,showtickprefix:q.showtickprefix,tickprefix:q.tickprefix,showticksuffix:q.showticksuffix,ticksuffix:q.ticksuffix,showexponent:q.showexponent,
exponentformat:q.exponentformat,separatethousands:q.separatethousands,tickfont:q.tickfont,tickangle:q.tickangle,tickformat:q.tickformat,tickformatstops:q.tickformatstops,layer:q.layer},"plot","from-root");var a={visible:p({},q.visible,{dflt:!0}),type:p({},q.type,{values:["-","linear","log","date","category"]}),autorange:p({},q.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:p({},q.range,{items:[{valType:"any",
editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:q.categoryorder,categoryarray:q.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:p({},q.title.text,{editType:"plot",dflt:""}),font:p({},q.title.font,{editType:"plot"}),editType:"plot"},hoverformat:q.hoverformat,uirevision:{valType:"any",editType:"none"},
editType:"calc",_deprecated:{title:q._deprecated.title,titlefont:q._deprecated.titlefont}};p(a,b,h);q={visible:p({},q.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},categoryorder:q.categoryorder,categoryarray:q.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],
dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:q.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};p(q,b,h);y.exports={domain:n({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:F.background},radialaxis:a,angularaxis:q,
gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":614,"../../lib":749,"../../plot_api/edit_types":780,"../cartesian/layout_attributes":811,"../domain":824}],865:[function(b,y,F){function q(D,C,x,A){function B(T,V){return x(I+"."+T,V)}var t=x("bgcolor");A.bgColor=h.combine(t,A.paper_bgcolor);t=x("sector");x("hole");for(var G=d(A.fullData,v.name,A.id),H=A.layoutOut,
I,J=0;J<w.length;J++){I=w[J];p.isPlainObject(D[I])||(D[I]={});var L=D[I],E=a.newContainer(C,I);E._id=E._name=I;E._attr=A.id+"."+I;E._traceIndices=G.map(function(T){return T._expandedIndex});var K=v.axisName2dataArray[I],N=n(L,E,B,G,K);e(L,E,B,{axData:G,dataAttr:K});K=B("visible");u(E,C,H);B("uirevision",C.uirevision);if(K){var O=B("color");var Q=O===L.color?O:A.font.color}E._m=1;switch(I){case "radialaxis":var P=B("autorange",!E.isValidRange(L.range));L.autorange=P;!P||"linear"!==N&&"-"!==N||B("rangemode");
"reversed"===P&&(E._m=-1);B("range");E.cleanRange("range",{dfltRange:[0,1]});K&&(B("side"),B("angle",t[0]),B("title.text"),p.coerceFont(B,"title.font",{family:A.font.family,size:Math.round(1.2*A.font.size),color:Q}));break;case "angularaxis":if("date"===N){p.log("Polar plots do not support date angular axes yet.");for(N=0;N<G.length;N++)G[N].visible=!1;N=L.type=E.type="linear"}"linear"===N?B("thetaunit"):B("period");P=B("direction");B("rotation",{counterclockwise:0,clockwise:90}[P])}K&&(l(L,E,B,E.type),
c(L,E,B,E.type,{tickSuffixDflt:"degrees"===E.thetaunit?"":void 0}),k(L,E,B,{outerTicks:!0}),B("showticklabels")&&(p.coerceFont(B,"tickfont",{family:A.font.family,size:A.font.size,color:Q}),B("tickangle"),B("tickformat")),g(L,E,B,{dfltColor:O,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:r[I]}),B("layer"));"category"!==N&&B("hoverformat");E._input=L}"category"===C.angularaxis.type&&x("gridshape")}function n(D,C,x,A,B){if("-"===x("type")){for(x=0;x<A.length;x++)if(A[x].visible){var t=
A[x];break}t&&t[B]&&(C.type=m(t[B],"gregorian"));"-"===C.type?C.type="linear":D.type=C.type}return C.type}var p=b("../../lib"),h=b("../../components/color"),a=b("../../plot_api/plot_template"),f=b("../subplot_defaults"),d=b("../get_data").getSubplotData,l=b("../cartesian/tick_value_defaults"),k=b("../cartesian/tick_mark_defaults"),c=b("../cartesian/tick_label_defaults"),e=b("../cartesian/category_order_defaults"),g=b("../cartesian/line_grid_defaults"),m=b("../cartesian/axis_autotype"),r=b("./layout_attributes"),
u=b("./set_convert"),v=b("./constants"),w=v.axisNames;y.exports=function(D,C,x){f(D,C,x,{type:v.name,attributes:r,handleDefaults:q,font:C.font,paper_bgcolor:C.paper_bgcolor,fullData:x,layoutOut:C})}},{"../../components/color":615,"../../lib":749,"../../plot_api/plot_template":787,"../cartesian/axis_autotype":798,"../cartesian/category_order_defaults":801,"../cartesian/line_grid_defaults":813,"../cartesian/tick_label_defaults":818,"../cartesian/tick_mark_defaults":819,"../cartesian/tick_value_defaults":820,
"../get_data":834,"../subplot_defaults":874,"./constants":861,"./layout_attributes":864,"./set_convert":873}],866:[function(b,y,F){F=b("../../../traces/scatter/attributes");var q=F.marker;b=b("../../../lib/extend").extendFlat;y.exports={r:b({},F.r,{}),t:b({},F.t,{}),marker:{color:b({},q.color,{}),size:b({},q.size,{}),symbol:b({},q.symbol,{}),opacity:b({},q.opacity,{}),editType:"calc"}}},{"../../../lib/extend":739,"../../../traces/scatter/attributes":1155}],867:[function(b,y,F){function q(p,h){return n({},
h,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:"Legacy polar charts are deprecated! Please switch to *polar* subplots."},visible:{valType:"boolean"}})}F=b("../../cartesian/layout_attributes");var n=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;
F=n({},F.domain,{});y.exports=b({radialaxis:q("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:F,orientation:{valType:"number"}}),angularaxis:q("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:F}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":739,"../../../plot_api/edit_types":780,"../../cartesian/layout_attributes":811}],
868:[function(b,y,F){(y.exports=b("./micropolar")).manager=b("./micropolar_manager")},{"./micropolar":869,"./micropolar_manager":870}],869:[function(b,y,F){var q=b("d3"),n=b("../../../lib").extendDeepAll,p=b("../../../constants/alignment").MID_SHIFT,h=y.exports={version:"0.2.2"};h.Axis=function(){function a(u){c=u||c;u=f.data;var v=f.layout;if("string"==typeof c||c.nodeName)c=q.select(c);c.datum(u).each(function(w,D){w=w.slice();l={data:h.util.cloneJson(w),layout:h.util.cloneJson(v)};var C=0;w.forEach(function(oa,
ka){oa.color||(oa.color=v.defaultColorRange[C],C=(C+1)%v.defaultColorRange.length);oa.strokeColor||(oa.strokeColor="LinePlot"===oa.geometry?oa.color:q.rgb(oa.color).darker().toString());l.data[ka].color=oa.color;l.data[ka].strokeColor=oa.strokeColor;l.data[ka].strokeDash=oa.strokeDash;l.data[ka].strokeSize=oa.strokeSize});w=w.filter(function(oa,ka){oa=oa.visible;return"undefined"===typeof oa||!0===oa});var x=!1;D=w.map(function(oa,ka){x=x||"undefined"!==typeof oa.groupId;return oa});if(x){var A=[];
w=q.nest().key(function(oa,ka){return"undefined"!=typeof oa.groupId?oa.groupId:"unstacked"}).entries(D).map(function(oa,ka){if("unstacked"!==oa.key){var ra=oa.values[0].r.map(function(ha,ma){return 0});oa.values.forEach(function(ha,ma,wa){ha.yStack=[ra];A.push(ra);ra=h.util.sumArrays(ha.r,ra)})}return oa.values});w=q.merge(w)}w.forEach(function(oa,ka){oa.t=Array.isArray(oa.t[0])?oa.t:[oa.t];oa.r=Array.isArray(oa.r[0])?oa.r:[oa.r]});var B=Math.min(v.width-v.margin.left-v.margin.right,v.height-v.margin.top-
v.margin.bottom)/2;B=Math.max(10,B);var t=[v.margin.left+B,v.margin.top+B];D=x?[0,q.max(h.util.sumArrays(h.util.arrayLast(w).r[0],h.util.arrayLast(A)))]:q.extent(h.util.flattenArray(w.map(function(oa,ka){return oa.r})));v.radialAxis.domain!=h.DATAEXTENT&&(D[0]=0);g=q.scale.linear().domain(v.radialAxis.domain!=h.DATAEXTENT&&v.radialAxis.domain?v.radialAxis.domain:D).range([0,B]);l.layout.radialAxis.domain=g.domain();var G=h.util.flattenArray(w.map(function(oa,ka){return oa.t})),H="string"===typeof G[0];
if(H){G=h.util.deduplicate(G);var I=G.slice();G=q.range(G.length);w=w.map(function(oa,ka){oa.t=[G];x&&(oa.yStack=oa.yStack);return oa})}var J=w.filter(function(oa,ka){return"LinePlot"===oa.geometry||"DotPlot"===oa.geometry}).length===w.length;D=null===v.needsEndSpacing?H||!J:v.needsEndSpacing;var L=v.angularAxis.domain&&v.angularAxis.domain!=h.DATAEXTENT&&!H&&0<=v.angularAxis.domain[0]?v.angularAxis.domain:q.extent(G),E=Math.abs(G[1]-G[0]);J&&!H&&(E=0);L=L.slice();D&&H&&(L[1]+=E);J=v.angularAxis.ticksCount||
4;8<J&&(J=J/(J/8)+J%8);v.angularAxis.ticksStep&&(J=(L[1]-L[0])/J);J=v.angularAxis.ticksStep||(L[1]-L[0])/(J*(v.minorTicks+1));I&&(J=Math.max(Math.round(J),1));L[2]||(L[2]=J);J=q.range.apply(this,L);J=J.map(function(oa,ka){return parseFloat(oa.toPrecision(12))});m=q.scale.linear().domain(L.slice(0,2)).range("clockwise"===v.direction?[0,360]:[360,0]);l.layout.angularAxis.domain=m.domain();l.layout.angularAxis.endPadding=D?E:0;k=q.select(this).select("svg.chart-root");if("undefined"===typeof k||k.empty())D=
(new DOMParser).parseFromString("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' class\x3d'chart-root'\x3e' + '\x3cg class\x3d'outer-group'\x3e' + '\x3cg class\x3d'chart-group'\x3e' + '\x3ccircle class\x3d'background-circle'\x3e\x3c/circle\x3e' + '\x3cg class\x3d'geometry-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'radial axis-group'\x3e' + '\x3ccircle class\x3d'outside-circle'\x3e\x3c/circle\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'angular axis-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'guides-group'\x3e\x3cline\x3e\x3c/line\x3e\x3ccircle r\x3d'0'\x3e\x3c/circle\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'legend-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'tooltips-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'title-group'\x3e\x3ctext\x3e\x3c/text\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3c/svg\x3e",
"application/xml"),D=this.appendChild(this.ownerDocument.importNode(D.documentElement,!0)),k=q.select(D);k.select(".guides-group").style({"pointer-events":"none"});k.select(".angular.axis-group").style({"pointer-events":"none"});k.select(".radial.axis-group").style({"pointer-events":"none"});D=k.select(".chart-group");L={fill:"none",stroke:v.tickColor};var K={"font-size":v.font.size,"font-family":v.font.family,fill:v.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(oa,
ka){return" "+oa+" 0 "+v.font.outlineColor}).join(",")};if(v.showLegend){E=k.select(".legend-group").attr({transform:"translate("+[B,v.margin.top]+")"}).style({display:"block"});var N=w.map(function(oa,ka){ka=h.util.cloneJson(oa);ka.symbol="DotPlot"===oa.geometry?oa.dotType||"circle":"LinePlot"!=oa.geometry?"square":"line";ka.visibleInLegend="undefined"===typeof oa.visibleInLegend||oa.visibleInLegend;ka.color="LinePlot"===oa.geometry?oa.strokeColor:oa.color;return ka});h.Legend().config({data:w.map(function(oa,
ka){return oa.name||"Element"+ka}),legendConfig:n({},h.Legend.defaultConfig().legendConfig,{container:E,elements:N,reverseOrder:v.legend.reverseOrder})})();N=E.node().getBBox();B=Math.min(v.width-N.width-v.margin.left-v.margin.right,v.height-v.margin.top-v.margin.bottom)/2;B=Math.max(10,B);t=[v.margin.left+B,v.margin.top+B];g.range([0,B]);l.layout.radialAxis.domain=g.domain();E.attr("transform","translate("+[t[0]+B,t[1]-B]+")")}else E=k.select(".legend-group").style({display:"none"});k.attr({width:v.width,
height:v.height}).style({opacity:v.opacity});D.attr("transform","translate("+t+")").style({cursor:"crosshair"});var O=[(v.width-(v.margin.left+v.margin.right+2*B+(N?N.width:0)))/2,(v.height-(v.margin.top+v.margin.bottom+2*B))/2];O[0]=Math.max(0,O[0]);O[1]=Math.max(0,O[1]);k.select(".outer-group").attr("transform","translate("+O+")");if(v.title&&v.title.text){N=k.select("g.title-group text").style(K).text(v.title.text);var Q=N.node().getBBox();N.attr({x:t[0]-Q.width/2,y:t[1]-B-20})}N=k.select(".radial.axis-group");
v.radialAxis.gridLinesVisible&&(Q=N.selectAll("circle.grid-circle").data(g.ticks(5)),Q.enter().append("circle").attr({"class":"grid-circle"}).style(L),Q.attr("r",g),Q.exit().remove());N.select("circle.outside-circle").attr({r:B}).style(L);var P=k.select("circle.background-circle").attr({r:B}).style({fill:v.backgroundColor,stroke:v.stroke});v.radialAxis.visible&&(Q=q.svg.axis().scale(g).ticks(5).tickSize(5),N.call(Q).attr({transform:"rotate("+v.radialAxis.orientation+")"}),N.selectAll(".domain").style(L),
N.selectAll("g\x3etext").text(function(oa,ka){return this.textContent+v.radialAxis.ticksSuffix}).style(K).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(oa,ka){return"horizontal"===v.radialAxis.tickOrientation?"rotate("+-v.radialAxis.orientation+") translate("+[0,K["font-size"]]+")":"translate("+[0,K["font-size"]]+")"}}),N.selectAll("g\x3eline").style({stroke:"black"}));N=k.select(".angular.axis-group").selectAll("g.angular-tick").data(J);J=N.enter().append("g").classed("angular-tick",
!0);N.attr({transform:function(oa,ka){return"rotate("+(m(oa)%360+v.orientation)+")"}}).style({display:v.angularAxis.visible?"block":"none"});N.exit().remove();J.append("line").classed("grid-line",!0).classed("major",function(oa,ka){return 0==ka%(v.minorTicks+1)}).classed("minor",function(oa,ka){return 0!=ka%(v.minorTicks+1)}).style(L);J.selectAll(".minor").style({stroke:v.minorTickColor});N.select("line.grid-line").attr({x1:v.tickLength?B-v.tickLength:0,x2:B}).style({display:v.angularAxis.gridLinesVisible?
"block":"none"});J.append("text").classed("axis-text",!0).style(K);N=N.select("text.axis-text").attr({x:B+v.labelOffset,dy:p+"em",transform:function(oa,ka){oa=m(oa)%360+v.orientation;ka=B+v.labelOffset;var ra=v.angularAxis.tickOrientation;return"horizontal"==ra?"rotate("+-oa+" "+ka+" 0)":"radial"==ra?270>oa&&90<oa?"rotate(180 "+ka+" 0)":null:"rotate("+(180>=oa&&0<oa?-90:90)+" "+ka+" 0)"}}).style({"text-anchor":"middle",display:v.angularAxis.labelsVisible?"block":"none"}).text(function(oa,ka){return 0!=
ka%(v.minorTicks+1)?"":I?I[oa]+v.angularAxis.ticksSuffix:oa+v.angularAxis.ticksSuffix}).style(K);v.angularAxis.rewriteTicks&&N.text(function(oa,ka){return 0!=ka%(v.minorTicks+1)?"":v.angularAxis.rewriteTicks(this.textContent,ka)});N=q.max(D.selectAll(".angular-tick text")[0].map(function(oa,ka){return oa.getCTM().e+oa.getBBox().width}));E.attr({transform:"translate("+[B+N,v.margin.top]+")"});N=0<k.select("g.geometry-group").selectAll("g").size();var T=k.select("g.geometry-group").selectAll("g.geometry").data(w);
T.enter().append("g").attr({"class":function(oa,ka){return"geometry geometry"+ka}});T.exit().remove();if(w[0]||N){var V=[];w.forEach(function(oa,ka){var ra={};ra.radialScale=g;ra.angularScale=m;ra.container=T.filter(function(ha,ma){return ma==ka});ra.geometry=oa.geometry;ra.orientation=v.orientation;ra.direction=v.direction;ra.index=ka;V.push({data:oa,geometryConfig:ra})});var aa=[];q.nest().key(function(oa,ka){return"undefined"!=typeof oa.data.groupId||"unstacked"}).entries(V).forEach(function(oa,
ka){"unstacked"===oa.key?aa=aa.concat(oa.values.map(function(ra,ha){return[ra]})):aa.push(oa.values)});aa.forEach(function(oa,ka){var ra=Array.isArray(oa)?oa[0].geometryConfig.geometry:oa.geometryConfig.geometry;oa=oa.map(function(ha,ma){return n(h[ra].defaultConfig(),ha)});h[ra]().config(oa)()})}var ba=k.select(".guides-group");w=k.select(".tooltips-group");var Y=h.tooltipPanel().config({container:w,fontSize:8})(),ea=h.tooltipPanel().config({container:w,fontSize:8})(),da=h.tooltipPanel().config({container:w,
hasTick:!0})(),ca,la;if(!H){var pa=ba.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});D.on("mousemove.angular-guide",function(oa,ka){oa=h.util.getMousePos(P).angle;pa.attr({x2:-B,transform:"rotate("+oa+")"}).style({opacity:.5});ca=m.invert((oa+180+360-v.orientation)%360);oa=h.util.convertToCartesian(B+12,oa+180);Y.text(h.util.round(ca)).move([oa[0]+t[0],oa[1]+t[1]])}).on("mouseout.angular-guide",function(oa,ka){ba.select("line").style({opacity:0})})}var qa=ba.select("circle").style({stroke:"grey",
fill:"none"});D.on("mousemove.radial-guide",function(oa,ka){oa=h.util.getMousePos(P).radius;qa.attr({r:oa}).style({opacity:.5});la=g.invert(h.util.getMousePos(P).radius);oa=h.util.convertToCartesian(oa,v.radialAxis.orientation);ea.text(h.util.round(la)).move([oa[0]+t[0],oa[1]+t[1]])}).on("mouseout.radial-guide",function(oa,ka){qa.style({opacity:0});da.hide();Y.hide();ea.hide()});k.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(oa,ka){var ra=q.select(this);ka=this.style.fill;ra.attr({"data-opacity":this.style.opacity||
1});if(ka&&"none"!==ka){ra.attr({"data-fill":ka});ka=q.hsl(ka).darker().toString();ra.style({fill:ka,opacity:1});ra=h.util.round(oa[0]);var ha=h.util.round(oa[1]);H&&(ra=I[oa[0]]);oa="t: "+ra+", r: "+ha;ra=this.getBoundingClientRect();ha=k.node().getBoundingClientRect();ra=[ra.left+ra.width/2-O[0]-ha.left,ra.top+ra.height/2-O[1]-ha.top];da.config({color:ka}).text(oa);da.move(ra)}else ka=this.style.stroke||"black",ra.attr({"data-stroke":ka}),ka=q.hsl(ka).darker().toString(),ra.style({stroke:ka,opacity:1})}).on("mousemove.tooltip",
function(oa,ka){if(0!=q.event.which)return!1;q.select(this).attr("data-fill")&&da.show()}).on("mouseout.tooltip",function(oa,ka){da.hide();oa=q.select(this);(ka=oa.attr("data-fill"))?oa.style({fill:ka,opacity:oa.attr("data-opacity")}):oa.style({stroke:oa.attr("data-stroke"),opacity:oa.attr("data-opacity")})})});return r}var f={data:[],layout:{}},d={},l={},k,c,e=q.dispatch("hover"),g,m,r={render:function(u){a(u);return this},config:function(u){if(!arguments.length)return f;var v=h.util.cloneJson(u);
v.data.forEach(function(w,D){f.data[D]||(f.data[D]={});n(f.data[D],h.Axis.defaultConfig().data[0]);n(f.data[D],w)});n(f.layout,h.Axis.defaultConfig().layout);n(f.layout,v.layout);return this},getLiveConfig:function(){return l},getinputConfig:function(){return d},radialScale:function(u){return g},angularScale:function(u){return m},svg:function(){return k}};q.rebind(r,e,"on");return r};h.Axis.defaultConfig=function(a,f){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,
strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:q.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],
ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}};h.util={};h.DATAEXTENT="dataExtent";h.AREA="AreaChart";h.LINE="LinePlot";h.DOT="DotPlot";h.BAR="BarChart";h.util._override=function(a,f){for(var d in a)d in f&&(f[d]=a[d])};h.util._extend=function(a,
f){for(var d in a)f[d]=a[d]};h.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)};h.util.dataFromEquation2=function(a,f){f=f||6;return q.range(0,360+f,f).map(function(d,l){l=a(d*Math.PI/180);return[d,l]})};h.util.dataFromEquation=function(a,f,d){f=f||6;var l=[],k=[];q.range(0,360+f,f).forEach(function(c,e){e=a(c*Math.PI/180);l.push(c);k.push(e)});f={t:l,r:k};d&&(f.name=d);return f};h.util.ensureArray=function(a,f){if("undefined"===typeof a)return null;var d=
[].concat(a);return q.range(f).map(function(l,k){return d[k]||d[0]})};h.util.fillArrays=function(a,f,d){f.forEach(function(l,k){a[l]=h.util.ensureArray(a[l],d)});return a};h.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))};h.util.validateKeys=function(a,f){"string"===typeof f&&(f=f.split("."));var d=f.shift();return a[d]&&(!f.length||objHasKeys(a[d],f))};h.util.sumArrays=function(a,f){return q.zip(a,f).map(function(d,l){return q.sum(d)})};h.util.arrayLast=function(a){return a[a.length-
1]};h.util.arrayEqual=function(a,f){for(var d=Math.max(a.length,f.length,1);0<=d--&&a[d]===f[d];);return-2===d};h.util.flattenArray=function(a){for(var f=[];!h.util.arrayEqual(f,a);)f=a,a=[].concat.apply([],a);return a};h.util.deduplicate=function(a){return a.filter(function(f,d,l){return l.indexOf(f)==d})};h.util.convertToCartesian=function(a,f){f=f*Math.PI/180;return[a*Math.cos(f),a*Math.sin(f)]};h.util.round=function(a,f){f=Math.pow(10,f||2);return Math.round(a*f)/f};h.util.getMousePos=function(a){a=
q.mouse(a.node());var f=a[0],d=a[1],l={};l.x=f;l.y=d;l.pos=a;l.angle=180*(Math.atan2(d,f)+Math.PI)/Math.PI;l.radius=Math.sqrt(f*f+d*d);return l};h.util.duplicatesCount=function(a){for(var f={},d,l={},k=0,c=a.length;k<c;k++)d=a[k],d in f?(f[d]++,l[d]=f[d]):f[d]=1;return l};h.util.duplicates=function(a){return Object.keys(h.util.duplicatesCount(a))};h.util.translator=function(a,f,d,l){l&&(l=d.slice(),d=f,f=l);var k=f.reduce(function(c,e){if("undefined"!=typeof c)return c[e]},a);"undefined"!==typeof k&&
(f.reduce(function(c,e,g){if("undefined"!=typeof c)return g===f.length-1&&delete c[e],c[e]},a),d.reduce(function(c,e,g){"undefined"===typeof c[e]&&(c[e]={});g===d.length-1&&(c[e]=k);return c[e]},a))};h.PolyChart=function(){function a(){var k=f[0].geometryConfig,c=k.container;"string"==typeof c&&(c=q.select(c));c.datum(f).each(function(e,g){var m=!!e[0].data.yStack,r=e.map(function(t,G){return m?q.zip(t.data.t[0],t.data.r[0],t.data.yStack[0]):q.zip(t.data.t[0],t.data.r[0])}),u=k.angularScale,v=k.radialScale.domain()[0],
w={bar:function(t,G,H){H=e[H].data;G=k.radialScale(t[1])-k.radialScale(0);t=k.radialScale(t[2]||0);H=H.barWidth;q.select(this).attr({"class":"mark bar",d:"M"+[[G+t,-H/2],[G+t,H/2],[t,H/2],[t,-H/2]].join("L")+"Z",transform:function(I,J){return"rotate("+(k.orientation+u(I[0]))+")"}})},dot:function(t,G,H){var I=t[2]?[t[0],t[1]+t[2]]:t;t=q.svg.symbol().size(e[H].data.dotSize).type(e[H].data.dotType)(t,G);q.select(this).attr({"class":"mark dot",d:t,transform:function(J,L){J=k.radialScale(I[1]);L=(k.angularScale(I[0])+
k.orientation)*Math.PI/180;return"translate("+[J*Math.cos(L),J*Math.sin(L)]+")"}})}},D=q.svg.line.radial().interpolate(e[0].data.lineInterpolation).radius(function(t){return k.radialScale(t[1])}).angle(function(t){return k.angularScale(t[0])*Math.PI/180});w.line=function(t,G,H){var I=t[2]?r[H].map(function(L,E){return[L[0],L[1]+L[2]]}):r[H];q.select(this).each(w.dot).style({opacity:function(L,E){return+e[H].data.dotVisible},fill:A.stroke(t,G,H)}).attr({"class":"mark dot"});if(!(0<G)){var J=q.select(this.parentNode).selectAll("path.line").data([0]);
J.enter().insert("path");J.attr({"class":"line",d:D(I),transform:function(L,E){return"rotate("+(k.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(L,E){return A.fill(t,G,H)},"fill-opacity":0,stroke:function(L,E){return A.stroke(t,G,H)},"stroke-width":function(L,E){return A["stroke-width"](t,G,H)},"stroke-dasharray":function(L,E){return A["stroke-dasharray"](t,G,H)},opacity:function(L,E){return A.opacity(t,G,H)},display:function(L,E){return A.display(t,G,H)}})}};g=k.angularScale.range();
var C=Math.abs(g[1]-g[0])/r[0].length*Math.PI/180,x=q.svg.arc().startAngle(function(t){return-C/2}).endAngle(function(t){return C/2}).innerRadius(function(t){return k.radialScale(v+(t[2]||0))}).outerRadius(function(t){return k.radialScale(v+(t[2]||0))+k.radialScale(t[1])});w.arc=function(t,G,H){q.select(this).attr({"class":"mark arc",d:x,transform:function(I,J){return"rotate("+(k.orientation+u(I[0])+90)+")"}})};var A={fill:function(t,G,H){return e[H].data.color},stroke:function(t,G,H){return e[H].data.strokeColor},
"stroke-width":function(t,G,H){return e[H].data.strokeSize+"px"},"stroke-dasharray":function(t,G,H){return l[e[H].data.strokeDash]},opacity:function(t,G,H){return e[H].data.opacity},display:function(t,G,H){return"undefined"===typeof e[H].data.visible||e[H].data.visible?"block":"none"}};g=q.select(this).selectAll("g.layer").data(r);g.enter().append("g").attr({"class":"layer"});var B=g.selectAll("path.mark").data(function(t,G){return t});B.enter().append("path").attr({"class":"mark"});B.style(A).each(w[k.geometryType]);
B.exit().remove();g.exit().remove()})}var f=[h.PolyChart.defaultConfig()],d=q.dispatch("hover"),l={solid:"none",dash:[5,2],dot:[2,5]};a.config=function(k){if(!arguments.length)return f;k.forEach(function(c,e){f[e]||(f[e]={});n(f[e],h.PolyChart.defaultConfig());n(f[e],c)});return this};a.getColorScale=function(){};q.rebind(a,d,"on");return a};h.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",
strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:q.scale.category20()}}};h.BarChart=function(){return h.PolyChart()};h.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}};h.AreaChart=function(){return h.PolyChart()};h.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}};
h.DotPlot=function(){return h.PolyChart()};h.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}};h.LinePlot=function(){return h.PolyChart()};h.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}};h.Legend=function(){function a(){var l=f.legendConfig,k=f.data.map(function(D,C){return[].concat(D).map(function(x,A){var B=n({},l.elements[C]);B.name=x;B.color=[].concat(l.elements[C].color)[A];return B})}),c=q.merge(k);c=c.filter(function(D,
C){return l.elements[C]&&(l.elements[C].visibleInLegend||"undefined"===typeof l.elements[C].visibleInLegend)});l.reverseOrder&&(c=c.reverse());var e=l.container;if("string"==typeof e||e.nodeName)e=q.select(e);var g=c.map(function(D,C){return D.color}),m=l.fontSize,r=(k=null==l.isContinuous?"number"===typeof c[0]:l.isContinuous)?l.height:m*c.length;e=e.classed("legend-group",!0).selectAll("svg").data([0]);var u=e.enter().append("svg").attr({width:300,height:r+m,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",
version:"1.1"});u.append("g").classed("legend-axis",!0);u.append("g").classed("legend-marks",!0);u=q.range(c.length);var v=q.scale[k?"linear":"ordinal"]().domain(u).range(g),w=q.scale[k?"linear":"ordinal"]().domain(u)[k?"range":"rangePoints"]([0,r]);k?(r=e.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(g),r.enter().append("stop"),r.attr({offset:function(D,C){return C/(g.length-1)*100+"%"}}).style({"stop-color":function(D,
C){return D}}),e.append("rect").classed("legend-mark",!0).attr({height:l.height,width:l.colorBandWidth,fill:"url(#grad1)"})):(r=e.select(".legend-marks").selectAll("path.legend-mark").data(c),r.enter().append("path").classed("legend-mark",!0),r.attr({transform:function(D,C){return"translate("+[m/2,w(C)+m/2]+")"},d:function(D,C){D=D.symbol;C=3*m;D="line"===D?"M"+[[-m/2,-m/12],[m/2,-m/12],[m/2,m/12],[-m/2,m/12]]+"Z":-1!=q.svg.symbolTypes.indexOf(D)?q.svg.symbol().type(D).size(C)():q.svg.symbol().type("square").size(C)();
return D},fill:function(D,C){return v(C)}}),r.exit().remove());r=q.svg.axis().scale(w).orient("right");e=e.select("g.legend-axis").attr({transform:"translate("+[k?l.colorBandWidth:m,m/2]+")"}).call(r);e.selectAll(".domain").style({fill:"none",stroke:"none"});e.selectAll("line").style({fill:"none",stroke:k?l.textColor:"none"});e.selectAll("text").style({fill:l.textColor,"font-size":l.fontSize}).text(function(D,C){return c[C].name});return a}var f=h.Legend.defaultConfig(),d=q.dispatch("hover");a.config=
function(l){if(!arguments.length)return f;n(f,l);return this};q.rebind(a,d,"on");return a};h.Legend.defaultConfig=function(a,f){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}};h.tooltipPanel=function(){var a,f,d,l={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},k="tooltip-"+
h.tooltipPanel.uid++,c=function(){a=l.container.selectAll("g."+k).data([0]);var e=a.enter().append("g").classed(k,!0).style({"pointer-events":"none",display:"none"});d=e.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});f=e.append("text").attr({dx:l.padding+10,dy:.3*+l.fontSize});return c};c.text=function(e){var g=q.hsl(l.color).l,m=.5<=g?"#aaa":"white";e=e||"";f.style({fill:.5<=g?"black":"white","font-size":l.fontSize+"px"}).text(e);g=l.padding;e=f.node().getBBox();m={fill:l.color,
stroke:m,"stroke-width":"2px"};var r=e.width+2*g+10;e=e.height+2*g;d.attr({d:"M"+[[10,-e/2],[10,-e/4],[l.hasTick?0:10,0],[10,e/4],[10,e/2],[r,e/2],[r,-e/2]].join("L")+"Z"}).style(m);a.attr({transform:"translate("+[10,-e/2+2*g]+")"});a.style({display:"block"});return c};c.move=function(e){if(a)return a.attr({transform:"translate("+[e[0],e[1]]+")"}).style({display:"block"}),c};c.hide=function(){if(a)return a.style({display:"none"}),c};c.show=function(){if(a)return a.style({display:"block"}),c};c.config=
function(e){n(l,e);return c};return c};h.tooltipPanel.uid=1;h.adapter={};h.adapter.plotly=function(){return{convert:function(a,f){var d={};if(a.data&&(d.data=a.data.map(function(g,m){g=n({},g);[[g,["marker","color"],["color"]],[g,["marker","opacity"],["opacity"]],[g,["marker","line","color"],["strokeColor"]],[g,["marker","line","dash"],["strokeDash"]],[g,["marker","line","width"],["strokeSize"]],[g,["marker","symbol"],["dotType"]],[g,["marker","size"],["dotSize"]],[g,["marker","barWidth"],["barWidth"]],
[g,["line","interpolation"],["lineInterpolation"]],[g,["showlegend"],["visibleInLegend"]]].forEach(function(r,u){h.util.translator.apply(null,r.concat(f))});f||delete g.marker;f&&delete g.groupId;f?("LinePlot"===g.geometry?(g.type="scatter",!0===g.dotVisible?(delete g.dotVisible,g.mode="lines+markers"):g.mode="lines"):"DotPlot"===g.geometry?(g.type="scatter",g.mode="markers"):"AreaChart"===g.geometry?g.type="area":"BarChart"===g.geometry&&(g.type="bar"),delete g.geometry):("scatter"===g.type?"lines"===
g.mode?g.geometry="LinePlot":"markers"===g.mode?g.geometry="DotPlot":"lines+markers"===g.mode&&(g.geometry="LinePlot",g.dotVisible=!0):"area"===g.type?g.geometry="AreaChart":"bar"===g.type&&(g.geometry="BarChart"),delete g.mode,delete g.type);return g}),!f&&a.layout&&"stack"===a.layout.barmode)){var l=h.util.duplicates(d.data.map(function(g,m){return g.geometry}));d.data.forEach(function(g,m){g=l.indexOf(g.geometry);-1!=g&&(d.data[m].groupId=g)})}if(a.layout){a=n({},a.layout);[[a,["plot_bgcolor"],
["backgroundColor"]],[a,["showlegend"],["showLegend"]],[a,["radialaxis"],["radialAxis"]],[a,["angularaxis"],["angularAxis"]],[a.angularaxis,["showline"],["gridLinesVisible"]],[a.angularaxis,["showticklabels"],["labelsVisible"]],[a.angularaxis,["nticks"],["ticksCount"]],[a.angularaxis,["tickorientation"],["tickOrientation"]],[a.angularaxis,["ticksuffix"],["ticksSuffix"]],[a.angularaxis,["range"],["domain"]],[a.angularaxis,["endpadding"],["endPadding"]],[a.radialaxis,["showline"],["gridLinesVisible"]],
[a.radialaxis,["tickorientation"],["tickOrientation"]],[a.radialaxis,["ticksuffix"],["ticksSuffix"]],[a.radialaxis,["range"],["domain"]],[a.angularAxis,["showline"],["gridLinesVisible"]],[a.angularAxis,["showticklabels"],["labelsVisible"]],[a.angularAxis,["nticks"],["ticksCount"]],[a.angularAxis,["tickorientation"],["tickOrientation"]],[a.angularAxis,["ticksuffix"],["ticksSuffix"]],[a.angularAxis,["range"],["domain"]],[a.angularAxis,["endpadding"],["endPadding"]],[a.radialAxis,["showline"],["gridLinesVisible"]],
[a.radialAxis,["tickorientation"],["tickOrientation"]],[a.radialAxis,["ticksuffix"],["ticksSuffix"]],[a.radialAxis,["range"],["domain"]],[a.font,["outlinecolor"],["outlineColor"]],[a.legend,["traceorder"],["reverseOrder"]],[a,["labeloffset"],["labelOffset"]],[a,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(g,m){h.util.translator.apply(null,g.concat(f))});f?("undefined"!==typeof a.tickLength&&(a.angularaxis.ticklen=a.tickLength,delete a.tickLength),a.tickColor&&(a.angularaxis.tickcolor=
a.tickColor,delete a.tickColor)):(a.angularAxis&&"undefined"!==typeof a.angularAxis.ticklen&&(a.tickLength=a.angularAxis.ticklen),a.angularAxis&&"undefined"!==typeof a.angularAxis.tickcolor&&(a.tickColor=a.angularAxis.tickcolor));a.legend&&"boolean"!=typeof a.legend.reverseOrder&&(a.legend.reverseOrder="normal"!=a.legend.reverseOrder);a.legend&&"boolean"==typeof a.legend.traceorder&&(a.legend.traceorder=a.legend.traceorder?"reversed":"normal",delete a.legend.reverseOrder);if(a.margin&&"undefined"!=
typeof a.margin.t){var k=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],e={};q.entries(a.margin).forEach(function(g,m){e[c[k.indexOf(g.key)]]=g.value});a.margin=e}f&&(delete a.needsEndSpacing,delete a.minorTickColor,delete a.minorTicks,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksStep,delete a.angularaxis.rewriteTicks,delete a.angularaxis.nticks,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksStep,
delete a.radialaxis.rewriteTicks,delete a.radialaxis.nticks);d.layout=a}return d}}}},{"../../../constants/alignment":717,"../../../lib":749,d3:169}],870:[function(b,y,F){var q=b("d3");F=b("../../../lib");var n=b("../../../components/color"),p=b("./micropolar"),h=b("./undo_manager"),a=F.extendDeepAll,f=y.exports={};f.framework=function(d){function l(u,v){v&&(m=v);q.select(q.select(m).node().parentNode).selectAll(".svg-container\x3e*:not(.chart-root)").remove();k=k?a(k,u):u;e||(e=p.Axis());g=p.adapter.plotly().convert(k);
e.config(g).render(m);d.data=k.data;d.layout=k.layout;f.fillLayout(d);return k}var k,c,e,g,m,r=new h;l.isPolar=!0;l.svg=function(){return e.svg()};l.getConfig=function(){return k};l.getLiveConfig=function(){return p.adapter.plotly().convert(e.getLiveConfig(),!0)};l.getLiveScales=function(){return{t:e.angularScale(),r:e.radialScale()}};l.setUndoPoint=function(){var u=this,v=p.util.cloneJson(k);(function(w,D){r.add({undo:function(){D&&u(D)},redo:function(){u(w)}})})(v,c);c=p.util.cloneJson(v)};l.undo=
function(){r.undo()};l.redo=function(){r.redo()};return l};f.fillLayout=function(d){var l=q.select(d).selectAll(".plot-container"),k=l.selectAll(".svg-container"),c=d.framework&&d.framework.svg&&d.framework.svg();d._fullLayout=a({width:800,height:600,paper_bgcolor:n.background,_container:l,_paperdiv:k,_paper:c},d.layout)}},{"../../../components/color":615,"../../../lib":749,"./micropolar":869,"./undo_manager":871,d3:169}],871:[function(b,y,F){y.exports=function(){function q(f,d){if(!f)return this;
h=!0;f[d]();h=!1;return this}var n=[],p=-1,h=!1,a;return{add:function(f){if(h)return this;n.splice(p+1,n.length-p);n.push(f);p=n.length-1;return this},setCallback:function(f){a=f},undo:function(){var f=n[p];if(!f)return this;q(f,"undo");--p;a&&a(f.undo);return this},redo:function(){var f=n[p+1];if(!f)return this;q(f,"redo");p+=1;a&&a(f.redo);return this},clear:function(){n=[];p=-1},hasUndo:function(){return-1!==p},hasRedo:function(){return p<n.length-1},getCommands:function(){return n},getPreviousCommand:function(){return n[p-
1]},getIndex:function(){return p}}}},{}],872:[function(b,y,F){function q(T,V){this.id=V;this.gd=T;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=null;this.traceHash={};this.layers={};this.clipPaths={};this.clipIds={};this.viewInitial={};T=T._fullLayout;this.clipIds.forTraces="clip"+T._uid+V+"-for-traces";this.clipPaths.forTraces=T._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=T._polarlayer.append("g").attr("class",V);
this.angularTickLayout=this.radialTickLayout=null}function n(T){var V=T.ticks+String(T.ticklen)+String(T.showticklabels);"side"in T&&(V+=T.side);return V}function p(T,V){var aa=c.findIndexOfMin(V,function(ba){return c.angleDist(T,ba)});return V[aa]}function h(T,V,aa){V?(T.attr("display",null),T.attr(aa)):T&&T.attr("display","none");return T}function a(T,V){return"translate("+T+","+V+")"}function f(T){return"rotate("+T+")"}var d=b("d3"),l=b("tinycolor2"),k=b("../../registry"),c=b("../../lib"),e=b("../../components/color"),
g=b("../../components/drawing"),m=b("../plots"),r=b("../../plots/cartesian/axes"),u=b("../cartesian/set_convert"),v=b("./set_convert"),w=b("../cartesian/autorange").doAutoRange,D=b("../cartesian/dragbox"),C=b("../../components/dragelement"),x=b("../../components/fx"),A=b("../../components/titles"),B=b("../cartesian/select").prepSelect,t=b("../cartesian/select").selectOnClick,G=b("../cartesian/select").clearSelect,H=b("../../lib/setcursor"),I=b("../../lib/clear_gl_canvases"),J=b("../../plot_api/subroutines").redrawReglTraces,
L=b("../../constants/alignment").MID_SHIFT,E=b("./constants"),K=b("./helpers"),N=c._,O=c.mod,Q=c.deg2rad,P=c.rad2deg;b=q.prototype;y.exports=function(T,V){return new q(T,V)};b.plot=function(T,V){var aa=V[this.id];this._hasClipOnAxisFalse=!1;for(var ba=0;ba<T.length;ba++)if(!1===T[ba][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(V,aa);this.updateLayout(V,aa);m.generalUpdatePerTraceModule(this.gd,this,T,aa);this.updateFx(V,aa)};b.updateLayers=function(T,V){var aa=this.layers;
T=V.radialaxis;V=V.angularaxis;var ba=E.layerNames,Y=ba.indexOf("frontplot");ba=ba.slice(0,Y);V="below traces"===V.layer;T="below traces"===T.layer;V&&ba.push("angular-line");T&&ba.push("radial-line");V&&ba.push("angular-axis");T&&ba.push("radial-axis");ba.push("frontplot");V||ba.push("angular-line");T||ba.push("radial-line");V||ba.push("angular-axis");T||ba.push("radial-axis");T=this.framework.selectAll(".polarsublayer").data(ba,String);T.enter().append("g").attr("class",function(ea){return"polarsublayer "+
ea}).each(function(ea){var da=aa[ea]=d.select(this);switch(ea){case "frontplot":da.append("g").classed("barlayer",!0);da.append("g").classed("scatterlayer",!0);break;case "backplot":da.append("g").classed("maplayer",!0);break;case "plotbg":aa.bg=da.append("path");break;case "radial-grid":da.style("fill","none");break;case "angular-grid":da.style("fill","none");break;case "radial-line":da.append("line").style("fill","none");break;case "angular-line":da.append("path").style("fill","none")}});T.order()};
b.updateLayout=function(T,V){var aa=this.layers,ba=T._size,Y=V.radialaxis,ea=V.angularaxis,da=V.domain.x,ca=V.domain.y;this.xOffset=ba.l+ba.w*da[0];this.yOffset=ba.t+ba.h*(1-ca[1]);var la=this.xLength=ba.w*(da[1]-da[0]),pa=this.yLength=ba.h*(ca[1]-ca[0]),qa=V.sector;this.sectorInRad=qa.map(Q);var oa=qa[0];qa=qa[1]-oa;oa=O(oa,360);qa=oa+qa;var ka=Math.cos(Q(oa)),ra=Math.sin(Q(oa)),ha=Math.cos(Q(qa)),ma=Math.sin(Q(qa));var wa=90>=oa&&90<=qa||90<oa&&450<=qa?1:0>=ra&&0>=ma?0:Math.max(ra,ma);var na=180>=
oa&&180<=qa||180<oa&&540<=qa?-1:0<=ka&&0<=ha?0:Math.min(ka,ha);oa=this.sectorBBox=[na,270>=oa&&270<=qa||270<oa&&630<=qa?-1:0<=ra&&0<=ma?0:Math.min(ra,ma),360<=qa?1:0>=ka&&0>=ha?0:Math.max(ka,ha),wa];qa=oa[2]-oa[0];ra=Math.abs((oa[3]-oa[1])/qa);pa/la>ra?(ka=la,ra*=la,la=(pa-ra)/ba.h/2,da=[da[0],da[1]],ca=[ca[0]+la,ca[1]-la]):(ka=pa/ra,ra=pa,la=(la-ka)/ba.w/2,da=[da[0]+la,da[1]-la],ca=[ca[0],ca[1]]);this.xLength2=ka;this.yLength2=ra;this.xDomain2=da;this.yDomain2=ca;la=this.xOffset2=ba.l+ba.w*da[0];
pa=this.yOffset2=ba.t+ba.h*(1-ca[1]);ka=this.radius=ka/qa;ra=this.innerRadius=V.hole*ka;qa=this.cx=la-ka*oa[0];oa=this.cy=pa+ka*oa[3];ha=this.cxx=qa-la;ma=this.cyy=oa-pa;this.radialAxis=this.mockAxis(T,V,Y,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[Y.side],domain:[ra/ba.w,ka/ba.w]});this.angularAxis=this.mockAxis(T,V,ea,{side:"right",domain:[0,Math.PI],autorange:!1});this.doAutoRange(T,V);this.updateAngularAxis(T,V);this.updateRadialAxis(T,V);this.updateRadialAxisTitle(T,V);this.xaxis=
this.mockCartesianAxis(T,V,{_id:"x",domain:da});this.yaxis=this.mockCartesianAxis(T,V,{_id:"y",domain:ca});T=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",T).attr("transform",a(ha,ma));aa.frontplot.attr("transform",a(la,pa)).call(g.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);aa.bg.attr("d",T).attr("transform",a(qa,oa)).call(e.fill,V.bgcolor)};b.mockAxis=function(T,V,aa,ba){aa=c.extendFlat({},aa,ba);v(aa,V,T);return aa};b.mockCartesianAxis=function(T,
V,aa){var ba=this,Y=aa._id,ea=c.extendFlat({type:"linear"},aa);u(ea,T);var da={x:[0,2],y:[1,3]};ea.setRange=function(){var ca=ba.sectorBBox,la=da[Y],pa=ba.radialAxis._rl;pa=(pa[1]-pa[0])/(1-V.hole);ea.range=[ca[la[0]]*pa,ca[la[1]]*pa]};ea.isPtWithinRange="x"===Y?function(ca){return ba.isPtInside(ca)}:function(){return!0};ea.setRange();ea.setScale();return ea};b.doAutoRange=function(T,V){var aa=this.gd;T=this.radialAxis;V=V.radialaxis;T.setScale();w(aa,T);aa=T.range;V.range=aa.slice();V._input.range=
aa.slice();T._rl=[T.r2l(aa[0],null,"gregorian"),T.r2l(aa[1],null,"gregorian")]};b.updateRadialAxis=function(T,V){var aa=this,ba=aa.gd;T=aa.layers;var Y=aa.radius,ea=aa.innerRadius,da=aa.cx,ca=aa.cy,la=V.radialaxis,pa=O(V.sector[0],360),qa=aa.radialAxis;V=ea<Y;aa.fillViewInitialKey("radialaxis.angle",la.angle);aa.fillViewInitialKey("radialaxis.range",qa.range.slice());qa.setGeometry();"auto"===qa.tickangle&&90<pa&&270>=pa&&(qa.tickangle=180);pa=function(ma){return"translate("+(qa.l2p(ma.x)+ea)+",0)"};
var oa=function(ma){return aa.pathArc(qa.r2p(ma.x)+ea)},ka=n(la);aa.radialTickLayout!==ka&&(T["radial-axis"].selectAll(".xtick").remove(),aa.radialTickLayout=ka);if(V){qa.setScale();ka=r.calcTicks(qa);var ra=r.clipEnds(qa,ka),ha=r.getTickSigns(qa)[2];r.drawTicks(ba,qa,{vals:ka,layer:T["radial-axis"],path:r.makeTickPath(qa,0,ha),transFn:pa,crisp:!1});r.drawGrid(ba,qa,{vals:ra,layer:T["radial-grid"],path:oa,transFn:c.noop,crisp:!1});r.drawLabels(ba,qa,{vals:ka,layer:T["radial-axis"],transFn:pa,labelFns:r.makeLabelFns(qa,
0)})}ba=aa.radialAxisAngle=aa.vangles?P(p(Q(la.angle),aa.vangles)):la.angle;da=a(da,ca);ca=da+f(-ba);h(T["radial-axis"],V&&(la.showticklabels||la.ticks),{transform:ca});h(T["radial-grid"],V&&la.showgrid,{transform:da});h(T["radial-line"].select("line"),V&&la.showline,{x1:ea,y1:0,x2:Y,y2:0,transform:ca}).attr("stroke-width",la.linewidth).call(e.stroke,la.linecolor)};b.updateRadialAxisTitle=function(T,V,aa){T=this.gd;var ba=this.radius,Y=this.cx,ea=this.cy;V=V.radialaxis;var da=this.id+"title";aa=void 0!==
aa?aa:this.radialAxisAngle;var ca=Q(aa),la=Math.cos(ca);ca=Math.sin(ca);var pa=0;if(V.title){pa=g.bBox(this.layers["radial-axis"].node()).height;var qa=V.title.font.size;pa="counterclockwise"===V.side?-pa-.4*qa:pa+.8*qa}this.layers["radial-axis-title"]=A.draw(T,da,{propContainer:V,propName:this.id+".radialaxis.title",placeholder:N(T,"Click to enter radial axis title"),attributes:{x:Y+ba/2*la+pa*ca,y:ea-ba/2*ca+pa*la,"text-anchor":"middle"},transform:{rotate:-aa}})};b.updateAngularAxis=function(T,
V){var aa=this;T=aa.gd;var ba=aa.layers,Y=aa.radius,ea=aa.innerRadius,da=aa.cx,ca=aa.cy,la=V.angularaxis,pa=aa.angularAxis;aa.fillViewInitialKey("angularaxis.rotation",la.rotation);pa.setGeometry();pa.setScale();var qa=function(ya){return pa.t2g(ya.x)};"linear"===pa.type&&"radians"===pa.thetaunit&&(pa.tick0=P(pa.tick0),pa.dtick=P(pa.dtick));var oa=function(ya){return a(da+Y*Math.cos(ya),ca-Y*Math.sin(ya))},ka=function(ya){return oa(qa(ya))},ra=function(ya){ya=qa(ya);return oa(ya)+f(-P(ya))},ha=function(ya){var Fa=
qa(ya);ya=Math.cos(Fa);Fa=Math.sin(Fa);return"M"+[da+ea*ya,ca-ea*Fa]+"L"+[da+Y*ya,ca-Y*Fa]},ma=r.makeLabelFns(pa,0).labelStandoff,wa={xFn:function(ya){ya=qa(ya);return Math.cos(ya)*ma},yFn:function(ya){var Fa=qa(ya);return-Math.sin(Fa)*(ma+ya.fontSize*(0<Math.sin(Fa)?.2:1))+Math.abs(Math.cos(Fa))*ya.fontSize*L},anchorFn:function(ya){ya=qa(ya);ya=Math.cos(ya);return.1>Math.abs(ya)?"middle":0<ya?"start":"end"},heightFn:function(ya,Fa,Ha){ya=qa(ya);return-.5*(1+Math.sin(ya))*Ha}},na=n(la);aa.angularTickLayout!==
na&&(ba["angular-axis"].selectAll("."+pa._id+"tick").remove(),aa.angularTickLayout=na);na=r.calcTicks(pa);"linear"===V.gridshape?(V=na.map(qa),0>c.angleDelta(V[0],V[1])&&(V=V.slice().reverse())):V=null;aa.vangles=V;"category"===pa.type&&(na=na.filter(function(ya){return c.isAngleInsideSector(qa(ya),aa.sectorInRad)}));pa.visible&&(V="inside"===pa.ticks?-1:1,r.drawTicks(T,pa,{vals:na,layer:ba["angular-axis"],path:"M"+(pa.linewidth||1)/2*V+",0h"+V*pa.ticklen,transFn:ra,crisp:!1}),r.drawGrid(T,pa,{vals:na,
layer:ba["angular-grid"],path:ha,transFn:c.noop,crisp:!1}),r.drawLabels(T,pa,{vals:na,layer:ba["angular-axis"],repositionOnUpdate:!0,transFn:ka,labelFns:wa}));h(ba["angular-line"].select("path"),la.showline,{d:aa.pathSubplot(),transform:a(da,ca)}).attr("stroke-width",la.linewidth).call(e.stroke,la.linecolor)};b.updateFx=function(T,V){this.gd._context.staticPlot||(this.updateAngularDrag(T),this.updateRadialDrag(T,V,0),this.updateRadialDrag(T,V,1),this.updateMainDrag(T))};b.updateMainDrag=function(T){function V(Sa,
lb){return Math.sqrt(Sa*Sa+lb*lb)}function aa(Sa,lb){return[Sa*Math.cos(lb),Sa*Math.sin(-lb)]}function ba(Sa,lb){if(0===Sa)return ra.pathSector(2*Qa);var rb=Xa/Sa,yb=lb-rb;lb+=rb;rb=Math.max(0,Math.min(Sa,ya));Sa=rb-Qa;rb+=Qa;return"M"+aa(Sa,yb)+"A"+[Sa,Sa]+" 0,0,0 "+aa(Sa,lb)+"L"+aa(rb,lb)+"A"+[rb,rb]+" 0,0,1 "+aa(rb,yb)+"Z"}function Y(Sa,lb,rb){if(0===Sa)return ra.pathSector(2*Qa);lb=aa(Sa,lb);rb=aa(Sa,rb);Sa=tb((lb[0]+rb[0])/2);rb=tb((lb[1]+rb[1])/2);if(Sa&&rb){lb=rb/Sa;var yb=-1/lb;Sa=Aa(Qa,lb,
Sa,rb);lb=Aa(Xa,yb,Sa[0][0],Sa[0][1]);Sa=Aa(Xa,yb,Sa[1][0],Sa[1][1])}else{if(rb){yb=Xa;var Hb=Qa}else yb=Qa,Hb=Xa;lb=[[Sa-yb,rb-Hb],[Sa+yb,rb-Hb]];Sa=[[Sa-yb,rb+Hb],[Sa+yb,rb+Hb]]}return"M"+lb.join("L")+"L"+Sa.reverse().join("L")+"Z"}function ea(Sa,lb){lb=Math.max(Math.min(lb,ya),Fa);Sa<na?Sa=0:ya-Sa<na?Sa=ya:lb<na?lb=0:ya-lb<na&&(lb=ya);if(Math.abs(lb-Sa)>wa)return Sa<lb?($a=Sa,xa=lb):($a=lb,xa=Sa),!0;xa=$a=null;return!1}function da(Sa,lb){Sa=Sa||Ga;lb=lb||"M0,0Z";Ma.attr("d",Sa);cb.attr("d",lb);
D.transitionZoombox(Ma,cb,Va,gb);Va=!0;Sa={};oa(Sa);ha.emit("plotly_relayouting",Sa)}function ca(Sa,lb){Sa=Ia+Sa;var rb=Ua+lb;lb=V(Ia-hb,Ua-ob);Sa=Math.min(V(Sa-hb,rb-ob),ya);rb=Math.atan2(ob-Ua,Ia-hb);if(ea(lb,Sa)){var yb=Ga+ra.pathSector(xa);$a&&(yb+=ra.pathSector($a));var Hb=ba($a,rb)+ba(xa,rb)}da(yb,Hb)}function la(Sa,lb,rb,yb){Sa=K.findIntersectionXY(rb,yb,rb,[Sa-hb,ob-lb]);return V(Sa[0],Sa[1])}function pa(Sa,lb){Sa=Ia+Sa;var rb=Ua+lb,yb=Math.atan2(ob-rb,Sa-hb);lb=Ka(Math.atan2(ob-Ua,Ia-hb),
Pa);var Hb=Ka(yb,Pa);yb=la(Ia,Ua,lb[0],lb[1]);Sa=Math.min(la(Sa,rb,Hb[0],Hb[1]),ya);if(ea(yb,Sa)){var Vb=Ga+ra.pathSector(xa);$a&&(Vb+=ra.pathSector($a));var lc=[Y($a,lb[0],lb[1]),Y(xa,lb[0],lb[1])].join(" ")}da(Vb,lc)}function qa(){D.removeZoombox(ha);if(null!==$a&&null!==xa){var Sa={};oa(Sa);D.showDoubleClickNotifier(ha);k.call("_guiRelayout",ha,Sa)}}function oa(Sa){var lb=sb._rl,rb=(lb[1]-lb[0])/(1-Fa/ya)/ya;Sa[ra.id+".radialaxis.range"]=[lb[0]+($a-Fa)*rb,lb[0]+(xa-Fa)*rb]}function ka(Sa,lb){var rb=
ha._fullLayout.clickmode;D.removeZoombox(ha);if(2===Sa){var yb={},Hb;for(Hb in ra.viewInitial)yb[ra.id+"."+Hb]=ra.viewInitial[Hb];ha.emit("plotly_doubleclick",null);k.call("_guiRelayout",ha,yb)}-1<rb.indexOf("select")&&1===Sa&&t(lb,ha,[ra.xaxis],[ra.yaxis],ra.id,db);-1<rb.indexOf("event")&&x.click(ha,lb,ra.id)}var ra=this,ha=ra.gd,ma=T._zoomlayer,wa=E.MINZOOM,na=E.OFFEDGE,ya=ra.radius,Fa=ra.innerRadius,Ha=ra.cx,eb=ra.cy,hb=ra.cxx,ob=ra.cyy,ib=ra.sectorInRad,Pa=ra.vangles,sb=ra.radialAxis,tb=K.clampTiny,
Aa=K.findXYatLength,Ka=K.findEnclosingVertexAngles,Qa=E.cornerHalfWidth,Xa=E.cornerLen/2,pb=D.makeDragger(ra.layers,"path","maindrag","crosshair");d.select(pb).attr("d",ra.pathSubplot()).attr("transform",a(Ha,eb));var db={element:pb,gd:ha,subplot:ra.id,plotinfo:{id:ra.id,xaxis:ra.xaxis,yaxis:ra.yaxis},xaxes:[ra.xaxis],yaxes:[ra.yaxis]},Ia,Ua,$a,xa,Ga,Va,gb,Ma,cb;db.prepFn=function(Sa,lb,rb){var yb=ha._fullLayout.dragmode,Hb=pb.getBoundingClientRect();Ia=lb-Hb.left;Ua=rb-Hb.top;Pa&&(Hb=K.findPolygonOffset(ya,
ib[0],ib[1],Pa),Ia+=hb+Hb[0],Ua+=ob+Hb[1]);switch(yb){case "zoom":db.moveFn=Pa?pa:ca;db.clickFn=ka;db.doneFn=qa;xa=$a=null;Ga=ra.pathSubplot();Va=!1;gb=l(ha._fullLayout[ra.id].bgcolor).getLuminance();Ma=D.makeZoombox(ma,gb,Ha,eb,Ga);Ma.attr("fill-rule","evenodd");cb=D.makeCorners(ma,Ha,eb);G(ha);break;case "select":case "lasso":B(Sa,lb,rb,db,yb)}};pb.onmousemove=function(Sa){x.hover(ha,Sa,ra.id);ha._fullLayout._lasthover=pb;ha._fullLayout._hoversubplot=ra.id};pb.onmouseout=function(Sa){ha._dragging||
C.unhover(ha,Sa)};C.init(db)};b.updateRadialDrag=function(T,V,aa){function ba(Aa,Ka){Pa?Pa(Aa,Ka):(Aa=[Aa,-Ka],Aa=Math.abs(c.dot(Aa,[Math.cos(wa),Math.sin(wa)])/Math.sqrt(c.dot(Aa,Aa))),isNaN(Aa)||(Pa=.5>Aa?ea:da));Aa={};null!==sb?Aa[ca.id+".radialaxis.angle"]=sb:null!==tb&&(Aa[ca.id+".radialaxis.range["+aa+"]"]=tb);la.emit("plotly_relayouting",Aa)}function Y(){null!==sb?k.call("_guiRelayout",la,ca.id+".radialaxis.angle",sb):null!==tb&&k.call("_guiRelayout",la,ca.id+".radialaxis.range["+aa+"]",tb)}
function ea(Aa,Ka){0!==aa&&(sb=Math.atan2(ka-(ob+Ka),hb+Aa-oa),ca.vangles&&(sb=p(sb,ca.vangles)),sb=P(sb),Aa=a(oa,ka)+f(-sb),pa["radial-axis"].attr("transform",Aa),pa["radial-line"].select("line").attr("transform",Aa),Aa=ca.gd._fullLayout,ca.updateRadialAxisTitle(Aa,Aa[ca.id],sb))}function da(Aa,Ka){Aa=c.dot([Aa,-Ka],[Math.cos(wa),Math.sin(wa)]);tb=Ha-eb*Aa;if(0<eb!==(aa?tb>ya:tb<Fa))tb=null;else{Ka=la._fullLayout;Aa=Ka[ca.id];ra.range[aa]=tb;ra._rl[aa]=tb;ca.updateRadialAxis(Ka,Aa);ca.xaxis.setRange();
ca.xaxis.setScale();ca.yaxis.setRange();ca.yaxis.setScale();Ka=!1;for(var Qa in ca.traceHash){var Xa=ca.traceHash[Qa],pb=c.filterVisible(Xa);Xa[0][0].trace._module.plot(la,ca,pb,Aa);k.traceIs(Qa,"gl")&&pb.length&&(Ka=!0)}Ka&&(I(la),J(la))}}var ca=this,la=ca.gd,pa=ca.layers;T=ca.radius;var qa=ca.innerRadius,oa=ca.cx,ka=ca.cy,ra=ca.radialAxis,ha=E.radialDragBoxSize,ma=ha/2;if(ra.visible){var wa=Q(ca.radialAxisAngle),na=ra._rl,ya=na[0],Fa=na[1],Ha=na[aa],eb=.75*(na[1]-na[0])/(1-V.hole)/T;if(aa){var hb=
oa+(T+ma)*Math.cos(wa);var ob=ka-(T+ma)*Math.sin(wa);V="radialdrag"}else hb=oa+(qa-ma)*Math.cos(wa),ob=ka-(qa-ma)*Math.sin(wa),V="radialdrag-inner";V=D.makeRectDragger(pa,V,"crosshair",-ma,-ma,ha,ha);var ib={element:V,gd:la};h(d.select(V),ra.visible&&qa<T,{transform:a(hb,ob)});var Pa,sb,tb;ib.prepFn=function(){tb=sb=Pa=null;ib.moveFn=ba;ib.doneFn=Y;G(la)};ib.clampFn=function(Aa,Ka){Math.sqrt(Aa*Aa+Ka*Ka)<E.MINDRAG&&(Ka=Aa=0);return[Aa,Ka]};C.init(ib)}};b.updateAngularDrag=function(T){function V(Pa,
sb){var tb=Y.gd._fullLayout,Aa=tb[Y.id],Ka=P(Math.atan2(ka+ra-(Ha+sb),Fa+Pa-oa-ra)-ib);hb=eb+Ka;da.frontplot.attr("transform",a(Y.xOffset2,Y.yOffset2)+f([-Ka,oa,ka]));Y.vangles?(ob=Y.radialAxisAngle+Ka,Pa=a(pa,qa)+f(-Ka),sb=a(pa,qa)+f(-ob),da.bg.attr("transform",Pa),da["radial-grid"].attr("transform",Pa),da["radial-axis"].attr("transform",sb),da["radial-line"].select("line").attr("transform",sb),Y.updateRadialAxisTitle(tb,Aa,ob)):Y.clipPaths.forTraces.select("path").attr("transform",a(oa,ka)+f(Ka));
na.each(function(){var Xa=d.select(this),pb=g.getTranslate(Xa);Xa.attr("transform",a(pb.x,pb.y)+f([Ka]))});ya.each(function(){var Xa=d.select(this),pb=Xa.select("text"),db=g.getTranslate(Xa);Xa.attr("transform",f([Ka,pb.attr("x"),pb.attr("y")])+a(db.x,db.y))});la.rotation=c.modHalf(hb,360);Y.updateAngularAxis(tb,Aa);Y._hasClipOnAxisFalse&&!c.isFullCircle(Y.sectorInRad)&&wa.call(g.hideOutsideRangePoints,Y);tb=!1;for(var Qa in Y.traceHash)k.traceIs(Qa,"gl")&&(Pa=Y.traceHash[Qa],sb=c.filterVisible(Pa),
Pa[0][0].trace._module.plot(ea,Y,sb,Aa),sb.length&&(tb=!0));tb&&(I(ea),J(ea));Aa={};aa(Aa);ea.emit("plotly_relayouting",Aa)}function aa(Pa){Pa[Y.id+".angularaxis.rotation"]=hb;Y.vangles&&(Pa[Y.id+".radialaxis.angle"]=ob)}function ba(){ya.select("text").attr("transform",null);var Pa={};aa(Pa);k.call("_guiRelayout",ea,Pa)}var Y=this,ea=Y.gd,da=Y.layers,ca=Y.radius,la=Y.angularAxis,pa=Y.cx,qa=Y.cy,oa=Y.cxx,ka=Y.cyy,ra=E.angularDragBoxSize,ha=D.makeDragger(da,"path","angulardrag","move"),ma={element:ha,
gd:ea};d.select(ha).attr("d",Y.pathAnnulus(ca,ca+ra)).attr("transform",a(pa,qa)).call(H,"move");var wa=da.frontplot.select(".scatterlayer").selectAll(".trace"),na=wa.selectAll(".point"),ya=wa.selectAll(".textpoint"),Fa,Ha,eb,hb,ob,ib;ma.prepFn=function(Pa,sb,tb){eb=T[Y.id].angularaxis.rotation;Pa=ha.getBoundingClientRect();Fa=sb-Pa.left;Ha=tb-Pa.top;ib=Math.atan2(ka+ra-Ha,Fa-oa-ra);ma.moveFn=V;ma.doneFn=ba;G(ea)};Y.vangles&&!c.isFullCircle(Y.sectorInRad)&&(ma.prepFn=c.noop,H(d.select(ha),null));C.init(ma)};
b.isPtInside=function(T){var V=this.sectorInRad,aa=this.vangles,ba=this.angularAxis.c2g(T.theta),Y=this.radialAxis;T=Y.c2l(T.r);return(aa?K.isPtInsidePolygon:c.isPtInsideSector)(T,ba,Y._rl,V,aa)};b.pathArc=function(T){var V=this.sectorInRad,aa=this.vangles;return(aa?K.pathPolygon:c.pathArc)(T,V[0],V[1],aa)};b.pathSector=function(T){var V=this.sectorInRad,aa=this.vangles;return(aa?K.pathPolygon:c.pathSector)(T,V[0],V[1],aa)};b.pathAnnulus=function(T,V){var aa=this.sectorInRad,ba=this.vangles;return(ba?
K.pathPolygonAnnulus:c.pathAnnulus)(T,V,aa[0],aa[1],ba)};b.pathSubplot=function(){var T=this.innerRadius,V=this.radius;return T?this.pathAnnulus(T,V):this.pathSector(V)};b.fillViewInitialKey=function(T,V){T in this.viewInitial||(this.viewInitial[T]=V)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/drawing":637,"../../components/fx":655,"../../components/titles":710,"../../constants/alignment":717,"../../lib":749,"../../lib/clear_gl_canvases":733,"../../lib/setcursor":769,
"../../plot_api/subroutines":788,"../../plots/cartesian/axes":797,"../../registry":880,"../cartesian/autorange":796,"../cartesian/dragbox":805,"../cartesian/select":816,"../cartesian/set_convert":817,"../plots":860,"./constants":861,"./helpers":862,"./set_convert":873,d3:169,tinycolor2:548}],873:[function(b,y,F){function q(d,l){var k=l._subplot;d.setGeometry=function(){var c=d._rl[0],e=d._rl[1],g=k.innerRadius,m=(k.radius-g)/(e-c),r=g/m,u=c>e?function(v){return 0>=v}:function(v){return 0<=v};d.c2g=
function(v){v=d.c2l(v)-c;return(u(v)?v:0)+r};d.g2c=function(v){return d.l2c(v+c-r)};d.g2p=function(v){return v*m};d.c2p=function(v){return d.g2p(d.c2g(v))}}}function n(d,l){var k=d.type;if("linear"===k){var c=d.d2c,e=d.c2d;d.d2c=function(g,m){g=c(g);return"degrees"===m?a(g):g};d.c2d=function(g,m){g="degrees"===m?f(g):g;return e(g)}}d.makeCalcdata=function(g,m){var r=g[m],u=g._length,v;if(r){if(p.isTypedArray(r)&&"linear"===k){if(u===r.length)return r;if(r.subarray)return r.subarray(0,u)}m=Array(u);
for(v=0;v<u;v++)m[v]=d.d2c(r[v],g.thetaunit)}else for(v=m+"0",m="d"+m,r=(v in g)?d.d2c(g[v],g.thetaunit):0,g=g[m]?d.d2c(g[m],g.thetaunit):(d.period||2*Math.PI)/u,m=Array(u),v=0;v<u;v++)m[v]=r+v*g;return m};d.setGeometry=function(){var g=l.sector,m=g.map(a),r={clockwise:-1,counterclockwise:1}[d.direction],u=a(d.rotation),v=function(B){return(B-u)/r},w;switch(k){case "linear":var D=w=p.identity;var C=a;var x=f;d.range=p.isFullCircle(m)?[g[0],g[0]+360]:m.map(v).map(f);break;case "category":g=d._categories.length;
var A=d.period?Math.max(d.period,g):g;0===A&&(A=1);D=C=function(B){return 2*B*Math.PI/A};w=x=function(B){return B*A/Math.PI/2};d.range=[0,A]}d.c2g=function(B){return r*D(B)+u};d.g2c=function(B){return w(v(B))};d.t2g=function(B){return r*C(B)+u};d.g2t=function(B){return x(v(B))}}}var p=b("../../lib"),h=b("../cartesian/set_convert"),a=p.deg2rad,f=p.rad2deg;y.exports=function(d,l,k){h(d,k);switch(d._id){case "x":case "radialaxis":q(d,l);break;case "angularaxis":n(d,l)}}},{"../../lib":749,"../cartesian/set_convert":817}],
874:[function(b,y,F){var q=b("../lib"),n=b("../plot_api/plot_template"),p=b("./domain").defaults;y.exports=function(h,a,f,d){function l(C,x){return q.coerce(r,u,k,C,x)}var k=d.attributes;f=d.handleDefaults;for(var c=d.partition||"x",e=a._subplots[d.type],g=e.length,m=g&&e[0].replace(/\d+$/,""),r,u,v=0;v<g;v++){var w=e[v];r=h[w]?h[w]:h[w]={};u=n.newContainer(a,w,m);l("uirevision",a.uirevision);var D={};D[c]=[v/g,(v+1)/g];p(u,a,l,D);d.id=w;f(r,u,l,d)}}},{"../lib":749,"../plot_api/plot_template":787,
"./domain":824}],875:[function(b,y,F){function q(n){var p=n.description?" "+n.description:"";n=n.keys||[];if(0<n.length){p=[];for(var h=0;h<n.length;h++)p[h]="`"+n[h]+"`";p=1===n.length?"variable "+p[0]:"variables "+p.slice(0,-1).join(", ")+" and "+p.slice(-1)+"."}return p}y=b("../constants/docs").FORMAT_LINK;b=b("../constants/docs").DATE_FORMAT_LINK;['Variables are inserted using %{variable}, for example "y: %{y}". Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',
y,'for details on the formatting syntax. Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',b,"for details on the date formatting syntax."].join(" ");F.hovertemplateAttrs=function(n,p){n=n||{};p=p||{};q(p);p={valType:"string",dflt:"",editType:n.editType||"none"};!1!==n.arrayOk&&(p.arrayOk=!0);return p};F.texttemplateAttrs=function(n,p){n=n||{};p=p||{};q(p);p={valType:"string",dflt:"",editType:n.editType||"calc"};!1!==n.arrayOk&&(p.arrayOk=
!0);return p}},{"../constants/docs":719}],876:[function(b,y,F){var q=b("./ternary"),n=b("../../plots/get_data").getSubplotCalcData;y=b("../../lib").counterRegex;F.name="ternary";var p=F.attr="subplot";F.idRoot="ternary";F.idRegex=F.attrRegex=y("ternary");(F.attributes={})[p]={valType:"subplotid",dflt:"ternary",editType:"calc"};F.layoutAttributes=b("./layout_attributes");F.supplyLayoutDefaults=b("./layout_defaults");F.plot=function(h){for(var a=h._fullLayout,f=h.calcdata,d=a._subplots.ternary,l=0;l<
d.length;l++){var k=d[l],c=n(f,"ternary",k),e=a[k]._subplot;e||(e=new q({id:k,graphDiv:h,container:a._ternarylayer.node()},a),a[k]._subplot=e);e.plot(c,a,h._promises)}};F.clean=function(h,a,f,d){h=d._subplots.ternary||[];for(f=0;f<h.length;f++){var l=h[f],k=d[l]._subplot;!a[l]&&k&&(k.plotContainer.remove(),k.clipDef.remove(),k.clipDefRelative.remove(),k.layers["a-title"].remove(),k.layers["b-title"].remove(),k.layers["c-title"].remove())}}},{"../../lib":749,"../../plots/get_data":834,"./layout_attributes":877,
"./layout_defaults":878,"./ternary":879}],877:[function(b,y,F){F=b("../../components/color/attributes");var q=b("../domain").attributes,n=b("../cartesian/layout_attributes"),p=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/extend").extendFlat;b={title:{text:n.title.text,font:n.title.font},color:n.color,tickmode:n.tickmode,nticks:b({},n.nticks,{dflt:6,min:1}),tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,
showticklabels:n.showticklabels,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,showexponent:n.showexponent,exponentformat:n.exponentformat,separatethousands:n.separatethousands,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:b({},n.showline,{dflt:!0}),linecolor:n.linecolor,linewidth:n.linewidth,showgrid:b({},n.showgrid,{dflt:!0}),gridcolor:n.gridcolor,
gridwidth:n.gridwidth,layer:n.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}};y=y.exports=p({domain:q({name:"ternary"}),bgcolor:{valType:"color",dflt:F.background},sum:{valType:"number",dflt:1,min:0},aaxis:b,baxis:b,caxis:b},"plot","from-root");y.uirevision={valType:"any",editType:"none"};y.aaxis.uirevision=y.baxis.uirevision=y.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":614,"../../lib/extend":739,
"../../plot_api/edit_types":780,"../cartesian/layout_attributes":811,"../domain":824}],878:[function(b,y,F){function q(m,r,u,v){var w=u("bgcolor");u=u("sum");v.bgColor=p.combine(w,v.paper_bgcolor);for(var D,C,x=0;x<g.length;x++)w=g[x],D=m[w]||{},C=h.newContainer(r,w),C._name=w,n(D,C,v,r);v=r.aaxis;w=r.baxis;r=r.caxis;v.min+w.min+r.min>=u&&(v.min=0,w.min=0,r.min=0,m.aaxis&&delete m.aaxis.min,m.baxis&&delete m.baxis.min,m.caxis&&delete m.caxis.min)}function n(m,r,u,v){function w(t,G){return a.coerce(m,
r,D,t,G)}var D=e[r._name];w("uirevision",v.uirevision);r.type="linear";v=w("color");var C=v!==D.color.dflt?v:u.font.color,x=r._name.charAt(0).toUpperCase(),A="Component "+x,B=w("title.text",A);r._hovertitle=B===A?B:x;a.coerceFont(w,"title.font",{family:u.font.family,size:Math.round(1.2*u.font.size),color:C});w("min");k(m,r,w,"linear");d(m,r,w,"linear",{});l(m,r,w,{outerTicks:!0});w("showticklabels")&&(a.coerceFont(w,"tickfont",{family:u.font.family,size:u.font.size,color:C}),w("tickangle"),w("tickformat"));
c(m,r,w,{dfltColor:v,bgColor:u.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:D});w("hoverformat");w("layer")}var p=b("../../components/color"),h=b("../../plot_api/plot_template"),a=b("../../lib"),f=b("../subplot_defaults"),d=b("../cartesian/tick_label_defaults"),l=b("../cartesian/tick_mark_defaults"),k=b("../cartesian/tick_value_defaults"),c=b("../cartesian/line_grid_defaults"),e=b("./layout_attributes"),g=["aaxis","baxis","caxis"];y.exports=function(m,r,u){f(m,r,u,{type:"ternary",
attributes:e,handleDefaults:q,font:r.font,paper_bgcolor:r.paper_bgcolor})}},{"../../components/color":615,"../../lib":749,"../../plot_api/plot_template":787,"../cartesian/line_grid_defaults":813,"../cartesian/tick_label_defaults":818,"../cartesian/tick_mark_defaults":819,"../cartesian/tick_value_defaults":820,"../subplot_defaults":874,"./layout_attributes":877}],879:[function(b,y,F){function q(E,K){this.id=E.id;this.graphDiv=E.graphDiv;this.init(K);this.makeFramework(K);this.cTickLayout=this.bTickLayout=
this.aTickLayout=null}function n(E){p.select(E).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var p=b("d3"),h=b("tinycolor2"),a=b("../../registry"),f=b("../../lib"),d=f._,l=b("../../components/color"),k=b("../../components/drawing"),c=b("../cartesian/set_convert"),e=b("../../lib/extend").extendFlat,g=b("../plots"),m=b("../cartesian/axes"),r=b("../../components/dragelement"),u=b("../../components/fx");F=b("../../components/dragelement/helpers");var v=F.freeMode,
w=F.rectMode,D=b("../../components/titles"),C=b("../cartesian/select").prepSelect,x=b("../cartesian/select").selectOnClick,A=b("../cartesian/select").clearSelect,B=b("../cartesian/select").clearSelectionsCache,t=b("../cartesian/constants");y.exports=q;b=q.prototype;b.init=function(E){this.container=E._ternarylayer;this.defs=E._defs;this.layoutId=E._uid;this.traceHash={};this.layers={}};b.plot=function(E,K){var N=K[this.id];K=K._size;this._hasClipOnAxisFalse=!1;for(var O=0;O<E.length;O++)if(!1===E[O][0].trace.cliponaxis){this._hasClipOnAxisFalse=
!0;break}this.updateLayers(N);this.adjustLayout(N,K);g.generalUpdatePerTraceModule(this.graphDiv,this,E,N);this.layers.plotbg.select("path").call(l.fill,N.bgcolor)};b.makeFramework=function(E){var K=this.graphDiv,N=E[this.id],O=this.clipId="clip"+this.layoutId+this.id,Q=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=f.ensureSingleById(E._clips,"clipPath",O,function(P){P.append("path").attr("d","M0,0Z")});this.clipDefRelative=f.ensureSingleById(E._clips,"clipPath",Q,function(P){P.append("path").attr("d",
"M0,0Z")});this.plotContainer=f.ensureSingle(this.container,"g",this.id);this.updateLayers(N);k.setClipUrl(this.layers.backplot,O,K);k.setClipUrl(this.layers.grids,O,K)};b.updateLayers=function(E){var K=this.layers,N=["draglayer","plotbg","backplot","grids"];"below traces"===E.aaxis.layer&&N.push("aaxis","aline");"below traces"===E.baxis.layer&&N.push("baxis","bline");"below traces"===E.caxis.layer&&N.push("caxis","cline");N.push("frontplot");"above traces"===E.aaxis.layer&&N.push("aaxis","aline");
"above traces"===E.baxis.layer&&N.push("baxis","bline");"above traces"===E.caxis.layer&&N.push("caxis","cline");E=this.plotContainer.selectAll("g.toplevel").data(N,String);var O=["agrid","bgrid","cgrid"];E.enter().append("g").attr("class",function(Q){return"toplevel "+Q}).each(function(Q){var P=p.select(this);K[Q]=P;"frontplot"===Q?P.append("g").classed("scatterlayer",!0):"backplot"===Q?P.append("g").classed("maplayer",!0):"plotbg"===Q?P.append("path").attr("d","M0,0Z"):"aline"===Q||"bline"===Q||
"cline"===Q?P.append("path"):"grids"===Q&&O.forEach(function(T){K[T]=P.append("g").classed("grid "+T,!0)})});E.order()};var G=Math.sqrt(4/3);b.adjustLayout=function(E,K){var N=this,O=E.domain,Q=(O.x[0]+O.x[1])/2,P=(O.y[0]+O.y[1])/2,T=O.x[1]-O.x[0],V=O.y[1]-O.y[0],aa=T*K.w,ba=V*K.h,Y=E.sum,ea=E.aaxis.min,da=E.baxis.min,ca=E.caxis.min;if(aa>G*ba){var la=ba;O=la*G}else O=aa,la=O/G;aa=T*O/aa;V=V*la/ba;T=K.l+K.w*Q-O/2;K=K.t+K.h*(1-P)-la/2;N.x0=T;N.y0=K;N.w=O;N.h=la;N.sum=Y;N.xaxis={type:"linear",range:[ea+
2*ca-Y,Y-ea-2*da],domain:[Q-aa/2,Q+aa/2],_id:"x"};c(N.xaxis,N.graphDiv._fullLayout);N.xaxis.setScale();N.xaxis.isPtWithinRange=function(pa){return pa.a>=N.aaxis.range[0]&&pa.a<=N.aaxis.range[1]&&pa.b>=N.baxis.range[1]&&pa.b<=N.baxis.range[0]&&pa.c>=N.caxis.range[1]&&pa.c<=N.caxis.range[0]};N.yaxis={type:"linear",range:[ea,Y-da-ca],domain:[P-V/2,P+V/2],_id:"y"};c(N.yaxis,N.graphDiv._fullLayout);N.yaxis.setScale();N.yaxis.isPtWithinRange=function(){return!0};aa=N.yaxis.domain[0];Q=N.aaxis=e({},E.aaxis,
{range:[ea,Y-da-ca],side:"left",tickangle:(+E.aaxis.tickangle||0)-30,domain:[aa,aa+V*G],anchor:"free",position:0,_id:"y",_length:O});c(Q,N.graphDiv._fullLayout);Q.setScale();P=N.baxis=e({},E.baxis,{range:[Y-ea-ca,da],side:"bottom",domain:N.xaxis.domain,anchor:"free",position:0,_id:"x",_length:O});c(P,N.graphDiv._fullLayout);P.setScale();E=N.caxis=e({},E.caxis,{range:[Y-ea-da,ca],side:"right",tickangle:(+E.caxis.tickangle||0)+30,domain:[aa,aa+V*G],anchor:"free",position:0,_id:"y",_length:O});c(E,N.graphDiv._fullLayout);
E.setScale();Y="M"+T+","+(K+la)+"h"+O+"l-"+O/2+",-"+la+"Z";N.clipDef.select("path").attr("d",Y);N.layers.plotbg.select("path").attr("d",Y);Y="M0,"+la+"h"+O+"l-"+O/2+",-"+la+"Z";N.clipDefRelative.select("path").attr("d",Y);Y="translate("+T+","+K+")";N.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Y);N.clipDefRelative.select("path").attr("transform",null);Y="translate("+(T-P._offset)+","+(K+la)+")";N.layers.baxis.attr("transform",Y);N.layers.bgrid.attr("transform",Y);Y="translate("+
(T+O/2)+","+K+")rotate(30)translate(0,"+-Q._offset+")";N.layers.aaxis.attr("transform",Y);N.layers.agrid.attr("transform",Y);Y="translate("+(T+O/2)+","+K+")rotate(-30)translate(0,"+-E._offset+")";N.layers.caxis.attr("transform",Y);N.layers.cgrid.attr("transform",Y);N.drawAxes(!0);N.layers.aline.select("path").attr("d",Q.showline?"M"+T+","+(K+la)+"l"+O/2+",-"+la:"M0,0").call(l.stroke,Q.linecolor||"#000").style("stroke-width",(Q.linewidth||0)+"px");N.layers.bline.select("path").attr("d",P.showline?
"M"+T+","+(K+la)+"h"+O:"M0,0").call(l.stroke,P.linecolor||"#000").style("stroke-width",(P.linewidth||0)+"px");N.layers.cline.select("path").attr("d",E.showline?"M"+(T+O/2)+","+K+"l"+O/2+","+la:"M0,0").call(l.stroke,E.linecolor||"#000").style("stroke-width",(E.linewidth||0)+"px");N.graphDiv._context.staticPlot||N.initInteractions();k.setClipUrl(N.layers.frontplot,N._hasClipOnAxisFalse?null:N.clipId,N.graphDiv)};b.drawAxes=function(E){var K=this.graphDiv,N=this.id.substr(7)+"title",O=this.layers,Q=
this.aaxis,P=this.baxis,T=this.caxis;this.drawAx(Q);this.drawAx(P);this.drawAx(T);if(E){E=Math.max(Q.showticklabels?Q.tickfont.size/2:0,(T.showticklabels?.75*T.tickfont.size:0)+("outside"===T.ticks?.87*T.ticklen:0));var V=(P.showticklabels?P.tickfont.size:0)+("outside"===P.ticks?P.ticklen:0)+3;O["a-title"]=D.draw(K,"a"+N,{propContainer:Q,propName:this.id+".aaxis.title",placeholder:d(K,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-Q.title.font.size/3-E,"text-anchor":"middle"}});
O["b-title"]=D.draw(K,"b"+N,{propContainer:P,propName:this.id+".baxis.title",placeholder:d(K,"Click to enter Component B title"),attributes:{x:this.x0-V,y:this.y0+this.h+.83*P.title.font.size+V,"text-anchor":"middle"}});O["c-title"]=D.draw(K,"c"+N,{propContainer:T,propName:this.id+".caxis.title",placeholder:d(K,"Click to enter Component C title"),attributes:{x:this.x0+this.w+V,y:this.y0+this.h+.83*T.title.font.size+V,"text-anchor":"middle"}})}};b.drawAx=function(E){var K=this.graphDiv,N=E._name,O=
N.charAt(0),Q=E._id;N=this.layers[N];var P=O+"tickLayout",T=E.ticks+String(E.ticklen)+String(E.showticklabels);this[P]!==T&&(N.selectAll("."+Q+"tick").remove(),this[P]=T);E.setScale();Q=m.calcTicks(E);P=m.clipEnds(E,Q);T=m.makeTransFn(E);var V=m.getTickSigns(E)[2],aa=f.deg2rad(30),ba=V*(E.linewidth||1)/2;V*=E.ticklen;var Y=this.w,ea=this.h;Y={a:"M0,0l"+ea+",-"+Y/2,b:"M0,0l-"+Y/2+",-"+ea,c:"M0,0l-"+ea+","+Y/2}[O];m.drawTicks(K,E,{vals:"inside"===E.ticks?P:Q,layer:N,path:"b"===O?"M0,"+ba+"l"+Math.sin(aa)*
V+","+Math.cos(aa)*V:"M"+ba+",0l"+Math.cos(aa)*V+","+-Math.sin(aa)*V,transFn:T,crisp:!1});m.drawGrid(K,E,{vals:P,layer:this.layers[O+"grid"],path:Y,transFn:T,crisp:!1});m.drawLabels(K,E,{vals:Q,layer:N,transFn:T,labelFns:m.makeLabelFns(E,0,30)})};y=t.MINZOOM/2+.87;var H="m-0.87,.5h"+y+"v3h-"+(y+5.2)+"l"+(y/2+2.6)+",-"+(.87*y+4.5)+"l2.6,1.5l-"+y/2+","+.87*y+"Z",I="m0.87,.5h-"+y+"v3h"+(y+5.2)+"l-"+(y/2+2.6)+",-"+(.87*y+4.5)+"l-2.6,1.5l"+y/2+","+.87*y+"Z",J="m0,1l"+y/2+","+.87*y+"l2.6,-1.5l-"+(y/2+2.6)+
",-"+(.87*y+4.5)+"l-"+(y/2+2.6)+","+(.87*y+4.5)+"l2.6,1.5l"+y/2+",-"+.87*y+"Z",L=!0;b.clearSelect=function(){B(this.dragOptions);A(this.dragOptions.gd)};b.initInteractions=function(){function E(ha){var ma={};ma[T.id+".aaxis.min"]=ha.a;ma[T.id+".baxis.min"]=ha.b;ma[T.id+".caxis.min"]=ha.c;return ma}function K(ha,ma){var wa=aa._fullLayout.clickmode;n(aa);2===ha&&(aa.emit("plotly_doubleclick",null),a.call("_guiRelayout",aa,E({a:0,b:0,c:0})));-1<wa.indexOf("select")&&1===ha&&x(ma,aa,[T.xaxis],[T.yaxis],
T.id,T.dragOptions);-1<wa.indexOf("event")&&u.click(aa,ma,T.id)}function N(ha,ma){var wa=Y+ha,na=ea+ma;ma=Math.max(0,Math.min(1,1-ea/T.h,1-na/T.h));ha=Math.max(0,Math.min(1,1-(Y+(T.h-ea)/Math.sqrt(3))/T.w,1-(wa+(T.h-na)/Math.sqrt(3))/T.w));wa=Math.max(0,Math.min(1,(Y-(T.h-ea)/Math.sqrt(3))/T.w,(wa-(T.h-na)/Math.sqrt(3))/T.w));na=(ma/2+wa)*T.w;var ya=(1-ma/2-ha)*T.w,Fa=(na+ya)/2,Ha=ya-na,eb=(1-ma)*T.h,hb=eb-Ha/G;Ha<t.MINZOOM?(la=da,ka.attr("d",qa),ra.attr("d","M0,0Z")):(la={a:da.a+ma*ca,b:da.b+ha*
ca,c:da.c+wa*ca},ka.attr("d",qa+"M"+na+","+eb+"H"+ya+"L"+Fa+","+hb+"L"+na+","+eb+"Z"),ra.attr("d","M"+Y+","+ea+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+na+","+eb+H+"M"+ya+","+eb+I+"M"+Fa+","+hb+J));oa||(ka.transition().style("fill",.2<pa?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ra.transition().style("opacity",1).duration(200),oa=!0);aa.emit("plotly_relayouting",E(la))}function O(){n(aa);la!==da&&(a.call("_guiRelayout",aa,E(la)),L&&aa.data&&aa._context.showTips&&(f.notifier(d(aa,"Double-click to zoom back out"),
"long"),L=!1))}function Q(ha,ma){var wa=ha/T.xaxis._m,na=ma/T.yaxis._m;la={a:da.a-na,b:da.b+(wa+na)/2,c:da.c-(wa-na)/2};wa=[la.a,la.b,la.c].sort(f.sorterAsc);na=wa.indexOf(la.a);var ya=wa.indexOf(la.b),Fa=wa.indexOf(la.c);0>wa[0]&&(0>wa[1]+wa[0]/2?(wa[2]+=wa[0]+wa[1],wa[0]=wa[1]=0):(wa[2]+=wa[0]/2,wa[1]+=wa[0]/2,wa[0]=0),la={a:wa[na],b:wa[ya],c:wa[Fa]},ma=(da.a-la.a)*T.yaxis._m,ha=(da.c-la.c-da.b+la.b)*T.xaxis._m);wa="translate("+(T.x0+ha)+","+(T.y0+ma)+")";T.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",
wa);ha="translate("+-ha+","+-ma+")";T.clipDefRelative.select("path").attr("transform",ha);T.aaxis.range=[la.a,T.sum-la.b-la.c];T.baxis.range=[T.sum-la.a-la.c,la.b];T.caxis.range=[T.sum-la.a-la.b,la.c];T.drawAxes(!1);T._hasClipOnAxisFalse&&T.plotContainer.select(".scatterlayer").selectAll(".trace").call(k.hideOutsideRangePoints,T);aa.emit("plotly_relayouting",E(la))}function P(){a.call("_guiRelayout",aa,E(la))}var T=this,V=T.layers.plotbg.select("path").node(),aa=T.graphDiv,ba=aa._fullLayout._zoomlayer;
this.dragOptions={element:V,gd:aa,plotinfo:{id:T.id,domain:aa._fullLayout[T.id].domain,xaxis:T.xaxis,yaxis:T.yaxis},subplot:T.id,prepFn:function(ha,ma,wa){T.dragOptions.xaxes=[T.xaxis];T.dragOptions.yaxes=[T.yaxis];var na=T.dragOptions.dragmode=aa._fullLayout.dragmode;v(na)?T.dragOptions.minDrag=1:T.dragOptions.minDrag=void 0;"zoom"===na?(T.dragOptions.moveFn=N,T.dragOptions.clickFn=K,T.dragOptions.doneFn=O,ha=V.getBoundingClientRect(),Y=ma-ha.left,ea=wa-ha.top,la=da={a:T.aaxis.range[0],b:T.baxis.range[1],
c:T.caxis.range[1]},ca=T.aaxis.range[1]-da.a,pa=h(T.graphDiv._fullLayout[T.id].bgcolor).getLuminance(),qa="M0,"+T.h+"L"+T.w/2+", 0L"+T.w+","+T.h+"Z",oa=!1,ka=ba.append("path").attr("class","zoombox").attr("transform","translate("+T.x0+", "+T.y0+")").style({fill:.2<pa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",qa),ra=ba.append("path").attr("class","zoombox-corners").attr("transform","translate("+T.x0+", "+T.y0+")").style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,
opacity:0}).attr("d","M0,0Z"),T.clearSelect(aa)):"pan"===na?(T.dragOptions.moveFn=Q,T.dragOptions.clickFn=K,T.dragOptions.doneFn=P,la=da={a:T.aaxis.range[0],b:T.baxis.range[1],c:T.caxis.range[1]},T.clearSelect(aa)):(w(na)||v(na))&&C(ha,ma,wa,T.dragOptions,na)}};var Y,ea,da,ca,la,pa,qa,oa,ka,ra;V.onmousemove=function(ha){u.hover(aa,ha,T.id);aa._fullLayout._lasthover=V;aa._fullLayout._hoversubplot=T.id};V.onmouseout=function(ha){aa._dragging||r.unhover(aa,ha)};r.init(this.dragOptions)}},{"../../components/color":615,
"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../components/titles":710,"../../lib":749,"../../lib/extend":739,"../../registry":880,"../cartesian/axes":797,"../cartesian/constants":803,"../cartesian/select":816,"../cartesian/set_convert":817,"../plots":860,d3:169,tinycolor2:548}],880:[function(b,y,F){function q(u){if(u.layoutAttributes&&(u=u.layoutAttributes._arrayAttrRegexps))for(var v=0;v<u.length;v++)l(F.layoutArrayRegexes,
u[v])}function n(u,v){(u=F.componentsRegistry[u].schema)&&u.traces&&(u=u.traces[v])&&r(F.modules[v]._module.attributes,u)}function p(u,v){(u=F.componentsRegistry[u].schema)&&u.transforms&&(u=u.transforms[v])&&r(F.transformsRegistry[v].attributes,u)}function h(u,v){if((u=F.componentsRegistry[u].schema)&&u.subplots){var w=F.subplotsRegistry[v];v=w.layoutAttributes;w="subplot"===w.attr?w.name:w.attr;Array.isArray(w)&&(w=w[0]);u=u.subplots[w];v&&u&&r(v,u)}}function a(u){"object"===typeof u&&(u=u.type);
return u}var f=b("./lib/loggers"),d=b("./lib/noop"),l=b("./lib/push_unique"),k=b("./lib/is_plain_object"),c=b("./lib/dom").addStyleRule;y=b("./lib/extend");var e=b("./plots/attributes"),g=b("./plots/layout_attributes"),m=y.extendFlat,r=y.extendDeepAll;F.modules={};F.allCategories={};F.allTypes=[];F.subplotsRegistry={};F.transformsRegistry={};F.componentsRegistry={};F.layoutArrayContainers=[];F.layoutArrayRegexes=[];F.traceLayoutAttributes={};F.localeRegistry={};F.apiMethodRegistry={};F.collectableSubplotTypes=
null;F.register=function(u){F.collectableSubplotTypes=null;if(u)u&&!Array.isArray(u)&&(u=[u]);else throw Error("No argument passed to Plotly.register.");for(var v=0;v<u.length;v++){var w=u[v];if(!w)throw Error("Invalid module was attempted to be registered!");switch(w.moduleType){case "trace":var D=void 0,C=void 0,x=w.name,A=w.categories,B=w.meta;if(F.modules[x])f.log("Type "+x+" already registered");else{if(!F.subplotsRegistry[w.basePlotModule.name]){var t=void 0,G=w.basePlotModule,H=G.name;if(F.subplotsRegistry[H])f.log("Plot type "+
H+" already registered.");else for(t in q(G),F.subplotsRegistry[H]=G,F.componentsRegistry)h(t,G.name)}t={};for(G=0;G<A.length;G++)t[A[G]]=!0,F.allCategories[A[G]]=!0;F.modules[x]={_module:w,categories:t};B&&Object.keys(B).length&&(F.modules[x].meta=B);F.allTypes.push(x);for(C in F.componentsRegistry)n(C,x);w.layoutAttributes&&m(F.traceLayoutAttributes,w.layoutAttributes);w=w.basePlotModule;C=w.name;if("mapbox"===C)for(D in w=w.constants.styleRules,w)c(".js-plotly-plot .plotly .mapboxgl-"+D,w[D]);
"geo"!==C&&"mapbox"!==C||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}break;case "transform":D=void 0;C=w;if("string"!==typeof C.name)throw Error("Transform module *name* must be a string.");w="Transform module "+C.name;x="function"===typeof C.transform;A="function"===typeof C.calcTransform;if(!x&&!A)throw Error(w+" is missing a *transform* or *calcTransform* method.");x&&A&&f.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));
k(C.attributes)||f.log(w+" registered without an *attributes* object.");"function"!==typeof C.supplyDefaults&&f.log(w+" registered without a *supplyDefaults* method.");F.transformsRegistry[C.name]=C;for(D in F.componentsRegistry)p(D,C.name);break;case "component":x=C=D=void 0;if("string"!==typeof w.name)throw Error("Component module *name* must be a string.");A=w.name;F.componentsRegistry[A]=w;w.layoutAttributes&&(w.layoutAttributes._isLinkedToArray&&l(F.layoutArrayContainers,A),q(w));for(x in F.modules)n(A,
x);for(C in F.subplotsRegistry)h(A,C);for(D in F.transformsRegistry)p(A,D);w.schema&&w.schema.layout&&r(g,w.schema.layout);break;case "locale":x=w;w=x.name;D=w.split("-")[0];C=x.dictionary;x=x.format;A=C&&Object.keys(C).length;B=x&&Object.keys(x).length;t=F.localeRegistry;(G=t[w])||(t[w]=G={});D!==w&&((w=t[D])||(t[D]=w={}),A&&w.dictionary===G.dictionary&&(w.dictionary=C),B&&w.format===G.format&&(w.format=x));A&&(G.dictionary=C);B&&(G.format=x);break;case "apiMethod":F.apiMethodRegistry[w.name]=w.fn;
break;default:throw Error("Invalid module was attempted to be registered!");}}};F.getModule=function(u){return(u=F.modules[a(u)])?u._module:!1};F.traceIs=function(u,v){u=a(u);if("various"===u)return!1;var w=F.modules[u];w||(u&&"area"!==u&&f.log("Unrecognized trace type "+u+"."),w=F.modules[e.type.dflt]);return!!w.categories[v]};F.getTransformIndices=function(u,v){var w=[];u=u.transforms||[];for(var D=0;D<u.length;D++)u[D].type===v&&w.push(D);return w};F.hasTransform=function(u,v){u=u.transforms||
[];for(var w=0;w<u.length;w++)if(u[w].type===v)return!0;return!1};F.getComponentMethod=function(u,v){return(u=F.componentsRegistry[u])?u[v]||d:d};F.call=function(){var u=arguments[0],v=[].slice.call(arguments,1);return F.apiMethodRegistry[u].apply(null,v)}},{"./lib/dom":737,"./lib/extend":739,"./lib/is_plain_object":750,"./lib/loggers":753,"./lib/noop":758,"./lib/push_unique":763,"./plots/attributes":794,"./plots/layout_attributes":851}],881:[function(b,y,F){function q(a){switch(a){case "themes__thumb":a=
{autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}var n=b("../registry");b=b("../lib");var p=b.extendFlat,h=b.extendDeep;y.exports=function(a,f){a.framework&&a.framework.isPolar&&(a=a.framework.getConfig());var d,l=a.layout,k=h([],a.data);l=h({},l,q(f.tileClass));a=
a._context||{};f.width&&(l.width=f.width);f.height&&(l.height=f.height);if("thumbnail"===f.tileClass||"themes__thumb"===f.tileClass){l.annotations=[];var c=Object.keys(l);for(d=0;d<c.length;d++)-1<["xaxis","yaxis","zaxis"].indexOf(c[d].slice(0,5))&&(l[c[d]].title={text:""});for(d=0;d<k.length;d++)c=k[d],c.showscale=!1,c.marker&&(c.marker.showscale=!1),n.traceIs(c,"pie-like")&&(c.textposition="none")}if(Array.isArray(f.annotations))for(d=0;d<f.annotations.length;d++)l.annotations.push(f.annotations[d]);
c=Object.keys(l).filter(function(m){return m.match(/^scene\d*$/)});if(c.length){var e={};"thumbnail"===f.tileClass&&(e={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1});for(d=0;d<c.length;d++){var g=l[c[d]];g.xaxis||(g.xaxis={});g.yaxis||(g.yaxis={});g.zaxis||(g.zaxis={});p(g.xaxis,e);p(g.yaxis,e);p(g.zaxis,e);g._scene=null}}d=document.createElement("div");f.tileClass&&(d.className=f.tileClass);k={gd:d,td:d,layout:l,data:k,config:{staticPlot:void 0===f.staticPlot?!0:f.staticPlot,
plotGlPixelRatio:void 0===f.plotGlPixelRatio?2:f.plotGlPixelRatio,displaylogo:f.displaylogo||!1,showLink:f.showLink||!1,showTips:f.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};"transparent"!==f.setBackground&&(k.config.setBackground=f.setBackground||"opaque");k.gd.defaultLayout=q(f.tileClass);return k}},{"../lib":749,"../registry":880}],882:[function(b,y,F){var q=b("../lib"),n=b("../plot_api/to_image"),p=b("./filesaver"),h=b("./helpers");y.exports=function(a,f){var d;q.isPlainObject(a)||(d=
q.getGraphDiv(a));f=f||{};f.format=f.format||"png";f.imageDataOnly=!0;return new Promise(function(l,k){d&&d._snapshotInProgress&&k(Error("Snapshotting already in progress."));q.isIE()&&"svg"!==f.format&&k(Error(h.MSG_IE_BAD_FORMAT));d&&(d._snapshotInProgress=!0);var c=n(a,f),e=f.filename||a.fn||"newplot";e+="."+f.format.replace("-",".");c.then(function(g){d&&(d._snapshotInProgress=!1);return p(g,e,f.format)}).then(function(g){l(g)}).catch(function(g){d&&(d._snapshotInProgress=!1);k(g)})})}},{"../lib":749,
"../plot_api/to_image":790,"./filesaver":883,"./helpers":884}],883:[function(b,y,F){var q=b("../lib"),n=b("./helpers");y.exports=function(p,h,a){var f=document.createElement("a"),d="download"in f;return new Promise(function(l,k){q.isIE9orBelow()&&k(Error("IE \x3c 10 unsupported"));if(q.isSafari())return n.octetStream(("svg"===a?",":";base64,")+encodeURIComponent(p)),l(h);if(q.isIE())return k=n.createBlob(p,"svg"),window.navigator.msSaveBlob(k,h),l(h);if(d)return k=n.createBlob(p,a),k=n.createObjectURL(k),
f.href=k,f.download=h,document.body.appendChild(f),f.click(),document.body.removeChild(f),n.revokeObjectURL(k),l(h);k(Error("download error"))})}},{"../lib":749,"./helpers":884}],884:[function(b,y,F){var q=b("../registry");F.getDelay=function(p){return p._has?p._has("gl3d")||p._has("gl2d")||p._has("mapbox")?500:0:0};F.getRedrawFunc=function(p){return function(){var h=p._fullLayout||{};(h._has&&h._has("polar")||!p.data||!p.data[0]||!p.data[0].r)&&q.getComponentMethod("colorbar","draw")(p)}};F.encodeSVG=
function(p){return"data:image/svg+xml,"+encodeURIComponent(p)};F.encodeJSON=function(p){return"data:application/json,"+encodeURIComponent(p)};var n=window.URL||window.webkitURL;F.createObjectURL=function(p){return n.createObjectURL(p)};F.revokeObjectURL=function(p){return n.revokeObjectURL(p)};F.createBlob=function(p,h){if("svg"===h)return new window.Blob([p],{type:"image/svg+xml;charset\x3dutf-8"});if("full-json"===h)return new window.Blob([p],{type:"application/json;charset\x3dutf-8"});p=window.atob(p);
for(var a=p.length,f=new ArrayBuffer(a),d=new Uint8Array(f),l=0;l<a;l++)d[l]=p.charCodeAt(l);return new window.Blob([f],{type:"image/"+h})};F.octetStream=function(p){document.location.href="data:application/octet-stream"+p};F.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;F.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":880}],885:[function(b,y,F){F=b("./helpers");b={getDelay:F.getDelay,getRedrawFunc:F.getRedrawFunc,clone:b("./cloneplot"),
toSVG:b("./tosvg"),svgToImg:b("./svgtoimg"),toImage:b("./toimage"),downloadImage:b("./download")};y.exports=b},{"./cloneplot":881,"./download":882,"./helpers":884,"./svgtoimg":886,"./toimage":887,"./tosvg":888}],886:[function(b,y,F){var q=b("../lib"),n=b("events").EventEmitter,p=b("./helpers");y.exports=function(h){var a=h.emitter||new n,f=new Promise(function(d,l){var k=window.Image,c=h.svg,e=h.format||"png";if(q.isIE()&&"svg"!==e)return k=Error(p.MSG_IE_BAD_FORMAT),l(k),h.promise?f:a.emit("error",
k);var g=h.canvas,m=h.scale||1,r=m*(h.width||300),u=m*(h.height||150),v=g.getContext("2d"),w=new k;if("svg"===e||q.isIE9orBelow()||q.isSafari())var D=p.encodeSVG(c);else{var C=p.createBlob(c,"svg");D=p.createObjectURL(C)}g.width=r;g.height=u;w.onload=function(){C=null;p.revokeObjectURL(D);"svg"!==e&&v.drawImage(w,0,0,r,u);switch(e){case "jpeg":var x=g.toDataURL("image/jpeg");break;case "png":x=g.toDataURL("image/png");break;case "webp":x=g.toDataURL("image/webp");break;case "svg":x=D;break;default:if(l(Error("Image format is not jpeg, png, svg or webp.")),
!h.promise)return a.emit("error","Image format is not jpeg, png, svg or webp.")}d(x);h.promise||a.emit("success",x)};w.onerror=function(x){C=null;p.revokeObjectURL(D);l(x);if(!h.promise)return a.emit("error",x)};w.src=D});return h.promise?f:a}},{"../lib":749,"./helpers":884,events:110}],887:[function(b,y,F){var q=b("events").EventEmitter,n=b("../registry"),p=b("../lib"),h=b("./helpers"),a=b("./cloneplot"),f=b("./tosvg"),d=b("./svgtoimg");y.exports=function(l,k){var c=new q;l=a(l,{format:"png"});var e=
l.gd;e.style.position="absolute";e.style.left="-5000px";document.body.appendChild(e);var g=h.getRedrawFunc(e);n.call("plot",e,l.data,l.layout,l.config).then(g).then(function(){var m=h.getDelay(e._fullLayout);setTimeout(function(){var r=f(e),u=document.createElement("canvas");u.id=p.randstr();c=d({format:k.format,width:e._fullLayout.width,height:e._fullLayout.height,canvas:u,emitter:c,svg:r});c.clean=function(){e&&document.body.removeChild(e)}},m)}).catch(function(m){c.emit("error",m)});return c}},
{"../lib":749,"../registry":880,"./cloneplot":881,"./helpers":884,"./svgtoimg":886,"./tosvg":888,events:110}],888:[function(b,y,F){function q(k){var c=n.select("body").append("div").style({display:"none"}).html("");k=k.replace(/(&[^;]*;)/gi,function(e){return"\x26lt;"===e?"\x26#60;":"\x26rt;"===e?"\x26#62;":-1!==e.indexOf("\x3c")||-1!==e.indexOf("\x3e")?"":c.html(e).text()});c.remove();return k}var n=b("d3"),p=b("../lib"),h=b("../components/drawing"),a=b("../components/color"),f=b("../constants/xmlns_namespaces"),
d=/"/g,l=/("TOBESTRIPPED)|(TOBESTRIPPED")/g;y.exports=function(k,c,e){var g=k._fullLayout,m=g._paper,r=g._toppaper,u=g.width,v=g.height,w;m.insert("rect",":first-child").call(h.setRect,0,0,u,v).call(a.fill,g.paper_bgcolor);var D=g._basePlotModules||[];for(w=0;w<D.length;w++){var C=D[w];C.toSVG&&C.toSVG(k)}if(r)for(w=r.node().childNodes,k=Array.prototype.slice.call(w),w=0;w<k.length;w++)r=k[w],r.childNodes.length&&m.node().appendChild(r);g._draggers&&g._draggers.remove();m.node().style.background=
"";m.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var A=n.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)A.remove();else{A.style({visibility:null,display:null});var B=this.style.fontFamily;B&&-1!==B.indexOf('"')&&A.style("font-family",B.replace(d,"TOBESTRIPPED"))}});if(g._gradientUrlQueryParts){w=[];for(var x in g._gradientUrlQueryParts)w.push(x);w.length&&m.selectAll(w.join(",")).each(function(){var A=n.select(this),B=this.style.fill;
B&&-1!==B.indexOf("url(")&&A.style("fill",B.replace(d,"TOBESTRIPPED"));(B=this.style.stroke)&&-1!==B.indexOf("url(")&&A.style("stroke",B.replace(d,"TOBESTRIPPED"))})}"pdf"!==c&&"eps"!==c||m.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);m.node().setAttributeNS(f.xmlns,"xmlns",f.svg);m.node().setAttributeNS(f.xmlns,"xmlns:xlink",f.xlink);"svg"===c&&e&&(m.attr("width",e*u),m.attr("height",e*v),m.attr("viewBox","0 0 "+u+" "+v));c=(new window.XMLSerializer).serializeToString(m.node());c=
q(c);c=c.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,"\x26amp;");c=c.replace(l,"'");p.isIE()&&(c=c.replace(/"/gi,"'"),c=c.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),c=c.replace(/(\\')/gi,'"'));return c}},{"../components/color":615,"../components/drawing":637,"../constants/xmlns_namespaces":725,"../lib":749,d3:169}],889:[function(b,y,F){var q=b("../../lib");y.exports=function(n,p){for(var h=0;h<n.length;h++)n[h].i=h;q.mergeArray(p.text,n,"tx");q.mergeArray(p.hovertext,n,"htx");if(p=p.marker)if(q.mergeArray(p.opacity,
n,"mo",!0),q.mergeArray(p.color,n,"mc"),p=p.line)q.mergeArray(p.color,n,"mlc"),q.mergeArrayCastPositive(p.width,n,"mlw")}},{"../../lib":749}],890:[function(b,y,F){F=b("../scatter/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../plots/template_attributes").texttemplateAttrs,p=b("../../components/colorscale/attributes"),h=b("../../plots/font_attributes"),a=b("./constants");b=b("../../lib/extend").extendFlat;h=h({editType:"calc",arrayOk:!0,colorEditType:"style"});
var f=b({},F.marker.line.width,{dflt:0});f=b({width:f,editType:"calc"},p("marker.line"));p=b({line:f,editType:"calc"},p("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});y.exports={x:F.x,x0:F.x0,dx:F.dx,y:F.y,y0:F.y0,dy:F.dy,text:F.text,texttemplate:n({editType:"plot"},{keys:a.eventDataKeys}),hovertext:F.hovertext,hovertemplate:q({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},
insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:b({},h,{}),insidetextfont:b({},h,{}),outsidetextfont:b({},h,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:b({},F.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},
offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:F.selected.marker.opacity,color:F.selected.marker.color,editType:"style"},textfont:F.selected.textfont,editType:"style"},unselected:{marker:{opacity:F.unselected.marker.opacity,color:F.unselected.marker.color,editType:"style"},
textfont:F.unselected.textfont,editType:"style"},r:F.r,t:F.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/font_attributes":825,"../../plots/template_attributes":875,"../scatter/attributes":1155,"./constants":892}],891:[function(b,y,F){var q=b("../../plots/cartesian/axes"),n=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/calc"),h=b("./arrays_to_calcdata"),
a=b("../scatter/calc_selection");y.exports=function(f,d){var l=q.getFromId(f,d.xaxis||"x"),k=q.getFromId(f,d.yaxis||"y");var c={msUTC:!(!d.base&&0!==d.base)};"h"===d.orientation?(c=l.makeCalcdata(d,"x",c),l=k.makeCalcdata(d,"y")):(c=k.makeCalcdata(d,"y",c),l=l.makeCalcdata(d,"x"));k=Math.min(l.length,c.length);for(var e=Array(k),g=0;g<k;g++)e[g]={p:l[g],s:c[g]},d.ids&&(e[g].id=String(d.ids[g]));n(d,"marker")&&p(f,d,{vals:d.marker.color,containerStr:"marker",cLetter:"c"});n(d,"marker.line")&&p(f,d,
{vals:d.marker.line.color,containerStr:"marker.line",cLetter:"c"});h(e,d);a(e,d);return e}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157,"./arrays_to_calcdata":889}],892:[function(b,y,F){y.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],893:[function(b,y,F){function q(C,x,A,B,t){if(B.length){var G;n(A,B);switch(t.mode){case "overlay":p(x,A,B,t);break;case "group":var H=[];var I=[];for(G=
0;G<B.length;G++){var J=B[G];var L=J[0].trace;void 0===L.offset?I.push(J):H.push(J)}if(I.length){I=new D(I,{sepNegVal:!1,overlapNoMerge:!t.norm});var E=C._fullLayout;C=I.minDiff;G=I.traces;J=G.length;L=I.positions.length!==I.distinctPositions.length;var K=C*(1-t.gap),N=w(E,x._id)+G[0][0].trace.orientation;E=E._alignmentOpts[N]||{};for(N=0;N<J;N++){var O=G[N],Q=O[0].trace,P=Object.keys((E[Q.alignmentgroup]||{}).offsetGroups||{}).length;var T=P?K/P:L?K/J:K;var V=T*(1-(t.groupgap||0));Q=P?((2*Q._offsetIndex+
1-P)*T-V)/2:L?((2*N+1-J)*T-V)/2:-V/2;O=O[0].t;O.barwidth=V;O.poffset=Q;O.bargroupwidth=K;O.bardelta=C}I.binWidth=G[0][0].t.barwidth/100;a(I);f(x,I);d(x,I,L);C=I.traces;for(G=0;G<C.length;G++)if(J=C[G],void 0===J[0].trace.base)for(L=new D([J],{sepNegVal:!0,overlapNoMerge:!0}),K=0;K<J.length;K++)if(E=J[K],E.p!==r&&(N=L.put(E.p,E.b+E.s)))E.b=N;t.norm?(k(I),c(A,I,t)):l(A,I)}H.length&&p(x,A,H,t);break;case "stack":case "relative":H=[];I=[];for(G=0;G<B.length;G++)J=B[G],L=J[0].trace,void 0===L.base?I.push(J):
H.push(J);if(I.length){C=new D(I,{sepNegVal:"relative"===t.mode,overlapNoMerge:!(t.norm||"stack"===t.mode||"relative"===t.mode)});h(x,C,t);G=A._id.charAt(0);J=C.traces;for(N=0;N<J.length;N++)if(L=J[N],K=L[0].trace,"funnel"===K.type)for(V=0;V<L.length;V++)O=L[V],O.s!==r&&C.put(O.p,-.5*O.s);for(N=0;N<J.length;N++){L=J[N];K=L[0].trace;E="funnel"===K.type;Q=[];for(V=0;V<L.length;V++)O=L[V],O.s!==r&&(T=E?O.s:O.s+O.b,P=C.put(O.p,T),T=P+T,O.b=P,O[G]=T,t.norm||(Q.push(T),O.hasB&&Q.push(P)));t.norm||(K._extremes[A._id]=
v.findExtremes(A,Q,{tozero:!0,padded:!0}))}for(G=0;G<I.length;G++)for(J=I[G],L=0;L<J.length;L++)K=J[L],K.s!==r&&K.b+K.s===C.get(K.p,K.s)&&(K._outmost=!0);t.norm&&c(A,C,t)}H.length&&p(x,A,H,t)}e(B,x)}}function n(C,x){var A;for(A=0;A<x.length;A++){var B=x[A];var t=B[0].trace;var G="funnel"===t.type?t._base:t.base,H="h"===t.orientation?t.xcalendar:t.ycalendar,I="category"===C.type||"multicategory"===C.type?function(){return null}:C.d2c;if(m(G)){for(t=0;t<Math.min(G.length,B.length);t++){var J=I(G[t],
0,H);g(J)?(B[t].b=+J,B[t].hasB=1):B[t].b=0}for(;t<B.length;t++)B[t].b=0}else for(J=I(G,0,H),J=(G=g(J))?J:0,t=0;t<B.length;t++)B[t].b=J,G&&(B[t].hasB=1)}}function p(C,x,A,B){for(var t=0;t<A.length;t++){var G=new D([A[t]],{unitMinDiff:B.xCat||B.yCat,sepNegVal:!1,overlapNoMerge:!B.norm});h(C,G,B);B.norm?(k(G),c(x,G,B)):l(x,G)}}function h(C,x,A){var B=x.minDiff,t=x.traces,G=B*(1-A.gap);A=G*(1-(A.groupgap||0));for(var H=-A/2,I=0;I<t.length;I++){var J=t[I][0].t;J.barwidth=A;J.poffset=H;J.bargroupwidth=
G;J.bardelta=B}x.binWidth=t[0][0].t.barwidth/100;a(x);f(C,x);d(C,x)}function a(C){C=C.traces;var x,A;for(x=0;x<C.length;x++){var B=C[x],t=B[0],G=t.trace;t=t.t;var H=G._offset||G.offset,I=t.poffset;if(m(H)){var J=Array.prototype.slice.call(H,0,B.length);for(A=0;A<J.length;A++)g(J[A])||(J[A]=I);for(A=J.length;A<B.length;A++)J.push(I);t.poffset=J}else void 0!==H&&(t.poffset=H);A=G._width||G.width;G=t.barwidth;if(m(A)){var L=Array.prototype.slice.call(A,0,B.length);for(A=0;A<L.length;A++)g(L[A])||(L[A]=
G);for(A=L.length;A<B.length;A++)L.push(G);t.barwidth=L;if(void 0===H){J=[];for(A=0;A<B.length;A++)J.push(I+(G-L[A])/2);t.poffset=J}}else void 0!==A&&(t.barwidth=A,void 0===H&&(t.poffset=I+(G-A)/2))}}function f(C,x){x=x.traces;C=C._id.charAt(0);for(var A=0;A<x.length;A++){var B=x[A],t=B[0].t,G=t.poffset,H=Array.isArray(G);t=t.barwidth;for(var I=Array.isArray(t),J=0;J<B.length;J++){var L=B[J],E=L.w=I?t[J]:t;L[C]=L.p+(H?G[J]:G)+E/2}}}function d(C,x,A){var B=x.traces,t=x.minDiff/2;v.minDtick(C,x.minDiff,
x.distinctPositions[0],A);for(x=0;x<B.length;x++){A=B[x];var G=A[0],H=G.trace,I=[],J;for(J=0;J<A.length;J++){var L=A[J];var E=L.p-t;L=L.p+t;I.push(E,L)}if(H.width||H.offset){E=G.t;G=E.poffset;var K=E.barwidth,N=Array.isArray(G),O=Array.isArray(K);for(J=0;J<A.length;J++){L=A[J];var Q=O?K[J]:K;E=L.p+(N?G[J]:G);L=E+Q;I.push(E,L)}}H._extremes[C._id]=v.findExtremes(C,I,{padded:!1})}}function l(C,x){x=x.traces;for(var A=C._id.charAt(0),B=0;B<x.length;B++){for(var t=x[B],G=t[0].trace,H=[],I=!1,J=0;J<t.length;J++){var L=
t[J],E=L.b,K=E+L.s;L[A]=K;H.push(K);L.hasB&&H.push(E);L.hasB&&L.b||(I=!0)}G._extremes[C._id]=v.findExtremes(C,H,{tozero:I,padded:!0})}}function k(C){for(var x=C.traces,A=0;A<x.length;A++)for(var B=x[A],t=0;t<B.length;t++){var G=B[t];G.s!==r&&C.put(G.p,G.b+G.s)}}function c(C,x,A){function B(ba){return g(C.c2l(ba))&&(ba<J-I||ba>L+I||!g(J))}var t=x.traces,G=C._id.charAt(0),H="fraction"===A.norm?1:100,I=H/1E9,J=C.l2c(C.c2l(0)),L="stack"===A.mode?H:J;for(A=0;A<t.length;A++){for(var E=t[A],K=E[0].trace,
N=[],O=!1,Q=!1,P=0;P<E.length;P++){var T=E[P];if(T.s!==r){var V=Math.abs(H/x.get(T.p,T.s));T.b*=V;T.s*=V;V=T.b;var aa=V+T.s;T[G]=aa;N.push(aa);Q=Q||B(aa);T.hasB&&(N.push(V),Q=Q||B(V));T.hasB&&T.b||(O=!0)}}K._extremes[C._id]=v.findExtremes(C,N,{tozero:O,padded:Q})}}function e(C,x){x=x._id.charAt(0);var A={},B,t,G=Infinity,H=-Infinity;for(B=0;B<C.length;B++){var I=C[B];for(t=0;t<I.length;t++){var J=I[t].p;g(J)&&(G=Math.min(G,J),H=Math.max(H,J))}}var L=1E4/(H-G);H=A.round=function(P){return String(Math.round(L*
(P-G)))};for(B=0;B<C.length;B++){I=C[B];I[0].t.extents=A;J=I[0].t.poffset;var E=Array.isArray(J);for(t=0;t<I.length;t++){var K=I[t],N=K[x]-K.w/2;if(g(N)){var O=K[x]+K.w/2,Q=H(K.p);A[Q]=A[Q]?[Math.min(N,A[Q][0]),Math.max(O,A[Q][1])]:[N,O]}K.p0=K.p+(E?J[t]:J);K.p1=K.p0+K.w;K.s0=K.b;K.s1=K.s0+K.s}}}var g=b("fast-isnumeric"),m=b("../../lib").isArrayOrTypedArray,r=b("../../constants/numerical").BADNUM,u=b("../../registry"),v=b("../../plots/cartesian/axes"),w=b("../../plots/cartesian/axis_ids").getAxisGroup,
D=b("./sieve.js");y.exports={crossTraceCalc:function(C,x){var A=x.xaxis;x=x.yaxis;for(var B=C._fullLayout,t=C._fullData,G=C.calcdata,H=[],I=[],J=0;J<t.length;J++){var L=t[J];if(!0===L.visible&&u.traceIs(L,"bar")&&L.xaxis===A._id&&L.yaxis===x._id&&("h"===L.orientation?H.push(G[J]):I.push(G[J]),L._computePh)){L=C.calcdata[J];for(var E=0;E<L.length;E++)"function"===typeof L[E].ph0&&(L[E].ph0=L[E].ph0()),"function"===typeof L[E].ph1&&(L[E].ph1=L[E].ph1())}}B={xCat:"category"===A.type||"multicategory"===
A.type,yCat:"category"===x.type||"multicategory"===x.type,mode:B.barmode,norm:B.barnorm,gap:B.bargap,groupgap:B.bargroupgap};q(C,A,x,I,B);q(C,x,A,H,B)},setGroupPositions:q}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_ids":800,"../../registry":880,"./sieve.js":903,"fast-isnumeric":241}],894:[function(b,y,F){function q(e,g,m,r){e=g.orientation;e=l(m,g[{v:"x",h:"y"}[e]+"axis"])+e;var u=m._alignmentOpts||{};m=r("alignmentgroup");var v=
u[e];v||(v=u[e]={});(e=v[m])?e.traces.push(g):e=v[m]={traces:[g],alignmentIndex:Object.keys(v).length,offsetGroups:{}};r=r("offsetgroup");e=e.offsetGroups;m=e[r];r&&(m||(m=e[r]={offsetIndex:Object.keys(e).length}),g._offsetIndex=m.offsetIndex)}function n(e,g,m,r,u,v){v=v||{};g=!1!==v.moduleHasSelected;var w=!1!==v.moduleHasUnselected,D=!1!==v.moduleHasConstrain,C=!1!==v.moduleHasCliponaxis,x=!1!==v.moduleHasTextangle,A=!1!==v.moduleHasInsideanchor,B=!!v.hasPathbar,t=Array.isArray(u)||"auto"===u;v=
t||"inside"===u;u=t||"outside"===u;if(v||u)m=c(r,"textfont",m.font),t=p.extendFlat({},m),(e=!(e.textfont&&e.textfont.color))&&delete t.color,c(r,"insidetextfont",t),B&&(B=p.extendFlat({},m),e&&delete B.color,c(r,"pathbar.textfont",B)),u&&c(r,"outsidetextfont",m),g&&r("selected.textfont.color"),w&&r("unselected.textfont.color"),D&&r("constraintext"),C&&r("cliponaxis"),x&&r("textangle"),r("texttemplate");v&&A&&r("insidetextanchor")}var p=b("../../lib"),h=b("../../components/color"),a=b("../../registry"),
f=b("../scatter/xy_defaults"),d=b("./style_defaults"),l=b("../../plots/cartesian/axis_ids").getAxisGroup,k=b("./attributes"),c=p.coerceFont;y.exports={supplyDefaults:function(e,g,m,r){function u(w,D){return p.coerce(e,g,k,w,D)}if(f(e,g,r,u)){u("orientation",g.x&&!g.y?"h":"v");u("base");u("offset");u("width");u("text");u("hovertext");u("hovertemplate");var v=u("textposition");n(e,g,r,u,v,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,
moduleHasInsideanchor:!0});d(e,g,u,m,r);m=(g.marker.line||{}).color;r=a.getComponentMethod("errorbars","supplyDefaults");r(e,g,m||h.defaultLine,{axis:"y"});r(e,g,m||h.defaultLine,{axis:"x",inherit:"y"});p.coerceSelectionMarkerOpacity(g,u)}else g.visible=!1},crossTraceDefaults:function(e,g){function m(w){return p.coerce(u._input,u,k,w)}if("group"===g.barmode)for(var r=0;r<e.length;r++){var u=e[r];if("bar"===u.type){var v=u._input;q(v,u,g,m)}}},handleGroupingDefaults:q,handleText:n}},{"../../components/color":615,
"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../registry":880,"../scatter/xy_defaults":1181,"./attributes":890,"./style_defaults":905}],895:[function(b,y,F){y.exports=function(q,n,p){q.x="xVal"in n?n.xVal:n.x;q.y="yVal"in n?n.yVal:n.y;n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);"h"===p.orientation?(q.label=q.y,q.value=q.x):(q.label=q.x,q.value=q.y);return q}},{}],896:[function(b,y,F){var q=b("fast-isnumeric"),n=b("tinycolor2"),p=b("../../lib").isArrayOrTypedArray;F.coerceString=function(h,
a,f){if("string"===typeof a){if(a||!h.noBlank)return a}else if(("number"===typeof a||!0===a)&&!h.strict)return String(a);return void 0!==f?f:h.dflt};F.coerceNumber=function(h,a,f){if(q(a)){a=+a;var d=h.min,l=h.max;if(!(void 0!==d&&a<d||void 0!==l&&a>l))return a}return void 0!==f?f:h.dflt};F.coerceColor=function(h,a,f){return n(a).isValid()?a:void 0!==f?f:h.dflt};F.coerceEnumerated=function(h,a,f){h.coerceNumber&&(a=+a);return-1!==h.values.indexOf(a)?a:void 0!==f?f:h.dflt};F.getValue=function(h,a){var f;
Array.isArray(h)?a<h.length&&(f=h[a]):f=h;return f};F.getLineWidth=function(h,a){return 0<a.mlw?a.mlw:p(h.marker.line.width)?0:h.marker.line.width}},{"../../lib":749,"fast-isnumeric":241,tinycolor2:548}],897:[function(b,y,F){function q(c,e,g,m){function r(P){return P[E]-P.w/2}function u(P){return P[E]+P.w/2}function v(P,T){return p.inbox(P-J,T-J,G+Math.min(1,Math.abs(T-P)/Q)-1)}function w(P){return v(H(P),I(P))}function D(P){var T=L,V=P.b,aa=P[K];t&&(P=Math.abs(P.rawS)||0,0<T?aa+=P:0>T&&(aa-=P));
return p.inbox(V-T,aa-T,G+(aa-T)/(aa-V)-1)}var C=c.cd,x=C[0].trace,A=C[0].t,B="closest"===m,t="waterfall"===x.type,G=c.maxHoverDistance,H=B?r:function(P){return Math.min(r(P),P.p-A.bardelta/2)},I=B?u:function(P){return Math.max(u(P),P.p+A.bardelta/2)};if("h"===x.orientation){var J=g;var L=e;var E="y";var K="x";var N=D;var O=w}else J=e,L=g,E="x",K="y",O=D,N=w;e=c[E+"a"];g=c[K+"a"];var Q=Math.abs(e.r2c(e.range[1])-e.r2c(e.range[0]));m=p.getDistanceFunction(m,N,O,function(P){return(N(P)+O(P))/2});p.getClosest(C,
m,c);if(!1!==c.index&&C[c.index].p!==k)return B||(H=function(P){return Math.min(r(P),P.p-A.bargroupwidth/2)},I=function(P){return Math.max(u(P),P.p+A.bargroupwidth/2)}),C=C[c.index],m=x.base?C.b+C.s:C.s,c[K+"0"]=c[K+"1"]=g.c2p(C[K],!0),c[K+"LabelVal"]=m,m=A.extents[A.extents.round(C.p)],c[E+"0"]=e.c2p(B?H(C):m[0],!0),c[E+"1"]=e.c2p(B?I(C):m[1],!0),c[E+"LabelVal"]=C.p,c.labelLabel=l(e,c[E+"LabelVal"]),c.valueLabel=l(g,c[K+"LabelVal"]),c.spikeDistance=(D(C)+function(P){return v(r(P),u(P))}(C))/2-G,
c[E+"Spike"]=e.c2p(C.p,!0),f(C,x,c),c.hovertemplate=x.hovertemplate,c}function n(c,e){var g=e.mcc||c.marker.color,m=e.mlcc||c.marker.line.color;c=d(c,e);if(a.opacity(g))return g;if(a.opacity(m)&&c)return m}var p=b("../../components/fx"),h=b("../../registry"),a=b("../../components/color"),f=b("../../lib").fillText,d=b("./helpers").getLineWidth,l=b("../../plots/cartesian/axes").hoverLabelText,k=b("../../constants/numerical").BADNUM;y.exports={hoverPoints:function(c,e,g,m){if(c=q(c,e,g,m))return g=c.cd,
e=g[0].trace,g=g[c.index],c.color=n(e,g),h.getComponentMethod("errorbars","hoverInfo")(g,e,c),[c]},hoverOnBars:q,getTraceColor:n}},{"../../components/color":615,"../../components/fx":655,"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./helpers":896}],898:[function(b,y,F){y.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,
supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,colorbar:b("../scatter/marker_colorbar"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"bar",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" "),
animatable:!0,meta:{}}},{"../../plots/cartesian":810,"../scatter/marker_colorbar":1173,"./arrays_to_calcdata":889,"./attributes":890,"./calc":891,"./cross_trace_calc":893,"./defaults":894,"./event_data":895,"./hover":897,"./layout_attributes":899,"./layout_defaults":900,"./plot":901,"./select":902,"./style":904}],899:[function(b,y,F){y.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction",
"percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],900:[function(b,y,F){var q=b("../../registry"),n=b("../../plots/cartesian/axes"),p=b("../../lib"),h=b("./layout_attributes");y.exports=function(a,f,d){for(var l=!1,k=!1,c=!1,e={},g=p.coerce(a,f,h,"barmode",void 0),m=0;m<d.length;m++){var r=d[m];if(q.traceIs(r,"bar")&&r.visible){l=!0;if("group"===g){var u=r.xaxis+r.yaxis;e[u]&&(c=!0);e[u]=
!0}r.visible&&"histogram"===r.type&&"category"!==n.getFromId({_fullLayout:f},r["v"===r.orientation?"xaxis":"yaxis"]).type&&(k=!0)}}l?("overlay"!==g&&p.coerce(a,f,h,"barnorm",void 0),p.coerce(a,f,h,"bargap",k&&!c?0:.2),p.coerce(a,f,h,"bargroupgap",void 0)):delete f.barmode}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./layout_attributes":899}],901:[function(b,y,F){function q(E){return E.id}function n(E,K,N,O){var Q=[],P=[],T=O?K:N;K=O?N:K;Q[0]=T.c2p(E.s0,!0);P[0]=K.c2p(E.p0,
!0);Q[1]=T.c2p(E.s1,!0);P[1]=K.c2p(E.p1,!0);return O?[Q,P]:[P,Q]}function p(E,K,N,O){if(!K.uniformtext.mode&&N&&0<N.duration){var Q;O&&(Q=O());return E.transition().duration(N.duration).ease(N.easing).each("end",function(){Q&&Q()}).each("interrupt",function(){Q&&Q()})}return E}function h(E,K,N,O,Q,P,T,V,aa,ba,Y){function ea(ya,Fa,Ha){return r.ensureSingle(ya,"text").text(Fa).attr({"class":"bartext bartext-"+oa,"text-anchor":"middle","data-notex":1}).call(w.font,Ha).call(u.convertToTspans,E)}var da=
K.xaxis,ca=K.yaxis;K=E._fullLayout;var la=O[0].trace,pa="h"===la.orientation,qa=l(K,O,Q,da,ca);var oa=k(la,Q);var ka=O[Q],ra=!("stack"===ba.mode||"relative"===ba.mode)||ka._outmost;if(qa&&"none"!==oa&&(!ka.isBlank&&P!==T&&V!==aa||"auto"!==oa&&"inside"!==oa)){var ha=K.font;O=B.getBarColor(O[Q],la);O=B.getInsideTextFont(la,Q,ha,O);Q=B.getOutsideTextFont(la,Q,ha);ha=N.datum();pa?"log"===da.type&&0>=ha.s0&&(P=da.range[0]<da.range[1]?0:da._length):"log"===ca.type&&0>=ha.s0&&(V=ca.range[0]<ca.range[1]?
ca._length:0);da=Math.abs(T-P)-2*L;ca=Math.abs(aa-V)-2*L;"outside"===oa&&(ra||ka.hasB||(oa="inside"));if("auto"===oa)if(ra){oa="inside";var ma=r.ensureUniformFontSize(E,O);var wa=ea(N,qa,ma);var na=w.bBox(wa.node());ra=na.width;ha=na.height;0<ra&&0<ha&&(ra<=da&&ha<=ca||ra<=ca&&ha<=da||(pa?da>=ca/ha*ra:ca>=da/ra*ha))?oa="inside":(oa="outside",wa.remove(),wa=null)}else oa="inside";if(!wa&&(ma=r.ensureUniformFontSize(E,"outside"===oa?Q:O),wa=ea(N,qa,ma),N=wa.attr("transform"),wa.attr("transform",""),
na=w.bBox(wa.node()),ra=na.width,ha=na.height,wa.attr("transform",N),0>=ra||0>=ha)){wa.remove();return}N=la.textangle;"outside"===oa?(qa="both"===la.constraintext||"outside"===la.constraintext,P=d(P,T,V,aa,na,{isHorizontal:pa,constrained:qa,angle:N})):(qa="both"===la.constraintext||"inside"===la.constraintext,P=f(P,T,V,aa,na,{isHorizontal:pa,constrained:qa,angle:N,anchor:la.insidetextanchor}));P.fontSize=ma.size;x(la.type,P,K);ka.transform=P;p(wa,K,ba,Y).attr("transform",r.getTextTransform(P))}else N.select("text").remove()}
function a(E,K){var N=Math.PI/180*K;K=Math.abs(Math.sin(N));N=Math.abs(Math.cos(N));return{x:E.width*N+E.height*K,y:E.width*K+E.height*N}}function f(E,K,N,O,Q,P){var T=!!P.isHorizontal,V=!!P.constrained,aa=P.angle||0,ba=P.anchor||"end",Y="end"===ba;ba="start"===ba;var ea=((P.leftToRight||0)+1)/2,da=1-ea,ca=Q.width,la=Q.height,pa=Math.abs(K-E),qa=Math.abs(O-N);P=pa>2*L&&qa>2*L?L:0;pa-=2*P;qa-=2*P;var oa="auto"===aa?0:aa;"auto"!==aa||ca<=pa&&la<=qa||!(ca>pa||la>qa)||(ca>qa||la>pa)&&ca<la===pa<qa||(oa+=
90);ca=a(Q,oa);aa=1;V&&(aa=Math.min(1,pa/ca.x,qa/ca.y));V=Q.left*da+Q.right*ea;Q=(Q.top+Q.bottom)/2;ea=(E+L)*da+(K-L)*ea;da=(N+O)/2;qa=pa=0;if(ba||Y)Y=(T?ca.x:ca.y)/2,ca=T?E<K?1:-1:N<O?1:-1,T?ba?(ea=E+ca*P,pa=-ca*Y):(ea=K-ca*P,pa=ca*Y):ba?(da=N+ca*P,qa=-ca*Y):(da=O-ca*P,qa=ca*Y);return{textX:V,textY:Q,targetX:ea,targetY:da,anchorX:pa,anchorY:qa,scale:aa,rotate:oa}}function d(E,K,N,O,Q,P){var T=!!P.isHorizontal,V=!!P.constrained,aa=P.angle||0,ba=Q.width,Y=Q.height,ea=Math.abs(K-E),da=Math.abs(O-N);
P=T?da>2*L?L:0:ea>2*L?L:0;var ca=1;V&&(ca=T?Math.min(1,da/Y):Math.min(1,ea/ba));V="auto"===aa?0:aa;aa=a(Q,V);aa=(T?aa.x:aa.y)/2;ba=(Q.left+Q.right)/2;Q=(Q.top+Q.bottom)/2;Y=(E+K)/2;ea=(N+O)/2;var la=da=0;E=T?K<E?1:-1:N<O?1:-1;T?(Y=K-E*P,da=E*aa):(ea=O+E*P,la=-E*aa);return{textX:ba,textY:Q,targetX:Y,targetY:ea,anchorX:da,anchorY:la,scale:ca,rotate:V}}function l(E,K,N,O,Q){var P=K[0].trace;E=P.texttemplate?c(E,K,N,O,Q):P.textinfo?e(K,N,O,Q):t.getValue(P.text,N);return t.coerceString(H,E)}function k(E,
K){E=t.getValue(E.textposition,K);return t.coerceEnumerated(I,E)}function c(E,K,N,O,Q){function P(la){return C(ca,+la,!0).text}var T=K[0].trace,V=r.castOption(T,N,"texttemplate");if(!V)return"";var aa="waterfall"===T.type,ba="funnel"===T.type;if("h"===T.orientation){var Y="y";var ea=Q;var da="x";var ca=O}else Y="x",ea=O,da="y",ca=Q;N=K[N];K={};K.label=N.p;K.labelLabel=K[Y+"Label"]=C(ea,N.p,!0).text;Y=r.castOption(T,N.i,"text");if(0===Y||Y)K.text=Y;K.value=N.s;K.valueLabel=K[da+"Label"]=P(N.s);da=
{};J(da,T,N.i);aa&&(K.delta=+N.rawS||N.s,K.deltaLabel=P(K.delta),K.final=N.v,K.finalLabel=P(K.final),K.initial=K.final-K.delta,K.initialLabel=P(K.initial));ba&&(K.value=N.s,K.valueLabel=P(K.value),K.percentInitial=N.begR,K.percentInitialLabel=r.formatPercent(N.begR),K.percentPrevious=N.difR,K.percentPreviousLabel=r.formatPercent(N.difR),K.percentTotal=N.sumR,K.percenTotalLabel=r.formatPercent(N.sumR));if(aa=r.castOption(T,N.i,"customdata"))K.customdata=aa;return r.texttemplateString(V,K,E._d3locale,
da,K,T._meta||{})}function e(E,K,N,O){function Q(ca){return C(T?N:O,+ca,!0).text}var P=E[0].trace,T="h"===P.orientation,V="waterfall"===P.type,aa="funnel"===P.type,ba=E[K],Y=P.textinfo.split("+"),ea=[],da=function(ca){return-1!==Y.indexOf(ca)};da("label")&&ea.push(C(T?O:N,E[K].p,!0).text);da("text")&&(E=r.castOption(P,ba.i,"text"),(0===E||E)&&ea.push(E));V&&(V=+ba.rawS||ba.s,E=ba.v,K=E-V,da("initial")&&ea.push(Q(K)),da("delta")&&ea.push(Q(V)),da("final")&&ea.push(Q(E)));aa&&(da("value")&&ea.push(Q(ba.s)),
aa=0,da("percent initial")&&aa++,da("percent previous")&&aa++,da("percent total")&&aa++,aa=1<aa,da("percent initial")&&(E=r.formatPercent(ba.begR),aa&&(E+=" of initial"),ea.push(E)),da("percent previous")&&(E=r.formatPercent(ba.difR),aa&&(E+=" of previous"),ea.push(E)),da("percent total")&&(E=r.formatPercent(ba.sumR),aa&&(E+=" of total"),ea.push(E)));return ea.join("\x3cbr\x3e")}var g=b("d3"),m=b("fast-isnumeric"),r=b("../../lib"),u=b("../../lib/svg_text_utils"),v=b("../../components/color"),w=b("../../components/drawing"),
D=b("../../registry"),C=b("../../plots/cartesian/axes").tickText;F=b("./uniform_text");var x=F.recordMinTextSize,A=F.clearMinTextSize,B=b("./style"),t=b("./helpers");F=b("./constants");var G=b("./attributes"),H=G.text,I=G.textposition,J=b("../../components/fx/helpers").appendArrayPointValue,L=F.TEXTPAD;y.exports={plot:function(E,K,N,O,Q,P){var T=K.xaxis,V=K.yaxis,aa=E._fullLayout;Q||(Q={mode:aa.barmode,norm:aa.barmode,gap:aa.bargap,groupgap:aa.bargroupgap},A("bar",aa));N=r.makeTraceGroups(O,N,"trace bars").each(function(ba){var Y=
g.select(this),ea=ba[0].trace,da="funnel"===ea.type,ca="bar"===ea.type||da,la=0;"waterfall"===ea.type&&ea.connector.visible&&"between"===ea.connector.mode&&(la=ea.connector.line.width/2);var pa="h"===ea.orientation,qa=Q&&0<Q.duration;da=r.ensureSingle(Y,"g","points");var oa=ea.ids?q:void 0;da=da.selectAll("g.point").data(r.identity,oa);da.enter().append("g").classed("point",!0);da.exit().remove();da.each(function(ka,ra){function ha(ib){var Pa=g.round(ob/2%1,2);return 0===Q.gap&&0===Q.groupgap?g.round(Math.round(ib)-
Pa,2):ib}function ma(ib,Pa,sb){return sb&&ib===Pa?ib:2<=Math.abs(ib-Pa)?ha(ib):ib>Pa?Math.ceil(ib):Math.floor(ib)}var wa=g.select(this),na=n(ka,T,V,pa),ya=na[0][0],Fa=na[0][1],Ha=na[1][0];na=na[1][1];var eb=0===(pa?Fa-ya:na-Ha);eb&&ca&&t.getLineWidth(ea,ka)&&(eb=!1);eb||(eb=!m(ya)||!m(Fa)||!m(Ha)||!m(na));(ka.isBlank=eb)&&(pa?Fa=ya:na=Ha);la&&!eb&&(pa?(ya-=(ya<Fa?1:-1)*la,Fa+=(ya<Fa?1:-1)*la):(Ha-=(Ha<na?1:-1)*la,na+=(Ha<na?1:-1)*la));if("waterfall"===ea.type){if(!eb){var hb=ea[ka.dir].marker;var ob=
hb.line.width;hb=hb.color}}else ob=t.getLineWidth(ea,ka),hb=ka.mc||ea.marker.color;E._context.staticPlot||(hb=1>v.opacity(hb)||.01<ob?ha:ma,ya=hb(ya,Fa,pa),Fa=hb(Fa,ya,pa),Ha=hb(Ha,na,!pa),na=hb(na,Ha,!pa));hb=p(r.ensureSingle(wa,"path"),aa,Q,P);hb.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Fa-ya)*(na-Ha))?"M0,0Z":"M"+ya+","+Ha+"V"+na+"H"+Fa+"V"+Ha+"Z").call(w.setClipUrl,K.layerClipId,E);!aa.uniformtext.mode&&qa&&(eb=w.makePointStyleFns(ea),w.singlePointStyle(ka,hb,ea,eb,E));h(E,
K,wa,ba,ra,ya,Fa,Ha,na,Q,P);K.layerClipId&&w.hideOutsideRangePoint(ka,wa.select("text"),T,V,ea.xcalendar,ea.ycalendar)});w.setClipUrl(Y,!1===ea.cliponaxis?null:K.layerClipId,E)});D.getComponentMethod("errorbars","plot")(E,N,K,Q)},toMoveInsideBar:f}},{"../../components/color":615,"../../components/drawing":637,"../../components/fx/helpers":651,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../registry":880,"./attributes":890,"./constants":892,"./helpers":896,"./style":904,
"./uniform_text":906,d3:169,"fast-isnumeric":241}],902:[function(b,y,F){y.exports=function(q,n){var p=q.cd,h=q.xaxis,a=q.yaxis,f=p[0].trace,d="funnel"===f.type;f="h"===f.orientation;var l=[],k;if(!1===n)for(k=0;k<p.length;k++)p[k].selected=0;else for(k=0;k<p.length;k++){var c=p[k];if("ct"in c)var e=c.ct;else{var g=c,m=h,r=a;e=f;var u=d,v=m.c2p(e?g.s0:g.p0,!0);m=m.c2p(e?g.s1:g.p1,!0);var w=r.c2p(e?g.p0:g.s0,!0);g=r.c2p(e?g.p1:g.s1,!0);e=u?[(v+m)/2,(w+g)/2]:e?[m,(w+g)/2]:[(v+m)/2,g]}n.contains(e,!1,
k,q)?(l.push({pointNumber:k,x:h.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return l}},{}],903:[function(b,y,F){function q(h,a){this.traces=h;this.sepNegVal=a.sepNegVal;this.overlapNoMerge=a.overlapNoMerge;for(var f=Infinity,d=[],l=0;l<h.length;l++){for(var k=h[l],c=0;c<k.length;c++){var e=k[c];e.p!==p&&d.push(e.p)}k[0]&&k[0].width1&&(f=Math.min(k[0].width1,f))}this.positions=d;h=n(d,{unitMinDiff:a.unitMinDiff});this.distinctPositions=h.vals;this.binWidth=this.minDiff=1===h.vals.length&&Infinity!==
f?f:Math.min(h.minDiff,f);this.bins={}}y.exports=q;var n=b("../../lib").distinctVals,p=b("../../constants/numerical").BADNUM;q.prototype.put=function(h,a){h=this.getLabel(h,a);var f=this.bins[h]||0;this.bins[h]=f+a;return f};q.prototype.get=function(h,a){h=this.getLabel(h,a);return this.bins[h]||0};q.prototype.getLabel=function(h,a){return(0>a&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?h:Math.round(h/this.binWidth))}},{"../../constants/numerical":724,"../../lib":749}],904:[function(b,y,F){function q(D,
C,x){D.selectAll("text").each(function(A){var B=l.select(this);A=e.ensureUniformFontSize(x,p(B,A,C,x));c.font(B,A)})}function n(D,C,x){D.each(function(A){var B=l.select(this);if(A.selected){A=e.ensureUniformFontSize(x,p(B,A,C,x));var t=C.selected.textfont&&C.selected.textfont.color;t&&(A.color=t);c.font(B,A)}else c.selectedTextStyle(B,C)})}function p(D,C,x,A){A=A._fullLayout.font;var B=x.textfont;D.classed("bartext-inside")?(D=d(C,x),B=h(x,C.i,A,D)):D.classed("bartext-outside")&&(B=a(x,C.i,A));return B}
function h(D,C,x,A){x=f(r,D.textfont,C,x);if(void 0===D._input.textfont||void 0===D._input.textfont.color||Array.isArray(D.textfont.color)&&void 0===D.textfont.color[C])x={color:k.contrast(A),family:x.family,size:x.size};return f(u,D.insidetextfont,C,x)}function a(D,C,x){x=f(r,D.textfont,C,x);return f(v,D.outsidetextfont,C,x)}function f(D,C,x,A){C=C||{};var B=w.getValue(C.family,x),t=w.getValue(C.size,x);C=w.getValue(C.color,x);return{family:w.coerceString(D.family,B,A.family),size:w.coerceNumber(D.size,
t,A.size),color:w.coerceColor(D.color,C,A.color)}}function d(D,C){return"waterfall"===C.type?C[D.dir].marker.color:D.mc||C.marker.color}var l=b("d3"),k=b("../../components/color"),c=b("../../components/drawing"),e=b("../../lib"),g=b("../../registry"),m=b("./uniform_text").resizeText;F=b("./attributes");var r=F.textfont,u=F.insidetextfont,v=F.outsidetextfont,w=b("./helpers");y.exports={style:function(D){var C=l.select(D).selectAll("g.barlayer").selectAll("g.trace");m(D,C,"bar");var x=C.size(),A=D._fullLayout;
C.style("opacity",function(B){return B[0].trace.opacity}).each(function(B){("stack"===A.barmode&&1<x||0===A.bargap&&0===A.bargroupgap&&!B[0].trace.marker.line.width)&&l.select(this).attr("shape-rendering","crispEdges")});C.selectAll("g.points").each(function(B){var t=l.select(this);B=B[0].trace;c.pointStyle(t.selectAll("path"),B,D);q(t,B,D)});g.getComponentMethod("errorbars","style")(C)},styleTextPoints:q,styleOnSelect:function(D,C,x){C=C[0].trace;C.selectedpoints?(c.selectedPointStyle(x.selectAll("path"),
C),n(x.selectAll("text"),C,D)):(c.pointStyle(x.selectAll("path"),C,D),q(x,C,D),g.getComponentMethod("errorbars","style")(x))},getInsideTextFont:h,getOutsideTextFont:a,getBarColor:d,resizeText:m}},{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../registry":880,"./attributes":890,"./helpers":896,"./uniform_text":906,d3:169}],905:[function(b,y,F){var q=b("../../components/color"),n=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/defaults");
y.exports=function(h,a,f,d,l){f("marker.color",d);n(h,"marker")&&p(h,a,l,f,{prefix:"marker.",cLetter:"c"});f("marker.line.color",q.defaultLine);n(h,"marker.line")&&p(h,a,l,f,{prefix:"marker.line.",cLetter:"c"});f("marker.line.width");f("marker.opacity");f("selected.marker.color");f("unselected.marker.color")}},{"../../components/color":615,"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626}],906:[function(b,y,F){var q=b("d3"),n=b("../../lib");y.exports={recordMinTextSize:function(p,
h,a){if(a.uniformtext.mode){p="_"+p+"Text_minsize";var f=a.uniformtext.minsize,d=h.scale*h.fontSize;h.hide=d<f;a[p]=a[p]||Infinity;h.hide||(a[p]=Math.min(a[p],Math.max(d,f)))}},clearMinTextSize:function(p,h){h["_"+p+"Text_minsize"]=void 0},resizeText:function(p,h,a){p=p._fullLayout;var f=p["_"+a+"Text_minsize"];if(f){var d="hide"===p.uniformtext.mode;switch(a){case "funnelarea":case "pie":case "sunburst":a="g.slice";break;case "treemap":a="g.slice, g.pathbar";break;default:a="g.points \x3e g.point"}h.selectAll(a).each(function(l){if(l=
l.transform)l.scale=d&&l.hide?0:f/l.fontSize,q.select(this).select("text").attr("transform",n.getTextTransform(l))})}}}},{"../../lib":749,d3:169}],907:[function(b,y,F){F=b("../../plots/template_attributes").hovertemplateAttrs;var q=b("../../lib/extend").extendFlat,n=b("../scatterpolar/attributes");b=b("../bar/attributes");y.exports={r:n.r,theta:n.theta,r0:n.r0,dr:n.dr,theta0:n.theta0,dtheta:n.dtheta,thetaunit:n.thetaunit,base:q({},b.base,{}),offset:q({},b.offset,{}),width:q({},b.width,{}),text:q({},
b.text,{}),hovertext:q({},b.hovertext,{}),marker:b.marker,hoverinfo:n.hoverinfo,hovertemplate:F(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":739,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatterpolar/attributes":1228}],908:[function(b,y,F){var q=b("../../components/colorscale/helpers").hasColorscale,n=b("../../components/colorscale/calc"),p=b("../bar/arrays_to_calcdata"),h=b("../bar/cross_trace_calc").setGroupPositions,a=b("../scatter/calc_selection"),
f=b("../../registry").traceIs,d=b("../../lib").extendFlat;y.exports={calc:function(l,k){function c(w){var D=k[w];void 0!==D&&(k["_"+w]=Array.isArray(D)?m.makeCalcdata(k,w):m.d2c(D,k.thetaunit))}var e=l._fullLayout,g=k.subplot,m=e[g].angularaxis;e=e[g].radialaxis.makeCalcdata(k,"r");g=m.makeCalcdata(k,"theta");for(var r=k._length,u=Array(r),v=0;v<r;v++)u[v]={p:g[v],s:e[v]};"linear"===m.type&&(c("width"),c("offset"));q(k,"marker")&&n(l,k,{vals:k.marker.color,containerStr:"marker",cLetter:"c"});q(k,
"marker.line")&&n(l,k,{vals:k.marker.line.color,containerStr:"marker.line",cLetter:"c"});p(u,k);a(u,k);return u},crossTraceCalc:function(l,k,c){for(var e=l.calcdata,g=[],m=0;m<e.length;m++){var r=e[m],u=r[0].trace;!0===u.visible&&f(u,"bar")&&u.subplot===c&&g.push(r)}c=d({},k.radialaxis,{_id:"x"});h(l,k.angularaxis,c,g,{mode:k.barmode,norm:k.barnorm,gap:k.bargap,groupgap:k.bargroupgap})}}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../lib":749,"../../registry":880,
"../bar/arrays_to_calcdata":889,"../bar/cross_trace_calc":893,"../scatter/calc_selection":1157}],909:[function(b,y,F){var q=b("../../lib"),n=b("../scatterpolar/defaults").handleRThetaDefaults,p=b("../bar/style_defaults"),h=b("./attributes");y.exports=function(a,f,d,l){function k(c,e){return q.coerce(a,f,h,c,e)}n(a,f,l,k)?(k("thetaunit"),k("base"),k("offset"),k("width"),k("text"),k("hovertext"),k("hovertemplate"),p(a,f,k,d,l),q.coerceSelectionMarkerOpacity(f,k)):f.visible=!1}},{"../../lib":749,"../bar/style_defaults":905,
"../scatterpolar/defaults":1230,"./attributes":907}],910:[function(b,y,F){var q=b("../../components/fx"),n=b("../../lib"),p=b("../bar/hover").getTraceColor,h=n.fillText,a=b("../scatterpolar/hover").makeHoverPointText,f=b("../../plots/polar/helpers").isPtInsidePolygon;y.exports=function(d,l,k){var c=d.cd,e=c[0].trace,g=d.subplot,m=g.radialAxis,r=g.vangles,u=r?f:n.isPtInsideSector,v=d.maxHoverDistance,w=g.angularAxis._period||2*Math.PI,D=Math.abs(m.g2p(Math.sqrt(l*l+k*k))),C=Math.atan2(k,l);m.range[0]>
m.range[1]&&(C+=Math.PI);q.getClosest(c,function(x){return u(D,C,[x.rp0,x.rp1],[x.thetag0,x.thetag1],r)?v+Math.min(1,Math.abs(x.thetag1-x.thetag0)/w)-1+(x.rp1-D)/(x.rp1-x.rp0)-1:Infinity},d);if(!1!==d.index)return l=c[d.index],d.x0=d.x1=l.ct[0],d.y0=d.y1=l.ct[1],k=n.extendFlat({},l,{r:l.s,theta:l.p}),h(l,e,d),a(k,e,g,d),d.hovertemplate=e.hovertemplate,d.color=p(e,l),d.xLabelVal=d.yLabelVal=void 0,0>l.s&&(d.idealAlign="left"),[d]}},{"../../components/fx":655,"../../lib":749,"../../plots/polar/helpers":862,
"../bar/hover":897,"../scatterpolar/hover":1232}],911:[function(b,y,F){y.exports={moduleType:"trace",name:"barpolar",basePlotModule:b("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("../scatterpolar/format_labels"),
style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../bar/select"),meta:{}}},{"../../plots/polar":863,"../bar/select":902,"../bar/style":904,"../scatter/marker_colorbar":1173,"../scatterpolar/format_labels":1231,"./attributes":907,"./calc":908,"./defaults":909,"./hover":910,"./layout_attributes":912,"./layout_defaults":913,"./plot":914}],912:[function(b,y,F){y.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",
editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],913:[function(b,y,F){var q=b("../../lib"),n=b("./layout_attributes");y.exports=function(p,h,a){for(var f={},d,l=0;l<a.length;l++)d=a[l],"barpolar"===d.type&&!0===d.visible&&(d=d.subplot,f[d]||(q.coerce(p[d]||{},h[d],n,"barmode",void 0),q.coerce(p[d]||{},h[d],n,"bargap",void 0),f[d]=1))}},{"../../lib":749,"./layout_attributes":912}],914:[function(b,y,F){function q(d){var l=d.cxx,k=d.cyy;return d.vangles?function(c,
e,g,m){if(0<h.angleDelta(g,m)){var r=g;g=m}else r=m;m=f.findEnclosingVertexAngles(r,d.vangles)[0];var u=f.findEnclosingVertexAngles(g,d.vangles)[1];return f.pathPolygonAnnulus(c,e,r,g,[m,(r+g)/2,u],l,k)}:function(c,e,g,m){return h.pathAnnulus(c,e,g,m,l,k)}}var n=b("d3"),p=b("fast-isnumeric"),h=b("../../lib"),a=b("../../components/drawing"),f=b("../../plots/polar/helpers");y.exports=function(d,l,k){var c=l.xaxis,e=l.yaxis,g=l.radialAxis,m=l.angularAxis,r=q(l),u=l.layers.frontplot.select("g.barlayer");
h.makeTraceGroups(u,k,"trace bars").each(function(){var v=n.select(this),w=h.ensureSingle(v,"g","points").selectAll("g.point").data(h.identity);w.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0);w.exit().remove();w.each(function(D){var C=n.select(this),x=D.rp0=g.c2p(D.s0),A=D.rp1=g.c2p(D.s1),B=D.thetag0=m.c2g(D.p0),t=D.thetag1=m.c2g(D.p1);if(p(x)&&p(A)&&p(B)&&p(t)&&x!==A&&B!==t){var G=g.c2g(D.s1),H=(B+t)/2;D.ct=[c.c2p(G*Math.cos(H)),
e.c2p(G*Math.sin(H))];D=r(x,A,B,t)}else D="M0,0Z";h.ensureSingle(C,"path").attr("d",D)});a.setClipUrl(v,l._hasClipOnAxisFalse?l.clipIds.forTraces:null,d)})}},{"../../components/drawing":637,"../../lib":749,"../../plots/polar/helpers":862,d3:169,"fast-isnumeric":241}],915:[function(b,y,F){F=b("../scatter/attributes");var q=b("../bar/attributes"),n=b("../../components/color/attributes"),p=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../lib/extend").extendFlat;var h=F.marker,a=h.line;
y.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},
lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,
"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:b({},h.symbol,{arrayOk:!1,editType:"plot"}),opacity:b({},
h.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:b({},h.size,{arrayOk:!1,editType:"calc"}),color:b({},h.color,{arrayOk:!1,editType:"style"}),line:{color:b({},a.color,{arrayOk:!1,dflt:n.defaultLine,editType:"style"}),width:b({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,
editType:"style"},editType:"plot"},fillcolor:F.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:q.offsetgroup,alignmentgroup:q.alignmentgroup,selected:{marker:F.selected.marker,editType:"style"},unselected:{marker:F.unselected.marker,editType:"style"},text:b({},F.text,{}),hovertext:b({},F.hovertext,{}),hovertemplate:p({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":614,"../../lib/extend":739,
"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155}],916:[function(b,y,F){function q(v,w,D,C){var x=w+"0"in v;if(w in v||x&&"d"+w in v)return D.makeCalcdata(v,w);C=x?v[w+"0"]:"name"in v&&("category"===D.type||c(v.name)&&-1!==["linear","log"].indexOf(D.type)||g.isDateTime(v.name)&&"date"===D.type)?v.name:C;w="multicategory"===D.type?D.r2c_just_indices(C):D.d2c(C,0,v[w+"calendar"]);v=v._length;D=Array(v);for(C=0;C<v;C++)D[C]=w;return D}function n(v,w){for(var D=
v.length,C=Array(D+1),x=0;x<D;x++)C[x]=v[x]-w;C[D]=v[D-1]+w;return C}function p(v){for(var w=Array(v),D=0;D<v;D++)w[D]=[];return w}function h(v,w,D){for(var C in u)g.isArrayOrTypedArray(w[C])&&(Array.isArray(D)?g.isArrayOrTypedArray(w[C][D[0]])&&(v[u[C]]=w[C][D[0]][D[1]]):v[u[C]]=w[C][D])}function a(v,w){if(g.isArrayOrTypedArray(w.selectedpoints))for(var D=0;D<v.length;D++){for(var C=v[D].pts||[],x={},A=0;A<C.length;A++)x[C[A].i]=A;g.tagSelected(C,w,x)}}function f(v,w){return v.v-w.v}function d(v){return v.v}
function l(v,w,D){return 0===D?v.q1:Math.min(v.q1,w[Math.min(g.findBin(2.5*v.q1-1.5*v.q3,w,!0)+1,D-1)])}function k(v,w,D){return 0===D?v.q3:Math.max(v.q3,w[Math.max(g.findBin(2.5*v.q3-1.5*v.q1,w),0)])}var c=b("fast-isnumeric"),e=b("../../plots/cartesian/axes"),g=b("../../lib"),m=b("../../constants/numerical").BADNUM,r=g._;y.exports=function(v,w){var D=v._fullLayout,C=e.getFromId(v,w.xaxis||"x"),x=e.getFromId(v,w.yaxis||"y"),A=[],B="violin"===w.type?"_numViolins":"_numBoxes",t,G;if("h"===w.orientation){var H=
C;var I="x";C="y"}else H=x,I="y",x=C,C="x";var J=q(w,C,x,D[B]);x=g.distinctVals(J);var L=x.vals;x=x.minDiff/2;var E="all"===(w.boxpoints||w.points)?g.identity:function(da){return da.v<P.lf||da.v>P.uf};if(w._hasPreCompStats){var K=w[I],N=function(da){return H.d2c((w[da]||[])[t])};L=Infinity;var O=-Infinity;for(t=0;t<w._length;t++){var Q=J[t];if(c(Q)){var P={};P.pos=P[C]=Q;P.q1=N("q1");P.med=N("median");P.q3=N("q3");Q=[];if(K&&g.isArrayOrTypedArray(K[t]))for(G=0;G<K[t].length;G++){var T=H.d2c(K[t][G]);
T!==m&&(T={v:T,i:[t,G]},h(T,w,[t,G]),Q.push(T))}P.pts=Q.sort(f);T=P[I]=Q.map(d);G=T.length;if(P.med!==m&&P.q1!==m&&P.q3!==m&&P.med>=P.q1&&P.q3>=P.med){var V=N("lowerfence");P.lf=V!==m&&V<=P.q1?V:l(P,T,G);V=N("upperfence");P.uf=V!==m&&V>=P.q3?V:k(P,T,G);V=N("mean");P.mean=V!==m?V:G?g.mean(T,G):(P.q1+P.q3)/2;var aa=N("sd");P.sd=V!==m&&0<=aa?aa:G?g.stdev(T,G,P.mean):P.q3-P.q1;P.lo=4*P.q1-3*P.q3;P.uo=4*P.q3-3*P.q1;V=N("notchspan");V=V!==m&&0<V?V:0===G?0:1.57*(P.q3-P.q1)/Math.sqrt(G);P.ln=P.med-V;P.un=
P.med+V;V=P.lf;aa=P.uf;w.boxpoints&&T.length&&(V=Math.min(V,T[0]),aa=Math.max(aa,T[G-1]));w.notched&&(V=Math.min(V,P.ln),aa=Math.max(aa,P.un));P.min=V;P.max=aa}else g.warn(["Invalid input - make sure that q1 \x3c\x3d median \x3c\x3d q3","q1 \x3d "+P.q1,"median \x3d "+P.med,"q3 \x3d "+P.q3].join("\n")),T=P.med!==m?P.med:P.q1!==m?P.q3!==m?(P.q1+P.q3)/2:P.q1:P.q3!==m?P.q3:0,P.med=T,P.q1=P.q3=T,P.lf=P.uf=T,P.mean=P.sd=T,P.ln=P.un=T,P.min=P.max=T;L=Math.min(L,P.min);O=Math.max(O,P.max);P.pts2=Q.filter(E);
A.push(P)}}w._extremes[H._id]=e.findExtremes(H,[L,O],{padded:!0})}else{O=H.makeCalcdata(w,I);Q=n(L,x);V=L.length;aa=p(V);for(t=0;t<w._length;t++)T=O[t],c(T)&&(G=g.findBin(J[t],Q),0<=G&&G<V&&(T={v:T,i:t},h(T,w,t),aa[G].push(T)));J=Infinity;var ba=-Infinity;Q=w.quartilemethod;var Y="exclusive"===Q,ea="inclusive"===Q;for(t=0;t<V;t++)0<aa[t].length&&(P={},P.pos=P[C]=L[t],Q=P.pts=aa[t].sort(f),T=P[I]=Q.map(d),G=T.length,P.min=T[0],P.max=T[G-1],P.mean=g.mean(T,G),P.sd=g.stdev(T,G,P.mean),P.med=g.interp(T,
.5),G%2&&(Y||ea)?(Y?(K=T.slice(0,G/2),N=T.slice(G/2+1)):ea&&(K=T.slice(0,G/2+1),N=T.slice(G/2)),P.q1=g.interp(K,.5),P.q3=g.interp(N,.5)):(P.q1=g.interp(T,.25),P.q3=g.interp(T,.75)),P.lf=l(P,T,G),P.uf=k(P,T,G),P.lo=4*P.q1-3*P.q3,P.uo=4*P.q3-3*P.q1,T=0===G?0:1.57*(P.q3-P.q1)/Math.sqrt(G),P.ln=P.med-T,P.un=P.med+T,J=Math.min(J,P.ln),ba=Math.max(ba,P.un),P.pts2=Q.filter(E),A.push(P));w._extremes[H._id]=e.findExtremes(H,w.notched?O.concat([J,ba]):O,{padded:!0})}a(A,w);return 0<A.length?(A[0].t={num:D[B],
dPos:x,posLetter:C,valLetter:I,labels:{med:r(v,"median:"),min:r(v,"min:"),q1:r(v,"q1:"),q3:r(v,"q3:"),max:r(v,"max:"),mean:"sd"===w.boxmean?r(v,"mean  :"):r(v,"mean:"),lf:r(v,"lower fence:"),uf:r(v,"upper fence:")}},D[B]++,A):[{t:{empty:!0}}]};var u={text:"tx",hovertext:"htx"}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"fast-isnumeric":241}],917:[function(b,y,F){function q(f,d,l,k){var c=d.calcdata;d=d._fullLayout;var e=k._id,g=e.charAt(0),m,r,u=[],v=0;for(m=
0;m<l.length;m++){var w=c[l[m]];for(r=0;r<w.length;r++)u.push(k.c2l(w[r].pos,!0)),v+=(w[r].pts2||[]).length}if(u.length){m=p.distinctVals(u,{unitMinDiff:"category"===k.type||"multicategory"===k.type});u=m.minDiff/2;n.minDtick(k,m.minDiff,m.vals[0],!0);var D=d["violin"===f?"_numViolins":"_numBoxes"],C="group"===d[f+"mode"]&&1<D,x=1-d[f+"gap"];f=1-d[f+"groupgap"];for(m=0;m<l.length;m++){w=c[l[m]];var A=w[0].trace,B=w[0].t;r=A.width;var t=A.side,G,H;if(r){var I=G=H=r/2;var J=0}else I=u,C?(G=h(d,k._id)+
A.orientation,H=(G=Object.keys(((d._alignmentOpts[G]||{})[A.alignmentgroup]||{}).offsetGroups||{}).length)||D,J=G?A._offsetIndex:B.num,G=I*x*f/H,J=2*I*(-.5+(J+.5)/H)*x,H=I*x/H):(G=I*x*f,J=0,H=I);B.dPos=I;B.bPos=J;B.bdPos=G;B.wHover=H;G=J+G;B=!!r;H=(A.boxpoints||A.points)&&0<v;if("positive"===t)t=I*(r?1:.5),r=J;else if("negative"===t){t=J;r=I*(r?1:.5);var L=G}else t=r=I,J=L=G;if(H){I=A.pointpos;H=A.jitter;var E=A.marker.size/2,K=0;if(0<=I+H)if(K=G*(I+H),K>t){B=!0;var N=E;var O=K}else K>J&&(N=E,O=t);
K<=t&&(O=t);t=0;if(0>=I-H)if(t=-G*(I-H),t>r){B=!0;var Q=E;var P=t}else t>L&&(Q=E,P=r);t<=r&&(P=r)}else O=t,P=r;I=Array(w.length);for(r=0;r<w.length;r++)I[r]=w[r].pos;A._extremes[e]=n.findExtremes(k,I,{padded:B,vpadminus:P,vpadplus:O,vpadLinearized:!0,ppadminus:{x:Q,y:N}[g],ppadplus:{x:N,y:Q}[g]})}}}var n=b("../../plots/cartesian/axes"),p=b("../../lib"),h=b("../../plots/cartesian/axis_ids").getAxisGroup,a=["v","h"];y.exports={crossTraceCalc:function(f,d){var l=f.calcdata,k=d.xaxis;d=d.yaxis;for(var c=
0;c<a.length;c++){for(var e=a[c],g="h"===e?d:k,m=[],r=0;r<l.length;r++){var u=l[r],v=u[0].t;u=u[0].trace;!0!==u.visible||"box"!==u.type&&"candlestick"!==u.type||v.empty||(u.orientation||"v")!==e||u.xaxis!==k._id||u.yaxis!==d._id||m.push(r)}q("box",f,m,g)}},setPositionOffset:q}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_ids":800}],918:[function(b,y,F){function q(k,c,e,g){function m(G){var H=0;G&&G.length&&(H+=1,p.isArrayOrTypedArray(G[0])&&G[0].length&&(H+=1));return H}
function r(G){return p.validate(k[G],l[G])}var u=e("y"),v=e("x");if("box"===c.type){var w=e("q1"),D=e("median");var C=e("q3");c._hasPreCompStats=w&&w.length&&D&&D.length&&C&&C.length;C=Math.min(p.minRowLength(w),p.minRowLength(D),p.minRowLength(C))}w=m(u);D=m(v);var x=w&&p.minRowLength(u),A=D&&p.minRowLength(v);if(c._hasPreCompStats)switch(String(D)+String(w)){case "00":u=r("x0")||r("dx");var B=!r("y0")&&!r("dy")||u?"v":"h";var t=C;break;case "10":B="v";t=Math.min(C,A);break;case "20":B="h";t=Math.min(C,
v.length);break;case "01":B="h";t=Math.min(C,x);break;case "02":B="v";t=Math.min(C,u.length);break;case "12":B="v";t=Math.min(C,A,u.length);break;case "21":B="h";t=Math.min(C,v.length,x);break;case "11":t=0;break;case "22":B=!1;for(t=0;t<v.length;t++)if("category"===d(v[t])){B=!0;break}if(B)B="v",t=Math.min(C,A,u.length);else{for(t=0;t<u.length;t++)if("category"===d(u[t])){B=!0;break}B?(B="h",t=Math.min(C,v.length,x)):(B="v",t=Math.min(C,A,u.length))}}else 0<w?(B="v",t=0<D?Math.min(A,x):Math.min(x)):
0<D?(B="h",t=Math.min(A)):t=0;t?(c._length=t,u=e("orientation",B),c._hasPreCompStats?"v"===u&&0===D?(e("x0",0),e("dx",1)):"h"===u&&0===w&&(e("y0",0),e("dy",1)):"v"===u&&0===D?e("x0"):"h"===u&&0===w&&e("y0"),h.getComponentMethod("calendars","handleTraceDefaults")(k,c,["x","y"],g)):c.visible=!1}function n(k,c,e,g){g=g.prefix;k=p.coerce2(k,c,l,"marker.outliercolor");var m=e("marker.line.outliercolor"),r="outliers";if(c._hasPreCompStats)r="all";else if(k||m)r="suspectedoutliers";(g=e(g+"points",r))?(e("jitter",
"all"===g?.3:0),e("pointpos","all"===g?-1.5:0),e("marker.symbol"),e("marker.opacity"),e("marker.size"),e("marker.color",c.line.color),e("marker.line.color"),e("marker.line.width"),"suspectedoutliers"===g&&(e("marker.line.outliercolor",c.marker.color),e("marker.line.outlierwidth")),e("selected.marker.color"),e("unselected.marker.color"),e("selected.marker.size"),e("unselected.marker.size"),e("text"),e("hovertext")):delete c.marker;g=e("hoveron");"all"!==g&&-1===g.indexOf("points")||e("hovertemplate");
p.coerceSelectionMarkerOpacity(c,e)}var p=b("../../lib"),h=b("../../registry"),a=b("../../components/color"),f=b("../bar/defaults").handleGroupingDefaults,d=b("../../plots/cartesian/axis_autotype"),l=b("./attributes");y.exports={supplyDefaults:function(k,c,e,g){function m(v,w){return p.coerce(k,c,l,v,w)}q(k,c,m,g);if(!1!==c.visible){if(g=c._hasPreCompStats)m("lowerfence"),m("upperfence");m("line.color",(k.marker||{}).color||e);m("line.width");m("fillcolor",a.addOpacity(c.line.color,.5));e=!1;if(g){var r=
m("mean"),u=m("sd");r&&r.length&&(e=!0,u&&u.length&&(e="sd"))}m("boxmean",e);m("whiskerwidth");m("width");m("quartilemethod");e=!1;g?(g=m("notchspan"))&&g.length&&(e=!0):p.validate(k.notchwidth,l.notchwidth)&&(e=!0);m("notched",e)&&m("notchwidth");n(k,c,m,{prefix:"box"})}},crossTraceDefaults:function(k,c){function e(v){return p.coerce(m._input,m,l,v)}for(var g,m,r=0;r<k.length;r++){m=k[r];var u=m.type;if("box"===u||"violin"===u)g=m._input,"group"===c[u+"mode"]&&f(g,m,c,e)}},handleSampleDefaults:q,
handlePointsDefaults:n}},{"../../components/color":615,"../../lib":749,"../../plots/cartesian/axis_autotype":798,"../../registry":880,"../bar/defaults":894,"./attributes":915}],919:[function(b,y,F){y.exports=function(q,n){n.hoverOnBox&&(q.hoverOnBox=n.hoverOnBox);"xVal"in n&&(q.x=n.xVal);"yVal"in n&&(q.y=n.yVal);n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);return q}},{}],920:[function(b,y,F){function q(l,k,c,e){function g(O){return(L(O)+E(O))/2}var m=l.cd,r=l.xa,u=l.ya,v=m[0].trace,w=m[0].t,D="violin"===
v.type,C=[];var x=w.bdPos;var A=w.wHover,B=function(O){return K.c2l(O.pos)+w.bPos-K.c2l(J)};if(D&&"both"!==v.side){if("positive"===v.side){var t=function(O){O=B(O);return a.inbox(O,O+A,N)};var G=x;var H=0}"negative"===v.side&&(t=function(O){O=B(O);return a.inbox(O-A,O,N)},G=0,H=x)}else t=function(O){O=B(O);return a.inbox(O-A,O+A,N)},G=H=x;D=D?function(O){return a.inbox(O.span[0]-I,O.span[1]-I,N)}:function(O){return a.inbox(O.min-I,O.max-I,N)};if("h"===v.orientation){var I=k;var J=c;var L=D;var E=
t;c="y";var K=u;k="x"}else I=c,J=k,L=t,E=D,c="x",K=r,k="y",r=u;x=Math.min(1,x/Math.abs(K.r2c(K.range[1])-K.r2c(K.range[0])));var N=l.maxHoverDistance-x;x=l.maxSpikeDistance-x;e=a.getDistanceFunction(e,L,E,g);a.getClosest(m,e,l);if(!1===l.index)return[];m=m[l.index];e=v.line.color;u=(v.marker||{}).color;f.opacity(e)&&v.line.width?l.color=e:f.opacity(u)&&v.boxpoints?l.color=u:l.color=v.fillcolor;l[c+"0"]=K.c2p(m.pos+w.bPos-H,!0);l[c+"1"]=K.c2p(m.pos+w.bPos+G,!0);l[c+"LabelVal"]=m.pos;G=c+"Spike";l.spikeDistance=
g(m)*x/N;l[G]=K.c2p(m.pos,!0);H={};e=["med","q1","q3","min","max"];(v.boxmean||(v.meanline||{}).visible)&&e.push("mean");(v.boxpoints||v.points)&&e.push("lf","uf");for(c=0;c<e.length;c++)x=e[c],x in m&&!(m[x]in H)&&(H[m[x]]=!0,u=m[x],t=r.c2p(u,!0),D=h.extendFlat({},l),D.attr=x,D[k+"0"]=D[k+"1"]=t,D[k+"LabelVal"]=u,D[k+"Label"]=(w.labels?w.labels[x]+" ":"")+p.hoverLabelText(r,u),D.hoverOnBox=!0,"mean"===x&&"sd"in m&&"sd"===v.boxmean&&(D[k+"err"]=m.sd),l.name="",l.spikeDistance=void 0,l[G]=void 0,D.hovertemplate=
!1,C.push(D));return C}function n(l,k,c){for(var e=l.cd,g=l.xa,m=l.ya,r=e[0].trace,u=g.c2p(k),v=m.c2p(c),w=a.quadrature(function(A){var B=Math.max(3,A.mrc||0);return Math.max(Math.abs(g.c2p(A.x)-u)-B,1-3/B)},function(A){var B=Math.max(3,A.mrc||0);return Math.max(Math.abs(m.c2p(A.y)-v)-B,1-3/B)}),D=!1,C=0;C<e.length;C++){k=e[C];for(var x=0;x<(k.pts||[]).length;x++)c=k.pts[x],c=w(c),c<=l.distance&&(l.distance=c,D=[C,x])}if(!D)return!1;k=e[D[0]];c=k.pts[D[1]];e=g.c2p(c.x,!0);w=m.c2p(c.y,!0);D=c.mrc||
1;l=h.extendFlat({},l,{index:c.i,color:(r.marker||{}).color,name:r.name,x0:e-D,x1:e+D,y0:w-D,y1:w+D,spikeDistance:l.distance,hovertemplate:r.hovertemplate});"h"===r.orientation?(e=m,l.xLabelVal=c.x,l.yLabelVal=k.pos):(e=g,l.xLabelVal=k.pos,l.yLabelVal=c.y);w=e._id.charAt(0);l[w+"Spike"]=e.c2p(k.pos,!0);d(c,r,l);return l}var p=b("../../plots/cartesian/axes"),h=b("../../lib"),a=b("../../components/fx"),f=b("../../components/color"),d=h.fillText;y.exports={hoverPoints:function(l,k,c,e){var g=l.cd[0].trace.hoveron,
m=[],r;-1!==g.indexOf("boxes")&&(m=m.concat(q(l,k,c,e)));-1!==g.indexOf("points")&&(r=n(l,k,c));if("closest"===e)return r?[r]:m;r&&m.push(r);return m},hoverOnBoxes:q,hoverOnPoints:n}},{"../../components/color":615,"../../components/fx":655,"../../lib":749,"../../plots/cartesian/axes":797}],921:[function(b,y,F){y.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults").supplyLayoutDefaults,
calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"box",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"./attributes":915,"./calc":916,"./cross_trace_calc":917,
"./defaults":918,"./event_data":919,"./hover":920,"./layout_attributes":922,"./layout_defaults":923,"./plot":924,"./select":925,"./style":926}],922:[function(b,y,F){y.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],923:[function(b,y,F){function q(a,f,d,l,k){a=k+"Layout";f=!1;for(var c=0;c<d.length;c++)if(n.traceIs(d[c],
a)){f=!0;break}f&&(l(k+"mode"),l(k+"gap"),l(k+"groupgap"))}var n=b("../../registry"),p=b("../../lib"),h=b("./layout_attributes");y.exports={supplyLayoutDefaults:function(a,f,d){q(a,f,d,function(l,k){return p.coerce(a,f,h,l,k)},"box")},_supply:q}},{"../../lib":749,"../../registry":880,"./layout_attributes":922}],924:[function(b,y,F){function q(d,l,k,c){var e="h"===k.orientation,g=l.val,m=l.pos,r=!!m.rangebreaks,u=c.bPos,v=c.wdPos||0,w=c.bPosPxOffset||0,D=k.whiskerwidth||0,C=k.notched||!1,x=C?1-2*k.notchwidth:
1;if(Array.isArray(c.bdPos)){var A=c.bdPos[0];var B=c.bdPos[1]}else B=A=c.bdPos;d=d.selectAll("path.box").data("violin"!==k.type||k.box.visible?a.identity:[]);d.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");d.exit().remove();d.each(function(t){if(t.empty)return"M0,0Z";var G=m.c2l(t.pos+u,!0),H=m.l2p(G-A)+w,I=m.l2p(G+B)+w,J=r?(H+I)/2:m.l2p(G)+w,L=k.whiskerwidth,E=r?H*L+(1-L)*J:m.l2p(G-v)+w;L=r?I*L+(1-L)*J:m.l2p(G+v)+w;var K=m.l2p(G-A*x)+w;G=m.l2p(G+B*x)+w;var N=
g.c2p(t.q1,!0),O=g.c2p(t.q3,!0),Q=a.constrain(g.c2p(t.med,!0),Math.min(N,O)+1,Math.max(N,O)-1),P=void 0===t.lf||!1===k.boxpoints,T=g.c2p(P?t.min:t.lf,!0);P=g.c2p(P?t.max:t.uf,!0);var V=g.c2p(t.ln,!0);t=g.c2p(t.un,!0);e?h.select(this).attr("d","M"+Q+","+K+"V"+G+"M"+N+","+H+"V"+I+(C?"H"+V+"L"+Q+","+G+"L"+t+","+I:"")+"H"+O+"V"+H+(C?"H"+t+"L"+Q+","+K+"L"+V+","+H:"")+"ZM"+N+","+J+"H"+T+"M"+O+","+J+"H"+P+(0===D?"":"M"+T+","+E+"V"+L+"M"+P+","+E+"V"+L)):h.select(this).attr("d","M"+K+","+Q+"H"+G+"M"+H+","+
N+"H"+I+(C?"V"+V+"L"+G+","+Q+"L"+I+","+t:"")+"V"+O+"H"+H+(C?"V"+t+"L"+K+","+Q+"L"+H+","+V:"")+"ZM"+J+","+N+"V"+T+"M"+J+","+O+"V"+P+(0===D?"":"M"+E+","+T+"H"+L+"M"+E+","+P+"H"+L))})}function n(d,l,k,c){var e=l.x;l=l.y;var g=c.bdPos,m=c.bPos,r=k.boxpoints||k.points;a.seedPseudoRandom();var u=function(v){v.forEach(function(w){w.t=c;w.trace=k});return v};d=d.selectAll("g.points").data(r?u:[]);d.enter().append("g").attr("class","points");d.exit().remove();d=d.selectAll("path").data(function(v){var w=v.pts2;
var D=Math.max((v.max-v.min)/10,v.q3-v.q1);var C=1E-9*D,x=.01*D,A=[],B=0;if(k.jitter){if(0===D)for(B=1,A=Array(w.length),D=0;D<w.length;D++)A[D]=1;else for(D=0;D<w.length;D++){var t=Math.max(0,D-5);var G=w[t].v,H=Math.min(w.length-1,D+5),I=w[H].v;"all"!==r&&(w[D].v<v.lf?I=Math.min(I,v.lf):G=Math.max(G,v.uf));t=Math.sqrt(x*(H-t)/(I-G+C))||0;t=a.constrain(Math.abs(t),0,1);A.push(t);B=Math.max(t,B)}t=2*k.jitter/(B||1)}for(D=0;D<w.length;D++)C=w[D],x=C.v,B=k.jitter?t*A[D]*(a.pseudoRandom()-.5):0,B=v.pos+
m+g*(k.pointpos+B),"h"===k.orientation?(C.y=B,C.x=x):(C.x=B,C.y=x),"suspectedoutliers"===r&&x<v.uo&&x>v.lo&&(C.so=!0);return w});d.enter().append("path").classed("point",!0);d.exit().remove();d.call(f.translatePoints,e,l)}function p(d,l,k,c){var e=l.val,g=l.pos,m=!!g.rangebreaks,r=c.bPos,u=c.bPosPxOffset||0,v=k.boxmean||(k.meanline||{}).visible;if(Array.isArray(c.bdPos)){var w=c.bdPos[0];var D=c.bdPos[1]}else D=w=c.bdPos;d=d.selectAll("path.mean").data("box"===k.type&&k.boxmean||"violin"===k.type&&
k.box.visible&&k.meanline.visible?a.identity:[]);d.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});d.exit().remove();d.each(function(C){var x=g.c2l(C.pos+r,!0),A=g.l2p(x-w)+u,B=g.l2p(x+D)+u;x=m?(A+B)/2:g.l2p(x)+u;var t=e.c2p(C.mean,!0),G=e.c2p(C.mean-C.sd,!0);C=e.c2p(C.mean+C.sd,!0);"h"===k.orientation?h.select(this).attr("d","M"+t+","+A+"V"+B+("sd"===v?"m0,0L"+G+","+x+"L"+t+","+A+"L"+C+","+x+"Z":"")):h.select(this).attr("d","M"+A+","+t+"H"+B+
("sd"===v?"m0,0L"+x+","+G+"L"+A+","+t+"L"+x+","+C+"Z":""))})}var h=b("d3"),a=b("../../lib"),f=b("../../components/drawing");y.exports={plot:function(d,l,k,c){var e=l.xaxis,g=l.yaxis;a.makeTraceGroups(c,k,"trace boxes").each(function(m){var r=h.select(this),u=m[0];m=u.t;u=u.trace;m.wdPos=m.bdPos*u.whiskerwidth;if(!0!==u.visible||m.empty)r.remove();else{if("h"===u.orientation){var v=g;var w=e}else v=e,w=g;q(r,{pos:v,val:w},u,m);n(r,{x:e,y:g},u,m);p(r,{pos:v,val:w},u,m)}})},plotBoxAndWhiskers:q,plotPoints:n,
plotBoxMean:p}},{"../../components/drawing":637,"../../lib":749,d3:169}],925:[function(b,y,F){y.exports=function(q,n){var p=q.cd,h=q.xaxis,a=q.yaxis,f=[],d,l;if(!1===n)for(d=0;d<p.length;d++)for(l=0;l<(p[d].pts||[]).length;l++)p[d].pts[l].selected=0;else for(d=0;d<p.length;d++)for(l=0;l<(p[d].pts||[]).length;l++){var k=p[d].pts[l],c=h.c2p(k.x),e=a.c2p(k.y);n.contains([c,e],null,k.i,q)?(f.push({pointNumber:k.i,x:h.c2d(k.x),y:a.c2d(k.y)}),k.selected=1):k.selected=0}return f}},{}],926:[function(b,y,
F){var q=b("d3"),n=b("../../components/color"),p=b("../../components/drawing");y.exports={style:function(h,a,f){a=f?f:q.select(h).selectAll("g.trace.boxes");a.style("opacity",function(d){return d[0].trace.opacity});a.each(function(d){function l(g,m,r,u){g.style("stroke-width",m+"px").call(n.stroke,r).call(n.fill,u)}var k=q.select(this),c=d[0].trace;d=c.line.width;var e=k.selectAll("path.box");"candlestick"===c.type?e.each(function(g){if(!g.empty){var m=q.select(this),r=c[g.dir];l(m,r.line.width,r.line.color,
r.fillcolor);m.style("opacity",c.selectedpoints&&!g.selected?.3:1)}}):(l(e,d,c.line.color,c.fillcolor),k.selectAll("path.mean").style({"stroke-width":d,"stroke-dasharray":2*d+"px,"+d+"px"}).call(n.stroke,c.line.color),k=k.selectAll("path.point"),p.pointStyle(k,c,h))})},styleOnSelect:function(h,a,f){a=a[0].trace;f=f.selectAll("path.point");a.selectedpoints?p.selectedPointStyle(f,a):p.pointStyle(f,a,h)}}},{"../../components/color":615,"../../components/drawing":637,d3:169}],927:[function(b,y,F){function q(h){return{line:{color:n({},
p.line.color,{dflt:h}),width:p.line.width,editType:"style"},fillcolor:p.fillcolor,editType:"style"}}var n=b("../../lib").extendFlat;F=b("../ohlc/attributes");var p=b("../box/attributes");y.exports={x:F.x,open:F.open,high:F.high,low:F.low,close:F.close,line:{width:n({},p.line.width,{}),editType:"style"},increasing:q(F.increasing.line.color.dflt),decreasing:q(F.decreasing.line.color.dflt),text:F.text,hovertext:F.hovertext,whiskerwidth:n({},p.whiskerwidth,{dflt:0}),hoverlabel:F.hoverlabel}},{"../../lib":749,
"../box/attributes":915,"../ohlc/attributes":1101}],928:[function(b,y,F){function q(a,f,d,l){return{min:d,q1:Math.min(a,l),med:l,q3:Math.max(a,l),max:f}}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../ohlc/calc").calcCommon;y.exports=function(a,f){var d=a._fullLayout,l=p.getFromId(a,f.xaxis),k=p.getFromId(a,f.yaxis);l=l.makeCalcdata(f,"x");a=h(a,f,l,k,q);return a.length?(n.extendFlat(a[0].t,{num:d._numBoxes,dPos:n.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),d._numBoxes++,
a):[{t:{empty:!0}}]}},{"../../lib":749,"../../plots/cartesian/axes":797,"../ohlc/calc":1102}],929:[function(b,y,F){function q(f,d,l,k){f=l(k+".line.color");l(k+".line.width",d.line.width);l(k+".fillcolor",p.addOpacity(f,.5))}var n=b("../../lib"),p=b("../../components/color"),h=b("../ohlc/ohlc_defaults"),a=b("./attributes");y.exports=function(f,d,l,k){function c(e,g){return n.coerce(f,d,a,e,g)}h(f,d,c,k)?(c("line.width"),q(f,d,c,"increasing"),q(f,d,c,"decreasing"),c("text"),c("hovertext"),c("whiskerwidth"),
k._requestRangeslider[d.xaxis]=!0):d.visible=!1}},{"../../components/color":615,"../../lib":749,"../ohlc/ohlc_defaults":1106,"./attributes":927}],930:[function(b,y,F){y.exports={moduleType:"trace",name:"candlestick",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:b("./attributes"),layoutAttributes:b("../box/layout_attributes"),supplyLayoutDefaults:b("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:b("../box/cross_trace_calc").crossTraceCalc,
supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("../box/plot").plot,layerName:"boxlayer",style:b("../box/style").style,hoverPoints:b("../ohlc/hover").hoverPoints,selectPoints:b("../ohlc/select")}},{"../../plots/cartesian":810,"../box/cross_trace_calc":917,"../box/layout_attributes":922,"../box/layout_defaults":923,"../box/plot":924,"../box/style":926,"../ohlc/hover":1104,"../ohlc/select":1108,"./attributes":927,"./calc":928,"./defaults":929}],931:[function(b,y,F){function q(h,a,f,d){["aaxis",
"baxis"].forEach(function(l){var k=l.charAt(0),c=h[l]||{},e=p.newContainer(a,l);n(c,e,{tickfont:"x",id:k+"axis",letter:k,font:a.font,name:l,data:h[k],calendar:a.calendar,dfltColor:d,bgColor:f.paper_bgcolor,fullLayout:f});e._categories=e._categories||[];h[l]||"-"===c.type||(h[l]={type:c.type})})}var n=b("./axis_defaults"),p=b("../../plot_api/plot_template");y.exports=function(h,a,f,d,l){d("a")||(d("da"),d("a0"));d("b")||(d("db"),d("b0"));q(h,a,f,l)}},{"../../plot_api/plot_template":787,"./axis_defaults":936}],
932:[function(b,y,F){function q(p,h){if(!n(p)||10<=h)return null;for(var a=Infinity,f=-Infinity,d=p.length,l=0;l<d;l++){var k=p[l];if(n(k)){if(k=q(k,h+1))a=Math.min(k[0],a),f=Math.max(k[1],f)}else a=Math.min(k,a),f=Math.max(k,f)}return[a,f]}var n=b("../../lib").isArrayOrTypedArray;y.exports=function(p){return q(p,0)}},{"../../lib":749}],933:[function(b,y,F){var q=b("../../plots/font_attributes");F=b("./axis_attributes");b=b("../../components/color/attributes");q=q({editType:"calc"});q.family.dflt=
'"Open Sans", verdana, arial, sans-serif';q.size.dflt=12;q.color.dflt=b.defaultLine;y.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},
cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:F,baxis:F,font:q,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":614,"../../plots/font_attributes":825,"./axis_attributes":935}],934:[function(b,y,F){var q=b("../../lib").isArrayOrTypedArray;y.exports=function(n,p,h,a){var f=q(h)?"a":"b",d=("a"===f?n.aaxis:n.baxis).smoothing,l="a"===f?n.a2i:n.b2j,k="a"===f?h:a;a="a"===f?a:h;h="a"===f?p.a.length:p.b.length;var c="a"===f?
p.b.length:p.a.length,e=Math.floor("a"===f?n.b2j(a):n.a2i(a));p="a"===f?function(H){return n.evalxy([],H,e)}:function(H){return n.evalxy([],e,H)};if(d){var g=Math.max(0,Math.min(c-2,e));var m=e-g;var r="a"===f?function(H,I){return n.dxydi([],H,g,I,m)}:function(H,I){return n.dxydj([],g,H,m,I)}}f=l(k[0]);l=l(k[1]);k=f<l?1:-1;var u=1E-8*(l-f);var v=0<k?Math.ceil:Math.floor;a=0<k?Math.min:Math.max;c=0<k?Math.max:Math.min;var w=(0<k?Math.floor:Math.ceil)(f+u);v=v(l-u);u=p(f);for(var D=[[u]];w*k<v*k;w+=
k){var C=[];var x=c(f,w);var A=a(l,w+k);var B=A-x;var t=Math.max(0,Math.min(h-2,Math.floor(.5*(x+A))));var G=p(A);d&&(x=r(t,x-t),t=r(t,A-t),C.push([u[0]+x[0]/3*B,u[1]+x[1]/3*B]),C.push([G[0]-t[0]/3*B,G[1]-t[1]/3*B]));C.push(G);D.push(C);u=G}return D}},{"../../lib":749}],935:[function(b,y,F){F=b("../../plots/font_attributes");var q=b("../../components/color/attributes"),n=b("../../plots/cartesian/layout_attributes"),p=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");b("../../constants/docs");
y.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:F({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],
dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",
editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:F({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",
editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:p(n.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",
editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:q.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},
showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:q.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",
editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:F({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":614,"../../constants/docs":719,"../../plot_api/edit_types":780,
"../../plots/cartesian/layout_attributes":811,"../../plots/font_attributes":825}],936:[function(b,y,F){function q(e,g){if("-"===e.type){var m=e._id.charAt(0);e.type=c(g,e[m+"calendar"])}}var n=b("./attributes"),p=b("../../components/color").addOpacity,h=b("../../registry"),a=b("../../lib"),f=b("../../plots/cartesian/tick_value_defaults"),d=b("../../plots/cartesian/tick_label_defaults"),l=b("../../plots/cartesian/category_order_defaults"),k=b("../../plots/cartesian/set_convert"),c=b("../../plots/cartesian/axis_autotype");
y.exports=function(e,g,m){function r(B,t){return a.coerce(e,g,D,B,t)}function u(B,t){return a.coerce2(e,g,D,B,t)}var v=m.letter,w=m.font||{},D=n[v+"axis"];m.name&&(g._name=m.name,g._id=m.name);var C=r("type");"-"===C&&(m.data&&q(g,m.data),"-"===g.type?g.type="linear":C=e.type=g.type);r("smoothing");r("cheatertype");r("showticklabels");r("labelprefix",v+" \x3d ");r("labelsuffix");r("showtickprefix");r("showticksuffix");r("separatethousands");r("tickformat");r("exponentformat");r("showexponent");r("categoryorder");
r("tickmode");r("tickvals");r("ticktext");r("tick0");r("dtick");"array"===g.tickmode&&(r("arraytick0"),r("arraydtick"));r("labelpadding");g._hovertitle=v;"date"===C&&h.getComponentMethod("calendars","handleDefaults")(e,g,"calendar",m.calendar);k(g,m.fullLayout);g.c2p=a.identity;var x=r("color",m.dfltColor),A=x===e.color?x:w.color;r("title.text")&&(a.coerceFont(r,"title.font",{family:w.family,size:Math.round(1.2*w.size),color:A}),r("title.offset"));r("tickangle");r("autorange",!g.isValidRange(e.range))&&
r("rangemode");r("range");g.cleanRange();r("fixedrange");f(e,g,r,C);d(e,g,r,C,m);l(e,g,r,{data:m.data,dataAttr:v});m=u("gridcolor",p(x,.3));v=u("gridwidth");w=r("showgrid");w||(delete g.gridcolor,delete g.gridwidth);C=u("startlinecolor",x);A=u("startlinewidth",v);r("startline",g.showgrid||!!C||!!A)||(delete g.startlinecolor,delete g.startlinewidth);x=u("endlinecolor",x);C=u("endlinewidth",v);r("endline",g.showgrid||!!x||!!C)||(delete g.endlinecolor,delete g.endlinewidth);w?(r("minorgridcount"),r("minorgridwidth",
v),r("minorgridcolor",p(m,.06)),g.minorgridcount||(delete g.minorgridwidth,delete g.minorgridcolor)):(delete g.gridcolor,delete g.gridWidth);"none"===g.showticklabels&&(delete g.tickfont,delete g.tickangle,delete g.showexponent,delete g.exponentformat,delete g.tickformat,delete g.showticksuffix,delete g.showtickprefix);g.showticksuffix||delete g.ticksuffix;g.showtickprefix||delete g.tickprefix;r("tickmode");return g}},{"../../components/color":615,"../../lib":749,"../../plots/cartesian/axis_autotype":798,
"../../plots/cartesian/category_order_defaults":801,"../../plots/cartesian/set_convert":817,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_value_defaults":820,"../../registry":880,"./attributes":933}],937:[function(b,y,F){var q=b("../../plots/cartesian/axes"),n=b("../../lib").isArray1D,p=b("./cheater_basis"),h=b("./array_minmax"),a=b("./calc_gridlines"),f=b("./calc_labels"),d=b("./calc_clippath"),l=b("../heatmap/clean_2d_array"),k=b("./smooth_fill_2d_array"),c=b("../heatmap/convert_column_xyz"),
e=b("./set_convert");y.exports=function(g,m){var r=q.getFromId(g,m.xaxis);g=q.getFromId(g,m.yaxis);var u=m.aaxis,v=m.baxis,w=m.x,D=m.y,C=[];w&&n(w)&&C.push("x");D&&n(D)&&C.push("y");C.length&&c(m,u,v,"a","b",C);C=m._a=m._a||m.a;var x=m._b=m._b||m.b;w=m._x||m.x;D=m._y||m.y;var A={};m._cheater&&(w=p("index"===u.cheatertype?C.length:C,"index"===v.cheatertype?x.length:x,m.cheaterslope));m._x=w=l(w);m._y=D=l(D);k(w,C,x);k(D,C,x);e(m);m.setScale();var B=h(w),t=h(D),G=.5*(B[1]-B[0]);B=.5*(B[1]+B[0]);var H=
.5*(t[1]-t[0]);t=.5*(t[1]+t[0]);B=[B-1.3*G,B+1.3*G];t=[t-1.3*H,t+1.3*H];m._extremes[r._id]=q.findExtremes(r,B,{padded:!0});m._extremes[g._id]=q.findExtremes(g,t,{padded:!0});a(m,"a","b");a(m,"b","a");f(m,u);f(m,v);A.clipsegments=d(m._xctrl,m._yctrl,u,v);A.x=w;A.y=D;A.a=C;A.b=x;return[A]}},{"../../lib":749,"../../plots/cartesian/axes":797,"../heatmap/clean_2d_array":1036,"../heatmap/convert_column_xyz":1038,"./array_minmax":932,"./calc_clippath":938,"./calc_gridlines":939,"./calc_labels":940,"./cheater_basis":942,
"./set_convert":955,"./smooth_fill_2d_array":956}],938:[function(b,y,F){y.exports=function(q,n,p,h){var a,f=[];p=!!p.smoothing;var d=!!h.smoothing,l=q[0].length-1,k=q.length-1;h=0;var c=[];for(a=[];h<=l;h++)c[h]=q[0][h],a[h]=n[0][h];f.push({x:c,y:a,bicubic:p});h=0;c=[];for(a=[];h<=k;h++)c[h]=q[h][l],a[h]=n[h][l];f.push({x:c,y:a,bicubic:d});h=l;c=[];for(a=[];0<=h;h--)c[l-h]=q[k][h],a[l-h]=n[k][h];f.push({x:c,y:a,bicubic:p});h=k;c=[];for(a=[];0<=h;h--)c[k-h]=q[h][0],a[k-h]=n[h][0];f.push({x:c,y:a,bicubic:d});
return f}},{}],939:[function(b,y,F){var q=b("../../plots/cartesian/axes"),n=b("../../lib/extend").extendFlat;y.exports=function(p,h,a){function f(E){var K,N=[],O=[],Q={};if("b"===h){var P=p.b2j(E);var T=Math.floor(Math.max(0,Math.min(A-2,P)));var V=P-T;Q.length=A;Q.crossLength=x;Q.xy=function(ca){return p.evalxy([],ca,P)};Q.dxy=function(ca,la){return p.dxydi([],ca,T,la,V)};for(K=0;K<x;K++){var aa=Math.min(x-2,K);var ba=K-aa;var Y=p.evalxy([],K,P);if(u.smoothing&&0<K){var ea=p.dxydi([],K-1,T,0,V);
N.push(da[0]+ea[0]/3);O.push(da[1]+ea[1]/3);var da=p.dxydi([],K-1,T,1,V);N.push(Y[0]-da[0]/3);O.push(Y[1]-da[1]/3)}N.push(Y[0]);O.push(Y[1]);da=Y}}else for(K=p.a2i(E),aa=Math.floor(Math.max(0,Math.min(x-2,K))),ba=K-aa,Q.length=x,Q.crossLength=A,Q.xy=function(ca){return p.evalxy([],K,ca)},Q.dxy=function(ca,la){return p.dxydj([],aa,ca,ba,la)},P=0;P<A;P++)T=Math.min(A-2,P),V=P-T,Y=p.evalxy([],K,P),u.smoothing&&0<P&&(ea=p.dxydj([],aa,P-1,ba,0),N.push(da[0]+ea[0]/3),O.push(da[1]+ea[1]/3),da=p.dxydj([],
aa,P-1,ba,1),N.push(Y[0]-da[0]/3),O.push(Y[1]-da[1]/3)),N.push(Y[0]),O.push(Y[1]),da=Y;Q.axisLetter=h;Q.axis=c;Q.crossAxis=u;Q.value=E;Q.constvar=a;Q.index=l;Q.x=N;Q.y=O;Q.smoothing=u.smoothing;return Q}function d(E){var K,N=[],O=[],Q={};Q.length=k.length;Q.crossLength=r.length;if("b"===h){var P=Math.max(0,Math.min(A-2,E));var T=Math.min(1,Math.max(0,E-P));Q.xy=function(ba){return p.evalxy([],ba,E)};Q.dxy=function(ba,Y){return p.dxydi([],ba,P,Y,T)};for(K=0;K<D;K++)N[K]=v[E*B][K],O[K]=w[E*B][K]}else{var V=
Math.max(0,Math.min(x-2,E));var aa=Math.min(1,Math.max(0,E-V));Q.xy=function(ba){return p.evalxy([],E,ba)};Q.dxy=function(ba,Y){return p.dxydj([],V,ba,aa,Y)};for(K=0;K<C;K++)N[K]=v[K][E*B],O[K]=w[K][E*B]}Q.axisLetter=h;Q.axis=c;Q.crossAxis=u;Q.value=k[E];Q.constvar=a;Q.index=E;Q.x=N;Q.y=O;Q.smoothing=u.smoothing;return Q}var l,k=p["_"+h],c=p[h+"axis"];var e=c._gridlines=[];var g=c._minorgridlines=[],m=c._boundarylines=[],r=p["_"+a],u=p[a+"axis"];"array"===c.tickmode&&(c.tickvals=k.slice());var v=
p._xctrl,w=p._yctrl,D=v[0].length,C=v.length,x=p._a.length,A=p._b.length;q.prepTicks(c);"array"===c.tickmode&&delete c.tickvals;var B=c.smoothing?3:1;if("array"===c.tickmode){var t=5E-15;t=[Math.floor((k.length-1-c.arraytick0)/c.arraydtick*(1+t)),Math.ceil(-c.arraytick0/c.arraydtick/(1+t))].sort(function(E,K){return E-K});var G=t[0]-1;t=t[1]+1;for(l=G;l<t;l++){var H=c.arraytick0+c.arraydtick*l;0>H||H>k.length-1||e.push(n(d(H),{color:c.gridcolor,width:c.gridwidth}))}for(l=G;l<t;l++){G=c.arraytick0+
c.arraydtick*l;var I=Math.min(G+c.arraydtick,k.length-1);if(!(0>G||G>k.length-1||0>I||I>k.length-1)){var J=k[G];var L=k[I];for(e=0;e<c.minorgridcount;e++)H=I-G,0>=H||(H=J+(L-J)*(e+1)/(c.minorgridcount+1)*(c.arraydtick/H),H<k[0]||H>k[k.length-1]||g.push(n(f(H),{color:c.minorgridcolor,width:c.minorgridwidth})))}}c.startline&&m.push(n(d(0),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&m.push(n(d(k.length-1),{color:c.endlinecolor,width:c.endlinewidth}))}else{t=5E-15;t=[Math.floor((k[k.length-
1]-c.tick0)/c.dtick*(1+t)),Math.ceil((k[0]-c.tick0)/c.dtick/(1+t))].sort(function(E,K){return E-K});G=t[0];t=t[1];for(l=G;l<=t;l++)I=c.tick0+c.dtick*l,e.push(n(f(I),{color:c.gridcolor,width:c.gridwidth}));for(l=G-1;l<t+1;l++)for(I=c.tick0+c.dtick*l,e=0;e<c.minorgridcount;e++)H=I+c.dtick*(e+1)/(c.minorgridcount+1),H<k[0]||H>k[k.length-1]||g.push(n(f(H),{color:c.minorgridcolor,width:c.minorgridwidth}));c.startline&&m.push(n(f(k[0]),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&m.push(n(f(k[k.length-
1]),{color:c.endlinecolor,width:c.endlinewidth}))}}},{"../../lib/extend":739,"../../plots/cartesian/axes":797}],940:[function(b,y,F){var q=b("../../plots/cartesian/axes"),n=b("../../lib/extend").extendFlat;y.exports=function(p,h){var a=h._labels=[],f=h._gridlines;for(p=0;p<f.length;p++){var d=f[p];if(-1!==["start","both"].indexOf(h.showticklabels)){var l=q.tickText(h,d.value);n(l,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:d.xy(0),dxy:d.dxy(0,0),axis:d.axis,length:d.crossAxis.length,font:d.axis.tickfont,
isFirst:0===p,isLast:p===f.length-1});a.push(l)}-1!==["end","both"].indexOf(h.showticklabels)&&(l=q.tickText(h,d.value),n(l,{endAnchor:!1,xy:d.xy(d.crossLength-1),dxy:d.dxy(d.crossLength-2,1),axis:d.axis,length:d.crossAxis.length,font:d.axis.tickfont,isFirst:0===p,isLast:p===f.length-1}),a.push(l))}}},{"../../lib/extend":739,"../../plots/cartesian/axes":797}],941:[function(b,y,F){y.exports=function(q,n,p,h){var a=q[0]-n[0],f=q[1]-n[1],d=p[0]-n[0],l=p[1]-n[1];p=Math.pow(a*a+f*f,.25);q=Math.pow(d*d+
l*l,.25);a=(q*q*a-p*p*d)*h;h*=q*q*f-p*p*l;f=q*(p+q)*3;p=p*(p+q)*3;return[[n[0]+(f&&a/f),n[1]+(f&&h/f)],[n[0]-(p&&a/p),n[1]-(p&&h/p)]]}},{}],942:[function(b,y,F){var q=b("../../lib").isArrayOrTypedArray;y.exports=function(n,p,h){var a,f,d=[],l=q(n)?n.length:n,k=q(p)?p.length:p,c=q(n)?n:null,e=q(p)?p:null;c&&(a=(c.length-1)/(c[c.length-1]-c[0])/(l-1));e&&(f=(e.length-1)/(e[e.length-1]-e[0])/(k-1));var g=Infinity,m=-Infinity;for(n=0;n<k;n++){d[n]=[];var r=e?(e[n]-e[0])*f:n/(k-1);for(p=0;p<l;p++){var u=
c?(c[p]-c[0])*a:p/(l-1);u-=r*h;g=Math.min(u,g);m=Math.max(u,m);d[n][p]=u}}h=1/(m-g);a=-g*h;for(n=0;n<k;n++)for(p=0;p<l;p++)d[n][p]=h*d[n][p]+a;return d}},{"../../lib":749}],943:[function(b,y,F){function q(h,a,f){return[(2*(-.5*f[0]+1.5*a[0])+h[0])/3,(2*(-.5*f[1]+1.5*a[1])+h[1])/3]}var n=b("./catmull_rom"),p=b("../../lib").ensureArray;y.exports=function(h,a,f,d,l,k){var c,e,g,m,r=f[0].length,u=f.length,v=l?3*r-2:r,w=k?3*u-2:u;h=p(h,w);a=p(a,w);for(g=0;g<w;g++)h[g]=p(h[g],v),a[g]=p(a[g],v);for(m=e=
0;e<u;e++,m+=k?3:1){var D=h[m];var C=a[m];var x=f[e];var A=d[e];for(g=c=0;c<r;c++,g+=l?3:1)D[g]=x[c],C[g]=A[c]}if(l)for(m=e=0;e<u;e++,m+=k?3:1){c=1;for(g=3;c<r-1;c++,g+=3)D=n([f[e][c-1],d[e][c-1]],[f[e][c],d[e][c]],[f[e][c+1],d[e][c+1]],l),h[m][g-1]=D[0][0],a[m][g-1]=D[0][1],h[m][g+1]=D[1][0],a[m][g+1]=D[1][1];c=q([h[m][0],a[m][0]],[h[m][2],a[m][2]],[h[m][3],a[m][3]]);h[m][1]=c[0];a[m][1]=c[1];c=q([h[m][v-1],a[m][v-1]],[h[m][v-3],a[m][v-3]],[h[m][v-4],a[m][v-4]]);h[m][v-2]=c[0];a[m][v-2]=c[1]}if(k)for(g=
0;g<v;g++){for(m=3;m<w-3;m+=3)D=n([h[m-3][g],a[m-3][g]],[h[m][g],a[m][g]],[h[m+3][g],a[m+3][g]],k),h[m-1][g]=D[0][0],a[m-1][g]=D[0][1],h[m+1][g]=D[1][0],a[m+1][g]=D[1][1];c=q([h[0][g],a[0][g]],[h[2][g],a[2][g]],[h[3][g],a[3][g]]);h[1][g]=c[0];a[1][g]=c[1];c=q([h[w-1][g],a[w-1][g]],[h[w-3][g],a[w-3][g]],[h[w-4][g],a[w-4][g]]);h[w-2][g]=c[0];a[w-2][g]=c[1]}if(l&&k)for(m=1;m<w;m+=0===(m+1)%3?2:1){for(g=3;g<v-3;g+=3)D=n([h[m][g-3],a[m][g-3]],[h[m][g],a[m][g]],[h[m][g+3],a[m][g+3]],l),h[m][g-1]=.5*(h[m][g-
1]+D[0][0]),a[m][g-1]=.5*(a[m][g-1]+D[0][1]),h[m][g+1]=.5*(h[m][g+1]+D[1][0]),a[m][g+1]=.5*(a[m][g+1]+D[1][1]);c=q([h[m][0],a[m][0]],[h[m][2],a[m][2]],[h[m][3],a[m][3]]);h[m][1]=.5*(h[m][1]+c[0]);a[m][1]=.5*(a[m][1]+c[1]);c=q([h[m][v-1],a[m][v-1]],[h[m][v-3],a[m][v-3]],[h[m][v-4],a[m][v-4]]);h[m][v-2]=.5*(h[m][v-2]+c[0]);a[m][v-2]=.5*(a[m][v-2]+c[1])}return[h,a]}},{"../../lib":749,"./catmull_rom":941}],944:[function(b,y,F){y.exports={RELATIVE_CULL_TOLERANCE:1E-6}},{}],945:[function(b,y,F){y.exports=
function(q,n,p){return n&&p?function(h,a,f,d,l){h||(h=[]);var k;a*=3;f*=3;var c=d*d;var e=1-d,g=e*e;e=e*d*2;d=-3*g;g=3*(g-e);e=3*(e-c);var m=3*c,r=l*l,u=r*l,v=1-l,w=v*v,D=w*v;for(k=0;k<q.length;k++){var C=q[k];c=d*C[f][a]+g*C[f][a+1]+e*C[f][a+2]+m*C[f][a+3];var x=d*C[f+1][a]+g*C[f+1][a+1]+e*C[f+1][a+2]+m*C[f+1][a+3];var A=d*C[f+2][a]+g*C[f+2][a+1]+e*C[f+2][a+2]+m*C[f+2][a+3];C=d*C[f+3][a]+g*C[f+3][a+1]+e*C[f+3][a+2]+m*C[f+3][a+3];h[k]=D*c+3*(w*l*x+v*r*A)+u*C}return h}:n?function(h,a,f,d,l){h||(h=
[]);var k;a*=3;var c=d*d;var e=1-d,g=e*e;e=e*d*2;d=-3*g;g=3*(g-e);e=3*(e-c);var m=3*c,r=1-l;for(k=0;k<q.length;k++){var u=q[k];c=d*u[f][a]+g*u[f][a+1]+e*u[f][a+2]+m*u[f][a+3];u=d*u[f+1][a]+g*u[f+1][a+1]+e*u[f+1][a+2]+m*u[f+1][a+3];h[k]=r*c+l*u}return h}:p?function(h,a,f,d,l){h||(h=[]);var k;f*=3;var c=l*l,e=c*l,g=1-l,m=g*g,r=m*g;for(k=0;k<q.length;k++){var u=q[k];d=u[f][a+1]-u[f][a];var v=u[f+1][a+1]-u[f+1][a];var w=u[f+2][a+1]-u[f+2][a];u=u[f+3][a+1]-u[f+3][a];h[k]=r*d+3*(m*l*v+g*c*w)+e*u}return h}:
function(h,a,f,d,l){h||(h=[]);var k,c=1-l;for(k=0;k<q.length;k++){var e=q[k];d=e[f][a+1]-e[f][a];e=e[f+1][a+1]-e[f+1][a];h[k]=c*d+l*e}return h}}},{}],946:[function(b,y,F){y.exports=function(q,n,p){return n&&p?function(h,a,f,d,l){h||(h=[]);var k;a*=3;f*=3;var c=d*d,e=c*d,g=1-d,m=g*g,r=m*g;var u=l*l;var v=1-l,w=v*v;v=v*l*2;l=-3*w;w=3*(w-v);v=3*(v-u);var D=3*u;for(k=0;k<q.length;k++){var C=q[k];u=l*C[f][a]+w*C[f+1][a]+v*C[f+2][a]+D*C[f+3][a];var x=l*C[f][a+1]+w*C[f+1][a+1]+v*C[f+2][a+1]+D*C[f+3][a+1];
var A=l*C[f][a+2]+w*C[f+1][a+2]+v*C[f+2][a+2]+D*C[f+3][a+2];C=l*C[f][a+3]+w*C[f+1][a+3]+v*C[f+2][a+3]+D*C[f+3][a+3];h[k]=r*u+3*(m*d*x+g*c*A)+e*C}return h}:n?function(h,a,f,d,l){h||(h=[]);var k;a*=3;var c=l*l,e=c*l,g=1-l,m=g*g,r=m*g;for(k=0;k<q.length;k++){var u=q[k];d=u[f+1][a]-u[f][a];var v=u[f+1][a+1]-u[f][a+1];var w=u[f+1][a+2]-u[f][a+2];u=u[f+1][a+3]-u[f][a+3];h[k]=r*d+3*(m*l*v+g*c*w)+e*u}return h}:p?function(h,a,f,d,l){h||(h=[]);var k;f*=3;var c=1-d;var e=l*l;var g=1-l,m=g*g;g=g*l*2;l=-3*m;m=
3*(m-g);g=3*(g-e);var r=3*e;for(k=0;k<q.length;k++){var u=q[k];e=l*u[f][a]+m*u[f+1][a]+g*u[f+2][a]+r*u[f+3][a];u=l*u[f][a+1]+m*u[f+1][a+1]+g*u[f+2][a+1]+r*u[f+3][a+1];h[k]=c*e+d*u}return h}:function(h,a,f,d,l){h||(h=[]);var k,c=1-d;for(k=0;k<q.length;k++){var e=q[k];l=e[f+1][a]-e[f][a];e=e[f+1][a+1]-e[f][a+1];h[k]=c*l+d*e}return h}}},{}],947:[function(b,y,F){y.exports=function(q,n,p,h,a){var f=n-2,d=p-2;return h&&a?function(l,k,c){l||(l=[]);var e,g=Math.max(0,Math.min(Math.floor(k),f)),m=Math.max(0,
Math.min(Math.floor(c),d));k=Math.max(0,Math.min(1,k-g));var r=Math.max(0,Math.min(1,c-m));g*=3;m*=3;var u=k*k,v=u*k,w=1-k,D=w*w,C=D*w,x=r*r,A=x*r,B=1-r,t=B*B,G=t*B;for(e=0;e<q.length;e++){var H=q[e];c=C*H[m][g]+3*(D*k*H[m][g+1]+w*u*H[m][g+2])+v*H[m][g+3];var I=C*H[m+1][g]+3*(D*k*H[m+1][g+1]+w*u*H[m+1][g+2])+v*H[m+1][g+3];var J=C*H[m+2][g]+3*(D*k*H[m+2][g+1]+w*u*H[m+2][g+2])+v*H[m+2][g+3];H=C*H[m+3][g]+3*(D*k*H[m+3][g+1]+w*u*H[m+3][g+2])+v*H[m+3][g+3];l[e]=G*c+3*(t*r*I+B*x*J)+A*H}return l}:h?function(l,
k,c){l||(l=[]);var e=Math.max(0,Math.min(Math.floor(k),f)),g=Math.max(0,Math.min(Math.floor(c),d));k=Math.max(0,Math.min(1,k-e));c=Math.max(0,Math.min(1,c-g));var m;e*=3;var r=k*k,u=r*k,v=1-k,w=v*v,D=w*v,C=1-c;for(m=0;m<q.length;m++){var x=q[m];var A=C*x[g][e]+c*x[g+1][e];var B=C*x[g][e+1]+c*x[g+1][e+1];var t=C*x[g][e+2]+c*x[g+1][e+1];x=C*x[g][e+3]+c*x[g+1][e+1];l[m]=D*A+3*(w*k*B+v*r*t)+u*x}return l}:a?function(l,k,c){l||(l=[]);var e=Math.max(0,Math.min(Math.floor(k),f)),g=Math.max(0,Math.min(Math.floor(c),
d));k=Math.max(0,Math.min(1,k-e));c=Math.max(0,Math.min(1,c-g));var m;g*=3;var r=c*c,u=r*c,v=1-c,w=v*v,D=w*v,C=1-k;for(m=0;m<q.length;m++){var x=q[m];var A=C*x[g][e]+k*x[g][e+1];var B=C*x[g+1][e]+k*x[g+1][e+1];var t=C*x[g+2][e]+k*x[g+2][e+1];x=C*x[g+3][e]+k*x[g+3][e+1];l[m]=D*A+3*(w*c*B+v*r*t)+u*x}return l}:function(l,k,c){l||(l=[]);var e=Math.max(0,Math.min(Math.floor(k),f)),g=Math.max(0,Math.min(Math.floor(c),d));k=Math.max(0,Math.min(1,k-e));c=Math.max(0,Math.min(1,c-g));var m,r=1-c,u=1-k;for(m=
0;m<q.length;m++){var v=q[m];var w=u*v[g][e]+k*v[g][e+1];v=u*v[g+1][e]+k*v[g+1][e+1];l[m]=r*w+c*v}return l}}},{}],948:[function(b,y,F){var q=b("../../lib"),n=b("./xy_defaults"),p=b("./ab_defaults"),h=b("./attributes"),a=b("../../components/color/attributes");y.exports=function(f,d,l,k){function c(e,g){return q.coerce(f,d,h,e,g)}d._clipPathId="clip"+d.uid+"carpet";l=c("color",a.defaultLine);q.coerceFont(c,"font");c("carpet");p(f,d,k,c,l);d.a&&d.b?(3>d.a.length&&(d.aaxis.smoothing=0),3>d.b.length&&
(d.baxis.smoothing=0),n(f,d,c)||(d.visible=!1),d._cheater&&c("cheaterslope")):d.visible=!1}},{"../../components/color/attributes":614,"../../lib":749,"./ab_defaults":931,"./attributes":933,"./xy_defaults":957}],949:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),plot:b("./plot"),calc:b("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory noHover noSortingByValue".split(" "),
meta:{}}},{"../../plots/cartesian":810,"./attributes":933,"./calc":937,"./defaults":948,"./plot":954}],950:[function(b,y,F){y.exports=function(q,n){for(var p=q._fullData.length,h,a=0;a<p;a++){var f=q._fullData[a];if(f.index!==n.index&&"carpet"===f.type&&(h||(h=f),f.carpet===n.carpet))return f}return h}},{}],951:[function(b,y,F){y.exports=function(q,n,p){if(0===q.length)return"";var h,a=[],f=p?3:1;for(h=0;h<q.length;h+=f)a.push(q[h]+","+n[h]),p&&h<q.length-f&&(a.push("C"),a.push([q[h+1]+","+n[h+1],
q[h+2]+","+n[h+2]+" "].join(" ")));return a.join(p?"":"L")}},{}],952:[function(b,y,F){var q=b("../../lib").isArrayOrTypedArray;y.exports=function(n,p,h){var a;q(n)?n.length>p.length&&(n=n.slice(0,p.length)):n=[];for(a=0;a<p.length;a++)n[a]=h(p[a]);return n}},{"../../lib":749}],953:[function(b,y,F){y.exports=function(q,n,p,h,a,f){var d=a[0]*q.dpdx(n),l=a[1]*q.dpdy(p),k=1,c=1;f&&(c=Math.max(0,(a[0]*f[0]+a[1]*f[1])/Math.sqrt(a[0]*a[0]+a[1]*a[1])/Math.sqrt(f[0]*f[0]+f[1]*f[1])));a=180*Math.atan2(l,d)/
Math.PI;-90>a?(a+=180,k=-k):90<a&&(a-=180,k=-k);return{angle:a,flip:k,p:q.c2p(h,n,p),offsetMultplier:c}}},{}],954:[function(b,y,F){function q(m,r,u,v,w,D){v="const-"+w+"-lines";u=u.selectAll("."+v).data(D);u.enter().append("path").classed(v,!0).style("vector-effect","non-scaling-stroke");u.each(function(C){var x=C.y,A=f([],C.x,m.c2p);x=f([],x,r.c2p);A="M"+d(A,x,C.smoothing);h.select(this).attr("d",A).style("stroke-width",C.width).style("stroke",C.color).style("fill","none")});u.exit().remove()}function n(m,
r,u,v,w,D,C,x){w=D.selectAll("text."+x).data(C);w.enter().append("text").classed(x,!0);var A=0,B={};w.each(function(t,G){if("auto"===t.axis.tickangle)var H=l(v,r,u,t.xy,t.dxy);else H=(t.axis.tickangle+180)*Math.PI/180,H=l(v,r,u,t.xy,[Math.cos(H),Math.sin(H)]);G||(B={angle:H.angle,flip:H.flip});G=(t.endAnchor?-1:1)*H.flip;var I=h.select(this).attr({"text-anchor":0<G?"start":"end","data-notex":1}).call(a.font,t.font).text(t.text).call(k.convertToTspans,m),J=a.bBox(this);I.attr("transform","translate("+
H.p[0]+","+H.p[1]+") rotate("+H.angle+")translate("+t.axis.labelpadding*G+","+.3*J.height+")");A=Math.max(A,J.width+t.axis.labelpadding)});w.exit().remove();B.maxExtent=A;return B}function p(m,r,u,v,w,D,C,x,A,B,t){v=[];C.title.text&&v.push(C.title.text);r=r.selectAll("text."+t).data(v);var G=B.maxExtent;r.enter().append("text").classed(t,!0);r.each(function(){var H=l(u,x,A,w,D);-1===["start","both"].indexOf(C.showticklabels)&&(G=0);var I=C.title.font.size;G+=I+C.title.offset;var J=(B.angle+(0>B.flip?
180:0)-H.angle+450)%360;J=90<J&&270>J;var L=h.select(this);L.text(C.title.text).call(k.convertToTspans,m);J&&(G=(-k.lineCount(L)+g)*e*I-G);L.attr("transform","translate("+H.p[0]+","+H.p[1]+") rotate("+H.angle+") translate(0,"+G+")").classed("user-select-none",!0).attr("text-anchor","middle").call(a.font,C.title.font)});r.exit().remove()}var h=b("d3"),a=b("../../components/drawing"),f=b("./map_1d_array"),d=b("./makepath"),l=b("./orient_text"),k=b("../../lib/svg_text_utils"),c=b("../../lib");b=b("../../constants/alignment");
y.exports=function(m,r,u,v){var w=r.xaxis,D=r.yaxis,C=m._fullLayout._clips;c.makeTraceGroups(v,u,"trace").each(function(x){var A=h.select(this),B=x[0];x=B.trace;var t=x.aaxis,G=x.baxis,H=c.ensureSingle(A,"g","minorlayer"),I=c.ensureSingle(A,"g","majorlayer"),J=c.ensureSingle(A,"g","boundarylayer"),L=c.ensureSingle(A,"g","labellayer");A.style("opacity",x.opacity);q(w,D,I,t,"a",t._gridlines,!0);q(w,D,I,G,"b",G._gridlines,!0);q(w,D,H,t,"a",t._minorgridlines,!0);q(w,D,H,G,"b",G._minorgridlines,!0);q(w,
D,J,t,"a-boundary",t._boundarylines);q(w,D,J,G,"b-boundary",G._boundarylines);A=n(m,w,D,x,B,L,t._labels,"a-label");G=n(m,w,D,x,B,L,G._labels,"b-label");t=c.aggNums(Math.min,null,x.a);J=c.aggNums(Math.max,null,x.a);H=c.aggNums(Math.min,null,x.b);I=c.aggNums(Math.max,null,x.b);J=.5*(t+J);var E=H;var K=x.ab2xy(J,E,!0);var N=x.dxyda_rough(J,E);void 0===A.angle&&c.extendFlat(A,l(x,w,D,K,x.dxydb_rough(J,E)));p(m,L,x,B,K,N,x.aaxis,w,D,A,"a-title");J=t;E=.5*(H+I);K=x.ab2xy(J,E,!0);N=x.dxydb_rough(J,E);void 0===
G.angle&&c.extendFlat(G,l(x,w,D,K,x.dxyda_rough(J,E)));p(m,L,x,B,K,N,x.baxis,w,D,G,"b-title");L=C.select("#"+x._clipPathId);L.size()||(L=C.append("clipPath").classed("carpetclip",!0));A=c.ensureSingle(L,"path","carpetboundary");I=B.clipsegments;J=[];for(H=0;H<I.length;H++)B=I[H],G=f([],B.x,w.c2p),t=f([],B.y,D.c2p),J.push(d(G,t,B.bicubic));B="M"+J.join("L")+"Z";L.attr("id",x._clipPathId);A.attr("d",B)})};var e=b.LINE_SPACING,g=(1-b.MID_SHIFT)/e+1},{"../../components/drawing":637,"../../constants/alignment":717,
"../../lib":749,"../../lib/svg_text_utils":773,"./makepath":951,"./map_1d_array":952,"./orient_text":953,d3:169}],955:[function(b,y,F){var q=b("./constants"),n=b("../../lib/search").findBin,p=b("./compute_control_points"),h=b("./create_spline_evaluator"),a=b("./create_i_derivative_evaluator"),f=b("./create_j_derivative_evaluator");y.exports=function(d){var l=d._a,k=d._b,c=l.length,e=k.length,g=d.aaxis,m=d.baxis,r=l[0],u=l[c-1],v=k[0],w=k[e-1],D=l[l.length-1]-l[0],C=k[k.length-1]-k[0],x=D*q.RELATIVE_CULL_TOLERANCE,
A=C*q.RELATIVE_CULL_TOLERANCE;r-=x;u+=x;v-=A;w+=A;d.isVisible=function(B,t){return B>r&&B<u&&t>v&&t<w};d.isOccluded=function(B,t){return B<r||B>u||t<v||t>w};d.setScale=function(){var B=p(d._xctrl,d._yctrl,d._x,d._y,g.smoothing,m.smoothing);d._xctrl=B[0];d._yctrl=B[1];d.evalxy=h([d._xctrl,d._yctrl],c,e,g.smoothing,m.smoothing);d.dxydi=a([d._xctrl,d._yctrl],g.smoothing,m.smoothing);d.dxydj=f([d._xctrl,d._yctrl],g.smoothing,m.smoothing)};d.i2a=function(B){var t=Math.max(0,Math.floor(B[0]),c-2);B=B[0]-
t;return(1-B)*l[t]+B*l[t+1]};d.j2b=function(B){var t=Math.max(0,Math.floor(B[1]),c-2);B=B[1]-t;return(1-B)*k[t]+B*k[t+1]};d.ij2ab=function(B){return[d.i2a(B[0]),d.j2b(B[1])]};d.a2i=function(B){var t=Math.max(0,Math.min(n(B,l),c-2)),G=l[t];return Math.max(0,Math.min(c-1,t+(B-G)/(l[t+1]-G)))};d.b2j=function(B){var t=Math.max(0,Math.min(n(B,k),e-2)),G=k[t];return Math.max(0,Math.min(e-1,t+(B-G)/(k[t+1]-G)))};d.ab2ij=function(B){return[d.a2i(B[0]),d.b2j(B[1])]};d.i2c=function(B,t){return d.evalxy([],
B,t)};d.ab2xy=function(B,t,G){if(!G&&(B<l[0]||B>l[c-1]|t<k[0]||t>k[e-1]))return[!1,!1];var H=d.a2i(B),I=d.b2j(t),J=d.evalxy([],H,I);if(G){var L=G=0,E=[],K;B<l[0]?(H=K=0,G=(B-l[0])/(l[1]-l[0])):B>l[c-1]?(K=c-2,H=1,G=(B-l[c-1])/(l[c-1]-l[c-2])):(K=Math.max(0,Math.min(c-2,Math.floor(H))),H-=K);t<k[0]?(I=B=0,L=(t-k[0])/(k[1]-k[0])):t>k[e-1]?(B=e-2,I=1,L=(t-k[e-1])/(k[e-1]-k[e-2])):(B=Math.max(0,Math.min(e-2,Math.floor(I))),I-=B);G&&(d.dxydi(E,K,B,H,I),J[0]+=E[0]*G,J[1]+=E[1]*G);L&&(d.dxydj(E,K,B,H,I),
J[0]+=E[0]*L,J[1]+=E[1]*L)}return J};d.c2p=function(B,t,G){return[t.c2p(B[0]),G.c2p(B[1])]};d.p2x=function(B,t,G){return[t.p2c(B[0]),G.p2c(B[1])]};d.dadi=function(B){B=Math.max(0,Math.min(l.length-2,B));return l[B+1]-l[B]};d.dbdj=function(B){B=Math.max(0,Math.min(k.length-2,B));return k[B+1]-k[B]};d.dxyda=function(B,t,G,H){t=d.dxydi(null,B,t,G,H);B=d.dadi(B,G);return[t[0]/B,t[1]/B]};d.dxydb=function(B,t,G,H){B=d.dxydj(null,B,t,G,H);t=d.dbdj(t,H);return[B[0]/t,B[1]/t]};d.dxyda_rough=function(B,t,G){G=
D*(G||.1);var H=d.ab2xy(B+G,t,!0);B=d.ab2xy(B-G,t,!0);return[.5*(H[0]-B[0])/G,.5*(H[1]-B[1])/G]};d.dxydb_rough=function(B,t,G){G=C*(G||.1);var H=d.ab2xy(B,t+G,!0);B=d.ab2xy(B,t-G,!0);return[.5*(H[0]-B[0])/G,.5*(H[1]-B[1])/G]};d.dpdx=function(B){return B._m};d.dpdy=function(B){return B._m}}},{"../../lib/search":768,"./compute_control_points":943,"./constants":944,"./create_i_derivative_evaluator":945,"./create_j_derivative_evaluator":946,"./create_spline_evaluator":947}],956:[function(b,y,F){var q=
b("../../lib");y.exports=function(n,p,h){var a,f,d=[],l=[],k=n[0].length,c=n.length,e=0;for(a=0;a<k;a++)for(f=0;f<c;f++){if(void 0===n[f][a]){d.push(a);l.push(f);var g=n[f];var m=a,r=void 0,u=0,v=0;0<a&&void 0!==(r=n[f][a-1])&&(v++,u+=r);a<k-1&&void 0!==(r=n[f][a+1])&&(v++,u+=r);0<f&&void 0!==(r=n[f-1][a])&&(v++,u+=r);f<c-1&&void 0!==(r=n[f+1][a])&&(v++,u+=r);g[m]=u/Math.max(1,v)}e=Math.max(e,Math.abs(n[f][a]))}if(!d.length)return n;r=0;u=d.length;do{for(g=m=0;g<u;g++){a=d[g];f=l[g];var w=v=0;if(0===
a){var D=Math.min(k-1,2);var C=p[D];var x=p[1];D=n[f][D];var A=n[f][1];w+=A+(A-D)*(p[0]-x)/(x-C);v++}else a===k-1&&(D=Math.max(0,k-3),C=p[D],x=p[k-2],D=n[f][D],A=n[f][k-2],w+=A+(A-D)*(p[k-1]-x)/(x-C),v++);(0===a||a===k-1)&&0<f&&f<c-1&&(C=h[f+1]-h[f],x=h[f]-h[f-1],w+=(x*n[f+1][a]+C*n[f-1][a])/(x+C),v++);0===f?(D=Math.min(c-1,2),C=h[D],x=h[1],D=n[D][a],A=n[1][a],w+=A+(A-D)*(h[0]-x)/(x-C),v++):f===c-1&&(D=Math.max(0,c-3),C=h[D],x=h[c-2],D=n[D][a],A=n[c-2][a],w+=A+(A-D)*(h[c-1]-x)/(x-C),v++);(0===f||
f===c-1)&&0<a&&a<k-1&&(C=p[a+1]-p[a],x=p[a]-p[a-1],w+=(x*n[f][a+1]+C*n[f][a-1])/(x+C),v++);if(v)w/=v;else{w=p[a+1]-p[a];C=p[a]-p[a-1];x=h[f+1]-h[f];D=h[f]-h[f-1];A=w*C*(w+C);var B=x*D*(x+D);w=(A*(D*n[f+1][a]+x*n[f-1][a])+B*(C*n[f][a+1]+w*n[f][a-1]))/(B*(C+w)+A*(D+x))}w-=n[f][a];C=w/e;m+=C*C;v=v?0:.85;n[f][a]+=w*(1+v)}m=Math.sqrt(m)}while(100>r++&&1E-5<m);q.log("Smoother converged to",m,"after",r,"iterations");return n}},{"../../lib":749}],957:[function(b,y,F){var q=b("../../lib").isArray1D;y.exports=
function(n,p,h){var a=(n=h("x"))&&n.length,f=(h=h("y"))&&h.length;if(!a&&!f)return!1;p._cheater=!n;a&&!q(n)||f&&!q(h)?p._length=null:(n=a?n.length:Infinity,f&&(n=Math.min(n,h.length)),p.a&&p.a.length&&(n=Math.min(n,p.a.length)),p.b&&p.b.length&&(n=Math.min(n,p.b.length)),p._length=n);return!0}},{"../../lib":749}],958:[function(b,y,F){F=b("../../plots/template_attributes").hovertemplateAttrs;var q=b("../scattergeo/attributes"),n=b("../../components/colorscale/attributes"),p=b("../../plots/attributes"),
h=b("../../components/color/attributes").defaultLine;b=b("../../lib/extend").extendFlat;var a=q.marker.line;y.exports=b({locations:{valType:"data_array",editType:"calc"},locationmode:q.locationmode,z:{valType:"data_array",editType:"calc"},geojson:b({},q.geojson,{}),featureidkey:q.featureidkey,text:b({},q.text,{}),hovertext:b({},q.hovertext,{}),marker:{line:{color:b({},a.color,{dflt:h}),width:b({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},
editType:"calc"},selected:{marker:{opacity:q.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:q.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:b({},p.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:F(),showlegend:b({},p.showlegend,{dflt:!1})},n("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":614,"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,
"../../plots/template_attributes":875,"../scattergeo/attributes":1196}],959:[function(b,y,F){function q(d){return d&&"string"===typeof d}var n=b("fast-isnumeric"),p=b("../../constants/numerical").BADNUM,h=b("../../components/colorscale/calc"),a=b("../scatter/arrays_to_calcdata"),f=b("../scatter/calc_selection");y.exports=function(d,l){var k=l._length,c=Array(k);var e=l.geojson?function(v){return q(v)||n(v)}:q;for(var g=0;g<k;g++){var m=c[g]={},r=l.locations[g],u=l.z[g];e(r)&&n(u)?(m.loc=r,m.z=u):
(m.loc=null,m.z=p);m.index=g}a(c,l);h(d,l,{vals:l.z,containerStr:"",cLetter:"z"});f(c,l);return c}},{"../../components/colorscale/calc":623,"../../constants/numerical":724,"../scatter/arrays_to_calcdata":1154,"../scatter/calc_selection":1157,"fast-isnumeric":241}],960:[function(b,y,F){var q=b("../../lib"),n=b("../../components/colorscale/defaults"),p=b("./attributes");y.exports=function(h,a,f,d){function l(e,g){return q.coerce(h,a,p,e,g)}f=l("locations");var k=l("z");if(f&&f.length&&q.isArrayOrTypedArray(k)&&
k.length){a._length=Math.min(f.length,k.length);f=l("geojson");if("string"===typeof f&&""!==f||q.isPlainObject(f))var c="geojson-id";"geojson-id"===l("locationmode",c)&&l("featureidkey");l("text");l("hovertext");l("hovertemplate");l("marker.line.width")&&l("marker.line.color");l("marker.opacity");n(h,a,d,l,{prefix:"",cLetter:"z"});q.coerceSelectionMarkerOpacity(a,l)}else a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":958}],961:[function(b,y,F){y.exports=
function(q,n,p,h,a){q.location=n.location;q.z=n.z;n=h[a];n.fIn&&n.fIn.properties&&(q.properties=n.fIn.properties);q.ct=n.ct;return q}},{}],962:[function(b,y,F){var q=b("../../plots/cartesian/axes"),n=b("./attributes"),p=b("../../lib").fillText;y.exports=function(h,a,f){var d=h.cd,l=d[0].trace,k=h.subplot,c,e;for(c=0;c<d.length;c++){var g=d[c];var m=!1;if(g._polygons){for(e=0;e<g._polygons.length;e++)g._polygons[e].contains([a,f])&&(m=!m),g._polygons[e].contains([a+360,f])&&(m=!m);if(m)break}}if(m&&
g)return h.x0=h.x1=h.xa.c2p(g.ct),h.y0=h.y1=h.ya.c2p(g.ct),h.index=g.index,h.location=g.loc,h.z=g.z,h.zLabel=q.tickText(k.mockAxis,k.mockAxis.c2l(g.z),"hover").text,h.hovertemplate=g.hovertemplate,a=g,l.hovertemplate||(d=a.hi||l.hoverinfo,f=String(a.loc),c="all"===d?n.hoverinfo.flags:d.split("+"),d=-1!==c.indexOf("name"),k=-1!==c.indexOf("location"),g=-1!==c.indexOf("z"),c=-1!==c.indexOf("text"),e=[],!d&&k?h.nameOverride=f:(d&&(h.nameOverride=l.name),k&&e.push(f)),g&&e.push(h.zLabel),c&&p(a,l,e),
h.extraText=e.join("\x3cbr\x3e")),[h]}},{"../../lib":749,"../../plots/cartesian/axes":797,"./attributes":958}],963:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"choropleth",basePlotModule:b("../../plots/geo"),
categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":829,"../heatmap/colorbar":1037,"./attributes":958,"./calc":959,"./defaults":960,"./event_data":961,"./hover":962,"./plot":964,"./select":965,"./style":966}],964:[function(b,y,F){var q=b("d3"),n=b("../../lib"),p=b("../../lib/geo_location_utils"),h=b("../../lib/topojson_utils").getTopojsonFeatures,a=b("../../plots/cartesian/autorange").findExtremes,f=b("./style").style;y.exports={calcGeoJSON:function(d,l){var k=d[0].trace;l=l[k.geo];
var c=l._subplot,e=k.locationmode,g=k._length,m="geojson-id"===e?p.extractTraceFeature(d):h(k,c.topojson);c=[];for(var r=[],u=0;u<g;u++){var v=d[u],w="geojson-id"===e?v.fOut:p.locationToFeature(e,v.loc,m);w?(v.geojson=w,v.ct=w.properties.ct,v._polygons=p.feature2polygons(w),v=p.computeBbox(w),c.push(v[0],v[2]),r.push(v[1],v[3])):v.geojson=null}"geojson"===l.fitbounds&&"geojson-id"===e&&(d=p.computeBbox(p.getTraceGeojson(k)),c=[d[0],d[2]],r=[d[1],d[3]]);d={padded:!0};k._extremes.lon=a(l.lonaxis._ax,
c,d);k._extremes.lat=a(l.lataxis._ax,r,d)},plot:function(d,l,k){l=l.layers.backplot.select(".choroplethlayer");n.makeTraceGroups(l,k,"trace choropleth").each(function(c){var e=q.select(this).selectAll("path.choroplethlocation").data(n.identity);e.enter().append("path").classed("choroplethlocation",!0);e.exit().remove();f(d,c)})}}},{"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/topojson_utils":776,"../../plots/cartesian/autorange":796,"./style":966,d3:169}],965:[function(b,y,F){y.exports=
function(q,n){var p=q.cd,h=q.xaxis,a=q.yaxis,f=[],d,l;if(!1===n)for(d=0;d<p.length;d++)p[d].selected=0;else for(d=0;d<p.length;d++){var k=p[d];if(l=k.ct){var c=h.c2p(l);var e=a.c2p(l);n.contains([c,e],null,d,q)?(f.push({pointNumber:d,lon:l[0],lat:l[1]}),k.selected=1):k.selected=0}}return f}},{}],966:[function(b,y,F){function q(f,d){var l=d[0].trace;d=d[0].node3.selectAll(".choroplethlocation");var k=l.marker||{},c=k.line||{},e=a.makeColorScaleFuncFromTrace(l);d.each(function(g){n.select(this).attr("fill",
e(g.z)).call(p.stroke,g.mlc||c.color).call(h.dashLine,"",g.mlw||c.width||0).style("opacity",k.opacity)});h.selectedPointStyle(d,l,f)}var n=b("d3"),p=b("../../components/color"),h=b("../../components/drawing"),a=b("../../components/colorscale");y.exports={style:function(f,d){d&&q(f,d)},styleOnSelect:function(f,d){var l=d[0].node3,k=d[0].trace;k.selectedpoints?h.selectedPointStyle(l.selectAll(".choroplethlocation"),k,f):q(f,d)}}},{"../../components/color":615,"../../components/colorscale":627,"../../components/drawing":637,
d3:169}],967:[function(b,y,F){F=b("../choropleth/attributes");var q=b("../../components/colorscale/attributes"),n=b("../../plots/template_attributes").hovertemplateAttrs,p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;y.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},F.featureidkey,{}),below:{valType:"string",editType:"plot"},text:F.text,hovertext:F.hovertext,marker:{line:{color:b({},
F.marker.line.color,{editType:"plot"}),width:b({},F.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},F.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},F.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},F.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:F.hoverinfo,hovertemplate:n({},{keys:["properties"]}),showlegend:b({},p.showlegend,{dflt:!1})},
q("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../choropleth/attributes":958}],968:[function(b,y,F){function q(l){var k=l[0].trace,c=k._opts;if(k.selectedpoints){k=a.makeSelectedPointStyleFns(k);for(var e=0;e<l.length;e++){var g=l[e];g.fOut&&(g.fOut.properties.mo2=k.selectedOpacityFn(g))}l={type:"identity",property:"mo2"}}else l=p.isArrayOrTypedArray(k.marker.opacity)?
{type:"identity",property:"mo"}:k.marker.opacity;p.extendFlat(c.fill.paint,{"fill-opacity":l});p.extendFlat(c.line.paint,{"line-opacity":l});return c}var n=b("fast-isnumeric"),p=b("../../lib"),h=b("../../components/colorscale"),a=b("../../components/drawing"),f=b("../../lib/geojson_utils").makeBlank,d=b("../../lib/geo_location_utils");y.exports={convert:function(l){var k=l[0].trace,c=!0===k.visible&&0!==k._length,e={layout:{visibility:"none"},paint:{}},g={layout:{visibility:"none"},paint:{}},m=k._opts=
{fill:e,line:g,geojson:f()};if(!c)return m;c=d.extractTraceFeature(l);if(!c)return m;var r=h.makeColorScaleFuncFromTrace(k),u=k.marker;k=u.line||{};var v;p.isArrayOrTypedArray(u.opacity)&&(v=function(t){t=t.mo;return n(t)?+p.constrain(t,0,1):0});var w;p.isArrayOrTypedArray(k.color)&&(w=function(t){return t.mlc});var D;p.isArrayOrTypedArray(k.width)&&(D=function(t){return t.mlw});for(var C=0;C<l.length;C++){var x=l[C],A=x.fOut;if(A){var B=A.properties;B.fc=r(x.z);v&&(B.mo=v(x));w&&(B.mlc=w(x));D&&
(B.mlw=D(x));x.ct=B.ct;x._polygons=d.feature2polygons(A)}}v=v?{type:"identity",property:"mo"}:u.opacity;p.extendFlat(e.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":v});p.extendFlat(g.paint,{"line-color":w?{type:"identity",property:"mlc"}:k.color,"line-width":D?{type:"identity",property:"mlw"}:k.width,"line-opacity":v});e.layout.visibility="visible";g.layout.visibility="visible";m.geojson={type:"FeatureCollection",features:c};q(l);return m},convertOnSelect:q}},{"../../components/colorscale":627,
"../../components/drawing":637,"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/geojson_utils":743,"fast-isnumeric":241}],969:[function(b,y,F){var q=b("../../lib"),n=b("../../components/colorscale/defaults"),p=b("./attributes");y.exports=function(h,a,f,d){function l(e,g){return q.coerce(h,a,p,e,g)}f=l("locations");var k=l("z"),c=l("geojson");q.isArrayOrTypedArray(f)&&f.length&&q.isArrayOrTypedArray(k)&&k.length&&("string"===typeof c&&""!==c||q.isPlainObject(c))?(l("featureidkey"),a._length=
Math.min(f.length,k.length),l("below"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),n(h,a,d,l,{prefix:"",cLetter:"z"}),q.coerceSelectionMarkerOpacity(a,l)):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":967}],970:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../choropleth/calc"),plot:b("./plot"),hoverPoints:b("../choropleth/hover"),
eventData:b("../choropleth/event_data"),selectPoints:b("../choropleth/select"),styleOnSelect:function(q,n){n&&n[0].trace._glTrace.updateOnSelect(n)},getBelow:function(q,n){q=n.getMapLayers();for(n=q.length-2;0<=n;n--){var p=q[n].id;if("string"===typeof p&&0===p.indexOf("water"))for(var h=n+1;h<q.length;h++)if(p=q[h].id,"string"===typeof p&&-1===p.indexOf("plotly-"))return p}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],
meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":854,"../choropleth/calc":959,"../choropleth/event_data":961,"../choropleth/hover":962,"../choropleth/select":965,"../heatmap/colorbar":1037,"./attributes":967,"./defaults":969,"./plot":971}],971:[function(b,y,F){function q(a,f){this.type="choroplethmapbox";this.subplot=a;this.uid=f;this.sourceId="source-"+f;this.layerList=[["fill",h+f+"-fill"],["line",h+f+"-line"]];this.below=null}var n=b("./convert").convert,p=b("./convert").convertOnSelect,
h=b("../../plots/mapbox/constants").traceLayerPrefix;b=q.prototype;b.update=function(a){this._update(n(a))};b.updateOnSelect=function(a){this._update(p(a))};b._update=function(a){var f=this.subplot,d=this.layerList,l=f.belowLookup["trace-"+this.uid];f.map.getSource(this.sourceId).setData(a.geojson);l!==this.below&&(this._removeLayers(),this._addLayers(a,l),this.below=l);for(l=0;l<d.length;l++){var k=d[l],c=k[1];k=a[k[0]];f.setOptions(c,"setLayoutProperty",k.layout);"visible"===k.layout.visibility&&
f.setOptions(c,"setPaintProperty",k.paint)}};b._addLayers=function(a,f){for(var d=this.subplot,l=this.layerList,k=this.sourceId,c=0;c<l.length;c++){var e=l[c],g=e[0],m=a[g];d.addLayer({type:g,id:e[1],source:k,layout:m.layout,paint:m.paint},f)}};b._removeLayers=function(){for(var a=this.subplot.map,f=this.layerList,d=f.length-1;0<=d;d--)a.removeLayer(f[d][1])};b.dispose=function(){var a=this.subplot.map;this._removeLayers();a.removeSource(this.sourceId)};y.exports=function(a,f){var d=f[0].trace,l=
new q(a,d.uid),k=l.sourceId,c=n(f);d=l.below=a.belowLookup["trace-"+d.uid];a.map.addSource(k,{type:"geojson",data:c.geojson});l._addLayers(c,d);return f[0].trace._glTrace=l}},{"../../plots/mapbox/constants":852,"./convert":968}],972:[function(b,y,F){F=b("../../components/colorscale/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../mesh3d/attributes"),p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var h={x:{valType:"data_array",editType:"calc+clearAxisTypes"},
y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,
editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:q({editType:"calc"},{keys:["norm"]}),showlegend:b({},p.showlegend,{dflt:!1})};b(h,F("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){h[a]=n[a]});h.hoverinfo=b({},p.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});h.transforms=void 0;y.exports=h},{"../../components/colorscale/attributes":622,
"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../mesh3d/attributes":1096}],973:[function(b,y,F){var q=b("../../components/colorscale/calc");y.exports=function(n,p){for(var h=p.u,a=p.v,f=p.w,d=Math.min(p.x.length,p.y.length,p.z.length,h.length,a.length,f.length),l=-Infinity,k=Infinity,c=0;c<d;c++){var e=h[c],g=a[c],m=f[c];e=Math.sqrt(e*e+g*g+m*m);l=Math.max(l,e);k=Math.min(k,e)}p._len=d;p._normMax=l;q(n,p,{vals:[k,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],
974:[function(b,y,F){function q(g,m){this.scene=g;this.uid=m;this.data=this.mesh=null}function n(g,m){function r(D,C){var x=u[C],A=v[k[C]];return a(D,function(B){return x.d2l(B)*A})}var u=g.fullSceneLayout,v=g.dataScale;g={};g.vectors=l(r(m.u,"xaxis"),r(m.v,"yaxis"),r(m.w,"zaxis"),m._len);g.positions=l(r(m.x,"xaxis"),r(m.y,"yaxis"),r(m.z,"zaxis"),m._len);var w=d(m);g.colormap=f(m);g.vertexIntensityBounds=[w.min/m._normMax,w.max/m._normMax];g.coneOffset=c[m.anchor];g.coneSize="scaled"===m.sizemode?
m.sizeref||.5:m.sizeref&&m._normMax?m.sizeref/m._normMax:.5;g=p(g);w=m.lightposition;g.lightPosition=[w.x,w.y,w.z];g.ambient=m.lighting.ambient;g.diffuse=m.lighting.diffuse;g.specular=m.lighting.specular;g.roughness=m.lighting.roughness;g.fresnel=m.lighting.fresnel;g.opacity=m.opacity;m._pad=e[m.anchor]*g.vectorScale*g.coneScale*m._normMax;return g}var p=b("gl-cone3d"),h=b("gl-cone3d").createConeMesh,a=b("../../lib").simpleMap,f=b("../../lib/gl_format_color").parseColorScale,d=b("../../components/colorscale").extractOpts,
l=b("../../plots/gl3d/zip3");b=q.prototype;b.handlePick=function(g){if(g.object===this.mesh){var m=g.index=g.data.index,r=this.data.u[m],u=this.data.v[m],v=this.data.w[m];g.traceCoordinate=[this.data.x[m],this.data.y[m],this.data.z[m],r,u,v,Math.sqrt(r*r+u*u+v*v)];r=this.data.hovertext||this.data.text;Array.isArray(r)&&void 0!==r[m]?g.textLabel=r[m]:r&&(g.textLabel=r);return!0}};var k={xaxis:0,yaxis:1,zaxis:2},c={tip:1,tail:0,cm:.25,center:.5},e={tip:1,tail:1,cm:.75,center:.5};b.update=function(g){this.data=
g;g=n(this.scene,g);this.mesh.update(g)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};y.exports=function(g,m){var r=g.glplot.gl,u=n(g,m);r=h(r,u);u=new q(g,m.uid);u.mesh=r;u.data=m;r._trace=u;g.glplot.add(r);return u}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/gl3d/zip3":850,"gl-cone3d":259}],975:[function(b,y,F){var q=b("../../lib"),n=b("../../components/colorscale/defaults"),p=b("./attributes");y.exports=function(h,
a,f,d){function l(r,u){return q.coerce(h,a,p,r,u)}f=l("u");var k=l("v"),c=l("w"),e=l("x"),g=l("y"),m=l("z");f&&f.length&&k&&k.length&&c&&c.length&&e&&e.length&&g&&g.length&&m&&m.length?(l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),n(h,a,d,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),a._length=null):a.visible=
!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":972}],976:[function(b,y,F){y.exports={moduleType:"trace",name:"cone",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),eventData:function(q,n){q.norm=n.traceCoordinate[6];return q},meta:{}}},{"../../plots/gl3d":839,"./attributes":972,"./calc":973,"./convert":974,"./defaults":975}],
977:[function(b,y,F){F=b("../heatmap/attributes");var q=b("../scatter/attributes"),n=b("../../components/colorscale/attributes"),p=b("../../components/drawing/attributes").dash,h=b("../../plots/font_attributes"),a=b("../../lib/extend").extendFlat,f=b("../../constants/filter_ops"),d=f.COMPARISON_OPS2;f=f.INTERVAL_OPS;b("../../constants/docs");b=q.line;y.exports=a({z:F.z,x:F.x,x0:F.x0,dx:F.dx,y:F.y,y0:F.y0,dy:F.dy,text:F.text,hovertext:F.hovertext,transpose:F.transpose,xtype:F.xtype,ytype:F.ytype,zhoverformat:F.zhoverformat,
hovertemplate:F.hovertemplate,hoverongaps:F.hoverongaps,connectgaps:a({},F.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},
end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:h({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",
values:[].concat(d).concat(f),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a({},b.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:p,smoothing:a({},b.smoothing,{}),editType:"plot"}},n("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../constants/docs":719,"../../constants/filter_ops":720,
"../../lib/extend":739,"../../plots/font_attributes":825,"../heatmap/attributes":1034,"../scatter/attributes":1155}],978:[function(b,y,F){var q=b("../../components/colorscale"),n=b("../heatmap/calc"),p=b("./set_contours"),h=b("./end_plus");y.exports=function(a,f){var d=n(a,f),l=d[0].z;p(f,l);var k=f.contours,c=q.extractOpts(f);"heatmap"===k.coloring&&c.auto&&!1===f.autocontour?(l=k.start,c=h(k),k=k.size||1,c=Math.floor((c-l)/k)+1,isFinite(k)||(c=k=1),l-=k/2,k=[l,l+c*k]):k=l;q.calc(a,f,{vals:k,cLetter:"z"});
return d}},{"../../components/colorscale":627,"../heatmap/calc":1035,"./end_plus":988,"./set_contours":996}],979:[function(b,y,F){y.exports=function(q,n){var p=q[0],h=p.z,a;switch(n.type){case "levels":p=Math.min(h[0][0],h[0][1]);for(a=0;a<q.length;a++){var f=q[a];f.prefixBoundary=!f.edgepaths.length&&(p>f.level||f.starts.length&&p===f.level)}break;case "constraint":if(p.prefixBoundary=!1,!p.edgepaths.length){var d=p.x.length,l=p.y.length;q=-Infinity;f=Infinity;for(a=0;a<l;a++)f=Math.min(f,h[a][0]),
f=Math.min(f,h[a][d-1]),q=Math.max(q,h[a][0]),q=Math.max(q,h[a][d-1]);for(a=1;a<d-1;a++)f=Math.min(f,h[0][a]),f=Math.min(f,h[l-1][a]),q=Math.max(q,h[0][a]),q=Math.max(q,h[l-1][a]);a=n.value;switch(n._operation){case "\x3e":a>q&&(p.prefixBoundary=!0);break;case "\x3c":if(a<f||p.starts.length&&a===f)p.prefixBoundary=!0;break;case "[]":n=Math.min(a[0],a[1]);a=Math.max(a[0],a[1]);if(a<f||n>q||p.starts.length&&a===f)p.prefixBoundary=!0;break;case "][":n=Math.min(a[0],a[1]),a=Math.max(a[0],a[1]),n<f&&a>
q&&(p.prefixBoundary=!0)}}}}},{}],980:[function(b,y,F){var q=b("../../components/colorscale"),n=b("./make_color_map"),p=b("./end_plus");y.exports={min:"zmin",max:"zmax",calc:function(h,a,f){h=a.contours;var d=a.line,l=h.size||1,k=h.coloring,c=n(a,{isColorbar:!0});"heatmap"===k?(a=q.extractOpts(a),f._fillgradient=a.reversescale?q.flipScale(a.colorscale):a.colorscale,f._zrange=[a.min,a.max]):"fill"===k&&(f._fillcolor=c);f._line={color:"lines"===k?c:d.color,width:!1!==h.showlines?d.width:0,dash:d.dash};
f._levels={start:h.start,end:p(h),size:l}}}},{"../../components/colorscale":627,"./end_plus":988,"./make_color_map":993}],981:[function(b,y,F){y.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,
LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],982:[function(b,y,F){var q=b("fast-isnumeric"),n=b("./label_defaults");F=b("../../components/color");var p=F.addOpacity,h=F.opacity;b=b("../../constants/filter_ops");var a=b.CONSTRAINT_REDUCTION,f=b.COMPARISON_OPS2;y.exports=function(d,l,k,c,e,g){var m=l.contours,r=k("contours.operation");m._operation=a[r];if(-1===
f.indexOf(m.operation))if(k("contours.value",[0,1]),Array.isArray(m.value))if(2<m.value.length)m.value=m.value.slice(2);else if(0===m.length)m.value=[0,1];else if(2>m.length){var u=parseFloat(m.value[0]);m.value=[u,u+1]}else m.value=[parseFloat(m.value[0]),parseFloat(m.value[1])];else q(m.value)&&(u=parseFloat(m.value),m.value=[u,u+1]);else k("contours.value",0),q(m.value)||(Array.isArray(m.value)?m.value=parseFloat(m.value[0]):m.value=0);if("\x3d"===r)m=m.showlines=!0;else{m=k("contours.showlines");
var v=k("fillcolor",p((d.line||{}).color||e,.5))}if(m){d=v&&h(v)?p(l.fillcolor,1):e;var w=k("line.color",d);k("line.width",2);k("line.dash")}k("line.smoothing");n(k,c,w,g)}},{"../../components/color":615,"../../constants/filter_ops":720,"./label_defaults":992,"fast-isnumeric":241}],983:[function(b,y,F){function q(f,d){function l(e){return a(e)?+e:null}var k=Array.isArray(d),c;-1!==h.COMPARISON_OPS2.indexOf(f)?c=k?l(d[0]):l(d):-1!==h.INTERVAL_OPS.indexOf(f)?c=k?[l(d[0]),l(d[1])]:[l(d),l(d)]:-1!==h.SET_OPS.indexOf(f)&&
(c=k?d.map(l):[l(d)]);return c}function n(f){return function(d){d=q(f,d);var l=Math.min(d[0],d[1]);d=Math.max(d[0],d[1]);return{start:l,end:d,size:d-l}}}function p(f){return function(d){d=q(f,d);return{start:d,end:Infinity,size:Infinity}}}var h=b("../../constants/filter_ops"),a=b("fast-isnumeric");y.exports={"[]":n("[]"),"][":n("]["),"\x3e":p("\x3e"),"\x3c":p("\x3c"),"\x3d":p("\x3d")}},{"../../constants/filter_ops":720,"fast-isnumeric":241}],984:[function(b,y,F){y.exports=function(q,n,p,h){q=h("contours.start");
h=h("contours.end");h=!1===q||!1===h;q=p("contours.size");(h?!(n.autocontour=!0):!p("autocontour",!1))&&q||p("ncontours")}},{}],985:[function(b,y,F){function q(p){return n.extendFlat({},p,{edgepaths:n.extendDeep([],p.edgepaths),paths:n.extendDeep([],p.paths),starts:n.extendDeep([],p.starts)})}var n=b("../../lib");y.exports=function(p,h){var a=function(l){return l.reverse()},f=function(l){return l};switch(h){case "\x3d":case "\x3c":return p;case "\x3e":1!==p.length&&n.warn("Contour data invalid for the specified inequality operation.");
var d=p[0];for(h=0;h<d.edgepaths.length;h++)d.edgepaths[h]=a(d.edgepaths[h]);for(h=0;h<d.paths.length;h++)d.paths[h]=a(d.paths[h]);for(h=0;h<d.starts.length;h++)d.starts[h]=a(d.starts[h]);return p;case "][":h=a,a=f,f=h;case "[]":2!==p.length&&n.warn("Contour data invalid for the specified inequality range operation.");d=q(p[0]);p=q(p[1]);for(h=0;h<d.edgepaths.length;h++)d.edgepaths[h]=a(d.edgepaths[h]);for(h=0;h<d.paths.length;h++)d.paths[h]=a(d.paths[h]);for(h=0;h<d.starts.length;h++)d.starts[h]=
a(d.starts[h]);for(;p.edgepaths.length;)d.edgepaths.push(f(p.edgepaths.shift()));for(;p.paths.length;)d.paths.push(f(p.paths.shift()));for(;p.starts.length;)d.starts.push(f(p.starts.shift()));return[d]}}},{"../../lib":749}],986:[function(b,y,F){var q=b("../../lib"),n=b("../heatmap/xyz_defaults"),p=b("./constraint_defaults"),h=b("./contours_defaults"),a=b("./style_defaults"),f=b("./attributes");y.exports=function(d,l,k,c){function e(r,u){return q.coerce(d,l,f,r,u)}function g(r){return q.coerce2(d,
l,f,r)}if(n(d,l,e,c)){e("text");e("hovertext");e("hovertemplate");e("hoverongaps");var m="constraint"===e("contours.type");e("connectgaps",q.isArray1D(l.z));m?p(d,l,e,c,k):(h(d,l,e,g),a(d,l,e,c))}else l.visible=!1}},{"../../lib":749,"../heatmap/xyz_defaults":1048,"./attributes":977,"./constraint_defaults":982,"./contours_defaults":984,"./style_defaults":998}],987:[function(b,y,F){var q=b("../../lib"),n=b("./constraint_mapping"),p=b("./end_plus");y.exports=function(h,a,f){var d="constraint"===h.type?
n[h._operation](h.value):h,l=d.size,k=[],c=p(d),e=f.trace._carpetTrace;a=e?{xaxis:e.aaxis,yaxis:e.baxis,x:f.a,y:f.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:f.x,y:f.y};for(d=d.start;d<c;d+=l)if(k.push(q.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:f.z,smoothing:f.trace.line.smoothing},a)),1E3<k.length){q.warn("Too many contours, clipping at 1000",h);break}return k}},{"../../lib":749,"./constraint_mapping":983,"./end_plus":988}],988:[function(b,y,F){y.exports=function(q){return q.end+
q.size/1E6}},{}],989:[function(b,y,F){function q(f,d,l,k){return Math.abs(f[0]-d[0])<l&&Math.abs(f[1]-d[1])<k}function n(f,d,l,k,c){var e=d.join(","),g=f.crossings[e],m=g,r=0,u=0;20<m&&l?208===m||1114===m?r=0===d[0]?1:-1:u=0===d[1]?1:-1:-1!==a.BOTTOMSTART.indexOf(m)?u=1:-1!==a.LEFTSTART.indexOf(m)?r=1:-1!==a.TOPSTART.indexOf(m)?u=-1:r=-1;var v=[r,u];m=[p(f,d,[-v[0],-v[1]])];var w=f.z.length,D=f.z[0].length;r=d.slice();var C=v.slice();for(u=0;1E4>u;u++){20<g?(g=a.CHOOSESADDLE[g][0>(v[0]||v[1])?0:1],
f.crossings[e]=a.SADDLEREMAINDER[g]):delete f.crossings[e];v=a.NEWDELTA[g];if(!v){h.log("Found bad marching index:",g,d,f.level);break}m.push(p(f,d,v));d[0]+=v[0];d[1]+=v[1];e=d.join(",");q(m[m.length-1],m[m.length-2],k,c)&&m.pop();g=v[0]&&(0>d[0]||d[0]>D-2)||v[1]&&(0>d[1]||d[1]>w-2);if(d[0]===r[0]&&d[1]===r[1]&&v[0]===C[0]&&v[1]===C[1]||l&&g)break;g=f.crossings[e]}1E4===u&&h.log("Infinite loop in contour?");d=q(m[0],m[m.length-1],k,c);v=0;w=.2*f.smoothing;e=[];g=0;for(u=1;u<m.length;u++){C=m[u];
var x=m[u-1];D=C[2]-x[2];C=C[3]-x[3];D=Math.sqrt(D*D+C*C);v+=D;e.push(D)}D=v/e.length*w;for(u=m.length-2;u>=g;u--)if(C=e[u],C<D){w=0;for(v=u-1;v>=g;v--)if(C+e[v]<D)C+=e[v];else break;if(d&&u===m.length-2)for(w=0;w<v;w++)if(C+e[w]<D)C+=e[w];else break;C=u-v+w+1;x=Math.floor((u+v+w+2)/2);C=d||u!==m.length-2?d||-1!==v?C%2?m[x%m.length]:[(m[x%m.length][0]+m[(x+1)%m.length][0])/2,(m[x%m.length][1]+m[(x+1)%m.length][1])/2]:m[0]:m[m.length-1];m.splice(v+1,u-v+1,C);u=v+1;w&&(g=w);d&&(u===m.length-2?m[w]=
m[m.length-1]:0===u&&(m[m.length-1]=m[0]))}m.splice(0,g);for(u=0;u<m.length;u++)m[u].length=2;if(!(2>m.length))if(d)m.pop(),f.paths.push(m);else{l||h.log("Unclosed interior contour?",f.level,r.join(","),m.join("L"));e=!1;for(l=0;l<f.edgepaths.length;l++)if(u=f.edgepaths[l],!e&&q(u[0],m[m.length-1],k,c)){m.pop();e=!0;g=!1;for(r=0;r<f.edgepaths.length;r++)if(d=f.edgepaths[r],q(d[d.length-1],m[0],k,c)){g=!0;m.shift();f.edgepaths.splice(l,1);r===l?f.paths.push(m.concat(d)):(r>l&&r--,f.edgepaths[r]=d.concat(m,
u));break}g||(f.edgepaths[l]=m.concat(u))}for(l=0;l<f.edgepaths.length&&!e;l++)u=f.edgepaths[l],q(u[u.length-1],m[0],k,c)&&(m.shift(),f.edgepaths[l]=u.concat(m),e=!0);e||f.edgepaths.push(m)}}function p(f,d,l){var k=d[0]+Math.max(l[0],0);d=d[1]+Math.max(l[1],0);var c=f.z[d][k],e=f.xaxis,g=f.yaxis;if(l[1])return l=(f.level-c)/(f.z[d][k+1]-c),[e.c2p((1-l)*f.x[k]+l*f.x[k+1],!0),g.c2p(f.y[d],!0),k+l,d];l=(f.level-c)/(f.z[d+1][k]-c);return[e.c2p(f.x[k],!0),g.c2p((1-l)*f.y[d]+l*f.y[d+1],!0),k,d+l]}var h=
b("../../lib"),a=b("./constants");y.exports=function(f,d,l){var k,c;d=d||.01;l=l||.01;for(c=0;c<f.length;c++){var e=f[c];for(k=0;k<e.starts.length;k++){var g=e.starts[k];n(e,g,"edge",d,l)}for(k=0;Object.keys(e.crossings).length&&1E4>k;)k++,g=Object.keys(e.crossings)[0].split(",").map(Number),n(e,g,void 0,d,l);1E4===k&&h.log("Infinite loop in contour?")}}},{"../../lib":749,"./constants":981}],990:[function(b,y,F){var q=b("../../components/color"),n=b("../heatmap/hover");y.exports=function(p,h,a,f,
d){(p=n(p,h,a,f,d,!0))&&p.forEach(function(l){var k=l.trace;"constraint"===k.contours.type&&(k.fillcolor&&q.opacity(k.fillcolor)?l.color=q.addOpacity(k.fillcolor,1):k.contours.showlines&&q.opacity(k.line.color)&&(l.color=q.addOpacity(k.line.color,1)))});return p}},{"../../components/color":615,"../heatmap/hover":1041}],991:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot").plot,style:b("./style"),colorbar:b("./colorbar"),hoverPoints:b("./hover"),
moduleType:"trace",name:"contour",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":810,"./attributes":977,"./calc":978,"./colorbar":980,"./defaults":986,"./hover":990,"./plot":995,"./style":997}],992:[function(b,y,F){var q=b("../../lib");y.exports=function(n,p,h,a){a||(a={});n("contours.showlabels")&&(p=p.font,q.coerceFont(n,"contours.labelfont",{family:p.family,size:p.size,color:h}),n("contours.labelformat"));
!1!==a.hasHover&&n("zhoverformat")}},{"../../lib":749}],993:[function(b,y,F){var q=b("d3"),n=b("../../components/colorscale"),p=b("./end_plus");y.exports=function(h){var a=h.contours,f=a.start,d=p(a),l=a.size||1,k=Math.floor((d-f)/l)+1,c="lines"===a.coloring?0:1,e=n.extractOpts(h);isFinite(l)||(k=l=1);var g=e.reversescale?n.flipScale(e.colorscale):e.colorscale,m=g.length;h=Array(m);d=Array(m);var r;if("heatmap"===a.coloring){f=e.min;c=e.max;for(r=0;r<m;r++)e=g[r],h[r]=e[0]*(c-f)+f,d[r]=e[1];l=q.extent([f,
c,a.start,a.start+l*(k-1)]);a=l[f<c?0:1];l=l[f<c?1:0];a!==f&&(h.splice(0,0,a),d.splice(0,0,d[0]));l!==c&&(h.push(l),d.push(d[d.length-1]))}else for(r=0;r<m;r++)e=g[r],h[r]=(e[0]*(k+c-1)-c/2)*l+f,d[r]=e[1];return n.makeColorScaleFunc({domain:h,range:d},{noNumericCheck:!0})}},{"../../components/colorscale":627,"./end_plus":988,d3:169}],994:[function(b,y,F){var q=b("./constants");y.exports=function(n){var p=n[0].z,h=p.length,a=p[0].length,f=2===h||2===a,d,l,k;for(l=0;l<h-1;l++){var c=[];0===l&&(c=c.concat(q.BOTTOMSTART));
l===h-2&&(c=c.concat(q.TOPSTART));for(d=0;d<a-1;d++){var e=c.slice();0===d&&(e=e.concat(q.LEFTSTART));d===a-2&&(e=e.concat(q.RIGHTSTART));var g=d+","+l;var m=[[p[l][d],p[l][d+1]],[p[l+1][d],p[l+1][d+1]]];for(k=0;k<n.length;k++){var r=n[k];var u=r.level;var v=(m[0][0]>u?0:1)+(m[0][1]>u?0:2)+(m[1][1]>u?0:4)+(m[1][0]>u?0:8);u=5===v||10===v?u>(m[0][0]+m[0][1]+m[1][0]+m[1][1])/4?5===v?713:1114:5===v?104:208:15===v?0:v;u&&(r.crossings[g]=u,-1!==e.indexOf(u)&&(r.starts.push([d,l]),f&&-1!==e.indexOf(u,e.indexOf(u)+
1)&&r.starts.push([d,l])))}}}}},{"./constants":981}],995:[function(b,y,F){function q(C,x,A,B){var t="fill"===B.coloring||"constraint"===B.type&&"\x3d"!==B._operation,G="M"+A.join("L")+"Z";t&&v(x,B);C=a.ensureSingle(C,"g","contourfill").selectAll("path").data(t?x:[]);C.enter().append("path");C.exit().remove();C.each(function(H){(H=(H.prefixBoundary?G:"")+n(H,A))?h.select(this).attr("d",H).style("stroke","none"):h.select(this).remove()})}function n(C,x){for(var A="",B=0,t=C.edgepaths.map(function(K,
N){return N}),G=!0,H,I,J,L;t.length;){I=f.smoothopen(C.edgepaths[B],C.smoothing);A+=G?I:I.replace(/^M/,"L");t.splice(t.indexOf(B),1);G=C.edgepaths[B][C.edgepaths[B].length-1];J=-1;for(I=0;4>I;I++){if(!G){a.log("Missing end?",B,C);break}.01>Math.abs(G[1]-x[0][1])&&!(.01>Math.abs(G[0]-x[2][0]))?H=x[1]:.01>Math.abs(G[0]-x[0][0])?H=x[0]:.01>Math.abs(G[1]-x[2][1])?H=x[3]:.01>Math.abs(G[0]-x[2][0])&&(H=x[2]);for(L=0;L<C.edgepaths.length;L++){var E=C.edgepaths[L][0];.01>Math.abs(G[0]-H[0])?.01>Math.abs(G[0]-
E[0])&&0<=(E[1]-G[1])*(H[1]-E[1])&&(H=E,J=L):.01>Math.abs(G[1]-H[1])?.01>Math.abs(G[1]-E[1])&&0<=(E[0]-G[0])*(H[0]-E[0])&&(H=E,J=L):a.log("endpt to newendpt is not vert. or horz.",G,H,E)}G=H;if(0<=J)break;A+="L"+H}if(J===C.edgepaths.length){a.log("unclosed perimeter path");break}B=J;if(G=-1===t.indexOf(B))B=t[0],A+="Z"}for(B=0;B<C.paths.length;B++)A+=f.smoothclosed(C.paths[B],C.smoothing);return A}function p(C,x,A,B,t){var G=a.ensureSingle(C,"g","contourlines"),H=!1!==t.showlines,I=t.showlabels,J=
H&&I,L=F.createLines(G,H||I,x);G=F.createLineClip(G,J,A,B.trace.uid);C=C.selectAll("g.contourlabels").data(I?[0]:[]);C.exit().remove();C.enter().append("g").classed("contourlabels",!0);if(I){var E=[],K=[];a.clearLocationCache();var N=F.labelFormatter(A,B),O=f.tester.append("text").attr("data-notex",1).call(f.font,t.labelfont),Q=x[0].xaxis,P=x[0].yaxis;t=Q._length;var T=P._length,V=Q.range,aa=P.range,ba=a.aggNums(Math.min,null,B.x),Y=a.aggNums(Math.max,null,B.x),ea=a.aggNums(Math.min,null,B.y),da=
a.aggNums(Math.max,null,B.y);B=Math.max(Q.c2p(ba,!0),0);Q=Math.min(Q.c2p(Y,!0),t);Y=Math.max(P.c2p(da,!0),0);P=Math.min(P.c2p(ea,!0),T);var ca={};V[0]<V[1]?(ca.left=B,ca.right=Q):(ca.left=Q,ca.right=B);aa[0]<aa[1]?(ca.top=Y,ca.bottom=P):(ca.top=P,ca.bottom=Y);ca.middle=(ca.top+ca.bottom)/2;ca.center=(ca.left+ca.right)/2;E.push([[ca.left,ca.top],[ca.right,ca.top],[ca.right,ca.bottom],[ca.left,ca.bottom]]);var la=w.LABELDISTANCE*Math.sqrt(t*t+T*T)/Math.max(1,x.length/w.LABELINCREASE);L.each(function(pa){var qa=
F.calcTextOpts(pa.level,N,O,A);h.select(this).selectAll("path").each(function(){var oa=a.getVisibleSegment(this,ca,qa.height/2);if(oa&&!(oa.len<(qa.width+qa.height)*w.LABELMIN))for(var ka=Math.min(Math.ceil(oa.len/la),w.LABELMAX),ra=0;ra<ka;ra++){var ha=F.findBestTextLocation(this,oa,qa,K,ca);if(!ha)break;F.addLabelData(ha,qa,K,E)}})});O.remove();F.drawLabels(C,K,A,G,J?E:null)}I&&!H&&L.remove()}var h=b("d3"),a=b("../../lib"),f=b("../../components/drawing"),d=b("../../components/colorscale"),l=b("../../lib/svg_text_utils"),
k=b("../../plots/cartesian/axes"),c=b("../../plots/cartesian/set_convert"),e=b("../heatmap/plot"),g=b("./make_crossings"),m=b("./find_all_paths"),r=b("./empty_pathinfo"),u=b("./convert_to_constraints"),v=b("./close_boundaries"),w=b("./constants"),D=w.LABELOPTIMIZER;F.plot=function(C,x,A,B){var t=x.xaxis,G=x.yaxis;a.makeTraceGroups(B,A,"contour").each(function(H){var I=h.select(this),J=H[0],L=J.x,E=J.y,K=J.trace.contours,N=r(K,x,J),O=a.ensureSingle(I,"g","heatmapcoloring"),Q=[];"heatmap"===K.coloring&&
(Q=[H]);e(C,x,Q,O);g(N);m(N);H=t.c2p(L[0],!0);L=t.c2p(L[L.length-1],!0);O=G.c2p(E[0],!0);E=G.c2p(E[E.length-1],!0);E=[[H,E],[L,E],[L,O],[H,O]];L=N;"constraint"===K.type&&(L=u(N,K._operation));H=a.ensureSingle(I,"g","contourbg").selectAll("path").data("fill"===K.coloring?[0]:[]);H.enter().append("path");H.exit().remove();H.attr("d","M"+E.join("L")+"Z").style("stroke","none");q(I,L,E,K);p(I,N,C,J,K);L=J.trace;K="clip"+L.uid;N=C._fullLayout._clips.selectAll("#"+K).data(L.connectgaps?[]:[0]);N.enter().append("clipPath").classed("contourclip",
!0).attr("id",K);N.exit().remove();if(!1===L.connectgaps){L=x.xaxis;H=x.yaxis;O=J.x;Q=J.y;var P=J.trace._emptypoints,T=[],V=J.z.length,aa=J.z[0].length,ba,Y=[];for(ba=0;ba<aa;ba++)Y.push(1);for(ba=0;ba<V;ba++)T.push(Y.slice());for(ba=0;ba<P.length;ba++)V=P[ba],T[V[0]][V[1]]=0;J.zmask=T;J={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:L,yaxis:H,x:O,y:Q,z:T,smoothing:0};g([J]);m([J]);v([J],{type:"levels"});a.ensureSingle(N,"path","").attr("d",(J.prefixBoundary?"M"+E.join("L")+"Z":"")+
n(J,E))}else K=null;f.setClipUrl(I,K,C)})};F.createLines=function(C,x,A){var B=A[0].smoothing;C=C.selectAll("g.contourlevel").data(x?A:[]);C.exit().remove();C.enter().append("g").classed("contourlevel",!0);x&&(x=C.selectAll("path.openline").data(function(t){return t.pedgepaths||t.edgepaths}),x.exit().remove(),x.enter().append("path").classed("openline",!0),x.attr("d",function(t){return f.smoothopen(t,B)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),x=C.selectAll("path.closedline").data(function(t){return t.ppaths||
t.paths}),x.exit().remove(),x.enter().append("path").classed("closedline",!0),x.attr("d",function(t){return f.smoothclosed(t,B)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"));return C};F.createLineClip=function(C,x,A,B){B=x?"clipline"+B:null;x=A._fullLayout._clips.selectAll("#"+B).data(x?[0]:[]);x.exit().remove();x.enter().append("clipPath").classed("contourlineclip",!0).attr("id",B);f.setClipUrl(C,B,A);return x};F.labelFormatter=function(C,x){C=C._fullLayout;var A=x.trace;
x=A.contours;var B={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};x.labelformat?(B.tickformat=x.labelformat,c(B,C)):(A=d.extractOpts(A))&&A.colorbar&&A.colorbar._axis?B=A.colorbar._axis:("constraint"===x.type?(x=x.value,Array.isArray(x)?B.range=[x[0],x[x.length-1]]:B.range=[x,x]):(B.range=[x.start,x.end],B.nticks=(x.end-x.start)/x.size),B.range[0]===B.range[1]&&(B.range[1]+=B.range[0]||1),B.nticks||(B.nticks=1E3),c(B,C),k.prepTicks(B),B._tmin=null,B._tmax=null);return function(t){return k.tickText(B,
t).text}};F.calcTextOpts=function(C,x,A,B){x=x(C);A.text(x).call(l.convertToTspans,B);A=A.node();B=f.bBox(A,!0);return{text:x,width:B.width,height:B.height,fontSize:+A.style["font-size"].replace("px",""),level:C,dy:(B.top+B.bottom)/2}};F.findBestTextLocation=function(C,x,A,B,t){var G=A.width;if(x.isClosed){var H=x.len/D.INITIALSEARCHPOINTS;var I=x.min+H/2;var J=x.max}else H=(x.len-G)/(D.INITIALSEARCHPOINTS+1),I=x.min+H+G/2,J=x.max-(H+G)/2;for(var L=Infinity,E=0;E<D.ITERATIONS;E++){for(;I<J;I+=H){var K=
a.getTextLocation(C,x.total,I,G);a:{var N=A;var O=B,Q=N.width/2,P=N.height/2,T=K.x,V=K.y,aa=K.theta,ba=Math.cos(aa)*Q,Y=Math.sin(aa)*Q;Q=(T>t.center?t.right-T:T-t.left)/(ba+Math.abs(Math.sin(aa)*P));P=(V>t.middle?t.bottom-V:V-t.top)/(Math.abs(Y)+Math.cos(aa)*P);if(1>Q||1>P)N=Infinity;else{P=D.EDGECOST*(1/(Q-1)+1/(P-1));P+=D.ANGLECOST*aa*aa;aa=T-ba;Q=V-Y;T+=ba;V+=Y;for(ba=0;ba<O.length;ba++){Y=O[ba];var ea=Math.cos(Y.theta)*Y.width/2,da=Math.sin(Y.theta)*Y.width/2;ea=2*a.segmentDistance(aa,Q,T,V,Y.x-
ea,Y.y-da,Y.x+ea,Y.y+da)/(N.height+Y.height);da=(Y=Y.level===N.level)?D.SAMELEVELDISTANCE:1;if(ea<=da){N=Infinity;break a}P+=D.NEIGHBORCOST*(Y?D.SAMELEVELFACTOR:1)/(ea-da)}N=P}}if(N<L){L=N;var ca=K;var la=I}}if(L>2*D.MAXCOST)break;E&&(H/=2);I=la-H/2;J=I+1.5*H}if(L<=D.MAXCOST)return ca};F.addLabelData=function(C,x,A,B){var t=x.fontSize,G=x.width+t/3;t=Math.max(0,x.height-t/3);var H=C.x,I=C.y;C=C.theta;var J=Math.sin(C),L=Math.cos(C),E=function(K,N){return[H+K*L-N*J,I+K*J+N*L]};E=[E(-G/2,-t/2),E(-G/
2,t/2),E(G/2,t/2),E(G/2,-t/2)];A.push({text:x.text,x:H,y:I,dy:x.dy,theta:C,level:x.level,width:G,height:t});B.push(E)};F.drawLabels=function(C,x,A,B,t){C=C.selectAll("text").data(x,function(G){return G.text+","+G.x+","+G.y+","+G.theta});C.exit().remove();C.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(G){var H=G.x+Math.sin(G.theta)*G.dy,I=G.y-Math.cos(G.theta)*G.dy;h.select(this).text(G.text).attr({x:H,y:I,transform:"rotate("+180*G.theta/Math.PI+" "+H+" "+I+")"}).call(l.convertToTspans,
A)});if(t){C="";for(x=0;x<t.length;x++)C+="M"+t[x].join("L")+"Z";a.ensureSingle(B,"path","").attr("d",C)}}},{"../../components/colorscale":627,"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../plots/cartesian/set_convert":817,"../heatmap/plot":1045,"./close_boundaries":979,"./constants":981,"./convert_to_constraints":985,"./empty_pathinfo":987,"./find_all_paths":989,"./make_crossings":994,d3:169}],996:[function(b,y,F){function q(h,
a,f){var d={type:"linear",range:[h,a]};n.autoTicks(d,(a-h)/(f||15));return d}var n=b("../../plots/cartesian/axes"),p=b("../../lib");y.exports=function(h,a){var f=h.contours;if(h.autocontour){var d=h.zmin,l=h.zmax;if(h.zauto||void 0===d)d=p.aggNums(Math.min,null,a);if(h.zauto||void 0===l)l=p.aggNums(Math.max,null,a);a=q(d,l,h.ncontours);f.size=a.dtick;f.start=n.tickFirst(a);a.range.reverse();f.end=n.tickFirst(a);f.start===d&&(f.start+=f.size);f.end===l&&(f.end-=f.size);f.start>f.end&&(f.start=f.end=
(f.start+f.end)/2);h._input.contours||(h._input.contours={});p.extendFlat(h._input.contours,{start:f.start,end:f.end,size:f.size});h._input.autocontour=!0}else"constraint"!==f.type&&(l=f.start,a=f.end,d=h._input.contours,l>a&&(f.start=d.start=a,a=f.end=d.end=l,l=f.start),0<f.size||(h=l===a?1:q(l,a,h.ncontours).dtick,d.size=f.size=h))}},{"../../lib":749,"../../plots/cartesian/axes":797}],997:[function(b,y,F){var q=b("d3"),n=b("../../components/drawing"),p=b("../heatmap/style"),h=b("./make_color_map");
y.exports=function(a){var f=q.select(a).selectAll("g.contour");f.style("opacity",function(d){return d[0].trace.opacity});f.each(function(d){var l=q.select(this);d=d[0].trace;var k=d.contours,c=d.line,e=k.size||1,g=k.start,m="constraint"===k.type,r=!m&&"lines"===k.coloring,u=!m&&"fill"===k.coloring,v=r||u?h(d):null;l.selectAll("g.contourlevel").each(function(C){q.select(this).selectAll("path").call(n.lineGroupStyle,c.width,r?v(C.level):c.color,c.dash)});var w=k.labelfont;l.selectAll("g.contourlabels text").each(function(C){n.font(q.select(this),
{family:w.family,size:w.size,color:w.color||(r?v(C.level):c.color)})});if(m)l.selectAll("g.contourfill path").style("fill",d.fillcolor);else if(u){var D;l.selectAll("g.contourfill path").style("fill",function(C){void 0===D&&(D=C.level);return v(C.level+.5*e)});void 0===D&&(D=g);l.selectAll("g.contourbg path").style("fill",v(D-.5*e))}});p(a)}},{"../../components/drawing":637,"../heatmap/style":1046,"./make_color_map":993,d3:169}],998:[function(b,y,F){var q=b("../../components/colorscale/defaults"),
n=b("./label_defaults");y.exports=function(p,h,a,f,d){var l=a("contours.coloring"),k,c="";"fill"===l&&(k=a("contours.showlines"));!1!==k&&("lines"!==l&&(c=a("line.color","#000")),a("line.width",.5),a("line.dash"));"none"!==l&&(!0!==p.showlegend&&(h.showlegend=!1),h._dfltShowLegend=!1,q(p,h,f,a,{prefix:"",cLetter:"z"}));a("line.smoothing");n(a,f,c,d)}},{"../../components/colorscale/defaults":625,"./label_defaults":992}],999:[function(b,y,F){F=b("../heatmap/attributes");var q=b("../contour/attributes"),
n=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var p=q.contours;y.exports=b({carpet:{valType:"string",editType:"calc"},z:F.z,a:F.x,a0:F.x0,da:F.dx,b:F.y,b0:F.y0,db:F.dy,text:F.text,hovertext:F.hovertext,transpose:F.transpose,atype:F.xtype,btype:F.ytype,fillcolor:q.fillcolor,autocontour:q.autocontour,ncontours:q.ncontours,contours:{type:p.type,start:p.start,end:p.end,size:p.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},
showlines:p.showlines,showlabels:p.showlabels,labelfont:p.labelfont,labelformat:p.labelformat,operation:p.operation,value:p.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:q.line.color,width:q.line.width,dash:q.line.dash,smoothing:q.line.smoothing,editType:"plot"},transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../contour/attributes":977,"../heatmap/attributes":1034}],1E3:[function(b,y,F){var q=b("../../components/colorscale/calc"),
n=b("../../lib"),p=b("../heatmap/convert_column_xyz"),h=b("../heatmap/clean_2d_array"),a=b("../heatmap/interp2d"),f=b("../heatmap/find_empties"),d=b("../heatmap/make_bound_array"),l=b("./defaults"),k=b("../carpet/lookup_carpetid"),c=b("../contour/set_contours");y.exports=function(e,g){var m=g._carpetTrace=k(e,g);if(m&&m.visible&&"legendonly"!==m.visible){if(!g.a||!g.b){m=e.data[m.index];var r=e.data[g.index];r.a||(r.a=m.a);r.b||(r.b=m.b);l(r,g,g._defaultColor,e._fullLayout)}m=g._carpetTrace;r=m.aaxis;
var u=m.baxis;r._minDtick=0;u._minDtick=0;n.isArray1D(g.z)&&p(g,r,u,"a","b",["z"]);var v=g._a=g._a||g.a;var w=g._b=g._b||g.b;v=v?r.makeCalcdata(g,"_a"):[];w=w?u.makeCalcdata(g,"_b"):[];var D=g.a0||0;var C=g.da||1;var x=g.b0||0;var A=g.db||1;m=g._z=h(g._z||g.z,g.transpose);g._emptypoints=f(m);a(m,g._emptypoints);var B=n.maxRowLength(m);r=d(g,"scaled"===g.xtype?"":v,D,C,B,r);u=d(g,"scaled"===g.ytype?"":w,x,A,m.length,u);r={a:r,b:u,z:m};"levels"===g.contours.type&&"none"!==g.contours.coloring&&q(e,g,
{vals:m,containerStr:"",cLetter:"z"});e=[r];c(g,g._z);return e}}},{"../../components/colorscale/calc":623,"../../lib":749,"../carpet/lookup_carpetid":950,"../contour/set_contours":996,"../heatmap/clean_2d_array":1036,"../heatmap/convert_column_xyz":1038,"../heatmap/find_empties":1040,"../heatmap/interp2d":1043,"../heatmap/make_bound_array":1044,"./defaults":1001}],1001:[function(b,y,F){var q=b("../../lib"),n=b("../heatmap/xyz_defaults"),p=b("./attributes"),h=b("../contour/constraint_defaults"),a=
b("../contour/contours_defaults"),f=b("../contour/style_defaults");y.exports=function(d,l,k,c){function e(m,r){return q.coerce(d,l,p,m,r)}function g(m){return q.coerce2(d,l,p,m)}e("carpet");d.a&&d.b?n(d,l,e,c,"a","b")?(e("text"),"constraint"===e("contours.type")?h(d,l,e,c,k,{hasHover:!1}):(a(d,l,e,g),f(d,l,e,c,{hasHover:!1}))):l.visible=!1:(l._defaultColor=k,l._length=null)}},{"../../lib":749,"../contour/constraint_defaults":982,"../contour/contours_defaults":984,"../contour/style_defaults":998,"../heatmap/xyz_defaults":1048,
"./attributes":999}],1002:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../contour/colorbar"),calc:b("./calc"),plot:b("./plot"),style:b("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet contour symbols showLegend hasLines carpetDependent noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":810,"../contour/colorbar":980,"../contour/style":997,
"./attributes":999,"./calc":1E3,"./defaults":1001,"./plot":1003}],1003:[function(b,y,F){function q(G,H){var I,J,L;for(I=0;I<G.length;I++){var E=G[I];var K=E.pedgepaths=[];var N=E.ppaths=[];for(J=0;J<E.edgepaths.length;J++){var O=E.edgepaths[J];var Q=[];for(L=0;L<O.length;L++)Q[L]=H(O[L]);K.push(Q)}for(J=0;J<E.paths.length;J++){O=E.paths[J];K=[];for(L=0;L<O.length;L++)K[L]=H(O[L]);N.push(K)}}}function n(G,H,I,J,L,E,K){var N=r.ensureSingle(G,"g","contourlines"),O=!1!==L.showlines,Q=L.showlabels,P=O&&
Q,T=w.createLines(N,O||Q,H);N=w.createLineClip(N,P,I,J.trace.uid);G=G.selectAll("g.contourlabels").data(Q?[0]:[]);G.exit().remove();G.enter().append("g").classed("contourlabels",!0);if(Q){var V=E.xaxis._length;E=E.yaxis._length;var aa=[[[0,0],[V,0],[V,E],[0,E]]],ba=[];r.clearLocationCache();var Y=w.labelFormatter(I,J),ea=m.tester.append("text").attr("data-notex",1).call(m.font,L.labelfont),da={left:0,right:V,center:V/2,top:0,bottom:E,middle:E/2},ca=D.LABELDISTANCE*Math.sqrt(V*V+E*E)/Math.max(1,H.length/
D.LABELINCREASE);T.each(function(la){var pa=w.calcTextOpts(la.level,Y,ea,I);c.select(this).selectAll("path").each(function(qa){var oa=r.getVisibleSegment(this,da,pa.height/2);if(oa&&(p(this,qa,la,oa,K,pa.height),!(oa.len<(pa.width+pa.height)*D.LABELMIN))){qa=Math.min(Math.ceil(oa.len/ca),D.LABELMAX);for(var ka=0;ka<qa;ka++){var ra=w.findBestTextLocation(this,oa,pa,ba,da);if(!ra)break;w.addLabelData(ra,pa,ba,aa)}}})});ea.remove();w.drawLabels(G,ba,I,N,P?aa:null)}Q&&!O&&T.remove()}function p(G,H,I,
J,L,E){function K(aa,ba){var Y=0;if(.1>Math.abs(aa[0]-Q)||.1>Math.abs(aa[0]-P)){var ea=a(L.dxydb_rough(aa[0],aa[1],.1));Y=Math.max(Y,E*f(ba,ea)/2)}if(.1>Math.abs(aa[1]-T)||.1>Math.abs(aa[1]-V))ea=a(L.dxyda_rough(aa[0],aa[1],.1)),Y=Math.max(Y,E*f(ba,ea)/2);return Y}for(var N,O=0;O<I.pedgepaths.length;O++)H===I.pedgepaths[O]&&(N=I.edgepaths[O]);if(N){var Q=L.a[0],P=L.a[L.a.length-1],T=L.b[0],V=L.b[L.b.length-1];H=h(G,0,1);G=h(G,J.total,J.total-1);H=K(N[0],H);N=J.total-K(N[N.length-1],G);J.min<H&&(J.min=
H);J.max>N&&(J.max=N);J.len=J.max-J.min}}function h(G,H,I){H=G.getPointAtLength(H);I=G.getPointAtLength(I);G=I.x-H.x;H=I.y-H.y;I=Math.sqrt(G*G+H*H);return[G/I,H/I]}function a(G){var H=Math.sqrt(G[0]*G[0]+G[1]*G[1]);return[G[0]/H,G[1]/H]}function f(G,H){G=Math.abs(G[0]*H[0]+G[1]*H[1]);return Math.sqrt(1-G*G)/G}function d(G,H,I,J,L,E){var K,N=r.ensureSingle(G,"g","contourbg").selectAll("path").data("fill"!==E||L?[]:[0]);N.enter().append("path");N.exit().remove();var O=[];for(K=0;K<H.length;K++)G=H[K],
L=e([],G.x,I.c2p),E=e([],G.y,J.c2p),O.push(g(L,E,G.bicubic));N.attr("d","M"+O.join("L")+"Z").style("stroke","none")}function l(G,H,I,J,L,E,K,N,O,Q,P){(Q="fill"===Q)&&A(L,G.contours);H=r.ensureSingle(H,"g","contourfill").selectAll("path").data(Q?L:[]);H.enter().append("path");H.exit().remove();H.each(function(T){(T=(T.prefixBoundary?P:"")+k(G,T,E,K,N,O,I,J))?c.select(this).attr("d",T).style("stroke","none"):c.select(this).remove()})}function k(G,H,I,J,L,E,K,N){function O(pa){return Math.abs(pa[0]-
I[2][0])<ea}function Q(pa,qa){var oa="";if(Math.abs(pa[1]-I[0][1])<da&&!O(pa)||Math.abs(pa[1]-I[2][1])<da&&!(Math.abs(pa[0]-I[0][0])<ea)){var ka=L.aaxis;var ra=t(L,E,[pa[0],qa[0]],.5*(pa[1]+qa[1]))}else ka=L.baxis,ra=t(L,E,.5*(pa[0]+qa[0]),[pa[1],qa[1]]);for(pa=1;pa<ra.length;pa++)for(oa+=ka.smoothing?"C":"L",qa=0;qa<ra[pa].length;qa++){var ha=ra[pa][qa];oa+=[K.c2p(ha[0]),N.c2p(ha[1])]+" "}return oa}var P="",T=H.edgepaths.map(function(pa,qa){return qa}),V=!0,aa,ba,Y,ea=1E-4*Math.abs(I[0][0]-I[2][0]),
da=1E-4*Math.abs(I[0][1]-I[2][1]);G=0;for(aa=null;T.length;){var ca=H.edgepaths[G][0];aa&&(P+=Q(aa,ca));aa=m.smoothopen(H.edgepaths[G].map(J),H.smoothing);P+=V?aa:aa.replace(/^M/,"L");T.splice(T.indexOf(G),1);aa=H.edgepaths[G][H.edgepaths[G].length-1];ca=-1;for(V=0;4>V;V++){if(!aa){r.log("Missing end?",G,H);break}Math.abs(aa[1]-I[0][1])<da&&!O(aa)?ba=I[1]:Math.abs(aa[0]-I[0][0])<ea?ba=I[0]:Math.abs(aa[1]-I[2][1])<da?ba=I[3]:O(aa)&&(ba=I[2]);for(Y=0;Y<H.edgepaths.length;Y++){var la=H.edgepaths[Y][0];
Math.abs(aa[0]-ba[0])<ea?Math.abs(aa[0]-la[0])<ea&&0<=(la[1]-aa[1])*(ba[1]-la[1])&&(ba=la,ca=Y):Math.abs(aa[1]-ba[1])<da?Math.abs(aa[1]-la[1])<da&&0<=(la[0]-aa[0])*(ba[0]-la[0])&&(ba=la,ca=Y):r.log("endpt to newendpt is not vert. or horz.",aa,ba,la)}if(0<=ca)break;P+=Q(aa,ba);aa=ba}if(ca===H.edgepaths.length){r.log("unclosed perimeter path");break}G=ca;if(V=-1===T.indexOf(G))G=T[0],P+=Q(aa,ba)+"Z",aa=null}for(G=0;G<H.paths.length;G++)P+=m.smoothclosed(H.paths[G].map(J),H.smoothing);return P}var c=
b("d3"),e=b("../carpet/map_1d_array"),g=b("../carpet/makepath"),m=b("../../components/drawing"),r=b("../../lib"),u=b("../contour/make_crossings"),v=b("../contour/find_all_paths"),w=b("../contour/plot"),D=b("../contour/constants"),C=b("../contour/convert_to_constraints"),x=b("../contour/empty_pathinfo"),A=b("../contour/close_boundaries"),B=b("../carpet/lookup_carpetid"),t=b("../carpet/axis_aligned_line");y.exports=function(G,H,I,J){var L=H.xaxis,E=H.yaxis;r.makeTraceGroups(J,I,"contour").each(function(K){function N(ka){ka=
P.ab2xy(ka[0],ka[1],!0);return[L.c2p(ka[0]),E.c2p(ka[1])]}var O=c.select(this);K=K[0];var Q=K.trace,P=Q._carpetTrace=B(G,Q),T=G.calcdata[P.index][0];if(P.visible&&"legendonly"!==P.visible){var V=K.a,aa=K.b,ba=Q.contours,Y=x(ba,H,K),ea="constraint"===ba.type,da=ba._operation,ca=ea?"\x3d"===da?"lines":"fill":ba.coloring,la=[[V[0],aa[aa.length-1]],[V[V.length-1],aa[aa.length-1]],[V[V.length-1],aa[0]],[V[0],aa[0]]];u(Y);v(Y,1E-8*(V[V.length-1]-V[0]),1E-8*(aa[aa.length-1]-aa[0]));V=Y;"constraint"===ba.type&&
(V=C(Y,da));q(Y,N);var pa,qa=[];for(pa=T.clipsegments.length-1;0<=pa;pa--){da=T.clipsegments[pa];aa=e([],da.x,L.c2p);var oa=e([],da.y,E.c2p);aa.reverse();oa.reverse();qa.push(g(aa,oa,da.bicubic))}da="M"+qa.join("L")+"Z";d(O,T.clipsegments,L,E,ea,ca);l(Q,O,L,E,V,la,N,P,T,ca,da);n(O,Y,G,K,ba,H,P);m.setClipUrl(O,P._clipPathId,G)}})}},{"../../components/drawing":637,"../../lib":749,"../carpet/axis_aligned_line":934,"../carpet/lookup_carpetid":950,"../carpet/makepath":951,"../carpet/map_1d_array":952,
"../contour/close_boundaries":979,"../contour/constants":981,"../contour/convert_to_constraints":985,"../contour/empty_pathinfo":987,"../contour/find_all_paths":989,"../contour/make_crossings":994,"../contour/plot":995,d3:169}],1004:[function(b,y,F){F=b("../../components/colorscale/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../plots/attributes"),p=b("../scattermapbox/attributes");b=b("../../lib/extend").extendFlat;y.exports=b({lon:p.lon,lat:p.lat,z:{valType:"data_array",
editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:p.text,hovertext:p.hovertext,hoverinfo:b({},n.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:q(),showlegend:b({},n.showlegend,{dflt:!1})},F("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scattermapbox/attributes":1219}],
1005:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../../lib").isArrayOrTypedArray,p=b("../../constants/numerical").BADNUM,h=b("../../components/colorscale/calc"),a=b("../../lib")._;y.exports=function(f,d){for(var l=d._length,k=Array(l),c=d.z,e=n(c)&&c.length,g=0;g<l;g++){var m=k[g]={},r=d.lon[g],u=d.lat[g];m.lonlat=q(r)&&q(u)?[+r,+u]:[p,p];e&&(r=c[g],m.z=q(r)?r:p)}h(f,d,{vals:e?c:[0,1],containerStr:"",cLetter:"z"});l&&(k[0].t={labels:{lat:a(f,"lat:")+" ",lon:a(f,"lon:")+" "}});return k}},{"../../components/colorscale/calc":623,
"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],1006:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../../lib"),p=b("../../components/color"),h=b("../../components/colorscale"),a=b("../../constants/numerical").BADNUM,f=b("../../lib/geojson_utils").makeBlank;y.exports=function(d){var l=d[0].trace,k=!0===l.visible&&0!==l._length,c=l._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:f()};if(!k)return c;k=[];var e,g=l.z,m=l.radius;g=n.isArrayOrTypedArray(g)&&g.length;
var r=n.isArrayOrTypedArray(m);for(e=0;e<d.length;e++){var u=d[e],v=u.lonlat;if(v[0]!==a){var w={};g&&(u=u.z,w.z=u!==a?u:0);r&&(w.r=q(m[e])&&0<m[e]?+m[e]:0);k.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:w})}}d=h.extractOpts(l);m=d.reversescale?h.flipScale(d.colorscale):d.colorscale;e=m[0][1];v=["interpolate",["linear"],["heatmap-density"],0,1>p.opacity(e)?e:p.addOpacity(e,0)];for(e=1;e<m.length;e++)v.push(m[e][0],m[e][1]);e=["interpolate",["linear"],["get","z"],d.min,0,d.max,
1];n.extendFlat(c.heatmap.paint,{"heatmap-weight":g?e:1/(d.max-d.min),"heatmap-color":v,"heatmap-radius":r?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity});c.geojson={type:"FeatureCollection",features:k};c.heatmap.layout.visibility="visible";return c}},{"../../components/color":615,"../../components/colorscale":627,"../../constants/numerical":724,"../../lib":749,"../../lib/geojson_utils":743,"fast-isnumeric":241}],1007:[function(b,y,F){var q=b("../../lib"),n=b("../../components/colorscale/defaults"),
p=b("./attributes");y.exports=function(h,a,f,d){function l(c,e){return q.coerce(h,a,p,c,e)}f=l("lon")||[];var k=l("lat")||[];(f=Math.min(f.length,k.length))?(a._length=f,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),n(h,a,d,l,{prefix:"",cLetter:"z"})):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1004}],1008:[function(b,y,F){y.exports=function(q,n){q.lon=n.lon;q.lat=n.lat;q.z=n.z;return q}},{}],1009:[function(b,y,F){var q=b("../../lib"),
n=b("../../plots/cartesian/axes"),p=b("../scattermapbox/hover");y.exports=function(h,a,f){if(h=p(h,a,f)){h=h[0];var d=h.cd;a=d[0].trace;f=d[h.index];delete h.color;if("z"in f){var l=h.subplot.mockAxis;h.z=f.z;h.zLabel=n.tickText(l,l.c2l(f.z),"hover").text}d=d[0].t.labels;if(a.hovertemplate)a=void 0;else{l=(f.hi||a.hoverinfo).split("+");var k=-1!==l.indexOf("all"),c=-1!==l.indexOf("lon"),e=-1!==l.indexOf("lat"),g=f.lonlat,m=[];k||c&&e?m.push("("+(g[0]+", ")+(g[1]+")")):c?m.push(d.lon+(g[0]+"")):
e&&m.push(d.lat+(g[1]+""));(k||-1!==l.indexOf("text"))&&q.fillText(f,a,m);a=m.join("\x3cbr\x3e")}h.extraText=a;return[h]}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../scattermapbox/hover":1224}],1010:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),formatLabels:b("../scattermapbox/format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),getBelow:function(q,n){q=n.getMapLayers();
for(n=0;n<q.length;n++){var p=q[n],h=p.id;if("symbol"===p.type&&"string"===typeof h&&-1===h.indexOf("plotly-"))return h}},moduleType:"trace",name:"densitymapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":854,"../heatmap/colorbar":1037,"../scattermapbox/format_labels":1223,"./attributes":1004,"./calc":1005,"./defaults":1007,"./event_data":1008,"./hover":1009,"./plot":1011}],1011:[function(b,y,F){function q(h,
a){this.type="densitymapbox";this.subplot=h;this.uid=a;this.sourceId="source-"+a;this.layerList=[["heatmap",p+a+"-heatmap"]];this.below=null}var n=b("./convert"),p=b("../../plots/mapbox/constants").traceLayerPrefix;b=q.prototype;b.update=function(h){var a=this.subplot,f=this.layerList;h=n(h);var d=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(h.geojson);d!==this.below&&(this._removeLayers(),this._addLayers(h,d),this.below=d);for(d=0;d<f.length;d++){var l=f[d],k=l[1];l=h[l[0]];
a.setOptions(k,"setLayoutProperty",l.layout);"visible"===l.layout.visibility&&a.setOptions(k,"setPaintProperty",l.paint)}};b._addLayers=function(h,a){for(var f=this.subplot,d=this.layerList,l=this.sourceId,k=0;k<d.length;k++){var c=d[k],e=c[0],g=h[e];f.addLayer({type:e,id:c[1],source:l,layout:g.layout,paint:g.paint},a)}};b._removeLayers=function(){for(var h=this.subplot.map,a=this.layerList,f=a.length-1;0<=f;f--)h.removeLayer(a[f][1])};b.dispose=function(){var h=this.subplot.map;this._removeLayers();
h.removeSource(this.sourceId)};y.exports=function(h,a){var f=a[0].trace,d=new q(h,f.uid),l=d.sourceId;a=n(a);f=d.below=h.belowLookup["trace-"+f.uid];h.map.addSource(l,{type:"geojson",data:a.geojson});d._addLayers(a,f);return d}},{"../../plots/mapbox/constants":852,"./convert":1006}],1012:[function(b,y,F){var q=b("../../lib");y.exports=function(n,p){for(var h=0;h<n.length;h++)n[h].i=h;q.mergeArray(p.text,n,"tx");q.mergeArray(p.hovertext,n,"htx");if(p=p.marker)if(q.mergeArray(p.opacity,n,"mo"),q.mergeArray(p.color,
n,"mc"),p=p.line)q.mergeArray(p.color,n,"mlc"),q.mergeArrayCastPositive(p.width,n,"mlw")}},{"../../lib":749}],1013:[function(b,y,F){F=b("../bar/attributes");var q=b("../scatter/attributes").line,n=b("../../plots/attributes"),p=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/template_attributes").texttemplateAttrs,a=b("./constants"),f=b("../../lib/extend").extendFlat;b=b("../../components/color");y.exports={x:F.x,x0:F.x0,dx:F.dx,y:F.y,y0:F.y0,dy:F.dy,hovertext:F.hovertext,
hovertemplate:p({},{keys:a.eventDataKeys}),hoverinfo:f({},n.hoverinfo,{flags:"name;x;y;text;percent initial;percent previous;percent total".split(";")}),textinfo:{valType:"flaglist",flags:"label;text;percent initial;percent previous;percent total;value".split(";"),extras:["none"],editType:"plot",arrayOk:!1},texttemplate:h({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:F.text,textposition:f({},F.textposition,{dflt:"auto"}),insidetextanchor:f({},F.insidetextanchor,{dflt:"middle"}),
textangle:f({},F.textangle,{dflt:0}),textfont:F.textfont,insidetextfont:F.insidetextfont,outsidetextfont:F.outsidetextfont,constraintext:F.constraintext,cliponaxis:F.cliponaxis,orientation:f({},F.orientation,{}),offset:f({},F.offset,{arrayOk:!1}),width:f({},F.width,{arrayOk:!1}),marker:F.marker,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:f({},q.color,{dflt:b.defaultLine}),width:f({},q.width,{dflt:0,editType:"plot"}),dash:q.dash,editType:"style"},visible:{valType:"boolean",
dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:F.offsetgroup,alignmentgroup:F.alignmentgroup}},{"../../components/color":615,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155,"./constants":1015}],1014:[function(b,y,F){function q(f){return f===a?0:f}var n=b("../../plots/cartesian/axes"),p=b("./arrays_to_calcdata"),h=b("../scatter/calc_selection"),a=b("../../constants/numerical").BADNUM;y.exports=function(f,
d){var l=n.getFromId(f,d.xaxis||"x"),k=n.getFromId(f,d.yaxis||"y");"h"===d.orientation?(f=l.makeCalcdata(d,"x"),l=k.makeCalcdata(d,"y")):(f=k.makeCalcdata(d,"y"),l=l.makeCalcdata(d,"x"));var c=Math.min(l.length,f.length),e=Array(c);d._base=[];for(k=0;k<c;k++){0>f[k]&&(f[k]=a);var g=!1;f[k]!==a&&k+1<c&&f[k+1]!==a&&(g=!0);g=e[k]={p:l[k],s:f[k],cNext:g};d._base[k]=-.5*g.s;d.ids&&(g.id=String(d.ids[k]));0===k&&(e[0].vTotal=0);e[0].vTotal+=q(g.s);g.begR=q(g.s)/q(e[0].s)}for(k=0;k<c;k++)if(g=e[k],g.s!==
a){g.sumR=g.s/e[0].vTotal;g.difR=void 0!==m?g.s/m:1;var m=g.s}p(e,d);h(e,d);return e}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157,"./arrays_to_calcdata":1012}],1015:[function(b,y,F){y.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],1016:[function(b,y,F){var q=b("../bar/cross_trace_calc").setGroupPositions;y.exports=function(n,p){var h=n._fullLayout,a=n._fullData,f=n.calcdata,d=p.xaxis,l=p.yaxis;p=[];var k=[],
c=[],e;for(e=0;e<a.length;e++){var g=a[e];var m="h"===g.orientation;!0===g.visible&&g.xaxis===d._id&&g.yaxis===l._id&&"funnel"===g.type&&(g=f[e],m?c.push(g):k.push(g),p.push(g))}h={mode:h.funnelmode,norm:h.funnelnorm,gap:h.funnelgap,groupgap:h.funnelgroupgap};q(n,d,l,k,h);q(n,l,d,c,h);for(e=0;e<p.length;e++)for(g=p[e],n=0;n<g.length;n++)n+1<g.length&&(g[n].nextP0=g[n+1].p0,g[n].nextS0=g[n+1].s0,g[n].nextP1=g[n+1].p1,g[n].nextS1=g[n+1].s1)}},{"../bar/cross_trace_calc":893}],1017:[function(b,y,F){function q(l){l=
n.isArrayOrTypedArray(l)?"#000":l;return d.addOpacity(l,.5*d.opacity(l))}var n=b("../../lib"),p=b("../bar/defaults").handleGroupingDefaults,h=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),f=b("./attributes"),d=b("../../components/color");y.exports={supplyDefaults:function(l,k,c,e){function g(u,v){return n.coerce(l,k,f,u,v)}if(a(l,k,e,g)){g("orientation",k.y&&!k.x?"v":"h");g("offset");g("width");var m=g("text");g("hovertext");g("hovertemplate");var r=g("textposition");h(l,k,e,g,r,{moduleHasSelected:!1,
moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});"none"===k.textposition||k.texttemplate||g("textinfo",Array.isArray(m)?"text+value":"value");c=g("marker.color",c);g("marker.line.color",d.defaultLine);g("marker.line.width");g("connector.visible")&&(g("connector.fillcolor",q(c)),g("connector.line.width")&&(g("connector.line.color"),g("connector.line.dash")))}else k.visible=!1},crossTraceDefaults:function(l,k){function c(r){return n.coerce(g._input,
g,f,r)}if("group"===k.funnelmode)for(var e=0;e<l.length;e++){var g=l[e];var m=g._input;p(m,g,k,c)}}}},{"../../components/color":615,"../../lib":749,"../bar/defaults":894,"../scatter/xy_defaults":1181,"./attributes":1013}],1018:[function(b,y,F){y.exports=function(q,n){q.x="xVal"in n?n.xVal:n.x;q.y="yVal"in n?n.yVal:n.y;"percentInitial"in n&&(q.percentInitial=n.percentInitial);"percentPrevious"in n&&(q.percentPrevious=n.percentPrevious);"percentTotal"in n&&(q.percentTotal=n.percentTotal);n.xa&&(q.xaxis=
n.xa);n.ya&&(q.yaxis=n.ya);return q}},{}],1019:[function(b,y,F){var q=b("../../components/color").opacity,n=b("../bar/hover").hoverOnBars,p=b("../../lib").formatPercent;y.exports=function(h,a,f,d){if(h=n(h,a,f,d)){a=h.cd;f=a[0].trace;a=a[h.index];h[("h"===f.orientation?"x":"y")+"LabelVal"]=a.s;h.percentInitial=a.begR;h.percentInitialLabel=p(a.begR,1);h.percentPrevious=a.difR;h.percentPreviousLabel=p(a.difR,1);h.percentTotal=a.sumR;h.percentTotalLabel=p(a.sumR,1);var l=a.hi||f.hoverinfo;d=[];if(l&&
"none"!==l&&"skip"!==l){var k="all"===l;l=l.split("+");(k||-1!==l.indexOf("percent initial"))&&d.push(h.percentInitialLabel+" of initial");(k||-1!==l.indexOf("percent previous"))&&d.push(h.percentPreviousLabel+" of previous");(k||-1!==l.indexOf("percent total"))&&d.push(h.percentTotalLabel+" of total")}h.extraText=d.join("\x3cbr\x3e");k=f.marker;f=a.mc||k.color;d=a.mlc||k.line.color;a=a.mlw||k.line.width;a=q(f)?f:q(d)&&a?d:void 0;h.color=a;return[h]}}},{"../../components/color":615,"../../lib":749,
"../bar/hover":897}],1020:[function(b,y,F){y.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:b("../../plots/cartesian"),
categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/select":902,"./attributes":1013,"./calc":1014,"./cross_trace_calc":1016,"./defaults":1017,"./event_data":1018,"./hover":1019,"./layout_attributes":1021,"./layout_defaults":1022,"./plot":1023,"./style":1024}],1021:[function(b,y,F){y.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,
editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1022:[function(b,y,F){var q=b("../../lib"),n=b("./layout_attributes");y.exports=function(p,h,a){for(var f=!1,d=0;d<a.length;d++){var l=a[d];if(l.visible&&"funnel"===l.type){f=!0;break}}f&&(q.coerce(p,h,n,"funnelmode",void 0),q.coerce(p,h,n,"funnelgap",.2),q.coerce(p,h,n,"funnelgroupgap",void 0))}},{"../../lib":749,"./layout_attributes":1021}],1023:[function(b,y,F){function q(c,e,g,m){var r=e.xaxis,u=e.yaxis;
a.makeTraceGroups(m,g,"trace bars").each(function(v){var w=h.select(this);v=v[0].trace;w=a.ensureSingle(w,"g","regions");if(v.connector&&v.connector.visible){var D="h"===v.orientation;w=w.selectAll("g.region").data(a.identity);w.enter().append("g").classed("region",!0);w.exit().remove();var C=w.size();w.each(function(x,A){if(A===C-1||x.cNext){A=p(x,r,u,D);x=A[0];A=A[1];var B="";x[0]!==d&&A[0]!==d&&x[1]!==d&&A[1]!==d&&x[2]!==d&&A[2]!==d&&x[3]!==d&&A[3]!==d&&(B=D?B+("M"+x[0]+","+A[1]+"L"+x[2]+","+A[2]+
"H"+x[3]+"L"+x[1]+","+A[1]+"Z"):B+("M"+x[1]+","+A[1]+"L"+x[2]+","+A[3]+"V"+A[2]+"L"+x[1]+","+A[0]+"Z"));""===B&&(B="M0,0Z");a.ensureSingle(h.select(this),"path").attr("d",B).call(f.setClipUrl,e.layerClipId,c)}})}else w.remove()})}function n(c,e,g,m){var r=e.xaxis,u=e.yaxis;a.makeTraceGroups(m,g,"trace bars").each(function(v){var w=h.select(this);v=v[0].trace;w=a.ensureSingle(w,"g","lines");if(v.connector&&v.connector.visible&&v.connector.line.width){var D="h"===v.orientation;w=w.selectAll("g.line").data(a.identity);
w.enter().append("g").classed("line",!0);w.exit().remove();var C=w.size();w.each(function(x,A){if(A===C-1||x.cNext){A=p(x,r,u,D);x=A[0];A=A[1];var B="";void 0!==x[3]&&void 0!==A[3]&&(D?(B+="M"+x[0]+","+A[1]+"L"+x[2]+","+A[2],B+="M"+x[1]+","+A[1]+"L"+x[3]+","+A[2]):(B+="M"+x[1]+","+A[1]+"L"+x[2]+","+A[3],B+="M"+x[1]+","+A[0]+"L"+x[2]+","+A[2]));""===B&&(B="M0,0Z");a.ensureSingle(h.select(this),"path").attr("d",B).call(f.setClipUrl,e.layerClipId,c)}})}else w.remove()})}function p(c,e,g,m){var r=[],
u=[],v=m?e:g;e=m?g:e;r[0]=v.c2p(c.s0,!0);u[0]=e.c2p(c.p0,!0);r[1]=v.c2p(c.s1,!0);u[1]=e.c2p(c.p1,!0);r[2]=v.c2p(c.nextS0,!0);u[2]=e.c2p(c.nextP0,!0);r[3]=v.c2p(c.nextS1,!0);u[3]=e.c2p(c.nextP1,!0);return m?[r,u]:[u,r]}var h=b("d3"),a=b("../../lib"),f=b("../../components/drawing"),d=b("../../constants/numerical").BADNUM,l=b("../bar/plot"),k=b("../bar/uniform_text").clearMinTextSize;y.exports=function(c,e,g,m){var r=c._fullLayout;k("funnel",r);q(c,e,g,m);n(c,e,g,m);l.plot(c,e,g,m,{mode:r.funnelmode,
norm:r.funnelmode,gap:r.funnelgap,groupgap:r.funnelgroupgap})}},{"../../components/drawing":637,"../../constants/numerical":724,"../../lib":749,"../bar/plot":901,"../bar/uniform_text":906,d3:169}],1024:[function(b,y,F){var q=b("d3"),n=b("../../components/drawing"),p=b("../../components/color"),h=b("../../constants/interactions").DESELECTDIM;F=b("../bar/style");var a=b("../bar/uniform_text").resizeText,f=F.styleTextPoints;y.exports={style:function(d,l,k){l=k?k:q.select(d).selectAll("g.funnellayer").selectAll("g.trace");
a(d,l,"funnel");l.style("opacity",function(c){return c[0].trace.opacity});l.each(function(c){var e=q.select(this),g=c[0].trace;e.selectAll(".point \x3e path").each(function(m){if(!m.isBlank){var r=g.marker;q.select(this).call(p.fill,m.mc||r.color).call(p.stroke,m.mlc||r.line.color).call(n.dashLine,r.line.dash,m.mlw||r.line.width).style("opacity",g.selectedpoints&&!m.selected?h:1)}});f(e,g,d);e.selectAll(".regions").each(function(){q.select(this).selectAll("path").style("stroke-width",0).call(p.fill,
g.connector.fillcolor)});e.selectAll(".lines").each(function(){var m=g.connector.line;n.lineGroupStyle(q.select(this).selectAll("path"),m.width,m.color,m.dash)})})}}},{"../../components/color":615,"../../components/drawing":637,"../../constants/interactions":723,"../bar/style":904,"../bar/uniform_text":906,d3:169}],1025:[function(b,y,F){F=b("../pie/attributes");var q=b("../../plots/attributes"),n=b("../../plots/domain").attributes,p=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/template_attributes").texttemplateAttrs;
b=b("../../lib/extend").extendFlat;y.exports={labels:F.labels,label0:F.label0,dlabel:F.dlabel,values:F.values,marker:{colors:F.marker.colors,line:{color:b({},F.marker.line.color,{dflt:null}),width:b({},F.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:F.text,hovertext:F.hovertext,scalegroup:b({},F.scalegroup,{}),textinfo:b({},F.textinfo,{flags:["label","text","value","percent"]}),texttemplate:h({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:b({},
q.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:p({},{keys:["label","color","value","text","percent"]}),textposition:b({},F.textposition,{values:["inside","none"],dflt:"inside"}),textfont:F.textfont,insidetextfont:F.insidetextfont,title:{text:F.title.text,font:F.title.font,position:b({},F.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:n({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",
min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129}],1026:[function(b,y,F){var q=b("../../plots/plots");F.name="funnelarea";F.plot=function(n,p,h,a){q.plotBasePlot(F.name,n,p,h,a)};F.clean=function(n,p,h,a){q.cleanBasePlot(F.name,n,p,h,a)}},{"../../plots/plots":860}],1027:[function(b,y,F){var q=b("../pie/calc");
y.exports={calc:function(n,p){return q.calc(n,p)},crossTraceCalc:function(n){q.crossTraceCalc(n,{type:"funnelarea"})}}},{"../pie/calc":1131}],1028:[function(b,y,F){var q=b("../../lib"),n=b("./attributes"),p=b("../../plots/domain").defaults,h=b("../bar/defaults").handleText,a=b("../pie/defaults").handleLabelsAndValues;y.exports=function(f,d,l,k){function c(m,r){return q.coerce(f,d,n,m,r)}l=c("labels");var e=c("values");l=a(l,e);e=l.len;d._hasLabels=l.hasLabels;d._hasValues=l.hasValues;!d._hasLabels&&
d._hasValues&&(c("label0"),c("dlabel"));if(e){d._length=e;c("marker.line.width")&&c("marker.line.color",k.paper_bgcolor);c("marker.colors");c("scalegroup");l=c("text");e=c("texttemplate");var g;e||(g=c("textinfo",Array.isArray(l)?"text+percent":"percent"));c("hovertext");c("hovertemplate");if(e||g&&"none"!==g)g=c("textposition"),h(f,d,k,c,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});p(d,k,c);c("title.text")&&
(c("title.position"),q.coerceFont(c,"title.font",k.font));c("aspectratio");c("baseratio")}else d.visible=!1}},{"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"../pie/defaults":1132,"./attributes":1025}],1029:[function(b,y,F){y.exports={moduleType:"trace",name:"funnelarea",basePlotModule:b("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),
calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style"),styleOne:b("../pie/style_one"),meta:{}}},{"../pie/style_one":1140,"./attributes":1025,"./base_plot":1026,"./calc":1027,"./defaults":1028,"./layout_attributes":1030,"./layout_defaults":1031,"./plot":1032,"./style":1033}],1030:[function(b,y,F){b=b("../pie/layout_attributes").hiddenlabels;y.exports={hiddenlabels:b,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",
dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1136}],1031:[function(b,y,F){var q=b("../../lib"),n=b("./layout_attributes");y.exports=function(p,h){q.coerce(p,h,n,"hiddenlabels",void 0);q.coerce(p,h,n,"funnelareacolorway",h.colorway);q.coerce(p,h,n,"extendfunnelareacolors",void 0)}},{"../../lib":749,"./layout_attributes":1030}],1032:[function(b,y,F){function q(D,C){return"l"+(C[0]-D[0])+","+(C[1]-D[1])}function n(D,C){return[.5*(D[0]+C[0]),.5*(D[1]+C[1])]}function p(D){function C(){var E=
Math.sqrt(G);return[E,-E]}if(D.length){var x=D[0],A=x.trace,B=A.aspectratio;A=A.baseratio;.999<A&&(A=.999);A=Math.pow(A,2);var t=x.vTotal,G=t*A/(1-A)/t;A=[];A.push(C());var H;for(H=D.length-1;-1<H;H--){var I=D[H];I.hidden||(G+=I.v/t,A.push(C()))}t=Infinity;var J=-Infinity;for(H=0;H<A.length;H++)I=A[H],t=Math.min(t,I[1]),J=Math.max(J,I[1]);for(H=0;H<A.length;H++)A[H][1]-=(J+t)/2;H=x.r;t=(J-t)/2;I=H/A[A.length-1][0];B*=H/t;x.r=B*t;for(H=0;H<A.length;H++)A[H][0]*=I,A[H][1]*=B;I=A[0];x=[-I[0],I[1]];B=
[I[0],I[1]];t=0;for(H=D.length-1;-1<H;H--)if(I=D[H],!I.hidden){t+=1;J=A[t][0];var L=A[t][1];I.TL=[-J,L];I.TR=[J,L];I.BL=x;I.BR=B;I.pxmid=n(I.TR,I.BR);x=I.TL;B=I.TR}}}var h=b("d3"),a=b("../../components/drawing"),f=b("../../lib"),d=b("../../lib/svg_text_utils"),l=b("../bar/plot").toMoveInsideBar;F=b("../bar/uniform_text");var k=F.recordMinTextSize,c=F.clearMinTextSize,e=b("../pie/helpers");b=b("../pie/plot");var g=b.attachFxHandlers,m=b.determineInsideTextFont,r=b.layoutAreas,u=b.prerenderTitles,v=
b.positionTitleOutside,w=b.formatSliceLabel;y.exports=function(D,C){var x=D._fullLayout;c("funnelarea",x);u(C,D);r(C,x._size);f.makeTraceGroups(x._funnelarealayer,C,"trace").each(function(A){var B=h.select(this),t=A[0],G=t.trace;p(A);B.each(function(){var H=h.select(this).selectAll("g.slice").data(A);H.enter().append("g").classed("slice",!0);H.exit().remove();H.each(function(I,J){if(I.hidden)h.select(this).selectAll("path,g").remove();else{I.pointNumber=I.i;I.curveNumber=G.index;var L=t.cx,E=t.cy,
K=h.select(this),N=K.selectAll("path.surface").data([I]);N.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});K.call(g,D,A);var O="M"+(L+I.TR[0])+","+(E+I.TR[1])+q(I.TR,I.BR)+q(I.BR,I.BL)+q(I.BL,I.TL)+"Z";N.attr("d",O);w(D,I,t);N=e.castOption(G.textposition,I.pts);K=K.selectAll("g.slicetext").data(I.text&&"none"!==N?[0]:[]);K.enter().append("g").classed("slicetext",!0);K.exit().remove();K.each(function(){var Q=f.ensureSingle(h.select(this),"text","",function(V){V.attr("data-notex",
1)}),P=f.ensureUniformFontSize(D,m(G,I,x.font));Q.text(I.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(a.font,P).call(d.convertToTspans,D);var T=a.bBox(Q.node());T=l(Math.max(I.TL[0],I.BL[0])+L,Math.min(I.TR[0],I.BR[0])+L,Math.min(I.BL[1],I.BR[1])+E,Math.max(I.TL[1],I.TR[1])+E,T,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"});T.fontSize=P.size;k(G.type,T,x);A[J].transform=T;Q.attr("transform",f.getTextTransform(T))})}});H=h.select(this).selectAll("g.titletext").data(G.title.text?
[0]:[]);H.enter().append("g").classed("titletext",!0);H.exit().remove();H.each(function(){var I=f.ensureSingle(h.select(this),"text","",function(L){L.attr("data-notex",1)}),J=G.title.text;G._meta&&(J=f.templateString(J,G._meta));I.text(J).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(a.font,G.title.font).call(d.convertToTspans,D);J=v(t,x._size);I.attr("transform","translate("+J.x+","+J.y+")"+(1>J.scale?"scale("+J.scale+")":"")+"translate("+J.tx+","+J.ty+")")})})})}},{"../../components/drawing":637,
"../../lib":749,"../../lib/svg_text_utils":773,"../bar/plot":901,"../bar/uniform_text":906,"../pie/helpers":1134,"../pie/plot":1138,d3:169}],1033:[function(b,y,F){var q=b("d3"),n=b("../pie/style_one"),p=b("../bar/uniform_text").resizeText;y.exports=function(h){var a=h._fullLayout._funnelarealayer.selectAll(".trace");p(h,a,"funnelarea");a.each(function(f){var d=f[0].trace;f=q.select(this);f.style({opacity:d.opacity});f.selectAll("path.surface").each(function(l){q.select(this).call(n,l,d)})})}},{"../bar/uniform_text":906,
"../pie/style_one":1140,d3:169}],1034:[function(b,y,F){F=b("../scatter/attributes");var q=b("../../plots/attributes"),n=b("../../plots/template_attributes").hovertemplateAttrs,p=b("../../components/colorscale/attributes");b("../../constants/docs");b=b("../../lib/extend").extendFlat;y.exports=b({z:{valType:"data_array",editType:"calc"},x:b({},F.x,{impliedEdits:{xtype:"array"}}),x0:b({},F.x0,{impliedEdits:{xtype:"scaled"}}),dx:b({},F.dx,{impliedEdits:{xtype:"scaled"}}),y:b({},F.y,{impliedEdits:{ytype:"array"}}),
y0:b({},F.y0,{impliedEdits:{ytype:"scaled"}}),dy:b({},F.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",
dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},hovertemplate:n(),showlegend:b({},q.showlegend,{dflt:!1})},{transforms:void 0},p("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../constants/docs":719,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,
"../scatter/attributes":1155}],1035:[function(b,y,F){function q(r){for(var u=[],v=r.length,w=0;w<v;w++){var D=r[w];D!==m&&u.push(D)}return u}function n(r,u,v){for(var w=[],D=-1,C=0;C<v.length;C++)if(u[C]!==m){D++;w[D]=[];for(var x=0;x<v[C].length;x++)r[x]!==m&&w[D].push(v[C][x])}return w}var p=b("../../registry"),h=b("../../lib"),a=b("../../plots/cartesian/axes"),f=b("../histogram2d/calc"),d=b("../../components/colorscale/calc"),l=b("./convert_column_xyz"),k=b("./clean_2d_array"),c=b("./interp2d"),
e=b("./find_empties"),g=b("./make_bound_array"),m=b("../../constants/numerical").BADNUM;y.exports=function(r,u){function v(P){B=u._input.zsmooth=u.zsmooth=!1;h.warn('cannot use zsmooth: "fast": '+P)}var w=a.getFromId(r,u.xaxis||"x"),D=a.getFromId(r,u.yaxis||"y"),C=p.traceIs(u,"contour"),x=p.traceIs(u,"histogram"),A=p.traceIs(u,"gl2d"),B=C?"best":u.zsmooth,t;w._minDtick=0;D._minDtick=0;if(x){var G=f(r,u);var H=G.x;var I=G.x0;var J=G.dx;var L=G.y;var E=G.y0;var K=G.dy;var N=G.z}else N=u.z,h.isArray1D(N)?
(l(u,w,D,"x","y",["z"]),H=u._x,L=u._y,N=u._z):(H=u._x=u.x?w.makeCalcdata(u,"x"):[],L=u._y=u.y?D.makeCalcdata(u,"y"):[]),I=u.x0,J=u.dx,E=u.y0,K=u.dy,N=k(N,u,w,D);if(w.rangebreaks||D.rangebreaks)N=n(H,L,N),x||(H=q(H),L=q(L),u._x=H,u._y=L);x||!C&&!u.connectgaps||(u._emptypoints=e(N),c(N,u._emptypoints));if("fast"===B)if("log"===w.type||"log"===D.type)v("log axis found");else if(!x){if(H.length){var O=(H[H.length-1]-H[0])/(H.length-1),Q=Math.abs(O/100);for(t=0;t<H.length-1;t++)if(Math.abs(H[t+1]-H[t]-
O)>Q){v("x scale is not linear");break}}if(L.length&&"fast"===B)for(O=(L[L.length-1]-L[0])/(L.length-1),Q=Math.abs(O/100),t=0;t<L.length-1;t++)if(Math.abs(L[t+1]-L[t]-O)>Q){v("y scale is not linear");break}}t=h.maxRowLength(N);H="scaled"===u.xtype?"":H;O=g(u,H,I,J,t,w);L="scaled"===u.ytype?"":L;Q=g(u,L,E,K,N.length,D);A||(u._extremes[w._id]=a.findExtremes(w,O),u._extremes[D._id]=a.findExtremes(D,Q));A={x:O,y:Q,z:N,text:u._text||u.text,hovertext:u._hovertext||u.hovertext};H&&H.length===O.length-1&&
(A.xCenter=H);L&&L.length===Q.length-1&&(A.yCenter=L);x&&(A.xRanges=G.xRanges,A.yRanges=G.yRanges,A.pts=G.pts);C||d(r,u,{vals:N,cLetter:"z"});C&&u.contours&&"heatmap"===u.contours.coloring&&(r={type:"contour"===u.type?"heatmap":"histogram2d",xcalendar:u.xcalendar,ycalendar:u.ycalendar},A.xfill=g(r,H,I,J,t,w),A.yfill=g(r,L,E,K,N.length,D));return[A]}},{"../../components/colorscale/calc":623,"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"../histogram2d/calc":1067,
"./clean_2d_array":1036,"./convert_column_xyz":1038,"./find_empties":1040,"./interp2d":1043,"./make_bound_array":1044}],1036:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../../lib"),p=b("../../constants/numerical").BADNUM;y.exports=function(h,a,f,d){function l(C){if(q(C))return+C}function k(C){if(a&&"carpet"!==a.type&&"contourcarpet"!==a.type&&C&&"category"===C.type&&a["_"+C._id.charAt(0)].length){var x=C._id.charAt(0),A={};x=a["_"+x+"CategoryMap"]||a[x];for(e=0;e<x.length;e++)A[x[e]]=e;return function(B){B=
A[C._categories[B]];return B+1?B:p}}return n.identity}var c,e,g;if(a&&a.transpose){for(e=c=0;e<h.length;e++)c=Math.max(c,h[e].length);if(0===c)return!1;var m=function(C){return C.length};var r=function(C,x,A){return(C[A]||[])[x]}}else c=h.length,m=function(C,x){return C[x].length},r=function(C,x,A){return(C[x]||[])[A]};var u=function(C,x,A){return x===p||A===p?p:r(C,x,A)},v=k(f),w=k(d);d&&"category"===d.type&&(c=d._categories.length);var D=Array(c);for(e=0;e<c;e++)for(d=f&&"category"===f.type?f._categories.length:
m(h,e),D[e]=Array(d),g=0;g<d;g++)D[e][g]=l(u(h,w(e),v(g)));return D}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],1037:[function(b,y,F){y.exports={min:"zmin",max:"zmax"}},{}],1038:[function(b,y,F){var q=b("../../lib"),n=b("../../constants/numerical").BADNUM;y.exports=function(p,h,a,f,d,l){var k=p._length,c=h.makeCalcdata(p,f),e=a.makeCalcdata(p,d),g=p.text,m=void 0!==g&&q.isArray1D(g),r=p.hovertext,u=void 0!==r&&q.isArray1D(r),v,w=q.distinctVals(c),D=w.vals,C=q.distinctVals(e),
x=C.vals,A=[],B,t;var G=x.length;var H=D.length;for(v=0;v<l.length;v++)A[v]=q.init2dArray(G,H);m&&(B=q.init2dArray(G,H));u&&(t=q.init2dArray(G,H));H=q.init2dArray(G,H);for(v=0;v<k;v++)if(c[v]!==n&&e[v]!==n){var I=q.findBin(c[v]+w.minDiff/2,D),J=q.findBin(e[v]+C.minDiff/2,x);for(G=0;G<l.length;G++)A[G][J][I]=p[l[G]][v],H[J][I]=v;m&&(B[J][I]=g[v]);u&&(t[J][I]=r[v])}p["_"+f]=D;p["_"+d]=x;for(G=0;G<l.length;G++)p["_"+l[G]]=A[G];m&&(p._text=B);u&&(p._hovertext=t);h&&"category"===h.type&&(p["_"+f+"CategoryMap"]=
D.map(function(L){return h._categories[L]}));a&&"category"===a.type&&(p["_"+d+"CategoryMap"]=x.map(function(L){return a._categories[L]}));p._after2before=H}},{"../../constants/numerical":724,"../../lib":749}],1039:[function(b,y,F){var q=b("../../lib"),n=b("./xyz_defaults"),p=b("./style_defaults"),h=b("../../components/colorscale/defaults"),a=b("./attributes");y.exports=function(f,d,l,k){function c(e,g){return q.coerce(f,d,a,e,g)}n(f,d,c,k)?(c("text"),c("hovertext"),c("hovertemplate"),p(f,d,c,k),c("hoverongaps"),
c("connectgaps",q.isArray1D(d.z)&&!1!==d.zsmooth),h(f,d,k,c,{prefix:"",cLetter:"z"})):d.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1034,"./style_defaults":1047,"./xyz_defaults":1048}],1040:[function(b,y,F){var q=b("../../lib").maxRowLength;y.exports=function(n){var p=[],h={},a=[],f=n[0],d=[],l=[0,0,0],k=q(n),c,e,g;for(c=0;c<n.length;c++){var m=d;d=f;f=n[c+1]||[];for(e=0;e<k;e++)void 0===d[e]&&((g=(void 0!==d[e-1]?1:0)+(void 0!==d[e+1]?1:0)+(void 0!==m[e]?
1:0)+(void 0!==f[e]?1:0))?(0===c&&g++,0===e&&g++,c===n.length-1&&g++,e===d.length-1&&g++,4>g&&(h[[c,e]]=[c,e,g]),p.push([c,e,g])):a.push([c,e]))}for(;a.length;){f={};d=!1;for(n=a.length-1;0<=n;n--){var r=a[n];c=r[0];e=r[1];if(g=((h[[c-1,e]]||l)[2]+(h[[c+1,e]]||l)[2]+(h[[c,e-1]]||l)[2]+(h[[c,e+1]]||l)[2])/20)f[r]=[c,e,g],a.splice(n,1),d=!0}if(!d)throw"findEmpties iterated with no new neighbors";for(r in f)h[r]=f[r],p.push(f[r])}return p.sort(function(u,v){return v[2]-u[2]})}},{"../../lib":749}],1041:[function(b,
y,F){var q=b("../../components/fx"),n=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../../components/colorscale").extractOpts;y.exports=function(a,f,d,l,k,c){var e=a.cd[0];l=e.trace;k=a.xa;var g=a.ya,m=e.x,r=e.y,u=e.z,v=e.xCenter,w=e.yCenter,D=e.zmask,C=l.zhoverformat,x=m,A=r;if(!1!==a.index){try{var B=Math.round(a.index[1]);var t=Math.round(a.index[0])}catch(H){n.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(0>B||B>=u[0].length||0>t||t>u.length)return}else{if(0<
q.inbox(f-m[0],f-m[m.length-1],0)||0<q.inbox(d-r[0],d-r[r.length-1],0))return;if(c){x=[2*m[0]-m[1]];for(B=1;B<m.length;B++)x.push((m[B]+m[B-1])/2);x.push([2*m[m.length-1]-m[m.length-2]]);A=[2*r[0]-r[1]];for(B=1;B<r.length;B++)A.push((r[B]+r[B-1])/2);A.push([2*r[r.length-1]-r[r.length-2]])}B=Math.max(0,Math.min(x.length-2,n.findBin(f,x)));t=Math.max(0,Math.min(A.length-2,n.findBin(d,A)))}f=k.c2p(m[B]);d=k.c2p(m[B+1]);x=g.c2p(r[t]);A=g.c2p(r[t+1]);c?(d=f,c=m[B],A=x,w=r[t]):(c=v?v[B]:(m[B]+m[B+1])/2,
w=w?w[t]:(r[t]+r[t+1])/2,k&&"category"===k.type&&(c=m[B]),g&&"category"===g.type&&(w=r[t]),l.zsmooth&&(f=d=k.c2p(c),x=A=g.c2p(w)));g=u[t][B];D&&!D[t][B]&&(g=void 0);if(void 0!==g||l.hoverongaps){var G;Array.isArray(e.hovertext)&&Array.isArray(e.hovertext[t])?G=e.hovertext[t][B]:Array.isArray(e.text)&&Array.isArray(e.text[t])&&(G=e.text[t][B]);e=h(l);k=p.tickText({type:"linear",range:[e.min,e.max],hoverformat:C,_separators:k._separators,_numFormat:k._numFormat},g,"hover").text;return[n.extendFlat(a,
{index:l._after2before?l._after2before[t][B]:[t,B],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:f,x1:d,y0:x,y1:A,xLabelVal:c,yLabelVal:w,zLabelVal:g,zLabel:k,text:G})]}}},{"../../components/colorscale":627,"../../components/fx":655,"../../lib":749,"../../plots/cartesian/axes":797}],1042:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:b("./colorbar"),style:b("./style"),hoverPoints:b("./hover"),moduleType:"trace",
name:"heatmap",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":810,"./attributes":1034,"./calc":1035,"./colorbar":1037,"./defaults":1039,"./hover":1041,"./plot":1045,"./style":1046}],1043:[function(b,y,F){function q(h,a,f){var d=0,l,k,c,e,g,m;for(l=0;l<a.length;l++){var r=a[l];var u=r[0];r=r[1];var v=h[u][r];for(k=e=g=0;4>k;k++){var w=p[k];if(c=h[u+w[0]])if(w=c[r+w[1]],void 0!==w){if(0===g)var D=m=w;else D=Math.min(D,
w),m=Math.max(m,w);e++;g+=w}}if(0===e)throw"iterateInterp2d order is wrong: no defined neighbors";h[u][r]=g/e;void 0===v?4>e&&(d=1):(h[u][r]=(1+f)*h[u][r]-f*v,m>D&&(d=Math.max(d,Math.abs(h[u][r]-v)/(m-D))))}return d}var n=b("../../lib"),p=[[-1,0],[1,0],[0,-1],[0,1]];y.exports=function(h,a){var f=1,d;q(h,a);for(d=0;d<a.length&&!(4>a[d][2]);d++);a=a.slice(d);for(d=0;100>d&&.01<f;d++)f=q(h,a,.5-.25*Math.min(1,.5*f));.01<f&&n.log("interp2d didn't converge quickly",f);return h}},{"../../lib":749}],1044:[function(b,
y,F){var q=b("../../registry"),n=b("../../lib").isArrayOrTypedArray;y.exports=function(p,h,a,f,d,l){var k=[],c=q.traceIs(p,"contour"),e=q.traceIs(p,"histogram"),g=q.traceIs(p,"gl2d");if(n(h)&&1<h.length&&!e&&"category"!==l.type)if(f=h.length,f<=d){if(c||g)k=h.slice(0,d);else if(1===d)k=[h[0]-.5,h[0]+.5];else{k=[1.5*h[0]-.5*h[1]];for(c=1;c<f;c++)k.push(.5*(h[c-1]+h[c]));k.push(1.5*h[f-1]-.5*h[f-2])}if(f<d)for(g=k[k.length-1],h=g-k[k.length-2],c=f;c<d;c++)g+=h,k.push(g)}else return c?h.slice(0,d):h.slice(0,
d+1);else for(p=p[l._id.charAt(0)+"calendar"],h=e?l.r2c(a,0,p):n(h)&&1===h.length?h[0]:void 0===a?0:("log"===l.type?l.d2c:l.r2c)(a,0,p),f=f||1,c=c||g?0:-.5;c<d;c++)k.push(h+f*c);return k}},{"../../lib":749,"../../registry":880}],1045:[function(b,y,F){function q(c,e){var g=e.length-2,m=d.constrain(d.findBin(c,e),0,g),r=e[m];c=d.constrain(m+(c-r)/(e[m+1]-r)-.5,0,g);e=Math.round(c);m=Math.abs(c-e);return c&&c!==g&&m?{bin0:e,frac:m,bin1:Math.round(e+m/(c-e))}:{bin0:e,bin1:e,frac:0}}function n(c,e){var g=
e.length-1;g=d.constrain(d.findBin(c,e),0,g);var m=e[g];c=(c-m)/(e[g+1]-m)||0;return 0>=c?{bin0:g,bin1:g,frac:0}:.5>c?{bin0:g,bin1:g+1,frac:c}:{bin0:g+1,bin1:g,frac:1-c}}function p(c,e,g){c[e]=g[0];c[e+1]=g[1];c[e+2]=g[2];c[e+3]=Math.round(255*g[3])}var h=b("d3"),a=b("tinycolor2"),f=b("../../registry"),d=b("../../lib"),l=b("../../components/colorscale").makeColorScaleFuncFromTrace,k=b("../../constants/xmlns_namespaces");y.exports=function(c,e,g,m){var r=e.xaxis,u=e.yaxis;d.makeTraceGroups(m,g,"hm").each(function(v){function w(ma,
wa){return void 0!==ma?(ma=ea(ma),ma[0]=Math.round(ma[0]),ma[1]=Math.round(ma[1]),ma[2]=Math.round(ma[2]),ca+=wa,la+=ma[0]*wa,pa+=ma[1]*wa,qa+=ma[2]*wa,ma):[0,0,0,0]}function D(ma,wa,na,ya){var Fa=ma[na.bin0];if(void 0===Fa)return w(void 0,1);ma=ma[na.bin1];var Ha=wa[na.bin0];wa=wa[na.bin1];return w(Fa+na.frac*(ma-Fa||0)+ya.frac*((Ha-Fa||0)+na.frac*(void 0===ma?void 0===wa?0:void 0===Ha?2*(wa-Fa):2*(2*wa-Ha-Fa)/3:void 0===wa?void 0===Ha?0:2*(2*Fa-ma-Ha)/3:void 0===Ha?2*(2*wa-ma-Fa)/3:wa+Fa-ma-Ha)))}
var C=h.select(this),x=v[0],A=x.trace,B=x.z,t=x.x,G=x.y,H=x.xCenter,I=x.yCenter,J=f.traceIs(A,"contour"),L=J?"best":A.zsmooth,E=B.length,K=d.maxRowLength(B),N=!1,O=!1,Q;for(Q=0;void 0===P&&Q<t.length-1;){var P=r.c2p(t[Q]);Q++}for(Q=t.length-1;void 0===T&&0<Q;){var T=r.c2p(t[Q]);Q--}T<P&&(Q=T,T=P,P=Q,N=!0);for(Q=0;void 0===V&&Q<G.length-1;){var V=u.c2p(G[Q]);Q++}for(Q=G.length-1;void 0===aa&&0<Q;){var aa=u.c2p(G[Q]);Q--}aa<V&&(Q=V,V=aa,aa=Q,O=!0);J&&(H=t,I=G,t=x.xfill,G=x.yfill);"fast"!==L&&(Q="best"===
L?0:.5,P=Math.max(-Q*r._length,P),T=Math.min((1+Q)*r._length,T),V=Math.max(-Q*u._length,V),aa=Math.min((1+Q)*u._length,aa));var ba=Math.round(T-P),Y=Math.round(aa-V);if(0>=ba||0>=Y)C.selectAll("image").data([]).exit().remove();else{"fast"===L?(aa=K,Q=E):(aa=ba,Q=Y);T=document.createElement("canvas");T.width=aa;T.height=Q;aa=T.getContext("2d");var ea=l(A,{noNumericCheck:!0,returnArray:!0});"fast"===L?(x=N?function(ma){return K-1-ma}:d.identity,J=O?function(ma){return E-1-ma}:d.identity):(x=function(ma){return d.constrain(Math.round(r.c2p(t[ma])-
P),0,ba)},J=function(ma){return d.constrain(Math.round(u.c2p(G[ma])-V),0,Y)});Q=J(0);var da=[Q,Q];N=N?0:1;O=O?0:1;var ca=0,la=0,pa=0,qa=0;if(L){A=0;try{var oa=new Uint8Array(ba*Y*4)}catch(ma){oa=Array(ba*Y*4)}if("best"===L){L=H||t;N=I||G;O=Array(L.length);x=Array(N.length);J=Array(ba);H=H?n:q;da=I?n:q;for(Q=0;Q<L.length;Q++)O[Q]=Math.round(r.c2p(L[Q])-P);for(Q=0;Q<N.length;Q++)x[Q]=Math.round(u.c2p(N[Q])-V);for(Q=0;Q<ba;Q++)J[Q]=H(Q,O);for(I=0;I<Y;I++)for(L=da(I,x),N=B[L.bin0],O=B[L.bin1],Q=0;Q<ba;Q++,
A+=4)H=D(N,O,J[Q],L),p(oa,A,H)}else for(I=0;I<E;I++)for(L=B[I],da=J(I),Q=0;Q<ba;Q++)H=w(L[Q],1),A=4*(da*ba+x(Q)),p(oa,A,H);B=aa.createImageData(ba,Y);try{B.data.set(oa)}catch(ma){for(Q=B.data,H=Q.length,I=0;I<H;I++)Q[I]=oa[I]}aa.putImageData(B,0,0)}else{oa=A.xgap;A=A.ygap;var ka=Math.floor(oa/2),ra=Math.floor(A/2);for(I=0;I<E;I++)if(L=B[I],da.reverse(),da[O]=J(I+1),da[0]!==da[1]&&void 0!==da[0]&&void 0!==da[1]){Q=x(0);var ha=[Q,Q];for(Q=0;Q<K;Q++)ha.reverse(),ha[N]=x(Q+1),ha[0]!==ha[1]&&void 0!==
ha[0]&&void 0!==ha[1]&&(H=L[Q],H=w(H,(ha[1]-ha[0])*(da[1]-da[0])),aa.fillStyle="rgba("+H.join(",")+")",aa.fillRect(ha[0]+ka,da[0]+ra,ha[1]-ha[0]-oa,da[1]-da[0]-A))}}la=Math.round(la/ca);pa=Math.round(pa/ca);qa=Math.round(qa/ca);B=a("rgb("+la+","+pa+","+qa+")");c._hmpixcount=(c._hmpixcount||0)+ca;c._hmlumcount=(c._hmlumcount||0)+ca*B.getLuminance();v=C.selectAll("image").data(v);v.enter().append("svg:image").attr({xmlns:k.svg,preserveAspectRatio:"none"});v.attr({height:Y,width:ba,x:P,y:V,"xlink:href":T.toDataURL("image/png")})}})}},
{"../../components/colorscale":627,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../registry":880,d3:169,tinycolor2:548}],1046:[function(b,y,F){var q=b("d3");y.exports=function(n){q.select(n).selectAll(".hm image").style("opacity",function(p){return p.trace.opacity})}},{d3:169}],1047:[function(b,y,F){y.exports=function(q,n,p){!1===p("zsmooth")&&(p("xgap"),p("ygap"));p("zhoverformat")}},{}],1048:[function(b,y,F){function q(a,f){var d=f(a);"scaled"===(d?f(a+"type","array"):"scaled")&&(f(a+
"0"),f("d"+a));return d}var n=b("fast-isnumeric"),p=b("../../lib"),h=b("../../registry");y.exports=function(a,f,d,l,k,c){var e=d("z");k=k||"x";c=c||"y";if(void 0===e||!e.length)return 0;if(p.isArray1D(a.z)){var g=d(k);d=d(c);g=p.minRowLength(g);d=p.minRowLength(d);if(0===g||0===d)return 0;f._length=Math.min(g,d,e.length)}else{q(k,d);q(c,d);g=!0;for(var m=!1,r=!1,u,v=0;v<e.length;v++){u=e[v];if(!p.isArrayOrTypedArray(u)){g=!1;break}0<u.length&&(m=!0);for(var w=0;w<u.length;w++)if(n(u[w])){r=!0;break}}if(!(g&&
m&&r))return 0;d("transpose");f._length=null}if("heatmapgl"===a.type||"contourgl"===a.type)return!0;h.getComponentMethod("calendars","handleTraceDefaults")(a,f,[k,c],l);return!0}},{"../../lib":749,"../../registry":880,"fast-isnumeric":241}],1049:[function(b,y,F){F=b("../heatmap/attributes");var q=b("../../components/colorscale/attributes"),n=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;for(var p="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),h={},a=0;a<
p.length;a++){var f=p[a];h[f]=F[f]}h.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};n(h,q("",{cLetter:"z",autoColorDflt:!1}));y.exports=b(h,"calc","nested")},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../heatmap/attributes":1034}],1050:[function(b,y,F){function q(a,f){this.scene=a;this.uid=f;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=
[];this.bounds=[0,0,0,0];this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=n(a.glplot,this.options);this.heatmap._trace=this}var n=b("gl-heatmap2d"),p=b("../../plots/cartesian/axes"),h=b("../../lib/str2rgbarray");b=q.prototype;b.handlePick=function(a){var f=this.options,d=f.shape,l=a.pointId,k=l%d[0];d=Math.floor(l/d[0]);return{trace:this,dataCoord:a.dataCoord,traceCoord:[f.x[k],f.y[d],f.z[l]],textLabel:this.textLabels[l],name:this.name,pointIndex:[d,
k],hoverinfo:this.hoverinfo}};b.update=function(a,f){f=f[0];this.index=a.index;this.name=a.name;this.hoverinfo=a.hoverinfo;var d=f.z;this.options.z=[].concat.apply([],d);this.options.shape=[d[0].length,d.length];this.options.x=f.x;this.options.y=f.y;this.options.zsmooth=a.zsmooth;d=a.colorscale;for(var l=a.zmin,k=a.zmax,c=d.length,e=Array(c),g=Array(4*c),m=0;m<c;m++){var r=d[m],u=h(r[1]);e[m]=l+r[0]*(k-l);for(r=0;4>r;r++)g[4*m+r]=u[r]}this.options.colorLevels=e;this.options.colorValues=g;this.textLabels=
[].concat.apply([],a.text);this.heatmap.update(this.options);d=this.scene.xaxis;l=this.scene.yaxis;if(!1===a.zsmooth){var v={ppad:f.x[1]-f.x[0]};var w={ppad:f.y[1]-f.y[0]}}a._extremes[d._id]=p.findExtremes(d,f.x,v);a._extremes[l._id]=p.findExtremes(l,f.y,w)};b.dispose=function(){this.heatmap.dispose()};y.exports=function(a,f,d){a=new q(a,f.uid);a.update(f,d);return a}},{"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"gl-heatmap2d":268}],1051:[function(b,y,F){var q=b("../../lib"),n=
b("../heatmap/xyz_defaults"),p=b("../../components/colorscale/defaults"),h=b("./attributes");y.exports=function(a,f,d,l){function k(c,e){return q.coerce(a,f,h,c,e)}n(a,f,k,l)?(k("text"),k("zsmooth"),p(a,f,l,k,{prefix:"",cLetter:"z"})):f.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"../heatmap/xyz_defaults":1048,"./attributes":1049}],1052:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../heatmap/calc"),
plot:b("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":837,"../heatmap/calc":1035,"../heatmap/colorbar":1037,"./attributes":1049,"./convert":1050,"./defaults":1051}],1053:[function(b,y,F){F=b("../bar/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,n=b("./bin_attributes"),p=b("./constants");b=b("../../lib/extend").extendFlat;y.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},
y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b({},F.text,{}),hovertext:b({},F.hovertext,{}),orientation:F.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",
editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:n("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:n("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:q({},{keys:p.eventDataKeys}),marker:F.marker,offsetgroup:F.offsetgroup,
alignmentgroup:F.alignmentgroup,selected:F.selected,unselected:F.unselected,_deprecated:{bardir:F._deprecated.bardir}}},{"../../lib/extend":739,"../../plots/template_attributes":875,"../bar/attributes":890,"./bin_attributes":1055,"./constants":1059}],1054:[function(b,y,F){y.exports=function(q,n){for(var p=q.length,h=0,a=0;a<p;a++)n[a]?(q[a]/=n[a],h+=q[a]):q[a]=null;return h}},{}],1055:[function(b,y,F){y.exports=function(q,n){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},
size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1056:[function(b,y,F){var q=b("fast-isnumeric");y.exports={count:function(n,p,h){h[n]++;return 1},sum:function(n,p,h,a){p=a[p];return q(p)?(p=Number(p),h[n]+=p,p):0},avg:function(n,p,h,a,f){p=a[p];q(p)&&(p=Number(p),h[n]+=p,f[n]++);return 0},min:function(n,p,h,a){p=a[p];if(q(p)){p=Number(p);if(!q(h[n]))return h[n]=p;if(h[n]>p)return a=p-h[n],h[n]=p,a}return 0},max:function(n,p,h,a){p=a[p];if(q(p)){p=Number(p);if(!q(h[n]))return h[n]=p;if(h[n]<
p)return a=p-h[n],h[n]=p,a}return 0}}},{"fast-isnumeric":241}],1057:[function(b,y,F){function q(e,g,m,r){if(0>=e*g)return Infinity;for(var u="date"===m.type,v=n(Math.abs(g-e),u),w=0;10>w;w++){var D=n(80*v,u);if(v===D)break;var C=D;var x=e,A=g,B=m,t=r;u&&C>f?(x=p(x,B,t),A=p(A,B,t),C=C===h?0:1,C=x[C]!==A[C]):C=.1<Math.floor(A/C)-Math.floor(x/C);if(C)v=D;else break}return v}function n(e,g){return g&&e>k?e>f?e>1.1*h?h:e>1.1*a?a:f:e>d?d:e>l?l:k:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function p(e,
g,m){e=g.c2d(e,h,m).split("-");""===e[0]&&(e.unshift(),e[0]="-"+e[0]);return e}F=b("../../constants/numerical");var h=F.ONEAVGYEAR,a=F.ONEAVGMONTH,f=F.ONEDAY,d=F.ONEHOUR,l=F.ONEMIN,k=F.ONESEC,c=b("../../plots/cartesian/axes").tickIncrement;y.exports=function(e,g,m,r,u){var v=-1.1*g,w=-.1*g,D=e-w;g=m[0];m=m[1];D=Math.min(q(g+w,g+D,r,u),q(m+w,m+D,r,u));v=Math.min(q(g+v,g+w,r,u),q(m+v,m+w,r,u));if(D>v&&v<Math.abs(m-g)/4E3){var C=D;var x=!1}else C=Math.min(D,v),x=!0;if("date"===r.type&&C>f){var A=C===
h?1:6,B=C===h?"M12":"M1";return function(t,G){var H=r.c2d(t,h,u),I=H.indexOf("-",A);0<I&&(H=H.substr(0,I));H=r.d2c(H,0,u);H<t&&(I=c(H,B,!1,u),(H+I)/2<t+e&&(H=I));return G&&x?c(H,B,!0,u):H}}return function(t,G){var H=C*Math.round(t/C);H+C/10<t&&H+.9*C<t+e&&(H+=C);G&&x&&(H-=C);return H}}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797}],1058:[function(b,y,F){function q(m,r,u,v,w){function D(Q,P,T){P[Q+"Found"]?(P[Q]=t(P[Q]),null===P[Q]&&(P[Q]=T[Q])):(O[Q]=P[Q]=T[Q],a.nestedProperty(G[0],
C+"."+Q).set(T[Q]))}var C=v+"bins",x=m._fullLayout,A=x._histogramBinOpts[r["_"+v+"bingroup"]];x="overlay"===x.barmode;var B,t="date"===u.type?function(Q){return Q||0===Q?a.cleanDate(Q,null,N):null}:function(Q){return h(Q)?Number(Q):null};if(r["_"+v+"autoBinFinished"])delete r["_"+v+"autoBinFinished"];else{var G=A.traces;var H=[],I=!0,J=!1,L=!1;for(B=0;B<G.length;B++){var E=G[B];if(E.visible){var K=A.dirs[B];K=E["_"+K+"pos0"]=u.makeCalcdata(E,K);H=a.concat(H,K);delete E["_"+v+"autoBinFinished"];!0===
r.visible&&(I?I=!1:(delete E._autoBin,E["_"+v+"autoBinFinished"]=1),f.traceIs(E,"2dMap")&&(J=!0),"histogram2dcontour"===E.type&&(L=!0))}}var N=G[0][v+"calendar"];B=d.autoBin(H,u,A.nbins,J,N,A.sizeFound&&A.size);var O=(G[0]._autoBin={})[A.dirs[0]]={};L&&(A.size||(B.start=u.c2r(d.tickIncrement(u.r2c(B.start,0,N),B.size,!0,N),0,N)),void 0===A.end&&(B.end=u.c2r(d.tickIncrement(u.r2c(B.end,0,N),B.size,!1,N),0,N)));if(x&&!f.traceIs(r,"2dMap")&&0===B._dataSpan&&"category"!==u.type&&"multicategory"!==u.type){if(w)return[B,
K,!0];B=n(m,r,u,v,C)}K=E.cumulative||{};K.enabled&&"include"!==K.currentbin&&("decreasing"===K.direction?B.start=u.c2r(d.tickIncrement(u.r2c(B.start,0,N),B.size,!0,N),0,N):B.end=u.c2r(d.tickIncrement(u.r2c(B.end,0,N),B.size,!1,N),0,N));A.size=B.size;A.sizeFound||(O.size=B.size,a.nestedProperty(G[0],C+".size").set(B.size));D("start",A,B);D("end",A,B)}K=r["_"+v+"pos0"];delete r["_"+v+"pos0"];w=r._input[C]||{};m=a.extendFlat({},A);L=A.start;x=u.r2l(w.start);E=void 0!==x;(A.startFound||E)&&x!==u.r2l(L)&&
(x=E?x:a.aggNums(Math.min,null,K),L={type:"category"===u.type||"multicategory"===u.type?"linear":u.type,r2l:u.r2l,dtick:A.size,tick0:L,calendar:N,range:[x,d.tickIncrement(x,A.size,!1,N)].map(u.l2r)},L=d.tickFirst(L),L>u.r2l(x)&&(L=d.tickIncrement(L,A.size,!0,N)),m.start=u.l2r(L),E||a.nestedProperty(r,C+".start").set(m.start));E=A.end;x=u.r2l(w.end);w=void 0!==x;(A.endFound||w)&&x!==u.r2l(E)&&(A=w?x:a.aggNums(Math.max,null,K),m.end=u.l2r(A),w||a.nestedProperty(r,C+".start").set(m.end));u="autobin"+
v;!1===r._input[u]&&(r._input[C]=a.extendFlat({},r[C]||{}),delete r._input[u],delete r[u]);return[m,K]}function n(m,r,u,v,w){for(var D=m._fullLayout,C=r.xaxis,x=r.yaxis,A=r.orientation,B=[],t=m._fullData,G=0;G<t.length;G++){var H=t[G];"histogram"===H.type&&!0===H.visible&&H.orientation===A&&H.xaxis===C&&H.yaxis===x&&B.push(H)}G=!1;C=Infinity;x=[r];for(A=0;A<B.length;A++)if(t=B[A],t===r)G=!0;else if(G){H=q(m,t,u,v,!0);var I=H[0],J=H[2];t["_"+v+"autoBinFinished"]=1;t["_"+v+"pos0"]=H[1];J?x.push(t):
C=Math.min(C,I.size)}else H=D._histogramBinOpts[t["_"+v+"bingroup"]],C=Math.min(C,H.size||t[w].size);m=Array(x.length);for(A=0;A<x.length;A++)for(B=x[A]["_"+v+"pos0"],t=0;t<B.length;t++)if(void 0!==B[t]){m[A]=B[t];break}isFinite(C)||(C=a.distinctVals(m).minDiff);for(A=0;A<x.length;A++)t=x[A],B=t[v+"calendar"],B={start:u.c2r(m[A]-C/2,0,B),end:u.c2r(m[A]+C/2,0,B),size:C},t._input[w]=t[w]=B,(H=D._histogramBinOpts[t["_"+v+"bingroup"]])&&a.extendFlat(H,B);return r[w]}function p(m,r,u){function v(x){C=
m[x];m[x]/=2}function w(x){D=m[x];m[x]=C+D/2;C+=D}var D,C;if("half"===u)if("increasing"===r)for(v(0),r=1;r<m.length;r++)w(r);else for(v(m.length-1),r=m.length-2;0<=r;r--)w(r);else if("increasing"===r){for(r=1;r<m.length;r++)m[r]+=m[r-1];"exclude"===u&&(m.unshift(0),m.pop())}else{for(r=m.length-2;0<=r;r--)m[r]+=m[r+1];"exclude"===u&&(m.push(0),m.shift())}}var h=b("fast-isnumeric"),a=b("../../lib"),f=b("../../registry"),d=b("../../plots/cartesian/axes"),l=b("../bar/arrays_to_calcdata"),k=b("./bin_functions"),
c=b("./norm_functions"),e=b("./average"),g=b("./bin_label_vals");y.exports={calc:function(m,r){var u=[],v=[],w=d.getFromId(m,"h"===r.orientation?r.yaxis:r.xaxis),D="h"===r.orientation?"y":"x",C={x:"y",y:"x"}[D],x=r[D+"calendar"],A=r.cumulative,B=q(m,r,w,D),t=B[0];B=B[1];var G="string"===typeof t.size,H=[],I=G?H:t,J=[],L=[],E=[],K=0,N=r.histnorm,O=r.histfunc,Q=-1!==N.indexOf("density"),P;A.enabled&&Q&&(N=N.replace(/ ?density$/,""),Q=!1);var T="max"===O||"min"===O?null:0,V=k.count;N=c[N];var aa=!1;
if(a.isArrayOrTypedArray(r[C])&&"count"!==O){var ba=r[C];aa="avg"===O;V=k[O]}C=w.r2c(t.start,0,x);for(P=w.r2c(t.end,0,x)+(C-d.tickIncrement(C,t.size,!1,x))/1E6;C<P&&1E6>u.length;){O=d.tickIncrement(C,t.size,!1,x);u.push((C+O)/2);v.push(T);E.push([]);H.push(C);Q&&J.push(1/(O-C));aa&&L.push(0);if(O<=C)break;C=O}H.push(C);G||"date"!==w.type||(I={start:w.r2c(I.start,0,x),end:w.r2c(I.end,0,x),size:I.size});m._fullLayout._roundFnOpts||(m._fullLayout._roundFnOpts={});var Y=r["_"+D+"bingroup"];T={leftGap:Infinity,
rightGap:Infinity};Y&&(m._fullLayout._roundFnOpts[Y]||(m._fullLayout._roundFnOpts[Y]=T),T=m._fullLayout._roundFnOpts[Y]);O=v.length;D=!0;P=T.leftGap;var ea=T.rightGap;G={};for(C=0;C<B.length;C++){var da=B[C];Q=a.findBin(da,I);0<=Q&&Q<O&&(K+=V(Q,C,v,ba,L),D&&E[Q].length&&da!==B[E[Q][0]]&&(D=!1),E[Q].push(C),G[C]=Q,P=Math.min(P,da-H[Q]),ea=Math.min(ea,H[Q+1]-da))}T.leftGap=P;T.rightGap=ea;var ca;D||(ca=function(la,pa){return function(){var qa=m._fullLayout._roundFnOpts[Y];return g(qa.leftGap,qa.rightGap,
H,w,x)(la,pa)}});aa&&(K=e(v,L));N&&N(v,K,J);A.enabled&&p(v,A.direction,A.currentbin);J=Math.min(u.length,v.length);ba=[];L=0;I=J-1;for(C=0;C<J;C++)if(v[C]){L=C;break}for(C=J-1;C>=L;C--)if(v[C]){I=C;break}for(C=L;C<=I;C++)h(u[C])&&h(v[C])&&(J={p:u[C],s:v[C],b:0},A.enabled||(J.pts=E[C],D?J.ph0=J.ph1=E[C].length?B[E[C][0]]:u[C]:(r._computePh=!0,J.ph0=ca(H[C]),J.ph1=ca(H[C+1],!0))),ba.push(J));1===ba.length&&(ba[0].width1=d.tickIncrement(ba[0].p,t.size,!1,x)-ba[0].p);l(ba,r);a.isArrayOrTypedArray(r.selectedpoints)&&
a.tagSelected(ba,r,G);return ba},calcAllAutoBins:q}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"../bar/arrays_to_calcdata":889,"./average":1054,"./bin_functions":1056,"./bin_label_vals":1057,"./norm_functions":1065,"fast-isnumeric":241}],1059:[function(b,y,F){y.exports={eventDataKeys:["binNumber"]}},{}],1060:[function(b,y,F){var q=b("../../lib"),n=b("../../plots/cartesian/axis_ids"),p=b("../../registry").traceIs,h=b("../bar/defaults").handleGroupingDefaults,a=q.nestedProperty,
f=n.getAxisGroup,d=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],l=["x","y"];y.exports=function(k,c){function e(H,I){return q.coerce(C._input,C,C._module.attributes,H,I)}function g(H){return"v"===H.orientation?"x":"y"}function m(H,I,J){var L=H.uid+"__"+J;I||(I=L);var E=n.getFromTrace({_fullLayout:c},H,J).type;var K=H[J+"calendar"]||"",N=r[I],O=!0;
N&&(E===N.axType&&K===N.calendar?(O=!1,N.traces.push(H),N.dirs.push(J)):(I=L,E!==N.axType&&q.warn(["Attempted to group the bins of trace",H.index,"set on a","type:"+E,"axis with bins on","type:"+N.axType,"axis."].join(" ")),K!==N.calendar&&q.warn(["Attempted to group the bins of trace",H.index,"set with a",K,"calendar with bins",N.calendar?"on a "+N.calendar+" calendar":"w/o a set calendar"].join(" "))));O&&(r[I]={traces:[H],dirs:[J],axType:E,calendar:H[J+"calendar"]||""});H["_"+J+"bingroup"]=I}var r=
c._histogramBinOpts={},u=[],v={},w=[],D;for(D=0;D<k.length;D++){var C=k[D];p(C,"histogram")&&(u.push(C),delete C._xautoBinFinished,delete C._yautoBinFinished,p(C,"2dMap")||h(C._input,C,c,e))}k=c._alignmentOpts||{};for(D=0;D<u.length;D++){C=u[D];var x="";if(!p(C,"2dMap")){var A=g(C);if("group"===c.barmode&&C.alignmentgroup){var B=f(c,C[A+"axis"])+C.orientation;(k[B]||{})[C.alignmentgroup]&&(x=B)}x||"overlay"===c.barmode||(x=f(c,C.xaxis)+f(c,C.yaxis)+g(C))}x?(v[x]||(v[x]=[]),v[x].push(C)):w.push(C)}for(x in v)if(u=
v[x],1===u.length)w.push(u[0]);else{k=!1;for(D=0;D<u.length;){C=u[D];k=e("bingroup");break}x=k||x;for(D=0;D<u.length;D++)C=u[D],(k=C._input.bingroup)&&k!==x&&q.warn(["Trace",C.index,"must match within bingroup",x+".","Ignoring its bingroup:",k,"setting."].join(" ")),C.bingroup=x,m(C,x,g(C))}for(D=0;D<w.length;D++)if(C=w[D],v=e("bingroup"),p(C,"2dMap"))for(u=0;2>u;u++)A=l[u],k=e(A+"bingroup",v?v+"__"+A:null),m(C,k,A);else m(C,v,g(C));for(x in r)for(v=r[x],u=v.traces,w=0;w<d.length;w++)if(k=d[w],B=
k.name,"nbins"!==B||!v.sizeFound){for(D=0;D<u.length;D++){C=u[D];A=v.dirs[D];var t=k.aStr[A];if(void 0!==a(C._input,t).get()){v[B]=e(t);v[B+"Found"]=!0;break}var G=(C._autoBin||{})[A]||{};G[B]&&a(C,t).set(G[B])}if("start"===B||"end"===B)for(;D<u.length;D++)C=u[D],C["_"+A+"bingroup"]&&(G=(C._autoBin||{})[A]||{},e(t,G[B]));"nbins"!==B||v.sizeFound||v.nbinsFound||(C=u[0],v[B]=e(t))}}},{"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../registry":880,"../bar/defaults":894}],1061:[function(b,
y,F){var q=b("../../registry"),n=b("../../lib"),p=b("../../components/color"),h=b("../bar/style_defaults"),a=b("./attributes");y.exports=function(f,d,l,k){function c(u,v){return n.coerce(f,d,a,u,v)}var e=c("x"),g=c("y");c("cumulative.enabled")&&(c("cumulative.direction"),c("cumulative.currentbin"));c("text");c("hovertext");c("hovertemplate");var m=c("orientation",g&&!e?"h":"v"),r="v"===m?"x":"y";m="v"===m?"y":"x";(e=e&&g?Math.min(n.minRowLength(e)&&n.minRowLength(g)):n.minRowLength(d[r]||[]))?(d._length=
e,q.getComponentMethod("calendars","handleTraceDefaults")(f,d,["x","y"],k),d[m]&&c("histfunc"),c("histnorm"),c("autobin"+r),h(f,d,c,l,k),n.coerceSelectionMarkerOpacity(d,c),l=(d.marker.line||{}).color,k=q.getComponentMethod("errorbars","supplyDefaults"),k(f,d,l||p.defaultLine,{axis:"y"}),k(f,d,l||p.defaultLine,{axis:"x",inherit:"y"})):d.visible=!1}},{"../../components/color":615,"../../lib":749,"../../registry":880,"../bar/style_defaults":905,"./attributes":1053}],1062:[function(b,y,F){y.exports=
function(q,n,p,h,a){q.x="xVal"in n?n.xVal:n.x;q.y="yVal"in n?n.yVal:n.y;"zLabelVal"in n&&(q.z=n.zLabelVal);n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);if(!(p.cumulative||{}).enabled){n=Array.isArray(a)?h[0].pts[a[0]][a[1]]:h[a].pts;q.pointNumbers=n;q.binNumber=q.pointNumber;delete q.pointNumber;delete q.pointIndex;if(p._indexToPoints)for(h=[],a=0;a<n.length;a++)h=h.concat(p._indexToPoints[n[a]]);else h=n;q.pointIndices=h}return q}},{}],1063:[function(b,y,F){var q=b("../bar/hover").hoverPoints,n=b("../../plots/cartesian/axes").hoverLabelText;
y.exports=function(p,h,a,f){if(h=q(p,h,a,f))return p=h[0],a=p.cd[p.index],f=p.cd[0].trace,f.cumulative.enabled||(f="h"===f.orientation?"y":"x",p[f+"Label"]=n(p[f+"a"],a.ph0,a.ph1)),h}},{"../../plots/cartesian/axes":797,"../bar/hover":897}],1064:[function(b,y,F){y.exports={attributes:b("./attributes"),layoutAttributes:b("../bar/layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),supplyLayoutDefaults:b("../bar/layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("../bar/cross_trace_calc").crossTraceCalc,
plot:b("../bar/plot").plot,layerName:"barlayer",style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,colorbar:b("../scatter/marker_colorbar"),hoverPoints:b("./hover"),selectPoints:b("../bar/select"),eventData:b("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar histogram oriented errorBarsOK showLegend".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/cross_trace_calc":893,"../bar/layout_attributes":899,
"../bar/layout_defaults":900,"../bar/plot":901,"../bar/select":902,"../bar/style":904,"../scatter/marker_colorbar":1173,"./attributes":1053,"./calc":1058,"./cross_trace_defaults":1060,"./defaults":1061,"./event_data":1062,"./hover":1063}],1065:[function(b,y,F){y.exports={percent:function(q,n){var p=q.length;n=100/n;for(var h=0;h<p;h++)q[h]*=n},probability:function(q,n){for(var p=q.length,h=0;h<p;h++)q[h]/=n},density:function(q,n,p,h){n=q.length;h=h||1;for(var a=0;a<n;a++)q[a]=q[a]*p[a]*h},"probability density":function(q,
n,p,h){var a=q.length;h&&(n/=h);for(h=0;h<a;h++)q[h]*=p[h]/n}}},{}],1066:[function(b,y,F){F=b("../histogram/attributes");var q=b("../histogram/bin_attributes"),n=b("../heatmap/attributes"),p=b("../../plots/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;y.exports=b({x:F.x,y:F.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:F.histnorm,
histfunc:F.histfunc,nbinsx:F.nbinsx,xbins:q("x"),nbinsy:F.nbinsy,ybins:q("y"),autobinx:F.autobinx,autobiny:F.autobiny,bingroup:b({},F.bingroup,{}),xbingroup:b({},F.bingroup,{}),ybingroup:b({},F.bingroup,{}),xgap:n.xgap,ygap:n.ygap,zsmooth:n.zsmooth,zhoverformat:n.zhoverformat,hovertemplate:h({},{keys:"z"}),showlegend:b({},p.showlegend,{dflt:!1})},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,
"../heatmap/attributes":1034,"../histogram/attributes":1053,"../histogram/bin_attributes":1055}],1067:[function(b,y,F){function q(e,g,m,r){var u=Array(e);if(r)for(m=0;m<e;m++)u[m]=1/(g[m+1]-g[m]);else for(g=1/m,m=0;m<e;m++)u[m]=g;return u}function n(e,g){return{start:e(g.start),end:e(g.end),size:g.size}}function p(e,g,m,r,u,v){var w=e.length-1,D=Array(w);r=k(m,r,e,u,v);for(m=0;m<w;m++)u=(g||[])[m],D[m]=void 0===u?[r(e[m]),r(e[m+1],!0)]:[u,u];return D}var h=b("../../lib"),a=b("../../plots/cartesian/axes"),
f=b("../histogram/bin_functions"),d=b("../histogram/norm_functions"),l=b("../histogram/average"),k=b("../histogram/bin_label_vals"),c=b("../histogram/calc").calcAllAutoBins;y.exports=function(e,g){var m=a.getFromId(e,g.xaxis),r=a.getFromId(e,g.yaxis),u=g.xcalendar,v=g.ycalendar,w=function(wa){return m.r2c(wa,0,u)},D=function(wa){return r.r2c(wa,0,v)},C=c(e,g,m,"x");var x=C[0];C=C[1];e=c(e,g,r,"y");var A=e[0];e=e[1];var B=g._length;C.length>B&&C.splice(B,C.length-B);e.length>B&&e.splice(B,e.length-
B);var t=[],G=[],H=[],I="string"===typeof x.size,J="string"===typeof A.size,L=[],E=[],K=I?L:x,N=J?E:A,O=0,Q=[],P=[],T=g.histnorm,V=g.histfunc,aa=-1!==T.indexOf("density"),ba="max"===V||"min"===V?null:0,Y=f.count;T=d[T];var ea=!1,da=[],ca=[];(g="z"in g?g.z:"marker"in g&&Array.isArray(g.marker.color)?g.marker.color:"")&&"count"!==V&&(ea="avg"===V,Y=f[V]);V=x.size;var la=w(x.start),pa=w(x.end)+(la-a.tickIncrement(la,V,!1,u))/1E6;for(x=la;x<pa;x=a.tickIncrement(x,V,!1,u))G.push(ba),L.push(x),ea&&H.push(0);
L.push(x);ba=G.length;V=(x-la)/ba;la=m.c2r(la+V/2,0,u);var qa=A.size;pa=D(A.start);var oa=D(A.end)+(pa-a.tickIncrement(pa,qa,!1,v))/1E6;for(x=pa;x<oa;x=a.tickIncrement(x,qa,!1,v)){t.push(G.slice());E.push(x);var ka=Array(ba);for(A=0;A<ba;A++)ka[A]=[];P.push(ka);ea&&Q.push(H.slice())}E.push(x);H=t.length;A=(x-pa)/H;pa=r.c2r(pa+A/2,0,v);aa&&(da=q(G.length,K,V,I),ca=q(t.length,N,A,J));I||"date"!==m.type||(K=n(w,K));J||"date"!==r.type||(N=n(D,N));I=G=!0;J=Array(ba);aa=Array(H);var ra=ka=oa=qa=Infinity;
for(x=0;x<B;x++){var ha=C[x],ma=e[x];w=h.findBin(ha,K);D=h.findBin(ma,N);0<=w&&w<ba&&0<=D&&D<H&&(O+=Y(w,x,t[D],g,Q[D]),P[D][w].push(x),G&&(void 0===J[w]?J[w]=ha:J[w]!==ha&&(G=!1)),I&&(void 0===aa[D]?aa[D]=ma:aa[D]!==ma&&(I=!1)),qa=Math.min(qa,ha-L[w]),oa=Math.min(oa,L[w+1]-ha),ka=Math.min(ka,ma-E[D]),ra=Math.min(ra,E[D+1]-ma))}if(ea)for(D=0;D<H;D++)O+=l(t[D],Q[D]);if(T)for(D=0;D<H;D++)T(t[D],O,da,ca[D]);return{x:C,xRanges:p(L,G&&J,qa,oa,m,u),x0:la,dx:V,y:e,yRanges:p(E,I&&aa,ka,ra,r,v),y0:pa,dy:A,
z:t,pts:P}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../histogram/average":1054,"../histogram/bin_functions":1056,"../histogram/bin_label_vals":1057,"../histogram/calc":1058,"../histogram/norm_functions":1065}],1068:[function(b,y,F){var q=b("../../lib"),n=b("./sample_defaults"),p=b("../heatmap/style_defaults"),h=b("../../components/colorscale/defaults"),a=b("./attributes");y.exports=function(f,d,l,k){function c(e,g){return q.coerce(f,d,a,e,g)}n(f,d,c,k);!1!==d.visible&&(p(f,d,c,k),h(f,
d,k,c,{prefix:"",cLetter:"z"}),c("hovertemplate"))}},{"../../components/colorscale/defaults":625,"../../lib":749,"../heatmap/style_defaults":1047,"./attributes":1066,"./sample_defaults":1071}],1069:[function(b,y,F){var q=b("../heatmap/hover"),n=b("../../plots/cartesian/axes").hoverLabelText;y.exports=function(p,h,a,f,d,l){if(h=q(p,h,a,f,d,l))return p=h[0],f=p.index,d=p.cd[0],a=d.xRanges[f[1]],f=d.yRanges[f[0]],p.xLabel=n(p.xa,a[0],a[1]),p.yLabel=n(p.ya,f[0],f[1]),h}},{"../../plots/cartesian/axes":797,
"../heatmap/hover":1041}],1070:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../heatmap/calc"),plot:b("../heatmap/plot"),layerName:"heatmaplayer",colorbar:b("../heatmap/colorbar"),style:b("../heatmap/style"),hoverPoints:b("./hover"),eventData:b("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram",
"showLegend"],meta:{}}},{"../../plots/cartesian":810,"../heatmap/calc":1035,"../heatmap/colorbar":1037,"../heatmap/plot":1045,"../heatmap/style":1046,"../histogram/cross_trace_defaults":1060,"../histogram/event_data":1062,"./attributes":1066,"./defaults":1068,"./hover":1069}],1071:[function(b,y,F){var q=b("../../registry"),n=b("../../lib");y.exports=function(p,h,a,f){var d=a("x"),l=a("y");d=n.minRowLength(d);l=n.minRowLength(l);d&&l?(h._length=Math.min(d,l),q.getComponentMethod("calendars","handleTraceDefaults")(p,
h,["x","y"],f),(a("z")||a("marker.color"))&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")):h.visible=!1}},{"../../lib":749,"../../registry":880}],1072:[function(b,y,F){F=b("../histogram2d/attributes");var q=b("../contour/attributes"),n=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;y.exports=b({x:F.x,y:F.y,z:F.z,marker:F.marker,histnorm:F.histnorm,histfunc:F.histfunc,nbinsx:F.nbinsx,xbins:F.xbins,nbinsy:F.nbinsy,ybins:F.ybins,autobinx:F.autobinx,autobiny:F.autobiny,
bingroup:F.bingroup,xbingroup:F.xbingroup,ybingroup:F.ybingroup,autocontour:q.autocontour,ncontours:q.ncontours,contours:q.contours,line:{color:q.line.color,width:b({},q.line.width,{dflt:.5}),dash:q.line.dash,smoothing:q.line.smoothing,editType:"plot"},zhoverformat:F.zhoverformat,hovertemplate:F.hovertemplate},n("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../contour/attributes":977,"../histogram2d/attributes":1066}],1073:[function(b,
y,F){var q=b("../../lib"),n=b("../histogram2d/sample_defaults"),p=b("../contour/contours_defaults"),h=b("../contour/style_defaults"),a=b("./attributes");y.exports=function(f,d,l,k){function c(e,g){return q.coerce(f,d,a,e,g)}n(f,d,c,k);!1!==d.visible&&(p(f,d,c,function(e){return q.coerce2(f,d,a,e)}),h(f,d,c,k),c("hovertemplate"))}},{"../../lib":749,"../contour/contours_defaults":984,"../contour/style_defaults":998,"../histogram2d/sample_defaults":1071,"./attributes":1072}],1074:[function(b,y,F){y.exports=
{attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../contour/calc"),plot:b("../contour/plot").plot,layerName:"contourlayer",style:b("../contour/style"),colorbar:b("../contour/colorbar"),hoverPoints:b("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg 2dMap contour histogram showLegend".split(" "),meta:{}}},{"../../plots/cartesian":810,"../contour/calc":978,
"../contour/colorbar":980,"../contour/hover":990,"../contour/plot":995,"../contour/style":997,"../histogram/cross_trace_defaults":1060,"./attributes":1072,"./defaults":1073}],1075:[function(b,y,F){F=b("../../plots/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../lib/extend").extendFlat;b=b("./constants").colormodel;for(var p=["rgb","rgba","rgba256","hsl","hsla"],h=[],a=[],f=0;f<p.length;f++){var d=b[p[f]];h.push("For the `"+p[f]+"` colormodel, it is ["+(d.zminDflt||
d.min).join(", ")+"].");a.push("For the `"+p[f]+"` colormodel, it is ["+(d.zmaxDflt||d.max).join(", ")+"].")}y.exports=n({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:p,editType:"calc"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",
editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:n({},F.hoverinfo,{flags:"x y z color name text".split(" "),
dflt:"x+y+z+text+name"}),hovertemplate:q({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"./constants":1077}],1076:[function(b,y,F){function q(g,m,r,u){return function(v){return h.constrain((v-g)*m,r,u)}}function n(g,m){return function(r){return h.constrain(r,g,m)}}function p(g){var m=a.colormodel[g.colormodel],r=(m.colormodel||g.colormodel).length;g._sArray=[];for(var u=0;u<r;u++)m.min[u]!==g.zmin[u]||
m.max[u]!==g.zmax[u]?g._sArray.push(q(g.zmin[u],(m.max[u]-m.min[u])/(g.zmax[u]-g.zmin[u]),m.min[u],m.max[u])):g._sArray.push(n(m.min[u],m.max[u]));return function(v){v=v.slice(0,r);for(var w=0;w<r;w++){var D=v[w];if(!f(D))return!1;v[w]=g._sArray[w](D)}return v}}var h=b("../../lib"),a=b("./constants"),f=b("fast-isnumeric"),d=b("../../plots/cartesian/axes"),l=b("../../lib").maxRowLength,k=b("image-size"),c=b("../../snapshot/helpers").IMAGE_URL_PREFIX,e=b("buffer/").Buffer;y.exports=function(g,m){if(m._hasZ){var r=
m.z.length;var u=l(m.z)}else m._hasSource&&(r=m.source.replace(c,""),r=new e(r,"base64"),u=k(r),r=u.height,u=u.width);var v=d.getFromId(g,m.xaxis||"x");g=d.getFromId(g,m.yaxis||"y");var w=v.d2c(m.x0)-m.dx/2,D=g.d2c(m.y0)-m.dy/2,C,x=[w,w+u*m.dx],A=[D,D+r*m.dy];if(v&&"log"===v.type)for(C=0;C<u;C++)x.push(w+C*m.dx);if(g&&"log"===g.type)for(C=0;C<r;C++)A.push(D+C*m.dy);m._extremes[v._id]=d.findExtremes(v,x);m._extremes[g._id]=d.findExtremes(g,A);m._scaler=p(m);return[{x0:w,y0:D,z:m.z,w:u,h:r}]}},{"../../lib":749,
"../../plots/cartesian/axes":797,"../../snapshot/helpers":884,"./constants":1077,"buffer/":111,"fast-isnumeric":241,"image-size":418}],1077:[function(b,y,F){y.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(q){return q.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(q){return q.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(q){return q.slice(0,
4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(q){q=q.slice(0,3);q[1]+="%";q[2]+="%";return q},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(q){q=q.slice(0,4);q[1]+="%";q[2]+="%";return q},suffix:["","%","%",""]}}}},{}],1078:[function(b,y,F){var q=b("../../lib"),n=b("./attributes"),p=b("./constants"),h=b("../../snapshot/helpers").IMAGE_URL_PREFIX;y.exports=function(a,f){function d(k,c){return q.coerce(a,f,n,k,c)}d("source");f.source&&!f.source.match(h)&&
delete f.source;f._hasSource=!!f.source;var l=d("z");f._hasZ=!(void 0===l||!l.length||!l[0]||!l[0].length);f._hasZ||f._hasSource?(d("x0"),d("y0"),d("dx"),d("dy"),f._hasZ?(d("colormodel","rgb"),l=p.colormodel[f.colormodel],d("zmin",l.zminDflt||l.min),d("zmax",l.zmaxDflt||l.max)):f._hasSource&&(f.colormodel="rgba256",l=p.colormodel[f.colormodel],f.zmin=l.zminDflt,f.zmax=l.zmaxDflt),d("text"),d("hovertext"),d("hovertemplate"),f._length=null):f.visible=!1}},{"../../lib":749,"../../snapshot/helpers":884,
"./attributes":1075,"./constants":1077}],1079:[function(b,y,F){y.exports=function(q,n){"xVal"in n&&(q.x=n.xVal);"yVal"in n&&(q.y=n.yVal);n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);q.color=n.color;q.colormodel=n.trace.colormodel;q.z||(q.z=n.color);return q}},{}],1080:[function(b,y,F){var q=b("../../components/fx"),n=b("../../lib"),p=b("./constants");y.exports=function(h,a,f){var d=h.cd[0],l=d.trace,k=h.xa,c=h.ya;if(!(0<q.inbox(a-d.x0,a-(d.x0+d.w*l.dx),0)||0<q.inbox(f-d.y0,f-(d.y0+d.h*l.dy),0))){a=Math.floor((a-
d.x0)/l.dx);f=Math.floor(Math.abs(f-d.y0)/l.dy);if(l._hasZ)var e=d.z[f][a];else l._hasSource&&(e=l._canvas.el.getContext("2d").getImageData(a,f,1,1).data);if(e){var g=d.hi||l.hoverinfo,m;g&&(g=g.split("+"),-1!==g.indexOf("all")&&(g=["color"]),-1!==g.indexOf("color")&&(m=!0));var r=p.colormodel[l.colormodel],u=r.colormodel||l.colormodel,v=u.length;g=l._scaler(e);r=r.suffix;var w=[];if(l.hovertemplate||m)w.push("["+[g[0]+r[0],g[1]+r[1],g[2]+r[2]].join(", ")),4===v&&w.push(", "+g[3]+r[3]),w.push("]"),
w=w.join(""),h.extraText=u.toUpperCase()+": "+w;var D;Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[f])?D=l.hovertext[f][a]:Array.isArray(l.text)&&Array.isArray(l.text[f])&&(D=l.text[f][a]);c=c.c2p(d.y0+(f+.5)*l.dy);m=d.x0+(a+.5)*l.dx;u=d.y0+(f+.5)*l.dy;e="["+e.slice(0,l.colormodel.length).join(", ")+"]";return[n.extendFlat(h,{index:[f,a],x0:k.c2p(d.x0+a*l.dx),x1:k.c2p(d.x0+(a+1)*l.dx),y0:c,y1:c,color:g,xVal:m,xLabelVal:m,yVal:u,yLabelVal:u,zLabelVal:e,text:D,hovertemplateLabels:{zLabel:e,
colorLabel:w,"color[0]Label":g[0]+r[0],"color[1]Label":g[1]+r[1],"color[2]Label":g[2]+r[2],"color[3]Label":g[3]+r[3]}})]}}}},{"../../components/fx":655,"../../lib":749,"./constants":1077}],1081:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover"),eventData:b("./event_data"),moduleType:"trace",name:"image",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],
animatable:!1,meta:{}}},{"../../plots/cartesian":810,"./attributes":1075,"./calc":1076,"./defaults":1078,"./event_data":1079,"./hover":1080,"./plot":1082,"./style":1083}],1082:[function(b,y,F){function q(d){return"linear"===d.type&&d.range[1]>d.range[0]===("x"===d._id.charAt(0))}var n=b("d3"),p=b("../../lib"),h=b("../../constants/xmlns_namespaces"),a=b("./constants"),f=p.isIOS()||p.isSafari()||p.isIE();y.exports=function(d,l,k,c){var e=l.xaxis,g=l.yaxis,m=!(f||d._context._exportedPlot);p.makeTraceGroups(c,
k,"im").each(function(r){function u(V){var aa=document.createElement("canvas");aa.width=Q;aa.height=P;var ba=aa.getContext("2d"),Y=function(ha){return p.constrain(Math.round(e.c2p(A+ha*H)-L),0,Q)},ea=function(ha){return p.constrain(Math.round(g.c2p(B+ha*I)-K),0,P)},da=a.colormodel[D.colormodel],ca=da.colormodel||D.colormodel;da=da.fmt;for(J=0;J<w.w;J++){var la=Y(J),pa=Y(J+1);if(pa!==la&&!isNaN(pa)&&!isNaN(la))for(var qa=0;qa<w.h;qa++){var oa=ea(qa),ka=ea(qa+1);if(ka!==oa&&!isNaN(ka)&&!isNaN(oa)&&
V(J,qa)){var ra=D._scaler(V(J,qa));ba.fillStyle=ra?ca+"("+da(ra).join(",")+")":"rgba(0,0,0,0)";ba.fillRect(la,oa,pa-la,ka-oa)}}}return aa}var v=n.select(this),w=r[0],D=w.trace,C=m&&!D._hasZ&&D._hasSource&&q(e)&&q(g);D._fastImage=C;var x=w.z,A=w.x0,B=w.y0,t=w.w,G=w.h,H=D.dx,I=D.dy,J;for(J=0;void 0===L&&J<t;){var L=e.c2p(A+J*H);J++}for(J=t;void 0===E&&0<J;){var E=e.c2p(A+J*H);J--}for(J=0;void 0===K&&J<G;){var K=g.c2p(B+J*I);J++}for(J=G;void 0===N&&0<J;){var N=g.c2p(B+J*I);J--}if(E<L){var O=E;E=L;L=
O}N<K&&(O=K,K=N,N=O);C||(L=Math.max(-.5*e._length,L),E=Math.min(1.5*e._length,E),K=Math.max(-.5*g._length,K),N=Math.min(1.5*g._length,N));var Q=Math.round(E-L),P=Math.round(N-K);if(0>=Q||0>=P)v.selectAll("image").data([]).exit().remove();else{var T=v.selectAll("image").data([r]);T.enter().append("svg:image").attr({xmlns:h.svg,preserveAspectRatio:"none"});T.exit().remove();T.attr("style","image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated;");
r=(new Promise(function(V){if(D._hasZ)V();else if(D._hasSource)if(D._canvas&&D._canvas.el.width===t&&D._canvas.el.height===G&&D._canvas.source===D.source)V();else{var aa=document.createElement("canvas");aa.width=t;aa.height=G;var ba=aa.getContext("2d");D._image=D._image||new Image;var Y=D._image;Y.onload=function(){ba.drawImage(Y,0,0);D._canvas={el:aa,source:D.source};V()};Y.setAttribute("src",D.source)}})).then(function(){if(D._hasZ){var V=u(function(ba,Y){return x[Y][ba]});V=V.toDataURL("image/png")}else if(D._hasSource)if(C)V=
D.source;else{var aa=D._canvas.el.getContext("2d").getImageData(0,0,t,G).data;V=u(function(ba,Y){ba=4*(Y*t+ba);return[aa[ba],aa[ba+1],aa[ba+2],aa[ba+3]]});V=V.toDataURL("image/png")}T.attr({"xlink:href":V,height:P,width:Q,x:L,y:K})});d._promises.push(r)}})}},{"../../constants/xmlns_namespaces":725,"../../lib":749,"./constants":1077,d3:169}],1083:[function(b,y,F){var q=b("d3");y.exports=function(n){q.select(n).selectAll(".im image").style("opacity",function(p){return p[0].trace.opacity})}},{d3:169}],
1084:[function(b,y,F){F=b("../../lib/extend").extendFlat;var q=b("../../lib/extend").extendDeep,n=b("../../plot_api/edit_types").overrideAll,p=b("../../plots/font_attributes"),h=b("../../components/color/attributes"),a=b("../../plots/domain").attributes,f=b("../../plots/cartesian/layout_attributes"),d=b("../../plot_api/plot_template").templatedArray,l=b("../../constants/delta.js");b("../../constants/docs");b=p({editType:"plot",colorEditType:"plot"});var k={color:{valType:"color",editType:"plot"},
line:{color:{valType:"color",dflt:h.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"};d=d("step",q({},k,{range:c}));y.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",
anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:F({},b,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot"},font:F({},b,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",
editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot"},increasing:{symbol:{valType:"string",dflt:l.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:l.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:l.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:l.DECREASING.COLOR,
editType:"plot"},editType:"plot"},font:F({},b,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:q({},k,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:h.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:n({range:c,visible:F({},f.visible,{dflt:!0}),tickmode:f.tickmode,nticks:f.nticks,tick0:f.tick0,dtick:f.dtick,tickvals:f.tickvals,ticktext:f.ticktext,
ticks:F({},f.ticks,{dflt:"outside"}),ticklen:f.ticklen,tickwidth:f.tickwidth,tickcolor:f.tickcolor,showticklabels:f.showticklabels,tickfont:p({}),tickangle:f.tickangle,tickformat:f.tickformat,tickformatstops:f.tickformatstops,tickprefix:f.tickprefix,showtickprefix:f.showtickprefix,ticksuffix:f.ticksuffix,showticksuffix:f.showticksuffix,separatethousands:f.separatethousands,exponentformat:f.exponentformat,showexponent:f.showexponent,editType:"plot"},"plot"),steps:d,threshold:{line:{color:F({},k.line.color,
{}),width:F({},k.line.width,{dflt:1}),editType:"plot"},thickness:F({},k.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":614,"../../constants/delta.js":718,"../../constants/docs":719,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/cartesian/layout_attributes":811,"../../plots/domain":824,"../../plots/font_attributes":825}],1085:[function(b,y,F){var q=
b("../../plots/plots");F.name="indicator";F.plot=function(n,p,h,a){q.plotBasePlot(F.name,n,p,h,a)};F.clean=function(n,p,h,a){q.cleanBasePlot(F.name,n,p,h,a)}},{"../../plots/plots":860}],1086:[function(b,y,F){y.exports={calc:function(q,n){q=[];var p=n.value;"number"!==typeof n._lastValue&&(n._lastValue=n.value);var h=n._lastValue,a=h;n._hasDelta&&"number"===typeof n.delta.reference&&(a=n.delta.reference);q[0]={y:p,lastY:h,delta:p-a,relativeDelta:(p-a)/a};return q}}},{}],1087:[function(b,y,F){y.exports=
{defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1088:[function(b,y,F){function q(e,g){function m(r,u){return n.coerce(e,g,p.gauge.steps,r,u)}m("color");m("line.color");m("line.width");m("range");m("thickness")}var n=b("../../lib"),p=b("./attributes"),h=b("../../plots/domain").defaults,a=b("../../plot_api/plot_template"),f=b("../../plots/array_container_defaults"),d=b("./constants.js"),l=b("../../plots/cartesian/tick_value_defaults"),
k=b("../../plots/cartesian/tick_mark_defaults"),c=b("../../plots/cartesian/tick_label_defaults");y.exports={supplyDefaults:function(e,g,m,r){function u(G,H){return n.coerce(e,g,p,G,H)}function v(G,H){return n.coerce(x,A,p.gauge,G,H)}function w(G,H){return n.coerce(B,t,p.gauge.axis,G,H)}h(g,r,u);u("mode");g._hasNumber=-1!==g.mode.indexOf("number");g._hasDelta=-1!==g.mode.indexOf("delta");g._hasGauge=-1!==g.mode.indexOf("gauge");m=u("value");g._range=[0,"number"===typeof m?1.5*m:1];m=Array(2);if(g._hasNumber){u("number.valueformat");
u("number.font.color",r.font.color);u("number.font.family",r.font.family);u("number.font.size");void 0===g.number.font.size&&(g.number.font.size=d.defaultNumberFontSize,m[0]=!0);u("number.prefix");u("number.suffix");var D=g.number.font.size}if(g._hasDelta){u("delta.font.color",r.font.color);u("delta.font.family",r.font.family);u("delta.font.size");void 0===g.delta.font.size&&(g.delta.font.size=(g._hasNumber?.5:1)*(D||d.defaultNumberFontSize),m[1]=!0);u("delta.reference",g.value);u("delta.relative");
u("delta.valueformat",g.delta.relative?"2%":"");u("delta.increasing.symbol");u("delta.increasing.color");u("delta.decreasing.symbol");u("delta.decreasing.color");u("delta.position");var C=g.delta.font.size}g._scaleNumbers=(!g._hasNumber||m[0])&&(!g._hasDelta||m[1])||!1;u("title.font.color",r.font.color);u("title.font.family",r.font.family);u("title.font.size",.25*(D||C||d.defaultNumberFontSize));u("title.text");var x;if(g._hasGauge){(x=e.gauge)||(x={});var A=a.newContainer(g,"gauge");v("shape");(g._isBullet=
"bullet"===g.gauge.shape)||u("title.align","center");(g._isAngular="angular"===g.gauge.shape)||u("align","center");v("bgcolor",r.paper_bgcolor);v("borderwidth");v("bordercolor");v("bar.color");v("bar.line.color");v("bar.line.width");v("bar.thickness",d.valueThickness*("bullet"===g.gauge.shape?.5:1));f(x,A,{name:"steps",handleItemDefaults:q});v("threshold.value");v("threshold.thickness");v("threshold.line.width");v("threshold.line.color");var B={};x&&(B=x.axis||{});var t=a.newContainer(A,"axis");w("visible");
g._range=w("range",g._range);r={outerTicks:!0};l(B,t,w,"linear");c(B,t,w,"linear",r);k(B,t,w,r)}else u("title.align","center"),u("align","center"),g._isAngular=g._isBullet=!1;g._length=null}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_mark_defaults":819,"../../plots/cartesian/tick_value_defaults":820,"../../plots/domain":824,"./attributes":1084,"./constants.js":1087}],1089:[function(b,
y,F){y.exports={moduleType:"trace",name:"indicator",basePlotModule:b("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc").calc,plot:b("./plot"),meta:{}}},{"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./plot":1090}],1090:[function(b,y,F){function q(I,J,L,E){function K(la){la.attr("width",function(pa){return Math.max(0,da.c2p(pa.range[1])-da.c2p(pa.range[0]))}).attr("x",
function(pa){return da.c2p(pa.range[0])}).attr("y",function(pa){return.5*(1-pa.thickness)*Y}).attr("height",function(pa){return pa.thickness*Y})}var N=L[0].trace;J=E.gauge;var O=E.layer,Q=E.gaugeBg,P=E.gaugeOutline,T=E.size,V=N.domain,aa=E.transitionOpts,ba=E.onComplete;J.enter().append("g").classed("bullet",!0);J.attr("transform","translate("+T.l+", "+T.t+")");O.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0);O.selectAll("g.xbulletaxistick,path,text").remove();var Y=T.h;E=N.gauge.bar.thickness*
Y;var ea=V.x[0];V=V.x[0]+(V.x[1]-V.x[0])*(N._hasNumber||N._hasDelta?1-v.bulletNumberDomainSize:1);var da=f(I,N.gauge.axis);da._id="xbulletaxis";da.domain=[ea,V];da.setScale();V=D.calcTicks(da);ea=D.makeTransFn(da);var ca=D.getTickSigns(da)[2];T=T.t+T.h;da.visible&&(D.drawTicks(I,da,{vals:"inside"===da.ticks?D.clipEnds(da,V):V,layer:O,path:D.makeTickPath(da,T,ca),transFn:ea}),D.drawLabels(I,da,{vals:V,layer:O,transFn:ea,labelFns:D.makeLabelFns(da,T)}));I=[Q].concat(N.gauge.steps);I=J.selectAll("g.bg-bullet").data(I);
I.enter().append("g").classed("bg-bullet",!0).append("rect");I.select("rect").call(K).call(h);I.exit().remove();I=J.selectAll("g.value-bullet").data([N.gauge.bar]);I.enter().append("g").classed("value-bullet",!0).append("rect");I.select("rect").attr("height",E).attr("y",(Y-E)/2).call(h);aa&&0<aa.duration?I.select("rect").transition().duration(aa.duration).ease(aa.easing).each("end",function(){ba&&ba()}).each("interrupt",function(){ba&&ba()}).attr("width",Math.max(0,da.c2p(Math.min(N.gauge.axis.range[1],
L[0].y)))):I.select("rect").attr("width","number"===typeof L[0].y?Math.max(0,da.c2p(Math.min(N.gauge.axis.range[1],L[0].y))):0);I.exit().remove();L=L.filter(function(){return N.gauge.threshold.value});L=J.selectAll("g.threshold-bullet").data(L);L.enter().append("g").classed("threshold-bullet",!0).append("line");L.select("line").attr("x1",da.c2p(N.gauge.threshold.value)).attr("x2",da.c2p(N.gauge.threshold.value)).attr("y1",(1-N.gauge.threshold.thickness)/2*Y).attr("y2",(1-(1-N.gauge.threshold.thickness)/
2)*Y).call(B.stroke,N.gauge.threshold.line.color).style("stroke-width",N.gauge.threshold.line.width);L.exit().remove();J=J.selectAll("g.gauge-outline").data([P]);J.enter().append("g").classed("gauge-outline",!0).append("rect");J.select("rect").call(K).call(h);J.exit().remove()}function n(I,J,L,E){function K(wa){var na=Q.gauge.axis.range[0];wa=(wa-na)/(Q.gauge.axis.range[1]-na)*Math.PI-ca;return wa<-ca?-ca:wa>ca?ca:wa}function N(wa){return e.svg.arc().innerRadius((V+T)/2-wa/2*(T-V)).outerRadius((V+
T)/2+wa/2*(T-V)).startAngle(-ca)}function O(wa){wa.attr("d",function(na){return N(na.thickness).startAngle(K(na.range[0])).endAngle(K(na.range[1]))()})}var Q=L[0].trace,P=E.size,T=E.radius,V=E.innerRadius,aa=E.gaugeBg;J=E.gaugeOutline;var ba=[P.l+P.w/2,P.t+P.h/2+T/2];P=E.gauge;var Y=E.layer,ea=E.transitionOpts,da=E.onComplete,ca=Math.PI/2;P.enter().append("g").classed("angular",!0);P.attr("transform",d(ba[0],ba[1]));Y.enter().append("g").classed("angularaxis",!0).classed("crisp",!0);Y.selectAll("g.xangularaxistick,path,text").remove();
var la=f(I,Q.gauge.axis);la.type="linear";la.range=Q.gauge.axis.range;la._id="xangularaxis";la.setScale();var pa=function(wa){return(la.range[0]-wa.x)/(la.range[1]-la.range[0])*Math.PI+Math.PI},qa={},oa=D.makeLabelFns(la,0).labelStandoff;qa.xFn=function(wa){wa=pa(wa);return Math.cos(wa)*oa};qa.yFn=function(wa){var na=pa(wa);return-Math.sin(na)*(oa+wa.fontSize*(0<Math.sin(na)?.2:1))+Math.abs(Math.cos(na))*wa.fontSize*r};qa.anchorFn=function(wa){wa=pa(wa);wa=Math.cos(wa);return.1>Math.abs(wa)?"middle":
0<wa?"start":"end"};qa.heightFn=function(wa,na,ya){wa=pa(wa);return-.5*(1+Math.sin(wa))*ya};var ka=function(wa){return d(ba[0]+T*Math.cos(wa),ba[1]-T*Math.sin(wa))};var ra=function(wa){return ka(pa(wa))};var ha=function(wa){wa=pa(wa);return ka(wa)+"rotate("+-m(wa)+")"};E=D.calcTicks(la);var ma=D.getTickSigns(la)[2];la.visible&&(ma="inside"===la.ticks?-1:1,D.drawTicks(I,la,{vals:E,layer:Y,path:"M"+(la.linewidth||1)/2*ma+",0h"+ma*la.ticklen,transFn:ha}),D.drawLabels(I,la,{vals:E,layer:Y,transFn:ra,
labelFns:qa}));I=[aa].concat(Q.gauge.steps);I=P.selectAll("g.bg-arc").data(I);I.enter().append("g").classed("bg-arc",!0).append("path");I.select("path").call(O).call(h);I.exit().remove();I=N(Q.gauge.bar.thickness);aa=P.selectAll("g.value-arc").data([Q.gauge.bar]);aa.enter().append("g").classed("value-arc",!0).append("path");Y=aa.select("path");ea&&0<ea.duration?(Y.transition().duration(ea.duration).ease(ea.easing).each("end",function(){da&&da()}).each("interrupt",function(){da&&da()}).attrTween("d",
a(I,K(L[0].lastY),K(L[0].y))),Q._lastValue=L[0].y):Y.attr("d","number"===typeof L[0].y?I.endAngle(K(L[0].y)):"M0,0Z");Y.call(h);aa.exit().remove();I=[];(L=Q.gauge.threshold.value)&&I.push({range:[L,L],color:Q.gauge.threshold.color,line:{color:Q.gauge.threshold.line.color,width:Q.gauge.threshold.line.width},thickness:Q.gauge.threshold.thickness});L=P.selectAll("g.threshold-arc").data(I);L.enter().append("g").classed("threshold-arc",!0).append("path");L.select("path").call(O).call(h);L.exit().remove();
J=P.selectAll("g.gauge-outline").data([J]);J.enter().append("g").classed("gauge-outline",!0).append("path");J.select("path").call(O).call(h);J.exit().remove()}function p(I,J,L,E){function K(ma,wa,na,ya){if(!ma.match("s")||0<=na===0<=ya||wa(na).slice(-1).match(H)||wa(ya).slice(-1).match(H))return wa;ma=ma.slice().replace("s","f").replace(/\d+/,function(Ha){return parseInt(Ha)-1});var Fa=f(I,{tickformat:ma});return function(Ha){return 1>Math.abs(Ha)?D.tickText(Fa,Ha).text:wa(Ha)}}function N(){function ma(){var eb=
"number"===typeof L[0].y?Fa+na(L[0].y)+ya:"-";Ha.text(eb).call(u.font,Q.number.font).call(w.convertToTspans,I)}var wa=f(I,{tickformat:Q.number.valueformat},Q._range);wa.setScale();D.prepTicks(wa);var na=function(eb){return D.tickText(wa,eb).text},ya=Q.number.suffix,Fa=Q.number.prefix,Ha=ea.select("text.number");ba&&0<ba.duration?Ha.transition().duration(ba.duration).ease(ba.easing).each("end",function(){ma();Y&&Y()}).each("interrupt",function(){ma();Y&&Y()}).attrTween("text",function(){var eb=e.select(this),
hb=e.interpolateNumber(L[0].lastY,L[0].y);Q._lastValue=L[0].y;var ob=K(Q.number.valueformat,na,L[0].lastY,L[0].y);return function(ib){eb.text(Fa+ob(hb(ib))+ya)}}):ma();da=k(Fa+na(L[0].y)+ya,Q.number.font,aa,I);return Ha}function O(){function ma(){eb.text(Fa(ya(L[0]),na)).call(B.fill,Ha(L[0])).call(w.convertToTspans,I)}var wa=f(I,{tickformat:Q.delta.valueformat},Q._range);wa.setScale();D.prepTicks(wa);var na=function(hb){return D.tickText(wa,hb).text},ya=function(hb){return Q.delta.relative?hb.relativeDelta:
hb.delta},Fa=function(hb,ob){return 0===hb||"number"!==typeof hb||isNaN(hb)?"-":(0<hb?Q.delta.increasing.symbol:Q.delta.decreasing.symbol)+ob(hb)},Ha=function(hb){return 0<=hb.delta?Q.delta.increasing.color:Q.delta.decreasing.color};void 0===Q._deltaLastValue&&(Q._deltaLastValue=ya(L[0]));var eb=ea.select("text.delta");eb.call(u.font,Q.delta.font).call(B.fill,Ha({delta:Q._deltaLastValue}));ba&&0<ba.duration?eb.transition().duration(ba.duration).ease(ba.easing).tween("text",function(){var hb=e.select(this),
ob=ya(L[0]),ib=Q._deltaLastValue,Pa=K(Q.delta.valueformat,na,ib,ob),sb=e.interpolateNumber(ib,ob);Q._deltaLastValue=ob;return function(tb){hb.text(Fa(sb(tb),Pa));hb.call(B.fill,Ha({delta:sb(tb)}))}}).each("end",function(){ma();Y&&Y()}).each("interrupt",function(){ma();Y&&Y()}):ma();ca=k(Fa(ya(L[0]),na),Q.delta.font,aa,I);return eb}var Q=L[0].trace,P=E.numbersX,T=E.numbersY,V=Q.align||"center",aa=t[V],ba=E.transitionOpts,Y=E.onComplete,ea=g.ensureSingle(J,"g","numbers"),da,ca;J=[];Q._hasNumber&&J.push("number");
Q._hasDelta&&(J.push("delta"),"left"===Q.delta.position&&J.reverse());J=ea.selectAll("text").data(J);J.enter().append("text");J.attr("text-anchor",function(){return aa}).attr("class",function(ma){return ma}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null);J.exit().remove();var la=Q.mode+Q.align;if(Q._hasDelta){var pa=O();la+=Q.delta.position+Q.delta.font.size+Q.delta.font.family+Q.delta.valueformat;la+=Q.delta.increasing.symbol+Q.delta.decreasing.symbol;var qa=ca}Q._hasNumber&&(N(),
la+=Q.number.font.size+Q.number.font.family+Q.number.valueformat+Q.number.suffix+Q.number.prefix,qa=da);if(Q._hasDelta&&Q._hasNumber){J=[(da.left+da.right)/2,(da.top+da.bottom)/2];var oa=[(ca.left+ca.right)/2,(ca.top+ca.bottom)/2],ka=.75*Q.delta.font.size;if("left"===Q.delta.position){var ra=c(Q,"deltaPos",0,-1*(da.width*G[Q.align]+ca.width*(1-G[Q.align])+ka),la,Math.min);var ha=J[1]-oa[1];qa={width:da.width+ca.width+ka,height:Math.max(da.height,ca.height),left:ca.left+ra,right:da.right,top:Math.min(da.top,
ca.top+ha),bottom:Math.max(da.bottom,ca.bottom+ha)}}"right"===Q.delta.position&&(ra=c(Q,"deltaPos",0,da.width*(1-G[Q.align])+ca.width*G[Q.align]+ka,la,Math.max),ha=J[1]-oa[1],qa={width:da.width+ca.width+ka,height:Math.max(da.height,ca.height),left:da.left,right:ca.right+ra,top:Math.min(da.top,ca.top+ha),bottom:Math.max(da.bottom,ca.bottom+ha)});"bottom"===Q.delta.position&&(ra=null,ha=ca.height,qa={width:Math.max(da.width,ca.width),height:da.height+ca.height,left:Math.min(da.left,ca.left),right:Math.max(da.right,
ca.right),top:da.bottom-da.height,bottom:da.bottom+ca.height});"top"===Q.delta.position&&(ra=null,ha=da.top,qa={width:Math.max(da.width,ca.width),height:da.height+ca.height,left:Math.min(da.left,ca.left),right:Math.max(da.right,ca.right),top:da.bottom-da.height-ca.height,bottom:da.bottom});pa.attr({dx:ra,dy:ha})}(Q._hasNumber||Q._hasDelta)&&ea.attr("transform",function(){var ma=E.numbersScaler(qa);la+=ma[2];ma=c(Q,"numbersScale",1,ma[0],la,Math.min);Q._scaleNumbers||(ma=1);var wa=Q._isAngular?T-ma*
qa.bottom:T-ma*(qa.top+qa.bottom)/2;Q._numbersTop=ma*qa.top+wa;var na=qa[V];"center"===V&&(na=(qa.left+qa.right)/2);na=P-ma*na;na=c(Q,"numbersTranslate",0,na,la,Math.max);return d(na,wa)+" scale("+ma+")"})}function h(I){I.each(function(J){B.stroke(e.select(this),J.line.color)}).each(function(J){B.fill(e.select(this),J.color)}).style("stroke-width",function(J){return J.line.width})}function a(I,J,L){return function(){var E=e.interpolate(J,L);return function(K){return I.endAngle(E(K))()}}}function f(I,
J,L){function E(O,Q){return g.coerce(K,N,A,O,Q)}I=I._fullLayout;var K=g.extendFlat({type:"linear",ticks:"outside",range:L,showline:!0},J),N={type:"linear",_id:"x"+J._id};J={letter:"x",font:I.font,noHover:!0,noTickson:!0};C(K,N,E,J,I);x(K,N,E,J);return N}function d(I,J){return"translate("+I+","+J+")"}function l(I,J,L){return[Math.min(J/I.width,L/I.height),I,J+"x"+L]}function k(I,J,L,E){var K=document.createElementNS("http://www.w3.org/2000/svg","text");K=e.select(K);K.text(I).attr("x",0).attr("y",
0).attr("text-anchor",L).attr("data-unformatted",I).call(w.convertToTspans,E).call(u.font,J);return u.bBox(K.node())}function c(I,J,L,E,K,N){J="_cache"+J;I[J]&&I[J].key===K||(I[J]={key:K,value:L});L=g.aggNums(N,null,[I[J].value,E],2);return I[J].value=L}var e=b("d3"),g=b("../../lib"),m=g.rad2deg,r=b("../../constants/alignment").MID_SHIFT,u=b("../../components/drawing"),v=b("./constants"),w=b("../../lib/svg_text_utils"),D=b("../../plots/cartesian/axes"),C=b("../../plots/cartesian/axis_defaults"),x=
b("../../plots/cartesian/position_defaults"),A=b("../../plots/cartesian/layout_attributes"),B=b("../../components/color"),t={left:"start",center:"middle",right:"end"},G={left:0,center:.5,right:1},H=/[yzafpnmkMGTPEZY]/;y.exports=function(I,J,L,E){var K=I._fullLayout,N;L&&0<L.duration&&E&&(N=E());g.makeTraceGroups(K._indicatorlayer,J,"trace").each(function(O){var Q=O[0].trace,P=e.select(this),T=Q._hasGauge,V=Q._isAngular,aa=Q._isBullet,ba=Q.domain,Y={w:K._size.w*(ba.x[1]-ba.x[0]),h:K._size.h*(ba.y[1]-
ba.y[0]),l:K._size.l+K._size.w*ba.x[0],r:K._size.r+K._size.w*(1-ba.x[1]),t:K._size.t+K._size.h*(1-ba.y[1]),b:K._size.b+K._size.h*ba.y[0]},ea=Y.l+Y.w/2,da=Y.t+Y.h/2,ca=Math.min(Y.w/2,Y.h),la=v.innerRadius*ca;ba=Q.align||"center";var pa=da;if(T){if(V){var qa=ea;pa=da+ca/2;var oa=function(na){var ya=.9*la;return[ya/Math.sqrt(na.width/2*(na.width/2)+na.height*na.height),na,ya]}}if(aa){var ka=v.bulletPadding;qa=1-v.bulletNumberDomainSize+ka;qa=Y.l+(qa+(1-qa)*G[ba])*Y.w;oa=function(na){return l(na,(v.bulletNumberDomainSize-
ka)*Y.w,Y.h)}}}else qa=Y.l+G[ba]*Y.w,oa=function(na){return l(na,Y.w,Y.h)};p(I,P,O,{numbersX:qa,numbersY:pa,numbersScaler:oa,transitionOpts:L,onComplete:N});if(T){var ra={range:Q.gauge.axis.range,color:Q.gauge.bgcolor,line:{color:Q.gauge.bordercolor,width:0},thickness:1};var ha={range:Q.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:Q.gauge.bordercolor,width:Q.gauge.borderwidth},thickness:1}}qa=P.selectAll("g.angular").data(V?O:[]);qa.exit().remove();var ma=P.selectAll("g.angularaxis").data(V?
O:[]);ma.exit().remove();V&&n(I,P,O,{radius:ca,innerRadius:la,gauge:qa,layer:ma,size:Y,gaugeBg:ra,gaugeOutline:ha,transitionOpts:L,onComplete:N});qa=P.selectAll("g.bullet").data(aa?O:[]);qa.exit().remove();oa=P.selectAll("g.bulletaxis").data(aa?O:[]);oa.exit().remove();aa&&q(I,P,O,{gauge:qa,layer:oa,size:Y,gaugeBg:ra,gaugeOutline:ha,transitionOpts:L,onComplete:N});var wa=P.selectAll("text.title").data(O);wa.exit().remove();wa.enter().append("text").classed("title",!0);wa.attr("text-anchor",function(){return aa?
t.right:t[Q.title.align]}).text(Q.title.text).call(u.font,Q.title.font).call(w.convertToTspans,I);wa.attr("transform",function(){var na=Y.l+Y.w*G[Q.title.align],ya,Fa=v.titlePadding,Ha=u.bBox(wa.node());T?(V&&(ya=Q.gauge.axis.visible?u.bBox(ma.node()).top-Fa-Ha.bottom:Y.t+Y.h/2-ca/2-Ha.bottom-Fa),aa&&(ya=pa-(Ha.top+Ha.bottom)/2,na=Y.l-v.bulletPadding*Y.w)):ya=Q._numbersTop-Fa-Ha.bottom;return d(na,ya)})})}},{"../../components/color":615,"../../components/drawing":637,"../../constants/alignment":717,
"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_defaults":799,"../../plots/cartesian/layout_attributes":811,"../../plots/cartesian/position_defaults":814,"./constants":1087,d3:169}],1091:[function(b,y,F){function q(d){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function n(d){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}
F=b("../../components/colorscale/attributes");var p=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../mesh3d/attributes"),a=b("../../plots/attributes"),f=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;y=y.exports=b(f({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",
min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:q("x"),y:q("y"),z:q("z")},caps:{x:n("x"),y:n("y"),z:n("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:p(),showlegend:f({},a.showlegend,{dflt:!1})},F("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:h.opacity,
lightposition:h.lightposition,lighting:h.lighting,flatshading:h.flatshading,contour:h.contour,hoverinfo:f({},a.hoverinfo)}),"calc","nested");y.flatshading.dflt=!0;y.lighting.facenormalsepsilon.dflt=0;y.x.editType=y.y.editType=y.z.editType=y.value.editType="calc+clearAxisTypes";y.transforms=void 0},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875,"../mesh3d/attributes":1096}],1092:[function(b,
y,F){var q=b("../../components/colorscale/calc"),n=b("../streamtube/calc").processGrid,p=b("../streamtube/calc").filter;y.exports=function(h,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length);a._x=p(a.x,a._len);a._y=p(a.y,a._len);a._z=p(a.z,a._len);a._value=p(a.value,a._len);var f=n(a);a._gridFill=f.fill;a._Xs=f.Xs;a._Ys=f.Ys;a._Zs=f.Zs;a._len=f.len;f=Infinity;for(var d=-Infinity,l=0;l<a._len;l++){var k=a._value[l];f=Math.min(f,k);d=Math.max(d,k)}a._minValues=f;a._maxValues=d;a._vMin=
void 0===a.isomin||null===a.isomin?f:a.isomin;a._vMax=void 0===a.isomax||null===a.isomin?d:a.isomax;q(h,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623,"../streamtube/calc":1262}],1093:[function(b,y,F){function q(c,e,g){this.scene=c;this.uid=g;this.mesh=e;this.name="";this.data=null;this.showContour=!1}function n(c){function e(){hb=[];ob=[];ib=[];Pa=[];pa=la=0}function g(tb,Aa,Ka,Qa){hb.push(tb);ob.push(Aa);ib.push(Ka);Pa.push(Qa);la++;return la-1}
function m(tb,Aa,Ka){for(var Qa=[],Xa=0;Xa<tb.length;Xa++)Qa[Xa]=tb[Xa]*(1-Ka)+Ka*Aa[Xa];return Qa}function r(tb,Aa){return"all"===tb||null===tb?!0:-1<tb.indexOf(Aa)}function u(tb,Aa,Ka){pa=la;var Qa=[Aa];var Xa=[Ka];if(1<=sb)Qa=[Aa],Xa=[Ka];else if(0<sb){var pb=Ka;Qa=Aa[0];Xa=Aa[1];Aa=Aa[2];for(var db=[],Ia=0;Ia<Qa.length;Ia++)db[Ia]=(Qa[Ia]+Xa[Ia]+Aa[Ia])/3;var Ua=Math.sqrt(1-sb);Ia=m(db,Qa,Ua);Ka=m(db,Xa,Ua);var $a=m(db,Aa,Ua);db=pb[0];Ua=pb[1];pb=pb[2];Aa=[[Qa,Xa,Ka],[Ka,Ia,Qa],[Xa,Aa,$a],[$a,
Ka,Xa],[Aa,Qa,Ia],[Ia,$a,Aa]];Xa=[[db,Ua,-1],[-1,-1,db],[Ua,pb,-1],[-1,-1,Ua],[pb,db,-1],[-1,-1,pb]];Qa=Aa}for(pb=0;pb<Qa.length;pb++){Aa=Qa[pb];Ka=Xa[pb];Ia=[];for(db=0;3>db;db++){var xa=Aa[db][0],Ga=Aa[db][1];$a=Aa[db][2];Ua=Aa[db][3];if(-1<Ka[db])var Va=Ka[db];else a:{Va=Pa.length;for(var gb=pa;gb<Va;gb++)if(xa===hb[gb]&&Ga===ob[gb]&&$a===ib[gb]){Va=gb;break a}Va=-1}-1<Va?Ia[db]=Va:(Va=Ia,gb=db,Ua=null===tb?Ua:tb,Va[gb]=g(xa,Ga,$a,Ua))}Aa=Ia[1];Ka=Ia[2];c._meshI.push(Ia[0]);c._meshJ.push(Aa);c._meshK.push(Ka);
ca++}}function v(tb,Aa,Ka){var Qa=function(Xa,pb,db){u(tb,[Aa[Xa],Aa[pb],Aa[db]],[Ka[Xa],Ka[pb],Ka[db]])};Qa(0,1,2);Qa(2,3,0)}function w(tb,Aa,Ka){var Qa=function(Xa,pb,db){u(tb,[Aa[Xa],Aa[pb],Aa[db]],[Ka[Xa],Ka[pb],Ka[db]])};Qa(0,1,2);Qa(3,0,1);Qa(2,3,0);Qa(1,2,3)}function D(tb,Aa,Ka,Qa){var Xa=tb[3];Xa<Ka&&(Xa=Ka);Xa>Qa&&(Xa=Qa);Ka=(tb[3]-Xa)/(tb[3]-Aa[3]+1E-9);Qa=[];for(Xa=0;4>Xa;Xa++)Qa[Xa]=(1-Ka)*tb[Xa]+Ka*Aa[Xa];return Qa}function C(tb,Aa,Ka){return tb>=Aa&&tb<=Ka}function x(tb){var Aa=.001*
(eb-Ha);return tb>=Ha-Aa&&tb<=eb+Aa}function A(tb){for(var Aa=[],Ka=0;4>Ka;Ka++){var Qa=tb[Ka];Aa.push([c._x[Qa],c._y[Qa],c._z[Qa],c._value[Qa]])}return Aa}function B(tb,Aa,Ka,Qa,Xa,pb){pb||(pb=1);Ka=[-1,-1,-1];var db=!1,Ia=[C(Aa[0][3],Qa,Xa),C(Aa[1][3],Qa,Xa),C(Aa[2][3],Qa,Xa)];if(!Ia[0]&&!Ia[1]&&!Ia[2])return!1;var Ua=function(xa,Ga,Va){return x(Ga[0][3])&&x(Ga[1][3])&&x(Ga[2][3])?(u(xa,Ga,Va),!0):3>pb?B(xa,Ga,Va,Ha,eb,++pb):!1};if(Ia[0]&&Ia[1]&&Ia[2])return Ua(tb,Aa,Ka)||db;var $a=!1;[[0,1,2],
[2,0,1],[1,2,0]].forEach(function(xa){if(Ia[xa[0]]&&Ia[xa[1]]&&!Ia[xa[2]]){var Ga=Aa[xa[0]],Va=Aa[xa[1]],gb=Aa[xa[2]],Ma=D(gb,Ga,Qa,Xa);gb=D(gb,Va,Qa,Xa);db=Ua(tb,[gb,Ma,Ga],[-1,-1,Ka[xa[0]]])||db;db=Ua(tb,[Ga,Va,gb],[Ka[xa[0]],Ka[xa[1]],-1])||db;$a=!0}});if($a)return db;[[0,1,2],[1,2,0],[2,0,1]].forEach(function(xa){if(Ia[xa[0]]&&!Ia[xa[1]]&&!Ia[xa[2]]){var Ga=Aa[xa[0]],Va=Aa[xa[2]],gb=D(Aa[xa[1]],Ga,Qa,Xa);Va=D(Va,Ga,Qa,Xa);db=Ua(tb,[Va,gb,Ga],[-1,-1,Ka[xa[0]]])||db;$a=!0}});return db}function t(tb,
Aa,Ka,Qa){var Xa=!1,pb=A(Aa),db=[C(pb[0][3],Ka,Qa),C(pb[1][3],Ka,Qa),C(pb[2][3],Ka,Qa),C(pb[3][3],Ka,Qa)];if(!(db[0]||db[1]||db[2]||db[3]))return Xa;if(db[0]&&db[1]&&db[2]&&db[3])return da&&(Xa=w(tb,pb,Aa)||Xa),Xa;var Ia=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ua){if(db[Ua[0]]&&db[Ua[1]]&&db[Ua[2]]&&!db[Ua[3]]){var $a=pb[Ua[0]],xa=pb[Ua[1]],Ga=pb[Ua[2]],Va=pb[Ua[3]];da?Xa=u(tb,[$a,xa,Ga],[Aa[Ua[0]],Aa[Ua[1]],Aa[Ua[2]]])||Xa:(Ua=D(Va,$a,Ka,Qa),xa=D(Va,xa,Ka,Qa),Ga=D(Va,Ga,Ka,
Qa),Xa=u(null,[Ua,xa,Ga],[-1,-1,-1])||Xa);Ia=!0}});if(Ia)return Xa;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ua){if(db[Ua[0]]&&db[Ua[1]]&&!db[Ua[2]]&&!db[Ua[3]]){var $a=pb[Ua[0]],xa=pb[Ua[1]],Ga=pb[Ua[2]],Va=pb[Ua[3]],gb=D(Ga,$a,Ka,Qa);Ga=D(Ga,xa,Ka,Qa);var Ma=D(Va,xa,Ka,Qa);Va=D(Va,$a,Ka,Qa);da?(Xa=u(tb,[$a,Va,gb],[Aa[Ua[0]],-1,-1])||Xa,Xa=u(tb,[xa,Ga,Ma],[Aa[Ua[1]],-1,-1])||Xa):Xa=v(null,[gb,Ga,Ma,Va],[-1,-1,-1,-1])||Xa;Ia=!0}});if(Ia)return Xa;[[0,1,2,3],[1,
2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ua){if(db[Ua[0]]&&!db[Ua[1]]&&!db[Ua[2]]&&!db[Ua[3]]){var $a=pb[Ua[0]],xa=pb[Ua[2]],Ga=pb[Ua[3]],Va=D(pb[Ua[1]],$a,Ka,Qa);xa=D(xa,$a,Ka,Qa);Ga=D(Ga,$a,Ka,Qa);da?(Xa=u(tb,[$a,Va,xa],[Aa[Ua[0]],-1,-1])||Xa,Xa=u(tb,[$a,xa,Ga],[Aa[Ua[0]],-1,-1])||Xa,Xa=u(tb,[$a,Ga,Va],[Aa[Ua[0]],-1,-1])||Xa):Xa=u(null,[Va,xa,Ga],[-1,-1,-1])||Xa;Ia=!0}});return Xa}function G(tb,Aa,Ka,Qa,Xa,pb,db,Ia,Ua,$a,xa){var Ga=!1;ea&&(r(tb,"A")&&(Ga=t(null,[Aa,Ka,Qa,pb],$a,xa)||Ga),r(tb,
"B")&&(Ga=t(null,[Ka,Qa,Xa,Ua],$a,xa)||Ga),r(tb,"C")&&(Ga=t(null,[Ka,pb,db,Ua],$a,xa)||Ga),r(tb,"D")&&(Ga=t(null,[Qa,pb,Ia,Ua],$a,xa)||Ga),r(tb,"E")&&(Ga=t(null,[Ka,Qa,pb,Ua],$a,xa)||Ga));da&&(Ga=t(tb,[Ka,Qa,pb,Ua],$a,xa)||Ga);return Ga}function H(tb,Aa,Ka,Qa,Xa,pb,db,Ia){return[!0===Ia[0]?!0:B(tb,A([Aa,Ka,Qa]),[Aa,Ka,Qa],pb,db),!0===Ia[1]?!0:B(tb,A([Qa,Xa,Aa]),[Qa,Xa,Aa],pb,db)]}function I(tb,Aa,Ka,Qa,Xa,pb,db,Ia,Ua){return Ia?H(tb,Aa,Ka,Xa,Qa,pb,db,Ua):H(tb,Ka,Xa,Qa,Aa,pb,db,Ua)}function J(tb,Aa,
Ka,Qa,Xa,pb,db){var Ia=!1,Ua=function(){Ia=B(tb,[Ga,Va,gb],[-1,-1,-1],Xa,pb)||Ia;Ia=B(tb,[gb,Ma,Ga],[-1,-1,-1],Xa,pb)||Ia},$a=db[0],xa=db[1];db=db[2];if($a){var Ga=m(A([na(Aa,Ka-0,Qa-0)])[0],A([na(Aa-1,Ka-0,Qa-0)])[0],$a);var Va=m(A([na(Aa,Ka-0,Qa-1)])[0],A([na(Aa-1,Ka-0,Qa-1)])[0],$a);var gb=m(A([na(Aa,Ka-1,Qa-1)])[0],A([na(Aa-1,Ka-1,Qa-1)])[0],$a);var Ma=m(A([na(Aa,Ka-1,Qa-0)])[0],A([na(Aa-1,Ka-1,Qa-0)])[0],$a);Ua()}xa&&(Ga=m(A([na(Aa-0,Ka,Qa-0)])[0],A([na(Aa-0,Ka-1,Qa-0)])[0],xa),Va=m(A([na(Aa-
0,Ka,Qa-1)])[0],A([na(Aa-0,Ka-1,Qa-1)])[0],xa),gb=m(A([na(Aa-1,Ka,Qa-1)])[0],A([na(Aa-1,Ka-1,Qa-1)])[0],xa),Ma=m(A([na(Aa-1,Ka,Qa-0)])[0],A([na(Aa-1,Ka-1,Qa-0)])[0],xa),Ua());db&&(Ga=m(A([na(Aa-0,Ka-0,Qa)])[0],A([na(Aa-0,Ka-0,Qa-1)])[0],db),Va=m(A([na(Aa-0,Ka-1,Qa)])[0],A([na(Aa-0,Ka-1,Qa-1)])[0],db),gb=m(A([na(Aa-1,Ka-1,Qa)])[0],A([na(Aa-1,Ka-1,Qa-1)])[0],db),Ma=m(A([na(Aa-1,Ka-0,Qa)])[0],A([na(Aa-1,Ka-0,Qa-1)])[0],db),Ua());return Ia}function L(tb,Aa,Ka,Qa,Xa){for(var pb=[],db=0,Ia=0;Ia<Aa.length;Ia++)for(var Ua=
Aa[Ia],$a=1;$a<ma;$a++)for(var xa=1;xa<ha;xa++)pb.push(I(tb,na(Ua,xa-1,$a-1),na(Ua,xa-1,$a),na(Ua,xa,$a-1),na(Ua,xa,$a),Ka,Qa,(Ua+xa+$a)%2,Xa&&Xa[db]?Xa[db]:[])),db++;return pb}function E(tb,Aa,Ka,Qa,Xa){for(var pb=[],db=0,Ia=0;Ia<Aa.length;Ia++)for(var Ua=Aa[Ia],$a=1;$a<ra;$a++)for(var xa=1;xa<ma;xa++)pb.push(I(tb,na($a-1,Ua,xa-1),na($a,Ua,xa-1),na($a-1,Ua,xa),na($a,Ua,xa),Ka,Qa,($a+Ua+xa)%2,Xa&&Xa[db]?Xa[db]:[])),db++;return pb}function K(tb,Aa,Ka,Qa,Xa){for(var pb=[],db=0,Ia=0;Ia<Aa.length;Ia++)for(var Ua=
Aa[Ia],$a=1;$a<ha;$a++)for(var xa=1;xa<ra;xa++)pb.push(I(tb,na(xa-1,$a-1,Ua),na(xa-1,$a,Ua),na(xa,$a-1,Ua),na(xa,$a,Ua),Ka,Qa,(xa+$a+Ua)%2,Xa&&Xa[db]?Xa[db]:[])),db++;return pb}function N(tb,Aa,Ka){for(var Qa=1;Qa<ma;Qa++)for(var Xa=1;Xa<ha;Xa++)for(var pb=1;pb<ra;pb++){var db=tb,Ia=na(pb-1,Xa-1,Qa-1),Ua=na(pb-1,Xa-1,Qa),$a=na(pb-1,Xa,Qa-1),xa=na(pb-1,Xa,Qa),Ga=na(pb,Xa-1,Qa-1),Va=na(pb,Xa-1,Qa),gb=na(pb,Xa,Qa-1),Ma=na(pb,Xa,Qa),cb=Aa,Sa=Ka,lb=db;(pb+Xa+Qa)%2?(ea&&"even"===db&&(lb=null),G(lb,Ia,Ua,
$a,xa,Ga,Va,gb,Ma,cb,Sa)):(ea&&"odd"===db&&(lb=null),G(lb,Ma,gb,Va,Ga,xa,$a,Ua,Ia,cb,Sa))}}function O(tb,Aa,Ka){da=!0;N(tb,Aa,Ka);da=!1}function Q(tb,Aa,Ka){ea=!0;N(tb,Aa,Ka);ea=!1}function P(tb,Aa){for(var Ka=[];tb<Aa;tb++)Ka.push(tb);return Ka}function T(){for(var tb=0;tb<ra;tb++)for(var Aa=0;Aa<ha;Aa++)for(var Ka=0;Ka<ma;Ka++){var Qa=na(tb,Aa,Ka);g(c._x[Qa],c._y[Qa],c._z[Qa],c._value[Qa])}}c._meshI=[];c._meshJ=[];c._meshK=[];var V=c.surface.show,aa=c.spaceframe.show,ba=c.surface.fill,Y=c.spaceframe.fill,
ea=!1,da=!1,ca=0,la,pa,qa=c._Xs,oa=c._Ys,ka=c._Zs,ra=qa.length,ha=oa.length,ma=ka.length,wa=k.indexOf(c._gridFill.replace(/-/g,"").replace(/\+/g,"")),na=function(tb,Aa,Ka){switch(wa){case 5:return Ka+ma*Aa+ma*ha*tb;case 4:return Ka+ma*tb+ma*ra*Aa;case 3:return Aa+ha*Ka+ha*ma*tb;case 2:return Aa+ha*tb+ha*ra*Ka;case 1:return tb+ra*Ka+ra*ma*Aa;default:return tb+ra*Aa+ra*ha*Ka}},ya=c._minValues,Fa=c._maxValues,Ha=c._vMin,eb=c._vMax,hb,ob,ib,Pa,sb;(function(){e();T();aa&&Y&&(sb=Y,O(null,Ha,eb));if(V&&
ba){sb=ba;for(var tb=c.surface.pattern,Aa=c.surface.count,Ka=0;Ka<Aa;Ka++){var Qa=1===Aa?.5:Ka/(Aa-1);Qa=(1-Qa)*Ha+Qa*eb;Qa=Math.abs(Qa-ya)>Math.abs(Qa-Fa)?[ya,Qa]:[Qa,Fa];Q(tb,Qa[0],Qa[1])}}var Xa=[[Math.min(Ha,Fa),Math.max(Ha,Fa)],[Math.min(ya,eb),Math.max(ya,eb)]];["x","y","z"].forEach(function(pb){for(var db=[],Ia=0;Ia<Xa.length;Ia++){var Ua=0,$a=Xa[Ia][0],xa=Xa[Ia][1],Ga=c.slices[pb];if(Ga.show&&Ga.fill){sb=Ga.fill;var Va=[],gb=[],Ma=[];if(Ga.locations.length)for(var cb=0;cb<Ga.locations.length;cb++){var Sa=
l(Ga.locations[cb],"x"===pb?qa:"y"===pb?oa:ka);0===Sa.distRatio?Va.push(Sa.id):0<Sa.id&&(gb.push(Sa.id),"x"===pb?Ma.push([Sa.distRatio,0,0]):"y"===pb?Ma.push([0,Sa.distRatio,0]):Ma.push([0,0,Sa.distRatio]))}else Va="x"===pb?P(1,ra-1):"y"===pb?P(1,ha-1):P(1,ma-1);if(0<gb.length){if("x"===pb){Ga=Ua;cb=$a;Sa=xa;for(var lb=db[Ua],rb=[],yb=0,Hb=0;Hb<gb.length;Hb++)for(var Vb=gb[Hb],lc=1;lc<ma;lc++)for(var Ac=1;Ac<ha;Ac++)rb.push(J(null,Vb,Ac,lc,cb,Sa,Ma[Hb],lb&&lb[yb]?lb[yb]:[])),yb++;db[Ga]=rb}else if("y"===
pb){Ga=Ua;cb=$a;Sa=xa;lb=db[Ua];rb=[];for(Hb=yb=0;Hb<gb.length;Hb++)for(Vb=gb[Hb],lc=1;lc<ra;lc++)for(Ac=1;Ac<ma;Ac++)rb.push(J(null,lc,Vb,Ac,cb,Sa,Ma[Hb],lb&&lb[yb]?lb[yb]:[])),yb++;db[Ga]=rb}else{Ga=Ua;cb=$a;Sa=xa;lb=db[Ua];rb=[];for(Hb=yb=0;Hb<gb.length;Hb++)for(Vb=gb[Hb],lc=1;lc<ha;lc++)for(Ac=1;Ac<ra;Ac++)rb.push(J(null,Ac,lc,Vb,cb,Sa,Ma[Hb],lb&&lb[yb]?lb[yb]:[])),yb++;db[Ga]=rb}Ua++}0<Va.length&&(db[Ua]="x"===pb?L(null,Va,$a,xa,db[Ua]):"y"===pb?E(null,Va,$a,xa,db[Ua]):K(null,Va,$a,xa,db[Ua]),
Ua++)}Va=c.caps[pb];Va.show&&Va.fill&&(sb=Va.fill,db[Ua]="x"===pb?L(null,[0,ra-1],$a,xa,db[Ua]):"y"===pb?E(null,[0,ha-1],$a,xa,db[Ua]):K(null,[0,ma-1],$a,xa,db[Ua]))}});0===ca&&e();c._meshX=hb;c._meshY=ob;c._meshZ=ib;c._meshIntensity=Pa;c._Xs=qa;c._Ys=oa;c._Zs=ka})();return c}var p=b("gl-mesh3d"),h=b("../../lib/gl_format_color").parseColorScale,a=b("../../lib/str2rgbarray"),f=b("../../components/colorscale").extractOpts,d=b("../../plots/gl3d/zip3"),l=function(c,e){for(var g=e.length-1;0<g;g--){var m=
Math.min(e[g],e[g-1]),r=Math.max(e[g],e[g-1]);if(r>m&&m<c&&c<=r)return{id:g,distRatio:(r-c)/(r-m)}}return{id:0,distRatio:0}};b=q.prototype;b.handlePick=function(c){if(c.object===this.mesh){var e=c.data.index,g=this.data._meshY[e],m=this.data._meshZ[e],r=this.data._Ys.length,u=this.data._Zs.length;e=l(this.data._meshX[e],this.data._Xs).id;g=l(g,this.data._Ys).id;m=l(m,this.data._Zs).id;r=c.index=m+u*g+u*r*e;c.traceCoordinate=[this.data._meshX[r],this.data._meshY[r],this.data._meshZ[r],this.data._value[r]];
u=this.data.hovertext||this.data.text;Array.isArray(u)&&void 0!==u[r]?c.textLabel=u[r]:u&&(c.textLabel=u);return!0}};b.update=function(c){function e(r,u,v,w){return u.map(function(D){return r.d2l(D,0,w)*v})}var g=this.scene,m=g.fullSceneLayout;this.data=n(c);g=d(e(m.xaxis,c._meshX,g.dataScale[0],c.xcalendar),e(m.yaxis,c._meshY,g.dataScale[1],c.ycalendar),e(m.zaxis,c._meshZ,g.dataScale[2],c.zcalendar));m=d(c._meshI,c._meshJ,c._meshK);g={positions:g,cells:m,lightPosition:[c.lightposition.x,c.lightposition.y,
c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:a(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};m=f(c);g.vertexIntensity=c._meshIntensity;g.vertexIntensityBounds=[m.min,m.max];g.colormap=
h(c);this.mesh.update(g)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};var k="xyz xzy yxz yzx zxy zyx".split(" ");y.exports={findNearestOnAxis:l,generateIsoMeshes:n,createIsosurfaceTrace:function(c,e){var g=p({gl:c.glplot.gl}),m=new q(c,g,e.uid);g._trace=m;m.update(e);c.glplot.add(g);return m}}},{"../../components/colorscale":627,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/gl3d/zip3":850,"gl-mesh3d":292}],1094:[function(b,y,F){function q(f,
d,l,k,c){l=c("isomin");var e=c("isomax");void 0!==e&&null!==e&&void 0!==l&&null!==l&&l>e&&(d.isomin=null,d.isomax=null);l=c("x");e=c("y");var g=c("z"),m=c("value");l&&l.length&&e&&e.length&&g&&g.length&&m&&m.length?(p.getComponentMethod("calendars","handleTraceDefaults")(f,d,["x","y","z"],k),["x","y","z"].forEach(function(r){var u="caps."+r;c(u+".show")&&c(u+".fill");r="slices."+r;c(r+".show")&&(c(r+".fill"),c(r+".locations"))}),c("spaceframe.show")&&c("spaceframe.fill"),c("surface.show")&&(c("surface.count"),
c("surface.fill"),c("surface.pattern")),c("contour.show")&&(c("contour.color"),c("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(r){c(r)}),a(f,d,k,c,{prefix:"",cLetter:"c"}),d._length=null):d.visible=!1}var n=b("../../lib"),p=b("../../registry"),h=b("./attributes"),
a=b("../../components/colorscale/defaults");y.exports={supplyDefaults:function(f,d,l,k){q(f,d,l,k,function(c,e){return n.coerce(f,d,h,c,e)})},supplyIsoDefaults:q}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1091}],1095:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",
basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1091,"./calc":1092,"./convert":1093,"./defaults":1094}],1096:[function(b,y,F){F=b("../../components/colorscale/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../surface/attributes"),p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;y.exports=b({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},
z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:q({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",
editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},F("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:n.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:b({},n.contours.x.show,{}),color:n.contours.x.color,width:n.contours.x.width,
editType:"calc"},lightposition:{x:b({},n.lightposition.x,{dflt:1E5}),y:b({},n.lightposition.y,{dflt:1E5}),z:b({},n.lightposition.z,{dflt:0}),editType:"calc"},lighting:b({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},n.lighting),hoverinfo:b({},p.hoverinfo,{editType:"calc"}),showlegend:b({},p.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":622,"../../lib/extend":739,
"../../plots/attributes":794,"../../plots/template_attributes":875,"../surface/attributes":1278}],1097:[function(b,y,F){var q=b("../../components/colorscale/calc");y.exports=function(n,p){p.intensity&&q(n,p,{vals:p.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],1098:[function(b,y,F){function q(r,u,v){this.scene=r;this.uid=v;this.mesh=u;this.name="";this.color="#fff";this.data=null;this.showContour=!1}function n(r){for(var u=[],v=r.length,w=0;w<v;w++)u[w]=e(r[w]);
return u}function p(r,u,v,w){for(var D=[],C=u.length,x=0;x<C;x++)D[x]=r.d2l(u[x],0,w)*v;return D}function h(r){for(var u=[],v=r.length,w=0;w<v;w++)u[w]=Math.round(r[w]);return u}function a(r,u){for(var v=r.length,w=0;w<v;w++)if(-.5>=r[w]||r[w]>=u-.5)return!1;return!0}var f=b("gl-mesh3d"),d=b("delaunay-triangulate"),l=b("alpha-shape"),k=b("convex-hull"),c=b("../../lib/gl_format_color").parseColorScale,e=b("../../lib/str2rgbarray"),g=b("../../components/colorscale").extractOpts,m=b("../../plots/gl3d/zip3");
b=q.prototype;b.handlePick=function(r){if(r.object===this.mesh){var u=r.index=r.data.index;r.traceCoordinate=r.data._cellCenter?r.data.dataCoordinate:[this.data.x[u],this.data.y[u],this.data.z[u]];var v=this.data.hovertext||this.data.text;Array.isArray(v)&&void 0!==v[u]?r.textLabel=v[u]:v&&(r.textLabel=v);return!0}};b.update=function(r){var u=this.scene,v=u.fullSceneLayout;this.data=r;var w=r.x.length;u=m(p(v.xaxis,r.x,u.dataScale[0],r.xcalendar),p(v.yaxis,r.y,u.dataScale[1],r.ycalendar),p(v.zaxis,
r.z,u.dataScale[2],r.zcalendar));if(r.i&&r.j&&r.k){if(r.i.length!==r.j.length||r.j.length!==r.k.length||!a(r.i,w)||!a(r.j,w)||!a(r.k,w))return;w=m(h(r.i),h(r.j),h(r.k))}else if(0===r.alphahull)w=k(u);else if(0<r.alphahull)w=l(r.alphahull,u);else{w=["x","y","z"].indexOf(r.delaunayaxis);v=[];for(var D=u.length,C=0;C<D;C++)v[C]=[u[C][(w+1)%3],u[C][(w+2)%3]];w=d(v)}u={positions:u,cells:w,lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,
specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,contourEnable:r.contour.show,contourColor:e(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading};r.intensity?(w=g(r),this.color="#fff",v=r.intensitymode,u[v+"Intensity"]=r.intensity,u[v+"IntensityBounds"]=[w.min,w.max],u.colormap=c(r)):r.vertexcolor?(this.color=
r.vertexcolor[0],u.vertexColors=n(r.vertexcolor)):r.facecolor?(this.color=r.facecolor[0],u.cellColors=n(r.facecolor)):(this.color=r.color,u.meshColor=e(r.color));this.mesh.update(u)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};y.exports=function(r,u){var v=f({gl:r.glplot.gl}),w=new q(r,v,u.uid);v._trace=w;w.update(u);r.glplot.add(v);return w}},{"../../components/colorscale":627,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/gl3d/zip3":850,
"alpha-shape":69,"convex-hull":135,"delaunay-triangulate":171,"gl-mesh3d":292}],1099:[function(b,y,F){var q=b("../../registry"),n=b("../../lib"),p=b("../../components/colorscale/defaults"),h=b("./attributes");y.exports=function(a,f,d,l){function k(e,g){return n.coerce(a,f,h,e,g)}function c(e){var g=e.map(function(m){return(m=k(m))&&n.isArrayOrTypedArray(m)?m:null});return g.every(function(m){return m&&m.length===g[0].length})&&g}c(["x","y","z"])?(c(["i","j","k"]),(!f.i||f.j&&f.k)&&(!f.j||f.k&&f.i)&&
(!f.k||f.i&&f.j)?(q.getComponentMethod("calendars","handleTraceDefaults")(a,f,["x","y","z"],l),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(e){k(e)}),k("contour.show")&&(k("contour.color"),k("contour.width")),"intensity"in a?(k("intensity"),k("intensitymode"),p(a,f,l,k,{prefix:"",
cLetter:"c"})):(f.showscale=!1,"facecolor"in a?k("facecolor"):"vertexcolor"in a?k("vertexcolor"):k("color",d)),k("text"),k("hovertext"),k("hovertemplate"),f._length=null):f.visible=!1):f.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1096}],1100:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:b("../../plots/gl3d"),
categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1096,"./calc":1097,"./convert":1098,"./defaults":1099}],1101:[function(b,y,F){function q(d){return{line:{color:n({},f.color,{dflt:d}),width:f.width,dash:p,editType:"style"},editType:"style"}}var n=b("../../lib").extendFlat;F=b("../scatter/attributes");var p=b("../../components/drawing/attributes").dash,h=b("../../components/fx/attributes"),a=b("../../constants/delta.js");b=a.INCREASING.COLOR;a=a.DECREASING.COLOR;var f=
F.line;y.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:n({},f.width,{}),dash:n({},p,{}),editType:"style"},increasing:q(b),decreasing:q(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,
max:.5,dflt:.3,editType:"calc"},hoverlabel:n({},h.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":636,"../../components/fx/attributes":646,"../../constants/delta.js":718,"../../lib":749,"../scatter/attributes":1155}],1102:[function(b,y,F){function q(d,l,k,c){return{o:d,h:l,l:k,c}}function n(d,l,k,c,e){for(var g=c.makeCalcdata(l,"open"),m=c.makeCalcdata(l,"high"),r=c.makeCalcdata(l,"low"),u=c.makeCalcdata(l,"close"),v=Array.isArray(l.text),
w=Array.isArray(l.hovertext),D=!0,C=null,x=[],A=0;A<k.length;A++){var B=k[A],t=g[A],G=m[A],H=r[A],I=u[A];if(B!==f&&t!==f&&G!==f&&H!==f&&I!==f){I===t?null!==C&&I!==C&&(D=I>C):D=I>t;C=I;var J=e(t,G,H,I);J.pos=B;J.yc=(t+I)/2;J.i=A;J.dir=D?"increasing":"decreasing";J.x=J.pos;J.y=[H,G];v&&(J.tx=l.text[A]);w&&(J.htx=l.hovertext[A]);x.push(J)}else x.push({pos:B,empty:!0})}l._extremes[c._id]=a.findExtremes(c,p.concat(r,m),{padded:!0});x.length&&(x[0].t={labels:{open:h(d,"open:")+" ",high:h(d,"high:")+" ",
low:h(d,"low:")+" ",close:h(d,"close:")+" "}});return x}var p=b("../../lib"),h=p._,a=b("../../plots/cartesian/axes"),f=b("../../constants/numerical").BADNUM;y.exports={calc:function(d,l){var k=a.getFromId(d,l.xaxis),c=a.getFromId(d,l.yaxis);var e=l._minDiff;if(!e){var g=d._fullData,m=[];e=Infinity;var r;for(r=0;r<g.length;r++){var u=g[r];if("ohlc"===u.type&&!0===u.visible&&u.xaxis===k._id){m.push(u);var v=k.makeCalcdata(u,"x");u._xcalc=v;(u=p.distinctVals(v).minDiff)&&isFinite(u)&&(e=Math.min(e,u))}}Infinity===
e&&(e=1);for(r=0;r<m.length;r++)m[r]._minDiff=e}e*=l.tickwidth;g=l._minDiff;l._minDiff=null;m=l._xcalc;l._xcalc=null;d=n(d,l,m,c,q);l._extremes[k._id]=a.findExtremes(k,m,{vpad:g/2});return d.length?(p.extendFlat(d[0].t,{wHover:g/2,tickLen:e}),d):[{t:{empty:!0}}]},calcCommon:n}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797}],1103:[function(b,y,F){function q(a,f,d,l){d(l+".line.color");d(l+".line.width",f.line.width);d(l+".line.dash",f.line.dash)}var n=b("../../lib"),
p=b("./ohlc_defaults"),h=b("./attributes");y.exports=function(a,f,d,l){function k(c,e){return n.coerce(a,f,h,c,e)}p(a,f,k,l)?(k("line.width"),k("line.dash"),q(a,f,k,"increasing"),q(a,f,k,"decreasing"),k("text"),k("hovertext"),k("tickwidth"),l._requestRangeslider[f.xaxis]=!0):f.visible=!1}},{"../../lib":749,"./attributes":1101,"./ohlc_defaults":1106}],1104:[function(b,y,F){function q(c,e,g,m){function r(J){J=J.pos+G-e;return f.inbox(J-H,J+H,I)}function u(J){var L=J[B];J=J[t];return L===J||f.inbox(L-
g,J-g,I)}function v(J){return(r(J)+u(J))/2}var w=c.cd,D=c.xa,C=w[0].trace,x=w[0].t,A=C.type,B="ohlc"===A?"l":"min",t="ohlc"===A?"h":"max",G=x.bPos||0;A=x.bdPos||x.tickLen;var H=x.wHover;x=Math.min(1,A/Math.abs(D.r2c(D.range[1])-D.r2c(D.range[0])));var I=c.maxHoverDistance-x;x=c.maxSpikeDistance-x;m=f.getDistanceFunction(m,r,u,v);f.getClosest(w,m,c);if(!1===c.index)return null;w=w[c.index];if(w.empty)return null;C=C[w.dir];m=C.line.color;d.opacity(m)&&C.line.width?c.color=m:c.color=C.fillcolor;c.x0=
D.c2p(w.pos+G-A,!0);c.x1=D.c2p(w.pos+G+A,!0);c.xLabelVal=w.pos;c.spikeDistance=v(w)*x/I;c.xSpike=D.c2p(w.pos,!0);return c}function n(c,e,g,m){var r=c.cd,u=c.ya,v=r[0].trace,w=r[0].t,D=[];c=q(c,e,g,m);if(!c)return[];r=r[c.index].hi||v.hoverinfo;e=r.split("+");if("all"!==r&&-1===e.indexOf("y"))return[];r=["high","open","close","low"];e={};for(g=0;g<r.length;g++){m=r[g];var C=v[m][c.index],x=u.c2p(C,!0);if(C in e){var A=e[C];A.yLabel+="\x3cbr\x3e"+w.labels[m]+h.hoverLabelText(u,C)}else A=a.extendFlat({},
c),A.y0=A.y1=x,A.yLabelVal=C,A.yLabel=w.labels[m]+h.hoverLabelText(u,C),A.name="",D.push(A),e[C]=A}return D}function p(c,e,g,m){function r(A){return D.labels[A]+h.hoverLabelText(v,w[A][C])}var u=c.cd,v=c.ya,w=u[0].trace,D=u[0].t;c=q(c,e,g,m);if(!c)return[];u=u[c.index];var C=c.index=u.i;e=u.dir;m=u.hi||w.hoverinfo;g=m.split("+");var x="all"===m;m=x||-1!==g.indexOf("y");g=x||-1!==g.indexOf("text");e=m?[r("open"),r("high"),r("low"),r("close")+"  "+k[e]]:[];g&&l(u,w,e);c.extraText=e.join("\x3cbr\x3e");
c.y0=c.y1=v.c2p(u.yc,!0);return[c]}var h=b("../../plots/cartesian/axes"),a=b("../../lib"),f=b("../../components/fx"),d=b("../../components/color"),l=b("../../lib").fillText;b=b("../../constants/delta.js");var k={increasing:b.INCREASING.SYMBOL,decreasing:b.DECREASING.SYMBOL};y.exports={hoverPoints:function(c,e,g,m){return c.cd[0].trace.hoverlabel.split?n(c,e,g,m):p(c,e,g,m)},hoverSplit:n,hoverOnPoints:p}},{"../../components/color":615,"../../components/fx":655,"../../constants/delta.js":718,"../../lib":749,
"../../plots/cartesian/axes":797}],1105:[function(b,y,F){y.exports={moduleType:"trace",name:"ohlc",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc").calc,plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select")}},{"../../plots/cartesian":810,"./attributes":1101,"./calc":1102,"./defaults":1103,"./hover":1104,"./plot":1107,"./select":1108,
"./style":1109}],1106:[function(b,y,F){var q=b("../../registry"),n=b("../../lib");y.exports=function(p,h,a,f){var d=a("x"),l=a("open"),k=a("high"),c=a("low"),e=a("close");a("hoverlabel.split");q.getComponentMethod("calendars","handleTraceDefaults")(p,h,["x"],f);if(l&&k&&c&&e)return p=Math.min(l.length,k.length,c.length,e.length),d&&(p=Math.min(p,n.minRowLength(d))),h._length=p}},{"../../lib":749,"../../registry":880}],1107:[function(b,y,F){var q=b("d3"),n=b("../../lib");y.exports=function(p,h,a,f){var d=
h.yaxis,l=h.xaxis,k=!!l.rangebreaks;n.makeTraceGroups(f,a,"trace ohlc").each(function(c){var e=q.select(this);c=c[0];var g=c.t;if(!0!==c.trace.visible||g.empty)e.remove();else{var m=g.tickLen;e=e.selectAll("path").data(n.identity);e.enter().append("path");e.exit().remove();e.attr("d",function(r){if(r.empty)return"M0,0Z";var u=l.c2p(r.pos-m,!0),v=l.c2p(r.pos+m,!0),w=k?(u+v)/2:l.c2p(r.pos,!0),D=d.c2p(r.o,!0),C=d.c2p(r.h,!0),x=d.c2p(r.l,!0);r=d.c2p(r.c,!0);return"M"+u+","+D+"H"+w+"M"+w+","+C+"V"+x+"M"+
v+","+r+"H"+w})}})}},{"../../lib":749,d3:169}],1108:[function(b,y,F){y.exports=function(q,n){var p=q.cd,h=q.xaxis,a=q.yaxis,f=[],d,l=p[0].t.bPos||0;if(!1===n)for(d=0;d<p.length;d++)p[d].selected=0;else for(d=0;d<p.length;d++){var k=p[d];n.contains([h.c2p(k.pos+l),a.c2p(k.yc)],null,k.i,q)?(f.push({pointNumber:k.i,x:h.c2d(k.pos),y:a.c2d(k.yc)}),k.selected=1):k.selected=0}return f}},{}],1109:[function(b,y,F){var q=b("d3"),n=b("../../components/drawing"),p=b("../../components/color");y.exports=function(h,
a,f){h=f?f:q.select(h).selectAll("g.ohlclayer").selectAll("g.trace");h.style("opacity",function(d){return d[0].trace.opacity});h.each(function(d){var l=d[0].trace;q.select(this).selectAll("path").each(function(k){if(!k.empty){var c=l[k.dir].line;q.select(this).style("fill","none").call(p.stroke,c.color).call(n.dashLine,c.dash,c.width).style("opacity",l.selectedpoints&&!k.selected?.3:1)}})})}},{"../../components/color":615,"../../components/drawing":637,d3:169}],1110:[function(b,y,F){F=b("../../lib/extend").extendFlat;
var q=b("../../plots/attributes"),n=b("../../plots/font_attributes"),p=b("../../components/colorscale/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../plots/domain").attributes;p=F({editType:"calc"},p("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:h({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});y.exports={domain:b({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:F({},
q.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:h({editType:"plot",arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",
values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:n({editType:"calc"}),tickfont:n({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",
editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:p,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/font_attributes":825,"../../plots/template_attributes":875}],1111:[function(b,y,F){var q=
b("../../plots/get_data").getModuleCalcData,n=b("./plot");F.name="parcats";F.plot=function(p,h,a,f){h=q(p.calcdata,"parcats");h.length&&n(p,h[0],a,f)};F.clean=function(p,h,a,f){p=f._has&&f._has("parcats");h=h._has&&h._has("parcats");p&&!h&&f._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":834,"./plot":1116}],1112:[function(b,y,F){function q(r,u,v){var w=r.map(function(D){return D.categories.length}).reduce(function(D,C){return Math.max(D,C)});return{dimensions:r,paths:u,trace:void 0,
maxCats:w,count:v}}function n(r,u,v){r.valueInds.push(u);r.count+=v}function p(r,u,v){r.valueInds.push(u);r.count+=v}function h(r,u){u=void 0===u||null===u?[]:u.map(function(B){return B});var v={},w={},D=[];u.forEach(function(B,t){v[B]=0;w[B]=t});for(var C=0;C<r.length;C++){var x=r[C];if(void 0===v[x]){v[x]=1;var A=u.push(x)-1;w[x]=A}else v[x]++,A=w[x];D.push(A)}r=u.map(function(B){return v[B]});return{uniqueValues:u,uniqueCounts:r,inds:D}}function a(r){var u=r.map(function(v){return v.displayindex});
if(f(u))for(u=0;u<r.length;u++)r[u]._displayindex=r[u].displayindex;else for(u=0;u<r.length;u++)r[u]._displayindex=u}function f(r){for(var u=Array(r.length),v=0;v<r.length;v++){if(0>r[v]||r[v]>=r.length||void 0!==u[r[v]])return!1;u[r[v]]=!0}return!0}var d=b("../../lib/gup").wrap,l=b("../../components/colorscale/helpers").hasColorscale,k=b("../../components/colorscale/calc"),c=b("../../lib/filter_unique.js"),e=b("../../components/drawing"),g=b("../../lib"),m=b("fast-isnumeric");y.exports=function(r,
u){function v(K){if(g.isArrayOrTypedArray(x.color))var N=K=x.color[K%x.color.length];else K=x.color;return{color:A(K),rawColor:N}}var w=g.filterVisible(u.dimensions);if(0===w.length)return[];var D=w.map(function(K){if("trace"===K.categoryorder)var N=null;else if("array"===K.categoryorder)N=K.categoryarray;else{N=c(K.values);for(var O=!0,Q=0;Q<N.length;Q++)if(!m(N[Q])){O=!1;break}N.sort(O?g.sorterAsc:void 0);"category descending"===K.categoryorder&&(N=N.reverse())}return h(K.values,N)});var C=g.isArrayOrTypedArray(u.counts)?
u.counts:[u.counts];a(w);w.forEach(function(K,N){N=D[N];K._categoryarray=N.uniqueValues;K._ticktext=null===K.ticktext||void 0===K.ticktext?[]:K.ticktext.slice();for(var O=K._ticktext.length;O<N.uniqueValues.length;O++)K._ticktext.push(N.uniqueValues[O])});var x=u.line;if(x){l(u,"line")&&k(r,u,{vals:u.line.color,containerStr:"line",cLetter:"c"});var A=e.tryColorscale(x)}else A=g.identity;var B=w[0].values.length,t={},G=D.map(function(K){return K.inds});var H=0;var I,J;for(I=0;I<B;I++){var L=[];for(J=
0;J<G.length;J++)L.push(G[J][I]);r=C[I%C.length];H+=r;J=v(I);var E=L+"-"+J.rawColor;void 0===t[E]&&(t[E]={categoryInds:L,color:J.color,rawColor:J.rawColor,valueInds:[],count:0});p(t[E],I,r)}w=w.map(function(K,N){return{dimensionInd:N,containerInd:K._index,displayInd:K._displayindex,dimensionLabel:K.label,count:H,categories:[],dragX:null}});for(I=0;I<B;I++)for(r=C[I%C.length],J=0;J<w.length;J++)G=w[J].containerInd,L=D[J].inds[I],E=w[J].categories,void 0===E[L]&&(E[L]={dimensionInd:J,categoryInd:L,
categoryValue:u.dimensions[G]._categoryarray[L],displayInd:L,categoryLabel:u.dimensions[G]._ticktext[L],valueInds:[],count:0,dragY:null}),n(E[L],I,r);return d(q(w,t,H))}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../components/drawing":637,"../../lib":749,"../../lib/filter_unique.js":740,"../../lib/gup":746,"fast-isnumeric":241}],1113:[function(b,y,F){function q(c,e,g,m,r){r("line.shape");r("line.hovertemplate");var u=r("line.color",m.colorway[0]);if(h(c,
"line")&&p.isArrayOrTypedArray(u)){if(u.length)return r("line.colorscale"),a(c,e,m,r,{prefix:"line.",cLetter:"c"}),u.length;e.line.color=g}return Infinity}function n(c,e){function g(v,w){return p.coerce(c,e,l.dimensions,v,w)}var m=g("values"),r=g("visible");m&&m.length||(r=e.visible=!1);if(r){g("label");g("displayindex",e._index);m=c.categoryarray;m=Array.isArray(m)&&0<m.length;var u;m&&(u="array");u=g("categoryorder",u);"array"===u?(g("categoryarray"),g("ticktext")):(delete c.categoryarray,delete c.ticktext);
m||"array"!==u||(e.categoryorder="trace")}}var p=b("../../lib"),h=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),f=b("../../plots/domain").defaults,d=b("../../plots/array_container_defaults"),l=b("./attributes"),k=b("../parcoords/merge_length");y.exports=function(c,e,g,m){function r(v,w){return p.coerce(c,e,l,v,w)}var u=d(c,e,{name:"dimensions",handleItemDefaults:n});g=q(c,e,g,m,r);f(e,m,r);Array.isArray(u)&&u.length||(e.visible=!1);k(e,u,"values",
g);r("hoveron");r("hovertemplate");r("arrangement");r("bundlecolors");r("sortpaths");r("counts");p.coerceFont(r,"labelfont",{family:m.font.family,size:Math.round(m.font.size),color:m.font.color});p.coerceFont(r,"tickfont",{family:m.font.family,size:Math.round(m.font.size/1.2),color:m.font.color})}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/domain":824,"../parcoords/merge_length":1126,
"./attributes":1110}],1114:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1110,"./base_plot":1111,"./calc":1112,"./defaults":1113,"./plot":1116}],1115:[function(b,y,F){function q(ca,la,pa,qa){ca=ca.map(K.bind(0,la,pa));qa=qa.selectAll("g.parcatslayer").data([null]);
qa.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");qa=qa.selectAll("g.trace.parcats").data(ca,n);ca=qa.enter().append("g").attr("class","trace parcats");qa.attr("transform",function(ha){return"translate("+ha.x+", "+ha.y+")"});ca.append("g").attr("class","paths");pa=qa.select("g.paths").selectAll("path.path").data(function(ha){return ha.paths},n);pa.attr("fill",function(ha){return ha.model.color});var oa=pa.enter().append("path").attr("class","path").attr("stroke-opacity",
0).attr("fill",function(ha){return ha.model.color}).attr("fill-opacity",0);c(oa);pa.attr("d",function(ha){return ha.svgD});oa.empty()||pa.sort(h);pa.exit().remove();pa.on("mouseover",a).on("mouseout",f).on("click",k);ca.append("g").attr("class","dimensions");ca=qa.select("g.dimensions").selectAll("g.dimension").data(function(ha){return ha.dimensions},n);ca.enter().append("g").attr("class","dimension");ca.attr("transform",function(ha){return"translate("+ha.x+", 0)"});ca.exit().remove();pa=ca.selectAll("g.category").data(function(ha){return ha.categories},
n);oa=pa.enter().append("g").attr("class","category");pa.attr("transform",function(ha){return"translate(0, "+ha.y+")"});oa.append("rect").attr("class","catrect").attr("pointer-events","none");pa.select("rect.catrect").attr("fill","none").attr("width",function(ha){return ha.width}).attr("height",function(ha){return ha.height});g(oa);var ka=pa.selectAll("rect.bandrect").data(function(ha){return ha.bands},n);ka.each(function(){ba.raiseToTop(this)});ka.attr("fill",function(ha){return ha.color});var ra=
ka.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ha){return ha.color}).attr("fill-opacity",0);ka.attr("fill",function(ha){return ha.color}).attr("width",function(ha){return ha.width}).attr("height",function(ha){return ha.height}).attr("y",function(ha){return ha.y}).attr("cursor",function(ha){return"fixed"===ha.parcatsViewModel.arrangement?"default":"perpendicular"===ha.parcatsViewModel.arrangement?"ns-resize":"move"});m(ra);ka.exit().remove();oa.append("text").attr("class",
"catlabel").attr("pointer-events","none");ka=la._fullLayout.paper_bgcolor;pa.select("text.catlabel").attr("text-anchor",function(ha){return p(ha)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",ka+" -1px  1px 2px, "+ka+" 1px  1px 2px, "+ka+"  1px -1px 2px, "+ka+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(ha){return p(ha)?ha.width+5:-5}).attr("y",function(ha){return ha.height/2}).text(function(ha){return ha.model.categoryLabel}).each(function(ha){Y.font(T.select(this),
ha.parcatsViewModel.categorylabelfont);da.convertToTspans(T.select(this),la)});oa.append("text").attr("class","dimlabel");pa.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ha){return"fixed"===ha.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(ha){return ha.width/2}).attr("y",-5).text(function(ha,ma){return 0===ma?ha.parcatsViewModel.model.dimensions[ha.model.dimensionInd].dimensionLabel:null}).each(function(ha){Y.font(T.select(this),
ha.parcatsViewModel.labelfont)});pa.selectAll("rect.bandrect").on("mouseover",B).on("mouseout",t);pa.exit().remove();ca.call(T.behavior.drag().origin(function(ha){return{x:ha.x,y:0}}).on("dragstart",G).on("drag",H).on("dragend",I));qa.each(function(ha){ha.traceSelection=T.select(this);ha.pathSelection=T.select(this).selectAll("g.paths").selectAll("path.path");ha.dimensionSelection=T.select(this).selectAll("g.dimensions").selectAll("g.dimension")});qa.exit().remove()}function n(ca){return ca.key}function p(ca){return ca.model.dimensionInd===
ca.parcatsViewModel.dimensions[ca.parcatsViewModel.dimensions.length-1].model.dimensionInd}function h(ca,la){return ca.model.rawColor>la.model.rawColor?1:ca.model.rawColor<la.model.rawColor?-1:0}function a(ca){if(!ca.parcatsViewModel.dragDimension&&-1===ca.parcatsViewModel.hoverinfoItems.indexOf("skip")){ba.raiseToTop(this);e(T.select(this));var la=d(ca),pa=l(ca);ca.parcatsViewModel.graphDiv.emit("plotly_hover",{points:la,event:T.event,constraints:pa});if(-1===ca.parcatsViewModel.hoverinfoItems.indexOf("none")){var qa=
T.mouse(this)[0];la=ca.parcatsViewModel.graphDiv;pa=ca.parcatsViewModel.trace;var oa=la._fullLayout,ka=oa._paperdiv.node().getBoundingClientRect(),ra=ca.parcatsViewModel.graphDiv.getBoundingClientRect(),ha;for(ha=0;ha<ca.leftXs.length-1;ha++)if(ca.leftXs[ha]+ca.dimWidths[ha]-2<=qa&&qa<=ca.leftXs[ha+1]+2){var ma=ca.parcatsViewModel.dimensions[ha];ma=(ma.x+ma.width+ca.parcatsViewModel.dimensions[ha+1].x)/2;var wa=(ca.topYs[ha]+ca.topYs[ha+1]+ca.height)/2;break}ma=ca.parcatsViewModel.x+ma;wa=ca.parcatsViewModel.y+
wa;ha=ea.mostReadable(ca.model.color,["black","white"]);qa=ca.model.count;var na=qa/ca.parcatsViewModel.model.count,ya={countLabel:qa,probabilityLabel:na.toFixed(3)},Fa=[];-1!==ca.parcatsViewModel.hoverinfoItems.indexOf("count")&&Fa.push(["Count:",ya.countLabel].join(" "));-1!==ca.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Fa.push(["P:",ya.probabilityLabel].join(" "));Fa=Fa.join("\x3cbr\x3e");var Ha=T.mouse(la)[0];aa.loneHover({trace:pa,x:ma-ka.left+ra.left,y:wa-ka.top+ra.top,text:Fa,
color:ca.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ha,idealAlign:Ha<ma?"right":"left",hovertemplate:(pa.line||{}).hovertemplate,hovertemplateLabels:ya,eventData:[{data:pa._input,fullData:pa,count:qa,probability:na}]},{container:oa._hoverlayer.node(),outerContainer:oa._paper.node(),gd:la})}}}function f(ca){if(!ca.parcatsViewModel.dragDimension&&(c(T.select(this)),aa.loneUnhover(ca.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),ca.parcatsViewModel.pathSelection.sort(h),
-1===ca.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var la=d(ca),pa=l(ca);ca.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:la,event:T.event,constraints:pa})}}function d(ca){for(var la=[],pa=J(ca.parcatsViewModel),qa=0;qa<ca.model.valueInds.length;qa++)la.push({curveNumber:pa,pointNumber:ca.model.valueInds[qa]});return la}function l(ca){for(var la={},pa=ca.parcatsViewModel.model.dimensions,qa=0;qa<pa.length;qa++){var oa=pa[qa];la[oa.containerInd]=oa.categories[ca.model.categoryInds[qa]].categoryValue}void 0!==
ca.model.rawColor&&(la.color=ca.model.rawColor);return la}function k(ca){if(-1===ca.parcatsViewModel.hoverinfoItems.indexOf("skip")){var la=d(ca),pa=l(ca);ca.parcatsViewModel.graphDiv.emit("plotly_click",{points:la,event:T.event,constraints:pa})}}function c(ca){ca.attr("fill",function(la){return la.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function e(ca){ca.attr("fill-opacity",.8).attr("stroke",function(la){return ea.mostReadable(la.model.color,
["black","white"])}).attr("stroke-width",.3)}function g(ca){ca.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function m(ca){ca.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function r(ca){var la=ca.categoryViewModel.model.dimensionInd,pa=ca.categoryViewModel.model.categoryInd;return ca.parcatsViewModel.pathSelection.filter(function(qa){return qa.model.categoryInds[la]===pa&&qa.model.color===ca.color})}
function u(ca){T.select(ca.parentNode).selectAll("rect.bandrect").each(function(la){la=r(la);e(la);la.each(function(){ba.raiseToTop(this)})});T.select(ca.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function v(ca){var la=T.select(ca).datum(),pa=r(la);e(pa);pa.each(function(){ba.raiseToTop(this)});T.select(ca.parentNode).selectAll("rect.bandrect").filter(function(qa){return qa.color===la.color}).each(function(){ba.raiseToTop(this);T.select(this).attr("stroke",
"black").attr("stroke-width",1.5)})}function w(ca,la,pa){var qa=T.select(ca).datum(),oa=qa.categoryViewModel.model;qa=qa.parcatsViewModel.graphDiv;var ka=[];T.select(ca.parentNode).selectAll("rect.bandrect").each(function(ra){r(ra).each(function(ha){Array.prototype.push.apply(ka,d(ha))})});ca={};ca[oa.dimensionInd]=oa.categoryValue;qa.emit(la,{points:ka,event:pa,constraints:ca})}function D(ca,la,pa){ca=T.select(ca).datum();var qa=ca.categoryViewModel.model,oa=ca.parcatsViewModel.graphDiv,ka=[];r(ca).each(function(ha){Array.prototype.push.apply(ka,
d(ha))});var ra={};ra[qa.dimensionInd]=qa.categoryValue;void 0!==ca.rawColor&&(ra.color=ca.rawColor);oa.emit(la,{points:ka,event:pa,constraints:ra})}function C(ca,la){la=T.select(la.parentNode).select("rect.catrect");var pa=la.node().getBoundingClientRect(),qa=la.datum(),oa=qa.parcatsViewModel,ka=oa.model.dimensions[qa.model.dimensionInd];la=oa.trace;var ra=pa.top+pa.height/2;1<oa.dimensions.length&&ka.displayInd===oa.dimensions.length-1?(pa=pa.left,oa="left"):(pa=pa.left+pa.width,oa="right");ka=
qa.model.count;var ha=qa.model.categoryLabel,ma=ka/qa.parcatsViewModel.model.count,wa={countLabel:ka,categoryLabel:ha,probabilityLabel:ma.toFixed(3)},na=[];-1!==qa.parcatsViewModel.hoverinfoItems.indexOf("count")&&na.push(["Count:",wa.countLabel].join(" "));-1!==qa.parcatsViewModel.hoverinfoItems.indexOf("probability")&&na.push(["P("+wa.categoryLabel+"):",wa.probabilityLabel].join(" "));qa=na.join("\x3cbr\x3e");return{trace:la,x:pa-ca.left,y:ra-ca.top,text:qa,color:"lightgray",borderColor:"black",
fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:oa,hovertemplate:la.hovertemplate,hovertemplateLabels:wa,eventData:[{data:la._input,fullData:la,count:ka,category:ha,probability:ma}]}}function x(ca,la){var pa=[];T.select(la.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){pa.push(C(ca,this))});return pa}function A(ca,la){var pa=la.getBoundingClientRect(),qa=T.select(la).datum(),oa=qa.categoryViewModel,ka=oa.parcatsViewModel,
ra=ka.model.dimensions[oa.model.dimensionInd];la=ka.trace;var ha=pa.y+pa.height/2;1<ka.dimensions.length&&ra.displayInd===ka.dimensions.length-1?(pa=pa.left,ra="left"):(pa=pa.left+pa.width,ra="right");var ma=oa.model.categoryLabel,wa=qa.parcatsViewModel.model.count,na=0;qa.categoryViewModel.bands.forEach(function(ib){ib.color===qa.color&&(na+=ib.count)});var ya=oa.model.count,Fa=0;ka.pathSelection.each(function(ib){ib.model.color===qa.color&&(Fa+=ib.model.count)});ka=na/wa;var Ha=na/Fa,eb=na/ya,hb=
{countLabel:wa,categoryLabel:ma,probabilityLabel:ka.toFixed(3)},ob=[];-1!==oa.parcatsViewModel.hoverinfoItems.indexOf("count")&&ob.push(["Count:",hb.countLabel].join(" "));-1!==oa.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(ob.push("P(color  "+ma+"): "+hb.probabilityLabel),ob.push("P("+ma+" | color): "+Ha.toFixed(3)),ob.push("P(color | "+ma+"): "+eb.toFixed(3)));oa=ob.join("\x3cbr\x3e");Ha=ea.mostReadable(qa.color,["black","white"]);return{trace:la,x:pa-ca.left,y:ha-ca.top,text:oa,color:qa.color,
borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ha,fontSize:10,idealAlign:ra,hovertemplate:la.hovertemplate,hovertemplateLabels:hb,eventData:[{data:la._input,fullData:la,category:ma,count:wa,probability:ka,categorycount:ya,colorcount:Fa,bandcolorcount:na}]}}function B(ca){if(!(ca.parcatsViewModel.dragDimension||-1!==ca.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>T.mouse(this)[1])){var la=ca.parcatsViewModel.graphDiv,pa=la._fullLayout,qa=pa._paperdiv.node().getBoundingClientRect(),
oa=ca.parcatsViewModel.hoveron;"color"===oa?(v(this),D(this,"plotly_hover",T.event)):(u(this),w(this,"plotly_hover",T.event));if(-1===ca.parcatsViewModel.hoverinfoItems.indexOf("none")){var ka;"category"===oa?ka=C(qa,this):"color"===oa?ka=A(qa,this):"dimension"===oa&&(ka=x(qa,this));ka&&aa.loneHover(ka,{container:pa._hoverlayer.node(),outerContainer:pa._paper.node(),gd:la})}}}function t(ca){var la=ca.parcatsViewModel;la.dragDimension||(c(la.pathSelection),g(la.dimensionSelection.selectAll("g.category")),
m(la.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),aa.loneUnhover(la.graphDiv._fullLayout._hoverlayer.node()),la.pathSelection.sort(h),-1===la.hoverinfoItems.indexOf("skip")&&("color"===ca.parcatsViewModel.hoveron?D(this,"plotly_unhover",T.event):w(this,"plotly_unhover",T.event)))}function G(ca){"fixed"!==ca.parcatsViewModel.arrangement&&(ca.dragDimensionDisplayInd=ca.model.displayInd,ca.initialDragDimensionDisplayInds=ca.parcatsViewModel.model.dimensions.map(function(la){return la.displayInd}),
ca.dragHasMoved=!1,ca.dragCategoryDisplayInd=null,T.select(this).selectAll("g.category").select("rect.catrect").each(function(la){var pa=T.mouse(this)[0],qa=T.mouse(this)[1];-2<=pa&&pa<=la.width+2&&-2<=qa&&qa<=la.height+2&&(ca.dragCategoryDisplayInd=la.model.displayInd,ca.initialDragCategoryDisplayInds=ca.model.categories.map(function(oa){return oa.displayInd}),la.model.dragY=la.y,ba.raiseToTop(this.parentNode),T.select(this.parentNode).selectAll("rect.bandrect").each(function(oa){oa.y<qa&&qa<=oa.y+
oa.height&&(ca.potentialClickBand=this)}))}),ca.parcatsViewModel.dragDimension=ca,aa.loneUnhover(ca.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function H(ca){if("fixed"!==ca.parcatsViewModel.arrangement&&(ca.dragHasMoved=!0,null!==ca.dragDimensionDisplayInd)){var la=ca.dragDimensionDisplayInd,pa=la-1,qa=la+1,oa=ca.parcatsViewModel.dimensions[la];if(null!==ca.dragCategoryDisplayInd){var ka=oa.categories[ca.dragCategoryDisplayInd];ka.model.dragY+=T.event.dy;var ra=ka.model.dragY,ha=
ka.model.displayInd,ma=oa.categories,wa=ma[ha-1];ma=ma[ha+1];void 0!==wa&&ra<wa.y+wa.height/2&&(ka.model.displayInd=wa.model.displayInd,wa.model.displayInd=ha);void 0!==ma&&ra+ka.height>ma.y+ma.height/2&&(ka.model.displayInd=ma.model.displayInd,ma.model.displayInd=ha);ca.dragCategoryDisplayInd=ka.model.displayInd}if(null===ca.dragCategoryDisplayInd||"freeform"===ca.parcatsViewModel.arrangement)oa.model.dragX=T.event.x,pa=ca.parcatsViewModel.dimensions[pa],qa=ca.parcatsViewModel.dimensions[qa],void 0!==
pa&&oa.model.dragX<pa.x+pa.width&&(oa.model.displayInd=pa.model.displayInd,pa.model.displayInd=la),void 0!==qa&&oa.model.dragX+oa.width>qa.x&&(oa.model.displayInd=qa.model.displayInd,qa.model.displayInd=ca.dragDimensionDisplayInd),ca.dragDimensionDisplayInd=oa.model.displayInd;Q(ca.parcatsViewModel);O(ca.parcatsViewModel);E(ca.parcatsViewModel);L(ca.parcatsViewModel)}}function I(ca){if("fixed"!==ca.parcatsViewModel.arrangement&&null!==ca.dragDimensionDisplayInd){T.select(this).selectAll("text").attr("font-weight",
"normal");var la={},pa=J(ca.parcatsViewModel),qa=ca.parcatsViewModel.model.dimensions.map(function(wa){return wa.displayInd}),oa=ca.initialDragDimensionDisplayInds.some(function(wa,na){return wa!==qa[na]});oa&&qa.forEach(function(wa,na){la["dimensions["+ca.parcatsViewModel.model.dimensions[na].containerInd+"].displayindex"]=wa});var ka=!1;if(null!==ca.dragCategoryDisplayInd){var ra=ca.model.categories.map(function(wa){return wa.displayInd});if(ka=ca.initialDragCategoryDisplayInds.some(function(wa,
na){return wa!==ra[na]})){var ha=ca.model.categories.slice().sort(function(wa,na){return wa.displayInd-na.displayInd}),ma=ha.map(function(wa){return wa.categoryValue});ha=ha.map(function(wa){return wa.categoryLabel});la["dimensions["+ca.model.containerInd+"].categoryarray"]=[ma];la["dimensions["+ca.model.containerInd+"].ticktext"]=[ha];la["dimensions["+ca.model.containerInd+"].categoryorder"]="array"}}-1===ca.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!ca.dragHasMoved&&ca.potentialClickBand&&
("color"===ca.parcatsViewModel.hoveron?D(ca.potentialClickBand,"plotly_click",T.event.sourceEvent):w(ca.potentialClickBand,"plotly_click",T.event.sourceEvent));ca.model.dragX=null;null!==ca.dragCategoryDisplayInd&&(ca.parcatsViewModel.dimensions[ca.dragDimensionDisplayInd].categories[ca.dragCategoryDisplayInd].model.dragY=null,ca.dragCategoryDisplayInd=null);ca.dragDimensionDisplayInd=null;ca.parcatsViewModel.dragDimension=null;ca.dragHasMoved=null;ca.potentialClickBand=null;Q(ca.parcatsViewModel);
O(ca.parcatsViewModel);T.transition().duration(300).ease("cubic-in-out").each(function(){E(ca.parcatsViewModel,!0);L(ca.parcatsViewModel,!0)}).each("end",function(){(oa||ka)&&V.restyle(ca.parcatsViewModel.graphDiv,la,[pa])})}}function J(ca){for(var la,pa=ca.graphDiv._fullData,qa=0;qa<pa.length;qa++)if(ca.key===pa[qa].uid){la=qa;break}return la}function L(ca,la){void 0===la&&(la=!1);ca.pathSelection.data(function(pa){return pa.paths},n);(function(pa){return la?pa.transition():pa})(ca.pathSelection).attr("d",
function(pa){return pa.svgD})}function E(ca,la){function pa(oa){return la?oa.transition():oa}void 0===la&&(la=!1);ca.dimensionSelection.data(function(oa){return oa.dimensions},n);var qa=ca.dimensionSelection.selectAll("g.category").data(function(oa){return oa.categories},n);pa(ca.dimensionSelection).attr("transform",function(oa){return"translate("+oa.x+", 0)"});pa(qa).attr("transform",function(oa){return"translate(0, "+oa.y+")"});qa.select(".dimlabel").text(function(oa,ka){return 0===ka?oa.parcatsViewModel.model.dimensions[oa.model.dimensionInd].dimensionLabel:
null});qa.select(".catlabel").attr("text-anchor",function(oa){return p(oa)?"start":"end"}).attr("x",function(oa){return p(oa)?oa.width+5:-5}).each(function(oa){if(p(oa)){oa=oa.width+5;var ka="start"}else oa=-5,ka="end";T.select(this).selectAll("tspan").attr("x",oa).attr("text-anchor",ka)});ca=qa.selectAll("rect.bandrect").data(function(oa){return oa.bands},n);qa=ca.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(oa){return oa.color}).attr("fill-opacity",
0);ca.attr("fill",function(oa){return oa.color}).attr("width",function(oa){return oa.width}).attr("height",function(oa){return oa.height}).attr("y",function(oa){return oa.y});m(qa);ca.each(function(){ba.raiseToTop(this)});ca.exit().remove()}function K(ca,la,pa){pa=pa[0];var qa=la.margin||{l:80,r:80,t:100,b:80},oa=pa.trace,ka=oa.domain,ra=la.width,ha=Math.floor(ra*(ka.x[1]-ka.x[0])),ma=Math.floor(la.height*(ka.y[1]-ka.y[0]));ra=ka.x[0]*ra+qa.l;la=la.height-ka.y[1]*la.height+qa.t;ka=oa.line.shape;var wa=
"all"===oa.hoverinfo?["count","probability"]:(oa.hoverinfo||"").split("+");ca={trace:oa,key:oa.uid,model:pa,x:ra,y:la,width:ha,height:ma,hoveron:oa.hoveron,hoverinfoItems:wa,arrangement:oa.arrangement,bundlecolors:oa.bundlecolors,sortpaths:oa.sortpaths,labelfont:oa.labelfont,categorylabelfont:oa.tickfont,pathShape:ka,dragDimension:null,margin:qa,paths:[],dimensions:[],graphDiv:ca,traceSelection:null,pathSelection:null,dimensionSelection:null};pa.dimensions&&(Q(ca),O(ca));return ca}function N(ca,la,
pa,qa,oa){var ka=[],ra=[],ha;for(ha=0;ha<pa.length-1;ha++){var ma=T.interpolateNumber(pa[ha]+ca[ha],ca[ha+1]);ka.push(ma(oa));ra.push(ma(1-oa))}oa="M "+ca[0]+","+la[0];oa+="l"+pa[0]+",0 ";for(ha=1;ha<pa.length;ha++)oa+="C"+ka[ha-1]+","+la[ha-1]+" "+ra[ha-1]+","+la[ha]+" "+ca[ha]+","+la[ha],oa+="l"+pa[ha]+",0 ";oa=oa+("l0,"+qa+" l -")+(pa[pa.length-1]+",0 ");for(ha=pa.length-2;0<=ha;ha--)oa+="C"+ra[ha]+","+(la[ha+1]+qa)+" "+ka[ha]+","+(la[ha]+qa)+" "+(ca[ha]+pa[ha])+","+(la[ha]+qa),oa+="l-"+pa[ha]+
",0 ";return oa+"Z"}function O(ca){function la(tb){var Aa=tb.categoryInds.map(function(Ka,Qa){return ka[Qa][Ka]});return ha.map(function(Ka){return Aa[Ka]})}var pa=ca.dimensions,qa=ca.model,oa=pa.map(function(tb){return tb.categories.map(function(Aa){return Aa.y})}),ka=ca.model.dimensions.map(function(tb){return tb.categories.map(function(Aa){return Aa.displayInd})}),ra=ca.model.dimensions.map(function(tb){return tb.displayInd}),ha=ca.dimensions.map(function(tb){return tb.model.dimensionInd}),ma=
pa.map(function(tb){return tb.x}),wa=pa.map(function(tb){return tb.width}),na=[];for(ya in qa.paths)qa.paths.hasOwnProperty(ya)&&na.push(qa.paths[ya]);na.sort(function(tb,Aa){var Ka=la(tb),Qa=la(Aa);"backward"===ca.sortpaths&&(Ka.reverse(),Qa.reverse());Ka.push(tb.valueInds[0]);Qa.push(Aa.valueInds[0]);ca.bundlecolors&&(Ka.unshift(tb.rawColor),Qa.unshift(Aa.rawColor));return Ka<Qa?-1:Ka>Qa?1:0});qa=Array(na.length);var ya=pa[0].model.count;pa=pa[0].categories.map(function(tb){return tb.height}).reduce(function(tb,
Aa){return tb+Aa});for(var Fa=0;Fa<na.length;Fa++){var Ha=na[Fa];var eb=0<ya?Ha.count/ya*pa:0;for(var hb=Array(oa.length),ob=0;ob<Ha.categoryInds.length;ob++){var ib=ka[ob][Ha.categoryInds[ob]],Pa=ra[ob];hb[Pa]=oa[Pa][ib];oa[Pa][ib]+=eb;ib=ca.dimensions[Pa].categories[ib];Pa=ib.bands.length;var sb=ib.bands[Pa-1];void 0===sb||Ha.rawColor!==sb.rawColor?(Pa=void 0===sb?0:sb.y+sb.height,ib.bands.push({key:Pa,color:Ha.color,rawColor:Ha.rawColor,height:eb,width:ib.width,count:Ha.count,y:Pa,categoryViewModel:ib,
parcatsViewModel:ca})):(ib=ib.bands[Pa-1],ib.height+=eb,ib.count+=Ha.count)}ob="hspline"===ca.pathShape?N(ma,hb,wa,eb,.5):N(ma,hb,wa,eb,0);qa[Fa]={key:Ha.valueInds[0],model:Ha,height:eb,leftXs:ma,topYs:hb,dimWidths:wa,svgD:ob,parcatsViewModel:ca}}ca.paths=qa}function Q(ca){var la=ca.model.dimensions.map(function(oa){return{displayInd:oa.displayInd,dimensionInd:oa.dimensionInd}});la.sort(function(oa,ka){return oa.displayInd-ka.displayInd});var pa=[],qa;for(qa in la)pa.push(P(ca,ca.model.dimensions[la[qa].dimensionInd]));
ca.dimensions=pa}function P(ca,la){var pa=ca.model.dimensions.length;pa=40+(1<pa?(ca.width-80-16)/(pa-1):0)*la.displayInd;var qa=[],oa=ca.model.maxCats,ka=la.categories.length,ra=la.count,ha=ca.height-8*(oa-1),ma=8*(oa-ka)/2,wa=la.categories.map(function(Fa){return{displayInd:Fa.displayInd,categoryInd:Fa.categoryInd}});wa.sort(function(Fa,Ha){return Fa.displayInd-Ha.displayInd});for(oa=0;oa<ka;oa++){var na=wa[oa].categoryInd;var ya=la.categories[na];na=0<ra?ya.count/ra*ha:0;ya={key:ya.valueInds[0],
model:ya,width:16,height:na,y:null!==ya.dragY?ya.dragY:ma,bands:[],parcatsViewModel:ca};ma=ma+na+8;qa.push(ya)}return{key:la.dimensionInd,x:null!==la.dragX?la.dragX:pa,y:0,width:16,model:la,categories:qa,parcatsViewModel:ca,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}var T=b("d3"),V=b("../../plot_api/plot_api"),aa=b("../../components/fx"),ba=b("../../lib"),Y=b("../../components/drawing"),
ea=b("tinycolor2"),da=b("../../lib/svg_text_utils");y.exports=function(ca,la,pa,qa){q(pa,ca,qa,la)}},{"../../components/drawing":637,"../../components/fx":655,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_api":784,d3:169,tinycolor2:548}],1116:[function(b,y,F){var q=b("./parcats");y.exports=function(n,p,h,a){var f=n._fullLayout,d=f._size;q(n,f._paper,p,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},h,a)}},{"./parcats":1115}],1117:[function(b,y,F){F=b("../../components/colorscale/attributes");
var q=b("../../plots/cartesian/layout_attributes"),n=b("../../plots/font_attributes"),p=b("../../plots/domain").attributes,h=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;y.exports={domain:p({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:n({editType:"plot"}),tickfont:n({editType:"plot"}),rangefont:n({editType:"plot"}),
dimensions:b("dimension",{label:{valType:"string",editType:"plot"},tickvals:h({},q.tickvals,{editType:"plot"}),ticktext:h({},q.ticktext,{editType:"plot"}),tickformat:h({},q.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"plot"},{valType:"number",
editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:h({editType:"calc"},F("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/plot_template":787,"../../plots/cartesian/layout_attributes":811,"../../plots/domain":824,"../../plots/font_attributes":825}],1118:[function(b,y,F){function q(E,
K,N,O){a:{for(var Q=0;Q<O.length;Q++)if(N>=O[Q][0]&&N<=O[Q][1]){O=!0;break a}O=!1}if(O)return N;E=E?-1:1;var P=0;O=K.length-1;0>E&&(Q=P,P=O,O=Q);for(var T=Q=K[P];E*P<E*O;P+=E){var V=P+E,aa=K[V];if(E*N<E*(Q*(1-L)+aa*L))return Q*(1-J)+T*J;if(E*N<E*aa||V===O)return aa*(1-J)+Q*J;T=Q;Q=aa}}function n(E){E.attr("x",-B.bar.captureWidth/2).attr("width",B.bar.captureWidth)}function p(E){E.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function h(E){if(!E.brush.filterSpecified)return"0,"+
E.height;for(var K=a(E.brush.filter.getConsolidated(),E.height),N=[0],O,Q,P=K.length?K[0][0]:null,T=0;T<K.length;T++)O=K[T],Q=O[1]-O[0],N.push(P),N.push(Q),Q=T+1,Q<K.length&&(P=K[Q][0]-O[1]);N.push(E.height);return N}function a(E,K){return E.map(function(N){return N.map(function(O){return Math.max(0,O*K)}).sort(I)})}function f(){t.select(document.body).style("cursor",null)}function d(E){E.attr("stroke-dasharray",h)}function l(E,K){E=t.select(E).selectAll(".highlight, .highlight-shadow");K=K?E.transition().duration(B.bar.snapDuration).each("end",
K):E;d(K)}function k(E,K){var N=E.brush,O={};if(N.filterSpecified){var Q=E.height;N=N.filter.getConsolidated();var P=a(N,Q),T=NaN,V=NaN,aa=NaN;for(Q=0;Q<=P.length;Q++){var ba=P[Q];if(ba&&ba[0]<=K&&K<=ba[1]){T=Q;break}else if(V=Q?Q-1:NaN,ba&&ba[0]>K){aa=Q;break}}Q=T;isNaN(Q)&&(Q=isNaN(V)||isNaN(aa)?isNaN(V)?aa:V:K-P[V][1]<P[aa][0]-K?V:aa);isNaN(Q)||(P=P[Q],V=B.bar.handleHeight,V=K>P[1]+V||K<P[0]-V?void 0:K>=.9*P[1]+.1*P[0]?"n":K<=.9*P[0]+.1*P[1]?"s":"ns",V&&(O.interval=N[Q],O.intervalPix=P,O.region=
V))}if(E.ordinal&&!O.region)for(N=E.unitTickvals,E=E.unitToPaddedPx.invert(K),Q=0;Q<N.length;Q++)if(K=[.25*N[Math.max(Q-1,0)]+.75*N[Q],.25*N[Math.min(Q+1,N.length-1)]+.75*N[Q]],E>=K[0]&&E<=K[1]){O.clickableOrdinalRange=K;break}return O}function c(E,K){t.event.sourceEvent.stopPropagation();E=K.height-t.mouse(E)[1]-2*B.verticalPadding;var N=K.unitToPaddedPx.invert(E),O=K.brush,Q=k(K,E),P=Q.interval,T=O.svgBrush;T.wasDragged=!1;T.grabbingBar="ns"===Q.region;if(T.grabbingBar){var V=P.map(K.unitToPaddedPx);
T.grabPoint=E-V[0]-B.verticalPadding;T.barLength=V[1]-V[0]}T.clickableOrdinalRange=Q.clickableOrdinalRange;T.stayingIntervals=K.multiselect&&O.filterSpecified?O.filter.getConsolidated():[];P&&(T.stayingIntervals=T.stayingIntervals.filter(function(aa){return aa[0]!==P[0]&&aa[1]!==P[1]}));T.startExtent=Q.region?P["s"===Q.region?1:0]:N;K.parent.inBrushDrag=!0;T.brushStartCallback()}function e(E,K){t.event.sourceEvent.stopPropagation();var N=K.height-t.mouse(E)[1]-2*B.verticalPadding,O=K.brush.svgBrush;
O.wasDragged=!0;O._dragging=!0;O.newExtent=O.grabbingBar?[N-O.grabPoint,N+O.barLength-O.grabPoint].map(K.unitToPaddedPx.invert):[O.startExtent,K.unitToPaddedPx.invert(N)].sort(I);K.brush.filterSpecified=!0;O.extent=O.stayingIntervals.concat([O.newExtent]);O.brushCallback(K);l(E.parentNode)}function g(E,K){var N=K.brush,O=N.filter,Q=N.svgBrush;Q._dragging||(m(E,K),e(E,K),K.brush.svgBrush.wasDragged=!1);Q._dragging=!1;t.event.sourceEvent.stopPropagation();var P=Q.grabbingBar;Q.grabbingBar=!1;Q.grabLocation=
void 0;K.parent.inBrushDrag=!1;f();if(Q.wasDragged)if(P=function(){O.set(O.getConsolidated())},K.ordinal){var T=K.unitTickvals;T[T.length-1]<T[0]&&T.reverse();Q.newExtent=[q(0,T,Q.newExtent[0],Q.stayingIntervals),q(1,T,Q.newExtent[1],Q.stayingIntervals)];T=Q.newExtent[1]>Q.newExtent[0];Q.extent=Q.stayingIntervals.concat(T?[Q.newExtent]:[]);Q.extent.length||D(N);Q.brushCallback(K);T?l(E.parentNode,P):(P(),l(E.parentNode))}else P();else Q.wasDragged=void 0,Q.clickableOrdinalRange?N.filterSpecified&&
K.multiselect?Q.extent.push(Q.clickableOrdinalRange):(Q.extent=[Q.clickableOrdinalRange],N.filterSpecified=!0):P?(Q.extent=Q.stayingIntervals,0===Q.extent.length&&D(N)):D(N),Q.brushCallback(K),l(E.parentNode);Q.brushEndCallback(N.filterSpecified?O.getConsolidated():[])}function m(E,K){E=K.height-t.mouse(E)[1]-2*B.verticalPadding;K=k(K,E);E="crosshair";K.clickableOrdinalRange?E="pointer":K.region&&(E=K.region+"-resize");t.select(document.body).style("cursor",E)}function r(E){E.on("mousemove",function(K){t.event.preventDefault();
K.parent.inBrushDrag||m(this,K)}).on("mouseleave",function(K){K.parent.inBrushDrag||f()}).call(t.behavior.drag().on("dragstart",function(K){c(this,K)}).on("drag",function(K){e(this,K)}).on("dragend",function(K){g(this,K)}))}function u(E,K){return E[0]-K[0]}function v(E){var K=E.selectAll(".background").data(H);K.enter().append("rect").classed("background",!0).call(n).call(p).style("pointer-events","auto").attr("transform","translate(0 "+B.verticalPadding+")");K.call(r).attr("height",function(N){return N.height-
B.verticalPadding});K=E.selectAll(".highlight-shadow").data(H);K.enter().append("line").classed("highlight-shadow",!0).attr("x",-B.bar.width/2).attr("stroke-width",B.bar.width+B.bar.strokeWidth).attr("stroke",B.bar.strokeColor).attr("opacity",B.bar.strokeOpacity).attr("stroke-linecap","butt");K.attr("y1",function(N){return N.height}).call(d);E=E.selectAll(".highlight").data(H);E.enter().append("line").classed("highlight",!0).attr("x",-B.bar.width/2).attr("stroke-width",B.bar.width-B.bar.strokeWidth).attr("stroke",
B.bar.fillColor).attr("opacity",B.bar.fillOpacity).attr("stroke-linecap","butt");E.attr("y1",function(N){return N.height}).call(d)}function w(E){return E.svgBrush.extent.map(function(K){return K.slice()})}function D(E){E.filterSpecified=!1;E.svgBrush.extent=[[-Infinity,Infinity]]}function C(E){return function(K){K=K.brush;var N=w(K).slice();K.filter.set(N);E()}}function x(E){E=E.slice();for(var K=[],N,O=E.shift();O;){for(N=O.slice();(O=E.shift())&&O[0]<=N[1];)N[1]=Math.max(N[1],O[1]);K.push(N)}1===
K.length&&K[0][0]>K[0][1]&&(K=[]);return K}function A(){var E=[],K,N;return{set:function(O){E=O.map(function(Q){return Q.slice().sort(I)}).sort(u);1===E.length&&-Infinity===E[0][0]&&Infinity===E[0][1]&&(E=[[0,-1]]);K=x(E);N=E.reduce(function(Q,P){return[Math.min(Q[0],P[0]),Math.max(Q[1],P[1])]},[Infinity,-Infinity])},get:function(){return E.slice()},getConsolidated:function(){return K},getBounds:function(){return N}}}var B=b("./constants"),t=b("d3"),G=b("../../lib/gup").keyFun,H=b("../../lib/gup").repeat,
I=b("../../lib").sorterAsc,J=B.bar.snapRatio,L=B.bar.snapClose;y.exports={makeBrush:function(E,K,N,O,Q,P){E=A();E.set(N);return{filter:E,filterSpecified:K,svgBrush:{extent:[],brushStartCallback:O,brushCallback:C(Q),brushEndCallback:P}}},ensureAxisBrush:function(E){E=E.selectAll("."+B.cn.axisBrush).data(H,G);E.enter().append("g").classed(B.cn.axisBrush,!0);v(E)},cleanRanges:function(E,K){Array.isArray(E[0])?(E=E.map(function(O){return O.sort(I)}),E=K.multiselect?x(E.sort(u)):[E[0]]):E=[E.sort(I)];
if(K.tickvals){var N=K.tickvals.slice().sort(I);E=E.map(function(O){O=[q(0,N,O[0],[]),q(1,N,O[1],[])];if(O[1]>O[0])return O}).filter(function(O){return O});if(!E.length)return}return 1<E.length?E:E[0]}}},{"../../lib":749,"../../lib/gup":746,"./constants":1121,d3:169}],1119:[function(b,y,F){var q=b("d3"),n=b("../../plots/get_data").getModuleCalcData,p=b("./plot"),h=b("../../constants/xmlns_namespaces");F.name="parcoords";F.plot=function(a){var f=n(a.calcdata,"parcoords")[0];f.length&&p(a,f)};F.clean=
function(a,f,d,l){a=l._has&&l._has("parcoords");f=f._has&&f._has("parcoords");a&&!f&&(l._paperdiv.selectAll(".parcoords").remove(),l._glimages.selectAll("*").remove())};F.toSVG=function(a){var f=a._fullLayout._glimages,d=q.select(a).selectAll(".svg-container");d.filter(function(l,k){return k===d.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var l=this.toDataURL("image/png");f.append("svg:image").attr({xmlns:h.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:this.width,
height:this.height})});window.setTimeout(function(){q.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":725,"../../plots/get_data":834,"./plot":1128,d3:169}],1120:[function(b,y,F){var q=b("../../lib").isArrayOrTypedArray,n=b("../../components/colorscale"),p=b("../../lib/gup").wrap;y.exports=function(h,a){if(n.hasColorscale(a,"line")&&q(a.line.color)){var f=a.line.color;var d=n.extractOpts(a.line).colorscale;n.calc(h,a,{vals:f,containerStr:"line",
cLetter:"c"})}else{h=a._length;f=Array(h);for(d=0;d<h;d++)f[d]=.5;d=[[0,a.line.color],[1,a.line.color]]}return p({lineColor:f,cscale:d})}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gup":746}],1121:[function(b,y,F){y.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,
fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",
axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1122:[function(b,y,F){function q(m,r,u,v,w){var D=w("line.color",u);if(h(m,"line")&&p.isArrayOrTypedArray(D)){if(D.length)return w("line.colorscale"),a(m,r,v,w,{prefix:"line.",cLetter:"c"}),D.length;r.line.color=u}return Infinity}function n(m,r,u,v){function w(C,x){return p.coerce(m,r,k.dimensions,C,x)}
u=w("values");var D=w("visible");u&&u.length||(D=r.visible=!1);D&&(w("label"),w("tickvals"),w("ticktext"),w("tickformat"),u=w("range"),r._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:u},l.setConvert(r._ax,v.layout),w("multiselect"),v=w("constraintrange"))&&(r.constraintrange=c.cleanRanges(v,r))}var p=b("../../lib"),h=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),f=b("../../plots/domain").defaults,d=b("../../plots/array_container_defaults"),
l=b("../../plots/cartesian/axes"),k=b("./attributes"),c=b("./axisbrush"),e=b("./constants").maxDimensionCount,g=b("./merge_length");y.exports=function(m,r,u,v){function w(C,x){return p.coerce(m,r,k,C,x)}var D=m.dimensions;Array.isArray(D)&&D.length>e&&(p.log("parcoords traces support up to "+e+" dimensions at the moment"),D.splice(e));D=d(m,r,{name:"dimensions",layout:v,handleItemDefaults:n});u=q(m,r,u,v,w);f(r,v,w);Array.isArray(D)&&D.length||(r.visible=!1);g(r,D,"values",u);v={family:v.font.family,
size:Math.round(v.font.size/1.2),color:v.font.color};p.coerceFont(w,"labelfont",v);p.coerceFont(w,"tickfont",v);p.coerceFont(w,"rangefont",v);w("labelangle");w("labelside")}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"../../plots/domain":824,"./attributes":1117,"./axisbrush":1118,"./constants":1121,"./merge_length":1126}],1123:[function(b,y,F){var q=b("../../lib").isTypedArray;
F.convertTypedArray=function(n){return q(n)?Array.prototype.slice.call(n):n};F.isOrdinal=function(n){return!!n.tickvals};F.isVisible=function(n){return n.visible||!("visible"in n)}},{"../../lib":749}],1124:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:b("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},
{"./attributes":1117,"./base_plot":1119,"./calc":1120,"./defaults":1122,"./plot":1128}],1125:[function(b,y,F){function q(w,D,C,x,A){var B=w._gl;B.enable(B.SCISSOR_TEST);B.scissor(D,C,x,A);w.clear({color:[0,0,0,0],depth:1})}function n(w,D,C,x,A,B){function t(H){var I=Math.min(x,A-H*x);0===H&&(window.cancelAnimationFrame(C.currentRafs[G]),delete C.currentRafs[G],q(w,B.scissorX,B.scissorY,B.scissorWidth,B.viewBoxSize[1]));C.clearOnly||(B.count=2*I,B.offset=2*H*x,D(B),H*x+I<A&&(C.currentRafs[G]=window.requestAnimationFrame(function(){t(H+
1)})),C.drawCompleted=!1)}var G=B.key;C.drawCompleted||(w.read({x:0,y:0,width:1,height:1,data:r}),C.drawCompleted=!0);t(0)}function p(w,D){for(var C=Array(256),x=0;256>x;x++)C[x]=w(x/255).concat(D);return C}function h(w,D,C){for(var x=Array(w*(g+4)),A=0,B=0;B<w;B++){for(var t=0;t<g;t++)x[A++]=t<D.length?D[t].paddedUnitValues[B]:.5;x[A++]=(B>>>16)%256/255;x[A++]=(B>>>8)%256/255;x[A++]=(B>>>0)%256/255;x[A++]=Math.max(1E-6,Math.min(.999999,C[B]))}return x}function a(w){w="0"+w;return w.substr(w.length-
2)}function f(w){return w<g?"p"+a(w+1)+"_"+a(w+4):"colors"}function d(w,D,C){for(var x=0;x<=g;x+=4){for(var A=w,B=A[f(x)],t=x/4,G=D,H=C,I=Array(8*G),J=0,L=0;L<G;L++)for(var E=0;2>E;E++)for(var K=0;4>K;K++){var N=4*t+K,O=H[64*L+N];63===N&&0===E&&(O*=-1);I[J++]=O}B.call(A,I)}}function l(w){for(var D={},C=0;C<=g;C+=4)D[f(C)]=w.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return D}function k(w){var D=Math.max(0,Math.floor(2047*w[0]),0);w=Math.min(2047,Math.ceil(2047*w[1]),2047);return[Math.min(D,
w),Math.max(D,w)]}F=b("glslify");var c=F(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    \x3d (drwLayer \x3e 1.5);\nbool isContext \x3d (drwLayer \x3c 0.5);\n\nconst vec4 ZEROS \x3d vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS \x3d vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 \x3d val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 \x3d val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo \x3c hi) \x26\x26 (lo \x3e p || p \x3e hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] \x3d A;\n    pnts[1] \x3d B;\n    pnts[2] \x3d C;\n    pnts[3] \x3d D;\n\n    for(int i \x3d 0; i \x3c 4; ++i) {\n        for(int j \x3d 0; j \x3c 4; ++j) {\n            for(int k \x3d 0; k \x3c 4; ++k) {\n                if(0 \x3d\x3d iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x \x3d 0.5 * sign(v) + 0.5;\n    float y \x3d axisY(x, A, B, C, D);\n    float z \x3d 1.0 - abs(v);\n\n    z +\x3d isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A \x3d mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B \x3d mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C \x3d mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D \x3d mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v \x3d colors[3];\n\n    gl_Position \x3d position(isContext, v, A, B, C, D);\n\n    fragColor \x3d\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),
e=F(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor \x3d fragColor;\n}\n"]),g=b("./constants").maxDimensionCount,m=b("../../lib"),r=new Uint8Array(4),u=new Uint8Array(4),v={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};y.exports=function(w,D){function C(Q){G=Q.model;H=Q.viewModel;I=H.dimensions.slice();J=I[0]?I[0].values.length:0;var P=G.lines;Q=A?P.color.map(function(T,V){return V/P.color.length}):P.color;Q=h(J,I,Q);
d(L,J,Q);x||A||(K=B.texture(m.extendFlat({data:p(G.unitToColor,255)},v)))}var x=D.context,A=D.pick,B=D.regl,t={currentRafs:{},drawCompleted:!0,clearOnly:!1},G,H,I,J,L=l(B),E,K=B.texture(v),N=[];C(D);var O=B({profile:!1,blend:{enable:x,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!x,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:B.prop("scissorX"),y:B.prop("scissorY"),
width:B.prop("scissorWidth"),height:B.prop("scissorHeight")}},viewport:{x:B.prop("viewportX"),y:B.prop("viewportY"),width:B.prop("viewportWidth"),height:B.prop("viewportHeight")},dither:!1,vert:c,frag:e,primitive:"lines",lineWidth:1,attributes:L,uniforms:{resolution:B.prop("resolution"),viewBoxPos:B.prop("viewBoxPos"),viewBoxSize:B.prop("viewBoxSize"),dim0A:B.prop("dim0A"),dim1A:B.prop("dim1A"),dim0B:B.prop("dim0B"),dim1B:B.prop("dim1B"),dim0C:B.prop("dim0C"),dim1C:B.prop("dim1C"),dim0D:B.prop("dim0D"),
dim1D:B.prop("dim1D"),loA:B.prop("loA"),hiA:B.prop("hiA"),loB:B.prop("loB"),hiB:B.prop("hiB"),loC:B.prop("loC"),hiC:B.prop("hiC"),loD:B.prop("loD"),hiD:B.prop("hiD"),palette:K,contextColor:B.prop("contextColor"),mask:B.prop("maskTexture"),drwLayer:B.prop("drwLayer"),maskHeight:B.prop("maskHeight")},offset:B.prop("offset"),count:B.prop("count")});return{render:function(Q,P,T){var V=Q.length,aa,ba=Infinity,Y=-Infinity;for(aa=0;aa<V;aa++){if(Q[aa].dim0.canvasX<ba){ba=Q[aa].dim0.canvasX;var ea=aa}if(Q[aa].dim1.canvasX>
Y){Y=Q[aa].dim1.canvasX;var da=aa}}0===V&&q(B,0,0,G.canvasWidth,G.canvasHeight);var ca=x,la;aa=[[],[]];for(Y=0;64>Y;Y++)ba=!ca&&Y<I.length?I[Y].brush.filter.getBounds():[-Infinity,Infinity],aa[0][Y]=ba[0],aa[1][Y]=ba[1];var pa=Array(16384);for(ba=0;16384>ba;ba++)pa[ba]=255;if(!ca)for(ba=0;ba<I.length;ba++){Y=ba%8;ca=(ba-Y)/8;var qa=Math.pow(2,Y),oa=I[ba].brush.filter.get();if(!(2>oa.length)){var ka=k(oa[0])[1];for(la=1;la<oa.length;la++){var ra=k(oa[la]);for(Y=ka+1;Y<ra[0];Y++)pa[8*Y+ca]&=~qa;ka=
Math.max(ka,ra[1])}}}ba={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:pa};E?E(ba):E=B.texture(ba);ba={maskTexture:E,maskHeight:2048,loA:aa[0].slice(0,16),loB:aa[0].slice(16,32),loC:aa[0].slice(32,48),loD:aa[0].slice(48,64),hiA:aa[1].slice(0,16),hiB:aa[1].slice(16,32),hiC:aa[1].slice(32,48),hiD:aa[1].slice(48,64)};for(aa=0;aa<V;aa++){var ha=Q[aa];qa=ha.dim0.crossfilterDimensionIndex;oa=ha.dim1.crossfilterDimensionIndex;ka=ha.canvasX;ra=ha.canvasY;Y=ka+ha.panelSizeX;if(P||
!N[qa]||N[qa][0]!==ka||N[qa][1]!==Y){N[qa]=[ka,Y];Y=G;pa=ea;ca=da;la=aa;var ma=ha.panelSizeX,wa=ha.panelSizeY;ha=ha.dim0.crossfilterDimensionIndex;for(var na=x?0:A?2:1,ya=ba,Fa=[[],[]],Ha=0;64>Ha;Ha++)Fa[0][Ha]=Ha===qa?1:0,Fa[1][Ha]=Ha===oa?1:0;Ha=Y.lines.canvasOverdrag;var eb=Y.domain,hb=Y.canvasWidth,ob=Y.canvasHeight,ib=Y.deselectedLines.color;Y=m.extendFlat({key:ha,resolution:[hb,ob],viewBoxPos:[ka+Ha,ra],viewBoxSize:[ma,wa],i0:qa,i1:oa,dim0A:Fa[0].slice(0,16),dim0B:Fa[0].slice(16,32),dim0C:Fa[0].slice(32,
48),dim0D:Fa[0].slice(48,64),dim1A:Fa[1].slice(0,16),dim1B:Fa[1].slice(16,32),dim1C:Fa[1].slice(32,48),dim1D:Fa[1].slice(48,64),drwLayer:na,contextColor:[ib[0]/255,ib[1]/255,ib[2]/255,1>ib[3]?ib[3]:Math.max(1/255,Math.pow(1/Y.lines.color.length,1/3))],scissorX:(la===pa?0:ka+Ha)+(Y.pad.l-Ha)+Y.layoutWidth*eb.x[0],scissorWidth:(la===ca?hb-ka+Ha:ma+.5)+(la===pa?ka+Ha:0),scissorY:ra+Y.pad.b+Y.layoutHeight*eb.y[0],scissorHeight:wa,viewportX:Y.pad.l-Ha+Y.layoutWidth*eb.x[0],viewportY:Y.pad.b+Y.layoutHeight*
eb.y[0],viewportWidth:hb,viewportHeight:ob},ya);t.clearOnly=T;n(B,O,t,P?G.lines.blockLineCount:J,J,Y)}}},readPixel:function(Q,P){B.read({x:Q,y:P,width:1,height:1,data:u});return u},readPixels:function(Q,P,T,V){var aa=new Uint8Array(4*T*V);B.read({x:Q,y:P,width:T,height:V,data:aa});return aa},destroy:function(){w.style["pointer-events"]="none";K.destroy();E&&E.destroy();for(var Q in L)L[Q].destroy()},update:C}}},{"../../lib":749,"./constants":1121,glslify:413}],1126:[function(b,y,F){y.exports=function(q,
n,p,h){h||(h=Infinity);var a;for(a=0;a<n.length;a++){var f=n[a];f.visible&&(h=Math.min(h,f[p].length))}Infinity===h&&(h=0);q._length=h;for(a=0;a<n.length;a++)f=n[a],f.visible&&(f._length=h);return h}},{}],1127:[function(b,y,F){function q(Q,P){return p(B.aggNums(Math.min,null,Q,P),B.aggNums(Math.max,null,Q,P))}function n(Q){var P=Q.range;return P?p(P[0],P[1]):q(Q.values,Q._length)}function p(Q,P){if(isNaN(Q)||!isFinite(Q))Q=0;if(isNaN(P)||!isFinite(P))P=0;Q===P&&(0===Q?(--Q,P+=1):(Q*=.9,P*=1.1));return[Q,
P]}function h(Q,P){return P?function(T,V){V=P[V];return null===V||void 0===V?Q(T):V}:Q}function a(Q,P,T,V,aa){var ba=n(T);return V?C.scale.ordinal().domain(V.map(h(C.format(T.tickformat),aa))).range(V.map(function(Y){return Q-P+(Y-ba[0])/(ba[1]-ba[0])*(2*P-Q)})):C.scale.linear().domain(ba).range([Q-P,P])}function f(Q,P){return C.scale.linear().range([P,Q-P])}function d(Q,P){return C.scale.linear().domain(n(Q)).range([P,1-P])}function l(Q){if(Q.tickvals){var P=n(Q);return C.scale.ordinal().domain(Q.tickvals).range(Q.tickvals.map(function(T){return(T-
P[0])/(P[1]-P[0])}))}}function k(Q){var P=Q.map(function(ba){return ba[0]}),T=Q.map(function(ba){ba=x(ba[1]);return C.rgb("rgb("+ba[0]+","+ba[1]+","+ba[2]+")")}),V=function(ba){return function(Y){return Y[ba]}},aa=["r","g","b"].map(function(ba){return C.scale.linear().clamp(!0).domain(P).range(T.map(V(ba)))});return function(ba){return aa.map(function(Y){return Y(ba)})}}function c(Q){return Q.dimensions.some(function(P){return P.brush.filterSpecified})}function e(Q,P,T){var V=L(P),aa=V.trace,ba=E.convertTypedArray(V.lineColor),
Y=aa.line;P={color:x(K.deselectedLineColor)};var ea=H.extractOpts(Y);V=ea.reversescale?H.flipScale(V.cscale):V.cscale;var da=aa.domain,ca=aa.dimensions,la=Q.width,pa=aa.labelangle,qa=aa.labelside,oa=aa.labelfont,ka=aa.tickfont,ra=aa.rangefont;aa=B.extendDeepNoArrays({},Y,{color:ba.map(C.scale.linear().domain(n({values:ba,range:[ea.min,ea.max],_length:aa._length}))),blockLineCount:K.blockLineCount,canvasOverdrag:K.overdrag*K.canvasPixelRatio});ba=Q.margin||{l:80,r:80,t:100,b:80};Y=Math.floor(la*(da.x[1]-
da.x[0]));ea=Math.floor(Q.height*(da.y[1]-da.y[0]));return{key:T,colCount:ca.filter(E.isVisible).length,dimensions:ca,tickDistance:K.tickDistance,unitToColor:k(V),lines:aa,deselectedLines:P,labelAngle:pa,labelSide:qa,labelFont:oa,tickFont:ka,rangeFont:ra,layoutWidth:la,layoutHeight:Q.height,domain:da,translateX:da.x[0]*la,translateY:Q.height-da.y[1]*Q.height,pad:ba,canvasWidth:Y*K.canvasPixelRatio+2*aa.canvasOverdrag,canvasHeight:ea*K.canvasPixelRatio,width:Y,height:ea,canvasPixelRatio:K.canvasPixelRatio}}
function g(Q,P,T){var V=T.width,aa=T.height,ba=T.dimensions,Y=T.canvasPixelRatio,ea=function(qa){return V*qa/Math.max(1,T.colCount-1)},da=K.verticalPadding/aa,ca=f(aa,K.verticalPadding),la={key:T.key,xScale:ea,model:T,inBrushDrag:!1},pa={};la.dimensions=ba.filter(E.isVisible).map(function(qa,oa){function ka(ob,ib){return{val:ob,text:Ha[ib]}}function ra(ob,ib){return ob.val-ib.val}var ha=d(qa,da),ma=pa[qa.label];pa[qa.label]=(ma||0)+1;ma=qa.label+(ma?"__"+ma:"");var wa=qa.constraintrange,na=wa&&wa.length;
na&&!Array.isArray(wa[0])&&(wa=[wa]);wa=na?wa.map(function(ob){return ob.map(ha)}):[[-Infinity,Infinity]];var ya=qa.values;ya.length>qa._length&&(ya=ya.slice(0,qa._length));var Fa=qa.tickvals;if(Array.isArray(Fa)&&Fa.length){var Ha=qa.ticktext;Array.isArray(Ha)&&Ha.length?Ha.length>Fa.length?Ha=Ha.slice(0,Fa.length):Fa.length>Ha.length&&(Fa=Fa.slice(0,Ha.length)):Ha=Fa.map(C.format(qa.tickformat));for(var eb=1;eb<Fa.length;eb++)if(Fa[eb]<Fa[eb-1]){eb=Fa.map(ka).sort(ra);for(var hb=0;hb<Fa.length;hb++)Fa[hb]=
eb[hb].val,Ha[hb]=eb[hb].text;break}}else Fa=void 0;ya=E.convertTypedArray(ya);return{key:ma,label:qa.label,tickFormat:qa.tickformat,tickvals:Fa,ticktext:Ha,ordinal:E.isOrdinal(qa),multiselect:qa.multiselect,xIndex:oa,crossfilterDimensionIndex:oa,visibleIndex:qa._index,height:aa,values:ya,paddedUnitValues:ya.map(ha),unitTickvals:Fa&&Fa.map(ha),xScale:ea,x:ea(oa),canvasX:ea(oa)*Y,unitToPaddedPx:ca,domainScale:a(aa,K.verticalPadding,qa,Fa,Ha),ordinalScale:l(qa),parent:la,model:T,brush:N.makeBrush(Q,
na,wa,function(){Q.linePickActive(!1)},function(){la.focusLayer&&la.focusLayer.render(la.panels,!0);var ob=c(la);!Q.contextShown()&&ob?(la.contextLayer&&la.contextLayer.render(la.panels,!0),Q.contextShown(!0)):Q.contextShown()&&!ob&&(la.contextLayer&&la.contextLayer.render(la.panels,!0,!0),Q.contextShown(!1))},function(ob){la.focusLayer.render(la.panels,!0);la.pickLayer&&la.pickLayer.render(la.panels,!0);Q.linePickActive(!0);if(P&&P.filterChanged){var ib=ha.invert;ob=ob.map(function(Pa){return Pa.map(ib).sort(B.sorterAsc)}).sort(function(Pa,
sb){return Pa[0]-sb[0]});P.filterChanged(la.key,qa._index,ob)}})}});return la}function m(Q){Q.classed(K.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}function r(){var Q=!0,P=!1;return{linePickActive:function(T){return arguments.length?Q=!!T:Q},contextShown:function(T){return arguments.length?P=!!T:P}}}function u(Q,P){var T=Q*Math.PI/180;return{dir:"top"===P?1:-1,dx:Math.sin(T),dy:Math.cos(T),degrees:Q}}function v(Q,P){var T=P.panels||(P.panels=
[]);Q=Q.data();for(var V=0;V<Q.length-1;V++){var aa=T[V]||(T[V]={}),ba=Q[V],Y=Q[V+1];aa.dim0=ba;aa.dim1=Y;aa.canvasX=ba.canvasX;aa.panelSizeX=Y.canvasX-ba.canvasX;aa.panelSizeY=P.model.canvasHeight;aa.y=0;aa.canvasY=0}}function w(Q){for(var P=0;P<Q.length;P++)for(var T=0;T<Q[P].length;T++)for(var V=Q[P][T].trace,aa=V.dimensions,ba=0;ba<aa.length;ba++){var Y=aa[ba].values,ea=aa[ba]._ax;ea&&(ea.range=ea.range?p(ea.range[0],ea.range[1]):q(Y,V._length),ea.dtick||(ea.dtick=.01*(Math.abs(ea.range[1]-ea.range[0])||
1)),ea.tickformat=aa[ba].tickformat,A.calcTicks(ea),ea.cleanRange())}}function D(Q,P){if(Q.ordinal)return"";var T=Q.domainScale.domain();return A.tickText(Q.model.dimensions[Q.visibleIndex]._ax,T[P?T.length-1:0],!1).text}var C=b("d3"),x=b("color-rgba"),A=b("../../plots/cartesian/axes"),B=b("../../lib"),t=b("../../lib/svg_text_utils"),G=b("../../components/drawing"),H=b("../../components/colorscale");F=b("../../lib/gup");var I=F.keyFun,J=F.repeat,L=F.unwrap,E=b("./helpers"),K=b("./constants"),N=b("./axisbrush"),
O=b("./lines");y.exports=function(Q,P,T,V){var aa=Q._fullLayout,ba=aa._toppaper;aa=aa._glcontainer;w(P);var Y=r(),ea=P.filter(function(pa){return L(pa).trace.visible}).map(e.bind(0,T)).map(g.bind(0,Y,V));aa.each(function(pa,qa){return B.extendFlat(pa,ea[qa])});P=aa.selectAll(".gl-canvas").each(function(pa){pa.viewModel=ea[0];pa.model=pa.viewModel?pa.viewModel.model:null});var da=null;P.filter(function(pa){return pa.pick}).style("pointer-events","auto").on("mousemove",function(pa){if(Y.linePickActive()&&
pa.lineLayer&&V&&V.hover){var qa=C.event,oa=this.width,ka=this.height,ra=C.mouse(this),ha=ra[0];ra=ra[1];0>ha||0>ra||ha>=oa||ra>=ka||(ka=pa.lineLayer.readPixel(ha,ka-1-ra),ka=(oa=0!==ka[3])?ka[2]+256*(ka[1]+256*ka[0]):null,pa={x:ha,y:ra,clientX:qa.clientX,clientY:qa.clientY,dataIndex:pa.model.key,curveNumber:ka},ka!==da&&(oa?V.hover(pa):V.unhover&&V.unhover(pa),da=ka))}});P.style("opacity",function(pa){return pa.pick?0:1});ba.style("background","rgba(255, 255, 255, 0)");ba=ba.selectAll("."+K.cn.parcoords).data(ea,
I);ba.exit().remove();ba.enter().append("g").classed(K.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none");ba.attr("transform",function(pa){return"translate("+pa.model.translateX+","+pa.model.translateY+")"});ba=ba.selectAll("."+K.cn.parcoordsControlView).data(J,I);ba.enter().append("g").classed(K.cn.parcoordsControlView,!0);ba.attr("transform",function(pa){return"translate("+pa.model.pad.l+","+pa.model.pad.t+")"});var ca=ba.selectAll("."+K.cn.yAxis).data(function(pa){return pa.dimensions},
I);ca.enter().append("g").classed(K.cn.yAxis,!0);ba.each(function(pa){v(ca,pa)});P.each(function(pa){if(pa.viewModel){!pa.lineLayer||V?pa.lineLayer=O(this,pa):pa.lineLayer.update(pa);if(pa.key||0===pa.key)pa.viewModel[pa.key]=pa.lineLayer;pa.lineLayer.render(pa.viewModel.panels,!pa.context||V)}});ca.attr("transform",function(pa){return"translate("+pa.xScale(pa.xIndex)+", 0)"});ca.call(C.behavior.drag().origin(function(pa){return pa}).on("drag",function(pa){var qa=pa.parent;Y.linePickActive(!1);pa.x=
Math.max(-K.overdrag,Math.min(pa.model.width+K.overdrag,C.event.x));pa.canvasX=pa.x*pa.model.canvasPixelRatio;ca.sort(function(oa,ka){return oa.x-ka.x}).each(function(oa,ka){oa.xIndex=ka;oa.x=pa===oa?oa.x:oa.xScale(oa.xIndex);oa.canvasX=oa.x*oa.model.canvasPixelRatio});v(ca,qa);ca.filter(function(oa){return 0!==Math.abs(pa.xIndex-oa.xIndex)}).attr("transform",function(oa){return"translate("+oa.xScale(oa.xIndex)+", 0)"});C.select(this).attr("transform","translate("+pa.x+", 0)");ca.each(function(oa,
ka,ra){ra===pa.parent.key&&(qa.dimensions[ka]=oa)});qa.contextLayer&&qa.contextLayer.render(qa.panels,!1,!c(qa));qa.focusLayer.render&&qa.focusLayer.render(qa.panels)}).on("dragend",function(pa){var qa=pa.parent;pa.x=pa.xScale(pa.xIndex);pa.canvasX=pa.x*pa.model.canvasPixelRatio;v(ca,qa);C.select(this).attr("transform",function(oa){return"translate("+oa.x+", 0)"});qa.contextLayer&&qa.contextLayer.render(qa.panels,!1,!c(qa));qa.focusLayer&&qa.focusLayer.render(qa.panels);qa.pickLayer&&qa.pickLayer.render(qa.panels,
!0);Y.linePickActive(!0);V&&V.axesMoved&&V.axesMoved(qa.key,qa.dimensions.map(function(oa){return oa.crossfilterDimensionIndex}))}));ca.exit().remove();ba=ca.selectAll("."+K.cn.axisOverlays).data(J,I);ba.enter().append("g").classed(K.cn.axisOverlays,!0);ba.selectAll("."+K.cn.axis).remove();var la=ba.selectAll("."+K.cn.axis).data(J,I);la.enter().append("g").classed(K.cn.axis,!0);la.each(function(pa){var qa=pa.model.height/pa.model.tickDistance,oa=pa.domainScale,ka=oa.domain();C.select(this).call(C.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(qa,
pa.tickFormat).tickValues(pa.ordinal?ka:null).tickFormat(function(ra){return E.isOrdinal(pa)?ra:A.tickText(pa.model.dimensions[pa.visibleIndex]._ax,ra,!1).text}).scale(oa));G.font(la.selectAll("text"),pa.model.tickFont)});la.selectAll(".domain, .tick\x3eline").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");la.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select",
"none");P=ba.selectAll("."+K.cn.axisHeading).data(J,I);P.enter().append("g").classed(K.cn.axisHeading,!0);P=P.selectAll("."+K.cn.axisTitle).data(J,I);P.enter().append("text").classed(K.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events","auto");P.text(function(pa){return pa.label}).each(function(pa){var qa=C.select(this);G.font(qa,pa.model.labelFont);t.convertToTspans(qa,Q)}).attr("transform",function(pa){var qa=u(pa.model.labelAngle,
pa.model.labelSide),oa=K.axisTitleOffset;return(0<qa.dir?"":"translate(0,"+(2*oa+pa.model.height)+")")+"rotate("+qa.degrees+")translate("+-oa*qa.dx+","+-oa*qa.dy+")"}).attr("text-anchor",function(pa){pa=u(pa.model.labelAngle,pa.model.labelSide);return 2*Math.abs(pa.dx)>Math.abs(pa.dy)?0>pa.dir*pa.dx?"start":"end":"middle"});P=ba.selectAll("."+K.cn.axisExtent).data(J,I);P.enter().append("g").classed(K.cn.axisExtent,!0);T=P.selectAll("."+K.cn.axisExtentTop).data(J,I);T.enter().append("g").classed(K.cn.axisExtentTop,
!0);T.attr("transform","translate(0,"+-K.axisExtentOffset+")");T=T.selectAll("."+K.cn.axisExtentTopText).data(J,I);T.enter().append("text").classed(K.cn.axisExtentTopText,!0).call(m);T.text(function(pa){return D(pa,!0)}).each(function(pa){G.font(C.select(this),pa.model.rangeFont)});P=P.selectAll("."+K.cn.axisExtentBottom).data(J,I);P.enter().append("g").classed(K.cn.axisExtentBottom,!0);P.attr("transform",function(pa){return"translate(0,"+(pa.model.height+K.axisExtentOffset)+")"});P=P.selectAll("."+
K.cn.axisExtentBottomText).data(J,I);P.enter().append("text").classed(K.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(m);P.text(function(pa){return D(pa,!1)}).each(function(pa){G.font(C.select(this),pa.model.rangeFont)});N.ensureAxisBrush(ba)}},{"../../components/colorscale":627,"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"./axisbrush":1118,"./constants":1121,"./helpers":1123,"./lines":1125,"color-rgba":127,
d3:169}],1128:[function(b,y,F){function q(f,d,l){l=d.indexOf(l);f=f.indexOf(l);-1===f&&(f+=d.length);return f}function n(f,d){return function(l,k){return q(f,d,l)-q(f,d,k)}}var p=b("./parcoords"),h=b("../../lib/prepare_regl"),a=b("./helpers").isVisible;y.exports=function(f,d){var l=f._fullLayout;if(h(f)){var k={},c={},e={},g={},m=l._size;d.forEach(function(r,u){r=r[0].trace;e[u]=r.index;r=g[u]=r._fullInput.index;k[u]=f.data[r].dimensions;c[u]=f.data[r].dimensions.slice()});p(f,d,{width:m.w,height:m.h,
margin:{t:m.t,r:m.r,b:m.b,l:m.l}},{filterChanged:function(r,u,v){var w=c[r][u];v=v.map(function(x){return x.slice()});var D="dimensions["+u+"].constraintrange",C=l._tracePreGUI[f._fullData[e[r]]._fullInput.uid];void 0===C[D]&&(C[D]=w.constraintrange||null);u=f._fullData[e[r]].dimensions[u];v.length?(1===v.length&&(v=v[0]),w.constraintrange=v,u.constraintrange=v.slice(),v=[v]):(delete w.constraintrange,delete u.constraintrange,v=null);w={};w[D]=v;f.emit("plotly_restyle",[w,[g[r]]])},hover:function(r){f.emit("plotly_hover",
r)},unhover:function(r){f.emit("plotly_unhover",r)},axesMoved:function(r,u){u=n(u,c[r].filter(a));k[r].sort(u);c[r].filter(function(v){return!a(v)}).sort(function(v){return c[r].indexOf(v)}).forEach(function(v){k[r].splice(k[r].indexOf(v),1);k[r].splice(c[r].indexOf(v),0,v)});f.emit("plotly_restyle",[{dimensions:[k[r]]},[g[r]]])}})}}},{"../../lib/prepare_regl":762,"./helpers":1123,"./parcoords":1127}],1129:[function(b,y,F){F=b("../../plots/attributes");var q=b("../../plots/domain").attributes,n=b("../../plots/font_attributes"),
p=b("../../components/color/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;n=n({editType:"plot",arrayOk:!0,colorEditType:"plot"});y.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},
line:{color:{valType:"color",dflt:p.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:b({},F.hoverinfo,{flags:["label","text","value",
"percent","name"]}),hovertemplate:h({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:b({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:b({},n,{}),outsidetextfont:b({},n,{}),automargin:{valType:"boolean",
dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:b({},n,{}),position:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"plot"},editType:"plot"},domain:q({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",
editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:b({},n,{}),titleposition:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":614,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,
"../../plots/font_attributes":825,"../../plots/template_attributes":875}],1130:[function(b,y,F){var q=b("../../plots/plots");F.name="pie";F.plot=function(n,p,h,a){q.plotBasePlot(F.name,n,p,h,a)};F.clean=function(n,p,h,a){q.cleanBasePlot(F.name,n,p,h,a)}},{"../../plots/plots":860}],1131:[function(b,y,F){function q(d){return function(l,k){if(!l)return!1;l=h(l);if(!l.isValid())return!1;l=a.addOpacity(l,l.getAlpha());d[k]||(d[k]=l);return l}}function n(d,l){var k,c=JSON.stringify(d),e=l[c];if(!e){e=d.slice();
for(k=0;k<d.length;k++)e.push(h(d[k]).lighten(20).toHexString());for(k=0;k<d.length;k++)e.push(h(d[k]).darken(20).toHexString());l[c]=e}return e}var p=b("fast-isnumeric"),h=b("tinycolor2"),a=b("../../components/color"),f={};y.exports={calc:function(d,l){var k=[],c=d._fullLayout;d=c.hiddenlabels||[];var e=l.labels,g=l.marker.colors||[],m=l.values,r=l._length,u=l._hasValues&&r,v;if(l.dlabel)for(e=Array(r),v=0;v<r;v++)e[v]=String(l.label0+v*l.dlabel);var w={};c=q(c["_"+l.type+"colormap"]);var D=0,C=
!1;for(v=0;v<r;v++){if(u){var x=m[v];if(!p(x))continue;x=+x;if(0>x)continue}else x=1;var A=e[v];if(void 0===A||""===A)A=v;A=String(A);var B=w[A];void 0===B?(w[A]=k.length,(B=-1!==d.indexOf(A))||(D+=x),k.push({v:x,label:A,color:c(g[v],A),i:v,pts:[v],hidden:B})):(C=!0,B=k[B],B.v+=x,B.pts.push(v),B.hidden||(D+=x),!1===B.color&&g[v]&&(B.color=c(g[v],A)))}("funnelarea"===l.type?C:l.sort)&&k.sort(function(t,G){return G.v-t.v});k[0]&&(k[0].vTotal=D);return k},crossTraceCalc:function(d,l){(l=(l||{}).type)||
(l="pie");var k=d._fullLayout;d=d.calcdata;var c=k[l+"colorway"],e=k["_"+l+"colormap"];k["extend"+l+"colors"]&&(c=n(c,f));for(var g=k=0;g<d.length;g++){var m=d[g];if(m[0].trace.type===l)for(var r=0;r<m.length;r++){var u=m[r];!1===u.color&&(e[u.label]?u.color=e[u.label]:(e[u.label]=u.color=c[k%c.length],k++))}}},makePullColorFn:q,generateExtendedColors:n}},{"../../components/color":615,"fast-isnumeric":241,tinycolor2:548}],1132:[function(b,y,F){function q(d,l){var k=Array.isArray(d),c=p.isArrayOrTypedArray(l);
d=Math.min(k?d.length:Infinity,c?l.length:Infinity);isFinite(d)||(d=0);if(d&&c){for(var e,g=0;g<d;g++){var m=l[g];if(n(m)&&0<m){e=!0;break}}e||(d=0)}return{hasLabels:k,hasValues:c,len:d}}var n=b("fast-isnumeric"),p=b("../../lib"),h=b("./attributes"),a=b("../../plots/domain").defaults,f=b("../bar/defaults").handleText;y.exports={handleLabelsAndValues:q,supplyDefaults:function(d,l,k,c){function e(r,u){return p.coerce(d,l,h,r,u)}k=e("labels");var g=e("values");k=q(k,g);g=k.len;l._hasLabels=k.hasLabels;
l._hasValues=k.hasValues;!l._hasLabels&&l._hasValues&&(e("label0"),e("dlabel"));if(g){l._length=g;e("marker.line.width")&&e("marker.line.color");e("marker.colors");e("scalegroup");k=e("text");g=e("texttemplate");var m;g||(m=e("textinfo",Array.isArray(k)?"text+percent":"percent"));e("hovertext");e("hovertemplate");if(g||m&&"none"!==m)m=e("textposition"),f(d,l,c,e,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),
(Array.isArray(m)||"auto"===m||"outside"===m)&&e("automargin"),("inside"===m||"auto"===m||Array.isArray(m))&&e("insidetextorientation");a(l,c,e);m=e("hole");e("title.text")&&(k=e("title.position",m?"middle center":"top center"),m||"middle center"!==k||(l.title.position="top center"),p.coerceFont(e,"title.font",c.font));e("sort");e("direction");e("rotation");e("pull")}else l.visible=!1}}},{"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"./attributes":1129,"fast-isnumeric":241}],1133:[function(b,
y,F){var q=b("../../components/fx/helpers").appendArrayMultiPointValues;y.exports=function(n,p){var h={curveNumber:p.index,pointNumbers:n.pts,data:p._input,fullData:p,label:n.label,color:n.color,value:n.v,percent:n.percent,text:n.text,v:n.v};1===n.pts.length&&(h.pointNumber=h.i=n.pts[0]);q(h,p,n.pts);"funnelarea"===p.type&&(delete h.v,delete h.i);return h}},{"../../components/fx/helpers":651}],1134:[function(b,y,F){var q=b("../../lib");F.formatPiePercent=function(n,p){n=(100*n).toPrecision(3);-1!==
n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,""));return q.numSeparate(n,p)+"%"};F.formatPieValue=function(n,p){n=n.toPrecision(10);-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,""));return q.numSeparate(n,p)};F.getFirstFilled=function(n,p){if(Array.isArray(n))for(var h=0;h<p.length;h++){var a=n[p[h]];if(a||0===a||""===a)return a}};F.castOption=function(n,p){if(Array.isArray(n))return F.getFirstFilled(n,p);if(n)return n}},{"../../lib":749}],1135:[function(b,y,F){y.exports={attributes:b("./attributes"),
supplyDefaults:b("./defaults").supplyDefaults,supplyLayoutDefaults:b("./layout_defaults"),layoutAttributes:b("./layout_attributes"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style"),styleOne:b("./style_one"),moduleType:"trace",name:"pie",basePlotModule:b("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1129,"./base_plot":1130,"./calc":1131,"./defaults":1132,"./layout_attributes":1136,"./layout_defaults":1137,
"./plot":1138,"./style":1139,"./style_one":1140}],1136:[function(b,y,F){y.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1137:[function(b,y,F){var q=b("../../lib"),n=b("./layout_attributes");y.exports=function(p,h){q.coerce(p,h,n,"hiddenlabels",void 0);q.coerce(p,h,n,"piecolorway",h.colorway);q.coerce(p,h,n,"extendpiecolors",void 0)}},{"../../lib":749,"./layout_attributes":1136}],
1138:[function(b,y,F){function q(Q,P){Q.each(function(T){var V=x.select(this);if(T.labelExtraX||T.labelExtraY){var aa=V.select("g.slicetext text");T.transform.targetX+=T.labelExtraX;T.transform.targetY+=T.labelExtraY;aa.attr("transform",H.getTextTransform(T.transform));aa=T.cxFinal+T.pxmid[0];var ba="M"+aa+","+(T.cyFinal+T.pxmid[1]),Y=(T.yLabelMax-T.yLabelMin)*(0>T.pxmid[0]?-1:1)/4;if(T.labelExtraX){var ea=T.labelExtraX*T.pxmid[1]/T.pxmid[0],da=T.yLabelMid+T.labelExtraY-(T.cyFinal+T.pxmid[1]);ba=
Math.abs(ea)>Math.abs(da)?ba+("l"+da*T.pxmid[0]/T.pxmid[1]+","+da+"H"+(aa+T.labelExtraX+Y)):ba+("l"+T.labelExtraX+","+ea+"v"+(da-ea)+"h"+Y)}else ba+="V"+(T.yLabelMid+T.labelExtraY)+"h"+Y;H.ensureSingle(V,"path","textline").call(t.stroke,P.outsidetextfont.color).attr({"stroke-width":Math.min(2,P.outsidetextfont.size/8),d:ba,fill:"none"})}else V.select("path.textline").remove()})}function n(Q,P,T){var V=T[0],aa=V.trace,ba=V.cx,Y=V.cy;"_hasHoverLabel"in aa||(aa._hasHoverLabel=!1);"_hasHoverEvent"in aa||
(aa._hasHoverEvent=!1);Q.on("mouseover",function(ea){var da=P._fullLayout,ca=P._fullData[aa.index];if(!P._dragging&&!1!==da.hovermode){var la=ca.hoverinfo;Array.isArray(la)&&(la=B.castHoverinfo({hoverinfo:[K.castOption(la,ea.pts)],_module:aa._module},da,0));"all"===la&&(la="label+text+value+percent+name");if(ca.hovertemplate||"none"!==la&&"skip"!==la&&la){var pa=ea.rInscribed||0,qa=ba+ea.pxmid[0]*(1-pa),oa=Y+ea.pxmid[1]*(1-pa),ka=da.separators,ra=[];la&&-1!==la.indexOf("label")&&ra.push(ea.label);
ea.text=K.castOption(ca.hovertext||ca.text,ea.pts);if(la&&-1!==la.indexOf("text")){var ha=ea.text;H.isValidTextValue(ha)&&ra.push(ha)}ea.value=ea.v;ea.valueLabel=K.formatPieValue(ea.v,ka);la&&-1!==la.indexOf("value")&&ra.push(ea.valueLabel);ea.percent=ea.v/V.vTotal;ea.percentLabel=K.formatPiePercent(ea.percent,ka);la&&-1!==la.indexOf("percent")&&ra.push(ea.percentLabel);ka=ca.hoverlabel;ha=ka.font;B.loneHover({trace:aa,x0:qa-pa*V.r,x1:qa+pa*V.r,y:oa,text:ra.join("\x3cbr\x3e"),name:ca.hovertemplate||
-1!==la.indexOf("name")?ca.name:void 0,idealAlign:0>ea.pxmid[0]?"left":"right",color:K.castOption(ka.bgcolor,ea.pts)||ea.color,borderColor:K.castOption(ka.bordercolor,ea.pts),fontFamily:K.castOption(ha.family,ea.pts),fontSize:K.castOption(ha.size,ea.pts),fontColor:K.castOption(ha.color,ea.pts),nameLength:K.castOption(ka.namelength,ea.pts),textAlign:K.castOption(ka.align,ea.pts),hovertemplate:K.castOption(ca.hovertemplate,ea.pts),hovertemplateLabels:ea,eventData:[N(ea,ca)]},{container:da._hoverlayer.node(),
outerContainer:da._paper.node(),gd:P});aa._hasHoverLabel=!0}aa._hasHoverEvent=!0;P.emit("plotly_hover",{points:[N(ea,ca)],event:x.event})}});Q.on("mouseout",function(ea){var da=P._fullLayout,ca=P._fullData[aa.index],la=x.select(this).datum();aa._hasHoverEvent&&(ea.originalEvent=x.event,P.emit("plotly_unhover",{points:[N(la,ca)],event:x.event}),aa._hasHoverEvent=!1);aa._hasHoverLabel&&(B.loneUnhover(da._hoverlayer.node()),aa._hasHoverLabel=!1)});Q.on("click",function(ea){var da=P._fullLayout;P._dragging||
!1===da.hovermode||(P._hoverdata=[N(ea,P._fullData[aa.index])],B.click(P,x.event))})}function p(Q,P,T){var V=K.castOption(Q.outsidetextfont.color,P.pts)||K.castOption(Q.textfont.color,P.pts)||T.color,aa=K.castOption(Q.outsidetextfont.family,P.pts)||K.castOption(Q.textfont.family,P.pts)||T.family;Q=K.castOption(Q.outsidetextfont.size,P.pts)||K.castOption(Q.textfont.size,P.pts)||T.size;return{color:V,family:aa,size:Q}}function h(Q,P,T){var V=K.castOption(Q.insidetextfont.color,P.pts);!V&&Q._input.textfont&&
(V=K.castOption(Q._input.textfont.color,P.pts));var aa=K.castOption(Q.insidetextfont.family,P.pts)||K.castOption(Q.textfont.family,P.pts)||T.family;Q=K.castOption(Q.insidetextfont.size,P.pts)||K.castOption(Q.textfont.size,P.pts)||T.size;return{color:V||t.contrast(P.color),family:aa,size:Q}}function a(Q,P){for(var T,V,aa=0;aa<Q.length;aa++)if(T=Q[aa][0],V=T.trace,V.title.text){var ba=V.title.text;V._meta&&(ba=H.templateString(ba,V._meta));V=G.tester.append("text").attr("data-notex",1).text(ba).call(G.font,
V.title.font).call(I.convertToTspans,P);ba=G.bBox(V.node(),!0);T.titleBox={width:ba.width,height:ba.height};V.remove()}}function f(Q,P,T){var V=T.r||P.rpx1,aa=P.rInscribed;if(P.startangle===P.stopangle)return{rCenter:1-aa,scale:0,rotate:0,textPosAngle:0};var ba=P.ring,Y=1===ba&&Math.abs(P.startangle-P.stopangle)===2*Math.PI,ea=P.halfangle,da=P.midangle;T=T.trace.insidetextorientation;var ca="horizontal"===T,la="tangential"===T,pa="radial"===T;T="auto"===T;var qa=[];if(!T){var oa=function(ha,ma){var wa=
P.startangle,na=P.stopangle;if(wa>ha&&ha>na||wa<ha&&ha<na)wa=Math.abs(ha-P.startangle),na=Math.abs(ha-P.stopangle),wa=wa<na?wa:na,ra="tan"===ma?l(Q,V,ba,wa,0):d(Q,V,ba,wa,Math.PI/2),ra.textPosAngle=ha,qa.push(ra)},ka;if(ca||la){for(ka=4;-4<=ka;ka-=2)oa(Math.PI*ka,"tan");for(ka=4;-4<=ka;ka-=2)oa(Math.PI*(ka+1),"tan")}if(ca||pa){for(ka=4;-4<=ka;ka-=2)oa(Math.PI*(ka+1.5),"rad");for(ka=4;-4<=ka;ka-=2)oa(Math.PI*(ka+.5),"rad")}}if(Y||T||ca){var ra={scale:aa*V*2/Math.sqrt(Q.width*Q.width+Q.height*Q.height),
rCenter:1-aa,rotate:0};ra.textPosAngle=(P.startangle+P.stopangle)/2;if(1<=ra.scale)return ra;qa.push(ra)}if(T||pa)ra=d(Q,V,ba,ea,da),ra.textPosAngle=(P.startangle+P.stopangle)/2,qa.push(ra);if(T||la)ra=l(Q,V,ba,ea,da),ra.textPosAngle=(P.startangle+P.stopangle)/2,qa.push(ra);for(ea=Y=aa=0;ea<qa.length&&(da=qa[ea].scale,Y<da&&(Y=da,aa=ea),T||!(1<=Y));ea++);return qa[aa]}function d(Q,P,T,V,aa){P=Math.max(0,P-2*E);var ba=Q.width/Q.height;T=k(ba,V,P,T);P=T/P;return{scale:2*T/Q.height,rCenter:Math.cos(P)-
ba*P,rotate:(180/Math.PI*aa+720)%180-90}}function l(Q,P,T,V,aa){P=Math.max(0,P-2*E);var ba=Q.height/Q.width;T=k(ba,V,P,T);P=T/P;return{scale:2*T/Q.width,rCenter:Math.cos(P)-ba*P,rotate:(180/Math.PI*(aa+Math.PI/2)+720)%180-90}}function k(Q,P,T,V){P=Q+1/(2*Math.tan(P));return T*Math.min(1/(Math.sqrt(P*P+.5)+P),V/(Math.sqrt(Q*Q+V/2)+Q))}function c(Q,P){var T=P.pxmid[0];P=P.pxmid[1];var V=Q.width/2;Q=Q.height/2;0>T&&(V*=-1);0>P&&(Q*=-1);return{scale:1,rCenter:1,rotate:0,x:V+Math.abs(Q)*(0<V?1:-1)/2,y:Q/
(1+T*T/(P*P)),outside:!0}}function e(Q,P){var T=Q.trace,V=Q.cx,aa=Q.cy,ba=0;var Y=0+T.title.font.size;var ea=m(T);-1!==T.title.position.indexOf("top")?(aa-=(1+ea)*Q.r,Y-=Q.titleBox.height):-1!==T.title.position.indexOf("bottom")&&(aa+=(1+ea)*Q.r);var da=Q.trace.aspectratio;da=Q.r/(void 0===da?1:da);var ca=P.w*(T.domain.x[1]-T.domain.x[0])/2;-1!==T.title.position.indexOf("left")?(ca+=da,V-=(1+ea)*da,ba+=Q.titleBox.width/2):-1!==T.title.position.indexOf("center")?ca*=2:-1!==T.title.position.indexOf("right")&&
(ca+=da,V+=(1+ea)*da,ba-=Q.titleBox.width/2);ea=ca/Q.titleBox.width;Q=g(Q,P)/Q.titleBox.height;return{x:V,y:aa,scale:Math.min(ea,Q),tx:ba,ty:Y}}function g(Q,P){var T=Q.trace;return Math.min(Q.titleBox.height,P.h*(T.domain.y[1]-T.domain.y[0])/2)}function m(Q){var P=Q.pull;if(!P)return 0;var T;if(Array.isArray(P))for(T=P=0;T<Q.pull.length;T++)Q.pull[T]>P&&(P=Q.pull[T]);return P}function r(Q,P){function T(ma,wa){return ma.pxmid[1]-wa.pxmid[1]}function V(ma,wa){return wa.pxmid[1]-ma.pxmid[1]}function aa(ma,
wa){wa||(wa={});var na=wa.labelExtraY+(Y?wa.yLabelMax:wa.yLabelMin);wa=Y?ma.yLabelMin:ma.yLabelMax;var ya=Y?ma.yLabelMax:ma.yLabelMin,Fa=ma.cyFinal+ca(ma.px0[1],ma.px1[1]),Ha=na-wa;0<Ha*la&&(ma.labelExtraY=Ha);if(Array.isArray(P.pull))for(na=0;na<ra.length;na++){var eb=ra[na];eb===ma||(K.castOption(P.pull,ma.pts)||0)>=(K.castOption(P.pull,eb.pts)||0)||(0<(ma.pxmid[1]-eb.pxmid[1])*la?(Ha=eb.cyFinal+ca(eb.px0[1],eb.px1[1]),Ha=Ha-wa-ma.labelExtraY,0<Ha*la&&(ma.labelExtraY+=Ha)):0<(ya+ma.labelExtraY-
Fa)*la&&(Ha=3*qa*Math.abs(na-ra.indexOf(ma)),eb=eb.cxFinal+pa(eb.px0[0],eb.px1[0]),Ha=eb+Ha-(ma.cxFinal+ma.pxmid[0])-ma.labelExtraX,0<Ha*qa&&(ma.labelExtraX+=Ha)))}}var ba,Y,ea;for(Y=0;2>Y;Y++){var da=Y?T:V;var ca=Y?Math.max:Math.min;var la=Y?1:-1;for(ba=0;2>ba;ba++){var pa=ba?Math.max:Math.min;var qa=ba?1:-1;var oa=Q[Y][ba];oa.sort(da);var ka=Q[1-Y][ba];var ra=ka.concat(oa);var ha=[];for(ea=0;ea<oa.length;ea++)void 0!==oa[ea].yLabelMid&&ha.push(oa[ea]);oa=!1;for(ea=0;Y&&ea<ka.length;ea++)if(void 0!==
ka[ea].yLabelMid){oa=ka[ea];break}for(ea=0;ea<ha.length;ea++)ka=ea&&ha[ea-1],oa&&!ea&&(ka=oa),aa(ha[ea],ka)}}}function u(Q,P){for(var T=[],V=0;V<Q.length;V++){var aa=Q[V][0],ba=aa.trace,Y=ba.domain,ea=P.w*(Y.x[1]-Y.x[0]);Y=P.h*(Y.y[1]-Y.y[0]);ba.title.text&&"middle center"!==ba.title.position&&(Y-=g(aa,P));ea/=2;var da=Y/2;"funnelarea"!==ba.type||ba.scalegroup||(da/=ba.aspectratio);aa.r=Math.min(ea,da)/(1+m(ba));aa.cx=P.l+P.w*(ba.domain.x[1]+ba.domain.x[0])/2;aa.cy=P.t+P.h*(1-ba.domain.y[0])-Y/2;
ba.title.text&&-1!==ba.title.position.indexOf("bottom")&&(aa.cy-=g(aa,P));ba.scalegroup&&-1===T.indexOf(ba.scalegroup)&&T.push(ba.scalegroup)}for(ba=0;ba<T.length;ba++){Y=Infinity;ea=T[ba];for(V=0;V<Q.length;V++)if(P=Q[V][0],aa=P.trace,aa.scalegroup===ea){if("pie"===aa.type)var ca=P.r*P.r;else"funnelarea"===aa.type&&(1<aa.aspectratio?(ca=P.r,da=ca/aa.aspectratio):(da=P.r,ca=da*aa.aspectratio),ca*=(1+aa.baseratio)/2,ca*=da);Y=Math.min(Y,ca/P.vTotal)}for(V=0;V<Q.length;V++)P=Q[V][0],aa=P.trace,aa.scalegroup===
ea&&(da=Y*P.vTotal,"funnelarea"===aa.type&&(da/=(1+aa.baseratio)/2,da/=aa.aspectratio),P.r=Math.sqrt(da))}}function v(Q){var P=Q[0],T=P.r,V=P.trace,aa=V.rotation*Math.PI/180,ba=2*Math.PI/P.vTotal,Y="px0",ea="px1",da;if("counterclockwise"===V.direction){for(da=0;da<Q.length&&Q[da].hidden;da++);if(da===Q.length)return;aa+=ba*Q[da].v;ba*=-1;Y="px1";ea="px0"}var ca=w(T,aa);for(da=0;da<Q.length;da++){var la=Q[da];if(!la.hidden){la[Y]=ca;la.startangle=aa;aa+=ba*la.v/2;la.pxmid=w(T,aa);la.midangle=aa;aa+=
ba*la.v/2;ca=w(T,aa);la.stopangle=aa;la[ea]=ca;la.largeArc=la.v>P.vTotal/2?1:0;la.halfangle=Math.PI*Math.min(la.v/P.vTotal,.5);la.ring=1-V.hole;var pa=la;la=la.v!==P.vTotal||P.trace.hole?Math.min(1/(1+1/Math.sin(la.halfangle)),la.ring/2):1;pa.rInscribed=la}}}function w(Q,P){return[Q*Math.sin(P),-Q*Math.cos(P)]}function D(Q,P,T){var V=Q._fullLayout,aa=T.trace,ba=aa.texttemplate,Y=aa.textinfo;if(!ba&&Y&&"none"!==Y){var ea=Y.split("+"),da=-1!==ea.indexOf("label"),ca=-1!==ea.indexOf("text");Y=-1!==ea.indexOf("value");
ea=-1!==ea.indexOf("percent");var la=V.separators;da=da?[P.label]:[];ca&&(ca=K.getFirstFilled(aa.text,P.pts),O(ca)&&da.push(ca));Y&&da.push(K.formatPieValue(P.v,la));ea&&da.push(K.formatPiePercent(P.v/T.vTotal,la));P.text=da.join("\x3cbr\x3e")}if(ba)if(ba=H.castOption(aa,P.i,"texttemplate")){T={label:P.label,value:P.v,valueLabel:K.formatPieValue(P.v,V.separators),percent:P.v/T.vTotal,percentLabel:K.formatPiePercent(P.v/T.vTotal,V.separators),color:P.color,text:P.text,customdata:H.castOption(aa,P.i,
"customdata")};V=K.getFirstFilled(aa.text,P.pts);if(O(V)||""===V)T.text=V;P.text=H.texttemplateString(ba,T,Q._fullLayout._d3locale,T,aa._meta||{})}else P.text=""}function C(Q,P){var T=Q.rotate*Math.PI/180,V=Math.cos(T);T=Math.sin(T);var aa=(P.left+P.right)/2;P=(P.top+P.bottom)/2;Q.textX=aa*V-P*T;Q.textY=aa*T+P*V;Q.noCenter=!0}var x=b("d3"),A=b("../../plots/plots"),B=b("../../components/fx"),t=b("../../components/color"),G=b("../../components/drawing"),H=b("../../lib"),I=b("../../lib/svg_text_utils");
F=b("../bar/uniform_text");var J=F.recordMinTextSize,L=F.clearMinTextSize,E=b("../bar/constants").TEXTPAD,K=b("./helpers"),N=b("./event_data"),O=b("../../lib").isValidTextValue;y.exports={plot:function(Q,P){var T=Q._fullLayout,V=T._size;L("pie",T);a(P,Q);u(P,V);var aa=H.makeTraceGroups(T._pielayer,P,"trace").each(function(ba){var Y=x.select(this),ea=ba[0],da=ea.trace;v(ba);Y.attr("stroke-linejoin","round");Y.each(function(){var ca=x.select(this).selectAll("g.slice").data(ba);ca.enter().append("g").classed("slice",
!0);ca.exit().remove();var la=[[[],[]],[[],[]]],pa=!1;ca.each(function(ra,ha){function ma(ib,Pa,sb,tb){return"a"+tb*ea.r+","+tb*ea.r+" 0 "+ra.largeArc+(sb?" 1 ":" 0 ")+tb*(Pa[0]-ib[0])+","+tb*(Pa[1]-ib[1])}if(ra.hidden)x.select(this).selectAll("path,g").remove();else{ra.pointNumber=ra.i;ra.curveNumber=da.index;la[0>ra.pxmid[1]?0:1][0>ra.pxmid[0]?0:1].push(ra);var wa=ea.cx,na=ea.cy,ya=x.select(this),Fa=ya.selectAll("path.surface").data([ra]);Fa.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});
ya.call(n,Q,ba);if(da.pull){var Ha=+K.castOption(da.pull,ra.pts)||0;0<Ha&&(wa+=Ha*ra.pxmid[0],na+=Ha*ra.pxmid[1])}ra.cxFinal=wa;ra.cyFinal=na;Ha=da.hole;if(ra.v===ea.vTotal){var eb="M"+(wa+ra.px0[0])+","+(na+ra.px0[1])+ma(ra.px0,ra.pxmid,!0,1)+ma(ra.pxmid,ra.px0,!0,1)+"Z";Ha?Fa.attr("d","M"+(wa+Ha*ra.px0[0])+","+(na+Ha*ra.px0[1])+ma(ra.px0,ra.pxmid,!1,Ha)+ma(ra.pxmid,ra.px0,!1,Ha)+"Z"+eb):Fa.attr("d",eb)}else if(eb=ma(ra.px0,ra.px1,!0,1),Ha){var hb=1-Ha;Fa.attr("d","M"+(wa+Ha*ra.px1[0])+","+(na+Ha*
ra.px1[1])+ma(ra.px1,ra.px0,!1,Ha)+"l"+hb*ra.px0[0]+","+hb*ra.px0[1]+eb+"Z")}else Fa.attr("d","M"+wa+","+na+"l"+ra.px0[0]+","+ra.px0[1]+eb+"Z");D(Q,ra,ea);var ob=K.castOption(da.textposition,ra.pts);ya=ya.selectAll("g.slicetext").data(ra.text&&"none"!==ob?[0]:[]);ya.enter().append("g").classed("slicetext",!0);ya.exit().remove();ya.each(function(){var ib=H.ensureSingle(x.select(this),"text","",function(Ka){Ka.attr("data-notex",1)}),Pa=H.ensureUniformFontSize(Q,"outside"===ob?p(da,ra,T.font):h(da,ra,
T.font));ib.text(ra.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(G.font,Pa).call(I.convertToTspans,Q);var sb=G.bBox(ib.node());if("outside"===ob)var tb=c(sb,ra);else tb=f(sb,ra,ea),"auto"===ob&&1>tb.scale&&(sb=H.ensureUniformFontSize(Q,da.outsidetextfont),ib.call(G.font,sb),sb=G.bBox(ib.node()),tb=c(sb,ra));var Aa=tb.textPosAngle;Aa=void 0===Aa?ra.pxmid:w(ea.r,Aa);tb.targetX=wa+Aa[0]*tb.rCenter+(tb.x||0);tb.targetY=na+Aa[1]*tb.rCenter+(tb.y||0);C(tb,sb);tb.outside&&(Aa=
tb.targetY,ra.yLabelMin=Aa-sb.height/2,ra.yLabelMid=Aa,ra.yLabelMax=Aa+sb.height/2,ra.labelExtraX=0,ra.labelExtraY=0,pa=!0);tb.fontSize=Pa.size;J(da.type,tb,T);ba[ha].transform=tb;ib.attr("transform",H.getTextTransform(tb))})}});var qa=x.select(this).selectAll("g.titletext").data(da.title.text?[0]:[]);qa.enter().append("g").classed("titletext",!0);qa.exit().remove();qa.each(function(){var ra=H.ensureSingle(x.select(this),"text","",function(ma){ma.attr("data-notex",1)}),ha=da.title.text;da._meta&&
(ha=H.templateString(ha,da._meta));ra.text(ha).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(G.font,da.title.font).call(I.convertToTspans,Q);ha="middle center"===da.title.position?{x:ea.cx,y:ea.cy,scale:ea.trace.hole*ea.r*2/Math.sqrt(ea.titleBox.width*ea.titleBox.width+ea.titleBox.height*ea.titleBox.height),tx:0,ty:-ea.titleBox.height/2+ea.trace.title.font.size}:e(ea,V);ra.attr("transform","translate("+ha.x+","+ha.y+")"+(1>ha.scale?"scale("+ha.scale+")":"")+"translate("+ha.tx+
","+ha.ty+")")});pa&&r(la,da);q(ca,da);if(pa&&da.automargin){ca=G.bBox(Y.node());qa=da.domain;var oa=(.5*V.w*(qa.x[1]-qa.x[0])-ea.r)/V.w,ka=(.5*V.h*(qa.y[1]-qa.y[0])-ea.r)/V.h;A.autoMargin(Q,"pie."+da.uid+".automargin",{xl:qa.x[0]-oa,xr:qa.x[1]+oa,yb:qa.y[0]-ka,yt:qa.y[1]+ka,l:Math.max(ea.cx-ea.r-ca.left,0),r:Math.max(ca.right-(ea.cx+ea.r),0),b:Math.max(ca.bottom-(ea.cy+ea.r),0),t:Math.max(ea.cy-ea.r-ca.top,0),pad:5})}})});setTimeout(function(){aa.selectAll("tspan").each(function(){var ba=x.select(this);
ba.attr("dy")&&ba.attr("dy",ba.attr("dy"))})},0)},formatSliceLabel:D,transformInsideText:f,determineInsideTextFont:h,positionTitleOutside:e,prerenderTitles:a,layoutAreas:u,attachFxHandlers:n,computeTransform:C}},{"../../components/color":615,"../../components/drawing":637,"../../components/fx":655,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../bar/constants":892,"../bar/uniform_text":906,"./event_data":1133,"./helpers":1134,d3:169}],1139:[function(b,y,F){var q=b("d3"),
n=b("./style_one"),p=b("../bar/uniform_text").resizeText;y.exports=function(h){var a=h._fullLayout._pielayer.selectAll(".trace");p(h,a,"pie");a.each(function(f){var d=f[0].trace;f=q.select(this);f.style({opacity:d.opacity});f.selectAll("path.surface").each(function(l){q.select(this).call(n,l,d)})})}},{"../bar/uniform_text":906,"./style_one":1140,d3:169}],1140:[function(b,y,F){var q=b("../../components/color"),n=b("./helpers").castOption;y.exports=function(p,h,a){var f=a.marker.line;a=n(f.color,h.pts)||
q.defaultLine;f=n(f.width,h.pts)||0;p.style("stroke-width",f).call(q.fill,h.color).call(q.stroke,a)}},{"../../components/color":615,"./helpers":1134}],1141:[function(b,y,F){b=b("../scatter/attributes");y.exports={x:b.x,y:b.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:b.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",
min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1155}],1142:[function(b,y,F){function q(f,d){this.scene=f;this.uid=d;this.type=
"pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=n(f.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var n=b("gl-pointcloud2d"),p=b("../../lib/str2rgbarray"),h=
b("../../plots/cartesian/autorange").findExtremes,a=b("../scatter/get_trace_color");b=q.prototype;b.handlePick=function(f){var d=this.idToIndex[f.pointId];return{trace:this,dataCoord:f.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*d],this.pickXYData[2*d+1]]:[this.pickXData[d],this.pickYData[d]],textLabel:Array.isArray(this.textLabels)?this.textLabels[d]:this.textLabels,color:this.color,name:this.name,pointIndex:d,hoverinfo:this.hoverinfo}};b.update=function(f){this.index=f.index;this.textLabels=
f.text;this.name=f.name;this.hoverinfo=f.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.updateFast(f);this.color=a(f,{})};b.updateFast=function(f){var d=this.xData=this.pickXData=f.x,l=this.yData=this.pickYData=f.y,k=this.pickXYData=f.xy,c=f.xbounds&&f.ybounds,e=f.indices,g=this.bounds,m;if(k){var r=k;k=k.length>>>1;if(c)g[0]=f.xbounds[0],g[2]=f.xbounds[1],g[1]=f.ybounds[0],g[3]=f.ybounds[1];else for(m=0;m<k;m++){c=r[2*m];var u=r[2*m+1];c<g[0]&&(g[0]=c);c>g[2]&&(g[2]=c);u<g[1]&&
(g[1]=u);u>g[3]&&(g[3]=u)}if(!e)for(e=new Int32Array(k),m=0;m<k;m++)e[m]=m}else for(k=d.length,r=new Float32Array(2*k),e=new Int32Array(k),m=0;m<k;m++)c=d[m],u=l[m],e[m]=m,r[2*m]=c,r[2*m+1]=u,c<g[0]&&(g[0]=c),c>g[2]&&(g[2]=c),u<g[1]&&(g[1]=u),u>g[3]&&(g[3]=u);this.idToIndex=e;this.pointcloudOptions.idToIndex=e;this.pointcloudOptions.positions=r;k=p(f.marker.color);r=p(f.marker.border.color);e=f.opacity*f.marker.opacity;k[3]*=e;this.pointcloudOptions.color=k;k=f.marker.blend;null===k&&(k=100>d.length||
100>l.length);this.pointcloudOptions.blend=k;r[3]*=e;this.pointcloudOptions.borderColor=r;r=Math.max(f.marker.sizemax,f.marker.sizemin);this.pointcloudOptions.sizeMin=f.marker.sizemin;this.pointcloudOptions.sizeMax=r;this.pointcloudOptions.areaRatio=f.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);d=this.scene.xaxis;l=this.scene.yaxis;r=r/2||.5;f._extremes[d._id]=h(d,[g[0],g[2]],{ppad:r});f._extremes[l._id]=h(l,[g[1],g[3]],{ppad:r})};b.dispose=function(){this.pointcloud.dispose()};
y.exports=function(f,d){f=new q(f,d.uid);f.update(d);return f}},{"../../lib/str2rgbarray":772,"../../plots/cartesian/autorange":796,"../scatter/get_trace_color":1165,"gl-pointcloud2d":303}],1143:[function(b,y,F){var q=b("../../lib"),n=b("./attributes");y.exports=function(p,h,a){function f(d,l){return q.coerce(p,h,n,d,l)}f("x");f("y");f("xbounds");f("ybounds");p.xy&&p.xy instanceof Float32Array&&(h.xy=p.xy);p.indices&&p.indices instanceof Int32Array&&(h.indices=p.indices);f("text");f("marker.color",
a);f("marker.opacity");f("marker.blend");f("marker.sizemin");f("marker.sizemax");f("marker.border.color",a);f("marker.border.arearatio");h._length=null}},{"../../lib":749,"./attributes":1141}],1144:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../scatter3d/calc"),plot:b("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":837,"../scatter3d/calc":1183,
"./attributes":1141,"./convert":1142,"./defaults":1143}],1145:[function(b,y,F){F=b("../../plots/font_attributes");var q=b("../../plots/attributes"),n=b("../../components/color/attributes"),p=b("../../components/fx/attributes"),h=b("../../plots/domain").attributes,a=b("../../plots/template_attributes").hovertemplateAttrs,f=b("../../components/colorscale/attributes"),d=b("../../plot_api/plot_template").templatedArray,l=b("../../lib/extend").extendFlat,k=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");
(y.exports=k({hoverinfo:l({},q.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:p.hoverlabel,domain:h({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:F({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,
freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},
hoverlabel:p.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:p.hoverlabel,
hovertemplate:a({},{keys:["value","label"]}),colorscales:d("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:l(f().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":614,"../../components/colorscale/attributes":622,"../../components/fx/attributes":646,"../../constants/docs":719,"../../lib/extend":739,
"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/font_attributes":825,"../../plots/template_attributes":875}],1146:[function(b,y,F){function q(c,e){var g=c._fullData[e],m=c._fullLayout,r=m.dragmode,u=g._bgRect;if("pan"!==r&&"zoom"!==r){a(u,"pan"===m.dragmode?"move":"crosshair");m={_id:"x",c2p:l.identity,_offset:g._sankey.translateX,_length:g._sankey.width};g={_id:"y",c2p:l.identity,_offset:g._sankey.translateY,_length:g._sankey.height};
var v={gd:c,element:u.node(),plotinfo:{id:e,xaxis:m,yaxis:g,fillRangeItems:l.noop},subplot:e,xaxes:[m],yaxes:[g],doneFnCompleted:function(w){for(var D=c._fullData[e],C=D.node.groups.slice(),x=[],A=0;A<w.length;A++){a:{var B=D._sankey.graph.nodes;for(var t=0;t<B.length;t++)if(B[t].pointNumber===w[A].pointNumber){B=B[t];break a}B=void 0}if(B)if(B.group){for(t=0;t<B.childrenNodes.length;t++)x.push(B.childrenNodes[t].pointNumber);C[B.pointNumber-D.node._count]=!1}else x.push(B.pointNumber)}w=C.filter(Boolean).concat([x]);
k.call("_guiRestyle",c,{"node.groups":[w]},e)},prepFn:function(w,D,C){d(w,D,C,v,r)}};f.init(v)}}y=b("../../plot_api/edit_types").overrideAll;var n=b("../../plots/get_data").getModuleCalcData,p=b("./plot"),h=b("../../components/fx/layout_attributes"),a=b("../../lib/setcursor"),f=b("../../components/dragelement"),d=b("../../plots/cartesian/select").prepSelect,l=b("../../lib"),k=b("../../registry");F.name="sankey";F.baseLayoutAttrOverrides=y({hoverlabel:h.hoverlabel},"plot","nested");F.plot=function(c){var e=
n(c.calcdata,"sankey")[0];p(c,e);F.updateFx(c)};F.clean=function(c,e,g,m){c=m._has&&m._has("sankey");e=e._has&&e._has("sankey");c&&!e&&(m._paperdiv.selectAll(".sankey").remove(),m._paperdiv.selectAll(".bgsankey").remove())};F.updateFx=function(c){for(var e=0;e<c._fullData.length;e++)q(c,e)}},{"../../components/dragelement":634,"../../components/fx/layout_attributes":656,"../../lib":749,"../../lib/setcursor":769,"../../plot_api/edit_types":780,"../../plots/cartesian/select":816,"../../plots/get_data":834,
"../../registry":880,"./plot":1151}],1147:[function(b,y,F){function q(l,k,c){for(var e=p.init2dArray(l,0),g=0;g<Math.min(k.length,c.length);g++)if(p.isIndex(k[g],l)&&p.isIndex(c[g],l)){if(k[g]===c[g])return!0;e[k[g]].push(c[g])}return n(e).components.some(function(m){return 1<m.length})}var n=b("strongly-connected-components"),p=b("../../lib"),h=b("../../lib/gup").wrap,a=p.isArrayOrTypedArray,f=p.isIndex,d=b("../../components/colorscale");y.exports=function(l,k){var c=k.node,e=k.link;l=[];var g=a(e.color),
m=a(e.customdata),r={},u={},v=e.colorscales.length,w;for(w=0;w<v;w++){var D=e.colorscales[w],C=d.extractScale(D,{cLetter:"c"});C=d.makeColorScaleFunc(C);u[D.label]=C}for(w=v=0;w<e.value.length;w++)e.source[w]>v&&(v=e.source[w]),e.target[w]>v&&(v=e.target[w]);v+=1;k.node._count=v;k=k.node.groups;D={};for(w=0;w<k.length;w++){var x=k[w];for(C=0;C<x.length;C++){var A=x[C],B=v+w;D.hasOwnProperty(A)?p.warn("Node "+A+" is already part of a group."):D[A]=B}}C=[];x=[];for(w=0;w<e.value.length;w++){A=e.value[w];
B=e.source[w];var t=e.target[w];if(0<A&&f(B,v)&&f(t,v)&&(!D.hasOwnProperty(B)||!D.hasOwnProperty(t)||D[B]!==D[t])){D.hasOwnProperty(t)&&(t=D[t]);D.hasOwnProperty(B)&&(B=D[B]);B=+B;t=+t;r[B]=r[t]=!0;var G="";e.label&&e.label[w]&&(G=e.label[w]);var H=null;G&&u.hasOwnProperty(G)&&(H=u[G]);l.push({pointNumber:w,label:G,color:g?e.color[w]:e.color,customdata:m?e.customdata[w]:e.customdata,concentrationscale:H,source:B,target:t,value:+A});C.push(B);x.push(t)}}e=v+k.length;m=a(c.color);u=a(c.customdata);
g=[];for(w=0;w<e;w++)r[w]&&g.push({group:w>v-1,childrenNodes:[],pointNumber:w,label:c.label[w],color:m?c.color[w]:c.color,customdata:u?c.customdata[w]:c.customdata});c=!1;q(e,C,x)&&(c=!0);return h({circular:c,_nodes:g,_links:l,_groups:k,_groupLookup:D})}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gup":746,"strongly-connected-components":541}],1148:[function(b,y,F){y.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,
forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1149:[function(b,y,F){function q(c,e){function g(m,r){return n.coerce(c,e,p.link.colorscales,m,r)}g("label");g("cmin");g("cmax");g("colorscale")}
var n=b("../../lib"),p=b("./attributes"),h=b("../../components/color"),a=b("tinycolor2"),f=b("../../plots/domain").defaults,d=b("../../components/fx/hoverlabel_defaults"),l=b("../../plot_api/plot_template"),k=b("../../plots/array_container_defaults");y.exports=function(c,e,g,m){function r(t,G){return n.coerce(c,e,p,t,G)}function u(t,G){return n.coerce(w,D,p.node,t,G)}function v(t,G){return n.coerce(x,A,p.link,t,G)}g=n.extendDeep(m.hoverlabel,c.hoverlabel);var w=c.node,D=l.newContainer(e,"node");u("label");
u("groups");u("x");u("y");u("pad");u("thickness");u("line.color");u("line.width");u("hoverinfo",c.hoverinfo);d(w,D,u,g);u("hovertemplate");var C=m.colorway;u("color",D.label.map(function(t,G){return h.addOpacity(C[G%C.length],.8)}));u("customdata");var x=c.link||{},A=l.newContainer(e,"link");v("label");v("source");v("target");v("value");v("line.color");v("line.width");v("hoverinfo",c.hoverinfo);d(x,A,v,g);v("hovertemplate");g=.333>a(m.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";
v("color",n.repeat(g,A.value.length));v("customdata");k(x,A,{name:"colorscales",handleItemDefaults:q});f(e,m,r);r("orientation");r("valueformat");r("valuesuffix");var B;D.x.length&&D.y.length&&(B="freeform");r("arrangement",B);n.coerceFont(r,"textfont",n.extendFlat({},m.font));e._length=null}},{"../../components/color":615,"../../components/fx/hoverlabel_defaults":653,"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../../plots/domain":824,"./attributes":1145,
tinycolor2:548}],1150:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"sankey",basePlotModule:b("./base_plot"),selectPoints:b("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1145,"./base_plot":1146,"./calc":1147,"./defaults":1149,"./plot":1151,"./select.js":1153}],1151:[function(b,y,F){function q(C){return""!==C}function n(C,x){return C.filter(function(A){return A.key===x.traceId})}
function p(C,x){g.select(C).select("path").style("fill-opacity",x);g.select(C).select("rect").style("fill-opacity",x)}function h(C){g.select(C).select("text.name").style("fill","black")}function a(C){return function(x){return-1!==C.node.sourceLinks.indexOf(x.link)||-1!==C.node.targetLinks.indexOf(x.link)}}function f(C){return function(x){return-1!==x.node.sourceLinks.indexOf(C.link)||-1!==x.node.targetLinks.indexOf(C.link)}}function d(C,x,A){x&&A&&n(A,x).selectAll("."+w.sankeyLink).filter(a(x)).call(k.bind(0,
x,A,!1))}function l(C,x,A){x&&A&&n(A,x).selectAll("."+w.sankeyLink).filter(a(x)).call(c.bind(0,x,A,!1))}function k(C,x,A,B){var t=B.datum().link.label;B.style("fill-opacity",function(G){if(!G.link.concentrationscale)return.4});t&&n(x,C).selectAll("."+w.sankeyLink).filter(function(G){return G.link.label===t}).style("fill-opacity",function(G){if(!G.link.concentrationscale)return.4});A&&n(x,C).selectAll("."+w.sankeyNode).filter(f(C)).call(d)}function c(C,x,A,B){var t=B.datum().link.label;B.style("fill-opacity",
function(G){return G.tinyColorAlpha});t&&n(x,C).selectAll("."+w.sankeyLink).filter(function(G){return G.link.label===t}).style("fill-opacity",function(G){return G.tinyColorAlpha});A&&n(x,C).selectAll(w.sankeyNode).filter(f(C)).call(l)}function e(C,x){C=v.nestedProperty(C.hoverlabel||{},x).get();return Array.isArray(C)?!1:C}var g=b("d3"),m=b("./render"),r=b("../../components/fx"),u=b("../../components/color"),v=b("../../lib"),w=b("./constants").cn,D=v._;y.exports=function(C,x){for(var A=C._fullLayout,
B=A._paper,t=A._size,G=0;G<C._fullData.length;G++)if(C._fullData[G].visible&&C._fullData[G].type===w.sankey&&!C._fullData[G]._viewInitial){var H=C._fullData[G].node;C._fullData[G]._viewInitial={node:{groups:H.groups.slice(),x:H.x.slice(),y:H.y.slice()}}}var I=D(C,"source:")+" ",J=D(C,"target:")+" ",L=D(C,"concentration:")+" ",E=D(C,"incoming flow count:")+" ",K=D(C,"outgoing flow count:")+" ";m(C,B,x,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},{linkEvents:{hover:function(N,O,Q){!1!==C._fullLayout.hovermode&&
(g.select(N).call(k.bind(0,O,Q,!0)),"skip"!==O.link.trace.link.hoverinfo&&(O.link.fullData=O.link.trace,C.emit("plotly_hover",{event:g.event,points:[O.link]})))},follow:function(N,O){function Q(ea){if(ea.circular){var da=(ea.circularPathData.leftInnerExtent+ea.circularPathData.rightInnerExtent)/2;var ca=ea.circularPathData.verticalFullExtent}else da=(ea.source.x1+ea.target.x0)/2,ca=(ea.y0+ea.y1)/2;da=[da,ca];"v"===ea.trace.orientation&&da.reverse();da[0]+=O.parent.translateX;da[1]+=O.parent.translateY;
return da}if(!1!==C._fullLayout.hovermode&&(N=O.link.trace.link,"none"!==N.hoverinfo&&"skip"!==N.hoverinfo)){for(var P=[],T=0,V=0;V<O.flow.links.length;V++){var aa=O.flow.links[V];if("closest"!==C._fullLayout.hovermode||O.link.pointNumber===aa.pointNumber){O.link.pointNumber===aa.pointNumber&&(T=V);aa.fullData=aa.trace;N=O.link.trace.link;var ba=Q(aa),Y={valueLabel:g.format(O.valueFormat)(aa.value)+O.valueSuffix};P.push({x:ba[0],y:ba[1],name:Y.valueLabel,text:[aa.label||"",I+aa.source.label,J+aa.target.label,
aa.concentrationscale?L+g.format("%0.2f")(aa.flow.labelConcentration):""].filter(q).join("\x3cbr\x3e"),color:e(N,"bgcolor")||u.addOpacity(aa.color,1),borderColor:e(N,"bordercolor"),fontFamily:e(N,"font.family"),fontSize:e(N,"font.size"),fontColor:e(N,"font.color"),nameLength:e(N,"namelength"),textAlign:e(N,"align"),idealAlign:g.event.x<ba[0]?"right":"left",hovertemplate:N.hovertemplate,hovertemplateLabels:Y,eventData:[aa]})}}r.loneHover(P,{container:A._hoverlayer.node(),outerContainer:A._paper.node(),
gd:C,anchorIndex:T}).each(function(){O.link.concentrationscale||p(this,.65);h(this)})}},unhover:function(N,O,Q){!1!==C._fullLayout.hovermode&&(g.select(N).call(c.bind(0,O,Q,!0)),"skip"!==O.link.trace.link.hoverinfo&&(O.link.fullData=O.link.trace,C.emit("plotly_unhover",{event:g.event,points:[O.link]})),r.loneUnhover(A._hoverlayer.node()))},select:function(N,O){N=O.link;N.originalEvent=g.event;C._hoverdata=[N];r.click(C,{target:!0})}},nodeEvents:{hover:function(N,O,Q){!1!==C._fullLayout.hovermode&&
(g.select(N).call(d,O,Q),"skip"!==O.node.trace.node.hoverinfo&&(O.node.fullData=O.node.trace,C.emit("plotly_hover",{event:g.event,points:[O.node]})))},follow:function(N,O){if(!1!==C._fullLayout.hovermode){var Q=O.node.trace.node;if("none"!==Q.hoverinfo&&"skip"!==Q.hoverinfo){N=g.select(N).select("."+w.nodeRect);var P=C._fullLayout._paperdiv.node().getBoundingClientRect(),T=N.node().getBoundingClientRect();N=T.left-2-P.left;var V=T.right+2-P.left;P=T.top+T.height/4-P.top;T={valueLabel:g.format(O.valueFormat)(O.node.value)+
O.valueSuffix};O.node.fullData=O.node.trace;O=r.loneHover({x0:N,x1:V,y:P,name:g.format(O.valueFormat)(O.node.value)+O.valueSuffix,text:[O.node.label,E+O.node.targetLinks.length,K+O.node.sourceLinks.length].filter(q).join("\x3cbr\x3e"),color:e(Q,"bgcolor")||O.tinyColorHue,borderColor:e(Q,"bordercolor"),fontFamily:e(Q,"font.family"),fontSize:e(Q,"font.size"),fontColor:e(Q,"font.color"),nameLength:e(Q,"namelength"),textAlign:e(Q,"align"),idealAlign:"left",hovertemplate:Q.hovertemplate,hovertemplateLabels:T,
eventData:[O.node]},{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:C});p(O,.85);h(O)}}},unhover:function(N,O,Q){!1!==C._fullLayout.hovermode&&(g.select(N).call(l,O,Q),"skip"!==O.node.trace.node.hoverinfo&&(O.node.fullData=O.node.trace,C.emit("plotly_unhover",{event:g.event,points:[O.node]})),r.loneUnhover(A._hoverlayer.node()))},select:function(N,O,Q){var P=O.node;P.originalEvent=g.event;C._hoverdata=[P];g.select(N).call(l,O,Q);r.click(C,{target:!0})}}})}},{"../../components/color":615,
"../../components/fx":655,"../../lib":749,"./constants":1148,"./render":1152,d3:169}],1152:[function(b,y,F){function q(Y,ea,da){function ca(sb){sb.forEach(function(tb){var Aa=0;var Ka=tb.length,Qa;tb.sort(function(pb,db){return pb.y0-db.y0});for(Qa=0;Qa<Ka;++Qa){var Xa=tb[Qa];Xa.y0>=Aa||(Aa-=Xa.y0,1E-6<Aa&&(Xa.y0+=Aa,Xa.y1+=Aa));Aa=Xa.y1+ka}})}function la(sb){var tb=sb.map(function(Ia,Ua){return{x0:Ia.x0,index:Ua}}).sort(function(Ia,Ua){return Ia.x0-Ua.x0}),Aa=[],Ka=-1,Qa=-Infinity;for(eb=0;eb<tb.length;eb++){var Xa=
sb[tb[eb].index];if(Xa.x0>Qa+ra){Ka+=1;var pb=Xa.x0}Qa=Xa.x0;Aa[Ka]||(Aa[Ka]=[]);Aa[Ka].push(Xa);var db=pb-Xa.x0;Xa.x0+=db;Xa.x1+=db}return Aa}var pa=V(ea);ea=pa.trace;var qa=ea.domain,oa="h"===ea.orientation,ka=ea.node.pad,ra=ea.node.thickness,ha=Y.width*(qa.x[1]-qa.x[0]),ma=Y.height*(qa.y[1]-qa.y[0]),wa=pa._nodes,na=pa._links,ya=pa.circular;var Fa=ya?N.sankeyCircular().circularLinkGap(0):K.sankey();Fa.iterations(H.sankeyIterations).size(oa?[ha,ma]:[ma,ha]).nodeWidth(ra).nodePadding(ka).nodeId(function(sb){return sb.pointNumber}).nodes(wa).links(na);
var Ha=Fa();Fa.nodePadding()<ka&&Q.warn("node.pad was reduced to ",Fa.nodePadding()," to fit within the figure.");var eb,hb,ob;for(Pa in pa._groupLookup){wa=parseInt(pa._groupLookup[Pa]);for(eb=0;eb<Ha.nodes.length;eb++)if(Ha.nodes[eb].pointNumber===wa){var ib=Ha.nodes[eb];break}ib&&(wa={pointNumber:parseInt(Pa),x0:ib.x0,x1:ib.x1,y0:ib.y0,y1:ib.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},Ha.nodes.unshift(wa),ib.childrenNodes.unshift(wa))}(function(){for(eb=0;eb<Ha.nodes.length;eb++){var sb=Ha.nodes[eb],
tb={};for(hb=0;hb<sb.targetLinks.length;hb++){var Aa=sb.targetLinks[hb];var Ka=Aa.source.pointNumber+":"+Aa.target.pointNumber;tb.hasOwnProperty(Ka)||(tb[Ka]=[]);tb[Ka].push(Aa)}var Qa=Object.keys(tb);for(hb=0;hb<Qa.length;hb++){Ka=Qa[hb];Ka=tb[Ka];var Xa=0,pb={};for(ob=0;ob<Ka.length;ob++)Aa=Ka[ob],pb[Aa.label]||(pb[Aa.label]=0),pb[Aa.label]+=Aa.value,Xa+=Aa.value;for(ob=0;ob<Ka.length;ob++)Aa=Ka[ob],Aa.flow={value:Xa,labelConcentration:pb[Aa.label]/Xa,concentration:Aa.value/Xa,links:Ka},Aa.concentrationscale&&
(Aa.color=J(Aa.concentrationscale(Aa.flow.labelConcentration)))}for(hb=tb=0;hb<sb.sourceLinks.length;hb++)tb+=sb.sourceLinks[hb].value;for(hb=0;hb<sb.sourceLinks.length;hb++)Aa=sb.sourceLinks[hb],Aa.concentrationOut=Aa.value/tb;for(hb=tb=0;hb<sb.targetLinks.length;hb++)tb+=sb.targetLinks[hb].value;for(hb=0;hb<sb.targetLinks.length;hb++)Aa=sb.targetLinks[hb],Aa.concenrationIn=Aa.value/tb}})();if(ea.node.x.length&&ea.node.y.length){for(eb=0;eb<Math.min(ea.node.x.length,ea.node.y.length,Ha.nodes.length);eb++)if(ea.node.x[eb]&&
ea.node.y[eb]){var Pa=[ea.node.x[eb]*ha,ea.node.y[eb]*ma];Ha.nodes[eb].x0=Pa[0]-ra/2;Ha.nodes[eb].x1=Pa[0]+ra/2;ib=Ha.nodes[eb].y1-Ha.nodes[eb].y0;Ha.nodes[eb].y0=Pa[1]-ib/2;Ha.nodes[eb].y1=Pa[1]+ib/2}"snap"===ea.arrangement&&(wa=Ha.nodes,Pa=la(wa),ca(Pa));Fa.update(Ha)}return{circular:ya,key:da,trace:ea,guid:Q.randstr(),horizontal:oa,width:ha,height:ma,nodePad:ea.node.pad,nodeLineColor:ea.node.line.color,nodeLineWidth:ea.node.line.width,linkLineColor:ea.link.line.color,linkLineWidth:ea.link.line.width,
valueFormat:ea.valueformat,valueSuffix:ea.valuesuffix,textFont:ea.textfont,translateX:qa.x[0]*Y.width+Y.margin.l,translateY:Y.height-qa.y[1]*Y.height+Y.margin.t,dragParallel:oa?ma:ha,dragPerpendicular:oa?ha:ma,arrangement:ea.arrangement,sankey:Fa,graph:Ha,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function n(Y,ea,da){var ca=J(ea.color),la=ea.source.label+"|"+ea.target.label;ea.trace=Y.trace;ea.curveNumber=Y.trace.index;return{circular:Y.circular,key:la+"__"+da,traceId:Y.key,
pointNumber:ea.pointNumber,link:ea,tinyColorHue:L.tinyRGB(ca),tinyColorAlpha:ca.getAlpha(),linkPath:p,linkLineColor:Y.linkLineColor,linkLineWidth:Y.linkLineWidth,valueFormat:Y.valueFormat,valueSuffix:Y.valueSuffix,sankey:Y.sankey,parent:Y,interactionState:Y.interactionState,flow:ea.flow}}function p(){return function(Y){if(Y.link.circular){var ea=Y.link,da=ea.width/2,ca=ea.circularPathData;return"top"===ea.circularLinkType?"M "+ca.targetX+" "+(ca.targetY+da)+" L"+ca.rightInnerExtent+" "+(ca.targetY+
da)+"A"+(ca.rightLargeArcRadius+da)+" "+(ca.rightSmallArcRadius+da)+" 0 0 1 "+(ca.rightFullExtent-da)+" "+(ca.targetY-ca.rightSmallArcRadius)+"L"+(ca.rightFullExtent-da)+" "+ca.verticalRightInnerExtent+"A"+(ca.rightLargeArcRadius+da)+" "+(ca.rightLargeArcRadius+da)+" 0 0 1 "+ca.rightInnerExtent+" "+(ca.verticalFullExtent-da)+"L"+ca.leftInnerExtent+" "+(ca.verticalFullExtent-da)+"A"+(ca.leftLargeArcRadius+da)+" "+(ca.leftLargeArcRadius+da)+" 0 0 1 "+(ca.leftFullExtent+da)+" "+ca.verticalLeftInnerExtent+
"L"+(ca.leftFullExtent+da)+" "+(ca.sourceY-ca.leftSmallArcRadius)+"A"+(ca.leftLargeArcRadius+da)+" "+(ca.leftSmallArcRadius+da)+" 0 0 1 "+ca.leftInnerExtent+" "+(ca.sourceY+da)+"L"+ca.sourceX+" "+(ca.sourceY+da)+"L"+ca.sourceX+" "+(ca.sourceY-da)+"L"+ca.leftInnerExtent+" "+(ca.sourceY-da)+"A"+(ca.leftLargeArcRadius-da)+" "+(ca.leftSmallArcRadius-da)+" 0 0 0 "+(ca.leftFullExtent-da)+" "+(ca.sourceY-ca.leftSmallArcRadius)+"L"+(ca.leftFullExtent-da)+" "+ca.verticalLeftInnerExtent+"A"+(ca.leftLargeArcRadius-
da)+" "+(ca.leftLargeArcRadius-da)+" 0 0 0 "+ca.leftInnerExtent+" "+(ca.verticalFullExtent+da)+"L"+ca.rightInnerExtent+" "+(ca.verticalFullExtent+da)+"A"+(ca.rightLargeArcRadius-da)+" "+(ca.rightLargeArcRadius-da)+" 0 0 0 "+(ca.rightFullExtent+da)+" "+ca.verticalRightInnerExtent+"L"+(ca.rightFullExtent+da)+" "+(ca.targetY-ca.rightSmallArcRadius)+"A"+(ca.rightLargeArcRadius-da)+" "+(ca.rightSmallArcRadius-da)+" 0 0 0 "+ca.rightInnerExtent+" "+(ca.targetY-da)+"L"+ca.targetX+" "+(ca.targetY-da)+"Z":
"M "+ca.targetX+" "+(ca.targetY-da)+" L"+ca.rightInnerExtent+" "+(ca.targetY-da)+"A"+(ca.rightLargeArcRadius+da)+" "+(ca.rightSmallArcRadius+da)+" 0 0 0 "+(ca.rightFullExtent-da)+" "+(ca.targetY+ca.rightSmallArcRadius)+"L"+(ca.rightFullExtent-da)+" "+ca.verticalRightInnerExtent+"A"+(ca.rightLargeArcRadius+da)+" "+(ca.rightLargeArcRadius+da)+" 0 0 0 "+ca.rightInnerExtent+" "+(ca.verticalFullExtent+da)+"L"+ca.leftInnerExtent+" "+(ca.verticalFullExtent+da)+"A"+(ca.leftLargeArcRadius+da)+" "+(ca.leftLargeArcRadius+
da)+" 0 0 0 "+(ca.leftFullExtent+da)+" "+ca.verticalLeftInnerExtent+"L"+(ca.leftFullExtent+da)+" "+(ca.sourceY+ca.leftSmallArcRadius)+"A"+(ca.leftLargeArcRadius+da)+" "+(ca.leftSmallArcRadius+da)+" 0 0 0 "+ca.leftInnerExtent+" "+(ca.sourceY-da)+"L"+ca.sourceX+" "+(ca.sourceY-da)+"L"+ca.sourceX+" "+(ca.sourceY+da)+"L"+ca.leftInnerExtent+" "+(ca.sourceY+da)+"A"+(ca.leftLargeArcRadius-da)+" "+(ca.leftSmallArcRadius-da)+" 0 0 1 "+(ca.leftFullExtent-da)+" "+(ca.sourceY+ca.leftSmallArcRadius)+"L"+(ca.leftFullExtent-
da)+" "+ca.verticalLeftInnerExtent+"A"+(ca.leftLargeArcRadius-da)+" "+(ca.leftLargeArcRadius-da)+" 0 0 1 "+ca.leftInnerExtent+" "+(ca.verticalFullExtent-da)+"L"+ca.rightInnerExtent+" "+(ca.verticalFullExtent-da)+"A"+(ca.rightLargeArcRadius-da)+" "+(ca.rightLargeArcRadius-da)+" 0 0 1 "+(ca.rightFullExtent+da)+" "+ca.verticalRightInnerExtent+"L"+(ca.rightFullExtent+da)+" "+(ca.targetY+ca.rightSmallArcRadius)+"A"+(ca.rightLargeArcRadius-da)+" "+(ca.rightSmallArcRadius-da)+" 0 0 1 "+ca.rightInnerExtent+
" "+(ca.targetY+da)+"L"+ca.targetX+" "+(ca.targetY+da)+"Z"}ea=Y.link.source.x1;da=Y.link.target.x0;var la=aa(ea,da);ca=la(.5);la=la(.5);var pa=Y.link.y0-Y.link.width/2,qa=Y.link.y0+Y.link.width/2,oa=Y.link.y1-Y.link.width/2;Y=Y.link.y1+Y.link.width/2;return"M"+ea+","+pa+"C"+ca+","+pa+" "+la+","+oa+" "+da+","+oa+"L"+da+","+Y+"C"+la+","+Y+" "+ca+","+qa+" "+ea+","+qa+"Z"}}function h(Y,ea){var da=J(ea.color),ca=H.nodePadAcross,la=Y.nodePad/2;ea.dx=ea.x1-ea.x0;ea.dy=ea.y1-ea.y0;var pa=ea.dx,qa=Math.max(.5,
ea.dy),oa="node_"+ea.pointNumber;ea.group&&(oa=Q.randstr());ea.trace=Y.trace;ea.curveNumber=Y.trace.index;return{index:ea.pointNumber,key:oa,partOfGroup:ea.partOfGroup||!1,group:ea.group,traceId:Y.key,trace:Y.trace,node:ea,nodePad:Y.nodePad,nodeLineColor:Y.nodeLineColor,nodeLineWidth:Y.nodeLineWidth,textFont:Y.textFont,size:Y.horizontal?Y.height:Y.width,visibleWidth:Math.ceil(pa),visibleHeight:qa,zoneX:-ca,zoneY:-la,zoneWidth:pa+2*ca,zoneHeight:qa+2*la,labelY:Y.horizontal?ea.dy/2+1:ea.dx/2+1,left:1===
ea.originalLayer,sizeAcross:Y.width,forceLayouts:Y.forceLayouts,horizontal:Y.horizontal,darkBackground:128>=da.getBrightness(),tinyColorHue:L.tinyRGB(da),tinyColorAlpha:da.getAlpha(),valueFormat:Y.valueFormat,valueSuffix:Y.valueSuffix,sankey:Y.sankey,graph:Y.graph,arrangement:Y.arrangement,uniqueNodeLabelPathId:[Y.guid,Y.key,oa].join("_"),interactionState:Y.interactionState,figure:Y}}function a(Y){Y.attr("transform",function(ea){return"translate("+ea.node.x0.toFixed(3)+", "+ea.node.y0.toFixed(3)+
")"})}function f(Y){Y.call(a)}function d(Y){Y.attr("width",function(ea){return ea.node.x1-ea.node.x0}).attr("height",function(ea){return ea.visibleHeight})}function l(Y){return"translate("+Y.translateX+","+Y.translateY+")"+(Y.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function k(Y){return"translate("+(Y.horizontal?0:Y.labelY)+" "+(Y.horizontal?Y.labelY:0)+")"}function c(Y){return I.svg.line()([[Y.horizontal?Y.left?-Y.sizeAcross:Y.visibleWidth+H.nodeTextOffsetHorizontal:H.nodeTextOffsetHorizontal,
0],[Y.horizontal?Y.left?-H.nodeTextOffsetHorizontal:Y.sizeAcross:Y.visibleHeight-H.nodeTextOffsetHorizontal,0]])}function e(Y){return Y.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function g(Y){return Y.horizontal?"scale(1 1)":"scale(-1 1)"}function m(Y){return Y.darkBackground&&!Y.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function r(Y){return Y.horizontal&&Y.left?"100%":"0%"}function u(Y,ea,da){Y.on(".basic",null).on("mouseover.basic",function(ca){ca.interactionState.dragInProgress||
ca.partOfGroup||(da.hover(this,ca,ea),ca.interactionState.hovered=[this,ca])}).on("mousemove.basic",function(ca){ca.interactionState.dragInProgress||ca.partOfGroup||(da.follow(this,ca),ca.interactionState.hovered=[this,ca])}).on("mouseout.basic",function(ca){ca.interactionState.dragInProgress||ca.partOfGroup||(da.unhover(this,ca,ea),ca.interactionState.hovered=!1)}).on("click.basic",function(ca){ca.interactionState.hovered&&(da.unhover(this,ca,ea),ca.interactionState.hovered=!1);ca.interactionState.dragInProgress||
ca.partOfGroup||da.select(this,ca,ea)})}function v(Y,ea,da,ca){var la=I.behavior.drag().origin(function(pa){return{x:pa.node.x0+pa.visibleWidth/2,y:pa.node.y0+pa.visibleHeight/2}}).on("dragstart",function(pa){if("fixed"!==pa.arrangement&&(Q.ensureSingle(ca._fullLayout._infolayer,"g","dragcover",function(oa){ca._fullLayout._dragCover=oa}),Q.raiseToTop(this),pa.interactionState.dragInProgress=pa.node,B(pa.node),pa.interactionState.hovered&&(da.nodeEvents.unhover.apply(0,pa.interactionState.hovered),
pa.interactionState.hovered=!1),"snap"===pa.arrangement)){var qa=pa.traceId+"|"+pa.key;pa.forceLayouts[qa]?pa.forceLayouts[qa].alpha(1):w(Y,qa,pa,ca);D(Y,ea,pa,qa,ca)}}).on("drag",function(pa){if("fixed"!==pa.arrangement){var qa=I.event.x,oa=I.event.y;"snap"===pa.arrangement?(pa.node.x0=qa-pa.visibleWidth/2,pa.node.x1=qa+pa.visibleWidth/2):("freeform"===pa.arrangement&&(pa.node.x0=qa-pa.visibleWidth/2,pa.node.x1=qa+pa.visibleWidth/2),oa=Math.max(0,Math.min(pa.size-pa.visibleHeight/2,oa)));pa.node.y0=
oa-pa.visibleHeight/2;pa.node.y1=oa+pa.visibleHeight/2;B(pa.node);"snap"!==pa.arrangement&&(pa.sankey.update(pa.graph),Y.filter(t(pa)).call(f),ea.attr("d",p()))}}).on("dragend",function(pa){if("fixed"!==pa.arrangement){pa.interactionState.dragInProgress=!1;for(var qa=0;qa<pa.node.childrenNodes.length;qa++)pa.node.childrenNodes[qa].x=pa.node.x,pa.node.childrenNodes[qa].y=pa.node.y;"snap"!==pa.arrangement&&x(pa,ca)}});Y.on(".drag",null).call(la)}function w(Y,ea,da,ca){G(da.graph.nodes);var la=da.graph.nodes.filter(function(pa){return pa.originalX===
da.node.originalX}).filter(function(pa){return!pa.partOfGroup});da.forceLayouts[ea]=O.forceSimulation(la).alphaDecay(0).force("collide",O.forceCollide().radius(function(pa){return pa.dy/2+da.nodePad/2}).strength(1).iterations(H.forceIterations)).force("constrain",C(Y,ea,la,da,ca)).stop()}function D(Y,ea,da,ca,la){window.requestAnimationFrame(function qa(){var oa;for(oa=0;oa<H.forceTicksPerFrame;oa++)da.forceLayouts[ca].tick();oa=da.graph.nodes;for(var ka=0;ka<oa.length;ka++)oa[ka].y0=oa[ka].y-oa[ka].dy/
2,oa[ka].y1=oa[ka].y0+oa[ka].dy,oa[ka].x0=oa[ka].x-oa[ka].dx/2,oa[ka].x1=oa[ka].x0+oa[ka].dx;da.sankey.update(da.graph);Y.filter(t(da)).call(f);ea.attr("d",p());0<da.forceLayouts[ca].alpha()?window.requestAnimationFrame(qa):(oa=da.node.originalX,da.node.x0=oa-da.visibleWidth/2,da.node.x1=oa+da.visibleWidth/2,x(da,la))})}function C(Y,ea,da,ca){return function(){for(var la=0,pa=0;pa<da.length;pa++){var qa=da[pa];qa===ca.interactionState.dragInProgress?(qa.x=qa.lastDraggedX,qa.y=qa.lastDraggedY):(qa.vx=
(qa.originalX-qa.x)/H.forceTicksPerFrame,qa.y=Math.min(ca.size-qa.dy/2,Math.max(qa.dy/2,qa.y)));la=Math.max(la,Math.abs(qa.vx),Math.abs(qa.vy))}!ca.interactionState.dragInProgress&&.1>la&&0<ca.forceLayouts[ea].alpha()&&ca.forceLayouts[ea].alpha(0)}}function x(Y,ea){for(var da=[],ca=[],la=0;la<Y.graph.nodes.length;la++){var pa=(Y.graph.nodes[la].y0+Y.graph.nodes[la].y1)/2;da.push((Y.graph.nodes[la].x0+Y.graph.nodes[la].x1)/2/Y.figure.width);ca.push(pa/Y.figure.height)}ba.call("_guiRestyle",ea,{"node.x":[da],
"node.y":[ca]},Y.trace.index).then(function(){ea._fullLayout._dragCover&&ea._fullLayout._dragCover.remove()})}function A(Y){var ea=[],da;for(da=0;da<Y.length;da++)Y[da].originalX=(Y[da].x0+Y[da].x1)/2,Y[da].originalY=(Y[da].y0+Y[da].y1)/2,-1===ea.indexOf(Y[da].originalX)&&ea.push(Y[da].originalX);ea.sort(function(ca,la){return ca-la});for(da=0;da<Y.length;da++)Y[da].originalLayerIndex=ea.indexOf(Y[da].originalX),Y[da].originalLayer=Y[da].originalLayerIndex/(ea.length-1)}function B(Y){Y.lastDraggedX=
Y.x0+Y.dx/2;Y.lastDraggedY=Y.y0+Y.dy/2}function t(Y){return function(ea){return ea.node.originalX===Y.node.originalX}}function G(Y){for(var ea=0;ea<Y.length;ea++)Y[ea].y=(Y[ea].y0+Y[ea].y1)/2,Y[ea].x=(Y[ea].x0+Y[ea].x1)/2}var H=b("./constants"),I=b("d3"),J=b("tinycolor2"),L=b("../../components/color"),E=b("../../components/drawing"),K=b("@plotly/d3-sankey"),N=b("@plotly/d3-sankey-circular"),O=b("d3-force"),Q=b("../../lib");F=b("../../lib/gup");var P=F.keyFun,T=F.repeat,V=F.unwrap,aa=b("d3-interpolate").interpolateNumber,
ba=b("../../registry");y.exports=function(Y,ea,da,ca,la){var pa=!1;Q.ensureSingle(Y._fullLayout._infolayer,"g","first-render",function(){pa=!0});var qa=Y._fullLayout._dragCover;da=da.filter(function(ka){return V(ka).trace.visible}).map(q.bind(null,ca));ea=ea.selectAll("."+H.cn.sankey).data(da,P);ea.exit().remove();ea.enter().append("g").classed(H.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",
"auto").attr("transform",l);ea.each(function(ka,ra){Y._fullData[ra]._sankey=ka;var ha="bgsankey-"+ka.trace.uid+"-"+ra;Q.ensureSingle(Y._fullLayout._draggers,"rect",ha);Y._fullData[ra]._bgRect=I.select("."+ha);Y._fullData[ra]._bgRect.style("pointer-events","all").attr("width",ka.width).attr("height",ka.height).attr("x",ka.translateX).attr("y",ka.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})});ea.transition().ease(H.ease).duration(H.duration).attr("transform",l);da=
ea.selectAll("."+H.cn.sankeyLinks).data(T,P);da.enter().append("g").classed(H.cn.sankeyLinks,!0).style("fill","none");ca=da.selectAll("."+H.cn.sankeyLink).data(function(ka){return ka.graph.links.filter(function(ra){return ra.value}).map(n.bind(null,ka))},P);ca.enter().append("path").classed(H.cn.sankeyLink,!0).call(u,ea,la.linkEvents);ca.style("stroke",function(ka){return 1<ka.link.width||0<ka.linkLineWidth?L.tinyRGB(J(ka.linkLineColor)):ka.tinyColorHue}).style("stroke-opacity",function(ka){return 1<
ka.link.width||0<ka.linkLineWidth?L.opacity(ka.linkLineColor):ka.tinyColorAlpha}).style("fill",function(ka){return ka.tinyColorHue}).style("fill-opacity",function(ka){return ka.tinyColorAlpha}).style("stroke-width",function(ka){return 1<ka.link.width||0<ka.linkLineWidth?ka.linkLineWidth:1}).attr("d",p());ca.style("opacity",function(){return Y._context.staticPlot||pa||qa?1:0}).transition().ease(H.ease).duration(H.duration).style("opacity",1);ca.exit().transition().ease(H.ease).duration(H.duration).style("opacity",
0).remove();da=ea.selectAll("."+H.cn.sankeyNodeSet).data(T,P);da.enter().append("g").classed(H.cn.sankeyNodeSet,!0);da.style("cursor",function(ka){switch(ka.arrangement){case "fixed":return"default";case "perpendicular":return"ns-resize";default:return"move"}});da=da.selectAll("."+H.cn.sankeyNode).data(function(ka){var ra=ka.graph.nodes;A(ra);return ra.map(h.bind(null,ka))},P);da.enter().append("g").classed(H.cn.sankeyNode,!0).call(a).style("opacity",function(ka){return!Y._context.staticPlot&&!pa||
ka.partOfGroup?0:1});da.call(u,ea,la.nodeEvents).call(v,ca,la,Y);da.transition().ease(H.ease).duration(H.duration).call(a).style("opacity",function(ka){return ka.partOfGroup?0:1});da.exit().transition().ease(H.ease).duration(H.duration).style("opacity",0).remove();la=da.selectAll("."+H.cn.nodeRect).data(T);la.enter().append("rect").classed(H.cn.nodeRect,!0).call(d);la.style("stroke-width",function(ka){return ka.nodeLineWidth}).style("stroke",function(ka){return L.tinyRGB(J(ka.nodeLineColor))}).style("stroke-opacity",
function(ka){return L.opacity(ka.nodeLineColor)}).style("fill",function(ka){return ka.tinyColorHue}).style("fill-opacity",function(ka){return ka.tinyColorAlpha});la.transition().ease(H.ease).duration(H.duration).call(d);la=da.selectAll("."+H.cn.nodeCapture).data(T);la.enter().append("rect").classed(H.cn.nodeCapture,!0).style("fill-opacity",0);la.attr("x",function(ka){return ka.zoneX}).attr("y",function(ka){return ka.zoneY}).attr("width",function(ka){return ka.zoneWidth}).attr("height",function(ka){return ka.zoneHeight});
la=da.selectAll("."+H.cn.nodeCentered).data(T);la.enter().append("g").classed(H.cn.nodeCentered,!0).attr("transform",k);la.transition().ease(H.ease).duration(H.duration).attr("transform",k);ea=la.selectAll("."+H.cn.nodeLabelGuide).data(T);ea.enter().append("path").classed(H.cn.nodeLabelGuide,!0).attr("id",function(ka){return ka.uniqueNodeLabelPathId}).attr("d",c).attr("transform",e);ea.transition().ease(H.ease).duration(H.duration).attr("d",c).attr("transform",e);var oa=la.selectAll("."+H.cn.nodeLabel).data(T);
oa.enter().append("text").classed(H.cn.nodeLabel,!0).attr("transform",g).style("user-select","none").style("cursor","default").style("fill","black");oa.style("text-shadow",function(ka){return ka.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(ka){E.font(oa,ka.textFont)});oa.transition().ease(H.ease).duration(H.duration).attr("transform",g);la=oa.selectAll("."+H.cn.nodeLabelTextPath).data(T);la.enter().append("textPath").classed(H.cn.nodeLabelTextPath,
!0).attr("alignment-baseline","middle").attr("xlink:href",function(ka){return"#"+ka.uniqueNodeLabelPathId}).attr("startOffset",r).style("fill",m);la.text(function(ka){return ka.horizontal||5<ka.node.dy?ka.node.label:""}).attr("text-anchor",function(ka){return ka.horizontal&&ka.left?"end":"start"});la.transition().ease(H.ease).duration(H.duration).attr("startOffset",r).style("fill",m)}},{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,"../../registry":880,
"./constants":1148,"@plotly/d3-sankey":56,"@plotly/d3-sankey-circular":55,d3:169,"d3-force":160,"d3-interpolate":162,tinycolor2:548}],1153:[function(b,y,F){y.exports=function(q,n){for(var p=[],h=q.cd[0].trace,a=h._sankey.graph.nodes,f=0;f<a.length;f++){var d=a[f];if(!d.partOfGroup){var l=[(d.x0+d.x1)/2,(d.y0+d.y1)/2];"v"===h.orientation&&l.reverse();n&&n.contains(l,!1,f,q)&&p.push({pointNumber:d.pointNumber})}}return p}},{}],1154:[function(b,y,F){var q=b("../../lib");y.exports=function(n,p){for(var h=
0;h<n.length;h++)n[h].i=h;q.mergeArray(p.text,n,"tx");q.mergeArray(p.texttemplate,n,"txt");q.mergeArray(p.hovertext,n,"htx");q.mergeArray(p.customdata,n,"data");q.mergeArray(p.textposition,n,"tp");p.textfont&&(q.mergeArrayCastPositive(p.textfont.size,n,"ts"),q.mergeArray(p.textfont.color,n,"tc"),q.mergeArray(p.textfont.family,n,"tf"));if(p=p.marker){q.mergeArrayCastPositive(p.size,n,"ms");q.mergeArrayCastPositive(p.opacity,n,"mo");q.mergeArray(p.symbol,n,"mx");q.mergeArray(p.color,n,"mc");if(h=p.line)q.mergeArray(h.color,
n,"mlc"),q.mergeArrayCastPositive(h.width,n,"mlw");(p=p.gradient)&&"none"!==p.type&&(q.mergeArray(p.type,n,"mgt"),q.mergeArray(p.color,n,"mgc"))}}},{"../../lib":749}],1155:[function(b,y,F){F=b("../../plots/template_attributes").texttemplateAttrs;var q=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../components/colorscale/attributes"),p=b("../../plots/font_attributes"),h=b("../../components/drawing/attributes").dash,a=b("../../components/drawing"),f=b("./constants");b=b("../../lib/extend").extendFlat;
y.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",
values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:F({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:q({},{keys:f.eventDataKeys}),
line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:b({},h,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},
fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:b({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",
dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:b({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},n("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},
n("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",
editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:p({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":622,"../../components/drawing":637,"../../components/drawing/attributes":636,
"../../lib/extend":739,"../../plots/font_attributes":825,"../../plots/template_attributes":875,"./constants":1159}],1156:[function(b,y,F){function q(r,u,v,w,D,C,x){var A=u._length,B=r._fullLayout;r=v._id;var t=w._id,G=B._firstScatter[h(u)]===u.uid;B=(a(u,B,v,w)||{}).orientation;var H=u.fill;v._minDtick=0;w._minDtick=0;var I={padded:!0},J={padded:!0};x&&(I.ppad=J.ppad=x);(x=2>A||D[0]!==D[A-1]||C[0]!==C[A-1])&&("tozerox"===H||"tonextx"===H&&(G||"h"===B))?I.tozero=!0:(u.error_y||{}).visible||"tonexty"!==
H&&"tozeroy"!==H&&(c.hasMarkers(u)||c.hasText(u))||(I.padded=!1,I.ppad=0);if(x&&("tozeroy"===H||"tonexty"===H&&(G||"v"===B)))J.tozero=!0;else if("tonextx"===H||"tozerox"===H)J.padded=!1;r&&(u._extremes[r]=l.findExtremes(v,D,I));t&&(u._extremes[t]=l.findExtremes(w,C,J))}function n(r,u){if(c.hasMarkers(r)){var v=r.marker,w=1.6*(r.marker.sizeref||1);var D="area"===r.marker.sizemode?function(x){return Math.max(Math.sqrt((x||0)/w),3)}:function(x){return Math.max((x||0)/w,3)};if(d.isArrayOrTypedArray(v.size)){v=
{type:"linear"};l.setConvert(v);r=v.makeCalcdata(r.marker,"size");v=Array(u);for(var C=0;C<u;C++)v[C]=D(r[C]);return v}return D(v.size)}}function p(r,u){var v=h(u);r=r._firstScatter;r[v]||(r[v]=u.uid)}function h(r){var u=r.stackgroup;return r.xaxis+r.yaxis+r.type+(u?"-"+u:"")}function a(r,u,v,w){if(r=r.stackgroup)if(u=u._scatterStackOpts[v._id+w._id][r],v="v"===u.orientation?w:v,"linear"===v.type||"log"===v.type)return u}var f=b("fast-isnumeric"),d=b("../../lib"),l=b("../../plots/cartesian/axes"),
k=b("../../constants/numerical").BADNUM,c=b("./subtypes"),e=b("./colorscale_calc"),g=b("./arrays_to_calcdata"),m=b("./calc_selection");y.exports={calc:function(r,u){var v=r._fullLayout,w=l.getFromId(r,u.xaxis||"x"),D=l.getFromId(r,u.yaxis||"y"),C=w.makeCalcdata(u,"x"),x=D.makeCalcdata(u,"y"),A=u._length,B=Array(A),t=u.ids,G=a(u,v,w,D),H=!1,I;p(v,u);v="x";var J="y";if(G){d.pushUnique(G.traceIndices,u._expandedIndex);if(I="v"===G.orientation){J="s";var L="x"}else v="s",L="y";var E="interpolate"===G.stackgaps}else{var K=
n(u,A);q(r,u,w,D,C,x,K)}for(w=0;w<A;w++){D=B[w]={};K=f(C[w]);var N=f(x[w]);K&&N?(D[v]=C[w],D[J]=x[w]):G&&(I?K:N)?(D[L]=I?C[w]:x[w],D.gap=!0,E?(D.s=k,H=!0):D.s=0):D[v]=D[J]=k;t&&(D.id=String(t[w]))}g(B,u);e(r,u);m(B,u);if(G){for(w=0;w<B.length;)B[w][L]===k?B.splice(w,1):w++;d.sort(B,function(O,Q){return O[L]-Q[L]||O.i-Q.i});if(H){for(w=0;w<B.length-1&&B[w].gap;)w++;C=B[w].s;C||(C=B[w].s=0);for(r=0;r<w;r++)B[r].s=C;for(u=B.length-1;u>w&&B[u].gap;)u--;C=B[u].s;for(r=B.length-1;r>u;r--)B[r].s=C;for(;w<
u;)if(w++,B[w].gap){for(r=w+1;B[r].gap;)r++;C=B[w-1][L];x=B[w-1].s;for(A=(B[r].s-x)/(B[r][L]-C);w<r;)B[w].s=x+(B[w][L]-C)*A,w++}}}return B},calcMarkerSize:n,calcAxisExpansion:q,setFirstScatter:p,getStackOpts:a}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"./arrays_to_calcdata":1154,"./calc_selection":1157,"./colorscale_calc":1158,"./subtypes":1179,"fast-isnumeric":241}],1157:[function(b,y,F){var q=b("../../lib");y.exports=function(n,p){q.isArrayOrTypedArray(p.selectedpoints)&&
q.tagSelected(n,p)}},{"../../lib":749}],1158:[function(b,y,F){var q=b("../../components/colorscale/helpers").hasColorscale,n=b("../../components/colorscale/calc"),p=b("./subtypes");y.exports=function(h,a){p.hasLines(a)&&q(a,"line")&&n(h,a,{vals:a.line.color,containerStr:"line",cLetter:"c"});p.hasMarkers(a)&&(q(a,"marker")&&n(h,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),q(a,"marker.line")&&n(h,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":623,
"../../components/colorscale/helpers":626,"./subtypes":1179}],1159:[function(b,y,F){y.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],1160:[function(b,y,F){function q(p,h,a,f,d,l,k){d[f]=!0;f={i:null,gap:!0,s:0};f[k]=a;p.splice(h,0,f);h&&a===p[h-1][k]?(a=p[h-1],f.s=a.s,f.i=a.i,f.gap=a.gap):l&&(l=p[h-1],a=(d=p[h+1])?l?l.s+(d.s-l.s)*(a-l[k])/(d[k]-l[k]):d.s:l.s,f.s=a);h||(p[0].t=p[1].t,p[0].trace=p[1].trace,delete p[1].t,delete p[1].trace)}var n=
b("./calc");y.exports=function(p,h){var a=h.xaxis;h=h.yaxis;var f=p._fullLayout._scatterStackOpts[a._id+h._id];if(f){var d=p.calcdata,l,k,c,e,g,m;for(m in f){var r=f[m];var u=r.traceIndices;if(u.length){var v="interpolate"===r.stackgaps;var w=r.groupnorm;if("v"===r.orientation){var D="x";var C="y"}else D="y",C="x";var x=Array(u.length);for(l=0;l<x.length;l++)x[l]=!1;var A=d[u[0]];var B=Array(A.length);for(l=0;l<A.length;l++)B[l]=A[l][D];for(l=1;l<u.length;l++){var t=d[u[l]];for(k=c=0;k<t.length;k++){for(g=
t[k][D];g>B[c]&&c<B.length;c++)q(t,k,B[c],l,x,v,D),k++;if(g!==B[c]){for(e=0;e<l;e++)q(d[u[e]],c,g,e,x,v,D);B.splice(c,0,g)}c++}for(;c<B.length;c++)q(t,k,B[c],l,x,v,D),k++}c=B.length;for(k=0;k<A.length;k++){e=A[k][C]=A[k].s;for(l=1;l<u.length;l++)t=d[u[l]],t[0].trace._rawLength=t[0].trace._length,t[0].trace._length=c,e+=t[k].s,t[k][C]=e;if(w)for(t=("fraction"===w?e:e/100)||1,l=0;l<u.length;l++)e=d[u[l]][k],e[C]/=t,e.sNorm=e.s/t}for(l=0;l<u.length;l++){t=d[u[l]];A=t[0].trace;w=n.calcMarkerSize(A,A._rawLength);
C=Array.isArray(w);if(w&&x[l]||C)for(e=w,w=Array(c),k=0;k<c;k++)w[k]=t[k].gap?0:C?e[t[k].i]:e;C=Array(c);e=Array(c);for(k=0;k<c;k++)C[k]=t[k].x,e[k]=t[k].y;n.calcAxisExpansion(p,A,a,h,C,e,w);t[0].t.orientation=r.orientation}}}}}},{"./calc":1156}],1161:[function(b,y,F){y.exports=function(q){for(var n=0;n<q.length;n++){var p=q[n];if("scatter"===p.type){var h=p.fill;if("none"!==h&&"toself"!==h&&(p.opacity=void 0,"tonexty"===h||"tonextx"===h))for(h=n-1;0<=h;h--){var a=q[h];if("scatter"===a.type&&a.xaxis===
p.xaxis&&a.yaxis===p.yaxis){a.opacity=void 0;break}}}}}},{}],1162:[function(b,y,F){var q=b("../../lib"),n=b("../../registry"),p=b("./attributes"),h=b("./constants"),a=b("./subtypes"),f=b("./xy_defaults"),d=b("./stack_defaults"),l=b("./marker_defaults"),k=b("./line_defaults"),c=b("./line_shape_defaults"),e=b("./text_defaults"),g=b("./fillcolor_defaults");y.exports=function(m,r,u,v){function w(x,A){return q.coerce(m,r,p,x,A)}var D=f(m,r,v,w);D||(r.visible=!1);if(r.visible){var C=d(m,r,v,w);D=!C&&D<
h.PTS_LINESONLY?"lines+markers":"lines";w("text");w("hovertext");w("mode",D);a.hasLines(r)&&(k(m,r,u,v,w),c(m,r,w),w("connectgaps"),w("line.simplify"));a.hasMarkers(r)&&l(m,r,u,v,w,{gradient:!0});a.hasText(r)&&(w("texttemplate"),e(m,r,v,w));v=[];if(a.hasMarkers(r)||a.hasText(r))w("cliponaxis"),w("marker.maxdisplayed"),v.push("points");w("fill",C?C.fillDflt:"none");"none"!==r.fill&&(g(m,r,u,w),a.hasLines(r)||c(m,r,w));C=(r.line||{}).color;D=(r.marker||{}).color;"tonext"!==r.fill&&"toself"!==r.fill||
v.push("fills");w("hoveron",v.join("+")||"points");"fills"!==r.hoveron&&w("hovertemplate");v=n.getComponentMethod("errorbars","supplyDefaults");v(m,r,C||D||u,{axis:"y"});v(m,r,C||D||u,{axis:"x",inherit:"y"});q.coerceSelectionMarkerOpacity(r,w)}}},{"../../lib":749,"../../registry":880,"./attributes":1155,"./constants":1159,"./fillcolor_defaults":1163,"./line_defaults":1168,"./line_shape_defaults":1170,"./marker_defaults":1174,"./stack_defaults":1177,"./subtypes":1179,"./text_defaults":1180,"./xy_defaults":1181}],
1163:[function(b,y,F){var q=b("../../components/color"),n=b("../../lib").isArrayOrTypedArray;y.exports=function(p,h,a,f){p=!1;if(h.marker){var d=h.marker.color,l=(h.marker.line||{}).color;d&&!n(d)?p=d:l&&!n(l)&&(p=l)}f("fillcolor",q.addOpacity((h.line||{}).color||p||a,.5))}},{"../../components/color":615,"../../lib":749}],1164:[function(b,y,F){var q=b("../../plots/cartesian/axes");y.exports=function(n,p,h){var a={},f={_fullLayout:h};h=q.getFromTrace(f,p,"x");p=q.getFromTrace(f,p,"y");a.xLabel=q.tickText(h,
n.x,!0).text;a.yLabel=q.tickText(p,n.y,!0).text;return a}},{"../../plots/cartesian/axes":797}],1165:[function(b,y,F){var q=b("../../components/color"),n=b("./subtypes");y.exports=function(p,h){if("lines"===p.mode)return(h=p.line.color)&&q.opacity(h)?h:p.fillcolor;if("none"===p.mode)return p.fill?p.fillcolor:"";var a=h.mcc||(p.marker||{}).color,f=h.mlcc||((p.marker||{}).line||{}).color;return(h=a&&q.opacity(a)?a:f&&q.opacity(f)&&(h.mlw||((p.marker||{}).line||{}).width)?f:"")?.3>q.opacity(h)?q.addOpacity(h,
.3):h:(h=(p.line||{}).color)&&q.opacity(h)&&n.hasLines(p)&&p.line.width?h:p.fillcolor}},{"../../components/color":615,"./subtypes":1179}],1166:[function(b,y,F){var q=b("../../lib"),n=b("../../components/fx"),p=b("../../registry"),h=b("./get_trace_color"),a=b("../../components/color"),f=q.fillText;y.exports=function(d,l,k,c){var e=d.cd,g=e[0].trace,m=d.xa,r=d.ya,u=m.c2p(l),v=r.c2p(k),w=[u,v];k=g.hoveron||"";var D=-1!==g.mode.indexOf("markers")?3:.5;if(-1!==k.indexOf("points")&&(l=function(H){var I=
Math.max(D,H.mrc||0),J=m.c2p(H.x)-u;H=r.c2p(H.y)-v;return Math.max(Math.sqrt(J*J+H*H)-I,1-D/I)},c=n.getDistanceFunction(c,function(H){var I=Math.max(3,H.mrc||0),J=1-1/I;H=Math.abs(m.c2p(H.x)-u);return H<I?J*H/I:H-I+J},function(H){var I=Math.max(3,H.mrc||0),J=1-1/I;H=Math.abs(r.c2p(H.y)-v);return H<I?J*H/I:H-I+J},l),n.getClosest(e,c,d),!1!==d.index)){c=e[d.index];k=m.c2p(c.x,!0);w=r.c2p(c.y,!0);var C=c.mrc||1;d.index=c.i;var x=e[0].t.orientation,A=x&&(c.sNorm||c.s);e="h"===x?A:c.x;x="v"===x?A:c.y;
q.extendFlat(d,{color:h(g,c),x0:k-C,x1:k+C,xLabelVal:e,y0:w-C,y1:w+C,yLabelVal:x,spikeDistance:l(c),hovertemplate:g.hovertemplate});f(c,g,d);p.getComponentMethod("errorbars","hoverInfo")(c,g,d);return[d]}if(-1!==k.indexOf("fills")&&g._polygons){C=g._polygons;c=[];x=!1;l=Infinity;e=-Infinity;A=Infinity;var B=-Infinity;for(k=0;k<C.length;k++){var t=C[k];t.contains(w)&&(x=!x,c.push(t),A=Math.min(A,t.ymin),B=Math.max(B,t.ymax))}if(x){A=Math.max(A,0);B=Math.min(B,r._length);w=(A+B)/2;for(k=0;k<c.length;k++)for(x=
c[k].pts,C=1;C<x.length;C++){t=x[C-1][1];var G=x[C][1];t>w!==G>=w&&(A=x[C-1][0],B=x[C][0],G-t&&(A+=(B-A)*(w-t)/(G-t),l=Math.min(l,A),e=Math.max(e,A)))}l=Math.max(l,0);e=Math.min(e,m._length);c=a.defaultLine;a.opacity(g.fillcolor)?c=g.fillcolor:a.opacity((g.line||{}).color)&&(c=g.line.color);q.extendFlat(d,{distance:d.maxHoverDistance,x0:l,x1:e,y0:w,y1:w,color:c,hovertemplate:!1});delete d.index;g.text&&!Array.isArray(g.text)?d.text=String(g.text):d.text=g.name;return[d]}}}},{"../../components/color":615,
"../../components/fx":655,"../../lib":749,"../../registry":880,"./get_trace_color":1165}],1167:[function(b,y,F){F=b("./subtypes");y.exports={hasLines:F.hasLines,hasMarkers:F.hasMarkers,hasText:F.hasText,isBubble:F.isBubble,attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./cross_trace_calc"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot"),colorbar:b("./marker_colorbar"),formatLabels:b("./format_labels"),
style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"./arrays_to_calcdata":1154,"./attributes":1155,"./calc":1156,"./cross_trace_calc":1160,"./cross_trace_defaults":1161,"./defaults":1162,"./format_labels":1164,"./hover":1166,
"./marker_colorbar":1173,"./plot":1175,"./select":1176,"./style":1178,"./subtypes":1179}],1168:[function(b,y,F){var q=b("../../lib").isArrayOrTypedArray,n=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/defaults");y.exports=function(h,a,f,d,l,k){var c=(h.marker||{}).color;l("line.color",f);n(h,"line")?p(h,a,d,l,{prefix:"line.",cLetter:"c"}):(h=(q(c)?!1:c)||f,l("line.color",h));l("line.width");(k||{}).noDash||l("line.dash")}},{"../../components/colorscale/defaults":625,
"../../components/colorscale/helpers":626,"../../lib":749}],1169:[function(b,y,F){F=b("../../constants/numerical");var q=F.BADNUM;F=F.LOG_CLIP;var n=F+.5,p=F-.5,h=b("../../lib"),a=h.segmentsIntersect,f=h.constrain,d=b("./constants");y.exports=function(l,k){function c(Xa){Xa=l[Xa];if(!Xa)return!1;var pb=k.linearized?B.l2p(Xa.x):B.c2p(Xa.x),db=k.linearized?t.l2p(Xa.y):t.c2p(Xa.y);if(pb===q){G&&(pb=B.c2p(Xa.x,!0));if(pb===q)return!1;H&&db===q&&(pb*=Math.abs(B._m*J*(0<B._m?n:p)/(t._m*I*(0<t._m?n:p))));
pb*=1E3}if(db===q){H&&(db=t.c2p(Xa.y,!0));if(db===q)return!1;db*=1E3}return[pb,db]}function e(Xa,pb,db,Ia){db-=Xa;Ia-=pb;Xa=.5-Xa;var Ua=.5-pb;pb=db*db+Ia*Ia;var $a=db*Xa+Ia*Ua;if(0<$a&&$a<pb&&(db=Xa*Ia-Ua*db,db*db<pb))return!0}function g(Xa,pb){var db=Xa[0]/I;Xa=Xa[1]/J;var Ia=Math.max(0,-db,db-1,-Xa,Xa-1);Ia&&void 0!==ea&&e(db,Xa,ea,da)&&(Ia=0);Ia&&pb&&e(db,Xa,pb[0]/I,pb[1]/J)&&(Ia=0);return(1+d.toleranceGrowth*Ia)*E}function m(Xa,pb){var db=Xa[0]-pb[0];Xa=Xa[1]-pb[1];return Math.sqrt(db*db+Xa*
Xa)}function r(Xa,pb){for(var db=[],Ia=0,Ua=0;4>Ua;Ua++){var $a=ka[Ua];($a=a(Xa[0],Xa[1],pb[0],pb[1],$a[0],$a[1],$a[2],$a[3]))&&(!Ia||1<Math.abs($a.x-db[0][0])||1<Math.abs($a.y-db[0][1]))&&($a=[$a.x,$a.y],Ia&&m($a,Xa)<m(db[0],Xa)?db.unshift($a):db.push($a),Ia++)}return db}function u(Xa){if(Xa[0]<la||Xa[0]>pa||Xa[1]<qa||Xa[1]>oa)return[f(Xa[0],la,pa),f(Xa[1],qa,oa)]}function v(Xa,pb){if(Xa[0]===pb[0]&&(Xa[0]===la||Xa[0]===pa)||Xa[1]===pb[1]&&(Xa[1]===qa||Xa[1]===oa))return!0}function w(Xa,pb){var db=
[];Xa=u(Xa);pb=u(pb);if(Xa&&pb&&v(Xa,pb))return db;Xa&&db.push(Xa);pb&&db.push(pb);return db}function D(Xa,pb,db){return function(Ia,Ua){var $a=u(Ia),xa=u(Ua),Ga=[];if($a&&xa&&v($a,xa))return Ga;$a&&Ga.push($a);xa&&Ga.push(xa);if(Ia=2*h.constrain((Ia[Xa]+Ua[Xa])/2,pb,db)-(($a||Ia)[Xa]+(xa||Ua)[Xa]))$a=$a&&xa?0<Ia===$a[Xa]>xa[Xa]?$a:xa:$a||xa,$a[Xa]+=Ia;return Ga}}function C(Xa){var pb=Xa[0],db=Xa[1],Ia=pb===V[aa-1][0],Ua=db===V[aa-1][1];if(!Ia||!Ua)if(1<aa){var $a=pb===V[aa-2][0],xa=db===V[aa-2][1];
Ia&&(pb===la||pb===pa)&&$a?xa?aa--:V[aa-1]=Xa:Ua&&(db===qa||db===oa)&&xa?$a?aa--:V[aa-1]=Xa:V[aa++]=Xa}else V[aa++]=Xa}function x(Xa){V[aa-1][0]!==Xa[0]&&V[aa-1][1]!==Xa[1]&&C([ma,wa]);C(Xa);Fa=null;ma=wa=0}function A(Xa){ea=Xa[0]/I;da=Xa[1]/J;ra=Xa[0]<la?la:Xa[0]>pa?pa:0;ha=Xa[1]<qa?qa:Xa[1]>oa?oa:0;if(ra||ha){if(aa)if(Fa){var pb=ya(Fa,Xa);1<pb.length&&(x(pb[0]),V[aa++]=pb[1])}else na=ya(V[aa-1],Xa)[0],V[aa++]=na;else V[aa++]=[ra||Xa[0],ha||Xa[1]];pb=V[aa-1];if(ra&&ha&&(pb[0]!==ra||pb[1]!==ha)){if(Fa)if(ma!==
ra&&wa!==ha)if(ma&&wa){pb=Xa[0]-Fa[0];var db=(Xa[1]-Fa[1])/pb;pb=0<(Fa[1]*Xa[0]-Xa[1]*Fa[0])/pb?[0<db?la:pa,oa]:[0<db?pa:la,qa];C(pb)}else C([ma||ra,wa||ha]);else ma&&wa&&C([ma,wa]);C([ra,ha])}else ma-ra&&wa-ha&&C([ra||ma,ha||wa]);Fa=Xa;ma=ra;wa=ha}else Fa&&x(ya(Fa,Xa)[0]),V[aa++]=Xa}var B=k.xaxis,t=k.yaxis,G="log"===B.type,H="log"===t.type,I=B._length,J=t._length,L=k.connectGaps,E=k.baseTolerance,K=k.shape,N="linear"===K,O=k.fill&&"none"!==k.fill,Q=[],P=d.minTolerance,T=l.length,V=Array(T),aa=0,
ba,Y,ea,da;var ca=d.maxScreensAway;var la=-I*ca,pa=I*(1+ca),qa=-J*ca,oa=J*(1+ca),ka=[[la,qa,pa,qa],[pa,qa,pa,oa],[pa,oa,la,oa],[la,oa,la,qa]],ra,ha,ma,wa,na,ya;"linear"===K||"spline"===K?ya=r:"hv"===K||"vh"===K?ya=w:"hvh"===K?ya=D(0,la,pa):"vhv"===K&&(ya=D(1,qa,oa));for(K=0;K<T;K++)if(ca=c(K)){aa=0;var Fa=null;A(ca);for(K++;K<T;K++){var Ha=c(K);if(!Ha)if(L)continue;else break;if(N&&k.simplify){var eb=c(K+1);var hb=m(Ha,ca);if(O&&(0===aa||aa===T-1)||!(hb<g(Ha,eb)*P)){var ob=[(Ha[0]-ca[0])/hb,(Ha[1]-
ca[1])/hb];var ib=ca;var Pa=hb;var sb=ba=Y=0;var tb=!1;hb=Ha;for(K++;K<l.length;K++){var Aa=eb;eb=c(K+1);if(!Aa)if(L)continue;else break;var Ka=[Aa[0]-ca[0],Aa[1]-ca[1]];var Qa=Ka[0]*ob[1]-Ka[1]*ob[0];ba=Math.min(ba,Qa);Y=Math.max(Y,Qa);if(Y-ba>g(Aa,eb))break;hb=Aa;Ka=Ka[0]*ob[0]+Ka[1]*ob[1];Ka>Pa?(Pa=Ka,Ha=Aa,tb=!1):Ka<sb&&(sb=Ka,ib=Aa,tb=!0)}tb?(A(Ha),hb!==ib&&A(ib)):(ib!==ca&&A(ib),hb!==Ha&&A(Ha));A(hb);if(K>=l.length||!Aa)break;A(Aa);ca=Aa}}else A(Ha)}Fa&&C([ma||Fa[0],wa||Fa[1]]);Q.push(V.slice(0,
aa))}return Q}},{"../../constants/numerical":724,"../../lib":749,"./constants":1159}],1170:[function(b,y,F){y.exports=function(q,n,p){"spline"===p("line.shape")&&p("line.smoothing")}},{}],1171:[function(b,y,F){var q={tonextx:1,tonexty:1,tonext:1};y.exports=function(n,p,h){var a,f={};var d=!1;var l=-1,k=0,c=-1;for(p=0;p<h.length;p++)n=h[p][0].trace,(a=n.stackgroup||"")?a in f?a=f[a]:(a=f[a]=k,k++):n.fill in q&&0<=c?a=c:(a=c=k,k++),a<l&&(d=!0),n._groupIndex=l=a;h=h.slice();d&&h.sort(function(e,g){e=
e[0].trace;g=g[0].trace;return e._groupIndex-g._groupIndex||e.index-g.index});f={};for(p=0;p<h.length;p++)n=h[p][0].trace,a=n.stackgroup||"",!0===n.visible?(n._nexttrace=null,n.fill in q&&(d=f[a],n._prevtrace=d||null,d&&(d._nexttrace=n)),n._ownfill=n.fill&&("tozero"===n.fill.substr(0,6)||"toself"===n.fill||"to"===n.fill.substr(0,2)&&!n._prevtrace),f[a]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return h}},{}],1172:[function(b,y,F){var q=b("fast-isnumeric");y.exports=function(n){n=n.marker;var p=
n.sizeref||1,h=n.sizemin||0,a="area"===n.sizemode?function(f){return Math.sqrt(f/p)}:function(f){return f/p};return function(f){f=a(f/2);return q(f)&&0<f?Math.max(f,h):0}}},{"fast-isnumeric":241}],1173:[function(b,y,F){y.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1174:[function(b,y,F){var q=b("../../components/color"),n=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/defaults"),h=b("./subtypes");y.exports=function(a,f,d,l,k,c){var e=h.isBubble(a),
g=(a.line||{}).color;c=c||{};g&&(d=g);k("marker.symbol");k("marker.opacity",e?.7:1);k("marker.size");k("marker.color",d);n(a,"marker")&&p(a,f,l,k,{prefix:"marker.",cLetter:"c"});c.noSelect||(k("selected.marker.color"),k("unselected.marker.color"),k("selected.marker.size"),k("unselected.marker.size"));c.noLine||(d=g&&!Array.isArray(g)&&f.marker.color!==g?g:e?q.background:q.defaultLine,k("marker.line.color",d),n(a,"marker.line")&&p(a,f,l,k,{prefix:"marker.line.",cLetter:"c"}),k("marker.line.width",
e?1:0));e&&(k("marker.sizeref"),k("marker.sizemin"),k("marker.sizemode"));c.gradient&&"none"!==k("marker.gradient.type")&&k("marker.gradient.color")}},{"../../components/color":615,"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"./subtypes":1179}],1175:[function(b,y,F){function q(r,u,v){u.each(function(w){var D=d(h.select(this),"g","fills");k.setClipUrl(D,v.layerClipId,r);var C=w[0].trace;w=[];C._ownfill&&w.push("_ownFill");C._nexttrace&&w.push("_nextFill");D=
D.selectAll("g").data(w,l);D.enter().append("g");D.exit().each(function(x){C[x]=null}).remove();D.order().each(function(x){C[x]=d(h.select(this),"path","js-fill")})})}function n(r,u,v,w,D,C,x){function A(ha){return L?ha.transition():ha}function B(ha){A(ha).attr("d","M0,0Z")}function t(ha){return ha.filter(function(ma){return!ma.gap&&ma.vis})}function G(ha){return ha.filter(function(ma){return ma.vis})}function H(ha){return ha.filter(function(ma){return!ma.gap})}function I(ha){return ha.id}function J(){return!1}
p(r,u,v,w,D);var L=!!x&&0<x.duration,E=v.xaxis,K=v.yaxis,N=w[0].trace,O=N.line,Q=h.select(C),P=d(Q,"g","errorbars");C=d(Q,"g","lines");u=d(Q,"g","points");D=d(Q,"g","text");a.getComponentMethod("errorbars","plot")(r,P,v,x);if(!0===N.visible){A(Q).style("opacity",N.opacity);var T=N.fill.charAt(N.fill.length-1);"x"!==T&&"y"!==T&&(T="");w[0][v.isRangePlot?"nodeRangePlot3":"node3"]=Q;x="";Q=[];if(P=N._prevtrace){x=P._prevRevpath||"";var V=P._nextFill;Q=P._polygons}var aa,ba,Y="",ea="",da=[];var ca=f.noop;
P=N._ownFill;if(c.hasLines(N)||"none"!==N.fill){V&&V.datum(w);if(-1!==["hv","vh","hvh","vhv"].indexOf(O.shape)){var la=k.steps(O.shape);var pa=k.steps(O.shape.split("").reverse().join(""))}else la="spline"===O.shape?pa=function(ha){var ma=ha[ha.length-1];return 1<ha.length&&ha[0][0]===ma[0]&&ha[0][1]===ma[1]?k.smoothclosed(ha.slice(1),O.smoothing):k.smoothopen(ha,O.smoothing)}:pa=function(ha){return"M"+ha.join("L")};var qa=function(ha){return pa(ha.reverse())};da=e(w,{xaxis:E,yaxis:K,connectGaps:N.connectgaps,
baseTolerance:Math.max(O.width||1,3)/4,shape:O.shape,simplify:O.simplify,fill:N.fill});var oa=N._polygons=Array(da.length);for(ca=0;ca<da.length;ca++)N._polygons[ca]=m(da[ca]);if(da.length){var ka=da[0][0];var ra=da[da.length-1];ra=ra[ra.length-1]}ca=function(ha){return function(ma){aa=la(ma);ba=qa(ma);Y?T?(Y+="L"+aa.substr(1),ea=ba+("L"+ea.substr(1))):(Y+="Z"+aa,ea=ba+"Z"+ea):(Y=aa,ea=ba);c.hasLines(N)&&1<ma.length&&(ma=h.select(this),ma.datum(w),ha?A(ma.style("opacity",0).attr("d",aa).call(k.lineGroupStyle)).style("opacity",
1):(ma=A(ma),ma.attr("d",aa),k.singleLineStyle(w,ma)))}}}C=C.selectAll(".js-line").data(da);A(C.exit()).style("opacity",0).remove();C.each(ca(!1));C.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(k.lineGroupStyle).each(ca(!0));k.setClipUrl(C,v.layerClipId,r);da.length?(P?(P.datum(w),ka&&ra&&(T?("y"===T?ka[1]=ra[1]=K.c2p(0,!0):"x"===T&&(ka[0]=ra[0]=E.c2p(0,!0)),A(P).attr("d","M"+ra+"L"+ka+"L"+Y.substr(1)).call(k.singleFillStyle)):A(P).attr("d",Y+"Z").call(k.singleFillStyle))):
V&&("tonext"===N.fill.substr(0,6)&&Y&&x?("tonext"===N.fill?A(V).attr("d",Y+"Z"+x+"Z").call(k.singleFillStyle):A(V).attr("d",Y+"L"+x.substr(1)+"Z").call(k.singleFillStyle),N._polygons=N._polygons.concat(Q)):(B(V),N._polygons=null)),N._prevRevpath=ea,N._prevPolygons=oa):(P?B(P):V&&B(V),N._polygons=N._prevRevpath=N._prevPolygons=null);u.datum(w);D.datum(w);(function(ha,ma,wa){var na,ya=wa[0].trace;wa=c.hasMarkers(ya);var Fa=c.hasText(ya);var Ha=ya.ids?I:void 0;var eb=J,hb=J;if(wa||Fa){var ob=l,ib=ya.stackgroup,
Pa=ib&&"infer zero"===r._fullLayout._scatterStackOpts[E._id+K._id][ib].stackgaps;ya.marker.maxdisplayed||ya._needsCull?ob=Pa?G:t:ib&&!Pa&&(ob=H);wa&&(eb=ob);Fa&&(hb=ob)}ha=ha.selectAll("path.point");ha=ha.data(eb,Ha);eb=ha.enter().append("path").classed("point",!0);L&&eb.call(k.pointStyle,ya,r).call(k.translatePoints,E,K).style("opacity",0).transition().style("opacity",1);ha.order();var sb;wa&&(sb=k.makePointStyleFns(ya));ha.each(function(tb){var Aa=h.select(this),Ka=A(Aa);(na=k.translatePoint(tb,
Ka,E,K))?(k.singlePointStyle(tb,Ka,ya,sb,r),v.layerClipId&&k.hideOutsideRangePoint(tb,Ka,E,K,ya.xcalendar,ya.ycalendar),ya.customdata&&Aa.classed("plotly-customdata",null!==tb.data&&void 0!==tb.data)):Ka.remove()});L?ha.exit().transition().style("opacity",0).remove():ha.exit().remove();ha=ma.selectAll("g");ha=ha.data(hb,Ha);ha.enter().append("g").classed("textpoint",!0).append("text");ha.order();ha.each(function(tb){var Aa=h.select(this),Ka=A(Aa.select("text"));(na=k.translatePoint(tb,Ka,E,K))?v.layerClipId&&
k.hideOutsideRangePoint(tb,Aa,E,K,ya.xcalendar,ya.ycalendar):Aa.remove()});ha.selectAll("text").call(k.textPointStyle,ya,r).each(function(tb){var Aa=E.c2p(tb.x),Ka=K.c2p(tb.y);h.select(this).selectAll("tspan.line").each(function(){A(h.select(this)).attr({x:Aa,y:Ka})})});ha.exit().remove()})(u,D,w);V=!1===N.cliponaxis?null:v.layerClipId;k.setClipUrl(u,V,r);k.setClipUrl(D,V,r)}}function p(r,u,v,w,D){r=v.xaxis;v=v.yaxis;var C=h.extent(f.simpleMap(r.range,r.r2c)),x=h.extent(f.simpleMap(v.range,v.r2c));
v=w[0].trace;if(c.hasMarkers(v)&&(v=v.marker.maxdisplayed,0!==v)){r=w.filter(function(G){return G.x>=C[0]&&G.x<=C[1]&&G.y>=x[0]&&G.y<=x[1]});var A=Math.ceil(r.length/v),B=0;D.forEach(function(G,H){G=G[0].trace;c.hasMarkers(G)&&0<G.marker.maxdisplayed&&H<u&&B++});var t=Math.round(B*A/3+Math.floor(B/3)*A/7.1);w.forEach(function(G){delete G.vis});r.forEach(function(G,H){0===Math.round((H+t)%A)&&(G.vis=!0)})}}var h=b("d3"),a=b("../../registry"),f=b("../../lib"),d=f.ensureSingle,l=f.identity,k=b("../../components/drawing"),
c=b("./subtypes"),e=b("./line_points"),g=b("./link_traces"),m=b("../../lib/polygon").tester;y.exports=function(r,u,v,w,D,C){var x,A=!D,B=!!D&&0<D.duration,t=g(r,u,v);v=w.selectAll("g.trace").data(t,function(G){return G[0].trace.uid});v.enter().append("g").attr("class",function(G){return"trace scatter trace"+G[0].trace.uid}).style("stroke-miterlimit",2);v.order();q(r,v,u);B?(C&&(x=C()),h.transition().duration(D.duration).ease(D.easing).each("end",function(){x&&x()}).each("interrupt",function(){x&&
x()}).each(function(){w.selectAll("g.trace").each(function(G,H){n(r,H,u,G,t,this,D)})})):v.each(function(G,H){n(r,H,u,G,t,this,D)});A&&v.exit().remove();w.selectAll("path:not([d])").remove()}},{"../../components/drawing":637,"../../lib":749,"../../lib/polygon":761,"../../registry":880,"./line_points":1169,"./link_traces":1171,"./subtypes":1179,d3:169}],1176:[function(b,y,F){var q=b("./subtypes");y.exports=function(n,p){var h=n.cd,a=n.xaxis,f=n.yaxis,d=[],l=h[0].trace;if(!q.hasMarkers(l)&&!q.hasText(l))return[];
if(!1===p)for(l=0;l<h.length;l++)h[l].selected=0;else for(l=0;l<h.length;l++){var k=h[l];var c=a.c2p(k.x);var e=f.c2p(k.y);null!==k.i&&p.contains([c,e],!1,l,n)?(d.push({pointNumber:k.i,x:a.c2d(k.x),y:f.c2d(k.y)}),k.selected=1):k.selected=0}return d}},{"./subtypes":1179}],1177:[function(b,y,F){var q=["orientation","groupnorm","stackgaps"];y.exports=function(n,p,h,a){h=h._scatterStackOpts;var f=a("stackgroup");if(f){var d=p.xaxis+p.yaxis,l=h[d];l||(l=h[d]={});h=l[f];d=!1;h?h.traces.push(p):(h=l[f]=
{traceIndices:[],traces:[p]},d=!0);p={orientation:p.x&&!p.y?"h":"v"};for(f=0;f<q.length;f++){l=q[f];var k=l+"Found";if(!h[k]){var c=void 0!==n[l],e="orientation"===l;if(c||d)if(h[l]=a(l,p[l]),e&&(h.fillDflt="h"===h[l]?"tonextx":"tonexty"),c&&(h[k]=!0,!d&&(delete h.traces[0][l],e)))for(l=0;l<h.traces.length-1;l++)k=h.traces[l],k._input.fill!==k.fill&&(k.fill=h.fillDflt)}}return h}}},{}],1178:[function(b,y,F){function q(f,d,l){h.pointStyle(f.selectAll("path.point"),d,l)}function n(f,d,l){h.textPointStyle(f.selectAll("text"),
d,l)}var p=b("d3"),h=b("../../components/drawing"),a=b("../../registry");y.exports={style:function(f){var d=p.select(f).selectAll("g.trace.scatter");d.style("opacity",function(l){return l[0].trace.opacity});d.selectAll("g.points").each(function(l){var k=p.select(this);q(k,l.trace||l[0].trace,f)});d.selectAll("g.text").each(function(l){var k=p.select(this);n(k,l.trace||l[0].trace,f)});d.selectAll("g.trace path.js-line").call(h.lineGroupStyle);d.selectAll("g.trace path.js-fill").call(h.fillGroupStyle);
a.getComponentMethod("errorbars","style")(d)},stylePoints:q,styleText:n,styleOnSelect:function(f,d,l){d=d[0].trace;d.selectedpoints?(h.selectedPointStyle(l.selectAll("path.point"),d),h.selectedTextStyle(l.selectAll("text"),d)):(q(l,d,f),n(l,d,f))}}},{"../../components/drawing":637,"../../registry":880,d3:169}],1179:[function(b,y,F){var q=b("../../lib");y.exports={hasLines:function(n){return n.visible&&n.mode&&-1!==n.mode.indexOf("lines")},hasMarkers:function(n){return n.visible&&(n.mode&&-1!==n.mode.indexOf("markers")||
"splom"===n.type)},hasText:function(n){return n.visible&&n.mode&&-1!==n.mode.indexOf("text")},isBubble:function(n){return q.isPlainObject(n.marker)&&q.isArrayOrTypedArray(n.marker.size)}}},{"../../lib":749}],1180:[function(b,y,F){var q=b("../../lib");y.exports=function(n,p,h,a,f){f=f||{};a("textposition");q.coerceFont(a,"textfont",h.font);f.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))}},{"../../lib":749}],1181:[function(b,y,F){var q=b("../../lib"),n=b("../../registry");
y.exports=function(p,h,a,f){var d=f("x"),l=f("y");n.getComponentMethod("calendars","handleTraceDefaults")(p,h,["x","y"],a);if(d)p=q.minRowLength(d),l?l=Math.min(p,q.minRowLength(l)):(l=p,f("y0"),f("dy"));else{if(!l)return 0;l=q.minRowLength(l);f("x0");f("dx")}return h._length=l}},{"../../lib":749,"../../registry":880}],1182:[function(b,y,F){function q(e){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}F=b("../scatter/attributes");
var n=b("../../components/colorscale/attributes"),p=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/template_attributes").texttemplateAttrs,a=b("../../plots/attributes"),f=b("../../constants/gl3d_dashes"),d=b("../../constants/gl3d_markers"),l=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var k=F.marker,c=k.line;f=l({width:F.line.width,dash:{valType:"enumerated",values:Object.keys(f),dflt:"solid"}},n("line"));y=y.exports=b({x:F.x,y:F.y,z:{valType:"data_array"},
text:l({},F.text,{}),texttemplate:h({},{}),hovertext:l({},F.hovertext,{}),hovertemplate:p(),mode:l({},F.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:q("x"),y:q("y"),z:q("z")},connectgaps:F.connectgaps,line:f,marker:l({symbol:{valType:"enumerated",values:Object.keys(d),dflt:"circle",arrayOk:!0},size:l({},k.size,{dflt:8}),sizeref:k.sizeref,sizemin:k.sizemin,sizemode:k.sizemode,opacity:l({},k.opacity,{arrayOk:!1}),
colorbar:k.colorbar,line:l({width:l({},c.width,{arrayOk:!1})},n("marker.line"))},n("marker")),textposition:l({},F.textposition,{dflt:"top center"}),textfont:{color:F.textfont.color,size:F.textfont.size,family:l({},F.textfont.family,{arrayOk:!1})},hoverinfo:l({},a.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":622,"../../constants/gl3d_dashes":721,"../../constants/gl3d_markers":722,"../../lib/extend":739,"../../plot_api/edit_types":780,
"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1183:[function(b,y,F){var q=b("../scatter/arrays_to_calcdata"),n=b("../scatter/colorscale_calc");y.exports=function(p,h){var a=[{x:!1,y:!1,trace:h,t:{}}];q(a,h);n(p,h);return a}},{"../scatter/arrays_to_calcdata":1154,"../scatter/colorscale_calc":1158}],1184:[function(b,y,F){function q(p,h,a,f){if(!h||!h.visible)return null;h=n.getComponentMethod("errorbars","makeComputeError")(h);for(var d=Array(p.length),
l=0;l<p.length;l++){var k=h(+p[l],l);if("log"===f.type){var c=f.c2l(p[l]),e=p[l]-k[0];k=p[l]+k[1];d[l]=[(f.c2l(e,!0)-c)*a,(f.c2l(k,!0)-c)*a];0<e&&(c=f.c2l(e),f._lowerLogErrorBound||(f._lowerLogErrorBound=c),f._lowerErrorBound=Math.min(f._lowerLogErrorBound,c))}else d[l]=[-k[0]*a,k[1]*a]}return d}var n=b("../../registry");y.exports=function(p,h,a){p=[q(p.x,p.error_x,h[0],a.xaxis),q(p.y,p.error_y,h[1],a.yaxis),q(p.z,p.error_z,h[2],a.zaxis)];a:{for(h=0;h<p.length;h++)if(p[h]){h=p[h].length;break a}h=
0}if(0===h)return null;a=Array(h);for(var f=0;f<h;f++){for(var d=[[0,0,0],[0,0,0]],l=0;3>l;l++)if(p[l])for(var k=0;2>k;k++)d[k][l]=p[l][f][k];a[f]=d}return a}},{"../../registry":880}],1185:[function(b,y,F){function q(H,I){this.scene=H;this.uid=I;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode="";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=null}function n(H){for(var I=
[0,0,0],J=[[0,0,0],[0,0,0],[0,0,0]],L=[1,1,1],E=0;3>E;E++){var K=H[E];K&&!1!==K.copy_zstyle&&!1!==H[2].visible&&(K=H[2]);K&&K.visible&&(I[E]=K.width/2,J[E]=w(K.color),L[E]=K.thickness)}return{capSize:I,color:J,lineWidth:L}}function p(H){return null===H||void 0===H?0:-1<H.indexOf("left")?-1:-1<H.indexOf("right")?1:0}function h(H){return null===H||void 0===H?0:-1<H.indexOf("top")?-1:-1<H.indexOf("bottom")?1:0}function a(H){var I=[0,0];if(Array.isArray(H))for(var J=0;J<H.length;J++)I[J]=[0,0],H[J]&&
(I[J][0]=p(H[J]),I[J][1]=h(H[J]));else I[0]=p(H),I[1]=h(H);return I}function f(H,I){return I(4*H)}function d(H){return A[H]}function l(H,I,J,L,E){if(v.isArrayOrTypedArray(H)){var K=[];for(var N=0;N<I;N++)K[N]=void 0===H[N]?L:J(H[N],E)}else K=J(H,v.identity);return K}function k(H,I){function J(ha,ma){ha=E[ha];return B.tickText(ha,ha.d2l(ma),!0).text}var L=[],E=H.fullSceneLayout,K=H.dataScale,N=E.xaxis,O=E.yaxis,Q=E.zaxis,P=I.marker,T=I.line,V=I.x||[],aa=I.y||[],ba=I.z||[],Y=V.length,ea=I.xcalendar,
da=I.ycalendar,ca=I.zcalendar,la;for(la=0;la<Y;la++){var pa=N.d2l(V[la],0,ea)*K[0];var qa=O.d2l(aa[la],0,da)*K[1];var oa=Q.d2l(ba[la],0,ca)*K[2];L[la]=[pa,qa,oa]}if(Array.isArray(I.text))var ka=I.text;else if(void 0!==I.text)for(ka=Array(Y),la=0;la<Y;la++)ka[la]=I.text;var ra=I.texttemplate;if(ra)for(H=H.fullLayout._d3locale,N=(la=Array.isArray(ra))?Math.min(ra.length,Y):Y,O=la?function(ha){return ra[ha]}:function(){return ra},ka=Array(N),la=0;la<N;la++)Q={x:V[la],y:aa[la],z:ba[la]},ea={xLabel:J("xaxis",
V[la]),yLabel:J("yaxis",aa[la]),zLabel:J("zaxis",ba[la])},da={},t(da,I,la),ca=I._meta||{},ka[la]=v.texttemplateString(O(la),ea,H,da,Q,ca);L={position:L,mode:I.mode,text:ka};"line"in I&&(L.lineColor=D(T,1,Y),L.lineWidth=T.width,L.lineDashes=T.dash);"marker"in I&&(la=C(I),L.scatterColor=D(P,1,Y),L.scatterSize=l(P.size,Y,f,20,la),L.scatterMarker=l(P.symbol,Y,d,""),L.scatterLineWidth=P.line.width,L.scatterLineColor=D(P.line,1,Y),L.scatterAngle=0);"textposition"in I&&(L.textOffset=a(I.textposition),L.textColor=
D(I.textfont,1,Y),L.textSize=l(I.textfont.size,Y,v.identity,12),L.textFont=I.textfont.family,L.textAngle=0);P=["x","y","z"];L.project=[!1,!1,!1];L.projectScale=[1,1,1];L.projectOpacity=[1,1,1];for(la=0;3>la;++la)if(Y=I.projection[P[la]],L.project[la]=Y.show)L.projectOpacity[la]=Y.opacity,L.projectScale[la]=Y.scale;L.errorBounds=G(I,K,E);K=n([I.error_x,I.error_y,I.error_z]);L.errorColor=K.color;L.errorLineWidth=K.lineWidth;L.errorCapSize=K.capSize;L.delaunayAxis=I.surfaceaxis;L.delaunayColor=w(I.surfacecolor);
return L}function c(H){if(Array.isArray(H)){var I=H[0];Array.isArray(I)&&(H=I);return"rgb("+H.slice(0,3).map(function(J){return Math.round(255*J)})+")"}return null}var e=b("gl-line3d"),g=b("gl-scatter3d"),m=b("gl-error3d"),r=b("gl-mesh3d"),u=b("delaunay-triangulate"),v=b("../../lib"),w=b("../../lib/str2rgbarray"),D=b("../../lib/gl_format_color").formatColor,C=b("../scatter/make_bubble_size_func"),x=b("../../constants/gl3d_dashes"),A=b("../../constants/gl3d_markers"),B=b("../../plots/cartesian/axes"),
t=b("../../components/fx/helpers").appendArrayPointValue,G=b("./calc_errors");b=q.prototype;b.handlePick=function(H){if(H.object&&(H.object===this.linePlot||H.object===this.delaunayMesh||H.object===this.textMarkers||H.object===this.scatterPlot)){var I=H.index=H.data.index;H.object.highlight&&H.object.highlight(null);this.scatterPlot&&(H.object=this.scatterPlot,this.scatterPlot.highlight(H.data));H.textLabel="";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[I]||0===this.textLabels[I])H.textLabel=
this.textLabels[I]}else H.textLabel=this.textLabels;H.traceCoordinate=[this.data.x[I],this.data.y[I],this.data.z[I]];return!0}};b.update=function(H){var I=this.scene.glplot.gl;var J=x.solid;this.data=H;var L=k(this.scene,H);"mode"in L&&(this.mode=L.mode);"lineDashes"in L&&L.lineDashes in x&&(J=x[L.lineDashes]);this.color=c(L.scatterColor)||c(L.lineColor);this.dataPoints=L.position;J={gl:this.scene.glplot.gl,position:L.position,color:L.lineColor,lineWidth:L.lineWidth||1,dashes:J[0],dashScale:J[1],
opacity:H.opacity,connectGaps:H.connectgaps};-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(J):(this.linePlot=e(J),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);J=H.opacity;H.marker&&H.marker.opacity&&(J*=H.marker.opacity);J={gl:this.scene.glplot.gl,position:L.position,color:L.scatterColor,size:L.scatterSize,glyph:L.scatterMarker,opacity:J,orthographic:!0,lineWidth:L.scatterLineWidth,
lineColor:L.scatterLineColor,project:L.project,projectScale:L.projectScale,projectOpacity:L.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(J):(this.scatterPlot=g(J),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null);J={gl:this.scene.glplot.gl,position:L.position,glyph:L.text,color:L.textColor,
size:L.textSize,angle:L.textAngle,alignment:L.textOffset,font:L.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:H.opacity};this.textLabels=H.hovertext||H.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(J):(this.textMarkers=g(J),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null);J={gl:this.scene.glplot.gl,
position:L.position,color:L.errorColor,error:L.errorBounds,lineWidth:L.errorLineWidth,capSize:L.errorCapSize,opacity:H.opacity};this.errorBars?L.errorBounds?this.errorBars.update(J):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):L.errorBounds&&(this.errorBars=m(J),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars));if(0<=L.delaunayAxis){J=L.position;var E=L.delaunayColor;L=L.delaunayAxis;var K=(L+1)%3,N=(L+2)%3,O=[];L=[];var Q;for(Q=0;Q<J.length;++Q){var P=
J[Q];!isNaN(P[K])&&isFinite(P[K])&&!isNaN(P[N])&&isFinite(P[N])&&(O.push([P[K],P[N]]),L.push(Q))}K=u(O);for(Q=0;Q<K.length;++Q)for(N=K[Q],O=0;O<N.length;++O)N[O]=L[N[O]];J={positions:J,cells:K,meshColor:E};J.opacity=H.opacity;this.delaunayMesh?this.delaunayMesh.update(J):(J.gl=I,this.delaunayMesh=r(J),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};b.dispose=
function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};y.exports=function(H,I){H=new q(H,I.uid);H.update(I);
return H}},{"../../components/fx/helpers":651,"../../constants/gl3d_dashes":721,"../../constants/gl3d_markers":722,"../../lib":749,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"../scatter/make_bubble_size_func":1172,"./calc_errors":1184,"delaunay-triangulate":171,"gl-error3d":264,"gl-line3d":271,"gl-mesh3d":292,"gl-scatter3d":308}],1186:[function(b,y,F){function q(k,c,e,g){var m=0,r=e("x"),u=e("y");e=e("z");n.getComponentMethod("calendars","handleTraceDefaults")(k,
c,["x","y","z"],g);r&&u&&e&&(m=Math.min(r.length,u.length,e.length),c._length=c._xlength=c._ylength=c._zlength=m);return m}var n=b("../../registry"),p=b("../../lib"),h=b("../scatter/subtypes"),a=b("../scatter/marker_defaults"),f=b("../scatter/line_defaults"),d=b("../scatter/text_defaults"),l=b("./attributes");y.exports=function(k,c,e,g){function m(D,C){return p.coerce(k,c,l,D,C)}if(q(k,c,m,g)){m("text");m("hovertext");m("hovertemplate");m("mode");h.hasLines(c)&&(m("connectgaps"),f(k,c,e,g,m));h.hasMarkers(c)&&
a(k,c,e,g,m,{noSelect:!0});h.hasText(c)&&(m("texttemplate"),d(k,c,g,m,{noSelect:!0}));g=(c.line||{}).color;var r=(c.marker||{}).color;0<=m("surfaceaxis")&&m("surfacecolor",g||r);for(var u=["x","y","z"],v=0;3>v;++v){var w="projection."+u[v];m(w+".show")&&(m(w+".opacity"),m(w+".scale"))}u=n.getComponentMethod("errorbars","supplyDefaults");u(k,c,g||r||e,{axis:"z"});u(k,c,g||r||e,{axis:"y",inherit:"z"});u(k,c,g||r||e,{axis:"x",inherit:"z"})}else c.visible=!1}},{"../../lib":749,"../../registry":880,"../scatter/line_defaults":1168,
"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1182}],1187:[function(b,y,F){y.exports={plot:b("./convert"),attributes:b("./attributes"),markerSymbols:b("../../constants/gl3d_markers"),supplyDefaults:b("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:b("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","symbols","showLegend",
"scatter-like"],meta:{}}},{"../../constants/gl3d_markers":722,"../../plots/gl3d":839,"./attributes":1182,"./calc":1183,"./convert":1185,"./defaults":1186}],1188:[function(b,y,F){F=b("../scatter/attributes");var q=b("../../plots/attributes"),n=b("../../plots/template_attributes").hovertemplateAttrs,p=b("../../plots/template_attributes").texttemplateAttrs,h=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var a=F.marker,f=F.line,d=a.line;y.exports={carpet:{valType:"string",
editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:b({},F.mode,{dflt:"markers"}),text:b({},F.text,{}),texttemplate:p({editType:"plot"},{keys:["a","b","text"]}),hovertext:b({},F.hovertext,{}),line:{color:f.color,width:f.width,dash:f.dash,shape:b({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:F.connectgaps,fill:b({},F.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:F.fillcolor,marker:b({symbol:a.symbol,
opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:b({width:d.width,editType:"calc"},h("marker.line")),gradient:a.gradient,editType:"calc"},h("marker")),textfont:F.textfont,textposition:F.textposition,selected:F.selected,unselected:F.unselected,hoverinfo:b({},q.hoverinfo,{flags:["a","b","text","name"]}),hoveron:F.hoveron,hovertemplate:n()}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,
"../../plots/template_attributes":875,"../scatter/attributes":1155}],1189:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../scatter/colorscale_calc"),p=b("../scatter/arrays_to_calcdata"),h=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,f=b("../carpet/lookup_carpetid");y.exports=function(d,l){var k=l._carpetTrace=f(d,l);if(k&&k.visible&&"legendonly"!==k.visible){var c;l.xaxis=k.xaxis;l.yaxis=k.yaxis;var e=l._length,g=Array(e),m=!1;for(c=0;c<e;c++){var r=l.a[c];var u=l.b[c];if(q(r)&&
q(u)){var v=k.ab2xy(+r,+u,!0),w=k.isVisible(+r,+u);w||(m=!0);g[c]={x:v[0],y:v[1],a:r,b:u,vis:w}}else g[c]={x:!1,y:!1}}l._needsCull=m;g[0].carpet=k;g[0].trace=l;a(l,e);n(d,l);p(g,l);h(g,l);return g}}},{"../carpet/lookup_carpetid":950,"../scatter/arrays_to_calcdata":1154,"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1190:[function(b,y,F){var q=b("../../lib"),n=b("../scatter/constants"),p=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),
a=b("../scatter/line_defaults"),f=b("../scatter/line_shape_defaults"),d=b("../scatter/text_defaults"),l=b("../scatter/fillcolor_defaults"),k=b("./attributes");y.exports=function(c,e,g,m){function r(w,D){return q.coerce(c,e,k,w,D)}r("carpet");e.xaxis="x";e.yaxis="y";var u=r("a"),v=r("b");if(u=Math.min(u.length,v.length)){e._length=u;r("text");r("texttemplate");r("hovertext");r("mode",u<n.PTS_LINESONLY?"lines+markers":"lines");p.hasLines(e)&&(a(c,e,g,m,r),f(c,e,r),r("connectgaps"));p.hasMarkers(e)&&
h(c,e,g,m,r,{gradient:!0});p.hasText(e)&&d(c,e,m,r);m=[];if(p.hasMarkers(e)||p.hasText(e))r("marker.maxdisplayed"),m.push("points");r("fill");"none"!==e.fill&&(l(c,e,g,r),p.hasLines(e)||f(c,e,r));"tonext"!==e.fill&&"toself"!==e.fill||m.push("fills");"fills"!==r("hoveron",m.join("+")||"points")&&r("hovertemplate");q.coerceSelectionMarkerOpacity(e,r)}else e.visible=!1}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,
"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1188}],1191:[function(b,y,F){y.exports=function(q,n,p,h,a){n=h[a];q.a=n.a;q.b=n.b;q.y=n.y;return q}},{}],1192:[function(b,y,F){y.exports=function(q,n){var p={};n=n._carpet;q=n.ab2ij([q.a,q.b]);var h=Math.floor(q[0]),a=Math.floor(q[1]);n=n.evalxy([],h,a,q[0]-h,q[1]-a);p.yLabel=n[1].toFixed(3);return p}},{}],1193:[function(b,y,F){var q=b("../scatter/hover"),n=b("../../lib").fillText;y.exports=
function(p,h,a,f){function d(e,g){var m=e.labelprefix&&0<e.labelprefix.length?e.labelprefix.replace(/ = $/,""):e._hovertitle;c.push(m+": "+g.toFixed(3)+e.labelsuffix)}if((h=q(p,h,a,f))&&!1!==h[0].index){a=h[0];if(void 0===a.index)return f=p.xa._length,p=f*(1-a.y0/p.ya._length)/2,f-=p,a.x0=Math.max(Math.min(a.x0,f),p),a.x1=Math.max(Math.min(a.x1,f),p),h;p=a.cd[a.index];a.a=p.a;a.b=p.b;a.xLabelVal=void 0;a.yLabelVal=void 0;f=a.trace;var l=f._carpet,k=f._module.formatLabels(p,f);a.yLabel=k.yLabel;delete a.text;
var c=[];f.hovertemplate||(k=(p.hi||f.hoverinfo).split("+"),-1!==k.indexOf("all")&&(k=["a","b","text"]),-1!==k.indexOf("a")&&d(l.aaxis,p.a),-1!==k.indexOf("b")&&d(l.baxis,p.b),c.push("y: "+a.yLabel),-1!==k.indexOf("text")&&n(p,f,c),a.extraText=c.join("\x3cbr\x3e"));return h}}},{"../../lib":749,"../scatter/hover":1166}],1194:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),
plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:b("../../plots/cartesian"),categories:"svg carpet symbols showLegend carpetDependent zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"../scatter/marker_colorbar":1173,"../scatter/select":1176,"../scatter/style":1178,"./attributes":1188,"./calc":1189,
"./defaults":1190,"./event_data":1191,"./format_labels":1192,"./hover":1193,"./plot":1195}],1195:[function(b,y,F){var q=b("../scatter/plot"),n=b("../../plots/cartesian/axes"),p=b("../../components/drawing");y.exports=function(h,a,f,d){var l=f[0][0].carpet;a={xaxis:n.getFromId(h,l.xaxis||"x"),yaxis:n.getFromId(h,l.yaxis||"y"),plot:a.plot};q(h,a,f,d);for(a=0;a<f.length;a++)l=f[a][0].trace,l=d.selectAll("g.trace"+l.uid+" .js-line"),p.setClipUrl(l,f[a][0].carpet._clipPathId,h)}},{"../../components/drawing":637,
"../../plots/cartesian/axes":797,"../scatter/plot":1175}],1196:[function(b,y,F){F=b("../../plots/template_attributes").hovertemplateAttrs;var q=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scatter/attributes"),p=b("../../plots/attributes"),h=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash,f=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var d=n.marker,l=n.line,k=d.line;y.exports=b({lon:{valType:"data_array"},
lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:f({},n.mode,{dflt:"markers"}),text:f({},n.text,{}),texttemplate:q({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:f({},n.hovertext,{}),textfont:n.textfont,textposition:n.textposition,line:{color:l.color,width:l.width,
dash:a},connectgaps:n.connectgaps,marker:f({symbol:d.symbol,opacity:d.opacity,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,colorbar:d.colorbar,line:f({width:k.width},h("marker.line")),gradient:d.gradient},h("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:n.fillcolor,selected:n.selected,unselected:n.unselected,hoverinfo:f({},p.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:F()},"calc","nested")},{"../../components/colorscale/attributes":622,
"../../components/drawing/attributes":636,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1197:[function(b,y,F){function q(l){return l&&"string"===typeof l}var n=b("fast-isnumeric"),p=b("../../constants/numerical").BADNUM,h=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),f=b("../scatter/calc_selection"),d=b("../../lib")._;y.exports=function(l,k){var c=Array.isArray(k.locations),
e=c?k.locations.length:k._length,g=Array(e);var m=k.geojson?function(D){return q(D)||n(D)}:q;for(var r=0;r<e;r++){var u=g[r]={};if(c){var v=k.locations[r];u.loc=m(v)?v:null}else{v=k.lon[r];var w=k.lat[r];n(v)&&n(w)?u.lonlat=[+v,+w]:u.lonlat=[p,p]}}a(g,k);h(l,k);f(g,k);e&&(g[0].t={labels:{lat:d(l,"lat:")+" ",lon:d(l,"lon:")+" "}});return g}},{"../../constants/numerical":724,"../../lib":749,"../scatter/arrays_to_calcdata":1154,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],
1198:[function(b,y,F){var q=b("../../lib"),n=b("../scatter/subtypes"),p=b("../scatter/marker_defaults"),h=b("../scatter/line_defaults"),a=b("../scatter/text_defaults"),f=b("../scatter/fillcolor_defaults"),d=b("./attributes");y.exports=function(l,k,c,e){function g(v,w){return q.coerce(l,k,d,v,w)}var m=g("locations");if(m&&m.length){var r=g("geojson");if("string"===typeof r&&""!==r||q.isPlainObject(r))var u="geojson-id";"geojson-id"===g("locationmode",u)&&g("featureidkey");m=m.length}else m=g("lon")||
[],r=g("lat")||[],m=Math.min(m.length,r.length);m?(k._length=m,g("text"),g("hovertext"),g("hovertemplate"),g("mode"),n.hasLines(k)&&(h(l,k,c,e,g),g("connectgaps")),n.hasMarkers(k)&&p(l,k,c,e,g,{gradient:!0}),n.hasText(k)&&(g("texttemplate"),a(l,k,e,g)),g("fill"),"none"!==k.fill&&f(l,k,c,g),q.coerceSelectionMarkerOpacity(k,g)):k.visible=!1}},{"../../lib":749,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,
"./attributes":1196}],1199:[function(b,y,F){y.exports=function(q,n,p,h,a){q.lon=n.lon;q.lat=n.lat;q.location=n.loc?n.loc:null;n=h[a];n.fIn&&n.fIn.properties&&(q.properties=n.fIn.properties);return q}},{}],1200:[function(b,y,F){var q=b("../../plots/cartesian/axes");y.exports=function(n,p,h){var a={};p=h[p.geo]._subplot.mockAxis;n=n.lonlat;a.lonLabel=q.tickText(p,p.c2l(n[0]),!0).text;a.latLabel=q.tickText(p,p.c2l(n[1]),!0).text;return a}},{"../../plots/cartesian/axes":797}],1201:[function(b,y,F){function q(d,
l,k,c){if(!d.hovertemplate){var e=l.hi||d.hoverinfo,g="all"===e?f.hoverinfo.flags:e.split("+");e=-1!==g.indexOf("location")&&Array.isArray(d.locations);var m=-1!==g.indexOf("lon"),r=-1!==g.indexOf("lat");g=-1!==g.indexOf("text");var u=[];e?u.push(l.loc):m&&r?u.push("("+(k.lonLabel+", ")+(k.latLabel+")")):m?u.push(c.lon+(k.lonLabel+"")):r&&u.push(c.lat+(k.latLabel+""));g&&a(l,d,u);return u.join("\x3cbr\x3e")}}var n=b("../../components/fx"),p=b("../../constants/numerical").BADNUM,h=b("../scatter/get_trace_color"),
a=b("../../lib").fillText,f=b("./attributes");y.exports=function(d,l,k){var c=d.cd,e=c[0].trace,g=d.xa,m=d.ya,r=d.subplot,u=r.projection.isLonLatOverEdges,v=r.project;n.getClosest(c,function(C){var x=C.lonlat;if(x[0]===p||u(x))return Infinity;var A=v(x),B=v([l,k]);x=Math.abs(A[0]-B[0]);A=Math.abs(A[1]-B[1]);C=Math.max(3,C.mrc||0);return Math.max(Math.sqrt(x*x+A*A)-C,1-3/C)},d);if(!1!==d.index){var w=c[d.index],D=w.lonlat;g=[g.c2p(D),m.c2p(D)];m=w.mrc||1;d.x0=g[0]-m;d.x1=g[0]+m;d.y0=g[1]-m;d.y1=g[1]+
m;d.loc=w.loc;d.lon=D[0];d.lat=D[1];D={};D[e.geo]={_subplot:r};r=e._module.formatLabels(w,e,D);d.lonLabel=r.lonLabel;d.latLabel=r.latLabel;d.color=h(e,w);d.extraText=q(e,w,d,c[0].t.labels);d.hovertemplate=e.hovertemplate;return[d]}}},{"../../components/fx":655,"../../constants/numerical":724,"../../lib":749,"../scatter/get_trace_color":1165,"./attributes":1196}],1202:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),
calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:b("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":829,"../scatter/marker_colorbar":1173,"../scatter/style":1178,"./attributes":1196,"./calc":1197,"./defaults":1198,"./event_data":1199,
"./format_labels":1200,"./hover":1201,"./plot":1203,"./select":1204,"./style":1205}],1203:[function(b,y,F){var q=b("d3"),n=b("../../lib"),p=b("../../lib/topojson_utils").getTopojsonFeatures,h=b("../../lib/geojson_utils"),a=b("../../lib/geo_location_utils"),f=b("../../plots/cartesian/autorange").findExtremes,d=b("../../constants/numerical").BADNUM,l=b("../scatter/calc").calcMarkerSize,k=b("../scatter/subtypes"),c=b("./style");y.exports={calcGeoJSON:function(e,g){var m=e[0].trace;g=g[m.geo];var r=g._subplot,
u=m._length;if(Array.isArray(m.locations)){var v=m.locationmode,w="geojson-id"===v?a.extractTraceFeature(e):p(m,r.topojson);for(r=0;r<u;r++){var D=e[r];var C="geojson-id"===v?D.fOut:a.locationToFeature(v,D.loc,w);D.lonlat=C?C.properties.ct:[d,d]}}v={padded:!0};if("geojson"===g.fitbounds&&"geojson-id"===m.locationmode)e=a.computeBbox(a.getTraceGeojson(m)),w=[e[0],e[2]],C=[e[1],e[3]];else{w=Array(u);C=Array(u);for(r=0;r<u;r++)D=e[r],w[r]=D.lonlat[0],C[r]=D.lonlat[1];v.ppad=l(m,u)}m._extremes.lon=f(g.lonaxis._ax,
w,v);m._extremes.lat=f(g.lataxis._ax,C,v)},plot:function(e,g,m){g=g.layers.frontplot.select(".scatterlayer");m=n.makeTraceGroups(g,m,"trace scattergeo");m.selectAll("*").remove();m.each(function(r){var u=q.select(this),v=r[0].trace;if(k.hasLines(v)||"none"!==v.fill){var w=h.calcTraceToLineCoords(r);w="none"!==v.fill?h.makePolygon(w):h.makeLine(w);u.selectAll("path.js-line").data([{geojson:w,trace:v}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}k.hasMarkers(v)&&u.selectAll("path.point").data(n.identity).enter().append("path").classed("point",
!0).each(function(D){D.lonlat[0]===d&&q.select(this).remove()});k.hasText(v)&&u.selectAll("g").data(n.identity).enter().append("g").append("text").each(function(D){D.lonlat[0]===d&&q.select(this).remove()});c(e,r)})}}},{"../../constants/numerical":724,"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/geojson_utils":743,"../../lib/topojson_utils":776,"../../plots/cartesian/autorange":796,"../scatter/calc":1156,"../scatter/subtypes":1179,"./style":1205,d3:169}],1204:[function(b,y,F){var q=
b("../scatter/subtypes"),n=b("../../constants/numerical").BADNUM;y.exports=function(p,h){var a=p.cd,f=p.xaxis,d=p.yaxis,l=[],k=a[0].trace,c;if(!q.hasMarkers(k)&&!q.hasText(k))return[];if(!1===h)for(c=0;c<a.length;c++)a[c].selected=0;else for(c=0;c<a.length;c++){k=a[c];var e=k.lonlat;if(e[0]!==n){var g=f.c2p(e);var m=d.c2p(e);h.contains([g,m],null,c,p)?(l.push({pointNumber:c,lon:e[0],lat:e[1]}),k.selected=1):k.selected=0}}return l}},{"../../constants/numerical":724,"../scatter/subtypes":1179}],1205:[function(b,
y,F){function q(d,l){var k=l[0].trace,c=l[0].node3;c.style("opacity",l[0].trace.opacity);a(c,k,d);f(c,k,d);c.selectAll("path.js-line").style("fill","none").each(function(e){var g=n.select(this);e=e.trace;var m=e.line||{};g.call(h.stroke,m.color).call(p.dashLine,m.dash||"",m.width||0);"none"!==e.fill&&g.call(h.fill,e.fillcolor)})}var n=b("d3"),p=b("../../components/drawing"),h=b("../../components/color");b=b("../scatter/style");var a=b.stylePoints,f=b.styleText;y.exports=function(d,l){l&&q(d,l)}},
{"../../components/color":615,"../../components/drawing":637,"../scatter/style":1178,d3:169}],1206:[function(b,y,F){var q=b("../../plots/attributes");F=b("../scatter/attributes");var n=b("../../components/colorscale/attributes"),p=b("../../lib/extend").extendFlat,h=b("../../plot_api/edit_types").overrideAll;b=b("./constants").DASHES;var a=F.line,f=F.marker,d=f.line;y=y.exports=h({x:F.x,x0:F.x0,dx:F.dx,y:F.y,y0:F.y0,dy:F.dy,text:F.text,hovertext:F.hovertext,textposition:F.textposition,textfont:F.textfont,
mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:a.color,width:a.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(b),dflt:"solid"}},marker:p({},n("marker"),{symbol:f.symbol,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:p({},n("marker.line"),{width:d.width})}),connectgaps:F.connectgaps,fill:p({},
F.fill,{dflt:"none"}),fillcolor:F.fillcolor,selected:{marker:F.selected.marker,textfont:F.selected.textfont},unselected:{marker:F.unselected.marker,textfont:F.unselected.textfont},opacity:q.opacity},"calc","nested");y.x.editType=y.y.editType=y.x0.editType=y.y0.editType="calc+clearAxisTypes";y.hovertemplate=F.hovertemplate;y.texttemplate=F.texttemplate},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../scatter/attributes":1155,
"./constants":1208}],1207:[function(b,y,F){function q(r,u,v){r=r._extremes[u._id];u=a(u,v._bnds,{padded:!0});r.min=r.min.concat(u.min);r.max=r.max.concat(u.max)}var n=b("@plotly/point-cluster"),p=b("../../lib"),h=b("../../plots/cartesian/axis_ids"),a=b("../../plots/cartesian/autorange").findExtremes;F=b("../scatter/calc");var f=F.calcMarkerSize,d=F.calcAxisExpansion,l=F.setFirstScatter,k=b("../scatter/colorscale_calc"),c=b("./convert"),e=b("./scene_update"),g=b("../../constants/numerical").BADNUM,
m=b("./constants").TOO_MANY_POINTS;y.exports=function(r,u){var v=r._fullLayout,w=h.getFromId(r,u.xaxis),D=h.getFromId(r,u.yaxis),C=v._plots[u.xaxis+u.yaxis],x=u._length,A=x>=m,B=2*x,t={},G,H=u._x=w.makeCalcdata(u,"x"),I=u._y=D.makeCalcdata(u,"y"),J=Array(B);for(G=0;G<x;G++){var L=H[G];var E=I[G];J[2*G]=L===g?NaN:L;J[2*G+1]=E===g?NaN:E}if("log"===w.type)for(G=0;G<B;G+=2)J[G]=w.c2l(J[G]);if("log"===D.type)for(G=1;G<B;G+=2)J[G]=D.c2l(J[G]);if(A&&"log"!==w.type&&"log"!==D.type)t.tree=n(J);else for(B=
t.ids=Array(x),G=0;G<x;G++)B[G]=G;k(r,u);G=c.style(r,u);G.marker&&(G.marker.positions=J);G.line&&1<J.length&&p.extendFlat(G.line,c.linePositions(r,u,J));if(G.errorX||G.errorY)B=c.errorBarPositions(r,u,J,H,I),G.errorX&&p.extendFlat(G.errorX,B.x),G.errorY&&p.extendFlat(G.errorY,B.y);G.text&&(p.extendFlat(G.text,{positions:J},c.textPosition(r,u,G.text,G.marker)),p.extendFlat(G.textSel,{positions:J},c.textPosition(r,u,G.text,G.markerSel)),p.extendFlat(G.textUnsel,{positions:J},c.textPosition(r,u,G.text,
G.markerUnsel)));C=e(r,C);l(v,u);var K;A?G.marker&&(K=2*(G.marker.sizeAvg||Math.max(G.marker.size,3))):K=f(u,x);d(r,u,w,D,H,I,K);G.errorX&&q(u,w,G.errorX);G.errorY&&q(u,D,G.errorY);G.fill&&!C.fill2d&&(C.fill2d=!0);G.marker&&!C.scatter2d&&(C.scatter2d=!0);G.line&&!C.line2d&&(C.line2d=!0);!G.errorX&&!G.errorY||C.error2d||(C.error2d=!0);G.text&&!C.glText&&(C.glText=!0);G.marker&&(G.marker.snap=x);C.lineOptions.push(G.line);C.errorXOptions.push(G.errorX);C.errorYOptions.push(G.errorY);C.fillOptions.push(G.fill);
C.markerOptions.push(G.marker);C.markerSelectedOptions.push(G.markerSel);C.markerUnselectedOptions.push(G.markerUnsel);C.textOptions.push(G.text);C.textSelectedOptions.push(G.textSel);C.textUnselectedOptions.push(G.textUnsel);C.selectBatch.push([]);C.unselectBatch.push([]);t._scene=C;t.index=C.count;t.x=H;t.y=I;t.positions=J;C.count++;return[{x:!1,y:!1,t,trace:u}]}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/autorange":796,"../../plots/cartesian/axis_ids":800,"../scatter/calc":1156,
"../scatter/colorscale_calc":1158,"./constants":1208,"./convert":1209,"./scene_update":1217,"@plotly/point-cluster":57}],1208:[function(b,y,F){y.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1209:[function(b,y,F){function q(J,L){var E=J._fullLayout;J=L._length;var K=L.textfont,N=L.textposition,O=Array.isArray(N)?N:[N],Q=K.color;N=K.size;
K=K.family;var P={},T,V=L.texttemplate;if(V){P.text=[];var aa=E._d3locale,ba=(T=Array.isArray(V))?Math.min(V.length,J):J,Y=T?function(pa){return V[pa]}:function(){return V};for(T=0;T<ba;T++){var ea={i:T},da=L._module.formatLabels(ea,L,E),ca={};A(ca,L,T);var la=L._meta||{};P.text.push(e.texttemplateString(Y(T),da,aa,ca,ea,la))}}else Array.isArray(L.text)&&L.text.length<J?P.text=L.text.slice():P.text=L.text;if(Array.isArray(P.text))for(T=P.text.length;T<J;T++)P.text[T]="";P.opacity=L.opacity;P.font=
{};P.align=[];P.baseline=[];for(T=0;T<O.length;T++){L=O[T].split(/\s+/);switch(L[1]){case "left":P.align.push("right");break;case "right":P.align.push("left");break;default:P.align.push(L[1])}switch(L[0]){case "top":P.baseline.push("bottom");break;case "bottom":P.baseline.push("top");break;default:P.baseline.push(L[0])}}if(Array.isArray(Q))for(P.color=Array(J),T=0;T<J;T++)P.color[T]=Q[T];else P.color=Q;if(e.isArrayOrTypedArray(N)||Array.isArray(K))for(P.font=Array(J),T=0;T<J;T++)L=P.font[T]={},L.size=
e.isTypedArray(N)?N[T]:Array.isArray(N)?d(N[T])?N[T]:0:N,L.family=Array.isArray(K)?K[T]:K;else P.font={size:N,family:K};return P}function n(J){var L=J._length,E=J.marker,K={},N=e.isArrayOrTypedArray(E.symbol);var O=e.isArrayOrTypedArray(E.color);var Q=e.isArrayOrTypedArray(E.line.color),P=e.isArrayOrTypedArray(E.opacity),T=e.isArrayOrTypedArray(E.size),V=e.isArrayOrTypedArray(E.line.width),aa;N||(aa=w.isOpenSymbol(E.symbol));if(N||O||Q||P){K.colors=Array(L);K.borderColors=Array(L);Q=r(E,E.opacity,
L);P=r(E.line,E.opacity,L);if(!Array.isArray(P[0])){var ba=P;P=Array(L);for(O=0;O<L;O++)P[O]=ba}if(!Array.isArray(Q[0]))for(ba=Q,Q=Array(L),O=0;O<L;O++)Q[O]=ba;K.colors=Q;K.borderColors=P;for(O=0;O<L;O++)N&&(aa=w.isOpenSymbol(E.symbol[O])),aa&&(P[O]=Q[O].slice(),Q[O]=Q[O].slice(),Q[O][3]=0);K.opacity=J.opacity}else aa?(K.color=k(E.color,"uint8"),K.color[3]=0,K.borderColor=k(E.color,"uint8")):(K.color=k(E.color,"uint8"),K.borderColor=k(E.line.color,"uint8")),K.opacity=J.opacity*E.opacity;if(N)for(K.markers=
Array(L),O=0;O<L;O++)K.markers[O]=f(E.symbol[O]);else K.marker=f(E.symbol);aa=v(J);if(T||V){J=K.sizes=Array(L);N=K.borderSizes=Array(L);Q=0;if(T){for(O=0;O<L;O++)J[O]=aa(E.size[O]),Q+=J[O];var Y=Q/L}else for(T=aa(E.size),O=0;O<L;O++)J[O]=T;if(V)for(O=0;O<L;O++)N[O]=E.line.width[O]/2;else for(T=E.line.width/2,O=0;O<L;O++)N[O]=T;K.sizeAvg=Y}else K.size=aa(E&&E.size||10),K.borderSizes=aa(E.line.width);return K}function p(J,L){J=J.marker;var E={};if(!L)return E;L.marker&&L.marker.symbol?E=n(e.extendFlat({},
J,L.marker)):L.marker&&(L.marker.size&&(E.size=L.marker.size/2),L.marker.color&&(E.colors=L.marker.color),void 0!==L.marker.opacity&&(E.opacity=L.marker.opacity));return E}function h(J,L,E){var K={};if(!E)return K;E.textfont&&(L={opacity:1,text:L.text,texttemplate:L.texttemplate,textposition:L.textposition,textfont:e.extendFlat({},L.textfont)},E.textfont&&e.extendFlat(L.textfont,E.textfont),K=q(J,L));return K}function a(J,L){var E={capSize:2*L.width,lineWidth:L.thickness,color:L.color};L.copy_ystyle&&
(E=J.error_y);return E}function f(J){if("circle"===J)return null;var L=g.symbolNumber(J);var E=g.symbolFuncs[L%100];var K=!!g.symbolNoDot[L%100];L=!!g.symbolNoFill[L%100];var N=w.isDotSymbol(J);if(H[J])return H[J];E=N&&!K?E(1.1*t)+I:E(t);E=l(E,{w:B,h:B,viewBox:[-t,-t,t,t],stroke:L?G:-G});return(H[J]=E)||null}var d=b("fast-isnumeric"),l=b("svg-path-sdf"),k=b("color-normalize"),c=b("../../registry"),e=b("../../lib"),g=b("../../components/drawing"),m=b("../../plots/cartesian/axis_ids"),r=b("../../lib/gl_format_color").formatColor,
u=b("../scatter/subtypes"),v=b("../scatter/make_bubble_size_func"),w=b("./helpers"),D=b("./constants"),C=b("../../constants/interactions").DESELECTDIM,x={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},A=b("../../components/fx/helpers").appendArrayPointValue,B=D.SYMBOL_SDF_SIZE,t=D.SYMBOL_SIZE,G=D.SYMBOL_STROKE,H={},I=g.symbolFuncs[0](.05*t);y.exports={style:function(J,L){var E={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,
text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==L.visible)return E;u.hasText(L)&&(E.text=q(J,L),E.textSel=h(J,L,L.selected),E.textUnsel=h(J,L,L.unselected));if(u.hasMarkers(L)&&(E.marker=n(L),E.markerSel=p(L,L.selected),E.markerUnsel=p(L,L.unselected),!L.unselected&&e.isArrayOrTypedArray(L.marker.opacity))){var K=L.marker.opacity;E.markerUnsel.opacity=Array(K.length);for(J=0;J<K.length;J++)E.markerUnsel.opacity[J]=C*K[J]}if(u.hasLines(L)){E.line={overlay:!0,thickness:L.line.width,color:L.line.color,
opacity:L.opacity};K=(D.DASHES[L.line.dash]||[1]).slice();for(J=0;J<K.length;++J)K[J]*=L.line.width;E.line.dashes=K}L.error_x&&L.error_x.visible&&(E.errorX=a(L,L.error_x));L.error_y&&L.error_y.visible&&(E.errorY=a(L,L.error_y));L.fill&&"none"!==L.fill&&(E.fill={closed:!0,fill:L.fillcolor,thickness:0});return E},markerStyle:n,markerSelection:p,linePositions:function(J,L,E){var K=E.length,N=K/2;if(u.hasLines(L)&&N)if("hv"===L.line.shape){var O=[];for(J=0;J<N-1;J++)isNaN(E[2*J])||isNaN(E[2*J+1])?O.push(NaN,
NaN,NaN,NaN):(O.push(E[2*J],E[2*J+1]),isNaN(E[2*J+2])||isNaN(E[2*J+3])?O.push(NaN,NaN):O.push(E[2*J+2],E[2*J+1]));O.push(E[K-2],E[K-1])}else if("hvh"===L.line.shape){O=[];for(J=0;J<N-1;J++)if(isNaN(E[2*J])||isNaN(E[2*J+1])||isNaN(E[2*J+2])||isNaN(E[2*J+3]))isNaN(E[2*J])||isNaN(E[2*J+1])?O.push(NaN,NaN):O.push(E[2*J],E[2*J+1]),O.push(NaN,NaN);else{var Q=(E[2*J]+E[2*J+2])/2;O.push(E[2*J],E[2*J+1],Q,E[2*J+1],Q,E[2*J+3])}O.push(E[K-2],E[K-1])}else if("vhv"===L.line.shape){O=[];for(J=0;J<N-1;J++)isNaN(E[2*
J])||isNaN(E[2*J+1])||isNaN(E[2*J+2])||isNaN(E[2*J+3])?(isNaN(E[2*J])||isNaN(E[2*J+1])?O.push(NaN,NaN):O.push(E[2*J],E[2*J+1]),O.push(NaN,NaN)):(Q=(E[2*J+1]+E[2*J+3])/2,O.push(E[2*J],E[2*J+1],E[2*J],Q,E[2*J+2],Q));O.push(E[K-2],E[K-1])}else if("vh"===L.line.shape){O=[];for(J=0;J<N-1;J++)isNaN(E[2*J])||isNaN(E[2*J+1])?O.push(NaN,NaN,NaN,NaN):(O.push(E[2*J],E[2*J+1]),isNaN(E[2*J+2])||isNaN(E[2*J+3])?O.push(NaN,NaN):O.push(E[2*J],E[2*J+3]));O.push(E[K-2],E[K-1])}else O=E;K=!1;for(J=0;J<O.length;J++)if(isNaN(O[J])){K=
!0;break}E=K||O.length>D.TOO_MANY_POINTS?"rect":u.hasMarkers(L)?"rect":"round";if(K&&L.connectgaps)for(L=O[0],K=O[1],J=0;J<O.length;J+=2)isNaN(O[J])||isNaN(O[J+1])?(O[J]=L,O[J+1]=K):(L=O[J],K=O[J+1]);return{join:E,positions:O}},errorBarPositions:function(J,L,E,K,N){function O(aa,ba){var Y=ba._id.charAt(0),ea=L["error_"+Y];if(ea&&ea.visible&&("linear"===ba.type||"log"===ba.type)){ea=Q(ea);for(var da={x:0,y:1}[Y],ca={x:[0,1,2,3],y:[2,3,0,1]}[Y],la=new Float64Array(4*T),pa=Infinity,qa=-Infinity,oa=0,
ka=0;oa<T;oa++,ka+=4){var ra=aa[oa];if(d(ra)){var ha=E[2*oa+da],ma=ea(ra,oa),wa=ma[0];ma=ma[1];if(d(wa)&&d(ma)){var na=ra+ma;la[ka+ca[0]]=ha-ba.c2l(ra-wa);la[ka+ca[1]]=ba.c2l(na)-ha;la[ka+ca[2]]=0;la[ka+ca[3]]=0;pa=Math.min(pa,ra-wa);qa=Math.max(qa,ra+ma)}}}V[Y]={positions:E,errors:la,_bnds:[pa,qa]}}}var Q=c.getComponentMethod("errorbars","makeComputeError"),P=m.getFromId(J,L.xaxis);J=m.getFromId(J,L.yaxis);var T=E.length/2,V={};O(K,P);O(N,J);return V},textPosition:function(J,L,E,K){J=L._length;var N=
{};if(u.hasMarkers(L)){L=E.font;var O=E.align,Q=E.baseline;N.offset=Array(J);for(E=0;E<J;E++){var P=K.sizes?K.sizes[E]:K.size,T=Array.isArray(L)?L[E].size:L.size,V=Array.isArray(O)?1<O.length?O[E]:O[0]:O,aa=Array.isArray(Q)?1<Q.length?Q[E]:Q[0]:Q;aa=x[aa];P=P?P/.8+1:0;N.offset[E]=[x[V]*P/T,(-aa*P-.5*aa)/T]}}return N}}},{"../../components/drawing":637,"../../components/fx/helpers":651,"../../constants/interactions":723,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/cartesian/axis_ids":800,
"../../registry":880,"../scatter/make_bubble_size_func":1172,"../scatter/subtypes":1179,"./constants":1208,"./helpers":1213,"color-normalize":125,"fast-isnumeric":241,"svg-path-sdf":546}],1210:[function(b,y,F){var q=b("../../lib"),n=b("../../registry"),p=b("./helpers"),h=b("./attributes"),a=b("../scatter/constants"),f=b("../scatter/subtypes"),d=b("../scatter/xy_defaults"),l=b("../scatter/marker_defaults"),k=b("../scatter/line_defaults"),c=b("../scatter/fillcolor_defaults"),e=b("../scatter/text_defaults");
y.exports=function(g,m,r,u){function v(x,A){return q.coerce(g,m,h,x,A)}var w=g.marker?p.isOpenSymbol(g.marker.symbol):!1,D=f.isBubble(g),C=d(g,m,u,v);C?(C=C<a.PTS_LINESONLY?"lines+markers":"lines",v("text"),v("hovertext"),v("hovertemplate"),v("mode",C),f.hasLines(m)&&(v("connectgaps"),k(g,m,r,u,v),v("line.shape")),f.hasMarkers(m)&&(l(g,m,r,u,v),v("marker.line.width",w||D?1:0)),f.hasText(m)&&(v("texttemplate"),e(g,m,u,v)),u=(m.line||{}).color,w=(m.marker||{}).color,v("fill"),"none"!==m.fill&&c(g,m,
r,v),D=n.getComponentMethod("errorbars","supplyDefaults"),D(g,m,u||w||r,{axis:"y"}),D(g,m,u||w||r,{axis:"x",inherit:"y"}),q.coerceSelectionMarkerOpacity(m,v)):m.visible=!1}},{"../../lib":749,"../../registry":880,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"../scatter/xy_defaults":1181,"./attributes":1206,"./helpers":1213}],1211:[function(b,y,F){var q=b("../../lib"),
n=b("../../components/color"),p=b("../../constants/interactions").DESELECTDIM;y.exports={styleTextSelection:function(h){h=h[0];var a=h.trace,f=h.t;h=f._scene;f=f.index;var d=h.selectBatch[f],l=h.unselectBatch[f],k=h.textOptions[f],c=h.textSelectedOptions[f]||{},e=h.textUnselectedOptions[f]||{},g=q.extendFlat({},k);if(d.length||l.length){c=c.color;e=e.color;k=k.color;var m=Array.isArray(k);g.color=Array(a._length);for(a=0;a<d.length;a++){var r=d[a];g.color[r]=c||(m?k[r]:k)}for(a=0;a<l.length;a++)r=
l[a],d=m?k[r]:k,g.color[r]=e?e:c?d:n.addOpacity(d,p)}h.glText[f].update(g)}}},{"../../components/color":615,"../../constants/interactions":723,"../../lib":749}],1212:[function(b,y,F){var q=b("../scatter/format_labels");y.exports=function(n,p,h){var a=n.i;"x"in n||(n.x=p._x[a]);"y"in n||(n.y=p._y[a]);return q(n,p,h)}},{"../scatter/format_labels":1164}],1213:[function(b,y,F){var q=b("./constants");F.isOpenSymbol=function(n){return"string"===typeof n?q.OPEN_RE.test(n):100<n%200};F.isDotSymbol=function(n){return"string"===
typeof n?q.DOT_RE.test(n):200<n}},{"./constants":1208}],1214:[function(b,y,F){function q(a,f,d,l){var k=a.xa,c=a.ya,e=a.distance,g=a.dxy,m=a.index;f={pointNumber:m,x:f[m],y:d[m]};f.tx=Array.isArray(l.text)?l.text[m]:l.text;f.htx=Array.isArray(l.hovertext)?l.hovertext[m]:l.hovertext;f.data=Array.isArray(l.customdata)?l.customdata[m]:l.customdata;f.tp=Array.isArray(l.textposition)?l.textposition[m]:l.textposition;if(d=l.textfont)f.ts=p.isArrayOrTypedArray(d.size)?d.size[m]:d.size,f.tc=Array.isArray(d.color)?
d.color[m]:d.color,f.tf=Array.isArray(d.family)?d.family[m]:d.family;if(d=l.marker)f.ms=p.isArrayOrTypedArray(d.size)?d.size[m]:d.size,f.mo=p.isArrayOrTypedArray(d.opacity)?d.opacity[m]:d.opacity,f.mx=p.isArrayOrTypedArray(d.symbol)?d.symbol[m]:d.symbol,f.mc=p.isArrayOrTypedArray(d.color)?d.color[m]:d.color;var r=d&&d.line;r&&(f.mlc=Array.isArray(r.color)?r.color[m]:r.color,f.mlw=p.isArrayOrTypedArray(r.width)?r.width[m]:r.width);(d=d&&d.gradient)&&"none"!==d.type&&(f.mgt=Array.isArray(d.type)?d.type[m]:
d.type,f.mgc=Array.isArray(d.color)?d.color[m]:d.color);k=k.c2p(f.x,!0);c=c.c2p(f.y,!0);d=f.mrc||1;if(r=l.hoverlabel)f.hbg=Array.isArray(r.bgcolor)?r.bgcolor[m]:r.bgcolor,f.hbc=Array.isArray(r.bordercolor)?r.bordercolor[m]:r.bordercolor,f.hts=p.isArrayOrTypedArray(r.font.size)?r.font.size[m]:r.font.size,f.htc=Array.isArray(r.font.color)?r.font.color[m]:r.font.color,f.htf=Array.isArray(r.font.family)?r.font.family[m]:r.font.family,f.hnl=p.isArrayOrTypedArray(r.namelength)?r.namelength[m]:r.namelength;
if(r=l.hoverinfo)f.hi=Array.isArray(r)?r[m]:r;if(r=l.hovertemplate)f.ht=Array.isArray(r)?r[m]:r;m={};m[a.index]=f;a=p.extendFlat({},a,{color:h(l,f),x0:k-d,x1:k+d,xLabelVal:f.x,y0:c-d,y1:c+d,yLabelVal:f.y,cd:m,distance:e,spikeDistance:g,hovertemplate:f.ht});f.htx?a.text=f.htx:f.tx?a.text=f.tx:l.text&&(a.text=l.text);p.fillText(f,l,a);n.getComponentMethod("errorbars","hoverInfo")(f,l,a);return a}var n=b("../../registry"),p=b("../../lib"),h=b("../scatter/get_trace_color");y.exports={hoverPoints:function(a,
f,d,l){var k=a.cd,c=k[0].t;k=k[0].trace;var e=a.xa,g=a.ya,m=c.x,r=c.y;f=e.c2p(f);d=g.c2p(d);var u=a.distance;if(c.tree){var v=e.p2c(f-u),w=e.p2c(f+u),D=g.p2c(d-u),C=g.p2c(d+u);c="x"===l?c.tree.range(Math.min(v,w),Math.min(g._rl[0],g._rl[1]),Math.max(v,w),Math.max(g._rl[0],g._rl[1])):c.tree.range(Math.min(v,w),Math.min(D,C),Math.max(v,w),Math.max(D,C))}else c=c.ids;if("x"===l)for(l=0;l<c.length;l++){if(w=m[c[l]],w=Math.abs(e.c2p(w)-f),w<u){u=w;v=g.c2p(r[c[l]])-d;var x=Math.sqrt(w*w+v*v);var A=c[l]}}else for(l=
c.length-1;-1<l;l--)w=m[c[l]],v=r[c[l]],w=e.c2p(w)-f,v=g.c2p(v)-d,v=Math.sqrt(w*w+v*v),v<u&&(u=x=v,A=c[l]);a.index=A;a.distance=u;a.dxy=x;return void 0===A?[a]:[q(a,m,r,k)]},calcHover:q}},{"../../lib":749,"../../registry":880,"../scatter/get_trace_color":1165}],1215:[function(b,y,F){F=b("./hover");y.exports={moduleType:"trace",name:"scattergl",basePlotModule:b("../../plots/cartesian"),categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),attributes:b("./attributes"),
supplyDefaults:b("./defaults"),crossTraceDefaults:b("../scatter/cross_trace_defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:F.hoverPoints,selectPoints:b("./select"),meta:{}}},{"../../plots/cartesian":810,"../scatter/cross_trace_defaults":1161,"../scatter/marker_colorbar":1173,"./attributes":1206,"./calc":1207,"./defaults":1210,"./format_labels":1212,"./hover":1214,"./plot":1216,"./select":1218}],1216:[function(b,y,
F){function q(g,m,r){var u=g._size;return[u.l+m.domain[0]*u.w,u.b+r.domain[0]*u.h,g.width-u.r-(1-m.domain[1])*u.w,g.height-u.t-(1-r.domain[1])*u.h]}var n=b("regl-scatter2d"),p=b("regl-line2d"),h=b("regl-error2d"),a=b("gl-text"),f=b("../../lib"),d=b("../../components/dragelement/helpers").selectMode,l=b("../../lib/prepare_regl"),k=b("../scatter/subtypes"),c=b("../scatter/link_traces"),e=b("./edit_style").styleTextSelection;y.exports=function(g,m,r){if(r.length){var u=g._fullLayout,v=m._scene,w=m.xaxis,
D=m.yaxis;if(v)if(l(g,["ANGLE_instanced_arrays","OES_element_index_uint"])){var C=v.count,x=u._glcanvas.data()[0].regl;c(g,m,r);if(v.dirty){!0===v.error2d&&(v.error2d=h(x));!0===v.line2d&&(v.line2d=p(x));!0===v.scatter2d&&(v.scatter2d=n(x,{constPointSize:!0}));!0===v.fill2d&&(v.fill2d=p(x));if(!0===v.glText)for(v.glText=Array(C),g=0;g<C;g++)v.glText[g]=new a(x);if(v.glText){if(C>v.glText.length)for(m=C-v.glText.length,g=0;g<m;g++)v.glText.push(new a(x));else C<v.glText.length&&v.glText.splice(C,v.glText.length-
C).forEach(function(K){K.destroy()});for(g=0;g<C;g++)v.glText[g].update(v.textOptions[g])}v.line2d&&(v.line2d.update(v.lineOptions),v.lineOptions=v.lineOptions.map(function(K){if(K&&K.positions){for(var N=K.positions,O=0;O<N.length&&(isNaN(N[O])||isNaN(N[O+1]));)O+=2;for(var Q=N.length-2;Q>O&&(isNaN(N[Q])||isNaN(N[Q+1]));)Q-=2;K.positions=N.slice(O,Q+2)}return K}),v.line2d.update(v.lineOptions));v.error2d&&(g=(v.errorXOptions||[]).concat(v.errorYOptions||[]),v.error2d.update(g));v.scatter2d&&v.scatter2d.update(v.markerOptions);
v.fillOrder=f.repeat(null,C);v.fill2d&&(v.fillOptions=v.fillOptions.map(function(K,N){var O=r[N];if(K&&O&&O[0]&&O[0].trace){var Q=O[0];O=Q.trace;var P=Q.t,T=v.lineOptions[N],V;Q=[];O._ownfill&&Q.push(N);O._nexttrace&&Q.push(N+1);Q.length&&(v.fillOrder[N]=Q);Q=[];P=T&&T.positions||P.positions;if("tozeroy"===O.fill){for(T=0;T<P.length&&isNaN(P[T+1]);)T+=2;for(V=P.length-2;V>T&&isNaN(P[V+1]);)V-=2;0!==P[T+1]&&(Q=[P[T],0]);Q=Q.concat(P.slice(T,V+2));0!==P[V+1]&&(Q=Q.concat([P[V],0]))}else if("tozerox"===
O.fill){for(T=0;T<P.length&&isNaN(P[T]);)T+=2;for(V=P.length-2;V>T&&isNaN(P[V]);)V-=2;0!==P[T]&&(Q=[0,P[T+1]]);Q=Q.concat(P.slice(T,V+2));0!==P[V]&&(Q=Q.concat([0,P[V+1]]))}else if("toself"===O.fill||"tonext"===O.fill){Q=[];for(T=V=0;T<P.length;T+=2)if(isNaN(P[T])||isNaN(P[T+1]))Q=Q.concat(P.slice(V,T)),Q.push(P[V],P[V+1]),V=T+2;Q=Q.concat(P.slice(V));V&&Q.push(P[V],P[V+1])}else if(T=O._nexttrace)if(V=v.lineOptions[N+1])if(V=V.positions,"tonexty"===O.fill){Q=P.slice();for(N=Math.floor(V.length/2);N--;){P=
V[2*N];var aa=V[2*N+1];isNaN(P)||isNaN(aa)||Q.push(P,aa)}K.fill=T.fillcolor}if(O._prevtrace&&"tonext"===O._prevtrace.fill){N=v.lineOptions[N-1].positions;P=Q.length/2;V=[P];for(T=0;T<N.length;T+=2)(isNaN(N[T])||isNaN(N[T+1]))&&V.push(T/2+P+1);Q=Q.concat(N);K.hole=V}K.fillmode=O.fill;K.opacity=O.opacity;K.positions=Q;return K}}),v.fill2d.update(v.fillOptions))}x=d(u.dragmode);m=-1<u.clickmode.indexOf("select");for(g=0;g<C;g++){var A=r[g][0];var B=A.trace;var t=A.t,G=t.index;A=B._length;var H=t.x,I=
t.y;if(B.selectedpoints||x||m){x||(x=!0);if(B.selectedpoints){var J=v.selectBatch[G]=f.selIndices2selPoints(B),L={};for(B=0;B<J.length;B++)L[J[B]]=1;J=[];for(B=0;B<A;B++)L[B]||J.push(B);v.unselectBatch[G]=J}G=t.xpx=Array(A);t=t.ypx=Array(A);for(B=0;B<A;B++)G[B]=w.c2p(H[B]),t[B]=D.c2p(I[B])}else t.xpx=t.ypx=null}if(x){v.select2d||(v.select2d=n(u._glcanvas.data()[1].regl));if(v.scatter2d){x=Array(C);for(g=0;g<C;g++)x[g]=v.selectBatch[g].length||v.unselectBatch[g].length?v.markerUnselectedOptions[g]:
{};v.scatter2d.update(x)}v.select2d&&(v.select2d.update(v.markerOptions),v.select2d.update(v.markerSelectedOptions));v.glText&&r.forEach(function(K){k.hasText(((K||[])[0]||{}).trace||{})&&e(K)})}else v.scatter2d&&v.scatter2d.update(v.markerOptions);var E={viewport:q(u,w,D),range:[(w._rl||w.range)[0],(D._rl||D.range)[0],(w._rl||w.range)[1],(D._rl||D.range)[1]]};u=f.repeat(E,v.count);v.fill2d&&v.fill2d.update(u);v.line2d&&v.line2d.update(u);v.error2d&&v.error2d.update(u.concat(u));v.scatter2d&&v.scatter2d.update(u);
v.select2d&&v.select2d.update(u);v.glText&&v.glText.forEach(function(K){K.update(E)})}else v.init()}}},{"../../components/dragelement/helpers":633,"../../lib":749,"../../lib/prepare_regl":762,"../scatter/link_traces":1171,"../scatter/subtypes":1179,"./edit_style":1211,"gl-text":326,"regl-error2d":508,"regl-line2d":509,"regl-scatter2d":510}],1217:[function(b,y,F){var q=b("../../lib");y.exports=function(n,p){var h=p._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],
markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},f={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};p._scene||(h=p._scene={},h.init=function(){q.extendFlat(h,f,a)},h.init(),h.update=function(d){var l=q.repeat(d,h.count);h.fill2d&&h.fill2d.update(l);h.scatter2d&&h.scatter2d.update(l);h.line2d&&h.line2d.update(l);h.error2d&&h.error2d.update(l.concat(l));h.select2d&&h.select2d.update(l);
if(h.glText)for(l=0;l<h.count;l++)h.glText[l].update(d)},h.draw=function(){for(var d=h.count,l=h.fill2d,k=h.error2d,c=h.line2d,e=h.scatter2d,g=h.glText,m=h.select2d,r=h.selectBatch,u=h.unselectBatch,v=0;v<d;v++){l&&h.fillOrder[v]&&l.draw(h.fillOrder[v]);c&&h.lineOptions[v]&&c.draw(v);k&&(h.errorXOptions[v]&&k.draw(v),h.errorYOptions[v]&&k.draw(v+d));if(e&&h.markerOptions[v])if(u[v].length){var w=q.repeat([],h.count);w[v]=u[v];e.draw(w)}else r[v].length||e.draw(v);g[v]&&h.textOptions[v]&&g[v].render()}m&&
m.draw(r);h.dirty=!1},h.destroy=function(){h.fill2d&&h.fill2d.destroy&&h.fill2d.destroy();h.scatter2d&&h.scatter2d.destroy&&h.scatter2d.destroy();h.error2d&&h.error2d.destroy&&h.error2d.destroy();h.line2d&&h.line2d.destroy&&h.line2d.destroy();h.select2d&&h.select2d.destroy&&h.select2d.destroy();h.glText&&h.glText.forEach(function(d){d.destroy&&d.destroy()});h.lineOptions=null;h.fillOptions=null;h.markerOptions=null;h.markerSelectedOptions=null;h.markerUnselectedOptions=null;h.errorXOptions=null;h.errorYOptions=
null;h.textOptions=null;h.textSelectedOptions=null;h.textUnselectedOptions=null;h.selectBatch=null;h.unselectBatch=null;p._scene=null});h.dirty||q.extendFlat(h,a);return h}},{"../../lib":749}],1218:[function(b,y,F){var q=b("../scatter/subtypes"),n=b("./edit_style").styleTextSelection;y.exports=function(p,h){var a=p.cd,f=[],d=a[0].trace,l=a[0].t,k=d._length,c=l.x,e=l.y,g=l._scene,m=l.index;if(!g)return f;var r=q.hasText(d),u=q.hasMarkers(d);if(!0!==d.visible||!u&&!r)return f;d=[];var v=[];if(!1!==
h&&!h.degenerate)for(var w=0;w<k;w++)h.contains([l.xpx[w],l.ypx[w]],!1,w,p)?(d.push(w),f.push({pointNumber:w,x:c[w],y:e[w]})):v.push(w);u&&((p=g.scatter2d,d.length||v.length)?g.selectBatch[m].length||g.unselectBatch[m].length||(h=Array(g.count),h[m]=g.markerUnselectedOptions[m],p.update.apply(p,h)):(h=Array(g.count),h[m]=g.markerOptions[m],p.update.apply(p,h)));g.selectBatch[m]=d;g.unselectBatch[m]=v;r&&n(a);return f}},{"../scatter/subtypes":1179,"./edit_style":1211}],1219:[function(b,y,F){F=b("../../plots/template_attributes").hovertemplateAttrs;
var q=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scattergeo/attributes"),p=b("../scatter/attributes"),h=b("../../plots/mapbox/layout_attributes"),a=b("../../plots/attributes"),f=b("../../components/colorscale/attributes"),d=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var l=n.line,k=n.marker;y.exports=b({lon:n.lon,lat:n.lat,mode:d({},p.mode,{dflt:"markers"}),text:d({},p.text,{}),texttemplate:q({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:d({},
p.hovertext,{}),line:{color:l.color,width:l.width},connectgaps:p.connectgaps,marker:d({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:k.opacity,size:k.size,sizeref:k.sizeref,sizemin:k.sizemin,sizemode:k.sizemode},f("marker")),fill:n.fill,fillcolor:p.fillcolor,textfont:h.layers.symbol.textfont,textposition:h.layers.symbol.textposition,below:{valType:"string"},selected:{marker:p.selected.marker},unselected:{marker:p.unselected.marker},
hoverinfo:d({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:F()},"calc","nested")},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/mapbox/layout_attributes":856,"../../plots/template_attributes":875,"../scatter/attributes":1155,"../scattergeo/attributes":1196}],1220:[function(b,y,F){function q(){return{geojson:l.makeBlank(),layout:{visibility:"none"},paint:{}}}function n(w){var D=w[0].trace,
C=D.marker,x=D.selectedpoints,A=f.isArrayOrTypedArray(C.color),B=f.isArrayOrTypedArray(C.size),t=f.isArrayOrTypedArray(C.opacity),G,H;A&&(H=k.hasColorscale(D,"marker")?k.makeColorScaleFuncFromTrace(C):f.identity);var I;B&&(I=e(D));var J;t&&(J=function(Q){Q=a(Q)?+f.constrain(Q,0,1):0;return D.opacity*Q});var L=[];for(G=0;G<w.length;G++){var E=w[G],K=E.lonlat;if(K[0]!==d){var N={};H&&(N.mcc=E.mcc=H(E.mc));I&&(N.mrc=E.mrc=I(E.ms));J&&(N.mo=J(E.mo));x&&(N.selected=E.selected||0);L.push({type:"Feature",
geometry:{type:"Point",coordinates:K},properties:N})}}if(x){var O=c.makeSelectedPointStyleFns(D);for(G=0;G<L.length;G++)w=L[G].properties,O.selectedOpacityFn&&(w.mo=D.opacity*O.selectedOpacityFn(w)),O.selectedColorFn&&(w.mcc=O.selectedColorFn(w)),O.selectedSizeFn&&(w.mrc=O.selectedSizeFn(w))}return{geojson:{type:"FeatureCollection",features:L},mcc:A||O&&O.selectedColorFn?{type:"identity",property:"mcc"}:C.color,mrc:B||O&&O.selectedSizeFn?{type:"identity",property:"mrc"}:C.size/2,mo:t||O&&O.selectedOpacityFn?
{type:"identity",property:"mo"}:D.opacity*C.opacity}}function p(w,D){return f.isArrayOrTypedArray(w)?D?function(C){return a(w[C])?+w[C]:0}:function(C){return w[C]}:w?function(){return w}:h}function h(){return""}var a=b("fast-isnumeric"),f=b("../../lib"),d=b("../../constants/numerical").BADNUM,l=b("../../lib/geojson_utils"),k=b("../../components/colorscale"),c=b("../../components/drawing"),e=b("../scatter/make_bubble_size_func"),g=b("../scatter/subtypes"),m=b("../../plots/mapbox/convert_text_opts"),
r=b("../../components/fx/helpers").appendArrayPointValue,u=b("../../lib/svg_text_utils").NEWLINES,v=b("../../lib/svg_text_utils").BR_TAG_ALL;y.exports=function(w,D){var C=D[0].trace,x=!0===C.visible&&0!==C._length,A="none"!==C.fill,B=g.hasLines(C),t=g.hasMarkers(C),G=g.hasText(C),H=t&&"circle"===C.marker.symbol,I=t&&"circle"!==C.marker.symbol,J=q(),L=q(),E=q();t=q();var K={fill:J,line:L,circle:E,symbol:t};if(!x)return K;if(A||B)var N=l.calcTraceToLineCoords(D);A&&(J.geojson=l.makePolygon(N),J.layout.visibility=
"visible",f.extendFlat(J.paint,{"fill-color":C.fillcolor}));B&&(L.geojson=l.makeLine(N),L.layout.visibility="visible",f.extendFlat(L.paint,{"line-width":C.line.width,"line-color":C.line.color,"line-opacity":C.opacity}));H&&(x=n(D),E.geojson=x.geojson,E.layout.visibility="visible",f.extendFlat(E.paint,{"circle-color":x.mcc,"circle-radius":x.mrc,"circle-opacity":x.mo}));if(I||G){w=w._fullLayout;x=D[0].trace;B=x.marker||{};A=B.symbol;B=B.angle;A="circle"!==A?p(A):h;B="auto"!==B?p(B,!0):h;H=g.hasText(x)?
p(x.text):h;E=[];for(N=0;N<D.length;N++)if(J=D[N],J.lonlat[0]!==d){if(L=x.texttemplate){L=Array.isArray(L)?L[N]||"":L;var O=x._module.formatLabels(J,x,w),Q={};r(Q,x,J.i);L=f.texttemplateString(L,O,w._d3locale,Q,J,x._meta||{})}else L=H(N);L&&(L=L.replace(u,"").replace(v,"\n"));E.push({type:"Feature",geometry:{type:"Point",coordinates:J.lonlat},properties:{symbol:A(N),angle:B(N),text:L}})}t.geojson={type:"FeatureCollection",features:E};f.extendFlat(t.layout,{visibility:"visible","icon-image":"{symbol}-15",
"text-field":"{text}"});I&&(f.extendFlat(t.layout,{"icon-size":C.marker.size/10}),"angle"in C.marker&&"auto"!==C.marker.angle&&f.extendFlat(t.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),t.layout["icon-allow-overlap"]=C.marker.allowoverlap,f.extendFlat(t.paint,{"icon-opacity":C.opacity*C.marker.opacity,"icon-color":C.marker.color}));G&&(D=m(C.textposition,(C.marker||{}).size),f.extendFlat(t.layout,{"text-size":C.textfont.size,"text-anchor":D.anchor,"text-offset":D.offset}),
f.extendFlat(t.paint,{"text-color":C.textfont.color,"text-opacity":C.opacity}))}return K}},{"../../components/colorscale":627,"../../components/drawing":637,"../../components/fx/helpers":651,"../../constants/numerical":724,"../../lib":749,"../../lib/geojson_utils":743,"../../lib/svg_text_utils":773,"../../plots/mapbox/convert_text_opts":853,"../scatter/make_bubble_size_func":1172,"../scatter/subtypes":1179,"fast-isnumeric":241}],1221:[function(b,y,F){function q(k,c,e){k=e("lon")||[];e=e("lat")||[];
e=Math.min(k.length,e.length);return c._length=e}var n=b("../../lib"),p=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),f=b("../scatter/text_defaults"),d=b("../scatter/fillcolor_defaults"),l=b("./attributes");y.exports=function(k,c,e,g){function m(u,v){return n.coerce(k,c,l,u,v)}if(q(k,c,m)){m("text");m("texttemplate");m("hovertext");m("hovertemplate");m("mode");m("below");p.hasLines(c)&&(a(k,c,e,g,m,{noDash:!0}),m("connectgaps"));if(p.hasMarkers(c)){h(k,
c,e,g,m,{noLine:!0});m("marker.allowoverlap");m("marker.angle");var r=c.marker;"circle"!==r.symbol&&(n.isArrayOrTypedArray(r.size)&&(r.size=r.size[0]),n.isArrayOrTypedArray(r.color)&&(r.color=r.color[0]))}p.hasText(c)&&f(k,c,g,m,{noSelect:!0});m("fill");"none"!==c.fill&&d(k,c,e,m);n.coerceSelectionMarkerOpacity(c,m)}else c.visible=!1}},{"../../lib":749,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,
"./attributes":1219}],1222:[function(b,y,F){y.exports=function(q,n){q.lon=n.lon;q.lat=n.lat;return q}},{}],1223:[function(b,y,F){var q=b("../../plots/cartesian/axes");y.exports=function(n,p,h){var a={};p=h[p.subplot]._subplot.mockAxis;n=n.lonlat;a.lonLabel=q.tickText(p,p.c2l(n[0]),!0).text;a.latLabel=q.tickText(p,p.c2l(n[1]),!0).text;return a}},{"../../plots/cartesian/axes":797}],1224:[function(b,y,F){function q(d,l,k){if(!d.hovertemplate){var c=(l.hi||d.hoverinfo).split("+"),e=-1!==c.indexOf("all"),
g=-1!==c.indexOf("lon"),m=-1!==c.indexOf("lat"),r=l.lonlat,u=[];e||g&&m?u.push("("+(r[0]+", ")+(r[1]+")")):g?u.push(k.lon+(r[0]+"")):m&&u.push(k.lat+(r[1]+""));(e||-1!==c.indexOf("text"))&&a(l,d,u);return u.join("\x3cbr\x3e")}}var n=b("../../components/fx"),p=b("../../lib"),h=b("../scatter/get_trace_color"),a=p.fillText,f=b("../../constants/numerical").BADNUM;y.exports=function(d,l,k){var c=d.cd,e=c[0].trace,g=d.xa,m=d.ya,r=d.subplot,u=360*(0<=l?Math.floor((l+180)/360):Math.ceil((l-180)/360)),
v=l-u;n.getClosest(c,function(C){var x=C.lonlat;if(x[0]===f)return Infinity;var A=p.modHalf(x[0],360);x=x[1];var B=r.project([A,x]);x=B.x-g.c2p([v,x]);A=B.y-m.c2p([A,k]);C=Math.max(3,C.mrc||0);return Math.max(Math.sqrt(x*x+A*A)-C,1-3/C)},d);if(!1!==d.index){l=c[d.index];var w=l.lonlat;w=[p.modHalf(w[0],360)+u,w[1]];u=g.c2p(w);w=m.c2p(w);var D=l.mrc||1;d.x0=u-D;d.x1=u+D;d.y0=w-D;d.y1=w+D;u={};u[e.subplot]={_subplot:r};u=e._module.formatLabels(l,e,u);d.lonLabel=u.lonLabel;d.latLabel=u.latLabel;d.color=
h(e,l);d.extraText=q(e,l,c[0].t.labels);d.hovertemplate=e.hovertemplate;return[d]}}},{"../../components/fx":655,"../../constants/numerical":724,"../../lib":749,"../scatter/get_trace_color":1165}],1225:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("../scattergeo/calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),styleOnSelect:function(q,
n){n&&n[0].trace._glTrace.update(n)},moduleType:"trace",name:"scattermapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":854,"../scatter/marker_colorbar":1173,"../scattergeo/calc":1197,"./attributes":1219,"./defaults":1221,"./event_data":1222,"./format_labels":1223,"./hover":1224,"./plot":1226,"./select":1227}],1226:[function(b,y,F){function q(a,f){this.type="scattermapbox";this.subplot=a;this.uid=f;this.sourceIds=
{fill:"source-"+f+"-fill",line:"source-"+f+"-line",circle:"source-"+f+"-circle",symbol:"source-"+f+"-symbol"};this.layerIds={fill:p+f+"-fill",line:p+f+"-line",circle:p+f+"-circle",symbol:p+f+"-symbol"};this.below=null}var n=b("./convert"),p=b("../../plots/mapbox/constants").traceLayerPrefix,h=["fill","line","circle","symbol"];b=q.prototype;b.addSource=function(a,f){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:f.geojson})};b.setSourceData=function(a,f){this.subplot.map.getSource(this.sourceIds[a]).setData(f.geojson)};
b.addLayer=function(a,f,d){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:f.layout,paint:f.paint},d)};b.update=function(a){var f=this.subplot,d=f.map,l=n(f.gd,a),k=f.belowLookup["trace-"+this.uid],c;if(k!==this.below){for(c=h.length-1;0<=c;c--){var e=h[c];d.removeLayer(this.layerIds[e])}for(c=0;c<h.length;c++)e=h[c],d=l[e],this.addLayer(e,d,k);this.below=k}for(c=0;c<h.length;c++)e=h[c],d=l[e],f.setOptions(this.layerIds[e],"setLayoutProperty",d.layout),"visible"===
d.layout.visibility&&(this.setSourceData(e,d),f.setOptions(this.layerIds[e],"setPaintProperty",d.paint));a[0].trace._glTrace=this};b.dispose=function(){for(var a=this.subplot.map,f=h.length-1;0<=f;f--){var d=h[f];a.removeLayer(this.layerIds[d]);a.removeSource(this.sourceIds[d])}};y.exports=function(a,f){var d=f[0].trace,l=new q(a,d.uid),k=n(a.gd,f);a=l.below=a.belowLookup["trace-"+d.uid];for(d=0;d<h.length;d++){var c=h[d],e=k[c];l.addSource(c,e);l.addLayer(c,e,a)}return f[0].trace._glTrace=l}},{"../../plots/mapbox/constants":852,
"./convert":1220}],1227:[function(b,y,F){var q=b("../../lib"),n=b("../scatter/subtypes"),p=b("../../constants/numerical").BADNUM;y.exports=function(h,a){var f=h.cd,d=h.xaxis,l=h.yaxis,k=[],c;if(!n.hasMarkers(f[0].trace))return[];if(!1===a)for(c=0;c<f.length;c++)f[c].selected=0;else for(c=0;c<f.length;c++){var e=f[c],g=e.lonlat;if(g[0]!==p){var m=[q.modHalf(g[0],360),g[1]];m=[d.c2p(m),l.c2p(m)];a.contains(m,null,c,h)?(k.push({pointNumber:c,lon:g[0],lat:g[1]}),e.selected=1):e.selected=0}}return k}},
{"../../constants/numerical":724,"../../lib":749,"../scatter/subtypes":1179}],1228:[function(b,y,F){F=b("../../plots/template_attributes").hovertemplateAttrs;var q=b("../../plots/template_attributes").texttemplateAttrs,n=b("../../lib/extend").extendFlat,p=b("../scatter/attributes");b=b("../../plots/attributes");var h=p.line;y.exports={mode:p.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},
dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:p.text,texttemplate:q({editType:"plot"},{keys:["r","theta","text"]}),hovertext:p.hovertext,line:{color:h.color,width:h.width,dash:h.dash,shape:n({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:p.connectgaps,
marker:p.marker,cliponaxis:n({},p.cliponaxis,{dflt:!1}),textposition:p.textposition,textfont:p.textfont,fill:n({},p.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:p.fillcolor,hoverinfo:n({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:p.hoveron,hovertemplate:F(),selected:p.selected,unselected:p.unselected}},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1229:[function(b,y,F){var q=b("fast-isnumeric"),
n=b("../../constants/numerical").BADNUM,p=b("../../plots/cartesian/axes"),h=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),f=b("../scatter/calc_selection"),d=b("../scatter/calc").calcMarkerSize;y.exports=function(l,k){var c=l._fullLayout,e=k.subplot,g=c[e].radialaxis;e=c[e].angularaxis;c=g.makeCalcdata(k,"r");var m=e.makeCalcdata(k,"theta"),r=k._length;e=Array(r);for(var u=0;u<r;u++){var v=c[u],w=m[u],D=e[u]={};q(v)&&q(w)?(D.r=v,D.theta=w):D.r=n}m=d(k,r);k._extremes.x=p.findExtremes(g,
c,{ppad:m});h(l,k);a(e,k);f(e,k);return e}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797,"../scatter/arrays_to_calcdata":1154,"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1230:[function(b,y,F){function q(e,g,m,r){e=r("r");m=r("theta");if(e)m?e=Math.min(e.length,m.length):(e=e.length,r("theta0"),r("dtheta"));else{if(!m)return 0;e=g.theta.length;r("r0");r("dr")}return g._length=e}var n=b("../../lib"),p=b("../scatter/subtypes"),
h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),f=b("../scatter/line_shape_defaults"),d=b("../scatter/text_defaults"),l=b("../scatter/fillcolor_defaults"),k=b("../scatter/constants").PTS_LINESONLY,c=b("./attributes");y.exports={handleRThetaDefaults:q,supplyDefaults:function(e,g,m,r){function u(w,D){return n.coerce(e,g,c,w,D)}var v=q(e,g,r,u);if(v){u("thetaunit");u("mode",v<k?"lines+markers":"lines");u("text");u("hovertext");"fills"!==g.hoveron&&u("hovertemplate");p.hasLines(g)&&
(a(e,g,m,r,u),f(e,g,u),u("connectgaps"));p.hasMarkers(g)&&h(e,g,m,r,u,{gradient:!0});p.hasText(g)&&(u("texttemplate"),d(e,g,r,u));r=[];if(p.hasMarkers(g)||p.hasText(g))u("cliponaxis"),u("marker.maxdisplayed"),r.push("points");u("fill");"none"!==g.fill&&(l(e,g,m,u),p.hasLines(g)||f(e,g,u));"tonext"!==g.fill&&"toself"!==g.fill||r.push("fills");u("hoveron",r.join("+")||"points");n.coerceSelectionMarkerOpacity(g,u)}else g.visible=!1}}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,
"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1228}],1231:[function(b,y,F){var q=b("../../lib"),n=b("../../plots/cartesian/axes");y.exports=function(p,h,a){var f={},d=a[h.subplot]._subplot;d?(h=d.radialAxis,d=d.angularAxis):(d=a[h.subplot],h=d.radialaxis,d=d.angularaxis);a=h.c2l(p.r);f.rLabel=n.tickText(h,a,!0).text;p="degrees"===d.thetaunit?q.rad2deg(p.theta):p.theta;
f.thetaLabel=n.tickText(d,p,!0).text;return f}},{"../../lib":749,"../../plots/cartesian/axes":797}],1232:[function(b,y,F){function q(p,h,a,f){var d=a.radialAxis,l=a.angularAxis;d._hovertitle="r";l._hovertitle="";var k={};k[h.subplot]={_subplot:a};a=h._module.formatLabels(p,h,k);f.rLabel=a.rLabel;f.thetaLabel=a.thetaLabel;a=p.hi||h.hoverinfo;p=[];h.hovertemplate||(h=a.split("+"),-1!==h.indexOf("all")&&(h=["r","theta","text"]),-1!==h.indexOf("r")&&p.push(d._hovertitle+": "+f.rLabel),-1!==h.indexOf("theta")&&
p.push(l._hovertitle+": "+f.thetaLabel),-1!==h.indexOf("text")&&f.text&&(p.push(f.text),delete f.text),f.extraText=p.join("\x3cbr\x3e"))}var n=b("../scatter/hover");y.exports={hoverPoints:function(p,h,a,f){if((h=n(p,h,a,f))&&!1!==h[0].index){a=h[0];if(void 0===a.index)return h;p=p.subplot;f=a.cd[a.index];var d=a.trace;if(p.isPtInside(f))return a.xLabelVal=void 0,a.yLabelVal=void 0,q(f,d,p,a),a.hovertemplate=d.hovertemplate,h}},makeHoverPointText:q}},{"../scatter/hover":1166}],1233:[function(b,y,F){y.exports=
{moduleType:"trace",name:"scatterpolar",basePlotModule:b("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scatter/select"),meta:{}}},{"../../plots/polar":863,
"../scatter/marker_colorbar":1173,"../scatter/select":1176,"../scatter/style":1178,"./attributes":1228,"./calc":1229,"./defaults":1230,"./format_labels":1231,"./hover":1232,"./plot":1234}],1234:[function(b,y,F){var q=b("../scatter/plot"),n=b("../../constants/numerical").BADNUM;y.exports=function(p,h,a){var f=h.layers.frontplot.select("g.scatterlayer"),d={xaxis:h.xaxis,yaxis:h.yaxis,plot:h.framework,layerClipId:h._hasClipOnAxisFalse?h.clipIds.forTraces:null},l=h.radialAxis;h=h.angularAxis;for(var k=
0;k<a.length;k++)for(var c=a[k],e=0;e<c.length;e++){var g=c[e],m=g.r;if(m===n)g.x=g.y=n;else{m=l.c2g(m);var r=h.c2g(g.theta);g.x=m*Math.cos(r);g.y=m*Math.sin(r)}}q(p,d,a,f)}},{"../../constants/numerical":724,"../scatter/plot":1175}],1235:[function(b,y,F){F=b("../scatterpolar/attributes");var q=b("../scattergl/attributes");b=b("../../plots/template_attributes").texttemplateAttrs;y.exports={mode:F.mode,r:F.r,theta:F.theta,r0:F.r0,dr:F.dr,theta0:F.theta0,dtheta:F.dtheta,thetaunit:F.thetaunit,text:F.text,
texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:F.hovertext,hovertemplate:F.hovertemplate,line:q.line,connectgaps:q.connectgaps,marker:q.marker,fill:q.fill,fillcolor:q.fillcolor,textposition:q.textposition,textfont:q.textfont,hoverinfo:F.hoverinfo,selected:F.selected,unselected:F.unselected}},{"../../plots/template_attributes":875,"../scattergl/attributes":1206,"../scatterpolar/attributes":1228}],1236:[function(b,y,F){var q=b("../scatter/colorscale_calc"),n=b("../scatter/calc").calcMarkerSize,
p=b("../scattergl/convert"),h=b("../../plots/cartesian/axes"),a=b("../scattergl/constants").TOO_MANY_POINTS;y.exports=function(f,d){var l=f._fullLayout,k=d.subplot,c=l[k].radialaxis;k=l[k].angularaxis;l=d._r=c.makeCalcdata(d,"r");var e=d._theta=k.makeCalcdata(d,"theta");k=d._length;var g={};k<l.length&&(l=l.slice(0,k));k<e.length&&(e=e.slice(0,k));g.r=l;g.theta=e;q(f,d);f=g.opts=p.style(f,d);var m;k<a?m=n(d,k):f.marker&&(m=2*(f.marker.sizeAvg||Math.max(f.marker.size,3)));d._extremes.x=h.findExtremes(c,
l,{ppad:m});return[{x:!1,y:!1,t:g,trace:d}]}},{"../../plots/cartesian/axes":797,"../scatter/calc":1156,"../scatter/colorscale_calc":1158,"../scattergl/constants":1208,"../scattergl/convert":1209}],1237:[function(b,y,F){var q=b("../../lib"),n=b("../scatter/subtypes"),p=b("../scatterpolar/defaults").handleRThetaDefaults,h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),f=b("../scatter/text_defaults"),d=b("../scatter/fillcolor_defaults"),l=b("../scatter/constants").PTS_LINESONLY,k=b("./attributes");
y.exports=function(c,e,g,m){function r(v,w){return q.coerce(c,e,k,v,w)}var u=p(c,e,m,r);u?(r("thetaunit"),r("mode",u<l?"lines+markers":"lines"),r("text"),r("hovertext"),"fills"!==e.hoveron&&r("hovertemplate"),n.hasLines(e)&&(a(c,e,g,m,r),r("connectgaps")),n.hasMarkers(e)&&h(c,e,g,m,r),n.hasText(e)&&(r("texttemplate"),f(c,e,m,r)),r("fill"),"none"!==e.fill&&d(c,e,g,r),q.coerceSelectionMarkerOpacity(e,r)):e.visible=!1}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,
"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"../scatterpolar/defaults":1230,"./attributes":1235}],1238:[function(b,y,F){var q=b("../scatterpolar/format_labels");y.exports=function(n,p,h){var a=n.i;"r"in n||(n.r=p._r[a]);"theta"in n||(n.theta=p._theta[a]);return q(n,p,h)}},{"../scatterpolar/format_labels":1231}],1239:[function(b,y,F){var q=b("../scattergl/hover"),n=b("../scatterpolar/hover").makeHoverPointText;y.exports=
{hoverPoints:function(p,h,a,f){var d=p.cd[0].t,l=d.r;d=d.theta;if((h=q.hoverPoints(p,h,a,f))&&!1!==h[0].index){a=h[0];if(void 0===a.index)return h;p=p.subplot;f=a.cd[a.index];var k=a.trace;f.r=l[a.index];f.theta=d[a.index];if(p.isPtInside(f))return a.xLabelVal=void 0,a.yLabelVal=void 0,n(f,k,p,a),h}}}},{"../scattergl/hover":1214,"../scatterpolar/hover":1232}],1240:[function(b,y,F){y.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:b("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),
attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scattergl/select"),meta:{}}},{"../../plots/polar":863,"../scatter/marker_colorbar":1173,"../scattergl/select":1218,"./attributes":1235,"./calc":1236,"./defaults":1237,"./format_labels":1238,"./hover":1239,"./plot":1241}],1241:[function(b,y,F){var q=b("@plotly/point-cluster"),
n=b("fast-isnumeric"),p=b("../scattergl/plot"),h=b("../scattergl/scene_update"),a=b("../scattergl/convert"),f=b("../../lib"),d=b("../scattergl/constants").TOO_MANY_POINTS;y.exports=function(l,k,c){if(c.length){var e=k.radialAxis,g=k.angularAxis,m=h(l,k);c.forEach(function(r){if(r&&r[0]&&r[0].trace){var u=r[0];r=u.trace;u=u.t;var v=r._length,w=u.r,D=u.theta,C=u.opts,x,A=w.slice(),B=D.slice();for(x=0;x<w.length;x++)k.isPtInside({r:w[x],theta:D[x]})||(A[x]=NaN,B[x]=NaN);var t=Array(2*v),G=Array(v),H=
Array(v);for(x=0;x<v;x++){var I=A[x];if(n(I)){var J=e.c2g(I);var L=g.c2g(B[x],r.thetaunit);I=J*Math.cos(L);J*=Math.sin(L)}else I=J=NaN;G[x]=t[2*x]=I;H[x]=t[2*x+1]=J}u.tree=q(t);C.marker&&v>=d&&(C.marker.cluster=u.tree);C.marker&&(C.markerSel.positions=C.markerUnsel.positions=C.marker.positions=t);C.line&&1<t.length&&f.extendFlat(C.line,a.linePositions(l,r,t));C.text&&(f.extendFlat(C.text,{positions:t},a.textPosition(l,r,C.text,C.marker)),f.extendFlat(C.textSel,{positions:t},a.textPosition(l,r,C.text,
C.markerSel)),f.extendFlat(C.textUnsel,{positions:t},a.textPosition(l,r,C.text,C.markerUnsel)));C.fill&&!m.fill2d&&(m.fill2d=!0);C.marker&&!m.scatter2d&&(m.scatter2d=!0);C.line&&!m.line2d&&(m.line2d=!0);C.text&&!m.glText&&(m.glText=!0);m.lineOptions.push(C.line);m.fillOptions.push(C.fill);m.markerOptions.push(C.marker);m.markerSelectedOptions.push(C.markerSel);m.markerUnselectedOptions.push(C.markerUnsel);m.textOptions.push(C.text);m.textSelectedOptions.push(C.textSel);m.textUnselectedOptions.push(C.textUnsel);
m.selectBatch.push([]);m.unselectBatch.push([]);u.x=G;u.y=H;u.rawx=G;u.rawy=H;u.r=w;u.theta=D;u.positions=t;u._scene=m;u.index=m.count;m.count++}});return p(l,k,c)}}},{"../../lib":749,"../scattergl/constants":1208,"../scattergl/convert":1209,"../scattergl/plot":1216,"../scattergl/scene_update":1217,"@plotly/point-cluster":57,"fast-isnumeric":241}],1242:[function(b,y,F){F=b("../../plots/template_attributes").hovertemplateAttrs;var q=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scatter/attributes"),
p=b("../../plots/attributes"),h=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash;b=b("../../lib/extend").extendFlat;var f=n.marker,d=n.line,l=f.line;y.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:b({},n.mode,{dflt:"markers"}),text:b({},n.text,{}),texttemplate:q({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:b({},
n.hovertext,{}),line:{color:d.color,width:d.width,dash:a,shape:b({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:n.connectgaps,cliponaxis:n.cliponaxis,fill:b({},n.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:n.fillcolor,marker:b({symbol:f.symbol,opacity:f.opacity,maxdisplayed:f.maxdisplayed,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,line:b({width:l.width,editType:"calc"},h("marker.line")),gradient:f.gradient,editType:"calc"},
h("marker")),textfont:n.textfont,textposition:n.textposition,selected:n.selected,unselected:n.unselected,hoverinfo:b({},p.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:n.hoveron,hovertemplate:F()}},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1243:[function(b,y,F){var q=b("fast-isnumeric"),n=b("../scatter/colorscale_calc"),p=b("../scatter/arrays_to_calcdata"),
h=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,f=["a","b","c"],d={a:["b","c"],b:["a","c"],c:["a","b"]};y.exports=function(l,k){var c=l._fullLayout[k.subplot].sum,e=k.sum||c,g={a:k.a,b:k.b,c:k.c},m,r;for(m=0;m<f.length;m++){var u=f[m];if(!g[u]){var v=g[d[u][0]];var w=g[d[u][1]];var D=Array(v.length);for(r=0;r<v.length;r++)D[r]=e-v[r]-w[r];g[u]=D}}e=k._length;r=Array(e);for(m=0;m<e;m++)if(u=g.a[m],D=g.b[m],v=g.c[m],q(u)&&q(D)&&q(v)){u=+u;D=+D;v=+v;w=c/(u+D+v);1!==w&&(u*=w,D*=
w,v*=w);var C=u;w=v-D;r[m]={x:w,y:C,a:u,b:D,c:v}}else r[m]={x:!1,y:!1};a(k,e);n(l,k);p(r,k);h(r,k);return r}},{"../scatter/arrays_to_calcdata":1154,"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1244:[function(b,y,F){var q=b("../../lib"),n=b("../scatter/constants"),p=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),f=b("../scatter/line_shape_defaults"),d=b("../scatter/text_defaults"),l=b("../scatter/fillcolor_defaults"),
k=b("./attributes");y.exports=function(c,e,g,m){function r(C,x){return q.coerce(c,e,k,C,x)}var u=r("a"),v=r("b"),w=r("c");if(u){var D=u.length;v?(D=Math.min(D,v.length),w&&(D=Math.min(D,w.length))):D=w?Math.min(D,w.length):0}else v&&w&&(D=Math.min(v.length,w.length));if(D){e._length=D;r("sum");r("text");r("hovertext");"fills"!==e.hoveron&&r("hovertemplate");r("mode",D<n.PTS_LINESONLY?"lines+markers":"lines");p.hasLines(e)&&(a(c,e,g,m,r),f(c,e,r),r("connectgaps"));p.hasMarkers(e)&&h(c,e,g,m,r,{gradient:!0});
p.hasText(e)&&(r("texttemplate"),d(c,e,m,r));m=[];if(p.hasMarkers(e)||p.hasText(e))r("cliponaxis"),r("marker.maxdisplayed"),m.push("points");r("fill");"none"!==e.fill&&(l(c,e,g,r),p.hasLines(e)||f(c,e,r));"tonext"!==e.fill&&"toself"!==e.fill||m.push("fills");r("hoveron",m.join("+")||"points");q.coerceSelectionMarkerOpacity(e,r)}else e.visible=!1}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,
"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1242}],1245:[function(b,y,F){y.exports=function(q,n,p,h,a){n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);h[a]?(n=h[a],q.a=n.a,q.b=n.b,q.c=n.c):(q.a=n.a,q.b=n.b,q.c=n.c);return q}},{}],1246:[function(b,y,F){var q=b("../../plots/cartesian/axes");y.exports=function(n,p,h){var a={};p=h[p.subplot]._subplot;a.aLabel=q.tickText(p.aaxis,n.a,!0).text;a.bLabel=q.tickText(p.baxis,n.b,!0).text;a.cLabel=q.tickText(p.caxis,
n.c,!0).text;return a}},{"../../plots/cartesian/axes":797}],1247:[function(b,y,F){var q=b("../scatter/hover");y.exports=function(n,p,h,a){if((p=q(n,p,h,a))&&!1!==p[0].index){h=p[0];if(void 0===h.index)return a=n.xa._length,n=a*(1-h.y0/n.ya._length)/2,a-=n,h.x0=Math.max(Math.min(h.x0,a),n),h.x1=Math.max(Math.min(h.x1,a),n),p;var f=h.cd[h.index];n=h.trace;a=h.subplot;h.a=f.a;h.b=f.b;h.c=f.c;h.xLabelVal=void 0;h.yLabelVal=void 0;var d={};d[n.subplot]={_subplot:a};d=n._module.formatLabels(f,n,d);h.aLabel=
d.aLabel;h.bLabel=d.bLabel;h.cLabel=d.cLabel;d=f.hi||n.hoverinfo;f=[];n.hovertemplate||(d=d.split("+"),-1!==d.indexOf("all")&&(d=["a","b","c"]),-1!==d.indexOf("a")&&f.push(a.aaxis._hovertitle+": "+h.aLabel),-1!==d.indexOf("b")&&f.push(a.baxis._hovertitle+": "+h.bLabel),-1!==d.indexOf("c")&&f.push(a.caxis._hovertitle+": "+h.cLabel));h.extraText=f.join("\x3cbr\x3e");h.hovertemplate=n.hovertemplate;return p}}},{"../scatter/hover":1166}],1248:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:b("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":876,"../scatter/marker_colorbar":1173,"../scatter/select":1176,
"../scatter/style":1178,"./attributes":1242,"./calc":1243,"./defaults":1244,"./event_data":1245,"./format_labels":1246,"./hover":1247,"./plot":1249}],1249:[function(b,y,F){var q=b("../scatter/plot");y.exports=function(n,p,h){var a=p.plotContainer;a.select(".scatterlayer").selectAll("*").remove();a={xaxis:p.xaxis,yaxis:p.yaxis,plot:a,layerClipId:p._hasClipOnAxisFalse?p.clipIdRelative:null};p=p.layers.frontplot.select("g.scatterlayer");q(n,a,h,p)}},{"../scatter/plot":1175}],1250:[function(b,y,F){function q(l){return{valType:"info_array",
freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[l],editType:"plot"}}}var n=b("../scatter/attributes"),p=b("../../components/colorscale/attributes");F=b("../../plots/template_attributes").hovertemplateAttrs;var h=b("../scattergl/attributes"),a=b("../../plots/cartesian/constants").idRegex,f=b("../../plot_api/plot_template").templatedArray;b=b("../../lib/extend").extendFlat;n=n.marker;var d=n.line;d=b(p("marker.line",{editTypeOverride:"calc"}),{width:b({},d.width,{editType:"calc"}),
editType:"calc"});p=b(p("marker"),{symbol:n.symbol,size:b({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:d,editType:"calc"});p.color.editType=p.cmin.editType=p.cmax.editType="style";y.exports={dimensions:f("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear",
"log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:b({},h.text,{}),hovertext:b({},h.hovertext,{}),hovertemplate:F(),marker:p,xaxes:q("x"),yaxes:q("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:h.selected.marker,
editType:"calc"},unselected:{marker:h.unselected.marker,editType:"calc"},opacity:h.opacity}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/template_attributes":875,"../scatter/attributes":1155,"../scattergl/attributes":1206}],1251:[function(b,y,F){function q(c){var e=c._fullLayout,g=e._glcanvas.data()[0].regl,m=e._splomGrid;m||(m=e._splomGrid=p(g));m.update(n(c))}function n(c){function e(H,
I,J,L,E,K){var N=I[H+"color"];H=I[H+"width"];I=String(N+H);I in u?u[I].data.push(NaN,NaN,J,L,E,K):u[I]={data:[J,L,E,K],join:"rect",thickness:H,color:N,viewport:r,range:r,overlay:!1}}var g=c._fullLayout,m=g._size,r=[0,0,g.width,g.height],u={},v;for(v in g._splomSubplots){var w=g._plots[v],D=w.xaxis;w=w.yaxis;var C=D._gridVals,x=w._gridVals,A=m.b+w.domain[0]*m.h,B=-w._m,t=-B*w.r2l(w.range[0],w.calendar);if(D.showgrid)for(v=0;v<C.length;v++){var G=D._offset+D.l2p(C[v].x);e("grid",D,G,A,G,A+w._length)}if(w.showgrid)for(v=
0;v<x.length;v++)C=A+t+B*x[v].x,e("grid",w,D._offset,C,D._offset+D._length,C);k(c,D,w)&&(G=D._offset+D.l2p(0),e("zeroline",D,G,A,G,A+w._length));k(c,w,D)&&(C=A+t+0,e("zeroline",w,D._offset,C,D._offset+D._length,C))}c=[];for(v in u)c.push(u[v]);return c}var p=b("regl-line2d"),h=b("../../registry"),a=b("../../lib/prepare_regl"),f=b("../../plots/get_data").getModuleCalcData,d=b("../../plots/cartesian"),l=b("../../plots/cartesian/axis_ids").getFromId,k=b("../../plots/cartesian/axes").shouldShowZeroLine;
y.exports={name:"splom",attr:d.attr,attrRegex:d.attrRegex,layoutAttributes:d.layoutAttributes,supplyLayoutDefaults:d.supplyLayoutDefaults,drawFramework:d.drawFramework,plot:function(c){var e=c._fullLayout,g=h.getModule("splom"),m=f(c.calcdata,g)[0];a(c,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(e._hasOnlyLargeSploms&&q(c),g.plot(c,{},m))},drag:function(c){var e=c.calcdata,g=c._fullLayout;g._hasOnlyLargeSploms&&q(c);for(var m=0;m<e.length;m++){var r=e[m][0].trace,u=g._splomScenes[r.uid];
if("splom"===r.type&&u&&u.matrix){for(var v=c,w=r._visibleDims,D=u.viewOpts.ranges=Array(u.matrixOptions.data.length),C=0;C<w.length;C++){var x=w[C],A=D[C]=Array(4),B=l(v,r._diag[x][0]);B&&(A[0]=B.r2l(B.range[0]),A[2]=B.r2l(B.range[1]));if(x=l(v,r._diag[x][1]))A[1]=x.r2l(x.range[0]),A[3]=x.r2l(x.range[1])}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:D},{ranges:D}):u.matrix.update({ranges:D})}}},updateGrid:q,clean:function(c,e,g,m){var r={},u;if(m._splomScenes){for(u=0;u<c.length;u++){var v=
c[u];"splom"===v.type&&(r[v.uid]=1)}for(u=0;u<g.length;u++)if(v=g[u],!r[v.uid]){var w=m._splomScenes[v.uid];w&&w.destroy&&w.destroy();m._splomScenes[v.uid]=null;delete m._splomScenes[v.uid]}}0===Object.keys(m._splomScenes||{}).length&&delete m._splomScenes;m._splomGrid&&!e._hasOnlyLargeSploms&&m._hasOnlyLargeSploms&&(m._splomGrid.destroy(),m._splomGrid=null,delete m._splomGrid);d.clean(c,e,g,m)},updateFx:d.updateFx,toSVG:d.toSVG}},{"../../lib/prepare_regl":762,"../../plots/cartesian":810,"../../plots/cartesian/axes":797,
"../../plots/cartesian/axis_ids":800,"../../plots/get_data":834,"../../registry":880,"regl-line2d":509}],1252:[function(b,y,F){var q=b("../../lib"),n=b("../../plots/cartesian/axis_ids"),p=b("../scatter/calc").calcMarkerSize,h=b("../scatter/calc").calcAxisExpansion,a=b("../scatter/colorscale_calc"),f=b("../scattergl/convert").markerSelection,d=b("../scattergl/convert").markerStyle,l=b("./scene_update"),k=b("../../constants/numerical").BADNUM,c=b("../scattergl/constants").TOO_MANY_POINTS;y.exports=
function(e,g){function m(H,I){I=H.makeCalcdata({v:I.values,vcalendar:g.calendar},"v");for(var J=0;J<I.length;J++)I[J]=I[J]===k?NaN:I[J];w.push(I);D.push("log"===H.type?q.simpleMap(I,H.c2l):I)}var r=g.dimensions,u=g._length,v={},w=v.cdata=[],D=v.data=[],C=g._visibleDims=[],x;for(x=0;x<r.length;x++){var A=r[x];if(A.visible){var B=n.getFromId(e,g._diag[x][0]);var t=n.getFromId(e,g._diag[x][1]);B&&t&&B.type!==t.type?q.log("Skipping splom dimension "+x+" with conflicting axis types"):(B?(m(B,A),t&&"category"===
t.type&&(t._categories=B._categories.slice())):m(t,A),C.push(x))}}a(e,g);q.extendFlat(v,d(g));var G=w.length*u>c?2*(v.sizeAvg||Math.max(v.size,3)):p(g,u);for(u=0;u<C.length;u++)x=C[u],A=r[x],B=n.getFromId(e,g._diag[x][0])||{},t=n.getFromId(e,g._diag[x][1])||{},h(e,g,B,t,w[u],w[u],G);e=l(e,g);e.matrix||(e.matrix=!0);e.matrixOptions=v;e.selectedOptions=f(g,g.selected);e.unselectedOptions=f(g,g.unselected);return[{x:!1,y:!1,t:{},trace:g}]}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axis_ids":800,
"../scatter/calc":1156,"../scatter/colorscale_calc":1158,"../scattergl/constants":1208,"../scattergl/convert":1209,"./scene_update":1259}],1253:[function(b,y,F){function q(c,e){function g(r,u){return p.coerce(c,e,a.dimensions,r,u)}g("label");var m=g("values");m&&m.length?g("visible"):e.visible=!1;g("axis.type");g("axis.matches")}function n(c,e,g,m){function r(K,N,O,Q){if(K){var P=K.charAt(0),T=g._splomAxes[P];e["_"+P+"axes"][K]=1;Q.push(K);K in T||(K=T[K]={},O&&(K.label=O.label||"",O.visible&&O.axis&&
(O.axis.type&&(K.type=O.axis.type),O.axis.matches&&(K.matches=N))))}}var u=e.dimensions,v=u.length;c=e.showupperhalf;var w=e.showlowerhalf,D=e.diagonal.visible,C,x=Array(v),A=Array(v);for(C=0;C<v;C++){var B=C?C+1:"";x[C]="x"+B;A[C]="y"+B}x=m("xaxes",x);B=m("yaxes",A);var t=e._diag=Array(v);e._xaxes={};e._yaxes={};m=[];A=[];var G=!D&&!w,H=!D&&!c;e._axesDim={};for(C=0;C<v;C++){var I=u[C],J=0===C,L=C===v-1,E=J&&G||L&&H?void 0:x[C];J=J&&H||L&&G?void 0:B[C];r(E,J,I,m);r(J,E,I,A);t[C]=[E,J];e._axesDim[E]=
C;e._axesDim[J]=C}for(C=0;C<m.length;C++)for(u=0;u<A.length;u++)v=m[C]+A[u],C>u&&c?g._splomSubplots[v]=1:C<u&&w?g._splomSubplots[v]=1:C!==u||!D&&w&&c||(g._splomSubplots[v]=1);if(!w||!D&&c&&w)g._splomGridDflt.xside="bottom",g._splomGridDflt.yside="left"}var p=b("../../lib"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),f=b("../scatter/subtypes"),d=b("../scatter/marker_defaults"),l=b("../parcoords/merge_length"),k=b("../scattergl/helpers").isOpenSymbol;y.exports=function(c,e,g,m){function r(C,
x){return p.coerce(c,e,a,C,x)}var u=h(c,e,{name:"dimensions",handleItemDefaults:q}),v=r("diagonal.visible"),w=r("showupperhalf"),D=r("showlowerhalf");l(e,u,"values")&&(v||w||D)?(r("text"),r("hovertext"),r("hovertemplate"),d(c,e,g,m,r),g=k(e.marker.symbol),u=f.isBubble(e),r("marker.line.width",g||u?1:0),n(c,e,m,r),p.coerceSelectionMarkerOpacity(e,r)):e.visible=!1}},{"../../lib":749,"../../plots/array_container_defaults":793,"../parcoords/merge_length":1126,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,
"../scattergl/helpers":1213,"./attributes":1250}],1254:[function(b,y,F){var q=b("../../lib"),n=b("../scatter/colorscale_calc"),p=b("../scattergl/convert").markerStyle;y.exports=function(h,a){var f=a.trace;if(a=h._fullLayout._splomScenes[f.uid])n(h,f),q.extendFlat(a.matrixOptions,p(f)),h=q.extendFlat({},a.matrixOptions,a.viewOpts),a.matrix.update(h,null)}},{"../../lib":749,"../scatter/colorscale_calc":1158,"../scattergl/convert":1209}],1255:[function(b,y,F){F.getDimIndex=function(q,n){n=n._id;for(var p=
{x:0,y:1}[n.charAt(0)],h=q._visibleDims,a=0;a<h.length;a++)if(q._diag[h[a]][p]===n)return a;return!1}},{}],1256:[function(b,y,F){var q=b("./helpers"),n=b("../scattergl/hover").calcHover;y.exports={hoverPoints:function(p,h,a){var f=p.cd[0].trace,d=p.scene.matrixOptions.cdata,l=p.xa,k=p.ya;h=l.c2p(h);a=k.c2p(a);var c=p.distance,e=q.getDimIndex(f,l),g=q.getDimIndex(f,k);if(!1===e||!1===g)return[p];e=d[e];d=d[g];var m;for(g=0;g<e.length;g++){var r=d[g],u=l.c2p(e[g])-h;r=k.c2p(r)-a;u=Math.sqrt(u*u+r*r);
if(u<c){c=m=u;var v=g}}p.index=v;p.distance=c;p.dxy=m;return void 0===v?[p]:[n(p,e,d,f)]}}},{"../scattergl/hover":1214,"./helpers":1255}],1257:[function(b,y,F){F=b("../../registry");var q=b("../../components/grid");y.exports={moduleType:"trace",name:"splom",basePlotModule:b("./base_plot"),categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,
selectPoints:b("./select"),editStyle:b("./edit_style"),meta:{}};F.register(q)},{"../../components/grid":659,"../../registry":880,"../scatter/marker_colorbar":1173,"./attributes":1250,"./base_plot":1251,"./calc":1252,"./defaults":1253,"./edit_style":1254,"./hover":1256,"./plot":1258,"./select":1260}],1258:[function(b,y,F){var q=b("regl-splom"),n=b("../../lib"),p=b("../../plots/cartesian/axis_ids"),h=b("../../components/dragelement/helpers").selectMode;y.exports=function(a,f,d){if(d.length)for(f=0;f<
d.length;f++){var l,k,c=a,e=d[f][0],g=c._fullLayout,m=g._size,r=e.trace;var u=e.t;e=g._splomScenes[r.uid];var v=e.matrixOptions,w=v.cdata,D=g._glcanvas.data()[0].regl,C=g.dragmode;if(0!==w.length){v.lower=r.showupperhalf;v.upper=r.showlowerhalf;v.diagonal=r.diagonal.visible;var x=r._visibleDims,A=w.length,B=e.viewOpts={};B.ranges=Array(A);B.domains=Array(A);for(l=0;l<x.length;l++){var t=x[l];var G=B.ranges[l]=Array(4),H=B.domains[l]=Array(4);if(k=p.getFromId(c,r._diag[t][0]))G[0]=k._rl[0],G[2]=k._rl[1],
H[0]=k.domain[0],H[2]=k.domain[1];if(t=p.getFromId(c,r._diag[t][1]))G[1]=t._rl[0],G[3]=t._rl[1],H[1]=t.domain[0],H[3]=t.domain[1]}B.viewport=[m.l,m.b,m.w+m.l,m.h+m.b];!0===e.matrix&&(e.matrix=q(D));t=-1<g.clickmode.indexOf("select");g=!0;if(h(C)||r.selectedpoints||t){C=r._length;if(r.selectedpoints){k=e.selectBatch=r.selectedpoints;l={};for(t=0;t<k.length;t++)l[k[t]]=!0;k=[];for(t=0;t<C;t++)l[t]||k.push(t);e.unselectBatch=k}m=u.xpx=Array(A);A=u.ypx=Array(A);for(l=0;l<x.length;l++){t=x[l];if(k=p.getFromId(c,
r._diag[t][0]))for(m[l]=Array(C),u=0;u<C;u++)m[l][u]=k.c2p(w[l][u]);if(t=p.getFromId(c,r._diag[t][1]))for(A[l]=Array(C),u=0;u<C;u++)A[l][u]=t.c2p(w[l][u])}if(e.selectBatch.length||e.unselectBatch.length)c=n.extendFlat({},v,e.unselectedOptions,B),r=n.extendFlat({},v,e.selectedOptions,B),e.matrix.update(c,r),g=!1}else u.xpx=u.ypx=null;g&&(v=n.extendFlat({},v,B),e.matrix.update(v,null))}}}},{"../../components/dragelement/helpers":633,"../../lib":749,"../../plots/cartesian/axis_ids":800,"regl-splom":511}],
1259:[function(b,y,F){var q=b("../../lib");y.exports=function(n,p){var h=n._fullLayout;n=p.uid;var a=h._splomScenes;a||(a=h._splomScenes={});h={dirty:!0,selectBatch:[],unselectBatch:[]};var f={matrix:!1,selectBatch:[],unselectBatch:[]},d=a[p.uid];d||(d=a[n]=q.extendFlat({},h,f),d.draw=function(){d.matrix&&d.matrix.draw&&(d.selectBatch.length||d.unselectBatch.length?d.matrix.draw(d.unselectBatch,d.selectBatch):d.matrix.draw());d.dirty=!1},d.destroy=function(){d.matrix&&d.matrix.destroy&&d.matrix.destroy();
d.matrixOptions=null;d.selectBatch=null;d=d.unselectBatch=null});d.dirty||q.extendFlat(d,h);return d}},{"../../lib":749}],1260:[function(b,y,F){var q=b("../../lib"),n=b("../scatter/subtypes"),p=b("./helpers");y.exports=function(h,a){var f=h.cd,d=f[0].trace,l=f[0].t;f=h.scene;var k=f.matrixOptions.cdata,c=h.xaxis,e=h.yaxis,g=[];if(!f)return g;var m=!n.hasMarkers(d)&&!n.hasText(d);if(!0!==d.visible||m)return g;c=p.getDimIndex(d,c);e=p.getDimIndex(d,e);if(!1===c||!1===e)return g;d=l.xpx[c];l=l.ypx[e];
c=k[c];m=k[e];k=[];e=[];if(!1!==a&&!a.degenerate)for(var r=0;r<c.length;r++)a.contains([d[r],l[r]],null,r,h)?(k.push(r),g.push({pointNumber:r,x:c[r],y:m[r]})):e.push(r);h=f.matrixOptions;k.length||e.length?f.selectBatch.length||f.unselectBatch.length||f.matrix.update(f.unselectedOptions,q.extendFlat({},h,f.selectedOptions,f.viewOpts)):f.matrix.update(h,null);f.selectBatch=k;f.unselectBatch=e;return g}},{"../../lib":749,"../scatter/subtypes":1179,"./helpers":1255}],1261:[function(b,y,F){F=b("../../components/colorscale/attributes");
var q=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../mesh3d/attributes"),p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var h={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},
y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:q({editType:"calc"},{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")}),showlegend:b({},p.showlegend,{dflt:!1})};b(h,F("",{colorAttr:"u/v/w norm",
showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){h[a]=n[a]});h.hoverinfo=b({},p.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),dflt:"x+y+z+norm+text+name"});h.transforms=void 0;y.exports=h},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../mesh3d/attributes":1096}],1262:[function(b,y,F){function q(a){var f=a._x,d=a._y,
l=a._z,k=a._len,c,e,g=-Infinity,m=Infinity,r=-Infinity,u=Infinity,v=-Infinity,w=Infinity,D="";if(k){var C=f[0];var x=d[0];var A=l[0]}if(1<k){var B=f[k-1];var t=d[k-1];var G=l[k-1]}for(c=0;c<k;c++){g=Math.max(g,f[c]);m=Math.min(m,f[c]);r=Math.max(r,d[c]);u=Math.min(u,d[c]);v=Math.max(v,l[c]);w=Math.min(w,l[c]);if(!H&&f[c]!==C){var H=!0;D+="x"}if(!I&&d[c]!==x){var I=!0;D+="y"}if(!J&&l[c]!==A){var J=!0;D+="z"}}H||(D+="x");I||(D+="y");J||(D+="z");var L=p.distinctVals(a._x).vals,E=p.distinctVals(a._y).vals,
K=p.distinctVals(a._z).vals;D=D.replace("x",(C>B?"-":"+")+"x");D=D.replace("y",(x>t?"-":"+")+"y");D=D.replace("z",(A>G?"-":"+")+"z");if(!k||k<L.length*E.length*K.length)k=0,L=[],E=[],K=[];c=function(T){return"x"===T?f:"y"===T?d:l};B=function(T){return"x"===T?L:"y"===T?E:K};G=function(T){return T[k-1]<T[0]?-1:1};a=c(D[1]);H=c(D[3]);I=c(D[5]);J=B(D[1]).length;C=B(D[3]).length;B=B(D[5]).length;x=!1;t=G(c(D[1]));A=G(c(D[3]));var N=G(c(D[5]));for(c=0;c<B-1;c++){for(G=0;G<C-1;G++){for(e=0;e<J-1;e++){var O=
J*(C*c+G)+e,Q=J*(C*c+(G+1))+e,P=J*(C*(c+1)+G)+e;a[O]*t<a[J*(C*c+G)+(e+1)]*t&&H[O]*A<H[Q]*A&&I[O]*N<I[P]*N||(x=!0);if(x)break}if(x)break}if(x)break}x&&(p.warn("Encountered arbitrary coordinates! Unable to input data grid."),k=0,L=[],E=[],K=[]);return{xMin:m,yMin:u,zMin:w,xMax:g,yMax:r,zMax:v,Xs:L,Ys:E,Zs:K,len:k,fill:D}}function n(a,f){void 0===f&&(f=a.length);if(p.isTypedArray(a))return a.subarray(0,f);for(var d=[],l=0;l<f;l++)d[l]=+a[l];return d}var p=b("../../lib"),h=b("../../components/colorscale/calc");
y.exports={calc:function(a,f){f._len=Math.min(f.u.length,f.v.length,f.w.length,f.x.length,f.y.length,f.z.length);f._u=n(f.u,f._len);f._v=n(f.v,f._len);f._w=n(f.w,f._len);f._x=n(f.x,f._len);f._y=n(f.y,f._len);f._z=n(f.z,f._len);var d=q(f);f._gridFill=d.fill;f._Xs=d.Xs;f._Ys=d.Ys;f._Zs=d.Zs;f._len=d.len;var l=0;if(f.starts){var k=n(f.starts.x||[]);var c=n(f.starts.y||[]);var e=n(f.starts.z||[]);l=Math.min(k.length,c.length,e.length)}f._startsX=k||[];f._startsY=c||[];f._startsZ=e||[];var g=0,m=Infinity,
r;for(r=0;r<f._len;r++){var u=f._u[r],v=f._v[r],w=f._w[r];u=Math.sqrt(u*u+v*v+w*w);g=Math.max(g,u);m=Math.min(m,u)}h(a,f,{vals:[m,g],containerStr:"",cLetter:"c"});for(r=0;r<l;r++)a=k[r],d.xMax=Math.max(d.xMax,a),d.xMin=Math.min(d.xMin,a),a=c[r],d.yMax=Math.max(d.yMax,a),d.yMin=Math.min(d.yMin,a),a=e[r],d.zMax=Math.max(d.zMax,a),d.zMin=Math.min(d.zMin,a);f._slen=l;f._normMax=g;f._xbnds=[d.xMin,d.xMax];f._ybnds=[d.yMin,d.yMax];f._zbnds=[d.zMin,d.zMax]},filter:n,processGrid:q}},{"../../components/colorscale/calc":623,
"../../lib":749}],1263:[function(b,y,F){function q(g,m){this.scene=g;this.uid=m;this.data=this.mesh=null}function n(g){var m=g.length;return 2<m?g.slice(1,m-1):2===m?[(g[0]+g[1])/2]:g}function p(g){var m=g.length;return 1===m?[.5,.5]:[g[1]-g[0],g[m-1]-g[m-2]]}function h(g,m){function r(J,L){var E=u[L],K=v[e[L]];return d.simpleMap(J,function(N){return E.d2l(N)*K})}var u=g.fullSceneLayout,v=g.dataScale,w=m._len;g={};g.vectors=c(r(m._u,"xaxis"),r(m._v,"yaxis"),r(m._w,"zaxis"),w);if(!w)return{positions:[],
cells:[]};var D=r(m._Xs,"xaxis"),C=r(m._Ys,"yaxis");w=r(m._Zs,"zaxis");g.meshgrid=[D,C,w];g.gridFill=m._gridFill;if(m._slen)g.startingPositions=c(r(m._startsX,"xaxis"),r(m._startsY,"yaxis"),r(m._startsZ,"zaxis"));else{for(var x=C[0],A=n(D),B=n(w),t=Array(A.length*B.length),G=0,H=0;H<A.length;H++)for(var I=0;I<B.length;I++)t[G++]=[A[H],x,B[I]];g.startingPositions=t}g.colormap=l(m);g.tubeSize=m.sizeref;g.maxLength=m.maxdisplayed;x=r(m._xbnds,"xaxis");A=r(m._ybnds,"yaxis");B=r(m._zbnds,"zaxis");D=p(D);
C=p(C);w=p(w);g=a(g,[[x[0]-D[0],A[0]-C[0],B[0]-w[0]],[x[1]+D[1],A[1]+C[1],B[1]+w[1]]]);w=k(m);g.vertexIntensityBounds=[w.min/m._normMax,w.max/m._normMax];w=m.lightposition;g.lightPosition=[w.x,w.y,w.z];g.ambient=m.lighting.ambient;g.diffuse=m.lighting.diffuse;g.specular=m.lighting.specular;g.roughness=m.lighting.roughness;g.fresnel=m.lighting.fresnel;g.opacity=m.opacity;m._pad=g.tubeScale*m.sizeref*2;return g}var a=b("gl-streamtube3d"),f=a.createTubeMesh,d=b("../../lib"),l=b("../../lib/gl_format_color").parseColorScale,
k=b("../../components/colorscale").extractOpts,c=b("../../plots/gl3d/zip3"),e={xaxis:0,yaxis:1,zaxis:2};b=q.prototype;b.handlePick=function(g){function m(D,C){var x=u[e[C]];return r[C].l2c(D)/x}var r=this.scene.fullSceneLayout,u=this.scene.dataScale;if(g.object===this.mesh){var v=g.data.position,w=g.data.velocity;g.traceCoordinate=[m(v[0],"xaxis"),m(v[1],"yaxis"),m(v[2],"zaxis"),m(w[0],"xaxis"),m(w[1],"yaxis"),m(w[2],"zaxis"),g.data.intensity*this.data._normMax,g.data.divergence];g.textLabel=this.data.hovertext||
this.data.text;return!0}};b.update=function(g){this.data=g;g=h(this.scene,g);this.mesh.update(g)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};y.exports=function(g,m){var r=g.glplot.gl,u=h(g,m);r=f(r,u);u=new q(g,m.uid);u.mesh=r;u.data=m;r._trace=u;g.glplot.add(r);return u}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/gl3d/zip3":850,"gl-streamtube3d":323}],1264:[function(b,y,F){var q=b("../../lib"),n=b("../../components/colorscale/defaults"),
p=b("./attributes");y.exports=function(h,a,f,d){function l(r,u){return q.coerce(h,a,p,r,u)}f=l("u");var k=l("v"),c=l("w"),e=l("x"),g=l("y"),m=l("z");f&&f.length&&k&&k.length&&c&&c.length&&e&&e.length&&g&&g.length&&m&&m.length?(l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),n(h,a,d,l,{prefix:"",cLetter:"c"}),
l("text"),l("hovertext"),l("hovertemplate"),a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1261}],1265:[function(b,y,F){y.exports={moduleType:"trace",name:"streamtube",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc").calc,plot:b("./convert"),eventData:function(q,n){q.tubex=q.x;q.tubey=q.y;q.tubez=q.z;q.tubeu=n.traceCoordinate[3];
q.tubev=n.traceCoordinate[4];q.tubew=n.traceCoordinate[5];q.norm=n.traceCoordinate[6];q.divergence=n.traceCoordinate[7];delete q.x;delete q.y;delete q.z;return q},meta:{}}},{"../../plots/gl3d":839,"./attributes":1261,"./calc":1262,"./convert":1263,"./defaults":1264}],1266:[function(b,y,F){F=b("../../plots/attributes");var q=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../plots/template_attributes").texttemplateAttrs,p=b("../../components/colorscale/attributes"),h=b("../../plots/domain").attributes,
a=b("../pie/attributes"),f=b("./constants");b=b("../../lib/extend").extendFlat;y.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",
dflt:-1},marker:b({colors:{valType:"data_array",editType:"calc"},line:{color:b({},a.marker.line.color,{dflt:null}),width:b({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},p("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:"label;text;value;current path;percent root;percent entry;percent parent".split(";"),extras:["none"],editType:"plot"},texttemplate:n({editType:"plot"},
{keys:f.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:b({},F.hoverinfo,{flags:"label;text;value;name;current path;percent root;percent entry;percent parent".split(";"),dflt:"label+text+value+name"}),hovertemplate:q({},{keys:f.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:b({},a.outsidetextfont,{}),domain:h({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":622,
"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129,"./constants":1269}],1267:[function(b,y,F){var q=b("../../plots/plots");F.name="sunburst";F.plot=function(n,p,h,a){q.plotBasePlot(F.name,n,p,h,a)};F.clean=function(n,p,h,a){q.cleanBasePlot(F.name,n,p,h,a)}},{"../../plots/plots":860}],1268:[function(b,y,F){function q(g,m,r){var u=0,v=g.children;if(v){for(var w=v.length,D=0;D<w;D++)u+=q(v[D],m,r);r.branches&&u++}else r.leaves&&
u++;g.value=g.data.data.value=u;m._values||(m._values=[]);return m._values[g.data.data.i]=u}var n=b("d3-hierarchy"),p=b("fast-isnumeric"),h=b("../../lib"),a=b("../../components/colorscale").makeColorScaleFuncFromTrace,f=b("../pie/calc").makePullColorFn,d=b("../pie/calc").generateExtendedColors,l=b("../../components/colorscale").calc,k=b("../../constants/numerical").ALMOST_EQUAL,c={},e={};F.calc=function(g,m){var r=g._fullLayout,u=m.ids,v=h.isArrayOrTypedArray(u),w=m.labels,D=m.parents,C=m.values,
x=h.isArrayOrTypedArray(C),A=[],B={},t={},G=function(Y,ea){B[Y]?B[Y].push(ea):B[Y]=[ea];t[ea]=1},H=function(Y){return Y||"number"===typeof Y},I=function(Y){return!x||p(C[Y])&&0<=C[Y]};if(v){v=Math.min(u.length,D.length);var J=function(Y){return H(u[Y])&&I(Y)};var L=function(Y){return String(u[Y])}}else v=Math.min(w.length,D.length),J=function(Y){return H(w[Y])&&I(Y)},L=function(Y){return String(w[Y])};x&&(v=Math.min(v,C.length));for(var E=0;E<v;E++)if(J(E)){var K=L(E),N=H(D[E])?String(D[E]):"",O=
{i:E,id:K,pid:N,label:H(w[E])?String(w[E]):""};x&&(O.v=+C[E]);A.push(O);G(N,K)}if(!B[""]){D=[];for(var Q in B)t[Q]||D.push(Q);if(1===D.length)Q=D[0],A.unshift({hasImpliedRoot:!0,id:Q,pid:"",label:Q});else return h.warn("Multiple implied roots, cannot build "+m.type+" hierarchy.")}else if(1<B[""].length){Q=h.randstr();for(D=0;D<A.length;D++)""===A[D].pid&&(A[D].pid=Q);A.unshift({hasMultipleRoots:!0,id:Q,pid:"",label:""})}try{var P=n.stratify().id(function(Y){return Y.id}).parentId(function(Y){return Y.pid})(A)}catch(Y){return h.warn("Failed to build "+
m.type+" hierarchy. Error: "+Y.message)}P=n.hierarchy(P);var T=!1;if(x)switch(m.branchvalues){case "remainder":P.sum(function(Y){return Y.data.v});break;case "total":P.each(function(Y){var ea=Y.data.data,da=ea.v;if(Y.children){var ca=Y.children.reduce(function(la,pa){return la+pa.data.data.v},0);if(ea.hasImpliedRoot||ea.hasMultipleRoots)da=ca;if(da<ca*k)return T=!0,h.warn(["Total value for node",Y.data.data.id,"is smaller than the sum of its children. \nparent value \x3d",da,"\nchildren sum \x3d",
ca].join(" "))}Y.value=da})}else q(P,m,{branches:-1!==m.count.indexOf("branches"),leaves:-1!==m.count.indexOf("leaves")});if(!T){P.sort(function(Y,ea){return ea.value-Y.value});var V=m.marker.colors||[];Q=!!V.length;if(m._hasColorscale){Q||(V=x?m.values:m._values);l(g,m,{vals:V,containerStr:"marker",cLetter:"c"});var aa=a(m.marker)}else var ba=f(r["_"+m.type+"colormap"]);P.each(function(Y){Y=Y.data.data;Y.color=m._hasColorscale?aa(V[Y.i]):ba(V[Y.i],Y.id)});A[0].hierarchy=P;return A}};F._runCrossTraceCalc=
function(g,m){function r(x){var A=x.data.data,B=A.id;!1===A.color&&(w[B]?A.color=w[B]:x.parent?x.parent.parent?A.color=x.parent.data.data.color:(w[B]=A.color=v[D%v.length],D++):A.color="rgba(0,0,0,0)")}var u=m._fullLayout;m=m.calcdata;var v=u[g+"colorway"],w=u["_"+g+"colormap"];u["extend"+g+"colors"]&&(v=d(v,"treemap"===g?e:c));var D=0;for(u=0;u<m.length;u++){var C=m[u][0];C.trace.type===g&&C.hierarchy&&C.hierarchy.each(r)}};F.crossTraceCalc=function(g){return F._runCrossTraceCalc("sunburst",g)}},
{"../../components/colorscale":627,"../../constants/numerical":724,"../../lib":749,"../pie/calc":1131,"d3-hierarchy":161,"fast-isnumeric":241}],1269:[function(b,y,F){y.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" ")}},{}],1270:[function(b,y,F){var q=b("../../lib"),n=b("./attributes"),p=b("../../plots/domain").defaults,h=b("../bar/defaults").handleText;b=b("../../components/colorscale");var a=
b.hasColorscale,f=b.handleDefaults;y.exports=function(d,l,k,c){function e(m,r){return q.coerce(d,l,n,m,r)}k=e("labels");var g=e("parents");k&&k.length&&g&&g.length?((k=e("values"))&&k.length?e("branchvalues"):e("count"),e("level"),e("maxdepth"),e("marker.line.width")&&e("marker.line.color",c.paper_bgcolor),e("marker.colors"),(k=l._hasColorscale=a(d,"marker","colors")||(d.marker||{}).coloraxis)&&f(d,l,c,e,{prefix:"marker.",cLetter:"c"}),e("leaf.opacity",k?1:.7),k=e("text"),e("texttemplate"),l.texttemplate||
e("textinfo",Array.isArray(k)?"text+label":"label"),e("hovertext"),e("hovertemplate"),h(d,l,c,e,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),e("insidetextorientation"),p(l,c,e),l._length=null):l.visible=!1}},{"../../components/colorscale":627,"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"./attributes":1266}],1271:[function(b,y,F){function q(c,e,g){for(var m=c.data.data,r={curveNumber:e.index,
pointNumber:m.i,data:e._input,fullData:e},u=0;u<g.length;u++){var v=g[u];v in c&&(r[v]=c[v])}"parentString"in c&&!l.isHierarchyRoot(c)&&(r.parent=c.parentString);h(r,e,m.i);return r}var n=b("d3"),p=b("../../registry"),h=b("../../components/fx/helpers").appendArrayPointValue,a=b("../../components/fx"),f=b("../../lib"),d=b("../../lib/events"),l=b("./helpers"),k=b("../pie/helpers").formatPieValue;y.exports=function(c,e,g,m,r){var u=m[0],v=u.trace,w=u.hierarchy,D="sunburst"===v.type,C="treemap"===v.type;
"_hasHoverLabel"in v||(v._hasHoverLabel=!1);"_hasHoverEvent"in v||(v._hasHoverEvent=!1);c.on("mouseover",function(x){var A=g._fullLayout;if(!g._dragging&&!1!==A.hovermode){var B=g._fullData[v.index],t=x.data.data,G=t.i,H=l.isHierarchyRoot(x),I=l.getParent(w,x),J=l.getValue(x),L=function(ea){return f.castOption(B,G,ea)},E=L("hovertemplate"),K=a.castHoverinfo(B,A,G),N=A.separators;if(E||K&&"none"!==K&&"skip"!==K){if(D){var O=u.cx+x.pxmid[0]*(1-x.rInscribed);var Q=u.cy+x.pxmid[1]*(1-x.rInscribed)}C&&
(O=x._hoverX,Q=x._hoverY);var P={},T=[],V=[],aa=function(ea){return-1!==T.indexOf(ea)};K&&(T="all"===K?B._module.attributes.hoverinfo.flags:K.split("+"));P.label=t.label;aa("label")&&P.label&&V.push(P.label);t.hasOwnProperty("v")&&(P.value=t.v,P.valueLabel=k(P.value,N),aa("value")&&V.push(P.valueLabel));P.currentPath=x.currentPath=l.getPath(x.data);aa("current path")&&!H&&V.push(P.currentPath);var ba=[];K=function(){-1===ba.indexOf(Y)&&(V.push(Y),ba.push(Y))};P.percentParent=x.percentParent=J/l.getValue(I);
P.parent=x.parentString=l.getPtLabel(I);if(aa("percent parent")){var Y=l.formatPercent(P.percentParent,N)+" of "+P.parent;K()}P.percentEntry=x.percentEntry=J/l.getValue(e);P.entry=x.entry=l.getPtLabel(e);!aa("percent entry")||H||x.onPathbar||(Y=l.formatPercent(P.percentEntry,N)+" of "+P.entry,K());P.percentRoot=x.percentRoot=J/l.getValue(w);P.root=x.root=l.getPtLabel(w);aa("percent root")&&!H&&(Y=l.formatPercent(P.percentRoot,N)+" of "+P.root,K());P.text=L("hovertext")||L("text");aa("text")&&(Y=P.text,
f.isValidTextValue(Y)&&V.push(Y));t={trace:B,y:Q,text:V.join("\x3cbr\x3e"),name:E||aa("name")?B.name:void 0,color:L("hoverlabel.bgcolor")||t.color,borderColor:L("hoverlabel.bordercolor"),fontFamily:L("hoverlabel.font.family"),fontSize:L("hoverlabel.font.size"),fontColor:L("hoverlabel.font.color"),nameLength:L("hoverlabel.namelength"),textAlign:L("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:P,eventData:[q(x,B,r.eventDataKeys)]};D&&(t.x0=O-x.rInscribed*x.rpx1,t.x1=O+x.rInscribed*x.rpx1,t.idealAlign=
0>x.pxmid[0]?"left":"right");C&&(t.x=O,t.idealAlign=0>O?"left":"right");a.loneHover(t,{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:g});v._hasHoverLabel=!0}C&&(A=c.select("path.surface"),r.styleOne(A,x,B,{hovered:!0}));v._hasHoverEvent=!0;g.emit("plotly_hover",{points:[q(x,B,r.eventDataKeys)],event:n.event})}});c.on("mouseout",function(x){var A=g._fullLayout,B=g._fullData[v.index],t=n.select(this).datum();v._hasHoverEvent&&(x.originalEvent=n.event,g.emit("plotly_unhover",{points:[q(t,
B,r.eventDataKeys)],event:n.event}),v._hasHoverEvent=!1);v._hasHoverLabel&&(a.loneUnhover(A._hoverlayer.node()),v._hasHoverLabel=!1);C&&(x=c.select("path.surface"),r.styleOne(x,t,B,{hovered:!1}))});c.on("click",function(x){var A=g._fullLayout,B=g._fullData[v.index],t=D&&(l.isHierarchyRoot(x)||l.isLeaf(x)),G=l.getPtId(x);G=l.isEntry(x)?l.findEntryWithChild(w,G):l.findEntryWithLevel(w,G);G=l.getPtId(G);var H={points:[q(x,B,r.eventDataKeys)],event:n.event};t||(H.nextLevel=G);H=d.triggerHandler(g,"plotly_"+
v.type+"click",H);!1!==H&&A.hovermode&&(g._hoverdata=[q(x,B,r.eventDataKeys)],a.click(g,n.event));t||!1===H||g._dragging||g._transitioning||(p.call("_storeDirectGUIEdit",B,A._tracePreGUI[B.uid],{level:B.level}),x={data:[{level:G}],traces:[v.index]},B={frame:{redraw:!1,duration:r.transitionTime},transition:{duration:r.transitionTime,easing:r.transitionEasing},mode:"immediate",fromcurrent:!0},a.loneUnhover(A._hoverlayer.node()),p.call("animate",g,x,B))})}},{"../../components/fx":655,"../../components/fx/helpers":651,
"../../lib":749,"../../lib/events":738,"../../registry":880,"../pie/helpers":1134,"./helpers":1272,d3:169}],1272:[function(b,y,F){var q=b("../../lib"),n=b("../../components/color"),p=b("../../lib/setcursor"),h=b("../pie/helpers");F.findEntryWithLevel=function(a,f){var d;f&&a.eachAfter(function(l){if(F.getPtId(l)===f)return d=l.copy()});return d||a};F.findEntryWithChild=function(a,f){var d;a.eachAfter(function(l){for(var k=l.children||[],c=0;c<k.length;c++)if(F.getPtId(k[c])===f)return d=l.copy()});
return d||a};F.isEntry=function(a){return!a.parent};F.isLeaf=function(a){return!a.children};F.getPtId=function(a){return a.data.data.id};F.getPtLabel=function(a){return a.data.data.label};F.getValue=function(a){return a.value};F.isHierarchyRoot=function(a){return""===a.data.data.pid};F.setSliceCursor=function(a,f,d){f=d.isTransitioning;f||(f=a.datum(),f=d.hideOnRoot&&F.isHierarchyRoot(f)||d.hideOnLeaves&&F.isLeaf(f));p(a,f?null:"pointer")};F.getInsideTextFontKey=function(a,f,d,l,k){d=d.data.data.i;
return q.castOption(f,d,((k||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+a)||q.castOption(f,d,"textfont."+a)||l.size};F.getOutsideTextFontKey=function(a,f,d,l){d=d.data.data.i;return q.castOption(f,d,"outsidetextfont."+a)||q.castOption(f,d,"textfont."+a)||l.size};F.isOutsideText=function(a,f){return!a._hasColorscale&&F.isHierarchyRoot(f)};F.determineTextFont=function(a,f,d,l){if(F.isOutsideText(a,f))a={color:F.getOutsideTextFontKey("color",a,f,d),family:F.getOutsideTextFontKey("family",
a,f,d),size:F.getOutsideTextFontKey("size",a,f,d)};else{var k=f.data.data,c=k.i,e=q.castOption(a,c,((l||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");!e&&a._input.textfont&&(e=q.castOption(a._input,c,"textfont.color"));a={color:e||n.contrast(k.color),family:F.getInsideTextFontKey("family",a,f,d,l),size:F.getInsideTextFontKey("size",a,f,d,l)}}return a};F.hasTransition=function(a){return!!(a&&0<a.duration)};F.getMaxDepth=function(a){return 0<=a.maxdepth?a.maxdepth:Infinity};F.isHeader=
function(a,f){return!(F.isLeaf(a)||a.depth===f._maxDepth-1)};F.getParent=function(a,f){return F.findEntryWithLevel(a,f.data.data.pid)};F.listPath=function(a,f){a=a.parent;if(!a)return[];var d=f?[a.data[f]]:[a];return F.listPath(a,f).concat(d)};F.getPath=function(a){return F.listPath(a,"label").join("/")+"/"};F.formatValue=h.formatPieValue;F.formatPercent=function(a,f){var d=q.formatPercent(a,0);"0%"===d&&(d=h.formatPiePercent(a,f));return d}},{"../../components/color":615,"../../lib":749,"../../lib/setcursor":769,
"../pie/helpers":1134}],1273:[function(b,y,F){y.exports={moduleType:"trace",name:"sunburst",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1173,"./attributes":1266,
"./base_plot":1267,"./calc":1268,"./defaults":1270,"./layout_attributes":1274,"./layout_defaults":1275,"./plot":1276,"./style":1277}],1274:[function(b,y,F){y.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1275:[function(b,y,F){var q=b("../../lib"),n=b("./layout_attributes");y.exports=function(p,h){q.coerce(p,h,n,"sunburstcolorway",h.colorway);q.coerce(p,h,n,"extendsunburstcolors",void 0)}},{"../../lib":749,"./layout_attributes":1274}],
1276:[function(b,y,F){function q(C,x,A,B){function t(ha){var ma=D.getPtId(ha),wa=Y[ma],na=Y[D.getPtId(O)];if(na){var ya=ha.x1>na.x1?2*Math.PI:0;ha=ha.rpx1<na.rpx1?{rpx0:0,rpx1:0}:{x0:ya,x1:ya}}else{var Fa,Ha=D.getPtId(ha.parent);E.each(function(hb){if(D.getPtId(hb)===Ha)return Fa=hb});ha=Fa.children;var eb;ha.forEach(function(hb,ob){if(D.getPtId(hb)===ma)return eb=ob});ha=ha.length;na=a.interpolate(Fa.x0,Fa.x1);ha={rpx0:T,rpx1:T,x0:na(eb/ha),x1:na((eb+1)/ha)}}return a.interpolate(wa,ha)}function G(ha){var ma=
Y[D.getPtId(ha)],wa={x0:ha.x0,x1:ha.x1,rpx0:ha.rpx0,rpx1:ha.rpx1};ma||(ba?ha.parent?ka?(ha=ha.x1>ka?2*Math.PI:0,ma={x0:ha,x1:ha}):(ma={rpx0:T,rpx1:T},l.extendFlat(ma,I(ha))):ma={rpx0:0,rpx1:0}:ma={x0:0,x1:0});return a.interpolate(ma,wa)}function H(ha){var ma=Y[D.getPtId(ha)],wa=ha.transform;ma||(ma={rpx1:ha.rpx1,transform:{textPosAngle:wa.textPosAngle,scale:0,rotate:wa.rotate,rCenter:wa.rCenter,x:wa.x,y:wa.y}},ba?ha.parent?ka?ma.x0=ma.x1=ha.x1>ka?2*Math.PI:0:l.extendFlat(ma,I(ha)):ma.x0=ma.x1=0:ma.x0=
ma.x1=0);var na=a.interpolate(ma.transform.textPosAngle,ha.transform.textPosAngle),ya=a.interpolate(ma.rpx1,ha.rpx1),Fa=a.interpolate(ma.x0,ha.x0),Ha=a.interpolate(ma.x1,ha.x1),eb=a.interpolate(ma.transform.scale,wa.scale),hb=a.interpolate(ma.transform.rotate,wa.rotate),ob=0===wa.rCenter?3:0===ma.transform.rCenter?1/3:1,ib=a.interpolate(ma.transform.rCenter,wa.rCenter);return function(Pa){var sb=ya(Pa),tb=Fa(Pa),Aa=Ha(Pa),Ka=ib(Math.pow(Pa,ob));tb=la(sb,(tb+Aa)/2);Aa=na(Pa);sb={pxmid:tb,rpx1:sb,transform:{textPosAngle:Aa,
rCenter:Ka,x:wa.x,y:wa.y}};c(N.type,wa,J);return{transform:{targetX:qa(sb),targetY:oa(sb),scale:eb(Pa),rotate:hb(Pa),rCenter:Ka}}}}function I(ha){var ma=ha.parent,wa=Y[D.getPtId(ma)],na={};wa?(ma=ma.children,ha=ma.indexOf(ha),ma=ma.length,wa=a.interpolate(wa.x0,wa.x1),na.x0=wa(ha/ma),na.x1=wa(ha/ma)):na.x0=na.x1=0;return na}var J=C._fullLayout,L=!J.uniformtext.mode&&D.hasTransition(B),E=a.select(A).selectAll("g.slice"),K=x[0],N=K.trace,O=D.findEntryWithLevel(K.hierarchy,N.level);A=D.getMaxDepth(N);
B=J._size;var Q=N.domain,P=B.h*(Q.y[1]-Q.y[0]),T=.5*Math.min(B.w*(Q.x[1]-Q.x[0]),P),V=K.cx=B.l+B.w*(Q.x[1]+Q.x[0])/2,aa=K.cy=B.t+B.h*(1-Q.y[0])-P/2;if(!O)return E.remove();var ba=null,Y={};L&&E.each(function(ha){Y[D.getPtId(ha)]={rpx0:ha.rpx0,rpx1:ha.rpx1,x0:ha.x0,x1:ha.x1,transform:ha.transform};!ba&&D.isEntry(ha)&&(ba=ha)});B=n(O).descendants();Q=O.height+1;var ea=0,da=A;K.hasMultipleRoots&&D.isHierarchyRoot(O)&&(B=B.slice(1),--Q,ea=1,da+=1);B=B.filter(function(ha){return ha.y1<=da});var ca=Math.min(Q,
A),la=function(ha,ma){return[ha*Math.cos(ma),-ha*Math.sin(ma)]},pa=function(ha){return l.pathAnnulus(ha.rpx0,ha.rpx1,ha.x0,ha.x1,V,aa)},qa=function(ha){return V+h(ha.rpx1,ha.transform.textPosAngle)[0]*(ha.transform.rCenter||0)+(ha.transform.x||0)},oa=function(ha){return aa+h(ha.rpx1,ha.transform.textPosAngle)[1]*(ha.transform.rCenter||0)+(ha.transform.y||0)};E=E.data(B,D.getPtId);E.enter().append("g").classed("slice",!0);L?E.exit().transition().each(function(){var ha=a.select(this);ha.select("path.surface").transition().attrTween("d",
function(ma){var wa=t(ma);return function(na){return pa(wa(na))}});ha.select("g.slicetext").attr("opacity",0)}).remove():E.exit().remove();E.order();var ka=null;if(L&&ba){var ra=D.getPtId(ba);E.each(function(ha){null===ka&&D.getPtId(ha)===ra&&(ka=ha.x1)})}A=E;L&&(A=A.transition().each("end",function(){var ha=a.select(this);D.setSliceCursor(ha,C,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}));A.each(function(ha){var ma=a.select(this),wa=l.ensureSingle(ma,"path","surface",function(Ha){Ha.style("pointer-events",
"all")});ha.rpx0=(ha.y0-ea)/ca*T;ha.rpx1=(ha.y1-ea)/ca*T;ha.xmid=(ha.x0+ha.x1)/2;ha.pxmid=la(ha.rpx1,ha.xmid);ha.midangle=-(ha.xmid-Math.PI/2);ha.startangle=-(ha.x0-Math.PI/2);ha.stopangle=-(ha.x1-Math.PI/2);ha.halfangle=.5*Math.min(l.angleDelta(ha.x0,ha.x1)||Math.PI,Math.PI);ha.ring=1-ha.rpx0/ha.rpx1;ha.rInscribed=p(ha,N);L?wa.transition().attrTween("d",function(Ha){var eb=G(Ha);return function(hb){return pa(eb(hb))}}):wa.attr("d",pa);ma.call(v,O,C,x,{eventDataKeys:w.eventDataKeys,transitionTime:w.CLICK_TRANSITION_TIME,
transitionEasing:w.CLICK_TRANSITION_EASING}).call(D.setSliceCursor,C,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:C._transitioning});wa.call(r,ha,N);ma=l.ensureSingle(ma,"g","slicetext");ma=l.ensureSingle(ma,"text","",function(Ha){Ha.attr("data-notex",1)});var na=l.ensureUniformFontSize(C,D.determineTextFont(N,ha,J.font));ma.text(F.formatSliceLabel(ha,O,N,x,J)).classed("slicetext",!0).attr("text-anchor","middle").call(d.font,na).call(k.convertToTspans,C);var ya=d.bBox(ma.node());ha.transform=m(ya,
ha,K);ha.transform.targetX=qa(ha);ha.transform.targetY=oa(ha);var Fa=function(Ha,eb){Ha=Ha.transform;g(Ha,eb);Ha.fontSize=na.size;c(N.type,Ha,J);return l.getTextTransform(Ha)};L?ma.transition().attrTween("transform",function(Ha){var eb=H(Ha);return function(hb){return Fa(eb(hb),ya)}}):ma.attr("transform",Fa(ha,ya))})}function n(C){return f.partition().size([2*Math.PI,C.height+1])(C)}function p(C){return 0===C.rpx0&&l.isFullCircle([C.x0,C.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(C.halfangle)),C.ring/
2))}function h(C,x){return[C*Math.sin(x),-C*Math.cos(x)]}var a=b("d3"),f=b("d3-hierarchy"),d=b("../../components/drawing"),l=b("../../lib"),k=b("../../lib/svg_text_utils");y=b("../bar/uniform_text");var c=y.recordMinTextSize,e=y.clearMinTextSize;y=b("../pie/plot");var g=y.computeTransform,m=y.transformInsideText,r=b("./style").styleOne,u=b("../bar/style").resizeText,v=b("./fx"),w=b("./constants"),D=b("./helpers");F.plot=function(C,x,A,B){var t=C._fullLayout,G=t._sunburstlayer,H,I=!A,J=!t.uniformtext.mode&&
D.hasTransition(A);e("sunburst",t);x=G.selectAll("g.trace.sunburst").data(x,function(L){return L[0].trace.uid});x.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round");x.order();J?(B&&(H=B()),a.transition().duration(A.duration).ease(A.easing).each("end",function(){H&&H()}).each("interrupt",function(){H&&H()}).each(function(){G.selectAll("g.trace").each(function(L){q(C,L,this,A)})})):(x.each(function(L){q(C,L,this,A)}),t.uniformtext.mode&&u(C,t._sunburstlayer.selectAll(".trace"),
"sunburst"));I&&x.exit().remove()};F.formatSliceLabel=function(C,x,A,B,t){var G=A.texttemplate,H=A.textinfo;if(!(G||H&&"none"!==H))return"";var I=t.separators,J=C.data.data;B=B[0].hierarchy;var L=D.isHierarchyRoot(C),E=D.getParent(B,C),K=D.getValue(C);if(!G){var N=H.split("+");t=function(V){return-1!==N.indexOf(V)};var O=[];t("label")&&J.label&&O.push(J.label);J.hasOwnProperty("v")&&t("value")&&O.push(D.formatValue(J.v,I));if(!L){t("current path")&&O.push(D.getPath(C.data));C=0;t("percent parent")&&
C++;t("percent entry")&&C++;t("percent root")&&C++;var Q=1<C;if(C){C=function(V){T=D.formatPercent(P,I);Q&&(T+=" of "+V);O.push(T)};if(t("percent parent")&&!L){var P=K/D.getValue(E);C("parent")}t("percent entry")&&(P=K/D.getValue(x),C("entry"));t("percent root")&&(P=K/D.getValue(B),C("root"))}}if(t("text")){var T=l.castOption(A,J.i,"text");l.isValidTextValue(T)&&O.push(T)}return O.join("\x3cbr\x3e")}G=l.castOption(A,J.i,"texttemplate");if(!G)return"";H={};J.label&&(H.label=J.label);J.hasOwnProperty("v")&&
(H.value=J.v,H.valueLabel=D.formatValue(J.v,I));H.currentPath=D.getPath(C.data);L||(H.percentParent=K/D.getValue(E),H.percentParentLabel=D.formatPercent(H.percentParent,I),H.parent=D.getPtLabel(E));H.percentEntry=K/D.getValue(x);H.percentEntryLabel=D.formatPercent(H.percentEntry,I);H.entry=D.getPtLabel(x);H.percentRoot=K/D.getValue(B);H.percentRootLabel=D.formatPercent(H.percentRoot,I);H.root=D.getPtLabel(B);J.hasOwnProperty("color")&&(H.color=J.color);x=l.castOption(A,J.i,"text");if(l.isValidTextValue(x)||
""===x)H.text=x;H.customdata=l.castOption(A,J.i,"customdata");return l.texttemplateString(G,H,t._d3locale,H,A._meta||{})}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../bar/style":904,"../bar/uniform_text":906,"../pie/plot":1138,"./constants":1269,"./fx":1271,"./helpers":1272,"./style":1277,d3:169,"d3-hierarchy":161}],1277:[function(b,y,F){function q(f,d,l){var k=d.data.data;d=!d.children;var c=k.i,e=h.castOption(l,c,"marker.line.color")||p.defaultLine;c=h.castOption(l,
c,"marker.line.width")||0;f.style("stroke-width",c).call(p.fill,k.color).call(p.stroke,e).style("opacity",d?l.leaf.opacity:null)}var n=b("d3"),p=b("../../components/color"),h=b("../../lib"),a=b("../bar/uniform_text").resizeText;y.exports={style:function(f){var d=f._fullLayout._sunburstlayer.selectAll(".trace");a(f,d,"sunburst");d.each(function(l){var k=n.select(this),c=l[0].trace;k.style("opacity",c.opacity);k.selectAll("path.surface").each(function(e){n.select(this).call(q,e,c)})})},styleOne:q}},
{"../../components/color":615,"../../lib":749,"../bar/uniform_text":906,d3:169}],1278:[function(b,y,F){function q(d){return{valType:"boolean",dflt:!1}}function n(d){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:q("x"),y:q("y"),z:q("z")},color:{valType:"color",dflt:p.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",
min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:p.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var p=b("../../components/color");F=b("../../components/colorscale/attributes");var h=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/attributes"),f=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;y=y.exports=b(f({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},
text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:h(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},F("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:n("x"),y:n("y"),z:n("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",
min:-1E5,max:1E5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:f({},F.zauto,{}),zmin:f({},F.zmin,{}),zmax:f({},F.zmax,{})},hoverinfo:f({},a.hoverinfo),showlegend:f({},a.showlegend,
{dflt:!1})}),"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes";y.transforms=void 0},{"../../components/color":615,"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875}],1279:[function(b,y,F){var q=b("../../components/colorscale/calc");y.exports=function(n,p){p.surfacecolor?q(n,p,{vals:p.surfacecolor,containerStr:"",cLetter:"c"}):q(n,p,{vals:p.z,containerStr:"",
cLetter:"c"})}},{"../../components/colorscale/calc":623}],1280:[function(b,y,F){function q(v,w,D){this.scene=v;this.uid=D;this.surface=w;this.data=null;this.showContour=[!1,!1,!1];this.contourStart=[null,null,null];this.contourEnd=[null,null,null];this.contourSize=[0,0,0];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=1;this.refineData=!0;this.objectOffset=[0,0,0]}function n(v){for(var w=[],D=0;D<m.length;D++){var C=m[D],
x=w,A=x.push;var B=v;if(B<C)C=0;else{for(var t=0;0===Math.floor(B%C);)B/=C,t++;C=t}A.call(x,C)}return w}function p(v,w,D){var C=D[8]+D[2]*w[0]+D[5]*w[1];v[0]=(D[6]+D[0]*w[0]+D[3]*w[1])/C;v[1]=(D[7]+D[1]*w[0]+D[4]*w[1])/C;return v}var h=b("gl-surface3d"),a=b("ndarray"),f=b("ndarray-linear-interpolate").d2,d=b("../heatmap/interp2d"),l=b("../heatmap/find_empties"),k=b("../../lib").isArrayOrTypedArray,c=b("../../lib/gl_format_color").parseColorScale,e=b("../../lib/str2rgbarray"),g=b("../../components/colorscale").extractOpts;
b=q.prototype;b.getXat=function(v,w,D,C){v=k(this.data.x)?k(this.data.x[0])?this.data.x[w][v]:this.data.x[v]:v;return void 0===D?v:C.d2l(v,0,D)};b.getYat=function(v,w,D,C){v=k(this.data.y)?k(this.data.y[0])?this.data.y[w][v]:this.data.y[w]:w;return void 0===D?v:C.d2l(v,0,D)};b.getZat=function(v,w,D,C){var x=this.data.z[w][v];null===x&&this.data.connectgaps&&this.data._interpolatedZ&&(x=this.data._interpolatedZ[w][v]);return void 0===D?x:C.d2l(x,0,D)};b.handlePick=function(v){if(v.object===this.surface){var w=
Math.max(Math.min(Math.round((v.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),D=Math.max(Math.min(Math.round((v.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);v.index=[w,D];v.traceCoordinate=[this.getXat(w,D),this.getYat(w,D),this.getZat(w,D)];v.dataCoordinate=[this.getXat(w,D,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(w,D,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(w,D,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];
for(var C=0;3>C;C++){var x=v.dataCoordinate[C];null!==x&&void 0!==x&&(v.dataCoordinate[C]*=this.scene.dataScale[C])}C=this.data.hovertext||this.data.text;Array.isArray(C)&&C[D]&&void 0!==C[D][w]?v.textLabel=C[D][w]:v.textLabel=C?C:"";v.data.dataCoordinate=v.dataCoordinate.slice();this.surface.highlight(v.data);this.scene.glplot.spikes.position=v.dataCoordinate;return!0}};var m=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,
167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,
977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,
1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,
2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];b.calcXnums=function(v){var w,D=[];for(w=1;w<v;w++){var C=this.getXat(w-1,0),x=this.getXat(w,0);D[w-1]=x!==C&&void 0!==C&&null!==C&&void 0!==x&&null!==x?Math.abs(x-C):0}C=0;for(w=1;w<
v;w++)C+=D[w-1];for(w=1;w<v;w++)D[w-1]=0===D[w-1]?1:Math.round(C/D[w-1]);return D};b.calcYnums=function(v){var w,D=[];for(w=1;w<v;w++){var C=this.getYat(0,w-1),x=this.getYat(0,w);D[w-1]=x!==C&&void 0!==C&&null!==C&&void 0!==x&&null!==x?Math.abs(x-C):0}C=0;for(w=1;w<v;w++)C+=D[w-1];for(w=1;w<v;w++)D[w-1]=0===D[w-1]?1:Math.round(C/D[w-1]);return D};F=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var r=F[9],u=F[13];b.estimateScale=function(v,w){w=0===w?this.calcXnums(v):this.calcYnums(v);if(0===
w.length)w=void 0;else{for(var D=1,C=0;C<w.length;C++){var x=w[C];if(1>D||1>x)D=void 0;else{D=n(D);x=n(x);for(var A=1,B=0;B<m.length;B++)A*=Math.pow(m[B],Math.max(D[B],x[B]));D=A}}w=D}for(C=1+w;C<r;)C*=2;for(;C>u;){C--;D=w=C;C=n(D);for(x=0;x<m.length;x++)if(0<C[x]){D=m[x];break}C=w/D;C++;C<r&&(C=u)}v=Math.round(C/v);return 1<v?v:1};b.refineCoords=function(v){var w=this.dataScaleX,D=this.dataScaleY,C=Math.floor(v[0].shape[0]*w+1)|0,x=Math.floor(v[0].shape[1]*D+1)|0,A=1+v[0].shape[0]+1,B=1+v[0].shape[1]+
1;A=a(new Float32Array(A*B),[A,B]);w=[1/w,0,0,0,1/D,0,0,0,1];for(D=0;D<v.length;++D){this.surface.padField(A,v[D]);for(var t=B=a(new Float32Array(C*x),[C,x]),G=A,H=p,I=w,J=[0,0],L=t.shape[0],E=t.shape[1],K=0;K<L;K++)for(var N=0;N<E;N++)H(J,[K,N],I),t.set(K,N,f(G,J[0],J[1]));v[D]=B}};b.setContourLevels=function(){var v=[[],[],[]],w=[!1,!1,!1],D=!1,C,x;for(C=0;3>C;++C)if(this.showContour[C]&&(D=!0,0<this.contourSize[C]&&null!==this.contourStart[C]&&null!==this.contourEnd[C]&&this.contourEnd[C]>this.contourStart[C]))for(w[C]=
!0,x=this.contourStart[C];x<this.contourEnd[C];x+=this.contourSize[C]){var A=x*this.scene.dataScale[C];for(var B=v[C],t=!1,G=0;G<B.length;G++)if(A===B[G]){t=!0;break}!1===t&&B.push(A)}if(D){D=[[],[],[]];for(C=0;3>C;++C)this.showContour[C]&&(D[C]=w[C]?v[C]:this.scene.contourLevels[C]);this.surface.update({levels:D})}};b.update=function(v){var w=this.scene,D=w.fullSceneLayout,C=this.surface,x=v.opacity,A=c(v,x),B=w.dataScale,t=v.z[0].length,G=v._ylength;w=w.contourLevels;this.data=v;var H,I,J,L=[];
for(H=0;3>H;H++)for(L[H]=[],I=0;I<t;I++)L[H][I]=[];for(I=0;I<t;I++)for(J=0;J<G;J++)L[0][I][J]=this.getXat(I,J,v.xcalendar,D.xaxis),L[1][I][J]=this.getYat(I,J,v.ycalendar,D.yaxis),L[2][I][J]=this.getZat(I,J,v.zcalendar,D.zaxis);if(v.connectgaps)for(v._emptypoints=l(L[2]),d(L[2],v._emptypoints),v._interpolatedZ=[],I=0;I<t;I++)for(v._interpolatedZ[I]=[],J=0;J<G;J++)v._interpolatedZ[I][J]=L[2][I][J];for(H=0;3>H;H++)for(I=0;I<t;I++)for(J=0;J<G;J++)D=L[H][I][J],L[H][I][J]=null===D||void 0===D?NaN:L[H][I][J]*
B[H];for(H=0;3>H;H++)for(I=0;I<t;I++)for(J=0;J<G;J++)D=L[H][I][J],null!==D&&void 0!==D&&(this.minValues[H]>D&&(this.minValues[H]=D),this.maxValues[H]<D&&(this.maxValues[H]=D));for(H=0;3>H;H++)this.objectOffset[H]=.5*(this.minValues[H]+this.maxValues[H]);for(H=0;3>H;H++)for(I=0;I<t;I++)for(J=0;J<G;J++)D=L[H][I][J],null!==D&&void 0!==D&&(L[H][I][J]-=this.objectOffset[H]);D=[a(new Float32Array(t*G),[t,G]),a(new Float32Array(t*G),[t,G]),a(new Float32Array(t*G),[t,G])];for(H=0;3>H;H++)for(I=0;I<t;I++)for(J=
0;J<G;J++)D[H].set(I,J,L[H][I][J]);L={colormap:A,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!v.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:v.opacityscale,opacity:v.opacity};H=g(v);L.intensityBounds=[H.min,H.max];if(v.surfacecolor){H=a(new Float32Array(t*G),[t,G]);for(I=0;I<t;I++)for(J=0;J<
G;J++)H.set(I,J,v.surfacecolor[J][I]);D.push(H)}else L.intensityBounds[0]*=B[2],L.intensityBounds[1]*=B[2];if(u<D[0].shape[0]||u<D[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(D[0].shape[0],0),this.dataScaleY=this.estimateScale(D[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(D));v.surfacecolor&&(L.intensity=D.pop());t=[!0,!0,!0];G=["x","y","z"];for(H=0;3>H;++H)B=v.contours[G[H]],t[H]=B.highlight,L.showContour[H]=B.show||B.highlight,
L.showContour[H]&&(L.contourProject[H]=[B.project.x,B.project.y,B.project.z],B.show?(this.showContour[H]=!0,L.levels[H]=w[H],C.highlightColor[H]=L.contourColor[H]=e(B.color),C.highlightTint[H]=B.usecolormap?L.contourTint[H]=0:L.contourTint[H]=1,L.contourWidth[H]=B.width,this.contourStart[H]=B.start,this.contourEnd[H]=B.end,this.contourSize[H]=B.size):(this.showContour[H]=!1,this.contourStart[H]=null,this.contourEnd[H]=null,this.contourSize[H]=0),B.highlight&&(L.dynamicColor[H]=e(B.highlightcolor),
L.dynamicWidth[H]=B.highlightwidth));w=A[0].rgb;A=A[A.length-1].rgb;w[0]===A[0]&&w[1]===A[1]&&w[2]===A[2]&&w[3]===A[3]&&(L.vertexColor=!0);L.objectOffset=this.objectOffset;L.coords=D;C.update(L);C.visible=v.visible;C.enableDynamic=t;C.enableHighlight=t;C.snapToData=!0;"lighting"in v&&(C.ambientLight=v.lighting.ambient,C.diffuseLight=v.lighting.diffuse,C.specularLight=v.lighting.specular,C.roughness=v.lighting.roughness,C.fresnel=v.lighting.fresnel);"lightposition"in v&&(C.lightPosition=[v.lightposition.x,
v.lightposition.y,v.lightposition.z]);x&&1>x&&(C.supportsTransparency=!0)};b.dispose=function(){this.scene.glplot.remove(this.surface);this.surface.dispose()};y.exports=function(v,w){var D=h({gl:v.glplot.gl}),C=new q(v,D,w.uid);D._trace=C;C.update(w);v.glplot.add(D);return C}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../heatmap/find_empties":1040,"../heatmap/interp2d":1043,"gl-surface3d":325,ndarray:469,"ndarray-linear-interpolate":463}],
1281:[function(b,y,F){function q(d,l,k,c){d=c("opacityscale");if("max"===d)l.opacityscale=[[0,.1],[1,1]];else if("min"===d)l.opacityscale=[[0,1],[1,.1]];else if("extremes"===d){d=[];for(k=0;32>k;k++)c=k/31,d.push([c,Math.max(0,Math.min(1,.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2))))]);l.opacityscale=d}else{a:if(k=0,!Array.isArray(d)||2>d.length||!d[0]||!d[d.length-1]||0!==+d[0][0]||1!==+d[d.length-1][0])d=!1;else{for(c=0;c<d.length;c++){var e=d[c];if(2!==e.length||+e[0]<k){d=!1;break a}k=+e[0]}d=
!0}d||(l.opacityscale=void 0)}}function n(d,l,k){l in d&&!(k in d)&&(d[k]=d[l])}var p=b("../../registry"),h=b("../../lib"),a=b("../../components/colorscale/defaults"),f=b("./attributes");y.exports={supplyDefaults:function(d,l,k,c){function e(D,C){return h.coerce(d,l,f,D,C)}k=e("x");var g=e("y");var m=e("z");if(!m||!m.length||k&&1>k.length||g&&1>g.length)l.visible=!1;else{l._xlength=Array.isArray(k)&&h.isArrayOrTypedArray(k[0])?m.length:m[0].length;l._ylength=m.length;p.getComponentMethod("calendars",
"handleTraceDefaults")(d,l,["x","y","z"],c);e("text");e("hovertext");e("hovertemplate");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(D){e(D)});m=e("surfacecolor");var r=["x","y","z"];for(k=0;3>k;++k){var u="contours."+r[k],v=e(u+".show"),w=e(u+".highlight");if(v||w)for(g=0;3>g;++g)e(u+".project."+r[g]);v&&(e(u+".color"),e(u+".width"),e(u+".usecolormap"));
w&&(e(u+".highlightcolor"),e(u+".highlightwidth"));e(u+".start");e(u+".end");e(u+".size")}m||(n(d,"zmin","cmin"),n(d,"zmax","cmax"),n(d,"zauto","cauto"));a(d,l,c,e,{prefix:"",cLetter:"c"});q(d,l,c,e);l._length=null}},opacityscaleDefaults:q}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1278}],1282:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),
plot:b("./convert"),moduleType:"trace",name:"surface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1278,"./calc":1279,"./convert":1280,"./defaults":1281}],1283:[function(b,y,F){F=b("../../components/annotations/attributes");var q=b("../../lib/extend").extendFlat,n=b("../../plot_api/edit_types").overrideAll,p=b("../../plots/font_attributes"),h=b("../../plots/domain").attributes;b("../../constants/docs");(y.exports=n({domain:h({name:"table",
trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:q({},F.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:q({},
p({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:q({},F.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:q({},p({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":598,
"../../constants/docs":719,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/domain":824,"../../plots/font_attributes":825}],1284:[function(b,y,F){var q=b("../../plots/get_data").getModuleCalcData,n=b("./plot");F.name="table";F.plot=function(p){var h=q(p.calcdata,"table")[0];h.length&&n(p,h)};F.clean=function(p,h,a,f){p=f._has&&f._has("table");h=h._has&&h._has("table");p&&!h&&f._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":834,"./plot":1291}],1285:[function(b,
y,F){var q=b("../../lib/gup").wrap;y.exports=function(){return q({})}},{"../../lib/gup":746}],1286:[function(b,y,F){y.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"\x3cbr\x3e",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,scrollbarHideDuration:1E3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",
uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",
scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1287:[function(b,y,F){function q(g){if(Array.isArray(g)){for(var m=0,r=0;r<g.length;r++)m=Math.max(m,q(g[r]));return m}return g}function n(g,m){return g+m}function p(g){g=g.slice();var m=Infinity,r=0,u;for(u=0;u<g.length;u++)Array.isArray(g[u])||(g[u]=[g[u]]),m=Math.min(m,g[u].length),r=Math.max(r,g[u].length);if(m!==r)for(u=0;u<
g.length;u++)(m=r-g[u].length)&&(g[u]=g[u].concat(h(m)));return g}function h(g){for(var m=Array(g),r=0;r<g;r++)m[r]="";return m}function a(g){return g.calcdata.columns.reduce(function(m,r){return r.xIndex<g.xIndex?m+r.columnWidth:m},0)}function f(g,m){return Object.keys(g).map(function(r){return c({},g[r],{auxiliaryBlocks:m})})}function d(g,m){for(var r={},u,v=0,w=0,D=l(),C=0,x=0,A=0;A<g.length;A++)if(u=g[A],D.rows.push({rowIndex:A,rowHeight:u}),w+=u,w>=m||A===g.length-1)r[v]=D,D.key=x++,D.firstRowIndex=
C,D.lastRowIndex=A,D=l(),v+=w,C=A+1,w=0;return r}function l(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var k=b("./constants"),c=b("../../lib/extend").extendFlat,e=b("fast-isnumeric");y.exports=function(g,m){var r=p(m.cells.values),u=function(E){return E.slice(m.header.values.length,E.length)},v=p(m.header.values);v.length&&!v[0].length&&(v[0]=[""],v=p(v));var w=v.concat(u(r).map(function(){return h((v[0]||[""]).length)})),D=m.domain,C=Math.floor(g._fullLayout._size.w*(D.x[1]-D.x[0])),
x=Math.floor(g._fullLayout._size.h*(D.y[1]-D.y[0])),A=m.header.values.length?w[0].map(function(){return m.header.height}):[k.emptyHeaderHeight],B=r.length?r[0].map(function(){return m.cells.height}):[],t=A.reduce(n,0);B=d(B,x-t+k.uplift);A=d(A,t);A=f(A,[]);B=f(B,A);var G={},H=m._fullInput.columnorder.concat(u(r.map(function(E,K){return K}))),I=w.map(function(E,K){E=Array.isArray(m.columnwidth)?m.columnwidth[Math.min(K,m.columnwidth.length-1)]:m.columnwidth;return e(E)?Number(E):1}),J=I.reduce(n,0);
I=I.map(function(E){return E/J*C});u=Math.max(q(m.header.line.width),q(m.cells.line.width));var L={key:m.uid+g._context.staticPlot,translateX:D.x[0]*g._fullLayout._size.w,translateY:g._fullLayout._size.h*(1-D.y[1]),size:g._fullLayout._size,width:C,maxLineWidth:u,height:x,columnOrder:H,groupHeight:x,rowBlocks:B,headerRowBlocks:A,scrollY:0,cells:c({},m.cells,{values:r}),headerCells:c({},m.header,{values:w}),gdColumns:w.map(function(E){return E[0]}),gdColumnsOriginalOrder:w.map(function(E){return E[0]}),
prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:w.map(function(E,K){G[E]=(G[E]||0)+1;return{key:E+"__"+G[E],label:E,specIndex:K,xIndex:H[K],xScale:a,x:void 0,calcdata:void 0,columnWidth:I[K]}})};L.columns.forEach(function(E){E.calcdata=L;E.x=a(E)});return L}},{"../../lib/extend":739,"./constants":1286,"fast-isnumeric":241}],1288:[function(b,y,F){function q(p){var h=(p=p.rowBlocks[p.page])?p.rows[0].rowIndex:0;return[h,p?h+p.rows.length:0]}var n=b("../../lib/extend").extendFlat;
F.splitToPanels=function(p){var h=[0,0],a=n({},p,{key:"header",type:"header",page:0,prevPages:h,currentRepaint:[null,null],dragHandle:!0,values:p.calcdata.headerCells.values[p.specIndex],rowBlocks:p.calcdata.headerRowBlocks,calcdata:n({},p.calcdata,{cells:p.calcdata.headerCells})}),f=n({},p,{key:"cells1",type:"cells",page:0,prevPages:h,currentRepaint:[null,null],dragHandle:!1,values:p.calcdata.cells.values[p.specIndex],rowBlocks:p.calcdata.rowBlocks});p=n({},p,{key:"cells2",type:"cells",page:1,prevPages:h,
currentRepaint:[null,null],dragHandle:!1,values:p.calcdata.cells.values[p.specIndex],rowBlocks:p.calcdata.rowBlocks});return[f,p,a]};F.splitToCells=function(p){var h=q(p);return(p.values||[]).slice(h[0],h[1]).map(function(a,f){var d="string"===typeof a&&a.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:f+d,key:h[0]+f,column:p,calcdata:p.calcdata,page:p.page,rowBlocks:p.rowBlocks,value:a}})}},{"../../lib/extend":739}],1289:[function(b,y,F){function q(a,f){var d=a.header.values.length;
a=(a.columnorder||[]).slice(0,d);var l=a.slice().sort(function(c,e){return c-e});a=a.map(function(c){return l.indexOf(c)});for(var k=a.length;k<d;k++)a.push(k);f("columnorder",a)}var n=b("../../lib"),p=b("./attributes"),h=b("../../plots/domain").defaults;y.exports=function(a,f,d,l){function k(c,e){return n.coerce(a,f,p,c,e)}h(f,l,k);k("columnwidth");k("header.values");k("header.format");k("header.align");k("header.prefix");k("header.suffix");k("header.height");k("header.line.width");k("header.line.color");
k("header.fill.color");n.coerceFont(k,"header.font",n.extendFlat({},l.font));q(f,k);k("cells.values");k("cells.format");k("cells.align");k("cells.prefix");k("cells.suffix");k("cells.height");k("cells.line.width");k("cells.line.color");k("cells.fill.color");n.coerceFont(k,"cells.font",n.extendFlat({},l.font));f._length=null}},{"../../lib":749,"../../plots/domain":824,"./attributes":1283}],1290:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),
plot:b("./plot"),moduleType:"trace",name:"table",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1283,"./base_plot":1284,"./calc":1285,"./defaults":1289,"./plot":1291}],1291:[function(b,y,F){function q(ea){return Math.ceil(ea.calcdata.maxLineWidth/2)}function n(ea,da){return"clip"+ea._fullLayout._uid+"_columnBoundaryClippath_"+da.calcdata.key+"_"+da.specIndex}function p(ea){return[].concat.apply([],ea.map(function(da){return da})).map(function(da){return da.__data__})}
function h(ea,da,ca){var la=ea.selectAll("."+K.cn.scrollbarKit).data(O.repeat,O.keyFun);la.enter().append("g").classed(K.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision");la.each(function(qa){var oa=qa.scrollbarState;var ka=qa.rowBlocks;ka=L(ka,ka.length-1)+(ka.length?E(ka[ka.length-1],Infinity):1);oa.totalHeight=ka;oa.scrollableAreaHeight=qa.groupHeight-C(qa);oa.currentlyVisibleHeight=Math.min(oa.totalHeight,oa.scrollableAreaHeight);oa.ratio=oa.currentlyVisibleHeight/oa.totalHeight;
oa.barLength=Math.max(oa.ratio*oa.currentlyVisibleHeight,K.goldenRatio*K.scrollbarWidth);oa.barWiggleRoom=oa.currentlyVisibleHeight-oa.barLength;oa.wiggleRoom=Math.max(0,oa.totalHeight-oa.scrollableAreaHeight);oa.topY=0===oa.barWiggleRoom?0:qa.scrollY/oa.wiggleRoom*oa.barWiggleRoom;oa.bottomY=oa.topY+oa.barLength;oa.dragMultiplier=oa.wiggleRoom/oa.barWiggleRoom}).attr("transform",function(qa){return"translate("+(qa.width+K.scrollbarWidth/2+K.scrollbarOffset)+" "+C(qa)+")"});la=la.selectAll("."+K.cn.scrollbar).data(O.repeat,
O.keyFun);la.enter().append("g").classed(K.cn.scrollbar,!0);var pa=la.selectAll("."+K.cn.scrollbarSlider).data(O.repeat,O.keyFun);pa.enter().append("g").classed(K.cn.scrollbarSlider,!0);pa.attr("transform",function(qa){return"translate(0 "+(qa.scrollbarState.topY||0)+")"});pa=pa.selectAll("."+K.cn.scrollbarGlyph).data(O.repeat,O.keyFun);pa.enter().append("line").classed(K.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",K.scrollbarWidth).attr("stroke-linecap","round").attr("y1",K.scrollbarWidth/
2);pa.attr("y2",function(qa){return qa.scrollbarState.barLength-K.scrollbarWidth/2}).attr("stroke-opacity",function(qa){return qa.columnDragInProgress||!qa.scrollbarState.barWiggleRoom||ca?0:.4});pa.transition().delay(0).duration(0);pa.transition().delay(K.scrollbarHideDelay).duration(K.scrollbarHideDuration).attr("stroke-opacity",0);la=la.selectAll("."+K.cn.scrollbarCaptureZone).data(O.repeat,O.keyFun);la.enter().append("line").classed(K.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",
.01).attr("stroke-width",K.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(qa){var oa=N.event.y,ka=this.getBoundingClientRect(),ra=qa.scrollbarState;oa-=ka.top;ka=N.scale.linear().domain([0,ra.scrollableAreaHeight]).range([0,ra.totalHeight]).clamp(!0);ra.topY<=oa&&oa<=ra.bottomY||B(da,ea,null,ka(oa-ra.barLength/2))(qa)}).call(N.behavior.drag().origin(function(qa){N.event.stopPropagation();qa.scrollbarState.scrollbarScrollInProgress=!0;return qa}).on("drag",
B(da,ea)).on("dragend",function(){}));la.attr("y2",function(qa){return qa.scrollbarState.scrollableAreaHeight});da._context.staticPlot&&(pa.remove(),la.remove())}function a(ea,da,ca,la){ca=ca.selectAll("."+K.cn.columnCells).data(O.repeat,O.keyFun);ca.enter().append("g").classed(K.cn.columnCells,!0);ca.exit().remove();ca=f(ca);c(ca);var pa=d(ca);g(pa);pa=k(ca);pa=l(pa);e(pa);m(pa,da,la,ea);J(ca)}function f(ea){ea=ea.selectAll("."+K.cn.columnCell).data(ba.splitToCells,function(da){return da.keyWithinBlock});
ea.enter().append("g").classed(K.cn.columnCell,!0);ea.exit().remove();return ea}function d(ea){ea=ea.selectAll("."+K.cn.cellRect).data(O.repeat,function(da){return da.keyWithinBlock});ea.enter().append("rect").classed(K.cn.cellRect,!0);return ea}function l(ea){ea=ea.selectAll("."+K.cn.cellText).data(O.repeat,function(da){return da.keyWithinBlock});ea.enter().append("text").classed(K.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){N.event.stopPropagation()});return ea}
function k(ea){ea=ea.selectAll("."+K.cn.cellTextHolder).data(O.repeat,function(da){return da.keyWithinBlock});ea.enter().append("g").classed(K.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision");return ea}function c(ea){ea.each(function(da,ca){var la=da.calcdata.cells.font,pa=da.column.specIndex;la={size:u(la.size,pa,ca),color:u(la.color,pa,ca),family:u(la.family,pa,ca)};da.rowNumber=da.key;da.align=u(da.calcdata.cells.align,pa,ca);da.cellBorderWidth=u(da.calcdata.cells.line.width,
pa,ca);da.font=la})}function e(ea){ea.each(function(da){Q.font(N.select(this),da.font)})}function g(ea){ea.attr("width",function(da){return da.column.columnWidth}).attr("stroke-width",function(da){return da.cellBorderWidth}).each(function(da){var ca=N.select(this);Y.stroke(ca,u(da.calcdata.cells.line.color,da.column.specIndex,da.rowNumber));Y.fill(ca,u(da.calcdata.cells.fill.color,da.column.specIndex,da.rowNumber))})}function m(ea,da,ca,la){ea.text(function(pa){var qa=pa.column.specIndex,oa=pa.rowNumber,
ka=pa.value,ra="string"===typeof ka,ha=ra&&ka.match(/<br>/i),ma=!ra||ha;pa.mayHaveMarkup=ra&&ka.match(/[<&>]/);ka="string"===typeof ka&&ka.match(K.latexCheck);ra=(pa.latex=ka)?"":u(pa.calcdata.cells.prefix,qa,oa)||"";var wa=ka?"":u(pa.calcdata.cells.suffix,qa,oa)||"";qa=ka?null:u(pa.calcdata.cells.format,qa,oa)||null;qa=ra+(qa?N.format(qa)(pa.value):pa.value)+wa;var na;pa.wrappingNeeded=!pa.wrapped&&!ma&&!ka&&(na=-1!==qa.indexOf(K.wrapSplitCharacter));pa.cellHeightMayIncrease=ha||ka||pa.mayHaveMarkup||
(void 0===na?-1!==qa.indexOf(K.wrapSplitCharacter):na);pa.needsConvertToTspans=pa.mayHaveMarkup||pa.wrappingNeeded||pa.latex;pa.wrappingNeeded?(ha=(" "===K.wrapSplitCharacter?qa.replace(/<a href=/ig,"\x3ca_href\x3d"):qa).split(K.wrapSplitCharacter),ha=" "===K.wrapSplitCharacter?ha.map(function(ya){return ya.replace(/<a_href=/ig,"\x3ca href\x3d")}):ha,pa.fragments=ha.map(function(ya){return{text:ya,width:null}}),pa.fragments.push({fragment:K.wrapSpacer,width:null}),pa=ha.join(K.lineBreaker)+K.lineBreaker+
K.wrapSpacer):(delete pa.fragments,pa=qa);return pa}).attr("dy",function(pa){return pa.needsConvertToTspans?0:"0.75em"}).each(function(pa){var qa=N.select(this),oa=pa.wrappingNeeded?G:H;pa.needsConvertToTspans?P.convertToTspans(qa,la,oa(ca,this,da,la,pa)):N.select(this.parentNode).attr("transform",function(ka){return"translate("+I(ka)+" "+K.cellPad+")"}).attr("text-anchor",function(ka){return{left:"start",center:"middle",right:"end"}[ka.align]})})}function r(ea,da,ca){var la=da.gdColumnsOriginalOrder;
da.gdColumns.sort(function(pa,qa){return ca[la.indexOf(pa)]-ca[la.indexOf(qa)]});da.columnorder=ca;ea.emit("plotly_restyle")}function u(ea,da,ca){return Array.isArray(ea)?(ea=ea[Math.min(da,ea.length-1)],Array.isArray(ea)?ea[Math.min(ca,ea.length-1)]:ea):ea}function v(ea,da,ca){ea.transition().ease(K.releaseTransitionEase).duration(K.releaseTransitionDuration).attr("transform","translate("+da.x+" "+ca+")")}function w(ea){return"cells"===ea.type}function D(ea){return"header"===ea.type}function C(ea){return(ea.rowBlocks.length?
ea.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(da,ca){return da+E(ca,Infinity)},0)}function x(ea,da,ca){for(var la=[],pa=0,qa=0;qa<ea.length;qa++){for(var oa=ea[qa],ka=oa.rows,ra=0,ha=0;ha<ka.length;ha++)ra+=ka[ha].rowHeight;oa.allRowsHeight=ra;oa=da;ka=oa+ca;oa<pa+ra&&ka>pa&&la.push(qa);pa+=ra}return la}function A(ea,da,ca){var la=p(da)[0];if(void 0!==la){var pa=la.rowBlocks,qa=la.calcdata,oa=L(pa,pa.length),ka=la.calcdata.groupHeight-C(la),ra=qa.scrollY=Math.max(0,Math.min(oa-ka,qa.scrollY)),
ha=x(pa,ra,ka);1===ha.length&&(ha[0]===pa.length-1?ha.unshift(ha[0]-1):ha.push(ha[0]+1));ha[0]%2&&ha.reverse();da.each(function(ma,wa){ma.page=ha[wa];ma.scrollY=ra});da.attr("transform",function(ma){return"translate(0 "+(L(ma.rowBlocks,ma.page)-ma.scrollY)+")"});ea&&(t(ea,ca,da,ha,la.prevPages,la,0),t(ea,ca,da,ha,la.prevPages,la,1),h(ca,ea))}}function B(ea,da,ca,la){return function(pa){var qa=pa.calcdata?pa.calcdata:pa;pa=da.filter(function(ra){return qa.key===ra.key});var oa=ca||qa.scrollbarState.dragMultiplier,
ka=qa.scrollY;qa.scrollY=void 0===la?qa.scrollY+oa*N.event.dy:la;oa=pa.selectAll("."+K.cn.yColumn).selectAll("."+K.cn.columnBlock).filter(w);A(ea,oa,pa);return qa.scrollY===ka}}function t(ea,da,ca,la,pa,qa,oa){la[oa]!==pa[oa]&&(clearTimeout(qa.currentRepaint[oa]),qa.currentRepaint[oa]=setTimeout(function(){var ka=ca.filter(function(ra,ha){return ha===oa&&la[ha]!==pa[ha]});a(ea,da,ka,ca);pa[oa]=la[oa]}))}function G(ea,da,ca,la){return function(){var pa=N.select(da.parentNode);pa.each(function(qa){var oa=
qa.fragments;pa.selectAll("tspan.line").each(function(Fa,Ha){oa[Ha].width=this.getComputedTextLength()});var ka=oa[oa.length-1].width,ra=oa.slice(0,-1),ha=[],ma=0,wa=qa.column.columnWidth-2*K.cellPad;for(qa.value="";ra.length;){var na=ra.shift();var ya=na.width+ka;ma+ya>wa&&(qa.value+=ha.join(K.wrapSpacer)+K.lineBreaker,ha=[],ma=0);ha.push(na.text);ma+=ya}ma&&(qa.value+=ha.join(K.wrapSpacer));qa.wrapped=!0});pa.selectAll("tspan.line").remove();m(pa.select("."+K.cn.cellText),ca,ea,la);N.select(da.parentNode.parentNode).call(J)}}
function H(ea,da,ca,la,pa){return function(){if(!pa.settledY){var qa=N.select(da.parentNode),oa=pa.rowBlocks[pa.page],ka=pa.key-oa.firstRowIndex,ra=oa.rows[ka].rowHeight,ha=pa.cellHeightMayIncrease?da.parentNode.getBoundingClientRect().height+2*K.cellPad:ra;ra=Math.max(ha,ra);ra-oa.rows[ka].rowHeight&&(oa.rows[ka].rowHeight=ra,ea.selectAll("."+K.cn.columnCell).call(J),A(null,ea.filter(w),0),h(ca,la,!0));qa.attr("transform",function(){var ma=this.parentNode.getBoundingClientRect(),wa=N.select(this.parentNode).select("."+
K.cn.cellRect).node().getBoundingClientRect(),na=this.transform.baseVal.consolidate();ma=wa.top-ma.top+(na?na.matrix.f:K.cellPad);return"translate("+I(pa,N.select(this.parentNode).select("."+K.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+ma+")"});pa.settledY=!0}}}function I(ea,da){switch(ea.align){case "left":return K.cellPad;case "right":return ea.column.columnWidth-(da||0)-K.cellPad;case "center":return(ea.column.columnWidth-(da||0))/2;default:return K.cellPad}}function J(ea){ea.attr("transform",
function(da){var ca=da.rowBlocks[0].auxiliaryBlocks.reduce(function(la,pa){return la+E(pa,Infinity)},0);return"translate(0 "+(E(da.rowBlocks[da.page],da.key)+ca)+")"}).selectAll("."+K.cn.cellRect).attr("height",function(da){var ca=da.rowBlocks[da.page];return ca.rows[da.key-ca.firstRowIndex].rowHeight})}function L(ea,da){var ca=0;for(--da;0<=da;da--){var la=ea[da];var pa=la.allRowsHeight;if(void 0!==pa)la=pa;else{for(var qa=pa=0;qa<la.rows.length;qa++)pa+=la.rows[qa].rowHeight;la=la.allRowsHeight=
pa}ca+=la}return ca}function E(ea,da){for(var ca=0,la=0;la<ea.rows.length&&ea.rows[la].rowIndex<da;la++)ca+=ea.rows[la].rowHeight;return ca}var K=b("./constants"),N=b("d3"),O=b("../../lib/gup"),Q=b("../../components/drawing"),P=b("../../lib/svg_text_utils"),T=b("../../lib").raiseToTop,V=b("../../lib").cancelTransition,aa=b("./data_preparation_helper"),ba=b("./data_split_helpers"),Y=b("../../components/color");y.exports=function(ea,da){var ca=!ea._context.staticPlot;da=ea._fullLayout._paper.selectAll("."+
K.cn.table).data(da.map(function(ka){ka=O.unwrap(ka).trace;return aa(ea,ka)}),O.keyFun);da.exit().remove();da.enter().append("g").classed(K.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all");da.attr("width",function(ka){return ka.width+ka.size.l+ka.size.r}).attr("height",function(ka){return ka.height+ka.size.t+ka.size.b}).attr("transform",
function(ka){return"translate("+ka.translateX+","+ka.translateY+")"});var la=da.selectAll("."+K.cn.tableControlView).data(O.repeat,O.keyFun);da=la.enter().append("g").classed(K.cn.tableControlView,!0).style("box-sizing","content-box");if(ca){var pa="onwheel"in document?"wheel":"mousewheel";da.on("mousemove",function(ka){la.filter(function(ra){return ka===ra}).call(h,ea)}).on(pa,function(ka){ka.scrollbarState.wheeling||(ka.scrollbarState.wheeling=!0,B(ea,la,null,ka.scrollY+N.event.deltaY)(ka)||(N.event.stopPropagation(),
N.event.preventDefault()),ka.scrollbarState.wheeling=!1)}).call(h,ea,!0)}la.attr("transform",function(ka){return"translate("+ka.size.l+" "+ka.size.t+")"});da=la.selectAll("."+K.cn.scrollBackground).data(O.repeat,O.keyFun);da.enter().append("rect").classed(K.cn.scrollBackground,!0).attr("fill","none");da.attr("width",function(ka){return ka.width}).attr("height",function(ka){return ka.height});la.each(function(ka){Q.setClipUrl(N.select(this),"clip"+ea._fullLayout._uid+"_scrollAreaBottomClip_"+ka.key,
ea)});var qa=la.selectAll("."+K.cn.yColumn).data(function(ka){return ka.columns},O.keyFun);qa.enter().append("g").classed(K.cn.yColumn,!0);qa.exit().remove();qa.attr("transform",function(ka){return"translate("+ka.x+" 0)"});ca&&qa.call(N.behavior.drag().origin(function(ka){var ra=N.select(this);v(ra,ka,-K.uplift);T(this);ka.calcdata.columnDragInProgress=!0;h(la.filter(function(ha){return ka.calcdata.key===ha.key}),ea);return ka}).on("drag",function(ka){var ra=N.select(this);ka.x=Math.max(-K.overdrag,
Math.min(ka.calcdata.width+K.overdrag-ka.columnWidth,N.event.x));p(qa).filter(function(ha){return ha.calcdata.key===ka.calcdata.key}).sort(function(ha,ma){return(ka===ha?N.event.x:ha.x)+ha.columnWidth/2-((ka===ma?N.event.x:ma.x)+ma.columnWidth/2)}).forEach(function(ha,ma){ha.xIndex=ma;ha.x=ka===ha?ha.x:ha.xScale(ha)});qa.filter(function(ha){return ka!==ha}).transition().ease(K.transitionEase).duration(K.transitionDuration).attr("transform",function(ha){return"translate("+ha.x+" 0)"});ra.call(V).attr("transform",
"translate("+ka.x+" -"+K.uplift+" )")}).on("dragend",function(ka){var ra=N.select(this),ha=ka.calcdata;ka.x=ka.xScale(ka);ka.calcdata.columnDragInProgress=!1;v(ra,ka,0);r(ea,ha,ha.columns.map(function(ma){return ma.xIndex}))}));qa.each(function(ka){Q.setClipUrl(N.select(this),n(ea,ka),ea)});pa=qa.selectAll("."+K.cn.columnBlock).data(ba.splitToPanels,O.keyFun);pa.enter().append("g").classed(K.cn.columnBlock,!0).attr("id",function(ka){return ka.key});pa.style("cursor",function(ka){return ka.dragHandle?
"ew-resize":ka.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var oa=pa.filter(D);da=pa.filter(w);ca&&da.call(N.behavior.drag().origin(function(ka){N.event.stopPropagation();return ka}).on("drag",B(ea,la,-1)).on("dragend",function(){}));a(ea,la,oa,pa);a(ea,la,da,pa);ca=la.selectAll("."+K.cn.scrollAreaClip).data(O.repeat,O.keyFun);ca.enter().append("clipPath").classed(K.cn.scrollAreaClip,!0).attr("id",function(ka){return"clip"+ea._fullLayout._uid+"_scrollAreaBottomClip_"+ka.key});ca=
ca.selectAll("."+K.cn.scrollAreaClipRect).data(O.repeat,O.keyFun);ca.enter().append("rect").classed(K.cn.scrollAreaClipRect,!0).attr("x",-K.overdrag).attr("y",-K.uplift).attr("fill","none");ca.attr("width",function(ka){return ka.width+2*K.overdrag}).attr("height",function(ka){return ka.height+K.uplift});qa.selectAll("."+K.cn.columnBoundary).data(O.repeat,O.keyFun).enter().append("g").classed(K.cn.columnBoundary,!0);ca=qa.selectAll("."+K.cn.columnBoundaryClippath).data(O.repeat,O.keyFun);ca.enter().append("clipPath").classed(K.cn.columnBoundaryClippath,
!0);ca.attr("id",function(ka){return n(ea,ka)});ca=ca.selectAll("."+K.cn.columnBoundaryRect).data(O.repeat,O.keyFun);ca.enter().append("rect").classed(K.cn.columnBoundaryRect,!0).attr("fill","none");ca.attr("width",function(ka){return ka.columnWidth+2*q(ka)}).attr("height",function(ka){return ka.calcdata.height+2*q(ka)+K.uplift}).attr("x",function(ka){return-q(ka)}).attr("y",function(ka){return-q(ka)});A(null,da,la)}},{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,
"../../lib/svg_text_utils":773,"./constants":1286,"./data_preparation_helper":1287,"./data_split_helpers":1288,d3:169}],1292:[function(b,y,F){F=b("../../plots/template_attributes").hovertemplateAttrs;var q=b("../../plots/template_attributes").texttemplateAttrs,n=b("../../components/colorscale/attributes"),p=b("../../plots/domain").attributes,h=b("../pie/attributes"),a=b("../sunburst/attributes"),f=b("./constants");b=b("../../lib/extend").extendFlat;y.exports={labels:a.labels,parents:a.parents,values:a.values,
branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:"squarify binary dice slice slice-dice dice-slice".split(" "),dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:b({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},
r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:["\x3e","\x3c","|","/","\\"],dflt:"\x3e",editType:"plot"},
thickness:{valType:"number",min:12,editType:"plot"},textfont:b({},h.textfont,{}),editType:"calc"},text:h.text,textinfo:a.textinfo,texttemplate:q({editType:"plot"},{keys:f.eventDataKeys.concat(["label","value"])}),hovertext:h.hovertext,hoverinfo:a.hoverinfo,hovertemplate:F({},{keys:f.eventDataKeys}),textfont:h.textfont,insidetextfont:h.insidetextfont,outsidetextfont:b({},h.outsidetextfont,{}),textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),
dflt:"top left",editType:"plot"},domain:p({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129,"../sunburst/attributes":1266,"./constants":1295}],1293:[function(b,y,F){var q=b("../../plots/plots");F.name="treemap";F.plot=function(n,p,h,a){q.plotBasePlot(F.name,n,p,h,a)};F.clean=function(n,p,h,a){q.cleanBasePlot(F.name,n,p,h,a)}},{"../../plots/plots":860}],
1294:[function(b,y,F){var q=b("../sunburst/calc");F.calc=function(n,p){return q.calc(n,p)};F.crossTraceCalc=function(n){return q._runCrossTraceCalc("treemap",n)}},{"../sunburst/calc":1268}],1295:[function(b,y,F){y.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" "),gapWithPathbar:1}},{}],1296:[function(b,y,F){var q=b("../../lib"),n=b("./attributes"),p=b("../../components/color"),h=b("../../plots/domain").defaults,
a=b("../bar/defaults").handleText,f=b("../bar/constants").TEXTPAD;b=b("../../components/colorscale");var d=b.hasColorscale,l=b.handleDefaults;y.exports=function(k,c,e,g){function m(w,D){return q.coerce(k,c,n,w,D)}e=m("labels");var r=m("parents");if(e&&e.length&&r&&r.length){(e=m("values"))&&e.length?m("branchvalues"):m("count");m("level");m("maxdepth");"squarify"===m("tiling.packing")&&m("tiling.squarifyratio");m("tiling.flip");m("tiling.pad");e=m("text");m("texttemplate");c.texttemplate||m("textinfo",
Array.isArray(e)?"text+label":"label");m("hovertext");m("hovertemplate");e=m("pathbar.visible");a(k,c,g,m,"auto",{hasPathbar:e,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});m("textposition");r=-1!==c.textposition.indexOf("bottom");m("marker.line.width")&&m("marker.line.color",g.paper_bgcolor);var u=m("marker.colors"),v=c._hasColorscale=d(k,"marker","colors")||(k.marker||{}).coloraxis;v?l(k,c,g,m,{prefix:"marker.",
cLetter:"c"}):m("marker.depthfade",!(u||[]).length);u=2*c.textfont.size;m("marker.pad.t",r?u/4:u);m("marker.pad.l",u/4);m("marker.pad.r",u/4);m("marker.pad.b",r?u:u/4);v&&l(k,c,g,m,{prefix:"marker.",cLetter:"c"});c._hovered={marker:{line:{width:2,color:p.contrast(g.paper_bgcolor)}}};e&&(m("pathbar.thickness",c.pathbar.textfont.size+2*f),m("pathbar.side"),m("pathbar.edgeshape"));h(c,g,m);c._length=null}else c.visible=!1}},{"../../components/color":615,"../../components/colorscale":627,"../../lib":749,
"../../plots/domain":824,"../bar/constants":892,"../bar/defaults":894,"./attributes":1292}],1297:[function(b,y,F){var q=b("d3"),n=b("../../lib"),p=b("../../components/drawing"),h=b("../../lib/svg_text_utils"),a=b("./partition"),f=b("./style").styleOne,d=b("./constants"),l=b("../sunburst/helpers"),k=b("../sunburst/fx");y.exports=function(c,e,g,m,r){var u=r.barDifY,v=r.width,w=r.height,D=r.viewX,C=r.viewY,x=r.pathSlice,A=r.toMoveInsideSlice,B=r.strTransform,t=r.hasTransition,G=r.handleSlicesExit,H=
r.makeUpdateSliceInterpolator,I=r.makeUpdateTextInterpolator,J={},L=c._fullLayout;r=e[0];var E=r.trace;r=r.hierarchy;var K=v/E._entryDepth,N=l.listPath(g.data,"id");r=a(r.copy(),[v,w],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();r=r.filter(function(O){var Q=N.indexOf(O.data.id);if(-1===Q)return!1;O.x0=K*Q;O.x1=K*(Q+1);O.y0=u;O.y1=u+w;return O.onPathbar=!0});r.reverse();m=m.data(r,l.getPtId);m.enter().append("g").classed("pathbar",!0);G(m,!0,J,[v,w],x);m.order();t&&(m=
m.transition().each("end",function(){var O=q.select(this);l.setSliceCursor(O,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}));m.each(function(O){O._hoverX=D(O.x1-Math.min(v,w)/2);O._hoverY=C(O.y1-w/2);var Q=q.select(this),P=n.ensureSingle(Q,"path","surface",function(T){T.style("pointer-events","all")});t?P.transition().attrTween("d",function(T){var V=H(T,!0,J,[v,w]);return function(aa){return x(V(aa))}}):P.attr("d",x);Q.call(k,g,c,e,{styleOne:f,eventDataKeys:d.eventDataKeys,transitionTime:d.CLICK_TRANSITION_TIME,
transitionEasing:d.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:c._transitioning});P.call(f,O,E,{hovered:!1});O._text=(l.getPtLabel(O)||"").split("\x3cbr\x3e").join(" ")||"";Q=n.ensureSingle(Q,"g","slicetext");Q=n.ensureSingle(Q,"text","",function(T){T.attr("data-notex",1)});P=n.ensureUniformFontSize(c,l.determineTextFont(E,O,L.font,{onPathbar:!0}));Q.text(O._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(p.font,P).call(h.convertToTspans,
c);O.textBB=p.bBox(Q.node());O.transform=A(O,{fontSize:P.size,onPathbar:!0});O.transform.fontSize=P.size;t?Q.transition().attrTween("transform",function(T){var V=I(T,!0,J,[v,w]);return function(aa){return B(V(aa))}}):Q.attr("transform",B(O))})}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../sunburst/fx":1271,"../sunburst/helpers":1272,"./constants":1295,"./partition":1302,"./style":1304,d3:169}],1298:[function(b,y,F){var q=b("d3"),n=b("../../lib"),p=b("../../components/drawing"),
h=b("../../lib/svg_text_utils"),a=b("./partition"),f=b("./style").styleOne,d=b("./constants"),l=b("../sunburst/helpers"),k=b("../sunburst/fx"),c=b("../sunburst/plot").formatSliceLabel;y.exports=function(e,g,m,r,u){var v=u.width,w=u.height,D=u.viewX,C=u.viewY,x=u.pathSlice,A=u.toMoveInsideSlice,B=u.strTransform,t=u.hasTransition,G=u.handleSlicesExit,H=u.makeUpdateSliceInterpolator,I=u.makeUpdateTextInterpolator;u=u.prevEntry;var J=e._fullLayout,L=g[0].trace,E=-1!==L.textposition.indexOf("left"),K=
-1!==L.textposition.indexOf("right"),N=-1!==L.textposition.indexOf("bottom"),O=!N&&!L.marker.pad.t||N&&!L.marker.pad.b,Q=a(m,[v,w],{packing:L.tiling.packing,squarifyratio:L.tiling.squarifyratio,flipX:-1<L.tiling.flip.indexOf("x"),flipY:-1<L.tiling.flip.indexOf("y"),pad:{inner:L.tiling.pad,top:L.marker.pad.t,left:L.marker.pad.l,right:L.marker.pad.r,bottom:L.marker.pad.b}}).descendants(),P=Infinity,T=-Infinity;Q.forEach(function(ba){var Y=ba.depth;Y>=L._maxDepth?(ba.x0=ba.x1=(ba.x0+ba.x1)/2,ba.y0=ba.y1=
(ba.y0+ba.y1)/2):(P=Math.min(P,Y),T=Math.max(T,Y))});r=r.data(Q,l.getPtId);L._maxVisibleLayers=isFinite(T)?T-P+1:0;r.enter().append("g").classed("slice",!0);G(r,!1,{},[v,w],x);r.order();var V=null;if(t&&u){var aa=l.getPtId(u);r.each(function(ba){null===V&&l.getPtId(ba)===aa&&(V={x0:ba.x0,x1:ba.x1,y0:ba.y0,y1:ba.y1})})}t&&(r=r.transition().each("end",function(){var ba=q.select(this);l.setSliceCursor(ba,e,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));r.each(function(ba){var Y=l.isHeader(ba,
L);ba._hoverX=D(ba.x1-L.marker.pad.r);ba._hoverY=N?C(ba.y1-L.marker.pad.b/2):C(ba.y0+L.marker.pad.t/2);var ea=q.select(this),da=n.ensureSingle(ea,"path","surface",function(ca){ca.style("pointer-events","all")});t?da.transition().attrTween("d",function(ca){var la=H(ca,!1,V||{x0:0,x1:v,y0:0,y1:w},[v,w]);return function(pa){return x(la(pa))}}):da.attr("d",x);ea.call(k,m,e,g,{styleOne:f,eventDataKeys:d.eventDataKeys,transitionTime:d.CLICK_TRANSITION_TIME,transitionEasing:d.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,
e,{isTransitioning:e._transitioning});da.call(f,ba,L,{hovered:!1});ba._text=ba.x0===ba.x1||ba.y0===ba.y1?"":Y?O?"":l.getPtLabel(ba)||"":c(ba,m,L,g,J)||"";ea=n.ensureSingle(ea,"g","slicetext");ea=n.ensureSingle(ea,"text","",function(ca){ca.attr("data-notex",1)});da=n.ensureUniformFontSize(e,l.determineTextFont(L,ba,J.font));ea.text(ba._text||" ").classed("slicetext",!0).attr("text-anchor",K?"end":E||Y?"start":"middle").call(p.font,da).call(h.convertToTspans,e);ba.textBB=p.bBox(ea.node());ba.transform=
A(ba,{fontSize:da.size,isHeader:Y});ba.transform.fontSize=da.size;t?ea.transition().attrTween("transform",function(ca){var la=I(ca,!1,V||{x0:0,x1:v,y0:0,y1:w},[v,w]);return function(pa){return B(la(pa))}}):ea.attr("transform",B(ba))});return V}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../sunburst/fx":1271,"../sunburst/helpers":1272,"../sunburst/plot":1276,"./constants":1295,"./partition":1302,"./style":1304,d3:169}],1299:[function(b,y,F){y.exports={moduleType:"trace",
name:"treemap",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1173,"./attributes":1292,"./base_plot":1293,"./calc":1294,"./defaults":1296,"./layout_attributes":1300,
"./layout_defaults":1301,"./plot":1303,"./style":1304}],1300:[function(b,y,F){y.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1301:[function(b,y,F){var q=b("../../lib"),n=b("./layout_attributes");y.exports=function(p,h){q.coerce(p,h,n,"treemapcolorway",h.colorway);q.coerce(p,h,n,"extendtreemapcolors",void 0)}},{"../../lib":749,"./layout_attributes":1300}],1302:[function(b,y,F){function q(h,a){switch(h){case "squarify":return p.treemapSquarify.ratio(a);
case "binary":return p.treemapBinary;case "dice":return p.treemapDice;case "slice":return p.treemapSlice;default:return p.treemapSliceDice}}function n(h,a,f){if(f.swapXY){var d=h.x0;h.x0=h.y0;h.y0=d;d=h.x1;h.x1=h.y1;h.y1=d}f.flipX&&(d=h.x0,h.x0=a[0]-h.x1,h.x1=a[0]-d);f.flipY&&(d=h.y0,h.y0=a[1]-h.y1,h.y1=a[1]-d);if(h=h.children)for(d=0;d<h.length;d++)n(h[d],a,f)}var p=b("d3-hierarchy");y.exports=function(h,a,f){var d=f.flipX,l=f.flipY,k="dice-slice"===f.packing,c=f.pad[l?"bottom":"top"],e=f.pad[d?
"right":"left"],g=f.pad[d?"left":"right"],m=f.pad[l?"top":"bottom"];if(k){var r=e;e=c;c=r;r=g;g=m;m=r}h=p.treemap().tile(q(f.packing,f.squarifyratio)).paddingInner(f.pad.inner).paddingLeft(e).paddingRight(g).paddingTop(c).paddingBottom(m).size(k?[a[1],a[0]]:a)(h);(k||d||l)&&n(h,a,{swapXY:k,flipX:d,flipY:l});return h}},{"d3-hierarchy":161}],1303:[function(b,y,F){function q(r){return h.isHierarchyRoot(r)?"":h.getPtId(r)}function n(r,u,v,w){var D=r._fullLayout,C=u[0],x=C.trace,A=C.hierarchy,B=h.findEntryWithLevel(A,
x.level),t=p.select(v);v=t.selectAll("g.pathbar");t=t.selectAll("g.slice");if(B){var G=h.isHierarchyRoot(B),H=!D.uniformtext.mode&&h.hasTransition(w),I=h.getMaxDepth(x),J=D._size,L=x.domain,E=J.w*(L.x[1]-L.x[0]);w=J.h*(L.y[1]-L.y[0]);var K=x.pathbar.thickness,N=x.marker.line.width+e.gapWithPathbar;N=x.pathbar.visible?-1<x.pathbar.side.indexOf("bottom")?w+N:-(K+N):0;var O={x0:E,x1:E,y0:N,y1:N+K},Q=function(na,ya,Fa){var Ha=x.tiling.pad;return{x0:na.x0-Ha-Ha<=ya.x0?0:na.x0-Ha+Ha>=ya.x1?Fa[0]:na.x0,
x1:na.x1+Ha-Ha<=ya.x0?0:na.x1+Ha+Ha>=ya.x1?Fa[0]:na.x1,y0:na.y0-Ha-Ha<=ya.y0?0:na.y0-Ha+Ha>=ya.y1?Fa[1]:na.y0,y1:na.y1+Ha-Ha<=ya.y0?0:na.y1+Ha+Ha>=ya.y1?Fa[1]:na.y1}},P=null,T={},V={},aa=null,ba=function(na,ya){return ya?T[q(na)]:V[q(na)]};C.hasMultipleRoots&&G&&I++;x._maxDepth=I;x._backgroundColor=D.paper_bgcolor;x._entryDepth=B.data.depth;x._atRootLevel=G;var Y=-E/2+J.l+J.w*(L.x[1]+L.x[0])/2,ea=-w/2+J.t+J.h*(1-(L.y[1]+L.y[0])/2),da=ea+0,ca=Y+0;C=function(na){return ca+na};G=function(na){return da+
na};var la=ca+0,pa=function(na){na.x=Math.max(la,na.x)},qa=x.pathbar.edgeshape;J=function(na){var ya=ca+Math.max(Math.min(na.x0,na.x0),0),Fa=ca+Math.min(Math.max(na.x1,na.x1),E),Ha=da+na.y0,eb=da+na.y1;na=K/2;var hb={},ob={};hb.x=ya;ob.x=Fa;hb.y=ob.y=(Ha+eb)/2;var ib={x:ya,y:Ha};Ha={x:Fa,y:Ha};Fa={x:Fa,y:eb};ya={x:ya,y:eb};"\x3e"===qa?(ib.x-=na,Ha.x-=na,Fa.x-=na,ya.x-=na):"/"===qa?(Fa.x-=na,ya.x-=na,hb.x-=na/2,ob.x-=na/2):"\\"===qa?(ib.x-=na,Ha.x-=na,hb.x-=na/2,ob.x-=na/2):"\x3c"===qa&&(hb.x-=na,
ob.x-=na);pa(ib);pa(ya);pa(hb);pa(Ha);pa(Fa);pa(ob);return"M"+(ib.x+","+ib.y)+"L"+(Ha.x+","+Ha.y)+"L"+(ob.x+","+ob.y)+"L"+(Fa.x+","+Fa.y)+"L"+(ya.x+","+ya.y)+"L"+(hb.x+","+hb.y)+"Z"};var oa=function(na,ya){var Fa=na.x0,Ha=na.x1,eb=na.y0,hb=na.y1;na=na.textBB;var ob=-1!==x.textposition.indexOf("bottom"),ib=-1!==x.textposition.indexOf("top")||ya.isHeader&&!ob?"start":ob?"end":"middle",Pa=-1!==x.textposition.indexOf("right"),sb=-1!==x.textposition.indexOf("left")||ya.onPathbar,tb=x.marker.pad;ya.isHeader&&
(Fa+=tb.l-f,Ha-=tb.r-f,Fa>=Ha&&(Fa=Ha=(Fa+Ha)/2),ob?(ob=hb-tb.b,eb<ob&&ob<hb&&(eb=ob)):(ob=eb+tb.t,eb<ob&&ob<hb&&(hb=ob)));na=d(Fa,Ha,eb,hb,na,{isHorizontal:!1,constrained:!0,angle:0,anchor:ib,leftToRight:sb?-1:Pa?1:0});na.fontSize=ya.fontSize;na.targetX=Y+na.targetX;na.targetY=ea+na.targetY;if(isNaN(na.targetX)||isNaN(na.targetY))return{};Fa!==Ha&&eb!==hb&&l(x.type,na,D);return{scale:na.scale,rotate:na.rotate,textX:na.textX,textY:na.textY,anchorX:na.anchorX,anchorY:na.anchorY,targetX:na.targetX,
targetY:na.targetY}},ka=function(na,ya){for(var Fa,Ha=0;!Fa&&Ha<I;)Ha++,(na=na.parent)?Fa=ba(na,ya):Ha=I;return Fa||{}},ra=function(na,ya,Fa,Ha){Fa=ba(na,ya);na=ya?O:(ya=ba(B,ya))?Q(na,ya,Ha):{};return p.interpolate(Fa,na)};L=function(na,ya,Fa,Ha){var eb=ba(na,ya);eb?Ha=eb:ya?Ha=O:P?na.parent?(Fa=aa||Fa)&&!ya?Ha=Q(na,Fa,Ha):(Ha={},a.extendFlat(Ha,ka(na,ya))):Ha=na:Ha={};return p.interpolate(Ha,{x0:na.x0,x1:na.x1,y0:na.y0,y1:na.y1})};var ha=function(na,ya,Fa,Ha){var eb=ba(na,ya),hb={};ya?Ha=T[q(A)]||
O:(Fa=V[x.level]||Fa,Ha=na.data.depth-B.data.depth<I?Q(na,Fa,Ha):{});a.extendFlat(hb,{transform:oa({x0:Ha.x0,x1:Ha.x1,y0:Ha.y0,y1:Ha.y1,textBB:na.textBB,_text:na._text},{isHeader:h.isHeader(na,x)})});eb?hb=eb:na.parent&&a.extendFlat(hb,ka(na,ya));ya=na.transform;na.x0!==na.x1&&na.y0!==na.y1&&l(x.type,ya,D);return p.interpolate(hb,{transform:{scale:ya.scale,rotate:ya.rotate,textX:ya.textX,textY:ya.textY,anchorX:ya.anchorX,anchorY:ya.anchorY,targetX:ya.targetX,targetY:ya.targetY}})},ma=function(na,
ya,Fa,Ha,eb){var hb=Ha[0],ob=Ha[1];H?na.exit().transition().each(function(){var ib=p.select(this);ib.select("path.surface").transition().attrTween("d",function(Pa){var sb=ra(Pa,ya,Fa,[hb,ob]);return function(tb){return eb(sb(tb))}});ib.select("g.slicetext").attr("opacity",0)}).remove():na.exit().remove()},wa=function(na){var ya=na.transform;na.x0!==na.x1&&na.y0!==na.y1&&l(x.type,ya,D);return a.getTextTransform({textX:ya.textX,textY:ya.textY,anchorX:ya.anchorX,anchorY:ya.anchorY,targetX:ya.targetX,
targetY:ya.targetY,scale:ya.scale,rotate:ya.rotate})};H&&(v.each(function(na){T[q(na)]={x0:na.x0,x1:na.x1,y0:na.y0,y1:na.y1};na.transform&&(T[q(na)].transform={textX:na.transform.textX,textY:na.transform.textY,anchorX:na.transform.anchorX,anchorY:na.transform.anchorY,targetX:na.transform.targetX,targetY:na.transform.targetY,scale:na.transform.scale,rotate:na.transform.rotate})}),t.each(function(na){V[q(na)]={x0:na.x0,x1:na.x1,y0:na.y0,y1:na.y1};na.transform&&(V[q(na)].transform={textX:na.transform.textX,
textY:na.transform.textY,anchorX:na.transform.anchorX,anchorY:na.transform.anchorY,targetX:na.transform.targetX,targetY:na.transform.targetY,scale:na.transform.scale,rotate:na.transform.rotate});!P&&h.isEntry(na)&&(P=na)}));aa=g(r,u,B,t,{width:E,height:w,viewX:function(na){return Y+na},viewY:function(na){return ea+na},pathSlice:function(na){var ya=Y+na.x0,Fa=Y+na.x1,Ha=ea+na.y0;na=ea+na.y1;return Fa-ya&&na-Ha?"M"+(ya+","+(Ha+0))+"L"+(Fa-0+","+Ha)+"L"+(Fa+","+(na-0))+"L"+(ya+0+","+na)+"Z":""},toMoveInsideSlice:oa,
prevEntry:P,makeUpdateSliceInterpolator:L,makeUpdateTextInterpolator:ha,handleSlicesExit:ma,hasTransition:H,strTransform:wa});x.pathbar.visible?m(r,u,B,v,{barDifY:N,width:E,height:K,viewX:C,viewY:G,pathSlice:J,toMoveInsideSlice:oa,makeUpdateSliceInterpolator:L,makeUpdateTextInterpolator:ha,handleSlicesExit:ma,hasTransition:H,strTransform:wa}):v.remove()}else v.remove(),t.remove()}var p=b("d3"),h=b("../sunburst/helpers"),a=b("../../lib"),f=b("../bar/constants").TEXTPAD,d=b("../bar/plot").toMoveInsideBar;
F=b("../bar/uniform_text");var l=F.recordMinTextSize,k=F.clearMinTextSize,c=b("../bar/style").resizeText,e=b("./constants"),g=b("./draw_descendants"),m=b("./draw_ancestors");y.exports=function(r,u,v,w){var D=r._fullLayout,C=D._treemaplayer,x,A=!v;k("treemap",D);u=C.selectAll("g.trace.treemap").data(u,function(B){return B[0].trace.uid});u.enter().append("g").classed("trace",!0).classed("treemap",!0);u.order();!D.uniformtext.mode&&h.hasTransition(v)?(w&&(x=w()),p.transition().duration(v.duration).ease(v.easing).each("end",
function(){x&&x()}).each("interrupt",function(){x&&x()}).each(function(){C.selectAll("g.trace").each(function(B){n(r,B,this,v)})})):(u.each(function(B){n(r,B,this,v)}),D.uniformtext.mode&&c(r,D._treemaplayer.selectAll(".trace"),"treemap"));A&&u.exit().remove()}},{"../../lib":749,"../bar/constants":892,"../bar/plot":901,"../bar/style":904,"../bar/uniform_text":906,"../sunburst/helpers":1272,"./constants":1295,"./draw_ancestors":1297,"./draw_descendants":1298,d3:169}],1304:[function(b,y,F){function q(d,
l,k,c){var e=(c||{}).hovered;c=l.data.data;var g=c.i;c=c.color;var m=a.isHierarchyRoot(l),r=1;if(e)e=k._hovered.marker.line.color,g=k._hovered.marker.line.width;else if(m&&"rgba(0,0,0,0)"===c)r=0,e="rgba(0,0,0,0)",g=0;else if(e=h.castOption(k,g,"marker.line.color")||p.defaultLine,g=h.castOption(k,g,"marker.line.width")||0,!k._hasColorscale&&!l.onPathbar){var u=k.marker.depthfade;if(u&&(m=p.combine(p.addOpacity(k._backgroundColor,.75),c),!0===u?(u=a.getMaxDepth(k),l=isFinite(u)?a.isLeaf(l)?0:k._maxVisibleLayers-
(l.data.depth-k._entryDepth):l.data.height+1):(l=l.data.depth-k._entryDepth,k._atRootLevel||l++),0<l))for(k=0;k<l;k++)c=p.combine(p.addOpacity(m,.5*k/l),c)}d.style("stroke-width",g).call(p.fill,c).call(p.stroke,e).style("opacity",r)}var n=b("d3"),p=b("../../components/color"),h=b("../../lib"),a=b("../sunburst/helpers"),f=b("../bar/uniform_text").resizeText;y.exports={style:function(d){var l=d._fullLayout._treemaplayer.selectAll(".trace");f(d,l,"treemap");l.each(function(k){var c=n.select(this),e=
k[0].trace;c.style("opacity",e.opacity);c.selectAll("path.surface").each(function(g){n.select(this).call(q,g,e,{hovered:!1})})})},styleOne:q}},{"../../components/color":615,"../../lib":749,"../bar/uniform_text":906,"../sunburst/helpers":1272,d3:169}],1305:[function(b,y,F){F=b("../box/attributes");b=b("../../lib/extend").extendFlat;y.exports={y:F.y,x:F.x,x0:F.x0,y0:F.y0,name:b({},F.name,{}),orientation:b({},F.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",
dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:F.fillcolor,points:b({},F.boxpoints,{}),jitter:b({},
F.jitter,{}),pointpos:b({},F.pointpos,{}),width:b({},F.width,{}),marker:F.marker,text:F.text,hovertext:F.hovertext,hovertemplate:F.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},
color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:F.offsetgroup,alignmentgroup:F.alignmentgroup,selected:F.selected,unselected:F.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":739,"../box/attributes":915}],1306:[function(b,y,F){function q(d,
l,k,c){function e(v){var w=m[v];w="multicategory"===k.type?k.r2c(w):k.d2c(w,0,d[l.valLetter+"calendar"]);return w===f?u[v]:w}var g=d.spanmode,m=d.span||[],r=[l.min,l.max],u=[l.min-2*c,l.max+2*c];c="soft"===g?u:"hard"===g?r:[e(0),e(1)];g={type:"linear",range:c};p.setConvert(g);g.cleanRange();return c}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../box/calc"),a=b("./helpers"),f=b("../../constants/numerical").BADNUM;y.exports=function(d,l){var k=h(d,l);if(k[0].t.empty)return k;for(var c=
d._fullLayout,e=p.getFromId(d,l["h"===l.orientation?"xaxis":"yaxis"]),g=Infinity,m=-Infinity,r=0,u=0,v=0;v<k.length;v++){var w=k[v],D=w.pts.map(a.extractVal),C=w;var x=w;var A=x.max-x.min;if(A)if(l.bandwidth)x=Math.max(l.bandwidth,A/1E4);else{var B=D.length,t=n.stdev(D,B-1,x.mean);x=Math.max(1.059*Math.min(t,(x.q3-x.q1)/1.349)*Math.pow(B,-.2),A/100)}else x=l.bandwidth?l.bandwidth:0;A=C.bandwidth=x;C=w.span=q(l,w,e,A);if(w.min===w.max&&0===A)C=w.span=[w.min,w.max],w.density=[{v:1,t:C[0]}],w.bandwidth=
A,r=Math.max(r,1);else{x=C[1]-C[0];B=Math.ceil(x/(A/3));x/=B;if(!isFinite(x)||!isFinite(B))return n.error("Something went wrong with computing the violin span"),k[0].t.empty=!0,k;A=a.makeKDE(w,l,D);w.density=Array(B);B=0;for(t=C[0];t<C[1]+x/2;B++,t+=x){var G=A(t);w.density[B]={v:G,t};r=Math.max(r,G)}}u=Math.max(u,D.length);g=Math.min(g,C[0]);m=Math.max(m,C[1])}g=p.findExtremes(e,[g,m],{padded:!0});l._extremes[e._id]=g;l.width?k[0].t.maxKDE=r:(c=c._violinScaleGroupStats,l=l.scalegroup,(e=c[l])?(e.maxKDE=
Math.max(e.maxKDE,r),e.maxCount=Math.max(e.maxCount,u)):c[l]={maxKDE:r,maxCount:u});k[0].t.labels.kde=n._(d,"kde:");return k}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../box/calc":916,"./helpers":1309}],1307:[function(b,y,F){var q=b("../box/cross_trace_calc").setPositionOffset,n=["v","h"];y.exports=function(p,h){var a=p.calcdata,f=h.xaxis;h=h.yaxis;for(var d=0;d<n.length;d++){for(var l=n[d],k="h"===l?h:f,c=[],e=0;e<a.length;e++){var g=a[e],m=g[0].t;g=g[0].trace;
!0!==g.visible||"violin"!==g.type||m.empty||g.orientation!==l||g.xaxis!==f._id||g.yaxis!==h._id||c.push(e)}q("violin",p,c,k)}}},{"../box/cross_trace_calc":917}],1308:[function(b,y,F){var q=b("../../lib"),n=b("../../components/color"),p=b("../box/defaults"),h=b("./attributes");y.exports=function(a,f,d,l){function k(u,v){return q.coerce(a,f,h,u,v)}function c(u,v){return q.coerce2(a,f,h,u,v)}p.handleSampleDefaults(a,f,k,l);if(!1!==f.visible){k("bandwidth");k("side");k("width")||(k("scalegroup",f.name),
k("scalemode"));l=k("span");var e;Array.isArray(l)&&(e="manual");k("spanmode",e);e=k("line.color",(a.marker||{}).color||d);d=k("line.width");var g=k("fillcolor",n.addOpacity(f.line.color,.5));p.handlePointsDefaults(a,f,k,{prefix:""});l=c("box.width");g=c("box.fillcolor",g);var m=c("box.line.color",e),r=c("box.line.width",d);k("box.visible",!!(l||g||m||r))||(f.box={visible:!1});e=c("meanline.color",e);d=c("meanline.width",d);k("meanline.visible",!(!e&&!d))||(f.meanline={visible:!1})}}},{"../../components/color":615,
"../../lib":749,"../box/defaults":918,"./attributes":1305}],1309:[function(b,y,F){var q=b("../../lib");F.makeKDE=function(n,p,h){var a=h.length,f=n.bandwidth,d=1/(a*f);return function(l){for(var k=0,c=0;c<a;c++){var e=(l-h[c])/f;k+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}return d*k}};F.getPositionOnKdePath=function(n,p,h){if("h"===p.orientation){var a="y";var f="x"}else a="x",f="y";h=q.findPointOnPath(n.path,h,f,{pathLength:n.pathLength});n=n.posCenterPx;a=h[a];return[a,"both"===p.side?2*n-a:n]};
F.getKdeValue=function(n,p,h){var a=n.pts.map(F.extractVal);return F.makeKDE(n,p,a)(h)/n.posDensityScale};F.extractVal=function(n){return n.v}},{"../../lib":749}],1310:[function(b,y,F){var q=b("../../lib"),n=b("../../plots/cartesian/axes"),p=b("../box/hover"),h=b("./helpers");y.exports=function(a,f,d,l,k){var c=a.cd,e=c[0].trace,g=e.hoveron,m=-1!==g.indexOf("violins"),r=-1!==g.indexOf("kde"),u=[],v;if(m||r){var w=p.hoverOnBoxes(a,f,d,l);if(r&&0<w.length){var D=a.xa,C=a.ya;if("h"===e.orientation){var x=
f;r="y";var A=C;var B="x"}else x=d,r="x",A=D,B="y",D=C;var t=c[a.index];if(x>=t.span[0]&&x<=t.span[1]){var G=q.extendFlat({},a);C=D.c2p(x,!0);var H=h.getKdeValue(t,e,x);t=h.getPositionOnKdePath(t,e,C);var I=A._offset;A=A._length;G[r+"0"]=t[0];G[r+"1"]=t[1];G[B+"0"]=G[B+"1"]=C;G[B+"Label"]=B+": "+n.hoverLabelText(D,x)+", "+c[0].t.labels.kde+" "+H.toFixed(3);G.spikeDistance=w[0].spikeDistance;c=r+"Spike";G[c]=w[0][c];w[0].spikeDistance=void 0;w[0][c]=void 0;G.hovertemplate=!1;u.push(G);G={stroke:a.color};
G[r+"1"]=q.constrain(I+t[0],I,I+A);G[r+"2"]=q.constrain(I+t[1],I,I+A);G[B+"1"]=G[B+"2"]=D._offset+C}}m&&(u=u.concat(w))}-1!==g.indexOf("points")&&(v=p.hoverOnPoints(a,f,d));a=k.selectAll(".violinline-"+e.uid).data(G?[0]:[]);a.enter().append("line").classed("violinline-"+e.uid,!0).attr("stroke-width",1.5);a.exit().remove();a.attr(G);if("closest"===l)return v?[v]:u;v&&u.push(v);return u}},{"../../lib":749,"../../plots/cartesian/axes":797,"../box/hover":920,"./helpers":1309}],1311:[function(b,y,F){y.exports=
{attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../box/select"),moduleType:"trace",name:"violin",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":810,"../box/defaults":918,"../box/select":925,"../scatter/style":1178,"./attributes":1305,"./calc":1306,"./cross_trace_calc":1307,"./defaults":1308,"./hover":1310,"./layout_attributes":1312,"./layout_defaults":1313,"./plot":1314,"./style":1315}],1312:[function(b,y,F){F=b("../box/layout_attributes");b=b("../../lib").extendFlat;y.exports={violinmode:b({},F.boxmode,{}),violingap:b({},F.boxgap,{}),violingroupgap:b({},F.boxgroupgap,{})}},{"../../lib":749,"../box/layout_attributes":922}],
1313:[function(b,y,F){var q=b("../../lib"),n=b("./layout_attributes"),p=b("../box/layout_defaults");y.exports=function(h,a,f){p._supply(h,a,f,function(d,l){return q.coerce(h,a,n,d,l)},"violin")}},{"../../lib":749,"../box/layout_defaults":923,"./layout_attributes":1312}],1314:[function(b,y,F){var q=b("d3"),n=b("../../lib"),p=b("../../components/drawing"),h=b("../box/plot"),a=b("../scatter/line_points"),f=b("./helpers");y.exports=function(d,l,k,c){function e(u){u=a(u,{xaxis:m,yaxis:r,connectGaps:!0,
baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return p.smoothopen(u[0],1)}var g=d._fullLayout,m=l.xaxis,r=l.yaxis;n.makeTraceGroups(c,k,"trace violins").each(function(u){var v=q.select(this);u=u[0];var w=u.t,D=u.trace;if(!0!==D.visible||w.empty)v.remove();else{var C=w.bPos,x=w.bdPos,A=l[w.valLetter+"axis"],B=l[w.posLetter+"axis"],t="both"===D.side,G=t||"positive"===D.side,H=t||"negative"===D.side;u=v.selectAll("path.violin").data(n.identity);u.enter().append("path").style("vector-effect",
"non-scaling-stroke").attr("class","violin");u.exit().remove();u.each(function(L){var E=q.select(this),K=L.density,N=K.length,O=B.c2l(L.pos+C,!0),Q=B.l2p(O);if(D.width)var P=w.maxKDE/x;else P=g._violinScaleGroupStats[D.scalegroup],P="count"===D.scalemode?P.maxKDE/x*(P.maxCount/L.pts.length):P.maxKDE/x;var T;if(G){var V=Array(N);for(T=0;T<N;T++){var aa=V[T]={};aa[w.posLetter]=O+K[T].v/P;aa[w.valLetter]=A.c2l(K[T].t,!0)}var ba=e(V)}if(H){V=Array(N);var Y=0;for(T=N-1;Y<N;Y++,T--)aa=V[Y]={},aa[w.posLetter]=
O-K[T].v/P,aa[w.valLetter]=A.c2l(K[T].t,!0);Y=e(V)}t?ba=ba+"L"+Y.substr(1)+"Z":(O=[Q,A.c2p(K[0].t)],K=[Q,A.c2p(K[N-1].t)],"h"===D.orientation&&(O.reverse(),K.reverse()),ba=G?"M"+O+"L"+ba.substr(1)+"L"+K:"M"+K+"L"+Y.substr(1)+"L"+O);E.attr("d",ba);L.posCenterPx=Q;L.posDensityScale=P*x;L.path=E.node();L.pathLength=L.path.getTotalLength()/(t?2:1)});var I=D.box;u=I.width;I=(I.line||{}).width;t?(u*=x,I=0):G?(u=[0,x*u/2],I*={x:1,y:-1}[w.posLetter]):(u=[x*u/2,0],I*={x:-1,y:1}[w.posLetter]);h.plotBoxAndWhiskers(v,
{pos:B,val:A},D,{bPos:C,bdPos:u,bPosPxOffset:I});h.plotBoxMean(v,{pos:B,val:A},D,{bPos:C,bdPos:u,bPosPxOffset:I});if(!D.box.visible&&D.meanline.visible)var J=n.identity;J=v.selectAll("path.meanline").data(J||[]);J.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");J.exit().remove();J.each(function(L){var E=A.c2p(L.mean,!0);L=f.getPositionOnKdePath(L,D,E);q.select(this).attr("d","h"===D.orientation?"M"+E+","+L[0]+"V"+L[1]:"M"+L[0]+","+E+
"H"+L[1])});h.plotPoints(v,{x:m,y:r},D,w)}})}},{"../../components/drawing":637,"../../lib":749,"../box/plot":924,"../scatter/line_points":1169,"./helpers":1309,d3:169}],1315:[function(b,y,F){var q=b("d3"),n=b("../../components/color"),p=b("../scatter/style").stylePoints;y.exports=function(h){var a=q.select(h).selectAll("g.trace.violins");a.style("opacity",function(f){return f[0].trace.opacity});a.each(function(f){f=f[0].trace;var d=q.select(this),l=f.box||{},k=l.line||{},c=f.meanline||{},e=c.width;
d.selectAll("path.violin").style("stroke-width",f.line.width+"px").call(n.stroke,f.line.color).call(n.fill,f.fillcolor);d.selectAll("path.box").style("stroke-width",k.width+"px").call(n.stroke,k.color).call(n.fill,l.fillcolor);l={"stroke-width":e+"px","stroke-dasharray":2*e+"px,"+e+"px"};d.selectAll("path.mean").style(l).call(n.stroke,c.color);d.selectAll("path.meanline").style(l).call(n.stroke,c.color);p(d,f,h)})}},{"../../components/color":615,"../scatter/style":1178,d3:169}],1316:[function(b,y,
F){F=b("../../components/colorscale/attributes");var q=b("../isosurface/attributes"),n=b("../surface/attributes"),p=b("../../plots/attributes"),h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;y=y.exports=b(h({x:q.x,y:q.y,z:q.z,value:q.value,isomin:q.isomin,isomax:q.isomax,surface:q.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:q.slices,caps:q.caps,text:q.text,hovertext:q.hovertext,hovertemplate:q.hovertemplate},
F("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:q.colorbar,opacity:q.opacity,opacityscale:n.opacityscale,lightposition:q.lightposition,lighting:q.lighting,flatshading:q.flatshading,contour:q.contour,hoverinfo:h({},p.hoverinfo),showlegend:h({},p.showlegend,{dflt:!1})}),"calc","nested");y.x.editType=y.y.editType=y.z.editType=y.value.editType="calc+clearAxisTypes";y.transforms=void 0},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,
"../../plots/attributes":794,"../isosurface/attributes":1091,"../surface/attributes":1278}],1317:[function(b,y,F){function q(k,c,e){this.scene=k;this.uid=e;this.mesh=c;this.name="";this.data=null;this.showContour=!1}var n=b("gl-mesh3d"),p=b("../../lib/gl_format_color").parseColorScale,h=b("../../lib/str2rgbarray"),a=b("../../components/colorscale").extractOpts,f=b("../../plots/gl3d/zip3"),d=b("../isosurface/convert").findNearestOnAxis,l=b("../isosurface/convert").generateIsoMeshes;b=q.prototype;b.handlePick=
function(k){if(k.object===this.mesh){var c=k.data.index,e=this.data._meshY[c],g=this.data._meshZ[c],m=this.data._Ys.length,r=this.data._Zs.length;c=d(this.data._meshX[c],this.data._Xs).id;e=d(e,this.data._Ys).id;g=d(g,this.data._Zs).id;m=k.index=g+r*e+r*m*c;k.traceCoordinate=[this.data._meshX[m],this.data._meshY[m],this.data._meshZ[m],this.data._value[m]];r=this.data.hovertext||this.data.text;Array.isArray(r)&&void 0!==r[m]?k.textLabel=r[m]:r&&(k.textLabel=r);return!0}};b.update=function(k){function c(m,
r,u,v){return r.map(function(w){return m.d2l(w,0,v)*u})}var e=this.scene,g=e.fullSceneLayout;this.data=l(k);e=f(c(g.xaxis,k._meshX,e.dataScale[0],k.xcalendar),c(g.yaxis,k._meshY,e.dataScale[1],k.ycalendar),c(g.zaxis,k._meshZ,e.dataScale[2],k.zcalendar));g=f(k._meshI,k._meshJ,k._meshK);e={positions:e,cells:g,lightPosition:[k.lightposition.x,k.lightposition.y,k.lightposition.z],ambient:k.lighting.ambient,diffuse:k.lighting.diffuse,specular:k.lighting.specular,roughness:k.lighting.roughness,fresnel:k.lighting.fresnel,
vertexNormalsEpsilon:k.lighting.vertexnormalsepsilon,faceNormalsEpsilon:k.lighting.facenormalsepsilon,opacity:k.opacity,opacityscale:k.opacityscale,contourEnable:k.contour.show,contourColor:h(k.contour.color).slice(0,3),contourWidth:k.contour.width,useFacetNormals:k.flatshading};g=a(k);e.vertexIntensity=k._meshIntensity;e.vertexIntensityBounds=[g.min,g.max];e.colormap=p(k);this.mesh.update(e)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};y.exports=function(k,c){var e=
n({gl:k.glplot.gl}),g=new q(k,e,c.uid);e._trace=g;g.update(c);k.glplot.add(e);return g}},{"../../components/colorscale":627,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/gl3d/zip3":850,"../isosurface/convert":1093,"gl-mesh3d":292}],1318:[function(b,y,F){var q=b("../../lib"),n=b("./attributes"),p=b("../isosurface/defaults").supplyIsoDefaults,h=b("../surface/defaults").opacityscaleDefaults;y.exports=function(a,f,d,l){function k(c,e){return q.coerce(a,f,n,c,e)}p(a,f,d,l,k);
h(a,f,l,k)}},{"../../lib":749,"../isosurface/defaults":1094,"../surface/defaults":1281,"./attributes":1316}],1319:[function(b,y,F){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"volume",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"../isosurface/calc":1092,"./attributes":1316,"./convert":1317,"./defaults":1318}],
1320:[function(b,y,F){function q(l){return{marker:{color:d({},n.marker.color,{arrayOk:!1,editType:"style"}),line:{color:d({},n.marker.line.color,{arrayOk:!1,editType:"style"}),width:d({},n.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}var n=b("../bar/attributes");F=b("../scatter/attributes").line;var p=b("../../plots/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,
f=b("./constants"),d=b("../../lib/extend").extendFlat;b=b("../../components/color");y.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,hovertext:n.hovertext,hovertemplate:h({},{keys:f.eventDataKeys}),hoverinfo:d({},p.hoverinfo,{flags:"name x y text initial delta final".split(" ")}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",
arrayOk:!1},texttemplate:a({editType:"plot"},{keys:f.eventDataKeys.concat(["label"])}),text:n.text,textposition:n.textposition,insidetextanchor:n.insidetextanchor,textangle:n.textangle,textfont:n.textfont,insidetextfont:n.insidetextfont,outsidetextfont:n.outsidetextfont,constraintext:n.constraintext,cliponaxis:n.cliponaxis,orientation:n.orientation,offset:n.offset,width:n.width,increasing:q("increasing"),decreasing:q("decreasing"),totals:q("intermediate sums and total"),connector:{line:{color:d({},
F.color,{dflt:b.defaultLine}),width:d({},F.width,{editType:"plot"}),dash:F.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup}},{"../../components/color":615,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155,"./constants":1322}],
1321:[function(b,y,F){function q(d){return"a"===d||"absolute"===d}function n(d){return"t"===d||"total"===d}var p=b("../../plots/cartesian/axes"),h=b("../../lib").mergeArray,a=b("../scatter/calc_selection"),f=b("../../constants/numerical").BADNUM;y.exports=function(d,l){var k=p.getFromId(d,l.xaxis||"x"),c=p.getFromId(d,l.yaxis||"y");"h"===l.orientation?(d=k.makeCalcdata(l,"x"),k=c.makeCalcdata(l,"y")):(d=c.makeCalcdata(l,"y"),k=k.makeCalcdata(l,"x"));c=Math.min(k.length,d.length);for(var e=Array(c),
g=0,m,r=!1,u=0;u<c;u++){m=d[u]||0;var v=!1;(d[u]!==f||n(l.measure[u])||q(l.measure[u]))&&u+1<c&&(d[u+1]!==f||n(l.measure[u+1])||q(l.measure[u+1]))&&(v=!0);v=e[u]={i:u,p:k[u],s:m,rawS:m,cNext:v};q(l.measure[u])?(g=v.s,v.isSum=!0,v.dir="totals",v.s=g):n(l.measure[u])?(v.isSum=!0,v.dir="totals",v.s=g):(v.isSum=!1,v.dir=0>v.rawS?"decreasing":"increasing",m=v.s,v.s=g+m,g+=m);"totals"===v.dir&&(r=!0);l.ids&&(v.id=String(l.ids[u]));v.v=(l.base||0)+g}e.length&&(e[0].hasTotals=r);h(l.text,e,"tx");h(l.hovertext,
e,"htx");a(e,l);return e}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157}],1322:[function(b,y,F){y.exports={eventDataKeys:["initial","delta","final"]}},{}],1323:[function(b,y,F){var q=b("../bar/cross_trace_calc").setGroupPositions;y.exports=function(n,p){var h=n._fullLayout,a=n._fullData,f=n.calcdata,d=p.xaxis,l=p.yaxis;p=[];var k=[],c=[],e;for(e=0;e<a.length;e++){var g=a[e];if(!0===g.visible&&g.xaxis===d._id&&g.yaxis===l._id&&"waterfall"===
g.type){var m=f[e];"h"===g.orientation?c.push(m):k.push(m);p.push(m)}}m={mode:h.waterfallmode,norm:h.waterfallnorm,gap:h.waterfallgap,groupgap:h.waterfallgroupgap};q(n,d,l,k,m);q(n,l,d,c,m);for(e=0;e<p.length;e++)for(m=p[e],n=0;n<m.length;n++)d=m[n],!1===d.isSum&&(d.s0+=0===n?0:m[n-1].s),n+1<m.length&&(m[n].nextP0=m[n+1].p0,m[n].nextS0=m[n+1].s0)}},{"../bar/cross_trace_calc":893}],1324:[function(b,y,F){function q(c,e,g){c(e+".marker.color",g);c(e+".marker.line.color",d.defaultLine);c(e+".marker.line.width")}
var n=b("../../lib"),p=b("../bar/defaults").handleGroupingDefaults,h=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),f=b("./attributes"),d=b("../../components/color");b=b("../../constants/delta.js");var l=b.INCREASING.COLOR,k=b.DECREASING.COLOR;y.exports={supplyDefaults:function(c,e,g,m){function r(u,v){return n.coerce(c,e,f,u,v)}a(c,e,m,r)?(r("measure"),r("orientation",e.x&&!e.y?"h":"v"),r("base"),r("offset"),r("width"),r("text"),r("hovertext"),r("hovertemplate"),g=r("textposition"),
h(c,e,m,r,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==e.textposition&&(r("texttemplate"),e.texttemplate||r("textinfo")),q(r,"increasing",l),q(r,"decreasing",k),q(r,"totals","#4499FF"),r("connector.visible")&&(r("connector.mode"),r("connector.line.width")&&(r("connector.line.color"),r("connector.line.dash")))):e.visible=!1},crossTraceDefaults:function(c,e){function g(v){return n.coerce(r._input,
r,f,v)}if("group"===e.waterfallmode)for(var m=0;m<c.length;m++){var r=c[m];var u=r._input;p(u,r,e,g)}}}},{"../../components/color":615,"../../constants/delta.js":718,"../../lib":749,"../bar/defaults":894,"../scatter/xy_defaults":1181,"./attributes":1320}],1325:[function(b,y,F){y.exports=function(q,n){q.x="xVal"in n?n.xVal:n.x;q.y="yVal"in n?n.yVal:n.y;"initial"in n&&(q.initial=n.initial);"delta"in n&&(q.delta=n.delta);"final"in n&&(q.final=n.final);n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);return q}},
{}],1326:[function(b,y,F){function q(d,l){var k=d[l.dir].marker;d=k.color;l=k.line.color;k=k.line.width;if(p(d))return d;if(p(l)&&k)return l}var n=b("../../plots/cartesian/axes").hoverLabelText,p=b("../../components/color").opacity,h=b("../bar/hover").hoverOnBars;b=b("../../constants/delta.js");var a=b.INCREASING.SYMBOL,f=b.DECREASING.SYMBOL;y.exports=function(d,l,k,c){if(l=h(d,l,k,c)){var e=l.cd;k=e[0].trace;var g=(c="h"===k.orientation)?d.xa:d.ya;d=e[l.index];e=d.isSum?d.b+d.s:d.rawS;if(!d.isSum){l.initial=
d.b+d.s-e;l.delta=e;l.final=l.initial+l.delta;var m=n(g,Math.abs(l.delta));l.deltaLabel=0>e?"("+m+")":m;l.finalLabel=n(g,l.final);l.initialLabel=n(g,l.initial)}m=d.hi||k.hoverinfo;g=[];if(m&&"none"!==m&&"skip"!==m){var r="all"===m,u=m.split("+");m=function(v){return r||-1!==u.indexOf(v)};d.isSum||(!m("final")||(c?m("x"):m("y"))||g.push(l.finalLabel),m("delta")&&(0>e?g.push(l.deltaLabel+" "+f):g.push(l.deltaLabel+" "+a)),m("initial")&&g.push("Initial: "+l.initialLabel))}g.length&&(l.extraText=g.join("\x3cbr\x3e"));
l.color=q(k,d);return[l]}}},{"../../components/color":615,"../../constants/delta.js":718,"../../plots/cartesian/axes":797,"../bar/hover":897}],1327:[function(b,y,F){y.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),
eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/select":902,"./attributes":1320,"./calc":1321,"./cross_trace_calc":1323,"./defaults":1324,"./event_data":1325,"./hover":1326,"./layout_attributes":1328,"./layout_defaults":1329,"./plot":1330,"./style":1331}],1328:[function(b,y,F){y.exports=
{waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1329:[function(b,y,F){var q=b("../../lib"),n=b("./layout_attributes");y.exports=function(p,h,a){for(var f=!1,d=0;d<a.length;d++){var l=a[d];if(l.visible&&"waterfall"===l.type){f=!0;break}}f&&(q.coerce(p,h,n,"waterfallmode",void 0),q.coerce(p,h,n,"waterfallgap",.2),q.coerce(p,
h,n,"waterfallgroupgap",void 0))}},{"../../lib":749,"./layout_attributes":1328}],1330:[function(b,y,F){function q(l,k,c,e){var g=k.xaxis,m=k.yaxis;p.makeTraceGroups(e,c,"trace bars").each(function(r){var u=n.select(this);r=r[0].trace;u=p.ensureSingle(u,"g","lines");if(r.connector&&r.connector.visible){var v="h"===r.orientation,w=r.connector.mode;u=u.selectAll("g.line").data(p.identity);u.enter().append("g").classed("line",!0);u.exit().remove();var D=u.size();u.each(function(C,x){if(x===D-1||C.cNext){var A=
[];var B=[];var t=v?g:m,G=v?m:g;A[0]=t.c2p(C.s0,!0);B[0]=G.c2p(C.p0,!0);A[1]=t.c2p(C.s1,!0);B[1]=G.c2p(C.p1,!0);A[2]=t.c2p(C.nextS0,!0);B[2]=G.c2p(C.nextP0,!0);B=v?[A,B]:[B,A];A=B[0];B=B[1];t="";A[0]!==a&&B[0]!==a&&A[1]!==a&&B[1]!==a&&("spanning"===w&&!C.isSum&&0<x&&(t=v?t+("M"+A[0]+","+B[1]+"V"+B[0]):t+("M"+A[1]+","+B[0]+"H"+A[0])),"between"!==w&&(C.isSum||x<D-1)&&(t=v?t+("M"+A[1]+","+B[0]+"V"+B[1]):t+("M"+A[0]+","+B[1]+"H"+A[1])),A[2]!==a&&B[2]!==a&&(t=v?t+("M"+A[1]+","+B[1]+"V"+B[2]):t+("M"+A[1]+
","+B[1]+"H"+A[2])));""===t&&(t="M0,0Z");p.ensureSingle(n.select(this),"path").attr("d",t).call(h.setClipUrl,k.layerClipId,l)}})}else u.remove()})}var n=b("d3"),p=b("../../lib"),h=b("../../components/drawing"),a=b("../../constants/numerical").BADNUM,f=b("../bar/plot"),d=b("../bar/uniform_text").clearMinTextSize;y.exports=function(l,k,c,e){var g=l._fullLayout;d("waterfall",g);f.plot(l,k,c,e,{mode:g.waterfallmode,norm:g.waterfallmode,gap:g.waterfallgap,groupgap:g.waterfallgroupgap});q(l,k,c,e)}},{"../../components/drawing":637,
"../../constants/numerical":724,"../../lib":749,"../bar/plot":901,"../bar/uniform_text":906,d3:169}],1331:[function(b,y,F){var q=b("d3"),n=b("../../components/drawing"),p=b("../../components/color"),h=b("../../constants/interactions").DESELECTDIM;F=b("../bar/style");var a=b("../bar/uniform_text").resizeText,f=F.styleTextPoints;y.exports={style:function(d,l,k){l=k?k:q.select(d).selectAll("g.waterfalllayer").selectAll("g.trace");a(d,l,"waterfall");l.style("opacity",function(c){return c[0].trace.opacity});
l.each(function(c){var e=q.select(this),g=c[0].trace;e.selectAll(".point \x3e path").each(function(m){if(!m.isBlank){var r=g[m.dir].marker;q.select(this).call(p.fill,r.color).call(p.stroke,r.line.color).call(n.dashLine,r.line.dash,r.line.width).style("opacity",g.selectedpoints&&!m.selected?h:1)}});f(e,g,d);e.selectAll(".lines").each(function(){var m=g.connector.line;n.lineGroupStyle(q.select(this).selectAll("path"),m.width,m.color,m.dash)})})}}},{"../../components/color":615,"../../components/drawing":637,
"../../constants/interactions":723,"../bar/style":904,"../bar/uniform_text":906,d3:169}],1332:[function(b,y,F){function q(m,r,u,v){if(v.enabled){var w=v.target,D=d.nestedProperty(r,w),C=D.get();m=f.getDataConversions(m,r,w,C);m=n(v,m);for(var x=Array(u.length),A=0;A<u.length;A++)x[A]=m(C,u[A]);D.set(x);"count"===v.func&&d.pushUnique(r._arrayAttrs,w)}}function n(m,r){var u=r.d2c,v=r.c2d;switch(m.func){case "count":return p;case "first":return h;case "last":return a;case "sum":return function(w,D){for(var C=
0,x=0;x<D.length;x++){var A=u(w[D[x]]);A!==c&&(C+=A)}return v(C)};case "avg":return function(w,D){for(var C=0,x=0,A=0;A<D.length;A++){var B=u(w[D[A]]);B!==c&&(C+=B,x++)}return x?v(C/x):c};case "min":return function(w,D){for(var C=Infinity,x=0;x<D.length;x++){var A=u(w[D[x]]);A!==c&&(C=Math.min(C,A))}return Infinity===C?c:v(C)};case "max":return function(w,D){for(var C=-Infinity,x=0;x<D.length;x++){var A=u(w[D[x]]);A!==c&&(C=Math.max(C,A))}return-Infinity===C?c:v(C)};case "range":return function(w,
D){for(var C=Infinity,x=-Infinity,A=0;A<D.length;A++){var B=u(w[D[A]]);B!==c&&(C=Math.min(C,B),x=Math.max(x,B))}return-Infinity===x||Infinity===C?c:v(x-C)};case "change":return function(w,D){var C=u(w[D[0]]);w=u(w[D[D.length-1]]);return C===c||w===c?c:v(w-C)};case "median":return function(w,D){for(var C=[],x=0;x<D.length;x++){var A=u(w[D[x]]);A!==c&&C.push(A)}if(!C.length)return c;C.sort(d.sorterAsc);w=(C.length-1)/2;return v((C[Math.floor(w)]+C[Math.ceil(w)])/2)};case "mode":return function(w,D){for(var C=
{},x=0,A=c,B=0;B<D.length;B++){var t=u(w[D[B]]);if(t!==c){var G=C[t]=(C[t]||0)+1;G>x&&(x=G,A=t)}}return x?v(A):c};case "rms":return function(w,D){for(var C=0,x=0,A=0;A<D.length;A++){var B=u(w[D[A]]);B!==c&&(C+=B*B,x++)}return x?v(Math.sqrt(C/x)):c};case "stddev":return function(w,D){var C=0,x=0,A=1,B=c,t;for(t=0;t<D.length&&B===c;t++)B=u(w[D[t]]);if(B===c)return c;for(;t<D.length;t++){var G=u(w[D[t]]);G!==c&&(G-=B,C+=G,x+=G*G,A++)}return(w="sample"===m.funcmode?A-1:A)?Math.sqrt((x-C*C/A)/w):0}}}function p(m,
r){return r.length}function h(m,r){return m[r[0]]}function a(m,r){return m[r[r.length-1]]}var f=b("../plots/cartesian/axes"),d=b("../lib"),l=b("../plot_api/plot_schema"),k=b("./helpers").pointsAccessorFunction,c=b("../constants/numerical").BADNUM;F.moduleType="transform";F.name="aggregate";var e=F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",
editType:"calc"},func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},g=e.aggregations;F.supplyDefaults=function(m,r){function u(t,G){return d.coerce(x[w],A,g,t,G)}var v={},w;if(!d.coerce(m,v,e,"enabled",void 0))return v;r=l.findArrayAttributes(r);
var D={};for(w=0;w<r.length;w++)D[r[w]]=1;var C=d.coerce(m,v,e,"groups",void 0);if(!Array.isArray(C)){if(!D[C])return v.enabled=!1,v;D[C]=0}var x=m.aggregations||[];m=v.aggregations=Array(x.length);for(w=0;w<x.length;w++){var A={_index:w};C=u("target");var B=u("func");u("enabled")&&C&&(D[C]||"count"===B&&void 0===D[C])?("stddev"===B&&u("funcmode"),D[C]=0,m[w]=A):m[w]={enabled:!1,_index:w}}for(w=0;w<r.length;w++)D[r[w]]&&m.push({target:r[w],func:g.func.dflt,enabled:!0,_index:-1});return v};F.calcTransform=
function(m,r,u){if(u.enabled){var v=u.groups,w=d.getTargetArray(r,{target:v});if(w){var D,C={},x={},A=[],B=k(r.transforms,u),t=w.length;r._length&&(t=Math.min(t,r._length));for(D=0;D<t;D++){var G=w[D];var H=C[G];void 0===H?(C[G]=A.length,H=[D],A.push(H),x[C[G]]=B(D)):(A[H].push(D),x[C[G]]=(x[C[G]]||[]).concat(B(D)))}u._indexToPoints=x;u=u.aggregations;for(D=0;D<u.length;D++)q(m,r,A,u[D]);"string"===typeof v&&q(m,r,A,{target:v,func:"first",enabled:!0});r._length=A.length}}}},{"../constants/numerical":724,
"../lib":749,"../plot_api/plot_schema":786,"../plots/cartesian/axes":797,"./helpers":1335}],1333:[function(b,y,F){function q(k,c,e){var g=k.operation,m=k.value,r=Array.isArray(m),u=function(D){return c(D,0,k.valuecalendar)},v=function(D){return c(D,0,e)},w;-1!==f.indexOf(g)?w=r?u(m[0]):u(m):-1!==d.indexOf(g)?w=r?[u(m[0]),u(m[1])]:[u(m),u(m)]:-1!==l.indexOf(g)&&(w=r?m.map(u):[u(m)]);switch(g){case "\x3d":return function(D){return v(D)===w};case "!\x3d":return function(D){return v(D)!==w};case "\x3c":return function(D){return v(D)<
w};case "\x3c\x3d":return function(D){return v(D)<=w};case "\x3e":return function(D){return v(D)>w};case "\x3e\x3d":return function(D){return v(D)>=w};case "[]":return function(D){D=v(D);return D>=w[0]&&D<=w[1]};case "()":return function(D){D=v(D);return D>w[0]&&D<w[1]};case "[)":return function(D){D=v(D);return D>=w[0]&&D<w[1]};case "(]":return function(D){D=v(D);return D>w[0]&&D<=w[1]};case "][":return function(D){D=v(D);return D<=w[0]||D>=w[1]};case ")(":return function(D){D=v(D);return D<w[0]||
D>w[1]};case "](":return function(D){D=v(D);return D<=w[0]||D>w[1]};case ")[":return function(D){D=v(D);return D<w[0]||D>=w[1]};case "{}":return function(D){return-1!==w.indexOf(v(D))};case "}{":return function(D){return-1===w.indexOf(v(D))}}}var n=b("../lib"),p=b("../registry"),h=b("../plots/cartesian/axes"),a=b("./helpers").pointsAccessorFunction;b=b("../constants/filter_ops");var f=b.COMPARISON_OPS,d=b.INTERVAL_OPS,l=b.SET_OPS;F.moduleType="transform";F.name="filter";F.attributes={enabled:{valType:"boolean",
dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(f).concat(d).concat(l),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};F.supplyDefaults=function(k){function c(m,r){return n.coerce(k,e,F.attributes,m,r)}var e={};if(c("enabled")){var g=c("target");if(n.isArrayOrTypedArray(g)&&0===g.length)return e.enabled=
!1,e;c("preservegaps");c("operation");c("value");g=p.getComponentMethod("calendars","handleDefaults");g(k,e,"valuecalendar",null);g(k,e,"targetcalendar",null)}return e};F.calcTransform=function(k,c,e){function g(t,G){for(var H=0;H<w.length;H++){var I=n.nestedProperty(c,w[H]);t(I,G)}}if(e.enabled){var m=n.getTargetArray(c,e);if(m){var r=e.target,u=m.length;c._length&&(u=Math.min(u,c._length));var v=e.targetcalendar,w=c._arrayAttrs,D=e.preservegaps;if("string"===typeof r){var C=n.nestedProperty(c,r+
"calendar").get();C&&(v=C)}k=h.getDataToCoordFunc(k,c,r,m);v=q(e,k,v);var x={};k={};r=0;if(D){var A=function(t){x[t.astr]=n.extendDeep([],t.get());t.set(Array(u))};C=function(t,G){var H=x[t.astr][G];t.get()[G]=H}}else A=function(t){x[t.astr]=n.extendDeep([],t.get());t.set([])},C=function(t,G){G=x[t.astr][G];t.get().push(G)};g(A);A=a(c.transforms,e);for(var B=0;B<u;B++)v(m[B])?(g(C,B),k[r++]=A(B)):D&&r++;e._indexToPoints=k;c._length=r}}}},{"../constants/filter_ops":720,"../lib":749,"../plots/cartesian/axes":797,
"../registry":880,"./helpers":1335}],1334:[function(b,y,F){var q=b("../lib"),n=b("../plot_api/plot_schema"),p=b("../plots/plots"),h=b("./helpers").pointsAccessorFunction;F.moduleType="transform";F.name="groupby";F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},
editType:"calc"},editType:"calc"};F.supplyDefaults=function(a,f,d){f={};if(!q.coerce(a,f,F.attributes,"enabled",void 0))return f;q.coerce(a,f,F.attributes,"groups",void 0);q.coerce(a,f,F.attributes,"nameformat",1<d._dataLength?"%{group} (%{trace})":"%{group}");d=a.styles;var l=f.styles=[];if(d)for(a=0;a<d.length;a++){var k=l[a]={};q.coerce(d[a],l[a],F.attributes.styles,"target");var c=q.coerce(d[a],l[a],F.attributes.styles,"value");q.isPlainObject(c)?k.value=q.extendDeep({},c):c&&delete k.value}return f};
F.transform=function(a,f){var d,l=[];for(d=0;d<a.length;d++){var k=void 0,c;var e=a[d];var g=f.transform;var m=f.transformIndex;var r=e.transforms[m].groups,u=h(e.transforms,g);if(q.isArrayOrTypedArray(r)&&0!==r.length){var v=q.filterUnique(r),w=Array(v.length),D=r.length,C=n.findArrayAttributes(e),x=g.styles||[],A={};for(c=0;c<x.length;c++)A[x[c].target]=x[c].value;g.styles&&(k=q.keyedContainer(g,"styles","target","value.name"));x={};var B={};for(c=0;c<v.length;c++){var t=v[c];x[t]=c;B[t]=0;var G=
w[c]=q.extendDeepNoArrays({},e);G._group=t;G.transforms[m]._indexToPoints={};var H=null;k&&(H=k.get(t));G.name=H||""===H?H:q.templateString(g.nameformat,{trace:e.name,group:t});H=G.transforms;G.transforms=[];for(t=0;t<H.length;t++)G.transforms[t]=q.extendDeepNoArrays({},H[t]);for(t=0;t<C.length;t++)q.nestedProperty(G,C[t]).set([])}for(c=0;c<C.length;c++){g=C[c];t=0;for(k=[];t<v.length;t++)k[t]=q.nestedProperty(w[t],g).get();g=q.nestedProperty(e,g).get();for(t=0;t<D;t++)k[x[r[t]]].push(g[t])}for(t=
0;t<D;t++)G=w[x[r[t]]],G.transforms[m]._indexToPoints[B[r[t]]]=u(t),B[r[t]]++;for(c=0;c<v.length;c++)t=v[c],G=w[c],p.clearExpandedTraceDefaultColors(G),q.extendDeepNoArrays(G,A[t]||{});e=w}else e=[e];for(m=0;m<e.length;m++)l.push(e[m])}return l}},{"../lib":749,"../plot_api/plot_schema":786,"../plots/plots":860,"./helpers":1335}],1335:[function(b,y,F){F.pointsAccessorFunction=function(q,n){for(var p,h,a=0;a<q.length;a++){p=q[a];if(p===n)break;p._indexToPoints&&!1!==p.enabled&&(h=p._indexToPoints)}return h?
function(f){return h[f]}:function(f){return[f]}}},{}],1336:[function(b,y,F){function q(f,d){switch(f.order){case "ascending":return function(l,k){l=d(l.v);k=d(k.v);return l===a?1:k===a?-1:l-k};case "descending":return function(l,k){l=d(l.v);k=d(k.v);return l===a?1:k===a?-1:k-l}}}var n=b("../lib"),p=b("../plots/cartesian/axes"),h=b("./helpers").pointsAccessorFunction,a=b("../constants/numerical").BADNUM;F.moduleType="transform";F.name="sort";F.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},
target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};F.supplyDefaults=function(f){var d={};n.coerce(f,d,F.attributes,"enabled",void 0)&&(n.coerce(f,d,F.attributes,"target",void 0),n.coerce(f,d,F.attributes,"order",void 0));return d};F.calcTransform=function(f,d,l){if(l.enabled){var k=n.getTargetArray(d,l);if(k){var c=l.target,e=k.length;d._length&&(e=Math.min(e,
d._length));var g=d._arrayAttrs;c=p.getDataToCoordFunc(f,d,c,k);var m=e,r=Array(m);f=Array(m);var u;for(u=0;u<m;u++)r[u]={v:k[u],i:u};r.sort(q(l,c));for(u=0;u<m;u++)f[u]=r[u].i;k=h(d.transforms,l);c={};for(m=0;m<g.length;m++){u=n.nestedProperty(d,g[m]);var v=u.get(),w=Array(e);for(r=0;r<e;r++)w[r]=v[f[r]];u.set(w)}for(r=0;r<e;r++)c[r]=k(f[r]);l._indexToPoints=c;d._length=e}}}},{"../constants/numerical":724,"../lib":749,"../plots/cartesian/axes":797,"./helpers":1335}],1337:[function(b,y,F){F.version=
"1.55.2"},{}]},{},[26])(26)})};
shadow$provide[520]=function(fb,Z,qb,sa){function b(y){return y&&y.__esModule?y:{"default":y}}Object.defineProperty(sa,"__esModule",{value:!0});sa["default"]=void 0;fb=b(Z(518));Z=b(Z(519));Z=(0,fb["default"])(Z["default"]);sa["default"]=Z};
'use strict';var Mta,L3,P3,Kta,Nta,Pta,Qta;$APP.F3=function(a){return a instanceof $APP.I?a.ja:null};$APP.G3=function(a){return a instanceof $APP.Lq?a.obj:a instanceof $APP.Mq?a.J:$APP.ap.A(a,$APP.D([$APP.ls,$APP.F3]))};
$APP.M3=function(a){var b=$APP.N(a),c=$APP.H.o(b,$APP.H3,function(g){return JSON.stringify(g,null,1)});a=$APP.H.g(b,$APP.I3);var d=$APP.H.o(b,$APP.J3,"application/json");b=$APP.H.g(b,$APP.K3);var e=$APP.m(b)?b:new $APP.T(null,1,5,$APP.V,[L3],null),f=$APP.m(a)?a:"plotly_data.json";return new $APP.l(null,4,[$APP.tn,"toData",$APP.Ls,$APP.G3(Jta),$APP.ot,"Save data",Kta,function(g){g=g.data;g=c.j?c.j(g):c.call(null,g);return $APP.lq($APP.wi.A(e,f,$APP.D([d,g])))}],null)};
$APP.Lta=new $APP.I(null,"newline","newline",1790071323);$APP.J3=new $APP.I(null,"data-type","data-type",-326421468);Mta=new $APP.I(null,"displaylogo","displaylogo",1531477828);$APP.I3=new $APP.I(null,"filename","filename",-1428840783);L3=new $APP.I("transparency.components.plotly","send-data-to-client","transparency.components.plotly/send-data-to-client",1896277780);$APP.N3=new $APP.I(null,"modeBarButtonsToAdd","modeBarButtonsToAdd",792964880);
$APP.O3=new $APP.I(null,"displayModeBar","displayModeBar",-1187531817);P3=new $APP.I("transparency.components.plotly","download-file","transparency.components.plotly/download-file",-676073443);$APP.Q3=new $APP.I(null,"layout","layout",-2120940921);$APP.R3=new $APP.I(null,"lf","lf",1923784290);Kta=new $APP.I(null,"click","click",1912301393);$APP.H3=new $APP.I(null,"data-\x3estring","data-\x3estring",-1527786836);Nta=new $APP.I(null,"locale","locale",-2115712697);
$APP.Ota=new $APP.I(null,"quote?","quote?",-1114029317);Pta=new $APP.I(null,"cr+lf","cr+lf",486534798);$APP.S3=new $APP.I(null,"toImageButtonOptions","toImageButtonOptions",-347346271);$APP.U3=new $APP.I(null,"scale","scale",-230427353);$APP.V3=new $APP.I(null,"editable","editable",1930280326);Qta=new $APP.I(null,"responsive","responsive",-1606632318);$APP.K3=new $APP.I(null,"download-event","download-event",577445774);$APP.od("plotly");var Rta=$APP.pn(520);$APP.W3=new $APP.l(null,2,[$APP.R3,"\n",Pta,"\r\n"],null);$APP.Sta=[":newline must be one of [",$APP.Pm(",",$APP.vl($APP.W3)),"]"].join("");var Jta;$APP.X3=Rta.default;$APP.nq(P3,function(a){var b=$APP.G(a,0,null);a=$APP.G(a,1,null);var c=document.createElement("a");c.href=b;c.download=a;document.body.appendChild(c);c.click();document.body.removeChild(c);a=window.URL.revokeObjectURL;return a.j?a.j(b):a.call(null,b)});
$APP.Bq(L3,function(a,b){a=$APP.N(a);a=$APP.H.g(a,$APP.Lt);$APP.G(b,0,null);var c=$APP.G(b,1,null),d=$APP.G(b,2,null);b=$APP.G(b,3,null);b=new Blob(new $APP.T(null,1,5,$APP.V,[b],null),$APP.ap(new $APP.l(null,1,[$APP.X,$APP.m(d)?d:"text/plain"],null)));d=window.URL.createObjectURL;b=d.j?d.j(b):d.call(null,b);return new $APP.l(null,2,[$APP.Lt,a,P3,new $APP.T(null,2,5,$APP.V,[b,c],null)],null)});
Jta=new $APP.l(null,4,["width",857.1,"height",1E3,"path","m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z","transform","matrix(1 0 0 -1 0 850)"],
null);$APP.Y3=new $APP.l(null,7,[$APP.S3,new $APP.l(null,4,[$APP.us,"png",$APP.Dt,560,$APP.ss,960,$APP.U3,2],null),$APP.N3,new $APP.T(null,1,5,$APP.V,[$APP.M3($APP.O)],null),$APP.O3,"hover",$APP.V3,!1,Mta,!1,Qta,!0,Nta,"en"],null);$APP.nd.setLoaded(void 0);
}).call(this);