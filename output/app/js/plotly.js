(function(){
shadow$provide[801]=function(W,z,X,R){function b(){if("function"!==typeof WeakMap)return null;var q=new WeakMap;b=function(){return q};return q}function F(q){"@babel/helpers - typeof";F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"===typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};return F(q)}function C(q,r){for(var u=0;u<r.length;u++){var v=r[u];v.enumerable=v.enumerable||!1;v.configurable=
!0;"value"in v&&(v.writable=!0);Object.defineProperty(q,v.key,v)}}function m(q,r,u){r&&C(q.prototype,r);u&&C(q,u);return q}function h(q,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(r&&r.prototype,{constructor:{value:q,writable:!0,configurable:!0}});r&&l(q,r)}function l(q,r){l=Object.setPrototypeOf||function(u,v){u.__proto__=v;return u};return l(q,r)}function e(q){var r=g();return function(){var u=k(q);if(r){var v=
k(this).constructor;u=Reflect.construct(u,arguments,v)}else u=u.apply(this,arguments);u=!u||"object"!==F(u)&&"function"!==typeof u?a(this):u;return u}}function a(q){if(void 0===q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function g(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(q){return!1}}
function k(q){k=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)};return k(q)}Object.defineProperty(R,"__esModule",{value:!0});R["default"]=function(q){var r=function(u){function v(y){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");y=w.call(this,y);y.p=Promise.resolve();y.resizeHandler=null;y.handlers={};y.syncWindowResize=y.syncWindowResize.bind(a(y));y.syncEventHandlers=y.syncEventHandlers.bind(a(y));y.attachUpdateEvents=
y.attachUpdateEvents.bind(a(y));y.getRef=y.getRef.bind(a(y));y.handleUpdate=y.handleUpdate.bind(a(y));y.figureCallback=y.figureCallback.bind(a(y));y.updatePlotly=y.updatePlotly.bind(a(y));return y}h(v,u);var w=e(v);m(v,[{key:"updatePlotly",value:function(y,D,x){var E=this;this.p=this.p.then(function(){if(!E.unmounting){if(!E.el)throw Error("Missing element reference");return q.react(E.el,{data:E.props.data,layout:E.props.layout,config:E.props.config,frames:E.props.frames})}}).then(function(){E.unmounting||
(E.syncWindowResize(y),E.syncEventHandlers(),E.figureCallback(D),x&&E.attachUpdateEvents())})["catch"](function(B){if(E.props.onError)E.props.onError(B)})}},{key:"componentDidMount",value:function(){this.unmounting=!1;this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(y){this.unmounting=!1;var D=y.frames&&y.frames.length?y.frames.length:0,x=this.props.frames&&this.props.frames.length?this.props.frames.length:0,E=void 0!==y.revision,B=y.revision!==this.props.revision;
(y.layout!==this.props.layout||y.data!==this.props.data||y.config!==this.props.config||x!==D||E&&(!E||B))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0;this.figureCallback(this.props.onPurge);this.resizeHandler&&d&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);this.removeUpdateEvents();q.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var y=this;this.el&&this.el.removeListener&&f.forEach(function(D){y.el.on(D,
y.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var y=this;this.el&&this.el.removeListener&&f.forEach(function(D){y.el.removeListener(D,y.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(y){if("function"===typeof y){var D=this.el;y({data:D.data,layout:D.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(y){var D=this;d&&(this.props.useResizeHandler&&
!this.resizeHandler?(this.resizeHandler=function(){return q.Plots.resize(D.el)},window.addEventListener("resize",this.resizeHandler),y&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(y){this.el=y;this.props.debug&&d&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var y=this;c.forEach(function(D){var x=y.props["on"+D],E=y.handlers[D],B=!!E;x&&!B?
y.addEventHandler(D,x):!x&&B?y.removeEventHandler(D):x&&B&&x!==E&&(y.removeEventHandler(D),y.addEventHandler(D,x))})}},{key:"addEventHandler",value:function(y,D){this.handlers[y]=D;this.el.on(this.getPlotlyEventName(y),this.handlers[y])}},{key:"removeEventHandler",value:function(y){this.el.removeListener(this.getPlotlyEventName(y),this.handlers[y]);delete this.handlers[y]}},{key:"getPlotlyEventName",value:function(y){return"plotly_"+y.toLowerCase()}},{key:"render",value:function(){return p["default"].createElement("div",
{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]);return v}(p.Component);r.propTypes={data:n["default"].arrayOf(n["default"].object),config:n["default"].object,layout:n["default"].object,frames:n["default"].arrayOf(n["default"].object),revision:n["default"].number,onInitialized:n["default"].func,onPurge:n["default"].func,onError:n["default"].func,onUpdate:n["default"].func,debug:n["default"].bool,style:n["default"].object,className:n["default"].string,
useResizeHandler:n["default"].bool,divId:n["default"].string};c.forEach(function(u){r.propTypes["on"+u]=n["default"].func});r.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}};return r};var p=function(q){if(q&&q.__esModule)return q;if(null===q||"object"!==F(q)&&"function"!==typeof q)return{"default":q};var r=b();if(r&&r.has(q))return r.get(q);var u={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor,w;for(w in q)if(Object.prototype.hasOwnProperty.call(q,
w)){var y=v?Object.getOwnPropertyDescriptor(q,w):null;y&&(y.get||y.set)?Object.defineProperty(u,w,y):u[w]=q[w]}u["default"]=q;r&&r.set(q,u);return u}(z(5)),n=function(q){return q&&q.__esModule?q:{"default":q}}(z(20)),c="AfterExport AfterPlot Animated AnimatingFrame AnimationInterrupted AutoSize BeforeExport ButtonClicked Click ClickAnnotation Deselect DoubleClick Framework Hover LegendClick LegendDoubleClick Relayout Relayouting Restyle Redraw Selected Selecting SliderChange SliderEnd SliderStart SunburstClick Transitioning TransitionInterrupted Unhover".split(" "),
f="plotly_restyle plotly_redraw plotly_relayout plotly_relayouting plotly_doubleclick plotly_animated plotly_sunburstclick".split(" "),d="undefined"!==typeof window};
shadow$provide[802]=function(W,z,X,R){(function(b){"object"===typeof R&&"undefined"!==typeof X?X.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof W?W:"undefined"!==typeof self?self:this).Plotly=b()})(function(){return function(){function b(F,C,m){function h(a,g){if(!C[a]){if(!F[a]){var k="function"==typeof z&&z;if(!g&&k)return k(a,!0);if(l)return l(a,!0);g=Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",g;
}g=C[a]={exports:{}};F[a][0].call(g.exports,function(p){return h(F[a][1][p]||p)},g,g.exports,b,F,C,m)}return C[a].exports}for(var l="function"==typeof z&&z,e=0;e<m.length;e++)h(m[e]);return h}return b}()({1:[function(b,F,C){b=b("../src/lib");F={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;",
"X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;",
"X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover\x3e:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var m in F)C=m.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),b.addStyleRule(C,F[m])},{"../src/lib":749}],2:[function(b,F,C){F.exports=b("../src/transforms/aggregate")},{"../src/transforms/aggregate":1332}],3:[function(b,F,C){F.exports=
b("../src/traces/bar")},{"../src/traces/bar":898}],4:[function(b,F,C){F.exports=b("../src/traces/barpolar")},{"../src/traces/barpolar":911}],5:[function(b,F,C){F.exports=b("../src/traces/box")},{"../src/traces/box":921}],6:[function(b,F,C){F.exports=b("../src/components/calendars")},{"../src/components/calendars":613}],7:[function(b,F,C){F.exports=b("../src/traces/candlestick")},{"../src/traces/candlestick":930}],8:[function(b,F,C){F.exports=b("../src/traces/carpet")},{"../src/traces/carpet":949}],
9:[function(b,F,C){F.exports=b("../src/traces/choropleth")},{"../src/traces/choropleth":963}],10:[function(b,F,C){F.exports=b("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":970}],11:[function(b,F,C){F.exports=b("../src/traces/cone")},{"../src/traces/cone":976}],12:[function(b,F,C){F.exports=b("../src/traces/contour")},{"../src/traces/contour":991}],13:[function(b,F,C){F.exports=b("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1002}],14:[function(b,F,C){F.exports=
b("../src/core")},{"../src/core":726}],15:[function(b,F,C){F.exports=b("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1010}],16:[function(b,F,C){F.exports=b("../src/transforms/filter")},{"../src/transforms/filter":1333}],17:[function(b,F,C){F.exports=b("../src/traces/funnel")},{"../src/traces/funnel":1020}],18:[function(b,F,C){F.exports=b("../src/traces/funnelarea")},{"../src/traces/funnelarea":1029}],19:[function(b,F,C){F.exports=b("../src/transforms/groupby")},{"../src/transforms/groupby":1334}],
20:[function(b,F,C){F.exports=b("../src/traces/heatmap")},{"../src/traces/heatmap":1042}],21:[function(b,F,C){F.exports=b("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1052}],22:[function(b,F,C){F.exports=b("../src/traces/histogram")},{"../src/traces/histogram":1064}],23:[function(b,F,C){F.exports=b("../src/traces/histogram2d")},{"../src/traces/histogram2d":1070}],24:[function(b,F,C){F.exports=b("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1074}],25:[function(b,
F,C){F.exports=b("../src/traces/image")},{"../src/traces/image":1081}],26:[function(b,F,C){C=b("./core");C.register([b("./bar"),b("./box"),b("./heatmap"),b("./histogram"),b("./histogram2d"),b("./histogram2dcontour"),b("./contour"),b("./scatterternary"),b("./violin"),b("./funnel"),b("./waterfall"),b("./image"),b("./pie"),b("./sunburst"),b("./treemap"),b("./funnelarea"),b("./scatter3d"),b("./surface"),b("./isosurface"),b("./volume"),b("./mesh3d"),b("./cone"),b("./streamtube"),b("./scattergeo"),b("./choropleth"),
b("./scattergl"),b("./splom"),b("./pointcloud"),b("./heatmapgl"),b("./parcoords"),b("./parcats"),b("./scattermapbox"),b("./choroplethmapbox"),b("./densitymapbox"),b("./sankey"),b("./indicator"),b("./table"),b("./carpet"),b("./scattercarpet"),b("./contourcarpet"),b("./ohlc"),b("./candlestick"),b("./scatterpolar"),b("./scatterpolargl"),b("./barpolar")]);C.register([b("./aggregate"),b("./filter"),b("./groupby"),b("./sort")]);C.register([b("./calendars")]);F.exports=C},{"./aggregate":2,"./bar":3,"./barpolar":4,
"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./image":25,"./indicator":27,"./isosurface":28,"./mesh3d":29,"./ohlc":30,"./parcats":31,"./parcoords":32,"./pie":33,"./pointcloud":34,"./sankey":35,"./scatter3d":36,"./scattercarpet":37,
"./scattergeo":38,"./scattergl":39,"./scattermapbox":40,"./scatterpolar":41,"./scatterpolargl":42,"./scatterternary":43,"./sort":44,"./splom":45,"./streamtube":46,"./sunburst":47,"./surface":48,"./table":49,"./treemap":50,"./violin":51,"./volume":52,"./waterfall":53}],27:[function(b,F,C){F.exports=b("../src/traces/indicator")},{"../src/traces/indicator":1089}],28:[function(b,F,C){F.exports=b("../src/traces/isosurface")},{"../src/traces/isosurface":1095}],29:[function(b,F,C){F.exports=b("../src/traces/mesh3d")},
{"../src/traces/mesh3d":1100}],30:[function(b,F,C){F.exports=b("../src/traces/ohlc")},{"../src/traces/ohlc":1105}],31:[function(b,F,C){F.exports=b("../src/traces/parcats")},{"../src/traces/parcats":1114}],32:[function(b,F,C){F.exports=b("../src/traces/parcoords")},{"../src/traces/parcoords":1124}],33:[function(b,F,C){F.exports=b("../src/traces/pie")},{"../src/traces/pie":1135}],34:[function(b,F,C){F.exports=b("../src/traces/pointcloud")},{"../src/traces/pointcloud":1144}],35:[function(b,F,C){F.exports=
b("../src/traces/sankey")},{"../src/traces/sankey":1150}],36:[function(b,F,C){F.exports=b("../src/traces/scatter3d")},{"../src/traces/scatter3d":1187}],37:[function(b,F,C){F.exports=b("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1194}],38:[function(b,F,C){F.exports=b("../src/traces/scattergeo")},{"../src/traces/scattergeo":1202}],39:[function(b,F,C){F.exports=b("../src/traces/scattergl")},{"../src/traces/scattergl":1215}],40:[function(b,F,C){F.exports=b("../src/traces/scattermapbox")},
{"../src/traces/scattermapbox":1225}],41:[function(b,F,C){F.exports=b("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1233}],42:[function(b,F,C){F.exports=b("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1240}],43:[function(b,F,C){F.exports=b("../src/traces/scatterternary")},{"../src/traces/scatterternary":1248}],44:[function(b,F,C){F.exports=b("../src/transforms/sort")},{"../src/transforms/sort":1336}],45:[function(b,F,C){F.exports=b("../src/traces/splom")},{"../src/traces/splom":1257}],
46:[function(b,F,C){F.exports=b("../src/traces/streamtube")},{"../src/traces/streamtube":1265}],47:[function(b,F,C){F.exports=b("../src/traces/sunburst")},{"../src/traces/sunburst":1273}],48:[function(b,F,C){F.exports=b("../src/traces/surface")},{"../src/traces/surface":1282}],49:[function(b,F,C){F.exports=b("../src/traces/table")},{"../src/traces/table":1290}],50:[function(b,F,C){F.exports=b("../src/traces/treemap")},{"../src/traces/treemap":1299}],51:[function(b,F,C){F.exports=b("../src/traces/violin")},
{"../src/traces/violin":1311}],52:[function(b,F,C){F.exports=b("../src/traces/volume")},{"../src/traces/volume":1319}],53:[function(b,F,C){F.exports=b("../src/traces/waterfall")},{"../src/traces/waterfall":1327}],54:[function(b,F,C){function m(g,k){this._controllerNames=Object.keys(g);this._controllerList=this._controllerNames.map(function(p){return g[p]});this._mode=k;this._active=g[k];this._active||(this._mode="turntable",this._active=g.turntable);this.modes=this._controllerNames;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}F.exports=function(g){g=g||{};var k=g.eye||[0,0,1],p=g.center||[0,0,0],n=g.up||[0,1,0],c=g.distanceLimits||[0,Infinity];g=g.mode||"turntable";var f=h(),d=l(),q=e();f.setDistanceLimits(c[0],c[1]);f.lookAt(0,k,p,n);d.setDistanceLimits(c[0],c[1]);d.lookAt(0,k,p,n);q.setDistanceLimits(c[0],c[1]);q.lookAt(0,
k,p,n);return new m({turntable:f,orbit:d,matrix:q},g)};var h=b("turntable-camera-controller"),l=b("orbit-camera-controller"),e=b("matrix-camera-controller"),a=m.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(g){for(var k=g[0],p=[],n=0;n<g[1];++n)p.push("a"+n);g="var cc\x3dthis._controllerList;for(var i\x3d0;i\x3ccc.length;++i){cc[i]."+g[0]+"("+p.join()+")}";a[k]=Function.apply(null,p.concat(g))});
a.recalcMatrix=function(g){this._active.recalcMatrix(g)};a.getDistance=function(g){return this._active.getDistance(g)};a.getDistanceLimits=function(g){return this._active.getDistanceLimits(g)};a.lastT=function(){return this._active.lastT()};a.setMode=function(g){if(g!==this._mode){var k=this._controllerNames.indexOf(g);if(!(0>k)){var p=this._active;k=this._controllerList[k];var n=Math.max(p.lastT(),k.lastT());p.recalcMatrix(n);k.setMatrix(n,p.computedMatrix);this._active=k;this._mode=g;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};a.getMode=function(){return this._mode}},{"matrix-camera-controller":454,"orbit-camera-controller":475,"turntable-camera-controller":553}],55:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C,b("d3-array"),b("d3-collection"),b("d3-shape"),b("elementary-circuits-directed-graph")):
h(m.d3=m.d3||{},m.d3,m.d3,m.d3,null)})(this,function(m,h,l,e,a){function g(na){return na.target.depth}function k(na,pa){return na.sourceLinks.length?na.depth:pa-1}function p(na){return function(){return na}}function n(na,pa){return f(na.source,pa.source)||na.index-pa.index}function c(na,pa){return f(na.target,pa.target)||na.index-pa.index}function f(na,pa){return na.partOfCycle===pa.partOfCycle?na.y0-pa.y0:"top"===na.circularLinkType||"bottom"===pa.circularLinkType?-1:1}function d(na){return na.value}
function q(na){return(na.y0+na.y1)/2}function r(na){return q(na.source)}function u(na){return q(na.target)}function v(na){return na.index}function w(na){return na.nodes}function y(na){return na.links}function D(na,pa){na=na.get(pa);if(!na)throw Error("missing: "+pa);return na}function x(na,pa,ra){var ta=0;if(null===ra){var oa=[];for(pa=0;pa<na.links.length;pa++){var ua=na.links[pa],ka=ua.source.index;ua=ua.target.index;oa[ka]||(oa[ka]=[]);oa[ua]||(oa[ua]=[]);-1===oa[ka].indexOf(ua)&&oa[ka].push(ua)}oa=
a(oa);oa.sort(function(ya,qa){return ya.length-qa.length});var sa={};for(pa=0;pa<oa.length;pa++)ka=oa[pa].slice(-2),sa[ka[0]]||(sa[ka[0]]={}),sa[ka[0]][ka[1]]=!0;na.links.forEach(function(ya){var qa=ya.target.index,xa=ya.source.index;qa===xa||sa[xa]&&sa[xa][qa]?(ya.circular=!0,ya.circularLinkID=ta,ta+=1):ya.circular=!1})}else na.links.forEach(function(ya){ya.source[ra]<ya.target[ra]?ya.circular=!1:(ya.circular=!0,ya.circularLinkID=ta,ta+=1)})}function E(na,pa){var ra=0,ta=0;na.links.forEach(function(oa){oa.circular&&
(oa.circularLinkType=oa.source.circularLinkType||oa.target.circularLinkType?oa.source.circularLinkType?oa.source.circularLinkType:oa.target.circularLinkType:ra<ta?"top":"bottom","top"==oa.circularLinkType?ra+=1:ta+=1,na.nodes.forEach(function(ua){if(pa(ua)==pa(oa.source)||pa(ua)==pa(oa.target))ua.circularLinkType=oa.circularLinkType}))});na.links.forEach(function(oa){oa.circular&&(oa.source.circularLinkType==oa.target.circularLinkType&&(oa.circularLinkType=oa.source.circularLinkType),ia(oa,pa)&&(oa.circularLinkType=
oa.source.circularLinkType))})}function B(na){return Math.atan(Math.abs(na.target.x0-na.source.x1)/Math.abs(na.y1-na.y0))}function t(na,pa){var ra=0;na.sourceLinks.forEach(function(oa){ra=oa.circular&&!ia(oa,pa)?ra+1:ra});var ta=0;na.targetLinks.forEach(function(oa){ta=oa.circular&&!ia(oa,pa)?ta+1:ta});return ra+ta}function G(na){var pa=0;na.source.sourceLinks.forEach(function(ta){pa=ta.circular?pa+1:pa});var ra=0;na.target.targetLinks.forEach(function(ta){ra=ta.circular?ra+1:ra});return 1<pa||1<
ra?!1:!0}function I(na,pa,ra){na.sort(M);na.forEach(function(ta,oa){var ua=0;if(!ia(ta,ra)||!G(ta)){var ka=0;for(ka;ka<oa;ka++){var sa=na[oa];var ya=na[ka];sa=sa.source.column<ya.target.column?!1:sa.target.column>ya.source.column?!1:!0;sa&&(sa=na[ka].circularPathData.verticalBuffer+na[ka].width/2+pa,ua=sa>ua?sa:ua)}}ta.circularPathData.verticalBuffer=ua+ta.width/2});return na}function L(na,pa,ra,ta){var oa=h.min(na.links,function(ka){return ka.source.y0});na.links.forEach(function(ka){ka.circular&&
(ka.circularPathData={})});var ua=na.links.filter(function(ka){return"top"==ka.circularLinkType});I(ua,pa,ta);ua=na.links.filter(function(ka){return"bottom"==ka.circularLinkType});I(ua,pa,ta);na.links.forEach(function(ka){if(ka.circular){ka.circularPathData.arcRadius=ka.width+10;ka.circularPathData.leftNodeBuffer=5;ka.circularPathData.rightNodeBuffer=5;ka.circularPathData.sourceWidth=ka.source.x1-ka.source.x0;ka.circularPathData.sourceX=ka.source.x0+ka.circularPathData.sourceWidth;ka.circularPathData.targetX=
ka.target.x0;ka.circularPathData.sourceY=ka.y0;ka.circularPathData.targetY=ka.y1;if(ia(ka,ta)&&G(ka))ka.circularPathData.leftSmallArcRadius=10+ka.width/2,ka.circularPathData.leftLargeArcRadius=10+ka.width/2,ka.circularPathData.rightSmallArcRadius=10+ka.width/2,ka.circularPathData.rightLargeArcRadius=10+ka.width/2,"bottom"==ka.circularLinkType?(ka.circularPathData.verticalFullExtent=ka.source.y1+25+ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=ka.circularPathData.verticalFullExtent-
ka.circularPathData.leftLargeArcRadius,ka.circularPathData.verticalRightInnerExtent=ka.circularPathData.verticalFullExtent-ka.circularPathData.rightLargeArcRadius):(ka.circularPathData.verticalFullExtent=ka.source.y0-25-ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=ka.circularPathData.verticalFullExtent+ka.circularPathData.leftLargeArcRadius,ka.circularPathData.verticalRightInnerExtent=ka.circularPathData.verticalFullExtent+ka.circularPathData.rightLargeArcRadius);
else{var sa=ka.source.column,ya=ka.circularLinkType,qa=na.links.filter(function(Ca){return Ca.source.column==sa&&Ca.circularLinkType==ya});"bottom"==ka.circularLinkType?qa.sort(H):qa.sort(N);var xa=0;qa.forEach(function(Ca,Ja){Ca.circularLinkID==ka.circularLinkID&&(ka.circularPathData.leftSmallArcRadius=10+ka.width/2+xa,ka.circularPathData.leftLargeArcRadius=10+ka.width/2+Ja*pa+xa);xa+=Ca.width});sa=ka.target.column;qa=na.links.filter(function(Ca){return Ca.target.column==sa&&Ca.circularLinkType==
ya});"bottom"==ka.circularLinkType?qa.sort(O):qa.sort(J);xa=0;qa.forEach(function(Ca,Ja){Ca.circularLinkID==ka.circularLinkID&&(ka.circularPathData.rightSmallArcRadius=10+ka.width/2+xa,ka.circularPathData.rightLargeArcRadius=10+ka.width/2+Ja*pa+xa);xa+=Ca.width});"bottom"==ka.circularLinkType?(ka.circularPathData.verticalFullExtent=Math.max(ra,ka.source.y1,ka.target.y1)+25+ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=ka.circularPathData.verticalFullExtent-ka.circularPathData.leftLargeArcRadius,
ka.circularPathData.verticalRightInnerExtent=ka.circularPathData.verticalFullExtent-ka.circularPathData.rightLargeArcRadius):(ka.circularPathData.verticalFullExtent=oa-25-ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=ka.circularPathData.verticalFullExtent+ka.circularPathData.leftLargeArcRadius,ka.circularPathData.verticalRightInnerExtent=ka.circularPathData.verticalFullExtent+ka.circularPathData.rightLargeArcRadius)}ka.circularPathData.leftInnerExtent=ka.circularPathData.sourceX+
ka.circularPathData.leftNodeBuffer;ka.circularPathData.rightInnerExtent=ka.circularPathData.targetX-ka.circularPathData.rightNodeBuffer;ka.circularPathData.leftFullExtent=ka.circularPathData.sourceX+ka.circularPathData.leftLargeArcRadius+ka.circularPathData.leftNodeBuffer;ka.circularPathData.rightFullExtent=ka.circularPathData.targetX-ka.circularPathData.rightLargeArcRadius-ka.circularPathData.rightNodeBuffer}ka.circular?ka.path="top"==ka.circularLinkType?"M"+ka.circularPathData.sourceX+" "+ka.circularPathData.sourceY+
" L"+ka.circularPathData.leftInnerExtent+" "+ka.circularPathData.sourceY+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftSmallArcRadius+" 0 0 0 "+ka.circularPathData.leftFullExtent+" "+(ka.circularPathData.sourceY-ka.circularPathData.leftSmallArcRadius)+" L"+ka.circularPathData.leftFullExtent+" "+ka.circularPathData.verticalLeftInnerExtent+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftLargeArcRadius+" 0 0 0 "+ka.circularPathData.leftInnerExtent+" "+
ka.circularPathData.verticalFullExtent+" L"+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.verticalFullExtent+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightLargeArcRadius+" 0 0 0 "+ka.circularPathData.rightFullExtent+" "+ka.circularPathData.verticalRightInnerExtent+" L"+ka.circularPathData.rightFullExtent+" "+(ka.circularPathData.targetY-ka.circularPathData.rightSmallArcRadius)+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightSmallArcRadius+
" 0 0 0 "+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.targetY+" L"+ka.circularPathData.targetX+" "+ka.circularPathData.targetY:"M"+ka.circularPathData.sourceX+" "+ka.circularPathData.sourceY+" L"+ka.circularPathData.leftInnerExtent+" "+ka.circularPathData.sourceY+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftSmallArcRadius+" 0 0 1 "+ka.circularPathData.leftFullExtent+" "+(ka.circularPathData.sourceY+ka.circularPathData.leftSmallArcRadius)+" L"+ka.circularPathData.leftFullExtent+
" "+ka.circularPathData.verticalLeftInnerExtent+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftLargeArcRadius+" 0 0 1 "+ka.circularPathData.leftInnerExtent+" "+ka.circularPathData.verticalFullExtent+" L"+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.verticalFullExtent+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightLargeArcRadius+" 0 0 1 "+ka.circularPathData.rightFullExtent+" "+ka.circularPathData.verticalRightInnerExtent+" L"+ka.circularPathData.rightFullExtent+
" "+(ka.circularPathData.targetY+ka.circularPathData.rightSmallArcRadius)+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightSmallArcRadius+" 0 0 1 "+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.targetY+" L"+ka.circularPathData.targetX+" "+ka.circularPathData.targetY:(qa=e.linkHorizontal().source(function(Ca){return[Ca.source.x0+(Ca.source.x1-Ca.source.x0),Ca.y0]}).target(function(Ca){return[Ca.target.x0,Ca.y1]}),ka.path=qa(ka))})}function M(na,pa){return Q(na)==
Q(pa)?"bottom"==na.circularLinkType?H(na,pa):N(na,pa):Q(pa)-Q(na)}function N(na,pa){return na.y0-pa.y0}function H(na,pa){return pa.y0-na.y0}function J(na,pa){return na.y1-pa.y1}function O(na,pa){return pa.y1-na.y1}function Q(na){return na.target.column-na.source.column}function U(na,pa){var ra=B(na);pa=(pa.target.x0-pa.source.x1)/Math.tan(ra);return"up"==ca(na)?na.y1+pa:na.y1-pa}function P(na,pa){var ra=B(na);pa=(pa.target.x0-pa.source.x1)/Math.tan(ra);return"up"==ca(na)?na.y1-pa:na.y1+pa}function V(na,
pa,ra,ta){na.links.forEach(function(oa){if(!oa.circular&&1<oa.target.column-oa.source.column){var ua=oa.source.column+1,ka=oa.target.column-1,sa=1,ya=ka-ua+1;for(sa=1;ua<=ka;ua++,sa++)na.nodes.forEach(function(qa){if(qa.column==ua){var xa=sa/(ya+1),Ca=Math.pow(1-xa,3)*oa.y0+3*xa*Math.pow(1-xa,2)*oa.y0+3*Math.pow(xa,2)*(1-xa)*oa.y1+Math.pow(xa,3)*oa.y1;xa=Ca-oa.width/2;Ca+=oa.width/2;if(xa>qa.y0&&xa<qa.y1){var Ja=qa.y1-xa+10;Ja="bottom"==qa.circularLinkType?Ja:-Ja;qa=Y(qa,Ja,pa,ra);na.nodes.forEach(function(eb){ta(eb)!=
ta(qa)&&eb.column==qa.column&&(qa.y0>eb.y0&&qa.y0<eb.y1||qa.y1>eb.y0&&qa.y1<eb.y1||qa.y0<eb.y0&&qa.y1>eb.y1)&&Y(eb,Ja,pa,ra)})}else Ca>qa.y0&&Ca<qa.y1?(Ja=Ca-qa.y0+10,qa=Y(qa,Ja,pa,ra),na.nodes.forEach(function(eb){ta(eb)!=ta(qa)&&eb.column==qa.column&&eb.y0<qa.y1&&eb.y1>qa.y1&&Y(eb,Ja,pa,ra)})):xa<qa.y0&&Ca>qa.y1&&(Ja=Ca-qa.y0+10,qa=Y(qa,Ja,pa,ra),na.nodes.forEach(function(eb){ta(eb)!=ta(qa)&&eb.column==qa.column&&eb.y0<qa.y1&&eb.y1>qa.y1&&Y(eb,Ja,pa,ra)}))}})}})}function Y(na,pa,ra,ta){na.y0+pa>=
ra&&na.y1+pa<=ta&&(na.y0+=pa,na.y1+=pa,na.targetLinks.forEach(function(oa){oa.y1+=pa}),na.sourceLinks.forEach(function(oa){oa.y0+=pa}));return na}function ba(na,pa,ra,ta){na.nodes.forEach(function(oa){ta&&oa.y+(oa.y1-oa.y0)>pa&&(oa.y-=oa.y+(oa.y1-oa.y0)-pa);var ua=na.links.filter(function(ya){return ra(ya.source)==ra(oa)}),ka=ua.length;1<ka&&ua.sort(function(ya,qa){if(!ya.circular&&!qa.circular)if(ya.target.column!=qa.target.column&&ca(ya)==ca(qa)){if(ya.target.column>qa.target.column)return qa=P(qa,
ya),ya.y1-qa;if(qa.target.column>ya.target.column)return P(ya,qa)-qa.y1}else return ya.y1-qa.y1;if(ya.circular&&!qa.circular)return"top"==ya.circularLinkType?-1:1;if(qa.circular&&!ya.circular)return"top"==qa.circularLinkType?1:-1;if(ya.circular&&qa.circular)return ya.circularLinkType===qa.circularLinkType&&"top"==ya.circularLinkType?ya.target.column===qa.target.column?ya.target.y1-qa.target.y1:qa.target.column-ya.target.column:ya.circularLinkType===qa.circularLinkType&&"bottom"==ya.circularLinkType?
ya.target.column===qa.target.column?qa.target.y1-ya.target.y1:ya.target.column-qa.target.column:"top"==ya.circularLinkType?-1:1});var sa=oa.y0;ua.forEach(function(ya){ya.y0=sa+ya.width/2;sa+=ya.width});ua.forEach(function(ya,qa){if("bottom"==ya.circularLinkType){qa+=1;var xa=0;for(qa;qa<ka;qa++)xa+=ua[qa].width;ya.y0=oa.y1-xa-ya.width/2}})})}function ea(na,pa,ra){na.nodes.forEach(function(ta){var oa=na.links.filter(function(sa){return ra(sa.target)==ra(ta)}),ua=oa.length;1<ua&&oa.sort(function(sa,
ya){if(!sa.circular&&!ya.circular)if(sa.source.column!=ya.source.column&&ca(sa)==ca(ya)){if(ya.source.column<sa.source.column)return ya=U(ya,sa),sa.y0-ya;if(sa.source.column<ya.source.column)return U(sa,ya)-ya.y0}else return sa.y0-ya.y0;if(sa.circular&&!ya.circular)return"top"==sa.circularLinkType?-1:1;if(ya.circular&&!sa.circular)return"top"==ya.circularLinkType?1:-1;if(sa.circular&&ya.circular)return sa.circularLinkType===ya.circularLinkType&&"top"==sa.circularLinkType?sa.source.column===ya.source.column?
sa.source.y1-ya.source.y1:sa.source.column-ya.source.column:sa.circularLinkType===ya.circularLinkType&&"bottom"==sa.circularLinkType?sa.source.column===ya.source.column?sa.source.y1-ya.source.y1:ya.source.column-sa.source.column:"top"==sa.circularLinkType?-1:1});var ka=ta.y0;oa.forEach(function(sa){sa.y1=ka+sa.width/2;ka+=sa.width});oa.forEach(function(sa,ya){if("bottom"==sa.circularLinkType){ya+=1;var qa=0;for(ya;ya<ua;ya++)qa+=oa[ya].width;sa.y1=ta.y1-qa-sa.width/2}})})}function ca(na){return 0<
na.y0-na.y1?"up":"down"}function ia(na,pa){return pa(na.source)==pa(na.target)}function fa(na,pa,ra){var ta=na.nodes;na=na.links;var oa=!1,ua=!1;na.forEach(function(qa){"top"==qa.circularLinkType?oa=!0:"bottom"==qa.circularLinkType&&(ua=!0)});if(0==oa||0==ua){var ka=h.min(ta,function(qa){return qa.y0}),sa=h.max(ta,function(qa){return qa.y1}),ya=(ra-pa)/(sa-ka);ta.forEach(function(qa){var xa=(qa.y1-qa.y0)*ya;qa.y0=(qa.y0-ka)*ya;qa.y1=qa.y0+xa});na.forEach(function(qa){qa.y0=(qa.y0-ka)*ya;qa.y1=(qa.y1-
ka)*ya;qa.width*=ya})}}a=a&&a.hasOwnProperty("default")?a["default"]:a;var ha="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(na){return typeof na}:function(na){return na&&"function"===typeof Symbol&&na.constructor===Symbol&&na!==Symbol.prototype?"symbol":typeof na};m.sankeyCircular=function(){function na(){var La={nodes:Ea.apply(null,arguments),links:Ia.apply(null,arguments)};pa(La);x(La,Ra,Fa);ra(La);ua(La);E(La,Ra);ka(La,Qa,Ra);sa(La);for(var Oa=0;4>Oa;Oa++)ba(La,Ca,Ra),
ea(La,Ca,Ra),V(La,qa,Ca,Ra),ba(La,Ca,Ra),ea(La,Ca,Ra);fa(La,qa,Ca);L(La,lb,Ca,Ra);return La}function pa(La){La.nodes.forEach(function(fb,bb){fb.index=bb;fb.sourceLinks=[];fb.targetLinks=[]});var Oa=l.map(La.nodes,Ra);La.links.forEach(function(fb,bb){fb.index=bb;bb=fb.source;var Pa=fb.target;"object"!==("undefined"===typeof bb?"undefined":ha(bb))&&(bb=fb.source=D(Oa,bb));"object"!==("undefined"===typeof Pa?"undefined":ha(Pa))&&(Pa=fb.target=D(Oa,Pa));bb.sourceLinks.push(fb);Pa.targetLinks.push(fb)});
return La}function ra(La){La.nodes.forEach(function(Oa){Oa.partOfCycle=!1;Oa.value=Math.max(h.sum(Oa.sourceLinks,d),h.sum(Oa.targetLinks,d));Oa.sourceLinks.forEach(function(fb){fb.circular&&(Oa.partOfCycle=!0,Oa.circularLinkType=fb.circularLinkType)});Oa.targetLinks.forEach(function(fb){fb.circular&&(Oa.partOfCycle=!0,Oa.circularLinkType=fb.circularLinkType)})})}function ta(La){var Oa=0,fb=0,bb=0,Pa=0,Ta=h.max(La.nodes,function(Ya){return Ya.column});La.links.forEach(function(Ya){Ya.circular&&("top"==
Ya.circularLinkType?Oa+=Ya.width:fb+=Ya.width,0==Ya.target.column&&(Pa+=Ya.width),Ya.source.column==Ta&&(bb+=Ya.width))});Oa=0<Oa?Oa+25+10:Oa;fb=0<fb?fb+25+10:fb;bb=0<bb?bb+25+10:bb;Pa=0<Pa?Pa+25+10:Pa;return{top:Oa,bottom:fb,left:Pa,right:bb}}function oa(La,Oa){var fb=h.max(La.nodes,function(Ta){return Ta.column}),bb=xa-ya,Pa=Ca-qa;bb/=bb+Oa.right+Oa.left;Pa/=Pa+Oa.top+Oa.bottom;ya=ya*bb+Oa.left;xa=0==Oa.right?xa:xa*bb;qa=qa*Pa+Oa.top;Ca*=Pa;La.nodes.forEach(function(Ta){Ta.x0=ya+(xa-ya-Ja)/fb*Ta.column;
Ta.x1=Ta.x0+Ja});return Pa}function ua(La){var Oa;var fb=La.nodes;var bb=[];for(Oa=0;fb.length;++Oa,fb=bb,bb=[])fb.forEach(function(Pa){Pa.depth=Oa;Pa.sourceLinks.forEach(function(Ta){0>bb.indexOf(Ta.target)&&!Ta.circular&&bb.push(Ta.target)})});fb=La.nodes;bb=[];for(Oa=0;fb.length;++Oa,fb=bb,bb=[])fb.forEach(function(Pa){Pa.height=Oa;Pa.targetLinks.forEach(function(Ta){0>bb.indexOf(Ta.source)&&!Ta.circular&&bb.push(Ta.source)})});La.nodes.forEach(function(Pa){Pa.column=Math.floor(Wa.call(null,Pa,
Oa))})}function ka(La,Oa,fb){function bb(nb,Da){var Ha=Ta.length;Ta.forEach(function(ab){var ib=ab.length,ob=ab[0].depth;ab.forEach(function(db){if((db.sourceLinks.length||db.targetLinks.length)&&!(db.partOfCycle&&0<t(db,Da)))if(0==ob&&1==ib){var gb=db.y1-db.y0;db.y0=Ca/2-gb/2;db.y1=Ca/2+gb/2}else if(ob==Ha-1&&1==ib)gb=db.y1-db.y0,db.y0=Ca/2-gb/2,db.y1=Ca/2+gb/2;else{gb=h.mean(db.sourceLinks,u);var rb=h.mean(db.targetLinks,r);gb=((gb&&rb?(gb+rb)/2:gb||rb)-q(db))*nb;db.y0+=gb;db.y1+=gb}})})}function Pa(){Ta.forEach(function(nb){var Da=
qa,Ha=nb.length,ab;nb.sort(f);for(ab=0;ab<Ha;++ab){var ib=nb[ab];var ob=Da-ib.y0;0<ob&&(ib.y0+=ob,ib.y1+=ob);Da=ib.y1+eb}ob=Da-eb-Ca;if(0<ob)for(Da=ib.y0-=ob,ib.y1-=ob,ab=Ha-2;0<=ab;--ab)ib=nb[ab],ob=ib.y1+eb-Da,0<ob&&(ib.y0-=ob,ib.y1-=ob),Da=ib.y0})}var Ta=l.nest().key(function(nb){return nb.column}).sortKeys(h.ascending).entries(La.nodes).map(function(nb){return nb.values});(function(nb){if(hb){var Da=Infinity;Ta.forEach(function(ob){ob=Ca*hb/(ob.length+1);Da=ob<Da?ob:Da});eb=Da}var Ha=h.min(Ta,
function(ob){return(Ca-qa-(ob.length-1)*eb)/h.sum(ob,d)});Ha*=.3;La.links.forEach(function(ob){ob.width=ob.value*Ha});var ab=ta(La),ib=oa(La,ab);Ha*=ib;La.links.forEach(function(ob){ob.width=ob.value*Ha});Ta.forEach(function(ob){var db=ob.length;ob.forEach(function(gb,rb){gb.depth==Ta.length-1&&1==db?gb.y0=Ca/2-gb.value*Ha:0==gb.depth&&1==db?gb.y0=Ca/2-gb.value*Ha:gb.partOfCycle?0==t(gb,nb)?gb.y0=Ca/2+rb:gb.y0="top"==gb.circularLinkType?qa+rb:Ca-gb.value*Ha-rb:gb.y0=0==ab.top||0==ab.bottom?(Ca-qa)/
db*rb:(Ca-qa)/2-db/2+rb;gb.y1=gb.y0+gb.value*Ha})})})(fb);Pa();for(var Ya=1;0<Oa;--Oa)bb(Ya*=.99,fb),Pa()}function sa(La){La.nodes.forEach(function(Oa){Oa.sourceLinks.sort(c);Oa.targetLinks.sort(n)});La.nodes.forEach(function(Oa){var fb=Oa.y0,bb=fb,Pa=Oa.y1,Ta=Pa;Oa.sourceLinks.forEach(function(Ya){Ya.circular?(Ya.y0=Pa-Ya.width/2,Pa-=Ya.width):(Ya.y0=fb+Ya.width/2,fb+=Ya.width)});Oa.targetLinks.forEach(function(Ya){Ya.circular?(Ya.y1=Ta-Ya.width/2,Ta-=Ya.width):(Ya.y1=bb+Ya.width/2,bb+=Ya.width)})})}
var ya=0,qa=0,xa=1,Ca=1,Ja=24,eb,Ra=v,Wa=k,Ea=w,Ia=y,Qa=32,lb=2,hb,Fa=null;na.nodeId=function(La){return arguments.length?(Ra="function"===typeof La?La:p(La),na):Ra};na.nodeAlign=function(La){return arguments.length?(Wa="function"===typeof La?La:p(La),na):Wa};na.nodeWidth=function(La){return arguments.length?(Ja=+La,na):Ja};na.nodePadding=function(La){return arguments.length?(eb=+La,na):eb};na.nodes=function(La){return arguments.length?(Ea="function"===typeof La?La:p(La),na):Ea};na.links=function(La){return arguments.length?
(Ia="function"===typeof La?La:p(La),na):Ia};na.size=function(La){return arguments.length?(ya=qa=0,xa=+La[0],Ca=+La[1],na):[xa-ya,Ca-qa]};na.extent=function(La){return arguments.length?(ya=+La[0][0],xa=+La[1][0],qa=+La[0][1],Ca=+La[1][1],na):[[ya,qa],[xa,Ca]]};na.iterations=function(La){return arguments.length?(Qa=+La,na):Qa};na.circularLinkGap=function(La){return arguments.length?(lb=+La,na):lb};na.nodePaddingRatio=function(La){return arguments.length?(hb=+La,na):hb};na.sortNodes=function(La){return arguments.length?
(Fa=La,na):Fa};na.update=function(La){E(La,Ra);sa(La);La.links.forEach(function(Oa){Oa.circular&&(Oa.circularLinkType=Oa.y0+Oa.y1<Ca?"top":"bottom",Oa.source.circularLinkType=Oa.circularLinkType,Oa.target.circularLinkType=Oa.circularLinkType)});ba(La,Ca,Ra,!1);ea(La,Ca,Ra);L(La,lb,Ca,Ra);return La};return na};m.sankeyCenter=function(na){return na.targetLinks.length?na.depth:na.sourceLinks.length?h.min(na.sourceLinks,g)-1:0};m.sankeyLeft=function(na){return na.depth};m.sankeyRight=function(na,pa){return pa-
1-na.height};m.sankeyJustify=k;Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165,"elementary-circuits-directed-graph":179}],56:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C,b("d3-array"),b("d3-collection"),b("d3-shape")):h(m.d3=m.d3||{},m.d3,m.d3,m.d3)})(this,function(m,h,l,e){function a(E){return E.target.depth}function g(E,B){return E.sourceLinks.length?E.depth:B-1}function k(E){return function(){return E}}function p(E,
B){return c(E.source,B.source)||E.index-B.index}function n(E,B){return c(E.target,B.target)||E.index-B.index}function c(E,B){return E.y0-B.y0}function f(E){return E.value}function d(E){return(E.y0+E.y1)/2}function q(E){return d(E.source)*E.value}function r(E){return d(E.target)*E.value}function u(E){return E.index}function v(E){return E.nodes}function w(E){return E.links}function y(E,B){E=E.get(B);if(!E)throw Error("missing: "+B);return E}function D(E){return[E.source.x1,E.y0]}function x(E){return[E.target.x0,
E.y1]}m.sankey=function(){function E(){var ca={nodes:V.apply(null,arguments),links:Y.apply(null,arguments)};B(ca);t(ca);G(ca);I(ca,ba);L(ca);return ca}function B(ca){ca.nodes.forEach(function(fa,ha){fa.index=ha;fa.sourceLinks=[];fa.targetLinks=[]});var ia=l.map(ca.nodes,U);ca.links.forEach(function(fa,ha){fa.index=ha;ha=fa.source;var na=fa.target;"object"!==typeof ha&&(ha=fa.source=y(ia,ha));"object"!==typeof na&&(na=fa.target=y(ia,na));ha.sourceLinks.push(fa);na.targetLinks.push(fa)})}function t(ca){ca.nodes.forEach(function(ia){ia.value=
Math.max(h.sum(ia.sourceLinks,f),h.sum(ia.targetLinks,f))})}function G(ca){var ia;var fa=ca.nodes;var ha=[];for(ia=0;fa.length;++ia,fa=ha,ha=[])fa.forEach(function(pa){pa.depth=ia;pa.sourceLinks.forEach(function(ra){0>ha.indexOf(ra.target)&&ha.push(ra.target)})});fa=ca.nodes;ha=[];for(ia=0;fa.length;++ia,fa=ha,ha=[])fa.forEach(function(pa){pa.height=ia;pa.targetLinks.forEach(function(ra){0>ha.indexOf(ra.source)&&ha.push(ra.source)})});var na=(H-M-O)/(ia-1);ca.nodes.forEach(function(pa){pa.x1=(pa.x0=
M+Math.max(0,Math.min(ia-1,Math.floor(P.call(null,pa,ia))))*na)+O})}function I(ca){function ia(ta){na.forEach(function(oa){oa.forEach(function(ua){if(ua.targetLinks.length){var ka=(h.sum(ua.targetLinks,q)/h.sum(ua.targetLinks,f)-d(ua))*ta;ua.y0+=ka;ua.y1+=ka}})})}function fa(ta){na.slice().reverse().forEach(function(oa){oa.forEach(function(ua){if(ua.sourceLinks.length){var ka=(h.sum(ua.sourceLinks,r)/h.sum(ua.sourceLinks,f)-d(ua))*ta;ua.y0+=ka;ua.y1+=ka}})})}function ha(){na.forEach(function(ta){var oa=
N,ua=ta.length,ka;ta.sort(c);for(ka=0;ka<ua;++ka){var sa=ta[ka];var ya=oa-sa.y0;0<ya&&(sa.y0+=ya,sa.y1+=ya);oa=sa.y1+Q}ya=oa-Q-J;if(0<ya)for(oa=sa.y0-=ya,sa.y1-=ya,ka=ua-2;0<=ka;--ka)sa=ta[ka],ya=sa.y1+Q-oa,0<ya&&(sa.y0-=ya,sa.y1-=ya),oa=sa.y0})}var na=l.nest().key(function(ta){return ta.x0}).sortKeys(h.ascending).entries(ca.nodes).map(function(ta){return ta.values});(function(){var ta=h.max(na,function(ua){return ua.length});ta=ea*(J-N)/(ta-1);Q>ta&&(Q=ta);var oa=h.min(na,function(ua){return(J-N-
(ua.length-1)*Q)/h.sum(ua,f)});na.forEach(function(ua){ua.forEach(function(ka,sa){ka.y1=(ka.y0=sa)+ka.value*oa})});ca.links.forEach(function(ua){ua.width=ua.value*oa})})();ha();for(var pa=1,ra=ba;0<ra;--ra)fa(pa*=.99),ha(),ia(pa),ha()}function L(ca){ca.nodes.forEach(function(ia){ia.sourceLinks.sort(n);ia.targetLinks.sort(p)});ca.nodes.forEach(function(ia){var fa=ia.y0,ha=fa;ia.sourceLinks.forEach(function(na){na.y0=fa+na.width/2;fa+=na.width});ia.targetLinks.forEach(function(na){na.y1=ha+na.width/
2;ha+=na.width})})}var M=0,N=0,H=1,J=1,O=24,Q=8,U=u,P=g,V=v,Y=w,ba=32,ea=2/3;E.update=function(ca){L(ca);return ca};E.nodeId=function(ca){return arguments.length?(U="function"===typeof ca?ca:k(ca),E):U};E.nodeAlign=function(ca){return arguments.length?(P="function"===typeof ca?ca:k(ca),E):P};E.nodeWidth=function(ca){return arguments.length?(O=+ca,E):O};E.nodePadding=function(ca){return arguments.length?(Q=+ca,E):Q};E.nodes=function(ca){return arguments.length?(V="function"===typeof ca?ca:k(ca),E):
V};E.links=function(ca){return arguments.length?(Y="function"===typeof ca?ca:k(ca),E):Y};E.size=function(ca){return arguments.length?(M=N=0,H=+ca[0],J=+ca[1],E):[H-M,J-N]};E.extent=function(ca){return arguments.length?(M=+ca[0][0],H=+ca[1][0],N=+ca[0][1],J=+ca[1][1],E):[[M,N],[H,J]]};E.iterations=function(ca){return arguments.length?(ba=+ca,E):ba};return E};m.sankeyCenter=function(E){return E.targetLinks.length?E.depth:E.sourceLinks.length?h.min(E.sourceLinks,a)-1:0};m.sankeyLeft=function(E){return E.depth};
m.sankeyRight=function(E,B){return B-1-E.height};m.sankeyJustify=g;m.sankeyLinkHorizontal=function(){return e.linkHorizontal().source(D).target(x)};Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165}],57:[function(b,F,C){F.exports=b("./quad")},{"./quad":58}],58:[function(b,F,C){function m(d,q){var r=q[0],u=q[1],v=1/(q[2]-r);q=1/(q[3]-u);for(var w=Array(d.length),y=0,D=d.length/2;y<D;y++)w[2*y]=l((d[2*y]-r)*v,0,1),w[2*y+1]=l((d[2*y+1]-u)*q,0,1);return w}
var h=b("binary-search-bounds"),l=b("clamp"),e=b("parse-rect"),a=b("array-bounds"),g=b("pick-by-alias"),k=b("defined"),p=b("flatten-vertex-data"),n=b("is-obj"),c=b("dtype"),f=b("math-log2");F.exports=function(d,q){function r(H,J,O,Q,U,P){if(!Q.length)return null;var V=B[U]||(B[U]=[]),Y=G[U]||(G[U]=[]),ba=t[U]||(t[U]=[]),ea=V.length;U++;if(U>w||1073741824<P){for(H=0;H<Q.length;H++)V.push(Q[H]),Y.push(P),ba.push(null,null,null,null);return ea}V.push(Q[0]);Y.push(P);if(1>=Q.length)return ba.push(null,
null,null,null),ea;V=.5*O;Y=H+V;O=J+V;for(var ca=[],ia=[],fa=[],ha=[],na=1,pa=Q.length;na<pa;na++){var ra=Q[na],ta=D[2*ra+1];D[2*ra]<Y?ta<O?ca.push(ra):ia.push(ra):ta<O?fa.push(ra):ha.push(ra)}P<<=2;ba.push(r(H,J,V,ca,U,P),r(H,O,V,ia,U,P+1),r(Y,J,V,fa,U,P+2),r(Y,O,V,ha,U,P+3));return ea}function u(H,J,O,Q,U){for(var P=[],V=0;V<U;V++){var Y=G[V],ba=I[V][0],ea=v(H,J,V),ca=v(O,Q,V);ea=h.ge(Y,ea);Y=h.gt(Y,ca,ea,Y.length-1);P[V]=[ea+ba,Y+ba]}return P}function v(H,J,O){for(var Q=1,U=.5,P=.5,V=.5,Y=0;Y<
O;Y++)Q<<=2,Q+=H<U?J<P?0:1:J<P?2:3,V*=.5,U+=H<U?-V:V,P+=J<P?-V:V;return Q}q||(q={});d=p(d,"float64");q=g(q,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var w=k(q.maxDepth,255),y=k(q.bounds,a(d,2));y[0]===y[2]&&y[2]++;y[1]===y[3]&&y[3]++;var D=m(d,y),x=d.length>>>1;q.dtype||(q.dtype="array");if("string"===typeof q.dtype)var E=new (c(q.dtype))(x);else q.dtype&&(E=q.dtype,Array.isArray(E)&&
(E.length=x));for(q=0;q<x;++q)E[q]=q;var B=[],t=[],G=[],I=[];r(0,0,1,E,0,1);for(q=x=0;q<B.length;q++){var L=B[q];if(E.set)E.set(L,x);else for(var M=0,N=L.length;M<N;M++)E[M+x]=L[M];L=x+B[q].length;I[q]=[x,L];x=L}E.range=function(){function H(pa,ra,ta,oa,ua,ka){if(null!==ua&&null!==ka&&!(ba>pa+ta||ea>ra+ta||ca<pa||ia<ra||oa>=fa||ua===ka)){var sa=B[oa];void 0===ka&&(ka=sa.length);for(var ya=ua;ya<ka;ya++){var qa=sa[ya],xa=d[2*qa],Ca=d[2*qa+1];xa>=U&&xa<=V&&Ca>=P&&Ca<=Y&&na.push(qa)}xa=t[oa];ka=xa[4*
ua];sa=xa[4*ua+1];ya=xa[4*ua+2];qa=xa[4*ua+3];a:{Ca=null;for(var Ja=0;null===Ca;)if(Ca=xa[4*(ua+1)+Ja],Ja++,Ja>xa.length){ua=null;break a}ua=Ca}ta*=.5;oa+=1;H(pa,ra,ta,oa,ka,sa||ya||qa||ua);H(pa,ra+ta,ta,oa,sa,ya||qa||ua);H(pa+ta,ra,ta,oa,ya,qa||ua);H(pa+ta,ra+ta,ta,oa,qa,ua)}}for(var J=[],O=arguments.length;O--;)J[O]=arguments[O];if(n(J[J.length-1])){var Q=J.pop();J.length||null==Q.x&&null==Q.l&&null==Q.left||(J=[Q],O={});O=g(Q,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",
lod:"lod details ranges offsets"})}else O={};J.length||(J=y);J=e.apply(void 0,J);J=[Math.min(J.x,J.x+J.width),Math.min(J.y,J.y+J.height),Math.max(J.x,J.x+J.width),Math.max(J.y,J.y+J.height)];var U=J[0],P=J[1],V=J[2],Y=J[3];J=m([U,P,V,Y],y);var ba=J[0],ea=J[1],ca=J[2],ia=J[3],fa=k(O.level,B.length);if(null!=O.d){if("number"===typeof O.d)var ha=[O.d,O.d];else O.d.length&&(ha=O.d);fa=Math.min(Math.max(Math.ceil(-f(Math.abs(ha[0])/(y[2]-y[0]))),Math.ceil(-f(Math.abs(ha[1])/(y[3]-y[1])))),fa)}fa=Math.min(fa,
B.length);if(O.lod)return u(ba,ea,ca,ia,fa);var na=[];H(0,0,1,0,0,1);return na};return E}},{"array-bounds":70,"binary-search-bounds":96,clamp:120,defined:170,dtype:175,"flatten-vertex-data":244,"is-obj":442,"math-log2":453,"parse-rect":478,"pick-by-alias":485}],59:[function(b,F,C){function m(e){var a=0;if(e&&0<e.length){a+=Math.abs(h(e[0]));for(var g=1;g<e.length;g++)a-=Math.abs(h(e[g]))}return a}function h(e){var a,g=0,k=e.length;if(2<k){for(a=0;a<k;a++){if(a===k-2){var p=k-2;var n=k-1;var c=0}else a===
k-1?(p=k-1,n=0,c=1):(p=a,n=a+1,c=a+2);p=e[p];n=e[n];c=e[c];g+=(c[0]*Math.PI/180-p[0]*Math.PI/180)*Math.sin(n[1]*Math.PI/180)}g=40680631590769*g/2}return g}Object.defineProperty(C,"__esModule",{value:!0});var l=b("@turf/meta");C.default=function(e){return l.geomReduce(e,function(a,g){a:{var k=0,p;switch(g.type){case "Polygon":g=m(g.coordinates);break a;case "MultiPolygon":for(p=0;p<g.coordinates.length;p++)k+=m(g.coordinates[p]);g=k;break a}g=0}return a+g},0)}},{"@turf/meta":63}],60:[function(b,F,
C){Object.defineProperty(C,"__esModule",{value:!0});var m=b("@turf/meta");C.default=function(h){var l=[Infinity,Infinity,-Infinity,-Infinity];m.coordEach(h,function(e){l[0]>e[0]&&(l[0]=e[0]);l[1]>e[1]&&(l[1]=e[1]);l[2]<e[0]&&(l[2]=e[0]);l[3]<e[1]&&(l[3]=e[1])});return l}},{"@turf/meta":63}],61:[function(b,F,C){Object.defineProperty(C,"__esModule",{value:!0});var m=b("@turf/meta"),h=b("@turf/helpers");C.default=function(l,e){void 0===e&&(e={});var a=0,g=0,k=0;m.coordEach(l,function(p){a+=p[0];g+=p[1];
k++});return h.point([a/k,g/k],e.properties)}},{"@turf/helpers":62,"@turf/meta":63}],62:[function(b,F,C){function m(q,r,u){void 0===u&&(u={});var v={type:"Feature"};if(0===u.id||u.id)v.id=u.id;u.bbox&&(v.bbox=u.bbox);v.properties=r||{};v.geometry=q;return v}function h(q,r,u){void 0===u&&(u={});return m({type:"Point",coordinates:q},r,u)}function l(q,r,u){void 0===u&&(u={});for(var v=0;v<q.length;v++){var w=q[v];if(4>w.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");
for(var y=0;y<w[w.length-1].length;y++)if(w[w.length-1][y]!==w[0][y])throw Error("First and last Position are not equivalent.");}return m({type:"Polygon",coordinates:q},r,u)}function e(q,r,u){void 0===u&&(u={});if(2>q.length)throw Error("coordinates must be an array of two or more positions");return m({type:"LineString",coordinates:q},r,u)}function a(q,r){void 0===r&&(r={});var u={type:"FeatureCollection"};r.id&&(u.id=r.id);r.bbox&&(u.bbox=r.bbox);u.features=q;return u}function g(q,r,u){void 0===
u&&(u={});return m({type:"MultiLineString",coordinates:q},r,u)}function k(q,r,u){void 0===u&&(u={});return m({type:"MultiPoint",coordinates:q},r,u)}function p(q,r,u){void 0===u&&(u={});return m({type:"MultiPolygon",coordinates:q},r,u)}function n(q,r){void 0===r&&(r="kilometers");var u=C.factors[r];if(!u)throw Error(r+" units is invalid");return q*u}function c(q,r){void 0===r&&(r="kilometers");var u=C.factors[r];if(!u)throw Error(r+" units is invalid");return q/u}function f(q){return q%(2*Math.PI)*
180/Math.PI}function d(q){return!isNaN(q)&&null!==q&&!Array.isArray(q)&&!/^\s*$/.test(q)}Object.defineProperty(C,"__esModule",{value:!0});C.earthRadius=6371008.8;C.factors={centimeters:100*C.earthRadius,centimetres:100*C.earthRadius,degrees:C.earthRadius/111325,feet:3.28084*C.earthRadius,inches:39.37*C.earthRadius,kilometers:C.earthRadius/1E3,kilometres:C.earthRadius/1E3,meters:C.earthRadius,metres:C.earthRadius,miles:C.earthRadius/1609.344,millimeters:1E3*C.earthRadius,millimetres:1E3*C.earthRadius,
nauticalmiles:C.earthRadius/1852,radians:1,yards:C.earthRadius/1.0936};C.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/C.earthRadius,yards:1/1.0936};C.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,
millimetres:1E6,yards:1.195990046};C.feature=m;C.geometry=function(q,r,u){switch(q){case "Point":return h(r).geometry;case "LineString":return e(r).geometry;case "Polygon":return l(r).geometry;case "MultiPoint":return k(r).geometry;case "MultiLineString":return g(r).geometry;case "MultiPolygon":return p(r).geometry;default:throw Error(q+" is invalid");}};C.point=h;C.points=function(q,r,u){void 0===u&&(u={});return a(q.map(function(v){return h(v,r)}),u)};C.polygon=l;C.polygons=function(q,r,u){void 0===
u&&(u={});return a(q.map(function(v){return l(v,r)}),u)};C.lineString=e;C.lineStrings=function(q,r,u){void 0===u&&(u={});return a(q.map(function(v){return e(v,r)}),u)};C.featureCollection=a;C.multiLineString=g;C.multiPoint=k;C.multiPolygon=p;C.geometryCollection=function(q,r,u){void 0===u&&(u={});return m({type:"GeometryCollection",geometries:q},r,u)};C.round=function(q,r){void 0===r&&(r=0);if(r&&!(0<=r))throw Error("precision must be a positive number");r=Math.pow(10,r||0);return Math.round(q*r)/
r};C.radiansToLength=n;C.lengthToRadians=c;C.lengthToDegrees=function(q,r){return f(c(q,r))};C.bearingToAzimuth=function(q){q%=360;0>q&&(q+=360);return q};C.radiansToDegrees=f;C.degreesToRadians=function(q){return q%360*Math.PI/180};C.convertLength=function(q,r,u){void 0===r&&(r="kilometers");void 0===u&&(u="kilometers");if(!(0<=q))throw Error("length must be a positive number");return n(c(q,r),u)};C.convertArea=function(q,r,u){void 0===r&&(r="meters");void 0===u&&(u="kilometers");if(!(0<=q))throw Error("area must be a positive number");
r=C.areaFactors[r];if(!r)throw Error("invalid original units");u=C.areaFactors[u];if(!u)throw Error("invalid final units");return q/r*u};C.isNumber=d;C.isObject=function(q){return!!q&&q.constructor===Object};C.validateBBox=function(q){if(!q)throw Error("bbox is required");if(!Array.isArray(q))throw Error("bbox must be an Array");if(4!==q.length&&6!==q.length)throw Error("bbox must be an Array of 4 or 6 numbers");q.forEach(function(r){if(!d(r))throw Error("bbox must only contain numbers");})};C.validateId=
function(q){if(!q)throw Error("id is required");if(-1===["string","number"].indexOf(typeof q))throw Error("id must be a number or a string");};C.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`");};C.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`");};C.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`");};C.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`");
};C.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`");};C.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`");};C.convertDistance=function(){throw Error("method has been renamed to `convertLength`");}},{}],63:[function(b,F,C){function m(n,c,f){if(null!==n){var d,q=0,r;var u=n.type;for(var v="FeatureCollection"===u,w="Feature"===u,y=v?n.features.length:1,D=0;D<y;D++){var x=(r=(d=v?n.features[D].geometry:w?n.geometry:n)?"GeometryCollection"===
d.type:!1)?d.geometries.length:1;for(var E=0;E<x;E++){var B=0,t=0;var G=r?d.geometries[E]:d;if(null!==G){var I=G.coordinates;var L=G.type;var M=!f||"Polygon"!==L&&"MultiPolygon"!==L?0:1;switch(L){case null:break;case "Point":if(!1===c(I,q,D,B,t))return!1;q++;break;case "LineString":case "MultiPoint":for(u=0;u<I.length;u++){if(!1===c(I[u],q,D,B,t))return!1;q++;"MultiPoint"===L&&B++}break;case "Polygon":case "MultiLineString":for(u=0;u<I.length;u++){for(G=0;G<I[u].length-M;G++){if(!1===c(I[u][G],q,
D,B,t))return!1;q++}"MultiLineString"===L&&B++;"Polygon"===L&&t++}break;case "MultiPolygon":for(u=0;u<I.length;u++){for(G=t=0;G<I[u].length;G++){for(L=0;L<I[u][G].length-M;L++){if(!1===c(I[u][G][L],q,D,B,t))return!1;q++}t++}B++}break;case "GeometryCollection":for(u=0;u<G.geometries.length;u++)if(!1===m(G.geometries[u],c,f))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}function h(n,c){var f;switch(n.type){case "FeatureCollection":for(f=0;f<n.features.length&&!1!==c(n.features[f].properties,
f);f++);break;case "Feature":c(n.properties,0)}}function l(n,c){if("Feature"===n.type)c(n,0);else if("FeatureCollection"===n.type)for(var f=0;f<n.features.length&&!1!==c(n.features[f],f);f++);}function e(n,c){var f,d,q,r,u=0,v="FeatureCollection"===n.type,w="Feature"===n.type,y=v?n.features.length:1;for(f=0;f<y;f++){var D=v?n.features[f].geometry:w?n.geometry:n;var x=v?n.features[f].properties:w?n.properties:{};var E=v?n.features[f].bbox:w?n.bbox:void 0;var B=v?n.features[f].id:w?n.id:void 0;var t=
(r=D?"GeometryCollection"===D.type:!1)?D.geometries.length:1;for(q=0;q<t;q++){var G=r?D.geometries[q]:D;if(null===G){if(!1===c(null,u,x,E,B))return!1}else switch(G.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===c(G,u,x,E,B))return!1;break;case "GeometryCollection":for(d=0;d<G.geometries.length;d++)if(!1===c(G.geometries[d],u,x,E,B))return!1;break;default:throw Error("Unknown Geometry Type");}}u++}}function a(n,c){e(n,function(f,
d,q,r,u){var v=null===f?null:f.type;switch(v){case null:case "Point":case "LineString":case "Polygon":if(!1===c(p.feature(f,q,{bbox:r,id:u}),d,0))return!1;return}switch(v){case "MultiPoint":var w="Point";break;case "MultiLineString":w="LineString";break;case "MultiPolygon":w="Polygon"}for(r=0;r<f.coordinates.length;r++)if(!1===c(p.feature({type:w,coordinates:f.coordinates[r]},q),d,r))return!1})}function g(n,c){a(n,function(f,d,q){var r=0;if(f.geometry){var u=f.geometry.type;if("Point"!==u&&"MultiPoint"!==
u){var v,w=0,y=0,D=0;if(!1===m(f,function(x,E,B,t,G){if(void 0===v||d>w||t>y||G>D)v=x,w=d,y=t,D=G,r=0;else{E=p.lineString([v,x],f.properties);if(!1===c(E,d,q,G,r))return!1;r++;v=x}}))return!1}}})}function k(n,c){if(!n)throw Error("geojson is required");a(n,function(f,d,q){if(null!==f.geometry){var r=f.geometry.coordinates;switch(f.geometry.type){case "LineString":if(!1===c(f,d,q,0,0))return!1;break;case "Polygon":for(var u=0;u<r.length;u++)if(!1===c(p.lineString(r[u],f.properties),d,q,u))return!1}}})}
Object.defineProperty(C,"__esModule",{value:!0});var p=b("@turf/helpers");C.coordEach=m;C.coordReduce=function(n,c,f,d){var q=f;m(n,function(r,u,v,w,y){q=0===u&&void 0===f?r:c(q,r,u,v,w,y)},d);return q};C.propEach=h;C.propReduce=function(n,c,f){var d=f;h(n,function(q,r){d=0===r&&void 0===f?q:c(d,q,r)});return d};C.featureEach=l;C.featureReduce=function(n,c,f){var d=f;l(n,function(q,r){d=0===r&&void 0===f?q:c(d,q,r)});return d};C.coordAll=function(n){var c=[];m(n,function(f){c.push(f)});return c};
C.geomEach=e;C.geomReduce=function(n,c,f){var d=f;e(n,function(q,r,u,v,w){d=0===r&&void 0===f?q:c(d,q,r,u,v,w)});return d};C.flattenEach=a;C.flattenReduce=function(n,c,f){var d=f;a(n,function(q,r,u){d=0===r&&0===u&&void 0===f?q:c(d,q,r,u)});return d};C.segmentEach=g;C.segmentReduce=function(n,c,f){var d=f,q=!1;g(n,function(r,u,v,w,y){d=!1===q&&void 0===f?r:c(d,r,u,v,w,y);q=!0});return d};C.lineEach=k;C.lineReduce=function(n,c,f){var d=f;k(n,function(q,r,u,v){d=0===r&&void 0===f?q:c(d,q,r,u,v)});return d};
C.findSegment=function(n,c){c=c||{};if(!p.isObject(c))throw Error("options is invalid");var f=c.featureIndex||0,d=c.multiFeatureIndex||0,q=c.geometryIndex||0,r=c.segmentIndex||0,u=c.properties;switch(n.type){case "FeatureCollection":0>f&&(f=n.features.length+f);u=u||n.features[f].properties;n=n.features[f].geometry;break;case "Feature":u=u||n.properties;n=n.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");
}if(null===n)return null;f=n.coordinates;switch(n.type){case "Point":case "MultiPoint":return null;case "LineString":return 0>r&&(r=f.length+r-1),p.lineString([f[r],f[r+1]],u,c);case "Polygon":return 0>q&&(q=f.length+q),0>r&&(r=f[q].length+r-1),p.lineString([f[q][r],f[q][r+1]],u,c);case "MultiLineString":return 0>d&&(d=f.length+d),0>r&&(r=f[d].length+r-1),p.lineString([f[d][r],f[d][r+1]],u,c);case "MultiPolygon":return 0>d&&(d=f.length+d),0>q&&(q=f[d].length+q),0>r&&(r=f[d][q].length-r-1),p.lineString([f[d][q][r],
f[d][q][r+1]],u,c)}throw Error("geojson is invalid");};C.findPoint=function(n,c){c=c||{};if(!p.isObject(c))throw Error("options is invalid");var f=c.featureIndex||0,d=c.multiFeatureIndex||0,q=c.geometryIndex||0,r=c.coordIndex||0,u=c.properties;switch(n.type){case "FeatureCollection":0>f&&(f=n.features.length+f);u=u||n.features[f].properties;n=n.features[f].geometry;break;case "Feature":u=u||n.properties;n=n.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;
default:throw Error("geojson is invalid");}if(null===n)return null;f=n.coordinates;switch(n.type){case "Point":return p.point(f,u,c);case "MultiPoint":return 0>d&&(d=f.length+d),p.point(f[d],u,c);case "LineString":return 0>r&&(r=f.length+r),p.point(f[r],u,c);case "Polygon":return 0>q&&(q=f.length+q),0>r&&(r=f[q].length+r),p.point(f[q][r],u,c);case "MultiLineString":return 0>d&&(d=f.length+d),0>r&&(r=f[d].length+r),p.point(f[d][r],u,c);case "MultiPolygon":return 0>d&&(d=f.length+d),0>q&&(q=f[d].length+
q),0>r&&(r=f[d][q].length-r),p.point(f[d][q][r],u,c)}throw Error("geojson is invalid");}},{"@turf/helpers":62}],64:[function(b,F,C){C="undefined"===typeof WeakMap?b("weak-map"):WeakMap;var m=b("gl-buffer"),h=b("gl-vao"),l=new C;F.exports=function(e){var a=l.get(e),g=a&&(a._triangleBuffer.handle||a._triangleBuffer.buffer);g&&e.isBuffer(g)||(g=m(e,new Float32Array([-1,-1,-1,4,4,-1])),a=h(e,[{buffer:g,type:e.FLOAT,size:2}]),a._triangleBuffer=g,l.set(e,a));a.bind();e.drawArrays(e.TRIANGLES,0,3);a.unbind()}},
{"gl-buffer":258,"gl-vao":332,"weak-map":574}],65:[function(b,F,C){F.exports=function(m){var h=0,l=0,e=0,a=0;return m.map(function(g){g=g.slice();var k=g[0],p=k.toUpperCase();if(k!=p)switch(g[0]=p,k){case "a":g[6]+=e;g[7]+=a;break;case "v":g[1]+=a;break;case "h":g[1]+=e;break;default:for(k=1;k<g.length;)g[k++]+=e,g[k++]+=a}switch(p){case "Z":e=h;a=l;break;case "H":e=g[1];break;case "V":a=g[1];break;case "M":e=h=g[1];a=l=g[2];break;default:e=g[g.length-2],a=g[g.length-1]}return g})}},{}],66:[function(b,
F,C){var m=b("pad-left");F.exports=function(h,l,e){l="number"===typeof l?l:1;e=e||": ";h=h.split(/\r?\n/);var a=String(h.length+l-1).length;return h.map(function(g,k){k+=l;return m(k,a-String(k).length)+e+g}).join("\n")}},{"pad-left":476}],67:[function(b,F,C){F.exports=function(h){var l=h.length;if(0===l)return[];if(1===l)return[0];for(var e=h[0].length,a=[h[0]],g=[0],k=1;k<l;++k){a.push(h[k]);a:{var p=a;for(var n=e,c=Array(n+1),f=0;f<p.length;++f)c[f]=p[f];for(f=0;f<=p.length;++f){for(var d=p.length;d<=
n;++d){for(var q=Array(n),r=0;r<n;++r)q[r]=Math.pow(d+1-f,r);c[d]=q}if(m.apply(void 0,c)){p=!0;break a}}p=!1}if(p){if(g.push(k),g.length===e+1)break}else a.pop()}return g};var m=b("robust-orientation")},{"robust-orientation":520}],68:[function(b,F,C){F.exports=function(l,e){return m(e).filter(function(a){for(var g=Array(a.length),k=0;k<a.length;++k)g[k]=e[a[k]];return 1>h(g)*l})};var m=b("delaunay-triangulate"),h=b("circumradius")},{circumradius:119,"delaunay-triangulate":171}],69:[function(b,F,C){F.exports=
function(l,e){return h(m(l,e))};var m=b("alpha-complex"),h=b("simplicial-complex-boundary")},{"alpha-complex":68,"simplicial-complex-boundary":527}],70:[function(b,F,C){F.exports=function(m,h){if(!m||null==m.length)throw Error("Argument should be an array");h=null==h?1:Math.floor(h);for(var l=Array(2*h),e=0;e<h;e++){for(var a=-Infinity,g=Infinity,k=e,p=m.length;k<p;k+=h)m[k]>a&&(a=m[k]),m[k]<g&&(g=m[k]);l[e]=g;l[h+e]=a}return l}},{}],71:[function(b,F,C){var m=b("array-bounds");F.exports=function(h,
l,e){if(!h||null==h.length)throw Error("Argument should be an array");null==l&&(l=1);null==e&&(e=m(h,l));for(var a=0;a<l;a++){var g=e[l+a],k=e[a],p,n=h.length;if(Infinity===g&&-Infinity===k)for(p=a;p<n;p+=l)h[p]=h[p]===g?1:h[p]===k?0:.5;else if(Infinity===g)for(p=a;p<n;p+=l)h[p]=h[p]===g?1:0;else if(-Infinity===k)for(p=a;p<n;p+=l)h[p]=h[p]===k?0:1;else for(g-=k,p=a;p<n;p+=l)isNaN(h[p])||(h[p]=0===g?.5:(h[p]-k)/g)}return h}},{"array-bounds":70}],72:[function(b,F,C){F.exports=function(m,h){var l="number"===
typeof m,e="number"===typeof h;l&&!e?(h=m,m=0):l||e||(h=m=0);m|=0;h=(h|0)-m;if(0>h)throw Error("array length must be positive");l=Array(h);for(e=0;e<h;e++,m++)l[e]=m;return l}},{}],73:[function(b,F,C){(function(m){function h(I,L){if(I===L)return 0;for(var M=I.length,N=L.length,H=0,J=Math.min(M,N);H<J;++H)if(I[H]!==L[H]){M=I[H];N=L[H];break}return M<N?-1:N<M?1:0}function l(I){return m.Buffer&&"function"===typeof m.Buffer.isBuffer?m.Buffer.isBuffer(I):!(null==I||!I._isBuffer)}function e(I){return l(I)||
"function"!==typeof m.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(I):I?I instanceof DataView||I.buffer&&I.buffer instanceof ArrayBuffer?!0:!1:!1}function a(I){if(y.isFunction(I))return E?I.name:(I=I.toString().match(t))&&I[1]}function g(I,L){return"string"===typeof I?I.length<L?I:I.slice(0,L):I}function k(I){if(E||!y.isFunction(I))return y.inspect(I);I=a(I);return"[Function"+(I?": "+I:"")+"]"}function p(I,L,M,N,H){throw new B.AssertionError({message:M,actual:I,expected:L,
operator:N,stackStartFunction:H});}function n(I,L){I||p(I,!0,L,"\x3d\x3d",B.ok)}function c(I,L,M,N){if(I===L)return!0;if(l(I)&&l(L))return 0===h(I,L);if(y.isDate(I)&&y.isDate(L))return I.getTime()===L.getTime();if(y.isRegExp(I)&&y.isRegExp(L))return I.source===L.source&&I.global===L.global&&I.multiline===L.multiline&&I.lastIndex===L.lastIndex&&I.ignoreCase===L.ignoreCase;if(null!==I&&"object"===typeof I||null!==L&&"object"===typeof L){if(!e(I)||!e(L)||Object.prototype.toString.call(I)!==Object.prototype.toString.call(L)||
I instanceof Float32Array||I instanceof Float64Array){if(l(I)!==l(L))return!1;N=N||{actual:[],expected:[]};var H=N.actual.indexOf(I);if(-1!==H&&H===N.expected.indexOf(L))return!0;N.actual.push(I);N.expected.push(L);return d(I,L,M,N)}return 0===h(new Uint8Array(I.buffer),new Uint8Array(L.buffer))}return M?I===L:I==L}function f(I){return"[object Arguments]"==Object.prototype.toString.call(I)}function d(I,L,M,N){if(null===I||void 0===I||null===L||void 0===L)return!1;if(y.isPrimitive(I)||y.isPrimitive(L))return I===
L;if(M&&Object.getPrototypeOf(I)!==Object.getPrototypeOf(L))return!1;var H=f(I),J=f(L);if(H&&!J||!H&&J)return!1;if(H)return I=x.call(I),L=x.call(L),c(I,L,M);H=G(I);var O=G(L);if(H.length!==O.length)return!1;H.sort();O.sort();for(J=H.length-1;0<=J;J--)if(H[J]!==O[J])return!1;for(J=H.length-1;0<=J;J--)if(O=H[J],!c(I[O],L[O],M,N))return!1;return!0}function q(I,L,M){c(I,L,!0)&&p(I,L,M,"notDeepStrictEqual",q)}function r(I,L){if(!I||!L)return!1;if("[object RegExp]"==Object.prototype.toString.call(L))return L.test(I);
try{if(I instanceof L)return!0}catch(M){}return Error.isPrototypeOf(L)?!1:!0===L.call({},I)}function u(I,L,M,N){if("function"!==typeof L)throw new TypeError('"block" argument must be a function');"string"===typeof M&&(N=M,M=null);try{L()}catch(Q){var H=Q}L=H;N=(M&&M.name?" ("+M.name+").":".")+(N?" "+N:".");I&&!L&&p(L,M,"Missing expected exception"+N);H="string"===typeof N;var J=!I&&y.isError(L),O=!I&&L&&!M;(J&&H&&r(L,M)||O)&&p(L,M,"Got unwanted exception"+N);if(I&&L&&M&&!r(L,M)||!I&&L)throw L;}function v(I,
L){I||p(I,!0,L,"\x3d\x3d",v)}var w=b("object-assign"),y=b("util/"),D=Object.prototype.hasOwnProperty,x=Array.prototype.slice,E=function(){return"foo"===function(){}.name}(),B=F.exports=n,t=/\s*function\s+([^\(\s]*)\s*/;B.AssertionError=function(I){this.name="AssertionError";this.actual=I.actual;this.expected=I.expected;this.operator=I.operator;I.message?(this.message=I.message,this.generatedMessage=!1):(this.message=g(k(this.actual),128)+" "+this.operator+" "+g(k(this.expected),128),this.generatedMessage=
!0);var L=I.stackStartFunction||p;Error.captureStackTrace?Error.captureStackTrace(this,L):(I=Error(),I.stack&&(I=I.stack,L=a(L),L=I.indexOf("\n"+L),0<=L&&(L=I.indexOf("\n",L+1),I=I.substring(L+1)),this.stack=I))};y.inherits(B.AssertionError,Error);B.fail=p;B.ok=n;B.equal=function(I,L,M){I!=L&&p(I,L,M,"\x3d\x3d",B.equal)};B.notEqual=function(I,L,M){I==L&&p(I,L,M,"!\x3d",B.notEqual)};B.deepEqual=function(I,L,M){c(I,L,!1)||p(I,L,M,"deepEqual",B.deepEqual)};B.deepStrictEqual=function(I,L,M){c(I,L,!0)||
p(I,L,M,"deepStrictEqual",B.deepStrictEqual)};B.notDeepEqual=function(I,L,M){c(I,L,!1)&&p(I,L,M,"notDeepEqual",B.notDeepEqual)};B.notDeepStrictEqual=q;B.strictEqual=function(I,L,M){I!==L&&p(I,L,M,"\x3d\x3d\x3d",B.strictEqual)};B.notStrictEqual=function(I,L,M){I===L&&p(I,L,M,"!\x3d\x3d",B.notStrictEqual)};B.throws=function(I,L,M){u(!0,I,L,M)};B.doesNotThrow=function(I,L,M){u(!1,I,L,M)};B.ifError=function(I){if(I)throw I;};B.strict=w(v,B,{equal:B.strictEqual,deepEqual:B.deepStrictEqual,notEqual:B.notStrictEqual,
notDeepEqual:B.notDeepStrictEqual});B.strict.strict=B.strict;var G=Object.keys||function(I){var L=[],M;for(M in I)D.call(I,M)&&L.push(M);return L}}).call(this,"undefined"!==typeof W?W:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"object-assign":473,"util/":76}],74:[function(b,F,C){F.exports="function"===typeof Object.create?function(m,h){m.super_=h;m.prototype=Object.create(h.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}})}:function(m,h){m.super_=
h;var l=function(){};l.prototype=h.prototype;m.prototype=new l;m.prototype.constructor=m}},{}],75:[function(b,F,C){F.exports=function(m){return m&&"object"===typeof m&&"function"===typeof m.copy&&"function"===typeof m.fill&&"function"===typeof m.readUInt8}},{}],76:[function(b,F,C){(function(m,h){function l(H,J){var O={seen:[],stylize:a};3<=arguments.length&&(O.depth=arguments[2]);4<=arguments.length&&(O.colors=arguments[3]);r(J)?O.showHidden=J:J&&C._extend(O,J);w(O.showHidden)&&(O.showHidden=!1);
w(O.depth)&&(O.depth=2);w(O.colors)&&(O.colors=!1);w(O.customInspect)&&(O.customInspect=!0);O.colors&&(O.stylize=e);return k(O,H,O.depth)}function e(H,J){return(J=l.styles[J])?"["+l.colors[J][0]+"m"+H+"["+l.colors[J][1]+"m":H}function a(H,J){return H}function g(H){var J={};H.forEach(function(O,Q){J[O]=!0});return J}function k(H,J,O){if(H.customInspect&&J&&B(J.inspect)&&J.inspect!==C.inspect&&(!J.constructor||J.constructor.prototype!==J)){var Q=J.inspect(O,H);v(Q)||(Q=k(H,Q,O));return Q}if(Q=p(H,
J))return Q;var U=Object.keys(J),P=g(U);H.showHidden&&(U=Object.getOwnPropertyNames(J));if(E(J)&&(0<=U.indexOf("message")||0<=U.indexOf("description")))return n(J);if(0===U.length){if(B(J))return H.stylize("[Function"+(J.name?": "+J.name:"")+"]","special");if(y(J))return H.stylize(RegExp.prototype.toString.call(J),"regexp");if(x(J))return H.stylize(Date.prototype.toString.call(J),"date");if(E(J))return n(J)}Q="";var V=!1,Y=["{","}"];q(J)&&(V=!0,Y=["[","]"]);B(J)&&(Q=" [Function"+(J.name?": "+J.name:
"")+"]");y(J)&&(Q=" "+RegExp.prototype.toString.call(J));x(J)&&(Q=" "+Date.prototype.toUTCString.call(J));E(J)&&(Q=" "+n(J));if(0===U.length&&(!V||0==J.length))return Y[0]+Q+Y[1];if(0>O)return y(J)?H.stylize(RegExp.prototype.toString.call(J),"regexp"):H.stylize("[Object]","special");H.seen.push(J);U=V?c(H,J,O,P,U):U.map(function(ba){return f(H,J,O,P,ba,V)});H.seen.pop();return d(U,Q,Y)}function p(H,J){if(w(J))return H.stylize("undefined","undefined");if(v(J))return J="'"+JSON.stringify(J).replace(/^"|"$/g,
"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",H.stylize(J,"string");if(u(J))return H.stylize(""+J,"number");if(r(J))return H.stylize(""+J,"boolean");if(null===J)return H.stylize("null","null")}function n(H){return"["+Error.prototype.toString.call(H)+"]"}function c(H,J,O,Q,U){for(var P=[],V=0,Y=J.length;V<Y;++V)Object.prototype.hasOwnProperty.call(J,String(V))?P.push(f(H,J,O,Q,String(V),!0)):P.push("");U.forEach(function(ba){ba.match(/^\d+$/)||P.push(f(H,J,O,Q,ba,!0))});return P}function f(H,J,O,
Q,U,P){var V,Y;J=Object.getOwnPropertyDescriptor(J,U)||{value:J[U]};J.get?Y=J.set?H.stylize("[Getter/Setter]","special"):H.stylize("[Getter]","special"):J.set&&(Y=H.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(Q,U)||(V="["+U+"]");Y||(0>H.seen.indexOf(J.value)?(Y=null===O?k(H,J.value,null):k(H,J.value,O-1),-1<Y.indexOf("\n")&&(Y=P?Y.split("\n").map(function(ba){return"  "+ba}).join("\n").substr(2):"\n"+Y.split("\n").map(function(ba){return"   "+ba}).join("\n"))):Y=H.stylize("[Circular]",
"special"));if(w(V)){if(P&&U.match(/^\d+$/))return Y;V=JSON.stringify(""+U);V.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(V=V.substr(1,V.length-2),V=H.stylize(V,"name")):(V=V.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),V=H.stylize(V,"string"))}return V+": "+Y}function d(H,J,O){var Q=0;return 60<H.reduce(function(U,P){Q++;0<=P.indexOf("\n")&&Q++;return U+P.replace(/\u001b\[\d\d?m/g,"").length+1},0)?O[0]+(""===J?"":J+"\n ")+" "+H.join(",\n  ")+" "+O[1]:O[0]+J+" "+H.join(", ")+" "+O[1]}
function q(H){return Array.isArray(H)}function r(H){return"boolean"===typeof H}function u(H){return"number"===typeof H}function v(H){return"string"===typeof H}function w(H){return void 0===H}function y(H){return D(H)&&"[object RegExp]"===Object.prototype.toString.call(H)}function D(H){return"object"===typeof H&&null!==H}function x(H){return D(H)&&"[object Date]"===Object.prototype.toString.call(H)}function E(H){return D(H)&&("[object Error]"===Object.prototype.toString.call(H)||H instanceof Error)}
function B(H){return"function"===typeof H}function t(H){return 10>H?"0"+H.toString(10):H.toString(10)}function G(){var H=new Date,J=[t(H.getHours()),t(H.getMinutes()),t(H.getSeconds())].join(":");return[H.getDate(),N[H.getMonth()],J].join(" ")}var I=/%[sdj%]/g;C.format=function(H){if(!v(H)){for(var J=[],O=0;O<arguments.length;O++)J.push(l(arguments[O]));return J.join(" ")}O=1;var Q=arguments,U=Q.length;J=String(H).replace(I,function(V){if("%%"===V)return"%";if(O>=U)return V;switch(V){case "%s":return String(Q[O++]);
case "%d":return Number(Q[O++]);case "%j":try{return JSON.stringify(Q[O++])}catch(Y){return"[Circular]"}default:return V}});for(var P=Q[O];O<U;P=Q[++O])J=null!==P&&D(P)?J+(" "+l(P)):J+(" "+P);return J};C.deprecate=function(H,J){if(w(h.process))return function(){return C.deprecate(H,J).apply(this,arguments)};if(!0===m.noDeprecation)return H;var O=!1;return function(){if(!O){if(m.throwDeprecation)throw Error(J);m.traceDeprecation?console.trace(J):console.error(J);O=!0}return H.apply(this,arguments)}};
var L={},M;C.debuglog=function(H){w(M)&&(M=m.env.NODE_DEBUG||"");H=H.toUpperCase();if(!L[H])if((new RegExp("\\b"+H+"\\b","i")).test(M)){var J=m.pid;L[H]=function(){var O=C.format.apply(C,arguments);console.error("%s %d: %s",H,J,O)}}else L[H]=function(){};return L[H]};C.inspect=l;l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};l.styles={special:"cyan",number:"yellow",
"boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};C.isArray=q;C.isBoolean=r;C.isNull=function(H){return null===H};C.isNullOrUndefined=function(H){return null==H};C.isNumber=u;C.isString=v;C.isSymbol=function(H){return"symbol"===typeof H};C.isUndefined=w;C.isRegExp=y;C.isObject=D;C.isDate=x;C.isError=E;C.isFunction=B;C.isPrimitive=function(H){return null===H||"boolean"===typeof H||"number"===typeof H||"string"===typeof H||"symbol"===typeof H||"undefined"===
typeof H};C.isBuffer=b("./support/isBuffer");var N="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");C.log=function(){console.log("%s - %s",G(),C.format.apply(C,arguments))};C.inherits=b("inherits");C._extend=function(H,J){if(!J||!D(J))return H;for(var O=Object.keys(J),Q=O.length;Q--;)H[O[Q]]=J[O[Q]];return H}}).call(this,b("_process"),"undefined"!==typeof W?W:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":75,_process:500,inherits:74}],77:[function(b,
F,C){F.exports=function(m){return atob(m)}},{}],78:[function(b,F,C){function m(l){for(var e=0,a=0;a<l.length;++a)e+=l[a];return e}F.exports=function(l,e){for(var a=e.length,g=Array(a+1),k=0;k<a;++k){for(var p=Array(a+1),n=0;n<=a;++n)p[n]=l[n][k];g[k]=p}g[a]=Array(a+1);for(k=0;k<=a;++k)g[a][k]=1;l=Array(a+1);for(k=0;k<a;++k)l[k]=e[k];l[a]=1;e=h(g,l);g=m(e[a+1]);0===g&&(g=1);l=Array(a+1);for(k=0;k<=a;++k)l[k]=m(e[k])/g;return l};var h=b("robust-linear-solve")},{"robust-linear-solve":519}],79:[function(b,
F,C){function m(g){var k=g.length;if(0<k%4)throw Error("Invalid string. Length must be a multiple of 4");g=g.indexOf("\x3d");-1===g&&(g=k);return[g,g===k?0:4-g%4]}function h(g,k,p){for(var n=[],c=k;c<p;c+=3)k=(g[c]<<16&16711680)+(g[c+1]<<8&65280)+(g[c+2]&255),n.push(l[k>>18&63]+l[k>>12&63]+l[k>>6&63]+l[k&63]);return n.join("")}C.byteLength=function(g){g=m(g);var k=g[1];return 3*(g[0]+k)/4-k};C.toByteArray=function(g){var k=m(g);var p=k[0];k=k[1];var n=new a(3*(p+k)/4-k),c=0,f=0<k?p-4:p,d;for(d=0;d<
f;d+=4)p=e[g.charCodeAt(d)]<<18|e[g.charCodeAt(d+1)]<<12|e[g.charCodeAt(d+2)]<<6|e[g.charCodeAt(d+3)],n[c++]=p>>16&255,n[c++]=p>>8&255,n[c++]=p&255;2===k&&(p=e[g.charCodeAt(d)]<<2|e[g.charCodeAt(d+1)]>>4,n[c++]=p&255);1===k&&(p=e[g.charCodeAt(d)]<<10|e[g.charCodeAt(d+1)]<<4|e[g.charCodeAt(d+2)]>>2,n[c++]=p>>8&255,n[c++]=p&255);return n};C.fromByteArray=function(g){for(var k=g.length,p=k%3,n=[],c=0,f=k-p;c<f;c+=16383)n.push(h(g,c,c+16383>f?f:c+16383));1===p?(g=g[k-1],n.push(l[g>>2]+l[g<<4&63]+"\x3d\x3d")):
2===p&&(g=(g[k-2]<<8)+g[k-1],n.push(l[g>>10]+l[g>>4&63]+l[g<<2&63]+"\x3d"));return n.join("")};var l=[],e=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array;for(b=0;64>b;++b)l[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b],e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;e[45]=62;e[95]=63},{}],80:[function(b,F,C){var m=b("./lib/rationalize");F.exports=function(h,l){return m(h[0].mul(l[1]).add(l[0].mul(h[1])),h[1].mul(l[1]))}},{"./lib/rationalize":90}],
81:[function(b,F,C){F.exports=function(m,h){return m[0].mul(h[1]).cmp(h[0].mul(m[1]))}},{}],82:[function(b,F,C){var m=b("./lib/rationalize");F.exports=function(h,l){return m(h[0].mul(l[1]),h[1].mul(l[0]))}},{"./lib/rationalize":90}],83:[function(b,F,C){function m(p,n){if(h(p))return n?k(p,m(n)):[p[0].clone(),p[1].clone()];var c=0;if(l(p))p=p.clone();else if("string"===typeof p)p=a(p);else{if(0===p)return[e(0),e(1)];if(p!==Math.floor(p))for(;p!==Math.floor(p);)p*=Math.pow(2,256),c-=256;p=e(p)}if(h(n))p.mul(n[1]),
n=n[0].clone();else if(l(n))n=n.clone();else if("string"===typeof n)n=a(n);else if(n){if(n!==Math.floor(n))for(;n!==Math.floor(n);)n*=Math.pow(2,256),c+=256;n=e(n)}else n=e(1);0<c?p=p.ushln(c):0>c&&(n=n.ushln(-c));return g(p,n)}var h=b("./is-rat"),l=b("./lib/is-bn"),e=b("./lib/num-to-bn"),a=b("./lib/str-to-bn"),g=b("./lib/rationalize"),k=b("./div");F.exports=m},{"./div":82,"./is-rat":84,"./lib/is-bn":88,"./lib/num-to-bn":89,"./lib/rationalize":90,"./lib/str-to-bn":91}],84:[function(b,F,C){var m=b("./lib/is-bn");
F.exports=function(h){return Array.isArray(h)&&2===h.length&&m(h[0])&&m(h[1])}},{"./lib/is-bn":88}],85:[function(b,F,C){var m=b("bn.js");F.exports=function(h){return h.cmp(new m(0))}},{"bn.js":99}],86:[function(b,F,C){var m=b("./bn-sign");F.exports=function(h){var l=h.length,e=h.words,a=0;if(1===l)a=e[0];else if(2===l)a=e[0]+67108864*e[1];else for(var g=0;g<l;g++)a+=e[g]*Math.pow(67108864,g);return m(h)*a}},{"./bn-sign":85}],87:[function(b,F,C){var m=b("double-bits"),h=b("bit-twiddle").countTrailingZeros;
F.exports=function(l){var e=h(m.lo(l));if(32>e)return e;l=h(m.hi(l));return 20<l?52:l+32}},{"bit-twiddle":97,"double-bits":173}],88:[function(b,F,C){b("bn.js");F.exports=function(m){return m&&"object"===typeof m&&!!m.words}},{"bn.js":99}],89:[function(b,F,C){var m=b("bn.js"),h=b("double-bits");F.exports=function(l){var e=h.exponent(l);return 52>e?new m(l):(new m(l*Math.pow(2,52-e))).ushln(e-52)}},{"bn.js":99,"double-bits":173}],90:[function(b,F,C){var m=b("./num-to-bn"),h=b("./bn-sign");F.exports=
function(l,e){var a=h(l),g=h(e);if(0===a)return[m(0),m(1)];if(0===g)return[m(0),m(0)];0>g&&(l=l.neg(),e=e.neg());a=l.gcd(e);return a.cmpn(1)?[l.div(a),e.div(a)]:[l,e]}},{"./bn-sign":85,"./num-to-bn":89}],91:[function(b,F,C){var m=b("bn.js");F.exports=function(h){return new m(h)}},{"bn.js":99}],92:[function(b,F,C){var m=b("./lib/rationalize");F.exports=function(h,l){return m(h[0].mul(l[0]),h[1].mul(l[1]))}},{"./lib/rationalize":90}],93:[function(b,F,C){var m=b("./lib/bn-sign");F.exports=function(h){return m(h[0])*
m(h[1])}},{"./lib/bn-sign":85}],94:[function(b,F,C){var m=b("./lib/rationalize");F.exports=function(h,l){return m(h[0].mul(l[1]).sub(h[1].mul(l[0])),h[1].mul(l[1]))}},{"./lib/rationalize":90}],95:[function(b,F,C){var m=b("./lib/bn-to-num"),h=b("./lib/ctz");F.exports=function(l){var e=l[0];l=l[1];if(0===e.cmpn(0))return 0;var a=e.abs().divmod(l.abs()),g=m(a.div);a=a.mod;e=e.negative!==l.negative?-1:1;if(0===a.cmpn(0))return e*g;if(g){var k=h(g)+4;l=m(a.ushln(k).divRound(l));return e*(g+l*Math.pow(2,
-k))}g=l.bitLength()-a.bitLength()+53;l=m(a.ushln(g).divRound(l));if(1023>g)return e*l*Math.pow(2,-g);l*=Math.pow(2,-1023);return e*l*Math.pow(2,1023-g)}},{"./lib/bn-to-num":86,"./lib/ctz":87}],96:[function(b,F,C){function m(l,e,a,g,k){l=["function ",l,"(a,l,h,",g.join(","),"){",k?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da[m]"];k?0>e.indexOf("c")?l.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):l.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):
l.push(";if(",e,"){i\x3dm;");a?l.push("l\x3dm+1}else{h\x3dm-1}"):l.push("h\x3dm-1}else{l\x3dm+1}");l.push("}");k?l.push("return -1};"):l.push("return i};");return l.join("")}function h(l,e,a,g){return(new Function([m("A","x"+l+"y",e,["y"],g),m("P","c(x,y)"+l+"0",e,["y","c"],g),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dvoid 0)?0:l|0,(h\x3d\x3d\x3dvoid 0)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dvoid 0)?0:c|0,(l\x3d\x3d\x3dvoid 0)?a.length-1:l|0,y)}}return dispatchBsearch",
a].join("")))()}F.exports={ge:h("\x3e\x3d",!1,"GE"),gt:h("\x3e",!1,"GT"),lt:h("\x3c",!0,"LT"),le:h("\x3c\x3d",!0,"LE"),eq:h("-",!0,"EQ",!0)}},{}],97:[function(b,F,C){function m(l){var e=32;(l&=-l)&&e--;l&65535&&(e-=16);l&16711935&&(e-=8);l&252645135&&(e-=4);l&858993459&&(e-=2);l&1431655765&&--e;return e}"use restrict";C.INT_BITS=32;C.INT_MAX=2147483647;C.INT_MIN=-2147483648;C.sign=function(l){return(0<l)-(0>l)};C.abs=function(l){var e=l>>31;return(l^e)-e};C.min=function(l,e){return e^(l^e)&-(l<e)};
C.max=function(l,e){return l^(l^e)&-(l<e)};C.isPow2=function(l){return!(l&l-1)&&!!l};C.log2=function(l){var e=(65535<l)<<4;l>>>=e;var a=(255<l)<<3;l>>>=a;e|=a;a=(15<l)<<2;l>>>=a;e|=a;a=(3<l)<<1;return e|a|l>>>a>>1};C.log10=function(l){return 1E9<=l?9:1E8<=l?8:1E7<=l?7:1E6<=l?6:1E5<=l?5:1E4<=l?4:1E3<=l?3:100<=l?2:10<=l?1:0};C.popCount=function(l){l-=l>>>1&1431655765;l=(l&858993459)+(l>>>2&858993459);return 16843009*(l+(l>>>4)&252645135)>>>24};C.countTrailingZeros=m;C.nextPow2=function(l){l+=0===l;
--l;l|=l>>>1;l|=l>>>2;l|=l>>>4;l|=l>>>8;return(l|l>>>16)+1};C.prevPow2=function(l){l|=l>>>1;l|=l>>>2;l|=l>>>4;l|=l>>>8;l|=l>>>16;return l-(l>>>1)};C.parity=function(l){l^=l>>>16;l^=l>>>8;return 27030>>>((l^l>>>4)&15)&1};var h=Array(256);(function(l){for(var e=0;256>e;++e){var a=e,g=e,k=7;for(a>>>=1;a;a>>>=1)g<<=1,g|=a&1,--k;l[e]=g<<k&255}})(h);C.reverse=function(l){return h[l&255]<<24|h[l>>>8&255]<<16|h[l>>>16&255]<<8|h[l>>>24&255]};C.interleave2=function(l,e){l&=65535;l=(l|l<<8)&16711935;l=(l|l<<
4)&252645135;l=(l|l<<2)&858993459;e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;return(l|l<<1)&1431655765|((e|e<<1)&1431655765)<<1};C.deinterleave2=function(l,e){l=l>>>e&1431655765;l=(l|l>>>1)&858993459;l=(l|l>>>2)&252645135;l=(l|l>>>4)&16711935;return((l|l>>>16)&65535)<<16>>16};C.interleave3=function(l,e,a){l&=1023;l=(l|l<<16)&4278190335;l=(l|l<<8)&251719695;l=(l|l<<4)&3272356035;e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;a&=1023;a=(a|a<<16)&
4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return(l|l<<2)&1227133513|((e|e<<2)&1227133513)<<1|((a|a<<2)&1227133513)<<2};C.deinterleave3=function(l,e){l=l>>>e&1227133513;l=(l|l>>>2)&3272356035;l=(l|l>>>4)&251719695;l=(l|l>>>8)&4278190335;return((l|l>>>16)&1023)<<22>>22};C.nextCombination=function(l){var e=l|l-1;return e+1|(~e&-~e)-1>>>m(l)+1}},{}],98:[function(b,F,C){function m(a,g,k,p,n,c,f){for(var d=0;d<g;d++){for(var q=0;q<k;q++)p[q]=a[q*g+d];h(p,n,c,f,k);for(q=0;q<k;q++)a[q*g+d]=n[q]}for(q=
0;q<k;q++){for(d=0;d<g;d++)p[d]=a[q*g+d];h(p,n,c,f,g);for(d=0;d<g;d++)a[q*g+d]=Math.sqrt(n[d])}}function h(a,g,k,p,n){k[0]=0;p[0]=-e;p[1]=+e;for(var c=1,f=0;c<n;c++){for(var d=(a[c]+c*c-(a[k[f]]+k[f]*k[f]))/(2*c-2*k[f]);d<=p[f];)f--,d=(a[c]+c*c-(a[k[f]]+k[f]*k[f]))/(2*c-2*k[f]);f++;k[f]=c;p[f]=d;p[f+1]=+e}for(f=c=0;c<n;c++){for(;p[f+1]<c;)f++;g[c]=(c-k[f])*(c-k[f])+a[k[f]]}}var l=b("clamp");F.exports=function(a,g){g||(g={});var k=null==g.cutoff?.25:g.cutoff,p=null==g.radius?8:g.radius,n=g.channel||
0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!g.width||!g.height)throw Error("For raw data width and height should be provided by options");var c=g.width;var f=g.height;var d=a;var q=g.stride?g.stride:Math.floor(a.length/c/f)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(f=a,d=f.getContext("2d"),c=f.width,f=f.height,d=d.getImageData(0,0,c,f),d=d.data,q=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(f=a.canvas,c=f.width,f=f.height,d=a.getImageData(0,
0,c,f),d=d.data,q=4):window.ImageData&&a instanceof window.ImageData&&(c=a.width,f=a.height,d=a.data,q=4);var r=Math.max(c,f);if(window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array){var u=d;d=Array(c*f);a=0;for(g=u.length;a<g;a++)d[a]=u[a*q+n]/255}else if(1!==q)throw Error("Raw data can have only 1 value per pixel");n=Array(c*f);q=Array(c*f);u=Array(r);var v=Array(r),w=Array(r+1);r=Array(r);a=0;for(g=c*f;a<g;a++){var y=d[a];n[a]=1===y?
0:0===y?e:Math.pow(Math.max(0,.5-y),2);q[a]=1===y?e:0===y?0:Math.pow(Math.max(0,y-.5),2)}m(n,c,f,u,v,r,w);m(q,c,f,u,v,r,w);d=window.Float32Array?new Float32Array(c*f):Array(c*f);a=0;for(g=c*f;a<g;a++)d[a]=l(1-((n[a]-q[a])/p+k),0,1);return d};var e=1E20},{clamp:120}],99:[function(b,F,C){(function(m,h){function l(t,G){if(!t)throw Error(G||"Assertion failed");}function e(t,G){t.super_=G;var I=function(){};I.prototype=G.prototype;t.prototype=new I;t.prototype.constructor=t}function a(t,G,I){if(a.isBN(t))return t;
this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==t){if("le"===G||"be"===G)I=G,G=10;this._init(t||0,G||10,I||"be")}}function g(t,G,I){var L=0;for(I=Math.min(t.length,I);G<I;G++){var M=t.charCodeAt(G)-48;L<<=4;L=49<=M&&54>=M?L|M-49+10:17<=M&&22>=M?L|M-17+10:L|M&15}return L}function k(t,G,I,L){var M=0;for(I=Math.min(t.length,I);G<I;G++){var N=t.charCodeAt(G)-48;M*=L;M=49<=N?M+(N-49+10):17<=N?M+(N-17+10):M+N}return M}function p(t,G,I){I.negative=G.negative^t.negative;var L=t.length+
G.length|0;I.length=L;L=L-1|0;var M=t.words[0]|0,N=G.words[0]|0;M*=N;var H=M/67108864|0;I.words[0]=M&67108863;for(var J=1;J<L;J++){var O=H>>>26,Q=H&67108863;H=Math.min(J,G.length-1);for(var U=Math.max(0,J-t.length+1);U<=H;U++)M=t.words[J-U|0]|0,N=G.words[U]|0,M=M*N+Q,O+=M/67108864|0,Q=M&67108863;I.words[J]=Q|0;H=O|0}0!==H?I.words[J]=H|0:I.length--;return I.strip()}function n(t,G){this.x=t;this.y=G}function c(t,G){this.name=t;this.p=new a(G,16);this.n=this.p.bitLength();this.k=(new a(1)).iushln(this.n).isub(this.p);
this.tmp=this._tmp()}function f(){c.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function d(){c.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function q(){c.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function r(){c.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function u(t){"string"===typeof t?(t=a._prime(t),this.m=t.p,this.prime=t):(l(t.gtn(1),
"modulus must be greater than 1"),this.m=t,this.prime=null)}function v(t){u.call(this,t);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new a(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof m?m.exports=a:h.BN=a;a.BN=a;a.wordSize=26;try{var w=b("buffer").Buffer}catch(t){}a.isBN=function(t){return t instanceof
a?!0:null!==t&&"object"===typeof t&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)};a.max=function(t,G){return 0<t.cmp(G)?t:G};a.min=function(t,G){return 0>t.cmp(G)?t:G};a.prototype._init=function(t,G,I){if("number"===typeof t)return this._initNumber(t,G,I);if("object"===typeof t)return this._initArray(t,G,I);"hex"===G&&(G=16);l(G===(G|0)&&2<=G&&36>=G);t=t.toString().replace(/\s+/g,"");var L=0;"-"===t[0]&&L++;16===G?this._parseHex(t,L):this._parseBase(t,G,L);"-"===t[0]&&(this.negative=
1);this.strip();"le"===I&&this._initArray(this.toArray(),G,I)};a.prototype._initNumber=function(t,G,I){0>t&&(this.negative=1,t=-t);67108864>t?(this.words=[t&67108863],this.length=1):4503599627370496>t?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(l(9007199254740992>t),this.words=[t&67108863,t/67108864&67108863,1],this.length=3);"le"===I&&this._initArray(this.toArray(),G,I)};a.prototype._initArray=function(t,G,I){l("number"===typeof t.length);if(0>=t.length)return this.words=[0],this.length=
1,this;this.length=Math.ceil(t.length/3);this.words=Array(this.length);for(G=0;G<this.length;G++)this.words[G]=0;var L=0;if("be"===I)for(G=t.length-1,I=0;0<=G;G-=3){var M=t[G]|t[G-1]<<8|t[G-2]<<16;this.words[I]|=M<<L&67108863;this.words[I+1]=M>>>26-L&67108863;L+=24;26<=L&&(L-=26,I++)}else if("le"===I)for(I=G=0;G<t.length;G+=3)M=t[G]|t[G+1]<<8|t[G+2]<<16,this.words[I]|=M<<L&67108863,this.words[I+1]=M>>>26-L&67108863,L+=24,26<=L&&(L-=26,I++);return this.strip()};a.prototype._parseHex=function(t,G){this.length=
Math.ceil((t.length-G)/6);this.words=Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var L,M=0;I=t.length-6;for(L=0;I>=G;I-=6){var N=g(t,I,I+6);this.words[L]|=N<<M&67108863;this.words[L+1]|=N>>>26-M&4194303;M+=24;26<=M&&(M-=26,L++)}I+6!==G&&(N=g(t,G,I+6),this.words[L]|=N<<M&67108863,this.words[L+1]|=N>>>26-M&4194303);this.strip()};a.prototype._parseBase=function(t,G,I){this.words=[0];this.length=1;for(var L=0,M=1;67108863>=M;M*=G)L++;L--;M=M/G|0;var N=t.length-I,H=N%L;N=Math.min(N,
N-H)+I;for(var J=I;J<N;J+=L)I=k(t,J,J+L,G),this.imuln(M),67108864>this.words[0]+I?this.words[0]+=I:this._iaddn(I);if(0!==H){L=1;I=k(t,J,t.length,G);for(J=0;J<H;J++)L*=G;this.imuln(L);67108864>this.words[0]+I?this.words[0]+=I:this._iaddn(I)}};a.prototype.copy=function(t){t.words=Array(this.length);for(var G=0;G<this.length;G++)t.words[G]=this.words[G];t.length=this.length;t.negative=this.negative;t.red=this.red};a.prototype.clone=function(){var t=new a(null);this.copy(t);return t};a.prototype._expand=
function(t){for(;this.length<t;)this.words[this.length++]=0;return this};a.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};a.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};a.prototype.inspect=function(){return(this.red?"\x3cBN-R: ":"\x3cBN: ")+this.toString(16)+"\x3e"};var y=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(t,G){t=t||10;G=G|0||1;if(16===t||"hex"===t){var I="";for(var L=t=0,M=0;M<this.length;M++){var N=
this.words[M],H=((N<<t|L)&16777215).toString(16);L=N>>>24-t&16777215;I=0!==L||M!==this.length-1?y[6-H.length]+H+I:H+I;t+=2;26<=t&&(t-=26,M--)}for(0!==L&&(I=L.toString(16)+I);0!==I.length%G;)I="0"+I;0!==this.negative&&(I="-"+I);return I}if(t===(t|0)&&2<=t&&36>=t){L=D[t];M=x[t];I="";N=this.clone();for(N.negative=0;!N.isZero();)H=N.modn(M).toString(t),N=N.idivn(M),I=N.isZero()?H+I:y[L-H.length]+H+I;for(this.isZero()&&(I="0"+I);0!==I.length%G;)I="0"+I;0!==this.negative&&(I="-"+I);return I}l(!1,"Base should be between 2 and 36")};
a.prototype.toNumber=function(){var t=this.words[0];2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:2<this.length&&l(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-t:t};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(t,G){l("undefined"!==typeof w);return this.toArrayLike(w,t,G)};a.prototype.toArray=function(t,G){return this.toArrayLike(Array,t,G)};a.prototype.toArrayLike=
function(t,G,I){var L=this.byteLength();I=I||Math.max(1,L);l(L<=I,"byte array longer than desired length");l(0<I,"Requested array length \x3c\x3d 0");this.strip();var M="le"===G;t=new t(I);G=this.clone();if(M){for(M=0;!G.isZero();M++)L=G.andln(255),G.iushrn(8),t[M]=L;for(;M<I;M++)t[M]=0}else{for(M=0;M<I-L;M++)t[M]=0;for(M=0;!G.isZero();M++)L=G.andln(255),G.iushrn(8),t[I-M-1]=L}return t};a.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var G=0;4096<=t&&(G+=13,t>>>=
13);64<=t&&(G+=7,t>>>=7);8<=t&&(G+=4,t>>>=4);2<=t&&(G+=2,t>>>=2);return G+t};a.prototype._zeroBits=function(t){if(0===t)return 26;var G=0;0===(t&8191)&&(G+=13,t>>>=13);0===(t&127)&&(G+=7,t>>>=7);0===(t&15)&&(G+=4,t>>>=4);0===(t&3)&&(G+=2,t>>>=2);0===(t&1)&&G++;return G};a.prototype.bitLength=function(){var t=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+t};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,G=0;G<this.length;G++){var I=this._zeroBits(this.words[G]);
t+=I;if(26!==I)break}return t};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()};a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==this.negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};a.prototype.iuor=
function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var G=0;G<t.length;G++)this.words[G]|=t.words[G];return this.strip()};a.prototype.ior=function(t){l(0===(this.negative|t.negative));return this.iuor(t)};a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)};a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)};a.prototype.iuand=function(t){var G=this.length>t.length?t:this;for(var I=0;I<G.length;I++)this.words[I]&=
t.words[I];this.length=G.length;return this.strip()};a.prototype.iand=function(t){l(0===(this.negative|t.negative));return this.iuand(t)};a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)};a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)};a.prototype.iuxor=function(t){if(this.length>t.length)var G=this;else G=t,t=this;for(var I=0;I<t.length;I++)this.words[I]=G.words[I]^t.words[I];if(this!==G)for(;I<
G.length;I++)this.words[I]=G.words[I];this.length=G.length;return this.strip()};a.prototype.ixor=function(t){l(0===(this.negative|t.negative));return this.iuxor(t)};a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)};a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)};a.prototype.inotn=function(t){l("number"===typeof t&&0<=t);var G=Math.ceil(t/26)|0;t%=26;this._expand(G);0<t&&G--;for(var I=0;I<G;I++)this.words[I]=
~this.words[I]&67108863;0<t&&(this.words[I]=~this.words[I]&67108863>>26-t);return this.strip()};a.prototype.notn=function(t){return this.clone().inotn(t)};a.prototype.setn=function(t,G){l("number"===typeof t&&0<=t);var I=t/26|0;t%=26;this._expand(I+1);this.words[I]=G?this.words[I]|1<<t:this.words[I]&~(1<<t);return this.strip()};a.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative){t.negative=
0;var G=this.isub(t);t.negative=1;return G._normSign()}if(this.length>t.length)var I=this;else I=t,t=this;for(var L=G=0;L<t.length;L++)G=(I.words[L]|0)+(t.words[L]|0)+G,this.words[L]=G&67108863,G>>>=26;for(;0!==G&&L<I.length;L++)G=(I.words[L]|0)+G,this.words[L]=G&67108863,G>>>=26;this.length=I.length;if(0!==G)this.words[this.length]=G,this.length++;else if(I!==this)for(;L<I.length;L++)this.words[L]=I.words[L];return this};a.prototype.add=function(t){if(0!==t.negative&&0===this.negative){t.negative=
0;var G=this.sub(t);t.negative^=1;return G}return 0===t.negative&&0!==this.negative?(this.negative=0,G=t.sub(this),this.negative=1,G):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)};a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var G=this.iadd(t);t.negative=1;return G._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();G=this.cmp(t);if(0===G)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<G)var I=this;
else I=t,t=this;for(var L=0,M=0;M<t.length;M++)G=(I.words[M]|0)-(t.words[M]|0)+L,L=G>>26,this.words[M]=G&67108863;for(;0!==L&&M<I.length;M++)G=(I.words[M]|0)+L,L=G>>26,this.words[M]=G&67108863;if(0===L&&M<I.length&&I!==this)for(;M<I.length;M++)this.words[M]=I.words[M];this.length=Math.max(this.length,M);I!==this&&(this.negative=1);return this.strip()};a.prototype.sub=function(t){return this.clone().isub(t)};var E=function(t,G,I){var L=t.words,M=G.words,N=I.words,H=0,J=L[0]|0,O=J&8191,Q=J>>>13,U=L[1]|
0;J=U&8191;var P=U>>>13,V=L[2]|0;U=V&8191;var Y=V>>>13,ba=L[3]|0;V=ba&8191;var ea=ba>>>13,ca=L[4]|0;ba=ca&8191;var ia=ca>>>13,fa=L[5]|0;ca=fa&8191;var ha=fa>>>13,na=L[6]|0;fa=na&8191;var pa=na>>>13,ra=L[7]|0;na=ra&8191;var ta=ra>>>13,oa=L[8]|0;ra=oa&8191;oa>>>=13;var ua=L[9]|0;L=ua&8191;ua>>>=13;var ka=M[0]|0,sa=ka&8191,ya=ka>>>13,qa=M[1]|0;ka=qa&8191;var xa=qa>>>13,Ca=M[2]|0;qa=Ca&8191;var Ja=Ca>>>13,eb=M[3]|0;Ca=eb&8191;var Ra=eb>>>13,Wa=M[4]|0;eb=Wa&8191;var Ea=Wa>>>13,Ia=M[5]|0;Wa=Ia&8191;var Qa=
Ia>>>13,lb=M[6]|0;Ia=lb&8191;var hb=lb>>>13,Fa=M[7]|0;lb=Fa&8191;var La=Fa>>>13,Oa=M[8]|0;Fa=Oa&8191;Oa>>>=13;var fb=M[9]|0;M=fb&8191;fb>>>=13;I.negative=t.negative^G.negative;I.length=19;var bb=Math.imul(O,sa);t=Math.imul(O,ya);t=t+Math.imul(Q,sa)|0;G=Math.imul(Q,ya);var Pa=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(Pa>>>26)|0;Pa&=67108863;bb=Math.imul(J,sa);t=Math.imul(J,ya);t=t+Math.imul(P,sa)|0;G=Math.imul(P,ya);bb=bb+Math.imul(O,ka)|0;t=t+Math.imul(O,xa)|0;t=t+Math.imul(Q,ka)|0;G=G+Math.imul(Q,
xa)|0;var Ta=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(Ta>>>26)|0;Ta&=67108863;bb=Math.imul(U,sa);t=Math.imul(U,ya);t=t+Math.imul(Y,sa)|0;G=Math.imul(Y,ya);bb=bb+Math.imul(J,ka)|0;t=t+Math.imul(J,xa)|0;t=t+Math.imul(P,ka)|0;G=G+Math.imul(P,xa)|0;bb=bb+Math.imul(O,qa)|0;t=t+Math.imul(O,Ja)|0;t=t+Math.imul(Q,qa)|0;G=G+Math.imul(Q,Ja)|0;var Ya=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(Ya>>>26)|0;Ya&=67108863;bb=Math.imul(V,sa);t=Math.imul(V,ya);t=t+Math.imul(ea,sa)|0;G=Math.imul(ea,ya);bb=bb+Math.imul(U,
ka)|0;t=t+Math.imul(U,xa)|0;t=t+Math.imul(Y,ka)|0;G=G+Math.imul(Y,xa)|0;bb=bb+Math.imul(J,qa)|0;t=t+Math.imul(J,Ja)|0;t=t+Math.imul(P,qa)|0;G=G+Math.imul(P,Ja)|0;bb=bb+Math.imul(O,Ca)|0;t=t+Math.imul(O,Ra)|0;t=t+Math.imul(Q,Ca)|0;G=G+Math.imul(Q,Ra)|0;var nb=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(nb>>>26)|0;nb&=67108863;bb=Math.imul(ba,sa);t=Math.imul(ba,ya);t=t+Math.imul(ia,sa)|0;G=Math.imul(ia,ya);bb=bb+Math.imul(V,ka)|0;t=t+Math.imul(V,xa)|0;t=t+Math.imul(ea,ka)|0;G=G+Math.imul(ea,xa)|0;bb=
bb+Math.imul(U,qa)|0;t=t+Math.imul(U,Ja)|0;t=t+Math.imul(Y,qa)|0;G=G+Math.imul(Y,Ja)|0;bb=bb+Math.imul(J,Ca)|0;t=t+Math.imul(J,Ra)|0;t=t+Math.imul(P,Ca)|0;G=G+Math.imul(P,Ra)|0;bb=bb+Math.imul(O,eb)|0;t=t+Math.imul(O,Ea)|0;t=t+Math.imul(Q,eb)|0;G=G+Math.imul(Q,Ea)|0;var Da=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(Da>>>26)|0;Da&=67108863;bb=Math.imul(ca,sa);t=Math.imul(ca,ya);t=t+Math.imul(ha,sa)|0;G=Math.imul(ha,ya);bb=bb+Math.imul(ba,ka)|0;t=t+Math.imul(ba,xa)|0;t=t+Math.imul(ia,ka)|0;G=G+Math.imul(ia,
xa)|0;bb=bb+Math.imul(V,qa)|0;t=t+Math.imul(V,Ja)|0;t=t+Math.imul(ea,qa)|0;G=G+Math.imul(ea,Ja)|0;bb=bb+Math.imul(U,Ca)|0;t=t+Math.imul(U,Ra)|0;t=t+Math.imul(Y,Ca)|0;G=G+Math.imul(Y,Ra)|0;bb=bb+Math.imul(J,eb)|0;t=t+Math.imul(J,Ea)|0;t=t+Math.imul(P,eb)|0;G=G+Math.imul(P,Ea)|0;bb=bb+Math.imul(O,Wa)|0;t=t+Math.imul(O,Qa)|0;t=t+Math.imul(Q,Wa)|0;G=G+Math.imul(Q,Qa)|0;var Ha=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(Ha>>>26)|0;Ha&=67108863;bb=Math.imul(fa,sa);t=Math.imul(fa,ya);t=t+Math.imul(pa,sa)|
0;G=Math.imul(pa,ya);bb=bb+Math.imul(ca,ka)|0;t=t+Math.imul(ca,xa)|0;t=t+Math.imul(ha,ka)|0;G=G+Math.imul(ha,xa)|0;bb=bb+Math.imul(ba,qa)|0;t=t+Math.imul(ba,Ja)|0;t=t+Math.imul(ia,qa)|0;G=G+Math.imul(ia,Ja)|0;bb=bb+Math.imul(V,Ca)|0;t=t+Math.imul(V,Ra)|0;t=t+Math.imul(ea,Ca)|0;G=G+Math.imul(ea,Ra)|0;bb=bb+Math.imul(U,eb)|0;t=t+Math.imul(U,Ea)|0;t=t+Math.imul(Y,eb)|0;G=G+Math.imul(Y,Ea)|0;bb=bb+Math.imul(J,Wa)|0;t=t+Math.imul(J,Qa)|0;t=t+Math.imul(P,Wa)|0;G=G+Math.imul(P,Qa)|0;bb=bb+Math.imul(O,Ia)|
0;t=t+Math.imul(O,hb)|0;t=t+Math.imul(Q,Ia)|0;G=G+Math.imul(Q,hb)|0;var ab=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(ab>>>26)|0;ab&=67108863;bb=Math.imul(na,sa);t=Math.imul(na,ya);t=t+Math.imul(ta,sa)|0;G=Math.imul(ta,ya);bb=bb+Math.imul(fa,ka)|0;t=t+Math.imul(fa,xa)|0;t=t+Math.imul(pa,ka)|0;G=G+Math.imul(pa,xa)|0;bb=bb+Math.imul(ca,qa)|0;t=t+Math.imul(ca,Ja)|0;t=t+Math.imul(ha,qa)|0;G=G+Math.imul(ha,Ja)|0;bb=bb+Math.imul(ba,Ca)|0;t=t+Math.imul(ba,Ra)|0;t=t+Math.imul(ia,Ca)|0;G=G+Math.imul(ia,Ra)|
0;bb=bb+Math.imul(V,eb)|0;t=t+Math.imul(V,Ea)|0;t=t+Math.imul(ea,eb)|0;G=G+Math.imul(ea,Ea)|0;bb=bb+Math.imul(U,Wa)|0;t=t+Math.imul(U,Qa)|0;t=t+Math.imul(Y,Wa)|0;G=G+Math.imul(Y,Qa)|0;bb=bb+Math.imul(J,Ia)|0;t=t+Math.imul(J,hb)|0;t=t+Math.imul(P,Ia)|0;G=G+Math.imul(P,hb)|0;bb=bb+Math.imul(O,lb)|0;t=t+Math.imul(O,La)|0;t=t+Math.imul(Q,lb)|0;G=G+Math.imul(Q,La)|0;var ib=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(ib>>>26)|0;ib&=67108863;bb=Math.imul(ra,sa);t=Math.imul(ra,ya);t=t+Math.imul(oa,sa)|0;
G=Math.imul(oa,ya);bb=bb+Math.imul(na,ka)|0;t=t+Math.imul(na,xa)|0;t=t+Math.imul(ta,ka)|0;G=G+Math.imul(ta,xa)|0;bb=bb+Math.imul(fa,qa)|0;t=t+Math.imul(fa,Ja)|0;t=t+Math.imul(pa,qa)|0;G=G+Math.imul(pa,Ja)|0;bb=bb+Math.imul(ca,Ca)|0;t=t+Math.imul(ca,Ra)|0;t=t+Math.imul(ha,Ca)|0;G=G+Math.imul(ha,Ra)|0;bb=bb+Math.imul(ba,eb)|0;t=t+Math.imul(ba,Ea)|0;t=t+Math.imul(ia,eb)|0;G=G+Math.imul(ia,Ea)|0;bb=bb+Math.imul(V,Wa)|0;t=t+Math.imul(V,Qa)|0;t=t+Math.imul(ea,Wa)|0;G=G+Math.imul(ea,Qa)|0;bb=bb+Math.imul(U,
Ia)|0;t=t+Math.imul(U,hb)|0;t=t+Math.imul(Y,Ia)|0;G=G+Math.imul(Y,hb)|0;bb=bb+Math.imul(J,lb)|0;t=t+Math.imul(J,La)|0;t=t+Math.imul(P,lb)|0;G=G+Math.imul(P,La)|0;bb=bb+Math.imul(O,Fa)|0;t=t+Math.imul(O,Oa)|0;t=t+Math.imul(Q,Fa)|0;G=G+Math.imul(Q,Oa)|0;var ob=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(ob>>>26)|0;ob&=67108863;bb=Math.imul(L,sa);t=Math.imul(L,ya);t=t+Math.imul(ua,sa)|0;G=Math.imul(ua,ya);bb=bb+Math.imul(ra,ka)|0;t=t+Math.imul(ra,xa)|0;t=t+Math.imul(oa,ka)|0;G=G+Math.imul(oa,xa)|0;bb=
bb+Math.imul(na,qa)|0;t=t+Math.imul(na,Ja)|0;t=t+Math.imul(ta,qa)|0;G=G+Math.imul(ta,Ja)|0;bb=bb+Math.imul(fa,Ca)|0;t=t+Math.imul(fa,Ra)|0;t=t+Math.imul(pa,Ca)|0;G=G+Math.imul(pa,Ra)|0;bb=bb+Math.imul(ca,eb)|0;t=t+Math.imul(ca,Ea)|0;t=t+Math.imul(ha,eb)|0;G=G+Math.imul(ha,Ea)|0;bb=bb+Math.imul(ba,Wa)|0;t=t+Math.imul(ba,Qa)|0;t=t+Math.imul(ia,Wa)|0;G=G+Math.imul(ia,Qa)|0;bb=bb+Math.imul(V,Ia)|0;t=t+Math.imul(V,hb)|0;t=t+Math.imul(ea,Ia)|0;G=G+Math.imul(ea,hb)|0;bb=bb+Math.imul(U,lb)|0;t=t+Math.imul(U,
La)|0;t=t+Math.imul(Y,lb)|0;G=G+Math.imul(Y,La)|0;bb=bb+Math.imul(J,Fa)|0;t=t+Math.imul(J,Oa)|0;t=t+Math.imul(P,Fa)|0;G=G+Math.imul(P,Oa)|0;bb=bb+Math.imul(O,M)|0;t=t+Math.imul(O,fb)|0;t=t+Math.imul(Q,M)|0;G=G+Math.imul(Q,fb)|0;O=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(O>>>26)|0;O&=67108863;bb=Math.imul(L,ka);t=Math.imul(L,xa);t=t+Math.imul(ua,ka)|0;G=Math.imul(ua,xa);bb=bb+Math.imul(ra,qa)|0;t=t+Math.imul(ra,Ja)|0;t=t+Math.imul(oa,qa)|0;G=G+Math.imul(oa,Ja)|0;bb=bb+Math.imul(na,Ca)|0;t=t+Math.imul(na,
Ra)|0;t=t+Math.imul(ta,Ca)|0;G=G+Math.imul(ta,Ra)|0;bb=bb+Math.imul(fa,eb)|0;t=t+Math.imul(fa,Ea)|0;t=t+Math.imul(pa,eb)|0;G=G+Math.imul(pa,Ea)|0;bb=bb+Math.imul(ca,Wa)|0;t=t+Math.imul(ca,Qa)|0;t=t+Math.imul(ha,Wa)|0;G=G+Math.imul(ha,Qa)|0;bb=bb+Math.imul(ba,Ia)|0;t=t+Math.imul(ba,hb)|0;t=t+Math.imul(ia,Ia)|0;G=G+Math.imul(ia,hb)|0;bb=bb+Math.imul(V,lb)|0;t=t+Math.imul(V,La)|0;t=t+Math.imul(ea,lb)|0;G=G+Math.imul(ea,La)|0;bb=bb+Math.imul(U,Fa)|0;t=t+Math.imul(U,Oa)|0;t=t+Math.imul(Y,Fa)|0;G=G+Math.imul(Y,
Oa)|0;bb=bb+Math.imul(J,M)|0;t=t+Math.imul(J,fb)|0;t=t+Math.imul(P,M)|0;G=G+Math.imul(P,fb)|0;J=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(J>>>26)|0;J&=67108863;bb=Math.imul(L,qa);t=Math.imul(L,Ja);t=t+Math.imul(ua,qa)|0;G=Math.imul(ua,Ja);bb=bb+Math.imul(ra,Ca)|0;t=t+Math.imul(ra,Ra)|0;t=t+Math.imul(oa,Ca)|0;G=G+Math.imul(oa,Ra)|0;bb=bb+Math.imul(na,eb)|0;t=t+Math.imul(na,Ea)|0;t=t+Math.imul(ta,eb)|0;G=G+Math.imul(ta,Ea)|0;bb=bb+Math.imul(fa,Wa)|0;t=t+Math.imul(fa,Qa)|0;t=t+Math.imul(pa,Wa)|0;G=
G+Math.imul(pa,Qa)|0;bb=bb+Math.imul(ca,Ia)|0;t=t+Math.imul(ca,hb)|0;t=t+Math.imul(ha,Ia)|0;G=G+Math.imul(ha,hb)|0;bb=bb+Math.imul(ba,lb)|0;t=t+Math.imul(ba,La)|0;t=t+Math.imul(ia,lb)|0;G=G+Math.imul(ia,La)|0;bb=bb+Math.imul(V,Fa)|0;t=t+Math.imul(V,Oa)|0;t=t+Math.imul(ea,Fa)|0;G=G+Math.imul(ea,Oa)|0;bb=bb+Math.imul(U,M)|0;t=t+Math.imul(U,fb)|0;t=t+Math.imul(Y,M)|0;G=G+Math.imul(Y,fb)|0;U=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(U>>>26)|0;U&=67108863;bb=Math.imul(L,Ca);t=Math.imul(L,Ra);t=t+Math.imul(ua,
Ca)|0;G=Math.imul(ua,Ra);bb=bb+Math.imul(ra,eb)|0;t=t+Math.imul(ra,Ea)|0;t=t+Math.imul(oa,eb)|0;G=G+Math.imul(oa,Ea)|0;bb=bb+Math.imul(na,Wa)|0;t=t+Math.imul(na,Qa)|0;t=t+Math.imul(ta,Wa)|0;G=G+Math.imul(ta,Qa)|0;bb=bb+Math.imul(fa,Ia)|0;t=t+Math.imul(fa,hb)|0;t=t+Math.imul(pa,Ia)|0;G=G+Math.imul(pa,hb)|0;bb=bb+Math.imul(ca,lb)|0;t=t+Math.imul(ca,La)|0;t=t+Math.imul(ha,lb)|0;G=G+Math.imul(ha,La)|0;bb=bb+Math.imul(ba,Fa)|0;t=t+Math.imul(ba,Oa)|0;t=t+Math.imul(ia,Fa)|0;G=G+Math.imul(ia,Oa)|0;bb=bb+
Math.imul(V,M)|0;t=t+Math.imul(V,fb)|0;t=t+Math.imul(ea,M)|0;G=G+Math.imul(ea,fb)|0;V=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(V>>>26)|0;V&=67108863;bb=Math.imul(L,eb);t=Math.imul(L,Ea);t=t+Math.imul(ua,eb)|0;G=Math.imul(ua,Ea);bb=bb+Math.imul(ra,Wa)|0;t=t+Math.imul(ra,Qa)|0;t=t+Math.imul(oa,Wa)|0;G=G+Math.imul(oa,Qa)|0;bb=bb+Math.imul(na,Ia)|0;t=t+Math.imul(na,hb)|0;t=t+Math.imul(ta,Ia)|0;G=G+Math.imul(ta,hb)|0;bb=bb+Math.imul(fa,lb)|0;t=t+Math.imul(fa,La)|0;t=t+Math.imul(pa,lb)|0;G=G+Math.imul(pa,
La)|0;bb=bb+Math.imul(ca,Fa)|0;t=t+Math.imul(ca,Oa)|0;t=t+Math.imul(ha,Fa)|0;G=G+Math.imul(ha,Oa)|0;bb=bb+Math.imul(ba,M)|0;t=t+Math.imul(ba,fb)|0;t=t+Math.imul(ia,M)|0;G=G+Math.imul(ia,fb)|0;ba=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(ba>>>26)|0;ba&=67108863;bb=Math.imul(L,Wa);t=Math.imul(L,Qa);t=t+Math.imul(ua,Wa)|0;G=Math.imul(ua,Qa);bb=bb+Math.imul(ra,Ia)|0;t=t+Math.imul(ra,hb)|0;t=t+Math.imul(oa,Ia)|0;G=G+Math.imul(oa,hb)|0;bb=bb+Math.imul(na,lb)|0;t=t+Math.imul(na,La)|0;t=t+Math.imul(ta,
lb)|0;G=G+Math.imul(ta,La)|0;bb=bb+Math.imul(fa,Fa)|0;t=t+Math.imul(fa,Oa)|0;t=t+Math.imul(pa,Fa)|0;G=G+Math.imul(pa,Oa)|0;bb=bb+Math.imul(ca,M)|0;t=t+Math.imul(ca,fb)|0;t=t+Math.imul(ha,M)|0;G=G+Math.imul(ha,fb)|0;ca=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(ca>>>26)|0;ca&=67108863;bb=Math.imul(L,Ia);t=Math.imul(L,hb);t=t+Math.imul(ua,Ia)|0;G=Math.imul(ua,hb);bb=bb+Math.imul(ra,lb)|0;t=t+Math.imul(ra,La)|0;t=t+Math.imul(oa,lb)|0;G=G+Math.imul(oa,La)|0;bb=bb+Math.imul(na,Fa)|0;t=t+Math.imul(na,
Oa)|0;t=t+Math.imul(ta,Fa)|0;G=G+Math.imul(ta,Oa)|0;bb=bb+Math.imul(fa,M)|0;t=t+Math.imul(fa,fb)|0;t=t+Math.imul(pa,M)|0;G=G+Math.imul(pa,fb)|0;fa=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(fa>>>26)|0;fa&=67108863;bb=Math.imul(L,lb);t=Math.imul(L,La);t=t+Math.imul(ua,lb)|0;G=Math.imul(ua,La);bb=bb+Math.imul(ra,Fa)|0;t=t+Math.imul(ra,Oa)|0;t=t+Math.imul(oa,Fa)|0;G=G+Math.imul(oa,Oa)|0;bb=bb+Math.imul(na,M)|0;t=t+Math.imul(na,fb)|0;t=t+Math.imul(ta,M)|0;G=G+Math.imul(ta,fb)|0;na=(H+bb|0)+((t&8191)<<
13)|0;H=(G+(t>>>13)|0)+(na>>>26)|0;na&=67108863;bb=Math.imul(L,Fa);t=Math.imul(L,Oa);t=t+Math.imul(ua,Fa)|0;G=Math.imul(ua,Oa);bb=bb+Math.imul(ra,M)|0;t=t+Math.imul(ra,fb)|0;t=t+Math.imul(oa,M)|0;G=G+Math.imul(oa,fb)|0;ra=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(ra>>>26)|0;ra&=67108863;bb=Math.imul(L,M);t=Math.imul(L,fb);t=t+Math.imul(ua,M)|0;G=Math.imul(ua,fb);Q=(H+bb|0)+((t&8191)<<13)|0;H=(G+(t>>>13)|0)+(Q>>>26)|0;N[0]=Pa;N[1]=Ta;N[2]=Ya;N[3]=nb;N[4]=Da;N[5]=Ha;N[6]=ab;N[7]=ib;N[8]=ob;N[9]=O;
N[10]=J;N[11]=U;N[12]=V;N[13]=ba;N[14]=ca;N[15]=fa;N[16]=na;N[17]=ra;N[18]=Q&67108863;0!==H&&(N[19]=H,I.length++);return I};Math.imul||(E=p);a.prototype.mulTo=function(t,G){var I=this.length+t.length;if(10===this.length&&10===t.length)t=E(this,t,G);else if(63>I)t=p(this,t,G);else if(1024>I){G.negative=t.negative^this.negative;G.length=this.length+t.length;for(var L=0,M=I=0;M<G.length-1;M++){var N=I;I=0;L&=67108863;for(var H=Math.min(M,t.length-1),J=Math.max(0,M-this.length+1);J<=H;J++){var O=(this.words[M-
J]|0)*(t.words[J]|0),Q=O&67108863;N=N+(O/67108864|0)|0;Q=Q+L|0;L=Q&67108863;N=N+(Q>>>26)|0;I+=N>>>26;N&=67108863}G.words[M]=L;L=N}0!==L?G.words[M]=L:G.length--;t=G.strip()}else t=(new n).mulp(this,t,G);return t};n.prototype.makeRBT=function(t){for(var G=Array(t),I=a.prototype._countBits(t)-1,L=0;L<t;L++)G[L]=this.revBin(L,I,t);return G};n.prototype.revBin=function(t,G,I){if(0===t||t===I-1)return t;for(var L=I=0;L<G;L++)I|=(t&1)<<G-L-1,t>>=1;return I};n.prototype.permute=function(t,G,I,L,M,N){for(var H=
0;H<N;H++)L[H]=G[t[H]],M[H]=I[t[H]]};n.prototype.transform=function(t,G,I,L,M,N){this.permute(N,t,G,I,L,M);for(t=1;t<M;t<<=1){G=t<<1;N=Math.cos(2*Math.PI/G);for(var H=Math.sin(2*Math.PI/G),J=0;J<M;J+=G)for(var O=N,Q=H,U=0;U<t;U++){var P=I[J+U],V=L[J+U],Y=I[J+U+t],ba=L[J+U+t],ea=O*Y-Q*ba;ba=O*ba+Q*Y;Y=ea;I[J+U]=P+Y;L[J+U]=V+ba;I[J+U+t]=P-Y;L[J+U+t]=V-ba;U!==G&&(ea=N*O-H*Q,Q=N*Q+H*O,O=ea)}}};n.prototype.guessLen13b=function(t,G){t=Math.max(G,t)|1;G=t&1;var I=0;for(t=t/2|0;t;t>>>=1)I++;return 1<<I+1+
G};n.prototype.conjugate=function(t,G,I){if(!(1>=I))for(var L=0;L<I/2;L++){var M=t[L];t[L]=t[I-L-1];t[I-L-1]=M;M=G[L];G[L]=-G[I-L-1];G[I-L-1]=-M}};n.prototype.normalize13b=function(t,G){for(var I=0,L=0;L<G/2;L++)I=8192*Math.round(t[2*L+1]/G)+Math.round(t[2*L]/G)+I,t[L]=I&67108863,I=67108864>I?0:I/67108864|0;return t};n.prototype.convert13b=function(t,G,I,L){for(var M=0,N=0;N<G;N++)M+=t[N]|0,I[2*N]=M&8191,M>>>=13,I[2*N+1]=M&8191,M>>>=13;for(N=2*G;N<L;++N)I[N]=0;l(0===M);l(0===(M&-8192))};n.prototype.stub=
function(t){for(var G=Array(t),I=0;I<t;I++)G[I]=0;return G};n.prototype.mulp=function(t,G,I){var L=2*this.guessLen13b(t.length,G.length),M=this.makeRBT(L),N=this.stub(L),H=Array(L),J=Array(L),O=Array(L),Q=Array(L),U=Array(L),P=Array(L),V=I.words;V.length=L;this.convert13b(t.words,t.length,H,L);this.convert13b(G.words,G.length,Q,L);this.transform(H,N,J,O,L,M);this.transform(Q,N,U,P,L,M);for(H=0;H<L;H++)Q=J[H]*U[H]-O[H]*P[H],O[H]=J[H]*P[H]+O[H]*U[H],J[H]=Q;this.conjugate(J,O,L);this.transform(J,O,V,
N,L,M);this.conjugate(V,N,L);this.normalize13b(V,L);I.negative=t.negative^G.negative;I.length=t.length+G.length;return I.strip()};a.prototype.mul=function(t){var G=new a(null);G.words=Array(this.length+t.length);return this.mulTo(t,G)};a.prototype.mulf=function(t){var G=new a(null);G.words=Array(this.length+t.length);return(new n).mulp(this,t,G)};a.prototype.imul=function(t){return this.clone().mulTo(t,this)};a.prototype.imuln=function(t){l("number"===typeof t);l(67108864>t);for(var G=0,I=0;I<this.length;I++){var L=
(this.words[I]|0)*t,M=(L&67108863)+(G&67108863);G>>=26;G+=L/67108864|0;G+=M>>>26;this.words[I]=M&67108863}0!==G&&(this.words[I]=G,this.length++);return this};a.prototype.muln=function(t){return this.clone().imuln(t)};a.prototype.sqr=function(){return this.mul(this)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(t){for(var G=Array(t.bitLength()),I=0;I<G.length;I++){var L=I%26;G[I]=(t.words[I/26|0]&1<<L)>>>L}if(0===G.length)return new a(1);t=this;for(I=0;I<G.length&&
0===G[I];I++,t=t.sqr());if(++I<G.length)for(L=t.sqr();I<G.length;I++,L=L.sqr())0!==G[I]&&(t=t.mul(L));return t};a.prototype.iushln=function(t){l("number"===typeof t&&0<=t);var G=t%26;t=(t-G)/26;var I=67108863>>>26-G<<26-G,L;if(0!==G){var M=0;for(L=0;L<this.length;L++){var N=this.words[L]&I;this.words[L]=(this.words[L]|0)-N<<G|M;M=N>>>26-G}M&&(this.words[L]=M,this.length++)}if(0!==t){for(L=this.length-1;0<=L;L--)this.words[L+t]=this.words[L];for(L=0;L<t;L++)this.words[L]=0;this.length+=t}return this.strip()};
a.prototype.ishln=function(t){l(0===this.negative);return this.iushln(t)};a.prototype.iushrn=function(t,G,I){l("number"===typeof t&&0<=t);var L=t%26,M=Math.min((t-L)/26,this.length);t=67108863^67108863>>>L<<L;G=Math.max(0,(G?(G-G%26)/26:0)-M);if(I){for(var N=0;N<M;N++)I.words[N]=this.words[N];I.length=M}if(0!==M)if(this.length>M)for(this.length-=M,N=0;N<this.length;N++)this.words[N]=this.words[N+M];else this.words[0]=0,this.length=1;M=0;for(N=this.length-1;0<=N&&(0!==M||N>=G);N--){var H=this.words[N]|
0;this.words[N]=M<<26-L|H>>>L;M=H&t}I&&0!==M&&(I.words[I.length++]=M);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};a.prototype.ishrn=function(t,G,I){l(0===this.negative);return this.iushrn(t,G,I)};a.prototype.shln=function(t){return this.clone().ishln(t)};a.prototype.ushln=function(t){return this.clone().iushln(t)};a.prototype.shrn=function(t){return this.clone().ishrn(t)};a.prototype.ushrn=function(t){return this.clone().iushrn(t)};a.prototype.testn=function(t){l("number"===
typeof t&&0<=t);var G=t%26;t=(t-G)/26;return this.length<=t?!1:!!(this.words[t]&1<<G)};a.prototype.imaskn=function(t){l("number"===typeof t&&0<=t);var G=t%26;t=(t-G)/26;l(0===this.negative,"imaskn works only with positive numbers");if(this.length<=t)return this;0!==G&&t++;this.length=Math.min(t,this.length);0!==G&&(this.words[this.length-1]&=67108863^67108863>>>G<<G);return this.strip()};a.prototype.maskn=function(t){return this.clone().imaskn(t)};a.prototype.iaddn=function(t){l("number"===typeof t);
l(67108864>t);if(0>t)return this.isubn(-t);if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<t)return this.words[0]=t-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};a.prototype._iaddn=function(t){this.words[0]+=t;for(t=0;t<this.length&&67108864<=this.words[t];t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;this.length=Math.max(this.length,t+1);return this};a.prototype.isubn=function(t){l("number"===
typeof t);l(67108864>t);if(0>t)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;this.words[0]-=t;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(t=0;t<this.length&&0>this.words[t];t++)this.words[t]+=67108864,--this.words[t+1];return this.strip()};a.prototype.addn=function(t){return this.clone().iaddn(t)};a.prototype.subn=function(t){return this.clone().isubn(t)};a.prototype.iabs=function(){this.negative=
0;return this};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(t,G,I){var L;this._expand(t.length+I);var M=0;for(L=0;L<t.length;L++){var N=(this.words[L+I]|0)+M;M=(t.words[L]|0)*G;N-=M&67108863;M=(N>>26)-(M/67108864|0);this.words[L+I]=N&67108863}for(;L<this.length-I;L++)N=(this.words[L+I]|0)+M,M=N>>26,this.words[L+I]=N&67108863;if(0===M)return this.strip();l(-1===M);for(L=M=0;L<this.length;L++)N=-(this.words[L]|0)+M,M=N>>26,this.words[L]=N&67108863;this.negative=
1;return this.strip()};a.prototype._wordDiv=function(t,G){var I=this.clone(),L=t,M=L.words[L.length-1]|0;t=26-this._countBits(M);0!==t&&(L=L.ushln(t),I.iushln(t),M=L.words[L.length-1]|0);var N=I.length-L.length;if("mod"!==G){var H=new a(null);H.length=N+1;H.words=Array(H.length);for(var J=0;J<H.length;J++)H.words[J]=0}J=I.clone()._ishlnsubmul(L,1,N);0===J.negative&&(I=J,H&&(H.words[N]=1));for(--N;0<=N;N--){J=67108864*(I.words[L.length+N]|0)+(I.words[L.length+N-1]|0);J=Math.min(J/M|0,67108863);for(I._ishlnsubmul(L,
J,N);0!==I.negative;)J--,I.negative=0,I._ishlnsubmul(L,1,N),I.isZero()||(I.negative^=1);H&&(H.words[N]=J)}H&&H.strip();I.strip();"div"!==G&&0!==t&&I.iushrn(t);return{div:H||null,mod:I}};a.prototype.divmod=function(t,G,I){l(!t.isZero());if(this.isZero())return{div:new a(0),mod:new a(0)};var L;if(0!==this.negative&&0===t.negative){var M=this.neg().divmod(t,G);"mod"!==G&&(L=M.div.neg());if("div"!==G){var N=M.mod.neg();I&&0!==N.negative&&N.iadd(t)}return{div:L,mod:N}}return 0===this.negative&&0!==t.negative?
(M=this.divmod(t.neg(),G),"mod"!==G&&(L=M.div.neg()),{div:L,mod:M.mod}):0!==(this.negative&t.negative)?(M=this.neg().divmod(t.neg(),G),"div"!==G&&(N=M.mod.neg(),I&&0!==N.negative&&N.isub(t)),{div:M.div,mod:N}):t.length>this.length||0>this.cmp(t)?{div:new a(0),mod:this}:1===t.length?"div"===G?{div:this.divn(t.words[0]),mod:null}:"mod"===G?{div:null,mod:new a(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modn(t.words[0]))}:this._wordDiv(t,G)};a.prototype.div=function(t){return this.divmod(t,
"div",!1).div};a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod};a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod};a.prototype.divRound=function(t){var G=this.divmod(t);if(G.mod.isZero())return G.div;var I=0!==G.div.negative?G.mod.isub(t):G.mod,L=t.ushrn(1);t=t.andln(1);I=I.cmp(L);return 0>I||1===t&&0===I?G.div:0!==G.div.negative?G.div.isubn(1):G.div.iaddn(1)};a.prototype.modn=function(t){l(67108863>=t);for(var G=67108864%t,I=0,L=this.length-1;0<=L;L--)I=(G*I+(this.words[L]|
0))%t;return I};a.prototype.idivn=function(t){l(67108863>=t);for(var G=0,I=this.length-1;0<=I;I--)G=(this.words[I]|0)+67108864*G,this.words[I]=G/t|0,G%=t;return this.strip()};a.prototype.divn=function(t){return this.clone().idivn(t)};a.prototype.egcd=function(t){l(0===t.negative);l(!t.isZero());var G=this,I=t.clone();G=0!==G.negative?G.umod(t):G.clone();t=new a(1);for(var L=new a(0),M=new a(0),N=new a(1),H=0;G.isEven()&&I.isEven();)G.iushrn(1),I.iushrn(1),++H;for(var J=I.clone(),O=G.clone();!G.isZero();){for(var Q=
0,U=1;0===(G.words[0]&U)&&26>Q;++Q,U<<=1);if(0<Q)for(G.iushrn(Q);0<Q--;){if(t.isOdd()||L.isOdd())t.iadd(J),L.isub(O);t.iushrn(1);L.iushrn(1)}Q=0;for(U=1;0===(I.words[0]&U)&&26>Q;++Q,U<<=1);if(0<Q)for(I.iushrn(Q);0<Q--;){if(M.isOdd()||N.isOdd())M.iadd(J),N.isub(O);M.iushrn(1);N.iushrn(1)}0<=G.cmp(I)?(G.isub(I),t.isub(M),L.isub(N)):(I.isub(G),M.isub(t),N.isub(L))}return{a:M,b:N,gcd:I.iushln(H)}};a.prototype._invmp=function(t){l(0===t.negative);l(!t.isZero());var G=this,I=t.clone();G=0!==G.negative?
G.umod(t):G.clone();for(var L=new a(1),M=new a(0),N=I.clone();0<G.cmpn(1)&&0<I.cmpn(1);){for(var H=0,J=1;0===(G.words[0]&J)&&26>H;++H,J<<=1);if(0<H)for(G.iushrn(H);0<H--;)L.isOdd()&&L.iadd(N),L.iushrn(1);H=0;for(J=1;0===(I.words[0]&J)&&26>H;++H,J<<=1);if(0<H)for(I.iushrn(H);0<H--;)M.isOdd()&&M.iadd(N),M.iushrn(1);0<=G.cmp(I)?(G.isub(I),L.isub(M)):(I.isub(G),M.isub(L))}G=0===G.cmpn(1)?L:M;0>G.cmpn(0)&&G.iadd(t);return G};a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();
var G=this.clone();t=t.clone();G.negative=0;for(var I=t.negative=0;G.isEven()&&t.isEven();I++)G.iushrn(1),t.iushrn(1);do{for(;G.isEven();)G.iushrn(1);for(;t.isEven();)t.iushrn(1);var L=G.cmp(t);if(0>L)L=G,G=t,t=L;else if(0===L||0===t.cmpn(1))break;G.isub(t)}while(1);return t.iushln(I)};a.prototype.invm=function(t){return this.egcd(t).a.umod(t)};a.prototype.isEven=function(){return 0===(this.words[0]&1)};a.prototype.isOdd=function(){return 1===(this.words[0]&1)};a.prototype.andln=function(t){return this.words[0]&
t};a.prototype.bincn=function(t){l("number"===typeof t);var G=t%26;t=(t-G)/26;G=1<<G;if(this.length<=t)return this._expand(t+1),this.words[t]|=G,this;for(;0!==G&&t<this.length;t++){var I=this.words[t]|0;I+=G;G=I>>>26;I&=67108863;this.words[t]=I}0!==G&&(this.words[t]=G,this.length++);return this};a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};a.prototype.cmpn=function(t){var G=0>t;if(0!==this.negative&&!G)return-1;if(0===this.negative&&G)return 1;this.strip();1<this.length?
t=1:(G&&(t=-t),l(67108863>=t,"Number is too big"),G=this.words[0]|0,t=G===t?0:G<t?-1:1);return 0!==this.negative?-t|0:t};a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;t=this.ucmp(t);return 0!==this.negative?-t|0:t};a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var G=0,I=this.length-1;0<=I;I--){var L=this.words[I]|0,M=t.words[I]|0;if(L!==M){L<M?G=-1:L>M&&(G=1);break}}return G};
a.prototype.gtn=function(t){return 1===this.cmpn(t)};a.prototype.gt=function(t){return 1===this.cmp(t)};a.prototype.gten=function(t){return 0<=this.cmpn(t)};a.prototype.gte=function(t){return 0<=this.cmp(t)};a.prototype.ltn=function(t){return-1===this.cmpn(t)};a.prototype.lt=function(t){return-1===this.cmp(t)};a.prototype.lten=function(t){return 0>=this.cmpn(t)};a.prototype.lte=function(t){return 0>=this.cmp(t)};a.prototype.eqn=function(t){return 0===this.cmpn(t)};a.prototype.eq=function(t){return 0===
this.cmp(t)};a.red=function(t){return new u(t)};a.prototype.toRed=function(t){l(!this.red,"Already a number in reduction context");l(0===this.negative,"red works only with positives");return t.convertTo(this)._forceRed(t)};a.prototype.fromRed=function(){l(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};a.prototype._forceRed=function(t){this.red=t;return this};a.prototype.forceRed=function(t){l(!this.red,"Already a number in reduction context");return this._forceRed(t)};
a.prototype.redAdd=function(t){l(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};a.prototype.redIAdd=function(t){l(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};a.prototype.redSub=function(t){l(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};a.prototype.redISub=function(t){l(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};a.prototype.redShl=function(t){l(this.red,"redShl works only with red numbers");
return this.red.shl(this,t)};a.prototype.redMul=function(t){l(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};a.prototype.redIMul=function(t){l(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};a.prototype.redSqr=function(){l(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};a.prototype.redISqr=function(){l(this.red,"redISqr works only with red numbers");
this.red._verify1(this);return this.red.isqr(this)};a.prototype.redSqrt=function(){l(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};a.prototype.redInvm=function(){l(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};a.prototype.redNeg=function(){l(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};a.prototype.redPow=function(t){l(this.red&&!t.red,"redPow(normalNum)");
this.red._verify1(this);return this.red.pow(this,t)};var B={k256:null,p224:null,p192:null,p25519:null};c.prototype._tmp=function(){var t=new a(null);t.words=Array(Math.ceil(this.n/13));return t};c.prototype.ireduce=function(t){do{this.split(t,this.tmp);t=this.imulK(t);t=t.iadd(this.tmp);var G=t.bitLength()}while(G>this.n);G=G<this.n?-1:t.ucmp(this.p);0===G?(t.words[0]=0,t.length=1):0<G?t.isub(this.p):t.strip();return t};c.prototype.split=function(t,G){t.iushrn(this.n,0,G)};c.prototype.imulK=function(t){return t.imul(this.k)};
e(f,c);f.prototype.split=function(t,G){for(var I=Math.min(t.length,9),L=0;L<I;L++)G.words[L]=t.words[L];G.length=I;if(9>=t.length)t.words[0]=0,t.length=1;else{I=t.words[9];G.words[G.length++]=I&4194303;for(L=10;L<t.length;L++)G=t.words[L]|0,t.words[L-10]=(G&4194303)<<4|I>>>22,I=G;I>>>=22;t.words[L-10]=I;t.length=0===I&&10<t.length?t.length-10:t.length-9}};f.prototype.imulK=function(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;for(var G=0,I=0;I<t.length;I++){var L=t.words[I]|0;G+=977*L;
t.words[I]=G&67108863;G=64*L+(G/67108864|0)}0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--);return t};e(d,c);e(q,c);e(r,c);r.prototype.imulK=function(t){for(var G=0,I=0;I<t.length;I++){G=19*(t.words[I]|0)+G;var L=G&67108863;G>>>=26;t.words[I]=L}0!==G&&(t.words[t.length++]=G);return t};a._prime=function(t){if(B[t])return B[t];if("k256"===t)var G=new f;else if("p224"===t)G=new d;else if("p192"===t)G=new q;else if("p25519"===t)G=new r;else throw Error("Unknown prime "+t);return B[t]=
G};u.prototype._verify1=function(t){l(0===t.negative,"red works only with positives");l(t.red,"red works only with red numbers")};u.prototype._verify2=function(t,G){l(0===(t.negative|G.negative),"red works only with positives");l(t.red&&t.red===G.red,"red works only with red numbers")};u.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)};u.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)};u.prototype.add=
function(t,G){this._verify2(t,G);t=t.add(G);0<=t.cmp(this.m)&&t.isub(this.m);return t._forceRed(this)};u.prototype.iadd=function(t,G){this._verify2(t,G);t=t.iadd(G);0<=t.cmp(this.m)&&t.isub(this.m);return t};u.prototype.sub=function(t,G){this._verify2(t,G);t=t.sub(G);0>t.cmpn(0)&&t.iadd(this.m);return t._forceRed(this)};u.prototype.isub=function(t,G){this._verify2(t,G);t=t.isub(G);0>t.cmpn(0)&&t.iadd(this.m);return t};u.prototype.shl=function(t,G){this._verify1(t);return this.imod(t.ushln(G))};u.prototype.imul=
function(t,G){this._verify2(t,G);return this.imod(t.imul(G))};u.prototype.mul=function(t,G){this._verify2(t,G);return this.imod(t.mul(G))};u.prototype.isqr=function(t){return this.imul(t,t.clone())};u.prototype.sqr=function(t){return this.mul(t,t)};u.prototype.sqrt=function(t){if(t.isZero())return t.clone();var G=this.m.andln(3);l(1===G%2);if(3===G)return G=this.m.add(new a(1)).iushrn(2),this.pow(t,G);for(var I=this.m.subn(1),L=0;!I.isZero()&&0===I.andln(1);)L++,I.iushrn(1);l(!I.isZero());G=(new a(1)).toRed(this);
var M=G.redNeg(),N=this.m.subn(1).iushrn(1),H=this.m.bitLength();for(H=(new a(2*H*H)).toRed(this);0!==this.pow(H,N).cmp(M);)H.redIAdd(M);N=this.pow(H,I);M=this.pow(t,I.addn(1).iushrn(1));t=this.pow(t,I);for(I=L;0!==t.cmp(G);){H=t;for(L=0;0!==H.cmp(G);L++)H=H.redSqr();l(L<I);N=this.pow(N,(new a(1)).iushln(I-L-1));M=M.redMul(N);N=N.redSqr();t=t.redMul(N);I=L}return M};u.prototype.invm=function(t){t=t._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)};u.prototype.pow=
function(t,G){if(G.isZero())return(new a(1)).toRed(this);if(0===G.cmpn(1))return t.clone();var I=Array(16);I[0]=(new a(1)).toRed(this);I[1]=t;for(var L=2;L<I.length;L++)I[L]=this.mul(I[L-1],t);t=I[0];var M=0,N=0,H=G.bitLength()%26;0===H&&(H=26);for(L=G.length-1;0<=L;L--){var J=G.words[L];for(--H;0<=H;H--){var O=J>>H&1;t!==I[0]&&(t=this.sqr(t));if(0===O&&0===M)N=0;else if(M<<=1,M|=O,N++,4===N||0===L&&0===H)t=this.mul(t,I[M]),M=N=0}H=26}return t};u.prototype.convertTo=function(t){var G=t.umod(this.m);
return G===t?G.clone():G};u.prototype.convertFrom=function(t){t=t.clone();t.red=null;return t};a.mont=function(t){return new v(t)};e(v,u);v.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))};v.prototype.convertFrom=function(t){t=this.imod(t.mul(this.rinv));t.red=null;return t};v.prototype.imul=function(t,G){if(t.isZero()||G.isZero())return t.words[0]=0,t.length=1,t;t=t.imul(G);G=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);G=t=t.isub(G).iushrn(this.shift);
0<=t.cmp(this.m)?G=t.isub(this.m):0>t.cmpn(0)&&(G=t.iadd(this.m));return G._forceRed(this)};v.prototype.mul=function(t,G){if(t.isZero()||G.isZero())return(new a(0))._forceRed(this);t=t.mul(G);G=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);G=t=t.isub(G).iushrn(this.shift);0<=t.cmp(this.m)?G=t.isub(this.m):0>t.cmpn(0)&&(G=t.iadd(this.m));return G._forceRed(this)};v.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof F||
F,this)},{buffer:108}],100:[function(b,F,C){F.exports=function(m){var h,l,e,a=m.length;for(h=l=0;h<a;++h)l+=m[h].length;var g=Array(l),k=0;for(h=0;h<a;++h){var p=m[h],n=p.length;for(l=0;l<n;++l){var c=g[k++]=Array(n-1),f=0;for(e=0;e<n;++e)e!==l&&(c[f++]=p[e]);l&1&&(e=c[1],c[1]=c[0],c[0]=e)}}return g}},{}],101:[function(b,F,C){function m(p,n,c,f){for(var d=0,q=0,r=0,u=p.length;r<u;++r){var v=p[r],w;a:{for(w=0;w<n;++w)if(!(v[w]<=v[w+n])){w=!0;break a}w=!1}if(!w){for(w=0;w<2*n;++w)c[d++]=v[w];f[q++]=
r}}return q}function h(p,n,c,f){var d=p.length,q=n.length;if(!(0>=d||0>=q)){var r=p[0].length>>>1;if(!(0>=r)){var u=e.mallocDouble(2*r*d),v=e.mallocInt32(d);d=m(p,r,u,v);if(0<d){if(1===r&&f){a.init(d);var w=a.sweepComplete(r,c,0,d,u,v,0,d,u,v)}else{p=e.mallocDouble(2*r*q);var y=e.mallocInt32(q);q=m(n,r,p,y);0<q&&(a.init(d+q),w=1===r?a.sweepBipartite(r,c,0,d,u,v,0,q,p,y):g(r,c,f,d,u,v,q,p,y),e.free(p),e.free(y))}e.free(u);e.free(v)}return w}}}function l(p,n){k.push([p,n])}F.exports=function(p,n,c){switch(arguments.length){case 1:return k=
[],h(p,p,l,!0),k;case 2:if("function"===typeof n)return h(p,p,n,!0);k=[];h(p,n,l,!1);return k;case 3:return h(p,n,c,!1);default:throw Error("box-intersect: Invalid arguments");}};var e=b("typedarray-pool"),a=b("./lib/sweep"),g=b("./lib/intersect"),k},{"./lib/intersect":103,"./lib/sweep":107,"typedarray-pool":567}],102:[function(b,F,C){function m(l){function e(n,c){var f="bruteForce"+(n?"Red":"Blue")+(c?"Flip":"")+(l?"Full":""),d=["function ",f,"(",h.join(),"){","var ","es","\x3d2*","d",";"],q="for(var j\x3dbs,bp\x3des*bs;j\x3cbe;++j,bp+\x3des){var y0\x3dbb[ax+bp],"+
(l?"y1\x3dbb[ax+bp+d],":"")+"yi\x3dbi[j];";n?d.push("for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];","Q",":",q):d.push(q,"Q",":","for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];");l?d.push("if(y1\x3cx0||x1\x3cy0)continue;"):c?d.push("if(y0\x3c\x3dx0||x1\x3cy0)continue;"):d.push("if(y0\x3cx0||x1\x3cy0)continue;");d.push("for(var k\x3dax+1;k\x3cd;++k){var r0\x3drb[k+rp],r1\x3drb[k+d+rp],b0\x3dbb[k+bp],b1\x3dbb[k+d+bp];if(r1\x3cb0||b1\x3cr0)continue Q;}var rv\x3dvv(");
c?d.push("yi,xi"):d.push("xi,yi");d.push(");if(rv!\x3d\x3dvoid 0)return rv;}}}");n=d.join("");g.push(n);p.push("return "+f+"("+h.join()+");")}var a="bruteForce"+(l?"Full":"Partial"),g=[],k=h.slice();l||k.splice(3,0,"fp");var p=["function "+a+"("+k.join()+"){"];p.push("if(re-rs\x3ebe-bs){");l?(e(!0,!1),p.push("}else{"),e(!1,!1)):(p.push("if(fp){"),e(!0,!0),p.push("}else{"),e(!0,!1),p.push("}}else{if(fp){"),e(!1,!0),p.push("}else{"),e(!1,!1),p.push("}"));p.push("}}return "+a);a=g.join("")+p.join("");
return(new Function(a))()}var h="d ax vv rs re rb ri bs be bb bi".split(" ");C.partial=m(!1);C.full=m(!0)},{}],103:[function(b,F,C){function m(E,B,t,G,I,L,M,N,H){var J=w*E;D[J]=B;D[J+1]=t;D[J+2]=G;D[J+3]=I;D[J+4]=L;D[J+5]=M;E*=y;x[E]=N;x[E+1]=H}F.exports=function(E,B,t,G,I,L,M,N,H){var J=8*l.log2(G+M+1)*(E+1)|0,O=l.nextPow2(w*J);D.length<O&&(h.free(D),D=h.mallocInt32(O));J=l.nextPow2(y*J);x.length<J&&(h.free(x),x=h.mallocDouble(J));J=0;O=2*E;m(J++,0,0,G,0,M,t?16:0,-Infinity,Infinity);for(t||m(J++,
0,0,M,0,G,1,-Infinity,Infinity);0<J;){--J;t=J*w;var Q=D[t];M=D[t+1];var U=D[t+2],P=D[t+3],V=D[t+4];t=D[t+5];G=J*y;var Y=x[G],ba=x[G+1],ea=t&1,ca=!!(t&16),ia=I,fa=L,ha=N;G=H;ea&&(ia=N,fa=H,ha=I,G=L);if(t&2&&(U=q(E,Q,M,U,ia,fa,ba),M>=U))continue;if(t&4&&(M=r(E,Q,M,U,ia,fa,Y),M>=U))continue;t=U-M;var na=V-P;if(ca){if(E*t*(t+na)<c){var pa=g.scanComplete(E,Q,B,M,U,ia,fa,P,V,ha,G);if(void 0!==pa)return pa;continue}}else if(E*Math.min(t,na)<p){pa=e(E,Q,B,ea,M,U,ia,fa,P,V,ha,G);if(void 0!==pa)return pa;continue}else if(E*
t*na<n){pa=g.scanBipartite(E,Q,B,ea,M,U,ia,fa,P,V,ha,G);if(void 0!==pa)return pa;continue}t=f(E,Q,M,U,ia,fa,Y,ba);if(M<t)if(E*(t-M)<p){if(pa=a(E,Q+1,B,M,t,ia,fa,P,V,ha,G),void 0!==pa)return pa}else if(Q===E-2){if(pa=ea?g.sweepBipartite(E,B,P,V,ha,G,M,t,ia,fa):g.sweepBipartite(E,B,M,t,ia,fa,P,V,ha,G),void 0!==pa)return pa}else m(J++,Q+1,M,t,P,V,ea,-Infinity,Infinity),m(J++,Q+1,P,V,M,t,ea^1,-Infinity,Infinity);if(t<U)if(M=k(E,Q,P,V,ha,G),pa=ha[O*M+Q],na=d(E,Q,M,V,ha,G,pa),na<V&&m(J++,Q,t,U,na,V,(ea|
4)+(ca?16:0),pa,ba),P<M&&m(J++,Q,t,U,P,M,(ea|2)+(ca?16:0),Y,pa),M+1===na){if(ca)a:{P=E;V=B;G=G[M];ea=2*P;M*=ea;Y=ha[M+Q];ba=t;t*=ea;b:for(;ba<U;++ba,t+=ea)if(ca=fa[ba],ca!==G&&(na=ia[t+Q],pa=ia[t+Q+P],!(Y<na||pa<Y))){for(var ra=Q+1;ra<P;++ra){na=ia[t+ra];pa=ia[t+ra+P];var ta=ha[M+ra+P];if(pa<ha[M+ra]||ta<na)continue b}ca=V(ca,G);if(void 0!==ca){pa=ca;break a}}pa=void 0}else a:{P=E;V=B;G=G[M];Y=2*P;M*=Y;ba=ha[M+Q];ca=t;t*=Y;b:for(;ca<U;++ca,t+=Y)if(na=ia[t+Q],pa=ia[t+Q+P],!(ba<na||pa<ba||ea&&ba===
na)){ra=fa[ca];for(ta=Q+1;ta<P;++ta){na=ia[t+ta];pa=ia[t+ta+P];var oa=ha[M+ta+P];if(pa<ha[M+ta]||oa<na)continue b}na=ea?V(G,ra):V(ra,G);if(void 0!==na){pa=na;break a}}pa=void 0}if(void 0!==pa)return pa}else if(M<na)if(ca){if(U=u(E,Q,t,U,ia,fa,pa),t<U)if(P=d(E,Q,t,U,ia,fa,pa),Q===E-2){if(t<P&&(pa=g.sweepComplete(E,B,t,P,ia,fa,M,na,ha,G),void 0!==pa)||P<U&&(pa=g.sweepBipartite(E,B,P,U,ia,fa,M,na,ha,G),void 0!==pa))return pa}else t<P&&m(J++,Q+1,t,P,M,na,16,-Infinity,Infinity),P<U&&(m(J++,Q+1,P,U,M,na,
0,-Infinity,Infinity),m(J++,Q+1,M,na,P,U,1,-Infinity,Infinity))}else U=ea?v(E,Q,t,U,ia,fa,pa):u(E,Q,t,U,ia,fa,pa),t<U&&(Q===E-2?ea?g.sweepBipartite(E,B,M,na,ha,G,t,U,ia,fa):g.sweepBipartite(E,B,t,U,ia,fa,M,na,ha,G):(m(J++,Q+1,t,U,M,na,ea,-Infinity,Infinity),m(J++,Q+1,M,na,t,U,ea^1,-Infinity,Infinity)))}};var h=b("typedarray-pool"),l=b("bit-twiddle");F=b("./brute");var e=F.partial,a=F.full,g=b("./sweep"),k=b("./median");b=b("./partition");var p=128,n=4194304,c=4194304,f=b("!(lo\x3e\x3dp0)\x26\x26!(p1\x3e\x3dhi)",
["p0","p1"]),d=b("lo\x3d\x3d\x3dp0",["p0"]),q=b("lo\x3cp0",["p0"]),r=b("hi\x3c\x3dp0",["p0"]),u=b("lo\x3c\x3dp0\x26\x26p0\x3c\x3dhi",["p0"]),v=b("lo\x3cp0\x26\x26p0\x3c\x3dhi",["p0"]),w=6,y=2,D=h.mallocInt32(1024),x=h.mallocDouble(1024)},{"./brute":102,"./median":104,"./partition":105,"./sweep":107,"bit-twiddle":97,"typedarray-pool":567}],104:[function(b,F,C){F.exports=function(l,e,a,g,k,p){if(g<=a+1)return a;var n=a,c=g;g=g+a>>>1;for(var f=2*l,d,q;n<c;){if(c-n<h){d=e;q=k;for(var r=p,u=2*l,v=u*(n+
1)+d,w=n+1;w<c;++w,v+=u)for(var y=q[v],D=w,x=u*(w-1);D>n&&q[x+d]>y;--D,x-=u){for(var E=x,B=x+u,t=0;t<u;++t,++E,++B){var G=q[E];q[E]=q[B];q[B]=G}E=r[D];r[D]=r[D-1];r[D-1]=E}break}v=c-n;d=Math.random()*v+n|0;q=k[f*d+e];u=Math.random()*v+n|0;r=k[f*u+e];w=Math.random()*v+n|0;v=k[f*w+e];q<=r?v>=r?(d=u,q=r):q>=v||(d=w,q=v):r>=v?(d=u,q=r):v>=q||(d=w,q=v);r=f*(c-1);u=f*d;for(v=0;v<f;++v,++r,++u)w=k[r],k[r]=k[u],k[u]=w;r=p[c-1];p[c-1]=p[d];p[d]=r;d=m(l,e,n,c-1,k,p,q);r=f*(c-1);u=f*d;for(v=0;v<f;++v,++r,++u)w=
k[r],k[r]=k[u],k[u]=w;r=p[c-1];p[c-1]=p[d];p[d]=r;if(g<d){for(c=d-1;n<c&&k[f*(c-1)+e]===q;)--c;c+=1}else if(d<g)for(n=d+1;n<c&&k[f*n+e]===q;)n+=1;else break}return m(l,e,a,g,k,p,k[f*g+e])};var m=b("./partition")("lo\x3cp0",["p0"]),h=8},{"./partition":105}],105:[function(b,F,C){F.exports=function(h,l){l="abcdef".split("").concat(l);var e=[];0<=h.indexOf("lo")&&e.push("lo\x3de[k+n]");0<=h.indexOf("hi")&&e.push("hi\x3de[k+o]");l.push(m.replace("_",e.join()).replace("$",h));return Function.apply(void 0,
l)};var m="for(var j\x3d2*a,k\x3dj*c,l\x3dk,m\x3dc,n\x3db,o\x3da+b,p\x3dc;d\x3ep;++p,k+\x3dj){var _;if($)if(m\x3d\x3d\x3dp)m+\x3d1,l+\x3dj;else{for(var s\x3d0;j\x3es;++s){var t\x3de[k+s];e[k+s]\x3de[l],e[l++]\x3dt}var u\x3df[p];f[p]\x3df[m],f[m++]\x3du}}return m"},{}],106:[function(b,F,C){function m(n,c,f){for(var d=2*(n+1),q=n+1;q<=c;++q){for(var r=f[d++],u=f[d++],v=q,w=d-2;v-- >n;){var y=f[w-2],D=f[w-1];if(y<r)break;else if(y===r&&D<u)break;f[w]=y;f[w+1]=D;w-=2}f[w]=r;f[w+1]=u}}function h(n,c,f){n*=
2;c*=2;var d=f[n],q=f[n+1];f[n]=f[c];f[n+1]=f[c+1];f[c]=d;f[c+1]=q}function l(n,c,f){n*=2;c*=2;f[n]=f[c];f[n+1]=f[c+1]}function e(n,c,f,d,q){n*=2;c*=2;q[n]=q[c];q[c]=f;q[n+1]=q[c+1];q[c+1]=d}function a(n,c,f){n*=2;c*=2;var d=f[n],q=f[c];return d<q?!1:d===q?f[n+1]>f[c+1]:!0}function g(n,c,f,d){n*=2;var q=d[n];return q<c?!0:q===c?d[n+1]<f:!1}function k(n,c,f){var d=(c-n+1)/6|0,q=n+d,r=c-d,u=n+c>>1,v=u-d,w=u+d,y=q,D=v,x=u,E=w,B=r;d=n+1;var t=c-1;if(a(y,D,f)){var G=y;y=D;D=G}a(E,B,f)&&(G=E,E=B,B=G);a(y,
x,f)&&(G=y,y=x,x=G);a(D,x,f)&&(G=D,D=x,x=G);a(y,E,f)&&(G=y,y=E,E=G);a(x,E,f)&&(G=x,x=E,E=G);a(D,B,f)&&(G=D,D=B,B=G);a(D,x,f)&&(G=D,D=x,x=G);a(E,B,f)&&(G=E,E=B,B=G);G=f[2*D];D=f[2*D+1];var I=f[2*E];E=f[2*E+1];y*=2;x*=2;B*=2;q*=2;u*=2;r*=2;for(var L=0;2>L;++L){var M=f[x+L],N=f[B+L];f[q+L]=f[y+L];f[u+L]=M;f[r+L]=N}l(v,n,f);l(w,c,f);for(v=d;v<=t;++v)if(g(v,G,D,f))v!==d&&h(v,d,f),++d;else if(!g(v,I,E,f))for(;;)if(g(t,I,E,f)){g(t,G,D,f)?(w=v,r=d,u=t,y=f,w*=2,r*=2,u*=2,q=y[w],x=y[w+1],y[w]=y[r],y[w+1]=y[r+
1],y[r]=y[u],y[r+1]=y[u+1],y[u]=q,y[u+1]=x,++d):h(v,t,f);--t;break}else if(--t<v)break;e(n,d-1,G,D,f);e(c,t+1,I,E,f);d-2-n<=p?m(n,d-2,f):k(n,d-2,f);c-(t+2)<=p?m(t+2,c,f):k(t+2,c,f);t-d<=p?m(d,t,f):k(d,t,f)}F.exports=function(n,c){c<=4*p?m(0,c-1,n):k(0,c-1,n)};var p=32},{}],107:[function(b,F,C){function m(q,r,u,v){v=r[v];u=q[u-1];q[v]=u;r[u]=v}F.exports={init:function(q){q=l.nextPow2(q);g.length<q&&(h.free(g),g=h.mallocInt32(q));k.length<q&&(h.free(k),k=h.mallocInt32(q));p.length<q&&(h.free(p),p=h.mallocInt32(q));
n.length<q&&(h.free(n),n=h.mallocInt32(q));c.length<q&&(h.free(c),c=h.mallocInt32(q));f.length<q&&(h.free(f),f=h.mallocInt32(q));q*=8;d.length<q&&(h.free(d),d=h.mallocDouble(q))},sweepBipartite:function(q,r,u,v,w,y,D,x,E,B){var t=0,G=2*q;--q;for(var I=G-1;u<v;++u){var L=y[u],M=G*u;d[t++]=w[M+q];d[t++]=-(L+1);d[t++]=w[M+I];d[t++]=L}for(u=D;u<x;++u)L=B[u]+a,v=G*u,d[t++]=E[v+q],d[t++]=-L,d[t++]=E[v+I],d[t++]=L;x=t>>>1;e(d,x);for(u=B=E=0;u<x;++u)if(t=d[2*u+1]|0,t>=a)t=t-a|0,m(p,n,B--,t);else if(0<=t)m(g,
k,E--,t);else if(t<=-a){t=-t-a|0;for(G=0;G<E;++G)if(v=r(g[G],t),void 0!==v)return v;G=n;v=B++;p[v]=t;G[t]=v}else{t=-t-1|0;for(G=0;G<B;++G)if(v=r(t,p[G]),void 0!==v)return v;G=k;v=E++;g[v]=t;G[t]=v}},sweepComplete:function(q,r,u,v,w,y,D,x,E,B){var t=0,G=2*q;--q;for(var I=G-1;u<v;++u){var L=y[u]+1<<1,M=G*u;d[t++]=w[M+q];d[t++]=-L;d[t++]=w[M+I];d[t++]=L}for(u=D;u<x;++u)L=B[u]+1<<1,v=G*u,d[t++]=E[v+q],d[t++]=-L|1,d[t++]=E[v+I],d[t++]=L|1;x=t>>>1;e(d,x);for(u=t=B=E=0;u<x;++u)if(G=d[2*u+1]|0,v=G&1,u<x-
1&&G>>1===d[2*u+3]>>1&&(v=2,u+=1),0>G){G=-(G>>1)-1;for(w=0;w<t;++w)if(y=r(c[w],G),void 0!==y)return y;if(0!==v)for(w=0;w<E;++w)if(y=r(g[w],G),void 0!==y)return y;if(1!==v)for(w=0;w<B;++w)if(y=r(p[w],G),void 0!==y)return y;0===v?(v=k,w=E++,g[w]=G,v[G]=w):1===v?(v=n,w=B++,p[w]=G,v[G]=w):2===v&&(v=f,w=t++,c[w]=G,v[G]=w)}else G=(G>>1)-1,0===v?m(g,k,E--,G):1===v?m(p,n,B--,G):2===v&&m(c,f,t--,G)},scanBipartite:function(q,r,u,v,w,y,D,x,E,B,t,G){var I=0,L=2*q,M=r+q,N=1,H=1;for(v?H=a:N=a;w<y;++w){var J=w+
N,O=L*w;d[I++]=D[O+r];d[I++]=-J;d[I++]=D[O+M];d[I++]=J}for(w=E;w<B;++w)J=w+H,y=L*w,d[I++]=t[y+r],d[I++]=-J;B=I>>>1;e(d,B);for(w=I=0;w<B;++w)if(J=d[2*w+1]|0,0>J)if(J=-J,J>=a?(H=!v,J-=a):(H=!!v,--J),H)H=k,y=I++,g[y]=J,H[J]=y;else a:for(H=G[J],J*=L,y=t[J+r+1],E=t[J+r+1+q],M=0;M<I;++M){O=g[M];var Q=L*O;if(!(E<D[Q+r+1]||D[Q+r+1+q]<y)){for(var U=r+2;U<q;++U)if(t[J+U+q]<D[Q+U]||D[Q+U+q]<t[J+U])continue a;O=x[O];O=v?u(H,O):u(O,H);if(void 0!==O)return O}}else m(g,k,I--,J-N)},scanComplete:function(q,r,u,v,
w,y,D,x,E,B,t){for(var G=0,I=2*q,L=r+q;v<w;++v){var M=v+a,N=I*v;d[G++]=y[N+r];d[G++]=-M;d[G++]=y[N+L];d[G++]=M}for(v=x;v<E;++v)M=v+1,w=I*v,d[G++]=B[w+r],d[G++]=-M;E=G>>>1;e(d,E);for(v=G=0;v<E;++v)if(w=d[2*v+1]|0,0>w)if(M=-w,M>=a)g[G++]=M-a;else a:for(--M,w=t[M],M*=I,L=B[M+r+1],N=B[M+r+1+q],x=0;x<G;++x){var H=g[x],J=D[H];if(J===w)break;H*=I;if(!(N<y[H+r+1]||y[H+r+1+q]<L)){for(var O=r+2;O<q;++O)if(B[M+O+q]<y[H+O]||y[H+O+q]<B[M+O])continue a;J=u(J,w);if(void 0!==J)return J}}else{M=w-a;for(x=G-1;0<=x;--x)if(g[x]===
M){for(O=x+1;O<G;++O)g[O-1]=g[O];break}--G}}};var h=b("typedarray-pool"),l=b("bit-twiddle"),e=b("./sort"),a=268435456,g=h.mallocInt32(1024),k=h.mallocInt32(1024),p=h.mallocInt32(1024),n=h.mallocInt32(1024),c=h.mallocInt32(1024),f=h.mallocInt32(1024),d=h.mallocDouble(8192)},{"./sort":106,"bit-twiddle":97,"typedarray-pool":567}],108:[function(b,F,C){},{}],109:[function(b,F,C){arguments[4][108][0].apply(C,arguments)},{dup:108}],110:[function(b,F,C){function m(){this._events&&Object.prototype.hasOwnProperty.call(this,
"_events")||(this._events=f(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function h(v,w,y,D){var x;if("function"!==typeof y)throw new TypeError('"listener" argument must be a function');if(x=v._events){x.newListener&&(v.emit("newListener",w,y.listener?y.listener:y),x=v._events);var E=x[w]}else x=v._events=f(null),v._eventsCount=0;E?("function"===typeof E?E=x[w]=D?[y,E]:[E,y]:D?E.unshift(y):E.push(y),E.warned||(y=void 0===v._maxListeners?m.defaultMaxListeners:v._maxListeners)&&
0<y&&E.length>y&&(E.warned=!0,y=Error("Possible EventEmitter memory leak detected. "+E.length+' "'+String(w)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),y.name="MaxListenersExceededWarning",y.emitter=v,y.type=w,y.count=E.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",y.name,y.message))):(x[w]=y,++v._eventsCount);return v}function l(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);
case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var v=Array(arguments.length),w=0;w<v.length;++w)v[w]=arguments[w];this.listener.apply(this.target,v)}}function e(v,w,y){v={fired:!1,wrapFn:void 0,target:v,type:w,listener:y};w=q.call(l,v);w.listener=y;return v.wrapFn=w}function a(v,w,y){v=v._events;if(!v)return[];w=v[w];if(!w)return[];
if("function"===typeof w)return y?[w.listener||w]:[w];if(y)for(y=Array(w.length),v=0;v<y.length;++v)y[v]=w[v].listener||w[v];else y=k(w,w.length);return y}function g(v){var w=this._events;if(w){v=w[v];if("function"===typeof v)return 1;if(v)return v.length}return 0}function k(v,w){for(var y=Array(w),D=0;D<w;++D)y[D]=v[D];return y}function p(v){var w=function(){};w.prototype=v;return new w}function n(v){var w=[],y;for(y in v)Object.prototype.hasOwnProperty.call(v,y)&&w.push(y);return y}function c(v){var w=
this;return function(){return w.apply(v,arguments)}}var f=Object.create||p,d=Object.keys||n,q=Function.prototype.bind||c;F.exports=m;m.EventEmitter=m;m.prototype._events=void 0;m.prototype._maxListeners=void 0;var r=10;try{b={};Object.defineProperty&&Object.defineProperty(b,"x",{value:0});var u=0===b.x}catch(v){u=!1}u?Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(v){if("number"!==typeof v||0>v||v!==v)throw new TypeError('"defaultMaxListeners" must be a positive number');
r=v}}):m.defaultMaxListeners=r;m.prototype.setMaxListeners=function(v){if("number"!==typeof v||0>v||isNaN(v))throw new TypeError('"n" argument must be a positive number');this._maxListeners=v;return this};m.prototype.getMaxListeners=function(){return void 0===this._maxListeners?m.defaultMaxListeners:this._maxListeners};m.prototype.emit=function(v){var w,y,D;var x="error"===v;if(D=this._events)x=x&&null==D.error;else if(!x)return!1;if(x){1<arguments.length&&(w=arguments[1]);if(w instanceof Error)throw w;
D=Error('Unhandled "error" event. ('+w+")");D.context=w;throw D;}w=D[v];if(!w)return!1;D="function"===typeof w;var E=arguments.length;switch(E){case 1:if(D)w.call(this);else for(D=w.length,w=k(w,D),x=0;x<D;++x)w[x].call(this);break;case 2:x=arguments[1];if(D)w.call(this,x);else for(D=w.length,w=k(w,D),E=0;E<D;++E)w[E].call(this,x);break;case 3:x=arguments[1];E=arguments[2];if(D)w.call(this,x,E);else for(D=w.length,w=k(w,D),y=0;y<D;++y)w[y].call(this,x,E);break;case 4:x=arguments[1];E=arguments[2];
y=arguments[3];if(D)w.call(this,x,E,y);else{D=w.length;w=k(w,D);for(var B=0;B<D;++B)w[B].call(this,x,E,y)}break;default:x=Array(E-1);for(y=1;y<E;y++)x[y-1]=arguments[y];if(D)w.apply(this,x);else for(D=w.length,w=k(w,D),E=0;E<D;++E)w[E].apply(this,x)}return!0};m.prototype.addListener=function(v,w){return h(this,v,w,!1)};m.prototype.on=m.prototype.addListener;m.prototype.prependListener=function(v,w){return h(this,v,w,!0)};m.prototype.once=function(v,w){if("function"!==typeof w)throw new TypeError('"listener" argument must be a function');
this.on(v,e(this,v,w));return this};m.prototype.prependOnceListener=function(v,w){if("function"!==typeof w)throw new TypeError('"listener" argument must be a function');this.prependListener(v,e(this,v,w));return this};m.prototype.removeListener=function(v,w){var y;if("function"!==typeof w)throw new TypeError('"listener" argument must be a function');var D=this._events;if(!D)return this;var x=D[v];if(!x)return this;if(x===w||x.listener===w)0===--this._eventsCount?this._events=f(null):(delete D[v],
D.removeListener&&this.emit("removeListener",v,x.listener||w));else if("function"!==typeof x){var E=-1;for(y=x.length-1;0<=y;y--)if(x[y]===w||x[y].listener===w){var B=x[y].listener;E=y;break}if(0>E)return this;if(0===E)x.shift();else{y=E+1;for(var t=x.length;y<t;E+=1,y+=1)x[E]=x[y];x.pop()}1===x.length&&(D[v]=x[0]);D.removeListener&&this.emit("removeListener",v,B||w)}return this};m.prototype.removeAllListeners=function(v){var w=this._events;if(!w)return this;if(!w.removeListener)return 0===arguments.length?
(this._events=f(null),this._eventsCount=0):w[v]&&(0===--this._eventsCount?this._events=f(null):delete w[v]),this;if(0===arguments.length){var y=d(w);for(w=0;w<y.length;++w){var D=y[w];"removeListener"!==D&&this.removeAllListeners(D)}this.removeAllListeners("removeListener");this._events=f(null);this._eventsCount=0;return this}y=w[v];if("function"===typeof y)this.removeListener(v,y);else if(y)for(w=y.length-1;0<=w;w--)this.removeListener(v,y[w]);return this};m.prototype.listeners=function(v){return a(this,
v,!0)};m.prototype.rawListeners=function(v){return a(this,v,!1)};m.listenerCount=function(v,w){return"function"===typeof v.listenerCount?v.listenerCount(w):g.call(v,w)};m.prototype.listenerCount=g;m.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],111:[function(b,F,C){(function(m){function h(H){if(2147483647<H)throw new RangeError('The value "'+H+'" is invalid for option "size"');H=new Uint8Array(H);H.__proto__=m.prototype;return H}function m(H,J,O){if("number"===
typeof H){if("string"===typeof J)throw new TypeError('The "string" argument must be of type string. Received type number');return a(H)}return l(H,J,O)}function l(H,J,O){if("string"===typeof H){var Q=J;if("string"!==typeof Q||""===Q)Q="utf8";if(!m.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);J=n(H,Q)|0;O=h(J);H=O.write(H,Q);H!==J&&(O=O.slice(0,H));return O}if(ArrayBuffer.isView(H))return g(H);if(null==H)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof H);if(G(H,ArrayBuffer)||H&&G(H.buffer,ArrayBuffer)){if(0>J||H.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<J+(O||0))throw new RangeError('"length" is outside of buffer bounds');H=void 0===J&&void 0===O?new Uint8Array(H):void 0===O?new Uint8Array(H,J):new Uint8Array(H,J,O);H.__proto__=m.prototype;return H}if("number"===typeof H)throw new TypeError('The "value" argument must not be of type number. Received type number');Q=H.valueOf&&H.valueOf();if(null!=
Q&&Q!==H)return m.from(Q,J,O);if(Q=k(H))return Q;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof H[Symbol.toPrimitive])return m.from(H[Symbol.toPrimitive]("string"),J,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);}function e(H){if("number"!==typeof H)throw new TypeError('"size" argument must be of type number');if(0>H)throw new RangeError('The value "'+H+'" is invalid for option "size"');
}function a(H){e(H);return h(0>H?0:p(H)|0)}function g(H){for(var J=0>H.length?0:p(H.length)|0,O=h(J),Q=0;Q<J;Q+=1)O[Q]=H[Q]&255;return O}function k(H){if(m.isBuffer(H)){var J=p(H.length)|0,O=h(J);if(0===O.length)return O;H.copy(O,0,0,J);return O}if(void 0!==H.length)return(J="number"!==typeof H.length)||(J=H.length,J=J!==J),J?h(0):g(H);if("Buffer"===H.type&&Array.isArray(H.data))return g(H.data)}function p(H){if(2147483647<=H)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
(2147483647).toString(16)+" bytes");return H|0}function n(H,J){if(m.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||G(H,ArrayBuffer))return H.byteLength;if("string"!==typeof H)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);var O=H.length,Q=2<arguments.length&&!0===arguments[2];if(!Q&&0===O)return 0;for(var U=!1;;)switch(J){case "ascii":case "latin1":case "binary":return O;case "utf8":case "utf-8":return E(H).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
O;case "hex":return O>>>1;case "base64":return I.toByteArray(x(H)).length;default:if(U)return Q?-1:E(H).length;J=(""+J).toLowerCase();U=!0}}function c(H,J,O){var Q=!1;if(void 0===J||0>J)J=0;if(J>this.length)return"";if(void 0===O||O>this.length)O=this.length;if(0>=O)return"";O>>>=0;J>>>=0;if(O<=J)return"";for(H||(H="utf8");;)switch(H){case "hex":H=J;J=O;O=this.length;if(!H||0>H)H=0;if(!J||0>J||J>O)J=O;Q="";for(O=H;O<J;++O)H=Q,Q=this[O],Q=16>Q?"0"+Q.toString(16):Q.toString(16),Q=H+Q;return Q;case "utf8":case "utf-8":return r(this,
J,O);case "ascii":H="";for(O=Math.min(this.length,O);J<O;++J)H+=String.fromCharCode(this[J]&127);return H;case "latin1":case "binary":H="";for(O=Math.min(this.length,O);J<O;++J)H+=String.fromCharCode(this[J]);return H;case "base64":return J=0===J&&O===this.length?I.fromByteArray(this):I.fromByteArray(this.slice(J,O)),J;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":J=this.slice(J,O);O="";for(H=0;H<J.length;H+=2)O+=String.fromCharCode(J[H]+256*J[H+1]);return O;default:if(Q)throw new TypeError("Unknown encoding: "+
H);H=(H+"").toLowerCase();Q=!0}}function f(H,J,O){var Q=H[J];H[J]=H[O];H[O]=Q}function d(H,J,O,Q,U){if(0===H.length)return-1;"string"===typeof O?(Q=O,O=0):2147483647<O?O=2147483647:-2147483648>O&&(O=-2147483648);O=+O;O!==O&&(O=U?0:H.length-1);0>O&&(O=H.length+O);if(O>=H.length){if(U)return-1;O=H.length-1}else if(0>O)if(U)O=0;else return-1;"string"===typeof J&&(J=m.from(J,Q));if(m.isBuffer(J))return 0===J.length?-1:q(H,J,O,Q,U);if("number"===typeof J)return J&=255,"function"===typeof Uint8Array.prototype.indexOf?
U?Uint8Array.prototype.indexOf.call(H,J,O):Uint8Array.prototype.lastIndexOf.call(H,J,O):q(H,[J],O,Q,U);throw new TypeError("val must be string, number or Buffer");}function q(H,J,O,Q,U){function P(ea,ca){return 1===V?ea[ca]:ea.readUInt16BE(ca*V)}var V=1,Y=H.length,ba=J.length;if(void 0!==Q&&(Q=String(Q).toLowerCase(),"ucs2"===Q||"ucs-2"===Q||"utf16le"===Q||"utf-16le"===Q)){if(2>H.length||2>J.length)return-1;V=2;Y/=2;ba/=2;O/=2}if(U)for(Q=-1;O<Y;O++)if(P(H,O)===P(J,-1===Q?0:O-Q)){if(-1===Q&&(Q=O),
O-Q+1===ba)return Q*V}else-1!==Q&&(O-=O-Q),Q=-1;else for(O+ba>Y&&(O=Y-ba);0<=O;O--){Y=!0;for(Q=0;Q<ba;Q++)if(P(H,O+Q)!==P(J,Q)){Y=!1;break}if(Y)return O}return-1}function r(H,J,O){O=Math.min(H.length,O);for(var Q=[];J<O;){var U=H[J],P=null,V=239<U?4:223<U?3:191<U?2:1;if(J+V<=O)switch(V){case 1:128>U&&(P=U);break;case 2:var Y=H[J+1];128===(Y&192)&&(U=(U&31)<<6|Y&63,127<U&&(P=U));break;case 3:Y=H[J+1];var ba=H[J+2];128===(Y&192)&&128===(ba&192)&&(U=(U&15)<<12|(Y&63)<<6|ba&63,2047<U&&(55296>U||57343<
U)&&(P=U));break;case 4:Y=H[J+1];ba=H[J+2];var ea=H[J+3];128===(Y&192)&&128===(ba&192)&&128===(ea&192)&&(U=(U&15)<<18|(Y&63)<<12|(ba&63)<<6|ea&63,65535<U&&1114112>U&&(P=U))}null===P?(P=65533,V=1):65535<P&&(P-=65536,Q.push(P>>>10&1023|55296),P=56320|P&1023);Q.push(P);J+=V}H=Q.length;if(H<=M)Q=String.fromCharCode.apply(String,Q);else{O="";for(J=0;J<H;)O+=String.fromCharCode.apply(String,Q.slice(J,J+=M));Q=O}return Q}function u(H,J,O){if(0!==H%1||0>H)throw new RangeError("offset is not uint");if(H+J>
O)throw new RangeError("Trying to access beyond buffer length");}function v(H,J,O,Q,U,P){if(!m.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>U||J<P)throw new RangeError('"value" argument is out of bounds');if(O+Q>H.length)throw new RangeError("Index out of range");}function w(H,J,O,Q,U,P){if(O+Q>H.length)throw new RangeError("Index out of range");if(0>O)throw new RangeError("Index out of range");}function y(H,J,O,Q,U){J=+J;O>>>=0;U||w(H,J,O,4,3.4028234663852886E38,
-3.4028234663852886E38);L.write(H,J,O,Q,23,4);return O+4}function D(H,J,O,Q,U){J=+J;O>>>=0;U||w(H,J,O,8,1.7976931348623157E308,-1.7976931348623157E308);L.write(H,J,O,Q,52,8);return O+8}function x(H){H=H.split("\x3d")[0];H=H.trim().replace(N,"");if(2>H.length)return"";for(;0!==H.length%4;)H+="\x3d";return H}function E(H,J){J=J||Infinity;for(var O,Q=H.length,U=null,P=[],V=0;V<Q;++V){O=H.charCodeAt(V);if(55295<O&&57344>O){if(!U){if(56319<O){-1<(J-=3)&&P.push(239,191,189);continue}else if(V+1===Q){-1<
(J-=3)&&P.push(239,191,189);continue}U=O;continue}if(56320>O){-1<(J-=3)&&P.push(239,191,189);U=O;continue}O=(U-55296<<10|O-56320)+65536}else U&&-1<(J-=3)&&P.push(239,191,189);U=null;if(128>O){if(0>--J)break;P.push(O)}else if(2048>O){if(0>(J-=2))break;P.push(O>>6|192,O&63|128)}else if(65536>O){if(0>(J-=3))break;P.push(O>>12|224,O>>6&63|128,O&63|128)}else if(1114112>O){if(0>(J-=4))break;P.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw Error("Invalid code point");}return P}function B(H){for(var J=
[],O=0;O<H.length;++O)J.push(H.charCodeAt(O)&255);return J}function t(H,J,O,Q){for(var U=0;U<Q&&!(U+O>=J.length||U>=H.length);++U)J[U+O]=H[U];return U}function G(H,J){return H instanceof J||null!=H&&null!=H.constructor&&null!=H.constructor.name&&H.constructor.name===J.name}var I=b("base64-js"),L=b("ieee754");C.Buffer=m;C.SlowBuffer=function(H){+H!=H&&(H=0);return m.alloc(+H)};C.INSPECT_MAX_BYTES=50;C.kMaxLength=2147483647;m.TYPED_ARRAY_SUPPORT=function(){try{var H=new Uint8Array(1);H.__proto__={__proto__:Uint8Array.prototype,
foo:function(){return 42}};return 42===H.foo()}catch(J){return!1}}();m.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}});Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}});
"undefined"!==typeof Symbol&&null!=Symbol.species&&m[Symbol.species]===m&&Object.defineProperty(m,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});m.poolSize=8192;m.from=function(H,J,O){return l(H,J,O)};m.prototype.__proto__=Uint8Array.prototype;m.__proto__=Uint8Array;m.alloc=function(H,J,O){e(H);H=0>=H?h(H):void 0!==J?"string"===typeof O?h(H).fill(J,O):h(H).fill(J):h(H);return H};m.allocUnsafe=function(H){return a(H)};m.allocUnsafeSlow=function(H){return a(H)};m.isBuffer=function(H){return null!=
H&&!0===H._isBuffer&&H!==m.prototype};m.compare=function(H,J){G(H,Uint8Array)&&(H=m.from(H,H.offset,H.byteLength));G(J,Uint8Array)&&(J=m.from(J,J.offset,J.byteLength));if(!m.isBuffer(H)||!m.isBuffer(J))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===J)return 0;for(var O=H.length,Q=J.length,U=0,P=Math.min(O,Q);U<P;++U)if(H[U]!==J[U]){O=H[U];Q=J[U];break}return O<Q?-1:Q<O?1:0};m.isEncoding=function(H){switch(String(H).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};m.concat=function(H,J){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(0===H.length)return m.alloc(0);var O;if(void 0===J)for(O=J=0;O<H.length;++O)J+=H[O].length;J=m.allocUnsafe(J);var Q=0;for(O=0;O<H.length;++O){var U=H[O];G(U,Uint8Array)&&(U=m.from(U));if(!m.isBuffer(U))throw new TypeError('"list" argument must be an Array of Buffers');U.copy(J,Q);Q+=U.length}return J};m.byteLength=n;m.prototype._isBuffer=!0;m.prototype.swap16=function(){var H=
this.length;if(0!==H%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var J=0;J<H;J+=2)f(this,J,J+1);return this};m.prototype.swap32=function(){var H=this.length;if(0!==H%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var J=0;J<H;J+=4)f(this,J,J+3),f(this,J+1,J+2);return this};m.prototype.swap64=function(){var H=this.length;if(0!==H%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var J=0;J<H;J+=8)f(this,J,J+7),f(this,J+1,J+6),
f(this,J+2,J+5),f(this,J+3,J+4);return this};m.prototype.toString=function(){var H=this.length;return 0===H?"":0===arguments.length?r(this,0,H):c.apply(this,arguments)};m.prototype.toLocaleString=m.prototype.toString;m.prototype.equals=function(H){if(!m.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H?!0:0===m.compare(this,H)};m.prototype.inspect=function(){var H=C.INSPECT_MAX_BYTES;var J=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim();this.length>H&&(J+=" ... ");
return"\x3cBuffer "+J+"\x3e"};m.prototype.compare=function(H,J,O,Q,U){G(H,Uint8Array)&&(H=m.from(H,H.offset,H.byteLength));if(!m.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);void 0===J&&(J=0);void 0===O&&(O=H?H.length:0);void 0===Q&&(Q=0);void 0===U&&(U=this.length);if(0>J||O>H.length||0>Q||U>this.length)throw new RangeError("out of range index");if(Q>=U&&J>=O)return 0;if(Q>=U)return-1;if(J>=O)return 1;J>>>=0;O>>>=0;Q>>>=
0;U>>>=0;if(this===H)return 0;var P=U-Q,V=O-J,Y=Math.min(P,V);Q=this.slice(Q,U);H=H.slice(J,O);for(J=0;J<Y;++J)if(Q[J]!==H[J]){P=Q[J];V=H[J];break}return P<V?-1:V<P?1:0};m.prototype.includes=function(H,J,O){return-1!==this.indexOf(H,J,O)};m.prototype.indexOf=function(H,J,O){return d(this,H,J,O,!0)};m.prototype.lastIndexOf=function(H,J,O){return d(this,H,J,O,!1)};m.prototype.write=function(H,J,O,Q){if(void 0===J)Q="utf8",O=this.length,J=0;else if(void 0===O&&"string"===typeof J)Q=J,O=this.length,J=
0;else if(isFinite(J))J>>>=0,isFinite(O)?(O>>>=0,void 0===Q&&(Q="utf8")):(Q=O,O=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var U=this.length-J;if(void 0===O||O>U)O=U;if(0<H.length&&(0>O||0>J)||J>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");for(U=!1;;)switch(Q){case "hex":a:{J=Number(J)||0;Q=this.length-J;O?(O=Number(O),O>Q&&(O=Q)):O=Q;Q=H.length;O>Q/2&&(O=Q/2);for(Q=0;Q<O;++Q){U=parseInt(H.substr(2*
Q,2),16);if(U!==U){H=Q;break a}this[J+Q]=U}H=Q}return H;case "utf8":case "utf-8":return t(E(H,this.length-J),this,J,O);case "ascii":return t(B(H),this,J,O);case "latin1":case "binary":return t(B(H),this,J,O);case "base64":return t(I.toByteArray(x(H)),this,J,O);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":Q=H;U=this.length-J;for(var P=[],V=0;V<Q.length&&!(0>(U-=2));++V){var Y=Q.charCodeAt(V);H=Y>>8;Y%=256;P.push(Y);P.push(H)}return t(P,this,J,O);default:if(U)throw new TypeError("Unknown encoding: "+
Q);Q=(""+Q).toLowerCase();U=!0}};m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;m.prototype.slice=function(H,J){var O=this.length;H=~~H;J=void 0===J?O:~~J;0>H?(H+=O,0>H&&(H=0)):H>O&&(H=O);0>J?(J+=O,0>J&&(J=0)):J>O&&(J=O);J<H&&(J=H);H=this.subarray(H,J);H.__proto__=m.prototype;return H};m.prototype.readUIntLE=function(H,J,O){H>>>=0;J>>>=0;O||u(H,J,this.length);O=this[H];for(var Q=1,U=0;++U<J&&(Q*=256);)O+=this[H+U]*Q;return O};m.prototype.readUIntBE=
function(H,J,O){H>>>=0;J>>>=0;O||u(H,J,this.length);O=this[H+--J];for(var Q=1;0<J&&(Q*=256);)O+=this[H+--J]*Q;return O};m.prototype.readUInt8=function(H,J){H>>>=0;J||u(H,1,this.length);return this[H]};m.prototype.readUInt16LE=function(H,J){H>>>=0;J||u(H,2,this.length);return this[H]|this[H+1]<<8};m.prototype.readUInt16BE=function(H,J){H>>>=0;J||u(H,2,this.length);return this[H]<<8|this[H+1]};m.prototype.readUInt32LE=function(H,J){H>>>=0;J||u(H,4,this.length);return(this[H]|this[H+1]<<8|this[H+2]<<
16)+16777216*this[H+3]};m.prototype.readUInt32BE=function(H,J){H>>>=0;J||u(H,4,this.length);return 16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])};m.prototype.readIntLE=function(H,J,O){H>>>=0;J>>>=0;O||u(H,J,this.length);O=this[H];for(var Q=1,U=0;++U<J&&(Q*=256);)O+=this[H+U]*Q;O>=128*Q&&(O-=Math.pow(2,8*J));return O};m.prototype.readIntBE=function(H,J,O){H>>>=0;J>>>=0;O||u(H,J,this.length);O=J;for(var Q=1,U=this[H+--O];0<O&&(Q*=256);)U+=this[H+--O]*Q;U>=128*Q&&(U-=Math.pow(2,8*J));return U};
m.prototype.readInt8=function(H,J){H>>>=0;J||u(H,1,this.length);return this[H]&128?-1*(255-this[H]+1):this[H]};m.prototype.readInt16LE=function(H,J){H>>>=0;J||u(H,2,this.length);H=this[H]|this[H+1]<<8;return H&32768?H|4294901760:H};m.prototype.readInt16BE=function(H,J){H>>>=0;J||u(H,2,this.length);H=this[H+1]|this[H]<<8;return H&32768?H|4294901760:H};m.prototype.readInt32LE=function(H,J){H>>>=0;J||u(H,4,this.length);return this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24};m.prototype.readInt32BE=
function(H,J){H>>>=0;J||u(H,4,this.length);return this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]};m.prototype.readFloatLE=function(H,J){H>>>=0;J||u(H,4,this.length);return L.read(this,H,!0,23,4)};m.prototype.readFloatBE=function(H,J){H>>>=0;J||u(H,4,this.length);return L.read(this,H,!1,23,4)};m.prototype.readDoubleLE=function(H,J){H>>>=0;J||u(H,8,this.length);return L.read(this,H,!0,52,8)};m.prototype.readDoubleBE=function(H,J){H>>>=0;J||u(H,8,this.length);return L.read(this,H,!1,52,8)};m.prototype.writeUIntLE=
function(H,J,O,Q){H=+H;J>>>=0;O>>>=0;Q||v(this,H,J,O,Math.pow(2,8*O)-1,0);Q=1;var U=0;for(this[J]=H&255;++U<O&&(Q*=256);)this[J+U]=H/Q&255;return J+O};m.prototype.writeUIntBE=function(H,J,O,Q){H=+H;J>>>=0;O>>>=0;Q||v(this,H,J,O,Math.pow(2,8*O)-1,0);Q=O-1;var U=1;for(this[J+Q]=H&255;0<=--Q&&(U*=256);)this[J+Q]=H/U&255;return J+O};m.prototype.writeUInt8=function(H,J,O){H=+H;J>>>=0;O||v(this,H,J,1,255,0);this[J]=H&255;return J+1};m.prototype.writeUInt16LE=function(H,J,O){H=+H;J>>>=0;O||v(this,H,J,2,
65535,0);this[J]=H&255;this[J+1]=H>>>8;return J+2};m.prototype.writeUInt16BE=function(H,J,O){H=+H;J>>>=0;O||v(this,H,J,2,65535,0);this[J]=H>>>8;this[J+1]=H&255;return J+2};m.prototype.writeUInt32LE=function(H,J,O){H=+H;J>>>=0;O||v(this,H,J,4,4294967295,0);this[J+3]=H>>>24;this[J+2]=H>>>16;this[J+1]=H>>>8;this[J]=H&255;return J+4};m.prototype.writeUInt32BE=function(H,J,O){H=+H;J>>>=0;O||v(this,H,J,4,4294967295,0);this[J]=H>>>24;this[J+1]=H>>>16;this[J+2]=H>>>8;this[J+3]=H&255;return J+4};m.prototype.writeIntLE=
function(H,J,O,Q){H=+H;J>>>=0;Q||(Q=Math.pow(2,8*O-1),v(this,H,J,O,Q-1,-Q));Q=0;var U=1,P=0;for(this[J]=H&255;++Q<O&&(U*=256);)0>H&&0===P&&0!==this[J+Q-1]&&(P=1),this[J+Q]=(H/U>>0)-P&255;return J+O};m.prototype.writeIntBE=function(H,J,O,Q){H=+H;J>>>=0;Q||(Q=Math.pow(2,8*O-1),v(this,H,J,O,Q-1,-Q));Q=O-1;var U=1,P=0;for(this[J+Q]=H&255;0<=--Q&&(U*=256);)0>H&&0===P&&0!==this[J+Q+1]&&(P=1),this[J+Q]=(H/U>>0)-P&255;return J+O};m.prototype.writeInt8=function(H,J,O){H=+H;J>>>=0;O||v(this,H,J,1,127,-128);
0>H&&(H=255+H+1);this[J]=H&255;return J+1};m.prototype.writeInt16LE=function(H,J,O){H=+H;J>>>=0;O||v(this,H,J,2,32767,-32768);this[J]=H&255;this[J+1]=H>>>8;return J+2};m.prototype.writeInt16BE=function(H,J,O){H=+H;J>>>=0;O||v(this,H,J,2,32767,-32768);this[J]=H>>>8;this[J+1]=H&255;return J+2};m.prototype.writeInt32LE=function(H,J,O){H=+H;J>>>=0;O||v(this,H,J,4,2147483647,-2147483648);this[J]=H&255;this[J+1]=H>>>8;this[J+2]=H>>>16;this[J+3]=H>>>24;return J+4};m.prototype.writeInt32BE=function(H,J,O){H=
+H;J>>>=0;O||v(this,H,J,4,2147483647,-2147483648);0>H&&(H=4294967295+H+1);this[J]=H>>>24;this[J+1]=H>>>16;this[J+2]=H>>>8;this[J+3]=H&255;return J+4};m.prototype.writeFloatLE=function(H,J,O){return y(this,H,J,!0,O)};m.prototype.writeFloatBE=function(H,J,O){return y(this,H,J,!1,O)};m.prototype.writeDoubleLE=function(H,J,O){return D(this,H,J,!0,O)};m.prototype.writeDoubleBE=function(H,J,O){return D(this,H,J,!1,O)};m.prototype.copy=function(H,J,O,Q){if(!m.isBuffer(H))throw new TypeError("argument should be a Buffer");
O||(O=0);Q||0===Q||(Q=this.length);J>=H.length&&(J=H.length);J||(J=0);0<Q&&Q<O&&(Q=O);if(Q===O||0===H.length||0===this.length)return 0;if(0>J)throw new RangeError("targetStart out of bounds");if(0>O||O>=this.length)throw new RangeError("Index out of range");if(0>Q)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length);H.length-J<Q-O&&(Q=H.length-J+O);var U=Q-O;if(this===H&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(J,O,Q);else if(this===H&&O<J&&J<Q)for(Q=
U-1;0<=Q;--Q)H[Q+J]=this[Q+O];else Uint8Array.prototype.set.call(H,this.subarray(O,Q),J);return U};m.prototype.fill=function(H,J,O,Q){if("string"===typeof H){"string"===typeof J?(Q=J,J=0,O=this.length):"string"===typeof O&&(Q=O,O=this.length);if(void 0!==Q&&"string"!==typeof Q)throw new TypeError("encoding must be a string");if("string"===typeof Q&&!m.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(1===H.length){var U=H.charCodeAt(0);if("utf8"===Q&&128>U||"latin1"===Q)H=U}}else"number"===
typeof H&&(H&=255);if(0>J||this.length<J||this.length<O)throw new RangeError("Out of range index");if(O<=J)return this;J>>>=0;O=void 0===O?this.length:O>>>0;H||(H=0);if("number"===typeof H)for(Q=J;Q<O;++Q)this[Q]=H;else{U=m.isBuffer(H)?H:m.from(H,Q);var P=U.length;if(0===P)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(Q=0;Q<O-J;++Q)this[Q+J]=U[Q%P]}return this};var N=/[^+/0-9A-Za-z-_]/g}).call(this,b("buffer").Buffer)},{"base64-js":79,buffer:111,ieee754:416}],112:[function(b,
F,C){function m(p){return[Math.min(p[0],p[1]),Math.max(p[0],p[1])]}function h(p,n){return p[0]-n[0]||p[1]-n[1]}function l(p,n,c){return n in p?p[n]:c}var e=b("./lib/monotone"),a=b("./lib/triangulation"),g=b("./lib/delaunay"),k=b("./lib/filter");F.exports=function(p,n,c){Array.isArray(n)?(c=c||{},n=n||[]):(c=n||{},n=[]);var f=!!l(c,"delaunay",!0),d=!!l(c,"interior",!0),q=!!l(c,"exterior",!0);c=!!l(c,"infinity",!1);if(!d&&!q||0===p.length)return[];var r=e(p,n);if(f||d!==q||c){n=a(p.length,n.map(m).sort(h));
for(var u=0;u<r.length;++u){var v=r[u];n.addTriangle(v[0],v[1],v[2])}f&&g(p,n);return q?d?c?k(n,0,c):n.cells():k(n,1,c):k(n,-1)}return r}},{"./lib/delaunay":113,"./lib/filter":114,"./lib/monotone":115,"./lib/triangulation":116}],113:[function(b,F,C){function m(l,e,a,g,k,p){var n=e.opposite(g,k);if(!(0>n)){if(k<g){var c=g;g=k;k=c;c=p;p=n;n=c}e.isConstraint(g,k)||0>h(l[g],l[k],l[p],l[n])&&a.push(g,k)}}var h=b("robust-in-sphere")[4];b("binary-search-bounds");F.exports=function(l,e){for(var a=[],g=l.length,
k=e.stars,p=0;p<g;++p)for(var n=k[p],c=1;c<n.length;c+=2){var f=n[c];if(!(f<p||e.isConstraint(p,f))){for(var d=n[c-1],q=-1,r=1;r<n.length;r+=2)if(n[r-1]===f){q=n[r];break}0>q||0>h(l[p],l[f],l[d],l[q])&&a.push(p,f)}}for(;0<a.length;){f=a.pop();p=a.pop();q=d=-1;n=k[p];for(g=1;g<n.length;g+=2)c=n[g-1],r=n[g],c===f?q=r:r===f&&(d=c);0>d||0>q||0<=h(l[p],l[f],l[d],l[q])||(e.flip(p,f),m(l,e,a,d,p,q),m(l,e,a,p,q,d),m(l,e,a,q,f,d),m(l,e,a,f,d,q))}}},{"binary-search-bounds":96,"robust-in-sphere":518}],114:[function(b,
F,C){function m(e,a,g,k,p,n,c){this.cells=e;this.neighbor=a;this.flags=k;this.constraint=g;this.active=p;this.next=n;this.boundary=c}function h(e,a){return e[0]-a[0]||e[1]-a[1]||e[2]-a[2]}var l=b("binary-search-bounds");F.exports=function(e,a,g){for(var k=e.cells(),p=k.length,n=0;n<p;++n){var c=k[n],f=c[0],d=c[1],q=c[2];d<q?d<f&&(c[0]=d,c[1]=q,c[2]=f):q<f&&(c[0]=q,c[1]=f,c[2]=d)}k.sort(h);var r=Array(p);for(n=0;n<r.length;++n)r[n]=0;var u=[],v=[],w=Array(3*p),y=Array(3*p),D=null;g&&(D=[]);q=new m(k,
w,y,r,u,v,D);for(n=0;n<p;++n){c=k[n];for(var x=0;3>x;++x){f=c[x];d=c[(x+1)%3];var E=w[3*n+x]=q.locate(d,f,e.opposite(d,f)),B=y[3*n+x]=e.isConstraint(f,d);0>E&&(B?v.push(n):(u.push(n),r[n]=1),g&&D.push([d,f,-1]))}}if(0===a)return g?q.cells.concat(q.boundary):q.cells;p=1;n=q.active;c=q.next;e=q.flags;k=q.cells;f=q.constraint;for(d=q.neighbor;0<n.length||0<c.length;){for(;0<n.length;)if(r=n.pop(),e[r]!==-p)for(e[r]=p,u=0;3>u;++u)v=d[3*r+u],0<=v&&0===e[v]&&(f[3*r+u]?c.push(v):(n.push(v),e[v]=p));r=c;
c=n;n=r;c.length=0;p=-p}for(n=p=0;n<k.length;++n)e[n]===a&&(k[p++]=k[n]);k.length=p;return g?k.concat(q.boundary):k};m.prototype.locate=function(){var e=[0,0,0];return function(a,g,k){var p=a,n=g,c=k;g<k?g<a&&(p=g,n=k,c=a):k<a&&(p=k,n=a,c=g);if(0>p)return-1;e[0]=p;e[1]=n;e[2]=c;return l.eq(this.cells,e,h)}}()},{"binary-search-bounds":96}],115:[function(b,F,C){function m(p,n,c,f,d){this.a=p;this.b=n;this.idx=c;this.lowerIds=f;this.upperIds=d}function h(p,n,c,f){this.a=p;this.b=n;this.type=c;this.idx=
f}function l(p,n){var c=p.a[0]-n.a[0]||p.a[1]-n.a[1]||p.type-n.type;return c||0!==p.type&&(c=k(p.a,p.b,n.b))?c:p.idx-n.idx}function e(p,n){return k(p.a,p.b,n)}function a(p,n){var c;return(c=p.a[0]<n.a[0]?k(p.a,p.b,n.a):k(n.b,n.a,p.a))?c:(c=n.b[0]<p.b[0]?k(p.a,p.b,n.b):k(n.b,n.a,p.b))||p.idx-n.idx}var g=b("binary-search-bounds"),k=b("robust-orientation")[3];F.exports=function(p,n){for(var c=p.length,f=n.length,d=[],q=0;q<c;++q)d.push(new h(p[q],null,0,q));for(q=0;q<f;++q){var r=n[q];c=p[r[0]];r=p[r[1]];
c[0]<r[0]?d.push(new h(c,r,2,q),new h(r,c,1,q)):c[0]>r[0]&&d.push(new h(r,c,2,q),new h(c,r,1,q))}d.sort(l);q=d[0].a[0]-(1+Math.abs(d[0].a[0]))*Math.pow(2,-52);n=[new m([q,1],[q,0],-1,[],[],[],[])];f=[];q=0;for(c=d.length;q<c;++q){var u=d[q];r=u.type;if(0===r){r=f;var v=n,w=p,y=u.a;u=u.idx;for(var D=g.lt(v,y,e),x=g.gt(v,y,e);D<x;++D){for(var E=v[D],B=E.lowerIds,t=B.length;1<t&&0<k(w[B[t-2]],w[B[t-1]],y);)r.push([B[t-1],B[t-2],u]),--t;B.length=t;B.push(u);E=E.upperIds;for(t=E.length;1<t&&0>k(w[E[t-
2]],w[E[t-1]],y);)r.push([E[t-2],E[t-1],u]),--t;E.length=t;E.push(u)}}else 2===r?(r=n,v=u,w=g.le(r,v,a),y=r[w],u=y.upperIds,x=u[u.length-1],y.upperIds=[x],r.splice(w+1,0,new m(v.a,v.b,v.idx,[x],u))):(r=n,v=u,w=v.a,v.a=v.b,v.b=w,v=g.eq(r,v,a),r[v-1].upperIds=r[v].upperIds,r.splice(v,1))}return f}},{"binary-search-bounds":96,"robust-orientation":520}],116:[function(b,F,C){function m(e,a){this.stars=e;this.edges=a}function h(e,a,g){for(var k=1,p=e.length;k<p;k+=2)if(e[k-1]===a&&e[k]===g){e[k-1]=e[p-
2];e[k]=e[p-1];e.length=p-2;break}}var l=b("binary-search-bounds");F.exports=function(e,a){for(var g=Array(e),k=0;k<e;++k)g[k]=[];return new m(g,a)};b=m.prototype;b.isConstraint=function(){function e(g,k){return g[0]-k[0]||g[1]-k[1]}var a=[0,0];return function(g,k){a[0]=Math.min(g,k);a[1]=Math.max(g,k);return 0<=l.eq(this.edges,a,e)}}();b.removeTriangle=function(e,a,g){var k=this.stars;h(k[e],a,g);h(k[a],g,e);h(k[g],e,a)};b.addTriangle=function(e,a,g){var k=this.stars;k[e].push(a,g);k[a].push(g,e);
k[g].push(e,a)};b.opposite=function(e,a){a=this.stars[a];for(var g=1,k=a.length;g<k;g+=2)if(a[g]===e)return a[g-1];return-1};b.flip=function(e,a){var g=this.opposite(e,a),k=this.opposite(a,e);this.removeTriangle(e,a,g);this.removeTriangle(a,e,k);this.addTriangle(e,k,g);this.addTriangle(a,g,k)};b.edges=function(){for(var e=this.stars,a=[],g=0,k=e.length;g<k;++g)for(var p=e[g],n=0,c=p.length;n<c;n+=2)a.push([p[n],p[n+1]]);return a};b.cells=function(){for(var e=this.stars,a=[],g=0,k=e.length;g<k;++g)for(var p=
e[g],n=0,c=p.length;n<c;n+=2){var f=p[n],d=p[n+1];g<Math.min(f,d)&&a.push([g,f,d])}return a}},{"binary-search-bounds":96}],117:[function(b,F,C){F.exports=function(m){for(var h=1,l=1;l<m.length;++l)for(var e=0;e<l;++e)if(m[l]<m[e])h=-h;else if(m[e]===m[l])return 0;return h}},{}],118:[function(b,F,C){function m(g,k){for(var p=0,n=g.length,c=0;c<n;++c)p+=g[c]*k[c];return p}function h(g){var k=g.length;if(0===k)return[];for(var p=e([g.length+1,g.length+1],1),n=e([g.length+1],1),c=p[k][k]=0;c<k;++c){for(var f=
0;f<=c;++f)p[f][c]=p[c][f]=2*m(g[c],g[f]);n[c]=m(g[c],g[c])}g=a(p,n);p=0;n=g[k+1];for(c=0;c<n.length;++c)p+=n[c];var d=Array(k);for(c=0;c<k;++c){n=g[c];var q=0;for(f=0;f<n.length;++f)q+=n[f];d[c]=q/p}return d}function l(g){if(0===g.length)return[];for(var k=g[0].length,p=e([k]),n=h(g),c=0;c<g.length;++c)for(var f=0;f<k;++f)p[f]+=g[c][f]*n[c];return p}var e=b("dup"),a=b("robust-linear-solve");l.barycenetric=h;F.exports=l},{dup:176,"robust-linear-solve":519}],119:[function(b,F,C){F.exports=function(h){for(var l=
m(h),e=0,a=0;a<h.length;++a)for(var g=h[a],k=0;k<l.length;++k)e+=Math.pow(g[k]-l[k],2);return Math.sqrt(e/h.length)};var m=b("circumcenter")},{circumcenter:118}],120:[function(b,F,C){F.exports=function(m,h,l){return h<l?m<h?h:m>l?l:m:m<l?l:m>h?h:m}},{}],121:[function(b,F,C){function m(x){x=v(x);return[y(x,-Infinity),y(x,Infinity)]}function h(x){for(var E=Array(x.length),B=0;B<x.length;++B){var t=x[B];E[B]=[y(t[0],-Infinity),y(t[1],-Infinity),y(t[0],Infinity),y(t[1],Infinity)]}return E}function l(x,
E,B){var t=[];d(B,function(G,I){var L=E[G],M=E[I];L[0]!==M[0]&&L[0]!==M[1]&&L[1]!==M[0]&&L[1]!==M[1]&&q(x[L[0]],x[L[1]],x[M[0]],x[M[1]])&&t.push([G,I])});return t}function e(x,E,B,t){var G=[];d(B,t,function(I,L){var M=E[I];if(M[0]!==L&&M[1]!==L){var N=x[L];q(x[M[0]],x[M[1]],N,N)&&G.push([I,L])}});return G}function a(x,E,B,t,G){var I,L=x.map(function(P){return[r(P[0]),r(P[1])]});for(I=0;I<B.length;++I){var M=B[I];var N=M[0];M=M[1];var H=E[N],J=E[M];if(H=D(w(x[H[0]]),w(x[H[1]]),w(x[J[0]]),w(x[J[1]])))J=
x.length,x.push([v(H[0]),v(H[1])]),L.push(H),t.push([N,J],[M,J])}t.sort(function(P,V){if(P[0]!==V[0])return P[0]-V[0];P=L[P[1]];V=L[V[1]];return u(P[0],V[0])||u(P[1],V[1])});for(I=t.length-1;0<=I;--I){M=t[I];N=M[0];H=E[N];J=H[0];B=H[1];var O=x[J],Q=x[B];0>(O[0]-Q[0]||O[1]-Q[1])&&(O=J,J=B,B=O);H[0]=J;J=H[1]=M[1];var U;for(G&&(U=H[2]);0<I&&t[I-1][0]===N;)M=t[--I],M=M[1],G?E.push([J,M,U]):E.push([J,M]),J=M;G?E.push([J,B,U]):E.push([J,B])}return L}function g(x,E,B){B=E.length;for(var t=new f(B),G=[],
I=0;I<E.length;++I){var L=E[I],M=m(L[0]);L=m(L[1]);G.push([y(M[0],-Infinity),y(L[0],-Infinity),y(M[1],Infinity),y(L[1],Infinity)])}d(G,function(N,H){t.link(N,H)});M=!0;E=Array(B);for(I=0;I<B;++I)G=t.find(I),G!==I&&(M=!1,x[G]=[Math.min(x[I][0],x[G][0]),Math.min(x[I][1],x[G][1])]);if(M)return null;for(I=M=0;I<B;++I)G=t.find(I),G===I?(E[I]=M,x[M++]=x[I]):E[I]=-1;x.length=M;for(I=0;I<B;++I)0>E[I]&&(E[I]=E[t.find(I)]);return E}function k(x,E){return x[0]-E[0]||x[1]-E[1]}function p(x,E){var B=x[0]-E[0]||
x[1]-E[1];return B?B:x[2]<E[2]?-1:x[2]>E[2]?1:0}function n(x,E,B){if(0!==x.length){if(E)for(var t=0;t<x.length;++t){var G=x[t],I=E[G[0]],L=E[G[1]];G[0]=Math.min(I,L);G[1]=Math.max(I,L)}else for(t=0;t<x.length;++t)G=x[t],I=G[0],L=G[1],G[0]=Math.min(I,L),G[1]=Math.max(I,L);B?x.sort(p):x.sort(k);for(t=E=1;t<x.length;++t)if(G=x[t-1],I=x[t],I[0]!==G[0]||I[1]!==G[1]||B&&I[2]!==G[2])x[E++]=I;x.length=E}}function c(x,E,B){for(var t=Array(E.length),G=0;G<E.length;++G){var I=E[G],L=x[I[0]];I=x[I[1]];t[G]=[y(Math.min(L[0],
I[0]),-Infinity),y(Math.min(L[1],I[1]),-Infinity),y(Math.max(L[0],I[0]),Infinity),y(Math.max(L[1],I[1]),Infinity)]}G=l(x,E,t);L=h(x);t=e(x,E,t,L);I=a(x,E,G,t,B);x=g(x,I,L);n(E,x,B);return x?!0:0<G.length||0<t.length}F.exports=function(x,E,B){if(B){var t=E;for(var G=Array(E.length),I=0;I<E.length;++I){var L=E[I];G[I]=[L[0],L[1],B[I]]}E=G}I=E;L=!!B;G=g(x,[],h(x));n(I,G,L);for(G=!!G;c(x,E,!!B);)G=!0;if(B&&G)for(t.length=0,I=B.length=0;I<E.length;++I)L=E[I],t.push([L[0],L[1]]),B.push(L[2]);return G};
var f=b("union-find"),d=b("box-intersect"),q=b("robust-segment-intersect"),r=b("big-rat"),u=b("big-rat/cmp"),v=b("big-rat/to-float"),w=b("rat-vec"),y=b("nextafter"),D=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":122,"big-rat":83,"big-rat/cmp":81,"big-rat/to-float":95,"box-intersect":101,nextafter:470,"rat-vec":504,"robust-segment-intersect":523,"union-find":568}],122:[function(b,F,C){function m(n,c){return e(h(n[0],c[1]),h(n[1],c[0]))}F.exports=function(n,c,f,d){c=g(c,n);var q=g(d,f);
d=m(c,q);if(0===a(d))return null;f=g(n,f);f=m(q,f);f=l(f,d);c=p(c,f);return k(n,c)};var h=b("big-rat/mul"),l=b("big-rat/div"),e=b("big-rat/sub"),a=b("big-rat/sign"),g=b("rat-vec/sub"),k=b("rat-vec/add"),p=b("rat-vec/muls")},{"big-rat/div":82,"big-rat/mul":92,"big-rat/sign":93,"big-rat/sub":94,"rat-vec/add":503,"rat-vec/muls":505,"rat-vec/sub":506}],123:[function(b,F,C){function m(l,e){null==e&&(e=!0);var a=l[0],g=l[1],k=l[2];l=l[3];null==l&&(l=e?1:255);e&&(a*=255,g*=255,k*=255,l*=255);a=h(a,0,255)&
255;g=h(g,0,255)&255;k=h(k,0,255)&255;l=h(l,0,255)&255;return 16777216*a+(g<<16)+(k<<8)+l}var h=b("clamp");F.exports=m;F.exports.to=m;F.exports.from=function(l,e){l=+l;var a=l>>>24,g=(l&16711680)>>>16,k=(l&65280)>>>8;l&=255;return!1===e?[a,g,k,l]:[a/255,g/255,k/255,l/255]}},{clamp:120}],124:[function(b,F,C){F.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,
235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,
50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,
128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,
230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,
224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],125:[function(b,F,C){var m=b("color-rgba"),h=b("clamp"),l=b("dtype");F.exports=function(e,a){"float"!==a&&a||(a="array");"uint"===a&&(a="uint8");"uint_clamped"===a&&(a="uint8_clamped");var g=new (l(a))(4);a="uint8"!==a&&"uint8_clamped"!==a;e.length&&"string"!==typeof e||(e=m(e),e[0]/=255,e[1]/=255,e[2]/=255);var k=e;k=k instanceof Uint8Array||k instanceof
Uint8ClampedArray?!0:Array.isArray(k)&&(1<k[0]||0===k[0])&&(1<k[1]||0===k[1])&&(1<k[2]||0===k[2])&&(!k[3]||1<k[3])?!0:!1;if(k)return g[0]=e[0],g[1]=e[1],g[2]=e[2],g[3]=null!=e[3]?e[3]:255,a&&(g[0]/=255,g[1]/=255,g[2]/=255,g[3]/=255),g;a?(g[0]=e[0],g[1]=e[1],g[2]=e[2],g[3]=null!=e[3]?e[3]:1):(g[0]=h(Math.floor(255*e[0]),0,255),g[1]=h(Math.floor(255*e[1]),0,255),g[2]=h(Math.floor(255*e[2]),0,255),g[3]=null==e[3]?255:h(Math.floor(255*e[3]),0,255));return g}},{clamp:120,"color-rgba":127,dtype:175}],126:[function(b,
F,C){(function(m){var h=b("color-name"),l=b("is-plain-obj"),e=b("defined");F.exports=function(g){var k,p=[],n=1;if("string"===typeof g)if(h[g]){p=h[g].slice();var c="rgb"}else if("transparent"===g)n=0,c="rgb",p=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(g)){var f=g.slice(1),d=f.length;n=1;4>=d?(p=[parseInt(f[0]+f[0],16),parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16)],4===d&&(n=parseInt(f[3]+f[3],16)/255)):(p=[parseInt(f[0]+f[1],16),parseInt(f[2]+f[3],16),parseInt(f[4]+f[5],16)],8===d&&(n=parseInt(f[6]+
f[7],16)/255));p[0]||(p[0]=0);p[1]||(p[1]=0);p[2]||(p[2]=0);c="rgb"}else(k=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(g))?(g=k[1],n="rgb"===g,c=f=g.replace(/a$/,""),d="cmyk"===f?4:"gray"===f?1:3,p=k[2].trim().split(/\s*,\s*/).map(function(q,r){if(/%$/.test(q)){if(r===d)return parseFloat(q)/100;if("rgb"===f)return 255*parseFloat(q)/100}else if("h"===f[r]&&!/deg$/.test(q)&&void 0!==a[q])return a[q];return parseFloat(q)}),g===f&&p.push(1),n=n?1:void 0===p[d]?
1:p[d],p=p.slice(0,d)):10<g.length&&/[0-9](?:\s|\/)/.test(g)&&(p=g.match(/([0-9]+)/g).map(function(q){return parseFloat(q)}),c=g.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(g))c="rgb",p=[g>>>16,(g&65280)>>>8,g&255];else if(l(g))k=e(g.r,g.red,g.R,null),null!==k?(c="rgb",p=[k,e(g.g,g.green,g.G),e(g.b,g.blue,g.B)]):(c="hsl",p=[e(g.h,g.hue,g.H),e(g.s,g.saturation,g.S),e(g.l,g.lightness,g.L,g.b,g.brightness)]),n=e(g.a,g.alpha,g.opacity,1),null!=g.opacity&&(n/=100);else if(Array.isArray(g)||
m.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(g))p=[g[0],g[1],g[2]],c="rgb",n=4===g.length?g[3]:1;return{space:c,values:p,alpha:n}};var a={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!==typeof W?W:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"color-name":124,defined:170,"is-plain-obj":443}],127:[function(b,F,C){var m=b("color-parse"),h=b("color-space/hsl"),l=b("clamp");F.exports=function(e){var a=m(e);if(!a.space)return[];e=Array(3);
e[0]=l(a.values[0],0,255);e[1]=l(a.values[1],0,255);e[2]=l(a.values[2],0,255);"h"===a.space[0]&&(e=h.rgb(e));e.push(l(a.alpha,0,1));return e}},{clamp:120,"color-parse":126,"color-space/hsl":128}],128:[function(b,F,C){b=b("./rgb");F.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(m){var h=m[0]/360,l=m[1]/100;m=m[2]/100;if(0===l){var e=255*m;return[e,e,e]}l=.5>m?m*(1+l):m+l-m*l;m=2*m-l;var a=[0,0,0];for(var g=0;3>g;g++)e=h+1/3*-(g-
1),0>e?e++:1<e&&e--,e=1>6*e?m+6*(l-m)*e:1>2*e?l:2>3*e?m+(l-m)*(2/3-e)*6:m,a[g]=255*e;return a}};b.hsl=function(m){var h=m[0]/255,l=m[1]/255,e=m[2]/255;m=Math.min(h,l,e);var a=Math.max(h,l,e),g=a-m,k;a===m?k=0:h===a?k=(l-e)/g:l===a?k=2+(e-h)/g:e===a&&(k=4+(h-l)/g);k=Math.min(60*k,360);0>k&&(k+=360);h=(m+a)/2;return[k,100*(a===m?0:.5>=h?g/(a+m):g/(2-a-m)),100*h]}},{"./rgb":129}],129:[function(b,F,C){F.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],
130:[function(b,F,C){F.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,
6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},
{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},
{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},
{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,
0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,
rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,
44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,
rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,
0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,
rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,
rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,
196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,
rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,
rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,
185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,
157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,
52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,
rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],131:[function(b,F,C){function m(g){return[g[0]/255,g[1]/255,g[2]/
255,g[3]]}function h(g){for(var k,p="#",n=0;3>n;++n)k=g[n],k=k.toString(16),p+=("00"+k).substr(k.length);return p}function l(g){return"rgba("+g.join(",")+")"}var e=b("./colorScale"),a=b("lerp");F.exports=function(g){var k,p;g||(g={});var n=(g.nshades||72)-1;var c=g.format||"hex";(k=g.colormap)||(k="jet");if("string"===typeof k){k=k.toLowerCase();if(!e[k])throw Error(k+" not a supported colorscale");var f=e[k]}else if(Array.isArray(k))f=k.slice();else throw Error("unsupported colormap option",k);if(f.length>
n+1)throw Error(k+" map requires nshades to be at least size "+f.length);var d=Array.isArray(g.alpha)?2!==g.alpha.length?[1,1]:g.alpha.slice():"number"===typeof g.alpha?[g.alpha,g.alpha]:[1,1];g=f.map(function(D){return Math.round(D.index*n)});d[0]=Math.min(Math.max(d[0],0),1);d[1]=Math.min(Math.max(d[1],0),1);var q=f.map(function(D,x){D=f[x].index;x=f[x].rgb.slice();if(4===x.length&&0<=x[3]&&1>=x[3])return x;x[3]=d[0]+(d[1]-d[0])*D;return x});var r=[];for(p=0;p<g.length-1;++p){var u=g[p+1]-g[p];
k=q[p];var v=q[p+1];for(var w=0;w<u;w++){var y=w/u;r.push([Math.round(a(k[0],v[0],y)),Math.round(a(k[1],v[1],y)),Math.round(a(k[2],v[2],y)),a(k[3],v[3],y)])}}r.push(f[f.length-1].rgb.concat(d[1]));"hex"===c?r=r.map(h):"rgbaString"===c?r=r.map(l):"float"===c&&(r=r.map(m));return r}},{"./colorScale":130,lerp:446}],132:[function(b,F,C){function m(k,p,n){var c=e(k[0],-p[0]);k=e(k[1],-p[1]);var f=e(n[0],-p[0]);p=e(n[1],-p[1]);c=g(a(c,f),a(k,p));return 0<=c[c.length-1]}F.exports=function(k,p,n,c){var f=
h(p,n,c);if(0===f){f=l(h(k,p,n));var d=l(h(k,p,c));return f===d?0===f&&(n=m(k,p,n),k=m(k,p,c),n!==k)?n?1:-1:0:0===d?0<f?-1:m(k,p,c)?-1:1:0===f?0<d?1:m(k,p,n)?1:-1:l(d-f)}d=h(k,p,n);return 0<d?0<f&&0<h(k,p,c)?1:-1:0>d?0<f||0<h(k,p,c)?1:-1:0<h(k,p,c)?1:m(k,p,n)?1:-1};var h=b("robust-orientation"),l=b("signum"),e=b("two-sum"),a=b("robust-product"),g=b("robust-sum")},{"robust-orientation":520,"robust-product":521,"robust-sum":525,signum:526,"two-sum":555}],133:[function(b,F,C){function m(l,e){return l-
e}F.exports=function(l,e){var a=l.length,g=l.length-e.length;if(g)return g;switch(a){case 0:return 0;case 1:return l[0]-e[0];case 2:return l[0]+l[1]-e[0]-e[1]||h(l[0],l[1])-h(e[0],e[1]);case 3:a=l[0]+l[1];var k=e[0]+e[1];if(g=a+l[2]-(k+e[2]))return g;g=h(l[0],l[1]);var p=h(e[0],e[1]);return h(g,l[2])-h(p,e[2])||h(g+l[2],a)-h(p+e[2],k);case 4:g=l[0];a=l[1];k=l[2];l=l[3];p=e[0];var n=e[1],c=e[2];e=e[3];return g+a+k+l-(p+n+c+e)||h(g,a,k,l)-h(p,n,c,e,p)||h(g+a,g+k,g+l,a+k,a+l,k+l)-h(p+n,p+c,p+e,n+c,n+
e,c+e)||h(g+a+k,g+a+l,g+k+l,a+k+l)-h(p+n+c,p+n+e,p+c+e,n+c+e);default:l=l.slice().sort(m);e=e.slice().sort(m);for(k=0;k<a;++k)if(g=l[k]-e[k])return g;return 0}};var h=Math.min},{}],134:[function(b,F,C){var m=b("compare-cell"),h=b("cell-orientation");F.exports=function(l,e){return m(l,e)||h(l)-h(e)}},{"cell-orientation":117,"compare-cell":133}],135:[function(b,F,C){var m=b("./lib/ch1d"),h=b("./lib/ch2d"),l=b("./lib/chnd");F.exports=function(e){var a=e.length;if(0===a)return[];if(1===a)return[[0]];
a=e[0].length;return 0===a?[]:1===a?m(e):2===a?h(e):l(e,a)}},{"./lib/ch1d":136,"./lib/ch2d":137,"./lib/chnd":138}],136:[function(b,F,C){F.exports=function(m){for(var h=0,l=0,e=1;e<m.length;++e)m[e][0]<m[h][0]&&(h=e),m[e][0]>m[l][0]&&(l=e);return h<l?[[h],[l]]:h>l?[[l],[h]]:[[h]]}},{}],137:[function(b,F,C){F.exports=function(h){h=m(h);var l=h.length;if(2>=l)return[];for(var e=Array(l),a=h[l-1],g=0;g<l;++g){var k=h[g];e[g]=[a,k];a=k}return e};var m=b("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":456}],
138:[function(b,F,C){F.exports=function(l,e){try{return m(l,!0)}catch(d){var a=h(l);if(a.length<=e)return[];e=l.length;for(var g=Array(e),k=0;k<a.length;++k)g[k]=l[a[k]];var p=a.length;for(k=0;k<e;++k)0>a.indexOf(k)&&(g[p++]=l[k]);l=m(g,!0);e=l.length;g=a.length;for(k=0;k<e;++k){p=l[k];for(var n=0;n<p.length;++n){var c=p[n];if(c<g)p[n]=a[c];else{c-=g;for(var f=0;f<g;++f)c>=a[f]&&(c+=1);p[n]=c}}}return l}};var m=b("incremental-convex-hull"),h=b("affine-hull")},{"affine-hull":67,"incremental-convex-hull":433}],
139:[function(b,F,C){F.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?\x3d.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?\x3d.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?\x3d.*british).*honduras",
BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?\x3d.*bonaire).*eustatius|^(?\x3d.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?\x3d.*peo)(?\x3d.*rep).*china",
CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?\x3d.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",
DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?\x3d.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?\x3d.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",
DEU:"^(?!.*east).*germany|^(?\x3d.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?\x3d.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",
IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?\x3d.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?\x3d.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",
LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",
NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?\x3d.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",
MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?\x3d.*collectivity).*martin|^(?\x3d.*france).*martin(?!ique)|^(?\x3d.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",
SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?\x3d.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?\x3d.*leste).*timor|^(?\x3d.*east).*timor",
TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?\x3d.*socialist).*viet.?nam",
VGB:"^(?\x3d.*\\bu\\.?\\s?k).*virgin|^(?\x3d.*brit).*virgin|^(?\x3d.*kingdom).*virgin",VIR:"^(?\x3d.*\\bu\\.?\\s?s).*virgin|^(?\x3d.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?\x3d.*peo).*yemen|^(?!.*rep)(?\x3d.*dem).*yemen|^(?\x3d.*south).*yemen|^(?\x3d.*aden).*yemen|^(?\x3d.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},
{}],140:[function(b,F,C){F.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},{}],141:[function(b,F,C){F.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],142:[function(b,F,C){F.exports=["normal","italic","oblique"]},{}],143:[function(b,F,C){F.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],144:[function(b,F,C){F.exports={parse:b("./parse"),
stringify:b("./stringify")}},{"./parse":146,"./stringify":147}],145:[function(b,F,C){var m=b("css-font-size-keywords");F.exports={isSize:function(h){return/^[\d\.]/.test(h)||-1!==h.indexOf("/")||-1!==m.indexOf(h)}}},{"css-font-size-keywords":140}],146:[function(b,F,C){function m(d){if("string"!==typeof d)throw Error("Font argument must be a string.");if(f[d])return f[d];if(""===d)throw Error("Cannot parse an empty string.");if(-1!==a.indexOf(d))return f[d]={system:d};for(var q={style:"normal",variant:"normal",
weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},r=n(d,/\s+/),u;u=r.shift();){if(-1!==e.indexOf(u))return["style","variant","weight","stretch"].forEach(function(w){q[w]=u}),f[d]=q;if(-1!==k.indexOf(u))q.style=u;else if("normal"===u||"small-caps"===u)q.variant=u;else if(-1!==p.indexOf(u))q.stretch=u;else if(-1!==g.indexOf(u))q.weight=u;else{if(c(u)){var v=n(u,"/");q.size=v[0];null!=v[1]?q.lineHeight=h(v[1]):"/"===r[0]&&(r.shift(),q.lineHeight=h(r.shift()));if(!r.length)throw Error("Missing required font-family.");
q.family=n(r.join(" "),/\s*,\s*/).map(l);return f[d]=q}throw Error("Unknown or unsupported font token: "+u);}}throw Error("Missing required font-size.");}function h(d){var q=parseFloat(d);return q.toString()===d?q:d}var l=b("unquote"),e=b("css-global-keywords"),a=b("css-system-font-keywords"),g=b("css-font-weight-keywords"),k=b("css-font-style-keywords"),p=b("css-font-stretch-keywords"),n=b("string-split-by"),c=b("./lib/util").isSize;F.exports=m;var f=m.cache={}},{"./lib/util":145,"css-font-stretch-keywords":141,
"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"string-split-by":540,unquote:570}],147:[function(b,F,C){function m(d,q){if(d&&!q[d]&&!a[d])throw Error("Unknown keyword `"+d+"`");return d}function h(d){for(var q={},r=0;r<d.length;r++)q[d[r]]=1;return q}var l=b("pick-by-alias"),e=b("./lib/util").isSize,a=h(b("css-global-keywords")),g=h(b("css-system-font-keywords")),k=h(b("css-font-weight-keywords")),p=h(b("css-font-style-keywords")),
n=h(b("css-font-stretch-keywords")),c={normal:1,"small-caps":1},f={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1};F.exports=function(d){d=l(d,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",
family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});if(d.system)return d.system&&m(d.system,g),d.system;m(d.style,p);m(d.variant,c);m(d.weight,k);m(d.stretch,n);null==d.size&&(d.size="1rem");"number"===typeof d.size&&(d.size+="px");if(!e)throw Error("Bad size value `"+d.size+"`");d.family||(d.family="serif");Array.isArray(d.family)&&(d.family.length||(d.family=["serif"]),d.family=d.family.map(function(r){return f[r]?r:'"'+r+'"'}).join(", "));
var q=[];q.push(d.style);d.variant!==d.style&&q.push(d.variant);d.weight!==d.variant&&d.weight!==d.style&&q.push(d.weight);d.stretch!==d.weight&&d.stretch!==d.variant&&d.stretch!==d.style&&q.push(d.stretch);q.push(d.size+(null==d.lineHeight||"normal"===d.lineHeight||"1"===d.lineHeight+""?"":"/"+d.lineHeight));q.push(d.family);return q.filter(Boolean).join(" ")}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,
"css-system-font-keywords":149,"pick-by-alias":485}],148:[function(b,F,C){F.exports=["inherit","initial","unset"]},{}],149:[function(b,F,C){F.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],150:[function(b,F,C){F.exports=function(m,h,l,e,a,g){var k=a-1,p=a*a,n=k*k,c=(1+2*a)*n;n*=a;a=p*(3-2*a);k*=p;if(m.length){g||(g=Array(m.length));for(p=m.length-1;0<=p;--p)g[p]=c*m[p]+n*h[p]+a*l[p]+k*e[p];return g}return c*m+n*h+a*l+k*e};F.exports.derivative=function(m,h,l,e,a,g){var k=
6*a*a-6*a,p=3*a*a-4*a+1,n=-6*a*a+6*a;a=3*a*a-2*a;if(m.length){g||(g=Array(m.length));for(var c=m.length-1;0<=c;--c)g[c]=k*m[c]+p*h[c]+n*l[c]+a*e[c];return g}return k*m+p*h+n*l[c]+a*e}},{}],151:[function(b,F,C){function m(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var h=b("./lib/thunk.js");F.exports=function(l){var e=
new m;e.pre=l.pre;e.body=l.body;e.post=l.post;var a=l.args.slice(0);e.argTypes=a;for(var g=0;g<a.length;++g){var k=a[g];if("array"===k||"object"===typeof k&&k.blockIndices){e.argTypes[g]="array";e.arrayArgs.push(g);e.arrayBlockIndices.push(k.blockIndices?k.blockIndices:0);e.shimArgs.push("array"+g);if(g<e.pre.args.length&&0<e.pre.args[g].count)throw Error("cwise: pre() block may not reference array args");if(g<e.post.args.length&&0<e.post.args[g].count)throw Error("cwise: post() block may not reference array args");
}else if("scalar"===k)e.scalarArgs.push(g),e.shimArgs.push("scalar"+g);else if("index"===k){e.indexArgs.push(g);if(g<e.pre.args.length&&0<e.pre.args[g].count)throw Error("cwise: pre() block may not reference array index");if(g<e.body.args.length&&e.body.args[g].lvalue)throw Error("cwise: body() block may not write to array index");if(g<e.post.args.length&&0<e.post.args[g].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===k){e.shapeArgs.push(g);if(g<e.pre.args.length&&
e.pre.args[g].lvalue)throw Error("cwise: pre() block may not write to array shape");if(g<e.body.args.length&&e.body.args[g].lvalue)throw Error("cwise: body() block may not write to array shape");if(g<e.post.args.length&&e.post.args[g].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof k&&k.offset)e.argTypes[g]="offset",e.offsetArgs.push({array:k.array,offset:k.offset}),e.offsetArgIndex.push(g);else throw Error("cwise: Unknown argument type "+a[g]);}if(0>=
e.arrayArgs.length)throw Error("cwise: No array arguments specified");if(e.pre.args.length>a.length)throw Error("cwise: Too many arguments in pre() block");if(e.body.args.length>a.length)throw Error("cwise: Too many arguments in body() block");if(e.post.args.length>a.length)throw Error("cwise: Too many arguments in post() block");e.debug=!!l.printCode||!!l.debug;e.funcName=l.funcName||"cwise";e.blockSize=l.blockSize||64;return h(e)}},{"./lib/thunk.js":153}],152:[function(b,F,C){function m(g,k,p){var n=
g.length,c=k.arrayArgs.length;k=0<k.indexArgs.length;var f=[],d=[],q=0,r,u;for(r=0;r<n;++r)d.push(["i",r,"\x3d0"].join(""));for(u=0;u<c;++u)for(r=0;r<n;++r){var v=q;q=g[r];0===r?d.push(["d",u,"s",r,"\x3dt",u,"p",q].join("")):d.push(["d",u,"s",r,"\x3d(t",u,"p",q,"-s",v,"*t",u,"p",v,")"].join(""))}0<d.length&&f.push("var "+d.join(","));for(r=n-1;0<=r;--r)q=g[r],f.push(["for(i",r,"\x3d0;i",r,"\x3cs",q,";++i",r,"){"].join(""));f.push(p);for(r=0;r<n;++r){v=q;q=g[r];for(u=0;u<c;++u)f.push(["p",u,"+\x3dd",
u,"s",r].join(""));k&&(0<r&&f.push(["index[",v,"]-\x3ds",v].join("")),f.push(["++index[",q,"]"].join("")));f.push("}")}return f.join("\n")}function h(g,k,p,n){for(var c=k.length,f=p.arrayArgs.length,d=p.blockSize,q=0<p.indexArgs.length,r=[],u=0;u<f;++u)r.push(["var offset",u,"\x3dp",u].join(""));for(u=g;u<c;++u)r.push(["for(var j"+u+"\x3dSS[",k[u],"]|0;j",u,"\x3e0;){"].join("")),r.push(["if(j",u,"\x3c",d,"){"].join("")),r.push(["s",k[u],"\x3dj",u].join("")),r.push(["j",u,"\x3d0"].join("")),r.push(["}else{s",
k[u],"\x3d",d].join("")),r.push(["j",u,"-\x3d",d,"}"].join("")),q&&r.push(["index[",k[u],"]\x3dj",u].join(""));for(u=0;u<f;++u){d=["offset"+u];for(q=g;q<c;++q)d.push(["j",q,"*t",u,"p",k[q]].join(""));r.push(["p",u,"\x3d(",d.join("+"),")"].join(""))}r.push(m(k,p,n));for(u=g;u<c;++u)r.push("}");return r.join("\n")}function l(g,k,p){for(var n=g.body,c=[],f=[],d=0;d<g.args.length;++d){var q=g.args[d];if(!(0>=q.count)){var r=new RegExp(q.name,"g"),u="",v=k.arrayArgs.indexOf(d);switch(k.argTypes[d]){case "offset":var w=
k.offsetArgIndex.indexOf(d);v=k.offsetArgs[w].array;u="+q"+w;case "array":u="p"+v+u;var y="l"+d;w="a"+v;if(0===k.arrayBlockIndices[v])1===q.count?"generic"===p[v]?q.lvalue?(c.push(["var ",y,"\x3d",w,".get(",u,")"].join("")),n=n.replace(r,y),f.push([w,".set(",u,",",y,")"].join(""))):n=n.replace(r,[w,".get(",u,")"].join("")):n=n.replace(r,[w,"[",u,"]"].join("")):"generic"===p[v]?(c.push(["var ",y,"\x3d",w,".get(",u,")"].join("")),n=n.replace(r,y),q.lvalue&&f.push([w,".set(",u,",",y,")"].join(""))):
(c.push(["var ",y,"\x3d",w,"[",u,"]"].join("")),n=n.replace(r,y),q.lvalue&&f.push([w,"[",u,"]\x3d",y].join("")));else{r=[q.name];q=[u];for(u=0;u<Math.abs(k.arrayBlockIndices[v]);u++)r.push("\\s*\\[([^\\]]+)\\]"),q.push("$"+(u+1)+"*t"+v+"b"+u);r=new RegExp(r.join(""),"g");u=q.join("+");if("generic"===p[v])throw Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(r,[w,"[",u,"]"].join(""))}break;case "scalar":n=n.replace(r,"Y"+k.scalarArgs.indexOf(d));break;case "index":n=
n.replace(r,"index");break;case "shape":n=n.replace(r,"shape")}}}return[c.join("\n"),n,f.join("\n")].join("\n").trim()}function e(g){for(var k=Array(g.length),p=!0,n=0;n<g.length;++n){var c=g[n],f=c.match(/\d+/);f=f?f[0]:"";0===c.charAt(0)?k[n]="u"+c.charAt(1)+f:k[n]=c.charAt(0)+f;0<n&&(p=p&&k[n]===k[n-1])}return p?k[0]:k.join("")}var a=b("uniq");F.exports=function(g,k){for(var p=k[1].length-Math.abs(g.arrayBlockIndices[0])|0,n=Array(g.arrayArgs.length),c=Array(g.arrayArgs.length),f=0;f<g.arrayArgs.length;++f)c[f]=
k[2*f],n[f]=k[2*f+1];var d=[],q=[],r=[],u=[],v=[];for(f=0;f<g.arrayArgs.length;++f){0>g.arrayBlockIndices[f]?(r.push(0),u.push(p),d.push(p),q.push(p+g.arrayBlockIndices[f])):(r.push(g.arrayBlockIndices[f]),u.push(g.arrayBlockIndices[f]+p),d.push(0),q.push(g.arrayBlockIndices[f]));for(var w=[],y=0;y<n[f].length;y++)r[f]<=n[f][y]&&n[f][y]<u[f]&&w.push(n[f][y]-r[f]);v.push(w)}q=["SS"];u=["'use strict'"];w=[];for(y=0;y<p;++y)w.push(["s",y,"\x3dSS[",y,"]"].join(""));for(f=0;f<g.arrayArgs.length;++f){q.push("a"+
f);q.push("t"+f);q.push("p"+f);for(y=0;y<p;++y)w.push(["t",f,"p",y,"\x3dt",f,"[",r[f]+y,"]"].join(""));for(y=0;y<Math.abs(g.arrayBlockIndices[f]);++y)w.push(["t",f,"b",y,"\x3dt",f,"[",d[f]+y,"]"].join(""))}for(f=0;f<g.scalarArgs.length;++f)q.push("Y"+f);0<g.shapeArgs.length&&w.push("shape\x3dSS.slice(0)");if(0<g.indexArgs.length){y=Array(p);for(f=0;f<p;++f)y[f]="0";w.push(["index\x3d[",y.join(","),"]"].join(""))}for(f=0;f<g.offsetArgs.length;++f){d=g.offsetArgs[f];r=[];for(y=0;y<d.offset.length;++y)0!==
d.offset[y]&&(1===d.offset[y]?r.push(["t",d.array,"p",y].join("")):r.push([d.offset[y],"*t",d.array,"p",y].join("")));0===r.length?w.push("q"+f+"\x3d0"):w.push(["q",f,"\x3d",r.join("+")].join(""))}f=a([].concat(g.pre.thisVars).concat(g.body.thisVars).concat(g.post.thisVars));w=w.concat(f);0<w.length&&u.push("var "+w.join(","));for(f=0;f<g.arrayArgs.length;++f)u.push("p"+f+"|\x3d0");3<g.pre.body.length&&u.push(l(g.pre,g,c));f=l(g.body,g,c);a:for(y=0,w=v[0].length;y<w;){for(d=1;d<v.length;++d)if(v[d][y]!==
v[0][y])break a;++y}y<p?u.push(h(y,v[0],g,f)):u.push(m(v[0],g,f));3<g.post.body.length&&u.push(l(g.post,g,c));g.debug&&console.log("-----Generated cwise routine for ",k,":\n"+u.join("\n")+"\n----------");g=[g.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",y,e(c)].join("");return(new Function(["function ",g,"(",q.join(","),"){",u.join("\n"),"} return ",g].join("")))()}},{uniq:569}],153:[function(b,F,C){var m=b("./compile.js");F.exports=function(h){var l=["'use strict'","var CACHED\x3d{}"],e=
[];l.push(["return function ",h.funcName+"_cwise_thunk","(",h.shimArgs.join(","),"){"].join(""));for(var a=[],g=[],k=[["array",h.arrayArgs[0],".shape.slice(",Math.max(0,h.arrayBlockIndices[0]),0>h.arrayBlockIndices[0]?","+h.arrayBlockIndices[0]+")":")"].join("")],p=[],n=[],c=0;c<h.arrayArgs.length;++c){var f=h.arrayArgs[c];e.push(["t",f,"\x3darray",f,".dtype,r",f,"\x3darray",f,".order"].join(""));a.push("t"+f);a.push("r"+f);g.push("t"+f);g.push("r"+f+".join()");k.push("array"+f+".data");k.push("array"+
f+".stride");k.push("array"+f+".offset|0");0<c&&(p.push("array"+h.arrayArgs[0]+".shape.length\x3d\x3d\x3darray"+f+".shape.length+"+(Math.abs(h.arrayBlockIndices[0])-Math.abs(h.arrayBlockIndices[c]))),n.push("array"+h.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,h.arrayBlockIndices[0])+"]\x3d\x3d\x3darray"+f+".shape[shapeIndex+"+Math.max(0,h.arrayBlockIndices[c])+"]"))}1<h.arrayArgs.length&&(l.push("if (!("+p.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),
l.push("for(var shapeIndex\x3darray"+h.arrayArgs[0]+".shape.length-"+Math.abs(h.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),l.push("if (!("+n.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),l.push("}"));for(c=0;c<h.scalarArgs.length;++c)k.push("scalar"+h.scalarArgs[c]);e.push(["type\x3d[",g.join(","),"].join()"].join(""));e.push("proc\x3dCACHED[type]");l.push("var "+e.join(","));l.push(["if(!proc){CACHED[type]\x3dproc\x3dcompile([",a.join(","),"])}return proc(",
k.join(","),")}"].join(""));h.debug&&console.log("-----Generated thunk:\n"+l.join("\n")+"\n----------");return(new Function("compile",l.join("\n")))(m.bind(void 0,h))}},{"./compile.js":152}],154:[function(b,F,C){var m=b("type/value/is"),h=b("type/value/ensure"),l=b("type/plain-function/ensure"),e=b("es5-ext/object/copy"),a=b("es5-ext/object/normalize-options"),g=b("es5-ext/object/map"),k=Function.prototype.bind,p=Object.defineProperty,n=Object.prototype.hasOwnProperty;var c=function(f,d,q){var r=
h(d)&&l(d.value);var u=e(d);delete u.writable;delete u.value;u.get=function(){if(!q.overwriteDefinition&&n.call(this,f))return r;d.value=k.call(r,q.resolveContext?q.resolveContext(this):this);p(this,f,d);return this[f]};return u};F.exports=function(f,d){var q=a(d);m(q.resolveContext)&&l(q.resolveContext);return g(f,function(r,u){return c(u,r,q)})}},{"es5-ext/object/copy":196,"es5-ext/object/map":204,"es5-ext/object/normalize-options":205,"type/plain-function/ensure":561,"type/value/ensure":565,"type/value/is":566}],
155:[function(b,F,C){var m=b("type/value/is"),h=b("type/plain-function/is"),l=b("es5-ext/object/assign"),e=b("es5-ext/object/normalize-options"),a=b("es5-ext/string/#/contains");(F.exports=function(g,k){if(2>arguments.length||"string"!==typeof g){var p=k;k=g;g=null}else p=arguments[2];if(m(g)){var n=a.call(g,"c");var c=a.call(g,"e");var f=a.call(g,"w")}else n=f=!0,c=!1;n={value:k,configurable:n,enumerable:c,writable:f};return p?l(e(p),n):n}).gs=function(g,k,p,n){"string"!==typeof g&&(n=p,p=k,k=g,
g=null);m(k)?h(k)?m(p)?h(p)||(n=p,p=void 0):p=void 0:(n=k,k=p=void 0):k=void 0;if(m(g)){var c=a.call(g,"c");g=a.call(g,"e")}else c=!0,g=!1;k={get:k,set:p,configurable:c,enumerable:g};return n?l(e(n),k):k}},{"es5-ext/object/assign":193,"es5-ext/object/normalize-options":205,"es5-ext/string/#/contains":212,"type/plain-function/is":562,"type/value/is":566}],156:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C):h(m.d3=m.d3||{})})(this,function(m){function h(N,H){return N<
H?-1:N>H?1:N>=H?0:NaN}function l(N){1===N.length&&(N=e(N));return{left:function(H,J,O,Q){null==O&&(O=0);null==Q&&(Q=H.length);for(;O<Q;){var U=O+Q>>>1;0>N(H[U],J)?O=U+1:Q=U}return O},right:function(H,J,O,Q){null==O&&(O=0);null==Q&&(Q=H.length);for(;O<Q;){var U=O+Q>>>1;0<N(H[U],J)?Q=U:O=U+1}return O}}}function e(N){return function(H,J){return h(N(H),J)}}function a(N,H){return[N,H]}function g(N){return null===N?NaN:+N}function k(N,H){var J=N.length,O=0,Q=-1,U=0,P,V=0;if(null==H)for(;++Q<J;){if(!isNaN(P=
g(N[Q]))){var Y=P-U;U+=Y/++O;V+=Y*(P-U)}}else for(;++Q<J;)isNaN(P=g(H(N[Q],Q,N)))||(Y=P-U,U+=Y/++O,V+=Y*(P-U));if(1<O)return V/(O-1)}function p(N,H){return(N=k(N,H))?Math.sqrt(N):N}function n(N,H){var J=N.length,O=-1,Q,U,P;if(null==H)for(;++O<J;){if(null!=(Q=N[O])&&Q>=Q)for(U=P=Q;++O<J;)null!=(Q=N[O])&&(U>Q&&(U=Q),P<Q&&(P=Q))}else for(;++O<J;)if(null!=(Q=H(N[O],O,N))&&Q>=Q)for(U=P=Q;++O<J;)null!=(Q=H(N[O],O,N))&&(U>Q&&(U=Q),P<Q&&(P=Q));return[U,P]}function c(N){return function(){return N}}function f(N){return N}
function d(N,H,J){N=+N;H=+H;J=2>(Q=arguments.length)?(H=N,N=0,1):3>Q?1:+J;for(var O=-1,Q=Math.max(0,Math.ceil((H-N)/J))|0,U=Array(Q);++O<Q;)U[O]=N+O*J;return U}function q(N,H,J){H=(H-N)/Math.max(0,J);N=Math.floor(Math.log(H)/Math.LN10);H/=Math.pow(10,N);return 0<=N?(H>=I?10:H>=L?5:H>=M?2:1)*Math.pow(10,N):-Math.pow(10,-N)/(H>=I?10:H>=L?5:H>=M?2:1)}function r(N,H,J){var O=Math.abs(H-N)/Math.max(0,J);J=Math.pow(10,Math.floor(Math.log(O)/Math.LN10));O/=J;O>=I?J*=10:O>=L?J*=5:O>=M&&(J*=2);return H<N?
-J:J}function u(N){return Math.ceil(Math.log(N.length)/Math.LN2)+1}function v(N,H,J){null==J&&(J=g);if(O=N.length){if(0>=(H=+H)||2>O)return+J(N[0],0,N);if(1<=H)return+J(N[O-1],O-1,N);var O;H*=O-1;O=Math.floor(H);var Q=+J(N[O],O,N);N=+J(N[O+1],O+1,N);return Q+(N-Q)*(H-O)}}function w(N,H){var J=N.length,O=-1,Q,U;if(null==H)for(;++O<J;){if(null!=(Q=N[O])&&Q>=Q)for(U=Q;++O<J;)null!=(Q=N[O])&&U>Q&&(U=Q)}else for(;++O<J;)if(null!=(Q=H(N[O],O,N))&&Q>=Q)for(U=Q;++O<J;)null!=(Q=H(N[O],O,N))&&U>Q&&(U=Q);return U}
function y(N){if(!(U=N.length))return[];for(var H=-1,J=w(N,D),O=Array(J);++H<J;)for(var Q=-1,U,P=O[H]=Array(U);++Q<U;)P[Q]=N[Q][H];return O}function D(N){return N.length}var x=l(h),E=x.right;x=x.left;var B=Array.prototype,t=B.slice,G=B.map,I=Math.sqrt(50),L=Math.sqrt(10),M=Math.sqrt(2);m.bisect=E;m.bisectRight=E;m.bisectLeft=x;m.ascending=h;m.bisector=l;m.cross=function(N,H,J){var O=N.length,Q=H.length,U=Array(O*Q),P,V,Y;null==J&&(J=a);for(P=Y=0;P<O;++P){var ba=N[P];for(V=0;V<Q;++V,++Y)U[Y]=J(ba,
H[V])}return U};m.descending=function(N,H){return H<N?-1:H>N?1:H>=N?0:NaN};m.deviation=p;m.extent=n;m.histogram=function(){function N(Q){var U,P=Q.length,V=Array(P);for(U=0;U<P;++U)V[U]=H(Q[U],U,Q);U=J(V);var Y=U[0],ba=U[1],ea=O(V,Y,ba);Array.isArray(ea)||(ea=r(Y,ba,ea),ea=d(Math.ceil(Y/ea)*ea,ba,ea));for(var ca=ea.length;ea[0]<=Y;)ea.shift(),--ca;for(;ea[ca-1]>ba;)ea.pop(),--ca;var ia=Array(ca+1);for(U=0;U<=ca;++U){var fa=ia[U]=[];fa.x0=0<U?ea[U-1]:Y;fa.x1=U<ca?ea[U]:ba}for(U=0;U<P;++U)fa=V[U],Y<=
fa&&fa<=ba&&ia[E(ea,fa,0,ca)].push(Q[U]);return ia}var H=f,J=n,O=u;N.value=function(Q){return arguments.length?(H="function"===typeof Q?Q:c(Q),N):H};N.domain=function(Q){return arguments.length?(J="function"===typeof Q?Q:c([Q[0],Q[1]]),N):J};N.thresholds=function(Q){return arguments.length?(O="function"===typeof Q?Q:Array.isArray(Q)?c(t.call(Q)):c(Q),N):O};return N};m.thresholdFreedmanDiaconis=function(N,H,J){N=G.call(N,g).sort(h);return Math.ceil((J-H)/(2*(v(N,.75)-v(N,.25))*Math.pow(N.length,-1/
3)))};m.thresholdScott=function(N,H,J){return Math.ceil((J-H)/(3.5*p(N)*Math.pow(N.length,-1/3)))};m.thresholdSturges=u;m.max=function(N,H){var J=N.length,O=-1,Q,U;if(null==H)for(;++O<J;){if(null!=(Q=N[O])&&Q>=Q)for(U=Q;++O<J;)null!=(Q=N[O])&&Q>U&&(U=Q)}else for(;++O<J;)if(null!=(Q=H(N[O],O,N))&&Q>=Q)for(U=Q;++O<J;)null!=(Q=H(N[O],O,N))&&Q>U&&(U=Q);return U};m.mean=function(N,H){var J=N.length,O=J,Q=-1,U,P=0;if(null==H)for(;++Q<J;)isNaN(U=g(N[Q]))?--O:P+=U;else for(;++Q<J;)isNaN(U=g(H(N[Q],Q,N)))?
--O:P+=U;if(O)return P/O};m.median=function(N,H){var J=N.length,O=-1,Q,U=[];if(null==H)for(;++O<J;)isNaN(Q=g(N[O]))||U.push(Q);else for(;++O<J;)isNaN(Q=g(H(N[O],O,N)))||U.push(Q);return v(U.sort(h),.5)};m.merge=function(N){var H=N.length;var J=-1;for(var O=0,Q,U;++J<H;)O+=N[J].length;for(Q=Array(O);0<=--H;)for(U=N[H],J=U.length;0<=--J;)Q[--O]=U[J];return Q};m.min=w;m.pairs=function(N,H){null==H&&(H=a);for(var J=0,O=N.length-1,Q=N[0],U=Array(0>O?0:O);J<O;)U[J]=H(Q,Q=N[++J]);return U};m.permute=function(N,
H){for(var J=H.length,O=Array(J);J--;)O[J]=N[H[J]];return O};m.quantile=v;m.range=d;m.scan=function(N,H){if(J=N.length){var J,O=0,Q=0,U,P=N[Q];for(null==H&&(H=h);++O<J;)if(0>H(U=N[O],P)||0!==H(P,P))P=U,Q=O;if(0===H(P,P))return Q}};m.shuffle=function(N,H,J){J=(null==J?N.length:J)-(H=null==H?0:+H);for(var O,Q;J;)Q=Math.random()*J--|0,O=N[J+H],N[J+H]=N[Q+H],N[Q+H]=O;return N};m.sum=function(N,H){var J=N.length,O=-1,Q,U=0;if(null==H)for(;++O<J;){if(Q=+N[O])U+=Q}else for(;++O<J;)if(Q=+H(N[O],O,N))U+=Q;
return U};m.ticks=function(N,H,J){var O,Q=-1,U;H=+H;N=+N;J=+J;if(N===H&&0<J)return[N];if(O=H<N){var P=N;N=H;H=P}if(0===(U=q(N,H,J))||!isFinite(U))return[];if(0<U)for(N=Math.ceil(N/U),H=Math.floor(H/U),H=Array(P=Math.ceil(H-N+1));++Q<P;)H[Q]=(N+Q)*U;else for(N=Math.floor(N*U),H=Math.ceil(H*U),H=Array(P=Math.ceil(N-H+1));++Q<P;)H[Q]=(N-Q)/U;O&&H.reverse();return H};m.tickIncrement=q;m.tickStep=r;m.transpose=y;m.variance=k;m.zip=function(){return y(arguments)};Object.defineProperty(m,"__esModule",{value:!0})})},
{}],157:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C):h(m.d3=m.d3||{})})(this,function(m){function h(){}function l(f,d){var q=new h;if(f instanceof h)f.each(function(w,y){q.set(y,w)});else if(Array.isArray(f)){var r=-1,u=f.length,v;if(null==d)for(;++r<u;)q.set(r,f[r]);else for(;++r<u;)q.set(d(v=f[r],r,f),v)}else if(f)for(r in f)q.set(r,f[r]);return q}function e(){return{}}function a(f,d,q){f[d]=q}function g(){return l()}function k(f,d,q){f.set(d,q)}function p(){}
function n(f,d){var q=new p;if(f instanceof p)f.each(function(v){q.add(v)});else if(f){var r=-1,u=f.length;if(null==d)for(;++r<u;)q.add(f[r]);else for(;++r<u;)q.add(d(f[r],r,f))}return q}h.prototype=l.prototype={constructor:h,has:function(f){return"$"+f in this},get:function(f){return this["$"+f]},set:function(f,d){this["$"+f]=d;return this},remove:function(f){f="$"+f;return f in this&&delete this[f]},clear:function(){for(var f in this)"$"===f[0]&&delete this[f]},keys:function(){var f=[],d;for(d in this)"$"===
d[0]&&f.push(d.slice(1));return f},values:function(){var f=[],d;for(d in this)"$"===d[0]&&f.push(this[d]);return f},entries:function(){var f=[],d;for(d in this)"$"===d[0]&&f.push({key:d.slice(1),value:this[d]});return f},size:function(){var f=0,d;for(d in this)"$"===d[0]&&++f;return f},empty:function(){for(var f in this)if("$"===f[0])return!1;return!0},each:function(f){for(var d in this)"$"===d[0]&&f(this[d],d.slice(1),this)}};var c=l.prototype;p.prototype=n.prototype={constructor:p,has:c.has,add:function(f){f+=
"";this["$"+f]=f;return this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};m.nest=function(){function f(y,D,x,E){if(D>=q.length)return null!=u&&y.sort(u),null!=v?v(y):y;for(var B=-1,t=y.length,G=q[D++],I,L,M=l(),N,H=x();++B<t;)(N=M.get(I=G(L=y[B])+""))?N.push(L):M.set(I,[L]);M.each(function(J,O){E(H,O,f(J,D,x,E))});return H}function d(y,D){if(++D>q.length)return y;var x=r[D-1];if(null!=v&&D>=q.length)var E=y.entries();else E=[],y.each(function(B,t){E.push({key:t,
values:d(B,D)})});return null!=x?E.sort(function(B,t){return x(B.key,t.key)}):E}var q=[],r=[],u,v,w;return w={object:function(y){return f(y,0,e,a)},map:function(y){return f(y,0,g,k)},entries:function(y){return d(f(y,0,g,k),0)},key:function(y){q.push(y);return w},sortKeys:function(y){r[q.length-1]=y;return w},sortValues:function(y){u=y;return w},rollup:function(y){v=y;return w}}};m.set=n;m.map=l;m.keys=function(f){var d=[],q;for(q in f)d.push(q);return d};m.values=function(f){var d=[],q;for(q in f)d.push(f[q]);
return d};m.entries=function(f){var d=[],q;for(q in f)d.push({key:q,value:f[q]});return d};Object.defineProperty(m,"__esModule",{value:!0})})},{}],158:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C):(m=m||self,h(m.d3=m.d3||{}))})(this,function(m){function h(sa,ya,qa){sa.prototype=ya.prototype=qa;qa.constructor=sa}function l(sa,ya){sa=Object.create(sa.prototype);for(var qa in ya)sa[qa]=ya[qa];return sa}function e(){}function a(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}
function k(sa){var ya,qa;sa=(sa+"").trim().toLowerCase();return(ya=V.exec(sa))?(qa=ya[1].length,ya=parseInt(ya[1],16),6===qa?p(ya):3===qa?new d(ya>>8&15|ya>>4&240,ya>>4&15|ya&240,(ya&15)<<4|ya&15,1):8===qa?n(ya>>24&255,ya>>16&255,ya>>8&255,(ya&255)/255):4===qa?n(ya>>12&15|ya>>8&240,ya>>8&15|ya>>4&240,ya>>4&15|ya&240,((ya&15)<<4|ya&15)/255):null):(ya=Y.exec(sa))?new d(ya[1],ya[2],ya[3],1):(ya=ba.exec(sa))?new d(255*ya[1]/100,255*ya[2]/100,255*ya[3]/100,1):(ya=ea.exec(sa))?n(ya[1],ya[2],ya[3],ya[4]):
(ya=ca.exec(sa))?n(255*ya[1]/100,255*ya[2]/100,255*ya[3]/100,ya[4]):(ya=ia.exec(sa))?v(ya[1],ya[2]/100,ya[3]/100,1):(ya=fa.exec(sa))?v(ya[1],ya[2]/100,ya[3]/100,ya[4]):ha.hasOwnProperty(sa)?p(ha[sa]):"transparent"===sa?new d(NaN,NaN,NaN,0):null}function p(sa){return new d(sa>>16&255,sa>>8&255,sa&255,1)}function n(sa,ya,qa,xa){0>=xa&&(sa=ya=qa=NaN);return new d(sa,ya,qa,xa)}function c(sa){sa instanceof e||(sa=k(sa));if(!sa)return new d;sa=sa.rgb();return new d(sa.r,sa.g,sa.b,sa.opacity)}function f(sa,
ya,qa,xa){return 1===arguments.length?c(sa):new d(sa,ya,qa,null==xa?1:xa)}function d(sa,ya,qa,xa){this.r=+sa;this.g=+ya;this.b=+qa;this.opacity=+xa}function q(){return"#"+u(this.r)+u(this.g)+u(this.b)}function r(){var sa=this.opacity;sa=isNaN(sa)?1:Math.max(0,Math.min(1,sa));return(1===sa?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===sa?")":", "+sa+")")}function u(sa){sa=
Math.max(0,Math.min(255,Math.round(sa)||0));return(16>sa?"0":"")+sa.toString(16)}function v(sa,ya,qa,xa){0>=xa?sa=ya=qa=NaN:0>=qa||1<=qa?sa=ya=NaN:0>=ya&&(sa=NaN);return new D(sa,ya,qa,xa)}function w(sa){if(sa instanceof D)return new D(sa.h,sa.s,sa.l,sa.opacity);sa instanceof e||(sa=k(sa));if(!sa)return new D;if(sa instanceof D)return sa;sa=sa.rgb();var ya=sa.r/255,qa=sa.g/255,xa=sa.b/255,Ca=Math.min(ya,qa,xa),Ja=Math.max(ya,qa,xa),eb=NaN,Ra=Ja-Ca,Wa=(Ja+Ca)/2;Ra?(eb=ya===Ja?(qa-xa)/Ra+6*(qa<xa):
qa===Ja?(xa-ya)/Ra+2:(ya-qa)/Ra+4,Ra/=.5>Wa?Ja+Ca:2-Ja-Ca,eb*=60):Ra=0<Wa&&1>Wa?0:eb;return new D(eb,Ra,Wa,sa.opacity)}function y(sa,ya,qa,xa){return 1===arguments.length?w(sa):new D(sa,ya,qa,null==xa?1:xa)}function D(sa,ya,qa,xa){this.h=+sa;this.s=+ya;this.l=+qa;this.opacity=+xa}function x(sa,ya,qa){return 255*(60>sa?ya+(qa-ya)*sa/60:180>sa?qa:240>sa?ya+(qa-ya)*(240-sa)/60:ya)}function E(sa){if(sa instanceof t)return new t(sa.l,sa.a,sa.b,sa.opacity);if(sa instanceof J)return O(sa);sa instanceof d||
(sa=c(sa));var ya=M(sa.r),qa=M(sa.g),xa=M(sa.b),Ca=G(.2225045*ya+.7168786*qa+.0606169*xa);if(ya===qa&&qa===xa)var Ja=ya=Ca;else Ja=G((.4360747*ya+.3850649*qa+.1430804*xa)/.96422),ya=G((.0139322*ya+.0971045*qa+.7141733*xa)/.82521);return new t(116*Ca-16,500*(Ja-Ca),200*(Ca-ya),sa.opacity)}function B(sa,ya,qa,xa){return 1===arguments.length?E(sa):new t(sa,ya,qa,null==xa?1:xa)}function t(sa,ya,qa,xa){this.l=+sa;this.a=+ya;this.b=+qa;this.opacity=+xa}function G(sa){return sa>ua?Math.pow(sa,1/3):sa/oa+
ra}function I(sa){return sa>ta?sa*sa*sa:oa*(sa-ra)}function L(sa){return 255*(.0031308>=sa?12.92*sa:1.055*Math.pow(sa,1/2.4)-.055)}function M(sa){return.04045>=(sa/=255)?sa/12.92:Math.pow((sa+.055)/1.055,2.4)}function N(sa){if(sa instanceof J)return new J(sa.h,sa.c,sa.l,sa.opacity);sa instanceof t||(sa=E(sa));if(0===sa.a&&0===sa.b)return new J(NaN,0<sa.l&&100>sa.l?0:NaN,sa.l,sa.opacity);var ya=Math.atan2(sa.b,sa.a)*pa;return new J(0>ya?ya+360:ya,Math.sqrt(sa.a*sa.a+sa.b*sa.b),sa.l,sa.opacity)}function H(sa,
ya,qa,xa){return 1===arguments.length?N(sa):new J(sa,ya,qa,null==xa?1:xa)}function J(sa,ya,qa,xa){this.h=+sa;this.c=+ya;this.l=+qa;this.opacity=+xa}function O(sa){if(isNaN(sa.h))return new t(sa.l,0,0,sa.opacity);var ya=sa.h*na;return new t(sa.l,Math.cos(ya)*sa.c,Math.sin(ya)*sa.c,sa.opacity)}function Q(sa,ya,qa,xa){if(1===arguments.length){var Ca=sa;if(Ca instanceof U)Ca=new U(Ca.h,Ca.s,Ca.l,Ca.opacity);else{Ca instanceof d||(Ca=c(Ca));var Ja=Ca.g/255,eb=Ca.b/255,Ra=(ka*eb+Ca.r/255*-1.7884503806-
3.5172982438*Ja)/(ka+-1.7884503806-3.5172982438);eb-=Ra;var Wa=(1.97294*(Ja-Ra)- -.29227*eb)/-.90649;eb=(Ja=Math.sqrt(Wa*Wa+eb*eb)/(1.97294*Ra*(1-Ra)))?Math.atan2(Wa,eb)*pa-120:NaN;Ca=new U(0>eb?eb+360:eb,Ja,Ra,Ca.opacity)}}else Ca=new U(sa,ya,qa,null==xa?1:xa);return Ca}function U(sa,ya,qa,xa){this.h=+sa;this.s=+ya;this.l=+qa;this.opacity=+xa}var P=1/.7,V=/^#([0-9a-f]{3,8})$/,Y=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,ba=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
ea=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ca=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ia=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,fa=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
ha={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};h(e,k,{copy:function(sa){return Object.assign(new this.constructor,this,sa)},displayable:function(){return this.rgb().displayable()},hex:a,formatHex:a,formatHsl:function(){return w(this).formatHsl()},formatRgb:g,toString:g});h(d,f,l(e,{brighter:function(sa){sa=null==sa?P:Math.pow(P,sa);return new d(this.r*sa,this.g*sa,this.b*sa,this.opacity)},darker:function(sa){sa=null==sa?.7:
Math.pow(.7,sa);return new d(this.r*sa,this.g*sa,this.b*sa,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:q,formatHex:q,formatRgb:r,toString:r}));h(D,y,l(e,{brighter:function(sa){sa=null==sa?P:Math.pow(P,sa);return new D(this.h,this.s,this.l*sa,this.opacity)},darker:function(sa){sa=null==sa?.7:Math.pow(.7,sa);return new D(this.h,this.s,this.l*sa,this.opacity)},
rgb:function(){var sa=this.h%360+360*(0>this.h),ya=isNaN(sa)||isNaN(this.s)?0:this.s,qa=this.l;ya=qa+(.5>qa?qa:1-qa)*ya;qa=2*qa-ya;return new d(x(240<=sa?sa-240:sa+120,qa,ya),x(sa,qa,ya),x(120>sa?sa+240:sa-120,qa,ya),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var sa=this.opacity;sa=isNaN(sa)?1:Math.max(0,Math.min(1,sa));return(1===sa?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+
"%, "+100*(this.l||0)+"%"+(1===sa?")":", "+sa+")")}}));var na=Math.PI/180,pa=180/Math.PI,ra=4/29,ta=6/29,oa=3*ta*ta,ua=ta*ta*ta;h(t,B,l(e,{brighter:function(sa){return new t(this.l+18*(null==sa?1:sa),this.a,this.b,this.opacity)},darker:function(sa){return new t(this.l-18*(null==sa?1:sa),this.a,this.b,this.opacity)},rgb:function(){var sa=(this.l+16)/116,ya=isNaN(this.a)?sa:sa+this.a/500,qa=isNaN(this.b)?sa:sa-this.b/200;ya=.96422*I(ya);sa=1*I(sa);qa=.82521*I(qa);return new d(L(3.1338561*ya-1.6168667*
sa-.4906146*qa),L(-.9787684*ya+1.9161415*sa+.033454*qa),L(.0719453*ya-.2289914*sa+1.4052427*qa),this.opacity)}}));h(J,H,l(e,{brighter:function(sa){return new J(this.h,this.c,this.l+18*(null==sa?1:sa),this.opacity)},darker:function(sa){return new J(this.h,this.c,this.l-18*(null==sa?1:sa),this.opacity)},rgb:function(){return O(this).rgb()}}));var ka=1.78277*-.29227-.1347134789;h(U,Q,l(e,{brighter:function(sa){sa=null==sa?P:Math.pow(P,sa);return new U(this.h,this.s,this.l*sa,this.opacity)},darker:function(sa){sa=
null==sa?.7:Math.pow(.7,sa);return new U(this.h,this.s,this.l*sa,this.opacity)},rgb:function(){var sa=isNaN(this.h)?0:(this.h+120)*na,ya=+this.l,qa=isNaN(this.s)?0:this.s*ya*(1-ya),xa=Math.cos(sa);sa=Math.sin(sa);return new d(255*(ya+qa*(-.14861*xa+1.78277*sa)),255*(ya+qa*(-.29227*xa+-.90649*sa)),255*(ya+1.97294*qa*xa),this.opacity)}}));m.color=k;m.cubehelix=Q;m.gray=function(sa,ya){return new t(sa,0,0,null==ya?1:ya)};m.hcl=H;m.hsl=y;m.lab=B;m.lch=function(sa,ya,qa,xa){return 1===arguments.length?
N(sa):new J(qa,ya,sa,null==xa?1:xa)};m.rgb=f;Object.defineProperty(m,"__esModule",{value:!0})})},{}],159:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C):(m=m||self,h(m.d3=m.d3||{}))})(this,function(m){function h(){for(var k=0,p=arguments.length,n={},c;k<p;++k){if(!(c=arguments[k]+"")||c in n||/[\s.]/.test(c))throw Error("illegal type: "+c);n[c]=[]}return new l(n)}function l(k){this._=k}function e(k,p){return k.trim().split(/^|\s+/).map(function(n){var c="",f=n.indexOf(".");
0<=f&&(c=n.slice(f+1),n=n.slice(0,f));if(n&&!p.hasOwnProperty(n))throw Error("unknown type: "+n);return{type:n,name:c}})}function a(k,p,n){for(var c=0,f=k.length;c<f;++c)if(k[c].name===p){k[c]=g;k=k.slice(0,c).concat(k.slice(c+1));break}null!=n&&k.push({name:p,value:n});return k}var g={value:function(){}};l.prototype=h.prototype={constructor:l,on:function(k,p){var n=this._,c=e(k+"",n),f,d=-1,q=c.length;if(2>arguments.length)for(;++d<q;){var r;if(r=f=(k=c[d]).type){a:{r=n[f];for(var u=0,v=r.length;u<
v;++u)if((f=r[u]).name===k.name){f=f.value;break a}f=void 0}r=f}if(r)return f}else{if(null!=p&&"function"!==typeof p)throw Error("invalid callback: "+p);for(;++d<q;)if(f=(k=c[d]).type)n[f]=a(n[f],k.name,p);else if(null==p)for(f in n)n[f]=a(n[f],k.name,null);return this}},copy:function(){var k={},p=this._,n;for(n in p)k[n]=p[n].slice();return new l(k)},call:function(k,p){if(0<(f=arguments.length-2))for(var n=Array(f),c=0,f,d;c<f;++c)n[c]=arguments[c+2];if(!this._.hasOwnProperty(k))throw Error("unknown type: "+
k);d=this._[k];c=0;for(f=d.length;c<f;++c)d[c].value.apply(p,n)},apply:function(k,p,n){if(!this._.hasOwnProperty(k))throw Error("unknown type: "+k);k=this._[k];for(var c=0,f=k.length;c<f;++c)k[c].value.apply(p,n)}};m.dispatch=h;Object.defineProperty(m,"__esModule",{value:!0})})},{}],160:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C,b("d3-quadtree"),b("d3-collection"),b("d3-dispatch"),b("d3-timer")):h(m.d3=m.d3||{},m.d3,m.d3,m.d3,m.d3)})(this,function(m,h,l,e,a){function g(u){return function(){return u}}
function k(){return 1E-6*(Math.random()-.5)}function p(u){return u.x+u.vx}function n(u){return u.y+u.vy}function c(u){return u.index}function f(u,v){u=u.get(v);if(!u)throw Error("missing: "+v);return u}function d(u){return u.x}function q(u){return u.y}var r=Math.PI*(3-Math.sqrt(5));m.forceCenter=function(u,v){function w(){var D,x=y.length,E=0,B=0;for(D=0;D<x;++D){var t=y[D];E+=t.x;B+=t.y}E=E/x-u;B=B/x-v;for(D=0;D<x;++D)t=y[D],t.x-=E,t.y-=B}var y;null==u&&(u=0);null==v&&(v=0);w.initialize=function(D){y=
D};w.x=function(D){return arguments.length?(u=+D,w):u};w.y=function(D){return arguments.length?(v=+D,w):v};return w};m.forceCollide=function(u){function v(){function t(U,P,V,Y,ba){var ea=U.data;U=U.r;var ca=J+U;if(ea)ea.index>M.index&&(P=N-ea.x-ea.vx,V=H-ea.y-ea.vy,Y=P*P+V*V,Y<ca*ca&&(0===P&&(P=k(),Y+=P*P),0===V&&(V=k(),Y+=V*V),Y=(ca-(Y=Math.sqrt(Y)))/Y*E,M.vx+=(P*=Y)*(ca=(U*=U)/(O+U)),M.vy+=(V*=Y)*ca,ea.vx-=P*(ca=1-ca),ea.vy-=V*ca));else return P>N+ca||Y<N-ca||V>H+ca||ba<H-ca}for(var G,I=D.length,
L,M,N,H,J,O,Q=0;Q<B;++Q)for(L=h.quadtree(D,p,n).visitAfter(w),G=0;G<I;++G)M=D[G],J=x[M.index],O=J*J,N=M.x+M.vx,H=M.y+M.vy,L.visit(t)}function w(t){if(t.data)return t.r=x[t.data.index];for(var G=t.r=0;4>G;++G)t[G]&&t[G].r>t.r&&(t.r=t[G].r)}function y(){if(D){var t,G=D.length;x=Array(G);for(t=0;t<G;++t){var I=D[t];x[I.index]=+u(I,t,D)}}}var D,x,E=1,B=1;"function"!==typeof u&&(u=g(null==u?1:+u));v.initialize=function(t){D=t;y()};v.iterations=function(t){return arguments.length?(B=+t,v):B};v.strength=
function(t){return arguments.length?(E=+t,v):E};v.radius=function(t){return arguments.length?(u="function"===typeof t?t:g(+t),y(),v):u};return v};m.forceLink=function(u){function v(H){for(var J=0,O=u.length;J<N;++J)for(var Q=0,U,P,V,Y,ba;Q<O;++Q)U=u[Q],P=U.source,U=U.target,V=U.x+U.vx-P.x-P.vx||k(),Y=U.y+U.vy-P.y-P.vy||k(),ba=Math.sqrt(V*V+Y*Y),ba=(ba-G[Q])/ba*H*B[Q],V*=ba,Y*=ba,U.vx-=V*(ba=M[Q]),U.vy-=Y*ba,P.vx+=V*(ba=1-ba),P.vy+=Y*ba}function w(){if(I){var H=I.length,J=u.length,O=l.map(I,x);var Q=
0;for(L=Array(H);Q<J;++Q)H=u[Q],H.index=Q,"object"!==typeof H.source&&(H.source=f(O,H.source)),"object"!==typeof H.target&&(H.target=f(O,H.target)),L[H.source.index]=(L[H.source.index]||0)+1,L[H.target.index]=(L[H.target.index]||0)+1;Q=0;for(M=Array(J);Q<J;++Q)H=u[Q],M[Q]=L[H.source.index]/(L[H.source.index]+L[H.target.index]);B=Array(J);y();G=Array(J);D()}}function y(){if(I)for(var H=0,J=u.length;H<J;++H)B[H]=+E(u[H],H,u)}function D(){if(I)for(var H=0,J=u.length;H<J;++H)G[H]=+t(u[H],H,u)}var x=c,
E=function(H){return 1/Math.min(L[H.source.index],L[H.target.index])},B,t=g(30),G,I,L,M,N=1;null==u&&(u=[]);v.initialize=function(H){I=H;w()};v.links=function(H){return arguments.length?(u=H,w(),v):u};v.id=function(H){return arguments.length?(x=H,v):x};v.iterations=function(H){return arguments.length?(N=+H,v):N};v.strength=function(H){return arguments.length?(E="function"===typeof H?H:g(+H),y(),v):E};v.distance=function(H){return arguments.length?(t="function"===typeof H?H:g(+H),D(),v):t};return v};
m.forceManyBody=function(){function u(M){var N=D.length,H=h.quadtree(D,d,q).visitAfter(w);E=M;for(M=0;M<N;++M)x=D[M],H.visit(y)}function v(){if(D){var M,N=D.length;t=Array(N);for(M=0;M<N;++M){var H=D[M];t[H.index]=+B(H,M,D)}}}function w(M){var N=0,H,J,O=0,Q,U,P;if(M.length){for(Q=U=P=0;4>P;++P)(H=M[P])&&(J=Math.abs(H.value))&&(N+=H.value,O+=J,Q+=J*H.x,U+=J*H.y);M.x=Q/O;M.y=U/O}else{H=M;H.x=H.data.x;H.y=H.data.y;do N+=t[H.data.index];while(H=H.next)}M.value=N}function y(M,N,H,J){if(!M.value)return!0;
H=M.x-x.x;var O=M.y-x.y;N=J-N;J=H*H+O*O;if(N*N/L<J)return J<I&&(0===H&&(H=k(),J+=H*H),0===O&&(O=k(),J+=O*O),J<G&&(J=Math.sqrt(G*J)),x.vx+=H*M.value*E/J,x.vy+=O*M.value*E/J),!0;if(!(M.length||J>=I)){if(M.data!==x||M.next)0===H&&(H=k(),J+=H*H),0===O&&(O=k(),J+=O*O),J<G&&(J=Math.sqrt(G*J));do M.data!==x&&(N=t[M.data.index]*E/J,x.vx+=H*N,x.vy+=O*N);while(M=M.next)}}var D,x,E,B=g(-30),t,G=1,I=Infinity,L=.81;u.initialize=function(M){D=M;v()};u.strength=function(M){return arguments.length?(B="function"===
typeof M?M:g(+M),v(),u):B};u.distanceMin=function(M){return arguments.length?(G=M*M,u):Math.sqrt(G)};u.distanceMax=function(M){return arguments.length?(I=M*M,u):Math.sqrt(I)};u.theta=function(M){return arguments.length?(L=M*M,u):Math.sqrt(L)};return u};m.forceRadial=function(u,v,w){function y(G){for(var I=0,L=x.length;I<L;++I){var M=x[I],N=M.x-v||1E-6,H=M.y-w||1E-6,J=Math.sqrt(N*N+H*H);J=(t[I]-J)*B[I]*G/J;M.vx+=N*J;M.vy+=H*J}}function D(){if(x){var G,I=x.length;B=Array(I);t=Array(I);for(G=0;G<I;++G)t[G]=
+u(x[G],G,x),B[G]=isNaN(t[G])?0:+E(x[G],G,x)}}var x,E=g(.1),B,t;"function"!==typeof u&&(u=g(+u));null==v&&(v=0);null==w&&(w=0);y.initialize=function(G){x=G;D()};y.strength=function(G){return arguments.length?(E="function"===typeof G?G:g(+G),D(),y):E};y.radius=function(G){return arguments.length?(u="function"===typeof G?G:g(+G),D(),y):u};y.x=function(G){return arguments.length?(v=+G,y):v};y.y=function(G){return arguments.length?(w=+G,y):w};return y};m.forceSimulation=function(u){function v(){w();N.call("tick",
x);E<B&&(M.stop(),N.call("end",x))}function w(H){var J,O=u.length;void 0===H&&(H=1);for(var Q=0;Q<H;++Q)for(E+=(G-E)*t,L.each(function(P){P(E)}),J=0;J<O;++J){var U=u[J];null==U.fx?U.x+=U.vx*=I:(U.x=U.fx,U.vx=0);null==U.fy?U.y+=U.vy*=I:(U.y=U.fy,U.vy=0)}return x}function y(){for(var H=0,J=u.length,O;H<J;++H){O=u[H];O.index=H;null!=O.fx&&(O.x=O.fx);null!=O.fy&&(O.y=O.fy);if(isNaN(O.x)||isNaN(O.y)){var Q=10*Math.sqrt(H),U=H*r;O.x=Q*Math.cos(U);O.y=Q*Math.sin(U)}if(isNaN(O.vx)||isNaN(O.vy))O.vx=O.vy=
0}}function D(H){H.initialize&&H.initialize(u);return H}var x,E=1,B=.001,t=1-Math.pow(B,1/300),G=0,I=.6,L=l.map(),M=a.timer(v),N=e.dispatch("tick","end");null==u&&(u=[]);y();return x={tick:w,restart:function(){return M.restart(v),x},stop:function(){return M.stop(),x},nodes:function(H){return arguments.length?(u=H,y(),L.each(D),x):u},alpha:function(H){return arguments.length?(E=+H,x):E},alphaMin:function(H){return arguments.length?(B=+H,x):B},alphaDecay:function(H){return arguments.length?(t=+H,x):
+t},alphaTarget:function(H){return arguments.length?(G=+H,x):G},velocityDecay:function(H){return arguments.length?(I=1-H,x):1-I},force:function(H,J){return 1<arguments.length?(null==J?L.remove(H):L.set(H,D(J)),x):L.get(H)},find:function(H,J,O){var Q,U=u.length;O=null==O?Infinity:O*O;for(Q=0;Q<U;++Q){var P=u[Q];var V=H-P.x;var Y=J-P.y;V=V*V+Y*Y;if(V<O){var ba=P;O=V}}return ba},on:function(H,J){return 1<arguments.length?(N.on(H,J),x):N.on(H)}}};m.forceX=function(u){function v(B){for(var t=0,G=D.length,
I;t<G;++t)I=D[t],I.vx+=(E[t]-I.x)*x[t]*B}function w(){if(D){var B,t=D.length;x=Array(t);E=Array(t);for(B=0;B<t;++B)x[B]=isNaN(E[B]=+u(D[B],B,D))?0:+y(D[B],B,D)}}var y=g(.1),D,x,E;"function"!==typeof u&&(u=g(null==u?0:+u));v.initialize=function(B){D=B;w()};v.strength=function(B){return arguments.length?(y="function"===typeof B?B:g(+B),w(),v):y};v.x=function(B){return arguments.length?(u="function"===typeof B?B:g(+B),w(),v):u};return v};m.forceY=function(u){function v(B){for(var t=0,G=D.length,I;t<
G;++t)I=D[t],I.vy+=(E[t]-I.y)*x[t]*B}function w(){if(D){var B,t=D.length;x=Array(t);E=Array(t);for(B=0;B<t;++B)x[B]=isNaN(E[B]=+u(D[B],B,D))?0:+y(D[B],B,D)}}var y=g(.1),D,x,E;"function"!==typeof u&&(u=g(null==u?0:+u));v.initialize=function(B){D=B;w()};v.strength=function(B){return arguments.length?(y="function"===typeof B?B:g(+B),w(),v):y};v.y=function(B){return arguments.length?(u="function"===typeof B?B:g(+B),w(),v):u};return v};Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-collection":157,
"d3-dispatch":159,"d3-quadtree":164,"d3-timer":168}],161:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C):(m=m||self,h(m.d3=m.d3||{}))})(this,function(m){function h(oa,ua){return oa.parent===ua.parent?1:2}function l(oa,ua){return oa+ua.x}function e(oa,ua){return Math.max(oa,ua.y)}function a(oa){for(var ua;ua=oa.children;)oa=ua[0];return oa}function g(oa){for(var ua;ua=oa.children;)oa=ua[ua.length-1];return oa}function k(oa){var ua=0,ka=oa.children,sa=ka&&ka.length;
if(sa)for(;0<=--sa;)ua+=ka[sa].value;else ua=1;oa.value=ua}function p(oa,ua){var ka=new d(oa);oa=+oa.value&&(ka.value=oa.value);var sa,ya=[ka],qa,xa,Ca,Ja;for(null==ua&&(ua=n);sa=ya.pop();)if(oa&&(sa.value=+sa.data.value),(xa=ua(sa.data))&&(Ja=xa.length))for(sa.children=Array(Ja),Ca=Ja-1;0<=Ca;--Ca)ya.push(qa=sa.children[Ca]=new d(xa[Ca])),qa.parent=sa,qa.depth=sa.depth+1;return ka.eachBefore(f)}function n(oa){return oa.children}function c(oa){oa.data=oa.data.data}function f(oa){var ua=0;do oa.height=
ua;while((oa=oa.parent)&&oa.height<++ua)}function d(oa){this.data=oa;this.depth=this.height=0;this.parent=null}function q(oa){var ua=0;oa=ha.call(oa);for(var ka=oa.length,sa,ya;ka;)ya=Math.random()*ka--|0,sa=oa[ka],oa[ka]=oa[ya],oa[ya]=sa;ka=oa.length;sa=[];for(var qa;ua<ka;)if(ya=oa[ua],qa&&u(qa,ya))++ua;else{a:if(ua=sa,v(ya,ua))ua=[ya];else{for(sa=0;sa<ua.length;++sa)if(r(ya,ua[sa])&&v(w(ua[sa],ya),ua)){ua=[ua[sa],ya];break a}for(sa=0;sa<ua.length-1;++sa)for(qa=sa+1;qa<ua.length;++qa)if(r(w(ua[sa],
ua[qa]),ya)&&r(w(ua[sa],ya),ua[qa])&&r(w(ua[qa],ya),ua[sa])&&v(y(ua[sa],ua[qa],ya),ua)){ua=[ua[sa],ua[qa],ya];break a}throw Error();}a:{ua=sa=ua;switch(ua.length){case 1:ua=ua[0];ua={x:ua.x,y:ua.y,r:ua.r};break a;case 2:ua=w(ua[0],ua[1]);break a;case 3:ua=y(ua[0],ua[1],ua[2]);break a}ua=void 0}qa=ua;ua=0}return qa}function r(oa,ua){var ka=oa.r-ua.r,sa=ua.x-oa.x;oa=ua.y-oa.y;return 0>ka||ka*ka<sa*sa+oa*oa}function u(oa,ua){var ka=oa.r-ua.r+1E-6,sa=ua.x-oa.x;oa=ua.y-oa.y;return 0<ka&&ka*ka>sa*sa+oa*
oa}function v(oa,ua){for(var ka=0;ka<ua.length;++ka)if(!u(oa,ua[ka]))return!1;return!0}function w(oa,ua){var ka=oa.x,sa=oa.y;oa=oa.r;var ya=ua.x,qa=ua.y;ua=ua.r;var xa=ya-ka,Ca=qa-sa,Ja=ua-oa,eb=Math.sqrt(xa*xa+Ca*Ca);return{x:(ka+ya+xa/eb*Ja)/2,y:(sa+qa+Ca/eb*Ja)/2,r:(eb+oa+ua)/2}}function y(oa,ua,ka){var sa=oa.x,ya=oa.y;oa=oa.r;var qa=ua.x,xa=ua.y,Ca=ua.r,Ja=ka.x,eb=ka.y,Ra=ka.r;ka=sa-qa;ua=sa-Ja;var Wa=ya-xa,Ea=ya-eb,Ia=Ca-oa,Qa=Ra-oa,lb=sa*sa+ya*ya-oa*oa;xa=lb-qa*qa-xa*xa+Ca*Ca;eb=lb-Ja*Ja-eb*
eb+Ra*Ra;Ja=ua*Wa-ka*Ea;qa=(Wa*eb-Ea*xa)/(2*Ja)-sa;Wa=(Ea*Ia-Wa*Qa)/Ja;Ea=(ua*xa-ka*eb)/(2*Ja)-ya;ka=(ka*Qa-ua*Ia)/Ja;ua=Wa*Wa+ka*ka-1;Ia=2*(oa+qa*Wa+Ea*ka);oa=qa*qa+Ea*Ea-oa*oa;oa=-(ua?(Ia+Math.sqrt(Ia*Ia-4*ua*oa))/(2*ua):oa/Ia);return{x:sa+qa+Wa*oa,y:ya+Ea+ka*oa,r:oa}}function D(oa,ua,ka){var sa=oa.x-ua.x,ya=oa.y-ua.y,qa=sa*sa+ya*ya;if(qa){var xa=ua.r+ka.r;xa*=xa;var Ca=oa.r+ka.r;Ca*=Ca;if(xa>Ca){var Ja=(qa+Ca-xa)/(2*qa);xa=Math.sqrt(Math.max(0,Ca/qa-Ja*Ja));ka.x=oa.x-Ja*sa-xa*ya;ka.y=oa.y-Ja*ya+
xa*sa}else Ja=(qa+xa-Ca)/(2*qa),xa=Math.sqrt(Math.max(0,xa/qa-Ja*Ja)),ka.x=ua.x+Ja*sa-xa*ya,ka.y=ua.y+Ja*ya+xa*sa}else ka.x=ua.x+ka.r,ka.y=ua.y}function x(oa,ua){var ka=oa.r+ua.r-1E-6,sa=ua.x-oa.x;oa=ua.y-oa.y;return 0<ka&&ka*ka>sa*sa+oa*oa}function E(oa){var ua=oa._,ka=oa.next._,sa=ua.r+ka.r;oa=(ua.x*ka.r+ka.x*ua.r)/sa;ua=(ua.y*ka.r+ka.y*ua.r)/sa;return oa*oa+ua*ua}function B(oa){this._=oa;this.previous=this.next=null}function t(oa){if(!(ka=oa.length))return 0;var ua,ka;var sa=oa[0];sa.x=0;sa.y=
0;if(!(1<ka))return sa.r;var ya=oa[1];sa.x=-ya.r;ya.x=sa.r;ya.y=0;if(!(2<ka))return sa.r+ya.r;D(ya,sa,ua=oa[2]);sa=new B(sa);ya=new B(ya);ua=new B(ua);sa.next=ua.previous=ya;ya.next=sa.previous=ua;ua.next=ya.previous=sa;var qa=3;a:for(;qa<ka;++qa){D(sa._,ya._,ua=oa[qa]);ua=new B(ua);var xa=ya.next;var Ca=sa.previous;var Ja=ya._.r;var eb=sa._.r;do if(Ja<=eb){if(x(xa._,ua._)){ya=xa;sa.next=ya;ya.previous=sa;--qa;continue a}Ja+=xa._.r;xa=xa.next}else{if(x(Ca._,ua._)){sa=Ca;sa.next=ya;ya.previous=sa;
--qa;continue a}eb+=Ca._.r;Ca=Ca.previous}while(xa!==Ca.next);ua.previous=sa;ua.next=ya;sa.next=ya.previous=ya=ua;for(xa=E(sa);(ua=ua.next)!==ya;)(Ca=E(ua))<xa&&(sa=ua,xa=Ca);ya=sa.next}sa=[ya._];for(ua=ya;(ua=ua.next)!==ya;)sa.push(ua._);ua=q(sa);for(qa=0;qa<ka;++qa)sa=oa[qa],sa.x-=ua.x,sa.y-=ua.y;return ua.r}function G(oa){if("function"!==typeof oa)throw Error();return oa}function I(){return 0}function L(oa){return function(){return oa}}function M(oa){return Math.sqrt(oa.value)}function N(oa){return function(ua){ua.children||
(ua.r=Math.max(0,+oa(ua)||0))}}function H(oa,ua){return function(ka){if(sa=ka.children){var sa,ya,qa=sa.length,xa=oa(ka)*ua||0;if(xa)for(ya=0;ya<qa;++ya)sa[ya].r+=xa;var Ca=t(sa);if(xa)for(ya=0;ya<qa;++ya)sa[ya].r-=xa;ka.r=Ca+xa}}}function J(oa){return function(ua){var ka=ua.parent;ua.r*=oa;ka&&(ua.x=ka.x+oa*ua.x,ua.y=ka.y+oa*ua.y)}}function O(oa){oa.x0=Math.round(oa.x0);oa.y0=Math.round(oa.y0);oa.x1=Math.round(oa.x1);oa.y1=Math.round(oa.y1)}function Q(oa,ua,ka,sa,ya){var qa=oa.children,xa=-1,Ca=
qa.length;for(sa=oa.value&&(sa-ua)/oa.value;++xa<Ca;)oa=qa[xa],oa.y0=ka,oa.y1=ya,oa.x0=ua,oa.x1=ua+=oa.value*sa}function U(oa){return oa.id}function P(oa){return oa.parentId}function V(oa,ua){return oa.parent===ua.parent?1:2}function Y(oa){var ua=oa.children;return ua?ua[0]:oa.t}function ba(oa){var ua=oa.children;return ua?ua[ua.length-1]:oa.t}function ea(oa,ua){this._=oa;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=ua}function ca(oa){oa=new ea(oa,
0);for(var ua,ka=[oa],sa,ya,qa;ua=ka.pop();)if(ya=ua._.children)for(ua.children=Array(sa=ya.length),qa=sa-1;0<=qa;--qa)ka.push(sa=ua.children[qa]=new ea(ya[qa],qa)),sa.parent=ua;(oa.parent=new ea(null,0)).children=[oa];return oa}function ia(oa,ua,ka,sa,ya){var qa=oa.children,xa=-1,Ca=qa.length;for(ya=oa.value&&(ya-ka)/oa.value;++xa<Ca;)oa=qa[xa],oa.x0=ua,oa.x1=sa,oa.y0=ka,oa.y1=ka+=oa.value*ya}function fa(oa,ua,ka,sa,ya,qa){for(var xa=[],Ca=ua.children,Ja,eb,Ra=Ja=0,Wa=Ca.length,Ea,Ia=ua.value,Qa,
lb,hb,Fa,La,Oa;Ja<Wa;){ua=ya-ka;Ea=qa-sa;do Qa=Ca[Ra++].value;while(!Qa&&Ra<Wa);lb=hb=Qa;Oa=Math.max(Ea/ua,ua/Ea)/(Ia*oa);Fa=Qa*Qa*Oa;for(La=Math.max(hb/Fa,Fa/lb);Ra<Wa;++Ra){Qa+=eb=Ca[Ra].value;eb<lb&&(lb=eb);eb>hb&&(hb=eb);Fa=Qa*Qa*Oa;Fa=Math.max(hb/Fa,Fa/lb);if(Fa>La){Qa-=eb;break}La=Fa}xa.push(Ja={value:Qa,dice:ua<Ea,children:Ca.slice(Ja,Ra)});Ja.dice?Q(Ja,ka,sa,ya,Ia?sa+=Ea*Qa/Ia:qa):ia(Ja,ka,sa,Ia?ka+=ua*Qa/Ia:ya,qa);Ia-=Qa;Ja=Ra}return xa}d.prototype=p.prototype={constructor:d,count:function(){return this.eachAfter(k)},
each:function(oa){var ua,ka=[this],sa;do{var ya=ka.reverse();for(ka=[];ua=ya.pop();)if(oa(ua),ua=ua.children){var qa=0;for(sa=ua.length;qa<sa;++qa)ka.push(ua[qa])}}while(ka.length);return this},eachAfter:function(oa){for(var ua,ka=[this],sa=[],ya,qa;ua=ka.pop();)if(sa.push(ua),ua=ua.children)for(ya=0,qa=ua.length;ya<qa;++ya)ka.push(ua[ya]);for(;ua=sa.pop();)oa(ua);return this},eachBefore:function(oa){for(var ua,ka=[this],sa;ua=ka.pop();)if(oa(ua),ua=ua.children)for(sa=ua.length-1;0<=sa;--sa)ka.push(ua[sa]);
return this},sum:function(oa){return this.eachAfter(function(ua){for(var ka=+oa(ua.data)||0,sa=ua.children,ya=sa&&sa.length;0<=--ya;)ka+=sa[ya].value;ua.value=ka})},sort:function(oa){return this.eachBefore(function(ua){ua.children&&ua.children.sort(oa)})},path:function(oa){var ua=this;var ka=ua;var sa=oa;if(ka!==sa){var ya=ka.ancestors(),qa=sa.ancestors(),xa=null;ka=ya.pop();for(sa=qa.pop();ka===sa;)xa=ka,ka=ya.pop(),sa=qa.pop();ka=xa}for(sa=[ua];ua!==ka;)ua=ua.parent,sa.push(ua);for(ua=sa.length;oa!==
ka;)sa.splice(ua,0,oa),oa=oa.parent;return sa},ancestors:function(){for(var oa=this,ua=[oa];oa=oa.parent;)ua.push(oa);return ua},descendants:function(){var oa=[];this.each(function(ua){oa.push(ua)});return oa},leaves:function(){var oa=[];this.eachBefore(function(ua){ua.children||oa.push(ua)});return oa},links:function(){var oa=this,ua=[];oa.each(function(ka){ka!==oa&&ua.push({source:ka.parent,target:ka})});return ua},copy:function(){return p(this).eachBefore(c)}};var ha=Array.prototype.slice,na={depth:-1},
pa={};ea.prototype=Object.create(d.prototype);var ra=(1+Math.sqrt(5))/2,ta=function ka(ua){function sa(ya,qa,xa,Ca,Ja){fa(ua,ya,qa,xa,Ca,Ja)}sa.ratio=function(ya){return ka(1<(ya=+ya)?ya:1)};return sa}(ra);ra=function sa(ka){function ya(qa,xa,Ca,Ja,eb){if((Ra=qa._squarify)&&Ra.ratio===ka)for(var Ra,Wa,Ea,Ia=-1,Qa,lb=Ra.length,hb=qa.value;++Ia<lb;){qa=Ra[Ia];Wa=qa.children;Ea=qa.value=0;for(Qa=Wa.length;Ea<Qa;++Ea)qa.value+=Wa[Ea].value;qa.dice?Q(qa,xa,Ca,Ja,Ca+=(eb-Ca)*qa.value/hb):ia(qa,xa,Ca,xa+=
(Ja-xa)*qa.value/hb,eb);hb-=qa.value}else qa._squarify=Ra=fa(ka,qa,xa,Ca,Ja,eb),Ra.ratio=ka}ya.ratio=function(qa){return sa(1<(qa=+qa)?qa:1)};return ya}(ra);m.cluster=function(){function ka(Ca){var Ja,eb=0;Ca.eachAfter(function(Qa){var lb=Qa.children;if(lb){var hb=lb.reduce(l,0)/lb.length;Qa.x=hb;Qa.y=1+lb.reduce(e,0)}else Qa.x=Ja?eb+=sa(Qa,Ja):0,Qa.y=0,Ja=Qa});var Ra=a(Ca),Wa=g(Ca),Ea=Ra.x-sa(Ra,Wa)/2,Ia=Wa.x+sa(Wa,Ra)/2;return Ca.eachAfter(xa?function(Qa){Qa.x=(Qa.x-Ca.x)*ya;Qa.y=(Ca.y-Qa.y)*qa}:
function(Qa){Qa.x=(Qa.x-Ea)/(Ia-Ea)*ya;Qa.y=(1-(Ca.y?Qa.y/Ca.y:1))*qa})}var sa=h,ya=1,qa=1,xa=!1;ka.separation=function(Ca){return arguments.length?(sa=Ca,ka):sa};ka.size=function(Ca){return arguments.length?(xa=!1,ya=+Ca[0],qa=+Ca[1],ka):xa?null:[ya,qa]};ka.nodeSize=function(Ca){return arguments.length?(xa=!0,ya=+Ca[0],qa=+Ca[1],ka):xa?[ya,qa]:null};return ka};m.hierarchy=p;m.pack=function(){function ka(Ca){Ca.x=ya/2;Ca.y=qa/2;sa?Ca.eachBefore(N(sa)).eachAfter(H(xa,.5)).eachBefore(J(1)):Ca.eachBefore(N(M)).eachAfter(H(I,
1)).eachAfter(H(xa,Ca.r/Math.min(ya,qa))).eachBefore(J(Math.min(ya,qa)/(2*Ca.r)));return Ca}var sa=null,ya=1,qa=1,xa=I;ka.radius=function(Ca){return arguments.length?(sa=null==Ca?null:G(Ca),ka):sa};ka.size=function(Ca){return arguments.length?(ya=+Ca[0],qa=+Ca[1],ka):[ya,qa]};ka.padding=function(Ca){return arguments.length?(xa="function"===typeof Ca?Ca:L(+Ca),ka):xa};return ka};m.packEnclose=q;m.packSiblings=function(ka){t(ka);return ka};m.partition=function(){function ka(Ja){var eb=Ja.height+1;Ja.x0=
Ja.y0=xa;Ja.x1=ya;Ja.y1=qa/eb;Ja.eachBefore(sa(qa,eb));Ca&&Ja.eachBefore(O);return Ja}function sa(Ja,eb){return function(Ra){Ra.children&&Q(Ra,Ra.x0,Ja*(Ra.depth+1)/eb,Ra.x1,Ja*(Ra.depth+2)/eb);var Wa=Ra.x0,Ea=Ra.y0,Ia=Ra.x1-xa,Qa=Ra.y1-xa;Ia<Wa&&(Wa=Ia=(Wa+Ia)/2);Qa<Ea&&(Ea=Qa=(Ea+Qa)/2);Ra.x0=Wa;Ra.y0=Ea;Ra.x1=Ia;Ra.y1=Qa}}var ya=1,qa=1,xa=0,Ca=!1;ka.round=function(Ja){return arguments.length?(Ca=!!Ja,ka):Ca};ka.size=function(Ja){return arguments.length?(ya=+Ja[0],qa=+Ja[1],ka):[ya,qa]};ka.padding=
function(Ja){return arguments.length?(xa=+Ja,ka):xa};return ka};m.stratify=function(){function ka(qa){var xa,Ca=qa.length,Ja=Array(Ca),eb,Ra={};for(xa=0;xa<Ca;++xa){var Wa=qa[xa];var Ea=Ja[xa]=new d(Wa);null!=(eb=sa(Wa,xa,qa))&&(eb+="")&&(Wa="$"+(Ea.id=eb),Ra[Wa]=Wa in Ra?pa:Ea)}for(xa=0;xa<Ca;++xa)if(Ea=Ja[xa],eb=ya(qa[xa],xa,qa),null!=eb&&(eb+="")){Wa=Ra["$"+eb];if(!Wa)throw Error("missing: "+eb);if(Wa===pa)throw Error("ambiguous: "+eb);Wa.children?Wa.children.push(Ea):Wa.children=[Ea];Ea.parent=
Wa}else{if(Ia)throw Error("multiple roots");var Ia=Ea}if(!Ia)throw Error("no root");Ia.parent=na;Ia.eachBefore(function(Qa){Qa.depth=Qa.parent.depth+1;--Ca}).eachBefore(f);Ia.parent=null;if(0<Ca)throw Error("cycle");return Ia}var sa=U,ya=P;ka.id=function(qa){return arguments.length?(sa=G(qa),ka):sa};ka.parentId=function(qa){return arguments.length?(ya=G(qa),ka):ya};return ka};m.tree=function(){function ka(Ra){var Wa=ca(Ra);Wa.eachAfter(sa);Wa.parent.m=-Wa.z;Wa.eachBefore(ya);if(eb)Ra.eachBefore(qa);
else{var Ea=Ra,Ia=Ra,Qa=Ra;Ra.eachBefore(function(La){La.x<Ea.x&&(Ea=La);La.x>Ia.x&&(Ia=La);La.depth>Qa.depth&&(Qa=La)});Wa=Ea===Ia?1:xa(Ea,Ia)/2;var lb=Wa-Ea.x,hb=Ca/(Ia.x+Wa+lb),Fa=Ja/(Qa.depth||1);Ra.eachBefore(function(La){La.x=(La.x+lb)*hb;La.y=La.depth*Fa})}return Ra}function sa(Ra){var Wa=Ra.children,Ea=Ra.parent.children,Ia=Ra.i?Ea[Ra.i-1]:null;if(Wa){for(var Qa=0,lb=0,hb=Ra.children,Fa=hb.length,La;0<=--Fa;)La=hb[Fa],La.z+=Qa,La.m+=Qa,Qa+=La.s+(lb+=La.c);Wa=(Wa[0].z+Wa[Wa.length-1].z)/2;
Ia?(Ra.z=Ia.z+xa(Ra._,Ia._),Ra.m=Ra.z-Wa):Ra.z=Wa}else Ia&&(Ra.z=Ia.z+xa(Ra._,Ia._));Wa=Ra.parent;Ea=Ra.parent.A||Ea[0];if(Ia){lb=Qa=Ra;hb=Qa.parent.children[0];Fa=Qa.m;La=lb.m;for(var Oa=Ia.m,fb=hb.m,bb;Ia=ba(Ia),Qa=Y(Qa),Ia&&Qa;){hb=Y(hb);lb=ba(lb);lb.a=Ra;bb=Ia.z+Oa-Qa.z-Fa+xa(Ia._,Qa._);if(0<bb){var Pa=Ia.a.parent===Ra.parent?Ia.a:Ea,Ta=Ra,Ya=bb,nb=Ya/(Ta.i-Pa.i);Ta.c-=nb;Ta.s+=Ya;Pa.c+=nb;Ta.z+=Ya;Ta.m+=Ya;Fa+=bb;La+=bb}Oa+=Ia.m;Fa+=Qa.m;fb+=hb.m;La+=lb.m}Ia&&!ba(lb)&&(lb.t=Ia,lb.m+=Oa-La);Qa&&
!Y(hb)&&(hb.t=Qa,hb.m+=Fa-fb,Ea=Ra)}Wa.A=Ea}function ya(Ra){Ra._.x=Ra.z+Ra.parent.m;Ra.m+=Ra.parent.m}function qa(Ra){Ra.x*=Ca;Ra.y=Ra.depth*Ja}var xa=V,Ca=1,Ja=1,eb=null;ka.separation=function(Ra){return arguments.length?(xa=Ra,ka):xa};ka.size=function(Ra){return arguments.length?(eb=!1,Ca=+Ra[0],Ja=+Ra[1],ka):eb?null:[Ca,Ja]};ka.nodeSize=function(Ra){return arguments.length?(eb=!0,Ca=+Ra[0],Ja=+Ra[1],ka):eb?[Ca,Ja]:null};return ka};m.treemap=function(){function ka(Qa){Qa.x0=Qa.y0=0;Qa.x1=xa;Qa.y1=
Ca;Qa.eachBefore(sa);Ja=[0];qa&&Qa.eachBefore(O);return Qa}function sa(Qa){var lb=Ja[Qa.depth],hb=Qa.x0+lb,Fa=Qa.y0+lb,La=Qa.x1-lb,Oa=Qa.y1-lb;La<hb&&(hb=La=(hb+La)/2);Oa<Fa&&(Fa=Oa=(Fa+Oa)/2);Qa.x0=hb;Qa.y0=Fa;Qa.x1=La;Qa.y1=Oa;Qa.children&&(lb=Ja[Qa.depth+1]=eb(Qa)/2,hb+=Ia(Qa)-lb,Fa+=Ra(Qa)-lb,La-=Wa(Qa)-lb,Oa-=Ea(Qa)-lb,La<hb&&(hb=La=(hb+La)/2),Oa<Fa&&(Fa=Oa=(Fa+Oa)/2),ya(Qa,hb,Fa,La,Oa))}var ya=ta,qa=!1,xa=1,Ca=1,Ja=[0],eb=I,Ra=I,Wa=I,Ea=I,Ia=I;ka.round=function(Qa){return arguments.length?(qa=
!!Qa,ka):qa};ka.size=function(Qa){return arguments.length?(xa=+Qa[0],Ca=+Qa[1],ka):[xa,Ca]};ka.tile=function(Qa){return arguments.length?(ya=G(Qa),ka):ya};ka.padding=function(Qa){return arguments.length?ka.paddingInner(Qa).paddingOuter(Qa):ka.paddingInner()};ka.paddingInner=function(Qa){return arguments.length?(eb="function"===typeof Qa?Qa:L(+Qa),ka):eb};ka.paddingOuter=function(Qa){return arguments.length?ka.paddingTop(Qa).paddingRight(Qa).paddingBottom(Qa).paddingLeft(Qa):ka.paddingTop()};ka.paddingTop=
function(Qa){return arguments.length?(Ra="function"===typeof Qa?Qa:L(+Qa),ka):Ra};ka.paddingRight=function(Qa){return arguments.length?(Wa="function"===typeof Qa?Qa:L(+Qa),ka):Wa};ka.paddingBottom=function(Qa){return arguments.length?(Ea="function"===typeof Qa?Qa:L(+Qa),ka):Ea};ka.paddingLeft=function(Qa){return arguments.length?(Ia="function"===typeof Qa?Qa:L(+Qa),ka):Ia};return ka};m.treemapBinary=function(ka,sa,ya,qa,xa){function Ca(Ia,Qa,lb,hb,Fa,La,Oa){if(Ia>=Qa-1)Ia=Ja[Ia],Ia.x0=hb,Ia.y0=Fa,
Ia.x1=La,Ia.y1=Oa;else{for(var fb=Ea[Ia],bb=lb/2+fb,Pa=Ia+1,Ta=Qa-1;Pa<Ta;){var Ya=Pa+Ta>>>1;Ea[Ya]<bb?Pa=Ya+1:Ta=Ya}bb-Ea[Pa-1]<Ea[Pa]-bb&&Ia+1<Pa&&--Pa;fb=Ea[Pa]-fb;bb=lb-fb;La-hb>Oa-Fa?(lb=(hb*bb+La*fb)/lb,Ca(Ia,Pa,fb,hb,Fa,lb,Oa),Ca(Pa,Qa,bb,lb,Fa,La,Oa)):(lb=(Fa*bb+Oa*fb)/lb,Ca(Ia,Pa,fb,hb,Fa,La,lb),Ca(Pa,Qa,bb,hb,lb,La,Oa))}}var Ja=ka.children,eb,Ra=Ja.length,Wa,Ea=Array(Ra+1);for(Ea[0]=Wa=eb=0;eb<Ra;++eb)Ea[eb+1]=Wa+=Ja[eb].value;Ca(0,Ra,ka.value,sa,ya,qa,xa)};m.treemapDice=Q;m.treemapResquarify=
ra;m.treemapSlice=ia;m.treemapSliceDice=function(ka,sa,ya,qa,xa){(ka.depth&1?ia:Q)(ka,sa,ya,qa,xa)};m.treemapSquarify=ta;Object.defineProperty(m,"__esModule",{value:!0})})},{}],162:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C,b("d3-color")):(m=m||self,h(m.d3=m.d3||{},m.d3))})(this,function(m,h){function l(ka,sa,ya,qa,xa){var Ca=ka*ka,Ja=Ca*ka;return((1-3*ka+3*Ca-Ja)*sa+(4-6*Ca+3*Ja)*ya+(1+3*ka+3*Ca-3*Ja)*qa+Ja*xa)/6}function e(ka){var sa=ka.length-1;return function(ya){var qa=
0>=ya?ya=0:1<=ya?(ya=1,sa-1):Math.floor(ya*sa),xa=ka[qa],Ca=ka[qa+1];return l((ya-qa/sa)*sa,0<qa?ka[qa-1]:2*xa-Ca,xa,Ca,qa<sa-1?ka[qa+2]:2*Ca-xa)}}function a(ka){var sa=ka.length;return function(ya){var qa=Math.floor((0>(ya%=1)?++ya:ya)*sa);return l((ya-qa/sa)*sa,ka[(qa+sa-1)%sa],ka[qa%sa],ka[(qa+1)%sa],ka[(qa+2)%sa])}}function g(ka){return function(){return ka}}function k(ka,sa){return function(ya){return ka+ya*sa}}function p(ka,sa,ya){return ka=Math.pow(ka,ya),sa=Math.pow(sa,ya)-ka,ya=1/ya,function(qa){return Math.pow(ka+
qa*sa,ya)}}function n(ka,sa){var ya=sa-ka;return ya?k(ka,180<ya||-180>ya?ya-360*Math.round(ya/360):ya):g(isNaN(ka)?sa:ka)}function c(ka){return 1===(ka=+ka)?f:function(sa,ya){return ya-sa?p(sa,ya,ka):g(isNaN(sa)?ya:sa)}}function f(ka,sa){var ya=sa-ka;return ya?k(ka,ya):g(isNaN(ka)?sa:ka)}function d(ka){return function(sa){var ya=sa.length,qa=Array(ya),xa=Array(ya),Ca=Array(ya),Ja;for(Ja=0;Ja<ya;++Ja){var eb=h.rgb(sa[Ja]);qa[Ja]=eb.r||0;xa[Ja]=eb.g||0;Ca[Ja]=eb.b||0}qa=ka(qa);xa=ka(xa);Ca=ka(Ca);eb.opacity=
1;return function(Ra){eb.r=qa(Ra);eb.g=xa(Ra);eb.b=Ca(Ra);return eb+""}}}function q(ka,sa){sa||(sa=[]);var ya=ka?Math.min(sa.length,ka.length):0,qa=sa.slice(),xa;return function(Ca){for(xa=0;xa<ya;++xa)qa[xa]=ka[xa]*(1-Ca)+sa[xa]*Ca;return qa}}function r(ka){return ArrayBuffer.isView(ka)&&!(ka instanceof DataView)}function u(ka,sa){var ya=sa?sa.length:0,qa=ka?Math.min(ya,ka.length):0,xa=Array(qa),Ca=Array(ya),Ja;for(Ja=0;Ja<qa;++Ja)xa[Ja]=B(ka[Ja],sa[Ja]);for(;Ja<ya;++Ja)Ca[Ja]=sa[Ja];return function(eb){for(Ja=
0;Ja<qa;++Ja)Ca[Ja]=xa[Ja](eb);return Ca}}function v(ka,sa){var ya=new Date;return ka=+ka,sa=+sa,function(qa){return ya.setTime(ka*(1-qa)+sa*qa),ya}}function w(ka,sa){return ka=+ka,sa=+sa,function(ya){return ka*(1-ya)+sa*ya}}function y(ka,sa){var ya={},qa={},xa;if(null===ka||"object"!==typeof ka)ka={};if(null===sa||"object"!==typeof sa)sa={};for(xa in sa)xa in ka?ya[xa]=B(ka[xa],sa[xa]):qa[xa]=sa[xa];return function(Ca){for(xa in ya)qa[xa]=ya[xa](Ca);return qa}}function D(ka){return function(){return ka}}
function x(ka){return function(sa){return ka(sa)+""}}function E(ka,sa){var ya=Q.lastIndex=U.lastIndex=0,qa,xa,Ca,Ja=-1,eb=[],Ra=[];ka+="";for(sa+="";(qa=Q.exec(ka))&&(xa=U.exec(sa));)(Ca=xa.index)>ya&&(Ca=sa.slice(ya,Ca),eb[Ja]?eb[Ja]+=Ca:eb[++Ja]=Ca),(qa=qa[0])===(xa=xa[0])?eb[Ja]?eb[Ja]+=xa:eb[++Ja]=xa:(eb[++Ja]=null,Ra.push({i:Ja,x:w(qa,xa)})),ya=U.lastIndex;ya<sa.length&&(Ca=sa.slice(ya),eb[Ja]?eb[Ja]+=Ca:eb[++Ja]=Ca);return 2>eb.length?Ra[0]?x(Ra[0].x):D(sa):(sa=Ra.length,function(Wa){for(var Ea=
0,Ia;Ea<sa;++Ea)eb[(Ia=Ra[Ea]).i]=Ia.x(Wa);return eb.join("")})}function B(ka,sa){var ya=typeof sa,qa;return null==sa||"boolean"===ya?g(sa):("number"===ya?w:"string"===ya?(qa=h.color(sa))?(sa=qa,H):E:sa instanceof h.color?H:sa instanceof Date?v:r(sa)?q:Array.isArray(sa)?u:"function"!==typeof sa.valueOf&&"function"!==typeof sa.toString||isNaN(sa)?y:w)(ka,sa)}function t(ka,sa,ya,qa,xa,Ca){var Ja,eb,Ra;if(Ja=Math.sqrt(ka*ka+sa*sa))ka/=Ja,sa/=Ja;if(Ra=ka*ya+sa*qa)ya-=ka*Ra,qa-=sa*Ra;if(eb=Math.sqrt(ya*
ya+qa*qa))ya/=eb,qa/=eb,Ra/=eb;ka*qa<sa*ya&&(ka=-ka,sa=-sa,Ra=-Ra,Ja=-Ja);return{translateX:xa,translateY:Ca,rotate:Math.atan2(sa,ka)*P,skewX:Math.atan(Ra)*P,scaleX:Ja,scaleY:eb}}function G(ka,sa,ya,qa){function xa(Wa){return Wa.length?Wa.pop()+" ":""}function Ca(Wa,Ea,Ia,Qa,lb,hb){Wa!==Ia||Ea!==Qa?(lb=lb.push("translate(",null,sa,null,ya),hb.push({i:lb-4,x:w(Wa,Ia)},{i:lb-2,x:w(Ea,Qa)})):(Ia||Qa)&&lb.push("translate("+Ia+sa+Qa+ya)}function Ja(Wa,Ea,Ia,Qa){Wa!==Ea?(180<Wa-Ea?Ea+=360:180<Ea-Wa&&(Wa+=
360),Qa.push({i:Ia.push(xa(Ia)+"rotate(",null,qa)-2,x:w(Wa,Ea)})):Ea&&Ia.push(xa(Ia)+"rotate("+Ea+qa)}function eb(Wa,Ea,Ia,Qa){Wa!==Ea?Qa.push({i:Ia.push(xa(Ia)+"skewX(",null,qa)-2,x:w(Wa,Ea)}):Ea&&Ia.push(xa(Ia)+"skewX("+Ea+qa)}function Ra(Wa,Ea,Ia,Qa,lb,hb){Wa!==Ia||Ea!==Qa?(lb=lb.push(xa(lb)+"scale(",null,",",null,")"),hb.push({i:lb-4,x:w(Wa,Ia)},{i:lb-2,x:w(Ea,Qa)})):1===Ia&&1===Qa||lb.push(xa(lb)+"scale("+Ia+","+Qa+")")}return function(Wa,Ea){var Ia=[],Qa=[];Wa=ka(Wa);Ea=ka(Ea);Ca(Wa.translateX,
Wa.translateY,Ea.translateX,Ea.translateY,Ia,Qa);Ja(Wa.rotate,Ea.rotate,Ia,Qa);eb(Wa.skewX,Ea.skewX,Ia,Qa);Ra(Wa.scaleX,Wa.scaleY,Ea.scaleX,Ea.scaleY,Ia,Qa);Wa=Ea=null;return function(lb){for(var hb=-1,Fa=Qa.length,La;++hb<Fa;)Ia[(La=Qa[hb]).i]=La.x(lb);return Ia.join("")}}}function I(ka){return((ka=Math.exp(ka))+1/ka)/2}function L(ka){return function(sa,ya){var qa=ka((sa=h.hsl(sa)).h,(ya=h.hsl(ya)).h),xa=f(sa.s,ya.s),Ca=f(sa.l,ya.l),Ja=f(sa.opacity,ya.opacity);return function(eb){sa.h=qa(eb);sa.s=
xa(eb);sa.l=Ca(eb);sa.opacity=Ja(eb);return sa+""}}}function M(ka){return function(sa,ya){var qa=ka((sa=h.hcl(sa)).h,(ya=h.hcl(ya)).h),xa=f(sa.c,ya.c),Ca=f(sa.l,ya.l),Ja=f(sa.opacity,ya.opacity);return function(eb){sa.h=qa(eb);sa.c=xa(eb);sa.l=Ca(eb);sa.opacity=Ja(eb);return sa+""}}}function N(ka){return function qa(ya){function xa(Ca,Ja){var eb=ka((Ca=h.cubehelix(Ca)).h,(Ja=h.cubehelix(Ja)).h),Ra=f(Ca.s,Ja.s),Wa=f(Ca.l,Ja.l),Ea=f(Ca.opacity,Ja.opacity);return function(Ia){Ca.h=eb(Ia);Ca.s=Ra(Ia);
Ca.l=Wa(Math.pow(Ia,ya));Ca.opacity=Ea(Ia);return Ca+""}}ya=+ya;xa.gamma=qa;return xa}(1)}var H=function ya(sa){function qa(Ca,Ja){var eb=xa((Ca=h.rgb(Ca)).r,(Ja=h.rgb(Ja)).r),Ra=xa(Ca.g,Ja.g),Wa=xa(Ca.b,Ja.b),Ea=f(Ca.opacity,Ja.opacity);return function(Ia){Ca.r=eb(Ia);Ca.g=Ra(Ia);Ca.b=Wa(Ia);Ca.opacity=Ea(Ia);return Ca+""}}var xa=c(sa);qa.gamma=ya;return qa}(1),J=d(e),O=d(a),Q=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,U=new RegExp(Q.source,"g"),P=180/Math.PI,V={translateX:0,translateY:0,rotate:0,
skewX:0,scaleX:1,scaleY:1},Y,ba,ea,ca,ia=G(function(sa){if("none"===sa)return V;Y||(Y=document.createElement("DIV"),ba=document.documentElement,ea=document.defaultView);Y.style.transform=sa;sa=ea.getComputedStyle(ba.appendChild(Y),null).getPropertyValue("transform");ba.removeChild(Y);sa=sa.slice(7,-1).split(",");return t(+sa[0],+sa[1],+sa[2],+sa[3],+sa[4],+sa[5])},"px, ","px)","deg)"),fa=G(function(sa){if(null==sa)return V;ca||(ca=document.createElementNS("http://www.w3.org/2000/svg","g"));ca.setAttribute("transform",
sa);if(!(sa=ca.transform.baseVal.consolidate()))return V;sa=sa.matrix;return t(sa.a,sa.b,sa.c,sa.d,sa.e,sa.f)},", ",")",")"),ha=Math.SQRT2,na=L(n),pa=L(f),ra=M(n),ta=M(f),oa=N(n),ua=N(f);m.interpolate=B;m.interpolateArray=function(sa,ya){return(r(ya)?q:u)(sa,ya)};m.interpolateBasis=e;m.interpolateBasisClosed=a;m.interpolateCubehelix=oa;m.interpolateCubehelixLong=ua;m.interpolateDate=v;m.interpolateDiscrete=function(sa){var ya=sa.length;return function(qa){return sa[Math.max(0,Math.min(ya-1,Math.floor(qa*
ya)))]}};m.interpolateHcl=ra;m.interpolateHclLong=ta;m.interpolateHsl=na;m.interpolateHslLong=pa;m.interpolateHue=function(sa,ya){var qa=n(+sa,+ya);return function(xa){xa=qa(xa);return xa-360*Math.floor(xa/360)}};m.interpolateLab=function(sa,ya){var qa=f((sa=h.lab(sa)).l,(ya=h.lab(ya)).l),xa=f(sa.a,ya.a),Ca=f(sa.b,ya.b),Ja=f(sa.opacity,ya.opacity);return function(eb){sa.l=qa(eb);sa.a=xa(eb);sa.b=Ca(eb);sa.opacity=Ja(eb);return sa+""}};m.interpolateNumber=w;m.interpolateNumberArray=q;m.interpolateObject=
y;m.interpolateRgb=H;m.interpolateRgbBasis=J;m.interpolateRgbBasisClosed=O;m.interpolateRound=function(sa,ya){return sa=+sa,ya=+ya,function(qa){return Math.round(sa*(1-qa)+ya*qa)}};m.interpolateString=E;m.interpolateTransformCss=ia;m.interpolateTransformSvg=fa;m.interpolateZoom=function(sa,ya){var qa=sa[0],xa=sa[1],Ca=sa[2];sa=ya[2];var Ja=ya[0]-qa,eb=ya[1]-xa,Ra=Ja*Ja+eb*eb;if(1E-12>Ra){var Wa=Math.log(sa/Ca)/ha;sa=function(Qa){return[qa+Qa*Ja,xa+Qa*eb,Ca*Math.exp(ha*Qa*Wa)]}}else{var Ea=Math.sqrt(Ra);
ya=(sa*sa-Ca*Ca+4*Ra)/(4*Ca*Ea);sa=(sa*sa-Ca*Ca-4*Ra)/(4*sa*Ea);var Ia=Math.log(Math.sqrt(ya*ya+1)-ya);Wa=(Math.log(Math.sqrt(sa*sa+1)-sa)-Ia)/ha;sa=function(Qa){Qa*=Wa;var lb=I(Ia),hb=ha*Qa+Ia;var Fa=((hb=Math.exp(2*hb))-1)/(hb+1);var La=Ia;hb=((La=Math.exp(La))-1/La)/2;Fa=Ca/(2*Ea)*(lb*Fa-hb);return[qa+Fa*Ja,xa+Fa*eb,Ca*lb/I(ha*Qa+Ia)]}}sa.duration=1E3*Wa;return sa};m.piecewise=function(sa,ya){for(var qa=0,xa=ya.length-1,Ca=ya[0],Ja=Array(0>xa?0:xa);qa<xa;)Ja[qa]=sa(Ca,Ca=ya[++qa]);return function(eb){var Ra=
Math.max(0,Math.min(xa-1,Math.floor(eb*=xa)));return Ja[Ra](eb-Ra)}};m.quantize=function(sa,ya){for(var qa=Array(ya),xa=0;xa<ya;++xa)qa[xa]=sa(xa/(ya-1));return qa};Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-color":158}],163:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C):(m=m||self,h(m.d3=m.d3||{}))})(this,function(m){function h(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function l(){return new h}var e=Math.PI,a=2*e,g=a-1E-6;h.prototype=l.prototype=
{constructor:h,moveTo:function(k,p){this._+="M"+(this._x0=this._x1=+k)+","+(this._y0=this._y1=+p)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(k,p){this._+="L"+(this._x1=+k)+","+(this._y1=+p)},quadraticCurveTo:function(k,p,n,c){this._+="Q"+ +k+","+ +p+","+(this._x1=+n)+","+(this._y1=+c)},bezierCurveTo:function(k,p,n,c,f,d){this._+="C"+ +k+","+ +p+","+ +n+","+ +c+","+(this._x1=+f)+","+(this._y1=+d)},arcTo:function(k,p,n,c,f){k=+k;p=+p;n=
+n;c=+c;f=+f;var d=this._x1,q=this._y1,r=n-k,u=c-p,v=d-k,w=q-p,y=v*v+w*w;if(0>f)throw Error("negative radius: "+f);if(null===this._x1)this._+="M"+(this._x1=k)+","+(this._y1=p);else if(1E-6<y)if(1E-6<Math.abs(w*r-u*v)&&f){n-=d;c-=q;var D=r*r+u*u;q=Math.sqrt(D);d=Math.sqrt(y);y=f*Math.tan((e-Math.acos((D+y-(n*n+c*c))/(2*q*d)))/2);d=y/d;y/=q;1E-6<Math.abs(d-1)&&(this._+="L"+(k+d*v)+","+(p+d*w));this._+="A"+f+","+f+",0,0,"+ +(w*n>v*c)+","+(this._x1=k+y*r)+","+(this._y1=p+y*u)}else this._+="L"+(this._x1=
k)+","+(this._y1=p)},arc:function(k,p,n,c,f,d){k=+k;p=+p;n=+n;d=!!d;var q=n*Math.cos(c),r=n*Math.sin(c),u=k+q,v=p+r,w=1^d;c=d?c-f:f-c;if(0>n)throw Error("negative radius: "+n);if(null===this._x1)this._+="M"+u+","+v;else if(1E-6<Math.abs(this._x1-u)||1E-6<Math.abs(this._y1-v))this._+="L"+u+","+v;n&&(0>c&&(c=c%a+a),c>g?this._+="A"+n+","+n+",0,1,"+w+","+(k-q)+","+(p-r)+"A"+n+","+n+",0,1,"+w+","+(this._x1=u)+","+(this._y1=v):1E-6<c&&(this._+="A"+n+","+n+",0,"+ +(c>=e)+","+w+","+(this._x1=k+n*Math.cos(f))+
","+(this._y1=p+n*Math.sin(f))))},rect:function(k,p,n,c){this._+="M"+(this._x0=this._x1=+k)+","+(this._y0=this._y1=+p)+"h"+ +n+"v"+ +c+"h"+-n+"Z"},toString:function(){return this._}};m.path=l;Object.defineProperty(m,"__esModule",{value:!0})})},{}],164:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C):(m=m||self,h(m.d3=m.d3||{}))})(this,function(m){function h(c,f,d,q){if(isNaN(f)||isNaN(d))return c;var r,u=c._root;q={data:q};var v=c._x0,w=c._y0,y=c._x1,D=c._y1,x,E,B,
t;if(!u)return c._root=q,c;for(;u.length;)if((B=f>=(x=(v+y)/2))?v=x:y=x,(t=d>=(E=(w+D)/2))?w=E:D=E,r=u,!(u=u[B|=t<<1]))return r[B]=q,c;var G=+c._x.call(null,u.data);var I=+c._y.call(null,u.data);if(f===G&&d===I)return q.next=u,r?r[B]=q:c._root=q,c;do r=r?r[B]=Array(4):c._root=Array(4),(B=f>=(x=(v+y)/2))?v=x:y=x,(t=d>=(E=(w+D)/2))?w=E:D=E;while((B|=t<<1)===(t=(I>=E)<<1|G>=x));return r[t]=u,r[B]=q,c}function l(c,f,d,q,r){this.node=c;this.x0=f;this.y0=d;this.x1=q;this.y1=r}function e(c){return c[0]}
function a(c){return c[1]}function g(c,f,d){f=new k(null==f?e:f,null==d?a:d,NaN,NaN,NaN,NaN);return null==c?f:f.addAll(c)}function k(c,f,d,q,r,u){this._x=c;this._y=f;this._x0=d;this._y0=q;this._x1=r;this._y1=u;this._root=void 0}function p(c){for(var f={data:c.data},d=f;c=c.next;)d=d.next={data:c.data};return f}var n=g.prototype=k.prototype;n.copy=function(){var c=new k(this._x,this._y,this._x0,this._y0,this._x1,this._y1),f=this._root,d,q;if(!f)return c;if(!f.length)return c._root=p(f),c;for(d=[{source:f,
target:c._root=Array(4)}];f=d.pop();)for(var r=0;4>r;++r)if(q=f.source[r])q.length?d.push({source:q,target:f.target[r]=Array(4)}):f.target[r]=p(q);return c};n.add=function(c){var f=+this._x.call(null,c),d=+this._y.call(null,c);return h(this.cover(f,d),f,d,c)};n.addAll=function(c){var f,d,q=c.length,r,u,v=Array(q),w=Array(q),y=Infinity,D=Infinity,x=-Infinity,E=-Infinity;for(d=0;d<q;++d)isNaN(r=+this._x.call(null,f=c[d]))||isNaN(u=+this._y.call(null,f))||(v[d]=r,w[d]=u,r<y&&(y=r),r>x&&(x=r),u<D&&(D=
u),u>E&&(E=u));if(y>x||D>E)return this;this.cover(y,D).cover(x,E);for(d=0;d<q;++d)h(this,v[d],w[d],c[d]);return this};n.cover=function(c,f){if(isNaN(c=+c)||isNaN(f=+f))return this;var d=this._x0,q=this._y0,r=this._x1,u=this._y1;if(isNaN(d))r=(d=Math.floor(c))+1,u=(q=Math.floor(f))+1;else{for(var v=r-d,w=this._root,y,D;d>c||c>=r||q>f||f>=u;)switch(D=(f<q)<<1|c<d,y=Array(4),y[D]=w,w=y,v*=2,D){case 0:r=d+v;u=q+v;break;case 1:d=r-v;u=q+v;break;case 2:r=d+v;q=u-v;break;case 3:d=r-v,q=u-v}this._root&&this._root.length&&
(this._root=w)}this._x0=d;this._y0=q;this._x1=r;this._y1=u;return this};n.data=function(){var c=[];this.visit(function(f){if(!f.length){do c.push(f.data);while(f=f.next)}});return c};n.extent=function(c){return arguments.length?this.cover(+c[0][0],+c[0][1]).cover(+c[1][0],+c[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};n.find=function(c,f,d){var q=this._x0,r=this._y0,u,v,w,y,D=this._x1,x=this._y1,E=[],B=this._root,t;B&&E.push(new l(B,q,r,D,x));null==d?d=Infinity:(q=c-d,
r=f-d,D=c+d,x=f+d,d*=d);for(;t=E.pop();)if(!(!(B=t.node)||(u=t.x0)>D||(v=t.y0)>x||(w=t.x1)<q||(y=t.y1)<r))if(B.length){t=(u+w)/2;var G=(v+y)/2;E.push(new l(B[3],t,G,w,y),new l(B[2],u,G,t,y),new l(B[1],t,v,w,G),new l(B[0],u,v,t,G));if(B=(f>=G)<<1|c>=t)t=E[E.length-1],E[E.length-1]=E[E.length-1-B],E[E.length-1-B]=t}else if(t=c-+this._x.call(null,B.data),G=f-+this._y.call(null,B.data),t=t*t+G*G,t<d){var I=Math.sqrt(d=t);q=c-I;r=f-I;D=c+I;x=f+I;I=B.data}return I};n.remove=function(c){if(isNaN(y=+this._x.call(null,
c))||isNaN(D=+this._y.call(null,c)))return this;var f,d=this._root,q,r=this._x0,u=this._y0,v=this._x1,w=this._y1,y,D,x,E,B,t;if(!d)return this;if(d.length)for(;;){(B=y>=(x=(r+v)/2))?r=x:v=x;(t=D>=(E=(u+w)/2))?u=E:w=E;if(!(f=d,d=d[B|=t<<1]))return this;if(!d.length)break;if(f[B+1&3]||f[B+2&3]||f[B+3&3]){var G=f;var I=B}}for(;d.data!==c;)if(!(q=d,d=d.next))return this;(c=d.next)&&delete d.next;if(q)return c?q.next=c:delete q.next,this;if(!f)return this._root=c,this;c?f[B]=c:delete f[B];(d=f[0]||f[1]||
f[2]||f[3])&&d===(f[3]||f[2]||f[1]||f[0])&&!d.length&&(G?G[I]=d:this._root=d);return this};n.removeAll=function(c){for(var f=0,d=c.length;f<d;++f)this.remove(c[f]);return this};n.root=function(){return this._root};n.size=function(){var c=0;this.visit(function(f){if(!f.length){do++c;while(f=f.next)}});return c};n.visit=function(c){var f=[],d,q=this._root,r,u,v,w;for(q&&f.push(new l(q,this._x0,this._y0,this._x1,this._y1));d=f.pop();)if(!c(q=d.node,u=d.x0,v=d.y0,w=d.x1,d=d.y1)&&q.length){var y=(u+w)/
2,D=(v+d)/2;(r=q[3])&&f.push(new l(r,y,D,w,d));(r=q[2])&&f.push(new l(r,u,D,y,d));(r=q[1])&&f.push(new l(r,y,v,w,D));(r=q[0])&&f.push(new l(r,u,v,y,D))}return this};n.visitAfter=function(c){var f=[],d=[],q;for(this._root&&f.push(new l(this._root,this._x0,this._y0,this._x1,this._y1));q=f.pop();){var r=q.node;if(r.length){var u,v=q.x0,w=q.y0,y=q.x1,D=q.y1,x=(v+y)/2,E=(w+D)/2;(u=r[0])&&f.push(new l(u,v,w,x,E));(u=r[1])&&f.push(new l(u,x,w,y,E));(u=r[2])&&f.push(new l(u,v,E,x,D));(u=r[3])&&f.push(new l(u,
x,E,y,D))}d.push(q)}for(;q=d.pop();)c(q.node,q.x0,q.y0,q.x1,q.y1);return this};n.x=function(c){return arguments.length?(this._x=c,this):this._x};n.y=function(c){return arguments.length?(this._y=c,this):this._y};m.quadtree=g;Object.defineProperty(m,"__esModule",{value:!0})})},{}],165:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C,b("d3-path")):(m=m||self,h(m.d3=m.d3||{},m.d3))})(this,function(m,h){function l(sb){return function(){return sb}}function e(sb){return 1<=
sb?Ta:-1>=sb?-Ta:Math.asin(sb)}function a(sb){return sb.innerRadius}function g(sb){return sb.outerRadius}function k(sb){return sb.startAngle}function p(sb){return sb.endAngle}function n(sb){return sb&&sb.padAngle}function c(sb,xb,kc,nc,Kc,ac,Tb){var yb=sb-kc,Gb=xb-nc;Tb=(Tb?ac:-ac)/bb(yb*yb+Gb*Gb);Gb*=Tb;yb*=-Tb;var Eb=sb+Gb,Vb=xb+yb,Zb=kc+Gb,Dc=nc+yb;kc=(Eb+Zb)/2;nc=(Vb+Dc)/2;xb=Zb-Eb;sb=Dc-Vb;Tb=xb*xb+sb*sb;ac=Kc-ac;Dc=Eb*Dc-Zb*Vb;var ic=(0>sb?-1:1)*bb(La(0,ac*ac*Tb-Dc*Dc));Eb=(Dc*sb-xb*ic)/Tb;
Vb=(-Dc*xb-sb*ic)/Tb;Zb=(Dc*sb+xb*ic)/Tb;xb=(-Dc*xb+sb*ic)/Tb;sb=Eb-kc;Tb=Vb-nc;kc=Zb-kc;nc=xb-nc;sb*sb+Tb*Tb>kc*kc+nc*nc&&(Eb=Zb,Vb=xb);return{cx:Eb,cy:Vb,x01:-Gb,y01:-yb,x11:Eb*(Kc/ac-1),y11:Vb*(Kc/ac-1)}}function f(sb){this._context=sb}function d(sb){return new f(sb)}function q(sb){return sb[0]}function r(sb){return sb[1]}function u(){function sb(yb){var Gb,Eb=yb.length,Vb,Zb=!1,Dc;null==Kc&&(Tb=ac(Dc=h.path()));for(Gb=0;Gb<=Eb;++Gb)!(Gb<Eb&&nc(Vb=yb[Gb],Gb,yb))===Zb&&((Zb=!Zb)?Tb.lineStart():
Tb.lineEnd()),Zb&&Tb.point(+xb(Vb,Gb,yb),+kc(Vb,Gb,yb));if(Dc)return Tb=null,Dc+""||null}var xb=q,kc=r,nc=l(!0),Kc=null,ac=d,Tb=null;sb.x=function(yb){return arguments.length?(xb="function"===typeof yb?yb:l(+yb),sb):xb};sb.y=function(yb){return arguments.length?(kc="function"===typeof yb?yb:l(+yb),sb):kc};sb.defined=function(yb){return arguments.length?(nc="function"===typeof yb?yb:l(!!yb),sb):nc};sb.curve=function(yb){return arguments.length?(ac=yb,null!=Kc&&(Tb=ac(Kc)),sb):ac};sb.context=function(yb){return arguments.length?
(null==yb?Kc=Tb=null:Tb=ac(Kc=yb),sb):Kc};return sb}function v(){function sb(Vb){var Zb,Dc,ic=Vb.length,Bc,Sc=!1,Ic,$c=Array(ic),nd=Array(ic);null==yb&&(Eb=Gb(Ic=h.path()));for(Zb=0;Zb<=ic;++Zb){if(!(Zb<ic&&Tb(Bc=Vb[Zb],Zb,Vb))===Sc)if(Sc=!Sc){var Yc=Zb;Eb.areaStart();Eb.lineStart()}else{Eb.lineEnd();Eb.lineStart();for(Dc=Zb-1;Dc>=Yc;--Dc)Eb.point($c[Dc],nd[Dc]);Eb.lineEnd();Eb.areaEnd()}Sc&&($c[Zb]=+kc(Bc,Zb,Vb),nd[Zb]=+Kc(Bc,Zb,Vb),Eb.point(nc?+nc(Bc,Zb,Vb):$c[Zb],ac?+ac(Bc,Zb,Vb):nd[Zb]))}if(Ic)return Eb=
null,Ic+""||null}function xb(){return u().defined(Tb).curve(Gb).context(yb)}var kc=q,nc=null,Kc=l(0),ac=r,Tb=l(!0),yb=null,Gb=d,Eb=null;sb.x=function(Vb){return arguments.length?(kc="function"===typeof Vb?Vb:l(+Vb),nc=null,sb):kc};sb.x0=function(Vb){return arguments.length?(kc="function"===typeof Vb?Vb:l(+Vb),sb):kc};sb.x1=function(Vb){return arguments.length?(nc=null==Vb?null:"function"===typeof Vb?Vb:l(+Vb),sb):nc};sb.y=function(Vb){return arguments.length?(Kc="function"===typeof Vb?Vb:l(+Vb),ac=
null,sb):Kc};sb.y0=function(Vb){return arguments.length?(Kc="function"===typeof Vb?Vb:l(+Vb),sb):Kc};sb.y1=function(Vb){return arguments.length?(ac=null==Vb?null:"function"===typeof Vb?Vb:l(+Vb),sb):ac};sb.lineX0=sb.lineY0=function(){return xb().x(kc).y(Kc)};sb.lineY1=function(){return xb().x(kc).y(ac)};sb.lineX1=function(){return xb().x(nc).y(Kc)};sb.defined=function(Vb){return arguments.length?(Tb="function"===typeof Vb?Vb:l(!!Vb),sb):Tb};sb.curve=function(Vb){return arguments.length?(Gb=Vb,null!=
yb&&(Eb=Gb(yb)),sb):Gb};sb.context=function(Vb){return arguments.length?(null==Vb?yb=Eb=null:Eb=Gb(yb=Vb),sb):yb};return sb}function w(sb,xb){return xb<sb?-1:xb>sb?1:xb>=sb?0:NaN}function y(sb){return sb}function D(sb){this._curve=sb}function x(sb){function xb(kc){return new D(sb(kc))}xb._curve=sb;return xb}function E(sb){var xb=sb.curve;sb.angle=sb.x;delete sb.x;sb.radius=sb.y;delete sb.y;sb.curve=function(kc){return arguments.length?xb(x(kc)):xb()._curve};return sb}function B(){return E(u().curve(nb))}
function t(){var sb=v().curve(nb),xb=sb.curve,kc=sb.lineX0,nc=sb.lineX1,Kc=sb.lineY0,ac=sb.lineY1;sb.angle=sb.x;delete sb.x;sb.startAngle=sb.x0;delete sb.x0;sb.endAngle=sb.x1;delete sb.x1;sb.radius=sb.y;delete sb.y;sb.innerRadius=sb.y0;delete sb.y0;sb.outerRadius=sb.y1;delete sb.y1;sb.lineStartAngle=function(){return E(kc())};delete sb.lineX0;sb.lineEndAngle=function(){return E(nc())};delete sb.lineX1;sb.lineInnerRadius=function(){return E(Kc())};delete sb.lineY0;sb.lineOuterRadius=function(){return E(ac())};
delete sb.lineY1;sb.curve=function(Tb){return arguments.length?xb(x(Tb)):xb()._curve};return sb}function G(sb,xb){return[(xb=+xb)*Math.cos(sb-=Math.PI/2),xb*Math.sin(sb)]}function I(sb){return sb.source}function L(sb){return sb.target}function M(sb){function xb(){var yb,Gb=Da.call(arguments),Eb=kc.apply(this,Gb),Vb=nc.apply(this,Gb);Tb||(Tb=yb=h.path());sb(Tb,+Kc.apply(this,(Gb[0]=Eb,Gb)),+ac.apply(this,Gb),+Kc.apply(this,(Gb[0]=Vb,Gb)),+ac.apply(this,Gb));if(yb)return Tb=null,yb+""||null}var kc=
I,nc=L,Kc=q,ac=r,Tb=null;xb.source=function(yb){return arguments.length?(kc=yb,xb):kc};xb.target=function(yb){return arguments.length?(nc=yb,xb):nc};xb.x=function(yb){return arguments.length?(Kc="function"===typeof yb?yb:l(+yb),xb):Kc};xb.y=function(yb){return arguments.length?(ac="function"===typeof yb?yb:l(+yb),xb):ac};xb.context=function(yb){return arguments.length?(Tb=null==yb?null:yb,xb):Tb};return xb}function N(sb,xb,kc,nc,Kc){sb.moveTo(xb,kc);sb.bezierCurveTo(xb=(xb+nc)/2,kc,xb,Kc,nc,Kc)}function H(sb,
xb,kc,nc,Kc){sb.moveTo(xb,kc);sb.bezierCurveTo(xb,kc=(kc+Kc)/2,nc,kc,nc,Kc)}function J(sb,xb,kc,nc,Kc){var ac=G(xb,kc);xb=G(xb,kc=(kc+Kc)/2);kc=G(nc,kc);nc=G(nc,Kc);sb.moveTo(ac[0],ac[1]);sb.bezierCurveTo(xb[0],xb[1],kc[0],kc[1],nc[0],nc[1])}function O(){}function Q(sb,xb,kc){sb._context.bezierCurveTo((2*sb._x0+sb._x1)/3,(2*sb._y0+sb._y1)/3,(sb._x0+2*sb._x1)/3,(sb._y0+2*sb._y1)/3,(sb._x0+4*sb._x1+xb)/6,(sb._y0+4*sb._y1+kc)/6)}function U(sb){this._context=sb}function P(sb){this._context=sb}function V(sb){this._context=
sb}function Y(sb,xb){this._basis=new U(sb);this._beta=xb}function ba(sb,xb,kc){sb._context.bezierCurveTo(sb._x1+sb._k*(sb._x2-sb._x0),sb._y1+sb._k*(sb._y2-sb._y0),sb._x2+sb._k*(sb._x1-xb),sb._y2+sb._k*(sb._y1-kc),sb._x2,sb._y2)}function ea(sb,xb){this._context=sb;this._k=(1-xb)/6}function ca(sb,xb){this._context=sb;this._k=(1-xb)/6}function ia(sb,xb){this._context=sb;this._k=(1-xb)/6}function fa(sb,xb,kc){var nc=sb._x1,Kc=sb._y1,ac=sb._x2,Tb=sb._y2;if(1E-12<sb._l01_a){var yb=2*sb._l01_2a+3*sb._l01_a*
sb._l12_a+sb._l12_2a,Gb=3*sb._l01_a*(sb._l01_a+sb._l12_a);nc=(nc*yb-sb._x0*sb._l12_2a+sb._x2*sb._l01_2a)/Gb;Kc=(Kc*yb-sb._y0*sb._l12_2a+sb._y2*sb._l01_2a)/Gb}1E-12<sb._l23_a&&(yb=2*sb._l23_2a+3*sb._l23_a*sb._l12_a+sb._l12_2a,Gb=3*sb._l23_a*(sb._l23_a+sb._l12_a),ac=(ac*yb+sb._x1*sb._l23_2a-xb*sb._l12_2a)/Gb,Tb=(Tb*yb+sb._y1*sb._l23_2a-kc*sb._l12_2a)/Gb);sb._context.bezierCurveTo(nc,Kc,ac,Tb,sb._x2,sb._y2)}function ha(sb,xb){this._context=sb;this._alpha=xb}function na(sb,xb){this._context=sb;this._alpha=
xb}function pa(sb,xb){this._context=sb;this._alpha=xb}function ra(sb){this._context=sb}function ta(sb,xb,kc){var nc=sb._x1-sb._x0;xb-=sb._x1;var Kc=(sb._y1-sb._y0)/(nc||0>xb&&-0);sb=(kc-sb._y1)/(xb||0>nc&&-0);return((0>Kc?-1:1)+(0>sb?-1:1))*Math.min(Math.abs(Kc),Math.abs(sb),.5*Math.abs((Kc*xb+sb*nc)/(nc+xb)))||0}function oa(sb,xb){var kc=sb._x1-sb._x0;return kc?(3*(sb._y1-sb._y0)/kc-xb)/2:xb}function ua(sb,xb,kc){var nc=sb._x0,Kc=sb._x1,ac=sb._y1,Tb=(Kc-nc)/3;sb._context.bezierCurveTo(nc+Tb,sb._y0+
Tb*xb,Kc-Tb,ac-Tb*kc,Kc,ac)}function ka(sb){this._context=sb}function sa(sb){this._context=new ya(sb)}function ya(sb){this._context=sb}function qa(sb){this._context=sb}function xa(sb){var xb,kc=sb.length-1,nc=Array(kc),Kc=Array(kc),ac=Array(kc);nc[0]=0;Kc[0]=2;ac[0]=sb[0]+2*sb[1];for(xb=1;xb<kc-1;++xb)nc[xb]=1,Kc[xb]=4,ac[xb]=4*sb[xb]+2*sb[xb+1];nc[kc-1]=2;Kc[kc-1]=7;ac[kc-1]=8*sb[kc-1]+sb[kc];for(xb=1;xb<kc;++xb){var Tb=nc[xb]/Kc[xb-1];Kc[xb]-=Tb;ac[xb]-=Tb*ac[xb-1]}nc[kc-1]=ac[kc-1]/Kc[kc-1];for(xb=
kc-2;0<=xb;--xb)nc[xb]=(ac[xb]-nc[xb+1])/Kc[xb];Kc[kc-1]=(sb[kc]+nc[kc-1])/2;for(xb=0;xb<kc-1;++xb)Kc[xb]=2*sb[xb+1]-nc[xb+1];return[nc,Kc]}function Ca(sb,xb){this._context=sb;this._t=xb}function Ja(sb,xb){if(1<(Tb=sb.length))for(var kc=1,nc,Kc,ac=sb[xb[0]],Tb,yb=ac.length;kc<Tb;++kc)for(Kc=ac,ac=sb[xb[kc]],nc=0;nc<yb;++nc)ac[nc][1]+=ac[nc][0]=isNaN(Kc[nc][1])?Kc[nc][0]:Kc[nc][1]}function eb(sb){sb=sb.length;for(var xb=Array(sb);0<=--sb;)xb[sb]=sb;return xb}function Ra(sb,xb){return sb[xb]}function Wa(sb){var xb=
sb.map(Ea);return eb(sb).sort(function(kc,nc){return xb[kc]-xb[nc]})}function Ea(sb){for(var xb=-1,kc=0,nc=sb.length,Kc,ac=-Infinity;++xb<nc;)(Kc=+sb[xb][1])>ac&&(ac=Kc,kc=xb);return kc}function Ia(sb){var xb=sb.map(Qa);return eb(sb).sort(function(kc,nc){return xb[kc]-xb[nc]})}function Qa(sb){for(var xb=0,kc=-1,nc=sb.length,Kc;++kc<nc;)if(Kc=+sb[kc][1])xb+=Kc;return xb}var lb=Math.abs,hb=Math.atan2,Fa=Math.cos,La=Math.max,Oa=Math.min,fb=Math.sin,bb=Math.sqrt,Pa=Math.PI,Ta=Pa/2,Ya=2*Pa;f.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(sb,xb){sb=+sb;xb=+xb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(sb,xb):this._context.moveTo(sb,xb);break;case 1:this._point=2;default:this._context.lineTo(sb,xb)}}};var nb=x(d);D.prototype={areaStart:function(){this._curve.areaStart()},
areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(sb,xb){this._curve.point(xb*Math.sin(sb),xb*-Math.cos(sb))}};var Da=Array.prototype.slice,Ha={draw:function(sb,xb){xb=Math.sqrt(xb/Pa);sb.moveTo(xb,0);sb.arc(0,0,xb,0,Ya)}},ab={draw:function(sb,xb){xb=Math.sqrt(xb/5)/2;sb.moveTo(-3*xb,-xb);sb.lineTo(-xb,-xb);sb.lineTo(-xb,-3*xb);sb.lineTo(xb,-3*xb);sb.lineTo(xb,-xb);sb.lineTo(3*xb,-xb);sb.lineTo(3*xb,xb);
sb.lineTo(xb,xb);sb.lineTo(xb,3*xb);sb.lineTo(-xb,3*xb);sb.lineTo(-xb,xb);sb.lineTo(-3*xb,xb);sb.closePath()}},ib=Math.sqrt(1/3),ob=2*ib,db={draw:function(sb,xb){xb=Math.sqrt(xb/ob);var kc=xb*ib;sb.moveTo(0,-xb);sb.lineTo(kc,0);sb.lineTo(0,xb);sb.lineTo(-kc,0);sb.closePath()}},gb=Math.sin(Pa/10)/Math.sin(7*Pa/10),rb=Math.sin(Ya/10)*gb,Bb=-Math.cos(Ya/10)*gb;gb={draw:function(sb,xb){xb=Math.sqrt(.8908130915292852*xb);var kc=rb*xb,nc=Bb*xb;sb.moveTo(0,-xb);sb.lineTo(kc,nc);for(var Kc=1;5>Kc;++Kc){var ac=
Ya*Kc/5,Tb=Math.cos(ac);ac=Math.sin(ac);sb.lineTo(ac*xb,-Tb*xb);sb.lineTo(Tb*kc-ac*nc,ac*kc+Tb*nc)}sb.closePath()}};var Qb={draw:function(sb,xb){xb=Math.sqrt(xb);var kc=-xb/2;sb.rect(kc,kc,xb,xb)}},gc=Math.sqrt(3),tc={draw:function(sb,xb){xb=-Math.sqrt(xb/(3*gc));sb.moveTo(0,2*xb);sb.lineTo(-gc*xb,-xb);sb.lineTo(gc*xb,-xb);sb.closePath()}},Ac=Math.sqrt(3)/2,Uc=1/Math.sqrt(12),Nc=3*(Uc/2+1),gd={draw:function(sb,xb){var kc=Math.sqrt(xb/Nc);xb=kc/2;var nc=kc*Uc;kc=kc*Uc+kc;var Kc=-xb;sb.moveTo(xb,nc);
sb.lineTo(xb,kc);sb.lineTo(Kc,kc);sb.lineTo(-.5*xb-Ac*nc,Ac*xb+-.5*nc);sb.lineTo(-.5*xb-Ac*kc,Ac*xb+-.5*kc);sb.lineTo(-.5*Kc-Ac*kc,Ac*Kc+-.5*kc);sb.lineTo(-.5*xb+Ac*nc,-.5*nc-Ac*xb);sb.lineTo(-.5*xb+Ac*kc,-.5*kc-Ac*xb);sb.lineTo(-.5*Kc+Ac*kc,-.5*kc-Ac*Kc);sb.closePath()}},Xc=[Ha,ab,db,Qb,gb,tc,gd];U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:Q(this,
this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(sb,xb){sb=+sb;xb=+xb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(sb,xb):this._context.moveTo(sb,xb);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Q(this,sb,xb)}this._x0=this._x1;this._x1=sb;this._y0=this._y1;
this._y1=xb}};P.prototype={areaStart:O,areaEnd:O,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,
this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(sb,xb){sb=+sb;xb=+xb;switch(this._point){case 0:this._point=1;this._x2=sb;this._y2=xb;break;case 1:this._point=2;this._x3=sb;this._y3=xb;break;case 2:this._point=3;this._x4=sb;this._y4=xb;this._context.moveTo((this._x0+4*this._x1+sb)/6,(this._y0+4*this._y1+xb)/6);break;default:Q(this,sb,xb)}this._x0=this._x1;this._x1=sb;this._y0=this._y1;this._y1=xb}};V.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=
NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(sb,xb){sb=+sb;xb=+xb;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var kc=(this._x0+4*this._x1+sb)/6,nc=(this._y0+4*this._y1+xb)/6;this._line?this._context.lineTo(kc,nc):this._context.moveTo(kc,nc);break;case 3:this._point=4;default:Q(this,
sb,xb)}this._x0=this._x1;this._x1=sb;this._y0=this._y1;this._y1=xb}};Y.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var sb=this._x,xb=this._y,kc=sb.length-1;if(0<kc)for(var nc=sb[0],Kc=xb[0],ac=sb[kc]-nc,Tb=xb[kc]-Kc,yb=-1,Gb;++yb<=kc;)Gb=yb/kc,this._basis.point(this._beta*sb[yb]+(1-this._beta)*(nc+Gb*ac),this._beta*xb[yb]+(1-this._beta)*(Kc+Gb*Tb));this._x=this._y=null;this._basis.lineEnd()},point:function(sb,xb){this._x.push(+sb);this._y.push(+xb)}};
var ed=function kc(xb){function nc(Kc){return 1===xb?new U(Kc):new Y(Kc,xb)}nc.beta=function(Kc){return kc(+Kc)};return nc}(.85);ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ba(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();
this._line=1-this._line},point:function(xb,kc){xb=+xb;kc=+kc;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(xb,kc):this._context.moveTo(xb,kc);break;case 1:this._point=2;this._x1=xb;this._y1=kc;break;case 2:this._point=3;default:ba(this,xb,kc)}this._x0=this._x1;this._x1=this._x2;this._x2=xb;this._y0=this._y1;this._y1=this._y2;this._y2=kc}};var tb=function nc(kc){function Kc(ac){return new ea(ac,kc)}Kc.tension=function(ac){return nc(+ac)};return Kc}(0);ca.prototype={areaStart:O,
areaEnd:O,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(kc,nc){kc=+kc;nc=+nc;switch(this._point){case 0:this._point=
1;this._x3=kc;this._y3=nc;break;case 1:this._point=2;this._context.moveTo(this._x4=kc,this._y4=nc);break;case 2:this._point=3;this._x5=kc;this._y5=nc;break;default:ba(this,kc,nc)}this._x0=this._x1;this._x1=this._x2;this._x2=kc;this._y0=this._y1;this._y1=this._y2;this._y2=nc}};var Xb=function Kc(nc){function ac(Tb){return new ca(Tb,nc)}ac.tension=function(Tb){return Kc(+Tb)};return ac}(0);ia.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(nc,Kc){nc=+nc;Kc=+Kc;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ba(this,nc,Kc)}this._x0=this._x1;this._x1=this._x2;this._x2=nc;
this._y0=this._y1;this._y1=this._y2;this._y2=Kc}};var uc=function ac(Kc){function Tb(yb){return new ia(yb,Kc)}Tb.tension=function(yb){return ac(+yb)};return Tb}(0);ha.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);
break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Kc,ac){Kc=+Kc;ac=+ac;if(this._point){var Tb=this._x2-Kc,yb=this._y2-ac;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Tb*Tb+yb*yb,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Kc,ac):this._context.moveTo(Kc,ac);break;case 1:this._point=2;break;case 2:this._point=3;default:fa(this,Kc,ac)}this._l01_a=this._l12_a;
this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Kc;this._y0=this._y1;this._y1=this._y2;this._y2=ac}};var Mc=function Tb(ac){function yb(Gb){return ac?new ha(Gb,ac):new ea(Gb,0)}yb.alpha=function(Gb){return Tb(+Gb)};return yb}(.5);na.prototype={areaStart:O,areaEnd:O,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=
this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(ac,Tb){ac=+ac;Tb=+Tb;if(this._point){var yb=this._x2-ac,Gb=this._y2-Tb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(yb*yb+Gb*Gb,this._alpha))}switch(this._point){case 0:this._point=
1;this._x3=ac;this._y3=Tb;break;case 1:this._point=2;this._context.moveTo(this._x4=ac,this._y4=Tb);break;case 2:this._point=3;this._x5=ac;this._y5=Tb;break;default:fa(this,ac,Tb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=ac;this._y0=this._y1;this._y1=this._y2;this._y2=Tb}};var Rc=function yb(Tb){function Gb(Eb){return Tb?new na(Eb,Tb):new ca(Eb,0)}Gb.alpha=function(Eb){return yb(+Eb)};return Gb}(.5);
pa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Tb,yb){Tb=+Tb;yb=+yb;if(this._point){var Gb=this._x2-Tb,Eb=this._y2-yb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Gb*
Gb+Eb*Eb,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fa(this,Tb,yb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Tb;this._y0=this._y1;this._y1=this._y2;this._y2=yb}};var fd=function Gb(yb){function Eb(Vb){return yb?
new pa(Vb,yb):new ia(Vb,0)}Eb.alpha=function(Vb){return Gb(+Vb)};return Eb}(.5);ra.prototype={areaStart:O,areaEnd:O,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(yb,Gb){yb=+yb;Gb=+Gb;this._point?this._context.lineTo(yb,Gb):(this._point=1,this._context.moveTo(yb,Gb))}};ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},
lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ua(this,this._t0,oa(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(yb,Gb){var Eb=NaN;yb=+yb;Gb=+Gb;if(yb!==this._x1||Gb!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(yb,Gb):this._context.moveTo(yb,Gb);break;case 1:this._point=2;break;case 2:this._point=3;ua(this,oa(this,Eb=ta(this,
yb,Gb)),Eb);break;default:ua(this,this._t0,Eb=ta(this,yb,Gb))}this._x0=this._x1;this._x1=yb;this._y0=this._y1;this._y1=Gb;this._t0=Eb}}};(sa.prototype=Object.create(ka.prototype)).point=function(yb,Gb){ka.prototype.point.call(this,Gb,yb)};ya.prototype={moveTo:function(yb,Gb){this._context.moveTo(Gb,yb)},closePath:function(){this._context.closePath()},lineTo:function(yb,Gb){this._context.lineTo(Gb,yb)},bezierCurveTo:function(yb,Gb,Eb,Vb,Zb,Dc){this._context.bezierCurveTo(Gb,yb,Vb,Eb,Dc,Zb)}};qa.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var yb=this._x,Gb=this._y,Eb=yb.length;if(Eb)if(this._line?this._context.lineTo(yb[0],Gb[0]):this._context.moveTo(yb[0],Gb[0]),2===Eb)this._context.lineTo(yb[1],Gb[1]);else for(var Vb=xa(yb),Zb=xa(Gb),Dc=0,ic=1;ic<Eb;++Dc,++ic)this._context.bezierCurveTo(Vb[0][Dc],Zb[0][Dc],Vb[1][Dc],Zb[1][Dc],yb[ic],Gb[ic]);(this._line||0!==this._line&&1===Eb)&&this._context.closePath();
this._line=1-this._line;this._x=this._y=null},point:function(yb,Gb){this._x.push(+yb);this._y.push(+Gb)}};Ca.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(yb,Gb){yb=+yb;
Gb=+Gb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(yb,Gb):this._context.moveTo(yb,Gb);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,Gb),this._context.lineTo(yb,Gb);else{var Eb=this._x*(1-this._t)+yb*this._t;this._context.lineTo(Eb,this._y);this._context.lineTo(Eb,Gb)}}this._x=yb;this._y=Gb}};m.arc=function(){function yb(){var Ic,$c=+Gb.apply(this,arguments),nd=+Eb.apply(this,arguments),Yc=Dc.apply(this,arguments)-Ta,rd=ic.apply(this,arguments)-
Ta,wd=lb(rd-Yc),cd=rd>Yc;Sc||(Sc=Ic=h.path());if(nd<$c){var Jc=nd;nd=$c;$c=Jc}if(1E-12<nd)if(wd>Ya-1E-12)Sc.moveTo(nd*Fa(Yc),nd*fb(Yc)),Sc.arc(0,0,nd,Yc,rd,!cd),1E-12<$c&&(Sc.moveTo($c*Fa(rd),$c*fb(rd)),Sc.arc(0,0,$c,rd,Yc,cd));else{var sd=Yc,ud=rd;Jc=Yc;var yd=rd,cb=wd,je=wd,xd=Bc.apply(this,arguments)/2,be=1E-12<xd&&(Zb?+Zb.apply(this,arguments):bb($c*$c+nd*nd)),qe=Oa(lb(nd-$c)/2,+Vb.apply(this,arguments)),Hd=qe,ke=qe;if(1E-12<be){var Ge=e(be/$c*fb(xd));xd=e(be/nd*fb(xd));1E-12<(cb-=2*Ge)?(Ge*=
cd?1:-1,Jc+=Ge,yd-=Ge):(cb=0,Jc=yd=(Yc+rd)/2);1E-12<(je-=2*xd)?(xd*=cd?1:-1,sd+=xd,ud-=xd):(je=0,sd=ud=(Yc+rd)/2)}Yc=nd*Fa(sd);rd=nd*fb(sd);Ge=$c*Fa(yd);xd=$c*fb(yd);if(1E-12<qe){var Fd=nd*Fa(ud),Wd=nd*fb(ud),Sd=$c*Fa(Jc),Ae=$c*fb(Jc);if(wd=wd<Pa){var Xd=Sd-Yc;wd=Ae-rd;be=Ge-Fd;var sf=xd-Wd,Re=sf*Xd-be*wd;1E-12>Re*Re?Xd=void 0:(Re=(be*(rd-Wd)-sf*(Yc-Fd))/Re,Xd=[Yc+Re*Xd,rd+Re*wd]);wd=Xd}wd&&(Hd=Yc-Xd[0],ke=rd-Xd[1],wd=Fd-Xd[0],be=Wd-Xd[1],Hd=(Hd*wd+ke*be)/(bb(Hd*Hd+ke*ke)*bb(wd*wd+be*be)),ke=1/fb((1<
Hd?0:-1>Hd?Pa:Math.acos(Hd))/2),Xd=bb(Xd[0]*Xd[0]+Xd[1]*Xd[1]),Hd=Oa(qe,($c-Xd)/(ke-1)),ke=Oa(qe,(nd-Xd)/(ke+1)))}1E-12<je?1E-12<ke?(sd=c(Sd,Ae,Yc,rd,nd,ke,cd),ud=c(Fd,Wd,Ge,xd,nd,ke,cd),Sc.moveTo(sd.cx+sd.x01,sd.cy+sd.y01),ke<qe?Sc.arc(sd.cx,sd.cy,ke,hb(sd.y01,sd.x01),hb(ud.y01,ud.x01),!cd):(Sc.arc(sd.cx,sd.cy,ke,hb(sd.y01,sd.x01),hb(sd.y11,sd.x11),!cd),Sc.arc(0,0,nd,hb(sd.cy+sd.y11,sd.cx+sd.x11),hb(ud.cy+ud.y11,ud.cx+ud.x11),!cd),Sc.arc(ud.cx,ud.cy,ke,hb(ud.y11,ud.x11),hb(ud.y01,ud.x01),!cd))):
(Sc.moveTo(Yc,rd),Sc.arc(0,0,nd,sd,ud,!cd)):Sc.moveTo(Yc,rd);1E-12<$c&&1E-12<cb?1E-12<Hd?(sd=c(Ge,xd,Fd,Wd,$c,-Hd,cd),ud=c(Yc,rd,Sd,Ae,$c,-Hd,cd),Sc.lineTo(sd.cx+sd.x01,sd.cy+sd.y01),Hd<qe?Sc.arc(sd.cx,sd.cy,Hd,hb(sd.y01,sd.x01),hb(ud.y01,ud.x01),!cd):(Sc.arc(sd.cx,sd.cy,Hd,hb(sd.y01,sd.x01),hb(sd.y11,sd.x11),!cd),Sc.arc(0,0,$c,hb(sd.cy+sd.y11,sd.cx+sd.x11),hb(ud.cy+ud.y11,ud.cx+ud.x11),cd),Sc.arc(ud.cx,ud.cy,Hd,hb(ud.y11,ud.x11),hb(ud.y01,ud.x01),!cd))):Sc.arc(0,0,$c,yd,Jc,cd):Sc.lineTo(Ge,xd)}else Sc.moveTo(0,
0);Sc.closePath();if(Ic)return Sc=null,Ic+""||null}var Gb=a,Eb=g,Vb=l(0),Zb=null,Dc=k,ic=p,Bc=n,Sc=null;yb.centroid=function(){var Ic=(+Gb.apply(this,arguments)+ +Eb.apply(this,arguments))/2,$c=(+Dc.apply(this,arguments)+ +ic.apply(this,arguments))/2-Pa/2;return[Fa($c)*Ic,fb($c)*Ic]};yb.innerRadius=function(Ic){return arguments.length?(Gb="function"===typeof Ic?Ic:l(+Ic),yb):Gb};yb.outerRadius=function(Ic){return arguments.length?(Eb="function"===typeof Ic?Ic:l(+Ic),yb):Eb};yb.cornerRadius=function(Ic){return arguments.length?
(Vb="function"===typeof Ic?Ic:l(+Ic),yb):Vb};yb.padRadius=function(Ic){return arguments.length?(Zb=null==Ic?null:"function"===typeof Ic?Ic:l(+Ic),yb):Zb};yb.startAngle=function(Ic){return arguments.length?(Dc="function"===typeof Ic?Ic:l(+Ic),yb):Dc};yb.endAngle=function(Ic){return arguments.length?(ic="function"===typeof Ic?Ic:l(+Ic),yb):ic};yb.padAngle=function(Ic){return arguments.length?(Bc="function"===typeof Ic?Ic:l(+Ic),yb):Bc};yb.context=function(Ic){return arguments.length?(Sc=null==Ic?null:
Ic,yb):Sc};return yb};m.area=v;m.areaRadial=t;m.curveBasis=function(yb){return new U(yb)};m.curveBasisClosed=function(yb){return new P(yb)};m.curveBasisOpen=function(yb){return new V(yb)};m.curveBundle=ed;m.curveCardinal=tb;m.curveCardinalClosed=Xb;m.curveCardinalOpen=uc;m.curveCatmullRom=Mc;m.curveCatmullRomClosed=Rc;m.curveCatmullRomOpen=fd;m.curveLinear=d;m.curveLinearClosed=function(yb){return new ra(yb)};m.curveMonotoneX=function(yb){return new ka(yb)};m.curveMonotoneY=function(yb){return new sa(yb)};
m.curveNatural=function(yb){return new qa(yb)};m.curveStep=function(yb){return new Ca(yb,.5)};m.curveStepAfter=function(yb){return new Ca(yb,1)};m.curveStepBefore=function(yb){return new Ca(yb,0)};m.line=u;m.lineRadial=B;m.linkHorizontal=function(){return M(N)};m.linkRadial=function(){var yb=M(J);yb.angle=yb.x;delete yb.x;yb.radius=yb.y;delete yb.y;return yb};m.linkVertical=function(){return M(H)};m.pie=function(){function yb(Bc){var Sc,Ic=Bc.length;var $c=0;var nd=Array(Ic),Yc=Array(Ic),rd=+Zb.apply(this,
arguments);var wd=Math.min(Ya,Math.max(-Ya,Dc.apply(this,arguments)-rd));var cd=Math.min(Math.abs(wd)/Ic,ic.apply(this,arguments)),Jc=cd*(0>wd?-1:1),sd;for(Sc=0;Sc<Ic;++Sc)0<(sd=Yc[nd[Sc]=Sc]=+Gb(Bc[Sc],Sc,Bc))&&($c+=sd);null!=Eb?nd.sort(function(yd,cb){return Eb(Yc[yd],Yc[cb])}):null!=Vb&&nd.sort(function(yd,cb){return Vb(Bc[yd],Bc[cb])});Sc=0;for(wd=$c?(wd-Ic*Jc)/$c:0;Sc<Ic;++Sc,rd=ud){$c=nd[Sc];sd=Yc[$c];var ud=rd+(0<sd?sd*wd:0)+Jc;Yc[$c]={data:Bc[$c],index:Sc,value:sd,startAngle:rd,endAngle:ud,
padAngle:cd}}return Yc}var Gb=y,Eb=w,Vb=null,Zb=l(0),Dc=l(Ya),ic=l(0);yb.value=function(Bc){return arguments.length?(Gb="function"===typeof Bc?Bc:l(+Bc),yb):Gb};yb.sortValues=function(Bc){return arguments.length?(Eb=Bc,Vb=null,yb):Eb};yb.sort=function(Bc){return arguments.length?(Vb=Bc,Eb=null,yb):Vb};yb.startAngle=function(Bc){return arguments.length?(Zb="function"===typeof Bc?Bc:l(+Bc),yb):Zb};yb.endAngle=function(Bc){return arguments.length?(Dc="function"===typeof Bc?Bc:l(+Bc),yb):Dc};yb.padAngle=
function(Bc){return arguments.length?(ic="function"===typeof Bc?Bc:l(+Bc),yb):ic};return yb};m.pointRadial=G;m.radialArea=t;m.radialLine=B;m.stack=function(){function yb(Dc){var ic=Gb.apply(this,arguments),Bc,Sc=Dc.length,Ic=ic.length,$c=Array(Ic);for(Bc=0;Bc<Ic;++Bc){for(var nd=ic[Bc],Yc=$c[Bc]=Array(Sc),rd=0,wd;rd<Sc;++rd)Yc[rd]=wd=[0,+Zb(Dc[rd],nd,rd,Dc)],wd.data=Dc[rd];Yc.key=nd}Bc=0;for(ic=Eb($c);Bc<Ic;++Bc)$c[ic[Bc]].index=Bc;Vb($c,ic);return $c}var Gb=l([]),Eb=eb,Vb=Ja,Zb=Ra;yb.keys=function(Dc){return arguments.length?
(Gb="function"===typeof Dc?Dc:l(Da.call(Dc)),yb):Gb};yb.value=function(Dc){return arguments.length?(Zb="function"===typeof Dc?Dc:l(+Dc),yb):Zb};yb.order=function(Dc){return arguments.length?(Eb=null==Dc?eb:"function"===typeof Dc?Dc:l(Da.call(Dc)),yb):Eb};yb.offset=function(Dc){return arguments.length?(Vb=null==Dc?Ja:Dc,yb):Vb};return yb};m.stackOffsetDiverging=function(yb,Gb){if(0<(Sc=yb.length))for(var Eb,Vb=0,Zb,Dc,ic,Bc,Sc,Ic=yb[Gb[0]].length;Vb<Ic;++Vb)for(Eb=ic=Bc=0;Eb<Sc;++Eb)0<(Dc=(Zb=yb[Gb[Eb]][Vb])[1]-
Zb[0])?(Zb[0]=ic,Zb[1]=ic+=Dc):0>Dc?(Zb[1]=Bc,Zb[0]=Bc+=Dc):(Zb[0]=0,Zb[1]=Dc)};m.stackOffsetExpand=function(yb,Gb){if(0<(Vb=yb.length)){for(var Eb,Vb,Zb=0,Dc=yb[0].length,ic;Zb<Dc;++Zb){for(ic=Eb=0;Eb<Vb;++Eb)ic+=yb[Eb][Zb][1]||0;if(ic)for(Eb=0;Eb<Vb;++Eb)yb[Eb][Zb][1]/=ic}Ja(yb,Gb)}};m.stackOffsetNone=Ja;m.stackOffsetSilhouette=function(yb,Gb){if(0<(Zb=yb.length)){for(var Eb=0,Vb=yb[Gb[0]],Zb,Dc=Vb.length;Eb<Dc;++Eb){for(var ic=0,Bc=0;ic<Zb;++ic)Bc+=yb[ic][Eb][1]||0;Vb[Eb][1]+=Vb[Eb][0]=-Bc/2}Ja(yb,
Gb)}};m.stackOffsetWiggle=function(yb,Gb){if(0<(ic=yb.length)&&0<(Dc=(Zb=yb[Gb[0]]).length)){for(var Eb=0,Vb=1,Zb,Dc,ic;Vb<Dc;++Vb){for(var Bc=0,Sc=0,Ic=0;Bc<ic;++Bc){var $c=yb[Gb[Bc]],nd=$c[Vb][1]||0;$c=(nd-($c[Vb-1][1]||0))/2;for(var Yc=0;Yc<Bc;++Yc){var rd=yb[Gb[Yc]];$c+=(rd[Vb][1]||0)-(rd[Vb-1][1]||0)}Sc+=nd;Ic+=$c*nd}Zb[Vb-1][1]+=Zb[Vb-1][0]=Eb;Sc&&(Eb-=Ic/Sc)}Zb[Vb-1][1]+=Zb[Vb-1][0]=Eb;Ja(yb,Gb)}};m.stackOrderAppearance=Wa;m.stackOrderAscending=Ia;m.stackOrderDescending=function(yb){return Ia(yb).reverse()};
m.stackOrderInsideOut=function(yb){var Gb=yb.length,Eb=yb.map(Qa),Vb=Wa(yb),Zb=0,Dc=0,ic=[],Bc=[];for(yb=0;yb<Gb;++yb){var Sc=Vb[yb];Zb<Dc?(Zb+=Eb[Sc],ic.push(Sc)):(Dc+=Eb[Sc],Bc.push(Sc))}return Bc.reverse().concat(ic)};m.stackOrderNone=eb;m.stackOrderReverse=function(yb){return eb(yb).reverse()};m.symbol=function(){function yb(){var Zb;Vb||(Vb=Zb=h.path());Gb.apply(this,arguments).draw(Vb,+Eb.apply(this,arguments));if(Zb)return Vb=null,Zb+""||null}var Gb=l(Ha),Eb=l(64),Vb=null;yb.type=function(Zb){return arguments.length?
(Gb="function"===typeof Zb?Zb:l(Zb),yb):Gb};yb.size=function(Zb){return arguments.length?(Eb="function"===typeof Zb?Zb:l(+Zb),yb):Eb};yb.context=function(Zb){return arguments.length?(Vb=null==Zb?null:Zb,yb):Vb};return yb};m.symbolCircle=Ha;m.symbolCross=ab;m.symbolDiamond=db;m.symbolSquare=Qb;m.symbolStar=gb;m.symbolTriangle=tc;m.symbolWye=gd;m.symbols=Xc;Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-path":163}],166:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?
h(C,b("d3-time")):(m=m||self,h(m.d3=m.d3||{},m.d3))})(this,function(m,h){function l(db){if(0<=db.y&&100>db.y){var gb=new Date(-1,db.m,db.d,db.H,db.M,db.S,db.L);gb.setFullYear(db.y);return gb}return new Date(db.y,db.m,db.d,db.H,db.M,db.S,db.L)}function e(db){if(0<=db.y&&100>db.y){var gb=new Date(Date.UTC(-1,db.m,db.d,db.H,db.M,db.S,db.L));gb.setUTCFullYear(db.y);return gb}return new Date(Date.UTC(db.y,db.m,db.d,db.H,db.M,db.S,db.L))}function a(db,gb,rb){return{y:db,m:gb,d:rb,H:0,M:0,S:0,L:0}}function g(db){function gb(Tb,
yb){return function(Gb){var Eb=[],Vb=-1,Zb=0,Dc=Tb.length,ic,Bc;for(Gb instanceof Date||(Gb=new Date(+Gb));++Vb<Dc;)if(37===Tb.charCodeAt(Vb)){Eb.push(Tb.slice(Zb,Vb));null!=(Zb=Ya[ic=Tb.charAt(++Vb)])?ic=Tb.charAt(++Vb):Zb="e"===ic?" ":"0";if(Bc=yb[ic])ic=Bc(Gb,Zb);Eb.push(ic);Zb=Vb+1}Eb.push(Tb.slice(Zb,Vb));return Eb.join("")}}function rb(Tb,yb){return function(Gb){var Eb=a(1900,void 0,1);if(Bb(Eb,Tb,Gb+="",0)!=Gb.length)return null;if("Q"in Eb)return new Date(Eb.Q);if("s"in Eb)return new Date(1E3*
Eb.s+("L"in Eb?Eb.L:0));!yb||"Z"in Eb||(Eb.Z=0);"p"in Eb&&(Eb.H=Eb.H%12+12*Eb.p);void 0===Eb.m&&(Eb.m="q"in Eb?Eb.q:0);if("V"in Eb){if(1>Eb.V||53<Eb.V)return null;"w"in Eb||(Eb.w=1);if("Z"in Eb){Gb=e(a(Eb.y,0,1));var Vb=Gb.getUTCDay();Gb=4<Vb||0===Vb?h.utcMonday.ceil(Gb):h.utcMonday(Gb);Gb=h.utcDay.offset(Gb,7*(Eb.V-1));Eb.y=Gb.getUTCFullYear();Eb.m=Gb.getUTCMonth();Eb.d=Gb.getUTCDate()+(Eb.w+6)%7}else Gb=l(a(Eb.y,0,1)),Vb=Gb.getDay(),Gb=4<Vb||0===Vb?h.timeMonday.ceil(Gb):h.timeMonday(Gb),Gb=h.timeDay.offset(Gb,
7*(Eb.V-1)),Eb.y=Gb.getFullYear(),Eb.m=Gb.getMonth(),Eb.d=Gb.getDate()+(Eb.w+6)%7}else if("W"in Eb||"U"in Eb)"w"in Eb||(Eb.w="u"in Eb?Eb.u%7:"W"in Eb?1:0),Vb="Z"in Eb?e(a(Eb.y,0,1)).getUTCDay():l(a(Eb.y,0,1)).getDay(),Eb.m=0,Eb.d="W"in Eb?(Eb.w+6)%7+7*Eb.W-(Vb+5)%7:Eb.w+7*Eb.U-(Vb+6)%7;return"Z"in Eb?(Eb.H+=Eb.Z/100|0,Eb.M+=Eb.Z%100,e(Eb)):l(Eb)}}function Bb(Tb,yb,Gb,Eb){for(var Vb=0,Zb=yb.length,Dc=Gb.length,ic;Vb<Zb;){if(Eb>=Dc)return-1;ic=yb.charCodeAt(Vb++);if(37===ic){if(ic=yb.charAt(Vb++),ic=
ac[ic in Ya?yb.charAt(Vb++):ic],!ic||0>(Eb=ic(Tb,Gb,Eb)))return-1}else if(ic!=Gb.charCodeAt(Eb++))return-1}return Eb}var Qb=db.dateTime,gc=db.date,tc=db.time,Ac=db.periods,Uc=db.days,Nc=db.shortDays,gd=db.months,Xc=db.shortMonths,ed=n(Ac),tb=c(Ac),Xb=n(Uc),uc=c(Uc),Mc=n(Nc),Rc=c(Nc),fd=n(gd),sb=c(gd),xb=n(Xc),kc=c(Xc),nc={a:function(Tb){return Nc[Tb.getDay()]},A:function(Tb){return Uc[Tb.getDay()]},b:function(Tb){return Xc[Tb.getMonth()]},B:function(Tb){return gd[Tb.getMonth()]},c:null,d:O,e:O,f:Y,
H:Q,I:U,j:P,L:V,m:ba,M:ea,p:function(Tb){return Ac[+(12<=Tb.getHours())]},q:function(Tb){return 1+~~(Tb.getMonth()/3)},Q:Oa,s:fb,S:ca,u:ia,U:fa,V:ha,w:na,W:pa,x:null,X:null,y:ra,Y:ta,Z:oa,"%":La},Kc={a:function(Tb){return Nc[Tb.getUTCDay()]},A:function(Tb){return Uc[Tb.getUTCDay()]},b:function(Tb){return Xc[Tb.getUTCMonth()]},B:function(Tb){return gd[Tb.getUTCMonth()]},c:null,d:ua,e:ua,f:xa,H:ka,I:sa,j:ya,L:qa,m:Ca,M:Ja,p:function(Tb){return Ac[+(12<=Tb.getUTCHours())]},q:function(Tb){return 1+~~(Tb.getUTCMonth()/
3)},Q:Oa,s:fb,S:eb,u:Ra,U:Wa,V:Ea,w:Ia,W:Qa,x:null,X:null,y:lb,Y:hb,Z:Fa,"%":La},ac={a:function(Tb,yb,Gb){return(yb=Mc.exec(yb.slice(Gb)))?(Tb.w=Rc[yb[0].toLowerCase()],Gb+yb[0].length):-1},A:function(Tb,yb,Gb){return(yb=Xb.exec(yb.slice(Gb)))?(Tb.w=uc[yb[0].toLowerCase()],Gb+yb[0].length):-1},b:function(Tb,yb,Gb){return(yb=xb.exec(yb.slice(Gb)))?(Tb.m=kc[yb[0].toLowerCase()],Gb+yb[0].length):-1},B:function(Tb,yb,Gb){return(yb=fd.exec(yb.slice(Gb)))?(Tb.m=sb[yb[0].toLowerCase()],Gb+yb[0].length):
-1},c:function(Tb,yb,Gb){return Bb(Tb,Qb,yb,Gb)},d:E,e:E,f:M,H:t,I:t,j:B,L,m:x,M:G,p:function(Tb,yb,Gb){return(yb=ed.exec(yb.slice(Gb)))?(Tb.p=tb[yb[0].toLowerCase()],Gb+yb[0].length):-1},q:D,Q:H,s:J,S:I,u:d,U:q,V:r,w:f,W:u,x:function(Tb,yb,Gb){return Bb(Tb,gc,yb,Gb)},X:function(Tb,yb,Gb){return Bb(Tb,tc,yb,Gb)},y:w,Y:v,Z:y,"%":N};nc.x=gb(gc,nc);nc.X=gb(tc,nc);nc.c=gb(Qb,nc);Kc.x=gb(gc,Kc);Kc.X=gb(tc,Kc);Kc.c=gb(Qb,Kc);return{format:function(Tb){var yb=gb(Tb+="",nc);yb.toString=function(){return Tb};
return yb},parse:function(Tb){var yb=rb(Tb+="",!1);yb.toString=function(){return Tb};return yb},utcFormat:function(Tb){var yb=gb(Tb+="",Kc);yb.toString=function(){return Tb};return yb},utcParse:function(Tb){var yb=rb(Tb+="",!0);yb.toString=function(){return Tb};return yb}}}function k(db,gb,rb){var Bb=0>db?"-":"";db=(Bb?-db:db)+"";var Qb=db.length;return Bb+(Qb<rb?Array(rb-Qb+1).join(gb)+db:db)}function p(db){return db.replace(Ha,"\\$\x26")}function n(db){return new RegExp("^(?:"+db.map(p).join("|")+
")","i")}function c(db){for(var gb={},rb=-1,Bb=db.length;++rb<Bb;)gb[db[rb].toLowerCase()]=rb;return gb}function f(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+1)))?(db.w=+gb[0],rb+gb[0].length):-1}function d(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+1)))?(db.u=+gb[0],rb+gb[0].length):-1}function q(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+2)))?(db.U=+gb[0],rb+gb[0].length):-1}function r(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+2)))?(db.V=+gb[0],rb+gb[0].length):-1}function u(db,gb,rb){return(gb=
nb.exec(gb.slice(rb,rb+2)))?(db.W=+gb[0],rb+gb[0].length):-1}function v(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+4)))?(db.y=+gb[0],rb+gb[0].length):-1}function w(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+2)))?(db.y=+gb[0]+(68<+gb[0]?1900:2E3),rb+gb[0].length):-1}function y(db,gb,rb){return(gb=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(gb.slice(rb,rb+6)))?(db.Z=gb[1]?0:-(gb[2]+(gb[3]||"00")),rb+gb[0].length):-1}function D(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+1)))?(db.q=3*gb[0]-3,rb+gb[0].length):
-1}function x(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+2)))?(db.m=gb[0]-1,rb+gb[0].length):-1}function E(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+2)))?(db.d=+gb[0],rb+gb[0].length):-1}function B(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+3)))?(db.m=0,db.d=+gb[0],rb+gb[0].length):-1}function t(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+2)))?(db.H=+gb[0],rb+gb[0].length):-1}function G(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+2)))?(db.M=+gb[0],rb+gb[0].length):-1}function I(db,gb,rb){return(gb=
nb.exec(gb.slice(rb,rb+2)))?(db.S=+gb[0],rb+gb[0].length):-1}function L(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+3)))?(db.L=+gb[0],rb+gb[0].length):-1}function M(db,gb,rb){return(gb=nb.exec(gb.slice(rb,rb+6)))?(db.L=Math.floor(gb[0]/1E3),rb+gb[0].length):-1}function N(db,gb,rb){return(db=Da.exec(gb.slice(rb,rb+1)))?rb+db[0].length:-1}function H(db,gb,rb){return(gb=nb.exec(gb.slice(rb)))?(db.Q=+gb[0],rb+gb[0].length):-1}function J(db,gb,rb){return(gb=nb.exec(gb.slice(rb)))?(db.s=+gb[0],rb+gb[0].length):
-1}function O(db,gb){return k(db.getDate(),gb,2)}function Q(db,gb){return k(db.getHours(),gb,2)}function U(db,gb){return k(db.getHours()%12||12,gb,2)}function P(db,gb){return k(1+h.timeDay.count(h.timeYear(db),db),gb,3)}function V(db,gb){return k(db.getMilliseconds(),gb,3)}function Y(db,gb){return V(db,gb)+"000"}function ba(db,gb){return k(db.getMonth()+1,gb,2)}function ea(db,gb){return k(db.getMinutes(),gb,2)}function ca(db,gb){return k(db.getSeconds(),gb,2)}function ia(db){db=db.getDay();return 0===
db?7:db}function fa(db,gb){return k(h.timeSunday.count(h.timeYear(db)-1,db),gb,2)}function ha(db,gb){var rb=db.getDay();db=4<=rb||0===rb?h.timeThursday(db):h.timeThursday.ceil(db);return k(h.timeThursday.count(h.timeYear(db),db)+(4===h.timeYear(db).getDay()),gb,2)}function na(db){return db.getDay()}function pa(db,gb){return k(h.timeMonday.count(h.timeYear(db)-1,db),gb,2)}function ra(db,gb){return k(db.getFullYear()%100,gb,2)}function ta(db,gb){return k(db.getFullYear()%1E4,gb,4)}function oa(db){db=
db.getTimezoneOffset();return(0<db?"-":(db*=-1,"+"))+k(db/60|0,"0",2)+k(db%60,"0",2)}function ua(db,gb){return k(db.getUTCDate(),gb,2)}function ka(db,gb){return k(db.getUTCHours(),gb,2)}function sa(db,gb){return k(db.getUTCHours()%12||12,gb,2)}function ya(db,gb){return k(1+h.utcDay.count(h.utcYear(db),db),gb,3)}function qa(db,gb){return k(db.getUTCMilliseconds(),gb,3)}function xa(db,gb){return qa(db,gb)+"000"}function Ca(db,gb){return k(db.getUTCMonth()+1,gb,2)}function Ja(db,gb){return k(db.getUTCMinutes(),
gb,2)}function eb(db,gb){return k(db.getUTCSeconds(),gb,2)}function Ra(db){db=db.getUTCDay();return 0===db?7:db}function Wa(db,gb){return k(h.utcSunday.count(h.utcYear(db)-1,db),gb,2)}function Ea(db,gb){var rb=db.getUTCDay();db=4<=rb||0===rb?h.utcThursday(db):h.utcThursday.ceil(db);return k(h.utcThursday.count(h.utcYear(db),db)+(4===h.utcYear(db).getUTCDay()),gb,2)}function Ia(db){return db.getUTCDay()}function Qa(db,gb){return k(h.utcMonday.count(h.utcYear(db)-1,db),gb,2)}function lb(db,gb){return k(db.getUTCFullYear()%
100,gb,2)}function hb(db,gb){return k(db.getUTCFullYear()%1E4,gb,4)}function Fa(){return"+0000"}function La(){return"%"}function Oa(db){return+db}function fb(db){return Math.floor(+db/1E3)}function bb(db){ab=g(db);m.timeFormat=ab.format;m.timeParse=ab.parse;m.utcFormat=ab.utcFormat;m.utcParse=ab.utcParse;return ab}function Pa(db){return db.toISOString()}function Ta(db){db=new Date(db);return isNaN(db)?null:db}var Ya={"-":"",_:" ",0:"0"},nb=/^\s*\d+/,Da=/^%/,Ha=/[\\^$*+?|[\]().{}]/g,ab;bb({dateTime:"%x, %X",
date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var ib=Date.prototype.toISOString?Pa:m.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),ob=+new Date("2000-01-01T00:00:00.000Z")?Ta:m.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");
m.isoFormat=ib;m.isoParse=ob;m.timeFormatDefaultLocale=bb;m.timeFormatLocale=g;Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-time":167}],167:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C):(m=m||self,h(m.d3=m.d3||{}))})(this,function(m){function h(Ea,Ia,Qa,lb){function hb(Fa){return Ea(Fa=0===arguments.length?new Date:new Date(+Fa)),Fa}hb.floor=function(Fa){return Ea(Fa=new Date(+Fa)),Fa};hb.ceil=function(Fa){return Ea(Fa=new Date(Fa-1)),Ia(Fa,1),Ea(Fa),
Fa};hb.round=function(Fa){var La=hb(Fa),Oa=hb.ceil(Fa);return Fa-La<Oa-Fa?La:Oa};hb.offset=function(Fa,La){return Ia(Fa=new Date(+Fa),null==La?1:Math.floor(La)),Fa};hb.range=function(Fa,La,Oa){var fb=[],bb;Fa=hb.ceil(Fa);Oa=null==Oa?1:Math.floor(Oa);if(!(Fa<La&&0<Oa))return fb;do fb.push(bb=new Date(+Fa)),Ia(Fa,Oa),Ea(Fa);while(bb<Fa&&Fa<La);return fb};hb.filter=function(Fa){return h(function(La){if(La>=La)for(;Ea(La),!Fa(La);)La.setTime(La-1)},function(La,Oa){if(La>=La)if(0>Oa)for(;0>=++Oa;)for(;Ia(La,
-1),!Fa(La););else for(;0<=--Oa;)for(;Ia(La,1),!Fa(La););})};Qa&&(hb.count=function(Fa,La){a.setTime(+Fa);g.setTime(+La);Ea(a);Ea(g);return Math.floor(Qa(a,g))},hb.every=function(Fa){Fa=Math.floor(Fa);return isFinite(Fa)&&0<Fa?1<Fa?hb.filter(lb?function(La){return 0===lb(La)%Fa}:function(La){return 0===hb.count(0,La)%Fa}):hb:null});return hb}function l(Ea){return h(function(Ia){Ia.setDate(Ia.getDate()-(Ia.getDay()+7-Ea)%7);Ia.setHours(0,0,0,0)},function(Ia,Qa){Ia.setDate(Ia.getDate()+7*Qa)},function(Ia,
Qa){return(Qa-Ia-6E4*(Qa.getTimezoneOffset()-Ia.getTimezoneOffset()))/6048E5})}function e(Ea){return h(function(Ia){Ia.setUTCDate(Ia.getUTCDate()-(Ia.getUTCDay()+7-Ea)%7);Ia.setUTCHours(0,0,0,0)},function(Ia,Qa){Ia.setUTCDate(Ia.getUTCDate()+7*Qa)},function(Ia,Qa){return(Qa-Ia)/6048E5})}var a=new Date,g=new Date,k=h(function(){},function(Ea,Ia){Ea.setTime(+Ea+Ia)},function(Ea,Ia){return Ia-Ea});k.every=function(Ea){Ea=Math.floor(Ea);return isFinite(Ea)&&0<Ea?1<Ea?h(function(Ia){Ia.setTime(Math.floor(Ia/
Ea)*Ea)},function(Ia,Qa){Ia.setTime(+Ia+Qa*Ea)},function(Ia,Qa){return(Qa-Ia)/Ea}):k:null};var p=k.range,n=h(function(Ea){Ea.setTime(Ea-Ea.getMilliseconds())},function(Ea,Ia){Ea.setTime(+Ea+1E3*Ia)},function(Ea,Ia){return(Ia-Ea)/1E3},function(Ea){return Ea.getUTCSeconds()}),c=n.range,f=h(function(Ea){Ea.setTime(Ea-Ea.getMilliseconds()-1E3*Ea.getSeconds())},function(Ea,Ia){Ea.setTime(+Ea+6E4*Ia)},function(Ea,Ia){return(Ia-Ea)/6E4},function(Ea){return Ea.getMinutes()}),d=f.range,q=h(function(Ea){Ea.setTime(Ea-
Ea.getMilliseconds()-1E3*Ea.getSeconds()-6E4*Ea.getMinutes())},function(Ea,Ia){Ea.setTime(+Ea+36E5*Ia)},function(Ea,Ia){return(Ia-Ea)/36E5},function(Ea){return Ea.getHours()}),r=q.range,u=h(function(Ea){Ea.setHours(0,0,0,0)},function(Ea,Ia){Ea.setDate(Ea.getDate()+Ia)},function(Ea,Ia){return(Ia-Ea-6E4*(Ia.getTimezoneOffset()-Ea.getTimezoneOffset()))/864E5},function(Ea){return Ea.getDate()-1}),v=u.range,w=l(0),y=l(1),D=l(2),x=l(3),E=l(4),B=l(5),t=l(6),G=w.range,I=y.range,L=D.range,M=x.range,N=E.range,
H=B.range,J=t.range,O=h(function(Ea){Ea.setDate(1);Ea.setHours(0,0,0,0)},function(Ea,Ia){Ea.setMonth(Ea.getMonth()+Ia)},function(Ea,Ia){return Ia.getMonth()-Ea.getMonth()+12*(Ia.getFullYear()-Ea.getFullYear())},function(Ea){return Ea.getMonth()}),Q=O.range,U=h(function(Ea){Ea.setMonth(0,1);Ea.setHours(0,0,0,0)},function(Ea,Ia){Ea.setFullYear(Ea.getFullYear()+Ia)},function(Ea,Ia){return Ia.getFullYear()-Ea.getFullYear()},function(Ea){return Ea.getFullYear()});U.every=function(Ea){return isFinite(Ea=
Math.floor(Ea))&&0<Ea?h(function(Ia){Ia.setFullYear(Math.floor(Ia.getFullYear()/Ea)*Ea);Ia.setMonth(0,1);Ia.setHours(0,0,0,0)},function(Ia,Qa){Ia.setFullYear(Ia.getFullYear()+Qa*Ea)}):null};var P=U.range,V=h(function(Ea){Ea.setUTCSeconds(0,0)},function(Ea,Ia){Ea.setTime(+Ea+6E4*Ia)},function(Ea,Ia){return(Ia-Ea)/6E4},function(Ea){return Ea.getUTCMinutes()}),Y=V.range,ba=h(function(Ea){Ea.setUTCMinutes(0,0,0)},function(Ea,Ia){Ea.setTime(+Ea+36E5*Ia)},function(Ea,Ia){return(Ia-Ea)/36E5},function(Ea){return Ea.getUTCHours()}),
ea=ba.range,ca=h(function(Ea){Ea.setUTCHours(0,0,0,0)},function(Ea,Ia){Ea.setUTCDate(Ea.getUTCDate()+Ia)},function(Ea,Ia){return(Ia-Ea)/864E5},function(Ea){return Ea.getUTCDate()-1}),ia=ca.range,fa=e(0),ha=e(1),na=e(2),pa=e(3),ra=e(4),ta=e(5),oa=e(6),ua=fa.range,ka=ha.range,sa=na.range,ya=pa.range,qa=ra.range,xa=ta.range,Ca=oa.range,Ja=h(function(Ea){Ea.setUTCDate(1);Ea.setUTCHours(0,0,0,0)},function(Ea,Ia){Ea.setUTCMonth(Ea.getUTCMonth()+Ia)},function(Ea,Ia){return Ia.getUTCMonth()-Ea.getUTCMonth()+
12*(Ia.getUTCFullYear()-Ea.getUTCFullYear())},function(Ea){return Ea.getUTCMonth()}),eb=Ja.range,Ra=h(function(Ea){Ea.setUTCMonth(0,1);Ea.setUTCHours(0,0,0,0)},function(Ea,Ia){Ea.setUTCFullYear(Ea.getUTCFullYear()+Ia)},function(Ea,Ia){return Ia.getUTCFullYear()-Ea.getUTCFullYear()},function(Ea){return Ea.getUTCFullYear()});Ra.every=function(Ea){return isFinite(Ea=Math.floor(Ea))&&0<Ea?h(function(Ia){Ia.setUTCFullYear(Math.floor(Ia.getUTCFullYear()/Ea)*Ea);Ia.setUTCMonth(0,1);Ia.setUTCHours(0,0,0,
0)},function(Ia,Qa){Ia.setUTCFullYear(Ia.getUTCFullYear()+Qa*Ea)}):null};var Wa=Ra.range;m.timeDay=u;m.timeDays=v;m.timeFriday=B;m.timeFridays=H;m.timeHour=q;m.timeHours=r;m.timeInterval=h;m.timeMillisecond=k;m.timeMilliseconds=p;m.timeMinute=f;m.timeMinutes=d;m.timeMonday=y;m.timeMondays=I;m.timeMonth=O;m.timeMonths=Q;m.timeSaturday=t;m.timeSaturdays=J;m.timeSecond=n;m.timeSeconds=c;m.timeSunday=w;m.timeSundays=G;m.timeThursday=E;m.timeThursdays=N;m.timeTuesday=D;m.timeTuesdays=L;m.timeWednesday=
x;m.timeWednesdays=M;m.timeWeek=w;m.timeWeeks=G;m.timeYear=U;m.timeYears=P;m.utcDay=ca;m.utcDays=ia;m.utcFriday=ta;m.utcFridays=xa;m.utcHour=ba;m.utcHours=ea;m.utcMillisecond=k;m.utcMilliseconds=p;m.utcMinute=V;m.utcMinutes=Y;m.utcMonday=ha;m.utcMondays=ka;m.utcMonth=Ja;m.utcMonths=eb;m.utcSaturday=oa;m.utcSaturdays=Ca;m.utcSecond=n;m.utcSeconds=c;m.utcSunday=fa;m.utcSundays=ua;m.utcThursday=ra;m.utcThursdays=qa;m.utcTuesday=na;m.utcTuesdays=sa;m.utcWednesday=pa;m.utcWednesdays=ya;m.utcWeek=fa;m.utcWeeks=
ua;m.utcYear=Ra;m.utcYears=Wa;Object.defineProperty(m,"__esModule",{value:!0})})},{}],168:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C):(m=m||self,h(m.d3=m.d3||{}))})(this,function(m){function h(){return v||(D(l),v=y.now()+w)}function l(){v=0}function e(){this._call=this._time=this._next=null}function a(x,E,B){var t=new e;t.restart(x,E,B);return t}function g(){h();++c;for(var x=q,E;x;)0<=(E=v-x._time)&&x._call.call(null,E),x=x._next;--c}function k(){v=(u=y.now())+
w;c=f=0;try{g()}finally{c=0;for(var x,E=q,B,t=Infinity;E;)E._call?(t>E._time&&(t=E._time),x=E,E=E._next):(B=E._next,E._next=null,E=x?x._next=B:q=B);r=x;n(t);v=0}}function p(){var x=y.now(),E=x-u;1E3<E&&(w-=E,u=x)}function n(x){c||(f&&(f=clearTimeout(f)),24<x-v?(Infinity>x&&(f=setTimeout(k,x-y.now()-w)),d&&(d=clearInterval(d))):(d||(u=y.now(),d=setInterval(p,1E3)),c=1,D(k)))}var c=0,f=0,d=0,q,r,u=0,v=0,w=0,y="object"===typeof performance&&performance.now?performance:Date,D="object"===typeof window&&
window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(x){setTimeout(x,17)};e.prototype=a.prototype={constructor:e,restart:function(x,E,B){if("function"!==typeof x)throw new TypeError("callback is not a function");B=(null==B?h():+B)+(null==E?0:+E);this._next||r===this||(r?r._next=this:q=this,r=this);this._call=x;this._time=B;n()},stop:function(){this._call&&(this._call=null,this._time=Infinity,n())}};m.interval=function(x,E,B){var t=new e,G=E;if(null==E)return t.restart(x,
E,B),t;E=+E;B=null==B?h():+B;t.restart(function M(L){L+=G;t.restart(M,G+=E,B);x(L)},E,B);return t};m.now=h;m.timeout=function(x,E,B){var t=new e;E=null==E?0:+E;t.restart(function(G){t.stop();x(G+E)},E,B);return t};m.timer=a;m.timerFlush=g;Object.defineProperty(m,"__esModule",{value:!0})})},{}],169:[function(b,F,C){!function(){function m(S){return S&&(S.ownerDocument&&S.ownerDocument.defaultView||S.document&&S||S.defaultView)}function h(S,la){return S<la?-1:S>la?1:S>=la?0:NaN}function l(S){return null===
S?NaN:+S}function e(S){return!isNaN(S)}function a(S){return{left:function(la,wa,Ba,Ga){3>arguments.length&&(Ba=0);4>arguments.length&&(Ga=la.length);for(;Ba<Ga;){var Ka=Ba+Ga>>>1;0>S(la[Ka],wa)?Ba=Ka+1:Ga=Ka}return Ba},right:function(la,wa,Ba,Ga){3>arguments.length&&(Ba=0);4>arguments.length&&(Ga=la.length);for(;Ba<Ga;){var Ka=Ba+Ga>>>1;0<S(la[Ka],wa)?Ga=Ka:Ba=Ka+1}return Ba}}}function g(S){return S.length}function k(S,la){for(var wa in la)Object.defineProperty(S.prototype,wa,{value:la[wa],enumerable:!1})}
function p(){this._=Object.create(null)}function n(S){return"__proto__"===(S+="")||"\x00"===S[0]?"\x00"+S:S}function c(S){return"\x00"===(S+="")[0]?S.slice(1):S}function f(S){return n(S)in this._}function d(S){return(S=n(S))in this._&&delete this._[S]}function q(){var S=[],la;for(la in this._)S.push(c(la));return S}function r(){var S=0,la;for(la in this._)++S;return S}function u(){for(var S in this._)return!1;return!0}function v(){this._=Object.create(null)}function w(S){return S}function y(S,la,
wa){return function(){var Ba=wa.apply(la,arguments);return Ba===la?S:Ba}}function D(S,la){if(la in S)return la;la=la.charAt(0).toUpperCase()+la.slice(1);for(var wa=0,Ba=Eh.length;wa<Ba;++wa){var Ga=Eh[wa]+la;if(Ga in S)return Ga}}function x(){}function E(){}function B(S){function la(){for(var Ga=wa,Ka=-1,$a=Ga.length,Sa;++Ka<$a;)(Sa=Ga[Ka].on)&&Sa.apply(this,arguments);return S}var wa=[],Ba=new p;la.on=function(Ga,Ka){var $a=Ba.get(Ga),Sa;if(2>arguments.length)return $a&&$a.on;$a&&($a.on=null,wa=
wa.slice(0,Sa=wa.indexOf($a)).concat(wa.slice(Sa+1)),Ba.remove(Ga));Ka&&wa.push(Ba.set(Ga,{on:Ka}));return S};return la}function t(){Jb.event.preventDefault()}function G(){for(var S=Jb.event,la;la=S.sourceEvent;)S=la;return S}function I(S){for(var la=new E,wa=0,Ba=arguments.length;++wa<Ba;)la[arguments[wa]]=B(la);la.of=function(Ga,Ka){return function($a){try{var Sa=$a.sourceEvent=Jb.event;$a.target=S;Jb.event=$a;la[$a.type].apply(Ga,Ka)}finally{Jb.event=Sa}}};return la}function L(S){Qj(S,Ie);return S}
function M(S){return"function"===typeof S?S:function(){return wk(S,this)}}function N(S){return"function"===typeof S?S:function(){return xk(S,this)}}function H(S,la){function wa(){this.removeAttribute(S)}function Ba(){this.removeAttributeNS(S.space,S.local)}function Ga(){this.setAttribute(S,la)}function Ka(){this.setAttributeNS(S.space,S.local,la)}function $a(){var Za=la.apply(this,arguments);null==Za?this.removeAttribute(S):this.setAttribute(S,Za)}function Sa(){var Za=la.apply(this,arguments);null==
Za?this.removeAttributeNS(S.space,S.local):this.setAttributeNS(S.space,S.local,Za)}S=Jb.ns.qualify(S);return null==la?S.local?Ba:wa:"function"===typeof la?S.local?Sa:$a:S.local?Ka:Ga}function J(S){return new RegExp("(?:^|\\s+)"+Jb.requote(S)+"(?:\\s+|$)","g")}function O(S,la){function wa(){for(var Ka=-1;++Ka<Ga;)S[Ka](this,la)}function Ba(){for(var Ka=-1,$a=la.apply(this,arguments);++Ka<Ga;)S[Ka](this,$a)}S=(S+"").trim().split(/^|\s+/).map(Q);var Ga=S.length;return"function"===typeof la?Ba:wa}function Q(S){var la=
J(S);return function(wa,Ba){if(Ga=wa.classList)return Ba?Ga.add(S):Ga.remove(S);var Ga=wa.getAttribute("class")||"";Ba?(la.lastIndex=0,la.test(Ga)||wa.setAttribute("class",(Ga+" "+S).trim().replace(/\s+/g," "))):wa.setAttribute("class",Ga.replace(la," ").trim().replace(/\s+/g," "))}}function U(S,la,wa){function Ba(){this.style.removeProperty(S)}function Ga(){this.style.setProperty(S,la,wa)}function Ka(){var $a=la.apply(this,arguments);null==$a?this.style.removeProperty(S):this.style.setProperty(S,
$a,wa)}return null==la?Ba:"function"===typeof la?Ka:Ga}function P(S,la){function wa(){delete this[S]}function Ba(){this[S]=la}function Ga(){var Ka=la.apply(this,arguments);null==Ka?delete this[S]:this[S]=Ka}return null==la?wa:"function"===typeof la?Ga:Ba}function V(S){function la(){var Ba=this.ownerDocument,Ga=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===Ga&&"http://www.w3.org/1999/xhtml"===Ba.documentElement.namespaceURI?Ba.createElement(S):Ba.createElementNS(Ga,S)}function wa(){return this.ownerDocument.createElementNS(S.space,
S.local)}return"function"===typeof S?S:(S=Jb.ns.qualify(S)).local?wa:la}function Y(){var S=this.parentNode;S&&S.removeChild(this)}function ba(S){return function(){return Rj(this,S)}}function ea(S){arguments.length||(S=h);return function(la,wa){return la&&wa?S(la.__data__,wa.__data__):!la-!wa}}function ca(S,la){for(var wa=0,Ba=S.length;wa<Ba;wa++)for(var Ga=S[wa],Ka=0,$a=Ga.length,Sa;Ka<$a;Ka++)(Sa=Ga[Ka])&&la(Sa,Ka,wa);return S}function ia(S){Qj(S,Uf);return S}function fa(S){var la,wa;return function(Ba,
Ga,Ka){Ba=S[Ka].update;var $a=Ba.length;Ka!=wa&&(wa=Ka,la=0);for(Ga>=la&&(la=Ga+1);!(Ga=Ba[la])&&++la<$a;);return Ga}}function ha(S,la,wa){function Ba(){var pb=this[$a];pb&&(this.removeEventListener(S,pb,pb.$),delete this[$a])}function Ga(){var pb=Za(la,ag(arguments));Ba.call(this);this.addEventListener(S,this[$a]=pb,pb.$=wa);pb._=la}function Ka(){var pb=new RegExp("^__on([^.]+)"+Jb.requote(S)+"$"),vb,Db;for(Db in this)if(vb=Db.match(pb)){var Lb=this[Db];this.removeEventListener(vb[1],Lb,Lb.$);delete this[Db]}}
var $a="__on"+S,Sa=S.indexOf("."),Za=na;0<Sa&&(S=S.slice(0,Sa));var kb=jh.get(S);kb&&(S=kb,Za=pa);return Sa?la?Ga:Ba:la?x:Ka}function na(S,la){return function(wa){var Ba=Jb.event;Jb.event=wa;la[0]=this.__data__;try{S.apply(this,la)}finally{Jb.event=Ba}}}function pa(S,la){var wa=na(S,la);return function(Ba){var Ga=Ba.relatedTarget;Ga&&(Ga===this||Ga.compareDocumentPosition(this)&8)||wa.call(this,Ba)}}function ra(S){var la=".dragsuppress-"+ ++hj,wa="click"+la,Ba=Jb.select(m(S)).on("touchmove"+la,t).on("dragstart"+
la,t).on("selectstart"+la,t);null==tg&&(tg="onselectstart"in S?!1:D(S.style,"userSelect"));if(tg){var Ga=(S&&(S.ownerDocument||S.document||S).documentElement).style,Ka=Ga[tg];Ga[tg]="none"}return function($a){Ba.on(la,null);tg&&(Ga[tg]=Ka);if($a){var Sa=function(){Ba.on(wa,null)};Ba.on(wa,function(){t();Sa()},!0);setTimeout(Sa,0)}}}function ta(S,la){la.changedTouches&&(la=la.changedTouches[0]);var wa=S.ownerSVGElement||S;if(wa.createSVGPoint){var Ba=wa.createSVGPoint();if(0>ki&&(wa=m(S),wa.scrollX||
wa.scrollY)){wa=Jb.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ga=wa[0][0].getScreenCTM();ki=!(Ga.f||Ga.e);wa.remove()}ki?(Ba.x=la.pageX,Ba.y=la.pageY):(Ba.x=la.clientX,Ba.y=la.clientY);Ba=Ba.matrixTransform(S.getScreenCTM().inverse());return[Ba.x,Ba.y]}Ba=S.getBoundingClientRect();return[la.clientX-Ba.left-S.clientLeft,la.clientY-Ba.top-S.clientTop]}function oa(){return Jb.event.changedTouches[0].identifier}function ua(S,
la,wa){return(la[0]-S[0])*(wa[1]-S[1])-(la[1]-S[1])*(wa[0]-S[0])}function ka(S){return 1<S?0:-1>S?fe:Math.acos(S)}function sa(S){return 1<S?bf:-1>S?-bf:Math.asin(S)}function ya(S){return((S=Math.exp(S))+1/S)/2}function qa(S){return(S=Math.sin(S/2))*S}function xa(){}function Ca(S,la,wa){return this instanceof Ca?void(this.h=+S,this.s=+la,this.l=+wa):2>arguments.length?S instanceof Ca?new Ca(S.h,S.s,S.l):fb(""+S,bb,Ca):new Ca(S,la,wa)}function Ja(S,la,wa){function Ba($a){360<$a?$a-=360:0>$a&&($a+=360);
return 60>$a?Ka+(Ga-Ka)*$a/60:180>$a?Ga:240>$a?Ka+(Ga-Ka)*(240-$a)/60:Ka}S=isNaN(S)?0:0>(S%=360)?S+360:S;la=isNaN(la)?0:0>la?0:1<la?1:la;wa=0>wa?0:1<wa?1:wa;var Ga=.5>=wa?wa*(1+la):wa+la-wa*la;var Ka=2*wa-Ga;return new Fa(Math.round(255*Ba(S+120)),Math.round(255*Ba(S)),Math.round(255*Ba(S-120)))}function eb(S,la,wa){return this instanceof eb?void(this.h=+S,this.c=+la,this.l=+wa):2>arguments.length?S instanceof eb?new eb(S.h,S.c,S.l):S instanceof Wa?Ia(S.l,S.a,S.b):Ia((S=Pa((S=Jb.rgb(S)).r,S.g,S.b)).l,
S.a,S.b):new eb(S,la,wa)}function Ra(S,la,wa){isNaN(S)&&(S=0);isNaN(la)&&(la=0);return new Wa(wa,Math.cos(S*=le)*la,Math.sin(S)*la)}function Wa(S,la,wa){return this instanceof Wa?void(this.l=+S,this.a=+la,this.b=+wa):2>arguments.length?S instanceof Wa?new Wa(S.l,S.a,S.b):S instanceof eb?Ra(S.h,S.c,S.l):Pa((S=Fa(S)).r,S.g,S.b):new Wa(S,la,wa)}function Ea(S,la,wa){S=(S+16)/116;wa=S-wa/200;la=Qa(S+la/500)*Id;S=Qa(S)*Sj;wa=Qa(wa)*Ef;return new Fa(hb(3.2404542*la-1.5371385*S-.4985314*wa),hb(-.969266*la+
1.8760108*S+.041556*wa),hb(.0556434*la-.2040259*S+1.0572252*wa))}function Ia(S,la,wa){return 0<S?new eb(Math.atan2(wa,la)*Xe,Math.sqrt(la*la+wa*wa),S):new eb(NaN,NaN,S)}function Qa(S){return.206893034<S?S*S*S:(S-4/29)/7.787037}function lb(S){return.008856<S?Math.pow(S,1/3):7.787037*S+4/29}function hb(S){return Math.round(255*(.00304>=S?12.92*S:1.055*Math.pow(S,1/2.4)-.055))}function Fa(S,la,wa){return this instanceof Fa?void(this.r=~~S,this.g=~~la,this.b=~~wa):2>arguments.length?S instanceof Fa?new Fa(S.r,
S.g,S.b):fb(""+S,Fa,Ja):new Fa(S,la,wa)}function La(S){return new Fa(S>>16,S>>8&255,S&255)+""}function Oa(S){return 16>S?"0"+Math.max(0,S).toString(16):Math.min(255,S).toString(16)}function fb(S,la,wa){var Ba=0,Ga=0,Ka=0,$a;if($a=/([a-z]+)\((.*)\)/.exec(S=S.toLowerCase())){var Sa=$a[2].split(",");switch($a[1]){case "hsl":return wa(parseFloat(Sa[0]),parseFloat(Sa[1])/100,parseFloat(Sa[2])/100);case "rgb":return la(Ya(Sa[0]),Ya(Sa[1]),Ya(Sa[2]))}}if(wa=Li.get(S))return la(wa.r,wa.g,wa.b);null==S||"#"!==
S.charAt(0)||isNaN(wa=parseInt(S.slice(1),16))||(4===S.length?(Ba=(wa&3840)>>4,Ba|=Ba>>4,Ga=wa&240,Ga|=Ga>>4,Ka=wa&15,Ka|=Ka<<4):7===S.length&&(Ba=(wa&16711680)>>16,Ga=(wa&65280)>>8,Ka=wa&255));return la(Ba,Ga,Ka)}function bb(S,la,wa){var Ba=Math.min(S/=255,la/=255,wa/=255),Ga=Math.max(S,la,wa),Ka=Ga-Ba,$a=(Ga+Ba)/2;Ka?(Ba=.5>$a?Ka/(Ga+Ba):Ka/(2-Ga-Ba),S=60*(S==Ga?(la-wa)/Ka+(la<wa?6:0):la==Ga?(wa-S)/Ka+2:(S-la)/Ka+4)):(S=NaN,Ba=0<$a&&1>$a?0:S);return new Ca(S,Ba,$a)}function Pa(S,la,wa){S=Ta(S);
la=Ta(la);wa=Ta(wa);var Ba=lb((.4124564*S+.3575761*la+.1804375*wa)/Id),Ga=lb((.2126729*S+.7151522*la+.072175*wa)/Sj);S=lb((.0193339*S+.119192*la+.9503041*wa)/Ef);return Wa(116*Ga-16,500*(Ba-Ga),200*(Ga-S))}function Ta(S){return.04045>=(S/=255)?S/12.92:Math.pow((S+.055)/1.055,2.4)}function Ya(S){var la=parseFloat(S);return"%"===S.charAt(S.length-1)?Math.round(2.55*la):la}function nb(S){return"function"===typeof S?S:function(){return S}}function Da(S){return function(la,wa,Ba){2===arguments.length&&
"function"===typeof wa&&(Ba=wa,wa=null);return Ha(la,wa,S,Ba)}}function Ha(S,la,wa,Ba){function Ga(){var pb=Za.status,vb;if(vb=!pb)vb=(vb=Za.responseType)&&"text"!==vb?Za.response:Za.responseText;if(vb||200<=pb&&300>pb||304===pb){try{var Db=wa.call(Ka,Za)}catch(Lb){$a.error.call(Ka,Lb);return}$a.load.call(Ka,Db)}else $a.error.call(Ka,Za)}var Ka={},$a=Jb.dispatch("beforesend","progress","load","error"),Sa={},Za=new XMLHttpRequest,kb=null;!this.XDomainRequest||"withCredentials"in Za||!/^(http(s)?:)?\/\//.test(S)||
(Za=new XDomainRequest);"onload"in Za?Za.onload=Za.onerror=Ga:Za.onreadystatechange=function(){3<Za.readyState&&Ga()};Za.onprogress=function(pb){var vb=Jb.event;Jb.event=pb;try{$a.progress.call(Ka,Za)}finally{Jb.event=vb}};Ka.header=function(pb,vb){pb=(pb+"").toLowerCase();if(2>arguments.length)return Sa[pb];null==vb?delete Sa[pb]:Sa[pb]=vb+"";return Ka};Ka.mimeType=function(pb){if(!arguments.length)return la;la=null==pb?null:pb+"";return Ka};Ka.responseType=function(pb){if(!arguments.length)return kb;
kb=pb;return Ka};Ka.response=function(pb){wa=pb;return Ka};["get","post"].forEach(function(pb){Ka[pb]=function(){return Ka.send.apply(Ka,[pb].concat(ag(arguments)))}});Ka.send=function(pb,vb,Db){2===arguments.length&&"function"===typeof vb&&(Db=vb,vb=null);Za.open(pb,S,!0);null==la||"accept"in Sa||(Sa.accept=la+",*/*");if(Za.setRequestHeader)for(var Lb in Sa)Za.setRequestHeader(Lb,Sa[Lb]);null!=la&&Za.overrideMimeType&&Za.overrideMimeType(la);null!=kb&&(Za.responseType=kb);if(null!=Db)Ka.on("error",
Db).on("load",function(Ob){Db(null,Ob)});$a.beforesend.call(Ka,Za);Za.send(null==vb?null:vb);return Ka};Ka.abort=function(){Za.abort();return Ka};Jb.rebind(Ka,$a,"on");return null==Ba?Ka:Ka.get(ab(Ba))}function ab(S){return 1===S.length?function(la,wa){S(null==la?wa:null)}:S}function ib(S,la,wa){var Ba=arguments.length;2>Ba&&(la=0);3>Ba&&(wa=Date.now());Ba={c:S,t:wa+la,n:null};Pf?Pf.n=Ba:ij=Ba;Pf=Ba;Pe||(kh=clearTimeout(kh),Pe=1,Mi(ob));return Ba}function ob(){var S=db();S=gb()-S;24<S?(isFinite(S)&&
(clearTimeout(kh),kh=setTimeout(ob,S)),Pe=0):(Pe=1,Mi(ob))}function db(){for(var S=Date.now(),la=ij;la;)S>=la.t&&la.c(S-la.t)&&(la.c=null),la=la.n;return S}function gb(){for(var S,la=ij,wa=Infinity;la;)la.c?(la.t<wa&&(wa=la.t),la=(S=la).n):la=S?S.n=la.n:ij=la.n;Pf=S;return wa}function rb(S,la){return la-(S?Math.ceil(Math.log(S)/Math.LN10):1)}function Bb(S){var la=S.decimal,wa=S.thousands,Ba=S.grouping,Ga=S.currency,Ka=Ba&&wa?function($a,Sa){for(var Za=$a.length,kb=[],pb=0,vb=Ba[0],Db=0;0<Za&&0<vb;){Db+
vb+1>Sa&&(vb=Math.max(1,Sa-Db));kb.push($a.substring(Za-=vb,Za+vb));if((Db+=vb+1)>Sa)break;vb=Ba[pb=(pb+1)%Ba.length]}return kb.reverse().join(wa)}:w;return function($a){$a=Tj.exec($a);var Sa=$a[1]||" ",Za=$a[2]||"\x3e",kb=$a[3]||"-",pb=$a[4]||"",vb=$a[5],Db=+$a[6],Lb=$a[7],Ob=$a[8],Yb=$a[9],dc=1,mc="",Fc="",Pc=!1,Oc=!0;Ob&&(Ob=+Ob.substring(1));if(vb||"0"===Sa&&"\x3d"===Za)vb=Sa="0",Za="\x3d";switch(Yb){case "n":Lb=!0;Yb="g";break;case "%":dc=100;Fc="%";Yb="f";break;case "p":dc=100;Fc="%";Yb="r";
break;case "b":case "o":case "x":case "X":"#"===pb&&(mc="0"+Yb.toLowerCase());case "c":Oc=!1;case "d":Pc=!0;Ob=0;break;case "s":dc=-1,Yb="r"}"$"===pb&&(mc=Ga[0],Fc=Ga[1]);"r"!=Yb||Ob||(Yb="g");if(null!=Ob)if("g"==Yb)Ob=Math.max(1,Math.min(21,Ob));else if("e"==Yb||"f"==Yb)Ob=Math.max(0,Math.min(20,Ob));Yb=Uj.get(Yb)||Qb;var Wc=vb&&Lb;return function(Pb){var jc=Fc;if(Pc&&Pb%1)return"";var Hc=0>Pb||0===Pb&&0>1/Pb?(Pb=-Pb,"-"):"-"===kb?"":kb;0>dc?(jc=Jb.formatPrefix(Pb,Ob),Pb=jc.scale(Pb),jc=jc.symbol+
Fc):Pb*=dc;Pb=Yb(Pb,Ob);var ad=Pb.lastIndexOf(".");if(0>ad)if(ad=Oc?Pb.lastIndexOf("e"):-1,0>ad){var jd=Pb;Pb=""}else jd=Pb.substring(0,ad),Pb=Pb.substring(ad);else jd=Pb.substring(0,ad),Pb=la+Pb.substring(ad+1);!vb&&Lb&&(jd=Ka(jd,Infinity));ad=mc.length+jd.length+Pb.length+(Wc?0:Hc.length);var hd=ad<Db?Array(ad=Db-ad+1).join(Sa):"";Wc&&(jd=Ka(hd+jd,hd.length?Db-Pb.length:Infinity));Hc+=mc;Pb=jd+Pb;return("\x3c"===Za?Hc+Pb+hd:"\x3e"===Za?hd+Hc+Pb:"^"===Za?hd.substring(0,ad>>=1)+Hc+Pb+hd.substring(ad):
Hc+(Wc?Pb:hd+Pb))+jc}}}function Qb(S){return S+""}function gc(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function tc(S,la,wa){function Ba(Za){var kb=S(Za),pb=Ka(kb,1);return Za-kb<pb-Za?kb:pb}function Ga(Za){la(Za=S(new Te(Za-1)),1);return Za}function Ka(Za,kb){la(Za=new Te(+Za),kb);return Za}function $a(Za,kb,pb){Za=Ga(Za);var vb=[];if(1<pb)for(;Za<kb;)wa(Za)%pb||vb.push(new Date(+Za)),la(Za,1);else for(;Za<kb;)vb.push(new Date(+Za)),la(Za,1);return vb}S.floor=
S;S.round=Ba;S.ceil=Ga;S.offset=Ka;S.range=$a;var Sa=S.utc=Ac(S);Sa.floor=Sa;Sa.round=Ac(Ba);Sa.ceil=Ac(Ga);Sa.offset=Ac(Ka);Sa.range=function(Za,kb,pb){try{Te=gc;var vb=new gc;vb._=Za;return $a(vb,kb,pb)}finally{Te=Date}};return S}function Ac(S){return function(la,wa){try{Te=gc;var Ba=new gc;Ba._=la;return S(Ba,wa)._}finally{Te=Date}}}function Uc(S){function la(Pb){function jc(ad){for(var jd=[],hd=-1,Zc=0,Ed,$d;++hd<Hc;)if(37===Pb.charCodeAt(hd)){jd.push(Pb.slice(Zc,hd));null!=(Ed=Vd[Zc=Pb.charAt(++hd)])&&
(Zc=Pb.charAt(++hd));if($d=Oc[Zc])Zc=$d(ad,null==Ed?"e"===Zc?" ":"0":Ed);jd.push(Zc);Zc=hd+1}jd.push(Pb.slice(Zc,hd));return jd.join("")}var Hc=Pb.length;jc.parse=function(ad){var jd={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(wa(jd,Pb,ad,0)!=ad.length)return null;"p"in jd&&(jd.H=jd.H%12+12*jd.p);ad=null!=jd.Z&&Te!==gc;var hd=new (ad?gc:Te);"j"in jd?hd.setFullYear(jd.y,0,jd.j):"W"in jd||"U"in jd?("w"in jd||(jd.w="W"in jd?1:0),hd.setFullYear(jd.y,0,1),hd.setFullYear(jd.y,0,"W"in jd?(jd.w+6)%7+7*jd.W-
(hd.getDay()+5)%7:jd.w+7*jd.U-(hd.getDay()+6)%7)):hd.setFullYear(jd.y,jd.m,jd.d);hd.setHours(jd.H+(jd.Z/100|0),jd.M+jd.Z%100,jd.S,jd.L);return ad?hd._:hd};jc.toString=function(){return Pb};return jc}function wa(Pb,jc,Hc,ad){for(var jd,hd=0,Zc=jc.length,Ed=Hc.length;hd<Zc;){if(ad>=Ed)return-1;jd=jc.charCodeAt(hd++);if(37===jd){if(jd=jc.charAt(hd++),jd=Wc[jd in Vd?jc.charAt(hd++):jd],!jd||0>(ad=jd(Pb,Hc,ad)))return-1}else if(jd!=Hc.charCodeAt(ad++))return-1}return ad}var Ba=S.dateTime,Ga=S.date,Ka=
S.time,$a=S.periods,Sa=S.days,Za=S.shortDays,kb=S.months,pb=S.shortMonths;la.utc=function(Pb){function jc(ad){try{Te=gc;var jd=new Te;jd._=ad;return Hc(jd)}finally{Te=Date}}var Hc=la(Pb);jc.parse=function(ad){try{Te=gc;var jd=Hc.parse(ad);return jd&&jd._}finally{Te=Date}};jc.toString=Hc.toString;return jc};la.multi=la.utc.multi=Gb;var vb=Jb.map(),Db=gd(Sa),Lb=Xc(Sa),Ob=gd(Za),Yb=Xc(Za),dc=gd(kb),mc=Xc(kb),Fc=gd(pb),Pc=Xc(pb);$a.forEach(function(Pb,jc){vb.set(Pb.toLowerCase(),jc)});var Oc={a:function(Pb){return Za[Pb.getDay()]},
A:function(Pb){return Sa[Pb.getDay()]},b:function(Pb){return pb[Pb.getMonth()]},B:function(Pb){return kb[Pb.getMonth()]},c:la(Ba),d:function(Pb,jc){return Nc(Pb.getDate(),jc,2)},e:function(Pb,jc){return Nc(Pb.getDate(),jc,2)},H:function(Pb,jc){return Nc(Pb.getHours(),jc,2)},I:function(Pb,jc){return Nc(Pb.getHours()%12||12,jc,2)},j:function(Pb,jc){return Nc(1+Jd.dayOfYear(Pb),jc,3)},L:function(Pb,jc){return Nc(Pb.getMilliseconds(),jc,3)},m:function(Pb,jc){return Nc(Pb.getMonth()+1,jc,2)},M:function(Pb,
jc){return Nc(Pb.getMinutes(),jc,2)},p:function(Pb){return $a[+(12<=Pb.getHours())]},S:function(Pb,jc){return Nc(Pb.getSeconds(),jc,2)},U:function(Pb,jc){return Nc(Jd.sundayOfYear(Pb),jc,2)},w:function(Pb){return Pb.getDay()},W:function(Pb,jc){return Nc(Jd.mondayOfYear(Pb),jc,2)},x:la(Ga),X:la(Ka),y:function(Pb,jc){return Nc(Pb.getFullYear()%100,jc,2)},Y:function(Pb,jc){return Nc(Pb.getFullYear()%1E4,jc,4)},Z:Tb,"%":function(){return"%"}},Wc={a:function(Pb,jc,Hc){Ob.lastIndex=0;return(jc=Ob.exec(jc.slice(Hc)))?
(Pb.w=Yb.get(jc[0].toLowerCase()),Hc+jc[0].length):-1},A:function(Pb,jc,Hc){Db.lastIndex=0;return(jc=Db.exec(jc.slice(Hc)))?(Pb.w=Lb.get(jc[0].toLowerCase()),Hc+jc[0].length):-1},b:function(Pb,jc,Hc){Fc.lastIndex=0;return(jc=Fc.exec(jc.slice(Hc)))?(Pb.m=Pc.get(jc[0].toLowerCase()),Hc+jc[0].length):-1},B:function(Pb,jc,Hc){dc.lastIndex=0;return(jc=dc.exec(jc.slice(Hc)))?(Pb.m=mc.get(jc[0].toLowerCase()),Hc+jc[0].length):-1},c:function(Pb,jc,Hc){return wa(Pb,Oc.c.toString(),jc,Hc)},d:sb,e:sb,H:kc,I:kc,
j:xb,L:ac,m:fd,M:nc,p:function(Pb,jc,Hc){jc=vb.get(jc.slice(Hc,Hc+=2).toLowerCase());return null==jc?-1:(Pb.p=jc,Hc)},S:Kc,U:tb,w:ed,W:Xb,x:function(Pb,jc,Hc){return wa(Pb,Oc.x.toString(),jc,Hc)},X:function(Pb,jc,Hc){return wa(Pb,Oc.X.toString(),jc,Hc)},y:Mc,Y:uc,Z:Rc,"%":yb};return la}function Nc(S,la,wa){var Ba=0>S?"-":"";S=(Ba?-S:S)+"";var Ga=S.length;return Ba+(Ga<wa?Array(wa-Ga+1).join(la)+S:S)}function gd(S){return new RegExp("^(?:"+S.map(Jb.requote).join("|")+")","i")}function Xc(S){for(var la=
new p,wa=-1,Ba=S.length;++wa<Ba;)la.set(S[wa].toLowerCase(),wa);return la}function ed(S,la,wa){Kd.lastIndex=0;return(la=Kd.exec(la.slice(wa,wa+1)))?(S.w=+la[0],wa+la[0].length):-1}function tb(S,la,wa){Kd.lastIndex=0;return(la=Kd.exec(la.slice(wa)))?(S.U=+la[0],wa+la[0].length):-1}function Xb(S,la,wa){Kd.lastIndex=0;return(la=Kd.exec(la.slice(wa)))?(S.W=+la[0],wa+la[0].length):-1}function uc(S,la,wa){Kd.lastIndex=0;return(la=Kd.exec(la.slice(wa,wa+4)))?(S.y=+la[0],wa+la[0].length):-1}function Mc(S,
la,wa){Kd.lastIndex=0;if(la=Kd.exec(la.slice(wa,wa+2))){var Ba=+la[0];S=(S.y=Ba+(68<Ba?1900:2E3),wa+la[0].length)}else S=-1;return S}function Rc(S,la,wa){return/^[+-]\d{4}$/.test(la=la.slice(wa,wa+5))?(S.Z=-la,wa+5):-1}function fd(S,la,wa){Kd.lastIndex=0;return(la=Kd.exec(la.slice(wa,wa+2)))?(S.m=la[0]-1,wa+la[0].length):-1}function sb(S,la,wa){Kd.lastIndex=0;return(la=Kd.exec(la.slice(wa,wa+2)))?(S.d=+la[0],wa+la[0].length):-1}function xb(S,la,wa){Kd.lastIndex=0;return(la=Kd.exec(la.slice(wa,wa+
3)))?(S.j=+la[0],wa+la[0].length):-1}function kc(S,la,wa){Kd.lastIndex=0;return(la=Kd.exec(la.slice(wa,wa+2)))?(S.H=+la[0],wa+la[0].length):-1}function nc(S,la,wa){Kd.lastIndex=0;return(la=Kd.exec(la.slice(wa,wa+2)))?(S.M=+la[0],wa+la[0].length):-1}function Kc(S,la,wa){Kd.lastIndex=0;return(la=Kd.exec(la.slice(wa,wa+2)))?(S.S=+la[0],wa+la[0].length):-1}function ac(S,la,wa){Kd.lastIndex=0;return(la=Kd.exec(la.slice(wa,wa+3)))?(S.L=+la[0],wa+la[0].length):-1}function Tb(S){var la=S.getTimezoneOffset();
S=0<la?"-":"+";var wa=ge(la)/60|0;la=ge(la)%60;return S+Nc(wa,"0",2)+Nc(la,"0",2)}function yb(S,la,wa){jj.lastIndex=0;return(S=jj.exec(la.slice(wa,wa+1)))?wa+S[0].length:-1}function Gb(S){for(var la=S.length,wa=-1;++wa<la;)S[wa][0]=this(S[wa][0]);return function(Ba){for(var Ga=0,Ka=S[Ga];!Ka[1](Ba);)Ka=S[++Ga];return Ka[0](Ba)}}function Eb(){}function Vb(S,la,wa){var Ba=wa.s=S+la,Ga=Ba-S;wa.t=S-(Ba-Ga)+(la-Ga)}function Zb(S,la){if(S&&Fg.hasOwnProperty(S.type))Fg[S.type](S,la)}function Dc(S,la,wa){var Ba=
-1;wa=S.length-wa;for(la.lineStart();++Ba<wa;){var Ga=S[Ba];la.point(Ga[0],Ga[1],Ga[2])}la.lineEnd()}function ic(S,la){var wa=-1,Ba=S.length;for(la.polygonStart();++wa<Ba;)Dc(S[wa],la,1);la.polygonEnd()}function Bc(){function S($a,Sa){$a*=le;Sa=Sa*le/2+fe/4;var Za=$a-Ba,kb=0<=Za?1:-1;Za*=kb;var pb=Math.cos(Sa);Sa=Math.sin(Sa);var vb=Ka*Sa;Rg.add(Math.atan2(vb*kb*Math.sin(Za),Ga*pb+vb*Math.cos(Za)));Ba=$a;Ga=pb;Ka=Sa}var la,wa,Ba,Ga,Ka;ye.point=function($a,Sa){ye.point=S;Ba=(la=$a)*le;Ga=Math.cos(Sa=
(wa=Sa)*le/2+fe/4);Ka=Math.sin(Sa)};ye.lineEnd=function(){S(la,wa)}}function Sc(S){var la=S[0];S=S[1];var wa=Math.cos(S);return[wa*Math.cos(la),wa*Math.sin(la),Math.sin(S)]}function Ic(S,la){return S[0]*la[0]+S[1]*la[1]+S[2]*la[2]}function $c(S,la){return[S[1]*la[2]-S[2]*la[1],S[2]*la[0]-S[0]*la[2],S[0]*la[1]-S[1]*la[0]]}function nd(S,la){S[0]+=la[0];S[1]+=la[1];S[2]+=la[2]}function Yc(S,la){return[S[0]*la,S[1]*la,S[2]*la]}function rd(S){var la=Math.sqrt(S[0]*S[0]+S[1]*S[1]+S[2]*S[2]);S[0]/=la;S[1]/=
la;S[2]/=la}function wd(S){return[Math.atan2(S[1],S[0]),sa(S[2])]}function cd(S,la){return 1E-6>ge(S[0]-la[0])&&1E-6>ge(S[1]-la[1])}function Jc(S,la){S*=le;var wa=Math.cos(la*=le);sd(wa*Math.cos(S),wa*Math.sin(S),Math.sin(la))}function sd(S,la,wa){++lh;mh+=(S-mh)/lh;nh+=(la-nh)/lh;Qf+=(wa-Qf)/lh}function ud(){function S(Ga,Ka){Ga*=le;var $a=Math.cos(Ka*=le),Sa=$a*Math.cos(Ga);Ga=$a*Math.sin(Ga);Ka=Math.sin(Ka);var Za=Math.atan2(Math.sqrt((Za=wa*Ka-Ba*Ga)*Za+(Za=Ba*Sa-la*Ka)*Za+(Za=la*Ga-wa*Sa)*Za),
la*Sa+wa*Ga+Ba*Ka);Ni+=Za;Sg+=Za*(la+(la=Sa));Tg+=Za*(wa+(wa=Ga));ug+=Za*(Ba+(Ba=Ka));sd(la,wa,Ba)}var la,wa,Ba;gg.point=function(Ga,Ka){Ga*=le;var $a=Math.cos(Ka*=le);la=$a*Math.cos(Ga);wa=$a*Math.sin(Ga);Ba=Math.sin(Ka);gg.point=S;sd(la,wa,Ba)}}function yd(){gg.point=Jc}function cb(){function S($a,Sa){$a*=le;var Za=Math.cos(Sa*=le),kb=Za*Math.cos($a);$a=Za*Math.sin($a);Sa=Math.sin(Sa);Za=Ga*Sa-Ka*$a;var pb=Ka*kb-Ba*Sa,vb=Ba*$a-Ga*kb,Db=Math.sqrt(Za*Za+pb*pb+vb*vb),Lb=Ba*kb+Ga*$a+Ka*Sa,Ob=Db&&-ka(Lb)/
Db;Db=Math.atan2(Db,Lb);Fh+=Ob*Za;oh+=Ob*pb;Ug+=Ob*vb;Ni+=Db;Sg+=Db*(Ba+(Ba=kb));Tg+=Db*(Ga+(Ga=$a));ug+=Db*(Ka+(Ka=Sa));sd(Ba,Ga,Ka)}var la,wa,Ba,Ga,Ka;gg.point=function($a,Sa){la=$a;wa=Sa;gg.point=S;$a*=le;var Za=Math.cos(Sa*=le);Ba=Za*Math.cos($a);Ga=Za*Math.sin($a);Ka=Math.sin(Sa);sd(Ba,Ga,Ka)};gg.lineEnd=function(){S(la,wa);gg.lineEnd=yd;gg.point=Jc}}function je(S,la){function wa(Ba,Ga){return Ba=S(Ba,Ga),la(Ba[0],Ba[1])}S.invert&&la.invert&&(wa.invert=function(Ba,Ga){return Ba=la.invert(Ba,
Ga),Ba&&S.invert(Ba[0],Ba[1])});return wa}function xd(){return!0}function be(S,la,wa,Ba,Ga){var Ka=[],$a=[];S.forEach(function(vb){if(!(0>=(Db=vb.length-1))){var Db,Lb=vb[0],Ob=vb[Db];if(cd(Lb,Ob)){Ga.lineStart();for(Ob=0;Ob<Db;++Ob)Ga.point((Lb=vb[Ob])[0],Lb[1]);Ga.lineEnd()}else Db=new Hd(Lb,vb,null,!0),Lb=new Hd(Lb,null,Db,!1),Db.o=Lb,Ka.push(Db),$a.push(Lb),Db=new Hd(Ob,vb,null,!1),Lb=new Hd(Ob,null,Db,!0),Db.o=Lb,Ka.push(Db),$a.push(Lb)}});$a.sort(la);qe(Ka);qe($a);if(Ka.length){S=0;la=wa;for(wa=
$a.length;S<wa;++S)$a[S].e=la=!la;la=Ka[0];for(var Sa,Za;;){for(var kb=la,pb=!0;kb.v;)if((kb=kb.n)===la)return;Sa=kb.z;Ga.lineStart();do{kb.v=kb.o.v=!0;if(kb.e){if(pb)for(S=0,wa=Sa.length;S<wa;++S)Ga.point((Za=Sa[S])[0],Za[1]);else Ba(kb.x,kb.n.x,1,Ga);kb=kb.n}else{if(pb)for(Sa=kb.p.z,S=Sa.length-1;0<=S;--S)Ga.point((Za=Sa[S])[0],Za[1]);else Ba(kb.x,kb.p.x,-1,Ga);kb=kb.p}kb=kb.o;Sa=kb.z;pb=!pb}while(!kb.v);Ga.lineEnd()}}}function qe(S){if(la=S.length){for(var la,wa=0,Ba=S[0],Ga;++wa<la;)Ba.n=Ga=S[wa],
Ga.p=Ba,Ba=Ga;Ba.n=Ga=S[0];Ga.p=Ba}}function Hd(S,la,wa,Ba){this.x=S;this.z=la;this.o=wa;this.e=Ba;this.v=!1;this.n=this.p=null}function ke(S,la,wa,Ba){return function(Ga,Ka){function $a(Pb,jc){var Hc=Ga(Pb,jc);S(Pb=Hc[0],jc=Hc[1])&&Ka.point(Pb,jc)}function Sa(Pb,jc){Pb=Ga(Pb,jc);Lb.point(Pb[0],Pb[1])}function Za(){Yb.point=Sa;Lb.lineStart()}function kb(){Yb.point=$a;Lb.lineEnd()}function pb(Pb,jc){Wc.push([Pb,jc]);Pb=Ga(Pb,jc);Fc.point(Pb[0],Pb[1])}function vb(){Fc.lineStart();Wc=[]}function Db(){pb(Wc[0][0],
Wc[0][1]);Fc.lineEnd();var Pb=Fc.clean(),jc=mc.buffer(),Hc=jc.length;Wc.pop();Oc.push(Wc);Wc=null;if(Hc)if(Pb&1){Pb=jc[0];Hc=Pb.length-1;jc=-1;var ad;if(0<Hc){Pc||(Ka.polygonStart(),Pc=!0);for(Ka.lineStart();++jc<Hc;)Ka.point((ad=Pb[jc])[0],ad[1]);Ka.lineEnd()}}else 1<Hc&&Pb&2&&jc.push(jc.pop().concat(jc.shift())),dc.push(jc.filter(Ge))}var Lb=la(Ka),Ob=Ga.invert(Ba[0],Ba[1]),Yb={point:$a,lineStart:Za,lineEnd:kb,polygonStart:function(){Yb.point=pb;Yb.lineStart=vb;Yb.lineEnd=Db;dc=[];Oc=[]},polygonEnd:function(){Yb.point=
$a;Yb.lineStart=Za;Yb.lineEnd=kb;dc=Jb.merge(dc);var Pb=Ob;var jc=Oc;var Hc=Pb[0],ad=Pb[1],jd=[Math.sin(Hc),-Math.cos(Hc),0],hd=0,Zc=0;Rg.reset();for(var Ed=0,$d=jc.length;Ed<$d;++Ed){var he=jc[Ed],ie=he.length;if(ie){var oe=he[0],Qd=oe[0];Pb=oe[1]/2+fe/4;for(var Le=Math.sin(Pb),uf=Math.cos(Pb),Ye=1;;){Ye===ie&&(Ye=0);Pb=he[Ye];var Gh=Pb[0],li=Pb[1]/2+fe/4,kj=Math.sin(li);li=Math.cos(li);var ph=Gh-Qd,lj=0<=ph?1:-1,Ue=lj*ph,Ne=Ue>fe;Le*=kj;Rg.add(Math.atan2(Le*lj*Math.sin(Ue),uf*li+Le*Math.cos(Ue)));
hd+=Ne?ph+lj*Ff:ph;Ne^Qd>=Hc^Gh>=Hc&&(oe=$c(Sc(oe),Sc(Pb)),rd(oe),Qd=$c(jd,oe),rd(Qd),Qd=(Ne^0<=ph?-1:1)*sa(Qd[2]),ad>Qd||ad===Qd&&(oe[0]||oe[1]))&&(Zc+=Ne^0<=ph?1:-1);if(!Ye++)break;Qd=Gh;Le=kj;uf=li;oe=Pb}}}jc=(-1E-6>hd||1E-6>hd&&-1E-6>Rg)^Zc&1;dc.length?(Pc||(Ka.polygonStart(),Pc=!0),be(dc,Wd,jc,wa,Ka)):jc&&(Pc||(Ka.polygonStart(),Pc=!0),Ka.lineStart(),wa(null,null,1,Ka),Ka.lineEnd());Pc&&(Ka.polygonEnd(),Pc=!1);dc=Oc=null},sphere:function(){Ka.polygonStart();Ka.lineStart();wa(null,null,1,Ka);
Ka.lineEnd();Ka.polygonEnd()}},dc,mc=Fd(),Fc=la(mc),Pc=!1,Oc,Wc;return Yb}}function Ge(S){return 1<S.length}function Fd(){var S=[],la;return{lineStart:function(){S.push(la=[])},point:function(wa,Ba){la.push([wa,Ba])},lineEnd:x,buffer:function(){var wa=S;S=[];la=null;return wa},rejoin:function(){1<S.length&&S.push(S.pop().concat(S.shift()))}}}function Wd(S,la){return(0>(S=S.x)[0]?S[1]-bf-1E-6:bf-S[1])-(0>(la=la.x)[0]?la[1]-bf-1E-6:bf-la[1])}function Sd(S){function la(Za,kb){return Math.cos(Za)*Math.cos(kb)>
Ga}function wa(Za,kb,pb){var vb=Sc(Za),Db=Sc(kb),Lb=[1,0,0];Db=$c(vb,Db);var Ob=Ic(Db,Db);vb=Db[0];var Yb=Ob-vb*vb;if(!Yb)return!pb&&Za;Ob=Ga*Ob/Yb;Yb=-Ga*vb/Yb;vb=$c(Lb,Db);Lb=Yc(Lb,Ob);Db=Yc(Db,Yb);nd(Lb,Db);Db=Ic(Lb,vb);Ob=Ic(vb,vb);Yb=Db*Db-Ob*(Ic(Lb,Lb)-1);if(!(0>Yb)){var dc=Math.sqrt(Yb);Yb=Yc(vb,(-Db-dc)/Ob);nd(Yb,Lb);Yb=wd(Yb);if(!pb)return Yb;pb=Za[0];var mc=kb[0];Za=Za[1];kb=kb[1];if(mc<pb){var Fc=pb;pb=mc;mc=Fc}var Pc=mc-pb,Oc=1E-6>ge(Pc-fe);!Oc&&kb<Za&&(Fc=Za,Za=kb,kb=Fc);if(Oc||1E-6>
Pc?Oc?0<Za+kb^Yb[1]<(1E-6>ge(Yb[0]-pb)?Za:kb):Za<=Yb[1]&&Yb[1]<=kb:Pc>fe^(pb<=Yb[0]&&Yb[0]<=mc))return kb=Yc(vb,(-Db+dc)/Ob),nd(kb,Lb),[Yb,wd(kb)]}}function Ba(Za,kb){var pb=Ka?S:fe-S,vb=0;Za<-pb?vb|=1:Za>pb&&(vb|=2);kb<-pb?vb|=4:kb>pb&&(vb|=8);return vb}var Ga=Math.cos(S),Ka=0<Ga,$a=1E-6<ge(Ga),Sa=oc(S,6*le);return ke(la,function(Za){var kb,pb,vb,Db,Lb;return{lineStart:function(){Db=vb=!1;Lb=1},point:function(Ob,Yb){var dc=[Ob,Yb],mc=la(Ob,Yb);Yb=Ka?mc?0:Ba(Ob,Yb):mc?Ba(Ob+(0>Ob?fe:-fe),Yb):0;!kb&&
(Db=vb=mc)&&Za.lineStart();mc!==vb&&(Ob=wa(kb,dc),cd(kb,Ob)||cd(dc,Ob))&&(dc[0]+=1E-6,dc[1]+=1E-6,mc=la(dc[0],dc[1]));if(mc!==vb)Lb=0,mc?(Za.lineStart(),Ob=wa(dc,kb),Za.point(Ob[0],Ob[1])):(Ob=wa(kb,dc),Za.point(Ob[0],Ob[1]),Za.lineEnd()),kb=Ob;else if($a&&kb&&Ka^mc){var Fc;Yb&pb||!(Fc=wa(dc,kb,!0))||(Lb=0,Ka?(Za.lineStart(),Za.point(Fc[0][0],Fc[0][1]),Za.point(Fc[1][0],Fc[1][1]),Za.lineEnd()):(Za.point(Fc[1][0],Fc[1][1]),Za.lineEnd(),Za.lineStart(),Za.point(Fc[0][0],Fc[0][1])))}!mc||kb&&cd(kb,dc)||
Za.point(dc[0],dc[1]);kb=dc;vb=mc;pb=Yb},lineEnd:function(){vb&&Za.lineEnd();kb=null},clean:function(){return Lb|(Db&&vb)<<1}}},Sa,Ka?[0,-S]:[-fe,S-fe])}function Ae(S,la,wa,Ba){return function(Ga){var Ka=Ga.a,$a=Ga.b,Sa=Ka.x;Ka=Ka.y;var Za=0,kb=1,pb=$a.x-Sa;$a=$a.y-Ka;var vb=S-Sa;if(pb||!(0<vb)){vb/=pb;if(0>pb){if(vb<Za)return;vb<kb&&(kb=vb)}else if(0<pb){if(vb>kb)return;vb>Za&&(Za=vb)}vb=wa-Sa;if(pb||!(0>vb)){vb/=pb;if(0>pb){if(vb>kb)return;vb>Za&&(Za=vb)}else if(0<pb){if(vb<Za)return;vb<kb&&(kb=
vb)}vb=la-Ka;if($a||!(0<vb)){vb/=$a;if(0>$a){if(vb<Za)return;vb<kb&&(kb=vb)}else if(0<$a){if(vb>kb)return;vb>Za&&(Za=vb)}vb=Ba-Ka;if($a||!(0>vb)){vb/=$a;if(0>$a){if(vb>kb)return;vb>Za&&(Za=vb)}else if(0<$a){if(vb<Za)return;vb<kb&&(kb=vb)}0<Za&&(Ga.a={x:Sa+Za*pb,y:Ka+Za*$a});1>kb&&(Ga.b={x:Sa+kb*pb,y:Ka+kb*$a});return Ga}}}}}}function Xd(S,la,wa,Ba){function Ga(Sa,Za){return 1E-6>ge(Sa[0]-S)?0<Za?0:3:1E-6>ge(Sa[0]-wa)?0<Za?2:1:1E-6>ge(Sa[1]-la)?0<Za?1:0:0<Za?3:2}function Ka(Sa,Za){return $a(Sa.x,Za.x)}
function $a(Sa,Za){var kb=Ga(Sa,1),pb=Ga(Za,1);return kb!==pb?kb-pb:0===kb?Za[1]-Sa[1]:1===kb?Sa[0]-Za[0]:2===kb?Sa[1]-Za[1]:Za[0]-Sa[0]}return function(Sa){function Za(jd,hd,Zc,Ed){var $d=0,he=0;if(null==jd||($d=Ga(jd,Zc))!==(he=Ga(hd,Zc))||0>$a(jd,hd)^0<Zc){do Ed.point(0===$d||3===$d?S:wa,1<$d?Ba:la);while(($d=($d+Zc+4)%4)!==he)}else Ed.point(hd[0],hd[1])}function kb(jd,hd){S<=jd&&jd<=wa&&la<=hd&&hd<=Ba&&Sa.point(jd,hd)}function pb(jd,hd){jd=Math.max(-1E9,Math.min(1E9,jd));hd=Math.max(-1E9,Math.min(1E9,
hd));var Zc=S<=jd&&jd<=wa&&la<=hd&&hd<=Ba;Yb&&dc.push([jd,hd]);if(Hc)Fc=jd,Pc=hd,Oc=Zc,Hc=!1,Zc&&(Sa.lineStart(),Sa.point(jd,hd));else if(Zc&&jc)Sa.point(jd,hd);else{var Ed={a:{x:Wc,y:Pb},b:{x:jd,y:hd}};Lb(Ed)?(jc||(Sa.lineStart(),Sa.point(Ed.a.x,Ed.a.y)),Sa.point(Ed.b.x,Ed.b.y),Zc||Sa.lineEnd(),ad=!1):Zc&&(Sa.lineStart(),Sa.point(jd,hd),ad=!1)}Wc=jd;Pb=hd;jc=Zc}var vb=Sa,Db=Fd(),Lb=Ae(S,la,wa,Ba),Ob,Yb,dc,mc={point:kb,lineStart:function(){mc.point=pb;Yb&&Yb.push(dc=[]);Hc=!0;jc=!1;Wc=Pb=NaN},lineEnd:function(){Ob&&
(pb(Fc,Pc),Oc&&jc&&Db.rejoin(),Ob.push(Db.buffer()));mc.point=kb;jc&&Sa.lineEnd()},polygonStart:function(){Sa=Db;Ob=[];Yb=[];ad=!0},polygonEnd:function(){Sa=vb;Ob=Jb.merge(Ob);var jd=[S,Ba];for(var hd=0,Zc=Yb.length,Ed=jd[1],$d=0;$d<Zc;++$d)for(var he=1,ie=Yb[$d],oe=ie.length,Qd=ie[0],Le;he<oe;++he)Le=ie[he],Qd[1]<=Ed?Le[1]>Ed&&0<ua(Qd,Le,jd)&&++hd:Le[1]<=Ed&&0>ua(Qd,Le,jd)&&--hd,Qd=Le;jd=0!==hd;hd=ad&&jd;Zc=Ob.length;if(hd||Zc)Sa.polygonStart(),hd&&(Sa.lineStart(),Za(null,null,1,Sa),Sa.lineEnd()),
Zc&&be(Ob,Ka,jd,Za,Sa),Sa.polygonEnd();Ob=Yb=dc=null}},Fc,Pc,Oc,Wc,Pb,jc,Hc,ad;return mc}}function sf(S){var la=0,wa=fe/3,Ba=Ab(S);S=Ba(la,wa);S.parallels=function(Ga){return arguments.length?Ba(la=Ga[0]*fe/180,wa=Ga[1]*fe/180):[la/fe*180,wa/fe*180]};return S}function Re(S,la){function wa($a,Sa){Sa=Math.sqrt(Ga-2*Ba*Math.sin(Sa))/Ba;return[Sa*Math.sin($a*=Ba),Ka-Sa*Math.cos($a)]}S=Math.sin(S);var Ba=(S+Math.sin(la))/2,Ga=1+S*(2*Ba-S),Ka=Math.sqrt(Ga)/Ba;wa.invert=function($a,Sa){Sa=Ka-Sa;return[Math.atan2($a,
Sa)/Ba,sa((Ga-($a*$a+Sa*Sa)*Ba*Ba)/(2*Ba))]};return wa}function tf(){function S(Ka,$a){mj+=Ga*Ka-Ba*$a;Ba=Ka;Ga=$a}var la,wa,Ba,Ga;Gg.point=function(Ka,$a){Gg.point=S;la=Ba=Ka;wa=Ga=$a};Gg.lineEnd=function(){S(la,wa)}}function $e(){function S(Za,kb){$a.push("M",Za,",",kb,Ka)}function la(Za,kb){$a.push("M",Za,",",kb);Sa.point=wa}function wa(Za,kb){$a.push("L",Za,",",kb)}function Ba(){Sa.point=S}function Ga(){$a.push("Z")}var Ka=Oe(4.5),$a=[],Sa={point:S,lineStart:function(){Sa.point=la},lineEnd:Ba,
polygonStart:function(){Sa.lineEnd=Ga},polygonEnd:function(){Sa.lineEnd=Ba;Sa.point=S},pointRadius:function(Za){Ka=Oe(Za);return Sa},result:function(){if($a.length){var Za=$a.join("");$a=[];return Za}}};return Sa}function Oe(S){return"m0,"+S+"a"+S+","+S+" 0 1,1 0,"+-2*S+"a"+S+","+S+" 0 1,1 0,"+2*S+"z"}function fc(S,la){mh+=S;nh+=la;++Qf}function Vc(){function S(Ba,Ga){var Ka=Ba-la,$a=Ga-wa;Ka=Math.sqrt(Ka*Ka+$a*$a);Sg+=Ka*(la+Ba)/2;Tg+=Ka*(wa+Ga)/2;ug+=Ka;fc(la=Ba,wa=Ga)}var la,wa;hg.point=function(Ba,
Ga){hg.point=S;fc(la=Ba,wa=Ga)}}function Ua(){hg.point=fc}function wb(){function S(Ka,$a){var Sa=Ka-Ba,Za=$a-Ga;Sa=Math.sqrt(Sa*Sa+Za*Za);Sg+=Sa*(Ba+Ka)/2;Tg+=Sa*(Ga+$a)/2;ug+=Sa;Sa=Ga*Ka-Ba*$a;Fh+=Sa*(Ba+Ka);oh+=Sa*(Ga+$a);Ug+=3*Sa;fc(Ba=Ka,Ga=$a)}var la,wa,Ba,Ga;hg.point=function(Ka,$a){hg.point=S;fc(la=Ba=Ka,wa=Ga=$a)};hg.lineEnd=function(){S(la,wa)}}function Fb(S){function la(Za,kb){S.moveTo(Za+$a,kb);S.arc(Za,kb,$a,0,Ff)}function wa(Za,kb){S.moveTo(Za,kb);Sa.point=Ba}function Ba(Za,kb){S.lineTo(Za,
kb)}function Ga(){Sa.point=la}function Ka(){S.closePath()}var $a=4.5,Sa={point:la,lineStart:function(){Sa.point=wa},lineEnd:Ga,polygonStart:function(){Sa.lineEnd=Ka},polygonEnd:function(){Sa.lineEnd=Ga;Sa.point=la},pointRadius:function(Za){$a=Za;return Sa},result:x};return Sa}function Wb(S){function la(Za){return(Sa?Ba:wa)(Za)}function wa(Za){return cc(Za,function(kb,pb){kb=S(kb,pb);Za.point(kb[0],kb[1])})}function Ba(Za){function kb(Ed,$d){Ed=S(Ed,$d);Za.point(Ed[0],Ed[1])}function pb(){jc=NaN;Zc.point=
vb;Za.lineStart()}function vb(Ed,$d){var he=Sc([Ed,$d]);$d=S(Ed,$d);Ga(jc,Hc,Pb,ad,jd,hd,jc=$d[0],Hc=$d[1],Pb=Ed,ad=he[0],jd=he[1],hd=he[2],Sa,Za);Za.point(jc,Hc)}function Db(){Zc.point=kb;Za.lineEnd()}function Lb(){pb();Zc.point=Ob;Zc.lineEnd=Yb}function Ob(Ed,$d){vb(dc=Ed,$d);mc=jc;Fc=Hc;Pc=ad;Oc=jd;Wc=hd;Zc.point=vb}function Yb(){Ga(jc,Hc,Pb,ad,jd,hd,mc,Fc,dc,Pc,Oc,Wc,Sa,Za);Zc.lineEnd=Db;Db()}var dc,mc,Fc,Pc,Oc,Wc,Pb,jc,Hc,ad,jd,hd,Zc={point:kb,lineStart:pb,lineEnd:Db,polygonStart:function(){Za.polygonStart();
Zc.lineStart=Lb},polygonEnd:function(){Za.polygonEnd();Zc.lineStart=pb}};return Zc}function Ga(Za,kb,pb,vb,Db,Lb,Ob,Yb,dc,mc,Fc,Pc,Oc,Wc){var Pb=Ob-Za,jc=Yb-kb,Hc=Pb*Pb+jc*jc;if(Hc>4*Ka&&Oc--){var ad=vb+mc,jd=Db+Fc,hd=Lb+Pc,Zc=Math.sqrt(ad*ad+jd*jd+hd*hd),Ed=Math.asin(hd/=Zc),$d=1E-6>ge(ge(hd)-1)||1E-6>ge(pb-dc)?(pb+dc)/2:Math.atan2(jd,ad),he=S($d,Ed);Ed=he[0];he=he[1];var ie=Ed-Za,oe=he-kb,Qd=jc*ie-Pb*oe;if(Qd*Qd/Hc>Ka||.3<ge((Pb*ie+jc*oe)/Hc-.5)||vb*mc+Db*Fc+Lb*Pc<$a)Ga(Za,kb,pb,vb,Db,Lb,Ed,he,
$d,ad/=Zc,jd/=Zc,hd,Oc,Wc),Wc.point(Ed,he),Ga(Ed,he,$d,ad,jd,hd,Ob,Yb,dc,mc,Fc,Pc,Oc,Wc)}}var Ka=.5,$a=Math.cos(30*le),Sa=16;la.precision=function(Za){if(!arguments.length)return Math.sqrt(Ka);Sa=0<(Ka=Za*Za)&&16;return la};return la}function lc(S){var la=Wb(function(wa,Ba){return S([wa*Xe,Ba*Xe])});return function(wa){return Nb(la(wa))}}function wc(S){this.stream=S}function cc(S,la){return{point:la,sphere:function(){S.sphere()},lineStart:function(){S.lineStart()},lineEnd:function(){S.lineEnd()},
polygonStart:function(){S.polygonStart()},polygonEnd:function(){S.polygonEnd()}}}function Qc(S){return Ab(function(){return S})()}function Ab(S){function la(Hc){Hc=Sa(Hc[0]*le,Hc[1]*le);return[Hc[0]*kb+mc,Fc-Hc[1]*kb]}function wa(Hc){return(Hc=Sa.invert((Hc[0]-mc)/kb,(Fc-Hc[1])/kb))&&[Hc[0]*Xe,Hc[1]*Xe]}function Ba(){Sa=je($a=yc(Ob,Yb,dc),Ka);var Hc=Ka(Db,Lb);mc=pb-Hc[0]*kb;Fc=vb+Hc[1]*kb;return Ga()}function Ga(){jc&&(jc.valid=!1,jc=null);return la}var Ka,$a,Sa,Za=Wb(function(Hc,ad){Hc=Ka(Hc,ad);
return[Hc[0]*kb+mc,Fc-Hc[1]*kb]}),kb=150,pb=480,vb=250,Db=0,Lb=0,Ob=0,Yb=0,dc=0,mc,Fc,Pc=qh,Oc=w,Wc=null,Pb=null,jc;la.stream=function(Hc){jc&&(jc.valid=!1);jc=Nb(Pc($a,Za(Oc(Hc))));jc.valid=!0;return jc};la.clipAngle=function(Hc){if(!arguments.length)return Wc;Pc=null==Hc?(Wc=Hc,qh):Sd((Wc=+Hc)*le);return Ga()};la.clipExtent=function(Hc){if(!arguments.length)return Pb;Oc=(Pb=Hc)?Xd(Hc[0][0],Hc[0][1],Hc[1][0],Hc[1][1]):w;return Ga()};la.scale=function(Hc){if(!arguments.length)return kb;kb=+Hc;return Ba()};
la.translate=function(Hc){if(!arguments.length)return[pb,vb];pb=+Hc[0];vb=+Hc[1];return Ba()};la.center=function(Hc){if(!arguments.length)return[Db*Xe,Lb*Xe];Db=Hc[0]%360*le;Lb=Hc[1]%360*le;return Ba()};la.rotate=function(Hc){if(!arguments.length)return[Ob*Xe,Yb*Xe,dc*Xe];Ob=Hc[0]%360*le;Yb=Hc[1]%360*le;dc=2<Hc.length?Hc[2]%360*le:0;return Ba()};Jb.rebind(la,Za,"precision");return function(){Ka=S.apply(this,arguments);la.invert=Ka.invert&&wa;return Ba()}}function Nb(S){return cc(S,function(la,wa){S.point(la*
le,wa*le)})}function ec(S,la){return[S,la]}function xc(S,la){return[S>fe?S-Ff:S<-fe?S+Ff:S,la]}function yc(S,la,wa){return S?la||wa?je(Cc(S),vc(la,wa)):Cc(S):la||wa?vc(la,wa):xc}function Gc(S){return function(la,wa){return la+=S,[la>fe?la-Ff:la<-fe?la+Ff:la,wa]}}function Cc(S){var la=Gc(S);la.invert=Gc(-S);return la}function vc(S,la){function wa(Sa,Za){var kb=Math.cos(Za),pb=Math.cos(Sa)*kb;Sa=Math.sin(Sa)*kb;Za=Math.sin(Za);kb=Za*Ba+pb*Ga;return[Math.atan2(Sa*Ka-kb*$a,pb*Ba-Za*Ga),sa(kb*Ka+Sa*$a)]}
var Ba=Math.cos(S),Ga=Math.sin(S),Ka=Math.cos(la),$a=Math.sin(la);wa.invert=function(Sa,Za){var kb=Math.cos(Za),pb=Math.cos(Sa)*kb;Sa=Math.sin(Sa)*kb;Za=Math.sin(Za);kb=Za*Ka-Sa*$a;return[Math.atan2(Sa*Ka+Za*$a,pb*Ba+kb*Ga),sa(kb*Ba-pb*Ga)]};return wa}function oc(S,la){var wa=Math.cos(S),Ba=Math.sin(S);return function(Ga,Ka,$a,Sa){var Za=$a*la;if(null!=Ga){if(Ga=sc(wa,Ga),Ka=sc(wa,Ka),0<$a?Ga<Ka:Ga>Ka)Ga+=$a*Ff}else Ga=S+$a*Ff,Ka=S-.5*Za;for(var kb;0<$a?Ga>Ka:Ga<Ka;Ga-=Za)Sa.point((kb=wd([wa,-Ba*
Math.cos(Ga),-Ba*Math.sin(Ga)]))[0],kb[1])}}function sc(S,la){la=Sc(la);la[0]-=S;rd(la);S=ka(-la[1]);return((0>-la[2]?-S:S)+2*Math.PI-1E-6)%(2*Math.PI)}function qc(S,la,wa){var Ba=Jb.range(S,la-1E-6,wa).concat(la);return function(Ga){return Ba.map(function(Ka){return[Ga,Ka]})}}function id(S,la,wa){var Ba=Jb.range(S,la-1E-6,wa).concat(la);return function(Ga){return Ba.map(function(Ka){return[Ka,Ga]})}}function td(S){return S.source}function qd(S){return S.target}function Dd(S,la,wa,Ba){var Ga=Math.cos(la),
Ka=Math.sin(la),$a=Math.cos(Ba),Sa=Math.sin(Ba),Za=Ga*Math.cos(S),kb=Ga*Math.sin(S),pb=$a*Math.cos(wa),vb=$a*Math.sin(wa),Db=2*Math.asin(Math.sqrt(qa(Ba-la)+Ga*$a*qa(wa-S))),Lb=1/Math.sin(Db);wa=Db?function(Ob){var Yb=Math.sin(Ob*=Db)*Lb;Ob=Math.sin(Db-Ob)*Lb;var dc=Ob*Za+Yb*pb,mc=Ob*kb+Yb*vb;return[Math.atan2(mc,dc)*Xe,Math.atan2(Ob*Ka+Yb*Sa,Math.sqrt(dc*dc+mc*mc))*Xe]}:function(){return[S*Xe,la*Xe]};wa.distance=Db;return wa}function od(S,la){function wa(Ba,Ga){var Ka=Math.cos(Ga),$a=S(Math.cos(Ba)*
Ka);return[$a*Ka*Math.sin(Ba),$a*Math.sin(Ga)]}wa.invert=function(Ba,Ga){var Ka=Math.sqrt(Ba*Ba+Ga*Ga),$a=la(Ka),Sa=Math.sin($a);return[Math.atan2(Ba*Sa,Ka*Math.cos($a)),Math.asin(Ka&&Ga*Sa/Ka)]};return wa}function re(S,la){function wa($a,Sa){0<Ka?Sa<-bf+1E-6&&(Sa=-bf+1E-6):Sa>bf-1E-6&&(Sa=bf-1E-6);Sa=Ka/Math.pow(Math.tan(fe/4+Sa/2),Ga);return[Sa*Math.sin(Ga*$a),Ka-Sa*Math.cos(Ga*$a)]}var Ba=Math.cos(S),Ga=S===la?Math.sin(S):Math.log(Ba/Math.cos(la))/Math.log(Math.tan(fe/4+la/2)/Math.tan(fe/4+S/2)),
Ka=Ba*Math.pow(Math.tan(fe/4+S/2),Ga)/Ga;if(!Ga)return De;wa.invert=function($a,Sa){Sa=Ka-Sa;return[Math.atan2($a,Sa)/Ga,2*Math.atan(Math.pow(Ka/((0<Ga?1:0>Ga?-1:0)*Math.sqrt($a*$a+Sa*Sa)),1/Ga))-bf]};return wa}function ue(S,la){function wa($a,Sa){Sa=Ka-Sa;return[Sa*Math.sin(Ga*$a),Ka-Sa*Math.cos(Ga*$a)]}var Ba=Math.cos(S),Ga=S===la?Math.sin(S):(Ba-Math.cos(la))/(la-S),Ka=Ba/Ga+S;if(1E-6>ge(Ga))return ec;wa.invert=function($a,Sa){Sa=Ka-Sa;return[Math.atan2($a,Sa)/Ga,Ka-(0<Ga?1:0>Ga?-1:0)*Math.sqrt($a*
$a+Sa*Sa)]};return wa}function De(S,la){return[S,Math.log(Math.tan(fe/4+la/2))]}function ne(S){var la=Qc(S),wa=la.scale,Ba=la.translate,Ga=la.clipExtent,Ka;la.scale=function(){var $a=wa.apply(la,arguments);return $a===la?Ka?la.clipExtent(null):la:$a};la.translate=function(){var $a=Ba.apply(la,arguments);return $a===la?Ka?la.clipExtent(null):la:$a};la.clipExtent=function($a){var Sa=Ga.apply(la,arguments);if(Sa===la){if(Ka=null==$a){var Za=fe*wa(),kb=Ba();Ga([[kb[0]-Za,kb[1]-Za],[kb[0]+Za,kb[1]+Za]])}}else Ka&&
(Sa=null);return Sa};return la.clipExtent(null)}function ze(S,la){return[Math.log(Math.tan(fe/4+la/2)),-S]}function Df(S){return S[0]}function Pg(S){return S[1]}function fg(S){for(var la=S.length,wa=[0,1],Ba=2,Ga=2;Ga<la;Ga++){for(;1<Ba&&0>=ua(S[wa[Ba-2]],S[wa[Ba-1]],S[Ga]);)--Ba;wa[Ba++]=Ga}return wa.slice(0,Ba)}function hi(S,la){return S[0]-la[0]||S[1]-la[1]}function ih(S,la,wa){return(wa[0]-la[0])*(S[1]-la[1])<(wa[1]-la[1])*(S[0]-la[0])}function ii(S,la,wa,Ba){var Ga=S[0],Ka=wa[0],$a=la[0]-Ga,
Sa=Ba[0]-Ka;S=S[1];wa=wa[1];la=la[1]-S;Ba=Ba[1]-wa;Ka=(Sa*(S-wa)-Ba*(Ga-Ka))/(Ba*$a-Sa*la);return[Ga+Ka*$a,S+Ka*la]}function Qg(S){var la=S[0];S=S[S.length-1];return!(la[0]-S[0]||la[1]-S[1])}function ji(){Vf(this);this.edge=this.site=this.circle=null}function Oi(S){var la=mf.pop()||new ji;la.site=S;return la}function nj(S){Hh(S);mi.remove(S);mf.push(S);Vf(S)}function Pi(S,la){var wa=S.site,Ba=wa.x,Ga=wa.y,Ka=Ga-la;if(!Ka)return Ba;S=S.P;if(!S)return-Infinity;wa=S.site;S=wa.x;wa=wa.y;la=wa-la;if(!la)return S;
var $a=S-Ba,Sa=1/Ka-1/la,Za=$a/la;return Sa?(-Za+Math.sqrt(Za*Za-2*Sa*($a*$a/(-2*la)-wa+la/2+Ga-Ka/2)))/Sa+Ba:(Ba+S)/2}function Qi(S){this.site=S;this.edges=[]}function Vg(S,la){return la.angle-S.angle}function yk(){Vf(this);this.x=this.y=this.arc=this.site=this.cy=null}function rh(S){var la=S.P,wa=S.N;if(la&&wa){var Ba=la.site;la=S.site;var Ga=wa.site;if(Ba!==Ga){wa=la.x;var Ka=la.y,$a=Ba.x-wa,Sa=Ba.y-Ka;Ba=Ga.x-wa;Ga=Ga.y-Ka;var Za=2*($a*Ga-Sa*Ba);if(!(-1E-12<=Za)){var kb=$a*$a+Sa*Sa,pb=Ba*Ba+Ga*
Ga;Sa=(Ga*kb-Sa*pb)/Za;$a=($a*pb-Ba*kb)/Za;Ga=$a+Ka;Ka=Yk.pop()||new yk;Ka.arc=S;Ka.site=la;Ka.x=Sa+wa;Ka.y=Ga+Math.sqrt(Sa*Sa+$a*$a);Ka.cy=Ga;S.circle=Ka;S=null;for(la=Ri._;la;)if(Ka.y<la.y||Ka.y===la.y&&Ka.x<=la.x)if(la.L)la=la.L;else{S=la.P;break}else if(la.R)la=la.R;else{S=la;break}Ri.insert(S,Ka);S||(Vj=Ka)}}}}function Hh(S){var la=S.circle;la&&(la.P||(Vj=la.N),Ri.remove(la),Yk.push(la),Vf(la),S.circle=null)}function zk(S,la){var wa=S.b;if(wa)return!0;var Ba=S.a;wa=la[0][0];var Ga=la[1][0],Ka=
la[0][1];la=la[1][1];var $a=S.l,Sa=S.r,Za=$a.x;$a=$a.y;var kb=Sa.x;Sa=Sa.y;var pb=(Za+kb)/2;if(Sa===$a){if(pb<wa||pb>=Ga)return;if(Za>kb){if(!Ba)Ba={x:pb,y:Ka};else if(Ba.y>=la)return;wa={x:pb,y:la}}else{if(!Ba)Ba={x:pb,y:la};else if(Ba.y<Ka)return;wa={x:pb,y:Ka}}}else{var vb=(Za-kb)/(Sa-$a);pb=($a+Sa)/2-vb*pb;if(-1>vb||1<vb)if(Za>kb){if(!Ba)Ba={x:(Ka-pb)/vb,y:Ka};else if(Ba.y>=la)return;wa={x:(la-pb)/vb,y:la}}else{if(!Ba)Ba={x:(la-pb)/vb,y:la};else if(Ba.y<Ka)return;wa={x:(Ka-pb)/vb,y:Ka}}else if($a<
Sa){if(!Ba)Ba={x:wa,y:vb*wa+pb};else if(Ba.x>=Ga)return;wa={x:Ga,y:vb*Ga+pb}}else{if(!Ba)Ba={x:Ga,y:vb*Ga+pb};else if(Ba.x<wa)return;wa={x:wa,y:vb*wa+pb}}}S.a=Ba;S.b=wa;return!0}function Ih(S,la){this.l=S;this.r=la;this.a=this.b=null}function Hg(S,la,wa,Ba){var Ga=new Ih(S,la);ni.push(Ga);wa&&oi(Ga,S,la,wa);Ba&&oi(Ga,la,S,Ba);Jh[S.i].edges.push(new sh(Ga,S,la));Jh[la.i].edges.push(new sh(Ga,la,S));return Ga}function Wj(S,la,wa){S=new Ih(S,null);S.a=la;S.b=wa;ni.push(S);return S}function oi(S,la,wa,
Ba){S.a||S.b?S.l===wa?S.b=Ba:S.a=Ba:(S.a=Ba,S.l=la,S.r=wa)}function sh(S,la,wa){var Ba=S.a,Ga=S.b;this.edge=S;this.site=la;this.angle=wa?Math.atan2(wa.y-la.y,wa.x-la.x):S.l===la?Math.atan2(Ga.x-Ba.x,Ba.y-Ga.y):Math.atan2(Ba.x-Ga.x,Ga.y-Ba.y)}function Be(){this._=null}function Vf(S){S.U=S.C=S.L=S.R=S.P=S.N=null}function Kh(S,la){var wa=la.R,Ba=la.U;Ba?Ba.L===la?Ba.L=wa:Ba.R=wa:S._=wa;wa.U=Ba;la.U=wa;la.R=wa.L;la.R&&(la.R.U=la);wa.L=la}function pi(S,la){var wa=la.L,Ba=la.U;Ba?Ba.L===la?Ba.L=wa:Ba.R=
wa:S._=wa;wa.U=Ba;la.U=wa;la.L=wa.R;la.L&&(la.L.U=la);wa.R=la}function oj(S){for(;S.L;)S=S.L;return S}function pj(S,la){var wa=S.sort(qj).pop(),Ba;ni=[];Jh=Array(S.length);mi=new Be;for(Ri=new Be;;){var Ga=Vj;if(wa&&(!Ga||wa.y<Ga.y||wa.y===Ga.y&&wa.x<Ga.x)){if(wa.x!==Ba||wa.y!==Ka){Jh[wa.i]=new Qi(wa);var Ka=Ba=void 0;Ga=wa;for(var $a=Ga.x,Sa=Ga.y,Za=mi._;Za;){var kb=Pi(Za,Sa)-$a;if(1E-6<kb)Za=Za.L;else{var pb=Za;var vb=Sa;var Db=pb.N;Db?vb=Pi(Db,vb):(pb=pb.site,vb=pb.y===vb?pb.x:Infinity);vb=$a-
vb;if(1E-6<vb){if(!Za.R){Ka=Za;break}Za=Za.R}else{-1E-6<kb?(Ka=Za.P,Ba=Za):-1E-6<vb?(Ka=Za,Ba=Za.N):Ka=Ba=Za;break}}}kb=Oi(Ga);mi.insert(Ka,kb);if(Ka||Ba)if(Ka===Ba)Hh(Ka),Ba=Oi(Ka.site),mi.insert(kb,Ba),kb.edge=Ba.edge=Hg(Ka.site,kb.site),rh(Ka),rh(Ba);else if(Ba){Hh(Ka);Hh(Ba);$a=Ka.site;Za=$a.x;vb=$a.y;pb=Ga.x-Za;Db=Ga.y-vb;Sa=Ba.site;var Lb=Sa.x-Za,Ob=Sa.y-vb,Yb=2*(pb*Ob-Db*Lb),dc=pb*pb+Db*Db,mc=Lb*Lb+Ob*Ob;Za={x:(Ob*dc-Db*mc)/Yb+Za,y:(pb*mc-Lb*dc)/Yb+vb};oi(Ba.edge,$a,Sa,Za);kb.edge=Hg($a,Ga,
null,Za);Ba.edge=Hg(Ga,Sa,null,Za);rh(Ka);rh(Ba)}else kb.edge=Hg(Ka.site,kb.site);Ba=wa.x;Ka=wa.y}wa=S.pop()}else if(Ga){Sa=Ga.arc;Ga=Sa.circle;$a=Ga.x;Za=Ga.cy;Ga={x:$a,y:Za};pb=Sa.P;vb=Sa.N;kb=[Sa];nj(Sa);for(Sa=pb;Sa.circle&&1E-6>ge($a-Sa.circle.x)&&1E-6>ge(Za-Sa.circle.cy);)pb=Sa.P,kb.unshift(Sa),nj(Sa),Sa=pb;kb.unshift(Sa);Hh(Sa);for(pb=vb;pb.circle&&1E-6>ge($a-pb.circle.x)&&1E-6>ge(Za-pb.circle.cy);)vb=pb.N,kb.push(pb),nj(pb),pb=vb;kb.push(pb);Hh(pb);Za=kb.length;for($a=1;$a<Za;++$a)pb=kb[$a],
Sa=kb[$a-1],oi(pb.edge,Sa.site,pb.site,Ga);Sa=kb[0];pb=kb[Za-1];pb.edge=Hg(Sa.site,pb.site,null,Ga);rh(Sa);rh(pb)}else break}if(la){S=ni;wa=Ae(la[0][0],la[0][1],la[1][0],la[1][1]);for(Ba=S.length;Ba--;)if(Ka=S[Ba],!zk(Ka,la)||!wa(Ka)||1E-6>ge(Ka.a.x-Ka.b.x)&&1E-6>ge(Ka.a.y-Ka.b.y))Ka.a=Ka.b=null,S.splice(Ba,1);S=la[0][0];wa=la[1][0];Ba=la[0][1];la=la[1][1];$a=Jh;for(Sa=$a.length;Sa--;)if((Za=$a[Sa])&&Za.prepare())for(pb=Za.edges,Db=pb.length,vb=0;vb<Db;)if(Lb=pb[vb].end(),Ga=Lb.x,kb=Lb.y,Ob=pb[++vb%
Db].start(),Ka=Ob.x,Ob=Ob.y,1E-6<ge(Ga-Ka)||1E-6<ge(kb-Ob))pb.splice(vb,0,new sh(Wj(Za.site,Lb,1E-6>ge(Ga-S)&&1E-6<la-kb?{x:S,y:1E-6>ge(Ka-S)?Ob:la}:1E-6>ge(kb-la)&&1E-6<wa-Ga?{x:1E-6>ge(Ob-la)?Ka:wa,y:la}:1E-6>ge(Ga-wa)&&1E-6<kb-Ba?{x:wa,y:1E-6>ge(Ka-wa)?Ob:Ba}:1E-6>ge(kb-Ba)&&1E-6<Ga-S?{x:1E-6>ge(Ob-Ba)?Ka:S,y:Ba}:null),Za.site,null)),++Db}la={cells:Jh,edges:ni};mi=Ri=ni=Jh=null;return la}function qj(S,la){return la.y-S.y||la.x-S.x}function Si(S){return S.x}function Xj(S){return S.y}function rj(){return{leaf:!0,
nodes:[],point:null,x:null,y:null}}function qi(S,la,wa,Ba,Ga,Ka){if(!S(la,wa,Ba,Ga,Ka)){var $a=.5*(wa+Ga),Sa=.5*(Ba+Ka);la=la.nodes;la[0]&&qi(S,la[0],wa,Ba,$a,Sa);la[1]&&qi(S,la[1],$a,Ba,Ga,Sa);la[2]&&qi(S,la[2],wa,Sa,$a,Ka);la[3]&&qi(S,la[3],$a,Sa,Ga,Ka)}}function Ak(S,la,wa,Ba,Ga,Ka,$a){var Sa=Infinity,Za;(function Yb(pb,vb,Db,Lb,Ob){if(!(vb>Ka||Db>$a||Lb<Ba||Ob<Ga)){if(dc=pb.point){var dc,mc=la-pb.x,Fc=wa-pb.y;mc=mc*mc+Fc*Fc;mc<Sa&&(mc=Math.sqrt(Sa=mc),Ba=la-mc,Ga=wa-mc,Ka=la+mc,$a=wa+mc,Za=dc)}dc=
pb.nodes;mc=.5*(vb+Lb);Fc=.5*(Db+Ob);for(var Pc=(wa>=Fc)<<1|la>=mc,Oc=Pc+4;Pc<Oc;++Pc)if(pb=dc[Pc&3])switch(Pc&3){case 0:Yb(pb,vb,Db,mc,Fc);break;case 1:Yb(pb,mc,Db,Lb,Fc);break;case 2:Yb(pb,vb,Fc,mc,Ob);break;case 3:Yb(pb,mc,Fc,Lb,Ob)}}})(S,Ba,Ga,Ka,$a);return Za}function Lh(S,la){S=Jb.rgb(S);la=Jb.rgb(la);var wa=S.r,Ba=S.g,Ga=S.b,Ka=la.r-wa,$a=la.g-Ba,Sa=la.b-Ga;return function(Za){return"#"+Oa(Math.round(wa+Ka*Za))+Oa(Math.round(Ba+$a*Za))+Oa(Math.round(Ga+Sa*Za))}}function th(S,la){var wa={},
Ba={},Ga;for(Ga in S)Ga in la?wa[Ga]=uh(S[Ga],la[Ga]):Ba[Ga]=S[Ga];for(Ga in la)Ga in S||(Ba[Ga]=la[Ga]);return function(Ka){for(Ga in wa)Ba[Ga]=wa[Ga](Ka);return Ba}}function vg(S,la){S=+S;la=+la;return function(wa){return S*(1-wa)+la*wa}}function Yj(S,la){var wa=vh.lastIndex=Bk.lastIndex=0,Ba,Ga,Ka,$a=-1,Sa=[],Za=[];S+="";for(la+="";(Ba=vh.exec(S))&&(Ga=Bk.exec(la));)(Ka=Ga.index)>wa&&(Ka=la.slice(wa,Ka),Sa[$a]?Sa[$a]+=Ka:Sa[++$a]=Ka),(Ba=Ba[0])===(Ga=Ga[0])?Sa[$a]?Sa[$a]+=Ga:Sa[++$a]=Ga:(Sa[++$a]=
null,Za.push({i:$a,x:vg(Ba,Ga)})),wa=Bk.lastIndex;wa<la.length&&(Ka=la.slice(wa),Sa[$a]?Sa[$a]+=Ka:Sa[++$a]=Ka);return 2>Sa.length?Za[0]?(la=Za[0].x,function(kb){return la(kb)+""}):function(){return la}:(la=Za.length,function(kb){for(var pb=0,vb;pb<la;++pb)Sa[(vb=Za[pb]).i]=vb.x(kb);return Sa.join("")})}function uh(S,la){for(var wa=Jb.interpolators.length,Ba;0<=--wa&&!(Ba=Jb.interpolators[wa](S,la)););return Ba}function Ti(S,la){var wa=[],Ba=[],Ga=S.length,Ka=la.length,$a=Math.min(S.length,la.length),
Sa;for(Sa=0;Sa<$a;++Sa)wa.push(uh(S[Sa],la[Sa]));for(;Sa<Ga;++Sa)Ba[Sa]=S[Sa];for(;Sa<Ka;++Sa)Ba[Sa]=la[Sa];return function(Za){for(Sa=0;Sa<$a;++Sa)Ba[Sa]=wa[Sa](Za);return Ba}}function sj(S){return function(la){return 0>=la?0:1<=la?1:S(la)}}function Mh(S){return function(la){return 1-S(1-la)}}function Se(S){return function(la){return.5*(.5>la?S(2*la):2-S(2-2*la))}}function Ui(S){return S*S}function Nh(S){return S*S*S}function Wg(S){if(0>=S)return 0;if(1<=S)return 1;var la=S*S,wa=la*S;return 4*(.5>
S?wa:3*(S-la)+wa-.75)}function Je(S){return 1-Math.cos(S*bf)}function Me(S){return Math.pow(2,10*(S-1))}function Xg(S){return 1-Math.sqrt(1-S*S)}function Oh(S){return S<1/2.75?7.5625*S*S:S<2/2.75?7.5625*(S-=1.5/2.75)*S+.75:S<2.5/2.75?7.5625*(S-=2.25/2.75)*S+.9375:7.5625*(S-=2.625/2.75)*S+.984375}function tj(S,la){la-=S;return function(wa){return Math.round(S+la*wa)}}function uj(S){var la=[S.a,S.b],wa=[S.c,S.d],Ba=vj(la),Ga=la[0]*wa[0]+la[1]*wa[1],Ka=-Ga;wa[0]+=Ka*la[0];wa[1]+=Ka*la[1];Ka=vj(wa)||
0;la[0]*wa[1]<wa[0]*la[1]&&(la[0]*=-1,la[1]*=-1,Ba*=-1,Ga*=-1);this.rotate=(Ba?Math.atan2(la[1],la[0]):Math.atan2(-wa[0],wa[1]))*Xe;this.translate=[S.e,S.f];this.scale=[Ba,Ka];this.skew=Ka?Math.atan2(Ga,Ka)*Xe:0}function vj(S){var la=Math.sqrt(S[0]*S[0]+S[1]*S[1]);la&&(S[0]/=la,S[1]/=la);return la}function wh(S){return S.length?S.pop()+",":""}function ri(S,la,wa,Ba){S[0]!==la[0]||S[1]!==la[1]?(wa=wa.push("translate(",null,",",null,")"),Ba.push({i:wa-4,x:vg(S[0],la[0])},{i:wa-2,x:vg(S[1],la[1])})):
(la[0]||la[1])&&wa.push("translate("+la+")")}function bg(S,la,wa,Ba){S!==la?(180<S-la?la+=360:180<la-S&&(S+=360),Ba.push({i:wa.push(wh(wa)+"rotate(",null,")")-2,x:vg(S,la)})):la&&wa.push(wh(wa)+"rotate("+la+")")}function si(S,la,wa,Ba){S!==la?Ba.push({i:wa.push(wh(wa)+"skewX(",null,")")-2,x:vg(S,la)}):la&&wa.push(wh(wa)+"skewX("+la+")")}function Zj(S,la,wa,Ba){S[0]!==la[0]||S[1]!==la[1]?(wa=wa.push(wh(wa)+"scale(",null,",",null,")"),Ba.push({i:wa-4,x:vg(S[0],la[0])},{i:wa-2,x:vg(S[1],la[1])})):1===
la[0]&&1===la[1]||wa.push(wh(wa)+"scale("+la+")")}function cf(S,la){var wa=[],Ba=[];S=Jb.transform(S);la=Jb.transform(la);ri(S.translate,la.translate,wa,Ba);bg(S.rotate,la.rotate,wa,Ba);si(S.skew,la.skew,wa,Ba);Zj(S.scale,la.scale,wa,Ba);S=la=null;return function(Ga){for(var Ka=-1,$a=Ba.length,Sa;++Ka<$a;)wa[(Sa=Ba[Ka]).i]=Sa.x(Ga);return wa.join("")}}function ig(S,la){la=(la-=S=+S)||1/la;return function(wa){return(wa-S)/la}}function jg(S,la){la=(la-=S=+S)||1/la;return function(wa){return Math.max(0,
Math.min(1,(wa-S)/la))}}function ti(S){var la=S.source;S=S.target;var wa=S;if(la===wa)var Ba=la;else{Ba=Yg(la);wa=Yg(wa);for(var Ga=Ba.pop(),Ka=wa.pop(),$a=null;Ga===Ka;)$a=Ga,Ga=Ba.pop(),Ka=wa.pop();Ba=$a}for(wa=[la];la!==Ba;)la=la.parent,wa.push(la);for(la=wa.length;S!==Ba;)wa.splice(la,0,S),S=S.parent;return wa}function Yg(S){for(var la=[],wa=S.parent;null!=wa;)la.push(S),S=wa,wa=wa.parent;la.push(S);return la}function Gf(S){S.fixed|=2}function Rf(S){S.fixed&=-7}function wj(S){S.fixed|=4;S.px=
S.x;S.py=S.y}function xj(S){S.fixed&=-5}function Vi(S,la,wa){var Ba=0,Ga=0;S.charge=0;if(!S.leaf)for(var Ka=S.nodes,$a=Ka.length,Sa=-1,Za;++Sa<$a;)Za=Ka[Sa],null!=Za&&(Vi(Za,la,wa),S.charge+=Za.charge,Ba+=Za.charge*Za.cx,Ga+=Za.charge*Za.cy);S.point&&(S.leaf||(S.point.x+=Math.random()-.5,S.point.y+=Math.random()-.5),la*=wa[S.point.index],S.charge+=S.pointCharge=la,Ba+=la*S.point.x,Ga+=la*S.point.y);S.cx=Ba/S.charge;S.cy=Ga/S.charge}function Hf(S,la){Jb.rebind(S,la,"sort","children","value");S.nodes=
S;S.links=Af;return S}function ff(S,la){for(var wa=[S];null!=(S=wa.pop());)if(la(S),(Ga=S.children)&&(Ba=Ga.length))for(var Ba,Ga;0<=--Ba;)wa.push(Ga[Ba])}function cg(S,la){for(var wa=[S],Ba=[];null!=(S=wa.pop());)if(Ba.push(S),(Ka=S.children)&&(Ga=Ka.length)){S=-1;for(var Ga,Ka;++S<Ga;)wa.push(Ka[S])}for(;null!=(S=Ba.pop());)la(S)}function Ck(S){return S.children}function ak(S){return S.value}function Zg(S,la){return la.value-S.value}function Af(S){return Jb.merge(S.map(function(la){return(la.children||
[]).map(function(wa){return{source:la,target:wa}})}))}function xh(S){return S.x}function kg(S){return S.y}function lg(S,la,wa){S.y0=la;S.y=wa}function $g(S){return Jb.range(S.length)}function yh(S){var la=-1;S=S[0].length;for(var wa=[];++la<S;)wa[la]=0;return wa}function ah(S){for(var la=1,wa=0,Ba=S[0][1],Ga,Ka=S.length;la<Ka;++la)(Ga=S[la][1])>Ba&&(wa=la,Ba=Ga);return wa}function pe(S){return S.reduce(Dk,0)}function Dk(S,la){return S+la[1]}function kf(S,la){return yj(S,Math.ceil(Math.log(la.length)/
Math.LN2+1))}function yj(S,la){var wa=-1,Ba=+S[0];S=(S[1]-Ba)/la;for(var Ga=[];++wa<=la;)Ga[wa]=S*wa+Ba;return Ga}function mg(S){return[Jb.min(S),Jb.max(S)]}function wg(S,la){return S.value-la.value}function Ig(S,la){var wa=S._pack_next;S._pack_next=la;la._pack_prev=S;la._pack_next=wa;wa._pack_prev=la}function Ph(S,la){S._pack_next=la;la._pack_prev=S}function bh(S,la){var wa=la.x-S.x,Ba=la.y-S.y;S=S.r+la.r;return.999*S*S>wa*wa+Ba*Ba}function bk(S){function la(mc){Ba=Math.min(mc.x-mc.r,Ba);Ga=Math.max(mc.x+
mc.r,Ga);Ka=Math.min(mc.y-mc.r,Ka);$a=Math.max(mc.y+mc.r,$a)}if((wa=S.children)&&(pb=wa.length)){var wa,Ba=Infinity,Ga=-Infinity,Ka=Infinity,$a=-Infinity,Sa,Za,kb,pb;wa.forEach(Qh);var vb=wa[0];vb.x=-vb.r;vb.y=0;la(vb);if(1<pb){var Db=wa[1];Db.x=Db.r;Db.y=0;la(Db);if(2<pb){var Lb=wa[2];lf(vb,Db,Lb);la(Lb);Ig(vb,Lb);vb._pack_prev=Lb;Ig(Lb,Db);Db=vb._pack_next;for(Sa=3;Sa<pb;Sa++){lf(vb,Db,Lb=wa[Sa]);var Ob=0,Yb=1,dc=1;for(Za=Db._pack_next;Za!==Db;Za=Za._pack_next,Yb++)if(bh(Za,Lb)){Ob=1;break}if(1==
Ob)for(kb=vb._pack_prev;kb!==Za._pack_prev&&!bh(kb,Lb);kb=kb._pack_prev,dc++);Ob?(Yb<dc||Yb==dc&&Db.r<vb.r?Ph(vb,Db=Za):Ph(vb=kb,Db),Sa--):(Ig(vb,Lb),Db=Lb,la(Lb))}}}vb=(Ba+Ga)/2;Db=(Ka+$a)/2;for(Sa=Za=0;Sa<pb;Sa++)Lb=wa[Sa],Lb.x-=vb,Lb.y-=Db,Za=Math.max(Za,Lb.r+Math.sqrt(Lb.x*Lb.x+Lb.y*Lb.y));S.r=Za;wa.forEach(Ek)}}function Qh(S){S._pack_next=S._pack_prev=S}function Ek(S){delete S._pack_next;delete S._pack_prev}function zh(S,la,wa,Ba){var Ga=S.children;S.x=la+=Ba*S.x;S.y=wa+=Ba*S.y;S.r*=Ba;if(Ga){S=
-1;for(var Ka=Ga.length;++S<Ka;)zh(Ga[S],la,wa,Ba)}}function lf(S,la,wa){var Ba=S.r+wa.r,Ga=la.x-S.x,Ka=la.y-S.y;if(Ba&&(Ga||Ka)){var $a=la.r+wa.r,Sa=Ga*Ga+Ka*Ka;$a*=$a;Ba*=Ba;la=.5+(Ba-$a)/(2*Sa);$a=Math.sqrt(Math.max(0,2*$a*(Ba+Sa)-(Ba-=Sa)*Ba-$a*$a))/(2*Sa);wa.x=S.x+la*Ga+$a*Ka;wa.y=S.y+la*Ka-$a*Ga}else wa.x=S.x+Ba,wa.y=S.y}function ng(S,la){return S.parent==la.parent?1:2}function Bf(S){var la=S.children;return la.length?la[0]:S.t}function Rh(S){var la=S.children,wa;return(wa=la.length)?la[wa-
1]:S.t}function If(S){return 1+Jb.max(S,function(la){return la.y})}function Ah(S){return S.reduce(function(la,wa){return la+wa.x},0)/S.length}function ck(S){var la=S.children;return la&&la.length?ck(la[0]):S}function og(S){var la=S.children,wa;return la&&(wa=la.length)?og(la[wa-1]):S}function Jf(S){return{x:S.x,y:S.y,dx:S.dx,dy:S.dy}}function ui(S,la){var wa=S.x+la[3],Ba=S.y+la[0],Ga=S.dx-la[1]-la[3];S=S.dy-la[0]-la[2];0>Ga&&(wa+=Ga/2,Ga=0);0>S&&(Ba+=S/2,S=0);return{x:wa,y:Ba,dx:Ga,dy:S}}function Sh(S){var la=
S[0];S=S[S.length-1];return la<S?[la,S]:[S,la]}function xg(S){return S.rangeExtent?S.rangeExtent():Sh(S.range())}function yg(S,la,wa,Ba){var Ga=wa(S[0],S[1]),Ka=Ba(la[0],la[1]);return function($a){return Ka(Ga($a))}}function vi(S,la){var wa=0,Ba=S.length-1,Ga=S[wa],Ka=S[Ba];if(Ka<Ga){var $a=wa;wa=Ba;Ba=$a;$a=Ga;Ga=Ka;Ka=$a}S[wa]=la.floor(Ga);S[Ba]=la.ceil(Ka);return S}function dk(S){return S?{floor:function(la){return Math.floor(la/S)*S},ceil:function(la){return Math.ceil(la/S)*S}}:Th}function zj(S,
la,wa,Ba){var Ga=[],Ka=[],$a=0,Sa=Math.min(S.length,la.length)-1;S[Sa]<S[0]&&(S=S.slice().reverse(),la=la.slice().reverse());for(;++$a<=Sa;)Ga.push(wa(S[$a-1],S[$a])),Ka.push(Ba(la[$a-1],la[$a]));return function(Za){var kb=Jb.bisect(S,Za,1,Sa)-1;return Ka[kb](Ga[kb](Za))}}function ub(S,la,wa,Ba){function Ga(){var Za=2<Math.min(S.length,la.length)?zj:yg,kb=Ba?jg:ig;$a=Za(S,la,kb,wa);Sa=Za(la,S,kb,uh);return Ka}function Ka(Za){return $a(Za)}var $a,Sa;Ka.invert=function(Za){return Sa(Za)};Ka.domain=
function(Za){if(!arguments.length)return S;S=Za.map(Number);return Ga()};Ka.range=function(Za){if(!arguments.length)return la;la=Za;return Ga()};Ka.rangeRound=function(Za){return Ka.range(Za).interpolate(tj)};Ka.clamp=function(Za){if(!arguments.length)return Ba;Ba=Za;return Ga()};Ka.interpolate=function(Za){if(!arguments.length)return wa;wa=Za;return Ga()};Ka.ticks=function(Za){return Jb.range.apply(Jb,aa(S,Za))};Ka.tickFormat=function(Za,kb){return ja(S,Za,kb)};Ka.nice=function(Za){da(S,Za);return Ga()};
Ka.copy=function(){return ub(S,la,wa,Ba)};return Ga()}function Z(S,la){return Jb.rebind(S,la,"range","rangeRound","interpolate","clamp")}function da(S,la){vi(S,dk(aa(S,la)[2]));vi(S,dk(aa(S,la)[2]));return S}function aa(S,la){null==la&&(la=10);S=Sh(S);var wa=S[1]-S[0],Ba=Math.pow(10,Math.floor(Math.log(wa/la)/Math.LN10));la=la/wa*Ba;.15>=la?Ba*=10:.35>=la?Ba*=5:.75>=la&&(Ba*=2);S[0]=Math.ceil(S[0]/Ba)*Ba;S[1]=Math.floor(S[1]/Ba)*Ba+.5*Ba;S[2]=Ba;return S}function ja(S,la,wa){S=aa(S,la);if(wa){la=
Tj.exec(wa);la.shift();if("s"===la[8]){var Ba=Jb.formatPrefix(Math.max(ge(S[0]),ge(S[1])));la[7]||(la[7]="."+za(Ba.scale(S[2])));la[8]="f";wa=Jb.format(la.join(""));return function(Ga){return wa(Ba.scale(Ga))+Ba.symbol}}la[7]||(la[7]="."+Na(la[8],S));wa=la.join("")}else wa=",."+za(S[2])+"f";return Jb.format(wa)}function za(S){return-Math.floor(Math.log(S)/Math.LN10+.01)}function Na(S,la){var wa=za(la[2]);return S in pg?Math.abs(wa-za(Math.max(ge(la[0]),ge(la[1]))))+ +("e"!==S):wa-2*("%"===S)}function Xa(S,
la,wa,Ba){function Ga(Sa){return(wa?Math.log(0>Sa?0:Sa):-Math.log(0<Sa?0:-Sa))/Math.log(la)}function Ka(Sa){return wa?Math.pow(la,Sa):-Math.pow(la,-Sa)}function $a(Sa){return S(Ga(Sa))}$a.invert=function(Sa){return Ka(S.invert(Sa))};$a.domain=function(Sa){if(!arguments.length)return Ba;wa=0<=Sa[0];S.domain((Ba=Sa.map(Number)).map(Ga));return $a};$a.base=function(Sa){if(!arguments.length)return la;la=+Sa;S.domain(Ba.map(Ga));return $a};$a.nice=function(){var Sa=vi(Ba.map(Ga),wa?Math:zg);S.domain(Sa);
Ba=Sa.map(Ka);return $a};$a.ticks=function(){var Sa=Sh(Ba),Za=[],kb=Sa[0];Sa=Sa[1];var pb=Math.floor(Ga(kb)),vb=Math.ceil(Ga(Sa)),Db=la%1?2:la;if(isFinite(vb-pb)){if(wa){for(;pb<vb;pb++)for(var Lb=1;Lb<Db;Lb++)Za.push(Ka(pb)*Lb);Za.push(Ka(pb))}else for(Za.push(Ka(pb));pb++<vb;)for(Lb=Db-1;0<Lb;Lb--)Za.push(Ka(pb)*Lb);for(pb=0;Za[pb]<kb;pb++);for(vb=Za.length;Za[vb-1]>Sa;vb--);Za=Za.slice(pb,vb)}return Za};$a.tickFormat=function(Sa,Za){if(!arguments.length)return Kf;2>arguments.length?Za=Kf:"function"!==
typeof Za&&(Za=Jb.format(Za));var kb=Math.max(1,la*Sa/$a.ticks().length);return function(pb){var vb=pb/Ka(Math.round(Ga(pb)));vb*la<la-.5&&(vb*=la);return vb<=kb?Za(pb):""}};$a.copy=function(){return Xa(S.copy(),la,wa,Ba)};return Z($a,S)}function mb(S,la,wa){function Ba($a){return S(Ga($a))}var Ga=Cb(la),Ka=Cb(1/la);Ba.invert=function($a){return Ka(S.invert($a))};Ba.domain=function($a){if(!arguments.length)return wa;S.domain((wa=$a.map(Number)).map(Ga));return Ba};Ba.ticks=function($a){return Jb.range.apply(Jb,
aa(wa,$a))};Ba.tickFormat=function($a,Sa){return ja(wa,$a,Sa)};Ba.nice=function($a){return Ba.domain(da(wa,$a))};Ba.exponent=function($a){if(!arguments.length)return la;Ga=Cb(la=$a);Ka=Cb(1/la);S.domain(wa.map(Ga));return Ba};Ba.copy=function(){return mb(S.copy(),la,wa)};return Z(Ba,S)}function Cb(S){return function(la){return 0>la?-Math.pow(-la,S):Math.pow(la,S)}}function Kb(S,la){function wa(Sa){return Ka[((Ga.get(Sa)||("range"===la.t?Ga.set(Sa,S.push(Sa)):NaN))-1)%Ka.length]}function Ba(Sa,Za){return Jb.range(S.length).map(function(kb){return Sa+
Za*kb})}var Ga,Ka,$a;wa.domain=function(Sa){if(!arguments.length)return S;S=[];Ga=new p;for(var Za=-1,kb=Sa.length,pb;++Za<kb;)Ga.has(pb=Sa[Za])||Ga.set(pb,S.push(pb));return wa[la.t].apply(wa,la.a)};wa.range=function(Sa){if(!arguments.length)return Ka;Ka=Sa;$a=0;la={t:"range",a:arguments};return wa};wa.rangePoints=function(Sa,Za){2>arguments.length&&(Za=0);var kb=Sa[0],pb=Sa[1];pb=2>S.length?(kb=(kb+pb)/2,0):(pb-kb)/(S.length-1+Za);Ka=Ba(kb+pb*Za/2,pb);$a=0;la={t:"rangePoints",a:arguments};return wa};
wa.rangeRoundPoints=function(Sa,Za){2>arguments.length&&(Za=0);var kb=Sa[0],pb=Sa[1],vb=2>S.length?(kb=pb=Math.round((kb+pb)/2),0):(pb-kb)/(S.length-1+Za)|0;Ka=Ba(kb+Math.round(vb*Za/2+(pb-kb-(S.length-1+Za)*vb)/2),vb);$a=0;la={t:"rangeRoundPoints",a:arguments};return wa};wa.rangeBands=function(Sa,Za,kb){2>arguments.length&&(Za=0);3>arguments.length&&(kb=Za);var pb=Sa[1]<Sa[0],vb=Sa[pb-0],Db=(Sa[1-pb]-vb)/(S.length-Za+2*kb);Ka=Ba(vb+Db*kb,Db);pb&&Ka.reverse();$a=Db*(1-Za);la={t:"rangeBands",a:arguments};
return wa};wa.rangeRoundBands=function(Sa,Za,kb){2>arguments.length&&(Za=0);3>arguments.length&&(kb=Za);var pb=Sa[1]<Sa[0],vb=Sa[pb-0],Db=Sa[1-pb],Lb=Math.floor((Db-vb)/(S.length-Za+2*kb));Ka=Ba(vb+Math.round((Db-vb-(S.length-Za)*Lb)/2),Lb);pb&&Ka.reverse();$a=Math.round(Lb*(1-Za));la={t:"rangeRoundBands",a:arguments};return wa};wa.rangeBand=function(){return $a};wa.rangeExtent=function(){return Sh(la.a[0])};wa.copy=function(){return Kb(S,la)};return wa.domain(S)}function Mb(S,la){function wa(){var Ka=
0,$a=la.length;for(Ga=[];++Ka<$a;)Ga[Ka-1]=Jb.quantile(S,Ka/$a);return Ba}function Ba(Ka){if(!isNaN(Ka=+Ka))return la[Jb.bisect(Ga,Ka)]}var Ga;Ba.domain=function(Ka){if(!arguments.length)return S;S=Ka.map(l).filter(e).sort(h);return wa()};Ba.range=function(Ka){if(!arguments.length)return la;la=Ka;return wa()};Ba.quantiles=function(){return Ga};Ba.invertExtent=function(Ka){Ka=la.indexOf(Ka);return 0>Ka?[NaN,NaN]:[0<Ka?Ga[Ka-1]:S[0],Ka<Ga.length?Ga[Ka]:S[S.length-1]]};Ba.copy=function(){return Mb(S,
la)};return wa()}function pc(S,la,wa){function Ba(Sa){return wa[Math.max(0,Math.min($a,Math.floor(Ka*(Sa-S))))]}function Ga(){Ka=wa.length/(la-S);$a=wa.length-1;return Ba}var Ka,$a;Ba.domain=function(Sa){if(!arguments.length)return[S,la];S=+Sa[0];la=+Sa[Sa.length-1];return Ga()};Ba.range=function(Sa){if(!arguments.length)return wa;wa=Sa;return Ga()};Ba.invertExtent=function(Sa){Sa=wa.indexOf(Sa);Sa=0>Sa?NaN:Sa/Ka+S;return[Sa,Sa+1/Ka]};Ba.copy=function(){return pc(S,la,wa)};return Ga()}function rc(S,
la){function wa(Ba){if(Ba<=Ba)return la[Jb.bisect(S,Ba)]}wa.domain=function(Ba){if(!arguments.length)return S;S=Ba;return wa};wa.range=function(Ba){if(!arguments.length)return la;la=Ba;return wa};wa.invertExtent=function(Ba){Ba=la.indexOf(Ba);return[S[Ba-1],S[Ba]]};wa.copy=function(){return rc(S,la)};return wa}function hc(S){function la(wa){return+wa}la.invert=la;la.domain=la.range=function(wa){if(!arguments.length)return S;S=wa.map(la);return la};la.ticks=function(wa){return Jb.range.apply(Jb,aa(S,
wa))};la.tickFormat=function(wa,Ba){return ja(S,wa,Ba)};la.copy=function(){return hc(S)};return la}function Ib(){return 0}function Rb(S){return S.innerRadius}function zc(S){return S.outerRadius}function Tc(S){return S.startAngle}function dd(S){return S.endAngle}function Lc(S){return S&&S.padAngle}function kd(S,la,wa,Ba){return 0<(S-wa)*la-(la-Ba)*S?0:1}function md(S,la,wa,Ba,Ga){var Ka=S[0]-la[0],$a=S[1]-la[1];Ga=(Ga?Ba:-Ba)/Math.sqrt(Ka*Ka+$a*$a);$a*=Ga;Ka*=-Ga;var Sa=S[0]+$a,Za=S[1]+Ka,kb=la[0]+
$a,pb=la[1]+Ka;S=(Sa+kb)/2;la=(Za+pb)/2;Ga=kb-Sa;var vb=pb-Za,Db=Ga*Ga+vb*vb;Ba=wa-Ba;pb=Sa*pb-kb*Za;var Lb=(0>vb?-1:1)*Math.sqrt(Math.max(0,Ba*Ba*Db-pb*pb));Sa=(pb*vb-Ga*Lb)/Db;Za=(-pb*Ga-vb*Lb)/Db;kb=(pb*vb+Ga*Lb)/Db;Ga=(-pb*Ga+vb*Lb)/Db;vb=Sa-S;Db=Za-la;S=kb-S;la=Ga-la;vb*vb+Db*Db>S*S+la*la&&(Sa=kb,Za=Ga);return[[Sa-$a,Za-Ka],[Sa*wa/Ba,Za*wa/Ba]]}function Nd(S){function la(Za){function kb(){pb.push("M",Ka(S(vb),Sa))}for(var pb=[],vb=[],Db=-1,Lb=Za.length,Ob,Yb=nb(wa),dc=nb(Ba);++Db<Lb;)Ga.call(this,
Ob=Za[Db],Db)?vb.push([+Yb.call(this,Ob,Db),+dc.call(this,Ob,Db)]):vb.length&&(kb(),vb=[]);vb.length&&kb();return pb.length?pb.join(""):null}var wa=Df,Ba=Pg,Ga=xd,Ka=Bd,$a=Ka.key,Sa=.7;la.x=function(Za){if(!arguments.length)return wa;wa=Za;return la};la.y=function(Za){if(!arguments.length)return Ba;Ba=Za;return la};la.defined=function(Za){if(!arguments.length)return Ga;Ga=Za;return la};la.interpolate=function(Za){if(!arguments.length)return $a;$a="function"===typeof Za?Ka=Za:(Ka=Fk.get(Za)||Bd).key;
return la};la.tension=function(Za){if(!arguments.length)return Sa;Sa=Za;return la};return la}function Bd(S){return 1<S.length?S.join("L"):S+"Z"}function vd(S){return S.join("L")+"Z"}function Ld(S){for(var la=0,wa=S.length,Ba=S[0],Ga=[Ba[0],",",Ba[1]];++la<wa;)Ga.push("V",(Ba=S[la])[1],"H",Ba[0]);return Ga.join("")}function Zd(S){for(var la=0,wa=S.length,Ba=S[0],Ga=[Ba[0],",",Ba[1]];++la<wa;)Ga.push("H",(Ba=S[la])[0],"V",Ba[1]);return Ga.join("")}function de(S,la){if(1>la.length||S.length!=la.length&&
S.length!=la.length+2)return Bd(S);var wa=S.length!=la.length,Ba="",Ga=S[0],Ka=S[1],$a=la[0],Sa=$a,Za=1;wa&&(Ba+="Q"+(Ka[0]-2*$a[0]/3)+","+(Ka[1]-2*$a[1]/3)+","+Ka[0]+","+Ka[1],Ga=S[1],Za=2);if(1<la.length)for(Sa=la[1],Ka=S[Za],Za++,Ba+="C"+(Ga[0]+$a[0])+","+(Ga[1]+$a[1])+","+(Ka[0]-Sa[0])+","+(Ka[1]-Sa[1])+","+Ka[0]+","+Ka[1],Ga=2;Ga<la.length;Ga++,Za++)Ka=S[Za],Sa=la[Ga],Ba+="S"+(Ka[0]-Sa[0])+","+(Ka[1]-Sa[1])+","+Ka[0]+","+Ka[1];wa&&(S=S[Za],Ba+="Q"+(Ka[0]+2*Sa[0]/3)+","+(Ka[1]+2*Sa[1]/3)+","+
S[0]+","+S[1]);return Ba}function me(S,la){var wa=[];la=(1-la)/2;for(var Ba,Ga=S[0],Ka=S[1],$a=1,Sa=S.length;++$a<Sa;)Ba=Ga,Ga=Ka,Ka=S[$a],wa.push([la*(Ka[0]-Ba[0]),la*(Ka[1]-Ba[1])]);return wa}function He(S){if(3>S.length)return Bd(S);var la=1,wa=S.length,Ba=S[0],Ga=Ba[0],Ka=Ba[1],$a=[Ga,Ga,Ga,(Ba=S[1])[0]],Sa=[Ka,Ka,Ka,Ba[1]];Ga=[Ga,",",Ka,"L",Md(Uh,$a),",",Md(Uh,Sa)];for(S.push(S[wa-1]);++la<=wa;)Ba=S[la],$a.shift(),$a.push(Ba[0]),Sa.shift(),Sa.push(Ba[1]),Ee(Ga,$a,Sa);S.pop();Ga.push("L",Ba);
return Ga.join("")}function Md(S,la){return S[0]*la[0]+S[1]*la[1]+S[2]*la[2]+S[3]*la[3]}function Ee(S,la,wa){S.push("C",Md(Wf,la),",",Md(Wf,wa),",",Md(ek,la),",",Md(ek,wa),",",Md(Uh,la),",",Md(Uh,wa))}function Ce(S,la){return(la[1]-S[1])/(la[0]-S[0])}function ae(S){for(var la,wa=-1,Ba=S.length,Ga,Ka;++wa<Ba;)la=S[wa],Ga=la[0],Ka=la[1]-bf,la[0]=Ga*Math.cos(Ka),la[1]=Ga*Math.sin(Ka);return S}function we(S){function la(Db){function Lb(){Ob.push("M",Sa(S(dc),vb),pb,kb(S(Yb.reverse()),vb),"Z")}for(var Ob=
[],Yb=[],dc=[],mc=-1,Fc=Db.length,Pc,Oc=nb(wa),Wc=nb(Ga),Pb=wa===Ba?function(){return Hc}:nb(Ba),jc=Ga===Ka?function(){return ad}:nb(Ka),Hc,ad;++mc<Fc;)$a.call(this,Pc=Db[mc],mc)?(Yb.push([Hc=+Oc.call(this,Pc,mc),ad=+Wc.call(this,Pc,mc)]),dc.push([+Pb.call(this,Pc,mc),+jc.call(this,Pc,mc)])):Yb.length&&(Lb(),Yb=[],dc=[]);Yb.length&&Lb();return Ob.length?Ob.join(""):null}var wa=Df,Ba=Df,Ga=0,Ka=Pg,$a=xd,Sa=Bd,Za=Sa.key,kb=Sa,pb="L",vb=.7;la.x=function(Db){if(!arguments.length)return Ba;wa=Ba=Db;return la};
la.x0=function(Db){if(!arguments.length)return wa;wa=Db;return la};la.x1=function(Db){if(!arguments.length)return Ba;Ba=Db;return la};la.y=function(Db){if(!arguments.length)return Ka;Ga=Ka=Db;return la};la.y0=function(Db){if(!arguments.length)return Ga;Ga=Db;return la};la.y1=function(Db){if(!arguments.length)return Ka;Ka=Db;return la};la.defined=function(Db){if(!arguments.length)return $a;$a=Db;return la};la.interpolate=function(Db){if(!arguments.length)return Za;Za="function"===typeof Db?Sa=Db:(Sa=
Fk.get(Db)||Bd).key;kb=Sa.reverse||Sa;pb=Sa.closed?"M":"L";return la};la.tension=function(Db){if(!arguments.length)return vb;vb=Db;return la};return la}function Fe(S){return S.radius}function Ke(S){return[S.x,S.y]}function Jg(S){return function(){var la=S.apply(this,arguments),wa=la[0];la=la[1]-bf;return[wa*Math.cos(la),wa*Math.sin(la)]}}function vf(){return 64}function Xf(){return"circle"}function wf(S){S=Math.sqrt(S/fe);return"M0,"+S+"A"+S+","+S+" 0 1,1 0,"+-S+"A"+S+","+S+" 0 1,1 0,"+S+"Z"}function Kg(S){return function(){var la,
wa,Ba;(la=this[S])&&(Ba=la[wa=la.active])&&(Ba.timer.c=null,Ba.timer.t=NaN,--la.count?delete la[wa]:delete this[S],la.active+=.5,Ba.event&&Ba.event.interrupt.call(this,this.__data__,Ba.index))}}function xf(S,la,wa){Qj(S,nf);S.namespace=la;S.id=wa;return S}function Wi(S,la,wa,Ba){var Ga=S.id,Ka=S.namespace;return ca(S,"function"===typeof wa?function($a,Sa,Za){$a[Ka][Ga].tween.set(la,Ba(wa.call($a,$a.__data__,Sa,Za)))}:(wa=Ba(wa),function($a){$a[Ka][Ga].tween.set(la,wa)}))}function Lg(S){null==S&&(S=
"");return function(){this.textContent=S}}function df(S){return null==S?"__transition__":"__transition_"+S+"__"}function ve(S,la,wa,Ba,Ga){function Ka(Yb){var dc=kb.delay;Ob.t=dc+Lb;if(dc<=Yb)return $a(Yb-dc);Ob.c=$a}function $a(Yb){var dc=Za.active,mc=Za[dc];mc&&(mc.timer.c=null,mc.timer.t=NaN,--Za.count,delete Za[dc],mc.event&&mc.event.interrupt.call(S,S.__data__,mc.index));for(var Fc in Za)+Fc<Ba&&(dc=Za[Fc],dc.timer.c=null,dc.timer.t=NaN,--Za.count,delete Za[Fc]);Ob.c=Sa;ib(function(){Ob.c&&Sa(Yb||
1)&&(Ob.c=null,Ob.t=NaN);return 1},0,Lb);Za.active=Ba;kb.event&&kb.event.start.call(S,S.__data__,la);Db=[];kb.tween.forEach(function(Pc,Oc){(Oc=Oc.call(S,S.__data__,la))&&Db.push(Oc)});vb=kb.ease;pb=kb.duration}function Sa(Yb){Yb/=pb;for(var dc=vb(Yb),mc=Db.length;0<mc;)Db[--mc].call(S,dc);if(1<=Yb)return kb.event&&kb.event.end.call(S,S.__data__,la),--Za.count?delete Za[Ba]:delete S[wa],1}var Za=S[wa]||(S[wa]={active:0,count:0}),kb=Za[Ba],pb,vb,Db;if(!kb){var Lb=Ga.time;var Ob=ib(Ka,0,Lb);kb=Za[Ba]=
{tween:new p,time:Lb,timer:Ob,delay:Ga.delay,duration:Ga.duration,ease:Ga.ease,index:la};Ga=null;++Za.count}}function gf(S,la,wa){S.attr("transform",function(Ba){var Ga=la(Ba);return"translate("+(isFinite(Ga)?Ga:wa(Ba))+",0)"})}function dg(S,la,wa){S.attr("transform",function(Ba){var Ga=la(Ba);return"translate(0,"+(isFinite(Ga)?Ga:wa(Ba))+")"})}function Yf(S){return S.toISOString()}function Ag(S,la,wa){function Ba(Ka){return S(Ka)}function Ga(Ka,$a){var Sa=(Ka[1]-Ka[0])/$a,Za=Jb.bisect(fk,Sa);return Za==
fk.length?[la.year,aa(Ka.map(function(kb){return kb/31536E6}),$a)[2]]:Za?la[Sa/fk[Za-1]<fk[Za]/Sa?Za-1:Za]:[nl,aa(Ka,$a)[2]]}Ba.invert=function(Ka){return Bg(S.invert(Ka))};Ba.domain=function(Ka){if(!arguments.length)return S.domain().map(Bg);S.domain(Ka);return Ba};Ba.nice=function(Ka,$a){function Sa(pb){return!isNaN(pb)&&!Ka.range(pb,Bg(+pb+1),$a).length}var Za=Ba.domain(),kb=Sh(Za);if(kb=null==Ka?Ga(kb,10):"number"===typeof Ka&&Ga(kb,Ka))Ka=kb[0],$a=kb[1];return Ba.domain(vi(Za,1<$a?{floor:function(pb){for(;Sa(pb=
Ka.floor(pb));)pb=Bg(pb-1);return pb},ceil:function(pb){for(;Sa(pb=Ka.ceil(pb));)pb=Bg(+pb+1);return pb}}:Ka))};Ba.ticks=function(Ka,$a){var Sa=Sh(Ba.domain()),Za=null==Ka?Ga(Sa,10):"number"===typeof Ka?Ga(Sa,Ka):!Ka.range&&[{range:Ka},$a];Za&&(Ka=Za[0],$a=Za[1]);return Ka.range(Sa[0],Bg(+Sa[1]+1),1>$a?1:$a)};Ba.tickFormat=function(){return wa};Ba.copy=function(){return Ag(S.copy(),la,wa)};return Z(Ba,S)}function Bg(S){return new Date(S)}function wi(S){return JSON.parse(S.responseText)}function Gk(S){var la=
Lf.createRange();la.selectNode(Lf.body);return la.createContextualFragment(S.responseText)}var Jb={version:"3.5.17"},ch=[].slice,ag=function(S){return ch.call(S)},Lf=this.document;if(Lf)try{ag(Lf.documentElement.childNodes)[0].nodeType}catch(S){ag=function(la){for(var wa=la.length,Ba=Array(wa);wa--;)Ba[wa]=la[wa];return Ba}}Date.now||(Date.now=function(){return+new Date});if(Lf)try{Lf.createElement("DIV").style.setProperty("opacity",0,"")}catch(S){var of=this.Element.prototype,Vh=of.setAttribute,
Wh=of.setAttributeNS,Xh=this.CSSStyleDeclaration.prototype,xi=Xh.setProperty;of.setAttribute=function(la,wa){Vh.call(this,la,wa+"")};of.setAttributeNS=function(la,wa,Ba){Wh.call(this,la,wa,Ba+"")};Xh.setProperty=function(la,wa,Ba){xi.call(this,la,wa+"",Ba)}}Jb.ascending=h;Jb.descending=function(S,la){return la<S?-1:la>S?1:la>=S?0:NaN};Jb.min=function(S,la){var wa=-1,Ba=S.length,Ga;if(1===arguments.length){for(;++wa<Ba;)if(null!=(Ga=S[wa])&&Ga>=Ga){var Ka=Ga;break}for(;++wa<Ba;)null!=(Ga=S[wa])&&Ka>
Ga&&(Ka=Ga)}else{for(;++wa<Ba;)if(null!=(Ga=la.call(S,S[wa],wa))&&Ga>=Ga){Ka=Ga;break}for(;++wa<Ba;)null!=(Ga=la.call(S,S[wa],wa))&&Ka>Ga&&(Ka=Ga)}return Ka};Jb.max=function(S,la){var wa=-1,Ba=S.length,Ga;if(1===arguments.length){for(;++wa<Ba;)if(null!=(Ga=S[wa])&&Ga>=Ga){var Ka=Ga;break}for(;++wa<Ba;)null!=(Ga=S[wa])&&Ga>Ka&&(Ka=Ga)}else{for(;++wa<Ba;)if(null!=(Ga=la.call(S,S[wa],wa))&&Ga>=Ga){Ka=Ga;break}for(;++wa<Ba;)null!=(Ga=la.call(S,S[wa],wa))&&Ga>Ka&&(Ka=Ga)}return Ka};Jb.extent=function(S,
la){var wa=-1,Ba=S.length,Ga,Ka;if(1===arguments.length){for(;++wa<Ba;)if(null!=(Ga=S[wa])&&Ga>=Ga){var $a=Ka=Ga;break}for(;++wa<Ba;)null!=(Ga=S[wa])&&($a>Ga&&($a=Ga),Ka<Ga&&(Ka=Ga))}else{for(;++wa<Ba;)if(null!=(Ga=la.call(S,S[wa],wa))&&Ga>=Ga){$a=Ka=Ga;break}for(;++wa<Ba;)null!=(Ga=la.call(S,S[wa],wa))&&($a>Ga&&($a=Ga),Ka<Ga&&(Ka=Ga))}return[$a,Ka]};Jb.sum=function(S,la){var wa=0,Ba=S.length,Ga,Ka=-1;if(1===arguments.length)for(;++Ka<Ba;)isNaN(Ga=+S[Ka])||(wa+=Ga);else for(;++Ka<Ba;)isNaN(Ga=+la.call(S,
S[Ka],Ka))||(wa+=Ga);return wa};Jb.mean=function(S,la){var wa=0,Ba=S.length,Ga,Ka=-1,$a=Ba;if(1===arguments.length)for(;++Ka<Ba;)isNaN(Ga=l(S[Ka]))?--$a:wa+=Ga;else for(;++Ka<Ba;)isNaN(Ga=l(la.call(S,S[Ka],Ka)))?--$a:wa+=Ga;if($a)return wa/$a};Jb.quantile=function(S,la){var wa=(S.length-1)*la+1;la=Math.floor(wa);var Ba=+S[la-1];return(wa-=la)?Ba+wa*(S[la]-Ba):Ba};Jb.median=function(S,la){var wa=[],Ba=S.length,Ga,Ka=-1;if(1===arguments.length)for(;++Ka<Ba;)isNaN(Ga=l(S[Ka]))||wa.push(Ga);else for(;++Ka<
Ba;)isNaN(Ga=l(la.call(S,S[Ka],Ka)))||wa.push(Ga);if(wa.length)return Jb.quantile(wa.sort(h),.5)};Jb.variance=function(S,la){var wa=S.length,Ba=0,Ga,Ka=0,$a=-1,Sa=0;if(1===arguments.length)for(;++$a<wa;){if(!isNaN(Ga=l(S[$a]))){var Za=Ga-Ba;Ba+=Za/++Sa;Ka+=Za*(Ga-Ba)}}else for(;++$a<wa;)isNaN(Ga=l(la.call(S,S[$a],$a)))||(Za=Ga-Ba,Ba+=Za/++Sa,Ka+=Za*(Ga-Ba));if(1<Sa)return Ka/(Sa-1)};Jb.deviation=function(){var S=Jb.variance.apply(this,arguments);return S?Math.sqrt(S):S};var Bh=a(h);Jb.bisectLeft=
Bh.left;Jb.bisect=Jb.bisectRight=Bh.right;Jb.bisector=function(S){return a(1===S.length?function(la,wa){return h(S(la),wa)}:S)};Jb.shuffle=function(S,la,wa){3>(Ba=arguments.length)&&(wa=S.length,2>Ba&&(la=0));for(var Ba=wa-la,Ga,Ka;Ba;)Ka=Math.random()*Ba--|0,Ga=S[Ba+la],S[Ba+la]=S[Ka+la],S[Ka+la]=Ga;return S};Jb.permute=function(S,la){for(var wa=la.length,Ba=Array(wa);wa--;)Ba[wa]=S[la[wa]];return Ba};Jb.pairs=function(S){for(var la=0,wa=S.length-1,Ba=S[0],Ga=Array(0>wa?0:wa);la<wa;)Ga[la]=[Ba,Ba=
S[++la]];return Ga};Jb.transpose=function(S){if(!(Ka=S.length))return[];for(var la=-1,wa=Jb.min(S,g),Ba=Array(wa);++la<wa;)for(var Ga=-1,Ka,$a=Ba[la]=Array(Ka);++Ga<Ka;)$a[Ga]=S[Ga][la];return Ba};Jb.zip=function(){return Jb.transpose(arguments)};Jb.keys=function(S){var la=[],wa;for(wa in S)la.push(wa);return la};Jb.values=function(S){var la=[],wa;for(wa in S)la.push(S[wa]);return la};Jb.entries=function(S){var la=[],wa;for(wa in S)la.push({key:wa,value:S[wa]});return la};Jb.merge=function(S){var la=
S.length;var wa=-1;for(var Ba=0,Ga,Ka;++wa<la;)Ba+=S[wa].length;for(Ga=Array(Ba);0<=--la;)for(Ka=S[la],wa=Ka.length;0<=--wa;)Ga[--Ba]=Ka[wa];return Ga};var ge=Math.abs;Jb.range=function(S,la,wa){3>arguments.length&&(wa=1,2>arguments.length&&(la=S,S=0));if(Infinity===(la-S)/wa)throw Error("infinite range");var Ba=[];var Ga=ge(wa);for(var Ka=1;Ga*Ka%1;)Ka*=10;Ga=Ka;Ka=-1;var $a;S*=Ga;la*=Ga;wa*=Ga;if(0>wa)for(;($a=S+wa*++Ka)>la;)Ba.push($a/Ga);else for(;($a=S+wa*++Ka)<la;)Ba.push($a/Ga);return Ba};
Jb.map=function(S,la){var wa=new p;if(S instanceof p)S.forEach(function($a,Sa){wa.set($a,Sa)});else if(Array.isArray(S)){var Ba=-1,Ga=S.length,Ka;if(1===arguments.length)for(;++Ba<Ga;)wa.set(Ba,S[Ba]);else for(;++Ba<Ga;)wa.set(la.call(S,Ka=S[Ba],Ba),Ka)}else for(Ba in S)wa.set(Ba,S[Ba]);return wa};k(p,{has:f,get:function(S){return this._[n(S)]},set:function(S,la){return this._[n(S)]=la},remove:d,keys:q,values:function(){var S=[],la;for(la in this._)S.push(this._[la]);return S},entries:function(){var S=
[],la;for(la in this._)S.push({key:c(la),value:this._[la]});return S},size:r,empty:u,forEach:function(S){for(var la in this._)S.call(this,c(la),this._[la])}});Jb.nest=function(){function S(Sa,Za,kb){if(kb>=Ba.length)return $a?$a.call(wa,Za):Ka?Za.sort(Ka):Za;for(var pb=-1,vb=Za.length,Db=Ba[kb++],Lb,Ob,Yb=new p,dc;++pb<vb;)(dc=Yb.get(Lb=Db(Ob=Za[pb])))?dc.push(Ob):Yb.set(Lb,[Ob]);Sa?(Ob=Sa(),Za=function(mc,Fc){Ob.set(mc,S(Sa,Fc,kb))}):(Ob={},Za=function(mc,Fc){Ob[mc]=S(Sa,Fc,kb)});Yb.forEach(Za);
return Ob}function la(Sa,Za){if(Za>=Ba.length)return Sa;var kb=[],pb=Ga[Za++];Sa.forEach(function(vb,Db){kb.push({key:vb,values:la(Db,Za)})});return pb?kb.sort(function(vb,Db){return pb(vb.key,Db.key)}):kb}var wa={},Ba=[],Ga=[],Ka,$a;wa.map=function(Sa,Za){return S(Za,Sa,0)};wa.entries=function(Sa){return la(S(Jb.map,Sa,0),0)};wa.key=function(Sa){Ba.push(Sa);return wa};wa.sortKeys=function(Sa){Ga[Ba.length-1]=Sa;return wa};wa.sortValues=function(Sa){Ka=Sa;return wa};wa.rollup=function(Sa){$a=Sa;return wa};
return wa};Jb.set=function(S){var la=new v;if(S)for(var wa=0,Ba=S.length;wa<Ba;++wa)la.add(S[wa]);return la};k(v,{has:f,add:function(S){this._[n(S+="")]=!0;return S},remove:d,values:q,size:r,empty:u,forEach:function(S){for(var la in this._)S.call(this,c(la))}});Jb.behavior={};Jb.rebind=function(S,la){for(var wa=1,Ba=arguments.length,Ga;++wa<Ba;)S[Ga=arguments[wa]]=y(S,la,la[Ga]);return S};var Eh="webkit ms moz Moz o O".split(" ");Jb.dispatch=function(){for(var S=new E,la=-1,wa=arguments.length;++la<
wa;)S[arguments[la]]=B(S);return S};E.prototype.on=function(S,la){var wa=S.indexOf("."),Ba="";0<=wa&&(Ba=S.slice(wa+1),S=S.slice(0,wa));if(S)return 2>arguments.length?this[S].on(Ba):this[S].on(Ba,la);if(2===arguments.length){if(null==la)for(S in this)if(this.hasOwnProperty(S))this[S].on(Ba,null);return this}};Jb.event=null;Jb.requote=function(S){return S.replace(Yh,"\\$\x26")};var Yh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Qj={}.__proto__?function(S,la){S.__proto__=la}:function(S,la){for(var wa in la)S[wa]=
la[wa]},wk=function(S,la){return la.querySelector(S)},xk=function(S,la){return la.querySelectorAll(S)},Rj=function(S,la){var wa=S.matches||S[D(S,"matchesSelector")];Rj=function(Ba,Ga){return wa.call(Ba,Ga)};return Rj(S,la)};"function"===typeof Sizzle&&(wk=function(S,la){return Sizzle(S,la)[0]||null},xk=Sizzle,Rj=Sizzle.matchesSelector);Jb.selection=function(){return Jb.select(Lf.documentElement)};var Ie=Jb.selection.prototype=[];Ie.select=function(S){var la=[],wa,Ba,Ga,Ka;S=M(S);for(var $a=-1,Sa=
this.length;++$a<Sa;){la.push(wa=[]);wa.parentNode=(Ga=this[$a]).parentNode;for(var Za=-1,kb=Ga.length;++Za<kb;)(Ka=Ga[Za])?(wa.push(Ba=S.call(Ka,Ka.__data__,Za,$a)),Ba&&"__data__"in Ka&&(Ba.__data__=Ka.__data__)):wa.push(null)}return L(la)};Ie.selectAll=function(S){var la=[],wa,Ba;S=N(S);for(var Ga=-1,Ka=this.length;++Ga<Ka;)for(var $a=this[Ga],Sa=-1,Za=$a.length;++Sa<Za;)if(Ba=$a[Sa])la.push(wa=ag(S.call(Ba,Ba.__data__,Sa,Ga))),wa.parentNode=Ba;return L(la)};var Hk={svg:"http://www.w3.org/2000/svg",
xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Jb.ns={prefix:Hk,qualify:function(S){var la=S.indexOf(":"),wa=S;0<=la&&"xmlns"!==(wa=S.slice(0,la))&&(S=S.slice(la+1));return Hk.hasOwnProperty(wa)?{space:Hk[wa],local:S}:S}};Ie.attr=function(S,la){if(2>arguments.length){if("string"===typeof S){var wa=this.node();S=Jb.ns.qualify(S);return S.local?wa.getAttributeNS(S.space,S.local):wa.getAttribute(S)}for(la in S)this.each(H(la,
S[la]));return this}return this.each(H(S,la))};Ie.classed=function(S,la){if(2>arguments.length){if("string"===typeof S){var wa=this.node(),Ba=(S=(S+"").trim().split(/^|\s+/)).length,Ga=-1;if(la=wa.classList)for(;++Ga<Ba;){if(!la.contains(S[Ga]))return!1}else for(la=wa.getAttribute("class");++Ga<Ba;)if(!J(S[Ga]).test(la))return!1;return!0}for(la in S)this.each(O(la,S[la]));return this}return this.each(O(S,la))};Ie.style=function(S,la,wa){var Ba=arguments.length;if(3>Ba){if("string"!==typeof S){2>Ba&&
(la="");for(wa in S)this.each(U(wa,S[wa],la));return this}if(2>Ba)return Ba=this.node(),m(Ba).getComputedStyle(Ba,null).getPropertyValue(S);wa=""}return this.each(U(S,la,wa))};Ie.property=function(S,la){if(2>arguments.length){if("string"===typeof S)return this.node()[S];for(la in S)this.each(P(la,S[la]));return this}return this.each(P(S,la))};Ie.text=function(S){return arguments.length?this.each("function"===typeof S?function(){var la=S.apply(this,arguments);this.textContent=null==la?"":la}:null==
S?function(){this.textContent=""}:function(){this.textContent=S}):this.node().textContent};Ie.html=function(S){return arguments.length?this.each("function"===typeof S?function(){var la=S.apply(this,arguments);this.innerHTML=null==la?"":la}:null==S?function(){this.innerHTML=""}:function(){this.innerHTML=S}):this.node().innerHTML};Ie.append=function(S){S=V(S);return this.select(function(){return this.appendChild(S.apply(this,arguments))})};Ie.insert=function(S,la){S=V(S);la=M(la);return this.select(function(){return this.insertBefore(S.apply(this,
arguments),la.apply(this,arguments)||null)})};Ie.remove=function(){return this.each(Y)};Ie.data=function(S,la){function wa(pb,vb){var Db,Lb=pb.length,Ob=vb.length,Yb=Math.min(Lb,Ob),dc=Array(Ob),mc=Array(Ob),Fc=Array(Lb),Pc,Oc;if(la){Yb=new p;var Wc=Array(Lb),Pb;for(Db=-1;++Db<Lb;)if(Pc=pb[Db])Yb.has(Pb=la.call(Pc,Pc.__data__,Db))?Fc[Db]=Pc:Yb.set(Pb,Pc),Wc[Db]=Pb;for(Db=-1;++Db<Ob;)(Pc=Yb.get(Pb=la.call(vb,Oc=vb[Db],Db)))?!0!==Pc&&(dc[Db]=Pc,Pc.__data__=Oc):mc[Db]={__data__:Oc},Yb.set(Pb,!0);for(Db=
-1;++Db<Lb;)Db in Wc&&!0!==Yb.get(Wc[Db])&&(Fc[Db]=pb[Db])}else{for(Db=-1;++Db<Yb;)Pc=pb[Db],Oc=vb[Db],Pc?(Pc.__data__=Oc,dc[Db]=Pc):mc[Db]={__data__:Oc};for(;Db<Ob;++Db)mc[Db]={__data__:vb[Db]};for(;Db<Lb;++Db)Fc[Db]=pb[Db]}mc.update=dc;mc.parentNode=dc.parentNode=Fc.parentNode=pb.parentNode;Sa.push(mc);Za.push(dc);kb.push(Fc)}var Ba=-1,Ga=this.length,Ka,$a;if(!arguments.length){for(S=Array(Ga=(Ka=this[0]).length);++Ba<Ga;)if($a=Ka[Ba])S[Ba]=$a.__data__;return S}var Sa=ia([]),Za=L([]),kb=L([]);if("function"===
typeof S)for(;++Ba<Ga;)wa(Ka=this[Ba],S.call(Ka,Ka.parentNode.__data__,Ba));else for(;++Ba<Ga;)wa(Ka=this[Ba],S);Za.enter=function(){return Sa};Za.exit=function(){return kb};return Za};Ie.datum=function(S){return arguments.length?this.property("__data__",S):this.property("__data__")};Ie.filter=function(S){var la=[],wa,Ba,Ga;"function"!==typeof S&&(S=ba(S));for(var Ka=0,$a=this.length;Ka<$a;Ka++){la.push(wa=[]);wa.parentNode=(Ba=this[Ka]).parentNode;for(var Sa=0,Za=Ba.length;Sa<Za;Sa++)(Ga=Ba[Sa])&&
S.call(Ga,Ga.__data__,Sa,Ka)&&wa.push(Ga)}return L(la)};Ie.order=function(){for(var S=-1,la=this.length;++S<la;)for(var wa=this[S],Ba=wa.length-1,Ga=wa[Ba],Ka;0<=--Ba;)if(Ka=wa[Ba])Ga&&Ga!==Ka.nextSibling&&Ga.parentNode.insertBefore(Ka,Ga),Ga=Ka;return this};Ie.sort=function(S){S=ea.apply(this,arguments);for(var la=-1,wa=this.length;++la<wa;)this[la].sort(S);return this.order()};Ie.each=function(S){return ca(this,function(la,wa,Ba){S.call(la,la.__data__,wa,Ba)})};Ie.call=function(S){var la=ag(arguments);
S.apply(la[0]=this,la);return this};Ie.empty=function(){return!this.node()};Ie.node=function(){for(var S=0,la=this.length;S<la;S++)for(var wa=this[S],Ba=0,Ga=wa.length;Ba<Ga;Ba++){var Ka=wa[Ba];if(Ka)return Ka}return null};Ie.size=function(){var S=0;ca(this,function(){++S});return S};var Uf=[];Jb.selection.enter=ia;Jb.selection.enter.prototype=Uf;Uf.append=Ie.append;Uf.empty=Ie.empty;Uf.node=Ie.node;Uf.call=Ie.call;Uf.size=Ie.size;Uf.select=function(S){for(var la=[],wa,Ba,Ga,Ka,$a,Sa=-1,Za=this.length;++Sa<
Za;){Ga=(Ka=this[Sa]).update;la.push(wa=[]);wa.parentNode=Ka.parentNode;for(var kb=-1,pb=Ka.length;++kb<pb;)($a=Ka[kb])?(wa.push(Ga[kb]=Ba=S.call(Ka.parentNode,$a.__data__,kb,Sa)),Ba.__data__=$a.__data__):wa.push(null)}return L(la)};Uf.insert=function(S,la){2>arguments.length&&(la=fa(this));return Ie.insert.call(this,S,la)};Jb.select=function(S){if("string"===typeof S){var la=[wk(S,Lf)];la.parentNode=Lf.documentElement}else la=[S],la.parentNode=S&&(S.ownerDocument||S.document||S).documentElement;
return L([la])};Jb.selectAll=function(S){"string"===typeof S?(S=ag(xk(S,Lf)),S.parentNode=Lf.documentElement):(S=ag(S),S.parentNode=null);return L([S])};Ie.on=function(S,la,wa){var Ba=arguments.length;if(3>Ba){if("string"!==typeof S){2>Ba&&(la=!1);for(wa in S)this.each(ha(wa,S[wa],la));return this}if(2>Ba)return(Ba=this.node()["__on"+S])&&Ba._;wa=!1}return this.each(ha(S,la,wa))};var jh=Jb.map({mouseenter:"mouseover",mouseleave:"mouseout"});Lf&&jh.forEach(function(S){"on"+S in Lf&&jh.remove(S)});
var tg,hj=0;Jb.mouse=function(S){return ta(S,G())};var ki=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Jb.touch=function(S,la,wa){3>arguments.length&&(wa=la,la=G().changedTouches);if(la)for(var Ba=0,Ga=la.length,Ka;Ba<Ga;++Ba)if((Ka=la[Ba]).identifier===wa)return ta(S,Ka)};Jb.behavior.drag=function(){function S(){this.on("mousedown.drag",Ga).on("touchstart.drag",Ka)}function la($a,Sa,Za,kb,pb){return function(){var vb=Jb.event.target.correspondingElement||Jb.event.target,Db=this.parentNode,
Lb=wa.of(this,arguments),Ob=0,Yb=$a(),dc=".drag"+(null==Yb?"":"-"+Yb),mc=Jb.select(Za(vb)).on(kb+dc,function(){var Wc=Sa(Db,Yb);if(Wc){var Pb=Wc[0]-Pc[0];var jc=Wc[1]-Pc[1];Ob|=Pb|jc;Pc=Wc;Lb({type:"drag",x:Wc[0]+Oc[0],y:Wc[1]+Oc[1],dx:Pb,dy:jc})}}).on(pb+dc,function(){Sa(Db,Yb)&&(mc.on(kb+dc,null).on(pb+dc,null),Fc(Ob),Lb({type:"dragend"}))}),Fc=ra(vb),Pc=Sa(Db,Yb);if(Ba){var Oc=Ba.apply(this,arguments);Oc=[Oc.x-Pc[0],Oc.y-Pc[1]]}else Oc=[0,0];Lb({type:"dragstart"})}}var wa=I(S,"drag","dragstart",
"dragend"),Ba=null,Ga=la(x,Jb.mouse,m,"mousemove","mouseup"),Ka=la(oa,Jb.touch,w,"touchmove","touchend");S.origin=function($a){if(!arguments.length)return Ba;Ba=$a;return S};return Jb.rebind(S,wa,"on")};Jb.touches=function(S,la){2>arguments.length&&(la=G().touches);return la?ag(la).map(function(wa){var Ba=ta(S,wa);Ba.identifier=wa.identifier;return Ba}):[]};var fe=Math.PI,Ff=2*fe,ol=Ff-1E-6,bf=fe/2,le=fe/180,Xe=180/fe,Aj=Math.SQRT2;Jb.interpolateZoom=function(S,la){var wa=S[0],Ba=S[1],Ga=S[2];S=la[2];
var Ka=la[0]-wa,$a=la[1]-Ba,Sa=Ka*Ka+$a*$a;if(1E-12>Sa){var Za=Math.log(S/Ga)/Aj;S=function(vb){return[wa+vb*Ka,Ba+vb*$a,Ga*Math.exp(Aj*vb*Za)]}}else{var kb=Math.sqrt(Sa);la=(S*S-Ga*Ga+4*Sa)/(4*Ga*kb);S=(S*S-Ga*Ga-4*Sa)/(4*S*kb);var pb=Math.log(Math.sqrt(la*la+1)-la);Za=(Math.log(Math.sqrt(S*S+1)-S)-pb)/Aj;S=function(vb){vb*=Za;var Db=ya(pb),Lb=Aj*vb+pb;var Ob=((Lb=Math.exp(2*Lb))-1)/(Lb+1);var Yb=pb;Lb=((Yb=Math.exp(Yb))-1/Yb)/2;Ob=Ga/(2*kb)*(Db*Ob-Lb);return[wa+Ob*Ka,Ba+Ob*$a,Ga*Db/ya(Aj*vb+pb)]}}S.duration=
1E3*Za;return S};Jb.behavior.zoom=function(){function S(Zc){Zc.on("mousedown.zoom",kb).on(Xi+".zoom",vb).on("dblclick.zoom",Db).on("touchstart.zoom",pb)}function la(Zc){return[(Zc[0]-Lb.x)/Lb.k,(Zc[1]-Lb.y)/Lb.k]}function wa(Zc){Lb.k=Math.max(Fc[0],Math.min(Fc[1],Zc))}function Ba(Zc,Ed){Ed=[Ed[0]*Lb.k+Lb.x,Ed[1]*Lb.k+Lb.y];Lb.x+=Zc[0]-Ed[0];Lb.y+=Zc[1]-Ed[1]}function Ga(Zc,Ed,$d,he){Zc.__chart__={x:Lb.x,y:Lb.y,k:Lb.k};wa(Math.pow(2,he));Ba(Yb=Ed,$d);Zc=Jb.select(Zc);0<Pc&&(Zc=Zc.transition().duration(Pc));
Zc.call(S.event)}function Ka(){ad&&ad.domain(Hc.range().map(function(Zc){return(Zc-Lb.x)/Lb.k}).map(Hc.invert));hd&&hd.domain(jd.range().map(function(Zc){return(Zc-Lb.y)/Lb.k}).map(jd.invert))}function $a(Zc){Oc++||Zc({type:"zoomstart"})}function Sa(Zc){Ka();Zc({type:"zoom",scale:Lb.k,translate:[Lb.x,Lb.y]})}function Za(Zc){--Oc||(Zc({type:"zoomend"}),Yb=null)}function kb(){var Zc=this,Ed=jc.of(Zc,arguments),$d=0,he=Jb.select(m(Zc)).on("mousemove.zoom",function(){$d=1;Ba(Jb.mouse(Zc),ie);Sa(Ed)}).on("mouseup.zoom",
function(){he.on("mousemove.zoom",null).on("mouseup.zoom",null);oe($d);Za(Ed)}),ie=la(Jb.mouse(Zc)),oe=ra(Zc);gk.call(Zc);$a(Ed)}function pb(){function Zc(){var Ue=Jb.touches(ie);uf=Lb.k;Ue.forEach(function(Ne){Ne.identifier in Qd&&(Qd[Ne.identifier]=la(Ne))});return Ue}function Ed(){var Ue=Jb.event.target;Jb.select(Ue).on(Gh,$d).on(li,he);kj.push(Ue);Ue=Jb.event.changedTouches;for(var Ne=0,eg=Ue.length;Ne<eg;++Ne)Qd[Ue[Ne].identifier]=null;Ne=Zc();eg=Date.now();1===Ne.length?(500>eg-Pb&&(Ue=Ne[0],
Ga(ie,Ue,Qd[Ue.identifier],Math.floor(Math.log(Lb.k)/Math.LN2)+1),t()),Pb=eg):1<Ne.length&&(Ue=Ne[0],eg=Ne[1],Ne=Ue[0]-eg[0],Ue=Ue[1]-eg[1],Le=Ne*Ne+Ue*Ue)}function $d(){var Ue=Jb.touches(ie),Ne;gk.call(ie);for(var eg=0,Ik=Ue.length;eg<Ik;++eg,Ne=null){var yi=Ue[eg];if(Ne=Qd[yi.identifier]){if(Zh)break;var zi=yi;var Zh=Ne}}if(Ne){var Mg=(Mg=yi[0]-zi[0])*Mg+(Mg=yi[1]-zi[1])*Mg;Ue=Le&&Math.sqrt(Mg/Le);zi=[(zi[0]+yi[0])/2,(zi[1]+yi[1])/2];Zh=[(Zh[0]+Ne[0])/2,(Zh[1]+Ne[1])/2];wa(Ue*uf)}Pb=null;Ba(zi,
Zh);Sa(oe)}function he(){if(Jb.event.touches.length){for(var Ue=Jb.event.changedTouches,Ne=0,eg=Ue.length;Ne<eg;++Ne)delete Qd[Ue[Ne].identifier];for(var Ik in Qd)return void Zc()}Jb.selectAll(kj).on(Ye,null);ph.on("mousedown.zoom",kb).on("touchstart.zoom",pb);lj();Za(oe)}var ie=this,oe=jc.of(ie,arguments),Qd={},Le=0,uf,Ye=".zoom-"+Jb.event.changedTouches[0].identifier,Gh="touchmove"+Ye,li="touchend"+Ye,kj=[],ph=Jb.select(ie),lj=ra(ie);Ed();$a(oe);ph.on("mousedown.zoom",null).on("touchstart.zoom",
Ed)}function vb(){var Zc=jc.of(this,arguments);Wc?clearTimeout(Wc):(gk.call(this),Ob=la(Yb=dc||Jb.mouse(this)),$a(Zc));Wc=setTimeout(function(){Wc=null;Za(Zc)},50);t();wa(Math.pow(2,.002*Bj())*Lb.k);Ba(Yb,Ob);Sa(Zc)}function Db(){var Zc=Jb.mouse(this),Ed=Math.log(Lb.k)/Math.LN2;Ga(this,Zc,la(Zc),Jb.event.shiftKey?Math.ceil(Ed)-1:Math.floor(Ed)+1)}var Lb={x:0,y:0,k:1},Ob,Yb,dc,mc=[960,500],Fc=Zk,Pc=250,Oc=0,Wc,Pb,jc=I(S,"zoomstart","zoom","zoomend"),Hc,ad,jd,hd;Xi||(Xi="onwheel"in Lf?(Bj=function(){return-Jb.event.deltaY*
(Jb.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Lf?(Bj=function(){return Jb.event.wheelDelta},"mousewheel"):(Bj=function(){return-Jb.event.detail},"MozMousePixelScroll"));S.event=function(Zc){Zc.each(function(){var Ed=jc.of(this,arguments),$d=Lb;Ai?Jb.select(this).transition().each("start.zoom",function(){Lb=this.__chart__||{x:0,y:0,k:1};$a(Ed)}).tween("zoom:zoom",function(){var he=mc[0],ie=mc[1],oe=Yb?Yb[0]:he/2,Qd=Yb?Yb[1]:ie/2,Le=Jb.interpolateZoom([(oe-Lb.x)/Lb.k,(Qd-Lb.y)/Lb.k,he/Lb.k],
[(oe-$d.x)/$d.k,(Qd-$d.y)/$d.k,he/$d.k]);return function(uf){uf=Le(uf);var Ye=he/uf[2];this.__chart__=Lb={x:oe-uf[0]*Ye,y:Qd-uf[1]*Ye,k:Ye};Sa(Ed)}}).each("interrupt.zoom",function(){Za(Ed)}).each("end.zoom",function(){Za(Ed)}):(this.__chart__=Lb,$a(Ed),Sa(Ed),Za(Ed))})};S.translate=function(Zc){if(!arguments.length)return[Lb.x,Lb.y];Lb={x:+Zc[0],y:+Zc[1],k:Lb.k};Ka();return S};S.scale=function(Zc){if(!arguments.length)return Lb.k;Lb={x:Lb.x,y:Lb.y,k:null};wa(+Zc);Ka();return S};S.scaleExtent=function(Zc){if(!arguments.length)return Fc;
Fc=null==Zc?Zk:[+Zc[0],+Zc[1]];return S};S.center=function(Zc){if(!arguments.length)return dc;dc=Zc&&[+Zc[0],+Zc[1]];return S};S.size=function(Zc){if(!arguments.length)return mc;mc=Zc&&[+Zc[0],+Zc[1]];return S};S.duration=function(Zc){if(!arguments.length)return Pc;Pc=+Zc;return S};S.x=function(Zc){if(!arguments.length)return ad;ad=Zc;Hc=Zc.copy();Lb={x:0,y:0,k:1};return S};S.y=function(Zc){if(!arguments.length)return hd;hd=Zc;jd=Zc.copy();Lb={x:0,y:0,k:1};return S};return Jb.rebind(S,jc,"on")};var Zk=
[0,Infinity],Bj,Xi;Jb.color=xa;xa.prototype.toString=function(){return this.rgb()+""};Jb.hsl=Ca;var Bi=Ca.prototype=new xa;Bi.brighter=function(S){S=Math.pow(.7,arguments.length?S:1);return new Ca(this.h,this.s,this.l/S)};Bi.darker=function(S){S=Math.pow(.7,arguments.length?S:1);return new Ca(this.h,this.s,S*this.l)};Bi.rgb=function(){return Ja(this.h,this.s,this.l)};Jb.hcl=eb;var Yi=eb.prototype=new xa;Yi.brighter=function(S){return new eb(this.h,this.c,Math.min(100,this.l+Zi*(arguments.length?S:
1)))};Yi.darker=function(S){return new eb(this.h,this.c,Math.max(0,this.l-Zi*(arguments.length?S:1)))};Yi.rgb=function(){return Ra(this.h,this.c,this.l).rgb()};Jb.lab=Wa;var Zi=18,Id=.95047,Sj=1,Ef=1.08883,dh=Wa.prototype=new xa;dh.brighter=function(S){return new Wa(Math.min(100,this.l+Zi*(arguments.length?S:1)),this.a,this.b)};dh.darker=function(S){return new Wa(Math.max(0,this.l-Zi*(arguments.length?S:1)),this.a,this.b)};dh.rgb=function(){return Ea(this.l,this.a,this.b)};Jb.rgb=Fa;var Cj=Fa.prototype=
new xa;Cj.brighter=function(S){S=Math.pow(.7,arguments.length?S:1);var la=this.r,wa=this.g,Ba=this.b;if(!la&&!wa&&!Ba)return new Fa(30,30,30);la&&30>la&&(la=30);wa&&30>wa&&(wa=30);Ba&&30>Ba&&(Ba=30);return new Fa(Math.min(255,la/S),Math.min(255,wa/S),Math.min(255,Ba/S))};Cj.darker=function(S){S=Math.pow(.7,arguments.length?S:1);return new Fa(S*this.r,S*this.g,S*this.b)};Cj.hsl=function(){return bb(this.r,this.g,this.b)};Cj.toString=function(){return"#"+Oa(this.r)+Oa(this.g)+Oa(this.b)};var Li=Jb.map({aliceblue:15792383,
antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,
darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,
indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,
magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Li.forEach(function(S,la){Li.set(S,new Fa(la>>16,la>>8&255,la&255))});Jb.functor=nb;Jb.xhr=Da(w);Jb.dsv=function(S,la){function wa(kb,pb,vb){3>arguments.length&&(vb=pb,pb=null);var Db=Ha(kb,la,null==pb?Ba:Ga(pb),vb);Db.row=function(Lb){return arguments.length?Db.response(null==(pb=Lb)?Ba:Ga(Lb)):pb};return Db}function Ba(kb){return wa.parse(kb.responseText)}function Ga(kb){return function(pb){return wa.parse(pb.responseText,
kb)}}function Ka(kb){return kb.map($a).join(S)}function $a(kb){return Sa.test(kb)?'"'+kb.replace(/"/g,'""')+'"':kb}var Sa=new RegExp('["'+S+"\n]"),Za=S.charCodeAt(0);wa.parse=function(kb,pb){var vb;return wa.parseRows(kb,function(Db,Lb){if(vb)return vb(Db,Lb-1);var Ob=new Function("d","return {"+Db.map(function(Yb,dc){return JSON.stringify(Yb)+": d["+dc+"]"}).join(",")+"}");vb=pb?function(Yb,dc){return pb(Ob(Yb),dc)}:Ob})};wa.parseRows=function(kb,pb){function vb(){if(dc>=Yb)return Lb;if(Pc)return Pc=
!1,Db;var Wc=dc;if(34===kb.charCodeAt(Wc)){for(var Pb=Wc;Pb++<Yb;)if(34===kb.charCodeAt(Pb)){if(34!==kb.charCodeAt(Pb+1))break;++Pb}dc=Pb+2;var jc=kb.charCodeAt(Pb+1);13===jc?(Pc=!0,10===kb.charCodeAt(Pb+2)&&++dc):10===jc&&(Pc=!0);return kb.slice(Wc+1,Pb).replace(/""/g,'"')}for(;dc<Yb;){jc=kb.charCodeAt(dc++);Pb=1;if(10===jc)Pc=!0;else if(13===jc)Pc=!0,10===kb.charCodeAt(dc)&&(++dc,++Pb);else if(jc!==Za)continue;return kb.slice(Wc,dc-Pb)}return kb.slice(Wc)}for(var Db={},Lb={},Ob=[],Yb=kb.length,
dc=0,mc=0,Fc,Pc;(Fc=vb())!==Lb;){for(var Oc=[];Fc!==Db&&Fc!==Lb;)Oc.push(Fc),Fc=vb();pb&&null==(Oc=pb(Oc,mc++))||Ob.push(Oc)}return Ob};wa.format=function(kb){if(Array.isArray(kb[0]))return wa.formatRows(kb);var pb=new v,vb=[];kb.forEach(function(Db){for(var Lb in Db)pb.has(Lb)||vb.push(pb.add(Lb))});return[vb.map($a).join(S)].concat(kb.map(function(Db){return vb.map(function(Lb){return $a(Db[Lb])}).join(S)})).join("\n")};wa.formatRows=function(kb){return kb.map(Ka).join("\n")};return wa};Jb.csv=
Jb.dsv(",","text/csv");Jb.tsv=Jb.dsv("\t","text/tab-separated-values");var ij,Pf,Pe,kh,Mi=this[D(this,"requestAnimationFrame")]||function(S){setTimeout(S,17)};Jb.timer=function(){ib.apply(this,arguments)};Jb.timer.flush=function(){db();gb()};Jb.round=function(S,la){return la?Math.round(S*(la=Math.pow(10,la)))/la:Math.round(S)};var Ch="y z a f p n  m  k M G T P E Z Y".split(" ").map(function(S,la){var wa=Math.pow(10,3*ge(8-la));return{scale:8<la?function(Ba){return Ba/wa}:function(Ba){return Ba*wa},
symbol:S}});Jb.formatPrefix=function(S,la){var wa=0;if(S=+S)0>S&&(S*=-1),la&&(S=Jb.round(S,rb(S,la))),wa=1+Math.floor(1E-12+Math.log(S)/Math.LN10),wa=Math.max(-24,Math.min(24,3*Math.floor((wa-1)/3)));return Ch[8+wa/3]};var Tj=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Uj=Jb.map({b:function(S){return S.toString(2)},c:function(S){return String.fromCharCode(S)},o:function(S){return S.toString(8)},x:function(S){return S.toString(16)},X:function(S){return S.toString(16).toUpperCase()},
g:function(S,la){return S.toPrecision(la)},e:function(S,la){return S.toExponential(la)},f:function(S,la){return S.toFixed(la)},r:function(S,la){return(S=Jb.round(S,rb(S,la))).toFixed(Math.max(0,Math.min(20,rb(S*(1+1E-15),la))))}}),Jd=Jb.time={},Te=Date;gc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},
getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){qg.setUTCDate.apply(this._,arguments)},setDay:function(){qg.setUTCDay.apply(this._,arguments)},setFullYear:function(){qg.setUTCFullYear.apply(this._,arguments)},setHours:function(){qg.setUTCHours.apply(this._,
arguments)},setMilliseconds:function(){qg.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){qg.setUTCMinutes.apply(this._,arguments)},setMonth:function(){qg.setUTCMonth.apply(this._,arguments)},setSeconds:function(){qg.setUTCSeconds.apply(this._,arguments)},setTime:function(){qg.setTime.apply(this._,arguments)}};var qg=Date.prototype;Jd.year=tc(function(S){S=Jd.day(S);S.setMonth(0,1);return S},function(S,la){S.setFullYear(S.getFullYear()+la)},function(S){return S.getFullYear()});Jd.years=
Jd.year.range;Jd.years.utc=Jd.year.utc.range;Jd.day=tc(function(S){var la=new Te(2E3,0);la.setFullYear(S.getFullYear(),S.getMonth(),S.getDate());return la},function(S,la){S.setDate(S.getDate()+la)},function(S){return S.getDate()-1});Jd.days=Jd.day.range;Jd.days.utc=Jd.day.utc.range;Jd.dayOfYear=function(S){var la=Jd.year(S);return Math.floor((S-la-6E4*(S.getTimezoneOffset()-la.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(S,la){la=
7-la;var wa=Jd[S]=tc(function(Ba){(Ba=Jd.day(Ba)).setDate(Ba.getDate()-(Ba.getDay()+la)%7);return Ba},function(Ba,Ga){Ba.setDate(Ba.getDate()+7*Math.floor(Ga))},function(Ba){var Ga=Jd.year(Ba).getDay();return Math.floor((Jd.dayOfYear(Ba)+(Ga+la)%7)/7)-(Ga!==la)});Jd[S+"s"]=wa.range;Jd[S+"s"].utc=wa.utc.range;Jd[S+"OfYear"]=function(Ba){var Ga=Jd.year(Ba).getDay();return Math.floor((Jd.dayOfYear(Ba)+(Ga+la)%7)/7)}});Jd.week=Jd.sunday;Jd.weeks=Jd.sunday.range;Jd.weeks.utc=Jd.sunday.utc.range;Jd.weekOfYear=
Jd.sundayOfYear;var Vd={"-":"",_:" ",0:"0"},Kd=/^\s*\d+/,jj=/^%/;Jb.locale=function(S){return{numberFormat:Bb(S),timeFormat:Uc(S)}};var Ci=Jb.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),
shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});Jb.format=Ci.numberFormat;Jb.geo={};Eb.prototype={s:0,t:0,add:function(S){Vb(S,this.t,$h);Vb($h.s,this.s,this);this.s?this.t+=$h.t:this.s=$h.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var $h=new Eb;Jb.geo.stream=function(S,la){if(S&&Zf.hasOwnProperty(S.type))Zf[S.type](S,la);else Zb(S,la)};var Zf={Feature:function(S,la){Zb(S.geometry,la)},FeatureCollection:function(S,la){S=S.features;for(var wa=
-1,Ba=S.length;++wa<Ba;)Zb(S[wa].geometry,la)}},Fg={Sphere:function(S,la){la.sphere()},Point:function(S,la){S=S.coordinates;la.point(S[0],S[1],S[2])},MultiPoint:function(S,la){for(var wa=S.coordinates,Ba=-1,Ga=wa.length;++Ba<Ga;)S=wa[Ba],la.point(S[0],S[1],S[2])},LineString:function(S,la){Dc(S.coordinates,la,0)},MultiLineString:function(S,la){S=S.coordinates;for(var wa=-1,Ba=S.length;++wa<Ba;)Dc(S[wa],la,0)},Polygon:function(S,la){ic(S.coordinates,la)},MultiPolygon:function(S,la){S=S.coordinates;
for(var wa=-1,Ba=S.length;++wa<Ba;)ic(S[wa],la)},GeometryCollection:function(S,la){S=S.geometries;for(var wa=-1,Ba=S.length;++wa<Ba;)Zb(S[wa],la)}};Jb.geo.area=function(S){hk=0;Jb.geo.stream(S,ye);return hk};var hk,Rg=new Eb,ye={sphere:function(){hk+=4*fe},point:x,lineStart:x,lineEnd:x,polygonStart:function(){Rg.reset();ye.lineStart=Bc},polygonEnd:function(){var S=2*Rg;hk+=0>S?4*fe+S:S;ye.lineStart=ye.lineEnd=ye.point=x}};Jb.geo.bounds=function(){function S(Pb,jc){Pc.push(Oc=[pb=Pb,Db=Pb]);jc<vb&&
(vb=jc);jc>Lb&&(Lb=jc)}function la(Pb,jc){var Hc=Sc([Pb*le,jc*le]);if(mc){var ad=$c(mc,Hc);ad=$c([ad[1],-ad[0],0],ad);rd(ad);ad=wd(ad);var jd=Pb-Ob,hd=0<jd?1:-1,Zc=ad[0]*Xe*hd;jd=180<ge(jd);jd^(hd*Ob<Zc&&Zc<hd*Pb)?(jc=ad[1]*Xe,jc>Lb&&(Lb=jc)):(Zc=(Zc+360)%360-180,jd^(hd*Ob<Zc&&Zc<hd*Pb))?(jc=-ad[1]*Xe,jc<vb&&(vb=jc)):(jc<vb&&(vb=jc),jc>Lb&&(Lb=jc));jd?Pb<Ob?Sa(pb,Pb)>Sa(pb,Db)&&(Db=Pb):Sa(Pb,Db)>Sa(pb,Db)&&(pb=Pb):Db>=pb?(Pb<pb&&(pb=Pb),Pb>Db&&(Db=Pb)):Pb>Ob?Sa(pb,Pb)>Sa(pb,Db)&&(Db=Pb):Sa(Pb,Db)>
Sa(pb,Db)&&(pb=Pb)}else S(Pb,jc);mc=Hc;Ob=Pb}function wa(){Wc.point=la}function Ba(){Oc[0]=pb;Oc[1]=Db;Wc.point=S;mc=null}function Ga(Pb,jc){if(mc){var Hc=Pb-Ob;Fc+=180<ge(Hc)?Hc+(0<Hc?360:-360):Hc}else Yb=Pb,dc=jc;ye.point(Pb,jc);la(Pb,jc)}function Ka(){ye.lineStart()}function $a(){Ga(Yb,dc);ye.lineEnd();1E-6<ge(Fc)&&(pb=-(Db=180));Oc[0]=pb;Oc[1]=Db;mc=null}function Sa(Pb,jc){return 0>(jc-=Pb)?jc+360:jc}function Za(Pb,jc){return Pb[0]-jc[0]}function kb(Pb,jc){return jc[0]<=jc[1]?jc[0]<=Pb&&Pb<=jc[1]:
Pb<jc[0]||jc[1]<Pb}var pb,vb,Db,Lb,Ob,Yb,dc,mc,Fc,Pc,Oc,Wc={point:S,lineStart:wa,lineEnd:Ba,polygonStart:function(){Wc.point=Ga;Wc.lineStart=Ka;Wc.lineEnd=$a;Fc=0;ye.polygonStart()},polygonEnd:function(){ye.polygonEnd();Wc.point=S;Wc.lineStart=wa;Wc.lineEnd=Ba;0>Rg?(pb=-(Db=180),vb=-(Lb=90)):1E-6<Fc?Lb=90:-1E-6>Fc&&(vb=-90);Oc[0]=pb;Oc[1]=Db}};return function(Pb){Lb=Db=-(pb=vb=Infinity);Pc=[];Jb.geo.stream(Pb,Wc);if(Pb=Pc.length){Pc.sort(Za);for(var jc=1,Hc=Pc[0],ad,jd=[Hc];jc<Pb;++jc)ad=Pc[jc],kb(ad[0],
Hc)||kb(ad[1],Hc)?(Sa(Hc[0],ad[1])>Sa(Hc[0],Hc[1])&&(Hc[1]=ad[1]),Sa(ad[0],Hc[1])>Sa(Hc[0],Hc[1])&&(Hc[0]=ad[0])):jd.push(Hc=ad);var hd=-Infinity,Zc;Pb=jd.length-1;jc=0;for(Hc=jd[Pb];jc<=Pb;Hc=ad,++jc)ad=jd[jc],(Zc=Sa(Hc[1],ad[0]))>hd&&(hd=Zc,pb=ad[0],Db=Hc[1])}Pc=Oc=null;return Infinity===pb||Infinity===vb?[[NaN,NaN],[NaN,NaN]]:[[pb,vb],[Db,Lb]]}}();Jb.geo.centroid=function(S){lh=Ni=mh=nh=Qf=Sg=Tg=ug=Fh=oh=Ug=0;Jb.geo.stream(S,gg);S=Fh;var la=oh,wa=Ug,Ba=S*S+la*la+wa*wa;return 1E-12>Ba&&(S=Sg,la=
Tg,wa=ug,1E-6>Ni&&(S=mh,la=nh,wa=Qf),Ba=S*S+la*la+wa*wa,1E-12>Ba)?[NaN,NaN]:[Math.atan2(la,S)*Xe,sa(wa/Math.sqrt(Ba))*Xe]};var lh,Ni,mh,nh,Qf,Sg,Tg,ug,Fh,oh,Ug,gg={sphere:x,point:Jc,lineStart:ud,lineEnd:yd,polygonStart:function(){gg.lineStart=cb},polygonEnd:function(){gg.lineStart=ud}},qh=ke(xd,function(S){var la=NaN,wa=NaN,Ba=NaN,Ga;return{lineStart:function(){S.lineStart();Ga=1},point:function(Ka,$a){var Sa=0<Ka?fe:-fe,Za=ge(Ka-la);if(1E-6>ge(Za-fe))S.point(la,wa=0<(wa+$a)/2?bf:-bf),S.point(Ba,
wa),S.lineEnd(),S.lineStart(),S.point(Sa,wa),S.point(Ka,wa),Ga=0;else if(Ba!==Sa&&Za>=fe){1E-6>ge(la-Ba)&&(la-=1E-6*Ba);1E-6>ge(Ka-Sa)&&(Ka-=1E-6*Sa);Za=la;var kb=wa,pb=Ka,vb,Db,Lb=Math.sin(Za-pb);wa=1E-6<ge(Lb)?Math.atan((Math.sin(kb)*(Db=Math.cos($a))*Math.sin(pb)-Math.sin($a)*(vb=Math.cos(kb))*Math.sin(Za))/(vb*Db*Lb)):(kb+$a)/2;S.point(Ba,wa);S.lineEnd();S.lineStart();S.point(Sa,wa);Ga=0}S.point(la=Ka,wa=$a);Ba=Sa},lineEnd:function(){S.lineEnd();la=wa=NaN},clean:function(){return 2-Ga}}},function(S,
la,wa,Ba){null==S?(wa*=bf,Ba.point(-fe,wa),Ba.point(0,wa),Ba.point(fe,wa),Ba.point(fe,0),Ba.point(fe,-wa),Ba.point(0,-wa),Ba.point(-fe,-wa),Ba.point(-fe,0),Ba.point(-fe,wa)):1E-6<ge(S[0]-la[0])?(S=S[0]<la[0]?fe:-fe,wa=wa*S/2,Ba.point(-S,wa),Ba.point(0,wa),Ba.point(S,wa)):Ba.point(la[0],la[1])},[-fe,-fe/2]);Jb.geo.clipExtent=function(){var S,la,wa,Ba,Ga,Ka,$a={stream:function(Sa){Ga&&(Ga.valid=!1);Ga=Ka(Sa);Ga.valid=!0;return Ga},extent:function(Sa){if(!arguments.length)return[[S,la],[wa,Ba]];Ka=Xd(S=
+Sa[0][0],la=+Sa[0][1],wa=+Sa[1][0],Ba=+Sa[1][1]);Ga&&(Ga.valid=!1,Ga=null);return $a}};return $a.extent([[0,0],[960,500]])};(Jb.geo.conicEqualArea=function(){return sf(Re)}).raw=Re;Jb.geo.albers=function(){return Jb.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};Jb.geo.albersUsa=function(){function S(kb){var pb=kb[0];kb=kb[1];Ga=null;($a(pb,kb),Ga)||(Sa(pb,kb),Ga)||Za(pb,kb);return Ga}var la=Jb.geo.albers(),wa=Jb.geo.conicEqualArea().rotate([154,0]).center([-2,
58.5]).parallels([55,65]),Ba=Jb.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Ga,Ka={point:function(kb,pb){Ga=[kb,pb]}},$a,Sa,Za;S.invert=function(kb){var pb=la.scale(),vb=la.translate(),Db=(kb[0]-vb[0])/pb;pb=(kb[1]-vb[1])/pb;return(.12<=pb&&.234>pb&&-.425<=Db&&-.214>Db?wa:.166<=pb&&.234>pb&&-.214<=Db&&-.115>Db?Ba:la).invert(kb)};S.stream=function(kb){var pb=la.stream(kb),vb=wa.stream(kb),Db=Ba.stream(kb);return{point:function(Lb,Ob){pb.point(Lb,Ob);vb.point(Lb,Ob);Db.point(Lb,
Ob)},sphere:function(){pb.sphere();vb.sphere();Db.sphere()},lineStart:function(){pb.lineStart();vb.lineStart();Db.lineStart()},lineEnd:function(){pb.lineEnd();vb.lineEnd();Db.lineEnd()},polygonStart:function(){pb.polygonStart();vb.polygonStart();Db.polygonStart()},polygonEnd:function(){pb.polygonEnd();vb.polygonEnd();Db.polygonEnd()}}};S.precision=function(kb){if(!arguments.length)return la.precision();la.precision(kb);wa.precision(kb);Ba.precision(kb);return S};S.scale=function(kb){if(!arguments.length)return la.scale();
la.scale(kb);wa.scale(.35*kb);Ba.scale(kb);return S.translate(la.translate())};S.translate=function(kb){if(!arguments.length)return la.translate();var pb=la.scale(),vb=+kb[0],Db=+kb[1];$a=la.translate(kb).clipExtent([[vb-.455*pb,Db-.238*pb],[vb+.455*pb,Db+.238*pb]]).stream(Ka).point;Sa=wa.translate([vb-.307*pb,Db+.201*pb]).clipExtent([[vb-.425*pb+1E-6,Db+.12*pb+1E-6],[vb-.214*pb-1E-6,Db+.234*pb-1E-6]]).stream(Ka).point;Za=Ba.translate([vb-.205*pb,Db+.212*pb]).clipExtent([[vb-.214*pb+1E-6,Db+.166*
pb+1E-6],[vb-.115*pb-1E-6,Db+.234*pb-1E-6]]).stream(Ka).point;return S};return S.scale(1070)};var Dj,mj,Gg={point:x,lineStart:x,lineEnd:x,polygonStart:function(){mj=0;Gg.lineStart=tf},polygonEnd:function(){Gg.lineStart=Gg.lineEnd=Gg.point=x;Dj+=ge(mj/2)}},$i,aj,ai,bj,ik={point:function(S,la){S<$i&&($i=S);S>ai&&(ai=S);la<aj&&(aj=la);la>bj&&(bj=la)},lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},hg={point:fc,lineStart:Vc,lineEnd:Ua,polygonStart:function(){hg.lineStart=wb},polygonEnd:function(){hg.point=
fc;hg.lineStart=Vc;hg.lineEnd=Ua}};Jb.geo.path=function(){function S(Za){Za&&("function"===typeof wa&&$a.pointRadius(+wa.apply(this,arguments)),Sa&&Sa.valid||(Sa=Ka($a)),Jb.geo.stream(Za,Sa));return $a.result()}function la(){Sa=null;return S}var wa=4.5,Ba,Ga,Ka,$a,Sa;S.area=function(Za){Dj=0;Jb.geo.stream(Za,Ka(Gg));return Dj};S.centroid=function(Za){mh=nh=Qf=Sg=Tg=ug=Fh=oh=Ug=0;Jb.geo.stream(Za,Ka(hg));return Ug?[Fh/Ug,oh/Ug]:ug?[Sg/ug,Tg/ug]:Qf?[mh/Qf,nh/Qf]:[NaN,NaN]};S.bounds=function(Za){ai=
bj=-($i=aj=Infinity);Jb.geo.stream(Za,Ka(ik));return[[$i,aj],[ai,bj]]};S.projection=function(Za){if(!arguments.length)return Ba;Ka=(Ba=Za)?Za.stream||lc(Za):w;return la()};S.context=function(Za){if(!arguments.length)return Ga;$a=null==(Ga=Za)?new $e:new Fb(Za);"function"!==typeof wa&&$a.pointRadius(wa);return la()};S.pointRadius=function(Za){if(!arguments.length)return wa;wa="function"===typeof Za?Za:($a.pointRadius(+Za),+Za);return S};return S.projection(Jb.geo.albersUsa()).context(null)};Jb.geo.transform=
function(S){return{stream:function(la){la=new wc(la);for(var wa in S)la[wa]=S[wa];return la}}};wc.prototype={point:function(S,la){this.stream.point(S,la)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Jb.geo.projection=Qc;Jb.geo.projectionMutator=Ab;(Jb.geo.equirectangular=function(){return Qc(ec)}).raw=ec.invert=ec;
Jb.geo.rotation=function(S){function la(wa){wa=S(wa[0]*le,wa[1]*le);return wa[0]*=Xe,wa[1]*=Xe,wa}S=yc(S[0]%360*le,S[1]*le,2<S.length?S[2]*le:0);la.invert=function(wa){wa=S.invert(wa[0]*le,wa[1]*le);return wa[0]*=Xe,wa[1]*=Xe,wa};return la};xc.invert=ec;Jb.geo.circle=function(){function S(){var Ka="function"===typeof la?la.apply(this,arguments):la,$a=yc(-Ka[0]*le,-Ka[1]*le,0).invert,Sa=[];Ga(null,null,1,{point:function(Za,kb){Sa.push(Za=$a(Za,kb));Za[0]*=Xe;Za[1]*=Xe}});return{type:"Polygon",coordinates:[Sa]}}
var la=[0,0],wa,Ba=6,Ga;S.origin=function(Ka){if(!arguments.length)return la;la=Ka;return S};S.angle=function(Ka){if(!arguments.length)return wa;Ga=oc((wa=+Ka)*le,Ba*le);return S};S.precision=function(Ka){if(!arguments.length)return Ba;Ga=oc(wa*le,(Ba=+Ka)*le);return S};return S.angle(90)};Jb.geo.distance=function(S,la){var wa=(la[0]-S[0])*le,Ba=S[1]*le,Ga=la[1]*le;la=Math.cos(wa);S=Math.sin(Ba);Ba=Math.cos(Ba);var Ka=Math.sin(Ga);Ga=Math.cos(Ga);var $a;return Math.atan2(Math.sqrt(($a=Ga*Math.sin(wa))*
$a+($a=Ba*Ka-S*Ga*la)*$a),S*Ka+Ba*Ga*la)};Jb.geo.graticule=function(){function S(){return{type:"MultiLineString",coordinates:la()}}function la(){return Jb.range(Math.ceil(Ka/Db)*Db,Ga,Db).map(dc).concat(Jb.range(Math.ceil(kb/Lb)*Lb,Za,Lb).map(mc)).concat(Jb.range(Math.ceil(Ba/pb)*pb,wa,pb).filter(function(Pc){return 1E-6<ge(Pc%Db)}).map(Ob)).concat(Jb.range(Math.ceil(Sa/vb)*vb,$a,vb).filter(function(Pc){return 1E-6<ge(Pc%Lb)}).map(Yb))}var wa,Ba,Ga,Ka,$a,Sa,Za,kb,pb=10,vb=pb,Db=90,Lb=360,Ob,Yb,dc,
mc,Fc=2.5;S.lines=function(){return la().map(function(Pc){return{type:"LineString",coordinates:Pc}})};S.outline=function(){return{type:"Polygon",coordinates:[dc(Ka).concat(mc(Za).slice(1),dc(Ga).reverse().slice(1),mc(kb).reverse().slice(1))]}};S.extent=function(Pc){return arguments.length?S.majorExtent(Pc).minorExtent(Pc):S.minorExtent()};S.majorExtent=function(Pc){if(!arguments.length)return[[Ka,kb],[Ga,Za]];Ka=+Pc[0][0];Ga=+Pc[1][0];kb=+Pc[0][1];Za=+Pc[1][1];Ka>Ga&&(Pc=Ka,Ka=Ga,Ga=Pc);kb>Za&&(Pc=
kb,kb=Za,Za=Pc);return S.precision(Fc)};S.minorExtent=function(Pc){if(!arguments.length)return[[Ba,Sa],[wa,$a]];Ba=+Pc[0][0];wa=+Pc[1][0];Sa=+Pc[0][1];$a=+Pc[1][1];Ba>wa&&(Pc=Ba,Ba=wa,wa=Pc);Sa>$a&&(Pc=Sa,Sa=$a,$a=Pc);return S.precision(Fc)};S.step=function(Pc){return arguments.length?S.majorStep(Pc).minorStep(Pc):S.minorStep()};S.majorStep=function(Pc){if(!arguments.length)return[Db,Lb];Db=+Pc[0];Lb=+Pc[1];return S};S.minorStep=function(Pc){if(!arguments.length)return[pb,vb];pb=+Pc[0];vb=+Pc[1];
return S};S.precision=function(Pc){if(!arguments.length)return Fc;Fc=+Pc;Ob=qc(Sa,$a,90);Yb=id(Ba,wa,Fc);dc=qc(kb,Za,90);mc=id(Ka,Ga,Fc);return S};return S.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};Jb.geo.greatArc=function(){function S(){return{type:"LineString",coordinates:[wa||la.apply(this,arguments),Ga||Ba.apply(this,arguments)]}}var la=td,wa,Ba=qd,Ga;S.distance=function(){return Jb.geo.distance(wa||la.apply(this,arguments),Ga||Ba.apply(this,
arguments))};S.source=function(Ka){if(!arguments.length)return la;la=Ka;wa="function"===typeof Ka?null:Ka;return S};S.target=function(Ka){if(!arguments.length)return Ba;Ba=Ka;Ga="function"===typeof Ka?null:Ka;return S};S.precision=function(){return arguments.length?S:0};return S};Jb.geo.interpolate=function(S,la){return Dd(S[0]*le,S[1]*le,la[0]*le,la[1]*le)};Jb.geo.length=function(S){jk=0;Jb.geo.stream(S,bi);return jk};var jk,bi={sphere:x,point:x,lineStart:function(){function S(Ga,Ka){var $a=Math.sin(Ka*=
le);Ka=Math.cos(Ka);var Sa=ge((Ga*=le)-la),Za=Math.cos(Sa);jk+=Math.atan2(Math.sqrt((Sa=Ka*Math.sin(Sa))*Sa+(Sa=Ba*$a-wa*Ka*Za)*Sa),wa*$a+Ba*Ka*Za);la=Ga;wa=$a;Ba=Ka}var la,wa,Ba;bi.point=function(Ga,Ka){la=Ga*le;wa=Math.sin(Ka*=le);Ba=Math.cos(Ka);bi.point=S};bi.lineEnd=function(){bi.point=bi.lineEnd=x}},lineEnd:x,polygonStart:x,polygonEnd:x},Jk=od(function(S){return Math.sqrt(2/(1+S))},function(S){return 2*Math.asin(S/2)});(Jb.geo.azimuthalEqualArea=function(){return Qc(Jk)}).raw=Jk;var Kk=od(function(S){return(S=
Math.acos(S))&&S/Math.sin(S)},w);(Jb.geo.azimuthalEquidistant=function(){return Qc(Kk)}).raw=Kk;(Jb.geo.conicConformal=function(){return sf(re)}).raw=re;(Jb.geo.conicEquidistant=function(){return sf(ue)}).raw=ue;var Lk=od(function(S){return 1/S},Math.atan);(Jb.geo.gnomonic=function(){return Qc(Lk)}).raw=Lk;De.invert=function(S,la){return[S,2*Math.atan(Math.exp(la))-bf]};(Jb.geo.mercator=function(){return ne(De)}).raw=De;var Mk=od(function(){return 1},Math.asin);(Jb.geo.orthographic=function(){return Qc(Mk)}).raw=
Mk;var Nk=od(function(S){return 1/(1+S)},function(S){return 2*Math.atan(S)});(Jb.geo.stereographic=function(){return Qc(Nk)}).raw=Nk;ze.invert=function(S,la){return[-la,2*Math.atan(Math.exp(S))-bf]};(Jb.geo.transverseMercator=function(){var S=ne(ze),la=S.center,wa=S.rotate;S.center=function(Ba){return Ba?la([-Ba[1],Ba[0]]):(Ba=la(),[Ba[1],-Ba[0]])};S.rotate=function(Ba){return Ba?wa([Ba[0],Ba[1],2<Ba.length?Ba[2]+90:90]):(Ba=wa(),[Ba[0],Ba[1],Ba[2]-90])};return wa([0,0,90])}).raw=ze;Jb.geom={};Jb.geom.hull=
function(S){function la(Ga){if(3>Ga.length)return[];var Ka=nb(wa),$a=nb(Ba),Sa,Za=Ga.length,kb=[],pb=[];for(Sa=0;Sa<Za;Sa++)kb.push([+Ka.call(this,Ga[Sa],Sa),+$a.call(this,Ga[Sa],Sa),Sa]);kb.sort(hi);for(Sa=0;Sa<Za;Sa++)pb.push([kb[Sa][0],-kb[Sa][1]]);Ka=fg(kb);pb=fg(pb);$a=pb[0]===Ka[0];Za=pb[pb.length-1]===Ka[Ka.length-1];var vb=[];for(Sa=Ka.length-1;0<=Sa;--Sa)vb.push(Ga[kb[Ka[Sa]][2]]);for(Sa=+$a;Sa<pb.length-Za;++Sa)vb.push(Ga[kb[pb[Sa]][2]]);return vb}var wa=Df,Ba=Pg;if(arguments.length)return la(S);
la.x=function(Ga){return arguments.length?(wa=Ga,la):wa};la.y=function(Ga){return arguments.length?(Ba=Ga,la):Ba};return la};Jb.geom.polygon=function(S){Qj(S,Ej);return S};var Ej=Jb.geom.polygon.prototype=[];Ej.area=function(){for(var S=-1,la=this.length,wa,Ba=this[la-1],Ga=0;++S<la;)wa=Ba,Ba=this[S],Ga+=wa[1]*Ba[0]-wa[0]*Ba[1];return.5*Ga};Ej.centroid=function(S){var la=-1,wa=this.length,Ba=0,Ga=0,Ka=this[wa-1];for(arguments.length||(S=-1/(6*this.area()));++la<wa;){var $a=Ka;Ka=this[la];var Sa=$a[0]*
Ka[1]-Ka[0]*$a[1];Ba+=($a[0]+Ka[0])*Sa;Ga+=($a[1]+Ka[1])*Sa}return[Ba*S,Ga*S]};Ej.clip=function(S){for(var la,wa=Qg(S),Ba=-1,Ga=this.length-Qg(this),Ka,$a,Sa=this[Ga-1],Za,kb,pb;++Ba<Ga;){la=S.slice();S.length=0;Za=this[Ba];kb=la[($a=la.length-wa)-1];for(Ka=-1;++Ka<$a;)pb=la[Ka],ih(pb,Sa,Za)?(ih(kb,Sa,Za)||S.push(ii(kb,pb,Sa,Za)),S.push(pb)):ih(kb,Sa,Za)&&S.push(ii(kb,pb,Sa,Za)),kb=pb;wa&&S.push(S[0]);Sa=Za}return S};var ni,Jh,mi,mf=[],Vj,Ri,Yk=[];Qi.prototype.prepare=function(){for(var S=this.edges,
la=S.length,wa;la--;)wa=S[la].edge,wa.b&&wa.a||S.splice(la,1);S.sort(Vg);return S.length};sh.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};Be.prototype={insert:function(S,la){var wa;if(S){la.P=S;if(la.N=S.N)S.N.P=la;S.N=la;if(S.R){for(S=S.R;S.L;)S=S.L;S.L=la}else S.R=la;var Ba=S}else this._?(S=oj(this._),la.P=null,la.N=S,S.P=S.L=la,Ba=S):(la.P=la.N=null,this._=la,Ba=null);la.L=la.R=null;la.U=
Ba;la.C=!0;for(S=la;Ba&&Ba.C;)la=Ba.U,Ba===la.L?(wa=la.R)&&wa.C?(Ba.C=wa.C=!1,la.C=!0,S=la):(S===Ba.R&&(Kh(this,Ba),S=Ba,Ba=S.U),Ba.C=!1,la.C=!0,pi(this,la)):(wa=la.L)&&wa.C?(Ba.C=wa.C=!1,la.C=!0,S=la):(S===Ba.L&&(pi(this,Ba),S=Ba,Ba=S.U),Ba.C=!1,la.C=!0,Kh(this,la)),Ba=S.U;this._.C=!1},remove:function(S){S.N&&(S.N.P=S.P);S.P&&(S.P.N=S.N);S.N=S.P=null;var la=S.U,wa=S.L,Ba=S.R;var Ga=wa?Ba?oj(Ba):wa:Ba;la?la.L===S?la.L=Ga:la.R=Ga:this._=Ga;if(wa&&Ba){var Ka=Ga.C;Ga.C=S.C;Ga.L=wa;wa.U=Ga;Ga!==Ba?(la=
Ga.U,Ga.U=S.U,S=Ga.R,la.L=S,Ga.R=Ba,Ba.U=Ga):(Ga.U=la,la=Ga,S=Ga.R)}else Ka=S.C,S=Ga;S&&(S.U=la);if(!Ka)if(S&&S.C)S.C=!1;else{do{if(S===this._)break;if(S===la.L){if(S=la.R,S.C&&(S.C=!1,la.C=!0,Kh(this,la),S=la.R),S.L&&S.L.C||S.R&&S.R.C){S.R&&S.R.C||(S.L.C=!1,S.C=!0,pi(this,S),S=la.R);S.C=la.C;la.C=S.R.C=!1;Kh(this,la);S=this._;break}}else if(S=la.L,S.C&&(S.C=!1,la.C=!0,pi(this,la),S=la.L),S.L&&S.L.C||S.R&&S.R.C){S.L&&S.L.C||(S.R.C=!1,S.C=!0,Kh(this,S),S=la.L);S.C=la.C;la.C=S.L.C=!1;pi(this,la);S=
this._;break}S.C=!0;S=la;la=la.U}while(!S.C);S&&(S.C=!1)}}};Jb.geom.voronoi=function(S){function la(Za){var kb=Array(Za.length),pb=Sa[0][0],vb=Sa[0][1],Db=Sa[1][0],Lb=Sa[1][1];pj(wa(Za),Sa).cells.forEach(function(Ob,Yb){var dc=Ob.edges;Ob=Ob.site;(kb[Yb]=dc.length?dc.map(function(mc){mc=mc.start();return[mc.x,mc.y]}):Ob.x>=pb&&Ob.x<=Db&&Ob.y>=vb&&Ob.y<=Lb?[[pb,Lb],[Db,Lb],[Db,vb],[pb,vb]]:[]).point=Za[Yb]});return kb}function wa(Za){return Za.map(function(kb,pb){return{x:1E-6*Math.round(Ka(kb,pb)/
1E-6),y:1E-6*Math.round($a(kb,pb)/1E-6),i:pb}})}var Ba=Df,Ga=Pg,Ka=Ba,$a=Ga,Sa=ci;if(S)return la(S);la.links=function(Za){return pj(wa(Za)).edges.filter(function(kb){return kb.l&&kb.r}).map(function(kb){return{source:Za[kb.l.i],target:Za[kb.r.i]}})};la.triangles=function(Za){var kb=[];pj(wa(Za)).cells.forEach(function(pb,vb){var Db=pb.site;pb=pb.edges.sort(Vg);var Lb=-1,Ob=pb.length,Yb=pb[Ob-1].edge;for(Yb=Yb.l===Db?Yb.r:Yb.l;++Lb<Ob;){var dc=Yb;Yb=pb[Lb].edge;Yb=Yb.l===Db?Yb.r:Yb.l;vb<dc.i&&vb<Yb.i&&
0>(Db.x-Yb.x)*(dc.y-Db.y)-(Db.x-dc.x)*(Yb.y-Db.y)&&kb.push([Za[vb],Za[dc.i],Za[Yb.i]])}});return kb};la.x=function(Za){return arguments.length?(Ka=nb(Ba=Za),la):Ba};la.y=function(Za){return arguments.length?($a=nb(Ga=Za),la):Ga};la.clipExtent=function(Za){if(!arguments.length)return Sa===ci?null:Sa;Sa=null==Za?ci:Za;return la};la.size=function(Za){return arguments.length?la.clipExtent(Za&&[[0,0],Za]):Sa===ci?null:Sa&&Sa[1]};return la};var ci=[[-1E6,-1E6],[1E6,1E6]];Jb.geom.delaunay=function(S){return Jb.geom.voronoi().triangles(S)};
Jb.geom.quadtree=function(S,la,wa,Ba,Ga){function Ka(kb){function pb(ad,jd,hd,Zc,Ed,$d,he,ie){if(!isNaN(hd)&&!isNaN(Zc))if(ad.leaf){var oe=ad.x,Qd=ad.y;if(null!=oe){if(!(.01>ge(oe-hd)+ge(Qd-Zc))){var Le=ad.point;ad.x=ad.y=ad.point=null;vb(ad,Le,oe,Qd,Ed,$d,he,ie)}vb(ad,jd,hd,Zc,Ed,$d,he,ie)}else ad.x=hd,ad.y=Zc,ad.point=jd}else vb(ad,jd,hd,Zc,Ed,$d,he,ie)}function vb(ad,jd,hd,Zc,Ed,$d,he,ie){var oe=.5*(Ed+he),Qd=.5*($d+ie),Le=hd>=oe,uf=Zc>=Qd,Ye=uf<<1|Le;ad.leaf=!1;ad=ad.nodes[Ye]||(ad.nodes[Ye]=
rj());Le?Ed=oe:he=oe;uf?$d=Qd:ie=Qd;pb(ad,jd,hd,Zc,Ed,$d,he,ie)}var Db=nb($a),Lb=nb(Sa),Ob;if(null!=la){var Yb=la;var dc=wa;var mc=Ba;var Fc=Ga}else{mc=Fc=-(Yb=dc=Infinity);var Pc=[];var Oc=[];var Wc=kb.length;if(Za)for(Ob=0;Ob<Wc;++Ob){var Pb=kb[Ob];Pb.x<Yb&&(Yb=Pb.x);Pb.y<dc&&(dc=Pb.y);Pb.x>mc&&(mc=Pb.x);Pb.y>Fc&&(Fc=Pb.y);Pc.push(Pb.x);Oc.push(Pb.y)}else for(Ob=0;Ob<Wc;++Ob){var jc=+Db(Pb=kb[Ob],Ob);Pb=+Lb(Pb,Ob);jc<Yb&&(Yb=jc);Pb<dc&&(dc=Pb);jc>mc&&(mc=jc);Pb>Fc&&(Fc=Pb);Pc.push(jc);Oc.push(Pb)}}jc=
mc-Yb;Pb=Fc-dc;jc>Pb?Fc=dc+jc:mc=Yb+Pb;var Hc=rj();Hc.add=function(ad){pb(Hc,ad,+Db(ad,++Ob),+Lb(ad,Ob),Yb,dc,mc,Fc)};Hc.visit=function(ad){qi(ad,Hc,Yb,dc,mc,Fc)};Hc.find=function(ad){return Ak(Hc,ad[0],ad[1],Yb,dc,mc,Fc)};Ob=-1;if(null==la){for(;++Ob<Wc;)pb(Hc,kb[Ob],Pc[Ob],Oc[Ob],Yb,dc,mc,Fc);--Ob}else kb.forEach(Hc.add);Pc=Oc=kb=Pb=null;return Hc}var $a=Df,Sa=Pg,Za;if(Za=arguments.length)return $a=Si,Sa=Xj,3===Za&&(Ga=wa,Ba=la,wa=la=0),Ka(S);Ka.x=function(kb){return arguments.length?($a=kb,Ka):
$a};Ka.y=function(kb){return arguments.length?(Sa=kb,Ka):Sa};Ka.extent=function(kb){if(!arguments.length)return null==la?null:[[la,wa],[Ba,Ga]];null==kb?la=wa=Ba=Ga=null:(la=+kb[0][0],wa=+kb[0][1],Ba=+kb[1][0],Ga=+kb[1][1]);return Ka};Ka.size=function(kb){if(!arguments.length)return null==la?null:[Ba-la,Ga-wa];null==kb?la=wa=Ba=Ga=null:(la=wa=0,Ba=+kb[0],Ga=+kb[1]);return Ka};return Ka};Jb.interpolateRgb=Lh;Jb.interpolateObject=th;Jb.interpolateNumber=vg;Jb.interpolateString=Yj;var vh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
Bk=new RegExp(vh.source,"g");Jb.interpolate=uh;Jb.interpolators=[function(S,la){var wa=typeof la;return("string"===wa?Li.has(la.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(la)?Lh:Yj:la instanceof xa?Lh:Array.isArray(la)?Ti:"object"===wa&&isNaN(la)?th:vg)(S,la)}];Jb.interpolateArray=Ti;var di=function(){return w},pl=Jb.map({linear:di,poly:function(S){return function(la){return Math.pow(la,S)}},quad:function(){return Ui},cubic:function(){return Nh},sin:function(){return Je},exp:function(){return Me},circle:function(){return Xg},
elastic:function(S,la){2>arguments.length&&(la=.45);if(arguments.length)var wa=la/Ff*Math.asin(1/S);else S=1,wa=la/4;return function(Ba){return 1+S*Math.pow(2,-10*Ba)*Math.sin((Ba-wa)*Ff/la)}},back:function(S){S||(S=1.70158);return function(la){return la*la*((S+1)*la-S)}},bounce:function(){return Oh}}),kk=Jb.map({"in":w,out:Mh,"in-out":Se,"out-in":function(S){return Se(Mh(S))}});Jb.ease=function(S){var la=S.indexOf("-"),wa=0<=la?S.slice(0,la):S;la=0<=la?S.slice(la+1):"in";wa=pl.get(wa)||di;la=kk.get(la)||
w;return sj(la(wa.apply(null,ch.call(arguments,1))))};Jb.interpolateHcl=function(S,la){S=Jb.hcl(S);la=Jb.hcl(la);var wa=S.h,Ba=S.c,Ga=S.l,Ka=la.h-wa,$a=la.c-Ba,Sa=la.l-Ga;isNaN($a)&&($a=0,Ba=isNaN(Ba)?la.c:Ba);isNaN(Ka)?(Ka=0,wa=isNaN(wa)?la.h:wa):180<Ka?Ka-=360:-180>Ka&&(Ka+=360);return function(Za){return Ra(wa+Ka*Za,Ba+$a*Za,Ga+Sa*Za)+""}};Jb.interpolateHsl=function(S,la){S=Jb.hsl(S);la=Jb.hsl(la);var wa=S.h,Ba=S.s,Ga=S.l,Ka=la.h-wa,$a=la.s-Ba,Sa=la.l-Ga;isNaN($a)&&($a=0,Ba=isNaN(Ba)?la.s:Ba);
isNaN(Ka)?(Ka=0,wa=isNaN(wa)?la.h:wa):180<Ka?Ka-=360:-180>Ka&&(Ka+=360);return function(Za){return Ja(wa+Ka*Za,Ba+$a*Za,Ga+Sa*Za)+""}};Jb.interpolateLab=function(S,la){S=Jb.lab(S);la=Jb.lab(la);var wa=S.l,Ba=S.a,Ga=S.b,Ka=la.l-wa,$a=la.a-Ba,Sa=la.b-Ga;return function(Za){return Ea(wa+Ka*Za,Ba+$a*Za,Ga+Sa*Za)+""}};Jb.interpolateRound=tj;Jb.transform=function(S){var la=Lf.createElementNS(Jb.ns.prefix.svg,"g");return(Jb.transform=function(wa){if(null!=wa){la.setAttribute("transform",wa);var Ba=la.transform.baseVal.consolidate()}return new uj(Ba?
Ba.matrix:ql)})(S)};uj.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ql={a:1,b:0,c:0,d:1,e:0,f:0};Jb.interpolateTransform=cf;Jb.layout={};Jb.layout.bundle=function(){return function(S){for(var la=[],wa=-1,Ba=S.length;++wa<Ba;)la.push(ti(S[wa]));return la}};Jb.layout.chord=function(){function S(){var vb={},Db=[],Lb=Jb.range($a),Ob=[],Yb,dc;Ba=[];Ga=[];var mc=0;for(Yb=-1;++Yb<$a;){var Fc=0;for(dc=-1;++dc<$a;)Fc+=
Ka[Yb][dc];Db.push(Fc);Ob.push(Jb.range($a));mc+=Fc}Za&&Lb.sort(function(ad,jd){return Za(Db[ad],Db[jd])});kb&&Ob.forEach(function(ad,jd){ad.sort(function(hd,Zc){return kb(Ka[jd][hd],Ka[jd][Zc])})});mc=(Ff-Sa*$a)/mc;Fc=0;for(Yb=-1;++Yb<$a;){var Pc=Fc;for(dc=-1;++dc<$a;){var Oc=Lb[Yb],Wc=Ob[Oc][dc],Pb=Ka[Oc][Wc],jc=Fc,Hc=Fc+=Pb*mc;vb[Oc+"-"+Wc]={index:Oc,subindex:Wc,startAngle:jc,endAngle:Hc,value:Pb}}Ga[Oc]={index:Oc,startAngle:Pc,endAngle:Fc,value:Db[Oc]};Fc+=Sa}for(Yb=-1;++Yb<$a;)for(dc=Yb-1;++dc<
$a;)Lb=vb[Yb+"-"+dc],Ob=vb[dc+"-"+Yb],(Lb.value||Ob.value)&&Ba.push(Lb.value<Ob.value?{source:Ob,target:Lb}:{source:Lb,target:Ob});pb&&la()}function la(){Ba.sort(function(vb,Db){return pb((vb.source.value+vb.target.value)/2,(Db.source.value+Db.target.value)/2)})}var wa={},Ba,Ga,Ka,$a,Sa=0,Za,kb,pb;wa.matrix=function(vb){if(!arguments.length)return Ka;$a=(Ka=vb)&&Ka.length;Ba=Ga=null;return wa};wa.padding=function(vb){if(!arguments.length)return Sa;Sa=vb;Ba=Ga=null;return wa};wa.sortGroups=function(vb){if(!arguments.length)return Za;
Za=vb;Ba=Ga=null;return wa};wa.sortSubgroups=function(vb){if(!arguments.length)return kb;kb=vb;Ba=null;return wa};wa.sortChords=function(vb){if(!arguments.length)return pb;pb=vb;Ba&&la();return wa};wa.chords=function(){Ba||S();return Ba};wa.groups=function(){Ga||S();return Ga};return wa};Jb.layout.force=function(){function S(Oc){return function(Wc,Pb,jc,Hc){if(Wc.point!==Oc){jc=Wc.cx-Oc.x;var ad=Wc.cy-Oc.y;Pb=Hc-Pb;Hc=jc*jc+ad*ad;if(Pb*Pb/Ob<Hc)return Hc<Db&&(Pb=Wc.charge/Hc,Oc.px-=jc*Pb,Oc.py-=ad*
Pb),!0;Wc.point&&Hc&&Hc<Db&&(Pb=Wc.pointCharge/Hc,Oc.px-=jc*Pb,Oc.py-=ad*Pb)}return!Wc.charge}}function la(Oc){Oc.px=Jb.event.x;Oc.py=Jb.event.y;wa.resume()}var wa={},Ba=Jb.dispatch("start","tick","end"),Ga,Ka=[1,1],$a,Sa,Za=.9,kb=rl,pb=$k,vb=-30,Db=al,Lb=.1,Ob=.64,Yb=[],dc=[],mc,Fc,Pc;wa.tick=function(){if(.005>(Sa*=.99))return Ga=null,Ba.end({type:"end",alpha:Sa=0}),!0;var Oc=Yb.length,Wc=dc.length,Pb,jc;for(Pb=0;Pb<Wc;++Pb){var Hc=dc[Pb];var ad=Hc.source;var jd=Hc.target;var hd=jd.x-ad.x;var Zc=
jd.y-ad.y;if(jc=hd*hd+Zc*Zc)jc=Sa*Fc[Pb]*((jc=Math.sqrt(jc))-mc[Pb])/jc,hd*=jc,Zc*=jc,jd.x-=hd*(jc=ad.weight+jd.weight?ad.weight/(ad.weight+jd.weight):.5),jd.y-=Zc*jc,ad.x+=hd*(jc=1-jc),ad.y+=Zc*jc}if(jc=Sa*Lb)if(hd=Ka[0]/2,Zc=Ka[1]/2,Pb=-1,jc)for(;++Pb<Oc;)Hc=Yb[Pb],Hc.x+=(hd-Hc.x)*jc,Hc.y+=(Zc-Hc.y)*jc;if(vb)for(Vi(Wc=Jb.geom.quadtree(Yb),Sa,Pc),Pb=-1;++Pb<Oc;)(Hc=Yb[Pb]).fixed||Wc.visit(S(Hc));for(Pb=-1;++Pb<Oc;)Hc=Yb[Pb],Hc.fixed?(Hc.x=Hc.px,Hc.y=Hc.py):(Hc.x-=(Hc.px-(Hc.px=Hc.x))*Za,Hc.y-=(Hc.py-
(Hc.py=Hc.y))*Za);Ba.tick({type:"tick",alpha:Sa})};wa.nodes=function(Oc){if(!arguments.length)return Yb;Yb=Oc;return wa};wa.links=function(Oc){if(!arguments.length)return dc;dc=Oc;return wa};wa.size=function(Oc){if(!arguments.length)return Ka;Ka=Oc;return wa};wa.linkDistance=function(Oc){if(!arguments.length)return kb;kb="function"===typeof Oc?Oc:+Oc;return wa};wa.distance=wa.linkDistance;wa.linkStrength=function(Oc){if(!arguments.length)return pb;pb="function"===typeof Oc?Oc:+Oc;return wa};wa.friction=
function(Oc){if(!arguments.length)return Za;Za=+Oc;return wa};wa.charge=function(Oc){if(!arguments.length)return vb;vb="function"===typeof Oc?Oc:+Oc;return wa};wa.chargeDistance=function(Oc){if(!arguments.length)return Math.sqrt(Db);Db=Oc*Oc;return wa};wa.gravity=function(Oc){if(!arguments.length)return Lb;Lb=+Oc;return wa};wa.theta=function(Oc){if(!arguments.length)return Math.sqrt(Ob);Ob=Oc*Oc;return wa};wa.alpha=function(Oc){if(!arguments.length)return Sa;Oc=+Oc;Sa?0<Oc?Sa=Oc:(Ga.c=null,Ga.t=NaN,
Ga=null,Ba.end({type:"end",alpha:Sa=0})):0<Oc&&(Ba.start({type:"start",alpha:Sa=Oc}),Ga=ib(wa.tick));return wa};wa.start=function(){function Oc(Zc,Ed){if(!jd){jd=Array(Pb);for(he=0;he<Pb;++he)jd[he]=[];for(he=0;he<jc;++he){var $d=dc[he];jd[$d.source.index].push($d.target);jd[$d.target.index].push($d.source)}}$d=jd[Wc];for(var he=-1,ie=$d.length,oe;++he<ie;)if(!isNaN(oe=$d[he][Zc]))return oe;return Math.random()*Ed}var Wc,Pb=Yb.length,jc=dc.length,Hc=Ka[0],ad=Ka[1],jd,hd;for(Wc=0;Wc<Pb;++Wc)(hd=Yb[Wc]).index=
Wc,hd.weight=0;for(Wc=0;Wc<jc;++Wc)hd=dc[Wc],"number"==typeof hd.source&&(hd.source=Yb[hd.source]),"number"==typeof hd.target&&(hd.target=Yb[hd.target]),++hd.source.weight,++hd.target.weight;for(Wc=0;Wc<Pb;++Wc)hd=Yb[Wc],isNaN(hd.x)&&(hd.x=Oc("x",Hc)),isNaN(hd.y)&&(hd.y=Oc("y",ad)),isNaN(hd.px)&&(hd.px=hd.x),isNaN(hd.py)&&(hd.py=hd.y);mc=[];if("function"===typeof kb)for(Wc=0;Wc<jc;++Wc)mc[Wc]=+kb.call(this,dc[Wc],Wc);else for(Wc=0;Wc<jc;++Wc)mc[Wc]=kb;Fc=[];if("function"===typeof pb)for(Wc=0;Wc<jc;++Wc)Fc[Wc]=
+pb.call(this,dc[Wc],Wc);else for(Wc=0;Wc<jc;++Wc)Fc[Wc]=pb;Pc=[];if("function"===typeof vb)for(Wc=0;Wc<Pb;++Wc)Pc[Wc]=+vb.call(this,Yb[Wc],Wc);else for(Wc=0;Wc<Pb;++Wc)Pc[Wc]=vb;return wa.resume()};wa.resume=function(){return wa.alpha(.1)};wa.stop=function(){return wa.alpha(0)};wa.drag=function(){$a||($a=Jb.behavior.drag().origin(w).on("dragstart.force",Gf).on("drag.force",la).on("dragend.force",Rf));if(!arguments.length)return $a;this.on("mouseover.force",wj).on("mouseout.force",xj).call($a)};return Jb.rebind(wa,
Ba,"on")};var rl=20,$k=1,al=Infinity;Jb.layout.hierarchy=function(){function S(Ga){var Ka=[Ga],$a=[],Sa;for(Ga.depth=0;null!=(Sa=Ka.pop());)if($a.push(Sa),(kb=wa.call(S,Sa,Sa.depth))&&(Za=kb.length)){for(var Za,kb,pb;0<=--Za;)Ka.push(pb=kb[Za]),pb.parent=Sa,pb.depth=Sa.depth+1;Ba&&(Sa.value=0);Sa.children=kb}else Ba&&(Sa.value=+Ba.call(S,Sa,Sa.depth)||0),delete Sa.children;cg(Ga,function(vb){var Db,Lb;la&&(Db=vb.children)&&Db.sort(la);Ba&&(Lb=vb.parent)&&(Lb.value+=vb.value)});return $a}var la=Zg,
wa=Ck,Ba=ak;S.sort=function(Ga){if(!arguments.length)return la;la=Ga;return S};S.children=function(Ga){if(!arguments.length)return wa;wa=Ga;return S};S.value=function(Ga){if(!arguments.length)return Ba;Ba=Ga;return S};S.revalue=function(Ga){Ba&&(ff(Ga,function(Ka){Ka.children&&(Ka.value=0)}),cg(Ga,function(Ka){var $a;Ka.children||(Ka.value=+Ba.call(S,Ka,Ka.depth)||0);if($a=Ka.parent)$a.value+=Ka.value}));return Ga};return S};Jb.layout.partition=function(){function S(Ka,$a,Sa,Za){var kb=Ka.children;
Ka.x=$a;Ka.y=Ka.depth*Za;Ka.dx=Sa;Ka.dy=Za;if(kb&&(vb=kb.length)){var pb=-1,vb,Db;for(Sa=Ka.value?Sa/Ka.value:0;++pb<vb;)S(Db=kb[pb],$a,Ka=Db.value*Sa,Za),$a+=Ka}}function la(Ka){Ka=Ka.children;var $a=0;if(Ka&&(Za=Ka.length))for(var Sa=-1,Za;++Sa<Za;)$a=Math.max($a,la(Ka[Sa]));return 1+$a}function wa(Ka,$a){Ka=Ba.call(this,Ka,$a);S(Ka[0],0,Ga[0],Ga[1]/la(Ka[0]));return Ka}var Ba=Jb.layout.hierarchy(),Ga=[1,1];wa.size=function(Ka){if(!arguments.length)return Ga;Ga=Ka;return wa};return Hf(wa,Ba)};Jb.layout.pie=
function(){function S($a){var Sa=$a.length,Za=$a.map(function(mc,Fc){return+la.call(S,mc,Fc)}),kb=+("function"===typeof Ba?Ba.apply(this,arguments):Ba),pb=("function"===typeof Ga?Ga.apply(this,arguments):Ga)-kb,vb=Math.min(Math.abs(pb)/Sa,+("function"===typeof Ka?Ka.apply(this,arguments):Ka)),Db=vb*(0>pb?-1:1),Lb=Jb.sum(Za),Ob=Lb?(pb-Sa*Db)/Lb:0;Sa=Jb.range(Sa);var Yb=[],dc;null!=wa&&Sa.sort(wa===bl?function(mc,Fc){return Za[Fc]-Za[mc]}:function(mc,Fc){return wa($a[mc],$a[Fc])});Sa.forEach(function(mc){Yb[mc]=
{data:$a[mc],value:dc=Za[mc],startAngle:kb,endAngle:kb+=dc*Ob+Db,padAngle:vb}});return Yb}var la=Number,wa=bl,Ba=0,Ga=Ff,Ka=0;S.value=function($a){if(!arguments.length)return la;la=$a;return S};S.sort=function($a){if(!arguments.length)return wa;wa=$a;return S};S.startAngle=function($a){if(!arguments.length)return Ba;Ba=$a;return S};S.endAngle=function($a){if(!arguments.length)return Ga;Ga=$a;return S};S.padAngle=function($a){if(!arguments.length)return Ka;Ka=$a;return S};return S};var bl={};Jb.layout.stack=
function(){function S(Sa,Za){if(!(Db=Sa.length))return Sa;var kb=Sa.map(function(dc,mc){return la.call(S,dc,mc)}),pb=kb.map(function(dc){return dc.map(function(mc,Fc){return[Ka.call(S,mc,Fc),$a.call(S,mc,Fc)]})}),vb=wa.call(S,pb,Za);kb=Jb.permute(kb,vb);pb=Jb.permute(pb,vb);Za=Ba.call(S,pb,Za);vb=kb[0].length;var Db,Lb,Ob,Yb;for(Ob=0;Ob<vb;++Ob)for(Ga.call(S,kb[0][Ob],Yb=Za[Ob],pb[0][Ob][1]),Lb=1;Lb<Db;++Lb)Ga.call(S,kb[Lb][Ob],Yb+=pb[Lb-1][Ob][1],pb[Lb][Ob][1]);return Sa}var la=w,wa=$g,Ba=yh,Ga=
lg,Ka=xh,$a=kg;S.values=function(Sa){if(!arguments.length)return la;la=Sa;return S};S.order=function(Sa){if(!arguments.length)return wa;wa="function"===typeof Sa?Sa:sl.get(Sa)||$g;return S};S.offset=function(Sa){if(!arguments.length)return Ba;Ba="function"===typeof Sa?Sa:cj.get(Sa)||yh;return S};S.x=function(Sa){if(!arguments.length)return Ka;Ka=Sa;return S};S.y=function(Sa){if(!arguments.length)return $a;$a=Sa;return S};S.out=function(Sa){if(!arguments.length)return Ga;Ga=Sa;return S};return S};
var sl=Jb.map({"inside-out":function(S){var la=S.length,wa=S.map(ah),Ba=S.map(pe),Ga=Jb.range(la).sort(function(pb,vb){return wa[pb]-wa[vb]}),Ka=0,$a=0,Sa=[],Za=[];for(S=0;S<la;++S){var kb=Ga[S];Ka<$a?(Ka+=Ba[kb],Sa.push(kb)):($a+=Ba[kb],Za.push(kb))}return Za.reverse().concat(Sa)},reverse:function(S){return Jb.range(S.length).reverse()},"default":$g}),cj=Jb.map({silhouette:function(S){var la=S.length,wa=S[0].length,Ba=[],Ga=0,Ka,$a,Sa,Za=[];for($a=0;$a<wa;++$a){for(Sa=Ka=0;Ka<la;Ka++)Sa+=S[Ka][$a][1];
Sa>Ga&&(Ga=Sa);Ba.push(Sa)}for($a=0;$a<wa;++$a)Za[$a]=(Ga-Ba[$a])/2;return Za},wiggle:function(S){var la=S.length,wa=S[0],Ba=wa.length,Ga,Ka,$a,Sa,Za,kb,pb,vb=[];vb[0]=kb=pb=0;for(Ka=1;Ka<Ba;++Ka){for($a=Ga=0;Ga<la;++Ga)$a+=S[Ga][Ka][1];var Db=Ga=0;for(Za=wa[Ka][0]-wa[Ka-1][0];Ga<la;++Ga){var Lb=0;for(Sa=(S[Ga][Ka][1]-S[Ga][Ka-1][1])/(2*Za);Lb<Ga;++Lb)Sa+=(S[Lb][Ka][1]-S[Lb][Ka-1][1])/Za;Db+=Sa*S[Ga][Ka][1]}vb[Ka]=kb-=$a?Db/$a*Za:0;kb<pb&&(pb=kb)}for(Ka=0;Ka<Ba;++Ka)vb[Ka]-=pb;return vb},expand:function(S){var la=
S.length,wa=S[0].length,Ba=1/la,Ga,Ka,$a,Sa=[];for(Ka=0;Ka<wa;++Ka){for($a=Ga=0;Ga<la;Ga++)$a+=S[Ga][Ka][1];if($a)for(Ga=0;Ga<la;Ga++)S[Ga][Ka][1]/=$a;else for(Ga=0;Ga<la;Ga++)S[Ga][Ka][1]=Ba}for(Ka=0;Ka<wa;++Ka)Sa[Ka]=0;return Sa},zero:yh});Jb.layout.histogram=function(){function S(Ka,$a){var Sa=[],Za=Ka.map(wa,this),kb=Ba.call(this,Za,$a),pb=Ga.call(this,kb,Za,$a);$a=-1;for(var vb=Za.length,Db=pb.length-1,Lb=la?1:1/vb;++$a<Db;){var Ob=Sa[$a]=[];Ob.dx=pb[$a+1]-(Ob.x=pb[$a]);Ob.y=0}if(0<Db)for($a=
-1;++$a<vb;)Ob=Za[$a],Ob>=kb[0]&&Ob<=kb[1]&&(Ob=Sa[Jb.bisect(pb,Ob,1,Db)-1],Ob.y+=Lb,Ob.push(Ka[$a]));return Sa}var la=!0,wa=Number,Ba=mg,Ga=kf;S.value=function(Ka){if(!arguments.length)return wa;wa=Ka;return S};S.range=function(Ka){if(!arguments.length)return Ba;Ba=nb(Ka);return S};S.bins=function(Ka){if(!arguments.length)return Ga;Ga="number"===typeof Ka?function($a){return yj($a,Ka)}:nb(Ka);return S};S.frequency=function(Ka){if(!arguments.length)return la;la=!!Ka;return S};return S};Jb.layout.pack=
function(){function S(Ka,$a){Ka=la.call(this,Ka,$a);$a=Ka[0];var Sa=Ba[0],Za=Ba[1],kb=null==Ga?Math.sqrt:"function"===typeof Ga?Ga:function(){return Ga};$a.x=$a.y=0;cg($a,function(vb){vb.r=+kb(vb.value)});cg($a,bk);if(wa){var pb=wa*(Ga?1:Math.max(2*$a.r/Sa,2*$a.r/Za))/2;cg($a,function(vb){vb.r+=pb});cg($a,bk);cg($a,function(vb){vb.r-=pb})}zh($a,Sa/2,Za/2,Ga?1:1/Math.max(2*$a.r/Sa,2*$a.r/Za));return Ka}var la=Jb.layout.hierarchy().sort(wg),wa=0,Ba=[1,1],Ga;S.size=function(Ka){if(!arguments.length)return Ba;
Ba=Ka;return S};S.radius=function(Ka){if(!arguments.length)return Ga;Ga=null==Ka||"function"===typeof Ka?Ka:+Ka;return S};S.padding=function(Ka){if(!arguments.length)return wa;wa=+Ka;return S};return Hf(S,la)};Jb.layout.tree=function(){function S(kb,pb){kb=Ka.call(this,kb,pb);pb=kb[0];var vb=la(pb);cg(vb,wa);vb.parent.m=-vb.z;ff(vb,Ba);if(Za)ff(pb,Ga);else{var Db=pb,Lb=pb,Ob=pb;ff(pb,function(Fc){Fc.x<Db.x&&(Db=Fc);Fc.x>Lb.x&&(Lb=Fc);Fc.depth>Ob.depth&&(Ob=Fc)});var Yb=$a(Db,Lb)/2-Db.x,dc=Sa[0]/(Lb.x+
$a(Lb,Db)/2+Yb),mc=Sa[1]/(Ob.depth||1);ff(pb,function(Fc){Fc.x=(Fc.x+Yb)*dc;Fc.y=Fc.depth*mc})}return kb}function la(kb){kb={A:null,children:[kb]};for(var pb=[kb],vb;null!=(vb=pb.pop());)for(var Db=vb.children,Lb,Ob=0,Yb=Db.length;Ob<Yb;++Ob)pb.push((Db[Ob]=Lb={_:Db[Ob],parent:vb,children:(Lb=Db[Ob].children)&&Lb.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Ob}).a=Lb);return kb.children[0]}function wa(kb){var pb=kb.children,vb=kb.parent.children,Db=kb.i?vb[kb.i-1]:null;if(pb.length){for(var Lb=
0,Ob=0,Yb=kb.children,dc=Yb.length,mc;0<=--dc;)mc=Yb[dc],mc.z+=Lb,mc.m+=Lb,Lb+=mc.s+(Ob+=mc.c);pb=(pb[0].z+pb[pb.length-1].z)/2;Db?(kb.z=Db.z+$a(kb._,Db._),kb.m=kb.z-pb):kb.z=pb}else Db&&(kb.z=Db.z+$a(kb._,Db._));pb=kb.parent;vb=kb.parent.A||vb[0];if(Db){Ob=Lb=kb;Yb=Lb.parent.children[0];dc=Lb.m;mc=Ob.m;for(var Fc=Db.m,Pc=Yb.m,Oc;Db=Rh(Db),Lb=Bf(Lb),Db&&Lb;){Yb=Bf(Yb);Ob=Rh(Ob);Ob.a=kb;Oc=Db.z+Fc-Lb.z-dc+$a(Db._,Lb._);if(0<Oc){var Wc=Db.a.parent===kb.parent?Db.a:vb,Pb=kb,jc=Oc,Hc=jc/(Pb.i-Wc.i);Pb.c-=
Hc;Pb.s+=jc;Wc.c+=Hc;Pb.z+=jc;Pb.m+=jc;dc+=Oc;mc+=Oc}Fc+=Db.m;dc+=Lb.m;Pc+=Yb.m;mc+=Ob.m}Db&&!Rh(Ob)&&(Ob.t=Db,Ob.m+=Fc-mc);Lb&&!Bf(Yb)&&(Yb.t=Lb,Yb.m+=dc-Pc,vb=kb)}pb.A=vb}function Ba(kb){kb._.x=kb.z+kb.parent.m;kb.m+=kb.parent.m}function Ga(kb){kb.x*=Sa[0];kb.y=kb.depth*Sa[1]}var Ka=Jb.layout.hierarchy().sort(null).value(null),$a=ng,Sa=[1,1],Za=null;S.separation=function(kb){if(!arguments.length)return $a;$a=kb;return S};S.size=function(kb){if(!arguments.length)return Za?null:Sa;Za=null==(Sa=kb)?
Ga:null;return S};S.nodeSize=function(kb){if(!arguments.length)return Za?Sa:null;Za=null==(Sa=kb)?null:Ga;return S};return Hf(S,Ka)};Jb.layout.cluster=function(){function S(Ka,$a){Ka=la.call(this,Ka,$a);var Sa=Ka[0],Za,kb=0;cg(Sa,function(Lb){var Ob=Lb.children;Ob&&Ob.length?(Lb.x=Ah(Ob),Lb.y=If(Ob)):(Lb.x=Za?kb+=wa(Lb,Za):0,Lb.y=0,Za=Lb)});$a=ck(Sa);var pb=og(Sa),vb=$a.x-wa($a,pb)/2,Db=pb.x+wa(pb,$a)/2;cg(Sa,Ga?function(Lb){Lb.x=(Lb.x-Sa.x)*Ba[0];Lb.y=(Sa.y-Lb.y)*Ba[1]}:function(Lb){Lb.x=(Lb.x-vb)/
(Db-vb)*Ba[0];Lb.y=(1-(Sa.y?Lb.y/Sa.y:1))*Ba[1]});return Ka}var la=Jb.layout.hierarchy().sort(null).value(null),wa=ng,Ba=[1,1],Ga=!1;S.separation=function(Ka){if(!arguments.length)return wa;wa=Ka;return S};S.size=function(Ka){if(!arguments.length)return Ga?null:Ba;Ga=null==(Ba=Ka);return S};S.nodeSize=function(Ka){if(!arguments.length)return Ga?Ba:null;Ga=null!=(Ba=Ka);return S};return Hf(S,la)};Jb.layout.treemap=function(){function S(Ob,Yb){for(var dc=-1,mc=Ob.length,Fc,Pc;++dc<mc;)Pc=(Fc=Ob[dc]).value*
(0>Yb?0:Yb),Fc.area=isNaN(Pc)||0>=Pc?0:Pc}function la(Ob){var Yb=Ob.children;if(Yb&&Yb.length){var dc=kb(Ob),mc=[],Fc=Yb.slice(),Pc=Infinity,Oc,Wc="slice"===Db?dc.dx:"dice"===Db?dc.dy:"slice-dice"===Db?Ob.depth&1?dc.dy:dc.dx:Math.min(dc.dx,dc.dy);S(Fc,dc.dx*dc.dy/Ob.value);for(mc.area=0;0<(Ob=Fc.length);){mc.push(Ob=Fc[Ob-1]);mc.area+=Ob.area;if(!(Ob="squarify"!==Db)){Ob=Wc;for(var Pb=mc.area,jc=0,Hc=Infinity,ad=-1,jd=mc.length;++ad<jd;)if(Oc=mc[ad].area)Oc<Hc&&(Hc=Oc),Oc>jc&&(jc=Oc);Pb*=Pb;Ob*=Ob;
Ob=(Oc=Pb?Math.max(Ob*jc*Lb/Pb,Pb/(Ob*Hc*Lb)):Infinity)<=Pc}Ob?(Fc.pop(),Pc=Oc):(mc.area-=mc.pop().area,Ba(mc,Wc,dc,!1),Wc=Math.min(dc.dx,dc.dy),mc.length=mc.area=0,Pc=Infinity)}mc.length&&(Ba(mc,Wc,dc,!0),mc.length=mc.area=0);Yb.forEach(la)}}function wa(Ob){var Yb=Ob.children;if(Yb&&Yb.length){var dc=kb(Ob),mc=Yb.slice(),Fc=[];S(mc,dc.dx*dc.dy/Ob.value);for(Fc.area=0;Ob=mc.pop();)Fc.push(Ob),Fc.area+=Ob.area,null!=Ob.z&&(Ba(Fc,Ob.z?dc.dx:dc.dy,dc,!mc.length),Fc.length=Fc.area=0);Yb.forEach(wa)}}
function Ba(Ob,Yb,dc,mc){var Fc=-1,Pc=Ob.length,Oc=dc.x,Wc=dc.y,Pb=Yb?$a(Ob.area/Yb):0;if(Yb==dc.dx){if(mc||Pb>dc.dy)Pb=dc.dy;for(;++Fc<Pc;){var jc=Ob[Fc];jc.x=Oc;jc.y=Wc;jc.dy=Pb;Oc+=jc.dx=Math.min(dc.x+dc.dx-Oc,Pb?$a(jc.area/Pb):0)}jc.z=!0;jc.dx+=dc.x+dc.dx-Oc;dc.y+=Pb;dc.dy-=Pb}else{if(mc||Pb>dc.dx)Pb=dc.dx;for(;++Fc<Pc;)jc=Ob[Fc],jc.x=Oc,jc.y=Wc,jc.dx=Pb,Wc+=jc.dy=Math.min(dc.y+dc.dy-Wc,Pb?$a(jc.area/Pb):0);jc.z=!1;jc.dy+=dc.y+dc.dy-Wc;dc.x+=Pb;dc.dx-=Pb}}function Ga(Ob){Ob=vb||Ka(Ob);var Yb=
Ob[0];Yb.x=Yb.y=0;Yb.value?(Yb.dx=Sa[0],Yb.dy=Sa[1]):Yb.dx=Yb.dy=0;vb&&Ka.revalue(Yb);S([Yb],Yb.dx*Yb.dy/Yb.value);(vb?wa:la)(Yb);pb&&(vb=Ob);return Ob}var Ka=Jb.layout.hierarchy(),$a=Math.round,Sa=[1,1],Za=null,kb=Jf,pb=!1,vb,Db="squarify",Lb=.5*(1+Math.sqrt(5));Ga.size=function(Ob){if(!arguments.length)return Sa;Sa=Ob;return Ga};Ga.padding=function(Ob){function Yb(Fc){var Pc=Ob.call(Ga,Fc,Fc.depth);return null==Pc?Jf(Fc):ui(Fc,"number"===typeof Pc?[Pc,Pc,Pc,Pc]:Pc)}function dc(Fc){return ui(Fc,
Ob)}if(!arguments.length)return Za;var mc;kb=null==(Za=Ob)?Jf:"function"===(mc=typeof Ob)?Yb:"number"===mc?(Ob=[Ob,Ob,Ob,Ob],dc):dc;return Ga};Ga.round=function(Ob){if(!arguments.length)return $a!=Number;$a=Ob?Math.round:Number;return Ga};Ga.sticky=function(Ob){if(!arguments.length)return pb;pb=Ob;vb=null;return Ga};Ga.ratio=function(Ob){if(!arguments.length)return Lb;Lb=Ob;return Ga};Ga.mode=function(Ob){if(!arguments.length)return Db;Db=Ob+"";return Ga};return Hf(Ga,Ka)};Jb.random={normal:function(S,
la){var wa=arguments.length;2>wa&&(la=1);1>wa&&(S=0);return function(){do{var Ba=2*Math.random()-1;var Ga=2*Math.random()-1;Ga=Ba*Ba+Ga*Ga}while(!Ga||1<Ga);return S+la*Ba*Math.sqrt(-2*Math.log(Ga)/Ga)}},logNormal:function(){var S=Jb.random.normal.apply(Jb,arguments);return function(){return Math.exp(S())}},bates:function(S){var la=Jb.random.irwinHall(S);return function(){return la()/S}},irwinHall:function(S){return function(){for(var la=0,wa=0;wa<S;wa++)la+=Math.random();return la}}};Jb.scale={};
var Th={floor:w,ceil:w};Jb.scale.linear=function(){return ub([0,1],[0,1],uh,!1)};var pg={s:1,g:1,p:1,r:1,e:1};Jb.scale.log=function(){return Xa(Jb.scale.linear().domain([0,1]),10,!0,[1,10])};var Kf=Jb.format(".0e"),zg={floor:function(S){return-Math.ceil(-S)},ceil:function(S){return-Math.floor(-S)}};Jb.scale.pow=function(){return mb(Jb.scale.linear(),1,[0,1])};Jb.scale.sqrt=function(){return Jb.scale.pow().exponent(.5)};Jb.scale.ordinal=function(){return Kb([],{t:"range",a:[[]]})};Jb.scale.category10=
function(){return Jb.scale.ordinal().range(rg)};Jb.scale.category20=function(){return Jb.scale.ordinal().range(Cg)};Jb.scale.category20b=function(){return Jb.scale.ordinal().range(ei)};Jb.scale.category20c=function(){return Jb.scale.ordinal().range(eh)};var rg=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(La),Cg=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,
14408589,1556175,10410725].map(La),ei=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(La),eh=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(La);Jb.scale.quantile=function(){return Mb([],[])};Jb.scale.quantize=function(){return pc(0,1,[0,1])};
Jb.scale.threshold=function(){return rc([.5],[0,1])};Jb.scale.identity=function(){return hc([0,1])};Jb.svg={};Jb.svg.arc=function(){function S(){var kb=Math.max(0,+wa.apply(this,arguments)),pb=Math.max(0,+Ba.apply(this,arguments)),vb=$a.apply(this,arguments)-bf,Db=Sa.apply(this,arguments)-bf,Lb=Math.abs(Db-vb),Ob=vb>Db?0:1;if(pb<kb){var Yb=pb;pb=kb;kb=Yb}if(Lb>=ol)return la(pb,Ob)+(kb?la(kb,1-Ob):"")+"Z";var dc,mc=0,Fc=0,Pc=[];if(dc=(+Za.apply(this,arguments)||0)/2){var Oc=Ka===lk?Math.sqrt(kb*kb+
pb*pb):+Ka.apply(this,arguments);Ob||(Fc*=-1);pb&&(Fc=sa(Oc/pb*Math.sin(dc)));kb&&(mc=sa(Oc/kb*Math.sin(dc)))}if(pb){Oc=pb*Math.cos(vb+Fc);dc=pb*Math.sin(vb+Fc);var Wc=pb*Math.cos(Db-Fc);var Pb=pb*Math.sin(Db-Fc);var jc=Math.abs(Db-vb-2*Fc)<=fe?0:1;Fc&&kd(Oc,dc,Wc,Pb)===Ob^jc&&(Wc=(vb+Db)/2,Oc=pb*Math.cos(Wc),dc=pb*Math.sin(Wc),Wc=Pb=null)}else Oc=dc=0;if(kb){Fc=kb*Math.cos(Db-mc);var Hc=kb*Math.sin(Db-mc);var ad=kb*Math.cos(vb+mc);var jd=kb*Math.sin(vb+mc);var hd=Math.abs(vb-Db+2*mc)<=fe?0:1;mc&&
kd(Fc,Hc,ad,jd)===1-Ob^hd&&(ad=(vb+Db)/2,Fc=kb*Math.cos(ad),Hc=kb*Math.sin(ad),ad=jd=null)}else Fc=Hc=0;1E-6<Lb&&.001<(Yb=Math.min(Math.abs(pb-kb)/2,+Ga.apply(this,arguments)))?(jc=kb<pb^Ob?0:1,hd=vb=Yb,Lb<fe&&(Lb=null==ad?[Fc,Hc]:null==Wc?[Oc,dc]:ii([Oc,dc],[ad,jd],[Wc,Pb],[Fc,Hc]),hd=Oc-Lb[0],vb=dc-Lb[1],Db=Wc-Lb[0],mc=Pb-Lb[1],vb=1/Math.sin(Math.acos((hd*Db+vb*mc)/(Math.sqrt(hd*hd+vb*vb)*Math.sqrt(Db*Db+mc*mc)))/2),Lb=Math.sqrt(Lb[0]*Lb[0]+Lb[1]*Lb[1]),hd=Math.min(Yb,(kb-Lb)/(vb-1)),vb=Math.min(Yb,
(pb-Lb)/(vb+1))),null!=Wc?(Lb=md(null==ad?[Fc,Hc]:[ad,jd],[Oc,dc],pb,vb,Ob),Db=md([Wc,Pb],[Fc,Hc],pb,vb,Ob),Yb===vb?Pc.push("M",Lb[0],"A",vb,",",vb," 0 0,",jc," ",Lb[1],"A",pb,",",pb," 0 ",1-Ob^kd(Lb[1][0],Lb[1][1],Db[1][0],Db[1][1]),",",Ob," ",Db[1],"A",vb,",",vb," 0 0,",jc," ",Db[0]):Pc.push("M",Lb[0],"A",vb,",",vb," 0 1,",jc," ",Db[0])):Pc.push("M",Oc,",",dc),null!=ad?(pb=md([Oc,dc],[ad,jd],kb,-hd,Ob),Wc=md([Fc,Hc],null==Wc?[Oc,dc]:[Wc,Pb],kb,-hd,Ob),Yb===hd?Pc.push("L",Wc[0],"A",hd,",",hd," 0 0,",
jc," ",Wc[1],"A",kb,",",kb," 0 ",Ob^kd(Wc[1][0],Wc[1][1],pb[1][0],pb[1][1]),",",1-Ob," ",pb[1],"A",hd,",",hd," 0 0,",jc," ",pb[0]):Pc.push("L",Wc[0],"A",hd,",",hd," 0 0,",jc," ",pb[0])):Pc.push("L",Fc,",",Hc)):(Pc.push("M",Oc,",",dc),null!=Wc&&Pc.push("A",pb,",",pb," 0 ",jc,",",Ob," ",Wc,",",Pb),Pc.push("L",Fc,",",Hc),null!=ad&&Pc.push("A",kb,",",kb," 0 ",hd,",",1-Ob," ",ad,",",jd));Pc.push("Z");return Pc.join("")}function la(kb,pb){return"M0,"+kb+"A"+kb+","+kb+" 0 1,"+pb+" 0,"+-kb+"A"+kb+","+kb+
" 0 1,"+pb+" 0,"+kb}var wa=Rb,Ba=zc,Ga=Ib,Ka=lk,$a=Tc,Sa=dd,Za=Lc;S.innerRadius=function(kb){if(!arguments.length)return wa;wa=nb(kb);return S};S.outerRadius=function(kb){if(!arguments.length)return Ba;Ba=nb(kb);return S};S.cornerRadius=function(kb){if(!arguments.length)return Ga;Ga=nb(kb);return S};S.padRadius=function(kb){if(!arguments.length)return Ka;Ka=kb==lk?lk:nb(kb);return S};S.startAngle=function(kb){if(!arguments.length)return $a;$a=nb(kb);return S};S.endAngle=function(kb){if(!arguments.length)return Sa;
Sa=nb(kb);return S};S.padAngle=function(kb){if(!arguments.length)return Za;Za=nb(kb);return S};S.centroid=function(){var kb=(+wa.apply(this,arguments)+ +Ba.apply(this,arguments))/2,pb=(+$a.apply(this,arguments)+ +Sa.apply(this,arguments))/2-bf;return[Math.cos(pb)*kb,Math.sin(pb)*kb]};return S};var lk="auto";Jb.svg.line=function(){return Nd(w)};var Fk=Jb.map({linear:Bd,"linear-closed":vd,step:function(S){for(var la=0,wa=S.length,Ba=S[0],Ga=[Ba[0],",",Ba[1]];++la<wa;)Ga.push("H",(Ba[0]+(Ba=S[la])[0])/
2,"V",Ba[1]);1<wa&&Ga.push("H",Ba[0]);return Ga.join("")},"step-before":Ld,"step-after":Zd,basis:He,"basis-open":function(S){if(4>S.length)return Bd(S);for(var la=[],wa=-1,Ba=S.length,Ga,Ka=[0],$a=[0];3>++wa;)Ga=S[wa],Ka.push(Ga[0]),$a.push(Ga[1]);la.push(Md(Uh,Ka)+","+Md(Uh,$a));for(--wa;++wa<Ba;)Ga=S[wa],Ka.shift(),Ka.push(Ga[0]),$a.shift(),$a.push(Ga[1]),Ee(la,Ka,$a);return la.join("")},"basis-closed":function(S){for(var la,wa=-1,Ba=S.length,Ga=Ba+4,Ka,$a=[],Sa=[];4>++wa;)Ka=S[wa%Ba],$a.push(Ka[0]),
Sa.push(Ka[1]);la=[Md(Uh,$a),",",Md(Uh,Sa)];for(--wa;++wa<Ga;)Ka=S[wa%Ba],$a.shift(),$a.push(Ka[0]),Sa.shift(),Sa.push(Ka[1]),Ee(la,$a,Sa);return la.join("")},bundle:function(S,la){var wa=S.length-1;if(wa)for(var Ba=S[0][0],Ga=S[0][1],Ka=S[wa][0]-Ba,$a=S[wa][1]-Ga,Sa=-1,Za,kb;++Sa<=wa;)Za=S[Sa],kb=Sa/wa,Za[0]=la*Za[0]+(1-la)*(Ba+kb*Ka),Za[1]=la*Za[1]+(1-la)*(Ga+kb*$a);return He(S)},cardinal:function(S,la){return 3>S.length?Bd(S):S[0]+de(S,me(S,la))},"cardinal-open":function(S,la){return 4>S.length?
Bd(S):S[1]+de(S.slice(1,-1),me(S,la))},"cardinal-closed":function(S,la){return 3>S.length?vd(S):S[0]+de((S.push(S[0]),S),me([S[S.length-2]].concat(S,[S[1]]),la))},monotone:function(S){if(3>S.length)S=Bd(S);else{var la=S[0],wa=[],Ba;var Ga=0;var Ka=S.length-1;var $a=[];var Sa=S[1];for(Ba=$a[0]=Ce(S[0],Sa);++Ga<Ka;)$a[Ga]=(Ba+(Ba=Ce(Sa,Sa=S[Ga+1])))/2;$a[Ga]=Ba;for(var Za=-1,kb=S.length-1;++Za<kb;)Ga=Ce(S[Za],S[Za+1]),1E-6>ge(Ga)?$a[Za]=$a[Za+1]=0:(Ka=$a[Za]/Ga,Sa=$a[Za+1]/Ga,Ba=Ka*Ka+Sa*Sa,9<Ba&&(Ba=
3*Ga/Math.sqrt(Ba),$a[Za]=Ba*Ka,$a[Za+1]=Ba*Sa));for(Za=-1;++Za<=kb;)Ba=(S[Math.min(kb,Za+1)][0]-S[Math.max(0,Za-1)][0])/(6*(1+$a[Za]*$a[Za])),wa.push([Ba||0,$a[Za]*Ba||0]);S=la+de(S,wa)}return S}});Fk.forEach(function(S,la){la.key=S;la.closed=/-closed$/.test(S)});var Wf=[0,2/3,1/3,0],ek=[0,1/3,2/3,0],Uh=[0,1/6,2/3,1/6];Jb.svg.line.radial=function(){var S=Nd(ae);S.radius=S.x;delete S.x;S.angle=S.y;delete S.y;return S};Ld.reverse=Zd;Zd.reverse=Ld;Jb.svg.area=function(){return we(w)};Jb.svg.area.radial=
function(){var S=we(ae);S.radius=S.x;delete S.x;S.innerRadius=S.x0;delete S.x0;S.outerRadius=S.x1;delete S.x1;S.angle=S.y;delete S.y;S.startAngle=S.y0;delete S.y0;S.endAngle=S.y1;delete S.y1;return S};Jb.svg.chord=function(){function S(Za,kb){var pb=la(this,Ba,Za,kb);Za=la(this,Ga,Za,kb);return"M"+pb.p0+wa(pb.r,pb.p1,pb.a1-pb.a0)+(pb.a0==Za.a0&&pb.a1==Za.a1?"Q 0,0 "+pb.p0:"Q 0,0 "+Za.p0+wa(Za.r,Za.p1,Za.a1-Za.a0)+("Q 0,0 "+pb.p0))+"Z"}function la(Za,kb,pb,vb){var Db=kb.call(Za,pb,vb);kb=Ka.call(Za,
Db,vb);pb=$a.call(Za,Db,vb)-bf;Za=Sa.call(Za,Db,vb)-bf;return{r:kb,a0:pb,a1:Za,p0:[kb*Math.cos(pb),kb*Math.sin(pb)],p1:[kb*Math.cos(Za),kb*Math.sin(Za)]}}function wa(Za,kb,pb){return"A"+Za+","+Za+" 0 "+ +(pb>fe)+",1 "+kb}var Ba=td,Ga=qd,Ka=Fe,$a=Tc,Sa=dd;S.radius=function(Za){if(!arguments.length)return Ka;Ka=nb(Za);return S};S.source=function(Za){if(!arguments.length)return Ba;Ba=nb(Za);return S};S.target=function(Za){if(!arguments.length)return Ga;Ga=nb(Za);return S};S.startAngle=function(Za){if(!arguments.length)return $a;
$a=nb(Za);return S};S.endAngle=function(Za){if(!arguments.length)return Sa;Sa=nb(Za);return S};return S};Jb.svg.diagonal=function(){function S(Ga,Ka){var $a=la.call(this,Ga,Ka);Ga=wa.call(this,Ga,Ka);Ka=($a.y+Ga.y)/2;$a=[$a,{x:$a.x,y:Ka},{x:Ga.x,y:Ka},Ga];$a=$a.map(Ba);return"M"+$a[0]+"C"+$a[1]+" "+$a[2]+" "+$a[3]}var la=td,wa=qd,Ba=Ke;S.source=function(Ga){if(!arguments.length)return la;la=nb(Ga);return S};S.target=function(Ga){if(!arguments.length)return wa;wa=nb(Ga);return S};S.projection=function(Ga){if(!arguments.length)return Ba;
Ba=Ga;return S};return S};Jb.svg.diagonal.radial=function(){var S=Jb.svg.diagonal(),la=Ke,wa=S.projection;S.projection=function(Ba){return arguments.length?wa(Jg(la=Ba)):la};return S};Jb.svg.symbol=function(){function S(Ba,Ga){return(Ok.get(la.call(this,Ba,Ga))||wf)(wa.call(this,Ba,Ga))}var la=Xf,wa=vf;S.type=function(Ba){if(!arguments.length)return la;la=nb(Ba);return S};S.size=function(Ba){if(!arguments.length)return wa;wa=nb(Ba);return S};return S};var Ok=Jb.map({circle:wf,cross:function(S){S=
Math.sqrt(S/5)/2;return"M"+-3*S+","+-S+"H"+-S+"V"+-3*S+"H"+S+"V"+-S+"H"+3*S+"V"+S+"H"+S+"V"+3*S+"H"+-S+"V"+S+"H"+-3*S+"Z"},diamond:function(S){S=Math.sqrt(S/(2*Mf));var la=S*Mf;return"M0,"+-S+"L"+la+",0 0,"+S+" "+-la+",0Z"},square:function(S){S=Math.sqrt(S)/2;return"M"+-S+","+-S+"L"+S+","+-S+" "+S+","+S+" "+-S+","+S+"Z"},"triangle-down":function(S){S=Math.sqrt(S/fh);var la=S*fh/2;return"M0,"+la+"L"+S+","+-la+" "+-S+","+-la+"Z"},"triangle-up":function(S){S=Math.sqrt(S/fh);var la=S*fh/2;return"M0,"+
-la+"L"+S+","+la+" "+-S+","+la+"Z"}});Jb.svg.symbolTypes=Ok.keys();var fh=Math.sqrt(3),Mf=Math.tan(30*le);Ie.transition=function(S){var la=Ai||++cl;S=df(S);for(var wa=[],Ba,Ga,Ka=Fj||{time:Date.now(),ease:Wg,delay:0,duration:250},$a=-1,Sa=this.length;++$a<Sa;){wa.push(Ba=[]);for(var Za=this[$a],kb=-1,pb=Za.length;++kb<pb;)(Ga=Za[kb])&&ve(Ga,kb,S,la,Ka),Ba.push(Ga)}return xf(wa,S,la)};Ie.interrupt=function(S){return this.each(null==S?gk:Kg(df(S)))};var gk=Kg(df()),nf=[],cl=0,Ai,Fj;nf.call=Ie.call;
nf.empty=Ie.empty;nf.node=Ie.node;nf.size=Ie.size;Jb.transition=function(S,la){return S&&S.transition?Ai?S.transition(la):S:Jb.selection().transition(S)};Jb.transition.prototype=nf;nf.select=function(S){var la=this.id,wa=this.namespace,Ba=[],Ga,Ka,$a;S=M(S);for(var Sa=-1,Za=this.length;++Sa<Za;){Ba.push(Ga=[]);for(var kb=this[Sa],pb=-1,vb=kb.length;++pb<vb;)($a=kb[pb])&&(Ka=S.call($a,$a.__data__,pb,Sa))?("__data__"in $a&&(Ka.__data__=$a.__data__),ve(Ka,pb,wa,la,$a[wa][la]),Ga.push(Ka)):Ga.push(null)}return xf(Ba,
wa,la)};nf.selectAll=function(S){var la=this.id,wa=this.namespace,Ba=[],Ga,Ka;S=N(S);for(var $a=-1,Sa=this.length;++$a<Sa;)for(var Za=this[$a],kb=-1,pb=Za.length;++kb<pb;)if(Ga=Za[kb]){var vb=Ga[wa][la];var Db=S.call(Ga,Ga.__data__,kb,$a);Ba.push(Ga=[]);for(var Lb=-1,Ob=Db.length;++Lb<Ob;)(Ka=Db[Lb])&&ve(Ka,Lb,wa,la,vb),Ga.push(Ka)}return xf(Ba,wa,la)};nf.filter=function(S){var la=[],wa,Ba;"function"!==typeof S&&(S=ba(S));for(var Ga=0,Ka=this.length;Ga<Ka;Ga++){la.push(wa=[]);var $a=this[Ga];for(var Sa=
0,Za=$a.length;Sa<Za;Sa++)(Ba=$a[Sa])&&S.call(Ba,Ba.__data__,Sa,Ga)&&wa.push(Ba)}return xf(la,this.namespace,this.id)};nf.tween=function(S,la){var wa=this.id,Ba=this.namespace;return 2>arguments.length?this.node()[Ba][wa].tween.get(S):ca(this,null==la?function(Ga){Ga[Ba][wa].tween.remove(S)}:function(Ga){Ga[Ba][wa].tween.set(S,la)})};nf.attr=function(S,la){function wa(){this.removeAttribute(Sa)}function Ba(){this.removeAttributeNS(Sa.space,Sa.local)}function Ga(Za){return null==Za?wa:(Za+="",function(){var kb=
this.getAttribute(Sa),pb;return kb!==Za&&(pb=$a(kb,Za),function(vb){this.setAttribute(Sa,pb(vb))})})}function Ka(Za){return null==Za?Ba:(Za+="",function(){var kb=this.getAttributeNS(Sa.space,Sa.local),pb;return kb!==Za&&(pb=$a(kb,Za),function(vb){this.setAttributeNS(Sa.space,Sa.local,pb(vb))})})}if(2>arguments.length){for(la in S)this.attr(la,S[la]);return this}var $a="transform"==S?cf:uh,Sa=Jb.ns.qualify(S);return Wi(this,"attr."+S,la,Sa.local?Ka:Ga)};nf.attrTween=function(S,la){function wa(Ka,$a){var Sa=
la.call(this,Ka,$a,this.getAttribute(Ga));return Sa&&function(Za){this.setAttribute(Ga,Sa(Za))}}function Ba(Ka,$a){var Sa=la.call(this,Ka,$a,this.getAttributeNS(Ga.space,Ga.local));return Sa&&function(Za){this.setAttributeNS(Ga.space,Ga.local,Sa(Za))}}var Ga=Jb.ns.qualify(S);return this.tween("attr."+S,Ga.local?Ba:wa)};nf.style=function(S,la,wa){function Ba(){this.style.removeProperty(S)}var Ga=arguments.length;if(3>Ga){if("string"!==typeof S){2>Ga&&(la="");for(wa in S)this.style(wa,S[wa],la);return this}wa=
""}return Wi(this,"style."+S,la,function(Ka){return null==Ka?Ba:(Ka+="",function(){var $a=m(this).getComputedStyle(this,null).getPropertyValue(S),Sa;return $a!==Ka&&(Sa=uh($a,Ka),function(Za){this.style.setProperty(S,Sa(Za),wa)})})})};nf.styleTween=function(S,la,wa){3>arguments.length&&(wa="");return this.tween("style."+S,function(Ba,Ga){var Ka=la.call(this,Ba,Ga,m(this).getComputedStyle(this,null).getPropertyValue(S));return Ka&&function($a){this.style.setProperty(S,Ka($a),wa)}})};nf.text=function(S){return Wi(this,
"text",S,Lg)};nf.remove=function(){var S=this.namespace;return this.each("end.transition",function(){var la;2>this[S].count&&(la=this.parentNode)&&la.removeChild(this)})};nf.ease=function(S){var la=this.id,wa=this.namespace;if(1>arguments.length)return this.node()[wa][la].ease;"function"!==typeof S&&(S=Jb.ease.apply(Jb,arguments));return ca(this,function(Ba){Ba[wa][la].ease=S})};nf.delay=function(S){var la=this.id,wa=this.namespace;return 1>arguments.length?this.node()[wa][la].delay:ca(this,"function"===
typeof S?function(Ba,Ga,Ka){Ba[wa][la].delay=+S.call(Ba,Ba.__data__,Ga,Ka)}:(S=+S,function(Ba){Ba[wa][la].delay=S}))};nf.duration=function(S){var la=this.id,wa=this.namespace;return 1>arguments.length?this.node()[wa][la].duration:ca(this,"function"===typeof S?function(Ba,Ga,Ka){Ba[wa][la].duration=Math.max(1,S.call(Ba,Ba.__data__,Ga,Ka))}:(S=Math.max(1,S),function(Ba){Ba[wa][la].duration=S}))};nf.each=function(S,la){var wa=this.id,Ba=this.namespace;if(2>arguments.length){var Ga=Fj,Ka=Ai;try{Ai=wa,
ca(this,function($a,Sa,Za){Fj=$a[Ba][wa];S.call($a,$a.__data__,Sa,Za)})}finally{Fj=Ga,Ai=Ka}}else ca(this,function($a){$a=$a[Ba][wa];($a.event||($a.event=Jb.dispatch("start","end","interrupt"))).on(S,la)});return this};nf.transition=function(){for(var S=this.id,la=++cl,wa=this.namespace,Ba=[],Ga,Ka,$a,Sa,Za=0,kb=this.length;Za<kb;Za++){Ba.push(Ga=[]);Ka=this[Za];for(var pb=0,vb=Ka.length;pb<vb;pb++){if($a=Ka[pb])Sa=$a[wa][S],ve($a,pb,wa,la,{time:Sa.time,ease:Sa.ease,delay:Sa.delay+Sa.duration,duration:Sa.duration});
Ga.push($a)}}return xf(Ba,wa,la)};Jb.svg.axis=function(){function S(kb){kb.each(function(){var pb=Jb.select(this),vb=this.__chart__||la,Db=this.__chart__=la.copy(),Lb=null==Sa?Db.ticks?Db.ticks.apply(Db,$a):Db.domain():Sa,Ob=null==Za?Db.tickFormat?Db.tickFormat.apply(Db,$a):w:Za,Yb=pb.selectAll(".tick").data(Lb,Db);Lb=Yb.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var dc=Jb.transition(Yb.exit()).style("opacity",1E-6).remove(),mc=Jb.transition(Yb.order()).style("opacity",
1),Fc=Math.max(Ba,0)+Ka,Pc=xg(Db);pb=pb.selectAll(".domain").data([0]);pb=(pb.enter().append("path").attr("class","domain"),Jb.transition(pb));Lb.append("line");Lb.append("text");var Oc=Lb.select("line"),Wc=mc.select("line");Yb=Yb.select("text").text(Ob);var Pb=Lb.select("text"),jc=mc.select("text"),Hc="top"===wa||"left"===wa?-1:1;if("bottom"===wa||"top"===wa){Ob=gf;var ad="x";var jd="y";var hd="x2";var Zc="y2";Yb.attr("dy",0>Hc?"0em":".71em").style("text-anchor","middle");pb.attr("d","M"+Pc[0]+","+
Hc*Ga+"V0H"+Pc[1]+"V"+Hc*Ga)}else Ob=dg,ad="y",jd="x",hd="y2",Zc="x2",Yb.attr("dy",".32em").style("text-anchor",0>Hc?"end":"start"),pb.attr("d","M"+Hc*Ga+","+Pc[0]+"H0V"+Pc[1]+"H"+Hc*Ga);Oc.attr(Zc,Hc*Ba);Pb.attr(jd,Hc*Fc);Wc.attr(hd,0).attr(Zc,Hc*Ba);jc.attr(ad,0).attr(jd,Hc*Fc);if(Db.rangeBand){var Ed=Db,$d=Ed.rangeBand()/2;vb=Db=function(he){return Ed(he)+$d}}else vb.rangeBand?vb=Db:dc.call(Ob,Db,vb);Lb.call(Ob,vb,Db);mc.call(Ob,Db,Db)})}var la=Jb.scale.linear(),wa=Dg,Ba=6,Ga=6,Ka=3,$a=[10],Sa=
null,Za;S.scale=function(kb){if(!arguments.length)return la;la=kb;return S};S.orient=function(kb){if(!arguments.length)return wa;wa=kb in tl?kb+"":Dg;return S};S.ticks=function(){if(!arguments.length)return $a;$a=ag(arguments);return S};S.tickValues=function(kb){if(!arguments.length)return Sa;Sa=kb;return S};S.tickFormat=function(kb){if(!arguments.length)return Za;Za=kb;return S};S.tickSize=function(kb){var pb=arguments.length;if(!pb)return Ba;Ba=+kb;Ga=+arguments[pb-1];return S};S.innerTickSize=
function(kb){if(!arguments.length)return Ba;Ba=+kb;return S};S.outerTickSize=function(kb){if(!arguments.length)return Ga;Ga=+kb;return S};S.tickPadding=function(kb){if(!arguments.length)return Ka;Ka=+kb;return S};S.tickSubdivide=function(){return arguments.length&&S};return S};var Dg="bottom",tl={top:1,right:1,bottom:1,left:1};Jb.svg.brush=function(){function S(Yb){Yb.each(function(){var dc=Jb.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",
Ga).on("touchstart.brush",Ga),mc=dc.selectAll(".background").data([0]);mc.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");dc.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Fc=dc.selectAll(".resize").data(Ob,w);Fc.exit().remove();Fc.enter().append("g").attr("class",function(Pc){return"resize "+Pc}).style("cursor",function(Pc){return ul[Pc]}).append("rect").attr("x",function(Pc){return/[ew]$/.test(Pc)?
-3:null}).attr("y",function(Pc){return/^[ns]/.test(Pc)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");Fc.style("display",S.empty()?"none":null);dc=Jb.transition(dc);mc=Jb.transition(mc);$a&&(Fc=xg($a),mc.attr("x",Fc[0]).attr("width",Fc[1]-Fc[0]),wa(dc));Sa&&(Fc=xg(Sa),mc.attr("y",Fc[0]).attr("height",Fc[1]-Fc[0]),Ba(dc));la(dc)})}function la(Yb){Yb.selectAll(".resize").attr("transform",function(dc){return"translate("+Za[+/e$/.test(dc)]+","+kb[+/^s/.test(dc)]+")"})}function wa(Yb){Yb.select(".extent").attr("x",
Za[0]);Yb.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",Za[1]-Za[0])}function Ba(Yb){Yb.select(".extent").attr("y",kb[0]);Yb.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",kb[1]-kb[0])}function Ga(){function Yb(){var ie=Jb.mouse(Fc),oe=!1;he&&(ie[0]+=he[0],ie[1]+=he[1]);ad||(Jb.event.altKey?(hd||(hd=[(Za[0]+Za[1])/2,(kb[0]+kb[1])/2]),Zc[0]=Za[+(ie[0]<hd[0])],Zc[1]=kb[+(ie[1]<hd[1])]):hd=null);jc&&dc(ie,$a,0)&&(wa(Wc),oe=!0);Hc&&dc(ie,Sa,1)&&(Ba(Wc),oe=!0);oe&&(la(Wc),Oc({type:"brush",
mode:ad?"move":"resize"}))}function dc(ie,oe,Qd){var Le=xg(oe);oe=Le[0];var uf=Le[1];Le=Zc[Qd];var Ye=Qd?kb:Za,Gh=Ye[1]-Ye[0];ad&&(oe-=Le,uf-=Gh+Le);ie=(Qd?Lb:Db)?Math.max(oe,Math.min(uf,ie[Qd])):ie[Qd];ad?oe=(ie+=Le)+Gh:(hd&&(Le=Math.max(oe,Math.min(uf,2*hd[Qd]-ie))),Le<ie?(oe=ie,ie=Le):oe=Le);if(Ye[0]!=ie||Ye[1]!=oe)return Qd?vb=null:pb=null,Ye[0]=ie,Ye[1]=oe,!0}function mc(){Yb();Wc.style("pointer-events","all").selectAll(".resize").style("display",S.empty()?"none":null);Jb.select("body").style("cursor",
null);Ed.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);jd();Oc({type:"brushend"})}var Fc=this,Pc=Jb.select(Jb.event.target),Oc=Ka.of(Fc,arguments),Wc=Jb.select(Fc),Pb=Pc.datum(),jc=!/^(n|s)$/.test(Pb)&&$a,Hc=!/^(e|w)$/.test(Pb)&&Sa,ad=Pc.classed("extent"),jd=ra(Fc),hd,Zc=Jb.mouse(Fc),Ed=Jb.select(m(Fc)).on("keydown.brush",function(){32==Jb.event.keyCode&&(ad||(hd=null,Zc[0]-=Za[1],Zc[1]-=kb[1],
ad=2),t())}).on("keyup.brush",function(){32==Jb.event.keyCode&&2==ad&&(Zc[0]+=Za[1],Zc[1]+=kb[1],ad=0,t())});if(Jb.event.changedTouches)Ed.on("touchmove.brush",Yb).on("touchend.brush",mc);else Ed.on("mousemove.brush",Yb).on("mouseup.brush",mc);Wc.interrupt().selectAll("*").interrupt();if(ad)Zc[0]=Za[0]-Zc[0],Zc[1]=kb[0]-Zc[1];else if(Pb){var $d=+/w$/.test(Pb);Pb=+/^n/.test(Pb);var he=[Za[1-$d]-Zc[0],kb[1-Pb]-Zc[1]];Zc[0]=Za[$d];Zc[1]=kb[Pb]}else Jb.event.altKey&&(hd=Zc.slice());Wc.style("pointer-events",
"none").selectAll(".resize").style("display",null);Jb.select("body").style("cursor",Pc.style("cursor"));Oc({type:"brushstart"});Yb()}var Ka=I(S,"brushstart","brush","brushend"),$a=null,Sa=null,Za=[0,0],kb=[0,0],pb,vb,Db=!0,Lb=!0,Ob=Pk[0];S.event=function(Yb){Yb.each(function(){var dc=Ka.of(this,arguments),mc={x:Za,y:kb,i:pb,j:vb},Fc=this.__chart__||mc;this.__chart__=mc;Ai?Jb.select(this).transition().each("start.brush",function(){pb=Fc.i;vb=Fc.j;Za=Fc.x;kb=Fc.y;dc({type:"brushstart"})}).tween("brush:brush",
function(){var Pc=Ti(Za,mc.x),Oc=Ti(kb,mc.y);pb=vb=null;return function(Wc){Za=mc.x=Pc(Wc);kb=mc.y=Oc(Wc);dc({type:"brush",mode:"resize"})}}).each("end.brush",function(){pb=mc.i;vb=mc.j;dc({type:"brush",mode:"resize"});dc({type:"brushend"})}):(dc({type:"brushstart"}),dc({type:"brush",mode:"resize"}),dc({type:"brushend"}))})};S.x=function(Yb){if(!arguments.length)return $a;$a=Yb;Ob=Pk[!$a<<1|!Sa];return S};S.y=function(Yb){if(!arguments.length)return Sa;Sa=Yb;Ob=Pk[!$a<<1|!Sa];return S};S.clamp=function(Yb){if(!arguments.length)return $a&&
Sa?[Db,Lb]:$a?Db:Sa?Lb:null;$a&&Sa?(Db=!!Yb[0],Lb=!!Yb[1]):$a?Db=!!Yb:Sa&&(Lb=!!Yb);return S};S.extent=function(Yb){if(!arguments.length){if($a)if(pb){var dc=pb[0];var mc=pb[1]}else if(dc=Za[0],mc=Za[1],$a.invert&&(dc=$a.invert(dc),mc=$a.invert(mc)),mc<dc){var Fc=dc;dc=mc;mc=Fc}if(Sa)if(vb){var Pc=vb[0];var Oc=vb[1]}else Pc=kb[0],Oc=kb[1],Sa.invert&&(Pc=Sa.invert(Pc),Oc=Sa.invert(Oc)),Oc<Pc&&(Fc=Pc,Pc=Oc,Oc=Fc);return $a&&Sa?[[dc,Pc],[mc,Oc]]:$a?[dc,mc]:Sa&&[Pc,Oc]}$a&&(dc=Yb[0],mc=Yb[1],Sa&&(dc=
dc[0],mc=mc[0]),pb=[dc,mc],$a.invert&&(dc=$a(dc),mc=$a(mc)),mc<dc&&(Fc=dc,dc=mc,mc=Fc),dc!=Za[0]||mc!=Za[1])&&(Za=[dc,mc]);Sa&&(Pc=Yb[0],Oc=Yb[1],$a&&(Pc=Pc[1],Oc=Oc[1]),vb=[Pc,Oc],Sa.invert&&(Pc=Sa(Pc),Oc=Sa(Oc)),Oc<Pc&&(Fc=Pc,Pc=Oc,Oc=Fc),Pc!=kb[0]||Oc!=kb[1])&&(kb=[Pc,Oc]);return S};S.clear=function(){S.empty()||(Za=[0,0],kb=[0,0],pb=vb=null);return S};S.empty=function(){return!!$a&&Za[0]==Za[1]||!!Sa&&kb[0]==kb[1]};return Jb.rebind(S,Ka,"on")};var ul={n:"ns-resize",e:"ew-resize",s:"ns-resize",
w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Pk=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],mk=Jd.format=Ci.timeFormat,Qk=mk.utc,Di=Qk("%Y-%m-%dT%H:%M:%S.%LZ");mk.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yf:Di;Yf.parse=function(S){S=new Date(S);return isNaN(S)?null:S};Yf.toString=Di.toString;Jd.second=tc(function(S){return new Te(1E3*Math.floor(S/1E3))},function(S,la){S.setTime(S.getTime()+1E3*Math.floor(la))},function(S){return S.getSeconds()});
Jd.seconds=Jd.second.range;Jd.seconds.utc=Jd.second.utc.range;Jd.minute=tc(function(S){return new Te(6E4*Math.floor(S/6E4))},function(S,la){S.setTime(S.getTime()+6E4*Math.floor(la))},function(S){return S.getMinutes()});Jd.minutes=Jd.minute.range;Jd.minutes.utc=Jd.minute.utc.range;Jd.hour=tc(function(S){var la=S.getTimezoneOffset()/60;return new Te(36E5*(Math.floor(S/36E5-la)+la))},function(S,la){S.setTime(S.getTime()+36E5*Math.floor(la))},function(S){return S.getHours()});Jd.hours=Jd.hour.range;Jd.hours.utc=
Jd.hour.utc.range;Jd.month=tc(function(S){S=Jd.day(S);S.setDate(1);return S},function(S,la){S.setMonth(S.getMonth()+la)},function(S){return S.getMonth()});Jd.months=Jd.month.range;Jd.months.utc=Jd.month.utc.range;var fk=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Gj=[[Jd.second,1],[Jd.second,5],[Jd.second,15],[Jd.second,30],[Jd.minute,1],[Jd.minute,5],[Jd.minute,15],[Jd.minute,30],[Jd.hour,1],[Jd.hour,3],[Jd.hour,6],[Jd.hour,12],[Jd.day,1],
[Jd.day,2],[Jd.week,1],[Jd.month,1],[Jd.month,3],[Jd.year,1]],Ng=mk.multi([[".%L",function(S){return S.getMilliseconds()}],[":%S",function(S){return S.getSeconds()}],["%I:%M",function(S){return S.getMinutes()}],["%I %p",function(S){return S.getHours()}],["%a %d",function(S){return S.getDay()&&1!=S.getDate()}],["%b %d",function(S){return 1!=S.getDate()}],["%B",function(S){return S.getMonth()}],["%Y",xd]]),nl={range:function(S,la,wa){return Jb.range(Math.ceil(S/wa)*wa,+la,wa).map(Bg)},floor:w,ceil:w};
Gj.year=Jd.year;Jd.scale=function(){return Ag(Jb.scale.linear(),Gj,Ng)};var dl=Gj.map(function(S){return[S[0].utc,S[1]]}),el=Qk.multi([[".%L",function(S){return S.getUTCMilliseconds()}],[":%S",function(S){return S.getUTCSeconds()}],["%I:%M",function(S){return S.getUTCMinutes()}],["%I %p",function(S){return S.getUTCHours()}],["%a %d",function(S){return S.getUTCDay()&&1!=S.getUTCDate()}],["%b %d",function(S){return 1!=S.getUTCDate()}],["%B",function(S){return S.getUTCMonth()}],["%Y",xd]]);dl.year=Jd.year.utc;
Jd.scale.utc=function(){return Ag(Jb.scale.linear(),dl,el)};Jb.text=Da(function(S){return S.responseText});Jb.json=function(S,la){return Ha(S,"application/json",wi,la)};Jb.html=function(S,la){return Ha(S,"text/html",Gk,la)};Jb.xml=Da(function(S){return S.responseXML});"object"===typeof F&&F.exports?F.exports=Jb:this.d3=Jb}()},{}],170:[function(b,F,C){F.exports=function(){for(var m=0;m<arguments.length;m++)if(void 0!==arguments[m])return arguments[m]}},{}],171:[function(b,F,C){function m(g,k){this.point=
g;this.index=k}function h(g,k){g=g.point;k=k.point;for(var p=g.length,n=0;n<p;++n){var c=k[n]-g[n];if(c)return c}return 0}function l(g,k,p){if(1===g)return p?[[-1,0]]:[];k=k.map(function(f,d){return[f[0],d]});k.sort(function(f,d){return f[0]-d[0]});for(var n=Array(g-1),c=1;c<g;++c)n[c-1]=[k[c-1][1],k[c][1]];p&&n.push([-1,n[0][1]],[n[g-1][1],-1]);return n}var e=b("incremental-convex-hull"),a=b("uniq");F.exports=function(g,k){var p=g.length;if(0===p)return[];var n=g[0].length;if(1>n)return[];if(1===
n)return l(p,g,k);for(var c=Array(p),f=1,d=0;d<p;++d){for(var q=g[d],r=Array(n+1),u=0,v=0;v<n;++v){var w=q[v];r[v]=w;u+=w*w}r[n]=u;c[d]=new m(r,d);f=Math.max(u,f)}a(c,h);p=c.length;g=Array(p+n+1);var y=Array(p+n+1);q=Array(n+1);for(d=0;d<=n;++d)q[d]=0;q[n]=(n+1)*(n+1)*f;g[0]=q.slice();y[0]=-1;for(d=0;d<=n;++d)r=q.slice(),r[d]=1,g[d+1]=r,y[d+1]=-1;for(d=0;d<p;++d)f=c[d],g[d+n+1]=f.point,y[d+n+1]=f.index;p=e(g,!1);p=k?p.filter(function(D){for(var x=0,E=0;E<=n;++E){var B=y[D[E]];if(0>B&&2<=++x)return!1;
D[E]=B}return!0}):p.filter(function(D){for(var x=0;x<=n;++x){var E=y[D[x]];if(0>E)return!1;D[x]=E}return!0});if(n&1)for(d=0;d<p.length;++d)f=p[d],r=f[0],f[0]=f[1],f[1]=r;return p}},{"incremental-convex-hull":433,uniq:569}],172:[function(b,F,C){function m(a,g){Array.isArray(a)&&(a=a.join(", "));var k={},p=16,n=.05;if(g)if(2===g.length&&"number"===typeof g[0])var c=h(g);else Array.isArray(g)?c=g:(g.o?c=h(g.o):g.pairs&&(c=g.pairs),g.fontSize&&(p=g.fontSize),null!=g.threshold&&(n=g.threshold));c||(c=
e);l.font=p+"px "+a;for(a=0;a<c.length;a++){g=c[a];var f=l.measureText(g[0]).width+l.measureText(g[1]).width,d=l.measureText(g).width;Math.abs(f-d)>p*n&&(k[g]=(d-f)/p*1E3)}return k}function h(a){for(var g=[],k=a[0];k<=a[1];k++)for(var p=String.fromCharCode(k),n=a[0];n<a[1];n++){var c=String.fromCharCode(n);g.push(p+c)}return g}F.exports=m;var l=(m.canvas=document.createElement("canvas")).getContext("2d"),e=h([32,126]);m.createPairs=h;m.ascii=e},{}],173:[function(b,F,C){(function(m){var h=!1;if("undefined"!==
typeof Float64Array){var l=new Float64Array(1),e=new Uint32Array(l.buffer);l[0]=1;h=!0;1072693248===e[1]?(F.exports=function(g){l[0]=g;return[e[0],e[1]]},F.exports.pack=function(g,k){e[0]=g;e[1]=k;return l[0]},F.exports.lo=function(g){l[0]=g;return e[0]},F.exports.hi=function(g){l[0]=g;return e[1]}):1072693248===e[0]?(F.exports=function(g){l[0]=g;return[e[1],e[0]]},F.exports.pack=function(g,k){e[1]=g;e[0]=k;return l[0]},F.exports.lo=function(g){l[0]=g;return e[1]},F.exports.hi=function(g){l[0]=g;
return e[0]}):h=!1}if(!h){var a=new m(8);F.exports=function(g){a.writeDoubleLE(g,0,!0);return[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]};F.exports.pack=function(g,k){a.writeUInt32LE(g,0,!0);a.writeUInt32LE(k,4,!0);return a.readDoubleLE(0,!0)};F.exports.lo=function(g){a.writeDoubleLE(g,0,!0);return a.readUInt32LE(0,!0)};F.exports.hi=function(g){a.writeDoubleLE(g,0,!0);return a.readUInt32LE(4,!0)}}F.exports.sign=function(g){return F.exports.hi(g)>>>31};F.exports.exponent=function(g){return(F.exports.hi(g)<<
1>>>21)-1023};F.exports.fraction=function(g){var k=F.exports.lo(g);g=F.exports.hi(g);var p=g&1048575;g&2146435072&&(p+=1048576);return[k,p]};F.exports.denormalized=function(g){return!(F.exports.hi(g)&2146435072)}}).call(this,b("buffer").Buffer)},{buffer:111}],174:[function(b,F,C){var m=b("abs-svg-path"),h=b("normalize-svg-path"),l={M:"moveTo",C:"bezierCurveTo"};F.exports=function(e,a){e.beginPath();h(m(a)).forEach(function(g){var k=g[0];g=g.slice(1);e[l[k]].apply(e,g)});e.closePath()}},{"abs-svg-path":65,
"normalize-svg-path":471}],175:[function(b,F,C){F.exports=function(m){switch(m){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},{}],176:[function(b,F,C){function m(h,l,e){var a=h[e]|0;if(0>=a)return[];var g=Array(a),
k;if(e===h.length-1)for(k=0;k<a;++k)g[k]=l;else for(k=0;k<a;++k)g[k]=m(h,l,e+1);return g}F.exports=function(h,l){"undefined"===typeof l&&(l=0);switch(typeof h){case "number":if(0<h){h|=0;var e;var a=Array(h);for(e=0;e<h;++e)a[e]=l;return a}break;case "object":if("number"===typeof h.length)return m(h,l,0)}return[]}},{}],177:[function(b,F,C){function m(B,t,G){G=G||2;var I=t&&t.length,L=I?t[0]*G:B.length,M=h(B,0,L,G,!0),N=[];if(!M||M.next===M.prev)return N;var H;if(I){var J=G;I=[];var O;var Q=0;for(O=
t.length;Q<O;Q++){var U=t[Q]*J;var P=Q<O-1?t[Q+1]*J:B.length;U=h(B,U,P,J,!1);U===U.next&&(U.steiner=!0);I.push(n(U))}I.sort(g);for(Q=0;Q<I.length;Q++){J=I[Q];t=M;if(t=k(J,t))J=w(t,J),l(t,t.next),l(J,J.next);M=l(M,M.next)}}if(B.length>80*G){var V=H=B[0];var Y=I=B[1];for(J=G;J<L;J+=G)Q=B[J],t=B[J+1],Q<V&&(V=Q),t<Y&&(Y=t),Q>H&&(H=Q),t>I&&(I=t);H=Math.max(H-V,I-Y);H=0!==H?1/H:0}e(M,N,G,V,Y,H);return N}function h(B,t,G,I,L){if(L===0<E(B,t,G,I))for(L=t;L<G;L+=I)var M=y(L,B[L],B[L+1],M);else for(L=G-I;L>=
t;L-=I)M=y(L,B[L],B[L+1],M);M&&d(M,M.next)&&(D(M),M=M.next);return M}function l(B,t){if(!B)return B;t||(t=B);do{var G=!1;if(B.steiner||!d(B,B.next)&&0!==f(B.prev,B,B.next))B=B.next;else{D(B);B=t=B.prev;if(B===B.next)break;G=!0}}while(G||B!==t);return t}function e(B,t,G,I,L,M,N){if(B){if(!N&&M){var H=B,J=H;do null===J.z&&(J.z=p(J.x,J.y,I,L,M)),J.prevZ=J.prev,J=J.nextZ=J.next;while(J!==H);J.prevZ.nextZ=null;J.prevZ=null;H=J;var O,Q,U,P,V=1;do{J=H;var Y=H=null;for(Q=0;J;){Q++;var ba=J;for(O=U=0;O<V&&
(U++,ba=ba.nextZ,ba);O++);for(P=V;0<U||0<P&&ba;)0!==U&&(0===P||!ba||J.z<=ba.z)?(O=J,J=J.nextZ,U--):(O=ba,ba=ba.nextZ,P--),Y?Y.nextZ=O:H=O,O.prevZ=Y,Y=O;J=ba}Y.nextZ=null;V*=2}while(1<Q)}for(H=B;B.prev!==B.next;){J=B.prev;ba=B.next;if(M)Y=a(B,I,L,M);else a:if(Y=B,Q=Y.prev,U=Y,V=Y.next,0<=f(Q,U,V))Y=!1;else{for(O=Y.next.next;O!==Y.prev;){if(c(Q.x,Q.y,U.x,U.y,V.x,V.y,O.x,O.y)&&0<=f(O.prev,O,O.next)){Y=!1;break a}O=O.next}Y=!0}if(Y)t.push(J.i/G),t.push(B.i/G),t.push(ba.i/G),D(B),H=B=ba.next;else if(B=
ba,B===H){if(!N)e(l(B),t,G,I,L,M,1);else if(1===N){B=l(B);N=t;H=G;J=B;do ba=J.prev,Y=J.next.next,!d(ba,Y)&&q(ba,J,J.next,Y)&&v(ba,Y)&&v(Y,ba)&&(N.push(ba.i/H),N.push(J.i/H),N.push(Y.i/H),D(J),D(J.next),J=B=Y),J=J.next;while(J!==B);B=l(J);e(B,t,G,I,L,M,2)}else if(2===N)a:{N=B;do{for(H=N.next.next;H!==N.prev;){if(J=N.i!==H.i){J=N;ba=H;if(Y=J.next.i!==ba.i&&J.prev.i!==ba.i){b:{Y=J;do{if(Y.i!==J.i&&Y.next.i!==J.i&&Y.i!==ba.i&&Y.next.i!==ba.i&&q(Y,Y.next,J,ba)){Y=!0;break b}Y=Y.next}while(Y!==J);Y=!1}Y=
!Y}if(Y){if(Y=v(J,ba)&&v(ba,J)){Y=J;Q=!1;U=(J.x+ba.x)/2;V=(J.y+ba.y)/2;do Y.y>V!==Y.next.y>V&&Y.next.y!==Y.y&&U<(Y.next.x-Y.x)*(V-Y.y)/(Y.next.y-Y.y)+Y.x&&(Q=!Q),Y=Y.next;while(Y!==J);Y=Q}Y=Y&&(f(J.prev,J,ba.prev)||f(J,ba.prev,ba))||d(J,ba)&&0<f(J.prev,J,J.next)&&0<f(ba.prev,ba,ba.next)}J=Y}if(J){B=w(N,H);N=l(N,N.next);B=l(B,B.next);e(N,t,G,I,L,M);e(B,t,G,I,L,M);break a}H=H.next}N=N.next}while(N!==B)}break}}}}function a(B,t,G,I){var L=B.prev,M=B.next;if(0<=f(L,B,M))return!1;var N=L.x>B.x?L.x>M.x?
L.x:M.x:B.x>M.x?B.x:M.x,H=L.y>B.y?L.y>M.y?L.y:M.y:B.y>M.y?B.y:M.y,J=p(L.x<B.x?L.x<M.x?L.x:M.x:B.x<M.x?B.x:M.x,L.y<B.y?L.y<M.y?L.y:M.y:B.y<M.y?B.y:M.y,t,G,I);t=p(N,H,t,G,I);G=B.prevZ;for(I=B.nextZ;G&&G.z>=J&&I&&I.z<=t;){if(G!==B.prev&&G!==B.next&&c(L.x,L.y,B.x,B.y,M.x,M.y,G.x,G.y)&&0<=f(G.prev,G,G.next))return!1;G=G.prevZ;if(I!==B.prev&&I!==B.next&&c(L.x,L.y,B.x,B.y,M.x,M.y,I.x,I.y)&&0<=f(I.prev,I,I.next))return!1;I=I.nextZ}for(;G&&G.z>=J;){if(G!==B.prev&&G!==B.next&&c(L.x,L.y,B.x,B.y,M.x,M.y,G.x,
G.y)&&0<=f(G.prev,G,G.next))return!1;G=G.prevZ}for(;I&&I.z<=t;){if(I!==B.prev&&I!==B.next&&c(L.x,L.y,B.x,B.y,M.x,M.y,I.x,I.y)&&0<=f(I.prev,I,I.next))return!1;I=I.nextZ}return!0}function g(B,t){return B.x-t.x}function k(B,t){var G=t,I=B.x,L=B.y,M=-Infinity;do{if(L<=G.y&&L>=G.next.y&&G.next.y!==G.y){var N=G.x+(L-G.y)*(G.next.x-G.x)/(G.next.y-G.y);if(N<=I&&N>M){M=N;if(N===I){if(L===G.y)return G;if(L===G.next.y)return G.next}var H=G.x<G.next.x?G:G.next}}G=G.next}while(G!==t);if(!H)return null;if(I===
M)return H;t=H;N=H.x;var J=H.y,O=Infinity;G=H;do{if(I>=G.x&&G.x>=N&&I!==G.x&&c(L<J?I:M,L,N,J,L<J?M:I,L,G.x,G.y)){var Q=Math.abs(L-G.y)/(I-G.x);var U;if((U=v(G,B))&&!(U=Q<O)&&(U=Q===O)&&!(U=G.x>H.x)&&(U=G.x===H.x)){U=H;var P=G;U=0>f(U.prev,U,P.prev)&&0>f(P.next,U,U.next)}U&&(H=G,O=Q)}G=G.next}while(G!==t);return H}function p(B,t,G,I,L){B=32767*(B-G)*L;t=32767*(t-I)*L;B=(B|B<<8)&16711935;B=(B|B<<4)&252645135;B=(B|B<<2)&858993459;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;return(B|
B<<1)&1431655765|((t|t<<1)&1431655765)<<1}function n(B){var t=B,G=B;do{if(t.x<G.x||t.x===G.x&&t.y<G.y)G=t;t=t.next}while(t!==B);return G}function c(B,t,G,I,L,M,N,H){return 0<=(L-N)*(t-H)-(B-N)*(M-H)&&0<=(B-N)*(I-H)-(G-N)*(t-H)&&0<=(G-N)*(M-H)-(L-N)*(I-H)}function f(B,t,G){return(t.y-B.y)*(G.x-t.x)-(t.x-B.x)*(G.y-t.y)}function d(B,t){return B.x===t.x&&B.y===t.y}function q(B,t,G,I){var L=u(f(B,t,G)),M=u(f(B,t,I)),N=u(f(G,I,B)),H=u(f(G,I,t));return L!==M&&N!==H||0===L&&r(B,G,t)||0===M&&r(B,I,t)||0===
N&&r(G,B,I)||0===H&&r(G,t,I)?!0:!1}function r(B,t,G){return t.x<=Math.max(B.x,G.x)&&t.x>=Math.min(B.x,G.x)&&t.y<=Math.max(B.y,G.y)&&t.y>=Math.min(B.y,G.y)}function u(B){return 0<B?1:0>B?-1:0}function v(B,t){return 0>f(B.prev,B,B.next)?0<=f(B,t,B.next)&&0<=f(B,B.prev,t):0>f(B,t,B.prev)||0>f(B,B.next,t)}function w(B,t){var G=new x(B.i,B.x,B.y),I=new x(t.i,t.x,t.y),L=B.next,M=t.prev;B.next=t;t.prev=B;G.next=L;L.prev=G;I.next=G;G.prev=I;M.next=I;I.prev=M;return I}function y(B,t,G,I){B=new x(B,t,G);I?
(B.next=I.next,B.prev=I,I.next.prev=B,I.next=B):(B.prev=B,B.next=B);return B}function D(B){B.next.prev=B.prev;B.prev.next=B.next;B.prevZ&&(B.prevZ.nextZ=B.nextZ);B.nextZ&&(B.nextZ.prevZ=B.prevZ)}function x(B,t,G){this.i=B;this.x=t;this.y=G;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function E(B,t,G,I){for(var L=0,M=G-I;t<G;t+=I)L+=(B[M]-B[t])*(B[t+1]+B[M+1]),M=t;return L}F.exports=m;F.exports.default=m;m.deviation=function(B,t,G,I){var L=t&&t.length,M=Math.abs(E(B,0,L?t[0]*
G:B.length,G));if(L){L=0;for(var N=t.length;L<N;L++)M-=Math.abs(E(B,t[L]*G,L<N-1?t[L+1]*G:B.length,G))}for(L=t=0;L<I.length;L+=3){N=I[L]*G;var H=I[L+1]*G,J=I[L+2]*G;t+=Math.abs((B[N]-B[J])*(B[H+1]-B[N+1])-(B[N]-B[H])*(B[J+1]-B[N+1]))}return 0===M&&0===t?0:Math.abs((t-M)/M)};m.flatten=function(B){for(var t=B[0][0].length,G={vertices:[],holes:[],dimensions:t},I=0,L=0;L<B.length;L++){for(var M=0;M<B[L].length;M++)for(var N=0;N<t;N++)G.vertices.push(B[L][M][N]);0<L&&(I+=B[L-1].length,G.holes.push(I))}return G}},
{}],178:[function(b,F,C){F.exports=function(h,l){var e=h.length;if("number"!==typeof l){for(var a=l=0;a<e;++a){var g=h[a];l=Math.max(l,g[0],g[1])}l=(l|0)+1}l|=0;var k=Array(l);for(a=0;a<l;++a)k[a]=[];for(a=0;a<e;++a)g=h[a],k[g[0]].push(g[1]),k[g[1]].push(g[0]);for(h=0;h<l;++h)m(k[h],function(p,n){return p-n});return k};var m=b("uniq")},{uniq:569}],179:[function(b,F,C){var m=b("strongly-connected-components");F.exports=function(h,l){function e(y){c[y]=!1;f.hasOwnProperty(y)&&Object.keys(f[y]).forEach(function(D){delete f[y][D];
c[D]&&e(D)})}function a(y){var D=!1;n.push(y);c[y]=!0;var x;for(x=0;x<d[y].length;x++){var E=d[y][x];E===q?(D=q,D=[].concat(n).concat(D),l?l(a):p.push(D),D=!0):c[E]||(D=a(E))}if(D)e(y);else for(x=0;x<d[y].length;x++){E=d[y][x];var B=f[E];B||(B={},f[E]=B);B[E]=!0}n.pop();return D}function g(y){for(var D=0;D<h.length;D++)D<y&&(h[D]=[]),h[D]=h[D].filter(function(x){return x>=y})}function k(y){g(y);var D=m(h).components.filter(function(G){return 1<G.length});y=Infinity;for(var x,E=0;E<D.length;E++)for(var B=
0;B<D[E].length;B++)D[E][B]<y&&(y=D[E][B],x=E);var t=D[x];if(!t)return!1;x=h.map(function(G,I){return-1===t.indexOf(I)?[]:G.filter(function(L){return-1!==t.indexOf(L)})});return{leastVertex:y,adjList:x}}var p=[],n=[],c=[],f={},d=[];var q=0;for(var r=h.length;q<r;){var u=k(q);q=u.leastVertex;if(d=u.adjList){for(u=0;u<d.length;u++)for(var v=0;v<d[u].length;v++){var w=d[u][v];c[+w]=!1;f[w]={}}a(q);q+=1}else q=r}if(!l)return p}},{"strongly-connected-components":541}],180:[function(b,F,C){var m=b("../../object/valid-value");
F.exports=function(){m(this).length=0;return this}},{"../../object/valid-value":211}],181:[function(b,F,C){F.exports=b("./is-implemented")()?Array.from:b("./shim")},{"./is-implemented":182,"./shim":183}],182:[function(b,F,C){F.exports=function(){var m=Array.from;if("function"!==typeof m)return!1;var h=["raz","dwa"];m=m(h);return!(!m||m===h||"dwa"!==m[1])}},{}],183:[function(b,F,C){var m=b("es6-symbol").iterator,h=b("../../function/is-arguments"),l=b("../../function/is-function"),e=b("../../number/to-pos-integer"),
a=b("../../object/valid-callable"),g=b("../../object/valid-value"),k=b("../../object/is-value"),p=b("../../string/is-string"),n=Array.isArray,c=Function.prototype.call,f={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;F.exports=function(q,r,u){var v,w;q=Object(g(q));k(r)&&a(r);if(this&&this!==Array&&l(this))var y=this;else{if(!r){if(h(q)){var D=q.length;if(1!==D)return Array.apply(null,q);var x=Array(1);x[0]=q[0];return x}if(n(q)){x=Array(D=q.length);for(v=0;v<D;++v)x[v]=
q[v];return x}}x=[]}if(!n(q))if(void 0!==(v=q[m])){D=a(v).call(q);y&&(x=new y);var E=D.next();for(v=0;!E.done;)E=r?c.call(r,u,E.value,v):E.value,y?(f.value=E,d(x,v,f)):x[v]=E,E=D.next(),++v;D=v}else if(p(q)){D=q.length;y&&(x=new y);for(w=v=0;v<D;++v){E=q[v];if(v+1<D){var B=E.charCodeAt(0);55296<=B&&56319>=B&&(E+=q[++v])}E=r?c.call(r,u,E,w):E;y?(f.value=E,d(x,w,f)):x[w]=E;++w}D=w}if(void 0===D)for(D=e(q.length),y&&(x=new y(D)),v=0;v<D;++v)E=r?c.call(r,u,q[v],v):q[v],y?(f.value=E,d(x,v,f)):x[v]=E;y&&
(f.value=null,x.length=D);return x}},{"../../function/is-arguments":184,"../../function/is-function":185,"../../number/to-pos-integer":191,"../../object/is-value":200,"../../object/valid-callable":209,"../../object/valid-value":211,"../../string/is-string":215,"es6-symbol":225}],184:[function(b,F,C){var m=Object.prototype.toString,h=m.call(function(){return arguments}());F.exports=function(l){return m.call(l)===h}},{}],185:[function(b,F,C){var m=Object.prototype.toString,h=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);
F.exports=function(l){return"function"===typeof l&&h(m.call(l))}},{}],186:[function(b,F,C){F.exports=function(){}},{}],187:[function(b,F,C){F.exports=b("./is-implemented")()?Math.sign:b("./shim")},{"./is-implemented":188,"./shim":189}],188:[function(b,F,C){F.exports=function(){var m=Math.sign;return"function"!==typeof m?!1:1===m(10)&&-1===m(-20)}},{}],189:[function(b,F,C){F.exports=function(m){m=Number(m);return isNaN(m)||0===m?m:0<m?1:-1}},{}],190:[function(b,F,C){var m=b("../math/sign"),h=Math.abs,
l=Math.floor;F.exports=function(e){if(isNaN(e))return 0;e=Number(e);return 0!==e&&isFinite(e)?m(e)*l(h(e)):e}},{"../math/sign":187}],191:[function(b,F,C){var m=b("./to-integer"),h=Math.max;F.exports=function(l){return h(0,m(l))}},{"./to-integer":190}],192:[function(b,F,C){var m=b("./valid-callable"),h=b("./valid-value"),l=Function.prototype.bind,e=Function.prototype.call,a=Object.keys,g=Object.prototype.propertyIsEnumerable;F.exports=function(k,p){return function(n,c,f,d){n=Object(h(n));m(c);var q=
a(n);d&&q.sort("function"===typeof d?l.call(d,n):void 0);"function"!==typeof k&&(k=q[k]);return e.call(k,q,function(r,u){return g.call(n,r)?e.call(c,f,n[r],r,n,u):p})}}},{"./valid-callable":209,"./valid-value":211}],193:[function(b,F,C){F.exports=b("./is-implemented")()?Object.assign:b("./shim")},{"./is-implemented":194,"./shim":195}],194:[function(b,F,C){F.exports=function(){var m=Object.assign;if("function"!==typeof m)return!1;var h={foo:"raz"};m(h,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===
h.foo+h.bar+h.trzy}},{}],195:[function(b,F,C){var m=b("../keys"),h=b("../valid-value"),l=Math.max;F.exports=function(e,a){var g,k,p=l(arguments.length,2);e=Object(h(e));var n=function(c){try{e[c]=a[c]}catch(f){g||(g=f)}};for(k=1;k<p;++k)a=arguments[k],m(a).forEach(n);if(void 0!==g)throw g;return e}},{"../keys":201,"../valid-value":211}],196:[function(b,F,C){var m=b("../array/from"),h=b("./assign"),l=b("./valid-value");F.exports=function(e,a,g){var k=Object(l(e)),p=Object(g);if(k!==e&&!a)return k;
var n={};a?m(a,function(c){if(p.ensure||c in e)n[c]=e[c]}):h(n,e);return n}},{"../array/from":181,"./assign":193,"./valid-value":211}],197:[function(b,F,C){var m=Object.create,h;b("./set-prototype-of/is-implemented")()||(h=b("./set-prototype-of/shim"));F.exports=function(){if(!h||1!==h.level)return m;var l={};var e={};var a={configurable:!1,enumerable:!1,writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(g){e[g]="__proto__"===g?{configurable:!0,enumerable:!1,writable:!0,
value:void 0}:a});Object.defineProperties(l,e);Object.defineProperty(h,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:l});return function(g,k){return m(null===g?l:g,k)}}()},{"./set-prototype-of/is-implemented":207,"./set-prototype-of/shim":208}],198:[function(b,F,C){F.exports=b("./_iterate")("forEach")},{"./_iterate":192}],199:[function(b,F,C){var m=b("./is-value"),h={function:!0,object:!0};F.exports=function(l){return m(l)&&h[typeof l]||!1}},{"./is-value":200}],200:[function(b,F,
C){var m=b("../function/noop")();F.exports=function(h){return h!==m&&null!==h}},{"../function/noop":186}],201:[function(b,F,C){F.exports=b("./is-implemented")()?Object.keys:b("./shim")},{"./is-implemented":202,"./shim":203}],202:[function(b,F,C){F.exports=function(){try{return Object.keys("primitive"),!0}catch(m){return!1}}},{}],203:[function(b,F,C){var m=b("../is-value"),h=Object.keys;F.exports=function(l){return h(m(l)?Object(l):l)}},{"../is-value":200}],204:[function(b,F,C){var m=b("./valid-callable"),
h=b("./for-each"),l=Function.prototype.call;F.exports=function(e,a,g){var k={};m(a);h(e,function(p,n,c,f){k[n]=l.call(a,g,p,n,c,f)});return k}},{"./for-each":198,"./valid-callable":209}],205:[function(b,F,C){var m=b("./is-value"),h=Array.prototype.forEach,l=Object.create;F.exports=function(e){var a=l(null);h.call(arguments,function(g){if(m(g)){g=Object(g);for(var k in g)a[k]=g[k]}});return a}},{"./is-value":200}],206:[function(b,F,C){F.exports=b("./is-implemented")()?Object.setPrototypeOf:b("./shim")},
{"./is-implemented":207,"./shim":208}],207:[function(b,F,C){var m=Object.create,h=Object.getPrototypeOf,l={};F.exports=function(e){var a=Object.setPrototypeOf;return"function"!==typeof a?!1:h(a((e||m)(null),l))===l}},{}],208:[function(b,F,C){var m=b("../is-object"),h=b("../valid-value"),l=Object.prototype.isPrototypeOf,e=Object.defineProperty,a={configurable:!0,enumerable:!1,writable:!0,value:void 0};var g=function(k,p){h(k);if(null===p||m(p))return k;throw new TypeError("Prototype must be null or an object");
};F.exports=function(k){if(!k)return null;if(2===k.level)if(k.set){var p=k.set;var n=function(c,f){p.call(g(c,f),f);return c}}else n=function(c,f){g(c,f).__proto__=f;return c};else n=function q(f,d){var r;g(f,d);(r=l.call(q.nullPolyfill,f))&&delete q.nullPolyfill.__proto__;null===d&&(d=q.nullPolyfill);f.__proto__=d;r&&e(q.nullPolyfill,"__proto__",a);return f};return Object.defineProperty(n,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})}(function(){var k=Object.create(null),p={},
n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{var c=n.set;c.call(k,p)}catch(f){}if(Object.getPrototypeOf(k)===p)return{set:c,level:2}}k.__proto__=p;if(Object.getPrototypeOf(k)===p)return{level:2};k={};k.__proto__=p;return Object.getPrototypeOf(k)===p?{level:1}:!1}());b("../create")},{"../create":197,"../is-object":199,"../valid-value":211}],209:[function(b,F,C){F.exports=function(m){if("function"!==typeof m)throw new TypeError(m+" is not a function");return m}},{}],210:[function(b,
F,C){var m=b("./is-object");F.exports=function(h){if(!m(h))throw new TypeError(h+" is not an Object");return h}},{"./is-object":199}],211:[function(b,F,C){var m=b("./is-value");F.exports=function(h){if(!m(h))throw new TypeError("Cannot use null or undefined");return h}},{"./is-value":200}],212:[function(b,F,C){F.exports=b("./is-implemented")()?String.prototype.contains:b("./shim")},{"./is-implemented":213,"./shim":214}],213:[function(b,F,C){F.exports=function(){return"function"!==typeof"razdwatrzy".contains?
!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},{}],214:[function(b,F,C){var m=String.prototype.indexOf;F.exports=function(h,l){return-1<m.call(this,h,l)}},{}],215:[function(b,F,C){var m=Object.prototype.toString,h=m.call("");F.exports=function(l){return"string"===typeof l||l&&"object"===typeof l&&(l instanceof String||m.call(l)===h)||!1}},{}],216:[function(b,F,C){var m=Object.create(null),h=Math.random;F.exports=function(){do var l=h().toString(36).slice(2);while(m[l]);
return l}},{}],217:[function(b,F,C){C=b("es5-ext/object/set-prototype-of");var m=b("es5-ext/string/#/contains"),h=b("d"),l=b("es6-symbol"),e=b("./"),a=Object.defineProperty;var g=F.exports=function(k,p){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");e.call(this,k);p=p?m.call(p,"key+value")?"key+value":m.call(p,"key")?"key":"value":"value";a(this,"__kind__",h("",p))};C&&C(g,e);delete g.prototype.constructor;g.prototype=Object.create(e.prototype,{_resolve:h(function(k){return"value"===
this.__kind__?this.__list__[k]:"key+value"===this.__kind__?[k,this.__list__[k]]:k})});a(g.prototype,l.toStringTag,h("c","Array Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es5-ext/string/#/contains":212,"es6-symbol":225}],218:[function(b,F,C){var m=b("es5-ext/function/is-arguments"),h=b("es5-ext/object/valid-callable"),l=b("es5-ext/string/is-string"),e=b("./get"),a=Array.isArray,g=Function.prototype.call,k=Array.prototype.some;F.exports=function(p,n,c){var f,d;a(p)||m(p)?f=
"array":l(p)?f="string":p=e(p);h(n);var q=function(){d=!0};if("array"===f)k.call(p,function(w){g.call(n,c,w,q);return d});else if("string"===f){var r=p.length;for(f=0;f<r;++f){var u=p[f];if(f+1<r){var v=u.charCodeAt(0);55296<=v&&56319>=v&&(u+=p[++f])}g.call(n,c,u,q);if(d)break}}else for(f=p.next();!f.done;){g.call(n,c,f.value,q);if(d)break;f=p.next()}}},{"./get":219,"es5-ext/function/is-arguments":184,"es5-ext/object/valid-callable":209,"es5-ext/string/is-string":215}],219:[function(b,F,C){var m=
b("es5-ext/function/is-arguments"),h=b("es5-ext/string/is-string"),l=b("./array"),e=b("./string"),a=b("./valid-iterable"),g=b("es6-symbol").iterator;F.exports=function(k){return"function"===typeof a(k)[g]?k[g]():m(k)?new l(k):h(k)?new e(k):new l(k)}},{"./array":217,"./string":222,"./valid-iterable":223,"es5-ext/function/is-arguments":184,"es5-ext/string/is-string":215,"es6-symbol":225}],220:[function(b,F,C){var m=b("es5-ext/array/#/clear");C=b("es5-ext/object/assign");var h=b("es5-ext/object/valid-callable"),
l=b("es5-ext/object/valid-value"),e=b("d"),a=b("d/auto-bind"),g=b("es6-symbol"),k=Object.defineProperty,p=Object.defineProperties,n;F.exports=n=function(c,f){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");p(this,{__list__:e("w",l(c)),__context__:e("w",f),__nextIndex__:e("w",0)});f&&(h(f.on),f.on("_add",this._onAdd),f.on("_delete",this._onDelete),f.on("_clear",this._onClear))};delete n.prototype.constructor;p(n.prototype,C({_next:e(function(){if(this.__list__){if(this.__redo__){var c=
this.__redo__.shift();if(void 0!==c)return c}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(c){return void 0===c?{done:!0,value:void 0}:{done:!1,value:this._resolve(c)}}),_resolve:e(function(c){return this.__list__[c]}),_unBind:e(function(){this.__list__=null;delete this.__redo__;this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),
this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[g.toStringTag]||"Object")+"]"})},a({_onAdd:e(function(c){c>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(f,d){f>=c&&(this.__redo__[d]=++f)},this),this.__redo__.push(c)):k(this,"__redo__",e("c",[c])))}),_onDelete:e(function(c){if(!(c>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__)){var f=this.__redo__.indexOf(c);-1!==f&&this.__redo__.splice(f,
1);this.__redo__.forEach(function(d,q){d>c&&(this.__redo__[q]=--d)},this)}}),_onClear:e(function(){this.__redo__&&m.call(this.__redo__);this.__nextIndex__=0})})));k(n.prototype,g.iterator,e(function(){return this}))},{d:155,"d/auto-bind":154,"es5-ext/array/#/clear":180,"es5-ext/object/assign":193,"es5-ext/object/valid-callable":209,"es5-ext/object/valid-value":211,"es6-symbol":225}],221:[function(b,F,C){var m=b("es5-ext/function/is-arguments"),h=b("es5-ext/object/is-value"),l=b("es5-ext/string/is-string"),
e=b("es6-symbol").iterator,a=Array.isArray;F.exports=function(g){return h(g)?a(g)||l(g)||m(g)?!0:"function"===typeof g[e]:!1}},{"es5-ext/function/is-arguments":184,"es5-ext/object/is-value":200,"es5-ext/string/is-string":215,"es6-symbol":225}],222:[function(b,F,C){C=b("es5-ext/object/set-prototype-of");var m=b("d"),h=b("es6-symbol"),l=b("./"),e=Object.defineProperty;var a=F.exports=function(g){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");g=String(g);l.call(this,g);e(this,
"__length__",m("",g.length))};C&&C(a,l);delete a.prototype.constructor;a.prototype=Object.create(l.prototype,{_next:m(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:m(function(g){g=this.__list__[g];if(this.__nextIndex__===this.__length__)return g;var k=g.charCodeAt(0);return 55296<=k&&56319>=k?g+this.__list__[this.__nextIndex__++]:g})});e(a.prototype,h.toStringTag,m("c","String Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,
"es6-symbol":225}],223:[function(b,F,C){var m=b("./is-iterable");F.exports=function(h){if(!m(h))throw new TypeError(h+" is not iterable");return h}},{"./is-iterable":221}],224:[function(b,F,C){(function(m,h){(function(l,e){"object"===typeof C&&"undefined"!==typeof F?F.exports=e():l.ES6Promise=e()})(this,function(){function l(ra){return"function"===typeof ra}function e(){return function(){return m.nextTick(n)}}function a(){return"undefined"!==typeof J?function(){J(n)}:p()}function g(){var ra=0,ta=
new P(n),oa=document.createTextNode("");ta.observe(oa,{characterData:!0});return function(){oa.data=ra=++ra%2}}function k(){var ra=new MessageChannel;ra.port1.onmessage=n;return function(){return ra.port2.postMessage(0)}}function p(){var ra=setTimeout;return function(){return ra(n,1)}}function n(){for(var ra=0;ra<H;ra+=2)(0,Y[ra])(Y[ra+1]),Y[ra]=void 0,Y[ra+1]=void 0;H=0}function c(){try{var ra=Function("return this")().require("vertx");J=ra.runOnLoop||ra.runOnContext;return a()}catch(ta){return p()}}
function f(ra,ta){var oa=this,ua=new this.constructor(q);void 0===ua[ea]&&L(ua);var ka=oa._state;if(ka){var sa=arguments[ka-1];Q(function(){return G(ka,ua,sa,oa._result)})}else B(oa,ua,ra,ta);return ua}function d(ra){if(ra&&"object"===typeof ra&&ra.constructor===this)return ra;var ta=new this(q);y(ta,ra);return ta}function q(){}function r(ra,ta,oa,ua){try{ra.call(ta,oa,ua)}catch(ka){return ka}}function u(ra,ta,oa){Q(function(ua){var ka=!1,sa=r(oa,ta,function(ya){ka||(ka=!0,ta!==ya?y(ua,ya):x(ua,ya))},
function(ya){ka||(ka=!0,E(ua,ya))},"Settle: "+(ua._label||" unknown promise"));!ka&&sa&&(ka=!0,E(ua,sa))},ra)}function v(ra,ta){ta._state===ia?x(ra,ta._result):ta._state===fa?E(ra,ta._result):B(ta,void 0,function(oa){return y(ra,oa)},function(oa){return E(ra,oa)})}function w(ra,ta,oa){ta.constructor===ra.constructor&&oa===f&&ta.constructor.resolve===d?v(ra,ta):void 0===oa?x(ra,ta):l(oa)?u(ra,ta,oa):x(ra,ta)}function y(ra,ta){if(ra===ta)E(ra,new TypeError("You cannot resolve a promise with itself"));
else{var oa=typeof ta;if(null===ta||"object"!==oa&&"function"!==oa)x(ra,ta);else{oa=void 0;try{oa=ta.then}catch(ua){E(ra,ua);return}w(ra,ta,oa)}}}function D(ra){ra._onerror&&ra._onerror(ra._result);t(ra)}function x(ra,ta){ra._state===ca&&(ra._result=ta,ra._state=ia,0!==ra._subscribers.length&&Q(t,ra))}function E(ra,ta){ra._state===ca&&(ra._state=fa,ra._result=ta,Q(D,ra))}function B(ra,ta,oa,ua){var ka=ra._subscribers,sa=ka.length;ra._onerror=null;ka[sa]=ta;ka[sa+ia]=oa;ka[sa+fa]=ua;0===sa&&ra._state&&
Q(t,ra)}function t(ra){var ta=ra._subscribers,oa=ra._state;if(0!==ta.length){for(var ua,ka,sa=ra._result,ya=0;ya<ta.length;ya+=3)ua=ta[ya],ka=ta[ya+oa],ua?G(oa,ua,ka,sa):ka(sa);ra._subscribers.length=0}}function G(ra,ta,oa,ua){var ka=l(oa),sa=void 0,ya=void 0,qa=!0;if(ka){try{sa=oa(ua)}catch(xa){qa=!1,ya=xa}if(ta===sa){E(ta,new TypeError("A promises callback cannot return that same promise."));return}}else sa=ua;ta._state===ca&&(ka&&qa?y(ta,sa):!1===qa?E(ta,ya):ra===ia?x(ta,sa):ra===fa&&E(ta,sa))}
function I(ra,ta){try{ta(function(oa){y(ra,oa)},function(oa){E(ra,oa)})}catch(oa){E(ra,oa)}}function L(ra){ra[ea]=ha++;ra._state=void 0;ra._result=void 0;ra._subscribers=[]}var M=void 0,N=M=Array.isArray?Array.isArray:function(ra){return"[object Array]"===Object.prototype.toString.call(ra)},H=0,J=void 0,O=void 0,Q=function(ra,ta){Y[H]=ra;Y[H+1]=ta;H+=2;2===H&&(O?O(n):ba())},U=(M="undefined"!==typeof window?window:void 0)||{},P=U.MutationObserver||U.WebKitMutationObserver;U="undefined"===typeof self&&
"undefined"!==typeof m&&"[object process]"==={}.toString.call(m);var V="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,Y=Array(1E3),ba=void 0;ba=U?e():P?g():V?k():void 0===M&&"function"===typeof b?c():p();var ea=Math.random().toString(36).substring(2),ca=void 0,ia=1,fa=2,ha=0,na=function(){function ra(ta,oa){this._instanceConstructor=ta;this.promise=new ta(q);this.promise[ea]||L(this.promise);N(oa)?(this._remaining=this.length=oa.length,
this._result=Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(oa),0===this._remaining&&x(this.promise,this._result))):E(this.promise,Error("Array Methods must be provided an Array"))}ra.prototype._enumerate=function(ta){for(var oa=0;this._state===ca&&oa<ta.length;oa++)this._eachEntry(ta[oa],oa)};ra.prototype._eachEntry=function(ta,oa){var ua=this._instanceConstructor,ka=ua.resolve;if(ka===d){var sa=ka=void 0,ya=!1;try{ka=ta.then}catch(qa){ya=
!0,sa=qa}ka===f&&ta._state!==ca?this._settledAt(ta._state,oa,ta._result):"function"!==typeof ka?(this._remaining--,this._result[oa]=ta):ua===pa?(ua=new ua(q),ya?E(ua,sa):w(ua,ta,ka),this._willSettleAt(ua,oa)):this._willSettleAt(new ua(function(qa){return qa(ta)}),oa)}else this._willSettleAt(ka(ta),oa)};ra.prototype._settledAt=function(ta,oa,ua){var ka=this.promise;ka._state===ca&&(this._remaining--,ta===fa?E(ka,ua):this._result[oa]=ua);0===this._remaining&&x(ka,this._result)};ra.prototype._willSettleAt=
function(ta,oa){var ua=this;B(ta,void 0,function(ka){return ua._settledAt(ia,oa,ka)},function(ka){return ua._settledAt(fa,oa,ka)})};return ra}(),pa=function(){function ra(ta){this[ea]=ha++;this._result=this._state=void 0;this._subscribers=[];if(q!==ta){if("function"!==typeof ta)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof ra)I(this,ta);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}ra.prototype.catch=function(ta){return this.then(null,ta)};ra.prototype.finally=function(ta){var oa=this.constructor;return l(ta)?this.then(function(ua){return oa.resolve(ta()).then(function(){return ua})},function(ua){return oa.resolve(ta()).then(function(){throw ua;})}):this.then(ta,ta)};return ra}();pa.prototype.then=f;pa.all=function(ra){return(new na(this,ra)).promise};pa.race=function(ra){var ta=this;return N(ra)?new ta(function(oa,ua){for(var ka=ra.length,sa=0;sa<ka;sa++)ta.resolve(ra[sa]).then(oa,
ua)}):new ta(function(oa,ua){return ua(new TypeError("You must pass an array to race."))})};pa.resolve=d;pa.reject=function(ra){var ta=new this(q);E(ta,ra);return ta};pa._setScheduler=function(ra){O=ra};pa._setAsap=function(ra){Q=ra};pa._asap=Q;pa.polyfill=function(){var ra=void 0;if("undefined"!==typeof h)ra=h;else if("undefined"!==typeof self)ra=self;else try{ra=Function("return this")()}catch(ua){throw Error("polyfill failed because global object is unavailable in this environment");}var ta=ra.Promise;
if(ta){var oa=null;try{oa=Object.prototype.toString.call(ta.resolve())}catch(ua){}if("[object Promise]"===oa&&!ta.cast)return}ra.Promise=pa};return pa.Promise=pa})}).call(this,b("_process"),"undefined"!==typeof W?W:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:500}],225:[function(b,F,C){F.exports=b("./is-implemented")()?b("ext/global-this").Symbol:b("./polyfill")},{"./is-implemented":226,"./polyfill":231,"ext/global-this":238}],226:[function(b,F,C){var m=b("ext/global-this"),
h={object:!0,symbol:!0};F.exports=function(){var l=m.Symbol;if("function"!==typeof l)return!1;var e=l("test symbol");try{String(e)}catch(a){return!1}return h[typeof l.iterator]&&h[typeof l.toPrimitive]&&h[typeof l.toStringTag]?!0:!1}},{"ext/global-this":238}],227:[function(b,F,C){F.exports=function(m){return m?"symbol"===typeof m?!0:m.constructor&&"Symbol"===m.constructor.name?"Symbol"===m[m.constructor.toStringTag]:!1:!1}},{}],228:[function(b,F,C){var m=b("d");b=Object.create;var h=Object.defineProperty,
l=Object.prototype,e=b(null);F.exports=function(a){for(var g=0,k,p;e[a+(g||"")];)++g;a+=g||"";e[a]=!0;k="@@"+a;h(l,k,m.gs(null,function(n){p||(p=!0,h(this,k,m(n)),p=!1)}));return k}},{d:155}],229:[function(b,F,C){var m=b("d"),h=b("ext/global-this").Symbol;F.exports=function(l){return Object.defineProperties(l,{hasInstance:m("",h&&h.hasInstance||l("hasInstance")),isConcatSpreadable:m("",h&&h.isConcatSpreadable||l("isConcatSpreadable")),iterator:m("",h&&h.iterator||l("iterator")),match:m("",h&&h.match||
l("match")),replace:m("",h&&h.replace||l("replace")),search:m("",h&&h.search||l("search")),species:m("",h&&h.species||l("species")),split:m("",h&&h.split||l("split")),toPrimitive:m("",h&&h.toPrimitive||l("toPrimitive")),toStringTag:m("",h&&h.toStringTag||l("toStringTag")),unscopables:m("",h&&h.unscopables||l("unscopables"))})}},{d:155,"ext/global-this":238}],230:[function(b,F,C){var m=b("d"),h=b("../../../validate-symbol"),l=Object.create(null);F.exports=function(e){return Object.defineProperties(e,
{for:m(function(a){return l[a]?l[a]:l[a]=e(String(a))}),keyFor:m(function(a){var g;h(a);for(g in l)if(l[g]===a)return g})})}},{"../../../validate-symbol":232,d:155}],231:[function(b,F,C){var m=b("d"),h=b("./validate-symbol"),l=b("ext/global-this").Symbol,e=b("./lib/private/generate-name");C=b("./lib/private/setup/standard-symbols");b=b("./lib/private/setup/symbol-registry");var a=Object.create,g=Object.defineProperties,k=Object.defineProperty,p;if("function"===typeof l)try{String(l());var n=!0}catch(f){}else l=
null;var c=function(f){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return p(f)};F.exports=p=function q(d){if(this instanceof q)throw new TypeError("Symbol is not a constructor");if(n)return l(d);var r=a(c.prototype);d=void 0===d?"":String(d);return g(r,{__description__:m("",d),__name__:m("",e(d))})};C(p);b(p);g(c.prototype,{constructor:m(p),toString:m("",function(){return this.__name__})});g(p.prototype,{toString:m(function(){return"Symbol ("+h(this).__description__+")"}),
valueOf:m(function(){return h(this)})});k(p.prototype,p.toPrimitive,m("",function(){var d=h(this);return"symbol"===typeof d?d:d.toString()}));k(p.prototype,p.toStringTag,m("c","Symbol"));k(c.prototype,p.toStringTag,m("c",p.prototype[p.toStringTag]));k(c.prototype,p.toPrimitive,m("c",p.prototype[p.toPrimitive]))},{"./lib/private/generate-name":228,"./lib/private/setup/standard-symbols":229,"./lib/private/setup/symbol-registry":230,"./validate-symbol":232,d:155,"ext/global-this":238}],232:[function(b,
F,C){var m=b("./is-symbol");F.exports=function(h){if(!m(h))throw new TypeError(h+" is not a symbol");return h}},{"./is-symbol":227}],233:[function(b,F,C){F.exports=b("./is-implemented")()?WeakMap:b("./polyfill")},{"./is-implemented":234,"./polyfill":236}],234:[function(b,F,C){F.exports=function(){var m;if("function"!==typeof WeakMap)return!1;try{var h=new WeakMap([[m={},"one"],[{},"two"],[{},"three"]])}catch(l){return!1}return"[object WeakMap]"!==String(h)||"function"!==typeof h.set||h.set({},1)!==
h||"function"!==typeof h.delete||"function"!==typeof h.has||"one"!==h.get(m)?!1:!0}},{}],235:[function(b,F,C){b="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);F.exports=b},{}],236:[function(b,F,C){var m=b("es5-ext/object/is-value"),h=b("es5-ext/object/set-prototype-of"),l=b("es5-ext/object/valid-object"),e=b("es5-ext/object/valid-value"),a=b("es5-ext/string/random-uniq"),g=b("d"),k=b("es6-iterator/get"),p=b("es6-iterator/for-of");C=b("es6-symbol").toStringTag;
var n=b("./is-native-implemented"),c=Array.isArray,f=Object.defineProperty,d=Object.prototype.hasOwnProperty,q=Object.getPrototypeOf,r;F.exports=r=function(u){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");var v=n&&h&&WeakMap!==r?h(new WeakMap,q(this)):this;m(u)&&(c(u)||(u=k(u)));f(v,"__weakMapData__",g("c","$weakMap$"+a()));if(!u)return v;p(u,function(w){e(w);v.set(w[0],w[1])});return v};n&&(h&&h(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:g(r)}));
Object.defineProperties(r.prototype,{delete:g(function(u){return d.call(l(u),this.__weakMapData__)?(delete u[this.__weakMapData__],!0):!1}),get:g(function(u){if(d.call(l(u),this.__weakMapData__))return u[this.__weakMapData__]}),has:g(function(u){return d.call(l(u),this.__weakMapData__)}),set:g(function(u,v){f(l(u),this.__weakMapData__,g("c",v));return this}),toString:g(function(){return"[object WeakMap]"})});f(r.prototype,C,g("c","WeakMap"))},{"./is-native-implemented":235,d:155,"es5-ext/object/is-value":200,
"es5-ext/object/set-prototype-of":206,"es5-ext/object/valid-object":210,"es5-ext/object/valid-value":211,"es5-ext/string/random-uniq":216,"es6-iterator/for-of":218,"es6-iterator/get":219,"es6-symbol":225}],237:[function(b,F,C){var m=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw Error("Unable to resolve global `this`");};F.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},
configurable:!0})}catch(h){return m()}try{return __global__?__global__:m()}finally{delete Object.prototype.__global__}}()},{}],238:[function(b,F,C){F.exports=b("./is-implemented")()?globalThis:b("./implementation")},{"./implementation":237,"./is-implemented":239}],239:[function(b,F,C){F.exports=function(){return"object"===typeof globalThis&&globalThis?globalThis.Array===Array:!1}},{}],240:[function(b,F,C){F.exports=function(m,h,l){h=h||0;l=l||1;return[[m[12]+m[0],m[13]+m[1],m[14]+m[2],m[15]+m[3]],
[m[12]-m[0],m[13]-m[1],m[14]-m[2],m[15]-m[3]],[m[12]+m[4],m[13]+m[5],m[14]+m[6],m[15]+m[7]],[m[12]-m[4],m[13]-m[5],m[14]-m[6],m[15]-m[7]],[h*m[12]+m[8],h*m[13]+m[9],h*m[14]+m[10],h*m[15]+m[11]],[l*m[12]-m[8],l*m[13]-m[9],l*m[14]-m[10],l*m[15]-m[11]]]}},{}],241:[function(b,F,C){var m=b("is-string-blank");F.exports=function(h){var l=typeof h;if("string"===l){if(l=h,h=+h,0===h&&m(l))return!1}else if("number"!==l)return!1;return 1>h-h}},{"is-string-blank":444}],242:[function(b,F,C){function m(g,k,p){return Math.min(k,
Math.max(g,p))}function h(g,k,p){this.dimension=g.length;this.bounds=[Array(this.dimension),Array(this.dimension)];for(var n=0;n<this.dimension;++n)this.bounds[0][n]=-Infinity,this.bounds[1][n]=Infinity;this._state=g.slice().reverse();this._velocity=k.slice().reverse();this._time=[p];this._scratch=[g.slice(),g.slice(),g.slice(),g.slice(),g.slice()]}function l(g){for(var k=Array(g),p=0;p<g;++p)k[p]=0;return k}F.exports=function(g,k,p){switch(arguments.length){case 0:return new h([0],[0],0);case 1:if("number"===
typeof g){var n=l(g);return new h(n,n,0)}return new h(g,l(g.length),0);case 2:if("number"===typeof k)return n=l(g.length),new h(g,n,+k);p=0;case 3:if(g.length!==k.length)throw Error("state and velocity lengths must match");return new h(g,k,p)}};var e=b("cubic-hermite"),a=b("binary-search-bounds");b=h.prototype;b.flush=function(g){g=a.gt(this._time,g)-1;0>=g||(this._time.splice(0,g),this._state.splice(0,g*this.dimension),this._velocity.splice(0,g*this.dimension))};b.curve=function(g){var k=this._time,
p=k.length,n=a.le(k,g),c=this._scratch[0],f=this._state,d=this._velocity,q=this.dimension,r=this.bounds;if(0>n){var u=q-1;for(k=0;k<q;++k,--u)c[k]=f[u]}else if(n>=p-1)for(u=f.length-1,g-=k[p-1],k=0;k<q;++k,--u)c[k]=f[u]+g*d[u];else{u=q*(n+1)-1;p=k[n];n=k[n+1]-p||1;var v=this._scratch[1],w=this._scratch[2],y=this._scratch[3],D=this._scratch[4],x=!0;for(k=0;k<q;++k,--u)v[k]=f[u],y[k]=d[u]*n,w[k]=f[u+q],D[k]=d[u+q]*n,x=x&&v[k]===w[k]&&y[k]===D[k]&&0===y[k];if(x)for(k=0;k<q;++k)c[k]=v[k];else e(v,y,w,
D,(g-p)/n,c)}f=r[0];r=r[1];for(k=0;k<q;++k)c[k]=m(f[k],r[k],c[k]);return c};b.dcurve=function(g){var k=this._time,p=k.length,n=a.le(k,g),c=this._scratch[0],f=this._state,d=this._velocity,q=this.dimension;if(n>=p-1)for(p=f.length-1,k=0;k<q;++k,--p)c[k]=d[p];else{p=q*(n+1)-1;var r=k[n];n=k[n+1]-r||1;var u=this._scratch[1],v=this._scratch[2],w=this._scratch[3],y=this._scratch[4],D=!0;for(k=0;k<q;++k,--p)u[k]=f[p],w[k]=d[p]*n,v[k]=f[p+q],y[k]=d[p+q]*n,D=D&&u[k]===v[k]&&w[k]===y[k]&&0===w[k];if(D)for(k=
0;k<q;++k)c[k]=0;else for(e.derivative(u,w,v,y,(g-r)/n,c),k=0;k<q;++k)c[k]/=n}return c};b.lastT=function(){var g=this._time;return g[g.length-1]};b.stable=function(){for(var g=this._velocity,k=g.length,p=this.dimension-1;0<=p;--p)if(g[--k])return!1;return!0};b.jump=function(g){var k=this.lastT(),p=this.dimension;if(!(g<k||arguments.length!==p+1)){var n=this._state,c=this._velocity,f=n.length-this.dimension,d=this.bounds,q=d[0];d=d[1];this._time.push(k,g);for(k=0;2>k;++k)for(var r=0;r<p;++r)n.push(n[f++]),
c.push(0);this._time.push(g);for(r=p;0<r;--r)n.push(m(q[r-1],d[r-1],arguments[r])),c.push(0)}};b.push=function(g){var k=this.lastT(),p=this.dimension;if(!(g<k||arguments.length!==p+1)){var n=this._state,c=this._velocity,f=n.length-this.dimension,d=g-k,q=this.bounds;k=q[0];q=q[1];d=1E-6<d?1/d:0;for(this._time.push(g);0<p;--p){var r=m(k[p-1],q[p-1],arguments[p]);n.push(r);c.push((r-n[f++])*d)}}};b.set=function(g){var k=this.dimension;if(!(g<this.lastT()||arguments.length!==k+1)){var p=this._state,n=
this._velocity,c=this.bounds,f=c[0];c=c[1];for(this._time.push(g);0<k;--k)p.push(m(f[k-1],c[k-1],arguments[k])),n.push(0)}};b.move=function(g){var k=this.lastT(),p=this.dimension;if(!(g<=k||arguments.length!==p+1)){var n=this._state,c=this._velocity,f=n.length-this.dimension,d=this.bounds,q=d[0];d=d[1];k=g-k;k=1E-6<k?1/k:0;for(this._time.push(g);0<p;--p){var r=arguments[p];n.push(m(q[p-1],d[p-1],n[f++]+r));c.push(r*k)}}};b.idle=function(g){var k=this.lastT();if(!(g<k)){var p=this.dimension,n=this._state,
c=this._velocity,f=n.length-p,d=this.bounds,q=d[0];d=d[1];k=g-k;this._time.push(g);for(g=p-1;0<=g;--g)n.push(m(q[g],d[g],n[f]+k*c[f])),c.push(0),f+=1}}},{"binary-search-bounds":243,"cubic-hermite":150}],243:[function(b,F,C){function m(l,e,a,g,k,p){l=["function ",l,"(a,l,h,",g.join(","),"){",p?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da",k?".get(m)":"[m]"];p?0>e.indexOf("c")?l.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):l.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):
l.push(";if(",e,"){i\x3dm;");a?l.push("l\x3dm+1}else{h\x3dm-1}"):l.push("h\x3dm-1}else{l\x3dm+1}");l.push("}");p?l.push("return -1};"):l.push("return i};");return l.join("")}function h(l,e,a,g){return(new Function([m("A","x"+l+"y",e,["y"],!1,g),m("B","x"+l+"y",e,["y"],!0,g),m("P","c(x,y)"+l+"0",e,["y","c"],!1,g),m("Q","c(x,y)"+l+"0",e,["y","c"],!0,g),"function dispatchBsearch",a,"(a,y,c,l,h){if(a.shape){if(typeof(c)\x3d\x3d\x3d'function'){return Q(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
a].join("")))()}F.exports={ge:h("\x3e\x3d",!1,"GE"),gt:h("\x3e",!1,"GT"),lt:h("\x3c",!0,"LT"),le:h("\x3c\x3d",!0,"LE"),eq:h("-",!0,"EQ",!0)}},{}],244:[function(b,F,C){var m=b("dtype");F.exports=function(h,l,e){if(!h)throw new TypeError("must specify data as first parameter");e=+(e||0)|0;if(Array.isArray(h)&&h[0]&&"number"===typeof h[0][0]){var a=h[0].length,g=h.length*a;l&&"string"!==typeof l||(l=new (m(l||"float32"))(g+e));var k=l.length-e;if(g!==k)throw Error("source length "+g+" ("+a+"x"+h.length+
") does not match destination length "+k);for(g=0;g<h.length;g++)for(k=0;k<a;k++)l[e++]=null===h[g][k]?NaN:h[g][k]}else if(l&&"string"!==typeof l)l.set(h,e);else if(a=m(l||"float32"),Array.isArray(h)||"array"===l)for(l=new a(h.length+e),g=0,a=l.length;e<a;e++,g++)l[e]=null===h[g]?NaN:h[g];else 0===e?l=new a(h):(l=new a(h.length+e),l.set(h,e));return l}},{dtype:175}],245:[function(b,F,C){var m=b("css-font/stringify"),h=[32,126];F.exports=function(l){l=l||{};var e=l.shape?l.shape:l.canvas?[l.canvas.width,
l.canvas.height]:[512,512],a=l.canvas||document.createElement("canvas"),g=l.font,k="number"===typeof l.step?[l.step,l.step]:l.step||[32,32];l=l.chars||h;g&&"string"!==typeof g&&(g=m(g));if(!Array.isArray(l))l=String(l).split("");else if(2===l.length&&"number"===typeof l[0]&&"number"===typeof l[1]){for(var p=[],n=l[0],c=0;n<=l[1];n++)p[c++]=String.fromCharCode(n);l=p}e=e.slice();a.width=e[0];a.height=e[1];p=a.getContext("2d");p.fillStyle="#000";p.fillRect(0,0,a.width,a.height);p.font=g;p.textAlign=
"center";p.textBaseline="middle";p.fillStyle="#fff";g=k[0]/2;c=k[1]/2;for(n=0;n<l.length;n++)p.fillText(l[n],g,c),(g+=k[0])>e[0]-k[0]/2&&(g=k[0]/2,c+=k[1]);return a}},{"css-font/stringify":147}],246:[function(b,F,C){function m(a,g){g||(g={});if("string"===typeof a||Array.isArray(a))g.family=a;var k=Array.isArray(g.family)?g.family.join(", "):g.family;if(!k)throw Error("`family` must be defined");var p=g.size||g.fontSize||g.em||48;a=[g.style||g.fontStyle||"",g.weight||g.fontWeight||"",p].join(" ")+
"px "+k;var n=g.origin||"top";if(m.cache[k]&&p<=m.cache[k].em)return h(m.cache[k],n);var c=g.canvas||m.canvas,f=c.getContext("2d"),d=void 0!==g.upper?g.upper:"H",q=void 0!==g.lower?g.lower:"x",r=void 0!==g.descent?g.descent:"p",u=void 0!==g.ascent?g.ascent:"h",v=void 0!==g.tittle?g.tittle:"i";g=void 0!==g.overshoot?g.overshoot:"O";var w=Math.ceil(1.5*p);c.height=w;c.width=.5*w;f.font=a;a={top:0};f.clearRect(0,0,w,w);f.textBaseline="top";f.fillStyle="black";f.fillText("H",0,0);c=l(f.getImageData(0,
0,w,w));f.clearRect(0,0,w,w);f.textBaseline="bottom";f.fillText("H",0,w);var y=l(f.getImageData(0,0,w,w));a.lineHeight=a.bottom=w-y+c;f.clearRect(0,0,w,w);f.textBaseline="alphabetic";f.fillText("H",0,w);y=l(f.getImageData(0,0,w,w));y=w-y-1+c;a.baseline=a.alphabetic=y;f.clearRect(0,0,w,w);f.textBaseline="middle";f.fillText("H",0,.5*w);var D=l(f.getImageData(0,0,w,w));a.median=a.middle=w-D-1+c-.5*w;f.clearRect(0,0,w,w);f.textBaseline="hanging";f.fillText("H",0,.5*w);D=l(f.getImageData(0,0,w,w));a.hanging=
w-D-1+c-.5*w;f.clearRect(0,0,w,w);f.textBaseline="ideographic";f.fillText("H",0,w);D=l(f.getImageData(0,0,w,w));a.ideographic=w-D-1+c;d&&(f.clearRect(0,0,w,w),f.textBaseline="top",f.fillText(d,0,0),a.upper=l(f.getImageData(0,0,w,w)),a.capHeight=a.baseline-a.upper);q&&(f.clearRect(0,0,w,w),f.textBaseline="top",f.fillText(q,0,0),a.lower=l(f.getImageData(0,0,w,w)),a.xHeight=a.baseline-a.lower);v&&(f.clearRect(0,0,w,w),f.textBaseline="top",f.fillText(v,0,0),a.tittle=l(f.getImageData(0,0,w,w)));u&&(f.clearRect(0,
0,w,w),f.textBaseline="top",f.fillText(u,0,0),a.ascent=l(f.getImageData(0,0,w,w)));r&&(f.clearRect(0,0,w,w),f.textBaseline="top",f.fillText(r,0,0),a.descent=e(f.getImageData(0,0,w,w)));g&&(f.clearRect(0,0,w,w),f.textBaseline="top",f.fillText(g,0,0),f=e(f.getImageData(0,0,w,w)),a.overshoot=f-y);for(var x in a)a[x]/=p;a.em=p;m.cache[k]=a;return h(a,n)}function h(a,g){var k={};"string"===typeof g&&(g=a[g]);for(var p in a)"em"!==p&&(k[p]=a[p]-g);return k}function l(a){var g=a.height;a=a.data;for(var k=
3;k<a.length;k+=4)if(0!==a[k])return Math.floor(.25*(k-3)/g)}function e(a){var g=a.height;a=a.data;for(var k=a.length-1;0<k;k-=4)if(0!==a[k])return Math.floor(.25*(k-3)/g)}F.exports=m;m.canvas=document.createElement("canvas");m.cache={}},{}],247:[function(b,F,C){function m(d,q,r,u,v,w){this._color=d;this.key=q;this.value=r;this.left=u;this.right=v;this._count=w}function h(d){return new m(d._color,d.key,d.value,d.left,d.right,d._count)}function l(d,q){return new m(d,q.key,q.value,q.left,q.right,q._count)}
function e(d){d._count=1+(d.left?d.left._count:0)+(d.right?d.right._count:0)}function a(d,q){this._compare=d;this.root=q}function g(d,q){if(q.left){var r=g(d,q.left);if(r)return r}if(r=d(q.key,q.value))return r;if(q.right)return g(d,q.right)}function k(d,q,r,u){if(0>=q(d,u.key)){if(u.left){var v=k(d,q,r,u.left);if(v)return v}if(v=r(u.key,u.value))return v}if(u.right)return k(d,q,r,u.right)}function p(d,q,r,u,v){var w=r(d,v.key),y=r(q,v.key);if(0>=w&&(v.left&&(w=p(d,q,r,u,v.left))||0<y&&(w=u(v.key,
v.value))))return w;if(0<y&&v.right)return p(d,q,r,u,v.right)}function n(d,q){this.tree=d;this._stack=q}function c(d,q){d.key=q.key;d.value=q.value;d.left=q.left;d.right=q.right;d._color=q._color;d._count=q._count}function f(d,q){return d<q?-1:d>q?1:0}F.exports=function(d){return new a(d||f,null)};b=a.prototype;Object.defineProperty(b,"keys",{get:function(){var d=[];this.forEach(function(q,r){d.push(q)});return d}});Object.defineProperty(b,"values",{get:function(){var d=[];this.forEach(function(q,
r){d.push(r)});return d}});Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(d,q){for(var r=this._compare,u=this.root,v=[],w=[];u;){var y=r(d,u.key);v.push(u);w.push(y);u=0>=y?u.left:u.right}v.push(new m(0,d,q,null,null,1));for(d=v.length-2;0<=d;--d)u=v[d],v[d]=0>=w[d]?new m(u._color,u.key,u.value,v[d+1],u.right,u._count+1):new m(u._color,u.key,u.value,u.left,v[d+1],u._count+1);for(d=v.length-1;1<d;--d){w=v[d-1];u=v[d];if(1===w._color||1===u._color)break;
q=v[d-2];if(q.left===w)if(w.left===u)if((y=q.right)&&0===y._color)w._color=1,q.right=l(1,y),q._color=0,--d;else{q._color=0;q.left=w.right;w._color=1;w.right=q;v[d-2]=w;v[d-1]=u;e(q);e(w);3<=d&&(d=v[d-3],d.left===q?d.left=w:d.right=w);break}else if((y=q.right)&&0===y._color)w._color=1,q.right=l(1,y),q._color=0,--d;else{w.right=u.left;q._color=0;q.left=u.right;u._color=1;u.left=w;u.right=q;v[d-2]=u;v[d-1]=w;e(q);e(w);e(u);3<=d&&(d=v[d-3],d.left===q?d.left=u:d.right=u);break}else if(w.right===u)if((y=
q.left)&&0===y._color)w._color=1,q.left=l(1,y),q._color=0,--d;else{q._color=0;q.right=w.left;w._color=1;w.left=q;v[d-2]=w;v[d-1]=u;e(q);e(w);3<=d&&(d=v[d-3],d.right===q?d.right=w:d.left=w);break}else if((y=q.left)&&0===y._color)w._color=1,q.left=l(1,y),q._color=0,--d;else{w.left=u.right;q._color=0;q.right=u.left;u._color=1;u.right=w;u.left=q;v[d-2]=u;v[d-1]=w;e(q);e(w);e(u);3<=d&&(d=v[d-3],d.right===q?d.right=u:d.left=u);break}}v[0]._color=1;return new a(r,v[0])};b.forEach=function(d,q,r){if(this.root)switch(arguments.length){case 1:return g(d,
this.root);case 2:return k(q,this._compare,d,this.root);case 3:if(!(0<=this._compare(q,r)))return p(q,r,this._compare,d,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var d=[],q=this.root;q;)d.push(q),q=q.left;return new n(this,d)}});Object.defineProperty(b,"end",{get:function(){for(var d=[],q=this.root;q;)d.push(q),q=q.right;return new n(this,d)}});b.at=function(d){if(0>d)return new n(this,[]);for(var q=this.root,r=[];;){r.push(q);if(q.left){if(d<q.left._count){q=q.left;continue}d-=
q.left._count}if(!d)return new n(this,r);--d;if(q.right){if(d>=q.right._count)break;q=q.right}else break}return new n(this,[])};b.ge=function(d){for(var q=this._compare,r=this.root,u=[],v=0;r;){var w=q(d,r.key);u.push(r);0>=w&&(v=u.length);r=0>=w?r.left:r.right}u.length=v;return new n(this,u)};b.gt=function(d){for(var q=this._compare,r=this.root,u=[],v=0;r;){var w=q(d,r.key);u.push(r);0>w&&(v=u.length);r=0>w?r.left:r.right}u.length=v;return new n(this,u)};b.lt=function(d){for(var q=this._compare,
r=this.root,u=[],v=0;r;){var w=q(d,r.key);u.push(r);0<w&&(v=u.length);r=0>=w?r.left:r.right}u.length=v;return new n(this,u)};b.le=function(d){for(var q=this._compare,r=this.root,u=[],v=0;r;){var w=q(d,r.key);u.push(r);0<=w&&(v=u.length);r=0>w?r.left:r.right}u.length=v;return new n(this,u)};b.find=function(d){for(var q=this._compare,r=this.root,u=[];r;){var v=q(d,r.key);u.push(r);if(0===v)return new n(this,u);r=0>=v?r.left:r.right}return new n(this,[])};b.remove=function(d){return(d=this.find(d))?
d.remove():this};b.get=function(d){for(var q=this._compare,r=this.root;r;){var u=q(d,r.key);if(0===u)return r.value;r=0>=u?r.left:r.right}};b=n.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new n(this.tree,this._stack.slice())};b.remove=function(){var d=this._stack;if(0===d.length)return this.tree;var q=
Array(d.length),r=d[d.length-1];q[q.length-1]=new m(r._color,r.key,r.value,r.left,r.right,r._count);for(var u=d.length-2;0<=u;--u)r=d[u],q[u]=r.left===d[u+1]?new m(r._color,r.key,r.value,q[u+1],r.right,r._count):new m(r._color,r.key,r.value,r.left,q[u+1],r._count);r=q[q.length-1];if(r.left&&r.right){d=q.length;for(r=r.left;r.right;)q.push(r),r=r.right;u=q[d-1];q.push(new m(r._color,u.key,u.value,r.left,r.right,r._count));q[d-1].key=r.key;q[d-1].value=r.value;for(u=q.length-2;u>=d;--u)r=q[u],q[u]=
new m(r._color,r.key,r.value,r.left,q[u+1],r._count);q[d-1].left=q[d]}r=q[q.length-1];if(0===r._color)for(u=q[q.length-2],u.left===r?u.left=null:u.right===r&&(u.right=null),q.pop(),u=0;u<q.length;++u)q[u]._count--;else if(r.left||r.right)for(r.left?c(r,r.left):r.right&&c(r,r.right),r._color=1,u=0;u<q.length-1;++u)q[u]._count--;else{if(1===q.length)return new a(this.tree._compare,null);for(u=0;u<q.length;++u)q[u]._count--;u=q[q.length-2];for(var v,w,y,D=q.length-1;0<=D;--D){d=q[D];if(0===D){d._color=
1;break}v=q[D-1];if(v.left===d){w=v.right;if(w.right&&0===w.right._color){w=v.right=h(w);y=w.right=h(w.right);v.right=w.left;w.left=v;w.right=y;w._color=v._color;d._color=1;v._color=1;y._color=1;e(v);e(w);if(1<D){var x=q[D-2];x.left===v?x.left=w:x.right=w}q[D-1]=w;break}else if(w.left&&0===w.left._color){w=v.right=h(w);y=w.left=h(w.left);v.right=y.left;w.left=y.right;y.left=v;y.right=w;y._color=v._color;v._color=1;w._color=1;d._color=1;e(v);e(w);e(y);1<D&&(x=q[D-2],x.left===v?x.left=y:x.right=y);
q[D-1]=y;break}if(1===w._color)if(0===v._color){v._color=1;v.right=l(0,w);break}else v.right=l(0,w);else w=h(w),v.right=w.left,w.left=v,w._color=v._color,v._color=0,e(v),e(w),1<D&&(x=q[D-2],x.left===v?x.left=w:x.right=w),q[D-1]=w,q[D]=v,D+1<q.length?q[D+1]=d:q.push(d),D+=2}else{w=v.left;if(w.left&&0===w.left._color){w=v.left=h(w);y=w.left=h(w.left);v.left=w.right;w.right=v;w.left=y;w._color=v._color;d._color=1;v._color=1;y._color=1;e(v);e(w);1<D&&(x=q[D-2],x.right===v?x.right=w:x.left=w);q[D-1]=w;
break}else if(w.right&&0===w.right._color){w=v.left=h(w);y=w.right=h(w.right);v.left=y.right;w.right=y.left;y.right=v;y.left=w;y._color=v._color;v._color=1;w._color=1;d._color=1;e(v);e(w);e(y);1<D&&(x=q[D-2],x.right===v?x.right=y:x.left=y);q[D-1]=y;break}if(1===w._color)if(0===v._color){v._color=1;v.left=l(0,w);break}else v.left=l(0,w);else w=h(w),v.left=w.right,w.right=v,w._color=v._color,v._color=0,e(v),e(w),1<D&&(x=q[D-2],x.right===v?x.right=w:x.left=w),q[D-1]=w,q[D]=v,D+1<q.length?q[D+1]=d:q.push(d),
D+=2}}u.left===r?u.left=null:u.right=null}return new a(this.tree._compare,q[0])};Object.defineProperty(b,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(b,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var d=0,q=this._stack;if(0===q.length)return(d=this.tree.root)?d._count:0;q[q.length-1].left&&(d=q[q.length-
1].left._count);for(var r=q.length-2;0<=r;--r)q[r+1]===q[r].right&&(++d,q[r].left&&(d+=q[r].left._count));return d},enumerable:!0});b.next=function(){var d=this._stack;if(0!==d.length){var q=d[d.length-1];if(q.right)for(q=q.right;q;)d.push(q),q=q.left;else for(d.pop();0<d.length&&d[d.length-1].right===q;)q=d[d.length-1],d.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var d=this._stack;if(0===d.length)return!1;if(d[d.length-1].right)return!0;for(var q=d.length-1;0<q;--q)if(d[q-1].left===
d[q])return!0;return!1}});b.update=function(d){var q=this._stack;if(0===q.length)throw Error("Can't update empty node!");var r=Array(q.length),u=q[q.length-1];r[r.length-1]=new m(u._color,u.key,d,u.left,u.right,u._count);for(d=q.length-2;0<=d;--d)u=q[d],r[d]=u.left===q[d+1]?new m(u._color,u.key,u.value,r[d+1],u.right,u._count):new m(u._color,u.key,u.value,u.left,r[d+1],u._count);return new a(this.tree._compare,r[0])};b.prev=function(){var d=this._stack;if(0!==d.length){var q=d[d.length-1];if(q.left)for(q=
q.left;q;)d.push(q),q=q.right;else for(d.pop();0<d.length&&d[d.length-1].left===q;)q=d[d.length-1],d.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var d=this._stack;if(0===d.length)return!1;if(d[d.length-1].left)return!0;for(var q=d.length-1;0<q;--q)if(d[q-1].right===d[q])return!0;return!1}})},{}],248:[function(b,F,C){function m(e){if(0>e)return Number("0/0");for(var a=l[0],g=l.length-1;0<g;--g)a+=l[g]/(e+g);g=e+4.7421875+.5;return.5*Math.log(2*Math.PI)+(e+.5)*Math.log(g)-g+Math.log(a)-
Math.log(e)}var h=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],l=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
F.exports=function g(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*g(1-a));if(100<a)return Math.exp(m(a));--a;for(var k=h[0],p=1;9>p;p++)k+=h[p]/(a+p);p=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(p,a+.5)*Math.exp(-p)*k};F.exports.log=m},{}],249:[function(b,F,C){F.exports=function(m,h){if("string"!==typeof m)throw new TypeError("must specify type string");h=h||{};if("undefined"===typeof document&&!h.canvas)return null;var l=h.canvas||document.createElement("canvas");"number"===typeof h.width&&(l.width=
h.width);"number"===typeof h.height&&(l.height=h.height);var e;try{var a=[m];0===m.indexOf("webgl")&&a.push("experimental-"+m);for(m=0;m<a.length;m++)if(e=l.getContext(a[m],h))return e}catch(g){e=null}return e||null}},{}],250:[function(b,F,C){function m(w,y){w[0]=y[0];w[1]=y[1];w[2]=y[2];return w}function h(w){this.gl=w;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif",
"sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=
[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=
[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=k(w)}function l(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function e(w,y,D,x,E){var B=w.primalOffset,t=w.primalMinor,G=w.mirrorOffset;w=w.mirrorMinor;x=x[y];for(var I=0;3>I;++I)if(y!==I){var L=B,M=G,N=t,H=w;x&1<<I&&(L=G,M=B,N=w,H=t);L[I]=D[0][I];M[I]=D[1][I];0<E[I]?(N[I]=-1,H[I]=0):(N[I]=0,H[I]=1)}}F.exports=function(w,y){w=new h(w);
w.update(y);return w};var a=b("./lib/text.js"),g=b("./lib/lines.js"),k=b("./lib/background.js"),p=b("./lib/cube.js"),n=b("./lib/ticks.js"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);b=h.prototype;b.update=function(w){function y(H,J,O){if(O in w){var Q=w[O],U=this[O],P;(H?Array.isArray(Q)&&Array.isArray(Q[0]):Array.isArray(Q))?this[O]=P=[J(Q[0]),J(Q[1]),J(Q[2])]:this[O]=P=[J(Q),J(Q),J(Q)];for(H=0;3>H;++H)if(P[H]!==U[H])return!0}return!1}w=w||{};var D=y.bind(this,!1,Number),x=y.bind(this,
!1,Boolean),E=y.bind(this,!1,String),B=y.bind(this,!0,function(H){if(Array.isArray(H)){if(3===H.length)return[+H[0],+H[1],+H[2],1];if(4===H.length)return[+H[0],+H[1],+H[2],+H[3]]}return[0,0,0,1]}),t=!1,G=!1;if("bounds"in w){var I=w.bounds,L=0;for(;2>L;++L)for(var M=0;3>M;++M)I[L][M]!==this.bounds[L][M]&&(G=!0),this.bounds[L][M]=I[L][M]}if("ticks"in w){var N=w.ticks;t=!0;this.autoTicks=!1;for(L=0;3>L;++L)this.tickSpacing[L]=0}else D("tickSpacing")&&(G=this.autoTicks=!0);this._firstInit&&("ticks"in
w||"tickSpacing"in w||(this.autoTicks=!0),t=G=!0,this._firstInit=!1);G&&this.autoTicks&&(N=n.create(this.bounds,this.tickSpacing),t=!0);if(t){for(L=0;3>L;++L)N[L].sort(function(H,J){return H.x-J.x});n.equal(N,this.ticks)?t=!1:this.ticks=N}x("tickEnable");E("tickFont")&&(t=!0);D("tickSize");D("tickAngle");D("tickPad");B("tickColor");N=E("labels");E("labelFont")&&(N=!0);x("labelEnable");D("labelSize");D("labelPad");B("labelColor");x("lineEnable");x("lineMirror");D("lineWidth");B("lineColor");x("lineTickEnable");
x("lineTickMirror");D("lineTickLength");D("lineTickWidth");B("lineTickColor");x("gridEnable");D("gridWidth");B("gridColor");x("zeroEnable");B("zeroLineColor");D("zeroLineWidth");x("backgroundEnable");B("backgroundColor");this._text?this._text&&(N||t)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont);this._lines&&t&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=
g(this.gl,this.bounds,this.ticks))};var f=[new l,new l,new l],d=[0,0,0],q={model:c,view:c,projection:c,_ortho:!1};b.isOpaque=function(){return!0};b.isTransparent=function(){return!1};b.drawTransparent=function(w){};var r=[0,0,0],u=[0,0,0],v=[0,0,0];b.draw=function(w){function y(O){J=[0,0,0];J[O]=1}function D(O,Q,U){var P=(O+1)%3;O=(O+2)%3;var V=Q[P];Q=Q[O];var Y=U[P];U=U[O];0<V&&0<U?y(P):0<V&&0>U?y(P):0>V&&0<U?y(P):0>V&&0>U?y(P):0<Q&&0<Y?y(O):0<Q&&0>Y?y(O):0>Q&&0<Y?y(O):0>Q&&0>Y&&y(O)}w=w||q;var x=
this.gl,E=w.model||c,B=w.view||c,t=w.projection||c,G=this.bounds;w=w._ortho||!1;var I=p(E,B,t,G,w),L=I.cubeEdges;I=I.axis;w=(w?2:1)*this.pixelRatio*(t[3]*B[12]+t[7]*B[13]+t[11]*B[14]+t[15]*B[15])/x.drawingBufferHeight;for(x=0;3>x;++x)this.lastCubeProps.cubeEdges[x]=L[x],this.lastCubeProps.axis[x]=I[x];for(x=0;3>x;++x)e(f[x],x,this.bounds,L,I);x=this.gl;for(x=0;3>x;++x)d[x]=this.backgroundEnable[x]?I[x]:0;this._background.draw(E,B,t,G,d,this.backgroundColor);this._lines.bind(E,B,t,this);for(x=0;3>
x;++x){var M=[0,0,0];M[x]=0<I[x]?G[1][x]:G[0][x];for(L=0;2>L;++L){var N=(x+1+L)%3,H=(x+1+(L^1))%3;this.gridEnable[N]&&this._lines.drawGrid(N,H,this.bounds,M,this.gridColor[N],this.gridWidth[N]*this.pixelRatio)}for(L=0;2>L;++L)N=(x+1+L)%3,H=(x+1+(L^1))%3,this.zeroEnable[H]&&0>=Math.min(G[0][H],G[1][H])&&0<=Math.max(G[0][H],G[1][H])&&this._lines.drawZero(N,H,this.bounds,M,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}for(x=0;3>x;++x){this.lineEnable[x]&&this._lines.drawAxisLine(x,this.bounds,
f[x].primalOffset,this.lineColor[x],this.lineWidth[x]*this.pixelRatio);this.lineMirror[x]&&this._lines.drawAxisLine(x,this.bounds,f[x].mirrorOffset,this.lineColor[x],this.lineWidth[x]*this.pixelRatio);I=m(r,f[x].primalMinor);M=m(u,f[x].mirrorMinor);N=this.lineTickLength;for(L=0;3>L;++L)H=w/E[5*L],I[L]=I[L]*N[L]*H,M[L]=M[L]*N[L]*H;this.lineTickEnable[x]&&this._lines.drawAxisTicks(x,f[x].primalOffset,I,this.lineTickColor[x],this.lineTickWidth[x]*this.pixelRatio);this.lineTickMirror[x]&&this._lines.drawAxisTicks(x,
f[x].mirrorOffset,M,this.lineTickColor[x],this.lineTickWidth[x]*this.pixelRatio)}this._lines.unbind();this._text.bind(E,B,t,this.pixelRatio);for(x=0;3>x;++x){B=f[x].primalMinor;t=f[x].mirrorMinor;I=m(v,f[x].primalOffset);for(L=0;3>L;++L)this.lineTickEnable[x]&&(I[L]+=w*B[L]*Math.max(this.lineTickLength[L],0)/E[5*L]);M=[0,0,0];M[x]=1;if(this.tickEnable[x]){-3600===this.tickAngle[x]?(this.tickAngle[x]=0,this.tickAlign[x]="auto"):this.tickAlign[x]=-1;L=1;N=[this.tickAlign[x],.5,L];N[0]="auto"===N[0]?
0:parseInt(""+N[0]);var J=[0,0,0];D(x,B,t);for(L=0;3>L;++L)I[L]+=w*B[L]*this.tickPad[L]/E[5*L];this._text.drawTicks(x,this.tickSize[x],this.tickAngle[x],I,this.tickColor[x],M,J,N)}if(this.labelEnable[x]){L=0;J=[0,0,0];4<this.labels[x].length&&(y(x),L=1);N=[this.labelAlign[x],.5,L];N[0]="auto"===N[0]?0:parseInt(""+N[0]);for(L=0;3>L;++L)I[L]+=w*B[L]*this.labelPad[L]/E[5*L];I[x]+=.5*(G[0][x]+G[1][x]);this._text.drawLabel(x,this.labelSize[x],this.labelAngle[x],I,this.labelColor[x],[0,0,0],J,N)}}this._text.unbind()};
b.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":251,"./lib/cube.js":252,"./lib/lines.js":253,"./lib/text.js":255,"./lib/ticks.js":256}],251:[function(b,F,C){function m(a,g,k,p){this.gl=a;this.buffer=g;this.vao=k;this.shader=p}F.exports=function(a){for(var g=[],k=[],p=0,n=0;3>n;++n)for(var c=(n+1)%3,f=(n+2)%3,d=[0,0,0],q=[0,0,0],r=-1;1>=r;r+=2){k.push(p,p+2,p+1,p+1,p+2,p+3);d[n]=
r;q[n]=r;for(var u=-1;1>=u;u+=2){d[c]=u;for(var v=-1;1>=v;v+=2)d[f]=v,g.push(d[0],d[1],d[2],q[0],q[1],q[2]),p+=1}u=c;c=f;f=u}g=h(a,new Float32Array(g));k=h(a,new Uint16Array(k),a.ELEMENT_ARRAY_BUFFER);k=l(a,[{buffer:g,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:g,type:a.FLOAT,size:3,offset:12,stride:24}],k);p=e(a);p.attributes.position.location=0;p.attributes.normal.location=1;return new m(a,g,k,p)};var h=b("gl-buffer"),l=b("gl-vao"),e=b("./shaders").bg;b=m.prototype;b.draw=function(a,g,k,p,n,
c){for(var f=!1,d=0;3>d;++d)f=f||n[d];f&&(f=this.gl,f.enable(f.POLYGON_OFFSET_FILL),f.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:g,projection:k,bounds:p,enable:n,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),f.disable(f.POLYGON_OFFSET_FILL))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":254,"gl-buffer":258,"gl-vao":332}],252:[function(b,F,C){F.exports=function(r,u,v,w,y){h(a,u,r);
h(a,v,a);for(r=u=0;2>r;++r)for(p[2]=w[r][2],v=0;2>v;++v){p[1]=w[v][1];for(var D=0;2>D;++D){p[0]=w[D][0];for(var x=g[u],E=p,B=a,t=0;4>t;++t){x[t]=B[12+t];for(var G=0;3>G;++G)x[t]+=E[G]*B[4*G+t]}u+=1}}w=-1;for(r=0;8>r;++r){u=g[r][3];for(v=0;3>v;++v)k[r][v]=g[r][v]/u;y&&(k[r][2]*=-1);0>u&&(0>w?w=r:k[r][2]<k[w][2]&&(w=r))}if(0>w)for(r=w=0;3>r;++r){u=(r+2)%3;y=(r+1)%3;D=v=-1;for(x=0;2>x;++x)E=x<<r,B=E+(x<<u)+(1-x<<y),t=E+(1-x<<u)+(x<<y),0>e(k[E],k[B],k[t],n)||(x?v=1:D=1);if(!(0>v||0>D))for(x=0;2>x;++x){E=
x<<r;B=E+(x<<u)+(1-x<<y);t=E+(1-x<<u)+(x<<y);a:{E=[g[E],g[B],g[t],g[E+(1<<u)+(1<<y)]];for(t=0;t<c.length;++t)if(E=l.positive(E,c[t]),3>E.length){E=0;break a}t=E[0];B=t[0]/t[3];G=t[1]/t[3];var I=0;for(t=1;t+1<E.length;++t){var L=E[t],M=E[t+1];I+=Math.abs((L[0]/L[3]-B)*(M[1]/M[3]-G)-(L[1]/L[3]-G)*(M[0]/M[3]-B))}E=I}x?v=E:D=E}D>v&&(w|=1<<r)}u=7^w;x=-1;for(r=0;8>r;++r)r!==w&&r!==u&&(0>x?x=r:k[x][1]>k[r][1]&&(x=r));v=-1;for(r=0;3>r;++r)E=x^1<<r,E!==w&&E!==u&&(0>v&&(v=E),y=k[E],y[0]<k[v][0]&&(v=E));D=-1;
for(r=0;3>r;++r)E=x^1<<r,E!==w&&E!==u&&E!==v&&(0>D&&(D=E),y=k[E],y[0]>k[D][0]&&(D=E));y=f;y[0]=y[1]=y[2]=0;y[m.log2(v^x)]=x&v;y[m.log2(x^D)]=x&D;r=D^7;r===w||r===u?(r=v^7,y[m.log2(D^r)]=r&D):y[m.log2(v^r)]=r&v;y=d;for(r=0;3>r;++r)y[r]=w&1<<r?-1:1;return q};var m=b("bit-twiddle"),h=b("gl-mat4/multiply"),l=b("split-polygon"),e=b("robust-orientation"),a=Array(16),g=Array(8),k=Array(8),p=Array(3),n=[0,0,0];(function(){for(var r=0;8>r;++r)g[r]=[1,1,1,1],k[r]=[1,1,1]})();var c=[[0,0,1,0,0],[0,0,-1,1,0],
[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],f=[1,1,1],d=[0,0,0],q={cubeEdges:f,axis:d}},{"bit-twiddle":97,"gl-mat4/multiply":280,"robust-orientation":520,"split-polygon":538}],253:[function(b,F,C){function m(d){d[0]=d[1]=d[2]=0;return d}function h(d,q){d[0]=q[0];d[1]=q[1];d[2]=q[2];return d}function l(d,q,r,u,v,w,y,D){this.gl=d;this.vertBuffer=q;this.vao=r;this.shader=u;this.tickCount=v;this.tickOffset=w;this.gridCount=y;this.gridOffset=D}F.exports=function(d,q,r){var u=[];q=[0,0,0];var v=
[0,0,0],w=[0,0,0],y=[0,0,0];u.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var D=0;3>D;++D){for(var x=u.length/3|0,E=0;E<r[D].length;++E){var B=+r[D][E].x;u.push(B,0,1,B,1,1,B,0,-1,B,0,-1,B,1,1,B,1,-1)}B=u.length/3|0;q[D]=x;v[D]=B-x;x=u.length/3|0;for(E=0;E<r[D].length;++E)B=+r[D][E].x,u.push(B,0,1,B,1,1,B,0,-1,B,0,-1,B,1,1,B,1,-1);B=u.length/3|0;w[D]=x;y[D]=B-x}r=e(d,new Float32Array(u));u=a(d,[{buffer:r,type:d.FLOAT,size:3,stride:0,offset:0}]);D=g(d);D.attributes.position.location=0;return new l(d,
r,u,D,v,q,y,w)};var e=b("gl-buffer"),a=b("gl-vao"),g=b("./shaders").line,k=[0,0,0],p=[0,0,0],n=[0,0,0],c=[0,0,0],f=[1,1];b=l.prototype;b.bind=function(d,q,r){this.shader.bind();this.shader.uniforms.model=d;this.shader.uniforms.view=q;this.shader.uniforms.projection=r;f[0]=this.gl.drawingBufferWidth;f[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=f;this.vao.bind()};b.unbind=function(){this.vao.unbind()};b.drawAxisLine=function(d,q,r,u,v){var w=m(p);this.shader.uniforms.majorAxis=
p;w[d]=q[1][d]-q[0][d];this.shader.uniforms.minorAxis=w;r=h(c,r);r[d]+=q[0][d];this.shader.uniforms.offset=r;this.shader.uniforms.lineWidth=v;this.shader.uniforms.color=u;q=m(n);q[(d+2)%3]=1;this.shader.uniforms.screenAxis=q;this.vao.draw(this.gl.TRIANGLES,6);q=m(n);q[(d+1)%3]=1;this.shader.uniforms.screenAxis=q;this.vao.draw(this.gl.TRIANGLES,6)};b.drawAxisTicks=function(d,q,r,u,v){if(this.tickCount[d]){var w=m(k);w[d]=1;this.shader.uniforms.majorAxis=w;this.shader.uniforms.offset=q;this.shader.uniforms.minorAxis=
r;this.shader.uniforms.color=u;this.shader.uniforms.lineWidth=v;q=m(n);q[d]=1;this.shader.uniforms.screenAxis=q;this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d])}};b.drawGrid=function(d,q,r,u,v,w){if(this.gridCount[d]){var y=m(p);y[q]=r[1][q]-r[0][q];this.shader.uniforms.minorAxis=y;u=h(c,u);u[q]+=r[0][q];this.shader.uniforms.offset=u;q=m(k);q[d]=1;this.shader.uniforms.majorAxis=q;q=m(n);q[d]=1;this.shader.uniforms.screenAxis=q;this.shader.uniforms.lineWidth=w;this.shader.uniforms.color=
v;this.vao.draw(this.gl.TRIANGLES,this.gridCount[d],this.gridOffset[d])}};b.drawZero=function(d,q,r,u,v,w){var y=m(p);this.shader.uniforms.majorAxis=y;y[d]=r[1][d]-r[0][d];this.shader.uniforms.minorAxis=y;u=h(c,u);u[d]+=r[0][d];this.shader.uniforms.offset=u;d=m(n);d[q]=1;this.shader.uniforms.screenAxis=d;this.shader.uniforms.lineWidth=w;this.shader.uniforms.color=v;this.vao.draw(this.gl.TRIANGLES,6)};b.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":254,
"gl-buffer":258,"gl-vao":332}],254:[function(b,F,C){F=b("glslify");var m=b("gl-shader"),h=F(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major \x3d position.x * majorAxis;\n  vec3 minor \x3d position.y * minorAxis;\n\n  vec3 vPosition \x3d major + minor + offset;\n  vec3 pPosition \x3d project(vPosition);\n  vec3 offset \x3d project(vPosition + screenAxis * position.z);\n\n  vec2 screen \x3d normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position \x3d vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
l=F(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);C.line=function(p){return m(p,h,l,null,[{name:"position",type:"vec3"}])};var e=F(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A \x3d project(a);\n  vec3 B \x3d project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI \x3d 3.141592;\nconst float TWO_PI \x3d 2.0 * PI;\nconst float HALF_PI \x3d 0.5 * PI;\nconst float ONE_AND_HALF_PI \x3d 1.5 * PI;\n\nint option \x3d int(floor(alignOpt.x + 0.001));\nfloat hv_ratio \x3d       alignOpt.y;\nbool enableAlign \x3d    (alignOpt.z !\x3d 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a \x3c 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b \x3d positive_angle(a);\n  return ((b \x3e HALF_PI) \x26\x26 (b \x3c\x3d ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b \x3d positive_angle(a);\n\n  return\n    (b \x3c (      ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b \x3c (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b \x3d positive_angle(a);\n  float div \x3d TWO_PI / float(n);\n  float c \x3d roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option \x3e  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option \x3d\x3d 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option \x3d\x3d 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option \x3d\x3d 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option \x3d\x3d-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle \x3d (axis.x \x3d\x3d 0.0) \x26\x26\n                   (axis.y \x3d\x3d 0.0) \x26\x26\n                   (axis.z \x3d\x3d 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance \x3d position.z;\n  vec3 dataPosition \x3d axisDistance * axis + offset;\n\n  float beta \x3d angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle \x3d (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle \x3d computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle +\x3d (sin(axisAngle) \x3c 0.0) ? PI : 0.0;\n    clipAngle +\x3d (sin(clipAngle) \x3c 0.0) ? PI : 0.0;\n\n    flip \x3d (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) \x3e 0.0) ? 1.0 : 0.0;\n\n    beta +\x3d applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord \x3d position.xy * pixelScale;\n\n  mat2 planeXform \x3d scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset \x3d 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition \x3d project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition +\x3d vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position \x3d vec4(clipPosition, 1.0);\n}"]),
a=F(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);C.text=function(p){return m(p,e,a,null,[{name:"position",type:"vec3"}])};var g=F(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis \x3d sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal \x3d signAxis * normal;\n\n  if(dot(realNormal, enable) \x3e 0.0) {\n    vec3 minRange \x3d min(bounds[0], bounds[1]);\n    vec3 maxRange \x3d max(bounds[0], bounds[1]);\n    vec3 nPosition \x3d mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position \x3d projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position \x3d vec4(0,0,0,0);\n  }\n\n  colorChannel \x3d abs(realNormal);\n}"]),
k=F(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor \x3d colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);C.bg=function(p){return m(p,g,k,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":312,glslify:413}],255:[function(b,F,C){(function(m){function h(n,c,f,d){this.gl=n;this.shader=c;this.buffer=f;this.vao=
d;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}F.exports=function(n,c,f,d,q,r){var u=l(n),v=e(n,[{buffer:u,size:3}]),w=g(n);w.attributes.position.location=0;n=new h(n,w,u,v);n.update(c,f,d,q,r);return n};var l=b("gl-buffer"),e=b("gl-vao"),a=b("vectorize-text"),g=b("./shaders").text;m=window||m.global||{};var k=m.__TEXT_CACHE||{};m.__TEXT_CACHE={};m=h.prototype;var p=[0,0];m.bind=function(n,c,f,d){this.vao.bind();this.shader.bind();var q=this.shader.uniforms;q.model=n;q.view=
c;q.projection=f;q.pixelScale=d;p[0]=this.gl.drawingBufferWidth;p[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=p};m.unbind=function(){this.vao.unbind()};m.update=function(n,c,f,d,q){function r(t,G,I,L,M,N){var H=k[I];H||(H=k[I]={});var J=H[G];if(!J){J=H;I={triangles:!0,font:I,textAlign:"center",textBaseline:"middle",lineSpacing:M,styletags:N};try{var O=a(G,I)}catch(Q){console.warn('error vectorizing text:"'+G+'" error:',Q),O={cells:[],positions:[]}}J=J[G]=O}G=(L||12)/12;L=J.positions;
J=J.cells;O=0;for(I=J.length;O<I;++O)for(M=J[O],N=2;0<=N;--N)H=L[M[N]],u.push(G*H[0],-G*H[1],t)}for(var u=[],v=[0,0,0],w=[0,0,0],y=[0,0,0],D=[0,0,0],x={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},E=0;3>E;++E){y[E]=u.length/3|0;r(.5*(n[0][E]+n[1][E]),c[E],f[E],12,1.25,x);D[E]=(u.length/3|0)-y[E];v[E]=u.length/3|0;for(var B=0;B<d[E].length;++B)d[E][B].text&&r(d[E][B].x,d[E][B].text,d[E][B].font||q,d[E][B].fontSize||12,1.25,x);w[E]=(u.length/3|0)-v[E]}this.buffer.update(u);this.tickOffset=
v;this.tickCount=w;this.labelOffset=y;this.labelCount=D};m.drawTicks=function(n,c,f,d,q,r,u,v){this.tickCount[n]&&(this.shader.uniforms.axis=r,this.shader.uniforms.color=q,this.shader.uniforms.angle=f,this.shader.uniforms.scale=c,this.shader.uniforms.offset=d,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.tickCount[n],this.tickOffset[n]))};m.drawLabel=function(n,c,f,d,q,r,u,v){this.labelCount[n]&&(this.shader.uniforms.axis=r,this.shader.uniforms.color=
q,this.shader.uniforms.angle=f,this.shader.uniforms.scale=c,this.shader.uniforms.offset=d,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.labelCount[n],this.labelOffset[n]))};m.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this,b("_process"))},{"./shaders":254,_process:500,"gl-buffer":258,"gl-vao":332,"vectorize-text":572}],256:[function(b,F,C){function m(h,l){var e=h+"",a=e.indexOf("."),g=0;0<=a&&(g=
e.length-a-1);e=Math.pow(10,g);h=Math.round(h*l*e);l=h+"";if(0<=l.indexOf("e"))return l;l=h/e;e=h%e;0>h?(l=-Math.ceil(l)|0,e=-e|0):(l=Math.floor(l)|0,e|=0);l=""+l;0>h&&(l="-"+l);if(g){for(e=""+e;e.length<g;)e="0"+e;return l+"."+e}return l}C.create=function(h,l){for(var e=[],a=0;3>a;++a){for(var g=[],k=0;k*l[a]<=h[1][a];++k)g.push({x:k*l[a],text:m(l[a],k)});for(k=-1;k*l[a]>=h[0][a];--k)g.push({x:k*l[a],text:m(l[a],k)});e.push(g)}return e};C.equal=function(h,l){for(var e=0;3>e;++e){if(h[e].length!==
l[e].length)return!1;for(var a=0;a<h[e].length;++a){var g=h[e][a],k=l[e][a];if(g.x!==k.x||g.text!==k.text||g.font!==k.font||g.fontColor!==k.fontColor||g.fontSize!==k.fontSize||g.dx!==k.dx||g.dy!==k.dy)return!1}}return!0}},{}],257:[function(b,F,C){function m(r,u,v){this.lo=r;this.hi=u;this.pixelsPerDataUnit=v}F.exports=function(r,u,v,w,y){var D=u.model||p,x=u.view||p,E=u.projection||p;u=u._ortho||!1;r=r.bounds;y=y||e(D,x,E,r,u);y=y.axis;a(n,x,D);a(n,E,n);D=d;for(x=0;3>x;++x)D[x].lo=Infinity,D[x].hi=
-Infinity,D[x].pixelsPerDataUnit=Infinity;E=h(g(n,n));g(n,n);for(var B=0;3>B;++B){var t=(B+1)%3,G=(B+2)%3,I=q;x=0;a:for(;2>x;++x){var L=[];if(0>y[B]!==!!x){I[B]=r[x][B];for(var M=0;2>M;++M){I[t]=r[M^x][t];for(var N=0;2>N;++N)I[G]=r[N^M^x][G],L.push(I.slice())}for(M=N=u?5:4;M===N;++M){if(0===L.length)continue a;L=l.positive(L,E[M])}for(M=0;M<L.length;++M){G=L[M];N=q;var H=n;for(var J=G,O=v,Q=w,U=0;3>U;++U){for(var P=c,V=f,Y=0;3>Y;++Y)V[Y]=P[Y]=J[Y];V[3]=P[3]=1;V[U]+=1;k(V,V,H);0>V[3]&&(N[U]=Infinity);
--P[U];k(P,P,H);0>P[3]&&(N[U]=Infinity);Y=(P[0]/P[3]-V[0]/V[3])*O;P=(P[1]/P[3]-V[1]/V[3])*Q;N[U]=.25*Math.sqrt(Y*Y+P*P)}H=N;for(N=0;3>N;++N)D[N].lo=Math.min(D[N].lo,G[N]),D[N].hi=Math.max(D[N].hi,G[N]),N!==B&&(D[N].pixelsPerDataUnit=Math.min(D[N].pixelsPerDataUnit,Math.abs(H[N])))}}}}return D};var h=b("extract-frustum-planes"),l=b("split-polygon"),e=b("./lib/cube.js"),a=b("gl-mat4/multiply"),g=b("gl-mat4/transpose"),k=b("gl-vec4/transformMat4"),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),
n=new Float32Array(16),c=[0,0,0,1],f=[0,0,0,1],d=[new m(Infinity,-Infinity,Infinity),new m(Infinity,-Infinity,Infinity),new m(Infinity,-Infinity,Infinity)],q=[0,0,0]},{"./lib/cube.js":252,"extract-frustum-planes":240,"gl-mat4/multiply":280,"gl-mat4/transpose":289,"gl-vec4/transformMat4":403,"split-polygon":538}],258:[function(b,F,C){function m(p,n,c,f,d){this.gl=p;this.type=n;this.handle=c;this.length=f;this.usage=d}function h(p,n,c,f,d,q){var r=d.length*d.BYTES_PER_ELEMENT;if(0>q)return p.bufferData(n,
d,f),r;if(r+q>c)throw Error("gl-buffer: If resizing buffer, must not specify offset");p.bufferSubData(n,q,d);return c}function l(p,n){n=e.malloc(p.length,n);for(var c=p.length,f=0;f<c;++f)n[f]=p[f];return n}var e=b("typedarray-pool"),a=b("ndarray-ops"),g=b("ndarray"),k="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");b=m.prototype;b.bind=function(){this.gl.bindBuffer(this.type,this.handle)};b.unbind=function(){this.gl.bindBuffer(this.type,null)};b.dispose=function(){this.gl.deleteBuffer(this.handle)};
b.update=function(p,n){"number"!==typeof n&&(n=-1);this.bind();if("object"===typeof p&&"undefined"!==typeof p.shape){var c=p.dtype;0>k.indexOf(c)&&(c="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(c=gl.getExtension("OES_element_index_uint")&&"uint16"!==c?"uint32":"uint16");var f;if(f=c===p.dtype)a:{f=p.stride;for(var d=1,q=f.length-1;0<=q;--q){if(f[q]!==d){f=!1;break a}d*=p.shape[q]}f=!0}f?this.length=0===p.offset&&p.data.length===p.shape[0]?h(this.gl,this.type,this.length,this.usage,p.data,
n):h(this.gl,this.type,this.length,this.usage,p.data.subarray(p.offset,p.shape[0]),n):(c=e.malloc(p.size,c),f=g(c,p.shape),a.assign(f,p),this.length=0>n?h(this.gl,this.type,this.length,this.usage,c,n):h(this.gl,this.type,this.length,this.usage,c.subarray(0,p.size),n),e.free(c))}else if(Array.isArray(p))c=this.type===this.gl.ELEMENT_ARRAY_BUFFER?l(p,"uint16"):l(p,"float32"),this.length=0>n?h(this.gl,this.type,this.length,this.usage,c,n):h(this.gl,this.type,this.length,this.usage,c.subarray(0,p.length),
n),e.free(c);else if("object"===typeof p&&"number"===typeof p.length)this.length=h(this.gl,this.type,this.length,this.usage,p,n);else if("number"===typeof p||void 0===p){if(0<=n)throw Error("gl-buffer: Cannot specify offset when resizing buffer");p|=0;0>=p&&(p=1);this.gl.bufferData(this.type,p|0,this.usage);this.length=p}else throw Error("gl-buffer: Invalid data type");};F.exports=function(p,n,c,f){c=c||p.ARRAY_BUFFER;f=f||p.DYNAMIC_DRAW;if(c!==p.ARRAY_BUFFER&&c!==p.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");
if(f!==p.DYNAMIC_DRAW&&f!==p.STATIC_DRAW&&f!==p.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var d=p.createBuffer();p=new m(p,c,d,0,f);p.update(n);return p}},{ndarray:469,"ndarray-ops":464,"typedarray-pool":567}],259:[function(b,F,C){var m=b("gl-vec3");F.exports=function(l,e){var a=l.positions,g=l.vectors,k={positions:[],vertexIntensity:[],vertexIntensityBounds:l.vertexIntensityBounds,vectors:[],cells:[],coneOffset:l.coneOffset,
colormap:l.colormap};if(0===l.positions.length)return e&&(e[0]=[0,0,0],e[1]=[0,0,0]),k;for(var p=0,n=Infinity,c=-Infinity,f=Infinity,d=-Infinity,q=Infinity,r=-Infinity,u=null,v=null,w=[],y=Infinity,D=!1,x=0;x<a.length;x++){var E=a[x];n=Math.min(E[0],n);c=Math.max(E[0],c);f=Math.min(E[1],f);d=Math.max(E[1],d);q=Math.min(E[2],q);r=Math.max(E[2],r);var B=g[x];m.length(B)>p&&(p=m.length(B));x&&((D=2*m.distance(u,E)/(m.length(v)+m.length(B)))?(y=Math.min(y,D),D=!1):D=!0);D||(u=E,v=B);w.push(B)}x=[n,f,
q];E=[c,d,r];e&&(e[0]=x,e[1]=E);0===p&&(p=1);e=1/p;isFinite(y)||(y=1);k.vectorScale=y;x=l.coneSize||.5;l.absoluteConeSize&&(x=l.absoluteConeSize*e);k.coneScale=x;for(l=x=0;x<a.length;x++)for(E=a[x],y=E[0],p=E[1],E=E[2],c=w[x],d=m.length(c)*e,r=0;8>r;r++)k.positions.push([y,p,E,l++]),k.positions.push([y,p,E,l++]),k.positions.push([y,p,E,l++]),k.positions.push([y,p,E,l++]),k.positions.push([y,p,E,l++]),k.positions.push([y,p,E,l++]),k.vectors.push(c),k.vectors.push(c),k.vectors.push(c),k.vectors.push(c),
k.vectors.push(c),k.vectors.push(c),k.vertexIntensity.push(d,d,d),k.vertexIntensity.push(d,d,d),g=k.positions.length,k.cells.push([g-6,g-5,g-4],[g-3,g-2,g-1]);return k};var h=b("./lib/shaders");F.exports.createMesh=b("./create_mesh");F.exports.createConeMesh=function(l,e){return F.exports.createMesh(l,e,{shaders:h,traceType:"cone"})}},{"./create_mesh":260,"./lib/shaders":261,"gl-vec3":351}],260:[function(b,F,C){function m(d,q,r,u,v,w,y,D,x,E,B){this.gl=d;this.pixelRatio=1;this.cells=[];this.positions=
[];this.intensity=[];this.texture=q;this.dirty=!0;this.triShader=r;this.pickShader=u;this.trianglePositions=v;this.triangleVectors=w;this.triangleColors=D;this.triangleUVs=x;this.triangleIds=y;this.triangleVAO=E;this.triangleCount=0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=
.5;this.fresnel=1.5;this.opacity=1;this.traceType=B;this.tubeScale=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=f;this._resolution=[1,1]}function h(d){d=c({colormap:d,nshades:256,format:"rgba"});for(var q=new Uint8Array(1024),r=0;256>r;++r){for(var u=d[r],v=0;3>v;++v)q[4*r+v]=u[v];q[4*r+3]=255*u[3]}return n(q,[256,256,4],[4,0,1])}var l=b("gl-shader"),e=b("gl-buffer"),a=b("gl-vao"),g=b("gl-texture2d"),k=b("gl-mat4/multiply"),p=b("gl-mat4/invert"),
n=b("ndarray"),c=b("colormap"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=m.prototype;b.isOpaque=function(){return 1<=this.opacity};b.isTransparent=function(){return 1>this.opacity};b.pickSlots=1;b.setPickBase=function(d){this.pickId=d};b.update=function(d){d=d||{};var q=this.gl;this.dirty=!0;"lightPosition"in d&&(this.lightPosition=d.lightPosition);"opacity"in d&&(this.opacity=d.opacity);"ambient"in d&&(this.ambientLight=d.ambient);"diffuse"in d&&(this.diffuseLight=d.diffuse);"specular"in d&&(this.specularLight=
d.specular);"roughness"in d&&(this.roughness=d.roughness);"fresnel"in d&&(this.fresnel=d.fresnel);void 0!==d.tubeScale&&(this.tubeScale=d.tubeScale);void 0!==d.vectorScale&&(this.vectorScale=d.vectorScale);void 0!==d.coneScale&&(this.coneScale=d.coneScale);void 0!==d.coneOffset&&(this.coneOffset=d.coneOffset);d.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=q.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=q.LINEAR,this.texture.setPixels(h(d.colormap)),this.texture.generateMipmap());q=
d.cells;var r=d.positions,u=d.vectors;if(r&&q&&u){var v=[],w=[],y=[],D=[],x=[];this.cells=q;this.positions=r;this.vectors=u;var E=d.meshColor||[1,1,1,1],B=d.vertexIntensity,t=Infinity,G=-Infinity;if(B)if(d.vertexIntensityBounds)t=+d.vertexIntensityBounds[0],G=+d.vertexIntensityBounds[1];else for(d=0;d<B.length;++d){var I=B[d];t=Math.min(t,I);G=Math.max(G,I)}else for(d=0;d<r.length;++d)I=r[d][2],t=Math.min(t,I),G=Math.max(G,I);if(B)this.intensity=B;else{d=r.length;I=Array(d);for(var L=0;L<d;++L)I[L]=
r[L][2];this.intensity=I}this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(d=0;d<r.length;++d){var M=r[d];for(I=0;3>I;++I)!isNaN(M[I])&&isFinite(M[I])&&(this.bounds[0][I]=Math.min(this.bounds[0][I],M[I]),this.bounds[1][I]=Math.max(this.bounds[1][I],M[I]))}d=L=0;a:for(;d<q.length;++d){var N=q[d];switch(N.length){case 3:for(I=0;3>I;++I){var H=N[I];M=r[H];for(H=0;3>H;++H)if(isNaN(M[H])||!isFinite(M[H]))continue a}for(I=0;3>I;++I){H=N[2-I];M=r[H];v.push(M[0],M[1],M[2],M[3]);
var J=u[H];w.push(J[0],J[1],J[2],J[3]||0);J=E;3===J.length?y.push(J[0],J[1],J[2],1):y.push(J[0],J[1],J[2],J[3]);M=B?[(B[H]-t)/(G-t),0]:[(M[2]-t)/(G-t),0];D.push(M[0],M[1]);x.push(d)}L+=1}}this.triangleCount=L;this.trianglePositions.update(v);this.triangleVectors.update(w);this.triangleColors.update(y);this.triangleUVs.update(D);this.triangleIds.update(new Uint32Array(x))}};b.drawTransparent=b.draw=function(d){d=d||{};var q=this.gl,r=d.model||f,u=d.view||f,v=d.projection||f,w=[[-1E6,-1E6,-1E6],[1E6,
1E6,1E6]];for(d=0;3>d;++d)w[0][d]=Math.max(w[0][d],this.clipBounds[0][d]),w[1][d]=Math.min(w[1][d],this.clipBounds[1][d]);r={model:r,view:u,projection:v,inverseModel:f.slice(),clipBounds:w,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};r.inverseModel=
p(r.inverseModel,r.model);q.disable(q.CULL_FACE);this.texture.bind(0);u=Array(16);k(u,r.view,r.model);k(u,r.projection,u);p(u,u);for(d=0;3>d;++d)r.eyePosition[d]=u[12+d]/u[15];v=u[15];for(d=0;3>d;++d)v+=this.lightPosition[d]*u[4*d+3];for(d=0;3>d;++d){w=u[12+d];for(var y=0;3>y;++y)w+=u[4*y+d]*this.lightPosition[y];r.lightPosition[d]=w/v}0<this.triangleCount&&(d=this.triShader,d.bind(),d.uniforms=r,this.triangleVAO.bind(),q.drawArrays(q.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};
b.drawPick=function(d){d=d||{};var q=this.gl,r=d.model||f,u=d.view||f;d=d.projection||f;for(var v=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],w=0;3>w;++w)v[0][w]=Math.max(v[0][w],this.clipBounds[0][w]),v[1][w]=Math.min(v[1][w],this.clipBounds[1][w]);this._model=[].slice.call(r);this._view=[].slice.call(u);this._projection=[].slice.call(d);this._resolution=[q.drawingBufferWidth,q.drawingBufferHeight];r={model:r,view:u,projection:d,clipBounds:v,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,
coneOffset:this.coneOffset,pickId:this.pickId/255};u=this.pickShader;u.bind();u.uniforms=r;0<this.triangleCount&&(this.triangleVAO.bind(),q.drawArrays(q.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.pick=function(d){if(!d||d.id!==this.pickId)return null;d=d.value[0]+256*d.value[1]+65536*d.value[2];var q=this.cells[d],r=this.positions[q[1]].slice(0,3);r={position:r,dataCoordinate:r,index:Math.floor(q[1]/48)};"cone"===this.traceType?r.index=Math.floor(q[1]/48):"streamtube"===this.traceType&&
(r.intensity=this.intensity[q[1]],r.velocity=this.vectors[q[1]].slice(0,3),r.divergence=this.vectors[q[1]][3],r.index=d);return r};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleIds.dispose()};F.exports=function(d,q,r){var u=r.shaders;1===arguments.length&&(q=d,d=q.gl);var v=l(d,u.meshShader.vertex,
u.meshShader.fragment,null,u.meshShader.attributes);v.attributes.position.location=0;v.attributes.color.location=2;v.attributes.uv.location=3;v.attributes.vector.location=4;u=l(d,u.pickShader.vertex,u.pickShader.fragment,null,u.pickShader.attributes);u.attributes.position.location=0;u.attributes.id.location=1;u.attributes.vector.location=4;var w=g(d,n(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap();w.minFilter=d.LINEAR_MIPMAP_LINEAR;w.magFilter=d.LINEAR;var y=e(d),D=e(d),x=e(d),E=e(d),
B=e(d),t=a(d,[{buffer:y,type:d.FLOAT,size:4},{buffer:B,type:d.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:x,type:d.FLOAT,size:4},{buffer:E,type:d.FLOAT,size:2},{buffer:D,type:d.FLOAT,size:4}]);v=new m(d,w,v,u,y,D,B,x,E,t,r.traceType||"cone");v.update(q);return v}},{colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-shader":312,"gl-texture2d":327,"gl-vao":332,ndarray:469}],261:[function(b,F,C){var m=b("glslify");b=m(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * conePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(conePosition, 1.0);\n  vec4 t_position  \x3d view * conePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d conePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
F=m(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var h=m(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position \x3d projection * view * conePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
m=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
C.meshShader={vertex:b,fragment:F,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};C.pickShader={vertex:h,fragment:m,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:413}],262:[function(b,F,C){F.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",
516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",
2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",
3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",
6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",
32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",
32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",
33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",
34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",
34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",
35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",
35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",
36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",
36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",
37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],263:[function(b,F,C){var m=b("./1.0/numbers");F.exports=function(h){return m[h]}},{"./1.0/numbers":262}],264:[function(b,F,C){function m(n,c,f,d){this.gl=n;this.shader=d;this.buffer=c;this.vao=f;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=[10,10,10];this.lineCount=
[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function h(n,c){for(var f=0;3>f;++f)n[0][f]=Math.min(n[0][f],c[f]),n[1][f]=Math.max(n[1][f],c[f])}function l(n,c,f,d){d=p[d];for(var q=0;q<d.length;++q){var r=d[q];n.push(c[0],c[1],c[2],f[0],f[1],f[2],f[3],r[0],r[1],r[2])}return d.length}F.exports=function(n){var c=n.gl,f=e(c),d=a(c,[{buffer:f,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:f,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:f,type:c.FLOAT,size:3,offset:28,stride:40}]),
q=g(c);q.attributes.position.location=0;q.attributes.color.location=1;q.attributes.offset.location=2;c=new m(c,f,d,q);c.update(n);return c};var e=b("gl-buffer"),a=b("gl-vao"),g=b("./shaders/index"),k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=m.prototype;b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.drawTransparent=b.draw=function(n){var c=this.gl,f=this.shader.uniforms;this.shader.bind();var d=f.view=n.view||k,q=f.projection=n.projection||k;f.model=n.model||
k;f.clipBounds=this.clipBounds;f.opacity=this.opacity;n=(n._ortho?2:1)*this.pixelRatio*(q[3]*d[12]+q[7]*d[13]+q[11]*d[14]+q[15]*d[15])/c.drawingBufferHeight;this.vao.bind();for(d=0;3>d;++d)c.lineWidth(this.lineWidth[d]*this.pixelRatio),f.capSize=this.capSize[d]*n,this.lineCount[d]&&c.drawArrays(c.LINES,this.lineOffset[d],this.lineCount[d]);this.vao.unbind()};var p=function(){for(var n=Array(3),c=0;3>c;++c){for(var f=[],d=1;2>=d;++d)for(var q=-1;1>=q;q+=2){var r=[0,0,0];r[(d+c)%3]=q;f.push(r)}n[c]=
f}return n}();b.update=function(n){n=n||{};"lineWidth"in n&&(this.lineWidth=n.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in n&&(this.capSize=n.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in n&&(this.opacity=+n.opacity,1>this.opacity&&(this.hasAlpha=!0));var c=n.color||[[0,0,0],[0,0,0],[0,0,0]],f=n.position;n=n.error;Array.isArray(c[0])||(c=[c,c,c]);if(f&&
n){var d=[],q=f.length,r=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var u=0;3>u;++u){this.lineOffset[u]=r;var v=0;a:for(;v<q;++v){for(var w=f[v],y=0;3>y;++y)if(isNaN(w[y])||!isFinite(w[y]))continue a;y=n[v];var D=c[u];Array.isArray(D[0])&&(D=c[v]);3===D.length?D=[D[0],D[1],D[2],1]:4===D.length&&(D=[D[0],D[1],D[2],D[3]],!this.hasAlpha&&1>D[3]&&(this.hasAlpha=!0));if(!isNaN(y[0][u])&&!isNaN(y[1][u])){if(0>y[0][u]){var x=w.slice();x[u]+=y[0][u];
d.push(w[0],w[1],w[2],D[0],D[1],D[2],D[3],0,0,0,x[0],x[1],x[2],D[0],D[1],D[2],D[3],0,0,0);h(this.bounds,x);r+=2+l(d,x,D,u)}0<y[1][u]&&(x=w.slice(),x[u]+=y[1][u],d.push(w[0],w[1],w[2],D[0],D[1],D[2],D[3],0,0,0,x[0],x[1],x[2],D[0],D[1],D[2],D[3],0,0,0),h(this.bounds,x),r+=2+l(d,x,D,u))}}this.lineCount[u]=r-this.lineOffset[u]}this.buffer.update(d)}};b.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":265,"gl-buffer":258,"gl-vao":332}],265:[function(b,
F,C){C=b("glslify");var m=b("gl-shader"),h=C(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  \x3d model * vec4(position, 1.0);\n  worldPosition       \x3d (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         \x3d projection * view * worldPosition;\n  fragColor           \x3d color;\n  fragPosition        \x3d position;\n}"]),
l=C(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  gl_FragColor \x3d opacity * fragColor;\n}"]);
F.exports=function(e){return m(e,h,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":312,glslify:413}],266:[function(b,F,C){function m(u){var v=u.getParameter(u.FRAMEBUFFER_BINDING),w=u.getParameter(u.RENDERBUFFER_BINDING);u=u.getParameter(u.TEXTURE_BINDING_2D);return[v,w,u]}function h(u,v){u.bindFramebuffer(u.FRAMEBUFFER,v[0]);u.bindRenderbuffer(u.RENDERBUFFER,v[1]);u.bindTexture(u.TEXTURE_2D,v[2])}function l(u){switch(u){case f:throw Error("gl-fbo: Framebuffer unsupported");
case d:throw Error("gl-fbo: Framebuffer incomplete attachment");case q:throw Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function e(u,v,w,y,D,x){if(!y)return null;v=n(u,v,w,D,y);v.magFilter=u.NEAREST;v.minFilter=u.NEAREST;v.mipSamples=1;v.bind();u.framebufferTexture2D(u.FRAMEBUFFER,x,u.TEXTURE_2D,v.handle,0);return v}function a(u,v,w,y,D){var x=
u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,x);u.renderbufferStorage(u.RENDERBUFFER,y,v,w);u.framebufferRenderbuffer(u.FRAMEBUFFER,D,u.RENDERBUFFER,x);return x}function g(u){var v=m(u.gl),w=u.gl,y=u.handle=w.createFramebuffer(),D=u._shape[0],x=u._shape[1],E=u.color.length,B=u._ext,t=u._useStencil,G=u._useDepth,I=u._colorType;w.bindFramebuffer(w.FRAMEBUFFER,y);for(y=0;y<E;++y)u.color[y]=e(w,D,x,I,w.RGBA,w.COLOR_ATTACHMENT0+y);0===E?(u._color_rb=a(w,D,x,w.RGBA4,w.COLOR_ATTACHMENT0),B&&
B.drawBuffersWEBGL(c[0])):1<E&&B.drawBuffersWEBGL(c[E]);(E=w.getExtension("WEBGL_depth_texture"))?t?u.depth=e(w,D,x,E.UNSIGNED_INT_24_8_WEBGL,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):G&&(u.depth=e(w,D,x,w.UNSIGNED_SHORT,w.DEPTH_COMPONENT,w.DEPTH_ATTACHMENT)):G&&t?u._depth_rb=a(w,D,x,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):G?u._depth_rb=a(w,D,x,w.DEPTH_COMPONENT16,w.DEPTH_ATTACHMENT):t&&(u._depth_rb=a(w,D,x,w.STENCIL_INDEX,w.STENCIL_ATTACHMENT));D=w.checkFramebufferStatus(w.FRAMEBUFFER);if(D!==
w.FRAMEBUFFER_COMPLETE){u._destroyed=!0;w.bindFramebuffer(w.FRAMEBUFFER,null);w.deleteFramebuffer(u.handle);u.handle=null;u.depth&&(u.depth.dispose(),u.depth=null);u._depth_rb&&(w.deleteRenderbuffer(u._depth_rb),u._depth_rb=null);for(y=0;y<u.color.length;++y)u.color[y].dispose(),u.color[y]=null;u._color_rb&&(w.deleteRenderbuffer(u._color_rb),u._color_rb=null);h(w,v);l(D)}h(w,v)}function k(u,v,w,y,D,x,E,B){this.gl=u;this._shape=[v|0,w|0];this._destroyed=!1;this._ext=B;this.color=Array(D);for(u=0;u<
D;++u)this.color[u]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=y;this._useDepth=x;this._useStencil=E;var t=this;v=[v|0,w|0];Object.defineProperties(v,{0:{get:function(){return t._shape[0]},set:function(G){return t.width=G}},1:{get:function(){return t._shape[1]},set:function(G){return t.height=G}}});this._shapeVector=v;g(this)}function p(u,v,w){if(u._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(u._shape[0]!==v||u._shape[1]!==w){var y=u.gl,D=y.getParameter(y.MAX_RENDERBUFFER_SIZE);
if(0>v||v>D||0>w||w>D)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");u._shape[0]=v;u._shape[1]=w;v=m(y);for(w=0;w<u.color.length;++w)u.color[w].shape=u._shape;u._color_rb&&(y.bindRenderbuffer(y.RENDERBUFFER,u._color_rb),y.renderbufferStorage(y.RENDERBUFFER,y.RGBA4,u._shape[0],u._shape[1]));u.depth&&(u.depth.shape=u._shape);u._depth_rb&&(y.bindRenderbuffer(y.RENDERBUFFER,u._depth_rb),u._useDepth&&u._useStencil?y.renderbufferStorage(y.RENDERBUFFER,y.DEPTH_STENCIL,u._shape[0],u._shape[1]):
u._useDepth?y.renderbufferStorage(y.RENDERBUFFER,y.DEPTH_COMPONENT16,u._shape[0],u._shape[1]):u._useStencil&&y.renderbufferStorage(y.RENDERBUFFER,y.STENCIL_INDEX,u._shape[0],u._shape[1]));y.bindFramebuffer(y.FRAMEBUFFER,u.handle);w=y.checkFramebufferStatus(y.FRAMEBUFFER);w!==y.FRAMEBUFFER_COMPLETE&&(u.dispose(),h(y,v),l(w));h(y,v)}}var n=b("gl-texture2d");F.exports=function(u,v,w,y){f||(f=u.FRAMEBUFFER_UNSUPPORTED,d=u.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,q=u.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=u.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var D=u.getExtension("WEBGL_draw_buffers");if(!c&&D){var x=u.getParameter(D.MAX_COLOR_ATTACHMENTS_WEBGL);c=Array(x+1);for(var E=0;E<=x;++E){for(var B=Array(x),t=0;t<E;++t)B[t]=u.COLOR_ATTACHMENT0+t;for(t=E;t<x;++t)B[t]=u.NONE;c[E]=B}}Array.isArray(v)&&(y=w,w=v[1]|0,v=v[0]|0);if("number"!==typeof v)throw Error("gl-fbo: Missing shape parameter");x=u.getParameter(u.MAX_RENDERBUFFER_SIZE);if(0>v||v>x||0>w||w>x)throw Error("gl-fbo: Parameters are too large for FBO");y=y||{};x=1;if("color"in y){x=Math.max(y.color|
0,0);if(0>x)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<x){if(!D)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(x>u.getParameter(D.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+x+" draw buffers");}}E=u.UNSIGNED_BYTE;B=u.getExtension("OES_texture_float");if(y.float&&0<x){if(!B)throw Error("gl-fbo: Context does not support floating point textures");E=u.FLOAT}else y.preferFloat&&0<x&&B&&(E=u.FLOAT);B=!0;"depth"in y&&(B=
!!y.depth);t=!1;"stencil"in y&&(t=!!y.stencil);return new k(u,v,w,E,x,B,t,D)};var c=null,f,d,q,r;b=k.prototype;Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(u){Array.isArray(u)||(u=[u|0,u|0]);if(2!==u.length)throw Error("gl-fbo: Shape vector must be length 2");var v=u[0]|0;u=u[1]|0;p(this,v,u);return[v,u]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(u){u|=0;p(this,u,this._shape[1]);return u},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(u){u|=0;p(this,this._shape[0],u);return u},enumerable:!1}});b.bind=function(){if(!this._destroyed){var u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,this.handle);u.viewport(0,0,this._shape[0],this._shape[1])}};b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var u=this.gl;u.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(u.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var v=0;v<this.color.length;++v)this.color[v].dispose(),this.color[v]=null;this._color_rb&&(u.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":327}],267:[function(b,F,C){var m=b("sprintf-js").sprintf,h=b("gl-constants/lookup"),l=b("glsl-shader-name"),e=b("add-line-numbers");F.exports=function(a,g,k){var p=l(g)||"of unknown name (see npm glsl-shader-name)",n="unknown type";void 0!==k&&(n=k===h.FRAGMENT_SHADER?"fragment":"vertex");k=m("Error compiling %s shader %s:\n",
n,p);p=m("%s%s",k,a);var c=a.split("\n");a={};for(n=0;n<c.length;n++){var f=c[n];if(""!==f&&"\x00"!==f){var d=parseInt(f.split(":")[2]);if(isNaN(d))throw Error(m("Could not parse error: %s",f));a[d]=f}}g=e(g).split("\n");for(n=0;n<g.length;n++)if(a[n+3]||a[n+2]||a[n+1])k+=g[n]+"\n",a[n+1]&&(c=a[n+1],c=c.substr(c.split(":",3).join(":").length+1).trim(),k+=m("^^^ %s\n\n",c));return{long:k.trim(),short:p.trim()}}},{"add-line-numbers":66,"gl-constants/lookup":263,"glsl-shader-name":405,"sprintf-js":539}],
268:[function(b,F,C){function m(n,c,f,d,q,r,u){this.plot=n;this.shader=c;this.pickShader=f;this.positionBuffer=d;this.weightBuffer=q;this.colorBuffer=r;this.idBuffer=u;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}F.exports=function(n,c){var f=n.gl,d=a(f,k.vertex,k.fragment),q=a(f,k.pickVertex,k.pickFragment),r=g(f),u=g(f),v=g(f);f=g(f);d=new m(n,d,q,r,u,v,f);d.update(c);n.addObject(d);return d};var h=b("binary-search-bounds"),l=
b("iota-array"),e=b("typedarray-pool"),a=b("gl-shader"),g=b("gl-buffer"),k=b("./lib/shaders");b=m.prototype;var p=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=function(){var n=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,f=this.shader,d=this.bounds,q=this.numVertices;if(!(0>=q)){var r=c.gl;c=c.dataBox;var u=d[3]-d[1],v=c[2]-c[0],w=c[3]-c[1];n[0]=2*(d[2]-d[0])/v;n[4]=2*u/w;n[6]=2*(d[0]-c[0])/v-1;n[7]=2*(d[1]-c[1])/w-1;f.bind();d=f.uniforms;d.viewTransform=n;d.shape=this.shape;f=f.attributes;this.positionBuffer.bind();
f.position.pointer();this.weightBuffer.bind();f.weight.pointer(r.UNSIGNED_BYTE,!1);this.colorBuffer.bind();f.color.pointer(r.UNSIGNED_BYTE,!0);r.drawArrays(r.TRIANGLES,0,q)}}}();b.drawPick=function(){var n=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(f){var d=this.plot,q=this.pickShader,r=this.bounds,u=this.numVertices;if(!(0>=u)){var v=d.gl;d=d.dataBox;var w=r[3]-r[1],y=d[2]-d[0],D=d[3]-d[1];n[0]=2*(r[2]-r[0])/y;n[4]=2*w/D;n[6]=2*(r[0]-d[0])/y-1;n[7]=2*(r[1]-d[1])/D-1;for(r=0;4>r;++r)c[r]=f>>
8*r&255;this.pickOffset=f;q.bind();r=q.uniforms;r.viewTransform=n;r.pickOffset=c;r.shape=this.shape;q=q.attributes;this.positionBuffer.bind();q.position.pointer();this.weightBuffer.bind();q.weight.pointer(v.UNSIGNED_BYTE,!1);this.idBuffer.bind();q.pickId.pointer(v.UNSIGNED_BYTE,!1);v.drawArrays(v.TRIANGLES,0,u);return f+this.shape[0]*this.shape[1]}}}();b.pick=function(n,c,f){n=this.pickOffset;c=this.shape[0]*this.shape[1];if(f<n||f>=n+c)return null;f-=n;return{object:this,pointId:f,dataCoord:[this.xData[f%
this.shape[0]],this.yData[f/this.shape[0]|0]]}};b.update=function(n){n=n||{};var c=n.shape||[0,0],f=n.x||l(c[0]),d=n.y||l(c[1]),q=n.z||new Float32Array(c[0]*c[1]),r=!1!==n.zsmooth;this.xData=f;this.yData=d;var u=n.colorLevels||[0];n=n.colorValues||[0,0,0,1];var v=u.length,w=this.bounds;if(r){var y=w[0]=f[0];var D=w[1]=d[0];var x=w[2]=f[f.length-1];w=w[3]=d[d.length-1]}else y=w[0]=f[0]+(f[1]-f[0])/2,D=w[1]=d[0]+(d[1]-d[0])/2,x=w[2]=f[f.length-1]+(f[f.length-1]-f[f.length-2])/2,w=w[3]=d[d.length-1]+
(d[d.length-1]-d[d.length-2])/2;x=1/(x-y);w=1/(w-D);var E=c[0];c=c[1];this.shape=[E,c];var B=(r?(E-1)*(c-1):E*c)*(p.length>>>1);this.numVertices=B;var t=e.mallocUint8(4*B),G=e.mallocFloat32(2*B),I=e.mallocUint8(2*B);B=e.mallocUint32(B);for(var L=0,M=r?E-1:E,N=r?c-1:c,H=0;H<N;++H){if(r){var J=w*(d[H]-D);var O=w*(d[H+1]-D)}else J=H<c-1?w*(d[H]-(d[H+1]-d[H])/2-D):w*(d[H]-(d[H]-d[H-1])/2-D),O=H<c-1?w*(d[H]+(d[H+1]-d[H])/2-D):w*(d[H]+(d[H]-d[H-1])/2-D);for(var Q=0;Q<M;++Q){if(r){var U=x*(f[Q]-y);var P=
x*(f[Q+1]-y)}else U=Q<E-1?x*(f[Q]-(f[Q+1]-f[Q])/2-y):x*(f[Q]-(f[Q]-f[Q-1])/2-y),P=Q<E-1?x*(f[Q]+(f[Q+1]-f[Q])/2-y):x*(f[Q]+(f[Q]-f[Q-1])/2-y);for(var V=0;V<p.length;V+=2){var Y=p[V],ba=p[V+1],ea=q[r?(H+ba)*E+(Q+Y):H*E+Q],ca=h.le(u,ea);if(0>ca){ca=n[0];ea=n[1];var ia=n[2];var fa=n[3]}else if(ca===v-1)ca=n[4*v-4],ea=n[4*v-3],ia=n[4*v-2],fa=n[4*v-1];else{fa=(ea-u[ca])/(u[ca+1]-u[ca]);var ha=1-fa,na=4*ca,pa=4*(ca+1);ca=ha*n[na]+fa*n[pa];ea=ha*n[na+1]+fa*n[pa+1];ia=ha*n[na+2]+fa*n[pa+2];fa=ha*n[na+3]+
fa*n[pa+3]}t[4*L]=255*ca;t[4*L+1]=255*ea;t[4*L+2]=255*ia;t[4*L+3]=255*fa;G[2*L]=.5*U+.5*P;G[2*L+1]=.5*J+.5*O;I[2*L]=Y;I[2*L+1]=ba;B[L]=H*E+Q;L+=1}}}this.positionBuffer.update(G);this.weightBuffer.update(I);this.colorBuffer.update(t);this.idBuffer.update(B);e.free(G);e.free(t);e.free(I);e.free(B)};b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},
{"./lib/shaders":269,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312,"iota-array":437,"typedarray-pool":567}],269:[function(b,F,C){b=b("glslify");F.exports={fragment:b(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor \x3d vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor \x3d color;\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d \x3d step(.5, vWeight);\n  vec4 id \x3d fragId + pickOffset;\n  id.x +\x3d d.x + d.y*shape.x;\n\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor \x3d id/255.;\n}\n"]),
pickVertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight \x3d weight;\n\n  fragId \x3d pickId;\n\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:413}],270:[function(b,F,C){F=b("glslify");
var m=b("gl-shader"),h=F(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint \x3d project(position);\n  vec4 endPoint   \x3d project(nextPosition);\n\n  vec2 A \x3d startPoint.xy / startPoint.w;\n  vec2 B \x3d   endPoint.xy /   endPoint.w;\n\n  float clipAngle \x3d atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset \x3d 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position \x3d vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition \x3d position;\n  pixelArcLength \x3d arcLength;\n  fragColor \x3d color;\n}\n"]),
l=F(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  float dashWeight \x3d texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight \x3c 0.5) {\n    discard;\n  }\n  gl_FragColor \x3d fragColor * opacity;\n}\n"]),
e=F(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av \x3d abs(v);\n\n  //Handle special cases\n  if(av \x3c FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v \x3e FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v \x3c -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c \x3d vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e \x3d floor(log2(av));\n  float m \x3d av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] \x3d floor(128.0 * m);\n  m -\x3d c[1] / 128.0;\n  c[2] \x3d floor(32768.0 * m);\n  m -\x3d c[2] / 32768.0;\n  c[3] \x3d floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias \x3d e + 127.0;\n  c[0] \x3d floor(ebias / 2.0);\n  ebias -\x3d c[0] * 2.0;\n  c[1] +\x3d floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] +\x3d 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor \x3d vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),
a=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];C.createShader=function(g){return m(g,h,l,null,a)};C.createPickShader=function(g){return m(g,h,e,null,a)}},{"gl-shader":312,glslify:413}],271:[function(b,F,C){function m(r){for(var u=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],v=0;3>v;++v)u[0][v]=Math.max(r[0][v],u[0][v]),u[1][v]=Math.min(r[1][v],u[1][v]);return u}function h(r,u,v,w){this.arcLength=r;
this.position=u;this.index=v;this.dataCoordinate=w}function l(r,u,v,w,y,D){this.gl=r;this.shader=u;this.pickShader=v;this.buffer=w;this.vao=y;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=D;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}F.exports=function(r){var u=r.gl||r.scene&&r.scene.gl,v=f(u);v.attributes.position.location=
0;v.attributes.nextPosition.location=1;v.attributes.arcLength.location=2;v.attributes.lineWidth.location=3;v.attributes.color.location=4;var w=d(u);w.attributes.position.location=0;w.attributes.nextPosition.location=1;w.attributes.arcLength.location=2;w.attributes.lineWidth.location=3;w.attributes.color.location=4;for(var y=e(u),D=a(u,[{buffer:y,size:3,offset:0,stride:48},{buffer:y,size:3,offset:12,stride:48},{buffer:y,size:1,offset:24,stride:48},{buffer:y,size:1,offset:28,stride:48},{buffer:y,size:4,
offset:32,stride:48}]),x=c(Array(1024),[256,1,4]),E=0;1024>E;++E)x.data[E]=255;x=g(u,x);x.wrap=u.REPEAT;u=new l(u,v,w,y,D,x);u.update(r);return u};var e=b("gl-buffer"),a=b("gl-vao"),g=b("gl-texture2d"),k=new Uint8Array(4),p=new Float32Array(k.buffer),n=b("binary-search-bounds"),c=b("ndarray");b=b("./lib/shaders");var f=b.createShader,d=b.createPickShader,q=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=l.prototype;b.isTransparent=function(){return this.hasAlpha};b.isOpaque=function(){return!this.hasAlpha};b.pickSlots=
1;b.setPickBase=function(r){this.pickId=r};b.drawTransparent=b.draw=function(r){if(this.vertexCount){var u=this.gl,v=this.shader,w=this.vao;v.bind();v.uniforms={model:r.model||q,view:r.view||q,projection:r.projection||q,clipBounds:m(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[u.drawingBufferWidth,u.drawingBufferHeight],pixelRatio:this.pixelRatio};w.bind();w.draw(u.TRIANGLE_STRIP,this.vertexCount);
w.unbind()}};b.drawPick=function(r){if(this.vertexCount){var u=this.gl,v=this.pickShader,w=this.vao;v.bind();v.uniforms={model:r.model||q,view:r.view||q,projection:r.projection||q,pickId:this.pickId,clipBounds:m(this.clipBounds),screenShape:[u.drawingBufferWidth,u.drawingBufferHeight],pixelRatio:this.pixelRatio};w.bind();w.draw(u.TRIANGLE_STRIP,this.vertexCount);w.unbind()}};b.update=function(r){var u;this.dirty=!0;var v=!!r.connectGaps;"dashScale"in r&&(this.dashScale=r.dashScale);this.hasAlpha=
!1;"opacity"in r&&(this.opacity=+r.opacity,1>this.opacity&&(this.hasAlpha=!0));var w=[],y=[],D=[],x=0,E=0,B=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],t=r.position||r.positions;if(t){var G=r.color||r.colors||[0,0,0,1],I=r.lineWidth||1,L=!1;var M=1;a:for(;M<t.length;++M){var N=t[M-1],H=t[M];y.push(x);D.push(N.slice());for(u=0;3>u;++u){if(isNaN(N[u])||isNaN(H[u])||!isFinite(N[u])||!isFinite(H[u])){if(!v&&0<w.length){for(L=0;24>L;++L)w.push(w[w.length-12]);E+=2;L=!0}continue a}B[0][u]=
Math.min(B[0][u],N[u],H[u]);B[1][u]=Math.max(B[1][u],N[u],H[u])}if(Array.isArray(G[0])){var J=G.length>M-1?G[M-1]:0<G.length?G[G.length-1]:[0,0,0,1];var O=G.length>M?G[M]:0<G.length?G[G.length-1]:[0,0,0,1]}else J=O=G;3===J.length&&(J=[J[0],J[1],J[2],1]);3===O.length&&(O=[O[0],O[1],O[2],1]);!this.hasAlpha&&1>J[3]&&(this.hasAlpha=!0);var Q=Array.isArray(I)?I.length>M-1?I[M-1]:0<I.length?I[I.length-1]:[0,0,0,1]:I;var U=x;u=x;for(var P=x=0;3>P;++P){var V=N[P]-H[P];x+=V*V}x=u+Math.sqrt(x);if(L){for(u=
0;2>u;++u)w.push(N[0],N[1],N[2],H[0],H[1],H[2],U,Q,J[0],J[1],J[2],J[3]);E+=2;L=!1}w.push(N[0],N[1],N[2],H[0],H[1],H[2],U,Q,J[0],J[1],J[2],J[3],N[0],N[1],N[2],H[0],H[1],H[2],U,-Q,J[0],J[1],J[2],J[3],H[0],H[1],H[2],N[0],N[1],N[2],x,-Q,O[0],O[1],O[2],O[3],H[0],H[1],H[2],N[0],N[1],N[2],x,Q,O[0],O[1],O[2],O[3]);E+=4}}this.buffer.update(w);y.push(x);D.push(t[t.length-1].slice());this.bounds=B;this.vertexCount=E;this.points=D;this.arcLength=y;if("dashes"in r){r=r.dashes.slice();r.unshift(0);for(M=1;M<r.length;++M)r[M]=
r[M-1]+r[M];v=c(Array(1024),[256,1,4]);for(M=0;256>M;++M){for(u=0;4>u;++u)v.set(M,0,u,0);n.le(r,r[r.length-1]*M/255)&1?v.set(M,0,0,0):v.set(M,0,0,255)}this.texture.setPixels(v)}};b.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};b.pick=function(r){if(!r||r.id!==this.pickId)return null;var u=r.value[0];var v=r.value[1];r=r.value[2];k[0]=0;k[1]=r;k[2]=v;k[3]=u;u=p[0];r=n.le(this.arcLength,u);if(0>r)return null;if(r===this.arcLength.length-1)return new h(this.arcLength[this.arcLength.length-
1],this.points[this.points.length-1].slice(),r);var w=this.points[r],y=this.points[Math.min(r+1,this.points.length-1)],D=(u-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),x=1-D;v=[0,0,0];for(var E=0;3>E;++E)v[E]=x*w[E]+D*y[E];r=Math.min(.5>D?r:r+1,this.points.length-1);return new h(u,v,r,this.points[r])}},{"./lib/shaders":270,"binary-search-bounds":96,"gl-buffer":258,"gl-texture2d":327,"gl-vao":332,ndarray:469}],272:[function(b,F,C){F.exports=function(m){var h=new Float32Array(16);h[0]=
m[0];h[1]=m[1];h[2]=m[2];h[3]=m[3];h[4]=m[4];h[5]=m[5];h[6]=m[6];h[7]=m[7];h[8]=m[8];h[9]=m[9];h[10]=m[10];h[11]=m[11];h[12]=m[12];h[13]=m[13];h[14]=m[14];h[15]=m[15];return h}},{}],273:[function(b,F,C){F.exports=function(){var m=new Float32Array(16);m[0]=1;m[1]=0;m[2]=0;m[3]=0;m[4]=0;m[5]=1;m[6]=0;m[7]=0;m[8]=0;m[9]=0;m[10]=1;m[11]=0;m[12]=0;m[13]=0;m[14]=0;m[15]=1;return m}},{}],274:[function(b,F,C){F.exports=function(m){var h=m[0],l=m[1],e=m[2],a=m[3],g=m[4],k=m[5],p=m[6],n=m[7],c=m[8],f=m[9],
d=m[10],q=m[11],r=m[12],u=m[13],v=m[14];m=m[15];return(h*k-l*g)*(d*m-q*v)-(h*p-e*g)*(f*m-q*u)+(h*n-a*g)*(f*v-d*u)+(l*p-e*k)*(c*m-q*r)-(l*n-a*k)*(c*v-d*r)+(e*n-a*p)*(c*u-f*r)}},{}],275:[function(b,F,C){F.exports=function(m,h){var l=h[0],e=h[1],a=h[2];h=h[3];var g=l+l,k=e+e,p=a+a;l*=g;var n=e*g;e*=k;var c=a*g,f=a*k;a*=p;g*=h;k*=h;h*=p;m[0]=1-e-a;m[1]=n+h;m[2]=c-k;m[3]=0;m[4]=n-h;m[5]=1-l-a;m[6]=f+g;m[7]=0;m[8]=c+k;m[9]=f-g;m[10]=1-l-e;m[11]=0;m[12]=0;m[13]=0;m[14]=0;m[15]=1;return m}},{}],276:[function(b,
F,C){F.exports=function(m,h,l){var e=h[0],a=h[1],g=h[2],k=h[3],p=e+e,n=a+a,c=g+g;h=e*p;var f=e*n;e*=c;var d=a*n;a*=c;g*=c;p*=k;n*=k;k*=c;m[0]=1-(d+g);m[1]=f+k;m[2]=e-n;m[3]=0;m[4]=f-k;m[5]=1-(h+g);m[6]=a+p;m[7]=0;m[8]=e+n;m[9]=a-p;m[10]=1-(h+d);m[11]=0;m[12]=l[0];m[13]=l[1];m[14]=l[2];m[15]=1;return m}},{}],277:[function(b,F,C){F.exports=function(m){m[0]=1;m[1]=0;m[2]=0;m[3]=0;m[4]=0;m[5]=1;m[6]=0;m[7]=0;m[8]=0;m[9]=0;m[10]=1;m[11]=0;m[12]=0;m[13]=0;m[14]=0;m[15]=1;return m}},{}],278:[function(b,
F,C){F.exports=function(m,h){var l=h[0],e=h[1],a=h[2],g=h[3],k=h[4],p=h[5],n=h[6],c=h[7],f=h[8],d=h[9],q=h[10],r=h[11],u=h[12],v=h[13],w=h[14];h=h[15];var y=l*p-e*k,D=l*n-a*k,x=l*c-g*k,E=e*n-a*p,B=e*c-g*p,t=a*c-g*n,G=f*v-d*u,I=f*w-q*u,L=f*h-r*u,M=d*w-q*v,N=d*h-r*v,H=q*h-r*w,J=y*H-D*N+x*M+E*L-B*I+t*G;if(!J)return null;J=1/J;m[0]=(p*H-n*N+c*M)*J;m[1]=(a*N-e*H-g*M)*J;m[2]=(v*t-w*B+h*E)*J;m[3]=(q*B-d*t-r*E)*J;m[4]=(n*L-k*H-c*I)*J;m[5]=(l*H-a*L+g*I)*J;m[6]=(w*x-u*t-h*D)*J;m[7]=(f*t-q*x+r*D)*J;m[8]=(k*
N-p*L+c*G)*J;m[9]=(e*L-l*N-g*G)*J;m[10]=(u*B-v*x+h*y)*J;m[11]=(d*x-f*B-r*y)*J;m[12]=(p*I-k*M-n*G)*J;m[13]=(l*M-e*I+a*G)*J;m[14]=(v*D-u*E-w*y)*J;m[15]=(f*E-d*D+q*y)*J;return m}},{}],279:[function(b,F,C){var m=b("./identity");F.exports=function(h,l,e,a){var g=l[0],k=l[1];l=l[2];var p=a[0];var n=a[1];var c=a[2];var f=e[0];a=e[1];var d=e[2];if(1E-6>Math.abs(g-f)&&1E-6>Math.abs(k-a)&&1E-6>Math.abs(l-d))return m(h);e=g-f;a=k-a;f=l-d;var q=1/Math.sqrt(e*e+a*a+f*f);e*=q;a*=q;f*=q;d=n*f-c*a;c=c*e-p*f;p=p*
a-n*e;(q=Math.sqrt(d*d+c*c+p*p))?(q=1/q,d*=q,c*=q,p*=q):p=c=d=0;n=a*p-f*c;var r=f*d-e*p;var u=e*c-a*d;(q=Math.sqrt(n*n+r*r+u*u))?(q=1/q,n*=q,r*=q,u*=q):u=r=n=0;h[0]=d;h[1]=n;h[2]=e;h[3]=0;h[4]=c;h[5]=r;h[6]=a;h[7]=0;h[8]=p;h[9]=u;h[10]=f;h[11]=0;h[12]=-(d*g+c*k+p*l);h[13]=-(n*g+r*k+u*l);h[14]=-(e*g+a*k+f*l);h[15]=1;return h}},{"./identity":277}],280:[function(b,F,C){F.exports=function(m,h,l){var e=h[0],a=h[1],g=h[2],k=h[3],p=h[4],n=h[5],c=h[6],f=h[7],d=h[8],q=h[9],r=h[10],u=h[11],v=h[12],w=h[13],
y=h[14];h=h[15];var D=l[0],x=l[1],E=l[2],B=l[3];m[0]=D*e+x*p+E*d+B*v;m[1]=D*a+x*n+E*q+B*w;m[2]=D*g+x*c+E*r+B*y;m[3]=D*k+x*f+E*u+B*h;D=l[4];x=l[5];E=l[6];B=l[7];m[4]=D*e+x*p+E*d+B*v;m[5]=D*a+x*n+E*q+B*w;m[6]=D*g+x*c+E*r+B*y;m[7]=D*k+x*f+E*u+B*h;D=l[8];x=l[9];E=l[10];B=l[11];m[8]=D*e+x*p+E*d+B*v;m[9]=D*a+x*n+E*q+B*w;m[10]=D*g+x*c+E*r+B*y;m[11]=D*k+x*f+E*u+B*h;D=l[12];x=l[13];E=l[14];B=l[15];m[12]=D*e+x*p+E*d+B*v;m[13]=D*a+x*n+E*q+B*w;m[14]=D*g+x*c+E*r+B*y;m[15]=D*k+x*f+E*u+B*h;return m}},{}],281:[function(b,
F,C){F.exports=function(m,h,l,e,a,g,k){var p=1/(h-l),n=1/(e-a),c=1/(g-k);m[0]=-2*p;m[1]=0;m[2]=0;m[3]=0;m[4]=0;m[5]=-2*n;m[6]=0;m[7]=0;m[8]=0;m[9]=0;m[10]=2*c;m[11]=0;m[12]=(h+l)*p;m[13]=(a+e)*n;m[14]=(k+g)*c;m[15]=1;return m}},{}],282:[function(b,F,C){F.exports=function(m,h,l,e,a){h=1/Math.tan(h/2);var g=1/(e-a);m[0]=h/l;m[1]=0;m[2]=0;m[3]=0;m[4]=0;m[5]=h;m[6]=0;m[7]=0;m[8]=0;m[9]=0;m[10]=(a+e)*g;m[11]=-1;m[12]=0;m[13]=0;m[14]=2*a*e*g;m[15]=0;return m}},{}],283:[function(b,F,C){F.exports=function(m,
h,l,e){var a=e[0],g=e[1];e=e[2];var k=Math.sqrt(a*a+g*g+e*e);if(1E-6>Math.abs(k))return null;k=1/k;a*=k;g*=k;e*=k;var p=Math.sin(l);var n=Math.cos(l);var c=1-n;l=h[0];k=h[1];var f=h[2];var d=h[3];var q=h[4];var r=h[5];var u=h[6];var v=h[7];var w=h[8];var y=h[9];var D=h[10];var x=h[11];var E=a*a*c+n;var B=g*a*c+e*p;var t=e*a*c-g*p;var G=a*g*c-e*p;var I=g*g*c+n;var L=e*g*c+a*p;var M=a*e*c+g*p;a=g*e*c-a*p;g=e*e*c+n;m[0]=l*E+q*B+w*t;m[1]=k*E+r*B+y*t;m[2]=f*E+u*B+D*t;m[3]=d*E+v*B+x*t;m[4]=l*G+q*I+w*L;
m[5]=k*G+r*I+y*L;m[6]=f*G+u*I+D*L;m[7]=d*G+v*I+x*L;m[8]=l*M+q*a+w*g;m[9]=k*M+r*a+y*g;m[10]=f*M+u*a+D*g;m[11]=d*M+v*a+x*g;h!==m&&(m[12]=h[12],m[13]=h[13],m[14]=h[14],m[15]=h[15]);return m}},{}],284:[function(b,F,C){F.exports=function(m,h,l){var e=Math.sin(l);l=Math.cos(l);var a=h[4],g=h[5],k=h[6],p=h[7],n=h[8],c=h[9],f=h[10],d=h[11];h!==m&&(m[0]=h[0],m[1]=h[1],m[2]=h[2],m[3]=h[3],m[12]=h[12],m[13]=h[13],m[14]=h[14],m[15]=h[15]);m[4]=a*l+n*e;m[5]=g*l+c*e;m[6]=k*l+f*e;m[7]=p*l+d*e;m[8]=n*l-a*e;m[9]=
c*l-g*e;m[10]=f*l-k*e;m[11]=d*l-p*e;return m}},{}],285:[function(b,F,C){F.exports=function(m,h,l){var e=Math.sin(l);l=Math.cos(l);var a=h[0],g=h[1],k=h[2],p=h[3],n=h[8],c=h[9],f=h[10],d=h[11];h!==m&&(m[4]=h[4],m[5]=h[5],m[6]=h[6],m[7]=h[7],m[12]=h[12],m[13]=h[13],m[14]=h[14],m[15]=h[15]);m[0]=a*l-n*e;m[1]=g*l-c*e;m[2]=k*l-f*e;m[3]=p*l-d*e;m[8]=a*e+n*l;m[9]=g*e+c*l;m[10]=k*e+f*l;m[11]=p*e+d*l;return m}},{}],286:[function(b,F,C){F.exports=function(m,h,l){var e=Math.sin(l);l=Math.cos(l);var a=h[0],g=
h[1],k=h[2],p=h[3],n=h[4],c=h[5],f=h[6],d=h[7];h!==m&&(m[8]=h[8],m[9]=h[9],m[10]=h[10],m[11]=h[11],m[12]=h[12],m[13]=h[13],m[14]=h[14],m[15]=h[15]);m[0]=a*l+n*e;m[1]=g*l+c*e;m[2]=k*l+f*e;m[3]=p*l+d*e;m[4]=n*l-a*e;m[5]=c*l-g*e;m[6]=f*l-k*e;m[7]=d*l-p*e;return m}},{}],287:[function(b,F,C){F.exports=function(m,h,l){var e=l[0],a=l[1];l=l[2];m[0]=h[0]*e;m[1]=h[1]*e;m[2]=h[2]*e;m[3]=h[3]*e;m[4]=h[4]*a;m[5]=h[5]*a;m[6]=h[6]*a;m[7]=h[7]*a;m[8]=h[8]*l;m[9]=h[9]*l;m[10]=h[10]*l;m[11]=h[11]*l;m[12]=h[12];m[13]=
h[13];m[14]=h[14];m[15]=h[15];return m}},{}],288:[function(b,F,C){F.exports=function(m,h,l){var e=l[0],a=l[1];l=l[2];if(h===m)m[12]=h[0]*e+h[4]*a+h[8]*l+h[12],m[13]=h[1]*e+h[5]*a+h[9]*l+h[13],m[14]=h[2]*e+h[6]*a+h[10]*l+h[14],m[15]=h[3]*e+h[7]*a+h[11]*l+h[15];else{var g=h[0];var k=h[1];var p=h[2];var n=h[3];var c=h[4];var f=h[5];var d=h[6];var q=h[7];var r=h[8];var u=h[9];var v=h[10];var w=h[11];m[0]=g;m[1]=k;m[2]=p;m[3]=n;m[4]=c;m[5]=f;m[6]=d;m[7]=q;m[8]=r;m[9]=u;m[10]=v;m[11]=w;m[12]=g*e+c*a+r*
l+h[12];m[13]=k*e+f*a+u*l+h[13];m[14]=p*e+d*a+v*l+h[14];m[15]=n*e+q*a+w*l+h[15]}return m}},{}],289:[function(b,F,C){F.exports=function(m,h){if(m===h){var l=h[1],e=h[2],a=h[3],g=h[6],k=h[7],p=h[11];m[1]=h[4];m[2]=h[8];m[3]=h[12];m[4]=l;m[6]=h[9];m[7]=h[13];m[8]=e;m[9]=g;m[11]=h[14];m[12]=a;m[13]=k;m[14]=p}else m[0]=h[0],m[1]=h[4],m[2]=h[8],m[3]=h[12],m[4]=h[1],m[5]=h[5],m[6]=h[9],m[7]=h[13],m[8]=h[2],m[9]=h[6],m[10]=h[10],m[11]=h[14],m[12]=h[3],m[13]=h[7],m[14]=h[11],m[15]=h[15];return m}},{}],290:[function(b,
F,C){function m(e,a){for(var g=[0,0,0,0],k=0;4>k;++k)for(var p=0;4>p;++p)g[p]+=e[4*k+p]*a[k];return g}var h=b("barycentric"),l=b("polytope-closest-point/lib/closest_point_2d.js");F.exports=function(e,a,g,k,p,n){if(1===e.length)return[0,e[0].slice()];for(var c=Array(e.length),f=0;f<e.length;++f){var d=f,q=e[f],r=n;q=m(p,m(k,m(g,[q[0],q[1],q[2],1])));for(var u=0;3>u;++u)q[u]/=q[3];c[d]=[.5*r[0]*(1+q[0]),.5*r[1]*(1-q[1])]}g=0;k=Infinity;for(f=0;f<c.length;++f){for(n=p=0;2>n;++n)p+=Math.pow(c[f][n]-a[n],
2);p<k&&(k=p,g=f)}if(2===c.length){for(p=k=f=0;2>p;++p)f+=Math.pow(a[p]-c[0][p],2),k+=Math.pow(a[p]-c[1][p],2);f=Math.sqrt(f);k=Math.sqrt(k);a=1E-6>f+k?[1,0]:[k/(f+k),f/(k+f)]}else 3===c.length?(f=[0,0],l(c[0],c[1],c[2],a,f),a=h(c,f)):a=[];for(f=c=0;3>f;++f){if(-.001>a[f]||1.0001<a[f])return null;c+=a[f]}if(.001<Math.abs(c-1))return null;c=[0,0,0];for(f=0;f<e.length;++f)for(k=e[f],p=a[f],n=0;3>n;++n)c[n]+=p*k[n];return[g,c,a]}},{barycentric:78,"polytope-closest-point/lib/closest_point_2d.js":499}],
291:[function(b,F,C){var m=b("glslify");b=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      \x3d project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * vec4(position , 1.0);\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal  \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          \x3d color;\n  f_data           \x3d position;\n  f_uv             \x3d uv;\n}\n"]);
F=m(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann \x3d require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular \x3d max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * f_color.a;\n}\n"]);
var h=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_color \x3d color;\n  f_data  \x3d position;\n  f_uv    \x3d uv;\n}"]),l=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),
e=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize \x3d pointSize;\n  f_color \x3d color;\n  f_uv \x3d uv;\n}"]),
a=m(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR \x3d gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) \x3e 0.25) {\n    discard;\n  }\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),g=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_id        \x3d id;\n  f_position  \x3d position;\n}"]),
k=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]),
p=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  \x3d projection * view * model * vec4(position, 1.0);\n    gl_PointSize \x3d pointSize;\n  }\n  f_id         \x3d id;\n  f_position   \x3d position;\n}"]),
n=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n}"]);m=m(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor \x3d vec4(contourColor, 1.0);\n}\n"]);C.meshShader={vertex:b,fragment:F,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
C.wireShader={vertex:h,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};C.pointShader={vertex:e,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};C.pickShader={vertex:g,fragment:k,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};C.pointPickShader={vertex:p,fragment:k,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};C.contourShader={vertex:n,fragment:m,attributes:[{name:"position",type:"vec3"}]}},{glslify:413}],292:[function(b,F,C){function m(t,G,I,L,M,N,H,J,O,Q,U,P,V,Y,ba,ea,ca,ia,fa,ha,na,pa,ra,ta,oa,ua,ka){this.gl=t;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=G;this.dirty=!0;this.triShader=I;this.lineShader=L;this.pointShader=M;this.pickShader=N;this.pointPickShader=H;this.contourShader=J;this.trianglePositions=O;this.triangleColors=U;this.triangleNormals=
V;this.triangleUVs=P;this.triangleIds=Q;this.triangleVAO=Y;this.triangleCount=0;this.lineWidth=1;this.edgePositions=ba;this.edgeColors=ca;this.edgeUVs=ia;this.edgeIds=ea;this.edgeVAO=fa;this.edgeCount=0;this.pointPositions=ha;this.pointColors=pa;this.pointUVs=ra;this.pointSizes=ta;this.pointIds=na;this.pointVAO=oa;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=ua;this.contourVAO=ka;this.contourCount=0;this.contourColor=[0,0,0];this.pickVertex=this.contourEnable=!0;this.pickId=1;this.bounds=
[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.opacityscale=this.hasAlpha=!1;this._projection=this._view=this._model=B;this._resolution=[1,1]}function h(t,G){if(!G||!G.length)return 1;for(var I=0;I<G.length&&!(2>G.length);++I){if(G[I][0]===t)return G[I][1];if(G[I][0]>
t&&0<I)return t=(G[I][0]-t)/(G[I][0]-G[I-1][0]),G[I][1]*(1-t)+t*G[I-1][1]}return 1}function l(t,G){t=d({colormap:t,nshades:256,format:"rgba"});for(var I=new Uint8Array(1024),L=0;256>L;++L){for(var M=t[L],N=0;3>N;++N)I[4*L+N]=M[N];I[4*L+3]=G?255*h(L/255,G):255*M[3]}return f(I,[256,256,4],[4,0,1])}var e=b("gl-shader"),a=b("gl-buffer"),g=b("gl-vao"),k=b("gl-texture2d"),p=b("normals"),n=b("gl-mat4/multiply"),c=b("gl-mat4/invert"),f=b("ndarray"),d=b("colormap"),q=b("simplicial-complex-contour"),r=b("typedarray-pool");
C=b("./lib/shaders");var u=b("./lib/closest-point"),v=C.meshShader,w=C.wireShader,y=C.pointShader,D=C.pickShader,x=C.pointPickShader,E=C.contourShader,B=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=m.prototype;b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.pickSlots=1;b.setPickBase=function(t){this.pickId=t};b.highlight=function(t){if(t&&this.contourEnable){var G=q(this.cells,this.intensity,t.intensity);t=G.cells;var I=G.vertexIds;G=G.vertexWeights;for(var L=
t.length,M=r.mallocFloat32(6*L),N=0,H=0;H<L;++H)for(var J=t[H],O=0;2>O;++O){var Q=J[0];2===J.length&&(Q=J[O]);var U=G[Q],P=1-U,V=this.positions[I[Q][0]];Q=this.positions[I[Q][1]];for(var Y=0;3>Y;++Y)M[N++]=U*V[Y]+P*Q[Y]}this.contourCount=N/3|0;this.contourPositions.update(M.subarray(0,N));r.free(M)}else this.contourCount=0};b.update=function(t){t=t||{};var G=this.gl;this.dirty=!0;"contourEnable"in t&&(this.contourEnable=t.contourEnable);"contourColor"in t&&(this.contourColor=t.contourColor);"lineWidth"in
t&&(this.lineWidth=t.lineWidth);"lightPosition"in t&&(this.lightPosition=t.lightPosition);this.hasAlpha=!1;"opacity"in t&&(this.opacity=t.opacity,1>this.opacity&&(this.hasAlpha=!0));"opacityscale"in t&&(this.opacityscale=t.opacityscale,this.hasAlpha=!0);"ambient"in t&&(this.ambientLight=t.ambient);"diffuse"in t&&(this.diffuseLight=t.diffuse);"specular"in t&&(this.specularLight=t.specular);"roughness"in t&&(this.roughness=t.roughness);"fresnel"in t&&(this.fresnel=t.fresnel);t.texture?(this.texture.dispose(),
this.texture=k(G,t.texture)):t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=G.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=G.LINEAR,this.texture.setPixels(l(t.colormap,this.opacityscale)),this.texture.generateMipmap());G=t.cells;var I=t.positions;if(I&&G){var L=[],M=[],N=[],H=[],J=[],O=[],Q=[],U=[],P=[],V=[],Y=[],ba=[],ea=[],ca=[];this.cells=G;this.positions=I;var ia=t.vertexNormals,fa=t.cellNormals,ha=void 0===t.vertexNormalsEpsilon?1E-6:t.vertexNormalsEpsilon,na=void 0===t.faceNormalsEpsilon?
1E-6:t.faceNormalsEpsilon;t.useFacetNormals&&!fa&&(fa=p.faceNormals(G,I,na));fa||ia||(ia=p.vertexNormals(G,I,ha));ha=t.vertexColors;na=t.cellColors;var pa=t.meshColor||[1,1,1,1],ra=t.vertexUVs,ta=t.vertexIntensity,oa=t.cellUVs,ua=t.cellIntensity,ka=Infinity,sa=-Infinity;if(!ra&&!oa)if(ta)if(t.vertexIntensityBounds)ka=+t.vertexIntensityBounds[0],sa=+t.vertexIntensityBounds[1];else for(var ya=0;ya<ta.length;++ya){var qa=ta[ya];ka=Math.min(ka,qa);sa=Math.max(sa,qa)}else if(ua)if(t.cellIntensityBounds)ka=
+t.cellIntensityBounds[0],sa=+t.cellIntensityBounds[1];else for(ya=0;ya<ua.length;++ya)qa=ua[ya],ka=Math.min(ka,qa),sa=Math.max(sa,qa);else for(ya=0;ya<I.length;++ya)qa=I[ya][2],ka=Math.min(ka,qa),sa=Math.max(sa,qa);if(ta)this.intensity=ta;else if(ua)this.intensity=ua;else{ya=I.length;qa=Array(ya);for(var xa=0;xa<ya;++xa)qa[xa]=I[xa][2];this.intensity=qa}this.pickVertex=!(ua||na);qa=t.pointSizes;t=t.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(ya=0;ya<
I.length;++ya){var Ca=I[ya];for(xa=0;3>xa;++xa)!isNaN(Ca[xa])&&isFinite(Ca[xa])&&(this.bounds[0][xa]=Math.min(this.bounds[0][xa],Ca[xa]),this.bounds[1][xa]=Math.max(this.bounds[1][xa],Ca[xa]))}var Ja=0,eb=0,Ra=0;ya=0;a:for(;ya<G.length;++ya){var Wa=G[ya];switch(Wa.length){case 1:var Ea=Wa[0];Ca=I[Ea];for(xa=0;3>xa;++xa)if(isNaN(Ca[xa])||!isFinite(Ca[xa]))continue a;V.push(Ca[0],Ca[1],Ca[2]);var Ia=ha?ha[Ea]:na?na[ya]:pa;this.opacityscale&&ta?M.push(Ia[0],Ia[1],Ia[2],this.opacity*h((ta[Ea]-ka)/(sa-
ka),this.opacityscale)):3===Ia.length?Y.push(Ia[0],Ia[1],Ia[2],this.opacity):(Y.push(Ia[0],Ia[1],Ia[2],Ia[3]*this.opacity),1>Ia[3]&&(this.hasAlpha=!0));Ca=ra?ra[Ea]:ta?[(ta[Ea]-ka)/(sa-ka),0]:oa?oa[ya]:ua?[(ua[ya]-ka)/(sa-ka),0]:[(Ca[2]-ka)/(sa-ka),0];ba.push(Ca[0],Ca[1]);qa?ea.push(qa[Ea]):ea.push(t);ca.push(ya);Ra+=1;break;case 2:for(xa=0;2>xa;++xa)for(Ea=Wa[xa],Ca=I[Ea],Ea=0;3>Ea;++Ea)if(isNaN(Ca[Ea])||!isFinite(Ca[Ea]))continue a;for(xa=0;2>xa;++xa)Ea=Wa[xa],Ca=I[Ea],O.push(Ca[0],Ca[1],Ca[2]),
Ia=ha?ha[Ea]:na?na[ya]:pa,this.opacityscale&&ta?M.push(Ia[0],Ia[1],Ia[2],this.opacity*h((ta[Ea]-ka)/(sa-ka),this.opacityscale)):3===Ia.length?Q.push(Ia[0],Ia[1],Ia[2],this.opacity):(Q.push(Ia[0],Ia[1],Ia[2],Ia[3]*this.opacity),1>Ia[3]&&(this.hasAlpha=!0)),Ca=ra?ra[Ea]:ta?[(ta[Ea]-ka)/(sa-ka),0]:oa?oa[ya]:ua?[(ua[ya]-ka)/(sa-ka),0]:[(Ca[2]-ka)/(sa-ka),0],U.push(Ca[0],Ca[1]),P.push(ya);eb+=1;break;case 3:for(xa=0;3>xa;++xa)for(Ea=Wa[xa],Ca=I[Ea],Ea=0;3>Ea;++Ea)if(isNaN(Ca[Ea])||!isFinite(Ca[Ea]))continue a;
for(xa=0;3>xa;++xa)Ea=Wa[2-xa],Ca=I[Ea],L.push(Ca[0],Ca[1],Ca[2]),(Ia=ha?ha[Ea]:na?na[ya]:pa)?this.opacityscale&&ta?M.push(Ia[0],Ia[1],Ia[2],this.opacity*h((ta[Ea]-ka)/(sa-ka),this.opacityscale)):3===Ia.length?M.push(Ia[0],Ia[1],Ia[2],this.opacity):(M.push(Ia[0],Ia[1],Ia[2],Ia[3]*this.opacity),1>Ia[3]&&(this.hasAlpha=!0)):M.push(.5,.5,.5,1),Ca=ra?ra[Ea]:ta?[(ta[Ea]-ka)/(sa-ka),0]:oa?oa[ya]:ua?[(ua[ya]-ka)/(sa-ka),0]:[(Ca[2]-ka)/(sa-ka),0],H.push(Ca[0],Ca[1]),Ca=ia?ia[Ea]:fa[ya],N.push(Ca[0],Ca[1],
Ca[2]),J.push(ya);Ja+=1}}this.pointCount=Ra;this.edgeCount=eb;this.triangleCount=Ja;this.pointPositions.update(V);this.pointColors.update(Y);this.pointUVs.update(ba);this.pointSizes.update(ea);this.pointIds.update(new Uint32Array(ca));this.edgePositions.update(O);this.edgeColors.update(Q);this.edgeUVs.update(U);this.edgeIds.update(new Uint32Array(P));this.trianglePositions.update(L);this.triangleColors.update(M);this.triangleUVs.update(H);this.triangleNormals.update(N);this.triangleIds.update(new Uint32Array(J))}};
b.drawTransparent=b.draw=function(t){t=t||{};var G=this.gl,I=t.model||B,L=t.view||B,M=t.projection||B,N=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(t=0;3>t;++t)N[0][t]=Math.max(N[0][t],this.clipBounds[0][t]),N[1][t]=Math.min(N[1][t],this.clipBounds[1][t]);I={model:I,view:L,projection:M,inverseModel:B.slice(),clipBounds:N,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,
texture:0};I.inverseModel=c(I.inverseModel,I.model);G.disable(G.CULL_FACE);this.texture.bind(0);L=Array(16);n(L,I.view,I.model);n(L,I.projection,L);c(L,L);for(t=0;3>t;++t)I.eyePosition[t]=L[12+t]/L[15];M=L[15];for(t=0;3>t;++t)M+=this.lightPosition[t]*L[4*t+3];for(t=0;3>t;++t){N=L[12+t];for(var H=0;3>H;++H)N+=L[4*H+t]*this.lightPosition[H];I.lightPosition[t]=N/M}0<this.triangleCount&&(t=this.triShader,t.bind(),t.uniforms=I,this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());
0<this.edgeCount&&0<this.lineWidth&&(t=this.lineShader,t.bind(),t.uniforms=I,this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(t=this.pointShader,t.bind(),t.uniforms=I,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(t=this.contourShader,t.bind(),t.uniforms=I,this.contourVAO.bind(),G.drawArrays(G.LINES,
0,this.contourCount),this.contourVAO.unbind())};b.drawPick=function(t){t=t||{};var G=this.gl,I=t.model||B,L=t.view||B;t=t.projection||B;for(var M=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],N=0;3>N;++N)M[0][N]=Math.max(M[0][N],this.clipBounds[0][N]),M[1][N]=Math.min(M[1][N],this.clipBounds[1][N]);this._model=[].slice.call(I);this._view=[].slice.call(L);this._projection=[].slice.call(t);this._resolution=[G.drawingBufferWidth,G.drawingBufferHeight];I={model:I,view:L,projection:t,clipBounds:M,pickId:this.pickId/
255};L=this.pickShader;L.bind();L.uniforms=I;0<this.triangleCount&&(this.triangleVAO.bind(),G.drawArrays(G.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),G.lineWidth(this.lineWidth*this.pixelRatio),G.drawArrays(G.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(L=this.pointPickShader,L.bind(),L.uniforms=I,this.pointVAO.bind(),G.drawArrays(G.POINTS,0,this.pointCount),this.pointVAO.unbind())};b.pick=function(t){if(!t||t.id!==this.pickId)return null;
for(var G=t.value[0]+256*t.value[1]+65536*t.value[2],I=this.cells[G],L=this.positions,M=Array(I.length),N=0;N<I.length;++N)M[N]=L[I[N]];N=t.coord[0];t=t.coord[1];if(!this.pickVertex){M=this.positions[I[0]];L=this.positions[I[1]];var H=this.positions[I[2]];return{_cellCenter:!0,position:[N,t],index:G,cell:I,cellId:G,intensity:this.intensity[G],dataCoordinate:[(M[0]+L[0]+H[0])/3,(M[1]+L[1]+H[1])/3,(M[2]+L[2]+H[2])/3]}}M=u(M,[N*this.pixelRatio,this._resolution[1]-t*this.pixelRatio],this._model,this._view,
this._projection,this._resolution);if(!M)return null;t=M[2];for(N=L=0;N<I.length;++N)L+=t[N]*this.intensity[I[N]];return{position:M[1],index:I[M[0]],cell:I,cellId:G,intensity:L,dataCoordinate:this.positions[I[M[0]]]}};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();
this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};F.exports=function(t,G){1===arguments.length&&(G=t,t=G.gl);if(!(t.getExtension("OES_standard_derivatives")||
t.getExtension("MOZ_OES_standard_derivatives")||t.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var I=e(t,v.vertex,v.fragment);I.attributes.position.location=0;I.attributes.color.location=2;I.attributes.uv.location=3;I.attributes.normal.location=4;var L=e(t,w.vertex,w.fragment);L.attributes.position.location=0;L.attributes.color.location=2;L.attributes.uv.location=3;var M=e(t,y.vertex,y.fragment);M.attributes.position.location=0;M.attributes.color.location=
2;M.attributes.uv.location=3;M.attributes.pointSize.location=4;var N=e(t,D.vertex,D.fragment);N.attributes.position.location=0;N.attributes.id.location=1;var H=e(t,x.vertex,x.fragment);H.attributes.position.location=0;H.attributes.id.location=1;H.attributes.pointSize.location=4;var J=e(t,E.vertex,E.fragment);J.attributes.position.location=0;var O=k(t,f(new Uint8Array([255,255,255,255]),[1,1,4]));O.generateMipmap();O.minFilter=t.LINEAR_MIPMAP_LINEAR;O.magFilter=t.LINEAR;var Q=a(t),U=a(t),P=a(t),V=
a(t),Y=a(t),ba=g(t,[{buffer:Q,type:t.FLOAT,size:3},{buffer:Y,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:U,type:t.FLOAT,size:4},{buffer:P,type:t.FLOAT,size:2},{buffer:V,type:t.FLOAT,size:3}]),ea=a(t),ca=a(t),ia=a(t),fa=a(t),ha=g(t,[{buffer:ea,type:t.FLOAT,size:3},{buffer:fa,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ca,type:t.FLOAT,size:4},{buffer:ia,type:t.FLOAT,size:2}]),na=a(t),pa=a(t),ra=a(t),ta=a(t),oa=a(t),ua=g(t,[{buffer:na,type:t.FLOAT,size:3},{buffer:oa,type:t.UNSIGNED_BYTE,
size:4,normalized:!0},{buffer:pa,type:t.FLOAT,size:4},{buffer:ra,type:t.FLOAT,size:2},{buffer:ta,type:t.FLOAT,size:1}]),ka=a(t),sa=g(t,[{buffer:ka,type:t.FLOAT,size:3}]);I=new m(t,O,I,L,M,N,H,J,Q,Y,U,P,V,ba,ea,fa,ca,ia,ha,na,oa,pa,ra,ta,ua,ka,sa);I.update(G);return I}},{"./lib/closest-point":290,"./lib/shaders":291,colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-shader":312,"gl-texture2d":327,"gl-vao":332,ndarray:469,normals:472,"simplicial-complex-contour":528,"typedarray-pool":567}],
293:[function(b,F,C){function m(a,g,k){this.plot=a;this.vbo=g;this.shader=k}F.exports=function(a){var g=a.gl,k=h(g,[0,0,0,1,1,0,1,1]);g=l(g,e.boxVert,e.lineFrag);return new m(a,k,g)};var h=b("gl-buffer"),l=b("gl-shader"),e=b("./shaders");b=m.prototype;b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawBox=function(){var a=[0,0],g=[0,0];return function(k,p,n,c,f){var d=this.shader,q=this.plot.gl;a[0]=k;
a[1]=p;g[0]=n;g[1]=c;d.uniforms.lo=a;d.uniforms.hi=g;d.uniforms.color=f;q.drawArrays(q.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"gl-buffer":258,"gl-shader":312}],294:[function(b,F,C){function m(k,p,n,c){this.plot=k;this.vbo=p;this.shader=n;this.tickShader=c;this.ticks=[[],[]]}function h(k,p){return k-p}F.exports=function(k){var p=k.gl,n=l(p),c=e(p,g.gridVert,g.gridFrag);p=e(p,g.tickVert,g.gridFrag);return new m(k,n,c,p)};var l=b("gl-buffer"),
e=b("gl-shader"),a=b("binary-search-bounds"),g=b("./shaders");b=m.prototype;b.draw=function(){var k=[0,0],p=[0,0],n=[0,0];return function(){var c=this.plot,f=this.vbo,d=this.shader,q=this.ticks,r=c.gl,u=c._tickBounds,v=c.dataBox,w=c.viewBox,y=c.gridLineWidth,D=c.gridLineColor,x=c.gridLineEnable;c=c.pixelRatio;for(var E=0;2>E;++E){var B=u[E],t=.5*(v[E+2]+v[E]),G=v[E+2]-v[E];p[E]=2*(u[E+2]-B)/G;k[E]=2*(B-t)/G}d.bind();f.bind();d.attributes.dataCoord.pointer();d.uniforms.dataShift=k;d.uniforms.dataScale=
p;for(E=f=0;2>E;++E)n[0]=n[1]=0,n[E]=1,d.uniforms.dataAxis=n,d.uniforms.lineWidth=y[E]/(w[E+2]-w[E])*c,d.uniforms.color=D[E],u=6*q[E].length,x[E]&&u&&r.drawArrays(r.TRIANGLES,f,u),f+=u}}();b.drawTickMarks=function(){var k=[0,0],p=[0,0],n=[1,0],c=[0,1],f=[0,0],d=[0,0];return function(){var q=this.plot,r=this.vbo,u=this.tickShader,v=this.ticks,w=q.gl,y=q._tickBounds,D=q.dataBox,x=q.viewBox,E=q.pixelRatio,B=q.screenBox,t=B[2]-B[0];B=B[3]-B[1];for(var G=x[2]-x[0],I=x[3]-x[1],L=0;2>L;++L){var M=y[L],N=
.5*(D[L+2]+D[L]),H=D[L+2]-D[L];p[L]=2*(y[L+2]-M)/H;k[L]=2*(M-N)/H}p[0]*=G/t;k[0]*=G/t;p[1]*=I/B;k[1]*=I/B;u.bind();r.bind();u.attributes.dataCoord.pointer();r=u.uniforms;r.dataShift=k;r.dataScale=p;u=q.tickMarkLength;G=q.tickMarkWidth;q=q.tickMarkColor;L=6*v[0].length;M=Math.min(a.ge(v[0],(D[0]-y[0])/(y[2]-y[0]),h),v[0].length);N=Math.min(a.gt(v[0],(D[2]-y[0])/(y[2]-y[0]),h),v[0].length);I=6*M;M=6*Math.max(0,N-M);N=Math.min(a.ge(v[1],(D[1]-y[1])/(y[3]-y[1]),h),v[1].length);v=Math.min(a.gt(v[1],(D[3]-
y[1])/(y[3]-y[1]),h),v[1].length);y=L+6*N;v=6*Math.max(0,v-N);f[0]=2*(x[0]-u[1])/t-1;f[1]=(x[3]+x[1])/B-1;d[0]=u[1]*E/t;d[1]=G[1]*E/B;v&&(r.color=q[1],r.tickScale=d,r.dataAxis=c,r.screenOffset=f,w.drawArrays(w.TRIANGLES,y,v));f[0]=(x[2]+x[0])/t-1;f[1]=2*(x[1]-u[0])/B-1;d[0]=G[0]*E/t;d[1]=u[0]*E/B;M&&(r.color=q[0],r.tickScale=d,r.dataAxis=n,r.screenOffset=f,w.drawArrays(w.TRIANGLES,I,M));f[0]=2*(x[2]+u[3])/t-1;f[1]=(x[3]+x[1])/B-1;d[0]=u[3]*E/t;d[1]=G[3]*E/B;v&&(r.color=q[3],r.tickScale=d,r.dataAxis=
c,r.screenOffset=f,w.drawArrays(w.TRIANGLES,y,v));f[0]=(x[2]+x[0])/t-1;f[1]=2*(x[3]+u[2])/B-1;d[0]=G[2]*E/t;d[1]=u[2]*E/B;M&&(r.color=q[2],r.tickScale=d,r.dataAxis=n,r.screenOffset=f,w.drawArrays(w.TRIANGLES,I,M))}}();b.update=function(){var k=[1,1,-1,-1,1,-1],p=[1,-1,1,1,-1,-1];return function(n){var c=n.ticks;n=n.bounds;for(var f=new Float32Array(18*(c[0].length+c[1].length)),d=0,q=[[],[]],r=0;2>r;++r)for(var u=q[r],v=c[r],w=n[r],y=n[r+2],D=0;D<v.length;++D){var x=(v[D].x-w)/(y-w);u.push(x);for(var E=
0;6>E;++E)f[d++]=x,f[d++]=k[E],f[d++]=p[E]}this.ticks=q;this.vbo.update(f)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":296,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312}],295:[function(b,F,C){function m(a,g,k){this.plot=a;this.vbo=g;this.shader=k}F.exports=function(a){var g=a.gl,k=h(g,[-1,-1,-1,1,1,-1,1,1]);g=l(g,e.lineVert,e.lineFrag);return new m(a,k,g)};var h=b("gl-buffer"),l=b("gl-shader"),e=b("./shaders");b=m.prototype;
b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawLine=function(){var a=[0,0],g=[0,0];return function(k,p,n,c,f,d){var q=this.plot,r=this.shader,u=q.gl;a[0]=k;a[1]=p;g[0]=n;g[1]=c;r.uniforms.start=a;r.uniforms.end=g;r.uniforms.width=f*q.pixelRatio;r.uniforms.color=d;u.drawArrays(u.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"gl-buffer":258,
"gl-shader":312}],296:[function(b,F,C){b=b("glslify");C=b(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d vec4(color.xyz * color.w, color.w);\n}\n"]);F.exports={lineVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta \x3d normalize(perp(start - end));\n  vec2 offset \x3d mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position \x3d vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:C,textVert:b(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  \x3d textCoordinate.z;\n  vec2 glyphOffset  \x3d textCoordinate.xy;\n  mat2 glyphMatrix \x3d mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate \x3d dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position \x3d vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:C,gridVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos +\x3d 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position \x3d vec4(pos, 0, 1);\n}\n"]),gridFrag:C,boxVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position \x3d vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position \x3d vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:413}],297:[function(b,F,C){function m(k,p,n){this.plot=k;this.vbo=p;this.shader=n;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=
[0,0]}F.exports=function(k){var p=k.gl,n=h(p);p=l(p,g.textVert,g.textFrag);return new m(k,n,p)};var h=b("gl-buffer"),l=b("gl-shader"),e=b("text-cache"),a=b("binary-search-bounds"),g=b("./shaders");b=m.prototype;b.drawTicks=function(){var k=[0,0],p=[0,0],n=[0,0];return function(c){var f=this.plot,d=this.shader,q=this.tickX[c],r=this.tickOffset[c],u=f.gl,v=f.viewBox,w=f.dataBox,y=f.screenBox,D=f.pixelRatio,x=f.tickEnable,E=f.tickPad,B=f.tickColor,t=f.tickAngle,G=f.labelEnable,I=f.labelPad,L=f.labelColor;
f=f.labelAngle;var M=this.labelOffset[c],N=this.labelCount[c],H=a.lt(q,w[c]);q=a.le(q,w[c+2]);k[0]=k[1]=0;k[c]=1;p[c]=(v[2+c]+v[c])/(y[2+c]-y[c])-1;y=2/y[2+(c^1)]-y[c^1];p[c^1]=y*v[c^1]-1;x[c]&&(p[c^1]-=y*D*E[c],H<q&&r[q]>r[H]&&(d.uniforms.dataAxis=k,d.uniforms.screenOffset=p,d.uniforms.color=B[c],d.uniforms.angle=t[c],u.drawArrays(u.TRIANGLES,r[H],r[q]-r[H])));G[c]&&N&&(p[c^1]-=y*D*I[c],d.uniforms.dataAxis=n,d.uniforms.screenOffset=p,d.uniforms.color=L[c],d.uniforms.angle=f[c],u.drawArrays(u.TRIANGLES,
M,N));p[c^1]=y*v[2+(c^1)]-1;x[c+2]&&(p[c^1]+=y*D*E[c+2],H<q&&r[q]>r[H]&&(d.uniforms.dataAxis=k,d.uniforms.screenOffset=p,d.uniforms.color=B[c+2],d.uniforms.angle=t[c+2],u.drawArrays(u.TRIANGLES,r[H],r[q]-r[H])));G[c+2]&&N&&(p[c^1]+=y*D*I[c+2],d.uniforms.dataAxis=n,d.uniforms.screenOffset=p,d.uniforms.color=L[c+2],d.uniforms.angle=f[c+2],u.drawArrays(u.TRIANGLES,M,N))}}();b.drawTitle=function(){var k=[0,0],p=[0,0];return function(){var n=this.plot,c=this.shader,f=n.gl,d=n.screenBox,q=n.titleCenter,
r=n.titleAngle,u=n.titleColor;n=n.pixelRatio;if(this.titleCount){for(var v=0;2>v;++v)p[v]=2*(q[v]*n-d[v])/(d[2+v]-d[v])-1;c.bind();c.uniforms.dataAxis=k;c.uniforms.screenOffset=p;c.uniforms.angle=r;c.uniforms.color=u;f.drawArrays(f.TRIANGLES,this.titleOffset,this.titleCount)}}}();b.bind=function(){var k=[0,0],p=[0,0],n=[0,0];return function(){var c=this.plot,f=this.shader,d=c._tickBounds,q=c.dataBox,r=c.screenBox,u=c.viewBox;f.bind();for(var v=0;2>v;++v){var w=d[v],y=.5*(q[v+2]+q[v]),D=q[v+2]-q[v],
x=u[v+2]-u[v],E=r[v+2]-r[v];p[v]=2*(d[v+2]-w)/D*x/E;k[v]=2*(w-y)/D*x/E}n[1]=2*c.pixelRatio/(r[3]-r[1]);n[0]=n[1]*(r[3]-r[1])/(r[2]-r[0]);f.uniforms.dataScale=p;f.uniforms.dataShift=k;f.uniforms.textScale=n;this.vbo.bind();f.attributes.textCoordinate.pointer()}}();b.update=function(k){var p=[],n=k.ticks,c=k.bounds,f,d;for(d=0;2>d;++d){var q=[Math.floor(p.length/3)],r=[-Infinity],u=n[d];for(f=0;f<u.length;++f){var v=u[f];var w=v.x;var y=v.text;var D=v.font||"sans-serif";v=v.fontSize||12;for(var x=1/
(c[d+2]-c[d]),E=c[d],B=y.split("\n"),t=0;t<B.length;t++){var G=e(D,B[t]).data;for(y=0;y<G.length;y+=2)p.push(G[y]*v,-G[y+1]*v-t*v*1.2,(w-E)*x)}q.push(Math.floor(p.length/3));r.push(w)}this.tickOffset[d]=q;this.tickX[d]=r}for(d=0;2>d;++d){this.labelOffset[d]=Math.floor(p.length/3);G=e(k.labelFont[d],k.labels[d],{textAlign:"center"}).data;v=k.labelSize[d];for(f=0;f<G.length;f+=2)p.push(G[f]*v,-G[f+1]*v,0);this.labelCount[d]=Math.floor(p.length/3)-this.labelOffset[d]}this.titleOffset=Math.floor(p.length/
3);G=e(k.titleFont,k.title).data;v=k.titleSize;for(f=0;f<G.length;f+=2)p.push(G[f]*v,-G[f+1]*v,0);this.titleCount=Math.floor(p.length/3)-this.titleOffset;this.vbo.update(p)};b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312,"text-cache":547}],298:[function(b,F,C){function m(n,c){this.gl=n;this.pickBuffer=c;this.screenBox=[0,0,n.drawingBufferWidth,n.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,
-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=
[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function h(n){n=n.slice();for(var c=0;c<n.length;++c)n[c]=n[c].slice();return n}function l(n,c){return n.x-c.x}F.exports=function(n){var c=n.gl,f=e(c,[c.drawingBufferWidth,c.drawingBufferHeight]);c=new m(c,f);c.grid=a(c);c.text=g(c);c.line=k(c);c.box=p(c);c.update(n);return c};var e=b("gl-select-static"),
a=b("./lib/grid"),g=b("./lib/text"),k=b("./lib/line"),p=b("./lib/box");b=m.prototype;b.setDirty=function(){this.dirty=this.pickDirty=!0};b.setOverlayDirty=function(){this.dirty=!0};b.nextDepthValue=function(){return this._depthCounter++/65536};b.draw=function(){return function(){var n=this.gl,c=this.screenBox,f=this.viewBox,d=this.dataBox,q=this.pixelRatio,r=this.grid,u=this.line,v=this.text,w=this.objects;this._depthCounter=0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=
!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;n.bindFramebuffer(n.FRAMEBUFFER,null);n.enable(n.SCISSOR_TEST);n.disable(n.DEPTH_TEST);n.depthFunc(n.LESS);n.depthMask(!1);n.enable(n.BLEND);n.blendEquation(n.FUNC_ADD,n.FUNC_ADD);n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA);if(this.borderColor){n.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var y=this.borderColor;n.clearColor(y[0]*y[3],y[1]*y[3],y[2]*y[3],y[3]);n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)}n.scissor(f[0],
f[1],f[2]-f[0],f[3]-f[1]);n.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]);y=this.backgroundColor;n.clearColor(y[0]*y[3],y[1]*y[3],y[2]*y[3],y[3]);n.clear(n.COLOR_BUFFER_BIT);r.draw();y=this.zeroLineEnable;var D=this.zeroLineColor,x=this.zeroLineWidth;if(y[0]||y[1])for(u.bind(),r=0;2>r;++r)if(y[r]&&0>=d[r]&&0<=d[r+2]){var E=c[r]-d[r]*(c[r+2]-c[r])/(d[r+2]-d[r]);0===r?u.drawLine(E,c[1],E,c[3],x[r],D[r]):u.drawLine(c[0],E,c[2],E,x[r],D[r])}for(r=0;r<w.length;++r)w[r].draw();n.viewport(c[0],c[1],c[2]-c[0],
c[3]-c[1]);n.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);this.grid.drawTickMarks();u.bind();c=this.borderLineEnable;d=this.borderLineWidth;w=this.borderLineColor;c[1]&&u.drawLine(f[0],f[1]-.5*d[1]*q,f[0],f[3]+.5*d[3]*q,d[1],w[1]);c[0]&&u.drawLine(f[0]-.5*d[0]*q,f[1],f[2]+.5*d[2]*q,f[1],d[0],w[0]);c[3]&&u.drawLine(f[2],f[1]-.5*d[1]*q,f[2],f[3]+.5*d[3]*q,d[3],w[3]);c[2]&&u.drawLine(f[0]-.5*d[0]*q,f[3],f[2]+.5*d[2]*q,f[3],d[2],w[2]);v.bind();for(r=0;2>r;++r)v.drawTicks(r);this.titleEnable&&v.drawTitle();
f=this.overlays;for(r=0;r<f.length;++r)f[r].draw();n.disable(n.SCISSOR_TEST);n.disable(n.BLEND);n.depthMask(!0)}}}();b.drawPick=function(){return function(){if(!this.static){var n=this.pickBuffer;this._pickTimeout=null;n.begin();for(var c=1,f=this.objects,d=0;d<f.length;++d)c=f[d].drawPick(c);n.end()}}}();b.pick=function(){return function(n,c){if(!this.static){var f=this.pixelRatio,d=this.pickPixelRatio,q=this.viewBox;n=Math.round((n-q[0]/f)*d)|0;c=Math.round((c-q[1]/f)*d)|0;f=this.pickBuffer.query(n,
c,this.pickRadius);if(!f)return null;f=f.id+(f.value[0]<<8)+(f.value[1]<<16)+(f.value[2]<<24);d=this.objects;for(q=0;q<d.length;++q){var r=d[q].pick(n,c,f);if(r)return r}return null}}}();b.setScreenBox=function(n){var c=this.screenBox,f=this.pixelRatio;c[0]=Math.round(n[0]*f)|0;c[1]=Math.round(n[1]*f)|0;c[2]=Math.round(n[2]*f)|0;c[3]=Math.round(n[3]*f)|0;this.setDirty()};b.setDataBox=function(n){var c=this.dataBox;if(c[0]!==n[0]||c[1]!==n[1]||c[2]!==n[2]||c[3]!==n[3])c[0]=n[0],c[1]=n[1],c[2]=n[2],
c[3]=n[3],this.setDirty()};b.setViewBox=function(n){var c=this.pixelRatio,f=this.viewBox;f[0]=Math.round(n[0]*c)|0;f[1]=Math.round(n[1]*c)|0;f[2]=Math.round(n[2]*c)|0;f[3]=Math.round(n[3]*c)|0;c=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((n[2]-n[0])*c)|0,Math.round((n[3]-n[1])*c)|0];this.setDirty()};b.update=function(n){n=n||{};var c=this.gl,f=this.pixelRatio=n.pixelRatio||1;this.pickPixelRatio=Math.max(f,1);this.setScreenBox(n.screenBox||[0,0,c.drawingBufferWidth/f,c.drawingBufferHeight/
f]);this.setViewBox(n.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/f,.125*(this.screenBox[3]-this.screenBox[1])/f,.875*(this.screenBox[2]-this.screenBox[0])/f,.875*(this.screenBox[3]-this.screenBox[1])/f]);c=this.viewBox;var d=(c[2]-c[0])/(c[3]-c[1]);this.setDataBox(n.dataBox||[-10,-10/d,10,10/d]);this.borderColor=!1!==n.borderColor?(n.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(n.backgroundColor||[0,0,0,0]).slice();this.gridLineEnable=(n.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=
(n.gridLineWidth||[1,1]).slice();this.gridLineColor=h(n.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(n.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(n.zeroLineWidth||[4,4]).slice();this.zeroLineColor=h(n.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(n.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(n.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=h(n.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(n.titleCenter||[.5*
(c[0]+c[2])/f,(c[3]+120)/f]).slice();this.titleEnable=!("titleEnable"in n)||!!n.titleEnable;this.titleAngle=n.titleAngle||0;this.titleColor=(n.titleColor||[0,0,0,1]).slice();this.labelPad=(n.labelPad||[15,15,15,15]).slice();this.labelAngle=(n.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(n.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=h(n.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.tickPad=(n.tickPad||[15,15,15,15]).slice();this.tickAngle=(n.tickAngle||[0,
0,0,0]).slice();this.tickEnable=(n.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=h(n.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(n.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(n.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=h(n.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);f=n.ticks||[[],[]];c=this._tickBounds;c[0]=c[1]=Infinity;c[2]=c[3]=-Infinity;for(d=0;2>d;++d){var q=f[d].slice(0);0!==q.length&&(q.sort(l),c[d]=Math.min(c[d],
q[0].x),c[d+2]=Math.max(c[d+2],q[q.length-1].x))}this.grid.update({bounds:c,ticks:f});this.text.update({bounds:c,ticks:f,labels:n.labels||["x","y"],labelSize:n.labelSize||[12,12],labelFont:n.labelFont||["sans-serif","sans-serif"],title:n.title||"",titleSize:n.titleSize||18,titleFont:n.titleFont||"sans-serif"});this.static=!!n.static;this.setDirty()};b.dispose=function(){this.box.dispose();this.grid.dispose();this.text.dispose();this.line.dispose();for(var n=this.objects.length-1;0<=n;--n)this.objects[n].dispose();
this.objects.length=0;for(n=this.overlays.length-1;0<=n;--n)this.overlays[n].dispose();this.overlays.length=0;this.gl=null};b.addObject=function(n){0>this.objects.indexOf(n)&&(this.objects.push(n),this.setDirty())};b.removeObject=function(n){for(var c=this.objects,f=0;f<c.length;++f)if(c[f]===n){c.splice(f,1);this.setDirty();break}};b.addOverlay=function(n){0>this.overlays.indexOf(n)&&(this.overlays.push(n),this.setOverlayDirty())};b.removeOverlay=function(n){for(var c=this.overlays,f=0;f<c.length;++f)if(c[f]===
n){c.splice(f,1);this.setOverlayDirty();break}}},{"./lib/box":293,"./lib/grid":294,"./lib/line":295,"./lib/text":297,"gl-select-static":311}],299:[function(b,F,C){F.exports=function(k,p){k=k||document.body;p=p||{};var n=[.01,Infinity];"distanceLimits"in p&&(n[0]=p.distanceLimits[0],n[1]=p.distanceLimits[1]);"zoomMin"in p&&(n[0]=p.zoomMin);"zoomMax"in p&&(n[1]=p.zoomMax);var c=h({center:p.center||[0,0,0],up:p.up||[0,1,0],eye:p.eye||[0,0,10],mode:p.mode||"orbit",distanceLimits:n}),f=[0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0],d=0,q=k.clientWidth,r=k.clientHeight,u={keyBindingMode:"rotate",enableWheel:!0,view:c,element:k,delay:p.delay||16,rotateSpeed:p.rotateSpeed||1,zoomSpeed:p.zoomSpeed||1,translateSpeed:p.translateSpeed||1,flipX:!!p.flipX,flipY:!!p.flipY,modes:c.modes,_ortho:p._ortho||p.projection&&"orthographic"===p.projection.type||!1,tick:function(){var v=m(),w=this.delay,y=v-2*w;c.idle(v-w);c.recalcMatrix(y);c.flush(v-(100+2*w));v=!0;w=c.computedMatrix;for(y=0;16>y;++y)v=v&&f[y]===w[y],f[y]=w[y];
w=k.clientWidth===q&&k.clientHeight===r;q=k.clientWidth;r=k.clientHeight;if(v)return!w;d=Math.exp(c.computedRadius[0]);return!0},lookAt:function(v,w,y){c.lookAt(c.lastT(),v,w,y)},rotate:function(v,w,y){c.rotate(c.lastT(),v,w,y)},pan:function(v,w,y){c.pan(c.lastT(),v,w,y)},translate:function(v,w,y){c.translate(c.lastT(),v,w,y)}};Object.defineProperties(u,{matrix:{get:function(){return c.computedMatrix},set:function(v){c.setMatrix(c.lastT(),v);return c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},
set:function(v){var w=c.computedUp.slice(),y=c.computedEye.slice(),D=c.computedCenter.slice();c.setMode(v);"turntable"===v&&(v=m(),c._active.lookAt(v,y,D,w),c._active.lookAt(v+500,y,D,[0,0,1]),c._active.flush(v));return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(v){c.lookAt(c.lastT(),null,v);return c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(v){c.lookAt(c.lastT(),v);return c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},
set:function(v){c.lookAt(c.lastT(),null,null,v);return c.computedUp},enumerable:!0},distance:{get:function(){return d},set:function(v){c.setDistance(c.lastT(),v);return v},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(n)},set:function(v){c.setDistanceLimits(v);return v},enumerable:!0}});k.addEventListener("contextmenu",function(v){v.preventDefault();return!1});u._lastX=-1;u._lastY=-1;u._lastMods={shift:!1,control:!1,alt:!1,meta:!1};u.enableMouseListeners=function(){function v(w,
y,D,x){var E=u.keyBindingMode;if(!1!==E){var B="rotate"===E,t="pan"===E;E="zoom"===E;var G=!!x.control,I=!!x.alt,L=!!x.shift,M=!!(w&1),N=!!(w&2);w=!!(w&4);var H=1/k.clientHeight,J=H*(y-u._lastX),O=H*(D-u._lastY),Q=u.flipX?1:-1,U=u.flipY?1:-1,P=Math.PI*u.rotateSpeed;H=m();-1!==u._lastX&&-1!==u._lastY&&((B&&M&&!G&&!I&&!L||M&&!G&&!I&&L)&&c.rotate(H,Q*P*J,-U*P*O,0),(t&&M&&!G&&!I&&!L||N||M&&G&&!I&&!L)&&c.pan(H,-u.translateSpeed*J*d,u.translateSpeed*O*d,0),E&&M&&!G&&!I&&!L||w||M&&!G&&I&&!L)&&(B=-u.zoomSpeed*
O/window.innerHeight*(H-c.lastT())*100,c.pan(H,0,0,d*(Math.exp(B)-1)));u._lastX=y;u._lastY=D;u._lastMods=x;return!0}}u.mouseListener=l(k,v);k.addEventListener("touchstart",function(w){var y=a(w.changedTouches[0],k);v(0,y[0],y[1],u._lastMods);v(1,y[0],y[1],u._lastMods);w.preventDefault()},g?{passive:!1}:!1);k.addEventListener("touchmove",function(w){var y=a(w.changedTouches[0],k);v(1,y[0],y[1],u._lastMods);w.preventDefault()},g?{passive:!1}:!1);k.addEventListener("touchend",function(w){v(0,u._lastX,
u._lastY,u._lastMods);w.preventDefault()},g?{passive:!1}:!1);u.wheelListener=e(k,function(w,y){if(!1!==u.keyBindingMode&&u.enableWheel){var D=u.flipX?1:-1,x=u.flipY?1:-1,E=m();Math.abs(w)>Math.abs(y)?c.rotate(E,0,0,-w*D*Math.PI*u.rotateSpeed/window.innerWidth):u._ortho||(w=-u.zoomSpeed*x*y/window.innerHeight*(E-c.lastT())/20,c.pan(E,0,0,d*(Math.exp(w)-1)))}},!0)};u.enableMouseListeners();return u};var m=b("right-now"),h=b("3d-view"),l=b("mouse-change"),e=b("mouse-wheel"),a=b("mouse-event-offset"),
g=b("has-passive-events")},{"3d-view":54,"has-passive-events":415,"mouse-change":457,"mouse-event-offset":458,"mouse-wheel":460,"right-now":514}],300:[function(b,F,C){C=b("glslify");var m=b("gl-shader"),h=C(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv \x3d position;\n  gl_Position \x3d vec4(position, 0, 1);\n}"]),l=C(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum \x3d texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor \x3d min(vec4(1,1,1,1), accum);\n}"]);
F.exports=function(e){return m(e,h,l,null,[{name:"position",type:"vec2"}])}},{"gl-shader":312,glslify:413}],301:[function(b,F,C){function m(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function h(v,w){var y=null;try{(y=v.getContext("webgl",w))||(y=v.getContext("experimental-webgl",w))}catch(D){return null}return y}function l(v){return"boolean"===typeof v?v:!0}var e=b("./camera.js"),a=b("gl-axes3d"),g=b("gl-axes3d/properties"),
k=b("gl-spikes3d"),p=b("gl-select-static"),n=b("gl-fbo"),c=b("a-big-triangle"),f=b("mouse-change"),d=b("gl-mat4/perspective"),q=b("gl-mat4/ortho"),r=b("./lib/shader"),u=b("is-mobile")({tablet:!0,featureDetect:!0});F.exports={createScene:function(v){function w(){if(!fa._stopped&&fa.autoResize){var ra=B.parentNode;if(ra&&ra!==document.body){var ta=ra.clientWidth;ra=ra.clientHeight}else ta=window.innerWidth,ra=window.innerHeight;var oa=Math.ceil(ta*fa.pixelRatio)|0,ua=Math.ceil(ra*fa.pixelRatio)|0;if(oa!==
B.width||ua!==B.height)B.width=oa,B.height=ua,oa=B.style,oa.position=oa.position||"absolute",oa.left="0px",oa.top="0px",oa.width=ta+"px",oa.height=ra+"px",ba=!0}}function y(){for(var ra=U.length,ta=Y.length,oa=0;oa<ta;++oa)V[oa]=0;oa=0;a:for(;oa<ra;++oa){var ua=U[oa],ka=ua.pickSlots;if(ka){for(var sa=0;sa<ta;++sa)if(255>V[sa]+ka){P[oa]=sa;ua.setPickBase(V[sa]+1);V[sa]+=ka;continue a}sa=p(t,ia);P[oa]=ta;Y.push(sa);V.push(ka);ua.setPickBase(1);ta+=1}else P[oa]=-1}for(;0<ta&&0===V[ta-1];)V.pop(),Y.pop().dispose()}
function D(){if(fa.contextLost)return!0;if(t.isContextLost()&&(fa.contextLost=!0,fa.mouseListener.enabled=!1,fa.selection.object=null,fa.oncontextloss))fa.oncontextloss()}function x(){if(!D()){w();var ra=fa.camera.tick();ca.view=fa.camera.matrix;ba=ba||ra;ea=ea||ra;O.pixelRatio=fa.pixelRatio;Q.pixelRatio=fa.pixelRatio;ra=U.length;var ta=na[0],oa=na[1];ta[0]=ta[1]=ta[2]=Infinity;oa[0]=oa[1]=oa[2]=-Infinity;for(var ua=0;ua<ra;++ua){var ka=U[ua];ka.pixelRatio=fa.pixelRatio;ka.axes=fa.axes;ba=ba||!!ka.dirty;
ea=ea||!!ka.dirty;if(ka=ka.bounds){var sa=ka[0],ya=ka[1];for(ka=0;3>ka;++ka)ta[ka]=Math.min(ta[ka],sa[ka]),oa[ka]=Math.max(oa[ka],ya[ka])}}sa=fa.bounds;if(fa.autoBounds)for(ka=0;3>ka;++ka)oa[ka]<ta[ka]?(ta[ka]=-1,oa[ka]=1):(ta[ka]===oa[ka]&&(--ta[ka],oa[ka]+=1),ua=.05*(oa[ka]-ta[ka]),ta[ka]-=ua,oa[ka]+=ua),sa[0][ka]=ta[ka],sa[1][ka]=oa[ka];ta=!1;for(ka=0;3>ka;++ka)ta=ta||pa[0][ka]!==sa[0][ka]||pa[1][ka]!==sa[1][ka],pa[0][ka]=sa[0][ka],pa[1][ka]=sa[1][ka];ea=ea||ta;if(ba=ba||ta){if(ta){ta=[0,0,0];
for(ua=0;3>ua;++ua)oa=ua,ka=(sa[1][ua]-sa[0][ua])/10,ya=Math.round(Math.log(Math.abs(ka))/Math.log(10)),0>ya?(ya=Math.round(Math.pow(10,-ya)),ka=Math.ceil(ka*ya)/ya):0<ya?(ya=Math.round(Math.pow(10,ya)),ka=Math.ceil(ka/ya)*ya):ka=Math.ceil(ka),ta[oa]=ka;O.autoTicks?O.update({bounds:sa,tickSpacing:ta}):O.update({bounds:sa})}ta=t.drawingBufferWidth;oa=t.drawingBufferHeight;ia[0]=ta;ia[1]=oa;ha[0]=Math.max(ta/fa.pixelRatio,1)|0;ha[1]=Math.max(oa/fa.pixelRatio,1)|0;ua=fa;ka=ua.bounds;var qa=ua.cameraParams,
xa=qa.projection;ya=qa.model;var Ca=ua.zNear,Ja=ua.zFar,eb=ua.fovy,Ra=ua.gl.drawingBufferWidth/ua.gl.drawingBufferHeight;N?(q(xa,-Ra,Ra,-1,1,Ca,Ja),qa._ortho=!0):(d(xa,eb,Ra,Ca,Ja),qa._ortho=!1);for(qa=0;16>qa;++qa)ya[qa]=0;ya[15]=1;for(qa=xa=0;3>qa;++qa)xa=Math.max(xa,ka[1][qa]-ka[0][qa]);for(qa=0;3>qa;++qa)ya[5*qa]=ua.autoScale?ua.aspect[qa]/(ka[1][qa]-ka[0][qa]):1/xa,ua.autoCenter&&(ya[12+qa]=.5*-ya[5*qa]*(ka[0][qa]+ka[1][qa]));for(ua=0;ua<ra;++ua)ka=U[ua],ka.axesBounds=sa,fa.clipToBounds&&(ka.clipBounds=
sa);I.object&&(Q.position=fa.snapToData?I.dataCoordinate:I.dataPosition,Q.bounds=sa);if(ea&&(ea=!1,!D()))for(t.colorMask(!0,!0,!0,!0),t.depthMask(!0),t.disable(t.BLEND),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),sa=U.length,ua=Y.length,ka=0;ka<ua;++ka){ya=Y[ka];ya.shape=ha;ya.begin();for(qa=0;qa<sa;++qa)P[qa]===ka&&(xa=U[qa],xa.drawPick&&(xa.pixelRatio=1,xa.drawPick(ca)));ya.end()}fa.axesPixels=g(fa.axes,ca,ta,oa);if(fa.onrender)fa.onrender();t.bindFramebuffer(t.FRAMEBUFFER,null);t.viewport(0,0,
ta,oa);fa.clearRGBA();t.depthMask(!0);t.colorMask(!0,!0,!0,!0);t.enable(t.DEPTH_TEST);t.depthFunc(t.LEQUAL);t.disable(t.BLEND);t.disable(t.CULL_FACE);sa=!1;O.enable&&(sa=sa||O.isTransparent(),O.draw(ca));Q.axes=O;I.object&&Q.draw(ca);t.disable(t.CULL_FACE);for(ua=0;ua<ra;++ua)ka=U[ua],ka.axes=O,ka.pixelRatio=fa.pixelRatio,ka.isOpaque&&ka.isOpaque()&&ka.draw(ca),ka.isTransparent&&ka.isTransparent()&&(sa=!0);if(sa){L.shape=ia;L.bind();t.clear(t.DEPTH_BUFFER_BIT);t.colorMask(!1,!1,!1,!1);t.depthMask(!0);
t.depthFunc(t.LESS);O.enable&&O.isTransparent()&&O.drawTransparent(ca);for(ua=0;ua<ra;++ua)ka=U[ua],ka.isOpaque&&ka.isOpaque()&&ka.draw(ca);t.enable(t.BLEND);t.blendEquation(t.FUNC_ADD);t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA);t.colorMask(!0,!0,!0,!0);t.depthMask(!1);t.clearColor(0,0,0,0);t.clear(t.COLOR_BUFFER_BIT);O.isTransparent()&&O.drawTransparent(ca);for(ua=0;ua<ra;++ua)ka=U[ua],ka.isTransparent&&ka.isTransparent()&&ka.drawTransparent(ca);t.bindFramebuffer(t.FRAMEBUFFER,null);t.blendFunc(t.ONE,
t.ONE_MINUS_SRC_ALPHA);t.disable(t.DEPTH_TEST);M.bind();L.color[0].bind(0);M.uniforms.accumBuffer=0;c(t);t.disable(t.BLEND)}ba=!1;for(ua=0;ua<ra;++ua)U[ua].dirty=!1}}}function E(){fa._stopped||fa.contextLost||(x(),requestAnimationFrame(E))}v=v||{};v.camera=v.camera||{};var B=v.canvas;B||(B=document.createElement("canvas"),v.container?v.container.appendChild(B):document.body.appendChild(B));var t=v.gl;t||(v.glOptions&&(u=!!v.glOptions.preserveDrawingBuffer),t=h(B,v.glOptions||{premultipliedAlpha:!0,
antialias:!0,preserveDrawingBuffer:u}));if(!t)throw Error("webgl not supported");var G=v.bounds||[[-10,-10,-10],[10,10,10]],I=new m,L=n(t,t.drawingBufferWidth,t.drawingBufferHeight,{preferFloat:!u}),M=r(t),N=v.cameraObject&&!0===v.cameraObject._ortho||v.camera.projection&&"orthographic"===v.camera.projection.type||!1,H={eye:v.camera.eye||[2,0,0],center:v.camera.center||[0,0,0],up:v.camera.up||[0,1,0],zoomMin:v.camera.zoomMax||.1,zoomMax:v.camera.zoomMin||100,mode:v.camera.mode||"turntable",_ortho:N},
J=v.axes||{},O=a(t,J);O.enable=!J.disable;var Q=k(t,v.spikes||{}),U=[],P=[],V=[],Y=[],ba=!0,ea=!0,ca={view:null,projection:Array(16),model:Array(16),_ortho:!1};ea=!0;var ia=[t.drawingBufferWidth,t.drawingBufferHeight];H=v.cameraObject||e(B,H);var fa={gl:t,contextLost:!1,pixelRatio:v.pixelRatio||1,canvas:B,selection:I,camera:H,axes:O,axesPixels:null,spikes:Q,bounds:G,objects:U,shape:ia,aspect:v.aspectRatio||[1,1,1],pickRadius:v.pickRadius||10,zNear:v.zNear||.01,zFar:v.zFar||1E3,fovy:v.fovy||Math.PI/
4,clearColor:v.clearColor||[0,0,0,0],autoResize:l(v.autoResize),autoBounds:l(v.autoBounds),autoScale:!!v.autoScale,autoCenter:l(v.autoCenter),clipToBounds:l(v.clipToBounds),snapToData:!!v.snapToData,onselect:v.onselect||null,onrender:v.onrender||null,onclick:v.onclick||null,cameraParams:ca,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ra){this.aspect[0]=ra.x;this.aspect[1]=ra.y;this.aspect[2]=
ra.z;ea=!0},setBounds:function(ra,ta){this.bounds[0][ra]=ta.min;this.bounds[1][ra]=ta.max},setClearColor:function(ra){this.clearColor=ra},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ha=[t.drawingBufferWidth/fa.pixelRatio|0,t.drawingBufferHeight/fa.pixelRatio|0];fa.autoResize&&w();window.addEventListener("resize",w);fa.update=function(ra){fa._stopped||(ea=ba=!0)};
fa.add=function(ra){fa._stopped||(ra.axes=O,U.push(ra),P.push(-1),ea=ba=!0,y())};fa.remove=function(ra){fa._stopped||(ra=U.indexOf(ra),0>ra||(U.splice(ra,1),P.pop(),ea=ba=!0,y()))};fa.dispose=function(){if(!fa._stopped&&(fa._stopped=!0,window.removeEventListener("resize",w),B.removeEventListener("webglcontextlost",D),fa.mouseListener.enabled=!1,!fa.contextLost)){O.dispose();Q.dispose();for(var ra=0;ra<U.length;++ra)U[ra].dispose();L.dispose();for(ra=0;ra<Y.length;++ra)Y[ra].dispose();M.dispose();
Q=O=t=null;U=[]}};fa._mouseRotating=!1;fa._prevButtons=0;fa.enableMouseListeners=function(){fa.mouseListener=f(B,function(ra,ta,oa){if(!fa._stopped){var ua=Y.length,ka=U.length,sa=I.object;I.distance=Infinity;I.mouse[0]=ta;I.mouse[1]=oa;I.object=null;I.screen=null;I.dataCoordinate=I.dataPosition=null;var ya=!1;if(ra&&fa._prevButtons)fa._mouseRotating=!0;else{fa._mouseRotating&&(ea=!0);fa._mouseRotating=!1;for(var qa=0;qa<ua;++qa){var xa=Y[qa].query(ta,ha[1]-oa-1,fa.pickRadius);if(xa&&!(xa.distance>
I.distance))for(var Ca=0;Ca<ka;++Ca){var Ja=U[Ca];if(P[Ca]===qa){var eb=Ja.pick(xa);eb&&(I.buttons=ra,I.screen=xa.coord,I.distance=xa.distance,I.object=Ja,I.index=eb.distance,I.dataPosition=eb.position,I.dataCoordinate=eb.dataCoordinate,I.data=eb,ya=!0)}}}}sa&&sa!==I.object&&(sa.highlight&&sa.highlight(null),ba=!0);I.object&&(I.object.highlight&&I.object.highlight(I.data),ba=!0);if((ya=ya||I.object!==sa)&&fa.onselect)fa.onselect(I);if(ra&1&&!(fa._prevButtons&1)&&fa.onclick)fa.onclick(I);fa._prevButtons=
ra}})};B.addEventListener("webglcontextlost",D);var na=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],pa=[na[0].slice(),na[1].slice()];fa.enableMouseListeners();E();fa.redraw=function(){fa._stopped||(ba=!0,x())};return fa},createCamera:e}},{"./camera.js":299,"./lib/shader":300,"a-big-triangle":64,"gl-axes3d":250,"gl-axes3d/properties":257,"gl-fbo":266,"gl-mat4/ortho":281,"gl-mat4/perspective":282,"gl-select-static":311,"gl-spikes3d":321,"is-mobile":441,"mouse-change":457}],302:[function(b,
F,C){b=b("glslify");C.pointVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a \x3d 12.9898;\n  highp float b \x3d 78.233;\n  highp float c \x3d 43758.5453;\n  highp float d \x3d dot(co.xy, vec2(a, b));\n  highp float e \x3d mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize \x3d pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *\x3d 0.886;\n  }\n}"]);
C.pointFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    if(centerFraction \x3d\x3d 1.0) {\n      gl_FragColor \x3d color;\n    } else {\n      gl_FragColor \x3d mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius \x3e 1.0) {\n      discard;\n    }\n    baseColor \x3d mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor \x3d vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
C.pickVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize \x3d pointSize;\n\n  vec4 id \x3d pickId + pickOffset;\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  fragId \x3d id;\n}\n"]);
C.pickFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius \x3e 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d fragId / 255.0;\n}\n"])},{glslify:413}],303:[function(b,F,C){function m(g,k,p,n,c){this.plot=g;this.offsetBuffer=k;this.pickBuffer=p;this.shader=n;this.pickShader=c;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=
[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var h=b("gl-shader"),l=b("gl-buffer"),e=b("typedarray-pool"),a=b("./lib/shader");F.exports=function(g,k){var p=g.gl,n=l(p),c=l(p),f=h(p,a.pointVertex,a.pointFragment);p=h(p,a.pickVertex,a.pickFragment);n=new m(g,n,c,f,p);n.update(k);g.addObject(n);return n};b=m.prototype;b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};b.update=function(g){function k(u,
v){return u in g?g[u]:v}var p;g=g||{};this.sizeMin=k("sizeMin",.5);this.sizeMax=k("sizeMax",20);this.color=k("color",[1,0,0,1]).slice();this.areaRatio=k("areaRatio",1);this.borderColor=k("borderColor",[0,0,0,1]).slice();this.blend=k("blend",!1);var n=g.positions.length>>>1,c=g.positions instanceof Float32Array,f=g.idToIndex instanceof Int32Array&&g.idToIndex.length>=n,d=g.positions,q=c?d:e.mallocFloat32(d.length),r=f?g.idToIndex:e.mallocInt32(n);c||q.set(d);if(!f)for(q.set(d),p=0;p<n;p++)r[p]=p;this.points=
d;this.offsetBuffer.update(q);this.pickBuffer.update(r);c||e.free(q);f||e.free(r);this.pointCount=n;this.pickOffset=0};b.unifiedDraw=function(){var g=[1,0,0,0,1,0,0,0,1],k=[0,0,0,0];return function(p){var n=void 0!==p,c=n?this.pickShader:this.shader,f=this.plot.gl,d=this.plot.dataBox;if(0===this.pointCount)return p;var q=d[2]-d[0],r=d[3]-d[1],u=this.points,v=0,w=u.length>>>1,y;for(y=0;y<w;y++){var D=u[2*y],x=u[2*y+1];D>=d[0]&&D<=d[2]&&x>=d[1]&&x<=d[3]&&v++}u=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,
this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(v,.33333)));g[0]=2/q;g[4]=2/r;g[6]=-2*d[0]/q-1;g[7]=-2*d[1]/r-1;this.offsetBuffer.bind();c.bind();c.attributes.position.pointer();c.uniforms.matrix=g;c.uniforms.color=this.color;c.uniforms.borderColor=this.borderColor;c.uniforms.pointCloud=5>u;c.uniforms.pointSize=u;c.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));n&&(k[0]=p&255,k[1]=p>>8&255,k[2]=p>>16&255,k[3]=p>>24&255,this.pickBuffer.bind(),c.attributes.pickId.pointer(f.UNSIGNED_BYTE),
c.uniforms.pickOffset=k,this.pickOffset=p);n=f.getParameter(f.BLEND);c=f.getParameter(f.DITHER);n&&!this.blend&&f.disable(f.BLEND);c&&f.disable(f.DITHER);f.drawArrays(f.POINTS,0,this.pointCount);n&&!this.blend&&f.enable(f.BLEND);c&&f.enable(f.DITHER);return p+this.pointCount}}();b.draw=b.unifiedDraw;b.drawPick=b.unifiedDraw;b.pick=function(g,k,p){g=this.pickOffset;k=this.pointCount;if(p<g||p>=g+k)return null;p-=g;g=this.points;return{object:this,pointId:p,dataCoord:[g[2*p],g[2*p+1]]}}},{"./lib/shader":302,
"gl-buffer":258,"gl-shader":312,"typedarray-pool":567}],304:[function(b,F,C){F.exports=function(m,h,l,e){var a=h[0],g=h[1],k=h[2];h=h[3];var p=l[0],n=l[1],c=l[2];l=l[3];var f=a*p+g*n+k*c+h*l;0>f&&(f=-f,p=-p,n=-n,c=-c,l=-l);if(1E-6<1-f){var d=Math.acos(f);var q=Math.sin(d);f=Math.sin((1-e)*d)/q;e=Math.sin(e*d)/q}else f=1-e;m[0]=f*a+e*p;m[1]=f*g+e*n;m[2]=f*k+e*c;m[3]=f*h+e*l;return m}},{}],305:[function(b,F,C){F.exports=function(m){return m||0===m?m.toString():""}},{}],306:[function(b,F,C){var m=b("vectorize-text");
F.exports=function(l,e,a){var g=h[e];g||(g=h[e]={});if(l in g)return g[l];var k={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};e=m(l,k);k.triangles=!1;k=m(l,k);var p,n;if(a&&1!==a){for(p=0;p<e.positions.length;++p)for(n=0;n<e.positions[p].length;++n)e.positions[p][n]/=a;for(p=0;p<k.positions.length;++p)for(n=0;n<k.positions[p].length;++n)k.positions[p][n]/=a}a=[[Infinity,Infinity],
[-Infinity,-Infinity]];var c=k.positions.length;for(p=0;p<c;++p){var f=k.positions[p];for(n=0;2>n;++n)a[0][n]=Math.min(a[0][n],f[n]),a[1][n]=Math.max(a[1][n],f[n])}return g[l]=[e,k,a]};var h={}},{"vectorize-text":572}],307:[function(b,F,C){function m(q,r){q=h(q,r);r=q.attributes;r.position.location=0;r.color.location=1;r.glyph.location=2;r.id.location=3;return q}var h=b("gl-shader"),l=b("glslify");b=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d 1.0;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      scale \x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1);\n    vec4 viewPosition \x3d view * worldPosition;\n    viewPosition \x3d viewPosition / viewPosition.w;\n    vec4 clipPosition \x3d projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
F=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) \x3c 0.001) {\n      scale *\x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1.0);\n    vec4 viewPosition \x3d view * worldPosition;\n    vec4 clipPosition \x3d projection * viewPosition;\n    clipPosition /\x3d clipPosition.w;\n\n    gl_Position \x3d clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
var e=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float lscale \x3d pixelRatio * scale;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      lscale *\x3d highlightScale;\n    }\n\n    vec4 clipCenter   \x3d projection * view * model * vec4(position, 1);\n    vec3 dataPosition \x3d position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition \x3d projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d dataPosition;\n  }\n}\n"]),
a=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity \x3d\x3d 0.\n  ) discard;\n  gl_FragColor \x3d interpColor * opacity;\n}\n"]);
l=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor \x3d vec4(pickGroup, pickId.bgr);\n}"]);
var g=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],k={vertex:b,fragment:a,attributes:g},p={vertex:F,fragment:a,attributes:g},n={vertex:e,fragment:a,attributes:g},c={vertex:b,fragment:l,attributes:g},f={vertex:F,fragment:l,attributes:g},d={vertex:e,fragment:l,attributes:g};C.createPerspective=function(q){return m(q,k)};C.createOrtho=function(q){return m(q,p)};C.createProject=function(q){return m(q,n)};C.createPickPerspective=function(q){return m(q,
c)};C.createPickOrtho=function(q){return m(q,f)};C.createPickProject=function(q){return m(q,d)}},{"gl-shader":312,glslify:413}],308:[function(b,F,C){function m(H,J){var O=H[0],Q=H[1],U=H[2],P=H[3];H[0]=J[0]*O+J[4]*Q+J[8]*U+J[12]*P;H[1]=J[1]*O+J[5]*Q+J[9]*U+J[13]*P;H[2]=J[2]*O+J[6]*Q+J[10]*U+J[14]*P;H[3]=J[3]*O+J[7]*Q+J[11]*U+J[15]*P;return H}function h(H,J,O,Q){m(Q,Q,O);m(Q,Q,J);return m(Q,Q,H)}function l(H,J){this.index=H;this.dataCoordinate=this.position=J}function e(H){return!0===H||1<H?1:H}function a(H,
J,O,Q,U,P,V,Y,ba,ea,ca,ia){this.gl=H;this.pixelRatio=1;this.shader=J;this.orthoShader=O;this.projectShader=Q;this.pointBuffer=U;this.colorBuffer=P;this.glyphBuffer=V;this.idBuffer=Y;this.vao=ba;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=ea;this.pickOrthoShader=ca;this.pickProjectShader=ia;this.points=[];this._selectResult=new l(0,
[0,0,0]);this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function g(H){H[0]=H[1]=H[2]=0;return H}function k(H,J){H[0]=J[0];H[1]=J[1];H[2]=J[2];H[3]=1;return H}function p(H,J,O,Q){H[0]=J[0];H[1]=J[1];H[2]=J[2];
H[O]=Q;return H}function n(H,J,O,Q,U,P,V){var Y=O.gl;if(P===O.projectHasAlpha||V){for(var ba=O.axesProject,ea=O.gl,ca=J.uniforms,ia=Q.model||D,fa=Q.view||D,ha=Q.projection||D,na=O.axesBounds,pa=O.clipBounds,ra=M,ta=0;2>ta;++ta)for(var oa=0;3>oa;++oa)ra[ta][oa]=Math.max(Math.min(pa[ta][oa],1E8),-1E8);pa=O.axes&&O.axes.lastCubeProps?O.axes.lastCubeProps.axis:[1,1,1];x[0]=2/ea.drawingBufferWidth;x[1]=2/ea.drawingBufferHeight;J.bind();ca.view=fa;ca.projection=ha;ca.screenSize=x;ca.highlightId=O.highlightId;
ca.highlightScale=O.highlightScale;ca.clipBounds=ra;ca.pickGroup=O.pickId/255;ca.pixelRatio=U;for(J=0;3>J;++J)if(ba[J]){ca.scale=O.projectScale[J];ca.opacity=O.projectOpacity[J];ta=I;for(var ua=0;16>ua;++ua)ta[ua]=0;for(ua=0;4>ua;++ua)ta[5*ua]=1;ta[5*J]=0;ta[12+J]=0>pa[J]?na[0][J]:na[1][J];u(ta,ia,ta);ca.model=ta;ta=(J+1)%3;oa=(J+2)%3;var ka=g(E),sa=g(B);ka[ta]=1;sa[oa]=1;ua=h(ha,fa,ia,k(t,ka));var ya=h(ha,fa,ia,k(G,sa));if(Math.abs(ua[1])>Math.abs(ya[1])){var qa=ua;ua=ya;ya=qa;qa=ka;ka=sa;sa=qa;
qa=ta;ta=oa;oa=qa}0>ua[0]&&(ka[ta]=-1);0<ya[1]&&(sa[oa]=-1);for(ua=qa=ya=0;4>ua;++ua)ya+=Math.pow(ia[4*ta+ua],2),qa+=Math.pow(ia[4*oa+ua],2);ka[ta]/=Math.sqrt(ya);sa[oa]/=Math.sqrt(qa);ca.axes[0]=ka;ca.axes[1]=sa;ca.fragClipBounds[0]=p(L,ra[0],J,-1E8);ca.fragClipBounds[1]=p(L,ra[1],J,1E8);O.vao.bind();O.vao.draw(ea.TRIANGLES,O.vertexCount);0<O.lineWidth&&(ea.lineWidth(O.lineWidth*U),O.vao.draw(ea.LINES,O.lineVertexCount,O.vertexCount));O.vao.unbind()}}if(P===O.hasAlpha||V)H.bind(),H=H.uniforms,H.model=
Q.model||D,H.view=Q.view||D,H.projection=Q.projection||D,x[0]=2/Y.drawingBufferWidth,x[1]=2/Y.drawingBufferHeight,H.screenSize=x,H.highlightId=O.highlightId,H.highlightScale=O.highlightScale,H.fragClipBounds=N,H.clipBounds=O.axes.bounds,H.opacity=O.opacity,H.pickGroup=O.pickId/255,H.pixelRatio=U,O.vao.bind(),O.vao.draw(Y.TRIANGLES,O.vertexCount),0<O.lineWidth&&(Y.lineWidth(O.lineWidth*U),O.vao.draw(Y.LINES,O.lineVertexCount,O.vertexCount)),O.vao.unbind()}function c(H,J,O,Q){J=Array.isArray(H)?J<H.length?
H[J]:void 0:H;J=y(J);H=!0;f(J)&&(J="",H=!1);O=w(J,O,Q);return{mesh:O[0],lines:O[1],bounds:O[2],visible:H}}var f=b("is-string-blank"),d=b("gl-buffer"),q=b("gl-vao"),r=b("typedarray-pool"),u=b("gl-mat4/multiply"),v=b("./lib/shaders"),w=b("./lib/glyphs"),y=b("./lib/get-simple-string"),D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];F.exports=function(H){var J=H.gl,O=v.createPerspective(J),Q=v.createOrtho(J),U=v.createProject(J),P=v.createPickPerspective(J),V=v.createPickOrtho(J),Y=v.createPickProject(J),ba=d(J),
ea=d(J),ca=d(J),ia=d(J),fa=q(J,[{buffer:ba,size:3,type:J.FLOAT},{buffer:ea,size:4,type:J.FLOAT},{buffer:ca,size:2,type:J.FLOAT},{buffer:ia,size:4,type:J.UNSIGNED_BYTE,normalized:!0}]);J=new a(J,O,Q,U,ba,ea,ca,ia,fa,P,V,Y);J.update(H);return J};b=a.prototype;b.pickSlots=1;b.setPickBase=function(H){this.pickId=H};b.isTransparent=function(){if(this.hasAlpha)return!0;for(var H=0;3>H;++H)if(this.axesProject[H]&&this.projectHasAlpha)return!0;return!1};b.isOpaque=function(){if(!this.hasAlpha)return!0;for(var H=
0;3>H;++H)if(this.axesProject[H]&&!this.projectHasAlpha)return!0;return!1};var x=[0,0],E=[0,0,0],B=[0,0,0],t=[0,0,0,1],G=[0,0,0,1],I=D.slice(),L=[0,0,0],M=[[0,0,0],[0,0,0]],N=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];b.draw=function(H){n(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!1,!1)};b.drawTransparent=function(H){n(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!0,!1)};b.drawPick=function(H){n(this.useOrtho?this.pickOrthoShader:
this.pickPerspectiveShader,this.pickProjectShader,this,H,1,!0,!0)};b.pick=function(H){if(!H||H.id!==this.pickId)return null;var J=H.value[2]+(H.value[1]<<8)+(H.value[0]<<16);if(J>=this.pointCount||0>J)return null;H=this.points[J];var O=this._selectResult;O.index=J;for(J=0;3>J;++J)O.position[J]=O.dataCoordinate[J]=H[J];return O};b.highlight=function(H){H?(H=H.index,this.highlightId=[(H&255)/255,(H>>8&255)/255,(H>>16&255)/255,0]):this.highlightId=[1,1,1,1]};b.update=function(H){H=H||{};"perspective"in
H&&(this.useOrtho=!H.perspective);"orthographic"in H&&(this.useOrtho=!!H.orthographic);"lineWidth"in H&&(this.lineWidth=H.lineWidth);if("project"in H)if(Array.isArray(H.project))this.axesProject=H.project;else{var J=!!H.project;this.axesProject=[J,J,J]}"projectScale"in H&&(Array.isArray(H.projectScale)?this.projectScale=H.projectScale.slice():(J=+H.projectScale,this.projectScale=[J,J,J]));this.projectHasAlpha=!1;if("projectOpacity"in H){Array.isArray(H.projectOpacity)?this.projectOpacity=H.projectOpacity.slice():
(J=+H.projectOpacity,this.projectOpacity=[J,J,J]);for(var O=0;3>O;++O)this.projectOpacity[O]=e(this.projectOpacity[O]),1>this.projectOpacity[O]&&(this.projectHasAlpha=!0)}this.hasAlpha=!1;"opacity"in H&&(this.opacity=e(H.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;J=H.position;var Q=H.font||"normal",U=H.alignment||[0,0];if(2===U.length){var P=U[0];var V=U[1]}else for(P=[],V=[],O=0;O<U.length;++O)P[O]=U[O][0],V[O]=U[O][1];U=[Infinity,Infinity,Infinity];var Y=[-Infinity,-Infinity,-Infinity],
ba=H.glyph,ea=H.color,ca=H.size,ia=H.angle;H=H.lineColor;var fa=-1,ha=0,na=0,pa=0;if(J.length)a:for(pa=J.length,O=0;O<pa;++O){for(var ra=J[O],ta=0;3>ta;++ta)if(isNaN(ra[ta])||!isFinite(ra[ta]))continue a;var oa=c(ba,O,Q,this.pixelRatio),ua=oa.mesh,ka=oa.lines;ha+=3*ua.cells.length;na+=2*ka.edges.length}O=ha+na;var sa=r.mallocFloat(3*O),ya=r.mallocFloat(4*O),qa=r.mallocFloat(2*O),xa=r.mallocUint32(O);if(0<O){var Ca=0,Ja=ha,eb=[0,0,0,1],Ra=[0,0,0,1],Wa=Array.isArray(ea)&&Array.isArray(ea[0]),Ea=Array.isArray(H)&&
Array.isArray(H[0]);O=0;a:for(;O<pa;++O){fa+=1;ra=J[O];for(ta=0;3>ta;++ta){if(isNaN(ra[ta])||!isFinite(ra[ta]))continue a;Y[ta]=Math.max(Y[ta],ra[ta]);U[ta]=Math.min(U[ta],ra[ta])}oa=c(ba,O,Q,this.pixelRatio);ua=oa.mesh;ka=oa.lines;var Ia=oa.bounds;var Qa=oa.visible;if(Qa)if(Array.isArray(ea))if(oa=Wa?O<ea.length?ea[O]:[0,0,0,0]:ea,3===oa.length){for(ta=0;3>ta;++ta)eb[ta]=oa[ta];eb[3]=1}else{if(4===oa.length){for(ta=0;4>ta;++ta)eb[ta]=oa[ta];!this.hasAlpha&&1>oa[3]&&(this.hasAlpha=!0)}}else eb[0]=
eb[1]=eb[2]=0,eb[3]=1;else eb=[1,1,1,0];if(Qa)if(Array.isArray(H))if(oa=Ea?O<H.length?H[O]:[0,0,0,0]:H,3===oa.length){for(ta=0;3>ta;++ta)Ra[ta]=oa[ta];Ra[ta]=1}else{if(4===oa.length){for(ta=0;4>ta;++ta)Ra[ta]=oa[ta];!this.hasAlpha&&1>oa[3]&&(this.hasAlpha=!0)}}else Ra[0]=Ra[1]=Ra[2]=0,Ra[3]=1;else Ra=[1,1,1,0];oa=.5;Qa?Array.isArray(ca)?oa=O<ca.length?+ca[O]:12:ca?oa=+ca:this.useOrtho&&(oa=12):oa=0;ra=0;Array.isArray(ia)?ra=O<ia.length?+ia[O]:0:ia&&(ra=+ia);Qa=Math.cos(ra);var lb=Math.sin(ra);ra=
J[O];for(ta=0;3>ta;++ta)Y[ta]=Math.max(Y[ta],ra[ta]),U[ta]=Math.min(U[ta],ra[ta]);ta=0;Array.isArray(P)?ta=O<P.length?P[O]:0:P&&(ta=P);var hb=0;Array.isArray(V)?hb=O<V.length?V[O]:0:V&&(hb=V);ta*=0<ta?1-Ia[0][0]:0>ta?1+Ia[1][0]:1;hb*=0<hb?1-Ia[0][1]:0>hb?1+Ia[1][1]:1;Ia=[ta,hb];hb=ua.cells||[];ua=ua.positions||[];for(ta=0;ta<hb.length;++ta)for(var Fa=hb[ta],La=0;3>La;++La){for(var Oa=0;3>Oa;++Oa)sa[3*Ca+Oa]=ra[Oa];for(Oa=0;4>Oa;++Oa)ya[4*Ca+Oa]=eb[Oa];xa[Ca]=fa;Oa=ua[Fa[La]];qa[2*Ca]=oa*(Qa*Oa[0]-
lb*Oa[1]+Ia[0]);qa[2*Ca+1]=oa*(lb*Oa[0]+Qa*Oa[1]+Ia[1]);Ca+=1}hb=ka.edges;ua=ka.positions;for(ta=0;ta<hb.length;++ta)for(Fa=hb[ta],La=0;2>La;++La){for(Oa=0;3>Oa;++Oa)sa[3*Ja+Oa]=ra[Oa];for(Oa=0;4>Oa;++Oa)ya[4*Ja+Oa]=Ra[Oa];xa[Ja]=fa;Oa=ua[Fa[La]];qa[2*Ja]=oa*(Qa*Oa[0]-lb*Oa[1]+Ia[0]);qa[2*Ja+1]=oa*(lb*Oa[0]+Qa*Oa[1]+Ia[1]);Ja+=1}}}this.bounds=[U,Y];this.points=J;this.pointCount=J.length;this.vertexCount=ha;this.lineVertexCount=na;this.pointBuffer.update(sa);this.colorBuffer.update(ya);this.glyphBuffer.update(qa);
this.idBuffer.update(xa);r.free(sa);r.free(ya);r.free(qa);r.free(xa)};b.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":305,"./lib/glyphs":306,"./lib/shaders":307,"gl-buffer":258,"gl-mat4/multiply":280,"gl-vao":332,"is-string-blank":444,"typedarray-pool":567}],
309:[function(b,F,C){b=b("glslify");C.boxVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position \x3d vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);C.boxFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor \x3d color;\n}\n"])},{glslify:413}],310:[function(b,F,C){function m(a,g,k){this.plot=a;this.boxBuffer=g;this.boxShader=k;this.enabled=!0;this.selectBox=
[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var h=b("gl-shader"),l=b("gl-buffer"),e=b("./lib/shaders");F.exports=function(a,g){var k=a.gl,p=l(k,[0,0,0,1,1,0,1,1]);k=h(k,e.boxVertex,e.boxFragment);p=new m(a,p,k);p.update(g);a.addOverlay(p);return p};b=m.prototype;b.draw=function(){if(this.enabled){var a=this.plot,g=this.selectBox,k=this.borderWidth,p=this.innerColor,
n=this.outerColor,c=this.borderColor,f=a.box,d=a.screenBox,q=a.dataBox,r=a.viewBox,u=a.pixelRatio;a=(g[0]-q[0])*(r[2]-r[0])/(q[2]-q[0])+r[0];var v=(g[1]-q[1])*(r[3]-r[1])/(q[3]-q[1])+r[1],w=(g[2]-q[0])*(r[2]-r[0])/(q[2]-q[0])+r[0];g=(g[3]-q[1])*(r[3]-r[1])/(q[3]-q[1])+r[1];a=Math.max(a,r[0]);v=Math.max(v,r[1]);w=Math.min(w,r[2]);g=Math.min(g,r[3]);w<a||g<v||(f.bind(),r=d[2]-d[0],d=d[3]-d[1],this.outerFill&&(f.drawBox(0,0,r,v,n),f.drawBox(0,v,a,g,n),f.drawBox(0,g,r,d,n),f.drawBox(w,v,r,g,n)),this.innerFill&&
f.drawBox(a,v,w,g,p),0<k&&(k*=u,f.drawBox(a-k,v-k,w+k,v+k,c),f.drawBox(a-k,g-k,w+k,g+k,c),f.drawBox(a-k,v-k,a+k,g+k,c),f.drawBox(w-k,v-k,w+k,g+k,c)))}};b.update=function(a){a=a||{};this.innerFill=!!a.innerFill;this.outerFill=!!a.outerFill;this.innerColor=(a.innerColor||[0,0,0,.5]).slice();this.outerColor=(a.outerColor||[0,0,0,.5]).slice();this.borderColor=(a.borderColor||[0,0,0,1]).slice();this.borderWidth=a.borderWidth||0;this.selectBox=(a.selectBox||this.selectBox).slice()};b.dispose=function(){this.boxBuffer.dispose();
this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":309,"gl-buffer":258,"gl-shader":312}],311:[function(b,F,C){function m(k,p,n,c,f){this.coord=[k,p];this.id=n;this.value=c;this.distance=f}function h(k,p,n){this.gl=k;this.fbo=p;this.buffer=n;this._readTimeout=null;var c=this;this._readCallback=function(){c.gl&&(p.bind(),k.readPixels(0,0,p.shape[0],p.shape[1],k.RGBA,k.UNSIGNED_BYTE,c.buffer),c._readTimeout=null)}}F.exports=function(k,p){var n=p[0],c=p[1];p=l(k,n,c,{});n=e.mallocUint8(n*
c*4);return new h(k,p,n)};var l=b("gl-fbo"),e=b("typedarray-pool"),a=b("ndarray"),g=b("bit-twiddle").nextPow2;b=h.prototype;Object.defineProperty(b,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(k){if(this.gl){this.fbo.shape=k;var p=this.fbo.shape[0],n=this.fbo.shape[1];if(n*p*4>this.buffer.length){e.free(this.buffer);for(var c=this.buffer=e.mallocUint8(g(n*p*4)),f=0;f<n*p*4;++f)c[f]=255}return k}}});b.begin=function(){var k=this.gl;k&&(this.fbo.bind(),k.clearColor(1,
1,1,1),k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT))};b.end=function(){var k=this.gl;k&&(k.bindFramebuffer(k.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};b.query=function(k,p,n){if(!this.gl)return null;var c=this.fbo.shape.slice();k|=0;p|=0;"number"!==typeof n&&(n=1);var f=Math.min(Math.max(k-n,0),c[0])|0,d=Math.min(Math.max(k+n,0),c[0])|0;k=Math.min(Math.max(p-n,0),c[1])|0;p=Math.min(Math.max(p+n,0),c[1])|0;if(d<=f||p<=
k)return null;p=[d-f,p-k];c=a(this.buffer,[p[0],p[1],4],[4,4*c[0],1],4*(f+c[0]*k));p=c.hi(p[0],p[1],1);d=n;for(var q=1E8,r=-1,u=-1,v=p.shape[0],w=p.shape[1],y=0;y<v;y++)for(var D=0;D<w;D++){var x=p.get(y,D,0),E=p.get(y,D,1),B=p.get(y,D,2),t=p.get(y,D,3);if(255>x||255>E||255>B||255>t)x=d-y,E=n-D,x=x*x+E*E,x<q&&(q=x,r=y,u=D)}p=[r,u,q];d=p[0];n=p[1];if(0>d||Math.pow(this.radius,2)<p[2])return null;q=c.get(d,n,0);r=c.get(d,n,1);u=c.get(d,n,2);c=c.get(d,n,3);return new m(d+f|0,n+k|0,q,[r,u,c],Math.sqrt(p[2]))};
b.dispose=function(){this.gl&&(this.fbo.dispose(),e.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":97,"gl-fbo":266,ndarray:469,"typedarray-pool":567}],312:[function(b,F,C){function m(n){this.gl=n;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function h(n,c){return n.name<c.name?-1:1}var l=b("./lib/create-uniforms"),e=b("./lib/create-attributes"),
a=b("./lib/reflect"),g=b("./lib/shader-cache"),k=b("./lib/runtime-reflect"),p=b("./lib/GLError");b=m.prototype;b.bind=function(){this.program||this._relink();var n,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),f=this.gl.lastAttribCount;if(c>f)for(n=f;n<c;n++)this.gl.enableVertexAttribArray(n);else if(f>c)for(n=c;n<f;n++)this.gl.disableVertexAttribArray(n);this.gl.lastAttribCount=c;this.gl.useProgram(this.program)};b.dispose=function(){for(var n=this.gl.lastAttribCount,c=0;c<
n;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};b.update=function(n,c,f,d){function q(){u.program=g.program(v,u._vref,u._fref,w,y);for(var I=0;I<f.length;++I)G[I]=v.getUniformLocation(u.program,f[I].name)}if(!c||1===arguments.length){var r=n;n=r.vertex;c=r.fragment;f=r.uniforms;d=r.attributes}var u=this,
v=u.gl;r=u._vref;u._vref=g.shader(v,v.VERTEX_SHADER,n);r&&r.dispose();u.vertShader=u._vref.shader;r=this._fref;u._fref=g.shader(v,v.FRAGMENT_SHADER,c);r&&r.dispose();u.fragShader=u._fref.shader;if(!f||!d){r=v.createProgram();v.attachShader(r,u.fragShader);v.attachShader(r,u.vertShader);v.linkProgram(r);if(!v.getProgramParameter(r,v.LINK_STATUS))throw r=v.getProgramInfoLog(r),new p(r,"Error linking program:"+r);f=f||k.uniforms(v,r);d=d||k.attributes(v,r);v.deleteProgram(r)}d=d.slice();d.sort(h);r=
[];var w=[],y=[],D;for(D=0;D<d.length;++D){var x=d[D];if(0<=x.type.indexOf("mat")){for(var E=x.type.charAt(x.type.length-1)|0,B=Array(E),t=0;t<E;++t)B[t]=y.length,w.push(x.name+"["+t+"]"),"number"===typeof x.location?y.push(x.location+t):Array.isArray(x.location)&&x.location.length===E&&"number"===typeof x.location[t]?y.push(x.location[t]|0):y.push(-1);r.push({name:x.name,type:x.type,locations:B})}else r.push({name:x.name,type:x.type,locations:[y.length]}),w.push(x.name),"number"===typeof x.location?
y.push(x.location|0):y.push(-1)}for(D=x=0;D<y.length;++D)if(0>y[D]){for(;0<=y.indexOf(x);)x+=1;y[D]=x}var G=Array(f.length);q();u._relink=q;u.types={uniforms:a(f),attributes:a(d)};u.attributes=e(v,u,r,y);Object.defineProperty(u,"uniforms",l(v,u,f,G))};F.exports=function(n,c,f,d,q){n=new m(n);n.update(c,f,d,q);return n}},{"./lib/GLError":313,"./lib/create-attributes":314,"./lib/create-uniforms":315,"./lib/reflect":316,"./lib/runtime-reflect":317,"./lib/shader-cache":318}],313:[function(b,F,C){function m(h,
l,e){this.shortMessage=l||"";this.longMessage=e||"";this.rawError=h||"";this.message="gl-shader: "+(l||h||"")+(e?"\n"+e:"");this.stack=Error().stack}m.prototype=Error();m.prototype.name="GLError";m.prototype.constructor=m;F.exports=m},{}],314:[function(b,F,C){function m(a,g,k,p,n,c){this._gl=a;this._wrapper=g;this._index=k;this._locations=p;this._dimension=n;this._constFunc=c}function h(a,g,k,p,n,c,f){for(var d=["gl","v"],q=[],r=0;r<n;++r)d.push("x"+r),q.push("x"+r);d.push("if(x0.length\x3d\x3d\x3dvoid 0){return gl.vertexAttrib"+
n+"f(v,"+q.join()+")}else{return gl.vertexAttrib"+n+"fv(v,x0)}");var u=Function.apply(null,d),v=new m(a,g,k,p,n,u);Object.defineProperty(c,f,{set:function(w){a.disableVertexAttribArray(p[k]);u(a,p[k],w);return w},get:function(){return v},enumerable:!0})}function l(a,g,k,p,n,c,f){for(var d=Array(n),q=Array(n),r=0;r<n;++r)h(a,g,k[r],p,n,d,r),q[r]=d[r];Object.defineProperty(d,"location",{set:function(w){if(Array.isArray(w))for(var y=0;y<n;++y)q[y].location=w[y];else for(y=0;y<n;++y)q[y].location=w+y;
return w},get:function(){for(var w=Array(n),y=0;y<n;++y)w[y]=p[k[y]];return w},enumerable:!0});d.pointer=function(w,y,D,x){w=w||a.FLOAT;y=!!y;D=D||n*n;x=x||0;for(var E=0;E<n;++E){var B=p[k[E]];a.vertexAttribPointer(B,n,w,y,D,x+E*n);a.enableVertexAttribArray(B)}};var u=Array(n),v=a["vertexAttrib"+n+"fv"];Object.defineProperty(c,f,{set:function(w){for(var y=0;y<n;++y){var D=p[k[y]];a.disableVertexAttribArray(D);if(Array.isArray(w[0]))v.call(a,D,w[y]);else{for(var x=0;x<n;++x)u[x]=w[n*y+x];v.call(a,
D,u)}}return w},get:function(){return d},enumerable:!0})}F.exports=function(a,g,k,p){for(var n={},c=0,f=k.length;c<f;++c){var d=k[c],q=d.name,r=d.type;d=d.locations;switch(r){case "bool":case "int":case "float":h(a,g,d[0],p,1,n,q);break;default:if(0<=r.indexOf("vec")){var u=r.charCodeAt(r.length-1)-48;if(2>u||4<u)throw new e("","Invalid data type for attribute "+q+": "+r);h(a,g,d[0],p,u,n,q)}else if(0<=r.indexOf("mat")){u=r.charCodeAt(r.length-1)-48;if(2>u||4<u)throw new e("","Invalid data type for attribute "+
q+": "+r);l(a,g,d,p,u,n,q)}else throw new e("","Unknown data type for attribute "+q+": "+r);}}return n};var e=b("./GLError");b=m.prototype;b.pointer=function(a,g,k,p){var n=this._gl,c=this._locations[this._index];n.vertexAttribPointer(c,this._dimension,a||n.FLOAT,!!g,k||0,p||0);n.enableVertexAttribArray(c)};b.set=function(a,g,k,p){return this._constFunc(this._locations[this._index],a,g,k,p)};Object.defineProperty(b,"location",{get:function(){return this._locations[this._index]},set:function(a){a!==
this._locations[this._index]&&(this._locations[this._index]=a|0,this._wrapper.program=null);return a|0}})},{"./GLError":313}],315:[function(b,F,C){function m(a){return(new Function("y","return function(){return y}"))(a)}function h(a,g){for(var k=Array(a),p=0;p<a;++p)k[p]=g;return k}var l=b("./reflect"),e=b("./GLError");F.exports=function(a,g,k,p){function n(v,w,y){switch(y){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+w+"],obj"+v+")";case "float":return"gl.uniform1f(locations["+
w+"],obj"+v+")";default:var D=y.indexOf("vec");if(0<=D&&1>=D&&y.length===4+D){D=y.charCodeAt(y.length-1)-48;if(2>D||4<D)throw new e("","Invalid data type");switch(y.charAt(0)){case "b":case "i":return"gl.uniform"+D+"iv(locations["+w+"],obj"+v+")";case "v":return"gl.uniform"+D+"fv(locations["+w+"],obj"+v+")";default:throw new e("","Unrecognized data type for vector "+name+": "+y);}}else{if(0===y.indexOf("mat")&&4===y.length){D=y.charCodeAt(y.length-1)-48;if(2>D||4<D)throw new e("","Invalid uniform dimension type for matrix "+
name+": "+y);return"gl.uniformMatrix"+D+"fv(locations["+w+"],false,obj"+v+")"}throw new e("","Unknown uniform data type for "+name+": "+y);}}}function c(v,w){if("object"!==typeof w)return[[v,w]];var y=[],D;for(D in w){var x=w[D],E=v;E=parseInt(D)+""===D?E+("["+D+"]"):E+("."+D);"object"===typeof x?y.push.apply(y,c(E,x)):y.push([E,x])}return y}function f(v){var w=["return function updateProperty(obj){"];v=c("",v);for(var y=0;y<v.length;++y){var D=v[y],x=D[0];D=D[1];p[D]&&w.push(n(x,D,k[D].type))}w.push("return obj}");
return(new Function("gl","locations",w.join("\n")))(a,p)}function d(v){switch(v){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;default:var w=v.indexOf("vec");if(0<=w&&1>=w&&v.length===4+w){w=v.charCodeAt(v.length-1)-48;if(2>w||4<w)throw new e("","Invalid data type");return"b"===v.charAt(0)?h(w,!1):h(w,0)}if(0===v.indexOf("mat")&&4===v.length){w=v.charCodeAt(v.length-1)-48;if(2>w||4<w)throw new e("","Invalid uniform dimension type for matrix "+name+
": "+v);return h(w*w,0)}throw new e("","Unknown uniform data type for "+name+": "+v);}}function q(v,w,y){if("object"===typeof y){var D=r(y);Object.defineProperty(v,w,{get:m(D),set:f(y),enumerable:!0,configurable:!1})}else p[y]?Object.defineProperty(v,w,{get:(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+y+"])}"))(a,g,p),set:f(y),enumerable:!0,configurable:!1}):v[w]=d(k[y].type)}function r(v){if(Array.isArray(v)){var w=Array(v.length);for(var y=
0;y<v.length;++y)q(w,y,v[y])}else for(y in w={},v)q(w,y,v[y]);return w}var u=l(k,!0);return{get:m(r(u)),set:f(u),enumerable:!0,configurable:!0}}},{"./GLError":313,"./reflect":316}],316:[function(b,F,C){F.exports=function(m,h){for(var l={},e=0;e<m.length;++e)for(var a=m[e].name.split("."),g=l,k=0;k<a.length;++k){var p=a[k].split("[");if(1<p.length){p[0]in g||(g[p[0]]=[]);g=g[p[0]];for(var n=1;n<p.length;++n){var c=parseInt(p[n]);n<p.length-1||k<a.length-1?(c in g||(g[c]=n<p.length-1?[]:{}),g=g[c]):
g[c]=h?e:m[e].type}}else k<a.length-1?(p[0]in g||(g[p[0]]={}),g=g[p[0]]):g[p[0]]=h?e:m[e].type}return l}},{}],317:[function(b,F,C){function m(e,a){if(!l){var g=Object.keys(h);l={};for(var k=0;k<g.length;++k){var p=g[k];l[e[p]]=h[p]}}return l[a]}C.uniforms=function(e,a){for(var g=e.getProgramParameter(a,e.ACTIVE_UNIFORMS),k=[],p=0;p<g;++p){var n=e.getActiveUniform(a,p);if(n){var c=m(e,n.type);if(1<n.size)for(var f=0;f<n.size;++f)k.push({name:n.name.replace("[0]","["+f+"]"),type:c});else k.push({name:n.name,
type:c})}}return k};C.attributes=function(e,a){for(var g=e.getProgramParameter(a,e.ACTIVE_ATTRIBUTES),k=[],p=0;p<g;++p){var n=e.getActiveAttrib(a,p);n&&k.push({name:n.name,type:m(e,n.type)})}return k};var h={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},
l=null},{}],318:[function(b,F,C){function m(p,n,c,f,d,q,r){this.id=p;this.src=n;this.type=c;this.shader=f;this.count=q;this.programs=[];this.cache=r}function h(p){this.gl=p;this.shaders=[{},{}];this.programs={}}function l(p){var n=g.get(p);n||(n=new h(p),g.set(p,n));return n}C.shader=function(p,n,c){return l(p).getShaderReference(n,c)};C.program=function(p,n,c,f,d){return l(p).getProgram(n,c,f,d)};var e=b("./GLError"),a=b("gl-format-compiler-error"),g=new ("undefined"===typeof WeakMap?b("weakmap-shim"):
WeakMap),k=0;m.prototype.dispose=function(){if(0===--this.count){for(var p=this.cache,n=p.gl,c=this.programs,f=0,d=c.length;f<d;++f){var q=p.programs[c[f]];q&&(delete p.programs[f],n.deleteProgram(q))}n.deleteShader(this.shader);delete p.shaders[this.type===n.FRAGMENT_SHADER|0][this.src]}};b=h.prototype;b.getShaderReference=function(p,n){var c=this.gl,f=this.shaders[p===c.FRAGMENT_SHADER|0],d=f[n];if(d&&c.isShader(d.shader))d.count+=1;else{d=c.createShader(p);c.shaderSource(d,n);c.compileShader(d);
if(!c.getShaderParameter(d,c.COMPILE_STATUS)){c=c.getShaderInfoLog(d);try{var q=a(c,n,p)}catch(r){throw console.warn("Failed to format compiler error: "+r),new e(c,"Error compiling shader:\n"+c);}throw new e(c,q.short,q.long);}d=f[n]=new m(k++,n,p,d,[],1,this)}return d};b.getProgram=function(p,n,c,f){var d=[p.id,n.id,c.join(":"),f.join(":")].join("@"),q=this.programs[d];if(!q||!this.gl.isProgram(q)){q=this.programs;var r=this.gl,u=p.shader,v=n.shader,w=r.createProgram();r.attachShader(w,u);r.attachShader(w,
v);for(u=0;u<c.length;++u)r.bindAttribLocation(w,f[u],c[u]);r.linkProgram(w);if(!r.getProgramParameter(w,r.LINK_STATUS))throw p=r.getProgramInfoLog(w),new e(p,"Error linking program: "+p);q[d]=q=w;p.programs.push(d);n.programs.push(d)}return q}},{"./GLError":313,"gl-format-compiler-error":267,"weakmap-shim":577}],319:[function(b,F,C){function m(h){this.plot=h;this.enable=[!0,!0,!1,!1];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,Infinity]}F.exports=
function(h,l){var e=new m(h);e.update(l);h.addOverlay(e);return e};b=m.prototype;b.update=function(h){h=h||{};this.enable=(h.enable||[!0,!0,!1,!1]).slice();this.width=(h.width||[1,1,1,1]).slice();this.color=(h.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(l){return l.slice()});this.center=(h.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};b.draw=function(){var h=this.enable,l=this.width,e=this.color,a=this.center,g=this.plot,k=g.line,p=g.dataBox;g=g.viewBox;k.bind();
if(p[0]<=a[0]&&a[0]<=p[2]&&p[1]<=a[1]&&a[1]<=p[3]){var n=g[0]+(a[0]-p[0])/(p[2]-p[0])*(g[2]-g[0]);a=g[1]+(a[1]-p[1])/(p[3]-p[1])*(g[3]-g[1]);h[0]&&k.drawLine(n,a,g[0],a,l[0],e[0]);h[1]&&k.drawLine(n,a,n,g[1],l[1],e[1]);h[2]&&k.drawLine(n,a,g[2],a,l[2],e[2]);h[3]&&k.drawLine(n,a,n,g[3],l[3],e[3])}};b.dispose=function(){this.plot.removeOverlay(this)}},{}],320:[function(b,F,C){C=b("glslify");var m=b("gl-shader"),h=C(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition \x3d mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos \x3d projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset \x3d (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta \x3d weight * clipOffset * screenShape;\n  vec2 lineOffset \x3d normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   \x3d vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     \x3d color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
l=C(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor \x3d fragColor;\n}"]);F.exports=function(e){return m(e,h,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":312,glslify:413}],321:[function(b,F,C){function m(n,c,f,d){this.gl=n;this.buffer=c;this.vao=f;this.shader=d;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var h=b("gl-buffer"),l=b("gl-vao"),e=b("./shaders/index");F.exports=function(n,c){function f(v,w,y,D,x,E){v=[v,w,y,0,0,0,1];v[D+3]=1;v[D]=x;d.push.apply(d,v);v[6]=-1;d.push.apply(d,v);v[D]=E;d.push.apply(d,v);d.push.apply(d,v);v[6]=1;d.push.apply(d,v);v[D]=x;d.push.apply(d,v)}var d=[];f(0,0,0,0,0,1);f(0,0,0,1,0,1);f(0,0,0,2,0,1);f(1,0,0,1,-1,1);f(1,0,0,2,-1,1);f(0,1,0,0,-1,1);f(0,1,0,2,-1,1);f(0,0,1,0,
-1,1);f(0,0,1,1,-1,1);var q=h(n,d),r=l(n,[{type:n.FLOAT,buffer:q,size:3,offset:0,stride:28},{type:n.FLOAT,buffer:q,size:3,offset:12,stride:28},{type:n.FLOAT,buffer:q,size:1,offset:24,stride:28}]),u=e(n);u.attributes.position.location=0;u.attributes.color.location=1;u.attributes.weight.location=2;n=new m(n,q,r,u);n.update(c);return n};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=m.prototype;var g=[0,0,0],k=[0,0,0],p=[0,0];b.isTransparent=function(){return!1};b.drawTransparent=function(n){};b.draw=function(n){var c=
this.gl,f=this.vao,d=this.shader;f.bind();d.bind();var q=n.model||a,r=n.view||a;n=n.projection||a;if(this.axes)var u=this.axes.lastCubeProps.axis;for(var v=0;3>v;++v)u&&0>u[v]?(g[v]=this.bounds[0][v],k[v]=this.bounds[1][v]):(g[v]=this.bounds[1][v],k[v]=this.bounds[0][v]);p[0]=c.drawingBufferWidth;p[1]=c.drawingBufferHeight;d.uniforms.model=q;d.uniforms.view=r;d.uniforms.projection=n;d.uniforms.coordinates=[this.position,g,k];d.uniforms.colors=this.colors;d.uniforms.screenShape=p;for(v=0;3>v;++v)d.uniforms.lineWidth=
this.lineWidth[v]*this.pixelRatio,this.enabled[v]&&(f.draw(c.TRIANGLES,6,6*v),this.drawSides[v]&&f.draw(c.TRIANGLES,12,18+12*v));f.unbind()};b.update=function(n){n&&("bounds"in n&&(this.bounds=n.bounds),"position"in n&&(this.position=n.position),"lineWidth"in n&&(this.lineWidth=n.lineWidth),"colors"in n&&(this.colors=n.colors),"enabled"in n&&(this.enabled=n.enabled),"drawSides"in n&&(this.drawSides=n.drawSides))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":320,"gl-buffer":258,"gl-vao":332}],322:[function(b,F,C){var m=b("glslify");b=m(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * tubePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(tubePosition, 1.0);\n  vec4 t_position  \x3d view * tubePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d tubePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
F=m(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var h=m(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position \x3d projection * view * tubePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
m=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
C.meshShader={vertex:b,fragment:F,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};C.pickShader={vertex:h,fragment:m,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:413}],323:[function(b,F,C){var m=b("gl-vec3"),h=b("gl-vec4"),l="xyz xzy yxz yzx zxy zyx".split(" "),e=function(f,d,q,r){for(var u=0,v=0;v<f.length;v++)for(var w=f[v].velocities,y=0;y<w.length;y++)u=Math.max(u,
m.length(w[y]));f=f.map(function(M){var N=u,H=M.points,J=M.velocities;M=M.divergences;var O=[],Q=[],U=[],P=[],V=[],Y=[],ba=0;h.create();for(var ea=h.create(),ca=0;ca<H.length;ca++){var ia=H[ca],fa=J[ca],ha=M[ca];0===q&&(ha=.05*r);var na=m.length(fa)/N;var pa=h.create();m.copy(pa,fa);pa[3]=ha;for(fa=0;8>fa;fa++)V[fa]=[ia[0],ia[1],ia[2],fa];if(0<P.length)for(fa=0;8>fa;fa++)ia=(fa+1)%8,O.push(P[fa],V[fa],V[ia],V[ia],P[ia],P[fa]),U.push(ea,pa,pa,pa,ea,ea),Y.push(ba,na,na,na,ba,ba),ia=O.length,Q.push([ia-
6,ia-5,ia-4],[ia-3,ia-2,ia-1]);ba=P;P=V;V=ba;ea=pa;ba=na}return{positions:O,cells:Q,vectors:U,vertexIntensity:Y}});w=[];var D=[],x=[],E=[];for(v=0;v<f.length;v++){var B=f[v],t=w.length;w=w.concat(B.positions);x=x.concat(B.vectors);E=E.concat(B.vertexIntensity);for(y=0;y<B.cells.length;y++){var G=B.cells[y],I=[];D.push(I);for(var L=0;L<G.length;L++)I.push(G[L]+t)}}return{positions:w,cells:D,vectors:x,vertexIntensity:E,colormap:d}},a=function(f,d){var q=f.length,r;for(r=0;r<q;r++){var u=f[r];if(u===
d)break;else if(u>d)return r-1}return r},g=function(f,d,q){return f<d?d:f>q?q:f},k=function(f){var d=Infinity;f.sort(function(v,w){return v-w});for(var q=f.length,r=1;r<q;r++){var u=Math.abs(f[r]-f[r-1]);u<d&&(d=u)}return d},p=function(f){for(var d=[],q=[],r=[],u={},v={},w={},y=f.length,D=0;D<y;D++){var x=f[D],E=x[0],B=x[1];x=x[2];u[E]||(d.push(E),u[E]=!0);v[B]||(q.push(B),v[B]=!0);w[x]||(r.push(x),w[x]=!0)}f=k(d);q=k(q);r=k(r);r=Math.min(f,q,r);return isFinite(r)?r:1};F.exports=function(f,d){var q=
f.startingPositions,r=f.maxLength||1E3,u=f.tubeSize||1,v=f.absoluteTubeSize,w=f.gridFill||"+x+y+z",y,D,x;-1!==w.indexOf("-x")&&(y=!0);-1!==w.indexOf("-y")&&(D=!0);-1!==w.indexOf("-z")&&(x=!0);var E=l.indexOf(w.replace(/-/g,"").replace(/\+/g,""));var B=f.getVelocity||function(ra){var ta=f.vectors,oa=f.meshgrid;var ua=ra[0];var ka=ra[1],sa=ra[2];ra=oa[0].length;var ya=oa[1].length,qa=oa[2].length,xa=a(oa[0],ua),Ca=a(oa[1],ka),Ja=a(oa[2],sa),eb=xa+1,Ra=Ca+1,Wa=Ja+1;xa=g(xa,0,ra-1);eb=g(eb,0,ra-1);Ca=
g(Ca,0,ya-1);Ra=g(Ra,0,ya-1);Ja=g(Ja,0,qa-1);Wa=g(Wa,0,qa-1);if(0>xa||0>Ca||0>Ja||eb>ra-1||Ra>ya-1||Wa>qa-1)ua=m.create();else{var Ea=oa[0][xa],Ia=oa[1][Ca],Qa=oa[2][Ja];ua=(ua-Ea)/(oa[0][eb]-Ea);ka=(ka-Ia)/(oa[1][Ra]-Ia);oa=(sa-Qa)/(oa[2][Wa]-Qa);isFinite(ua)||(ua=.5);isFinite(ka)||(ka=.5);isFinite(oa)||(oa=.5);y&&(xa=ra-1-xa,eb=ra-1-eb);D&&(Ca=ya-1-Ca,Ra=ya-1-Ra);x&&(Ja=qa-1-Ja,Wa=qa-1-Wa);switch(E){case 5:Ca*=qa;Ra*=qa;xa=xa*qa*ya;eb=eb*qa*ya;break;case 4:xa*=qa;eb*=qa;Ca=Ca*qa*ra;Ra=Ra*qa*ra;
break;case 3:Ja*=ya;Wa*=ya;xa=xa*ya*qa;eb=eb*ya*qa;break;case 2:xa*=ya;eb*=ya;Ja=Ja*ya*ra;Wa=Wa*ya*ra;break;case 1:Ja*=ra;Wa*=ra;Ca=Ca*ra*qa;Ra=Ra*ra*qa;break;default:Ca*=ra,Ra*=ra,Ja=Ja*ra*ya,Wa=Wa*ra*ya}ra=ta[xa+Ca+Ja];ya=ta[xa+Ca+Wa];qa=ta[xa+Ra+Ja];xa=ta[xa+Ra+Wa];sa=ta[eb+Ca+Ja];Ca=ta[eb+Ca+Wa];Ja=ta[eb+Ra+Ja];Qa=ta[eb+Ra+Wa];ta=m.create();eb=m.create();Ra=m.create();Wa=m.create();m.lerp(ta,ra,sa,ua);m.lerp(eb,ya,Ca,ua);m.lerp(Ra,qa,Ja,ua);m.lerp(Wa,xa,Qa,ua);ua=m.create();ra=m.create();m.lerp(ua,
ta,Ra,ka);m.lerp(ra,eb,Wa,ka);ka=m.create();m.lerp(ka,ua,ra,oa);ua=ka}return ua};w=f.getDivergence||function(ra,ta){var oa=m.create();m.add(oa,ra,[1E-4,0,0]);var ua=B(oa);m.subtract(ua,ua,ta);m.scale(ua,ua,1E4);m.add(oa,ra,[0,1E-4,0]);var ka=B(oa);m.subtract(ka,ka,ta);m.scale(ka,ka,1E4);m.add(oa,ra,[0,0,1E-4]);ra=B(oa);m.subtract(ra,ra,ta);m.scale(ra,ra,1E4);m.add(oa,ua,ka);m.add(oa,oa,ra);return oa};var t=[],G=d[0][0],I=d[0][1],L=d[0][2],M=d[1][0],N=d[1][1],H=d[1][2],J=function(ra){var ta=ra[0],
oa=ra[1];ra=ra[2];return!(ta<G||ta>M||oa<I||oa>N||ra<L||ra>H)},O=10*m.distance(d[0],d[1])/r,Q=O*O;d=1;var U=0,P=q.length;1<P&&(d=p(q));for(var V=0;V<P;V++){var Y=m.create();m.copy(Y,q[V]);var ba=[Y],ea=[],ca=B(Y),ia=Y;ea.push(ca);var fa=[],ha=w(Y,ca);ha=m.length(ha);isFinite(ha)&&ha>U&&(U=ha);fa.push(ha);t.push({points:ba,velocities:ea,divergences:fa});for(var na=0;na<100*r&&ba.length<r&&J(Y);){na++;var pa=m.clone(ca);ca=m.squaredLength(pa);if(0===ca)break;else ca>Q&&m.scale(pa,pa,O/Math.sqrt(ca));
m.add(pa,pa,Y);ca=B(pa);m.squaredDistance(ia,pa)-Q>-1E-4*Q&&(ba.push(pa),ia=pa,ea.push(ca),ha=w(pa,ca),ha=m.length(ha),isFinite(ha)&&ha>U&&(U=ha),fa.push(ha));Y=pa}}q=e(t,f.colormap,U,d);v?q.tubeScale=v:(0===U&&(U=1),q.tubeScale=.5*u*d/U);return q};var n=b("./lib/shaders"),c=b("gl-cone3d").createMesh;F.exports.createTubeMesh=function(f,d){return c(f,d,{shaders:n,traceType:"streamtube"})}},{"./lib/shaders":322,"gl-cone3d":259,"gl-vec3":351,"gl-vec4":387}],324:[function(b,F,C){var m=b("gl-shader");
b=b("glslify");var h=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate \x3d vec3(uv.zw, f.x);\n  worldCoordinate \x3d objectOffset + localCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  gl_Position \x3d clipPosition;\n  kill \x3d f.y;\n  value \x3d f.z;\n  planeCoordinate \x3d uv.xy;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * worldPosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
l=b(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill \x3e 0.0 ||\n    vColor.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N \x3d normalize(surfaceNormal);\n  vec3 V \x3d normalize(eyeDirection);\n  vec3 L \x3d normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor \x3d\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
e=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate \x3d permutation * vec3(uv.xy, height);\n  worldCoordinate \x3d objectOffset + dataCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  clipPosition.z +\x3d zOffset;\n\n  gl_Position \x3d clipPosition;\n  value \x3d f + objectOffset.z;\n  kill \x3d -1.0;\n  planeCoordinate \x3d uv.zw;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   \x3d vec3(1,0,0);\n  eyeDirection    \x3d vec3(0,1,0);\n  lightDirection  \x3d vec3(0,0,1);\n}\n"]),
a=b(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh \x3d 255.0 * v;\n  float upper \x3d floor(vh);\n  float lower \x3d fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux \x3d splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy \x3d splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor \x3d vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
C.createShader=function(g){g=m(g,h,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);g.attributes.uv.location=0;g.attributes.f.location=1;g.attributes.normal.location=2;return g};C.createPickShader=function(g){g=m(g,h,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);g.attributes.uv.location=0;g.attributes.f.location=1;g.attributes.normal.location=2;return g};C.createContourShader=function(g){g=m(g,e,l,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);g.attributes.uv.location=0;g.attributes.f.location=1;return g};C.createPickContourShader=function(g){g=m(g,e,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);g.attributes.uv.location=0;g.attributes.f.location=1;return g}},{"gl-shader":312,glslify:413}],325:[function(b,F,C){function m(ca,ia,fa,ha,na){this.position=ca;this.index=ia;this.uv=fa;this.level=ha;this.dataCoordinate=na}function h(ca,ia){ca=w([u({colormap:ca,nshades:Q,format:"rgba"}).map(function(fa,ha){ha=
ia?e(ha/255,ia):1;return[fa[0],fa[1],fa[2],255*ha]})]);v.divseq(ca,255);return ca}function l(ca,ia,fa,ha,na,pa,ra,ta,oa,ua,ka,sa,ya,qa,xa){this.gl=ca;this.shape=ia;this.bounds=fa;this.objectOffset=xa;this.intensityBounds=[];this._shader=ha;this._pickShader=na;this._coordinateBuffer=pa;this._vao=ra;this._colorMap=ta;this._contourShader=oa;this._contourPickShader=ua;this._contourBuffer=ka;this._contourVAO=sa;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=
new m([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=ya;this._dynamicVAO=qa;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=
[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[y(r.mallocFloat(1024),[0,0]),y(r.mallocFloat(1024),[0,0]),y(r.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=
!1;this.opacity=this.pixelRatio=1;this.opacityscale=!1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.vertexColor=0;this.dirty=!0}function e(ca,ia){if(!ia||!ia.length)return 1;for(var fa=0;fa<ia.length&&!(2>ia.length);++fa){if(ia[fa][0]===ca)return ia[fa][1];if(ia[fa][0]>ca&&0<fa)return ca=(ia[fa][0]-ca)/(ia[fa][0]-ia[fa-1][0]),ia[fa][1]*(1-ca)+ca*ia[fa-1][1]}return 1}function a(ca,ia){var fa,ha,na=ia.axes&&ia.axes.lastCubeProps.axis||
U,pa=ia.showSurface,ra=ia.showContour;for(fa=0;3>fa;++fa)for(pa=pa||ia.surfaceProject[fa],ha=0;3>ha;++ha)ra=ra||ia.contourProject[fa][ha];for(fa=0;3>fa;++fa){var ta=P.projections[fa];for(ha=0;16>ha;++ha)ta[ha]=0;for(ha=0;4>ha;++ha)ta[5*ha]=1;ta[5*fa]=0;ta[12+fa]=ia.axesBounds[+(0<na[fa])][fa];x(ta,ca.model,ta);var oa=P.clipBounds[fa];for(ta=0;2>ta;++ta)for(ha=0;3>ha;++ha)oa[ta][ha]=ca.clipBounds[ta][ha];oa[0][fa]=-1E8;oa[1][fa]=1E8}P.showSurface=pa;P.showContour=ra;return P}function g(ca,ia){ca=ca||
{};ia=this.gl;ia.disable(ia.CULL_FACE);this._colorMap.bind(0);var fa=V;fa.model=ca.model||H;fa.view=ca.view||H;fa.projection=ca.projection||H;fa.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]];fa.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];fa.objectOffset=this.objectOffset;fa.contourColor=this.contourColor[0];fa.inverseModel=E(fa.inverseModel,fa.model);for(ca=0;2>ca;++ca)for(var ha=fa.clipBounds[ca],na=0;3>na;++na)ha[na]=
Math.min(Math.max(this.clipBounds[ca][na],-1E8),1E8);fa.kambient=this.ambientLight;fa.kdiffuse=this.diffuseLight;fa.kspecular=this.specularLight;fa.roughness=this.roughness;fa.fresnel=this.fresnel;fa.opacity=this.opacity;fa.height=0;fa.permutation=ba;fa.vertexColor=this.vertexColor;ha=Y;x(ha,fa.view,fa.model);x(ha,fa.projection,ha);E(ha,ha);for(ca=0;3>ca;++ca)fa.eyePosition[ca]=ha[12+ca]/ha[15];var pa=ha[15];for(ca=0;3>ca;++ca)pa+=this.lightPosition[ca]*ha[4*ca+3];for(ca=0;3>ca;++ca){var ra=ha[12+
ca];for(na=0;3>na;++na)ra+=ha[4*na+ca]*this.lightPosition[na];fa.lightPosition[ca]=ra/pa}ha=a(fa,this);if(ha.showSurface){this._shader.bind();this._shader.uniforms=fa;this._vao.bind();this.showSurface&&this._vertexCount&&this._vao.draw(ia.TRIANGLES,this._vertexCount);for(ca=0;3>ca;++ca)this.surfaceProject[ca]&&this.vertexCount&&(this._shader.uniforms.model=ha.projections[ca],this._shader.uniforms.clipBounds=ha.clipBounds[ca],this._vao.draw(ia.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ha.showContour){pa=
this._contourShader;fa.kambient=1;fa.kdiffuse=0;fa.kspecular=0;fa.opacity=1;pa.bind();pa.uniforms=fa;ra=this._contourVAO;ra.bind();for(ca=0;3>ca;++ca)for(pa.uniforms.permutation=O[ca],ia.lineWidth(this.contourWidth[ca]*this.pixelRatio),na=0;na<this.contourLevels[ca].length;++na){if(na===this.highlightLevel[ca])pa.uniforms.contourColor=this.highlightColor[ca],pa.uniforms.contourTint=this.highlightTint[ca];else if(0===na||na-1===this.highlightLevel[ca])pa.uniforms.contourColor=this.contourColor[ca],
pa.uniforms.contourTint=this.contourTint[ca];this._contourCounts[ca][na]&&(pa.uniforms.height=this.contourLevels[ca][na],ra.draw(ia.LINES,this._contourCounts[ca][na],this._contourOffsets[ca][na]))}for(ca=0;3>ca;++ca)for(pa.uniforms.model=ha.projections[ca],pa.uniforms.clipBounds=ha.clipBounds[ca],na=0;3>na;++na)if(this.contourProject[ca][na]){pa.uniforms.permutation=O[na];ia.lineWidth(this.contourWidth[na]*this.pixelRatio);for(var ta=0;ta<this.contourLevels[na].length;++ta){if(ta===this.highlightLevel[na])pa.uniforms.contourColor=
this.highlightColor[na],pa.uniforms.contourTint=this.highlightTint[na];else if(0===ta||ta-1===this.highlightLevel[na])pa.uniforms.contourColor=this.contourColor[na],pa.uniforms.contourTint=this.contourTint[na];this._contourCounts[na][ta]&&(pa.uniforms.height=this.contourLevels[na][ta],ra.draw(ia.LINES,this._contourCounts[na][ta],this._contourOffsets[na][ta]))}}ra.unbind();ra=this._dynamicVAO;ra.bind();for(ca=0;3>ca;++ca)if(0!==this._dynamicCounts[ca])for(pa.uniforms.model=fa.model,pa.uniforms.clipBounds=
fa.clipBounds,pa.uniforms.permutation=O[ca],ia.lineWidth(this.dynamicWidth[ca]*this.pixelRatio),pa.uniforms.contourColor=this.dynamicColor[ca],pa.uniforms.contourTint=this.dynamicTint[ca],pa.uniforms.height=this.dynamicLevel[ca],ra.draw(ia.LINES,this._dynamicCounts[ca],this._dynamicOffsets[ca]),na=0;3>na;++na)this.contourProject[na][ca]&&(pa.uniforms.model=ha.projections[na],pa.uniforms.clipBounds=ha.clipBounds[na],ra.draw(ia.LINES,this._dynamicCounts[ca],this._dynamicOffsets[ca]));ra.unbind()}}function k(ca,
ia){return Array.isArray(ca)?[ia(ca[0]),ia(ca[1]),ia(ca[2])]:[ia(ca),ia(ca),ia(ca)]}function p(ca){return Array.isArray(ca)?3===ca.length?[ca[0],ca[1],ca[2],1]:[ca[0],ca[1],ca[2],ca[3]]:[0,0,0,1]}function n(ca){if(Array.isArray(ca)){if(Array.isArray(ca))return[p(ca[0]),p(ca[1]),p(ca[2])];ca=p(ca);return[ca.slice(),ca.slice(),ca.slice()]}}F.exports=function(ca){var ia=ca.gl,fa=G(ia),ha=L(ia),na=I(ia),pa=M(ia),ra=f(ia),ta=d(ia,[{buffer:ra,size:4,stride:N,offset:0},{buffer:ra,size:3,stride:N,offset:16},
{buffer:ra,size:3,stride:N,offset:28}]),oa=f(ia),ua=d(ia,[{buffer:oa,size:4,stride:20,offset:0},{buffer:oa,size:1,stride:20,offset:16}]),ka=f(ia),sa=d(ia,[{buffer:ka,size:2,type:ia.FLOAT}]),ya=q(ia,1,Q,ia.RGBA,ia.UNSIGNED_BYTE);ya.minFilter=ia.LINEAR;ya.magFilter=ia.LINEAR;ia=new l(ia,[0,0],[[0,0,0],[0,0,0]],fa,ha,ra,ta,ya,na,pa,oa,ua,ka,sa,[0,0,0]);fa={levels:[[],[],[]]};for(var qa in ca)fa[qa]=ca[qa];fa.colormap=fa.colormap||"jet";ia.update(fa);return ia};var c=b("bit-twiddle"),f=b("gl-buffer"),
d=b("gl-vao"),q=b("gl-texture2d"),r=b("typedarray-pool"),u=b("colormap"),v=b("ndarray-ops"),w=b("ndarray-pack"),y=b("ndarray"),D=b("surface-nets"),x=b("gl-mat4/multiply"),E=b("gl-mat4/invert"),B=b("binary-search-bounds"),t=b("ndarray-gradient");b=b("./lib/shaders");var G=b.createShader,I=b.createContourShader,L=b.createPickShader,M=b.createPickContourShader,N=40,H=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],J=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],O=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,
0]];(function(){for(var ca=0;3>ca;++ca){var ia=O[ca],fa=(ca+2)%3;ia[(ca+1)%3]=1;ia[fa+3]=1;ia[ca+6]=1}})();var Q=256;b=l.prototype;b.isTransparent=function(){return 1>this.opacity||this.opacityscale};b.isOpaque=function(){if(this.opacityscale||1>this.opacity)return!1;if(1<=this.opacity)return!0;for(var ca=0;3>ca;++ca)if(0<this._contourCounts[ca].length)return!0;return!1};b.pickSlots=1;b.setPickBase=function(ca){this.pickId=ca};var U=[0,0,0],P={showSurface:!1,showContour:!1,projections:[H.slice(),
H.slice(),H.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},V={model:H,view:H,projection:H,inverseModel:H.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=H.slice(),ba=[1,0,0,0,1,0,0,0,1];b.draw=
function(ca){return g.call(this,ca,!1)};b.drawTransparent=function(ca){return g.call(this,ca,!0)};var ea={model:H,view:H,projection:H,inverseModel:H,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};b.drawPick=function(ca){ca=ca||{};var ia=this.gl;ia.disable(ia.CULL_FACE);ea.model=ca.model||H;ea.view=ca.view||H;ea.projection=ca.projection||H;ea.shape=
this._field[2].shape;ea.pickId=this.pickId/255;ea.lowerBound=this.bounds[0];ea.upperBound=this.bounds[1];ea.objectOffset=this.objectOffset;ea.permutation=ba;for(ca=0;2>ca;++ca)for(var fa=ea.clipBounds[ca],ha=0;3>ha;++ha)fa[ha]=Math.min(Math.max(this.clipBounds[ca][ha],-1E8),1E8);fa=a(ea,this);if(fa.showSurface){this._pickShader.bind();this._pickShader.uniforms=ea;this._vao.bind();this._vao.draw(ia.TRIANGLES,this._vertexCount);for(ca=0;3>ca;++ca)this.surfaceProject[ca]&&(this._pickShader.uniforms.model=
fa.projections[ca],this._pickShader.uniforms.clipBounds=fa.clipBounds[ca],this._vao.draw(ia.TRIANGLES,this._vertexCount));this._vao.unbind()}if(fa.showContour){var na=this._contourPickShader;na.bind();na.uniforms=ea;var pa=this._contourVAO;pa.bind();for(ha=0;3>ha;++ha)for(ia.lineWidth(this.contourWidth[ha]*this.pixelRatio),na.uniforms.permutation=O[ha],ca=0;ca<this.contourLevels[ha].length;++ca)this._contourCounts[ha][ca]&&(na.uniforms.height=this.contourLevels[ha][ca],pa.draw(ia.LINES,this._contourCounts[ha][ca],
this._contourOffsets[ha][ca]));for(ca=0;3>ca;++ca)for(na.uniforms.model=fa.projections[ca],na.uniforms.clipBounds=fa.clipBounds[ca],ha=0;3>ha;++ha)if(this.contourProject[ca][ha]){na.uniforms.permutation=O[ha];ia.lineWidth(this.contourWidth[ha]*this.pixelRatio);for(var ra=0;ra<this.contourLevels[ha].length;++ra)this._contourCounts[ha][ra]&&(na.uniforms.height=this.contourLevels[ha][ra],pa.draw(ia.LINES,this._contourCounts[ha][ra],this._contourOffsets[ha][ra]))}pa.unbind()}};b.pick=function(ca){if(!ca||
ca.id!==this.pickId)return null;var ia=this._field[2].shape,fa=this._pickResult,ha=ia[0]*(ca.value[0]+(ca.value[2]>>4)/16)/255,na=Math.floor(ha),pa=ha-na;ca=ia[1]*(ca.value[1]+(ca.value[2]&15)/16)/255;var ra=Math.floor(ca),ta=ca-ra;na+=1;ra+=1;for(var oa=fa.position,ua=oa[0]=oa[1]=oa[2]=0;2>ua;++ua)for(var ka=ua?pa:1-pa,sa=0;2>sa;++sa)for(var ya=na+ua,qa=ra+sa,xa=ka*(sa?ta:1-ta),Ca=0;3>Ca;++Ca)oa[Ca]+=this._field[Ca].get(ya,qa)*xa;ua=this._pickResult.level;for(ka=0;3>ka;++ka)ua[ka]=B.le(this.contourLevels[ka],
oa[ka]),0>ua[ka]?0<this.contourLevels[ka].length&&(ua[ka]=0):ua[ka]<this.contourLevels[ka].length-1&&Math.abs(this.contourLevels[ka][ua[ka]]-oa[ka])>Math.abs(this.contourLevels[ka][ua[ka]+1]-oa[ka])&&(ua[ka]+=1);fa.index[0]=.5>pa?na:na+1;fa.index[1]=.5>ta?ra:ra+1;fa.uv[0]=ha/ia[0];fa.uv[1]=ca/ia[1];for(Ca=0;3>Ca;++Ca)fa.dataCoordinate[Ca]=this._field[Ca].get(fa.index[0],fa.index[1]);return fa};b.padField=function(ca,ia){var fa=ia.shape.slice(),ha=ca.shape.slice();v.assign(ca.lo(1,1).hi(fa[0],fa[1]),
ia);v.assign(ca.lo(1).hi(fa[0],1),ia.hi(fa[0],1));v.assign(ca.lo(1,ha[1]-1).hi(fa[0],1),ia.lo(0,fa[1]-1).hi(fa[0],1));v.assign(ca.lo(0,1).hi(1,fa[1]),ia.hi(1));v.assign(ca.lo(ha[0]-1,1).hi(1,fa[1]),ia.lo(fa[0]-1));ca.set(0,0,ia.get(0,0));ca.set(0,ha[1]-1,ia.get(0,fa[1]-1));ca.set(ha[0]-1,0,ia.get(fa[0]-1,0));ca.set(ha[0]-1,ha[1]-1,ia.get(fa[0]-1,fa[1]-1))};b.update=function(ca){ca=ca||{};this.objectOffset=ca.objectOffset||this.objectOffset;this.dirty=!0;"contourWidth"in ca&&(this.contourWidth=k(ca.contourWidth,
Number));"showContour"in ca&&(this.showContour=k(ca.showContour,Boolean));"showSurface"in ca&&(this.showSurface=!!ca.showSurface);"contourTint"in ca&&(this.contourTint=k(ca.contourTint,Boolean));"contourColor"in ca&&(this.contourColor=n(ca.contourColor));"contourProject"in ca&&(this.contourProject=k(ca.contourProject,function(bb){return k(bb,Boolean)}));"surfaceProject"in ca&&(this.surfaceProject=ca.surfaceProject);"dynamicColor"in ca&&(this.dynamicColor=n(ca.dynamicColor));"dynamicTint"in ca&&(this.dynamicTint=
k(ca.dynamicTint,Number));"dynamicWidth"in ca&&(this.dynamicWidth=k(ca.dynamicWidth,Number));"opacity"in ca&&(this.opacity=ca.opacity);"opacityscale"in ca&&(this.opacityscale=ca.opacityscale);"colorBounds"in ca&&(this.colorBounds=ca.colorBounds);"vertexColor"in ca&&(this.vertexColor=ca.vertexColor?1:0);var ia=ca.field||ca.coords&&ca.coords[2]||null,fa=!1;ia||(ia=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,
0));if("field"in ca||"coords"in ca){var ha=(ia.shape[0]+2)*(ia.shape[1]+2);ha>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(c.nextPow2(ha)));this._field[2]=y(this._field[2].data,[ia.shape[0]+2,ia.shape[1]+2]);this.padField(this._field[2],ia);ha=this.shape=ia.shape.slice();for(ia=0;2>ia;++ia)this._field[2].size>this._field[ia].data.length&&(r.freeFloat(this._field[ia].data),this._field[ia].data=r.mallocFloat(this._field[2].size)),this._field[ia]=y(this._field[ia].data,
[ha[0]+2,ha[1]+2]);if(ca.coords){var na=ca.coords;if(!Array.isArray(na)||3!==na.length)throw Error("gl-surface: invalid coordinates for x/y");for(ia=0;2>ia;++ia){var pa=na[ia];for(ra=0;2>ra;++ra)if(pa.shape[ra]!==ha[ra])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[ia],pa)}}else if(ca.ticks){ra=ca.ticks;if(!Array.isArray(ra)||2!==ra.length)throw Error("gl-surface: invalid ticks");for(ia=0;2>ia;++ia){na=ra[ia];if(Array.isArray(na)||na.length)na=y(na);if(na.shape[0]!==
ha[ia])throw Error("gl-surface: invalid tick length");pa=y(na.data,ha);pa.stride[ia]=na.stride[0];pa.stride[ia^1]=0;this.padField(this._field[ia],pa)}}else{for(ia=0;2>ia;++ia)ra=[0,0],ra[ia]=1,this._field[ia]=y(this._field[ia].data,[ha[0]+2,ha[1]+2],ra,0);this._field[0].set(0,0,0);for(var ra=0;ra<ha[0];++ra)this._field[0].set(ra+1,0,ra);this._field[0].set(ha[0]+1,0,ha[0]-1);this._field[1].set(0,0,0);for(ra=0;ra<ha[1];++ra)this._field[1].set(0,ra+1,ra);this._field[1].set(0,ha[1]+1,ha[1]-1)}ra=this._field;
na=y(r.mallocFloat(6*ra[2].size),[3,ha[0]+2,ha[1]+2,2]);for(ia=0;3>ia;++ia)t(na.pick(ia),ra[ia],"mirror");var ta=y(r.mallocFloat(3*ra[2].size),[ha[0]+2,ha[1]+2,3]);for(ia=0;ia<ha[0]+2;++ia)for(ra=0;ra<ha[1]+2;++ra){pa=na.get(0,ia,ra,0);var oa=na.get(0,ia,ra,1),ua=na.get(1,ia,ra,0),ka=na.get(1,ia,ra,1),sa=na.get(2,ia,ra,0),ya=na.get(2,ia,ra,1),qa=ua*ya-ka*sa;sa=sa*oa-ya*pa;ya=pa*ka-oa*ua;pa=Math.sqrt(qa*qa+sa*sa+ya*ya);1E-8>pa?(pa=Math.max(Math.abs(qa),Math.abs(sa),Math.abs(ya)),1E-8>pa?(ya=1,sa=qa=
0,pa=1):pa=1/pa):pa=1/Math.sqrt(pa);ta.set(ia,ra,0,qa*pa);ta.set(ia,ra,1,sa*pa);ta.set(ia,ra,2,ya*pa)}r.free(na.data);var xa=[Infinity,Infinity,Infinity],Ca=[-Infinity,-Infinity,-Infinity],Ja=Infinity,eb=-Infinity,Ra=r.mallocFloat(c.nextPow2((ha[0]-1)*(ha[1]-1)*60)),Wa=0;for(ia=na=0;ia<ha[0]-1;++ia)a:for(ra=0;ra<ha[1]-1;++ra){for(qa=0;2>qa;++qa)for(sa=0;2>sa;++sa)for(pa=0;3>pa;++pa)if(oa=this._field[pa].get(1+ia+qa,1+ra+sa),isNaN(oa)||!isFinite(oa))continue a;for(pa=0;6>pa;++pa){ua=ia+J[pa][0];ka=
ra+J[pa][1];var Ea=this._field[0].get(ua+1,ka+1),Ia=this._field[1].get(ua+1,ka+1);oa=this._field[2].get(ua+1,ka+1);qa=ta.get(ua+1,ka+1,0);sa=ta.get(ua+1,ka+1,1);ya=ta.get(ua+1,ka+1,2);ca.intensity&&(Qa=ca.intensity.get(ua,ka));var Qa=ca.intensity?ca.intensity.get(ua,ka):oa+this.objectOffset[2];Ra[Wa++]=ua;Ra[Wa++]=ka;Ra[Wa++]=Ea;Ra[Wa++]=Ia;Ra[Wa++]=oa;Ra[Wa++]=0;Ra[Wa++]=Qa;Ra[Wa++]=qa;Ra[Wa++]=sa;Ra[Wa++]=ya;xa[0]=Math.min(xa[0],Ea+this.objectOffset[0]);xa[1]=Math.min(xa[1],Ia+this.objectOffset[1]);
xa[2]=Math.min(xa[2],oa+this.objectOffset[2]);Ja=Math.min(Ja,Qa);Ca[0]=Math.max(Ca[0],Ea+this.objectOffset[0]);Ca[1]=Math.max(Ca[1],Ia+this.objectOffset[1]);Ca[2]=Math.max(Ca[2],oa+this.objectOffset[2]);eb=Math.max(eb,Qa);na+=1}}ca.intensityBounds&&(Ja=+ca.intensityBounds[0],eb=+ca.intensityBounds[1]);for(ia=6;ia<Wa;ia+=10)Ra[ia]=(Ra[ia]-Ja)/(eb-Ja);this._vertexCount=na;this._coordinateBuffer.update(Ra.subarray(0,Wa));r.freeFloat(Ra);r.free(ta.data);this.bounds=[xa,Ca];this.intensity=ca.intensity||
this._field[2];if(this.intensityBounds[0]!==Ja||this.intensityBounds[1]!==eb)fa=!0;this.intensityBounds=[Ja,eb]}if("levels"in ca){ha=ca.levels;ha=Array.isArray(ha[0])?ha.slice():[[],[],ha];for(ia=0;3>ia;++ia)ha[ia]=ha[ia].slice(),ha[ia].sort(function(bb,Pa){return bb-Pa});for(ia=0;3>ia;++ia)for(ra=0;ra<ha[ia].length;++ra)ha[ia][ra]-=this.objectOffset[ia];ia=0;a:for(;3>ia;++ia){if(ha[ia].length!==this.contourLevels[ia].length){fa=!0;break}for(ra=0;ra<ha[ia].length;++ra)if(ha[ia][ra]!==this.contourLevels[ia][ra]){fa=
!0;break a}}this.contourLevels=ha}if(fa){ra=this._field;ha=this.shape;fa=[];for(ta=0;3>ta;++ta){ya=this.contourLevels[ta];xa=[];Ca=[];Ja=[0,0,0];for(ia=0;ia<ya.length;++ia){eb=D(this._field[ta],ya[ia]);xa.push(fa.length/5|0);ra=na=0;a:for(;ra<eb.cells.length;++ra)for(Ra=eb.cells[ra],pa=0;2>pa;++pa){Wa=eb.positions[Ra[pa]];oa=Wa[0];Ea=Math.floor(oa)|0;Ia=oa-Ea;oa=Wa[1];Qa=Math.floor(oa)|0;var lb=oa-Qa,hb=!1,Fa=0;b:for(;3>Fa;++Fa){Ja[Fa]=0;var La=(ta+Fa+1)%3;for(qa=0;2>qa;++qa){var Oa=qa?Ia:1-Ia;ua=
Math.min(Math.max(Ea+qa,0),ha[0])|0;for(sa=0;2>sa;++sa){var fb=sa?lb:1-lb;ka=Math.min(Math.max(Qa+sa,0),ha[1])|0;oa=2>Fa?this._field[La].get(ua,ka):(this.intensity.get(ua,ka)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(oa)||isNaN(oa)){hb=!0;break b}Ja[Fa]+=Oa*fb*oa}}}if(hb){if(0<pa){for(pa=0;5>pa;++pa)fa.pop();--na}continue a}else fa.push(Ja[0],Ja[1],Wa[0],Wa[1],Ja[2]),na+=1}Ca.push(na)}this._contourOffsets[ta]=xa;this._contourCounts[ta]=Ca}ha=r.mallocFloat(fa.length);
for(ia=0;ia<fa.length;++ia)ha[ia]=fa[ia];this._contourBuffer.update(ha);r.freeFloat(ha)}ca.colormap&&this._colorMap.setPixels(h(ca.colormap,this.opacityscale))};b.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();this._dynamicVAO.dispose();for(var ca=0;3>ca;++ca)r.freeFloat(this._field[ca].data)};
b.highlight=function(ca){var ia;if(ca){for(ia=0;3>ia;++ia)this.highlightLevel[ia]=this.enableHighlight[ia]?ca.level[ia]:-1;ca=this.snapToData?ca.dataCoordinate:ca.position;for(ia=0;3>ia;++ia)ca[ia]-=this.objectOffset[ia];if(this.enableDynamic[0]&&ca[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ca[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ca[2]!==this.dynamicLevel[2]){for(var fa=0,ha=this.shape,na=r.mallocFloat(12*ha[0]*ha[1]),pa=0;3>pa;++pa)if(this.enableDynamic[pa]){this.dynamicLevel[pa]=
ca[pa];var ra=this._field[(pa+1)%3],ta=this._field[(pa+2)%3];ia=D(this._field[pa],ca[pa]);var oa=ia.cells,ua=ia.positions;this._dynamicOffsets[pa]=fa;for(ia=0;ia<oa.length;++ia)for(var ka=oa[ia],sa=0;2>sa;++sa){var ya=ua[ka[sa]],qa=+ya[0],xa=qa|0,Ca=Math.min(xa+1,ha[0])|0,Ja=qa-xa,eb=1-Ja,Ra=+ya[1];ya=Ra|0;qa=Math.min(ya+1,ha[1])|0;var Wa=Ra-ya,Ea=1-Wa;Ra=eb*Ea;eb*=Wa;Ea*=Ja;Wa*=Ja;Ja=Ra*ra.get(xa,ya)+eb*ra.get(xa,qa)+Ea*ra.get(Ca,ya)+Wa*ra.get(Ca,qa);xa=Ra*ta.get(xa,ya)+eb*ta.get(xa,qa)+Ea*ta.get(Ca,
ya)+Wa*ta.get(Ca,qa);if(isNaN(Ja)||isNaN(xa)){sa&&--fa;break}na[2*fa]=Ja;na[2*fa+1]=xa;fa+=1}this._dynamicCounts[pa]=fa-this._dynamicOffsets[pa]}else this.dynamicLevel[pa]=NaN,this._dynamicCounts[pa]=0;this._dynamicBuffer.update(na.subarray(0,2*fa));r.freeFloat(na)}}else this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":324,"binary-search-bounds":96,"bit-twiddle":97,colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,
"gl-texture2d":327,"gl-vao":332,ndarray:469,"ndarray-gradient":462,"ndarray-ops":464,"ndarray-pack":465,"surface-nets":542,"typedarray-pool":567}],326:[function(b,F,C){var m=b("css-font"),h=b("pick-by-alias"),l=b("regl"),e=b("gl-util/context");C=b("es6-weak-map");var a=b("color-normalize"),g=b("font-atlas"),k=b("typedarray-pool"),p=b("parse-rect"),n=b("is-plain-obj"),c=b("parse-unit"),f=b("to-px"),d=b("detect-kerning"),q=b("object-assign"),r=b("font-measure"),u=b("flatten-vertex-data"),v=b("bit-twiddle").nextPow2,
w=new C,y=!1;document.body&&(b=document.body.appendChild(document.createElement("div")),b.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(b).fontStretch&&(y=!0),document.body.removeChild(b));var D=function(x){"function"===typeof x&&x._gl&&x.prop&&x.texture&&x.buffer?(x={regl:x},this.gl=x.regl._gl):this.gl=e(x);this.regl=(this.shader=w.get(this.gl))?this.shader.regl:x.regl||l({gl:this.gl});this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=
this.regl.buffer({type:"float",usage:"stream"});this.shader||(this.shader=this.createShader(),w.set(this.gl,this.shader));this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};this.canvas=this.gl.canvas;this.update(n(x)?x:{})};D.prototype.createShader=function(){var x=this.regl,E=x({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",
dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:x.prop("count"),offset:x.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:x.this("sizeBuffer")},width:{offset:0,stride:8,buffer:x.this("sizeBuffer")},char:x.this("charBuffer"),position:x.this("position")},uniforms:{atlasSize:function(B,t){return[t.atlas.width,t.atlas.height]},atlasDim:function(B,t){return[t.atlas.cols,t.atlas.rows]},atlas:function(B,t){return t.atlas.texture},charStep:function(B,t){return t.atlas.step},em:function(B,
t){return t.atlas.em},color:x.prop("color"),opacity:x.prop("opacity"),viewport:x.this("viewportArray"),scale:x.this("scale"),align:x.prop("align"),baseline:x.prop("baseline"),translate:x.this("translate"),positionOffset:x.prop("positionOffset")},primitive:"points",viewport:x.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+
(D.normalViewport?"":"vec2 positionOffset \x3d vec2(positionOffset.x,- positionOffset.y);")+"\n\n\t\t\t\tvec2 offset \x3d floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position \x3d (position + translate) * scale;\n\t\t\t\tposition +\x3d offset * scale;\n\n\t\t\t\t"+(D.normalViewport?"position.y \x3d 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord \x3d position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position \x3d vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize \x3d charStep;\n\n\t\t\t\tcharId.x \x3d mod(char, atlasDim.x);\n\t\t\t\tcharId.y \x3d floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth \x3d width * em;\n\n\t\t\t\tfontColor \x3d color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv \x3d gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep \x3d floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y \x3d charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth \x3d ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) \x3e halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) \x3c halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv +\x3d charId * charStep;\n\t\t\t\tuv \x3d uv / atlasSize;\n\n\t\t\t\tvec4 color \x3d fontColor;\n\t\t\t\tvec4 mask \x3d texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY \x3d lightness(mask);\n\t\t\t\t// float colorY \x3d lightness(color);\n\t\t\t\tcolor.a *\x3d maskY;\n\t\t\t\tcolor.a *\x3d opacity;\n\n\t\t\t\t// color.a +\x3d .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb +\x3d (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor \x3d color;\n\t\t\t}"});
return{regl:x,draw:E,atlas:{}}};D.prototype.update=function(x){var E=this;if("string"===typeof x)x={text:x};else if(!x)return;x=h(x,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=x.opacity&&(Array.isArray(x.opacity)?this.opacity=x.opacity.map(function(Y){return parseFloat(Y)}):this.opacity=parseFloat(x.opacity));null!=x.viewport&&(this.viewport=p(x.viewport),D.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=x.kerning&&(this.kerning=x.kerning);null!=x.offset&&("number"===typeof x.offset&&(x.offset=[x.offset,0]),this.positionOffset=u(x.offset));x.direction&&(this.direction=x.direction);x.range&&(this.range=
x.range,this.scale=[1/(x.range[2]-x.range[0]),1/(x.range[3]-x.range[1])],this.translate=[-x.range[0],-x.range[1]]);x.scale&&(this.scale=x.scale);x.translate&&(this.translate=x.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||x.font||(x.font=D.baseFontSize+"px sans-serif");var B=!1,t=!1;x.font&&(Array.isArray(x.font)?x.font:[x.font]).forEach(function(Y,ba){if("string"===typeof Y)try{Y=m.parse(Y)}catch(fa){Y=
m.parse(D.baseFontSize+"px "+Y)}else Y=m.parse(m.stringify(Y));var ea=m.stringify({size:D.baseFontSize,family:Y.family,stretch:y?Y.stretch:void 0,variant:Y.variant,weight:Y.weight,style:Y.style}),ca=c(Y.size);ca=Math.round(ca[0]*f(ca[1]));ca!==E.fontSize[ba]&&(t=!0,E.fontSize[ba]=ca);if(!E.font[ba]||ea!=E.font[ba].baseString)if(B=!0,E.font[ba]=D.fonts[ea],!E.font[ba]){ca=Y.family.join(", ");var ia=[Y.style];Y.style!=Y.variant&&ia.push(Y.variant);Y.variant!=Y.weight&&ia.push(Y.weight);y&&Y.weight!=
Y.stretch&&ia.push(Y.stretch);E.font[ba]={baseString:ea,family:ca,weight:Y.weight,stretch:Y.stretch,style:Y.style,variant:Y.variant,width:{},kerning:{},metrics:r(ca,{origin:"top",fontSize:D.baseFontSize,fontStyle:ia.join(" ")})};D.fonts[ea]=E.font[ba]}});(B||t)&&this.font.forEach(function(Y,ba){var ea=m.stringify({size:E.fontSize[ba],family:Y.family,stretch:y?Y.stretch:void 0,variant:Y.variant,weight:Y.weight,style:Y.style});E.fontAtlas[ba]=E.shader.atlas[ea];E.fontAtlas[ba]||(E.shader.atlas[ea]=
E.fontAtlas[ba]={fontString:ea,step:2*Math.ceil(E.fontSize[ba]*Y.metrics.bottom*.5),em:E.fontSize[ba],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:E.regl.texture()});null==x.text&&(x.text=E.text)});if("string"===typeof x.text&&x.position&&2<x.position.length){for(var G=Array(.5*x.position.length),I=0;I<G.length;I++)G[I]=x.text;x.text=G}if(null!=x.text||B){this.textOffsets=[0];if(Array.isArray(x.text)){this.count=x.text[0].length;this.counts=[this.count];for(G=1;G<x.text.length;G++)this.textOffsets[G]=
this.textOffsets[G-1]+x.text[G-1].length,this.count+=x.text[G].length,this.counts.push(x.text[G].length);this.text=x.text.join("")}else this.text=x.text,this.count=this.text.length,this.counts=[this.count];var L=[];this.font.forEach(function(Y,ba){D.atlasContext.font=Y.baseString;ba=E.fontAtlas[ba];for(var ea=0;ea<E.text.length;ea++){var ca=E.text.charAt(ea);null==ba.ids[ca]&&(ba.ids[ca]=ba.chars.length,ba.chars.push(ca),L.push(ca));if(null==Y.width[ca]&&(Y.width[ca]=D.atlasContext.measureText(ca).width/
D.baseFontSize,E.kerning)){var ia=[],fa;for(fa in Y.width)ia.push(fa+ca,ca+fa);q(Y.kerning,d(Y.family,{pairs:ia}))}}})}if(x.position)if(2<x.position.length){G=!x.position[0].length;I=k.mallocFloat(2*this.count);for(var M=0,N=0;M<this.counts.length;M++){var H=this.counts[M];if(G)for(var J=0;J<H;J++)I[N++]=x.position[2*M],I[N++]=x.position[2*M+1];else for(J=0;J<H;J++)I[N++]=x.position[M][0],I[N++]=x.position[M][1]}this.position.call?this.position({type:"float",data:I}):this.position=this.regl.buffer({type:"float",
data:I});k.freeFloat(I)}else this.position.destroy&&this.position.destroy(),this.position={constant:x.position};if(x.text||B){G=k.mallocUint8(this.count);I=k.mallocFloat(2*this.count);this.textWidth=[];for(N=M=0;M<this.counts.length;M++){H=this.counts[M];J=this.font[M]||this.font[0];for(var O=this.fontAtlas[M]||this.fontAtlas[0],Q=0;Q<H;Q++){var U=this.text.charAt(N),P=this.text.charAt(N-1);G[N]=O.ids[U];I[2*N]=J.width[U];if(Q){var V=I[2*N-1]+.5*I[2*N-2]+.5*I[2*N];this.kerning&&(U=J.kerning[P+U])&&
(V+=.001*U);I[2*N+1]=V}else I[2*N+1]=.5*I[2*N];N++}this.textWidth.push(I.length?.5*I[2*N-2]+I[2*N-1]:0)}x.align||(x.align=this.align);this.charBuffer({data:G,type:"uint8",usage:"stream"});this.sizeBuffer({data:I,type:"float",usage:"stream"});k.freeUint8(G);k.freeFloat(I);L.length&&this.font.forEach(function(Y,ba){Y=E.fontAtlas[ba];ba=Y.step;var ea=Math.min(Math.floor(D.maxAtlasSize/ba),Y.chars.length),ca=Math.ceil(Y.chars.length/ea),ia=v(ea*ba),fa=v(ca*ba);Y.width=ia;Y.height=fa;Y.rows=ca;Y.cols=
ea;Y.em&&Y.texture({data:g({canvas:D.atlasCanvas,font:Y.fontString,chars:Y.chars,shape:[ia,fa],step:[ba,ba]})})})}x.align&&(this.align=x.align,this.alignOffset=this.textWidth.map(function(Y,ba){ba=Array.isArray(E.align)?1<E.align.length?E.align[ba]:E.align[0]:E.align;if("number"===typeof ba)return ba;switch(ba){case "right":case "end":return-Y;case "center":case "centre":case "middle":return.5*-Y}return 0}));null==this.baseline&&null==x.baseline&&(x.baseline=0);null!=x.baseline&&(this.baseline=x.baseline,
Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Y,ba){ba=(E.font[ba]||E.font[0]).metrics;var ea=.5*ba.bottom;ea="number"===typeof Y?ea+(Y-ba.baseline):ea+-ba[Y];D.normalViewport||(ea*=-1);return ea}));if(null!=x.color)if(x.color||(x.color="transparent"),"string"!==typeof x.color&&isNaN(x.color)){if("number"===typeof x.color[0]&&x.color.length>this.counts.length)for(I=x.color.length,G=k.mallocUint8(I),M=(x.color.subarray||x.color.slice).bind(x.color),
N=0;N<I;N+=4)G.set(a(M(N,N+4),"uint8"),N);else for(I=x.color.length,G=k.mallocUint8(4*I),M=0;M<I;M++)G.set(a(x.color[M]||0,"uint8"),4*M);this.color=G}else this.color=a(x.color,"uint8");if(x.position||x.text||x.color||x.baseline||x.align||x.font||x.offset||x.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||
0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0)),G=0;G<this.batch.length;G++)this.batch[G]={count:1<this.counts.length?this.counts[G]:this.counts[0],offset:1<this.textOffsets.length?this.textOffsets[G]:this.textOffsets[0],color:this.color?4>=this.color.length?this.color:this.color.subarray(4*G,4*G+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[G]:this.opacity,baseline:null!=this.baselineOffset[G]?this.baselineOffset[G]:this.baselineOffset[0],
align:this.align?null!=this.alignOffset[G]?this.alignOffset[G]:this.alignOffset[0]:0,atlas:this.fontAtlas[G]||this.fontAtlas[0],positionOffset:2<this.positionOffset.length?this.positionOffset.subarray(2*G,2*G+2):this.positionOffset};else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:
[]};D.prototype.destroy=function(){};D.prototype.kerning=!0;D.prototype.position={constant:new Float32Array(2)};D.prototype.translate=null;D.prototype.scale=null;D.prototype.font=null;D.prototype.text="";D.prototype.positionOffset=[0,0];D.prototype.opacity=1;D.prototype.color=new Uint8Array([0,0,0,255]);D.prototype.alignOffset=[0,0];D.normalViewport=!1;D.maxAtlasSize=1024;D.atlasCanvas=document.createElement("canvas");D.atlasContext=D.atlasCanvas.getContext("2d",{alpha:!1});D.baseFontSize=64;D.fonts=
{};F.exports=D},{"bit-twiddle":97,"color-normalize":125,"css-font":144,"detect-kerning":172,"es6-weak-map":233,"flatten-vertex-data":244,"font-atlas":245,"font-measure":246,"gl-util/context":328,"is-plain-obj":443,"object-assign":473,"parse-rect":478,"parse-unit":480,"pick-by-alias":485,regl:512,"to-px":550,"typedarray-pool":567}],327:[function(b,F,C){function m(q){return"undefined"!=typeof HTMLCanvasElement&&q instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&q instanceof HTMLImageElement||
"undefined"!=typeof HTMLVideoElement&&q instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&q instanceof ImageData}function h(q,r,u){var v=q.gl,w=v.getParameter(v.MAX_TEXTURE_SIZE);if(0>r||r>w||0>u||u>w)throw Error("gl-texture2d: Invalid texture size");q._shape=[r,u];q.bind();v.texImage2D(v.TEXTURE_2D,0,q.format,r,u,0,q.format,q.type,null);q._mipLevels=[0];return q}function l(q,r,u,v,w,y){this.gl=q;this.handle=r;this.format=w;this.type=y;this._shape=[u,v];this._mipLevels=[0];this._minFilter=
this._magFilter=q.NEAREST;this._wrapT=this._wrapS=q.CLAMP_TO_EDGE;this._anisoSamples=1;var D=this;q=[this._wrapS,this._wrapT];Object.defineProperties(q,[{get:function(){return D._wrapS},set:function(x){return D.wrapS=x}},{get:function(){return D._wrapT},set:function(x){return D.wrapT=x}}]);this._wrapVector=q;q=[this._shape[0],this._shape[1]];Object.defineProperties(q,[{get:function(){return D._shape[0]},set:function(x){return D.width=x}},{get:function(){return D._shape[1]},set:function(x){return D.height=
x}}]);this._shapeVector=q}function e(q,r){return 3===q.length?1===r[2]&&r[1]===q[0]*q[2]&&r[0]===q[2]:1===r[0]&&r[1]===q[0]}function a(q){var r=q.createTexture();q.bindTexture(q.TEXTURE_2D,r);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE);return r}function g(q,r,u,v,w){var y=q.getParameter(q.MAX_TEXTURE_SIZE);
if(0>r||r>y||0>u||u>y)throw Error("gl-texture2d: Invalid texture shape");if(w===q.FLOAT&&!q.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");y=a(q);q.texImage2D(q.TEXTURE_2D,0,v,r,u,0,v,w,null);return new l(q,y,r,u,v,w)}var k=b("ndarray"),p=b("ndarray-ops"),n=b("typedarray-pool");F.exports=function(q){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");c||(c=[q.LINEAR,q.NEAREST_MIPMAP_LINEAR,
q.LINEAR_MIPMAP_NEAREST,q.LINEAR_MIPMAP_NEAREST],f=[q.NEAREST,q.LINEAR,q.NEAREST_MIPMAP_NEAREST,q.NEAREST_MIPMAP_LINEAR,q.LINEAR_MIPMAP_NEAREST,q.LINEAR_MIPMAP_LINEAR],d=[q.REPEAT,q.CLAMP_TO_EDGE,q.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return g(q,arguments[1],arguments[2],arguments[3]||q.RGBA,arguments[4]||q.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return g(q,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||q.RGBA,arguments[3]||q.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var r=
arguments[1],u=m(r)?r:r.raw;if(u){var v=r.width|0;r=r.height|0;var w=arguments[2]||q.RGBA,y=arguments[3]||q.UNSIGNED_BYTE,D=a(q);q.texImage2D(q.TEXTURE_2D,0,w,w,y,u);return new l(q,D,v,r,w,y)}if(r.shape&&r.data&&r.stride){D=r;var x=D.dtype;u=D.shape.slice();r=q.getParameter(q.MAX_TEXTURE_SIZE);if(0>u[0]||u[0]>r||0>u[1]||u[1]>r)throw Error("gl-texture2d: Invalid texture size");r=e(u,D.stride.slice());"float32"===x?w=q.FLOAT:"float64"===x?(w=q.FLOAT,r=!1,x="float32"):"uint8"===x?w=q.UNSIGNED_BYTE:(w=
q.UNSIGNED_BYTE,r=!1,x="uint8");if(2===u.length)y=q.LUMINANCE,u=[u[0],u[1],1],D=k(D.data,u,[D.stride[0],D.stride[1],1],D.offset);else if(3===u.length)if(1===u[2])y=q.ALPHA;else if(2===u[2])y=q.LUMINANCE_ALPHA;else if(3===u[2])y=q.RGB;else if(4===u[2])y=q.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");w!==q.FLOAT||q.getExtension("OES_texture_float")||(w=q.UNSIGNED_BYTE,r=!1);var E=D.size;if(r)D=0===D.offset&&D.data.length===
E?D.data:D.data.subarray(D.offset,D.offset+E);else{var B=[u[2],u[2]*u[0],1];v=n.malloc(E,x);B=k(v,u,B,0);"float32"!==x&&"float64"!==x||w!==q.UNSIGNED_BYTE?p.assign(B,D):p.muls(B,D,255);D=v.subarray(0,E)}x=a(q);q.texImage2D(q.TEXTURE_2D,0,y,u[0],u[1],0,y,w,D);r||n.free(v);return new l(q,x,u[0],u[1],y,w)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");};var c=null,f=null,d=null;b=l.prototype;Object.defineProperties(b,{minFilter:{get:function(){return this._minFilter},set:function(q){this.bind();
var r=this.gl;this.type===r.FLOAT&&0<=c.indexOf(q)&&!r.getExtension("OES_texture_float_linear")&&(q=r.NEAREST);if(0>f.indexOf(q))throw Error("gl-texture2d: Unknown filter mode "+q);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,q);return this._minFilter=q}},magFilter:{get:function(){return this._magFilter},set:function(q){this.bind();var r=this.gl;this.type===r.FLOAT&&0<=c.indexOf(q)&&!r.getExtension("OES_texture_float_linear")&&(q=r.NEAREST);if(0>f.indexOf(q))throw Error("gl-texture2d: Unknown filter mode "+
q);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,q);return this._magFilter=q}},mipSamples:{get:function(){return this._anisoSamples},set:function(q){var r=this._anisoSamples;this._anisoSamples=Math.max(q,1)|0;r!==this._anisoSamples&&(q=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,q.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(q){this.bind();if(0>d.indexOf(q))throw Error("gl-texture2d: Unknown wrap mode "+
q);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,q);return this._wrapS=q}},wrapT:{get:function(){return this._wrapT},set:function(q){this.bind();if(0>d.indexOf(q))throw Error("gl-texture2d: Unknown wrap mode "+q);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,q);return this._wrapT=q}},wrap:{get:function(){return this._wrapVector},set:function(q){Array.isArray(q)||(q=[q,q]);if(2!==q.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var r=
0;2>r;++r)if(0>d.indexOf(q[r]))throw Error("gl-texture2d: Unknown wrap mode "+q);this._wrapS=q[0];this._wrapT=q[1];r=this.gl;this.bind();r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT);return q}},shape:{get:function(){return this._shapeVector},set:function(q){if(!Array.isArray(q))q=[q|0,q|0];else if(2!==q.length)throw Error("gl-texture2d: Invalid texture shape");h(this,q[0]|0,q[1]|0);return[q[0]|0,q[1]|0]}},width:{get:function(){return this._shape[0]},
set:function(q){q|=0;h(this,q,this._shape[1]);return q}},height:{get:function(){return this._shape[1]},set:function(q){q|=0;h(this,this._shape[0],q);return q}}});b.bind=function(q){var r=this.gl;void 0!==q&&r.activeTexture(r.TEXTURE0+(q|0));r.bindTexture(r.TEXTURE_2D,this.handle);return void 0!==q?q|0:r.getParameter(r.ACTIVE_TEXTURE)-r.TEXTURE0};b.dispose=function(){this.gl.deleteTexture(this.handle)};b.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var q=Math.min(this._shape[0],
this._shape[1]),r=0;0<q;++r,q>>>=1)0>this._mipLevels.indexOf(r)&&this._mipLevels.push(r)};b.setPixels=function(q,r,u,v){var w=this.gl;this.bind();Array.isArray(r)?(v=u,u=r[1]|0,r=r[0]|0):(r=r||0,u=u||0);v=v||0;var y=m(q)?q:q.raw;if(y)0>this._mipLevels.indexOf(v)?(w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,this.type,y),this._mipLevels.push(v)):w.texSubImage2D(w.TEXTURE_2D,v,r,u,this.format,this.type,y);else if(q.shape&&q.stride&&q.data){if(2>q.shape.length||r+q.shape[1]>this._shape[1]>>>v||
u+q.shape[0]>this._shape[0]>>>v||0>r||0>u)throw Error("gl-texture2d: Texture dimensions are out of bounds");y=this.format;var D=this.type,x=this._mipLevels,E=q.dtype,B=q.shape.slice();if(2>B.length||3<B.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var t=e(B,q.stride.slice());"float32"===E?E=w.FLOAT:"float64"===E?(E=w.FLOAT,t=!1):"uint8"===E?E=w.UNSIGNED_BYTE:(E=w.UNSIGNED_BYTE,t=!1);if(2===B.length){var G=w.LUMINANCE;B=[B[0],B[1],1];q=k(q.data,B,[q.stride[0],q.stride[1],1],
q.offset)}else if(3===B.length)if(1===B[2])G=w.ALPHA;else if(2===B[2])G=w.LUMINANCE_ALPHA;else if(3===B[2])G=w.RGB;else if(4===B[2])G=w.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");G!==w.LUMINANCE&&G!==w.ALPHA||y!==w.LUMINANCE&&y!==w.ALPHA||(G=y);if(G!==y)throw Error("gl-texture2d: Incompatible texture format for setPixels");G=q.size;var I=0>x.indexOf(v);I&&x.push(v);E===D&&t?0===q.offset&&q.data.length===G?I?w.texImage2D(w.TEXTURE_2D,
v,y,B[0],B[1],0,y,D,q.data):w.texSubImage2D(w.TEXTURE_2D,v,r,u,B[0],B[1],y,D,q.data):I?w.texImage2D(w.TEXTURE_2D,v,y,B[0],B[1],0,y,D,q.data.subarray(q.offset,q.offset+G)):w.texSubImage2D(w.TEXTURE_2D,v,r,u,B[0],B[1],y,D,q.data.subarray(q.offset,q.offset+G)):(x=D===w.FLOAT?n.mallocFloat32(G):n.mallocUint8(G),t=k(x,B,[B[2],B[2]*B[0],1]),E===w.FLOAT&&D===w.UNSIGNED_BYTE?p.muls(t,q,255):p.assign(t,q),I?w.texImage2D(w.TEXTURE_2D,v,y,B[0],B[1],0,y,D,x.subarray(0,G)):w.texSubImage2D(w.TEXTURE_2D,v,r,u,B[0],
B[1],y,D,x.subarray(0,G)),D===w.FLOAT?n.freeFloat32(x):n.freeUint8(x))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:469,"ndarray-ops":464,"typedarray-pool":567}],328:[function(b,F,C){(function(m){function h(g){if(g.container)if(g.container==document.body)document.body.style.width||(g.canvas.width=g.width||g.pixelRatio*m.innerWidth),document.body.style.height||(g.canvas.height=g.height||g.pixelRatio*m.innerHeight);else{var k=g.container.getBoundingClientRect();g.canvas.width=
g.width||k.right-k.left;g.canvas.height=g.height||k.bottom-k.top}}function l(g){return"function"===typeof g.getContext&&"width"in g&&"height"in g}function e(){var g=document.createElement("canvas");g.style.position="absolute";g.style.top=0;g.style.left=0;return g}var a=b("pick-by-alias");F.exports=function(g){g?"string"===typeof g&&(g={container:g}):g={};g=l(g)?{container:g}:"string"===typeof g.nodeName&&"function"===typeof g.appendChild&&"function"===typeof g.getBoundingClientRect?{container:g}:
"function"===typeof g.drawArrays||"function"===typeof g.drawElements?{gl:g}:a(g,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0);g.pixelRatio||(g.pixelRatio=m.pixelRatio||1);if(g.gl)return g.gl;g.canvas&&(g.container=g.canvas.parentNode);if(g.container){if("string"===typeof g.container){var k=
document.querySelector(g.container);if(!k)throw Error("Element "+g.container+" is not found");g.container=k}l(g.container)?(g.canvas=g.container,g.container=g.canvas.parentNode):g.canvas||(g.canvas=e(),g.container.appendChild(g.canvas),h(g))}else if(!g.canvas)if("undefined"!==typeof document)g.container=document.body||document.documentElement,g.canvas=e(),g.container.appendChild(g.canvas),h(g);else throw Error("Not DOM environment. Use headless-gl.");if(!g.gl)try{g.gl=g.canvas.getContext("webgl",
g.attrs)}catch(p){try{g.gl=g.canvas.getContext("experimental-webgl",g.attrs)}catch(n){g.gl=g.canvas.getContext("webgl-experimental",g.attrs)}}return g.gl}}).call(this,"undefined"!==typeof W?W:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"pick-by-alias":485}],329:[function(b,F,C){F.exports=function(m,h,l){h?h.bind():m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,null);h=m.getParameter(m.MAX_VERTEX_ATTRIBS)|0;if(l){if(l.length>h)throw Error("gl-vao: Too many vertex attributes");for(var e=
0;e<l.length;++e){var a=l[e];if(a.buffer){var g=a.size||4,k=a.type||m.FLOAT,p=!!a.normalized,n=a.stride||0,c=a.offset||0;a.buffer.bind();m.enableVertexAttribArray(e);m.vertexAttribPointer(e,g,k,p,n,c)}else{if("number"===typeof a)m.vertexAttrib1f(e,a);else if(1===a.length)m.vertexAttrib1f(e,a[0]);else if(2===a.length)m.vertexAttrib2f(e,a[0],a[1]);else if(3===a.length)m.vertexAttrib3f(e,a[0],a[1],a[2]);else if(4===a.length)m.vertexAttrib4f(e,a[0],a[1],a[2],a[3]);else throw Error("gl-vao: Invalid vertex attribute");
m.disableVertexAttribArray(e)}}}else m.bindBuffer(m.ARRAY_BUFFER,null),e=0;for(;e<h;++e)m.disableVertexAttribArray(e)}},{}],330:[function(b,F,C){function m(l){this.gl=l;this._attributes=this._elements=null;this._elementsType=l.UNSIGNED_SHORT}var h=b("./do-bind.js");m.prototype.bind=function(){h(this.gl,this._elements,this._attributes)};m.prototype.update=function(l,e,a){this._elements=e;this._attributes=l;this._elementsType=a||this.gl.UNSIGNED_SHORT};m.prototype.dispose=function(){};m.prototype.unbind=
function(){};m.prototype.draw=function(l,e,a){a=a||0;var g=this.gl;this._elements?g.drawElements(l,e,this._elementsType,a):g.drawArrays(l,a,e)};F.exports=function(l){return new m(l)}},{"./do-bind.js":329}],331:[function(b,F,C){function m(e,a,g,k,p,n){this.location=e;this.dimension=a;this.a=g;this.b=k;this.c=p;this.d=n}function h(e,a,g){this.gl=e;this._ext=a;this.handle=g;this._attribs=[];this._useElements=!1;this._elementsType=e.UNSIGNED_SHORT}var l=b("./do-bind.js");m.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,
this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};h.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)};h.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};h.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};h.prototype.update=
function(e,a,g){this.bind();l(this.gl,a,e);this.unbind();this._attribs.length=0;if(e)for(var k=0;k<e.length;++k){var p=e[k];"number"===typeof p?this._attribs.push(new m(k,1,p)):Array.isArray(p)&&this._attribs.push(new m(k,p.length,p[0],p[1],p[2],p[3]))}this._useElements=!!a;this._elementsType=g||this.gl.UNSIGNED_SHORT};h.prototype.draw=function(e,a,g){g=g||0;var k=this.gl;this._useElements?k.drawElements(e,a,this._elementsType,g):k.drawArrays(e,g,a)};F.exports=function(e,a){return new h(e,a,a.createVertexArrayOES())}},
{"./do-bind.js":329}],332:[function(b,F,C){function m(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e);this.createVertexArrayOES=e.createVertexArray.bind(e);this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}var h=b("./lib/vao-native.js"),l=b("./lib/vao-emulated.js");F.exports=function(e,a,g,k){var p=e.createVertexArray?new m(e):e.getExtension("OES_vertex_array_object");e=p?h(e,p):l(e);e.update(a,g,k);return e}},{"./lib/vao-emulated.js":330,"./lib/vao-native.js":331}],333:[function(b,F,C){F.exports=
function(m,h,l){m[0]=h[0]+l[0];m[1]=h[1]+l[1];m[2]=h[2]+l[2];return m}},{}],334:[function(b,F,C){F.exports=function(e,a){e=m(e[0],e[1],e[2]);a=m(a[0],a[1],a[2]);h(e,e);h(a,a);a=l(e,a);return 1<a?0:Math.acos(a)};var m=b("./fromValues"),h=b("./normalize"),l=b("./dot")},{"./dot":344,"./fromValues":350,"./normalize":361}],335:[function(b,F,C){F.exports=function(m,h){m[0]=Math.ceil(h[0]);m[1]=Math.ceil(h[1]);m[2]=Math.ceil(h[2]);return m}},{}],336:[function(b,F,C){F.exports=function(m){var h=new Float32Array(3);
h[0]=m[0];h[1]=m[1];h[2]=m[2];return h}},{}],337:[function(b,F,C){F.exports=function(m,h){m[0]=h[0];m[1]=h[1];m[2]=h[2];return m}},{}],338:[function(b,F,C){F.exports=function(){var m=new Float32Array(3);m[0]=0;m[1]=0;m[2]=0;return m}},{}],339:[function(b,F,C){F.exports=function(m,h,l){var e=h[0],a=h[1];h=h[2];var g=l[0],k=l[1];l=l[2];m[0]=a*l-h*k;m[1]=h*g-e*l;m[2]=e*k-a*g;return m}},{}],340:[function(b,F,C){F.exports=b("./distance")},{"./distance":341}],341:[function(b,F,C){F.exports=function(m,h){var l=
h[0]-m[0],e=h[1]-m[1];m=h[2]-m[2];return Math.sqrt(l*l+e*e+m*m)}},{}],342:[function(b,F,C){F.exports=b("./divide")},{"./divide":343}],343:[function(b,F,C){F.exports=function(m,h,l){m[0]=h[0]/l[0];m[1]=h[1]/l[1];m[2]=h[2]/l[2];return m}},{}],344:[function(b,F,C){F.exports=function(m,h){return m[0]*h[0]+m[1]*h[1]+m[2]*h[2]}},{}],345:[function(b,F,C){F.exports=1E-6},{}],346:[function(b,F,C){F.exports=function(h,l){var e=h[0],a=h[1];h=h[2];var g=l[0],k=l[1];l=l[2];return Math.abs(e-g)<=m*Math.max(1,Math.abs(e),
Math.abs(g))&&Math.abs(a-k)<=m*Math.max(1,Math.abs(a),Math.abs(k))&&Math.abs(h-l)<=m*Math.max(1,Math.abs(h),Math.abs(l))};var m=b("./epsilon")},{"./epsilon":345}],347:[function(b,F,C){F.exports=function(m,h){return m[0]===h[0]&&m[1]===h[1]&&m[2]===h[2]}},{}],348:[function(b,F,C){F.exports=function(m,h){m[0]=Math.floor(h[0]);m[1]=Math.floor(h[1]);m[2]=Math.floor(h[2]);return m}},{}],349:[function(b,F,C){F.exports=function(h,l,e,a,g,k){l||(l=3);e||(e=0);for(a=a?Math.min(a*l+e,h.length):h.length;e<a;e+=
l)m[0]=h[e],m[1]=h[e+1],m[2]=h[e+2],g(m,m,k),h[e]=m[0],h[e+1]=m[1],h[e+2]=m[2];return h};var m=b("./create")()},{"./create":338}],350:[function(b,F,C){F.exports=function(m,h,l){var e=new Float32Array(3);e[0]=m;e[1]=h;e[2]=l;return e}},{}],351:[function(b,F,C){F.exports={EPSILON:b("./epsilon"),create:b("./create"),clone:b("./clone"),angle:b("./angle"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),equals:b("./equals"),exactEquals:b("./exactEquals"),add:b("./add"),subtract:b("./subtract"),
sub:b("./sub"),multiply:b("./multiply"),mul:b("./mul"),divide:b("./divide"),div:b("./div"),min:b("./min"),max:b("./max"),floor:b("./floor"),ceil:b("./ceil"),round:b("./round"),scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),dist:b("./dist"),squaredDistance:b("./squaredDistance"),sqrDist:b("./sqrDist"),length:b("./length"),len:b("./len"),squaredLength:b("./squaredLength"),sqrLen:b("./sqrLen"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),
cross:b("./cross"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformMat3:b("./transformMat3"),transformQuat:b("./transformQuat"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),forEach:b("./forEach")}},{"./add":333,"./angle":334,"./ceil":335,"./clone":336,"./copy":337,"./create":338,"./cross":339,"./dist":340,"./distance":341,"./div":342,"./divide":343,"./dot":344,"./epsilon":345,"./equals":346,"./exactEquals":347,"./floor":348,"./forEach":349,
"./fromValues":350,"./inverse":352,"./len":353,"./length":354,"./lerp":355,"./max":356,"./min":357,"./mul":358,"./multiply":359,"./negate":360,"./normalize":361,"./random":362,"./rotateX":363,"./rotateY":364,"./rotateZ":365,"./round":366,"./scale":367,"./scaleAndAdd":368,"./set":369,"./sqrDist":370,"./sqrLen":371,"./squaredDistance":372,"./squaredLength":373,"./sub":374,"./subtract":375,"./transformMat3":376,"./transformMat4":377,"./transformQuat":378}],352:[function(b,F,C){F.exports=function(m,h){m[0]=
1/h[0];m[1]=1/h[1];m[2]=1/h[2];return m}},{}],353:[function(b,F,C){F.exports=b("./length")},{"./length":354}],354:[function(b,F,C){F.exports=function(m){var h=m[0],l=m[1];m=m[2];return Math.sqrt(h*h+l*l+m*m)}},{}],355:[function(b,F,C){F.exports=function(m,h,l,e){var a=h[0],g=h[1];h=h[2];m[0]=a+e*(l[0]-a);m[1]=g+e*(l[1]-g);m[2]=h+e*(l[2]-h);return m}},{}],356:[function(b,F,C){F.exports=function(m,h,l){m[0]=Math.max(h[0],l[0]);m[1]=Math.max(h[1],l[1]);m[2]=Math.max(h[2],l[2]);return m}},{}],357:[function(b,
F,C){F.exports=function(m,h,l){m[0]=Math.min(h[0],l[0]);m[1]=Math.min(h[1],l[1]);m[2]=Math.min(h[2],l[2]);return m}},{}],358:[function(b,F,C){F.exports=b("./multiply")},{"./multiply":359}],359:[function(b,F,C){F.exports=function(m,h,l){m[0]=h[0]*l[0];m[1]=h[1]*l[1];m[2]=h[2]*l[2];return m}},{}],360:[function(b,F,C){F.exports=function(m,h){m[0]=-h[0];m[1]=-h[1];m[2]=-h[2];return m}},{}],361:[function(b,F,C){F.exports=function(m,h){var l=h[0],e=h[1],a=h[2];l=l*l+e*e+a*a;0<l&&(l=1/Math.sqrt(l),m[0]=
h[0]*l,m[1]=h[1]*l,m[2]=h[2]*l);return m}},{}],362:[function(b,F,C){F.exports=function(m,h){h=h||1;var l=2*Math.random()*Math.PI,e=2*Math.random()-1,a=Math.sqrt(1-e*e)*h;m[0]=Math.cos(l)*a;m[1]=Math.sin(l)*a;m[2]=e*h;return m}},{}],363:[function(b,F,C){F.exports=function(m,h,l,e){var a=l[1];l=l[2];var g=h[1]-a,k=h[2]-l,p=Math.sin(e);e=Math.cos(e);m[0]=h[0];m[1]=a+g*e-k*p;m[2]=l+g*p+k*e;return m}},{}],364:[function(b,F,C){F.exports=function(m,h,l,e){var a=l[0];l=l[2];var g=h[0]-a,k=h[2]-l,p=Math.sin(e);
e=Math.cos(e);m[0]=a+k*p+g*e;m[1]=h[1];m[2]=l+k*e-g*p;return m}},{}],365:[function(b,F,C){F.exports=function(m,h,l,e){var a=l[0];l=l[1];var g=h[0]-a,k=h[1]-l,p=Math.sin(e);e=Math.cos(e);m[0]=a+g*e-k*p;m[1]=l+g*p+k*e;m[2]=h[2];return m}},{}],366:[function(b,F,C){F.exports=function(m,h){m[0]=Math.round(h[0]);m[1]=Math.round(h[1]);m[2]=Math.round(h[2]);return m}},{}],367:[function(b,F,C){F.exports=function(m,h,l){m[0]=h[0]*l;m[1]=h[1]*l;m[2]=h[2]*l;return m}},{}],368:[function(b,F,C){F.exports=function(m,
h,l,e){m[0]=h[0]+l[0]*e;m[1]=h[1]+l[1]*e;m[2]=h[2]+l[2]*e;return m}},{}],369:[function(b,F,C){F.exports=function(m,h,l,e){m[0]=h;m[1]=l;m[2]=e;return m}},{}],370:[function(b,F,C){F.exports=b("./squaredDistance")},{"./squaredDistance":372}],371:[function(b,F,C){F.exports=b("./squaredLength")},{"./squaredLength":373}],372:[function(b,F,C){F.exports=function(m,h){var l=h[0]-m[0],e=h[1]-m[1];m=h[2]-m[2];return l*l+e*e+m*m}},{}],373:[function(b,F,C){F.exports=function(m){var h=m[0],l=m[1];m=m[2];return h*
h+l*l+m*m}},{}],374:[function(b,F,C){F.exports=b("./subtract")},{"./subtract":375}],375:[function(b,F,C){F.exports=function(m,h,l){m[0]=h[0]-l[0];m[1]=h[1]-l[1];m[2]=h[2]-l[2];return m}},{}],376:[function(b,F,C){F.exports=function(m,h,l){var e=h[0],a=h[1];h=h[2];m[0]=e*l[0]+a*l[3]+h*l[6];m[1]=e*l[1]+a*l[4]+h*l[7];m[2]=e*l[2]+a*l[5]+h*l[8];return m}},{}],377:[function(b,F,C){F.exports=function(m,h,l){var e=h[0],a=h[1];h=h[2];var g=l[3]*e+l[7]*a+l[11]*h+l[15];g=g||1;m[0]=(l[0]*e+l[4]*a+l[8]*h+l[12])/
g;m[1]=(l[1]*e+l[5]*a+l[9]*h+l[13])/g;m[2]=(l[2]*e+l[6]*a+l[10]*h+l[14])/g;return m}},{}],378:[function(b,F,C){F.exports=function(m,h,l){var e=h[0],a=h[1],g=h[2];h=l[0];var k=l[1],p=l[2];l=l[3];var n=l*e+k*g-p*a,c=l*a+p*e-h*g,f=l*g+h*a-k*e;e=-h*e-k*a-p*g;m[0]=n*l+e*-h+c*-p-f*-k;m[1]=c*l+e*-k+f*-h-n*-p;m[2]=f*l+e*-p+n*-k-c*-h;return m}},{}],379:[function(b,F,C){F.exports=function(m,h,l){m[0]=h[0]+l[0];m[1]=h[1]+l[1];m[2]=h[2]+l[2];m[3]=h[3]+l[3];return m}},{}],380:[function(b,F,C){F.exports=function(m){var h=
new Float32Array(4);h[0]=m[0];h[1]=m[1];h[2]=m[2];h[3]=m[3];return h}},{}],381:[function(b,F,C){F.exports=function(m,h){m[0]=h[0];m[1]=h[1];m[2]=h[2];m[3]=h[3];return m}},{}],382:[function(b,F,C){F.exports=function(){var m=new Float32Array(4);m[0]=0;m[1]=0;m[2]=0;m[3]=0;return m}},{}],383:[function(b,F,C){F.exports=function(m,h){var l=h[0]-m[0],e=h[1]-m[1],a=h[2]-m[2];m=h[3]-m[3];return Math.sqrt(l*l+e*e+a*a+m*m)}},{}],384:[function(b,F,C){F.exports=function(m,h,l){m[0]=h[0]/l[0];m[1]=h[1]/l[1];m[2]=
h[2]/l[2];m[3]=h[3]/l[3];return m}},{}],385:[function(b,F,C){F.exports=function(m,h){return m[0]*h[0]+m[1]*h[1]+m[2]*h[2]+m[3]*h[3]}},{}],386:[function(b,F,C){F.exports=function(m,h,l,e){var a=new Float32Array(4);a[0]=m;a[1]=h;a[2]=l;a[3]=e;return a}},{}],387:[function(b,F,C){F.exports={create:b("./create"),clone:b("./clone"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),add:b("./add"),subtract:b("./subtract"),multiply:b("./multiply"),divide:b("./divide"),min:b("./min"),max:b("./max"),
scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),squaredDistance:b("./squaredDistance"),length:b("./length"),squaredLength:b("./squaredLength"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformQuat:b("./transformQuat")}},{"./add":379,"./clone":380,"./copy":381,"./create":382,"./distance":383,"./divide":384,"./dot":385,"./fromValues":386,"./inverse":388,"./length":389,
"./lerp":390,"./max":391,"./min":392,"./multiply":393,"./negate":394,"./normalize":395,"./random":396,"./scale":397,"./scaleAndAdd":398,"./set":399,"./squaredDistance":400,"./squaredLength":401,"./subtract":402,"./transformMat4":403,"./transformQuat":404}],388:[function(b,F,C){F.exports=function(m,h){m[0]=1/h[0];m[1]=1/h[1];m[2]=1/h[2];m[3]=1/h[3];return m}},{}],389:[function(b,F,C){F.exports=function(m){var h=m[0],l=m[1],e=m[2];m=m[3];return Math.sqrt(h*h+l*l+e*e+m*m)}},{}],390:[function(b,F,C){F.exports=
function(m,h,l,e){var a=h[0],g=h[1],k=h[2];h=h[3];m[0]=a+e*(l[0]-a);m[1]=g+e*(l[1]-g);m[2]=k+e*(l[2]-k);m[3]=h+e*(l[3]-h);return m}},{}],391:[function(b,F,C){F.exports=function(m,h,l){m[0]=Math.max(h[0],l[0]);m[1]=Math.max(h[1],l[1]);m[2]=Math.max(h[2],l[2]);m[3]=Math.max(h[3],l[3]);return m}},{}],392:[function(b,F,C){F.exports=function(m,h,l){m[0]=Math.min(h[0],l[0]);m[1]=Math.min(h[1],l[1]);m[2]=Math.min(h[2],l[2]);m[3]=Math.min(h[3],l[3]);return m}},{}],393:[function(b,F,C){F.exports=function(m,
h,l){m[0]=h[0]*l[0];m[1]=h[1]*l[1];m[2]=h[2]*l[2];m[3]=h[3]*l[3];return m}},{}],394:[function(b,F,C){F.exports=function(m,h){m[0]=-h[0];m[1]=-h[1];m[2]=-h[2];m[3]=-h[3];return m}},{}],395:[function(b,F,C){F.exports=function(m,h){var l=h[0],e=h[1],a=h[2];h=h[3];var g=l*l+e*e+a*a+h*h;0<g&&(g=1/Math.sqrt(g),m[0]=l*g,m[1]=e*g,m[2]=a*g,m[3]=h*g);return m}},{}],396:[function(b,F,C){var m=b("./normalize"),h=b("./scale");F.exports=function(l,e){e=e||1;l[0]=Math.random();l[1]=Math.random();l[2]=Math.random();
l[3]=Math.random();m(l,l);h(l,l,e);return l}},{"./normalize":395,"./scale":397}],397:[function(b,F,C){F.exports=function(m,h,l){m[0]=h[0]*l;m[1]=h[1]*l;m[2]=h[2]*l;m[3]=h[3]*l;return m}},{}],398:[function(b,F,C){F.exports=function(m,h,l,e){m[0]=h[0]+l[0]*e;m[1]=h[1]+l[1]*e;m[2]=h[2]+l[2]*e;m[3]=h[3]+l[3]*e;return m}},{}],399:[function(b,F,C){F.exports=function(m,h,l,e,a){m[0]=h;m[1]=l;m[2]=e;m[3]=a;return m}},{}],400:[function(b,F,C){F.exports=function(m,h){var l=h[0]-m[0],e=h[1]-m[1],a=h[2]-m[2];
m=h[3]-m[3];return l*l+e*e+a*a+m*m}},{}],401:[function(b,F,C){F.exports=function(m){var h=m[0],l=m[1],e=m[2];m=m[3];return h*h+l*l+e*e+m*m}},{}],402:[function(b,F,C){F.exports=function(m,h,l){m[0]=h[0]-l[0];m[1]=h[1]-l[1];m[2]=h[2]-l[2];m[3]=h[3]-l[3];return m}},{}],403:[function(b,F,C){F.exports=function(m,h,l){var e=h[0],a=h[1],g=h[2];h=h[3];m[0]=l[0]*e+l[4]*a+l[8]*g+l[12]*h;m[1]=l[1]*e+l[5]*a+l[9]*g+l[13]*h;m[2]=l[2]*e+l[6]*a+l[10]*g+l[14]*h;m[3]=l[3]*e+l[7]*a+l[11]*g+l[15]*h;return m}},{}],404:[function(b,
F,C){F.exports=function(m,h,l){var e=h[0],a=h[1],g=h[2],k=l[0],p=l[1],n=l[2];l=l[3];var c=l*e+p*g-n*a,f=l*a+n*e-k*g,d=l*g+k*a-p*e;e=-k*e-p*a-n*g;m[0]=c*l+e*-k+f*-n-d*-p;m[1]=f*l+e*-p+d*-k-c*-n;m[2]=d*l+e*-n+c*-p-f*-k;m[3]=h[3];return m}},{}],405:[function(b,F,C){var m=b("glsl-tokenizer"),h=b("atob-lite");F.exports=function(l){l=Array.isArray(l)?l:m(l);for(var e=0;e<l.length;e++){var a=l[e];if("preprocessor"===a.type&&(a=a.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&a[2])return l=a[2],(a[1]?
h(l):l).trim()}}},{"atob-lite":77,"glsl-tokenizer":412}],406:[function(b,F,C){F.exports=function(E){function B(oa){oa.length&&V.push({type:x[O],data:oa,position:ea,line:Y,column:ba})}function t(){P=P.length?[]:P;if("/"===U&&"*"===Q)return ea=J+H-1,O=p,U=Q,H+1;if("/"===U&&"/"===Q)return ea=J+H-1,O=n,U=Q,H+1;if("#"===Q)return O=c,ea=J+H,H;if(/\s/.test(Q))return O=w,ea=J+H,H;ca=/\d/.test(Q);ia=/[^\w_]/.test(Q);ea=J+H;O=ca?d:ia?f:k;return H}function G(){if(("\r"===Q||"\n"===Q)&&"\\"!==U)return B(P.join("")),
O=g,H;P.push(Q);U=Q;return H+1}function I(){if("."===U&&/\d/.test(Q))return O=q,H;if("/"===U&&"*"===Q)return O=p,H;if("/"===U&&"/"===Q)return O=n,H;if("."===Q&&P.length){for(;L(P););O=q;return H}if(";"===Q||")"===Q||"("===Q){if(P.length)for(;L(P););B(Q);O=g;return H+1}var oa=2===P.length&&"\x3d"!==Q;if(/[\w_\d\s]/.test(Q)||oa){for(;L(P););O=g;return H}P.push(Q);U=Q;return H+1}function L(oa){var ua=0;do{var ka=h.indexOf(oa.slice(0,oa.length+ua).join(""));var sa=h[ka];if(-1===ka){if(0<ua--+oa.length)continue;
sa=oa.slice(0,1).join("")}B(sa);ea+=sa.length;P=P.slice(sa.length);return P.length}while(1)}function M(){if("."===Q||/[eE]/.test(Q))return P.push(Q),O=q,U=Q,H+1;if("x"===Q&&1===P.length&&"0"===P[0])return O=D,P.push(Q),U=Q,H+1;if(/[^\d]/.test(Q))return B(P.join("")),O=g,H;P.push(Q);U=Q;return H+1}function N(){"f"===Q&&(P.push(Q),U=Q,H+=1);if(/[eE]/.test(Q)||("-"===Q||"+"===Q)&&/[eE]/.test(U))return P.push(Q),U=Q,H+1;if(/[^\d]/.test(Q))return B(P.join("")),O=g,H;P.push(Q);U=Q;return H+1}var H=0,J=
0,O=g,Q,U,P=[],V=[],Y=1,ba=0,ea=0,ca=!1,ia=!1,fa="",ha;E=E||{};var na=l,pa=m;"300 es"===E.version&&(na=a,pa=e);var ra={},ta={};for(H=0;H<na.length;H++)ra[na[H]]=!0;for(H=0;H<pa.length;H++)ta[pa[H]]=!0;return function(oa){V=[];if(null!==oa){H=0;oa.toString&&(oa=oa.toString());fa+=oa.replace(/\r\n/g,"\n");for(ha=fa.length;Q=fa[H],H<ha;){oa=H;switch(O){case p:"/"===Q&&"*"===U?(P.push(Q),B(P.join("")),O=g):(P.push(Q),U=Q);H+=1;break;case n:H=G();break;case c:H=G();break;case f:H=I();break;case d:H=M();
break;case D:/[^a-fA-F0-9]/.test(Q)?(B(P.join("")),O=g):(P.push(Q),U=Q,H+=1);break;case q:H=N();break;case k:if(/[^\d\w_]/.test(Q)){var ua=P.join("");O=ta[ua]?v:ra[ua]?u:r;B(P.join(""));O=g}else P.push(Q),U=Q,H+=1;break;case w:/[^\s]/g.test(Q)?(B(P.join("")),O=g):(P.push(Q),U=Q,H+=1);break;case g:H=t()}if(oa!==H)switch(fa[oa]){case "\n":ba=0;++Y;break;default:++ba}}J+=H;fa=fa.slice(H);return V}P.length&&B(P.join(""));O=y;B("(eof)");return V}};var m=b("./lib/literals"),h=b("./lib/operators"),l=b("./lib/builtins"),
e=b("./lib/literals-300es"),a=b("./lib/builtins-300es"),g=999,k=9999,p=0,n=1,c=2,f=3,d=4,q=5,r=6,u=7,v=8,w=9,y=10,D=11,x="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},{"./lib/builtins":408,"./lib/builtins-300es":407,"./lib/literals":410,"./lib/literals-300es":409,"./lib/operators":411}],407:[function(b,F,C){b=b("./builtins");b=b.slice().filter(function(m){return!/^(gl_|texture)/.test(m)});F.exports=b.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":408}],408:[function(b,F,C){F.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],409:[function(b,F,C){b=b("./literals");F.exports=b.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":410}],410:[function(b,F,C){F.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int uint void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],411:[function(b,F,C){F.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")},{}],412:[function(b,F,C){var m=b("./index");F.exports=function(h,l){l=m(l);var e=[];e=e.concat(l(h));return e=e.concat(l(null))}},{"./index":406}],413:[function(b,F,C){F.exports=function(m){"string"===typeof m&&(m=[m]);for(var h=[].slice.call(arguments,
1),l=[],e=0;e<m.length-1;e++)l.push(m[e],h[e]||"");l.push(m[e]);return l.join("")}},{}],414:[function(b,F,C){C="undefined"!==typeof W?W:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b=b("is-browser");b="function"===typeof C.matchMedia?!C.matchMedia("(hover: none)").matches:b;F.exports=b},{"is-browser":438}],415:[function(b,F,C){function m(){var h=!1;try{var l=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("test",null,l);window.removeEventListener("test",
null,l)}catch(e){h=!1}return h}b=b("is-browser");F.exports=b&&m()},{"is-browser":438}],416:[function(b,F,C){C.read=function(m,h,l,e,a){var g=8*a-e-1;var k=(1<<g)-1,p=k>>1,n=-7;a=l?a-1:0;var c=l?-1:1,f=m[h+a];a+=c;l=f&(1<<-n)-1;f>>=-n;for(n+=g;0<n;l=256*l+m[h+a],a+=c,n-=8);g=l&(1<<-n)-1;l>>=-n;for(n+=e;0<n;g=256*g+m[h+a],a+=c,n-=8);if(0===l)l=1-p;else{if(l===k)return g?NaN:Infinity*(f?-1:1);g+=Math.pow(2,e);l-=p}return(f?-1:1)*g*Math.pow(2,l-e)};C.write=function(m,h,l,e,a,g){var k,p=8*g-a-1,n=(1<<
p)-1,c=n>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0;g=e?0:g-1;var d=e?1:-1,q=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);isNaN(h)||Infinity===h?(h=isNaN(h)?1:0,e=n):(e=Math.floor(Math.log(h)/Math.LN2),1>h*(k=Math.pow(2,-e))&&(e--,k*=2),h=1<=e+c?h+f/k:h+f*Math.pow(2,1-c),2<=h*k&&(e++,k/=2),e+c>=n?(h=0,e=n):1<=e+c?(h=(h*k-1)*Math.pow(2,a),e+=c):(h=h*Math.pow(2,c-1)*Math.pow(2,a),e=0));for(;8<=a;m[l+g]=h&255,g+=d,h/=256,a-=8);e=e<<a|h;for(p+=a;0<p;m[l+g]=e&255,g+=d,e/=256,p-=8);m[l+g-d]|=128*q}},{}],417:[function(b,
F,C){var m=b("./types");F.exports=function(h,l){var e,a;for(e in m)if(a=m[e].detect(h,l))return e}},{"./types":420}],418:[function(b,F,C){(function(m){function h(n,c){var f=p(n,c);if(f in k&&(n=k[f].calculate(n,c),!1!==n))return n.type=f,n;throw new TypeError("unsupported file type: "+f+" (file: "+c+")");}function l(n,c){a.open(n,"r",function(f,d){if(f)return c(f);a.fstat(d,function(q,r){if(q)return c(q);q=r.size;if(0>=q)return c(Error("File size is not greater than 0  "+n));q=Math.min(q,524288);
var u=m.alloc(q);a.read(d,u,0,q,0,function(v){if(v)return c(v);a.close(d,function(w){c(w,u)})})})})}function e(n){n=a.openSync(n,"r");var c=a.fstatSync(n).size;c=Math.min(c,524288);var f=m.alloc(c);a.readSync(n,f,0,c,0);a.closeSync(n);return f}var a=b("fs"),g=b("path"),k=b("./types"),p=b("./detector");F.exports=function(n,c){if(m.isBuffer(n))return h(n);if("string"!==typeof n)throw new TypeError("invalid invocation");var f=g.resolve(n);if("function"===typeof c)l(f,function(d,q){if(d)return c(d);try{var r=
h(q,f)}catch(u){d=u}c(d,r)});else return n=e(f),h(n,f)};F.exports.types=Object.keys(k)}).call(this,b("buffer").Buffer)},{"./detector":417,"./types":420,buffer:111,fs:109,path:481}],419:[function(b,F,C){F.exports=function(m,h,l,e){return m["readUInt"+h+(e?"BE":"LE")].call(m,l||0)}},{}],420:[function(b,F,C){b={bmp:b("./types/bmp"),cur:b("./types/cur"),dds:b("./types/dds"),gif:b("./types/gif"),icns:b("./types/icns"),ico:b("./types/ico"),jpg:b("./types/jpg"),png:b("./types/png"),psd:b("./types/psd"),
svg:b("./types/svg"),tiff:b("./types/tiff"),webp:b("./types/webp")};F.exports=b},{"./types/bmp":421,"./types/cur":422,"./types/dds":423,"./types/gif":424,"./types/icns":425,"./types/ico":426,"./types/jpg":427,"./types/png":428,"./types/psd":429,"./types/svg":430,"./types/tiff":431,"./types/webp":432}],421:[function(b,F,C){F.exports={detect:function(m){return"BM"===m.toString("ascii",0,2)},calculate:function(m){return{width:m.readUInt32LE(18),height:Math.abs(m.readInt32LE(22))}}}},{}],422:[function(b,
F,C){F.exports={detect:function(m){return 0!==m.readUInt16LE(0)?!1:2===m.readUInt16LE(2)},calculate:b("./ico").calculate}},{"./ico":426}],423:[function(b,F,C){F.exports={detect:function(m){return 542327876===m.readUInt32LE(0)},calculate:function(m){return{height:m.readUInt32LE(12),width:m.readUInt32LE(16)}}}},{}],424:[function(b,F,C){var m=/^GIF8[79]a/;F.exports={detect:function(h){h=h.toString("ascii",0,6);return m.test(h)},calculate:function(h){return{width:h.readUInt16LE(6),height:h.readUInt16LE(8)}}}},
{}],425:[function(b,F,C){function m(e,a){var g=a+4;return[e.toString("ascii",a,g),e.readUInt32BE(g)]}function h(e){var a=l[e];return{width:a,height:a,type:e}}var l={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};F.exports={detect:function(e){return"icns"===e.toString("ascii",0,4)},calculate:function(e){var a=
e.length,g=8,k=e.readUInt32BE(4),p;var n=m(e,g);var c=h(n[0]);g+=n[1];if(g===k)return c;for(p={width:c.width,height:c.height,images:[c]};g<k&&g<a;)n=m(e,g),c=h(n[0]),g+=n[1],p.images.push(c);return p}}},{}],426:[function(b,F,C){function m(l,e){l=l.readUInt8(e);return 0===l?256:l}function h(l,e){e=6+16*e;return{width:m(l,e),height:m(l,e+1)}}F.exports={detect:function(l){return 0!==l.readUInt16LE(0)?!1:1===l.readUInt16LE(2)},calculate:function(l){var e=l.readUInt16LE(4),a=h(l,0),g;if(1===e)return a;
a.images=[{width:a.width,height:a.height}];for(g=1;g<e;g+=1)a.images.push(h(l,g));return a}}},{}],427:[function(b,F,C){var m=b("../readUInt");F.exports={detect:function(h){return"ffd8"===h.toString("hex",0,2)},calculate:function(h){h=h.slice(4);for(var l,e,a;h.length;){e=h.readUInt16BE(0);if("45786966"===h.toString("hex",2,6)){l=h.slice(2,e);var g=l.toString("hex",6,8);a="4d4d"===g;g="4949"===g;if(a||g)b:{g=m(l,16,14,a);for(var k=0;k<g;k++){var p=16+12*k;var n=p+12;if(p>l.length)break;n=l.slice(p,
n);if(274===m(n,16,0,a)){if(3!==m(n,16,2,a))break;if(1!==m(n,32,4,a))break;l=m(n,16,8,a);break b}}l=void 0}else l=void 0}a=h;g=e;if(g>a.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==a[g])throw new TypeError("Invalid JPG, marker table corrupted");a=h[e+1];if(192===a||193===a||194===a)return e+=5,e={height:h.readUInt16BE(e),width:h.readUInt16BE(e+2)},l?{width:e.width,height:e.height,orientation:l}:e;h=h.slice(e+2)}throw new TypeError("Invalid JPG, no size found");}}},{"../readUInt":419}],
428:[function(b,F,C){F.exports={detect:function(m){if("PNG\r\n\n"===m.toString("ascii",1,8)){var h=m.toString("ascii",12,16);"CgBI"===h&&(h=m.toString("ascii",28,32));if("IHDR"!==h)throw new TypeError("invalid png");return!0}},calculate:function(m){return"CgBI"===m.toString("ascii",12,16)?{width:m.readUInt32BE(32),height:m.readUInt32BE(36)}:{width:m.readUInt32BE(16),height:m.readUInt32BE(20)}}}},{}],429:[function(b,F,C){F.exports={detect:function(m){return"8BPS"===m.toString("ascii",0,4)},calculate:function(m){return{width:m.readUInt32BE(18),
height:m.readUInt32BE(14)}}}},{}],430:[function(b,F,C){function m(k){if(k=/([0-9.]+)([a-z]*)/.exec(k))return Math.round(parseFloat(k[1])*(g[k[2]]||1))}var h=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,l=/\swidth=(['"])([^%]+?)\1/,e=/\sheight=(['"])([^%]+?)\1/,a=/\sviewBox=(['"])(.+?)\1/,g={cm:96/2.54,mm:96/2.54/10,m:96/2.54*100,pt:96/72,pc:96/72/12,em:16,ex:8};F.exports={detect:function(k){return h.test(k)},calculate:function(k){if(k=k.toString("utf8").match(h)){var p=k[0];k=p.match(l);var n=p.match(e);p=
p.match(a);k=k&&m(k[2]);n=n&&m(n[2]);var c;if(c=p)p=p[2].split(" "),c={width:m(p[2]),height:m(p[3])};p=c;if(k&&n)return{width:k,height:n};if(p)return c=p.width/p.height,k=k?{width:k,height:Math.floor(k/c)}:n?{width:Math.floor(n*c),height:n}:{width:p.width,height:p.height},k}throw new TypeError("invalid svg");}}},{}],431:[function(b,F,C){(function(m){var h=b("fs"),l=b("../readUInt");F.exports={detect:function(e){e=e.toString("hex",0,4);return"49492a00"===e||"4d4d002a"===e},calculate:function(e,a){if(!a)throw new TypeError("Tiff doesn't support buffer");
var g=e.toString("ascii",0,2);g="BE"===("II"===g?"LE":"MM"===g?"BE":void 0);e=l(e,32,4,g);var k=1024,p=h.statSync(a).size;e+k>p&&(k=p-e-10);p=m.alloc(k);a=h.openSync(a,"r");h.readSync(a,p,0,k,e);e=p.slice(2);a={};for(var n;e&&e.length&&(k=l(e,16,0,g),p=l(e,16,2,g),n=l(e,32,4,g),0!==k);){if(1===n&&(3===p||4===p)){p=e;n=g;var c=l(p,16,8,n);p=(l(p,16,10,n)<<16)+c;a[k]=p}e=24<e.length?e.slice(12):void 0}g=a[256];a=a[257];if(!g||!a)throw new TypeError("Invalid Tiff, missing tags");return{width:g,height:a}}}}).call(this,
b("buffer").Buffer)},{"../readUInt":419,buffer:111,fs:109}],432:[function(b,F,C){F.exports={detect:function(m){var h="RIFF"===m.toString("ascii",0,4),l="WEBP"===m.toString("ascii",8,12);m="VP8"===m.toString("ascii",12,15);return h&&l&&m},calculate:function(m){var h=m.toString("ascii",12,16);m=m.slice(20,30);if("VP8X"===h)return h=m[0],0===(h&192)&&0===(h&1)?{width:1+m.readUIntLE(4,3),height:1+m.readUIntLE(7,3)}:!1;if("VP8 "===h&&47!==m[0])return{width:m.readInt16LE(6)&16383,height:m.readInt16LE(8)&
16383};var l=m.toString("hex",3,6);return"VP8L"===h&&"9d012a"!==l?{width:1+((m[2]&63)<<8|m[1]),height:1+((m[4]&15)<<10|m[3]<<2|(m[2]&192)>>6)}:!1}}},{}],433:[function(b,F,C){function m(n,c,f){this.vertices=n;this.adjacent=c;this.boundary=f;this.lastVisited=-1}function h(n,c,f){this.vertices=n;this.cell=c;this.index=f}function l(n,c){return k(n.vertices,c.vertices)}function e(n){for(var c=["function orient(){var tuple\x3dthis.tuple;return test("],f=0;f<=n;++f)0<f&&c.push(","),c.push("tuple[",f,"]");
c.push(")}return orient");c=new Function("test",c.join(""));(n=g[n+1])||(n=g);return c(n)}function a(n,c,f){this.dimension=n;this.vertices=c;this.simplices=f;this.interior=f.filter(function(d){return!d.boundary});this.tuple=Array(n+1);for(c=0;c<=n;++c)this.tuple[c]=this.vertices[c];(c=p[n])||(c=p[n]=e(n));this.orient=c}F.exports=function(n,c){var f=n.length;if(0===f)throw Error("Must have at least d+1 points");var d=n[0].length;if(f<=d)throw Error("Must input at least d+1 points");var q=n.slice(0,
d+1),r=g.apply(void 0,q);if(0===r)throw Error("Input not in general position");for(var u=Array(d+1),v=0;v<=d;++v)u[v]=v;0>r&&(u[0]=1,u[1]=0);r=new m(u,Array(d+1),!1);var w=r.adjacent,y=Array(d+2);for(v=0;v<=d;++v){for(var D=u.slice(),x=0;x<=d;++x)x===v&&(D[x]=-1);x=D[0];D[0]=D[1];D[1]=x;D=new m(D,Array(d+1),!0);w[v]=D;y[v]=D}y[d+1]=r;for(v=0;v<=d;++v)for(D=w[v].vertices,u=w[v].adjacent,x=0;x<=d;++x){var E=D[x];if(0>E)u[x]=r;else for(var B=0;B<=d;++B)0>w[B].vertices.indexOf(E)&&(u[x]=w[B])}q=new a(d,
q,y);c=!!c;for(v=d+1;v<f;++v)q.insert(n[v],c);return q.boundary()};var g=b("robust-orientation"),k=b("simplicial-complex").compareCells;m.prototype.flip=function(){var n=this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=n;n=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=n};var p=[];b=a.prototype;b.handleBoundaryDegeneracy=function(n,c){var f=this.dimension,d=this.vertices.length-1,q=this.tuple,r=this.vertices,u=[n];for(n.lastVisited=-d;0<u.length;){n=u.pop();
n=n.adjacent;for(var v=0;v<=f;++v){var w=n[v];if(w.boundary&&!(w.lastVisited<=-d)){for(var y=w.vertices,D=0;D<=f;++D){var x=y[D];q[D]=0>x?c:r[x]}y=this.orient();if(0<y)return w;w.lastVisited=-d;0===y&&u.push(w)}}}return null};b.walk=function(n,c){var f=this.vertices.length-1,d=this.dimension,q=this.vertices,r=this.tuple,u=this.interior[c?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!u.boundary;){var v=u.vertices;c=u.adjacent;for(var w=0;w<=d;++w)r[w]=q[v[w]];u.lastVisited=f;
for(w=0;w<=d;++w)if(u=c[w],!(u.lastVisited>=f)){v=r[w];r[w]=n;var y=this.orient();r[w]=v;if(0>y)continue a;else u.lastVisited=u.boundary?-f:f}return}return u};b.addPeaks=function(n,c){var f=this.vertices.length-1,d=this.dimension,q=this.vertices,r=this.tuple,u=this.interior,v=this.simplices,w=[c];c.lastVisited=f;c.vertices[c.vertices.indexOf(-1)]=f;c.boundary=!1;u.push(c);for(var y=[];0<w.length;){c=w.pop();var D=c.vertices,x=c.adjacent,E=D.indexOf(f);if(!(0>E))for(var B=0;B<=d;++B)if(B!==E){var t=
x[B];if(t.boundary&&!(t.lastVisited>=f)){var G=t.vertices;if(t.lastVisited!==-f){for(var I=0,L=0;L<=d;++L)0>G[L]?(I=L,r[L]=n):r[L]=q[G[L]];if(0<this.orient()){G[I]=f;t.boundary=!1;u.push(t);w.push(t);t.lastVisited=f;continue}else t.lastVisited=-f}L=t.adjacent;G=D.slice();var M=x.slice();I=new m(G,M,!0);v.push(I);var N=L.indexOf(c);if(!(0>N))for(L[N]=I,M[E]=t,G[B]=-1,M[B]=c,x[B]=I,I.flip(),L=0;L<=d;++L)if(t=G[L],!(0>t||t===f)){t=Array(d-1);for(N=M=0;N<=d;++N){var H=G[N];0>H||N===L||(t[M++]=H)}y.push(new h(t,
I,L))}}}}y.sort(l);for(B=0;B+1<y.length;B+=2)n=y[B],c=y[B+1],f=c.index,0>n.index||0>f||(n.cell.adjacent[n.index]=c.cell,c.cell.adjacent[c.index]=n.cell)};b.insert=function(n,c){var f=this.vertices;f.push(n);if(c=this.walk(n,c)){for(var d=this.dimension,q=this.tuple,r=0;r<=d;++r){var u=c.vertices[r];q[r]=0>u?n:f[u]}f=this.orient(q);if(!(0>f)){if(0===f&&(c=this.handleBoundaryDegeneracy(c,n),!c))return;this.addPeaks(n,c)}}};b.boundary=function(){for(var n=this.dimension,c=[],f=this.simplices,d=f.length,
q=0;q<d;++q){var r=f[q];if(r.boundary){var u=Array(n);r=r.vertices;for(var v=0,w=0,y=0;y<=n;++y)0<=r[y]?u[v++]=r[y]:w=y&1;w===(n&1)&&(r=u[0],u[0]=u[1],u[1]=r);c.push(u)}}return c}},{"robust-orientation":520,"simplicial-complex":530}],434:[function(b,F,C){function m(r,u,v,w,y){this.mid=r;this.left=u;this.right=v;this.leftPoints=w;this.rightPoints=y;this.count=(u?u.count:0)+(v?v.count:0)+w.length}function h(r,u){r.mid=u.mid;r.left=u.left;r.right=u.right;r.leftPoints=u.leftPoints;r.rightPoints=u.rightPoints;
r.count=u.count}function l(r,u){u=f(u);r.mid=u.mid;r.left=u.left;r.right=u.right;r.leftPoints=u.leftPoints;r.rightPoints=u.rightPoints;r.count=u.count}function e(r,u){var v=r.intervals([]);u=v.indexOf(u);if(0>u)return 0;v.splice(u,1);l(r,v);return 1}function a(r,u,v){for(var w=0;w<r.length&&r[w][0]<=u;++w){var y=v(r[w]);if(y)return y}}function g(r,u,v){for(var w=r.length-1;0<=w&&r[w][1]>=u;--w){var y=v(r[w]);if(y)return y}}function k(r,u){for(var v=0;v<r.length;++v){var w=u(r[v]);if(w)return w}}function p(r,
u){return r-u}function n(r,u){var v=r[0]-u[0];return v?v:r[1]-u[1]}function c(r,u){var v=r[1]-u[1];return v?v:r[0]-u[0]}function f(r){if(0===r.length)return null;for(var u=[],v=0;v<r.length;++v)u.push(r[v][0],r[v][1]);u.sort(p);u=u[u.length>>1];var w=[],y=[],D=[];for(v=0;v<r.length;++v){var x=r[v];x[1]<u?w.push(x):u<x[0]?y.push(x):D.push(x)}r=D.slice();D.sort(n);r.sort(c);return new m(u,f(w),f(y),D,r)}function d(r){this.root=r}var q=b("binary-search-bounds");F.exports=function(r){return r&&0!==r.length?
new d(f(r)):new d(null)};b=m.prototype;b.intervals=function(r){r.push.apply(r,this.leftPoints);this.left&&this.left.intervals(r);this.right&&this.right.intervals(r);return r};b.insert=function(r){var u=this.count-this.leftPoints.length;this.count+=1;if(r[1]<this.mid)this.left?4*(this.left.count+1)>3*(u+1)?(u=this.intervals([]),u.push(r),l(this,u)):this.left.insert(r):this.left=f([r]);else if(r[0]>this.mid)this.right?4*(this.right.count+1)>3*(u+1)?(u=this.intervals([]),u.push(r),l(this,u)):this.right.insert(r):
this.right=f([r]);else{u=q.ge(this.leftPoints,r,n);var v=q.ge(this.rightPoints,r,c);this.leftPoints.splice(u,0,r);this.rightPoints.splice(v,0,r)}};b.remove=function(r){var u=this.count-this.leftPoints;if(r[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(u-1))return e(this,r);u=this.left.remove(r);if(2===u)return this.left=null,--this.count,1;1===u&&--this.count;return u}if(r[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(u-1))return e(this,r);
u=this.right.remove(r);if(2===u)return this.right=null,--this.count,1;1===u&&--this.count;return u}if(1===this.count)return this.leftPoints[0]===r?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===r){if(this.left&&this.right){r=this;for(var v=this.left;v.right;)r=v,v=v.right;if(r===this)v.right=this.right;else{var w=this.left;u=this.right;r.count-=v.count;r.right=v.left;v.left=w;v.right=u}h(this,v);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
h(this,this.left):h(this,this.right);return 1}for(w=q.ge(this.leftPoints,r,n);w<this.leftPoints.length&&this.leftPoints[w][0]===r[0];++w)if(this.leftPoints[w]===r)for(--this.count,this.leftPoints.splice(w,1),u=q.ge(this.rightPoints,r,c);u<this.rightPoints.length&&this.rightPoints[u][1]===r[1];++u)if(this.rightPoints[u]===r)return this.rightPoints.splice(u,1),1;return 0};b.queryPoint=function(r,u){if(r<this.mid){if(this.left){var v=this.left.queryPoint(r,u);if(v)return v}return a(this.leftPoints,r,
u)}return r>this.mid?this.right&&(v=this.right.queryPoint(r,u))?v:g(this.rightPoints,r,u):k(this.leftPoints,u)};b.queryInterval=function(r,u,v){if(r<this.mid&&this.left){var w=this.left.queryInterval(r,u,v);if(w)return w}return u>this.mid&&this.right&&(w=this.right.queryInterval(r,u,v))?w:u<this.mid?a(this.leftPoints,u,v):r>this.mid?g(this.rightPoints,r,v):k(this.leftPoints,v)};b=d.prototype;b.insert=function(r){this.root?this.root.insert(r):this.root=new m(r[0],null,null,[r],[r])};b.remove=function(r){return this.root?
(r=this.root.remove(r),2===r&&(this.root=null),0!==r):!1};b.queryPoint=function(r,u){if(this.root)return this.root.queryPoint(r,u)};b.queryInterval=function(r,u,v){if(r<=u&&this.root)return this.root.queryInterval(r,u,v)};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":435}],435:[function(b,F,C){arguments[4][243][0].apply(C,arguments)},{dup:243}],
436:[function(b,F,C){F.exports=function(m,h){h=h||Array(m.length);for(var l=0;l<m.length;++l)h[m[l]]=l;return h}},{}],437:[function(b,F,C){F.exports=function(m){for(var h=Array(m),l=0;l<m;++l)h[l]=l;return h}},{}],438:[function(b,F,C){F.exports=!0},{}],439:[function(b,F,C){function m(h){return!!h.constructor&&"function"===typeof h.constructor.isBuffer&&h.constructor.isBuffer(h)}F.exports=function(h){return null!=h&&(m(h)||"function"===typeof h.readFloatLE&&"function"===typeof h.slice&&m(h.slice(0,
0))||!!h._isBuffer)}},{}],440:[function(b,F,C){F.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],441:[function(b,F,C){function m(e){e||(e={});var a=e.ua;a||"undefined"===typeof navigator||(a=navigator.userAgent);a&&a.headers&&"string"===typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]);if("string"!==typeof a)return!1;var g=e.tablet?l.test(a):h.test(a);!g&&e.tablet&&e.featureDetect&&navigator&&1<navigator.maxTouchPoints&&
-1!==a.indexOf("Macintosh")&&-1!==a.indexOf("Safari")&&(g=!0);return g}F.exports=m;F.exports.isMobile=m;F.exports.default=m;var h=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,l=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},
{}],442:[function(b,F,C){F.exports=function(m){var h=typeof m;return null!==m&&("object"===h||"function"===h)}},{}],443:[function(b,F,C){var m=Object.prototype.toString;F.exports=function(h){var l;return"[object Object]"===m.call(h)&&(l=Object.getPrototypeOf(h),null===l||l===Object.getPrototypeOf({}))}},{}],444:[function(b,F,C){F.exports=function(m){for(var h=m.length,l,e=0;e<h;e++)if(l=m.charCodeAt(e),(9>l||13<l)&&32!==l&&133!==l&&160!==l&&5760!==l&&6158!==l&&(8192>l||8205<l)&&8232!==l&&8233!==l&&
8239!==l&&8287!==l&&8288!==l&&12288!==l&&65279!==l)return!1;return!0}},{}],445:[function(b,F,C){F.exports=function(m){if("string"!==typeof m)return!1;m=m.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(m)&&/[\dz]$/i.test(m)&&4<m.length?!0:!1}},{}],446:[function(b,F,C){F.exports=function(m,h,l){return m*(1-l)+h*l}},{}],447:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?F.exports=h():(m=m||self,m.mapboxgl=h())})(this,function(){function m(a,g){if(h)if(l){a="var sharedChunk \x3d {}; ("+
h+")(sharedChunk); ("+l+")(sharedChunk);";var k={};h(k);e=g(k);e.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else l=g;else h=g}var h,l,e;m(["exports"],function(a){function g(A,K){return A(K={exports:{}},K.exports),K.exports}function k(A,K,T,ma){this.cx=3*A;this.bx=3*(T-A)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*K;this.by=3*(ma-K)-this.cy;this.ay=1-this.cy-this.by;this.p1x=A;this.p1y=ma;this.p2x=T;this.p2y=ma}function p(A,K){this.x=A;this.y=K}function n(A,K,T,ma){var va=
new ah(A,K,T,ma);return function(Aa){return va.solve(Aa)}}function c(A,K,T){return Math.min(T,Math.max(K,A))}function f(A,K,T){var ma=T-K;A=((A-K)%ma+ma)%ma+K;return A===K?T:A}function d(A){for(var K=[],T=arguments.length-1;0<T--;)K[T]=arguments[T+1];for(T=0;T<K.length;T+=1){var ma=K[T],va;for(va in ma)A[va]=ma[va]}return A}function q(){return function T(K){return K?(K^16*Math.random()>>K/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,T)}()}function r(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}
function u(A,K){A.forEach(function(T){K[T]&&(K[T]=K[T].bind(K))})}function v(A,K){return-1!==A.indexOf(K,A.length-K.length)}function w(A,K,T){var ma={},va;for(va in A)ma[va]=K.call(T||this,A[va],va,A);return ma}function y(A,K,T){var ma={},va;for(va in A)K.call(T||this,A[va],va,A)&&(ma[va]=A[va]);return ma}function D(A){return Array.isArray(A)?A.map(D):"object"==typeof A&&A?w(A,D):A}function x(A){yj[A]||("undefined"!=typeof console&&console.warn(A),yj[A]=!0)}function E(A,K,T){return(T.y-A.y)*(K.x-
A.x)>(K.y-A.y)*(T.x-A.x)}function B(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function t(A){var K={};if(A.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(T,ma,va,Aa){T=va||Aa;return K[ma]=!T||T.toLowerCase(),""}),K["max-age"])A=parseInt(K["max-age"],10),isNaN(A)?delete K["max-age"]:K["max-age"]=A;return K}function G(A){if(null==
mg){var K=A.navigator?A.navigator.userAgent:null;mg=!!A.safari||!(!K||!(/\b(iPad|iPhone|iPod)\b/.test(K)||K.match("Safari")&&!K.match("Chrome")))}return mg}function I(A){try{var K=self[A];return K.setItem("_mapbox_test_",1),K.removeItem("_mapbox_test_"),!0}catch(T){return!1}}function L(A){var K=A.createTexture();A.bindTexture(A.TEXTURE_2D,K);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,bh),A.isContextLost())return;ng.supported=!0}catch(T){}A.deleteTexture(K);Bf=!0}function M(A){return 0===
A.indexOf("mapbox:")}function N(A){A=A.match(ck);if(!A)throw Error("Unable to parse URL object");return{protocol:A[1],authority:A[2],path:A[3]||"/",params:A[4]?A[4].split("\x26"):[]}}function H(A){var K=A.params.length?"?"+A.params.join("\x26"):"";return A.protocol+"://"+A.authority+A.path+K}function J(A){if(!A)return null;A=A.split(".");if(!A||3!==A.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(A[1]).split("").map(function(K){return"%"+("00"+K.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(K){return null}}
function O(){self.caches&&!Jf&&(Jf=self.caches.open("mapbox-tiles"))}function Q(A){var K=A.indexOf("?");return 0>K?A:A.slice(0,K)}function U(){return null==Z&&(Z=self.OffscreenCanvas&&(new self.OffscreenCanvas(1,1)).getContext("2d")&&"function"==typeof self.createImageBitmap),Z}function P(A,K,T){T[A]&&-1!==T[A].indexOf(K)||(T[A]=T[A]||[],T[A].push(K))}function V(A,K,T){T&&T[A]&&(K=T[A].indexOf(K),-1!==K&&T[A].splice(K,1))}function Y(A){var K=A.value;return K?[new Rb(A.key,K,"constants have been deprecated as of v8")]:
[]}function ba(A){for(var K=[],T=arguments.length-1;0<T--;)K[T]=arguments[T+1];for(T=0;T<K.length;T+=1){var ma=K[T],va;for(va in ma)A[va]=ma[va]}return A}function ea(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function ca(A){if(Array.isArray(A))return A.map(ca);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var K={},T;for(T in A)K[T]=ca(A[T]);return K}return ea(A)}function ia(A,K){return{kind:"array",itemType:A,
N:K}}function fa(A){if("array"===A.kind){var K=fa(A.itemType);return"number"==typeof A.N?"array\x3c"+K+", "+A.N+"\x3e":"value"===A.itemType.kind?"array":"array\x3c"+K+"\x3e"}return A.kind}function ha(A,K){if("error"===K.kind)return null;if("array"===A.kind){if("array"===K.kind&&(0===K.N&&"value"===K.itemType.kind||!ha(A.itemType,K.itemType))&&("number"!=typeof A.N||A.N===K.N))return null}else{if(A.kind===K.kind)return null;if("value"===A.kind)for(var T=0,ma=me;T<ma.length;T+=1)if(!ha(ma[T],K))return null}return"Expected "+
fa(A)+" but found "+fa(K)+" instead."}function na(A,K){return K.some(function(T){return T.kind===A.kind})}function pa(A,K){return K.some(function(T){return"null"===T?null===A:"array"===T?Array.isArray(A):"object"===T?A&&!Array.isArray(A)&&"object"==typeof A:T===typeof A})}function ra(A,K,T,ma){return"number"==typeof A&&0<=A&&255>=A&&"number"==typeof K&&0<=K&&255>=K&&"number"==typeof T&&0<=T&&255>=T?void 0===ma||"number"==typeof ma&&0<=ma&&1>=ma?null:"Invalid rgba value ["+[A,K,T,ma].join(", ")+"]: 'a' must be between 0 and 1.":
"Invalid rgba value ["+("number"==typeof ma?[A,K,T,ma]:[A,K,T]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ta(A){if(null===A||"string"==typeof A||"boolean"==typeof A||"number"==typeof A||A instanceof Md||A instanceof Ee||A instanceof ae||A instanceof we)return!0;if(Array.isArray(A)){for(var K=0;K<A.length;K+=1)if(!ta(A[K]))return!1;return!0}if("object"==typeof A){for(K in A)if(!ta(A[K]))return!1;return!0}return!1}function oa(A){if(null===A)return dd;if("string"==typeof A)return kd;
if("boolean"==typeof A)return md;if("number"==typeof A)return Lc;if(A instanceof Md)return Nd;if(A instanceof Ee)return Ld;if(A instanceof ae)return Zd;if(A instanceof we)return de;if(Array.isArray(A)){for(var K,T=A.length,ma=0;ma<A.length;ma+=1){var va=oa(A[ma]);if(K){if(K===va)continue;K=vd;break}K=va}return ia(K||vd,T)}return Bd}function ua(A){var K=typeof A;return null===A?"":"string"===K||"number"===K||"boolean"===K?String(A):A instanceof Md||A instanceof ae||A instanceof we?A.toString():JSON.stringify(A)}
function ka(A,K){A[0]=Math.min(A[0],K[0]);A[1]=Math.min(A[1],K[1]);A[2]=Math.max(A[2],K[0]);A[3]=Math.max(A[3],K[1])}function sa(A,K){return!(A[0]<=K[0]||A[2]>=K[2]||A[1]<=K[1]||A[3]>=K[3])}function ya(A,K){for(var T,ma,va,Aa,Ma,Va,jb,qb=!1,zb=0,Hb=K.length;zb<Hb;zb++)for(var Ub=K[zb],Sb=0,$b=Ub.length;Sb<$b-1;Sb++){if(0==(Aa=(T=A)[0]-(ma=Ub[Sb])[0])*(jb=T[1]-(va=Ub[Sb+1])[1])-(Va=T[0]-va[0])*(Ma=T[1]-ma[1])&&0>=Aa*Va&&0>=Ma*jb)return!1;var bc=Ub[Sb],Ec=Ub[Sb+1];bc[1]>A[1]!=Ec[1]>A[1]&&A[0]<(Ec[0]-
bc[0])*(A[1]-bc[1])/(Ec[1]-bc[1])+bc[0]&&(qb=!qb)}return qb}function qa(A,K,T,ma){var va=ma[0]-T[0];ma=ma[1]-T[1];A=(A[0]-T[0])*ma-va*(A[1]-T[1]);K=(K[0]-T[0])*ma-va*(K[1]-T[1]);return 0<A&&0>K||0>A&&0<K}function xa(A,K){for(var T=0;T<A.length;++T)if(!ya(A[T],K))return!1;for(T=0;T<A.length-1;++T){var ma;a:{for(var va=ma=void 0,Aa=void 0,Ma=void 0,Va=void 0,jb=void 0,qb=A[T],zb=A[T+1],Hb=0,Ub=K;Hb<Ub.length;Hb+=1)for(var Sb=Ub[Hb],$b=0;$b<Sb.length-1;++$b)if(0!=(va=[(Aa=Sb[$b+1])[0]-(Ma=Sb[$b])[0],
Aa[1]-Ma[1]])[0]*(ma=[(Va=zb)[0]-(jb=qb)[0],Va[1]-jb[1]])[1]-va[1]*ma[0]&&qa(jb,Va,Ma,Aa)&&qa(Ma,Aa,jb,Va)){ma=!0;break a}ma=!1}if(ma)return!1}return!0}function Ca(A,K,T){for(var ma=[],va=0;va<A.length;va++){for(var Aa=[],Ma=0;Ma<A[va].length;Ma++){var Va=A[va][Ma];var jb=Math.pow(2,T.z);Va=[Math.round((180+Va[0])/360*jb*8192),Math.round((180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Va[1]*Math.PI/360)))/360*jb*8192)];ka(K,Va);Aa.push(Va)}ma.push(Aa)}return ma}function Ja(A,K,T){for(var ma=[],va=0;va<
A.length;va++){var Aa=Ca(A[va],K,T);ma.push(Aa)}return ma}function eb(A,K,T,ma){if(A[0]<T[0]||A[0]>T[2]){var va=.5*ma,Aa=A[0]-T[0]>va?-ma:T[0]-A[0]>va?ma:0;0===Aa&&(Aa=A[0]-T[2]>va?-ma:T[2]-A[0]>va?ma:0);A[0]+=Aa}ka(K,A)}function Ra(A,K,T,ma){var va=8192*Math.pow(2,ma.z);ma=[8192*ma.x,8192*ma.y];for(var Aa=[],Ma=0;Ma<A.length;Ma+=1)for(var Va=0,jb=A[Ma];Va<jb.length;Va+=1){var qb=jb[Va];qb=[qb.x+ma[0],qb.y+ma[1]];eb(qb,K,T,va);Aa.push(qb)}return Aa}function Wa(A,K,T,ma){var va=8192*Math.pow(2,ma.z),
Aa=[8192*ma.x,8192*ma.y];ma=[];for(var Ma=0;Ma<A.length;Ma+=1){for(var Va=[],jb=0,qb=A[Ma];jb<qb.length;jb+=1){var zb=qb[jb];zb=[zb.x+Aa[0],zb.y+Aa[1]];ka(K,zb);Va.push(zb)}ma.push(Va)}if(K[2]-K[0]<=va/2)for(K[0]=K[1]=1/0,K[2]=K[3]=-1/0,A=0;A<ma.length;A+=1)for(Aa=0,Ma=ma[A];Aa<Ma.length;Aa+=1)eb(Ma[Aa],K,T,va);return ma}function Ea(A){if(A instanceof df&&("get"===A.name&&1===A.args.length||"feature-state"===A.name||"has"===A.name&&1===A.args.length||"properties"===A.name||"geometry-type"===A.name||
"id"===A.name||/^filter-/.test(A.name))||A instanceof gf)return!1;var K=!0;return A.eachChild(function(T){K&&!Ea(T)&&(K=!1)}),K}function Ia(A){if(A instanceof df&&"feature-state"===A.name)return!1;var K=!0;return A.eachChild(function(T){K&&!Ia(T)&&(K=!1)}),K}function Qa(A,K){if(A instanceof df&&0<=K.indexOf(A.name))return!1;var T=!0;return A.eachChild(function(ma){T&&!Qa(ma,K)&&(T=!1)}),T}function lb(A,K){for(var T,ma=A.length-1,va=0,Aa=ma,Ma;va<=Aa;)if((T=A[Ma=Math.floor((va+Aa)/2)])<=K){if(Ma===
ma||K<A[Ma+1])return Ma;va=Ma+1}else{if(!(T>K))throw new Ke("Input is not a number.");Aa=Ma-1}return 0}function hb(A,K,T){return A*(1-T)+K*T}function Fa(A){return.008856451679035631<A?Math.pow(A,1/3):A/wi+4/29}function La(A){return A>6/29?A*A*A:wi*(A-4/29)}function Oa(A){return 255*(.0031308>=A?12.92*A:1.055*Math.pow(A,1/2.4)-.055)}function fb(A){return.04045>=(A/=255)?A/12.92:Math.pow((A+.055)/1.055,2.4)}function bb(A){var K=fb(A.r),T=fb(A.g),ma=fb(A.b),va=Fa((.4124564*K+.3575761*T+.1804375*ma)/
.95047),Aa=Fa(.2126729*K+.7151522*T+.072175*ma);return{l:116*Aa-16,a:500*(va-Aa),b:200*(Aa-Fa((.0193339*K+.119192*T+.9503041*ma)/1.08883)),alpha:A.a}}function Pa(A){var K=(A.l+16)/116,T=isNaN(A.a)?K:K+A.a/500,ma=isNaN(A.b)?K:K-A.b/200;return K=1*La(K),T=.95047*La(T),ma=1.08883*La(ma),new Md(Oa(3.2404542*T-1.5371385*K-.4985314*ma),Oa(-.969266*T+1.8760108*K+.041556*ma),Oa(.0556434*T-.2040259*K+1.0572252*ma),A.alpha)}function Ta(A,K,T,ma){ma-=T;A-=T;return 0===ma?0:1===K?A/ma:(Math.pow(K,A)-1)/(Math.pow(K,
ma)-1)}function Ya(A,K){return"\x3d\x3d"===A||"!\x3d"===A?"boolean"===K.kind||"string"===K.kind||"number"===K.kind||"null"===K.kind||"value"===K.kind:"string"===K.kind||"number"===K.kind||"value"===K.kind}function nb(A,K,T,ma){return 0===ma.compare(K,T)}function Da(A,K,T){var ma="\x3d\x3d"!==A&&"!\x3d"!==A;return function(){function va(Aa,Ma,Va){this.type=md;this.lhs=Aa;this.rhs=Ma;this.collator=Va;this.hasUntypedArgument="value"===Aa.type.kind||"value"===Ma.type.kind}return va.parse=function(Aa,
Ma){if(3!==Aa.length&&4!==Aa.length)return Ma.error("Expected two or three arguments.");var Va=Aa[0],jb=Ma.parse(Aa[1],1,vd);if(!jb)return null;if(!Ya(Va,jb.type))return Ma.concat(1).error('"'+Va+"\" comparisons are not supported for type '"+fa(jb.type)+"'.");var qb=Ma.parse(Aa[2],2,vd);if(!qb)return null;if(!Ya(Va,qb.type))return Ma.concat(2).error('"'+Va+"\" comparisons are not supported for type '"+fa(qb.type)+"'.");if(jb.type.kind!==qb.type.kind&&"value"!==jb.type.kind&&"value"!==qb.type.kind)return Ma.error("Cannot compare types '"+
fa(jb.type)+"' and '"+fa(qb.type)+"'.");ma&&("value"===jb.type.kind&&"value"!==qb.type.kind?jb=new vf(qb.type,[jb]):"value"!==jb.type.kind&&"value"===qb.type.kind&&(qb=new vf(jb.type,[qb])));Va=null;if(4===Aa.length){if("string"!==jb.type.kind&&"string"!==qb.type.kind&&"value"!==jb.type.kind&&"value"!==qb.type.kind)return Ma.error("Cannot use collator to compare non-string types.");if(!(Va=Ma.parse(Aa[3],3,Ld)))return null}return new va(jb,qb,Va)},va.prototype.evaluate=function(Aa){var Ma=this.lhs.evaluate(Aa),
Va=this.rhs.evaluate(Aa);if(ma&&this.hasUntypedArgument){var jb=oa(Ma),qb=oa(Va);if(jb.kind!==qb.kind||"string"!==jb.kind&&"number"!==jb.kind)throw new Ke('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+jb.kind+", "+qb.kind+") instead.");}return this.collator&&!ma&&this.hasUntypedArgument&&(jb=oa(Ma),qb=oa(Va),"string"!==jb.kind||"string"!==qb.kind)?K(Aa,Ma,Va):this.collator?T(Aa,Ma,Va,this.collator.evaluate(Aa)):K(Aa,Ma,Va)},va.prototype.eachChild=function(Aa){Aa(this.lhs);
Aa(this.rhs);this.collator&&Aa(this.collator)},va.prototype.outputDefined=function(){return!0},va.prototype.serialize=function(){var Aa=[A];return this.eachChild(function(Ma){Aa.push(Ma.serialize())}),Aa},va}()}function Ha(A,K){var T=K[0],ma=K[1],va=K[2];K=K[3];T=T.evaluate(A);ma=ma.evaluate(A);va=va.evaluate(A);A=K?K.evaluate(A):1;if(K=ra(T,ma,va,A))throw new Ke(K);return new Md(T/255*A,ma/255*A,va/255*A,A)}function ab(A,K){A=K[A];return void 0===A?null:A}function ib(A){return{result:"error",value:A}}
function ob(A){return"data-driven"===A["property-type"]||"cross-faded-data-driven"===A["property-type"]}function db(A){return!!A.expression&&-1<A.expression.parameters.indexOf("zoom")}function gb(A){return!!A.expression&&A.expression.interpolated}function rb(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":null===A?"null":typeof A}function Bb(A){return"object"==typeof A&&null!==A&&!Array.isArray(A)}function Qb(A){return A}
function gc(A,K,T){return void 0!==A?A:void 0!==K?K:void 0!==T?T:void 0}function tc(A,K,T,ma,va){return gc(typeof T===va?ma[T]:void 0,A.default,K.default)}function Ac(A,K,T){if("number"!==rb(T))return gc(A.default,K.default);K=A.stops.length;if(1===K||T<=A.stops[0][0])return A.stops[0][1];if(T>=A.stops[K-1][0])return A.stops[K-1][1];T=lb(A.stops.map(function(ma){return ma[0]}),T);return A.stops[T][1]}function Uc(A,K,T){var ma=void 0!==A.base?A.base:1;if("number"!==rb(T))return gc(A.default,K.default);
var va=A.stops.length;if(1===va||T<=A.stops[0][0])return A.stops[0][1];if(T>=A.stops[va-1][0])return A.stops[va-1][1];va=lb(A.stops.map(function(zb){return zb[0]}),T);var Aa=function(zb,Hb,Ub,Sb){Sb-=Ub;zb-=Ub;return 0===Sb?0:1===Hb?zb/Sb:(Math.pow(Hb,zb)-1)/(Math.pow(Hb,Sb)-1)}(T,ma,A.stops[va][0],A.stops[va+1][0]),Ma=A.stops[va][1],Va=A.stops[va+1][1],jb=Bg[K.type]||Qb;if(A.colorSpace&&"rgb"!==A.colorSpace){var qb=Lf[A.colorSpace];jb=function(zb,Hb){return qb.reverse(qb.interpolate(qb.forward(zb),
qb.forward(Hb),Aa))}}return"function"==typeof Ma.evaluate?{evaluate:function(){for(var zb=[],Hb=arguments.length;Hb--;)zb[Hb]=arguments[Hb];Hb=Ma.evaluate.apply(void 0,zb);zb=Va.evaluate.apply(void 0,zb);if(void 0!==Hb&&void 0!==zb)return jb(Hb,zb,Aa)}}:jb(Ma,Va,Aa)}function Nc(A,K,T){return"color"===K.type?T=Md.parse(T):"formatted"===K.type?T=ae.fromString(T.toString()):"resolvedImage"===K.type?T=we.fromString(T.toString()):rb(T)===K.type||"enum"===K.type&&K.values[T]||(T=void 0),gc(T,A.default,
K.default)}function gd(A){return Array.isArray(A)&&0<A.length&&"string"==typeof A[0]&&A[0]in tg}function Xc(A,K){var T=Yf;if(K){var ma={color:Nd,string:kd,number:Lc,enum:kd,boolean:md,formatted:Zd,resolvedImage:de};ma="array"===K.type?ia(ma[K.value]||vd,K.length):ma[K.type]}else ma=void 0;T=new T(tg,[],ma);return(A=T.parse(A,void 0,void 0,void 0,K&&"string"===K.type?{typeAnnotation:"coerce"}:void 0))?{result:"success",value:new hj(A,K)}:ib(T.errors)}function ed(A,K){if("error"===(A=Xc(A,K)).result)return A;
var T=A.value.expression,ma=Ea(T);if(!ma&&!ob(K))return ib([new zc("","data expressions not supported")]);var va=Qa(T,["zoom"]);return va||db(K)?(T=function Va(Ma){var jb=null;if(Ma instanceof Wh)jb=Va(Ma.result);else if(Ma instanceof Vh)for(var qb=0,zb=Ma.args;qb<zb.length&&!(jb=Va(zb[qb]));qb+=1);else(Ma instanceof Ag||Ma instanceof of)&&Ma.input instanceof df&&"zoom"===Ma.input.name&&(jb=Ma);return jb instanceof zc||Ma.eachChild(function(Hb){Hb=Va(Hb);Hb instanceof zc?jb=Hb:!jb&&Hb?jb=new zc("",
'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):jb&&Hb&&jb!==Hb&&(jb=new zc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),jb}(T))||va?T instanceof zc?ib([T]):T instanceof of&&!gb(K)?ib([new zc("",'"interpolate" expressions cannot be used with this property')]):{result:"success",value:T?new fe(ma?"camera":"composite",A.value,T.labels,T instanceof of?T.interpolation:void 0):new ki(ma?"constant":"source",
A.value)}:ib([new zc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):ib([new zc("","zoom expressions not supported")])}function tb(A){var K=A.key,T=A.value,ma=A.valueSpec||{},va=A.objectElementValidators||{},Aa=A.style;A=A.styleSpec;var Ma=[],Va=rb(T);if("object"!==Va)return[new Rb(K,T,"object expected, "+Va+" found")];for(var jb in T){var qb=jb.split(".")[0];Va=ma[qb]||ma["*"];if(va[qb])qb=va[qb];else if(ma[qb])qb=Ic;else if(va["*"])qb=va["*"];
else{if(!ma["*"]){Ma.push(new Rb(K,T[jb],'unknown property "'+jb+'"'));continue}qb=Ic}Ma=Ma.concat(qb({key:(K?K+".":K)+jb,value:T[jb],valueSpec:Va,style:Aa,styleSpec:A,object:T,objectKey:jb},T))}for(var zb in ma)va[zb]||ma[zb].required&&void 0===ma[zb].default&&void 0===T[zb]&&Ma.push(new Rb(K,T,'missing required property "'+zb+'"'));return Ma}function Xb(A){var K=A.value,T=A.valueSpec,ma=A.style,va=A.styleSpec,Aa=A.key;A=A.arrayElementValidator||Ic;if("array"!==rb(K))return[new Rb(Aa,K,"array expected, "+
rb(K)+" found")];if(T.length&&K.length!==T.length)return[new Rb(Aa,K,"array length "+T.length+" expected, length "+K.length+" found")];if(T["min-length"]&&K.length<T["min-length"])return[new Rb(Aa,K,"array length at least "+T["min-length"]+" expected, length "+K.length+" found")];var Ma={type:T.value,values:T.values};7>va.$version&&(Ma.function=T.function);"object"===rb(T.value)&&(Ma=T.value);T=[];for(var Va=0;Va<K.length;Va++)T=T.concat(A({array:K,arrayIndex:Va,value:K[Va],valueSpec:Ma,style:ma,
styleSpec:va,key:Aa+"["+Va+"]"}));return T}function uc(A){var K=A.key,T=A.value;A=A.valueSpec;var ma=rb(T);return"number"===ma&&T!=T&&(ma="NaN"),"number"!==ma?[new Rb(K,T,"number expected, "+ma+" found")]:"minimum"in A&&T<A.minimum?[new Rb(K,T,T+" is less than the minimum value "+A.minimum)]:"maximum"in A&&T>A.maximum?[new Rb(K,T,T+" is greater than the maximum value "+A.maximum)]:[]}function Mc(A){function K(Sb){var $b=[],bc=Sb.value,Ec=Sb.key;if("array"!==rb(bc))return[new Rb(Ec,bc,"array expected, "+
rb(bc)+" found")];if(2!==bc.length)return[new Rb(Ec,bc,"array length 2 expected, length "+bc.length+" found")];if(Hb){if("object"!==rb(bc[0]))return[new Rb(Ec,bc,"object expected, "+rb(bc[0])+" found")];if(void 0===bc[0].zoom)return[new Rb(Ec,bc,"object stop key must have zoom")];if(void 0===bc[0].value)return[new Rb(Ec,bc,"object stop key must have value")];if(Aa&&Aa>ea(bc[0].zoom))return[new Rb(Ec,bc[0].zoom,"stop zoom values must appear in ascending order")];ea(bc[0].zoom)!==Aa&&(Aa=ea(bc[0].zoom),
va=void 0,jb={});$b=$b.concat(tb({key:Ec+"[0]",value:bc[0],valueSpec:{zoom:{}},style:Sb.style,styleSpec:Sb.styleSpec,objectElementValidators:{zoom:uc,value:T}}))}else $b=$b.concat(T({key:Ec+"[0]",value:bc[0],valueSpec:{},style:Sb.style,styleSpec:Sb.styleSpec},bc));return gd(ca(bc[1]))?$b.concat([new Rb(Ec+"[1]",bc[1],"expressions are not allowed in function stops.")]):$b.concat(Ic({key:Ec+"[1]",value:bc[1],valueSpec:Ma,style:Sb.style,styleSpec:Sb.styleSpec}))}function T(Sb,$b){var bc=rb(Sb.value),
Ec=ea(Sb.value);$b=null!==Sb.value?Sb.value:$b;if(ma){if(bc!==ma)return[new Rb(Sb.key,$b,bc+" stop domain type must match previous stop domain type "+ma)]}else ma=bc;return"number"!==bc&&"string"!==bc&&"boolean"!==bc?[new Rb(Sb.key,$b,"stop domain value must be a number, string, or boolean")]:"number"!==bc&&"categorical"!==Va?(bc="number expected, "+bc+" found",ob(Ma)&&void 0===Va&&(bc+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Rb(Sb.key,$b,bc)]):"categorical"!==
Va||"number"!==bc||isFinite(Ec)&&Math.floor(Ec)===Ec?"categorical"!==Va&&"number"===bc&&void 0!==va&&Ec<va?[new Rb(Sb.key,$b,"stop domain values must appear in ascending order")]:(va=Ec,"categorical"===Va&&Ec in jb?[new Rb(Sb.key,$b,"stop domain values must be unique")]:(jb[Ec]=!0,[])):[new Rb(Sb.key,$b,"integer expected, found "+Ec)]}var ma,va,Aa,Ma=A.valueSpec,Va=ea(A.value.type),jb={},qb="categorical"!==Va&&void 0===A.value.property,zb=!qb,Hb="array"===rb(A.value.stops)&&"array"===rb(A.value.stops[0])&&
"object"===rb(A.value.stops[0][0]),Ub=tb({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Sb){if("identity"===Va)return[new Rb(Sb.key,Sb.value,'identity function may not have a "stops" property')];var $b=[],bc=Sb.value;return $b=$b.concat(Xb({key:Sb.key,value:bc,valueSpec:Sb.valueSpec,style:Sb.style,styleSpec:Sb.styleSpec,arrayElementValidator:K})),"array"===rb(bc)&&0===bc.length&&$b.push(new Rb(Sb.key,bc,"array must have at least one stop")),
$b},default:function(Sb){return Ic({key:Sb.key,value:Sb.value,valueSpec:Ma,style:Sb.style,styleSpec:Sb.styleSpec})}}});return"identity"===Va&&qb&&Ub.push(new Rb(A.key,A.value,'missing required property "property"')),"identity"===Va||A.value.stops||Ub.push(new Rb(A.key,A.value,'missing required property "stops"')),"exponential"===Va&&A.valueSpec.expression&&!gb(A.valueSpec)&&Ub.push(new Rb(A.key,A.value,"exponential functions not supported")),8<=A.styleSpec.$version&&(zb&&!ob(A.valueSpec)?Ub.push(new Rb(A.key,
A.value,"property functions not supported")):qb&&!db(A.valueSpec)&&Ub.push(new Rb(A.key,A.value,"zoom functions not supported"))),"categorical"!==Va&&!Hb||void 0!==A.value.property||Ub.push(new Rb(A.key,A.value,'"property" property is required')),Ub}function Rc(A){var K=("property"===A.expressionContext?ed:Xc)(ca(A.value),A.valueSpec);if("error"===K.result)return K.value.map(function(T){return new Rb(""+A.key+T.key,A.value,T.message)});K=K.value.expression||K.value._styleExpression.expression;if("property"===
A.expressionContext&&"text-font"===A.propertyKey&&!K.outputDefined())return[new Rb(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===A.expressionContext&&"layout"===A.propertyType&&!Ia(K))return[new Rb(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===A.expressionContext&&!Ia(K))return[new Rb(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];
if(A.expressionContext&&0===A.expressionContext.indexOf("cluster")){if(!Qa(K,["zoom","feature-state"]))return[new Rb(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===A.expressionContext&&!Ea(K))return[new Rb(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function fd(A){var K=A.key,T=A.value;A=A.valueSpec;var ma=[];return Array.isArray(A.values)?-1===
A.values.indexOf(ea(T))&&ma.push(new Rb(K,T,"expected one of ["+A.values.join(", ")+"], "+JSON.stringify(T)+" found")):-1===Object.keys(A.values).indexOf(ea(T))&&ma.push(new Rb(K,T,"expected one of ["+Object.keys(A.values).join(", ")+"], "+JSON.stringify(T)+" found")),ma}function sb(A){if(!0===A||!1===A)return!0;if(!Array.isArray(A)||0===A.length)return!1;switch(A[0]){case "has":return 2<=A.length&&"$id"!==A[1]&&"$type"!==A[1];case "in":return 3<=A.length&&("string"!=typeof A[1]||Array.isArray(A[2]));
case "!in":case "!has":case "none":return!1;case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3!==A.length||Array.isArray(A[1])||Array.isArray(A[2]);case "any":case "all":var K=0;for(A=A.slice(1);K<A.length;K+=1){var T=A[K];if(!sb(T)&&"boolean"!=typeof T)return!1}return!0;default:return!0}}function xb(A){if(null==A)return{filter:function(){return!0},needGeometry:!1};sb(A)||(A=nc(A));var K=Xc(A,ol);if("error"===K.result)throw Error(K.value.map(function(T){return T.key+
": "+T.message}).join(", "));return{filter:function(T,ma,va){return K.value.evaluate(T,ma,{},va)},needGeometry:function va(ma){if(!Array.isArray(ma))return!1;if("within"===ma[0])return!0;for(var Aa=1;Aa<ma.length;Aa++)if(va(ma[Aa]))return!0;return!1}(A)}}function kc(A,K){return A<K?-1:A>K?1:0}function nc(A){if(!A)return!0;var K,T=A[0];return 1>=A.length?"any"!==T:"\x3d\x3d"===T?Kc(A[1],A[2],"\x3d\x3d"):"!\x3d"===T?yb(Kc(A[1],A[2],"\x3d\x3d")):"\x3c"===T||"\x3e"===T||"\x3c\x3d"===T||"\x3e\x3d"===T?
Kc(A[1],A[2],T):"any"===T?(K=A.slice(1),["any"].concat(K.map(nc))):"all"===T?["all"].concat(A.slice(1).map(nc)):"none"===T?["all"].concat(A.slice(1).map(nc).map(yb)):"in"===T?ac(A[1],A.slice(2)):"!in"===T?yb(ac(A[1],A.slice(2))):"has"===T?Tb(A[1]):"!has"===T?yb(Tb(A[1])):"within"!==T||A}function Kc(A,K,T){switch(A){case "$type":return["filter-type-"+T,K];case "$id":return["filter-id-"+T,K];default:return["filter-"+T,A,K]}}function ac(A,K){if(0===K.length)return!1;switch(A){case "$type":return["filter-type-in",
["literal",K]];case "$id":return["filter-id-in",["literal",K]];default:return 200<K.length&&!K.some(function(T){return typeof T!=typeof K[0]})?["filter-in-large",A,["literal",K.sort(kc)]]:["filter-in-small",A,["literal",K]]}}function Tb(A){switch(A){case "$type":return!0;case "$id":return["filter-has-id"];default:return["filter-has",A]}}function yb(A){return["!",A]}function Gb(A){return sb(ca(A.value))?Rc(ba({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function ma(T){var va=T.value,
Aa=T.key;if("array"!==rb(va))return[new Rb(Aa,va,"array expected, "+rb(va)+" found")];var Ma,Va=T.styleSpec,jb=[];if(1>va.length)return[new Rb(Aa,va,"filter array must have at least 1 element")];switch(jb=jb.concat(fd({key:Aa+"[0]",value:va[0],valueSpec:Va.filter_operator,style:T.style,styleSpec:T.styleSpec})),ea(va[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=va.length&&"$type"===ea(va[1])&&jb.push(new Rb(Aa,va,'"$type" cannot be use with operator "'+va[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==
va.length&&jb.push(new Rb(Aa,va,'filter array for operator "'+va[0]+'" must have 3 elements'));case "in":case "!in":2<=va.length&&"string"!==(Ma=rb(va[1]))&&jb.push(new Rb(Aa+"[1]",va[1],"string expected, "+Ma+" found"));for(var qb=2;qb<va.length;qb++)Ma=rb(va[qb]),"$type"===ea(va[1])?jb=jb.concat(fd({key:Aa+"["+qb+"]",value:va[qb],valueSpec:Va.geometry_type,style:T.style,styleSpec:T.styleSpec})):"string"!==Ma&&"number"!==Ma&&"boolean"!==Ma&&jb.push(new Rb(Aa+"["+qb+"]",va[qb],"string, number, or boolean expected, "+
Ma+" found"));break;case "any":case "all":case "none":for(Ma=1;Ma<va.length;Ma++)jb=jb.concat(ma({key:Aa+"["+Ma+"]",value:va[Ma],style:T.style,styleSpec:T.styleSpec}));break;case "has":case "!has":Ma=rb(va[1]);2!==va.length?jb.push(new Rb(Aa,va,'filter array for "'+va[0]+'" operator must have 2 elements')):"string"!==Ma&&jb.push(new Rb(Aa+"[1]",va[1],"string expected, "+Ma+" found"));break;case "within":Ma=rb(va[1]),2!==va.length?jb.push(new Rb(Aa,va,'filter array for "'+va[0]+'" operator must have 2 elements')):
"object"!==Ma&&jb.push(new Rb(Aa+"[1]",va[1],"object expected, "+Ma+" found"))}return jb}(A)}function Eb(A,K){var T=A.key,ma=A.style,va=A.styleSpec,Aa=A.value,Ma=A.objectKey,Va=va[K+"_"+A.layerType];if(!Va)return[];var jb=Ma.match(/^(.*)-transition$/);if("paint"===K&&jb&&Va[jb[1]]&&Va[jb[1]].transition)return Ic({key:T,value:Aa,valueSpec:va.transition,style:ma,styleSpec:va});var qb;Va=A.valueSpec||Va[Ma];if(!Va)return[new Rb(T,Aa,'unknown property "'+Ma+'"')];if("string"===rb(Aa)&&ob(Va)&&!Va.tokens&&
(qb=/^{([^}]+)}$/.exec(Aa)))return[new Rb(T,Aa,'"'+Ma+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(qb[1])+" }`.")];qb=[];return"symbol"===A.layerType&&("text-field"===Ma&&ma&&!ma.glyphs&&qb.push(new Rb(T,Aa,'use of "text-field" requires a style "glyphs" property')),"text-font"===Ma&&Bb(ca(Aa))&&"identity"===ea(Aa.type)&&qb.push(new Rb(T,Aa,'"text-font" does not support identity functions'))),qb.concat(Ic({key:A.key,
value:Aa,valueSpec:Va,style:ma,styleSpec:va,expressionContext:"property",propertyType:K,propertyKey:Ma}))}function Vb(A){return Eb(A,"paint")}function Zb(A){return Eb(A,"layout")}function Dc(A){var K=[],T=A.value,ma=A.key,va=A.style,Aa=A.styleSpec;T.type||T.ref||K.push(new Rb(ma,T,'either "type" or "ref" is required'));var Ma,Va=ea(T.type),jb=ea(T.ref);if(T.id)for(var qb=ea(T.id),zb=0;zb<A.arrayIndex;zb++){var Hb=va.layers[zb];ea(Hb.id)===qb&&K.push(new Rb(ma,T.id,'duplicate layer id "'+T.id+'", previously used at line '+
Hb.id.__line__))}"ref"in T?(["type","source","source-layer","filter","layout"].forEach(function(Ub){Ub in T&&K.push(new Rb(ma,T[Ub],'"'+Ub+'" is prohibited for ref layers'))}),va.layers.forEach(function(Ub){ea(Ub.id)===jb&&(Ma=Ub)}),Ma?Ma.ref?K.push(new Rb(ma,T.ref,"ref cannot reference another ref layer")):Va=ea(Ma.type):K.push(new Rb(ma,T.ref,'ref layer "'+jb+'" not found'))):"background"!==Va&&(T.source?(qb=(va=va.sources&&va.sources[T.source])&&ea(va.type),va?"vector"===qb&&"raster"===Va?K.push(new Rb(ma,
T.source,'layer "'+T.id+'" requires a raster source')):"raster"===qb&&"raster"!==Va?K.push(new Rb(ma,T.source,'layer "'+T.id+'" requires a vector source')):"vector"!==qb||T["source-layer"]?"raster-dem"===qb&&"hillshade"!==Va?K.push(new Rb(ma,T.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Va||!T.paint||!T.paint["line-gradient"]||"geojson"===qb&&va.lineMetrics||K.push(new Rb(ma,T,'layer "'+T.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):
K.push(new Rb(ma,T,'layer "'+T.id+'" must specify a "source-layer"')):K.push(new Rb(ma,T.source,'source "'+T.source+'" not found'))):K.push(new Rb(ma,T,'missing required property "source"')));return K=K.concat(tb({key:ma,value:T,valueSpec:Aa.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Ic({key:ma+".type",value:T.type,valueSpec:Aa.layer.type,style:A.style,styleSpec:A.styleSpec,object:T,objectKey:"type"})},filter:Gb,layout:function(Ub){return tb({layer:T,
key:Ub.key,value:Ub.value,style:Ub.style,styleSpec:Ub.styleSpec,objectElementValidators:{"*":function(Sb){return Zb(ba({layerType:Va},Sb))}}})},paint:function(Ub){return tb({layer:T,key:Ub.key,value:Ub.value,style:Ub.style,styleSpec:Ub.styleSpec,objectElementValidators:{"*":function(Sb){return Vb(ba({layerType:Va},Sb))}}})}}}))}function ic(A){var K=A.value;A=A.key;var T=rb(K);return"string"!==T?[new Rb(A,K,"string expected, "+T+" found")]:[]}function Bc(A){var K=A.value,T=A.key,ma=A.styleSpec,va=
A.style;if(!K.type)return[new Rb(T,K,'"type" is required')];var Aa=ea(K.type);switch(Aa){case "vector":case "raster":case "raster-dem":return tb({key:T,value:K,valueSpec:ma["source_"+Aa.replace("-","_")],style:A.style,styleSpec:ma,objectElementValidators:bf});case "geojson":if(A=tb({key:T,value:K,valueSpec:ma.source_geojson,style:va,styleSpec:ma,objectElementValidators:bf}),K.cluster)for(var Ma in K.clusterProperties)ma=K.clusterProperties[Ma],va=ma[0],va="string"==typeof va?[va,["accumulated"],["get",
Ma]]:va,A.push.apply(A,Rc({key:T+"."+Ma+".map",value:ma[1],expressionContext:"cluster-map"})),A.push.apply(A,Rc({key:T+"."+Ma+".reduce",value:va,expressionContext:"cluster-reduce"}));return A;case "video":return tb({key:T,value:K,valueSpec:ma.source_video,style:va,styleSpec:ma});case "image":return tb({key:T,value:K,valueSpec:ma.source_image,style:va,styleSpec:ma});case "canvas":return[new Rb(T,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];
default:return fd({key:T+".type",value:K.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:va,styleSpec:ma})}}function Sc(A){var K=A.value,T=A.styleSpec,ma=T.light;A=A.style;var va=[],Aa=rb(K);if(void 0===K)return va;if("object"!==Aa)return va.concat([new Rb("light",K,"object expected, "+Aa+" found")]);for(var Ma in K)Aa=Ma.match(/^(.*)-transition$/),va=va.concat(Aa&&ma[Aa[1]]&&ma[Aa[1]].transition?Ic({key:Ma,value:K[Ma],valueSpec:T.transition,style:A,styleSpec:T}):
ma[Ma]?Ic({key:Ma,value:K[Ma],valueSpec:ma[Ma],style:A,styleSpec:T}):[new Rb(Ma,K[Ma],'unknown property "'+Ma+'"')]);return va}function Ic(A){var K=A.value,T=A.valueSpec,ma=A.styleSpec;return T.expression&&Bb(ea(K))?Mc(A):T.expression&&gd(ca(K))?Rc(A):T.type&&le[T.type]?le[T.type](A):tb(ba({},A,{valueSpec:T.type?ma[T.type]:T}))}function $c(A){var K=A.value,T=A.key;A=ic(A);return A.length||(-1===K.indexOf("{fontstack}")&&A.push(new Rb(T,K,'"glyphs" url must include a "{fontstack}" token')),-1===K.indexOf("{range}")&&
A.push(new Rb(T,K,'"glyphs" url must include a "{range}" token'))),A}function nd(A,K){void 0===K&&(K=Ib);var T=[];return T=T.concat(Ic({key:"",value:A,valueSpec:K.$root,styleSpec:K,style:A,objectElementValidators:{glyphs:$c,"*":function(){return[]}}})),A.constants&&(T=T.concat(Y({key:"constants",value:A.constants,style:A,styleSpec:K}))),Yc(T)}function Yc(A){return[].concat(A).sort(function(K,T){return K.line-T.line})}function rd(A){return function(){for(var K=[],T=arguments.length;T--;)K[T]=arguments[T];
return Yc(A.apply(this,K))}}function wd(A,K){var T=!1;if(K&&K.length)for(var ma=0;ma<K.length;ma+=1)A.fire(new rc(Error(K[ma].message))),T=!0;return T}function cd(A,K,T){var ma=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var va=new Int32Array(this.arrayBuffer);A=va[0];this.d=(K=va[1])+2*(T=va[2]);for(var Aa=0;Aa<this.d*this.d;Aa++){var Ma=va[3+Aa],Va=va[3+Aa+1];ma.push(Ma===Va?null:va.subarray(Ma,Va))}Aa=va[3+ma.length+1];this.keys=va.subarray(va[3+ma.length],Aa);this.bboxes=va.subarray(Aa);
this.insert=this._insertReadonly}else{this.d=K+2*T;for(va=0;va<this.d*this.d;va++)ma.push([]);this.keys=[];this.bboxes=[]}this.n=K;this.extent=A;this.padding=T;this.scale=K/A;this.uid=0;K=T/K*A;this.min=-K;this.max=A+K}function Jc(A,K,T){void 0===T&&(T={});Object.defineProperty(K,"_classRegistryKey",{value:A,writeable:!1});Bi[A]={klass:K,omit:T.omit||[],shallow:T.shallow||[]}}function sd(A){return A&&"undefined"!=typeof ArrayBuffer&&(A instanceof ArrayBuffer||A.constructor&&"ArrayBuffer"===A.constructor.name)}
function ud(A,K){if(null==A||"boolean"==typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(sd(A)||Xi&&A instanceof Xi)return K&&K.push(A),A;if(ArrayBuffer.isView(A))return K&&K.push(A.buffer),A;if(A instanceof Bj)return K&&K.push(A.data.buffer),A;if(Array.isArray(A)){for(var T=[],ma=0;ma<A.length;ma+=1)T.push(ud(A[ma],K));return T}if("object"==typeof A){var va=A.constructor;T=va._classRegistryKey;
if(!T)throw Error("can't serialize object of unregistered class");ma=va.serialize?va.serialize(A,K):{};if(!va.serialize){for(var Aa in A)!A.hasOwnProperty(Aa)||0<=Bi[T].omit.indexOf(Aa)||(va=A[Aa],ma[Aa]=0<=Bi[T].shallow.indexOf(Aa)?va:ud(va,K));A instanceof Error&&(ma.message=A.message)}if(ma.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==T&&(ma.$name=T),ma}throw Error("can't serialize object of type "+typeof A);}function yd(A){if(null==A||"boolean"==
typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||sd(A)||Xi&&A instanceof Xi||ArrayBuffer.isView(A)||A instanceof Bj)return A;if(Array.isArray(A))return A.map(yd);if("object"==typeof A){var K=A.$name||"Object",T=Bi[K].klass;if(!T)throw Error("can't deserialize unregistered class "+K);if(T.deserialize)return T.deserialize(A);T=Object.create(T.prototype);for(var ma=0,va=Object.keys(A);ma<va.length;ma+=
1){var Aa=va[ma];if("$name"!==Aa){var Ma=A[Aa];T[Aa]=0<=Bi[K].shallow.indexOf(Aa)?Ma:yd(Ma)}}return T}throw Error("can't deserialize object of type "+typeof A);}function cb(A){for(var K=0;K<A.length;K+=1)if(je(A[K].charCodeAt(0)))return!0;return!1}function je(A){return!(746!==A&&747!==A&&(4352>A||!(Id["Bopomofo Extended"](A)||Id.Bopomofo(A)||Id["CJK Compatibility Forms"](A)&&!(65097<=A&&65103>=A)||Id["CJK Compatibility Ideographs"](A)||Id["CJK Compatibility"](A)||Id["CJK Radicals Supplement"](A)||
Id["CJK Strokes"](A)||!(!Id["CJK Symbols and Punctuation"](A)||12296<=A&&12305>=A||12308<=A&&12319>=A||12336===A)||Id["CJK Unified Ideographs Extension A"](A)||Id["CJK Unified Ideographs"](A)||Id["Enclosed CJK Letters and Months"](A)||Id["Hangul Compatibility Jamo"](A)||Id["Hangul Jamo Extended-A"](A)||Id["Hangul Jamo Extended-B"](A)||Id["Hangul Jamo"](A)||Id["Hangul Syllables"](A)||Id.Hiragana(A)||Id["Ideographic Description Characters"](A)||Id.Kanbun(A)||Id["Kangxi Radicals"](A)||Id["Katakana Phonetic Extensions"](A)||
Id.Katakana(A)&&12540!==A||!(!Id["Halfwidth and Fullwidth Forms"](A)||65288===A||65289===A||65293===A||65306<=A&&65310>=A||65339===A||65341===A||65343===A||65371<=A&&65503>=A||65507===A||65512<=A&&65519>=A)||!(!Id["Small Form Variants"](A)||65112<=A&&65118>=A||65123<=A&&65126>=A)||Id["Unified Canadian Aboriginal Syllabics"](A)||Id["Unified Canadian Aboriginal Syllabics Extended"](A)||Id["Vertical Forms"](A)||Id["Yijing Hexagram Symbols"](A)||Id["Yi Syllables"](A)||Id["Yi Radicals"](A))))}function xd(A){var K;
(K=je(A))||(K=!!(Id["Latin-1 Supplement"](A)&&(167===A||169===A||174===A||177===A||188===A||189===A||190===A||215===A||247===A)||Id["General Punctuation"](A)&&(8214===A||8224===A||8225===A||8240===A||8241===A||8251===A||8252===A||8258===A||8263===A||8264===A||8265===A||8273===A)||Id["Letterlike Symbols"](A)||Id["Number Forms"](A)||Id["Miscellaneous Technical"](A)&&(8960<=A&&8967>=A||8972<=A&&8991>=A||8996<=A&&9E3>=A||9003===A||9085<=A&&9114>=A||9150<=A&&9165>=A||9167===A||9169<=A&&9179>=A||9186<=
A&&9215>=A)||Id["Control Pictures"](A)&&9251!==A||Id["Optical Character Recognition"](A)||Id["Enclosed Alphanumerics"](A)||Id["Geometric Shapes"](A)||Id["Miscellaneous Symbols"](A)&&!(9754<=A&&9759>=A)||Id["Miscellaneous Symbols and Arrows"](A)&&(11026<=A&&11055>=A||11088<=A&&11097>=A||11192<=A&&11243>=A)||Id["CJK Symbols and Punctuation"](A)||Id.Katakana(A)||Id["Private Use Area"](A)||Id["CJK Compatibility Forms"](A)||Id["Small Form Variants"](A)||Id["Halfwidth and Fullwidth Forms"](A)||8734===A||
8756===A||8757===A||9984<=A&&10087>=A||10102<=A&&10131>=A||65532===A||65533===A));return!K}function be(A){return 1424<=A&&2303>=A||Id["Arabic Presentation Forms-A"](A)||Id["Arabic Presentation Forms-B"](A)}function qe(){Li.fire(new pc("pluginStateChange",{pluginStatus:Ef,pluginURL:dh}))}function Hd(A,K){void 0===K&&(K=1);var T=0,ma=0;return{members:A.map(function(va){var Aa=hk[va.type].BYTES_PER_ELEMENT,Ma=T=ke(T,Math.max(K,Aa)),Va=va.components||1;return ma=Math.max(ma,Aa),T+=Aa*Va,{name:va.name,
type:va.type,components:Va,offset:Ma}}),size:ke(T,Math.max(ma,K)),alignment:K}}function ke(A,K){return Math.ceil(A/K)*K}function Ge(A,K){return 256*c(Math.floor(A),0,255)+c(Math.floor(K),0,255)}function Fd(A){var K=+A;return!isNaN(K)&&K<=Bk?K:ci(String(A))}function Wd(A,K,T){var ma=A[K];A[K]=A[T];A[T]=ma}function Sd(A){return[Ge(255*A.r,255*A.g),Ge(255*A.b,255*A.a)]}function Ae(A,K,T){var ma={color:{source:ik,composite:hg},number:{source:Gg,composite:ik}};return(A={"line-pattern":{source:Qf,composite:Qf},
"fill-pattern":{source:Qf,composite:Qf},"fill-extrusion-pattern":{source:Qf,composite:Qf}}[A])&&A[T]||ma[K][T]}function Xd(A){var K=8192/A.extent;A=A.loadGeometry();for(var T=0;T<A.length;T++)for(var ma=A[T],va=0;va<ma.length;va++){var Aa=ma[va];Aa.x=Math.round(Aa.x*K);Aa.y=Math.round(Aa.y*K);(Aa.x<ei.min||Aa.x>ei.max||Aa.y<ei.min||Aa.y>ei.max)&&(x("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Aa.x=c(Aa.x,ei.min,ei.max),Aa.y=c(Aa.y,ei.min,ei.max))}return A}function sf(A,
K,T,ma,va){A.emplaceBack(2*K+(ma+1)/2,2*T+(va+1)/2)}function Re(A,K){for(var T=0;T<A.length;T++)if(wb(K,A[T]))return!0;for(T=0;T<K.length;T++)if(wb(A,K[T]))return!0;return!!Oe(A,K)}function tf(A,K,T){return!!wb(A,K)||!!fc(K,A,T)}function $e(A,K){if(1===A.length)return Ua(K,A[0]);for(var T=0;T<K.length;T++)for(var ma=K[T],va=0;va<ma.length;va++)if(wb(A,ma[va]))return!0;for(T=0;T<A.length;T++)if(Ua(K,A[T]))return!0;for(T=0;T<K.length;T++)if(Oe(A,K[T]))return!0;return!1}function Oe(A,K){if(0===A.length||
0===K.length)return!1;for(var T=0;T<A.length-1;T++)for(var ma=A[T],va=A[T+1],Aa=0;Aa<K.length-1;Aa++){var Ma=ma,Va=va,jb=K[Aa],qb=K[Aa+1];if(E(Ma,jb,qb)!==E(Va,jb,qb)&&E(Ma,Va,jb)!==E(Ma,Va,qb))return!0}return!1}function fc(A,K,T){T*=T;if(1===K.length)return A.distSqr(K[0])<T;for(var ma=1;ma<K.length;ma++)if(Vc(A,K[ma-1],K[ma])<T)return!0;return!1}function Vc(A,K,T){var ma=K.distSqr(T);if(0===ma)return A.distSqr(K);ma=((A.x-K.x)*(T.x-K.x)+(A.y-K.y)*(T.y-K.y))/ma;return A.distSqr(0>ma?K:1<ma?T:T.sub(K)._mult(ma)._add(K))}
function Ua(A,K){for(var T,ma,va,Aa=!1,Ma=0;Ma<A.length;Ma++)for(var Va=0,jb=(T=A[Ma]).length-1;Va<T.length;jb=Va++)(ma=T[Va]).y>K.y!=(va=T[jb]).y>K.y&&K.x<(va.x-ma.x)*(K.y-ma.y)/(va.y-ma.y)+ma.x&&(Aa=!Aa);return Aa}function wb(A,K){for(var T=!1,ma=0,va=A.length-1;ma<A.length;va=ma++){var Aa=A[ma];va=A[va];Aa.y>K.y!=va.y>K.y&&K.x<(va.x-Aa.x)*(K.y-Aa.y)/(va.y-Aa.y)+Aa.x&&(T=!T)}return T}function Fb(A,K,T){var ma=K.paint.get(A).value;return"constant"===ma.kind?ma.value:T.programConfigurations.get(K.id).getMaxValue(A)}
function Wb(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function lc(A,K,T,ma,va){if(!K[0]&&!K[1])return A;K=pe.convert(K)._mult(va);"viewport"===T&&K._rotate(-ma);T=[];for(ma=0;ma<A.length;ma++)T.push(A[ma].sub(K));return T}function wc(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function cc(A,K,T){var ma=K[0],va=K[1],Aa=K[2],Ma=K[3],Va=K[4],jb=K[5],qb=K[6],zb=K[7],Hb=K[8],Ub=K[9],Sb=K[10],$b=K[11],bc=K[12],Ec=K[13],
ld=K[14];K=K[15];var pd=T[0],bd=T[1],Ad=T[2],zd=T[3];return A[0]=pd*ma+bd*Va+Ad*Hb+zd*bc,A[1]=pd*va+bd*jb+Ad*Ub+zd*Ec,A[2]=pd*Aa+bd*qb+Ad*Sb+zd*ld,A[3]=pd*Ma+bd*zb+Ad*$b+zd*K,A[4]=(pd=T[4])*ma+(bd=T[5])*Va+(Ad=T[6])*Hb+(zd=T[7])*bc,A[5]=pd*va+bd*jb+Ad*Ub+zd*Ec,A[6]=pd*Aa+bd*qb+Ad*Sb+zd*ld,A[7]=pd*Ma+bd*zb+Ad*$b+zd*K,A[8]=(pd=T[8])*ma+(bd=T[9])*Va+(Ad=T[10])*Hb+(zd=T[11])*bc,A[9]=pd*va+bd*jb+Ad*Ub+zd*Ec,A[10]=pd*Aa+bd*qb+Ad*Sb+zd*ld,A[11]=pd*Ma+bd*zb+Ad*$b+zd*K,A[12]=(pd=T[12])*ma+(bd=T[13])*Va+(Ad=
T[14])*Hb+(zd=T[15])*bc,A[13]=pd*va+bd*jb+Ad*Ub+zd*Ec,A[14]=pd*Aa+bd*qb+Ad*Sb+zd*ld,A[15]=pd*Ma+bd*zb+Ad*$b+zd*K,A}function Qc(A,K,T){var ma=K[0],va=K[1],Aa=K[2];K=K[3];return A[0]=T[0]*ma+T[4]*va+T[8]*Aa+T[12]*K,A[1]=T[1]*ma+T[5]*va+T[9]*Aa+T[13]*K,A[2]=T[2]*ma+T[6]*va+T[10]*Aa+T[14]*K,A[3]=T[3]*ma+T[7]*va+T[11]*Aa+T[15]*K,A}function Ab(A,K){A=Qc([],[A.x,A.y,0,1],K);return new pe(A[0]/A[3],A[1]/A[3])}function Nb(A,K,T,ma){var va=K.width;K=K.height;if(ma)if(ma instanceof Uint8ClampedArray)ma=new Uint8Array(ma.buffer);
else{if(ma.length!==va*K*T)throw new RangeError("mismatched image size");}else ma=new Uint8Array(va*K*T);return A.width=va,A.height=K,A.data=ma,A}function ec(A,K,T){var ma=K.width;K=K.height;if(ma!==A.width||K!==A.height){var va=Nb({},{width:ma,height:K},T);xc(A,va,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,ma),height:Math.min(A.height,K)},T);A.width=ma;A.height=K;A.data=va.data}}function xc(A,K,T,ma,va,Aa){if(0===va.width||0===va.height)return K;if(va.width>A.width||va.height>A.height||T.x>A.width-
va.width||T.y>A.height-va.height)throw new RangeError("out of range source coordinates for image copy");if(va.width>K.width||va.height>K.height||ma.x>K.width-va.width||ma.y>K.height-va.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ma=A.data,Va=K.data,jb=0;jb<va.height;jb++)for(var qb=((T.y+jb)*A.width+T.x)*Aa,zb=((ma.y+jb)*K.width+ma.x)*Aa,Hb=0;Hb<va.width*Aa;Hb++)Va[zb+Hb]=Ma[qb+Hb];return K}function yc(A,K){for(var T=new Uint8Array(1024),ma={},va=0,Aa=
0;256>va;va++,Aa+=4){ma[K]=va/255;var Ma=A.evaluate(ma);T[Aa+0]=Math.floor(255*Ma.r/Ma.a);T[Aa+1]=Math.floor(255*Ma.g/Ma.a);T[Aa+2]=Math.floor(255*Ma.b/Ma.a);T[Aa+3]=Math.floor(255*Ma.a)}return new Mf({width:256,height:1},T)}function Gc(A,K,T){T=T||2;var ma,va,Aa,Ma=K&&K.length,Va=Ma?K[0]*T:A.length,jb=Cc(A,0,Va,T,!0),qb=[];if(!jb||jb.next===jb.prev)return qb;if(Ma){Ma=T;var zb,Hb=[];var Ub=0;for(zb=K.length;Ub<zb;Ub++)(ma=Cc(A,K[Ub]*Ma,Ub<zb-1?K[Ub+1]*Ma:A.length,Ma,!1))===ma.next&&(ma.steiner=!0),
Hb.push(td(ma));Hb.sort(sc);for(Ub=0;Ub<Hb.length;Ub++)qc(Hb[Ub],jb),jb=vc(jb,jb.next)}if(A.length>80*T){var Sb=K=A[0];var $b=ma=A[1];for(Ma=T;Ma<Va;Ma+=T)(va=A[Ma])<Sb&&(Sb=va),(Aa=A[Ma+1])<$b&&($b=Aa),va>K&&(K=va),Aa>ma&&(ma=Aa);var bc=0!==(bc=Math.max(K-Sb,ma-$b))?1/bc:0}return oc(jb,qb,T,Sb,$b,bc),qb}function Cc(A,K,T,ma,va){if(va===0<ih(A,K,T,ma))for(va=K;va<T;va+=ma)var Aa=Pg(va,A[va],A[va+1],Aa);else for(va=T-ma;va>=K;va-=ma)Aa=Pg(va,A[va],A[va+1],Aa);return Aa&&re(Aa,Aa.next)&&(fg(Aa),Aa=
Aa.next),Aa}function vc(A,K){if(!A)return A;K||(K=A);var T=A;do if(A=!1,T.steiner||!re(T,T.next)&&0!==od(T.prev,T,T.next))T=T.next;else{if(fg(T),(T=K=T.prev)===T.next)break;A=!0}while(A||T!==K);return K}function oc(A,K,T,ma,va,Aa,Ma){if(A){if(!Ma&&Aa){var Va=A,jb=Va;do null===jb.z&&(jb.z=id(jb.x,jb.y,ma,va,Aa)),jb.prevZ=jb.prev,jb=jb.nextZ=jb.next;while(jb!==Va);jb.prevZ.nextZ=null;jb.prevZ=null;Va=jb;var qb,zb,Hb,Ub,Sb=1;do{jb=Va;var $b=Va=null;for(Hb=0;jb;){Hb++;var bc=jb;for(qb=Ub=0;qb<Sb&&(Ub++,
bc=bc.nextZ);qb++);for(qb=Sb;0<Ub||0<qb&&bc;)0!==Ub&&(0===qb||!bc||jb.z<=bc.z)?(zb=jb,jb=jb.nextZ,Ub--):(zb=bc,bc=bc.nextZ,qb--),$b?$b.nextZ=zb:Va=zb,zb.prevZ=$b,$b=zb;jb=bc}$b.nextZ=null;Sb*=2}while(1<Hb)}for(jb=A;A.prev!==A.next;){zb=A.prev;Va=A.next;if(Aa)a:{bc=A;Sb=ma;qb=va;var Ec=Aa;$b=bc.prev;Hb=bc.next;if(0<=od($b,bc,Hb))bc=!1;else{var ld=$b.x>bc.x?$b.x>Hb.x?$b.x:Hb.x:bc.x>Hb.x?bc.x:Hb.x,pd=$b.y>bc.y?$b.y>Hb.y?$b.y:Hb.y:bc.y>Hb.y?bc.y:Hb.y;Ub=id($b.x<bc.x?$b.x<Hb.x?$b.x:Hb.x:bc.x<Hb.x?bc.x:
Hb.x,$b.y<bc.y?$b.y<Hb.y?$b.y:Hb.y:bc.y<Hb.y?bc.y:Hb.y,Sb,qb,Ec);Sb=id(ld,pd,Sb,qb,Ec);qb=bc.prevZ;for(Ec=bc.nextZ;qb&&qb.z>=Ub&&Ec&&Ec.z<=Sb;){if(qb!==bc.prev&&qb!==bc.next&&qd($b.x,$b.y,bc.x,bc.y,Hb.x,Hb.y,qb.x,qb.y)&&0<=od(qb.prev,qb,qb.next)||(qb=qb.prevZ,Ec!==bc.prev&&Ec!==bc.next&&qd($b.x,$b.y,bc.x,bc.y,Hb.x,Hb.y,Ec.x,Ec.y)&&0<=od(Ec.prev,Ec,Ec.next))){bc=!1;break a}Ec=Ec.nextZ}for(;qb&&qb.z>=Ub;){if(qb!==bc.prev&&qb!==bc.next&&qd($b.x,$b.y,bc.x,bc.y,Hb.x,Hb.y,qb.x,qb.y)&&0<=od(qb.prev,qb,qb.next)){bc=
!1;break a}qb=qb.prevZ}for(;Ec&&Ec.z<=Sb;){if(Ec!==bc.prev&&Ec!==bc.next&&qd($b.x,$b.y,bc.x,bc.y,Hb.x,Hb.y,Ec.x,Ec.y)&&0<=od(Ec.prev,Ec,Ec.next)){bc=!1;break a}Ec=Ec.nextZ}bc=!0}}else a:if(bc=A,$b=bc.prev,Hb=bc.next,0<=od($b,bc,Hb))bc=!1;else{for(Ub=bc.next.next;Ub!==bc.prev;){if(qd($b.x,$b.y,bc.x,bc.y,Hb.x,Hb.y,Ub.x,Ub.y)&&0<=od(Ub.prev,Ub,Ub.next)){bc=!1;break a}Ub=Ub.next}bc=!0}if(bc)K.push(zb.i/T),K.push(A.i/T),K.push(Va.i/T),fg(A),jb=A=Va.next;else if((A=Va)===jb){if(Ma)if(1===Ma){A=vc(A);Ma=
K;zb=T;Va=A;do jb=Va.prev,bc=Va.next.next,!re(jb,bc)&&ue(jb,Va,Va.next,bc)&&ze(jb,bc)&&ze(bc,jb)&&(Ma.push(jb.i/zb),Ma.push(Va.i/zb),Ma.push(bc.i/zb),fg(Va),fg(Va.next),Va=A=bc),Va=Va.next;while(Va!==A);A=vc(Va);oc(A,K,T,ma,va,Aa,2)}else{if(2===Ma)a:{Ma=A;do{for(zb=Ma.next.next;zb!==Ma.prev;){if(Ma.i!==zb.i&&Dd(Ma,zb)){A=Df(Ma,zb);Ma=vc(Ma,Ma.next);A=vc(A,A.next);oc(Ma,K,T,ma,va,Aa);oc(A,K,T,ma,va,Aa);break a}zb=zb.next}Ma=Ma.next}while(Ma!==A)}}else oc(vc(A),K,T,ma,va,Aa,1);break}}}}function sc(A,
K){return A.x-K.x}function qc(A,K){if(K=function(T,ma){var va=ma,Aa=T.x,Ma=T.y,Va=-1/0;do{if(Ma<=va.y&&Ma>=va.next.y&&va.next.y!==va.y){var jb=va.x+(Ma-va.y)*(va.next.x-va.x)/(va.next.y-va.y);if(jb<=Aa&&jb>Va){if(Va=jb,jb===Aa){if(Ma===va.y)return va;if(Ma===va.next.y)return va.next}var qb=va.x<va.next.x?va:va.next}}va=va.next}while(va!==ma);if(!qb)return null;if(Aa===Va)return qb;jb=qb;var zb=qb.x,Hb=qb.y,Ub=1/0;va=qb;do{if(Aa>=va.x&&va.x>=zb&&Aa!==va.x&&qd(Ma<Hb?Aa:Va,Ma,zb,Hb,Ma<Hb?Va:Aa,Ma,va.x,
va.y)){ma=Math.abs(Ma-va.y)/(Aa-va.x);var Sb;if((Sb=ze(va,T))&&!(Sb=ma<Ub)&&(Sb=ma===Ub)&&!(Sb=va.x>qb.x)&&(Sb=va.x===qb.x)){Sb=qb;var $b=va;Sb=0>od(Sb.prev,Sb,$b.prev)&&0>od($b.next,Sb,Sb.next)}Sb&&(qb=va,Ub=ma)}va=va.next}while(va!==jb);return qb}(A,K))A=Df(K,A),vc(K,K.next),vc(A,A.next)}function id(A,K,T,ma,va){return 1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-T)*va)|A<<8))|A<<4))|A<<2))|A<<1)|(1431655765&((K=858993459&((K=252645135&((K=16711935&((K=32767*(K-ma)*va)|K<<8))|
K<<4))|K<<2))|K<<1))<<1}function td(A){var K=A,T=A;do(K.x<T.x||K.x===T.x&&K.y<T.y)&&(T=K),K=K.next;while(K!==A);return T}function qd(A,K,T,ma,va,Aa,Ma,Va){return 0<=(va-Ma)*(K-Va)-(A-Ma)*(Aa-Va)&&0<=(A-Ma)*(ma-Va)-(T-Ma)*(K-Va)&&0<=(T-Ma)*(Aa-Va)-(va-Ma)*(ma-Va)}function Dd(A,K){return A.next.i!==K.i&&A.prev.i!==K.i&&!function(T,ma){var va=T;do{if(va.i!==T.i&&va.next.i!==T.i&&va.i!==ma.i&&va.next.i!==ma.i&&ue(va,va.next,T,ma))return!0;va=va.next}while(va!==T);return!1}(A,K)&&(ze(A,K)&&ze(K,A)&&function(T,
ma){var va=T,Aa=!1,Ma=(T.x+ma.x)/2;ma=(T.y+ma.y)/2;do va.y>ma!=va.next.y>ma&&va.next.y!==va.y&&Ma<(va.next.x-va.x)*(ma-va.y)/(va.next.y-va.y)+va.x&&(Aa=!Aa),va=va.next;while(va!==T);return Aa}(A,K)&&(od(A.prev,A,K.prev)||od(A,K.prev,K))||re(A,K)&&0<od(A.prev,A,A.next)&&0<od(K.prev,K,K.next))}function od(A,K,T){return(K.y-A.y)*(T.x-K.x)-(K.x-A.x)*(T.y-K.y)}function re(A,K){return A.x===K.x&&A.y===K.y}function ue(A,K,T,ma){var va=ne(od(A,K,T)),Aa=ne(od(A,K,ma)),Ma=ne(od(T,ma,A)),Va=ne(od(T,ma,K));return va!==
Aa&&Ma!==Va||!(0!==va||!De(A,T,K))||!(0!==Aa||!De(A,ma,K))||!(0!==Ma||!De(T,A,ma))||!(0!==Va||!De(T,K,ma))}function De(A,K,T){return K.x<=Math.max(A.x,T.x)&&K.x>=Math.min(A.x,T.x)&&K.y<=Math.max(A.y,T.y)&&K.y>=Math.min(A.y,T.y)}function ne(A){return 0<A?1:0>A?-1:0}function ze(A,K){return 0>od(A.prev,A,A.next)?0<=od(A,K,A.next)&&0<=od(A,A.prev,K):0>od(A,K,A.prev)||0>od(A,A.next,K)}function Df(A,K){var T=new hi(A.i,A.x,A.y),ma=new hi(K.i,K.x,K.y),va=A.next,Aa=K.prev;return A.next=K,K.prev=A,T.next=
va,va.prev=T,ma.next=T,T.prev=ma,Aa.next=ma,ma.prev=Aa,ma}function Pg(A,K,T,ma){A=new hi(A,K,T);return ma?(A.next=ma.next,A.prev=ma,ma.next.prev=A,ma.next=A):(A.prev=A,A.next=A),A}function fg(A){A.next.prev=A.prev;A.prev.next=A.next;A.prevZ&&(A.prevZ.nextZ=A.nextZ);A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function hi(A,K,T){this.i=A;this.x=K;this.y=T;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function ih(A,K,T,ma){for(var va=0,Aa=T-ma;K<T;K+=ma)va+=(A[Aa]-A[K])*(A[K+1]+A[Aa+1]),
Aa=K;return va}function ii(A,K,T,ma,va){!function Hb(Ma,Va,jb,qb,zb){for(;qb>jb;){if(600<qb-jb){var Ub=qb-jb+1,Sb=Va-jb+1,$b=Math.log(Ub),bc=.5*Math.exp(2*$b/3);$b=.5*Math.sqrt($b*bc*(Ub-bc)/Ub)*(0>Sb-Ub/2?-1:1);Hb(Ma,Va,Math.max(jb,Math.floor(Va-Sb*bc/Ub+$b)),Math.min(qb,Math.floor(Va+(Ub-Sb)*bc/Ub+$b)),zb)}Ub=Ma[Va];Sb=jb;bc=qb;Qg(Ma,jb,Va);for(0<zb(Ma[qb],Ub)&&Qg(Ma,jb,qb);Sb<bc;){Qg(Ma,Sb,bc);Sb++;for(bc--;0>zb(Ma[Sb],Ub);)Sb++;for(;0<zb(Ma[bc],Ub);)bc--}0===zb(Ma[jb],Ub)?Qg(Ma,jb,bc):Qg(Ma,++bc,
qb);bc<=Va&&(jb=bc+1);Va<=bc&&(qb=bc-1)}}(A,K,T||0,ma||A.length-1,va||ji)}function Qg(A,K,T){var ma=A[K];A[K]=A[T];A[T]=ma}function ji(A,K){return A<K?-1:A>K?1:0}function Oi(A,K){var T=A.length;if(1>=T)return[A];for(var ma,va,Aa=[],Ma=0;Ma<T;Ma++){var Va=A[Ma];for(var jb=0,qb=0,zb=Va.length,Hb=zb-1,Ub=void 0,Sb=void 0;qb<zb;Hb=qb++)jb+=((Sb=Va[Hb]).x-(Ub=Va[qb]).x)*(Ub.y+Sb.y);Va=jb;0!==Va&&(A[Ma].area=Math.abs(Va),void 0===va&&(va=0>Va),va===0>Va?(ma&&Aa.push(ma),ma=[A[Ma]]):ma.push(A[Ma]))}if(ma&&
Aa.push(ma),1<K)for(A=0;A<Aa.length;A++)Aa[A].length<=K||(ii(Aa[A],K,1,Aa[A].length-1,nj),Aa[A]=Aa[A].slice(0,K));return Aa}function nj(A,K){return K.area-A.area}function Pi(A,K,T){T=T.patternDependencies;for(var ma=!1,va=0;va<K.length;va+=1){var Aa=K[va].paint.get(A+"-pattern");Aa.isConstant()||(ma=!0);(Aa=Aa.constantOr(null))&&(ma=!0,T[Aa.to]=!0,T[Aa.from]=!0)}return ma}function Qi(A,K,T,ma,va){for(var Aa=va.patternDependencies,Ma=0;Ma<K.length;Ma+=1){var Va=K[Ma],jb=Va.paint.get(A+"-pattern").value;
if("constant"!==jb.kind){var qb=jb.evaluate({zoom:ma-1},T,{},va.availableImages),zb=jb.evaluate({zoom:ma},T,{},va.availableImages);jb=jb.evaluate({zoom:ma+1},T,{},va.availableImages);zb=zb&&zb.name?zb.name:zb;jb=jb&&jb.name?jb.name:jb;Aa[qb=qb&&qb.name?qb.name:qb]=!0;Aa[zb]=!0;Aa[jb]=!0;T.patterns[Va.id]={min:qb,mid:zb,max:jb}}}return T}function Vg(A,K,T,ma,va){this.properties={};this.extent=T;this.type=0;this._pbf=A;this._geometry=-1;this._keys=ma;this._values=va;A.readFields(yk,this,K)}function yk(A,
K,T){if(1==A)K.id=T.readVarint();else if(2==A)for(A=T.readVarint()+T.pos;T.pos<A;){var ma=K._keys[T.readVarint()],va=K._values[T.readVarint()];K.properties[ma]=va}else 3==A?K.type=T.readVarint():4==A&&(K._geometry=T.pos)}function rh(A,K){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=A;this._keys=[];this._values=[];this._features=[];A.readFields(Hh,this,K);this.length=this._features.length}function Hh(A,K,T){15===A?K.version=T.readVarint():1===A?K.name=T.readString():5===A?
K.extent=T.readVarint():2===A?K._features.push(T.pos):3===A?K._keys.push(T.readString()):4===A&&K._values.push(function(ma){for(var va=null,Aa=ma.readVarint()+ma.pos;ma.pos<Aa;)va=ma.readVarint()>>3,va=1===va?ma.readString():2===va?ma.readFloat():3===va?ma.readDouble():4===va?ma.readVarint64():5===va?ma.readVarint():6===va?ma.readSVarint():7===va?ma.readBoolean():null;return va}(T))}function zk(A,K,T){3===A&&(A=new Qk(T,T.readVarint()+T.pos),A.length&&(K[A.name]=A))}function Ih(A,K,T,ma,va,Aa,Ma,
Va){A.emplaceBack(K,T,2*Math.floor(ma*Gj)+Ma,va*Gj*2,Aa*Gj*2,Math.round(Va))}function Hg(A,K){return A.x*K.x+A.y*K.y}function Wj(A,K){if(1===A.length){for(var T,ma=0,va=K[ma++];!T||va.equals(T);)if(!(T=K[ma++]))return 1/0;for(;ma<K.length;ma++){var Aa=K[ma],Ma=A[0],Va=T.sub(va),jb=Aa.sub(va),qb=Ma.sub(va);Ma=Hg(Va,Va);var zb=Hg(Va,jb),Hb=Hg(jb,jb);Va=Hg(qb,Va);jb=Hg(qb,jb);qb=Ma*Hb-zb*zb;Hb=(Hb*Va-zb*jb)/qb;Ma=(Ma*jb-zb*Va)/qb;Aa=va.z*(1-Hb-Ma)+T.z*Hb+Aa.z*Ma;if(isFinite(Aa))return Aa}return 1/0}A=
1/0;for(T=0;T<K.length;T+=1)A=Math.min(A,K[T].z);return A}function oi(A,K){return 0<K?K+2*A:A}function sh(A,K,T){return A.sections.forEach(function(ma){var va=ma.text;var Aa=K.layout.get("text-transform").evaluate(T,{});Aa=("uppercase"===Aa?va=va.toLocaleUpperCase():"lowercase"===Aa&&(va=va.toLocaleLowerCase()),Pf.applyArabicShaping&&(va=Pf.applyArabicShaping(va)),va);ma.text=Aa}),A}function Be(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0);this.type=this.pos=0;this.length=
this.buf.length}function Vf(A){return A.type===Be.Bytes?A.readVarint()+A.pos:A.pos+1}function Kh(A,K,T){K=16383>=K?1:2097151>=K?2:268435455>=K?3:Math.floor(Math.log(K)/(7*Math.LN2));T.realloc(K);for(var ma=T.pos-1;ma>=A;ma--)T.buf[ma+K]=T.buf[ma]}function pi(A,K){for(var T=0;T<A.length;T++)K.writeVarint(A[T])}function oj(A,K){for(var T=0;T<A.length;T++)K.writeSVarint(A[T])}function pj(A,K){for(var T=0;T<A.length;T++)K.writeFloat(A[T])}function qj(A,K){for(var T=0;T<A.length;T++)K.writeDouble(A[T])}
function Si(A,K){for(var T=0;T<A.length;T++)K.writeBoolean(A[T])}function Xj(A,K){for(var T=0;T<A.length;T++)K.writeFixed32(A[T])}function rj(A,K){for(var T=0;T<A.length;T++)K.writeSFixed32(A[T])}function qi(A,K){for(var T=0;T<A.length;T++)K.writeFixed64(A[T])}function Ak(A,K){for(var T=0;T<A.length;T++)K.writeSFixed64(A[T])}function Lh(A,K){return(A[K]|A[K+1]<<8|A[K+2]<<16)+16777216*A[K+3]}function th(A,K,T){A[T]=K;A[T+1]=K>>>8;A[T+2]=K>>>16;A[T+3]=K>>>24}function vg(A,K){return(A[K]|A[K+1]<<8|A[K+
2]<<16)+(A[K+3]<<24)}function Yj(A,K,T){1===A&&T.readMessage(uh,K)}function uh(A,K,T){if(3===A){A=T.readMessage(Ti,{});T=A.width;var ma=A.height,va=A.left,Aa=A.top,Ma=A.advance;K.push({id:A.id,bitmap:new fh({width:T+6,height:ma+6},A.bitmap),metrics:{width:T,height:ma,left:va,top:Aa,advance:Ma}})}}function Ti(A,K,T){1===A?K.id=T.readVarint():2===A?K.bitmap=T.readBytes():3===A?K.width=T.readVarint():4===A?K.height=T.readVarint():5===A?K.left=T.readSVarint():6===A?K.top=T.readSVarint():7===A&&(K.advance=
T.readVarint())}function sj(A){for(var K=0,T=0,ma=0;ma<A.length;ma+=1){var va=A[ma];K+=va.w*va.h;T=Math.max(T,va.w)}A.sort(function(qb,zb){return zb.h-qb.h});T=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(K/.95)),T),h:1/0}];for(var Aa=va=ma=0;Aa<A.length;Aa+=1)for(var Ma=A[Aa],Va=T.length-1;0<=Va;Va--){var jb=T[Va];if(!(Ma.w>jb.w||Ma.h>jb.h)){(Ma.x=jb.x,Ma.y=jb.y,va=Math.max(va,Ma.y+Ma.h),ma=Math.max(ma,Ma.x+Ma.w),Ma.w===jb.w&&Ma.h===jb.h)?(Ma=T.pop(),Va<T.length&&(T[Va]=Ma)):Ma.h===jb.h?(jb.x+=Ma.w,
jb.w-=Ma.w):Ma.w===jb.w?(jb.y+=Ma.h,jb.h-=Ma.h):(T.push({x:jb.x+Ma.w,y:jb.y,w:jb.w-Ma.w,h:Ma.h}),jb.y+=Ma.h,jb.h-=Ma.h);break}}return{w:ma,h:va,fill:K/(ma*va)||0}}function Mh(A,K,T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb,$b,bc){va=Pb.fromFeature(A,va);Hb===Oc.vertical&&va.verticalizePunctuation();var Ec=Pf.processBidirectionalText,ld=Pf.processStyledBidirectionalText;if(Ec&&1===va.sections.length){A=[];var pd=0;for(Aa=Ec(va.toString(),Je(va,qb,Aa,K,ma,Sb,$b));pd<Aa.length;pd+=1){Sb=Aa[pd];$b=new Pb;$b.text=
Sb;$b.sections=va.sections;for(Ec=0;Ec<Sb.length;Ec++)$b.sectionIndex.push(0);A.push($b)}}else if(ld)for(A=[],pd=0,Aa=ld(va.text,va.sectionIndex,Je(va,qb,Aa,K,ma,Sb,$b));pd<Aa.length;pd+=1)Sb=Aa[pd],$b=new Pb,$b.text=Sb[0],$b.sectionIndex=Sb[1],$b.sections=va.sections,A.push($b);else A=function(bd,Ad){for(var zd=[],Cd=bd.text,Od=0,Ud=0;Ud<Ad.length;Ud+=1){var ce=Ad[Ud];zd.push(bd.substring(Od,ce));Od=ce}return Od<Cd.length&&zd.push(bd.substring(Od,Cd.length)),zd}(va,Je(va,qb,Aa,K,ma,Sb,$b));Aa=[];
zb={positionedLines:Aa,text:va.toString(),top:zb[1],bottom:zb[1],left:zb[0],right:zb[0],writingMode:Hb,iconsInText:!1,verticalizable:!1};return function(bd,Ad,zd,Cd,Od,Ud,ce,ee,Td,Yd,se,Pd){var Gd=0,Rd=-17,xe=0,Ve=0;ee="right"===ee?1:"left"===ee?0:.5;for(var Nf=0,pf=0;pf<Od.length;pf+=1){var We=Od[pf];We.trim();var te=We.getMaxScale(),ef=24*(te-1),yf={positionedGlyphs:[],lineOffset:0};bd.positionedLines[Nf]=yf;var Cf=yf.positionedGlyphs,Hj=0;if(We.length()){for(var Og=0;Og<We.length();Og++){var af=
We.getSection(Og),Sf=We.getSectionIndex(Og),Ei=We.getCharCode(Og),dj,Ij=null,Of=null,Fi=24,hf=!(Td===Oc.horizontal||!se&&!je(Ei)||se&&(jc[Ei]||(Tf=Ei,Id.Arabic(Tf)||Id["Arabic Supplement"](Tf)||Id["Arabic Extended-A"](Tf)||Id["Arabic Presentation Forms-A"](Tf)||Id["Arabic Presentation Forms-B"](Tf))));if(af.imageName){Fi=Cd[af.imageName];if(!Fi)continue;Of=af.imageName;bd.iconsInText=bd.iconsInText||!0;Ij=Fi.paddedRect;var sg=Fi.displaySize;af.scale=24*af.scale/Pd;var Qe=ef+(24-sg[1]*af.scale);Fi=
(dj={width:sg[0],height:sg[1],left:1,top:-3,advance:hf?sg[1]:sg[0]}).advance;sg=hf?sg[0]*af.scale-24*te:sg[1]*af.scale-24*te;0<sg&&sg>Hj&&(Hj=sg)}else{if((Qe=(Qe=zd[af.fontStack])&&Qe[Ei])&&Qe.rect)Ij=Qe.rect,dj=Qe.metrics;else{Qe=(Qe=Ad[af.fontStack])&&Qe[Ei];if(!Qe)continue;dj=Qe.metrics}Qe=24*(te-af.scale)}hf?(bd.verticalizable=!0,Cf.push({glyph:Ei,imageName:Of,x:Gd,y:Rd+Qe,vertical:hf,scale:af.scale,fontStack:af.fontStack,sectionIndex:Sf,metrics:dj,rect:Ij}),Gd+=Fi*af.scale+Yd):(Cf.push({glyph:Ei,
imageName:Of,x:Gd,y:Rd+Qe,vertical:hf,scale:af.scale,fontStack:af.fontStack,sectionIndex:Sf,metrics:dj,rect:Ij}),Gd+=dj.advance*af.scale+Yd)}if(0!==Cf.length&&(xe=Math.max(Gd-Yd,xe),Gd=Cf,Cf=Cf.length-1,We=Hj,ee||We))for(Og=Gd[Cf],Og=(Gd[Cf].x+Og.metrics.advance*Og.scale)*ee,af=0;af<=Cf;af++)Gd[af].x-=Og,Gd[af].y+=We;Gd=0;te=Ud*te+Hj;yf.lineOffset=Math.max(Hj,ef);Rd+=te;Ve=Math.max(te,Ve)}else Rd+=Ud;++Nf}var Tf;Ad=Rd- -17;zd=Me(ce);ce=zd.horizontalAlign;zd=zd.verticalAlign;ee=(ee-ce)*xe;Od=Ve!==
Ud?-Ad*zd- -17:(-zd*Od.length+.5)*Ud;Ud=0;for(Ve=bd.positionedLines;Ud<Ve.length;Ud+=1)for(Cd=0,Td=Ve[Ud].positionedGlyphs;Cd<Td.length;Cd+=1)Yd=Td[Cd],Yd.x+=ee,Yd.y+=Od;bd.top+=-zd*Ad;bd.bottom=bd.top+Ad;bd.left+=-ce*xe;bd.right=bd.left+xe}(zb,K,T,ma,A,Ma,Va,jb,Hb,qb,Ub,bc),!function(bd){for(var Ad=0;Ad<bd.length;Ad+=1)if(0!==bd[Ad].positionedGlyphs.length)return!1;return!0}(Aa)&&zb}function Se(A,K,T,ma,va,Aa){return K.imageName?(A=ma[K.imageName])?A.displaySize[0]*K.scale*24/Aa+va:0:(A=(Aa=T[K.fontStack])&&
Aa[A])?A.metrics.advance*K.scale+va:0}function Ui(A,K,T,ma){var va=Math.pow(A-K,2);return ma?A<K?va/2:2*va:va+Math.abs(T)*T}function Nh(A,K,T){var ma=0;return 10===A&&(ma-=1E4),T&&(ma+=150),40!==A&&65288!==A||(ma+=50),41!==K&&65289!==K||(ma+=50),ma}function Wg(A,K,T,ma,va,Aa){for(var Ma=null,Va=Ui(K,T,va,Aa),jb=0;jb<ma.length;jb+=1){var qb=ma[jb],zb=Ui(K-qb.x,T,va,Aa)+qb.badness;zb<=Va&&(Ma=qb,Va=zb)}return{index:A,x:K,priorBreak:Ma,badness:Va}}function Je(A,K,T,ma,va,Aa,Ma){if("point"!==Aa||!A)return[];
var Va;Aa=[];T=function($b,bc,Ec,ld,pd,bd){for(var Ad=0,zd=0;zd<$b.length();zd++){var Cd=$b.getSection(zd);Ad+=Se($b.getCharCode(zd),Cd,ld,pd,bc,bd)}return Ad/Math.max(1,Math.ceil(Ad/Ec))}(A,K,T,ma,va,Ma);for(var jb=0<=A.text.indexOf(""),qb=0,zb=0;zb<A.length();zb++){var Hb=A.getSection(zb),Ub=A.getCharCode(zb);if(jc[Ub]||(qb+=Se(Ub,Hb,ma,va,K,Ma)),zb<A.length()-1){var Sb=!(11904>(Va=Ub)||!(Id["Bopomofo Extended"](Va)||Id.Bopomofo(Va)||Id["CJK Compatibility Forms"](Va)||Id["CJK Compatibility Ideographs"](Va)||
Id["CJK Compatibility"](Va)||Id["CJK Radicals Supplement"](Va)||Id["CJK Strokes"](Va)||Id["CJK Symbols and Punctuation"](Va)||Id["CJK Unified Ideographs Extension A"](Va)||Id["CJK Unified Ideographs"](Va)||Id["Enclosed CJK Letters and Months"](Va)||Id["Halfwidth and Fullwidth Forms"](Va)||Id.Hiragana(Va)||Id["Ideographic Description Characters"](Va)||Id["Kangxi Radicals"](Va)||Id["Katakana Phonetic Extensions"](Va)||Id.Katakana(Va)||Id["Vertical Forms"](Va)||Id["Yi Radicals"](Va)||Id["Yi Syllables"](Va)));
(Hc[Ub]||Sb||Hb.imageName)&&Aa.push(Wg(zb+1,qb,T,Aa,Nh(Ub,A.getCharCode(zb+1),Sb&&jb),!1))}}return function Ec(bc){return bc?Ec(bc.priorBreak).concat(bc.index):[]}(Wg(A.length(),qb,T,Aa,0,!0))}function Me(A){var K=.5,T=.5;switch(A){case "right":case "top-right":case "bottom-right":K=1;break;case "left":case "top-left":case "bottom-left":K=0}switch(A){case "bottom":case "bottom-right":case "bottom-left":T=1;break;case "top":case "top-right":case "top-left":T=0}return{horizontalAlign:K,verticalAlign:T}}
function Xg(A,K,T,ma,va,Aa){A=A.image;if(A.content){var Ma=A.content;var Va=A.pixelRatio||1;Ma=[Ma[0]/Va,Ma[1]/Va,A.displaySize[0]-Ma[2]/Va,A.displaySize[1]-Ma[3]/Va]}var jb,qb,zb,Hb;Va=K.left*Aa;var Ub=K.right*Aa;"width"===T||"both"===T?(Hb=va[0]+Va-ma[3],qb=va[0]+Ub+ma[1]):qb=(Hb=va[0]+(Va+Ub-A.displaySize[0])/2)+A.displaySize[0];Va=K.top*Aa;K=K.bottom*Aa;return"height"===T||"both"===T?(jb=va[1]+Va-ma[0],zb=va[1]+K+ma[2]):zb=(jb=va[1]+(Va+K-A.displaySize[1])/2)+A.displaySize[1],{image:A,top:jb,
right:qb,bottom:zb,left:Hb,collisionPadding:Ma}}function Oh(A,K){K=K.expression;if("constant"===K.kind)return{kind:"constant",layoutSize:K.evaluate(new Pe(A+1))};if("source"===K.kind)return{kind:"source"};for(var T=K.zoomStops,ma=K.interpolationType,va=0;va<T.length&&T[va]<=A;)va++;for(var Aa=va=Math.max(0,va-1);Aa<T.length&&T[Aa]<A+1;)Aa++;Aa=Math.min(T.length-1,Aa);A=T[va];T=T[Aa];return"composite"===K.kind?{kind:"composite",minZoom:A,maxZoom:T,interpolationType:ma}:{kind:"camera",minZoom:A,maxZoom:T,
minSize:K.evaluate(new Pe(A)),maxSize:K.evaluate(new Pe(T)),interpolationType:ma}}function tj(A,K,T){var ma=K.uSize,va=T.lowerSize;return"source"===A.kind?va/128:"composite"===A.kind?hb(va/128,T.upperSize/128,K.uSizeT):ma}function uj(A,K){var T=0,ma=0;if("constant"===A.kind)ma=A.layoutSize;else if("source"!==A.kind){var va=A.interpolationType;K=va?c(of.interpolationFactor(va,K,A.minZoom,A.maxZoom),0,1):0;"camera"===A.kind?ma=hb(A.minSize,A.maxSize,K):T=K}return{uSizeT:T,uSize:ma}}function vj(A,K,
T,ma,va){if(void 0===K.segment)return!0;var Aa=K;K=K.segment+1;for(var Ma=0;Ma>-T/2;){if(0>--K)return!1;Ma-=A[K].dist(Aa);Aa=A[K]}Ma+=A[K].dist(A[K+1]);K++;Aa=[];for(var Va=0;Ma<T/2;){var jb=A[K],qb=A[K+1];if(!qb)return!1;var zb=A[K-1].angleTo(jb)-jb.angleTo(qb);zb=Math.abs((zb+3*Math.PI)%(2*Math.PI)-Math.PI);Aa.push({distance:Ma,angleDelta:zb});for(Va+=zb;Ma-Aa[0].distance>ma;)Va-=Aa.shift().angleDelta;if(Va>va)return!1;K++;Ma+=jb.dist(qb)}return!0}function wh(A){for(var K=0,T=0;T<A.length-1;T++)K+=
A[T].dist(A[T+1]);return K}function ri(A,K,T,ma,va,Aa){va=T?.6*va*Aa:0;T=Math.max(T?T.right-T.left:0,ma?ma.right-ma.left:0)*Aa;var Ma=0,Va=wh(A)/2;for(ma=0;ma<A.length-1;ma++){Aa=A[ma];var jb=A[ma+1],qb=Aa.dist(jb);if(Ma+qb>Va)return Va=(Va-Ma)/qb,Ma=hb(Aa.x,jb.x,Va),Va=hb(Aa.y,jb.y,Va),ma=new ad(Ma,Va,jb.angleTo(Aa),ma),ma._round(),!va||vj(A,ma,T,va,K)?ma:void 0;Ma+=qb}}function bg(A,K,T,ma,va,Aa,Ma,Va,jb){va=Math.max(ma?ma.right-ma.left:0,va?va.right-va.left:0);var qb=va*Ma,zb=0===A[0].x||A[0].x===
jb||0===A[0].y||A[0].y===jb;return K-qb<K/4&&(K=qb+K/4),function zd(Ub,Sb,$b,bc,Ec,ld,pd,bd,Ad){var Cd=ld/2,Od=wh(Ub),Ud=0;Sb-=$b;for(var ce=[],ee=0;ee<Ub.length-1;ee++){for(var Td=Ub[ee],Yd=Ub[ee+1],se=Td.dist(Yd),Pd=Yd.angleTo(Td);Sb+$b<Ud+se;){var Gd=((Sb+=$b)-Ud)/se,Rd=hb(Td.x,Yd.x,Gd);Gd=hb(Td.y,Yd.y,Gd);0<=Rd&&Rd<Ad&&0<=Gd&&Gd<Ad&&0<=Sb-Cd&&Sb+Cd<=Od&&(Rd=new ad(Rd,Gd,Pd,ee),Rd._round(),bc&&!vj(Ub,Rd,ld,bc,Ec)||ce.push(Rd))}Ud+=se}return bd||ce.length||pd||(ce=zd(Ub,Ud/2,$b,bc,Ec,ld,pd,!0,Ad)),
ce}(A,zb?K/2*Va%K:(va/2+2*Aa)*Ma*Va%K,K,ma?.6*Aa*Ma:0,T,qb,zb,!1,jb)}function si(A,K,T,ma,va){for(var Aa=[],Ma=0;Ma<A.length;Ma++)for(var Va=A[Ma],jb=void 0,qb=0;qb<Va.length-1;qb++){var zb=Va[qb],Hb=Va[qb+1];zb.x<K&&Hb.x<K||(zb.x<K?zb=(new pe(K,zb.y+(K-zb.x)/(Hb.x-zb.x)*(Hb.y-zb.y)))._round():Hb.x<K&&(Hb=(new pe(K,zb.y+(K-zb.x)/(Hb.x-zb.x)*(Hb.y-zb.y)))._round()),zb.y<T&&Hb.y<T||(zb.y<T?zb=(new pe(zb.x+(T-zb.y)/(Hb.y-zb.y)*(Hb.x-zb.x),T))._round():Hb.y<T&&(Hb=(new pe(zb.x+(T-zb.y)/(Hb.y-zb.y)*(Hb.x-
zb.x),T))._round()),zb.x>=ma&&Hb.x>=ma||(zb.x>=ma?zb=(new pe(ma,zb.y+(ma-zb.x)/(Hb.x-zb.x)*(Hb.y-zb.y)))._round():Hb.x>=ma&&(Hb=(new pe(ma,zb.y+(ma-zb.x)/(Hb.x-zb.x)*(Hb.y-zb.y)))._round()),zb.y>=va&&Hb.y>=va||(zb.y>=va?zb=(new pe(zb.x+(va-zb.y)/(Hb.y-zb.y)*(Hb.x-zb.x),va))._round():Hb.y>=va&&(Hb=(new pe(zb.x+(va-zb.y)/(Hb.y-zb.y)*(Hb.x-zb.x),va))._round()),jb&&zb.equals(jb[jb.length-1])||Aa.push(jb=[zb]),jb.push(Hb)))))}return Aa}function Zj(A,K,T,ma){var va=[],Aa=A.image,Ma=Aa.pixelRatio,Va=Aa.paddedRect.w-
2,jb=Aa.paddedRect.h-2,qb=A.right-A.left,zb=A.bottom-A.top,Hb=Aa.stretchX||[[0,Va]],Ub=Aa.stretchY||[[0,jb]],Sb=function(ee,Td){return ee+Td[1]-Td[0]},$b=Hb.reduce(Sb,0),bc=Ub.reduce(Sb,0),Ec=Va-$b,ld=jb-bc,pd=0,bd=$b,Ad=0,zd=bc,Cd=0,Od=Ec,Ud=0,ce=ld;Aa.content&&ma&&(Sb=Aa.content,pd=cf(Hb,0,Sb[0]),Ad=cf(Ub,0,Sb[1]),bd=cf(Hb,Sb[0],Sb[2]),zd=cf(Ub,Sb[1],Sb[3]),Cd=Sb[0]-pd,Ud=Sb[1]-Ad,Od=Sb[2]-Sb[0]-bd,ce=Sb[3]-Sb[1]-zd);Sb=function(ee,Td,Yd,se){var Pd=(ee.stretch-pd)/bd*qb+A.left,Gd=ee.fixed-Cd-Od*
ee.stretch/$b,Rd=(Td.stretch-Ad)/zd*zb+A.top,xe=Td.fixed-Ud-ce*Td.stretch/bc,Ve=(Yd.stretch-pd)/bd*qb+A.left,Nf=Yd.fixed-Cd-Od*Yd.stretch/$b,pf=(se.stretch-Ad)/zd*zb+A.top,We=se.fixed-Ud-ce*se.stretch/bc,te=new pe(Pd,Rd);Rd=new pe(Ve,Rd);Ve=new pe(Ve,pf);Pd=new pe(Pd,pf);Gd=new pe(Gd/Ma,xe/Ma);Nf=new pe(Nf/Ma,We/Ma);if(xe=K*Math.PI/180)We=Math.sin(xe),xe=Math.cos(xe),We=[xe,-We,We,xe],te._matMult(We),Rd._matMult(We),Pd._matMult(We),Ve._matMult(We);ee=ee.stretch+ee.fixed;Td=Td.stretch+Td.fixed;return{tl:te,
tr:Rd,bl:Pd,br:Ve,tex:{x:Aa.paddedRect.x+1+ee,y:Aa.paddedRect.y+1+Td,w:Yd.stretch+Yd.fixed-ee,h:se.stretch+se.fixed-Td},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Gd,pixelOffsetBR:Nf,minFontScaleX:Od/Ma/qb,minFontScaleY:ce/Ma/zb,isSDF:T}};if(ma&&(Aa.stretchX||Aa.stretchY))for(ma=ig(Hb,Ec,$b),Ub=ig(Ub,ld,bc),Va=0;Va<ma.length-1;Va++)for(jb=ma[Va],Hb=ma[Va+1],ld=0;ld<Ub.length-1;ld++)va.push(Sb(jb,Ub[ld],Hb,Ub[ld+1]));else va.push(Sb({fixed:0,stretch:-1},{fixed:0,stretch:-1},
{fixed:0,stretch:Va+1},{fixed:0,stretch:jb+1}));return va}function cf(A,K,T){for(var ma=0,va=0;va<A.length;va+=1){var Aa=A[va];ma+=Math.max(K,Math.min(T,Aa[1]))-Math.max(K,Math.min(T,Aa[0]))}return ma}function ig(A,K,T){for(var ma=[{fixed:-1,stretch:0}],va=0;va<A.length;va+=1){var Aa=A[va],Ma=Aa[0];Aa=Aa[1];var Va=ma[ma.length-1];ma.push({fixed:Ma-Va.stretch,stretch:Va.stretch});ma.push({fixed:Ma-Va.stretch,stretch:Va.stretch+(Aa-Ma)})}return ma.push({fixed:K+1,stretch:T}),ma}function jg(A,K){return A<
K?-1:A>K?1:0}function ti(A,K,T){void 0===K&&(K=1);void 0===T&&(T=!1);for(var ma=1/0,va=1/0,Aa=-1/0,Ma=-1/0,Va=A[0],jb=0;jb<Va.length;jb++){var qb=Va[jb];(!jb||qb.x<ma)&&(ma=qb.x);(!jb||qb.y<va)&&(va=qb.y);(!jb||qb.x>Aa)&&(Aa=qb.x);(!jb||qb.y>Ma)&&(Ma=qb.y)}qb=Math.min(Aa-ma,Ma-va);Va=qb/2;jb=new Zc([],Yg);if(0===qb)return new pe(ma,va);for(;ma<Aa;ma+=qb)for(var zb=va;zb<Ma;zb+=qb)jb.push(new Gf(ma+Va,zb+Va,Va,A));Ma=Aa=va=0;ma=A[0];qb=0;zb=ma.length;for(var Hb=zb-1;qb<zb;Hb=qb++){var Ub=ma[qb];Hb=
ma[Hb];var Sb=Ub.x*Hb.y-Hb.x*Ub.y;Aa+=(Ub.x+Hb.x)*Sb;Ma+=(Ub.y+Hb.y)*Sb;va+=3*Sb}va=new Gf(Aa/va,Ma/va,0,A);for(Aa=jb.length;jb.length;)Ma=jb.pop(),(Ma.d>va.d||!va.d)&&(va=Ma,T&&console.log("found best %d after %d probes",Math.round(1E4*Ma.d)/1E4,Aa)),Ma.max-va.d<=K||(jb.push(new Gf(Ma.p.x-(Va=Ma.h/2),Ma.p.y-Va,Va,A)),jb.push(new Gf(Ma.p.x+Va,Ma.p.y-Va,Va,A)),jb.push(new Gf(Ma.p.x-Va,Ma.p.y+Va,Va,A)),jb.push(new Gf(Ma.p.x+Va,Ma.p.y+Va,Va,A)),Aa+=4);return T&&(console.log("num probes: "+Aa),console.log("best distance: "+
va.d)),va.p}function Yg(A,K){return K.max-A.max}function Gf(A,K,T,ma){this.p=new pe(A,K);this.h=T;A=this.p;K=!1;T=1/0;for(var va=0;va<ma.length;va++)for(var Aa=ma[va],Ma=0,Va=Aa.length,jb=Va-1;Ma<Va;jb=Ma++){var qb=Aa[Ma];jb=Aa[jb];qb.y>A.y!=jb.y>A.y&&A.x<(jb.x-qb.x)*(A.y-qb.y)/(jb.y-qb.y)+qb.x&&(K=!K);T=Math.min(T,Vc(A,qb,jb))}this.d=(K?1:-1)*Math.sqrt(T);this.max=this.d+this.h*Math.SQRT2}function Rf(A,K){return K[1]!==Ed?function(T,ma,va){var Aa=0,Ma=0;switch(ma=Math.abs(ma),va=Math.abs(va),T){case "top-right":case "top-left":case "top":Ma=
va-7;break;case "bottom-right":case "bottom-left":case "bottom":Ma=7-va}switch(T){case "top-right":case "bottom-right":case "right":Aa=-ma;break;case "top-left":case "bottom-left":case "left":Aa=ma}return[Aa,Ma]}(A,K[0],K[1]):function(T,ma){var va=0,Aa=0;0>ma&&(ma=0);var Ma=ma/Math.sqrt(2);switch(T){case "top-right":case "top-left":Aa=Ma-7;break;case "bottom-right":case "bottom-left":Aa=7-Ma;break;case "bottom":Aa=7-ma;break;case "top":Aa=ma-7}switch(T){case "top-right":case "bottom-right":va=-Ma;
break;case "top-left":case "bottom-left":va=Ma;break;case "left":va=ma;break;case "right":va=-ma}return[va,Aa]}(A,K[0])}function wj(A){switch(A){case "right":case "top-right":case "bottom-right":return"right";case "left":case "top-left":case "bottom-left":return"left"}return"center"}function xj(A,K,T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb,$b){for(var bc=A.allowVerticalPlacement,Ec=va.layout.get("text-rotate").evaluate(Ma,{})*Math.PI/180,ld=[],pd=0,bd=T.positionedLines;pd<bd.length;pd+=1)for(var Ad=bd[pd],
zd=0,Cd=Ad.positionedGlyphs;zd<Cd.length;zd+=1){var Od=Cd[zd];if(Od.rect){var Ud=Od.rect||{},ce=4,ee=!0,Td=1,Yd=0,se=(Aa||bc)&&Od.vertical,Pd=Od.metrics.advance*Od.scale/2;if(bc&&T.verticalizable&&(Yd=Ad.lineOffset/2-(Od.imageName?-(24-Od.metrics.width*Od.scale)/2:24*(Od.scale-1))),Od.imageName){var Gd=ma[Od.imageName];ee=Gd.sdf;ce=1/(Td=Gd.pixelRatio)}Gd=Aa?[Od.x+Pd,Od.y]:[0,0];var Rd=Aa?[0,0]:[Od.x+Pd+Va[0],Od.y+Va[1]-Yd],xe=[0,0];se&&(xe=Rd,Rd=[0,0]);Yd=(Od.metrics.left-ce)*Od.scale-Pd+Rd[0];ce=
(-Od.metrics.top-ce)*Od.scale+Rd[1];Rd=Yd+Ud.w*Od.scale/Td;var Ve=ce+Ud.h*Od.scale/Td;Td=new pe(Yd,ce);ce=new pe(Rd,ce);Yd=new pe(Yd,Ve);Rd=new pe(Rd,Ve);se&&(se=new pe(-Pd,Pd- -17),Ve=-Math.PI/2,Pd=12-Pd,Pd=new pe(22-Pd,-(Od.imageName?Pd:0)),xe=new (Function.prototype.bind.apply(pe,[null].concat(xe))),Td._rotateAround(Ve,se)._add(Pd)._add(xe),ce._rotateAround(Ve,se)._add(Pd)._add(xe),Yd._rotateAround(Ve,se)._add(Pd)._add(xe),Rd._rotateAround(Ve,se)._add(Pd)._add(xe));Ec&&(Pd=Math.sin(Ec),xe=Math.cos(Ec),
Pd=[xe,-Pd,Pd,xe],Td._matMult(Pd),ce._matMult(Pd),Yd._matMult(Pd),Rd._matMult(Pd));Pd=new pe(0,0);xe=new pe(0,0);ld.push({tl:Td,tr:ce,bl:Yd,br:Rd,tex:Ud,writingMode:T.writingMode,glyphOffset:Gd,sectionIndex:Od.sectionIndex,isSDF:ee,pixelOffsetTL:Pd,pixelOffsetBR:xe,minFontScaleX:0,minFontScaleY:0})}}T=A.textSizeData;ma=null;"source"===T.kind?32640<(ma=[128*va.layout.get("text-size").evaluate(Ma,{})])[0]&&x(A.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".'):"composite"===
T.kind&&(32640<(ma=[128*Sb.compositeTextSizes[0].evaluate(Ma,{},$b),128*Sb.compositeTextSizes[1].evaluate(Ma,{},$b)])[0]||32640<ma[1])&&x(A.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".');A.addSymbols(A.text,ld,ma,Va,Aa,Ma,qb,K,jb.lineStartIndex,jb.lineLength,Ub,$b);for(K=0;K<zb.length;K+=1)Hb[zb[K]]=A.text.placedSymbolArray.length-1;return 4*ld.length}function Vi(A){for(var K in A)return A[K];return null}function Hf(A,K,T,ma){A=A.compareText;if(K in A)for(var va=
A[K],Aa=va.length-1;0<=Aa;Aa--){if(ma.dist(va[Aa])<T)return!0}else A[K]=[];return A[K].push(ma),!1}function ff(A,K,T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub){A.emplaceBack(K,T,Math.round(32*ma),Math.round(32*va),Aa,Ma,((Va?Math.min(32640,Math.round(Va[0])):0)<<1)+(jb?1:0),Va?Math.min(32640,Math.round(Va[1])):0,16*qb,16*zb,256*Hb,256*Ub)}function cg(A,K,T){A.emplaceBack(K.x,K.y,T);A.emplaceBack(K.x,K.y,T);A.emplaceBack(K.x,K.y,T);A.emplaceBack(K.x,K.y,T)}function Ck(A){var K=0;for(A=A.sections;K<A.length;K+=
1){a:{var T=0;for(var ma=A[K].text;T<ma.length;T+=1)if(be(ma[T].charCodeAt(0))){T=!0;break a}T=!1}if(T)return!0}return!1}function ak(A,K,T){T=12756274*Math.PI/256/Math.pow(2,T);return[A*T-12756274*Math.PI/2,K*T-12756274*Math.PI/2]}function Zg(A){return(180+A)/360}function Af(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function xh(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}function kg(A,K,T,ma,va){0>(A*=2)&&(A=-1*A-1);var Aa=1<<T;return(Aa*
Aa*A+Aa*va+ma).toString(36)+T.toString(36)+K.toString(36)}function lg(A,K,T,ma,va){return w(A,function(Aa,Ma){return(Aa=K instanceof qg?K.get(Ma):null)&&Aa.evaluate?Aa.evaluate(T,ma,va):Aa})}function $g(A){for(var K=1/0,T=1/0,ma=-1/0,va=-1/0,Aa=0;Aa<A.length;Aa+=1){var Ma=A[Aa];K=Math.min(K,Ma.x);T=Math.min(T,Ma.y);ma=Math.max(ma,Ma.x);va=Math.max(va,Ma.y)}return{minX:K,minY:T,maxX:ma,maxY:va}}function yh(A,K){return K-A}var ah=k;k.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*
A};k.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A};k.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx};k.prototype.solveCurveX=function(A,K){var T,ma;void 0===K&&(K=1E-6);var va=A;for(T=0;8>T;T++){if(ma=this.sampleCurveX(va)-A,Math.abs(ma)<K)return va;var Aa=this.sampleCurveDerivativeX(va);if(1E-6>Math.abs(Aa))break;va-=ma/Aa}if((va=A)<(T=0))return T;if(va>(Aa=1))return Aa;for(;T<Aa&&!(ma=this.sampleCurveX(va),Math.abs(ma-A)<K);)A>
ma?T=va:Aa=va,va=.5*(Aa-T)+T;return va};k.prototype.solve=function(A,K){return this.sampleCurveY(this.solveCurveX(A,K))};var pe=p;p.prototype={clone:function(){return new p(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},
rotateAround:function(A,K){return this.clone()._rotateAround(A,K)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var K=A.x-this.x;A=A.y-this.y;return K*K+A*A},angle:function(){return Math.atan2(this.y,
this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,K){return Math.atan2(this.x*K-this.y*A,this.x*A+this.y*K)},_matMult:function(A){var K=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=K,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=
A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var K=Math.cos(A);A=Math.sin(A);var T=A*this.x+K*this.y;return this.x=K*this.x-A*this.y,this.y=T,this},_rotateAround:function(A,K){var T=Math.cos(A);A=Math.sin(A);var ma=K.y+A*(this.x-K.x)+T*(this.y-K.y);return this.x=K.x+
T*(this.x-K.x)-A*(this.y-K.y),this.y=ma,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};p.convert=function(A){return A instanceof p?A:Array.isArray(A)?new p(A[0],A[1]):A};var Dk=n(.25,.1,.25,1),kf=1,yj={},mg=null,wg,Ig,Ph,bh,bk=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Qh=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Ek=
self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,zh={now:bk,frame:function(A){var K=Qh(A);return{cancel:function(){return Ek(K)}}},getImageData:function(A,K){void 0===K&&(K=0);var T=self.document.createElement("canvas"),ma=T.getContext("2d");if(!ma)throw Error("failed to create canvas 2d context");return T.width=A.width,T.height=A.height,ma.drawImage(A,0,0,A.width,A.height),ma.getImageData(-K,-K,A.width+2*K,A.height+2*K)},resolveURL:function(A){return wg||
(wg=self.document.createElement("a")),wg.href=A,wg.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Ig&&(Ig=self.matchMedia("(prefers-reduced-motion: reduce)")),Ig.matches)}},lf={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?
"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ng={supported:!1,testSupport:function(A){!Bf&&bh&&(Rh?L(A):Ph=A)}},Bf=!1,Rh=!1;self.document&&((bh=self.document.createElement("img")).onload=function(){Ph&&L(Ph);Ph=null;Rh=!0},bh.onerror=function(){Bf=!0;Ph=null},bh.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d");var If=function(A,K){this._transformRequestFn=
A;this._customAccessToken=K;this._createSkuToken()};If.prototype._createSkuToken=function(){var A;var K="";for(A=0;10>A;A++)K+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];K=["101",K].join("");A=Date.now()+432E5;this._skuToken=K;this._skuTokenExpiresAt=A};If.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt};If.prototype.transformRequest=function(A,K){return this._transformRequestFn&&this._transformRequestFn(A,K)||{url:A}};
If.prototype.normalizeStyleURL=function(A,K){if(!M(A))return A;A=N(A);return A.path="/styles/v1"+A.path,this._makeAPIURL(A,this._customAccessToken||K)};If.prototype.normalizeGlyphsURL=function(A,K){if(!M(A))return A;A=N(A);return A.path="/fonts/v1"+A.path,this._makeAPIURL(A,this._customAccessToken||K)};If.prototype.normalizeSourceURL=function(A,K){if(!M(A))return A;A=N(A);return A.path="/v4/"+A.authority+".json",A.params.push("secure"),this._makeAPIURL(A,this._customAccessToken||K)};If.prototype.normalizeSpriteURL=
function(A,K,T,ma){var va=N(A);return M(A)?(va.path="/styles/v1"+va.path+"/sprite"+K+T,this._makeAPIURL(va,this._customAccessToken||ma)):(va.path+=""+K+T,H(va))};If.prototype.normalizeTileURL=function(A,K){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!M(A))return A;A=N(A);A.path=A.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=zh.devicePixelRatio||512===K?"@2x":"")+(ng.supported?".webp":"$1"));A.path=A.path.replace(/^.+\/v4\//,"/");A.path="/v4"+A.path;if(!(K=this._customAccessToken))a:{K=0;for(var T=
A.params;K<T.length;K+=1){var ma=T[K].match(/^access_token=(.*)$/);if(ma){K=ma[1];break a}}K=null}K=K||lf.ACCESS_TOKEN;return lf.REQUIRE_ACCESS_TOKEN&&K&&this._skuToken&&A.params.push("sku\x3d"+this._skuToken),this._makeAPIURL(A,K)};If.prototype.canonicalizeTileURL=function(A,K){var T=N(A);if(!T.path.match(/(^\/v4\/)/)||!T.path.match(/\.[\w]+$/))return A;A="mapbox://tiles/"+T.path.replace("/v4/","");T=T.params;return K&&(T=T.filter(function(ma){return!ma.match(/^access_token=/)})),T.length&&(A+="?"+
T.join("\x26")),A};If.prototype.canonicalizeTileset=function(A,K){K=!!K&&M(K);var T=[],ma=0;for(A=A.tiles||[];ma<A.length;ma+=1){var va=A[ma];Ah.test(va)?T.push(this.canonicalizeTileURL(va,K)):T.push(va)}return T};If.prototype._makeAPIURL=function(A,K){var T=N(lf.API_URL);if(A.protocol=T.protocol,A.authority=T.authority,"/"!==T.path&&(A.path=""+T.path+A.path),!lf.REQUIRE_ACCESS_TOKEN)return H(A);if(!(K=K||lf.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
if("s"===K[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");return A.params=A.params.filter(function(ma){return-1===ma.indexOf("access_token")}),A.params.push("access_token\x3d"+K),H(A)};var Ah=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,ck=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,og=function(A){this.type=A;this.anonId=null;this.eventData={};this.queue=[];this.pendingRequest=
null};og.prototype.getStorageKey=function(A){var K,T=J(lf.ACCESS_TOKEN);return K=T&&T.u?self.btoa(encodeURIComponent(T.u).replace(/%([0-9A-F]{2})/g,function(ma,va){return String.fromCharCode(Number("0x"+va))})):lf.ACCESS_TOKEN||"",A?"mapbox.eventData."+A+":"+K:"mapbox.eventData:"+K};og.prototype.fetchEventData=function(){var A=I("localStorage"),K=this.getStorageKey(),T=this.getStorageKey("uuid");if(A)try{var ma=self.localStorage.getItem(K);ma&&(this.eventData=JSON.parse(ma));var va=self.localStorage.getItem(T);
va&&(this.anonId=va)}catch(Aa){x("Unable to read from LocalStorage")}};og.prototype.saveEventData=function(){var A=I("localStorage"),K=this.getStorageKey(),T=this.getStorageKey("uuid");if(A)try{self.localStorage.setItem(T,this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(K,JSON.stringify(this.eventData))}catch(ma){x("Unable to write to LocalStorage")}};og.prototype.processRequests=function(A){};og.prototype.postEvent=function(A,K,T,ma){var va=this;if(lf.EVENTS_URL){var Aa=
N(lf.EVENTS_URL);Aa.params.push("access_token\x3d"+(ma||lf.ACCESS_TOKEN||""));A={event:this.type,created:(new Date(A)).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:"01",userId:this.anonId};K=K?d(A,K):A;Aa={url:H(Aa),headers:{"Content-Type":"text/plain"},body:JSON.stringify([K])};this.pendingRequest=mb(Aa,function(Ma){va.pendingRequest=null;T(Ma);va.saveEventData();va.processRequests(ma)})}};og.prototype.queueRequest=function(A,K){this.queue.push(A);this.processRequests(K)};
var Jf,ui,Sh=function(A){function K(){A.call(this,"map.load");this.success={};this.skuToken=""}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.postMapLoadEvent=function(T,ma,va,Aa){this.skuToken=va;(lf.EVENTS_URL&&Aa||lf.ACCESS_TOKEN&&Array.isArray(T)&&T.some(function(Ma){return M(Ma)||Ah.test(Ma)}))&&this.queueRequest({id:ma,timestamp:Date.now()},Aa)},K.prototype.processRequests=function(T){var ma=this;if(!this.pendingRequest&&0!==this.queue.length){var va=
this.queue.shift(),Aa=va.id;va=va.timestamp;Aa&&this.success[Aa]||(this.anonId||this.fetchEventData(),r(this.anonId)||(this.anonId=q()),this.postEvent(va,{skuToken:this.skuToken},function(Ma){Ma||Aa&&(ma.success[Aa]=!0)},T))}},K}(og),xg=new (function(A){function K(T){A.call(this,"appUserTurnstile");this._customAccessToken=T}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.postTurnstileEvent=function(T,ma){lf.EVENTS_URL&&lf.ACCESS_TOKEN&&Array.isArray(T)&&
T.some(function(va){return M(va)||Ah.test(va)})&&this.queueRequest(Date.now(),ma)},K.prototype.processRequests=function(T){var ma=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var va=J(lf.ACCESS_TOKEN),Aa=va?va.u:lf.ACCESS_TOKEN;va=Aa!==this.eventData.tokenU;r(this.anonId)||(this.anonId=q(),va=!0);var Ma=this.queue.shift();if(this.eventData.lastSuccess){var Va=new Date(this.eventData.lastSuccess),jb=new Date(Ma),
qb=(Ma-this.eventData.lastSuccess)/864E5;va=va||1<=qb||-1>qb||Va.getDate()!==jb.getDate()}else va=!0;if(!va)return this.processRequests();this.postEvent(Ma,{"enabled.telemetry":!1},function(zb){zb||(ma.eventData.lastSuccess=Ma,ma.eventData.tokenU=Aa)},T)}},K}(og)),yg=xg.postTurnstileEvent.bind(xg),vi=new Sh,dk=vi.postMapLoadEvent.bind(vi),zj=500,ub=50,Z,da=1/0,aa={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};
"function"==typeof Object.freeze&&Object.freeze(aa);var ja=function(A){function K(T,ma,va){401===ma&&Ah.test(va)&&(T+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");A.call(this,T);this.status=ma;this.url=va;this.name=this.constructor.name;this.message=T}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+
"): "+this.url},K}(Error),za=B()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},Na=function(A,K){if(!(/^file:/.test(T=A.url)||/^file:/.test(za())&&!/^\w+:/.test(T))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(ma,va){var Aa,Ma=new self.AbortController,Va=new self.Request(ma.url,{method:ma.method||"GET",body:ma.body,credentials:ma.credentials,
headers:ma.headers,referrer:za(),signal:Ma.signal}),jb=!1,qb=!1,zb=0<(Aa=Va.url).indexOf("sku\x3d")&&Ah.test(Aa);"json"===ma.type&&Va.headers.set("Accept","application/json");Aa=function(Ub,Sb,$b){if(!qb){if(Ub&&"SecurityError"!==Ub.message&&x(Ub),Sb&&$b)return Hb(Sb);var bc=Date.now();self.fetch(Va).then(function(Ec){if(Ec.ok){var ld=zb?Ec.clone():null;return Hb(Ec,ld,bc)}return va(new ja(Ec.statusText,Ec.status,ma.url))}).catch(function(Ec){20!==Ec.code&&va(Error(Ec.message))})}};var Hb=function(Ub,
Sb,$b){("arrayBuffer"===ma.type?Ub.arrayBuffer():"json"===ma.type?Ub.json():Ub.text()).then(function(bc){qb||(Sb&&$b&&function(Ec,ld,pd){if(O(),Jf){var bd={status:ld.status,statusText:ld.statusText,headers:new self.Headers};ld.headers.forEach(function(zd,Cd){return bd.headers.set(Cd,zd)});var Ad=t(ld.headers.get("Cache-Control")||"");Ad["no-store"]||(Ad["max-age"]&&bd.headers.set("Expires",(new Date(pd+1E3*Ad["max-age"])).toUTCString()),42E4>(new Date(bd.headers.get("Expires"))).getTime()-pd||function(zd,
Cd){if(void 0===ui)try{new Response(new ReadableStream),ui=!0}catch(Od){ui=!1}ui?Cd(zd.body):zd.blob().then(Cd)}(ld,function(zd){var Cd=new self.Response(zd,bd);O();Jf&&Jf.then(function(Od){return Od.put(Q(Ec.url),Cd)}).catch(function(Od){return x(Od.message)})}))}}(Va,Sb,$b),jb=!0,va(null,bc,Ub.headers.get("Cache-Control"),Ub.headers.get("Expires")))}).catch(function(bc){qb||va(Error(bc.message))})};return zb?function(Ub,Sb){if(O(),!Jf)return Sb(null);var $b=Q(Ub.url);Jf.then(function(bc){bc.match($b).then(function(Ec){if(Ec){var ld=
new Date(Ec.headers.get("Expires")||0);var pd=t(Ec.headers.get("Cache-Control")||"");ld=ld>Date.now()&&!pd["no-cache"]}else ld=!1;bc.delete($b);ld&&bc.put($b,Ec.clone());Sb(null,Ec,ld)}).catch(Sb)}).catch(Sb)}(Va,Aa):Aa(null,null),{cancel:function(){qb=!0;jb||Ma.abort()}}}(A,K);if(B()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,K,void 0,!0)}var T;return function(ma,va){var Aa=new self.XMLHttpRequest,Ma;for(Ma in Aa.open(ma.method||"GET",ma.url,!0),"arrayBuffer"===
ma.type&&(Aa.responseType="arraybuffer"),ma.headers)Aa.setRequestHeader(Ma,ma.headers[Ma]);return"json"===ma.type&&(Aa.responseType="text",Aa.setRequestHeader("Accept","application/json")),Aa.withCredentials="include"===ma.credentials,Aa.onerror=function(){va(Error(Aa.statusText))},Aa.onload=function(){if((200<=Aa.status&&300>Aa.status||0===Aa.status)&&null!==Aa.response){var Va=Aa.response;if("json"===ma.type)try{Va=JSON.parse(Aa.response)}catch(jb){return va(jb)}va(null,Va,Aa.getResponseHeader("Cache-Control"),
Aa.getResponseHeader("Expires"))}else va(new ja(Aa.statusText,Aa.status,ma.url))},Aa.send(ma.body),{cancel:function(){return Aa.abort()}}}(A,K)},Xa=function(A,K){return Na(d(A,{type:"arrayBuffer"}),K)},mb=function(A,K){return Na(d(A,{method:"POST"}),K)};var Cb=[];var Kb=0;var Mb=function(A,K){if(ng.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),Kb>=lf.MAX_PARALLEL_IMAGE_REQUESTS)return A={requestParameters:A,callback:K,cancelled:!1,cancel:function(){this.cancelled=!0}},Cb.push(A),
A;Kb++;var T=!1,ma=function(){if(!T)for(T=!0,Kb--;Cb.length&&Kb<lf.MAX_PARALLEL_IMAGE_REQUESTS;){var Aa=Cb.shift();Aa.cancelled||(Aa.cancel=Mb(Aa.requestParameters,Aa.callback).cancel)}},va=Xa(A,function(Aa,Ma,Va,jb){ma();Aa?K(Aa):Ma&&(U()?function(qb,zb){qb=new self.Blob([new Uint8Array(qb)],{type:"image/png"});self.createImageBitmap(qb).then(function(Hb){zb(null,Hb)}).catch(function(Hb){zb(Error("Could not load image because of "+Hb.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ma,
K):function(qb,zb,Hb,Ub){var Sb=new self.Image,$b=self.URL;Sb.onload=function(){zb(null,Sb);$b.revokeObjectURL(Sb.src)};Sb.onerror=function(){return zb(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var bc=new self.Blob([new Uint8Array(qb)],{type:"image/png"});Sb.cacheControl=Hb;Sb.expires=Ub;Sb.src=qb.byteLength?$b.createObjectURL(bc):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}(Ma,
K,Va,jb))});return{cancel:function(){va.cancel();ma()}}},pc=function(A,K){void 0===K&&(K={});d(this,K);this.type=A},rc=function(A){function K(T,ma){void 0===ma&&(ma={});A.call(this,"error",d({error:T},ma))}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K}(pc),hc=function(){};hc.prototype.on=function(A,K){return this._listeners=this._listeners||{},P(A,K,this._listeners),this};hc.prototype.off=function(A,K){return V(A,K,this._listeners),V(A,K,this._oneTimeListeners),
this};hc.prototype.once=function(A,K){return this._oneTimeListeners=this._oneTimeListeners||{},P(A,K,this._oneTimeListeners),this};hc.prototype.fire=function(A,K){"string"==typeof A&&(A=new pc(A,K||{}));K=A.type;if(this.listens(K)){A.target=this;for(var T=0,ma=this._listeners&&this._listeners[K]?this._listeners[K].slice():[];T<ma.length;T+=1)ma[T].call(this,A);T=0;for(ma=this._oneTimeListeners&&this._oneTimeListeners[K]?this._oneTimeListeners[K].slice():[];T<ma.length;T+=1){var va=ma[T];V(K,va,this._oneTimeListeners);
va.call(this,A)}(K=this._eventedParent)&&(d(A,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),K.fire(A))}else A instanceof rc&&console.error(A.error);return this};hc.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&0<this._listeners[A].length||this._oneTimeListeners&&this._oneTimeListeners[A]&&0<this._oneTimeListeners[A].length||this._eventedParent&&this._eventedParent.listens(A)};hc.prototype.setEventedParent=function(A,K){return this._eventedParent=
A,this._eventedParentData=K,this};var Ib={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},
source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},
source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},
url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},
buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,
value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",
minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},
"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",
default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},
default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],
"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},
"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",
{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",
default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],
expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,
parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},
"\x3c":{},"\x3c\x3d":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",
required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},
"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},
rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},
log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},
any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,
expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean",
default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",
transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},
"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",
transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},
"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",
default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},
"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},
viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",
default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",
transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,
minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",
value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},
"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",
default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",
default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,
minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},
promoteId:{"*":{type:"string"}}},Rb=function(A,K,T,ma){this.message=(A?A+": ":"")+T;ma&&(this.identifier=ma);null!=K&&K.__line__&&(this.line=K.__line__)},zc=function(A){function K(T,ma){A.call(this,ma);this.message=ma;this.key=T}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K}(Error),Tc=function(A,K){void 0===K&&(K=[]);this.parent=A;this.bindings={};for(A=0;A<K.length;A+=1){var T=K[A];this.bindings[T[0]]=T[1]}};Tc.prototype.concat=function(A){return new Tc(this,
A)};Tc.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw Error(A+" not found in scope.");};Tc.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var dd={kind:"null"},Lc={kind:"number"},kd={kind:"string"},md={kind:"boolean"},Nd={kind:"color"},Bd={kind:"object"},vd={kind:"value"},Ld={kind:"collator"},Zd={kind:"formatted"},de={kind:"resolvedImage"},me=[dd,Lc,kd,md,Nd,Zd,Bd,ia(vd),de],He=g(function(A,
K){function T(Va){return 0>(Va=Math.round(Va))?0:255<Va?255:Va}function ma(Va){return T("%"===Va[Va.length-1]?parseFloat(Va)/100*255:parseInt(Va))}function va(Va){return 0>(jb="%"===Va[Va.length-1]?parseFloat(Va)/100:parseFloat(Va))?0:1<jb?1:jb;var jb}function Aa(Va,jb,qb){return 0>qb?qb+=1:1<qb&&--qb,1>6*qb?Va+(jb-Va)*qb*6:1>2*qb?jb:2>3*qb?Va+(jb-Va)*(2/3-qb)*6:Va}var Ma={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,
255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,
1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,
34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,
250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],
magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],
olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,
128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,
1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{K.parseCSSColor=function(Va){var jb;Va=Va.replace(/ /g,"").toLowerCase();if(Va in Ma)return Ma[Va].slice();if("#"===Va[0])return 4===Va.length?0<=(jb=parseInt(Va.substr(1),16))&&4095>=jb?[(3840&jb)>>4|(3840&jb)>>8,240&jb|(240&jb)>>4,15&jb|(15&jb)<<4,1]:null:7===Va.length&&0<=(jb=parseInt(Va.substr(1),16))&&16777215>=jb?[(16711680&jb)>>16,(65280&jb)>>8,255&jb,1]:null;var qb=Va.indexOf("("),zb=Va.indexOf(")");if(-1!==qb&&zb+1===Va.length)switch(jb=
Va.substr(0,qb),qb=Va.substr(qb+1,zb-(qb+1)).split(","),Va=1,jb){case "rgba":if(4!==qb.length)break;Va=va(qb.pop());case "rgb":return 3!==qb.length?null:[ma(qb[0]),ma(qb[1]),ma(qb[2]),Va];case "hsla":if(4!==qb.length)break;Va=va(qb.pop());case "hsl":if(3===qb.length)return jb=(parseFloat(qb[0])%360+360)%360/360,zb=va(qb[1]),qb=va(qb[2]),zb=.5>=qb?qb*(zb+1):qb+zb-qb*zb,qb=2*qb-zb,[T(255*Aa(qb,zb,jb+1/3)),T(255*Aa(qb,zb,jb)),T(255*Aa(qb,zb,jb-1/3)),Va]}return null}}catch(Va){}}).parseCSSColor,Md=function(A,
K,T,ma){void 0===ma&&(ma=1);this.r=A;this.g=K;this.b=T;this.a=ma};Md.parse=function(A){if(A){if(A instanceof Md)return A;if("string"==typeof A&&(A=He(A)))return new Md(A[0]/255*A[3],A[1]/255*A[3],A[2]/255*A[3],A[3])}};Md.prototype.toString=function(){var A=this.toArray();return"rgba("+Math.round(A[0])+","+Math.round(A[1])+","+Math.round(A[2])+","+A[3]+")"};Md.prototype.toArray=function(){var A=this.a;return 0===A?[0,0,0,0]:[255*this.r/A,255*this.g/A,255*this.b/A,A]};Md.black=new Md(0,0,0,1);Md.white=
new Md(1,1,1,1);Md.transparent=new Md(0,0,0,0);Md.red=new Md(1,0,0,1);var Ee=function(A,K,T){this.sensitivity=A?K?"variant":"case":K?"accent":"base";this.locale=T;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ee.prototype.compare=function(A,K){return this.collator.compare(A,K)};Ee.prototype.resolvedLocale=function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var Ce=function(A,K,T,ma,va){this.text=A;this.image=
K;this.scale=T;this.fontStack=ma;this.textColor=va},ae=function(A){this.sections=A};ae.fromString=function(A){return new ae([new Ce(A,null,null,null,null)])};ae.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(A){return 0!==A.text.length||A.image&&0!==A.image.name.length})};ae.factory=function(A){return A instanceof ae?A:ae.fromString(A)};ae.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(A){return A.text}).join("")};
ae.prototype.serialize=function(){for(var A=["format"],K=0,T=this.sections;K<T.length;K+=1){var ma=T[K];if(ma.image)A.push(["image",ma.image.name]);else{A.push(ma.text);var va={};ma.fontStack&&(va["text-font"]=["literal",ma.fontStack.split(",")]);ma.scale&&(va["font-scale"]=ma.scale);ma.textColor&&(va["text-color"]=["rgba"].concat(ma.textColor.toArray()));A.push(va)}}return A};var we=function(A){this.name=A.name;this.available=A.available};we.prototype.toString=function(){return this.name};we.fromString=
function(A){return A?new we({name:A,available:!1}):null};we.prototype.serialize=function(){return["image",this.name]};var Fe=function(A,K){this.type=A;this.value=K};Fe.parse=function(A,K){if(2!==A.length)return K.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!ta(A[1]))return K.error("invalid value");A=A[1];var T=oa(A);K=K.expectedType;return"array"!==T.kind||0!==T.N||!K||"array"!==K.kind||"number"==typeof K.N&&0!==K.N||(T=K),new Fe(T,A)};Fe.prototype.evaluate=
function(){return this.value};Fe.prototype.eachChild=function(){};Fe.prototype.outputDefined=function(){return!0};Fe.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Md?["rgba"].concat(this.value.toArray()):this.value instanceof ae?this.value.serialize():this.value};var Ke=function(A){this.name="ExpressionEvaluationError";this.message=A};Ke.prototype.toJSON=function(){return this.message};var Jg={string:kd,number:Lc,
boolean:md,object:Bd},vf=function(A,K){this.type=A;this.args=K};vf.parse=function(A,K){if(2>A.length)return K.error("Expected at least one argument.");var T=1,ma=A[0];if("array"===ma){if(2<A.length){ma=A[1];if("string"!=typeof ma||!(ma in Jg)||"object"===ma)return K.error('The item type argument of "array" must be one of string, number, boolean',1);ma=Jg[ma];T++}else ma=vd;if(3<A.length){if(null!==A[2]&&("number"!=typeof A[2]||0>A[2]||A[2]!==Math.floor(A[2])))return K.error('The length argument to "array" must be a positive integer literal',
2);var va=A[2];T++}va=ia(ma,va)}else va=Jg[ma];for(ma=[];T<A.length;T++){var Aa=K.parse(A[T],T,vd);if(!Aa)return null;ma.push(Aa)}return new vf(va,ma)};vf.prototype.evaluate=function(A){for(var K=0;K<this.args.length;K++){var T=this.args[K].evaluate(A);if(!ha(this.type,oa(T)))return T;if(K===this.args.length-1)throw new Ke("Expected value to be of type "+fa(this.type)+", but found "+fa(oa(T))+" instead.");}return null};vf.prototype.eachChild=function(A){this.args.forEach(A)};vf.prototype.outputDefined=
function(){return this.args.every(function(A){return A.outputDefined()})};vf.prototype.serialize=function(){var A=this.type,K=[A.kind];if("array"===A.kind){var T=A.itemType;if("string"===T.kind||"number"===T.kind||"boolean"===T.kind)K.push(T.kind),A=A.N,("number"==typeof A||1<this.args.length)&&K.push(A)}return K.concat(this.args.map(function(ma){return ma.serialize()}))};var Xf=function(A){this.type=Zd;this.sections=A};Xf.parse=function(A,K){if(2>A.length)return K.error("Expected at least one argument.");
var T=A[1];if(!Array.isArray(T)&&"object"==typeof T)return K.error("First argument must be an image or text section.");T=[];for(var ma=!1,va=1;va<=A.length-1;++va){var Aa=A[va];if(ma&&"object"==typeof Aa&&!Array.isArray(Aa)){ma=!1;var Ma=null;if(Aa["font-scale"]&&!(Ma=K.parse(Aa["font-scale"],1,Lc)))return null;var Va=null;if(Aa["text-font"]&&!(Va=K.parse(Aa["text-font"],1,ia(kd))))return null;var jb=null;if(Aa["text-color"]&&!(jb=K.parse(Aa["text-color"],1,Nd)))return null;Aa=T[T.length-1];Aa.scale=
Ma;Aa.font=Va;Aa.textColor=jb}else{Ma=K.parse(A[va],1,vd);if(!Ma)return null;ma=Ma.type.kind;if("string"!==ma&&"value"!==ma&&"null"!==ma&&"resolvedImage"!==ma)return K.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ma=!0;T.push({content:Ma,scale:null,font:null,textColor:null})}}return new Xf(T)};Xf.prototype.evaluate=function(A){return new ae(this.sections.map(function(K){var T=K.content.evaluate(A);return oa(T)===de?new Ce("",T,null,null,null):new Ce(ua(T),null,K.scale?
K.scale.evaluate(A):null,K.font?K.font.evaluate(A).join(","):null,K.textColor?K.textColor.evaluate(A):null)}))};Xf.prototype.eachChild=function(A){for(var K=0,T=this.sections;K<T.length;K+=1){var ma=T[K];A(ma.content);ma.scale&&A(ma.scale);ma.font&&A(ma.font);ma.textColor&&A(ma.textColor)}};Xf.prototype.outputDefined=function(){return!1};Xf.prototype.serialize=function(){for(var A=["format"],K=0,T=this.sections;K<T.length;K+=1){var ma=T[K];A.push(ma.content.serialize());var va={};ma.scale&&(va["font-scale"]=
ma.scale.serialize());ma.font&&(va["text-font"]=ma.font.serialize());ma.textColor&&(va["text-color"]=ma.textColor.serialize());A.push(va)}return A};var wf=function(A){this.type=de;this.input=A};wf.parse=function(A,K){return 2!==A.length?K.error("Expected two arguments."):(A=K.parse(A[1],1,kd))?new wf(A):K.error("No image name provided.")};wf.prototype.evaluate=function(A){var K=this.input.evaluate(A),T=we.fromString(K);return T&&A.availableImages&&(T.available=-1<A.availableImages.indexOf(K)),T};
wf.prototype.eachChild=function(A){A(this.input)};wf.prototype.outputDefined=function(){return!1};wf.prototype.serialize=function(){return["image",this.input.serialize()]};var Kg={"to-boolean":md,"to-color":Nd,"to-number":Lc,"to-string":kd},xf=function(A,K){this.type=A;this.args=K};xf.parse=function(A,K){if(2>A.length)return K.error("Expected at least one argument.");var T=A[0];if(("to-boolean"===T||"to-string"===T)&&2!==A.length)return K.error("Expected one argument.");T=Kg[T];for(var ma=[],va=1;va<
A.length;va++){var Aa=K.parse(A[va],va,vd);if(!Aa)return null;ma.push(Aa)}return new xf(T,ma)};xf.prototype.evaluate=function(A){if("boolean"===this.type.kind)return!!this.args[0].evaluate(A);if("color"===this.type.kind){for(var K,T,ma=0,va=this.args;ma<va.length;ma+=1){if(T=null,(K=va[ma].evaluate(A))instanceof Md)return K;if("string"==typeof K){var Aa=A.parseColor(K);if(Aa)return Aa}else if(Array.isArray(K)&&!(T=3>K.length||4<K.length?"Invalid rbga value "+JSON.stringify(K)+": expected an array containing either three or four numeric values.":
ra(K[0],K[1],K[2],K[3])))return new Md(K[0]/255,K[1]/255,K[2]/255,K[3])}throw new Ke(T||"Could not parse color from value '"+("string"==typeof K?K:String(JSON.stringify(K)))+"'");}if("number"===this.type.kind){K=null;T=0;for(ma=this.args;T<ma.length;T+=1){if(null===(K=ma[T].evaluate(A)))return 0;va=Number(K);if(!isNaN(va))return va}throw new Ke("Could not convert "+JSON.stringify(K)+" to number.");}return"formatted"===this.type.kind?ae.fromString(ua(this.args[0].evaluate(A))):"resolvedImage"===this.type.kind?
we.fromString(ua(this.args[0].evaluate(A))):ua(this.args[0].evaluate(A))};xf.prototype.eachChild=function(A){this.args.forEach(A)};xf.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})};xf.prototype.serialize=function(){if("formatted"===this.type.kind)return(new Xf([{content:this.args[0],scale:null,font:null,textColor:null}])).serialize();if("resolvedImage"===this.type.kind)return(new wf(this.args[0])).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(K){A.push(K.serialize())}),
A};var Wi=["Unknown","Point","LineString","Polygon"],Lg=function(){this.formattedSection=this.featureState=this.feature=this.globals=null;this._parseColorCache={};this.canonical=this.availableImages=null};Lg.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};Lg.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Wi[this.feature.type]:this.feature.type:null};Lg.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?
this.feature.geometry:null};Lg.prototype.canonicalID=function(){return this.canonical};Lg.prototype.properties=function(){return this.feature&&this.feature.properties||{}};Lg.prototype.parseColor=function(A){var K=this._parseColorCache[A];return K||(K=this._parseColorCache[A]=Md.parse(A)),K};var df=function(A,K,T,ma){this.name=A;this.type=K;this._evaluate=T;this.args=ma};df.prototype.evaluate=function(A){return this._evaluate(A,this.args)};df.prototype.eachChild=function(A){this.args.forEach(A)};
df.prototype.outputDefined=function(){return!1};df.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))};df.parse=function(A,K){var T,ma=A[0],va=df.definitions[ma];if(!va)return K.error('Unknown expression "'+ma+'". If you wanted a literal array, use ["literal", [...]].',0);var Aa=Array.isArray(va)?va[0]:va.type;va=Array.isArray(va)?[[va[1],va[2]]]:va.overloads;for(var Ma=va.filter(function(Ec){Ec=Ec[0];return!Array.isArray(Ec)||Ec.length===A.length-
1}),Va=null,jb=0;jb<Ma.length;jb+=1){Va=Ma[jb];var qb=Va[0],zb=Va[1];Va=new Yf(K.registry,K.path,null,K.scope);for(var Hb=[],Ub=!1,Sb=1;Sb<A.length;Sb++){var $b=A[Sb],bc=Array.isArray(qb)?qb[Sb-1]:qb.type;$b=Va.parse($b,1+Hb.length,bc);if(!$b){Ub=!0;break}Hb.push($b)}if(!Ub)if(Array.isArray(qb)&&qb.length!==Hb.length)Va.error("Expected "+qb.length+" arguments, but found "+Hb.length+" instead.");else{for(Ub=0;Ub<Hb.length;Ub++)Sb=Array.isArray(qb)?qb[Ub]:qb.type,$b=Hb[Ub],Va.concat(Ub+1).checkSubtype(Sb,
$b.type);if(0===Va.errors.length)return new df(ma,Aa,zb,Hb)}}if(1===Ma.length)(T=K.errors).push.apply(T,Va.errors);else{T=(Ma.length?Ma:va).map(function(Ec){var ld;return ld=Ec[0],Array.isArray(ld)?"("+ld.map(fa).join(", ")+")":"("+fa(ld.type)+"...)"}).join(" | ");ma=[];for(Aa=1;Aa<A.length;Aa++){va=K.parse(A[Aa],1+ma.length);if(!va)return null;ma.push(fa(va.type))}K.error("Expected arguments of type "+T+", but found ("+ma.join(", ")+") instead.")}return null};df.register=function(A,K){for(var T in df.definitions=
K,K)A[T]=df};var ve=function(A,K,T){this.type=Ld;this.locale=T;this.caseSensitive=A;this.diacriticSensitive=K};ve.parse=function(A,K){if(2!==A.length)return K.error("Expected one argument.");A=A[1];if("object"!=typeof A||Array.isArray(A))return K.error("Collator options argument must be an object.");var T=K.parse(void 0!==A["case-sensitive"]&&A["case-sensitive"],1,md);if(!T)return null;var ma=K.parse(void 0!==A["diacritic-sensitive"]&&A["diacritic-sensitive"],1,md);if(!ma)return null;var va=null;
return A.locale&&!(va=K.parse(A.locale,1,kd))?null:new ve(T,ma,va)};ve.prototype.evaluate=function(A){return new Ee(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)};ve.prototype.eachChild=function(A){A(this.caseSensitive);A(this.diacriticSensitive);this.locale&&A(this.locale)};ve.prototype.outputDefined=function(){return!1};ve.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=
this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var gf=function(A,K){this.type=md;this.geojson=A;this.geometries=K};gf.parse=function(A,K){if(2!==A.length)return K.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(ta(A[1]))if(A=A[1],"FeatureCollection"===A.type)for(var T=0;T<A.features.length;++T){var ma=A.features[T].geometry.type;if("Polygon"===ma||"MultiPolygon"===ma)return new gf(A,A.features[T].geometry)}else if("Feature"===
A.type){if(T=A.geometry.type,"Polygon"===T||"MultiPolygon"===T)return new gf(A,A.geometry)}else if("Polygon"===A.type||"MultiPolygon"===A.type)return new gf(A,A);return K.error("'within' expression requires valid geojson object that contains polygon geometry type.")};gf.prototype.evaluate=function(A){if(null!=A.geometry()&&null!=A.canonicalID()){if("Point"===A.geometryType())return function(K,T){var ma=[1/0,1/0,-1/0,-1/0],va=[1/0,1/0,-1/0,-1/0],Aa=K.canonicalID();if("Polygon"===T.type){var Ma=Ca(T.coordinates,
va,Aa),Va=Ra(K.geometry(),ma,va,Aa);if(!sa(ma,va))return!1;for(var jb=0;jb<Va.length;jb+=1)if(!ya(Va[jb],Ma))return!1}if("MultiPolygon"===T.type){T=Ja(T.coordinates,va,Aa);K=Ra(K.geometry(),ma,va,Aa);if(!sa(ma,va))return!1;for(ma=0;ma<K.length;ma+=1){a:{va=K[ma];Aa=T;for(Ma=0;Ma<Aa.length;Ma++)if(ya(va,Aa[Ma])){va=!0;break a}va=!1}if(!va)return!1}}return!0}(A,this.geometries);if("LineString"===A.geometryType())return function(K,T){var ma=[1/0,1/0,-1/0,-1/0],va=[1/0,1/0,-1/0,-1/0],Aa=K.canonicalID();
if("Polygon"===T.type){var Ma=Ca(T.coordinates,va,Aa),Va=Wa(K.geometry(),ma,va,Aa);if(!sa(ma,va))return!1;for(var jb=0;jb<Va.length;jb+=1)if(!xa(Va[jb],Ma))return!1}if("MultiPolygon"===T.type){T=Ja(T.coordinates,va,Aa);K=Wa(K.geometry(),ma,va,Aa);if(!sa(ma,va))return!1;for(ma=0;ma<K.length;ma+=1){a:{va=K[ma];Aa=T;for(Ma=0;Ma<Aa.length;Ma++)if(xa(va,Aa[Ma])){va=!0;break a}va=!1}if(!va)return!1}}return!0}(A,this.geometries)}return!1};gf.prototype.eachChild=function(){};gf.prototype.outputDefined=function(){return!0};
gf.prototype.serialize=function(){return["within",this.geojson]};var dg=function(A,K){this.type=K.type;this.name=A;this.boundExpression=K};dg.parse=function(A,K){if(2!==A.length||"string"!=typeof A[1])return K.error("'var' expression requires exactly one string literal argument.");A=A[1];return K.scope.has(A)?new dg(A,K.scope.get(A)):K.error('Unknown variable "'+A+'". Make sure "'+A+'" has been bound in an enclosing "let" expression before using it.',1)};dg.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)};
dg.prototype.eachChild=function(){};dg.prototype.outputDefined=function(){return!1};dg.prototype.serialize=function(){return["var",this.name]};var Yf=function(A,K,T,ma,va){void 0===K&&(K=[]);void 0===ma&&(ma=new Tc);void 0===va&&(va=[]);this.registry=A;this.path=K;this.key=K.map(function(Aa){return"["+Aa+"]"}).join("");this.scope=ma;this.errors=va;this.expectedType=T};Yf.prototype.parse=function(A,K,T,ma,va){return void 0===va&&(va={}),K?this.concat(K,T,ma)._parse(A,va):this._parse(A,va)};Yf.prototype._parse=
function(A,K){function T(Aa,Ma,Va){return"assert"===Va?new vf(Ma,[Aa]):"coerce"===Va?new xf(Ma,[Aa]):Aa}if(null!==A&&"string"!=typeof A&&"boolean"!=typeof A&&"number"!=typeof A||(A=["literal",A]),Array.isArray(A)){if(0===A.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ma=A[0];if("string"!=typeof ma)return this.error("Expression name must be a string, but found "+typeof ma+' instead. If you wanted a literal array, use ["literal", [...]].',
0),null;var va=this.registry[ma];if(va){A=va.parse(A,this);if(!A)return null;if(this.expectedType)if(ma=this.expectedType,va=A.type,"string"!==ma.kind&&"number"!==ma.kind&&"boolean"!==ma.kind&&"object"!==ma.kind&&"array"!==ma.kind||"value"!==va.kind)if("color"!==ma.kind&&"formatted"!==ma.kind&&"resolvedImage"!==ma.kind||"value"!==va.kind&&"string"!==va.kind){if(this.checkSubtype(ma,va))return null}else A=T(A,ma,K.typeAnnotation||"coerce");else A=T(A,ma,K.typeAnnotation||"assert");if(!(A instanceof
Fe)&&"resolvedImage"!==A.type.kind&&function Va(Ma){if(Ma instanceof dg)return Va(Ma.boundExpression);if(Ma instanceof df&&"error"===Ma.name||Ma instanceof ve||Ma instanceof gf)return!1;var jb=Ma instanceof xf||Ma instanceof vf,qb=!0;return Ma.eachChild(function(zb){qb=jb?qb&&Va(zb):qb&&zb instanceof Fe}),!!qb&&Ea(Ma)&&Qa(Ma,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(A)){K=new Lg;try{A=new Fe(A.type,A.evaluate(K))}catch(Ma){return this.error(Ma.message),null}}return A}return this.error('Unknown expression "'+
ma+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===A?"'undefined' value invalid. Use null instead.":"object"==typeof A?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof A+" instead.")};Yf.prototype.concat=function(A,K,T){A="number"==typeof A?this.path.concat(A):this.path;T=T?this.scope.concat(T):this.scope;return new Yf(this.registry,A,K||null,T,this.errors)};Yf.prototype.error=function(A){for(var K=[],T=arguments.length-
1;0<T--;)K[T]=arguments[T+1];K=""+this.key+K.map(function(ma){return"["+ma+"]"}).join("");this.errors.push(new zc(K,A))};Yf.prototype.checkSubtype=function(A,K){A=ha(A,K);return A&&this.error(A),A};var Ag=function(A,K,T){this.type=A;this.input=K;this.labels=[];this.outputs=[];for(A=0;A<T.length;A+=1){K=T[A];var ma=K[1];this.labels.push(K[0]);this.outputs.push(ma)}};Ag.parse=function(A,K){if(4>A.length-1)return K.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(0!=(A.length-
1)%2)return K.error("Expected an even number of arguments.");var T=K.parse(A[1],1,Lc);if(!T)return null;var ma=[],va=null;K.expectedType&&"value"!==K.expectedType.kind&&(va=K.expectedType);for(var Aa=1;Aa<A.length;Aa+=2){var Ma=1===Aa?-1/0:A[Aa],Va=A[Aa+1],jb=Aa,qb=Aa+1;if("number"!=typeof Ma)return K.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',jb);if(ma.length&&ma[ma.length-1][0]>=Ma)return K.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',
jb);Va=K.parse(Va,qb,va);if(!Va)return null;va=va||Va.type;ma.push([Ma,Va])}return new Ag(va,T,ma)};Ag.prototype.evaluate=function(A){var K=this.labels,T=this.outputs;if(1===K.length)return T[0].evaluate(A);var ma=this.input.evaluate(A);if(ma<=K[0])return T[0].evaluate(A);var va=K.length;return ma>=K[va-1]?T[va-1].evaluate(A):T[lb(K,ma)].evaluate(A)};Ag.prototype.eachChild=function(A){A(this.input);for(var K=0,T=this.outputs;K<T.length;K+=1)A(T[K])};Ag.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})};
Ag.prototype.serialize=function(){for(var A=["step",this.input.serialize()],K=0;K<this.labels.length;K++)0<K&&A.push(this.labels[K]),A.push(this.outputs[K].serialize());return A};var Bg=Object.freeze({__proto__:null,number:hb,color:function(A,K,T){return new Md(hb(A.r,K.r,T),hb(A.g,K.g,T),hb(A.b,K.b,T),hb(A.a,K.a,T))},array:function(A,K,T){return A.map(function(ma,va){return hb(ma,K[va],T)})}}),wi=6/29*3*(6/29),Gk=Math.PI/180,Jb=180/Math.PI,ch={forward:bb,reverse:Pa,interpolate:function(A,K,T){return{l:hb(A.l,
K.l,T),a:hb(A.a,K.a,T),b:hb(A.b,K.b,T),alpha:hb(A.alpha,K.alpha,T)}}},ag={forward:function(A){var K=bb(A),T=K.a,ma=K.b,va=Math.atan2(ma,T)*Jb;return{h:0>va?va+360:va,c:Math.sqrt(T*T+ma*ma),l:K.l,alpha:A.a}},reverse:function(A){var K=A.h*Gk,T=A.c;return Pa({l:A.l,a:Math.cos(K)*T,b:Math.sin(K)*T,alpha:A.alpha})},interpolate:function(A,K,T){var ma=A.h,va=K.h-ma;return{h:ma+T*(180<va||-180>va?va-360*Math.round(va/360):va),c:hb(A.c,K.c,T),l:hb(A.l,K.l,T),alpha:hb(A.alpha,K.alpha,T)}}},Lf=Object.freeze({__proto__:null,
lab:ch,hcl:ag}),of=function(A,K,T,ma,va){this.type=A;this.operator=K;this.interpolation=T;this.input=ma;this.labels=[];this.outputs=[];for(A=0;A<va.length;A+=1)K=va[A],T=K[1],this.labels.push(K[0]),this.outputs.push(T)};of.interpolationFactor=function(A,K,T,ma){var va=0;"exponential"===A.name?va=Ta(K,A.base,T,ma):"linear"===A.name?va=Ta(K,1,T,ma):"cubic-bezier"===A.name&&(A=A.controlPoints,va=(new ah(A[0],A[1],A[2],A[3])).solve(Ta(K,1,T,ma)));return va};of.parse=function(A,K){var T=A[0],ma=A[1],va=
A[2],Aa=A.slice(3);if(!Array.isArray(ma)||0===ma.length)return K.error("Expected an interpolation type expression.",1);if("linear"===ma[0])ma={name:"linear"};else if("exponential"===ma[0]){ma=ma[1];if("number"!=typeof ma)return K.error("Exponential interpolation requires a numeric base.",1,1);ma={name:"exponential",base:ma}}else{if("cubic-bezier"!==ma[0])return K.error("Unknown interpolation type "+String(ma[0]),1,0);ma=ma.slice(1);if(4!==ma.length||ma.some(function(Ub){return"number"!=typeof Ub||
0>Ub||1<Ub}))return K.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ma={name:"cubic-bezier",controlPoints:ma}}if(4>A.length-1)return K.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(0!=(A.length-1)%2)return K.error("Expected an even number of arguments.");if(!(va=K.parse(va,2,Lc)))return null;A=[];var Ma=null;"interpolate-hcl"===T||"interpolate-lab"===T?Ma=Nd:K.expectedType&&"value"!==K.expectedType.kind&&(Ma=K.expectedType);
for(var Va=0;Va<Aa.length;Va+=2){var jb=Aa[Va],qb=Aa[Va+1],zb=Va+3,Hb=Va+4;if("number"!=typeof jb)return K.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',zb);if(A.length&&A[A.length-1][0]>=jb)return K.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',zb);qb=K.parse(qb,Hb,Ma);if(!qb)return null;Ma=Ma||qb.type;A.push([jb,qb])}return"number"===
Ma.kind||"color"===Ma.kind||"array"===Ma.kind&&"number"===Ma.itemType.kind&&"number"==typeof Ma.N?new of(Ma,T,ma,va,A):K.error("Type "+fa(Ma)+" is not interpolatable.")};of.prototype.evaluate=function(A){var K=this.labels,T=this.outputs;if(1===K.length)return T[0].evaluate(A);var ma=this.input.evaluate(A);if(ma<=K[0])return T[0].evaluate(A);var va=K.length;if(ma>=K[va-1])return T[va-1].evaluate(A);va=lb(K,ma);K=of.interpolationFactor(this.interpolation,ma,K[va],K[va+1]);ma=T[va].evaluate(A);A=T[va+
1].evaluate(A);return"interpolate"===this.operator?Bg[this.type.kind.toLowerCase()](ma,A,K):"interpolate-hcl"===this.operator?ag.reverse(ag.interpolate(ag.forward(ma),ag.forward(A),K)):ch.reverse(ch.interpolate(ch.forward(ma),ch.forward(A),K))};of.prototype.eachChild=function(A){A(this.input);for(var K=0,T=this.outputs;K<T.length;K+=1)A(T[K])};of.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})};of.prototype.serialize=function(){var A="linear"===
this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);A=[this.operator,A,this.input.serialize()];for(var K=0;K<this.labels.length;K++)A.push(this.labels[K],this.outputs[K].serialize());return A};var Vh=function(A,K){this.type=A;this.args=K};Vh.parse=function(A,K){if(2>A.length)return K.error("Expectected at least one argument.");var T=null,ma=
K.expectedType;ma&&"value"!==ma.kind&&(T=ma);var va=[],Aa=0;for(A=A.slice(1);Aa<A.length;Aa+=1){var Ma=K.parse(A[Aa],1+va.length,T,void 0,{typeAnnotation:"omit"});if(!Ma)return null;T=T||Ma.type;va.push(Ma)}K=ma&&va.some(function(Va){return ha(ma,Va.type)});return new Vh(K?vd:T,va)};Vh.prototype.evaluate=function(A){for(var K,T=null,ma=0,va=0,Aa=this.args;va<Aa.length&&(ma++,(T=Aa[va].evaluate(A))&&T instanceof we&&!T.available&&(K||(K=T.name),T=null,ma===this.args.length&&(T=K)),null===T);va+=1);
return T};Vh.prototype.eachChild=function(A){this.args.forEach(A)};Vh.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})};Vh.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(K){A.push(K.serialize())}),A};var Wh=function(A,K){this.type=K.type;this.bindings=[].concat(A);this.result=K};Wh.prototype.evaluate=function(A){return this.result.evaluate(A)};Wh.prototype.eachChild=function(A){for(var K=0,T=this.bindings;K<T.length;K+=
1)A(T[K][1]);A(this.result)};Wh.parse=function(A,K){if(4>A.length)return K.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var T=[],ma=1;ma<A.length-1;ma+=2){var va=A[ma];if("string"!=typeof va)return K.error("Expected string, but found "+typeof va+" instead.",ma);if(/[^a-zA-Z0-9_]/.test(va))return K.error("Variable names must contain only alphanumeric characters or '_'.",ma);var Aa=K.parse(A[ma+1],ma+1);if(!Aa)return null;T.push([va,Aa])}return(A=K.parse(A[A.length-
1],A.length-1,K.expectedType,T))?new Wh(T,A):null};Wh.prototype.outputDefined=function(){return this.result.outputDefined()};Wh.prototype.serialize=function(){for(var A=["let"],K=0,T=this.bindings;K<T.length;K+=1){var ma=T[K];A.push(ma[0],ma[1].serialize())}return A.push(this.result.serialize()),A};var Xh=function(A,K,T){this.type=A;this.index=K;this.input=T};Xh.parse=function(A,K){if(3!==A.length)return K.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var T=K.parse(A[1],1,Lc);
A=K.parse(A[2],2,ia(K.expectedType||vd));return T&&A?new Xh(A.type.itemType,T,A):null};Xh.prototype.evaluate=function(A){var K=this.index.evaluate(A);A=this.input.evaluate(A);if(0>K)throw new Ke("Array index out of bounds: "+K+" \x3c 0.");if(K>=A.length)throw new Ke("Array index out of bounds: "+K+" \x3e "+(A.length-1)+".");if(K!==Math.floor(K))throw new Ke("Array index must be an integer, but found "+K+" instead.");return A[K]};Xh.prototype.eachChild=function(A){A(this.index);A(this.input)};Xh.prototype.outputDefined=
function(){return!1};Xh.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var xi=function(A,K){this.type=md;this.needle=A;this.haystack=K};xi.parse=function(A,K){if(3!==A.length)return K.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var T=K.parse(A[1],1,vd);A=K.parse(A[2],2,vd);return T&&A?na(T.type,[md,kd,Lc,dd,vd])?new xi(T,A):K.error("Expected first argument to be of type boolean, string, number or null, but found "+fa(T.type)+" instead"):
null};xi.prototype.evaluate=function(A){var K=this.needle.evaluate(A);A=this.haystack.evaluate(A);if(!A)return!1;if(!pa(K,["boolean","string","number","null"]))throw new Ke("Expected first argument to be of type boolean, string, number or null, but found "+fa(oa(K))+" instead.");if(!pa(A,["string","array"]))throw new Ke("Expected second argument to be of type array or string, but found "+fa(oa(A))+" instead.");return 0<=A.indexOf(K)};xi.prototype.eachChild=function(A){A(this.needle);A(this.haystack)};
xi.prototype.outputDefined=function(){return!0};xi.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Bh=function(A,K,T){this.type=Lc;this.needle=A;this.haystack=K;this.fromIndex=T};Bh.parse=function(A,K){if(2>=A.length||5<=A.length)return K.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var T=K.parse(A[1],1,vd),ma=K.parse(A[2],2,vd);return T&&ma?na(T.type,[md,kd,Lc,dd,vd])?4===A.length?(A=K.parse(A[3],3,Lc))?new Bh(T,ma,A):
null:new Bh(T,ma):K.error("Expected first argument to be of type boolean, string, number or null, but found "+fa(T.type)+" instead"):null};Bh.prototype.evaluate=function(A){var K=this.needle.evaluate(A),T=this.haystack.evaluate(A);if(!pa(K,["boolean","string","number","null"]))throw new Ke("Expected first argument to be of type boolean, string, number or null, but found "+fa(oa(K))+" instead.");if(!pa(T,["string","array"]))throw new Ke("Expected second argument to be of type array or string, but found "+
fa(oa(T))+" instead.");return this.fromIndex?(A=this.fromIndex.evaluate(A),T.indexOf(K,A)):T.indexOf(K)};Bh.prototype.eachChild=function(A){A(this.needle);A(this.haystack);this.fromIndex&&A(this.fromIndex)};Bh.prototype.outputDefined=function(){return!1};Bh.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};
var ge=function(A,K,T,ma,va,Aa){this.inputType=A;this.type=K;this.input=T;this.cases=ma;this.outputs=va;this.otherwise=Aa};ge.parse=function(A,K){if(5>A.length)return K.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(1!=A.length%2)return K.error("Expected an even number of arguments.");var T;K.expectedType&&"value"!==K.expectedType.kind&&(T=K.expectedType);for(var ma={},va=[],Aa=2;Aa<A.length-1;Aa+=2){var Ma=A[Aa],Va=A[Aa+1];Array.isArray(Ma)||(Ma=[Ma]);var jb=K.concat(Aa);
if(0===Ma.length)return jb.error("Expected at least one branch label.");for(var qb=0;qb<Ma.length;qb+=1){var zb=Ma[qb];if("number"!=typeof zb&&"string"!=typeof zb)return jb.error("Branch labels must be numbers or strings.");if("number"==typeof zb&&Math.abs(zb)>Number.MAX_SAFE_INTEGER)return jb.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof zb&&Math.floor(zb)!==zb)return jb.error("Numeric branch labels must be integer values.");if(Hb){if(jb.checkSubtype(Hb,
oa(zb)))return null}else var Hb=oa(zb);if(void 0!==ma[String(zb)])return jb.error("Branch labels must be unique.");ma[String(zb)]=va.length}Va=K.parse(Va,Aa,T);if(!Va)return null;T=T||Va.type;va.push(Va)}Aa=K.parse(A[1],1,vd);return Aa?(A=K.parse(A[A.length-1],A.length-1,T))?"value"!==Aa.type.kind&&K.concat(1).checkSubtype(Hb,Aa.type)?null:new ge(Hb,T,Aa,ma,va,A):null:null};ge.prototype.evaluate=function(A){var K=this.input.evaluate(A);return(oa(K)===this.inputType&&this.outputs[this.cases[K]]||this.otherwise).evaluate(A)};
ge.prototype.eachChild=function(A){A(this.input);this.outputs.forEach(A);A(this.otherwise)};ge.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()};ge.prototype.serialize=function(){for(var A=this,K=["match",this.input.serialize()],T=[],ma={},va=0,Aa=Object.keys(this.cases).sort();va<Aa.length;va+=1){var Ma=Aa[va];void 0===(Va=ma[this.cases[Ma]])?(ma[this.cases[Ma]]=T.length,T.push([this.cases[Ma],[Ma]])):T[Va][1].push(Ma)}ma=
function(jb){return"number"===A.inputType.kind?Number(jb):jb};for(va=0;va<T.length;va+=1){Aa=T[va];var Va=Aa[0];Va=Aa[1];K.push(1===Va.length?ma(Va[0]):Va.map(ma));K.push(this.outputs[outputIndex$1].serialize())}return K.push(this.otherwise.serialize()),K};var Eh=function(A,K,T){this.type=A;this.branches=K;this.otherwise=T};Eh.parse=function(A,K){if(4>A.length)return K.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(0!=A.length%2)return K.error("Expected an odd number of arguments.");
var T;K.expectedType&&"value"!==K.expectedType.kind&&(T=K.expectedType);for(var ma=[],va=1;va<A.length-1;va+=2){var Aa=K.parse(A[va],va,md);if(!Aa)return null;var Ma=K.parse(A[va+1],va+1,T);if(!Ma)return null;ma.push([Aa,Ma]);T=T||Ma.type}return(A=K.parse(A[A.length-1],A.length-1,T))?new Eh(T,ma,A):null};Eh.prototype.evaluate=function(A){for(var K=0,T=this.branches;K<T.length;K+=1){var ma=T[K],va=ma[1];if(ma[0].evaluate(A))return va.evaluate(A)}return this.otherwise.evaluate(A)};Eh.prototype.eachChild=
function(A){for(var K=0,T=this.branches;K<T.length;K+=1){var ma=T[K],va=ma[1];A(ma[0]);A(va)}A(this.otherwise)};Eh.prototype.outputDefined=function(){return this.branches.every(function(A){return A[1].outputDefined()})&&this.otherwise.outputDefined()};Eh.prototype.serialize=function(){var A=["case"];return this.eachChild(function(K){A.push(K.serialize())}),A};var Yh=function(A,K,T,ma){this.type=A;this.input=K;this.beginIndex=T;this.endIndex=ma};Yh.parse=function(A,K){if(2>=A.length||5<=A.length)return K.error("Expected 3 or 4 arguments, but found "+
(A.length-1)+" instead.");var T=K.parse(A[1],1,vd),ma=K.parse(A[2],2,Lc);return T&&ma?na(T.type,[ia(vd),kd,vd])?4===A.length?(A=K.parse(A[3],3,Lc))?new Yh(T.type,T,ma,A):null:new Yh(T.type,T,ma):K.error("Expected first argument to be of type array or string, but found "+fa(T.type)+" instead"):null};Yh.prototype.evaluate=function(A){var K=this.input.evaluate(A),T=this.beginIndex.evaluate(A);if(!pa(K,["string","array"]))throw new Ke("Expected first argument to be of type array or string, but found "+
fa(oa(K))+" instead.");return this.endIndex?(A=this.endIndex.evaluate(A),K.slice(T,A)):K.slice(T)};Yh.prototype.eachChild=function(A){A(this.input);A(this.beginIndex);this.endIndex&&A(this.endIndex)};Yh.prototype.outputDefined=function(){return!1};Yh.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Qj=
Da("\x3d\x3d",function(A,K,T){return K===T},nb),wk=Da("!\x3d",function(A,K,T){return K!==T},function(A,K,T,ma){return!nb(0,K,T,ma)}),xk=Da("\x3c",function(A,K,T){return K<T},function(A,K,T,ma){return 0>ma.compare(K,T)}),Rj=Da("\x3e",function(A,K,T){return K>T},function(A,K,T,ma){return 0<ma.compare(K,T)}),Ie=Da("\x3c\x3d",function(A,K,T){return K<=T},function(A,K,T,ma){return 0>=ma.compare(K,T)}),Hk=Da("\x3e\x3d",function(A,K,T){return K>=T},function(A,K,T,ma){return 0<=ma.compare(K,T)}),Uf=function(A,
K,T,ma,va){this.type=kd;this.number=A;this.locale=K;this.currency=T;this.minFractionDigits=ma;this.maxFractionDigits=va};Uf.parse=function(A,K){if(3!==A.length)return K.error("Expected two arguments.");var T=K.parse(A[1],1,Lc);if(!T)return null;A=A[2];if("object"!=typeof A||Array.isArray(A))return K.error("NumberFormat options argument must be an object.");var ma=null;if(A.locale&&!(ma=K.parse(A.locale,1,kd)))return null;var va=null;if(A.currency&&!(va=K.parse(A.currency,1,kd)))return null;var Aa=
null;if(A["min-fraction-digits"]&&!(Aa=K.parse(A["min-fraction-digits"],1,Lc)))return null;var Ma=null;return A["max-fraction-digits"]&&!(Ma=K.parse(A["max-fraction-digits"],1,Lc))?null:new Uf(T,ma,va,Aa,Ma)};Uf.prototype.evaluate=function(A){return(new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?
this.maxFractionDigits.evaluate(A):void 0})).format(this.number.evaluate(A))};Uf.prototype.eachChild=function(A){A(this.number);this.locale&&A(this.locale);this.currency&&A(this.currency);this.minFractionDigits&&A(this.minFractionDigits);this.maxFractionDigits&&A(this.maxFractionDigits)};Uf.prototype.outputDefined=function(){return!1};Uf.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&
(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var jh=function(A){this.type=Lc;this.input=A};jh.parse=function(A,K){return 2!==A.length?K.error("Expected 1 argument, but found "+(A.length-1)+" instead."):(A=K.parse(A[1],1))?"array"!==A.type.kind&&"string"!==A.type.kind&&"value"!==A.type.kind?K.error("Expected argument of type string or array, but found "+
fa(A.type)+" instead."):new jh(A):null};jh.prototype.evaluate=function(A){A=this.input.evaluate(A);if("string"==typeof A||Array.isArray(A))return A.length;throw new Ke("Expected value to be of type string or array, but found "+fa(oa(A))+" instead.");};jh.prototype.eachChild=function(A){A(this.input)};jh.prototype.outputDefined=function(){return!1};jh.prototype.serialize=function(){var A=["length"];return this.eachChild(function(K){A.push(K.serialize())}),A};var tg={"\x3d\x3d":Qj,"!\x3d":wk,"\x3e":Rj,
"\x3c":xk,"\x3e\x3d":Hk,"\x3c\x3d":Ie,array:vf,at:Xh,boolean:vf,case:Eh,coalesce:Vh,collator:ve,format:Xf,image:wf,in:xi,"index-of":Bh,interpolate:of,"interpolate-hcl":of,"interpolate-lab":of,length:jh,let:Wh,literal:Fe,match:ge,number:vf,"number-format":Uf,object:vf,slice:Yh,step:Ag,string:vf,"to-boolean":xf,"to-color":xf,"to-number":xf,"to-string":xf,var:dg,within:gf};df.register(tg,{error:[{kind:"error"},[kd],function(A,K){throw new Ke(K[0].evaluate(A));}],typeof:[kd,[vd],function(A,K){return fa(oa(K[0].evaluate(A)))}],
"to-rgba":[ia(Lc,4),[Nd],function(A,K){return K[0].evaluate(A).toArray()}],rgb:[Nd,[Lc,Lc,Lc],Ha],rgba:[Nd,[Lc,Lc,Lc,Lc],Ha],has:{type:md,overloads:[[[kd],function(A,K){K=K[0].evaluate(A);A=A.properties();return K in A}],[[kd,Bd],function(A,K){var T=K[1];K=K[0].evaluate(A);A=T.evaluate(A);return K in A}]]},get:{type:vd,overloads:[[[kd],function(A,K){return ab(K[0].evaluate(A),A.properties())}],[[kd,Bd],function(A,K){var T=K[1];return ab(K[0].evaluate(A),T.evaluate(A))}]]},"feature-state":[vd,[kd],
function(A,K){return ab(K[0].evaluate(A),A.featureState||{})}],properties:[Bd,[],function(A){return A.properties()}],"geometry-type":[kd,[],function(A){return A.geometryType()}],id:[vd,[],function(A){return A.id()}],zoom:[Lc,[],function(A){return A.globals.zoom}],"heatmap-density":[Lc,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[Lc,[],function(A){return A.globals.lineProgress||0}],accumulated:[vd,[],function(A){return void 0===A.globals.accumulated?null:A.globals.accumulated}],
"+":[Lc,{type:Lc},function(A,K){for(var T=0,ma=0;ma<K.length;ma+=1)T+=K[ma].evaluate(A);return T}],"*":[Lc,{type:Lc},function(A,K){for(var T=1,ma=0;ma<K.length;ma+=1)T*=K[ma].evaluate(A);return T}],"-":{type:Lc,overloads:[[[Lc,Lc],function(A,K){var T=K[1];return K[0].evaluate(A)-T.evaluate(A)}],[[Lc],function(A,K){return-K[0].evaluate(A)}]]},"/":[Lc,[Lc,Lc],function(A,K){var T=K[1];return K[0].evaluate(A)/T.evaluate(A)}],"%":[Lc,[Lc,Lc],function(A,K){var T=K[1];return K[0].evaluate(A)%T.evaluate(A)}],
ln2:[Lc,[],function(){return Math.LN2}],pi:[Lc,[],function(){return Math.PI}],e:[Lc,[],function(){return Math.E}],"^":[Lc,[Lc,Lc],function(A,K){var T=K[1];return Math.pow(K[0].evaluate(A),T.evaluate(A))}],sqrt:[Lc,[Lc],function(A,K){return Math.sqrt(K[0].evaluate(A))}],log10:[Lc,[Lc],function(A,K){return Math.log(K[0].evaluate(A))/Math.LN10}],ln:[Lc,[Lc],function(A,K){return Math.log(K[0].evaluate(A))}],log2:[Lc,[Lc],function(A,K){return Math.log(K[0].evaluate(A))/Math.LN2}],sin:[Lc,[Lc],function(A,
K){return Math.sin(K[0].evaluate(A))}],cos:[Lc,[Lc],function(A,K){return Math.cos(K[0].evaluate(A))}],tan:[Lc,[Lc],function(A,K){return Math.tan(K[0].evaluate(A))}],asin:[Lc,[Lc],function(A,K){return Math.asin(K[0].evaluate(A))}],acos:[Lc,[Lc],function(A,K){return Math.acos(K[0].evaluate(A))}],atan:[Lc,[Lc],function(A,K){return Math.atan(K[0].evaluate(A))}],min:[Lc,{type:Lc},function(A,K){return Math.min.apply(Math,K.map(function(T){return T.evaluate(A)}))}],max:[Lc,{type:Lc},function(A,K){return Math.max.apply(Math,
K.map(function(T){return T.evaluate(A)}))}],abs:[Lc,[Lc],function(A,K){return Math.abs(K[0].evaluate(A))}],round:[Lc,[Lc],function(A,K){A=K[0].evaluate(A);return 0>A?-Math.round(-A):Math.round(A)}],floor:[Lc,[Lc],function(A,K){return Math.floor(K[0].evaluate(A))}],ceil:[Lc,[Lc],function(A,K){return Math.ceil(K[0].evaluate(A))}],"filter-\x3d\x3d":[md,[kd,vd],function(A,K){var T=K[0];K=K[1];return A.properties()[T.value]===K.value}],"filter-id-\x3d\x3d":[md,[vd],function(A,K){K=K[0];return A.id()===
K.value}],"filter-type-\x3d\x3d":[md,[kd],function(A,K){K=K[0];return A.geometryType()===K.value}],"filter-\x3c":[md,[kd,vd],function(A,K){var T=K[0];K=K[1];A=A.properties()[T.value];T=K.value;return typeof A==typeof T&&A<T}],"filter-id-\x3c":[md,[vd],function(A,K){K=K[0];A=A.id();K=K.value;return typeof A==typeof K&&A<K}],"filter-\x3e":[md,[kd,vd],function(A,K){var T=K[0];K=K[1];A=A.properties()[T.value];T=K.value;return typeof A==typeof T&&A>T}],"filter-id-\x3e":[md,[vd],function(A,K){K=K[0];A=
A.id();K=K.value;return typeof A==typeof K&&A>K}],"filter-\x3c\x3d":[md,[kd,vd],function(A,K){var T=K[0];K=K[1];A=A.properties()[T.value];T=K.value;return typeof A==typeof T&&A<=T}],"filter-id-\x3c\x3d":[md,[vd],function(A,K){K=K[0];A=A.id();K=K.value;return typeof A==typeof K&&A<=K}],"filter-\x3e\x3d":[md,[kd,vd],function(A,K){var T=K[0];K=K[1];A=A.properties()[T.value];T=K.value;return typeof A==typeof T&&A>=T}],"filter-id-\x3e\x3d":[md,[vd],function(A,K){K=K[0];A=A.id();K=K.value;return typeof A==
typeof K&&A>=K}],"filter-has":[md,[vd],function(A,K){return K[0].value in A.properties()}],"filter-has-id":[md,[],function(A){return null!==A.id()&&void 0!==A.id()}],"filter-type-in":[md,[ia(kd)],function(A,K){return 0<=K[0].value.indexOf(A.geometryType())}],"filter-id-in":[md,[ia(vd)],function(A,K){return 0<=K[0].value.indexOf(A.id())}],"filter-in-small":[md,[kd,ia(vd)],function(A,K){var T=K[0];return 0<=K[1].value.indexOf(A.properties()[T.value])}],"filter-in-large":[md,[kd,ia(vd)],function(A,K){var T=
K[0];K=K[1];a:{A=A.properties()[T.value];T=K.value;var ma=0;for(K=K.value.length-1;ma<=K;){var va=ma+K>>1;if(T[va]===A){K=!0;break a}T[va]>A?K=va-1:ma=va+1}K=!1}return K}],all:{type:md,overloads:[[[md,md],function(A,K){var T=K[1];return K[0].evaluate(A)&&T.evaluate(A)}],[{type:md},function(A,K){for(var T=0;T<K.length;T+=1)if(!K[T].evaluate(A))return!1;return!0}]]},any:{type:md,overloads:[[[md,md],function(A,K){var T=K[1];return K[0].evaluate(A)||T.evaluate(A)}],[{type:md},function(A,K){for(var T=
0;T<K.length;T+=1)if(K[T].evaluate(A))return!0;return!1}]]},"!":[md,[md],function(A,K){return!K[0].evaluate(A)}],"is-supported-script":[md,[kd],function(A,K){var T=A.globals&&A.globals.isSupportedScript;return!T||T(K[0].evaluate(A))}],upcase:[kd,[kd],function(A,K){return K[0].evaluate(A).toUpperCase()}],downcase:[kd,[kd],function(A,K){return K[0].evaluate(A).toLowerCase()}],concat:[kd,{type:vd},function(A,K){return K.map(function(T){return ua(T.evaluate(A))}).join("")}],"resolved-locale":[kd,[Ld],
function(A,K){return K[0].evaluate(A).resolvedLocale()}]});var hj=function(A,K){this.expression=A;this._warningHistory={};this._evaluator=new Lg;this._defaultValue=K?"color"===K.type&&Bb(K.default)?new Md(0,0,0,0):"color"===K.type?Md.parse(K.default)||null:void 0===K.default?null:K.default:null;this._enumValues=K&&"enum"===K.type?K.values:null};hj.prototype.evaluateWithoutErrorHandling=function(A,K,T,ma,va,Aa){return this._evaluator.globals=A,this._evaluator.feature=K,this._evaluator.featureState=
T,this._evaluator.canonical=ma,this._evaluator.availableImages=va||null,this._evaluator.formattedSection=Aa,this.expression.evaluate(this._evaluator)};hj.prototype.evaluate=function(A,K,T,ma,va,Aa){this._evaluator.globals=A;this._evaluator.feature=K||null;this._evaluator.featureState=T||null;this._evaluator.canonical=ma;this._evaluator.availableImages=va||null;this._evaluator.formattedSection=Aa||null;try{var Ma=this.expression.evaluate(this._evaluator);if(null==Ma||"number"==typeof Ma&&Ma!=Ma)return this._defaultValue;
if(this._enumValues&&!(Ma in this._enumValues))throw new Ke("Expected value to be one of "+Object.keys(this._enumValues).map(function(Va){return JSON.stringify(Va)}).join(", ")+", but found "+JSON.stringify(Ma)+" instead.");return Ma}catch(Va){return this._warningHistory[Va.message]||(this._warningHistory[Va.message]=!0,"undefined"!=typeof console&&console.warn(Va.message)),this._defaultValue}};var ki=function(A,K){this.kind=A;this._styleExpression=K;this.isStateDependent="constant"!==A&&!Ia(K.expression)};
ki.prototype.evaluateWithoutErrorHandling=function(A,K,T,ma,va,Aa){return this._styleExpression.evaluateWithoutErrorHandling(A,K,T,ma,va,Aa)};ki.prototype.evaluate=function(A,K,T,ma,va,Aa){return this._styleExpression.evaluate(A,K,T,ma,va,Aa)};var fe=function(A,K,T,ma){this.kind=A;this.zoomStops=T;this._styleExpression=K;this.isStateDependent="camera"!==A&&!Ia(K.expression);this.interpolationType=ma};fe.prototype.evaluateWithoutErrorHandling=function(A,K,T,ma,va,Aa){return this._styleExpression.evaluateWithoutErrorHandling(A,
K,T,ma,va,Aa)};fe.prototype.evaluate=function(A,K,T,ma,va,Aa){return this._styleExpression.evaluate(A,K,T,ma,va,Aa)};fe.prototype.interpolationFactor=function(A,K,T){return this.interpolationType?of.interpolationFactor(this.interpolationType,A,K,T):0};var Ff=function(A,K){this._parameters=A;this._specification=K;ba(this,function Aa(ma,va){var Ma="color"===va.type,Va=ma.stops&&"object"==typeof ma.stops[0][0],jb=Va||!(Va||void 0!==ma.property),qb=ma.type||(gb(va)?"exponential":"interval");if(Ma&&((ma=
ba({},ma)).stops&&(ma.stops=ma.stops.map(function(Ec){return[Ec[0],Md.parse(Ec[1])]})),ma.default=Md.parse(ma.default?ma.default:va.default)),ma.colorSpace&&"rgb"!==ma.colorSpace&&!Lf[ma.colorSpace])throw Error("Unknown color space: "+ma.colorSpace);if("exponential"===qb)var zb=Uc;else if("interval"===qb)zb=Ac;else if("categorical"===qb){zb=tc;var Hb=Object.create(null);Ma=0;for(var Ub=ma.stops;Ma<Ub.length;Ma+=1){var Sb=Ub[Ma];Hb[Sb[0]]=Sb[1]}var $b=typeof ma.stops[0][0]}else{if("identity"!==qb)throw Error('Unknown function type "'+
qb+'"');zb=Nc}if(Va){Va={};jb=[];for(qb=0;qb<ma.stops.length;qb++)Ma=ma.stops[qb],Ub=Ma[0].zoom,void 0===Va[Ub]&&(Va[Ub]={zoom:Ub,type:ma.type,property:ma.property,default:ma.default,stops:[]},jb.push(Ub)),Va[Ub].stops.push([Ma[0].value,Ma[1]]);var bc=[];for(qb=0;qb<jb.length;qb+=1)Ma=jb[qb],bc.push([Va[Ma].zoom,Aa(Va[Ma],va)]);Va={name:"linear"};return{kind:"composite",interpolationType:Va,interpolationFactor:of.interpolationFactor.bind(void 0,Va),zoomStops:bc.map(function(Ec){return Ec[0]}),evaluate:function(Ec,
ld){Ec=Ec.zoom;return Uc({stops:bc,base:ma.base},va,Ec).evaluate(Ec,ld)}}}return jb?(Va="exponential"===qb?{name:"exponential",base:void 0!==ma.base?ma.base:1}:null,{kind:"camera",interpolationType:Va,interpolationFactor:of.interpolationFactor.bind(void 0,Va),zoomStops:ma.stops.map(function(Ec){return Ec[0]}),evaluate:function(Ec){return zb(ma,va,Ec.zoom,Hb,$b)}}):{kind:"source",evaluate:function(Ec,ld){Ec=ld&&ld.properties?ld.properties[ma.property]:void 0;return void 0===Ec?gc(ma.default,va.default):
zb(ma,va,Ec,Hb,$b)}}}(this._parameters,this._specification))};Ff.deserialize=function(A){return new Ff(A._parameters,A._specification)};Ff.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var ol={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},bf={promoteId:function(A){var K=A.key;A=A.value;if("string"===rb(A))return ic({key:K,value:A});var T=[],ma;for(ma in A)T.push.apply(T,ic({key:K+
"."+ma,value:A[ma]}));return T}},le={"*":function(){return[]},array:Xb,boolean:function(A){var K=A.value;A=A.key;var T=rb(K);return"boolean"!==T?[new Rb(A,K,"boolean expected, "+T+" found")]:[]},number:uc,color:function(A){var K=A.key;A=A.value;var T=rb(A);return"string"!==T?[new Rb(K,A,"color expected, "+T+" found")]:null===He(A)?[new Rb(K,A,'color expected, "'+A+'" found')]:[]},constants:Y,enum:fd,filter:Gb,function:Mc,layer:Dc,object:tb,source:Bc,light:Sc,string:ic,formatted:function(A){return 0===
ic(A).length?[]:Rc(A)},resolvedImage:function(A){return 0===ic(A).length?[]:Rc(A)}};nd.source=rd(Bc);nd.light=rd(Sc);nd.layer=rd(Dc);nd.filter=rd(Gb);nd.paintProperty=rd(Vb);nd.layoutProperty=rd(Zb);var Xe=nd.light,Aj=nd.paintProperty,Zk=nd.layoutProperty;cd.prototype.insert=function(A,K,T,ma,va){this._forEachCell(K,T,ma,va,this._insertCell,this.uid++);this.keys.push(A);this.bboxes.push(K);this.bboxes.push(T);this.bboxes.push(ma);this.bboxes.push(va)};cd.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";
};cd.prototype._insertCell=function(A,K,T,ma,va,Aa){this.cells[va].push(Aa)};cd.prototype.query=function(A,K,T,ma,va){var Aa=this.min,Ma=this.max;if(A<=Aa&&K<=Aa&&Ma<=T&&Ma<=ma&&!va)return Array.prototype.slice.call(this.keys);Aa=[];return this._forEachCell(A,K,T,ma,this._queryCell,Aa,{},va),Aa};cd.prototype._queryCell=function(A,K,T,ma,va,Aa,Ma,Va){va=this.cells[va];if(null!==va)for(var jb=this.keys,qb=this.bboxes,zb=0;zb<va.length;zb++){var Hb=va[zb];if(void 0===Ma[Hb]){var Ub=4*Hb;(Va?Va(qb[Ub+
0],qb[Ub+1],qb[Ub+2],qb[Ub+3]):A<=qb[Ub+2]&&K<=qb[Ub+3]&&T>=qb[Ub+0]&&ma>=qb[Ub+1])?(Ma[Hb]=!0,Aa.push(jb[Hb])):Ma[Hb]=!1}}};cd.prototype._forEachCell=function(A,K,T,ma,va,Aa,Ma,Va){for(var jb=this._convertToCellCoord(A),qb=this._convertToCellCoord(K),zb=this._convertToCellCoord(T),Hb=this._convertToCellCoord(ma);jb<=zb;jb++)for(var Ub=qb;Ub<=Hb;Ub++){var Sb=this.d*Ub+jb;if((!Va||Va(this._convertFromCellCoord(jb),this._convertFromCellCoord(Ub),this._convertFromCellCoord(jb+1),this._convertFromCellCoord(Ub+
1)))&&va.call(this,A,K,T,ma,Sb,Aa,Ma,Va))return}};cd.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale};cd.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))};cd.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,K=3+this.cells.length+1+1,T=0,ma=0;ma<this.cells.length;ma++)T+=this.cells[ma].length;T=new Int32Array(K+T+this.keys.length+this.bboxes.length);
T[0]=this.extent;T[1]=this.n;T[2]=this.padding;for(ma=0;ma<A.length;ma++){var va=A[ma];T[3+ma]=K;T.set(va,K);K+=va.length}return T[3+A.length]=K,T.set(this.keys,K),T[3+A.length+1]=K+=this.keys.length,T.set(this.bboxes,K),T.buffer};var Bj=self.ImageData,Xi=self.ImageBitmap,Bi={},Yi;for(Yi in Jc("Object",Object),cd.serialize=function(A,K){A=A.toArrayBuffer();return K&&K.push(A),{buffer:A}},cd.deserialize=function(A){return new cd(A.buffer)},Jc("Grid",cd),Jc("Color",Md),Jc("Error",Error),Jc("ResolvedImage",
we),Jc("StylePropertyFunction",Ff),Jc("StyleExpression",hj,{omit:["_evaluator"]}),Jc("ZoomDependentExpression",fe),Jc("ZoomConstantExpression",ki),Jc("CompoundExpression",df,{omit:["_evaluate"]}),tg)tg[Yi]._classRegistryKey||Jc("Expression_"+Yi,tg[Yi]);var Zi=function(){this.first=!0};Zi.prototype.update=function(A,K){var T=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=T,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=T,!0):(this.lastFloorZoom>T?(this.lastIntegerZoom=
T+1,this.lastIntegerZoomTime=K):this.lastFloorZoom<T&&(this.lastIntegerZoom=T,this.lastIntegerZoomTime=K),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=T,!0))};var Id={"Latin-1 Supplement":function(A){return 128<=A&&255>=A},Arabic:function(A){return 1536<=A&&1791>=A},"Arabic Supplement":function(A){return 1872<=A&&1919>=A},"Arabic Extended-A":function(A){return 2208<=A&&2303>=A},"Hangul Jamo":function(A){return 4352<=A&&4607>=A},"Unified Canadian Aboriginal Syllabics":function(A){return 5120<=
A&&5759>=A},Khmer:function(A){return 6016<=A&&6143>=A},"Unified Canadian Aboriginal Syllabics Extended":function(A){return 6320<=A&&6399>=A},"General Punctuation":function(A){return 8192<=A&&8303>=A},"Letterlike Symbols":function(A){return 8448<=A&&8527>=A},"Number Forms":function(A){return 8528<=A&&8591>=A},"Miscellaneous Technical":function(A){return 8960<=A&&9215>=A},"Control Pictures":function(A){return 9216<=A&&9279>=A},"Optical Character Recognition":function(A){return 9280<=A&&9311>=A},"Enclosed Alphanumerics":function(A){return 9312<=
A&&9471>=A},"Geometric Shapes":function(A){return 9632<=A&&9727>=A},"Miscellaneous Symbols":function(A){return 9728<=A&&9983>=A},"Miscellaneous Symbols and Arrows":function(A){return 11008<=A&&11263>=A},"CJK Radicals Supplement":function(A){return 11904<=A&&12031>=A},"Kangxi Radicals":function(A){return 12032<=A&&12255>=A},"Ideographic Description Characters":function(A){return 12272<=A&&12287>=A},"CJK Symbols and Punctuation":function(A){return 12288<=A&&12351>=A},Hiragana:function(A){return 12352<=
A&&12447>=A},Katakana:function(A){return 12448<=A&&12543>=A},Bopomofo:function(A){return 12544<=A&&12591>=A},"Hangul Compatibility Jamo":function(A){return 12592<=A&&12687>=A},Kanbun:function(A){return 12688<=A&&12703>=A},"Bopomofo Extended":function(A){return 12704<=A&&12735>=A},"CJK Strokes":function(A){return 12736<=A&&12783>=A},"Katakana Phonetic Extensions":function(A){return 12784<=A&&12799>=A},"Enclosed CJK Letters and Months":function(A){return 12800<=A&&13055>=A},"CJK Compatibility":function(A){return 13056<=
A&&13311>=A},"CJK Unified Ideographs Extension A":function(A){return 13312<=A&&19903>=A},"Yijing Hexagram Symbols":function(A){return 19904<=A&&19967>=A},"CJK Unified Ideographs":function(A){return 19968<=A&&40959>=A},"Yi Syllables":function(A){return 40960<=A&&42127>=A},"Yi Radicals":function(A){return 42128<=A&&42191>=A},"Hangul Jamo Extended-A":function(A){return 43360<=A&&43391>=A},"Hangul Syllables":function(A){return 44032<=A&&55215>=A},"Hangul Jamo Extended-B":function(A){return 55216<=A&&
55295>=A},"Private Use Area":function(A){return 57344<=A&&63743>=A},"CJK Compatibility Ideographs":function(A){return 63744<=A&&64255>=A},"Arabic Presentation Forms-A":function(A){return 64336<=A&&65023>=A},"Vertical Forms":function(A){return 65040<=A&&65055>=A},"CJK Compatibility Forms":function(A){return 65072<=A&&65103>=A},"Small Form Variants":function(A){return 65104<=A&&65135>=A},"Arabic Presentation Forms-B":function(A){return 65136<=A&&65279>=A},"Halfwidth and Fullwidth Forms":function(A){return 65280<=
A&&65519>=A}},Sj=null,Ef="unavailable",dh=null,Cj=function(A){A&&"string"==typeof A&&-1<A.indexOf("NetworkError")&&(Ef="error");Sj&&Sj(A)},Li=new hc,ij=function(){if("deferred"!==Ef||!dh)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ef="loading";qe();dh&&Xa({url:dh},function(A){A?Cj(A):(Ef="loaded",qe())})},Pf={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Ef||null!=Pf.applyArabicShaping},
isLoading:function(){return"loading"===Ef},setState:function(A){Ef=A.pluginStatus;dh=A.pluginURL},isParsed:function(){return null!=Pf.applyArabicShaping&&null!=Pf.processBidirectionalText&&null!=Pf.processStyledBidirectionalText},getPluginURL:function(){return dh}},Pe=function(A,K){this.zoom=A;K?(this.now=K.now,this.fadeDuration=K.fadeDuration,this.zoomHistory=K.zoomHistory,this.transition=K.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zi,this.transition={})};Pe.prototype.isSupportedScript=
function(A){a:{for(var K=Pf.isLoaded(),T=0;T<A.length;T+=1){var ma=A[T].charCodeAt(0);if(!K&&be(ma)||2304<=ma&&3583>=ma||3840<=ma&&4255>=ma||Id.Khmer(ma)){A=!1;break a}}A=!0}return A};Pe.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};Pe.prototype.getCrossfadeParameters=function(){var A=this.zoom,K=A-Math.floor(A),T=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,
t:K+(1-K)*T}:{fromScale:.5,toScale:1,t:1-(1-T)*K}};var kh=function(A,K){this.property=A;this.value=K;this.expression=function(T,ma){if(Bb(T))return new Ff(T,ma);if(gd(T)){T=ed(T,ma);if("error"===T.result)throw Error(T.value.map(function(Aa){return Aa.key+": "+Aa.message}).join(", "));return T.value}var va=T;return"string"==typeof T&&"color"===ma.type&&(va=Md.parse(T)),{kind:"constant",evaluate:function(){return va}}}(void 0===K?A.specification.default:K,A.specification)};kh.prototype.isDataDriven=
function(){return"source"===this.expression.kind||"composite"===this.expression.kind};kh.prototype.possiblyEvaluate=function(A,K,T){return this.property.possiblyEvaluate(this,A,K,T)};var Mi=function(A){this.property=A;this.value=new kh(A,void 0)};Mi.prototype.transitioned=function(A,K){return new Tj(this.property,this.value,K,d({},A.transition,this.transition),A.now)};Mi.prototype.untransitioned=function(){return new Tj(this.property,this.value,null,{},0)};var Ch=function(A){this._properties=A;this._values=
Object.create(A.defaultTransitionablePropertyValues)};Ch.prototype.getValue=function(A){return D(this._values[A].value.value)};Ch.prototype.setValue=function(A,K){this._values.hasOwnProperty(A)||(this._values[A]=new Mi(this._values[A].property));this._values[A].value=new kh(this._values[A].property,null===K?void 0:D(K))};Ch.prototype.getTransition=function(A){return D(this._values[A].transition)};Ch.prototype.setTransition=function(A,K){this._values.hasOwnProperty(A)||(this._values[A]=new Mi(this._values[A].property));
this._values[A].transition=D(K)||void 0};Ch.prototype.serialize=function(){for(var A={},K=0,T=Object.keys(this._values);K<T.length;K+=1){var ma=T[K],va=this.getValue(ma);void 0!==va&&(A[ma]=va);va=this.getTransition(ma);void 0!==va&&(A[ma+"-transition"]=va)}return A};Ch.prototype.transitioned=function(A,K){for(var T=new Uj(this._properties),ma=0,va=Object.keys(this._values);ma<va.length;ma+=1){var Aa=va[ma];T._values[Aa]=this._values[Aa].transitioned(A,K._values[Aa])}return T};Ch.prototype.untransitioned=
function(){for(var A=new Uj(this._properties),K=0,T=Object.keys(this._values);K<T.length;K+=1){var ma=T[K];A._values[ma]=this._values[ma].untransitioned()}return A};var Tj=function(A,K,T,ma,va){this.property=A;this.value=K;this.begin=va+ma.delay||0;this.end=this.begin+ma.duration||0;A.specification.transition&&(ma.delay||ma.duration)&&(this.prior=T)};Tj.prototype.possiblyEvaluate=function(A,K,T){var ma=A.now||0,va=this.value.possiblyEvaluate(A,K,T),Aa=this.prior;if(Aa){if(ma>this.end||this.value.isDataDriven())return this.prior=
null,va;if(ma<this.begin)return Aa.possiblyEvaluate(A,K,T);ma=(ma-this.begin)/(this.end-this.begin);return this.property.interpolate(Aa.possiblyEvaluate(A,K,T),va,function(Ma){if(0>=Ma)return 0;if(1<=Ma)return 1;var Va=Ma*Ma,jb=Va*Ma;return 4*(.5>Ma?jb:3*(Ma-Va)+jb-.75)}(ma))}return va};var Uj=function(A){this._properties=A;this._values=Object.create(A.defaultTransitioningPropertyValues)};Uj.prototype.possiblyEvaluate=function(A,K,T){for(var ma=new qg(this._properties),va=0,Aa=Object.keys(this._values);va<
Aa.length;va+=1){var Ma=Aa[va];ma._values[Ma]=this._values[Ma].possiblyEvaluate(A,K,T)}return ma};Uj.prototype.hasTransition=function(){for(var A=0,K=Object.keys(this._values);A<K.length;A+=1)if(this._values[K[A]].prior)return!0;return!1};var Jd=function(A){this._properties=A;this._values=Object.create(A.defaultPropertyValues)};Jd.prototype.getValue=function(A){return D(this._values[A].value)};Jd.prototype.setValue=function(A,K){this._values[A]=new kh(this._values[A].property,null===K?void 0:D(K))};
Jd.prototype.serialize=function(){for(var A={},K=0,T=Object.keys(this._values);K<T.length;K+=1){var ma=T[K],va=this.getValue(ma);void 0!==va&&(A[ma]=va)}return A};Jd.prototype.possiblyEvaluate=function(A,K,T){for(var ma=new qg(this._properties),va=0,Aa=Object.keys(this._values);va<Aa.length;va+=1){var Ma=Aa[va];ma._values[Ma]=this._values[Ma].possiblyEvaluate(A,K,T)}return ma};var Te=function(A,K,T){this.property=A;this.value=K;this.parameters=T};Te.prototype.isConstant=function(){return"constant"===
this.value.kind};Te.prototype.constantOr=function(A){return"constant"===this.value.kind?this.value.value:A};Te.prototype.evaluate=function(A,K,T,ma){return this.property.evaluate(this.value,this.parameters,A,K,T,ma)};var qg=function(A){this._properties=A;this._values=Object.create(A.defaultPossiblyEvaluatedValues)};qg.prototype.get=function(A){return this._values[A]};var Vd=function(A){this.specification=A};Vd.prototype.possiblyEvaluate=function(A,K){return A.expression.evaluate(K)};Vd.prototype.interpolate=
function(A,K,T){var ma=Bg[this.specification.type];return ma?ma(A,K,T):A};var Kd=function(A,K){this.specification=A;this.overrides=K};Kd.prototype.possiblyEvaluate=function(A,K,T,ma){return new Te(this,"constant"===A.expression.kind||"camera"===A.expression.kind?{kind:"constant",value:A.expression.evaluate(K,null,{},T,ma)}:A.expression,K)};Kd.prototype.interpolate=function(A,K,T){if("constant"!==A.value.kind||"constant"!==K.value.kind)return A;if(void 0===A.value.value||void 0===K.value.value)return new Te(this,
{kind:"constant",value:void 0},A.parameters);var ma=Bg[this.specification.type];return ma?new Te(this,{kind:"constant",value:ma(A.value.value,K.value.value,T)},A.parameters):A};Kd.prototype.evaluate=function(A,K,T,ma,va,Aa){return"constant"===A.kind?A.value:A.evaluate(K,T,ma,va,Aa)};var jj=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.possiblyEvaluate=function(T,ma,va,Aa){return void 0===T.value?new Te(this,
{kind:"constant",value:void 0},ma):"constant"===T.expression.kind?(va=T.expression.evaluate(ma,null,{},va,Aa),T="resolvedImage"===T.property.specification.type&&"string"!=typeof va?va.name:va,T=this._calculate(T,T,T,ma),new Te(this,{kind:"constant",value:T},ma)):"camera"===T.expression.kind?(T=this._calculate(T.expression.evaluate({zoom:ma.zoom-1}),T.expression.evaluate({zoom:ma.zoom}),T.expression.evaluate({zoom:ma.zoom+1}),ma),new Te(this,{kind:"constant",value:T},ma)):new Te(this,T.expression,
ma)},K.prototype.evaluate=function(T,ma,va,Aa,Ma,Va){return"source"===T.kind?(T=T.evaluate(ma,va,Aa,Ma,Va),this._calculate(T,T,T,ma)):"composite"===T.kind?this._calculate(T.evaluate({zoom:Math.floor(ma.zoom)-1},va,Aa),T.evaluate({zoom:Math.floor(ma.zoom)},va,Aa),T.evaluate({zoom:Math.floor(ma.zoom)+1},va,Aa),ma):T.value},K.prototype._calculate=function(T,ma,va,Aa){return Aa.zoom>Aa.zoomHistory.lastIntegerZoom?{from:T,to:ma}:{from:va,to:ma}},K.prototype.interpolate=function(T){return T},K}(Kd),Ci=
function(A){this.specification=A};Ci.prototype.possiblyEvaluate=function(A,K,T,ma){if(void 0!==A.value)return"constant"===A.expression.kind?(A=A.expression.evaluate(K,null,{},T,ma),this._calculate(A,A,A,K)):this._calculate(A.expression.evaluate(new Pe(Math.floor(K.zoom-1),K)),A.expression.evaluate(new Pe(Math.floor(K.zoom),K)),A.expression.evaluate(new Pe(Math.floor(K.zoom+1),K)),K)};Ci.prototype._calculate=function(A,K,T,ma){return ma.zoom>ma.zoomHistory.lastIntegerZoom?{from:A,to:K}:{from:T,to:K}};
Ci.prototype.interpolate=function(A){return A};var $h=function(A){this.specification=A};$h.prototype.possiblyEvaluate=function(A,K,T,ma){return!!A.expression.evaluate(K,null,{},T,ma)};$h.prototype.interpolate=function(){return!1};var Zf=function(A){for(var K in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var T=A[K];T.specification.overridable&&
this.overridableProperties.push(K);var ma=this.defaultPropertyValues[K]=new kh(T,void 0);T=this.defaultTransitionablePropertyValues[K]=new Mi(T);this.defaultTransitioningPropertyValues[K]=T.untransitioned();this.defaultPossiblyEvaluatedValues[K]=ma.possiblyEvaluate({})}};Jc("DataDrivenProperty",Kd);Jc("DataConstantProperty",Vd);Jc("CrossFadedDataDrivenProperty",jj);Jc("CrossFadedProperty",Ci);Jc("ColorRampProperty",$h);var Fg=function(A){function K(T,ma){if(A.call(this),this.id=T.id,this.type=T.type,
this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==T.type&&(this.metadata=T.metadata,this.minzoom=T.minzoom,this.maxzoom=T.maxzoom,"background"!==T.type&&(this.source=T.source,this.sourceLayer=T["source-layer"],this.filter=T.filter),ma.layout&&(this._unevaluatedLayout=new Jd(ma.layout)),ma.paint)){for(var va in this._transitionablePaint=new Ch(ma.paint),T.paint)this.setPaintProperty(va,T.paint[va],{validate:!1});for(var Aa in T.layout)this.setLayoutProperty(Aa,T.layout[Aa],
{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned();this.paint=new qg(ma.paint)}}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},K.prototype.getLayoutProperty=function(T){return"visibility"===T?this.visibility:this._unevaluatedLayout.getValue(T)},K.prototype.setLayoutProperty=function(T,ma,va){void 0===va&&(va={});null!=ma&&this._validate(Zk,"layers."+
this.id+".layout."+T,T,ma,va)||("visibility"!==T?this._unevaluatedLayout.setValue(T,ma):this.visibility=ma)},K.prototype.getPaintProperty=function(T){return v(T,"-transition")?this._transitionablePaint.getTransition(T.slice(0,-11)):this._transitionablePaint.getValue(T)},K.prototype.setPaintProperty=function(T,ma,va){if(void 0===va&&(va={}),null!=ma&&this._validate(Aj,"layers."+this.id+".paint."+T,T,ma,va))return!1;if(v(T,"-transition"))return this._transitionablePaint.setTransition(T.slice(0,-11),
ma||void 0),!1;var Aa=this._transitionablePaint._values[T];va="cross-faded-data-driven"===Aa.property.specification["property-type"];var Ma=Aa.value.isDataDriven();Aa=Aa.value;this._transitionablePaint.setValue(T,ma);this._handleSpecialPaintPropertyUpdate(T);ma=this._transitionablePaint._values[T].value;return ma.isDataDriven()||Ma||va||this._handleOverridablePaintPropertyUpdate(T,Aa,ma)},K.prototype._handleSpecialPaintPropertyUpdate=function(T){},K.prototype._handleOverridablePaintPropertyUpdate=
function(T,ma,va){return!1},K.prototype.isHidden=function(T){return!!(this.minzoom&&T<this.minzoom)||!!(this.maxzoom&&T>=this.maxzoom)||"none"===this.visibility},K.prototype.updateTransitions=function(T){this._transitioningPaint=this._transitionablePaint.transitioned(T,this._transitioningPaint)},K.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},K.prototype.recalculate=function(T,ma){T.getCrossfadeParameters&&(this._crossfadeParameters=T.getCrossfadeParameters());
this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(T,void 0,ma));this.paint=this._transitioningPaint.possiblyEvaluate(T,void 0,ma)},K.prototype.serialize=function(){var T={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};
return this.visibility&&(T.layout=T.layout||{},T.layout.visibility=this.visibility),y(T,function(ma,va){return!(void 0===ma||"layout"===va&&!Object.keys(ma).length||"paint"===va&&!Object.keys(ma).length)})},K.prototype._validate=function(T,ma,va,Aa,Ma){return void 0===Ma&&(Ma={}),(!Ma||!1!==Ma.validate)&&wd(this,T.call(nd,{key:ma,layerType:this.type,objectKey:va,value:Aa,styleSpec:Ib,style:{glyphs:!0,sprite:!0}}))},K.prototype.is3D=function(){return!1},K.prototype.isTileClipped=function(){return!1},
K.prototype.hasOffscreenPass=function(){return!1},K.prototype.resize=function(){},K.prototype.isStateDependent=function(){for(var T in this.paint._values){var ma=this.paint.get(T);if(ma instanceof Te&&ob(ma.property.specification)&&("source"===ma.value.kind||"composite"===ma.value.kind)&&ma.value.isStateDependent)return!0}return!1},K}(hc),hk={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Rg=function(A,K){this._structArray=
A;this._pos1=K*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},ye=function(){this.isTransferred=!1;this.capacity=-1;this.resize(0)};ye.serialize=function(A,K){return A._trim(),K&&(A.isTransferred=!0,K.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}};ye.deserialize=function(A){var K=Object.create(this.prototype);return K.arrayBuffer=A.arrayBuffer,K.length=A.length,K.capacity=A.arrayBuffer.byteLength/K.bytesPerElement,K._refreshViews(),K};ye.prototype._trim=
function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())};ye.prototype.clear=function(){this.length=0};ye.prototype.resize=function(A){this.reserve(A);this.length=A};ye.prototype.reserve=function(A){A>this.capacity&&(this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),A=this.uint8,this._refreshViews(),A&&this.uint8.set(A))};
ye.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var lh=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma){var va=this.length;return this.resize(va+1),this.emplace(va,T,ma)},K.prototype.emplace=
function(T,ma,va){var Aa=2*T;return this.int16[Aa+0]=ma,this.int16[Aa+1]=va,T},K}(ye);lh.prototype.bytesPerElement=4;Jc("StructArrayLayout2i4",lh);var Ni=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va,Aa){var Ma=this.length;return this.resize(Ma+1),
this.emplace(Ma,T,ma,va,Aa)},K.prototype.emplace=function(T,ma,va,Aa,Ma){var Va=4*T;return this.int16[Va+0]=ma,this.int16[Va+1]=va,this.int16[Va+2]=Aa,this.int16[Va+3]=Ma,T},K}(ye);Ni.prototype.bytesPerElement=8;Jc("StructArrayLayout4i8",Ni);var mh=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},
K.prototype.emplaceBack=function(T,ma,va,Aa,Ma,Va){var jb=this.length;return this.resize(jb+1),this.emplace(jb,T,ma,va,Aa,Ma,Va)},K.prototype.emplace=function(T,ma,va,Aa,Ma,Va,jb){var qb=6*T;return this.int16[qb+0]=ma,this.int16[qb+1]=va,this.int16[qb+2]=Aa,this.int16[qb+3]=Ma,this.int16[qb+4]=Va,this.int16[qb+5]=jb,T},K}(ye);mh.prototype.bytesPerElement=12;Jc("StructArrayLayout2i4i12",mh);var nh=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&
A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va,Aa,Ma,Va){var jb=this.length;return this.resize(jb+1),this.emplace(jb,T,ma,va,Aa,Ma,Va)},K.prototype.emplace=function(T,ma,va,Aa,Ma,Va,jb){var qb=4*T,zb=8*T;return this.int16[qb+0]=ma,this.int16[qb+1]=va,this.uint8[zb+4]=Aa,this.uint8[zb+5]=Ma,this.uint8[zb+6]=Va,this.uint8[zb+7]=jb,T},K}(ye);nh.prototype.bytesPerElement=
8;Jc("StructArrayLayout2i4ub8",nh);var Qf=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb){var Ub=this.length;return this.resize(Ub+1),this.emplace(Ub,T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb)},K.prototype.emplace=function(T,ma,va,Aa,Ma,Va,
jb,qb,zb,Hb,Ub){var Sb=9*T,$b=18*T;return this.uint16[Sb+0]=ma,this.uint16[Sb+1]=va,this.uint16[Sb+2]=Aa,this.uint16[Sb+3]=Ma,this.uint16[Sb+4]=Va,this.uint16[Sb+5]=jb,this.uint16[Sb+6]=qb,this.uint16[Sb+7]=zb,this.uint8[$b+16]=Hb,this.uint8[$b+17]=Ub,T},K}(ye);Qf.prototype.bytesPerElement=18;Jc("StructArrayLayout8ui2ub18",Qf);var Sg=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb){var $b=this.length;return this.resize($b+1),this.emplace($b,T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb)},K.prototype.emplace=function(T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb,$b){var bc=12*T;return this.int16[bc+0]=ma,this.int16[bc+1]=va,this.int16[bc+2]=Aa,this.int16[bc+3]=Ma,this.uint16[bc+4]=Va,this.uint16[bc+5]=jb,this.uint16[bc+
6]=qb,this.uint16[bc+7]=zb,this.int16[bc+8]=Hb,this.int16[bc+9]=Ub,this.int16[bc+10]=Sb,this.int16[bc+11]=$b,T},K}(ye);Sg.prototype.bytesPerElement=24;Jc("StructArrayLayout4i4ui4i24",Sg);var Tg=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va){var Aa=
this.length;return this.resize(Aa+1),this.emplace(Aa,T,ma,va)},K.prototype.emplace=function(T,ma,va,Aa){var Ma=3*T;return this.float32[Ma+0]=ma,this.float32[Ma+1]=va,this.float32[Ma+2]=Aa,T},K}(ye);Tg.prototype.bytesPerElement=12;Jc("StructArrayLayout3f12",Tg);var ug=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},
K.prototype.emplaceBack=function(T){var ma=this.length;return this.resize(ma+1),this.emplace(ma,T)},K.prototype.emplace=function(T,ma){return this.uint32[1*T]=ma,T},K}(ye);ug.prototype.bytesPerElement=4;Jc("StructArrayLayout1ul4",ug);var Fh=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=
new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va,Aa,Ma,Va,jb,qb,zb){var Hb=this.length;return this.resize(Hb+1),this.emplace(Hb,T,ma,va,Aa,Ma,Va,jb,qb,zb)},K.prototype.emplace=function(T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb){var Ub=10*T;return this.int16[Ub+0]=ma,this.int16[Ub+1]=va,this.int16[Ub+2]=Aa,this.int16[Ub+3]=Ma,this.int16[Ub+4]=Va,this.int16[Ub+5]=jb,this.uint32[5*T+3]=qb,this.uint16[Ub+8]=zb,this.uint16[Ub+9]=Hb,T},K}(ye);
Fh.prototype.bytesPerElement=20;Jc("StructArrayLayout6i1ul2ui20",Fh);var oh=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va,Aa,Ma,Va){var jb=this.length;return this.resize(jb+1),this.emplace(jb,T,ma,va,Aa,Ma,Va)},K.prototype.emplace=function(T,ma,va,
Aa,Ma,Va,jb){var qb=6*T;return this.int16[qb+0]=ma,this.int16[qb+1]=va,this.int16[qb+2]=Aa,this.int16[qb+3]=Ma,this.int16[qb+4]=Va,this.int16[qb+5]=jb,T},K}(ye);oh.prototype.bytesPerElement=12;Jc("StructArrayLayout2i2i2i12",oh);var Ug=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer);this.int16=
new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va,Aa,Ma){var Va=this.length;return this.resize(Va+1),this.emplace(Va,T,ma,va,Aa,Ma)},K.prototype.emplace=function(T,ma,va,Aa,Ma,Va){var jb=4*T,qb=8*T;return this.float32[jb+0]=ma,this.float32[jb+1]=va,this.float32[jb+2]=Aa,this.int16[qb+6]=Ma,this.int16[qb+7]=Va,T},K}(ye);Ug.prototype.bytesPerElement=16;Jc("StructArrayLayout2f1f2i16",Ug);var gg=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=
Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va,Aa){var Ma=this.length;return this.resize(Ma+1),this.emplace(Ma,T,ma,va,Aa)},K.prototype.emplace=function(T,ma,va,Aa,Ma){var Va=12*T,jb=3*T;return this.uint8[Va+0]=ma,this.uint8[Va+1]=va,this.float32[jb+1]=Aa,this.float32[jb+2]=Ma,T},K}(ye);gg.prototype.bytesPerElement=12;Jc("StructArrayLayout2ub2f12",
gg);var qh=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va){var Aa=this.length;return this.resize(Aa+1),this.emplace(Aa,T,ma,va)},K.prototype.emplace=function(T,ma,va,Aa){var Ma=3*T;return this.uint16[Ma+0]=ma,this.uint16[Ma+1]=va,this.uint16[Ma+2]=
Aa,T},K}(ye);qh.prototype.bytesPerElement=6;Jc("StructArrayLayout3ui6",qh);var Dj=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=
function(T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb,$b,bc,Ec,ld,pd){var bd=this.length;return this.resize(bd+1),this.emplace(bd,T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb,$b,bc,Ec,ld,pd)},K.prototype.emplace=function(T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb,$b,bc,Ec,ld,pd,bd){var Ad=24*T,zd=12*T,Cd=48*T;return this.int16[Ad+0]=ma,this.int16[Ad+1]=va,this.uint16[Ad+2]=Aa,this.uint16[Ad+3]=Ma,this.uint32[zd+2]=Va,this.uint32[zd+3]=jb,this.uint32[zd+4]=qb,this.uint16[Ad+10]=zb,this.uint16[Ad+11]=Hb,this.uint16[Ad+12]=Ub,
this.float32[zd+7]=Sb,this.float32[zd+8]=$b,this.uint8[Cd+36]=bc,this.uint8[Cd+37]=Ec,this.uint8[Cd+38]=ld,this.uint32[zd+10]=pd,this.int16[Ad+22]=bd,T},K}(ye);Dj.prototype.bytesPerElement=48;Jc("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Dj);var mj=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb,$b,bc,Ec,ld,pd,bd,Ad,zd,Cd,Od,Ud,ce,ee,Td,Yd,se){var Pd=this.length;return this.resize(Pd+1),this.emplace(Pd,T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb,$b,bc,Ec,ld,pd,bd,Ad,zd,Cd,Od,Ud,ce,ee,Td,Yd,se)},K.prototype.emplace=function(T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb,$b,bc,Ec,ld,pd,bd,Ad,zd,Cd,Od,Ud,ce,
ee,Td,Yd,se,Pd){var Gd=34*T,Rd=17*T;return this.int16[Gd+0]=ma,this.int16[Gd+1]=va,this.int16[Gd+2]=Aa,this.int16[Gd+3]=Ma,this.int16[Gd+4]=Va,this.int16[Gd+5]=jb,this.int16[Gd+6]=qb,this.int16[Gd+7]=zb,this.uint16[Gd+8]=Hb,this.uint16[Gd+9]=Ub,this.uint16[Gd+10]=Sb,this.uint16[Gd+11]=$b,this.uint16[Gd+12]=bc,this.uint16[Gd+13]=Ec,this.uint16[Gd+14]=ld,this.uint16[Gd+15]=pd,this.uint16[Gd+16]=bd,this.uint16[Gd+17]=Ad,this.uint16[Gd+18]=zd,this.uint16[Gd+19]=Cd,this.uint16[Gd+20]=Od,this.uint16[Gd+
21]=Ud,this.uint16[Gd+22]=ce,this.uint32[Rd+12]=ee,this.float32[Rd+13]=Td,this.float32[Rd+14]=Yd,this.float32[Rd+15]=se,this.float32[Rd+16]=Pd,T},K}(ye);mj.prototype.bytesPerElement=68;Jc("StructArrayLayout8i15ui1ul4f68",mj);var Gg=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=
function(T){var ma=this.length;return this.resize(ma+1),this.emplace(ma,T)},K.prototype.emplace=function(T,ma){return this.float32[1*T]=ma,T},K}(ye);Gg.prototype.bytesPerElement=4;Jc("StructArrayLayout1f4",Gg);var $i=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,
ma,va){var Aa=this.length;return this.resize(Aa+1),this.emplace(Aa,T,ma,va)},K.prototype.emplace=function(T,ma,va,Aa){var Ma=3*T;return this.int16[Ma+0]=ma,this.int16[Ma+1]=va,this.int16[Ma+2]=Aa,T},K}(ye);$i.prototype.bytesPerElement=6;Jc("StructArrayLayout3i6",$i);var aj=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va){var Aa=this.length;return this.resize(Aa+1),this.emplace(Aa,T,ma,va)},K.prototype.emplace=function(T,ma,va,Aa){var Ma=4*T;return this.uint32[2*T]=ma,this.uint16[Ma+2]=va,this.uint16[Ma+3]=Aa,T},K}(ye);aj.prototype.bytesPerElement=8;Jc("StructArrayLayout1ul2ui8",aj);var ai=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma){var va=this.length;return this.resize(va+1),this.emplace(va,T,ma)},K.prototype.emplace=function(T,ma,va){var Aa=2*T;return this.uint16[Aa+0]=ma,this.uint16[Aa+1]=va,T},K}(ye);ai.prototype.bytesPerElement=4;Jc("StructArrayLayout2ui4",ai);var bj=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=
K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T){var ma=this.length;return this.resize(ma+1),this.emplace(ma,T)},K.prototype.emplace=function(T,ma){return this.uint16[1*T]=ma,T},K}(ye);bj.prototype.bytesPerElement=2;Jc("StructArrayLayout1ui2",bj);var ik=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=
K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma){var va=this.length;return this.resize(va+1),this.emplace(va,T,ma)},K.prototype.emplace=function(T,ma,va){var Aa=2*T;return this.float32[Aa+0]=ma,this.float32[Aa+1]=va,T},K}(ye);ik.prototype.bytesPerElement=8;Jc("StructArrayLayout2f8",ik);var hg=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=
Object.create(A&&A.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=function(T,ma,va,Aa){var Ma=this.length;return this.resize(Ma+1),this.emplace(Ma,T,ma,va,Aa)},K.prototype.emplace=function(T,ma,va,Aa,Ma){var Va=4*T;return this.float32[Va+0]=ma,this.float32[Va+1]=va,this.float32[Va+2]=Aa,this.float32[Va+3]=Ma,T},K}(ye);hg.prototype.bytesPerElement=16;Jc("StructArrayLayout4f16",
hg);var jk=function(A){function K(){A.apply(this,arguments)}A&&(K.__proto__=A);(K.prototype=Object.create(A&&A.prototype)).constructor=K;var T={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return T.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},T.anchorPointY.get=
function(){return this._structArray.int16[this._pos2+1]},T.x1.get=function(){return this._structArray.int16[this._pos2+2]},T.y1.get=function(){return this._structArray.int16[this._pos2+3]},T.x2.get=function(){return this._structArray.int16[this._pos2+4]},T.y2.get=function(){return this._structArray.int16[this._pos2+5]},T.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},T.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},T.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
9]},T.anchorPoint.get=function(){return new pe(this.anchorPointX,this.anchorPointY)},Object.defineProperties(K.prototype,T),K}(Rg);jk.prototype.size=20;var bi=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.get=function(T){return new jk(this,T)},K}(Fh);Jc("CollisionBoxArray",bi);var Jk=function(A){function K(){A.apply(this,arguments)}A&&(K.__proto__=A);(K.prototype=Object.create(A&&A.prototype)).constructor=
K;var T={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};
return T.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},T.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},T.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},T.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},T.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},T.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},T.lineLength.get=function(){return this._structArray.uint32[this._pos4+
4]},T.segment.get=function(){return this._structArray.uint16[this._pos2+10]},T.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},T.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},T.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},T.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},T.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},T.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+
37]},T.placedOrientation.set=function(ma){this._structArray.uint8[this._pos1+37]=ma},T.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},T.hidden.set=function(ma){this._structArray.uint8[this._pos1+38]=ma},T.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},T.crossTileID.set=function(ma){this._structArray.uint32[this._pos4+10]=ma},T.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(K.prototype,T),K}(Rg);
Jk.prototype.size=48;var Kk=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.get=function(T){return new Jk(this,T)},K}(Dj);Jc("PlacedSymbolArray",Kk);var Lk=function(A){function K(){A.apply(this,arguments)}A&&(K.__proto__=A);(K.prototype=Object.create(A&&A.prototype)).constructor=K;var T={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},
leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},
featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return T.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},T.anchorY.get=function(){return this._structArray.int16[this._pos2+
1]},T.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},T.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},T.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},T.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},T.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},T.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+
7]},T.key.get=function(){return this._structArray.uint16[this._pos2+8]},T.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},T.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},T.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},T.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},T.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},T.iconBoxEndIndex.get=
function(){return this._structArray.uint16[this._pos2+14]},T.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},T.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},T.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},T.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},T.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},T.numIconVertices.get=
function(){return this._structArray.uint16[this._pos2+20]},T.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},T.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},T.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},T.crossTileID.set=function(ma){this._structArray.uint32[this._pos4+12]=ma},T.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},T.textOffset0.get=function(){return this._structArray.float32[this._pos4+
14]},T.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},T.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(K.prototype,T),K}(Rg);Lk.prototype.size=68;var Mk=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.get=function(T){return new Lk(this,T)},K}(mj);Jc("SymbolInstanceArray",Mk);var Nk=function(A){function K(){A.apply(this,
arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.getoffsetX=function(T){return this.float32[1*T]},K}(Gg);Jc("GlyphOffsetArray",Nk);var Ej=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.getx=function(T){return this.int16[3*T]},K.prototype.gety=function(T){return this.int16[3*T+1]},K.prototype.gettileUnitDistanceFromAnchor=function(T){return this.int16[3*
T+2]},K}($i);Jc("SymbolLineVertexArray",Ej);var ni=function(A){function K(){A.apply(this,arguments)}A&&(K.__proto__=A);(K.prototype=Object.create(A&&A.prototype)).constructor=K;var T={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return T.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},T.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},T.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
3]},Object.defineProperties(K.prototype,T),K}(Rg);ni.prototype.size=8;var Jh=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.get=function(T){return new ni(this,T)},K}(aj);Jc("FeatureIndexArray",Jh);var mi=Hd([{name:"a_pos",components:2,type:"Int16"}],4).members,mf=function(A){void 0===A&&(A=[]);this.segments=A};mf.prototype.prepareSegment=function(A,K,T,ma){var va=this.segments[this.segments.length-1];
return A>mf.MAX_VERTEX_ARRAY_LENGTH&&x("Max vertices per segment is "+mf.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!va||va.vertexLength+A>mf.MAX_VERTEX_ARRAY_LENGTH||va.sortKey!==ma)&&(va={vertexOffset:K.length,primitiveOffset:T.length,vertexLength:0,primitiveLength:0},void 0!==ma&&(va.sortKey=ma),this.segments.push(va)),va};mf.prototype.get=function(){return this.segments};mf.prototype.destroy=function(){for(var A=0,K=this.segments;A<K.length;A+=1){var T=K[A],ma;for(ma in T.vaos)T.vaos[ma].destroy()}};
mf.simpleSegment=function(A,K,T,ma){return new mf([{vertexOffset:A,primitiveOffset:K,vertexLength:T,primitiveLength:ma,vaos:{},sortKey:0}])};mf.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;Jc("SegmentVector",mf);var Vj=Hd([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Ri=g(function(A){A.exports=function(K,T){var ma,va,Aa;var Ma=K.length-(ma=
3&K.length);for(Aa=0;Aa<Ma;){var Va=255&K.charCodeAt(Aa)|(255&K.charCodeAt(++Aa))<<8|(255&K.charCodeAt(++Aa))<<16|(255&K.charCodeAt(++Aa))<<24;++Aa;T=27492+(65535&(va=5*(65535&(T=(T^=461845907*(65535&(Va=(Va=3432918353*(65535&Va)+((3432918353*(Va>>>16)&65535)<<16)&4294967295)<<15|Va>>>17))+((461845907*(Va>>>16)&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(va>>>16)&65535)<<16)}switch(Va=0,ma){case 3:Va^=(255&K.charCodeAt(Aa+2))<<16;case 2:Va^=(255&K.charCodeAt(Aa+
1))<<8;case 1:T^=461845907*(65535&(Va=(Va=3432918353*(65535&(Va^=255&K.charCodeAt(Aa)))+((3432918353*(Va>>>16)&65535)<<16)&4294967295)<<15|Va>>>17))+((461845907*(Va>>>16)&65535)<<16)&4294967295}return T^=K.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^T>>>16)>>>0}}),Yk=g(function(A){A.exports=function(K,T){var ma=K.length;T^=ma;for(var va=0;4<=ma;){var Aa=1540483477*(65535&(Aa=255&
K.charCodeAt(va)|(255&K.charCodeAt(++va))<<8|(255&K.charCodeAt(++va))<<16|(255&K.charCodeAt(++va))<<24))+((1540483477*(Aa>>>16)&65535)<<16);T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(Aa=1540483477*(65535&(Aa^=Aa>>>24))+((1540483477*(Aa>>>16)&65535)<<16));ma-=4;++va}switch(ma){case 3:T^=(255&K.charCodeAt(va+2))<<16;case 2:T^=(255&K.charCodeAt(va+1))<<8;case 1:T=1540483477*(65535&(T^=255&K.charCodeAt(va)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*
(T>>>16)&65535)<<16),(T^T>>>15)>>>0}}),ci=Ri;ci.murmur3=Ri;ci.murmur2=Yk;var vh=function(){this.ids=[];this.positions=[];this.indexed=!1};vh.prototype.add=function(A,K,T,ma){this.ids.push(Fd(A));this.positions.push(K,T,ma)};vh.prototype.getPositions=function(A){A=Fd(A);for(var K=0,T=this.ids.length-1;K<T;){var ma=K+T>>1;this.ids[ma]>=A?T=ma:K=ma+1}for(T=[];this.ids[K]===A;)T.push({index:this.positions[3*K],start:this.positions[3*K+1],end:this.positions[3*K+2]}),K++;return T};vh.serialize=function(A,
K){var T=new Float64Array(A.ids);A=new Uint32Array(A.positions);return function jb(va,Aa,Ma,Va){for(;Ma<Va;){for(var qb=va[Ma+Va>>1],zb=Ma-1,Hb=Va+1;;){do zb++;while(va[zb]<qb);do Hb--;while(va[Hb]>qb);if(zb>=Hb)break;Wd(va,zb,Hb);Wd(Aa,3*zb,3*Hb);Wd(Aa,3*zb+1,3*Hb+1);Wd(Aa,3*zb+2,3*Hb+2)}Hb-Ma<Va-Hb?(jb(va,Aa,Ma,Hb),Ma=Hb+1):(jb(va,Aa,Hb+1,Va),Va=Hb)}}(T,A,0,T.length-1),K&&K.push(T.buffer,A.buffer),{ids:T,positions:A}};vh.deserialize=function(A){var K=new vh;return K.ids=A.ids,K.positions=A.positions,
K.indexed=!0,K};var Bk=Math.pow(2,53)-1;Jc("FeaturePositionMap",vh);var di=function(A,K){this.gl=A.gl;this.location=K},pl=function(A){function K(T,ma){A.call(this,T,ma);this.current=0}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.set=function(T){this.current!==T&&(this.current=T,this.gl.uniform1i(this.location,T))},K}(di),kk=function(A){function K(T,ma){A.call(this,T,ma);this.current=0}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=
K,K.prototype.set=function(T){this.current!==T&&(this.current=T,this.gl.uniform1f(this.location,T))},K}(di),ql=function(A){function K(T,ma){A.call(this,T,ma);this.current=[0,0]}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.set=function(T){T[0]===this.current[0]&&T[1]===this.current[1]||(this.current=T,this.gl.uniform2f(this.location,T[0],T[1]))},K}(di),rl=function(A){function K(T,ma){A.call(this,T,ma);this.current=[0,0,0]}return A&&(K.__proto__=A),
(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.set=function(T){T[0]===this.current[0]&&T[1]===this.current[1]&&T[2]===this.current[2]||(this.current=T,this.gl.uniform3f(this.location,T[0],T[1],T[2]))},K}(di),$k=function(A){function K(T,ma){A.call(this,T,ma);this.current=[0,0,0,0]}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.set=function(T){T[0]===this.current[0]&&T[1]===this.current[1]&&T[2]===this.current[2]&&T[3]===this.current[3]||
(this.current=T,this.gl.uniform4f(this.location,T[0],T[1],T[2],T[3]))},K}(di),al=function(A){function K(T,ma){A.call(this,T,ma);this.current=Md.transparent}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.set=function(T){T.r===this.current.r&&T.g===this.current.g&&T.b===this.current.b&&T.a===this.current.a||(this.current=T,this.gl.uniform4f(this.location,T.r,T.g,T.b,T.a))},K}(di),bl=new Float32Array(16),sl=function(A){function K(T,ma){A.call(this,T,ma);
this.current=bl}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.set=function(T){if(T[12]!==this.current[12]||T[0]!==this.current[0])return this.current=T,void this.gl.uniformMatrix4fv(this.location,!1,T);for(var ma=1;16>ma;ma++)if(T[ma]!==this.current[ma]){this.current=T;this.gl.uniformMatrix4fv(this.location,!1,T);break}},K}(di),cj=function(A,K,T){this.value=A;this.uniformNames=K.map(function(ma){return"u_"+ma});this.type=T};cj.prototype.setUniform=
function(A,K,T){A.set(T.constantOr(this.value))};cj.prototype.getBinding=function(A,K,T){return"color"===this.type?new al(A,K):new kk(A,K)};var Th=function(A,K){this.uniformNames=K.map(function(T){return"u_"+T});this.patternTo=this.patternFrom=null;this.pixelRatioTo=this.pixelRatioFrom=1};Th.prototype.setConstantPatternPositions=function(A,K){this.pixelRatioFrom=K.pixelRatio;this.pixelRatioTo=A.pixelRatio;this.patternFrom=K.tlbr;this.patternTo=A.tlbr};Th.prototype.setUniform=function(A,K,T,ma){(K=
"u_pattern_to"===ma?this.patternTo:"u_pattern_from"===ma?this.patternFrom:"u_pixel_ratio_to"===ma?this.pixelRatioTo:"u_pixel_ratio_from"===ma?this.pixelRatioFrom:null)&&A.set(K)};Th.prototype.getBinding=function(A,K,T){return"u_pattern"===T.substr(0,9)?new $k(A,K):new kk(A,K)};var pg=function(A,K,T,ma){this.expression=A;this.type=T;this.maxValue=0;this.paintVertexAttributes=K.map(function(va){return{name:"a_"+va,type:"Float32",components:"color"===T?2:1,offset:0}});this.paintVertexArray=new ma};pg.prototype.populatePaintArray=
function(A,K,T,ma,va){T=this.paintVertexArray.length;K=this.expression.evaluate(new Pe(0),K,{},ma,[],va);this.paintVertexArray.resize(A);this._setPaintValue(T,A,K)};pg.prototype.updatePaintArray=function(A,K,T,ma){T=this.expression.evaluate({zoom:0},T,ma);this._setPaintValue(A,K,T)};pg.prototype._setPaintValue=function(A,K,T){if("color"===this.type)for(T=Sd(T);A<K;A++)this.paintVertexArray.emplace(A,T[0],T[1]);else{for(;A<K;A++)this.paintVertexArray.emplace(A,T);this.maxValue=Math.max(this.maxValue,
Math.abs(T))}};pg.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};pg.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Kf=function(A,K,T,ma,va,Aa){this.expression=A;this.uniformNames=
K.map(function(Ma){return"u_"+Ma+"_t"});this.type=T;this.useIntegerZoom=ma;this.zoom=va;this.maxValue=0;this.paintVertexAttributes=K.map(function(Ma){return{name:"a_"+Ma,type:"Float32",components:"color"===T?4:2,offset:0}});this.paintVertexArray=new Aa};Kf.prototype.populatePaintArray=function(A,K,T,ma,va){T=this.expression.evaluate(new Pe(this.zoom),K,{},ma,[],va);K=this.expression.evaluate(new Pe(this.zoom+1),K,{},ma,[],va);ma=this.paintVertexArray.length;this.paintVertexArray.resize(A);this._setPaintValue(ma,
A,T,K)};Kf.prototype.updatePaintArray=function(A,K,T,ma){var va=this.expression.evaluate({zoom:this.zoom},T,ma);T=this.expression.evaluate({zoom:this.zoom+1},T,ma);this._setPaintValue(A,K,va,T)};Kf.prototype._setPaintValue=function(A,K,T,ma){if("color"===this.type)for(T=Sd(T),ma=Sd(ma);A<K;A++)this.paintVertexArray.emplace(A,T[0],T[1],ma[0],ma[1]);else{for(;A<K;A++)this.paintVertexArray.emplace(A,T,ma);this.maxValue=Math.max(this.maxValue,Math.abs(T),Math.abs(ma))}};Kf.prototype.upload=function(A){this.paintVertexArray&&
this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Kf.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};Kf.prototype.setUniform=function(A,K){K=c(this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(K.zoom):K.zoom,this.zoom,this.zoom+
1),0,1);A.set(K)};Kf.prototype.getBinding=function(A,K,T){return new kk(A,K)};var zg=function(A,K,T,ma,va,Aa){this.expression=A;this.type=K;this.useIntegerZoom=T;this.zoom=ma;this.layerId=Aa;this.zoomInPaintVertexArray=new va;this.zoomOutPaintVertexArray=new va};zg.prototype.populatePaintArray=function(A,K,T){var ma=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A);this.zoomOutPaintVertexArray.resize(A);this._setPaintValues(ma,A,K.patterns&&K.patterns[this.layerId],T)};zg.prototype.updatePaintArray=
function(A,K,T,ma,va){this._setPaintValues(A,K,T.patterns&&T.patterns[this.layerId],va)};zg.prototype._setPaintValues=function(A,K,T,ma){if(ma&&T){var va=ma[T.min],Aa=ma[T.mid];T=ma[T.max];if(va&&Aa&&T)for(;A<K;A++)this.zoomInPaintVertexArray.emplace(A,Aa.tl[0],Aa.tl[1],Aa.br[0],Aa.br[1],va.tl[0],va.tl[1],va.br[0],va.br[1],Aa.pixelRatio,va.pixelRatio),this.zoomOutPaintVertexArray.emplace(A,Aa.tl[0],Aa.tl[1],Aa.br[0],Aa.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],Aa.pixelRatio,T.pixelRatio)}};zg.prototype.upload=
function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,Vj.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,Vj.members,this.expression.isStateDependent))};zg.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();
this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var rg=function(A,K,T,ma){this.binders={};this.layoutAttributes=ma;this._buffers=[];ma=[];for(var va in A.paint._values)if(T(va)){var Aa=A.paint.get(va);if(Aa instanceof Te&&ob(Aa.property.specification)){var Ma={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],
"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[va]||[va.replace(A.type+"-","").replace(/-/g,"_")],Va=Aa.value,jb=Aa.property.specification.type,qb=Aa.property.useIntegerZoom;Aa=Aa.property.specification["property-type"];
Aa="cross-faded"===Aa||"cross-faded-data-driven"===Aa;if("constant"===Va.kind)this.binders[va]=Aa?new Th(Va.value,Ma):new cj(Va.value,Ma,jb),ma.push("/u_"+va);else if("source"===Va.kind||Aa){var zb=Ae(va,jb,"source");this.binders[va]=Aa?new zg(Va,jb,qb,K,zb,A.id):new pg(Va,Ma,jb,zb);ma.push("/a_"+va)}else Aa=Ae(va,jb,"composite"),this.binders[va]=new Kf(Va,Ma,jb,qb,K,Aa),ma.push("/z_"+va)}}this.cacheKey=ma.sort().join("")};rg.prototype.getMaxValue=function(A){A=this.binders[A];return A instanceof
pg||A instanceof Kf?A.maxValue:0};rg.prototype.populatePaintArrays=function(A,K,T,ma,va){for(var Aa in this.binders){var Ma=this.binders[Aa];(Ma instanceof pg||Ma instanceof Kf||Ma instanceof zg)&&Ma.populatePaintArray(A,K,T,ma,va)}};rg.prototype.setConstantPatternPositions=function(A,K){for(var T in this.binders){var ma=this.binders[T];ma instanceof Th&&ma.setConstantPatternPositions(A,K)}};rg.prototype.updatePaintArrays=function(A,K,T,ma,va){var Aa=!1,Ma;for(Ma in A)for(var Va=0,jb=K.getPositions(Ma);Va<
jb.length;Va+=1){var qb=jb[Va],zb=T.feature(qb.index),Hb;for(Hb in this.binders){var Ub=this.binders[Hb];(Ub instanceof pg||Ub instanceof Kf||Ub instanceof zg)&&!0===Ub.expression.isStateDependent&&(Aa=ma.paint.get(Hb),Ub.expression=Aa.value,Ub.updatePaintArray(qb.start,qb.end,zb,A[Ma],va),Aa=!0)}}return Aa};rg.prototype.defines=function(){var A=[],K;for(K in this.binders){var T=this.binders[K];(T instanceof cj||T instanceof Th)&&A.push.apply(A,T.uniformNames.map(function(ma){return"#define HAS_UNIFORM_"+
ma}))}return A};rg.prototype.getPaintVertexBuffers=function(){return this._buffers};rg.prototype.getUniforms=function(A,K){var T=[],ma;for(ma in this.binders){var va=this.binders[ma];if(va instanceof cj||va instanceof Th||va instanceof Kf)for(var Aa=0,Ma=va.uniformNames;Aa<Ma.length;Aa+=1){var Va=Ma[Aa];if(K[Va]){var jb=va.getBinding(A,K[Va],Va);T.push({name:Va,property:ma,binding:jb})}}}return T};rg.prototype.setUniforms=function(A,K,T,ma){for(A=0;A<K.length;A+=1){var va=K[A],Aa=va.name,Ma=va.property;
this.binders[Ma].setUniform(va.binding,ma,T.get(Ma),Aa)}};rg.prototype.updatePaintBuffers=function(A){for(var K in this._buffers=[],this.binders){var T=this.binders[K];A&&T instanceof zg?(T=2===A.fromScale?T.zoomInPaintVertexBuffer:T.zoomOutPaintVertexBuffer)&&this._buffers.push(T):(T instanceof pg||T instanceof Kf)&&T.paintVertexBuffer&&this._buffers.push(T.paintVertexBuffer)}};rg.prototype.upload=function(A){for(var K in this.binders){var T=this.binders[K];(T instanceof pg||T instanceof Kf||T instanceof
zg)&&T.upload(A)}this.updatePaintBuffers()};rg.prototype.destroy=function(){for(var A in this.binders){var K=this.binders[A];(K instanceof pg||K instanceof Kf||K instanceof zg)&&K.destroy()}};var Cg=function(A,K,T,ma){void 0===ma&&(ma=function(){return!0});this.programConfigurations={};for(var va=0;va<K.length;va+=1){var Aa=K[va];this.programConfigurations[Aa.id]=new rg(Aa,T,ma,A)}this.needsUpload=!1;this._featureMap=new vh;this._bufferOffset=0};Cg.prototype.populatePaintArrays=function(A,K,T,ma,
va,Aa){for(var Ma in this.programConfigurations)this.programConfigurations[Ma].populatePaintArrays(A,K,ma,va,Aa);void 0!==K.id&&this._featureMap.add(K.id,T,this._bufferOffset,A);this._bufferOffset=A;this.needsUpload=!0};Cg.prototype.updatePaintArrays=function(A,K,T,ma){for(var va=0;va<T.length;va+=1){var Aa=T[va];this.needsUpload=this.programConfigurations[Aa.id].updatePaintArrays(A,this._featureMap,K,Aa,ma)||this.needsUpload}};Cg.prototype.get=function(A){return this.programConfigurations[A]};Cg.prototype.upload=
function(A){if(this.needsUpload){for(var K in this.programConfigurations)this.programConfigurations[K].upload(A);this.needsUpload=!1}};Cg.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()};Jc("ConstantBinder",cj);Jc("CrossFadedConstantBinder",Th);Jc("SourceExpressionBinder",pg);Jc("CrossFadedCompositeBinder",zg);Jc("CompositeExpressionBinder",Kf);Jc("ProgramConfiguration",rg,{omit:["_buffers"]});Jc("ProgramConfigurationSet",Cg);var ei={min:-1*
Math.pow(2,14),max:Math.pow(2,14)-1},eh=function(A){this.zoom=A.zoom;this.overscaling=A.overscaling;this.layers=A.layers;this.layerIds=this.layers.map(function(K){return K.id});this.index=A.index;this.hasPattern=!1;this.layoutVertexArray=new lh;this.indexArray=new qh;this.segments=new mf;this.programConfigurations=new Cg(mi,A.layers,A.zoom);this.stateDependentLayerIds=this.layers.filter(function(K){return K.isStateDependent()}).map(function(K){return K.id})};eh.prototype.populate=function(A,K,T){var ma=
this.layers[0],va=[],Aa=null;"circle"===ma.type&&(Aa=ma.layout.get("circle-sort-key"));for(ma=0;ma<A.length;ma+=1){var Ma=A[ma],Va=Ma.feature,jb=Ma.id,qb=Ma.index;Ma=Ma.sourceLayerIndex;var zb=this.layers[0]._featureFilter.needGeometry,Hb={type:Va.type,id:jb,properties:Va.properties,geometry:zb?Xd(Va):[]};this.layers[0]._featureFilter.filter(new Pe(this.zoom),Hb,T)&&(zb||(Hb.geometry=Xd(Va)),zb=Aa?Aa.evaluate(Hb,{},T):void 0,va.push({id:jb,properties:Va.properties,type:Va.type,sourceLayerIndex:Ma,
index:qb,geometry:Hb.geometry,patterns:{},sortKey:zb}))}Aa&&va.sort(function(Ub,Sb){return Ub.sortKey-Sb.sortKey});for(Aa=0;Aa<va.length;Aa+=1)ma=va[Aa],Va=ma.geometry,jb=ma.index,qb=ma.sourceLayerIndex,Ma=A[jb].feature,this.addFeature(ma,Va,jb,T),K.featureIndex.insert(Ma,Va,jb,qb,this.index)};eh.prototype.update=function(A,K,T){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,K,this.stateDependentLayers,T)};eh.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};
eh.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};eh.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,mi),this.indexBuffer=A.createIndexBuffer(this.indexArray));this.programConfigurations.upload(A);this.uploaded=!0};eh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};
eh.prototype.addFeature=function(A,K,T,ma){for(var va=0;va<K.length;va+=1)for(var Aa=0,Ma=K[va];Aa<Ma.length;Aa+=1){var Va=Ma[Aa],jb=Va.x;Va=Va.y;if(!(0>jb||8192<=jb||0>Va||8192<=Va)){var qb=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),zb=qb.vertexLength;sf(this.layoutVertexArray,jb,Va,-1,-1);sf(this.layoutVertexArray,jb,Va,1,-1);sf(this.layoutVertexArray,jb,Va,1,1);sf(this.layoutVertexArray,jb,Va,-1,1);this.indexArray.emplaceBack(zb,zb+1,zb+2);this.indexArray.emplaceBack(zb,
zb+3,zb+2);qb.vertexLength+=4;qb.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,T,{},ma)};Jc("CircleBucket",eh,{omit:["layers"]});var lk=new Zf({"circle-sort-key":new Kd(Ib.layout_circle["circle-sort-key"])}),Fk={paint:new Zf({"circle-radius":new Kd(Ib.paint_circle["circle-radius"]),"circle-color":new Kd(Ib.paint_circle["circle-color"]),"circle-blur":new Kd(Ib.paint_circle["circle-blur"]),"circle-opacity":new Kd(Ib.paint_circle["circle-opacity"]),
"circle-translate":new Vd(Ib.paint_circle["circle-translate"]),"circle-translate-anchor":new Vd(Ib.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Vd(Ib.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Vd(Ib.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Kd(Ib.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Kd(Ib.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Kd(Ib.paint_circle["circle-stroke-opacity"])}),layout:lk},
Wf="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var A=arguments,K=0,T=arguments.length;T--;)K+=A[T]*A[T];return Math.sqrt(K)});var ek=new Wf(3);Wf!=Float32Array&&(ek[0]=0,ek[1]=0,ek[2]=0);(function(){var A=new Wf(4);Wf!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0)})();var Uh=(function(){var A=new Wf(2);Wf!=Float32Array&&(A[0]=0,A[1]=0)}(),function(A){function K(T){A.call(this,T,Fk)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=
K,K.prototype.createBucket=function(T){return new eh(T)},K.prototype.queryRadius=function(T){return Fb("circle-radius",this,T)+Fb("circle-stroke-width",this,T)+Wb(this.paint.get("circle-translate"))},K.prototype.queryIntersectsFeature=function(T,ma,va,Aa,Ma,Va,jb,qb){T=lc(T,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Va.angle,jb);Ma=this.paint.get("circle-radius").evaluate(ma,va)+this.paint.get("circle-stroke-width").evaluate(ma,va);va=(ma="map"===this.paint.get("circle-pitch-alignment"))?
T:function($b,bc){return $b.map(function(Ec){return Ab(Ec,bc)})}(T,qb);jb=ma?Ma*jb:Ma;for(T=0;T<Aa.length;T+=1){Ma=0;for(var zb=Aa[T];Ma<zb.length;Ma+=1){var Hb=zb[Ma],Ub=ma?Hb:Ab(Hb,qb),Sb=jb;Hb=Qc([],[Hb.x,Hb.y,0,1],qb);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Sb*=Hb[3]/Va.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Sb*=Va.cameraToCenterDistance/Hb[3]),tf(va,
Ub,Sb))return!0}}return!1},K}(Fg)),Ok=function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K}(eh);Jc("HeatmapBucket",Ok,{omit:["layers"]});var fh=function(A,K){Nb(this,A,1,K)};fh.prototype.resize=function(A){ec(this,A,1)};fh.prototype.clone=function(){return new fh({width:this.width,height:this.height},new Uint8Array(this.data))};fh.copy=function(A,K,T,ma,va){xc(A,K,T,ma,va,1)};var Mf=function(A,K){Nb(this,A,4,K)};Mf.prototype.resize=
function(A){ec(this,A,4)};Mf.prototype.replace=function(A,K){K?this.data.set(A):this.data=A instanceof Uint8ClampedArray?new Uint8Array(A.buffer):A};Mf.prototype.clone=function(){return new Mf({width:this.width,height:this.height},new Uint8Array(this.data))};Mf.copy=function(A,K,T,ma,va){xc(A,K,T,ma,va,4)};Jc("AlphaImage",fh);Jc("RGBAImage",Mf);var gk={paint:new Zf({"heatmap-radius":new Kd(Ib.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Kd(Ib.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Vd(Ib.paint_heatmap["heatmap-intensity"]),
"heatmap-color":new $h(Ib.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Vd(Ib.paint_heatmap["heatmap-opacity"])})},nf=function(A){function K(T){A.call(this,T,gk);this._updateColorRamp()}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.createBucket=function(T){return new Ok(T)},K.prototype._handleSpecialPaintPropertyUpdate=function(T){"heatmap-color"===T&&this._updateColorRamp()},K.prototype._updateColorRamp=function(){this.colorRamp=yc(this._transitionablePaint._values["heatmap-color"].value.expression,
"heatmapDensity");this.colorRampTexture=null},K.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},K.prototype.queryRadius=function(){return 0},K.prototype.queryIntersectsFeature=function(){return!1},K.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},K}(Fg),cl={paint:new Zf({"hillshade-illumination-direction":new Vd(Ib.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Vd(Ib.paint_hillshade["hillshade-illumination-anchor"]),
"hillshade-exaggeration":new Vd(Ib.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Vd(Ib.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Vd(Ib.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Vd(Ib.paint_hillshade["hillshade-accent-color"])})},Ai=function(A){function K(T){A.call(this,T,cl)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.hasOffscreenPass=function(){return 0!==
this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},K}(Fg),Fj=Hd([{name:"a_pos",components:2,type:"Int16"}],4).members;Gc.deviation=function(A,K,T,ma){var va=K&&K.length,Aa=Math.abs(ih(A,0,va?K[0]*T:A.length,T));if(va){va=0;for(var Ma=K.length;va<Ma;va++)Aa-=Math.abs(ih(A,K[va]*T,va<Ma-1?K[va+1]*T:A.length,T))}for(va=K=0;va<ma.length;va+=3){Ma=ma[va]*T;var Va=ma[va+1]*T,jb=ma[va+2]*T;K+=Math.abs((A[Ma]-A[jb])*(A[Va+1]-A[Ma+1])-(A[Ma]-A[Va])*(A[jb+1]-A[Ma+1]))}return 0===Aa&&0===K?
0:Math.abs((K-Aa)/Aa)};Gc.flatten=function(A){for(var K=A[0][0].length,T={vertices:[],holes:[],dimensions:K},ma=0,va=0;va<A.length;va++){for(var Aa=0;Aa<A[va].length;Aa++)for(var Ma=0;Ma<K;Ma++)T.vertices.push(A[va][Aa][Ma]);0<va&&T.holes.push(ma+=A[va-1].length)}return T};Gc.default=Gc;var Dg=function(A){this.zoom=A.zoom;this.overscaling=A.overscaling;this.layers=A.layers;this.layerIds=this.layers.map(function(K){return K.id});this.index=A.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=
new lh;this.indexArray=new qh;this.indexArray2=new ai;this.programConfigurations=new Cg(Fj,A.layers,A.zoom);this.segments=new mf;this.segments2=new mf;this.stateDependentLayerIds=this.layers.filter(function(K){return K.isStateDependent()}).map(function(K){return K.id})};Dg.prototype.populate=function(A,K,T){this.hasPattern=Pi("fill",this.layers,K);for(var ma=this.layers[0].layout.get("fill-sort-key"),va=[],Aa=0;Aa<A.length;Aa+=1){var Ma=A[Aa],Va=Ma.feature,jb=Ma.id,qb=Ma.index;Ma=Ma.sourceLayerIndex;
var zb=this.layers[0]._featureFilter.needGeometry,Hb={type:Va.type,id:jb,properties:Va.properties,geometry:zb?Xd(Va):[]};this.layers[0]._featureFilter.filter(new Pe(this.zoom),Hb,T)&&(zb||(Hb.geometry=Xd(Va)),zb=ma?ma.evaluate(Hb,{},T,K.availableImages):void 0,va.push({id:jb,properties:Va.properties,type:Va.type,sourceLayerIndex:Ma,index:qb,geometry:Hb.geometry,patterns:{},sortKey:zb}))}ma&&va.sort(function(Ub,Sb){return Ub.sortKey-Sb.sortKey});for(ma=0;ma<va.length;ma+=1)qb=va[ma],Aa=qb.geometry,
Va=qb.index,jb=qb.sourceLayerIndex,this.hasPattern?(qb=Qi("fill",this.layers,qb,this.zoom,K),this.patternFeatures.push(qb)):this.addFeature(qb,Aa,Va,T,{}),K.featureIndex.insert(A[Va].feature,Aa,Va,jb,this.index)};Dg.prototype.update=function(A,K,T){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,K,this.stateDependentLayers,T)};Dg.prototype.addFeatures=function(A,K,T){A=0;for(var ma=this.patternFeatures;A<ma.length;A+=1){var va=ma[A];this.addFeature(va,va.geometry,
va.index,K,T)}};Dg.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Dg.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Dg.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Fj),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(A);this.uploaded=!0};Dg.prototype.destroy=function(){this.layoutVertexBuffer&&
(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};Dg.prototype.addFeature=function(A,K,T,ma,va){var Aa=0;for(K=Oi(K,500);Aa<K.length;Aa+=1){for(var Ma=K[Aa],Va=0,jb=0,qb=Ma;jb<qb.length;jb+=1)Va+=qb[jb].length;jb=this.segments.prepareSegment(Va,this.layoutVertexArray,this.indexArray);qb=jb.vertexLength;for(var zb=[],Hb=[],Ub=0,Sb=Ma;Ub<Sb.length;Ub+=1){var $b=Sb[Ub];if(0!==
$b.length){$b!==Ma[0]&&Hb.push(zb.length/2);var bc=this.segments2.prepareSegment($b.length,this.layoutVertexArray,this.indexArray2),Ec=bc.vertexLength;this.layoutVertexArray.emplaceBack($b[0].x,$b[0].y);this.indexArray2.emplaceBack(Ec+$b.length-1,Ec);zb.push($b[0].x);zb.push($b[0].y);for(var ld=1;ld<$b.length;ld++)this.layoutVertexArray.emplaceBack($b[ld].x,$b[ld].y),this.indexArray2.emplaceBack(Ec+ld-1,Ec+ld),zb.push($b[ld].x),zb.push($b[ld].y);bc.vertexLength+=$b.length;bc.primitiveLength+=$b.length}}Ma=
Gc(zb,Hb);for(zb=0;zb<Ma.length;zb+=3)this.indexArray.emplaceBack(qb+Ma[zb],qb+Ma[zb+1],qb+Ma[zb+2]);jb.vertexLength+=Va;jb.primitiveLength+=Ma.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,T,va,ma)};Jc("FillBucket",Dg,{omit:["layers","patternFeatures"]});var tl=new Zf({"fill-sort-key":new Kd(Ib.layout_fill["fill-sort-key"])}),ul={paint:new Zf({"fill-antialias":new Vd(Ib.paint_fill["fill-antialias"]),"fill-opacity":new Kd(Ib.paint_fill["fill-opacity"]),"fill-color":new Kd(Ib.paint_fill["fill-color"]),
"fill-outline-color":new Kd(Ib.paint_fill["fill-outline-color"]),"fill-translate":new Vd(Ib.paint_fill["fill-translate"]),"fill-translate-anchor":new Vd(Ib.paint_fill["fill-translate-anchor"]),"fill-pattern":new jj(Ib.paint_fill["fill-pattern"])}),layout:tl},Pk=function(A){function K(T){A.call(this,T,ul)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.recalculate=function(T,ma){A.prototype.recalculate.call(this,T,ma);T=this.paint._values["fill-outline-color"];
"constant"===T.value.kind&&void 0===T.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},K.prototype.createBucket=function(T){return new Dg(T)},K.prototype.queryRadius=function(){return Wb(this.paint.get("fill-translate"))},K.prototype.queryIntersectsFeature=function(T,ma,va,Aa,Ma,Va,jb){return $e(lc(T,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Va.angle,jb),Aa)},K.prototype.isTileClipped=function(){return!0},K}(Fg),mk=Hd([{name:"a_pos",
components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;Vg.types=["Unknown","Point","LineString","Polygon"];Vg.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var K,T=A.readVarint()+A.pos,ma=1,va=0,Aa=0,Ma=0,Va=[];A.pos<T;)if(0>=va&&(va=A.readVarint(),ma=7&va,va>>=3),va--,1===ma||2===ma)Aa+=A.readSVarint(),Ma+=A.readSVarint(),1===ma&&(K&&Va.push(K),K=[]),K.push(new pe(Aa,Ma));else{if(7!==ma)throw Error("unknown command "+ma);K&&K.push(K[0].clone())}return K&&
Va.push(K),Va};Vg.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var K=A.readVarint()+A.pos,T=1,ma=0,va=0,Aa=0,Ma=1/0,Va=-1/0,jb=1/0,qb=-1/0;A.pos<K;)if(0>=ma&&(ma=A.readVarint(),T=7&ma,ma>>=3),ma--,1===T||2===T)(va+=A.readSVarint())<Ma&&(Ma=va),va>Va&&(Va=va),(Aa+=A.readSVarint())<jb&&(jb=Aa),Aa>qb&&(qb=Aa);else if(7!==T)throw Error("unknown command "+T);return[Ma,jb,Va,qb]};Vg.prototype.toGeoJSON=function(A,K,T){function ma(jb){for(var qb=0;qb<jb.length;qb++){var zb=jb[qb];jb[qb]=
[360*(zb.x+Aa)/va-180,360/Math.PI*Math.atan(Math.exp((180-360*(zb.y+Ma)/va)*Math.PI/180))-90]}}var va=this.extent*Math.pow(2,T),Aa=this.extent*A,Ma=this.extent*K;K=this.loadGeometry();T=Vg.types[this.type];switch(this.type){case 1:var Va=[];for(A=0;A<K.length;A++)Va[A]=K[A][0];ma(K=Va);break;case 2:for(A=0;A<K.length;A++)ma(K[A]);break;case 3:for(K=function(jb){var qb=jb.length;if(1>=qb)return[jb];for(var zb,Hb,Ub=[],Sb=0;Sb<qb;Sb++){for(var $b,bc=$b=void 0,Ec=jb[Sb],ld=0,pd=0,bd=Ec.length,Ad=bd-
1;pd<bd;Ad=pd++)ld+=(($b=Ec[Ad]).x-(bc=Ec[pd]).x)*(bc.y+$b.y);$b=ld;0!==$b&&(void 0===Hb&&(Hb=0>$b),Hb===0>$b?(zb&&Ub.push(zb),zb=[jb[Sb]]):zb.push(jb[Sb]))}return zb&&Ub.push(zb),Ub}(K),A=0;A<K.length;A++)for(Va=0;Va<K[A].length;Va++)ma(K[A][Va])}1===K.length?K=K[0]:T="Multi"+T;A={type:"Feature",geometry:{type:T,coordinates:K},properties:this.properties};return"id"in this&&(A.id=this.id),A};var Qk=rh;rh.prototype.feature=function(A){if(0>A||A>=this._features.length)throw Error("feature index out of bounds");
this._pbf.pos=this._features[A];A=this._pbf.readVarint()+this._pbf.pos;return new Vg(this._pbf,A,this.extent,this._keys,this._values)};var Di={VectorTile:function(A,K){this.layers=A.readFields(zk,{},K)},VectorTileFeature:Vg,VectorTileLayer:Qk},fk=Di.VectorTileFeature.types,Gj=Math.pow(2,13),Ng=function(A){this.zoom=A.zoom;this.overscaling=A.overscaling;this.layers=A.layers;this.layerIds=this.layers.map(function(K){return K.id});this.index=A.index;this.hasPattern=!1;this.layoutVertexArray=new mh;this.indexArray=
new qh;this.programConfigurations=new Cg(mk,A.layers,A.zoom);this.segments=new mf;this.stateDependentLayerIds=this.layers.filter(function(K){return K.isStateDependent()}).map(function(K){return K.id})};Ng.prototype.populate=function(A,K,T){this.features=[];this.hasPattern=Pi("fill-extrusion",this.layers,K);for(var ma=0;ma<A.length;ma+=1){var va=A[ma],Aa=va.feature,Ma=va.id,Va=va.index;va=va.sourceLayerIndex;var jb=this.layers[0]._featureFilter.needGeometry,qb={type:Aa.type,id:Ma,properties:Aa.properties,
geometry:jb?Xd(Aa):[]};this.layers[0]._featureFilter.filter(new Pe(this.zoom),qb,T)&&(Ma={id:Ma,sourceLayerIndex:va,index:Va,geometry:jb?qb.geometry:Xd(Aa),properties:Aa.properties,type:Aa.type,patterns:{}},void 0!==Aa.id&&(Ma.id=Aa.id),this.hasPattern?this.features.push(Qi("fill-extrusion",this.layers,Ma,this.zoom,K)):this.addFeature(Ma,Ma.geometry,Va,T,{}),K.featureIndex.insert(Aa,Ma.geometry,Va,va,this.index,!0))}};Ng.prototype.addFeatures=function(A,K,T){A=0;for(var ma=this.features;A<ma.length;A+=
1){var va=ma[A];this.addFeature(va,va.geometry,va.index,K,T)}};Ng.prototype.update=function(A,K,T){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,K,this.stateDependentLayers,T)};Ng.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Ng.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Ng.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,
mk),this.indexBuffer=A.createIndexBuffer(this.indexArray));this.programConfigurations.upload(A);this.uploaded=!0};Ng.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Ng.prototype.addFeature=function(A,K,T,ma,va){var Aa=0;for(K=Oi(K,500);Aa<K.length;Aa+=1){for(var Ma=K[Aa],Va=0,jb=0,qb=Ma;jb<qb.length;jb+=1)Va+=qb[jb].length;jb=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray);qb=0;for(var zb=Ma;qb<zb.length;qb+=1){var Hb=zb[qb];if(0!==Hb.length&&!((pd=Hb).every(function(bd){return 0>bd.x})||pd.every(function(bd){return 8192<bd.x})||pd.every(function(bd){return 0>bd.y})||pd.every(function(bd){return 8192<bd.y})))for(var Ub=0,Sb=0;Sb<Hb.length;Sb++){var $b=Hb[Sb];if(1<=Sb){var bc=Hb[Sb-1];if(!($b.x===bc.x&&(0>$b.x||8192<$b.x)||$b.y===bc.y&&(0>$b.y||8192<$b.y))){jb.vertexLength+4>mf.MAX_VERTEX_ARRAY_LENGTH&&(jb=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray));var Ec=$b.sub(bc)._perp()._unit(),ld=bc.dist($b);32768<Ub+ld&&(Ub=0);Ih(this.layoutVertexArray,$b.x,$b.y,Ec.x,Ec.y,0,0,Ub);Ih(this.layoutVertexArray,$b.x,$b.y,Ec.x,Ec.y,0,1,Ub);Ih(this.layoutVertexArray,bc.x,bc.y,Ec.x,Ec.y,0,0,Ub+=ld);Ih(this.layoutVertexArray,bc.x,bc.y,Ec.x,Ec.y,0,1,Ub);$b=jb.vertexLength;this.indexArray.emplaceBack($b,$b+2,$b+1);this.indexArray.emplaceBack($b+1,$b+2,$b+3);jb.vertexLength+=4;jb.primitiveLength+=2}}}}if(jb.vertexLength+Va>mf.MAX_VERTEX_ARRAY_LENGTH&&
(jb=this.segments.prepareSegment(Va,this.layoutVertexArray,this.indexArray)),"Polygon"===fk[A.type]){zb=[];Hb=[];qb=jb.vertexLength;Ub=0;for(Sb=Ma;Ub<Sb.length;Ub+=1)if($b=Sb[Ub],0!==$b.length)for($b!==Ma[0]&&Hb.push(zb.length/2),bc=0;bc<$b.length;bc++)Ec=$b[bc],Ih(this.layoutVertexArray,Ec.x,Ec.y,0,0,1,1,0),zb.push(Ec.x),zb.push(Ec.y);Ma=Gc(zb,Hb);for(zb=0;zb<Ma.length;zb+=3)this.indexArray.emplaceBack(qb+Ma[zb],qb+Ma[zb+2],qb+Ma[zb+1]);jb.primitiveLength+=Ma.length/3;jb.vertexLength+=Va}}var pd;
this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,T,va,ma)};Jc("FillExtrusionBucket",Ng,{omit:["layers","features"]});var nl={paint:new Zf({"fill-extrusion-opacity":new Vd(Ib["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Kd(Ib["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Vd(Ib["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Vd(Ib["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),
"fill-extrusion-pattern":new jj(Ib["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Kd(Ib["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Kd(Ib["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Vd(Ib["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},dl=function(A){function K(T){A.call(this,T,nl)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.createBucket=
function(T){return new Ng(T)},K.prototype.queryRadius=function(){return Wb(this.paint.get("fill-extrusion-translate"))},K.prototype.is3D=function(){return!0},K.prototype.queryIntersectsFeature=function(T,ma,va,Aa,Ma,Va,jb,qb){Ma=lc(T,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Va.angle,jb);T=this.paint.get("fill-extrusion-height").evaluate(ma,va);ma=this.paint.get("fill-extrusion-base").evaluate(ma,va);va=function(zb,Hb,Ub,Sb){Ub=[];for(Sb=0;Sb<zb.length;Sb+=
1){var $b=zb[Sb];$b=[$b.x,$b.y,0,1];Qc($b,$b,Hb);Ub.push(new pe($b[0]/$b[3],$b[1]/$b[3]))}return Ub}(Ma,qb);Aa=function(zb,Hb,Ub,Sb){var $b=[],bc=[],Ec=Sb[8]*Hb,ld=Sb[9]*Hb,pd=Sb[10]*Hb;Hb*=Sb[11];var bd=Sb[8]*Ub,Ad=Sb[9]*Ub,zd=Sb[10]*Ub;Ub*=Sb[11];for(var Cd=0;Cd<zb.length;Cd+=1){for(var Od=[],Ud=[],ce=0,ee=zb[Cd];ce<ee.length;ce+=1){var Td=ee[ce],Yd=Td.x,se=Td.y;Td=Sb[0]*Yd+Sb[4]*se+Sb[12];var Pd=Sb[1]*Yd+Sb[5]*se+Sb[13],Gd=Sb[2]*Yd+Sb[6]*se+Sb[14],Rd=Sb[3]*Yd+Sb[7]*se+Sb[15];Yd=Gd+pd;se=Rd+Hb;
var xe=Td+bd,Ve=Pd+Ad;Gd+=zd;Rd+=Ub;Td=new pe((Td+Ec)/se,(Pd+ld)/se);Td.z=Yd/se;Od.push(Td);Td=new pe(xe/Rd,Ve/Rd);Td.z=Gd/Rd;Ud.push(Td)}$b.push(Od);bc.push(Ud)}return[$b,bc]}(Aa,ma,T,qb);return function(zb,Hb,Ub){var Sb=1/0;$e(Ub,Hb)&&(Sb=Wj(Ub,Hb[0]));for(var $b=0;$b<Hb.length;$b++)for(var bc=Hb[$b],Ec=zb[$b],ld=0;ld<bc.length-1;ld++){var pd=bc[ld];pd=[pd,bc[ld+1],Ec[ld+1],Ec[ld],pd];Re(Ub,pd)&&(Sb=Math.min(Sb,Wj(Ub,pd)))}return Sb!==1/0&&Sb}(Aa[0],Aa[1],va)},K}(Fg),el=Hd([{name:"a_pos_normal",
components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,S=Di.VectorTileFeature.types,la=Math.cos(Math.PI/180*37.5),wa=Math.pow(2,14)/.5,Ba=function(A){this.zoom=A.zoom;this.overscaling=A.overscaling;this.layers=A.layers;this.layerIds=this.layers.map(function(K){return K.id});this.index=A.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new nh;this.indexArray=new qh;this.programConfigurations=new Cg(el,A.layers,A.zoom);this.segments=new mf;this.stateDependentLayerIds=
this.layers.filter(function(K){return K.isStateDependent()}).map(function(K){return K.id})};Ba.prototype.populate=function(A,K,T){this.hasPattern=Pi("line",this.layers,K);for(var ma=this.layers[0].layout.get("line-sort-key"),va=[],Aa=0;Aa<A.length;Aa+=1){var Ma=A[Aa],Va=Ma.feature,jb=Ma.id,qb=Ma.index;Ma=Ma.sourceLayerIndex;var zb=this.layers[0]._featureFilter.needGeometry,Hb={type:Va.type,id:jb,properties:Va.properties,geometry:zb?Xd(Va):[]};this.layers[0]._featureFilter.filter(new Pe(this.zoom),
Hb,T)&&(zb||(Hb.geometry=Xd(Va)),zb=ma?ma.evaluate(Hb,{},T):void 0,va.push({id:jb,properties:Va.properties,type:Va.type,sourceLayerIndex:Ma,index:qb,geometry:Hb.geometry,patterns:{},sortKey:zb}))}ma&&va.sort(function(Ub,Sb){return Ub.sortKey-Sb.sortKey});for(ma=0;ma<va.length;ma+=1)qb=va[ma],Aa=qb.geometry,Va=qb.index,jb=qb.sourceLayerIndex,this.hasPattern?(qb=Qi("line",this.layers,qb,this.zoom,K),this.patternFeatures.push(qb)):this.addFeature(qb,Aa,Va,T,{}),K.featureIndex.insert(A[Va].feature,Aa,
Va,jb,this.index)};Ba.prototype.update=function(A,K,T){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,K,this.stateDependentLayers,T)};Ba.prototype.addFeatures=function(A,K,T){A=0;for(var ma=this.patternFeatures;A<ma.length;A+=1){var va=ma[A];this.addFeature(va,va.geometry,va.index,K,T)}};Ba.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Ba.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Ba.prototype.upload=
function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,el),this.indexBuffer=A.createIndexBuffer(this.indexArray));this.programConfigurations.upload(A);this.uploaded=!0};Ba.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Ba.prototype.addFeature=function(A,K,T,ma,va){var Aa=this.layers[0].layout,Ma=Aa.get("line-join").evaluate(A,
{}),Va=Aa.get("line-cap"),jb=Aa.get("line-miter-limit");Aa=Aa.get("line-round-limit");for(var qb=0;qb<K.length;qb+=1)this.addLine(K[qb],A,Ma,Va,jb,Aa);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,T,va,ma)};Ba.prototype.addLine=function(A,K,T,ma,va,Aa){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,K.properties&&K.properties.hasOwnProperty("mapbox_clip_start")&&K.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+K.properties.mapbox_clip_start;
this.clipEnd=+K.properties.mapbox_clip_end;for(var Ma=0;Ma<A.length-1;Ma++)this.totalDistance+=A[Ma].dist(A[Ma+1]);this.updateScaledDistance()}K="Polygon"===S[K.type];for(Ma=A.length;2<=Ma&&A[Ma-1].equals(A[Ma-2]);)Ma--;for(var Va=0;Va<Ma-1&&A[Va].equals(A[Va+1]);)Va++;if(!(Ma<(K?3:2))){"bevel"===T&&(va=1.05);var jb,qb=16>=this.overscaling?122880/(512*this.overscaling):0,zb=this.segments.prepareSegment(10*Ma,this.layoutVertexArray,this.indexArray),Hb=void 0,Ub=void 0,Sb=void 0,$b=void 0;this.e1=this.e2=
-1;K&&($b=A[Va].sub(jb=A[Ma-2])._unit()._perp());for(var bc=Va;bc<Ma;bc++)if(!(Ub=bc===Ma-1?K?A[Va+1]:void 0:A[bc+1])||!A[bc].equals(Ub)){$b&&(Sb=$b);jb&&(Hb=jb);jb=A[bc];$b=Ub?Ub.sub(jb)._unit()._perp():Sb;var Ec=(Sb=Sb||$b).add($b);0===Ec.x&&0===Ec.y||Ec._unit();var ld=Sb.x*$b.x+Sb.y*$b.y,pd=Ec.x*$b.x+Ec.y*$b.y,bd=0!==pd?1/pd:1/0,Ad=2*Math.sqrt(2-2*pd);pd=pd<la&&Hb&&Ub;var zd=0<Sb.x*$b.y-Sb.y*$b.x;if(pd&&bc>Va){var Cd=jb.dist(Hb);Cd>2*qb&&(Cd=jb.sub(jb.sub(Hb)._mult(qb/Cd)._round()),this.updateDistance(Hb,
Cd),this.addCurrentVertex(Cd,Sb,0,0,zb),Hb=Cd)}var Od=Hb&&Ub;Cd=Od?T:K?"butt":ma;if(Od&&"round"===Cd&&(bd<Aa?Cd="miter":2>=bd&&(Cd="fakeround")),"miter"===Cd&&bd>va&&(Cd="bevel"),"bevel"===Cd&&(2<bd&&(Cd="flipbevel"),bd<va&&(Cd="miter")),Hb&&this.updateDistance(Hb,jb),"miter"===Cd)Ec._mult(bd),this.addCurrentVertex(jb,Ec,0,0,zb);else if("flipbevel"===Cd)100<bd?Ec=$b.mult(-1):(ld=bd*Sb.add($b).mag()/Sb.sub($b).mag(),Ec._perp()._mult(ld*(zd?-1:1))),this.addCurrentVertex(jb,Ec,0,0,zb),this.addCurrentVertex(jb,
Ec.mult(-1),0,0,zb);else if("bevel"===Cd||"fakeround"===Cd){bd=-Math.sqrt(bd*bd-1);Ec=zd?bd:0;bd=zd?0:bd;if(Hb&&this.addCurrentVertex(jb,Sb,Ec,bd,zb),"fakeround"===Cd)for(Ad=Math.round(180*Ad/Math.PI/20),Cd=1;Cd<Ad;Cd++){Od=Cd/Ad;if(.5!==Od){var Ud=Od-.5;Od+=Od*Ud*(Od-1)*((1.0904+ld*(ld*(3.55645-1.43519*ld)-3.2452))*Ud*Ud+(.848013+ld*(.215638*ld-1.06021)))}Od=$b.sub(Sb)._mult(Od)._add(Sb)._unit()._mult(zd?-1:1);this.addHalfVertex(jb,Od.x,Od.y,!1,zd,0,zb)}Ub&&this.addCurrentVertex(jb,$b,-Ec,-bd,zb)}else"butt"===
Cd?this.addCurrentVertex(jb,Ec,0,0,zb):"square"===Cd?(ld=Hb?1:-1,this.addCurrentVertex(jb,Ec,ld,ld,zb)):"round"===Cd&&(Hb&&(this.addCurrentVertex(jb,Sb,0,0,zb),this.addCurrentVertex(jb,Sb,1,1,zb,!0)),Ub&&(this.addCurrentVertex(jb,$b,-1,-1,zb,!0),this.addCurrentVertex(jb,$b,0,0,zb)));pd&&bc<Ma-1&&(pd=jb.dist(Ub),pd>2*qb&&(pd=jb.add(Ub.sub(jb)._mult(qb/pd)._round()),this.updateDistance(jb,pd),this.addCurrentVertex(pd,$b,0,0,zb),jb=pd))}}};Ba.prototype.addCurrentVertex=function(A,K,T,ma,va,Aa){void 0===
Aa&&(Aa=!1);var Ma=K.y*ma-K.x,Va=-K.y-K.x*ma;this.addHalfVertex(A,K.x+K.y*T,K.y-K.x*T,Aa,!1,T,va);this.addHalfVertex(A,Ma,Va,Aa,!0,-ma,va);this.distance>wa/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(A,K,T,ma,va,Aa))};Ba.prototype.addHalfVertex=function(A,K,T,ma,va,Aa,Ma){var Va=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((A.x<<1)+(ma?1:0),(A.y<<1)+(va?1:0),Math.round(63*K)+128,Math.round(63*T)+128,1+(0===Aa?0:0>Aa?-1:1)|(63&Va)<<2,Va>>6);A=Ma.vertexLength++;0<=
this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,A),Ma.primitiveLength++);va?this.e2=A:this.e1=A};Ba.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(wa-1):this.distance};Ba.prototype.updateDistance=function(A,K){this.distance+=A.dist(K);this.updateScaledDistance()};Jc("LineBucket",Ba,{omit:["layers","patternFeatures"]});var Ga=new Zf({"line-cap":new Vd(Ib.layout_line["line-cap"]),
"line-join":new Kd(Ib.layout_line["line-join"]),"line-miter-limit":new Vd(Ib.layout_line["line-miter-limit"]),"line-round-limit":new Vd(Ib.layout_line["line-round-limit"]),"line-sort-key":new Kd(Ib.layout_line["line-sort-key"])}),Ka={paint:new Zf({"line-opacity":new Kd(Ib.paint_line["line-opacity"]),"line-color":new Kd(Ib.paint_line["line-color"]),"line-translate":new Vd(Ib.paint_line["line-translate"]),"line-translate-anchor":new Vd(Ib.paint_line["line-translate-anchor"]),"line-width":new Kd(Ib.paint_line["line-width"]),
"line-gap-width":new Kd(Ib.paint_line["line-gap-width"]),"line-offset":new Kd(Ib.paint_line["line-offset"]),"line-blur":new Kd(Ib.paint_line["line-blur"]),"line-dasharray":new Ci(Ib.paint_line["line-dasharray"]),"line-pattern":new jj(Ib.paint_line["line-pattern"]),"line-gradient":new $h(Ib.paint_line["line-gradient"])}),layout:Ga},$a=new (function(A){function K(){A.apply(this,arguments)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.possiblyEvaluate=
function(T,ma){return ma=new Pe(Math.floor(ma.zoom),{now:ma.now,fadeDuration:ma.fadeDuration,zoomHistory:ma.zoomHistory,transition:ma.transition}),A.prototype.possiblyEvaluate.call(this,T,ma)},K.prototype.evaluate=function(T,ma,va,Aa){return ma=d({},ma,{zoom:Math.floor(ma.zoom)}),A.prototype.evaluate.call(this,T,ma,va,Aa)},K}(Kd))(Ka.paint.properties["line-width"].specification);$a.useIntegerZoom=!0;var Sa=function(A){function K(T){A.call(this,T,Ka)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&
A.prototype)).constructor=K,K.prototype._handleSpecialPaintPropertyUpdate=function(T){"line-gradient"===T&&this._updateGradient()},K.prototype._updateGradient=function(){this.gradient=yc(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},K.prototype.recalculate=function(T,ma){A.prototype.recalculate.call(this,T,ma);this.paint._values["line-floorwidth"]=$a.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,T)},K.prototype.createBucket=
function(T){return new Ba(T)},K.prototype.queryRadius=function(T){var ma=oi(Fb("line-width",this,T),Fb("line-gap-width",this,T));T=Fb("line-offset",this,T);return ma/2+Math.abs(T)+Wb(this.paint.get("line-translate"))},K.prototype.queryIntersectsFeature=function(T,ma,va,Aa,Ma,Va,jb){T=lc(T,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Va.angle,jb);Ma=jb/2*oi(this.paint.get("line-width").evaluate(ma,va),this.paint.get("line-gap-width").evaluate(ma,va));ma=this.paint.get("line-offset").evaluate(ma,
va);return ma&&(Aa=function(qb,zb){for(var Hb=[],Ub=new pe(0,0),Sb=0;Sb<qb.length;Sb++){for(var $b=qb[Sb],bc=[],Ec=0;Ec<$b.length;Ec++){var ld=$b[Ec],pd=$b[Ec+1],bd=0===Ec?Ub:ld.sub($b[Ec-1])._unit()._perp();pd=Ec===$b.length-1?Ub:pd.sub(ld)._unit()._perp();bd=bd._add(pd)._unit();bd._mult(1/(bd.x*pd.x+bd.y*pd.y));bc.push(bd._mult(zb)._add(ld))}Hb.push(bc)}return Hb}(Aa,ma*jb)),function(qb,zb,Hb){for(var Ub=0;Ub<zb.length;Ub++){var Sb=zb[Ub];if(3<=qb.length)for(var $b=0;$b<Sb.length;$b++)if(wb(qb,
Sb[$b]))return!0;a:{$b=qb;var bc=Hb;if(1<$b.length){if(Oe($b,Sb)){$b=!0;break a}for(var Ec=0;Ec<Sb.length;Ec++)if(fc(Sb[Ec],$b,bc)){$b=!0;break a}}for(Ec=0;Ec<$b.length;Ec++)if(fc($b[Ec],Sb,bc)){$b=!0;break a}$b=!1}if($b)return!0}return!1}(T,Aa,Ma)},K.prototype.isTileClipped=function(){return!0},K}(Fg),Za=Hd([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),kb=Hd([{name:"a_projected_pos",components:3,type:"Float32"}],
4),pb=(Hd([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Hd([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),vb=(Hd([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Hd([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",
components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Db=Hd([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Hd([{name:"triangle",components:3,type:"Uint16"}]);Hd([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},
{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]);Hd([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},
{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},
{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]);Hd([{type:"Float32",
name:"offsetX"}]);Hd([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Lb={"!":"","#":"",$:"","%":"","\x26":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","\x3c":"","\x3d":"","\x3e":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",
"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Ob=function(A,K,T,ma,va){var Aa=8*va-ma-1;var Ma=(1<<Aa)-1,Va=Ma>>1,jb=-7;va=T?va-1:0;var qb=T?-1:1,zb=A[K+va];va+=qb;T=zb&(1<<-jb)-1;zb>>=-jb;for(jb+=Aa;0<jb;T=256*T+A[K+va],va+=qb,jb-=8);Aa=T&(1<<-jb)-1;
T>>=-jb;for(jb+=ma;0<jb;Aa=256*Aa+A[K+va],va+=qb,jb-=8);if(0===T)T=1-Va;else{if(T===Ma)return Aa?NaN:1/0*(zb?-1:1);Aa+=Math.pow(2,ma);T-=Va}return(zb?-1:1)*Aa*Math.pow(2,T-ma)},Yb=function(A,K,T,ma,va,Aa){var Ma,Va,jb,qb=8*Aa-va-1,zb=(1<<qb)-1,Hb=zb>>1,Ub=23===va?Math.pow(2,-24)-Math.pow(2,-77):0;Aa=ma?0:Aa-1;ma=ma?1:-1;var Sb=0>K||0===K&&0>1/K?1:0;K=Math.abs(K);for(isNaN(K)||K===1/0?(Va=isNaN(K)?1:0,Ma=zb):(Ma=Math.floor(Math.log(K)/Math.LN2),1>K*(jb=Math.pow(2,-Ma))&&(Ma--,jb*=2),2<=(K+=1<=Ma+Hb?
Ub/jb:Ub*Math.pow(2,1-Hb))*jb&&(Ma++,jb/=2),Ma+Hb>=zb?(Va=0,Ma=zb):1<=Ma+Hb?(Va=(K*jb-1)*Math.pow(2,va),Ma+=Hb):(Va=K*Math.pow(2,Hb-1)*Math.pow(2,va),Ma=0));8<=va;A[T+Aa]=255&Va,Aa+=ma,Va/=256,va-=8);Ma=Ma<<va|Va;for(qb+=va;0<qb;A[T+Aa]=255&Ma,Aa+=ma,Ma/=256,qb-=8);A[T+Aa-ma]|=128*Sb};Be.Varint=0;Be.Fixed64=1;Be.Bytes=2;Be.Fixed32=5;var dc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");Be.prototype={destroy:function(){this.buf=null},readFields:function(A,K,T){for(T=T||this.length;this.pos<
T;){var ma=this.readVarint(),va=ma>>3,Aa=this.pos;this.type=7&ma;A(va,K,this);this.pos===Aa&&this.skip(ma)}return K},readMessage:function(A,K){return this.readFields(A,K,this.readVarint()+this.pos)},readFixed32:function(){var A=Lh(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=vg(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=Lh(this.buf,this.pos)+4294967296*Lh(this.buf,this.pos+4);return this.pos+=8,A},readSFixed64:function(){var A=Lh(this.buf,this.pos)+
4294967296*vg(this.buf,this.pos+4);return this.pos+=8,A},readFloat:function(){var A=Ob(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Ob(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var K,T=this.buf;var ma=127&(K=T[this.pos++]);if(128>K)A=ma;else if(ma|=(127&(K=T[this.pos++]))<<7,128>K)A=ma;else if(ma|=(127&(K=T[this.pos++]))<<14,128>K)A=ma;else if(ma|=(127&(K=T[this.pos++]))<<21,128>K)A=ma;else{ma|=(15&T[this.pos])<<28;var va,Aa;K=this.buf;
if((va=(112&(Aa=K[this.pos++]))>>4,128>Aa)||(va|=(127&(Aa=K[this.pos++]))<<3,128>Aa)||(va|=(127&(Aa=K[this.pos++]))<<10,128>Aa)||(va|=(127&(Aa=K[this.pos++]))<<17,128>Aa)||(va|=(127&(Aa=K[this.pos++]))<<24,128>Aa)||(va|=(1&(Aa=K[this.pos++]))<<31,128>Aa))A=A?4294967296*va+(ma>>>0):4294967296*(va>>>0)+(ma>>>0);else throw Error("Expected varint not more than 10 bytes");}return A},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return 1==A%2?(A+1)/-2:
A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,K=this.pos;this.pos=A;if(12<=A-K&&dc)A=dc.decode(this.buf.subarray(K,A));else{for(var T=this.buf,ma="";K<A;){var va,Aa,Ma,Va=T[K],jb=null,qb=239<Va?4:223<Va?3:191<Va?2:1;if(K+qb>A)break;1===qb?128>Va&&(jb=Va):2===qb?128==(192&(va=T[K+1]))&&127>=(jb=(31&Va)<<6|63&va)&&(jb=null):3===qb?(Aa=T[K+2],128==(192&(va=T[K+1]))&&128==(192&Aa)&&(2047>=(jb=(15&Va)<<12|(63&va)<<6|63&Aa)||55296<=jb&&57343>=
jb)&&(jb=null)):4===qb&&(Aa=T[K+2],Ma=T[K+3],128==(192&(va=T[K+1]))&&128==(192&Aa)&&128==(192&Ma)&&(65535>=(jb=(15&Va)<<18|(63&va)<<12|(63&Aa)<<6|63&Ma)||1114112<=jb)&&(jb=null));null===jb?(jb=65533,qb=1):65535<jb&&(jb-=65536,ma+=String.fromCharCode(jb>>>10&1023|55296),jb=56320|1023&jb);ma+=String.fromCharCode(jb);K+=qb}A=ma}return A},readBytes:function(){var A=this.readVarint()+this.pos,K=this.buf.subarray(this.pos,A);return this.pos=A,K},readPackedVarint:function(A,K){if(this.type!==Be.Bytes)return A.push(this.readVarint(K));
var T=Vf(this);for(A=A||[];this.pos<T;)A.push(this.readVarint(K));return A},readPackedSVarint:function(A){if(this.type!==Be.Bytes)return A.push(this.readSVarint());var K=Vf(this);for(A=A||[];this.pos<K;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==Be.Bytes)return A.push(this.readBoolean());var K=Vf(this);for(A=A||[];this.pos<K;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==Be.Bytes)return A.push(this.readFloat());var K=Vf(this);
for(A=A||[];this.pos<K;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==Be.Bytes)return A.push(this.readDouble());var K=Vf(this);for(A=A||[];this.pos<K;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==Be.Bytes)return A.push(this.readFixed32());var K=Vf(this);for(A=A||[];this.pos<K;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==Be.Bytes)return A.push(this.readSFixed32());var K=Vf(this);for(A=A||[];this.pos<
K;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==Be.Bytes)return A.push(this.readFixed64());var K=Vf(this);for(A=A||[];this.pos<K;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==Be.Bytes)return A.push(this.readSFixed64());var K=Vf(this);for(A=A||[];this.pos<K;)A.push(this.readSFixed64());return A},skip:function(A){A&=7;if(A===Be.Varint)for(;127<this.buf[this.pos++];);else if(A===Be.Bytes)this.pos=this.readVarint()+this.pos;else if(A===
Be.Fixed32)this.pos+=4;else{if(A!==Be.Fixed64)throw Error("Unimplemented type: "+A);this.pos+=8}},writeTag:function(A,K){this.writeVarint(A<<3|K)},realloc:function(A){for(var K=this.length||16;K<this.pos+A;)K*=2;K!==this.length&&(A=new Uint8Array(K),A.set(this.buf),this.buf=A,this.length=K)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4);th(this.buf,A,this.pos);this.pos+=4},writeSFixed32:function(A){this.realloc(4);
th(this.buf,A,this.pos);this.pos+=4},writeFixed64:function(A){this.realloc(8);th(this.buf,-1&A,this.pos);th(this.buf,Math.floor(1/4294967296*A),this.pos+4);this.pos+=8},writeSFixed64:function(A){this.realloc(8);th(this.buf,-1&A,this.pos);th(this.buf,Math.floor(1/4294967296*A),this.pos+4);this.pos+=8},writeVarint:function(A){268435455<(A=+A||0)||0>A?function(K,T){var ma,va;if(0<=K?(ma=K%4294967296|0,va=K/4294967296|0):(va=~(-K/4294967296),4294967295^(ma=~(-K%4294967296))?ma=ma+1|0:(ma=0,va=va+1|0)),
1.8446744073709552E19<=K||-1.8446744073709552E19>K)throw Error("Given varint doesn't fit into 10 bytes");T.realloc(10);(function(Aa,Ma,Va){Va.buf[Va.pos++]=127&Aa|128;Aa>>>=7;Va.buf[Va.pos++]=127&Aa|128;Aa>>>=7;Va.buf[Va.pos++]=127&Aa|128;Aa>>>=7;Va.buf[Va.pos++]=127&Aa|128;Va.buf[Va.pos]=127&Aa>>>7})(ma,0,T);(function(Aa,Ma){Ma.buf[Ma.pos++]|=(7&Aa)<<4|((Aa>>>=3)?128:0);Aa&&(Ma.buf[Ma.pos++]=127&Aa|((Aa>>>=7)?128:0),Aa&&(Ma.buf[Ma.pos++]=127&Aa|((Aa>>>=7)?128:0),Aa&&(Ma.buf[Ma.pos++]=127&Aa|((Aa>>>=
7)?128:0),Aa&&(Ma.buf[Ma.pos++]=127&Aa|((Aa>>>=7)?128:0),Aa&&(Ma.buf[Ma.pos++]=127&Aa)))))})(va,T)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(127<A?128:0),127>=A||(this.buf[this.pos++]=127&(A>>>=7)|(127<A?128:0),127>=A||(this.buf[this.pos++]=127&(A>>>=7)|(127<A?128:0),127>=A||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(0>A?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A);this.realloc(4*A.length);this.pos++;
for(var K=this.pos,T=this.buf,ma=this.pos,va,Aa,Ma=0;Ma<A.length;Ma++){if(55295<(va=A.charCodeAt(Ma))&&57344>va){if(!Aa){56319<va||Ma+1===A.length?(T[ma++]=239,T[ma++]=191,T[ma++]=189):Aa=va;continue}if(56320>va){T[ma++]=239;T[ma++]=191;T[ma++]=189;Aa=va;continue}va=Aa-55296<<10|va-56320|65536;Aa=null}else Aa&&(T[ma++]=239,T[ma++]=191,T[ma++]=189,Aa=null);128>va?T[ma++]=va:(2048>va?T[ma++]=va>>6|192:(65536>va?T[ma++]=va>>12|224:(T[ma++]=va>>18|240,T[ma++]=va>>12&63|128),T[ma++]=va>>6&63|128),T[ma++]=
63&va|128)}this.pos=ma;T=this.pos-K;128<=T&&Kh(K,T,this);this.pos=K-1;this.writeVarint(T);this.pos+=T},writeFloat:function(A){this.realloc(4);Yb(this.buf,A,this.pos,!0,23,4);this.pos+=4},writeDouble:function(A){this.realloc(8);Yb(this.buf,A,this.pos,!0,52,8);this.pos+=8},writeBytes:function(A){var K=A.length;this.writeVarint(K);this.realloc(K);for(var T=0;T<K;T++)this.buf[this.pos++]=A[T]},writeRawMessage:function(A,K){this.pos++;var T=this.pos;A(K,this);A=this.pos-T;128<=A&&Kh(T,A,this);this.pos=
T-1;this.writeVarint(A);this.pos+=A},writeMessage:function(A,K,T){this.writeTag(A,Be.Bytes);this.writeRawMessage(K,T)},writePackedVarint:function(A,K){K.length&&this.writeMessage(A,pi,K)},writePackedSVarint:function(A,K){K.length&&this.writeMessage(A,oj,K)},writePackedBoolean:function(A,K){K.length&&this.writeMessage(A,Si,K)},writePackedFloat:function(A,K){K.length&&this.writeMessage(A,pj,K)},writePackedDouble:function(A,K){K.length&&this.writeMessage(A,qj,K)},writePackedFixed32:function(A,K){K.length&&
this.writeMessage(A,Xj,K)},writePackedSFixed32:function(A,K){K.length&&this.writeMessage(A,rj,K)},writePackedFixed64:function(A,K){K.length&&this.writeMessage(A,qi,K)},writePackedSFixed64:function(A,K){K.length&&this.writeMessage(A,Ak,K)},writeBytesField:function(A,K){this.writeTag(A,Be.Bytes);this.writeBytes(K)},writeFixed32Field:function(A,K){this.writeTag(A,Be.Fixed32);this.writeFixed32(K)},writeSFixed32Field:function(A,K){this.writeTag(A,Be.Fixed32);this.writeSFixed32(K)},writeFixed64Field:function(A,
K){this.writeTag(A,Be.Fixed64);this.writeFixed64(K)},writeSFixed64Field:function(A,K){this.writeTag(A,Be.Fixed64);this.writeSFixed64(K)},writeVarintField:function(A,K){this.writeTag(A,Be.Varint);this.writeVarint(K)},writeSVarintField:function(A,K){this.writeTag(A,Be.Varint);this.writeSVarint(K)},writeStringField:function(A,K){this.writeTag(A,Be.Bytes);this.writeString(K)},writeFloatField:function(A,K){this.writeTag(A,Be.Fixed32);this.writeFloat(K)},writeDoubleField:function(A,K){this.writeTag(A,Be.Fixed64);
this.writeDouble(K)},writeBooleanField:function(A,K){this.writeVarintField(A,!!K)}};var mc=function(A,K){var T=K.pixelRatio,ma=K.version,va=K.stretchX,Aa=K.stretchY;K=K.content;this.paddedRect=A;this.pixelRatio=T;this.stretchX=va;this.stretchY=Aa;this.content=K;this.version=ma},Fc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Fc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};Fc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-
1,this.paddedRect.y+this.paddedRect.h-1]};Fc.tlbr.get=function(){return this.tl.concat(this.br)};Fc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(mc.prototype,Fc);var Pc=function(A,K){var T={},ma={};this.haveRenderCallbacks=[];var va=[];this.addImages(A,T,va);this.addImages(K,ma,va);va=sj(va);va=new Mf({width:va.w||1,height:va.h||1});for(var Aa in A){var Ma=A[Aa],Va=T[Aa].paddedRect;Mf.copy(Ma.data,va,{x:0,y:0},
{x:Va.x+1,y:Va.y+1},Ma.data)}for(var jb in K){A=K[jb];Ma=ma[jb].paddedRect;Aa=Ma.x+1;Ma=Ma.y+1;Va=A.data.width;var qb=A.data.height;Mf.copy(A.data,va,{x:0,y:0},{x:Aa,y:Ma},A.data);Mf.copy(A.data,va,{x:0,y:qb-1},{x:Aa,y:Ma-1},{width:Va,height:1});Mf.copy(A.data,va,{x:0,y:0},{x:Aa,y:Ma+qb},{width:Va,height:1});Mf.copy(A.data,va,{x:Va-1,y:0},{x:Aa-1,y:Ma},{width:1,height:qb});Mf.copy(A.data,va,{x:0,y:0},{x:Aa+Va,y:Ma},{width:1,height:qb})}this.image=va;this.iconPositions=T;this.patternPositions=ma};
Pc.prototype.addImages=function(A,K,T){for(var ma in A){var va=A[ma],Aa={x:0,y:0,w:va.data.width+2,h:va.data.height+2};T.push(Aa);K[ma]=new mc(Aa,va);va.hasRenderCallback&&this.haveRenderCallbacks.push(ma)}};Pc.prototype.patchUpdatedImages=function(A,K){for(var T in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[T],A.getImage(T),K),this.patchUpdatedImage(this.patternPositions[T],A.getImage(T),K)};Pc.prototype.patchUpdatedImage=function(A,
K,T){A&&K&&A.version!==K.version&&(A.version=K.version,A=A.tl,T.update(K.data,void 0,{x:A[0],y:A[1]}))};Jc("ImagePosition",mc);Jc("ImageAtlas",Pc);var Oc={horizontal:1,vertical:2,horizontalOnly:3},Wc=function(){this.scale=1;this.fontStack="";this.imageName=null};Wc.forText=function(A,K){var T=new Wc;return T.scale=A||1,T.fontStack=K,T};Wc.forImage=function(A){var K=new Wc;return K.imageName=A,K};var Pb=function(){this.text="";this.sectionIndex=[];this.sections=[];this.imageSectionID=null};Pb.fromFeature=
function(A,K){for(var T=new Pb,ma=0;ma<A.sections.length;ma++){var va=A.sections[ma];va.image?T.addImageSection(va):T.addTextSection(va,K)}return T};Pb.prototype.length=function(){return this.text.length};Pb.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]};Pb.prototype.getSectionIndex=function(A){return this.sectionIndex[A]};Pb.prototype.getCharCode=function(A){return this.text.charCodeAt(A)};Pb.prototype.verticalizePunctuation=function(){for(var A=this.text,K="",T=0;T<
A.length;T++){var ma=A.charCodeAt(T+1)||null,va=A.charCodeAt(T-1)||null;K+=ma&&xd(ma)&&!Lb[A[T+1]]||va&&xd(va)&&!Lb[A[T-1]]||!Lb[A[T]]?A[T]:Lb[A[T]]}this.text=K};Pb.prototype.trim=function(){for(var A=0,K=0;K<this.text.length&&jc[this.text.charCodeAt(K)];K++)A++;K=this.text.length;for(var T=this.text.length-1;0<=T&&T>=A&&jc[this.text.charCodeAt(T)];T--)K--;this.text=this.text.substring(A,K);this.sectionIndex=this.sectionIndex.slice(A,K)};Pb.prototype.substring=function(A,K){var T=new Pb;return T.text=
this.text.substring(A,K),T.sectionIndex=this.sectionIndex.slice(A,K),T.sections=this.sections,T};Pb.prototype.toString=function(){return this.text};Pb.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(K,T){return Math.max(K,A.sections[T].scale)},0)};Pb.prototype.addTextSection=function(A,K){this.text+=A.text;this.sections.push(Wc.forText(A.scale,A.fontStack||K));K=this.sections.length-1;for(var T=0;T<A.text.length;++T)this.sectionIndex.push(K)};Pb.prototype.addImageSection=
function(A){A=A.image?A.image.name:"";if(0!==A.length){var K=this.getNextImageSectionCharCode();K?(this.text+=String.fromCharCode(K),this.sections.push(Wc.forImage(A)),this.sectionIndex.push(this.sections.length-1)):x("Reached maximum number of images 6401")}else x("Can't add FormattedSection with an empty image.")};Pb.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var jc=
{9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Hc={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ad=function(A){function K(T,ma,va,Aa){A.call(this,T,ma);this.angle=va;void 0!==Aa&&(this.segment=Aa)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.clone=function(){return new K(this.x,this.y,this.angle,this.segment)},K}(pe);Jc("Anchor",ad);var jd=Object.freeze({__proto__:null,getSizeData:Oh,evaluateSizeForFeature:tj,
evaluateSizeForZoom:uj,SIZE_PACK_FACTOR:128}),hd=function(A,K,T,ma,va,Aa,Ma,Va,jb,qb){if(this.boxStartIndex=A.length,jb)K=Aa.top,T=Aa.bottom,(ma=Aa.collisionPadding)&&(K-=ma[1],T+=ma[3]),K=T-K,0<K&&(K=Math.max(10,K),this.circleDiameter=K);else{jb=Aa.top*Ma-Va;var zb=Aa.bottom*Ma+Va,Hb=Aa.left*Ma-Va;Va=Aa.right*Ma+Va;Aa=Aa.collisionPadding;if(Aa&&(Hb-=Aa[0]*Ma,jb-=Aa[1]*Ma,Va+=Aa[2]*Ma,zb+=Aa[3]*Ma),qb){Aa=new pe(Hb,jb);Ma=new pe(Va,jb);var Ub=new pe(Hb,zb);zb=new pe(Va,zb);qb=qb*Math.PI/180;Aa._rotate(qb);
Ma._rotate(qb);Ub._rotate(qb);zb._rotate(qb);Hb=Math.min(Aa.x,Ma.x,Ub.x,zb.x);Va=Math.max(Aa.x,Ma.x,Ub.x,zb.x);jb=Math.min(Aa.y,Ma.y,Ub.y,zb.y);zb=Math.max(Aa.y,Ma.y,Ub.y,zb.y)}A.emplaceBack(K.x,K.y,Hb,jb,Va,zb,T,ma,va)}this.boxEndIndex=A.length},Zc=function(A,K){if(void 0===A&&(A=[]),void 0===K&&(K=jg),this.data=A,this.length=this.data.length,this.compare=K,0<this.length)for(A=(this.length>>1)-1;0<=A;A--)this._down(A)};Zc.prototype.push=function(A){this.data.push(A);this.length++;this._up(this.length-
1)};Zc.prototype.pop=function(){if(0!==this.length){var A=this.data[0],K=this.data.pop();return this.length--,0<this.length&&(this.data[0]=K,this._down(0)),A}};Zc.prototype.peek=function(){return this.data[0]};Zc.prototype._up=function(A){for(var K=this.data,T=this.compare,ma=K[A];0<A;){var va=A-1>>1,Aa=K[va];if(0<=T(ma,Aa))break;K[A]=Aa;A=va}K[A]=ma};Zc.prototype._down=function(A){for(var K=this.data,T=this.compare,ma=this.length>>1,va=K[A];A<ma;){var Aa=1+(A<<1),Ma=K[Aa],Va=Aa+1;if(Va<this.length&&
0>T(K[Va],Ma)&&(Aa=Va,Ma=K[Va]),0<=T(Ma,va))break;K[A]=Ma;A=Aa}K[A]=va};var Ed=Number.POSITIVE_INFINITY,$d=Di.VectorTileFeature.types,he=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],ie=function(A){this.layoutVertexArray=new Sg;this.indexArray=new qh;this.programConfigurations=A;this.segments=new mf;this.dynamicLayoutVertexArray=new Tg;this.opacityVertexArray=new ug;this.placedSymbolArray=new Kk};ie.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&
0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length};ie.prototype.upload=function(A,K,T,ma){this.isEmpty()||(T&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Za.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,K),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,kb.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,he,!0),this.opacityVertexBuffer.itemSize=1),(T||ma)&&this.programConfigurations.upload(A))};
ie.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};Jc("SymbolBuffers",ie);var oe=function(A,K,T){this.layoutVertexArray=new A;this.layoutAttributes=K;this.indexArray=new T;this.segments=new mf;this.collisionVertexArray=new gg};oe.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,
this.layoutAttributes);this.indexBuffer=A.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,pb.members,!0)};oe.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};Jc("CollisionBuffers",oe);var Qd=function(A){this.collisionBoxArray=A.collisionBoxArray;this.zoom=A.zoom;this.overscaling=A.overscaling;this.layers=A.layers;
this.layerIds=this.layers.map(function(va){return va.id});this.index=A.index;this.pixelRatio=A.pixelRatio;this.sourceLayerIndex=A.sourceLayerIndex;this.hasRTLText=this.hasPattern=!1;this.sortKeyRanges=[];this.collisionCircleArray=[];this.placementInvProjMatrix=wc([]);this.placementViewportMatrix=wc([]);var K=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Oh(this.zoom,K["text-size"]);this.iconSizeData=Oh(this.zoom,K["icon-size"]);K=this.layers[0].layout;var T=K.get("symbol-sort-key"),
ma=K.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==ma&&void 0!==T.constantOr(1);this.sortFeaturesByY=("viewport-y"===ma||"auto"===ma&&!this.sortFeaturesByKey)&&(K.get("text-allow-overlap")||K.get("icon-allow-overlap")||K.get("text-ignore-placement")||K.get("icon-ignore-placement"));"point"===K.get("symbol-placement")&&(this.writingModes=K.get("text-writing-mode").map(function(va){return Oc[va]}));this.stateDependentLayerIds=this.layers.filter(function(va){return va.isStateDependent()}).map(function(va){return va.id});
this.sourceID=A.sourceID};Qd.prototype.createArrays=function(){this.text=new ie(new Cg(Za.members,this.layers,this.zoom,function(A){return/^text/.test(A)}));this.icon=new ie(new Cg(Za.members,this.layers,this.zoom,function(A){return/^icon/.test(A)}));this.glyphOffsetArray=new Nk;this.lineVertexArray=new Ej;this.symbolInstances=new Mk};Qd.prototype.calculateGlyphDependencies=function(A,K,T,ma,va){for(var Aa=0;Aa<A.length;Aa++)if(K[A.charCodeAt(Aa)]=!0,(T||ma)&&va){var Ma=Lb[A.charAt(Aa)];Ma&&(K[Ma.charCodeAt(0)]=
!0)}};Qd.prototype.populate=function(A,K,T){var ma=this.layers[0],va=ma.layout,Aa=va.get("text-font"),Ma=va.get("text-field"),Va=va.get("icon-image");Ma=("constant"!==Ma.value.kind||Ma.value.value instanceof ae&&!Ma.value.value.isEmpty()||0<Ma.value.value.toString().length)&&("constant"!==Aa.value.kind||0<Aa.value.value.length);Va="constant"!==Va.value.kind||!!Va.value.value||0<Object.keys(Va.parameters).length;var jb=va.get("symbol-sort-key");if(this.features=[],Ma||Va){var qb=K.iconDependencies,
zb=K.glyphDependencies;K=K.availableImages;for(var Hb=new Pe(this.zoom),Ub=0;Ub<A.length;Ub+=1){var Sb=A[Ub],$b=Sb.feature,bc=Sb.id,Ec=Sb.index,ld=Sb.sourceLayerIndex;Sb=ma._featureFilter.needGeometry;var pd={type:$b.type,id:bc,properties:$b.properties,geometry:Sb?Xd($b):[]};if(ma._featureFilter.filter(Hb,pd,T)){Sb||(pd.geometry=Xd($b));Sb=void 0;if(Ma){var bd=ma.getValueAndResolveTokens("text-field",pd,T,K);bd=ae.factory(bd);Ck(bd)&&(this.hasRTLText=!0);(!this.hasRTLText||"unavailable"===Ef||this.hasRTLText&&
Pf.isParsed())&&(Sb=sh(bd,ma,pd))}bd=void 0;Va&&(bd=ma.getValueAndResolveTokens("icon-image",pd,T,K),bd=bd instanceof we?bd:we.fromString(bd));if(Sb||bd){var Ad=this.sortFeaturesByKey?jb.evaluate(pd,{},T):void 0;$b={id:bc,text:Sb,icon:bd,index:Ec,sourceLayerIndex:ld,geometry:Xd($b),properties:$b.properties,type:$d[$b.type],sortKey:Ad};if(this.features.push($b),bd&&(qb[bd.name]=!0),Sb)for($b=Aa.evaluate(pd,{},T).join(","),bc="map"===va.get("text-rotation-alignment")&&"point"!==va.get("symbol-placement"),
this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(Oc.vertical),Ec=0,pd=Sb.sections;Ec<pd.length;Ec+=1)ld=pd[Ec],ld.image?qb[ld.image.name]=!0:(bd=cb(Sb.toString()),Ad=ld.fontStack||$b,Ad=zb[Ad]=zb[Ad]||{},this.calculateGlyphDependencies(ld.text,Ad,bc,this.allowVerticalPlacement,bd))}}}"line"===va.get("symbol-placement")&&(this.features=function(zd){function Cd(Nf,pf,We){var te=ee[Nf];return delete ee[Nf],ee[pf]=te,Td[te].geometry[0].pop(),Td[te].geometry[0]=Td[te].geometry[0].concat(We[0]),
te}function Od(Nf,pf,We){var te=ce[pf];return delete ce[pf],ce[Nf]=te,Td[te].geometry[0].shift(),Td[te].geometry[0]=We[0].concat(Td[te].geometry[0]),te}function Ud(Nf,pf,We){pf=We?pf[0][pf[0].length-1]:pf[0][0];return Nf+":"+pf.x+":"+pf.y}for(var ce={},ee={},Td=[],Yd=0,se=0;se<zd.length;se++){var Pd=zd[se],Gd=Pd.geometry;if(Pd=Pd.text?Pd.text.toString():null){var Rd=Ud(Pd,Gd),xe=Ud(Pd,Gd,!0);if(Rd in ee&&xe in ce&&ee[Rd]!==ce[xe]){Gd=Od(Rd,xe,Gd);var Ve=Cd(Rd,xe,Td[Gd].geometry);delete ce[Rd];delete ee[xe];
ee[Ud(Pd,Td[Ve].geometry,!0)]=Ve;Td[Gd].geometry=null}else Rd in ee?Cd(Rd,xe,Gd):xe in ce?Od(Rd,xe,Gd):(Td.push(zd[se]),Yd++,ce[Rd]=Yd-1,ee[xe]=Yd-1)}else Td.push(zd[se]),Yd++}return Td.filter(function(Nf){return Nf.geometry})}(this.features));this.sortFeaturesByKey&&this.features.sort(function(zd,Cd){return zd.sortKey-Cd.sortKey})}};Qd.prototype.update=function(A,K,T){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,K,this.layers,T),this.icon.programConfigurations.updatePaintArrays(A,
K,this.layers,T))};Qd.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText};Qd.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};Qd.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A));this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(A,
this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};Qd.prototype.destroyDebugData=function(){this.textCollisionBox.destroy();this.iconCollisionBox.destroy()};Qd.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.hasDebugData()&&this.destroyDebugData()};Qd.prototype.addToLineVertexArray=function(A,K){var T=this.lineVertexArray.length;if(void 0!==A.segment){for(var ma=A.dist(K[A.segment+1]),va=A.dist(K[A.segment]),Aa={},Ma=A.segment+
1;Ma<K.length;Ma++)Aa[Ma]={x:K[Ma].x,y:K[Ma].y,tileUnitDistanceFromAnchor:ma},Ma<K.length-1&&(ma+=K[Ma+1].dist(K[Ma]));for(A=A.segment||0;0<=A;A--)Aa[A]={x:K[A].x,y:K[A].y,tileUnitDistanceFromAnchor:va},0<A&&(va+=K[A-1].dist(K[A]));for(va=0;va<K.length;va++)A=Aa[va],this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}return{lineStartIndex:T,lineLength:this.lineVertexArray.length-T}};Qd.prototype.addSymbols=function(A,K,T,ma,va,Aa,Ma,Va,jb,qb,zb,Hb){va=A.indexArray;for(var Ub=A.layoutVertexArray,
Sb=A.segments.prepareSegment(4*K.length,Ub,va,Aa.sortKey),$b=this.glyphOffsetArray.length,bc=Sb.vertexLength,Ec=this.allowVerticalPlacement&&Ma===Oc.vertical?Math.PI/2:0,ld=Aa.text&&Aa.text.sections,pd=0;pd<K.length;pd++){var bd=K[pd],Ad=bd.tl,zd=bd.tr,Cd=bd.bl,Od=bd.br,Ud=bd.tex,ce=bd.pixelOffsetTL,ee=bd.pixelOffsetBR,Td=bd.minFontScaleX,Yd=bd.minFontScaleY,se=bd.glyphOffset,Pd=bd.isSDF;bd=bd.sectionIndex;var Gd=Sb.vertexLength,Rd=se[1];ff(Ub,Va.x,Va.y,Ad.x,Rd+Ad.y,Ud.x,Ud.y,T,Pd,ce.x,ce.y,Td,Yd);
ff(Ub,Va.x,Va.y,zd.x,Rd+zd.y,Ud.x+Ud.w,Ud.y,T,Pd,ee.x,ce.y,Td,Yd);ff(Ub,Va.x,Va.y,Cd.x,Rd+Cd.y,Ud.x,Ud.y+Ud.h,T,Pd,ce.x,ee.y,Td,Yd);ff(Ub,Va.x,Va.y,Od.x,Rd+Od.y,Ud.x+Ud.w,Ud.y+Ud.h,T,Pd,ee.x,ee.y,Td,Yd);cg(A.dynamicLayoutVertexArray,Va,Ec);va.emplaceBack(Gd,Gd+1,Gd+2);va.emplaceBack(Gd+1,Gd+2,Gd+3);Sb.vertexLength+=4;Sb.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(se[0]);pd!==K.length-1&&bd===K[pd+1].sectionIndex||A.programConfigurations.populatePaintArrays(Ub.length,Aa,Aa.index,{},Hb,ld&&
ld[bd])}A.placedSymbolArray.emplaceBack(Va.x,Va.y,$b,this.glyphOffsetArray.length-$b,bc,jb,qb,Va.segment,T?T[0]:0,T?T[1]:0,ma[0],ma[1],Ma,0,!1,0,zb)};Qd.prototype._addCollisionDebugVertex=function(A,K,T,ma,va,Aa){return K.emplaceBack(0,0),A.emplaceBack(T.x,T.y,ma,va,Math.round(Aa.x),Math.round(Aa.y))};Qd.prototype.addCollisionDebugVertices=function(A,K,T,ma,va,Aa,Ma){var Va=va.segments.prepareSegment(4,va.layoutVertexArray,va.indexArray),jb=Va.vertexLength,qb=va.layoutVertexArray,zb=va.collisionVertexArray,
Hb=Ma.anchorX;Ma=Ma.anchorY;this._addCollisionDebugVertex(qb,zb,Aa,Hb,Ma,new pe(A,K));this._addCollisionDebugVertex(qb,zb,Aa,Hb,Ma,new pe(T,K));this._addCollisionDebugVertex(qb,zb,Aa,Hb,Ma,new pe(T,ma));this._addCollisionDebugVertex(qb,zb,Aa,Hb,Ma,new pe(A,ma));Va.vertexLength+=4;A=va.indexArray;A.emplaceBack(jb,jb+1);A.emplaceBack(jb+1,jb+2);A.emplaceBack(jb+2,jb+3);A.emplaceBack(jb+3,jb);Va.primitiveLength+=4};Qd.prototype.addDebugCollisionBoxes=function(A,K,T,ma){for(;A<K;A++){var va=this.collisionBoxArray.get(A);
this.addCollisionDebugVertices(va.x1,va.y1,va.x2,va.y2,ma?this.textCollisionBox:this.iconCollisionBox,va.anchorPoint,T)}};Qd.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData();this.textCollisionBox=new oe(oh,vb.members,ai);this.iconCollisionBox=new oe(oh,vb.members,ai);for(var A=0;A<this.symbolInstances.length;A++){var K=this.symbolInstances.get(A);this.addDebugCollisionBoxes(K.textBoxStartIndex,K.textBoxEndIndex,K,!0);this.addDebugCollisionBoxes(K.verticalTextBoxStartIndex,
K.verticalTextBoxEndIndex,K,!0);this.addDebugCollisionBoxes(K.iconBoxStartIndex,K.iconBoxEndIndex,K,!1);this.addDebugCollisionBoxes(K.verticalIconBoxStartIndex,K.verticalIconBoxEndIndex,K,!1)}};Qd.prototype._deserializeCollisionBoxesForSymbol=function(A,K,T,ma,va,Aa,Ma,Va,jb){for(var qb={};K<T;){K=A.get(K);qb.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY};qb.textFeatureIndex=K.featureIndex;break}for(;ma<va;){ma=A.get(ma);qb.verticalTextBox={x1:ma.x1,
y1:ma.y1,x2:ma.x2,y2:ma.y2,anchorPointX:ma.anchorPointX,anchorPointY:ma.anchorPointY};qb.verticalTextFeatureIndex=ma.featureIndex;break}for(;Aa<Ma;){Aa=A.get(Aa);qb.iconBox={x1:Aa.x1,y1:Aa.y1,x2:Aa.x2,y2:Aa.y2,anchorPointX:Aa.anchorPointX,anchorPointY:Aa.anchorPointY};qb.iconFeatureIndex=Aa.featureIndex;break}for(;Va<jb;){A=A.get(Va);qb.verticalIconBox={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2,anchorPointX:A.anchorPointX,anchorPointY:A.anchorPointY};qb.verticalIconFeatureIndex=A.featureIndex;break}return qb};
Qd.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var K=0;K<this.symbolInstances.length;K++){var T=this.symbolInstances.get(K);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,T.textBoxStartIndex,T.textBoxEndIndex,T.verticalTextBoxStartIndex,T.verticalTextBoxEndIndex,T.iconBoxStartIndex,T.iconBoxEndIndex,T.verticalIconBoxStartIndex,T.verticalIconBoxEndIndex))}};Qd.prototype.hasTextData=function(){return 0<this.text.segments.get().length};Qd.prototype.hasIconData=
function(){return 0<this.icon.segments.get().length};Qd.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox};Qd.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length};Qd.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length};Qd.prototype.addIndicesForPlacedSymbol=function(A,K){var T=A.placedSymbolArray.get(K);K=T.vertexStartIndex+4*T.numGlyphs;
for(T=T.vertexStartIndex;T<K;T+=4)A.indexArray.emplaceBack(T,T+1,T+2),A.indexArray.emplaceBack(T+1,T+2,T+3)};Qd.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;var K=Math.sin(A);A=Math.cos(A);for(var T=[],ma=[],va=[],Aa=0;Aa<this.symbolInstances.length;++Aa){va.push(Aa);var Ma=this.symbolInstances.get(Aa);T.push(0|Math.round(K*Ma.anchorX+A*Ma.anchorY));ma.push(Ma.featureIndex)}return va.sort(function(Va,jb){return T[Va]-
T[jb]||ma[jb]-ma[Va]}),va};Qd.prototype.addToSortKeyRanges=function(A,K){var T=this.sortKeyRanges[this.sortKeyRanges.length-1];T&&T.sortKey===K?T.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:K,symbolInstanceStart:A,symbolInstanceEnd:A+1})};Qd.prototype.sortFeatures=function(A){var K=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A);this.sortedAngle=A;this.text.indexArray.clear();
this.icon.indexArray.clear();this.featureSortOrder=[];A=0;for(var T=this.symbolInstanceIndexes;A<T.length;A+=1){var ma=this.symbolInstances.get(T[A]);this.featureSortOrder.push(ma.featureIndex);[ma.rightJustifiedTextSymbolIndex,ma.centerJustifiedTextSymbolIndex,ma.leftJustifiedTextSymbolIndex].forEach(function(va,Aa,Ma){0<=va&&Ma.indexOf(va)===Aa&&K.addIndicesForPlacedSymbol(K.text,va)});0<=ma.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,ma.verticalPlacedTextSymbolIndex);
0<=ma.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,ma.placedIconSymbolIndex);0<=ma.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,ma.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};Jc("SymbolBucket",Qd,{omit:["layers","collisionBoxArray","features","compareText"]});Qd.MAX_GLYPHS=65535;Qd.addDynamicAttributes=cg;var Le=
new Zf({"symbol-placement":new Vd(Ib.layout_symbol["symbol-placement"]),"symbol-spacing":new Vd(Ib.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Vd(Ib.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Kd(Ib.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Vd(Ib.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Vd(Ib.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Vd(Ib.layout_symbol["icon-ignore-placement"]),"icon-optional":new Vd(Ib.layout_symbol["icon-optional"]),
"icon-rotation-alignment":new Vd(Ib.layout_symbol["icon-rotation-alignment"]),"icon-size":new Kd(Ib.layout_symbol["icon-size"]),"icon-text-fit":new Vd(Ib.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Vd(Ib.layout_symbol["icon-text-fit-padding"]),"icon-image":new Kd(Ib.layout_symbol["icon-image"]),"icon-rotate":new Kd(Ib.layout_symbol["icon-rotate"]),"icon-padding":new Vd(Ib.layout_symbol["icon-padding"]),"icon-keep-upright":new Vd(Ib.layout_symbol["icon-keep-upright"]),"icon-offset":new Kd(Ib.layout_symbol["icon-offset"]),
"icon-anchor":new Kd(Ib.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Vd(Ib.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Vd(Ib.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Vd(Ib.layout_symbol["text-rotation-alignment"]),"text-field":new Kd(Ib.layout_symbol["text-field"]),"text-font":new Kd(Ib.layout_symbol["text-font"]),"text-size":new Kd(Ib.layout_symbol["text-size"]),"text-max-width":new Kd(Ib.layout_symbol["text-max-width"]),"text-line-height":new Vd(Ib.layout_symbol["text-line-height"]),
"text-letter-spacing":new Kd(Ib.layout_symbol["text-letter-spacing"]),"text-justify":new Kd(Ib.layout_symbol["text-justify"]),"text-radial-offset":new Kd(Ib.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Vd(Ib.layout_symbol["text-variable-anchor"]),"text-anchor":new Kd(Ib.layout_symbol["text-anchor"]),"text-max-angle":new Vd(Ib.layout_symbol["text-max-angle"]),"text-writing-mode":new Vd(Ib.layout_symbol["text-writing-mode"]),"text-rotate":new Kd(Ib.layout_symbol["text-rotate"]),"text-padding":new Vd(Ib.layout_symbol["text-padding"]),
"text-keep-upright":new Vd(Ib.layout_symbol["text-keep-upright"]),"text-transform":new Kd(Ib.layout_symbol["text-transform"]),"text-offset":new Kd(Ib.layout_symbol["text-offset"]),"text-allow-overlap":new Vd(Ib.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Vd(Ib.layout_symbol["text-ignore-placement"]),"text-optional":new Vd(Ib.layout_symbol["text-optional"])}),uf={paint:new Zf({"icon-opacity":new Kd(Ib.paint_symbol["icon-opacity"]),"icon-color":new Kd(Ib.paint_symbol["icon-color"]),
"icon-halo-color":new Kd(Ib.paint_symbol["icon-halo-color"]),"icon-halo-width":new Kd(Ib.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Kd(Ib.paint_symbol["icon-halo-blur"]),"icon-translate":new Vd(Ib.paint_symbol["icon-translate"]),"icon-translate-anchor":new Vd(Ib.paint_symbol["icon-translate-anchor"]),"text-opacity":new Kd(Ib.paint_symbol["text-opacity"]),"text-color":new Kd(Ib.paint_symbol["text-color"],{runtimeType:Nd,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),
"text-halo-color":new Kd(Ib.paint_symbol["text-halo-color"]),"text-halo-width":new Kd(Ib.paint_symbol["text-halo-width"]),"text-halo-blur":new Kd(Ib.paint_symbol["text-halo-blur"]),"text-translate":new Vd(Ib.paint_symbol["text-translate"]),"text-translate-anchor":new Vd(Ib.paint_symbol["text-translate-anchor"])}),layout:Le},Ye=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:dd;this.defaultValue=A};Ye.prototype.evaluate=function(A){if(A.formattedSection){var K=this.defaultValue.property.overrides;
if(K&&K.hasOverride(A.formattedSection))return K.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default};Ye.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)};Ye.prototype.outputDefined=function(){return!1};Ye.prototype.serialize=function(){return null};Jc("FormatSectionOverride",Ye,{omit:["defaultValue"]});var Gh=function(A){function K(T){A.call(this,
T,uf)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.recalculate=function(T,ma){if(A.prototype.recalculate.call(this,T,ma),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),
"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement"))if(T=this.layout.get("text-writing-mode")){ma=[];for(var va=0;va<T.length;va+=1){var Aa=T[va];0>ma.indexOf(Aa)&&ma.push(Aa)}this.layout._values["text-writing-mode"]=ma}else this.layout._values["text-writing-mode"]=
["horizontal"];this._setPaintOverrides()},K.prototype.getValueAndResolveTokens=function(T,ma,va,Aa){va=this.layout.get(T).evaluate(ma,{},va,Aa);T=this._unevaluatedLayout._values[T];return T.isDataDriven()||gd(T.value)||!va?va:function(Ma,Va){return Va.replace(/{([^{}]+)}/g,function(jb,qb){return qb in Ma?String(Ma[qb]):""})}(ma.properties,va)},K.prototype.createBucket=function(T){return new Qd(T)},K.prototype.queryRadius=function(){return 0},K.prototype.queryIntersectsFeature=function(){return!1},
K.prototype._setPaintOverrides=function(){for(var T=0,ma=uf.paint.overridableProperties;T<ma.length;T+=1){var va=ma[T];if(K.hasPaintOverride(this.layout,va)){var Aa=this.paint.get(va);var Ma=new Ye(Aa);Ma=new hj(Ma,Aa.property.specification);Ma="constant"===Aa.value.kind||"source"===Aa.value.kind?new ki("source",Ma):new fe("composite",Ma,Aa.value.zoomStops,Aa.value._interpolationType);this.paint._values[va]=new Te(Aa.property,Ma,Aa.parameters)}}},K.prototype._handleOverridablePaintPropertyUpdate=
function(T,ma,va){return!(!this.layout||ma.isDataDriven()||va.isDataDriven())&&K.hasPaintOverride(this.layout,T)},K.hasPaintOverride=function(T,ma){T=T.get("text-field");var va=uf.paint.properties[ma],Aa=!1,Ma=function(jb){for(var qb=0;qb<jb.length;qb+=1)if(va.overrides&&va.overrides.hasOverride(jb[qb]))return void(Aa=!0)};if("constant"===T.value.kind&&T.value.value instanceof ae)Ma(T.value.value.sections);else if("source"===T.value.kind){var Va=function(jb){Aa||(jb instanceof Fe&&oa(jb.value)===
Zd?Ma(jb.value.sections):jb instanceof Xf?Ma(jb.sections):jb.eachChild(Va))};ma=T.value;ma._styleExpression&&Va(ma._styleExpression.expression)}return Aa},K}(Fg),li={paint:new Zf({"background-color":new Vd(Ib.paint_background["background-color"]),"background-pattern":new Ci(Ib.paint_background["background-pattern"]),"background-opacity":new Vd(Ib.paint_background["background-opacity"])})},kj=function(A){function K(T){A.call(this,T,li)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=
K,K}(Fg),ph={paint:new Zf({"raster-opacity":new Vd(Ib.paint_raster["raster-opacity"]),"raster-hue-rotate":new Vd(Ib.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Vd(Ib.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Vd(Ib.paint_raster["raster-brightness-max"]),"raster-saturation":new Vd(Ib.paint_raster["raster-saturation"]),"raster-contrast":new Vd(Ib.paint_raster["raster-contrast"]),"raster-resampling":new Vd(Ib.paint_raster["raster-resampling"]),"raster-fade-duration":new Vd(Ib.paint_raster["raster-fade-duration"])})},
lj=function(A){function K(T){A.call(this,T,ph)}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K}(Fg),Ue=function(A){function K(T){A.call(this,T,{});this.implementation=T}return A&&(K.__proto__=A),(K.prototype=Object.create(A&&A.prototype)).constructor=K,K.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},K.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},K.prototype.recalculate=function(){},K.prototype.updateTransitions=
function(){},K.prototype.hasTransition=function(){},K.prototype.serialize=function(){},K.prototype.onAdd=function(T){this.implementation.onAdd&&this.implementation.onAdd(T,T.painter.context.gl)},K.prototype.onRemove=function(T){this.implementation.onRemove&&this.implementation.onRemove(T,T.painter.context.gl)},K}(Fg),Ne={circle:Uh,heatmap:nf,hillshade:Ai,fill:Pk,"fill-extrusion":dl,line:Sa,symbol:Gh,background:kj,raster:lj},eg=self.HTMLImageElement,Ik=self.HTMLCanvasElement,yi=self.HTMLVideoElement,
zi=self.ImageData,Zh=self.ImageBitmap,Mg=function(A,K,T,ma){this.context=A;this.format=T;this.texture=A.gl.createTexture();this.update(K,ma)};Mg.prototype.update=function(A,K,T){var ma=A.width,va=A.height,Aa=!(this.size&&this.size[0]===ma&&this.size[1]===va||T),Ma=this.context,Va=Ma.gl;(this.useMipmap=!(!K||!K.useMipmap),Va.bindTexture(Va.TEXTURE_2D,this.texture),Ma.pixelStoreUnpackFlipY.set(!1),Ma.pixelStoreUnpack.set(1),Ma.pixelStoreUnpackPremultiplyAlpha.set(this.format===Va.RGBA&&(!K||!1!==K.premultiply)),
Aa)?(this.size=[ma,va],A instanceof eg||A instanceof Ik||A instanceof yi||A instanceof zi||Zh&&A instanceof Zh?Va.texImage2D(Va.TEXTURE_2D,0,this.format,this.format,Va.UNSIGNED_BYTE,A):Va.texImage2D(Va.TEXTURE_2D,0,this.format,ma,va,0,this.format,Va.UNSIGNED_BYTE,A.data)):(T=T||{x:0,y:0},K=T.x,T=T.y,A instanceof eg||A instanceof Ik||A instanceof yi||A instanceof zi||Zh&&A instanceof Zh?Va.texSubImage2D(Va.TEXTURE_2D,0,K,T,Va.RGBA,Va.UNSIGNED_BYTE,A):Va.texSubImage2D(Va.TEXTURE_2D,0,K,T,ma,va,Va.RGBA,
Va.UNSIGNED_BYTE,A.data));this.useMipmap&&this.isSizePowerOfTwo()&&Va.generateMipmap(Va.TEXTURE_2D)};Mg.prototype.bind=function(A,K,T){var ma=this.context.gl;ma.bindTexture(ma.TEXTURE_2D,this.texture);T!==ma.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(T=ma.LINEAR);A!==this.filter&&(ma.texParameteri(ma.TEXTURE_2D,ma.TEXTURE_MAG_FILTER,A),ma.texParameteri(ma.TEXTURE_2D,ma.TEXTURE_MIN_FILTER,T||A),this.filter=A);K!==this.wrap&&(ma.texParameteri(ma.TEXTURE_2D,ma.TEXTURE_WRAP_S,K),ma.texParameteri(ma.TEXTURE_2D,
ma.TEXTURE_WRAP_T,K),this.wrap=K)};Mg.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/Math.LN2%1};Mg.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var vl=function(A){var K=this;this._callback=A;this._triggered=!1;"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){K._triggered=!1;K._callback()})};vl.prototype.trigger=function(){var A=this;this._triggered||
(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1;A._callback()},0))};vl.prototype.remove=function(){delete this._channel;this._callback=function(){}};var nk=function(A,K,T){this.target=A;this.parent=K;this.mapId=T;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};u(["receive","process"],this);this.invoker=new vl(this.process);this.target.addEventListener("message",this.receive,!1);this.globalScope=B()?A:self};nk.prototype.send=
function(A,K,T,ma,va){var Aa=this;void 0===va&&(va=!1);var Ma=Math.round(1E18*Math.random()).toString(36).substring(0,10);T&&(this.callbacks[Ma]=T);var Va=G(this.globalScope)?void 0:[];return this.target.postMessage({id:Ma,type:A,hasCallback:!!T,targetMapId:ma,mustQueue:va,sourceMapId:this.mapId,data:ud(K,Va)},Va),{cancel:function(){T&&delete Aa.callbacks[Ma];Aa.target.postMessage({id:Ma,type:"\x3ccancel\x3e",targetMapId:ma,sourceMapId:Aa.mapId})}}};nk.prototype.receive=function(A){var K=A.data;!(A=
K.id)||K.targetMapId&&this.mapId!==K.targetMapId||("\x3ccancel\x3e"===K.type?(delete this.tasks[A],K=this.cancelCallbacks[A],delete this.cancelCallbacks[A],K&&K()):B()||K.mustQueue?(this.tasks[A]=K,this.taskQueue.push(A),this.invoker.trigger()):this.processTask(A,K))};nk.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),K=this.tasks[A];delete this.tasks[A];this.taskQueue.length&&this.invoker.trigger();K&&this.processTask(A,K)}};nk.prototype.processTask=function(A,
K){var T=this;if("\x3cresponse\x3e"===K.type){var ma=this.callbacks[A];delete this.callbacks[A];ma&&(K.error?ma(yd(K.error)):ma(null,yd(K.data)))}else{var va=!1,Aa=G(this.globalScope)?void 0:[];ma=K.hasCallback?function(jb,qb){va=!0;delete T.cancelCallbacks[A];T.target.postMessage({id:A,type:"\x3cresponse\x3e",sourceMapId:T.mapId,error:jb?ud(jb):null,data:ud(qb,Aa)},Aa)}:function(jb){va=!0};var Ma=null,Va=yd(K.data);this.parent[K.type]?Ma=this.parent[K.type](K.sourceMapId,Va,ma):this.parent.getWorkerSource?
(Ma=K.type.split("."),Ma=this.parent.getWorkerSource(K.sourceMapId,Ma[0],Va.source)[Ma[1]](Va,ma)):ma(Error("Could not find function "+K.type));!va&&Ma&&Ma.cancel&&(this.cancelCallbacks[A]=Ma.cancel)}};nk.prototype.remove=function(){this.invoker.remove();this.target.removeEventListener("message",this.receive,!1)};var qf=function(A,K){A&&(K?this.setSouthWest(A).setNorthEast(K):4===A.length?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};qf.prototype.setNorthEast=
function(A){return this._ne=A instanceof Ze?new Ze(A.lng,A.lat):Ze.convert(A),this};qf.prototype.setSouthWest=function(A){return this._sw=A instanceof Ze?new Ze(A.lng,A.lat):Ze.convert(A),this};qf.prototype.extend=function(A){var K,T=this._sw,ma=this._ne;if(A instanceof Ze)var va=K=A;else{if(!(A instanceof qf))return Array.isArray(A)?4===A.length||A.every(Array.isArray)?this.extend(qf.convert(A)):this.extend(Ze.convert(A)):this;if(va=A._ne,!(K=A._sw)||!va)return this}return T||ma?(T.lng=Math.min(K.lng,
T.lng),T.lat=Math.min(K.lat,T.lat),ma.lng=Math.max(va.lng,ma.lng),ma.lat=Math.max(va.lat,ma.lat)):(this._sw=new Ze(K.lng,K.lat),this._ne=new Ze(va.lng,va.lat)),this};qf.prototype.getCenter=function(){return new Ze((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};qf.prototype.getSouthWest=function(){return this._sw};qf.prototype.getNorthEast=function(){return this._ne};qf.prototype.getNorthWest=function(){return new Ze(this.getWest(),this.getNorth())};qf.prototype.getSouthEast=function(){return new Ze(this.getEast(),
this.getSouth())};qf.prototype.getWest=function(){return this._sw.lng};qf.prototype.getSouth=function(){return this._sw.lat};qf.prototype.getEast=function(){return this._ne.lng};qf.prototype.getNorth=function(){return this._ne.lat};qf.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};qf.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};qf.prototype.isEmpty=function(){return!(this._sw&&this._ne)};qf.prototype.contains=function(A){var K=
Ze.convert(A);A=K.lng;K=K.lat;var T=this._sw.lng<=A&&A<=this._ne.lng;return this._sw.lng>this._ne.lng&&(T=this._sw.lng>=A&&A>=this._ne.lng),this._sw.lat<=K&&K<=this._ne.lat&&T};qf.convert=function(A){return!A||A instanceof qf?A:new qf(A)};var Ze=function(A,K){if(isNaN(A)||isNaN(K))throw Error("Invalid LngLat object: ("+A+", "+K+")");if(this.lng=+A,this.lat=+K,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};Ze.prototype.wrap=function(){return new Ze(f(this.lng,
-180,180),this.lat)};Ze.prototype.toArray=function(){return[this.lng,this.lat]};Ze.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};Ze.prototype.distanceTo=function(A){var K=Math.PI/180,T=this.lat*K,ma=A.lat*K;return 6371008.8*Math.acos(Math.min(Math.sin(T)*Math.sin(ma)+Math.cos(T)*Math.cos(ma)*Math.cos((A.lng-this.lng)*K),1))};Ze.prototype.toBounds=function(A){void 0===A&&(A=0);A=360*A/40075017;var K=A/Math.cos(Math.PI/180*this.lat);return new qf(new Ze(this.lng-K,this.lat-
A),new Ze(this.lng+K,this.lat+A))};Ze.convert=function(A){if(A instanceof Ze)return A;if(Array.isArray(A)&&(2===A.length||3===A.length))return new Ze(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&"object"==typeof A&&null!==A)return new Ze(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, an object {lon: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var fl=1.27420176E7*Math.PI,Jj=function(A,K,T){void 0===T&&(T=0);this.x=+A;this.y=+K;this.z=+T};Jj.fromLngLat=function(A,K){void 0===K&&(K=0);A=Ze.convert(A);return new Jj(Zg(A.lng),Af(A.lat),K/(fl*Math.cos(A.lat*Math.PI/180)))};Jj.prototype.toLngLat=function(){return new Ze(360*this.x-180,xh(this.y))};Jj.prototype.toAltitude=function(){return this.z*fl*Math.cos(xh(this.y)*Math.PI/180)};Jj.prototype.meterInMercatorCoordinateUnits=function(){return 1/fl*(A=xh(this.y),1/Math.cos(A*Math.PI/180));var A};
var Kj=function(A,K,T){this.z=A;this.x=K;this.y=T;this.key=kg(0,A,A,K,T)};Kj.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y};Kj.prototype.url=function(A,K){var T,ma,va,Aa,Ma,Va=(ma=this.y,va=this.z,Aa=ak(256*(T=this.x),256*(ma=Math.pow(2,va)-ma-1),va),Ma=ak(256*(T+1),256*(ma+1),va),Aa[0]+","+Aa[1]+","+Ma[0]+","+Ma[1]),jb;T="";for(ma=this.z;0<ma;ma--)T+=(this.x&(jb=1<<ma-1)?1:0)+(this.y&jb?2:0);jb=T;return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+
(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===K?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",jb).replace("{bbox-epsg-3857}",Va)};Kj.prototype.getTilePoint=function(A){var K=Math.pow(2,this.z);return new pe(8192*(A.x*K-this.x),8192*(A.y*K-this.y))};Kj.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Cl=function(A,K){this.wrap=A;this.canonical=K;this.key=kg(A,K.z,K.z,K.x,K.y)},rf=function(A,K,T,ma,
va){this.overscaledZ=A;this.wrap=K;this.canonical=new Kj(T,+ma,+va);this.key=kg(K,A,T,ma,va)};rf.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)};rf.prototype.scaledTo=function(A){var K=this.canonical.z-A;return A>this.canonical.z?new rf(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rf(A,this.wrap,A,this.canonical.x>>K,this.canonical.y>>K)};rf.prototype.calculateScaledKey=function(A,K){var T=this.canonical.z-
A;return A>this.canonical.z?kg(this.wrap*+K,A,this.canonical.z,this.canonical.x,this.canonical.y):kg(this.wrap*+K,A,A,this.canonical.x>>T,this.canonical.y>>T)};rf.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var K=this.canonical.z-A.canonical.z;return 0===A.overscaledZ||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>K&&A.canonical.y===this.canonical.y>>K};rf.prototype.children=function(A){if(this.overscaledZ>=A)return[new rf(this.overscaledZ+1,this.wrap,this.canonical.z,
this.canonical.x,this.canonical.y)];A=this.canonical.z+1;var K=2*this.canonical.x,T=2*this.canonical.y;return[new rf(A,this.wrap,A,K,T),new rf(A,this.wrap,A,K+1,T),new rf(A,this.wrap,A,K,T+1),new rf(A,this.wrap,A,K+1,T+1)]};rf.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))};rf.prototype.wrapped=function(){return new rf(this.overscaledZ,
0,this.canonical.z,this.canonical.x,this.canonical.y)};rf.prototype.unwrapTo=function(A){return new rf(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)};rf.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};rf.prototype.toUnwrapped=function(){return new Cl(this.wrap,this.canonical)};rf.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};rf.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new Jj(A.x-
this.wrap,A.y))};Jc("CanonicalTileID",Kj);Jc("OverscaledTileID",rf,{omit:["posMatrix"]});var Gi=function(A,K,T){if(this.uid=A,K.height!==K.width)throw new RangeError("DEM tiles must be square");if(T&&"mapbox"!==T&&"terrarium"!==T)return x('"'+T+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=K.height;A=this.dim=K.height-2;this.data=new Uint32Array(K.data.buffer);this.encoding=T||"mapbox";for(K=0;K<A;K++)this.data[this._idx(-1,K)]=this.data[this._idx(0,
K)],this.data[this._idx(A,K)]=this.data[this._idx(A-1,K)],this.data[this._idx(K,-1)]=this.data[this._idx(K,0)],this.data[this._idx(K,A)]=this.data[this._idx(K,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)];this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)];this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)];this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)]};Gi.prototype.get=function(A,K){var T=new Uint8Array(this.data.buffer);A=4*this._idx(A,K);return("terrarium"===this.encoding?
this._unpackTerrarium:this._unpackMapbox)(T[A],T[A+1],T[A+2])};Gi.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1E4]};Gi.prototype._idx=function(A,K){if(-1>A||A>=this.dim+1||-1>K||K>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(K+1)*this.stride+(A+1)};Gi.prototype._unpackMapbox=function(A,K,T){return(65536*A+256*K+T)/10-1E4};Gi.prototype._unpackTerrarium=function(A,K,T){return 256*A+K+T/256-32768};
Gi.prototype.getPixels=function(){return new Mf({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};Gi.prototype.backfillBorder=function(A,K,T){if(this.dim!==A.dim)throw Error("dem dimension mismatch");var ma=K*this.dim,va=K*this.dim+this.dim,Aa=T*this.dim,Ma=T*this.dim+this.dim;switch(K){case -1:ma=va-1;break;case 1:va=ma+1}switch(T){case -1:Aa=Ma-1;break;case 1:Ma=Aa+1}K=-K*this.dim;for(T=-T*this.dim;Aa<Ma;Aa++)for(var Va=ma;Va<va;Va++)this.data[this._idx(Va,Aa)]=A.data[this._idx(Va+
K,Aa+T)]};Jc("DEMData",Gi);var hl=function(A){this._stringToNumber={};this._numberToString=[];for(var K=0;K<A.length;K++){var T=A[K];this._stringToNumber[T]=K;this._numberToString[K]=T}};hl.prototype.encode=function(A){return this._stringToNumber[A]};hl.prototype.decode=function(A){return this._numberToString[A]};var il=function(A,K,T,ma,va){this.type="Feature";this._vectorTileFeature=A;A._z=K;A._x=T;A._y=ma;this.properties=A.properties;this.id=va},wl={geometry:{configurable:!0}};wl.geometry.get=
function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};wl.geometry.set=function(A){this._geometry=A};il.prototype.toJSON=function(){var A={geometry:this.geometry},K;for(K in this)"_geometry"!==K&&"_vectorTileFeature"!==K&&(A[K]=this[K]);return A};Object.defineProperties(il.prototype,wl);var ok=function(){this.state={};this.stateChanges={};this.deletedStates=
{}};ok.prototype.updateState=function(A,K,T){K=String(K);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][K]=this.stateChanges[A][K]||{},d(this.stateChanges[A][K],T),null===this.deletedStates[A])for(var ma in this.deletedStates[A]={},this.state[A])ma!==K&&(this.deletedStates[A][ma]=null);else if(this.deletedStates[A]&&null===this.deletedStates[A][K])for(var va in this.deletedStates[A][K]={},this.state[A][K])T[va]||(this.deletedStates[A][K][va]=null);else for(var Aa in T)this.deletedStates[A]&&
this.deletedStates[A][K]&&null===this.deletedStates[A][K][Aa]&&delete this.deletedStates[A][K][Aa]};ok.prototype.removeFeatureState=function(A,K,T){if(null!==this.deletedStates[A]){var ma=String(K);if(this.deletedStates[A]=this.deletedStates[A]||{},T&&void 0!==K)null!==this.deletedStates[A][ma]&&(this.deletedStates[A][ma]=this.deletedStates[A][ma]||{},this.deletedStates[A][ma][T]=null);else if(void 0!==K)if(this.stateChanges[A]&&this.stateChanges[A][ma])for(T in this.deletedStates[A][ma]={},this.stateChanges[A][ma])this.deletedStates[A][ma][T]=
null;else this.deletedStates[A][ma]=null;else this.deletedStates[A]=null}};ok.prototype.getState=function(A,K){var T=String(K);T=d({},(this.state[A]||{})[T],(this.stateChanges[A]||{})[T]);if(null===this.deletedStates[A])return{};if(this.deletedStates[A]){A=this.deletedStates[A][K];if(null===A)return{};for(var ma in A)delete T[ma]}return T};ok.prototype.initializeTileState=function(A,K){A.setFeatureState(this.state,K)};ok.prototype.coalesceChanges=function(A,K){var T={};for(Ma in this.stateChanges){this.state[Ma]=
this.state[Ma]||{};var ma={},va;for(va in this.stateChanges[Ma])this.state[Ma][va]||(this.state[Ma][va]={}),d(this.state[Ma][va],this.stateChanges[Ma][va]),ma[va]=this.state[Ma][va];T[Ma]=ma}for(var Aa in this.deletedStates){this.state[Aa]=this.state[Aa]||{};var Ma={};if(null===this.deletedStates[Aa])for(var Va in this.state[Aa])Ma[Va]={},this.state[Aa][Va]={};else for(var jb in this.deletedStates[Aa]){if(null===this.deletedStates[Aa][jb])this.state[Aa][jb]={};else for(ma=0,va=Object.keys(this.deletedStates[Aa][jb]);ma<
va.length;ma+=1)delete this.state[Aa][jb][va[ma]];Ma[jb]=this.state[Aa][jb]}T[Aa]=T[Aa]||{};d(T[Aa],Ma)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(T).length)for(var qb in A)A[qb].setFeatureState(T,K)};var Hi=function(A,K){this.tileID=A;this.x=A.canonical.x;this.y=A.canonical.y;this.z=A.canonical.z;this.grid=new cd(8192,16,0);this.grid3D=new cd(8192,16,0);this.featureIndexArray=new Jh;this.promoteId=K};Hi.prototype.insert=function(A,K,T,ma,va,Aa){A=this.featureIndexArray.length;
this.featureIndexArray.emplaceBack(T,ma,va);T=Aa?this.grid3D:this.grid;for(ma=0;ma<K.length;ma++){va=K[ma];Aa=[1/0,1/0,-1/0,-1/0];for(var Ma=0;Ma<va.length;Ma++){var Va=va[Ma];Aa[0]=Math.min(Aa[0],Va.x);Aa[1]=Math.min(Aa[1],Va.y);Aa[2]=Math.max(Aa[2],Va.x);Aa[3]=Math.max(Aa[3],Va.y)}8192>Aa[0]&&8192>Aa[1]&&0<=Aa[2]&&0<=Aa[3]&&T.insert(A,Aa[0],Aa[1],Aa[2],Aa[3])}};Hi.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new Di.VectorTile(new Be(this.rawTileData))).layers,this.sourceLayerCoder=
new hl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers};Hi.prototype.query=function(A,K,T,ma){var va=this;this.loadVTLayers();var Aa=A.params||{},Ma=8192/A.tileSize/A.scale,Va=xb(Aa.filter),jb=A.queryGeometry,qb=A.queryPadding*Ma,zb=$g(jb),Hb=this.grid.query(zb.minX-qb,zb.minY-qb,zb.maxX+qb,zb.maxY+qb),Ub=$g(A.cameraQueryGeometry);zb=0;for(Ub=this.grid3D.query(Ub.minX-qb,Ub.minY-qb,Ub.maxX+qb,Ub.maxY+qb,function(bc,Ec,ld,pd){a:{var bd=A.cameraQueryGeometry;bc-=
qb;Ec-=qb;ld+=qb;pd+=qb;for(var Ad=0;Ad<bd.length;Ad+=1){var zd=bd[Ad];if(bc<=zd.x&&Ec<=zd.y&&ld>=zd.x&&pd>=zd.y){bd=!0;break a}}bc=[new pe(bc,Ec),new pe(bc,pd),new pe(ld,pd),new pe(ld,Ec)];if(2<bd.length)for(Ec=0;Ec<bc.length;Ec+=1)if(wb(bd,bc[Ec])){bd=!0;break a}for(Ec=0;Ec<bd.length-1;Ec++){pd=bd[Ec];ld=bd[Ec+1];Ad=bc;zd=Ad[0];var Cd=Ad[2];pd.x<zd.x&&ld.x<zd.x||pd.x>Cd.x&&ld.x>Cd.x||pd.y<zd.y&&ld.y<zd.y||pd.y>Cd.y&&ld.y>Cd.y?pd=!1:(zd=E(pd,ld,Ad[0]),pd=zd!==E(pd,ld,Ad[1])||zd!==E(pd,ld,Ad[2])||
zd!==E(pd,ld,Ad[3]));if(pd){bd=!0;break a}}bd=!1}return bd});zb<Ub.length;zb+=1)Hb.push(Ub[zb]);Hb.sort(yh);var Sb,$b={};zb=function(bc){bc=Hb[bc];if(bc!==Sb){Sb=bc;bc=va.featureIndexArray.get(bc);var Ec=null;va.loadMatchingFeature($b,bc.bucketIndex,bc.sourceLayerIndex,bc.featureIndex,Va,Aa.layers,Aa.availableImages,K,T,ma,function(ld,pd,bd){return Ec||(Ec=Xd(ld)),pd.queryIntersectsFeature(jb,ld,bd,Ec,va.z,A.transform,Ma,A.pixelPosMatrix)})}};for(Ub=0;Ub<Hb.length;Ub++)zb(Ub);return $b};Hi.prototype.loadMatchingFeature=
function(A,K,T,ma,va,Aa,Ma,Va,jb,qb,zb){K=this.bucketLayerIDs[K];var Hb;if(!(Hb=!Aa))a:{for(Hb=0;Hb<Aa.length;Hb++)if(0<=K.indexOf(Aa[Hb])){Hb=!0;break a}Hb=!1}if(Hb&&(Hb=this.sourceLayerCoder.decode(T),T=this.vtLayers[Hb].feature(ma),va.filter(new Pe(this.tileID.overscaledZ),T)))for(va=this.getId(T,Hb),Hb=0;Hb<K.length;Hb++){var Ub=K[Hb];if(!(Aa&&0>Aa.indexOf(Ub))){var Sb=Va[Ub];if(Sb){var $b={};void 0!==va&&qb&&($b=qb.getState(Sb.sourceLayer||"_geojsonTileLayer",va));var bc=jb[Ub];bc.paint=lg(bc.paint,
Sb.paint,T,$b,Ma);bc.layout=lg(bc.layout,Sb.layout,T,$b,Ma);if(Sb=!zb||zb(T,Sb,$b))$b=new il(T,this.z,this.x,this.y,va),$b.layer=bc,bc=A[Ub],void 0===bc&&(bc=A[Ub]=[]),bc.push({featureIndex:ma,feature:$b,intersectionZ:Sb})}}}};Hi.prototype.lookupSymbolFeatures=function(A,K,T,ma,va,Aa,Ma,Va){var jb={};this.loadVTLayers();va=xb(va);for(var qb=0;qb<A.length;qb+=1)this.loadMatchingFeature(jb,T,ma,A[qb],va,Aa,Ma,Va,K);return jb};Hi.prototype.hasLayer=function(A){for(var K=0,T=this.bucketLayerIDs;K<T.length;K+=
1)for(var ma=0,va=T[K];ma<va.length;ma+=1)if(A===va[ma])return!0;return!1};Hi.prototype.getId=function(A,K){var T=A.id;return this.promoteId&&"boolean"==typeof(T=A.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[K]])&&(T=Number(T)),T};Jc("FeatureIndex",Hi,{omit:["rawTileData","sourceLayerCoder"]});var zf=function(A,K){this.tileID=A;this.uid=kf++;this.uses=0;this.tileSize=K;this.buckets={};this.expirationTime=null;this.queryPadding=0;this.hasRTLText=this.hasSymbolBuckets=!1;
this.dependencies={};this.expiredRequestCount=0;this.state="loading"};zf.prototype.registerFadeDuration=function(A){A+=this.timeAdded;A<zh.now()||this.fadeEndTime&&A<this.fadeEndTime||(this.fadeEndTime=A)};zf.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state};zf.prototype.loadVectorData=function(A,K,T){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var ma in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,
A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(Va,jb){var qb={};if(!jb)return qb;for(var zb=function(){var Sb=Ub[Hb],$b=Sb.layerIds.map(function(Ec){return jb.getLayer(Ec)}).filter(Boolean);if(0!==$b.length){Sb.layers=$b;Sb.stateDependentLayerIds&&(Sb.stateDependentLayers=Sb.stateDependentLayerIds.map(function(Ec){return $b.filter(function(ld){return ld.id===
Ec})[0]}));for(var bc=0;bc<$b.length;bc+=1)qb[$b[bc].id]=Sb}},Hb=0,Ub=Va;Hb<Ub.length;Hb+=1)zb();return qb}(A.buckets,K.style),this.hasSymbolBuckets=!1,this.buckets){var va=this.buckets[ma];if(va instanceof Qd){if(this.hasSymbolBuckets=!0,!T)break;va.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Aa in this.buckets)if(T=this.buckets[Aa],T instanceof Qd&&T.hasRTLText){this.hasRTLText=!0;Pf.isLoading()||Pf.isLoaded()||"deferred"!==Ef||ij();break}for(var Ma in this.queryPadding=
0,this.buckets)Aa=this.buckets[Ma],this.queryPadding=Math.max(this.queryPadding,K.style.getLayer(Ma).queryRadius(Aa));A.imageAtlas&&(this.imageAtlas=A.imageAtlas);A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new bi};zf.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();
this.latestFeatureIndex=null;this.state="unloaded"};zf.prototype.getBucket=function(A){return this.buckets[A.id]};zf.prototype.upload=function(A){for(var K in this.buckets){var T=this.buckets[K];T.uploadPending()&&T.upload(A)}K=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Mg(A,this.imageAtlas.image,K.RGBA),this.imageAtlas.uploaded=!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new Mg(A,this.glyphAtlasImage,K.ALPHA),this.glyphAtlasImage=null)};zf.prototype.prepare=
function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)};zf.prototype.queryRenderedFeatures=function(A,K,T,ma,va,Aa,Ma,Va,jb,qb){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ma,cameraQueryGeometry:va,scale:Aa,tileSize:this.tileSize,pixelPosMatrix:qb,transform:Va,params:Ma,queryPadding:this.queryPadding*jb},A,K,T):{}};zf.prototype.querySourceFeatures=function(A,K){var T=this.latestFeatureIndex;if(T&&
T.rawTileData){var ma=T.loadVTLayers(),va=K?K.sourceLayer:"";if(ma=ma._geojsonTileLayer||ma[va]){K=xb(K&&K.filter);var Aa=this.tileID.canonical,Ma=Aa.z,Va=Aa.x;Aa=Aa.y;for(var jb={z:Ma,x:Va,y:Aa},qb=0;qb<ma.length;qb++){var zb=ma.feature(qb);if(K.filter(new Pe(this.tileID.overscaledZ),zb)){var Hb=T.getId(zb,va);zb=new il(zb,Ma,Va,Aa,Hb);zb.tile=jb;A.push(zb)}}}}};zf.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};zf.prototype.patternsLoaded=
function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length};zf.prototype.setExpiryData=function(A){var K=this.expirationTime;A.cacheControl?(A=t(A.cacheControl),A["max-age"]&&(this.expirationTime=Date.now()+1E3*A["max-age"])):A.expires&&(this.expirationTime=(new Date(A.expires)).getTime());if(this.expirationTime){A=Date.now();var T=!1;this.expirationTime>A?T=!1:K?this.expirationTime<K?T=!0:(K=this.expirationTime-K)?this.expirationTime=A+Math.max(K,3E4):T=!0:T=!0;T?(this.expiredRequestCount++,
this.state="expired"):this.expiredRequestCount=0}};zf.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};zf.prototype.setFeatureState=function(A,K){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(A).length){var T=this.latestFeatureIndex.loadVTLayers(),ma;for(ma in this.buckets)if(K.style.hasLayer(ma)){var va=
this.buckets[ma],Aa=va.layers[0].sourceLayer||"_geojsonTileLayer",Ma=T[Aa];Aa=A[Aa];Ma&&Aa&&0!==Object.keys(Aa).length&&(va.update(Aa,Ma,this.imageAtlas&&this.imageAtlas.patternPositions||{}),(Ma=K&&K.style&&K.style.getLayer(ma))&&(this.queryPadding=Math.max(this.queryPadding,Ma.queryRadius(va))))}}};zf.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil};zf.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<zh.now()};zf.prototype.clearFadeHold=
function(){this.symbolFadeHoldUntil=void 0};zf.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=zh.now()+A};zf.prototype.setDependencies=function(A,K){for(var T={},ma=0;ma<K.length;ma+=1)T[K[ma]]=!0;this.dependencies[A]=T};zf.prototype.hasDependency=function(A,K){for(var T=0;T<A.length;T+=1){var ma=this.dependencies[A[T]];if(ma)for(var va=0,Aa=K;va<Aa.length;va+=1)if(ma[Aa[va]])return!0}return!1};var ej=self.performance,Dl=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,
"end"].join("#"),measure:A.url.toString()};ej.mark(this._marks.start)};Dl.prototype.finish=function(){ej.mark(this._marks.end);var A=ej.getEntriesByName(this._marks.measure);return 0===A.length&&(ej.measure(this._marks.measure,this._marks.start,this._marks.end),A=ej.getEntriesByName(this._marks.measure),ej.clearMarks(this._marks.start),ej.clearMarks(this._marks.end),ej.clearMeasures(this._marks.measure)),A};a.Actor=nk;a.AlphaImage=fh;a.CanonicalTileID=Kj;a.CollisionBoxArray=bi;a.Color=Md;a.DEMData=
Gi;a.DataConstantProperty=Vd;a.DictionaryCoder=hl;a.EXTENT=8192;a.ErrorEvent=rc;a.EvaluationParameters=Pe;a.Event=pc;a.Evented=hc;a.FeatureIndex=Hi;a.FillBucket=Dg;a.FillExtrusionBucket=Ng;a.ImageAtlas=Pc;a.ImagePosition=mc;a.LineBucket=Ba;a.LngLat=Ze;a.LngLatBounds=qf;a.MercatorCoordinate=Jj;a.ONE_EM=24;a.OverscaledTileID=rf;a.Point=pe;a.Point$1=pe;a.Properties=Zf;a.Protobuf=Be;a.RGBAImage=Mf;a.RequestManager=If;a.RequestPerformance=Dl;a.ResourceType=aa;a.SegmentVector=mf;a.SourceFeatureState=ok;
a.StructArrayLayout1ui2=bj;a.StructArrayLayout2f1f2i16=Ug;a.StructArrayLayout2i4=lh;a.StructArrayLayout3ui6=qh;a.StructArrayLayout4i8=Ni;a.SymbolBucket=Qd;a.Texture=Mg;a.Tile=zf;a.Transitionable=Ch;a.Uniform1f=kk;a.Uniform1i=pl;a.Uniform2f=ql;a.Uniform3f=rl;a.Uniform4f=$k;a.UniformColor=al;a.UniformMatrix4f=sl;a.UnwrappedTileID=Cl;a.ValidationError=Rb;a.WritingMode=Oc;a.ZoomHistory=Zi;a.add=function(A,K,T){return A[0]=K[0]+T[0],A[1]=K[1]+T[1],A[2]=K[2]+T[2],A};a.addDynamicAttributes=cg;a.asyncAll=
function(A,K,T){if(!A.length)return T(null,[]);var ma=A.length,va=Array(A.length),Aa=null;A.forEach(function(Ma,Va){K(Ma,function(jb,qb){jb&&(Aa=jb);va[Va]=qb;0==--ma&&T(Aa,va)})})};a.bezier=n;a.bindAll=u;a.browser=zh;a.cacheEntryPossiblyAdded=function(A){++da>ub&&(A.getActor().send("enforceCacheSizeLimit",zj),da=0)};a.clamp=c;a.clearTileCache=function(A){var K=self.caches.delete("mapbox-tiles");A&&K.catch(A).then(function(){return A()})};a.clipLine=si;a.clone=function(A){var K=new Wf(16);return K[0]=
A[0],K[1]=A[1],K[2]=A[2],K[3]=A[3],K[4]=A[4],K[5]=A[5],K[6]=A[6],K[7]=A[7],K[8]=A[8],K[9]=A[9],K[10]=A[10],K[11]=A[11],K[12]=A[12],K[13]=A[13],K[14]=A[14],K[15]=A[15],K};a.clone$1=D;a.clone$2=function(A){var K=new Wf(3);return K[0]=A[0],K[1]=A[1],K[2]=A[2],K};a.collisionCircleLayout=Db;a.config=lf;a.create=function(){var A=new Wf(16);return Wf!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A};a.create$1=function(){var A=
new Wf(9);return Wf!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A};a.create$2=function(){var A=new Wf(4);return Wf!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A};a.createCommonjsModule=g;a.createExpression=Xc;a.createLayout=Hd;a.createStyleLayer=function(A){return"custom"===A.type?new Ue(A):new Ne[A.type](A)};a.cross=function(A,K,T){var ma=K[0],va=K[1];K=K[2];var Aa=T[0],Ma=T[1];T=T[2];return A[0]=va*T-K*Ma,A[1]=K*Aa-ma*T,A[2]=ma*Ma-va*Aa,A};a.deepEqual=function ma(K,
T){if(Array.isArray(K)){if(!Array.isArray(T)||K.length!==T.length)return!1;for(var va=0;va<K.length;va++)if(!ma(K[va],T[va]))return!1;return!0}if("object"==typeof K&&null!==K&&null!==T){if("object"!=typeof T||Object.keys(K).length!==Object.keys(T).length)return!1;for(va in K)if(!ma(K[va],T[va]))return!1;return!0}return K===T};a.dot=function(K,T){return K[0]*T[0]+K[1]*T[1]+K[2]*T[2]};a.dot$1=function(K,T){return K[0]*T[0]+K[1]*T[1]+K[2]*T[2]+K[3]*T[3]};a.ease=Dk;a.emitValidationErrors=wd;a.endsWith=
v;a.enforceCacheSizeLimit=function(K){O();Jf&&Jf.then(function(T){T.keys().then(function(ma){for(var va=0;va<ma.length-K;va++)T.delete(ma[va])})})};a.evaluateSizeForFeature=tj;a.evaluateSizeForZoom=uj;a.evaluateVariableOffset=Rf;a.evented=Li;a.extend=d;a.featureFilter=xb;a.filterObject=y;a.fromRotation=function(K,T){var ma=Math.sin(T);T=Math.cos(T);return K[0]=T,K[1]=ma,K[2]=0,K[3]=-ma,K[4]=T,K[5]=0,K[6]=0,K[7]=0,K[8]=1,K};a.getAnchorAlignment=Me;a.getAnchorJustification=wj;a.getArrayBuffer=Xa;a.getImage=
Mb;a.getJSON=function(K,T){return Na(d(K,{type:"json"}),T)};a.getRTLTextPluginStatus=function(){return Ef};a.getReferrer=za;a.getVideo=function(K,T){var ma=self.document.createElement("video");ma.muted=!0;ma.onloadstart=function(){T(null,ma)};for(var va=0;va<K.length;va++){var Aa=self.document.createElement("source");var Ma=K[va];var Va=void 0;(Va=self.document.createElement("a")).href=Ma;Va.protocol===self.document.location.protocol&&Va.host===self.document.location.host||(ma.crossOrigin="Anonymous");
Aa.src=K[va];ma.appendChild(Aa)}return{cancel:function(){}}};a.identity=wc;a.invert=function(K,T){var ma=T[0],va=T[1],Aa=T[2],Ma=T[3],Va=T[4],jb=T[5],qb=T[6],zb=T[7],Hb=T[8],Ub=T[9],Sb=T[10],$b=T[11],bc=T[12],Ec=T[13],ld=T[14];T=T[15];var pd=ma*jb-va*Va,bd=ma*qb-Aa*Va,Ad=ma*zb-Ma*Va,zd=va*qb-Aa*jb,Cd=va*zb-Ma*jb,Od=Aa*zb-Ma*qb,Ud=Hb*Ec-Ub*bc,ce=Hb*ld-Sb*bc,ee=Hb*T-$b*bc,Td=Ub*ld-Sb*Ec,Yd=Ub*T-$b*Ec,se=Sb*T-$b*ld,Pd=pd*se-bd*Yd+Ad*Td+zd*ee-Cd*ce+Od*Ud;return Pd?(K[0]=(jb*se-qb*Yd+zb*Td)*(Pd=1/Pd),
K[1]=(Aa*Yd-va*se-Ma*Td)*Pd,K[2]=(Ec*Od-ld*Cd+T*zd)*Pd,K[3]=(Sb*Cd-Ub*Od-$b*zd)*Pd,K[4]=(qb*ee-Va*se-zb*ce)*Pd,K[5]=(ma*se-Aa*ee+Ma*ce)*Pd,K[6]=(ld*Ad-bc*Od-T*bd)*Pd,K[7]=(Hb*Od-Sb*Ad+$b*bd)*Pd,K[8]=(Va*Yd-jb*ee+zb*Ud)*Pd,K[9]=(va*ee-ma*Yd-Ma*Ud)*Pd,K[10]=(bc*Cd-Ec*Ad+T*pd)*Pd,K[11]=(Ub*Ad-Hb*Cd-$b*pd)*Pd,K[12]=(jb*ce-Va*Td-qb*Ud)*Pd,K[13]=(ma*Td-va*ce+Aa*Ud)*Pd,K[14]=(Ec*bd-bc*zd-ld*pd)*Pd,K[15]=(Hb*zd-Ub*bd+Sb*pd)*Pd,K):null};a.isChar=Id;a.isMapboxURL=M;a.keysDifference=function(K,T){var ma=[],
va;for(va in K)va in T||ma.push(va);return ma};a.makeRequest=Na;a.mapObject=w;a.mercatorXfromLng=Zg;a.mercatorYfromLat=Af;a.mercatorZfromAltitude=function(K,T){return K/(fl*Math.cos(T*Math.PI/180))};a.mul=cc;a.multiply=cc;a.mvt=Di;a.normalize=function(K,T){var ma=T[0],va=T[1],Aa=T[2];ma=ma*ma+va*va+Aa*Aa;return 0<ma&&(ma=1/Math.sqrt(ma)),K[0]=T[0]*ma,K[1]=T[1]*ma,K[2]=T[2]*ma,K};a.number=hb;a.offscreenCanvasSupported=U;a.ortho=function(K,T,ma,va,Aa,Ma,Va){var jb=1/(T-ma),qb=1/(va-Aa),zb=1/(Ma-Va);
return K[0]=-2*jb,K[1]=0,K[2]=0,K[3]=0,K[4]=0,K[5]=-2*qb,K[6]=0,K[7]=0,K[8]=0,K[9]=0,K[10]=2*zb,K[11]=0,K[12]=(T+ma)*jb,K[13]=(Aa+va)*qb,K[14]=(Va+Ma)*zb,K[15]=1,K};a.parseGlyphPBF=function(K){return(new Be(K)).readFields(Yj,[])};a.pbf=Be;a.performSymbolLayout=function(K,T,ma,va,Aa,Ma,Va){K.createArrays();K.tilePixelRatio=8192/(512*K.overscaling);K.compareText={};K.iconsNeedLinear=!1;var jb=K.layers[0].layout,qb=K.layers[0]._unevaluatedLayout._values,zb={};if("composite"===K.textSizeData.kind){var Hb=
K.textSizeData,Ub=Hb.maxZoom;zb.compositeTextSizes=[qb["text-size"].possiblyEvaluate(new Pe(Hb.minZoom),Va),qb["text-size"].possiblyEvaluate(new Pe(Ub),Va)]}"composite"===K.iconSizeData.kind&&(Hb=K.iconSizeData,Ub=Hb.maxZoom,zb.compositeIconSizes=[qb["icon-size"].possiblyEvaluate(new Pe(Hb.minZoom),Va),qb["icon-size"].possiblyEvaluate(new Pe(Ub),Va)]);zb.layoutTextSize=qb["text-size"].possiblyEvaluate(new Pe(K.zoom+1),Va);zb.layoutIconSize=qb["icon-size"].possiblyEvaluate(new Pe(K.zoom+1),Va);zb.textMaxSize=
qb["text-size"].possiblyEvaluate(new Pe(18));var Sb=24*jb.get("text-line-height"),$b="map"===jb.get("text-rotation-alignment")&&"point"!==jb.get("symbol-placement"),bc=jb.get("text-keep-upright"),Ec=jb.get("text-size");qb=function(){var bd=pd[ld],Ad=jb.get("text-font").evaluate(bd,{},Va).join(","),zd=Ec.evaluate(bd,{},Va),Cd=zb.layoutTextSize.evaluate(bd,{},Va),Od=zb.layoutIconSize.evaluate(bd,{},Va),Ud={horizontal:{},vertical:void 0},ce=bd.text,ee=[0,0];if(ce){var Td=ce.toString(),Yd=24*jb.get("text-letter-spacing").evaluate(bd,
{},Va),se=function(te){for(var ef=0;ef<te.length;ef+=1)if(yf=te[ef].charCodeAt(0),Id.Arabic(yf)||Id["Arabic Supplement"](yf)||Id["Arabic Extended-A"](yf)||Id["Arabic Presentation Forms-A"](yf)||Id["Arabic Presentation Forms-B"](yf))return!1;var yf;return!0}(Td)?Yd:0,Pd=jb.get("text-anchor").evaluate(bd,{},Va),Gd=jb.get("text-variable-anchor");Gd||(ee=(Yd=jb.get("text-radial-offset").evaluate(bd,{},Va))?Rf(Pd,[24*Yd,Ed]):jb.get("text-offset").evaluate(bd,{},Va).map(function(te){return 24*te}));var Rd=
$b?"center":jb.get("text-justify").evaluate(bd,{},Va),xe=jb.get("symbol-placement"),Ve="point"===xe?24*jb.get("text-max-width").evaluate(bd,{},Va):0;Yd=function(){K.allowVerticalPlacement&&cb(Td)&&(Ud.vertical=Mh(ce,T,ma,Aa,Ad,Ve,Sb,Pd,"left",se,ee,Oc.vertical,!0,xe,Cd,zd))};if(!$b&&Gd){Gd="auto"===Rd?Gd.map(function(te){return wj(te)}):[Rd];Rd=!1;for(var Nf=0;Nf<Gd.length;Nf++){var pf=Gd[Nf];if(!Ud.horizontal[pf])if(Rd)Ud.horizontal[pf]=Ud.horizontal[0];else{var We=Mh(ce,T,ma,Aa,Ad,Ve,Sb,"center",
pf,se,ee,Oc.horizontal,!1,xe,Cd,zd);We&&(Ud.horizontal[pf]=We,Rd=1===We.positionedLines.length)}}Yd()}else"auto"===Rd&&(Rd=wj(Pd)),(Gd=Mh(ce,T,ma,Aa,Ad,Ve,Sb,Pd,Rd,se,ee,Oc.horizontal,!1,xe,Cd,zd))&&(Ud.horizontal[Rd]=Gd),Yd(),cb(Td)&&$b&&bc&&(Ud.vertical=Mh(ce,T,ma,Aa,Ad,Ve,Sb,Pd,Rd,se,ee,Oc.vertical,!1,xe,Cd,zd))}Yd=void 0;Gd=!1;bd.icon&&bd.icon.name&&(Rd=va[bd.icon.name])&&(Yd=function(te,ef,yf){var Cf=Me(yf);yf=ef[0]-te.displaySize[0]*Cf.horizontalAlign;ef=ef[1]-te.displaySize[1]*Cf.verticalAlign;
return{image:te,top:ef,bottom:ef+te.displaySize[1],left:yf,right:yf+te.displaySize[0]}}(Aa[bd.icon.name],jb.get("icon-offset").evaluate(bd,{},Va),jb.get("icon-anchor").evaluate(bd,{},Va)),Gd=Rd.sdf,void 0===K.sdfIcons?K.sdfIcons=Rd.sdf:K.sdfIcons!==Rd.sdf&&x("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Rd.pixelRatio!==K.pixelRatio||0!==jb.get("icon-rotate").constantOr(1))&&(K.iconsNeedLinear=!0));Rd=Vi(Ud.horizontal)||Ud.vertical;K.iconsInText=!!Rd&&Rd.iconsInText;(Rd||
Yd)&&function(te,ef,yf,Cf,Hj,Og,af,Sf,Ei,dj,Ij){var Of=Og.textMaxSize.evaluate(ef,{});void 0===Of&&(Of=af);var Fi,hf=te.layers[0].layout,sg=hf.get("icon-offset").evaluate(ef,{},Ij),Qe=Vi(yf.horizontal),Tf=af/24,Nl=te.tilePixelRatio*Tf;Of=te.tilePixelRatio*Of/24;var Ol=te.tilePixelRatio*Sf,gh=te.tilePixelRatio*hf.get("symbol-spacing"),Pl=hf.get("text-padding")*te.tilePixelRatio,Ql=hf.get("icon-padding")*te.tilePixelRatio;Sf=hf.get("text-max-angle")/180*Math.PI;var Rl="map"===hf.get("text-rotation-alignment")&&
"point"!==hf.get("symbol-placement"),Sl="map"===hf.get("icon-rotation-alignment")&&"point"!==hf.get("symbol-placement"),Lj=hf.get("symbol-placement"),fj=gh/2,pk=hf.get("icon-text-fit");Cf&&"none"!==pk&&(te.allowVerticalPlacement&&yf.vertical&&(Fi=Xg(Cf,yf.vertical,pk,hf.get("icon-text-fit-padding"),sg,Tf)),Qe&&(Cf=Xg(Cf,Qe,pk,hf.get("icon-text-fit-padding"),sg,Tf)));hf=function(Tl,Rk){0>Rk.x||8192<=Rk.x||0>Rk.y||8192<=Rk.y||function(jf,Dh,jl,fi,Ii,kl,gj,hh,qk,Sk,rk,sk,xl,ll,Mj,Nj,Tk,El,Oj,Uk,Eg,ml,
Fl,gi,Ul){var Vk,tk,uk=jf.addToLineVertexArray(Dh,jl),Wk=0,Gl=jl=0,Hl=0,vk=-1,yl=-1,Ji={},Il=ci(""),zl=0,Al=0;if(void 0===hh._unevaluatedLayout.getValue("text-radial-offset")?(zl=(Vk=hh.layout.get("text-offset").evaluate(Eg,{},gi).map(function(Xk){return 24*Xk}))[0],Al=Vk[1]):(zl=24*hh.layout.get("text-radial-offset").evaluate(Eg,{},gi),Al=Ed),jf.allowVerticalPlacement&&fi.vertical){Vk=hh.layout.get("text-rotate").evaluate(Eg,{},gi)+90;var Pj=new hd(qk,Dh,Sk,rk,sk,fi.vertical,xl,ll,Mj,Vk);gj&&(tk=
new hd(qk,Dh,Sk,rk,sk,gj,Tk,El,Mj,Vk))}if(Ii){var Ki=hh.layout.get("icon-rotate").evaluate(Eg,{});Wk="none"!==hh.layout.get("icon-text-fit");vk=Zj(Ii,Ki,Fl,Wk);gj=gj?Zj(gj,Ki,Fl,Wk):void 0;Ki=new hd(qk,Dh,Sk,rk,sk,Ii,Tk,El,!1,Ki);Wk=4*vk.length;Tk=jf.iconSizeData;Ii=null;"source"===Tk.kind?32640<(Ii=[128*hh.layout.get("icon-size").evaluate(Eg,{})])[0]&&x(jf.layerIds[0]+': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".'):"composite"===Tk.kind&&(32640<(Ii=[128*ml.compositeIconSizes[0].evaluate(Eg,
{},gi),128*ml.compositeIconSizes[1].evaluate(Eg,{},gi)])[0]||32640<Ii[1])&&x(jf.layerIds[0]+': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".');jf.addSymbols(jf.icon,vk,Ii,Uk,Oj,Eg,!1,Dh,uk.lineStartIndex,uk.lineLength,-1,gi);vk=jf.icon.placedSymbolArray.length-1;gj&&(jl=4*gj.length,jf.addSymbols(jf.icon,gj,Ii,Uk,Oj,Eg,Oc.vertical,Dh,uk.lineStartIndex,uk.lineLength,-1,gi),yl=jf.icon.placedSymbolArray.length-1)}for(var Jl in fi.horizontal){Oj=fi.horizontal[Jl];if(!$f){Il=ci(Oj.text);
var $f=hh.layout.get("text-rotate").evaluate(Eg,{},gi);$f=new hd(qk,Dh,Sk,rk,sk,Oj,xl,ll,Mj,$f)}Uk=1===Oj.positionedLines.length;if(Gl+=xj(jf,Dh,Oj,kl,hh,Mj,Eg,Nj,uk,fi.vertical?Oc.horizontal:Oc.horizontalOnly,Uk?Object.keys(fi.horizontal):[Jl],Ji,vk,ml,gi),Uk)break}fi.vertical&&(Hl+=xj(jf,Dh,fi.vertical,kl,hh,Mj,Eg,Nj,uk,Oc.vertical,["vertical"],Ji,yl,ml,gi));fi=$f?$f.boxStartIndex:jf.collisionBoxArray.length;kl=$f?$f.boxEndIndex:jf.collisionBoxArray.length;hh=Pj?Pj.boxStartIndex:jf.collisionBoxArray.length;
qk=Pj?Pj.boxEndIndex:jf.collisionBoxArray.length;rk=Ki?Ki.boxStartIndex:jf.collisionBoxArray.length;sk=Ki?Ki.boxEndIndex:jf.collisionBoxArray.length;ll=tk?tk.boxStartIndex:jf.collisionBoxArray.length;Mj=tk?tk.boxEndIndex:jf.collisionBoxArray.length;Nj=function(Xk,Kl){return Xk&&Xk.circleDiameter?Math.max(Xk.circleDiameter,Kl):Kl};$f=Nj($f,-1);$f=Nj(Pj,$f);$f=Nj(Ki,$f);(Pj=-1<($f=Nj(tk,$f))?1:0)&&($f*=Ul/24);jf.glyphOffsetArray.length>=Qd.MAX_GLYPHS&&x("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");
void 0!==Eg.sortKey&&jf.addToSortKeyRanges(jf.symbolInstances.length,Eg.sortKey);jf.symbolInstances.emplaceBack(Dh.x,Dh.y,0<=Ji.right?Ji.right:-1,0<=Ji.center?Ji.center:-1,0<=Ji.left?Ji.left:-1,Ji.vertical||-1,vk,yl,Il,fi,kl,hh,qk,rk,sk,ll,Mj,Sk,Gl,Hl,Wk,jl,Pj,0,xl,zl,Al,$f)}(te,Rk,Tl,yf,Cf,Hj,Fi,te.layers[0],te.collisionBoxArray,ef.index,ef.sourceLayerIndex,te.index,Nl,Pl,Rl,Ei,Ol,Ql,Sl,sg,ef,Og,dj,Ij,af)};if("line"===Lj)for(Tf=0,Lj=si(ef.geometry,0,0,8192,8192);Tf<Lj.length;Tf+=1){pk=Lj[Tf];for(var Bl=
0,Ll=bg(pk,gh,Sf,yf.vertical||Qe,Cf,24,Of,te.overscaling,8192);Bl<Ll.length;Bl+=1){var Ml=Ll[Bl];Qe&&Hf(te,Qe.text,fj,Ml)||hf(pk,Ml)}}else if("line-center"===Lj)for(gh=0,fj=ef.geometry;gh<fj.length;gh+=1)Tf=fj[gh],1<Tf.length&&(Lj=ri(Tf,Sf,yf.vertical||Qe,Cf,24,Of))&&hf(Tf,Lj);else if("Polygon"===ef.type)for(Qe=0,Of=Oi(ef.geometry,0);Qe<Of.length;Qe+=1)Sf=Of[Qe],gh=ti(Sf,16),hf(Sf[0],new ad(gh.x,gh.y,0));else if("LineString"===ef.type)for(Qe=0,Of=ef.geometry;Qe<Of.length;Qe+=1)Sf=Of[Qe],hf(Sf,new ad(Sf[0].x,
Sf[0].y,0));else if("Point"===ef.type)for(Qe=0,Of=ef.geometry;Qe<Of.length;Qe+=1)for(Sf=0,gh=Of[Qe];Sf<gh.length;Sf+=1)fj=gh[Sf],hf([fj],new ad(fj.x,fj.y,0))}(K,bd,Ud,Yd,va,zb,Cd,Od,ee,Gd,Va)};for(var ld=0,pd=K.features;ld<pd.length;ld+=1)qb();Ma&&K.generateCollisionDebugBuffers()};a.perspective=function(K,T,ma,va,Aa){var Ma;T=1/Math.tan(T/2);return K[0]=T/ma,K[1]=0,K[2]=0,K[3]=0,K[4]=0,K[5]=T,K[6]=0,K[7]=0,K[8]=0,K[9]=0,K[11]=-1,K[12]=0,K[13]=0,K[15]=0,null!=Aa&&Aa!==1/0?(K[10]=(Aa+va)*(Ma=1/(va-
Aa)),K[14]=2*Aa*va*Ma):(K[10]=-1,K[14]=-2*va),K};a.pick=function(K,T){for(var ma={},va=0;va<T.length;va++){var Aa=T[va];Aa in K&&(ma[Aa]=K[Aa])}return ma};a.plugin=Pf;a.polygonIntersectsPolygon=Re;a.postMapLoadEvent=dk;a.postTurnstileEvent=yg;a.potpack=sj;a.refProperties="type source source-layer minzoom maxzoom filter layout".split(" ");a.register=Jc;a.registerForPluginStateChange=function(K){return K({pluginStatus:Ef,pluginURL:dh}),Li.on("pluginStateChange",K),K};a.rotate=function(K,T,ma){var va=
T[0],Aa=T[1],Ma=T[2];T=T[3];var Va=Math.sin(ma);ma=Math.cos(ma);return K[0]=va*ma+Ma*Va,K[1]=Aa*ma+T*Va,K[2]=va*-Va+Ma*ma,K[3]=Aa*-Va+T*ma,K};a.rotateX=function(K,T,ma){var va=Math.sin(ma);ma=Math.cos(ma);var Aa=T[4],Ma=T[5],Va=T[6],jb=T[7],qb=T[8],zb=T[9],Hb=T[10],Ub=T[11];return T!==K&&(K[0]=T[0],K[1]=T[1],K[2]=T[2],K[3]=T[3],K[12]=T[12],K[13]=T[13],K[14]=T[14],K[15]=T[15]),K[4]=Aa*ma+qb*va,K[5]=Ma*ma+zb*va,K[6]=Va*ma+Hb*va,K[7]=jb*ma+Ub*va,K[8]=qb*ma-Aa*va,K[9]=zb*ma-Ma*va,K[10]=Hb*ma-Va*va,K[11]=
Ub*ma-jb*va,K};a.rotateZ=function(K,T,ma){var va=Math.sin(ma);ma=Math.cos(ma);var Aa=T[0],Ma=T[1],Va=T[2],jb=T[3],qb=T[4],zb=T[5],Hb=T[6],Ub=T[7];return T!==K&&(K[8]=T[8],K[9]=T[9],K[10]=T[10],K[11]=T[11],K[12]=T[12],K[13]=T[13],K[14]=T[14],K[15]=T[15]),K[0]=Aa*ma+qb*va,K[1]=Ma*ma+zb*va,K[2]=Va*ma+Hb*va,K[3]=jb*ma+Ub*va,K[4]=qb*ma-Aa*va,K[5]=zb*ma-Ma*va,K[6]=Hb*ma-Va*va,K[7]=Ub*ma-jb*va,K};a.scale=function(K,T,ma){var va=ma[0],Aa=ma[1];ma=ma[2];return K[0]=T[0]*va,K[1]=T[1]*va,K[2]=T[2]*va,K[3]=T[3]*
va,K[4]=T[4]*Aa,K[5]=T[5]*Aa,K[6]=T[6]*Aa,K[7]=T[7]*Aa,K[8]=T[8]*ma,K[9]=T[9]*ma,K[10]=T[10]*ma,K[11]=T[11]*ma,K[12]=T[12],K[13]=T[13],K[14]=T[14],K[15]=T[15],K};a.scale$1=function(K,T,ma){return K[0]=T[0]*ma,K[1]=T[1]*ma,K[2]=T[2]*ma,K[3]=T[3]*ma,K};a.scale$2=function(K,T,ma){return K[0]=T[0]*ma,K[1]=T[1]*ma,K[2]=T[2]*ma,K};a.setCacheLimits=function(K,T){zj=K;ub=T};a.setRTLTextPlugin=function(K,T,ma){if(void 0===ma&&(ma=!1),"deferred"===Ef||"loading"===Ef||"loaded"===Ef)throw Error("setRTLTextPlugin cannot be called multiple times.");
dh=zh.resolveURL(K);Ef="deferred";Sj=T;qe();ma||ij()};a.sphericalToCartesian=function(K){var T=K[0],ma=K[1];K=K[2];return ma+=90,ma*=Math.PI/180,K*=Math.PI/180,{x:T*Math.cos(ma)*Math.sin(K),y:T*Math.sin(ma)*Math.sin(K),z:T*Math.cos(K)}};a.sqrLen=function(K){var T=K[0];K=K[1];return T*T+K*K};a.styleSpec=Ib;a.sub=function(K,T,ma){return K[0]=T[0]-ma[0],K[1]=T[1]-ma[1],K[2]=T[2]-ma[2],K};a.symbolSize=jd;a.transformMat3=function(K,T,ma){var va=T[0],Aa=T[1];T=T[2];return K[0]=va*ma[0]+Aa*ma[3]+T*ma[6],
K[1]=va*ma[1]+Aa*ma[4]+T*ma[7],K[2]=va*ma[2]+Aa*ma[5]+T*ma[8],K};a.transformMat4=Qc;a.translate=function(K,T,ma){var va,Aa,Ma,Va,jb,qb,zb,Hb,Ub,Sb,$b,bc,Ec=ma[0],ld=ma[1];ma=ma[2];return T===K?(K[12]=T[0]*Ec+T[4]*ld+T[8]*ma+T[12],K[13]=T[1]*Ec+T[5]*ld+T[9]*ma+T[13],K[14]=T[2]*Ec+T[6]*ld+T[10]*ma+T[14],K[15]=T[3]*Ec+T[7]*ld+T[11]*ma+T[15]):(Aa=T[1],Ma=T[2],Va=T[3],jb=T[4],qb=T[5],zb=T[6],Hb=T[7],Ub=T[8],Sb=T[9],$b=T[10],bc=T[11],K[0]=va=T[0],K[1]=Aa,K[2]=Ma,K[3]=Va,K[4]=jb,K[5]=qb,K[6]=zb,K[7]=Hb,
K[8]=Ub,K[9]=Sb,K[10]=$b,K[11]=bc,K[12]=va*Ec+jb*ld+Ub*ma+T[12],K[13]=Aa*Ec+qb*ld+Sb*ma+T[13],K[14]=Ma*Ec+zb*ld+$b*ma+T[14],K[15]=Va*Ec+Hb*ld+bc*ma+T[15]),K};a.triggerPluginCompletionEvent=Cj;a.uniqueId=function(){return kf++};a.validateCustomStyleLayer=function(K){var T=[],ma=K.id;return void 0===ma&&T.push({message:"layers."+ma+': missing required property "id"'}),void 0===K.render&&T.push({message:"layers."+ma+': missing required method "render"'}),K.renderingMode&&"2d"!==K.renderingMode&&"3d"!==
K.renderingMode&&T.push({message:"layers."+ma+': property "renderingMode" must be either "2d" or "3d"'}),T};a.validateLight=Xe;a.validateStyle=nd;a.values=function(K){var T=[],ma;for(ma in K)T.push(K[ma]);return T};a.vectorTile=Di;a.version="1.10.1";a.warnOnce=x;a.webpSupported=ng;a.window=self;a.wrap=f});m(["./shared"],function(a){function g(Fa){var La=typeof Fa;if("number"===La||"boolean"===La||"string"===La||null==Fa)return JSON.stringify(Fa);if(Array.isArray(Fa)){La="[";for(var Oa=0;Oa<Fa.length;Oa+=
1)La+=g(Fa[Oa])+",";return La+"]"}La=Object.keys(Fa).sort();Oa="{";for(var fb=0;fb<La.length;fb++)Oa+=JSON.stringify(La[fb])+":"+g(Fa[La[fb]])+",";return Oa+"}"}function k(Fa,La,Oa){La=new a.EvaluationParameters(La);for(var fb=0;fb<Fa.length;fb+=1)Fa[fb].recalculate(La,Oa)}function p(Fa,La){var Oa=a.getArrayBuffer(Fa.request,function(fb,bb,Pa,Ta){fb?La(fb):bb&&La(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(bb)),rawData:bb,cacheControl:Pa,expires:Ta})});return function(){Oa.cancel();La()}}
function n(Fa,La){if(0!==Fa.length){c(Fa[0],La);for(var Oa=1;Oa<Fa.length;Oa++)c(Fa[Oa],!La)}}function c(Fa,La){for(var Oa=0,fb=0,bb=Fa.length,Pa=bb-1;fb<bb;Pa=fb++)Oa+=(Fa[fb][0]-Fa[Pa][0])*(Fa[Pa][1]+Fa[fb][1]);0<=Oa!=!!La&&Fa.reverse()}function f(Fa,La){this.options=La||{};this.features=Fa;this.length=Fa.length}function d(Fa,La){this.id="number"==typeof Fa.id?Fa.id:void 0;this.type=Fa.type;this.rawGeometry=1===Fa.type?[Fa.geometry]:Fa.geometry;this.properties=Fa.tags;this.extent=La||4096}function q(Fa){var La=
new a.pbf,Oa;for(Oa in Fa.layers)La.writeMessage(3,r,Fa.layers[Oa]);return La.finish()}function r(Fa,La){var Oa;La.writeVarintField(15,Fa.version||1);La.writeStringField(1,Fa.name||"");La.writeVarintField(5,Fa.extent||4096);var fb={keys:[],values:[],keycache:{},valuecache:{}};for(Oa=0;Oa<Fa.length;Oa++)fb.feature=Fa.feature(Oa),La.writeMessage(2,u,fb);Fa=fb.keys;for(Oa=0;Oa<Fa.length;Oa++)La.writeStringField(3,Fa[Oa]);fb=fb.values;for(Oa=0;Oa<fb.length;Oa++)La.writeMessage(4,y,fb[Oa])}function u(Fa,
La){var Oa=Fa.feature;void 0!==Oa.id&&La.writeVarintField(1,Oa.id);La.writeMessage(2,v,Fa);La.writeVarintField(3,Oa.type);La.writeMessage(4,w,Oa)}function v(Fa,La){var Oa=Fa.feature,fb=Fa.keys,bb=Fa.values,Pa=Fa.keycache;Fa=Fa.valuecache;for(var Ta in Oa.properties){var Ya=Pa[Ta];void 0===Ya&&(fb.push(Ta),Pa[Ta]=Ya=fb.length-1);La.writeVarint(Ya);Ya=Oa.properties[Ta];var nb=typeof Ya;"string"!==nb&&"boolean"!==nb&&"number"!==nb&&(Ya=JSON.stringify(Ya));nb=nb+":"+Ya;var Da=Fa[nb];void 0===Da&&(bb.push(Ya),
Fa[nb]=Da=bb.length-1);La.writeVarint(Da)}}function w(Fa,La){var Oa=Fa.loadGeometry();Fa=Fa.type;for(var fb=0,bb=0,Pa=Oa.length,Ta=0;Ta<Pa;Ta++){var Ya=Oa[Ta],nb=1;1===Fa&&(nb=Ya.length);La.writeVarint((nb<<3)+1);nb=3===Fa?Ya.length-1:Ya.length;for(var Da=0;Da<nb;Da++){1===Da&&1!==Fa&&La.writeVarint((nb-1<<3)+2);var Ha=Ya[Da].x-fb,ab=Ya[Da].y-bb;La.writeVarint(Ha<<1^Ha>>31);La.writeVarint(ab<<1^ab>>31);fb+=Ha;bb+=ab}3===Fa&&La.writeVarint(15)}}function y(Fa,La){var Oa=typeof Fa;"string"===Oa?La.writeStringField(1,
Fa):"boolean"===Oa?La.writeBooleanField(7,Fa):"number"===Oa&&(0!=Fa%1?La.writeDoubleField(3,Fa):0>Fa?La.writeSVarintField(6,Fa):La.writeVarintField(5,Fa))}function D(Fa,La,Oa,fb){x(Fa,Oa,fb);x(La,2*Oa,2*fb);x(La,2*Oa+1,2*fb+1)}function x(Fa,La,Oa){var fb=Fa[La];Fa[La]=Fa[Oa];Fa[Oa]=fb}function E(Fa,La){Fa=Fa.geometry.coordinates;return{x:Fa[0]/360+.5,y:G(Fa[1]),zoom:1/0,index:La,parentId:-1}}function B(Fa){return{type:"Feature",id:Fa.id,properties:t(Fa),geometry:{type:"Point",coordinates:[(fb=Fa.x,
360*(fb-.5)),(La=Fa.y,Oa=(180-360*La)*Math.PI/180,360*Math.atan(Math.exp(Oa))/Math.PI-90)]}};var La,Oa,fb}function t(Fa){var La=Fa.numPoints,Oa=1E4<=La?Math.round(La/1E3)+"k":1E3<=La?Math.round(La/100)/10+"k":La;return I(I({},Fa.properties),{cluster:!0,cluster_id:Fa.id,point_count:La,point_count_abbreviated:Oa})}function G(Fa){Fa=Math.sin(Fa*Math.PI/180);Fa=.5-.25*Math.log((1+Fa)/(1-Fa))/Math.PI;return 0>Fa?0:1<Fa?1:Fa}function I(Fa,La){for(var Oa in La)Fa[Oa]=La[Oa];return Fa}function L(Fa){return Fa.x}
function M(Fa){return Fa.y}function N(Fa,La,Oa,fb){Fa={id:void 0===Fa?null:Fa,type:La,geometry:Oa,tags:fb,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};La=Fa.geometry;Oa=Fa.type;if("Point"===Oa||"MultiPoint"===Oa||"LineString"===Oa)H(Fa,La);else if("Polygon"===Oa||"MultiLineString"===Oa)for(Oa=0;Oa<La.length;Oa++)H(Fa,La[Oa]);else if("MultiPolygon"===Oa)for(Oa=0;Oa<La.length;Oa++)for(fb=0;fb<La[Oa].length;fb++)H(Fa,La[Oa][fb]);return Fa}function H(Fa,La){for(var Oa=0;Oa<La.length;Oa+=3)Fa.minX=Math.min(Fa.minX,
La[Oa]),Fa.minY=Math.min(Fa.minY,La[Oa+1]),Fa.maxX=Math.max(Fa.maxX,La[Oa]),Fa.maxY=Math.max(Fa.maxY,La[Oa+1])}function J(Fa,La,Oa,fb){if(La.geometry){var bb=La.geometry.coordinates,Pa=La.geometry.type,Ta=Math.pow(Oa.tolerance/((1<<Oa.maxZoom)*Oa.extent),2),Ya=[],nb=La.id;if(Oa.promoteId?nb=La.properties[Oa.promoteId]:Oa.generateId&&(nb=fb||0),"Point"===Pa)O(bb,Ya);else if("MultiPoint"===Pa)for(var Da=0;Da<bb.length;Da++)O(bb[Da],Ya);else if("LineString"===Pa)Q(bb,Ya,Ta,!1);else if("MultiLineString"===
Pa){if(Oa.lineMetrics){for(Da=0;Da<bb.length;Da++)Q(bb[Da],Ya=[],Ta,!1),Fa.push(N(nb,"LineString",Ya,La.properties));return}U(bb,Ya,Ta,!1)}else if("Polygon"===Pa)U(bb,Ya,Ta,!0);else{if("MultiPolygon"!==Pa){if("GeometryCollection"===Pa){for(Da=0;Da<La.geometry.geometries.length;Da++)J(Fa,{id:nb,geometry:La.geometry.geometries[Da],properties:La.properties},Oa,fb);return}throw Error("Input data is not a valid GeoJSON object.");}for(Da=0;Da<bb.length;Da++)Oa=[],U(bb[Da],Oa,Ta,!0),Ya.push(Oa)}Fa.push(N(nb,
Pa,Ya,La.properties))}}function O(Fa,La){La.push(Fa[0]/360+.5);La.push(P(Fa[1]));La.push(0)}function Q(Fa,La,Oa,fb){for(var bb,Pa,Ta=0,Ya=0;Ya<Fa.length;Ya++){var nb=Fa[Ya][0]/360+.5,Da=P(Fa[Ya][1]);La.push(nb);La.push(Da);La.push(0);0<Ya&&(Ta+=fb?(bb*Da-nb*Pa)/2:Math.sqrt(Math.pow(nb-bb,2)+Math.pow(Da-Pa,2)));bb=nb;Pa=Da}Fa=La.length-3;La[2]=1;(function gb(ab,ib,ob,db){for(var rb,Bb=db,Qb=ob-ib>>1,gc=ob-ib,tc=ab[ib],Ac=ab[ib+1],Uc=ab[ob],Nc=ab[ob+1],gd=ib+3;gd<ob;gd+=3){var Xc=ab[gd];var ed=ab[gd+
1],tb=tc,Xb=Ac,uc=Uc-tb,Mc=Nc-Xb;if(0!==uc||0!==Mc){var Rc=((Xc-tb)*uc+(ed-Xb)*Mc)/(uc*uc+Mc*Mc);1<Rc?(tb=Uc,Xb=Nc):0<Rc&&(tb+=uc*Rc,Xb+=Mc*Rc)}Xc=(uc=Xc-tb)*uc+(Mc=ed-Xb)*Mc;Xc>Bb?(rb=gd,Bb=Xc):Xc===Bb&&(uc=Math.abs(gd-Qb),uc<gc&&(rb=gd,gc=uc))}Bb>db&&(3<rb-ib&&gb(ab,ib,rb,db),ab[rb+2]=Bb,3<ob-rb&&gb(ab,rb,ob,db))})(La,0,Fa,Oa);La[Fa+2]=1;La.size=Math.abs(Ta);La.start=0;La.end=La.size}function U(Fa,La,Oa,fb){for(var bb=0;bb<Fa.length;bb++){var Pa=[];Q(Fa[bb],Pa,Oa,fb);La.push(Pa)}}function P(Fa){Fa=
Math.sin(Fa*Math.PI/180);Fa=.5-.25*Math.log((1+Fa)/(1-Fa))/Math.PI;return 0>Fa?0:1<Fa?1:Fa}function V(Fa,La,Oa,fb,bb,Pa,Ta,Ya){if(fb/=La,Pa>=(Oa/=La)&&Ta<fb)return Fa;if(Ta<Oa||Pa>=fb)return null;La=[];for(Pa=0;Pa<Fa.length;Pa++){Ta=Fa[Pa];var nb=Ta.geometry,Da=Ta.type,Ha=0===bb?Ta.minX:Ta.minY,ab=0===bb?Ta.maxX:Ta.maxY;if(Ha>=Oa&&ab<fb)La.push(Ta);else if(!(ab<Oa||Ha>=fb)){Ha=[];if("Point"===Da||"MultiPoint"===Da){ab=Ha;for(var ib=Oa,ob=fb,db=bb,gb=0;gb<nb.length;gb+=3){var rb=nb[gb+db];rb>=ib&&
rb<=ob&&(ab.push(nb[gb]),ab.push(nb[gb+1]),ab.push(nb[gb+2]))}}else if("LineString"===Da)Y(nb,Ha,Oa,fb,bb,!1,Ya.lineMetrics);else if("MultiLineString"===Da)ea(nb,Ha,Oa,fb,bb,!1);else if("Polygon"===Da)ea(nb,Ha,Oa,fb,bb,!0);else if("MultiPolygon"===Da)for(ab=0;ab<nb.length;ab++)ib=[],ea(nb[ab],ib,Oa,fb,bb,!0),ib.length&&Ha.push(ib);if(Ha.length)if(Ya.lineMetrics&&"LineString"===Da)for(ab=0;ab<Ha.length;ab++)La.push(N(Ta.id,Da,Ha[ab],Ta.tags));else"LineString"!==Da&&"MultiLineString"!==Da||(1===Ha.length?
(Da="LineString",Ha=Ha[0]):Da="MultiLineString"),"Point"!==Da&&"MultiPoint"!==Da||(Da=3===Ha.length?"Point":"MultiPoint"),La.push(N(Ta.id,Da,Ha,Ta.tags))}}return La.length?La:null}function Y(Fa,La,Oa,fb,bb,Pa,Ta){for(var Ya,nb,Da=ba(Fa),Ha=0===bb?ca:ia,ab=Fa.start,ib=0;ib<Fa.length-3;ib+=3){var ob=Fa[ib],db=Fa[ib+1],gb=Fa[ib+2],rb=Fa[ib+3],Bb=Fa[ib+4],Qb=0===bb?ob:db,gc=0===bb?rb:Bb,tc=!1;Ta&&(Ya=Math.sqrt(Math.pow(ob-rb,2)+Math.pow(db-Bb,2)));if(Qb<Oa)gc>Oa&&(nb=Ha(Da,ob,db,rb,Bb,Oa),Ta&&(Da.start=
ab+Ya*nb));else if(Qb>fb)gc<fb&&(nb=Ha(Da,ob,db,rb,Bb,fb),Ta&&(Da.start=ab+Ya*nb));else{var Ac=Da,Uc=db;Ac.push(ob);Ac.push(Uc);Ac.push(gb)}gc<Oa&&Qb>=Oa&&(nb=Ha(Da,ob,db,rb,Bb,Oa),tc=!0);gc>fb&&Qb<=fb&&(nb=Ha(Da,ob,db,rb,Bb,fb),tc=!0);!Pa&&tc&&(Ta&&(Da.end=ab+Ya*nb),La.push(Da),Da=ba(Fa));Ta&&(ab+=Ya)}gb=Fa.length-3;ob=Fa[gb];db=Fa[gb+1];gb=Fa[gb+2];(Qb=0===bb?ob:db)>=Oa&&Qb<=fb&&(Fa=Da,Oa=gb,Fa.push(ob),Fa.push(db),Fa.push(Oa));gb=Da.length-3;Pa&&3<=gb&&(Da[gb]!==Da[0]||Da[gb+1]!==Da[1])&&(Pa=Da,
ob=Da[1],db=Da[2],Pa.push(Da[0]),Pa.push(ob),Pa.push(db));Da.length&&La.push(Da)}function ba(Fa){var La=[];return La.size=Fa.size,La.start=Fa.start,La.end=Fa.end,La}function ea(Fa,La,Oa,fb,bb,Pa){for(var Ta=0;Ta<Fa.length;Ta++)Y(Fa[Ta],La,Oa,fb,bb,Pa,!1)}function ca(Fa,La,Oa,fb,bb,Pa){La=(Pa-La)/(fb-La);return Fa.push(Pa),Fa.push(Oa+(bb-Oa)*La),Fa.push(1),La}function ia(Fa,La,Oa,fb,bb,Pa){Oa=(Pa-Oa)/(bb-Oa);return Fa.push(La+(fb-La)*Oa),Fa.push(Pa),Fa.push(1),Oa}function fa(Fa,La){for(var Oa=[],fb=
0;fb<Fa.length;fb++){var bb=Fa[fb],Pa=bb.type;if("Point"===Pa||"MultiPoint"===Pa||"LineString"===Pa)var Ta=ha(bb.geometry,La);else if("MultiLineString"===Pa||"Polygon"===Pa){Ta=[];for(var Ya=0;Ya<bb.geometry.length;Ya++)Ta.push(ha(bb.geometry[Ya],La))}else if("MultiPolygon"===Pa)for(Ta=[],Ya=0;Ya<bb.geometry.length;Ya++){for(var nb=[],Da=0;Da<bb.geometry[Ya].length;Da++)nb.push(ha(bb.geometry[Ya][Da],La));Ta.push(nb)}Oa.push(N(bb.id,Pa,Ta,bb.tags))}return Oa}function ha(Fa,La){var Oa=[];Oa.size=Fa.size;
void 0!==Fa.start&&(Oa.start=Fa.start,Oa.end=Fa.end);for(var fb=0;fb<Fa.length;fb+=3)Oa.push(Fa[fb]+La,Fa[fb+1],Fa[fb+2]);return Oa}function na(Fa,La){if(Fa.transformed)return Fa;var Oa,fb,bb=1<<Fa.z,Pa=Fa.x,Ta=Fa.y;for(Oa=0;Oa<Fa.features.length;Oa++){var Ya=Fa.features[Oa],nb=Ya.geometry;var Da=Ya.type;if(Ya.geometry=[],1===Da)for(Da=0;Da<nb.length;Da+=2)Ya.geometry.push([Math.round(La*(nb[Da]*bb-Pa)),Math.round(La*(nb[Da+1]*bb-Ta))]);else for(Da=0;Da<nb.length;Da++){var Ha=[];for(fb=0;fb<nb[Da].length;fb+=
2)Ha.push([Math.round(La*(nb[Da][fb]*bb-Pa)),Math.round(La*(nb[Da][fb+1]*bb-Ta))]);Ya.geometry.push(Ha)}}return Fa.transformed=!0,Fa}function pa(Fa,La,Oa,fb,bb,Pa){var Ta=fb*fb;if(0<fb&&La.size<(bb?Ta:fb))Oa.numPoints+=La.length/3;else{for(var Ya=[],nb=0;nb<La.length;nb+=3)(0===fb||La[nb+2]>Ta)&&(Oa.numSimplified++,Ya.push(La[nb]),Ya.push(La[nb+1])),Oa.numPoints++;if(bb){La=fb=0;Oa=Ya.length;for(bb=Oa-2;La<Oa;bb=La,La+=2)fb+=(Ya[La]-Ya[bb])*(Ya[La+1]+Ya[bb+1]);if(0<fb===Pa)for(La=0,Oa=Ya.length;La<
Oa/2;La+=2)Pa=Ya[La],fb=Ya[La+1],Ya[La]=Ya[Oa-2-La],Ya[La+1]=Ya[Oa-1-La],Ya[Oa-2-La]=Pa,Ya[Oa-1-La]=fb}Fa.push(Ya)}}function ra(Fa,La){var Oa=(La=this.options=function(fb,bb){for(var Pa in bb)fb[Pa]=bb[Pa];return fb}(Object.create(this.options),La)).debug;if(Oa&&console.time("preprocess data"),0>La.maxZoom||24<La.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(La.promoteId&&La.generateId)throw Error("promoteId and generateId cannot be used together.");Fa=function(fb,bb){var Pa=[];if("FeatureCollection"===
fb.type)for(var Ta=0;Ta<fb.features.length;Ta++)J(Pa,fb.features[Ta],bb,Ta);else J(Pa,"Feature"===fb.type?fb:{geometry:fb},bb);return Pa}(Fa,La);this.tiles={};this.tileCoords=[];Oa&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",La.indexMaxZoom,La.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(Fa=function(fb,bb){var Pa=bb.buffer/bb.extent,Ta=fb,Ya=V(fb,1,-1-Pa,Pa,0,-1,2,bb),nb=V(fb,1,1-Pa,2+Pa,0,-1,2,bb);return(Ya||nb)&&(Ta=V(fb,1,
-Pa,1+Pa,0,-1,2,bb)||[],Ya&&(Ta=fa(Ya,1).concat(Ta)),nb&&(Ta=Ta.concat(fa(nb,-1)))),Ta}(Fa,La)).length&&this.splitTile(Fa,0,0,0);Oa&&(Fa.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ta(Fa,La){Fa=Fa.tileID.canonical;if(!this._geoJSONIndex)return La(null,null);Fa=this._geoJSONIndex.getTile(Fa.z,Fa.x,Fa.y);if(!Fa)return La(null,null);Fa=
new Ja(Fa.features);var Oa=Ra(Fa);0===Oa.byteOffset&&Oa.byteLength===Oa.buffer.byteLength||(Oa=new Uint8Array(Oa));La(null,{vectorTile:Fa,rawData:Oa.buffer})}var oa=function(Fa){this.keyCache={};Fa&&this.replace(Fa)};oa.prototype.replace=function(Fa){this._layerConfigs={};this._layers={};this.update(Fa,[])};oa.prototype.update=function(Fa,La){for(var Oa=this,fb=0;fb<Fa.length;fb+=1){var bb=Fa[fb];this._layerConfigs[bb.id]=bb;var Pa=this._layers[bb.id]=a.createStyleLayer(bb);Pa._featureFilter=a.featureFilter(Pa.filter);
this.keyCache[bb.id]&&delete this.keyCache[bb.id]}for(Fa=0;Fa<La.length;Fa+=1)fb=La[Fa],delete this.keyCache[fb],delete this._layerConfigs[fb],delete this._layers[fb];this.familiesBySource={};La=0;for(Fa=function(Ya,nb){for(var Da={},Ha=0;Ha<Ya.length;Ha++){var ab;if(!(ab=nb&&nb[Ya[Ha].id])){ab=Ya[Ha];for(var ib="",ob=0,db=a.refProperties;ob<db.length;ob+=1)ib+="/"+g(ab[db[ob]]);ab=ib}nb&&(nb[Ya[Ha].id]=ab);(ib=Da[ab])||(ib=Da[ab]=[]);ib.push(Ya[Ha])}Ya=[];for(var gb in Da)Ya.push(Da[gb]);return Ya}(a.values(this._layerConfigs),
this.keyCache);La<Fa.length;La+=1)if(fb=Fa[La].map(function(Ya){return Oa._layers[Ya.id]}),Pa=fb[0],"none"!==Pa.visibility){var Ta=Pa.source||"";(bb=this.familiesBySource[Ta])||(bb=this.familiesBySource[Ta]={});Pa=Pa.sourceLayer||"_geojsonTileLayer";(Ta=bb[Pa])||(Ta=bb[Pa]=[]);Ta.push(fb)}};var ua=function(Fa){var La={},Oa=[];for(Da in Fa){var fb=Fa[Da],bb=La[Da]={},Pa;for(Pa in fb){var Ta=fb[+Pa];if(Ta&&0!==Ta.bitmap.width&&0!==Ta.bitmap.height){var Ya={x:0,y:0,w:Ta.bitmap.width+2,h:Ta.bitmap.height+
2};Oa.push(Ya);bb[Pa]={rect:Ya,metrics:Ta.metrics}}}}Oa=a.potpack(Oa);Oa=new a.AlphaImage({width:Oa.w||1,height:Oa.h||1});for(var nb in Fa){var Da=Fa[nb];for(var Ha in Da)(fb=Da[+Ha])&&0!==fb.bitmap.width&&0!==fb.bitmap.height&&(bb=La[nb][Ha].rect,a.AlphaImage.copy(fb.bitmap,Oa,{x:0,y:0},{x:bb.x+1,y:bb.y+1},fb.bitmap))}this.image=Oa;this.positions=La};a.register("GlyphAtlas",ua);var ka=function(Fa){this.tileID=new a.OverscaledTileID(Fa.tileID.overscaledZ,Fa.tileID.wrap,Fa.tileID.canonical.z,Fa.tileID.canonical.x,
Fa.tileID.canonical.y);this.uid=Fa.uid;this.zoom=Fa.zoom;this.pixelRatio=Fa.pixelRatio;this.tileSize=Fa.tileSize;this.source=Fa.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=Fa.showCollisionBoxes;this.collectResourceTiming=!!Fa.collectResourceTiming;this.returnDependencies=!!Fa.returnDependencies;this.promoteId=Fa.promoteId};ka.prototype.parse=function(Fa,La,Oa,fb,bb){function Pa(){if(Da)return bb(Da);if(Ha&&ab&&ib){var Uc=new ua(Ha),Nc=new a.ImageAtlas(ab,ib),gd;for(gd in ob){var Xc=
ob[gd];Xc instanceof a.SymbolBucket?(k(Xc.layers,this.zoom,Oa),a.performSymbolLayout(Xc,Ha,Uc.positions,ab,Nc.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Xc.hasPattern&&(Xc instanceof a.LineBucket||Xc instanceof a.FillBucket||Xc instanceof a.FillExtrusionBucket)&&(k(Xc.layers,this.zoom,Oa),Xc.addFeatures(db,this.tileID.canonical,Nc.patternPositions))}this.status="done";bb(null,{buckets:a.values(ob).filter(function(ed){return!ed.isEmpty()}),featureIndex:nb,collisionBoxArray:this.collisionBoxArray,
glyphAtlasImage:Uc.image,imageAtlas:Nc,glyphMap:this.returnDependencies?Ha:null,iconMap:this.returnDependencies?ab:null,glyphPositions:this.returnDependencies?Uc.positions:null})}}var Ta=this;this.status="parsing";this.data=Fa;this.collisionBoxArray=new a.CollisionBoxArray;var Ya=new a.DictionaryCoder(Object.keys(Fa.layers).sort()),nb=new a.FeatureIndex(this.tileID,this.promoteId);nb.bucketLayerIDs=[];var Da,Ha,ab,ib,ob={},db={featureIndex:nb,iconDependencies:{},patternDependencies:{},glyphDependencies:{},
availableImages:Oa};La=La.familiesBySource[this.source];for(var gb in La){var rb=Fa.layers[gb];if(rb){1===rb.version&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+gb+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Bb=Ya.encode(gb),Qb=[],gc=0;gc<rb.length;gc++){var tc=rb.feature(gc),Ac=nb.getId(tc,gb);Qb.push({feature:tc,id:Ac,index:gc,sourceLayerIndex:Bb})}rb=0;for(gc=La[gb];rb<gc.length;rb+=1)tc=gc[rb],Ac=tc[0],Ac.minzoom&&this.zoom<Math.floor(Ac.minzoom)||
Ac.maxzoom&&this.zoom>=Ac.maxzoom||"none"!==Ac.visibility&&(k(tc,this.zoom,Oa),(ob[Ac.id]=Ac.createBucket({index:nb.bucketLayerIDs.length,layers:tc,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bb,sourceID:this.source})).populate(Qb,db,this.tileID.canonical),nb.bucketLayerIDs.push(tc.map(function(Uc){return Uc.id})))}}Fa=a.mapObject(db.glyphDependencies,function(Uc){return Object.keys(Uc).map(Number)});Object.keys(Fa).length?
fb.send("getGlyphs",{uid:this.uid,stacks:Fa},function(Uc,Nc){Da||(Da=Uc,Ha=Nc,Pa.call(Ta))}):Ha={};Fa=Object.keys(db.iconDependencies);Fa.length?fb.send("getImages",{icons:Fa,source:this.source,tileID:this.tileID,type:"icons"},function(Uc,Nc){Da||(Da=Uc,ab=Nc,Pa.call(Ta))}):ab={};Fa=Object.keys(db.patternDependencies);Fa.length?fb.send("getImages",{icons:Fa,source:this.source,tileID:this.tileID,type:"patterns"},function(Uc,Nc){Da||(Da=Uc,ib=Nc,Pa.call(Ta))}):ib={};Pa.call(this)};var sa=function(Fa,
La,Oa,fb){this.actor=Fa;this.layerIndex=La;this.availableImages=Oa;this.loadVectorData=fb||p;this.loading={};this.loaded={}};sa.prototype.loadTile=function(Fa,La){var Oa=this,fb=Fa.uid;this.loading||(this.loading={});var bb=!!(Fa&&Fa.request&&Fa.request.collectResourceTiming)&&new a.RequestPerformance(Fa.request),Pa=this.loading[fb]=new ka(Fa);Pa.abort=this.loadVectorData(Fa,function(Ta,Ya){if(delete Oa.loading[fb],Ta||!Ya)return Pa.status="done",Oa.loaded[fb]=Pa,La(Ta);var nb=Ya.rawData,Da={};Ya.expires&&
(Da.expires=Ya.expires);Ya.cacheControl&&(Da.cacheControl=Ya.cacheControl);var Ha={};bb&&(Ta=bb.finish())&&(Ha.resourceTiming=JSON.parse(JSON.stringify(Ta)));Pa.vectorTile=Ya.vectorTile;Pa.parse(Ya.vectorTile,Oa.layerIndex,Oa.availableImages,Oa.actor,function(ab,ib){if(ab||!ib)return La(ab);La(null,a.extend({rawTileData:nb.slice(0)},ib,Da,Ha))});Oa.loaded=Oa.loaded||{};Oa.loaded[fb]=Pa})};sa.prototype.reloadTile=function(Fa,La){var Oa=this,fb=this.loaded,bb=Fa.uid,Pa=this;if(fb&&fb[bb]){var Ta=fb[bb];
Ta.showCollisionBoxes=Fa.showCollisionBoxes;Fa=function(Ya,nb){var Da=Ta.reloadCallback;Da&&(delete Ta.reloadCallback,Ta.parse(Ta.vectorTile,Pa.layerIndex,Oa.availableImages,Pa.actor,Da));La(Ya,nb)};"parsing"===Ta.status?Ta.reloadCallback=Fa:"done"===Ta.status&&(Ta.vectorTile?Ta.parse(Ta.vectorTile,this.layerIndex,this.availableImages,this.actor,Fa):Fa())}};sa.prototype.abortTile=function(Fa,La){var Oa=this.loading;Fa=Fa.uid;Oa&&Oa[Fa]&&Oa[Fa].abort&&(Oa[Fa].abort(),delete Oa[Fa]);La()};sa.prototype.removeTile=
function(Fa,La){var Oa=this.loaded;Fa=Fa.uid;Oa&&Oa[Fa]&&delete Oa[Fa];La()};var ya=a.window.ImageBitmap,qa=function(){this.loaded={}};qa.prototype.loadTile=function(Fa,La){var Oa=Fa.uid,fb=Fa.encoding;Fa=Fa.rawImageData;Fa=ya&&Fa instanceof ya?this.getImageData(Fa):Fa;fb=new a.DEMData(Oa,Fa,fb);this.loaded=this.loaded||{};this.loaded[Oa]=fb;La(null,fb)};qa.prototype.getImageData=function(Fa){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Fa.width,Fa.height),
this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d"));this.offscreenCanvas.width=Fa.width;this.offscreenCanvas.height=Fa.height;this.offscreenCanvasContext.drawImage(Fa,0,0,Fa.width,Fa.height);Fa=this.offscreenCanvasContext.getImageData(-1,-1,Fa.width+2,Fa.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:Fa.width,height:Fa.height},Fa.data)};qa.prototype.removeTile=function(Fa){var La=this.loaded;
Fa=Fa.uid;La&&La[Fa]&&delete La[Fa]};var xa=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ca=function(Fa){this._feature=Fa;this.extent=a.EXTENT;this.type=Fa.type;this.properties=Fa.tags;"id"in Fa&&!isNaN(Fa.id)&&(this.id=parseInt(Fa.id,10))};Ca.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Fa=[],La=0,Oa=this._feature.geometry;La<Oa.length;La+=1){var fb=Oa[La];Fa.push([new a.Point$1(fb[0],fb[1])])}return Fa}Fa=[];La=0;for(Oa=this._feature.geometry;La<Oa.length;La+=1){fb=
[];for(var bb=0,Pa=Oa[La];bb<Pa.length;bb+=1){var Ta=Pa[bb];fb.push(new a.Point$1(Ta[0],Ta[1]))}Fa.push(fb)}return Fa};Ca.prototype.toGeoJSON=function(Fa,La,Oa){return xa.call(this,Fa,La,Oa)};var Ja=function(Fa){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=a.EXTENT;this.length=Fa.length;this._features=Fa};Ja.prototype.feature=function(Fa){return new Ca(this._features[Fa])};var eb=a.vectorTile.VectorTileFeature;f.prototype.feature=function(Fa){return new d(this.features[Fa],
this.options.extent)};d.prototype.loadGeometry=function(){var Fa=this.rawGeometry;this.geometry=[];for(var La=0;La<Fa.length;La++){for(var Oa=Fa[La],fb=[],bb=0;bb<Oa.length;bb++)fb.push(new a.Point$1(Oa[bb][0],Oa[bb][1]));this.geometry.push(fb)}return this.geometry};d.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Fa=this.geometry,La=1/0,Oa=-1/0,fb=1/0,bb=-1/0,Pa=0;Pa<Fa.length;Pa++)for(var Ta=Fa[Pa],Ya=0;Ya<Ta.length;Ya++){var nb=Ta[Ya];La=Math.min(La,nb.x);Oa=Math.max(Oa,nb.x);
fb=Math.min(fb,nb.y);bb=Math.max(bb,nb.y)}return[La,fb,Oa,bb]};d.prototype.toGeoJSON=eb.prototype.toGeoJSON;var Ra=q;Ra.fromVectorTileJs=q;Ra.fromGeojsonVt=function(Fa,La){La=La||{};var Oa={},fb;for(fb in Fa)Oa[fb]=new f(Fa[fb].features,La),Oa[fb].name=fb,Oa[fb].version=La.version,Oa[fb].extent=La.extent;return q({layers:Oa})};Ra.GeoJSONWrapper=f;var Wa=function(Fa){return Fa[0]},Ea=function(Fa){return Fa[1]},Ia=function(Fa,La,Oa,fb,bb){void 0===La&&(La=Wa);void 0===Oa&&(Oa=Ea);void 0===fb&&(fb=64);
void 0===bb&&(bb=Float64Array);this.nodeSize=fb;this.points=Fa;var Pa=this.ids=new (65536>Fa.length?Uint16Array:Uint32Array)(Fa.length);bb=this.coords=new bb(2*Fa.length);for(var Ta=0;Ta<Fa.length;Ta++)Pa[Ta]=Ta,bb[2*Ta]=La(Fa[Ta]),bb[2*Ta+1]=Oa(Fa[Ta]);!function db(nb,Da,Ha,ab,ib,ob){if(!(ib-ab<=Ha)){var gb=ab+ib>>1;!function Nc(Bb,Qb,gc,tc,Ac,Uc){for(;Ac>tc;){if(600<Ac-tc){var gd=Ac-tc+1,Xc=gc-tc+1,ed=Math.log(gd),tb=.5*Math.exp(2*ed/3);ed=.5*Math.sqrt(ed*tb*(gd-tb)/gd)*(0>Xc-gd/2?-1:1);Nc(Bb,Qb,
gc,Math.max(tc,Math.floor(gc-Xc*tb/gd+ed)),Math.min(Ac,Math.floor(gc+(gd-Xc)*tb/gd+ed)),Uc)}gd=Qb[2*gc+Uc];Xc=tc;tb=Ac;D(Bb,Qb,tc,gc);for(Qb[2*Ac+Uc]>gd&&D(Bb,Qb,tc,Ac);Xc<tb;){D(Bb,Qb,Xc,tb);Xc++;for(tb--;Qb[2*Xc+Uc]<gd;)Xc++;for(;Qb[2*tb+Uc]>gd;)tb--}Qb[2*tc+Uc]===gd?D(Bb,Qb,tc,tb):D(Bb,Qb,++tb,Ac);tb<=gc&&(tc=tb+1);gc<=tb&&(Ac=tb-1)}}(nb,Da,gb,ab,ib,ob%2);db(nb,Da,Ha,ab,gb-1,ob+1);db(nb,Da,Ha,gb+1,ib,ob+1)}}(Pa,bb,fb,0,Pa.length-1,0)};Ia.prototype.range=function(Fa,La,Oa,fb){for(var bb=this.ids,
Pa=this.coords,Ta=this.nodeSize,Ya,nb,Da=[0,bb.length-1,0],Ha=[];Da.length;){var ab=Da.pop(),ib=Da.pop(),ob=Da.pop();if(ib-ob<=Ta)for(ab=ob;ab<=ib;ab++)nb=Pa[2*ab+1],(Ya=Pa[2*ab])>=Fa&&Ya<=Oa&&nb>=La&&nb<=fb&&Ha.push(bb[ab]);else{var db=Math.floor((ob+ib)/2);nb=Pa[2*db+1];(Ya=Pa[2*db])>=Fa&&Ya<=Oa&&nb>=La&&nb<=fb&&Ha.push(bb[db]);var gb=(ab+1)%2;(0===ab?Fa<=Ya:La<=nb)&&(Da.push(ob),Da.push(db-1),Da.push(gb));(0===ab?Oa>=Ya:fb>=nb)&&(Da.push(db+1),Da.push(ib),Da.push(gb))}}return Ha};Ia.prototype.within=
function(Fa,La,Oa){for(var fb=this.ids,bb=this.coords,Pa=this.nodeSize,Ta=[0,fb.length-1,0],Ya=[],nb=Oa*Oa;Ta.length;){var Da=Ta.pop(),Ha=Ta.pop(),ab=Ta.pop();if(Ha-ab<=Pa)for(Da=ab;Da<=Ha;Da++){ab=bb[2*Da]-Fa;var ib=bb[2*Da+1]-La;ab*ab+ib*ib<=nb&&Ya.push(fb[Da])}else{ib=Math.floor((ab+Ha)/2);var ob=bb[2*ib],db=bb[2*ib+1],gb=ob-Fa,rb=db-La;gb*gb+rb*rb<=nb&&Ya.push(fb[ib]);gb=(Da+1)%2;(0===Da?Fa-Oa<=ob:La-Oa<=db)&&(Ta.push(ab),Ta.push(ib-1),Ta.push(gb));(0===Da?Fa+Oa>=ob:La+Oa>=db)&&(Ta.push(ib+1),
Ta.push(Ha),Ta.push(gb))}}return Ya};var Qa={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Fa){return Fa}},lb=function(Fa){this.options=I(Object.create(Qa),Fa);this.trees=Array(this.options.maxZoom+1)};lb.prototype.load=function(Fa){var La=this.options,Oa=La.log,fb=La.minZoom,bb=La.maxZoom;La=La.nodeSize;Oa&&console.time("total time");var Pa="prepare "+Fa.length+" points";Oa&&console.time(Pa);this.points=Fa;for(var Ta=[],Ya=0;Ya<Fa.length;Ya++)Fa[Ya].geometry&&
Ta.push(E(Fa[Ya],Ya));this.trees[bb+1]=new Ia(Ta,L,M,La,Float32Array);Oa&&console.timeEnd(Pa);for(Fa=bb;Fa>=fb;Fa--)bb=+Date.now(),Ta=this._cluster(Ta,Fa),this.trees[Fa]=new Ia(Ta,L,M,La,Float32Array),Oa&&console.log("z%d: %d clusters in %dms",Fa,Ta.length,+Date.now()-bb);return Oa&&console.timeEnd("total time"),this};lb.prototype.getClusters=function(Fa,La){var Oa=((Fa[0]+180)%360+360)%360-180,fb=Math.max(-90,Math.min(90,Fa[1])),bb=180===Fa[2]?180:((Fa[2]+180)%360+360)%360-180,Pa=Math.max(-90,Math.min(90,
Fa[3]));if(360<=Fa[2]-Fa[0])Oa=-180,bb=180;else if(Oa>bb)return Oa=this.getClusters([Oa,fb,180,Pa],La),fb=this.getClusters([-180,fb,bb,Pa],La),Oa.concat(fb);La=this.trees[this._limitZoom(La)];Fa=[];var Ta=0;for(fb=La.range(Oa/360+.5,G(Pa),bb/360+.5,G(fb));Ta<fb.length;Ta+=1)bb=La.points[fb[Ta]],Fa.push(bb.numPoints?B(bb):this.points[bb.index]);return Fa};lb.prototype.getChildren=function(Fa){var La=this._getOriginId(Fa),Oa=this._getOriginZoom(Fa),fb=this.trees[Oa];if(!fb)throw Error("No cluster with the specified id.");
var bb=fb.points[La];if(!bb)throw Error("No cluster with the specified id.");La=[];var Pa=0;for(Oa=fb.within(bb.x,bb.y,this.options.radius/(this.options.extent*Math.pow(2,Oa-1)));Pa<Oa.length;Pa+=1)bb=fb.points[Oa[Pa]],bb.parentId===Fa&&La.push(bb.numPoints?B(bb):this.points[bb.index]);if(0===La.length)throw Error("No cluster with the specified id.");return La};lb.prototype.getLeaves=function(Fa,La,Oa){var fb=[];return this._appendLeaves(fb,Fa,La||10,Oa||0,0),fb};lb.prototype.getTile=function(Fa,
La,Oa){var fb=this.trees[this._limitZoom(Fa)];Fa=Math.pow(2,Fa);var bb=this.options;bb=bb.radius/bb.extent;var Pa=(Oa-bb)/Fa,Ta=(Oa+1+bb)/Fa,Ya={features:[]};return this._addTileFeatures(fb.range((La-bb)/Fa,Pa,(La+1+bb)/Fa,Ta),fb.points,La,Oa,Fa,Ya),0===La&&this._addTileFeatures(fb.range(1-bb/Fa,Pa,1,Ta),fb.points,Fa,Oa,Fa,Ya),La===Fa-1&&this._addTileFeatures(fb.range(0,Pa,bb/Fa,Ta),fb.points,-1,Oa,Fa,Ya),Ya.features.length?Ya:null};lb.prototype.getClusterExpansionZoom=function(Fa){for(var La=this._getOriginZoom(Fa)-
1;La<=this.options.maxZoom;){Fa=this.getChildren(Fa);if(La++,1!==Fa.length)break;Fa=Fa[0].properties.cluster_id}return La};lb.prototype._appendLeaves=function(Fa,La,Oa,fb,bb){var Pa=0;for(La=this.getChildren(La);Pa<La.length;Pa+=1){var Ta=La[Pa],Ya=Ta.properties;if(Ya&&Ya.cluster?bb+Ya.point_count<=fb?bb+=Ya.point_count:bb=this._appendLeaves(Fa,Ya.cluster_id,Oa,fb,bb):bb<fb?bb++:Fa.push(Ta),Fa.length===Oa)break}return bb};lb.prototype._addTileFeatures=function(Fa,La,Oa,fb,bb,Pa){for(var Ta=0;Ta<Fa.length;Ta+=
1){var Ya=La[Fa[Ta]],nb=Ya.numPoints,Da={type:1,geometry:[[Math.round(this.options.extent*(Ya.x*bb-Oa)),Math.round(this.options.extent*(Ya.y*bb-fb))]],tags:nb?t(Ya):this.points[Ya.index].properties},Ha=void 0;nb?Ha=Ya.id:this.options.generateId?Ha=Ya.index:this.points[Ya.index].id&&(Ha=this.points[Ya.index].id);void 0!==Ha&&(Da.id=Ha);Pa.features.push(Da)}};lb.prototype._limitZoom=function(Fa){return Math.max(this.options.minZoom,Math.min(Fa,this.options.maxZoom+1))};lb.prototype._cluster=function(Fa,
La){var Oa=[],fb=this.options,bb=fb.reduce;fb=fb.radius/(fb.extent*Math.pow(2,La));for(var Pa=0;Pa<Fa.length;Pa++){var Ta=Fa[Pa];if(!(Ta.zoom<=La)){Ta.zoom=La;for(var Ya=this.trees[La+1],nb=Ya.within(Ta.x,Ta.y,fb),Da=Ta.numPoints||1,Ha=Ta.x*Da,ab=Ta.y*Da,ib=bb&&1<Da?this._map(Ta,!0):null,ob=(Pa<<5)+(La+1)+this.points.length,db=0;db<nb.length;db+=1){var gb=Ya.points[nb[db]];if(!(gb.zoom<=La)){gb.zoom=La;var rb=gb.numPoints||1;Ha+=gb.x*rb;ab+=gb.y*rb;Da+=rb;gb.parentId=ob;bb&&(ib||(ib=this._map(Ta,
!0)),bb(ib,this._map(gb)))}}1===Da?Oa.push(Ta):(Ta.parentId=ob,Oa.push({x:Ha/Da,y:ab/Da,zoom:1/0,id:ob,parentId:-1,numPoints:Da,properties:ib}))}}return Oa};lb.prototype._getOriginId=function(Fa){return Fa-this.points.length>>5};lb.prototype._getOriginZoom=function(Fa){return(Fa-this.points.length)%32};lb.prototype._map=function(Fa,La){if(Fa.numPoints)return La?I({},Fa.properties):Fa.properties;Fa=this.points[Fa.index].properties;var Oa=this.options.map(Fa);return La&&Oa===Fa?I({},Oa):Oa};ra.prototype.options=
{maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};ra.prototype.splitTile=function(Fa,La,Oa,fb,bb,Pa,Ta){for(var Ya=[Fa,La,Oa,fb],nb=this.options,Da=nb.debug;Ya.length;){fb=Ya.pop();Oa=Ya.pop();La=Ya.pop();Fa=Ya.pop();var Ha=1<<La,ab=32*((1<<La)*fb+Oa)+La,ib=this.tiles[ab],ob;if(ob=!ib){1<Da&&console.time("creation");ib=this.tiles;ob=Fa;for(var db=nb,gb=La===db.maxZoom?0:db.tolerance/((1<<La)*db.extent),rb={features:[],
numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Oa,y:fb,z:La,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Bb=0;Bb<ob.length;Bb++){rb.numFeatures++;var Qb=void 0,gc=rb,tc=ob[Bb],Ac=gb,Uc=db,Nc=tc.geometry,gd=tc.type,Xc=[];if("Point"===gd||"MultiPoint"===gd)for(var ed=0;ed<Nc.length;ed+=3)Xc.push(Nc[ed]),Xc.push(Nc[ed+1]),gc.numPoints++,gc.numSimplified++;else if("LineString"===gd)pa(Xc,Nc,gc,Ac,!1,!1);else if("MultiLineString"===gd||"Polygon"===gd)for(ed=0;ed<Nc.length;ed++)pa(Xc,Nc[ed],gc,
Ac,"Polygon"===gd,0===ed);else if("MultiPolygon"===gd)for(var tb=0;tb<Nc.length;tb++){var Xb=Nc[tb];for(ed=0;ed<Xb.length;ed++)pa(Xc,Xb[ed],gc,Ac,!0,0===ed)}if(Xc.length){Ac=tc.tags||null;if("LineString"===gd&&Uc.lineMetrics){for(Qb in Ac={},tc.tags)Ac[Qb]=tc.tags[Qb];Ac.mapbox_clip_start=Nc.start/Nc.size;Ac.mapbox_clip_end=Nc.end/Nc.size}Qb={geometry:Xc,type:"Polygon"===gd||"MultiPolygon"===gd?3:"LineString"===gd||"MultiLineString"===gd?2:1,tags:Ac};null!==tc.id&&(Qb.id=tc.id);gc.features.push(Qb)}gc=
ob[Bb].minX;tc=ob[Bb].minY;Qb=ob[Bb].maxX;Uc=ob[Bb].maxY;gc<rb.minX&&(rb.minX=gc);tc<rb.minY&&(rb.minY=tc);Qb>rb.maxX&&(rb.maxX=Qb);Uc>rb.maxY&&(rb.maxY=Uc)}ob=(ib=ib[ab]=rb,this.tileCoords.push({z:La,x:Oa,y:fb}),Da)}ob&&(1<Da&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",La,Oa,fb,ib.numFeatures,ib.numPoints,ib.numSimplified),console.timeEnd("creation")),ab="z"+La,this.stats[ab]=(this.stats[ab]||0)+1,this.total++);if(ib.source=Fa,bb){if(La===nb.maxZoom||La===bb)continue;
ab=1<<bb-La;if(Oa!==Math.floor(Pa/ab)||fb!==Math.floor(Ta/ab))continue}else if(La===nb.indexMaxZoom||ib.numPoints<=nb.indexMaxPoints)continue;if(ib.source=null,0!==Fa.length)1<Da&&console.time("clipping"),Bb=.5*nb.buffer/nb.extent,gc=.5-Bb,tc=.5+Bb,Qb=1+Bb,ab=ob=db=gb=null,rb=V(Fa,Ha,Oa-Bb,Oa+tc,0,ib.minX,ib.maxX,nb),Fa=V(Fa,Ha,Oa+gc,Oa+Qb,0,ib.minX,ib.maxX,nb),rb&&(ab=V(rb,Ha,fb-Bb,fb+tc,1,ib.minY,ib.maxY,nb),ob=V(rb,Ha,fb+gc,fb+Qb,1,ib.minY,ib.maxY,nb)),Fa&&(db=V(Fa,Ha,fb-Bb,fb+tc,1,ib.minY,ib.maxY,
nb),gb=V(Fa,Ha,fb+gc,fb+Qb,1,ib.minY,ib.maxY,nb)),1<Da&&console.timeEnd("clipping"),Ya.push(ab||[],La+1,2*Oa,2*fb),Ya.push(ob||[],La+1,2*Oa,2*fb+1),Ya.push(db||[],La+1,2*Oa+1,2*fb),Ya.push(gb||[],La+1,2*Oa+1,2*fb+1)}};ra.prototype.getTile=function(Fa,La,Oa){var fb=this.options,bb=fb.extent;fb=fb.debug;if(0>Fa||24<Fa)return null;var Pa=1<<Fa;Pa=La=(La%Pa+Pa)%Pa;Pa=32*((1<<Fa)*Oa+Pa)+Fa;if(this.tiles[Pa])return na(this.tiles[Pa],bb);1<fb&&console.log("drilling down to z%d-%d-%d",Fa,La,Oa);for(var Ta,
Ya=Fa,nb=La,Da=Oa;!Ta&&0<Ya;)Ya--,nb=Math.floor(nb/2),Da=Math.floor(Da/2),Ta=this.tiles[32*((1<<Ya)*Da+nb)+Ya];return Ta&&Ta.source?(1<fb&&console.log("found parent tile z%d-%d-%d",Ya,nb,Da),1<fb&&console.time("drilling down"),this.splitTile(Ta.source,Ya,nb,Da,Fa,La,Oa),1<fb&&console.timeEnd("drilling down"),this.tiles[Pa]?na(this.tiles[Pa],bb):null):null};var hb=function(Fa){function La(Oa,fb,bb,Pa){Fa.call(this,Oa,fb,bb,ta);Pa&&(this.loadGeoJSON=Pa)}return Fa&&(La.__proto__=Fa),(La.prototype=Object.create(Fa&&
Fa.prototype)).constructor=La,La.prototype.loadData=function(Oa,fb){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=fb;this._pendingLoadDataParams=Oa;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},La.prototype._loadData=function(){var Oa=this;if(this._pendingCallback&&this._pendingLoadDataParams){var fb=this._pendingCallback,bb=this._pendingLoadDataParams;delete this._pendingCallback;delete this._pendingLoadDataParams;
var Pa=!!(bb&&bb.request&&bb.request.collectResourceTiming)&&new a.RequestPerformance(bb.request);this.loadGeoJSON(bb,function(Ta,Ya){if(Ta||!Ya)return fb(Ta);if("object"!=typeof Ya)return fb(Error("Input data given to '"+bb.source+"' is not a valid GeoJSON object."));!function ab(Da,Ha){var ib=Da&&Da.type;if("FeatureCollection"===ib)for(ib=0;ib<Da.features.length;ib++)ab(Da.features[ib],Ha);else if("GeometryCollection"===ib)for(ib=0;ib<Da.geometries.length;ib++)ab(Da.geometries[ib],Ha);else if("Feature"===
ib)ab(Da.geometry,Ha);else if("Polygon"===ib)n(Da.coordinates,Ha);else if("MultiPolygon"===ib)for(ib=0;ib<Da.coordinates.length;ib++)n(Da.coordinates[ib],Ha);return Da}(Ya,!0);try{Oa._geoJSONIndex=bb.cluster?(new lb(function(Da){var Ha=Da.superclusterOptions;Da=Da.clusterProperties;if(!Da||!Ha)return Ha;for(var ab={},ib={},ob={accumulated:null,zoom:0},db={properties:null},gb=Object.keys(Da),rb=0;rb<gb.length;rb+=1){var Bb=gb[rb],Qb=Da[Bb],gc=Qb[0];Qb=a.createExpression(Qb[1]);gc=a.createExpression("string"==
typeof gc?[gc,["accumulated"],["get",Bb]]:gc);ab[Bb]=Qb.value;ib[Bb]=gc.value}return Ha.map=function(tc){db.properties=tc;tc={};for(var Ac=0;Ac<gb.length;Ac+=1){var Uc=gb[Ac];tc[Uc]=ab[Uc].evaluate(ob,db)}return tc},Ha.reduce=function(tc,Ac){db.properties=Ac;for(Ac=0;Ac<gb.length;Ac+=1){var Uc=gb[Ac];ob.accumulated=tc[Uc];tc[Uc]=ib[Uc].evaluate(ob,db)}},Ha}(bb))).load(Ya.features):new ra(Ya,bb.geojsonVtOptions)}catch(Da){return fb(Da)}Oa.loaded={};Ta={};Pa&&(Ya=Pa.finish())&&(Ta.resourceTiming={},
Ta.resourceTiming[bb.source]=JSON.parse(JSON.stringify(Ya)));fb(null,Ta)})}},La.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},La.prototype.reloadTile=function(Oa,fb){var bb=this.loaded;return bb&&bb[Oa.uid]?Fa.prototype.reloadTile.call(this,Oa,fb):this.loadTile(Oa,fb)},La.prototype.loadGeoJSON=function(Oa,fb){if(Oa.request)a.getJSON(Oa.request,fb);else{if("string"!=typeof Oa.data)return fb(Error("Input data given to '"+
Oa.source+"' is not a valid GeoJSON object."));try{return fb(null,JSON.parse(Oa.data))}catch(bb){return fb(Error("Input data given to '"+Oa.source+"' is not a valid GeoJSON object."))}}},La.prototype.removeSource=function(Oa,fb){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});fb()},La.prototype.getClusterExpansionZoom=function(Oa,fb){try{fb(null,this._geoJSONIndex.getClusterExpansionZoom(Oa.clusterId))}catch(bb){fb(bb)}},La.prototype.getClusterChildren=function(Oa,fb){try{fb(null,
this._geoJSONIndex.getChildren(Oa.clusterId))}catch(bb){fb(bb)}},La.prototype.getClusterLeaves=function(Oa,fb){try{fb(null,this._geoJSONIndex.getLeaves(Oa.clusterId,Oa.limit,Oa.offset))}catch(bb){fb(bb)}},La}(sa);eb=function(Fa){var La=this;this.self=Fa;this.actor=new a.Actor(Fa,this);this.layerIndexes={};this.availableImages={};this.workerSourceTypes={vector:sa,geojson:hb};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(Oa,fb){if(La.workerSourceTypes[Oa])throw Error('Worker source with name "'+
Oa+'" already registered.');La.workerSourceTypes[Oa]=fb};this.self.registerRTLTextPlugin=function(Oa){if(a.plugin.isParsed())throw Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Oa.applyArabicShaping;a.plugin.processBidirectionalText=Oa.processBidirectionalText;a.plugin.processStyledBidirectionalText=Oa.processStyledBidirectionalText}};return eb.prototype.setReferrer=function(Fa,La){this.referrer=La},eb.prototype.setImages=function(Fa,La,Oa){for(var fb in this.availableImages[Fa]=
La,this.workerSources[Fa]){var bb=this.workerSources[Fa][fb],Pa;for(Pa in bb)bb[Pa].availableImages=La}Oa()},eb.prototype.setLayers=function(Fa,La,Oa){this.getLayerIndex(Fa).replace(La);Oa()},eb.prototype.updateLayers=function(Fa,La,Oa){this.getLayerIndex(Fa).update(La.layers,La.removedIds);Oa()},eb.prototype.loadTile=function(Fa,La,Oa){this.getWorkerSource(Fa,La.type,La.source).loadTile(La,Oa)},eb.prototype.loadDEMTile=function(Fa,La,Oa){this.getDEMWorkerSource(Fa,La.source).loadTile(La,Oa)},eb.prototype.reloadTile=
function(Fa,La,Oa){this.getWorkerSource(Fa,La.type,La.source).reloadTile(La,Oa)},eb.prototype.abortTile=function(Fa,La,Oa){this.getWorkerSource(Fa,La.type,La.source).abortTile(La,Oa)},eb.prototype.removeTile=function(Fa,La,Oa){this.getWorkerSource(Fa,La.type,La.source).removeTile(La,Oa)},eb.prototype.removeDEMTile=function(Fa,La){this.getDEMWorkerSource(Fa,La.source).removeTile(La)},eb.prototype.removeSource=function(Fa,La,Oa){if(this.workerSources[Fa]&&this.workerSources[Fa][La.type]&&this.workerSources[Fa][La.type][La.source]){var fb=
this.workerSources[Fa][La.type][La.source];delete this.workerSources[Fa][La.type][La.source];void 0!==fb.removeSource?fb.removeSource(La,Oa):Oa()}},eb.prototype.loadWorkerSource=function(Fa,La,Oa){try{this.self.importScripts(La.url),Oa()}catch(fb){Oa(fb.toString())}},eb.prototype.syncRTLPluginState=function(Fa,La,Oa){try{a.plugin.setState(La);var fb=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&null!=fb){this.self.importScripts(fb);var bb=a.plugin.isParsed();Oa(bb?void 0:Error("RTL Text Plugin failed to import scripts from "+
fb),bb)}}catch(Pa){Oa(Pa.toString())}},eb.prototype.getAvailableImages=function(Fa){Fa=this.availableImages[Fa];return Fa||(Fa=[]),Fa},eb.prototype.getLayerIndex=function(Fa){var La=this.layerIndexes[Fa];return La||(La=this.layerIndexes[Fa]=new oa),La},eb.prototype.getWorkerSource=function(Fa,La,Oa){var fb=this;return this.workerSources[Fa]||(this.workerSources[Fa]={}),this.workerSources[Fa][La]||(this.workerSources[Fa][La]={}),this.workerSources[Fa][La][Oa]||(this.workerSources[Fa][La][Oa]=new this.workerSourceTypes[La]({send:function(bb,
Pa,Ta){fb.actor.send(bb,Pa,Ta,Fa)}},this.getLayerIndex(Fa),this.getAvailableImages(Fa))),this.workerSources[Fa][La][Oa]},eb.prototype.getDEMWorkerSource=function(Fa,La){return this.demWorkerSources[Fa]||(this.demWorkerSources[Fa]={}),this.demWorkerSources[Fa][La]||(this.demWorkerSources[Fa][La]=new qa),this.demWorkerSources[Fa][La]},eb.prototype.enforceCacheSizeLimit=function(Fa,La){a.enforceCacheSizeLimit(La)},"undefined"!=typeof WorkerGlobalScope&&void 0!==a.window&&a.window instanceof WorkerGlobalScope&&
(a.window.worker=new eb(a.window)),eb});m(["./shared"],function(a){function g(ub){if(!lb)return ub[0];for(var Z=0;Z<ub.length;Z++)if(ub[Z]in lb)return ub[Z];return ub[0]}function k(ub,Z,da,aa,ja,za){this.fontSize=ub||24;this.buffer=void 0===Z?3:Z;this.cutoff=aa||.25;this.fontFamily=ja||"sans-serif";this.fontWeight=za||"normal";this.radius=da||8;ub=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=ub;this.ctx=this.canvas.getContext("2d");
this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(ub*ub);this.gridInner=new Float64Array(ub*ub);this.f=new Float64Array(ub);this.d=new Float64Array(ub);this.z=new Float64Array(ub+1);this.v=new Int16Array(ub);this.middle=Math.round(ub/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function p(ub,Z,da,aa,ja,za,Na){for(var Xa=0;Xa<Z;Xa++){for(var mb=0;mb<da;mb++)aa[mb]=ub[mb*Z+Xa];n(aa,ja,
za,Na,da);for(mb=0;mb<da;mb++)ub[mb*Z+Xa]=ja[mb]}for(mb=0;mb<da;mb++){for(Xa=0;Xa<Z;Xa++)aa[Xa]=ub[mb*Z+Xa];n(aa,ja,za,Na,Z);for(Xa=0;Xa<Z;Xa++)ub[mb*Z+Xa]=Math.sqrt(ja[Xa])}}function n(ub,Z,da,aa,ja){da[0]=0;aa[0]=-1E20;aa[1]=1E20;for(var za=1,Na=0;za<ja;za++){for(var Xa=(ub[za]+za*za-(ub[da[Na]]+da[Na]*da[Na]))/(2*za-2*da[Na]);Xa<=aa[Na];)Na--,Xa=(ub[za]+za*za-(ub[da[Na]]+da[Na]*da[Na]))/(2*za-2*da[Na]);da[++Na]=za;aa[Na]=Xa;aa[Na+1]=1E20}for(Na=za=0;za<ja;za++){for(;aa[Na+1]<za;)Na++;Z[za]=(za-
da[Na])*(za-da[Na])+ub[da[Na]]}}function c(ub,Z,da){var aa=function(ja,za){if(ja)return da(ja);za&&(ja=a.pick(a.extend(za,ub),"tiles minzoom maxzoom attribution mapbox_logo bounds scheme tileSize encoding".split(" ")),za.vector_layers&&(ja.vectorLayers=za.vector_layers,ja.vectorLayerIds=ja.vectorLayers.map(function(Na){return Na.id})),ja.tiles=Z.canonicalizeTileset(ja,ub.url),da(null,ja))};return ub.url?a.getJSON(Z.transformRequest(Z.normalizeSourceURL(ub.url),a.ResourceType.Source),aa):a.browser.frame(function(){return aa(null,
ub)})}function f(ub,Z){var da=a.identity([]);return a.translate(da,da,[1,1,0]),a.scale(da,da,[.5*ub.width,.5*ub.height,1]),a.multiply(da,da,ub.calculatePosMatrix(Z.toUnwrapped()))}function d(ub,Z,da,aa,ja,za){var Na=function(Mb,pc,rc){if(Mb)for(var hc=0;hc<Mb.length;hc+=1){var Ib=pc[Mb[hc]];if(Ib&&Ib.source===rc&&"fill-extrusion"===Ib.type)return!0}else for(hc in pc)if(Mb=pc[hc],Mb.source===rc&&"fill-extrusion"===Mb.type)return!0;return!1}(ja&&ja.layers,Z,ub.id),Xa=za.maxPitchScaleFactor();aa=ub.tilesIn(aa,
Xa,Na);aa.sort(q);Na=[];for(var mb=0;mb<aa.length;mb+=1){var Cb=aa[mb];Na.push({wrappedTileID:Cb.tileID.wrapped().key,queryResults:Cb.tile.queryRenderedFeatures(Z,da,ub._state,Cb.queryGeometry,Cb.cameraQueryGeometry,Cb.scale,ja,za,Xa,f(ub.transform,Cb.tileID))})}Z=function(Mb){for(var pc={},rc={},hc=0;hc<Mb.length;hc+=1){var Ib=Mb[hc],Rb=Ib.queryResults;Ib=Ib.wrappedTileID;Ib=rc[Ib]=rc[Ib]||{};for(var zc in Rb)for(var Tc=Rb[zc],dd=Ib[zc]=Ib[zc]||{},Lc=pc[zc]=pc[zc]||[],kd=0;kd<Tc.length;kd+=1){var md=
Tc[kd];dd[md.featureIndex]||(dd[md.featureIndex]=!0,Lc.push(md))}}return pc}(Na);for(var Kb in Z)Z[Kb].forEach(function(Mb){Mb=Mb.feature;var pc=ub.getFeatureState(Mb.layer["source-layer"],Mb.id);Mb.source=Mb.layer.source;Mb.layer["source-layer"]&&(Mb.sourceLayer=Mb.layer["source-layer"]);Mb.state=pc});return Z}function q(ub,Z){ub=ub.tileID;Z=Z.tileID;return ub.overscaledZ-Z.overscaledZ||ub.canonical.y-Z.canonical.y||ub.wrap-Z.wrap||ub.canonical.x-Z.canonical.x}function r(ub,Z){var da=Math.abs(2*
ub.wrap)-+(0>ub.wrap),aa=Math.abs(2*Z.wrap)-+(0>Z.wrap);return ub.overscaledZ-Z.overscaledZ||aa-da||Z.canonical.y-ub.canonical.y||Z.canonical.x-ub.canonical.x}function u(ub){return"raster"===ub||"image"===ub||"video"===ub}function v(){return new a.window.Worker(zj.workerUrl)}function w(ub,Z){var da={},aa;for(aa in ub)"ref"!==aa&&(da[aa]=ub[aa]);return a.refProperties.forEach(function(ja){ja in Z&&(da[ja]=Z[ja])}),da}function y(ub){ub=ub.slice();for(var Z=Object.create(null),da=0;da<ub.length;da++)Z[ub[da].id]=
ub[da];for(da=0;da<ub.length;da++)"ref"in ub[da]&&(ub[da]=w(ub[da],Z[ub[da].ref]));return ub}function D(ub,Z,da,aa,ja,za){for(var Na in Z=Z||{},ub=ub||{})ub.hasOwnProperty(Na)&&(a.deepEqual(ub[Na],Z[Na])||da.push({command:za,args:[aa,Na,Z[Na],ja]}));for(Na in Z)Z.hasOwnProperty(Na)&&!ub.hasOwnProperty(Na)&&(a.deepEqual(ub[Na],Z[Na])||da.push({command:za,args:[aa,Na,Z[Na],ja]}))}function x(ub){return ub.id}function E(ub,Z){return ub[Z.id]=Z,ub}function B(ub,Z,da,aa,ja){var za=a.create();return Z?(a.scale(za,
za,[1/ja,1/ja,1]),da||a.rotateZ(za,za,aa.angle)):a.multiply(za,aa.labelPlaneMatrix,ub),za}function t(ub,Z,da,aa,ja){return Z?(ub=a.clone(ub),a.scale(ub,ub,[ja,ja,1]),da||a.rotateZ(ub,ub,-aa.angle),ub):aa.glCoordMatrix}function G(ub,Z){ub=[ub.x,ub.y,0,1];Q(ub,ub,Z);Z=ub[3];return{point:new a.Point(ub[0]/Z,ub[1]/Z),signedDistanceFromCamera:Z}}function I(ub,Z,da,aa,ja,za,Na,Xa){var mb=aa?ub.textSizeData:ub.iconSizeData,Cb=a.evaluateSizeForZoom(mb,da.transform.zoom),Kb=[256/da.width*2+1,256/da.height*
2+1],Mb=aa?ub.text.dynamicLayoutVertexArray:ub.icon.dynamicLayoutVertexArray;Mb.clear();for(var pc=ub.lineVertexArray,rc=aa?ub.text.placedSymbolArray:ub.icon.placedSymbolArray,hc=da.transform.width/da.transform.height,Ib=!1,Rb=0;Rb<rc.length;Rb++){var zc=rc.get(Rb);if(zc.hidden||zc.writingMode===a.WritingMode.vertical&&!Ib)O(zc.numGlyphs,Mb);else{Ib=!1;var Tc=[zc.anchorX,zc.anchorY,0,1];a.transformMat4(Tc,Tc,Z);var dd=Tc[0]/Tc[3],Lc=Tc[1]/Tc[3];if(dd>=-Kb[0]&&dd<=Kb[0]&&Lc>=-Kb[1]&&Lc<=Kb[1]){Ib=
.5+da.transform.cameraToCenterDistance/Tc[3]*.5;Tc=a.evaluateSizeForFeature(mb,Cb,zc);Tc=Na?Tc/Ib:Tc*Ib;dd=new a.Point(zc.anchorX,zc.anchorY);Lc=G(dd,ja).point;var kd={},md=N(zc,Tc,!1,Xa,Z,ja,za,ub.glyphOffsetArray,pc,Mb,Lc,dd,kd,hc);Ib=md.useVertical;(md.notEnoughRoom||Ib||md.needsFlipping&&N(zc,Tc,!0,Xa,Z,ja,za,ub.glyphOffsetArray,pc,Mb,Lc,dd,kd,hc).notEnoughRoom)&&O(zc.numGlyphs,Mb)}else O(zc.numGlyphs,Mb)}}aa?ub.text.dynamicLayoutVertexBuffer.updateData(Mb):ub.icon.dynamicLayoutVertexBuffer.updateData(Mb)}
function L(ub,Z,da,aa,ja,za,Na,Xa,mb,Cb,Kb){var Mb=Xa.glyphStartIndex+Xa.numGlyphs,pc=Xa.lineStartIndex,rc=Xa.lineStartIndex+Xa.lineLength,hc=Z.getoffsetX(Xa.glyphStartIndex);Z=Z.getoffsetX(Mb-1);hc=J(ub*hc,da,aa,ja,za,Na,Xa.segment,pc,rc,mb,Cb,Kb);return hc?(ub=J(ub*Z,da,aa,ja,za,Na,Xa.segment,pc,rc,mb,Cb,Kb))?{first:hc,last:ub}:null:null}function M(ub,Z,da,aa){return ub===a.WritingMode.horizontal&&Math.abs(da.y-Z.y)>Math.abs(da.x-Z.x)*aa?{useVertical:!0}:(ub===a.WritingMode.vertical?Z.y<da.y:Z.x>
da.x)?{needsFlipping:!0}:null}function N(ub,Z,da,aa,ja,za,Na,Xa,mb,Cb,Kb,Mb,pc,rc){Z/=24;var hc=ub.lineOffsetX*Z,Ib=ub.lineOffsetY*Z;if(1<ub.numGlyphs){ja=ub.glyphStartIndex+ub.numGlyphs;var Rb=ub.lineStartIndex,zc=ub.lineStartIndex+ub.lineLength,Tc=L(Z,Xa,hc,Ib,da,Kb,Mb,ub,mb,za,pc);if(!Tc)return{notEnoughRoom:!0};var dd=G(Tc.first.point,Na).point;Na=G(Tc.last.point,Na).point;if(aa&&!da&&(rc=M(ub.writingMode,dd,Na,rc)))return rc;rc=[Tc.first];for(aa=ub.glyphStartIndex+1;aa<ja-1;aa++)rc.push(J(Z*
Xa.getoffsetX(aa),hc,Ib,da,Kb,Mb,ub.segment,Rb,zc,mb,za,pc));rc.push(Tc.last)}else{if(aa&&!da&&(Rb=G(Mb,ja).point,zc=ub.lineStartIndex+ub.segment+1,zc=new a.Point(mb.getx(zc),mb.gety(zc)),Tc=G(zc,ja),ja=0<Tc.signedDistanceFromCamera?Tc.point:H(Mb,zc,Rb,1,ja),rc=M(ub.writingMode,Rb,ja,rc)))return rc;ub=J(Z*Xa.getoffsetX(ub.glyphStartIndex),hc,Ib,da,Kb,Mb,ub.segment,ub.lineStartIndex,ub.lineStartIndex+ub.lineLength,mb,za,pc);if(!ub)return{notEnoughRoom:!0};rc=[ub]}ub=0;for(da=rc;ub<da.length;ub+=1)za=
da[ub],a.addDynamicAttributes(Cb,za.point,za.angle);return{}}function H(ub,Z,da,aa,ja){ub=G(ub.add(ub.sub(Z)._unit()),ja).point;ub=da.sub(ub);return da.add(ub._mult(aa/ub.mag()))}function J(ub,Z,da,aa,ja,za,Na,Xa,mb,Cb,Kb,Mb){var pc=aa?ub-Z:ub+Z;ub=0<pc?1:-1;Z=0;aa&&(ub*=-1,Z=Math.PI);0>ub&&(Z+=Math.PI);aa=0<ub?Xa+Na:Xa+Na+1;Na=ja;var rc=0,hc=0,Ib=Math.abs(pc);for(pc=[];rc+hc<=Ib;){if((aa+=ub)<Xa||aa>=mb)return null;if(ja=Na,pc.push(Na),void 0===(Na=Mb[aa])){Na=new a.Point(Cb.getx(aa),Cb.gety(aa));
var Rb=G(Na,Kb);0<Rb.signedDistanceFromCamera?Na=Mb[aa]=Rb.point:(Rb=aa-ub,Na=H(0===rc?za:new a.Point(Cb.getx(Rb),Cb.gety(Rb)),Na,ja,Ib-rc+1,Kb))}rc+=hc;hc=ja.dist(Na)}Xa=(Ib-rc)/hc;za=Na.sub(ja);Xa=za.mult(Xa)._add(ja);Xa._add(za._unit()._perp()._mult(da*ub));da=Z+Math.atan2(Na.y-ja.y,Na.x-ja.x);return pc.push(Xa),{point:Xa,angle:da,path:pc}}function O(ub,Z){for(var da=0;da<ub;da++){var aa=Z.length;Z.resize(aa+4);Z.float32.set(sf,3*aa)}}function Q(ub,Z,da){var aa=Z[0];Z=Z[1];return ub[0]=da[0]*aa+
da[4]*Z+da[12],ub[1]=da[1]*aa+da[5]*Z+da[13],ub[3]=da[3]*aa+da[7]*Z+da[15],ub}function U(ub,Z,da){return a.EXTENT/(ub.tileSize*Math.pow(2,da-ub.tileID.overscaledZ))*Z}function P(ub,Z,da,aa,ja){var za=a.getAnchorAlignment(ub);Z*=-(za.horizontalAlign-.5);da*=-(za.verticalAlign-.5);ub=a.evaluateVariableOffset(ub,aa);return new a.Point(Z+ub[0]*ja,da+ub[1]*ja)}function V(ub,Z,da,aa,ja,za){var Na=ub.x1,Xa=ub.x2,mb=ub.y1,Cb=ub.y2,Kb=ub.anchorPointX;ub=ub.anchorPointY;Z=new a.Point(Z,da);return aa&&Z._rotate(ja?
za:-za),{x1:Na+Z.x,y1:mb+Z.y,x2:Xa+Z.x,y2:Cb+Z.y,anchorPointX:Kb,anchorPointY:ub}}function Y(ub,Z,da,aa,ja){ub.emplaceBack(Z?1:0,da?1:0,aa||0,ja||0);ub.emplaceBack(Z?1:0,da?1:0,aa||0,ja||0);ub.emplaceBack(Z?1:0,da?1:0,aa||0,ja||0);ub.emplaceBack(Z?1:0,da?1:0,aa||0,ja||0)}function ba(ub){if(0===ub.opacity&&!ub.placed)return 0;if(1===ub.opacity&&ub.placed)return 4294967295;var Z=ub.placed?1:0;ub=Math.floor(127*ub.opacity);return ub*Fb+Z*Wb+ub*lc+Z*wc+ub*cc+Z*Qc+ub*Ab+Z}function ea(ub,Z){var da=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,
aa={};return{fragmentSource:ub=ub.replace(da,function(ja,za,Na,Xa,mb){return aa[mb]=!0,"define"===za?"\n#ifndef HAS_UNIFORM_u_"+mb+"\nvarying "+Na+" "+Xa+" "+mb+";\n#else\nuniform "+Na+" "+Xa+" u_"+mb+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+mb+"\n    "+Na+" "+Xa+" "+mb+" \x3d u_"+mb+";\n#endif\n"}),vertexSource:Z=Z.replace(da,function(ja,za,Na,Xa,mb){ja="float"===Xa?"vec2":"vec4";var Cb=mb.match(/color/)?"color":ja;return aa[mb]?"define"===za?"\n#ifndef HAS_UNIFORM_u_"+mb+"\nuniform lowp float u_"+
mb+"_t;\nattribute "+Na+" "+ja+" a_"+mb+";\nvarying "+Na+" "+Xa+" "+mb+";\n#else\nuniform "+Na+" "+Xa+" u_"+mb+";\n#endif\n":"vec4"===Cb?"\n#ifndef HAS_UNIFORM_u_"+mb+"\n    "+mb+" \x3d a_"+mb+";\n#else\n    "+Na+" "+Xa+" "+mb+" \x3d u_"+mb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+mb+"\n    "+mb+" \x3d unpack_mix_"+Cb+"(a_"+mb+", u_"+mb+"_t);\n#else\n    "+Na+" "+Xa+" "+mb+" \x3d u_"+mb+";\n#endif\n":"define"===za?"\n#ifndef HAS_UNIFORM_u_"+mb+"\nuniform lowp float u_"+mb+"_t;\nattribute "+Na+" "+
ja+" a_"+mb+";\n#else\nuniform "+Na+" "+Xa+" u_"+mb+";\n#endif\n":"vec4"===Cb?"\n#ifndef HAS_UNIFORM_u_"+mb+"\n    "+Na+" "+Xa+" "+mb+" \x3d a_"+mb+";\n#else\n    "+Na+" "+Xa+" "+mb+" \x3d u_"+mb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+mb+"\n    "+Na+" "+Xa+" "+mb+" \x3d unpack_mix_"+Cb+"(a_"+mb+", u_"+mb+"_t);\n#else\n    "+Na+" "+Xa+" "+mb+" \x3d u_"+mb+";\n#endif\n"})}}function ca(ub,Z,da){var aa=1/U(da,1,Z.transform.tileZoom),ja=Math.pow(2,da.tileID.overscaledZ);Z=da.tileSize*Math.pow(2,Z.transform.tileZoom)/
ja;ja=Z*(da.tileID.canonical.x+da.tileID.wrap*ja);Z*=da.tileID.canonical.y;return{u_image:0,u_texsize:da.imageAtlasTexture.size,u_scale:[aa,ub.fromScale,ub.toScale],u_fade:ub.t,u_pixel_coord_upper:[ja>>16,Z>>16],u_pixel_coord_lower:[65535&ja,65535&Z]}}function ia(ub,Z,da){return ub.translatePosMatrix(Z.tileID.posMatrix,Z,da.paint.get("line-translate"),da.paint.get("line-translate-anchor"))}function fa(ub,Z,da,aa,ja,za,Na){for(var Xa=ub.context,mb=Xa.gl,Cb=ub.useProgram("collisionBox"),Kb=[],Mb=0,
pc=0,rc=0;rc<aa.length;rc++){var hc=aa[rc],Ib=Z.getTile(hc),Rb=Ib.getBucket(da);if(Rb){var zc=hc.posMatrix;0===ja[0]&&0===ja[1]||(zc=ub.translatePosMatrix(hc.posMatrix,Ib,ja,za));hc=Na?Rb.textCollisionBox:Rb.iconCollisionBox;var Tc=Rb.collisionCircleArray;if(0<Tc.length){var dd=a.create(),Lc=zc;a.mul(dd,Rb.placementInvProjMatrix,ub.transform.glCoordMatrix);a.mul(dd,dd,Rb.placementViewportMatrix);Kb.push({circleArray:Tc,circleOffset:pc,transform:Lc,invTransform:dd});pc=Mb+=Tc.length/4}hc&&Cb.draw(Xa,
mb.LINES,xd.disabled,be.disabled,ub.colorModeForRenderPass(),Hd.disabled,pi(zc,ub.transform,Ib),da.id,hc.layoutVertexBuffer,hc.indexBuffer,hc.segments,null,ub.transform.zoom,null,null,hc.collisionVertexBuffer)}}if(Na&&Kb.length){Z=ub.useProgram("collisionCircle");aa=new a.StructArrayLayout2f1f2i16;aa.resize(4*Mb);aa._trim();for(za=ja=0;za<Kb.length;za+=1)for(Na=Kb[za],Cb=0;Cb<Na.circleArray.length/4;Cb++)Rb=4*Cb,pc=Na.circleArray[Rb+0],rc=Na.circleArray[Rb+1],Ib=Na.circleArray[Rb+2],Rb=Na.circleArray[Rb+
3],aa.emplace(ja++,pc,rc,Ib,Rb,0),aa.emplace(ja++,pc,rc,Ib,Rb,1),aa.emplace(ja++,pc,rc,Ib,Rb,2),aa.emplace(ja++,pc,rc,Ib,Rb,3);if(!Si||Si.length<2*Mb){Mb*=2;ja=new a.StructArrayLayout3ui6;ja.resize(Mb);ja._trim();for(za=0;za<Mb;za++)Na=6*za,ja.uint16[Na+0]=4*za,ja.uint16[Na+1]=4*za+1,ja.uint16[Na+2]=4*za+2,ja.uint16[Na+3]=4*za+2,ja.uint16[Na+4]=4*za+3,ja.uint16[Na+5]=4*za;Si=ja}Mb=Xa.createIndexBuffer(Si,!0);aa=Xa.createVertexBuffer(aa,a.collisionCircleLayout.members,!0);for(ja=0;ja<Kb.length;ja+=
1)za=Kb[ja],Na=ub.transform,Na={u_matrix:za.transform,u_inv_matrix:za.invTransform,u_camera_to_center_distance:Na.cameraToCenterDistance,u_viewport_size:[Na.width,Na.height]},Z.draw(Xa,mb.TRIANGLES,xd.disabled,be.disabled,ub.colorModeForRenderPass(),Hd.disabled,Na,da.id,aa,Mb,a.SegmentVector.simpleSegment(0,2*za.circleOffset,za.circleArray.length,za.circleArray.length/2),null,ub.transform.zoom,null,null,null);aa.destroy();Mb.destroy()}}function ha(ub,Z,da,aa,ja,za,Na,Xa,mb,Cb,Kb,Mb){var pc=ub.context,
rc=pc.gl,hc=ub.transform,Ib="map"===Xa,Rb="map"===mb,zc=Ib&&"point"!==da.layout.get("symbol-placement"),Tc=Ib&&!Rb&&!zc,dd=void 0!==da.layout.get("symbol-sort-key").constantOr(1);mb=ub.depthModeForSublayer(0,xd.ReadOnly);var Lc=da.layout.get("text-variable-anchor");Xa=[];for(var kd=0;kd<aa.length;kd+=1){var md=aa[kd],Nd=Z.getTile(md),Bd=Nd.getBucket(da);if(Bd){var vd=ja?Bd.text:Bd.icon;if(vd&&vd.segments.get().length){var Ld=vd.programConfigurations.get(da.id),Zd=ja||Bd.sdfIcons,de=ja?Bd.textSizeData:
Bd.iconSizeData,me=Rb||0!==hc.pitch;Ld=ub.useProgram(Bd.iconsInText&&ja?"symbolTextAndIcon":Zd?"symbolSDF":"symbolIcon",Ld);var He=a.evaluateSizeForZoom(de,hc.zoom),Md=void 0,Ee=[0,0],Ce=void 0,ae=void 0,we=null,Fe=void 0;ja?(Ce=Nd.glyphAtlasTexture,ae=rc.LINEAR,Md=Nd.glyphAtlasTexture.size,Bd.iconsInText&&(Ee=Nd.imageAtlasTexture.size,we=Nd.imageAtlasTexture,Fe=me||ub.options.rotating||ub.options.zooming||"composite"===de.kind||"camera"===de.kind?rc.LINEAR:rc.NEAREST)):(Md=1!==da.layout.get("icon-size").constantOr(0)||
Bd.iconsNeedLinear,Ce=Nd.imageAtlasTexture,ae=Zd||ub.options.rotating||ub.options.zooming||Md||me?rc.LINEAR:rc.NEAREST,Md=Nd.imageAtlasTexture.size);var Ke=U(Nd,1,ub.transform.zoom);me=B(md.posMatrix,Rb,Ib,ub.transform,Ke);Ke=t(md.posMatrix,Rb,Ib,ub.transform,Ke);var Jg=Lc&&Bd.hasTextData();Jg="none"!==da.layout.get("icon-text-fit")&&Jg&&Bd.hasIconData();zc&&I(Bd,md.posMatrix,ub,ja,me,Ke,Rb,Cb);md=ub.translatePosMatrix(md.posMatrix,Nd,za,Na);me=zc||ja&&Lc||Jg?th:me;Nd=ub.translatePosMatrix(Ke,Nd,
za,Na,!0);Ke=Zd&&0!==da.paint.get(ja?"text-halo-width":"icon-halo-width").constantOr(1);Bd={program:Ld,buffers:vd,uniformValues:Zd?Bd.iconsInText?qi(de.kind,He,Tc,Rb,ub,md,me,Nd,Md,Ee):rj(de.kind,He,Tc,Rb,ub,md,me,Nd,ja,Md,!0):Xj(de.kind,He,Tc,Rb,ub,md,me,Nd,ja,Md),atlasTexture:Ce,atlasTextureIcon:we,atlasInterpolation:ae,atlasInterpolationIcon:Fe,isSDF:Zd,hasHalo:Ke};if(dd)for(Zd=0,vd=vd.segments.get();Zd<vd.length;Zd+=1)de=vd[Zd],Xa.push({segments:new a.SegmentVector([de]),sortKey:de.sortKey,state:Bd});
else Xa.push({segments:vd.segments,sortKey:0,state:Bd})}}}dd&&Xa.sort(function(vf,Xf){return vf.sortKey-Xf.sortKey});for(Z=0;Z<Xa.length;Z+=1){aa=Xa[Z];ja=aa.state;if(pc.activeTexture.set(rc.TEXTURE0),ja.atlasTexture.bind(ja.atlasInterpolation,rc.CLAMP_TO_EDGE),ja.atlasTextureIcon&&(pc.activeTexture.set(rc.TEXTURE1),ja.atlasTextureIcon&&ja.atlasTextureIcon.bind(ja.atlasInterpolationIcon,rc.CLAMP_TO_EDGE)),ja.isSDF)za=ja.uniformValues,ja.hasHalo&&(za.u_is_halo=1,na(ja.buffers,aa.segments,da,ub,ja.program,
mb,Kb,Mb,za)),za.u_is_halo=0;na(ja.buffers,aa.segments,da,ub,ja.program,mb,Kb,Mb,ja.uniformValues)}}function na(ub,Z,da,aa,ja,za,Na,Xa,mb){var Cb=aa.context;ja.draw(Cb,Cb.gl.TRIANGLES,za,Na,Xa,Hd.disabled,mb,da.id,ub.layoutVertexBuffer,ub.indexBuffer,Z,da.paint,aa.transform.zoom,ub.programConfigurations.get(da.id),ub.dynamicLayoutVertexBuffer,ub.opacityVertexBuffer)}function pa(ub,Z,da,aa,ja,za,Na){var Xa,mb,Cb,Kb=ub.context.gl,Mb=da.paint.get("fill-pattern"),pc=Mb&&Mb.constantOr(1),rc=da.getCrossfadeParameters();
Na?(mb=pc&&!da.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Xa=Kb.LINES):(mb=pc?"fillPattern":"fill",Xa=Kb.TRIANGLES);for(var hc=0;hc<aa.length;hc+=1){var Ib=aa[hc];var Rb=Z.getTile(Ib);if(!pc||Rb.patternsLoaded()){var zc=Rb.getBucket(da);if(zc){var Tc=zc.programConfigurations.get(da.id),dd=ub.useProgram(mb,Tc);pc&&(ub.context.activeTexture.set(Kb.TEXTURE0),Rb.imageAtlasTexture.bind(Kb.LINEAR,Kb.CLAMP_TO_EDGE),Tc.updatePaintBuffers(rc));if((Cb=Mb.constantOr(null))&&Rb.imageAtlas){var Lc=
Rb.imageAtlas;var kd=Lc.patternPositions[Cb.to.toString()];Cb=Lc.patternPositions[Cb.from.toString()];kd&&Cb&&Tc.setConstantPatternPositions(kd,Cb)}Lc=ub.translatePosMatrix(Ib.posMatrix,Rb,da.paint.get("fill-translate"),da.paint.get("fill-translate-anchor"));if(Na){kd=zc.indexBuffer2;Cb=zc.segments2;var md=[Kb.drawingBufferWidth,Kb.drawingBufferHeight];Rb="fillOutlinePattern"===mb&&pc?a.extend(a.extend({u_matrix:Lc},ca(rc,ub,Rb)),{u_world:md}):{u_matrix:Lc,u_world:md}}else kd=zc.indexBuffer,Cb=zc.segments,
Rb=pc?a.extend({u_matrix:Lc},ca(rc,ub,Rb)):{u_matrix:Lc};dd.draw(ub.context,Xa,ja,ub.stencilModeForClipping(Ib),za,Hd.disabled,Rb,da.id,zc.layoutVertexBuffer,kd,Cb,da.paint,ub.transform.zoom,Tc)}}}}function ra(ub,Z,da,aa,ja,za,Na){for(var Xa=ub.context,mb=Xa.gl,Cb=da.paint.get("fill-extrusion-pattern"),Kb=Cb.constantOr(1),Mb=da.getCrossfadeParameters(),pc=da.paint.get("fill-extrusion-opacity"),rc=0;rc<aa.length;rc+=1){var hc=aa[rc],Ib=Z.getTile(hc),Rb=Ib.getBucket(da);if(Rb){var zc=Rb.programConfigurations.get(da.id),
Tc=ub.useProgram(Kb?"fillExtrusionPattern":"fillExtrusion",zc);Kb&&(ub.context.activeTexture.set(mb.TEXTURE0),Ib.imageAtlasTexture.bind(mb.LINEAR,mb.CLAMP_TO_EDGE),zc.updatePaintBuffers(Mb));var dd=Cb.constantOr(null);if(dd&&Ib.imageAtlas){var Lc=Ib.imageAtlas,kd=Lc.patternPositions[dd.to.toString()];dd=Lc.patternPositions[dd.from.toString()];kd&&dd&&zc.setConstantPatternPositions(kd,dd)}kd=ub.translatePosMatrix(hc.posMatrix,Ib,da.paint.get("fill-extrusion-translate"),da.paint.get("fill-extrusion-translate-anchor"));
dd=da.paint.get("fill-extrusion-vertical-gradient");if(Kb){Lc=ub;var md=Mb;Ib=a.extend(Vf(kd,Lc,dd,pc),ca(md,Lc,Ib),{u_height_factor:-Math.pow(2,hc.overscaledZ)/Ib.tileSize/8})}else Ib=Vf(kd,ub,dd,pc);Tc.draw(Xa,Xa.gl.TRIANGLES,ja,za,Na,Hd.backCCW,Ib,da.id,Rb.layoutVertexBuffer,Rb.indexBuffer,Rb.segments,da.paint,ub.transform.zoom,zc)}}}function ta(ub,Z,da,aa,ja,za,Na){var Xa=ub.context,mb=Xa.gl,Cb=Z.dem;if(Cb&&Cb.data){var Kb=Cb.dim,Mb=Cb.stride,pc=Cb.getPixels();(Xa.activeTexture.set(mb.TEXTURE1),
Xa.pixelStoreUnpackPremultiplyAlpha.set(!1),Z.demTexture=Z.demTexture||ub.getTileTexture(Mb),Z.demTexture)?(Mb=Z.demTexture,Mb.update(pc,{premultiply:!1}),Mb.bind(mb.NEAREST,mb.CLAMP_TO_EDGE)):(Z.demTexture=new a.Texture(Xa,pc,mb.RGBA,{premultiply:!1}),Z.demTexture.bind(mb.NEAREST,mb.CLAMP_TO_EDGE));Xa.activeTexture.set(mb.TEXTURE0);pc=Z.fbo;pc||(Mb=new a.Texture(Xa,{width:Kb,height:Kb,data:null},mb.RGBA),Mb.bind(mb.LINEAR,mb.CLAMP_TO_EDGE),(pc=Z.fbo=Xa.createFramebuffer(Kb,Kb,!0)).colorAttachment.set(Mb.texture));
Xa.bindFramebuffer.set(pc.framebuffer);Xa.viewport.set([0,0,Kb,Kb]);ub.useProgram("hillshadePrepare").draw(Xa,mb.TRIANGLES,ja,za,Na,Hd.disabled,function(rc,hc,Ib){var Rb=hc.stride,zc=a.create();return a.ortho(zc,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(zc,zc,[0,-a.EXTENT,0]),{u_matrix:zc,u_image:1,u_dimension:[Rb,Rb],u_zoom:rc.overscaledZ,u_maxzoom:Ib,u_unpack:hc.getUnpackVector()}}(Z.tileID,Cb,aa),da.id,ub.rasterBoundsBuffer,ub.quadTriangleIndexBuffer,ub.rasterBoundsSegments);Z.needsHillshadePrepare=
!1}}function oa(ub,Z,da,aa,ja,za){ub=ub.context;var Na=ub.gl;Na.enable(Na.SCISSOR_TEST);Na.scissor(Z*a.browser.devicePixelRatio,da*a.browser.devicePixelRatio,aa*a.browser.devicePixelRatio,ja*a.browser.devicePixelRatio);ub.clear({color:za});Na.disable(Na.SCISSOR_TEST)}function ua(ub,Z){(!ub.duration||ub.duration<Z.duration)&&(ub.duration=Z.duration,ub.easing=Z.easing)}function ka(ub,Z,da){var aa=da.maxSpeed,ja=da.linearity,za=da.deceleration;ub=a.clamp(ub*ja/(Z/1E3),-aa,aa);ja=Math.abs(ub)/(za*ja);
return{easing:da.easing,duration:1E3*ja,amount:ja/2*ub}}function sa(ub,Z){for(var da={},aa=0;aa<ub.length;aa++)da[ub[aa].identifier]=Z[aa];return da}function ya(ub,Z,da){for(var aa=0;aa<ub.length;aa++)if(ub[aa].identifier===da)return Z[aa]}function qa(ub){return Math.abs(ub.y)>Math.abs(ub.x)}function xa(ub){return ub*(2-ub)}function Ca(ub){return ub.panDelta&&ub.panDelta.mag()||ub.zoomDelta||ub.bearingDelta||ub.pitchDelta}function Ja(ub){ub.parentNode&&ub.parentNode.removeChild(ub)}function eb(ub,
Z,da){if(ub=new a.LngLat(ub.lng,ub.lat),Z){var aa=new a.LngLat(ub.lng-360,ub.lat),ja=new a.LngLat(ub.lng+360,ub.lat),za=da.locationPoint(ub).distSqr(Z);da.locationPoint(aa).distSqr(Z)<za?ub=aa:da.locationPoint(ja).distSqr(Z)<za&&(ub=ja)}for(;180<Math.abs(ub.lng-da.center.lng);){Z=da.locationPoint(ub);if(0<=Z.x&&0<=Z.y&&Z.x<=da.width&&Z.y<=da.height)break;ub.lng>da.center.lng?ub.lng-=360:ub.lng+=360}return ub}function Ra(ub,Z,da){ub=ub.classList;for(var aa in Rh)ub.remove("mapboxgl-"+da+"-anchor-"+
aa);ub.add("mapboxgl-"+da+"-anchor-"+Z)}function Wa(ub,Z,da){var aa=da&&da.maxWidth||100,ja=ub._container.clientHeight/2,za=ub.unproject([0,ja]);ja=ub.unproject([aa,ja]);za=za.distanceTo(ja);da&&"imperial"===da.unit?(da=3.2808*za,5280<da?Ea(Z,aa,da/5280,ub._getUIString("ScaleControl.Miles")):Ea(Z,aa,da,ub._getUIString("ScaleControl.Feet"))):da&&"nautical"===da.unit?Ea(Z,aa,za/1852,ub._getUIString("ScaleControl.NauticalMiles")):1E3<=za?Ea(Z,aa,za/1E3,ub._getUIString("ScaleControl.Kilometers")):Ea(Z,
aa,za,ub._getUIString("ScaleControl.Meters"))}function Ea(ub,Z,da,aa){var ja,za=ja=Math.pow(10,(""+Math.floor(da)).length-1);if(10<=(ja=da/ja))ja=10;else if(5<=ja)ja=5;else if(3<=ja)ja=3;else if(2<=ja)ja=2;else if(1<=ja)ja=1;else{var Na=Math.pow(10,Math.ceil(-Math.log(ja)/Math.LN10));ja=Math.round(ja*Na)/Na}za*=ja;ub.style.width=za/da*Z+"px";ub.innerHTML=za+"\x26nbsp;"+aa}var Ia=a.createCommonjsModule(function(ub){function Z(ja){return!da(ja)}function da(ja){return"undefined"==typeof window||"undefined"==
typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&
Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Na=new Blob([""],{type:"text/javascript"});Na=URL.createObjectURL(Na);try{var Xa=new Worker(Na);var mb=!0}catch(Cb){mb=!1}return Xa&&Xa.terminate(),URL.revokeObjectURL(Na),mb}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Na=document.createElement("canvas");Na.width=Na.height=
1;var Xa=Na.getContext("2d");return Xa?(Xa=Xa.getImageData(0,0,1,1))&&Xa.width===Na.width:!1}()?(void 0===aa[za=ja&&ja.failIfMajorPerformanceCaveat]&&(aa[za]=function(Na){var Xa=document.createElement("canvas"),mb=Object.create(Z.webGLContextAttributes);Na=(mb.failIfMajorPerformanceCaveat=Na,Xa.probablySupportsContext?Xa.probablySupportsContext("webgl",mb)||Xa.probablySupportsContext("experimental-webgl",mb):Xa.supportsContext?Xa.supportsContext("webgl",mb)||Xa.supportsContext("experimental-webgl",
mb):Xa.getContext("webgl",mb)||Xa.getContext("experimental-webgl",mb));if(!Na)return!1;Xa=Na.createShader(Na.VERTEX_SHADER);return!(!Xa||Na.isContextLost())&&(Na.shaderSource(Xa,"void main() {}"),Na.compileShader(Xa),!0===Na.getShaderParameter(Xa,Na.COMPILE_STATUS))}(za)),aa[za]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":
"insufficient Function support":"insufficent Array support";var za}ub.exports?ub.exports=Z:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Z,window.mapboxgl.notSupportedReason=da);var aa={};Z.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Qa={create:function(ub,Z,da){ub=a.window.document.createElement(ub);return void 0!==Z&&(ub.className=Z),da&&da.appendChild(ub),ub},createNS:function(ub,Z){return a.window.document.createElementNS(ub,Z)}},lb=a.window.document.documentElement.style,
hb,Fa=g(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Qa.disableDrag=function(){lb&&Fa&&(hb=lb[Fa],lb[Fa]="none")};Qa.enableDrag=function(){lb&&Fa&&(lb[Fa]=hb)};var La=g(["transform","WebkitTransform"]);Qa.setTransform=function(ub,Z){ub.style[La]=Z};var Oa=!1;try{var fb=Object.defineProperty({},"passive",{get:function(){Oa=!0}});a.window.addEventListener("test",fb,fb);a.window.removeEventListener("test",fb,fb)}catch(ub){Oa=!1}Qa.addEventListener=function(ub,Z,da,aa){void 0===aa&&
(aa={});ub.addEventListener(Z,da,"passive"in aa&&Oa?aa:aa.capture)};Qa.removeEventListener=function(ub,Z,da,aa){void 0===aa&&(aa={});ub.removeEventListener(Z,da,"passive"in aa&&Oa?aa:aa.capture)};var bb=function(ub){ub.preventDefault();ub.stopPropagation();a.window.removeEventListener("click",bb,!0)};Qa.suppressClick=function(){a.window.addEventListener("click",bb,!0);a.window.setTimeout(function(){a.window.removeEventListener("click",bb,!0)},0)};Qa.mousePos=function(ub,Z){var da=ub.getBoundingClientRect();
return new a.Point(Z.clientX-da.left-ub.clientLeft,Z.clientY-da.top-ub.clientTop)};Qa.touchPos=function(ub,Z){for(var da=ub.getBoundingClientRect(),aa=[],ja=0;ja<Z.length;ja++)aa.push(new a.Point(Z[ja].clientX-da.left-ub.clientLeft,Z[ja].clientY-da.top-ub.clientTop));return aa};Qa.mouseButton=function(ub){return void 0!==a.window.InstallTrigger&&2===ub.button&&ub.ctrlKey&&0<=a.window.navigator.platform.toUpperCase().indexOf("MAC")?0:ub.button};Qa.remove=function(ub){ub.parentNode&&ub.parentNode.removeChild(ub)};
var Pa=function(ub){function Z(){ub.call(this);this.images={};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new a.RGBAImage({width:1,height:1});this.dirty=!0}return ub&&(Z.__proto__=ub),(Z.prototype=Object.create(ub&&ub.prototype)).constructor=Z,Z.prototype.isLoaded=function(){return this.loaded},Z.prototype.setLoaded=function(da){if(this.loaded!==da&&(this.loaded=da,da)){da=0;for(var aa=this.requestors;da<aa.length;da+=
1){var ja=aa[da];this._notify(ja.ids,ja.callback)}this.requestors=[]}},Z.prototype.getImage=function(da){return this.images[da]},Z.prototype.addImage=function(da,aa){this._validate(da,aa)&&(this.images[da]=aa)},Z.prototype._validate=function(da,aa){var ja=!0;return this._validateStretch(aa.stretchX,aa.data&&aa.data.width)||(this.fire(new a.ErrorEvent(Error('Image "'+da+'" has invalid "stretchX" value'))),ja=!1),this._validateStretch(aa.stretchY,aa.data&&aa.data.height)||(this.fire(new a.ErrorEvent(Error('Image "'+
da+'" has invalid "stretchY" value'))),ja=!1),this._validateContent(aa.content,aa)||(this.fire(new a.ErrorEvent(Error('Image "'+da+'" has invalid "content" value'))),ja=!1),ja},Z.prototype._validateStretch=function(da,aa){if(!da)return!0;for(var ja=0,za=0;za<da.length;za+=1){var Na=da[za];if(Na[0]<ja||Na[1]<Na[0]||aa<Na[1])return!1;ja=Na[1]}return!0},Z.prototype._validateContent=function(da,aa){return!(da&&(4!==da.length||0>da[0]||aa.data.width<da[0]||0>da[1]||aa.data.height<da[1]||0>da[2]||aa.data.width<
da[2]||0>da[3]||aa.data.height<da[3]||da[2]<da[0]||da[3]<da[1]))},Z.prototype.updateImage=function(da,aa){aa.version=this.images[da].version+1;this.images[da]=aa;this.updatedImages[da]=!0},Z.prototype.removeImage=function(da){var aa=this.images[da];delete this.images[da];delete this.patterns[da];aa.userImage&&aa.userImage.onRemove&&aa.userImage.onRemove()},Z.prototype.listImages=function(){return Object.keys(this.images)},Z.prototype.getImages=function(da,aa){var ja=!0;if(!this.isLoaded())for(var za=
0;za<da.length;za+=1)this.images[da[za]]||(ja=!1);this.isLoaded()||ja?this._notify(da,aa):this.requestors.push({ids:da,callback:aa})},Z.prototype._notify=function(da,aa){for(var ja={},za=0;za<da.length;za+=1){var Na=da[za];this.images[Na]||this.fire(new a.Event("styleimagemissing",{id:Na}));var Xa=this.images[Na];Xa?ja[Na]={data:Xa.data.clone(),pixelRatio:Xa.pixelRatio,sdf:Xa.sdf,version:Xa.version,stretchX:Xa.stretchX,stretchY:Xa.stretchY,content:Xa.content,hasRenderCallback:!(!Xa.userImage||!Xa.userImage.render)}:
a.warnOnce('Image "'+Na+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}aa(null,ja)},Z.prototype.getPixelSize=function(){var da=this.atlasImage;return{width:da.width,height:da.height}},Z.prototype.getPattern=function(da){var aa=this.patterns[da],ja=this.getImage(da);if(!ja)return null;if(aa&&aa.position.version===ja.version)return aa.position;
aa?aa.position.version=ja.version:(aa={w:ja.data.width+2,h:ja.data.height+2,x:0,y:0},ja=new a.ImagePosition(aa,ja),this.patterns[da]={bin:aa,position:ja});return this._updatePatternAtlas(),this.patterns[da].position},Z.prototype.bind=function(da){var aa=da.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(da,this.atlasImage,aa.RGBA);this.atlasTexture.bind(aa.LINEAR,aa.CLAMP_TO_EDGE)},Z.prototype._updatePatternAtlas=function(){var da=
[];for(aa in this.patterns)da.push(this.patterns[aa].bin);da=a.potpack(da);var aa=da.w;var ja=da.h;da=this.atlasImage;for(var za in da.resize({width:aa||1,height:ja||1}),this.patterns){ja=this.patterns[za].bin;aa=ja.x+1;ja=ja.y+1;var Na=this.images[za].data,Xa=Na.width,mb=Na.height;a.RGBAImage.copy(Na,da,{x:0,y:0},{x:aa,y:ja},{width:Xa,height:mb});a.RGBAImage.copy(Na,da,{x:0,y:mb-1},{x:aa,y:ja-1},{width:Xa,height:1});a.RGBAImage.copy(Na,da,{x:0,y:0},{x:aa,y:ja+mb},{width:Xa,height:1});a.RGBAImage.copy(Na,
da,{x:Xa-1,y:0},{x:aa-1,y:ja},{width:1,height:mb});a.RGBAImage.copy(Na,da,{x:0,y:0},{x:aa+Xa,y:ja},{width:1,height:mb})}this.dirty=!0},Z.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Z.prototype.dispatchRenderCallbacks=function(da){for(var aa=0;aa<da.length;aa+=1){var ja=da[aa];if(!this.callbackDispatchedThisFrame[ja]){this.callbackDispatchedThisFrame[ja]=!0;var za=this.images[ja],Na=za,Xa=Na.userImage;Xa&&Xa.render&&Xa.render()&&(Na.data.replace(new Uint8Array(Xa.data.buffer)),
!0)&&this.updateImage(ja,za)}}},Z}(a.Evented);k.prototype.draw=function(ub){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(ub,this.buffer,this.middle);ub=this.ctx.getImageData(0,0,this.size,this.size);for(var Z=new Uint8ClampedArray(this.size*this.size),da=0;da<this.size*this.size;da++){var aa=ub.data[4*da+3]/255;this.gridOuter[da]=1===aa?0:0===aa?1E20:Math.pow(Math.max(0,.5-aa),2);this.gridInner[da]=1===aa?1E20:0===aa?0:Math.pow(Math.max(0,aa-.5),2)}p(this.gridOuter,this.size,this.size,
this.f,this.d,this.v,this.z);p(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(da=0;da<this.size*this.size;da++)Z[da]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[da]-this.gridInner[da])/this.radius+this.cutoff))));return Z};k.default=k;var Ta=function(ub,Z){this.requestManager=ub;this.localIdeographFontFamily=Z;this.entries={}};Ta.prototype.setURL=function(ub){this.url=ub};Ta.prototype.getGlyphs=function(ub,Z){var da=this,aa=[],ja;for(ja in ub)for(var za=0,Na=ub[ja];za<
Na.length;za+=1)aa.push({stack:ja,id:Na[za]});a.asyncAll(aa,function(Xa,mb){var Cb=Xa.stack,Kb=Xa.id,Mb=da.entries[Cb];Mb||(Mb=da.entries[Cb]={glyphs:{},requests:{},ranges:{}});Xa=Mb.glyphs[Kb];if(void 0===Xa){if(Xa=da._tinySDF(Mb,Cb,Kb))return Mb.glyphs[Kb]=Xa,void mb(null,{stack:Cb,id:Kb,glyph:Xa});var pc=Math.floor(Kb/256);if(65535<256*pc)mb(Error("glyphs \x3e 65535 not supported"));else if(Mb.ranges[pc])mb(null,{stack:Cb,id:Kb,glyph:Xa});else{var rc=Mb.requests[pc];rc||(rc=Mb.requests[pc]=[],
Ta.loadGlyphRange(Cb,pc,da.url,da.requestManager,function(hc,Ib){if(Ib){for(var Rb in Ib)da._doesCharSupportLocalGlyph(+Rb)||(Mb.glyphs[+Rb]=Ib[+Rb]);Mb.ranges[pc]=!0}Rb=0;for(var zc=rc;Rb<zc.length;Rb+=1)(0,zc[Rb])(hc,Ib);delete Mb.requests[pc]}));rc.push(function(hc,Ib){hc?mb(hc):Ib&&mb(null,{stack:Cb,id:Kb,glyph:Ib[Kb]||null})})}}else mb(null,{stack:Cb,id:Kb,glyph:Xa})},function(Xa,mb){if(Xa)Z(Xa);else if(mb){Xa={};for(var Cb=0;Cb<mb.length;Cb+=1){var Kb=mb[Cb],Mb=Kb.stack,pc=Kb.id;Kb=Kb.glyph;
(Xa[Mb]||(Xa[Mb]={}))[pc]=Kb&&{id:Kb.id,bitmap:Kb.bitmap.clone(),metrics:Kb.metrics}}Z(null,Xa)}})};Ta.prototype._doesCharSupportLocalGlyph=function(ub){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](ub)||a.isChar["Hangul Syllables"](ub)||a.isChar.Hiragana(ub)||a.isChar.Katakana(ub))};Ta.prototype._tinySDF=function(ub,Z,da){var aa=this.localIdeographFontFamily;if(aa&&this._doesCharSupportLocalGlyph(da)){var ja=ub.tinySDF;ja||(ja="400",/bold/i.test(Z)?ja="900":/medium/i.test(Z)?
ja="500":/light/i.test(Z)&&(ja="200"),ja=ub.tinySDF=new Ta.TinySDF(24,3,8,.25,aa,ja));return{id:da,bitmap:new a.AlphaImage({width:30,height:30},ja.draw(String.fromCharCode(da))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};Ta.loadGlyphRange=function(ub,Z,da,aa,ja){Z*=256;var za=Z+255;ub=aa.transformRequest(aa.normalizeGlyphsURL(da).replace("{fontstack}",ub).replace("{range}",Z+"-"+za),a.ResourceType.Glyphs);a.getArrayBuffer(ub,function(Na,Xa){if(Na)ja(Na);else if(Xa){Na={};var mb=0;for(Xa=
a.parseGlyphPBF(Xa);mb<Xa.length;mb+=1){var Cb=Xa[mb];Na[Cb.id]=Cb}ja(null,Na)}})};Ta.TinySDF=k;var Ya=function(){this.specification=a.styleSpec.light.position};Ya.prototype.possiblyEvaluate=function(ub,Z){return a.sphericalToCartesian(ub.expression.evaluate(Z))};Ya.prototype.interpolate=function(ub,Z,da){return{x:a.number(ub.x,Z.x,da),y:a.number(ub.y,Z.y,da),z:a.number(ub.z,Z.z,da)}};var nb=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Ya,color:new a.DataConstantProperty(a.styleSpec.light.color),
intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),Da=function(ub){function Z(da){ub.call(this);this._transitionable=new a.Transitionable(nb);this.setLight(da);this._transitioning=this._transitionable.untransitioned()}return ub&&(Z.__proto__=ub),(Z.prototype=Object.create(ub&&ub.prototype)).constructor=Z,Z.prototype.getLight=function(){return this._transitionable.serialize()},Z.prototype.setLight=function(da,aa){if(void 0===aa&&(aa={}),!this._validate(a.validateLight,da,aa))for(var ja in da)aa=
da[ja],a.endsWith(ja,"-transition")?this._transitionable.setTransition(ja.slice(0,-11),aa):this._transitionable.setValue(ja,aa)},Z.prototype.updateTransitions=function(da){this._transitioning=this._transitionable.transitioned(da,this._transitioning)},Z.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Z.prototype.recalculate=function(da){this.properties=this._transitioning.possiblyEvaluate(da)},Z.prototype._validate=function(da,aa,ja){return(!ja||!1!==ja.validate)&&a.emitValidationErrors(this,
da.call(a.validateStyle,a.extend({value:aa,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},Z}(a.Evented),Ha=function(ub,Z){this.width=ub;this.height=Z;this.nextRow=0;this.data=new Uint8Array(this.width*this.height);this.dashEntry={}};Ha.prototype.getDash=function(ub,Z){var da=ub.join(",")+String(Z);return this.dashEntry[da]||(this.dashEntry[da]=this.addDash(ub,Z)),this.dashEntry[da]};Ha.prototype.getDashRanges=function(ub,Z,da){Z=[];var aa=!0;Z.push({left:1==ub.length%2?-ub[ub.length-1]*da:
0,right:ub[0]*da,isDash:aa,zeroLength:0===ub[0]});for(var ja=ub[0],za=1;za<ub.length;za++){var Na=ub[za];Z.push({left:ja*da,right:(ja+=Na)*da,isDash:aa=!aa,zeroLength:0===Na})}return Z};Ha.prototype.addRoundDash=function(ub,Z,da){Z/=2;for(var aa=-da;aa<=da;aa++)for(var ja=this.width*(this.nextRow+da+aa),za=0,Na=ub[za],Xa=0;Xa<this.width;Xa++){1<Xa/Na.right&&(Na=ub[++za]);var mb=Math.min(Math.abs(Xa-Na.left),Math.abs(Xa-Na.right)),Cb=aa/da*(Z+1);Na.isDash?(Cb=Z-Math.abs(Cb),mb=Math.sqrt(mb*mb+Cb*Cb)):
mb=Z-Math.sqrt(mb*mb+Cb*Cb);this.data[ja+Xa]=Math.max(0,Math.min(255,mb+128))}};Ha.prototype.addRegularDash=function(ub){for(var Z=ub.length-1;0<=Z;--Z){var da=ub[Z],aa=ub[Z+1];da.zeroLength?ub.splice(Z,1):aa&&aa.isDash===da.isDash&&(aa.left=da.left,ub.splice(Z,1))}Z=ub[0];da=ub[ub.length-1];Z.isDash===da.isDash&&(Z.left=da.left-this.width,da.right=Z.right+this.width);Z=this.width*this.nextRow;da=0;aa=ub[da];for(var ja=0;ja<this.width;ja++){1<ja/aa.right&&(aa=ub[++da]);var za=Math.min(Math.abs(ja-
aa.left),Math.abs(ja-aa.right));this.data[Z+ja]=Math.max(0,Math.min(255,(aa.isDash?za:-za)+128))}};Ha.prototype.addDash=function(ub,Z){var da=Z?7:0,aa=2*da+1;if(this.nextRow+aa>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var ja=0,za=0;za<ub.length;za++)ja+=ub[za];0!==ja&&(za=this.width/ja,ub=this.getDashRanges(ub,this.width,za),Z?this.addRoundDash(ub,za,da):this.addRegularDash(ub));Z={y:(this.nextRow+da+.5)/this.height,height:2*da/this.height,width:ja};return this.nextRow+=aa,
this.dirty=!0,Z};Ha.prototype.bind=function(ub){ub=ub.gl;this.texture?(ub.bindTexture(ub.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ub.texSubImage2D(ub.TEXTURE_2D,0,0,0,this.width,this.height,ub.ALPHA,ub.UNSIGNED_BYTE,this.data))):(this.texture=ub.createTexture(),ub.bindTexture(ub.TEXTURE_2D,this.texture),ub.texParameteri(ub.TEXTURE_2D,ub.TEXTURE_WRAP_S,ub.REPEAT),ub.texParameteri(ub.TEXTURE_2D,ub.TEXTURE_WRAP_T,ub.REPEAT),ub.texParameteri(ub.TEXTURE_2D,ub.TEXTURE_MIN_FILTER,ub.LINEAR),ub.texParameteri(ub.TEXTURE_2D,
ub.TEXTURE_MAG_FILTER,ub.LINEAR),ub.texImage2D(ub.TEXTURE_2D,0,ub.ALPHA,this.width,this.height,0,ub.ALPHA,ub.UNSIGNED_BYTE,this.data))};var ab=function aa(Z,da){this.workerPool=Z;this.actors=[];this.currentActor=0;this.id=a.uniqueId();Z=this.workerPool.acquire(this.id);for(var ja=0;ja<Z.length;ja++){var za=new aa.Actor(Z[ja],da,this.id);za.name="Worker "+ja;this.actors.push(za)}};ab.prototype.broadcast=function(Z,da,aa){a.asyncAll(this.actors,function(ja,za){ja.send(Z,da,za)},aa=aa||function(){})};
ab.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]};ab.prototype.remove=function(){this.actors.forEach(function(Z){Z.remove()});this.actors=[];this.workerPool.release(this.id)};ab.Actor=a.Actor;var ib=function(Z,da,aa){this.bounds=a.LngLatBounds.convert(this.validateBounds(Z));this.minzoom=da||0;this.maxzoom=aa||24};ib.prototype.validateBounds=function(Z){return Array.isArray(Z)&&4===Z.length?[Math.max(-180,Z[0]),Math.max(-90,
Z[1]),Math.min(180,Z[2]),Math.min(90,Z[3])]:[-180,-90,180,90]};ib.prototype.contains=function(Z){var da=Math.pow(2,Z.z),aa=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*da),ja=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*da),za=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*da);da=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*da);return Z.x>=aa&&Z.x<za&&Z.y>=ja&&Z.y<da};var ob=function(Z){function da(aa,ja,za,Na){if(Z.call(this),this.id=aa,this.dispatcher=za,this.type=
"vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(ja,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},ja),this._collectResourceTiming=ja.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Na)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.load=
function(){var aa=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(ja,za){aa._tileJSONRequest=null;aa._loaded=!0;ja?aa.fire(new a.ErrorEvent(ja)):za&&(a.extend(aa,za),za.bounds&&(aa.tileBounds=new ib(za.bounds,aa.minzoom,aa.maxzoom)),a.postTurnstileEvent(za.tiles,aa.map._requestManager._customAccessToken),a.postMapLoadEvent(za.tiles,aa.map._getMapId(),aa.map._requestManager._skuToken,aa.map._requestManager._customAccessToken),
aa.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),aa.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},da.prototype.loaded=function(){return this._loaded},da.prototype.hasTile=function(aa){return!this.tileBounds||this.tileBounds.contains(aa.canonical)},da.prototype.onAdd=function(aa){this.map=aa;this.load()},da.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},da.prototype.serialize=function(){return a.extend({},
this._options)},da.prototype.loadTile=function(aa,ja){function za(Xa,mb){return delete aa.request,aa.aborted?ja(null):Xa&&404!==Xa.status?ja(Xa):(mb&&mb.resourceTiming&&(aa.resourceTiming=mb.resourceTiming),this.map._refreshExpiredTiles&&mb&&aa.setExpiryData(mb),aa.loadVectorData(mb,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),ja(null),void(aa.reloadCallback&&(this.loadTile(aa,aa.reloadCallback),aa.reloadCallback=null)))}var Na=this.map._requestManager.normalizeTileURL(aa.tileID.canonical.url(this.tiles,
this.scheme));Na={request:this.map._requestManager.transformRequest(Na,a.ResourceType.Tile),uid:aa.uid,tileID:aa.tileID,zoom:aa.tileID.overscaledZ,tileSize:this.tileSize*aa.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Na.request.collectResourceTiming=this._collectResourceTiming;aa.actor&&"expired"!==aa.state?"loading"===aa.state?aa.reloadCallback=ja:aa.request=aa.actor.send("reloadTile",
Na,za.bind(this)):(aa.actor=this.dispatcher.getActor(),aa.request=aa.actor.send("loadTile",Na,za.bind(this)))},da.prototype.abortTile=function(aa){aa.request&&(aa.request.cancel(),delete aa.request);aa.actor&&aa.actor.send("abortTile",{uid:aa.uid,type:this.type,source:this.id},void 0)},da.prototype.unloadTile=function(aa){aa.unloadVectorData();aa.actor&&aa.actor.send("removeTile",{uid:aa.uid,type:this.type,source:this.id},void 0)},da.prototype.hasTransition=function(){return!1},da}(a.Evented),db=
function(Z){function da(aa,ja,za,Na){Z.call(this);this.id=aa;this.dispatcher=za;this.setEventedParent(Na);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=a.extend({type:"raster"},ja);a.extend(this,a.pick(ja,["url","scheme","tileSize"]))}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.load=function(){var aa=this;this._loaded=!1;this.fire(new a.Event("dataloading",
{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(ja,za){aa._tileJSONRequest=null;aa._loaded=!0;ja?aa.fire(new a.ErrorEvent(ja)):za&&(a.extend(aa,za),za.bounds&&(aa.tileBounds=new ib(za.bounds,aa.minzoom,aa.maxzoom)),a.postTurnstileEvent(za.tiles),a.postMapLoadEvent(za.tiles,aa.map._getMapId(),aa.map._requestManager._skuToken),aa.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),aa.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},
da.prototype.loaded=function(){return this._loaded},da.prototype.onAdd=function(aa){this.map=aa;this.load()},da.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},da.prototype.serialize=function(){return a.extend({},this._options)},da.prototype.hasTile=function(aa){return!this.tileBounds||this.tileBounds.contains(aa.canonical)},da.prototype.loadTile=function(aa,ja){var za=this,Na=this.map._requestManager.normalizeTileURL(aa.tileID.canonical.url(this.tiles,
this.scheme),this.tileSize);aa.request=a.getImage(this.map._requestManager.transformRequest(Na,a.ResourceType.Tile),function(Xa,mb){if(delete aa.request,aa.aborted)aa.state="unloaded",ja(null);else if(Xa)aa.state="errored",ja(Xa);else if(mb){za.map._refreshExpiredTiles&&aa.setExpiryData(mb);delete mb.cacheControl;delete mb.expires;Xa=za.map.painter.context;var Cb=Xa.gl;aa.texture=za.map.painter.getTileTexture(mb.width);aa.texture?aa.texture.update(mb,{useMipmap:!0}):(aa.texture=new a.Texture(Xa,mb,
Cb.RGBA,{useMipmap:!0}),aa.texture.bind(Cb.LINEAR,Cb.CLAMP_TO_EDGE,Cb.LINEAR_MIPMAP_NEAREST),Xa.extTextureFilterAnisotropic&&Cb.texParameterf(Cb.TEXTURE_2D,Xa.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Xa.extTextureFilterAnisotropicMax));aa.state="loaded";a.cacheEntryPossiblyAdded(za.dispatcher);ja(null)}})},da.prototype.abortTile=function(aa,ja){aa.request&&(aa.request.cancel(),delete aa.request);ja()},da.prototype.unloadTile=function(aa,ja){aa.texture&&this.map.painter.saveTileTexture(aa.texture);
ja()},da.prototype.hasTransition=function(){return!1},da}(a.Evented),gb=function(Z){function da(aa,ja,za,Na){Z.call(this,aa,ja,za,Na);this.type="raster-dem";this.maxzoom=22;this._options=a.extend({type:"raster-dem"},ja);this.encoding=ja.encoding||"mapbox"}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},da.prototype.loadTile=
function(aa,ja){function za(Xa,mb){Xa&&(aa.state="errored",ja(Xa));mb&&(aa.dem=mb,aa.needsHillshadePrepare=!0,aa.state="loaded",ja(null))}var Na=this.map._requestManager.normalizeTileURL(aa.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);aa.request=a.getImage(this.map._requestManager.transformRequest(Na,a.ResourceType.Tile),function(Xa,mb){(delete aa.request,aa.aborted)?(aa.state="unloaded",ja(null)):Xa?(aa.state="errored",ja(Xa)):mb&&(this.map._refreshExpiredTiles&&aa.setExpiryData(mb),
delete mb.cacheControl,delete mb.expires,Xa=a.window.ImageBitmap&&mb instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?mb:a.browser.getImageData(mb,1),Xa={uid:aa.uid,coord:aa.tileID,source:this.id,rawImageData:Xa,encoding:this.encoding},aa.actor&&"expired"!==aa.state||(aa.actor=this.dispatcher.getActor(),aa.actor.send("loadDEMTile",Xa,za.bind(this))))}.bind(this));aa.neighboringTiles=this._getNeighboringTiles(aa.tileID)},da.prototype._getNeighboringTiles=function(aa){var ja=aa.canonical,
za=Math.pow(2,ja.z),Na=(ja.x-1+za)%za,Xa=0===ja.x?aa.wrap-1:aa.wrap,mb=(ja.x+1+za)%za,Cb=ja.x+1===za?aa.wrap+1:aa.wrap,Kb={};return Kb[(new a.OverscaledTileID(aa.overscaledZ,Xa,ja.z,Na,ja.y)).key]={backfilled:!1},Kb[(new a.OverscaledTileID(aa.overscaledZ,Cb,ja.z,mb,ja.y)).key]={backfilled:!1},0<ja.y&&(Kb[(new a.OverscaledTileID(aa.overscaledZ,Xa,ja.z,Na,ja.y-1)).key]={backfilled:!1},Kb[(new a.OverscaledTileID(aa.overscaledZ,aa.wrap,ja.z,ja.x,ja.y-1)).key]={backfilled:!1},Kb[(new a.OverscaledTileID(aa.overscaledZ,
Cb,ja.z,mb,ja.y-1)).key]={backfilled:!1}),ja.y+1<za&&(Kb[(new a.OverscaledTileID(aa.overscaledZ,Xa,ja.z,Na,ja.y+1)).key]={backfilled:!1},Kb[(new a.OverscaledTileID(aa.overscaledZ,aa.wrap,ja.z,ja.x,ja.y+1)).key]={backfilled:!1},Kb[(new a.OverscaledTileID(aa.overscaledZ,Cb,ja.z,mb,ja.y+1)).key]={backfilled:!1}),Kb},da.prototype.unloadTile=function(aa){aa.demTexture&&this.map.painter.saveTileTexture(aa.demTexture);aa.fbo&&(aa.fbo.destroy(),delete aa.fbo);aa.dem&&delete aa.dem;delete aa.neighboringTiles;
aa.state="unloaded";aa.actor&&aa.actor.send("removeDEMTile",{uid:aa.uid,source:this.id})},da}(db),rb=function(Z){function da(aa,ja,za,Na){Z.call(this);this.id=aa;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._loaded=this._removed=!1;this.actor=za.getActor();this.setEventedParent(Na);this._data=ja.data;this._options=a.extend({},ja);this._collectResourceTiming=ja.collectResourceTiming;this._resourceTiming=[];void 0!==ja.maxzoom&&
(this.maxzoom=ja.maxzoom);ja.type&&(this.type=ja.type);ja.attribution&&(this.attribution=ja.attribution);this.promoteId=ja.promoteId;aa=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:ja.cluster||!1,geojsonVtOptions:{buffer:(void 0!==ja.buffer?ja.buffer:128)*aa,tolerance:(void 0!==ja.tolerance?ja.tolerance:.375)*aa,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:ja.lineMetrics||!1,generateId:ja.generateId||!1},superclusterOptions:{maxZoom:void 0!==ja.clusterMaxZoom?Math.min(ja.clusterMaxZoom,
this.maxzoom-1):this.maxzoom-1,extent:a.EXTENT,radius:(ja.clusterRadius||50)*aa,log:!1,generateId:ja.generateId||!1},clusterProperties:ja.clusterProperties},ja.workerOptions)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.load=function(){var aa=this;this.fire(new a.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(ja){ja?aa.fire(new a.ErrorEvent(ja)):(ja={dataType:"source",sourceDataType:"metadata"},aa._collectResourceTiming&&
aa._resourceTiming&&0<aa._resourceTiming.length&&(ja.resourceTiming=aa._resourceTiming,aa._resourceTiming=[]),aa.fire(new a.Event("data",ja)))})},da.prototype.onAdd=function(aa){this.map=aa;this.load()},da.prototype.setData=function(aa){var ja=this;return this._data=aa,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(za){za?ja.fire(new a.ErrorEvent(za)):(za={dataType:"source",sourceDataType:"content"},ja._collectResourceTiming&&ja._resourceTiming&&0<ja._resourceTiming.length&&
(za.resourceTiming=ja._resourceTiming,ja._resourceTiming=[]),ja.fire(new a.Event("data",za)))}),this},da.prototype.getClusterExpansionZoom=function(aa,ja){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:aa,source:this.id},ja),this},da.prototype.getClusterChildren=function(aa,ja){return this.actor.send("geojson.getClusterChildren",{clusterId:aa,source:this.id},ja),this},da.prototype.getClusterLeaves=function(aa,ja,za,Na){return this.actor.send("geojson.getClusterLeaves",{source:this.id,
clusterId:aa,limit:ja,offset:za},Na),this},da.prototype._updateWorkerData=function(aa){var ja=this;this._loaded=!1;var za=a.extend({},this.workerOptions),Na=this._data;"string"==typeof Na?(za.request=this.map._requestManager.transformRequest(a.browser.resolveURL(Na),a.ResourceType.Source),za.request.collectResourceTiming=this._collectResourceTiming):za.data=JSON.stringify(Na);this.actor.send(this.type+".loadData",za,function(Xa,mb){ja._removed||mb&&mb.abandoned||(ja._loaded=!0,mb&&mb.resourceTiming&&
mb.resourceTiming[ja.id]&&(ja._resourceTiming=mb.resourceTiming[ja.id].slice(0)),ja.actor.send(ja.type+".coalesce",{source:za.source},null),aa(Xa))})},da.prototype.loaded=function(){return this._loaded},da.prototype.loadTile=function(aa,ja){var za=this,Na=aa.actor?"reloadTile":"loadTile";aa.actor=this.actor;aa.request=this.actor.send(Na,{type:this.type,uid:aa.uid,tileID:aa.tileID,zoom:aa.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,
showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Xa,mb){return delete aa.request,aa.unloadVectorData(),aa.aborted?ja(null):Xa?ja(Xa):(aa.loadVectorData(mb,za.map.painter,"reloadTile"===Na),ja(null))})},da.prototype.abortTile=function(aa){aa.request&&(aa.request.cancel(),delete aa.request);aa.aborted=!0},da.prototype.unloadTile=function(aa){aa.unloadVectorData();this.actor.send("removeTile",{uid:aa.uid,type:this.type,source:this.id})},da.prototype.onRemove=function(){this._removed=
!0;this.actor.send("removeSource",{type:this.type,source:this.id})},da.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},da.prototype.hasTransition=function(){return!1},da}(a.Evented),Bb=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Qb=function(Z){function da(aa,ja,za,Na){Z.call(this);this.id=aa;this.dispatcher=za;this.coordinates=ja.coordinates;this.type="image";this.minzoom=0;this.maxzoom=
22;this.tileSize=512;this.tiles={};this._loaded=!1;this.setEventedParent(Na);this.options=ja}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.load=function(aa,ja){var za=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this.url=this.options.url;a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(Na,Xa){za._loaded=!0;Na?za.fire(new a.ErrorEvent(Na)):Xa&&(za.image=Xa,aa&&(za.coordinates=
aa),ja&&ja(),za._finishLoading())})},da.prototype.loaded=function(){return this._loaded},da.prototype.updateImage=function(aa){var ja=this;return this.image&&aa.url?(this.options.url=aa.url,this.load(aa.coordinates,function(){ja.texture=null}),this):this},da.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},da.prototype.onAdd=function(aa){this.map=aa;this.load()},da.prototype.setCoordinates=
function(aa){var ja=this;this.coordinates=aa;aa=aa.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(za){for(var Na=1/0,Xa=1/0,mb=-1/0,Cb=-1/0,Kb=0;Kb<za.length;Kb+=1){var Mb=za[Kb];Na=Math.min(Na,Mb.x);Xa=Math.min(Xa,Mb.y);mb=Math.max(mb,Mb.x);Cb=Math.max(Cb,Mb.y)}za=Math.max(0,Math.floor(-Math.log(Math.max(mb-Na,Cb-Xa))/Math.LN2));Kb=Math.pow(2,za);return new a.CanonicalTileID(za,Math.floor((Na+mb)/2*Kb),Math.floor((Xa+Cb)/2*Kb))}(aa);this.minzoom=this.maxzoom=this.tileID.z;aa=aa.map(function(za){return ja.tileID.getTilePoint(za)._round()});
return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(aa[0].x,aa[0].y,0,0),this._boundsArray.emplaceBack(aa[1].x,aa[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(aa[3].x,aa[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(aa[2].x,aa[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},da.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&
this.image){var aa=this.map.painter.context,ja=aa.gl,za;for(za in this.boundsBuffer||(this.boundsBuffer=aa.createVertexBuffer(this._boundsArray,Bb.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(aa,this.image,ja.RGBA),this.texture.bind(ja.LINEAR,ja.CLAMP_TO_EDGE)),this.tiles)aa=this.tiles[za],"loaded"!==aa.state&&(aa.state="loaded",aa.texture=this.texture)}},da.prototype.loadTile=function(aa,ja){this.tileID&&this.tileID.equals(aa.tileID.canonical)?
(this.tiles[String(aa.tileID.wrap)]=aa,aa.buckets={},ja(null)):(aa.state="errored",ja(null))},da.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},da.prototype.hasTransition=function(){return!1},da}(a.Evented),gc=function(Z){function da(aa,ja,za,Na){Z.call(this,aa,ja,za,Na);this.roundZoom=!0;this.type="video";this.options=ja}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.load=function(){var aa=
this;this._loaded=!1;var ja=this.options;this.urls=[];var za=0;for(ja=ja.urls;za<ja.length;za+=1)this.urls.push(this.map._requestManager.transformRequest(ja[za],a.ResourceType.Source).url);a.getVideo(this.urls,function(Na,Xa){aa._loaded=!0;Na?aa.fire(new a.ErrorEvent(Na)):Xa&&(aa.video=Xa,aa.video.loop=!0,aa.video.addEventListener("playing",function(){aa.map.triggerRepaint()}),aa.map&&aa.video.play(),aa._finishLoading())})},da.prototype.pause=function(){this.video&&this.video.pause()},da.prototype.play=
function(){this.video&&this.video.play()},da.prototype.seek=function(aa){if(this.video){var ja=this.video.seekable;aa<ja.start(0)||aa>ja.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ja.start(0)+" and "+ja.end(0)+"-second mark."))):this.video.currentTime=aa}},da.prototype.getVideo=function(){return this.video},da.prototype.onAdd=function(aa){this.map||(this.map=aa,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},
da.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var aa=this.map.painter.context,ja=aa.gl,za;for(za in this.boundsBuffer||(this.boundsBuffer=aa.createVertexBuffer(this._boundsArray,Bb.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ja.LINEAR,ja.CLAMP_TO_EDGE),ja.texSubImage2D(ja.TEXTURE_2D,0,0,0,ja.RGBA,ja.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(aa,
this.video,ja.RGBA),this.texture.bind(ja.LINEAR,ja.CLAMP_TO_EDGE)),this.tiles)aa=this.tiles[za],"loaded"!==aa.state&&(aa.state="loaded",aa.texture=this.texture)}},da.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},da.prototype.hasTransition=function(){return this.video&&!this.video.paused},da}(Qb),tc=function(Z){function da(aa,ja,za,Na){Z.call(this,aa,ja,za,Na);ja.coordinates?Array.isArray(ja.coordinates)&&4===ja.coordinates.length&&!ja.coordinates.some(function(Xa){return!Array.isArray(Xa)||
2!==Xa.length||Xa.some(function(mb){return"number"!=typeof mb})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+aa,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+aa,null,'missing required property "coordinates"')));ja.animate&&"boolean"!=typeof ja.animate&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+aa,null,'optional "animate" property must be a boolean value')));ja.canvas?
"string"==typeof ja.canvas||ja.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+aa,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+aa,null,'missing required property "canvas"')));this.options=ja;this.animate=void 0===ja.animate||ja.animate}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&
Z.prototype)).constructor=da,da.prototype.load=function(){this._loaded=!0;this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing&&
(this.prepare(),this._playing=!1)},this._finishLoading())},da.prototype.getCanvas=function(){return this.canvas},da.prototype.onAdd=function(aa){this.map=aa;this.load();this.canvas&&this.animate&&this.play()},da.prototype.onRemove=function(){this.pause()},da.prototype.prepare=function(){var aa=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,aa=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,aa=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var ja=
this.map.painter.context,za=ja.gl,Na;for(Na in this.boundsBuffer||(this.boundsBuffer=ja.createVertexBuffer(this._boundsArray,Bb.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(aa||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(ja,this.canvas,za.RGBA,{premultiply:!0}),this.tiles)aa=this.tiles[Na],"loaded"!==aa.state&&(aa.state="loaded",aa.texture=this.texture)}},da.prototype.serialize=function(){return{type:"canvas",
coordinates:this.coordinates}},da.prototype.hasTransition=function(){return this._playing},da.prototype._hasInvalidDimensions=function(){for(var aa=0,ja=[this.canvas.width,this.canvas.height];aa<ja.length;aa+=1){var za=ja[aa];if(isNaN(za)||0>=za)return!0}return!1},da}(Qb),Ac={vector:ob,raster:db,"raster-dem":gb,geojson:rb,video:gc,image:Qb,canvas:tc},Uc=function(Z,da){this.max=Z;this.onRemove=da;this.reset()};Uc.prototype.reset=function(){for(var Z in this.data)for(var da=0,aa=this.data[Z];da<aa.length;da+=
1){var ja=aa[da];ja.timeout&&clearTimeout(ja.timeout);this.onRemove(ja.value)}return this.data={},this.order=[],this};Uc.prototype.add=function(Z,da,aa){var ja=this,za=Z.wrapped().key;void 0===this.data[za]&&(this.data[za]=[]);var Na={value:da,timeout:void 0};(void 0!==aa&&(Na.timeout=setTimeout(function(){ja.remove(Z,Na)},aa)),this.data[za].push(Na),this.order.push(za),this.order.length>this.max)&&(da=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(da);return this};Uc.prototype.has=function(Z){return Z.wrapped().key in
this.data};Uc.prototype.getAndRemove=function(Z){return this.has(Z)?this._getAndRemoveByKey(Z.wrapped().key):null};Uc.prototype._getAndRemoveByKey=function(Z){var da=this.data[Z].shift();return da.timeout&&clearTimeout(da.timeout),0===this.data[Z].length&&delete this.data[Z],this.order.splice(this.order.indexOf(Z),1),da.value};Uc.prototype.getByKey=function(Z){return(Z=this.data[Z])?Z[0].value:null};Uc.prototype.get=function(Z){return this.has(Z)?this.data[Z.wrapped().key][0].value:null};Uc.prototype.remove=
function(Z,da){if(!this.has(Z))return this;Z=Z.wrapped().key;da=void 0===da?0:this.data[Z].indexOf(da);var aa=this.data[Z][da];return this.data[Z].splice(da,1),aa.timeout&&clearTimeout(aa.timeout),0===this.data[Z].length&&delete this.data[Z],this.onRemove(aa.value),this.order.splice(this.order.indexOf(Z),1),this};Uc.prototype.setMaxSize=function(Z){for(this.max=Z;this.order.length>this.max;)(Z=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(Z);return this};Uc.prototype.filter=function(Z){var da=
[];for(Na in this.data)for(var aa=0,ja=this.data[Na];aa<ja.length;aa+=1){var za=ja[aa];Z(za.value)||da.push(za)}for(Z=0;Z<da.length;Z+=1){var Na=da[Z];this.remove(Na.value.tileID,Na)}};var Nc=function(Z,da,aa){this.context=Z;var ja=Z.gl;this.buffer=ja.createBuffer();this.dynamicDraw=!!aa;this.context.unbindVAO();Z.bindElementBuffer.set(this.buffer);ja.bufferData(ja.ELEMENT_ARRAY_BUFFER,da.arrayBuffer,this.dynamicDraw?ja.DYNAMIC_DRAW:ja.STATIC_DRAW);this.dynamicDraw||delete da.arrayBuffer};Nc.prototype.bind=
function(){this.context.bindElementBuffer.set(this.buffer)};Nc.prototype.updateData=function(Z){var da=this.context.gl;this.context.unbindVAO();this.bind();da.bufferSubData(da.ELEMENT_ARRAY_BUFFER,0,Z.arrayBuffer)};Nc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var gd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Xc=function(Z,da,aa,ja){this.length=da.length;
this.attributes=aa;this.itemSize=da.bytesPerElement;this.dynamicDraw=ja;this.context=Z;aa=Z.gl;this.buffer=aa.createBuffer();Z.bindVertexBuffer.set(this.buffer);aa.bufferData(aa.ARRAY_BUFFER,da.arrayBuffer,this.dynamicDraw?aa.DYNAMIC_DRAW:aa.STATIC_DRAW);this.dynamicDraw||delete da.arrayBuffer};Xc.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};Xc.prototype.updateData=function(Z){var da=this.context.gl;this.bind();da.bufferSubData(da.ARRAY_BUFFER,0,Z.arrayBuffer)};Xc.prototype.enableAttributes=
function(Z,da){for(var aa=0;aa<this.attributes.length;aa++){var ja=da.attributes[this.attributes[aa].name];void 0!==ja&&Z.enableVertexAttribArray(ja)}};Xc.prototype.setVertexAttribPointers=function(Z,da,aa){for(var ja=0;ja<this.attributes.length;ja++){var za=this.attributes[ja],Na=da.attributes[za.name];void 0!==Na&&Z.vertexAttribPointer(Na,za.components,Z[gd[za.type]],!1,this.itemSize,za.offset+this.itemSize*(aa||0))}};Xc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),
delete this.buffer)};var ed=function(Z){this.gl=Z.gl;this.current=this.default=this.getDefault();this.dirty=!1};ed.prototype.get=function(){return this.current};ed.prototype.set=function(Z){};ed.prototype.getDefault=function(){return this.default};ed.prototype.setDefault=function(){this.set(this.default)};var tb=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return a.Color.transparent},
da.prototype.set=function(aa){var ja=this.current;(aa.r!==ja.r||aa.g!==ja.g||aa.b!==ja.b||aa.a!==ja.a||this.dirty)&&(this.gl.clearColor(aa.r,aa.g,aa.b,aa.a),this.current=aa,this.dirty=!1)},da}(ed),Xb=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return 1},da.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.clearDepth(aa),this.current=aa,this.dirty=!1)},
da}(ed),uc=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return 0},da.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.clearStencil(aa),this.current=aa,this.dirty=!1)},da}(ed),Mc=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return[!0,
!0,!0,!0]},da.prototype.set=function(aa){var ja=this.current;(aa[0]!==ja[0]||aa[1]!==ja[1]||aa[2]!==ja[2]||aa[3]!==ja[3]||this.dirty)&&(this.gl.colorMask(aa[0],aa[1],aa[2],aa[3]),this.current=aa,this.dirty=!1)},da}(ed),Rc=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return!0},da.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.depthMask(aa),this.current=
aa,this.dirty=!1)},da}(ed),fd=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return 255},da.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.stencilMask(aa),this.current=aa,this.dirty=!1)},da}(ed),sb=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=
function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},da.prototype.set=function(aa){var ja=this.current;(aa.func!==ja.func||aa.ref!==ja.ref||aa.mask!==ja.mask||this.dirty)&&(this.gl.stencilFunc(aa.func,aa.ref,aa.mask),this.current=aa,this.dirty=!1)},da}(ed),xb=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){var aa=this.gl;return[aa.KEEP,aa.KEEP,aa.KEEP]},da.prototype.set=function(aa){var ja=
this.current;(aa[0]!==ja[0]||aa[1]!==ja[1]||aa[2]!==ja[2]||this.dirty)&&(this.gl.stencilOp(aa[0],aa[1],aa[2]),this.current=aa,this.dirty=!1)},da}(ed),kc=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return!1},da.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;aa?ja.enable(ja.STENCIL_TEST):ja.disable(ja.STENCIL_TEST);this.current=aa;this.dirty=!1}},
da}(ed),nc=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return[0,1]},da.prototype.set=function(aa){var ja=this.current;(aa[0]!==ja[0]||aa[1]!==ja[1]||this.dirty)&&(this.gl.depthRange(aa[0],aa[1]),this.current=aa,this.dirty=!1)},da}(ed),Kc=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,
da.prototype.getDefault=function(){return!1},da.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;aa?ja.enable(ja.DEPTH_TEST):ja.disable(ja.DEPTH_TEST);this.current=aa;this.dirty=!1}},da}(ed),ac=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return this.gl.LESS},da.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.depthFunc(aa),this.current=
aa,this.dirty=!1)},da}(ed),Tb=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return!1},da.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;aa?ja.enable(ja.BLEND):ja.disable(ja.BLEND);this.current=aa;this.dirty=!1}},da}(ed),yb=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=
da,da.prototype.getDefault=function(){var aa=this.gl;return[aa.ONE,aa.ZERO]},da.prototype.set=function(aa){var ja=this.current;(aa[0]!==ja[0]||aa[1]!==ja[1]||this.dirty)&&(this.gl.blendFunc(aa[0],aa[1]),this.current=aa,this.dirty=!1)},da}(ed),Gb=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return a.Color.transparent},da.prototype.set=function(aa){var ja=this.current;(aa.r!==
ja.r||aa.g!==ja.g||aa.b!==ja.b||aa.a!==ja.a||this.dirty)&&(this.gl.blendColor(aa.r,aa.g,aa.b,aa.a),this.current=aa,this.dirty=!1)},da}(ed),Eb=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return this.gl.FUNC_ADD},da.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.blendEquation(aa),this.current=aa,this.dirty=!1)},da}(ed),Vb=function(Z){function da(){Z.apply(this,
arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return!1},da.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;aa?ja.enable(ja.CULL_FACE):ja.disable(ja.CULL_FACE);this.current=aa;this.dirty=!1}},da}(ed),Zb=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return this.gl.BACK},
da.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.cullFace(aa),this.current=aa,this.dirty=!1)},da}(ed),Dc=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return this.gl.CCW},da.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.frontFace(aa),this.current=aa,this.dirty=!1)},da}(ed),ic=function(Z){function da(){Z.apply(this,arguments)}return Z&&
(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return null},da.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.useProgram(aa),this.current=aa,this.dirty=!1)},da}(ed),Bc=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return this.gl.TEXTURE0},da.prototype.set=function(aa){(aa!==this.current||
this.dirty)&&(this.gl.activeTexture(aa),this.current=aa,this.dirty=!1)},da}(ed),Sc=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){var aa=this.gl;return[0,0,aa.drawingBufferWidth,aa.drawingBufferHeight]},da.prototype.set=function(aa){var ja=this.current;(aa[0]!==ja[0]||aa[1]!==ja[1]||aa[2]!==ja[2]||aa[3]!==ja[3]||this.dirty)&&(this.gl.viewport(aa[0],aa[1],aa[2],aa[3]),this.current=
aa,this.dirty=!1)},da}(ed),Ic=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return null},da.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.bindFramebuffer(ja.FRAMEBUFFER,aa);this.current=aa;this.dirty=!1}},da}(ed),$c=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=
da,da.prototype.getDefault=function(){return null},da.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.bindRenderbuffer(ja.RENDERBUFFER,aa);this.current=aa;this.dirty=!1}},da}(ed),nd=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return null},da.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.bindTexture(ja.TEXTURE_2D,
aa);this.current=aa;this.dirty=!1}},da}(ed),Yc=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return null},da.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.bindBuffer(ja.ARRAY_BUFFER,aa);this.current=aa;this.dirty=!1}},da}(ed),rd=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=
da,da.prototype.getDefault=function(){return null},da.prototype.set=function(aa){var ja=this.gl;ja.bindBuffer(ja.ELEMENT_ARRAY_BUFFER,aa);this.current=aa;this.dirty=!1},da}(ed),wd=function(Z){function da(aa){Z.call(this,aa);this.vao=aa.extVertexArrayObject}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return null},da.prototype.set=function(aa){this.vao&&(aa!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(aa),this.current=
aa,this.dirty=!1)},da}(ed),cd=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return 4},da.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.pixelStorei(ja.UNPACK_ALIGNMENT,aa);this.current=aa;this.dirty=!1}},da}(ed),Jc=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=
da,da.prototype.getDefault=function(){return!1},da.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.pixelStorei(ja.UNPACK_PREMULTIPLY_ALPHA_WEBGL,aa);this.current=aa;this.dirty=!1}},da}(ed),sd=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return!1},da.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.pixelStorei(ja.UNPACK_FLIP_Y_WEBGL,
aa);this.current=aa;this.dirty=!1}},da}(ed),ud=function(Z){function da(aa,ja){Z.call(this,aa);this.context=aa;this.parent=ja}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getDefault=function(){return null},da}(ed),yd=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.setDirty=function(){this.dirty=!0},da.prototype.set=function(aa){if(aa!==this.current||
this.dirty){this.context.bindFramebuffer.set(this.parent);var ja=this.gl;ja.framebufferTexture2D(ja.FRAMEBUFFER,ja.COLOR_ATTACHMENT0,ja.TEXTURE_2D,aa,0);this.current=aa;this.dirty=!1}},da}(ud),cb=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.set=function(aa){if(aa!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ja=this.gl;ja.framebufferRenderbuffer(ja.FRAMEBUFFER,ja.DEPTH_ATTACHMENT,
ja.RENDERBUFFER,aa);this.current=aa;this.dirty=!1}},da}(ud),je=function(Z,da,aa,ja){this.context=Z;this.width=da;this.height=aa;da=this.framebuffer=Z.gl.createFramebuffer();this.colorAttachment=new yd(Z,da);ja&&(this.depthAttachment=new cb(Z,da))};je.prototype.destroy=function(){var Z=this.context.gl,da=this.colorAttachment.get();(da&&Z.deleteTexture(da),this.depthAttachment)&&(da=this.depthAttachment.get())&&Z.deleteRenderbuffer(da);Z.deleteFramebuffer(this.framebuffer)};var xd=function(Z,da,aa){this.func=
Z;this.mask=da;this.range=aa};xd.ReadOnly=!1;xd.ReadWrite=!0;xd.disabled=new xd(519,xd.ReadOnly,[0,1]);var be=function(Z,da,aa,ja,za,Na){this.test=Z;this.ref=da;this.mask=aa;this.fail=ja;this.depthFail=za;this.pass=Na};be.disabled=new be({func:519,mask:0},0,0,7680,7680,7680);var qe=function(Z,da,aa){this.blendFunction=Z;this.blendColor=da;this.mask=aa};qe.disabled=new qe(qe.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]);qe.unblended=new qe(qe.Replace,a.Color.transparent,[!0,!0,!0,!0]);qe.alphaBlended=
new qe([1,771],a.Color.transparent,[!0,!0,!0,!0]);var Hd=function(Z,da,aa){this.enable=Z;this.mode=da;this.frontFace=aa};Hd.disabled=new Hd(!1,1029,2305);Hd.backCCW=new Hd(!0,1029,2305);var ke=function(Z){this.gl=Z;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new tb(this);this.clearDepth=new Xb(this);this.clearStencil=new uc(this);this.colorMask=new Mc(this);this.depthMask=new Rc(this);this.stencilMask=new fd(this);this.stencilFunc=new sb(this);this.stencilOp=
new xb(this);this.stencilTest=new kc(this);this.depthRange=new nc(this);this.depthTest=new Kc(this);this.depthFunc=new ac(this);this.blend=new Tb(this);this.blendFunc=new yb(this);this.blendColor=new Gb(this);this.blendEquation=new Eb(this);this.cullFace=new Vb(this);this.cullFaceSide=new Zb(this);this.frontFace=new Dc(this);this.program=new ic(this);this.activeTexture=new Bc(this);this.viewport=new Sc(this);this.bindFramebuffer=new Ic(this);this.bindRenderbuffer=new $c(this);this.bindTexture=new nd(this);
this.bindVertexBuffer=new Yc(this);this.bindElementBuffer=new rd(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new wd(this);this.pixelStoreUnpack=new cd(this);this.pixelStoreUnpackPremultiplyAlpha=new Jc(this);this.pixelStoreUnpackFlipY=new sd(this);(this.extTextureFilterAnisotropic=Z.getExtension("EXT_texture_filter_anisotropic")||Z.getExtension("MOZ_EXT_texture_filter_anisotropic")||Z.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=Z.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));
(this.extTextureHalfFloat=Z.getExtension("OES_texture_half_float"))&&(Z.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=Z.getExtension("EXT_color_buffer_half_float"));this.extTimerQuery=Z.getExtension("EXT_disjoint_timer_query")};ke.prototype.setDefault=function(){this.unbindVAO();this.clearColor.setDefault();this.clearDepth.setDefault();this.clearStencil.setDefault();this.colorMask.setDefault();this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();
this.stencilOp.setDefault();this.stencilTest.setDefault();this.depthRange.setDefault();this.depthTest.setDefault();this.depthFunc.setDefault();this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();this.program.setDefault();this.activeTexture.setDefault();this.bindFramebuffer.setDefault();this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();
this.pixelStoreUnpackFlipY.setDefault()};ke.prototype.setDirty=function(){this.clearColor.dirty=!0;this.clearDepth.dirty=!0;this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=!0;this.blendFunc.dirty=!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=
!0;this.frontFace.dirty=!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=!0;this.bindFramebuffer.dirty=!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=!0;this.pixelStoreUnpackFlipY.dirty=!0};ke.prototype.createIndexBuffer=function(Z,da){return new Nc(this,Z,da)};ke.prototype.createVertexBuffer=
function(Z,da,aa){return new Xc(this,Z,da,aa)};ke.prototype.createRenderbuffer=function(Z,da,aa){var ja=this.gl,za=ja.createRenderbuffer();return this.bindRenderbuffer.set(za),ja.renderbufferStorage(ja.RENDERBUFFER,Z,da,aa),this.bindRenderbuffer.set(null),za};ke.prototype.createFramebuffer=function(Z,da,aa){return new je(this,Z,da,aa)};ke.prototype.clear=function(Z){var da=Z.color;Z=Z.depth;var aa=this.gl,ja=0;da&&(ja|=aa.COLOR_BUFFER_BIT,this.clearColor.set(da),this.colorMask.set([!0,!0,!0,!0]));
void 0!==Z&&(ja|=aa.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Z),this.depthMask.set(!0));aa.clear(ja)};ke.prototype.setCullFace=function(Z){!1===Z.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(Z.mode),this.frontFace.set(Z.frontFace))};ke.prototype.setDepthMode=function(Z){Z.func!==this.gl.ALWAYS||Z.mask?(this.depthTest.set(!0),this.depthFunc.set(Z.func),this.depthMask.set(Z.mask),this.depthRange.set(Z.range)):this.depthTest.set(!1)};ke.prototype.setStencilMode=
function(Z){Z.test.func!==this.gl.ALWAYS||Z.mask?(this.stencilTest.set(!0),this.stencilMask.set(Z.mask),this.stencilOp.set([Z.fail,Z.depthFail,Z.pass]),this.stencilFunc.set({func:Z.test.func,ref:Z.ref,mask:Z.test.mask})):this.stencilTest.set(!1)};ke.prototype.setColorMode=function(Z){a.deepEqual(Z.blendFunction,qe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(Z.blendFunction),this.blendColor.set(Z.blendColor));this.colorMask.set(Z.mask)};ke.prototype.unbindVAO=function(){this.extVertexArrayObject&&
this.bindVertexArrayOES.set(null)};var Ge=function(Z){function da(aa,ja,za){var Na=this;Z.call(this);this.id=aa;this.dispatcher=za;this.on("data",function(Xa){"source"===Xa.dataType&&"metadata"===Xa.sourceDataType&&(Na._sourceLoaded=!0);Na._sourceLoaded&&!Na._paused&&"source"===Xa.dataType&&"content"===Xa.sourceDataType&&(Na.reload(),Na.transform&&Na.update(Na.transform))});this.on("error",function(){Na._sourceErrored=!0});this._source=function(Xa,mb,Cb,Kb){mb=new Ac[mb.type](Xa,mb,Cb,Kb);if(mb.id!==
Xa)throw Error("Expected Source id to be "+Xa+" instead of "+mb.id);return a.bindAll(["load","abort","unload","serialize","prepare"],mb),mb}(aa,ja,za,this);this._tiles={};this._cache=new Uc(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._loadedParentTiles={};this._coveredTiles={};this._state=new a.SourceFeatureState}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.onAdd=function(aa){this._maxTileCacheSize=
(this.map=aa)?aa._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(aa)},da.prototype.onRemove=function(aa){this._source&&this._source.onRemove&&this._source.onRemove(aa)},da.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var aa in this._tiles){var ja=this._tiles[aa];if("loaded"!==ja.state&&"errored"!==ja.state)return!1}return!0},da.prototype.getSource=function(){return this._source},da.prototype.pause=
function(){this._paused=!0},da.prototype.resume=function(){if(this._paused){var aa=this._shouldReloadOnResume;this._shouldReloadOnResume=this._paused=!1;aa&&this.reload();this.transform&&this.update(this.transform)}},da.prototype._loadTile=function(aa,ja){return this._source.loadTile(aa,ja)},da.prototype._unloadTile=function(aa){if(this._source.unloadTile)return this._source.unloadTile(aa,function(){})},da.prototype._abortTile=function(aa){if(this._source.abortTile)return this._source.abortTile(aa,
function(){})},da.prototype.serialize=function(){return this._source.serialize()},da.prototype.prepare=function(aa){for(var ja in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var za=this._tiles[ja];za.upload(aa);za.prepare(this.map.style.imageManager)}},da.prototype.getIds=function(){return a.values(this._tiles).map(function(aa){return aa.tileID}).sort(r).map(function(aa){return aa.key})},da.prototype.getRenderableIds=
function(aa){var ja=this,za=[],Na;for(Na in this._tiles)this._isIdRenderable(Na,aa)&&za.push(this._tiles[Na]);return aa?za.sort(function(Xa,mb){Xa=Xa.tileID;mb=mb.tileID;var Cb=(new a.Point(Xa.canonical.x,Xa.canonical.y))._rotate(ja.transform.angle),Kb=(new a.Point(mb.canonical.x,mb.canonical.y))._rotate(ja.transform.angle);return Xa.overscaledZ-mb.overscaledZ||Kb.y-Cb.y||Kb.x-Cb.x}).map(function(Xa){return Xa.tileID.key}):za.map(function(Xa){return Xa.tileID}).sort(r).map(function(Xa){return Xa.key})},
da.prototype.hasRenderableParent=function(aa){aa=this.findLoadedParent(aa,0);return!!aa&&this._isIdRenderable(aa.tileID.key)},da.prototype._isIdRenderable=function(aa,ja){return this._tiles[aa]&&this._tiles[aa].hasData()&&!this._coveredTiles[aa]&&(ja||!this._tiles[aa].holdingForFade())},da.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var aa in this._cache.reset(),this._tiles)"errored"!==this._tiles[aa].state&&this._reloadTile(aa,"reloading")},da.prototype._reloadTile=
function(aa,ja){var za=this._tiles[aa];za&&("loading"!==za.state&&(za.state=ja),this._loadTile(za,this._tileLoaded.bind(this,za,aa,ja)))},da.prototype._tileLoaded=function(aa,ja,za,Na){if(Na)return aa.state="errored",void(404!==Na.status?this._source.fire(new a.ErrorEvent(Na,{tile:aa})):this.update(this.transform));aa.timeAdded=a.browser.now();"expired"===za&&(aa.refreshedUponExpiration=!0);this._setTileReloadTimer(ja,aa);"raster-dem"===this.getSource().type&&aa.dem&&this._backfillDEM(aa);this._state.initializeTileState(aa,
this.map?this.map.painter:null);this._source.fire(new a.Event("data",{dataType:"source",tile:aa,coord:aa.tileID}))},da.prototype._backfillDEM=function(aa){function ja(mb,Cb){mb.needsHillshadePrepare=!0;var Kb=Cb.tileID.canonical.x-mb.tileID.canonical.x,Mb=Cb.tileID.canonical.y-mb.tileID.canonical.y,pc=Math.pow(2,mb.tileID.canonical.z),rc=Cb.tileID.key;0===Kb&&0===Mb||1<Math.abs(Mb)||(1<Math.abs(Kb)&&(1===Math.abs(Kb+pc)?Kb+=pc:1===Math.abs(Kb-pc)&&(Kb-=pc)),Cb.dem&&mb.dem&&(mb.dem.backfillBorder(Cb.dem,
Kb,Mb),mb.neighboringTiles&&mb.neighboringTiles[rc]&&(mb.neighboringTiles[rc].backfilled=!0)))}for(var za=this.getRenderableIds(),Na=0;Na<za.length;Na++){var Xa=za[Na];aa.neighboringTiles&&aa.neighboringTiles[Xa]&&(Xa=this.getTileByID(Xa),ja(aa,Xa),ja(Xa,aa))}},da.prototype.getTile=function(aa){return this.getTileByID(aa.key)},da.prototype.getTileByID=function(aa){return this._tiles[aa]},da.prototype._retainLoadedChildren=function(aa,ja,za,Na){for(var Xa in this._tiles){var mb=this._tiles[Xa];if(!(Na[Xa]||
!mb.hasData()||mb.tileID.overscaledZ<=ja||mb.tileID.overscaledZ>za)){for(var Cb=mb.tileID;mb&&mb.tileID.overscaledZ>ja+1;){var Kb=mb.tileID.scaledTo(mb.tileID.overscaledZ-1);(mb=this._tiles[Kb.key])&&mb.hasData()&&(Cb=Kb)}for(mb=Cb;mb.overscaledZ>ja;)if(aa[(mb=mb.scaledTo(mb.overscaledZ-1)).key]){Na[Cb.key]=Cb;break}}}},da.prototype.findLoadedParent=function(aa,ja){if(aa.key in this._loadedParentTiles)return(aa=this._loadedParentTiles[aa.key])&&aa.tileID.overscaledZ>=ja?aa:null;for(var za=aa.overscaledZ-
1;za>=ja;za--){var Na=aa.scaledTo(za);if(Na=this._getLoadedTile(Na))return Na}},da.prototype._getLoadedTile=function(aa){var ja=this._tiles[aa.key];return ja&&ja.hasData()?ja:this._cache.getByKey(aa.wrapped().key)},da.prototype.updateCacheSize=function(aa){aa=Math.floor((Math.ceil(aa.width/this._source.tileSize)+1)*(Math.ceil(aa.height/this._source.tileSize)+1)*5);this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,aa):aa)},da.prototype.handleWrapJump=function(aa){var ja=
Math.round((aa-(void 0===this._prevLng?aa:this._prevLng))/360);if(this._prevLng=aa,ja){aa={};for(var za in this._tiles){var Na=this._tiles[za];Na.tileID=Na.tileID.unwrapTo(Na.tileID.wrap+ja);aa[Na.tileID.key]=Na}for(var Xa in this._tiles=aa,this._timers)clearTimeout(this._timers[Xa]),delete this._timers[Xa];for(var mb in this._tiles)this._setTileReloadTimer(mb,this._tiles[mb])}},da.prototype.update=function(aa){var ja=this;if(this.transform=aa,this._sourceLoaded&&!this._paused){var za;this.updateCacheSize(aa);
this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?za=aa.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(zc){return new a.OverscaledTileID(zc.canonical.z,zc.wrap,zc.canonical.z,zc.canonical.x,zc.canonical.y)}):(za=aa.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(za=za.filter(function(zc){return ja._source.hasTile(zc)}))):
za=[];aa=aa.coveringZoomLevel(this._source);var Na=Math.max(aa-da.maxOverzooming,this._source.minzoom),Xa=Math.max(aa+da.maxUnderzooming,this._source.minzoom);za=this._updateRetainedTiles(za,aa);if(u(this._source.type)){for(var mb={},Cb={},Kb=0,Mb=Object.keys(za);Kb<Mb.length;Kb+=1){var pc=Mb[Kb],rc=za[pc],hc=this._tiles[pc];!hc||hc.fadeEndTime&&hc.fadeEndTime<=a.browser.now()||((hc=this.findLoadedParent(rc,Na))&&(this._addTile(hc.tileID),mb[hc.tileID.key]=hc.tileID),Cb[pc]=rc)}for(var Ib in this._retainLoadedChildren(Cb,
aa,Xa,za),mb)za[Ib]||(this._coveredTiles[Ib]=!0,za[Ib]=mb[Ib])}for(var Rb in za)this._tiles[Rb].clearFadeHold();Ib=0;for(Rb=a.keysDifference(this._tiles,za);Ib<Rb.length;Ib+=1)aa=Rb[Ib],Na=this._tiles[aa],Na.hasSymbolBuckets&&!Na.holdingForFade()?Na.setHoldDuration(this.map._fadeDuration):Na.hasSymbolBuckets&&!Na.symbolFadeFinished()||this._removeTile(aa);this._updateLoadedParentTileCache()}},da.prototype.releaseSymbolFadeTiles=function(){for(var aa in this._tiles)this._tiles[aa].holdingForFade()&&
this._removeTile(aa)},da.prototype._updateRetainedTiles=function(aa,ja){for(var za={},Na={},Xa=Math.max(ja-da.maxOverzooming,this._source.minzoom),mb=Math.max(ja+da.maxUnderzooming,this._source.minzoom),Cb={},Kb=0;Kb<aa.length;Kb+=1){var Mb=aa[Kb],pc=this._addTile(Mb);za[Mb.key]=Mb;pc.hasData()||ja<this._source.maxzoom&&(Cb[Mb.key]=Mb)}this._retainLoadedChildren(Cb,ja,mb,za);for(mb=0;mb<aa.length;mb+=1)if(Cb=aa[mb],Kb=this._tiles[Cb.key],!Kb.hasData()){if(ja+1>this._source.maxzoom){if(Mb=Cb.children(this._source.maxzoom)[0],
(pc=this.getTile(Mb))&&pc.hasData()){za[Mb.key]=Mb;continue}}else if(Mb=Cb.children(this._source.maxzoom),za[Mb[0].key]&&za[Mb[1].key]&&za[Mb[2].key]&&za[Mb[3].key])continue;Mb=Kb.wasRequested();for(pc=Cb.overscaledZ-1;pc>=Xa;--pc){var rc=Cb.scaledTo(pc);if(Na[rc.key])break;if(Na[rc.key]=!0,!(Kb=this.getTile(rc))&&Mb&&(Kb=this._addTile(rc)),Kb&&(za[rc.key]=rc,Mb=Kb.wasRequested(),Kb.hasData()))break}}return za},da.prototype._updateLoadedParentTileCache=function(){for(var aa in this._loadedParentTiles=
{},this._tiles){for(var ja=[],za=void 0,Na=this._tiles[aa].tileID;0<Na.overscaledZ;){if(Na.key in this._loadedParentTiles){za=this._loadedParentTiles[Na.key];break}ja.push(Na.key);Na=Na.scaledTo(Na.overscaledZ-1);if(za=this._getLoadedTile(Na))break}for(Na=0;Na<ja.length;Na+=1)this._loadedParentTiles[ja[Na]]=za}},da.prototype._addTile=function(aa){var ja=this._tiles[aa.key];if(ja)return ja;(ja=this._cache.getAndRemove(aa))&&(this._setTileReloadTimer(aa.key,ja),ja.tileID=aa,this._state.initializeTileState(ja,
this.map?this.map.painter:null),this._cacheTimers[aa.key]&&(clearTimeout(this._cacheTimers[aa.key]),delete this._cacheTimers[aa.key],this._setTileReloadTimer(aa.key,ja)));var za=!!ja;return za||(ja=new a.Tile(aa,this._source.tileSize*aa.overscaleFactor()),this._loadTile(ja,this._tileLoaded.bind(this,ja,aa.key,ja.state))),ja?(ja.uses++,this._tiles[aa.key]=ja,za||this._source.fire(new a.Event("dataloading",{tile:ja,coord:ja.tileID,dataType:"source"})),ja):null},da.prototype._setTileReloadTimer=function(aa,
ja){var za=this;aa in this._timers&&(clearTimeout(this._timers[aa]),delete this._timers[aa]);(ja=ja.getExpiryTimeout())&&(this._timers[aa]=setTimeout(function(){za._reloadTile(aa,"expired");delete za._timers[aa]},ja))},da.prototype._removeTile=function(aa){var ja=this._tiles[aa];ja&&(ja.uses--,delete this._tiles[aa],this._timers[aa]&&(clearTimeout(this._timers[aa]),delete this._timers[aa]),0<ja.uses||(ja.hasData()&&"reloading"!==ja.state?this._cache.add(ja.tileID,ja,ja.getExpiryTimeout()):(ja.aborted=
!0,this._abortTile(ja),this._unloadTile(ja))))},da.prototype.clearTiles=function(){for(var aa in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(aa);this._cache.reset()},da.prototype.tilesIn=function(aa,ja,za){var Na=this,Xa=[],mb=this.transform;if(!mb)return Xa;za=za?mb.getCameraQueryGeometry(aa):aa;var Cb=aa.map(function(Rb){return mb.pointCoordinate(Rb)}),Kb=za.map(function(Rb){return mb.pointCoordinate(Rb)}),Mb=this.getIds(),pc=1/0,rc=1/0,hc=-1/0,Ib=-1/0;for(aa=0;aa<
Kb.length;aa+=1)za=Kb[aa],pc=Math.min(pc,za.x),rc=Math.min(rc,za.y),hc=Math.max(hc,za.x),Ib=Math.max(Ib,za.y);aa=function(Rb){Rb=Na._tiles[Mb[Rb]];if(!Rb.holdingForFade()){var zc=Rb.tileID,Tc=Math.pow(2,mb.zoom-Rb.tileID.overscaledZ),dd=ja*Rb.queryPadding*a.EXTENT/Rb.tileSize/Tc,Lc=[zc.getTilePoint(new a.MercatorCoordinate(pc,rc)),zc.getTilePoint(new a.MercatorCoordinate(hc,Ib))];Lc[0].x-dd<a.EXTENT&&Lc[0].y-dd<a.EXTENT&&0<=Lc[1].x+dd&&0<=Lc[1].y+dd&&(dd=Cb.map(function(kd){return zc.getTilePoint(kd)}),
Lc=Kb.map(function(kd){return zc.getTilePoint(kd)}),Xa.push({tile:Rb,tileID:zc,queryGeometry:dd,cameraQueryGeometry:Lc,scale:Tc}))}};for(za=0;za<Mb.length;za++)aa(za);return Xa},da.prototype.getVisibleCoordinates=function(aa){var ja=this;aa=this.getRenderableIds(aa).map(function(Xa){return ja._tiles[Xa].tileID});for(var za=0;za<aa.length;za+=1){var Na=aa[za];Na.posMatrix=this.transform.calculatePosMatrix(Na.toUnwrapped())}return aa},da.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;
if(u(this._source.type))for(var aa in this._tiles){var ja=this._tiles[aa];if(void 0!==ja.fadeEndTime&&ja.fadeEndTime>=a.browser.now())return!0}return!1},da.prototype.setFeatureState=function(aa,ja,za){this._state.updateState(aa||"_geojsonTileLayer",ja,za)},da.prototype.removeFeatureState=function(aa,ja,za){this._state.removeFeatureState(aa||"_geojsonTileLayer",ja,za)},da.prototype.getFeatureState=function(aa,ja){return this._state.getState(aa||"_geojsonTileLayer",ja)},da.prototype.setDependencies=
function(aa,ja,za){(aa=this._tiles[aa])&&aa.setDependencies(ja,za)},da.prototype.reloadTilesForDependencies=function(aa,ja){for(var za in this._tiles)this._tiles[za].hasDependency(aa,ja)&&this._reloadTile(za,"reloading");this._cache.filter(function(Na){return!Na.hasDependency(aa,ja)})},da}(a.Evented);Ge.maxOverzooming=10;Ge.maxUnderzooming=3;var Fd=function(){this.active={}};Fd.prototype.acquire=function(Z){if(!this.workers)for(this.workers=[];this.workers.length<Fd.workerCount;)this.workers.push(new v);
return this.active[Z]=!0,this.workers.slice()};Fd.prototype.release=function(Z){delete this.active[Z];0===this.numActive()&&(this.workers.forEach(function(da){da.terminate()}),this.workers=null)};Fd.prototype.isPreloaded=function(){return!!this.active.mapboxgl_preloaded_worker_pool};Fd.prototype.numActive=function(){return Object.keys(this.active).length};var Wd;Fd.workerCount=Math.max(Math.min(Math.floor(a.browser.hardwareConcurrency/2),6),1);var Sd={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",
setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Ae=function(Z,da){this.reset(Z,da)};Ae.prototype.reset=function(Z,
da){this.points=Z||[];this._distances=[0];for(Z=1;Z<this.points.length;Z++)this._distances[Z]=this._distances[Z-1]+this.points[Z].dist(this.points[Z-1]);this.length=this._distances[this._distances.length-1];this.padding=Math.min(da||0,.5*this.length);this.paddedLength=this.length-2*this.padding};Ae.prototype.lerp=function(Z){if(1===this.points.length)return this.points[0];Z=a.clamp(Z,0,1);for(var da=1,aa=this._distances[da],ja=Z*this.paddedLength+this.padding;aa<ja&&da<this._distances.length;)aa=
this._distances[++da];Z=da-1;var za=this._distances[Z];aa-=za;aa=0<aa?(ja-za)/aa:0;return this.points[Z].mult(1-aa).add(this.points[da].mult(aa))};var Xd=function(Z,da,aa){var ja=this.boxCells=[],za=this.circleCells=[];this.xCellCount=Math.ceil(Z/aa);this.yCellCount=Math.ceil(da/aa);for(aa=0;aa<this.xCellCount*this.yCellCount;aa++)ja.push([]),za.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=Z;this.height=da;this.xScale=this.xCellCount/Z;this.yScale=this.yCellCount/
da;this.circleUid=this.boxUid=0};Xd.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};Xd.prototype.insert=function(Z,da,aa,ja,za){this._forEachCell(da,aa,ja,za,this._insertBoxCell,this.boxUid++);this.boxKeys.push(Z);this.bboxes.push(da);this.bboxes.push(aa);this.bboxes.push(ja);this.bboxes.push(za)};Xd.prototype.insertCircle=function(Z,da,aa,ja){this._forEachCell(da-ja,aa-ja,da+ja,aa+ja,this._insertCircleCell,this.circleUid++);this.circleKeys.push(Z);this.circles.push(da);
this.circles.push(aa);this.circles.push(ja)};Xd.prototype._insertBoxCell=function(Z,da,aa,ja,za,Na){this.boxCells[za].push(Na)};Xd.prototype._insertCircleCell=function(Z,da,aa,ja,za,Na){this.circleCells[za].push(Na)};Xd.prototype._query=function(Z,da,aa,ja,za,Na){if(0>aa||Z>this.width||0>ja||da>this.height)return!za&&[];var Xa=[];if(0>=Z&&0>=da&&this.width<=aa&&this.height<=ja){if(za)return!0;for(Z=0;Z<this.boxKeys.length;Z++)Xa.push({key:this.boxKeys[Z],x1:this.bboxes[4*Z],y1:this.bboxes[4*Z+1],
x2:this.bboxes[4*Z+2],y2:this.bboxes[4*Z+3]});for(Z=0;Z<this.circleKeys.length;Z++)da=this.circles[3*Z],aa=this.circles[3*Z+1],ja=this.circles[3*Z+2],Xa.push({key:this.circleKeys[Z],x1:da-ja,y1:aa-ja,x2:da+ja,y2:aa+ja});return Na?Xa.filter(Na):Xa}return this._forEachCell(Z,da,aa,ja,this._queryCell,Xa,{hitTest:za,seenUids:{box:{},circle:{}}},Na),za?0<Xa.length:Xa};Xd.prototype._queryCircle=function(Z,da,aa,ja,za){var Na=Z-aa,Xa=Z+aa,mb=da-aa,Cb=da+aa;if(0>Xa||Na>this.width||0>Cb||mb>this.height)return!ja&&
[];var Kb=[];return this._forEachCell(Na,mb,Xa,Cb,this._queryCellCircle,Kb,{hitTest:ja,circle:{x:Z,y:da,radius:aa},seenUids:{box:{},circle:{}}},za),ja?0<Kb.length:Kb};Xd.prototype.query=function(Z,da,aa,ja,za){return this._query(Z,da,aa,ja,!1,za)};Xd.prototype.hitTest=function(Z,da,aa,ja,za){return this._query(Z,da,aa,ja,!0,za)};Xd.prototype.hitTestCircle=function(Z,da,aa,ja){return this._queryCircle(Z,da,aa,!0,ja)};Xd.prototype._queryCell=function(Z,da,aa,ja,za,Na,Xa,mb){var Cb=Xa.seenUids,Kb=this.boxCells[za];
if(null!==Kb)for(var Mb=this.bboxes,pc=0;pc<Kb.length;pc+=1){var rc=Kb[pc];if(!Cb.box[rc]){Cb.box[rc]=!0;var hc=4*rc;if(Z<=Mb[hc+2]&&da<=Mb[hc+3]&&aa>=Mb[hc+0]&&ja>=Mb[hc+1]&&(!mb||mb(this.boxKeys[rc]))){if(Xa.hitTest)return Na.push(!0),!0;Na.push({key:this.boxKeys[rc],x1:Mb[hc],y1:Mb[hc+1],x2:Mb[hc+2],y2:Mb[hc+3]})}}}za=this.circleCells[za];if(null!==za)for(Kb=this.circles,Mb=0;Mb<za.length;Mb+=1)if(pc=za[Mb],!Cb.circle[pc]){Cb.circle[pc]=!0;var Ib=3*pc;if(this._circleAndRectCollide(Kb[Ib],Kb[Ib+
1],Kb[Ib+2],Z,da,aa,ja)&&(!mb||mb(this.circleKeys[pc]))){if(Xa.hitTest)return Na.push(!0),!0;rc=Kb[Ib];hc=Kb[Ib+1];Ib=Kb[Ib+2];Na.push({key:this.circleKeys[pc],x1:rc-Ib,y1:hc-Ib,x2:rc+Ib,y2:hc+Ib})}}};Xd.prototype._queryCellCircle=function(Z,da,aa,ja,za,Na,Xa,mb){Z=Xa.circle;Xa=Xa.seenUids;da=this.boxCells[za];if(null!==da)for(aa=this.bboxes,ja=0;ja<da.length;ja+=1){var Cb=da[ja];if(!Xa.box[Cb]){Xa.box[Cb]=!0;var Kb=4*Cb;if(this._circleAndRectCollide(Z.x,Z.y,Z.radius,aa[Kb+0],aa[Kb+1],aa[Kb+2],aa[Kb+
3])&&(!mb||mb(this.boxKeys[Cb])))return Na.push(!0),!0}}za=this.circleCells[za];if(null!==za)for(da=this.circles,aa=0;aa<za.length;aa+=1)if(ja=za[aa],!Xa.circle[ja]&&(Xa.circle[ja]=!0,Cb=3*ja,this._circlesCollide(da[Cb],da[Cb+1],da[Cb+2],Z.x,Z.y,Z.radius)&&(!mb||mb(this.circleKeys[ja]))))return Na.push(!0),!0};Xd.prototype._forEachCell=function(Z,da,aa,ja,za,Na,Xa,mb){for(var Cb=this._convertToXCellCoord(Z),Kb=this._convertToYCellCoord(da),Mb=this._convertToXCellCoord(aa),pc=this._convertToYCellCoord(ja);Cb<=
Mb;Cb++)for(var rc=Kb;rc<=pc;rc++)if(za.call(this,Z,da,aa,ja,this.xCellCount*rc+Cb,Na,Xa,mb))return};Xd.prototype._convertToXCellCoord=function(Z){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Z*this.xScale)))};Xd.prototype._convertToYCellCoord=function(Z){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Z*this.yScale)))};Xd.prototype._circlesCollide=function(Z,da,aa,ja,za,Na){Z=ja-Z;da=za-da;aa+=Na;return aa*aa>Z*Z+da*da};Xd.prototype._circleAndRectCollide=function(Z,da,aa,ja,za,
Na,Xa){Na=(Na-ja)/2;Z=Math.abs(Z-(ja+Na));if(Z>Na+aa)return!1;Xa=(Xa-za)/2;da=Math.abs(da-(za+Xa));if(da>Xa+aa)return!1;if(Z<=Na||da<=Xa)return!0;za=Z-Na;da-=Xa;return za*za+da*da<=aa*aa};var sf=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Re=function(Z,da,aa){void 0===da&&(da=new Xd(Z.width+200,Z.height+200,25));void 0===aa&&(aa=new Xd(Z.width+200,Z.height+200,25));this.transform=Z;this.grid=da;this.ignoredGrid=aa;this.pitchfactor=Math.cos(Z._pitch)*Z.cameraToCenterDistance;
this.screenRightBoundary=Z.width+100;this.screenBottomBoundary=Z.height+100;this.gridRightBoundary=Z.width+200;this.gridBottomBoundary=Z.height+200};Re.prototype.placeCollisionBox=function(Z,da,aa,ja,za){ja=this.projectAndGetPerspectiveRatio(ja,Z.anchorPointX,Z.anchorPointY);var Na=aa*ja.perspectiveRatio;aa=Z.x1*Na+ja.point.x;var Xa=Z.y1*Na+ja.point.y,mb=Z.x2*Na+ja.point.x;Z=Z.y2*Na+ja.point.y;return!this.isInsideGrid(aa,Xa,mb,Z)||!da&&this.grid.hitTest(aa,Xa,mb,Z,za)?{box:[],offscreen:!1}:{box:[aa,
Xa,mb,Z],offscreen:this.isOffscreen(aa,Xa,mb,Z)}};Re.prototype.placeCollisionCircles=function(Z,da,aa,ja,za,Na,Xa,mb,Cb,Kb,Mb,pc,rc){var hc=[],Ib=new a.Point(da.anchorX,da.anchorY);Na=G(Ib,Na);Na=.5+this.transform.cameraToCenterDistance/Na.signedDistanceFromCamera*.5;za=(Kb?za/Na:za*Na)/a.ONE_EM;Kb=G(Ib,Xa).point;za=L(za,ja,da.lineOffsetX*za,da.lineOffsetY*za,!1,Kb,Ib,da,aa,Xa,{});aa=da=!1;ja=!0;if(za){pc=.5*pc*Na+rc;Xa=new a.Point(-100,-100);Ib=new a.Point(this.screenRightBoundary,this.screenBottomBoundary);
rc=new Ae;Na=za.first;Kb=za.last;za=[];for(var Rb=Na.path.length-1;1<=Rb;Rb--)za.push(Na.path[Rb]);for(Na=1;Na<Kb.path.length;Na++)za.push(Kb.path[Na]);Na=2.5*pc;mb&&(za=za.map(function(md){return G(md,mb)}),za=za.some(function(md){return 0>=md.signedDistanceFromCamera})?[]:za.map(function(md){return md.point}));Kb=[];if(0<za.length){Kb=za[0].clone();Rb=za[0].clone();for(var zc=1;zc<za.length;zc++)Kb.x=Math.min(Kb.x,za[zc].x),Kb.y=Math.min(Kb.y,za[zc].y),Rb.x=Math.max(Rb.x,za[zc].x),Rb.y=Math.max(Rb.y,
za[zc].y);Kb=Kb.x>=Xa.x&&Rb.x<=Ib.x&&Kb.y>=Xa.y&&Rb.y<=Ib.y?[za]:Rb.x<Xa.x||Kb.x>Ib.x||Rb.y<Xa.y||Kb.y>Ib.y?[]:a.clipLine([za],Xa.x,Xa.y,Ib.x,Ib.y)}Xa=0;for(Ib=Kb;Xa<Ib.length;Xa+=1)for(rc.reset(Ib[Xa],.25*pc),za=rc.length<=.5*pc?1:Math.ceil(rc.paddedLength/Na)+1,Kb=0;Kb<za;Kb++){zc=rc.lerp(Kb/Math.max(za-1,1));Rb=zc.x+100;zc=zc.y+100;hc.push(Rb,zc,pc,0);var Tc=Rb-pc,dd=zc-pc,Lc=Rb+pc,kd=zc+pc;if(ja=ja&&this.isOffscreen(Tc,dd,Lc,kd),aa=aa||this.isInsideGrid(Tc,dd,Lc,kd),!Z&&this.grid.hitTestCircle(Rb,
zc,pc,Mb)&&(da=!0,!Cb))return{circles:[],offscreen:!1,collisionDetected:da}}}return{circles:!Cb&&da||!aa?[]:hc,offscreen:ja,collisionDetected:da}};Re.prototype.queryRenderedSymbols=function(Z){if(0===Z.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var da=[],aa=1/0,ja=1/0,za=-1/0,Na=-1/0,Xa=0;Xa<Z.length;Xa+=1){var mb=Z[Xa];mb=new a.Point(mb.x+100,mb.y+100);aa=Math.min(aa,mb.x);ja=Math.min(ja,mb.y);za=Math.max(za,mb.x);Na=Math.max(Na,mb.y);da.push(mb)}Z={};Xa={};
mb=0;for(aa=this.grid.query(aa,ja,za,Na).concat(this.ignoredGrid.query(aa,ja,za,Na));mb<aa.length;mb+=1)za=aa[mb],ja=za.key,(void 0===Z[ja.bucketInstanceId]&&(Z[ja.bucketInstanceId]={}),Z[ja.bucketInstanceId][ja.featureIndex])||(za=[new a.Point(za.x1,za.y1),new a.Point(za.x2,za.y1),new a.Point(za.x2,za.y2),new a.Point(za.x1,za.y2)],a.polygonIntersectsPolygon(da,za)&&(Z[ja.bucketInstanceId][ja.featureIndex]=!0,void 0===Xa[ja.bucketInstanceId]&&(Xa[ja.bucketInstanceId]=[]),Xa[ja.bucketInstanceId].push(ja.featureIndex)));
return Xa};Re.prototype.insertCollisionBox=function(Z,da,aa,ja,za){(da?this.ignoredGrid:this.grid).insert({bucketInstanceId:aa,featureIndex:ja,collisionGroupID:za},Z[0],Z[1],Z[2],Z[3])};Re.prototype.insertCollisionCircles=function(Z,da,aa,ja,za){da=da?this.ignoredGrid:this.grid;aa={bucketInstanceId:aa,featureIndex:ja,collisionGroupID:za};for(ja=0;ja<Z.length;ja+=4)da.insertCircle(aa,Z[ja],Z[ja+1],Z[ja+2])};Re.prototype.projectAndGetPerspectiveRatio=function(Z,da,aa){da=[da,aa,0,1];return Q(da,da,
Z),{point:new a.Point((da[0]/da[3]+1)/2*this.transform.width+100,(-da[1]/da[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/da[3]*.5}};Re.prototype.isOffscreen=function(Z,da,aa,ja){return 100>aa||Z>=this.screenRightBoundary||100>ja||da>this.screenBottomBoundary};Re.prototype.isInsideGrid=function(Z,da,aa,ja){return 0<=aa&&Z<this.gridRightBoundary&&0<=ja&&da<this.gridBottomBoundary};Re.prototype.getViewportMatrix=function(){var Z=a.identity([]);return a.translate(Z,
Z,[-100,-100,0]),Z};var tf=function(Z,da,aa,ja){this.opacity=Z?Math.max(0,Math.min(1,Z.opacity+(Z.placed?da:-da))):ja&&aa?1:0;this.placed=aa};tf.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var $e=function(Z,da,aa,ja,za){this.text=new tf(Z?Z.text:null,da,aa,za);this.icon=new tf(Z?Z.icon:null,da,ja,za)};$e.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Oe=function(Z,da,aa){this.text=Z;this.icon=da;this.skipFade=aa},fc=function(){this.invProjMatrix=
a.create();this.viewportMatrix=a.create();this.circles=[]},Vc=function(Z,da,aa,ja,za){this.bucketInstanceId=Z;this.featureIndex=da;this.sourceLayerIndex=aa;this.bucketIndex=ja;this.tileID=za},Ua=function(Z){this.crossSourceCollisions=Z;this.maxGroupID=0;this.collisionGroups={}};Ua.prototype.get=function(Z){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[Z]){var da=++this.maxGroupID;this.collisionGroups[Z]={ID:da,predicate:function(aa){return aa.collisionGroupID===
da}}}return this.collisionGroups[Z]};var wb=function(Z,da,aa,ja){this.transform=Z.clone();this.collisionIndex=new Re(this.transform);this.placements={};this.opacities={};this.variableOffsets={};this.stale=!1;this.commitTime=0;this.fadeDuration=da;this.retainedQueryData={};this.collisionGroups=new Ua(aa);this.collisionCircleArrays={};(this.prevPlacement=ja)&&(ja.prevPlacement=void 0);this.placedOrientations={}};wb.prototype.getBucketParts=function(Z,da,aa,ja){var za=aa.getBucket(da),Na=aa.latestFeatureIndex;
if(za&&Na&&da.id===za.layerIds[0]){da=aa.collisionBoxArray;var Xa=za.layers[0].layout,mb=Math.pow(2,this.transform.zoom-aa.tileID.overscaledZ),Cb=aa.tileSize/a.EXTENT,Kb=this.transform.calculatePosMatrix(aa.tileID.toUnwrapped()),Mb="map"===Xa.get("text-pitch-alignment"),pc="map"===Xa.get("text-rotation-alignment"),rc=U(aa,1,this.transform.zoom),hc=B(Kb,Mb,pc,this.transform,rc),Ib=null;Mb&&(Mb=t(Kb,Mb,pc,this.transform,rc),Ib=a.multiply([],this.transform.labelPlaneMatrix,Mb));this.retainedQueryData[za.bucketInstanceId]=
new Vc(za.bucketInstanceId,Na,za.sourceLayerIndex,za.index,aa.tileID);aa={bucket:za,layout:Xa,posMatrix:Kb,textLabelPlaneMatrix:hc,labelToScreenMatrix:Ib,scale:mb,textPixelRatio:Cb,holdingForFade:aa.holdingForFade(),collisionBoxArray:da,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(za.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(za.sourceID)};if(ja)for(ja=0,za=za.sortKeyRanges;ja<za.length;ja+=1)Na=za[ja],Z.push({sortKey:Na.sortKey,symbolInstanceStart:Na.symbolInstanceStart,
symbolInstanceEnd:Na.symbolInstanceEnd,parameters:aa});else Z.push({symbolInstanceStart:0,symbolInstanceEnd:za.symbolInstances.length,parameters:aa})}};wb.prototype.attemptAnchorPlacement=function(Z,da,aa,ja,za,Na,Xa,mb,Cb,Kb,Mb,pc,rc,hc,Ib){var Rb,zc=[pc.textOffset0,pc.textOffset1],Tc=P(Z,aa,ja,zc,za);da=this.collisionIndex.placeCollisionBox(V(da,Tc.x,Tc.y,Na,Xa,this.transform.angle),Mb,mb,Cb,Kb.predicate);if(!Ib||0!==this.collisionIndex.placeCollisionBox(V(Ib,Tc.x,Tc.y,Na,Xa,this.transform.angle),
Mb,mb,Cb,Kb.predicate).box.length)return 0<da.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[pc.crossTileID]&&this.prevPlacement.placements[pc.crossTileID]&&this.prevPlacement.placements[pc.crossTileID].text&&(Rb=this.prevPlacement.variableOffsets[pc.crossTileID].anchor),this.variableOffsets[pc.crossTileID]={textOffset:zc,width:aa,height:ja,anchor:Z,textBoxScale:za,prevAnchor:Rb},this.markUsedJustification(rc,Z,pc,hc),rc.allowVerticalPlacement&&(this.markUsedOrientation(rc,hc,
pc),this.placedOrientations[pc.crossTileID]=hc),{shift:Tc,placedGlyphBoxes:da}):void 0};wb.prototype.placeLayerBucketPart=function(Z,da,aa){var ja=this,za=Z.parameters,Na=za.bucket,Xa=za.layout,mb=za.posMatrix,Cb=za.textLabelPlaneMatrix,Kb=za.labelToScreenMatrix,Mb=za.textPixelRatio,pc=za.holdingForFade,rc=za.collisionBoxArray,hc=za.partiallyEvaluatedTextSize,Ib=za.collisionGroup,Rb=Xa.get("text-optional"),zc=Xa.get("icon-optional"),Tc=Xa.get("text-allow-overlap"),dd=Xa.get("icon-allow-overlap"),
Lc="map"===Xa.get("text-rotation-alignment"),kd="map"===Xa.get("text-pitch-alignment"),md="none"!==Xa.get("icon-text-fit");za="viewport-y"===Xa.get("symbol-z-order");var Nd=Tc&&(dd||!Na.hasIconData()||zc),Bd=dd&&(Tc||!Na.hasTextData()||Rb);!Na.collisionArrays&&rc&&Na.deserializeCollisionBoxes(rc);rc=function(Ld,Zd){if(!da[Ld.crossTileID])if(pc)ja.placements[Ld.crossTileID]=new Oe(!1,!1,!1);else{var de,me=!1,He=!1,Md=!0,Ee=null,Ce={box:null,offscreen:null},ae={box:null,offscreen:null},we=null,Fe=null,
Ke=0,Jg=0,vf=0;Zd.textFeatureIndex?Ke=Zd.textFeatureIndex:Ld.useRuntimeCollisionCircles&&(Ke=Ld.featureIndex);Zd.verticalTextFeatureIndex&&(Jg=Zd.verticalTextFeatureIndex);var Xf=Zd.textBox;if(Xf){var wf=function(ve){var gf=a.WritingMode.horizontal;Na.allowVerticalPlacement&&!ve&&ja.prevPlacement&&(ve=ja.prevPlacement.placedOrientations[Ld.crossTileID])&&(ja.placedOrientations[Ld.crossTileID]=ve,ja.markUsedOrientation(Na,gf=ve,Ld));return gf};Md=function(ve,gf){if(Na.allowVerticalPlacement&&0<Ld.numVerticalGlyphVertices&&
Zd.verticalTextBox)for(var dg=0,Yf=Na.writingModes;dg<Yf.length&&(Yf[dg]===a.WritingMode.vertical?(Ce=gf(),ae=Ce):Ce=ve(),!(Ce&&Ce.box&&Ce.box.length));dg+=1);else Ce=ve()};if(Xa.get("text-variable-anchor")){var Kg=Xa.get("text-variable-anchor");if(ja.prevPlacement&&ja.prevPlacement.variableOffsets[Ld.crossTileID]){var xf=ja.prevPlacement.variableOffsets[Ld.crossTileID];0<Kg.indexOf(xf.anchor)&&(Kg=Kg.filter(function(ve){return ve!==xf.anchor})).unshift(xf.anchor)}var Wi=function(ve,gf,dg){var Yf=
ve.x2-ve.x1,Ag=ve.y2-ve.y1,Bg=Ld.textBoxScale;gf=md&&!dd?gf:null;for(var wi={box:[],offscreen:!1},Gk=Tc?2*Kg.length:Kg.length,Jb=0;Jb<Gk;++Jb){var ch=ja.attemptAnchorPlacement(Kg[Jb%Kg.length],ve,Yf,Ag,Bg,Lc,kd,Mb,mb,Ib,Jb>=Kg.length,Ld,Na,dg,gf);if(ch&&(wi=ch.placedGlyphBoxes)&&wi.box&&wi.box.length){me=!0;Ee=ch.shift;break}}return wi};Md(function(){return Wi(Xf,Zd.iconBox,a.WritingMode.horizontal)},function(){var ve=Zd.verticalTextBox;return Na.allowVerticalPlacement&&!(Ce&&Ce.box&&Ce.box.length)&&
0<Ld.numVerticalGlyphVertices&&ve?Wi(ve,Zd.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}});Ce&&(me=Ce.box,Md=Ce.offscreen);Md=wf(Ce&&Ce.box);!me&&ja.prevPlacement&&(wf=ja.prevPlacement.variableOffsets[Ld.crossTileID])&&(ja.variableOffsets[Ld.crossTileID]=wf,ja.markUsedJustification(Na,wf.anchor,Ld,Md))}else{var Lg=function(ve,gf){ve=ja.collisionIndex.placeCollisionBox(ve,Tc,Mb,mb,Ib.predicate);return ve&&ve.box&&ve.box.length&&(ja.markUsedOrientation(Na,gf,Ld),ja.placedOrientations[Ld.crossTileID]=
gf),ve};Md(function(){return Lg(Xf,a.WritingMode.horizontal)},function(){var ve=Zd.verticalTextBox;return Na.allowVerticalPlacement&&0<Ld.numVerticalGlyphVertices&&ve?Lg(ve,a.WritingMode.vertical):{box:null,offscreen:null}});wf(Ce&&Ce.box&&Ce.box.length)}}if(me=(de=Ce)&&de.box&&0<de.box.length,Md=de&&de.offscreen,Ld.useRuntimeCollisionCircles){we=Na.text.placedSymbolArray.get(Ld.centerJustifiedTextSymbolIndex);wf=a.evaluateSizeForFeature(Na.textSizeData,hc,we);var df=Xa.get("text-padding");we=ja.collisionIndex.placeCollisionCircles(Tc,
we,Na.lineVertexArray,Na.glyphOffsetArray,wf,mb,Cb,Kb,aa,kd,Ib.predicate,Ld.collisionCircleDiameter,df);me=Tc||0<we.circles.length&&!we.collisionDetected;Md=Md&&we.offscreen}if(Zd.iconFeatureIndex&&(vf=Zd.iconFeatureIndex),Zd.iconBox)He=function(ve){ve=md&&Ee?V(ve,Ee.x,Ee.y,Lc,kd,ja.transform.angle):ve;return ja.collisionIndex.placeCollisionBox(ve,dd,Mb,mb,Ib.predicate)},He=ae&&ae.box&&ae.box.length&&Zd.verticalIconBox?0<(Fe=He(Zd.verticalIconBox)).box.length:0<(Fe=He(Zd.iconBox)).box.length,Md=Md&&
Fe.offscreen;wf=Rb||0===Ld.numHorizontalGlyphVertices&&0===Ld.numVerticalGlyphVertices;df=zc||0===Ld.numIconVertices;if(wf||df?df?wf||(He=He&&me):me=He&&me:He=me=He&&me,me&&de&&de.box&&ja.collisionIndex.insertCollisionBox(de.box,Xa.get("text-ignore-placement"),Na.bucketInstanceId,ae&&ae.box&&Jg?Jg:Ke,Ib.ID),He&&Fe&&ja.collisionIndex.insertCollisionBox(Fe.box,Xa.get("icon-ignore-placement"),Na.bucketInstanceId,vf,Ib.ID),we&&(me&&ja.collisionIndex.insertCollisionCircles(we.circles,Xa.get("text-ignore-placement"),
Na.bucketInstanceId,Ke,Ib.ID),aa))for(Fe=Na.bucketInstanceId,de=ja.collisionCircleArrays[Fe],void 0===de&&(de=ja.collisionCircleArrays[Fe]=new fc),Fe=0;Fe<we.circles.length;Fe+=4)de.circles.push(we.circles[Fe+0]),de.circles.push(we.circles[Fe+1]),de.circles.push(we.circles[Fe+2]),de.circles.push(we.collisionDetected?1:0);ja.placements[Ld.crossTileID]=new Oe(me||Nd,He||Bd,Md||Na.justReloaded);da[Ld.crossTileID]=!0}};if(za)for(Z=Na.getSortedSymbolIndexes(this.transform.angle),za=Z.length-1;0<=za;--za){var vd=
Z[za];rc(Na.symbolInstances.get(vd),Na.collisionArrays[vd])}else for(za=Z.symbolInstanceStart;za<Z.symbolInstanceEnd;za++)rc(Na.symbolInstances.get(za),Na.collisionArrays[za]);aa&&Na.bucketInstanceId in this.collisionCircleArrays&&(rc=this.collisionCircleArrays[Na.bucketInstanceId],a.invert(rc.invProjMatrix,mb),rc.viewportMatrix=this.collisionIndex.getViewportMatrix());Na.justReloaded=!1};wb.prototype.markUsedJustification=function(Z,da,aa,ja){da=ja===a.WritingMode.vertical?aa.verticalPlacedTextSymbolIndex:
{left:aa.leftJustifiedTextSymbolIndex,center:aa.centerJustifiedTextSymbolIndex,right:aa.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(da)];ja=0;for(var za=[aa.leftJustifiedTextSymbolIndex,aa.centerJustifiedTextSymbolIndex,aa.rightJustifiedTextSymbolIndex,aa.verticalPlacedTextSymbolIndex];ja<za.length;ja+=1){var Na=za[ja];0<=Na&&(Z.text.placedSymbolArray.get(Na).crossTileID=0<=da&&Na!==da?0:aa.crossTileID)}};wb.prototype.markUsedOrientation=function(Z,da,aa){var ja=da===a.WritingMode.horizontal||
da===a.WritingMode.horizontalOnly?da:0;da=da===a.WritingMode.vertical?da:0;for(var za=0,Na=[aa.leftJustifiedTextSymbolIndex,aa.centerJustifiedTextSymbolIndex,aa.rightJustifiedTextSymbolIndex];za<Na.length;za+=1)Z.text.placedSymbolArray.get(Na[za]).placedOrientation=ja;aa.verticalPlacedTextSymbolIndex&&(Z.text.placedSymbolArray.get(aa.verticalPlacedTextSymbolIndex).placedOrientation=da)};wb.prototype.commit=function(Z){this.commitTime=Z;this.zoomAtLastRecencyCheck=this.transform.zoom;var da=this.prevPlacement,
aa=!1;this.prevZoomAdjustment=da?da.zoomAdjustment(this.transform.zoom):0;var ja=da?da.symbolFadeChange(Z):1,za=da?da.opacities:{},Na=da?da.variableOffsets:{},Xa=da?da.placedOrientations:{};for(Mb in this.placements){var mb=this.placements[Mb],Cb=za[Mb];Cb?(this.opacities[Mb]=new $e(Cb,ja,mb.text,mb.icon),aa=aa||mb.text!==Cb.text.placed||mb.icon!==Cb.icon.placed):(this.opacities[Mb]=new $e(null,ja,mb.text,mb.icon,mb.skipFade),aa=aa||mb.text||mb.icon)}for(var Kb in za){var Mb=za[Kb];this.opacities[Kb]||
(mb=new $e(Mb,ja,!1,!1),mb.isHidden()||(this.opacities[Kb]=mb,aa=aa||Mb.text.placed||Mb.icon.placed))}for(var pc in Na)this.variableOffsets[pc]||!this.opacities[pc]||this.opacities[pc].isHidden()||(this.variableOffsets[pc]=Na[pc]);for(var rc in Xa)this.placedOrientations[rc]||!this.opacities[rc]||this.opacities[rc].isHidden()||(this.placedOrientations[rc]=Xa[rc]);aa?this.lastPlacementChangeTime=Z:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=da?da.lastPlacementChangeTime:
Z)};wb.prototype.updateLayerOpacities=function(Z,da){for(var aa={},ja=0;ja<da.length;ja+=1){var za=da[ja],Na=za.getBucket(Z);Na&&za.latestFeatureIndex&&Z.id===Na.layerIds[0]&&this.updateBucketOpacities(Na,aa,za.collisionBoxArray)}};wb.prototype.updateBucketOpacities=function(Z,da,aa){var ja=this;Z.hasTextData()&&Z.text.opacityVertexArray.clear();Z.hasIconData()&&Z.icon.opacityVertexArray.clear();Z.hasIconCollisionBoxData()&&Z.iconCollisionBox.collisionVertexArray.clear();Z.hasTextCollisionBoxData()&&
Z.textCollisionBox.collisionVertexArray.clear();var za=Z.layers[0].layout,Na=new $e(null,0,!1,!1,!0),Xa=za.get("text-allow-overlap"),mb=za.get("icon-allow-overlap"),Cb=za.get("text-variable-anchor"),Kb="map"===za.get("text-rotation-alignment"),Mb="map"===za.get("text-pitch-alignment"),pc="none"!==za.get("icon-text-fit"),rc=new $e(null,0,Xa&&(mb||!Z.hasIconData()||za.get("icon-optional")),mb&&(Xa||!Z.hasTextData()||za.get("text-optional")),!0);!Z.collisionArrays&&aa&&(Z.hasIconCollisionBoxData()||
Z.hasTextCollisionBoxData())&&Z.deserializeCollisionBoxes(aa);var hc=function(Ib,Rb,zc){for(var Tc=0;Tc<Rb/4;Tc++)Ib.opacityVertexArray.emplaceBack(zc)};aa=function(Ib){var Rb=Z.symbolInstances.get(Ib),zc=Rb.numHorizontalGlyphVertices,Tc=Rb.numVerticalGlyphVertices,dd=Rb.crossTileID,Lc=ja.opacities[dd];da[dd]?Lc=Na:Lc||(ja.opacities[dd]=Lc=rc);da[dd]=!0;var kd=0<Rb.numIconVertices,md=ja.placedOrientations[Rb.crossTileID],Nd=md===a.WritingMode.vertical,Bd=md===a.WritingMode.horizontal||md===a.WritingMode.horizontalOnly;
if(0<zc||0<Tc){var vd=ba(Lc.text);hc(Z.text,zc,Nd?Nb:vd);hc(Z.text,Tc,Bd?Nb:vd);var Ld=Lc.text.isHidden();[Rb.rightJustifiedTextSymbolIndex,Rb.centerJustifiedTextSymbolIndex,Rb.leftJustifiedTextSymbolIndex].forEach(function(Zd){0<=Zd&&(Z.text.placedSymbolArray.get(Zd).hidden=Ld||Nd?1:0)});0<=Rb.verticalPlacedTextSymbolIndex&&(Z.text.placedSymbolArray.get(Rb.verticalPlacedTextSymbolIndex).hidden=Ld||Bd?1:0);(zc=ja.variableOffsets[Rb.crossTileID])&&ja.markUsedJustification(Z,zc.anchor,Rb,md);(md=ja.placedOrientations[Rb.crossTileID])&&
(ja.markUsedJustification(Z,"left",Rb,md),ja.markUsedOrientation(Z,md,Rb))}kd&&(kd=ba(Lc.icon),md=!(pc&&Rb.verticalPlacedIconSymbolIndex&&Nd),0<=Rb.placedIconSymbolIndex&&(hc(Z.icon,Rb.numIconVertices,md?kd:Nb),Z.icon.placedSymbolArray.get(Rb.placedIconSymbolIndex).hidden=Lc.icon.isHidden()),0<=Rb.verticalPlacedIconSymbolIndex&&(hc(Z.icon,Rb.numVerticalIconVertices,md?Nb:kd),Z.icon.placedSymbolArray.get(Rb.verticalPlacedIconSymbolIndex).hidden=Lc.icon.isHidden()));if(Z.hasIconCollisionBoxData()||
Z.hasTextCollisionBoxData())if(Ib=Z.collisionArrays[Ib]){Rb=new a.Point(0,0);if(Ib.textBox||Ib.verticalTextBox)kd=!0,Cb&&((dd=ja.variableOffsets[dd])?(Rb=P(dd.anchor,dd.width,dd.height,dd.textOffset,dd.textBoxScale),Kb&&Rb._rotate(Mb?ja.transform.angle:-ja.transform.angle)):kd=!1),Ib.textBox&&Y(Z.textCollisionBox.collisionVertexArray,Lc.text.placed,!kd||Nd,Rb.x,Rb.y),Ib.verticalTextBox&&Y(Z.textCollisionBox.collisionVertexArray,Lc.text.placed,!kd||Bd,Rb.x,Rb.y);Bd=!(Bd||!Ib.verticalIconBox);Ib.iconBox&&
Y(Z.iconCollisionBox.collisionVertexArray,Lc.icon.placed,Bd,pc?Rb.x:0,pc?Rb.y:0);Ib.verticalIconBox&&Y(Z.iconCollisionBox.collisionVertexArray,Lc.icon.placed,!Bd,pc?Rb.x:0,pc?Rb.y:0)}};for(za=0;za<Z.symbolInstances.length;za++)aa(za);if(Z.sortFeatures(this.transform.angle),this.retainedQueryData[Z.bucketInstanceId]&&(this.retainedQueryData[Z.bucketInstanceId].featureSortOrder=Z.featureSortOrder),Z.hasTextData()&&Z.text.opacityVertexBuffer&&Z.text.opacityVertexBuffer.updateData(Z.text.opacityVertexArray),
Z.hasIconData()&&Z.icon.opacityVertexBuffer&&Z.icon.opacityVertexBuffer.updateData(Z.icon.opacityVertexArray),Z.hasIconCollisionBoxData()&&Z.iconCollisionBox.collisionVertexBuffer&&Z.iconCollisionBox.collisionVertexBuffer.updateData(Z.iconCollisionBox.collisionVertexArray),Z.hasTextCollisionBoxData()&&Z.textCollisionBox.collisionVertexBuffer&&Z.textCollisionBox.collisionVertexBuffer.updateData(Z.textCollisionBox.collisionVertexArray),Z.bucketInstanceId in this.collisionCircleArrays)aa=this.collisionCircleArrays[Z.bucketInstanceId],
Z.placementInvProjMatrix=aa.invProjMatrix,Z.placementViewportMatrix=aa.viewportMatrix,Z.collisionCircleArray=aa.circles,delete this.collisionCircleArrays[Z.bucketInstanceId]};wb.prototype.symbolFadeChange=function(Z){return 0===this.fadeDuration?1:(Z-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment};wb.prototype.zoomAdjustment=function(Z){return Math.max(0,(this.transform.zoom-Z)/1.5)};wb.prototype.hasTransitions=function(Z){return this.stale||Z-this.lastPlacementChangeTime<this.fadeDuration};
wb.prototype.stillRecent=function(Z,da){var aa=this.zoomAtLastRecencyCheck===da?1-this.zoomAdjustment(da):1;return this.zoomAtLastRecencyCheck=da,this.commitTime+this.fadeDuration*aa>Z};wb.prototype.setStale=function(){this.stale=!0};var Fb=Math.pow(2,25),Wb=Math.pow(2,24),lc=Math.pow(2,17),wc=Math.pow(2,16),cc=Math.pow(2,9),Qc=Math.pow(2,8),Ab=Math.pow(2,1),Nb=0,ec=function(Z){this._sortAcrossTiles="viewport-y"!==Z.layout.get("symbol-z-order")&&void 0!==Z.layout.get("symbol-sort-key").constantOr(1);
this._currentPartIndex=this._currentTileIndex=0;this._seenCrossTileIDs={};this._bucketParts=[]};ec.prototype.continuePlacement=function(Z,da,aa,ja,za){for(var Na=this._bucketParts;this._currentTileIndex<Z.length;)if(da.getBucketParts(Na,ja,Z[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,za())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Na.sort(function(Xa,mb){return Xa.sortKey-mb.sortKey}));this._currentPartIndex<Na.length;)if(da.placeLayerBucketPart(Na[this._currentPartIndex],
this._seenCrossTileIDs,aa),this._currentPartIndex++,za())return!0;return!1};var xc=function(Z,da,aa,ja,za,Na,Xa){this.placement=new wb(Z,za,Na,Xa);this._currentPlacementIndex=da.length-1;this._forceFullPlacement=aa;this._showCollisionBoxes=ja;this._done=!1};xc.prototype.isDone=function(){return this._done};xc.prototype.continuePlacement=function(Z,da,aa){for(var ja=this,za=a.browser.now(),Na=function(){var Cb=a.browser.now()-za;return!ja._forceFullPlacement&&2<Cb};0<=this._currentPlacementIndex;){var Xa=
da[Z[this._currentPlacementIndex]],mb=this.placement.collisionIndex.transform.zoom;if("symbol"===Xa.type&&(!Xa.minzoom||Xa.minzoom<=mb)&&(!Xa.maxzoom||Xa.maxzoom>mb)){if(this._inProgressLayer||(this._inProgressLayer=new ec(Xa)),this._inProgressLayer.continuePlacement(aa[Xa.source],this.placement,this._showCollisionBoxes,Xa,Na))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0};xc.prototype.commit=function(Z){return this.placement.commit(Z),this.placement};var yc=512/
a.EXTENT/2,Gc=function(Z,da,aa){this.tileID=Z;this.indexedSymbolInstances={};this.bucketInstanceId=aa;for(aa=0;aa<da.length;aa++){var ja=da.get(aa),za=ja.key;this.indexedSymbolInstances[za]||(this.indexedSymbolInstances[za]=[]);this.indexedSymbolInstances[za].push({crossTileID:ja.crossTileID,coord:this.getScaledCoordinates(ja,Z)})}};Gc.prototype.getScaledCoordinates=function(Z,da){var aa=yc/Math.pow(2,da.canonical.z-this.tileID.canonical.z);return{x:Math.floor((da.canonical.x*a.EXTENT+Z.anchorX)*
aa),y:Math.floor((da.canonical.y*a.EXTENT+Z.anchorY)*aa)}};Gc.prototype.findMatches=function(Z,da,aa){for(var ja=this.tileID.canonical.z<da.canonical.z?1:Math.pow(2,this.tileID.canonical.z-da.canonical.z),za=0;za<Z.length;za++){var Na=Z.get(za);if(!Na.crossTileID){var Xa=this.indexedSymbolInstances[Na.key];if(Xa)for(var mb=this.getScaledCoordinates(Na,da),Cb=0;Cb<Xa.length;Cb+=1){var Kb=Xa[Cb];if(Math.abs(Kb.coord.x-mb.x)<=ja&&Math.abs(Kb.coord.y-mb.y)<=ja&&!aa[Kb.crossTileID]){aa[Kb.crossTileID]=
!0;Na.crossTileID=Kb.crossTileID;break}}}}};var Cc=function(){this.maxCrossTileID=0};Cc.prototype.generate=function(){return++this.maxCrossTileID};var vc=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};vc.prototype.handleWrapJump=function(Z){var da=Math.round((Z-this.lng)/360);if(0!==da)for(var aa in this.indexes){var ja=this.indexes[aa],za={},Na;for(Na in ja){var Xa=ja[Na];Xa.tileID=Xa.tileID.unwrapTo(Xa.tileID.wrap+da);za[Xa.tileID.key]=Xa}this.indexes[aa]=za}this.lng=Z};vc.prototype.addBucket=
function(Z,da,aa){if(this.indexes[Z.overscaledZ]&&this.indexes[Z.overscaledZ][Z.key]){if(this.indexes[Z.overscaledZ][Z.key].bucketInstanceId===da.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(Z.overscaledZ,this.indexes[Z.overscaledZ][Z.key])}for(var ja=0;ja<da.symbolInstances.length;ja++)da.symbolInstances.get(ja).crossTileID=0;this.usedCrossTileIDs[Z.overscaledZ]||(this.usedCrossTileIDs[Z.overscaledZ]={});ja=this.usedCrossTileIDs[Z.overscaledZ];for(var za in this.indexes){var Na=this.indexes[za];
if(Number(za)>Z.overscaledZ)for(var Xa in Na){var mb=Na[Xa];mb.tileID.isChildOf(Z)&&mb.findMatches(da.symbolInstances,Z,ja)}else(Na=Na[Z.scaledTo(Number(za)).key])&&Na.findMatches(da.symbolInstances,Z,ja)}for(za=0;za<da.symbolInstances.length;za++)Xa=da.symbolInstances.get(za),Xa.crossTileID||(Xa.crossTileID=aa.generate(),ja[Xa.crossTileID]=!0);return void 0===this.indexes[Z.overscaledZ]&&(this.indexes[Z.overscaledZ]={}),this.indexes[Z.overscaledZ][Z.key]=new Gc(Z,da.symbolInstances,da.bucketInstanceId),
!0};vc.prototype.removeBucketCrossTileIDs=function(Z,da){for(var aa in da.indexedSymbolInstances)for(var ja=0,za=da.indexedSymbolInstances[aa];ja<za.length;ja+=1)delete this.usedCrossTileIDs[Z][za[ja].crossTileID]};vc.prototype.removeStaleBuckets=function(Z){var da=!1,aa;for(aa in this.indexes){var ja=this.indexes[aa],za;for(za in ja)Z[ja[za].bucketInstanceId]||(this.removeBucketCrossTileIDs(aa,ja[za]),delete ja[za],da=!0)}return da};var oc=function(){this.layerIndexes={};this.crossTileIDs=new Cc;
this.maxBucketInstanceId=0;this.bucketsInCurrentPlacement={}};oc.prototype.addLayer=function(Z,da,aa){var ja=this.layerIndexes[Z.id];void 0===ja&&(ja=this.layerIndexes[Z.id]=new vc);var za=!1,Na={};ja.handleWrapJump(aa);for(aa=0;aa<da.length;aa+=1){var Xa=da[aa],mb=Xa.getBucket(Z);mb&&Z.id===mb.layerIds[0]&&(mb.bucketInstanceId||(mb.bucketInstanceId=++this.maxBucketInstanceId),ja.addBucket(Xa.tileID,mb,this.crossTileIDs)&&(za=!0),Na[mb.bucketInstanceId]=!0)}return ja.removeStaleBuckets(Na)&&(za=!0),
za};oc.prototype.pruneUnusedLayers=function(Z){var da={},aa;for(aa in Z.forEach(function(ja){da[ja]=!0}),this.layerIndexes)da[aa]||delete this.layerIndexes[aa]};var sc=function(Z,da){return a.emitValidationErrors(Z,da&&da.filter(function(aa){return"source.canvas"!==aa.identifier}))},qc=a.pick(Sd,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),id=a.pick(Sd,["setCenter","setZoom","setBearing",
"setPitch"]),td=function(){var Z={},da=a.styleSpec.$version,aa;for(aa in a.styleSpec.$root){var ja,za=a.styleSpec.$root[aa];za.required&&null!=(ja="version"===aa?da:"array"===za.type?[]:{})&&(Z[aa]=ja)}return Z}(),qd=function(Z){function da(aa,ja){var za=this;void 0===ja&&(ja={});Z.call(this);this.map=aa;this.dispatcher=new ab((Wd||(Wd=new Fd),Wd),this);this.imageManager=new Pa;this.imageManager.setEventedParent(this);this.glyphManager=new Ta(aa._requestManager,ja.localIdeographFontFamily);this.lineAtlas=
new Ha(256,512);this.crossTileSymbolIndex=new oc;this._layers={};this._serializedLayers={};this._order=[];this.sourceCaches={};this.zoomHistory=new a.ZoomHistory;this._loaded=!1;this._availableImages=[];this._resetUpdates();this.dispatcher.broadcast("setReferrer",a.getReferrer());var Na=this;this._rtlTextPluginCallback=da.registerForPluginStateChange(function(Xa){Na.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Xa.pluginStatus,pluginURL:Xa.pluginURL},function(mb,Cb){if(a.triggerPluginCompletionEvent(mb),
Cb&&Cb.every(function(Mb){return Mb}))for(var Kb in Na.sourceCaches)Na.sourceCaches[Kb].reload()})});this.on("data",function(Xa){if("source"===Xa.dataType&&"metadata"===Xa.sourceDataType&&(Xa=za.sourceCaches[Xa.sourceId])&&(Xa=Xa.getSource())&&Xa.vectorLayerIds)for(var mb in za._layers){var Cb=za._layers[mb];Cb.source===Xa.id&&za._validateLayer(Cb)}})}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.loadURL=function(aa,ja){var za=this;void 0===ja&&
(ja={});this.fire(new a.Event("dataloading",{dataType:"style"}));var Na="boolean"==typeof ja.validate?ja.validate:!a.isMapboxURL(aa);aa=this.map._requestManager.normalizeStyleURL(aa,ja.accessToken);aa=this.map._requestManager.transformRequest(aa,a.ResourceType.Style);this._request=a.getJSON(aa,function(Xa,mb){za._request=null;Xa?za.fire(new a.ErrorEvent(Xa)):mb&&za._load(mb,Na)})},da.prototype.loadJSON=function(aa,ja){var za=this;void 0===ja&&(ja={});this.fire(new a.Event("dataloading",{dataType:"style"}));
this._request=a.browser.frame(function(){za._request=null;za._load(aa,!1!==ja.validate)})},da.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"}));this._load(td,!1)},da.prototype._load=function(aa,ja){if(!ja||!sc(this,a.validateStyle(aa))){for(var za in this._loaded=!0,this.stylesheet=aa,aa.sources)this.addSource(za,aa.sources[za],{validate:!1});aa.sprite?this._loadSprite(aa.sprite):this.imageManager.setLoaded(!0);this.glyphManager.setURL(aa.glyphs);aa=y(this.stylesheet.layers);
this._order=aa.map(function(Na){return Na.id});this._layers={};this._serializedLayers={};for(ja=0;ja<aa.length;ja+=1)za=aa[ja],(za=a.createStyleLayer(za)).setEventedParent(this,{layer:{id:za.id}}),this._layers[za.id]=za,this._serializedLayers[za.id]=za.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new Da(this.stylesheet.light);this.fire(new a.Event("data",{dataType:"style"}));this.fire(new a.Event("style.load"))}},da.prototype._loadSprite=function(aa){var ja=
this;this._spriteRequest=function(za,Na,Xa){function mb(){if(Mb)Xa(Mb);else if(Cb&&Kb){var Ib=a.browser.getImageData(Kb),Rb={},zc;for(zc in Cb){var Tc=Cb[zc],dd=Tc.width,Lc=Tc.height,kd=Tc.x,md=Tc.y,Nd=Tc.sdf,Bd=Tc.pixelRatio,vd=Tc.stretchX,Ld=Tc.stretchY;Tc=Tc.content;var Zd=new a.RGBAImage({width:dd,height:Lc});a.RGBAImage.copy(Ib,Zd,{x:kd,y:md},{x:0,y:0},{width:dd,height:Lc});Rb[zc]={data:Zd,pixelRatio:Bd,sdf:Nd,stretchX:vd,stretchY:Ld,content:Tc}}Xa(null,Rb)}}var Cb,Kb,Mb,pc=1<a.browser.devicePixelRatio?
"@2x":"",rc=a.getJSON(Na.transformRequest(Na.normalizeSpriteURL(za,pc,".json"),a.ResourceType.SpriteJSON),function(Ib,Rb){rc=null;Mb||(Mb=Ib,Cb=Rb,mb())}),hc=a.getImage(Na.transformRequest(Na.normalizeSpriteURL(za,pc,".png"),a.ResourceType.SpriteImage),function(Ib,Rb){hc=null;Mb||(Mb=Ib,Kb=Rb,mb())});return{cancel:function(){rc&&(rc.cancel(),rc=null);hc&&(hc.cancel(),hc=null)}}}(aa,this.map._requestManager,function(za,Na){if(ja._spriteRequest=null,za)ja.fire(new a.ErrorEvent(za));else if(Na)for(var Xa in Na)ja.imageManager.addImage(Xa,
Na[Xa]);ja.imageManager.setLoaded(!0);ja._availableImages=ja.imageManager.listImages();ja.dispatcher.broadcast("setImages",ja._availableImages);ja.fire(new a.Event("data",{dataType:"style"}))})},da.prototype._validateLayer=function(aa){var ja=this.sourceCaches[aa.source];if(ja){var za=aa.sourceLayer;za&&(ja=ja.getSource(),("geojson"===ja.type||ja.vectorLayerIds&&-1===ja.vectorLayerIds.indexOf(za))&&this.fire(new a.ErrorEvent(Error('Source layer "'+za+'" does not exist on source "'+ja.id+'" as specified by style layer "'+
aa.id+'"'))))}},da.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var aa in this.sourceCaches)if(!this.sourceCaches[aa].loaded())return!1;return!!this.imageManager.isLoaded()},da.prototype._serializeLayers=function(aa){for(var ja=[],za=0;za<aa.length;za+=1){var Na=this._layers[aa[za]];"custom"!==Na.type&&ja.push(Na.serialize())}return ja},da.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var aa in this.sourceCaches)if(this.sourceCaches[aa].hasTransition())return!0;
for(var ja in this._layers)if(this._layers[ja].hasTransition())return!0;return!1},da.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},da.prototype.update=function(aa){if(this._loaded){var ja=this._changed;if(this._changed){var za=Object.keys(this._updatedLayers),Na=Object.keys(this._removedLayers);for(Cb in(za.length||Na.length)&&this._updateWorkerLayers(za,Na),this._updatedSources)za=this._updatedSources[Cb],"reload"===za?this._reloadSource(Cb):"clear"===
za&&this._clearSource(Cb);for(var Xa in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Xa].updateTransitions(aa);this.light.updateTransitions(aa);this._resetUpdates()}for(var mb in this.sourceCaches)this.sourceCaches[mb].used=!1;var Cb=0;for(Xa=this._order;Cb<Xa.length;Cb+=1)mb=this._layers[Xa[Cb]],mb.recalculate(aa,this._availableImages),!mb.isHidden(aa.zoom)&&mb.source&&(this.sourceCaches[mb.source].used=!0);this.light.recalculate(aa);this.z=aa.zoom;ja&&this.fire(new a.Event("data",
{dataType:"style"}))}},da.prototype._updateTilesForChangedImages=function(){var aa=Object.keys(this._changedImages);if(aa.length){for(var ja in this.sourceCaches)this.sourceCaches[ja].reloadTilesForDependencies(["icons","patterns"],aa);this._changedImages={}}},da.prototype._updateWorkerLayers=function(aa,ja){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(aa),removedIds:ja})},da.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};
this._updatedSources={};this._updatedPaintProps={};this._changedImages={}},da.prototype.setState=function(aa){var ja=this;if(this._checkLoaded(),sc(this,a.validateStyle(aa)))return!1;(aa=a.clone$1(aa)).layers=y(aa.layers);var za=function(Xa,mb){if(!Xa)return[{command:Sd.setStyle,args:[mb]}];var Cb=[];try{if(!a.deepEqual(Xa.version,mb.version))return[{command:Sd.setStyle,args:[mb]}];a.deepEqual(Xa.center,mb.center)||Cb.push({command:Sd.setCenter,args:[mb.center]});a.deepEqual(Xa.zoom,mb.zoom)||Cb.push({command:Sd.setZoom,
args:[mb.zoom]});a.deepEqual(Xa.bearing,mb.bearing)||Cb.push({command:Sd.setBearing,args:[mb.bearing]});a.deepEqual(Xa.pitch,mb.pitch)||Cb.push({command:Sd.setPitch,args:[mb.pitch]});a.deepEqual(Xa.sprite,mb.sprite)||Cb.push({command:Sd.setSprite,args:[mb.sprite]});a.deepEqual(Xa.glyphs,mb.glyphs)||Cb.push({command:Sd.setGlyphs,args:[mb.glyphs]});a.deepEqual(Xa.transition,mb.transition)||Cb.push({command:Sd.setTransition,args:[mb.transition]});a.deepEqual(Xa.light,mb.light)||Cb.push({command:Sd.setLight,
args:[mb.light]});var Kb={},Mb=[];!function(rc,hc,Ib,Rb){for(var zc in hc=hc||{},rc=rc||{})if(rc.hasOwnProperty(zc)&&!hc.hasOwnProperty(zc)){var Tc=zc,dd=Rb;Ib.push({command:Sd.removeSource,args:[Tc]});dd[Tc]=!0}for(zc in hc)if(hc.hasOwnProperty(zc))if(rc.hasOwnProperty(zc)){if(!a.deepEqual(rc[zc],hc[zc])){if(Tc="geojson"===rc[zc].type&&"geojson"===hc[zc].type)a:{Tc=void 0;dd=rc;var Lc=hc,kd=zc;for(Tc in dd[kd])if(dd[kd].hasOwnProperty(Tc)&&"data"!==Tc&&!a.deepEqual(dd[kd][Tc],Lc[kd][Tc])){Tc=!1;
break a}for(Tc in Lc[kd])if(Lc[kd].hasOwnProperty(Tc)&&"data"!==Tc&&!a.deepEqual(dd[kd][Tc],Lc[kd][Tc])){Tc=!1;break a}Tc=!0}if(Tc)Ib.push({command:Sd.setGeoJSONSourceData,args:[zc,hc[zc].data]});else{Tc=zc;dd=hc;Lc=Ib;kd=Tc;var md=Rb;Lc.push({command:Sd.removeSource,args:[kd]});md[kd]=!0;Lc.push({command:Sd.addSource,args:[Tc,dd[Tc]]})}}}else Ib.push({command:Sd.addSource,args:[zc,hc[zc]]})}(Xa.sources,mb.sources,Mb,Kb);var pc=[];Xa.layers&&Xa.layers.forEach(function(rc){Kb[rc.source]?Cb.push({command:Sd.removeLayer,
args:[rc.id]}):pc.push(rc)});Cb=Cb.concat(Mb);(function(rc,hc,Ib){hc=hc||[];var Rb,zc,Tc,dd,Lc;var kd=(rc=rc||[]).map(x);var md=hc.map(x);rc=rc.reduce(E,{});var Nd=hc.reduce(E,{}),Bd=kd.slice(),vd=Object.create(null);for(Rb=hc=0;hc<kd.length;hc++)Nd.hasOwnProperty(zc=kd[hc])?Rb++:(Ib.push({command:Sd.removeLayer,args:[zc]}),Bd.splice(Bd.indexOf(zc,Rb),1));for(Rb=hc=0;hc<md.length;hc++)Bd[Bd.length-1-hc]!==(zc=md[md.length-1-hc])&&(rc.hasOwnProperty(zc)?(Ib.push({command:Sd.removeLayer,args:[zc]}),
Bd.splice(Bd.lastIndexOf(zc,Bd.length-Rb),1)):Rb++,Ib.push({command:Sd.addLayer,args:[Nd[zc],Bd[Bd.length-hc]]}),Bd.splice(Bd.length-hc,0,zc),vd[zc]=!0);for(hc=0;hc<md.length;hc++)if(Tc=rc[zc=md[hc]],dd=Nd[zc],!vd[zc]&&!a.deepEqual(Tc,dd))if(a.deepEqual(Tc.source,dd.source)&&a.deepEqual(Tc["source-layer"],dd["source-layer"])&&a.deepEqual(Tc.type,dd.type)){for(Lc in D(Tc.layout,dd.layout,Ib,zc,null,Sd.setLayoutProperty),D(Tc.paint,dd.paint,Ib,zc,null,Sd.setPaintProperty),a.deepEqual(Tc.filter,dd.filter)||
Ib.push({command:Sd.setFilter,args:[zc,dd.filter]}),a.deepEqual(Tc.minzoom,dd.minzoom)&&a.deepEqual(Tc.maxzoom,dd.maxzoom)||Ib.push({command:Sd.setLayerZoomRange,args:[zc,dd.minzoom,dd.maxzoom]}),Tc)Tc.hasOwnProperty(Lc)&&"layout"!==Lc&&"paint"!==Lc&&"filter"!==Lc&&"metadata"!==Lc&&"minzoom"!==Lc&&"maxzoom"!==Lc&&(0===Lc.indexOf("paint.")?D(Tc[Lc],dd[Lc],Ib,zc,Lc.slice(6),Sd.setPaintProperty):a.deepEqual(Tc[Lc],dd[Lc])||Ib.push({command:Sd.setLayerProperty,args:[zc,Lc,dd[Lc]]}));for(Lc in dd)dd.hasOwnProperty(Lc)&&
!Tc.hasOwnProperty(Lc)&&"layout"!==Lc&&"paint"!==Lc&&"filter"!==Lc&&"metadata"!==Lc&&"minzoom"!==Lc&&"maxzoom"!==Lc&&(0===Lc.indexOf("paint.")?D(Tc[Lc],dd[Lc],Ib,zc,Lc.slice(6),Sd.setPaintProperty):a.deepEqual(Tc[Lc],dd[Lc])||Ib.push({command:Sd.setLayerProperty,args:[zc,Lc,dd[Lc]]}))}else Ib.push({command:Sd.removeLayer,args:[zc]}),kd=Bd[Bd.lastIndexOf(zc)+1],Ib.push({command:Sd.addLayer,args:[dd,kd]})})(pc,mb.layers,Cb)}catch(rc){console.warn("Unable to compute style diff:",rc),Cb=[{command:Sd.setStyle,
args:[mb]}]}return Cb}(this.serialize(),aa).filter(function(Xa){return!(Xa.command in id)});if(0===za.length)return!1;var Na=za.filter(function(Xa){return!(Xa.command in qc)});if(0<Na.length)throw Error("Unimplemented: "+Na.map(function(Xa){return Xa.command}).join(", ")+".");return za.forEach(function(Xa){"setTransition"!==Xa.command&&ja[Xa.command].apply(ja,Xa.args)}),this.stylesheet=aa,!0},da.prototype.addImage=function(aa,ja){if(this.getImage(aa))return this.fire(new a.ErrorEvent(Error("An image with this name already exists.")));
this.imageManager.addImage(aa,ja);this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[aa]=!0;this.fire(new a.Event("data",{dataType:"style"}))},da.prototype.updateImage=function(aa,ja){this.imageManager.updateImage(aa,ja)},da.prototype.getImage=function(aa){return this.imageManager.getImage(aa)},da.prototype.removeImage=function(aa){if(!this.getImage(aa))return this.fire(new a.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(aa);
this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[aa]=!0;this.fire(new a.Event("data",{dataType:"style"}))},da.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},da.prototype.addSource=function(aa,ja,za){var Na=this;if(void 0===za&&(za={}),this._checkLoaded(),void 0!==this.sourceCaches[aa])throw Error("There is already a source with this ID");if(!ja.type)throw Error("The type property must be defined, but the only the following properties were given: "+
Object.keys(ja).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(ja.type)&&this._validate(a.validateStyle.source,"sources."+aa,ja,null,za))){this.map&&this.map._collectResourceTiming&&(ja.collectResourceTiming=!0);var Xa=this.sourceCaches[aa]=new Ge(aa,ja,this.dispatcher);Xa.style=this;Xa.setEventedParent(this,function(){return{isSourceLoaded:Na.loaded(),source:Xa.serialize(),sourceId:aa}});Xa.onAdd(this.map);this._changed=!0}},da.prototype.removeSource=function(aa){if(this._checkLoaded(),
void 0===this.sourceCaches[aa])throw Error("There is no source with this ID");for(var ja in this._layers)if(this._layers[ja].source===aa)return this.fire(new a.ErrorEvent(Error('Source "'+aa+'" cannot be removed while layer "'+ja+'" is using it.')));ja=this.sourceCaches[aa];delete this.sourceCaches[aa];delete this._updatedSources[aa];ja.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:aa}));ja.setEventedParent(null);ja.clearTiles();ja.onRemove&&ja.onRemove(this.map);this._changed=
!0},da.prototype.setGeoJSONSourceData=function(aa,ja){this._checkLoaded();this.sourceCaches[aa].getSource().setData(ja);this._changed=!0},da.prototype.getSource=function(aa){return this.sourceCaches[aa]&&this.sourceCaches[aa].getSource()},da.prototype.addLayer=function(aa,ja,za){void 0===za&&(za={});this._checkLoaded();var Na=aa.id;if(this.getLayer(Na))this.fire(new a.ErrorEvent(Error('Layer with id "'+Na+'" already exists on this map')));else{if("custom"===aa.type){if(sc(this,a.validateCustomStyleLayer(aa)))return;
aa=a.createStyleLayer(aa)}else{if("object"==typeof aa.source&&(this.addSource(Na,aa.source),aa=a.clone$1(aa),aa=a.extend(aa,{source:Na})),this._validate(a.validateStyle.layer,"layers."+Na,aa,{arrayIndex:-1},za))return;aa=a.createStyleLayer(aa);this._validateLayer(aa);aa.setEventedParent(this,{layer:{id:Na}});this._serializedLayers[aa.id]=aa.serialize()}za=ja?this._order.indexOf(ja):this._order.length;if(ja&&-1===za)this.fire(new a.ErrorEvent(Error('Layer with id "'+ja+'" does not exist on this map.')));
else{if(this._order.splice(za,0,Na),this._layerOrderChanged=!0,this._layers[Na]=aa,this._removedLayers[Na]&&aa.source&&"custom"!==aa.type)ja=this._removedLayers[Na],delete this._removedLayers[Na],ja.type!==aa.type?this._updatedSources[aa.source]="clear":(this._updatedSources[aa.source]="reload",this.sourceCaches[aa.source].pause());this._updateLayer(aa);aa.onAdd&&aa.onAdd(this.map)}}},da.prototype.moveLayer=function(aa,ja){if(this._checkLoaded(),this._changed=!0,this._layers[aa]){if(aa!==ja){var za=
this._order.indexOf(aa);this._order.splice(za,1);za=ja?this._order.indexOf(ja):this._order.length;ja&&-1===za?this.fire(new a.ErrorEvent(Error('Layer with id "'+ja+'" does not exist on this map.'))):(this._order.splice(za,0,aa),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot be moved.")))},da.prototype.removeLayer=function(aa){this._checkLoaded();var ja=this._layers[aa];if(ja){ja.setEventedParent(null);var za=this._order.indexOf(aa);
this._order.splice(za,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[aa]=ja;delete this._layers[aa];delete this._serializedLayers[aa];delete this._updatedLayers[aa];delete this._updatedPaintProps[aa];ja.onRemove&&ja.onRemove(this.map)}else this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot be removed.")))},da.prototype.getLayer=function(aa){return this._layers[aa]},da.prototype.hasLayer=function(aa){return aa in this._layers},da.prototype.setLayerZoomRange=
function(aa,ja,za){this._checkLoaded();var Na=this.getLayer(aa);Na?Na.minzoom===ja&&Na.maxzoom===za||(null!=ja&&(Na.minzoom=ja),null!=za&&(Na.maxzoom=za),this._updateLayer(Na)):this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot have zoom extent.")))},da.prototype.setFilter=function(aa,ja,za){void 0===za&&(za={});this._checkLoaded();var Na=this.getLayer(aa);if(Na){if(!a.deepEqual(Na.filter,ja))return null==ja?(Na.filter=void 0,void this._updateLayer(Na)):
void(this._validate(a.validateStyle.filter,"layers."+Na.id+".filter",ja,null,za)||(Na.filter=a.clone$1(ja),this._updateLayer(Na)))}else this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot be filtered.")))},da.prototype.getFilter=function(aa){return a.clone$1(this.getLayer(aa).filter)},da.prototype.setLayoutProperty=function(aa,ja,za,Na){void 0===Na&&(Na={});this._checkLoaded();var Xa=this.getLayer(aa);Xa?a.deepEqual(Xa.getLayoutProperty(ja),za)||(Xa.setLayoutProperty(ja,
za,Na),this._updateLayer(Xa)):this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot be styled.")))},da.prototype.getLayoutProperty=function(aa,ja){var za=this.getLayer(aa);if(za)return za.getLayoutProperty(ja);this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style.")))},da.prototype.setPaintProperty=function(aa,ja,za,Na){void 0===Na&&(Na={});this._checkLoaded();var Xa=this.getLayer(aa);Xa?a.deepEqual(Xa.getPaintProperty(ja),
za)||(Xa.setPaintProperty(ja,za,Na)&&this._updateLayer(Xa),this._changed=!0,this._updatedPaintProps[aa]=!0):this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot be styled.")))},da.prototype.getPaintProperty=function(aa,ja){return this.getLayer(aa).getPaintProperty(ja)},da.prototype.setFeatureState=function(aa,ja){this._checkLoaded();var za=aa.source,Na=aa.sourceLayer,Xa=this.sourceCaches[za];void 0!==Xa?(za=Xa.getSource().type,"geojson"===za&&Na?this.fire(new a.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):
"vector"!==za||Na?(void 0===aa.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),Xa.setFeatureState(Na,aa.id,ja)):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new a.ErrorEvent(Error("The source '"+za+"' does not exist in the map's style.")))},da.prototype.removeFeatureState=function(aa,ja){this._checkLoaded();var za=aa.source,Na=this.sourceCaches[za];if(void 0!==Na){za=Na.getSource().type;var Xa=
"vector"===za?aa.sourceLayer:void 0;"vector"!==za||Xa?ja&&"string"!=typeof aa.id&&"number"!=typeof aa.id?this.fire(new a.ErrorEvent(Error("A feature id is requred to remove its specific state property."))):Na.removeFeatureState(Xa,aa.id,ja):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+za+"' does not exist in the map's style.")))},da.prototype.getFeatureState=function(aa){this._checkLoaded();
var ja=aa.source,za=aa.sourceLayer,Na=this.sourceCaches[ja];if(void 0!==Na){if("vector"!==Na.getSource().type||za)return void 0===aa.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),Na.getFeatureState(za,aa.id);this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+ja+"' does not exist in the map's style.")))},da.prototype.getTransition=function(){return a.extend({duration:300,
delay:0},this.stylesheet&&this.stylesheet.transition)},da.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(aa){return aa.serialize()}),
layers:this._serializeLayers(this._order)},function(aa){return void 0!==aa})},da.prototype._updateLayer=function(aa){this._updatedLayers[aa.id]=!0;aa.source&&!this._updatedSources[aa.source]&&"raster"!==this.sourceCaches[aa.source].getSource().type&&(this._updatedSources[aa.source]="reload",this.sourceCaches[aa.source].pause());this._changed=!0},da.prototype._flattenAndSortRenderedFeatures=function(aa){for(var ja={},za=[],Na=this._order.length-1;0<=Na;Na--){var Xa=this._order[Na];if("fill-extrusion"===
this._layers[Xa].type){ja[Xa]=Na;for(var mb=0,Cb=aa;mb<Cb.length;mb+=1){var Kb=Cb[mb][Xa];if(Kb)for(var Mb=0;Mb<Kb.length;Mb+=1)za.push(Kb[Mb])}}}za.sort(function(rc,hc){return hc.intersectionZ-rc.intersectionZ});Na=[];for(Xa=this._order.length-1;0<=Xa;Xa--)if(mb=this._order[Xa],"fill-extrusion"===this._layers[mb].type)for(mb=za.length-1;0<=mb;mb--){Cb=za[mb].feature;if(ja[Cb.layer.id]<Xa)break;Na.push(Cb);za.pop()}else for(Cb=0,Mb=aa;Cb<Mb.length;Cb+=1){var pc=Mb[Cb][mb];if(pc)for(Kb=0;Kb<pc.length;Kb+=
1)Na.push(pc[Kb].feature)}return Na},da.prototype.queryRenderedFeatures=function(aa,ja,za){ja&&ja.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",ja.filter,null,ja);var Na={};if(ja&&ja.layers){if(!Array.isArray(ja.layers))return this.fire(new a.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var Xa=0,mb=ja.layers;Xa<mb.length;Xa+=1){var Cb=mb[Xa],Kb=this._layers[Cb];if(!Kb)return this.fire(new a.ErrorEvent(Error("The layer '"+Cb+"' does not exist in the map's style and cannot be queried for features."))),
[];Na[Kb.source]=!0}}Xa=[];for(var Mb in ja.availableImages=this._availableImages,this.sourceCaches)ja.layers&&!Na[Mb]||Xa.push(d(this.sourceCaches[Mb],this._layers,this._serializedLayers,aa,ja,za));return this.placement&&Xa.push(function(pc,rc,hc,Ib,Rb,zc,Tc){var dd={},Lc=zc.queryRenderedSymbols(Ib);Ib=[];zc=0;for(var kd=Object.keys(Lc).map(Number);zc<kd.length;zc+=1)Ib.push(Tc[kd[zc]]);Ib.sort(q);Tc=function(){var vd=Nd[md],Ld=vd.featureIndex.lookupSymbolFeatures(Lc[vd.bucketInstanceId],rc,vd.bucketIndex,
vd.sourceLayerIndex,Rb.filter,Rb.layers,Rb.availableImages,pc),Zd;for(Zd in Ld){var de=dd[Zd]=dd[Zd]||[],me=Ld[Zd];me.sort(function(Md,Ee){var Ce=vd.featureSortOrder;return Ce?(Md=Ce.indexOf(Md.featureIndex),Ce.indexOf(Ee.featureIndex)-Md):Ee.featureIndex-Md.featureIndex});for(var He=0;He<me.length;He+=1)de.push(me[He])}};for(var md=0,Nd=Ib;md<Nd.length;md+=1)Tc();Tc=function(vd){dd[vd].forEach(function(Ld){Ld=Ld.feature;var Zd=hc[pc[vd].source].getFeatureState(Ld.layer["source-layer"],Ld.id);Ld.source=
Ld.layer.source;Ld.layer["source-layer"]&&(Ld.sourceLayer=Ld.layer["source-layer"]);Ld.state=Zd})};for(var Bd in dd)Tc(Bd);return dd}(this._layers,this._serializedLayers,this.sourceCaches,aa,ja,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Xa)},da.prototype.querySourceFeatures=function(aa,ja){ja&&ja.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",ja.filter,null,ja);return(aa=this.sourceCaches[aa])?function(za,Na){for(var Xa=
za.getRenderableIds().map(function(rc){return za.getTileByID(rc)}),mb=[],Cb={},Kb=0;Kb<Xa.length;Kb++){var Mb=Xa[Kb],pc=Mb.tileID.canonical.key;Cb[pc]||(Cb[pc]=!0,Mb.querySourceFeatures(mb,Na))}return mb}(aa,ja):[]},da.prototype.addSourceType=function(aa,ja,za){return da.getSourceType(aa)?za(Error('A source type called "'+aa+'" already exists.')):(da.setSourceType(aa,ja),ja.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:aa,url:ja.workerSourceURL},za):za(null,null))},da.prototype.getLight=
function(){return this.light.getLight()},da.prototype.setLight=function(aa,ja){void 0===ja&&(ja={});this._checkLoaded();var za=this.light.getLight(),Na=!1,Xa;for(Xa in aa)if(!a.deepEqual(aa[Xa],za[Xa])){Na=!0;break}Na&&(za={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(aa,ja),this.light.updateTransitions(za))},da.prototype._validate=function(aa,ja,za,Na,Xa){return void 0===Xa&&(Xa={}),(!Xa||!1!==Xa.validate)&&sc(this,aa.call(a.validateStyle,
a.extend({key:ja,style:this.serialize(),value:za,styleSpec:a.styleSpec},Na)))},da.prototype._remove=function(){for(var aa in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[aa].setEventedParent(null);for(var ja in this.sourceCaches)this.sourceCaches[ja].clearTiles(),this.sourceCaches[ja].setEventedParent(null);this.imageManager.setEventedParent(null);
this.setEventedParent(null);this.dispatcher.remove()},da.prototype._clearSource=function(aa){this.sourceCaches[aa].clearTiles()},da.prototype._reloadSource=function(aa){this.sourceCaches[aa].resume();this.sourceCaches[aa].reload()},da.prototype._updateSources=function(aa){for(var ja in this.sourceCaches)this.sourceCaches[ja].update(aa)},da.prototype._generateCollisionBoxes=function(){for(var aa in this.sourceCaches)this._reloadSource(aa)},da.prototype._updatePlacement=function(aa,ja,za,Na,Xa){void 0===
Xa&&(Xa=!1);for(var mb=!1,Cb=!1,Kb={},Mb=0,pc=this._order;Mb<pc.length;Mb+=1){var rc=this._layers[pc[Mb]];if("symbol"===rc.type){if(!Kb[rc.source]){var hc=this.sourceCaches[rc.source];Kb[rc.source]=hc.getRenderableIds(!0).map(function(Ib){return hc.getTileByID(Ib)}).sort(function(Ib,Rb){return Rb.tileID.overscaledZ-Ib.tileID.overscaledZ||(Ib.tileID.isLessThan(Rb.tileID)?-1:1)})}rc=this.crossTileSymbolIndex.addLayer(rc,Kb[rc.source],aa.center.lng);mb=mb||rc}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),
((Xa=Xa||this._layerOrderChanged||0===za)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),aa.zoom))&&(this.pauseablePlacement=new xc(aa,this._order,Xa,ja,za,Na,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Kb),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),Cb=!0),mb&&
this.pauseablePlacement.placement.setStale()),Cb||mb)for(aa=0,ja=this._order;aa<ja.length;aa+=1)za=this._layers[ja[aa]],"symbol"===za.type&&this.placement.updateLayerOpacities(za,Kb[za.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},da.prototype._releaseSymbolFadeTiles=function(){for(var aa in this.sourceCaches)this.sourceCaches[aa].releaseSymbolFadeTiles()},da.prototype.getImages=function(aa,ja,za){this.imageManager.getImages(ja.icons,za);this._updateTilesForChangedImages();
(aa=this.sourceCaches[ja.source])&&aa.setDependencies(ja.tileID.key,ja.type,ja.icons)},da.prototype.getGlyphs=function(aa,ja,za){this.glyphManager.getGlyphs(ja.stacks,za)},da.prototype.getResource=function(aa,ja,za){return a.makeRequest(ja,za)},da}(a.Evented);qd.getSourceType=function(Z){return Ac[Z]};qd.setSourceType=function(Z,da){Ac[Z]=da};qd.registerForPluginStateChange=a.registerForPluginStateChange;var Dd=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),od=ea("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif",
"#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue\x3dint(packedValue);int v0\x3dpackedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity\x3dint(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor\x3ddecode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor\x3ddecode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset\x3dmod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
re=ea("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor\x3du_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),ue=ea("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
De=ea("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dv_data.xy;float extrude_length\x3dlength(extrude);lowp float antialiasblur\x3dv_data.z;float antialiased_blur\x3d-max(blur,antialiasblur);float opacity_t\x3dsmoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t\x3dstroke_width \x3c 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor\x3dopacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center\x3dfloor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position\x3dcircle_center;if (u_scale_with_map) {corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center\x3du_matrix*vec4(circle_center,0,1);corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position\x3du_matrix*vec4(corner_position,0,1);} else {gl_Position\x3du_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur\x3d1.0/u_device_pixel_ratio/(radius+stroke_width);v_data\x3dvec3(extrude.x,extrude.y,antialiasblur);}"),
ne=ea("void main() {gl_FragColor\x3dvec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),ze=ea("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d\x3d-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val\x3dweight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor\x3dvec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO\x3d1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);float S\x3dsqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude\x3dS*unscaled_extrude;vec2 extrude\x3dv_extrude*radius*u_extrude_scale;vec4 pos\x3dvec4(floor(a_pos*0.5)+extrude,0,1);gl_Position\x3du_matrix*pos;}"),
Df=ea("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t\x3dtexture2D(u_image,v_pos).r;vec4 color\x3dtexture2D(u_color_ramp,vec2(t,0.5));gl_FragColor\x3dcolor*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),Pg=
ea("varying float v_placed;varying float v_notUsed;void main() {float alpha\x3d0.5;gl_FragColor\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {gl_FragColor\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {gl_FragColor*\x3d.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+\x3d(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;}"),
fg=ea("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha\x3d0.5*min(v_perspective_ratio,1.0);float stroke_radius\x3d0.9*max(v_perspective_ratio,1.0);float distance_to_center\x3dlength(v_extrude);float distance_to_edge\x3dabs(distance_to_center-v_radius);float opacity_t\x3dsmoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color\x3dmix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor\x3dcolor*alpha*opacity_t;}",
"attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart\x3du_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  \x3du_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/\x3drayStart.w;rayEnd.xyz  /\x3drayEnd.w;highp float t\x3d(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos\x3da_pos;float radius\x3da_radius;float collision\x3da_flags.x;float vertexIdx\x3da_flags.y;vec2 quadVertexOffset\x3dvec2(mix(-1.0,1.0,float(vertexIdx \x3e\x3d2.0)),mix(-1.0,1.0,float(vertexIdx \x3e\x3d1.0 \x26\x26 vertexIdx \x3c\x3d2.0)));vec2 quadVertexExtent\x3dquadVertexOffset*radius;vec3 tilePos\x3dtoTilePosition(quadCenterPos);vec4 clipPos\x3du_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance\x3dclipPos.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor\x3d1.2;v_radius\x3dradius;v_extrude\x3dquadVertexExtent*padding_factor;v_perspective_ratio\x3dcollision_perspective_ratio;v_collision\x3dcollision;gl_Position\x3dvec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),
hi=ea("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color\x3dtexture2D(u_overlay,v_uv);gl_FragColor\x3dmix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv\x3da_pos/8192.0;gl_Position\x3du_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ih=ea("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor\x3dcolor*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);}"),ii=ea("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3doutline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Qg=ea("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);float dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3dmix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;gl_Position\x3du_matrix*vec4(a_pos,0,1);vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
ji=ea("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
Oi=ea("varying vec4 v_color;void main() {gl_FragColor\x3dv_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal\x3da_normal_ed.xyz;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);gl_Position\x3du_matrix*vec4(a_pos,t \x3e 0.0 ? height : base,1);float colorvalue\x3dcolor.r*0.2126+color.g*0.7152+color.b*0.0722;v_color\x3dvec4(0.0,0.0,0.0,1.0);vec4 ambientlight\x3dvec4(0.03,0.03,0.03,1.0);color+\x3dambientlight;float directional\x3dclamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+\x3dclamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+\x3dclamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+\x3dclamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*\x3du_opacity;}"),
nj=ea("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);vec4 mixedColor\x3dmix(color1,color2,u_fade);gl_FragColor\x3dmixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec3 normal\x3da_normal_ed.xyz;float edgedistance\x3da_normal_ed.w;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);float z\x3dt \x3e 0.0 ? height : base;gl_Position\x3du_matrix*vec4(a_pos,z,1);vec2 pos\x3dnormal.x\x3d\x3d1.0 \x26\x26 normal.y\x3d\x3d0.0 \x26\x26 normal.z\x3d\x3d16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting\x3dvec4(0.0,0.0,0.0,1.0);float directional\x3dclamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+\x3dclamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*\x3du_opacity;}"),
Pi=ea("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data\x3dtexture2D(u_image,coord)*255.0;data.a\x3d-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon\x3d1.0/u_dimension;float a\x3dgetElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b\x3dgetElevation(v_pos+vec2(0,-epsilon.y),0.0);float c\x3dgetElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d\x3dgetElevation(v_pos+vec2(-epsilon.x,0),0.0);float e\x3dgetElevation(v_pos,0.0);float f\x3dgetElevation(v_pos+vec2(epsilon.x,0),0.0);float g\x3dgetElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h\x3dgetElevation(v_pos+vec2(0,epsilon.y),0.0);float i\x3dgetElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration\x3du_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;vec2 deriv\x3dvec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor\x3dclamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);highp vec2 epsilon\x3d1.0/u_dimension;float scale\x3d(u_dimension.x-2.0)/u_dimension.x;v_pos\x3d(a_texture_pos/8192.0)*scale+epsilon;}"),Qi=ea("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel\x3dtexture2D(u_image,v_pos);vec2 deriv\x3d((pixel.rg*2.0)-1.0);float scaleFactor\x3dcos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope\x3datan(1.25*length(deriv)/scaleFactor);float aspect\x3dderiv.x !\x3d0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y \x3e 0.0 ? 1.0 :-1.0);float intensity\x3du_light.x;float azimuth\x3du_light.y+PI;float base\x3d1.875-intensity*1.75;float maxValue\x3d0.5*PI;float scaledSlope\x3dintensity !\x3d0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent\x3dcos(scaledSlope);vec4 accent_color\x3d(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade\x3dabs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color\x3dmix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor\x3daccent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3da_texture_pos/8192.0;}"),Vg=ea("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
yk=ea("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color\x3dtexture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_lineprogress\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
rh=ea("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a\x3dvec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b\x3dvec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a\x3ddisplay_size_a.y/v_width;float aspect_b\x3ddisplay_size_b.y/v_width;float dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a\x3dmod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b\x3dmod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y\x3d0.5*v_normal.y+0.5;vec2 texel_size\x3d1.0/u_texsize;vec2 pos_a\x3dmix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b\x3dmix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color\x3dmix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor\x3dcolor*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_linesofar\x3da_linesofar;v_width2\x3dvec2(outset,inset);v_width\x3dfloorwidth;}"),
Hh=ea("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a\x3dtexture2D(u_image,v_tex_a).a;float sdfdist_b\x3dtexture2D(u_image,v_tex_b).a;float sdfdist\x3dmix(sdfdist_a,sdfdist_b,u_mix);alpha*\x3dsmoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_tex_a\x3dvec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b\x3dvec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2\x3dvec2(outset,inset);}"),
zk=ea("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0\x3dtexture2D(u_image0,v_pos0);vec4 color1\x3dtexture2D(u_image1,v_pos1);if (color0.a \x3e 0.0) {color0.rgb\x3dcolor0.rgb/color0.a;}if (color1.a \x3e 0.0) {color1.rgb\x3dcolor1.rgb/color1.a;}vec4 color\x3dmix(color0,color1,u_fade_t);color.a*\x3du_opacity;vec3 rgb\x3dcolor.rgb;rgb\x3dvec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average\x3d(color.r+color.g+color.b)/3.0;rgb+\x3d(average-rgb)*u_saturation_factor;rgb\x3d(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec\x3dvec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec\x3dvec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor\x3dvec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos0\x3d(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1\x3d(v_pos0*u_scale_parent)+u_tl_parent;}"),Ih=ea("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha\x3dopacity*v_fade_opacity;gl_FragColor\x3dtexture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;vec2 a_minFontScale\x3da_pixeloffset.zw/256.0;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
Hg=ea("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;vec2 tex\x3dv_data0.xy;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fade_opacity\x3dv_data1[2];float fontScale\x3du_is_text ? size/24.0 : size;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0\x3da_tex/u_texsize;v_data1\x3dvec3(gamma_scale,size,interpolated_fade_opacity);}"),
Wj=ea("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity\x3dv_data1[2];if (v_data1.w\x3d\x3dICON) {vec2 tex_icon\x3dv_data0.zw;lowp float alpha\x3dopacity*fade_opacity;gl_FragColor\x3dtexture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\nreturn;}vec2 tex\x3dv_data0.xy;float EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fontScale\x3dsize/24.0;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);float is_sdf\x3da_size[0]-2.0*a_size_min;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3dsize/24.0;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy\x3da_tex/u_texsize;v_data0.zw\x3da_tex/u_texsize_icon;v_data1\x3dvec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),
oi=Object.freeze({__proto__:null,prelude:od,background:re,backgroundPattern:ue,circle:De,clippingMask:ne,heatmap:ze,heatmapTexture:Df,collisionBox:Pg,collisionCircle:fg,debug:hi,fill:ih,fillOutline:ii,fillOutlinePattern:Qg,fillPattern:ji,fillExtrusion:Oi,fillExtrusionPattern:nj,hillshadePrepare:Pi,hillshade:Qi,line:Vg,lineGradient:yk,linePattern:rh,lineSDF:Hh,raster:zk,symbolIcon:Ih,symbolSDF:Hg,symbolTextAndIcon:Wj}),sh=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=
[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};sh.prototype.bind=function(Z,da,aa,ja,za,Na,Xa,mb){this.context=Z;for(var Cb=this.boundPaintVertexBuffers.length!==ja.length,Kb=0;!Cb&&Kb<ja.length;Kb++)this.boundPaintVertexBuffers[Kb]!==ja[Kb]&&(Cb=!0);Z.extVertexArrayObject&&this.vao&&this.boundProgram===da&&this.boundLayoutVertexBuffer===aa&&!Cb&&this.boundIndexBuffer===za&&this.boundVertexOffset===Na&&this.boundDynamicVertexBuffer===Xa&&this.boundDynamicVertexBuffer2===
mb?(Z.bindVertexArrayOES.set(this.vao),Xa&&Xa.bind(),za&&za.dynamicDraw&&za.bind(),mb&&mb.bind()):this.freshBind(da,aa,ja,za,Na,Xa,mb)};sh.prototype.freshBind=function(Z,da,aa,ja,za,Na,Xa){var mb=Z.numAttributes,Cb=this.context,Kb=Cb.gl;if(Cb.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Cb.extVertexArrayObject.createVertexArrayOES(),Cb.bindVertexArrayOES.set(this.vao),this.boundProgram=Z,this.boundLayoutVertexBuffer=da,this.boundPaintVertexBuffers=aa,this.boundIndexBuffer=ja,this.boundVertexOffset=
za,this.boundDynamicVertexBuffer=Na,this.boundDynamicVertexBuffer2=Xa;else{var Mb=Cb.currentNumAttributes||0;for(var pc=mb;pc<Mb;pc++)Kb.disableVertexAttribArray(pc)}da.enableAttributes(Kb,Z);for(Mb=0;Mb<aa.length;Mb+=1)aa[Mb].enableAttributes(Kb,Z);Na&&Na.enableAttributes(Kb,Z);Xa&&Xa.enableAttributes(Kb,Z);da.bind();da.setVertexAttribPointers(Kb,Z,za);for(da=0;da<aa.length;da+=1)Mb=aa[da],Mb.bind(),Mb.setVertexAttribPointers(Kb,Z,za);Na&&(Na.bind(),Na.setVertexAttribPointers(Kb,Z,za));ja&&ja.bind();
Xa&&(Xa.bind(),Xa.setVertexAttribPointers(Kb,Z,za));Cb.currentNumAttributes=mb};sh.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Be=function(Z,da,aa,ja,za){var Na=Z.gl;this.program=Na.createProgram();var Xa=aa?aa.defines():[];za&&Xa.push("#define OVERDRAW_INSPECTOR;");za=Xa.concat(od.fragmentSource,da.fragmentSource).join("\n");Xa=Xa.concat(od.vertexSource,da.vertexSource).join("\n");da=Na.createShader(Na.FRAGMENT_SHADER);
if(Na.isContextLost())this.failedToCreate=!0;else if(Na.shaderSource(da,za),Na.compileShader(da),Na.attachShader(this.program,da),za=Na.createShader(Na.VERTEX_SHADER),Na.isContextLost())this.failedToCreate=!0;else{Na.shaderSource(za,Xa);Na.compileShader(za);Na.attachShader(this.program,za);Xa=aa?aa.layoutAttributes:[];for(var mb=0;mb<Xa.length;mb++)Na.bindAttribLocation(this.program,mb,Xa[mb].name);Na.linkProgram(this.program);Na.deleteShader(za);Na.deleteShader(da);this.numAttributes=Na.getProgramParameter(this.program,
Na.ACTIVE_ATTRIBUTES);this.attributes={};da={};for(za=0;za<this.numAttributes;za++)(Xa=Na.getActiveAttrib(this.program,za))&&(this.attributes[Xa.name]=Na.getAttribLocation(this.program,Xa.name));za=Na.getProgramParameter(this.program,Na.ACTIVE_UNIFORMS);for(Xa=0;Xa<za;Xa++)(mb=Na.getActiveUniform(this.program,Xa))&&(da[mb.name]=Na.getUniformLocation(this.program,mb.name));this.fixedUniforms=ja(Z,da);this.binderUniforms=aa?aa.getUniforms(Z,da):[]}};Be.prototype.draw=function(Z,da,aa,ja,za,Na,Xa,mb,
Cb,Kb,Mb,pc,rc,hc,Ib,Rb){var zc,Tc=Z.gl;if(!this.failedToCreate){for(var dd in Z.program.set(this.program),Z.setDepthMode(aa),Z.setStencilMode(ja),Z.setColorMode(za),Z.setCullFace(Na),this.fixedUniforms)this.fixedUniforms[dd].set(Xa[dd]);hc&&hc.setUniforms(Z,this.binderUniforms,pc,{zoom:rc});aa=(zc={},zc[Tc.LINES]=2,zc[Tc.TRIANGLES]=3,zc[Tc.LINE_STRIP]=1,zc)[da];zc=0;for(Mb=Mb.get();zc<Mb.length;zc+=1)ja=Mb[zc],za=ja.vaos||(ja.vaos={}),(za[mb]||(za[mb]=new sh)).bind(Z,this,Cb,hc?hc.getPaintVertexBuffers():
[],Kb,ja.vertexOffset,Ib,Rb),Tc.drawElements(da,ja.primitiveLength*aa,Tc.UNSIGNED_SHORT,ja.primitiveOffset*aa*2)}};var Vf=function(Z,da,aa,ja){var za=da.style.light,Na=za.properties.get("position");Na=[Na.x,Na.y,Na.z];var Xa=a.create$1();"viewport"===za.properties.get("anchor")&&a.fromRotation(Xa,-da.transform.angle);a.transformMat3(Na,Na,Xa);da=za.properties.get("color");return{u_matrix:Z,u_lightpos:Na,u_lightintensity:za.properties.get("intensity"),u_lightcolor:[da.r,da.g,da.b],u_vertical_gradient:+aa,
u_opacity:ja}},Kh=function(Z,da,aa,ja){var za=Z.transform;if("map"===ja.paint.get("circle-pitch-alignment")){var Na=U(aa,1,za.zoom);var Xa=!0;Na=[Na,Na]}else Xa=!1,Na=za.pixelsToGLUnits;return{u_camera_to_center_distance:za.cameraToCenterDistance,u_scale_with_map:+("map"===ja.paint.get("circle-pitch-scale")),u_matrix:Z.translatePosMatrix(da.posMatrix,aa,ja.paint.get("circle-translate"),ja.paint.get("circle-translate-anchor")),u_pitch_with_map:+Xa,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:Na}},
pi=function(Z,da,aa){var ja=U(aa,1,da.zoom),za=Math.pow(2,da.zoom-aa.tileID.overscaledZ);aa=aa.tileID.overscaleFactor();return{u_matrix:Z,u_camera_to_center_distance:da.cameraToCenterDistance,u_pixels_to_tile_units:ja,u_extrude_scale:[da.pixelsToGLUnits[0]/(ja*za),da.pixelsToGLUnits[1]/(ja*za)],u_overscale_factor:aa}},oj=function(Z,da,aa){return void 0===aa&&(aa=1),{u_matrix:Z,u_color:da,u_overlay:0,u_overlay_scale:aa}},pj=function(Z,da,aa,ja){return{u_matrix:Z,u_extrude_scale:U(da,1,aa),u_intensity:ja}},
qj=function(Z,da,aa){var ja=Z.transform;return{u_matrix:ia(Z,da,aa),u_ratio:1/U(da,1,ja.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/ja.pixelsToGLUnits[0],1/ja.pixelsToGLUnits[1]]}},Si,Xj=function(Z,da,aa,ja,za,Na,Xa,mb,Cb,Kb){var Mb=za.transform;return{u_is_size_zoom_constant:+("constant"===Z||"source"===Z),u_is_size_feature_constant:+("constant"===Z||"camera"===Z),u_size_t:da?da.uSizeT:0,u_size:da?da.uSize:0,u_camera_to_center_distance:Mb.cameraToCenterDistance,u_pitch:Mb.pitch/
360*2*Math.PI,u_rotate_symbol:+aa,u_aspect_ratio:Mb.width/Mb.height,u_fade_change:za.options.fadeDuration?za.symbolFadeChange:1,u_matrix:Na,u_label_plane_matrix:Xa,u_coord_matrix:mb,u_is_text:+Cb,u_pitch_with_map:+ja,u_texsize:Kb,u_texture:0}},rj=function(Z,da,aa,ja,za,Na,Xa,mb,Cb,Kb,Mb){var pc=za.transform;return a.extend(Xj(Z,da,aa,ja,za,Na,Xa,mb,Cb,Kb),{u_gamma_scale:ja?Math.cos(pc._pitch)*pc.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+Mb})},qi=function(Z,
da,aa,ja,za,Na,Xa,mb,Cb,Kb){return a.extend(rj(Z,da,aa,ja,za,Na,Xa,mb,!0,Cb,!0),{u_texsize_icon:Kb,u_texture_icon:1})},Ak=function(Z,da,aa,ja,za,Na){return a.extend(function(Xa,mb,Cb,Kb){var Mb=Cb.imageManager.getPattern(Xa.from.toString());Xa=Cb.imageManager.getPattern(Xa.to.toString());var pc=Cb.imageManager.getPixelSize(),rc=Math.pow(2,Kb.tileID.overscaledZ),hc=Kb.tileSize*Math.pow(2,Cb.transform.tileZoom)/rc;rc=hc*(Kb.tileID.canonical.x+Kb.tileID.wrap*rc);hc*=Kb.tileID.canonical.y;return{u_image:0,
u_pattern_tl_a:Mb.tl,u_pattern_br_a:Mb.br,u_pattern_tl_b:Xa.tl,u_pattern_br_b:Xa.br,u_texsize:[pc.width,pc.height],u_mix:mb.t,u_pattern_size_a:Mb.displaySize,u_pattern_size_b:Xa.displaySize,u_scale_a:mb.fromScale,u_scale_b:mb.toScale,u_tile_units_to_pixels:1/U(Kb,1,Cb.transform.tileZoom),u_pixel_coord_upper:[rc>>16,hc>>16],u_pixel_coord_lower:[65535&rc,65535&hc]}}(ja,Na,aa,za),{u_matrix:Z,u_opacity:da})},Lh={fillExtrusion:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_lightpos:new a.Uniform3f(Z,
da.u_lightpos),u_lightintensity:new a.Uniform1f(Z,da.u_lightintensity),u_lightcolor:new a.Uniform3f(Z,da.u_lightcolor),u_vertical_gradient:new a.Uniform1f(Z,da.u_vertical_gradient),u_opacity:new a.Uniform1f(Z,da.u_opacity)}},fillExtrusionPattern:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_lightpos:new a.Uniform3f(Z,da.u_lightpos),u_lightintensity:new a.Uniform1f(Z,da.u_lightintensity),u_lightcolor:new a.Uniform3f(Z,da.u_lightcolor),u_vertical_gradient:new a.Uniform1f(Z,da.u_vertical_gradient),
u_height_factor:new a.Uniform1f(Z,da.u_height_factor),u_image:new a.Uniform1i(Z,da.u_image),u_texsize:new a.Uniform2f(Z,da.u_texsize),u_pixel_coord_upper:new a.Uniform2f(Z,da.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Z,da.u_pixel_coord_lower),u_scale:new a.Uniform3f(Z,da.u_scale),u_fade:new a.Uniform1f(Z,da.u_fade),u_opacity:new a.Uniform1f(Z,da.u_opacity)}},fill:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix)}},fillPattern:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,
da.u_matrix),u_image:new a.Uniform1i(Z,da.u_image),u_texsize:new a.Uniform2f(Z,da.u_texsize),u_pixel_coord_upper:new a.Uniform2f(Z,da.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Z,da.u_pixel_coord_lower),u_scale:new a.Uniform3f(Z,da.u_scale),u_fade:new a.Uniform1f(Z,da.u_fade)}},fillOutline:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_world:new a.Uniform2f(Z,da.u_world)}},fillOutlinePattern:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_world:new a.Uniform2f(Z,
da.u_world),u_image:new a.Uniform1i(Z,da.u_image),u_texsize:new a.Uniform2f(Z,da.u_texsize),u_pixel_coord_upper:new a.Uniform2f(Z,da.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Z,da.u_pixel_coord_lower),u_scale:new a.Uniform3f(Z,da.u_scale),u_fade:new a.Uniform1f(Z,da.u_fade)}},circle:function(Z,da){return{u_camera_to_center_distance:new a.Uniform1f(Z,da.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(Z,da.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(Z,da.u_pitch_with_map),
u_extrude_scale:new a.Uniform2f(Z,da.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(Z,da.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(Z,da.u_matrix)}},collisionBox:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_camera_to_center_distance:new a.Uniform1f(Z,da.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(Z,da.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(Z,da.u_extrude_scale),u_overscale_factor:new a.Uniform1f(Z,da.u_overscale_factor)}},
collisionCircle:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_inv_matrix:new a.UniformMatrix4f(Z,da.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(Z,da.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(Z,da.u_viewport_size)}},debug:function(Z,da){return{u_color:new a.UniformColor(Z,da.u_color),u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_overlay:new a.Uniform1i(Z,da.u_overlay),u_overlay_scale:new a.Uniform1f(Z,da.u_overlay_scale)}},clippingMask:function(Z,
da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix)}},heatmap:function(Z,da){return{u_extrude_scale:new a.Uniform1f(Z,da.u_extrude_scale),u_intensity:new a.Uniform1f(Z,da.u_intensity),u_matrix:new a.UniformMatrix4f(Z,da.u_matrix)}},heatmapTexture:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_world:new a.Uniform2f(Z,da.u_world),u_image:new a.Uniform1i(Z,da.u_image),u_color_ramp:new a.Uniform1i(Z,da.u_color_ramp),u_opacity:new a.Uniform1f(Z,da.u_opacity)}},hillshade:function(Z,
da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_image:new a.Uniform1i(Z,da.u_image),u_latrange:new a.Uniform2f(Z,da.u_latrange),u_light:new a.Uniform2f(Z,da.u_light),u_shadow:new a.UniformColor(Z,da.u_shadow),u_highlight:new a.UniformColor(Z,da.u_highlight),u_accent:new a.UniformColor(Z,da.u_accent)}},hillshadePrepare:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_image:new a.Uniform1i(Z,da.u_image),u_dimension:new a.Uniform2f(Z,da.u_dimension),u_zoom:new a.Uniform1f(Z,
da.u_zoom),u_maxzoom:new a.Uniform1f(Z,da.u_maxzoom),u_unpack:new a.Uniform4f(Z,da.u_unpack)}},line:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_ratio:new a.Uniform1f(Z,da.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Z,da.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(Z,da.u_units_to_pixels)}},lineGradient:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_ratio:new a.Uniform1f(Z,da.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Z,da.u_device_pixel_ratio),
u_units_to_pixels:new a.Uniform2f(Z,da.u_units_to_pixels),u_image:new a.Uniform1i(Z,da.u_image)}},linePattern:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_texsize:new a.Uniform2f(Z,da.u_texsize),u_ratio:new a.Uniform1f(Z,da.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Z,da.u_device_pixel_ratio),u_image:new a.Uniform1i(Z,da.u_image),u_units_to_pixels:new a.Uniform2f(Z,da.u_units_to_pixels),u_scale:new a.Uniform3f(Z,da.u_scale),u_fade:new a.Uniform1f(Z,da.u_fade)}},lineSDF:function(Z,
da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_ratio:new a.Uniform1f(Z,da.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Z,da.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(Z,da.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(Z,da.u_patternscale_a),u_patternscale_b:new a.Uniform2f(Z,da.u_patternscale_b),u_sdfgamma:new a.Uniform1f(Z,da.u_sdfgamma),u_image:new a.Uniform1i(Z,da.u_image),u_tex_y_a:new a.Uniform1f(Z,da.u_tex_y_a),u_tex_y_b:new a.Uniform1f(Z,da.u_tex_y_b),u_mix:new a.Uniform1f(Z,
da.u_mix)}},raster:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_tl_parent:new a.Uniform2f(Z,da.u_tl_parent),u_scale_parent:new a.Uniform1f(Z,da.u_scale_parent),u_buffer_scale:new a.Uniform1f(Z,da.u_buffer_scale),u_fade_t:new a.Uniform1f(Z,da.u_fade_t),u_opacity:new a.Uniform1f(Z,da.u_opacity),u_image0:new a.Uniform1i(Z,da.u_image0),u_image1:new a.Uniform1i(Z,da.u_image1),u_brightness_low:new a.Uniform1f(Z,da.u_brightness_low),u_brightness_high:new a.Uniform1f(Z,da.u_brightness_high),
u_saturation_factor:new a.Uniform1f(Z,da.u_saturation_factor),u_contrast_factor:new a.Uniform1f(Z,da.u_contrast_factor),u_spin_weights:new a.Uniform3f(Z,da.u_spin_weights)}},symbolIcon:function(Z,da){return{u_is_size_zoom_constant:new a.Uniform1i(Z,da.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(Z,da.u_is_size_feature_constant),u_size_t:new a.Uniform1f(Z,da.u_size_t),u_size:new a.Uniform1f(Z,da.u_size),u_camera_to_center_distance:new a.Uniform1f(Z,da.u_camera_to_center_distance),
u_pitch:new a.Uniform1f(Z,da.u_pitch),u_rotate_symbol:new a.Uniform1i(Z,da.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(Z,da.u_aspect_ratio),u_fade_change:new a.Uniform1f(Z,da.u_fade_change),u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(Z,da.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(Z,da.u_coord_matrix),u_is_text:new a.Uniform1i(Z,da.u_is_text),u_pitch_with_map:new a.Uniform1i(Z,da.u_pitch_with_map),u_texsize:new a.Uniform2f(Z,da.u_texsize),
u_texture:new a.Uniform1i(Z,da.u_texture)}},symbolSDF:function(Z,da){return{u_is_size_zoom_constant:new a.Uniform1i(Z,da.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(Z,da.u_is_size_feature_constant),u_size_t:new a.Uniform1f(Z,da.u_size_t),u_size:new a.Uniform1f(Z,da.u_size),u_camera_to_center_distance:new a.Uniform1f(Z,da.u_camera_to_center_distance),u_pitch:new a.Uniform1f(Z,da.u_pitch),u_rotate_symbol:new a.Uniform1i(Z,da.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(Z,
da.u_aspect_ratio),u_fade_change:new a.Uniform1f(Z,da.u_fade_change),u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(Z,da.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(Z,da.u_coord_matrix),u_is_text:new a.Uniform1i(Z,da.u_is_text),u_pitch_with_map:new a.Uniform1i(Z,da.u_pitch_with_map),u_texsize:new a.Uniform2f(Z,da.u_texsize),u_texture:new a.Uniform1i(Z,da.u_texture),u_gamma_scale:new a.Uniform1f(Z,da.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(Z,
da.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(Z,da.u_is_halo)}},symbolTextAndIcon:function(Z,da){return{u_is_size_zoom_constant:new a.Uniform1i(Z,da.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(Z,da.u_is_size_feature_constant),u_size_t:new a.Uniform1f(Z,da.u_size_t),u_size:new a.Uniform1f(Z,da.u_size),u_camera_to_center_distance:new a.Uniform1f(Z,da.u_camera_to_center_distance),u_pitch:new a.Uniform1f(Z,da.u_pitch),u_rotate_symbol:new a.Uniform1i(Z,da.u_rotate_symbol),
u_aspect_ratio:new a.Uniform1f(Z,da.u_aspect_ratio),u_fade_change:new a.Uniform1f(Z,da.u_fade_change),u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(Z,da.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(Z,da.u_coord_matrix),u_is_text:new a.Uniform1i(Z,da.u_is_text),u_pitch_with_map:new a.Uniform1i(Z,da.u_pitch_with_map),u_texsize:new a.Uniform2f(Z,da.u_texsize),u_texsize_icon:new a.Uniform2f(Z,da.u_texsize_icon),u_texture:new a.Uniform1i(Z,da.u_texture),
u_texture_icon:new a.Uniform1i(Z,da.u_texture_icon),u_gamma_scale:new a.Uniform1f(Z,da.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(Z,da.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(Z,da.u_is_halo)}},background:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_opacity:new a.Uniform1f(Z,da.u_opacity),u_color:new a.UniformColor(Z,da.u_color)}},backgroundPattern:function(Z,da){return{u_matrix:new a.UniformMatrix4f(Z,da.u_matrix),u_opacity:new a.Uniform1f(Z,da.u_opacity),
u_image:new a.Uniform1i(Z,da.u_image),u_pattern_tl_a:new a.Uniform2f(Z,da.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(Z,da.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(Z,da.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(Z,da.u_pattern_br_b),u_texsize:new a.Uniform2f(Z,da.u_texsize),u_mix:new a.Uniform1f(Z,da.u_mix),u_pattern_size_a:new a.Uniform2f(Z,da.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(Z,da.u_pattern_size_b),u_scale_a:new a.Uniform1f(Z,da.u_scale_a),u_scale_b:new a.Uniform1f(Z,
da.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(Z,da.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Z,da.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(Z,da.u_tile_units_to_pixels)}}},th=a.identity(new Float32Array(16)),vg=new a.Color(1,0,0,1),Yj=new a.Color(0,1,0,1),uh=new a.Color(0,0,1,1),Ti=new a.Color(1,0,1,1),sj=new a.Color(0,1,1,1),Mh={symbol:function(Z,da,aa,ja,za){if("translucent"===Z.renderPass){var Na=be.disabled,Xa=Z.colorModeForRenderPass();if(aa.layout.get("text-variable-anchor")){var mb=
aa.layout.get("text-rotation-alignment"),Cb=aa.layout.get("text-pitch-alignment"),Kb=Z.transform;mb="map"===mb;Cb="map"===Cb;for(var Mb=0;Mb<ja.length;Mb+=1){var pc=ja[Mb],rc=da.getTile(pc),hc=rc.getBucket(aa);if(hc&&hc.text&&hc.text.segments.get().length){var Ib=a.evaluateSizeForZoom(hc.textSizeData,Kb.zoom),Rb=U(rc,1,Z.transform.zoom),zc=B(pc.posMatrix,Cb,mb,Z.transform,Rb),Tc="none"!==aa.layout.get("icon-text-fit")&&hc.hasIconData();if(Ib){Rb=mb;var dd=Cb,Lc=za,kd=a.symbolSize,md=Kb;pc=pc.posMatrix;
var Nd=Math.pow(2,Kb.zoom-rc.tileID.overscaledZ),Bd=Ib,vd=Tc,Ld=hc.text.placedSymbolArray;Ib=hc.text.dynamicLayoutVertexArray;Tc=hc.icon.dynamicLayoutVertexArray;rc={};Ib.clear();for(var Zd=0;Zd<Ld.length;Zd++){var de=Ld.get(Zd),me=de.hidden||!de.crossTileID||hc.allowVerticalPlacement&&!de.placedOrientation?null:Lc[de.crossTileID];if(me){var He=new a.Point(de.anchorX,de.anchorY),Md=G(He,dd?pc:zc),Ee=.5+md.cameraToCenterDistance/Md.signedDistanceFromCamera*.5,Ce=kd.evaluateSizeForFeature(hc.textSizeData,
Bd,de)*Ee/a.ONE_EM;dd&&(Ce*=hc.tilePixelRatio/Nd);Ee=me.anchor;var ae=me.width,we=me.height,Fe=me.textOffset;me=me.textBoxScale;var Ke=a.getAnchorAlignment(Ee);ae*=-(Ke.horizontalAlign-.5);we*=-(Ke.verticalAlign-.5);Ee=a.evaluateVariableOffset(Ee,Fe);Ee=new a.Point((ae/me+Ee[0])*Ce,(we/me+Ee[1])*Ce);He=dd?G(He.add(Ee),zc).point:Md.point.add(Rb?Ee.rotate(-md.angle):Ee);Md=hc.allowVerticalPlacement&&de.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(Ee=0;Ee<de.numGlyphs;Ee++)a.addDynamicAttributes(Ib,
He,Md);vd&&0<=de.associatedIconIndex&&(rc[de.associatedIconIndex]={shiftedAnchor:He,angle:Md})}else O(de.numGlyphs,Ib)}if(vd){Tc.clear();Rb=hc.icon.placedSymbolArray;for(dd=0;dd<Rb.length;dd++)if(Lc=Rb.get(dd),Lc.hidden)O(Lc.numGlyphs,Tc);else if(kd=rc[dd])for(md=0;md<Lc.numGlyphs;md++)a.addDynamicAttributes(Tc,kd.shiftedAnchor,kd.angle);else O(Lc.numGlyphs,Tc);hc.icon.dynamicLayoutVertexBuffer.updateData(Tc)}hc.text.dynamicLayoutVertexBuffer.updateData(Ib)}}}}0!==aa.paint.get("icon-opacity").constantOr(1)&&
ha(Z,da,aa,ja,!1,aa.paint.get("icon-translate"),aa.paint.get("icon-translate-anchor"),aa.layout.get("icon-rotation-alignment"),aa.layout.get("icon-pitch-alignment"),aa.layout.get("icon-keep-upright"),Na,Xa);0!==aa.paint.get("text-opacity").constantOr(1)&&ha(Z,da,aa,ja,!0,aa.paint.get("text-translate"),aa.paint.get("text-translate-anchor"),aa.layout.get("text-rotation-alignment"),aa.layout.get("text-pitch-alignment"),aa.layout.get("text-keep-upright"),Na,Xa);da.map.showCollisionBoxes&&(fa(Z,da,aa,
ja,aa.paint.get("text-translate"),aa.paint.get("text-translate-anchor"),!0),fa(Z,da,aa,ja,aa.paint.get("icon-translate"),aa.paint.get("icon-translate-anchor"),!1))}},circle:function(Z,da,aa,ja){if("translucent"===Z.renderPass){var za=aa.paint.get("circle-opacity"),Na=aa.paint.get("circle-stroke-width"),Xa=aa.paint.get("circle-stroke-opacity"),mb=void 0!==aa.layout.get("circle-sort-key").constantOr(1);if(0!==za.constantOr(1)||0!==Na.constantOr(1)&&0!==Xa.constantOr(1)){za=Z.context;Na=za.gl;Xa=Z.depthModeForSublayer(0,
xd.ReadOnly);for(var Cb=be.disabled,Kb=Z.colorModeForRenderPass(),Mb=[],pc=0;pc<ja.length;pc++){var rc=ja[pc],hc=da.getTile(rc),Ib=hc.getBucket(aa);if(Ib){var Rb=Ib.programConfigurations.get(aa.id);rc={programConfiguration:Rb,program:Z.useProgram("circle",Rb),layoutVertexBuffer:Ib.layoutVertexBuffer,indexBuffer:Ib.indexBuffer,uniformValues:Kh(Z,rc,hc,aa)};if(mb)for(hc=0,Ib=Ib.segments.get();hc<Ib.length;hc+=1)Rb=Ib[hc],Mb.push({segments:new a.SegmentVector([Rb]),sortKey:Rb.sortKey,state:rc});else Mb.push({segments:Ib.segments,
sortKey:0,state:rc})}}mb&&Mb.sort(function(zc,Tc){return zc.sortKey-Tc.sortKey});for(da=0;da<Mb.length;da+=1)ja=Mb[da],mb=ja.state,mb.program.draw(za,Na.TRIANGLES,Xa,Cb,Kb,Hd.disabled,mb.uniformValues,aa.id,mb.layoutVertexBuffer,mb.indexBuffer,ja.segments,aa.paint,Z.transform.zoom,mb.programConfiguration)}}},heatmap:function(Z,da,aa,ja){if(0!==aa.paint.get("heatmap-opacity"))if("offscreen"===Z.renderPass){var za=Z.context,Na=za.gl,Xa=be.disabled,mb=new qe([Na.ONE,Na.ONE],a.Color.transparent,[!0,!0,
!0,!0]);!function(hc,Ib,Rb){var zc=hc.gl;hc.activeTexture.set(zc.TEXTURE1);hc.viewport.set([0,0,Ib.width/4,Ib.height/4]);var Tc=Rb.heatmapFbo;if(Tc)zc.bindTexture(zc.TEXTURE_2D,Tc.colorAttachment.get()),hc.bindFramebuffer.set(Tc.framebuffer);else{var dd=zc.createTexture();zc.bindTexture(zc.TEXTURE_2D,dd);zc.texParameteri(zc.TEXTURE_2D,zc.TEXTURE_WRAP_S,zc.CLAMP_TO_EDGE);zc.texParameteri(zc.TEXTURE_2D,zc.TEXTURE_WRAP_T,zc.CLAMP_TO_EDGE);zc.texParameteri(zc.TEXTURE_2D,zc.TEXTURE_MIN_FILTER,zc.LINEAR);
zc.texParameteri(zc.TEXTURE_2D,zc.TEXTURE_MAG_FILTER,zc.LINEAR);Rb=Tc=Rb.heatmapFbo=hc.createFramebuffer(Ib.width/4,Ib.height/4,!1);zc=hc.gl;zc.texImage2D(zc.TEXTURE_2D,0,zc.RGBA,Ib.width/4,Ib.height/4,0,zc.RGBA,hc.extRenderToTextureHalfFloat?hc.extTextureHalfFloat.HALF_FLOAT_OES:zc.UNSIGNED_BYTE,null);Rb.colorAttachment.set(dd)}}(za,Z,aa);za.clear({color:a.Color.transparent});for(var Cb=0;Cb<ja.length;Cb++){var Kb=ja[Cb];if(!da.hasRenderableParent(Kb)){var Mb=da.getTile(Kb),pc=Mb.getBucket(aa);if(pc){var rc=
pc.programConfigurations.get(aa.id);Z.useProgram("heatmap",rc).draw(za,Na.TRIANGLES,xd.disabled,Xa,mb,Hd.disabled,pj(Kb.posMatrix,Mb,Z.transform.zoom,aa.paint.get("heatmap-intensity")),aa.id,pc.layoutVertexBuffer,pc.indexBuffer,pc.segments,aa.paint,Z.transform.zoom,rc)}}}za.viewport.set([0,0,Z.width,Z.height])}else"translucent"===Z.renderPass&&(Z.context.setColorMode(Z.colorModeForRenderPass()),function(hc,Ib){var Rb=hc.context,zc=Rb.gl,Tc=Ib.heatmapFbo;Tc&&(Rb.activeTexture.set(zc.TEXTURE0),zc.bindTexture(zc.TEXTURE_2D,
Tc.colorAttachment.get()),Rb.activeTexture.set(zc.TEXTURE1),(Tc=Ib.colorRampTexture)||(Tc=Ib.colorRampTexture=new a.Texture(Rb,Ib.colorRamp,zc.RGBA)),Tc.bind(zc.LINEAR,zc.CLAMP_TO_EDGE),hc.useProgram("heatmapTexture").draw(Rb,zc.TRIANGLES,xd.disabled,be.disabled,hc.colorModeForRenderPass(),Hd.disabled,function(dd,Lc,kd,md){kd=a.create();a.ortho(kd,0,dd.width,dd.height,0,0,1);dd=dd.context.gl;return{u_matrix:kd,u_world:[dd.drawingBufferWidth,dd.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Lc.paint.get("heatmap-opacity")}}(hc,
Ib),Ib.id,hc.viewportBuffer,hc.quadTriangleIndexBuffer,hc.viewportSegments,Ib.paint,hc.transform.zoom))}(Z,aa))},line:function(Z,da,aa,ja){if("translucent"===Z.renderPass){var za=aa.paint.get("line-opacity"),Na=aa.paint.get("line-width");if(0!==za.constantOr(1)&&0!==Na.constantOr(1)){za=Z.depthModeForSublayer(0,xd.ReadOnly);Na=Z.colorModeForRenderPass();var Xa=aa.paint.get("line-dasharray"),mb=aa.paint.get("line-pattern"),Cb=mb.constantOr(1),Kb=aa.paint.get("line-gradient"),Mb=aa.getCrossfadeParameters(),
pc=Cb?"linePattern":Xa?"lineSDF":Kb?"lineGradient":"line",rc=Z.context,hc=rc.gl,Ib=!0;if(Kb){rc.activeTexture.set(hc.TEXTURE0);var Rb=aa.gradientTexture;if(!aa.gradient)return;Rb||(Rb=aa.gradientTexture=new a.Texture(rc,aa.gradient,hc.RGBA));Rb.bind(hc.LINEAR,hc.CLAMP_TO_EDGE)}for(Rb=0;Rb<ja.length;Rb+=1){var zc=ja[Rb],Tc=da.getTile(zc);if(!Cb||Tc.patternsLoaded()){var dd=Tc.getBucket(aa);if(dd){var Lc=dd.programConfigurations.get(aa.id),kd=Z.context.program.get(),md=Z.useProgram(pc,Lc);Ib=Ib||md.program!==
kd;var Nd=mb.constantOr(null);if(Nd&&Tc.imageAtlas){var Bd=Tc.imageAtlas;kd=Bd.patternPositions[Nd.to.toString()];Nd=Bd.patternPositions[Nd.from.toString()];kd&&Nd&&Lc.setConstantPatternPositions(kd,Nd)}if(Cb){kd=Z;Nd=Tc;Bd=aa;var vd=Mb,Ld=kd.transform,Zd=1/U(Nd,1,Ld.tileZoom);kd={u_matrix:ia(kd,Nd,Bd),u_texsize:Nd.imageAtlasTexture.size,u_ratio:1/U(Nd,1,Ld.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[Zd,vd.fromScale,vd.toScale],u_fade:vd.t,u_units_to_pixels:[1/Ld.pixelsToGLUnits[0],
1/Ld.pixelsToGLUnits[1]]}}else if(Xa){kd=Z;Nd=Tc;Bd=aa;var de=Xa;vd=Mb;Ld=kd.lineAtlas;Zd=1/U(Nd,1,kd.transform.tileZoom);var me="round"===Bd.layout.get("line-cap"),He=Ld.getDash(de.from,me);de=Ld.getDash(de.to,me);me=He.width*vd.fromScale;var Md=de.width*vd.toScale;kd=a.extend(qj(kd,Nd,Bd),{u_patternscale_a:[Zd/me,-He.height/2],u_patternscale_b:[Zd/Md,-de.height/2],u_sdfgamma:Ld.width/(256*Math.min(me,Md)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:He.y,u_tex_y_b:de.y,u_mix:vd.t})}else kd=
Kb?a.extend(qj(Z,Tc,aa),{u_image:0}):qj(Z,Tc,aa);Cb?(rc.activeTexture.set(hc.TEXTURE0),Tc.imageAtlasTexture.bind(hc.LINEAR,hc.CLAMP_TO_EDGE),Lc.updatePaintBuffers(Mb)):Xa&&(Ib||Z.lineAtlas.dirty)&&(rc.activeTexture.set(hc.TEXTURE0),Z.lineAtlas.bind(rc));md.draw(rc,hc.TRIANGLES,za,Z.stencilModeForClipping(zc),Na,Hd.disabled,kd,aa.id,dd.layoutVertexBuffer,dd.indexBuffer,dd.segments,aa.paint,Z.transform.zoom,Lc);Ib=!1}}}}}},fill:function(Z,da,aa,ja){var za=aa.paint.get("fill-color"),Na=aa.paint.get("fill-opacity");
if(0!==Na.constantOr(1)){var Xa=Z.colorModeForRenderPass(),mb=aa.paint.get("fill-pattern");za=Z.opaquePassEnabledForLayer()&&!mb.constantOr(1)&&1===za.constantOr(a.Color.transparent).a&&1===Na.constantOr(0)?"opaque":"translucent";Z.renderPass===za&&(za=Z.depthModeForSublayer(1,"opaque"===Z.renderPass?xd.ReadWrite:xd.ReadOnly),pa(Z,da,aa,ja,za,Xa,!1));"translucent"===Z.renderPass&&aa.paint.get("fill-antialias")&&(za=Z.depthModeForSublayer(aa.getPaintProperty("fill-outline-color")?2:0,xd.ReadOnly),
pa(Z,da,aa,ja,za,Xa,!0))}},"fill-extrusion":function(Z,da,aa,ja){var za=aa.paint.get("fill-extrusion-opacity");if(0!==za&&"translucent"===Z.renderPass){var Na=new xd(Z.context.gl.LEQUAL,xd.ReadWrite,Z.depthRangeFor3D);1!==za||aa.paint.get("fill-extrusion-pattern").constantOr(1)?(ra(Z,da,aa,ja,Na,be.disabled,qe.disabled),ra(Z,da,aa,ja,Na,Z.stencilModeFor3D(),Z.colorModeForRenderPass())):(za=Z.colorModeForRenderPass(),ra(Z,da,aa,ja,Na,be.disabled,za))}},hillshade:function(Z,da,aa,ja){if("offscreen"===
Z.renderPass||"translucent"===Z.renderPass){var za=Z.context,Na=da.getSource().maxzoom,Xa=Z.depthModeForSublayer(0,xd.ReadOnly),mb=Z.colorModeForRenderPass(),Cb="translucent"===Z.renderPass?Z.stencilConfigForOverlap(ja):[{},ja];ja=Cb[0];var Kb=0;for(Cb=Cb[1];Kb<Cb.length;Kb+=1){var Mb=Cb[Kb],pc=da.getTile(Mb);if(pc.needsHillshadePrepare&&"offscreen"===Z.renderPass)ta(Z,pc,aa,Na,Xa,be.disabled,mb);else if("translucent"===Z.renderPass){var rc=void 0,hc=void 0,Ib=void 0,Rb=Z;var zc=pc;pc=aa;var Tc=Xa;
Mb=ja[Mb.overscaledZ];var dd=mb,Lc=Rb.context,kd=Lc.gl,md=zc.fbo;if(md){var Nd=Rb.useProgram("hillshade");Lc.activeTexture.set(kd.TEXTURE0);kd.bindTexture(kd.TEXTURE_2D,md.colorAttachment.get());md=pc.paint.get("hillshade-shadow-color");var Bd=pc.paint.get("hillshade-highlight-color"),vd=pc.paint.get("hillshade-accent-color"),Ld=pc.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===pc.paint.get("hillshade-illumination-anchor")&&(Ld-=Rb.transform.angle);var Zd=!Rb.options.moving;
zc={u_matrix:Rb.transform.calculatePosMatrix(zc.tileID.toUnwrapped(),Zd),u_image:0,u_latrange:(Ib=zc.tileID,hc=Math.pow(2,Ib.canonical.z),rc=Ib.canonical.y,[(new a.MercatorCoordinate(0,rc/hc)).toLngLat().lat,(new a.MercatorCoordinate(0,(rc+1)/hc)).toLngLat().lat]),u_light:[pc.paint.get("hillshade-exaggeration"),Ld],u_shadow:md,u_highlight:Bd,u_accent:vd};Nd.draw(Lc,kd.TRIANGLES,Tc,Mb,dd,Hd.disabled,zc,pc.id,Rb.rasterBoundsBuffer,Rb.quadTriangleIndexBuffer,Rb.rasterBoundsSegments)}}}za.viewport.set([0,
0,Z.width,Z.height])}},raster:function(Z,da,aa,ja){if("translucent"===Z.renderPass&&0!==aa.paint.get("raster-opacity")&&ja.length){var za=Z.context,Na=za.gl,Xa=da.getSource(),mb=Z.useProgram("raster"),Cb=Z.colorModeForRenderPass(),Kb=Xa instanceof Qb?[{},ja]:Z.stencilConfigForOverlap(ja);ja=Kb[0];Kb=Kb[1];for(var Mb=Kb[Kb.length-1].overscaledZ,pc=!Z.options.moving,rc=0;rc<Kb.length;rc+=1){var hc=Kb[rc],Ib=Z.depthModeForSublayer(hc.overscaledZ-Mb,1===aa.paint.get("raster-opacity")?xd.ReadWrite:xd.ReadOnly,
Na.LESS),Rb=da.getTile(hc),zc=Z.transform.calculatePosMatrix(hc.toUnwrapped(),pc);Rb.registerFadeDuration(aa.paint.get("raster-fade-duration"));var Tc=da.findLoadedParent(hc,0);var dd=Rb,Lc=Tc,kd=da,md=Z.transform;var Nd=aa.paint.get("raster-fade-duration");if(0<Nd){var Bd=a.browser.now(),vd=(Bd-dd.timeAdded)/Nd;Nd=Lc?(Bd-Lc.timeAdded)/Nd:-1;kd=kd.getSource();md=md.coveringZoomLevel({tileSize:kd.tileSize,roundZoom:kd.roundZoom});md=(md=!Lc||Math.abs(Lc.tileID.overscaledZ-md)>Math.abs(dd.tileID.overscaledZ-
md))&&dd.refreshedUponExpiration?1:a.clamp(md?vd:1-Nd,0,1);Nd=(dd.refreshedUponExpiration&&1<=vd&&(dd.refreshedUponExpiration=!1),Lc?{opacity:1,mix:1-md}:{opacity:md,mix:0})}else Nd={opacity:1,mix:0};vd=Lc=void 0;dd="nearest"===aa.paint.get("raster-resampling")?Na.NEAREST:Na.LINEAR;za.activeTexture.set(Na.TEXTURE0);Rb.texture.bind(dd,Na.CLAMP_TO_EDGE,Na.LINEAR_MIPMAP_NEAREST);za.activeTexture.set(Na.TEXTURE1);Tc?(Tc.texture.bind(dd,Na.CLAMP_TO_EDGE,Na.LINEAR_MIPMAP_NEAREST),Lc=Math.pow(2,Tc.tileID.overscaledZ-
Rb.tileID.overscaledZ),vd=[Rb.tileID.canonical.x*Lc%1,Rb.tileID.canonical.y*Lc%1]):Rb.texture.bind(dd,Na.CLAMP_TO_EDGE,Na.LINEAR_MIPMAP_NEAREST);Tc=md=void 0;dd=aa;Rb=vd||[0,0];Lc=Lc||1;vd=Nd.mix;Nd=Nd.opacity*dd.paint.get("raster-opacity");kd=dd.paint.get("raster-brightness-min");Bd=dd.paint.get("raster-brightness-max");var Ld=(md=dd.paint.get("raster-saturation"),0<md?1-1/(1.001-md):-md);md=(Tc=dd.paint.get("raster-contrast"),0<Tc?1/(1-Tc):1+Tc);dd=dd.paint.get("raster-hue-rotate");dd*=Math.PI/
180;Tc=Math.sin(dd);dd=Math.cos(dd);zc={u_matrix:zc,u_tl_parent:Rb,u_scale_parent:Lc,u_buffer_scale:1,u_fade_t:vd,u_opacity:Nd,u_image0:0,u_image1:1,u_brightness_low:kd,u_brightness_high:Bd,u_saturation_factor:Ld,u_contrast_factor:md,u_spin_weights:[(2*dd+1)/3,(-Math.sqrt(3)*Tc-dd+1)/3,(Math.sqrt(3)*Tc-dd+1)/3]};Xa instanceof Qb?mb.draw(za,Na.TRIANGLES,Ib,be.disabled,Cb,Hd.disabled,zc,aa.id,Xa.boundsBuffer,Z.quadTriangleIndexBuffer,Xa.boundsSegments):mb.draw(za,Na.TRIANGLES,Ib,ja[hc.overscaledZ],
Cb,Hd.disabled,zc,aa.id,Z.rasterBoundsBuffer,Z.quadTriangleIndexBuffer,Z.rasterBoundsSegments)}}},background:function(Z,da,aa){da=aa.paint.get("background-color");var ja=aa.paint.get("background-opacity");if(0!==ja){var za=Z.context,Na=za.gl,Xa=Z.transform,mb=Xa.tileSize,Cb=aa.paint.get("background-pattern");if(!Z.isPatternMissing(Cb)){var Kb=!Cb&&1===da.a&&1===ja&&Z.opaquePassEnabledForLayer()?"opaque":"translucent";if(Z.renderPass===Kb){var Mb=be.disabled;Kb=Z.depthModeForSublayer(0,"opaque"===
Kb?xd.ReadWrite:xd.ReadOnly);var pc=Z.colorModeForRenderPass(),rc=Z.useProgram(Cb?"backgroundPattern":"background");Xa=Xa.coveringTiles({tileSize:mb});Cb&&(za.activeTexture.set(Na.TEXTURE0),Z.imageManager.bind(Z.context));for(var hc=aa.getCrossfadeParameters(),Ib=0;Ib<Xa.length;Ib+=1){var Rb=Xa[Ib],zc=Z.transform.calculatePosMatrix(Rb.toUnwrapped());Rb=Cb?Ak(zc,ja,Z,Cb,{tileID:Rb,tileSize:mb},hc):{u_matrix:zc,u_opacity:ja,u_color:da};rc.draw(za,Na.TRIANGLES,Kb,Mb,pc,Hd.disabled,Rb,aa.id,Z.tileExtentBuffer,
Z.quadTriangleIndexBuffer,Z.tileExtentSegments)}}}}},debug:function(Z,da,aa){for(var ja=0;ja<aa.length;ja++){var za=Z,Na=da,Xa=aa[ja],mb=za.context,Cb=mb.gl,Kb=Xa.posMatrix,Mb=za.useProgram("debug"),pc=xd.disabled,rc=be.disabled,hc=za.colorModeForRenderPass();mb.activeTexture.set(Cb.TEXTURE0);za.emptyTexture.bind(Cb.LINEAR,Cb.CLAMP_TO_EDGE);Mb.draw(mb,Cb.LINE_STRIP,pc,rc,hc,Hd.disabled,oj(Kb,a.Color.red),"$debug",za.debugBuffer,za.tileBorderIndexBuffer,za.debugSegments);hc=Na.getTileByID(Xa.key).latestRawTileData;
hc=Math.floor((hc&&hc.byteLength||0)/1024);Na=Na.getTile(Xa).tileSize;Na=512/Math.min(Na,512)*(Xa.overscaledZ/za.transform.zoom)*.5;var Ib=Xa.canonical.toString();Xa.overscaledZ!==Xa.canonical.z&&(Ib+=" \x3d\x3e "+Xa.overscaledZ);Xa=Ib+" "+hc+"kb";za.initDebugOverlayCanvas();hc=za.debugOverlayCanvas;Ib=za.context.gl;var Rb=za.debugOverlayCanvas.getContext("2d");Rb.clearRect(0,0,hc.width,hc.height);Rb.shadowColor="white";Rb.shadowBlur=2;Rb.lineWidth=1.5;Rb.strokeStyle="white";Rb.textBaseline="top";
Rb.font="bold 36px Open Sans, sans-serif";Rb.fillText(Xa,5,5);Rb.strokeText(Xa,5,5);za.debugOverlayTexture.update(hc);za.debugOverlayTexture.bind(Ib.LINEAR,Ib.CLAMP_TO_EDGE);Mb.draw(mb,Cb.TRIANGLES,pc,rc,qe.alphaBlended,Hd.disabled,oj(Kb,a.Color.transparent,Na),"$debug",za.debugBuffer,za.quadTriangleIndexBuffer,za.debugSegments)}},custom:function(Z,da,aa){da=Z.context;aa=aa.implementation;if("offscreen"===Z.renderPass){var ja=aa.prerender;ja&&(Z.setCustomLayerDefaults(),da.setColorMode(Z.colorModeForRenderPass()),
ja.call(aa,da.gl,Z.transform.customLayerMatrix()),da.setDirty(),Z.setBaseState())}else"translucent"===Z.renderPass&&(Z.setCustomLayerDefaults(),da.setColorMode(Z.colorModeForRenderPass()),da.setStencilMode(be.disabled),ja="3d"===aa.renderingMode?new xd(Z.context.gl.LEQUAL,xd.ReadWrite,Z.depthRangeFor3D):Z.depthModeForSublayer(0,xd.ReadOnly),da.setDepthMode(ja),aa.render(da.gl,Z.transform.customLayerMatrix()),da.setDirty(),Z.setBaseState(),da.bindFramebuffer.set(null))}},Se=function(Z,da){this.context=
new ke(Z);this.transform=da;this._tileTextures={};this.setup();this.numSublayers=Ge.maxUnderzooming+Ge.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.crossTileSymbolIndex=new oc;this.gpuTimers={}};Se.prototype.resize=function(Z,da){if(this.width=Z*a.browser.devicePixelRatio,this.height=da*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(Z=0,da=this.style._order;Z<da.length;Z+=1)this.style._layers[da[Z]].resize()};Se.prototype.setup=function(){var Z=
this.context,da=new a.StructArrayLayout2i4;da.emplaceBack(0,0);da.emplaceBack(a.EXTENT,0);da.emplaceBack(0,a.EXTENT);da.emplaceBack(a.EXTENT,a.EXTENT);this.tileExtentBuffer=Z.createVertexBuffer(da,Dd.members);this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);da=new a.StructArrayLayout2i4;da.emplaceBack(0,0);da.emplaceBack(a.EXTENT,0);da.emplaceBack(0,a.EXTENT);da.emplaceBack(a.EXTENT,a.EXTENT);this.debugBuffer=Z.createVertexBuffer(da,Dd.members);this.debugSegments=a.SegmentVector.simpleSegment(0,
0,4,5);da=new a.StructArrayLayout4i8;da.emplaceBack(0,0,0,0);da.emplaceBack(a.EXTENT,0,a.EXTENT,0);da.emplaceBack(0,a.EXTENT,0,a.EXTENT);da.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT);this.rasterBoundsBuffer=Z.createVertexBuffer(da,Bb.members);this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);da=new a.StructArrayLayout2i4;da.emplaceBack(0,0);da.emplaceBack(1,0);da.emplaceBack(0,1);da.emplaceBack(1,1);this.viewportBuffer=Z.createVertexBuffer(da,Dd.members);this.viewportSegments=
a.SegmentVector.simpleSegment(0,0,4,2);da=new a.StructArrayLayout1ui2;da.emplaceBack(0);da.emplaceBack(1);da.emplaceBack(3);da.emplaceBack(2);da.emplaceBack(0);this.tileBorderIndexBuffer=Z.createIndexBuffer(da);da=new a.StructArrayLayout3ui6;da.emplaceBack(0,1,2);da.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=Z.createIndexBuffer(da);this.emptyTexture=new a.Texture(Z,{width:1,height:1,data:new Uint8Array([0,0,0,0])},Z.gl.RGBA);Z=this.context.gl;this.stencilClearMode=new be({func:Z.ALWAYS,mask:0},
0,255,Z.ZERO,Z.ZERO,Z.ZERO)};Se.prototype.clearStencil=function(){var Z=this.context,da=Z.gl;this.nextStencilID=1;this.currentStencilSource=void 0;var aa=a.create();a.ortho(aa,0,this.width,this.height,0,0,1);a.scale(aa,aa,[da.drawingBufferWidth,da.drawingBufferHeight,0]);this.useProgram("clippingMask").draw(Z,da.TRIANGLES,xd.disabled,this.stencilClearMode,qe.disabled,Hd.disabled,{u_matrix:aa},"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)};Se.prototype._renderTileClippingMasks=
function(Z,da){if(this.currentStencilSource!==Z.source&&Z.isTileClipped()&&da&&da.length){this.currentStencilSource=Z.source;Z=this.context;var aa=Z.gl;256<this.nextStencilID+da.length&&this.clearStencil();Z.setColorMode(qe.disabled);Z.setDepthMode(xd.disabled);var ja=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var za=0;za<da.length;za+=1){var Na=da[za],Xa=this._tileClippingMaskIDs[Na.key]=this.nextStencilID++;ja.draw(Z,aa.TRIANGLES,xd.disabled,new be({func:aa.ALWAYS,mask:0},
Xa,255,aa.KEEP,aa.KEEP,aa.REPLACE),qe.disabled,Hd.disabled,{u_matrix:Na.posMatrix},"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}};Se.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0;256<this.nextStencilID+1&&this.clearStencil();var Z=this.nextStencilID++,da=this.context.gl;return new be({func:da.NOTEQUAL,mask:255},Z,255,da.KEEP,da.KEEP,da.REPLACE)};Se.prototype.stencilModeForClipping=function(Z){var da=this.context.gl;return new be({func:da.EQUAL,
mask:255},this._tileClippingMaskIDs[Z.key],0,da.KEEP,da.KEEP,da.REPLACE)};Se.prototype.stencilConfigForOverlap=function(Z){var da=this.context.gl;Z=Z.sort(function(Xa,mb){return mb.overscaledZ-Xa.overscaledZ});var aa=Z[Z.length-1].overscaledZ,ja=Z[0].overscaledZ-aa+1;if(1<ja){this.currentStencilSource=void 0;256<this.nextStencilID+ja&&this.clearStencil();var za={};for(var Na=0;Na<ja;Na++)za[Na+aa]=new be({func:da.GEQUAL,mask:255},Na+this.nextStencilID,255,da.KEEP,da.KEEP,da.REPLACE);return this.nextStencilID+=
ja,[za,Z]}return[(za={},za[aa]=be.disabled,za),Z]};Se.prototype.colorModeForRenderPass=function(){var Z=this.context.gl;return this._showOverdrawInspector?new qe([Z.CONSTANT_COLOR,Z.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?qe.unblended:qe.alphaBlended};Se.prototype.depthModeForSublayer=function(Z,da,aa){if(!this.opaquePassEnabledForLayer())return xd.disabled;Z=1-((1+this.currentLayer)*this.numSublayers+Z)*this.depthEpsilon;return new xd(aa||this.context.gl.LEQUAL,
da,[Z,Z])};Se.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff};Se.prototype.render=function(Z,da){var aa=this;this.style=Z;this.options=da;this.lineAtlas=Z.lineAtlas;this.imageManager=Z.imageManager;this.glyphManager=Z.glyphManager;this.symbolFadeChange=Z.placement.symbolFadeChange(a.browser.now());this.imageManager.beginFrame();var ja=this.style._order,za=this.style.sourceCaches;for(Cb in za){var Na=za[Cb];Na.used&&Na.prepare(this.context)}var Xa,mb;
var Cb={};Na={};var Kb={},Mb;for(Mb in za){var pc=za[Mb];Cb[Mb]=pc.getVisibleCoordinates();Na[Mb]=Cb[Mb].slice().reverse();Kb[Mb]=pc.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(Mb=0;Mb<ja.length;Mb++)if(this.style._layers[ja[Mb]].is3D()){this.opaquePassCutoff=Mb;break}this.renderPass="offscreen";for(Mb=0;Mb<ja.length;Mb+=1)if(pc=this.style._layers[ja[Mb]],pc.hasOffscreenPass()&&!pc.isHidden(this.transform.zoom)){var rc=Na[pc.source];("custom"===pc.type||rc.length)&&this.renderLayer(this,
za[pc.source],pc,rc)}this.context.bindFramebuffer.set(null);this.context.clear({color:da.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=da.showOverdrawInspector;this.depthRangeFor3D=[0,1-(Z._order.length+2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";for(this.currentLayer=ja.length-1;0<=this.currentLayer;this.currentLayer--)Z=this.style._layers[ja[this.currentLayer]],da=za[Z.source],Mb=Cb[Z.source],this._renderTileClippingMasks(Z,
Mb),this.renderLayer(this,da,Z,Mb);this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<ja.length;this.currentLayer++)Z=this.style._layers[ja[this.currentLayer]],da=za[Z.source],Mb=("symbol"===Z.type?Kb:Na)[Z.source],this._renderTileClippingMasks(Z,Cb[Z.source]),this.renderLayer(this,da,Z,Mb);this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(hc){hc.source&&!hc.isHidden(aa.transform.zoom)&&(hc.source!==(mb&&mb.id)&&(mb=aa.style.sourceCaches[hc.source]),
(!Xa||Xa.getSource().maxzoom<mb.getSource().maxzoom)&&(Xa=mb))}),Xa&&Mh.debug(this,Xa,Xa.getVisibleCoordinates()));this.options.showPadding&&function(hc){var Ib=hc.transform.padding;oa(hc,0,hc.transform.height-(Ib.top||0)+1.5,hc.transform.width,3,vg);oa(hc,0,(Ib.bottom||0)+1.5,hc.transform.width,3,Yj);oa(hc,(Ib.left||0)-1.5,0,3,hc.transform.height,uh);oa(hc,hc.transform.width-(Ib.right||0)-1.5,0,3,hc.transform.height,Ti);var Rb=hc.transform.centerPoint;Ib=Rb.x;Rb=hc.transform.height-Rb.y;oa(hc,Ib-
1,Rb-10,2,20,sj);oa(hc,Ib-10,Rb-1,20,2,sj);!0}(this);this.context.setDefault()};Se.prototype.renderLayer=function(Z,da,aa,ja){aa.isHidden(this.transform.zoom)||("background"===aa.type||"custom"===aa.type||ja.length)&&(this.id=aa.id,this.gpuTimingStart(aa),Mh[aa.type](Z,da,aa,ja,this.style.placement.variableOffsets),this.gpuTimingEnd())};Se.prototype.gpuTimingStart=function(Z){if(this.options.gpuTiming){var da=this.context.extTimerQuery,aa=this.gpuTimers[Z.id];aa||(aa=this.gpuTimers[Z.id]={calls:0,
cpuTime:0,query:da.createQueryEXT()});aa.calls++;da.beginQueryEXT(da.TIME_ELAPSED_EXT,aa.query)}};Se.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var Z=this.context.extTimerQuery;Z.endQueryEXT(Z.TIME_ELAPSED_EXT)}};Se.prototype.collectGpuTimers=function(){var Z=this.gpuTimers;return this.gpuTimers={},Z};Se.prototype.queryGpuTimers=function(Z){var da={},aa;for(aa in Z){var ja=Z[aa],za=this.context.extTimerQuery,Na=za.getQueryObjectEXT(ja.query,za.QUERY_RESULT_EXT)/1E6;za.deleteQueryEXT(ja.query);
da[aa]=Na}return da};Se.prototype.translatePosMatrix=function(Z,da,aa,ja,za){if(!aa[0]&&!aa[1])return Z;var Na=za?"map"===ja?this.transform.angle:0:"viewport"===ja?-this.transform.angle:0;Na&&(ja=Math.sin(Na),Na=Math.cos(Na),aa=[aa[0]*Na-aa[1]*ja,aa[0]*ja+aa[1]*Na]);da=[za?aa[0]:U(da,aa[0],this.transform.zoom),za?aa[1]:U(da,aa[1],this.transform.zoom),0];aa=new Float32Array(16);return a.translate(aa,Z,da),aa};Se.prototype.saveTileTexture=function(Z){var da=this._tileTextures[Z.size[0]];da?da.push(Z):
this._tileTextures[Z.size[0]]=[Z]};Se.prototype.getTileTexture=function(Z){return(Z=this._tileTextures[Z])&&0<Z.length?Z.pop():null};Se.prototype.isPatternMissing=function(Z){if(!Z)return!1;if(!Z.from||!Z.to)return!0;var da=this.imageManager.getPattern(Z.from.toString());Z=this.imageManager.getPattern(Z.to.toString());return!da||!Z};Se.prototype.useProgram=function(Z,da){this.cache=this.cache||{};var aa=""+Z+(da?da.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[aa]||(this.cache[aa]=
new Be(this.context,oi[Z],da,Lh[Z],this._showOverdrawInspector)),this.cache[aa]};Se.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};Se.prototype.setBaseState=function(){var Z=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,0,this.width,
this.height]);this.context.blendEquation.set(Z.FUNC_ADD)};Se.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))};Se.prototype.destroy=function(){this.emptyTexture.destroy();this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Ui=
function(Z,da){this.points=Z;this.planes=da};Ui.fromInvProjectionMatrix=function(Z,da,aa){var ja=Math.pow(2,aa),za=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Na){return a.transformMat4([],Na,Z)}).map(function(Na){return a.scale$1([],Na,1/Na[3]/da*ja)});aa=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Na){var Xa=a.sub([],za[Na[0]],za[Na[1]]),mb=a.sub([],za[Na[2]],za[Na[1]]);Xa=a.normalize([],a.cross([],Xa,mb));Na=-a.dot(Xa,
za[Na[1]]);return Xa.concat(Na)});return new Ui(za,aa)};var Nh=function(Z,da){this.min=Z;this.max=da;this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Nh.prototype.quadrant=function(Z){Z=[0==Z%2,2>Z];for(var da=a.clone$2(this.min),aa=a.clone$2(this.max),ja=0;ja<Z.length;ja++)da[ja]=Z[ja]?this.min[ja]:this.center[ja],aa[ja]=Z[ja]?this.center[ja]:this.max[ja];return aa[2]=this.max[2],new Nh(da,aa)};Nh.prototype.distanceX=function(Z){return Math.max(Math.min(this.max[0],Z[0]),this.min[0])-Z[0]};
Nh.prototype.distanceY=function(Z){return Math.max(Math.min(this.max[1],Z[1]),this.min[1])-Z[1]};Nh.prototype.intersects=function(Z){for(var da=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],aa=!0,ja=0;ja<Z.planes.length;ja++){for(var za=Z.planes[ja],Na=0,Xa=0;Xa<da.length;Xa++)Na+=0<=a.dot$1(za,da[Xa]);if(0===Na)return 0;Na!==da.length&&(aa=!1)}if(aa)return 2;for(da=0;3>da;da++){aa=Number.MAX_VALUE;ja=-Number.MAX_VALUE;for(za=
0;za<Z.points.length;za++)Na=Z.points[za][da]-this.min[da],aa=Math.min(aa,Na),ja=Math.max(ja,Na);if(0>ja||aa>this.max[da]-this.min[da])return 0}return 1};var Wg=function(Z,da,aa,ja){if(void 0===Z&&(Z=0),void 0===da&&(da=0),void 0===aa&&(aa=0),void 0===ja&&(ja=0),isNaN(Z)||0>Z||isNaN(da)||0>da||isNaN(aa)||0>aa||isNaN(ja)||0>ja)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=Z;this.bottom=da;this.left=aa;this.right=ja};Wg.prototype.interpolate=
function(Z,da,aa){return null!=da.top&&null!=Z.top&&(this.top=a.number(Z.top,da.top,aa)),null!=da.bottom&&null!=Z.bottom&&(this.bottom=a.number(Z.bottom,da.bottom,aa)),null!=da.left&&null!=Z.left&&(this.left=a.number(Z.left,da.left,aa)),null!=da.right&&null!=Z.right&&(this.right=a.number(Z.right,da.right,aa)),this};Wg.prototype.getCenter=function(Z,da){Z=a.clamp((this.left+Z-this.right)/2,0,Z);da=a.clamp((this.top+da-this.bottom)/2,0,da);return new a.Point(Z,da)};Wg.prototype.equals=function(Z){return this.top===
Z.top&&this.bottom===Z.bottom&&this.left===Z.left&&this.right===Z.right};Wg.prototype.clone=function(){return new Wg(this.top,this.bottom,this.left,this.right)};Wg.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Je=function(Z,da,aa,ja,za){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===za||za;this._minZoom=Z||0;this._maxZoom=da||22;this._minPitch=null==aa?0:aa;this._maxPitch=null==ja?60:ja;this.setMaxBounds();
this.height=this.width=0;this._center=new a.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._edgeInsets=new Wg;this._posMatrixCache={};this._alignedPosMatrixCache={}},Me={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},
zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Je.prototype.clone=function(){var Z=new Je(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return Z.tileSize=this.tileSize,Z.latRange=this.latRange,Z.width=this.width,Z.height=this.height,Z._center=this._center,Z.zoom=this.zoom,Z.angle=this.angle,Z._fov=this._fov,Z._pitch=this._pitch,Z._unmodified=this._unmodified,
Z._edgeInsets=this._edgeInsets.clone(),Z._calcMatrices(),Z};Me.minZoom.get=function(){return this._minZoom};Me.minZoom.set=function(Z){this._minZoom!==Z&&(this._minZoom=Z,this.zoom=Math.max(this.zoom,Z))};Me.maxZoom.get=function(){return this._maxZoom};Me.maxZoom.set=function(Z){this._maxZoom!==Z&&(this._maxZoom=Z,this.zoom=Math.min(this.zoom,Z))};Me.minPitch.get=function(){return this._minPitch};Me.minPitch.set=function(Z){this._minPitch!==Z&&(this._minPitch=Z,this.pitch=Math.max(this.pitch,Z))};
Me.maxPitch.get=function(){return this._maxPitch};Me.maxPitch.set=function(Z){this._maxPitch!==Z&&(this._maxPitch=Z,this.pitch=Math.min(this.pitch,Z))};Me.renderWorldCopies.get=function(){return this._renderWorldCopies};Me.renderWorldCopies.set=function(Z){void 0===Z?Z=!0:null===Z&&(Z=!1);this._renderWorldCopies=Z};Me.worldSize.get=function(){return this.tileSize*this.scale};Me.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))};Me.size.get=function(){return new a.Point(this.width,
this.height)};Me.bearing.get=function(){return-this.angle/Math.PI*180};Me.bearing.set=function(Z){Z=-a.wrap(Z,-180,180)*Math.PI/180;this.angle!==Z&&(this._unmodified=!1,this.angle=Z,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};Me.pitch.get=function(){return this._pitch/Math.PI*180};Me.pitch.set=function(Z){Z=a.clamp(Z,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Z&&(this._unmodified=!1,this._pitch=Z,this._calcMatrices())};
Me.fov.get=function(){return this._fov/Math.PI*180};Me.fov.set=function(Z){Z=Math.max(.01,Math.min(60,Z));this._fov!==Z&&(this._unmodified=!1,this._fov=Z/180*Math.PI,this._calcMatrices())};Me.zoom.get=function(){return this._zoom};Me.zoom.set=function(Z){Z=Math.min(Math.max(Z,this.minZoom),this.maxZoom);this._zoom!==Z&&(this._unmodified=!1,this._zoom=Z,this.scale=this.zoomScale(Z),this.tileZoom=Math.floor(Z),this.zoomFraction=Z-this.tileZoom,this._constrain(),this._calcMatrices())};Me.center.get=
function(){return this._center};Me.center.set=function(Z){Z.lat===this._center.lat&&Z.lng===this._center.lng||(this._unmodified=!1,this._center=Z,this._constrain(),this._calcMatrices())};Me.padding.get=function(){return this._edgeInsets.toJSON()};Me.padding.set=function(Z){this._edgeInsets.equals(Z)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,Z,1),this._calcMatrices())};Me.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)};Je.prototype.isPaddingEqual=
function(Z){return this._edgeInsets.equals(Z)};Je.prototype.interpolatePadding=function(Z,da,aa){this._unmodified=!1;this._edgeInsets.interpolate(Z,da,aa);this._constrain();this._calcMatrices()};Je.prototype.coveringZoomLevel=function(Z){Z=(Z.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Z.tileSize));return Math.max(0,Z)};Je.prototype.getVisibleUnwrappedCoordinates=function(Z){var da=[new a.UnwrappedTileID(0,Z)];if(this._renderWorldCopies){var aa=this.pointCoordinate(new a.Point(0,
0)),ja=this.pointCoordinate(new a.Point(this.width,0)),za=this.pointCoordinate(new a.Point(this.width,this.height)),Na=this.pointCoordinate(new a.Point(0,this.height)),Xa=Math.floor(Math.max(aa.x,ja.x,za.x,Na.x));for(aa=Math.floor(Math.min(aa.x,ja.x,za.x,Na.x))-1;aa<=Xa+1;aa++)0!==aa&&da.push(new a.UnwrappedTileID(aa,Z))}return da};Je.prototype.coveringTiles=function(Z){var da=this.coveringZoomLevel(Z),aa=da;if(void 0!==Z.minzoom&&da<Z.minzoom)return[];void 0!==Z.maxzoom&&da>Z.maxzoom&&(da=Z.maxzoom);
var ja=a.MercatorCoordinate.fromLngLat(this.center),za=Math.pow(2,da);ja=[za*ja.x,za*ja.y,0];var Na=Ui.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,da),Xa=Z.minzoom||0;60>=this.pitch&&.1>this._edgeInsets.top&&(Xa=da);var mb=function(Rb){return{aabb:new Nh([Rb*za,0,0],[(Rb+1)*za,za,0]),zoom:0,x:0,y:0,wrap:Rb,fullyVisible:!1}},Cb=[],Kb=[],Mb=da;Z=Z.reparseOverscaled?aa:da;if(this._renderWorldCopies)for(da=1;3>=da;da++)Cb.push(mb(-da)),Cb.push(mb(da));for(Cb.push(mb(0));0<Cb.length;){mb=
Cb.pop();da=mb.x;aa=mb.y;var pc=mb.fullyVisible;if(!pc){pc=mb.aabb.intersects(Na);if(0===pc)continue;pc=2===pc}var rc=mb.aabb.distanceX(ja),hc=mb.aabb.distanceY(ja);rc=Math.max(Math.abs(rc),Math.abs(hc));if(mb.zoom===Mb||rc>3+(1<<Mb-mb.zoom)-2&&mb.zoom>=Xa)Kb.push({tileID:new a.OverscaledTileID(mb.zoom===Mb?Z:mb.zoom,mb.wrap,mb.zoom,da,aa),distanceSq:a.sqrLen([ja[0]-.5-da,ja[1]-.5-aa])});else for(rc=0;4>rc;rc++){hc=(da<<1)+rc%2;var Ib=(aa<<1)+(rc>>1);Cb.push({aabb:mb.aabb.quadrant(rc),zoom:mb.zoom+
1,x:hc,y:Ib,wrap:mb.wrap,fullyVisible:pc})}}return Kb.sort(function(Rb,zc){return Rb.distanceSq-zc.distanceSq}).map(function(Rb){return Rb.tileID})};Je.prototype.resize=function(Z,da){this.width=Z;this.height=da;this.pixelsToGLUnits=[2/Z,-2/da];this._constrain();this._calcMatrices()};Me.unmodified.get=function(){return this._unmodified};Je.prototype.zoomScale=function(Z){return Math.pow(2,Z)};Je.prototype.scaleZoom=function(Z){return Math.log(Z)/Math.LN2};Je.prototype.project=function(Z){var da=a.clamp(Z.lat,
-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(Z.lng)*this.worldSize,a.mercatorYfromLat(da)*this.worldSize)};Je.prototype.unproject=function(Z){return(new a.MercatorCoordinate(Z.x/this.worldSize,Z.y/this.worldSize)).toLngLat()};Me.point.get=function(){return this.project(this.center)};Je.prototype.setLocationAtPoint=function(Z,da){da=this.pointCoordinate(da);var aa=this.pointCoordinate(this.centerPoint);Z=this.locationCoordinate(Z);Z=new a.MercatorCoordinate(Z.x-
(da.x-aa.x),Z.y-(da.y-aa.y));this.center=this.coordinateLocation(Z);this._renderWorldCopies&&(this.center=this.center.wrap())};Je.prototype.locationPoint=function(Z){return this.coordinatePoint(this.locationCoordinate(Z))};Je.prototype.pointLocation=function(Z){return this.coordinateLocation(this.pointCoordinate(Z))};Je.prototype.locationCoordinate=function(Z){return a.MercatorCoordinate.fromLngLat(Z)};Je.prototype.coordinateLocation=function(Z){return Z.toLngLat()};Je.prototype.pointCoordinate=function(Z){var da=
[Z.x,Z.y,0,1];Z=[Z.x,Z.y,1,1];a.transformMat4(da,da,this.pixelMatrixInverse);a.transformMat4(Z,Z,this.pixelMatrixInverse);var aa=da[3],ja=Z[3],za=da[1]/aa,Na=Z[1]/ja,Xa=da[2]/aa,mb=Z[2]/ja;Xa=Xa===mb?0:(0-Xa)/(mb-Xa);return new a.MercatorCoordinate(a.number(da[0]/aa,Z[0]/ja,Xa)/this.worldSize,a.number(za,Na,Xa)/this.worldSize)};Je.prototype.coordinatePoint=function(Z){Z=[Z.x*this.worldSize,Z.y*this.worldSize,0,1];return a.transformMat4(Z,Z,this.pixelMatrix),new a.Point(Z[0]/Z[3],Z[1]/Z[3])};Je.prototype.getBounds=
function(){return(new a.LngLatBounds).extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))};Je.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};Je.prototype.setMaxBounds=
function(Z){Z?(this.lngRange=[Z.getWest(),Z.getEast()],this.latRange=[Z.getSouth(),Z.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};Je.prototype.calculatePosMatrix=function(Z,da){void 0===da&&(da=!1);var aa=Z.key,ja=da?this._alignedPosMatrixCache:this._posMatrixCache;if(ja[aa])return ja[aa];var za=Z.canonical,Na=this.worldSize/this.zoomScale(za.z);Z=za.x+Math.pow(2,za.z)*Z.wrap;var Xa=a.identity(new Float64Array(16));return a.translate(Xa,
Xa,[Z*Na,za.y*Na,0]),a.scale(Xa,Xa,[Na/a.EXTENT,Na/a.EXTENT,1]),a.multiply(Xa,da?this.alignedProjMatrix:this.projMatrix,Xa),ja[aa]=new Float32Array(Xa),ja[aa]};Je.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};Je.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var Z,da,aa=-90,ja=90,za=-180,Na=180,Xa=this.size,mb=this._unmodified;if(this.latRange){var Cb=this.latRange;aa=a.mercatorYfromLat(Cb[1])*this.worldSize;
var Kb=(ja=a.mercatorYfromLat(Cb[0])*this.worldSize)-aa<Xa.y?Xa.y/(ja-aa):0}if(this.lngRange){Cb=this.lngRange;za=a.mercatorXfromLng(Cb[0])*this.worldSize;var Mb=(Na=a.mercatorXfromLng(Cb[1])*this.worldSize)-za<Xa.x?Xa.x/(Na-za):0}Cb=this.point;var pc=Math.max(Mb||0,Kb||0);if(pc)return this.center=this.unproject(new a.Point(Mb?(Na+za)/2:Cb.x,Kb?(ja+aa)/2:Cb.y)),this.zoom+=this.scaleZoom(pc),this._unmodified=mb,void(this._constraining=!1);this.latRange&&(Kb=Cb.y,Mb=Xa.y/2,Kb-Mb<aa&&(da=aa+Mb),Kb+Mb>
ja&&(da=ja-Mb));this.lngRange&&(aa=Cb.x,Xa=Xa.x/2,aa-Xa<za&&(Z=za+Xa),aa+Xa>Na&&(Z=Na-Xa));void 0===Z&&void 0===da||(this.center=this.unproject(new a.Point(void 0!==Z?Z:Cb.x,void 0!==da?da:Cb.y)));this._unmodified=mb;this._constraining=!1}};Je.prototype._calcMatrices=function(){if(this.height){var Z=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var da=this._fov*(.5+Z.y/this.height);da=Math.sin(da)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-(Math.PI/2+
this._pitch)-da,.01,Math.PI-.01));var aa=this.point,ja=aa.x;aa=aa.y;var za=1.01*(Math.cos(Math.PI/2-this._pitch)*da+this.cameraToCenterDistance),Na=this.height/50;da=new Float64Array(16);a.perspective(da,this._fov,this.width/this.height,Na,za);da[8]=2*-Z.x/this.width;da[9]=2*Z.y/this.height;a.scale(da,da,[1,-1,1]);a.translate(da,da,[0,0,-this.cameraToCenterDistance]);a.rotateX(da,da,this._pitch);a.rotateZ(da,da,this.angle);a.translate(da,da,[-ja,-aa,0]);this.mercatorMatrix=a.scale([],da,[this.worldSize,
this.worldSize,this.worldSize]);a.scale(da,da,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=da;this.invProjMatrix=a.invert([],this.projMatrix);Z=this.width%2/2;za=this.height%2/2;Na=Math.cos(this.angle);var Xa=Math.sin(this.angle);ja=ja-Math.round(ja)+Na*Z+Xa*za;aa=aa-Math.round(aa)+Na*za+Xa*Z;Z=new Float64Array(da);if(a.translate(Z,Z,[.5<ja?ja-1:ja,.5<aa?aa-1:aa,0]),this.alignedProjMatrix=Z,da=a.create(),a.scale(da,da,[this.width/2,-this.height/2,1]),a.translate(da,
da,[1,-1,0]),this.labelPlaneMatrix=da,da=a.create(),a.scale(da,da,[1,-1,1]),a.translate(da,da,[-1,-1,0]),a.scale(da,da,[2/this.width,2/this.height,1]),this.glCoordMatrix=da,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(da=a.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=da;this._posMatrixCache={};this._alignedPosMatrixCache={}}};Je.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;
var Z=this.pointCoordinate(new a.Point(0,0));Z=[Z.x*this.worldSize,Z.y*this.worldSize,0,1];return a.transformMat4(Z,Z,this.pixelMatrix)[3]/this.cameraToCenterDistance};Je.prototype.getCameraPoint=function(){return this.centerPoint.add(new a.Point(0,Math.tan(this._pitch)*(this.cameraToCenterDistance||1)))};Je.prototype.getCameraQueryGeometry=function(Z){var da=this.getCameraPoint();if(1===Z.length)return[Z[0],da];var aa=da.x,ja=da.y,za=da.x;da=da.y;for(var Na=0;Na<Z.length;Na+=1){var Xa=Z[Na];aa=Math.min(aa,
Xa.x);ja=Math.min(ja,Xa.y);za=Math.max(za,Xa.x);da=Math.max(da,Xa.y)}return[new a.Point(aa,ja),new a.Point(za,ja),new a.Point(za,da),new a.Point(aa,da),new a.Point(aa,ja)]};Object.defineProperties(Je.prototype,Me);var Xg=function(Z){var da,aa,ja,za;this._hashName=Z&&encodeURIComponent(Z);a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this);this._updateHash=(da=this._updateHashUnthrottled.bind(this),aa=!1,ja=null,za=function(){ja=null;aa&&(da(),ja=setTimeout(za,300),aa=!1)},function(){return aa=
!0,ja||za(),ja})};Xg.prototype.addTo=function(Z){return this._map=Z,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};Xg.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};Xg.prototype.getHashString=function(Z){var da=this._map.getCenter(),aa=Math.round(100*this._map.getZoom())/100,ja=Math.pow(10,
Math.ceil((aa*Math.LN2+Math.log(512/360/.5))/Math.LN10)),za=Math.round(da.lng*ja)/ja;da=Math.round(da.lat*ja)/ja;ja=this._map.getBearing();var Na=this._map.getPitch(),Xa="";if(Xa+=Z?"/"+za+"/"+da+"/"+aa:aa+"/"+da+"/"+za,(ja||Na)&&(Xa+="/"+Math.round(10*ja)/10),Na&&(Xa+="/"+Math.round(Na)),this._hashName){var mb=this._hashName,Cb=!1;Z=a.window.location.hash.slice(1).split("\x26").map(function(Kb){var Mb=Kb.split("\x3d")[0];return Mb===mb?(Cb=!0,Mb+"\x3d"+Xa):Kb}).filter(function(Kb){return Kb});return Cb||
Z.push(mb+"\x3d"+Xa),"#"+Z.join("\x26")}return"#"+Xa};Xg.prototype._getCurrentHash=function(){var Z,da=this,aa=a.window.location.hash.replace("#","");return this._hashName?(aa.split("\x26").map(function(ja){return ja.split("\x3d")}).forEach(function(ja){ja[0]===da._hashName&&(Z=ja)}),(Z&&Z[1]||"").split("/")):aa.split("/")};Xg.prototype._onHashChange=function(){var Z=this._getCurrentHash();if(3<=Z.length&&!Z.some(function(aa){return isNaN(aa)})){var da=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?
+(Z[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Z[2],+Z[1]],zoom:+Z[0],bearing:da,pitch:+(Z[4]||0)}),!0}return!1};Xg.prototype._updateHashUnthrottled=function(){var Z=this.getHashString();try{a.window.history.replaceState(a.window.history.state,"",Z)}catch(da){}};var Oh={linearity:.3,easing:a.bezier(0,0,.3,1)},tj=a.extend({deceleration:2500,maxSpeed:1400},Oh),uj=a.extend({deceleration:20,maxSpeed:1400},Oh),vj=a.extend({deceleration:1E3,maxSpeed:360},Oh),wh=a.extend({deceleration:1E3,
maxSpeed:90},Oh),ri=function(Z){this._map=Z;this.clear()};ri.prototype.clear=function(){this._inertiaBuffer=[]};ri.prototype.record=function(Z){this._drainInertiaBuffer();this._inertiaBuffer.push({time:a.browser.now(),settings:Z})};ri.prototype._drainInertiaBuffer=function(){for(var Z=this._inertiaBuffer,da=a.browser.now();0<Z.length&&160<da-Z[0].time;)Z.shift()};ri.prototype._onMoveEnd=function(Z){if(this._drainInertiaBuffer(),!(2>this._inertiaBuffer.length)){for(var da=0,aa=0,ja=0,za=new a.Point(0,
0),Na=void 0,Xa=void 0,mb=0,Cb=this._inertiaBuffer;mb<Cb.length;mb+=1){var Kb=Cb[mb].settings;da+=Kb.zoomDelta||0;aa+=Kb.bearingDelta||0;ja+=Kb.pitchDelta||0;Kb.panDelta&&za._add(Kb.panDelta);Kb.around&&(Xa=Kb.around);Kb.pinchAround&&(Na=Kb.pinchAround)}Cb=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time;mb={};za.mag()&&(Z=ka(za.mag(),Cb,a.extend({},tj,Z||{})),mb.offset=za.mult(Z.amount/za.mag()),mb.center=this._map.transform.center,ua(mb,Z));da&&(da=ka(da,Cb,uj),
mb.zoom=this._map.transform.zoom+da.amount,ua(mb,da));aa&&(aa=ka(aa,Cb,vj),mb.bearing=this._map.transform.bearing+a.clamp(aa.amount,-179,179),ua(mb,aa));ja&&(ja=ka(ja,Cb,wh),mb.pitch=this._map.transform.pitch+ja.amount,ua(mb,ja));if(mb.zoom||mb.bearing)Na=void 0===Na?Xa:Na,mb.around=Na?this._map.unproject(Na):this._map.getCenter();return this.clear(),a.extend(mb,{noMoveStart:!0})}};var bg=function(Z){function da(ja,za,Na,Xa){void 0===Xa&&(Xa={});var mb=Qa.mousePos(za.getCanvasContainer(),Na),Cb=za.unproject(mb);
Z.call(this,ja,a.extend({point:mb,lngLat:Cb,originalEvent:Na},Xa));this._defaultPrevented=!1;this.target=za}Z&&(da.__proto__=Z);(da.prototype=Object.create(Z&&Z.prototype)).constructor=da;var aa={defaultPrevented:{configurable:!0}};return da.prototype.preventDefault=function(){this._defaultPrevented=!0},aa.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(da.prototype,aa),da}(a.Event),si=function(Z){function da(ja,za,Na){var Xa="touchend"===ja?Na.changedTouches:
Na.touches;Xa=Qa.touchPos(za.getCanvasContainer(),Xa);var mb=Xa.map(function(Mb){return za.unproject(Mb)}),Cb=Xa.reduce(function(Mb,pc,rc,hc){return Mb.add(pc.div(hc.length))},new a.Point(0,0)),Kb=za.unproject(Cb);Z.call(this,ja,{points:Xa,point:Cb,lngLats:mb,lngLat:Kb,originalEvent:Na});this._defaultPrevented=!1}Z&&(da.__proto__=Z);(da.prototype=Object.create(Z&&Z.prototype)).constructor=da;var aa={defaultPrevented:{configurable:!0}};return da.prototype.preventDefault=function(){this._defaultPrevented=
!0},aa.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(da.prototype,aa),da}(a.Event),Zj=function(Z){function da(ja,za,Na){Z.call(this,ja,{originalEvent:Na});this._defaultPrevented=!1}Z&&(da.__proto__=Z);(da.prototype=Object.create(Z&&Z.prototype)).constructor=da;var aa={defaultPrevented:{configurable:!0}};return da.prototype.preventDefault=function(){this._defaultPrevented=!0},aa.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(da.prototype,
aa),da}(a.Event),cf=function(Z,da){this._map=Z;this._clickTolerance=da.clickTolerance};cf.prototype.reset=function(){delete this._mousedownPos};cf.prototype.wheel=function(Z){return this._firePreventable(new Zj(Z.type,this._map,Z))};cf.prototype.mousedown=function(Z,da){return this._mousedownPos=da,this._firePreventable(new bg(Z.type,this._map,Z))};cf.prototype.mouseup=function(Z){this._map.fire(new bg(Z.type,this._map,Z))};cf.prototype.click=function(Z,da){this._mousedownPos&&this._mousedownPos.dist(da)>=
this._clickTolerance||this._map.fire(new bg(Z.type,this._map,Z))};cf.prototype.dblclick=function(Z){return this._firePreventable(new bg(Z.type,this._map,Z))};cf.prototype.mouseover=function(Z){this._map.fire(new bg(Z.type,this._map,Z))};cf.prototype.mouseout=function(Z){this._map.fire(new bg(Z.type,this._map,Z))};cf.prototype.touchstart=function(Z){return this._firePreventable(new si(Z.type,this._map,Z))};cf.prototype.touchmove=function(Z){this._map.fire(new si(Z.type,this._map,Z))};cf.prototype.touchend=
function(Z){this._map.fire(new si(Z.type,this._map,Z))};cf.prototype.touchcancel=function(Z){this._map.fire(new si(Z.type,this._map,Z))};cf.prototype._firePreventable=function(Z){if(this._map.fire(Z),Z.defaultPrevented)return{}};cf.prototype.isEnabled=function(){return!0};cf.prototype.isActive=function(){return!1};cf.prototype.enable=function(){};cf.prototype.disable=function(){};var ig=function(Z){this._map=Z};ig.prototype.reset=function(){this._delayContextMenu=!1;delete this._contextMenuEvent};
ig.prototype.mousemove=function(Z){this._map.fire(new bg(Z.type,this._map,Z))};ig.prototype.mousedown=function(){this._delayContextMenu=!0};ig.prototype.mouseup=function(){this._delayContextMenu=!1;this._contextMenuEvent&&(this._map.fire(new bg("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)};ig.prototype.contextmenu=function(Z){this._delayContextMenu?this._contextMenuEvent=Z:this._map.fire(new bg(Z.type,this._map,Z));this._map.listens("contextmenu")&&Z.preventDefault()};
ig.prototype.isEnabled=function(){return!0};ig.prototype.isActive=function(){return!1};ig.prototype.enable=function(){};ig.prototype.disable=function(){};var jg=function(Z,da){this._map=Z;this._el=Z.getCanvasContainer();this._container=Z.getContainer();this._clickTolerance=da.clickTolerance||1};jg.prototype.isEnabled=function(){return!!this._enabled};jg.prototype.isActive=function(){return!!this._active};jg.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};jg.prototype.disable=function(){this.isEnabled()&&
(this._enabled=!1)};jg.prototype.mousedown=function(Z,da){this.isEnabled()&&Z.shiftKey&&0===Z.button&&(Qa.disableDrag(),this._startPos=this._lastPos=da,this._active=!0)};jg.prototype.mousemoveWindow=function(Z,da){if(this._active&&!(this._lastPos.equals(da)||!this._box&&da.dist(this._startPos)<this._clickTolerance)){var aa=this._startPos;this._lastPos=da;this._box||(this._box=Qa.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",
Z));Z=Math.min(aa.x,da.x);var ja=Math.max(aa.x,da.x),za=Math.min(aa.y,da.y);da=Math.max(aa.y,da.y);Qa.setTransform(this._box,"translate("+Z+"px,"+za+"px)");this._box.style.width=ja-Z+"px";this._box.style.height=da-za+"px"}};jg.prototype.mouseupWindow=function(Z,da){var aa=this;if(this._active&&0===Z.button){var ja=this._startPos;if(this.reset(),Qa.suppressClick(),ja.x!==da.x||ja.y!==da.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:Z})),{cameraAnimation:function(za){return za.fitScreenCoordinates(ja,
da,aa._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",Z)}};jg.prototype.keydown=function(Z){this._active&&27===Z.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",Z))};jg.prototype.reset=function(){this._active=!1;this._container.classList.remove("mapboxgl-crosshair");this._box&&(Qa.remove(this._box),this._box=null);Qa.enableDrag();delete this._startPos;delete this._lastPos};jg.prototype._fireEvent=function(Z,da){return this._map.fire(new a.Event(Z,{originalEvent:da}))};var ti=
function(Z){this.reset();this.numTouches=Z.numTouches};ti.prototype.reset=function(){delete this.centroid;delete this.startTime;delete this.touches;this.aborted=!1};ti.prototype.touchstart=function(Z,da,aa){(this.centroid||aa.length>this.numTouches)&&(this.aborted=!0);if(!this.aborted&&(void 0===this.startTime&&(this.startTime=Z.timeStamp),aa.length===this.numTouches)){Z=new a.Point(0,0);for(var ja=0;ja<da.length;ja+=1)Z._add(da[ja]);this.centroid=Z.div(da.length);this.touches=sa(aa,da)}};ti.prototype.touchmove=
function(Z,da,aa){if(!this.aborted&&this.centroid){Z=sa(aa,da);for(var ja in this.touches)da=Z[ja],(!da||30<da.dist(this.touches[ja]))&&(this.aborted=!0)}};ti.prototype.touchend=function(Z,da,aa){if((!this.centroid||500<Z.timeStamp-this.startTime)&&(this.aborted=!0),0===aa.length)if(Z=!this.aborted&&this.centroid,this.reset(),Z)return Z};var Yg=function(Z){this.singleTap=new ti(Z);this.numTaps=Z.numTaps;this.reset()};Yg.prototype.reset=function(){this.lastTime=1/0;delete this.lastTap;this.count=0;
this.singleTap.reset()};Yg.prototype.touchstart=function(Z,da,aa){this.singleTap.touchstart(Z,da,aa)};Yg.prototype.touchmove=function(Z,da,aa){this.singleTap.touchmove(Z,da,aa)};Yg.prototype.touchend=function(Z,da,aa){if(da=this.singleTap.touchend(Z,da,aa)){aa=500>Z.timeStamp-this.lastTime;var ja=!this.lastTap||30>this.lastTap.dist(da);if(aa&&ja||this.reset(),this.count++,this.lastTime=Z.timeStamp,this.lastTap=da,this.count===this.numTaps)return this.reset(),da}};var Gf=function(){this._zoomIn=new Yg({numTouches:1,
numTaps:2});this._zoomOut=new Yg({numTouches:2,numTaps:1});this.reset()};Gf.prototype.reset=function(){this._active=!1;this._zoomIn.reset();this._zoomOut.reset()};Gf.prototype.touchstart=function(Z,da,aa){this._zoomIn.touchstart(Z,da,aa);this._zoomOut.touchstart(Z,da,aa)};Gf.prototype.touchmove=function(Z,da,aa){this._zoomIn.touchmove(Z,da,aa);this._zoomOut.touchmove(Z,da,aa)};Gf.prototype.touchend=function(Z,da,aa){var ja=this,za=this._zoomIn.touchend(Z,da,aa),Na=this._zoomOut.touchend(Z,da,aa);
return za?(this._active=!0,Z.preventDefault(),setTimeout(function(){return ja.reset()},0),{cameraAnimation:function(Xa){return Xa.easeTo({duration:300,zoom:Xa.getZoom()+1,around:Xa.unproject(za)},{originalEvent:Z})}}):Na?(this._active=!0,Z.preventDefault(),setTimeout(function(){return ja.reset()},0),{cameraAnimation:function(Xa){return Xa.easeTo({duration:300,zoom:Xa.getZoom()-1,around:Xa.unproject(Na)},{originalEvent:Z})}}):void 0};Gf.prototype.touchcancel=function(){this.reset()};Gf.prototype.enable=
function(){this._enabled=!0};Gf.prototype.disable=function(){this._enabled=!1;this.reset()};Gf.prototype.isEnabled=function(){return this._enabled};Gf.prototype.isActive=function(){return this._active};var Rf=function(Z){this.reset();this._clickTolerance=Z.clickTolerance||1};Rf.prototype.reset=function(){this._moved=this._active=!1;delete this._lastPoint;delete this._eventButton};Rf.prototype._correctButton=function(Z,da){return!1};Rf.prototype._move=function(Z,da){return{}};Rf.prototype.mousedown=
function(Z,da){if(!this._lastPoint){var aa=Qa.mouseButton(Z);this._correctButton(Z,aa)&&(this._lastPoint=da,this._eventButton=aa)}};Rf.prototype.mousemoveWindow=function(Z,da){var aa=this._lastPoint;if(aa&&(Z.preventDefault(),this._moved||!(da.dist(aa)<this._clickTolerance)))return this._moved=!0,this._lastPoint=da,this._move(aa,da)};Rf.prototype.mouseupWindow=function(Z){Qa.mouseButton(Z)===this._eventButton&&(this._moved&&Qa.suppressClick(),this.reset())};Rf.prototype.enable=function(){this._enabled=
!0};Rf.prototype.disable=function(){this._enabled=!1;this.reset()};Rf.prototype.isEnabled=function(){return this._enabled};Rf.prototype.isActive=function(){return this._active};var wj=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.mousedown=function(aa,ja){Z.prototype.mousedown.call(this,aa,ja);this._lastPoint&&(this._active=!0)},da.prototype._correctButton=function(aa,ja){return 0===ja&&!aa.ctrlKey},
da.prototype._move=function(aa,ja){return{around:ja,panDelta:ja.sub(aa)}},da}(Rf),xj=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype._correctButton=function(aa,ja){return 0===ja&&aa.ctrlKey||2===ja},da.prototype._move=function(aa,ja){if(aa=.8*(ja.x-aa.x))return this._active=!0,{bearingDelta:aa}},da.prototype.contextmenu=function(aa){aa.preventDefault()},da}(Rf),Vi=function(Z){function da(){Z.apply(this,
arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype._correctButton=function(aa,ja){return 0===ja&&aa.ctrlKey||2===ja},da.prototype._move=function(aa,ja){if(aa=-.5*(ja.y-aa.y))return this._active=!0,{pitchDelta:aa}},da.prototype.contextmenu=function(aa){aa.preventDefault()},da}(Rf),Hf=function(Z){this._minTouches=1;this._clickTolerance=Z.clickTolerance||1;this.reset()};Hf.prototype.reset=function(){this._active=!1;this._touches={};this._sum=
new a.Point(0,0)};Hf.prototype.touchstart=function(Z,da,aa){return this._calculateTransform(Z,da,aa)};Hf.prototype.touchmove=function(Z,da,aa){if(this._active)return Z.preventDefault(),this._calculateTransform(Z,da,aa)};Hf.prototype.touchend=function(Z,da,aa){this._calculateTransform(Z,da,aa);this._active&&aa.length<this._minTouches&&this.reset()};Hf.prototype.touchcancel=function(){this.reset()};Hf.prototype._calculateTransform=function(Z,da,aa){0<aa.length&&(this._active=!0);aa=sa(aa,da);Z=new a.Point(0,
0);var ja=new a.Point(0,0);da=0;for(var za in aa){var Na=aa[za],Xa=this._touches[za];Xa&&(Z._add(Na),ja._add(Na.sub(Xa)),da++,aa[za]=Na)}if(this._touches=aa,!(da<this._minTouches)&&ja.mag())if(za=ja.div(da),this._sum._add(za),!(this._sum.mag()<this._clickTolerance))return{around:Z.div(da),panDelta:za}};Hf.prototype.enable=function(){this._enabled=!0};Hf.prototype.disable=function(){this._enabled=!1;this.reset()};Hf.prototype.isEnabled=function(){return this._enabled};Hf.prototype.isActive=function(){return this._active};
var ff=function(){this.reset()};ff.prototype.reset=function(){this._active=!1;delete this._firstTwoTouches};ff.prototype._start=function(Z){};ff.prototype._move=function(Z,da,aa){return{}};ff.prototype.touchstart=function(Z,da,aa){this._firstTwoTouches||2>aa.length||(this._firstTwoTouches=[aa[0].identifier,aa[1].identifier],this._start([da[0],da[1]]))};ff.prototype.touchmove=function(Z,da,aa){if(this._firstTwoTouches){Z.preventDefault();var ja=this._firstTwoTouches,za=ja[1];ja=ya(aa,da,ja[0]);da=
ya(aa,da,za);if(ja&&da)return aa=this._aroundCenter?null:ja.add(da).div(2),this._move([ja,da],aa,Z)}};ff.prototype.touchend=function(Z,da,aa){if(this._firstTwoTouches){var ja=this._firstTwoTouches;Z=ja[1];ja=ya(aa,da,ja[0]);da=ya(aa,da,Z);ja&&da||(this._active&&Qa.suppressClick(),this.reset())}};ff.prototype.touchcancel=function(){this.reset()};ff.prototype.enable=function(Z){this._enabled=!0;this._aroundCenter=!!Z&&"center"===Z.around};ff.prototype.disable=function(){this._enabled=!1;this.reset()};
ff.prototype.isEnabled=function(){return this._enabled};ff.prototype.isActive=function(){return this._active};var cg=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.reset=function(){Z.prototype.reset.call(this);delete this._distance;delete this._startDistance},da.prototype._start=function(aa){this._startDistance=this._distance=aa[0].dist(aa[1])},da.prototype._move=function(aa,ja){var za=this._distance;
if(this._distance=aa[0].dist(aa[1]),this._active||!(.1>Math.abs(Math.log(this._distance/this._startDistance)/Math.LN2)))return this._active=!0,{zoomDelta:Math.log(this._distance/za)/Math.LN2,pinchAround:ja}},da}(ff),Ck=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.reset=function(){Z.prototype.reset.call(this);delete this._minDiameter;delete this._startVector;delete this._vector},da.prototype._start=
function(aa){this._startVector=this._vector=aa[0].sub(aa[1]);this._minDiameter=aa[0].dist(aa[1])},da.prototype._move=function(aa,ja){var za=this._vector;if(this._vector=aa[0].sub(aa[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:180*this._vector.angleWith(za)/Math.PI,pinchAround:ja}},da.prototype._isBelowThreshold=function(aa){this._minDiameter=Math.min(this._minDiameter,aa.mag());var ja=25/(Math.PI*this._minDiameter)*360;aa=180*aa.angleWith(this._startVector)/
Math.PI;return Math.abs(aa)<ja},da}(ff),ak=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.reset=function(){Z.prototype.reset.call(this);this._valid=void 0;delete this._firstMove;delete this._lastPoints},da.prototype._start=function(aa){this._lastPoints=aa;qa(aa[0].sub(aa[1]))&&(this._valid=!1)},da.prototype._move=function(aa,ja,za){ja=aa[0].sub(this._lastPoints[0]);var Na=aa[1].sub(this._lastPoints[1]);
if(this._valid=this.gestureBeginsVertically(ja,Na,za.timeStamp),this._valid)return this._lastPoints=aa,this._active=!0,{pitchDelta:(ja.y+Na.y)/2*-.5}},da.prototype.gestureBeginsVertically=function(aa,ja,za){if(void 0!==this._valid)return this._valid;var Na=2<=aa.mag(),Xa=2<=ja.mag();if(Na||Xa){if(!Na||!Xa)return void 0===this._firstMove&&(this._firstMove=za),100>za-this._firstMove&&void 0;za=0<aa.y==0<ja.y;return qa(aa)&&qa(ja)&&za}},da}(ff),Zg=function(){this._panStep=100;this._bearingStep=15;this._pitchStep=
10};Zg.prototype.reset=function(){this._active=!1};Zg.prototype.keydown=function(Z){var da=this;if(!(Z.altKey||Z.ctrlKey||Z.metaKey)){var aa=0,ja=0,za=0,Na=0,Xa=0;switch(Z.keyCode){case 61:case 107:case 171:case 187:aa=1;break;case 189:case 109:case 173:aa=-1;break;case 37:Z.shiftKey?ja=-1:(Z.preventDefault(),Na=-1);break;case 39:Z.shiftKey?ja=1:(Z.preventDefault(),Na=1);break;case 38:Z.shiftKey?za=1:(Z.preventDefault(),Xa=-1);break;case 40:Z.shiftKey?za=-1:(Z.preventDefault(),Xa=1);break;default:return}return{cameraAnimation:function(mb){var Cb=
mb.getZoom();mb.easeTo({duration:300,easeId:"keyboardHandler",easing:xa,zoom:aa?Math.round(Cb)+aa*(Z.shiftKey?2:1):Cb,bearing:mb.getBearing()+ja*da._bearingStep,pitch:mb.getPitch()+za*da._pitchStep,offset:[-Na*da._panStep,-Xa*da._panStep],center:mb.getCenter()},{originalEvent:Z})}}}};Zg.prototype.enable=function(){this._enabled=!0};Zg.prototype.disable=function(){this._enabled=!1;this.reset()};Zg.prototype.isEnabled=function(){return this._enabled};Zg.prototype.isActive=function(){return this._active};
var Af=function(Z,da){this._map=Z;this._el=Z.getCanvasContainer();this._handler=da;this._delta=0;this._defaultZoomRate=.01;this._wheelZoomRate=1/450;a.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Af.prototype.setZoomRate=function(Z){this._defaultZoomRate=Z};Af.prototype.setWheelZoomRate=function(Z){this._wheelZoomRate=Z};Af.prototype.isEnabled=function(){return!!this._enabled};Af.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout};Af.prototype.isZooming=
function(){return!!this._zooming};Af.prototype.enable=function(Z){this.isEnabled()||(this._enabled=!0,this._aroundCenter=Z&&"center"===Z.around)};Af.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Af.prototype.wheel=function(Z){if(this.isEnabled()){var da=Z.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*Z.deltaY:Z.deltaY,aa=a.browser.now(),ja=aa-(this._lastWheelEventTime||0);this._lastWheelEventTime=aa;0!==da&&0==da%4.000244140625?this._type="wheel":0!==da&&4>Math.abs(da)?this._type=
"trackpad":400<ja?(this._type=null,this._lastValue=da,this._timeout=setTimeout(this._onTimeout,40,Z)):this._type||(this._type=200>Math.abs(ja*da)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,da+=this._lastValue));Z.shiftKey&&da&&(da/=4);this._type&&(this._lastWheelEvent=Z,this._delta-=da,this._active||this._start(Z));Z.preventDefault()}};Af.prototype._onTimeout=function(Z){this._type="wheel";this._delta-=this._lastValue;this._active||this._start(Z)};Af.prototype._start=
function(Z){this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),Z=Qa.mousePos(this._el,Z),this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(Z)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))};Af.prototype.renderFrame=function(){return this._onScrollFrame()};
Af.prototype._onScrollFrame=function(){var Z=this;if(this._frameId&&(this._frameId=null,this.isActive())){var da=this._map.transform;if(0!==this._delta){var aa=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate))));0>this._delta&&0!==aa&&(aa=1/aa);var ja="number"==typeof this._targetZoom?da.zoomScale(this._targetZoom):da.scale;this._targetZoom=Math.min(da.maxZoom,Math.max(da.minZoom,da.scaleZoom(ja*aa)));"wheel"===
this._type&&(this._startZoom=da.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}var za="number"==typeof this._targetZoom?this._targetZoom:da.zoom;var Na=this._startZoom,Xa=this._easing;aa=!1;"wheel"===this._type&&Na&&Xa?(ja=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Xa=Xa(ja),za=a.number(Na,za,Xa),1>ja?this._frameId||(this._frameId=!0):aa=!0):aa=!0;return this._active=!0,aa&&(this._active=!1,this._finishTimeout=setTimeout(function(){Z._zooming=!1;Z._handler._triggerRenderFrame();
delete Z._targetZoom;delete Z._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!aa,zoomDelta:za-da.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}};Af.prototype._smoothOutEasing=function(Z){var da=a.ease;if(this._prevEase){da=this._prevEase;var aa=(a.browser.now()-da.start)/da.duration;da=da.easing(aa+.01)-da.easing(aa);da=.27/Math.sqrt(da*da+1E-4)*.01;da=a.bezier(da,Math.sqrt(.0729-da*da),.25,1)}return this._prevEase={start:a.browser.now(),duration:Z,easing:da},da};Af.prototype.reset=
function(){this._active=!1};var xh=function(Z,da){this._clickZoom=Z;this._tapZoom=da};xh.prototype.enable=function(){this._clickZoom.enable();this._tapZoom.enable()};xh.prototype.disable=function(){this._clickZoom.disable();this._tapZoom.disable()};xh.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()};xh.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var kg=function(){this.reset()};kg.prototype.reset=function(){this._active=
!1};kg.prototype.dblclick=function(Z,da){return Z.preventDefault(),{cameraAnimation:function(aa){aa.easeTo({duration:300,zoom:aa.getZoom()+(Z.shiftKey?-1:1),around:aa.unproject(da)},{originalEvent:Z})}}};kg.prototype.enable=function(){this._enabled=!0};kg.prototype.disable=function(){this._enabled=!1;this.reset()};kg.prototype.isEnabled=function(){return this._enabled};kg.prototype.isActive=function(){return this._active};var lg=function(){this._tap=new Yg({numTouches:1,numTaps:1});this.reset()};
lg.prototype.reset=function(){this._active=!1;delete this._swipePoint;delete this._swipeTouch;delete this._tapTime;this._tap.reset()};lg.prototype.touchstart=function(Z,da,aa){this._swipePoint||(this._tapTime&&500<Z.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<aa.length&&(this._swipePoint=da[0],this._swipeTouch=aa[0].identifier):this._tap.touchstart(Z,da,aa))};lg.prototype.touchmove=function(Z,da,aa){if(this._tapTime){if(this._swipePoint&&aa[0].identifier===this._swipeTouch)return da=da[0],
aa=da.y-this._swipePoint.y,this._swipePoint=da,Z.preventDefault(),this._active=!0,{zoomDelta:aa/128}}else this._tap.touchmove(Z,da,aa)};lg.prototype.touchend=function(Z,da,aa){this._tapTime?this._swipePoint&&0===aa.length&&this.reset():this._tap.touchend(Z,da,aa)&&(this._tapTime=Z.timeStamp)};lg.prototype.touchcancel=function(){this.reset()};lg.prototype.enable=function(){this._enabled=!0};lg.prototype.disable=function(){this._enabled=!1;this.reset()};lg.prototype.isEnabled=function(){return this._enabled};
lg.prototype.isActive=function(){return this._active};var $g=function(Z,da,aa){this._el=Z;this._mousePan=da;this._touchPan=aa};$g.prototype.enable=function(Z){this._inertiaOptions=Z||{};this._mousePan.enable();this._touchPan.enable();this._el.classList.add("mapboxgl-touch-drag-pan")};$g.prototype.disable=function(){this._mousePan.disable();this._touchPan.disable();this._el.classList.remove("mapboxgl-touch-drag-pan")};$g.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()};
$g.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var yh=function(Z,da,aa){this._pitchWithRotate=Z.pitchWithRotate;this._mouseRotate=da;this._mousePitch=aa};yh.prototype.enable=function(){this._mouseRotate.enable();this._pitchWithRotate&&this._mousePitch.enable()};yh.prototype.disable=function(){this._mouseRotate.disable();this._mousePitch.disable()};yh.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())};
yh.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ah=function(Z,da,aa,ja){this._el=Z;this._touchZoom=da;this._touchRotate=aa;this._tapDragZoom=ja;this._rotationDisabled=!1;this._enabled=!0};ah.prototype.enable=function(Z){this._touchZoom.enable(Z);this._rotationDisabled||this._touchRotate.enable(Z);this._tapDragZoom.enable();this._el.classList.add("mapboxgl-touch-zoom-rotate")};ah.prototype.disable=function(){this._touchZoom.disable();this._touchRotate.disable();
this._tapDragZoom.disable();this._el.classList.remove("mapboxgl-touch-zoom-rotate")};ah.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()};ah.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()};ah.prototype.disableRotation=function(){this._rotationDisabled=!0;this._touchRotate.disable()};ah.prototype.enableRotation=function(){this._rotationDisabled=
!1;this._touchZoom.isEnabled()&&this._touchRotate.enable()};var pe=function(Z){return Z.zoom||Z.drag||Z.pitch||Z.rotate},Dk=function(Z){function da(){Z.apply(this,arguments)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da}(a.Event),kf=function(Z,da){this._map=Z;this._el=this._map.getCanvasContainer();this._handlers=[];this._handlersById={};this._changes=[];this._inertia=new ri(Z);this._bearingSnap=da.bearingSnap;this._previousActiveHandlers={};this._eventsInProgress=
{};this._addDefaultHandlers(da);a.bindAll(["handleEvent","handleWindowEvent"],this);Z=this._el;this._listeners=[[Z,"touchstart",{passive:!1}],[Z,"touchmove",{passive:!1}],[Z,"touchend",void 0],[Z,"touchcancel",void 0],[Z,"mousedown",void 0],[Z,"mousemove",void 0],[Z,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[Z,"mouseover",void 0],[Z,"mouseout",void 0],[Z,"dblclick",void 0],[Z,"click",void 0],[Z,"keydown",{capture:!1}],[Z,"keyup",void 0],[Z,
"wheel",{passive:!1}],[Z,"contextmenu",void 0],[a.window,"blur",void 0]];Z=0;for(da=this._listeners;Z<da.length;Z+=1){var aa=da[Z],ja=aa[0];Qa.addEventListener(ja,aa[1],ja===a.window.document?this.handleWindowEvent:this.handleEvent,aa[2])}};kf.prototype.destroy=function(){for(var Z=0,da=this._listeners;Z<da.length;Z+=1){var aa=da[Z],ja=aa[0];Qa.removeEventListener(ja,aa[1],ja===a.window.document?this.handleWindowEvent:this.handleEvent,aa[2])}};kf.prototype._addDefaultHandlers=function(Z){var da=this._map,
aa=da.getCanvasContainer();this._add("mapEvent",new cf(da,Z));var ja=da.boxZoom=new jg(da,Z);this._add("boxZoom",ja);ja=new Gf;var za=new kg;da.doubleClickZoom=new xh(za,ja);this._add("tapZoom",ja);this._add("clickZoom",za);ja=new lg;this._add("tapDragZoom",ja);za=da.touchPitch=new ak;this._add("touchPitch",za);za=new xj(Z);var Na=new Vi(Z);da.dragRotate=new yh(Z,za,Na);this._add("mouseRotate",za,["mousePitch"]);this._add("mousePitch",Na,["mouseRotate"]);za=new wj(Z);Na=new Hf(Z);da.dragPan=new $g(aa,
za,Na);this._add("mousePan",za);this._add("touchPan",Na,["touchZoom","touchRotate"]);za=new Ck;Na=new cg;da.touchZoomRotate=new ah(aa,Na,za,ja);this._add("touchRotate",za,["touchPan","touchZoom"]);this._add("touchZoom",Na,["touchPan","touchRotate"]);aa=da.scrollZoom=new Af(da,this);this._add("scrollZoom",aa,["mousePan"]);aa=da.keyboard=new Zg;this._add("keyboard",aa);this._add("blockableMapEvent",new ig(da));aa=0;for(ja="boxZoom doubleClickZoom tapDragZoom touchPitch dragRotate dragPan touchZoomRotate scrollZoom keyboard".split(" ");aa<
ja.length;aa+=1)za=ja[aa],Z.interactive&&Z[za]&&da[za].enable(Z[za])};kf.prototype._add=function(Z,da,aa){this._handlers.push({handlerName:Z,handler:da,allowed:aa});this._handlersById[Z]=da};kf.prototype.stop=function(){if(!this._updatingCamera){for(var Z=0,da=this._handlers;Z<da.length;Z+=1)da[Z].handler.reset();this._inertia.clear();this._fireEvents({},{});this._changes=[]}};kf.prototype.isActive=function(){for(var Z=0,da=this._handlers;Z<da.length;Z+=1)if(da[Z].handler.isActive())return!0;return!1};
kf.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()};kf.prototype.isRotating=function(){return!!this._eventsInProgress.rotate};kf.prototype.isMoving=function(){return!!pe(this._eventsInProgress)||this.isZooming()};kf.prototype._blockedByActive=function(Z,da,aa){for(var ja in Z)if(ja!==aa&&(!da||0>da.indexOf(ja)))return!0;return!1};kf.prototype.handleWindowEvent=function(Z){this.handleEvent(Z,Z.type+"Window")};kf.prototype._getMapTouches=function(Z){for(var da=
[],aa=0;aa<Z.length;aa+=1){var ja=Z[aa];this._el.contains(ja.target)&&da.push(ja)}return da};kf.prototype.handleEvent=function(Z,da){if("blur"!==Z.type){this._updatingCamera=!0;for(var aa="renderFrame"===Z.type?void 0:Z,ja={needsRenderFrame:!1},za={},Na={},Xa=Z.touches?this._getMapTouches(Z.touches):void 0,mb=Xa?Qa.touchPos(this._el,Xa):Qa.mousePos(this._el,Z),Cb=0,Kb=this._handlers;Cb<Kb.length;Cb+=1){var Mb=Kb[Cb],pc=Mb.handlerName,rc=Mb.handler;Mb=Mb.allowed;if(rc.isEnabled()){var hc=void 0;this._blockedByActive(Na,
Mb,pc)?rc.reset():rc[da||Z.type]&&(hc=rc[da||Z.type](Z,mb,Xa),this.mergeHandlerResult(ja,za,hc,pc,aa),hc&&hc.needsRenderFrame&&this._triggerRenderFrame());(hc||rc.isActive())&&(Na[pc]=rc)}}Z={};for(var Ib in this._previousActiveHandlers)Na[Ib]||(Z[Ib]=aa);this._previousActiveHandlers=Na;(Object.keys(Z).length||Ca(ja))&&(this._changes.push([ja,za,Z]),this._triggerRenderFrame());(Object.keys(Na).length||Ca(ja))&&this._map._stop(!0);this._updatingCamera=!1;(aa=ja.cameraAnimation)&&(this._inertia.clear(),
this._fireEvents({},{}),this._changes=[],aa(this._map))}else this.stop()};kf.prototype.mergeHandlerResult=function(Z,da,aa,ja,za){aa&&(a.extend(Z,aa),Z={handlerName:ja,originalEvent:aa.originalEvent||za},void 0!==aa.zoomDelta&&(da.zoom=Z),void 0!==aa.panDelta&&(da.drag=Z),void 0!==aa.pitchDelta&&(da.pitch=Z),void 0!==aa.bearingDelta&&(da.rotate=Z))};kf.prototype._applyChanges=function(){for(var Z={},da={},aa={},ja=0,za=this._changes;ja<za.length;ja+=1){var Na=za[ja],Xa=Na[0],mb=Na[1];Na=Na[2];Xa.panDelta&&
(Z.panDelta=(Z.panDelta||new a.Point(0,0))._add(Xa.panDelta));Xa.zoomDelta&&(Z.zoomDelta=(Z.zoomDelta||0)+Xa.zoomDelta);Xa.bearingDelta&&(Z.bearingDelta=(Z.bearingDelta||0)+Xa.bearingDelta);Xa.pitchDelta&&(Z.pitchDelta=(Z.pitchDelta||0)+Xa.pitchDelta);void 0!==Xa.around&&(Z.around=Xa.around);void 0!==Xa.pinchAround&&(Z.pinchAround=Xa.pinchAround);Xa.noInertia&&(Z.noInertia=Xa.noInertia);a.extend(da,mb);a.extend(aa,Na)}this._updateMapTransform(Z,da,aa);this._changes=[]};kf.prototype._updateMapTransform=
function(Z,da,aa){var ja=this._map,za=ja.transform;if(!Ca(Z))return this._fireEvents(da,aa);var Na=Z.panDelta,Xa=Z.zoomDelta,mb=Z.bearingDelta,Cb=Z.pitchDelta,Kb=Z.around,Mb=Z.pinchAround;void 0!==Mb&&(Kb=Mb);ja._stop(!0);Kb=Kb||ja.transform.centerPoint;ja=za.pointLocation(Na?Kb.sub(Na):Kb);mb&&(za.bearing+=mb);Cb&&(za.pitch+=Cb);Xa&&(za.zoom+=Xa);za.setLocationAtPoint(ja,Kb);this._map._update();Z.noInertia||this._inertia.record(Z);this._fireEvents(da,aa)};kf.prototype._fireEvents=function(Z,da){var aa=
this,ja=pe(this._eventsInProgress),za=pe(Z),Na={};for(Mb in Z)this._eventsInProgress[Mb]||(Na[Mb+"start"]=Z[Mb].originalEvent),this._eventsInProgress[Mb]=Z[Mb];for(var Xa in!ja&&za&&this._fireEvent("movestart",za.originalEvent),Na)this._fireEvent(Xa,Na[Xa]);for(var mb in Z.rotate&&(this._bearingChanged=!0),za&&this._fireEvent("move",za.originalEvent),Z)this._fireEvent(mb,Z[mb].originalEvent);var Cb;Z={};for(var Kb in this._eventsInProgress){var Mb=this._eventsInProgress[Kb];Na=Mb.handlerName;Mb=Mb.originalEvent;
this._handlersById[Na].isActive()||(delete this._eventsInProgress[Kb],Z[Kb+"end"]=Cb=da[Na]||Mb)}for(var pc in Z)this._fireEvent(pc,Z[pc]);da=pe(this._eventsInProgress);!ja&&!za||da||(this._updatingCamera=!0,ja=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),za=function(rc){return 0!==rc&&-aa._bearingSnap<rc&&rc<aa._bearingSnap},ja?(za(ja.bearing||this._map.getBearing())&&(ja.bearing=0),this._map.easeTo(ja,{originalEvent:Cb})):(this._map.fire(new a.Event("moveend",{originalEvent:Cb})),
za(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=this._bearingChanged=!1)};kf.prototype._fireEvent=function(Z,da){this._map.fire(new a.Event(Z,da?{originalEvent:da}:{}))};kf.prototype._triggerRenderFrame=function(){var Z=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(da){delete Z._frameId;Z.handleEvent(new Dk("renderFrame",{timeStamp:da}));Z._applyChanges()}))};var yj=function(Z){function da(aa,ja){Z.call(this);this._zooming=this._moving=
!1;this.transform=aa;this._bearingSnap=ja.bearingSnap;a.bindAll(["_renderFrameCallback"],this)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},da.prototype.setCenter=function(aa,ja){return this.jumpTo({center:aa},ja)},da.prototype.panBy=function(aa,ja,za){return aa=a.Point.convert(aa).mult(-1),this.panTo(this.transform.center,a.extend({offset:aa},ja),za)},
da.prototype.panTo=function(aa,ja,za){return this.easeTo(a.extend({center:aa},ja),za)},da.prototype.getZoom=function(){return this.transform.zoom},da.prototype.setZoom=function(aa,ja){return this.jumpTo({zoom:aa},ja),this},da.prototype.zoomTo=function(aa,ja,za){return this.easeTo(a.extend({zoom:aa},ja),za)},da.prototype.zoomIn=function(aa,ja){return this.zoomTo(this.getZoom()+1,aa,ja),this},da.prototype.zoomOut=function(aa,ja){return this.zoomTo(this.getZoom()-1,aa,ja),this},da.prototype.getBearing=
function(){return this.transform.bearing},da.prototype.setBearing=function(aa,ja){return this.jumpTo({bearing:aa},ja),this},da.prototype.getPadding=function(){return this.transform.padding},da.prototype.setPadding=function(aa,ja){return this.jumpTo({padding:aa},ja),this},da.prototype.rotateTo=function(aa,ja,za){return this.easeTo(a.extend({bearing:aa},ja),za)},da.prototype.resetNorth=function(aa,ja){return this.rotateTo(0,a.extend({duration:1E3},aa),ja),this},da.prototype.resetNorthPitch=function(aa,
ja){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1E3},aa),ja),this},da.prototype.snapToNorth=function(aa,ja){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(aa,ja):this},da.prototype.getPitch=function(){return this.transform.pitch},da.prototype.setPitch=function(aa,ja){return this.jumpTo({pitch:aa},ja),this},da.prototype.cameraForBounds=function(aa,ja){return aa=a.LngLatBounds.convert(aa),this._cameraForBoxAndBearing(aa.getNorthWest(),aa.getSouthEast(),0,ja)},da.prototype._cameraForBoxAndBearing=
function(aa,ja,za,Na){var Xa={top:0,bottom:0,right:0,left:0};if("number"==typeof(Na=a.extend({padding:Xa,offset:[0,0],maxZoom:this.transform.maxZoom},Na)).padding){var mb=Na.padding;Na.padding={top:mb,bottom:mb,right:mb,left:mb}}Na.padding=a.extend(Xa,Na.padding);Xa=this.transform;mb=Xa.padding;aa=Xa.project(a.LngLat.convert(aa));ja=Xa.project(a.LngLat.convert(ja));var Cb=aa.rotate(-za*Math.PI/180),Kb=ja.rotate(-za*Math.PI/180),Mb=new a.Point(Math.max(Cb.x,Kb.x),Math.max(Cb.y,Kb.y));Cb=new a.Point(Math.min(Cb.x,
Kb.x),Math.min(Cb.y,Kb.y));Cb=Mb.sub(Cb);Mb=(Xa.width-(mb.left+mb.right+Na.padding.left+Na.padding.right))/Cb.x;mb=(Xa.height-(mb.top+mb.bottom+Na.padding.top+Na.padding.bottom))/Cb.y;if(!(0>mb||0>Mb))return mb=Math.min(Xa.scaleZoom(Xa.scale*Math.min(Mb,mb)),Na.maxZoom),Mb=a.Point.convert(Na.offset),Na=(new a.Point(Mb.x+(Na.padding.left-Na.padding.right)/2,Mb.y+(Na.padding.top-Na.padding.bottom)/2)).mult(Xa.scale/Xa.zoomScale(mb)),{center:Xa.unproject(aa.add(ja).div(2).sub(Na)),zoom:mb,bearing:za};
a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},da.prototype.fitBounds=function(aa,ja,za){return this._fitInternal(this.cameraForBounds(aa,ja),ja,za)},da.prototype.fitScreenCoordinates=function(aa,ja,za,Na,Xa){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(aa)),this.transform.pointLocation(a.Point.convert(ja)),za,Na),Na,Xa)},da.prototype._fitInternal=function(aa,ja,za){return aa?(delete (ja=a.extend(aa,
ja)).padding,ja.linear?this.easeTo(ja,za):this.flyTo(ja,za)):this},da.prototype.jumpTo=function(aa,ja){this.stop();var za=this.transform,Na=!1,Xa=!1,mb=!1;return"zoom"in aa&&za.zoom!==+aa.zoom&&(Na=!0,za.zoom=+aa.zoom),void 0!==aa.center&&(za.center=a.LngLat.convert(aa.center)),"bearing"in aa&&za.bearing!==+aa.bearing&&(Xa=!0,za.bearing=+aa.bearing),"pitch"in aa&&za.pitch!==+aa.pitch&&(mb=!0,za.pitch=+aa.pitch),null==aa.padding||za.isPaddingEqual(aa.padding)||(za.padding=aa.padding),this.fire(new a.Event("movestart",
ja)).fire(new a.Event("move",ja)),Na&&this.fire(new a.Event("zoomstart",ja)).fire(new a.Event("zoom",ja)).fire(new a.Event("zoomend",ja)),Xa&&this.fire(new a.Event("rotatestart",ja)).fire(new a.Event("rotate",ja)).fire(new a.Event("rotateend",ja)),mb&&this.fire(new a.Event("pitchstart",ja)).fire(new a.Event("pitch",ja)).fire(new a.Event("pitchend",ja)),this.fire(new a.Event("moveend",ja))},da.prototype.easeTo=function(aa,ja){var za=this;this._stop(!1,aa.easeId);(!1===(aa=a.extend({offset:[0,0],duration:500,
easing:a.ease},aa)).animate||!aa.essential&&a.browser.prefersReducedMotion)&&(aa.duration=0);var Na=this.transform,Xa=this.getZoom(),mb=this.getBearing(),Cb=this.getPitch(),Kb=this.getPadding(),Mb="zoom"in aa?+aa.zoom:Xa,pc="bearing"in aa?this._normalizeBearing(aa.bearing,mb):mb,rc="pitch"in aa?+aa.pitch:Cb,hc="padding"in aa?aa.padding:Na.padding,Ib=a.Point.convert(aa.offset),Rb=Na.centerPoint.add(Ib),zc=Na.pointLocation(Rb),Tc=a.LngLat.convert(aa.center||zc);this._normalizeCenter(Tc);var dd,Lc,kd=
Na.project(zc),md=Na.project(Tc).sub(kd),Nd=Na.zoomScale(Mb-Xa);aa.around&&(dd=a.LngLat.convert(aa.around),Lc=Na.locationPoint(dd));zc={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Mb!==Xa,this._rotating=this._rotating||mb!==pc,this._pitching=this._pitching||rc!==Cb,this._padding=!Na.isPaddingEqual(hc),this._easeId=aa.easeId,this._prepareEase(ja,aa.noMoveStart,zc),clearTimeout(this._easeEndTimeoutID),this._ease(function(Bd){if(za._zooming&&
(Na.zoom=a.number(Xa,Mb,Bd)),za._rotating&&(Na.bearing=a.number(mb,pc,Bd)),za._pitching&&(Na.pitch=a.number(Cb,rc,Bd)),za._padding&&(Na.interpolatePadding(Kb,hc,Bd),Rb=Na.centerPoint.add(Ib)),dd)Na.setLocationAtPoint(dd,Lc);else{var vd=Na.zoomScale(Na.zoom-Xa);Bd=Na.unproject(kd.add(md.mult(Bd*Math.pow(Mb>Xa?Math.min(2,Nd):Math.max(.5,Nd),1-Bd))).mult(vd));Na.setLocationAtPoint(Na.renderWorldCopies?Bd.wrap():Bd,Rb)}za._fireMoveEvents(ja)},function(Bd){za._afterEase(ja,Bd)},aa),this},da.prototype._prepareEase=
function(aa,ja,za){void 0===za&&(za={});this._moving=!0;ja||za.moving||this.fire(new a.Event("movestart",aa));this._zooming&&!za.zooming&&this.fire(new a.Event("zoomstart",aa));this._rotating&&!za.rotating&&this.fire(new a.Event("rotatestart",aa));this._pitching&&!za.pitching&&this.fire(new a.Event("pitchstart",aa))},da.prototype._fireMoveEvents=function(aa){this.fire(new a.Event("move",aa));this._zooming&&this.fire(new a.Event("zoom",aa));this._rotating&&this.fire(new a.Event("rotate",aa));this._pitching&&
this.fire(new a.Event("pitch",aa))},da.prototype._afterEase=function(aa,ja){if(!this._easeId||!ja||this._easeId!==ja){delete this._easeId;ja=this._zooming;var za=this._rotating,Na=this._pitching;this._padding=this._pitching=this._rotating=this._zooming=this._moving=!1;ja&&this.fire(new a.Event("zoomend",aa));za&&this.fire(new a.Event("rotateend",aa));Na&&this.fire(new a.Event("pitchend",aa));this.fire(new a.Event("moveend",aa))}},da.prototype.flyTo=function(aa,ja){function za(ae){ae=(Ld*Ld-vd*vd+
(ae?-1:1)*de*de*Zd*Zd)/(2*(ae?Ld:vd)*de*Zd);return Math.log(Math.sqrt(ae*ae+1)-ae)}function Na(ae){return(Math.exp(ae)+Math.exp(-ae))/2}var Xa=this;if(!aa.essential&&a.browser.prefersReducedMotion)return aa=a.pick(aa,["center","zoom","bearing","pitch","around"]),this.jumpTo(aa,ja);this.stop();aa=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},aa);var mb=this.transform,Cb=this.getZoom(),Kb=this.getBearing(),Mb=this.getPitch(),pc=this.getPadding(),rc="zoom"in aa?a.clamp(+aa.zoom,mb.minZoom,
mb.maxZoom):Cb,hc="bearing"in aa?this._normalizeBearing(aa.bearing,Kb):Kb,Ib="pitch"in aa?+aa.pitch:Mb,Rb="padding"in aa?aa.padding:mb.padding,zc=mb.zoomScale(rc-Cb),Tc=a.Point.convert(aa.offset),dd=mb.centerPoint.add(Tc),Lc=mb.pointLocation(dd),kd=a.LngLat.convert(aa.center||Lc);this._normalizeCenter(kd);var md=mb.project(Lc),Nd=mb.project(kd).sub(md),Bd=aa.curve,vd=Math.max(mb.width,mb.height),Ld=vd/zc,Zd=Nd.mag();"minZoom"in aa&&(zc=a.clamp(Math.min(aa.minZoom,Cb,rc),mb.minZoom,mb.maxZoom),zc=
vd/mb.zoomScale(zc-Cb),Bd=Math.sqrt(zc/Zd*2));var de=Bd*Bd,me=za(0),He=function(ae){return Na(me)/Na(me+Bd*ae)},Md=function(ae){var we=Na(me);ae=Fe=me+Bd*ae;return vd*((we*((Math.exp(ae)-Math.exp(-ae))/2/Na(Fe))-(Math.exp(me)-Math.exp(-me))/2)/de)/Zd;var Fe},Ee=(za(1)-me)/Bd;if(1E-6>Math.abs(Zd)||!isFinite(Ee)){if(1E-6>Math.abs(vd-Ld))return this.easeTo(aa,ja);var Ce=Ld<vd?-1:1;Ee=Math.abs(Math.log(Ld/vd))/Bd;Md=function(){return 0};He=function(ae){return Math.exp(Ce*Bd*ae)}}return aa.duration="duration"in
aa?+aa.duration:1E3*Ee/("screenSpeed"in aa?+aa.screenSpeed/Bd:+aa.speed),aa.maxDuration&&aa.duration>aa.maxDuration&&(aa.duration=0),this._zooming=!0,this._rotating=Kb!==hc,this._pitching=Ib!==Mb,this._padding=!mb.isPaddingEqual(Rb),this._prepareEase(ja,!1),this._ease(function(ae){var we=ae*Ee,Fe=1/He(we);mb.zoom=1===ae?rc:Cb+mb.scaleZoom(Fe);Xa._rotating&&(mb.bearing=a.number(Kb,hc,ae));Xa._pitching&&(mb.pitch=a.number(Mb,Ib,ae));Xa._padding&&(mb.interpolatePadding(pc,Rb,ae),dd=mb.centerPoint.add(Tc));
ae=1===ae?kd:mb.unproject(md.add(Nd.mult(Md(we))).mult(Fe));mb.setLocationAtPoint(mb.renderWorldCopies?ae.wrap():ae,dd);Xa._fireMoveEvents(ja)},function(){return Xa._afterEase(ja)},aa),this},da.prototype.isEasing=function(){return!!this._easeFrameId},da.prototype.stop=function(){return this._stop()},da.prototype._stop=function(aa,ja){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var za=this._onEaseEnd;delete this._onEaseEnd;
za.call(this,ja)}aa||(aa=this.handlers)&&aa.stop();return this},da.prototype._ease=function(aa,ja,za){!1===za.animate||0===za.duration?(aa(1),ja()):(this._easeStart=a.browser.now(),this._easeOptions=za,this._onEaseFrame=aa,this._onEaseEnd=ja,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},da.prototype._renderFrameCallback=function(){var aa=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(aa));1>aa?this._easeFrameId=
this._requestRenderFrame(this._renderFrameCallback):this.stop()},da.prototype._normalizeBearing=function(aa,ja){aa=a.wrap(aa,-180,180);var za=Math.abs(aa-ja);return Math.abs(aa-360-ja)<za&&(aa-=360),Math.abs(aa+360-ja)<za&&(aa+=360),aa},da.prototype._normalizeCenter=function(aa){var ja=this.transform;ja.renderWorldCopies&&!ja.lngRange&&(ja=aa.lng-ja.center.lng,aa.lng+=180<ja?-360:-180>ja?360:0)},da}(a.Evented),mg=function(Z){void 0===Z&&(Z={});this.options=Z;a.bindAll(["_updateEditLink","_updateData",
"_updateCompact"],this)};mg.prototype.getDefaultPosition=function(){return"bottom-right"};mg.prototype.onAdd=function(Z){var da=this.options&&this.options.compact;return this._map=Z,this._container=Qa.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=Qa.create("div","mapboxgl-ctrl-attrib-inner",this._container),da&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",
this._updateData),this._map.on("moveend",this._updateEditLink),void 0===da&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};mg.prototype.onRemove=function(){Qa.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._attribHTML=this._map=void 0};mg.prototype._updateEditLink=function(){var Z=this._editLink;Z||(Z=
this._editLink=this._container.querySelector(".mapbox-improve-map"));var da=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(Z){var aa=da.reduce(function(ja,za,Na){return za.value&&(ja+=za.key+"\x3d"+za.value+(Na<da.length-1?"\x26":"")),ja},"?");Z.href=a.config.FEEDBACK_URL+"/"+aa+(this._map._hash?this._map._hash.getHashString(!0):"");Z.rel="noopener nofollow"}};mg.prototype._updateData=
function(Z){!Z||"metadata"!==Z.sourceDataType&&"style"!==Z.dataType||(this._updateAttributions(),this._updateEditLink())};mg.prototype._updateAttributions=function(){if(this._map.style){var Z=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?Z=Z.concat(this.options.customAttribution.map(function(za){return"string"!=typeof za?"":za})):"string"==typeof this.options.customAttribution&&Z.push(this.options.customAttribution)),this._map.style.stylesheet){var da=this._map.style.stylesheet;
this.styleOwner=da.owner;this.styleId=da.id}da=this._map.style.sourceCaches;for(var aa in da){var ja=da[aa];ja.used&&(ja=ja.getSource(),ja.attribution&&0>Z.indexOf(ja.attribution)&&Z.push(ja.attribution))}Z.sort(function(za,Na){return za.length-Na.length});aa=(Z=Z.filter(function(za,Na){for(Na+=1;Na<Z.length;Na++)if(0<=Z[Na].indexOf(za))return!1;return!0})).join(" | ");aa!==this._attribHTML&&(this._attribHTML=aa,Z.length?(this._innerContainer.innerHTML=aa,this._container.classList.remove("mapboxgl-attrib-empty")):
this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}};mg.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var wg=function(){a.bindAll(["_updateLogo"],this);a.bindAll(["_updateCompact"],this)};wg.prototype.onAdd=function(Z){this._map=Z;this._container=Qa.create("div","mapboxgl-ctrl");Z=Qa.create("a","mapboxgl-ctrl-logo");return Z.target=
"_blank",Z.rel="noopener nofollow",Z.href="https://www.mapbox.com/",Z.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Z.setAttribute("rel","noopener nofollow"),this._container.appendChild(Z),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container};wg.prototype.onRemove=function(){Qa.remove(this._container);this._map.off("sourcedata",this._updateLogo);
this._map.off("resize",this._updateCompact)};wg.prototype.getDefaultPosition=function(){return"bottom-left"};wg.prototype._updateLogo=function(Z){Z&&"metadata"!==Z.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};wg.prototype._logoRequired=function(){if(this._map.style){var Z=this._map.style.sourceCaches,da;for(da in Z)if(Z[da].getSource().mapbox_logo)return!0;return!1}};wg.prototype._updateCompact=function(){var Z=this._container.children;Z.length&&(Z=Z[0],250>
this._map.getCanvasContainer().offsetWidth?Z.classList.add("mapboxgl-compact"):Z.classList.remove("mapboxgl-compact"))};var Ig=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};Ig.prototype.add=function(Z){var da=++this._id;return this._queue.push({callback:Z,id:da,cancelled:!1}),da};Ig.prototype.remove=function(Z){var da=this._currentlyRunning,aa=0;for(da=da?this._queue.concat(da):this._queue;aa<da.length;aa+=1){var ja=da[aa];if(ja.id===Z)return void(ja.cancelled=!0)}};
Ig.prototype.run=function(Z){void 0===Z&&(Z=0);var da=this._currentlyRunning=this._queue;this._queue=[];for(var aa=0;aa<da.length;aa+=1){var ja=da[aa];if(!ja.cancelled&&(ja.callback(Z),this._cleared))break}this._currentlyRunning=this._cleared=!1};Ig.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var Ph={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available",
"LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},bh=a.window.HTMLImageElement,bk=a.window.HTMLElement,Qh=a.window.ImageBitmap,Ek={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,
boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},zh=function(Z){function da(ja){var za=this;if(null!=(ja=a.extend({},
Ek,ja)).minZoom&&null!=ja.maxZoom&&ja.minZoom>ja.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=ja.minPitch&&null!=ja.maxPitch&&ja.minPitch>ja.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=ja.minPitch&&0>ja.minPitch)throw Error("minPitch must be greater than or equal to 0");if(null!=ja.maxPitch&&60<ja.maxPitch)throw Error("maxPitch must be less than or equal to 60");var Na=new Je(ja.minZoom,ja.maxZoom,ja.minPitch,ja.maxPitch,
ja.renderWorldCopies);if(Z.call(this,Na,ja),this._interactive=ja.interactive,this._maxTileCacheSize=ja.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ja.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ja.preserveDrawingBuffer,this._antialias=ja.antialias,this._trackResize=ja.trackResize,this._bearingSnap=ja.bearingSnap,this._refreshExpiredTiles=ja.refreshExpiredTiles,this._fadeDuration=ja.fadeDuration,this._crossSourceCollisions=ja.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=
ja.collectResourceTiming,this._renderTaskQueue=new Ig,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Ph,ja.locale),this._requestManager=new a.RequestManager(ja.transformRequest,ja.accessToken),"string"==typeof ja.container){if(this._container=a.window.document.getElementById(ja.container),!this._container)throw Error("Container '"+ja.container+"' not found.");}else{if(!(ja.container instanceof bk))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=
ja.container}if(ja.maxBounds&&this.setMaxBounds(ja.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return za._update(!1)});this.on("moveend",function(){return za._update(!1)});this.on("zoom",function(){return za._update(!0)});void 0!==a.window&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",
this._onWindowResize,!1));this.handlers=new kf(this,ja);(this._hash=ja.hash&&(new Xg("string"==typeof ja.hash&&ja.hash||void 0)).addTo(this))&&this._hash._onHashChange()||(this.jumpTo({center:ja.center,zoom:ja.zoom,bearing:ja.bearing,pitch:ja.pitch}),ja.bounds&&(this.resize(),this.fitBounds(ja.bounds,a.extend({},ja.fitBoundsOptions,{duration:0}))));this.resize();this._localIdeographFontFamily=ja.localIdeographFontFamily;ja.style&&this.setStyle(ja.style,{localIdeographFontFamily:ja.localIdeographFontFamily});
ja.attributionControl&&this.addControl(new mg({customAttribution:ja.customAttribution}));this.addControl(new wg,ja.logoPosition);this.on("style.load",function(){za.transform.unmodified&&za.jumpTo(za.style.stylesheet)});this.on("data",function(Xa){za._update("style"===Xa.dataType);za.fire(new a.Event(Xa.dataType+"data",Xa))});this.on("dataloading",function(Xa){za.fire(new a.Event(Xa.dataType+"dataloading",Xa))})}Z&&(da.__proto__=Z);(da.prototype=Object.create(Z&&Z.prototype)).constructor=da;var aa=
{showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return da.prototype._getMapId=function(){return this._mapId},da.prototype.addControl=function(ja,za){if(void 0===za&&ja.getDefaultPosition&&(za=ja.getDefaultPosition()),void 0===za&&(za="top-right"),!ja||!ja.onAdd)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
var Na=ja.onAdd(this);this._controls.push(ja);ja=this._controlPositions[za];return-1!==za.indexOf("bottom")?ja.insertBefore(Na,ja.firstChild):ja.appendChild(Na),this},da.prototype.removeControl=function(ja){if(!ja||!ja.onRemove)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var za=this._controls.indexOf(ja);return-1<za&&this._controls.splice(za,1),ja.onRemove(this),this},da.prototype.resize=function(ja){var za=
this._containerDimensions(),Na=za[0];za=za[1];this._resizeCanvas(Na,za);this.transform.resize(Na,za);this.painter.resize(Na,za);Na=!this._moving;return Na&&(this.stop(),this.fire(new a.Event("movestart",ja)).fire(new a.Event("move",ja))),this.fire(new a.Event("resize",ja)),Na&&this.fire(new a.Event("moveend",ja)),this},da.prototype.getBounds=function(){return this.transform.getBounds()},da.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},da.prototype.setMaxBounds=function(ja){return this.transform.setMaxBounds(a.LngLatBounds.convert(ja)),
this._update()},da.prototype.setMinZoom=function(ja){if(-2<=(ja=null==ja?-2:ja)&&ja<=this.transform.maxZoom)return this.transform.minZoom=ja,this._update(),this.getZoom()<ja&&this.setZoom(ja),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");},da.prototype.getMinZoom=function(){return this.transform.minZoom},da.prototype.setMaxZoom=function(ja){if((ja=null==ja?22:ja)>=this.transform.minZoom)return this.transform.maxZoom=ja,this._update(),this.getZoom()>ja&&this.setZoom(ja),
this;throw Error("maxZoom must be greater than the current minZoom");},da.prototype.getMaxZoom=function(){return this.transform.maxZoom},da.prototype.setMinPitch=function(ja){if(0>(ja=null==ja?0:ja))throw Error("minPitch must be greater than or equal to 0");if(0<=ja&&ja<=this.transform.maxPitch)return this.transform.minPitch=ja,this._update(),this.getPitch()<ja&&this.setPitch(ja),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");},da.prototype.getMinPitch=function(){return this.transform.minPitch},
da.prototype.setMaxPitch=function(ja){if(60<(ja=null==ja?60:ja))throw Error("maxPitch must be less than or equal to 60");if(ja>=this.transform.minPitch)return this.transform.maxPitch=ja,this._update(),this.getPitch()>ja&&this.setPitch(ja),this;throw Error("maxPitch must be greater than the current minPitch");},da.prototype.getMaxPitch=function(){return this.transform.maxPitch},da.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},da.prototype.setRenderWorldCopies=function(ja){return this.transform.renderWorldCopies=
ja,this._update()},da.prototype.project=function(ja){return this.transform.locationPoint(a.LngLat.convert(ja))},da.prototype.unproject=function(ja){return this.transform.pointLocation(a.Point.convert(ja))},da.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},da.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},da.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},da.prototype._createDelegatedListener=function(ja,
za,Na){var Xa,mb=this;if("mouseenter"===ja||"mouseover"===ja){var Cb=!1;return{layer:za,listener:Na,delegates:{mousemove:function(Mb){var pc=mb.getLayer(za)?mb.queryRenderedFeatures(Mb.point,{layers:[za]}):[];pc.length?Cb||(Cb=!0,Na.call(mb,new bg(ja,mb,Mb.originalEvent,{features:pc}))):Cb=!1},mouseout:function(){Cb=!1}}}}if("mouseleave"===ja||"mouseout"===ja){var Kb=!1;return{layer:za,listener:Na,delegates:{mousemove:function(Mb){(mb.getLayer(za)?mb.queryRenderedFeatures(Mb.point,{layers:[za]}):
[]).length?Kb=!0:Kb&&(Kb=!1,Na.call(mb,new bg(ja,mb,Mb.originalEvent)))},mouseout:function(Mb){Kb&&(Kb=!1,Na.call(mb,new bg(ja,mb,Mb.originalEvent)))}}}}return{layer:za,listener:Na,delegates:(Xa={},Xa[ja]=function(Mb){var pc=mb.getLayer(za)?mb.queryRenderedFeatures(Mb.point,{layers:[za]}):[];pc.length&&(Mb.features=pc,Na.call(mb,Mb),delete Mb.features)},Xa)}},da.prototype.on=function(ja,za,Na){if(void 0===Na)return Z.prototype.on.call(this,ja,za);za=this._createDelegatedListener(ja,za,Na);for(var Xa in this._delegatedListeners=
this._delegatedListeners||{},this._delegatedListeners[ja]=this._delegatedListeners[ja]||[],this._delegatedListeners[ja].push(za),za.delegates)this.on(Xa,za.delegates[Xa]);return this},da.prototype.once=function(ja,za,Na){if(void 0===Na)return Z.prototype.once.call(this,ja,za);ja=this._createDelegatedListener(ja,za,Na);for(var Xa in ja.delegates)this.once(Xa,ja.delegates[Xa]);return this},da.prototype.off=function(ja,za,Na){if(void 0===Na)za=Z.prototype.off.call(this,ja,za);else{if(this._delegatedListeners&&
this._delegatedListeners[ja])a:{ja=this._delegatedListeners[ja];for(var Xa=0;Xa<ja.length;Xa++){var mb=ja[Xa];if(mb.layer===za&&mb.listener===Na){for(var Cb in mb.delegates)this.off(Cb,mb.delegates[Cb]);ja.splice(Xa,1);break a}}}za=this}return za},da.prototype.queryRenderedFeatures=function(ja,za){if(!this.style)return[];if(void 0!==za||void 0===ja||ja instanceof a.Point||Array.isArray(ja)||(za=ja,ja=void 0),za=za||{},(ja=ja||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||
"number"==typeof ja[0])var Na=[a.Point.convert(ja)];else Na=a.Point.convert(ja[0]),ja=a.Point.convert(ja[1]),Na=[Na,new a.Point(ja.x,Na.y),ja,new a.Point(Na.x,ja.y),Na];return this.style.queryRenderedFeatures(Na,za,this.transform)},da.prototype.querySourceFeatures=function(ja,za){return this.style.querySourceFeatures(ja,za)},da.prototype.setStyle=function(ja,za){return!1!==(za=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},za)).diff&&za.localIdeographFontFamily===this._localIdeographFontFamily&&
this.style&&ja?(this._diffStyle(ja,za),this):(this._localIdeographFontFamily=za.localIdeographFontFamily,this._updateStyle(ja,za))},da.prototype._getUIString=function(ja){var za=this._locale[ja];if(null==za)throw Error("Missing UI string '"+ja+"'");return za},da.prototype._updateStyle=function(ja,za){return this.style&&(this.style.setEventedParent(null),this.style._remove()),ja?(this.style=new qd(this,za||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof ja?this.style.loadURL(ja):
this.style.loadJSON(ja),this):(delete this.style,this)},da.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},da.prototype._diffStyle=function(ja,za){var Na=this;"string"==typeof ja?(ja=this._requestManager.normalizeStyleURL(ja),ja=this._requestManager.transformRequest(ja,a.ResourceType.Style),a.getJSON(ja,function(Xa,mb){Xa?Na.fire(new a.ErrorEvent(Xa)):mb&&Na._updateDiff(mb,za)})):"object"==
typeof ja&&this._updateDiff(ja,za)},da.prototype._updateDiff=function(ja,za){try{this.style.setState(ja)&&this._update(!0)}catch(Na){a.warnOnce("Unable to perform style diff: "+(Na.message||Na.error||Na)+".  Rebuilding the style from scratch."),this._updateStyle(ja,za)}},da.prototype.getStyle=function(){if(this.style)return this.style.serialize()},da.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},da.prototype.addSource=function(ja,
za){return this._lazyInitEmptyStyle(),this.style.addSource(ja,za),this._update(!0)},da.prototype.isSourceLoaded=function(ja){var za=this.style&&this.style.sourceCaches[ja];if(void 0!==za)return za.loaded();this.fire(new a.ErrorEvent(Error("There is no source with ID '"+ja+"'")))},da.prototype.areTilesLoaded=function(){var ja=this.style&&this.style.sourceCaches,za;for(za in ja){var Na=ja[za]._tiles,Xa;for(Xa in Na){var mb=Na[Xa];if("loaded"!==mb.state&&"errored"!==mb.state)return!1}}return!0},da.prototype.addSourceType=
function(ja,za,Na){return this._lazyInitEmptyStyle(),this.style.addSourceType(ja,za,Na)},da.prototype.removeSource=function(ja){return this.style.removeSource(ja),this._update(!0)},da.prototype.getSource=function(ja){return this.style.getSource(ja)},da.prototype.addImage=function(ja,za,Na){void 0===Na&&(Na={});var Xa=Na.pixelRatio;void 0===Xa&&(Xa=1);var mb=Na.sdf;void 0===mb&&(mb=!1);var Cb=Na.stretchX,Kb=Na.stretchY;Na=Na.content;if(this._lazyInitEmptyStyle(),za instanceof bh||Qh&&za instanceof
Qh)za=a.browser.getImageData(za),this.style.addImage(ja,{data:new a.RGBAImage({width:za.width,height:za.height},za.data),pixelRatio:Xa,stretchX:Cb,stretchY:Kb,content:Na,sdf:mb,version:0});else{if(void 0===za.width||void 0===za.height)return this.fire(new a.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(ja,
{data:new a.RGBAImage({width:za.width,height:za.height},new Uint8Array(za.data)),pixelRatio:Xa,stretchX:Cb,stretchY:Kb,content:Na,sdf:mb,version:0,userImage:za});za.onAdd&&za.onAdd(this,ja)}},da.prototype.updateImage=function(ja,za){var Na=this.style.getImage(ja);if(!Na)return this.fire(new a.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Xa=za instanceof bh||Qh&&za instanceof Qh?a.browser.getImageData(za):za,mb=Xa.width,
Cb=Xa.height;Xa=Xa.data;return void 0===mb||void 0===Cb?this.fire(new a.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):mb!==Na.data.width||Cb!==Na.data.height?this.fire(new a.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image"))):(Na.data.replace(Xa,!(za instanceof
bh||Qh&&za instanceof Qh)),void this.style.updateImage(ja,Na))},da.prototype.hasImage=function(ja){return ja?!!this.style.getImage(ja):(this.fire(new a.ErrorEvent(Error("Missing required image id"))),!1)},da.prototype.removeImage=function(ja){this.style.removeImage(ja)},da.prototype.loadImage=function(ja,za){a.getImage(this._requestManager.transformRequest(ja,a.ResourceType.Image),za)},da.prototype.listImages=function(){return this.style.listImages()},da.prototype.addLayer=function(ja,za){return this._lazyInitEmptyStyle(),
this.style.addLayer(ja,za),this._update(!0)},da.prototype.moveLayer=function(ja,za){return this.style.moveLayer(ja,za),this._update(!0)},da.prototype.removeLayer=function(ja){return this.style.removeLayer(ja),this._update(!0)},da.prototype.getLayer=function(ja){return this.style.getLayer(ja)},da.prototype.setLayerZoomRange=function(ja,za,Na){return this.style.setLayerZoomRange(ja,za,Na),this._update(!0)},da.prototype.setFilter=function(ja,za,Na){return void 0===Na&&(Na={}),this.style.setFilter(ja,
za,Na),this._update(!0)},da.prototype.getFilter=function(ja){return this.style.getFilter(ja)},da.prototype.setPaintProperty=function(ja,za,Na,Xa){return void 0===Xa&&(Xa={}),this.style.setPaintProperty(ja,za,Na,Xa),this._update(!0)},da.prototype.getPaintProperty=function(ja,za){return this.style.getPaintProperty(ja,za)},da.prototype.setLayoutProperty=function(ja,za,Na,Xa){return void 0===Xa&&(Xa={}),this.style.setLayoutProperty(ja,za,Na,Xa),this._update(!0)},da.prototype.getLayoutProperty=function(ja,
za){return this.style.getLayoutProperty(ja,za)},da.prototype.setLight=function(ja,za){return void 0===za&&(za={}),this._lazyInitEmptyStyle(),this.style.setLight(ja,za),this._update(!0)},da.prototype.getLight=function(){return this.style.getLight()},da.prototype.setFeatureState=function(ja,za){return this.style.setFeatureState(ja,za),this._update()},da.prototype.removeFeatureState=function(ja,za){return this.style.removeFeatureState(ja,za),this._update()},da.prototype.getFeatureState=function(ja){return this.style.getFeatureState(ja)},
da.prototype.getContainer=function(){return this._container},da.prototype.getCanvasContainer=function(){return this._canvasContainer},da.prototype.getCanvas=function(){return this._canvas},da.prototype._containerDimensions=function(){var ja=0,za=0;return this._container&&(ja=this._container.clientWidth||400,za=this._container.clientHeight||300),[ja,za]},da.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&
a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},da.prototype._setupContainer=function(){var ja=this._container;ja.classList.add("mapboxgl-map");(this._missingCSSCanary=Qa.create("div","mapboxgl-canary",ja)).style.visibility="hidden";this._detectMissingCSS();var za=this._canvasContainer=Qa.create("div","mapboxgl-canvas-container",
ja);this._interactive&&za.classList.add("mapboxgl-interactive");this._canvas=Qa.create("canvas","mapboxgl-canvas",za);this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");za=this._containerDimensions();this._resizeCanvas(za[0],za[1]);var Na=this._controlContainer=Qa.create("div","mapboxgl-control-container",ja),Xa=
this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(mb){Xa[mb]=Qa.create("div","mapboxgl-ctrl-"+mb,Na)})},da.prototype._resizeCanvas=function(ja,za){var Na=a.browser.devicePixelRatio||1;this._canvas.width=Na*ja;this._canvas.height=Na*za;this._canvas.style.width=ja+"px";this._canvas.style.height=za+"px"},da.prototype._setupPainter=function(){var ja=a.extend({},Ia.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,
antialias:this._antialias||!1});(ja=this._canvas.getContext("webgl",ja)||this._canvas.getContext("experimental-webgl",ja))?(this.painter=new Se(ja,this.transform),a.webpSupported.testSupport(ja)):this.fire(new a.ErrorEvent(Error("Failed to initialize WebGL")))},da.prototype._contextLost=function(ja){ja.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new a.Event("webglcontextlost",{originalEvent:ja}))},da.prototype._contextRestored=function(ja){this._setupPainter();
this.resize();this._update();this.fire(new a.Event("webglcontextrestored",{originalEvent:ja}))},da.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},da.prototype._update=function(ja){return this.style?(this._styleDirty=this._styleDirty||ja,this._sourcesDirty=!0,this.triggerRepaint(),this):this},da.prototype._requestRenderFrame=function(ja){return this._update(),this._renderTaskQueue.add(ja)},da.prototype._cancelRenderFrame=function(ja){this._renderTaskQueue.remove(ja)},
da.prototype._render=function(ja){var za,Na=this,Xa=0,mb=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(za=mb.createQueryEXT(),mb.beginQueryEXT(mb.TIME_ELAPSED_EXT,za),Xa=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ja),!this._removed){ja=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Cb=this.transform.zoom,Kb=a.browser.now();this.style.zoomHistory.update(Cb,Kb);Cb=new a.EvaluationParameters(Cb,{now:Kb,
fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});Kb=Cb.crossFadingFactor();1===Kb&&Kb===this._crossFadingFactor||(ja=!0,this._crossFadingFactor=Kb);this.style.update(Cb)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,
{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||ja)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),
this.listens("gpu-timing-frame")){var Mb=a.browser.now()-Xa;mb.endQueryEXT(mb.TIME_ELAPSED_EXT,za);setTimeout(function(){var rc=mb.getQueryObjectEXT(za,mb.QUERY_RESULT_EXT)/1E6;mb.deleteQueryEXT(za);Na.fire(new a.Event("gpu-timing-frame",{cpuTime:Mb,gpuTime:rc}))},50)}if(this.listens("gpu-timing-layer")){var pc=this.painter.collectGpuTimers();setTimeout(function(){var rc=Na.painter.queryGpuTimers(pc);Na.fire(new a.Event("gpu-timing-layer",{layerTimes:rc}))},50)}return this._sourcesDirty||this._styleDirty||
this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new a.Event("idle"))),this}},da.prototype.remove=function(){this._hash&&this._hash.remove();for(var ja=0,za=this._controls;ja<za.length;ja+=1)za[ja].onRemove(this);this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.painter.destroy();this.handlers.destroy();delete this.handlers;this.setStyle(null);void 0!==
a.window&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));(ja=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&ja.loseContext();Ja(this._canvasContainer);Ja(this._controlContainer);Ja(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this._removed=!0;this.fire(new a.Event("remove"))},da.prototype.triggerRepaint=function(){var ja=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(za){ja._frame=
null;ja._render(za)}))},da.prototype._onWindowOnline=function(){this._update()},da.prototype._onWindowResize=function(ja){this._trackResize&&this.resize({originalEvent:ja})._update()},aa.showTileBoundaries.get=function(){return!!this._showTileBoundaries},aa.showTileBoundaries.set=function(ja){this._showTileBoundaries!==ja&&(this._showTileBoundaries=ja,this._update())},aa.showPadding.get=function(){return!!this._showPadding},aa.showPadding.set=function(ja){this._showPadding!==ja&&(this._showPadding=
ja,this._update())},aa.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},aa.showCollisionBoxes.set=function(ja){this._showCollisionBoxes!==ja&&(this._showCollisionBoxes=ja,ja?this.style._generateCollisionBoxes():this._update())},aa.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},aa.showOverdrawInspector.set=function(ja){this._showOverdrawInspector!==ja&&(this._showOverdrawInspector=ja,this._update())},aa.repaint.get=function(){return!!this._repaint},aa.repaint.set=
function(ja){this._repaint!==ja&&(this._repaint=ja,this.triggerRepaint())},aa.vertices.get=function(){return!!this._vertices},aa.vertices.set=function(ja){this._vertices=ja;this._update()},da.prototype._setCacheLimits=function(ja,za){a.setCacheLimits(ja,za)},aa.version.get=function(){return a.version},Object.defineProperties(da.prototype,aa),da}(yj),lf={showCompass:!0,showZoom:!0,visualizePitch:!1},ng=function(Z){var da=this;this.options=a.extend({},lf,Z);this._container=Qa.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");
this._container.addEventListener("contextmenu",function(aa){return aa.preventDefault()});this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(aa){return da._map.zoomIn({},{originalEvent:aa})}),Qa.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(aa){return da._map.zoomOut({},{originalEvent:aa})}),
Qa.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0));this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(aa){da.options.visualizePitch?da._map.resetNorthPitch({},{originalEvent:aa}):da._map.resetNorth({},{originalEvent:aa})}),this._compassIcon=Qa.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ng.prototype._updateZoomButtons=function(){var Z=
this._map.getZoom();this._zoomInButton.disabled=Z===this._map.getMaxZoom();this._zoomOutButton.disabled=Z===this._map.getMinZoom()};ng.prototype._rotateCompassArrow=function(){this._compassIcon.style.transform=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(Math.PI/180*this._map.transform.pitch),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+180/Math.PI*this._map.transform.angle+"deg)":"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};ng.prototype.onAdd=function(Z){return this._map=
Z,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bf(this._map,this._compass,this.options.visualizePitch)),
this._container};ng.prototype.onRemove=function(){Qa.remove(this._container);this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons);this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler);delete this._map};ng.prototype._createButton=function(Z,da){Z=Qa.create("button",Z,this._container);return Z.type="button",Z.addEventListener("click",da),Z};ng.prototype._setButtonTitle=
function(Z,da){da=this._map._getUIString("NavigationControl."+da);Z.title=da;Z.setAttribute("aria-label",da)};var Bf=function(Z,da,aa){void 0===aa&&(aa=!1);this._clickTolerance=10;this.element=da;this.mouseRotate=new xj({clickTolerance:Z.dragRotate._mouseRotate._clickTolerance});this.map=Z;aa&&(this.mousePitch=new Vi({clickTolerance:Z.dragRotate._mousePitch._clickTolerance}));a.bindAll("mousedown mousemove mouseup touchstart touchmove touchend reset".split(" "),this);Qa.addEventListener(da,"mousedown",
this.mousedown);Qa.addEventListener(da,"touchstart",this.touchstart,{passive:!1});Qa.addEventListener(da,"touchmove",this.touchmove);Qa.addEventListener(da,"touchend",this.touchend);Qa.addEventListener(da,"touchcancel",this.reset)};Bf.prototype.down=function(Z,da){this.mouseRotate.mousedown(Z,da);this.mousePitch&&this.mousePitch.mousedown(Z,da);Qa.disableDrag()};Bf.prototype.move=function(Z,da){var aa=this.map,ja=this.mouseRotate.mousemoveWindow(Z,da);(ja&&ja.bearingDelta&&aa.setBearing(aa.getBearing()+
ja.bearingDelta),this.mousePitch)&&(Z=this.mousePitch.mousemoveWindow(Z,da))&&Z.pitchDelta&&aa.setPitch(aa.getPitch()+Z.pitchDelta)};Bf.prototype.off=function(){var Z=this.element;Qa.removeEventListener(Z,"mousedown",this.mousedown);Qa.removeEventListener(Z,"touchstart",this.touchstart,{passive:!1});Qa.removeEventListener(Z,"touchmove",this.touchmove);Qa.removeEventListener(Z,"touchend",this.touchend);Qa.removeEventListener(Z,"touchcancel",this.reset);this.offTemp()};Bf.prototype.offTemp=function(){Qa.enableDrag();
Qa.removeEventListener(a.window,"mousemove",this.mousemove);Qa.removeEventListener(a.window,"mouseup",this.mouseup)};Bf.prototype.mousedown=function(Z){this.down(a.extend({},Z,{ctrlKey:!0,preventDefault:function(){return Z.preventDefault()}}),Qa.mousePos(this.element,Z));Qa.addEventListener(a.window,"mousemove",this.mousemove);Qa.addEventListener(a.window,"mouseup",this.mouseup)};Bf.prototype.mousemove=function(Z){this.move(Z,Qa.mousePos(this.element,Z))};Bf.prototype.mouseup=function(Z){this.mouseRotate.mouseupWindow(Z);
this.mousePitch&&this.mousePitch.mouseupWindow(Z);this.offTemp()};Bf.prototype.touchstart=function(Z){1!==Z.targetTouches.length?this.reset():(this._startPos=this._lastPos=Qa.touchPos(this.element,Z.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return Z.preventDefault()}},this._startPos))};Bf.prototype.touchmove=function(Z){1!==Z.targetTouches.length?this.reset():(this._lastPos=Qa.touchPos(this.element,Z.targetTouches)[0],this.move({preventDefault:function(){return Z.preventDefault()}},
this._lastPos))};Bf.prototype.touchend=function(Z){0===Z.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click();this.reset()};Bf.prototype.reset=function(){this.mouseRotate.reset();this.mousePitch&&this.mousePitch.reset();delete this._startPos;delete this._lastPos;this.offTemp()};var Rh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)",
"bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},If,Ah=function(Z){function da(aa,ja){var za=this;if(Z.call(this),(aa instanceof a.window.HTMLElement||ja)&&(aa=a.extend({element:aa},ja)),a.bindAll("_update _onMove _onUp _addDragHandler _onMapClick _onKeyPress".split(" "),this),this._anchor=aa&&aa.anchor||"center",this._color=aa&&aa.color||"#3FB1CE",this._draggable=aa&&aa.draggable||!1,this._state="inactive",this._rotation=
aa&&aa.rotation||0,this._rotationAlignment=aa&&aa.rotationAlignment||"auto",this._pitchAlignment=aa&&aa.pitchAlignment&&"auto"!==aa.pitchAlignment?aa.pitchAlignment:this._rotationAlignment,aa&&aa.element)this._element=aa.element,this._offset=a.Point.convert(aa&&aa.offset||[0,0]);else{this._defaultMarker=!0;this._element=Qa.create("div");this._element.setAttribute("aria-label","Map marker");ja=Qa.createNS("http://www.w3.org/2000/svg","svg");ja.setAttributeNS(null,"display","block");ja.setAttributeNS(null,
"height","41px");ja.setAttributeNS(null,"width","27px");ja.setAttributeNS(null,"viewBox","0 0 27 41");var Na=Qa.createNS("http://www.w3.org/2000/svg","g");Na.setAttributeNS(null,"stroke","none");Na.setAttributeNS(null,"stroke-width","1");Na.setAttributeNS(null,"fill","none");Na.setAttributeNS(null,"fill-rule","evenodd");Na=Qa.createNS("http://www.w3.org/2000/svg","g");Na.setAttributeNS(null,"fill-rule","nonzero");var Xa=Qa.createNS("http://www.w3.org/2000/svg","g");Xa.setAttributeNS(null,"transform",
"translate(3.0, 29.0)");Xa.setAttributeNS(null,"fill","#000000");for(var mb=0,Cb=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];mb<Cb.length;mb+=1){var Kb=Cb[mb],Mb=Qa.createNS("http://www.w3.org/2000/svg","ellipse");Mb.setAttributeNS(null,"opacity","0.04");Mb.setAttributeNS(null,"cx","10.5");Mb.setAttributeNS(null,"cy","5.80029008");
Mb.setAttributeNS(null,"rx",Kb.rx);Mb.setAttributeNS(null,"ry",Kb.ry);Xa.appendChild(Mb)}mb=Qa.createNS("http://www.w3.org/2000/svg","g");mb.setAttributeNS(null,"fill",this._color);Cb=Qa.createNS("http://www.w3.org/2000/svg","path");Cb.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");mb.appendChild(Cb);
Cb=Qa.createNS("http://www.w3.org/2000/svg","g");Cb.setAttributeNS(null,"opacity","0.25");Cb.setAttributeNS(null,"fill","#000000");Kb=Qa.createNS("http://www.w3.org/2000/svg","path");Kb.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
Cb.appendChild(Kb);Kb=Qa.createNS("http://www.w3.org/2000/svg","g");Kb.setAttributeNS(null,"transform","translate(6.0, 7.0)");Kb.setAttributeNS(null,"fill","#FFFFFF");Mb=Qa.createNS("http://www.w3.org/2000/svg","g");Mb.setAttributeNS(null,"transform","translate(8.0, 8.0)");var pc=Qa.createNS("http://www.w3.org/2000/svg","circle");pc.setAttributeNS(null,"fill","#000000");pc.setAttributeNS(null,"opacity","0.25");pc.setAttributeNS(null,"cx","5.5");pc.setAttributeNS(null,"cy","5.5");pc.setAttributeNS(null,
"r","5.4999962");var rc=Qa.createNS("http://www.w3.org/2000/svg","circle");rc.setAttributeNS(null,"fill","#FFFFFF");rc.setAttributeNS(null,"cx","5.5");rc.setAttributeNS(null,"cy","5.5");rc.setAttributeNS(null,"r","5.4999962");Mb.appendChild(pc);Mb.appendChild(rc);Na.appendChild(Xa);Na.appendChild(mb);Na.appendChild(Cb);Na.appendChild(Kb);Na.appendChild(Mb);ja.appendChild(Na);this._element.appendChild(ja);this._offset=a.Point.convert(aa&&aa.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");
this._element.addEventListener("dragstart",function(hc){hc.preventDefault()});this._element.addEventListener("mousedown",function(hc){hc.preventDefault()});this._element.addEventListener("focus",function(){var hc=za._map.getContainer();hc.scrollTop=0;hc.scrollLeft=0});Ra(this._element,this._anchor,"marker");this._popup=null}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.addTo=function(aa){return this.remove(),this._map=aa,aa.getCanvasContainer().appendChild(this._element),
aa.on("move",this._update),aa.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},da.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",
this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Qa.remove(this._element),this._popup&&this._popup.remove(),this},da.prototype.getLngLat=function(){return this._lngLat},da.prototype.setLngLat=function(aa){return this._lngLat=a.LngLat.convert(aa),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},da.prototype.getElement=function(){return this._element},da.prototype.setPopup=function(aa){if(this._popup&&(this._popup.remove(),this._popup=null,
this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),aa){if(!("offset"in aa.options)){var ja=Math.sqrt(Math.pow(13.5,2)/2);aa.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ja,-1*(24.6+ja)],"bottom-right":[-ja,-1*(24.6+ja)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=aa;this._lngLat&&this._popup.setLngLat(this._lngLat);(this._originalTabIndex=
this._element.getAttribute("tabindex"))||this._element.setAttribute("tabindex","0");this._element.addEventListener("keypress",this._onKeyPress)}return this},da.prototype._onKeyPress=function(aa){var ja=aa.code;aa=aa.charCode||aa.keyCode;"Space"!==ja&&"Enter"!==ja&&32!==aa&&13!==aa||this.togglePopup()},da.prototype._onMapClick=function(aa){aa=aa.originalEvent.target;var ja=this._element;this._popup&&(aa===ja||ja.contains(aa))&&this.togglePopup()},da.prototype.getPopup=function(){return this._popup},
da.prototype.togglePopup=function(){var aa=this._popup;return aa?(aa.isOpen()?aa.remove():aa.addTo(this._map),this):this},da.prototype._update=function(aa){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=eb(this._lngLat,this._pos,this._map.transform));this._pos=this._map.project(this._lngLat)._add(this._offset);var ja="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?ja="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(ja="rotateZ("+(this._rotation-
this._map.getBearing())+"deg)");var za="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?za="rotateX(0deg)":"map"===this._pitchAlignment&&(za="rotateX("+this._map.getPitch()+"deg)");aa&&"moveend"!==aa.type||(this._pos=this._pos.round());Qa.setTransform(this._element,Rh[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+za+" "+ja)}},da.prototype.getOffset=function(){return this._offset},da.prototype.setOffset=function(aa){return this._offset=a.Point.convert(aa),this._update(),
this},da.prototype._onMove=function(aa){this._pos=aa.point.sub(this._positionDelta);this._lngLat=this._map.unproject(this._pos);this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new a.Event("dragstart")));this.fire(new a.Event("drag"))},da.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===
this._state&&this.fire(new a.Event("dragend"));this._state="inactive"},da.prototype._addDragHandler=function(aa){this._element.contains(aa.originalEvent.target)&&(aa.preventDefault(),this._positionDelta=aa.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},da.prototype.setDraggable=function(aa){return this._draggable=!!aa,this._map&&(aa?
(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},da.prototype.isDraggable=function(){return this._draggable},da.prototype.setRotation=function(aa){return this._rotation=aa||0,this._update(),this},da.prototype.getRotation=function(){return this._rotation},da.prototype.setRotationAlignment=function(aa){return this._rotationAlignment=aa||"auto",this._update(),
this},da.prototype.getRotationAlignment=function(){return this._rotationAlignment},da.prototype.setPitchAlignment=function(aa){return this._pitchAlignment=aa&&"auto"!==aa?aa:this._rotationAlignment,this._update(),this},da.prototype.getPitchAlignment=function(){return this._pitchAlignment},da}(a.Evented),ck={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},og=0,Jf=!1,ui=function(Z){function da(aa){Z.call(this);
this.options=a.extend({},ck,aa);a.bindAll("_onSuccess _onError _onZoom _finish _setupUI _updateCamera _updateMarker".split(" "),this)}return Z&&(da.__proto__=Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.onAdd=function(aa){var ja;return this._map=aa,this._container=Qa.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),ja=this._setupUI,void 0!==If?ja(If):void 0!==a.window.navigator.permissions?a.window.navigator.permissions.query({name:"geolocation"}).then(function(za){ja(If=
"denied"!==za.state)}):ja(If=!!a.window.navigator.geolocation),this._container},da.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove();Qa.remove(this._container);this._map.off("zoom",this._onZoom);
this._map=void 0;og=0;Jf=!1},da.prototype._isOutOfMapMaxBounds=function(aa){var ja=this._map.getMaxBounds();aa=aa.coords;return ja&&(aa.longitude<ja.getWest()||aa.longitude>ja.getEast()||aa.latitude<ja.getSouth()||aa.latitude>ja.getNorth())},da.prototype._setErrorState=function(){switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},
da.prototype._onSuccess=function(aa){if(this._map){if(this._isOutOfMapMaxBounds(aa))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",aa)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=aa,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(aa);this.options.trackUserLocation&&"ACTIVE_LOCK"!==
this._watchState||this._updateCamera(aa);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new a.Event("geolocate",aa));this._finish()}},da.prototype._updateCamera=function(aa){var ja=new a.LngLat(aa.coords.longitude,aa.coords.latitude);aa=aa.coords.accuracy;var za=this._map.getBearing();za=a.extend({bearing:za},this.options.fitBoundsOptions);this._map.fitBounds(ja.toBounds(aa),za,{geolocateSource:!0})},da.prototype._updateMarker=function(aa){if(aa){var ja=
new a.LngLat(aa.coords.longitude,aa.coords.latitude);this._accuracyCircleMarker.setLngLat(ja).addTo(this._map);this._userLocationDotMarker.setLngLat(ja).addTo(this._map);this._accuracy=aa.coords.accuracy;this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},da.prototype._updateCircleRadius=function(){var aa=this._map._container.clientHeight/2,ja=this._map.unproject([0,aa]);aa=this._map.unproject([1,
aa]);ja=ja.distanceTo(aa);ja=Math.ceil(2*this._accuracy/ja);this._circleElement.style.width=ja+"px";this._circleElement.style.height=ja+"px"},da.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},da.prototype._onError=function(aa){if(this._map){if(this.options.trackUserLocation)if(1===aa.code){this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.disabled=!0;var ja=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ja;this._geolocateButton.setAttribute("aria-label",ja);void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===aa.code&&
Jf)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new a.Event("error",aa));this._finish()}},da.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},da.prototype._setupUI=function(aa){var ja=this;(this._container.addEventListener("contextmenu",function(za){return za.preventDefault()}),this._geolocateButton=Qa.create("button","mapboxgl-ctrl-geolocate",
this._container),Qa.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===aa)?(a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),aa=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=!0,this._geolocateButton.title=aa,this._geolocateButton.setAttribute("aria-label",aa)):(aa=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=
aa,this._geolocateButton.setAttribute("aria-label",aa));this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF");this.options.showUserLocation&&(this._dotElement=Qa.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ah(this._dotElement),this._circleElement=Qa.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ah({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&
(this._watchState="OFF"),this._map.on("zoom",this._onZoom));this._geolocateButton.addEventListener("click",this.trigger.bind(this));this._setup=!0;this.options.trackUserLocation&&this._map.on("movestart",function(za){za.geolocateSource||"ACTIVE_LOCK"!==ja._watchState||za.originalEvent&&"resize"===za.originalEvent.type||(ja._watchState="BACKGROUND",ja._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ja._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ja.fire(new a.Event("trackuserlocationend")))})},
da.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new a.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":og--;Jf=!1;this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new a.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var aa;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","true");1<++og?(aa={maximumAge:6E5,timeout:0},Jf=!0):(aa=this.options.positionOptions,Jf=!1);this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,
this._onError,aa)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},da.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID);this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},
da}(a.Evented),Sh={maxWidth:100,unit:"metric"},xg=function(Z){this.options=a.extend({},Sh,Z);a.bindAll(["_onMove","setUnit"],this)};xg.prototype.getDefaultPosition=function(){return"bottom-left"};xg.prototype._onMove=function(){Wa(this._map,this._container,this.options)};xg.prototype.onAdd=function(Z){return this._map=Z,this._container=Qa.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",Z.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};xg.prototype.onRemove=function(){Qa.remove(this._container);
this._map.off("move",this._onMove);this._map=void 0};xg.prototype.setUnit=function(Z){this.options.unit=Z;Wa(this._map,this._container,this.options)};var yg=function(Z){this._fullscreen=!1;Z&&Z.container&&(Z.container instanceof a.window.HTMLElement?this._container=Z.container:a.warnOnce("Full screen control 'container' must be a DOM element."));a.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in
a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};yg.prototype.onAdd=function(Z){return this._map=Z,this._container||(this._container=this._map.getContainer()),this._controlContainer=Qa.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display=
"none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer};yg.prototype.onRemove=function(){Qa.remove(this._controlContainer);this._map=null;a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};yg.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)};yg.prototype._setupUI=function(){var Z=
this._fullscreenButton=Qa.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Qa.create("span","mapboxgl-ctrl-icon",Z).setAttribute("aria-hidden",!0);Z.type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",this._onClickFullscreen);a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};yg.prototype._updateTitle=function(){var Z=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Z);this._fullscreenButton.title=Z};yg.prototype._getTitle=
function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")};yg.prototype._isFullscreen=function(){return this._fullscreen};yg.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),
this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())};yg.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():
this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var vi={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},dk=function(Z){function da(aa){Z.call(this);this.options=a.extend(Object.create(vi),aa);a.bindAll("_update _onClose remove _onMouseMove _onMouseUp _onDrag".split(" "),this)}return Z&&(da.__proto__=
Z),(da.prototype=Object.create(Z&&Z.prototype)).constructor=da,da.prototype.addTo=function(aa){return this._map&&this.remove(),this._map=aa,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):
this._map.on("move",this._update),this.fire(new a.Event("open")),this},da.prototype.isOpen=function(){return!!this._map},da.prototype.remove=function(){return this._content&&Qa.remove(this._content),this._container&&(Qa.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),
this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},da.prototype.getLngLat=function(){return this._lngLat},da.prototype.setLngLat=function(aa){return this._lngLat=a.LngLat.convert(aa),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),
this},da.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},da.prototype.getElement=function(){return this._container},da.prototype.setText=function(aa){return this.setDOMContent(a.window.document.createTextNode(aa))},
da.prototype.setHTML=function(aa){var ja=a.window.document.createDocumentFragment(),za=a.window.document.createElement("body");for(za.innerHTML=aa;aa=za.firstChild;)ja.appendChild(aa);return this.setDOMContent(ja)},da.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},da.prototype.setMaxWidth=function(aa){return this.options.maxWidth=aa,this._update(),this},da.prototype.setDOMContent=function(aa){return this._createContent(),this._content.appendChild(aa),this._update(),
this},da.prototype.addClassName=function(aa){this._container&&this._container.classList.add(aa)},da.prototype.removeClassName=function(aa){this._container&&this._container.classList.remove(aa)},da.prototype.toggleClassName=function(aa){if(this._container)return this._container.classList.toggle(aa)},da.prototype._createContent=function(){this._content&&Qa.remove(this._content);this._content=Qa.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=Qa.create("button",
"mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",this._onClose))},da.prototype._onMouseUp=function(aa){this._update(aa.point)},da.prototype._onMouseMove=function(aa){this._update(aa.point)},da.prototype._onDrag=function(aa){this._update(aa.point)},da.prototype._update=function(aa){var ja=this;if(this._map&&(this._lngLat||this._trackPointer)&&
this._content&&(this._container||(this._container=Qa.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Qa.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(mb){return ja._container.classList.add(mb)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=
this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=eb(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||aa)){aa=this._pos=this._trackPointer&&aa?aa:this._map.project(this._lngLat);var za=this.options.anchor,Na=function Kb(Cb){if(Cb){if("number"==typeof Cb){var Mb=Math.round(Math.sqrt(.5*Math.pow(Cb,2)));return{center:new a.Point(0,0),top:new a.Point(0,Cb),"top-left":new a.Point(Mb,Mb),"top-right":new a.Point(-Mb,Mb),bottom:new a.Point(0,
-Cb),"bottom-left":new a.Point(Mb,-Mb),"bottom-right":new a.Point(-Mb,-Mb),left:new a.Point(Cb,0),right:new a.Point(-Cb,0)}}return Cb instanceof a.Point||Array.isArray(Cb)?(Cb=a.Point.convert(Cb),{center:Cb,top:Cb,"top-left":Cb,"top-right":Cb,bottom:Cb,"bottom-left":Cb,"bottom-right":Cb,left:Cb,right:Cb}):{center:a.Point.convert(Cb.center||[0,0]),top:a.Point.convert(Cb.top||[0,0]),"top-left":a.Point.convert(Cb["top-left"]||[0,0]),"top-right":a.Point.convert(Cb["top-right"]||[0,0]),bottom:a.Point.convert(Cb.bottom||
[0,0]),"bottom-left":a.Point.convert(Cb["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(Cb["bottom-right"]||[0,0]),left:a.Point.convert(Cb.left||[0,0]),right:a.Point.convert(Cb.right||[0,0])}}return Kb(new a.Point(0,0))}(this.options.offset);if(!za){za=this._container.offsetWidth;var Xa=this._container.offsetHeight;Xa=aa.y+Na.bottom.y<Xa?["top"]:aa.y>this._map.transform.height-Xa?["bottom"]:[];aa.x<za/2?Xa.push("left"):aa.x>this._map.transform.width-za/2&&Xa.push("right");za=0===Xa.length?"bottom":
Xa.join("-")}aa=aa.add(Na[za]).round();Qa.setTransform(this._container,Rh[za]+" translate("+aa.x+"px,"+aa.y+"px)");Ra(this._container,za,"popup")}},da.prototype._onClose=function(){this.remove()},da}(a.Evented),zj={version:a.version,supported:Ia,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:zh,NavigationControl:ng,GeolocateControl:ui,AttributionControl:mg,ScaleControl:xg,FullscreenControl:yg,Popup:dk,Marker:Ah,Style:qd,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,
Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){(Wd||(Wd=new Fd),Wd).acquire("mapboxgl_preloaded_worker_pool")},clearPrewarmedResources:function(){var Z=Wd;Z&&(Z.isPreloaded()&&1===Z.numActive()?(Z.release("mapboxgl_preloaded_worker_pool"),Wd=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},
get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(Z){a.config.ACCESS_TOKEN=Z},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(Z){a.config.API_URL=Z},get workerCount(){return Fd.workerCount},set workerCount(Z){Fd.workerCount=Z},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(Z){a.config.MAX_PARALLEL_IMAGE_REQUESTS=Z},clearStorage:function(Z){a.clearTileCache(Z)},workerUrl:""};return zj});return e})},{}],448:[function(b,
F,C){function m(l,e,a){for(var g=Array(l),k=0;k<l;++k)g[k]=0,k===e&&(g[k]+=.5),k===a&&(g[k]+=.5);return g}F.exports=function(l){for(var e=1<<l+1,a=Array(e),g=0;g<e;++g){var k=g;var p=l,n=g;if(0===n||n===(1<<p+1)-1)var c=[];else{var f=[];c=[];for(var d=0;d<=p;++d)if(n&1<<d){f.push(m(p,d-1,d-1));c.push(null);for(var q=0;q<=p;++q)~n&1<<q&&(f.push(m(p,d-1,q-1)),c.push([d,q]))}p=h(f);n=[];d=0;b:for(;d<p.length;++d){f=p[d];var r=[];for(q=0;q<f.length;++q){if(!c[f[q]])continue b;r.push(c[f[q]].slice())}n.push(r)}c=
n}a[k]=c}return a};var h=b("convex-hull")},{"convex-hull":135}],449:[function(b,F,C){function m(q,r,u,v,w){q[0]=r[0]*v+u[0]*w;q[1]=r[1]*v+u[1]*w;q[2]=r[2]*v+u[2]*w}var h=b("./normalize");C=b("gl-mat4/create");var l=b("gl-mat4/clone"),e=b("gl-mat4/determinant"),a=b("gl-mat4/invert"),g=b("gl-mat4/transpose"),k={length:b("gl-vec3/length"),normalize:b("gl-vec3/normalize"),dot:b("gl-vec3/dot"),cross:b("gl-vec3/cross")},p=C(),n=C(),c=[0,0,0,0],f=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0];F.exports=function(q,
r,u,v,w,y){r||(r=[0,0,0]);u||(u=[0,0,0]);v||(v=[0,0,0]);w||(w=[0,0,0,1]);y||(y=[0,0,0,1]);if(!h(p,q))return!1;l(n,p);n[3]=0;n[7]=0;n[11]=0;n[15]=1;if(Math.abs(1E-8>e(n)))return!1;var D=p[3],x=p[7],E=p[11];q=p[12];var B=p[13],t=p[14],G=p[15];if(0!==D||0!==x||0!==E){c[0]=D;c[1]=x;c[2]=E;c[3]=G;if(!a(n,n))return!1;g(n,n);D=c[0];x=c[1];E=c[2];G=c[3];w[0]=n[0]*D+n[4]*x+n[8]*E+n[12]*G;w[1]=n[1]*D+n[5]*x+n[9]*E+n[13]*G;w[2]=n[2]*D+n[6]*x+n[10]*E+n[14]*G;w[3]=n[3]*D+n[7]*x+n[11]*E+n[15]*G}else w[0]=w[1]=
w[2]=0,w[3]=1;r[0]=q;r[1]=B;r[2]=t;f[0][0]=p[0];f[0][1]=p[1];f[0][2]=p[2];f[1][0]=p[4];f[1][1]=p[5];f[1][2]=p[6];f[2][0]=p[8];f[2][1]=p[9];f[2][2]=p[10];u[0]=k.length(f[0]);k.normalize(f[0],f[0]);v[0]=k.dot(f[0],f[1]);m(f[1],f[1],f[0],1,-v[0]);u[1]=k.length(f[1]);k.normalize(f[1],f[1]);v[0]/=u[1];v[1]=k.dot(f[0],f[2]);m(f[2],f[2],f[0],1,-v[1]);v[2]=k.dot(f[1],f[2]);m(f[2],f[2],f[1],1,-v[2]);u[2]=k.length(f[2]);k.normalize(f[2],f[2]);v[1]/=u[2];v[2]/=u[2];k.cross(d,f[1],f[2]);if(0>k.dot(f[0],d))for(r=
0;3>r;r++)u[r]*=-1,f[r][0]*=-1,f[r][1]*=-1,f[r][2]*=-1;y[0]=.5*Math.sqrt(Math.max(1+f[0][0]-f[1][1]-f[2][2],0));y[1]=.5*Math.sqrt(Math.max(1-f[0][0]+f[1][1]-f[2][2],0));y[2]=.5*Math.sqrt(Math.max(1-f[0][0]-f[1][1]+f[2][2],0));y[3]=.5*Math.sqrt(Math.max(1+f[0][0]+f[1][1]+f[2][2],0));f[2][1]>f[1][2]&&(y[0]=-y[0]);f[0][2]>f[2][0]&&(y[1]=-y[1]);f[1][0]>f[0][1]&&(y[2]=-y[2]);return!0}},{"./normalize":450,"gl-mat4/clone":272,"gl-mat4/create":273,"gl-mat4/determinant":274,"gl-mat4/invert":278,"gl-mat4/transpose":289,
"gl-vec3/cross":339,"gl-vec3/dot":344,"gl-vec3/length":354,"gl-vec3/normalize":361}],450:[function(b,F,C){F.exports=function(m,h){var l=h[15];if(0===l)return!1;l=1/l;for(var e=0;16>e;e++)m[e]=h[e]*l;return!0}},{}],451:[function(b,F,C){function m(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,0,0,1]}}var h=b("gl-vec3/lerp"),l=b("mat4-recompose"),e=b("mat4-decompose"),a=b("gl-mat4/determinant"),g=b("quat-slerp"),k=m(),p=m(),n=m();F.exports=function(c,f,d,q){if(0===
a(f)||0===a(d))return!1;f=e(f,k.translate,k.scale,k.skew,k.perspective,k.quaternion);d=e(d,p.translate,p.scale,p.skew,p.perspective,p.quaternion);if(!f||!d)return!1;h(n.translate,k.translate,p.translate,q);h(n.skew,k.skew,p.skew,q);h(n.scale,k.scale,p.scale,q);h(n.perspective,k.perspective,p.perspective,q);g(n.quaternion,k.quaternion,p.quaternion,q);l(c,n.translate,n.scale,n.skew,n.perspective,n.quaternion);return!0}},{"gl-mat4/determinant":274,"gl-vec3/lerp":355,"mat4-decompose":449,"mat4-recompose":452,
"quat-slerp":501}],452:[function(b,F,C){var m={identity:b("gl-mat4/identity"),translate:b("gl-mat4/translate"),multiply:b("gl-mat4/multiply"),create:b("gl-mat4/create"),scale:b("gl-mat4/scale"),fromRotationTranslation:b("gl-mat4/fromRotationTranslation")};m.create();var h=m.create();F.exports=function(l,e,a,g,k,p){m.identity(l);m.fromRotationTranslation(l,p,e);l[3]=k[0];l[7]=k[1];l[11]=k[2];l[15]=k[3];m.identity(h);0!==g[2]&&(h[9]=g[2],m.multiply(l,l,h));0!==g[1]&&(h[9]=0,h[8]=g[1],m.multiply(l,l,
h));0!==g[0]&&(h[8]=0,h[4]=g[0],m.multiply(l,l,h));m.scale(l,l,a);return l}},{"gl-mat4/create":273,"gl-mat4/fromRotationTranslation":276,"gl-mat4/identity":277,"gl-mat4/multiply":280,"gl-mat4/scale":287,"gl-mat4/translate":288}],453:[function(b,F,C){F.exports=Math.log2||function(m){return Math.log(m)*Math.LOG2E}},{}],454:[function(b,F,C){function m(q){this._components=q.slice();this._time=[0];this.prevMatrix=q.slice();this.nextMatrix=q.slice();this.computedMatrix=q.slice();this.computedInverse=q.slice();
this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var h=b("binary-search-bounds"),l=b("mat4-interpolate"),e=b("gl-mat4/invert"),a=b("gl-mat4/rotateX"),g=b("gl-mat4/rotateY"),k=b("gl-mat4/rotateZ"),p=b("gl-mat4/lookAt"),n=b("gl-mat4/translate");b("gl-mat4/scale");var c=b("gl-vec3/normalize"),f=[0,0,0];F.exports=function(q){q=q||{};return new m(q.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};b=m.prototype;b.recalcMatrix=
function(q){var r=this._time,u=h.le(r,q),v=this.computedMatrix;if(!(0>u)){var w=this._components;if(u===r.length-1)for(var y=16*u,D=0;16>D;++D)v[D]=w[y++];else{var x=r[u+1]-r[u];y=16*u;var E=this.prevMatrix,B=!0;for(D=0;16>D;++D)E[D]=w[y++];var t=this.nextMatrix;for(D=0;16>D;++D)t[D]=w[y++],B=B&&E[D]===t[D];if(1E-6>x||B)for(D=0;16>D;++D)v[D]=E[D];else l(v,E,t,(q-r[u])/x)}D=this.computedUp;D[0]=v[1];D[1]=v[5];D[2]=v[9];c(D,D);D=this.computedInverse;e(D,v);q=this.computedEye;r=D[15];q[0]=D[12]/r;q[1]=
D[13]/r;q[2]=D[14]/r;r=this.computedCenter;u=Math.exp(this.computedRadius[0]);for(D=0;3>D;++D)r[D]=q[D]-v[2+4*D]*u}};b.idle=function(q){if(!(q<this.lastT())){for(var r=this._components,u=r.length-16,v=0;16>v;++v)r.push(r[u++]);this._time.push(q)}};b.flush=function(q){q=h.gt(this._time,q)-2;0>q||(this._time.splice(0,q),this._components.splice(0,16*q))};b.lastT=function(){return this._time[this._time.length-1]};b.lookAt=function(q,r,u,v){this.recalcMatrix(q);r=r||this.computedEye;u=u||f;v=v||this.computedUp;
this.setMatrix(q,p(this.computedMatrix,r,u,v));for(v=q=0;3>v;++v)q+=Math.pow(u[v]-r[v],2);q=Math.log(Math.sqrt(q));this.computedRadius[0]=q};b.rotate=function(q,r,u,v){this.recalcMatrix(q);var w=this.computedInverse;r&&g(w,w,r);u&&a(w,w,u);v&&k(w,w,v);this.setMatrix(q,e(this.computedMatrix,w))};var d=[0,0,0];b.pan=function(q,r,u,v){d[0]=-(r||0);d[1]=-(u||0);d[2]=-(v||0);this.recalcMatrix(q);r=this.computedInverse;n(r,r,d);this.setMatrix(q,e(r,r))};b.translate=function(q,r,u,v){d[0]=r||0;d[1]=u||0;
d[2]=v||0;this.recalcMatrix(q);r=this.computedMatrix;n(r,r,d);this.setMatrix(q,r)};b.setMatrix=function(q,r){if(!(q<this.lastT()))for(this._time.push(q),q=0;16>q;++q)this._components.push(r[q])};b.setDistance=function(q,r){this.computedRadius[0]=r};b.setDistanceLimits=function(q,r){var u=this._limits;u[0]=q;u[1]=r};b.getDistanceLimits=function(q){var r=this._limits;return q?(q[0]=r[0],q[1]=r[1],q):r}},{"binary-search-bounds":455,"gl-mat4/invert":278,"gl-mat4/lookAt":279,"gl-mat4/rotateX":284,"gl-mat4/rotateY":285,
"gl-mat4/rotateZ":286,"gl-mat4/scale":287,"gl-mat4/translate":288,"gl-vec3/normalize":361,"mat4-interpolate":451}],455:[function(b,F,C){arguments[4][243][0].apply(C,arguments)},{dup:243}],456:[function(b,F,C){F.exports=function(h){var l=h.length;if(3>l){for(var e=Array(l),a=0;a<l;++a)e[a]=a;return 2===l&&h[0][0]===h[1][0]&&h[0][1]===h[1][1]?[0]:e}e=Array(l);for(a=0;a<l;++a)e[a]=a;e.sort(function(f,d){var q=h[f][0]-h[d][0];return q?q:h[f][1]-h[d][1]});var g=[e[0],e[1]],k=[e[0],e[1]];for(a=2;a<l;++a){for(var p=
e[a],n=h[p],c=g.length;1<c&&0>=m(h[g[c-2]],h[g[c-1]],n);)--c,g.pop();g.push(p);for(c=k.length;1<c&&0<=m(h[k[c-2]],h[k[c-1]],n);)--c,k.pop();k.push(p)}e=Array(k.length+g.length-2);a=l=0;for(p=g.length;a<p;++a)e[l++]=g[a];for(a=k.length-2;0<a;--a)e[l++]=k[a];return e};var m=b("robust-orientation")[3]},{"robust-orientation":520}],457:[function(b,F,C){F.exports=function(h,l){function e(D){var x=!1;"altKey"in D&&(x=x||D.altKey!==v.alt,v.alt=!!D.altKey);"shiftKey"in D&&(x=x||D.shiftKey!==v.shift,v.shift=
!!D.shiftKey);"ctrlKey"in D&&(x=x||D.ctrlKey!==v.control,v.control=!!D.ctrlKey);"metaKey"in D&&(x=x||D.metaKey!==v.meta,v.meta=!!D.metaKey);return x}function a(D,x){var E=m.x(x),B=m.y(x);"buttons"in x&&(D=x.buttons|0);if(D!==q||E!==r||B!==u||e(x))q=D|0,r=E||0,u=B||0,l&&l(q,r,u,v)}function g(D){a(0,D)}function k(){if(q||r||u||v.shift||v.alt||v.meta||v.control)q=r=u=0,v.shift=v.alt=v.control=v.meta=!1,l&&l(0,0,0,v)}function p(D){e(D)&&l&&l(q,r,u,v)}function n(D){0===m.buttons(D)?a(0,D):a(q,D)}function c(D){a(q|
m.buttons(D),D)}function f(D){a(q&~m.buttons(D),D)}function d(){w||(w=!0,h.addEventListener("mousemove",n),h.addEventListener("mousedown",c),h.addEventListener("mouseup",f),h.addEventListener("mouseleave",g),h.addEventListener("mouseenter",g),h.addEventListener("mouseout",g),h.addEventListener("mouseover",g),h.addEventListener("blur",k),h.addEventListener("keyup",p),h.addEventListener("keydown",p),h.addEventListener("keypress",p),h!==window&&(window.addEventListener("blur",k),window.addEventListener("keyup",
p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}l||(l=h,h=window);var q=0,r=0,u=0,v={shift:!1,alt:!1,control:!1,meta:!1},w=!1;d();var y={element:h};Object.defineProperties(y,{enabled:{get:function(){return w},set:function(D){D?d():w&&(w=!1,h.removeEventListener("mousemove",n),h.removeEventListener("mousedown",c),h.removeEventListener("mouseup",f),h.removeEventListener("mouseleave",g),h.removeEventListener("mouseenter",g),h.removeEventListener("mouseout",g),h.removeEventListener("mouseover",
g),h.removeEventListener("blur",k),h.removeEventListener("keyup",p),h.removeEventListener("keydown",p),h.removeEventListener("keypress",p),h!==window&&(window.removeEventListener("blur",k),window.removeEventListener("keyup",p),window.removeEventListener("keydown",p),window.removeEventListener("keypress",p)))},enumerable:!0},buttons:{get:function(){return q},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return v},enumerable:!0}});
return y};var m=b("mouse-event")},{"mouse-event":459}],458:[function(b,F,C){var m={left:0,top:0};F.exports=function(h,l,e){l=l||h.currentTarget||h.srcElement;Array.isArray(e)||(e=[0,0]);var a=h.clientX||0;h=h.clientY||0;l=l===window||l===document||l===document.body?m:l.getBoundingClientRect();e[0]=a-l.left;e[1]=h-l.top;return e}},{}],459:[function(b,F,C){function m(h){return h.target||h.srcElement||window}C.buttons=function(h){if("object"===typeof h){if("buttons"in h)return h.buttons;if("which"in
h){h=h.which;if(2===h)return 4;if(3===h)return 2;if(0<h)return 1<<h-1}else if("button"in h){h=h.button;if(1===h)return 4;if(2===h)return 2;if(0<=h)return 1<<h}}return 0};C.element=m;C.x=function(h){if("object"===typeof h){if("offsetX"in h)return h.offsetX;var l=m(h).getBoundingClientRect();return h.clientX-l.left}return 0};C.y=function(h){if("object"===typeof h){if("offsetY"in h)return h.offsetY;var l=m(h).getBoundingClientRect();return h.clientY-l.top}return 0}},{}],460:[function(b,F,C){var m=b("to-px");
F.exports=function(h,l,e){"function"===typeof h&&(e=!!l,l=h,h=window);var a=m("ex",h),g=function(k){e&&k.preventDefault();var p=k.deltaX||0,n=k.deltaY||0,c=k.deltaZ||0,f=1;switch(k.deltaMode){case 1:f=a;break;case 2:f=window.innerHeight}p*=f;n*=f;c*=f;if(p||n||c)return l(p,n,c,k)};h.addEventListener("wheel",g);return g}},{"to-px":550}],461:[function(b,F,C){function m(c,f,d){for(var q=0,r=0;r<c;++r)f&1<<r&&(q|=1<<d[r]);return q}function h(c,f,d,q,r,u){function v(J,O){t.push("for(","i"+r[J],"\x3d",
O,";","i"+r[J],"\x3c","s"+r[J],";","++","i"+r[J],"){")}function w(J){for(var O=0;O<x;++O)t.push("p"+O,"+\x3d","u"+O+"_"+r[J],";");t.push("}")}function y(){for(var J=1;J<1<<E;++J)t.push(n,"\x3d","e"+J,";","e"+J,"\x3d","y"+J,";","y"+J,"\x3d",n,";")}function D(J,O){if(0>J){for(var Q=0;Q<x;++Q)u[Q]?t.push("c"+Q+"_0","\x3d","d"+Q,".get(","p"+Q,");"):t.push("c"+Q+"_0","\x3d","d"+Q,"[","p"+Q,"];");J=[];for(Q=0;Q<x;++Q)J.push("c"+Q+"_0");for(Q=0;Q<q;++Q)J.push("x"+Q);t.push("b0","\x3d",a,"[",p,"]\x3dphase(",
J.join(),");");for(J=1;J<1<<E;++J)t.push("b"+J,"\x3d",a,"[",p,"+","e"+J,"];");Q=[];for(J=1;J<1<<E;++J)Q.push("(b0!\x3d\x3db"+J+")");t.push("if(",Q.join("||"),"){");var U=[];for(Q=0;Q<E;++Q)U.push("i"+Q);for(Q=0;Q<x;++Q)for(U.push("c"+Q+"_0"),J=1;J<1<<E;++J)u[Q]?t.push("c"+Q+"_"+J,"\x3d","d"+Q,".get(","p"+Q,"+","d"+Q+"_"+J,");"):t.push("c"+Q+"_"+J,"\x3d","d"+Q,"[","p"+Q,"+","d"+Q+"_"+J,"];"),U.push("c"+Q+"_"+J);for(Q=0;Q<1<<E;++Q)U.push("b"+Q);for(Q=0;Q<q;++Q)U.push("x"+Q);t.push("vertex(",U.join(),
");","v0","\x3d",e,"[",p,"]\x3d",g,"++;");Q=(1<<E)-1;U="b"+Q;for(J=0;J<E;++J)if(0===(O&~(1<<J))){for(var P=Q^1<<J,V="b"+P,Y=[],ba=P;0<ba;ba=ba-1&P)Y.push(e+"["+p+"+e"+ba+"]");Y.push("v0");for(ba=0;ba<x;++ba)J&1?Y.push("c"+ba+"_"+Q,"c"+ba+"_"+P):Y.push("c"+ba+"_"+P,"c"+ba+"_"+Q);J&1?Y.push(U,V):Y.push(V,U);for(ba=0;ba<q;++ba)Y.push("x"+ba);t.push("if(",U,"!\x3d\x3d",V,"){","face(",Y.join(),")}")}t.push("}",p,"+\x3d1;")}else{for(Q=J-1;0<=Q;--Q)v(Q,0);U=[];for(Q=0;Q<x;++Q)u[Q]?U.push("d"+Q+".get(p"+
Q+")"):U.push("d"+Q+"[p"+Q+"]");for(Q=0;Q<q;++Q)U.push("x"+Q);t.push(a,"[",p,"++]\x3dphase(",U.join(),");");for(Q=0;Q<J;++Q)w(Q);for(Q=0;Q<x;++Q)t.push("p"+Q,"+\x3d","u"+Q+"_"+r[J],";");t.push("if(","s"+r[J],"\x3e0){","i"+r[J],"\x3d1;");D(J-1,O|1<<r[J]);for(Q=0;Q<x;++Q)t.push("p"+Q,"+\x3d","u"+Q+"_"+r[J],";");J===E-1&&(t.push(p,"\x3d0;"),y());v(J,2);D(J-1,O);J===E-1&&(t.push("if(","i"+r[E-1],"\x261){",p,"\x3d0;}"),y());w(J);t.push("}")}}var x=u.length,E=r.length;if(2>E)throw Error("ndarray-extract-contour: Dimension must be at least 2");
for(var B="extractContour"+r.join("_"),t=[],G=[],I=[],L=0;L<x;++L)I.push("a"+L);for(L=0;L<q;++L)I.push("x"+L);for(L=0;L<E;++L)G.push("s"+L+"\x3da0.shape["+L+"]|0");for(L=0;L<x;++L){G.push("d"+L+"\x3da"+L+".data","o"+L+"\x3da"+L+".offset|0");for(var M=0;M<E;++M)G.push("t"+L+"_"+M+"\x3da"+L+".stride["+M+"]|0")}for(L=0;L<x;++L)for(G.push("p"+L+"\x3do"+L),G.push("c"+L+"_0"),M=1;M<1<<E;++M){for(var N=[],H=0;H<E;++H)M&1<<H&&N.push("-t"+(L+"_"+H));G.push("d"+L+"_"+M+"\x3d("+N.join("")+")|0");G.push("c"+
L+"_"+M+"\x3d0")}for(L=0;L<x;++L)for(M=0;M<E;++M)H=["t"+L+"_"+r[M]],0<M&&H.push("t"+L+"_"+r[M-1]+"*s"+r[M-1]),G.push("u"+L+"_"+r[M]+"\x3d("+H.join("-")+")|0");for(L=0;L<E;++L)G.push("i"+L+"\x3d0");G.push(g+"\x3d0");M=["2"];for(L=E-2;0<=L;--L)M.push("s"+r[L]);G.push(k+"\x3d("+M.join("*")+")|0",a+"\x3dmallocUint32("+k+")",e+"\x3dmallocUint32("+k+")",p+"\x3d0");G.push("b0\x3d0");for(M=1;M<1<<E;++M){L=[];N=[];for(H=0;H<E;++H)M&1<<H&&(0===N.length?L.push("1"):L.unshift(N.join("*"))),N.push("s"+r[H]);H=
"";0>L[0].indexOf("s"+r[E-2])&&(H="-");N=m(E,M,r);G.push("e"+N+"\x3d(-"+L.join("-")+")|0","y"+N+"\x3d("+H+L.join("-")+")|0","b"+N+"\x3d0")}G.push("v0\x3d0",n+"\x3d0");D(E-1,0);t.push("freeUint32(",e,");freeUint32(",a,");");B=["'use strict';function ",B,"(",I.join(),"){var ",G.join(),";",t.join(""),"}return ",B].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",B))(c,f,d,l.mallocUint32,l.freeUint32)}var l=b("typedarray-pool");F.exports=function(c){function f(y){throw Error("ndarray-extract-contour: "+
y);}"object"!==typeof c&&f("Must specify arguments");var d=c.order;Array.isArray(d)||f("Must specify order");var q=c.arrayArguments||1;1>q&&f("Must have at least one array argument");var r=c.scalarArguments||0;0>r&&f("Scalar arg count must be \x3e 0");"function"!==typeof c.vertex&&f("Must specify vertex creation function");"function"!==typeof c.cell&&f("Must specify cell creation function");"function"!==typeof c.phase&&f("Must specify phase function");for(var u=c.getters||[],v=Array(q),w=0;w<q;++w)0<=
u.indexOf(w)?v[w]=!0:v[w]=!1;return h(c.vertex,c.cell,c.phase,r,d,v)};var e="V",a="P",g="N",k="Q",p="X",n="T"},{"typedarray-pool":567}],462:[function(b,F,C){function m(n){if(n in e)return e[n];for(var c=[],f=0;f<n;++f)c.push("out",f,"s\x3d0.5*(inp",f,"l-inp",f,"r);");var d=["array"],q=["junk"];for(f=0;f<n;++f){d.push("array");q.push("out"+f+"s");var r=h(n);r[f]=-1;d.push({array:0,offset:r.slice()});r[f]=1;d.push({array:0,offset:r.slice()});q.push("inp"+f+"l","inp"+f+"r")}return e[n]=l({args:d,pre:g,
post:g,body:{body:c.join(""),args:q.map(function(u){return{name:u,lvalue:0===u.indexOf("out"),rvalue:0===u.indexOf("inp"),count:"junk"!==u|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+n})}F.exports=function(n,c,f){if(Array.isArray(f)){if(f.length!==c.dimension)throw Error("ndarray-gradient: invalid boundary conditions");}else f="string"===typeof f?h(c.dimension,f):h(c.dimension,"clamp");if(n.dimension!==c.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");
if(n.shape[c.dimension]!==c.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var d=0;d<c.dimension;++d)if(n.shape[d]!==c.shape[d])throw Error("ndarray-gradient: shape mismatch");if(0===c.size)return n;if(0>=c.dimension)return n.set(0),n;var q=f;f=q.join();d=a[f];if(!d){d=q.length;for(var r=["function gradient(dst,src){var s\x3dsrc.shape.slice();"],u=0;u<1<<d;++u){for(var v=[],w=0;w<d;++w)u&1<<w&&v.push(w+1);for(var y=0;y<1<<v.length;++y){var D=v.slice();for(w=0;w<
v.length;++w)y&1<<w&&(D[w]=-D[w]);w=D;D=d-w.length;for(var x=[],E=[],B=[],t=0;t<d;++t)0<=w.indexOf(t+1)?B.push("0"):0<=w.indexOf(-(t+1))?B.push("s["+t+"]-1"):(B.push("-1"),x.push("1"),E.push("s["+t+"]-2"));E=".lo("+x.join()+").hi("+E.join()+")";0===x.length&&(E="");if(0<D){r.push("if(1");for(t=0;t<d;++t)0<=w.indexOf(t+1)||0<=w.indexOf(-(t+1))||r.push("\x26\x26s[",t,"]\x3e2");r.push("){grad",D,"(src.pick(",B.join(),")",E);for(t=0;t<d;++t)0<=w.indexOf(t+1)||0<=w.indexOf(-(t+1))||r.push(",dst.pick(",
B.join(),",",t,")",E);r.push(");")}for(t=0;t<w.length;++t){x=Math.abs(w[t])-1;var G="dst.pick("+B.join()+","+x+")"+E;switch(q[x]){case "clamp":var I=B.slice(),L=B.slice();0>w[t]?I[x]="s["+x+"]-2":L[x]="1";0===D?r.push("if(s[",x,"]\x3e1){dst.set(",B.join(),",",x,",0.5*(src.get(",I.join(),")-src.get(",L.join(),")))}else{dst.set(",B.join(),",",x,",0)};"):r.push("if(s[",x,"]\x3e1){diff(",G,",src.pick(",I.join(),")",E,",src.pick(",L.join(),")",E,");}else{zero(",G,");};");break;case "mirror":0===D?r.push("dst.set(",
B.join(),",",x,",0);"):r.push("zero(",G,");");break;case "wrap":I=B.slice();L=B.slice();0>w[t]?(I[x]="s["+x+"]-2",L[x]="0"):(I[x]="s["+x+"]-1",L[x]="1");0===D?r.push("if(s[",x,"]\x3e2){dst.set(",B.join(),",",x,",0.5*(src.get(",I.join(),")-src.get(",L.join(),")))}else{dst.set(",B.join(),",",x,",0)};"):r.push("if(s[",x,"]\x3e2){diff(",G,",src.pick(",I.join(),")",E,",src.pick(",L.join(),")",E,");}else{zero(",G,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<D&&r.push("};")}}r.push("return dst;};return gradient");
q=["diff","zero"];v=[k,p];for(u=1;u<=d;++u)q.push("grad"+u),v.push(m(u));q.push(r.join(""));d=Function.apply(void 0,q).apply(void 0,v);e[f]=d}return d(n,c)};var h=b("dup"),l=b("cwise-compiler"),e={},a={},g={body:"",args:[],thisVars:[],localVars:[]},k=l({args:["array","array","array"],pre:g,post:g,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out\x3d0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),
p=l({args:["array"],pre:g,post:g,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out\x3d0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":151,dup:176}],463:[function(b,F,C){function m(a,g){var k=Math.floor(g);g-=k;var p=0<=k+1&&k+1<a.shape[0],n=0<=k&&k<a.shape[0]?+a.get(k):0;a=p?+a.get(k+1):0;return(1-g)*n+g*a}function h(a,g,k){var p=Math.floor(g);g-=p;var n=0<=p&&p<a.shape[0],c=0<=p+1&&p+1<a.shape[0],f=Math.floor(k);k-=f;var d=0<=f&&f<a.shape[1],q=0<=f+1&&f+1<a.shape[1],
r=n&&d?a.get(p,f):0;n=n&&q?a.get(p,f+1):0;d=c&&d?a.get(p+1,f):0;a=c&&q?a.get(p+1,f+1):0;return(1-k)*((1-g)*r+g*d)+k*((1-g)*n+g*a)}function l(a,g,k,p){var n=Math.floor(g);g-=n;var c=0<=n&&n<a.shape[0],f=0<=n+1&&n+1<a.shape[0],d=Math.floor(k);k-=d;var q=0<=d&&d<a.shape[1],r=0<=d+1&&d+1<a.shape[1],u=Math.floor(p);p-=u;var v=0<=u&&u<a.shape[2],w=0<=u+1&&u+1<a.shape[2],y=c&&q&&v?a.get(n,d,u):0,D=c&&r&&v?a.get(n,d+1,u):0,x=f&&q&&v?a.get(n+1,d,u):0;v=f&&r&&v?a.get(n+1,d+1,u):0;var E=c&&q&&w?a.get(n,d,u+
1):0;c=c&&r&&w?a.get(n,d+1,u+1):0;q=f&&q&&w?a.get(n+1,d,u+1):0;a=f&&r&&w?a.get(n+1,d+1,u+1):0;return(1-p)*((1-k)*((1-g)*y+g*x)+k*((1-g)*D+g*v))+p*((1-k)*((1-g)*E+g*q)+k*((1-g)*c+g*a))}function e(a){var g=a.shape.length|0,k=Array(g),p=Array(g),n=Array(g),c=Array(g),f;for(f=0;f<g;++f){var d=+arguments[f+1];k[f]=Math.floor(d);p[f]=d-k[f];n[f]=0<=k[f]&&k[f]<a.shape[f];c[f]=0<=k[f]+1&&k[f]+1<a.shape[f]}d=0;var q;f=0;a:for(;f<1<<g;++f){var r=1;var u=a.offset;for(q=0;q<g;++q)if(f&1<<q){if(!c[q])continue a;
r*=p[q];u+=a.stride[q]*(k[q]+1)}else{if(!n[q])continue a;r*=1-p[q];u+=a.stride[q]*k[q]}d+=r*a.data[u]}return d}F.exports=function(a,g,k,p){switch(a.shape.length){case 0:return 0;case 1:return m(a,g);case 2:return h(a,g,k);case 3:return l(a,g,k,p);default:return e.apply(void 0,arguments)}};F.exports.d1=m;F.exports.d2=h;F.exports.d3=l},{}],464:[function(b,F,C){function m(f){if(!f)return e;for(var d=0;d<f.args.length;++d){var q=f.args[d];f.args[d]=0===d?{name:q,lvalue:!0,rvalue:!!f.rvalue,count:f.count||
1}:{name:q,lvalue:!1,rvalue:!0,count:1}}f.thisVars||(f.thisVars=[]);f.localVars||(f.localVars=[]);return f}function h(f){for(var d=[],q=0;q<f.args.length;++q)d.push("a"+q);d=new Function("P",["return function ",f.funcName,"_ndarrayops(",d.join(","),") {P(",d.join(","),");return a0}"].join(""));f=l({args:f.args,pre:m(f.pre),body:m(f.body),post:m(f.proc),funcName:f.funcName});return d(f)}var l=b("cwise-compiler"),e={body:"",args:[],thisVars:[],localVars:[]},a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",
band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};(function(){for(var f in a){var d=a[f];C[f]=h({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+d+"c"},funcName:f});C[f+"eq"]=h({args:["array","array"],body:{args:["a","b"],body:"a"+d+"\x3db"},rvalue:!0,funcName:f+"eq"});C[f+"s"]=h({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+d+"s"},funcName:f+"s"});C[f+"seq"]=h({args:["array","scalar"],body:{args:["a","s"],body:"a"+
d+"\x3ds"},rvalue:!0,funcName:f+"seq"})}})();var g={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var f in g){var d=g[f];C[f]=h({args:["array","array"],body:{args:["a","b"],body:"a\x3d"+d+"b"},funcName:f});C[f+"eq"]=h({args:["array"],body:{args:["a"],body:"a\x3d"+d+"a"},rvalue:!0,count:2,funcName:f+"eq"})}})();var k={and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d"};(function(){for(var f in k){var d=k[f];C[f]=h({args:["array","array",
"array"],body:{args:["a","b","c"],body:"a\x3db"+d+"c"},funcName:f});C[f+"s"]=h({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+d+"s"},funcName:f+"s"});C[f+"eq"]=h({args:["array","array"],body:{args:["a","b"],body:"a\x3da"+d+"b"},rvalue:!0,count:2,funcName:f+"eq"});C[f+"seq"]=h({args:["array","scalar"],body:{args:["a","s"],body:"a\x3da"+d+"s"},rvalue:!0,count:2,funcName:f+"seq"})}})();var p="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var f=
0;f<p.length;++f){var d=p[f];C[d]=h({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b)",thisVars:["this_f"]},funcName:d});C[d+"eq"]=h({args:["array"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"eq"})}})();var n=["max","min","atan2","pow"];(function(){for(var f=0;f<n.length;++f){var d=n[f];C[d]=h({args:["array","array","array"],
pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:d});C[d+"s"]=h({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:d+"s"});C[d+"eq"]=h({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,
count:2,funcName:d+"eq"});C[d+"seq"]=h({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"seq"})}})();var c=["atan2","pow"];(function(){for(var f=0;f<c.length;++f){var d=c[f];C[d+"op"]=h({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:d+"op"});C[d+"ops"]=
h({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:d+"ops"});C[d+"opeq"]=h({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"opeq"});C[d+"opseq"]=h({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b"],
body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"opseq"})}})();C.any=l({args:["array"],pre:e,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});C.all=l({args:["array"],pre:e,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});
C.sum=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});C.prod=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],
thisVars:["this_s"],body:"return this_s"},funcName:"prod"});C.norm2squared=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});C.norm2=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],
body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});C.norminf=l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a\x3ethis_s){this_s\x3d-a}else if(a\x3ethis_s){this_s\x3da}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});C.norm1=
l({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+\x3da\x3c0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});C.sup=l({args:["array"],pre:{body:"this_h\x3d-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3ethis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,
count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});C.inf=l({args:["array"],pre:{body:"this_h\x3dInfinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3cthis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});C.argmin=l({args:["index","array","shape"],pre:{body:"{this_v\x3dInfinity;this_i\x3d_inline_0_arg2_.slice(0)}",
args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3cthis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,
rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});C.argmax=l({args:["index","array","shape"],pre:{body:"{this_v\x3d-Infinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3ethis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});C.random=h({args:["array"],pre:{args:[],body:"this_f\x3dMath.random",thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f()",thisVars:["this_f"]},funcName:"random"});C.assign=h({args:["array","array"],body:{args:["a","b"],body:"a\x3db"},funcName:"assign"});
C.assigns=h({args:["array","scalar"],body:{args:["a","b"],body:"a\x3db"},funcName:"assigns"});C.equals=l({args:["array","array"],pre:e,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!\x3d\x3dy){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":151}],465:[function(b,F,C){var m=b("ndarray"),h=b("./doConvert.js");F.exports=function(l,e){for(var a=[],g=l,k=1;Array.isArray(g);)a.push(g.length),
k*=g.length,g=g[0];if(0===a.length)return m();e||(e=m(new Float64Array(k),a));h(e,l);return e}},{"./doConvert.js":466,ndarray:469}],466:[function(b,F,C){F.exports=b("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v\x3d_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i\x3d0;_inline_1_i\x3c_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v\x3d_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_\x3d_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",
args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":151}],467:[function(b,F,C){function m(g){switch(g){case "uint8":return[a.mallocUint8,a.freeUint8];case "uint16":return[a.mallocUint16,a.freeUint16];case "uint32":return[a.mallocUint32,
a.freeUint32];case "int8":return[a.mallocInt8,a.freeInt8];case "int16":return[a.mallocInt16,a.freeInt16];case "int32":return[a.mallocInt32,a.freeInt32];case "float32":return[a.mallocFloat,a.freeFloat];case "float64":return[a.mallocDouble,a.freeDouble];default:return null}}function h(g){for(var k=[],p=0;p<g;++p)k.push("s"+p);for(p=0;p<g;++p)k.push("n"+p);for(p=1;p<g;++p)k.push("d"+p);for(p=1;p<g;++p)k.push("e"+p);for(p=1;p<g;++p)k.push("f"+p);return k}function l(g,k){function p(w){return"generic"===
k?["data.get(",w,")"].join(""):["data[",w,"]"].join("")}function n(w,y){return"generic"===k?["data.set(",w,",",y,")"].join(""):["data[",w,"]\x3d",y].join("")}var c=["'use strict'"],f=["ndarrayInsertionSort",g.join("d"),k].join(""),d=["left","right","data","offset"].concat(h(g.length)),q=m(k),r=["i,j,cptr,ptr\x3dleft*s0+offset"];if(1<g.length){for(var u=[],v=1;v<g.length;++v)r.push("i"+v),u.push("n"+v);q?r.push("scratch\x3dmalloc("+u.join("*")+")"):r.push("scratch\x3dnew Array("+u.join("*")+")");r.push("dptr",
"sptr","a","b")}else r.push("scratch");c.push(["function ",f,"(",d.join(","),"){var ",r.join(",")].join(""),"for(i\x3dleft+1;i\x3c\x3dright;++i){","j\x3di;ptr+\x3ds0","cptr\x3dptr");if(1<g.length){c.push("dptr\x3d0;sptr\x3dptr");for(v=g.length-1;0<=v;--v)d=g[v],0!==d&&c.push(["for(i",d,"\x3d0;i",d,"\x3cn",d,";++i",d,"){"].join(""));c.push("scratch[dptr++]\x3d",p("sptr"));for(v=0;v<g.length;++v)d=g[v],0!==d&&c.push("sptr+\x3dd"+d,"}");c.push("__g:while(j--\x3eleft){","dptr\x3d0","sptr\x3dcptr-s0");
for(v=1;v<g.length;++v)1===v&&c.push("__l:"),c.push(["for(i",v,"\x3d0;i",v,"\x3cn",v,";++i",v,"){"].join(""));c.push(["a\x3d",p("sptr"),"\nb\x3dscratch[dptr]\nif(a\x3cb){break __g}\nif(a\x3eb){break __l}"].join(""));for(v=g.length-1;1<=v;--v)c.push("sptr+\x3de"+v,"dptr+\x3df"+v,"}");c.push("dptr\x3dcptr;sptr\x3dcptr-s0");for(v=g.length-1;0<=v;--v)d=g[v],0!==d&&c.push(["for(i",d,"\x3d0;i",d,"\x3cn",d,";++i",d,"){"].join(""));c.push(n("dptr",p("sptr")));for(v=0;v<g.length;++v)d=g[v],0!==d&&c.push(["dptr+\x3dd",
d,";sptr+\x3dd",d].join(""),"}");c.push("cptr-\x3ds0\n}");c.push("dptr\x3dcptr;sptr\x3d0");for(v=g.length-1;0<=v;--v)d=g[v],0!==d&&c.push(["for(i",d,"\x3d0;i",d,"\x3cn",d,";++i",d,"){"].join(""));c.push(n("dptr","scratch[sptr++]"));for(v=0;v<g.length;++v)d=g[v],0!==d&&c.push("dptr+\x3dd"+d,"}")}else c.push("scratch\x3d"+p("ptr"),"while((j--\x3eleft)\x26\x26("+p("cptr-s0")+"\x3escratch)){",n("cptr",p("cptr-s0")),"cptr-\x3ds0","}",n("cptr","scratch"));c.push("}");1<g.length&&q&&c.push("free(scratch)");
c.push("} return "+f);if(q)return g=new Function("malloc","free",c.join("\n")),g(q[0],q[1]);g=new Function(c.join("\n"));return g()}function e(g,k,p){function n(O){return["(offset+",O,"*s0)"].join("")}function c(O){return"generic"===k?["data.get(",O,")"].join(""):["data[",O,"]"].join("")}function f(O,Q){return"generic"===k?["data.set(",O,",",Q,")"].join(""):["data[",O,"]\x3d",Q].join("")}function d(O,Q,U){if(1===O.length)G.push("ptr0\x3d"+n(O[0]));else for(var P=0;P<O.length;++P)G.push(["b_ptr",P,
"\x3ds0*",O[P]].join(""));Q&&G.push("pivot_ptr\x3d0");G.push("ptr_shift\x3doffset");for(P=g.length-1;0<=P;--P){var V=g[P];0!==V&&G.push(["for(i",V,"\x3d0;i",V,"\x3cn",V,";++i",V,"){"].join(""))}if(1<O.length)for(P=0;P<O.length;++P)G.push(["ptr",P,"\x3db_ptr",P,"+ptr_shift"].join(""));G.push(U);Q&&G.push("++pivot_ptr");for(P=0;P<g.length;++P)V=g[P],0!==V&&(1<O.length?G.push("ptr_shift+\x3dd"+V):G.push("ptr0+\x3dd"+V),G.push("}"))}function q(O,Q,U,P){if(1===Q.length)G.push("ptr0\x3d"+n(Q[0]));else{for(var V=
0;V<Q.length;++V)G.push(["b_ptr",V,"\x3ds0*",Q[V]].join(""));G.push("ptr_shift\x3doffset")}U&&G.push("pivot_ptr\x3d0");O&&G.push(O+":");for(V=1;V<g.length;++V)G.push(["for(i",V,"\x3d0;i",V,"\x3cn",V,";++i",V,"){"].join(""));if(1<Q.length)for(V=0;V<Q.length;++V)G.push(["ptr",V,"\x3db_ptr",V,"+ptr_shift"].join(""));G.push(P);for(V=g.length-1;1<=V;--V)U&&G.push("pivot_ptr+\x3df"+V),1<Q.length?G.push("ptr_shift+\x3de"+V):G.push("ptr0+\x3de"+V),G.push("}")}function r(){1<g.length&&M&&G.push("free(pivot1)",
"free(pivot2)")}function u(O,Q){O="el"+O;Q="el"+Q;if(1<g.length){var U="__l"+ ++N;q(U,[O,Q],!1,["comp\x3d",c("ptr0"),"-",c("ptr1"),"\nif(comp\x3e0){tmp0\x3d",O,";",O,"\x3d",Q,";",Q,"\x3dtmp0;break ",U,"}\nif(comp\x3c0){break ",U,"}"].join(""))}else G.push(["if(",c(n(O)),"\x3e",c(n(Q)),"){tmp0\x3d",O,";",O,"\x3d",Q,";",Q,"\x3dtmp0}"].join(""))}function v(O,Q){1<g.length?d([O,Q],!1,f("ptr0",c("ptr1"))):G.push(f(n(O),c(n(Q))))}function w(O,Q,U){if(1<g.length){var P="__l"+ ++N;q(P,[Q],!0,[O,"\x3d",c("ptr0"),
"-pivot",U,"[pivot_ptr]\nif(",O,"!\x3d\x3d0){break ",P,"}"].join(""))}else G.push([O,"\x3d",c(n(Q)),"-pivot",U].join(""))}function y(O,Q){1<g.length?d([O,Q],!1,["tmp\x3d",c("ptr0"),"\n",f("ptr0",c("ptr1")),"\n",f("ptr1","tmp")].join("")):G.push(["ptr0\x3d",n(O),"\nptr1\x3d",n(Q),"\ntmp\x3d",c("ptr0"),"\n",f("ptr0",c("ptr1")),"\n",f("ptr1","tmp")].join(""))}function D(O,Q,U){1<g.length?(d([O,Q,U],!1,["tmp\x3d",c("ptr0"),"\n",f("ptr0",c("ptr1")),"\n",f("ptr1",c("ptr2")),"\n",f("ptr2","tmp")].join("")),
G.push("++"+Q,"--"+U)):G.push(["ptr0\x3d",n(O),"\nptr1\x3d",n(Q),"\nptr2\x3d",n(U),"\n++",Q,"\n--",U,"\ntmp\x3d",c("ptr0"),"\n",f("ptr0",c("ptr1")),"\n",f("ptr1",c("ptr2")),"\n",f("ptr2","tmp")].join(""))}function x(O,Q){y(O,Q);G.push("--"+Q)}function E(O,Q,U){1<g.length?d([O,Q],!0,[f("ptr0",c("ptr1")),"\n",f("ptr1",["pivot",U,"[pivot_ptr]"].join(""))].join("")):G.push(f(n(O),c(n(Q))),f(n(Q),"pivot"+U))}function B(O,Q){G.push(["if((",Q,"-",O,")\x3c\x3d32){\ninsertionSort(",O,",",Q,",data,offset,",
h(g.length).join(","),")\n}else{\n",I,"(",O,",",Q,",data,offset,",h(g.length).join(","),")\n}"].join(""))}function t(O,Q,U){1<g.length?(G.push(["__l",++N,":while(true){"].join("")),d([O],!0,["if(",c("ptr0"),"!\x3d\x3dpivot",Q,"[pivot_ptr]){break __l",N,"}"].join("")),G.push(U,"}")):G.push(["while(",c(n(O)),"\x3d\x3d\x3dpivot",Q,"){",U,"}"].join(""))}var G=["'use strict'"],I=["ndarrayQuickSort",g.join("d"),k].join(""),L=["left","right","data","offset"].concat(h(g.length)),M=m(k),N=0;G.push(["function ",
I,"(",L.join(","),"){"].join(""));L="sixth\x3d((right-left+1)/6)|0 index1\x3dleft+sixth index5\x3dright-sixth index3\x3d(left+right)\x3e\x3e1 index2\x3dindex3-sixth index4\x3dindex3+sixth el1\x3dindex1 el2\x3dindex2 el3\x3dindex3 el4\x3dindex4 el5\x3dindex5 less\x3dleft+1 great\x3dright-1 pivots_are_equal\x3dtrue tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1\x3d0 comp_pivot2\x3d0 comp\x3d0".split(" ");if(1<g.length){for(var H=[],J=1;J<g.length;++J)H.push("n"+J),L.push("i"+J);for(J=0;8>J;++J)L.push("b_ptr"+
J);L.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize\x3d"+H.join("*"));M?L.push("pivot1\x3dmalloc(elementSize)","pivot2\x3dmalloc(elementSize)"):L.push("pivot1\x3dnew Array(elementSize),pivot2\x3dnew Array(elementSize)")}else L.push("pivot1","pivot2");G.push("var "+L.join(","));u(1,2);u(4,5);u(1,3);u(2,3);u(1,4);u(3,4);u(2,5);u(2,3);u(4,5);1<g.length?d("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),!0,["pivot1[pivot_ptr]\x3d",c("ptr1"),"\npivot2[pivot_ptr]\x3d",
c("ptr3"),"\npivots_are_equal\x3dpivots_are_equal\x26\x26(pivot1[pivot_ptr]\x3d\x3d\x3dpivot2[pivot_ptr])\nx\x3d",c("ptr0"),"\ny\x3d",c("ptr2"),"\nz\x3d",c("ptr4"),"\n",f("ptr5","x"),"\n",f("ptr6","y"),"\n",f("ptr7","z")].join("")):G.push(["pivot1\x3d",c(n("el2")),"\npivot2\x3d",c(n("el4")),"\npivots_are_equal\x3dpivot1\x3d\x3d\x3dpivot2\nx\x3d",c(n("el1")),"\ny\x3d",c(n("el3")),"\nz\x3d",c(n("el5")),"\n",f(n("index1"),"x"),"\n",f(n("index3"),"y"),"\n",f(n("index5"),"z")].join(""));v("index2","left");
v("index4","right");G.push("if(pivots_are_equal){");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");w("comp","k",1);G.push("if(comp\x3d\x3d\x3d0){continue}");G.push("if(comp\x3c0){");G.push("if(k!\x3d\x3dless){");y("k","less");G.push("}");G.push("++less");G.push("}else{");G.push("while(true){");w("comp","great",1);G.push("if(comp\x3e0){");G.push("great--");G.push("}else if(comp\x3c0){");D("k","less","great");G.push("break");G.push("}else{");x("k","great");G.push("break");G.push("}");G.push("}");G.push("}");
G.push("}");G.push("}else{");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");w("comp_pivot1","k",1);G.push("if(comp_pivot1\x3c0){");G.push("if(k!\x3d\x3dless){");y("k","less");G.push("}");G.push("++less");G.push("}else{");w("comp_pivot2","k",2);G.push("if(comp_pivot2\x3e0){");G.push("while(true){");w("comp","great",2);G.push("if(comp\x3e0){");G.push("if(--great\x3ck){break}");G.push("continue");G.push("}else{");w("comp","great",1);G.push("if(comp\x3c0){");D("k","less","great");G.push("}else{");x("k",
"great");G.push("}");G.push("break");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");E("left","(less-1)",1);E("right","(great+1)",2);B("left","(less-2)");B("(great+2)","right");G.push("if(pivots_are_equal){");r();G.push("return");G.push("}");G.push("if(less\x3cindex1\x26\x26great\x3eindex5){");t("less",1,"++less");t("great",2,"--great");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");w("comp_pivot1","k",1);G.push("if(comp_pivot1\x3d\x3d\x3d0){");G.push("if(k!\x3d\x3dless){");
y("k","less");G.push("}");G.push("++less");G.push("}else{");w("comp_pivot2","k",2);G.push("if(comp_pivot2\x3d\x3d\x3d0){");G.push("while(true){");w("comp","great",2);G.push("if(comp\x3d\x3d\x3d0){");G.push("if(--great\x3ck){break}");G.push("continue");G.push("}else{");w("comp","great",1);G.push("if(comp\x3c0){");D("k","less","great");G.push("}else{");x("k","great");G.push("}");G.push("break");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");r();B("less","great");G.push("}return "+
I);if(1<g.length&&M)return L=new Function("insertionSort","malloc","free",G.join("\n")),L(p,M[0],M[1]);L=new Function("insertionSort",G.join("\n"));return L(p)}var a=b("typedarray-pool");F.exports=function(g,k){var p=["'use strict'"],n=["ndarraySortWrapper",g.join("d"),k].join("");p.push(["function ",n,"(array){"].join(""));for(var c=["data\x3darray.data,offset\x3darray.offset|0,shape\x3darray.shape,stride\x3darray.stride"],f=0;f<g.length;++f)c.push(["s",f,"\x3dstride[",f,"]|0,n",f,"\x3dshape[",f,
"]|0"].join(""));var d=Array(g.length),q=[];for(f=0;f<g.length;++f){var r=g[f];0!==r&&(d[r]=0===q.length?"1":q.join("*"),q.push("n"+r))}var u=q=-1;for(f=0;f<g.length;++f)r=g[f],0!==r&&(0<q?c.push(["d",r,"\x3ds",r,"-d",q,"*n",q].join("")):c.push(["d",r,"\x3ds",r].join("")),q=r),r=g.length-1-f,0!==r&&(0<u?c.push(["e",r,"\x3ds",r,"-e",u,"*n",u,",f",r,"\x3d",d[r],"-f",u,"*n",u].join("")):c.push(["e",r,"\x3ds",r,",f",r,"\x3d",d[r]].join("")),u=r);p.push("var "+c.join(","));c=["0","n0-1","data","offset"].concat(h(g.length));
p.push(["if(n0\x3c\x3d32){insertionSort(",c.join(","),")}else{quickSort(",c.join(","),")}"].join(""));p.push("}return "+n);p=new Function("insertionSort","quickSort",p.join("\n"));n=l(g,k);g=e(g,k,n);return p(n,g)}},{"typedarray-pool":567}],468:[function(b,F,C){var m=b("./lib/compile_sort.js"),h={};F.exports=function(l){var e=l.order,a=l.dtype,g=[e,a].join(":"),k=h[g];k||(h[g]=k=m(e,a));k(l);return l}},{"./lib/compile_sort.js":467}],469:[function(b,F,C){function m(n,c){return n[0]-c[0]}function h(){var n=
this.stride,c=Array(n.length),f;for(f=0;f<c.length;++f)c[f]=[Math.abs(n[f]),f];c.sort(m);n=Array(c.length);for(f=0;f<n.length;++f)n[f]=c[f][1];return n}function l(n,c){var f=["View",c,"d",n].join("");0>c&&(f="View_Nil"+n);var d="generic"===n;if(-1===c)return c=new Function("function "+f+"(a){this.data\x3da;};var proto\x3d"+f+".prototype;proto.dtype\x3d'"+n+"';proto.index\x3dfunction(){return -1};proto.size\x3d0;proto.dimension\x3d-1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction(){return new "+
f+"(this.data);};proto.get\x3dproto.set\x3dfunction(){};proto.pick\x3dfunction(){return null};return function construct_"+f+"(a){return new "+f+"(a);}"),c();if(0===c)return c=new Function("TrivialArray","function "+f+"(a,d) {this.data \x3d a;this.offset \x3d d};var proto\x3d"+f+".prototype;proto.dtype\x3d'"+n+"';proto.index\x3dfunction(){return this.offset};proto.dimension\x3d0;proto.size\x3d1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction "+
f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick\x3dfunction "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf\x3dproto.get\x3dfunction "+f+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set\x3dfunction "+f+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]\x3dv")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}"),c(p[n][0]);var q=["'use strict'"];var r=a(c),u=r.map(function(D){return"i"+D}),v=
"this.offset+"+r.map(function(D){return"this.stride["+D+"]*i"+D}).join("+"),w=r.map(function(D){return"b"+D}).join(","),y=r.map(function(D){return"c"+D}).join(",");q.push("function "+f+"(a,"+w+","+y+",d){this.data\x3da","this.shape\x3d["+w+"]","this.stride\x3d["+y+"]","this.offset\x3dd|0}","var proto\x3d"+f+".prototype","proto.dtype\x3d'"+n+"'","proto.dimension\x3d"+c);q.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+r.map(function(D){return"this.shape["+D+"]"}).join("*"),
"}})");1===c?q.push("proto.order\x3d[0]"):(q.push("Object.defineProperty(proto,'order',{get:"),4>c?(q.push("function "+f+"_order(){"),2===c?q.push("return (Math.abs(this.stride[0])\x3eMath.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===c&&q.push("var s0\x3dMath.abs(this.stride[0]),s1\x3dMath.abs(this.stride[1]),s2\x3dMath.abs(this.stride[2]);if(s0\x3es1){if(s1\x3es2){return [2,1,0];}else if(s0\x3es2){return [1,2,0];}else{return [1,0,2];}}else if(s0\x3es2){return [2,0,1];}else if(s2\x3es1){return [0,1,2];}else{return [0,2,1];}}})")):
q.push("ORDER})"));q.push("proto.set\x3dfunction "+f+"_set("+u.join(",")+",v){");d?q.push("return this.data.set("+v+",v)}"):q.push("return this.data["+v+"]\x3dv}");q.push("proto.get\x3dfunction "+f+"_get("+u.join(",")+"){");d?q.push("return this.data.get("+v+")}"):q.push("return this.data["+v+"]}");q.push("proto.index\x3dfunction "+f+"_index(",u.join(),"){return "+v+"}");q.push("proto.hi\x3dfunction "+f+"_hi("+u.join(",")+"){return new "+f+"(this.data,"+r.map(function(D){return["(typeof i",D,"!\x3d\x3d'number'||i",
D,"\x3c0)?this.shape[",D,"]:i",D,"|0"].join("")}).join(",")+","+r.map(function(D){return"this.stride["+D+"]"}).join(",")+",this.offset)}");d=r.map(function(D){return"a"+D+"\x3dthis.shape["+D+"]"});v=r.map(function(D){return"c"+D+"\x3dthis.stride["+D+"]"});q.push("proto.lo\x3dfunction "+f+"_lo("+u.join(",")+"){var b\x3dthis.offset,d\x3d0,"+d.join(",")+","+v.join(","));for(d=0;d<c;++d)q.push("if(typeof i"+d+"\x3d\x3d\x3d'number'\x26\x26i"+d+"\x3e\x3d0){d\x3di"+d+"|0;b+\x3dc"+d+"*d;a"+d+"-\x3dd}");q.push("return new "+
f+"(this.data,"+r.map(function(D){return"a"+D}).join(",")+","+r.map(function(D){return"c"+D}).join(",")+",b)}");q.push("proto.step\x3dfunction "+f+"_step("+u.join(",")+"){var "+r.map(function(D){return"a"+D+"\x3dthis.shape["+D+"]"}).join(",")+","+r.map(function(D){return"b"+D+"\x3dthis.stride["+D+"]"}).join(",")+",c\x3dthis.offset,d\x3d0,ceil\x3dMath.ceil");for(d=0;d<c;++d)q.push("if(typeof i"+d+"\x3d\x3d\x3d'number'){d\x3di"+d+"|0;if(d\x3c0){c+\x3db"+d+"*(a"+d+"-1);a"+d+"\x3dceil(-a"+d+"/d)}else{a"+
d+"\x3dceil(a"+d+"/d)}b"+d+"*\x3dd}");q.push("return new "+f+"(this.data,"+r.map(function(D){return"a"+D}).join(",")+","+r.map(function(D){return"b"+D}).join(",")+",c)}");v=Array(c);w=Array(c);for(d=0;d<c;++d)v[d]="a[i"+d+"]",w[d]="b[i"+d+"]";q.push("proto.transpose\x3dfunction "+f+"_transpose("+u+"){"+u.map(function(D,x){return D+"\x3d("+D+"\x3d\x3d\x3dundefined?"+x+":"+D+"|0)"}).join(";"),"var a\x3dthis.shape,b\x3dthis.stride;return new "+f+"(this.data,"+v.join(",")+","+w.join(",")+",this.offset)}");
q.push("proto.pick\x3dfunction "+f+"_pick("+u+"){var a\x3d[],b\x3d[],c\x3dthis.offset");for(d=0;d<c;++d)q.push("if(typeof i"+d+"\x3d\x3d\x3d'number'\x26\x26i"+d+"\x3e\x3d0){c\x3d(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");q.push("var ctor\x3dCTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");q.push("return function construct_"+f+"(data,shape,stride,offset){return new "+f+"(data,"+r.map(function(D){return"shape["+D+"]"}).join(",")+","+r.map(function(D){return"stride["+
D+"]"}).join(",")+",offset)}");c=new Function("CTOR_LIST","ORDER",q.join("\n"));return c(p[n],h)}function e(n){if(g(n))return"buffer";if(k)switch(Object.prototype.toString.call(n)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";
case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(n)?"array":"generic"}var a=b("iota-array"),g=b("is-buffer"),k="undefined"!==typeof Float64Array,p={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};(function(){for(var n in p)p[n].push(l(n,-1))});F.exports=function(n,c,f,d){if(void 0===
n){var q=p.array[0];return q([])}"number"===typeof n&&(n=[n]);void 0===c&&(c=[n.length]);q=c.length;if(void 0===f){f=Array(q);for(var r=q-1,u=1;0<=r;--r)f[r]=u,u*=c[r]}if(void 0===d)for(r=d=0;r<q;++r)0>f[r]&&(d-=(c[r]-1)*f[r]);r=e(n);for(u=p[r];u.length<=q+1;)u.push(l(r,u.length-1));q=u[q+1];return q(n,c,f,d)}},{"iota-array":437,"is-buffer":439}],470:[function(b,F,C){var m=b("double-bits"),h=Math.pow(2,-1074);F.exports=function(l,e){if(isNaN(l)||isNaN(e))return NaN;if(l===e)return l;if(0===l)return 0>
e?-h:h;var a=m.hi(l),g=m.lo(l);e>l===0<l?4294967295===g?(a+=1,g=0):g+=1:0===g?(g=4294967295,--a):--g;return m.pack(g,a)}},{"double-bits":173}],471:[function(b,F,C){function m(k,p,n,c){return["C",k,p,n,c,n,c]}function h(k,p,n,c,f,d){return["C",k/3+2/3*n,p/3+2/3*c,f/3+2/3*n,d/3+2/3*c,f,d]}function l(k,p,n,c,f,d,q,r,u,v){if(v)x=v[0],d=v[1],y=v[2],D=v[3];else{x=e(k,p,-f);k=x.x;p=x.y;x=e(r,u,-f);r=x.x;u=x.y;x=(k-r)/2;y=(p-u)/2;D=x*x/(n*n)+y*y/(c*c);1<D&&(D=Math.sqrt(D),n*=D,c*=D);D=n*n;var w=c*c;d=(d==
q?-1:1)*Math.sqrt(Math.abs((D*w-D*y*y-w*x*x)/(D*y*y+w*x*x)));Infinity==d&&(d=1);var y=d*n*y/c+(k+r)/2,D=d*-c*x/n+(p+u)/2,x=Math.asin(((p-D)/c).toFixed(9));d=Math.asin(((u-D)/c).toFixed(9));x=k<y?a-x:x;d=r<y?a-d:d;0>x&&(x=2*a+x);0>d&&(d=2*a+d);q&&x>d&&(x-=2*a);!q&&d>x&&(d-=2*a)}if(Math.abs(d-x)>g){var E=d;w=r;var B=u;d=x+g*(q&&d>x?1:-1);r=y+n*Math.cos(d);u=D+c*Math.sin(d);E=l(r,u,n,c,f,0,q,w,B,[d,E,y,D])}q=Math.tan((d-x)/4);n=4/3*n*q;c=4/3*c*q;k=[2*k-(k+n*Math.sin(x)),2*p-(p-c*Math.cos(x)),r+n*Math.sin(d),
u-c*Math.cos(d),r,u];if(v)return k;E&&(k=k.concat(E));for(v=0;v<k.length;)p=e(k[v],k[v+1],f),k[v++]=p.x,k[v++]=p.y;return k}function e(k,p,n){return{x:k*Math.cos(n)-p*Math.sin(n),y:k*Math.sin(n)+p*Math.cos(n)}}var a=Math.PI,g=a/180*120;F.exports=function(k){for(var p,n=[],c=0,f=0,d=0,q=0,r=null,u=null,v=0,w=0,y=0,D=k.length;y<D;y++){var x=k[y],E=x[0];switch(E){case "M":d=x[1];q=x[2];break;case "A":x=l(v,w,x[1],x[2],a/180*x[3],x[4],x[5],x[6],x[7]);x.unshift("C");7<x.length&&(n.push(x.splice(0,7)),
x.unshift("C"));break;case "S":if("C"==p||"S"==p)v+=v-c,w+=w-f;x=["C",v,w,x[1],x[2],x[3],x[4]];break;case "T":"Q"==p||"T"==p?(r=2*v-r,u=2*w-u):(r=v,u=w);x=h(v,w,r,u,x[1],x[2]);break;case "Q":r=x[1];u=x[2];x=h(v,w,x[1],x[2],x[3],x[4]);break;case "L":x=m(v,w,x[1],x[2]);break;case "H":x=m(v,w,x[1],w);break;case "V":x=m(v,w,v,x[1]);break;case "Z":x=m(v,w,d,q)}p=E;v=x[x.length-2];w=x[x.length-1];4<x.length?(c=x[x.length-4],f=x[x.length-3]):(c=v,f=w);n.push(x)}return n}},{}],472:[function(b,F,C){C.vertexNormals=
function(m,h,l){var e=h.length,a=Array(e);l=void 0===l?1E-6:l;for(var g=0;g<e;++g)a[g]=[0,0,0];for(g=0;g<m.length;++g)for(var k=m[g],p,n=k[k.length-1],c=k[0],f=0;f<k.length;++f){p=n;n=c;c=k[(f+1)%k.length];var d=h[p],q=h[n],r=h[c],u=Array(3),v=0,w=Array(3),y=0;for(p=0;3>p;++p)u[p]=d[p]-q[p],v+=u[p]*u[p],w[p]=r[p]-q[p],y+=w[p]*w[p];if(v*y>l)for(d=a[n],v=1/Math.sqrt(v*y),p=0;3>p;++p)y=(p+1)%3,q=(p+2)%3,d[p]+=v*(w[y]*u[q]-w[q]*u[y])}for(g=0;g<e;++g){d=a[g];for(p=m=0;3>p;++p)m+=d[p]*d[p];if(m>l)for(v=
1/Math.sqrt(m),p=0;3>p;++p)d[p]*=v;else for(p=0;3>p;++p)d[p]=0}return a};C.faceNormals=function(m,h,l){var e=m.length,a=Array(e);l=void 0===l?1E-6:l;for(var g=0;g<e;++g){for(var k=m[g],p=Array(3),n=0;3>n;++n)p[n]=h[k[n]];k=Array(3);var c=Array(3);for(n=0;3>n;++n)k[n]=p[1][n]-p[0][n],c[n]=p[2][n]-p[0][n];p=Array(3);var f=0;for(n=0;3>n;++n){var d=(n+1)%3,q=(n+2)%3;p[n]=k[d]*c[q]-k[q]*c[d];f+=p[n]*p[n]}f=f>l?1/Math.sqrt(f):0;for(n=0;3>n;++n)p[n]*=f;a[g]=p}return a}},{}],473:[function(b,F,C){var m=Object.getOwnPropertySymbols,
h=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;F.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");e[5]="de";if("5"===Object.getOwnPropertyNames(e)[0])return!1;var a={};for(e=0;10>e;e++)a["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(k){return a[k]}).join(""))return!1;var g={};"abcdefghijklmnopqrst".split("").forEach(function(k){g[k]=k});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},g)).join("")?
!1:!0}catch(k){return!1}}()?Object.assign:function(e,a){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");var g=Object(e);for(var k,p=1;p<arguments.length;p++){var n=Object(arguments[p]);for(var c in n)h.call(n,c)&&(g[c]=n[c]);if(m){k=m(n);for(var f=0;f<k.length;f++)l.call(n,k[f])&&(g[k[f]]=n[k[f]])}}return g}},{}],474:[function(b,F,C){F.exports=function(m,h,l,e,a,g,k,p,n,c){var f=h+g+c;if(0<d){var d=Math.sqrt(f+1);m[0]=.5*(k-n)/d;m[1]=.5*(p-e)/d;
m[2]=.5*(l-g)/d;m[3]=.5*d}else c=Math.max(h,g,c),d=Math.sqrt(2*c-f+1),h>=c?(m[0]=.5*d,m[1]=.5*(a+l)/d,m[2]=.5*(p+e)/d,m[3]=.5*(k-n)/d):g>=c?(m[0]=.5*(l+a)/d,m[1]=.5*d,m[2]=.5*(n+k)/d,m[3]=.5*(p-e)/d):(m[0]=.5*(e+p)/d,m[1]=.5*(k+n)/d,m[2]=.5*d,m[3]=.5*(l-a)/d);return m}},{}],475:[function(b,F,C){function m(c,f,d){return Math.sqrt(Math.pow(c,2)+Math.pow(f,2)+Math.pow(d,2))}function h(c,f,d,q){return Math.sqrt(Math.pow(c,2)+Math.pow(f,2)+Math.pow(d,2)+Math.pow(q,2))}function l(c,f){var d=f[0],q=f[1],
r=f[2];f=f[3];var u=h(d,q,r,f);1E-6<u?(c[0]=d/u,c[1]=q/u,c[2]=r/u,c[3]=f/u):(c[0]=c[1]=c[2]=0,c[3]=1)}function e(c,f,d){this.radius=a([d]);this.center=a(f);this.rotation=a(c);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}F.exports=function(c){c=c||{};var f=c.center||[0,0,0],d=c.rotation||[0,0,
0,1],q=c.radius||1;f=[].slice.call(f,0,3);d=[].slice.call(d,0,4);l(d,d);f=new e(d,f,Math.log(q));f.setDistanceLimits(c.zoomMin,c.zoomMax);("eye"in c||"up"in c)&&f.lookAt(0,c.eye,c.center,c.up);return f};var a=b("filtered-vector"),g=b("gl-mat4/lookAt"),k=b("gl-mat4/fromQuat"),p=b("gl-mat4/invert"),n=b("./lib/quatFromFrame");b=e.prototype;b.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};b.recalcMatrix=function(c){this.radius.curve(c);this.center.curve(c);
this.rotation.curve(c);var f=this.computedRotation;l(f,f);c=this.computedMatrix;k(c,f);var d=this.computedCenter;f=this.computedEye;var q=this.computedUp,r=Math.exp(this.computedRadius[0]);f[0]=d[0]+r*c[2];f[1]=d[1]+r*c[6];f[2]=d[2]+r*c[10];q[0]=c[1];q[1]=c[5];q[2]=c[9];for(d=0;3>d;++d){for(r=q=0;3>r;++r)q+=c[d+4*r]*f[r];c[12+d]=-q}};b.getMatrix=function(c,f){this.recalcMatrix(c);c=this.computedMatrix;if(f){for(var d=0;16>d;++d)f[d]=c[d];return f}return c};b.idle=function(c){this.center.idle(c);this.radius.idle(c);
this.rotation.idle(c)};b.flush=function(c){this.center.flush(c);this.radius.flush(c);this.rotation.flush(c)};b.pan=function(c,f,d,q){f=f||0;d=d||0;q=q||0;this.recalcMatrix(c);var r=this.computedMatrix,u=r[1],v=r[5],w=r[9],y=m(u,v,w);u/=y;v/=y;w/=y;y=r[0];var D=r[4],x=r[8],E=y*u+D*v+x*w;y-=u*E;D-=v*E;x-=w*E;E=m(y,D,x);y/=E;D/=E;x/=E;E=r[2];var B=r[6];r=r[10];var t=E*u+B*v+r*w,G=E*y+B*D+r*x;m(E-(t*u+G*y),B-(t*v+G*D),r-(t*w+G*x));this.center.move(c,y*f+u*d,D*f+v*d,x*f+w*d);f=Math.exp(this.computedRadius[0]);
f=Math.max(1E-4,f+q);this.radius.set(c,Math.log(f))};b.rotate=function(c,f,d,q){this.recalcMatrix(c);f=f||0;d=d||0;var r=this.computedMatrix,u=r[2],v=r[6],w=r[10],y=f*r[0]+d*r[1],D=f*r[4]+d*r[5];r=f*r[8]+d*r[9];d=-(v*r-w*D);r=-(w*y-u*r);y=-(u*D-v*y);D=Math.sqrt(Math.max(0,1-Math.pow(d,2)-Math.pow(r,2)-Math.pow(y,2)));var x=h(d,r,y,D);1E-6<x?(d/=x,r/=x,y/=x,D/=x):(d=r=y=0,D=1);x=this.computedRotation;var E=x[0],B=x[1],t=x[2],G=x[3];x=E*D+G*d+B*y-t*r;var I=B*D+G*r+t*d-E*y,L=t*D+G*y+E*r-B*d;E=G*D-E*
d-B*r-t*y;q&&(d=u,r=v,y=w,q=Math.sin(q)/m(d,r,y),d*=q,r*=q,y*=q,D=Math.cos(f),x=x*D+E*d+I*y-L*r,I=I*D+E*r+L*d-x*y,L=L*D+E*y+x*r-I*d,E=E*D-x*d-I*r-L*y);f=h(x,I,L,E);1E-6<f?(x/=f,I/=f,L/=f,E/=f):(x=I=L=0,E=1);this.rotation.set(c,x,I,L,E)};b.lookAt=function(c,f,d,q){this.recalcMatrix(c);d=d||this.computedCenter;f=f||this.computedEye;q=q||this.computedUp;var r=this.computedMatrix;g(r,f,d,q);q=this.computedRotation;n(q,r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10]);l(q,q);this.rotation.set(c,q[0],q[1],
q[2],q[3]);for(q=r=0;3>q;++q)r+=Math.pow(d[q]-f[q],2);this.radius.set(c,.5*Math.log(Math.max(r,1E-6)));this.center.set(c,d[0],d[1],d[2])};b.translate=function(c,f,d,q){this.center.move(c,f||0,d||0,q||0)};b.setMatrix=function(c,f){var d=this.computedRotation;n(d,f[0],f[1],f[2],f[4],f[5],f[6],f[8],f[9],f[10]);l(d,d);this.rotation.set(c,d[0],d[1],d[2],d[3]);d=this.computedMatrix;p(d,f);var q=d[15];if(1E-6<Math.abs(q)){f=d[12]/q;var r=d[13]/q;q=d[14]/q;this.recalcMatrix(c);var u=Math.exp(this.computedRadius[0]);
this.center.set(c,f-d[2]*u,r-d[6]*u,q-d[10]*u)}else this.center.idle(c);this.radius.idle(c)};b.setDistance=function(c,f){0<f&&this.radius.set(c,Math.log(f))};b.setDistanceLimits=function(c,f){c=0<c?Math.log(c):-Infinity;f=0<f?Math.log(f):Infinity;f=Math.max(f,c);this.radius.bounds[0][0]=c;this.radius.bounds[1][0]=f};b.getDistanceLimits=function(c){var f=this.radius.bounds;return c?(c[0]=Math.exp(f[0][0]),c[1]=Math.exp(f[1][0]),c):[Math.exp(f[0][0]),Math.exp(f[1][0])]};b.toJSON=function(){this.recalcMatrix(this.lastT());
return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};b.fromJSON=function(c){var f=this.lastT(),d=c.center;d&&this.center.set(f,d[0],d[1],d[2]);(d=c.rotation)&&this.rotation.set(f,d[0],d[1],d[2],d[3]);(d=c.distance)&&0<d&&this.radius.set(f,Math.log(d));this.setDistanceLimits(c.zoomMin,c.zoomMax)}},{"./lib/quatFromFrame":474,"filtered-vector":242,"gl-mat4/fromQuat":275,
"gl-mat4/invert":278,"gl-mat4/lookAt":279}],476:[function(b,F,C){var m=b("repeat-string");F.exports=function(h,l,e){return m("undefined"!==typeof e?e+"":" ",l)+h}},{"repeat-string":513}],477:[function(b,F,C){function m(e,a){function g(c,f,d){d=[];for(var q,r=0;q=n.exec(c);){if(1E4<r++)throw Error("Circular references in parenthesis");d.push(c.slice(0,q.index));d.push(g(f[q[1]],f));c=c.slice(q.index+q[0].length)}d.push(c);return d}if("string"!==typeof e)return[e];var k=[e];"string"===typeof a||Array.isArray(a)?
a={brackets:a}:a||(a={});e=a.brackets?Array.isArray(a.brackets)?a.brackets:[a.brackets]:["{}","[]","()"];var p=a.escape||"___";a=!!a.flat;e.forEach(function(c){function f(r,u,v){r=k.push(r.slice(c[0].length,-c[1].length))-1;q.push(r);return p+r+p}var d=new RegExp(["\\",c[0],"[^\\",c[0],"\\",c[1],"]*\\",c[1]].join("")),q=[];k.forEach(function(r,u){for(var v,w=0;r!=v;)if(v=r,r=r.replace(d,f),1E4<w++)throw Error("References have circular dependency. Please, check them.");k[u]=r});q=q.reverse();k=k.map(function(r){q.forEach(function(u){r=
r.replace(new RegExp("(\\"+p+u+"\\"+p+")","g"),c[0]+"$1"+c[1])});return r})});var n=new RegExp("\\"+p+"([0-9]+)\\"+p);return a?k:g(k[0],k)}function h(e,a){function g(c,f){if(null==e[f])throw Error("Reference "+f+"is undefined");return e[f]}if(a&&a.flat){var k=a&&a.escape||"___";a=e[0];if(!a)return"";k=new RegExp("\\"+k+"([0-9]+)\\"+k);for(var p=0;a!=n;){if(1E4<p++)throw Error("Circular references in "+e);var n=a;a=a.replace(k,g)}return a}return e.reduce(function q(f,d){Array.isArray(d)&&(d=d.reduce(q,
""));return f+d},"")}function l(e,a){return Array.isArray(e)?h(e,a):m(e,a)}l.parse=m;l.stringify=h;F.exports=l},{}],478:[function(b,F,C){var m=b("pick-by-alias");F.exports=function(h){1<arguments.length&&(h=arguments);"string"===typeof h?h=h.split(/\s/).map(parseFloat):"number"===typeof h&&(h=[h]);if(h.length&&"number"===typeof h[0])var l=1===h.length?{width:h[0],height:h[0],x:0,y:0}:2===h.length?{width:h[0],height:h[1],x:0,y:0}:{x:h[0],y:h[1],width:h[2]-h[0]||0,height:h[3]-h[1]||0};else h&&(h=m(h,
{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),l={x:h.left||0,y:h.top||0},l.width=null==h.width?h.right?h.right-l.x:0:h.width,l.height=null==h.height?h.bottom?h.bottom-l.y:0:h.height);return l}},{"pick-by-alias":485}],479:[function(b,F,C){F.exports=function(e){var a=[];e.replace(h,function(g,k,p){g=k.toLowerCase();p=(p=p.match(l))?p.map(Number):[];"m"==g&&2<p.length&&(a.push([k].concat(p.splice(0,2))),g="l",
k="m"==k?"l":"L");for(;;){if(p.length==m[g])return p.unshift(k),a.push(p);if(p.length<m[g])throw Error("malformed path data");a.push([k].concat(p.splice(0,m[g])))}});return a};var m={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},h=/([astvzqmhlc])([^astvzqmhlc]*)/ig,l=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],480:[function(b,F,C){F.exports=function(m,h){h||(h=[0,""]);m=String(m);var l=parseFloat(m,10);h[0]=l;h[1]=m.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return h}},{}],481:[function(b,F,C){(function(m){function h(a,
g){for(var k=0,p=a.length-1;0<=p;p--){var n=a[p];"."===n?a.splice(p,1):".."===n?(a.splice(p,1),k++):k&&(a.splice(p,1),k--)}if(g)for(;k--;k)a.unshift("..");return a}function l(a,g){if(a.filter)return a.filter(g);for(var k=[],p=0;p<a.length;p++)g(a[p],p,a)&&k.push(a[p]);return k}C.resolve=function(){for(var a="",g=!1,k=arguments.length-1;-1<=k&&!g;k--){var p=0<=k?arguments[k]:m.cwd();if("string"!==typeof p)throw new TypeError("Arguments to path.resolve must be strings");p&&(a=p+"/"+a,g="/"===p.charAt(0))}a=
h(l(a.split("/"),function(n){return!!n}),!g).join("/");return(g?"/":"")+a||"."};C.normalize=function(a){var g=C.isAbsolute(a),k="/"===e(a,-1);(a=h(l(a.split("/"),function(p){return!!p}),!g).join("/"))||g||(a=".");a&&k&&(a+="/");return(g?"/":"")+a};C.isAbsolute=function(a){return"/"===a.charAt(0)};C.join=function(){var a=Array.prototype.slice.call(arguments,0);return C.normalize(l(a,function(g,k){if("string"!==typeof g)throw new TypeError("Arguments to path.join must be strings");return g}).join("/"))};
C.relative=function(a,g){function k(f){for(var d=0;d<f.length&&""===f[d];d++);for(var q=f.length-1;0<=q&&""===f[q];q--);return d>q?[]:f.slice(d,q-d+1)}a=C.resolve(a).substr(1);g=C.resolve(g).substr(1);a=k(a.split("/"));g=k(g.split("/"));for(var p=Math.min(a.length,g.length),n=p,c=0;c<p;c++)if(a[c]!==g[c]){n=c;break}p=[];for(c=n;c<a.length;c++)p.push("..");p=p.concat(g.slice(n));return p.join("/")};C.sep="/";C.delimiter=":";C.dirname=function(a){"string"!==typeof a&&(a+="");if(0===a.length)return".";
for(var g=a.charCodeAt(0),k=47===g,p=-1,n=!0,c=a.length-1;1<=c;--c)if(g=a.charCodeAt(c),47===g){if(!n){p=c;break}}else n=!1;return-1===p?k?"/":".":k&&1===p?"/":a.slice(0,p)};C.basename=function(a,g){"string"!==typeof a&&(a+="");var k=0,p=-1,n=!0,c;for(c=a.length-1;0<=c;--c)if(47===a.charCodeAt(c)){if(!n){k=c+1;break}}else-1===p&&(n=!1,p=c+1);a=-1===p?"":a.slice(k,p);g&&a.substr(-1*g.length)===g&&(a=a.substr(0,a.length-g.length));return a};C.extname=function(a){"string"!==typeof a&&(a+="");for(var g=
-1,k=0,p=-1,n=!0,c=0,f=a.length-1;0<=f;--f){var d=a.charCodeAt(f);if(47===d){if(!n){k=f+1;break}}else-1===p&&(n=!1,p=f+1),46===d?-1===g?g=f:1!==c&&(c=1):-1!==g&&(c=-1)}return-1===g||-1===p||0===c||1===c&&g===p-1&&g===k+1?"":a.slice(g,p)};var e="b"==="ab".substr(-1)?function(a,g,k){return a.substr(g,k)}:function(a,g,k){0>g&&(g=a.length+g);return a.substr(g,k)}}).call(this,b("_process"))},{_process:500}],482:[function(b,F,C){(function(m){(function(){if("undefined"!==typeof performance&&null!==performance&&
performance.now)F.exports=function(){return performance.now()};else if("undefined"!==typeof m&&null!==m&&m.hrtime){F.exports=function(){return(l()-g)/1E6};var h=m.hrtime;var l=function(){var p=h();return 1E9*p[0]+p[1]};var e=l();var a=1E9*m.uptime();var g=e-a}else if(Date.now){F.exports=function(){return Date.now()-k};var k=Date.now()}else F.exports=function(){return(new Date).getTime()-k},k=(new Date).getTime()}).call(this)}).call(this,b("_process"))},{_process:500}],483:[function(b,F,C){F.exports=
function(l){var e=l.length;if(e<m)for(var a=1,g=0;g<e;++g)for(var k=0;k<g;++k)if(l[g]<l[k])a=-a;else{if(l[g]===l[k])return 0}else{var p=h.mallocUint8(e);for(g=0;g<e;++g)p[g]=0;a=1;for(g=0;g<e;++g)if(!p[g]){var n=1;p[g]=1;for(k=l[g];k!==g;k=l[k]){if(p[k])return h.freeUint8(p),0;n+=1;p[k]=1}n&1||(a=-a)}h.freeUint8(p)}return a};var m=32,h=b("typedarray-pool")},{"typedarray-pool":567}],484:[function(b,F,C){var m=b("typedarray-pool"),h=b("invert-permutation");C.rank=function(l){var e=l.length;switch(e){case 0:case 1:return 0;
case 2:return l[1]}var a=m.mallocUint32(e),g=m.mallocUint32(e),k=0,p;h(l,g);for(p=0;p<e;++p)a[p]=l[p];for(p=e-1;0<p;--p)e=g[p],l=a[p],a[p]=a[e],a[e]=l,g[p]=g[l],g[l]=e,k=(k+l)*p;m.freeUint32(g);m.freeUint32(a);return k};C.unrank=function(l,e,a){switch(l){case 0:return a?a:[];case 1:return a?(a[0]=0,a):[0];case 2:return a?(e?(a[0]=0,a[1]=1):(a[0]=1,a[1]=0),a):e?[0,1]:[1,0]}a=a||Array(l);var g,k=1;a[0]=0;for(g=1;g<l;++g)a[g]=g,k=k*g|0;for(g=l-1;0<g;--g){l=e/k|0;e=e-l*k|0;k=k/g|0;var p=a[g]|0;a[g]=a[l]|
0;a[l]=p|0}return a}},{"invert-permutation":436,"typedarray-pool":567}],485:[function(b,F,C){function m(l){if(h[l])return h[l];"string"===typeof l&&(l=h[l]=l.split(/\s*,\s*|\s+/));return l}F.exports=function(l,e,a){var g={},k,p;"string"===typeof e&&(e=m(e));if(Array.isArray(e)){var n={};for(p=0;p<e.length;p++)n[e[p]]=!0;e=n}for(k in e)e[k]=m(e[k]);n={};for(k in e){var c=e[k];if(Array.isArray(c))for(p=0;p<c.length;p++){var f=c[p];a&&(n[f]=!0);if(f in l){g[k]=l[f];if(a)for(;p<c.length;p++)n[c[p]]=!0;
break}}else k in l&&(e[k]&&(g[k]=l[k]),a&&(n[k]=!0))}if(a)for(k in l)n[k]||(g[k]=l[k]);return g};var h={}},{}],486:[function(b,F,C){F.exports=function(h,l){function e(q,r){r=n[r][q[r]];r.splice(r.indexOf(q),1)}function a(q,r,u){var v;for(v=0;2>v;++v)if(0<n[v][r].length){var w=n[v][r][0];var y=v;break}v=w[y^1];for(var D=0;2>D;++D)for(var x=n[D][r],E=0;E<x.length;++E){var B=x[E],t=B[D^1];0<m(l[q],l[r],l[v],l[t])&&(w=B,v=t,y=D)}if(u)return v;w&&e(w,y);return v}function g(q,r){var u=n[r][q][0],v=[q];
e(u,r);for(r=u[r^1];;){for(;r!==q;)v.push(r),r=a(v[v.length-2],r,!1);if(0===n[0][q].length+n[1][q].length)break;r=v[v.length-1];u=q;var w=v[1],y=a(r,u,!0);if(0>m(l[r],l[u],l[w],l[y]))break;v.push(q);r=a(r,u)}return v}for(var k=l.length|0,p=h.length,n=[Array(k),Array(k)],c=0;c<k;++c)n[0][c]=[],n[1][c]=[];for(c=0;c<p;++c){var f=h[c];n[0][f[0]].push(f);n[1][f[1]].push(f)}h=[];for(c=0;c<k;++c)0===n[0][c].length+n[1][c].length&&h.push([c]);for(c=0;c<k;++c)for(p=0;2>p;++p){for(f=[];0<n[p][c].length;){var d=
g(c,p);d[1]===d[d.length-1]?f.push.apply(f,d):(0<f.length&&h.push(f),f=d)}0<f.length&&h.push(f)}return h};var m=b("compare-angle")},{"compare-angle":132}],487:[function(b,F,C){F.exports=function(h,l){for(var e=m(h,l.length),a=Array(l.length),g=Array(l.length),k=[],p=0;p<l.length;++p){var n=e[p].length;g[p]=n;a[p]=!0;1>=n&&k.push(p)}for(;0<k.length;)for(n=k.pop(),a[n]=!1,n=e[n],p=0;p<n.length;++p){var c=n[p];0===--g[c]&&k.push(c)}e=Array(l.length);g=[];for(p=0;p<l.length;++p)a[p]?(n=g.length,e[p]=
n,g.push(l[p])):e[p]=-1;l=[];for(p=0;p<h.length;++p)k=h[p],a[k[0]]&&a[k[1]]&&l.push([e[k[0]],e[k[1]]]);return[l,g]};var m=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":178}],488:[function(b,F,C){function m(c,f){for(var d=Array(c),q=0;q<c;++q)d[q]=f;return d}function h(c){for(var f=Array(c),d=0;d<c;++d)f[d]=[];return f}F.exports=function(c,f){function d(N){for(var H=N.length,J=0;J<H;++J)if(!L[N[J]])return!1;return!0}var q=n(c,f);c=q[0];f=q[1];for(var r=f.length,u=l(c,f.length),v=0;v<r;++v)if(1===
u[v].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");c=e(c,f);c=c.filter(function(N){for(var H=N.length,J=[0],O=0;O<H;++O){var Q=f[N[O]],U=f[N[(O+1)%H]],P=g(-Q[0],Q[1]),V=g(-Q[0],U[1]);Q=g(U[0],Q[1]);U=g(U[0],U[1]);J=k(J,k(k(P,V),k(Q,U)))}return 0<J[J.length-1]});q=c.length;var w=Array(q),y=Array(q);for(v=0;v<q;++v){w[v]=v;var D=Array(q);u=c[v].map(function(N){return f[N]});var x=a([u]),E=0,B=0;a:for(;B<q;++B)if(D[B]=0,v!==B){u=c[B];for(var t=u.length,G=0;G<t;++G){var I=x(f[u[G]]);
if(0!==I){0>I&&(D[B]=1,E+=1);continue a}}D[B]=1;E+=1}y[v]=[E,v,D]}y.sort(function(N,H){return H[0]-N[0]});for(v=0;v<q;++v)for(D=y[v],u=D[1],t=D[2],B=0;B<q;++B)t[B]&&(w[B]=u);y=h(q);for(v=0;v<q;++v)y[v].push(w[v]),y[w[v]].push(v);D={};var L=m(r,!1);for(v=0;v<q;++v)for(u=c[v],t=u.length,B=0;B<t;++B)r=u[B],x=u[(B+1)%t],E=Math.min(r,x)+":"+Math.max(r,x),E in D?(E=D[E],y[E].push(v),y[v].push(E),L[r]=L[x]=!0):D[E]=v;B=[];r=m(q,-1);for(v=0;v<q;++v)w[v]!==v||d(c[v])?r[v]=-1:(B.push(v),r[v]=0);for(q=[];0<
B.length;){v=B.pop();w=y[v];p(w,function(N,H){return N-H});t=w.length;D=r[v];if(0===D){u=c[v];var M=[u]}for(v=0;v<t;++v)u=w[v],0<=r[u]||(r[u]=D^1,B.push(u),0===D&&(u=c[u],d(u)||(u.reverse(),M.push(u))));0===D&&q.push(M)}return q};var l=b("edges-to-adjacency-list"),e=b("planar-dual"),a=b("point-in-big-polygon"),g=b("two-product"),k=b("robust-sum"),p=b("uniq"),n=b("./lib/trim-leaves")},{"./lib/trim-leaves":487,"edges-to-adjacency-list":178,"planar-dual":486,"point-in-big-polygon":490,"robust-sum":525,
"two-product":554,uniq:569}],489:[function(b,F,C){arguments[4][243][0].apply(C,arguments)},{dup:243}],490:[function(b,F,C){function m(){return!0}function h(d){return function(q,r){return(q=d[q])?!!q.queryPoint(r,m):!1}}function l(d){for(var q={},r=0;r<d.length;++r){var u=d[r],v=u[0][0],w=u[0][1];u=u[1][1];w=[Math.min(w,u),Math.max(w,u)];v in q?q[v].push(w):q[v]=[w]}d={};v=Object.keys(q);for(r=0;r<v.length;++r)d[v[r]]=c(q[v[r]]);return h(d)}function e(d,q){return function(r){var u=f.le(q,r[0]);if(0>
u)return 1;var v=d[u];if(!v)if(0<u&&q[u]===r[0])v=d[u-1];else return 1;for(u=1;v;){var w=v.key,y=p(r,w[0],w[1]);if(w[0][0]<w[1][0])if(0>y)v=v.left;else if(0<y)u=-1,v=v.right;else return 0;else if(0<y)v=v.left;else if(0>y)u=1,v=v.right;else return 0}return u}}function a(d){return 1}function g(d){return function(q){return d(q[0],q[1])?0:1}}function k(d,q){return function(r){return d(r[0],r[1])?0:q(r)}}F.exports=function(d){for(var q=d.length,r=[],u=[],v=0;v<q;++v)for(var w=d[v],y=w.length,D=y-1,x=0;x<
y;D=x++){D=w[D];var E=w[x];D[0]===E[0]?u.push([D,E]):r.push([D,E])}if(0===r.length)return 0===u.length?a:g(l(u));d=n(r);d=e(d.slabs,d.coordinates);return 0===u.length?d:k(l(u),d)};var p=b("robust-orientation")[3],n=b("slab-decomposition"),c=b("interval-tree-1d"),f=b("binary-search-bounds")},{"binary-search-bounds":489,"interval-tree-1d":434,"robust-orientation":520,"slab-decomposition":537}],491:[function(b,F,C){function m(c,f,d){c=n.segments(c);f=n.segments(f);f=n.combine(c,f);d=d(f);return n.polygon(d)}
var h=b("./lib/build-log");C=b("./lib/epsilon");var l=b("./lib/intersecter"),e=b("./lib/segment-chainer"),a=b("./lib/segment-selector"),g=b("./lib/geojson"),k=!1,p=C();var n={buildLog:function(c){!0===c?k=h():!1===c&&(k=!1);return!1===k?!1:k.list},epsilon:function(c){return p.epsilon(c)},segments:function(c){var f=l(!0,p,k);c.regions.forEach(f.addRegion);return{segments:f.calculate(c.inverted),inverted:c.inverted}},combine:function(c,f){return{combined:l(!1,p,k).calculate(c.segments,c.inverted,f.segments,
f.inverted),inverted1:c.inverted,inverted2:f.inverted}},selectUnion:function(c){return{segments:a.union(c.combined,k),inverted:c.inverted1||c.inverted2}},selectIntersect:function(c){return{segments:a.intersect(c.combined,k),inverted:c.inverted1&&c.inverted2}},selectDifference:function(c){return{segments:a.difference(c.combined,k),inverted:c.inverted1&&!c.inverted2}},selectDifferenceRev:function(c){return{segments:a.differenceRev(c.combined,k),inverted:!c.inverted1&&c.inverted2}},selectXor:function(c){return{segments:a.xor(c.combined,
k),inverted:c.inverted1!==c.inverted2}},polygon:function(c){return{regions:e(c.segments,p,k),inverted:c.inverted}},polygonFromGeoJSON:function(c){return g.toPolygon(n,c)},polygonToGeoJSON:function(c){return g.fromPolygon(n,p,c)},union:function(c,f){return m(c,f,n.selectUnion)},intersect:function(c,f){return m(c,f,n.selectIntersect)},difference:function(c,f){return m(c,f,n.selectDifference)},differenceRev:function(c,f){return m(c,f,n.selectDifferenceRev)},xor:function(c,f){return m(c,f,n.selectXor)}};
"object"===typeof window&&(window.PolyBool=n);F.exports=n},{"./lib/build-log":492,"./lib/epsilon":493,"./lib/geojson":494,"./lib/intersecter":495,"./lib/segment-chainer":497,"./lib/segment-selector":498}],492:[function(b,F,C){F.exports=function(){function m(a,g){h.list.push({type:a,data:g?JSON.parse(JSON.stringify(g)):void 0});return h}var h,l=0,e=!1;return h={list:[],segmentId:function(){return l++},checkIntersection:function(a,g){return m("check",{seg1:a,seg2:g})},segmentChop:function(a,g){m("div_seg",
{seg:a,pt:g});return m("chop",{seg:a,pt:g})},statusRemove:function(a){return m("pop_seg",{seg:a})},segmentUpdate:function(a){return m("seg_update",{seg:a})},segmentNew:function(a,g){return m("new_seg",{seg:a,primary:g})},segmentRemove:function(a){return m("rem_seg",{seg:a})},tempStatus:function(a,g,k){return m("temp_status",{seg:a,above:g,below:k})},rewind:function(a){return m("rewind",{seg:a})},status:function(a,g,k){return m("status",{seg:a,above:g,below:k})},vert:function(a){if(a===e)return h;
e=a;return m("vert",{x:a})},log:function(a){"string"!==typeof a&&(a=JSON.stringify(a,!1,"  "));return m("log",{txt:a})},reset:function(){return m("reset")},selected:function(a){return m("selected",{segs:a})},chainStart:function(a){return m("chain_start",{seg:a})},chainRemoveHead:function(a,g){return m("chain_rem_head",{index:a,pt:g})},chainRemoveTail:function(a,g){return m("chain_rem_tail",{index:a,pt:g})},chainNew:function(a,g){return m("chain_new",{pt1:a,pt2:g})},chainMatch:function(a){return m("chain_match",
{index:a})},chainClose:function(a){return m("chain_close",{index:a})},chainAddHead:function(a,g){return m("chain_add_head",{index:a,pt:g})},chainAddTail:function(a,g){return m("chain_add_tail",{index:a,pt:g})},chainConnect:function(a,g){return m("chain_con",{index1:a,index2:g})},chainReverse:function(a){return m("chain_rev",{index:a})},chainJoin:function(a,g){return m("chain_join",{index1:a,index2:g})},done:function(){return m("done")}}}},{}],493:[function(b,F,C){F.exports=function(m){"number"!==
typeof m&&(m=1E-10);var h={epsilon:function(l){"number"===typeof l&&(m=l);return m},pointAboveOrOnLine:function(l,e,a){var g=e[0];e=e[1];return(a[0]-g)*(l[1]-e)-(a[1]-e)*(l[0]-g)>=-m},pointBetween:function(l,e,a){var g=a[0]-e[0];a=a[1]-e[1];l=(l[0]-e[0])*g+(l[1]-e[1])*a;return l<m||l-(g*g+a*a)>-m?!1:!0},pointsSameX:function(l,e){return Math.abs(l[0]-e[0])<m},pointsSameY:function(l,e){return Math.abs(l[1]-e[1])<m},pointsSame:function(l,e){return h.pointsSameX(l,e)&&h.pointsSameY(l,e)},pointsCompare:function(l,
e){return h.pointsSameX(l,e)?h.pointsSameY(l,e)?0:l[1]<e[1]?-1:1:l[0]<e[0]?-1:1},pointsCollinear:function(l,e,a){return Math.abs((l[0]-e[0])*(e[1]-a[1])-(e[0]-a[0])*(l[1]-e[1]))<m},linesIntersect:function(l,e,a,g){var k=e[0]-l[0];e=e[1]-l[1];var p=g[0]-a[0],n=g[1]-a[1];g=k*n-e*p;if(Math.abs(g)<m)return!1;var c=l[0]-a[0];a=l[1]-a[1];p=(p*a-n*c)/g;a=(k*a-e*c)/g;l={alongA:0,alongB:0,pt:[l[0]+p*k,l[1]+p*e]};l.alongA=p<=-m?-2:p<m?-1:p-1<=-m?0:p-1<m?1:2;l.alongB=a<=-m?-2:a<m?-1:a-1<=-m?0:a-1<m?1:2;return l},
pointInsideRegion:function(l,e){var a=l[0];l=l[1];for(var g=e[e.length-1][0],k=e[e.length-1][1],p=!1,n=0;n<e.length;n++){var c=e[n][0],f=e[n][1];f-l>m!=k-l>m&&(g-c)*(l-f)/(k-f)+c-a>m&&(p=!p);g=c;k=f}return p}};return h}},{}],494:[function(b,F,C){F.exports={toPolygon:function(m,h){function l(g){function k(c){c=c.slice(0,c.length-1);return m.segments({inverted:!1,regions:[c]})}if(0>=g.length)return m.segments({inverted:!1,regions:[]});for(var p=k(g[0]),n=1;n<g.length;n++)p=m.selectDifference(m.combine(p,
k(g[n])));return p}if("Polygon"===h.type)return m.polygon(l(h.coordinates));if("MultiPolygon"===h.type){for(var e=m.segments({inverted:!1,regions:[]}),a=0;a<h.coordinates.length;a++)e=m.selectUnion(m.combine(e,l(h.coordinates[a])));return m.polygon(e)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");},fromPolygon:function(m,h,l){function e(d,q){return h.pointInsideRegion([.5*(d[0][0]+d[1][0]),.5*(d[0][1]+d[1][1])],q)}function a(d,q){for(var r=0;r<d.children.length;r++){var u=
d.children[r];if(e(q,u.region)){a(u,q);return}}var v={region:q,children:[]};for(r=0;r<d.children.length;r++)u=d.children[r],e(u.region,q)&&(v.children.push(u),d.children.splice(r,1),r--);d.children.push(v)}function g(d,q){for(var r=0,u=d[d.length-1][0],v=d[d.length-1][1],w=[],y=0;y<d.length;y++){var D=d[y][0],x=d[y][1];w.push([D,x]);r+=x*u-D*v;u=D;v=x}0>r!==q&&w.reverse();w.push([w[0][0],w[0][1]]);return w}function k(d){var q=[g(d.region,!1)];f.push(q);for(var r=0;r<d.children.length;r++)q.push(p(d.children[r]))}
function p(d){for(var q=0;q<d.children.length;q++)k(d.children[q]);return g(d.region,!0)}l=m.polygon(m.segments(l));m={region:null,children:[]};for(var n=0;n<l.regions.length;n++){var c=l.regions[n];3>c.length||a(m,c)}var f=[];for(n=0;n<m.children.length;n++)k(m.children[n]);return 0>=f.length?{type:"Polygon",coordinates:[]}:1==f.length?{type:"Polygon",coordinates:f[0]}:{type:"MultiPolygon",coordinates:f}}}},{}],495:[function(b,F,C){var m=b("./linked-list");F.exports=function(h,l,e){function a(f,
d,q){return{id:e?e.segmentId():-1,start:f,end:d,myFill:{above:q.myFill.above,below:q.myFill.below},otherFill:null}}function g(f,d){c.insertBefore(f,function(q){var r=f.isStart;var u=q.isStart,v=q.pt;q=q.other.pt;var w=l.pointsCompare(f.pt,v);r=0!==w?w:l.pointsSame(d,q)?0:r!==u?r?1:-1:l.pointAboveOrOnLine(d,u?v:q,u?q:v)?1:-1;return 0>r})}function k(f,d){var q=m.node({isStart:!0,pt:f.start,seg:f,primary:d,other:null,status:null});g(q,f.end);f=m.node({isStart:!1,pt:f.end,seg:f,primary:d,other:q,status:null});
q.other=f;g(f,q.pt);return q}function p(f,d){var q=a(d,f.seg.end,f.seg);e&&e.segmentChop(f.seg,d);f.other.remove();f.seg.end=d;f.other.pt=d;g(f.other,f.pt);return k(q,f.primary)}function n(f,d){function q(t){return u.findTransition(function(G){var I=G.ev;G=t.seg.start;var L=t.seg.end,M=I.seg.start;I=I.seg.end;G=l.pointsCollinear(G,M,I)?l.pointsCollinear(L,M,I)?1:l.pointAboveOrOnLine(L,M,I)?1:-1:l.pointAboveOrOnLine(G,M,I)?1:-1;return 0<G})}function r(t,G){var I=t.seg,L=G.seg,M=I.start,N=I.end,H=L.start,
J=L.end;e&&e.checkIntersection(I,L);I=l.linesIntersect(M,N,H,J);if(!1===I){if(!l.pointsCollinear(M,N,H)||l.pointsSame(M,J)||l.pointsSame(N,H))return!1;I=l.pointsSame(M,H);L=l.pointsSame(N,J);if(I&&L)return G;var O=!I&&l.pointBetween(M,H,J);H=!L&&l.pointBetween(N,H,J);if(I)return H?p(G,N):p(t,J),G;O&&(L||(H?p(G,N):p(t,J)),p(G,M))}else 0===I.alongA&&(-1===I.alongB?p(t,H):0===I.alongB?p(t,I.pt):1===I.alongB&&p(t,J)),0===I.alongB&&(-1===I.alongA?p(G,M):0===I.alongA?p(G,I.pt):1===I.alongA&&p(G,N));return!1}
for(var u=m.create(),v=[];!c.isEmpty();){var w=c.getHead();e&&e.vert(w.pt[0]);if(w.isStart){e&&e.segmentNew(w.seg,w.primary);var y=q(w),D=y.before?y.before.ev:null,x=y.after?y.after.ev:null;e&&e.tempStatus(w.seg,D?D.seg:!1,x?x.seg:!1);var E=function(){if(D){var t=r(w,D);if(t)return t}return x?r(w,x):!1}();if(E){if(h){var B;if(B=null===w.seg.myFill.below?!0:w.seg.myFill.above!==w.seg.myFill.below)E.seg.myFill.above=!E.seg.myFill.above}else E.seg.otherFill=w.seg.myFill;e&&e.segmentUpdate(E.seg);w.other.remove();
w.remove()}if(c.getHead()!==w){e&&e.rewind(w.seg);continue}h?(B=null===w.seg.myFill.below?!0:w.seg.myFill.above!==w.seg.myFill.below,w.seg.myFill.below=x?x.seg.myFill.above:f,w.seg.myFill.above=B?!w.seg.myFill.below:w.seg.myFill.below):null===w.seg.otherFill&&(E=x?w.primary===x.primary?x.seg.otherFill.above:x.seg.myFill.above:w.primary?d:f,w.seg.otherFill={above:E,below:E});e&&e.status(w.seg,D?D.seg:!1,x?x.seg:!1);w.other.status=y.insert(m.node({ev:w}))}else{y=w.status;if(null===y)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");
u.exists(y.prev)&&u.exists(y.next)&&r(y.prev.ev,y.next.ev);e&&e.statusRemove(y.ev.seg);y.remove();w.primary||(y=w.seg.myFill,w.seg.myFill=w.seg.otherFill,w.seg.otherFill=y);v.push(w.seg)}c.getHead().remove()}e&&e.done();return v}var c=m.create();return h?{addRegion:function(f){for(var d,q=f[f.length-1],r=0;r<f.length;r++){d=q;q=f[r];var u=l.pointsCompare(d,q);if(0!==u){var v=0>u?d:q;d=0>u?q:d;v={id:e?e.segmentId():-1,start:v,end:d,myFill:{above:null,below:null},otherFill:null};k(v,!0)}}},calculate:function(f){return n(f,
!1)}}:{calculate:function(f,d,q,r){f.forEach(function(u){k(a(u.start,u.end,u),!0)});q.forEach(function(u){k(a(u.start,u.end,u),!1)});return n(d,r)}}}},{"./linked-list":496}],496:[function(b,F,C){F.exports={create:function(){var m={root:{root:!0,next:null},exists:function(h){return null===h||h===m.root?!1:!0},isEmpty:function(){return null===m.root.next},getHead:function(){return m.root.next},insertBefore:function(h,l){for(var e=m.root,a=m.root.next;null!==a;){if(l(a)){h.prev=a.prev;h.next=a;a.prev.next=
h;a.prev=h;return}e=a;a=a.next}e.next=h;h.prev=e;h.next=null},findTransition:function(h){for(var l=m.root,e=m.root.next;null!==e&&!h(e);)l=e,e=e.next;return{before:l===m.root?null:l,after:e,insert:function(a){a.prev=l;a.next=e;l.next=a;null!==e&&(e.prev=a);return a}}}};return m},node:function(m){m.prev=null;m.next=null;m.remove=function(){if(m.prev.next=m.next)m.next.prev=m.prev;m.prev=null;m.next=null};return m}}},{}],497:[function(b,F,C){F.exports=function(m,h,l){var e=[],a=[];m.forEach(function(g){function k(x,
E,B){r.index=x;r.matches_head=E;r.matches_pt1=B;if(r===d)return r=q,!1;r=null;return!0}function p(x){l&&l.chainReverse(x);e[x].reverse()}function n(x,E){var B=e[x],t=e[E],G=B[B.length-1],I=B[B.length-2],L=t[0],M=t[1];h.pointsCollinear(I,G,L)&&(l&&l.chainRemoveTail(x,G),B.pop(),G=I);h.pointsCollinear(G,L,M)&&(l&&l.chainRemoveHead(E,L),t.shift());l&&l.chainJoin(x,E);e[x]=B.concat(t);e.splice(E,1)}var c=g.start,f=g.end;if(h.pointsSame(c,f))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");
else{l&&l.chainStart(g);for(var d={index:0,matches_head:!1,matches_pt1:!1},q={index:0,matches_head:!1,matches_pt1:!1},r=d,u=0;u<e.length;u++){g=e[u];var v=g[0];g=g[g.length-1];if(h.pointsSame(v,c)){if(k(u,!0,!0))break}else if(h.pointsSame(v,f)){if(k(u,!0,!1))break}else if(h.pointsSame(g,c)){if(k(u,!1,!0))break}else if(h.pointsSame(g,f)&&k(u,!1,!1))break}if(r===d)e.push([c,f]),l&&l.chainNew(c,f);else if(r===q){l&&l.chainMatch(d.index);u=d.index;c=d.matches_pt1?f:c;f=d.matches_head;g=e[u];v=f?g[0]:
g[g.length-1];var w=f?g[1]:g[g.length-2],y=f?g[g.length-1]:g[0],D=f?g[g.length-2]:g[1];h.pointsCollinear(w,v,c)&&(f?(l&&l.chainRemoveHead(d.index,c),g.shift()):(l&&l.chainRemoveTail(d.index,c),g.pop()),v=w);h.pointsSame(y,c)?(e.splice(u,1),h.pointsCollinear(D,y,v)&&(f?(l&&l.chainRemoveTail(d.index,v),g.pop()):(l&&l.chainRemoveHead(d.index,v),g.shift())),l&&l.chainClose(d.index),a.push(g)):f?(l&&l.chainAddHead(d.index,c),g.unshift(c)):(l&&l.chainAddTail(d.index,c),g.push(c))}else g=d.index,u=q.index,
l&&l.chainConnect(g,u),c=e[g].length<e[u].length,d.matches_head?q.matches_head?c?(p(g),n(g,u)):(p(u),n(u,g)):n(u,g):q.matches_head?n(g,u):c?(p(g),n(u,g)):(p(u),n(g,u))}});return a}},{}],498:[function(b,F,C){function m(h,l,e){var a=[];h.forEach(function(g){var k=(g.myFill.above?8:0)+(g.myFill.below?4:0)+(g.otherFill&&g.otherFill.above?2:0)+(g.otherFill&&g.otherFill.below?1:0);0!==l[k]&&a.push({id:e?e.segmentId():-1,start:g.start,end:g.end,myFill:{above:1===l[k],below:2===l[k]},otherFill:null})});e&&
e.selected(a);return a}F.exports={union:function(h,l){return m(h,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],l)},intersect:function(h,l){return m(h,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],l)},difference:function(h,l){return m(h,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],l)},differenceRev:function(h,l){return m(h,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],l)},xor:function(h,l){return m(h,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],l)}}},{}],499:[function(b,F,C){var m=new Float64Array(4),h=new Float64Array(4),l=new Float64Array(4);F.exports=
function(e,a,g,k,p){m.length<k.length&&(m=new Float64Array(k.length),h=new Float64Array(k.length),l=new Float64Array(k.length));for(var n=0;n<k.length;++n)m[n]=e[n]-k[n],h[n]=a[n]-e[n],l[n]=g[n]-e[n];var c=0,f=0,d=0,q=0,r=0,u=0;for(n=0;n<k.length;++n){var v=h[n],w=l[n],y=m[n];c+=v*v;f+=v*w;d+=w*w;q+=y*v;r+=y*w;u+=y*y}n=Math.abs(c*d-f*f);v=f*r-d*q;w=f*q-c*r;v+w<=n?0>v?0>w?0>q?(w=0,-q>=c?(v=1,c=c+2*q+u):(v=-q/c,c=q*v+u)):(v=0,0<=r?(w=0,c=u):-r>=d?(w=1,c=d+2*r+u):(w=-r/d,c=r*w+u)):(v=0,0<=r?(w=0,c=u):
-r>=d?(w=1,c=d+2*r+u):(w=-r/d,c=r*w+u)):0>w?(w=0,0<=q?(v=0,c=u):-q>=c?(v=1,c=c+2*q+u):(v=-q/c,c=q*v+u)):(n=1/n,v*=n,w*=n,c=v*(c*v+f*w+2*q)+w*(f*v+d*w+2*r)+u):0>v?(v=f+q,n=d+r,n>v?(n-=v,v=c-2*f+d,n>=v?(v=1,w=0,c=c+2*q+u):(v=n/v,w=1-v,c=v*(c*v+f*w+2*q)+w*(f*v+d*w+2*r)+u)):(v=0,0>=n?(w=1,c=d+2*r+u):0<=r?(w=0,c=u):(w=-r/d,c=r*w+u))):0>w?(v=f+r,n=c+q,n>v?(n-=v,v=c-2*f+d,n>=v?(w=1,v=0,c=d+2*r+u):(w=n/v,v=1-w,c=v*(c*v+f*w+2*q)+w*(f*v+d*w+2*r)+u)):(w=0,0>=n?(v=1,c=c+2*q+u):0<=q?(v=0,c=u):(v=-q/c,c=q*v+u))):
(n=d+r-f-q,0>=n?(v=0,w=1,c=d+2*r+u):(v=c-2*f+d,n>=v?(v=1,w=0,c=c+2*q+u):(v=n/v,w=1-v,c=v*(c*v+f*w+2*q)+w*(f*v+d*w+2*r)+u)));f=1-v-w;for(n=0;n<k.length;++n)p[n]=f*e[n]+v*a[n]+w*g[n];return 0>c?0:c}},{}],500:[function(b,F,C){function m(){throw Error("setTimeout has not been defined");}function h(){throw Error("clearTimeout has not been defined");}function l(u){if(n===setTimeout)return setTimeout(u,0);if((n===m||!n)&&setTimeout)return n=setTimeout,setTimeout(u,0);try{return n(u,0)}catch(v){try{return n.call(null,
u,0)}catch(w){return n.call(this,u,0)}}}function e(u){if(c===clearTimeout)return clearTimeout(u);if((c===h||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(u);try{return c(u)}catch(v){try{return c.call(null,u)}catch(w){return c.call(this,u)}}}function a(){d&&q&&(d=!1,q.length?f=q.concat(f):r=-1,f.length&&g())}function g(){if(!d){var u=l(a);d=!0;for(var v=f.length;v;){q=f;for(f=[];++r<v;)q&&q[r].run();r=-1;v=f.length}q=null;d=!1;e(u)}}function k(u,v){this.fun=u;this.array=v}function p(){}b=F.exports=
{};try{var n="function"===typeof setTimeout?setTimeout:m}catch(u){n=m}try{var c="function"===typeof clearTimeout?clearTimeout:h}catch(u){c=h}var f=[],d=!1,q,r=-1;b.nextTick=function(u){var v=Array(arguments.length-1);if(1<arguments.length)for(var w=1;w<arguments.length;w++)v[w-1]=arguments[w];f.push(new k(u,v));1!==f.length||d||l(g)};k.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=p;b.addListener=p;b.once=
p;b.off=p;b.removeListener=p;b.removeAllListeners=p;b.emit=p;b.prependListener=p;b.prependOnceListener=p;b.listeners=function(u){return[]};b.binding=function(u){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(u){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},{}],501:[function(b,F,C){F.exports=b("gl-quat/slerp")},{"gl-quat/slerp":304}],502:[function(b,F,C){(function(m){var h=b("performance-now"),l="undefined"===typeof window?
m:window;m=["moz","webkit"];for(var e=l.requestAnimationFrame,a=l.cancelAnimationFrame||l.cancelRequestAnimationFrame,g=0;!e&&g<m.length;g++)e=l[m[g]+"RequestAnimationFrame"],a=l[m[g]+"CancelAnimationFrame"]||l[m[g]+"CancelRequestAnimationFrame"];if(!e||!a){var k=0,p=0,n=[],c=1E3/60;e=function(f){if(0===n.length){var d=h(),q=Math.max(0,c-(d-k));k=q+d;setTimeout(function(){for(var r=n.slice(0),u=n.length=0;u<r.length;u++)if(!r[u].cancelled)try{r[u].callback(k)}catch(v){setTimeout(function(){throw v;
},0)}},Math.round(q))}n.push({handle:++p,callback:f,cancelled:!1});return p};a=function(f){for(var d=0;d<n.length;d++)n[d].handle===f&&(n[d].cancelled=!0)}}F.exports=function(f){return e.call(l,f)};F.exports.cancel=function(){a.apply(l,arguments)};F.exports.polyfill=function(f){f||(f=l);f.requestAnimationFrame=e;f.cancelAnimationFrame=a}}).call(this,"undefined"!==typeof W?W:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":482}],503:[function(b,F,C){var m=b("big-rat/add");
F.exports=function(h,l){for(var e=h.length,a=Array(e),g=0;g<e;++g)a[g]=m(h[g],l[g]);return a}},{"big-rat/add":80}],504:[function(b,F,C){F.exports=function(h){for(var l=Array(h.length),e=0;e<h.length;++e)l[e]=m(h[e]);return l};var m=b("big-rat")},{"big-rat":83}],505:[function(b,F,C){var m=b("big-rat"),h=b("big-rat/mul");F.exports=function(l,e){e=m(e);for(var a=l.length,g=Array(a),k=0;k<a;++k)g[k]=h(l[k],e);return g}},{"big-rat":83,"big-rat/mul":92}],506:[function(b,F,C){var m=b("big-rat/sub");F.exports=
function(h,l){for(var e=h.length,a=Array(e),g=0;g<e;++g)a[g]=m(h[g],l[g]);return a}},{"big-rat/sub":94}],507:[function(b,F,C){var m=b("compare-cell"),h=b("compare-oriented-cell"),l=b("cell-orientation");F.exports=function(e){e.sort(h);for(var a=e.length,g=0,k=0;k<a;++k){var p=e[k],n=l(p);if(0!==n){if(0<g){var c=e[g-1];if(0===m(p,c)&&l(c)!==n){--g;continue}}e[g++]=p}}e.length=g;return e}},{"cell-orientation":117,"compare-cell":133,"compare-oriented-cell":134}],508:[function(b,F,C){var m=b("array-bounds"),
h=b("color-normalize"),l=b("update-diff"),e=b("pick-by-alias"),a=b("object-assign"),g=b("flatten-vertex-data");b=b("to-float32");var k=b.float32,p=b.fract32;F.exports=function(c,f){function d(L){L?u(L):null===L&&v();q()}function q(L){if("number"===typeof L)return r(L);L&&!Array.isArray(L)&&(L=[L]);c._refresh();D.forEach(function(M,N){M&&(L&&(M.draw=L[N]?!0:!1),M.draw?r(N):M.draw=!0)})}function r(L){"number"===typeof L&&(L=D[L]);null!=L&&L&&L.count&&L.color&&L.opacity&&L.positions&&1<L.positions.length&&
(L.scaleRatio=[L.scale[0]*L.viewport.width,L.scale[1]*L.viewport.height],I(L),L.after&&L.after(L))}function u(L){if(L){null!=L.length?"number"===typeof L[0]&&(L=[{positions:L}]):Array.isArray(L)||(L=[L]);var M=0,N=0;d.groups=D=L.map(function(Q,U){var P=D[U];if(Q)"function"===typeof Q?Q={after:Q}:"number"===typeof Q[0]&&(Q={positions:Q});else return P;Q=e(Q,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",
range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});P||(D[U]=P={id:U,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Q=a({},y,Q));l(P,Q,[{lineWidth:function(V){return.5*+V},capSize:function(V){return.5*+V},opacity:parseFloat,errors:function(V){V=g(V);N+=V.length;return V},positions:function(V,Y){V=g(V,"float64");Y.count=Math.floor(V.length/2);Y.bounds=m(V,2);Y.offset=M;M+=Y.count;return V}},{color:function(V,Y){Y=
Y.count;V||(V="transparent");if(!Array.isArray(V)||"number"===typeof V[0]){var ba=V;V=Array(Y);for(var ea=0;ea<Y;ea++)V[ea]=ba}if(V.length<Y)throw Error("Not enough colors");ba=new Uint8Array(4*Y);for(ea=0;ea<Y;ea++){var ca=h(V[ea],"uint8");ba.set(ca,4*ea)}return ba},range:function(V,Y,ba){ba=Y.bounds;V||(V=ba);Y.scale=[1/(V[2]-V[0]),1/(V[3]-V[1])];Y.translate=[-V[0],-V[1]];Y.scaleFract=p(Y.scale);Y.translateFract=p(Y.translate);return V},viewport:function(V){if(Array.isArray(V))var Y={x:V[0],y:V[1],
width:V[2]-V[0],height:V[3]-V[1]};else V?(Y={x:V.x||V.left||0,y:V.y||V.top||0},Y.width=V.right?V.right-Y.x:V.w||V.width||0,Y.height=V.bottom?V.bottom-Y.y:V.h||V.height||0):Y={x:0,y:0,width:w.drawingBufferWidth,height:w.drawingBufferHeight};return Y}}]);return P});if(M||N){L=D.reduce(function(Q,U,P){return Q+(U?U.count:0)},0);var H=new Float64Array(2*L),J=new Uint8Array(4*L),O=new Float32Array(4*L);D.forEach(function(Q,U){if(Q){U=Q.positions;var P=Q.offset,V=Q.errors;Q.count&&(J.set(Q.color,4*P),O.set(V,
4*P),H.set(U,2*P))}});E(k(H));B(p(H));x(J);t(O)}}}function v(){E.destroy();B.destroy();x.destroy();t.destroy();G.destroy()}"function"===typeof c?(f||(f={}),f.regl=c):f=c;f.length&&(f.positions=f);c=f.regl;if(!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var w=c._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},D=[];var x=c.buffer({usage:"dynamic",
type:"uint8",data:new Uint8Array(0)});var E=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var B=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var t=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var G=c.buffer({usage:"static",type:"float",data:n});u(f);var I=c({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor \x3d color / 255.;\n\n\t\t\tvec2 pixelOffset \x3d lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy \x3d -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position \x3d position + dxy;\n\n\t\t\tvec2 pos \x3d (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos +\x3d pixelOffset / viewport.zw;\n\n\t\t\tgl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor \x3d fragColor;\n\t\t\tgl_FragColor.a *\x3d opacity;\n\t\t}\n\t\t",uniforms:{range:c.prop("range"),lineWidth:c.prop("lineWidth"),capSize:c.prop("capSize"),opacity:c.prop("opacity"),scale:c.prop("scale"),translate:c.prop("translate"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),viewport:function(L,M){return[M.viewport.x,M.viewport.y,L.viewportWidth,
L.viewportHeight]}},attributes:{color:{buffer:x,offset:function(L,M){return 4*M.offset},divisor:1},position:{buffer:E,offset:function(L,M){return 8*M.offset},divisor:1},positionFract:{buffer:B,offset:function(L,M){return 8*M.offset},divisor:1},error:{buffer:t,offset:function(L,M){return 16*M.offset},divisor:1},direction:{buffer:G,stride:24,offset:0},lineOffset:{buffer:G,stride:24,offset:8},capOffset:{buffer:G,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport"),stencil:!1,instances:c.prop("count"),count:n.length});a(d,{update:u,draw:q,destroy:v,regl:c,gl:w,canvas:w.canvas,groups:D});return d};var n=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":70,"color-normalize":125,"flatten-vertex-data":244,"object-assign":473,"pick-by-alias":485,
"to-float32":549,"update-diff":571}],509:[function(b,F,C){function m(q,r){if(!(this instanceof m))return new m(q,r);"function"===typeof q?(r||(r={}),r.regl=q):r=q;r.length&&(r.positions=r);q=r.regl;if(!q.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=q._gl;this.regl=q;this.passes=[];this.shaders=m.shaders.has(q)?m.shaders.get(q):m.shaders.set(q,m.createShaders(q)).get(q);this.update(r)}var h=b("color-normalize"),l=b("array-bounds"),
e=b("object-assign"),a=b("glslify"),g=b("pick-by-alias"),k=b("flatten-vertex-data"),p=b("earcut"),n=b("array-normalize");C=b("to-float32");var c=C.float32,f=C.fract32;C=b("es6-weak-map");var d=b("parse-rect");F.exports=m;m.dashMult=2;m.maxPatternLength=256;m.precisionThreshold=3E6;m.maxPoints=1E4;m.maxLines=2048;m.shaders=new C;m.createShaders=function(q){var r=q.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),u={primitive:"triangle strip",instances:q.prop("count"),count:4,offset:0,uniforms:{miterMode:function(y,
D){return"round"===D.join?2:1},miterLimit:q.prop("miterLimit"),scale:q.prop("scale"),scaleFract:q.prop("scaleFract"),translateFract:q.prop("translateFract"),translate:q.prop("translate"),thickness:q.prop("thickness"),dashPattern:q.prop("dashTexture"),opacity:q.prop("opacity"),pixelRatio:q.context("pixelRatio"),id:q.prop("id"),dashSize:q.prop("dashLength"),viewport:function(y,D){return[D.viewport.x,D.viewport.y,y.viewportWidth,y.viewportHeight]},depth:q.prop("depth")},blend:{enable:!0,color:[0,0,0,
0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(y,D){return!D.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:q.prop("viewport")},viewport:q.prop("viewport")},v=q(e({vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineOffset \x3d lineTop * 2. - 1.;\n\n\tvec2 diff \x3d (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent \x3d normalize(diff * scale * viewport.zw);\n\tvec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n\tvec2 position \x3d project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha \x3d 1.;\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:r,divisor:0,
stride:8,offset:0},lineTop:{buffer:r,divisor:0,stride:8,offset:4},aCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:q.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},u));try{var w=q(e({cull:{enable:!0,face:"back"},vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD \x3d -.875;\nconst float MIN_DIFF \x3d 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord \x3d aCoord, bCoord \x3d bCoord, prevCoord \x3d prevCoord, nextCoord \x3d nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x \x3d (abs(scale.x) \x3c MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y \x3d (abs(scale.y) \x3c MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio \x3d adjustedScale * viewport.zw;\n\tvec2 normalWidth \x3d thickness / scaleRatio;\n\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineBot \x3d 1. - lineTop;\n\n\tfragColor \x3d (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord \x3d\x3d prevCoord) prevCoord \x3d aCoord + normalize(bCoord - aCoord);\n\tif (bCoord \x3d\x3d nextCoord) nextCoord \x3d bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff \x3d aCoord - prevCoord;\n\tvec2 currDiff \x3d bCoord - aCoord;\n\tvec2 nextDiff \x3d nextCoord - bCoord;\n\n\tvec2 prevTangent \x3d normalize(prevDiff * scaleRatio);\n\tvec2 currTangent \x3d normalize(currDiff * scaleRatio);\n\tvec2 nextTangent \x3d normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal \x3d vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal \x3d vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal \x3d vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection \x3d normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection \x3d normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff \x3d abs(prevTangent - currTangent);\n\tvec2 nextTanDiff \x3d abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) \x3c MIN_DIFF) {\n\t\tstartJoinDirection \x3d currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) \x3c MIN_DIFF) {\n\t\tendJoinDirection \x3d currNormal;\n\t}\n\tif (aCoord \x3d\x3d bCoord) {\n\t\tendJoinDirection \x3d startJoinDirection;\n\t\tcurrNormal \x3d prevNormal;\n\t\tcurrTangent \x3d prevTangent;\n\t}\n\n\ttangent \x3d currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift \x3d dot(currNormal, startJoinDirection);\n\tfloat endJoinShift \x3d dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio \x3d abs(1. / startJoinShift);\n\tfloat endMiterRatio \x3d abs(1. / endJoinShift);\n\n\tvec2 startJoin \x3d startJoinDirection * startMiterRatio;\n\tvec2 endJoin \x3d endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin \x3d sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin \x3d -startTopJoin;\n\n\tendTopJoin \x3d sign(endJoinShift) * endJoin * .5;\n\tendBotJoin \x3d -endTopJoin;\n\n\tvec2 aTopCoord \x3d aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord \x3d bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord \x3d aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord \x3d bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping \x3d distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping \x3d distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse \x3d dot(currTangent, prevTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\tbool nextReverse \x3d dot(currTangent, nextTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord \x3d aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord \x3d aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse \x26\x26 baClipping \x3e 0. \x26\x26 baClipping \x3c length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -\x3d normalWidth * endTopJoin;\n\t\tbTopCoord +\x3d normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord \x3d bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord \x3d bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse \x26\x26 abClipping \x3e 0. \x26\x26 abClipping \x3c length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -\x3d normalWidth * startBotJoin;\n\t\taBotCoord +\x3d normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition \x3d (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition \x3d (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition \x3d (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition \x3d (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position \x3d (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord \x3d aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord \x3d bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position \x3d vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter \x3d step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter \x3d step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha \x3d 1., distToStart, distToEnd;\n\tfloat cutoff \x3d thickness * .5;\n\n\t//bevel miter\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:r,divisor:0,stride:8,offset:0},lineTop:{buffer:r,divisor:0,stride:8,offset:4},aColor:{buffer:q.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:q.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:q.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},u))}catch(y){w=v}return{fill:q({primitive:"triangle",elements:function(y,D){return D.triangles},offset:0,vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES \x3d 256.;\n\nvoid main() {\n\tfloat depth \x3d (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position \x3d position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n\tfragColor.a *\x3d opacity;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor \x3d fragColor;\n}\n"]),uniforms:{scale:q.prop("scale"),color:q.prop("fill"),scaleFract:q.prop("scaleFract"),translateFract:q.prop("translateFract"),translate:q.prop("translate"),opacity:q.prop("opacity"),pixelRatio:q.context("pixelRatio"),id:q.prop("id"),viewport:function(y,D){return[D.viewport.x,D.viewport.y,y.viewportWidth,y.viewportHeight]}},attributes:{position:{buffer:q.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:8}},blend:u.blend,depth:{enable:!1},scissor:u.scissor,stencil:u.stencil,viewport:u.viewport}),rect:v,miter:w}};m.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};m.prototype.render=function(){for(var q=[],r=arguments.length;r--;)q[r]=arguments[r];q.length&&this.update.apply(this,q);this.draw()};m.prototype.draw=
function(){for(var q=this,r=[],u=arguments.length;u--;)r[u]=arguments[u];(r.length?r:this.passes).forEach(function(v,w){if(v&&Array.isArray(v))return q.draw.apply(q,v);"number"===typeof v&&(v=q.passes[v]);v&&1<v.count&&v.opacity&&(q.regl._refresh(),v.fill&&v.triangles&&2<v.triangles.length&&q.shaders.fill(v),v.thickness&&(v.scale[0]*v.viewport.width>m.precisionThreshold||v.scale[1]*v.viewport.height>m.precisionThreshold?q.shaders.rect(v):"rect"===v.join||!v.join&&(2>=v.thickness||v.count>=m.maxPoints)?
q.shaders.rect(v):q.shaders.miter(v)))});return this};m.prototype.update=function(q){var r=this;if(q){null!=q.length?"number"===typeof q[0]&&(q=[{positions:q}]):Array.isArray(q)||(q=[q]);var u=this.regl,v=this.gl;q.forEach(function(D,x){var E=r.passes[x];if(void 0!==D)if(null===D)r.passes[x]=null;else{"number"===typeof D[0]&&(D={positions:D});D=g(D,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"});E||(r.passes[x]=E={id:x,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:u.texture({channels:1,
data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},D=e({},m.defaults,D));null!=D.thickness&&(E.thickness=parseFloat(D.thickness));null!=D.opacity&&(E.opacity=parseFloat(D.opacity));null!=D.miterLimit&&(E.miterLimit=parseFloat(D.miterLimit));null!=D.overlay&&
(E.overlay=!!D.overlay,x<m.maxLines&&(E.depth=2*(m.maxLines-1-x%m.maxLines)/m.maxLines-1));null!=D.join&&(E.join=D.join);null!=D.hole&&(E.hole=D.hole);null!=D.fill&&(E.fill=D.fill?h(D.fill,"uint8"):null);null!=D.viewport&&(E.viewport=d(D.viewport));E.viewport||(E.viewport=d([v.drawingBufferWidth,v.drawingBufferHeight]));null!=D.close&&(E.close=D.close);null===D.positions&&(D.positions=[]);if(D.positions){if(D.positions.x&&D.positions.y){var B=D.positions.x,t=D.positions.y;var G=E.count=Math.max(B.length,
t.length);x=new Float64Array(2*G);for(var I=0;I<G;I++)x[2*I]=B[I],x[2*I+1]=t[I]}else x=k(D.positions,"float64"),G=E.count=Math.floor(x.length/2);B=E.bounds=l(x,2);if(E.fill){I=[];t={};for(var L=0,M=0,N=0,H=E.count;M<H;M++){var J=x[2*M],O=x[2*M+1];isNaN(J)||isNaN(O)||null==J||null==O?(J=x[2*L],O=x[2*L+1],t[M]=L):L=M;I[N++]=J;I[N++]=O}I=p(I,E.hole||[]);L=0;for(M=I.length;L<M;L++)null!=t[I[L]]&&(I[L]=t[I[L]]);E.triangles=I}t=new Float64Array(x);n(t,2,B);B=new Float64Array(2*G+6);E.close?x[0]===x[2*G-
2]&&x[1]===x[2*G-1]?(B[0]=t[2*G-4],B[1]=t[2*G-3]):(B[0]=t[2*G-2],B[1]=t[2*G-1]):(B[0]=t[0],B[1]=t[1]);B.set(t,2);E.close?x[0]===x[2*G-2]&&x[1]===x[2*G-1]?(B[2*G+2]=t[2],B[2*G+3]=t[3],--E.count):(B[2*G+2]=t[0],B[2*G+3]=t[1],B[2*G+4]=t[2],B[2*G+5]=t[3]):(B[2*G+2]=t[2*G-2],B[2*G+3]=t[2*G-1],B[2*G+4]=t[2*G-2],B[2*G+5]=t[2*G-1]);E.positionBuffer(c(B));E.positionFractBuffer(f(B))}D.range?E.range=D.range:E.range||(E.range=E.bounds);(D.range||D.positions)&&E.count&&(x=E.bounds,G=E.range[2]-E.range[0],B=E.range[3]-
E.range[1],E.scale=[(x[2]-x[0])/G,(x[3]-x[1])/B],E.translate=[-E.range[0]/G+x[0]/G||0,-E.range[1]/B+x[1]/B||0],E.scaleFract=f(E.scale),E.translateFract=f(E.translate));if(D.dashes){if(!D.dashes||2>D.dashes.length)x=1,G=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(G=x=0;G<D.dashes.length;++G)x+=D.dashes[G];G=new Uint8Array(x*m.dashMult);B=0;t=255;for(I=0;2>I;I++)for(L=0;L<D.dashes.length;++L){M=0;for(N=D.dashes[L]*m.dashMult*.5;M<N;++M)G[B++]=t;t^=255}}E.dashLength=x;E.dashTexture({channels:1,
data:G,width:G.length,height:1,mag:"linear",min:"linear"},0,0)}if(D.color){x=E.count;(G=D.color)||(G="transparent");D=new Uint8Array(4*x+4);if(Array.isArray(G)&&"number"!==typeof G[0]){for(B=0;B<x;B++)t=h(G[B],"uint8"),D.set(t,4*B);D.set(h(G[0],"uint8"),4*x)}else for(G=h(G,"uint8"),B=0;B<x+1;B++)D.set(G,4*B);E.colorBuffer({usage:"dynamic",type:"uint8",data:D})}}});if(q.length<this.passes.length){for(var w=q.length;w<this.passes.length;w++){var y=this.passes[w];y&&(y.colorBuffer.destroy(),y.positionBuffer.destroy(),
y.dashTexture.destroy())}this.passes.length=q.length}q=[];for(w=0;w<this.passes.length;w++)null!==this.passes[w]&&q.push(this.passes[w]);this.passes=q;return this}};m.prototype.destroy=function(){this.passes.forEach(function(q){q.colorBuffer.destroy();q.positionBuffer.destroy();q.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":70,"array-normalize":71,"color-normalize":125,earcut:177,"es6-weak-map":233,"flatten-vertex-data":244,glslify:413,"object-assign":473,"parse-rect":478,
"pick-by-alias":485,"to-float32":549}],510:[function(b,F,C){function m(y){var D=Array.isArray(y)?l(y):void 0;D||(D="undefined"!==typeof Symbol&&Symbol.iterator in Object(y)?Array.from(y):void 0);if(!(y=D||h(y)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return y}function h(y,D){if(y){if("string"===typeof y)return l(y,D);var x=Object.prototype.toString.call(y).slice(8,-1);"Object"===x&&
y.constructor&&(x=y.constructor.name);if("Map"===x||"Set"===x)return Array.from(y);if("Arguments"===x||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return l(y,D)}}function l(y,D){if(null==D||D>y.length)D=y.length;for(var x=0,E=Array(D);x<D;x++)E[x]=y[x];return E}function e(y,D){var x=this;if(!(this instanceof e))return new e(y,D);"function"===typeof y?(D||(D={}),D.regl=y):(D=y,y=null);D&&D.length&&(D.positions=D);y=D.regl;var E=y._gl,B=[];this.tooManyColors=r;var t=y.texture({data:new Uint8Array(1020),
width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});n(this,{regl:y,gl:E,groups:[],markerCache:[null],markerTextures:[null],palette:B,paletteIds:{},paletteTexture:t,maxColors:255,maxSize:100,canvas:E.canvas});this.update(D);E={uniforms:{constPointSize:!!D.constPointSize,pixelRatio:y.context("pixelRatio"),palette:t,paletteSize:function(G,I){return[x.tooManyColors?0:255,t.height]},scale:y.prop("scale"),scaleFract:y.prop("scaleFract"),translate:y.prop("translate"),
translateFract:y.prop("translateFract"),opacity:y.prop("opacity"),marker:y.prop("markerTexture")},attributes:{x:function(G,I){return I.xAttr||{buffer:I.positionBuffer,stride:8,offset:0}},y:function(G,I){return I.yAttr||{buffer:I.positionBuffer,stride:8,offset:4}},xFract:function(G,I){return I.xAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:0}},yFract:function(G,I){return I.yAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:4}},size:function(G,I){return I.size.length?
{buffer:I.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*I.size/x.maxSize)]}},borderSize:function(G,I){return I.borderSize.length?{buffer:I.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*I.borderSize/x.maxSize)]}},colorId:function(G,I){return I.color.length?{buffer:I.colorBuffer,stride:x.tooManyColors?8:4,offset:0}:{constant:x.tooManyColors?B.slice(4*I.color,4*I.color+4):[I.color]}},borderColorId:function(G,I){return I.borderColor.length?{buffer:I.colorBuffer,stride:x.tooManyColors?
8:4,offset:x.tooManyColors?4:2}:{constant:x.tooManyColors?B.slice(4*I.borderColor,4*I.borderColor+4):[I.borderColor]}},isActive:function(G,I){return!0===I.activation?{constant:[1]}:I.activation?I.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:y.prop("viewport")},viewport:y.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:y.prop("elements"),count:y.prop("count"),
offset:y.prop("offset"),primitive:"points"};D=n({},E);D.frag=c(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist \x3d texture2D(marker, gl_PointCoord).r, delta \x3d fragWidth;\n\n  // max-distance alpha\n  if (dist \x3c 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel \x3d\x3d fragColorLevel || fragBorderColor.a \x3d\x3d 0.) {\n    float colorAmt \x3d smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor \x3d vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt \x3d smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt \x3d smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color \x3d fragBorderColor;\n    color.a *\x3d borderColorAmt;\n    color \x3d mix(color, fragColor, colorAmt);\n    color.a *\x3d opacity;\n\n    gl_FragColor \x3d color;\n  }\n\n}\n"]);
D.vert=c(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\n\nconst float maxSize \x3d 100.;\nconst float borderLevel \x3d .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d 2. * size * pointSizeScale;\n  fragPointSize \x3d size * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n\n  fragBorderColorLevel \x3d clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel \x3d clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=y(D);E=n({},E);E.frag=c(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt \x3d clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha \x3d 1.0, delta \x3d fragWidth;\n\n\tradius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius \x3e 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -\x3d smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius \x3d fragBorderRadius;\n\tfloat ratio \x3d smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color \x3d mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *\x3d alpha * opacity;\n\tgl_FragColor \x3d color;\n}\n"]);
E.vert=c(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize \x3d 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d (size + borderSize) * pointSizeScale;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius \x3d 1. - 2. * borderSize / (size + borderSize);\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor.a \x3d\x3d 0. || borderSize \x3d\x3d 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n}\n"]);
r&&(E.frag=E.frag.replace("smoothstep","smoothStep"),D.frag=D.frag.replace("smoothstep","smoothStep"));this.drawCircle=y(E)}var a=b("color-normalize"),g=b("array-bounds"),k=b("color-id"),p=b("@plotly/point-cluster"),n=b("object-assign"),c=b("glslify"),f=b("pick-by-alias"),d=b("update-diff"),q=b("flatten-vertex-data"),r=b("is-iexplorer"),u=b("to-float32"),v=b("parse-rect");e.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};e.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};e.prototype.draw=function(){for(var y=this,D=arguments.length,x=Array(D),E=0;E<D;E++)x[E]=arguments[E];D=this.groups;1===x.length&&Array.isArray(x[0])&&(null===x[0][0]||Array.isArray(x[0][0]))&&(x=x[0]);this.regl._refresh();if(x.length)for(D=0;D<x.length;D++)this.drawItem(D,x[D]);else D.forEach(function(B,t){y.drawItem(t)});return this};e.prototype.drawItem=
function(y,D){var x=this.groups;y=x[y];"number"===typeof D&&(y=x[D],D=null);if(y&&y.count&&y.opacity){y.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,y,D));x=[];for(var E=1;E<y.activation.length;E++)y.activation[E]&&(!0===y.activation[E]||y.activation[E].data.length)&&x.push.apply(x,m(this.getMarkerDrawOptions(E,y,D)));x.length&&this.drawMarker(x)}};e.prototype.getMarkerDrawOptions=function(y,D,x){var E=D.range,B=D.tree,t=D.viewport,G=D.activation,I=D.selectionBuffer,L=D.count;if(!B)return x?
[n({},D,{markerTexture:this.markerTextures[y],activation:G[y],count:x.length,elements:x,offset:0})]:[n({},D,{markerTexture:this.markerTextures[y],activation:G[y],offset:0})];var M=[];E=B.range(E,{lod:!0,px:[(E[2]-E[0])/t.width,(E[3]-E[1])/t.height]});if(x){B=G[y].data;L=new Uint8Array(L);for(t=0;t<x.length;t++){var N=x[t];L[N]=B?B[N]:1}I.subdata(L)}for(L=E.length;L--;){B=E[L];t=B;t=Array.isArray(t)?t:void 0;if(!t)if(t=void 0,"undefined"!==typeof Symbol&&Symbol.iterator in Object(B)){N=[];var H=!0,
J=!1,O=void 0;try{for(var Q=B[Symbol.iterator]();!(H=(t=Q.next()).done)&&(N.push(t.value),2!==N.length);H=!0);}catch(U){J=!0,O=U}finally{try{if(!H&&null!=Q["return"])Q["return"]()}finally{if(J)throw O;}}t=N}else t=void 0;if(!(B=t||h(B,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");t=B[0];M.push(n({},D,{markerTexture:this.markerTextures[y],activation:x?I:G[y],offset:t,count:B[1]-t}))}return M};
e.prototype.update=function(){for(var y=this,D=arguments.length,x=Array(D),E=0;E<D;E++)x[E]=arguments[E];if(x.length){1===x.length&&Array.isArray(x[0])&&(x=x[0]);var B=this.groups,t=this.gl,G=this.regl,I=this.maxSize,L=this.maxColors,M=this.palette;this.groups=B=x.map(function(N,H){var J=B[H];if(void 0===N)return J;null===N?N={positions:null}:"function"===typeof N?N={ondraw:N}:"number"===typeof N[0]&&(N={positions:N});N=f(N,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",
borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});
null===N.positions&&(N.positions=[]);null!=N.tooManyColors&&(y.tooManyColors=N.tooManyColors);J||(B[H]=J={id:H,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:G.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:G.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:G.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:G.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:G.buffer({data:new Uint8Array(0),
usage:"dynamic",type:"float"})},N=n({},e.defaults,N));!N.positions||"marker"in N||(N.marker=J.marker,delete J.marker);!N.marker||"positions"in N||(N.positions=J.positions,delete J.positions);var O=0,Q=0;d(J,N,[{snap:!0,size:function(ea,ca){null==ea&&(ea=e.defaults.size);O+=ea&&ea.length?1:0;return ea},borderSize:function(ea,ca){null==ea&&(ea=e.defaults.borderSize);O+=ea&&ea.length?1:0;return ea},opacity:parseFloat,color:function(ea,ca){null==ea&&(ea=e.defaults.color);ea=y.updateColor(ea);Q++;return ea},
borderColor:function(ea,ca){null==ea&&(ea=e.defaults.borderColor);ea=y.updateColor(ea);Q++;return ea},bounds:function(ea,ca,ia){"range"in ia||(ia.range=null);return ea},positions:function(ea,ca,ia){var fa=ca.snap,ha=ca.positionBuffer,na=ca.positionFractBuffer,pa=ca.selectionBuffer;if(ea.x||ea.y)return ca.xAttr=ea.x.length?{buffer:G.buffer(ea.x),offset:0,stride:4,count:ea.x.length}:{buffer:ea.x.buffer,offset:4*ea.x.offset||0,stride:4*(ea.x.stride||1),count:ea.x.count},ca.yAttr=ea.y.length?{buffer:G.buffer(ea.y),
offset:0,stride:4,count:ea.y.length}:{buffer:ea.y.buffer,offset:4*ea.y.offset||0,stride:4*(ea.y.stride||1),count:ea.y.count},ca.count=Math.max(ca.xAttr.count,ca.yAttr.count),ea;ea=q(ea,"float64");var ra=ca.count=Math.floor(ea.length/2),ta=ca.bounds=ra?g(ea,2):null;ia.range||ca.range||(delete ca.range,ia.range=ta);ia.marker||ca.marker||(delete ca.marker,ia.marker=null);fa&&(!0===fa||ra>fa)?ca.tree=p(ea,{bounds:ta}):fa&&fa.length&&(ca.tree=fa);ca.tree&&(ia={primitive:"points",usage:"static",data:ca.tree,
type:"uint32"},ca.elements?ca.elements(ia):ca.elements=G.elements(ia));ha({data:u.float(ea),usage:"dynamic"});na({data:u.fract(ea),usage:"dynamic"});pa({data:new Uint8Array(ra),type:"uint8",usage:"stream"});return ea}},{marker:function(ea,ca,ia){ia=ca.activation;ia.forEach(function(ra){return ra&&ra.destroy&&ra.destroy()});ia.length=0;if(ea&&"number"!==typeof ea[0]){for(var fa=[],ha=0,na=Math.min(ea.length,ca.count);ha<na;ha++){var pa=y.addMarker(ea[ha]);fa[pa]||(fa[pa]=new Uint8Array(ca.count));
fa[pa][ha]=1}for(ca=0;ca<fa.length;ca++)if(fa[ca]){ha={data:fa[ca],type:"uint8",usage:"static"};if(ia[ca])ia[ca](ha);else ia[ca]=G.buffer(ha);ia[ca].data=fa[ca]}}else fa=y.addMarker(ea),ia[fa]=!0;return ea},range:function(ea,ca,ia){if(ia=ca.bounds)return ea||(ea=ia),ca.scale=[1/(ea[2]-ea[0]),1/(ea[3]-ea[1])],ca.translate=[-ea[0],-ea[1]],ca.scaleFract=u.fract(ca.scale),ca.translateFract=u.fract(ca.translate),ea},viewport:function(ea){return v(ea||[t.drawingBufferWidth,t.drawingBufferHeight])}}]);if(O){var U=
J;N=U.count;H=U.size;var P=U.borderSize;U=U.sizeBuffer;var V=new Uint8Array(2*N);if(H.length||P.length)for(var Y=0;Y<N;Y++)V[2*Y]=Math.round(255*(null==H[Y]?H:H[Y])/I),V[2*Y+1]=Math.round(255*(null==P[Y]?P:P[Y])/I);U({data:V,usage:"dynamic"})}if(Q){U=J;N=U.count;H=U.color;P=U.borderColor;U=U.colorBuffer;if(y.tooManyColors){if(H.length||P.length){var ba=new Uint8Array(8*N);for(V=0;V<N;V++)Y=H[V],ba[8*V]=M[4*Y],ba[8*V+1]=M[4*Y+1],ba[8*V+2]=M[4*Y+2],ba[8*V+3]=M[4*Y+3],Y=P[V],ba[8*V+4]=M[4*Y],ba[8*V+
5]=M[4*Y+1],ba[8*V+6]=M[4*Y+2],ba[8*V+7]=M[4*Y+3]}}else if(H.length||P.length)for(ba=new Uint8Array(4*N+2),V=0;V<N;V++)null!=H[V]&&(ba[4*V]=H[V]%L,ba[4*V+1]=Math.floor(H[V]/L)),null!=P[V]&&(ba[4*V+2]=P[V]%L,ba[4*V+3]=Math.floor(P[V]/L));U({data:ba||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return J})}};e.prototype.addMarker=function(y){var D=this.markerTextures,x=this.regl,E=this.markerCache,B=null==y?0:E.indexOf(y);if(0<=B)return B;if(y instanceof Uint8Array||y instanceof Uint8ClampedArray)var t=
y;else{t=new Uint8Array(y.length);B=0;for(var G=y.length;B<G;B++)t[B]=255*y[B]}G=Math.floor(Math.sqrt(t.length));B=D.length;E.push(y);D.push(x.texture({channels:1,data:t,radius:G,mag:"linear",min:"linear"}));return B};e.prototype.updateColor=function(y){var D=this.paletteIds,x=this.palette,E=this.maxColors;Array.isArray(y)||(y=[y]);var B=[];if("number"===typeof y[0]){var t=[];if(Array.isArray(y))for(var G=0;G<y.length;G+=4)t.push(y.slice(G,G+4));else for(G=0;G<y.length;G+=4)t.push(y.subarray(G,G+
4));y=t}for(t=0;t<y.length;t++){G=y[t];G=a(G,"uint8");var I=k(G,!1);if(null==D[I]){var L=x.length;D[I]=Math.floor(L/4);x[L]=G[0];x[L+1]=G[1];x[L+2]=G[2];x[L+3]=G[3]}B[t]=D[I]}!this.tooManyColors&&x.length>4*E&&(this.tooManyColors=!0);this.updatePalette(x);return 1===B.length?B[0]:B};e.prototype.updatePalette=function(y){if(!this.tooManyColors){var D=this.maxColors,x=this.paletteTexture,E=Math.ceil(.25*y.length/D);if(1<E){y=y.slice();for(var B=.25*y.length%D;B<E*D;B++)y.push(0,0,0,0)}x.height<E&&x.resize(D,
E);x.subimage({width:Math.min(.25*y.length,D),height:E,data:y},0,0)}};e.prototype.destroy=function(){this.groups.forEach(function(y){y.sizeBuffer.destroy();y.positionBuffer.destroy();y.positionFractBuffer.destroy();y.colorBuffer.destroy();y.activation.forEach(function(D){return D&&D.destroy&&D.destroy()});y.selectionBuffer.destroy();y.elements&&y.elements.destroy()});this.groups.length=0;this.paletteTexture.destroy();this.markerTextures.forEach(function(y){return y&&y.destroy&&y.destroy()});return this};
var w=b("object-assign");F.exports=function(y,D){y=new e(y,D);D=y.render.bind(y);w(D,{render:D,update:y.update.bind(y),draw:y.draw.bind(y),destroy:y.destroy.bind(y),regl:y.regl,gl:y.gl,canvas:y.gl.canvas,groups:y.groups,markers:y.markerCache,palette:y.palette});return D}},{"@plotly/point-cluster":57,"array-bounds":70,"color-id":123,"color-normalize":125,"flatten-vertex-data":244,glslify:413,"is-iexplorer":440,"object-assign":473,"parse-rect":478,"pick-by-alias":485,"to-float32":549,"update-diff":571}],
511:[function(b,F,C){function m(f,d){if(!(this instanceof m))return new m(f,d);this.traces=[];this.passes={};this.regl=f;this.scatter=e(f);this.canvas=this.scatter.canvas}function h(f,d,q){d=f[d];var r=f[q];2<d.length?(f=d[1],d=d[3]):d.length?(f=d[0],d=d[1]):(f=d.y,d=d.y+d.height);2<r.length?(q=r[0],r=r[2]):r.length?(q=r[0],r=r[1]):(q=r.x,r=r.x+r.width);return[q,f,r,d]}function l(f){if("number"===typeof f)return[f,f,f,f];if(2===f.length)return[f[0],f[1],f[0],f[1]];f=n(f);return[f.x,f.y,f.x+f.width,
f.y+f.height]}var e=b("regl-scatter2d"),a=b("pick-by-alias"),g=b("array-bounds"),k=b("raf"),p=b("array-range"),n=b("parse-rect"),c=b("flatten-vertex-data");F.exports=m;m.prototype.render=function(){for(var f=this,d=[],q=arguments.length;q--;)d[q]=arguments[q];d.length&&this.update.apply(this,d);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();this.dirty?null==this.planned&&(this.planned=k(function(){f.draw();f.dirty=!0;f.planned=null})):(this.draw(),this.dirty=!0,k(function(){f.dirty=
!1}));return this};m.prototype.update=function(){for(var f,d=[],q=arguments.length;q--;)d[q]=arguments[q];if(d.length){for(q=0;q<d.length;q++)this.updateItem(q,d[q]);this.traces=this.traces.filter(Boolean);d=[];for(var r=q=0;r<this.traces.length;r++){for(var u=this.traces[r],v=this.traces[r].passes,w=0;w<v.length;w++)d.push(this.passes[v[w]]);u.passOffset=q;q+=u.passes.length}(f=this.scatter).update.apply(f,d);return this}};m.prototype.updateItem=function(f,d){var q=this.regl;if(null===d)return this.traces[f]=
null,this;if(!d)return this;d=a(d,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",
viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});f=this.traces[f]||(this.traces[f]={id:f,buffer:q.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",
borderSize:1,viewport:n([q._gl.drawingBufferWidth,q._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=d.color&&(f.color=d.color);null!=d.size&&(f.size=d.size);null!=d.marker&&(f.marker=d.marker);null!=d.borderColor&&(f.borderColor=d.borderColor);null!=d.borderSize&&(f.borderSize=d.borderSize);null!=d.opacity&&(f.opacity=d.opacity);d.viewport&&(f.viewport=n(d.viewport));null!=d.diagonal&&(f.diagonal=d.diagonal);null!=d.upper&&(f.upper=d.upper);null!=d.lower&&
(f.lower=d.lower);if(d.data)for(f.buffer(c(d.data)),f.columns=d.data.length,f.count=d.data[0].length,f.bounds=[],q=0;q<f.columns;q++)f.bounds[q]=g(d.data[q],1);if(d.range){f.range=d.range;var r=f.range&&"number"!==typeof f.range[0]}d.domain&&(f.domain=d.domain);q=!1;null!=d.padding&&(Array.isArray(d.padding)&&d.padding.length===f.columns&&"number"===typeof d.padding[d.padding.length-1]?(f.padding=d.padding.map(l),q=!0):f.padding=l(d.padding));var u=f.columns,v=f.count,w=f.viewport.width,y=f.viewport.height,
D=f.viewport.x,x=f.viewport.y,E=w/u,B=y/u;f.passes=[];for(var t=0;t<u;t++)for(var G=0;G<u;G++)if(f.diagonal||G!==t)if(f.upper||!(t>G))if(f.lower||!(t<G)){var I=f.id;I=(null!=I.id?I.id:I)<<16|(t&255)<<8|G&255;var L=this.passes[I]||(this.passes[I]={});d.data&&(L.positions=d.transpose?{x:{buffer:f.buffer,offset:G,count:v,stride:u},y:{buffer:f.buffer,offset:t,count:v,stride:u}}:{x:{buffer:f.buffer,offset:G*v,count:v},y:{buffer:f.buffer,offset:t*v,count:v}},L.bounds=h(f.bounds,t,G));if(d.domain||d.viewport||
d.data){var M=q?h(f.padding,t,G):f.padding;if(f.domain){var N=h(f.domain,t,G);L.viewport=[D+N[0]*w+M[0],x+N[1]*y+M[1],D+N[2]*w-M[2],x+N[3]*y-M[3]]}else L.viewport=[D+G*E+E*M[0],x+t*B+B*M[1],D+(G+1)*E-E*M[2],x+(t+1)*B-B*M[3]]}d.color&&(L.color=f.color);d.size&&(L.size=f.size);d.marker&&(L.marker=f.marker);d.borderSize&&(L.borderSize=f.borderSize);d.borderColor&&(L.borderColor=f.borderColor);d.opacity&&(L.opacity=f.opacity);d.range&&(L.range=r?h(f.range,t,G):f.range||L.bounds);f.passes.push(I)}return this};
m.prototype.draw=function(){for(var f,d=[],q=arguments.length;q--;)d[q]=arguments[q];if(d.length){var r=[];for(q=0;q<d.length;q++)if("number"===typeof d[q]){var u=this.traces[d[q]],v=u.passOffset;r.push.apply(r,p(v,v+u.passes.length))}else if(d[q].length){var w=d[q];u=this.traces[q];v=u.passes;var y=u.passOffset;v=v.map(function(D,x){r[y+x]=w})}(f=this.scatter).draw.apply(f,r)}else this.scatter.draw();return this};m.prototype.destroy=function(){this.traces.forEach(function(f){f.buffer&&f.buffer.destroy&&
f.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":70,"array-range":72,"flatten-vertex-data":244,"parse-rect":478,"pick-by-alias":485,raf:502,"regl-scatter2d":510}],512:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?F.exports=h():m.createREGL=h()})(this,function(){function m(tb,Xb){this.id=ka++;this.type=tb;this.data=Xb}function h(tb){if(0===tb.length)return[];var Xb=tb.charAt(0),uc=tb.charAt(tb.length-1);if(1<tb.length&&
Xb===uc&&('"'===Xb||"'"===Xb))return['"'+tb.substr(1,tb.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Xb=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(tb))return h(tb.substr(0,Xb.index)).concat(h(Xb[1])).concat(h(tb.substr(Xb.index+Xb[0].length)));Xb=tb.split(".");if(1===Xb.length)return['"'+tb.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];tb=[];for(uc=0;uc<Xb.length;++uc)tb=tb.concat(h(Xb[uc]));return tb}function l(tb){return"["+h(tb).join("][")+"]"}function e(){var tb={"":0},Xb=
[""];return{id:function(uc){var Mc=tb[uc];if(Mc)return Mc;Mc=tb[uc]=Xb.length;Xb.push(uc);return Mc},str:function(uc){return Xb[uc]}}}function a(tb,Xb,uc){function Mc(){var sb=window.innerWidth,xb=window.innerHeight;tb!==document.body&&(xb=tb.getBoundingClientRect(),sb=xb.right-xb.left,xb=xb.bottom-xb.top);Rc.width=uc*sb;Rc.height=uc*xb;ua(Rc.style,{width:sb+"px",height:xb+"px"})}var Rc=document.createElement("canvas");ua(Rc.style,{border:0,margin:0,padding:0,top:0,left:0});tb.appendChild(Rc);tb===
document.body&&(Rc.style.position="absolute",ua(tb.style,{margin:0,padding:0}));var fd;tb!==document.body&&"function"===typeof ResizeObserver?(fd=new ResizeObserver(function(){setTimeout(Mc)}),fd.observe(tb)):window.addEventListener("resize",Mc,!1);Mc();return{canvas:Rc,onDestroy:function(){fd?fd.disconnect():window.removeEventListener("resize",Mc);tb.removeChild(Rc)}}}function g(tb,Xb){function uc(Mc){try{return tb.getContext(Mc,Xb)}catch(Rc){return null}}return uc("webgl")||uc("experimental-webgl")||
uc("webgl-experimental")}function k(tb){return"string"===typeof tb?tb.split():tb}function p(tb){return"string"===typeof tb?document.querySelector(tb):tb}function n(tb){var Xb=tb||{},uc,Mc,Rc,fd;tb={};var sb=[],xb=[],kc="undefined"===typeof window?1:window.devicePixelRatio,nc=!1,Kc=function(Tb){},ac=function(){};"string"===typeof Xb?uc=document.querySelector(Xb):"object"===typeof Xb&&("string"===typeof Xb.nodeName&&"function"===typeof Xb.appendChild&&"function"===typeof Xb.getBoundingClientRect?uc=
Xb:"function"===typeof Xb.drawArrays||"function"===typeof Xb.drawElements?(fd=Xb,Rc=fd.canvas):("gl"in Xb?fd=Xb.gl:"canvas"in Xb?Rc=p(Xb.canvas):"container"in Xb&&(Mc=p(Xb.container)),"attributes"in Xb&&(tb=Xb.attributes),"extensions"in Xb&&(sb=k(Xb.extensions)),"optionalExtensions"in Xb&&(xb=k(Xb.optionalExtensions)),"onDone"in Xb&&(Kc=Xb.onDone),"profile"in Xb&&(nc=!!Xb.profile),"pixelRatio"in Xb&&(kc=+Xb.pixelRatio)));uc&&("canvas"===uc.nodeName.toLowerCase()?Rc=uc:Mc=uc);if(!fd){if(!Rc){uc=a(Mc||
document.body,Kc,kc);if(!uc)return null;Rc=uc.canvas;ac=uc.onDestroy}void 0===tb.premultipliedAlpha&&(tb.premultipliedAlpha=!0);fd=g(Rc,tb)}return fd?{gl:fd,canvas:Rc,container:Mc,extensions:sb,optionalExtensions:xb,pixelRatio:kc,profile:nc,onDone:Kc,onDestroy:ac}:(ac(),Kc("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function c(tb,Xb){function uc(sb){sb=sb.toLowerCase();try{var xb=Mc[sb]=tb.getExtension(sb)}catch(kc){}return!!xb}for(var Mc={},Rc=
0;Rc<Xb.extensions.length;++Rc){var fd=Xb.extensions[Rc];if(!uc(fd))return Xb.onDestroy(),Xb.onDone('"'+fd+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}Xb.optionalExtensions.forEach(uc);return{extensions:Mc,restore:function(){Object.keys(Mc).forEach(function(sb){if(Mc[sb]&&!uc(sb))throw Error("(regl): error restoring extension "+sb);})}}}function f(tb,Xb){for(var uc=Array(tb),Mc=0;Mc<tb;++Mc)uc[Mc]=Xb(Mc);return uc}function d(tb){var Xb=
(65535<tb)<<4;tb>>>=Xb;var uc=(255<tb)<<3;tb>>>=uc;Xb|=uc;uc=(15<tb)<<2;tb>>>=uc;Xb|=uc;uc=(3<tb)<<1;return Xb|uc|tb>>>uc>>1}function q(){function tb(Mc){a:{for(var Rc=16;268435456>=Rc;Rc*=16)if(Mc<=Rc){Mc=Rc;break a}Mc=0}Rc=uc[d(Mc)>>2];return 0<Rc.length?Rc.pop():new ArrayBuffer(Mc)}function Xb(Mc){uc[d(Mc.byteLength)>>2].push(Mc)}var uc=f(8,function(){return[]});return{alloc:tb,free:Xb,allocType:function(Mc,Rc){switch(Mc){case 5120:Mc=new Int8Array(tb(Rc),0,Rc);break;case 5121:Mc=new Uint8Array(tb(Rc),
0,Rc);break;case 5122:Mc=new Int16Array(tb(2*Rc),0,Rc);break;case 5123:Mc=new Uint16Array(tb(2*Rc),0,Rc);break;case 5124:Mc=new Int32Array(tb(4*Rc),0,Rc);break;case 5125:Mc=new Uint32Array(tb(4*Rc),0,Rc);break;case 5126:Mc=new Float32Array(tb(4*Rc),0,Rc);break;default:return null}return Mc.length!==Rc?Mc.subarray(0,Rc):Mc},freeType:function(Mc){Xb(Mc.buffer)}}}function r(tb){return!!tb&&"object"===typeof tb&&Array.isArray(tb.shape)&&Array.isArray(tb.stride)&&"number"===typeof tb.offset&&tb.shape.length===
tb.stride.length&&(Array.isArray(tb.data)||Ja(tb.data))}function u(tb,Xb,uc,Mc,Rc,fd){for(var sb=0;sb<Xb;++sb)for(var xb=tb[sb],kc=0;kc<uc;++kc)for(var nc=xb[kc],Kc=0;Kc<Mc;++Kc)Rc[fd++]=nc[Kc]}function v(tb,Xb,uc,Mc,Rc){for(var fd=1,sb=uc+1;sb<Xb.length;++sb)fd*=Xb[sb];var xb=Xb[uc];if(4===Xb.length-uc){var kc=Xb[uc+1],nc=Xb[uc+2];Xb=Xb[uc+3];for(sb=0;sb<xb;++sb)u(tb[sb],kc,nc,Xb,Mc,Rc),Rc+=fd}else for(sb=0;sb<xb;++sb)v(tb[sb],Xb,uc+1,Mc,Rc),Rc+=fd}function w(tb){return Wa[Object.prototype.toString.call(tb)]|
0}function y(tb,Xb){for(var uc=0;uc<Xb.length;++uc)tb[uc]=Xb[uc]}function D(tb,Xb,uc,Mc,Rc,fd,sb){for(var xb=0,kc=0;kc<uc;++kc)for(var nc=0;nc<Mc;++nc)tb[xb++]=Xb[Rc*kc+fd*nc+sb]}function x(tb,Xb,uc,Mc){function Rc(ac){this.id=kc++;this.buffer=tb.createBuffer();this.type=ac;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;uc.profile&&(this.stats={size:0})}function fd(ac,Tb,yb){ac.byteLength=Tb.byteLength;tb.bufferData(ac.type,Tb,yb)}function sb(ac,Tb,yb,
Gb,Eb,Vb){ac.usage=yb;if(Array.isArray(Tb)){if(ac.dtype=Gb||5126,0<Tb.length)if(Array.isArray(Tb[0])){Eb=lb(Tb);for(var Zb=Gb=1;Zb<Eb.length;++Zb)Gb*=Eb[Zb];ac.dimension=Gb;Tb=Qa(Tb,Eb,ac.dtype);fd(ac,Tb,yb);Vb?ac.persistentData=Tb:xa.freeType(Tb)}else"number"===typeof Tb[0]?(ac.dimension=Eb,Eb=xa.allocType(ac.dtype,Tb.length),y(Eb,Tb),fd(ac,Eb,yb),Vb?ac.persistentData=Eb:xa.freeType(Eb)):Ja(Tb[0])&&(ac.dimension=Tb[0].length,ac.dtype=Gb||w(Tb[0])||5126,Tb=Qa(Tb,[Tb.length,Tb[0].length],ac.dtype),
fd(ac,Tb,yb),Vb?ac.persistentData=Tb:xa.freeType(Tb))}else if(Ja(Tb))ac.dtype=Gb||w(Tb),ac.dimension=Eb,fd(ac,Tb,yb),Vb&&(ac.persistentData=new Uint8Array(new Uint8Array(Tb.buffer)));else if(r(Tb)){Eb=Tb.shape;var Dc=Tb.stride;Zb=Tb.offset;var ic=0,Bc=0,Sc=0,Ic=0;1===Eb.length?(ic=Eb[0],Bc=1,Sc=Dc[0],Ic=0):2===Eb.length&&(ic=Eb[0],Bc=Eb[1],Sc=Dc[0],Ic=Dc[1]);ac.dtype=Gb||w(Tb.data)||5126;ac.dimension=Bc;Eb=xa.allocType(ac.dtype,ic*Bc);D(Eb,Tb.data,ic,Bc,Sc,Ic,Zb);fd(ac,Eb,yb);Vb?ac.persistentData=
Eb:xa.freeType(Eb)}else Tb instanceof ArrayBuffer&&(ac.dtype=5121,ac.dimension=Eb,fd(ac,Tb,yb),Vb&&(ac.persistentData=new Uint8Array(new Uint8Array(Tb))))}function xb(ac){Xb.bufferCount--;Mc(ac);tb.deleteBuffer(ac.buffer);ac.buffer=null;delete nc[ac.id]}var kc=0,nc={};Rc.prototype.bind=function(){tb.bindBuffer(this.type,this.buffer)};Rc.prototype.destroy=function(){xb(this)};var Kc=[];uc.profile&&(Xb.getTotalBufferSize=function(){var ac=0;Object.keys(nc).forEach(function(Tb){ac+=nc[Tb].stats.size});
return ac});return{create:function(ac,Tb,yb,Gb){function Eb(Zb){var Dc=35044,ic=null,Bc=0,Sc=0,Ic=1;Array.isArray(Zb)||Ja(Zb)||r(Zb)||Zb instanceof ArrayBuffer?ic=Zb:"number"===typeof Zb?Bc=Zb|0:Zb&&("data"in Zb&&(ic=Zb.data),"usage"in Zb&&(Dc=Ia[Zb.usage]),"type"in Zb&&(Sc=Ea[Zb.type]),"dimension"in Zb&&(Ic=Zb.dimension|0),"length"in Zb&&(Bc=Zb.length|0));Vb.bind();ic?sb(Vb,ic,Dc,Sc,Ic,Gb):(Bc&&tb.bufferData(Vb.type,Bc,Dc),Vb.dtype=Sc||5121,Vb.usage=Dc,Vb.dimension=Ic,Vb.byteLength=Bc);uc.profile&&
(Vb.stats.size=Vb.byteLength*hb[Vb.dtype]);return Eb}Xb.bufferCount++;var Vb=new Rc(Tb);nc[Vb.id]=Vb;yb||Eb(ac);Eb._reglType="buffer";Eb._buffer=Vb;Eb.subdata=function(Zb,Dc){Dc=(Dc||0)|0;Vb.bind();if(Ja(Zb)||Zb instanceof ArrayBuffer)tb.bufferSubData(Vb.type,Dc,Zb);else if(Array.isArray(Zb)){if(0<Zb.length)if("number"===typeof Zb[0]){var ic=xa.allocType(Vb.dtype,Zb.length);y(ic,Zb);tb.bufferSubData(Vb.type,Dc,ic);xa.freeType(ic)}else if(Array.isArray(Zb[0])||Ja(Zb[0])){var Bc=lb(Zb);ic=Qa(Zb,Bc,
Vb.dtype);tb.bufferSubData(Vb.type,Dc,ic);xa.freeType(ic)}}else if(r(Zb)){Bc=Zb.shape;var Sc=Zb.stride,Ic=ic=0,$c=0,nd=0;1===Bc.length?(ic=Bc[0],Ic=1,$c=Sc[0],nd=0):2===Bc.length&&(ic=Bc[0],Ic=Bc[1],$c=Sc[0],nd=Sc[1]);Bc=Array.isArray(Zb.data)?Vb.dtype:w(Zb.data);Bc=xa.allocType(Bc,ic*Ic);D(Bc,Zb.data,ic,Ic,$c,nd,Zb.offset);tb.bufferSubData(Vb.type,Dc,Bc);xa.freeType(Bc)}return Eb};uc.profile&&(Eb.stats=Vb.stats);Eb.destroy=function(){xb(Vb)};return Eb},createStream:function(ac,Tb){var yb=Kc.pop();
yb||(yb=new Rc(ac));yb.bind();sb(yb,Tb,35040,0,1,!1);return yb},destroyStream:function(ac){Kc.push(ac)},clear:function(){eb(nc).forEach(xb);Kc.forEach(xb)},getBuffer:function(ac){return ac&&ac._buffer instanceof Rc?ac._buffer:null},restore:function(){eb(nc).forEach(function(ac){ac.buffer=tb.createBuffer();tb.bindBuffer(ac.type,ac.buffer);tb.bufferData(ac.type,ac.persistentData||ac.byteLength,ac.usage)})},_initBuffer:sb}}function E(tb,Xb,uc,Mc){function Rc(ac){this.id=kc++;xb[this.id]=this;this.buffer=
ac;this.primType=4;this.type=this.vertCount=0}function fd(ac,Tb,yb,Gb,Eb,Vb,Zb){ac.buffer.bind();var Dc;Tb?((Dc=Zb)||Ja(Tb)&&(!r(Tb)||Ja(Tb.data))||(Dc=Xb.oes_element_index_uint?5125:5123),uc._initBuffer(ac.buffer,Tb,yb,Dc,3)):(tb.bufferData(34963,Vb,yb),ac.buffer.dtype=Dc||5121,ac.buffer.usage=yb,ac.buffer.dimension=3,ac.buffer.byteLength=Vb);Dc=Zb;if(!Zb){switch(ac.buffer.dtype){case 5121:case 5120:Dc=5121;break;case 5123:case 5122:Dc=5123;break;case 5125:case 5124:Dc=5125}ac.buffer.dtype=Dc}ac.type=
Dc;Tb=Eb;0>Tb&&(Tb=ac.buffer.byteLength,5123===Dc?Tb>>=1:5125===Dc&&(Tb>>=2));ac.vertCount=Tb;Tb=Gb;0>Gb&&(Tb=4,Gb=ac.buffer.dimension,1===Gb&&(Tb=0),2===Gb&&(Tb=1),3===Gb&&(Tb=4));ac.primType=Tb}function sb(ac){Mc.elementsCount--;delete xb[ac.id];ac.buffer.destroy();ac.buffer=null}var xb={},kc=0,nc={uint8:5121,uint16:5123};Xb.oes_element_index_uint&&(nc.uint32=5125);Rc.prototype.bind=function(){this.buffer.bind()};var Kc=[];return{create:function(ac,Tb){function yb(Vb){if(Vb)if("number"===typeof Vb)Gb(Vb),
Eb.primType=4,Eb.vertCount=Vb|0,Eb.type=5121;else{var Zb=null,Dc=35044,ic=-1,Bc=-1,Sc=0,Ic=0;if(Array.isArray(Vb)||Ja(Vb)||r(Vb))Zb=Vb;else if("data"in Vb&&(Zb=Vb.data),"usage"in Vb&&(Dc=Ia[Vb.usage]),"primitive"in Vb&&(ic=Fa[Vb.primitive]),"count"in Vb&&(Bc=Vb.count|0),"type"in Vb&&(Ic=nc[Vb.type]),"length"in Vb)Sc=Vb.length|0;else if(Sc=Bc,5123===Ic||5122===Ic)Sc*=2;else if(5125===Ic||5124===Ic)Sc*=4;fd(Eb,Zb,Dc,ic,Bc,Sc,Ic)}else Gb(),Eb.primType=4,Eb.vertCount=0,Eb.type=5121;return yb}var Gb=uc.create(null,
34963,!0),Eb=new Rc(Gb._buffer);Mc.elementsCount++;yb(ac);yb._reglType="elements";yb._elements=Eb;yb.subdata=function(Vb,Zb){Gb.subdata(Vb,Zb);return yb};yb.destroy=function(){sb(Eb)};return yb},createStream:function(ac){var Tb=Kc.pop();Tb||(Tb=new Rc(uc.create(null,34963,!0,!1)._buffer));fd(Tb,ac,35040,-1,-1,0,0);return Tb},destroyStream:function(ac){Kc.push(ac)},getElements:function(ac){return"function"===typeof ac&&ac._elements instanceof Rc?ac._elements:null},clear:function(){eb(xb).forEach(sb)}}}
function B(tb){for(var Xb=xa.allocType(5123,tb.length),uc=0;uc<tb.length;++uc)if(isNaN(tb[uc]))Xb[uc]=65535;else if(Infinity===tb[uc])Xb[uc]=31744;else if(-Infinity===tb[uc])Xb[uc]=64512;else{La[0]=tb[uc];var Mc=Oa[0],Rc=Mc>>>31<<15,fd=(Mc<<1>>>24)-127;Mc=Mc>>13&1023;Xb[uc]=-24>fd?Rc:-14>fd?Rc+(Mc+1024>>-14-fd):15<fd?Rc+31744:Rc+(fd+15<<10)+Mc}return Xb}function t(tb){return Array.isArray(tb)||Ja(tb)}function G(tb){return"[object "+tb+"]"}function I(tb){return Array.isArray(tb)&&(0===tb.length||"number"===
typeof tb[0])}function L(tb){return Array.isArray(tb)&&0!==tb.length&&t(tb[0])?!0:!1}function M(tb){return Object.prototype.toString.call(tb)}function N(tb){if(!tb)return!1;var Xb=M(tb);return 0<=ib.indexOf(Xb)?!0:I(tb)||L(tb)||r(tb)}function H(tb,Xb){36193===tb.type?(tb.data=B(Xb),xa.freeType(Xb)):tb.data=Xb}function J(tb,Xb,uc,Mc,Rc,fd){tb="undefined"!==typeof db[tb]?db[tb]:Pa[tb]*ob[Xb];fd&&(tb*=6);if(Rc){for(Mc=0;1<=uc;)Mc+=tb*uc*uc,uc/=2;return Mc}return tb*uc*Mc}function O(tb,Xb,uc,Mc,Rc,fd,
sb){function xb(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function kc(fc,Vc){fc.internalformat=Vc.internalformat;fc.format=Vc.format;fc.type=Vc.type;fc.compressed=Vc.compressed;fc.premultiplyAlpha=Vc.premultiplyAlpha;fc.flipY=Vc.flipY;fc.unpackAlignment=Vc.unpackAlignment;fc.colorSpace=Vc.colorSpace;fc.width=Vc.width;fc.height=Vc.height;fc.channels=Vc.channels}
function nc(fc,Vc){if("object"===typeof Vc&&Vc){"premultiplyAlpha"in Vc&&(fc.premultiplyAlpha=Vc.premultiplyAlpha);"flipY"in Vc&&(fc.flipY=Vc.flipY);"alignment"in Vc&&(fc.unpackAlignment=Vc.alignment);"colorSpace"in Vc&&(fc.colorSpace=cb[Vc.colorSpace]);"type"in Vc&&(fc.type=je[Vc.type]);var Ua=fc.width,wb=fc.height,Fb=fc.channels,Wb=!1;"shape"in Vc?(Ua=Vc.shape[0],wb=Vc.shape[1],3===Vc.shape.length&&(Fb=Vc.shape[2],Wb=!0)):("radius"in Vc&&(Ua=wb=Vc.radius),"width"in Vc&&(Ua=Vc.width),"height"in Vc&&
(wb=Vc.height),"channels"in Vc&&(Fb=Vc.channels,Wb=!0));fc.width=Ua|0;fc.height=wb|0;fc.channels=Fb|0;Ua=!1;"format"in Vc&&(Ua=Vc.format,wb=fc.internalformat=xd[Ua],fc.format=Ae[wb],Ua in je&&!("type"in Vc)&&(fc.type=je[Ua]),Ua in be&&(fc.compressed=!0),Ua=!0);!Wb&&Ua?fc.channels=Pa[fc.format]:Wb&&!Ua&&fc.channels!==bb[fc.format]&&(fc.format=fc.internalformat=bb[fc.channels])}}function Kc(fc){tb.pixelStorei(37440,fc.flipY);tb.pixelStorei(37441,fc.premultiplyAlpha);tb.pixelStorei(37443,fc.colorSpace);
tb.pixelStorei(3317,fc.unpackAlignment)}function ac(){xb.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function Tb(fc,Vc){var Ua=null;N(Vc)?Ua=Vc:Vc&&(nc(fc,Vc),"x"in Vc&&(fc.xOffset=Vc.x|0),"y"in Vc&&(fc.yOffset=Vc.y|0),N(Vc.data)&&(Ua=Vc.data));if(Vc.copy){Vc=Rc.viewportWidth;var wb=Rc.viewportHeight;fc.width=fc.width||Vc-fc.xOffset;fc.height=fc.height||wb-fc.yOffset;fc.needsCopy=!0}else if(!Ua)fc.width=fc.width||1,fc.height=fc.height||
1,fc.channels=fc.channels||4;else if(Ja(Ua))fc.channels=fc.channels||4,fc.data=Ua,"type"in Vc||5121!==fc.type||(fc.type=Wa[Object.prototype.toString.call(Ua)]|0);else if(I(Ua)){fc.channels=fc.channels||4;Vc=Ua;wb=Vc.length;switch(fc.type){case 5121:case 5123:case 5125:case 5126:wb=xa.allocType(fc.type,wb);wb.set(Vc);fc.data=wb;break;case 36193:fc.data=B(Vc)}fc.alignment=1;fc.needsFree=!0}else if(r(Ua)){Vc=Ua.data;Array.isArray(Vc)||5121!==fc.type||(fc.type=Wa[Object.prototype.toString.call(Vc)]|0);
wb=Ua.shape;var Fb=Ua.stride,Wb,lc;3===wb.length?(Wb=wb[2],lc=Fb[2]):lc=Wb=1;var wc=wb[0];var cc=wb[1];wb=Fb[0];Fb=Fb[1];fc.alignment=1;fc.width=wc;fc.height=cc;fc.channels=Wb;fc.format=fc.internalformat=bb[Wb];fc.needsFree=!0;wc=lc;Ua=Ua.offset;Wb=fc.width;lc=fc.height;cc=fc.channels;for(var Qc=xa.allocType(36193===fc.type?5126:fc.type,Wb*lc*cc),Ab=0,Nb=0;Nb<lc;++Nb)for(var ec=0;ec<Wb;++ec)for(var xc=0;xc<cc;++xc)Qc[Ab++]=Vc[wb*ec+Fb*Nb+wc*xc+Ua];H(fc,Qc)}else if(M(Ua)===Ta||M(Ua)===Ya||M(Ua)===
nb)M(Ua)===Ta||M(Ua)===Ya?fc.element=Ua:fc.element=Ua.canvas,fc.width=fc.element.width,fc.height=fc.element.height,fc.channels=4;else if(M(Ua)===Da)fc.element=Ua,fc.width=Ua.width,fc.height=Ua.height,fc.channels=4;else if(M(Ua)===Ha)fc.element=Ua,fc.width=Ua.naturalWidth,fc.height=Ua.naturalHeight,fc.channels=4;else if(M(Ua)===ab)fc.element=Ua,fc.width=Ua.videoWidth,fc.height=Ua.videoHeight,fc.channels=4;else if(L(Ua)){Vc=fc.width||Ua[0].length;wb=fc.height||Ua.length;Fb=fc.channels;Fb=t(Ua[0][0])?
Fb||Ua[0][0].length:Fb||1;wc=Ra.shape(Ua);Wb=1;for(lc=0;lc<wc.length;++lc)Wb*=wc[lc];Wb=xa.allocType(36193===fc.type?5126:fc.type,Wb);Ra.flatten(Ua,wc,"",Wb);H(fc,Wb);fc.alignment=1;fc.width=Vc;fc.height=wb;fc.channels=Fb;fc.format=fc.internalformat=bb[Fb];fc.needsFree=!0}}function yb(fc,Vc,Ua,wb,Fb){var Wb=fc.element,lc=fc.data,wc=fc.internalformat,cc=fc.format,Qc=fc.type,Ab=fc.width,Nb=fc.height;Kc(fc);Wb?tb.texSubImage2D(Vc,Fb,Ua,wb,cc,Qc,Wb):fc.compressed?tb.compressedTexSubImage2D(Vc,Fb,Ua,wb,
wc,Ab,Nb,lc):fc.needsCopy?(Mc(),tb.copyTexSubImage2D(Vc,Fb,Ua,wb,fc.xOffset,fc.yOffset,Ab,Nb)):tb.texSubImage2D(Vc,Fb,Ua,wb,Ab,Nb,cc,Qc,lc)}function Gb(){return Xd.pop()||new ac}function Eb(fc){fc.needsFree&&xa.freeType(fc.data);ac.call(fc);Xd.push(fc)}function Vb(){xb.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function Zb(fc,Vc,Ua){var wb=fc.images[0]=Gb();fc.mipmask=1;wb.width=fc.width=Vc;wb.height=fc.height=Ua;wb.channels=fc.channels=4}function Dc(fc,
Vc){if(N(Vc)){var Ua=fc.images[0]=Gb();kc(Ua,fc);Tb(Ua,Vc);fc.mipmask=1}else if(nc(fc,Vc),Array.isArray(Vc.mipmap)){Vc=Vc.mipmap;for(var wb=0;wb<Vc.length;++wb)Ua=fc.images[wb]=Gb(),kc(Ua,fc),Ua.width>>=wb,Ua.height>>=wb,Tb(Ua,Vc[wb]),fc.mipmask|=1<<wb}else Ua=fc.images[0]=Gb(),kc(Ua,fc),Tb(Ua,Vc),fc.mipmask=1;kc(fc,fc.images[0])}function ic(fc,Vc){fc=fc.images;for(var Ua=0;Ua<fc.length&&fc[Ua];++Ua){var wb=fc[Ua],Fb=Vc,Wb=Ua,lc=wb.element,wc=wb.data,cc=wb.internalformat,Qc=wb.format,Ab=wb.type,Nb=
wb.width,ec=wb.height;Kc(wb);lc?tb.texImage2D(Fb,Wb,Qc,Qc,Ab,lc):wb.compressed?tb.compressedTexImage2D(Fb,Wb,cc,Nb,ec,0,wc):wb.needsCopy?(Mc(),tb.copyTexImage2D(Fb,Wb,Qc,wb.xOffset,wb.yOffset,Nb,ec,0)):tb.texImage2D(Fb,Wb,Qc,Nb,ec,0,Qc,Ab,wc||null)}}function Bc(){var fc=sf.pop()||new Vb;xb.call(fc);for(var Vc=fc.mipmask=0;16>Vc;++Vc)fc.images[Vc]=null;return fc}function Sc(fc){for(var Vc=fc.images,Ua=0;Ua<Vc.length;++Ua)Vc[Ua]&&Eb(Vc[Ua]),Vc[Ua]=null;sf.push(fc)}function Ic(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function $c(fc,Vc){"min"in Vc&&(fc.minFilter=yd[Vc.min],0<=fb.indexOf(fc.minFilter)&&!("faces"in Vc)&&(fc.genMipmaps=!0));"mag"in Vc&&(fc.magFilter=ud[Vc.mag]);var Ua=fc.wrapS,wb=fc.wrapT;if("wrap"in Vc){var Fb=Vc.wrap;"string"===typeof Fb?Ua=wb=sd[Fb]:Array.isArray(Fb)&&(Ua=sd[Fb[0]],wb=sd[Fb[1]])}else"wrapS"in Vc&&(Ua=sd[Vc.wrapS]),"wrapT"in Vc&&(wb=sd[Vc.wrapT]);fc.wrapS=Ua;fc.wrapT=wb;"anisotropic"in Vc&&
(fc.anisotropic=Vc.anisotropic);if("mipmap"in Vc){Ua=!1;switch(typeof Vc.mipmap){case "string":fc.mipmapHint=Jc[Vc.mipmap];Ua=fc.genMipmaps=!0;break;case "boolean":Ua=fc.genMipmaps=Vc.mipmap;break;case "object":fc.genMipmaps=!1,Ua=!0}!Ua||"min"in Vc||(fc.minFilter=9984)}}function nd(fc,Vc){tb.texParameteri(Vc,10241,fc.minFilter);tb.texParameteri(Vc,10240,fc.magFilter);tb.texParameteri(Vc,10242,fc.wrapS);tb.texParameteri(Vc,10243,fc.wrapT);Xb.ext_texture_filter_anisotropic&&tb.texParameteri(Vc,34046,
fc.anisotropic);fc.genMipmaps&&(tb.hint(33170,fc.mipmapHint),tb.generateMipmap(Vc))}function Yc(fc){xb.call(this);this.mipmask=0;this.internalformat=6408;this.id=Re++;this.refCount=1;this.target=fc;this.texture=tb.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Ic;sb.profile&&(this.stats={size:0})}function rd(fc){tb.activeTexture(33984);tb.bindTexture(fc.target,fc.texture)}function wd(){var fc=Oe[0];fc?tb.bindTexture(fc.target,fc.texture):tb.bindTexture(3553,null)}function cd(fc){var Vc=
fc.texture,Ua=fc.unit,wb=fc.target;0<=Ua&&(tb.activeTexture(33984+Ua),tb.bindTexture(wb,null),Oe[Ua]=null);tb.deleteTexture(Vc);fc.texture=null;fc.params=null;fc.pixels=null;fc.refCount=0;delete tf[fc.id];fd.textureCount--}var Jc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},sd={repeat:10497,clamp:33071,mirror:33648},ud={nearest:9728,linear:9729},yd=ua({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},ud),cb=
{none:0,browser:37444},je={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},xd={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},be={};Xb.ext_srgb&&(xd.srgb=35904,xd.srgba=35906);Xb.oes_texture_float&&(je.float32=je["float"]=5126);Xb.oes_texture_half_float&&(je.float16=je["half float"]=36193);Xb.webgl_depth_texture&&(ua(xd,{depth:6402,"depth stencil":34041}),ua(je,{uint16:5123,uint32:5125,"depth stencil":34042}));Xb.webgl_compressed_texture_s3tc&&
ua(be,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});Xb.webgl_compressed_texture_atc&&ua(be,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});Xb.webgl_compressed_texture_pvrtc&&ua(be,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});Xb.webgl_compressed_texture_etc1&&(be["rgb etc1"]=36196);var qe=Array.prototype.slice.call(tb.getParameter(34467));Object.keys(be).forEach(function(fc){var Vc=
be[fc];0<=qe.indexOf(Vc)&&(xd[fc]=Vc)});var Hd=Object.keys(xd);uc.textureFormats=Hd;var ke=[];Object.keys(xd).forEach(function(fc){ke[xd[fc]]=fc});var Ge=[];Object.keys(je).forEach(function(fc){Ge[je[fc]]=fc});var Fd=[];Object.keys(ud).forEach(function(fc){Fd[ud[fc]]=fc});var Wd=[];Object.keys(yd).forEach(function(fc){Wd[yd[fc]]=fc});var Sd=[];Object.keys(sd).forEach(function(fc){Sd[sd[fc]]=fc});var Ae=Hd.reduce(function(fc,Vc){var Ua=xd[Vc];6409===Ua||6406===Ua||6409===Ua||6410===Ua||6402===Ua||
34041===Ua||Xb.ext_srgb&&(35904===Ua||35906===Ua)?fc[Ua]=Ua:32855===Ua||0<=Vc.indexOf("rgba")?fc[Ua]=6408:fc[Ua]=6407;return fc},{}),Xd=[],sf=[],Re=0,tf={},$e=uc.maxTextureUnits,Oe=Array($e).map(function(){return null});ua(Yc.prototype,{bind:function(){this.bindCount+=1;var fc=this.unit;if(0>fc){for(var Vc=0;Vc<$e;++Vc){var Ua=Oe[Vc];if(Ua){if(0<Ua.bindCount)continue;Ua.unit=-1}Oe[Vc]=this;fc=Vc;break}sb.profile&&fd.maxTextureUnits<fc+1&&(fd.maxTextureUnits=fc+1);this.unit=fc;tb.activeTexture(33984+
fc);tb.bindTexture(this.target,this.texture)}return fc},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&cd(this)}});sb.profile&&(fd.getTotalTextureSize=function(){var fc=0;Object.keys(tf).forEach(function(Vc){fc+=tf[Vc].stats.size});return fc});return{create2D:function(fc,Vc){function Ua(Fb,Wb){var lc=wb.texInfo;Ic.call(lc);var wc=Bc();"number"===typeof Fb?"number"===typeof Wb?Zb(wc,Fb|0,Wb|0):Zb(wc,Fb|0,Fb|0):Fb?($c(lc,Fb),Dc(wc,Fb)):Zb(wc,1,1);lc.genMipmaps&&(wc.mipmask=
(wc.width<<1)-1);wb.mipmask=wc.mipmask;kc(wb,wc);wb.internalformat=wc.internalformat;Ua.width=wc.width;Ua.height=wc.height;rd(wb);ic(wc,3553);nd(lc,3553);wd();Sc(wc);sb.profile&&(wb.stats.size=J(wb.internalformat,wb.type,wc.width,wc.height,lc.genMipmaps,!1));Ua.format=ke[wb.internalformat];Ua.type=Ge[wb.type];Ua.mag=Fd[lc.magFilter];Ua.min=Wd[lc.minFilter];Ua.wrapS=Sd[lc.wrapS];Ua.wrapT=Sd[lc.wrapT];return Ua}var wb=new Yc(3553);tf[wb.id]=wb;fd.textureCount++;Ua(fc,Vc);Ua.subimage=function(Fb,Wb,
lc,wc){Wb|=0;lc|=0;wc|=0;var cc=Gb();kc(cc,wb);cc.width=0;cc.height=0;Tb(cc,Fb);cc.width=cc.width||(wb.width>>wc)-Wb;cc.height=cc.height||(wb.height>>wc)-lc;rd(wb);yb(cc,3553,Wb,lc,wc);wd();Eb(cc);return Ua};Ua.resize=function(Fb,Wb){Fb|=0;Wb=Wb|0||Fb;if(Fb===wb.width&&Wb===wb.height)return Ua;Ua.width=wb.width=Fb;Ua.height=wb.height=Wb;rd(wb);for(var lc=0;wb.mipmask>>lc;++lc){var wc=Fb>>lc,cc=Wb>>lc;if(!wc||!cc)break;tb.texImage2D(3553,lc,wb.format,wc,cc,0,wb.format,wb.type,null)}wd();sb.profile&&
(wb.stats.size=J(wb.internalformat,wb.type,Fb,Wb,!1,!1));return Ua};Ua._reglType="texture2d";Ua._texture=wb;sb.profile&&(Ua.stats=wb.stats);Ua.destroy=function(){wb.decRef()};return Ua},createCube:function(fc,Vc,Ua,wb,Fb,Wb){function lc(Qc,Ab,Nb,ec,xc,yc){var Gc,Cc=wc.texInfo;Ic.call(Cc);for(Gc=0;6>Gc;++Gc)cc[Gc]=Bc();if("number"===typeof Qc||!Qc)for(Qc=Qc|0||1,Gc=0;6>Gc;++Gc)Zb(cc[Gc],Qc,Qc);else if("object"===typeof Qc)if(Ab)Dc(cc[0],Qc),Dc(cc[1],Ab),Dc(cc[2],Nb),Dc(cc[3],ec),Dc(cc[4],xc),Dc(cc[5],
yc);else if($c(Cc,Qc),nc(wc,Qc),"faces"in Qc)for(Qc=Qc.faces,Gc=0;6>Gc;++Gc)kc(cc[Gc],wc),Dc(cc[Gc],Qc[Gc]);else for(Gc=0;6>Gc;++Gc)Dc(cc[Gc],Qc);kc(wc,cc[0]);wc.mipmask=Cc.genMipmaps?(cc[0].width<<1)-1:cc[0].mipmask;wc.internalformat=cc[0].internalformat;lc.width=cc[0].width;lc.height=cc[0].height;rd(wc);for(Gc=0;6>Gc;++Gc)ic(cc[Gc],34069+Gc);nd(Cc,34067);wd();sb.profile&&(wc.stats.size=J(wc.internalformat,wc.type,lc.width,lc.height,Cc.genMipmaps,!0));lc.format=ke[wc.internalformat];lc.type=Ge[wc.type];
lc.mag=Fd[Cc.magFilter];lc.min=Wd[Cc.minFilter];lc.wrapS=Sd[Cc.wrapS];lc.wrapT=Sd[Cc.wrapT];for(Gc=0;6>Gc;++Gc)Sc(cc[Gc]);return lc}var wc=new Yc(34067);tf[wc.id]=wc;fd.cubeCount++;var cc=Array(6);lc(fc,Vc,Ua,wb,Fb,Wb);lc.subimage=function(Qc,Ab,Nb,ec,xc){Nb|=0;ec|=0;xc|=0;var yc=Gb();kc(yc,wc);yc.width=0;yc.height=0;Tb(yc,Ab);yc.width=yc.width||(wc.width>>xc)-Nb;yc.height=yc.height||(wc.height>>xc)-ec;rd(wc);yb(yc,34069+Qc,Nb,ec,xc);wd();Eb(yc);return lc};lc.resize=function(Qc){Qc|=0;if(Qc!==wc.width){lc.width=
wc.width=Qc;lc.height=wc.height=Qc;rd(wc);for(var Ab=0;6>Ab;++Ab)for(var Nb=0;wc.mipmask>>Nb;++Nb)tb.texImage2D(34069+Ab,Nb,wc.format,Qc>>Nb,Qc>>Nb,0,wc.format,wc.type,null);wd();sb.profile&&(wc.stats.size=J(wc.internalformat,wc.type,lc.width,lc.height,!1,!0));return lc}};lc._reglType="textureCube";lc._texture=wc;sb.profile&&(lc.stats=wc.stats);lc.destroy=function(){wc.decRef()};return lc},clear:function(){for(var fc=0;fc<$e;++fc)tb.activeTexture(33984+fc),tb.bindTexture(3553,null),Oe[fc]=null;eb(tf).forEach(cd);
fd.cubeCount=0;fd.textureCount=0},getTexture:function(fc){return null},restore:function(){for(var fc=0;fc<$e;++fc){var Vc=Oe[fc];Vc&&(Vc.bindCount=0,Vc.unit=-1,Oe[fc]=null)}eb(tf).forEach(function(Ua){Ua.texture=tb.createTexture();tb.bindTexture(Ua.target,Ua.texture);for(var wb=0;32>wb;++wb)if(0!==(Ua.mipmask&1<<wb))if(3553===Ua.target)tb.texImage2D(3553,wb,Ua.internalformat,Ua.width>>wb,Ua.height>>wb,0,Ua.internalformat,Ua.type,null);else for(var Fb=0;6>Fb;++Fb)tb.texImage2D(34069+Fb,wb,Ua.internalformat,
Ua.width>>wb,Ua.height>>wb,0,Ua.internalformat,Ua.type,null);nd(Ua.texInfo,Ua.target)})}}}function Q(tb,Xb,uc,Mc,Rc,fd){function sb(Yc,rd,wd){this.target=Yc;this.texture=rd;this.renderbuffer=wd;var cd=Yc=0;rd?(Yc=rd.width,cd=rd.height):wd&&(Yc=wd.width,cd=wd.height);this.width=Yc;this.height=cd}function xb(Yc){Yc&&(Yc.texture&&Yc.texture._texture.decRef(),Yc.renderbuffer&&Yc.renderbuffer._renderbuffer.decRef())}function kc(Yc,rd,wd){Yc&&(Yc.texture?Yc.texture._texture.refCount+=1:Yc.renderbuffer._renderbuffer.refCount+=
1)}function nc(Yc,rd){rd&&(rd.texture?tb.framebufferTexture2D(36160,Yc,rd.target,rd.texture._texture.texture,0):tb.framebufferRenderbuffer(36160,Yc,36161,rd.renderbuffer._renderbuffer.renderbuffer))}function Kc(Yc){var rd=3553,wd=null,cd=null,Jc=Yc;"object"===typeof Yc&&(Jc=Yc.data,"target"in Yc&&(rd=Yc.target|0));Yc=Jc._reglType;"texture2d"===Yc?wd=Jc:"textureCube"===Yc?wd=Jc:"renderbuffer"===Yc&&(cd=Jc,rd=36161);return new sb(rd,wd,cd)}function ac(Yc,rd,wd,cd,Jc){if(wd)return Yc=Mc.create2D({width:Yc,
height:rd,format:cd,type:Jc}),Yc._texture.refCount=0,new sb(3553,Yc,null);Yc=Rc.create({width:Yc,height:rd,format:cd});Yc._renderbuffer.refCount=0;return new sb(36161,null,Yc)}function Tb(Yc){return Yc&&(Yc.texture||Yc.renderbuffer)}function yb(Yc,rd,wd){Yc&&(Yc.texture?Yc.texture.resize(rd,wd):Yc.renderbuffer&&Yc.renderbuffer.resize(rd,wd),Yc.width=rd,Yc.height=wd)}function Gb(){this.id=$c++;nd[this.id]=this;this.framebuffer=tb.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];
this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Eb(Yc){Yc.colorAttachments.forEach(xb);xb(Yc.depthAttachment);xb(Yc.stencilAttachment);xb(Yc.depthStencilAttachment)}function Vb(Yc){tb.deleteFramebuffer(Yc.framebuffer);Yc.framebuffer=null;fd.framebufferCount--;delete nd[Yc.id]}function Zb(Yc){var rd;tb.bindFramebuffer(36160,Yc.framebuffer);var wd=Yc.colorAttachments;for(rd=0;rd<wd.length;++rd)nc(36064+rd,wd[rd]);for(rd=wd.length;rd<uc.maxColorAttachments;++rd)tb.framebufferTexture2D(36160,
36064+rd,3553,null,0);tb.framebufferTexture2D(36160,33306,3553,null,0);tb.framebufferTexture2D(36160,36096,3553,null,0);tb.framebufferTexture2D(36160,36128,3553,null,0);nc(36096,Yc.depthAttachment);nc(36128,Yc.stencilAttachment);nc(33306,Yc.depthStencilAttachment);tb.checkFramebufferStatus(36160);tb.isContextLost();tb.bindFramebuffer(36160,ic.next?ic.next.framebuffer:null);ic.cur=ic.next;tb.getError()}function Dc(Yc,rd){function wd(Jc,sd){var ud=0,yd=0,cb=!0,je=!0;var xd=null;var be=!0,qe="rgba",
Hd="uint8",ke=1,Ge=null,Fd=null,Wd=null,Sd=!1;if("number"===typeof Jc)ud=Jc|0,yd=sd|0||ud;else if(Jc){"shape"in Jc?(yd=Jc.shape,ud=yd[0],yd=yd[1]):("radius"in Jc&&(ud=yd=Jc.radius),"width"in Jc&&(ud=Jc.width),"height"in Jc&&(yd=Jc.height));if("color"in Jc||"colors"in Jc)xd=Jc.color||Jc.colors,Array.isArray(xd);if(!xd){"colorCount"in Jc&&(ke=Jc.colorCount|0);"colorTexture"in Jc&&(be=!!Jc.colorTexture,qe="rgba4");if("colorType"in Jc&&(Hd=Jc.colorType,!be))if("half float"===Hd||"float16"===Hd)qe="rgba16f";
else if("float"===Hd||"float32"===Hd)qe="rgba32f";"colorFormat"in Jc&&(qe=Jc.colorFormat,0<=Bc.indexOf(qe)?be=!0:0<=Sc.indexOf(qe)&&(be=!1))}if("depthTexture"in Jc||"depthStencilTexture"in Jc)Sd=!(!Jc.depthTexture&&!Jc.depthStencilTexture);"depth"in Jc&&("boolean"===typeof Jc.depth?cb=Jc.depth:(Ge=Jc.depth,je=!1));"stencil"in Jc&&("boolean"===typeof Jc.stencil?je=Jc.stencil:(Fd=Jc.stencil,cb=!1));"depthStencil"in Jc&&("boolean"===typeof Jc.depthStencil?cb=je=Jc.depthStencil:(Wd=Jc.depthStencil,je=
cb=!1))}else ud=yd=1;var Ae=sd=null,Xd=null;if(Array.isArray(xd))Jc=xd.map(Kc);else if(xd)Jc=[Kc(xd)];else for(Jc=Array(ke),xd=0;xd<ke;++xd)Jc[xd]=ac(ud,yd,be,qe,Hd);ud=ud||Jc[0].width;yd=yd||Jc[0].height;Ge?sd=Kc(Ge):cb&&!je&&(sd=ac(ud,yd,Sd,"depth","uint32"));Fd?Ae=Kc(Fd):je&&!cb&&(Ae=ac(ud,yd,!1,"stencil","uint8"));Wd?Xd=Kc(Wd):!Ge&&!Fd&&je&&cb&&(Xd=ac(ud,yd,Sd,"depth stencil","depth stencil"));cb=null;for(xd=0;xd<Jc.length;++xd)kc(Jc[xd],ud,yd),Jc[xd]&&Jc[xd].texture&&(je=Bb[Jc[xd].texture._texture.format]*
Qb[Jc[xd].texture._texture.type],null===cb&&(cb=je));kc(sd,ud,yd);kc(Ae,ud,yd);kc(Xd,ud,yd);Eb(cd);cd.width=ud;cd.height=yd;cd.colorAttachments=Jc;cd.depthAttachment=sd;cd.stencilAttachment=Ae;cd.depthStencilAttachment=Xd;wd.color=Jc.map(Tb);wd.depth=Tb(sd);wd.stencil=Tb(Ae);wd.depthStencil=Tb(Xd);wd.width=cd.width;wd.height=cd.height;Zb(cd);return wd}var cd=new Gb;fd.framebufferCount++;wd(Yc,rd);return ua(wd,{resize:function(Jc,sd){Jc=Math.max(Jc|0,1);sd=Math.max(sd|0||Jc,1);if(Jc===cd.width&&sd===
cd.height)return wd;for(var ud=cd.colorAttachments,yd=0;yd<ud.length;++yd)yb(ud[yd],Jc,sd);yb(cd.depthAttachment,Jc,sd);yb(cd.stencilAttachment,Jc,sd);yb(cd.depthStencilAttachment,Jc,sd);cd.width=wd.width=Jc;cd.height=wd.height=sd;Zb(cd);return wd},_reglType:"framebuffer",_framebuffer:cd,destroy:function(){Vb(cd);Eb(cd)},use:function(Jc){ic.setFBO({framebuffer:wd},Jc)}})}var ic={cur:null,next:null,dirty:!1,setFBO:null},Bc=["rgba"],Sc=["rgba4","rgb565","rgb5 a1"];Xb.ext_srgb&&Sc.push("srgba");Xb.ext_color_buffer_half_float&&
Sc.push("rgba16f","rgb16f");Xb.webgl_color_buffer_float&&Sc.push("rgba32f");var Ic=["uint8"];Xb.oes_texture_half_float&&Ic.push("half float","float16");Xb.oes_texture_float&&Ic.push("float","float32");var $c=0,nd={};return ua(ic,{getFramebuffer:function(Yc){return"function"===typeof Yc&&"framebuffer"===Yc._reglType&&(Yc=Yc._framebuffer,Yc instanceof Gb)?Yc:null},create:Dc,createCube:function(Yc){function rd(cd){var Jc={color:null},sd=0,ud=null;var yd="rgba";var cb="uint8",je=1;if("number"===typeof cd)sd=
cd|0;else if(cd){"shape"in cd?sd=cd.shape[0]:("radius"in cd&&(sd=cd.radius|0),"width"in cd?sd=cd.width|0:"height"in cd&&(sd=cd.height|0));if("color"in cd||"colors"in cd)ud=cd.color||cd.colors,Array.isArray(ud);ud||("colorCount"in cd&&(je=cd.colorCount|0),"colorType"in cd&&(cb=cd.colorType),"colorFormat"in cd&&(yd=cd.colorFormat));"depth"in cd&&(Jc.depth=cd.depth);"stencil"in cd&&(Jc.stencil=cd.stencil);"depthStencil"in cd&&(Jc.depthStencil=cd.depthStencil)}else sd=1;if(ud)if(Array.isArray(ud))for(cd=
[],yd=0;yd<ud.length;++yd)cd[yd]=ud[yd];else cd=[ud];else for(cd=Array(je),ud={radius:sd,format:yd,type:cb},yd=0;yd<je;++yd)cd[yd]=Mc.createCube(ud);Jc.color=Array(cd.length);for(yd=0;yd<cd.length;++yd)je=cd[yd],sd=sd||je.width,Jc.color[yd]={target:34069,data:cd[yd]};for(yd=0;6>yd;++yd){for(je=0;je<cd.length;++je)Jc.color[je].target=34069+yd;0<yd&&(Jc.depth=wd[0].depth,Jc.stencil=wd[0].stencil,Jc.depthStencil=wd[0].depthStencil);if(wd[yd])wd[yd](Jc);else wd[yd]=Dc(Jc)}return ua(rd,{width:sd,height:sd,
color:cd})}var wd=Array(6);rd(Yc);return ua(rd,{faces:wd,resize:function(cd){var Jc=cd|0;if(Jc===rd.width)return rd;var sd=rd.color;for(cd=0;cd<sd.length;++cd)sd[cd].resize(Jc);for(cd=0;6>cd;++cd)wd[cd].resize(Jc);rd.width=rd.height=Jc;return rd},_reglType:"framebufferCube",destroy:function(){wd.forEach(function(cd){cd.destroy()})}})},clear:function(){eb(nd).forEach(Vb)},restore:function(){ic.cur=null;ic.next=null;ic.dirty=!0;eb(nd).forEach(function(Yc){Yc.framebuffer=tb.createFramebuffer();Zb(Yc)})}})}
function U(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function P(tb,Xb,uc,Mc,Rc){function fd(Eb){if(Eb!==Gb.currentVAO){var Vb=Xb.oes_vertex_array_object;Eb?Vb.bindVertexArrayOES(Eb.vao):Vb.bindVertexArrayOES(null);Gb.currentVAO=Eb}}function sb(Eb){if(Eb!==Gb.currentVAO){if(Eb)Eb.bindAttrs();else for(var Vb=Xb.angle_instanced_arrays,Zb=0;Zb<ac.length;++Zb){var Dc=ac[Zb];Dc.buffer?(tb.enableVertexAttribArray(Zb),
tb.vertexAttribPointer(Zb,Dc.size,Dc.type,Dc.normalized,Dc.stride,Dc.offfset),Vb&&Vb.vertexAttribDivisorANGLE(Zb,Dc.divisor)):(tb.disableVertexAttribArray(Zb),tb.vertexAttrib4f(Zb,Dc.x,Dc.y,Dc.z,Dc.w))}Gb.currentVAO=Eb}}function xb(){eb(yb).forEach(function(Eb){Eb.destroy()})}function kc(){this.id=++Tb;this.attributes=[];var Eb=Xb.oes_vertex_array_object;this.vao=Eb?Eb.createVertexArrayOES():null;yb[this.id]=this;this.buffers=[]}function nc(){Xb.oes_vertex_array_object&&eb(yb).forEach(function(Eb){Eb.refresh()})}
var Kc=uc.maxAttributes,ac=Array(Kc);for(uc=0;uc<Kc;++uc)ac[uc]=new U;var Tb=0,yb={},Gb={Record:U,scope:{},state:ac,currentVAO:null,targetVAO:null,restore:Xb.oes_vertex_array_object?nc:function(){},createVAO:function(Eb){function Vb(Dc){for(var ic=0;ic<Zb.buffers.length;++ic)Zb.buffers[ic].destroy();Zb.buffers.length=0;ic=Zb.attributes;ic.length=Dc.length;for(var Bc=0;Bc<Dc.length;++Bc){var Sc=Dc[Bc],Ic=ic[Bc]=new U;Array.isArray(Sc)||Ja(Sc)||r(Sc)?(Sc=Rc.create(Sc,34962,!1,!0),Ic.buffer=Rc.getBuffer(Sc),
Ic.size=Ic.buffer.dimension|0,Ic.normalized=!1,Ic.type=Ic.buffer.dtype,Ic.offset=0,Ic.stride=0,Ic.divisor=0,Ic.state=1,Zb.buffers.push(Sc)):Rc.getBuffer(Sc)?(Ic.buffer=Rc.getBuffer(Sc),Ic.size=Ic.buffer.dimension|0,Ic.normalized=!1,Ic.type=Ic.buffer.dtype,Ic.offset=0,Ic.stride=0,Ic.divisor=0,Ic.state=1):Rc.getBuffer(Sc.buffer)?(Ic.buffer=Rc.getBuffer(Sc.buffer),Ic.size=(+Sc.size||Ic.buffer.dimension)|0,Ic.normalized=!!Sc.normalized||!1,Ic.type="type"in Sc?Ea[Sc.type]:Ic.buffer.dtype,Ic.offset=(Sc.offset||
0)|0,Ic.stride=(Sc.stride||0)|0,Ic.divisor=(Sc.divisor||0)|0,Ic.state=1):"x"in Sc&&(Ic.x=+Sc.x||0,Ic.y=+Sc.y||0,Ic.z=+Sc.z||0,Ic.w=+Sc.w||0,Ic.state=2)}Zb.refresh();return Vb}var Zb=new kc;Mc.vaoCount+=1;Vb.destroy=function(){Zb.destroy()};Vb._vao=Zb;Vb._reglType="vao";return Vb(Eb)},getVAO:function(Eb){return"function"===typeof Eb&&Eb._vao?Eb._vao:null},destroyBuffer:function(Eb){for(var Vb=0;Vb<ac.length;++Vb){var Zb=ac[Vb];Zb.buffer===Eb&&(tb.disableVertexAttribArray(Vb),Zb.buffer=null)}},setVAO:Xb.oes_vertex_array_object?
fd:sb,clear:Xb.oes_vertex_array_object?xb:function(){}};kc.prototype.bindAttrs=function(){for(var Eb=Xb.angle_instanced_arrays,Vb=this.attributes,Zb=0;Zb<Vb.length;++Zb){var Dc=Vb[Zb];Dc.buffer?(tb.enableVertexAttribArray(Zb),tb.bindBuffer(34962,Dc.buffer.buffer),tb.vertexAttribPointer(Zb,Dc.size,Dc.type,Dc.normalized,Dc.stride,Dc.offset),Eb&&Eb.vertexAttribDivisorANGLE(Zb,Dc.divisor)):(tb.disableVertexAttribArray(Zb),tb.vertexAttrib4f(Zb,Dc.x,Dc.y,Dc.z,Dc.w))}for(Eb=Vb.length;Eb<Kc;++Eb)tb.disableVertexAttribArray(Eb)};
kc.prototype.refresh=function(){var Eb=Xb.oes_vertex_array_object;Eb&&(Eb.bindVertexArrayOES(this.vao),this.bindAttrs(),Gb.currentVAO=this)};kc.prototype.destroy=function(){if(this.vao){var Eb=Xb.oes_vertex_array_object;this===Gb.currentVAO&&(Gb.currentVAO=null,Eb.bindVertexArrayOES(null));Eb.deleteVertexArrayOES(this.vao);this.vao=null}yb[this.id]&&(delete yb[this.id],--Mc.vaoCount)};return Gb}function V(tb,Xb,uc,Mc){function Rc(Gb,Eb,Vb,Zb){this.name=Gb;this.id=Eb;this.location=Vb;this.info=Zb}
function fd(Gb,Eb){for(var Vb=0;Vb<Gb.length;++Vb)if(Gb[Vb].id===Eb.id){Gb[Vb].location=Eb.location;return}Gb.push(Eb)}function sb(Gb,Eb,Vb){Vb=35632===Gb?nc:Kc;var Zb=Vb[Eb];if(!Zb){var Dc=Xb.str(Eb);Zb=tb.createShader(Gb);tb.shaderSource(Zb,Dc);tb.compileShader(Zb);Vb[Eb]=Zb}return Zb}function xb(Gb,Eb){this.id=yb++;this.fragId=Gb;this.vertId=Eb;this.program=null;this.uniforms=[];this.attributes=[];Mc.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function kc(Gb,Eb,Vb){var Zb=sb(35632,
Gb.fragId);var Dc=sb(35633,Gb.vertId);Eb=Gb.program=tb.createProgram();tb.attachShader(Eb,Zb);tb.attachShader(Eb,Dc);if(Vb)for(Zb=0;Zb<Vb.length;++Zb)Dc=Vb[Zb],tb.bindAttribLocation(Eb,Dc[0],Dc[1]);tb.linkProgram(Eb);Dc=tb.getProgramParameter(Eb,35718);Mc.profile&&(Gb.stats.uniformsCount=Dc);var ic=Gb.uniforms;for(Zb=0;Zb<Dc;++Zb)if(Vb=tb.getActiveUniform(Eb,Zb))if(1<Vb.size)for(var Bc=0;Bc<Vb.size;++Bc){var Sc=Vb.name.replace("[0]","["+Bc+"]");fd(ic,new Rc(Sc,Xb.id(Sc),tb.getUniformLocation(Eb,Sc),
Vb))}else fd(ic,new Rc(Vb.name,Xb.id(Vb.name),tb.getUniformLocation(Eb,Vb.name),Vb));Dc=tb.getProgramParameter(Eb,35721);Mc.profile&&(Gb.stats.attributesCount=Dc);Gb=Gb.attributes;for(Zb=0;Zb<Dc;++Zb)(Vb=tb.getActiveAttrib(Eb,Zb))&&fd(Gb,new Rc(Vb.name,Xb.id(Vb.name),tb.getAttribLocation(Eb,Vb.name),Vb))}var nc={},Kc={},ac={},Tb=[],yb=0;Mc.profile&&(uc.getMaxUniformsCount=function(){var Gb=0;Tb.forEach(function(Eb){Eb.stats.uniformsCount>Gb&&(Gb=Eb.stats.uniformsCount)});return Gb},uc.getMaxAttributesCount=
function(){var Gb=0;Tb.forEach(function(Eb){Eb.stats.attributesCount>Gb&&(Gb=Eb.stats.attributesCount)});return Gb});return{clear:function(){var Gb=tb.deleteShader.bind(tb);eb(nc).forEach(Gb);nc={};eb(Kc).forEach(Gb);Kc={};Tb.forEach(function(Eb){tb.deleteProgram(Eb.program)});Tb.length=0;ac={};uc.shaderCount=0},program:function(Gb,Eb,Vb,Zb){var Dc=ac[Eb];Dc||(Dc=ac[Eb]={});var ic=Dc[Gb];if(ic&&!Zb)return ic;Eb=new xb(Eb,Gb);uc.shaderCount++;kc(Eb,Vb,Zb);ic||(Dc[Gb]=Eb);Tb.push(Eb);return Eb},restore:function(){nc=
{};Kc={};for(var Gb=0;Gb<Tb.length;++Gb)kc(Tb[Gb],null,Tb[Gb].attributes.map(function(Eb){return[Eb.location,Eb.name]}))},shader:sb,frag:-1,vert:-1}}function Y(tb,Xb,uc,Mc,Rc,fd,sb){function xb(nc){var Kc=null===Xb.next?5121:Xb.next.colorAttachments[0].texture._texture.type;var ac=0,Tb=0,yb=Mc.framebufferWidth,Gb=Mc.framebufferHeight,Eb=null;Ja(nc)?Eb=nc:nc&&(ac=nc.x|0,Tb=nc.y|0,yb=(nc.width||Mc.framebufferWidth-ac)|0,Gb=(nc.height||Mc.framebufferHeight-Tb)|0,Eb=nc.data||null);uc();nc=yb*Gb*4;Eb||
(5121===Kc?Eb=new Uint8Array(nc):5126===Kc&&(Eb=Eb||new Float32Array(nc)));tb.pixelStorei(3333,4);tb.readPixels(ac,Tb,yb,Gb,6408,Kc,Eb);return Eb}function kc(nc){var Kc;Xb.setFBO({framebuffer:nc.framebuffer},function(){Kc=xb(nc)});return Kc}return function(nc){return nc&&"framebuffer"in nc?kc(nc):xb(nc)}}function ba(tb){return Array.prototype.slice.call(tb)}function ea(tb){return ba(tb).join("")}function ca(){function tb(){var xb=[],kc=[];return ua(function(){xb.push.apply(xb,ba(arguments))},{def:function(){var nc=
"v"+uc++;kc.push(nc);0<arguments.length&&(xb.push(nc,"\x3d"),xb.push.apply(xb,ba(arguments)),xb.push(";"));return nc},toString:function(){return ea([0<kc.length?"var "+kc.join(",")+";":"",ea(xb)])}})}function Xb(){function xb(Tb,yb){nc(Tb,yb,"\x3d",kc.def(Tb,yb),";")}var kc=tb(),nc=tb(),Kc=kc.toString,ac=nc.toString;return ua(function(){kc.apply(kc,ba(arguments))},{def:kc.def,entry:kc,exit:nc,save:xb,set:function(Tb,yb,Gb){xb(Tb,yb);kc(Tb,yb,"\x3d",Gb,";")},toString:function(){return Kc()+ac()}})}
var uc=0,Mc=[],Rc=[],fd=tb(),sb={};return{global:fd,link:function(xb){for(var kc=0;kc<Rc.length;++kc)if(Rc[kc]===xb)return Mc[kc];kc="g"+uc++;Mc.push(kc);Rc.push(xb);return kc},block:tb,proc:function(xb,kc){function nc(){var yb="a"+Kc.length;Kc.push(yb);return yb}var Kc=[];kc=kc||0;for(var ac=0;ac<kc;++ac)nc();ac=Xb();var Tb=ac.toString;return sb[xb]=ua(ac,{arg:nc,toString:function(){return ea(["function(",Kc.join(),"){",Tb(),"}"])}})},scope:Xb,cond:function(){var xb=ea(arguments),kc=Xb(),nc=Xb(),
Kc=kc.toString,ac=nc.toString;return ua(kc,{then:function(){kc.apply(kc,ba(arguments));return this},"else":function(){nc.apply(nc,ba(arguments));return this},toString:function(){var Tb=ac();Tb&&(Tb="else{"+Tb+"}");return ea(["if(",xb,"){",Kc(),"}",Tb])}})},compile:function(){var xb=['"use strict";',fd,"return {"];Object.keys(sb).forEach(function(nc){xb.push('"',nc,'":',sb[nc].toString(),",")});xb.push("}");var kc=ea(xb).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,
Mc.concat(kc)).apply(null,Rc)}}}function ia(tb){return Array.isArray(tb)||Ja(tb)||r(tb)}function fa(tb){return tb.sort(function(Xb,uc){return"viewport"===Xb?-1:"viewport"===uc?1:Xb<uc?-1:1})}function ha(tb,Xb,uc,Mc){this.thisDep=tb;this.contextDep=Xb;this.propDep=uc;this.append=Mc}function na(tb){return tb&&!(tb.thisDep||tb.contextDep||tb.propDep)}function pa(tb){return new ha(!1,!1,!1,tb)}function ra(tb,Xb){var uc=tb.type;return 0===uc?(uc=tb.data.length,new ha(!0,1<=uc,2<=uc,Xb)):4===uc?(uc=tb.data,
new ha(uc.thisDep,uc.contextDep,uc.propDep,Xb)):new ha(3===uc,2===uc,1===uc,Xb)}function ta(tb,Xb,uc,Mc,Rc,fd,sb,xb,kc,nc,Kc,ac,Tb,yb,Gb){function Eb(Ab){return Ab.replace(".","_")}function Vb(Ab,Nb,ec){var xc=Eb(Ab);Fb.push(Ab);wb[xc]=Ua[xc]=!!ec;Wb[xc]=Nb}function Zb(Ab,Nb,ec){var xc=Eb(Ab);Fb.push(Ab);Array.isArray(ec)?(Ua[xc]=ec.slice(),wb[xc]=ec.slice()):Ua[xc]=wb[xc]=ec;lc[xc]=Nb}function Dc(){var Ab=ca(),Nb=Ab.link,ec=Ab.global;Ab.id=Qc++;Ab.batchId="0";var xc=Nb(wc),yc=Ab.shared={props:"a0"};
Object.keys(wc).forEach(function(sc){yc[sc]=ec.def(xc,".",sc)});var Gc=Ab.next={},Cc=Ab.current={};Object.keys(lc).forEach(function(sc){Array.isArray(Ua[sc])&&(Gc[sc]=ec.def(yc.next,".",sc),Cc[sc]=ec.def(yc.current,".",sc))});var vc=Ab.constants={};Object.keys(cc).forEach(function(sc){vc[sc]=ec.def(JSON.stringify(cc[sc]))});Ab.invoke=function(sc,qc){switch(qc.type){case 0:var id=["this",yc.context,yc.props,Ab.batchId];return sc.def(Nb(qc.data),".call(",id.slice(0,Math.max(qc.data.length+1,4)),")");
case 1:return sc.def(yc.props,qc.data);case 2:return sc.def(yc.context,qc.data);case 3:return sc.def("this",qc.data);case 4:return qc.data.append(Ab,sc),qc.data.ref}};Ab.attribCache={};var oc={};Ab.scopeAttrib=function(sc){sc=Xb.id(sc);if(sc in oc)return oc[sc];var qc=nc.scope[sc];qc||(qc=nc.scope[sc]=new $e);return oc[sc]=Nb(qc)};return Ab}function ic(Ab){var Nb=Ab["static"];Ab=Ab.dynamic;if("profile"in Nb){var ec=!!Nb.profile;var xc=pa(function(Gc,Cc){return ec});xc.enable=ec}else if("profile"in
Ab){var yc=Ab.profile;xc=ra(yc,function(Gc,Cc){return Gc.invoke(Cc,yc)})}return xc}function Bc(Ab,Nb){Nb=Ab["static"];Ab=Ab.dynamic;if("framebuffer"in Nb){var ec=Nb.framebuffer;return ec?(ec=xb.getFramebuffer(ec),pa(function(yc,Gc){var Cc=yc.link(ec);yc=yc.shared;Gc.set(yc.framebuffer,".next",Cc);yc=yc.context;Gc.set(yc,".framebufferWidth",Cc+".width");Gc.set(yc,".framebufferHeight",Cc+".height");return Cc})):pa(function(yc,Gc){yc=yc.shared;Gc.set(yc.framebuffer,".next","null");yc=yc.context;Gc.set(yc,
".framebufferWidth",yc+".drawingBufferWidth");Gc.set(yc,".framebufferHeight",yc+".drawingBufferHeight");return"null"})}if("framebuffer"in Ab){var xc=Ab.framebuffer;return ra(xc,function(yc,Gc){var Cc=yc.invoke(Gc,xc);yc=yc.shared;var vc=yc.framebuffer;Cc=Gc.def(vc,".getFramebuffer(",Cc,")");Gc.set(vc,".next",Cc);yc=yc.context;Gc.set(yc,".framebufferWidth",Cc+"?"+Cc+".width:"+yc+".drawingBufferWidth");Gc.set(yc,".framebufferHeight",Cc+"?"+Cc+".height:"+yc+".drawingBufferHeight");return Cc})}return null}
function Sc(Ab,Nb,ec){function xc(vc){if(vc in yc){var oc=yc[vc];vc=!0;var sc=oc.x|0,qc=oc.y|0,id,td;"width"in oc?id=oc.width|0:vc=!1;"height"in oc?td=oc.height|0:vc=!1;return new ha(!vc&&Nb&&Nb.thisDep,!vc&&Nb&&Nb.contextDep,!vc&&Nb&&Nb.propDep,function(Dd,od){Dd=Dd.shared.context;var re=id;"width"in oc||(re=od.def(Dd,".","framebufferWidth","-",sc));var ue=td;"height"in oc||(ue=od.def(Dd,".","framebufferHeight","-",qc));return[sc,qc,re,ue]})}if(vc in Gc){var qd=Gc[vc];vc=ra(qd,function(Dd,od){var re=
Dd.invoke(od,qd);Dd=Dd.shared.context;var ue=od.def(re,".x|0"),De=od.def(re,".y|0"),ne=od.def('"width" in ',re,"?",re,".width|0:","(",Dd,".","framebufferWidth","-",ue,")");re=od.def('"height" in ',re,"?",re,".height|0:","(",Dd,".","framebufferHeight","-",De,")");return[ue,De,ne,re]});Nb&&(vc.thisDep=vc.thisDep||Nb.thisDep,vc.contextDep=vc.contextDep||Nb.contextDep,vc.propDep=vc.propDep||Nb.propDep);return vc}return Nb?new ha(Nb.thisDep,Nb.contextDep,Nb.propDep,function(Dd,od){Dd=Dd.shared.context;
return[0,0,od.def(Dd,".","framebufferWidth"),od.def(Dd,".","framebufferHeight")]}):null}var yc=Ab["static"],Gc=Ab.dynamic;if(Ab=xc("viewport")){var Cc=Ab;Ab=new ha(Ab.thisDep,Ab.contextDep,Ab.propDep,function(vc,oc){var sc=Cc.append(vc,oc);vc=vc.shared.context;oc.set(vc,".viewportWidth",sc[2]);oc.set(vc,".viewportHeight",sc[3]);return sc})}return{viewport:Ab,scissor_box:xc("scissor.box")}}function Ic(Ab,Nb){Ab=Ab["static"];if("string"===typeof Ab.frag&&"string"===typeof Ab.vert){if(0<Object.keys(Nb.dynamic).length)return null;
Ab=Nb["static"];Nb=Object.keys(Ab);if(0<Nb.length&&"number"===typeof Ab[Nb[0]]){for(var ec=[],xc=0;xc<Nb.length;++xc)ec.push([Ab[Nb[xc]]|0,Nb[xc]]);return ec}}return null}function $c(Ab,Nb,ec){function xc(sc){if(sc in yc){var qc=Xb.id(yc[sc]);sc=pa(function(){return qc});sc.id=qc;return sc}if(sc in Gc){var id=Gc[sc];return ra(id,function(td,qd){var Dd=td.invoke(qd,id);return qd.def(td.shared.strings,".id(",Dd,")")})}return null}var yc=Ab["static"],Gc=Ab.dynamic,Cc=xc("frag"),vc=xc("vert"),oc=null;
na(Cc)&&na(vc)?(oc=Kc.program(vc.id,Cc.id,null,ec),Ab=pa(function(sc,qc){return sc.link(oc)})):Ab=new ha(Cc&&Cc.thisDep||vc&&vc.thisDep,Cc&&Cc.contextDep||vc&&vc.contextDep,Cc&&Cc.propDep||vc&&vc.propDep,function(sc,qc){var id=sc.shared.shader;var td=Cc?Cc.append(sc,qc):qc.def(id,".","frag");sc=vc?vc.append(sc,qc):qc.def(id,".","vert");return qc.def(id+".program("+sc+","+td+")")});return{frag:Cc,vert:vc,progVar:Ab,program:oc}}function nd(Ab,Nb){function ec(vc,oc){if(vc in xc){var sc=xc[vc]|0;return pa(function(id,
td){oc&&(id.OFFSET=sc);return sc})}if(vc in yc){var qc=yc[vc];return ra(qc,function(id,td){td=id.invoke(td,qc);oc&&(id.OFFSET=td);return td})}return oc&&Gc?pa(function(id,td){id.OFFSET="0";return 0}):null}var xc=Ab["static"],yc=Ab.dynamic,Gc=function(){if("elements"in xc){var vc=xc.elements;ia(vc)?vc=fd.getElements(fd.create(vc,!0)):vc&&(vc=fd.getElements(vc));var oc=pa(function(qc,id){return vc?(id=qc.link(vc),qc.ELEMENTS=id):qc.ELEMENTS=null});oc.value=vc;return oc}if("elements"in yc){var sc=yc.elements;
return ra(sc,function(qc,id){var td=qc.shared,qd=td.isBufferArgs;td=td.elements;var Dd=qc.invoke(id,sc),od=id.def("null");qd=id.def(qd,"(",Dd,")");Dd=qc.cond(qd).then(od,"\x3d",td,".createStream(",Dd,");")["else"](od,"\x3d",td,".getElements(",Dd,");");id.entry(Dd);id.exit(qc.cond(qd).then(td,".destroyStream(",od,");"));return qc.ELEMENTS=od})}return null}(),Cc=ec("offset",!0);return{elements:Gc,primitive:function(){if("primitive"in xc){var vc=xc.primitive;return pa(function(sc,qc){return Fa[vc]})}if("primitive"in
yc){var oc=yc.primitive;return ra(oc,function(sc,qc){var id=sc.constants.primTypes;sc=sc.invoke(qc,oc);return qc.def(id,"[",sc,"]")})}return Gc?na(Gc)?Gc.value?pa(function(sc,qc){return qc.def(sc.ELEMENTS,".primType")}):pa(function(){return 4}):new ha(Gc.thisDep,Gc.contextDep,Gc.propDep,function(sc,qc){sc=sc.ELEMENTS;return qc.def(sc,"?",sc,".primType:",4)}):null}(),count:function(){if("count"in xc){var vc=xc.count|0;return pa(function(){return vc})}if("count"in yc){var oc=yc.count;return ra(oc,function(sc,
qc){return sc.invoke(qc,oc)})}return Gc?na(Gc)?Gc?Cc?new ha(Cc.thisDep,Cc.contextDep,Cc.propDep,function(sc,qc){return qc.def(sc.ELEMENTS,".vertCount-",sc.OFFSET)}):pa(function(sc,qc){return qc.def(sc.ELEMENTS,".vertCount")}):pa(function(){return-1}):new ha(Gc.thisDep||Cc.thisDep,Gc.contextDep||Cc.contextDep,Gc.propDep||Cc.propDep,function(sc,qc){var id=sc.ELEMENTS;return sc.OFFSET?qc.def(id,"?",id,".vertCount-",sc.OFFSET,":-1"):qc.def(id,"?",id,".vertCount:-1")}):null}(),instances:ec("instances",
!1),offset:Cc}}function Yc(Ab,Nb){var ec=Ab["static"],xc=Ab.dynamic,yc={};Fb.forEach(function(Gc){function Cc(oc,sc){if(Gc in ec){var qc=oc(ec[Gc]);yc[vc]=pa(function(){return qc})}else if(Gc in xc){var id=xc[Gc];yc[vc]=ra(id,function(td,qd){return sc(td,qd,td.invoke(qd,id))})}}var vc=Eb(Gc);switch(Gc){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return Cc(function(oc){return oc},
function(oc,sc,qc){return qc});case "depth.func":return Cc(function(oc){return Uc[oc]},function(oc,sc,qc){return sc.def(oc.constants.compareFuncs,"[",qc,"]")});case "depth.range":return Cc(function(oc){return oc},function(oc,sc,qc){oc=sc.def("+",qc,"[0]");sc=sc.def("+",qc,"[1]");return[oc,sc]});case "blend.func":return Cc(function(oc){return[Ac["srcRGB"in oc?oc.srcRGB:oc.src],Ac["dstRGB"in oc?oc.dstRGB:oc.dst],Ac["srcAlpha"in oc?oc.srcAlpha:oc.src],Ac["dstAlpha"in oc?oc.dstAlpha:oc.dst]]},function(oc,
sc,qc){function id(od,re){return sc.def('"',od,re,'" in ',qc,"?",qc,".",od,re,":",qc,".",od)}oc=oc.constants.blendFuncs;var td=id("src","RGB"),qd=id("dst","RGB");td=sc.def(oc,"[",td,"]");var Dd=sc.def(oc,"[",id("src","Alpha"),"]");qd=sc.def(oc,"[",qd,"]");oc=sc.def(oc,"[",id("dst","Alpha"),"]");return[td,qd,Dd,oc]});case "blend.equation":return Cc(function(oc){if("string"===typeof oc)return[Oe[oc],Oe[oc]];if("object"===typeof oc)return[Oe[oc.rgb],Oe[oc.alpha]]},function(oc,sc,qc){var id=oc.constants.blendEquations,
td=sc.def(),qd=sc.def();oc=oc.cond("typeof ",qc,'\x3d\x3d\x3d"string"');oc.then(td,"\x3d",qd,"\x3d",id,"[",qc,"];");oc["else"](td,"\x3d",id,"[",qc,".rgb];",qd,"\x3d",id,"[",qc,".alpha];");sc(oc);return[td,qd]});case "blend.color":return Cc(function(oc){return f(4,function(sc){return+oc[sc]})},function(oc,sc,qc){return f(4,function(id){return sc.def("+",qc,"[",id,"]")})});case "stencil.mask":return Cc(function(oc){return oc|0},function(oc,sc,qc){return sc.def(qc,"|0")});case "stencil.func":return Cc(function(oc){return[Uc[oc.cmp||
"keep"],oc.ref||0,"mask"in oc?oc.mask:-1]},function(oc,sc,qc){oc=sc.def('"cmp" in ',qc,"?",oc.constants.compareFuncs,"[",qc,".cmp]",":",7680);var id=sc.def(qc,".ref|0");sc=sc.def('"mask" in ',qc,"?",qc,".mask|0:-1");return[oc,id,sc]});case "stencil.opFront":case "stencil.opBack":return Cc(function(oc){return["stencil.opBack"===Gc?1029:1028,Nc[oc.fail||"keep"],Nc[oc.zfail||"keep"],Nc[oc.zpass||"keep"]]},function(oc,sc,qc){function id(qd){return sc.def('"',qd,'" in ',qc,"?",td,"[",qc,".",qd,"]:",7680)}
var td=oc.constants.stencilOps;return["stencil.opBack"===Gc?1029:1028,id("fail"),id("zfail"),id("zpass")]});case "polygonOffset.offset":return Cc(function(oc){return[oc.factor|0,oc.units|0]},function(oc,sc,qc){oc=sc.def(qc,".factor|0");sc=sc.def(qc,".units|0");return[oc,sc]});case "cull.face":return Cc(function(oc){var sc=0;"front"===oc?sc=1028:"back"===oc&&(sc=1029);return sc},function(oc,sc,qc){return sc.def(qc,'\x3d\x3d\x3d"front"?',1028,":",1029)});case "lineWidth":return Cc(function(oc){return oc},
function(oc,sc,qc){return qc});case "frontFace":return Cc(function(oc){return gd[oc]},function(oc,sc,qc){return sc.def(qc+'\x3d\x3d\x3d"cw"?2304:2305')});case "colorMask":return Cc(function(oc){return oc.map(function(sc){return!!sc})},function(oc,sc,qc){return f(4,function(id){return"!!"+qc+"["+id+"]"})});case "sample.coverage":return Cc(function(oc){return["value"in oc?oc.value:1,!!oc.invert]},function(oc,sc,qc){oc=sc.def('"value" in ',qc,"?+",qc,".value:1");sc=sc.def("!!",qc,".invert");return[oc,
sc]})}});return yc}function rd(Ab,Nb){var ec=Ab["static"],xc=Ab.dynamic,yc={};Object.keys(ec).forEach(function(Gc){var Cc=ec[Gc];if("number"===typeof Cc||"boolean"===typeof Cc)var vc=pa(function(){return Cc});else if("function"===typeof Cc){var oc=Cc._reglType;if("texture2d"===oc||"textureCube"===oc)vc=pa(function(sc){return sc.link(Cc)});else if("framebuffer"===oc||"framebufferCube"===oc)vc=pa(function(sc){return sc.link(Cc.color[0])})}else t(Cc)&&(vc=pa(function(sc){return sc.global.def("[",f(Cc.length,
function(qc){return Cc[qc]}),"]")}));vc.value=Cc;yc[Gc]=vc});Object.keys(xc).forEach(function(Gc){var Cc=xc[Gc];yc[Gc]=ra(Cc,function(vc,oc){return vc.invoke(oc,Cc)})});return yc}function wd(Ab,Nb){var ec=Ab["static"],xc=Ab.dynamic,yc={};Object.keys(ec).forEach(function(Gc){var Cc=ec[Gc],vc=Xb.id(Gc),oc=new $e;if(ia(Cc))oc.state=1,oc.buffer=Rc.getBuffer(Rc.create(Cc,34962,!1,!0)),oc.type=0;else{var sc=Rc.getBuffer(Cc);if(sc)oc.state=1,oc.buffer=sc,oc.type=0;else if("constant"in Cc){var qc=Cc.constant;
oc.buffer="null";oc.state=2;"number"===typeof qc?oc.x=qc:gc.forEach(function(re,ue){ue<qc.length&&(oc[re]=qc[ue])})}else{sc=ia(Cc.buffer)?Rc.getBuffer(Rc.create(Cc.buffer,34962,!1,!0)):Rc.getBuffer(Cc.buffer);var id=Cc.offset|0,td=Cc.stride|0,qd=Cc.size|0,Dd=!!Cc.normalized,od=0;"type"in Cc&&(od=Ea[Cc.type]);Cc=Cc.divisor|0;oc.buffer=sc;oc.state=1;oc.size=qd;oc.normalized=Dd;oc.type=od||sc.dtype;oc.offset=id;oc.stride=td;oc.divisor=Cc}}yc[Gc]=pa(function(re,ue){ue=re.attribCache;if(vc in ue)return ue[vc];
var De={isStream:!1};Object.keys(oc).forEach(function(ne){De[ne]=oc[ne]});oc.buffer&&(De.buffer=re.link(oc.buffer),De.type=De.type||De.buffer+".dtype");return ue[vc]=De})});Object.keys(xc).forEach(function(Gc){var Cc=xc[Gc];yc[Gc]=ra(Cc,function(vc,oc){function sc(ue){oc(qd[ue],"\x3d",qc,".",ue,"|0;")}var qc=vc.invoke(oc,Cc),id=vc.shared;vc=vc.constants;var td=id.isBufferArgs;id=id.buffer;var qd={isStream:oc.def(!1)},Dd=new $e;Dd.state=1;Object.keys(Dd).forEach(function(ue){qd[ue]=oc.def(""+Dd[ue])});
var od=qd.buffer,re=qd.type;oc("if(",td,"(",qc,")){",qd.isStream,"\x3dtrue;",od,"\x3d",id,".createStream(",34962,",",qc,");",re,"\x3d",od,".dtype;","}else{",od,"\x3d",id,".getBuffer(",qc,");","if(",od,"){",re,"\x3d",od,".dtype;",'}else if("constant" in ',qc,"){",qd.state,"\x3d",2,";","if(typeof "+qc+'.constant \x3d\x3d\x3d "number"){',qd[gc[0]],"\x3d",qc,".constant;",gc.slice(1).map(function(ue){return qd[ue]}).join("\x3d"),"\x3d0;","}else{",gc.map(function(ue,De){return qd[ue]+"\x3d"+qc+".constant.length\x3e"+
De+"?"+qc+".constant["+De+"]:0;"}).join(""),"}}else{","if(",td,"(",qc,".buffer)){",od,"\x3d",id,".createStream(",34962,",",qc,".buffer);","}else{",od,"\x3d",id,".getBuffer(",qc,".buffer);","}",re,'\x3d"type" in ',qc,"?",vc.glTypes,"[",qc,".type]:",od,".dtype;",qd.normalized,"\x3d!!",qc,".normalized;");sc("size");sc("offset");sc("stride");sc("divisor");oc("}}");oc.exit("if(",qd.isStream,"){",id,".destroyStream(",od,");","}");return qd})});return yc}function cd(Ab,Nb){Nb=Ab["static"];Ab=Ab.dynamic;
if("vao"in Nb){var ec=Nb.vao;null!==ec&&null===nc.getVAO(ec)&&(ec=nc.createVAO(ec));return pa(function(yc){return yc.link(nc.getVAO(ec))})}if("vao"in Ab){var xc=Ab.vao;return ra(xc,function(yc,Gc){var Cc=yc.invoke(Gc,xc);return Gc.def(yc.shared.vao+".getVAO("+Cc+")")})}return null}function Jc(Ab){var Nb=Ab["static"],ec=Ab.dynamic,xc={};Object.keys(Nb).forEach(function(yc){var Gc=Nb[yc];xc[yc]=pa(function(Cc,vc){return"number"===typeof Gc||"boolean"===typeof Gc?""+Gc:Cc.link(Gc)})});Object.keys(ec).forEach(function(yc){var Gc=
ec[yc];xc[yc]=ra(Gc,function(Cc,vc){return Cc.invoke(vc,Gc)})});return xc}function sd(Ab,Nb,ec,xc,yc){function Gc(od){var re=oc[od];re&&(qc[od]=re)}var Cc=Ic(Ab,Nb),vc=Bc(Ab,yc),oc=Sc(Ab,vc,yc),sc=nd(Ab,yc),qc=Yc(Ab,yc),id=$c(Ab,yc,Cc);Gc("viewport");Gc(Eb("scissor.box"));var td=0<Object.keys(qc).length;vc={framebuffer:vc,draw:sc,shader:id,state:qc,dirty:td,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};vc.profile=ic(Ab,yc);vc.uniforms=rd(ec,yc);vc.drawVAO=vc.scopeVAO=cd(Ab,yc);if(!vc.drawVAO&&
id.program&&!Cc&&uc.angle_instanced_arrays){var qd=!0;Ab=id.program.attributes.map(function(od){od=Nb["static"][od];qd=qd&&!!od;return od});if(qd&&0<Ab.length){var Dd=nc.getVAO(nc.createVAO(Ab));vc.drawVAO=new ha(null,null,null,function(od,re){return od.link(Dd)});vc.useVAO=!0}}Cc?vc.useVAO=!0:vc.attributes=wd(Nb,yc);vc.context=Jc(xc,yc);return vc}function ud(Ab,Nb,ec){var xc=Ab.shared.context,yc=Ab.scope();Object.keys(ec).forEach(function(Gc){Nb.save(xc,"."+Gc);yc(xc,".",Gc,"\x3d",ec[Gc].append(Ab,
Nb),";")});Nb(yc)}function yd(Ab,Nb,ec,xc){var yc=Ab.shared,Gc=yc.gl,Cc=yc.framebuffer,vc;Vc&&(vc=Nb.def(yc.extensions,".webgl_draw_buffers"));var oc=Ab.constants;yc=oc.drawBuffer;oc=oc.backBuffer;Ab=ec?ec.append(Ab,Nb):Nb.def(Cc,".next");xc||Nb("if(",Ab,"!\x3d\x3d",Cc,".cur){");Nb("if(",Ab,"){",Gc,".bindFramebuffer(",36160,",",Ab,".framebuffer);");Vc&&Nb(vc,".drawBuffersWEBGL(",yc,"[",Ab,".colorAttachments.length]);");Nb("}else{",Gc,".bindFramebuffer(",36160,",null);");Vc&&Nb(vc,".drawBuffersWEBGL(",
oc,");");Nb("}",Cc,".cur\x3d",Ab,";");xc||Nb("}")}function cb(Ab,Nb,ec){var xc=Ab.shared,yc=xc.gl,Gc=Ab.current,Cc=Ab.next,vc=xc.current,oc=xc.next,sc=Ab.cond(vc,".dirty");Fb.forEach(function(qc){qc=Eb(qc);if(!(qc in ec.state))if(qc in Cc){var id=Cc[qc];var td=Gc[qc];var qd=f(Ua[qc].length,function(Dd){return sc.def(id,"[",Dd,"]")});sc(Ab.cond(qd.map(function(Dd,od){return Dd+"!\x3d\x3d"+td+"["+od+"]"}).join("||")).then(yc,".",lc[qc],"(",qd,");",qd.map(function(Dd,od){return td+"["+od+"]\x3d"+Dd}).join(";"),
";"))}else id=sc.def(oc,".",qc),qd=Ab.cond(id,"!\x3d\x3d",vc,".",qc),sc(qd),qc in Wb?qd(Ab.cond(id).then(yc,".enable(",Wb[qc],");")["else"](yc,".disable(",Wb[qc],");"),vc,".",qc,"\x3d",id,";"):qd(yc,".",lc[qc],"(",id,");",vc,".",qc,"\x3d",id,";")});0===Object.keys(ec.state).length&&sc(vc,".dirty\x3dfalse;");Nb(sc)}function je(Ab,Nb,ec,xc){var yc=Ab.shared,Gc=Ab.current,Cc=yc.current,vc=yc.gl;fa(Object.keys(ec)).forEach(function(oc){var sc=ec[oc];if(!xc||xc(sc)){var qc=sc.append(Ab,Nb);if(Wb[oc]){var id=
Wb[oc];na(sc)?qc?Nb(vc,".enable(",id,");"):Nb(vc,".disable(",id,");"):Nb(Ab.cond(qc).then(vc,".enable(",id,");")["else"](vc,".disable(",id,");"));Nb(Cc,".",oc,"\x3d",qc,";")}else if(t(qc)){var td=Gc[oc];Nb(vc,".",lc[oc],"(",qc,");",qc.map(function(qd,Dd){return td+"["+Dd+"]\x3d"+qd}).join(";"),";")}else Nb(vc,".",lc[oc],"(",qc,");",Cc,".",oc,"\x3d",qc,";")}})}function xd(Ab,Nb){fc&&(Ab.instancing=Nb.def(Ab.shared.extensions,".angle_instanced_arrays"))}function be(Ab,Nb,ec,xc,yc){function Gc(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function Cc(od){qd=Nb.def();od(qd,"\x3d",Gc(),";");"string"===typeof yc?od(qc,".count+\x3d",yc,";"):od(qc,".count++;");yb&&(xc?(Dd=Nb.def(),od(Dd,"\x3d",td,".getNumPendingQueries();")):od(td,".beginQuery(",qc,");"))}function vc(od){od(qc,".cpuTime+\x3d",Gc(),"-",qd,";");yb&&(xc?od(td,".pushScopeStats(",Dd,",",td,".getNumPendingQueries(),",qc,");"):od(td,".endQuery();"))}function oc(od){var re=Nb.def(id,".profile");Nb(id,".profile\x3d",od,";");Nb.exit(id,
".profile\x3d",re,";")}var sc=Ab.shared,qc=Ab.stats,id=sc.current,td=sc.timer;ec=ec.profile;var qd,Dd;if(ec){if(na(ec)){ec.enable?(Cc(Nb),vc(Nb.exit),oc("true")):oc("false");return}ec=ec.append(Ab,Nb);oc(ec)}else ec=Nb.def(id,".profile");sc=Ab.block();Cc(sc);Nb("if(",ec,"){",sc,"}");Ab=Ab.block();vc(Ab);Nb.exit("if(",ec,"){",Ab,"}")}function qe(Ab,Nb,ec,xc,yc){function Gc(oc){switch(oc){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;
default:return 1}}function Cc(oc,sc,qc){function id(){Nb("if(!",od,".buffer){",qd,".enableVertexAttribArray(",Dd,");}");var ne=qc.type;var ze=qc.size?Nb.def(qc.size,"||",sc):sc;Nb("if(",od,".type!\x3d\x3d",ne,"||",od,".size!\x3d\x3d",ze,"||",De.map(function(Df){return od+"."+Df+"!\x3d\x3d"+qc[Df]}).join("||"),"){",qd,".bindBuffer(",34962,",",re,".buffer);",qd,".vertexAttribPointer(",[Dd,ze,ne,qc.normalized,qc.stride,qc.offset],");",od,".type\x3d",ne,";",od,".size\x3d",ze,";",De.map(function(Df){return od+
"."+Df+"\x3d"+qc[Df]+";"}).join(""),"}");fc&&(ne=qc.divisor,Nb("if(",od,".divisor!\x3d\x3d",ne,"){",Ab.instancing,".vertexAttribDivisorANGLE(",[Dd,ne],");",od,".divisor\x3d",ne,";}"))}function td(){Nb("if(",od,".buffer){",qd,".disableVertexAttribArray(",Dd,");",od,".buffer\x3dnull;","}if(",gc.map(function(ne,ze){return od+"."+ne+"!\x3d\x3d"+ue[ze]}).join("||"),"){",qd,".vertexAttrib4f(",Dd,",",ue,");",gc.map(function(ne,ze){return od+"."+ne+"\x3d"+ue[ze]+";"}).join(""),"}")}var qd=vc.gl,Dd=Nb.def(oc,
".location"),od=Nb.def(vc.attributes,"[",Dd,"]");oc=qc.state;var re=qc.buffer,ue=[qc.x,qc.y,qc.z,qc.w],De=["buffer","normalized","offset","stride"];1===oc?id():2===oc?td():(Nb("if(",oc,"\x3d\x3d\x3d",1,"){"),id(),Nb("}else{"),td(),Nb("}"))}var vc=Ab.shared;xc.forEach(function(oc){var sc=oc.name,qc=ec.attributes[sc];if(qc){if(!yc(qc))return;var id=qc.append(Ab,Nb)}else{if(!yc(Xc))return;var td=Ab.scopeAttrib(sc);id={};Object.keys(new $e).forEach(function(qd){id[qd]=Nb.def(td,".",qd)})}Cc(Ab.link(oc),
Gc(oc.info.type),id)})}function Hd(Ab,Nb,ec,xc,yc){for(var Gc=Ab.shared,Cc=Gc.gl,vc,oc=0;oc<xc.length;++oc){var sc=xc[oc],qc=sc.name,id=sc.info.type,td=ec.uniforms[qc];sc=Ab.link(sc)+".location";if(td){if(!yc(td))continue;if(na(td)){qc=td.value;if(35678===id||35680===id)id=Ab.link(qc._texture||qc.color[0]._texture),Nb(Cc,".uniform1i(",sc,",",id+".bind());"),Nb.exit(id,".unbind();");else if(35674===id||35675===id||35676===id)qc=Ab.global.def("new Float32Array(["+Array.prototype.slice.call(qc)+"])"),
td=2,35675===id?td=3:35676===id&&(td=4),Nb(Cc,".uniformMatrix",td,"fv(",sc,",false,",qc,");");else{switch(id){case 5126:vc="1f";break;case 35664:vc="2f";break;case 35665:vc="3f";break;case 35666:vc="4f";break;case 35670:vc="1i";break;case 5124:vc="1i";break;case 35671:vc="2i";break;case 35667:vc="2i";break;case 35672:vc="3i";break;case 35668:vc="3i";break;case 35673:vc="4i";break;case 35669:vc="4i"}Nb(Cc,".uniform",vc,"(",sc,",",t(qc)?Array.prototype.slice.call(qc):qc,");")}continue}else var qd=td.append(Ab,
Nb)}else{if(!yc(Xc))continue;qd=Nb.def(Gc.uniforms,"[",Xb.id(qc),"]")}35678===id?Nb("if(",qd,"\x26\x26",qd,'._reglType\x3d\x3d\x3d"framebuffer"){',qd,"\x3d",qd,".color[0];","}"):35680===id&&Nb("if(",qd,"\x26\x26",qd,'._reglType\x3d\x3d\x3d"framebufferCube"){',qd,"\x3d",qd,".color[0];","}");qc=1;switch(id){case 35678:case 35680:id=Nb.def(qd,"._texture");Nb(Cc,".uniform1i(",sc,",",id,".bind());");Nb.exit(id,".unbind();");continue;case 5124:case 35670:vc="1i";break;case 35667:case 35671:vc="2i";qc=2;
break;case 35668:case 35672:vc="3i";qc=3;break;case 35669:case 35673:vc="4i";qc=4;break;case 5126:vc="1f";break;case 35664:vc="2f";qc=2;break;case 35665:vc="3f";qc=3;break;case 35666:vc="4f";qc=4;break;case 35674:vc="Matrix2fv";break;case 35675:vc="Matrix3fv";break;case 35676:vc="Matrix4fv"}Nb(Cc,".uniform",vc,"(",sc,",");if("M"===vc.charAt(0)){sc=Math.pow(id-35674+2,2);var Dd=Ab.global.def("new Float32Array(",sc,")");Nb("false,(Array.isArray(",qd,")||",qd," instanceof Float32Array)?",qd,":(",f(sc,
function(od){return Dd+"["+od+"]\x3d"+qd+"["+od+"]"}),",",Dd,")")}else 1<qc?Nb(f(qc,function(od){return qd+"["+od+"]"})):Nb(qd);Nb(");")}}function ke(Ab,Nb,ec,xc){function yc(ne){var ze=qc[ne];return ze?ze.contextDep&&xc.contextDynamic||ze.propDep?ze.append(Ab,ec):ze.append(Ab,Nb):Nb.def(sc,".",ne)}function Gc(){function ne(){ec(re,".drawElementsInstancedANGLE(",[td,Dd,ue,qd+"\x3c\x3c(("+ue+"-5121)\x3e\x3e1)",od],");")}function ze(){ec(re,".drawArraysInstancedANGLE(",[td,qd,Dd,od],");")}id?De?ne():
(ec("if(",id,"){"),ne(),ec("}else{"),ze(),ec("}")):ze()}function Cc(){function ne(){ec(oc+".drawElements("+[td,Dd,ue,qd+"\x3c\x3c(("+ue+"-5121)\x3e\x3e1)"]+");")}function ze(){ec(oc+".drawArrays("+[td,qd,Dd]+");")}id?De?ne():(ec("if(",id,"){"),ne(),ec("}else{"),ze(),ec("}")):ze()}var vc=Ab.shared,oc=vc.gl,sc=vc.draw,qc=xc.draw,id=function(){var ne=qc.elements,ze=Nb;if(ne){if(ne.contextDep&&xc.contextDynamic||ne.propDep)ze=ec;ne=ne.append(Ab,ze)}else ne=ze.def(sc,".","elements");ne&&ze("if("+ne+")"+
oc+".bindBuffer(34963,"+ne+".buffer.buffer);");return ne}(),td=yc("primitive"),qd=yc("offset"),Dd=function(){var ne=qc.count,ze=Nb;if(ne){if(ne.contextDep&&xc.contextDynamic||ne.propDep)ze=ec;ne=ne.append(Ab,ze)}else ne=ze.def(sc,".","count");return ne}();if("number"===typeof Dd){if(0===Dd)return}else ec("if(",Dd,"){"),ec.exit("}");var od,re;fc&&(od=yc("instances"),re=Ab.instancing);var ue=id+".type",De=qc.elements&&na(qc.elements);fc&&("number"!==typeof od||0<=od)?"string"===typeof od?(ec("if(",
od,"\x3e0){"),Gc(),ec("}else if(",od,"\x3c0){"),Cc(),ec("}")):Gc():Cc()}function Ge(Ab,Nb,ec,xc,yc){Nb=Dc();yc=Nb.proc("body",yc);fc&&(Nb.instancing=yc.def(Nb.shared.extensions,".angle_instanced_arrays"));Ab(Nb,yc,ec,xc);return Nb.compile().body}function Fd(Ab,Nb,ec,xc){xd(Ab,Nb);ec.useVAO?ec.drawVAO?Nb(Ab.shared.vao,".setVAO(",ec.drawVAO.append(Ab,Nb),");"):Nb(Ab.shared.vao,".setVAO(",Ab.shared.vao,".targetVAO);"):(Nb(Ab.shared.vao,".setVAO(null);"),qe(Ab,Nb,ec,xc.attributes,function(){return!0}));
Hd(Ab,Nb,ec,xc.uniforms,function(){return!0});ke(Ab,Nb,Nb,ec)}function Wd(Ab,Nb){var ec=Ab.proc("draw",1);xd(Ab,ec);ud(Ab,ec,Nb.context);yd(Ab,ec,Nb.framebuffer);cb(Ab,ec,Nb);je(Ab,ec,Nb.state);be(Ab,ec,Nb,!1,!0);var xc=Nb.shader.progVar.append(Ab,ec);ec(Ab.shared.gl,".useProgram(",xc,".program);");if(Nb.shader.program)Fd(Ab,ec,Nb,Nb.shader.program);else{ec(Ab.shared.vao,".setVAO(null);");var yc=Ab.global.def("{}"),Gc=ec.def(xc,".id"),Cc=ec.def(yc,"[",Gc,"]");ec(Ab.cond(Cc).then(Cc,".call(this,a0);")["else"](Cc,
"\x3d",yc,"[",Gc,"]\x3d",Ab.link(function(vc){return Ge(Fd,Ab,Nb,vc,1)}),"(",xc,");",Cc,".call(this,a0);"))}0<Object.keys(Nb.state).length&&ec(Ab.shared.current,".dirty\x3dtrue;")}function Sd(Ab,Nb,ec,xc){function yc(){return!0}Ab.batchId="a1";xd(Ab,Nb);qe(Ab,Nb,ec,xc.attributes,yc);Hd(Ab,Nb,ec,xc.uniforms,yc);ke(Ab,Nb,Nb,ec)}function Ae(Ab,Nb,ec,xc){function yc(id){return id.contextDep&&Cc||id.propDep}function Gc(id){return!yc(id)}xd(Ab,Nb);var Cc=ec.contextDep,vc=Nb.def(),oc=Nb.def();Ab.shared.props=
oc;Ab.batchId=vc;var sc=Ab.scope(),qc=Ab.scope();Nb(sc.entry,"for(",vc,"\x3d0;",vc,"\x3c","a1",";++",vc,"){",oc,"\x3d","a0","[",vc,"];",qc,"}",sc.exit);ec.needsContext&&ud(Ab,qc,ec.context);ec.needsFramebuffer&&yd(Ab,qc,ec.framebuffer);je(Ab,qc,ec.state,yc);ec.profile&&yc(ec.profile)&&be(Ab,qc,ec,!1,!0);xc?(ec.useVAO?ec.drawVAO?yc(ec.drawVAO)?qc(Ab.shared.vao,".setVAO(",ec.drawVAO.append(Ab,qc),");"):sc(Ab.shared.vao,".setVAO(",ec.drawVAO.append(Ab,sc),");"):sc(Ab.shared.vao,".setVAO(",Ab.shared.vao,
".targetVAO);"):(sc(Ab.shared.vao,".setVAO(null);"),qe(Ab,sc,ec,xc.attributes,Gc),qe(Ab,qc,ec,xc.attributes,yc)),Hd(Ab,sc,ec,xc.uniforms,Gc),Hd(Ab,qc,ec,xc.uniforms,yc),ke(Ab,sc,qc,ec)):(Nb=Ab.global.def("{}"),xc=ec.shader.progVar.append(Ab,qc),oc=qc.def(xc,".id"),sc=qc.def(Nb,"[",oc,"]"),qc(Ab.shared.gl,".useProgram(",xc,".program);","if(!",sc,"){",sc,"\x3d",Nb,"[",oc,"]\x3d",Ab.link(function(id){return Ge(Sd,Ab,ec,id,2)}),"(",xc,");}",sc,".call(this,a0[",vc,"],",vc,");"))}function Xd(Ab,Nb){function ec(sc){return sc.contextDep&&
yc||sc.propDep}var xc=Ab.proc("batch",2);Ab.batchId="0";xd(Ab,xc);var yc=!1,Gc=!0;Object.keys(Nb.context).forEach(function(sc){yc=yc||Nb.context[sc].propDep});yc||(ud(Ab,xc,Nb.context),Gc=!1);var Cc=Nb.framebuffer,vc=!1;Cc?(Cc.propDep?yc=vc=!0:Cc.contextDep&&yc&&(vc=!0),vc||yd(Ab,xc,Cc)):yd(Ab,xc,null);Nb.state.viewport&&Nb.state.viewport.propDep&&(yc=!0);cb(Ab,xc,Nb);je(Ab,xc,Nb.state,function(sc){return!ec(sc)});Nb.profile&&ec(Nb.profile)||be(Ab,xc,Nb,!1,"a1");Nb.contextDep=yc;Nb.needsContext=Gc;
Nb.needsFramebuffer=vc;Gc=Nb.shader.progVar;if(Gc.contextDep&&yc||Gc.propDep)Ae(Ab,xc,Nb,null);else if(Gc=Gc.append(Ab,xc),xc(Ab.shared.gl,".useProgram(",Gc,".program);"),Nb.shader.program)Ae(Ab,xc,Nb,Nb.shader.program);else{xc(Ab.shared.vao,".setVAO(null);");Cc=Ab.global.def("{}");vc=xc.def(Gc,".id");var oc=xc.def(Cc,"[",vc,"]");xc(Ab.cond(oc).then(oc,".call(this,a0,a1);")["else"](oc,"\x3d",Cc,"[",vc,"]\x3d",Ab.link(function(sc){return Ge(Ae,Ab,Nb,sc,2)}),"(",Gc,");",oc,".call(this,a0,a1);"))}0<
Object.keys(Nb.state).length&&xc(Ab.shared.current,".dirty\x3dtrue;")}function sf(Ab,Nb){function ec(Cc){var vc=Nb.shader[Cc];vc&&xc.set(yc.shader,"."+Cc,vc.append(Ab,xc))}var xc=Ab.proc("scope",3);Ab.batchId="a2";var yc=Ab.shared,Gc=yc.current;ud(Ab,xc,Nb.context);Nb.framebuffer&&Nb.framebuffer.append(Ab,xc);fa(Object.keys(Nb.state)).forEach(function(Cc){var vc=Nb.state[Cc].append(Ab,xc);t(vc)?vc.forEach(function(oc,sc){xc.set(Ab.next[Cc],"["+sc+"]",oc)}):xc.set(yc.next,"."+Cc,vc)});be(Ab,xc,Nb,
!0,!0);["elements","offset","count","instances","primitive"].forEach(function(Cc){var vc=Nb.draw[Cc];vc&&xc.set(yc.draw,"."+Cc,""+vc.append(Ab,xc))});Object.keys(Nb.uniforms).forEach(function(Cc){xc.set(yc.uniforms,"["+Xb.id(Cc)+"]",Nb.uniforms[Cc].append(Ab,xc))});Object.keys(Nb.attributes).forEach(function(Cc){var vc=Nb.attributes[Cc].append(Ab,xc),oc=Ab.scopeAttrib(Cc);Object.keys(new $e).forEach(function(sc){xc.set(oc,"."+sc,vc[sc])})});Nb.scopeVAO&&xc.set(yc.vao,".targetVAO",Nb.scopeVAO.append(Ab,
xc));ec("vert");ec("frag");0<Object.keys(Nb.state).length&&(xc(Gc,".dirty\x3dtrue;"),xc.exit(Gc,".dirty\x3dtrue;"));xc("a1(",Ab.shared.context,",a0,",Ab.batchId,");")}function Re(Ab){if("object"===typeof Ab&&!t(Ab)){for(var Nb=Object.keys(Ab),ec=0;ec<Nb.length;++ec)if(sa.isDynamic(Ab[Nb[ec]]))return!0;return!1}}function tf(Ab,Nb,ec){function xc(id,td){Cc.forEach(function(qd){var Dd=yc[qd];sa.isDynamic(Dd)&&(Dd=id.invoke(td,Dd),td(qc,".",qd,"\x3d",Dd,";"))})}var yc=Nb["static"][ec];if(yc&&Re(yc)){var Gc=
Ab.global,Cc=Object.keys(yc),vc=!1,oc=!1,sc=!1,qc=Ab.global.def("{}");Cc.forEach(function(id){var td=yc[id];if(sa.isDynamic(td))"function"===typeof td&&(td=yc[id]=sa.unbox(td)),id=ra(td,null),vc=vc||id.thisDep,sc=sc||id.propDep,oc=oc||id.contextDep;else{Gc(qc,".",id,"\x3d");switch(typeof td){case "number":Gc(td);break;case "string":Gc('"',td,'"');break;case "object":Array.isArray(td)&&Gc("[",td.join(),"]");break;default:Gc(Ab.link(td))}Gc(";")}});Nb.dynamic[ec]=new sa.DynamicVariable(4,{thisDep:vc,
contextDep:oc,propDep:sc,ref:qc,append:xc});delete Nb["static"][ec]}}var $e=nc.Record,Oe={add:32774,subtract:32778,"reverse subtract":32779};uc.ext_blend_minmax&&(Oe.min=32775,Oe.max=32776);var fc=uc.angle_instanced_arrays,Vc=uc.webgl_draw_buffers,Ua={dirty:!0,profile:Gb.profile},wb={},Fb=[],Wb={},lc={};Vb("dither",3024);Vb("blend.enable",3042);Zb("blend.color","blendColor",[0,0,0,0]);Zb("blend.equation","blendEquationSeparate",[32774,32774]);Zb("blend.func","blendFuncSeparate",[1,0,1,0]);Vb("depth.enable",
2929,!0);Zb("depth.func","depthFunc",513);Zb("depth.range","depthRange",[0,1]);Zb("depth.mask","depthMask",!0);Zb("colorMask","colorMask",[!0,!0,!0,!0]);Vb("cull.enable",2884);Zb("cull.face","cullFace",1029);Zb("frontFace","frontFace",2305);Zb("lineWidth","lineWidth",1);Vb("polygonOffset.enable",32823);Zb("polygonOffset.offset","polygonOffset",[0,0]);Vb("sample.alpha",32926);Vb("sample.enable",32928);Zb("sample.coverage","sampleCoverage",[1,!1]);Vb("stencil.enable",2960);Zb("stencil.mask","stencilMask",
-1);Zb("stencil.func","stencilFunc",[519,0,-1]);Zb("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);Zb("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);Vb("scissor.enable",3089);Zb("scissor.box","scissor",[0,0,tb.drawingBufferWidth,tb.drawingBufferHeight]);Zb("viewport","viewport",[0,0,tb.drawingBufferWidth,tb.drawingBufferHeight]);var wc={gl:tb,context:Tb,strings:Xb,next:wb,current:Ua,draw:ac,elements:fd,buffer:Rc,shader:Kc,attributes:nc.state,vao:nc,uniforms:kc,framebuffer:xb,
extensions:uc,timer:yb,isBufferArgs:ia},cc={primTypes:Fa,compareFuncs:Uc,blendFuncs:Ac,blendEquations:Oe,stencilOps:Nc,glTypes:Ea,orientationType:gd};Vc&&(cc.backBuffer=[1029],cc.drawBuffer=f(Mc.maxDrawbuffers,function(Ab){return 0===Ab?[0]:f(Ab,function(Nb){return 36064+Nb})}));var Qc=0;return{next:wb,current:Ua,procs:function(){var Ab=Dc(),Nb=Ab.proc("poll"),ec=Ab.proc("refresh"),xc=Ab.block();Nb(xc);ec(xc);var yc=Ab.shared,Gc=yc.gl,Cc=yc.next,vc=yc.current;xc(vc,".dirty\x3dfalse;");yd(Ab,Nb);yd(Ab,
ec,null,!0);var oc;fc&&(oc=Ab.link(fc));uc.oes_vertex_array_object&&ec(Ab.link(uc.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var sc=0;sc<Mc.maxAttributes;++sc){var qc=ec.def(yc.attributes,"[",sc,"]"),id=Ab.cond(qc,".buffer");id.then(Gc,".enableVertexAttribArray(",sc,");",Gc,".bindBuffer(",34962,",",qc,".buffer.buffer);",Gc,".vertexAttribPointer(",sc,",",qc,".size,",qc,".type,",qc,".normalized,",qc,".stride,",qc,".offset);")["else"](Gc,".disableVertexAttribArray(",sc,");",Gc,".vertexAttrib4f(",
sc,",",qc,".x,",qc,".y,",qc,".z,",qc,".w);",qc,".buffer\x3dnull;");ec(id);fc&&ec(oc,".vertexAttribDivisorANGLE(",sc,",",qc,".divisor);")}ec(Ab.shared.vao,".currentVAO\x3dnull;",Ab.shared.vao,".setVAO(",Ab.shared.vao,".targetVAO);");Object.keys(Wb).forEach(function(td){var qd=Wb[td],Dd=xc.def(Cc,".",td),od=Ab.block();od("if(",Dd,"){",Gc,".enable(",qd,")}else{",Gc,".disable(",qd,")}",vc,".",td,"\x3d",Dd,";");ec(od);Nb("if(",Dd,"!\x3d\x3d",vc,".",td,"){",od,"}")});Object.keys(lc).forEach(function(td){var qd=
lc[td],Dd=Ua[td],od,re,ue=Ab.block();ue(Gc,".",qd,"(");t(Dd)?(qd=Dd.length,od=Ab.global.def(Cc,".",td),re=Ab.global.def(vc,".",td),ue(f(qd,function(De){return od+"["+De+"]"}),");",f(qd,function(De){return re+"["+De+"]\x3d"+od+"["+De+"];"}).join("")),Nb("if(",f(qd,function(De){return od+"["+De+"]!\x3d\x3d"+re+"["+De+"]"}).join("||"),"){",ue,"}")):(od=xc.def(Cc,".",td),re=xc.def(vc,".",td),ue(od,");",vc,".",td,"\x3d",od,";"),Nb("if(",od,"!\x3d\x3d",re,"){",ue,"}"));ec(ue)});return Ab.compile()}(),compile:function(Ab,
Nb,ec,xc,yc){var Gc=Dc();Gc.stats=Gc.link(yc);Object.keys(Nb["static"]).forEach(function(Cc){tf(Gc,Nb,Cc)});tc.forEach(function(Cc){tf(Gc,Ab,Cc)});ec=sd(Ab,Nb,ec,xc,Gc);Wd(Gc,ec);sf(Gc,ec);Xd(Gc,ec);return Gc.compile()}}}function oa(tb,Xb){for(var uc=0;uc<tb.length;++uc)if(tb[uc]===Xb)return uc;return-1}var ua=function(tb,Xb){for(var uc=Object.keys(Xb),Mc=0;Mc<uc.length;++Mc)tb[uc[Mc]]=Xb[uc[Mc]];return tb},ka=0,sa={DynamicVariable:m,define:function(tb,Xb){return new m(tb,l(Xb+""))},isDynamic:function(tb){return"function"===
typeof tb&&!tb._reglType||tb instanceof m},unbox:function(tb,Xb){return"function"===typeof tb?new m(0,tb):tb},accessor:l},ya={next:"function"===typeof requestAnimationFrame?function(tb){return requestAnimationFrame(tb)}:function(tb){return setTimeout(tb,16)},cancel:"function"===typeof cancelAnimationFrame?function(tb){return cancelAnimationFrame(tb)}:clearTimeout},qa="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},xa=q();xa.zero=q();
var Ca=function(tb,Xb){var uc=1;Xb.ext_texture_filter_anisotropic&&(uc=tb.getParameter(34047));var Mc=1,Rc=1;Xb.webgl_draw_buffers&&(Mc=tb.getParameter(34852),Rc=tb.getParameter(36063));var fd=!!Xb.oes_texture_float;if(fd){fd=tb.createTexture();tb.bindTexture(3553,fd);tb.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var sb=tb.createFramebuffer();tb.bindFramebuffer(36160,sb);tb.framebufferTexture2D(36160,36064,3553,fd,0);tb.bindTexture(3553,null);if(36053!==tb.checkFramebufferStatus(36160))fd=!1;else{tb.viewport(0,
0,1,1);tb.clearColor(1,0,0,1);tb.clear(16384);var xb=xa.allocType(5126,4);tb.readPixels(0,0,1,1,6408,5126,xb);tb.getError()?fd=!1:(tb.deleteFramebuffer(sb),tb.deleteTexture(fd),fd=1===xb[0]);xa.freeType(xb)}}xb=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(xb=tb.createTexture(),sb=xa.allocType(5121,36),tb.activeTexture(33984),tb.bindTexture(34067,xb),tb.texImage2D(34069,0,6408,3,3,0,6408,5121,sb),xa.freeType(sb),
tb.bindTexture(34067,null),tb.deleteTexture(xb),xb=!tb.getError());return{colorBits:[tb.getParameter(3410),tb.getParameter(3411),tb.getParameter(3412),tb.getParameter(3413)],depthBits:tb.getParameter(3414),stencilBits:tb.getParameter(3415),subpixelBits:tb.getParameter(3408),extensions:Object.keys(Xb).filter(function(kc){return!!Xb[kc]}),maxAnisotropic:uc,maxDrawbuffers:Mc,maxColorAttachments:Rc,pointSizeDims:tb.getParameter(33901),lineWidthDims:tb.getParameter(33902),maxViewportDims:tb.getParameter(3386),
maxCombinedTextureUnits:tb.getParameter(35661),maxCubeMapSize:tb.getParameter(34076),maxRenderbufferSize:tb.getParameter(34024),maxTextureUnits:tb.getParameter(34930),maxTextureSize:tb.getParameter(3379),maxAttributes:tb.getParameter(34921),maxVertexUniforms:tb.getParameter(36347),maxVertexTextureUnits:tb.getParameter(35660),maxVaryingVectors:tb.getParameter(36348),maxFragmentUniforms:tb.getParameter(36349),glsl:tb.getParameter(35724),renderer:tb.getParameter(7937),vendor:tb.getParameter(7936),version:tb.getParameter(7938),
readFloat:fd,npotTextureCube:xb}},Ja=function(tb){return tb instanceof Uint8Array||tb instanceof Uint16Array||tb instanceof Uint32Array||tb instanceof Int8Array||tb instanceof Int16Array||tb instanceof Int32Array||tb instanceof Float32Array||tb instanceof Float64Array||tb instanceof Uint8ClampedArray},eb=function(tb){return Object.keys(tb).map(function(Xb){return tb[Xb]})},Ra={shape:function(tb){for(var Xb=[];tb.length;tb=tb[0])Xb.push(tb.length);return Xb},flatten:function(tb,Xb,uc,Mc){var Rc=1;
if(Xb.length)for(var fd=0;fd<Xb.length;++fd)Rc*=Xb[fd];else Rc=0;uc=Mc||xa.allocType(uc,Rc);switch(Xb.length){case 0:break;case 1:Mc=Xb[0];for(Xb=0;Xb<Mc;++Xb)uc[Xb]=tb[Xb];break;case 2:Mc=Xb[0];Xb=Xb[1];for(fd=Rc=0;fd<Mc;++fd)for(var sb=tb[fd],xb=0;xb<Xb;++xb)uc[Rc++]=sb[xb];break;case 3:u(tb,Xb[0],Xb[1],Xb[2],uc,0);break;default:v(tb,Xb,0,uc,0)}return uc}},Wa={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ea={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},Ia={dynamic:35048,stream:35040,"static":35044},Qa=Ra.flatten,lb=Ra.shape,hb=[];hb[5120]=1;hb[5122]=2;hb[5124]=4;hb[5121]=1;hb[5123]=2;hb[5125]=4;hb[5126]=4;var Fa={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,
"triangle fan":6},La=new Float32Array(1),Oa=new Uint32Array(La.buffer),fb=[9984,9986,9985,9987],bb=[0,6409,6410,6407,6408],Pa={};Pa[6409]=Pa[6406]=Pa[6402]=1;Pa[34041]=Pa[6410]=2;Pa[6407]=Pa[35904]=3;Pa[6408]=Pa[35906]=4;var Ta=G("HTMLCanvasElement"),Ya=G("OffscreenCanvas"),nb=G("CanvasRenderingContext2D"),Da=G("ImageBitmap"),Ha=G("HTMLImageElement"),ab=G("HTMLVideoElement"),ib=Object.keys(Wa).concat([Ta,Ya,nb,Da,Ha,ab]),ob=[];ob[5121]=1;ob[5126]=4;ob[36193]=2;ob[5123]=2;ob[5125]=4;var db=[];db[32854]=
2;db[32855]=2;db[36194]=2;db[34041]=4;db[33776]=.5;db[33777]=.5;db[33778]=1;db[33779]=1;db[35986]=.5;db[35987]=1;db[34798]=1;db[35840]=.5;db[35841]=.25;db[35842]=.5;db[35843]=.25;db[36196]=.5;var gb=[];gb[32854]=2;gb[32855]=2;gb[36194]=2;gb[33189]=2;gb[36168]=1;gb[34041]=4;gb[35907]=4;gb[34836]=16;gb[34842]=8;gb[34843]=6;var rb=function(tb,Xb,uc,Mc,Rc){function fd(ac){this.id=nc++;this.refCount=1;this.renderbuffer=ac;this.format=32854;this.height=this.width=0;Rc.profile&&(this.stats={size:0})}function sb(ac){var Tb=
ac.renderbuffer;tb.bindRenderbuffer(36161,null);tb.deleteRenderbuffer(Tb);ac.renderbuffer=null;ac.refCount=0;delete Kc[ac.id];Mc.renderbufferCount--}var xb={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Xb.ext_srgb&&(xb.srgba=35907);Xb.ext_color_buffer_half_float&&(xb.rgba16f=34842,xb.rgb16f=34843);Xb.webgl_color_buffer_float&&(xb.rgba32f=34836);var kc=[];Object.keys(xb).forEach(function(ac){kc[xb[ac]]=ac});var nc=0,Kc={};fd.prototype.decRef=function(){0>=
--this.refCount&&sb(this)};Rc.profile&&(Mc.getTotalRenderbufferSize=function(){var ac=0;Object.keys(Kc).forEach(function(Tb){ac+=Kc[Tb].stats.size});return ac});return{create:function(ac,Tb){function yb(Eb,Vb){var Zb=0,Dc=0,ic=32854;"object"===typeof Eb&&Eb?("shape"in Eb?(Dc=Eb.shape,Zb=Dc[0]|0,Dc=Dc[1]|0):("radius"in Eb&&(Zb=Dc=Eb.radius|0),"width"in Eb&&(Zb=Eb.width|0),"height"in Eb&&(Dc=Eb.height|0)),"format"in Eb&&(ic=xb[Eb.format])):"number"===typeof Eb?(Zb=Eb|0,Dc="number"===typeof Vb?Vb|0:
Zb):Eb||(Zb=Dc=1);if(Zb!==Gb.width||Dc!==Gb.height||ic!==Gb.format)return yb.width=Gb.width=Zb,yb.height=Gb.height=Dc,Gb.format=ic,tb.bindRenderbuffer(36161,Gb.renderbuffer),tb.renderbufferStorage(36161,ic,Zb,Dc),Rc.profile&&(Gb.stats.size=gb[Gb.format]*Gb.width*Gb.height),yb.format=kc[Gb.format],yb}var Gb=new fd(tb.createRenderbuffer());Kc[Gb.id]=Gb;Mc.renderbufferCount++;yb(ac,Tb);yb.resize=function(Eb,Vb){Eb|=0;Vb=Vb|0||Eb;if(Eb===Gb.width&&Vb===Gb.height)return yb;yb.width=Gb.width=Eb;yb.height=
Gb.height=Vb;tb.bindRenderbuffer(36161,Gb.renderbuffer);tb.renderbufferStorage(36161,Gb.format,Eb,Vb);Rc.profile&&(Gb.stats.size=gb[Gb.format]*Gb.width*Gb.height);return yb};yb._reglType="renderbuffer";yb._renderbuffer=Gb;Rc.profile&&(yb.stats=Gb.stats);yb.destroy=function(){Gb.decRef()};return yb},clear:function(){eb(Kc).forEach(sb)},restore:function(){eb(Kc).forEach(function(ac){ac.renderbuffer=tb.createRenderbuffer();tb.bindRenderbuffer(36161,ac.renderbuffer);tb.renderbufferStorage(36161,ac.format,
ac.width,ac.height)});tb.bindRenderbuffer(36161,null)}}},Bb=[];Bb[6408]=4;Bb[6407]=3;var Qb=[];Qb[5121]=1;Qb[5126]=4;Qb[36193]=2;var gc=["x","y","z","w"],tc="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ac={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Uc={never:512,less:513,"\x3c":513,equal:514,"\x3d":514,"\x3d\x3d":514,"\x3d\x3d\x3d":514,lequal:515,"\x3c\x3d":515,greater:516,"\x3e":516,notequal:517,"!\x3d":517,"!\x3d\x3d":517,gequal:518,"\x3e\x3d":518,always:519},Nc={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},gd={cw:2304,ccw:2305},Xc=new ha(!1,!1,!1,function(){}),
ed=function(tb,Xb){function uc(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function Mc(Kc,ac,Tb){var yb=sb.pop()||new uc;yb.startQueryIndex=Kc;yb.endQueryIndex=ac;yb.sum=0;yb.stats=Tb;xb.push(yb)}if(!Xb.ext_disjoint_timer_query)return null;var Rc=[],fd=[],sb=[],xb=[],kc=[],nc=[];return{beginQuery:function(Kc){var ac=Rc.pop()||Xb.ext_disjoint_timer_query.createQueryEXT();Xb.ext_disjoint_timer_query.beginQueryEXT(35007,ac);fd.push(ac);Mc(fd.length-1,fd.length,Kc)},endQuery:function(){Xb.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:Mc,update:function(){var Kc;var ac=fd.length;if(0!==ac){nc.length=Math.max(nc.length,ac+1);kc.length=Math.max(kc.length,ac+1);kc[0]=0;var Tb=nc[0]=0;for(Kc=ac=0;Kc<fd.length;++Kc){var yb=fd[Kc];Xb.ext_disjoint_timer_query.getQueryObjectEXT(yb,34919)?(Tb+=Xb.ext_disjoint_timer_query.getQueryObjectEXT(yb,34918),Rc.push(yb)):fd[ac++]=yb;kc[Kc+1]=Tb;nc[Kc+1]=ac}fd.length=ac;for(Kc=ac=0;Kc<xb.length;++Kc){Tb=xb[Kc];var Gb=Tb.startQueryIndex;yb=Tb.endQueryIndex;Tb.sum+=kc[yb]-kc[Gb];Gb=nc[Gb];
yb=nc[yb];yb===Gb?(Tb.stats.gpuTime+=Tb.sum/1E6,sb.push(Tb)):(Tb.startQueryIndex=Gb,Tb.endQueryIndex=yb,xb[ac++]=Tb)}xb.length=ac}},getNumPendingQueries:function(){return fd.length},clear:function(){Rc.push.apply(Rc,fd);for(var Kc=0;Kc<Rc.length;Kc++)Xb.ext_disjoint_timer_query.deleteQueryEXT(Rc[Kc]);fd.length=0;Rc.length=0},restore:function(){fd.length=0;Rc.length=0}}};return function(tb){function Xb(){if(0===xd.length)ic&&ic.update(),ke=null;else{ke=ya.next(Xb);Kc();for(var Fd=xd.length-1;0<=Fd;--Fd){var Wd=
xd[Fd];Wd&&Wd($c,null,0)}yb.flush();ic&&ic.update()}}function uc(){!ke&&0<xd.length&&(ke=ya.next(Xb))}function Mc(){ke&&(ya.cancel(Xb),ke=null)}function Rc(Fd){Fd.preventDefault();Mc();be.forEach(function(Wd){Wd()})}function fd(Fd){yb.getError();Eb.restore();cd.restore();Yc.restore();Jc.restore();sd.restore();ud.restore();rd.restore();ic&&ic.restore();yd.procs.refresh();uc();qe.forEach(function(Wd){Wd()})}function sb(Fd){function Wd(Vc){var Ua={},wb={};Object.keys(Vc).forEach(function(Fb){var Wb=
Vc[Fb];sa.isDynamic(Wb)?wb[Fb]=sa.unbox(Wb,Fb):Ua[Fb]=Wb});return{dynamic:wb,"static":Ua}}function Sd(Vc){for(;fc.length<Vc;)fc.push(null);return fc}var Ae=Wd(Fd.context||{}),Xd=Wd(Fd.uniforms||{}),sf=Wd(Fd.attributes||{}),Re=Wd(function(Vc){function Ua(Fb){if(Fb in wb){var Wb=wb[Fb];delete wb[Fb];Object.keys(Wb).forEach(function(lc){wb[Fb+"."+lc]=Wb[lc]})}}var wb=ua({},Vc);delete wb.uniforms;delete wb.attributes;delete wb.context;delete wb.vao;"stencil"in wb&&wb.stencil.op&&(wb.stencil.opBack=wb.stencil.opFront=
wb.stencil.op,delete wb.stencil.op);Ua("blend");Ua("depth");Ua("cull");Ua("stencil");Ua("polygonOffset");Ua("scissor");Ua("sample");"vao"in Vc&&(wb.vao=Vc.vao);return wb}(Fd));Fd={gpuTime:0,cpuTime:0,count:0};Ae=yd.compile(Re,sf,Xd,Ae,Fd);var tf=Ae.draw,$e=Ae.batch,Oe=Ae.scope,fc=[];return ua(function(Vc,Ua){var wb;if("function"===typeof Vc)return Oe.call(this,null,Vc,0);if("function"===typeof Ua)if("number"===typeof Vc)for(wb=0;wb<Vc;++wb)Oe.call(this,null,Ua,wb);else if(Array.isArray(Vc))for(wb=
0;wb<Vc.length;++wb)Oe.call(this,Vc[wb],Ua,wb);else return Oe.call(this,Vc,Ua,0);else if("number"===typeof Vc){if(0<Vc)return $e.call(this,Sd(Vc|0),Vc|0)}else if(Array.isArray(Vc)){if(Vc.length)return $e.call(this,Vc,Vc.length)}else return tf.call(this,Vc)},{stats:Fd})}function xb(Fd,Wd){Fd=0;yd.procs.poll();var Sd=Wd.color;Sd&&(yb.clearColor(+Sd[0]||0,+Sd[1]||0,+Sd[2]||0,+Sd[3]||0),Fd|=16384);"depth"in Wd&&(yb.clearDepth(+Wd.depth),Fd|=256);"stencil"in Wd&&(yb.clearStencil(Wd.stencil|0),Fd|=1024);
yb.clear(Fd)}function kc(Fd){xd.push(Fd);uc();return{cancel:function(){function Wd(){var Ae=oa(xd,Wd);xd[Ae]=xd[xd.length-1];--xd.length;0>=xd.length&&Mc()}var Sd=oa(xd,Fd);xd[Sd]=Wd}}}function nc(){var Fd=cb.viewport,Wd=cb.scissor_box;Fd[0]=Fd[1]=Wd[0]=Wd[1]=0;$c.viewportWidth=$c.framebufferWidth=$c.drawingBufferWidth=Fd[2]=Wd[2]=yb.drawingBufferWidth;$c.viewportHeight=$c.framebufferHeight=$c.drawingBufferHeight=Fd[3]=Wd[3]=yb.drawingBufferHeight}function Kc(){$c.tick+=1;$c.time=Tb();nc();yd.procs.poll()}
function ac(){nc();yd.procs.refresh();ic&&ic.update()}function Tb(){return(qa()-Bc)/1E3}tb=n(tb);if(!tb)return null;var yb=tb.gl,Gb=yb.getContextAttributes();yb.isContextLost();var Eb=c(yb,tb);if(!Eb)return null;var Vb=e(),Zb={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Dc=Eb.extensions,ic=ed(yb,Dc),Bc=qa(),Sc=yb.drawingBufferWidth,Ic=yb.drawingBufferHeight,$c={tick:0,time:0,viewportWidth:Sc,viewportHeight:Ic,
framebufferWidth:Sc,framebufferHeight:Ic,drawingBufferWidth:Sc,drawingBufferHeight:Ic,pixelRatio:tb.pixelRatio},nd=Ca(yb,Dc),Yc=x(yb,Zb,tb,function(Fd){return rd.destroyBuffer(Fd)}),rd=P(yb,Dc,nd,Zb,Yc),wd=E(yb,Dc,Yc,Zb),cd=V(yb,Vb,Zb,tb),Jc=O(yb,Dc,nd,function(){yd.procs.poll()},$c,Zb,tb),sd=rb(yb,Dc,nd,Zb,tb),ud=Q(yb,Dc,nd,Jc,sd,Zb),yd=ta(yb,Vb,Dc,nd,Yc,wd,Jc,ud,{},rd,cd,{elements:null,primitive:4,count:-1,offset:0,instances:-1},$c,ic,tb);Vb=Y(yb,ud,yd.procs.poll,$c,Gb,Dc,nd);var cb=yd.next,je=
yb.canvas,xd=[],be=[],qe=[],Hd=[tb.onDestroy],ke=null;je&&(je.addEventListener("webglcontextlost",Rc,!1),je.addEventListener("webglcontextrestored",fd,!1));var Ge=ud.setFBO=sb({framebuffer:sa.define.call(null,1,"framebuffer")});ac();Gb=ua(sb,{clear:function(Fd){if("framebuffer"in Fd)if(Fd.framebuffer&&"framebufferCube"===Fd.framebuffer_reglType)for(var Wd=0;6>Wd;++Wd)Ge(ua({framebuffer:Fd.framebuffer.faces[Wd]},Fd),xb);else Ge(Fd,xb);else xb(null,Fd)},prop:sa.define.bind(null,1),context:sa.define.bind(null,
2),"this":sa.define.bind(null,3),draw:sb({}),buffer:function(Fd){return Yc.create(Fd,34962,!1,!1)},elements:function(Fd){return wd.create(Fd,!1)},texture:Jc.create2D,cube:Jc.createCube,renderbuffer:sd.create,framebuffer:ud.create,framebufferCube:ud.createCube,vao:rd.createVAO,attributes:Gb,frame:kc,on:function(Fd,Wd){switch(Fd){case "frame":return kc(Wd);case "lost":var Sd=be;break;case "restore":Sd=qe;break;case "destroy":Sd=Hd}Sd.push(Wd);return{cancel:function(){for(var Ae=0;Ae<Sd.length;++Ae)if(Sd[Ae]===
Wd){Sd[Ae]=Sd[Sd.length-1];Sd.pop();break}}}},limits:nd,hasExtension:function(Fd){return 0<=nd.extensions.indexOf(Fd.toLowerCase())},read:Vb,destroy:function(){xd.length=0;Mc();je&&(je.removeEventListener("webglcontextlost",Rc),je.removeEventListener("webglcontextrestored",fd));cd.clear();ud.clear();sd.clear();Jc.clear();wd.clear();Yc.clear();rd.clear();ic&&ic.clear();Hd.forEach(function(Fd){Fd()})},_gl:yb,_refresh:ac,poll:function(){Kc();ic&&ic.update()},now:Tb,stats:Zb});tb.onDone(null,Gb);return Gb}})},
{}],513:[function(b,F,C){var m="",h;F.exports=function(l,e){if("string"!==typeof l)throw new TypeError("expected a string");if(1===e)return l;if(2===e)return l+l;var a=l.length*e;if(h!==l||"undefined"===typeof h)h=l,m="";else if(m.length>=a)return m.substr(0,a);for(;a>m.length&&1<e;)e&1&&(m+=l),e>>=1,l+=l;m+=l;return m=m.substr(0,a)}},{}],514:[function(b,F,C){(function(m){F.exports=m.performance&&m.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,
"undefined"!==typeof W?W:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],515:[function(b,F,C){F.exports=function(m){for(var h=m.length,l=m[m.length-1],e=h,a=h-2;0<=a;--a){var g=l,k=m[a];l=g+k;g=l-g;if(k-=g)m[--e]=l,l=k}var p=0;for(a=e;a<h;++a)g=m[a],k=l,l=g+k,g=l-g,(k-=g)&&(m[p++]=k);m[p++]=l;m.length=p;return m}},{}],516:[function(b,F,C){function m(c,f){for(var d=Array(c.length-1),q=1;q<c.length;++q)for(var r=d[q-1]=Array(c.length-1),u=0,v=0;u<c.length;++u)u!==f&&(r[v++]=
c[q][u]);return d}function h(c){if(1===c.length)return c[0];if(2===c.length)return["sum(",c[0],",",c[1],")"].join("");var f=c.length>>1;return["sum(",h(c.slice(0,f)),",",h(c.slice(f)),")"].join("")}function l(c){if(2===c.length)return["sum(prod(",c[0][0],",",c[1][1],"),prod(-",c[0][1],",",c[1][0],"))"].join("");for(var f=[],d=0;d<c.length;++d)f.push(["scale(",l(m(c,d)),",",d&1?"-":"",c[0][d],")"].join(""));return h(f)}function e(c){for(var f=Function,d=Array(c),q=0;q<c;++q){d[q]=Array(c);for(var r=
0;r<c;++r)d[q][r]=["m[",q,"][",r,"]"].join("")}return(new f("sum","scale","prod","compress",["function robustDeterminant",c,"(m){return compress(",l(d),")};return robustDeterminant",c].join("")))(g,k,a,p)}var a=b("two-product"),g=b("robust-sum"),k=b("robust-scale"),p=b("robust-compress"),n=[function(){return[0]},function(c){return[c[0][0]]}];(function(){for(;6>n.length;)n.push(e(n.length));for(var c=[],f=["function robustDeterminant(m){switch(m.length){"],d=0;6>d;++d)c.push("det"+d),f.push("case ",
d,":return det",d,"(m);");f.push("}var det\x3dCACHE[m.length];if(!det)det\x3dCACHE[m.length]\x3dgen(m.length);return det(m);}return robustDeterminant");c.push("CACHE","gen",f.join(""));c=Function.apply(void 0,c);F.exports=c.apply(void 0,n.concat([n,e]));for(d=0;d<n.length;++d)F.exports[d]=n[d]})()},{"robust-compress":515,"robust-scale":522,"robust-sum":525,"two-product":554}],517:[function(b,F,C){var m=b("two-product"),h=b("robust-sum");F.exports=function(l,e){for(var a=m(l[0],e[0]),g=1;g<l.length;++g)a=
h(a,m(l[g],e[g]));return a}},{"robust-sum":525,"two-product":554}],518:[function(b,F,C){function m(q,r){for(var u=Array(q.length-1),v=1;v<q.length;++v)for(var w=u[v-1]=Array(q.length-1),y=0,D=0;y<q.length;++y)y!==r&&(w[D++]=q[v][y]);return u}function h(q){if(1===q.length)return q[0];if(2===q.length)return["sum(",q[0],",",q[1],")"].join("");var r=q.length>>1;return["sum(",h(q.slice(0,r)),",",h(q.slice(r)),")"].join("")}function l(q,r){return"m"===q.charAt(0)?"w"===r.charAt(0)?(q=q.split("["),["w",
r.substr(1),"m",q[0].substr(1)].join("")):["prod(",q,",",r,")"].join(""):l(r,q)}function e(q){if(2===q.length)return[["diff(",l(q[0][0],q[1][1]),",",l(q[1][0],q[0][1]),")"].join("")];for(var r=[],u=0;u<q.length;++u)r.push(["scale(",h(e(m(q,u))),",",u&1?"-":"",q[0][u],")"].join(""));return r}function a(q,r){for(var u=[],v=0;v<r-2;++v)u.push(["prod(m",q,"[",v,"],m",q,"[",v,"])"].join(""));return h(u)}function g(q){for(var r=[],u=[],v=Array(q),w=0;w<q;++w){v[w]=Array(q);for(var y=0;y<q;++y)v[w][y]=["m",
y,"[",q-w-2,"]"].join("")}for(w=0;w<q;++w)v[0][w]="1",v[q-1][w]="w"+w;for(w=0;w<q;++w)0===(w&1)?r.push.apply(r,e(m(v,w))):u.push.apply(u,e(m(v,w)));r=h(r);u=h(u);v="exactInSphere"+q;y=[];for(w=0;w<q;++w)y.push("m"+w);y=["function ",v,"(",y.join(),"){"];for(w=0;w<q;++w){y.push("var w",w,"\x3d",a(w,q),";");for(var D=0;D<q;++D)D!==w&&y.push("var w",w,"m",D,"\x3dscale(w",w,",m",D,"[0]);")}y.push("var p\x3d",r,",n\x3d",u,",d\x3ddiff(p,n);return d[d.length-1];}return ",v);return(new Function("sum","diff",
"prod","scale",y.join("")))(n,c,p,f)}function k(q){var r=d[q.length];r||(r=d[q.length]=g(q.length));return r.apply(void 0,q)}var p=b("two-product"),n=b("robust-sum"),c=b("robust-subtract"),f=b("robust-scale"),d=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=d.length;)d.push(g(d.length));for(var q=[],r=["slow"],u=0;6>=u;++u)q.push("a"+u),r.push("o"+u);var v=["function testInSphere(",q.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(u=2;6>=u;++u)v.push("case ",
u,":return o",u,"(",q.slice(0,u).join(),");");v.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return testInSphere");r.push(v.join(""));q=Function.apply(void 0,r);F.exports=q.apply(void 0,[k].concat(d));for(u=0;6>=u;++u)F.exports[u]=d[u]})()},{"robust-scale":522,"robust-subtract":524,"robust-sum":525,"two-product":554}],519:[function(b,F,C){function m(e){for(var a="robustLinearSolve"+e+"d",g=["function ",a,"(A,b){return ["],
k=0;k<e;++k){g.push("det([");for(var p=0;p<e;++p){0<p&&g.push(",");g.push("[");for(var n=0;n<e;++n)0<n&&g.push(","),n===k?g.push("+b[",p,"]"):g.push("+A[",p,"][",n,"]");g.push("]")}g.push("]),")}g.push("det(A)]}return ",a);a=new Function("det",g.join(""));return 6>e?a(h[e]):a(h)}var h=b("robust-determinant"),l=[function(){return[0]},function(e,a){return[[a[0]],[e[0][0]]]}];(function(){for(;6>l.length;)l.push(m(l.length));for(var e=[],a=["function dispatchLinearSolve(A,b){switch(A.length){"],g=0;6>
g;++g)e.push("s"+g),a.push("case ",g,":return s",g,"(A,b);");a.push("}var s\x3dCACHE[A.length];if(!s)s\x3dCACHE[A.length]\x3dg(A.length);return s(A,b)}return dispatchLinearSolve");e.push("CACHE","g",a.join(""));e=Function.apply(void 0,e);F.exports=e.apply(void 0,l.concat([l,m]));for(g=0;6>g;++g)F.exports[g]=l[g]})()},{"robust-determinant":516}],520:[function(b,F,C){function m(q,r){for(var u=Array(q.length-1),v=1;v<q.length;++v)for(var w=u[v-1]=Array(q.length-1),y=0,D=0;y<q.length;++y)y!==r&&(w[D++]=
q[v][y]);return u}function h(q){if(1===q.length)return q[0];if(2===q.length)return["sum(",q[0],",",q[1],")"].join("");var r=q.length>>1;return["sum(",h(q.slice(0,r)),",",h(q.slice(r)),")"].join("")}function l(q){if(2===q.length)return[["sum(prod(",q[0][0],",",q[1][1],"),prod(-",q[0][1],",",q[1][0],"))"].join("")];for(var r=[],u=0;u<q.length;++u)r.push(["scale(",h(l(m(q,u))),",",u&1?"-":"",q[0][u],")"].join(""));return r}function e(q){for(var r=[],u=[],v=Array(q),w=0;w<q;++w){v[w]=Array(q);for(var y=
0;y<q;++y)v[w][y]=["m",y,"[",q-w-1,"]"].join("")}w=[];for(y=0;y<q;++y)0===(y&1)?r.push.apply(r,l(m(v,y))):u.push.apply(u,l(m(v,y))),w.push("m"+y);r=h(r);u=h(u);q="orientation"+q+"Exact";q=["function ",q,"(",w.join(),"){var p\x3d",r,",n\x3d",u,",d\x3dsub(p,n);return d[d.length-1];};return ",q].join("");return(new Function("sum","prod","scale","sub",q))(k,g,p,n)}function a(q){var r=d[q.length];r||(r=d[q.length]=e(q.length));return r.apply(void 0,q)}var g=b("two-product"),k=b("robust-sum"),p=b("robust-scale"),
n=b("robust-subtract"),c=e(3),f=e(4),d=[function(){return 0},function(){return 0},function(q,r){return r[0]-q[0]},function(q,r,u){var v=(q[1]-u[1])*(r[0]-u[0]),w=(q[0]-u[0])*(r[1]-u[1]),y=v-w;if(0<v){if(0>=w)return y;v+=w}else if(0>v){if(0<=w)return y;v=-(v+w)}else return y;v*=3.3306690738754716E-16;return y>=v||y<=-v?y:c(q,r,u)},function(q,r,u,v){var w=q[0]-v[0],y=r[0]-v[0],D=u[0]-v[0],x=q[1]-v[1],E=r[1]-v[1],B=u[1]-v[1],t=q[2]-v[2],G=r[2]-v[2],I=u[2]-v[2],L=y*B,M=D*E;D*=x;B*=w;w*=E;x*=y;y=t*(L-
M)+G*(D-B)+I*(w-x);t=7.771561172376103E-16*((Math.abs(L)+Math.abs(M))*Math.abs(t)+(Math.abs(D)+Math.abs(B))*Math.abs(G)+(Math.abs(w)+Math.abs(x))*Math.abs(I));return y>t||-y>t?y:f(q,r,u,v)}];(function(){for(;5>=d.length;)d.push(e(d.length));for(var q=[],r=["slow"],u=0;5>=u;++u)q.push("a"+u),r.push("o"+u);var v=["function getOrientation(",q.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(u=2;5>=u;++u)v.push("case ",u,":return o",u,"(",q.slice(0,u).join(),");");v.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return getOrientation");
r.push(v.join(""));q=Function.apply(void 0,r);F.exports=q.apply(void 0,[a].concat(d));for(u=0;5>=u;++u)F.exports[u]=d[u]})()},{"robust-scale":522,"robust-subtract":524,"robust-sum":525,"two-product":554}],521:[function(b,F,C){var m=b("robust-sum"),h=b("robust-scale");F.exports=function(l,e){if(1===l.length)return h(e,l[0]);if(1===e.length)return h(l,e[0]);if(0===l.length||0===e.length)return[0];var a=[0];if(l.length<e.length)for(var g=0;g<l.length;++g)a=m(a,h(e,l[g]));else for(g=0;g<e.length;++g)a=
m(a,h(l,e[g]));return a}},{"robust-scale":522,"robust-sum":525}],522:[function(b,F,C){var m=b("two-product"),h=b("two-sum");F.exports=function(l,e){var a=l.length;if(1===a)return l=m(l[0],e),l[0]?l:[l[1]];var g=Array(2*a),k=[.1,.1],p=[.1,.1],n=0;m(l[0],e,k);k[0]&&(g[n++]=k[0]);for(var c=1;c<a;++c){m(l[c],e,p);h(k[1],p[0],k);k[0]&&(g[n++]=k[0]);var f=p[1],d=k[1],q=f+d;f=d-(q-f);k[1]=q;f&&(g[n++]=f)}k[1]&&(g[n++]=k[1]);0===n&&(g[n++]=0);g.length=n;return g}},{"two-product":554,"two-sum":555}],523:[function(b,
F,C){F.exports=function(h,l,e,a){var g=m(h,e,a),k=m(l,e,a);if(0<g&&0<k||0>g&&0>k)return!1;var p=m(e,h,l),n=m(a,h,l);if(0<p&&0<n||0>p&&0>n)return!1;if(0===g&&0===k&&0===p&&0===n){a:{for(g=0;2>g;++g){k=h[g];p=l[g];n=Math.max(k,p);var c=e[g],f=a[g],d=Math.min(c,f);if(Math.max(c,f)<Math.min(k,p)||n<d){h=!1;break a}}h=!0}return h}return!0};var m=b("robust-orientation")[3]},{"robust-orientation":520}],524:[function(b,F,C){F.exports=function(m,h){var l=m.length|0,e=h.length|0;if(1===l&&1===e)return m=m[0],
l=-h[0],h=m+l,e=h-m,h=(m=m-(h-e)+(l-e))?[m,h]:[h],h;var a=Array(l+e),g=0,k=0,p=0,n=Math.abs,c=m[k],f=n(c),d=-h[p],q=n(d);if(f<q){var r=c;k+=1;k<l&&(c=m[k],f=n(c))}else r=d,p+=1,p<e&&(d=-h[p],q=n(d));if(k<l&&f<q||p>=e){var u=c;k+=1;k<l&&(c=m[k],f=n(c))}else u=d,p+=1,p<e&&(d=-h[p],q=n(d));var v=u+r;r-=v-u;for(var w=v,y;k<l&&p<e;)f<q?(u=c,k+=1,k<l&&(c=m[k],f=n(c))):(u=d,p+=1,p<e&&(d=-h[p],q=n(d))),v=u+r,u=v-u,(u=r-u)&&(a[g++]=u),u=w+v,y=u-w,r=u-y,v-=y,w-=r,r=w+v,w=u;for(;k<l;)u=c,v=u+r,u=v-u,(u=r-u)&&
(a[g++]=u),u=w+v,y=u-w,r=u-y,v-=y,w-=r,r=w+v,w=u,k+=1,k<l&&(c=m[k]);for(;p<e;)u=d,v=u+r,u=v-u,(u=r-u)&&(a[g++]=u),u=w+v,y=u-w,r=u-y,v-=y,w-=r,r=w+v,w=u,p+=1,p<e&&(d=-h[p]);r&&(a[g++]=r);w&&(a[g++]=w);g||(a[g++]=0);a.length=g;return a}},{}],525:[function(b,F,C){F.exports=function(m,h){var l=m.length|0,e=h.length|0;if(1===l&&1===e)return m=m[0],l=h[0],h=m+l,e=h-m,h=(m=m-(h-e)+(l-e))?[m,h]:[h],h;var a=Array(l+e),g=0,k=0,p=0,n=Math.abs,c=m[k],f=n(c),d=h[p],q=n(d);if(f<q){var r=c;k+=1;k<l&&(c=m[k],f=n(c))}else r=
d,p+=1,p<e&&(d=h[p],q=n(d));if(k<l&&f<q||p>=e){var u=c;k+=1;k<l&&(c=m[k],f=n(c))}else u=d,p+=1,p<e&&(d=h[p],q=n(d));var v=u+r;r-=v-u;for(var w=v,y;k<l&&p<e;)f<q?(u=c,k+=1,k<l&&(c=m[k],f=n(c))):(u=d,p+=1,p<e&&(d=h[p],q=n(d))),v=u+r,u=v-u,(u=r-u)&&(a[g++]=u),u=w+v,y=u-w,r=u-y,v-=y,w-=r,r=w+v,w=u;for(;k<l;)u=c,v=u+r,u=v-u,(u=r-u)&&(a[g++]=u),u=w+v,y=u-w,r=u-y,v-=y,w-=r,r=w+v,w=u,k+=1,k<l&&(c=m[k]);for(;p<e;)u=d,v=u+r,u=v-u,(u=r-u)&&(a[g++]=u),u=w+v,y=u-w,r=u-y,v-=y,w-=r,r=w+v,w=u,p+=1,p<e&&(d=h[p]);
r&&(a[g++]=r);w&&(a[g++]=w);g||(a[g++]=0);a.length=g;return a}},{}],526:[function(b,F,C){F.exports=function(m){return 0>m?-1:0<m?1:0}},{}],527:[function(b,F,C){F.exports=function(l){return h(m(l))};var m=b("boundary-cells"),h=b("reduce-simplicial-complex")},{"boundary-cells":100,"reduce-simplicial-complex":507}],528:[function(b,F,C){F.exports=function(a,g,k,p){k=k||0;if("undefined"===typeof p){for(var n=a.length,c=p=0;c<n;++c)p=Math.max(p,a[c].length)|0;--p}if(0===a.length||1>p)return{cells:[],vertexIds:[],
vertexWeights:[]};c=+k;var f=g.length;n=h.mallocUint8(f);for(var d=0;d<f;++d)n[d]=g[d]<c|0;var q=p,r=a.length;c=h.mallocUint32(2*(q*(q+1)/2*r|0));for(d=f=0;d<r;++d){var u=a[d];q=u.length;for(var v=0;v<q;++v)for(var w=0;w<v;++w){var y=u[w],D=u[v];c[f++]=Math.min(y,D)|0;c[f++]=Math.max(y,D)|0}}l(m(c,[f/2|0,2]));for(d=q=2;d<f;d+=2)if(c[d-2]!==c[d]||c[d-1]!==c[d+1])c[q++]=c[d],c[q++]=c[d+1];c=m(c,[q/2|0,2]);k=+k;f=c.data;d=c.shape[0];q=h.mallocDouble(d);for(u=r=0;u<d;++u)v=f[2*u],w=f[2*u+1],n[v]!==n[w]&&
(y=g[v],D=g[w],f[2*r]=v,f[2*r+1]=w,q[r++]=(D-k)/(D-y));c.shape[0]=r;k=m(q,[r]);f=g.length|0;g=h.mallocInt32(2*f);d=c.shape[0];q=c.data;for(u=r=g[0]=0;u<d;++u)if(v=q[2*u],v!==r){for(g[2*r+1]=u;++r<v;)g[2*r]=u,g[2*r+1]=u;g[2*r]=u}for(g[2*r+1]=d;++r<f;)g[2*r]=g[2*r+1]=d;a=e(p)(a,c.data,g,n);f=c.shape[0]|0;d=c.data;p=Array(f);for(q=0;q<f;++q)p[q]=[d[2*q],d[2*q+1]];f=[].slice.call(k.data,0,k.shape[0]);h.free(n);h.free(c.data);h.free(k.data);h.free(g);return{cells:a,vertexIds:p,vertexWeights:f}};var m=
b("ndarray"),h=b("typedarray-pool"),l=b("ndarray-sort"),e=b("./lib/codegen")},{"./lib/codegen":529,ndarray:469,"ndarray-sort":468,"typedarray-pool":567}],529:[function(b,F,C){F.exports=function(e){var a=l[e];if(!a){a=l;var g=Array(e+1);g[0]=[[]];for(var k=1;k<=e;++k)for(var p=g[k]=h(k),n=0;n<p.length;++n);var c=["function B(C,E,i,j){","var a\x3dMath.min(i,j)|0,b\x3dMath.max(i,j)|0,l\x3dC[2*a],h\x3dC[2*a+1];","while(l\x3ch){","var m\x3d(l+h)\x3e\x3e1,v\x3dE[2*m+1];","if(v\x3d\x3d\x3db){return m}",
"if(b\x3cv){h\x3dm}else{l\x3dm+1}","}","return l;","};","function getContour",e,"d(F,E,C,S){","var n\x3dF.length,R\x3d[];","for(var i\x3d0;i\x3cn;++i){var c\x3dF[i],l\x3dc.length;"];for(k=e+1;1<k;--k){k<e+1&&c.push("else ");c.push("if(l\x3d\x3d\x3d",k,"){");p=[];for(n=0;n<k;++n)p.push("(S[c["+n+"]]\x3c\x3c"+n+")");c.push("var M\x3d",p.join("+"),";if(M\x3d\x3d\x3d0||M\x3d\x3d\x3d",(1<<k)-1,"){continue}switch(M){");p=g[k-1];for(n=0;n<p.length;++n){c.push("case ",n,":");var f=p[n];if(!(0>=f.length)){c.push("R.push(");
for(var d=0;d<f.length;++d){var q=f[d];0<d&&c.push(",");c.push("[");for(var r=0;r<q.length;++r){var u=q[r];0<r&&c.push(",");c.push("B(C,E,c[",u[0],"],c[",u[1],"])")}c.push("]")}c.push(");")}c.push("break;")}c.push("}}")}c.push("}return R;};return getContour",e,"d");g=(new Function("pool",c.join("")))(m);a=a[e]=g}return a};var m=b("typedarray-pool"),h=b("marching-simplex-table"),l={}},{"marching-simplex-table":448,"typedarray-pool":567}],530:[function(b,F,C){function m(c,f){var d=c.length,q=c.length-
f.length,r=Math.min;if(q)return q;switch(d){case 0:return 0;case 1:return c[0]-f[0];case 2:return(d=c[0]+c[1]-f[0]-f[1])?d:r(c[0],c[1])-r(f[0],f[1]);case 3:q=c[0]+c[1];var u=f[0]+f[1];if(d=q+c[2]-(u+f[2]))return d;var v=r(c[0],c[1]),w=r(f[0],f[1]);return(d=r(v,c[2])-r(w,f[2]))?d:r(v+c[2],q)-r(w+f[2],u);default:c=c.slice(0);c.sort();f=f.slice(0);f.sort();for(r=0;r<d;++r)if(q=c[r]-f[r])return q;return 0}}function h(c,f){return m(c[0],f[0])}function l(c,f){if(f){for(var d=c.length,q=Array(d),r=0;r<d;++r)q[r]=
[c[r],f[r]];q.sort(h);for(r=0;r<d;++r)c[r]=q[r][0],f[r]=q[r][1]}else c.sort(m);return c}function e(c){if(0===c.length)return[];for(var f=1,d=c.length,q=1;q<d;++q){var r=c[q];m(r,c[q-1])&&(q===f?f++:c[f++]=r)}c.length=f;return c}function a(c,f){for(var d=0,q=c.length-1,r=-1;d<=q;){var u=d+q>>1,v=m(c[u],f);0>=v?(0===v&&(r=u),d=u+1):0<v&&(q=u-1)}return r}function g(c,f){for(var d=Array(c.length),q=0,r=d.length;q<r;++q)d[q]=[];r=[];q=0;for(var u=f.length;q<u;++q)for(var v=f[q],w=v.length,y=1,D=1<<w;y<
D;++y){r.length=p.popCount(y);for(var x=0,E=0;E<w;++E)y&1<<E&&(r[x++]=v[E]);x=a(c,r);if(!(0>x))for(;!(d[x++].push(q),x>=c.length||0!==m(c[x],r)););}return d}function k(c,f){if(0>f)return[];for(var d=[],q=(1<<f+1)-1,r=0;r<c.length;++r)for(var u=c[r],v=q;v<1<<u.length;v=p.nextCombination(v)){for(var w=Array(f+1),y=0,D=0;D<u.length;++D)v&1<<D&&(w[y++]=u[D]);d.push(w)}return l(d)}"use restrict";var p=b("bit-twiddle"),n=b("union-find");C.dimension=function(c){for(var f=0,d=Math.max,q=0,r=c.length;q<r;++q)f=
d(f,c[q].length);return f-1};C.countVertices=function(c){for(var f=-1,d=Math.max,q=0,r=c.length;q<r;++q)for(var u=c[q],v=0,w=u.length;v<w;++v)f=d(f,u[v]);return f+1};C.cloneCells=function(c){for(var f=Array(c.length),d=0,q=c.length;d<q;++d)f[d]=c[d].slice(0);return f};C.compareCells=m;C.normalize=l;C.unique=e;C.findCell=a;C.incidence=g;C.dual=function(c,f){if(!f)return g(e(k(c,0)),c,0);for(var d=Array(f),q=0;q<f;++q)d[q]=[];q=0;for(f=c.length;q<f;++q)for(var r=c[q],u=0,v=r.length;u<v;++u)d[r[u]].push(q);
return d};C.explode=function(c){for(var f=[],d=0,q=c.length;d<q;++d)for(var r=c[d],u=r.length|0,v=1,w=1<<u;v<w;++v){for(var y=[],D=0;D<u;++D)v>>>D&1&&y.push(r[D]);f.push(y)}return l(f)};C.skeleton=k;C.boundary=function(c){for(var f=[],d=0,q=c.length;d<q;++d)for(var r=c[d],u=0,v=r.length;u<v;++u){for(var w=Array(r.length-1),y=0,D=0;y<v;++y)y!==u&&(w[D++]=r[y]);f.push(w)}return l(f)};C.connectedComponents=function(c,f){if(f){f=new n(f);for(var d=0;d<c.length;++d)for(var q=c[d],r=0;r<q.length;++r)for(var u=
r+1;u<q.length;++u)f.link(q[r],q[u]);q=[];r=f.ranks;for(d=0;d<r.length;++d)r[d]=-1;for(d=0;d<c.length;++d)u=f.find(c[d][0]),0>r[u]?(r[u]=q.length,q.push([c[d].slice(0)])):q[r[u]].push(c[d].slice(0));return q}f=e(l(k(c,0)));d=new n(f.length);for(q=0;q<c.length;++q)for(r=c[q],u=0;u<r.length;++u)for(var v=a(f,[r[u]]),w=u+1;w<r.length;++w)d.link(v,a(f,[r[w]]));r=[];u=d.ranks;for(q=0;q<u.length;++q)u[q]=-1;for(q=0;q<c.length;++q)v=d.find(a(f,[c[q][0]])),0>u[v]?(u[v]=r.length,r.push([c[q].slice(0)])):r[u[v]].push(c[q].slice(0));
return r}},{"bit-twiddle":97,"union-find":568}],531:[function(b,F,C){arguments[4][97][0].apply(C,arguments)},{dup:97}],532:[function(b,F,C){arguments[4][530][0].apply(C,arguments)},{"bit-twiddle":531,dup:530,"union-find":533}],533:[function(b,F,C){function m(h){this.roots=Array(h);this.ranks=Array(h);for(var l=0;l<h;++l)this.roots[l]=l,this.ranks[l]=0}"use restrict";F.exports=m;m.prototype.length=function(){return this.roots.length};m.prototype.makeSet=function(){var h=this.roots.length;this.roots.push(h);
this.ranks.push(0);return h};m.prototype.find=function(h){for(var l=this.roots;l[h]!==h;){var e=l[h];l[h]=l[e];h=e}return h};m.prototype.link=function(h,l){h=this.find(h);l=this.find(l);if(h!==l){var e=this.ranks,a=this.roots,g=e[h],k=e[l];g<k?a[h]=l:k<g?a[l]=h:(a[l]=h,++e[h])}}},{}],534:[function(b,F,C){F.exports=function(l,e,a){function g(M){if(D[M])return Infinity;var N=v[M],H=w[M];if(0>N||0>H)return Infinity;N=e[N];H=e[H];return Math.abs(m(e[M],N,H))/Math.sqrt(Math.pow(N[0]-H[0],2)+Math.pow(N[1]-
H[1],2))}function k(M,N){var H=t[M],J=t[N];t[M]=J;t[N]=H;G[H]=N;G[J]=M}function p(M){for(var N=y[t[M]];;){var H=N,J=2*M+1,O=2*(M+1),Q=M;if(J<I){var U=y[t[J]];U<H&&(Q=J,H=U)}O<I&&y[t[O]]<H&&(Q=O);if(Q===M)return M;k(M,Q);M=Q}}function n(M){for(var N=y[t[M]];0<M;){var H=M&1?M-1>>1:(M>>1)-1;if(0<=H&&N<y[t[H]])k(M,H),M=H;else return M}}function c(){if(0<I){var M=t[0];k(0,I-1);--I;p(0);return M}return-1}function f(M,N){var H=t[M];if(y[H]===N)return M;y[H]=-Infinity;n(M);c();y[H]=N;I+=1;return n(I-1)}function d(M){if(!D[M]){D[M]=
!0;var N=v[M];M=w[M];0<=v[M]&&(v[M]=N);0<=w[N]&&(w[N]=M);0<=G[N]&&f(G[N],g(N));0<=G[M]&&f(G[M],g(M))}}function q(M,N){if(0>M[N])return N;var H=N,J=N;do{var O=M[J];if(!D[J]||0>O||O===J)break;J=O;O=M[J];if(!D[J]||0>O||O===J)break;J=O;H=M[H]}while(H!==J);for(;N!==J;N=M[N])M[N]=J;return J}for(var r=e.length,u=l.length,v=Array(r),w=Array(r),y=Array(r),D=Array(r),x=0;x<r;++x)v[x]=w[x]=-1,y[x]=Infinity,D[x]=!1;for(x=0;x<u;++x){var E=l[x];if(2!==E.length)throw Error("Input must be a graph");var B=E[1];E=
E[0];w[E]=-1!==w[E]?-2:B;v[B]=-1!==v[B]?-2:E}var t=[],G=Array(r);for(x=0;x<r;++x)Infinity>(y[x]=g(x))?(G[x]=t.length,t.push(x)):G[x]=-1;var I=t.length;for(x=I>>1;0<=x;--x)p(x);for(;;){x=c();if(0>x||y[x]>a)break;d(x)}a=[];for(x=0;x<r;++x)D[x]||(G[x]=a.length,a.push(e[x].slice()));var L=[];l.forEach(function(M){var N=q(v,M[0]);M=q(w,M[1]);0<=N&&0<=M&&N!==M&&(N=G[N],M=G[M],N!==M&&L.push([N,M]))});h.unique(h.normalize(L));return{positions:a,edges:L}};var m=b("robust-orientation"),h=b("simplicial-complex")},
{"robust-orientation":520,"simplicial-complex":532}],535:[function(b,F,C){function m(l,e){if(e[0][0]<e[1][0]){var a=e[0];e=e[1]}else if(e[0][0]>e[1][0])a=e[1],e=e[0];else{a=Math.min(l[0][1],l[1][1]);l=Math.max(l[0][1],l[1][1]);var g=Math.min(e[0][1],e[1][1]);e=Math.max(e[0][1],e[1][1]);return l<g?l-g:a>e?a-e:l-e}l[0][1]<l[1][1]?(g=l[0],l=l[1]):(g=l[1],l=l[0]);return(g=h(e,a,g))?g:(g=h(e,a,l))?g:l-e}F.exports=function(l,e){if(e[0][0]<e[1][0]){var a=e[0];var g=e[1]}else if(e[0][0]>e[1][0])a=e[1],g=
e[0];else return m(e,l);if(l[0][0]<l[1][0])e=l[0],l=l[1];else if(l[0][0]>l[1][0])e=l[1],l=l[0];else return-m(l,e);var k=h(a,g,l),p=h(a,g,e);if(0>k){if(0>=p)return k}else if(0<k){if(0<=p)return k}else if(p)return p;k=h(l,e,g);p=h(l,e,a);if(0>k){if(0>=p)return k}else if(0<k){if(0<=p)return k}else if(p)return p;return g[0]-l[0]};var h=b("robust-orientation")},{"robust-orientation":520}],536:[function(b,F,C){arguments[4][243][0].apply(C,arguments)},{dup:243}],537:[function(b,F,C){function m(c,f,d){this.slabs=
c;this.coordinates=f;this.horizontal=d}function h(c,f){return c.y-f}function l(c,f){for(var d=null;c;){var q=c.key;if(q[0][0]<q[1][0]){var r=q[0];var u=q[1]}else r=q[1],u=q[0];r=p(r,u,f);if(0>r)c=c.left;else if(0<r)if(f[0]!==q[1][0])d=c,c=c.right;else{if(q=l(c.right,f))return q;c=c.left}else{if(f[0]!==q[1][0])return c;if(q=l(c.right,f))return q;c=c.left}}return d}function e(c,f,d,q){this.y=c;this.index=f;this.start=d;this.closed=q}function a(c,f,d,q){this.x=c;this.segment=f;this.create=d;this.index=
q}F.exports=function(c){for(var f=c.length,d=2*f,q=Array(d),r=0;r<f;++r){var u=c[r],v=u[0][0]<u[1][0];q[2*r]=new a(u[0][0],u,v,r);q[2*r+1]=new a(u[1][0],u,!v,r)}q.sort(function(x,E){var B=x.x-E.x;return B?B:(B=x.create-E.create)?B:Math.min(x.segment[0][1],x.segment[1][1])-Math.min(E.segment[0][1],E.segment[1][1])});c=k(n);f=[];u=[];v=[];for(r=0;r<d;){for(var w=q[r].x,y=[];r<d;){var D=q[r];if(D.x!==w)break;r+=1;D.segment[0][0]===D.x&&D.segment[1][0]===D.x?D.create&&(D.segment[0][1]<D.segment[1][1]?
(y.push(new e(D.segment[0][1],D.index,!0,!0)),y.push(new e(D.segment[1][1],D.index,!1,!1))):(y.push(new e(D.segment[1][1],D.index,!0,!1)),y.push(new e(D.segment[0][1],D.index,!1,!0)))):c=D.create?c.insert(D.segment,D.index):c.remove(D.segment)}f.push(c.root);u.push(w);v.push(y)}return new m(f,u,v)};var g=b("binary-search-bounds"),k=b("functional-red-black-tree"),p=b("robust-orientation"),n=b("./lib/order-segments");m.prototype.castUp=function(c){var f=g.le(this.coordinates,c[0]);if(0>f)return-1;var d=
l(this.slabs[f],c),q=-1;d&&(q=d.value);if(this.coordinates[f]===c[0]){var r=null;d&&(r=d.key);0<f&&(d=l(this.slabs[f-1],c))&&(r?0<n(d.key,r)&&(r=d.key,q=d.value):(q=d.value,r=d.key));d=this.horizontal[f];if(0<d.length){var u=g.ge(d,c[1],h);if(u<d.length){f=d[u];if(c[1]===f.y){if(f.closed)return f.index;for(;u<d.length-1&&d[u+1].y===c[1];)if(u+=1,f=d[u],f.closed)return f.index;if(f.y===c[1]&&!f.start){u+=1;if(u>=d.length)return q;f=d[u]}}f.start?r?(c=p(r[0],r[1],[c[0],f.y]),r[0][0]>r[1][0]&&(c=-c),
0<c&&(q=f.index)):q=f.index:f.y!==c[1]&&(q=f.index)}}}return q}},{"./lib/order-segments":535,"binary-search-bounds":536,"functional-red-black-tree":247,"robust-orientation":520}],538:[function(b,F,C){function m(a,g){a=e(l(a,g),[g[g.length-1]]);return a[a.length-1]}function h(a,g,k,p){g=-g/(p-g);0>g?g=0:1<g&&(g=1);p=1-g;for(var n=a.length,c=Array(n),f=0;f<n;++f)c[f]=g*a[f]+p*k[f];return c}var l=b("robust-dot-product"),e=b("robust-sum");F.exports=function(a,g){for(var k=[],p=[],n=m(a[a.length-1],g),
c=a[a.length-1],f,d=0;d<a.length;++d,c=f){f=a[d];var q=m(f,g);if(0>n&&0<q||0<n&&0>q)n=h(c,q,f,n),k.push(n),p.push(n.slice());0>q?p.push(f.slice()):0<q?k.push(f.slice()):(k.push(f.slice()),p.push(f.slice()));n=q}return{positive:k,negative:p}};F.exports.positive=function(a,g){for(var k=[],p=m(a[a.length-1],g),n=a[a.length-1],c,f=0;f<a.length;++f,n=c){c=a[f];var d=m(c,g);(0>p&&0<d||0<p&&0>d)&&k.push(h(n,d,c,p));0<=d&&k.push(c.slice());p=d}return k};F.exports.negative=function(a,g){for(var k=[],p=m(a[a.length-
1],g),n=a[a.length-1],c,f=0;f<a.length;++f,n=c){c=a[f];var d=m(c,g);(0>p&&0<d||0<p&&0>d)&&k.push(h(n,d,c,p));0>=d&&k.push(c.slice());p=d}return k}},{"robust-dot-product":517,"robust-sum":525}],539:[function(b,F,C){!function(){function m(a){var g=a;if(e[g])g=e[g];else{for(var k=g,p,n=[],c=0;k;){if(null!==(p=l.text.exec(k)))n.push(p[0]);else if(null!==(p=l.modulo.exec(k)))n.push("%");else if(null!==(p=l.placeholder.exec(k))){if(p[2]){c|=1;var f=[],d=p[2],q;if(null!==(q=l.key.exec(d)))for(f.push(q[1]);""!==
(d=d.substring(q[0].length));)if(null!==(q=l.key_access.exec(d)))f.push(q[1]);else if(null!==(q=l.index_access.exec(d)))f.push(q[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");p[2]=f}else c|=2;if(3===c)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:p[0],param_no:p[1],keys:p[2],sign:p[3],pad_char:p[4],align:p[5],width:p[6],precision:p[7],
type:p[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");k=k.substring(p[0].length)}g=e[g]=n}k=arguments;p=1;n=g.length;f="";var r,u;for(d=0;d<n;d++)if("string"===typeof g[d])f+=g[d];else if("object"===typeof g[d]){q=g[d];if(q.keys)for(c=k[p],r=0;r<q.keys.length;r++){if(void 0==c)throw Error(m('[sprintf] Cannot access property "%s" of undefined value "%s"',q.keys[r],q.keys[r-1]));c=c[q.keys[r]]}else c=q.param_no?k[q.param_no]:k[p++];l.not_type.test(q.type)&&l.not_primitive.test(q.type)&&
c instanceof Function&&(c=c());if(l.numeric_arg.test(q.type)&&"number"!==typeof c&&isNaN(c))throw new TypeError(m("[sprintf] expecting number but found %T",c));l.number.test(q.type)&&(u=0<=c);switch(q.type){case "b":c=parseInt(c,10).toString(2);break;case "c":c=String.fromCharCode(parseInt(c,10));break;case "d":case "i":c=parseInt(c,10);break;case "j":c=JSON.stringify(c,null,q.width?parseInt(q.width):0);break;case "e":c=q.precision?parseFloat(c).toExponential(q.precision):parseFloat(c).toExponential();
break;case "f":c=q.precision?parseFloat(c).toFixed(q.precision):parseFloat(c);break;case "g":c=q.precision?String(Number(c.toPrecision(q.precision))):parseFloat(c);break;case "o":c=(parseInt(c,10)>>>0).toString(8);break;case "s":c=String(c);c=q.precision?c.substring(0,q.precision):c;break;case "t":c=String(!!c);c=q.precision?c.substring(0,q.precision):c;break;case "T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase();c=q.precision?c.substring(0,q.precision):c;break;case "u":c=parseInt(c,
10)>>>0;break;case "v":c=c.valueOf();c=q.precision?c.substring(0,q.precision):c;break;case "x":c=(parseInt(c,10)>>>0).toString(16);break;case "X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase()}if(l.json.test(q.type))f+=c;else{if(!l.number.test(q.type)||u&&!q.sign)var v="";else v=u?"+":"-",c=c.toString().replace(l.sign,"");r=q.pad_char?"0"===q.pad_char?"0":q.pad_char.charAt(1):" ";var w=q.width-(v+c).length;w=q.width?0<w?r.repeat(w):"":"";f+=q.align?v+c+w:"0"===r?v+w+c:w+v+c}}return f}function h(a,
g){return m.apply(null,[a].concat(g||[]))}var l={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},e=Object.create(null);"undefined"!==typeof C&&(C.sprintf=m,C.vsprintf=h);
"undefined"!==typeof window&&(window.sprintf=m,window.vsprintf=h)}()},{}],540:[function(b,F,C){var m=b("parenthesis");F.exports=function(h,l,e){if(null==h)throw Error("First argument should be a string");if(null==l)throw Error("Separator should be a string or a RegExp");if(!e)e={};else if("string"===typeof e||Array.isArray(e))e={ignore:e};null==e.escape&&(e.escape=!0);null==e.ignore?e.ignore="[] () {} \x3c\x3e \"\" '' ``  ".split(" "):("string"===typeof e.ignore&&(e.ignore=[e.ignore]),e.ignore=
e.ignore.map(function(n){1===n.length&&(n+=n);return n}));h=m.parse(h,{flat:!0,brackets:e.ignore});var a=h[0].split(l);if(e.escape){e=[];for(var g=0;g<a.length;g++){var k=a[g],p=a[g+1];"\\"===k[k.length-1]&&"\\"!==k[k.length-2]?(e.push(k+l+p),g++):e.push(k)}a=e}for(g=0;g<a.length;g++)h[0]=a[g],a[g]=m.stringify(h,{flat:!0});return a}},{parenthesis:477}],541:[function(b,F,C){F.exports=function(m){function h(v){var w=[v],y=[v];e[v]=a[v]=f;g[v]=!0;for(f+=1;0<y.length;){v=y[y.length-1];var D=m[v];if(k[v]<
D.length){for(var x=k[v];x<D.length;++x){var E=D[x];if(0>e[E]){e[E]=a[E]=f;g[E]=!0;f+=1;w.push(E);y.push(E);break}else g[E]&&(a[v]=Math.min(a[v],a[E])|0);0<=p[E]&&n[v].push(p[E])}k[v]=x}else{if(a[v]===e[v]){var B=[];D=[];E=0;for(x=w.length-1;0<=x;--x){var t=w[x];g[t]=!1;B.push(t);D.push(n[t]);E+=n[t].length;p[t]=d.length;if(t===v){w.length=x;break}}d.push(B);v=Array(E);for(x=0;x<D.length;x++)for(B=0;B<D[x].length;B++)v[--E]=D[x][B];q.push(v)}y.pop()}}}for(var l=m.length,e=Array(l),a=Array(l),g=Array(l),
k=Array(l),p=Array(l),n=Array(l),c=0;c<l;++c)e[c]=-1,a[c]=0,g[c]=!1,k[c]=0,p[c]=-1,n[c]=[];var f=0,d=[],q=[];for(c=0;c<l;++c)0>e[c]&&h(c);for(c=0;c<q.length;c++){var r=q[c];if(0!==r.length){r.sort(function(v,w){return v-w});l=[r[0]];for(var u=1;u<r.length;u++)r[u]!==r[u-1]&&l.push(r[u]);q[c]=l}}return{components:d,adjacencyList:q}}},{}],542:[function(b,F,C){function m(g,k){var p=g.length,n=["'use strict';"],c="surfaceNets"+g.join("_")+"d"+k;n.push("var contour\x3dgenContour({","order:[",g.join(),
"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p \x3e c)|0 },");"generic"===k&&n.push("getters:[0],");var f=[];k=[];for(g=0;g<p;++g)f.push("d"+g),k.push("d"+g);for(g=0;g<1<<p;++g)f.push("v"+g),k.push("v"+g);for(g=0;g<1<<p;++g)f.push("p"+g),k.push("p"+g);f.push("a","b","c");k.push("a","c");n.push("vertex:function vertexFunc(",f.join(),"){");f=[];for(g=0;g<1<<p;++g)f.push("(p"+g+"\x3c\x3c"+g+")");n.push("var m\x3d(",f.join("+"),")|0;if(m\x3d\x3d\x3d0||m\x3d\x3d\x3d",(1<<(1<<
p))-1,"){return}");f=[];var d=[];128>=1<<(1<<p)?(n.push("switch(m){"),d=n):n.push("switch(m\x3e\x3e\x3e7){");for(g=0;g<1<<(1<<p);++g){128<1<<(1<<p)&&0===g%128&&(0<f.length&&d.push("}}"),d="vExtra"+f.length,n.push("case ",g>>>7,":",d,"(m\x260x7f,",k.join(),");break;"),d=["function ",d,"(m,",k.join(),"){switch(m){"],f.push(d));d.push("case ",g&127,":");for(var q=Array(p),r=Array(p),u=Array(p),v=Array(p),w=0,y=0;y<p;++y)q[y]=[],r[y]=[],u[y]=0,v[y]=0;for(y=0;y<1<<p;++y)for(var D=0;D<p;++D){var x=y^1<<
D;if(!(x>y)&&!(g&1<<x)!==!(g&1<<y)){var E=1;g&1<<x?r[D].push("v"+x+"-v"+y):(r[D].push("v"+y+"-v"+x),E=-E);0>E?(q[D].push("-v"+y+"-v"+x),u[D]+=2):(q[D].push("v"+y+"+v"+x),u[D]-=2);w+=1;for(E=0;E<p;++E)E!==D&&(x&1<<E?v[E]+=1:--v[E])}}y=[];for(D=0;D<p;++D)0===q[D].length?y.push("d"+D+"-0.5"):(x="",0>u[D]?x=u[D]+"*c":0<u[D]&&(x="+"+u[D]+"*c"),y.push("d"+D+"-"+(.5+v[D]/w*.5)+"-"+q[D].length/w*.5+"*("+q[D].join("+")+x+")/("+r[D].join("+")+")"));d.push("a.push([",y.join(),"]);","break;")}n.push("}},");0<
f.length&&d.push("}}");k=[];for(g=0;g<1<<p-1;++g)k.push("v"+g);k.push("c0","c1","p0","p1","a","b","c");n.push("cell:function cellFunc(",k.join(),"){");p=l(p-1);n.push("if(p0){b.push(",p.map(function(B){return"["+B.map(function(t){return"v"+t})+"]"}).join(),")}else{b.push(",p.map(function(B){B=B.slice();B.reverse();return"["+B.map(function(t){return"v"+t})+"]"}).join(),")}}});function ",c,"(array,level){var verts\x3d[],cells\x3d[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
c,";");for(g=0;g<f.length;++g)n.push(f[g].join(""));return(new Function("genContour",n.join("")))(h)}F.exports=function(g,k){if(0>=g.dimension)return{positions:[],cells:[]};if(1===g.dimension){g=e(g,k);k=g.length;for(var p=Array(k),n=Array(k),c=0;c<k;++c)p[c]=[g[c]],n[c]=[c];return{positions:p,cells:n}}p=g.order.join()+"-"+g.dtype;n=a[p];k=+k||0;n||(n=a[p]=m(g.order,g.dtype));return n(g,k)};var h=b("ndarray-extract-contour"),l=b("triangulate-hypercube"),e=b("zero-crossings"),a={}},{"ndarray-extract-contour":461,
"triangulate-hypercube":552,"zero-crossings":596}],543:[function(b,F,C){Object.defineProperty(C,"__esModule",{value:!0});var m=function(){return function(k,p){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k)){var n=[],c=!0,f=!1,d=void 0;try{for(var q=k[Symbol.iterator](),r;!(c=(r=q.next()).done)&&(n.push(r.value),!p||n.length!==p);c=!0);}catch(u){f=!0,d=u}finally{try{if(!c&&q["return"])q["return"]()}finally{if(f)throw d;}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance");
}}(),h=2*Math.PI,l=function(k,p,n,c,f,d,q){var r=k.x;k=k.y;r*=p;k*=n;return{x:c*r-f*k+d,y:f*r+c*k+q}},e=function(k,p){var n=1.5707963267948966===p?.551915024494:-1.5707963267948966===p?-.551915024494:4/3*Math.tan(p/4),c=Math.cos(k),f=Math.sin(k),d=Math.cos(k+p);k=Math.sin(k+p);return[{x:c-f*n,y:f+c*n},{x:d+k*n,y:k-d*n},{x:d,y:k}]},a=function(k,p,n,c){var f=k*n+p*c;1<f&&(f=1);-1>f&&(f=-1);return(0>k*c-p*n?-1:1)*Math.acos(f)},g=function(k,p,n,c,f,d,q,r,u,v,w,y){var D=Math.pow(f,2),x=Math.pow(d,2),E=
Math.pow(w,2),B=Math.pow(y,2),t=D*x-D*B-x*E;0>t&&(t=0);t=Math.sqrt(t/(D*B+x*E))*(q===r?-1:1);q=t*f/d*y;t=t*-d/f*w;k=v*q-u*t+(k+n)/2;p=u*q+v*t+(p+c)/2;c=(w-q)/f;u=(y-t)/d;f=(-w-q)/f;y=(-y-t)/d;d=a(1,0,c,u);y=a(c,u,f,y);0===r&&0<y&&(y-=h);1===r&&0>y&&(y+=h);return[k,p,d,y]};C.default=function(k){var p=k.px,n=k.py,c=k.cx,f=k.cy,d=k.rx,q=k.ry,r=k.xAxisRotation,u=void 0===r?0:r;r=k.largeArcFlag;var v=k.sweepFlag;k=[];if(0===d||0===q)return[];var w=Math.sin(u*h/360),y=Math.cos(u*h/360);u=y*(p-c)/2+w*(n-
f)/2;var D=-w*(p-c)/2+y*(n-f)/2;if(0===u&&0===D)return[];d=Math.abs(d);q=Math.abs(q);var x=Math.pow(u,2)/Math.pow(d,2)+Math.pow(D,2)/Math.pow(q,2);1<x&&(d*=Math.sqrt(x),q*=Math.sqrt(x));p=g(p,n,c,f,d,q,void 0===r?0:r,void 0===v?0:v,w,y,u,D);n=m(p,4);var E=n[0],B=n[1];p=n[2];n=n[3];c=Math.abs(n)/(h/4);1E-7>Math.abs(1-c)&&(c=1);c=Math.max(Math.ceil(c),1);n/=c;for(f=0;f<c;f++)k.push(e(p,n)),p+=n;return k.map(function(t){var G=l(t[0],d,q,y,w,E,B),I=G.x;G=G.y;var L=l(t[1],d,q,y,w,E,B),M=L.x;L=L.y;t=l(t[2],
d,q,y,w,E,B);return{x1:I,y1:G,x2:M,y2:L,x:t.x,y:t.y}})};F.exports=C.default},{}],544:[function(b,F,C){var m=b("parse-svg-path"),h=b("abs-svg-path"),l=b("normalize-svg-path"),e=b("is-svg-path"),a=b("assert");F.exports=function(g){Array.isArray(g)&&1===g.length&&"string"===typeof g[0]&&(g=g[0]);"string"===typeof g&&(a(e(g),"String is not an SVG path."),g=m(g));a(Array.isArray(g),"Argument should be a string or an array of path segments.");g=h(g);g=l(g);if(!g.length)return[0,0,0,0];for(var k=[Infinity,
Infinity,-Infinity,-Infinity],p=0,n=g.length;p<n;p++)for(var c=g[p].slice(1),f=0;f<c.length;f+=2)c[f+0]<k[0]&&(k[0]=c[f+0]),c[f+1]<k[1]&&(k[1]=c[f+1]),c[f+0]>k[2]&&(k[2]=c[f+0]),c[f+1]>k[3]&&(k[3]=c[f+1]);return k}},{"abs-svg-path":65,assert:73,"is-svg-path":445,"normalize-svg-path":545,"parse-svg-path":479}],545:[function(b,F,C){function m(e,a,g,k){return["C",e,a,g,k,g,k]}function h(e,a,g,k,p,n){return["C",e/3+2/3*g,a/3+2/3*k,p/3+2/3*g,n/3+2/3*k,p,n]}F.exports=function(e){for(var a,g=[],k=0,p=0,
n=0,c=0,f=null,d=null,q=0,r=0,u=0,v=e.length;u<v;u++){var w=e[u],y=w[0];switch(y){case "M":n=w[1];c=w[2];break;case "A":var D=l({px:q,py:r,cx:w[6],cy:w[7],rx:w[1],ry:w[2],xAxisRotation:w[3],largeArcFlag:w[4],sweepFlag:w[5]});if(!D.length)continue;for(a=0;a<D.length;a++)w=D[a],w=["C",w.x1,w.y1,w.x2,w.y2,w.x,w.y],a<D.length-1&&g.push(w);break;case "S":D=q;if("C"==a||"S"==a)D+=D-k,r+=r-p;w=["C",D,r,w[1],w[2],w[3],w[4]];break;case "T":"Q"==a||"T"==a?(f=2*q-f,d=2*r-d):(f=q,d=r);w=h(q,r,f,d,w[1],w[2]);
break;case "Q":f=w[1];d=w[2];w=h(q,r,w[1],w[2],w[3],w[4]);break;case "L":w=m(q,r,w[1],w[2]);break;case "H":w=m(q,r,w[1],r);break;case "V":w=m(q,r,q,w[1]);break;case "Z":w=m(q,r,n,c)}a=y;q=w[w.length-2];r=w[w.length-1];4<w.length?(k=w[w.length-4],p=w[w.length-3]):(k=q,p=r);g.push(w)}return g};var l=b("svg-arc-to-cubic-bezier")},{"svg-arc-to-cubic-bezier":543}],546:[function(b,F,C){function m(){if(null!=n)return n;var c=document.createElement("canvas").getContext("2d");c.canvas.width=c.canvas.height=
1;if(!window.Path2D)return n=!1;var f=new Path2D("M0,0h1v1h-1v-1Z");c.fillStyle="black";c.fill(f);return n=(c=c.getImageData(0,0,1,1))&&c.data&&255===c.data[3]}var h=b("svg-path-bounds"),l=b("parse-svg-path"),e=b("draw-svg-path"),a=b("is-svg-path"),g=b("bitmap-sdf"),k=document.createElement("canvas"),p=k.getContext("2d");F.exports=function(c,f){if(!a(c))throw Error("Argument should be valid svg path string");f||(f={});if(f.shape){var d=f.shape[0];var q=f.shape[1]}else d=k.width=f.w||f.width||200,
q=k.height=f.h||f.height||200;var r=Math.min(d,q),u=f.stroke||0,v=f.viewbox||f.viewBox||h(c);v=[d/(v[2]-v[0]),q/(v[3]-v[1])];v=Math.min(v[0]||0,v[1]||0)/2;p.fillStyle="black";p.fillRect(0,0,d,q);p.fillStyle="white";u&&("number"!=typeof u&&(u=1),p.strokeStyle=0<u?"white":"black",p.lineWidth=Math.abs(u));p.translate(.5*d,.5*q);p.scale(v,v);m()?(c=new Path2D(c),p.fill(c),u&&p.stroke(c)):(c=l(c),e(p,c),p.fill(),u&&p.stroke());p.setTransform(1,0,0,1,0,0);return g(p,{cutoff:null!=f.cutoff?f.cutoff:.5,radius:null!=
f.radius?f.radius:.5*r})};var n},{"bitmap-sdf":98,"draw-svg-path":174,"is-svg-path":445,"parse-svg-path":479,"svg-path-bounds":544}],547:[function(b,F,C){(function(m){function h(a,g,k){k=k||{};var p=e[a];p||(p=e[a]={" ":{data:new Float32Array(0),shape:.2}});var n=p[g];if(!n)if(1>=g.length||!/\d/.test(g)){n=l(g,{triangles:!0,font:a,textAlign:k.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});k=n.cells;n=n.positions;for(var c=
new Float32Array(6*k.length),f=a=0,d=0;d<k.length;++d)for(var q=k[d],r=0;3>r;++r){var u=n[q[r]];c[a++]=u[0];c[a++]=u[1]+1.4;f=Math.max(u[0],f)}n=p[g]={data:c,shape:f}}else{f=g.split(/(\d|\s)/);k=Array(f.length);for(c=n=d=0;c<f.length;++c)k[c]=h(a,f[c]),d+=k[c].data.length,n+=k[c].shape,0<c&&(n+=.02);a=new Float32Array(d);f=0;d=-.5*n;for(c=0;c<k.length;++c){q=k[c].data;for(r=0;r<q.length;r+=2)a[f++]=q[r]+d,a[f++]=q[r+1];d+=k[c].shape+.02}n=p[g]={data:a,shape:n}}return n}F.exports=h;var l=b("vectorize-text");
m=window||m.global||{};var e=m.__TEXT_CACHE||{};m.__TEXT_CACHE={}}).call(this,b("_process"))},{_process:500,"vectorize-text":572}],548:[function(b,F,C){(function(m){function h(Y,ba){var ea,ca;Y=Y?Y:"";ba=ba||{};if(Y instanceof h)return Y;if(!(this instanceof h))return new h(Y,ba);var ia=Y;var fa={r:0,g:0,b:0};var ha=1;var na=ea=!1;if("string"==typeof ia)a:{ia=ia.replace(L,"").replace(M,"").toLowerCase();var pa=!1;if(U[ia])ia=U[ia],pa=!0;else if("transparent"==ia){ia={r:0,g:0,b:0,a:0,format:"name"};
break a}ia=(ca=V.rgb.exec(ia))?{r:ca[1],g:ca[2],b:ca[3]}:(ca=V.rgba.exec(ia))?{r:ca[1],g:ca[2],b:ca[3],a:ca[4]}:(ca=V.hsl.exec(ia))?{h:ca[1],s:ca[2],l:ca[3]}:(ca=V.hsla.exec(ia))?{h:ca[1],s:ca[2],l:ca[3],a:ca[4]}:(ca=V.hsv.exec(ia))?{h:ca[1],s:ca[2],v:ca[3]}:(ca=V.hsva.exec(ia))?{h:ca[1],s:ca[2],v:ca[3],a:ca[4]}:(ca=V.hex8.exec(ia))?{r:parseInt(ca[1],16),g:parseInt(ca[2],16),b:parseInt(ca[3],16),a:parseInt(ca[4],16)/255,format:pa?"name":"hex8"}:(ca=V.hex6.exec(ia))?{r:parseInt(ca[1],16),g:parseInt(ca[2],
16),b:parseInt(ca[3],16),format:pa?"name":"hex"}:(ca=V.hex4.exec(ia))?{r:parseInt(ca[1]+""+ca[1],16),g:parseInt(ca[2]+""+ca[2],16),b:parseInt(ca[3]+""+ca[3],16),a:parseInt(ca[4]+""+ca[4],16)/255,format:pa?"name":"hex8"}:(ca=V.hex3.exec(ia))?{r:parseInt(ca[1]+""+ca[1],16),g:parseInt(ca[2]+""+ca[2],16),b:parseInt(ca[3]+""+ca[3],16),format:pa?"name":"hex"}:!1}if("object"==typeof ia){if(I(ia.r)&&I(ia.g)&&I(ia.b))fa=ia.g,ea=ia.b,fa={r:255*B(ia.r,255),g:255*B(fa,255),b:255*B(ea,255)},ea=!0,na="%"===String(ia.r).substr(-1)?
"prgb":"rgb";else if(I(ia.h)&&I(ia.s)&&I(ia.v)){fa=G(ia.s);na=G(ia.v);ca=ia.h;ea=fa;fa=na;ca=6*B(ca,360);ea=B(ea,100);fa=B(fa,100);na=m.floor(ca);var ra=ca-na;ca=fa*(1-ea);pa=fa*(1-ra*ea);ea=fa*(1-(1-ra)*ea);na%=6;fa={r:255*[fa,pa,ca,ca,ea,fa][na],g:255*[ea,fa,fa,pa,ca,ca][na],b:255*[ca,ca,ea,fa,fa,pa][na]};ea=!0;na="hsv"}else I(ia.h)&&I(ia.s)&&I(ia.l)&&(fa=G(ia.s),ea=G(ia.l),fa=e(ia.h,fa,ea),ea=!0,na="hsl");ia.hasOwnProperty("a")&&(ha=ia.a)}ha=E(ha);ia=ia.format||na;na=J(255,O(fa.r,0));ca=J(255,
O(fa.g,0));fa=J(255,O(fa.b,0));this._originalInput=Y;this._r=na;this._g=ca;this._b=fa;this._a=ha;this._roundA=H(100*this._a)/100;this._format=ba.format||ia;this._gradientType=ba.gradientType;1>this._r&&(this._r=H(this._r));1>this._g&&(this._g=H(this._g));1>this._b&&(this._b=H(this._b));this._ok=ea;this._tc_id=N++}function l(Y,ba,ea){Y=B(Y,255);ba=B(ba,255);ea=B(ea,255);var ca=O(Y,ba,ea),ia=J(Y,ba,ea),fa=(ca+ia)/2;if(ca==ia)var ha=ia=0;else{var na=ca-ia;ia=.5<fa?na/(2-ca-ia):na/(ca+ia);switch(ca){case Y:ha=
(ba-ea)/na+(ba<ea?6:0);break;case ba:ha=(ea-Y)/na+2;break;case ea:ha=(Y-ba)/na+4}ha/=6}return{h:ha,s:ia,l:fa}}function e(Y,ba,ea){function ca(ha,na,pa){0>pa&&(pa+=1);1<pa&&--pa;return pa<1/6?ha+6*(na-ha)*pa:.5>pa?na:pa<2/3?ha+(na-ha)*(2/3-pa)*6:ha}Y=B(Y,360);ba=B(ba,100);ea=B(ea,100);if(0===ba)ea=ba=Y=ea;else{var ia=.5>ea?ea*(1+ba):ea+ba-ea*ba,fa=2*ea-ia;ea=ca(fa,ia,Y+1/3);ba=ca(fa,ia,Y);Y=ca(fa,ia,Y-1/3)}return{r:255*ea,g:255*ba,b:255*Y}}function a(Y,ba,ea){Y=B(Y,255);ba=B(ba,255);ea=B(ea,255);var ca=
O(Y,ba,ea),ia=J(Y,ba,ea),fa=ca-ia;if(ca==ia)var ha=0;else{switch(ca){case Y:ha=(ba-ea)/fa+(ba<ea?6:0);break;case ba:ha=(ea-Y)/fa+2;break;case ea:ha=(Y-ba)/fa+4}ha/=6}return{h:ha,s:0===ca?0:fa/ca,v:ca}}function g(Y,ba,ea,ca){Y=[t(H(Y).toString(16)),t(H(ba).toString(16)),t(H(ea).toString(16))];return ca&&Y[0].charAt(0)==Y[0].charAt(1)&&Y[1].charAt(0)==Y[1].charAt(1)&&Y[2].charAt(0)==Y[2].charAt(1)?Y[0].charAt(0)+Y[1].charAt(0)+Y[2].charAt(0):Y.join("")}function k(Y,ba,ea,ca){return[t(m.round(255*parseFloat(ca)).toString(16)),
t(H(Y).toString(16)),t(H(ba).toString(16)),t(H(ea).toString(16))].join("")}function p(Y,ba){ba=0===ba?0:ba||10;Y=h(Y).toHsl();Y.s-=ba/100;Y.s=J(1,O(0,Y.s));return h(Y)}function n(Y,ba){ba=0===ba?0:ba||10;Y=h(Y).toHsl();Y.s+=ba/100;Y.s=J(1,O(0,Y.s));return h(Y)}function c(Y){return h(Y).desaturate(100)}function f(Y,ba){ba=0===ba?0:ba||10;Y=h(Y).toHsl();Y.l+=ba/100;Y.l=J(1,O(0,Y.l));return h(Y)}function d(Y,ba){ba=0===ba?0:ba||10;Y=h(Y).toRgb();Y.r=O(0,J(255,Y.r-H(255*-(ba/100))));Y.g=O(0,J(255,Y.g-
H(255*-(ba/100))));Y.b=O(0,J(255,Y.b-H(255*-(ba/100))));return h(Y)}function q(Y,ba){ba=0===ba?0:ba||10;Y=h(Y).toHsl();Y.l-=ba/100;Y.l=J(1,O(0,Y.l));return h(Y)}function r(Y,ba){Y=h(Y).toHsl();ba=(Y.h+ba)%360;Y.h=0>ba?360+ba:ba;return h(Y)}function u(Y){Y=h(Y).toHsl();Y.h=(Y.h+180)%360;return h(Y)}function v(Y){var ba=h(Y).toHsl(),ea=ba.h;return[h(Y),h({h:(ea+120)%360,s:ba.s,l:ba.l}),h({h:(ea+240)%360,s:ba.s,l:ba.l})]}function w(Y){var ba=h(Y).toHsl(),ea=ba.h;return[h(Y),h({h:(ea+90)%360,s:ba.s,l:ba.l}),
h({h:(ea+180)%360,s:ba.s,l:ba.l}),h({h:(ea+270)%360,s:ba.s,l:ba.l})]}function y(Y){var ba=h(Y).toHsl(),ea=ba.h;return[h(Y),h({h:(ea+72)%360,s:ba.s,l:ba.l}),h({h:(ea+216)%360,s:ba.s,l:ba.l})]}function D(Y,ba,ea){ba=ba||6;ea=ea||30;var ca=h(Y).toHsl();ea=360/ea;Y=[h(Y)];for(ca.h=(ca.h-(ea*ba>>1)+720)%360;--ba;)ca.h=(ca.h+ea)%360,Y.push(h(ca));return Y}function x(Y,ba){ba=ba||6;var ea=h(Y).toHsv();Y=ea.h;var ca=ea.s;ea=ea.v;for(var ia=[],fa=1/ba;ba--;)ia.push(h({h:Y,s:ca,v:ea})),ea=(ea+fa)%1;return ia}
function E(Y){Y=parseFloat(Y);if(isNaN(Y)||0>Y||1<Y)Y=1;return Y}function B(Y,ba){var ea=Y;"string"==typeof ea&&-1!=ea.indexOf(".")&&1===parseFloat(ea)&&(Y="100%");ea="string"===typeof Y&&-1!=Y.indexOf("%");Y=J(ba,O(0,parseFloat(Y)));ea&&(Y=parseInt(Y*ba,10)/100);return 1E-6>m.abs(Y-ba)?1:Y%ba/parseFloat(ba)}function t(Y){return 1==Y.length?"0"+Y:""+Y}function G(Y){1>=Y&&(Y=100*Y+"%");return Y}function I(Y){return!!V.CSS_UNIT.exec(Y)}var L=/^\s+/,M=/\s+$/,N=0,H=m.round,J=m.min,O=m.max,Q=m.random;
h.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Y=this.toRgb();return(299*Y.r+587*Y.g+114*Y.b)/1E3},getLuminance:function(){var Y=this.toRgb();var ba=Y.r/255;var ea=Y.g/255;Y=Y.b/255;ba=.03928>=ba?ba/12.92:m.pow((ba+.055)/1.055,2.4);ea=.03928>=ea?
ea/12.92:m.pow((ea+.055)/1.055,2.4);Y=.03928>=Y?Y/12.92:m.pow((Y+.055)/1.055,2.4);return.2126*ba+.7152*ea+.0722*Y},setAlpha:function(Y){this._a=E(Y);this._roundA=H(100*this._a)/100;return this},toHsv:function(){var Y=a(this._r,this._g,this._b);return{h:360*Y.h,s:Y.s,v:Y.v,a:this._a}},toHsvString:function(){var Y=a(this._r,this._g,this._b),ba=H(360*Y.h),ea=H(100*Y.s);Y=H(100*Y.v);return 1==this._a?"hsv("+ba+", "+ea+"%, "+Y+"%)":"hsva("+ba+", "+ea+"%, "+Y+"%, "+this._roundA+")"},toHsl:function(){var Y=
l(this._r,this._g,this._b);return{h:360*Y.h,s:Y.s,l:Y.l,a:this._a}},toHslString:function(){var Y=l(this._r,this._g,this._b),ba=H(360*Y.h),ea=H(100*Y.s);Y=H(100*Y.l);return 1==this._a?"hsl("+ba+", "+ea+"%, "+Y+"%)":"hsla("+ba+", "+ea+"%, "+Y+"%, "+this._roundA+")"},toHex:function(Y){return g(this._r,this._g,this._b,Y)},toHexString:function(Y){return"#"+this.toHex(Y)},toHex8:function(Y){var ba=this._g,ea=this._b,ca=this._a;ba=[t(H(this._r).toString(16)),t(H(ba).toString(16)),t(H(ea).toString(16)),t(m.round(255*
parseFloat(ca)).toString(16))];Y=Y&&ba[0].charAt(0)==ba[0].charAt(1)&&ba[1].charAt(0)==ba[1].charAt(1)&&ba[2].charAt(0)==ba[2].charAt(1)&&ba[3].charAt(0)==ba[3].charAt(1)?ba[0].charAt(0)+ba[1].charAt(0)+ba[2].charAt(0)+ba[3].charAt(0):ba.join("");return Y},toHex8String:function(Y){return"#"+this.toHex8(Y)},toRgb:function(){return{r:H(this._r),g:H(this._g),b:H(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+H(this._r)+", "+H(this._g)+", "+H(this._b)+")":"rgba("+H(this._r)+", "+
H(this._g)+", "+H(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:H(100*B(this._r,255))+"%",g:H(100*B(this._g,255))+"%",b:H(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+H(100*B(this._r,255))+"%, "+H(100*B(this._g,255))+"%, "+H(100*B(this._b,255))+"%)":"rgba("+H(100*B(this._r,255))+"%, "+H(100*B(this._g,255))+"%, "+H(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:P[g(this._r,
this._g,this._b,!0)]||!1},toFilter:function(Y){var ba="#"+k(this._r,this._g,this._b,this._a),ea=ba,ca=this._gradientType?"GradientType \x3d 1, ":"";Y&&(Y=h(Y),ea="#"+k(Y._r,Y._g,Y._b,Y._a));return"progid:DXImageTransform.Microsoft.gradient("+ca+"startColorstr\x3d"+ba+",endColorstr\x3d"+ea+")"},toString:function(Y){var ba=!!Y;Y=Y||this._format;var ea=!1,ca=1>this._a&&0<=this._a;if(!ba&&ca&&("hex"===Y||"hex6"===Y||"hex3"===Y||"hex4"===Y||"hex8"===Y||"name"===Y))return"name"===Y&&0===this._a?this.toName():
this.toRgbString();"rgb"===Y&&(ea=this.toRgbString());"prgb"===Y&&(ea=this.toPercentageRgbString());if("hex"===Y||"hex6"===Y)ea=this.toHexString();"hex3"===Y&&(ea=this.toHexString(!0));"hex4"===Y&&(ea=this.toHex8String(!0));"hex8"===Y&&(ea=this.toHex8String());"name"===Y&&(ea=this.toName());"hsl"===Y&&(ea=this.toHslString());"hsv"===Y&&(ea=this.toHsvString());return ea||this.toHexString()},clone:function(){return h(this.toString())},_applyModification:function(Y,ba){Y=Y.apply(null,[this].concat([].slice.call(ba)));
this._r=Y._r;this._g=Y._g;this._b=Y._b;this.setAlpha(Y._a);return this},lighten:function(){return this._applyModification(f,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(q,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(n,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(r,
arguments)},_applyCombination:function(Y,ba){return Y.apply(null,[this].concat([].slice.call(ba)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(u,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(y,arguments)},triad:function(){return this._applyCombination(v,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}};h.fromRatio=
function(Y,ba){if("object"==typeof Y){var ea={},ca;for(ca in Y)Y.hasOwnProperty(ca)&&(ea[ca]="a"===ca?Y[ca]:G(Y[ca]));Y=ea}return h(Y,ba)};h.equals=function(Y,ba){return Y&&ba?h(Y).toRgbString()==h(ba).toRgbString():!1};h.random=function(){return h.fromRatio({r:Q(),g:Q(),b:Q()})};h.mix=function(Y,ba,ea){ea=0===ea?0:ea||50;Y=h(Y).toRgb();ba=h(ba).toRgb();ea/=100;return h({r:(ba.r-Y.r)*ea+Y.r,g:(ba.g-Y.g)*ea+Y.g,b:(ba.b-Y.b)*ea+Y.b,a:(ba.a-Y.a)*ea+Y.a})};h.readability=function(Y,ba){Y=h(Y);ba=h(ba);
return(m.max(Y.getLuminance(),ba.getLuminance())+.05)/(m.min(Y.getLuminance(),ba.getLuminance())+.05)};h.isReadable=function(Y,ba,ea){Y=h.readability(Y,ba);ba=!1;var ca=ea||{level:"AA",size:"small"};ea=(ca.level||"AA").toUpperCase();ca=(ca.size||"small").toLowerCase();"AA"!==ea&&"AAA"!==ea&&(ea="AA");"small"!==ca&&"large"!==ca&&(ca="small");switch(ea+ca){case "AAsmall":case "AAAlarge":ba=4.5<=Y;break;case "AAlarge":ba=3<=Y;break;case "AAAsmall":ba=7<=Y}return ba};h.mostReadable=function(Y,ba,ea){var ca=
null,ia=0;ea=ea||{};var fa=ea.includeFallbackColors;var ha=ea.level;var na=ea.size;for(var pa=0;pa<ba.length;pa++){var ra=h.readability(Y,ba[pa]);ra>ia&&(ia=ra,ca=h(ba[pa]))}if(h.isReadable(Y,ca,{level:ha,size:na})||!fa)return ca;ea.includeFallbackColors=!1;return h.mostReadable(Y,["#fff","#000"],ea)};var U=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",
brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",
darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",
lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",
mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",
pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",
whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=h.hexNames=function(Y){var ba={},ea;for(ea in Y)Y.hasOwnProperty(ea)&&(ba[Y[ea]]=ea);return ba}(U),V={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof F&&F.exports?
F.exports=h:window.tinycolor=h})(Math)},{}],549:[function(b,F,C){function m(l){if(l.length){if(l instanceof Float32Array)return l;var e=new Float32Array(l);e.set(l);return e}h[0]=l;return h[0]}F.exports=m;F.exports.float32=F.exports.float=m;F.exports.fract32=F.exports.fract=function(l){if(l.length){for(var e=m(l),a=0,g=e.length;a<g;a++)e[a]=l[a]-e[a];return e}return m(l-m(l))};var h=new Float32Array(1)},{}],550:[function(b,F,C){function m(a,g){g=l(getComputedStyle(a).getPropertyValue(g));return g[0]*
h(g[1],a)}function h(a,g){g=g||document.body;a=(a||"px").trim().toLowerCase();if(g===window||g===document)g=document.body;switch(a){case "%":return g.clientHeight/100;case "ch":case "ex":var k=document.createElement("div");k.style["font-size"]="128"+a;g.appendChild(k);a=m(k,"font-size")/128;g.removeChild(k);return a;case "em":return m(g,"font-size");case "rem":return m(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,
window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return e;case "cm":return e/2.54;case "mm":return e/25.4;case "pt":return e/72;case "pc":return e/6}return 1}var l=b("parse-unit");F.exports=h;var e=96},{"parse-unit":480}],551:[function(b,F,C){(function(m,h){"object"===typeof C&&"undefined"!==typeof F?h(C):(m=m||self,h(m.topojson=m.topojson||{}))})(this,function(m){function h(q){return q}function l(q){if(null==q)return h;var r,u,v=q.scale[0],w=
q.scale[1],y=q.translate[0],D=q.translate[1];return function(x,E){E||(r=u=0);E=2;var B=x.length,t=Array(B);t[0]=(r+=x[0])*v+y;for(t[1]=(u+=x[1])*w+D;E<B;)t[E]=x[E],++E;return t}}function e(q){function r(B){B=v(B);B[0]<y&&(y=B[0]);B[0]>x&&(x=B[0]);B[1]<D&&(D=B[1]);B[1]>E&&(E=B[1])}function u(B){switch(B.type){case "GeometryCollection":B.geometries.forEach(u);break;case "Point":r(B.coordinates);break;case "MultiPoint":B.coordinates.forEach(r)}}var v=l(q.transform),w,y=Infinity,D=y,x=-y,E=-y;q.arcs.forEach(function(B){for(var t=
-1,G=B.length,I;++t<G;)I=v(B[t],t),I[0]<y&&(y=I[0]),I[0]>x&&(x=I[0]),I[1]<D&&(D=I[1]),I[1]>E&&(E=I[1])});for(w in q.objects)u(q.objects[w]);return[y,D,x,E]}function a(q,r){var u=r.id,v=r.bbox,w=null==r.properties?{}:r.properties;q=g(q,r);return null==u&&null==v?{type:"Feature",properties:w,geometry:q}:null==v?{type:"Feature",id:u,properties:w,geometry:q}:{type:"Feature",id:u,bbox:v,properties:w,geometry:q}}function g(q,r){function u(B){return x(B)}function v(B){for(var t=[],G=0,I=B.length;G<I;++G){var L=
B[G],M=t;M.length&&M.pop();for(var N=E[0>L?~L:L],H=0,J=N.length;H<J;++H)M.push(x(N[H],H));if(0>L)for(L=M,M=L.length,N=M-J;N<--M;)J=L[N],L[N++]=L[M],L[M]=J}2>t.length&&t.push(t[0]);return t}function w(B){for(B=v(B);4>B.length;)B.push(B[0]);return B}function y(B){return B.map(w)}function D(B){var t=B.type;switch(t){case "GeometryCollection":return{type:t,geometries:B.geometries.map(D)};case "Point":B=x(B.coordinates);break;case "MultiPoint":B=B.coordinates.map(u);break;case "LineString":B=v(B.arcs);
break;case "MultiLineString":B=B.arcs.map(v);break;case "Polygon":B=y(B.arcs);break;case "MultiPolygon":B=B.arcs.map(y);break;default:return null}return{type:t,coordinates:B}}var x=l(q.transform),E=q.arcs;return D(r)}function k(q,r){function u(B){var t=q.arcs[0>B?~B:B],G=t[0];if(q.transform){var I=[0,0];t.forEach(function(L){I[0]+=L[0];I[1]+=L[1]})}else I=t[t.length-1];return 0>B?[I,G]:[G,I]}function v(B,t){for(var G in B){var I=B[G];delete t[I.start];delete I.start;delete I.end;I.forEach(function(L){w[0>
L?~L:L]=1});x.push(I)}}var w={},y={},D={},x=[],E=-1;r.forEach(function(B,t){var G=q.arcs[0>B?~B:B];3>G.length&&!G[1][0]&&!G[1][1]&&(G=r[++E],r[E]=B,r[t]=G)});r.forEach(function(B){var t=u(B),G=t[0],I=t[1];(t=D[G])?(delete D[t.end],t.push(B),t.end=I,(B=y[I])?(delete y[B.start],G=B===t?t:t.concat(B),y[G.start=t.start]=D[G.end=B.end]=G):y[t.start]=D[t.end]=t):(t=y[I])?(delete y[t.start],t.unshift(B),t.start=G,(B=D[G])?(delete D[B.end],G=B===t?t:B.concat(t),y[G.start=B.start]=D[G.end=t.end]=G):y[t.start]=
D[t.end]=t):(t=[B],y[t.start=G]=D[t.end=I]=t)});v(D,y);v(y,D);r.forEach(function(B){w[0>B?~B:B]||x.push([B])});return x}function p(q,r,u){var v;if(1<arguments.length)var w=n(q,r,u);else{var y=0;for(w=Array(v=q.arcs.length);y<v;++y)w[y]=y}return{type:"MultiLineString",arcs:k(q,w)}}function n(q,r,u){function v(t){var G=0>t?~t:t;(E[G]||(E[G]=[])).push({i:t,g:B})}function w(t){t.forEach(v)}function y(t){t.forEach(w)}function D(t){switch(B=t,t.type){case "GeometryCollection":t.geometries.forEach(D);break;
case "LineString":w(t.arcs);break;case "MultiLineString":case "Polygon":y(t.arcs);break;case "MultiPolygon":t.arcs.forEach(y)}}var x=[],E=[],B;D(r);E.forEach(null==u?function(t){x.push(t[0].i)}:function(t){u(t[0].g,t[t.length-1].g)&&x.push(t[0].i)});return x}function c(q,r){function u(E){switch(E.type){case "GeometryCollection":E.geometries.forEach(u);break;case "Polygon":v(E.arcs);break;case "MultiPolygon":E.arcs.forEach(v)}}function v(E){E.forEach(function(B){B.forEach(function(t){(y[t=0>t?~t:t]||
(y[t]=[])).push(E)})});D.push(E)}function w(E){E=g(q,{type:"Polygon",arcs:[E]}).coordinates[0];for(var B=-1,t=E.length,G,I=E[t-1],L=0;++B<t;)G=I,I=E[B],L+=G[0]*I[1]-G[1]*I[0];return Math.abs(L)}var y={},D=[],x=[];r.forEach(u);D.forEach(function(E){if(!E._){var B=[],t=[E];E._=1;for(x.push(B);E=t.pop();)B.push(E),E.forEach(function(G){G.forEach(function(I){y[0>I?~I:I].forEach(function(L){L._||(L._=1,t.push(L))})})})}});D.forEach(function(E){delete E._});return{type:"MultiPolygon",arcs:x.map(function(E){var B=
[];E.forEach(function(L){L.forEach(function(M){M.forEach(function(N){2>y[0>N?~N:N].length&&B.push(N)})})});B=k(q,B);if(1<(E=B.length))for(var t=1,G=w(B[0]),I;t<E;++t)(I=w(B[t]))>G&&(G=B[0],B[0]=B[t],B[t]=G,G=I);return B}).filter(function(E){return 0<E.length})}}function f(q,r){for(var u=0,v=q.length;u<v;){var w=u+v>>>1;q[w]<r?u=w+1:v=w}return u}function d(q){if(null==q)return h;var r,u,v=q.scale[0],w=q.scale[1],y=q.translate[0],D=q.translate[1];return function(x,E){E||(r=u=0);E=2;var B=x.length,t=
Array(B),G=Math.round((x[0]-y)/v),I=Math.round((x[1]-D)/w);t[0]=G-r;r=G;t[1]=I-u;for(u=I;E<B;)t[E]=x[E],++E;return t}}m.bbox=e;m.feature=function(q,r){"string"===typeof r&&(r=q.objects[r]);return"GeometryCollection"===r.type?{type:"FeatureCollection",features:r.geometries.map(function(u){return a(q,u)})}:a(q,r)};m.merge=function(q){return g(q,c.apply(this,arguments))};m.mergeArcs=c;m.mesh=function(q){return g(q,p.apply(this,arguments))};m.meshArcs=p;m.neighbors=function(q){function r(M,N){M.forEach(function(H){0>
H&&(H=~H);var J=w[H];J?J.push(N):w[H]=[N]})}function u(M,N){M.forEach(function(H){r(H,N)})}function v(M,N){if("GeometryCollection"===M.type)M.geometries.forEach(function(H){v(H,N)});else if(M.type in D)D[M.type](M.arcs,N)}var w={},y=q.map(function(){return[]}),D={LineString:r,MultiLineString:u,Polygon:u,MultiPolygon:function(M,N){M.forEach(function(H){u(H,N)})}};q.forEach(v);for(var x in w){q=w[x];for(var E=q.length,B=0;B<E;++B)for(var t=B+1;t<E;++t){var G=q[B],I=q[t],L;(L=y[G])[x=f(L,I)]!==I&&L.splice(x,
0,I);(L=y[I])[x=f(L,G)]!==G&&L.splice(x,0,G)}}return y};m.quantize=function(q,r){function u(G){return B(G)}function v(G){switch(G.type){case "GeometryCollection":var I={type:"GeometryCollection",geometries:G.geometries.map(v)};break;case "Point":I={type:"Point",coordinates:B(G.coordinates)};break;case "MultiPoint":I={type:"MultiPoint",coordinates:G.coordinates.map(u)};break;default:return G}null!=G.id&&(I.id=G.id);null!=G.bbox&&(I.bbox=G.bbox);null!=G.properties&&(I.properties=G.properties);return I}
if(q.transform)throw Error("already quantized");if(r&&r.scale)var w=q.bbox;else{if(!(2<=(E=Math.floor(r))))throw Error("n must be 2");w=q.bbox||e(q);r=w[0];var y=w[1],D=w[2],x=w[3],E;r={scale:[D-r?(D-r)/(E-1):1,x-y?(x-y)/(E-1):1],translate:[r,y]}}var B=d(r),t;y=q.objects;D={};for(t in y)D[t]=v(y[t]);return{type:"Topology",bbox:w,transform:r,objects:D,arcs:q.arcs.map(function(G){var I=0,L=1,M=G.length,N,H=Array(M);for(H[0]=B(G[0],0);++I<M;)if((N=B(G[I],I))[0]||N[1])H[L++]=N;1===L&&(H[L++]=[0,0]);
H.length=L;return H})}};m.transform=l;m.untransform=d;Object.defineProperty(m,"__esModule",{value:!0})})},{}],552:[function(b,F,C){F.exports=function(e){if(0>e)return[];if(0===e)return[[0]];for(var a=Math.round(l(e+1))|0,g=[],k=0;k<a;++k){for(var p=m.unrank(e,k),n=[0],c=0,f=0;f<p.length;++f)c+=1<<p[f],n.push(c);1>h(p)&&(n[0]=c,n[e]=0);g.push(n)}return g};var m=b("permutation-rank"),h=b("permutation-parity"),l=b("gamma")},{gamma:248,"permutation-parity":483,"permutation-rank":484}],553:[function(b,
F,C){function m(f,d,q){return Math.sqrt(Math.pow(f,2)+Math.pow(d,2)+Math.pow(q,2))}function h(f){var d=Math.abs(f[0]),q=Math.abs(f[1]),r=Math.abs(f[2]),u=[0,0,0];d>Math.max(q,r)?u[2]=1:q>Math.max(d,r)?u[0]=1:u[1]=1;for(r=q=d=0;3>r;++r)d+=f[r]*f[r],q+=u[r]*f[r];for(r=0;3>r;++r)u[r]-=q/d*f[r];p(u,u);return u}function l(f,d,q,r,u,v,w,y){this.center=e(q);this.up=e(r);this.right=e(u);this.radius=e([v]);this.angle=e([w,y]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(f,
d);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=Array(16);for(f=0;16>f;++f)this.computedMatrix[f]=.5;this.recalcMatrix(0)}F.exports=function(f){f=f||{};var d=f.center||[0,0,0],q=f.up||[0,1,0],r=f.right||h(q),u=f.radius||1,v=f.theta||0,w=f.phi||0;d=[].slice.call(d,0,3);q=[].slice.call(q,
0,3);p(q,q);r=[].slice.call(r,0,3);p(r,r);"eye"in f&&(u=f.eye,v=[u[0]-d[0],u[1]-d[1],u[2]-d[2]],k(r,v,q),1E-6>m(r[0],r[1],r[2])?r=h(q):p(r,r),u=m(v[0],v[1],v[2]),w=n(q,v)/u,v=n(r,v)/u,w=Math.acos(w),v=Math.acos(v));u=Math.log(u);return new l(f.zoomMin,f.zoomMax,d,q,r,u,v,w)};var e=b("filtered-vector"),a=b("gl-mat4/invert"),g=b("gl-mat4/rotate"),k=b("gl-vec3/cross"),p=b("gl-vec3/normalize"),n=b("gl-vec3/dot");b=l.prototype;b.setDistanceLimits=function(f,d){f=0<f?Math.log(f):-Infinity;d=0<d?Math.log(d):
Infinity;d=Math.max(d,f);this.radius.bounds[0][0]=f;this.radius.bounds[1][0]=d};b.getDistanceLimits=function(f){var d=this.radius.bounds[0];return f?(f[0]=Math.exp(d[0][0]),f[1]=Math.exp(d[1][0]),f):[Math.exp(d[0][0]),Math.exp(d[1][0])]};b.recalcMatrix=function(f){this.center.curve(f);this.up.curve(f);this.right.curve(f);this.radius.curve(f);this.angle.curve(f);for(var d=this.computedUp,q=this.computedRight,r=0,u=0,v=0;3>v;++v)u+=d[v]*q[v],r+=d[v]*d[v];var w=Math.sqrt(r);for(v=f=0;3>v;++v)q[v]-=d[v]*
u/r,f+=q[v]*q[v],d[v]/=w;f=Math.sqrt(f);for(v=0;3>v;++v)q[v]/=f;var y=this.computedToward;k(y,d,q);p(y,y);f=Math.exp(this.computedRadius[0]);w=this.computedAngle[0];r=this.computedAngle[1];u=Math.cos(w);w=Math.sin(w);var D=Math.cos(r),x=Math.sin(r);r=this.computedCenter;var E=u*D,B=w*D,t=-u*x,G=-w*x;u=this.computedEye;w=this.computedMatrix;for(v=0;3>v;++v){var I=E*q[v]+B*y[v]+x*d[v];w[4*v+1]=t*q[v]+G*y[v]+D*d[v];w[4*v+2]=I;w[4*v+3]=0}q=w[1];v=w[5];x=w[9];y=w[2];D=w[6];E=w[10];d=v*E-x*D;x=x*y-q*E;
q=q*D-v*y;v=m(d,x,q);w[0]=d/v;w[4]=x/v;w[8]=q/v;for(v=0;3>v;++v)u[v]=r[v]+w[2+4*v]*f;for(v=0;3>v;++v){for(r=f=0;3>r;++r)f+=w[v+4*r]*u[r];w[12+v]=-f}w[15]=1};b.getMatrix=function(f,d){this.recalcMatrix(f);f=this.computedMatrix;if(d){for(var q=0;16>q;++q)d[q]=f[q];return d}return f};var c=[0,0,0];b.rotate=function(f,d,q,r){this.angle.move(f,d,q);if(r){this.recalcMatrix(f);d=this.computedMatrix;c[0]=d[2];c[1]=d[6];c[2]=d[10];q=this.computedUp;for(var u=this.computedRight,v=this.computedToward,w=0;3>
w;++w)d[4*w]=q[w],d[4*w+1]=u[w],d[4*w+2]=v[w];g(d,d,r,c);for(w=0;3>w;++w)q[w]=d[4*w],u[w]=d[4*w+1];this.up.set(f,q[0],q[1],q[2]);this.right.set(f,u[0],u[1],u[2])}};b.pan=function(f,d,q,r){d=d||0;q=q||0;r=r||0;this.recalcMatrix(f);var u=this.computedMatrix,v=u[1],w=u[5],y=u[9],D=m(v,w,y);v/=D;w/=D;y/=D;D=u[0];var x=u[4];u=u[8];var E=D*v+x*w+u*y;D-=v*E;x-=w*E;u-=y*E;E=m(D,x,u);this.center.move(f,D/E*d+v*q,x/E*d+w*q,u/E*d+y*q);d=Math.exp(this.computedRadius[0]);d=Math.max(1E-4,d+r);this.radius.set(f,
Math.log(d))};b.translate=function(f,d,q,r){this.center.move(f,d||0,q||0,r||0)};b.setMatrix=function(f,d,q,r){var u=1;"number"===typeof q&&(u=q|0);if(0>u||3<u)u=1;var v=(u+2)%3;d||(this.recalcMatrix(f),d=this.computedMatrix);q=d[u];var w=d[u+4],y=d[u+8];if(r){r=Math.abs(q);var D=Math.abs(y),x=Math.max(r,Math.abs(w),D);r===x?(q=0>q?-1:1,w=y=0):D===x?(y=0>y?-1:1,q=w=0):(w=0>w?-1:1,q=y=0)}else r=m(q,w,y),q/=r,w/=r,y/=r;r=d[v];D=d[v+4];v=d[v+8];x=r*q+D*w+v*y;r-=q*x;D-=w*x;v-=y*x;x=m(r,D,v);r/=x;D/=x;
v/=x;x=w*v-y*D;var E=y*r-q*v,B=q*D-w*r,t=m(x,E,B);x/=t;E/=t;B/=t;this.center.jump(f,I,L,M);this.radius.idle(f);this.up.jump(f,q,w,y);this.right.jump(f,r,D,v);if(2===u)L=d[1],M=d[5],q=d[9],I=0>G?-Math.PI/2:Math.PI/2,L=Math.atan2(L*x+M*E+q*B,L*r+M*D+q*v);else{L=d[2];M=d[6];var G=d[10];I=Math.asin(Math.min(1,Math.max(-1,L*q+M*w+G*y)));L=Math.atan2(L*x+M*E+G*B,L*r+M*D+G*v)}this.angle.jump(f,L,I);this.recalcMatrix(f);G=d[2];q=d[6];w=d[10];M=this.computedMatrix;a(M,d);d=M[15];var I=M[12]/d,L=M[13]/d,M=
M[14]/d;d=Math.exp(this.computedRadius[0]);this.center.jump(f,I-G*d,L-q*d,M-w*d)};b.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};b.idle=function(f){this.center.idle(f);this.up.idle(f);this.right.idle(f);this.radius.idle(f);this.angle.idle(f)};b.flush=function(f){this.center.flush(f);this.up.flush(f);this.right.flush(f);this.radius.flush(f);this.angle.flush(f)};b.setDistance=function(f,d){0<d&&this.radius.set(f,Math.log(d))};
b.lookAt=function(f,d,q,r){this.recalcMatrix(f);d=d||this.computedEye;q=q||this.computedCenter;r=r||this.computedUp;var u=r[0],v=r[1];r=r[2];var w=m(u,v,r);if(!(1E-6>w)){u/=w;v/=w;r/=w;w=d[0]-q[0];var y=d[1]-q[1];d=d[2]-q[2];var D=m(w,y,d);if(!(1E-6>D)){w/=D;y/=D;d/=D;var x=this.computedRight,E=x[0],B=x[1];x=x[2];var t=u*E+v*B+r*x;E-=t*u;B-=t*v;x-=t*r;t=m(E,B,x);if(.01>t&&(E=v*d-r*y,B=r*w-u*d,x=u*y-v*w,t=m(E,B,x),1E-6>t))return;E/=t;B/=t;x/=t;this.up.set(f,u,v,r);this.right.set(f,E,B,x);this.center.set(f,
q[0],q[1],q[2]);this.radius.set(f,Math.log(D));q=v*x-r*B;D=r*E-u*x;t=u*B-v*E;var G=m(q,D,t);u=Math.asin(Math.min(1,Math.max(-1,u*w+v*y+r*d)));v=Math.atan2(q/G*w+D/G*y+t/G*d,E*w+B*y+x*d);w=this.angle._state;r=w[w.length-1];w=w[w.length-2];r%=2*Math.PI;y=Math.abs(r-v);d=Math.abs(r-2*Math.PI-v);Math.abs(r+2*Math.PI-v)<y&&(r+=2*Math.PI);d<y&&(r-=2*Math.PI);this.angle.jump(this.angle.lastT(),r,w);this.angle.set(f,v,u)}}}},{"filtered-vector":242,"gl-mat4/invert":278,"gl-mat4/rotate":283,"gl-vec3/cross":339,
"gl-vec3/dot":344,"gl-vec3/normalize":361}],554:[function(b,F,C){F.exports=function(h,l,e){var a=h*l,g=m*h;g-=g-h;h-=g;var k=m*l;k-=k-l;l-=k;l=h*l-(a-g*k-h*k-g*l);return e?(e[0]=l,e[1]=a,e):[l,a]};var m=+(Math.pow(2,27)+1)},{}],555:[function(b,F,C){F.exports=function(m,h,l){var e=m+h,a=e-m;h-=a;m-=e-a;return l?(l[0]=m+h,l[1]=e,l):[m+h,e]}},{}],556:[function(b,F,C){var m=b("../prototype/is");F.exports=function(h){if("function"!==typeof h||!hasOwnProperty.call(h,"length"))return!1;try{if("number"!==
typeof h.length||"function"!==typeof h.call||"function"!==typeof h.apply)return!1}catch(l){return!1}return!m(h)}},{"../prototype/is":563}],557:[function(b,F,C){var m=b("../value/is"),h=b("../object/is"),l=b("../string/coerce"),e=b("./to-short-string");F.exports=function(a,g,k){if(!h(k))throw new TypeError(g.replace("%v",e(a)));if(!m(a)){if("default"in k)return k["default"];if(k.isOptional)return null}k=l(k.errorMessage);m(k)||(k=g);throw new TypeError(k.replace("%v",e(a)));}},{"../object/is":560,
"../string/coerce":564,"../value/is":566,"./to-short-string":559}],558:[function(b,F,C){F.exports=function(m){try{return m.toString()}catch(h){try{return String(m)}catch(l){return null}}}},{}],559:[function(b,F,C){var m=b("./safe-to-string"),h=/[\n\r\u2028\u2029]/g;F.exports=function(l){l=m(l);if(null===l)return"\x3cNon-coercible to string value\x3e";100<l.length&&(l=l.slice(0,99)+"");return l=l.replace(h,function(e){switch(e){case "\n":return"\\n";case "\r":return"\\r";case "\u2028":return"\\u2028";
case "\u2029":return"\\u2029";default:throw Error("Unexpected character");}})}},{"./safe-to-string":558}],560:[function(b,F,C){var m=b("../value/is"),h={object:!0,"function":!0,undefined:!0};F.exports=function(l){return m(l)?hasOwnProperty.call(h,typeof l):!1}},{"../value/is":566}],561:[function(b,F,C){var m=b("../lib/resolve-exception"),h=b("./is");F.exports=function(l,e){return h(l)?l:m(l,"%v is not a plain function",e)}},{"../lib/resolve-exception":557,"./is":562}],562:[function(b,F,C){var m=b("../function/is"),
h=/^\s*class[\s{/}]/,l=Function.prototype.toString;F.exports=function(e){return!m(e)||h.test(l.call(e))?!1:!0}},{"../function/is":556}],563:[function(b,F,C){var m=b("../object/is");F.exports=function(h){if(!m(h))return!1;try{return h.constructor?h.constructor.prototype===h:!1}catch(l){return!1}}},{"../object/is":560}],564:[function(b,F,C){var m=b("../value/is"),h=b("../object/is"),l=Object.prototype.toString;F.exports=function(e){if(!m(e))return null;if(h(e)){var a=e.toString;if("function"!==typeof a||
a===l)return null}return""+e}},{"../object/is":560,"../value/is":566}],565:[function(b,F,C){var m=b("../lib/resolve-exception"),h=b("./is");F.exports=function(l,e){return h(l)?l:m(l,"Cannot use %v",e)}},{"../lib/resolve-exception":557,"./is":566}],566:[function(b,F,C){F.exports=function(m){return void 0!==m&&null!==m}},{}],567:[function(b,F,C){(function(m){function h(L){if(L){var M=w.log2(L.length||L.byteLength);G[M].push(L)}}function l(L){L=w.nextPow2(L);var M=w.log2(L);M=G[M];return 0<M.length?
M.pop():new ArrayBuffer(L)}function e(L){return new Uint8Array(l(L),0,L)}function a(L){return new Uint16Array(l(2*L),0,L)}function g(L){return new Uint32Array(l(4*L),0,L)}function k(L){return new Int8Array(l(L),0,L)}function p(L){return new Int16Array(l(2*L),0,L)}function n(L){return new Int32Array(l(4*L),0,L)}function c(L){return new Float32Array(l(4*L),0,L)}function f(L){return new Float64Array(l(8*L),0,L)}function d(L){return x?new Uint8ClampedArray(l(L),0,L):e(L)}function q(L){return E?new BigUint64Array(l(8*
L),0,L):null}function r(L){return B?new BigInt64Array(l(8*L),0,L):null}function u(L){return new DataView(l(L),0,L)}function v(L){L=w.nextPow2(L);var M=w.log2(L);M=I[M];return 0<M.length?M.pop():new D(L)}var w=b("bit-twiddle"),y=b("dup"),D=b("buffer").Buffer;m.__TYPEDARRAY_POOL||(m.__TYPEDARRAY_POOL={UINT8:y([32,0]),UINT16:y([32,0]),UINT32:y([32,0]),BIGUINT64:y([32,0]),INT8:y([32,0]),INT16:y([32,0]),INT32:y([32,0]),BIGINT64:y([32,0]),FLOAT:y([32,0]),DOUBLE:y([32,0]),DATA:y([32,0]),UINT8C:y([32,0]),
BUFFER:y([32,0])});var x="undefined"!==typeof Uint8ClampedArray,E="undefined"!==typeof BigUint64Array,B="undefined"!==typeof BigInt64Array,t=m.__TYPEDARRAY_POOL;t.UINT8C||(t.UINT8C=y([32,0]));t.BIGUINT64||(t.BIGUINT64=y([32,0]));t.BIGINT64||(t.BIGINT64=y([32,0]));t.BUFFER||(t.BUFFER=y([32,0]));var G=t.DATA,I=t.BUFFER;C.free=function(L){if(D.isBuffer(L))I[w.log2(L.length)].push(L);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(L)&&(L=L.buffer),L){var M=w.log2(L.length||L.byteLength)|
0;G[M].push(L)}};C.freeUint8=C.freeUint16=C.freeUint32=C.freeBigUint64=C.freeInt8=C.freeInt16=C.freeInt32=C.freeBigInt64=C.freeFloat32=C.freeFloat=C.freeFloat64=C.freeDouble=C.freeUint8Clamped=C.freeDataView=function(L){h(L.buffer)};C.freeArrayBuffer=h;C.freeBuffer=function(L){I[w.log2(L.length)].push(L)};C.malloc=function(L,M){if(void 0===M||"arraybuffer"===M)return l(L);switch(M){case "uint8":return e(L);case "uint16":return a(L);case "uint32":return g(L);case "int8":return k(L);case "int16":return p(L);
case "int32":return n(L);case "float":case "float32":return c(L);case "double":case "float64":return f(L);case "uint8_clamped":return d(L);case "bigint64":return r(L);case "biguint64":return q(L);case "buffer":return v(L);case "data":case "dataview":return u(L)}return null};C.mallocArrayBuffer=l;C.mallocUint8=e;C.mallocUint16=a;C.mallocUint32=g;C.mallocInt8=k;C.mallocInt16=p;C.mallocInt32=n;C.mallocFloat32=C.mallocFloat=c;C.mallocFloat64=C.mallocDouble=f;C.mallocUint8Clamped=d;C.mallocBigUint64=q;
C.mallocBigInt64=r;C.mallocDataView=u;C.mallocBuffer=v;C.clearCache=function(){for(var L=0;32>L;++L)t.UINT8[L].length=0,t.UINT16[L].length=0,t.UINT32[L].length=0,t.INT8[L].length=0,t.INT16[L].length=0,t.INT32[L].length=0,t.FLOAT[L].length=0,t.DOUBLE[L].length=0,t.BIGUINT64[L].length=0,t.BIGINT64[L].length=0,t.UINT8C[L].length=0,G[L].length=0,I[L].length=0}}).call(this,"undefined"!==typeof W?W:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":97,buffer:111,dup:176}],
568:[function(b,F,C){function m(h){this.roots=Array(h);this.ranks=Array(h);for(var l=0;l<h;++l)this.roots[l]=l,this.ranks[l]=0}"use restrict";F.exports=m;b=m.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var h=this.roots.length;this.roots.push(h);this.ranks.push(0);return h};b.find=function(h){for(var l=h,e=this.roots;e[h]!==h;)h=e[h];for(;e[l]!==h;){var a=e[l];e[l]=h;l=a}return h};b.link=function(h,l){h=this.find(h);l=this.find(l);if(h!==
l){var e=this.ranks,a=this.roots,g=e[h],k=e[l];g<k?a[h]=l:k<g?a[l]=h:(a[l]=h,++e[h])}}},{}],569:[function(b,F,C){F.exports=function(m,h,l){if(0===m.length)return m;if(h){l||m.sort(h);l=1;for(var e=m.length,a=m[0],g,k=1;k<e;++k)g=a,a=m[k],h(a,g)&&(k===l?l++:m[l++]=a);m.length=l;return m}l||m.sort();h=1;l=m.length;e=m[0];for(g=1;g<l;++g)a=e,e=m[g],e!==a&&(g===h?h++:m[h++]=e);m.length=h;return m}},{}],570:[function(b,F,C){var m=/['"]/;F.exports=function(h){if(!h)return"";m.test(h.charAt(0))&&(h=h.substr(1));
m.test(h.charAt(h.length-1))&&(h=h.substr(0,h.length-1));return h}},{}],571:[function(b,F,C){F.exports=function(m,h,l){Array.isArray(l)||(l=[].slice.call(arguments,2));for(var e=0,a=l.length;e<a;e++){var g=l[e],k;for(k in g)if((void 0===h[k]||Array.isArray(h[k])||m[k]!==h[k])&&k in h){if(!0===g[k])var p=h[k];else if(!1===g[k])continue;else if("function"===typeof g[k]&&(p=g[k](h[k],m,h),void 0===p))continue;m[k]=p}}return m}},{}],572:[function(b,F,C){F.exports=function(e,a){if("object"!==typeof a||
null===a)a={};return m(e,a.canvas||h,a.context||l,a)};var m=b("./lib/vtext"),h=null,l=null;"undefined"!==typeof document&&(h=document.createElement("canvas"),h.width=8192,h.height=1024,l=h.getContext("2d"))},{"./lib/vtext":573}],573:[function(b,F,C){function m(B,t,G,I){var L="\x3c"+B+"\x3e";B="\x3c/"+B+"\x3e";for(var M=L.length,N=B.length,H=t[0]===w||t[0]===x,J=0,O;-1<J;){J=G.indexOf(L,J);if(-1===J)break;O=G.indexOf(B,J+M);if(-1===O)break;if(O<=J)break;for(var Q=J;Q<O+N;++Q)if(Q<J+M||Q>=O)I[Q]=null,
G=G.substr(0,Q)+" "+G.substr(Q+1);else if(null!==I[Q]){var U=I[Q].indexOf(t[0]);-1===U?I[Q]+=t:H&&(I[Q]=I[Q].substr(0,U+1)+(1+parseInt(I[Q][U+1]))+I[Q].substr(U+2))}J+=M;J=G.substr(J,O-J).indexOf(L);J=-1!==J?J:O+N}return I}function h(B,t,G){for(var I=t.textAlign||"start",L=t.textBaseline||"alphabetic",M=[1073741824,1073741824],N=[0,0],H=B.length,J=0;J<H;++J)for(var O=B[J],Q=0;2>Q;++Q)M[Q]=Math.min(M[Q],O[Q])|0,N[Q]=Math.max(N[Q],O[Q])|0;var U=0;switch(I){case "center":U=-.5*(M[0]+N[0]);break;case "right":case "end":U=
-N[0];break;case "left":case "start":U=-M[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+I+"'");}var P=0;switch(L){case "hanging":case "top":P=-M[1];break;case "middle":P=-.5*(M[1]+N[1]);break;case "alphabetic":case "ideographic":P=-3*G;break;case "bottom":P=-N[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+L+"'");}var V=1/G;"lineHeight"in t?V*=+t.lineHeight:"width"in t?V=t.width/(N[0]-M[0]):"height"in t&&(V=t.height/(N[1]-M[1]));return B.map(function(Y){return[V*
(Y[0]+U),V*(Y[1]+P)]})}function l(B,t,G,I,L,M){function N(){if(""!==ca){var ra=t.measureText(ca).width;t.fillText(ca,Y+fa,ba+ha);fa+=ra}}function H(){return""+Math.round(na)+"px "}function J(ra,ta){var oa=""+t.font;if(!0===M.subscripts){var ua=ra.indexOf(x),ka=ta.indexOf(x);ua=-1<ua?parseInt(ra[1+ua]):0;ka=-1<ka?parseInt(ta[1+ka]):0;ua!==ka&&(oa=oa.replace(H(),"?px "),na*=Math.pow(.75,ka-ua),oa=oa.replace("?px ",H()));ha+=.25*V*(ka-ua)}!0===M.superscripts&&(ua=ra.indexOf(w),ka=ta.indexOf(w),ua=-1<
ua?parseInt(ra[1+ua]):0,ka=-1<ka?parseInt(ta[1+ka]):0,ua!==ka&&(oa=oa.replace(H(),"?px "),na*=Math.pow(.75,ka-ua),oa=oa.replace("?px ",H())),ha-=.25*V*(ka-ua));!0===M.bolds&&(ka=-1<ra.indexOf(q),ua=-1<ta.indexOf(q),!ka&&ua&&(oa=sa?oa.replace("italic ","italic bold "):"bold "+oa),ka&&!ua&&(oa=oa.replace("bold ","")));if(!0===M.italics){var sa=-1<ra.indexOf(u);ra=-1<ta.indexOf(u);!sa&&ra&&(oa="italic "+oa);sa&&!ra&&(oa=oa.replace("italic ",""))}t.font=oa}G=G.replace(/\n/g,"");G=!0===M.breaklines?G.replace(/<br>/g,
"\n"):G.replace(/<br>/g," ");var O="",Q=[];for(ea=0;ea<G.length;++ea)Q[ea]=O;!0===M.bolds&&(Q=m(d,q,G,Q));!0===M.italics&&(Q=m(r,u,G,Q));!0===M.superscripts&&(Q=m(v,y,G,Q));!0===M.subscripts&&(Q=m(D,E,G,Q));var U=[],P="";for(ea=0;ea<G.length;++ea)null!==Q[ea]&&(P+=G[ea],U.push(Q[ea]));Q=P.split("\n");G=Q.length;var V=Math.round(L*I),Y=I,ba=2*I;L=0;ea=G*V+ba;B.height<ea&&(B.height=ea);t.fillStyle="#000";t.fillRect(0,0,B.width,B.height);t.fillStyle="#fff";var ea;P=0;var ca="";for(B=0;B<G;++B){var ia=
Q[B]+"\n";var fa=0;var ha=B*V;var na=I;ca="";for(ea=0;ea<ia.length;++ea){var pa=ea+P<U.length?U[ea+P]:U[U.length-1];O===pa?ca+=ia[ea]:(N(),ca=ia[ea],void 0!==pa&&(J(O,pa),O=pa))}N();P+=ia.length;ea=Math.round(fa+2*Y)|0;L<ea&&(L=ea)}I=L;O=ba+V*G;return k(t.getImageData(0,0,I,O).data,[O,I,4]).pick(-1,-1,0).transpose(1,0)}function e(B,t,G,I){B=g(B,128);I=I?p(B.cells,B.positions,.25):{edges:B.cells,positions:B.positions};G=h(I.positions,t,G);B=I.edges;I="ccw"===t.orientation;n(G,B);if(t.polygons||t.polygon||
t.polyline){t=f(B,G);B=Array(t.length);for(var L=0;L<t.length;++L){for(var M=t[L],N=Array(M.length),H=0;H<M.length;++H){for(var J=M[H],O=Array(J.length),Q=0;Q<J.length;++Q)O[Q]=G[J[Q]].slice();I&&O.reverse();N[H]=O}B[L]=N}return B}return t.triangles||t.triangulate||t.triangle?{cells:c(G,B,{delaunay:!1,exterior:!1,interior:!0}),positions:G}:{edges:B,positions:G}}function a(B,t,G){try{return e(B,t,G,!0)}catch(I){}try{return e(B,t,G,!1)}catch(I){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||
t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}F.exports=function(B,t,G,I){var L=64,M=1.25,N={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&0<I.size&&(L=I.size),I.lineSpacing&&0<I.lineSpacing&&(M=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(N.breaklines=I.styletags.breaklines?!0:!1),I.styletags&&I.styletags.bolds&&(N.bolds=I.styletags.bolds?!0:!1),I.styletags&&I.styletags.italics&&(N.italics=I.styletags.italics?!0:!1),I.styletags&&
I.styletags.subscripts&&(N.subscripts=I.styletags.subscripts?!0:!1),I.styletags&&I.styletags.superscripts&&(N.superscripts=I.styletags.superscripts?!0:!1));G.font=[I.fontStyle,I.fontVariant,I.fontWeight,L+"px",I.font].filter(function(H){return H}).join(" ");G.textAlign="start";G.textBaseline="alphabetic";G.direction="ltr";B=l(t,G,B,L,M,N);return a(B,I,L)};F.exports.processPixels=a;var g=b("surface-nets"),k=b("ndarray"),p=b("simplify-planar-graph"),n=b("clean-pslg"),c=b("cdt2d"),f=b("planar-graph-to-polyline"),
d="b",q="b|",r="i",u="i|",v="sup",w="+",y="+1",D="sub",x="-",E="-1"},{cdt2d:112,"clean-pslg":121,ndarray:469,"planar-graph-to-polyline":488,"simplify-planar-graph":534,"surface-nets":542}],574:[function(b,F,C){(function(){function m(y){y.permitHostObjects___&&y.permitHostObjects___(m)}function h(y){return!("weakmap:"==y.substr(0,8)&&"___"===y.substr(y.length-3))}function l(y){if(y!==Object(y))throw new TypeError("Not an object: "+y);var D=y[q];if(D&&D.key===y)return D;if(d(y)){D={key:y};try{return f(y,
q,{value:D,writable:!1,enumerable:!1,configurable:!1}),D}catch(x){}}}function e(y){y.prototype=null;return Object.freeze(y)}function a(){u||"undefined"===typeof console||(u=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=m);var g=!1;if("function"===typeof WeakMap){var k=WeakMap;if("undefined"===typeof navigator||!/Firefox/.test(navigator.userAgent)){var p=
new k,n=Object.freeze({});p.set(n,1);if(1!==p.get(n))g=!0;else{F.exports=WeakMap;return}}}var c=Object.getOwnPropertyNames,f=Object.defineProperty,d=Object.isExtensible,q="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array&&(p=new ArrayBuffer(25),p=new Uint8Array(p),crypto.getRandomValues(p),q="weakmap:rand:"+Array.prototype.map.call(p,function(y){return(y%36).toString(36)}).join("")+
"___");f(Object,"getOwnPropertyNames",{value:function(y){return c(y).filter(h)}});if("getPropertyNames"in Object){var r=Object.getPropertyNames;f(Object,"getPropertyNames",{value:function(y){return r(y).filter(h)}})}(function(){var y=Object.freeze;f(Object,"freeze",{value:function(E){l(E);return y(E)}});var D=Object.seal;f(Object,"seal",{value:function(E){l(E);return D(E)}});var x=Object.preventExtensions;f(Object,"preventExtensions",{value:function(E){l(E);return x(E)}})})();var u=!1,v=0,w=function(){this instanceof
w||a();var y=[],D=[],x=v++;return Object.create(w.prototype,{get___:{value:e(function(E,B){var t=l(E);if(t)return x in t?t[x]:B;E=y.indexOf(E);return 0<=E?D[E]:B})},has___:{value:e(function(E){var B=l(E);return B?x in B:0<=y.indexOf(E)})},set___:{value:e(function(E,B){var t;(t=l(E))?t[x]=B:(t=y.indexOf(E),0<=t?D[t]=B:(t=y.length,D[t]=B,y[t]=E));return this})},delete___:{value:e(function(E){var B=l(E);if(B)return x in B&&delete B[x];E=y.indexOf(E);if(0>E)return!1;B=y.length-1;y[E]=void 0;D[E]=D[B];
y[E]=y[B];y.length=B;D.length=B;return!0})}})};w.prototype=Object.create(Object.prototype,{get:{value:function(y,D){return this.get___(y,D)},writable:!0,configurable:!0},has:{value:function(y){return this.has___(y)},writable:!0,configurable:!0},set:{value:function(y,D){return this.set___(y,D)},writable:!0,configurable:!0},"delete":{value:function(y){return this.delete___(y)},writable:!0,configurable:!0}});"function"===typeof k?function(){function y(){this instanceof w||a();var D=new k,x=void 0,E=
!1;var B=g?function(t,G){D.set(t,G);D.has(t)||(x||(x=new w),x.set(t,G));return this}:function(t,G){if(E)try{D.set(t,G)}catch(I){x||(x=new w),x.set___(t,G)}else D.set(t,G);return this};return Object.create(w.prototype,{get___:{value:e(function(t,G){return x?D.has(t)?D.get(t):x.get___(t,G):D.get(t,G)})},has___:{value:e(function(t){return D.has(t)||(x?x.has___(t):!1)})},set___:{value:e(B)},delete___:{value:e(function(t){var G=!!D["delete"](t);return x?x.delete___(t)||G:G})},permitHostObjects___:{value:e(function(t){if(t===
m)E=!0;else throw Error("bogus call to permitHostObjects___");})}})}g&&"undefined"!==typeof Proxy&&(Proxy=void 0);y.prototype=w.prototype;F.exports=y;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==typeof Proxy&&(Proxy=void 0),F.exports=w)}})()},{}],575:[function(b,F,C){var m=b("./hidden-store.js");F.exports=function(){var h={};return function(l){if(("object"!==typeof l||null===l)&&"function"!==typeof l)throw Error("Weakmap-shim: Key must be object");
var e=l.valueOf(h);return e&&e.identity===h?e:m(l,h)}}},{"./hidden-store.js":576}],576:[function(b,F,C){F.exports=function(m,h){var l={identity:h},e=m.valueOf;Object.defineProperty(m,"valueOf",{value:function(a){return a!==h?e.apply(this,arguments):l},writable:!0});return l}},{}],577:[function(b,F,C){var m=b("./create-store.js");F.exports=function(){var h=m();return{get:function(l,e){l=h(l);return l.hasOwnProperty("value")?l.value:e},set:function(l,e){h(l).value=e;return this},has:function(l){return"value"in
h(l)},"delete":function(l){return delete h(l).value}}}},{"./create-store.js":575}],578:[function(b,F,C){var m=b("get-canvas-context");F.exports=function(h){return m("webgl",h)}},{"get-canvas-context":249}],579:[function(b,F,C){function m(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");var l=h.instance();m.prototype=new h.baseCalendar;b(m.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",
epochs:["BEC","EC"],monthNumbers:function(c,f){if("string"===typeof c)return(f=c.match(a))?f[0]:"";var d=this._validateYear(c);c=c.month();var q=""+this.toChineseMonth(d,c);f&&2>q.length&&(q="0"+q);this.isIntercalaryMonth(d,c)&&(q+="i");return q},monthNames:function(c){if("string"===typeof c){var f=c.match(g);return f?f[0]:""}f=this._validateYear(c);c=c.month();var d="           ".split(" ")[this.toChineseMonth(f,c)-1];this.isIntercalaryMonth(f,c)&&(d=""+d);return d},monthNamesShort:function(c){if("string"===
typeof c){var f=c.match(k);return f?f[0]:""}f=this._validateYear(c);c=c.month();var d="           ".split(" ")[this.toChineseMonth(f,c)-1];this.isIntercalaryMonth(f,c)&&(d=""+d);return d},parseMonth:function(c,f){c=this._validateYear(c);var d=parseInt(f);if(isNaN(d)){if(""===f[0]){var q=!0;f=f.substring(1)}""===f[f.length-1]&&(f=f.substring(0,f.length-1));d=1+"           ".split(" ").indexOf(f)}else f=f[f.length-1],q="i"===f||"I"===f;return this.toMonthIndex(c,d,q)},
dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,f){c.year&&(c=c.year());if("number"!==typeof c||1888>c||2111<c)throw f.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,f,d){c=this.intercalaryMonth(c);if(d&&f!==c||1>f||12<f)throw h.local.invalidMonth.replace(/\{0\}/,this.local.name);
return c?!d&&f<=c?f-1:f:f-1},toChineseMonth:function(c,f){c.year&&(c=c.year(),f=c.month());c=this.intercalaryMonth(c);if(0>f||f>(c?12:11))throw h.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?f<c?f+1:f:f+1},intercalaryMonth:function(c){c=this._validateYear(c);return p[c-p[0]]>>13},isIntercalaryMonth:function(c,f){c.year&&(c=c.year(),f=c.month());c=this.intercalaryMonth(c);return!!c&&c===f},leapYear:function(c){return 0!==this.intercalaryMonth(c)},weekOfYear:function(c,f,d){var q=this._validateYear(c,
h.local.invalidyear);q=n[q-n[0]];q=l.newDate(q>>9&4095,q>>5&15,q&31);q.add(4-(q.dayOfWeek()||7),"d");c=this.toJD(c,f,d)-q.toJD();return 1+Math.floor(c/7)},monthsInYear:function(c){return this.leapYear(c)?13:12},daysInMonth:function(c,f){c.year&&(f=c.month(),c=c.year());c=this._validateYear(c);c=p[c-p[0]];if(f>(c>>13?12:11))throw h.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-f?30:29},weekDay:function(c,f,d){return 6>(this.dayOfWeek(c,f,d)||7)},toJD:function(c,f,d){r=this._validate(c,
r,d,h.local.invalidDate);c=this._validateYear(r.year());f=r.month();d=r.day();var q=this.isIntercalaryMonth(c,f),r=this.toChineseMonth(c,f);if("object"===typeof c)f=r||{};else{if(!("number"===typeof c&&1888<=c&&2111>=c))throw Error("Lunar year outside range 1888-2111");if(!("number"===typeof r&&1<=r&&12>=r))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof d&&1<=d&&30>=d))throw Error("Lunar day outside range 1 - 30");if("object"===typeof q){var u=!1;f=q}else u=!!q,f={};c={year:c,
month:r,day:d,isIntercalary:u}}r=c.day-1;d=p[c.year-p[0]];q=(q=d>>13)?c.month>q?c.month:c.isIntercalary?c.month:c.month-1:c.month-1;for(u=0;u<q;u++)r+=d&1<<12-u?30:29;c=n[c.year-n[0]];c=new Date(c>>9&4095,(c>>5&15)-1,(c&31)+r);f.year=c.getFullYear();f.month=1+c.getMonth();f.day=c.getDate();return l.toJD(f.year,f.month,f.day)},fromJD:function(c){var f=l.fromJD(c),d=f.year();c=f.month();f=f.day();if("object"===typeof d)c=c||{};else{if(!("number"===typeof d&&1888<=d&&2111>=d))throw Error("Solar year outside range 1888-2111");
if(!("number"===typeof c&&1<=c&&12>=c))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof f&&1<=f&&31>=f))throw Error("Solar day outside range 1 - 31");d={year:d,month:c,day:f};c={}}f=n[d.year-n[0]];c.year=(d.year<<9|d.month<<5|d.day)>=f?d.year:d.year-1;f=n[c.year-n[0]];d=Math.round((new Date(d.year,d.month-1,d.day)-new Date(f>>9&4095,(f>>5&15)-1,f&31))/864E5);var q=p[c.year-p[0]];for(f=0;13>f;f++){var r=q&1<<12-f?30:29;if(d<r)break;d-=r}q>>=13;!q||f<q?(c.isIntercalary=!1,c.month=
1+f):(c.isIntercalary=f===q?!0:!1,c.month=f);c.day=1+d;d=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,d,c.day)},fromString:function(c){c=c.match(e);var f=this._validateYear(+c[1]),d=this.toMonthIndex(f,+c[2],!!c[3]);return this.newDate(f,d,+c[4])},add:function(c,f,d){var q=c.year(),r=c.month(),u=this.isIntercalaryMonth(q,r);q=this.toChineseMonth(q,r);c=Object.getPrototypeOf(m.prototype).add.call(this,c,f,d);"y"===d&&(f=c.year(),d=c.month(),r=this.isIntercalaryMonth(f,
q),u=u&&r?this.toMonthIndex(f,q,!0):this.toMonthIndex(f,q,!1),u!==d&&c.month(u));return c}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,g=/^??[]?/m,k=/^??[]?/m;h.calendars.chinese=m;var p=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,
1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,
6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],n=[1887,966732,967231,967733,968265,968766,969297,969798,
970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,
1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,
1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,
1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":593,"object-assign":473}],580:[function(b,F,C){function m(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");m.prototype=new h.baseCalendar;b(m.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,
firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",
firstDay:0,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,h.local.invalidYear);l=l.year()+(0>l.year()?1:0);return 3===l%4||-1===l%4},monthsInYear:function(l){this._validate(l,this.minMonth,this.minDay,h.local.invalidYear||h.regionalOptions[""].invalidYear);return 13},weekOfYear:function(l,e,a){l=this.newDate(l,e,a);l.add(-l.dayOfWeek(),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(l,e){l=this._validate(l,e,this.minDay,h.local.invalidMonth);return this.daysPerMonth[l.month()-
1]+(13===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(l,e,a){return 6>(this.dayOfWeek(l,e,a)||7)},toJD:function(l,e,a){e=this._validate(l,e,a,h.local.invalidDate);l=e.year();0>l&&l++;return e.day()+30*(e.month()-1)+365*(l-1)+Math.floor(l/4)+this.jdEpoch-1},fromJD:function(l){var e=Math.floor(l)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;0>=a&&a--;e=Math.floor(l)+.5-this.newDate(a,1,1).toJD();l=Math.floor(e/30)+1;return this.newDate(a,l,e-30*(l-1)+1)}});h.calendars.coptic=
m},{"../main":593,"object-assign":473}],581:[function(b,F,C){function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");m.prototype=new h.baseCalendar;b(m.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),
monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){this._validate(e,this.minMonth,this.minDay,h.local.invalidYear);return!1},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,h.local.invalidYear);
return 13},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,h.local.invalidYear);return 400},weekOfYear:function(e,a,g){e=this.newDate(e,a,g);e.add(-e.dayOfWeek(),"d");return Math.floor((e.dayOfYear()-1)/8)+1},daysInMonth:function(e,a){e=this._validate(e,a,this.minDay,h.local.invalidMonth);return this.daysPerMonth[e.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,a,g){return(this._validate(e,a,g,h.local.invalidDate).day()+1)%8},weekDay:function(e,a,g){e=this.dayOfWeek(e,
a,g);return 2<=e&&6>=e},extraInfo:function(e,a,g){e=this._validate(e,a,g,h.local.invalidDate);return{century:l[Math.floor((e.year()-1)/100)+1]||""}},toJD:function(e,a,g){g=this._validate(e,a,g,h.local.invalidDate);e=g.year()+(0>g.year()?1:0);a=g.month();g=g.day();return g+(1<a?16:0)+(2<a?32*(a-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(e/400)+1;e-=400*(a-1);e+=15<e?16:0;var g=Math.floor(e/32)+1;return this.newDate(0>=a?a-1:a,g,
e-32*(g-1)+1)}});var l={20:"Fruitbat",21:"Anchovy"};h.calendars.discworld=m},{"../main":593,"object-assign":473}],582:[function(b,F,C){function m(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");m.prototype=new h.baseCalendar;b(m.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),
monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,h.local.invalidYear);l=l.year()+(0>l.year()?1:0);return 3===l%4||-1===l%4},monthsInYear:function(l){this._validate(l,this.minMonth,
this.minDay,h.local.invalidYear||h.regionalOptions[""].invalidYear);return 13},weekOfYear:function(l,e,a){l=this.newDate(l,e,a);l.add(-l.dayOfWeek(),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(l,e){l=this._validate(l,e,this.minDay,h.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(13===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(l,e,a){return 6>(this.dayOfWeek(l,e,a)||7)},toJD:function(l,e,a){e=this._validate(l,e,a,h.local.invalidDate);l=e.year();0>
l&&l++;return e.day()+30*(e.month()-1)+365*(l-1)+Math.floor(l/4)+this.jdEpoch-1},fromJD:function(l){var e=Math.floor(l)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;0>=a&&a--;e=Math.floor(l)+.5-this.newDate(a,1,1).toJD();l=Math.floor(e/30)+1;return this.newDate(a,l,e-30*(l-1)+1)}});h.calendars.ethiopian=m},{"../main":593,"object-assign":473}],583:[function(b,F,C){function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function h(e,a){return e-a*Math.floor(e/
a)}var l=b("../main");b=b("object-assign");m.prototype=new l.baseCalendar;b(m.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),
dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear);return this._leapYear(e.year())},_leapYear:function(e){return 7>h(7*(0>e?e+1:e)+1,19)},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,l.local.invalidYear);return this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,a,g){e=
this.newDate(e,a,g);e.add(-e.dayOfWeek(),"d");return Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear).year();return this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,a){e.year&&(a=e.month(),e=e.year());this._validate(e,a,this.minDay,l.local.invalidMonth);return 12===a&&this.leapYear(e)?30:8===a&&5===h(this.daysInYear(e),10)?30:9===a&&3===h(this.daysInYear(e),10)?29:this.daysPerMonth[a-1]},weekDay:function(e,
a,g){return 6!==this.dayOfWeek(e,a,g)},extraInfo:function(e,a,g){e=this._validate(e,a,g,l.local.invalidDate);return{yearType:(this.leapYear(e)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(e)%10-3]}},toJD:function(e,a,g){g=this._validate(e,a,g,l.local.invalidDate);e=g.year();a=g.month();g=g.day();var k=0>=e?e+1:e;g=this.jdEpoch+this._delay1(k)+this._delay2(k)+g+1;if(7>a){for(k=7;k<=this.monthsInYear(e);k++)g+=this.daysInMonth(e,k);k=1}else k=7;for(;k<a;k++)g+=this.daysInMonth(e,
k);return g},_delay1:function(e){e=Math.floor((235*e-234)/19);e=29*e+Math.floor((12084+13753*e)/25920);3>h(3*(e+1),7)&&e++;return e},_delay2:function(e){var a=this._delay1(e-1),g=this._delay1(e);return 356===this._delay1(e+1)-g?2:382===g-a?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var a=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===a?1:a+1,7,1);)a++;for(var g=e<this.toJD(a,1,1)?7:1;e>this.toJD(a,g,this.daysInMonth(a,g));)g++;e=e-this.toJD(a,g,1)+1;return this.newDate(a,g,e)}});
l.calendars.hebrew=m},{"../main":593,"object-assign":473}],584:[function(b,F,C){function m(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");m.prototype=new h.baseCalendar;b(m.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),
monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-khams;Yawm al-jum'a;Yawm as-sabt".split(";"),dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(l){return 11>(11*this._validate(l,this.minMonth,this.minDay,h.local.invalidYear).year()+14)%30},weekOfYear:function(l,
e,a){l=this.newDate(l,e,a);l.add(-l.dayOfWeek(),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(l){return this.leapYear(l)?355:354},daysInMonth:function(l,e){l=this._validate(l,e,this.minDay,h.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(12===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(l,e,a){return 5!==this.dayOfWeek(l,e,a)},toJD:function(l,e,a){a=this._validate(l,e,a,h.local.invalidDate);l=a.year();e=a.month();a=a.day();l=0>=l?l+1:l;return a+Math.ceil(29.5*
(e-1))+354*(l-1)+Math.floor((3+11*l)/30)+this.jdEpoch-1},fromJD:function(l){l=Math.floor(l)+.5;var e=Math.floor((30*(l-this.jdEpoch)+10646)/10631);e=0>=e?e-1:e;var a=Math.min(12,Math.ceil((l-29-this.toJD(e,1,1))/29.5)+1);l=l-this.toJD(e,a,1)+1;return this.newDate(e,a,l)}});h.calendars.islamic=m},{"../main":593,"object-assign":473}],585:[function(b,F,C){function m(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");m.prototype=new h.baseCalendar;
b(m.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,h.local.invalidYear);l=0>l.year()?l.year()+1:l.year();return 0===l%4},weekOfYear:function(l,e,a){l=this.newDate(l,e,a);l.add(4-(l.dayOfWeek()||7),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(l,e){l=this._validate(l,e,this.minDay,h.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(2===l.month()&&this.leapYear(l.year())?
1:0)},weekDay:function(l,e,a){return 6>(this.dayOfWeek(l,e,a)||7)},toJD:function(l,e,a){a=this._validate(l,e,a,h.local.invalidDate);l=a.year();e=a.month();a=a.day();0>l&&l++;2>=e&&(l--,e+=12);return Math.floor(365.25*(l+4716))+Math.floor(30.6001*(e+1))+a-1524.5},fromJD:function(l){var e=Math.floor(l+.5)+1524,a=Math.floor((e-122.1)/365.25),g=Math.floor(365.25*a),k=Math.floor((e-g)/30.6001);l=k-Math.floor(14>k?1:13);a-=Math.floor(2<l?4716:4715);e=e-g-Math.floor(30.6001*k);0>=a&&a--;return this.newDate(a,
l,e)}});h.calendars.julian=m},{"../main":593,"object-assign":473}],586:[function(b,F,C){function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function h(e,a){return e-a*Math.floor(e/a)}var l=b("../main");b=b("object-assign");m.prototype=new l.baseCalendar;b(m.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),
dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},
leapYear:function(e){this._validate(e,this.minMonth,this.minDay,l.local.invalidYear);return!1},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,l.local.invalidYear).year();var a=Math.floor(e/400);e%=400;e+=0>e?400:0;return a+"."+Math.floor(e/20)+"."+e%20},forYear:function(e){e=e.split(".");if(3>e.length)throw"Invalid Mayan year";for(var a=0,g=0;g<e.length;g++){var k=parseInt(e[g],10);if(19<Math.abs(k)||0<g&&0>k)throw"Invalid Mayan year";a=20*a+k}return a},monthsInYear:function(e){this._validate(e,
this.minMonth,this.minDay,l.local.invalidYear);return 18},weekOfYear:function(e,a,g){this._validate(e,a,g,l.local.invalidDate);return 0},daysInYear:function(e){this._validate(e,this.minMonth,this.minDay,l.local.invalidYear);return 360},daysInMonth:function(e,a){this._validate(e,a,this.minDay,l.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(e,a,g){return this._validate(e,a,g,l.local.invalidDate).day()},weekDay:function(e,a,g){this._validate(e,a,g,l.local.invalidDate);
return!0},extraInfo:function(e,a,g){a=this._validate(e,a,g,l.local.invalidDate).toJD();e=this._toHaab(a);a=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[e[0]-1],haabMonth:e[0],haabDay:e[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(e){e-=this.jdEpoch;e=h(e+8+340,365);return[Math.floor(e/20)+1,h(e,20)]},_toTzolkin:function(e){e-=this.jdEpoch;return[h(e+20-1,20)+1,h(e+4-1,13)+1]},toJD:function(e,a,g){e=this._validate(e,a,g,
l.local.invalidDate);return e.day()+20*e.month()+360*e.year()+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var a=Math.floor(e/360);e%=360;e+=0>e?360:0;return this.newDate(a,Math.floor(e/20),e%20)}});l.calendars.mayan=m},{"../main":593,"object-assign":473}],587:[function(b,F,C){function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");m.prototype=new h.baseCalendar;var l=h.instance("gregorian");b(m.prototype,{name:"Nanakshahi",
jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),
dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,h.local.invalidYear||h.regionalOptions[""].invalidYear);return l.leapYear(e.year()+(1>e.year()?1:0)+1469)},weekOfYear:function(e,a,g){e=this.newDate(e,a,g);e.add(1-(e.dayOfWeek()||7),"d");return Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){e=this._validate(e,a,this.minDay,h.local.invalidMonth);return this.daysPerMonth[e.month()-
1]+(12===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,a,g){return 6>(this.dayOfWeek(e,a,g)||7)},toJD:function(e,a,g){a=this._validate(e,a,g,h.local.invalidMonth);e=a.year();0>e&&e++;g=a.day();for(var k=1;k<a.month();k++)g+=this.daysPerMonth[k-1];return g+l.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var a=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(a+1,1,1);)a++;e=e-Math.floor(this.toJD(a,1,1)+.5)+1;for(var g=1;e>this.daysInMonth(a,g);)e-=this.daysInMonth(a,g),
g++;return this.newDate(a,g,e)}});h.calendars.nanakshahi=m},{"../main":593,"object-assign":473}],588:[function(b,F,C){function m(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");m.prototype=new h.baseCalendar;b(m.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),
monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(l){return this.daysInYear(l)!==this.daysPerYear},weekOfYear:function(l,e,a){l=this.newDate(l,e,a);l.add(-l.dayOfWeek(),"d");return Math.floor((l.dayOfYear()-
1)/7)+1},daysInYear:function(l){l=this._validate(l,this.minMonth,this.minDay,h.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[l])return this.daysPerYear;for(var e=0,a=this.minMonth;12>=a;a++)e+=this.NEPALI_CALENDAR_DATA[l][a];return e},daysInMonth:function(l,e){l.year&&(e=l.month(),l=l.year());this._validate(l,e,this.minDay,h.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[l]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[l][e]},weekDay:function(l,
e,a){return 6!==this.dayOfWeek(l,e,a)},toJD:function(l,e,a){a=this._validate(l,e,a,h.local.invalidDate);l=a.year();e=a.month();a=a.day();var g=h.instance(),k=0,p=e,n=l;this._createMissingCalendarData(l);l-=9<p||9===p&&a>=this.NEPALI_CALENDAR_DATA[n][0]?56:57;9!==e&&(k=a,p--);for(;9!==p;)0>=p&&(p=12,n--),k+=this.NEPALI_CALENDAR_DATA[n][p],p--;9===e?(k+=a-this.NEPALI_CALENDAR_DATA[n][0],0>k&&(k+=g.daysInYear(l))):k+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0];return g.newDate(l,
1,1).add(k,"d").toJD()},fromJD:function(l){l=h.instance().fromJD(l);var e=l.year();l=l.dayOfYear();e+=56;this._createMissingCalendarData(e);for(var a=9,g=this.NEPALI_CALENDAR_DATA[e][a]-this.NEPALI_CALENDAR_DATA[e][0]+1;l>g;)a++,12<a&&(a=1,e++),g+=this.NEPALI_CALENDAR_DATA[e][a];return this.newDate(e,a,this.NEPALI_CALENDAR_DATA[e][a]-(g-l))},_createMissingCalendarData:function(l){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var a=l-1;a<l+2;a++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[a]&&
(this.NEPALI_CALENDAR_DATA[a]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,
30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,
29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,
30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,
31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,
31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,
32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,
31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,
31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,
31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,
31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,
31,32,31,32,30,31,30,29,30,29,30,30]}});h.calendars.nepali=m},{"../main":593,"object-assign":473}],589:[function(b,F,C){function m(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");m.prototype=new h.baseCalendar;b(m.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),
monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Chharshambe Panjshambe Jom'e Shambe".split(" "),dayNamesShort:"Yek Do Se Ch Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,h.local.invalidYear);return 682>682*((l.year()-(0<l.year()?474:473))%2820+512)%2816},weekOfYear:function(l,e,a){l=
this.newDate(l,e,a);l.add(-((l.dayOfWeek()+1)%7),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(l,e){l=this._validate(l,e,this.minDay,h.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(12===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(l,e,a){return 5!==this.dayOfWeek(l,e,a)},toJD:function(l,e,a){a=this._validate(l,e,a,h.local.invalidDate);l=a.year();e=a.month();a=a.day();l-=0<=l?474:473;var g=474+(l-2820*Math.floor(l/2820));return a+(7>=e?31*(e-1):30*(e-
1)+6)+Math.floor((682*g-110)/2816)+365*(g-1)+1029983*Math.floor(l/2820)+this.jdEpoch-1},fromJD:function(l){l=Math.floor(l)+.5;var e=l-this.toJD(475,1,1),a=Math.floor(e/1029983);e-=1029983*Math.floor(e/1029983);var g=2820;1029982!==e&&(g=Math.floor(e/366),g=Math.floor((2134*g+2816*(e-366*Math.floor(e/366))+2815)/1028522)+g+1);a=g+2820*a+474;a=0>=a?a-1:a;e=l-this.toJD(a,1,1)+1;e=186>=e?Math.ceil(e/31):Math.ceil((e-6)/30);l=l-this.toJD(a,e,1)+1;return this.newDate(a,e,l)}});h.calendars.persian=m;h.calendars.jalali=
m},{"../main":593,"object-assign":473}],590:[function(b,F,C){function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");var l=h.instance();m.prototype=new h.baseCalendar;b(m.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,h.local.invalidYear);e=this._t2gYear(e.year());return l.leapYear(e)},weekOfYear:function(e,a,g){a=this._validate(e,this.minMonth,
this.minDay,h.local.invalidYear);e=this._t2gYear(a.year());return l.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,a){e=this._validate(e,a,this.minDay,h.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(2===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,a,g){return 6>(this.dayOfWeek(e,a,g)||7)},toJD:function(e,a,g){a=this._validate(e,a,g,h.local.invalidDate);e=this._t2gYear(a.year());return l.toJD(e,a.month(),a.day())},fromJD:function(e){e=l.fromJD(e);var a=this._g2tYear(e.year());
return this.newDate(a,e.month(),e.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&-1>=e?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)}});h.calendars.taiwan=m},{"../main":593,"object-assign":473}],591:[function(b,F,C){function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");var l=h.instance();m.prototype=new h.baseCalendar;b(m.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,
daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,h.local.invalidYear);e=this._t2gYear(e.year());return l.leapYear(e)},weekOfYear:function(e,a,g){a=this._validate(e,this.minMonth,this.minDay,h.local.invalidYear);e=this._t2gYear(a.year());return l.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,a){e=this._validate(e,a,this.minDay,h.local.invalidMonth);return this.daysPerMonth[e.month()-1]+(2===e.month()&&this.leapYear(e.year())?
1:0)},weekDay:function(e,a,g){return 6>(this.dayOfWeek(e,a,g)||7)},toJD:function(e,a,g){a=this._validate(e,a,g,h.local.invalidDate);e=this._t2gYear(a.year());return l.toJD(e,a.month(),a.day())},fromJD:function(e){e=l.fromJD(e);var a=this._g2tYear(e.year());return this.newDate(a,e.month(),e.day())},_t2gYear:function(e){return e-this.yearsOffset-(1<=e&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&-1>=e?1:0)}});h.calendars.thai=m},{"../main":593,"object-assign":473}],
592:[function(b,F,C){function m(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}var h=b("../main");b=b("object-assign");m.prototype=new h.baseCalendar;b(m.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thalth;Yawm al-Arba;Yawm al-Khams;Yawm al-Juma;Yawm al-Sabt".split(";"),dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,h.local.invalidYear);return 355===this.daysInYear(e.year())},weekOfYear:function(e,a,g){e=this.newDate(e,a,g);e.add(-e.dayOfWeek(),"d");return Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var a=
0,g=1;12>=g;g++)a+=this.daysInMonth(e,g);return a},daysInMonth:function(e,a){e=this._validate(e,a,this.minDay,h.local.invalidMonth).toJD()-24E5+.5;for(var g=a=0;g<l.length;g++){if(l[g]>e)return l[a]-l[a-1];a++}return 30},weekDay:function(e,a,g){return 5!==this.dayOfWeek(e,a,g)},toJD:function(e,a,g){e=this._validate(e,a,g,h.local.invalidDate);a=12*(e.year()-1)+e.month()-15292;return e.day()+l[a-1]-1+24E5-.5},fromJD:function(e){e=e-24E5+.5;for(var a=0,g=0;g<l.length&&!(l[g]>e);g++)a++;g=a+15292;var k=
Math.floor((g-1)/12);return this.newDate(k+1,g-12*k,e-l[a-1]+1)},isValid:function(e,a,g){var k=h.baseCalendar.prototype.isValid.apply(this,arguments);k&&(e=null!=e.year?e.year:e,k=1276<=e&&1500>=e);return k},_validate:function(e,a,g,k){var p=h.baseCalendar.prototype._validate.apply(this,arguments);if(1276>p.year||1500<p.year)throw k.replace(/\{0\}/,this.local.name);return p}});h.calendars.ummalqura=m;var l=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,
729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,
3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,
6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,
9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,
12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,
14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,
17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,
19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,
22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,
24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,
27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,
29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,
32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,
34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,
37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,
39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,
42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,
44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,
46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,
49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,
51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,
54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,
56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,
59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,
61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,
64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,
66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,
69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,
71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,
74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,
76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,
79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":593,"object-assign":473}],593:[function(b,F,C){function m(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];
this.calendars={};this._localCals={}}function h(k,p,n,c){this._calendar=k;this._year=p;this._month=n;this._day=c;if(0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function l(k,p){k=""+k;return"000000".substring(0,p-k.length)+k}function e(){this.shortYearCutoff="+10"}function a(k){this.local=this.regionalOptions[k]||this.regionalOptions[""]}b=b("object-assign");
b(m.prototype,{instance:function(k,p){k=(k||"gregorian").toLowerCase();p=p||"";var n=this._localCals[k+"-"+p];!n&&this.calendars[k]&&(n=new this.calendars[k](p),this._localCals[k+"-"+p]=n);if(!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,k);return n},newDate:function(k,p,n,c,f){c=(null!=k&&k.year?k.calendar():"string"===typeof c?this.instance(c,f):c)||this.instance();return c.newDate(k,p,n)},substituteDigits:function(k){return function(p){return(p+
"").replace(/[0-9]/g,function(n){return k[n]})}},substituteChineseDigits:function(k,p){return function(n){for(var c="",f=0;0<n;){var d=n%10;c=(0===d?"":k[d]+p[f])+c;f++;n=Math.floor(n/10)}0===c.indexOf(k[1]+p[1])&&(c=c.substr(1));return c||k[0]}}});b(h.prototype,{newDate:function(k,p,n){return this._calendar.newDate(null==k?this:k,p,n)},year:function(k){return 0===arguments.length?this._year:this.set(k,"y")},month:function(k){return 0===arguments.length?this._month:this.set(k,"m")},day:function(k){return 0===
arguments.length?this._day:this.set(k,"d")},date:function(k,p,n){if(!this._calendar.isValid(k,p,n))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);this._year=k;this._month=p;this._day=n;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},
daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(k,p){return this._calendar.add(this,k,p)},set:function(k,p){return this._calendar.set(this,k,p)},compareTo:function(k){if(this._calendar.name!==
k._calendar.name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,k._calendar.local.name);k=this._year!==k._year?this._year-k._year:this._month!==k._month?this.monthOfYear()-k.monthOfYear():this._day-k._day;return 0===k?0:0>k?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(k){return this._calendar.fromJD(k)},toJSDate:function(){return this._calendar.toJSDate(this)},
fromJSDate:function(k){return this._calendar.fromJSDate(k)},toString:function(){return(0>this.year()?"-":"")+l(Math.abs(this.year()),4)+"-"+l(this.month(),2)+"-"+l(this.day(),2)}});b(e.prototype,{_validateLevel:0,newDate:function(k,p,n){if(null==k)return this.today();k.year&&(this._validate(k,p,n,g.local.invalidDate||g.regionalOptions[""].invalidDate),n=k.day(),p=k.month(),k=k.year());return new h(this,k,p,n)},today:function(){return this.fromJSDate(new Date)},epoch:function(k){return 0>this._validate(k,
this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(k){k=this._validate(k,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return(0>k.year()?"-":"")+l(Math.abs(k.year()),4)},monthsInYear:function(k){this._validate(k,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return 12},monthOfYear:function(k,p){k=this._validate(k,p,this.minDay,
g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return(k.month()+this.monthsInYear(k)-this.firstMonth)%this.monthsInYear(k)+this.minMonth},fromMonthOfYear:function(k,p){p=(p+this.firstMonth-2*this.minMonth)%this.monthsInYear(k)+this.minMonth;this._validate(k,p,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return p},daysInYear:function(k){k=this._validate(k,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return this.leapYear(k)?366:
365},dayOfYear:function(k,p,n){k=this._validate(k,p,n,g.local.invalidDate||g.regionalOptions[""].invalidDate);return k.toJD()-this.newDate(k.year(),this.fromMonthOfYear(k.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(k,p,n){k=this._validate(k,p,n,g.local.invalidDate||g.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(k))+2)%this.daysInWeek()},extraInfo:function(k,p,n){this._validate(k,p,n,g.local.invalidDate||g.regionalOptions[""].invalidDate);
return{}},add:function(k,p,n){this._validate(k,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);return this._correctAdd(k,this._add(k,p,n),p,n)},_add:function(k,p,n){this._validateLevel++;if("d"===n||"w"===n){p=k.toJD()+p*("w"===n?this.daysInWeek():1);var c=k.calendar().fromJD(p);this._validateLevel--;return[c.year(),c.month(),c.day()]}try{var f=k.year()+("y"===n?p:0),d=k.monthOfYear()+("m"===n?p:0);c=k.day();if("y"===n)k.month()!==this.fromMonthOfYear(f,d)&&(d=this.newDate(f,
k.month(),this.minDay).monthOfYear()),d=Math.min(d,this.monthsInYear(f)),c=Math.min(c,this.daysInMonth(f,this.fromMonthOfYear(f,d)));else if("m"===n){for(;d<this.minMonth;)f--,d+=this.monthsInYear(f);for(var q=this.monthsInYear(f);d>q-1+this.minMonth;)f++,d-=q,q=this.monthsInYear(f);c=Math.min(c,this.daysInMonth(f,this.fromMonthOfYear(f,d)))}var r=[f,this.fromMonthOfYear(f,d),c];this._validateLevel--;return r}catch(u){throw this._validateLevel--,u;}},_correctAdd:function(k,p,n,c){this.hasYearZero||
"y"!==c&&"m"!==c||0!==p[0]&&0<k.year()===0<p[0]||(p={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[c],p=this._add(k,n*p[0]+(0>n?-1:1)*p[1],p[2]));return k.date(p[0],p[1],p[2])},set:function(k,p,n){this._validate(k,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);var c="y"===n?p:k.year(),f="m"===n?p:k.month();p="d"===n?p:k.day();if("y"===n||"m"===n)p=Math.min(p,this.daysInMonth(c,f));return k.date(c,
f,p)},isValid:function(k,p,n){this._validateLevel++;var c=this.hasYearZero||0!==k;c&&(k=this.newDate(k,p,this.minDay),c=p>=this.minMonth&&p-this.minMonth<this.monthsInYear(k)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(k));this._validateLevel--;return c},toJSDate:function(k,p,n){k=this._validate(k,p,n,g.local.invalidDate||g.regionalOptions[""].invalidDate);return g.instance().fromJD(this.toJD(k)).toJSDate()},fromJSDate:function(k){return this.fromJD(g.instance().fromJSDate(k).toJD())},_validate:function(k,
p,n,c){if(k.year){if(0===this._validateLevel&&this.name!==k.calendar().name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,k.calendar().local.name);return k}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(k,p,n))throw c.replace(/\{0\}/,this.local.name);var f=this.newDate(k,p,n);this._validateLevel--;return f}catch(d){throw this._validateLevel--,d;}}});a.prototype=new e;b(a.prototype,{name:"Gregorian",
jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);k=k.year()+(0>k.year()?1:0);return 0===k%4&&(0!==k%100||0===k%400)},weekOfYear:function(k,p,n){k=this.newDate(k,p,n);k.add(4-(k.dayOfWeek()||7),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(k,p){k=this._validate(k,p,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return this.daysPerMonth[k.month()-
1]+(2===k.month()&&this.leapYear(k.year())?1:0)},weekDay:function(k,p,n){return 6>(this.dayOfWeek(k,p,n)||7)},toJD:function(k,p,n){n=this._validate(k,p,n,g.local.invalidDate||g.regionalOptions[""].invalidDate);k=n.year();p=n.month();n=n.day();0>k&&k++;3>p&&(p+=12,k--);var c=Math.floor(k/100);return Math.floor(365.25*(k+4716))+Math.floor(30.6001*(p+1))+n+(2-c+Math.floor(c/4))-1524.5},fromJD:function(k){k=Math.floor(k+.5);var p=Math.floor((k-1867216.25)/36524.25);p=k+1+p-Math.floor(p/4);var n=p+1524;
k=Math.floor((n-122.1)/365.25);var c=Math.floor(365.25*k);p=Math.floor((n-c)/30.6001);n=n-c-Math.floor(30.6001*p);p-=13.5<p?13:1;k-=2.5<p?4716:4715;0>=k&&k--;return this.newDate(k,p,n)},toJSDate:function(k,p,n){k=this._validate(k,p,n,g.local.invalidDate||g.regionalOptions[""].invalidDate);k=new Date(k.year(),k.month()-1,k.day());k.setHours(0);k.setMinutes(0);k.setSeconds(0);k.setMilliseconds(0);k.setHours(12<k.getHours()?k.getHours()+2:0);return k},fromJSDate:function(k){return this.newDate(k.getFullYear(),
k.getMonth()+1,k.getDate())}});var g=F.exports=new m;g.cdate=h;g.baseCalendar=e;g.calendars.gregorian=a},{"object-assign":473}],594:[function(b,F,C){F=b("object-assign");var m=b("./main");F(m.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});
m.local=m.regionalOptions[""];F(m.cdate.prototype,{formatDate:function(h,l){"string"!==typeof h&&(l=h,h="");return this._calendar.formatDate(h||"",this,l)}});F(m.baseCalendar.prototype,{UNIX_EPOCH:m.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:m.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",
RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(h,l,e){"string"!==typeof h&&(e=l,l=h,h="");if(!l)return"";if(l.calendar()!==this)throw m.local.invalidFormat||m.regionalOptions[""].invalidFormat;h=h||this.local.dateFormat;e=e||{};for(var a=e.dayNamesShort||this.local.dayNamesShort,g=e.dayNames||this.local.dayNames,k=e.monthNumbers||this.local.monthNumbers,p=e.monthNamesShort||this.local.monthNamesShort,n=e.monthNames||this.local.monthNames,c=function(E,B){for(var t=1;x+
t<h.length&&h.charAt(x+t)===E;)t++;x+=t-1;return 1<Math.floor(t/(B||1))},f=function(E,B,t,G){B=""+B;if(c(E,G))for(;B.length<t;)B="0"+B;return B},d=function(E,B,t,G){return c(E)?G[B]:t[B]},q=this,r=function(E){return"function"===typeof k?k.call(q,E,c("m")):w(f("m",E.month(),2))},u=function(E,B){return B?"function"===typeof n?n.call(q,E):n[E.month()-q.minMonth]:"function"===typeof p?p.call(q,E):p[E.month()-q.minMonth]},v=this.local.digits,w=function(E){return e.localNumbers&&v?v(E):E},y="",D=!1,x=0;x<
h.length;x++)if(D)"'"!==h.charAt(x)||c("'")?y+=h.charAt(x):D=!1;else switch(h.charAt(x)){case "d":y+=w(f("d",l.day(),2));break;case "D":y+=d("D",l.dayOfWeek(),a,g);break;case "o":y+=f("o",l.dayOfYear(),3);break;case "w":y+=f("w",l.weekOfYear(),2);break;case "m":y+=r(l);break;case "M":y+=u(l,c("M"));break;case "y":y+=c("y",2)?l.year():(10>l.year()%100?"0":"")+l.year()%100;break;case "Y":c("Y",2);y+=l.formatYear();break;case "J":y+=l.toJD();break;case "@":y+=(l.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;
break;case "!":y+=(l.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":c("'")?y+="'":D=!0;break;default:y+=h.charAt(x)}return y},parseDate:function(h,l,e){if(null==l)throw m.local.invalidArguments||m.regionalOptions[""].invalidArguments;l="object"===typeof l?l.toString():l+"";if(""===l)return null;h=h||this.local.dateFormat;e=e||{};var a=e.shortYearCutoff||this.shortYearCutoff;a="string"!==typeof a?a:this.today().year()%100+parseInt(a,10);for(var g=e.dayNamesShort||this.local.dayNamesShort,
k=e.dayNames||this.local.dayNames,p=e.parseMonth||this.local.parseMonth,n=e.monthNumbers||this.local.monthNumbers,c=e.monthNamesShort||this.local.monthNamesShort,f=e.monthNames||this.local.monthNames,d=e=-1,q=-1,r=-1,u=-1,v=!1,w=!1,y=function(M,N){for(var H=1;L+H<h.length&&h.charAt(L+H)===M;)H++;L+=H-1;return 1<Math.floor(H/(N||1))},D=function(M,N){N=y(M,N);M=[2,3,N?4:2,N?4:2,10,11,20]["oyYJ@!".indexOf(M)+1];M=new RegExp("^-?\\d{1,"+M+"}");M=l.substring(I).match(M);if(!M)throw(m.local.missingNumberAt||
m.regionalOptions[""].missingNumberAt).replace(/\{0\}/,I);I+=M[0].length;return parseInt(M[0],10)},x=this,E=function(){if("function"===typeof n){y("m");var M=n.call(x,l.substring(I));I+=M.length;return M}return D("m")},B=function(M,N,H,J){M=y(M,J)?H:N;for(N=0;N<M.length;N++)if(l.substr(I,M[N].length).toLowerCase()===M[N].toLowerCase())return I+=M[N].length,N+x.minMonth;throw(m.local.unknownNameAt||m.regionalOptions[""].unknownNameAt).replace(/\{0\}/,I);},t=function(){if("function"===typeof f){var M=
y("M")?f.call(x,l.substring(I)):c.call(x,l.substring(I));I+=M.length;return M}return B("M",c,f)},G=function(){if(l.charAt(I)!==h.charAt(L))throw(m.local.unexpectedLiteralAt||m.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,I);I++},I=0,L=0;L<h.length;L++)if(w)"'"!==h.charAt(L)||y("'")?G():w=!1;else switch(h.charAt(L)){case "d":r=D("d");break;case "D":B("D",g,k);break;case "o":u=D("o");break;case "w":D("w");break;case "m":q=E();break;case "M":q=t();break;case "y":d=L;v=!y("y",2);L=d;d=D("y",
2);break;case "Y":d=D("Y",2);break;case "J":e=D("J")+.5;"."===l.charAt(I)&&(I++,D("J"));break;case "@":e=D("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":e=D("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case "*":I=l.length;break;case "'":y("'")?G():w=!0;break;default:G()}if(I<l.length)throw m.local.unexpectedText||m.regionalOptions[""].unexpectedText;-1===d?d=this.today().year():100>d&&v&&(d+=-1===a?1900:this.today().year()-this.today().year()%100-(d<=a?0:100));"string"===typeof q&&(q=p.call(this,
d,q));if(-1<u)for(q=1,r=u,a=this.daysInMonth(d,q);r>a;a=this.daysInMonth(d,q))q++,r-=a;return-1<e?this.fromJD(e):this.newDate(d,q,r)},determineDate:function(h,l,e,a,g){e&&"object"!==typeof e&&(g=a,a=e,e=null);"string"!==typeof a&&(g=a,a="");l=l?l.newDate():null;if(null==h)h=l;else{if("string"===typeof h)a:{try{var k=this.parseDate(a,h,g);break a}catch(p){}h=h.toLowerCase();e=(h.match(/^c/)&&e?e.newDate():null)||this.today();a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(g=a.exec(h);g;)e.add(parseInt(g[1],10),
g[2]||"d"),g=a.exec(h);k=e}else k="number"===typeof h?isNaN(h)||Infinity===h||-Infinity===h?l:this.today().add(h,"d"):this.newDate(h);h=k}return h}})},{"./main":593,"object-assign":473}],595:[function(b,F,C){F.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da \x3d _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db \x3d _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da \x3e\x3d 0) !\x3d\x3d (_inline_1_db \x3e\x3d 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":151}],596:[function(b,F,C){F.exports=function(h,l){var e=[];l=+l||0;m(h.hi(h.shape[0]-1),e,l);return e};var m=b("./lib/zc-core")},
{"./lib/zc-core":595}],597:[function(b,F,C){F.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],598:[function(b,F,C){C=
b("./arrow_paths");var m=b("../../plots/font_attributes"),h=b("../../plots/cartesian/constants");b=b("../../plot_api/plot_template").templatedArray;F.exports=b("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:m({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",
min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},
borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:C.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:C.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},
startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",h.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",
values:["pixel",h.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",h.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",h.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",
values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:m({editType:"arraydraw"}),
editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/font_attributes":825,"./arrow_paths":597}],599:[function(b,F,C){function m(g){l.filterVisible(g._fullLayout.annotations).forEach(function(k){var p=e.getFromId(g,k.xref),n=e.getFromId(g,k.yref);k._extremes={};p&&h(k,p);n&&h(k,n)})}function h(g,k){var p=k._id,n=p.charAt(0),
c=g[n],f=g["a"+n],d=g["_"+n+"padplus"],q=g["_"+n+"padminus"],r={x:1,y:-1}[n]*g[n+"shift"],u=3*g.arrowsize*g.arrowwidth||0,v=u+r,w=u-r,y=3*g.startarrowsize*g.arrowwidth||0;u=y+r;r=y-r;g["a"+n+"ref"]===g[n+"ref"]?(n=e.findExtremes(k,[k.r2c(c)],{ppadplus:v,ppadminus:w}),k=e.findExtremes(k,[k.r2c(f)],{ppadplus:Math.max(d,u),ppadminus:Math.max(q,r)}),k={min:[n.min[0],k.min[0]],max:[n.max[0],k.max[0]]}):(u=f?u+f:u,r=f?r-f:r,k=e.findExtremes(k,[k.r2c(c)],{ppadplus:Math.max(d,v,u),ppadminus:Math.max(q,w,
r)}));g._extremes[p]=k}var l=b("../../lib"),e=b("../../plots/cartesian/axes"),a=b("./draw").draw;F.exports=function(g){if(l.filterVisible(g._fullLayout.annotations).length&&g._fullData.length)return l.syncOrAsync([a,m],g)}},{"../../lib":749,"../../plots/cartesian/axes":797,"./draw":604}],600:[function(b,F,C){function m(g,k){g=g._fullLayout.annotations;var p=[],n=[],c=[],f=(k||[]).length,d,q,r;for(d=0;d<g.length;d++){var u=g[d];if(r=u.clicktoshow){for(q=0;q<f;q++){var v=k[q];var w=v.xaxis;var y=v.yaxis;
if(w._id===u.xref&&y._id===u.yref&&w.d2r(v.x)===h(u._xclick,w)&&y.d2r(v.y)===h(u._yclick,y)){v=u.visible?"onout"===r?n:c:p;v.push(d);break}}q===f&&u.visible&&"onout"===r&&n.push(d)}}return{on:p,off:n,explicitOff:c}}function h(g,k){return"log"===k.type?k.l2r(g):k.d2r(g)}var l=b("../../lib"),e=b("../../registry"),a=b("../../plot_api/plot_template").arrayEditor;F.exports={hasClickToShow:function(g,k){g=m(g,k);return 0<g.on.length||0<g.explicitOff.length},onClick:function(g,k){var p=m(g,k);k=p.on;p=p.off.concat(p.explicitOff);
var n={},c=g._fullLayout.annotations,f;if(k.length||p.length){for(f=0;f<k.length;f++){var d=a(g.layout,"annotations",c[k[f]]);d.modifyItem("visible",!0);l.extendFlat(n,d.getUpdateObj())}for(f=0;f<p.length;f++)d=a(g.layout,"annotations",c[p[f]]),d.modifyItem("visible",!1),l.extendFlat(n,d.getUpdateObj());return e.call("update",g,{},n)}}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880}],601:[function(b,F,C){var m=b("../../lib"),h=b("../color");F.exports=function(l,e,a,g){g("opacity");
l=g("bgcolor");var k=g("bordercolor");k=h.opacity(k);g("borderpad");var p=g("borderwidth"),n=g("showarrow");g("text",n?" ":a._dfltTitle.annotation);g("textangle");m.coerceFont(g,"font",a.font);g("width");g("align");g("height")&&g("valign");if(n){n=g("arrowside");if(-1!==n.indexOf("end")){var c=g("arrowhead");var f=g("arrowsize")}-1!==n.indexOf("start")&&(g("startarrowhead",c),g("startarrowsize",f));g("arrowcolor",k?e.bordercolor:h.defaultLine);g("arrowwidth",2*(k&&p||1));g("standoff");g("startstandoff")}e=
g("hovertext");a=a.hoverlabel||{};e&&(l=g("hoverlabel.bgcolor",a.bgcolor||(h.opacity(l)?h.rgb(l):h.defaultLine)),l=g("hoverlabel.bordercolor",a.bordercolor||h.contrast(l)),m.coerceFont(g,"hoverlabel.font",{family:a.font.family,size:a.font.size,color:a.font.color||l}));g("captureevents",!!e)}},{"../../lib":749,"../color":615}],602:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../../lib/to_log_range");F.exports=function(l,e,a,g){function k(d){var q=n[d];q=p?h(q,e.range):Math.pow(10,q);m(q)||(q=null);
g(c+d,q)}e=e||{};var p="log"===a&&"linear"===e.type;a="linear"===a&&"log"===e.type;if(p||a){l=l._fullLayout.annotations;a=e._id.charAt(0);for(var n,c,f=0;f<l.length;f++)n=l[f],c="annotations["+f+"].",n[a+"ref"]===e._id&&k(a),n["a"+a+"ref"]===e._id&&k("a"+a)}}},{"../../lib/to_log_range":775,"fast-isnumeric":241}],603:[function(b,F,C){function m(k,p,n){function c(x,E){return h.coerce(k,p,g,x,E)}var f=c("visible"),d=c("clicktoshow");if(f||d){a(k,p,n,c);f=p.showarrow;var q=["x","y"],r=[-10,-30];n={_fullLayout:n};
for(var u=0;2>u;u++){var v=q[u],w=l.coerceRef(k,p,n,v,"","paper");"paper"!==w&&l.getFromId(n,w)._annIndices.push(p._index);l.coercePosition(p,n,c,w,v,.5);if(f){var y="a"+v,D=l.coerceRef(k,p,n,y,"pixel");"pixel"!==D&&D!==w&&(D=p[y]="pixel");l.coercePosition(p,n,c,D,y,"pixel"===D?r[u]:.4)}c(v+"anchor");c(v+"shift")}h.noneOrAll(k,p,["x","y"]);f&&h.noneOrAll(k,p,["ax","ay"]);d&&(d=c("xclick"),f=c("yclick"),p._xclick=void 0===d?p.x:l.cleanPosition(d,n,p.xref),p._yclick=void 0===f?p.y:l.cleanPosition(f,
n,p.yref))}}var h=b("../../lib"),l=b("../../plots/cartesian/axes"),e=b("../../plots/array_container_defaults"),a=b("./common_defaults"),g=b("./attributes");F.exports=function(k,p){e(k,p,{name:"annotations",handleItemDefaults:m})}},{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":598,"./common_defaults":601}],604:[function(b,F,C){function m(v,w){var y=v._fullLayout.annotations[w]||{},D=k.getFromId(v,y.xref),x=k.getFromId(v,y.yref);D&&D.setScale();
x&&x.setScale();h(v,y,w,!1,D,x)}function h(v,w,y,D,x,E){function B(oa){oa={index:y,annotation:w._input,fullAnnotation:w,event:oa};D&&(oa.subplotId=D);return oa}function t(oa){oa.call(n.font,ra).attr({"text-anchor":{left:"start",right:"end"}[w.align]||"middle"});f.convertToTspans(oa,v,G);return oa}function G(){function oa(Ha,ab){"auto"===ab&&(ab=Ha<1/3?"left":Ha>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ab]}var ua=ta.selectAll("a");1===ua.size()&&ua.text()===
ta.text()&&ca.insert("a",":first-child").attr({"xlink:xlink:href":ua.attr("xlink:href"),"xlink:xlink:show":ua.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ha.node());ua=ca.select(".annotation-text-math-group");for(var ka=!ua.empty(),sa=n.bBox((ka?ua:ta).node()),ya=sa.width,qa=sa.height,xa=w.width||ya,Ca=w.height||qa,Ja=Math.round(xa+2*fa),eb=Math.round(Ca+2*fa),Ra=!1,Wa=["x","y"],Ea=0;Ea<Wa.length;Ea++){var Ia=Wa[Ea],Qa=w[Ia+"ref"]||Ia,lb=w["a"+Ia+"ref"],hb={x,y:E}[Ia],Fa=(V+
("x"===Ia?0:-90))*Math.PI/180,La=Ja*Math.cos(Fa),Oa=eb*Math.sin(Fa);Fa=Math.abs(La)+Math.abs(Oa);var fb=w[Ia+"anchor"],bb=w[Ia+"shift"]*("x"===Ia?1:-1),Pa=P[Ia];if(hb){var Ta=hb.r2fraction(w[Ia]);if(0>Ta||1<Ta)if(lb===Qa){if(Ta=hb.r2fraction(w["a"+Ia]),0>Ta||1<Ta)Ra=!0}else Ra=!0;Ta=hb._offset+hb.r2p(w[Ia]);var Ya=.5}else"x"===Ia?(Ya=w[Ia],Ta=L.l+L.w*Ya):(Ya=1-w[Ia],Ta=L.t+L.h*Ya),Ya=w.showarrow?.5:Ya;w.showarrow?(Pa.head=Ta,fb=w["a"+Ia],La=La*oa(.5,w.xanchor)-Oa*oa(.5,w.yanchor),lb===Qa?(Pa.tail=
hb._offset+hb.r2p(fb),hb=La):(Pa.tail=Ta+fb,hb=La+fb),Pa.text=Pa.tail+La,Ta=I["x"===Ia?"width":"height"],"paper"===Qa&&(Pa.head=g.constrain(Pa.head,1,Ta-1)),"pixel"===lb&&(Qa=-Math.max(Pa.tail-3,Pa.text),lb=Math.min(Pa.tail+3,Pa.text)-Ta,0<Qa?(Pa.tail+=Qa,Pa.text+=Qa):0<lb&&(Pa.tail-=lb,Pa.text-=lb)),Pa.tail+=bb,Pa.head+=bb):(hb=La=Fa*oa(Ya,fb),Pa.text=Ta+La);Pa.text+=bb;La+=bb;hb+=bb;w["_"+Ia+"padplus"]=Fa/2+hb;w["_"+Ia+"padminus"]=Fa/2-hb;w["_"+Ia+"size"]=Fa;w["_"+Ia+"shift"]=La}if(Ra)ca.remove();
else{Wa=Ra=0;"left"!==w.align&&(Ra=(xa-ya)*("center"===w.align?.5:1));"top"!==w.valign&&(Wa=(Ca-qa)*("middle"===w.valign?.5:1));ka?ua.select("svg").attr({x:fa+Ra-1,y:fa+Wa}).call(n.setClipUrl,na?U:null,v):ta.call(f.positionText,fa+Ra-sa.left,fa+Wa-sa.top).call(n.setClipUrl,na?U:null,v);pa.select("rect").call(n.setRect,fa,fa,xa,Ca);ha.call(n.setRect,ia/2,ia/2,Ja-ia,eb-ia);ca.call(n.setTranslate,Math.round(P.x.text-Ja/2),Math.round(P.y.text-eb/2));ba.attr({transform:"rotate("+V+","+P.x.text+","+P.y.text+
")"});var nb=function(Ha,ab){Y.selectAll(".annotation-arrow-g").remove();var ib=P.x.head,ob=P.y.head,db=P.x.tail+Ha,gb=P.y.tail+ab,rb=P.x.text+Ha;Ha=P.y.text+ab;ab=g.rotationXYMatrix(V,rb,Ha);var Bb=g.apply2DTransform(ab);ab=g.apply2DTransform2(ab);var Qb=+ha.attr("width"),gc=+ha.attr("height");rb-=.5*Qb;Qb=rb+Qb;Ha-=.5*gc;gc=Ha+gc;ab=[[rb,Ha,rb,gc],[rb,gc,Qb,gc],[Qb,gc,Qb,Ha],[Qb,Ha,rb,Ha]].map(ab);if(!ab.reduce(function(Nc,gd){return Nc^!!g.segmentsIntersect(ib,ob,ib+1E6,ob+1E6,gd[0],gd[1],gd[2],
gd[3])},!1)){ab.forEach(function(Nc){if(Nc=g.segmentsIntersect(db,gb,ib,ob,Nc[0],Nc[1],Nc[2],Nc[3]))db=Nc.x,gb=Nc.y});ab=w.arrowwidth;gc=w.arrowcolor;Ha=w.arrowside;var tc=Y.append("g").style({opacity:p.opacity(gc)}).classed("annotation-arrow-g",!0);gc=tc.append("path").attr("d","M"+db+","+gb+"L"+ib+","+ob).style("stroke-width",ab+"px").call(p.stroke,p.rgb(gc));u(gc,Ha,w);if(M.annotationPosition&&gc.node().parentNode&&!D){Ha=ib;gc=ob;w.standoff&&(rb=Math.sqrt(Math.pow(ib-db,2)+Math.pow(ob-gb,2)),
Ha+=w.standoff*(db-ib)/rb,gc+=w.standoff*(gb-ob)/rb);ab=tc.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(db-Ha)+","+(gb-gc),transform:"translate("+Ha+","+gc+")"}).style("stroke-width",ab+6+"px").call(p.stroke,"rgba(0,0,0,0)").call(p.fill,"rgba(0,0,0,0)");var Ac,Uc;q.init({element:ab.node(),gd:v,prepFn:function(){var Nc=n.getTranslate(ca);Ac=Nc.x;Uc=Nc.y;x&&x.autorange&&J(x._name+".autorange",!0);E&&E.autorange&&J(E._name+
".autorange",!0)},moveFn:function(Nc,gd){var Xc=Bb(Ac,Uc),ed=Xc[0]+Nc;Xc=Xc[1]+gd;ca.call(n.setTranslate,ed,Xc);O("x",x?x.p2r(x.r2p(w.x)+Nc):w.x+Nc/L.w);O("y",E?E.p2r(E.r2p(w.y)+gd):w.y-gd/L.h);w.axref===w.xref&&O("ax",x.p2r(x.r2p(w.ax)+Nc));w.ayref===w.yref&&O("ay",E.p2r(E.r2p(w.ay)+gd));tc.attr("transform","translate("+Nc+","+gd+")");ba.attr({transform:"rotate("+V+","+ed+","+Xc+")"})},doneFn:function(){e.call("_guiRelayout",v,Q());var Nc=document.querySelector(".js-notes-box-panel");Nc&&Nc.redraw(Nc.selectedObj)}})}}};
w.showarrow&&nb(0,0);if(ea){var Da;q.init({element:ca.node(),gd:v,prepFn:function(){Da=ba.attr("transform")},moveFn:function(Ha,ab){var ib="pointer";if(w.showarrow)w.axref===w.xref?O("ax",x.p2r(x.r2p(w.ax)+Ha)):O("ax",w.ax+Ha),w.ayref===w.yref?O("ay",E.p2r(E.r2p(w.ay)+ab)):O("ay",w.ay+ab),nb(Ha,ab);else{if(D)return;if(x)var ob=x.p2r(x.r2p(w.x)+Ha);else ob=w._xsize/L.w,ob=q.align(w.x+(w._xshift-w.xshift)/L.w-ob/2+Ha/L.w,ob,0,1,w.xanchor);if(E)var db=E.p2r(E.r2p(w.y)+ab);else db=w._ysize/L.h,db=q.align(w.y-
(w._yshift+w.yshift)/L.h-db/2-ab/L.h,db,0,1,w.yanchor);O("x",ob);O("y",db);x&&E||(ib=q.getCursor(x?.5:ob,E?.5:db,w.xanchor,w.yanchor))}ba.attr({transform:"translate("+Ha+","+ab+")"+Da});d(ca,ib)},clickFn:function(Ha,ab){w.captureevents&&v.emit("plotly_clickannotation",B(ab))},doneFn:function(){d(ca);e.call("_guiRelayout",v,Q());var Ha=document.querySelector(".js-notes-box-panel");Ha&&Ha.redraw(Ha.selectedObj)}})}}}var I=v._fullLayout,L=v._fullLayout._size,M=v._context.edits;if(D){var N="annotation-"+
D;var H=D+".annotations"}else N="annotation",H="annotations";H=r(v.layout,H,w);var J=H.modifyBase,O=H.modifyItem,Q=H.getUpdateObj;I._infolayer.selectAll("."+N+'[data-index\x3d"'+y+'"]').remove();var U="clip"+I._uid+"_ann"+y;if(w._input&&!1!==w.visible){var P={x:{},y:{}},V=+w.textangle||0,Y=I._infolayer.append("g").classed(N,!0).attr("data-index",String(y)).style("opacity",w.opacity),ba=Y.append("g").classed("annotation-text-g",!0),ea=M[w.showarrow?"annotationTail":"annotationPosition"];N=w.captureevents||
M.annotationText||ea;var ca=ba.append("g").style("pointer-events",N?"all":null).call(d,"pointer").on("click",function(){v._dragging=!1;v.emit("plotly_clickannotation",B(l.event))});if(w.hovertext)ca.on("mouseover",function(){var oa=w.hoverlabel,ua=oa.font,ka=this.getBoundingClientRect(),sa=v.getBoundingClientRect();c.loneHover({x0:ka.left-sa.left,x1:ka.right-sa.left,y:(ka.top+ka.bottom)/2-sa.top,text:w.hovertext,color:oa.bgcolor,borderColor:oa.bordercolor,fontFamily:ua.family,fontSize:ua.size,fontColor:ua.color},
{container:I._hoverlayer.node(),outerContainer:I._paper.node(),gd:v})}).on("mouseout",function(){c.loneUnhover(I._hoverlayer.node())});var ia=w.borderwidth,fa=ia+w.borderpad,ha=ca.append("rect").attr("class","bg").style("stroke-width",ia+"px").call(p.stroke,w.bordercolor).call(p.fill,w.bgcolor),na=w.width||w.height,pa=I._topclips.selectAll("#"+U).data(na?[0]:[]);pa.enter().append("clipPath").classed("annclip",!0).attr("id",U).append("rect");pa.exit().remove();var ra=w.font;N=I._meta?g.templateString(w.text,
I._meta):w.text;var ta=ca.append("text").classed("annotation-text",!0).text(N);if(M.annotationText)ta.call(f.makeEditable,{delegate:ca,gd:v}).call(t).on("edit",function(oa){w.text=oa;this.call(t);O("text",oa);x&&x.autorange&&J(x._name+".autorange",!0);E&&E.autorange&&J(E._name+".autorange",!0);e.call("_guiRelayout",v,Q())});else ta.call(t)}else l.selectAll("#"+U).remove()}var l=b("d3"),e=b("../../registry"),a=b("../../plots/plots"),g=b("../../lib"),k=b("../../plots/cartesian/axes"),p=b("../color"),
n=b("../drawing"),c=b("../fx"),f=b("../../lib/svg_text_utils"),d=b("../../lib/setcursor"),q=b("../dragelement"),r=b("../../plot_api/plot_template").arrayEditor,u=b("./draw_arrow_head");F.exports={draw:function(v){var w=v._fullLayout;w._infolayer.selectAll(".annotation").remove();for(var y=0;y<w.annotations.length;y++)w.annotations[y].visible&&m(v,y);return a.previousPromises(v)},drawOne:m,drawRaw:h}},{"../../lib":749,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,
"../../plots/cartesian/axes":797,"../../plots/plots":860,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"../fx":655,"./draw_arrow_head":605,d3:169}],605:[function(b,F,C){var m=b("d3"),h=b("../color"),l=b("./arrow_paths");F.exports=function(e,a,g){function k(){e.style("stroke-dasharray","0px,100px")}function p(G,I,L,M){G.path&&(G.noRotate&&(L=0),m.select(n.parentNode).append("path").attr({"class":e.attr("class"),d:G.path,transform:"translate("+I.x+","+I.y+")"+(L?"rotate("+
180*L/Math.PI+")":"")+"scale("+M+")"}).style({fill:h.rgb(g.arrowcolor),"stroke-width":0}))}var n=e.node(),c=l[g.arrowhead||0],f=l[g.startarrowhead||0],d=(g.arrowwidth||1)*(g.arrowsize||1),q=(g.arrowwidth||1)*(g.startarrowsize||1),r=0<=a.indexOf("start");a=0<=a.indexOf("end");var u=c.backoff*d+g.standoff,v=f.backoff*q+g.startstandoff;if("line"===n.nodeName){var w={x:+e.attr("x1"),y:+e.attr("y1")};var y={x:+e.attr("x2"),y:+e.attr("y2")};var D=w.x-y.x,x=w.y-y.y;var E=Math.atan2(x,D);var B=E+Math.PI;
if(u&&v&&u+v>Math.sqrt(D*D+x*x)){k();return}if(u){if(u*u>D*D+x*x){k();return}var t=u*Math.sin(E);y.x+=u*Math.cos(E);y.y+=t;e.attr({x2:y.x,y2:y.y})}if(v){if(v*v>D*D+x*x){k();return}u=v*Math.sin(E);w.x-=v*Math.cos(E);w.y-=u;e.attr({x1:w.x,y1:w.y})}}else if("path"===n.nodeName){D=n.getTotalLength();x="";if(D<u+v){k();return}w=n.getPointAtLength(0);E=n.getPointAtLength(.1);E=Math.atan2(w.y-E.y,w.x-E.x);w=n.getPointAtLength(Math.min(v,D));x="0px,"+v+"px,";y=n.getPointAtLength(D);B=n.getPointAtLength(D-
.1);B=Math.atan2(y.y-B.y,y.x-B.x);y=n.getPointAtLength(Math.max(0,D-u));e.style("stroke-dasharray",x+(D-(x?v+u:u)+"px,"+D+"px"))}r&&p(f,w,E,q);a&&p(c,y,B,d)}},{"../color":615,"./arrow_paths":597,d3:169}],606:[function(b,F,C){C=b("./draw");var m=b("./click");F.exports={moduleType:"component",name:"annotations",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("annotations"),calcAutorange:b("./calc_autorange"),draw:C.draw,
drawOne:C.drawOne,drawRaw:C.drawRaw,hasClickToShow:m.hasClickToShow,onClick:m.onClick,convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":809,"./attributes":598,"./calc_autorange":599,"./click":600,"./convert_coords":602,"./defaults":603,"./draw":604}],607:[function(b,F,C){C=b("../annotations/attributes");var m=b("../../plot_api/edit_types").overrideAll;b=b("../../plot_api/plot_template").templatedArray;F.exports=m(b("annotation",{visible:C.visible,x:{valType:"any"},
y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:C.xanchor,xshift:C.xshift,yanchor:C.yanchor,yshift:C.yshift,text:C.text,textangle:C.textangle,font:C.font,width:C.width,height:C.height,opacity:C.opacity,align:C.align,valign:C.valign,bgcolor:C.bgcolor,bordercolor:C.bordercolor,borderpad:C.borderpad,borderwidth:C.borderwidth,showarrow:C.showarrow,arrowcolor:C.arrowcolor,arrowhead:C.arrowhead,startarrowhead:C.startarrowhead,arrowside:C.arrowside,arrowsize:C.arrowsize,
startarrowsize:C.startarrowsize,arrowwidth:C.arrowwidth,standoff:C.standoff,startstandoff:C.startstandoff,hovertext:C.hovertext,hoverlabel:C.hoverlabel,captureevents:C.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../annotations/attributes":598}],608:[function(b,F,C){function m(e,a){var g=a.fullSceneLayout.domain,k=a.fullLayout._size;a={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};e._xa={};h.extendFlat(e._xa,a);l.setConvert(e._xa);
e._xa._offset=k.l+g.x[0]*k.w;e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*k.w*(g.x[1]-g.x[0])};e._ya={};h.extendFlat(e._ya,a);l.setConvert(e._ya);e._ya._offset=k.t+(1-g.y[1])*k.h;e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*k.h*(g.y[1]-g.y[0])}}var h=b("../../lib"),l=b("../../plots/cartesian/axes");F.exports=function(e){for(var a=e.fullSceneLayout.annotations,g=0;g<a.length;g++)m(a[g],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()}},{"../../lib":749,"../../plots/cartesian/axes":797}],
609:[function(b,F,C){function m(k,p,n,c){function f(q,r){return h.coerce(k,p,g,q,r)}function d(q){var r=q+"axis",u={_fullLayout:{}};u._fullLayout[r]=n[r];return l.coercePosition(p,u,f,q,q,.5)}f("visible")&&(a(k,p,c.fullLayout,f),d("x"),d("y"),d("z"),h.noneOrAll(k,p,["x","y","z"]),p.xref="x",p.yref="y",p.zref="z",f("xanchor"),f("yanchor"),f("xshift"),f("yshift"),p.showarrow&&(p.axref="pixel",p.ayref="pixel",f("ax",-10),f("ay",-30),h.noneOrAll(k,p,["ax","ay"])))}var h=b("../../lib"),l=b("../../plots/cartesian/axes"),
e=b("../../plots/array_container_defaults"),a=b("../annotations/common_defaults"),g=b("./attributes");F.exports=function(k,p,n){e(k,p,{name:"annotations",handleItemDefaults:m,fullLayout:n.fullLayout})}},{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"../annotations/common_defaults":601,"./attributes":607}],610:[function(b,F,C){var m=b("../annotations/draw").drawRaw,h=b("../../plots/gl3d/project"),l=["x","y","z"];F.exports=function(e){for(var a=e.fullSceneLayout,
g=e.dataScale,k=a.annotations,p=0;p<k.length;p++){for(var n=k[p],c=!1,f=0;3>f;f++){var d=l[f];d=a[d+"axis"].r2fraction(n[d]);if(0>d||1<d){c=!0;break}}c?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index\x3d"'+p+'"]').remove():(n._pdata=h(e.glplot.cameraParams,[a.xaxis.r2l(n.x)*g[0],a.yaxis.r2l(n.y)*g[1],a.zaxis.r2l(n.z)*g[2]]),m(e.graphDiv,n,p,e.id,n._xa,n._ya))}}},{"../../plots/gl3d/project":848,"../annotations/draw":604}],611:[function(b,F,C){var m=b("../../registry"),h=b("../../lib");
F.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),includeBasePlot:function(l,e){var a=m.subplotsRegistry.gl3d;if(a)for(var g=a.attrRegex,k=Object.keys(l),p=0;p<k.length;p++){var n=k[p];g.test(n)&&(l[n].annotations||[]).length&&(h.pushUnique(e._basePlotModules,a),h.pushUnique(e._subplots.gl3d,n))}},convert:b("./convert"),draw:b("./draw")}},{"../../lib":749,"../../registry":880,
"./attributes":607,"./convert":608,"./defaults":609,"./draw":610}],612:[function(b,F,C){F.exports=b("world-calendars/dist/main");b("world-calendars/dist/plus");b("world-calendars/dist/calendars/chinese");b("world-calendars/dist/calendars/coptic");b("world-calendars/dist/calendars/discworld");b("world-calendars/dist/calendars/ethiopian");b("world-calendars/dist/calendars/hebrew");b("world-calendars/dist/calendars/islamic");b("world-calendars/dist/calendars/julian");b("world-calendars/dist/calendars/mayan");
b("world-calendars/dist/calendars/nanakshahi");b("world-calendars/dist/calendars/nepali");b("world-calendars/dist/calendars/persian");b("world-calendars/dist/calendars/taiwan");b("world-calendars/dist/calendars/thai");b("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":579,"world-calendars/dist/calendars/coptic":580,"world-calendars/dist/calendars/discworld":581,"world-calendars/dist/calendars/ethiopian":582,"world-calendars/dist/calendars/hebrew":583,"world-calendars/dist/calendars/islamic":584,
"world-calendars/dist/calendars/julian":585,"world-calendars/dist/calendars/mayan":586,"world-calendars/dist/calendars/nanakshahi":587,"world-calendars/dist/calendars/nepali":588,"world-calendars/dist/calendars/persian":589,"world-calendars/dist/calendars/taiwan":590,"world-calendars/dist/calendars/thai":591,"world-calendars/dist/calendars/ummalqura":592,"world-calendars/dist/main":593,"world-calendars/dist/plus":594}],613:[function(b,F,C){function m(r){var u=f[r];return u?u:u=f[r]=e.instance(r)}
function h(r){return a.extendFlat({},p,{description:r})}function l(r){return"Sets the calendar system to use with `"+r+"` date data."}var e=b("./calendars"),a=b("../../lib");b=b("../../constants/numerical");var g=b.EPOCHJD,k=b.ONEDAY,p={valType:"enumerated",values:Object.keys(e.calendars),editType:"calc",dflt:"gregorian"},n=function(r,u,v,w){var y={};y[v]=p;return a.coerce(r,u,y,v,w)},c={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},
m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},f={};b={xcalendar:h(l("x"))};C=a.extendFlat({},b,{ycalendar:h(l("y"))});var d=a.extendFlat({},C,{zcalendar:h(l("z"))}),q=h("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
F.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:C,bar:C,box:C,heatmap:C,contour:C,histogram:C,histogram2d:C,histogram2dcontour:C,scatter3d:d,surface:d,mesh3d:d,scattergl:C,ohlc:b,candlestick:b},layout:{calendar:h("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:q},yaxis:{calendar:q},scene:{xaxis:{calendar:q},yaxis:{calendar:q},zaxis:{calendar:q}},polar:{radialaxis:{calendar:q}}},transforms:{filter:{valuecalendar:h("Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:h("Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:p,handleDefaults:n,handleTraceDefaults:function(r,u,v,w){for(var y=0;y<v.length;y++)n(r,u,v[y]+"calendar",w.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",
islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",
ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],
thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:m,worldCalFmt:function(r,u,v){u=Math.floor((u+.05)/k)+g;v=m(v).fromJD(u);u=0;for(var w,y,D;-1!==(u=r.indexOf("%",u));)w=r.charAt(u+1),"0"===w||"-"===w||"_"===w?(D=3,y=r.charAt(u+2),"_"===w&&(w="-")):(y=w,w="0",D=2),(y=c[y])?(w="##"===y?"##":v.formatDate(y[w]),r=r.substr(0,u)+w+r.substr(u+D),u+=w.length):u+=D;return r}}},{"../../constants/numerical":724,"../../lib":749,"./calendars":612}],614:[function(b,F,C){C.defaults=
"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");C.defaultLine="#444";C.lightLine="#eee";C.background="#fff";C.borderLine="#BEC8D9";C.lightFraction=1E3/11},{}],615:[function(b,F,C){function m(k){if(l(k)||"string"!==typeof k)return k;var p=k.trim();if("rgb"!==p.substr(0,3))return k;var n=p.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return k;n=n[1].trim().split(/\s*[\s,]\s*/);p="a"===p.charAt(3)&&4===n.length;if(!p&&3!==n.length)return k;for(var c=0;c<n.length;c++){if(!n[c].length)return k;
n[c]=Number(n[c]);if(!(0<=n[c]))return k;if(3===c)1<n[c]&&(n[c]=1);else if(1<=n[c])return k}k=Math.round(255*n[0])+", "+Math.round(255*n[1])+", "+Math.round(255*n[2]);return p?"rgba("+k+", "+n[3]+")":"rgb("+k+")"}var h=b("tinycolor2"),l=b("fast-isnumeric"),e=F.exports={};b=b("./attributes");e.defaults=b.defaults;var a=e.defaultLine=b.defaultLine;e.lightLine=b.lightLine;var g=e.background=b.background;e.tinyRGB=function(k){k=k.toRgb();return"rgb("+Math.round(k.r)+", "+Math.round(k.g)+", "+Math.round(k.b)+
")"};e.rgb=function(k){return e.tinyRGB(h(k))};e.opacity=function(k){return k?h(k).getAlpha():0};e.addOpacity=function(k,p){k=h(k).toRgb();return"rgba("+Math.round(k.r)+", "+Math.round(k.g)+", "+Math.round(k.b)+", "+p+")"};e.combine=function(k,p){var n=h(k).toRgb();if(1===n.a)return h(k).toRgbString();k=h(p||g).toRgb();k=1===k.a?k:{r:255*(1-k.a)+k.r*k.a,g:255*(1-k.a)+k.g*k.a,b:255*(1-k.a)+k.b*k.a};return h({r:k.r*(1-n.a)+n.r*n.a,g:k.g*(1-n.a)+n.g*n.a,b:k.b*(1-n.a)+n.b*n.a}).toRgbString()};e.contrast=
function(k,p,n){var c=h(k);1!==c.getAlpha()&&(c=h(e.combine(k,g)));return(c.isDark()?p?c.lighten(p):g:n?c.darken(n):a).toString()};e.stroke=function(k,p){p=h(p);k.style({stroke:e.tinyRGB(p),"stroke-opacity":p.getAlpha()})};e.fill=function(k,p){p=h(p);k.style({fill:e.tinyRGB(p),"fill-opacity":p.getAlpha()})};e.clean=function(k){if(k&&"object"===typeof k){var p=Object.keys(k),n;for(n=0;n<p.length;n++){var c=p[n];var f=k[c];if("color"===c.substr(c.length-5))if(Array.isArray(f))for(c=0;c<f.length;c++)f[c]=
m(f[c]);else k[c]=m(f);else if("colorscale"===c.substr(c.length-10)&&Array.isArray(f))for(c=0;c<f.length;c++)Array.isArray(f[c])&&(f[c][1]=m(f[c][1]));else if(Array.isArray(f)){if(c=f[0],!Array.isArray(c)&&c&&"object"===typeof c)for(c=0;c<f.length;c++)e.clean(f[c])}else f&&"object"===typeof f&&e.clean(f)}}}},{"./attributes":614,"fast-isnumeric":241,tinycolor2:548}],616:[function(b,F,C){C=b("../../plots/cartesian/layout_attributes");var m=b("../../plots/font_attributes"),h=b("../../lib/extend").extendFlat;
b=b("../../plot_api/edit_types").overrideAll;F.exports=b({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:C.linecolor,outlinewidth:C.linewidth,bordercolor:C.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:C.tickmode,nticks:C.nticks,tick0:C.tick0,dtick:C.dtick,tickvals:C.tickvals,ticktext:C.ticktext,ticks:h({},C.ticks,{dflt:""}),ticklen:C.ticklen,tickwidth:C.tickwidth,tickcolor:C.tickcolor,showticklabels:C.showticklabels,tickfont:m({}),tickangle:C.tickangle,
tickformat:C.tickformat,tickformatstops:C.tickformatstops,tickprefix:C.tickprefix,showtickprefix:C.showtickprefix,ticksuffix:C.ticksuffix,showticksuffix:C.showticksuffix,separatethousands:C.separatethousands,exponentformat:C.exponentformat,showexponent:C.showexponent,title:{text:{valType:"string"},font:m({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:m({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},
"colorbars","from-root")},{"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/cartesian/layout_attributes":811,"../../plots/font_attributes":825}],617:[function(b,F,C){F.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],618:[function(b,F,C){var m=b("../../lib"),h=b("../../plot_api/plot_template"),
l=b("../../plots/cartesian/tick_value_defaults"),e=b("../../plots/cartesian/tick_mark_defaults"),a=b("../../plots/cartesian/tick_label_defaults"),g=b("./attributes");F.exports=function(k,p,n){function c(q,r){return m.coerce(d,f,g,q,r)}var f=h.newContainer(p,"colorbar"),d=k.colorbar||{};k=c("thicknessmode");c("thickness","fraction"===k?30/(n.width-n.margin.l-n.margin.r):30);k=c("lenmode");c("len","fraction"===k?1:n.height-n.margin.t-n.margin.b);c("x");c("xanchor");c("xpad");c("y");c("yanchor");c("ypad");
m.noneOrAll(d,f,["x","y"]);c("outlinecolor");c("outlinewidth");c("bordercolor");c("borderwidth");c("bgcolor");l(d,f,c,"linear");k={outerTicks:!1,font:n.font};a(d,f,c,"linear",k);e(d,f,c,"linear",k);c("title.text",n._dfltTitle.colorbar);m.coerceFont(c,"title.font",n.font);c("title.side")}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_mark_defaults":819,"../../plots/cartesian/tick_value_defaults":820,"./attributes":616}],
619:[function(b,F,C){function m(M){function N(na){return q(na,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function H(){"function"===typeof Y.calc?Y.calc(M,V,U):(U._fillgradient=P.reversescale?D(P.colorscale):P.colorscale,U._zrange=[P[Y.min],P[Y.max]])}for(var J=M._fullLayout,O=M.calcdata,Q=[],U,P,V,Y,ba=0;ba<O.length;ba++){V=O[ba][0].trace;var ea=V._module.colorbar;if(!0===V.visible&&ea){var ca=
Array.isArray(ea);ea=ca?ea:[ea];for(var ia=0;ia<ea.length;ia++){Y=ea[ia];var fa=Y.container;(P=fa?V[fa]:V)&&P.showscale&&(U=N(P.colorbar),U._id="cb"+V.uid+(ca&&fa?"-"+fa:""),U._traceIndex=V.index,U._propPrefix=(fa?fa+".":"")+"colorbar.",U._meta=V._meta,H(),Q.push(U))}}}for(var ha in J._colorAxes)P=J[ha],P.showscale&&(O=J._colorAxes[ha],U=N(P.colorbar),U._id="cb"+ha,U._propPrefix=ha+".colorbar.",U._meta=J._meta,Y={min:"cmin",max:"cmax"},"heatmap"!==O[0]&&(V=O[1],Y.calc=V._module.colorbar.calc),H(),
Q.push(U));return Q}function h(M,N,H){function J(Ia,Qa){var lb={propContainer:Ja,propName:N._propPrefix+"title",traceIndex:N._traceIndex,_meta:N._meta,placeholder:O._dfltTitle.colorbar,containerGroup:M.select("."+L.cbtitle)},hb="h"===Ia.charAt(0)?Ia.substr(1):"h"+Ia;M.selectAll("."+hb+",."+hb+"-math-group").remove();w.draw(H,Ia,q(lb,Qa||{}))}var O=H._fullLayout,Q=O._size,U=N._fillcolor,P=N._line,V=N.title,Y=V.side,ba=N._zrange||g.extent(("function"===typeof U?U:P.color).domain()),ea="function"===
typeof P.color?P.color:function(){return P.color},ca="function"===typeof U?U:function(){return U},ia=N._levels,fa=e(H,N,ba),ha=fa.fill,na=fa.line,pa=Math.round(N.thickness*("fraction"===N.thicknessmode?Q.w:1));fa=pa/Q.w;var ra=Math.round(N.len*("fraction"===N.lenmode?Q.h:1)),ta=ra/Q.h,oa=N.xpad/Q.w,ua=(N.borderwidth+N.outlinewidth)/2,ka=N.ypad/Q.h,sa=Math.round(N.x*Q.w+N.xpad),ya=N.x-fa*({middle:.5,right:1}[N.xanchor]||0),qa=N.y+ta*(({top:-.5,bottom:.5}[N.yanchor]||0)-.5),xa=Math.round(Q.h*(1-qa)),
Ca=xa-ra;N._lenFrac=ta;N._thickFrac=fa;N._xLeftFrac=ya;N._yBottomFrac=qa;var Ja=N._axis=a(H,N,ba);Ja.position=N.x+oa+fa;-1!==["top","bottom"].indexOf(Y)&&(Ja.title.side=Y,Ja.titlex=N.x+oa,Ja.titley=qa+("top"===V.side?ta-ka:ka));P.color&&"auto"===N.tickmode&&(Ja.tickmode="linear",Ja.tick0=ia.start,V=ia.size,fa=d.constrain((xa-Ca)/50,4,15)+1,fa=(ba[1]-ba[0])/((N.nticks||fa)*V),1<fa&&(ra=Math.pow(10,Math.floor(Math.log(fa)/Math.LN10)),V*=ra*d.roundUp(fa/ra,[2,5,10]),2E-6>(Math.abs(ia.start)/ia.size+
1E-6)%1&&(Ja.tick0=0)),Ja.dtick=V);Ja.domain=[qa+ka,qa+ta-ka];Ja.setScale();M.attr("transform","translate("+Math.round(Q.l)+","+Math.round(Q.t)+")");var eb=M.select("."+L.cbtitleunshift).attr("transform","translate(-"+Math.round(Q.l)+",-"+Math.round(Q.t)+")"),Ra=M.select("."+L.cbaxis),Wa,Ea=0;return d.syncOrAsync([p.previousPromises,function(){if(-1!==["top","bottom"].indexOf(Y)){var Ia=Ja.title.font.size;J(Ja._id+"title",{attributes:{x:Q.l+(N.x+oa)*Q.w,y:"top"===Y?(1-(qa+ta-ka))*Q.h+Q.t+3+.75*Ia:
(1-(qa+ka))*Q.h+Q.t-3-.25*Ia,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(Y)){var Ia=M.select("."+L.cbtitle),Qa=Ia.select("text"),lb=[-N.outlinewidth/2,N.outlinewidth/2],hb=Ia.select(".h"+Ja._id+"title-math-group").node(),Fa=15.6;Qa.node()&&(Fa=parseInt(Qa.node().style.fontSize,10)*t);hb?(Ea=u.bBox(hb).height,Ea>Fa&&(lb[1]-=(Ea-Fa)/2)):Qa.node()&&!Qa.classed(L.jsPlaceholder)&&(Ea=u.bBox(Qa.node()).height);Ea&&(Ea+=5,"top"===Y?(Ja.domain[1]-=Ea/Q.h,lb[1]*=-1):(Ja.domain[0]+=
Ea/Q.h,Qa=y.lineCount(Qa),lb[1]+=(1-Qa)*Fa),Ia.attr("transform","translate("+lb+")"),Ja.setScale())}M.selectAll("."+L.cbfills+",."+L.cblines).attr("transform","translate(0,"+Math.round(Q.h*(1-Ja.domain[1]))+")");Ra.attr("transform","translate(0,"+Math.round(-Q.t)+")");Ia=M.select("."+L.cbfills).selectAll("rect."+L.cbfill).data(ha);Ia.enter().append("rect").classed(L.cbfill,!0).style("stroke","none");Ia.exit().remove();var La=ba.map(Ja.c2p).map(Math.round).sort(function(Oa,fb){return Oa-fb});Ia.each(function(Oa,
fb){fb=[0===fb?ba[0]:(ha[fb]+ha[fb-1])/2,fb===ha.length-1?ba[1]:(ha[fb]+ha[fb+1])/2].map(Ja.c2p).map(Math.round);fb[1]=d.constrain(fb[1]+(fb[1]>fb[0])?1:-1,La[0],La[1]);fb=g.select(this).attr({x:sa,width:Math.max(pa,2),y:g.min(fb),height:Math.max(g.max(fb)-g.min(fb),2)});N._fillgradient?u.gradient(fb,H,N._id,"vertical",N._fillgradient,"fill"):(Oa=ca(Oa).replace("e-",""),fb.attr("fill",k(Oa).toHexString()))});Ia=M.select("."+L.cblines).selectAll("path."+L.cbline).data(P.color&&P.width?na:[]);Ia.enter().append("path").classed(L.cbline,
!0);Ia.exit().remove();Ia.each(function(Oa){g.select(this).attr("d","M"+sa+","+(Math.round(Ja.c2p(Oa))+P.width/2%1)+"h"+pa).call(u.lineGroupStyle,P.width,ea(Oa),P.dash)});Ra.selectAll("g."+Ja._id+"tick,path").remove();Ia=sa+pa+(N.outlinewidth||0)/2-("outside"===N.ticks?1:0);lb=c.calcTicks(Ja);Fa=c.makeTransFn(Ja);Qa=c.getTickSigns(Ja)[2];c.drawTicks(H,Ja,{vals:"inside"===Ja.ticks?c.clipEnds(Ja,lb):lb,layer:Ra,path:c.makeTickPath(Ja,Ia,Qa),transFn:Fa});return c.drawLabels(H,Ja,{vals:lb,layer:Ra,transFn:Fa,
labelFns:c.makeLabelFns(Ja,Ia)})},function(){if(-1===["top","bottom"].indexOf(Y)){var Ia=Ja.title.font.size,Qa=Ja._offset+Ja._length/2;Ia=Q.l+(Ja.position||0)*Q.w+("right"===Ja.side?10+Ia*(Ja.showticklabels?1:.5):-10-Ia*(Ja.showticklabels?.5:0));J("h"+Ja._id+"title",{avoid:{selection:g.select(H).selectAll("g."+Ja._id+"tick"),side:Y,offsetLeft:Q.l,offsetTop:0,maxShift:O.width},attributes:{x:Ia,y:Qa,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},p.previousPromises,function(){var Ia=pa+
N.outlinewidth/2+u.bBox(Ra.node()).width;Wa=eb.select("text");if(Wa.node()&&!Wa.classed(L.jsPlaceholder)){var Qa=eb.select(".h"+Ja._id+"title-math-group").node();Qa=Qa&&-1!==["top","bottom"].indexOf(Y)?u.bBox(Qa).width:u.bBox(eb.node()).right-sa-Q.l;Ia=Math.max(Ia,Qa)}Qa=2*N.xpad+Ia+N.borderwidth+N.outlinewidth/2;var lb=xa-Ca;M.select("."+L.cbbg).attr({x:sa-N.xpad-(N.borderwidth+N.outlinewidth)/2,y:Ca-ua,width:Math.max(Qa,2),height:Math.max(lb+2*ua,2)}).call(v.fill,N.bgcolor).call(v.stroke,N.bordercolor).style("stroke-width",
N.borderwidth);M.selectAll("."+L.cboutline).attr({x:sa,y:Ca+N.ypad+("top"===Y?Ea:0),width:Math.max(pa,2),height:Math.max(lb-2*N.ypad-Ea,2)}).call(v.stroke,N.outlinecolor).style({fill:"none","stroke-width":N.outlinewidth});M.attr("transform","translate("+(Q.l-({center:.5,right:1}[N.xanchor]||0)*Qa)+","+Q.t+")");Ia={};var hb=G[N.yanchor],Fa=I[N.yanchor];"pixels"===N.lenmode?(Ia.y=N.y,Ia.t=lb*hb,Ia.b=lb*Fa):(Ia.t=Ia.b=0,Ia.yt=N.y+N.len*hb,Ia.yb=N.y-N.len*Fa);lb=G[N.xanchor];hb=I[N.xanchor];"pixels"===
N.thicknessmode?(Ia.x=N.x,Ia.l=Qa*lb,Ia.r=Qa*hb):(Qa-=pa,Ia.l=Qa*lb,Ia.r=Qa*hb,Ia.xl=N.x-N.thickness*lb,Ia.xr=N.x+N.thickness*hb);p.autoMargin(H,N._id,Ia)}],H)}function l(M,N,H){var J=H._fullLayout._size,O,Q,U;f.init({element:M.node(),gd:H,prepFn:function(){O=M.attr("transform");r(M)},moveFn:function(P,V){M.attr("transform",O+" translate("+P+","+V+")");Q=f.align(N._xLeftFrac+P/J.w,N._thickFrac,0,1,N.xanchor);U=f.align(N._yBottomFrac-V/J.h,N._lenFrac,0,1,N.yanchor);P=f.getCursor(Q,U,N.xanchor,N.yanchor);
r(M,P)},doneFn:function(){r(M);if(void 0!==Q&&void 0!==U){var P={};P[N._propPrefix+"x"]=Q;P[N._propPrefix+"y"]=U;void 0!==N._traceIndex?n.call("_guiRestyle",H,P,N._traceIndex):n.call("_guiRelayout",H,P)}}})}function e(M,N,H){var J=N._levels;M=[];var O=[],Q,U=J.end+J.size/100,P=J.size,V=1.001*H[0]-.001*H[1],Y=1.001*H[1]-.001*H[0];for(Q=0;1E5>Q;Q++){var ba=J.start+Q*P;if(0<P?ba>=U:ba<=U)break;ba>V&&ba<Y&&M.push(ba)}if(N._fillgradient)O=[0];else if("function"===typeof N._fillcolor)if(N=N._filllevels)for(U=
N.end+N.size/100,P=N.size,Q=0;1E5>Q;Q++){ba=N.start+Q*P;if(0<P?ba>=U:ba<=U)break;ba>H[0]&&ba<H[1]&&O.push(ba)}else O=M.map(function(ea){return ea-J.size/2}),O.push(O[O.length-1]+J.size);else N._fillcolor&&"string"===typeof N._fillcolor&&(O=[0]);0>J.size&&(M.reverse(),O.reverse());return{line:M,fill:O}}function a(M,N,H){function J(U,P){return d.coerce(O,Q,B,U,P)}M=M._fullLayout;var O={type:"linear",range:H,tickmode:N.tickmode,nticks:N.nticks,tick0:N.tick0,dtick:N.dtick,tickvals:N.tickvals,ticktext:N.ticktext,
ticks:N.ticks,ticklen:N.ticklen,tickwidth:N.tickwidth,tickcolor:N.tickcolor,showticklabels:N.showticklabels,tickfont:N.tickfont,tickangle:N.tickangle,tickformat:N.tickformat,exponentformat:N.exponentformat,separatethousands:N.separatethousands,showexponent:N.showexponent,showtickprefix:N.showtickprefix,tickprefix:N.tickprefix,showticksuffix:N.showticksuffix,ticksuffix:N.ticksuffix,title:N.title,showline:!0,anchor:"free",side:"right",position:1},Q={type:"linear",_id:"y"+N._id};N={letter:"y",font:M.font,
noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:M.calendar};x(O,Q,J,N,M);E(O,Q,J,N);return Q}var g=b("d3"),k=b("tinycolor2"),p=b("../../plots/plots"),n=b("../../registry"),c=b("../../plots/cartesian/axes"),f=b("../dragelement"),d=b("../../lib"),q=b("../../lib/extend").extendFlat,r=b("../../lib/setcursor"),u=b("../drawing"),v=b("../color"),w=b("../titles"),y=b("../../lib/svg_text_utils"),D=b("../colorscale/helpers").flipScale,x=b("../../plots/cartesian/axis_defaults"),E=b("../../plots/cartesian/position_defaults"),
B=b("../../plots/cartesian/layout_attributes");C=b("../../constants/alignment");var t=C.LINE_SPACING,G=C.FROM_TL,I=C.FROM_BR,L=b("./constants").cn;F.exports={draw:function(M){var N=M._fullLayout._infolayer.selectAll("g."+L.colorbar).data(m(M),function(H){return H._id});N.enter().append("g").attr("class",function(H){return H._id}).classed(L.colorbar,!0);N.each(function(H){var J=g.select(this);d.ensureSingle(J,"rect",L.cbbg);d.ensureSingle(J,"g",L.cbfills);d.ensureSingle(J,"g",L.cblines);d.ensureSingle(J,
"g",L.cbaxis,function(Q){Q.classed(L.crisp,!0)});d.ensureSingle(J,"g",L.cbtitleunshift,function(Q){Q.append("g").classed(L.cbtitle,!0)});d.ensureSingle(J,"rect",L.cboutline);var O=h(J,H,M);O&&O.then&&(M._promises||[]).push(O);M._context.edits.colorbarPosition&&l(J,H,M)});N.exit().each(function(H){p.autoMargin(M,H._id)}).remove();N.order()}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/extend":739,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,
"../../plots/cartesian/axis_defaults":799,"../../plots/cartesian/layout_attributes":811,"../../plots/cartesian/position_defaults":814,"../../plots/plots":860,"../../registry":880,"../color":615,"../colorscale/helpers":626,"../dragelement":634,"../drawing":637,"../titles":710,"./constants":617,d3:169,tinycolor2:548}],620:[function(b,F,C){var m=b("../../lib");F.exports=function(h){return m.isPlainObject(h.colorbar)}},{"../../lib":749}],621:[function(b,F,C){F.exports={moduleType:"component",name:"colorbar",
attributes:b("./attributes"),supplyDefaults:b("./defaults"),draw:b("./draw").draw,hasColorbar:b("./has_colorbar")}},{"./attributes":616,"./defaults":618,"./draw":619,"./has_colorbar":620}],622:[function(b,F,C){var m=b("../colorbar/attributes"),h=b("../../lib/regex").counter,l=b("./scales.js").scales;Object.keys(l);F.exports=function(e,a){a=a||{};var g=a.cLetter||"c";e="noScale"in a?a.noScale:"marker.line"===(e||"");var k="showScaleDflt"in a?a.showScaleDflt:"z"===g,p="string"===typeof a.colorscaleDflt?
l[a.colorscaleDflt]:null,n=a.editTypeOverride||"";var c="colorAttr"in a?a.colorAttr:{z:"z",c:"color"}[g];var f=g+"auto",d=g+"min",q=g+"max",r={};r[d]=r[q]=void 0;var u={};u[f]=!1;var v={};"color"===c&&(v.color={valType:"color",arrayOk:!0,editType:n||"style"},a.anim&&(v.color.anim=!0));v[f]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:r};v[d]={valType:"number",dflt:null,editType:n||"plot",impliedEdits:u};v[q]={valType:"number",dflt:null,editType:n||"plot",impliedEdits:u};v[g+"mid"]={valType:"number",
dflt:null,editType:"calc",impliedEdits:r};v.colorscale={valType:"colorscale",editType:"calc",dflt:p,impliedEdits:{autocolorscale:!1}};v.autocolorscale={valType:"boolean",dflt:!1===a.autoColorDflt?!1:!0,editType:"calc",impliedEdits:{colorscale:void 0}};v.reversescale={valType:"boolean",dflt:!1,editType:"plot"};e||(v.showscale={valType:"boolean",dflt:k,editType:"calc"},v.colorbar=m);a.noColorAxis||(v.coloraxis={valType:"subplotid",regex:h("coloraxis"),dflt:null,editType:"calc"});return v}},{"../../lib/regex":765,
"../colorbar/attributes":616,"./scales.js":630}],623:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../../lib"),l=b("./helpers").extractOpts;F.exports=function(e,a,g){e=e._fullLayout;var k=g.vals;a=(g=g.containerStr)?h.nestedProperty(a,g).get():a;g=l(a);var p=!1!==g.auto,n=g.min,c=g.max,f=g.mid;void 0===n?n=h.aggNums(Math.min,null,k):p&&(n=a._colorAx&&m(n)?Math.min(n,h.aggNums(Math.min,null,k)):h.aggNums(Math.min,null,k));void 0===c?c=h.aggNums(Math.max,null,k):p&&(c=a._colorAx&&m(c)?Math.max(c,
h.aggNums(Math.max,null,k)):h.aggNums(Math.max,null,k));p&&void 0!==f&&(c-f>f-n?n=f-(c-f):c-f<f-n&&(c=f+(f-n)));n===c&&(n-=.5,c+=.5);g._sync("min",n);g._sync("max",c);g.autocolorscale&&g._sync("colorscale",0>n*c?e.colorscale.diverging:0<=n?e.colorscale.sequential:e.colorscale.sequentialminus)}},{"../../lib":749,"./helpers":626,"fast-isnumeric":241}],624:[function(b,F,C){var m=b("../../lib"),h=b("./helpers").hasColorscale,l=b("./helpers").extractOpts;F.exports=function(e,a){function g(q,r){var u=q["_"+
r];void 0!==u&&(q[r]=u)}function k(q,r){if(q=r.container?m.nestedProperty(q,r.container).get():q)if(q.coloraxis)q._colorAx=a[q.coloraxis];else{var u=l(q),v=u.auto;(v||void 0===u.min)&&g(q,r.min);(v||void 0===u.max)&&g(q,r.max);u.autocolorscale&&g(q,"colorscale")}}for(var p=0;p<e.length;p++){var n=e[p],c=n._module.colorbar;if(c)if(Array.isArray(c))for(var f=0;f<c.length;f++)k(n,c[f]);else k(n,c);h(n,"marker.line")&&k(n,{container:"marker.line",min:"cmin",max:"cmax"})}for(var d in a._colorAxes)k(a[d],
{min:"cmin",max:"cmax"})}},{"../../lib":749,"./helpers":626}],625:[function(b,F,C){function m(p,n){var c=n.slice(0,n.length-1);return n?l.nestedProperty(p,c).get()||{}:p}var h=b("fast-isnumeric"),l=b("../../lib"),e=b("../colorbar/has_colorbar"),a=b("../colorbar/defaults"),g=b("./scales").isValid,k=b("../../registry").traceIs;F.exports=function r(n,c,f,d,q){var u=q.prefix,v=q.cLetter,w="_module"in c,y=m(n,u),D=m(c,u),x=m(c._template||{},u)||{},E=function(){delete n.coloraxis;delete c.coloraxis;return r(n,
c,f,d,q)};if(w){var B=f._colorAxes||{},t=d(u+"coloraxis");if(t){u=k(c,"contour")&&l.nestedProperty(c,"contours.coloring").get()||"heatmap";(w=B[t])?(w[2].push(E),w[0]!==u&&(w[0]=!1,l.warn(["Ignoring coloraxis:",t,"setting as it is linked to incompatible colorscales."].join(" ")))):B[t]=[u,c,[E]];return}}E=y[v+"min"];B=y[v+"max"];E=h(E)&&h(B)&&E<B;d(u+v+"auto",!E)?d(u+v+"mid"):(d(u+v+"min"),d(u+v+"max"));v=y.colorscale;E=x.colorscale;var G;void 0!==v&&(G=!g(v));void 0!==E&&(G=!g(E));d(u+"autocolorscale",
G);d(u+"colorscale");d(u+"reversescale");if("marker.line."!==u){var I;u&&w&&(I=e(y));d(u+"showscale",I)&&(u&&x&&(D._template=x),a(y,D,f))}}},{"../../lib":749,"../../registry":880,"../colorbar/defaults":618,"../colorbar/has_colorbar":620,"./scales":630,"fast-isnumeric":241}],626:[function(b,F,C){function m(r){var u=r._colorAx,v=u?u:r;r={};var w;for(w=0;w<d.length;w++){var y=d[w];r[y]=v[y]}if(u){var D="c";for(w=0;w<q.length;w++)y=q[w],r[y]=v["c"+y]}else{for(w=0;w<q.length;w++){y=q[w];var x="c"+y;x in
v?r[y]=v[x]:(x="z"+y,x in v&&(r[y]=v[x]))}D=x.charAt(0)}r._sync=function(E,B){E=-1!==q.indexOf(E)?D+E:E;v[E]=v["_"+E]=B};return r}function h(r){var u=m(r);r=u.min;var v=u.max;u=u.reversescale?l(u.colorscale):u.colorscale;for(var w=u.length,y=Array(w),D=Array(w),x=0;x<w;x++){var E=u[x];y[x]=r+E[0]*(v-r);D[x]=E[1]}return{domain:y,range:D}}function l(r){var u=r.length,v=Array(u);--u;for(var w=0;0<=u;u--,w++){var y=r[u];v[w]=[1-y[0],y[1]]}return v}function e(r,u){u=u||{};var v=r.domain,w=r.range;r=w.length;
for(var y=Array(r),D=0;D<r;D++){var x=k(w[D]).toRgb();y[D]=[x.r,x.g,x.b,x.a]}var E=g.scale.linear().domain(v).range(y).clamp(!0);v=u.noNumericCheck;u=u.returnArray;u=v&&u?E:v?function(B){return a(E(B))}:u?function(B){return p(B)?E(B):k(B).isValid()?B:c.defaultLine}:function(B){return p(B)?a(E(B)):k(B).isValid()?B:c.defaultLine};u.domain=E.domain;u.range=function(){return w};return u}function a(r){return k({r:r[0],g:r[1],b:r[2],a:r[3]}).toRgbString()}var g=b("d3"),k=b("tinycolor2"),p=b("fast-isnumeric"),
n=b("../../lib"),c=b("../color"),f=b("./scales").isValid,d=["showscale","autocolorscale","colorscale","reversescale","colorbar"],q=["min","max","mid","auto"];F.exports={hasColorscale:function(r,u,v){r=u?n.nestedProperty(r,u).get()||{}:r;v=r[v||"color"];u=!1;if(n.isArrayOrTypedArray(v))for(var w=0;w<v.length;w++)if(p(v[w])){u=!0;break}return n.isPlainObject(r)&&(u||!0===r.showscale||p(r.cmin)&&p(r.cmax)||f(r.colorscale)||n.isPlainObject(r.colorbar))},extractOpts:m,extractScale:h,flipScale:l,makeColorScaleFunc:e,
makeColorScaleFuncFromTrace:function(r,u){return e(h(r),u)}}},{"../../lib":749,"../color":615,"./scales":630,d3:169,"fast-isnumeric":241,tinycolor2:548}],627:[function(b,F,C){C=b("./scales");var m=b("./helpers");F.exports={moduleType:"component",name:"colorscale",attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),handleDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc"),scales:C.scales,defaultScale:C.defaultScale,
getScale:C.get,isValidScale:C.isValid,hasColorscale:m.hasColorscale,extractOpts:m.extractOpts,extractScale:m.extractScale,flipScale:m.flipScale,makeColorScaleFunc:m.makeColorScaleFunc,makeColorScaleFuncFromTrace:m.makeColorScaleFuncFromTrace}},{"./attributes":622,"./calc":623,"./cross_trace_defaults":624,"./defaults":625,"./helpers":626,"./layout_attributes":628,"./layout_defaults":629,"./scales":630}],628:[function(b,F,C){C=b("../../lib/extend").extendFlat;var m=b("./attributes");b=b("./scales").scales;
F.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:C({_isSubplotObj:!0,editType:"calc"},m("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":739,"./attributes":622,"./scales":630}],629:[function(b,F,C){var m=b("../../lib"),h=b("../../plot_api/plot_template"),
l=b("./layout_attributes"),e=b("./defaults");F.exports=function(a,g){function k(r,u){return m.coerce(f,d,l.coloraxis,r,u)}m.coerce(a,g,l,"colorscale.sequential",void 0);m.coerce(a,g,l,"colorscale.sequentialminus",void 0);m.coerce(a,g,l,"colorscale.diverging",void 0);var p=g._colorAxes,n;for(n in p){var c=p[n];if(c[0]){var f=a[n]||{};var d=h.newContainer(g,n,"coloraxis");d._name=n;e(f,d,g,k,{prefix:"",cLetter:"c"})}else{for(var q=0;q<c[2].length;q++)c[2][q]();delete g._colorAxes[n]}}}},{"../../lib":749,
"../../plot_api/plot_template":787,"./defaults":625,"./layout_attributes":628}],630:[function(b,F,C){function m(a){var g=0;if(!Array.isArray(a)||2>a.length||!a[0]||!a[a.length-1]||0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var k=0;k<a.length;k++){var p=a[k];if(2!==p.length||+p[0]<g||!h(p[1]).isValid())return!1;g=+p[0]}return!0}var h=b("tinycolor2"),l={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],
[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],
[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],
[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],
[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],
[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],
[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,
"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},e=l.RdBu;F.exports={scales:l,defaultScale:e,get:function(a,g){function k(){try{a=l[a]||JSON.parse(a)}catch(p){a=g}}g||(g=e);if(!a)return g;"string"===typeof a&&(k(),"string"===typeof a&&k());return m(a)?a:g},isValid:function(a){return void 0!==l[a]?!0:m(a)}}},{tinycolor2:548}],631:[function(b,F,C){F.exports=function(m,h,l,e,a){m=(m-l)/(e-l);
h=m+h/(e-l);l=(m+h)/2;return"left"===a||"bottom"===a?m:"center"===a||"middle"===a?l:"right"===a||"top"===a?h:m<2/3-l?m:h>4/3-l?h:l}},{}],632:[function(b,F,C){var m=b("../../lib"),h=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];F.exports=function(l,e,a,g){l="left"===a?0:"center"===a?1:"right"===a?2:m.constrain(Math.floor(3*l),0,2);e="bottom"===g?0:"middle"===g?1:"top"===g?2:m.constrain(Math.floor(3*e),0,2);return h[e][l]}},{"../../lib":749}],
633:[function(b,F,C){C.selectMode=function(m){return"lasso"===m||"select"===m};C.drawMode=function(m){return"drawclosedpath"===m||"drawopenpath"===m||"drawline"===m||"drawrect"===m||"drawcircle"===m};C.openMode=function(m){return"drawline"===m||"drawopenpath"===m};C.rectMode=function(m){return"select"===m||"drawline"===m||"drawrect"===m||"drawcircle"===m};C.freeMode=function(m){return"lasso"===m||"drawclosedpath"===m||"drawopenpath"===m};C.selectingOrDrawing=function(m){return C.freeMode(m)||C.rectMode(m)}},
{}],634:[function(b,F,C){function m(){var n=document.createElement("div");n.className="dragcover";var c=n.style;c.position="fixed";c.left=0;c.right=0;c.top=0;c.bottom=0;c.zIndex=999999999;c.background="none";document.body.appendChild(n);return n}function h(n){return l(n.changedTouches?n.changedTouches[0]:n,document.body)}var l=b("mouse-event-offset"),e=b("has-hover"),a=b("has-passive-events"),g=b("../../lib").removeElement,k=b("../../plots/cartesian/constants"),p=F.exports={};p.align=b("./align");
p.getCursor=b("./cursor");b=b("./unhover");p.unhover=b.wrapped;p.unhoverRaw=b.raw;p.init=function(n){function c(M,N,H){Math.abs(M)<H&&(M=0);Math.abs(N)<H&&(N=0);return[M,N]}function f(M){r._dragged=!1;r._dragging=!0;var N=h(M);y=N[0];D=N[1];G=M.target;t=M;I=2===M.buttons||M.ctrlKey;"undefined"===typeof M.clientX&&"undefined"===typeof M.clientY&&(M.clientX=y,M.clientY=D);x=(new Date).getTime();x-r._mouseDownTime<v?u+=1:(u=1,r._mouseDownTime=x);n.prepFn&&n.prepFn(M,y,D);e&&!I?(B=m(),B.style.cursor=
window.getComputedStyle(w).cursor):e||(B=document,E=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(w).cursor);document.addEventListener("mouseup",q);document.addEventListener("touchend",q);!1!==n.dragmode&&(M.preventDefault(),document.addEventListener("mousemove",d),document.addEventListener("touchmove",d,{passive:!1}))}function d(M){M.preventDefault();M=h(M);var N=L(M[0]-y,M[1]-D,n.minDrag||k.MINDRAG);M=N[0];N=N[1];if(M||N)r._dragged=
!0,p.unhover(r);r._dragged&&n.moveFn&&!I&&(r._dragdata={element:w,dx:M,dy:N},n.moveFn(M,N))}function q(M){delete r._dragdata;!1!==n.dragmode&&(M.preventDefault(),document.removeEventListener("mousemove",d),document.removeEventListener("touchmove",d));document.removeEventListener("mouseup",q);document.removeEventListener("touchend",q);e?g(B):E&&(B.documentElement.style.cursor=E,E=null);if(r._dragging){r._dragging=!1;(new Date).getTime()-r._mouseDownTime>v&&(u=Math.max(u-1,1));if(r._dragged)n.doneFn&&
n.doneFn();else if(n.clickFn&&n.clickFn(u,t),!I){try{var N=new MouseEvent("click",M)}catch(J){var H=h(M);N=document.createEvent("MouseEvents");N.initMouseEvent("click",M.bubbles,M.cancelable,M.view,M.detail,M.screenX,M.screenY,H[0],H[1],M.ctrlKey,M.altKey,M.shiftKey,M.metaKey,M.button,M.relatedTarget)}G.dispatchEvent(N)}r._dragging=!1}r._dragged=!1}var r=n.gd,u=1,v=r._context.doubleClickDelay,w=n.element,y,D,x,E,B,t,G,I;r._mouseDownTime||(r._mouseDownTime=0);w.style.pointerEvents="all";w.onmousedown=
f;a?(w._ontouchstart&&w.removeEventListener("touchstart",w._ontouchstart),w._ontouchstart=f,w.addEventListener("touchstart",f,{passive:!1})):w.ontouchstart=f;var L=n.clampFn||c};p.coverSlip=m},{"../../lib":749,"../../plots/cartesian/constants":803,"./align":631,"./cursor":632,"./unhover":635,"has-hover":414,"has-passive-events":415,"mouse-event-offset":458}],635:[function(b,F,C){var m=b("../../lib/events"),h=b("../../lib/throttle"),l=b("../../lib/dom").getGraphDiv,e=b("../fx/constants"),a=F.exports=
{};a.wrapped=function(g,k,p){g=l(g);g._fullLayout&&h.clear(g._fullLayout._uid+e.HOVERID);a.raw(g,k,p)};a.raw=function(g,k){var p=g._fullLayout,n=g._hoverdata;k||(k={});k.target&&!1===m.triggerHandler(g,"plotly_beforehover",k)||(p._hoverlayer.selectAll("g").remove(),p._hoverlayer.selectAll("line").remove(),p._hoverlayer.selectAll("circle").remove(),g._hoverdata=void 0,k.target&&n&&g.emit("plotly_unhover",{event:k,points:n}))}},{"../../lib/dom":737,"../../lib/events":738,"../../lib/throttle":774,"../fx/constants":649}],
636:[function(b,F,C){C.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid",editType:"style"}},{}],637:[function(b,F,C){function m(Q,U){return E.symbolFuncs[Q%100](U)+(200<=Q?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function h(Q,U,P,V){var Y=k.select(Q.node().parentNode),ba=-1!==U.indexOf("top")?"top":-1!==U.indexOf("bottom")?"bottom":"middle";U=-1!==U.indexOf("left")?"end":-1!==U.indexOf("right")?"start":"middle";var ea=V?V/.8+1:0,ca=(r.lineCount(Q)-1)*v+1;
V=L[U]*ea;P=.75*P+L[ba]*ea+(L[ba]-1)*ca*P/2;Q.attr("text-anchor",U);Y.attr("transform","translate("+V+","+P+")")}function l(Q,U){Q=Q.ts||U.textfont.size;return p(Q)&&0<Q?Q:0}function e(Q,U,P,V){var Y=Q[0]-U[0],ba=Q[1]-U[1],ea=P[0]-U[0],ca=P[1]-U[1];P=Math.pow(Y*Y+ba*ba,.25);Q=Math.pow(ea*ea+ca*ca,.25);Y=(Q*Q*Y-P*P*ea)*V;V*=Q*Q*ba-P*P*ca;ba=3*Q*(P+Q);P=3*P*(P+Q);return[[k.round(U[0]+(ba&&Y/ba),2),k.round(U[1]+(ba&&V/ba),2)],[k.round(U[0]-(P&&Y/P),2),k.round(U[1]-(P&&V/P),2)]]}function a(Q){var U=Q.getAttribute("data-unformatted");
if(null!==U)return U+Q.getAttribute("data-math")+Q.getAttribute("text-anchor")+Q.getAttribute("style")}function g(Q,U){if(!Q)return null;U=U._context;return"url('"+(U._exportedPlot?"":U._baseUrl||"")+"#"+Q+"')"}var k=b("d3"),p=b("fast-isnumeric"),n=b("tinycolor2"),c=b("../../registry"),f=b("../color"),d=b("../colorscale"),q=b("../../lib"),r=b("../../lib/svg_text_utils"),u=b("../../constants/xmlns_namespaces"),v=b("../../constants/alignment").LINE_SPACING,w=b("../../constants/interactions").DESELECTDIM,
y=b("../../traces/scatter/subtypes"),D=b("../../traces/scatter/make_bubble_size_func"),x=b("../../components/fx/helpers").appendArrayPointValue,E=F.exports={};E.font=function(Q,U,P,V){q.isPlainObject(U)&&(V=U.color,P=U.size,U=U.family);U&&Q.style("font-family",U);P+1&&Q.style("font-size",P+"px");V&&Q.call(f.fill,V)};E.setPosition=function(Q,U,P){Q.attr("x",U).attr("y",P)};E.setSize=function(Q,U,P){Q.attr("width",U).attr("height",P)};E.setRect=function(Q,U,P,V,Y){Q.call(E.setPosition,U,P).call(E.setSize,
V,Y)};E.translatePoint=function(Q,U,P,V){P=P.c2p(Q.x);Q=V.c2p(Q.y);if(p(P)&&p(Q)&&U.node())"text"===U.node().nodeName?U.attr("x",P).attr("y",Q):U.attr("transform","translate("+P+","+Q+")");else return!1;return!0};E.translatePoints=function(Q,U,P){Q.each(function(V){var Y=k.select(this);E.translatePoint(V,Y,U,P)})};E.hideOutsideRangePoint=function(Q,U,P,V,Y,ba){U.attr("display",P.isPtWithinRange(Q,Y)&&V.isPtWithinRange(Q,ba)?null:"none")};E.hideOutsideRangePoints=function(Q,U){if(U._hasClipOnAxisFalse){var P=
U.xaxis,V=U.yaxis;Q.each(function(Y){Y=Y[0].trace;var ba=Y.xcalendar,ea=Y.ycalendar;Y=c.traceIs(Y,"bar-like")?".bartext":".point,.textpoint";Q.selectAll(Y).each(function(ca){E.hideOutsideRangePoint(ca,k.select(this),P,V,ba,ea)})})}};E.crispRound=function(Q,U,P){return U&&p(U)?Q._context.staticPlot?U:1>U?1:Math.round(U):P||0};E.singleLineStyle=function(Q,U,P,V,Y){U.style("fill","none");Q=(((Q||[])[0]||{}).trace||{}).line||{};P=P||Q.width||0;Y=Y||Q.dash||"";f.stroke(U,V||Q.color);E.dashLine(U,Y,P)};
E.lineGroupStyle=function(Q,U,P,V){Q.style("fill","none").each(function(Y){Y=(((Y||[])[0]||{}).trace||{}).line||{};var ba=U||Y.width||0,ea=V||Y.dash||"";k.select(this).call(f.stroke,P||Y.color).call(E.dashLine,ea,ba)})};E.dashLine=function(Q,U,P){P=+P||0;U=E.dashStyle(U,P);Q.style({"stroke-dasharray":U,"stroke-width":P+"px"})};E.dashStyle=function(Q,U){U=Math.max(+U||1,3);"solid"===Q?Q="":"dot"===Q?Q=U+"px,"+U+"px":"dash"===Q?Q=3*U+"px,"+3*U+"px":"longdash"===Q?Q=5*U+"px,"+5*U+"px":"dashdot"===Q?
Q=3*U+"px,"+U+"px,"+U+"px,"+U+"px":"longdashdot"===Q&&(Q=5*U+"px,"+2*U+"px,"+U+"px,"+2*U+"px");return Q};E.singleFillStyle=function(Q){var U=(((k.select(Q.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;U&&Q.call(f.fill,U)};E.fillGroupStyle=function(Q){Q.style("stroke-width",0).each(function(U){var P=k.select(this);U[0].trace&&P.call(f.fill,U[0].trace.fillcolor)})};var B=b("./symbol_defs");E.symbolNames=[];E.symbolFuncs=[];E.symbolNeedLines={};E.symbolNoDot={};E.symbolNoFill={};E.symbolList=[];
Object.keys(B).forEach(function(Q){var U=B[Q],P=U.n;E.symbolList.push(P,String(P),Q,P+100,String(P+100),Q+"-open");E.symbolNames[P]=Q;E.symbolFuncs[P]=U.f;U.needLine&&(E.symbolNeedLines[P]=!0);U.noDot?E.symbolNoDot[P]=!0:E.symbolList.push(P+200,String(P+200),Q+"-dot",P+300,String(P+300),Q+"-open-dot");U.noFill&&(E.symbolNoFill[P]=!0)});var t=E.symbolNames.length;E.symbolNumber=function(Q){if(p(Q))Q=+Q;else if("string"===typeof Q){var U=0;0<Q.indexOf("-open")&&(U=100,Q=Q.replace("-open",""));0<Q.indexOf("-dot")&&
(U+=200,Q=Q.replace("-dot",""));Q=E.symbolNames.indexOf(Q);0<=Q&&(Q+=U)}return Q%100>=t||400<=Q?0:Math.floor(Math.max(Q,0))};b={x1:1,x2:0,y1:0,y2:0};F={x1:0,x2:0,y1:1,y2:0};var G=k.format("~.1f"),I={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:F},verticalreversed:{node:"linearGradient",attrs:F,reversed:!0}};E.gradient=
function(Q,U,P,V,Y,ba){for(var ea=Y.length,ca=I[V],ia=Array(ea),fa=0;fa<ea;fa++)ca.reversed?ia[ea-1-fa]=[G(100*(1-Y[fa][0])),Y[fa][1]]:ia[fa]=[G(100*Y[fa][0]),Y[fa][1]];Y=U._fullLayout;var ha="g"+Y._uid+"-"+P;P=Y._defs.select(".gradients").selectAll("#"+ha).data([V+ia.join(";")],q.identity);P.exit().remove();P.enter().append(ca.node).each(function(){var na=k.select(this);ca.attrs&&na.attr(ca.attrs);na.attr("id",ha);na=na.selectAll("stop").data(ia);na.exit().remove();na.enter().append("stop");na.each(function(pa){var ra=
n(pa[1]);k.select(this).attr({offset:pa[0]+"%","stop-color":f.tinyRGB(ra),"stop-opacity":ra.getAlpha()})})});Q.style(ba,g(ha,U)).style(ba+"-opacity",null);Q="."+k.select(Q.node().parentNode).attr("class").replace(/\s/g,".")+"\x3e."+Q.attr("class").replace(/\s/g,".");Y._gradientUrlQueryParts[Q]=1};E.initGradients=function(Q){Q=Q._fullLayout;q.ensureSingle(Q._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove();Q._gradientUrlQueryParts={}};E.pointStyle=function(Q,U,P){if(Q.size()){var V=
E.makePointStyleFns(U);Q.each(function(Y){E.singlePointStyle(Y,k.select(this),U,V,P)})}};E.singlePointStyle=function(Q,U,P,V,Y){var ba=P.marker,ea=ba.line;U.style("opacity",V.selectedOpacityFn?V.selectedOpacityFn(Q):void 0===Q.mo?ba.opacity:Q.mo);if(V.ms2mrc){var ca="various"===Q.ms||"various"===ba.size?3:V.ms2mrc(Q.ms);Q.mrc=ca;V.selectedSizeFn&&(ca=Q.mrc=V.selectedSizeFn(Q));var ia=E.symbolNumber(Q.mx||ba.symbol)||0;Q.om=100<=ia%200;U.attr("d",m(ia,ca))}ca=!1;if(Q.so){ia=ea.outlierwidth;var fa=
ea.outliercolor;ea=ba.outliercolor}else ia=(ea||{}).width,ia=(Q.mlw+1||ia+1||(Q.trace?(Q.trace.marker.line||{}).width:0)+1)-1||0,fa="mlc"in Q?Q.mlcc=V.lineScale(Q.mlc):q.isArrayOrTypedArray(ea.color)?f.defaultLine:ea.color,q.isArrayOrTypedArray(ba.color)&&(ca=!0),ea="mc"in Q?Q.mcc=V.markerScale(Q.mc):ba.color||"rgba(0,0,0,0)",V.selectedColorFn&&(ea=V.selectedColorFn(Q));if(Q.om)U.call(f.stroke,ea).style({"stroke-width":(ia||1)+"px",fill:"none"});else{U.style("stroke-width",(Q.isBlank?0:ia)+"px");
var ha=ba.gradient;(V=Q.mgt)?ca=!0:V=ha&&ha.type;Array.isArray(V)&&(V=V[0],I[V]||(V=0));V&&"none"!==V?((ba=Q.mgc)?ca=!0:ba=ha.color,P=P.uid,ca&&(P+="-"+Q.i),E.gradient(U,Y,P,V,[[0,ba],[1,ea]],"fill")):f.fill(U,ea);ia&&f.stroke(U,fa)}};E.makePointStyleFns=function(Q){var U={},P=Q.marker;U.markerScale=E.tryColorscale(P,"");U.lineScale=E.tryColorscale(P,"line");c.traceIs(Q,"symbols")&&(U.ms2mrc=y.isBubble(Q)?D(Q):function(){return(P.size||6)/2});Q.selectedpoints&&q.extendFlat(U,E.makeSelectedPointStyleFns(Q));
return U};E.makeSelectedPointStyleFns=function(Q){var U={},P=Q.marker||{},V=(Q.selected||{}).marker||{},Y=(Q.unselected||{}).marker||{},ba=V.opacity,ea=Y.opacity,ca=void 0!==ba,ia=void 0!==ea;if(q.isArrayOrTypedArray(P.opacity)||ca||ia)U.selectedOpacityFn=function(ka){var sa=void 0===ka.mo?P.opacity:ka.mo;return ka.selected?ca?ba:sa:ia?ea:w*sa};var fa=P.color,ha=V.color,na=Y.color;if(ha||na)U.selectedColorFn=function(ka){var sa=ka.mcc||fa;return ka.selected?ha||sa:na||sa};var pa=P.size,ra=V.size,
ta=Y.size,oa=void 0!==ra,ua=void 0!==ta;c.traceIs(Q,"symbols")&&(oa||ua)&&(U.selectedSizeFn=function(ka){var sa=ka.mrc||pa/2;return ka.selected?oa?ra/2:sa:ua?ta/2:sa});return U};E.makeSelectedTextStyleFns=function(Q){var U={},P=(Q.textfont||{}).color,V=((Q.selected||{}).textfont||{}).color,Y=((Q.unselected||{}).textfont||{}).color;U.selectedTextColorFn=function(ba){var ea=ba.tc||P;return ba.selected?V||ea:Y?Y:V?ea:f.addOpacity(ea,w)};return U};E.selectedPointStyle=function(Q,U){if(Q.size()&&U.selectedpoints){var P=
E.makeSelectedPointStyleFns(U),V=U.marker||{},Y=[];P.selectedOpacityFn&&Y.push(function(ba,ea){ba.style("opacity",P.selectedOpacityFn(ea))});P.selectedColorFn&&Y.push(function(ba,ea){f.fill(ba,P.selectedColorFn(ea))});P.selectedSizeFn&&Y.push(function(ba,ea){var ca=ea.mx||V.symbol||0,ia=P.selectedSizeFn(ea);ba.attr("d",m(E.symbolNumber(ca),ia));ea.mrc2=ia});Y.length&&Q.each(function(ba){for(var ea=k.select(this),ca=0;ca<Y.length;ca++)Y[ca](ea,ba)})}};E.tryColorscale=function(Q,U){if(Q=U?q.nestedProperty(Q,
U).get():Q)if(U=Q.color,(Q.colorscale||Q._colorAx)&&q.isArrayOrTypedArray(U))return d.makeColorScaleFuncFromTrace(Q);return q.identity};var L={start:1,end:-1,middle:0,bottom:1,top:-1};E.textPointStyle=function(Q,U,P){if(Q.size()){if(U.selectedpoints)var V=E.makeSelectedTextStyleFns(U).selectedTextColorFn;var Y=U.texttemplate,ba=P._fullLayout;Q.each(function(ea){var ca=k.select(this),ia=Y?q.extractOption(ea,U,"txt","texttemplate"):q.extractOption(ea,U,"tx","text");if(ia||0===ia){if(Y){var fa=U._module.formatLabels?
U._module.formatLabels(ea,U,ba):{},ha={};x(ha,U,ea.i);ia=q.texttemplateString(ia,fa,ba._d3locale,ha,ea,U._meta||{})}fa=ea.tp||U.textposition;ha=l(ea,U);var na=V?V(ea):ea.tc||U.textfont.color;ca.call(E.font,ea.tf||U.textfont.family,ha,na).text(ia).call(r.convertToTspans,P).call(h,fa,ha,ea.mrc)}else ca.remove()})}};E.selectedTextStyle=function(Q,U){if(Q.size()&&U.selectedpoints){var P=E.makeSelectedTextStyleFns(U);Q.each(function(V){var Y=k.select(this),ba=P.selectedTextColorFn(V),ea=V.tp||U.textposition,
ca=l(V,U);f.fill(Y,ba);h(Y,ea,ca,V.mrc2||V.mrc)})}};E.smoothopen=function(Q,U){if(3>Q.length)return"M"+Q.join("L");var P="M"+Q[0],V=[],Y;for(Y=1;Y<Q.length-1;Y++)V.push(e(Q[Y-1],Q[Y],Q[Y+1],U));P+="Q"+V[0][0]+" "+Q[1];for(Y=2;Y<Q.length-1;Y++)P+="C"+V[Y-2][1]+" "+V[Y-1][0]+" "+Q[Y];return P+="Q"+V[Q.length-3][1]+" "+Q[Q.length-1]};E.smoothclosed=function(Q,U){if(3>Q.length)return"M"+Q.join("L")+"Z";var P="M"+Q[0],V=Q.length-1,Y=[e(Q[V],Q[0],Q[1],U)],ba;for(ba=1;ba<V;ba++)Y.push(e(Q[ba-1],Q[ba],Q[ba+
1],U));Y.push(e(Q[V-1],Q[V],Q[0],U));for(ba=1;ba<=V;ba++)P+="C"+Y[ba-1][1]+" "+Y[ba][0]+" "+Q[ba];return P+="C"+Y[V][1]+" "+Y[0][0]+" "+Q[0]+"Z"};var M={hv:function(Q,U){return"H"+k.round(U[0],2)+"V"+k.round(U[1],2)},vh:function(Q,U){return"V"+k.round(U[1],2)+"H"+k.round(U[0],2)},hvh:function(Q,U){return"H"+k.round((Q[0]+U[0])/2,2)+"V"+k.round(U[1],2)+"H"+k.round(U[0],2)},vhv:function(Q,U){return"V"+k.round((Q[1]+U[1])/2,2)+"H"+k.round(U[0],2)+"V"+k.round(U[1],2)}},N=function(Q,U){return"L"+k.round(U[0],
2)+","+k.round(U[1],2)};E.steps=function(Q){var U=M[Q]||N;return function(P){for(var V="M"+k.round(P[0][0],2)+","+k.round(P[0][1],2),Y=1;Y<P.length;Y++)V+=U(P[Y-1],P[Y]);return V}};E.makeTester=function(){var Q=q.ensureSingleById(k.select("body"),"svg","js-plotly-tester",function(P){P.attr(u.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),U=q.ensureSingle(Q,"path","js-reference-point",function(P){P.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,
fill:"black"})});E.tester=Q;E.testref=U};E.savedBBoxes={};var H=0;E.bBox=function(Q,U,P){P||(P=a(Q));var V;if(P){if(V=E.savedBBoxes[P])return q.extendFlat({},V)}else if(1===Q.childNodes.length){var Y=Q.childNodes[0];if(P=a(Y)){V=+Y.getAttribute("x")||0;var ba=+Y.getAttribute("y")||0,ea=Y.getAttribute("transform");if(!ea)return P=E.bBox(Y,!1,P),V&&(P.left+=V,P.right+=V),ba&&(P.top+=ba,P.bottom+=ba),P;P+="~"+V+"~"+ba+"~"+ea;if(V=E.savedBBoxes[P])return q.extendFlat({},V)}}if(!U){var ca=E.tester.node();
Q=Q.cloneNode(!0);ca.appendChild(Q)}k.select(Q).attr("transform",null).call(r.positionText,0,0);V=Q.getBoundingClientRect();ba=E.testref.node().getBoundingClientRect();U||ca.removeChild(Q);U={height:V.height,width:V.width,left:V.left-ba.left,top:V.top-ba.top,right:V.right-ba.left,bottom:V.bottom-ba.top};1E4<=H&&(E.savedBBoxes={},H=0);P&&(E.savedBBoxes[P]=U);H++;return q.extendFlat({},U)};E.setClipUrl=function(Q,U,P){Q.attr("clip-path",g(U,P))};E.getTranslate=function(Q){Q=(Q[Q.attr?"attr":"getAttribute"]("transform")||
"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(U,P,V){return[P,V].join(" ")}).split(" ");return{x:+Q[0]||0,y:+Q[1]||0}};E.setTranslate=function(Q,U,P){var V=Q.attr?"attr":"setAttribute",Y=Q[Q.attr?"attr":"getAttribute"]("transform")||"";U=U||0;P=P||0;Y=Y.replace(/(\btranslate\(.*?\);?)/,"").trim();Y=(Y+(" translate("+U+", "+P+")")).trim();Q[V]("transform",Y);return Y};E.getScale=function(Q){Q=(Q[Q.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,
function(U,P,V){return[P,V].join(" ")}).split(" ");return{x:+Q[0]||1,y:+Q[1]||1}};E.setScale=function(Q,U,P){var V=Q.attr?"attr":"setAttribute",Y=Q[Q.attr?"attr":"getAttribute"]("transform")||"";U=U||1;P=P||1;Y=Y.replace(/(\bscale\(.*?\);?)/,"").trim();Y=(Y+(" scale("+U+", "+P+")")).trim();Q[V]("transform",Y);return Y};var J=/\s*sc.*/;E.setPointGroupScale=function(Q,U,P){U=U||1;P=P||1;if(Q){var V=1===U&&1===P?"":" scale("+U+","+P+")";Q.each(function(){var Y=(this.getAttribute("transform")||"").replace(J,
"");Y+=V;Y=Y.trim();this.setAttribute("transform",Y)})}};var O=/translate\([^)]*\)\s*$/;E.setTextPointsScale=function(Q,U,P){Q&&Q.each(function(){var V=k.select(this),Y=V.select("text");if(Y.node()){var ba=parseFloat(Y.attr("x")||0);var ea=parseFloat(Y.attr("y")||0);Y=(V.attr("transform")||"").match(O);ba=1===U&&1===P?[]:["translate("+ba+","+ea+")","scale("+U+","+P+")","translate("+-ba+","+-ea+")"];Y&&ba.push(Y);V.attr("transform",ba.join(" "))}})}},{"../../components/fx/helpers":651,"../../constants/alignment":717,
"../../constants/interactions":723,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../lib/svg_text_utils":773,"../../registry":880,"../../traces/scatter/make_bubble_size_func":1172,"../../traces/scatter/subtypes":1179,"../color":615,"../colorscale":627,"./symbol_defs":638,d3:169,"fast-isnumeric":241,tinycolor2:548}],638:[function(b,F,C){var m=b("d3");F.exports={circle:{n:0,f:function(h){h=m.round(h,2);return"M"+h+",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z"}},square:{n:1,
f:function(h){h=m.round(h,2);return"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z"}},diamond:{n:2,f:function(h){h=m.round(1.3*h,2);return"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"Z"}},cross:{n:3,f:function(h){var l=m.round(.4*h,2);h=m.round(1.2*h,2);return"M"+h+","+l+"H"+l+"V"+h+"H-"+l+"V"+l+"H-"+h+"V-"+l+"H-"+l+"V-"+h+"H"+l+"V-"+l+"H"+h+"Z"}},x:{n:4,f:function(h){h=m.round(.8*h/Math.sqrt(2),2);var l="l"+h+","+h,e="l"+h+",-"+h,a="l-"+h+",-"+h,g="l-"+h+","+h;return"M0,"+h+l+e+a+e+a+g+a+g+l+g+l+"Z"}},"triangle-up":{n:5,
f:function(h){var l=m.round(2*h/Math.sqrt(3),2),e=m.round(h/2,2);h=m.round(h,2);return"M-"+l+","+e+"H"+l+"L0,-"+h+"Z"}},"triangle-down":{n:6,f:function(h){var l=m.round(2*h/Math.sqrt(3),2),e=m.round(h/2,2);h=m.round(h,2);return"M-"+l+",-"+e+"H"+l+"L0,"+h+"Z"}},"triangle-left":{n:7,f:function(h){var l=m.round(2*h/Math.sqrt(3),2),e=m.round(h/2,2);h=m.round(h,2);return"M"+e+",-"+l+"V"+l+"L-"+h+",0Z"}},"triangle-right":{n:8,f:function(h){var l=m.round(2*h/Math.sqrt(3),2),e=m.round(h/2,2);h=m.round(h,
2);return"M-"+e+",-"+l+"V"+l+"L"+h+",0Z"}},"triangle-ne":{n:9,f:function(h){var l=m.round(.6*h,2);h=m.round(1.2*h,2);return"M-"+h+",-"+l+"H"+l+"V"+h+"Z"}},"triangle-se":{n:10,f:function(h){var l=m.round(.6*h,2);h=m.round(1.2*h,2);return"M"+l+",-"+h+"V"+l+"H-"+h+"Z"}},"triangle-sw":{n:11,f:function(h){var l=m.round(.6*h,2);h=m.round(1.2*h,2);return"M"+h+","+l+"H-"+l+"V-"+h+"Z"}},"triangle-nw":{n:12,f:function(h){var l=m.round(.6*h,2);h=m.round(1.2*h,2);return"M-"+l+","+h+"V-"+l+"H"+h+"Z"}},pentagon:{n:13,
f:function(h){var l=m.round(.951*h,2),e=m.round(.588*h,2),a=m.round(-h,2),g=m.round(-.309*h,2);h=m.round(.809*h,2);return"M"+l+","+g+"L"+e+","+h+"H-"+e+"L-"+l+","+g+"L0,"+a+"Z"}},hexagon:{n:14,f:function(h){var l=m.round(h,2),e=m.round(h/2,2);h=m.round(h*Math.sqrt(3)/2,2);return"M"+h+",-"+e+"V"+e+"L0,"+l+"L-"+h+","+e+"V-"+e+"L0,-"+l+"Z"}},hexagon2:{n:15,f:function(h){var l=m.round(h,2),e=m.round(h/2,2);h=m.round(h*Math.sqrt(3)/2,2);return"M-"+e+","+h+"H"+e+"L"+l+",0L"+e+",-"+h+"H-"+e+"L-"+l+",0Z"}},
octagon:{n:16,f:function(h){var l=m.round(.924*h,2);h=m.round(.383*h,2);return"M-"+h+",-"+l+"H"+h+"L"+l+",-"+h+"V"+h+"L"+h+","+l+"H-"+h+"L-"+l+","+h+"V-"+h+"Z"}},star:{n:17,f:function(h){var l=1.4*h;h=m.round(.225*l,2);var e=m.round(.951*l,2),a=m.round(.363*l,2),g=m.round(.588*l,2),k=m.round(-l,2),p=m.round(-.309*l,2),n=m.round(.118*l,2),c=m.round(.809*l,2);l=m.round(.382*l,2);return"M"+h+","+p+"H"+e+"L"+a+","+n+"L"+g+","+c+"L0,"+l+"L-"+g+","+c+"L-"+a+","+n+"L-"+e+","+p+"H-"+h+"L0,"+k+"Z"}},hexagram:{n:18,
f:function(h){var l=m.round(.66*h,2),e=m.round(.38*h,2);h=m.round(.76*h,2);return"M-"+h+",0l-"+e+",-"+l+"h"+h+"l"+e+",-"+l+"l"+e+","+l+"h"+h+"l-"+e+","+l+"l"+e+","+l+"h-"+h+"l-"+e+","+l+"l-"+e+",-"+l+"h-"+h+"Z"}},"star-triangle-up":{n:19,f:function(h){var l=m.round(h*Math.sqrt(3)*.8,2),e=m.round(.8*h,2),a=m.round(1.6*h,2);h=m.round(4*h,2);h="A "+h+","+h+" 0 0 1 ";return"M-"+l+","+e+h+l+","+e+h+"0,-"+a+h+"-"+l+","+e+"Z"}},"star-triangle-down":{n:20,f:function(h){var l=m.round(h*Math.sqrt(3)*.8,2),
e=m.round(.8*h,2),a=m.round(1.6*h,2);h=m.round(4*h,2);h="A "+h+","+h+" 0 0 1 ";return"M"+l+",-"+e+h+"-"+l+",-"+e+h+"0,"+a+h+l+",-"+e+"Z"}},"star-square":{n:21,f:function(h){var l=m.round(1.1*h,2);h=m.round(2*h,2);h="A "+h+","+h+" 0 0 1 ";return"M-"+l+",-"+l+h+"-"+l+","+l+h+l+","+l+h+l+",-"+l+h+"-"+l+",-"+l+"Z"}},"star-diamond":{n:22,f:function(h){var l=m.round(1.4*h,2);h=m.round(1.9*h,2);h="A "+h+","+h+" 0 0 1 ";return"M-"+l+",0"+h+"0,"+l+h+l+",0"+h+"0,-"+l+h+"-"+l+",0Z"}},"diamond-tall":{n:23,f:function(h){var l=
m.round(.7*h,2);h=m.round(1.4*h,2);return"M0,"+h+"L"+l+",0L0,-"+h+"L-"+l+",0Z"}},"diamond-wide":{n:24,f:function(h){var l=m.round(1.4*h,2);h=m.round(.7*h,2);return"M0,"+h+"L"+l+",0L0,-"+h+"L-"+l+",0Z"}},hourglass:{n:25,f:function(h){h=m.round(h,2);return"M"+h+","+h+"H-"+h+"L"+h+",-"+h+"H-"+h+"Z"},noDot:!0},bowtie:{n:26,f:function(h){h=m.round(h,2);return"M"+h+","+h+"V-"+h+"L-"+h+","+h+"V-"+h+"Z"},noDot:!0},"circle-cross":{n:27,f:function(h){h=m.round(h,2);return"M0,"+h+"V-"+h+"M"+h+",0H-"+h+"M"+h+
",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(h){var l=m.round(h,2);h=m.round(h/Math.sqrt(2),2);return"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(h){h=m.round(h,2);return"M0,"+h+"V-"+h+"M"+h+",0H-"+h+"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(h){h=m.round(h,2);return"M"+
h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h+"M"+h+","+h+"H-"+h+"V-"+h+"H"+h+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(h){h=m.round(1.3*h,2);return"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"ZM0,-"+h+"V"+h+"M-"+h+",0H"+h},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(h){var l=m.round(1.3*h,2);h=m.round(.65*h,2);return"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM-"+h+",-"+h+"L"+h+","+h+"M-"+h+","+h+"L"+h+",-"+h},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(h){h=m.round(1.4*h,2);return"M0,"+
h+"V-"+h+"M"+h+",0H-"+h},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(h){h=m.round(h,2);return"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(h){var l=m.round(1.2*h,2);h=m.round(.85*h,2);return"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(h){var l=m.round(h/2,2);h=m.round(h,2);return"M"+l+","+h+"V-"+h+"m-"+h+",0V"+h+"M"+h+","+l+"H-"+
h+"m0,-"+h+"H"+h},needLine:!0,noFill:!0},"y-up":{n:37,f:function(h){var l=m.round(1.2*h,2),e=m.round(1.6*h,2);h=m.round(.8*h,2);return"M-"+l+","+h+"L0,0M"+l+","+h+"L0,0M0,-"+e+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(h){var l=m.round(1.2*h,2),e=m.round(1.6*h,2);h=m.round(.8*h,2);return"M-"+l+",-"+h+"L0,0M"+l+",-"+h+"L0,0M0,"+e+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(h){var l=m.round(1.2*h,2),e=m.round(1.6*h,2);h=m.round(.8*h,2);return"M"+h+","+l+
"L0,0M"+h+",-"+l+"L0,0M-"+e+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(h){var l=m.round(1.2*h,2),e=m.round(1.6*h,2);h=m.round(.8*h,2);return"M-"+h+","+l+"L0,0M-"+h+",-"+l+"L0,0M"+e+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(h){h=m.round(1.4*h,2);return"M"+h+",0H-"+h},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(h){h=m.round(1.4*h,2);return"M0,"+h+"V-"+h},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(h){h=m.round(h,2);return"M"+
h+",-"+h+"L-"+h+","+h},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(h){h=m.round(h,2);return"M"+h+","+h+"L-"+h+",-"+h},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(h){var l=m.round(h,2);h=m.round(2*h,2);return"M0,0L-"+l+","+h+"H"+l+"Z"},noDot:!0},"arrow-down":{n:46,f:function(h){var l=m.round(h,2);h=m.round(2*h,2);return"M0,0L-"+l+",-"+h+"H"+l+"Z"},noDot:!0},"arrow-left":{n:47,f:function(h){var l=m.round(2*h,2);h=m.round(h,2);return"M0,0L"+l+",-"+h+"V"+h+"Z"},noDot:!0},
"arrow-right":{n:48,f:function(h){var l=m.round(2*h,2);h=m.round(h,2);return"M0,0L-"+l+",-"+h+"V"+h+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(h){var l=m.round(h,2);h=m.round(2*h,2);return"M-"+l+",0H"+l+"M0,0L-"+l+","+h+"H"+l+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(h){var l=m.round(h,2);h=m.round(2*h,2);return"M-"+l+",0H"+l+"M0,0L-"+l+",-"+h+"H"+l+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(h){var l=m.round(2*h,2);h=m.round(h,2);return"M0,-"+h+"V"+h+"M0,0L"+
l+",-"+h+"V"+h+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(h){var l=m.round(2*h,2);h=m.round(h,2);return"M0,-"+h+"V"+h+"M0,0L-"+l+",-"+h+"V"+h+"Z"},needLine:!0,noDot:!0}}},{d3:169}],639:[function(b,F,C){F.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},
value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",
editType:"style"}}}},{}],640:[function(b,F,C){function m(k,p,n,c){var f=p["error_"+c]||{},d=[];if(f.visible&&-1!==["linear","log"].indexOf(n.type)){f=g(f);for(var q=0;q<k.length;q++){var r=k[q],u=r.i;if(void 0===u)u=q;else if(null===u)continue;var v=r[c];if(h(n.c2l(v))){var w=f(v,u);h(w[0])&&h(w[1])&&(u=r[c+"s"]=v-w[0],r=r[c+"h"]=v+w[1],d.push(u,r))}}k=p._extremes[n._id];n=e.findExtremes(n,d,a.extendFlat({tozero:k.opts.tozero},{padded:!0}));k.min=k.min.concat(n.min);k.max=k.max.concat(n.max)}}var h=
b("fast-isnumeric"),l=b("../../registry"),e=b("../../plots/cartesian/axes"),a=b("../../lib"),g=b("./compute_error");F.exports=function(k){for(var p=k.calcdata,n=0;n<p.length;n++){var c=p[n],f=c[0].trace;if(!0===f.visible&&l.traceIs(f,"errorBarsOK")){var d=e.getFromId(k,f.xaxis),q=e.getFromId(k,f.yaxis);m(c,f,d,"x");m(c,f,q,"y")}}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./compute_error":641,"fast-isnumeric":241}],641:[function(b,F,C){function m(h,l){if("percent"===
h)return function(e){return Math.abs(e*l/100)};if("constant"===h)return function(){return Math.abs(l)};if("sqrt"===h)return function(e){return Math.sqrt(Math.abs(e))}}F.exports=function(h){var l=h.type,e=h.symmetric;if("data"===l){var a=h.array||[];if(e)return function(n,c){n=+a[c];return[n,n]};var g=h.arrayminus||[];return function(n,c){n=+a[c];c=+g[c];return isNaN(n)&&isNaN(c)?[NaN,NaN]:[c||0,n||0]}}var k=m(l,h.value),p=m(l,h.valueminus);return e||void 0===h.valueminus?function(n){n=k(n);return[n,
n]}:function(n){return[p(n),k(n)]}}},{}],642:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../../registry"),l=b("../../lib"),e=b("../../plot_api/plot_template"),a=b("./attributes");F.exports=function(g,k,p,n){function c(r,u){return l.coerce(q,d,a,r,u)}var f="error_"+n.axis,d=e.newContainer(k,f),q=g[f]||{};if(!1!==c("visible",void 0!==q.array||void 0!==q.value||"sqrt"===q.type)){g=c("type","array"in q?"data":"percent");f=!0;"sqrt"!==g&&(f=c("symmetric",!(("data"===g?"arrayminus":"valueminus")in q)));
if("data"===g)c("array"),c("traceref"),f||(c("arrayminus"),c("tracerefminus"));else if("percent"===g||"constant"===g)c("value"),f||c("valueminus");g="copy_"+n.inherit+"style";n.inherit&&(k["error_"+n.inherit]||{}).visible&&c(g,!(q.color||m(q.thickness)||m(q.width)));n.inherit&&d[g]||(c("color",p),c("thickness"),c("width",h.traceIs(k,"gl3d")?0:4))}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880,"./attributes":639,"fast-isnumeric":241}],643:[function(b,F,C){var m=b("../../lib");
C=b("../../plot_api/edit_types").overrideAll;var h=b("./attributes"),l={error_x:m.extendFlat({},h),error_y:m.extendFlat({},h)};delete l.error_x.copy_zstyle;delete l.error_y.copy_zstyle;delete l.error_y.copy_ystyle;m={error_x:m.extendFlat({},h),error_y:m.extendFlat({},h),error_z:m.extendFlat({},h)};delete m.error_x.copy_ystyle;delete m.error_y.copy_ystyle;delete m.error_z.copy_ystyle;delete m.error_z.copy_zstyle;F.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:l,bar:l,histogram:l,
scatter3d:C(m,"calc","nested"),scattergl:C(l,"calc","nested")}},supplyDefaults:b("./defaults"),calc:b("./calc"),makeComputeError:b("./compute_error"),plot:b("./plot"),style:b("./style"),hoverInfo:function(e,a,g){(a.error_y||{}).visible&&(g.yerr=e.yh-e.y,a.error_y.symmetric||(g.yerrneg=e.y-e.ys));(a.error_x||{}).visible&&(g.xerr=e.xh-e.x,a.error_x.symmetric||(g.xerrneg=e.x-e.xs))}}},{"../../lib":749,"../../plot_api/edit_types":780,"./attributes":639,"./calc":640,"./compute_error":641,"./defaults":642,
"./plot":644,"./style":645}],644:[function(b,F,C){var m=b("d3"),h=b("fast-isnumeric"),l=b("../drawing"),e=b("../../traces/scatter/subtypes");F.exports=function(a,g,k,p){var n,c=k.xaxis,f=k.yaxis,d=p&&0<p.duration;g.each(function(q){var r=q[0].trace,u=r.error_x||{},v=r.error_y||{},w;r.ids&&(w=function(D){return D.id});var y=e.hasMarkers(r)&&0<r.marker.maxdisplayed;v.visible||u.visible||(q=[]);r=m.select(this).selectAll("g.errorbar").data(q,w);r.exit().remove();q.length&&(u.visible||r.selectAll("path.xerror").remove(),
v.visible||r.selectAll("path.yerror").remove(),r.style("opacity",1),q=r.enter().append("g").classed("errorbar",!0),d&&q.style("opacity",0).transition().duration(p.duration).style("opacity",1),l.setClipUrl(r,k.layerClipId,a),r.each(function(D){var x=m.select(this),E=c.c2p(D.x),B=f.c2p(D.y);if(void 0!==D.yh){var t=f.c2p(D.yh);var G=f.c2p(D.ys);if(!h(G)){var I=!0;G=f.c2p(D.ys,!0)}}if(void 0!==D.xh){var L=c.c2p(D.xh);var M=c.c2p(D.xs);if(!h(M)){var N=!0;M=c.c2p(D.xs,!0)}}if(!y||D.vis){D=x.select("path.yerror");
if(v.visible&&h(E)&&h(t)&&h(G)){var H=v.width;E="M"+(E-H)+","+t+"h"+2*H+"m-"+H+",0V"+G;I||(E+="m-"+H+",0h"+2*H);(n=!D.size())?D=x.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(D=D.transition().duration(p.duration).ease(p.easing));D.attr("d",E)}else D.remove();I=x.select("path.xerror");u.visible&&h(B)&&h(L)&&h(M)?(t=(u.copy_ystyle?v:u).width,E="M"+L+","+(B-t)+"v"+2*t+"m0,-"+t+"H"+M,N||(E+="m0,-"+t+"v"+2*t),(n=!I.size())?I=x.append("path").style("vector-effect",
"non-scaling-stroke").classed("xerror",!0):d&&(I=I.transition().duration(p.duration).ease(p.easing)),I.attr("d",E)):I.remove()}}))})}},{"../../traces/scatter/subtypes":1179,"../drawing":637,d3:169,"fast-isnumeric":241}],645:[function(b,F,C){var m=b("d3"),h=b("../color");F.exports=function(l){l.each(function(e){var a=e[0].trace;e=a.error_y||{};a=a.error_x||{};var g=m.select(this);g.selectAll("path.yerror").style("stroke-width",e.thickness+"px").call(h.stroke,e.color);a.copy_ystyle&&(a=e);g.selectAll("path.xerror").style("stroke-width",
a.thickness+"px").call(h.stroke,a.color)})}},{"../color":615,d3:169}],646:[function(b,F,C){C=b("../../plots/font_attributes");var m=b("./layout_attributes").hoverlabel;b=b("../../lib/extend").extendFlat;F.exports={hoverlabel:{bgcolor:b({},m.bgcolor,{arrayOk:!0}),bordercolor:b({},m.bordercolor,{arrayOk:!0}),font:C({arrayOk:!0,editType:"none"}),align:b({},m.align,{arrayOk:!0}),namelength:b({},m.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":739,"../../plots/font_attributes":825,"./layout_attributes":656}],
647:[function(b,F,C){function m(e,a,g,k){k=k||h.identity;Array.isArray(e)&&(a[0][g]=k(e))}var h=b("../../lib"),l=b("../../registry");F.exports=function(e){function a(f){return function(d){return h.coerceHoverinfo({hoverinfo:d},{_module:f._module},k)}}var g=e.calcdata,k=e._fullLayout;for(e=0;e<g.length;e++){var p=g[e],n=p[0].trace;if(!l.traceIs(n,"pie-like")){var c=l.traceIs(n,"2dMap")?m:h.fillArray;c(n.hoverinfo,p,"hi",a(n));n.hovertemplate&&c(n.hovertemplate,p,"ht");n.hoverlabel&&(c(n.hoverlabel.bgcolor,
p,"hbg"),c(n.hoverlabel.bordercolor,p,"hbc"),c(n.hoverlabel.font.size,p,"hts"),c(n.hoverlabel.font.color,p,"htc"),c(n.hoverlabel.font.family,p,"htf"),c(n.hoverlabel.namelength,p,"hnl"),c(n.hoverlabel.align,p,"hta"))}}}},{"../../lib":749,"../../registry":880}],648:[function(b,F,C){var m=b("../../registry"),h=b("./hover").hover;F.exports=function(l,e,a){function g(){l.emit("plotly_click",{points:l._hoverdata,event:e})}var k=m.getComponentMethod("annotations","onClick")(l,l._hoverdata);void 0!==a&&h(l,
e,a,!0);l._hoverdata&&e&&e.target&&(k&&k.then?k.then(g):g(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":880,"./hover":652}],649:[function(b,F,C){F.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],650:[function(b,F,C){var m=b("../../lib"),h=b("./attributes"),l=b("./hoverlabel_defaults");F.exports=function(e,a,g,k){g=m.extendFlat({},k.hoverlabel);a.hovertemplate&&(g.namelength=-1);
l(e,a,function(p,n){return m.coerce(e,a,h,p,n)},g)}},{"../../lib":749,"./attributes":646,"./hoverlabel_defaults":653}],651:[function(b,F,C){function m(g,k){if(Array.isArray(k)){if(Array.isArray(g)&&Array.isArray(g[k[0]]))return g[k[0]][k[1]]}else return g[k]}var h=b("../../lib");C.getSubplot=function(g){return g.subplot||g.xaxis+g.yaxis||g.geo};C.isTraceInSubplots=function(g,k){if("splom"===g.type){var p=g.xaxes||[];g=g.yaxes||[];for(var n=0;n<p.length;n++)for(var c=0;c<g.length;c++)if(-1!==k.indexOf(p[n]+
g[c]))return!0;return!1}return-1!==k.indexOf(C.getSubplot(g))};C.flat=function(g,k){for(var p=Array(g.length),n=0;n<g.length;n++)p[n]=k;return p};C.p2c=function(g,k){for(var p=Array(g.length),n=0;n<g.length;n++)p[n]=g[n].p2c(k);return p};C.getDistanceFunction=function(g,k,p,n){return"closest"===g?n||C.quadrature(k,p):"x"===g.charAt(0)?k:p};C.getClosest=function(g,k,p){if(!1!==p.index)0<=p.index&&p.index<g.length?p.distance=0:p.index=!1;else for(var n=0;n<g.length;n++){var c=k(g[n]);c<=p.distance&&
(p.index=n,p.distance=c)}return p};C.inbox=function(g,k,p){return 0>g*k||0===g?p:Infinity};C.quadrature=function(g,k){return function(p){var n=g(p);p=k(p);return Math.sqrt(n*n+p*p)}};C.makeEventData=function(g,k,p){var n="index"in g?g.index:g.pointNumber,c={data:k._input,fullData:k,curveNumber:k.index,pointNumber:n};if(k._indexToPoints){var f=k._indexToPoints[n];1===f.length?c.pointIndex=f[0]:c.pointIndices=f}else c.pointIndex=n;k._module.eventData?c=k._module.eventData(c,g,k,p,n):("xVal"in g?c.x=
g.xVal:"x"in g&&(c.x=g.x),"yVal"in g?c.y=g.yVal:"y"in g&&(c.y=g.y),g.xa&&(c.xaxis=g.xa),g.ya&&(c.yaxis=g.ya),void 0!==g.zLabelVal&&(c.z=g.zLabelVal));C.appendArrayPointValue(c,k,n);return c};C.appendArrayPointValue=function(g,k,p){var n=k._arrayAttrs;if(n)for(var c=0;c<n.length;c++){var f=n[c],d=l[f]||f;void 0===g[d]&&(f=h.nestedProperty(k,f).get(),f=m(f,p),void 0!==f&&(g[d]=f))}};C.appendArrayMultiPointValues=function(g,k,p){var n=k._arrayAttrs;if(n)for(var c=0;c<n.length;c++){var f=n[c],d=l[f]||
f;if(void 0===g[d]){f=h.nestedProperty(k,f).get();for(var q=Array(p.length),r=0;r<p.length;r++)q[r]=m(f,p[r]);g[d]=q}}};var l={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"},e={x:!0,y:!0},a={"x unified":!0,"y unified":!0};C.isUnifiedHover=function(g){return"string"!==typeof g?!1:!!a[g]};C.isXYhover=function(g){return"string"!==typeof g?!1:!!e[g]}},{"../../lib":749}],652:[function(b,F,C){function m(P,V,Y,ba){function ea(nb,Da){for(Ja=0;Ja<Ca.length;Ja++)if((eb=
Ca[Ja])&&eb[0]&&eb[0].trace&&(La=eb[0].trace,!0===La.visible&&0!==La._length&&-1===["carpet","contourcarpet"].indexOf(La._module.name))){"splom"===La.type?(Wa=0,Ra=fa[Wa]):(Ra=t.getSubplot(La),Wa=fa.indexOf(Ra));Ea=sa;t.isUnifiedHover(Ea)&&(Ea=Ea.charAt(0));lb={cd:eb,trace:La,xa:ra[Wa],ya:ta[Wa],maxHoverDistance:ya,maxSpikeDistance:qa,index:!1,distance:Math.min(bb,ya),spikeDistance:Infinity,xSpike:void 0,ySpike:void 0,color:D.defaultLine,name:La.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,
yLabelVal:void 0,zLabelVal:void 0,text:void 0};ha[Ra]&&(lb.subplot=ha[Ra]._subplot);ha._splomScenes&&ha._splomScenes[La.uid]&&(lb.scene=ha._splomScenes[La.uid]);hb=xa.length;if("array"===Ea){var Ha=V[Ja];"pointNumber"in Ha?(lb.index=Ha.pointNumber,Ea="closest"):(Ea="","xval"in Ha&&(Ia=Ha.xval,Ea="x"),"yval"in Ha&&(Qa=Ha.yval,Ea=Ea?"closest":"y"))}else void 0!==nb&&void 0!==Da?(Ia=nb,Qa=Da):(Ia=Oa[Wa],Qa=fb[Wa]);if(0!==ya)if(La._module&&La._module.hoverPoints){if(Ha=La._module.hoverPoints(lb,Ia,Qa,
Ea,ha._hoverlayer))for(var ab,ib=0;ib<Ha.length;ib++)ab=Ha[ib],d(ab.x0)&&d(ab.y0)&&xa.push(k(ab,sa))}else r.log("Unrecognized trace type in hover:",La);"closest"===sa&&xa.length>hb&&(xa.splice(0,hb),bb=xa[0].distance);pa&&0!==qa&&0===xa.length&&(lb.distance=qa,lb.index=!1,(Ha=La._module.hoverPoints(lb,Ia,Qa,"closest",ha._hoverlayer))&&(Ha=Ha.filter(function(ob){return ob.spikeDistance<=qa})),Ha&&Ha.length)&&(ab=Ha.filter(function(ob){return ob.xa.showspikes&&"hovered data"!==ob.xa.spikesnap}),ab.length&&
(ab=ab[0],d(ab.x0)&&d(ab.y0)&&(ab=ia(ab),!Fa.vLinePoint||Fa.vLinePoint.spikeDistance>ab.spikeDistance))&&(Fa.vLinePoint=ab),Ha=Ha.filter(function(ob){return ob.ya.showspikes&&"hovered data"!==ob.ya.spikesnap}),Ha.length&&(Ha=Ha[0],d(Ha.x0)&&d(Ha.y0)&&(ab=ia(Ha),!Fa.hLinePoint||Fa.hLinePoint.spikeDistance>ab.spikeDistance))&&(Fa.hLinePoint=ab))}}function ca(nb,Da){for(var Ha=null,ab=Infinity,ib,ob=0;ob<nb.length;ob++)ib=nb[ob].spikeDistance,ib<=ab&&ib<=Da&&(Ha=nb[ob],ab=ib);return Ha}function ia(nb){return nb?
{xa:nb.xa,ya:nb.ya,x:void 0!==nb.xSpike?nb.xSpike:(nb.x0+nb.x1)/2,y:void 0!==nb.ySpike?nb.ySpike:(nb.y0+nb.y1)/2,distance:nb.distance,spikeDistance:nb.spikeDistance,curveNumber:nb.trace.index,color:nb.color,pointNumber:nb.index}:null}Y||(Y="xy");var fa=Array.isArray(Y)?Y:[Y],ha=P._fullLayout,na=ha._plots||[];Y=na[Y];var pa=ha._has("cartesian");Y&&(Y=Y.overlays.map(function(nb){return nb.id}),fa=fa.concat(Y));Y=fa.length;for(var ra=Array(Y),ta=Array(Y),oa=!1,ua=0;ua<Y;ua++){var ka=fa[ua];if(na[ka])oa=
!0,ra[ua]=na[ka].xaxis,ta[ua]=na[ka].yaxis;else if(ha[ka]&&ha[ka]._subplot)ka=ha[ka]._subplot,ra[ua]=ka.xaxis,ta[ua]=ka.yaxis;else{r.warn("Unrecognized subplot: "+ka);return}}var sa=V.hovermode||ha.hovermode;sa&&!oa&&(sa="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(sa)||!P.calcdata||P.querySelector(".zoombox")||P._dragging)return x.unhoverRaw(P,V);var ya=-1===ha.hoverdistance?Infinity:ha.hoverdistance,qa=-1===ha.spikedistance?Infinity:ha.spikedistance,xa=[],Ca=[],Ja,eb,Ra,
Wa,Ea,Ia,Qa,lb,hb,Fa={hLinePoint:null,vLinePoint:null};na=!1;if(Array.isArray(V))for(sa="array",ua=0;ua<V.length;ua++){if(eb=P.calcdata[V[ua].curveNumber||0]){var La=eb[0].trace;"skip"!==eb[0].trace.hoverinfo&&(Ca.push(eb),"h"===La.orientation&&(na=!0))}}else{for(Ja=0;Ja<P.calcdata.length;Ja++)eb=P.calcdata[Ja],La=eb[0].trace,"skip"!==La.hoverinfo&&t.isTraceInSubplots(La,fa)&&(Ca.push(eb),"h"===La.orientation&&(na=!0));if(V.target){if(!1===u.triggerHandler(P,"plotly_beforehover",V))return;oa=V.target.getBoundingClientRect();
Y=V.clientX-oa.left;oa=V.clientY-oa.top;if(0>Y||Y>ra[0]._length||0>oa||oa>ta[0]._length)return x.unhoverRaw(P,V)}else Y="xpx"in V?V.xpx:ra[0]._length/2,oa="ypx"in V?V.ypx:ta[0]._length/2;V.pointerX=Y+ra[0]._offset;V.pointerY=oa+ta[0]._offset;var Oa="xval"in V?t.flat(fa,V.xval):t.p2c(ra,Y);var fb="yval"in V?t.flat(fa,V.yval):t.p2c(ta,oa);if(!d(Oa[0])||!d(fb[0]))return r.warn("Fx.hover failed",V,P),x.unhoverRaw(P,V)}var bb=Infinity;ea();Y={fullLayout:ha,container:ha._hoverlayer,outerContainer:ha._paperdiv,
event:V};P._spikepoints={vLinePoint:Fa.vLinePoint,hLinePoint:Fa.hLinePoint};pa&&0!==qa&&0!==xa.length&&(oa=xa.filter(function(nb){return nb.ya.showspikes}),oa=ca(oa,qa),Fa.hLinePoint=ia(oa),oa=xa.filter(function(nb){return nb.xa.showspikes}),oa=ca(oa,qa),Fa.vLinePoint=ia(oa));if(0===xa.length)return ba=x.unhoverRaw(P,V),!pa||null===Fa.hLinePoint&&null===Fa.vLinePoint||p(P,Fa,Y),ba;pa&&p(P,Fa,Y);xa.sort(function(nb,Da){return nb.distance-Da.distance});if(t.isXYhover(Ea)&&0!==xa[0].length&&"splom"!==
xa[0].trace.type){Y=xa[0];oa=Y.cd[Y.index];ua="group"===ha.boxmode||"group"===ha.violinmode;ka=Y.xVal;var Pa=Y.xa;"category"===Pa.type&&(ka=Pa._categoriesMap[ka]);"date"===Pa.type&&(ka=Pa.d2c(ka));oa&&oa.t&&oa.t.posLetter===Pa._id&&ua&&(ka+=oa.t.dPos);var Ta=Y.yVal;Pa=Y.ya;"category"===Pa.type&&(Ta=Pa._categoriesMap[Ta]);"date"===Pa.type&&(Ta=Pa.d2c(Ta));oa&&oa.t&&oa.t.posLetter===Pa._id&&ua&&(Ta+=oa.t.dPos);ea(ka,Ta);var Ya={};xa=xa.filter(function(nb){nb=h(nb);if(!Ya[nb])return Ya[nb]=!0,Ya[nb]})}Y=
P._hoverdata;oa=[];for(ua=0;ua<xa.length;ua++)ka=xa[ua],Pa=t.makeEventData(ka,ka.trace,ka.cd),!1!==ka.hovertemplate&&(Ta=!1,ka.cd[ka.index]&&ka.cd[ka.index].ht&&(Ta=ka.cd[ka.index].ht),ka.hovertemplate=Ta||ka.trace.hovertemplate||!1),ka.eventData=[Pa],oa.push(Pa);P._hoverdata=oa;na="y"===sa&&(1<Ca.length||1<xa.length)||"closest"===sa&&na&&1<xa.length;ua=D.combine(ha.plot_bgcolor||D.background,ha.paper_bgcolor);ua=l(xa,{hovermode:sa,rotateLabels:na,bgColor:ua,container:ha._hoverlayer,outerContainer:ha._paperdiv,
commonLabelOpts:ha.hoverlabel,hoverdistance:ha.hoverdistance},P);t.isUnifiedHover(sa)||(a(ua,na?"xa":"ya",ha),g(ua,na));V.target&&V.target.tagName&&(na=B.getComponentMethod("annotations","hasClickToShow")(P,oa),w(f.select(V.target),na?"pointer":""));V.target&&!ba&&n(P,V,Y)&&(Y&&P.emit("plotly_unhover",{event:V,points:Y}),P.emit("plotly_hover",{event:V,points:P._hoverdata,xaxes:ra,yaxes:ta,xvals:Oa,yvals:fb}))}function h(P){return[P.trace.index,P.index,P.x0,P.y0,P.name,P.attr,P.xa,P.ya||""].join()}
function l(P,V,Y){function ba(Ia){return Ia.filter(function(Qa){return void 0!==Qa.zLabelVal||(Qa[sa]||"").split(" ")[0]===qa})}var ea=Y._fullLayout,ca=V.hovermode,ia=V.rotateLabels,fa=V.bgColor,ha=V.container,na=V.outerContainer,pa=V.commonLabelOpts||{},ra=V.fontFamily||G.HOVERFONT,ta=V.fontSize||G.HOVERFONTSIZE,oa=P[0],ua=oa.xa,ka=oa.ya,sa="y"===ca.charAt(0)?"yLabel":"xLabel",ya=oa[sa],qa=(String(ya)||"").split(" ")[0];na=na.node().getBoundingClientRect();var xa=na.top,Ca=na.width,Ja=na.height,
eb=void 0!==ya&&oa.distance<=V.hoverdistance&&("x"===ca||"y"===ca);if(eb){na=!0;var Ra,Wa;for(Ra=0;Ra<P.length;Ra++)if(na&&void 0===P[Ra].zLabel&&(na=!1),Wa=P[Ra].hoverinfo||P[Ra].trace.hoverinfo)if(Wa=Array.isArray(Wa)?Wa:Wa.split("+"),-1===Wa.indexOf("all")&&-1===Wa.indexOf(ca)){eb=!1;break}na&&(eb=!1)}na=ha.selectAll("g.axistext").data(eb?[0]:[]);na.enter().append("g").classed("axistext",!0);na.exit().remove();na.each(function(){var Ia=f.select(this),Qa=r.ensureSingle(Ia,"path","",function(nb){nb.style({"stroke-width":"1px"})}),
lb=r.ensureSingle(Ia,"text","",function(nb){nb.attr("data-notex",1)}),hb=pa.bgcolor||D.defaultLine,Fa=pa.bordercolor||D.contrast(hb),La=D.contrast(hb),Oa={family:pa.font.family||ra,size:pa.font.size||ta,color:pa.font.color||La};Qa.style({fill:hb,stroke:Fa});lb.text(ya).call(y.font,Oa).call(v.positionText,0,0).call(v.convertToTspans,Y);Ia.attr("transform","");var fb=lb.node().getBoundingClientRect();if("x"===ca)La="top"===ua.side?"-":"",lb.attr("text-anchor","middle").call(v.positionText,0,"top"===
ua.side?xa-fb.bottom-O-Q:xa-fb.top+O+Q),hb=ua._offset+(oa.x0+oa.x1)/2,Fa=ka._offset+("top"===ua.side?0:ka._length),lb=fb.width/2+Q,hb<lb?(hb=lb,Qa.attr("d","M-"+(lb-O)+",0L-"+(lb-2*O)+","+La+O+"H"+(Q+fb.width/2)+"v"+La+(2*Q+fb.height)+"H-"+lb+"V"+La+O+"Z")):hb>ea.width-lb?(hb=ea.width-lb,Qa.attr("d","M"+(lb-O)+",0L"+lb+","+La+O+"v"+La+(2*Q+fb.height)+"H-"+lb+"V"+La+O+"H"+(lb-2*O)+"Z")):Qa.attr("d","M0,0L"+O+","+La+O+"H"+(Q+fb.width/2)+"v"+La+(2*Q+fb.height)+"H-"+(Q+fb.width/2)+"V"+La+O+"H-"+O+"Z");
else{if("right"===ka.side){La="start";var bb=1;var Pa="";hb=ua._offset+ua._length}else La="end",bb=-1,Pa="-",hb=ua._offset;Fa=ka._offset+(oa.y0+oa.y1)/2;lb.attr("text-anchor",La);Qa.attr("d","M0,0L"+Pa+O+","+O+"V"+(Q+fb.height/2)+"h"+Pa+(2*Q+fb.width)+"V-"+(Q+fb.height/2)+"H"+Pa+O+"V-"+O+"Z");var Ta=fb.height/2;Pa=xa-fb.top-Ta;Qa="clip"+ea._uid+"commonlabel"+ka._id;if(hb<fb.width+2*Q+O){bb="M-"+(O+Q)+"-"+Ta+"h-"+(fb.width-Q)+"V"+Ta+"h"+(fb.width-Q)+"Z";var Ya=fb.width-hb+Q;v.positionText(lb,Ya,Pa);
"end"===La&&lb.selectAll("tspan").each(function(){var nb=f.select(this),Da=y.tester.append("text").text(nb.text()).call(y.font,Oa),Ha=Da.node().getBoundingClientRect();Math.round(Ha.width)<Math.round(fb.width)&&nb.attr("x",Ya-Ha.width);Da.remove()})}else v.positionText(lb,bb*(Q+O),Pa),bb=null;La=ea._topclips.selectAll("#"+Qa).data(bb?[0]:[]);La.enter().append("clipPath").attr("id",Qa).append("path");La.exit().remove();La.select("path").attr("d",bb);y.setClipUrl(lb,bb?Qa:null,Y)}Ia.attr("transform",
"translate("+hb+","+Fa+")");P=ba(P)});if(t.isUnifiedHover(ca)){ha.selectAll("g.hovertext").remove();void 0!==ya&&oa.distance<=V.hoverdistance&&(P=ba(P));if(0===P.length)return;V={};I({showlegend:!0,legend:{title:{text:ya,font:ea.hoverlabel.font},font:ea.hoverlabel.font,bgcolor:ea.hoverlabel.bgcolor,bordercolor:ea.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ea.legend?ea.legend.traceorder:void 0,orientation:"v"}},V,Y._fullData);V=V.legend;V.entries=[];for(na=0;na<P.length;na++){Wa=
e(P[na],!0,ca,ea,ya);Ra=Wa[0];var Ea=Wa[1];Wa=P[na];Wa.name=Ea;Wa.text=""!==Ea?Ea+" : "+Ra:Ra;if(Ra=Wa.cd[Wa.index])Ra.mc&&(Wa.mc=Ra.mc),Ra.mcc&&(Wa.mc=Ra.mcc),Ra.mlc&&(Wa.mlc=Ra.mlc),Ra.mlcc&&(Wa.mlc=Ra.mlcc),Ra.mlw&&(Wa.mlw=Ra.mlw),Ra.mrc&&(Wa.mrc=Ra.mrc),Ra.dir&&(Wa.dir=Ra.dir);Wa._distinct=!0;V.entries.push([Wa])}V.entries.sort(function(Ia,Qa){return Ia[0].trace.index-Qa[0].trace.index});V.layer=ha;L(Y,V);V=r.mean(P.map(function(Ia){return(Ia.y0+Ia.y1)/2}));na=r.mean(P.map(function(Ia){return(Ia.x0+
Ia.x1)/2}));ha=ha.select("g.legend");Ra=ha.node().getBoundingClientRect();na+=ua._offset;V+=ka._offset-Ra.height/2;Wa=Ra.width+2*Q;na=!(na+Wa<=Ca)&&0<=na-Wa?na-Wa:na+2*Q;Ra=Ra.height+2*Q;Wa=V+Ra>=Ja;Ra<=Ja&&(V<=xa?V=ka._offset+2*Q:Wa&&(V=Ja-Ra));ha.attr("transform","translate("+na+","+V+")");return ha}ha=ha.selectAll("g.hovertext").data(P,function(Ia){return h(Ia)});ha.enter().append("g").classed("hovertext",!0).each(function(){var Ia=f.select(this);Ia.append("rect").call(D.fill,D.addOpacity(fa,.8));
Ia.append("text").classed("name",!0);Ia.append("path").style("stroke-width","1px");Ia.append("text").classed("nums",!0).call(y.font,ra,ta)});ha.exit().remove();ha.each(function(Ia){var Qa=f.select(this).attr("transform",""),lb=Ia.bgcolor||Ia.color,hb=D.combine(D.opacity(lb)?lb:D.defaultLine,fa),Fa=D.combine(D.opacity(Ia.color)?Ia.color:D.defaultLine,fa),La=Ia.borderColor||D.contrast(hb);lb=e(Ia,eb,ca,ea,ya,Qa);var Oa=lb[0],fb=lb[1];lb=Qa.select("text.nums").call(y.font,Ia.fontFamily||ra,Ia.fontSize||
ta,Ia.fontColor||La).text(Oa).attr("data-notex",1).call(v.positionText,0,0).call(v.convertToTspans,Y);var bb=Qa.select("text.name"),Pa=0,Ta=0;fb&&fb!==Oa?(bb.call(y.font,Ia.fontFamily||ra,Ia.fontSize||ta,Fa).text(fb).attr("data-notex",1).call(v.positionText,0,0).call(v.convertToTspans,Y),Ta=bb.node().getBoundingClientRect(),Pa=Ta.width+2*Q,Ta=Ta.height+2*Q):(bb.remove(),Qa.select("rect").remove());Qa.select("path").style({fill:hb,stroke:La});var Ya=lb.node().getBoundingClientRect();hb=Ia.xa._offset+
(Ia.x0+Ia.x1)/2;La=Ia.ya._offset+(Ia.y0+Ia.y1)/2;Fa=Math.abs(Ia.x1-Ia.x0);Oa=Math.abs(Ia.y1-Ia.y0);fb=Ya.width+O+Q+Pa;Ia.ty0=xa-Ya.top;Ia.bx=Ya.width+2*Q;Ia.by=Math.max(Ya.height+2*Q,Ta);Ia.anchor="start";Ia.txwidth=Ya.width;Ia.tx2width=Pa;Ia.offset=0;ia?(Ia.pos=hb,Ta=La+Oa/2+fb<=Ja,("top"===Ia.idealAlign||!Ta)&&0<=La-Oa/2-fb?(La-=Oa/2,Ia.anchor="end"):Ta?(La+=Oa/2,Ia.anchor="start"):Ia.anchor="middle"):(Ia.pos=La,Ta=hb+Fa/2+fb<=Ca,("left"===Ia.idealAlign||!Ta)&&0<=hb-Fa/2-fb?(hb-=Fa/2,Ia.anchor=
"end"):Ta?(hb+=Fa/2,Ia.anchor="start"):(Ia.anchor="middle",Fa=fb/2,Ta=hb+Fa-Ca,Fa=hb-Fa,0<Ta&&(hb-=Ta),0>Fa&&(hb+=-Fa)));lb.attr("text-anchor",Ia.anchor);Pa&&bb.attr("text-anchor",Ia.anchor);Qa.attr("transform","translate("+hb+","+La+")"+(ia?"rotate("+M+")":""))});return ha}function e(P,V,Y,ba,ea,ca){var ia="",fa="";void 0!==P.nameOverride&&(P.name=P.nameOverride);P.name&&(P.trace._meta&&(P.name=r.templateString(P.name,P.trace._meta)),ia=c(P.name,P.nameLength));void 0!==P.zLabel?(void 0!==P.xLabel&&
(fa+="x: "+P.xLabel+"\x3cbr\x3e"),void 0!==P.yLabel&&(fa+="y: "+P.yLabel+"\x3cbr\x3e"),"choropleth"!==P.trace.type&&"choroplethmapbox"!==P.trace.type&&(fa+=(fa?"z: ":"")+P.zLabel)):V&&P[Y.charAt(0)+"Label"]===ea?fa=P[("x"===Y.charAt(0)?"y":"x")+"Label"]||"":void 0===P.xLabel?void 0!==P.yLabel&&"scattercarpet"!==P.trace.type&&(fa=P.yLabel):fa=void 0===P.yLabel?P.xLabel:"("+P.xLabel+", "+P.yLabel+")";!P.text&&0!==P.text||Array.isArray(P.text)||(fa+=(fa?"\x3cbr\x3e":"")+P.text);void 0!==P.extraText&&
(fa+=(fa?"\x3cbr\x3e":"")+P.extraText);ca&&""===fa&&!P.hovertemplate&&(""===ia&&ca.remove(),fa=ia);V=ba._d3locale;Y=P.hovertemplate||!1;ba=P.hovertemplateLabels||P;ea=P.eventData[0]||{};Y&&(fa=r.hovertemplateString(Y,ba,V,ea,P.trace._meta),fa=fa.replace(U,function(ha,na){ia=c(na,P.nameLength);return""}));return[fa,ia]}function a(P,V,Y){function ba(qa){var xa=qa[0],Ca=qa[qa.length-1];pa=xa.pmin-xa.pos-xa.dp+xa.size;ra=Ca.pos+Ca.dp+Ca.size-xa.pmax;if(.01<pa){for(oa=qa.length-1;0<=oa;oa--)qa[oa].dp+=
pa;na=!1}if(!(.01>ra)){if(-.01>pa){for(oa=qa.length-1;0<=oa;oa--)qa[oa].dp-=ra;na=!1}if(na){for(ta=Ca=0;ta<qa.length;ta++)ua=qa[ta],ua.pos+ua.dp+ua.size>xa.pmax&&Ca++;for(ta=qa.length-1;0<=ta&&!(0>=Ca);ta--)ua=qa[ta],ua.pos>xa.pmax-1&&(ua.del=!0,Ca--);for(ta=0;ta<qa.length&&!(0>=Ca);ta++)if(ua=qa[ta],ua.pos<xa.pmin+1)for(ua.del=!0,Ca--,ra=2*ua.size,oa=qa.length-1;0<=oa;oa--)qa[oa].dp-=ra;for(ta=qa.length-1;0<=ta&&!(0>=Ca);ta--)ua=qa[ta],ua.pos+ua.dp+ua.size>xa.pmax&&(ua.del=!0,Ca--)}}}var ea=0,ca=
1,ia=P.size(),fa=Array(ia),ha=0;P.each(function(qa){var xa=qa[V],Ca="x"===xa._id.charAt(0);xa=xa.range;0===ha&&xa&&xa[0]>xa[1]!==Ca&&(ca=-1);fa[ha++]=[{datum:qa,traceIndex:qa.trace.index,dp:0,pos:qa.pos,posref:qa.posref,size:qa.by*(Ca?N:1)/2,pmin:0,pmax:Ca?Y.width:Y.height}]});fa.sort(function(qa,xa){return qa[0].posref-xa[0].posref||ca*(xa[0].traceIndex-qa[0].traceIndex)});for(var na,pa,ra,ta,oa,ua,ka;!na&&ea<=ia;){ea++;na=!0;for(ta=0;ta<fa.length-1;){P=fa[ta];ka=fa[ta+1];var sa=P[P.length-1],ya=
ka[0];pa=sa.pos+sa.dp+sa.size-ya.pos-ya.dp+ya.size;if(.01<pa&&sa.pmin===ya.pmin&&sa.pmax===ya.pmax){for(oa=ka.length-1;0<=oa;oa--)ka[oa].dp+=pa;P.push.apply(P,ka);fa.splice(ta+1,1);ka=0;for(oa=P.length-1;0<=oa;oa--)ka+=P[oa].dp;ra=ka/P.length;for(oa=P.length-1;0<=oa;oa--)P[oa].dp-=ra;na=!1}else ta++}fa.forEach(ba)}for(ta=fa.length-1;0<=ta;ta--)for(ea=fa[ta],oa=ea.length-1;0<=oa;oa--)ia=ea[oa],P=ia.datum,P.offset=ia.dp,P.del=ia.del}function g(P,V){P.each(function(Y){var ba=f.select(this);if(Y.del)return ba.remove();
var ea=ba.select("text.nums"),ca=Y.anchor,ia="end"===ca?-1:1,fa={start:1,end:-1,middle:0}[ca],ha=fa*(O+Q),na=ha+fa*(Y.txwidth+Q),pa=0,ra=Y.offset;"middle"===ca&&(ha-=Y.tx2width/2,na+=Y.txwidth/2+Q);V&&(ra*=-J,pa=Y.offset*H);ba.select("path").attr("d","middle"===ca?"M-"+(Y.bx/2+Y.tx2width/2)+","+(ra-Y.by/2)+"h"+Y.bx+"v"+Y.by+"h-"+Y.bx+"Z":"M0,0L"+(ia*O+pa)+","+(O+ra)+"v"+(Y.by/2-O)+"h"+ia*Y.bx+"v-"+Y.by+"H"+(ia*O+pa)+"V"+(ra-O)+"Z");ia=ha+pa;ha=ra+Y.ty0-Y.by/2+Q;var ta=Y.textAlign||"auto";"auto"!==
ta&&("left"===ta&&"start"!==ca?(ea.attr("text-anchor","start"),ia="middle"===ca?-Y.bx/2-Y.tx2width/2+Q:-Y.bx-Q):"right"===ta&&"end"!==ca&&(ea.attr("text-anchor","end"),ia="middle"===ca?Y.bx/2-Y.tx2width/2-Q:Y.bx+Q));ea.call(v.positionText,ia,ha);Y.tx2width&&(ba.select("text.name").call(v.positionText,na+fa*Q+pa,ra+Y.ty0-Y.by/2+Q),ba.select("rect").call(y.setRect,na+(fa-1)*Y.tx2width/2+pa,ra-Y.by/2-1,Y.tx2width,Y.by+2))})}function k(P,V){function Y(pa){return pa||d(pa)&&0===pa}function ba(pa,ra,ta){ra=
ha(ra,ta);Y(ra)&&(P[pa]=ra)}var ea=P.index,ca=P.trace||{},ia=P.cd[0],fa=P.cd[ea]||{},ha=Array.isArray(ea)?function(pa,ra){pa=r.castOption(ia,ea,pa);return Y(pa)?pa:r.extractOption({},ca,"",ra)}:function(pa,ra){return r.extractOption(fa,ca,pa,ra)};ba("hoverinfo","hi","hoverinfo");ba("bgcolor","hbg","hoverlabel.bgcolor");ba("borderColor","hbc","hoverlabel.bordercolor");ba("fontFamily","htf","hoverlabel.font.family");ba("fontSize","hts","hoverlabel.font.size");ba("fontColor","htc","hoverlabel.font.color");
ba("nameLength","hnl","hoverlabel.namelength");ba("textAlign","hta","hoverlabel.align");P.posref="y"===V||"closest"===V&&"h"===ca.orientation?P.xa._offset+(P.x0+P.x1)/2:P.ya._offset+(P.y0+P.y1)/2;P.x0=r.constrain(P.x0,0,P.xa._length);P.x1=r.constrain(P.x1,0,P.xa._length);P.y0=r.constrain(P.y0,0,P.ya._length);P.y1=r.constrain(P.y1,0,P.ya._length);void 0!==P.xLabelVal&&(P.xLabel="xLabel"in P?P.xLabel:E.hoverLabelText(P.xa,P.xLabelVal),P.xVal=P.xa.c2d(P.xLabelVal));void 0!==P.yLabelVal&&(P.yLabel="yLabel"in
P?P.yLabel:E.hoverLabelText(P.ya,P.yLabelVal),P.yVal=P.ya.c2d(P.yLabelVal));void 0!==P.zLabelVal&&void 0===P.zLabel&&(P.zLabel=String(P.zLabelVal));if(!(isNaN(P.xerr)||"log"===P.xa.type&&0>=P.xerr)){var na=E.tickText(P.xa,P.xa.c2l(P.xerr),"hover").text;P.xLabel=void 0!==P.xerrneg?P.xLabel+(" +"+na+" / -"+E.tickText(P.xa,P.xa.c2l(P.xerrneg),"hover").text):P.xLabel+("  "+na);"x"===V&&(P.distance+=1)}isNaN(P.yerr)||"log"===P.ya.type&&0>=P.yerr||(na=E.tickText(P.ya,P.ya.c2l(P.yerr),"hover").text,P.yLabel=
void 0!==P.yerrneg?P.yLabel+(" +"+na+" / -"+E.tickText(P.ya,P.ya.c2l(P.yerrneg),"hover").text):P.yLabel+("  "+na),"y"===V&&(P.distance+=1));(V=P.hoverinfo||P.trace.hoverinfo)&&"all"!==V&&(V=Array.isArray(V)?V:V.split("+"),-1===V.indexOf("x")&&(P.xLabel=void 0),-1===V.indexOf("y")&&(P.yLabel=void 0),-1===V.indexOf("z")&&(P.zLabel=void 0),-1===V.indexOf("text")&&(P.text=void 0),-1===V.indexOf("name")&&(P.name=void 0));return P}function p(P,V,Y){var ba=Y.container,ea=Y.fullLayout,ca=ea._size;Y=Y.event;
var ia=!!V.hLinePoint,fa=!!V.vLinePoint;ba.selectAll(".spikeline").remove();if(fa||ia){ea=D.combine(ea.plot_bgcolor,ea.paper_bgcolor);if(ia){var ha=V.hLinePoint;var na=ha&&ha.xa;ia=ha&&ha.ya;if("cursor"===ia.spikesnap){var pa=Y.pointerX;na=Y.pointerY}else pa=na._offset+ha.x,na=ia._offset+ha.y;var ra=1.5>q.readability(ha.color,ea)?D.contrast(ea):ha.color;ha=ia.spikemode;var ta=ia.spikethickness;ra=ia.spikecolor||ra;var oa=E.getPxPosition(P,ia);if(-1!==ha.indexOf("toaxis")||-1!==ha.indexOf("across")){if(-1!==
ha.indexOf("toaxis")){var ua=oa;var ka=pa}-1!==ha.indexOf("across")&&(ua=ia._counterDomainMin,ka=ia._counterDomainMax,"free"===ia.anchor&&(ua=Math.min(ua,ia.position),ka=Math.max(ka,ia.position)),ua=ca.l+ua*ca.w,ka=ca.l+ka*ca.w);ba.insert("line",":first-child").attr({x1:ua,x2:ka,y1:na,y2:na,"stroke-width":ta,stroke:ra,"stroke-dasharray":y.dashStyle(ia.spikedash,ta)}).classed("spikeline",!0).classed("crisp",!0);ba.insert("line",":first-child").attr({x1:ua,x2:ka,y1:na,y2:na,"stroke-width":ta+2,stroke:ea}).classed("spikeline",
!0).classed("crisp",!0)}-1!==ha.indexOf("marker")&&ba.insert("circle",":first-child").attr({cx:oa+("right"!==ia.side?ta:-ta),cy:na,r:ta,fill:ra}).classed("spikeline",!0)}if(fa){na=(fa=V.vLinePoint)&&fa.xa;ia=fa&&fa.ya;"cursor"===na.spikesnap?(V=Y.pointerX,ia=Y.pointerY):(V=na._offset+fa.x,ia=ia._offset+fa.y);ua=1.5>q.readability(fa.color,ea)?D.contrast(ea):fa.color;Y=na.spikemode;fa=na.spikethickness;ua=na.spikecolor||ua;P=E.getPxPosition(P,na);if(-1!==Y.indexOf("toaxis")||-1!==Y.indexOf("across")){if(-1!==
Y.indexOf("toaxis")){var sa=P;var ya=ia}-1!==Y.indexOf("across")&&(ya=na._counterDomainMin,sa=na._counterDomainMax,"free"===na.anchor&&(ya=Math.min(ya,na.position),sa=Math.max(sa,na.position)),sa=ca.t+(1-sa)*ca.h,ya=ca.t+(1-ya)*ca.h);ba.insert("line",":first-child").attr({x1:V,x2:V,y1:sa,y2:ya,"stroke-width":fa,stroke:ua,"stroke-dasharray":y.dashStyle(na.spikedash,fa)}).classed("spikeline",!0).classed("crisp",!0);ba.insert("line",":first-child").attr({x1:V,x2:V,y1:sa,y2:ya,"stroke-width":fa+2,stroke:ea}).classed("spikeline",
!0).classed("crisp",!0)}-1!==Y.indexOf("marker")&&ba.insert("circle",":first-child").attr({cx:V,cy:P-("top"!==na.side?fa:-fa),r:fa,fill:ua}).classed("spikeline",!0)}}}function n(P,V,Y){if(!Y||Y.length!==P._hoverdata.length)return!0;for(V=Y.length-1;0<=V;V--){var ba=Y[V],ea=P._hoverdata[V];if(ba.curveNumber!==ea.curveNumber||String(ba.pointNumber)!==String(ea.pointNumber)||String(ba.pointNumbers)!==String(ea.pointNumbers))return!0}return!1}function c(P,V){return v.plainText(P||"",{len:V,allowedTags:"br sub sup b i em".split(" ")})}
var f=b("d3"),d=b("fast-isnumeric"),q=b("tinycolor2"),r=b("../../lib"),u=b("../../lib/events"),v=b("../../lib/svg_text_utils"),w=b("../../lib/override_cursor"),y=b("../drawing"),D=b("../color"),x=b("../dragelement"),E=b("../../plots/cartesian/axes"),B=b("../../registry"),t=b("./helpers"),G=b("./constants"),I=b("../legend/defaults"),L=b("../legend/draw"),M=G.YANGLE;b=Math.PI*M/180;var N=1/Math.sin(b),H=Math.cos(b),J=Math.sin(b),O=G.HOVERARROWSIZE,Q=G.HOVERTEXTPAD;C.hover=function(P,V,Y,ba){P=r.getGraphDiv(P);
r.throttle(P._fullLayout._uid+G.HOVERID,G.HOVERMINTIME,function(){m(P,V,Y,ba)})};C.loneHover=function(P,V){var Y=!0;Array.isArray(P)||(Y=!1,P=[P]);P=P.map(function(fa){return{color:fa.color||D.defaultLine,x0:fa.x0||fa.x||0,x1:fa.x1||fa.x||0,y0:fa.y0||fa.y||0,y1:fa.y1||fa.y||0,xLabel:fa.xLabel,yLabel:fa.yLabel,zLabel:fa.zLabel,text:fa.text,name:fa.name,idealAlign:fa.idealAlign,borderColor:fa.borderColor,fontFamily:fa.fontFamily,fontSize:fa.fontSize,fontColor:fa.fontColor,nameLength:fa.nameLength,textAlign:fa.textAlign,
trace:fa.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:fa.hovertemplate||!1,eventData:fa.eventData||!1,hovertemplateLabels:fa.hovertemplateLabels||!1}});var ba=f.select(V.container),ea=V.outerContainer?f.select(V.outerContainer):ba;ba={hovermode:"closest",rotateLabels:!1,bgColor:V.bgColor||D.background,container:ba,outerContainer:ea};P=l(P,ba,V.gd);var ca=0,ia=0;P.sort(function(fa,ha){return fa.y0-ha.y0}).each(function(fa,ha){var na=fa.y0-fa.by/2;fa.offset=na-5<
ca?ca-na+5:0;ca=na+fa.by+fa.offset;ha===V.anchorIndex&&(ia=fa.offset)}).each(function(fa){fa.offset-=ia});g(P,ba.rotateLabels);return Y?P:P.node()};var U=/<extra>([\s\S]*)<\/extra>/},{"../../lib":749,"../../lib/events":738,"../../lib/override_cursor":760,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"../legend/defaults":667,"../legend/draw":668,"./constants":649,"./helpers":651,d3:169,"fast-isnumeric":241,
tinycolor2:548}],653:[function(b,F,C){var m=b("../../lib"),h=b("../color"),l=b("./helpers").isUnifiedHover;F.exports=function(e,a,g,k){function p(n){k.font[n]||(k.font[n]=a.legend?a.legend.font[n]:a.font[n])}k=k||{};a&&l(a.hovermode)&&(k.font||(k.font={}),p("size"),p("family"),p("color"),a.legend?(k.bgcolor||(k.bgcolor=h.combine(a.legend.bgcolor,a.paper_bgcolor)),k.bordercolor||(k.bordercolor=a.legend.bordercolor)):k.bgcolor||(k.bgcolor=a.paper_bgcolor));g("hoverlabel.bgcolor",k.bgcolor);g("hoverlabel.bordercolor",
k.bordercolor);g("hoverlabel.namelength",k.namelength);m.coerceFont(g,"hoverlabel.font",k.font);g("hoverlabel.align",k.align)}},{"../../lib":749,"../color":615,"./helpers":651}],654:[function(b,F,C){function m(e,a){a=a._scatterStackOpts||{};for(var g=0;g<e.length;g++){var k=e[g],p=(a[k.xaxis+k.yaxis]||{})[k.stackgroup]||{};if("h"!==k.orientation&&"h"!==p.orientation)return!1}return!0}var h=b("../../lib"),l=b("./layout_attributes");F.exports=function(e,a,g){function k(n,c){return void 0!==a[n]?a[n]:
h.coerce(e,a,l,n,c)}var p=k("clickmode");a._has("cartesian")?-1<p.indexOf("select")?g="closest":(a._isHoriz=m(g,a),g=a._isHoriz?"y":"x"):g="closest";return k("hovermode",g)}},{"../../lib":749,"./layout_attributes":656}],655:[function(b,F,C){var m=b("d3"),h=b("../../lib");C=b("../dragelement");var l=b("./helpers"),e=b("./layout_attributes"),a=b("./hover");F.exports={moduleType:"component",name:"fx",constants:b("./constants"),schema:{layout:e},attributes:b("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:b("./layout_global_defaults"),
supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),getDistanceFunction:l.getDistanceFunction,getClosest:l.getClosest,inbox:l.inbox,quadrature:l.quadrature,appendArrayPointValue:l.appendArrayPointValue,castHoverOption:function(g,k,p){return h.castOption(g,k,"hoverlabel."+p)},castHoverinfo:function(g,k,p){return h.castOption(g,p,"hoverinfo",function(n){return h.coerceHoverinfo({hoverinfo:n},{_module:g._module},k)})},hover:a.hover,unhover:C.unhover,loneHover:a.loneHover,
loneUnhover:function(g){g=h.isD3Selection(g)?g:m.select(g);g.selectAll("g.hovertext").remove();g.selectAll(".spikeline").remove()},click:b("./click")}},{"../../lib":749,"../dragelement":634,"./attributes":646,"./calc":647,"./click":648,"./constants":649,"./defaults":650,"./helpers":651,"./hover":652,"./layout_attributes":656,"./layout_defaults":657,"./layout_global_defaults":658,d3:169}],656:[function(b,F,C){C=b("./constants");b=b("../../plots/font_attributes")({editType:"none"});b.family.dflt=C.HOVERFONT;
b.size.dflt=C.HOVERFONTSIZE;F.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},
spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":825,"./constants":649}],657:[function(b,
F,C){var m=b("../../lib"),h=b("./helpers").isUnifiedHover,l=b("./layout_attributes"),e=b("./hovermode_defaults"),a=b("./hoverlabel_defaults");F.exports=function(g,k,p){function n(d,q){return m.coerce(g,k,l,d,q)}if(p=e(g,k,p))n("hoverdistance"),n("spikedistance",h(p)?-1:void 0);"select"===n("dragmode")&&n("selectdirection");p=k._has("mapbox");var c=k._has("geo"),f=k._basePlotModules.length;"zoom"===k.dragmode&&((p||c)&&1===f||p&&c&&2===f)&&(k.dragmode="pan");a(g,k,n)}},{"../../lib":749,"./helpers":651,
"./hoverlabel_defaults":653,"./hovermode_defaults":654,"./layout_attributes":656}],658:[function(b,F,C){var m=b("../../lib"),h=b("./hoverlabel_defaults"),l=b("./layout_attributes");F.exports=function(e,a){h(e,a,function(g,k){return m.coerce(e,a,l,g,k)})}},{"../../lib":749,"./hoverlabel_defaults":653,"./layout_attributes":656}],659:[function(b,F,C){function m(n,c,f){c=c[f+"axes"];n=Object.keys((n._splomAxes||{})[f]||{});if(Array.isArray(c))return c;if(n.length)return n}function h(n,c,f,d,q,r){f=c(n+
"gap",f);var u=c("domain."+n);c(n+"side",d);n=Array(q);c=u[0];u=(u[1]-c)/(q-f);f=u*(1-f);for(d=0;d<q;d++){var v=c+u*d;n[r?q-1-d:d]=[v,v+f]}return n}function l(n,c,f,d,q){function r(w,y){-1!==c.indexOf(y)&&void 0===d[y]?(u[w]=y,d[y]=w):u[w]=""}var u=Array(f),v;if(Array.isArray(n))for(v=0;v<f;v++)r(v,n[v]);else for(r(0,q),v=1;v<f;v++)r(v,q+(v+1));return u}var e=b("../../lib");C=b("../../lib/regex").counter;var a=b("../../plots/domain").attributes,g=b("../../plots/cartesian/constants").idRegex,k=b("../../plot_api/plot_template"),
p={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[C("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[g.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",
freeLength:!0,items:{valType:"enumerated",values:[g.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left",
"left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};F.exports={moduleType:"component",name:"grid",schema:{layout:{grid:p}},layoutAttributes:p,sizeDefaults:function(n,c){function f(t,G){return e.coerce(d,x,p,t,G)}var d=n.grid||{},q=m(c,d,"x"),r=m(c,d,"y");if(n.grid||q||r){n=Array.isArray(d.subplots)&&Array.isArray(d.subplots[0]);var u=Array.isArray(q),v=Array.isArray(r),w=u&&q!==d.xaxes&&v&&r!==d.yaxes;if(n){var y=d.subplots.length;var D=d.subplots[0].length}else v&&
(y=r.length),u&&(D=q.length);var x=k.newContainer(c,"grid");q=f("rows",y);D=f("columns",D);if(1<q*D){n||u||v||"independent"===f("pattern")&&(n=!0);x._hasSubplotGrid=n;u="top to bottom"===f("roworder");v=n?.3:.1;if(w&&c._splomGridDflt){var E=c._splomGridDflt.xside;var B=c._splomGridDflt.yside}x._domains={x:h("x",f,n?.2:.1,E,D),y:h("y",f,v,B,q,u)}}else delete c.grid}},contentDefaults:function(n,c){var f=c.grid;if(f&&f._domains){var d=n.grid||{};n=c._subplots;var q=f._hasSubplotGrid,r=f.rows,u=f.columns,
v="independent"===f.pattern,w,y=f._axisMap={};if(q){var D=d.subplots||[];var x=f.subplots=Array(r);var E=1;for(c=0;c<r;c++){var B=x[c]=Array(u),t=D[c]||[];for(w=0;w<u;w++)if(v?(d=1===E?"xy":"x"+E+"y"+E,E++):d=t[w],B[w]="",-1!==n.cartesian.indexOf(d)){var G=d.indexOf("y");var I=d.slice(0,G);G=d.slice(G);void 0!==y[I]&&y[I]!==w||void 0!==y[G]&&y[G]!==c||(B[w]=d,y[I]=w,y[G]=c)}}}else G=m(c,d,"x"),c=m(c,d,"y"),f.xaxes=l(G,n.xaxis,u,y,"x"),f.yaxes=l(c,n.yaxis,r,y,"y");v=f._anchors={};w="top to bottom"===
f.roworder;for(var L in y)if(c=L.charAt(0),d=f[c+"side"],8>d.length)v[L]="free";else if("x"===c)if("t"===d.charAt(0)===w?(c=0,D=1,E=r):(c=r-1,E=D=-1),q)for(I=y[L];c!==E;c+=D){if(d=x[c][I])if(G=d.indexOf("y"),d.slice(0,G)===L){v[L]=d.slice(G);break}}else for(;c!==E;c+=D){if(G=f.yaxes[c],-1!==n.cartesian.indexOf(L+G)){v[L]=G;break}}else if("l"===d.charAt(0)?(c=0,D=1,E=u):(c=u-1,E=D=-1),q)for(I=y[L];c!==E;c+=D){if(d=x[I][c])if(G=d.indexOf("y"),d.slice(G)===L){v[L]=d.slice(0,G);break}}else for(;c!==E;c+=
D)if(I=f.xaxes[c],-1!==n.cartesian.indexOf(I+L)){v[L]=I;break}}}}},{"../../lib":749,"../../lib/regex":765,"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/domain":824}],660:[function(b,F,C){C=b("../../plots/cartesian/constants");b=b("../../plot_api/plot_template").templatedArray;F.exports=b("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",
editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",C.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",C.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803}],661:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../../lib/to_log_range");F.exports=function(l,e,a,g){e=e||{};var k="log"===a&&"linear"===
e.type;a="linear"===a&&"log"===e.type;if(k||a){l=l._fullLayout.images;a=e._id.charAt(0);for(var p,n,c=0;c<l.length;c++)if(p=l[c],n="images["+c+"].",p[a+"ref"]===e._id){var f=p[a];p=p["size"+a];k?(f=h(f,e.range),p=p/Math.pow(10,f)/2,p=2*Math.log(p+Math.sqrt(1+p*p))/Math.LN10):(f=Math.pow(10,f),p=f*(Math.pow(10,p/2)-Math.pow(10,-p/2)));m(f)?m(p)||(p=null):p=f=null;g(n+a,f);g(n+"size"+a,p)}}}},{"../../lib/to_log_range":775,"fast-isnumeric":241}],662:[function(b,F,C){function m(g,k,p){function n(r,u){return h.coerce(g,
k,a,r,u)}var c=n("source");if(!n("visible",!!c))return k;n("layer");n("xanchor");n("yanchor");n("sizex");n("sizey");n("sizing");n("opacity");p={_fullLayout:p};c=["x","y"];for(var f=0;2>f;f++){var d=c[f],q=l.coerceRef(g,k,p,d,"paper");"paper"!==q&&l.getFromId(p,q)._imgIndices.push(k._index);l.coercePosition(k,p,n,q,d,0)}return k}var h=b("../../lib"),l=b("../../plots/cartesian/axes"),e=b("../../plots/array_container_defaults"),a=b("./attributes");F.exports=function(g,k){e(g,k,{name:"images",handleItemDefaults:m})}},
{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":660}],663:[function(b,F,C){var m=b("d3"),h=b("../drawing"),l=b("../../plots/cartesian/axes"),e=b("../../constants/xmlns_namespaces");F.exports=function(a){function g(w){var y=m.select(this);if(this._imgSrc!==w.source)if(y.attr("xmlns",e.svg),w.source&&"data:"===w.source.slice(0,5))y.attr("xlink:href",w.source),this._imgSrc=w.source;else{var D=new Promise(function(x){function E(){y.remove();
x()}var B=new Image;this.img=B;B.setAttribute("crossOrigin","anonymous");B.onerror=E;B.onload=function(){var t=document.createElement("canvas");t.width=this.width;t.height=this.height;t.getContext("2d").drawImage(this,0,0);t=t.toDataURL("image/png");y.attr("xlink:href",t);x()};y.on("error",E);this._imgSrc=B.src=w.source}.bind(this));a._promises.push(D)}}function k(w){var y=m.select(this),D=l.getFromId(a,w.xref),x=l.getFromId(a,w.yref),E=p._size,B=D?Math.abs(D.l2p(w.sizex)-D.l2p(0)):w.sizex*E.w,t=
x?Math.abs(x.l2p(w.sizey)-x.l2p(0)):w.sizey*E.h,G=B*v.x[w.xanchor].offset,I=t*v.y[w.yanchor].offset,L=v.x[w.xanchor].sizing+v.y[w.yanchor].sizing;G=(D?D.r2p(w.x)+D._offset:w.x*E.w+E.l)+G;E=(x?x.r2p(w.y)+x._offset:E.h-w.y*E.h+E.t)+I;switch(w.sizing){case "fill":L+=" slice";break;case "stretch":L="none"}y.attr({x:G,y:E,width:B,height:t,preserveAspectRatio:L,opacity:w.opacity});w=(D?D._id:"")+(x?x._id:"");h.setClipUrl(y,w?"clip"+p._uid+w:null,a)}var p=a._fullLayout,n=[],c={},f=[],d;for(d=0;d<p.images.length;d++){var q=
p.images[d];if(q.visible)if("below"===q.layer&&"paper"!==q.xref&&"paper"!==q.yref){var r=q.xref+q.yref;var u=p._plots[r];u?(u.mainplot&&(r=u.mainplot.id),c[r]||(c[r]=[]),c[r].push(q)):f.push(q)}else"above"===q.layer?n.push(q):f.push(q)}var v={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};d=p._imageLowerLayer.selectAll("image").data(f);r=p._imageUpperLayer.selectAll("image").data(n);
d.enter().append("image");r.enter().append("image");d.exit().remove();r.exit().remove();d.each(function(w){g.bind(this)(w);k.bind(this)(w)});r.each(function(w){g.bind(this)(w);k.bind(this)(w)});n=Object.keys(p._plots);for(d=0;d<n.length;d++)r=n[d],f=p._plots[r],f.imagelayer&&(r=f.imagelayer.selectAll("image").data(c[r]||[]),r.enter().append("image"),r.exit().remove(),r.each(function(w){g.bind(this)(w);k.bind(this)(w)}))}},{"../../constants/xmlns_namespaces":725,"../../plots/cartesian/axes":797,"../drawing":637,
d3:169}],664:[function(b,F,C){F.exports={moduleType:"component",name:"images",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("images"),draw:b("./draw"),convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":809,"./attributes":660,"./convert_coords":661,"./defaults":662,"./draw":663}],665:[function(b,F,C){C=b("../../plots/font_attributes");b=b("../color/attributes");F.exports={bgcolor:{valType:"color",
editType:"legend"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:C({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},
itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},
uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:C({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":825,"../color/attributes":614}],666:[function(b,F,C){F.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,
scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,textGap:40,itemGap:5}},{}],667:[function(b,F,C){var m=b("../../registry"),h=b("../../lib"),l=b("../../plot_api/plot_template"),e=b("./attributes"),a=b("../../plots/layout_attributes"),g=b("./helpers");F.exports=function(k,p,n){function c(y,D){return h.coerce(f,w,e,y,D)}for(var f=k.legend||{},d=0,q=!1,r="normal",u=0;u<n.length;u++){var v=n[u];if(v.visible){if(v.showlegend||v._dfltShowLegend&&!(v._module&&v._module.attributes&&v._module.attributes.showlegend&&
!1===v._module.attributes.showlegend.dflt))d++,v.showlegend&&(q=!0,(m.traceIs(v,"pie-like")||!0===v._input.showlegend)&&d++);if(m.traceIs(v,"bar")&&"stack"===p.barmode||-1!==["tonextx","tonexty"].indexOf(v.fill))r=g.isGrouped({traceorder:r})?"grouped+reversed":"reversed";void 0!==v.legendgroup&&""!==v.legendgroup&&(r=g.isReversed({traceorder:r})?"reversed+grouped":"grouped")}}n=h.coerce(k,p,a,"showlegend",q&&1<d);if(!1!==n||f.uirevision){var w=l.newContainer(p,"legend");c("uirevision",p.uirevision);
!1!==n&&(c("bgcolor",p.paper_bgcolor),c("bordercolor"),c("borderwidth"),h.coerceFont(c,"font",p.font),n=c("orientation"),"h"===n?(d=0,m.getComponentMethod("rangeslider","isVisible")(k.xaxis)?(k=1.1,q="bottom"):(k=-.1,q="top")):(d=1.02,k=1,q="auto"),c("traceorder",r),g.isGrouped(p.legend)&&c("tracegroupgap"),c("itemsizing"),c("itemclick"),c("itemdoubleclick"),c("x",d),c("xanchor"),c("y",k),c("yanchor",q),c("valign"),h.noneOrAll(f,w,["x","y"]),c("title.text")&&(c("title.side","h"===n?"left":"top"),
h.coerceFont(c,"title.font",p.font)))}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/layout_attributes":851,"../../registry":880,"./attributes":665,"./helpers":671}],668:[function(b,F,C){function m(N,H,J,O,Q){var U=J.data()[0][0].trace;Q={event:Q,node:J.node(),curveNumber:U.index,expandedIndex:U._expandedIndex,data:N.data,layout:N.layout,frames:N._transitionData._frames,config:N._context,fullData:N._fullData,fullLayout:N._fullLayout};U._group&&(Q.group=U._group);r.traceIs(U,"pie-like")&&
(Q.label=J.datum()[0].label);!1!==u.triggerHandler(N,"plotly_legendclick",Q)&&(1===O?H._clickTimeout=setTimeout(function(){x(J,N,O)},N._context.doubleClickDelay):2===O&&(H._clickTimeout&&clearTimeout(H._clickTimeout),N._legendMouseDownTime=0,!1!==u.triggerHandler(N,"plotly_legenddoubleclick",Q)&&x(J,N,O)))}function h(N,H,J){var O=N.data()[0][0],Q=O.trace,U=r.traceIs(Q,"pie-like"),P=Q.index,V=J._main&&H._context.edits.legendText&&!U,Y=J._maxNameLength;J.entries?U=O.text:(U=U?O.label:Q.name,Q._meta&&
(U=d.templateString(U,Q._meta)));Q=d.ensureSingle(N,"text","legendtext");Q.attr("text-anchor","start").classed("user-select-none",!0).call(w.font,J.font).text(V?l(U,Y):U);D.positionText(Q,E.textGap,0);if(V)Q.call(D.makeEditable,{gd:H,text:U}).call(a,N,H,J).on("edit",function(ba){this.text(l(ba,Y)).call(a,N,H,J);var ea=O.trace._fullInput||{},ca={};r.hasTransform(ea,"groupby")?(ca=r.getTransformIndices(ea,"groupby"),ea=d.keyedContainer(ea,"transforms["+ca[ca.length-1]+"].styles","target","value.name"),
ea.set(O.trace._group,ba),ca=ea.constructUpdate()):ca.name=ba;return r.call("_guiRestyle",H,ca,P)});else a(Q,N,H,J)}function l(N,H){H=Math.max(4,H);if(N&&N.trim().length>=H/2)return N;N=N||"";for(H-=N.length;0<H;H--)N+=" ";return N}function e(N,H){var J=H._context.doubleClickDelay,O,Q=1,U=d.ensureSingle(N,"rect","legendtoggle",function(P){P.style("cursor","pointer").attr("pointer-events","all").call(y.fill,"rgba(0,0,0,0)")});U.on("mousedown",function(){O=(new Date).getTime();O-H._legendMouseDownTime<
J?Q+=1:(Q=1,H._legendMouseDownTime=O)});U.on("mouseup",function(){if(!H._dragged&&!H._editing){var P=H._fullLayout.legend;(new Date).getTime()-H._legendMouseDownTime>J&&(Q=Math.max(Q-1,1));m(H,P,N,Q,f.event)}})}function a(N,H,J,O){O._main||N.attr("data-notex",!0);D.convertToTspans(N,J,function(){var Q=O,U=H.data()[0][0];if(Q._main&&U&&!U.trace.showlegend)H.remove();else{var P=H.select("g[class*\x3dmath-group]"),V=P.node();Q||(Q=J._fullLayout.legend);var Y=Q.borderwidth,ba=(U?Q:Q.title).font.size*
B;if(V){var ea=w.bBox(V);V=ea.height;ea=ea.width;U?w.setTranslate(P,0,.25*V):w.setTranslate(P,Y,.75*V+Y)}else{P=H.select(U?".legendtext":".legendtitletext");var ca=D.lineCount(P);ea=P.node();V=ba*ca;ea=ea?w.bBox(ea).width:0;U?D.positionText(P,E.textGap,-(ba*((ca-1)/2-.3))):D.positionText(P,E.titlePad+Y,ba+Y)}U?(U.lineHeight=ba,U.height=Math.max(V,16)+3,U.width=ea):(Q._titleWidth=ea,Q._titleHeight=V)}})}function g(N){var H=0,J=0,O=N.title.side;O&&(-1!==O.indexOf("left")&&(H=N._titleWidth),-1!==O.indexOf("top")&&
(J=N._titleHeight));return[H,J]}function k(N,H,J,O){var Q=N._fullLayout;O||(O=Q.legend);var U=Q._size,P=M.isVertical(O),V=M.isGrouped(O),Y=O.borderwidth,ba=2*Y,ea=E.textGap,ca=E.itemGap,ia=2*(Y+ca),fa=c(O),ha=0>O.y||0===O.y&&"top"===fa,na=1<O.y||1===O.y&&"bottom"===fa;O._maxHeight=Math.max(ha||na?Q.height/2:U.h,30);var pa=0;O._width=0;O._height=0;var ra=g(O);if(P)J.each(function(Ea){var Ia=Ea[0].height;w.setTranslate(this,Y+ra[0],Y+ra[1]+O._height+Ia/2+ca);O._height+=Ia;O._width=Math.max(O._width,
Ea[0].width)}),pa=ea+O._width,O._width+=ca+ea+ba,O._height+=ia,V&&(H.each(function(Ea,Ia){w.setTranslate(this,0,Ia*O.tracegroupgap)}),O._height+=(O._lgroupsLength-1)*O.tracegroupgap);else{fa=n(O);var ta=1<O.x||1===O.x&&"left"===fa;ha=na||ha;Q=Q.width/2;O._maxWidth=Math.max(0>O.x||0===O.x&&"right"===fa?ha&&"left"===fa?U.l+U.w:Q:ta?ha&&"right"===fa?U.r+U.w:Q:U.w,2*ea);var oa=0,ua=0;J.each(function(Ea){Ea=Ea[0].width+ea;oa=Math.max(oa,Ea);ua+=Ea});pa=null;var ka=0;if(V){var sa=0,ya=0,qa=0;H.each(function(){var Ea=
0,Ia=0;f.select(this).selectAll("g.traces").each(function(lb){var hb=lb[0].height;w.setTranslate(this,ra[0],ra[1]+Y+ca+hb/2+Ia);Ia+=hb;Ea=Math.max(Ea,ea+lb[0].width)});sa=Math.max(sa,Ia);var Qa=Ea+ca;Qa+Y+ya>O._maxWidth&&(ka=Math.max(ka,ya),ya=0,qa+=sa+O.tracegroupgap,sa=Ia);w.setTranslate(this,ya,qa);ya+=Qa});O._width=Math.max(ka,ya)+Y;O._height=qa+sa+ia}else{H=J.size();var xa=ua+ba+(H-1)*ca<O._maxWidth,Ca=0,Ja=0,eb=0,Ra=0;J.each(function(Ea){var Ia=Ea[0].height;Ea=ea+Ea[0].width;var Qa=(xa?Ea:oa)+
ca;Qa+Y+Ja>O._maxWidth&&(ka=Math.max(ka,Ra),Ja=0,eb+=Ca,O._height+=Ca,Ca=0);w.setTranslate(this,ra[0]+Y+Ja,ra[1]+Y+eb+Ia/2+ca);Ra=Ja+Ea+ca;Ja+=Qa;Ca=Math.max(Ca,Ia)});xa?(O._width=Ja+ba,O._height=Ca+ia):(O._width=Math.max(ka,Ra)+ba,O._height+=Ca+ia)}}O._width=Math.ceil(Math.max(O._width+ra[0],O._titleWidth+2*(Y+E.titlePad)));O._height=Math.ceil(Math.max(O._height+ra[1],O._titleHeight+2*(Y+E.itemGap)));O._effHeight=Math.min(O._height,O._maxHeight);N=N._context.edits;var Wa=N.legendText||N.legendPosition;
J.each(function(Ea){var Ia=f.select(this).select(".legendtoggle"),Qa=Ea[0].height;Ea=Wa?ea:pa||ea+Ea[0].width;P||(Ea+=ca/2);w.setRect(Ia,0,-Qa/2,Ea,Qa)})}function p(N){var H=N._fullLayout.legend,J=n(H),O=c(H);return q.autoMargin(N,"legend",{x:H.x,y:H.y,l:H._width*t[J],r:H._width*G[J],b:H._effHeight*G[O],t:H._effHeight*t[O]})}function n(N){return d.isRightAnchor(N)?"right":d.isCenterAnchor(N)?"center":"left"}function c(N){return d.isBottomAnchor(N)?"bottom":d.isMiddleAnchor(N)?"middle":"top"}var f=
b("d3"),d=b("../../lib"),q=b("../../plots/plots"),r=b("../../registry"),u=b("../../lib/events"),v=b("../dragelement"),w=b("../drawing"),y=b("../color"),D=b("../../lib/svg_text_utils"),x=b("./handle_click"),E=b("./constants");C=b("../../constants/alignment");var B=C.LINE_SPACING,t=C.FROM_TL,G=C.FROM_BR,I=b("./get_legend_data"),L=b("./style"),M=b("./helpers");F.exports=function(N,H){var J=N._fullLayout,O="legend"+J._uid;if(H){var Q=H.layer;O+="-hover"}else H=J.legend||{},H._main=!0,Q=J._infolayer;if(Q){N._legendMouseDownTime||
(N._legendMouseDownTime=0);if(H._main){if(!N.calcdata)return;var U=J.showlegend&&I(N.calcdata,H)}else{if(!H.entries)return;U=I(H.entries,H)}var P=J.hiddenlabels||[];if(H._main&&(!J.showlegend||!U.length))return Q.selectAll(".legend").remove(),J._topdefs.select("#"+O).remove(),q.autoMargin(N,"legend");var V=d.ensureSingle(Q,"g","legend",function(pa){H._main&&pa.attr("pointer-events","all")}),Y=d.ensureSingleById(J._topdefs,"clipPath",O,function(pa){pa.append("rect")}),ba=d.ensureSingle(V,"rect","bg",
function(pa){pa.attr("shape-rendering","crispEdges")});ba.call(y.stroke,H.bordercolor).call(y.fill,H.bgcolor).style("stroke-width",H.borderwidth+"px");var ea=d.ensureSingle(V,"g","scrollbox"),ca=H.title;H._titleWidth=0;H._titleHeight=0;if(ca.text){var ia=d.ensureSingle(ea,"text","legendtitletext");ia.attr("text-anchor","start").classed("user-select-none",!0).call(w.font,ca.font).text(ca.text);a(ia,ea,N,H)}else ea.selectAll(".legendtitletext").remove();var fa=d.ensureSingle(V,"rect","scrollbar",function(pa){pa.attr(E.scrollBarEnterAttrs).call(y.fill,
E.scrollBarColor)}),ha=ea.selectAll("g.groups").data(U);ha.enter().append("g").attr("class","groups");ha.exit().remove();var na=ha.selectAll("g.traces").data(d.identity);na.enter().append("g").attr("class","traces");na.exit().remove();na.style("opacity",function(pa){var ra=pa[0].trace;return r.traceIs(ra,"pie-like")?-1!==P.indexOf(pa[0].label)?.5:1:"legendonly"===ra.visible?.5:1}).each(function(){f.select(this).call(h,N,H)}).call(L,N,H).each(function(){H._main&&f.select(this).call(e,N)});d.syncOrAsync([q.previousPromises,
function(){return k(N,ha,na,H)},function(){function pa(hb,Fa,La){H._scrollY=N._fullLayout.legend._scrollY=hb;w.setTranslate(ea,0,-hb);w.setRect(fa,H._width,E.scrollBarMargin+hb*La,E.scrollBarWidth,Fa);Y.select("rect").attr("y",ta+hb)}if(!H._main||!p(N)){var ra=J._size,ta=H.borderwidth,oa=ra.l+ra.w*H.x-t[n(H)]*H._width,ua=ra.t+ra.h*(1-H.y)-t[c(H)]*H._effHeight;if(H._main&&J.margin.autoexpand){var ka=oa,sa=ua;oa=d.constrain(oa,0,J.width-H._width);ua=d.constrain(ua,0,J.height-H._effHeight);oa!==ka&&
d.log("Constrain legend.x to make legend fit inside graph");ua!==sa&&d.log("Constrain legend.y to make legend fit inside graph")}H._main&&w.setTranslate(V,oa,ua);fa.on(".drag",null);V.on("wheel",null);if(!H._main||H._height<=H._maxHeight||N._context.staticPlot)oa=H._effHeight,H._main||(oa=H._height),ba.attr({width:H._width-ta,height:oa-ta,x:ta/2,y:ta/2}),w.setTranslate(ea,0,0),Y.select("rect").attr({width:H._width-2*ta,height:oa-2*ta,x:ta,y:ta}),w.setClipUrl(ea,O,N),w.setRect(fa,0,0,0,0),delete H._scrollY;
else{var ya=Math.max(E.scrollBarMinHeight,H._effHeight*H._effHeight/H._height),qa=H._effHeight-ya-2*E.scrollBarMargin,xa=H._height-H._effHeight,Ca=qa/xa,Ja=Math.min(H._scrollY||0,xa);ba.attr({width:H._width-2*ta+E.scrollBarWidth+E.scrollBarMargin,height:H._effHeight-ta,x:ta/2,y:ta/2});Y.select("rect").attr({width:H._width-2*ta+E.scrollBarWidth+E.scrollBarMargin,height:H._effHeight-2*ta,x:ta,y:ta+Ja});w.setClipUrl(ea,O,N);pa(Ja,ya,Ca);V.on("wheel",function(){Ja=d.constrain(H._scrollY+f.event.deltaY/
qa*xa,0,xa);pa(Ja,ya,Ca);0!==Ja&&Ja!==xa&&f.event.preventDefault()});var eb,Ra,Wa;oa=f.behavior.drag().on("dragstart",function(){var hb=f.event.sourceEvent;eb="touchstart"===hb.type?hb.changedTouches[0].clientY:hb.clientY;Wa=Ja}).on("drag",function(){var hb=f.event.sourceEvent;2===hb.buttons||hb.ctrlKey||(Ra="touchmove"===hb.type?hb.changedTouches[0].clientY:hb.clientY,Ja=d.constrain((Ra-eb)/Ca+Wa,0,xa),pa(Ja,ya,Ca))});fa.call(oa);oa=f.behavior.drag().on("dragstart",function(){var hb=f.event.sourceEvent;
"touchstart"===hb.type&&(eb=hb.changedTouches[0].clientY,Wa=Ja)}).on("drag",function(){var hb=f.event.sourceEvent;"touchmove"===hb.type&&(Ra=hb.changedTouches[0].clientY,Ja=d.constrain((eb-Ra)/Ca+Wa,0,xa),pa(Ja,ya,Ca))});ea.call(oa)}if(N._context.edits.legendPosition){var Ea,Ia,Qa,lb;V.classed("cursor-move",!0);v.init({element:V.node(),gd:N,prepFn:function(){var hb=w.getTranslate(V);Qa=hb.x;lb=hb.y},moveFn:function(hb,Fa){hb=Qa+hb;Fa=lb+Fa;w.setTranslate(V,hb,Fa);Ea=v.align(hb,0,ra.l,ra.l+ra.w,H.xanchor);
Ia=v.align(Fa,0,ra.t+ra.h,ra.t,H.yanchor)},doneFn:function(){void 0!==Ea&&void 0!==Ia&&r.call("_guiRelayout",N,{"legend.x":Ea,"legend.y":Ia})},clickFn:function(hb,Fa){var La=Q.selectAll("g.traces").filter(function(){var Oa=this.getBoundingClientRect();return Fa.clientX>=Oa.left&&Fa.clientX<=Oa.right&&Fa.clientY>=Oa.top&&Fa.clientY<=Oa.bottom});0<La.size()&&m(N,V,La,hb,Fa)}})}}}],N)}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/events":738,"../../lib/svg_text_utils":773,"../../plots/plots":860,
"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"./constants":666,"./get_legend_data":669,"./handle_click":670,"./helpers":671,"./style":673,d3:169}],669:[function(b,F,C){var m=b("../../registry"),h=b("./helpers");F.exports=function(l,e){function a(D,x){""!==D&&h.isGrouped(e)?-1===k.indexOf(D)?(k.push(D),p=!0,g[D]=[[x]]):g[D].push([x]):(D="~~i"+c,k.push(D),g[D]=[[x]],c++)}var g={},k=[],p=!1,n={},c=0,f=0,d,q=e._main;for(d=0;d<l.length;d++){var r=l[d];var u=r[0];var v=u.trace,
w=v.legendgroup;if(!q||v.visible&&v.showlegend)if(m.traceIs(v,"pie-like"))for(n[w]||(n[w]={}),u=0;u<r.length;u++){var y=r[u].label;n[w][y]||(a(w,{label:y,color:r[u].color,i:r[u].i,trace:v,pts:r[u].pts}),n[w][y]=!0,f=Math.max(f,(y||"").length))}else a(w,u),f=Math.max(f,(v.name||"").length)}if(!k.length)return[];l=k.length;if(p&&h.isGrouped(e))for(q=Array(l),d=0;d<l;d++)n=g[k[d]],q[d]=h.isReversed(e)?n.reverse():n;else{q=[Array(l)];for(d=0;d<l;d++)n=g[k[d]][0],q[0][h.isReversed(e)?l-d-1:d]=n;l=1}e._lgroupsLength=
l;e._maxNameLength=f;return q}},{"../../registry":880,"./helpers":671}],670:[function(b,F,C){var m=b("../../lib"),h=b("../../registry"),l=!0;F.exports=function(e,a,g){function k(B,t,G){var I=u.indexOf(B),L=r[t];L||(L=r[t]=[]);-1===u.indexOf(B)&&(u.push(B),I=u.length-1);L[I]=G;return I}function p(B,t){var G=B._fullInput;if(h.hasTransform(G,"groupby")){var I=v[G.index];I||(I=h.getTransformIndices(G,"groupby"),I=m.keyedContainer(G,"transforms["+I[I.length-1]+"].styles","target","value.visible"),v[G.index]=
I);var L=I.get(B._group);void 0===L&&(L=!0);!1!==L&&I.set(B._group,t);w[G.index]=k(G.index,"visible",!1===G.visible?!1:!0)}else k(G.index,"visible",!1===G.visible?!1:t)}var n=a._fullLayout;if(!a._dragged&&!a._editing){var c=n.legend.itemclick,f=n.legend.itemdoubleclick;1===g&&"toggle"===c&&"toggleothers"===f&&l&&a.data&&a._context.showTips&&m.notifier(m._(a,"Double-click on legend to isolate one trace"),"long");l=!1;var d;1===g?d=c:2===g&&(d=f);if(d){var q=n.hiddenlabels?n.hiddenlabels.slice():[];
e=e.data()[0][0];g=a._fullData;n=e.trace;c=n.legendgroup;var r={},u=[],v=[],w=[];if(h.traceIs(n,"pie-like")){var y=e.label;e=q.indexOf(y);"toggle"===d?-1===e?q.push(y):q.splice(e,1):"toggleothers"===d&&(q=[],a.calcdata[0].forEach(function(B){y!==B.label&&q.push(B.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===q.length&&-1===e&&(q=[]));h.call("_guiRelayout",a,"hiddenlabels",q)}else{f=c&&c.length;var D=[];if(f)for(e=0;e<g.length;e++){var x=g[e];x.visible&&x.legendgroup===c&&
D.push(e)}if("toggle"===d){switch(n.visible){case !0:var E="legendonly";break;case !1:E=!1;break;case "legendonly":E=!0}if(f)for(e=0;e<g.length;e++)!1!==g[e].visible&&g[e].legendgroup===c&&p(g[e],E);else p(n,E)}else if("toggleothers"===d){D=!0;for(e=0;e<g.length;e++)if(x=g[e]===n,d=!0!==g[e].showlegend,!(x||d||(x=f&&g[e].legendgroup===c,x||!0!==g[e].visible||h.traceIs(g[e],"notLegendIsolatable")))){D=!1;break}for(e=0;e<g.length;e++)if(!1!==g[e].visible&&!h.traceIs(g[e],"notLegendIsolatable"))switch(n.visible){case "legendonly":p(g[e],
!0);break;case !0:E=D?!0:"legendonly",x=g[e]===n,d=!0!==g[e].showlegend&&!g[e].legendgroup,x=x||f&&g[e].legendgroup===c,p(g[e],x||d?!0:E)}}for(e=0;e<v.length;e++)if(d=v[e])for(c=d.constructUpdate(),E=Object.keys(c),d=0;d<E.length;d++)g=E[d],n=r[g]=r[g]||[],n[w[e]]=c[g];n=Object.keys(r);for(e=0;e<n.length;e++)for(g=n[e],d=0;d<u.length;d++)r[g].hasOwnProperty(d)||(r[g][d]=void 0);h.call("_guiRestyle",a,r,u)}}}}},{"../../lib":749,"../../registry":880}],671:[function(b,F,C){C.isGrouped=function(m){return-1!==
(m.traceorder||"").indexOf("grouped")};C.isVertical=function(m){return"h"!==m.orientation};C.isReversed=function(m){return-1!==(m.traceorder||"").indexOf("reversed")}},{}],672:[function(b,F,C){F.exports={moduleType:"component",name:"legend",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw"),style:b("./style")}},{"./attributes":665,"./defaults":667,"./draw":668,"./style":673}],673:[function(b,F,C){function m(f,d){return(d?"radial":"horizontal")+(f?"":"reversed")}
var h=b("d3"),l=b("../../registry"),e=b("../../lib"),a=b("../drawing"),g=b("../color"),k=b("../colorscale/helpers").extractOpts,p=b("../../traces/scatter/subtypes"),n=b("../../traces/pie/style_one"),c=b("../../traces/pie/helpers").castOption;F.exports=function(f,d,q){function r(D,x,E){var B=D[0].trace,t=B.marker||{},G=t.line||{};B=E?B.visible&&B.type===E:l.traceIs(B,"bar");D=h.select(x).select("g.legendpoints").selectAll("path.legend"+E).data(B?[D]:[]);D.enter().append("path").classed("legend"+E,
!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");D.exit().remove();D.each(function(I){var L=h.select(this);I=I[0];var M=y(I.mlw,t.line,5,2);L.style("stroke-width",M+"px").call(g.fill,I.mc||t.color);M&&g.stroke(L,I.mlc||G.color)})}function u(D,x,E){var B=D[0],t=B.trace,G=E?t.visible&&t.type===E:l.traceIs(t,E);D=h.select(x).select("g.legendpoints").selectAll("path.legend"+E).data(G?[D]:[]);D.enter().append("path").classed("legend"+E,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");
D.exit().remove();D.size()&&(E=(t.marker||{}).line,x=y(c(E.width,B.pts),E,5,2),t=e.minExtend(t,{marker:{line:{width:x}}}),t.marker.line.color=E.color,B=e.minExtend(B,{trace:t}),n(D,B,t))}var v=d._fullLayout;q||(q=v.legend);var w="constant"===q.itemsizing,y=function(D,x,E,B){if(!(D+1))if(x&&0<x.width)D=x.width;else return 0;return w?B:Math.min(D,E)};f.each(function(D){var x=h.select(this);x=e.ensureSingle(x,"g","layers");x.style("opacity",D[0].trace.opacity);var E=q.valign,B=D[0].lineHeight,t=D[0].height;
"middle"!==E&&B&&t?x.attr("transform","translate(0,"+.5*{top:1,bottom:-1}[E]*(B-t+3)+")"):x.attr("transform",null);x.selectAll("g.legendfill").data([D]).enter().append("g").classed("legendfill",!0);x.selectAll("g.legendlines").data([D]).enter().append("g").classed("legendlines",!0);x=x.selectAll("g.legendsymbols").data([D]);x.enter().append("g").classed("legendsymbols",!0);x.selectAll("g.legendpoints").data([D]).enter().append("g").classed("legendpoints",!0)}).each(function(D){var x=D[0].trace;D=
[];if(x.visible)switch(x.type){case "histogram2d":case "heatmap":D=[["M-15,-2V4H15V-2Z"]];var E=!0;break;case "choropleth":case "choroplethmapbox":D=[["M-6,-6V6H6V-6Z"]];E=!0;break;case "densitymapbox":D=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];E="radial";break;case "cone":D=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];E=!1;break;case "streamtube":D=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],
["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];E=!1;break;case "surface":D=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];E=!0;break;case "mesh3d":D=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];E=!1;break;case "volume":D=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];E=!0;break;case "isosurface":D=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}D=h.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(D);
D.enter().append("path").classed("legend3dandfriends",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);D.exit().remove();D.each(function(B,t){var G=h.select(this),I=k(x),L=I.colorscale,M=I.reversescale;I=function(H){H.size()&&a.gradient(H,d,"legendfill-"+x.uid,m(M,"radial"===E),L,"fill")};if(L)E||(N=L.length,N=0===t?L[M?N-1:0][1]:1===t?L[M?0:N-1][1]:L[Math.floor((N-1)/2)][1]);else{var N=x.vertexcolor||x.facecolor||x.color;N=e.isArrayOrTypedArray(N)?N[t]||N[0]:N}G.attr("d",B[0]);
N?G.call(g.fill,N):G.call(I)})}).each(function(D){var x=D[0].trace,E="waterfall"===x.type;if(D[0]._distinct&&E)return E=D[0].trace[D[0].dir].marker,D[0].mc=E.color,D[0].mlw=E.line.width,D[0].mlc=E.line.color,r(D,this,"waterfall");var B=[];x.visible&&E&&(B=D[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);D=h.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(B);
D.enter().append("path").classed("legendwaterfall",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);D.exit().remove();D.each(function(t){var G=h.select(this),I=x[t[0]].marker,L=y(void 0,I.line,5,2);G.attr("d",t[1]).style("stroke-width",L+"px").call(g.fill,I.color);L&&G.call(g.stroke,I.line.color)})}).each(function(D){r(D,this,"funnel")}).each(function(D){r(D,this)}).each(function(D){var x=D[0].trace,E=h.select(this).select("g.legendpoints").selectAll("path.legendbox").data(x.visible&&
l.traceIs(x,"box-violin")?[D]:[]);E.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");E.exit().remove();E.each(function(){var B=h.select(this);if("all"!==x.boxpoints&&"all"!==x.points||0!==g.opacity(x.fillcolor)||0!==g.opacity((x.line||{}).color)){var t=y(void 0,x.line,5,2);B.style("stroke-width",t+"px").call(g.fill,x.fillcolor);t&&g.stroke(B,x.line.color)}else B=e.minExtend(x,{marker:{size:w?12:e.constrain(x.marker.size,2,16),sizeref:1,sizemin:1,
sizemode:"diameter"}}),E.call(a.pointStyle,B,d)})}).each(function(D){u(D,this,"funnelarea")}).each(function(D){u(D,this,"pie")}).each(function(D){var x=D[0],E=x.trace,B=E.visible&&E.fill&&"none"!==E.fill,t=p.hasLines(E),G=E.contours,I=!1,L=!1,M=k(E),N=M.colorscale,H=M.reversescale,J=function(U){U.size()&&a.gradient(U,d,"legendfill-"+E.uid,m(H),N,"fill")};M=function(U){if(U.size()){var P="legendline-"+E.uid;a.lineGroupStyle(U);a.gradient(U,d,P,m(H),N,"stroke")}};if(G){var O=G.coloring;"lines"===O?
I=!0:t="none"===O||"heatmap"===O||G.showlines;if("constraint"===G.type)B="\x3d"!==G._operation;else if("fill"===O||"heatmap"===O)L=!0}G=p.hasMarkers(E)||p.hasText(E)||!B&&!L?"M5,0":t||I?"M5,-2":"M5,-3";O=h.select(this);D=O.select(".legendfill").selectAll("path").data(B||L?[D]:[]);D.enter().append("path").classed("js-fill",!0);D.exit().remove();D.attr("d",G+"h30v6h-30z").call(B?a.fillGroupStyle:J);if(t||I){B=y(void 0,E.line,10,5);B=e.minExtend(E,{line:{width:B}});var Q=[e.minExtend(x,{trace:B})]}x=
O.select(".legendlines").selectAll("path").data(t||I?[Q]:[]);x.enter().append("path").classed("js-line",!0);x.exit().remove();x.attr("d",G+(I?"l30,0.0001":"h30")).call(t?a.lineGroupStyle:M)}).each(function(D){function x(H,J,O,Q){H=e.nestedProperty(t,H).get();J=e.isArrayOrTypedArray(H)&&J?J(H):H;w&&J&&void 0!==Q&&(J=Q);if(O){if(J<O[0])return O[0];if(J>O[1])return O[1]}return J}function E(H){return B._distinct&&B.index&&H[B.index]?H[B.index]:H[0]}var B=D[0],t=B.trace;D=p.hasMarkers(t);var G=p.hasText(t),
I=p.hasLines(t);if(D||G||I){var L={};var M={};if(D){L.mc=x("marker.color",E);L.mx=x("marker.symbol",E);L.mo=x("marker.opacity",e.mean,[.2,1]);L.mlc=x("marker.line.color",E);L.mlw=x("marker.line.width",e.mean,[0,5],2);M.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var N=x("marker.size",e.mean,[2,16],12);L.ms=N;M.marker.size=N}I&&(M.line={width:x("line.width",E,[0,10],5)});G&&(L.tx="Aa",L.tp=x("textposition",E),L.ts=10,L.tc=x("textfont.color",E),L.tf=x("textfont.family",E));L=[e.minExtend(B,L)];
M=e.minExtend(t,M);M.selectedpoints=null;M.texttemplate=null}I=h.select(this).select("g.legendpoints");N=I.selectAll("path.scatterpts").data(D?L:[]);N.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)");N.exit().remove();N.call(a.pointStyle,M,d);D&&(L[0].mrc=3);D=I.selectAll("g.pointtext").data(G?L:[]);D.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)");D.exit().remove();D.selectAll("text").call(a.textPointStyle,
M,d)}).each(function(D){var x=D[0].trace;D=h.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(x.visible&&"candlestick"===x.type?[D,D]:[]);D.enter().append("path").classed("legendcandle",!0).attr("d",function(E,B){return B?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);D.exit().remove();D.each(function(E,B){E=h.select(this);B=x[B?"increasing":"decreasing"];var t=y(void 0,B.line,5,2);E.style("stroke-width",t+"px").call(g.fill,
B.fillcolor);t&&g.stroke(E,B.line.color)})}).each(function(D){var x=D[0].trace;D=h.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(x.visible&&"ohlc"===x.type?[D,D]:[]);D.enter().append("path").classed("legendohlc",!0).attr("d",function(E,B){return B?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);D.exit().remove();D.each(function(E,B){E=h.select(this);B=x[B?"increasing":"decreasing"];var t=y(void 0,B.line,5,2);E.style("fill",
"none").call(a.dashLine,B.line.dash,t);t&&g.stroke(E,B.line.color)})})}},{"../../lib":749,"../../registry":880,"../../traces/pie/helpers":1134,"../../traces/pie/style_one":1140,"../../traces/scatter/subtypes":1179,"../color":615,"../colorscale/helpers":626,"../drawing":637,d3:169}],674:[function(b,F,C){function m(w,y){var D=y.currentTarget,x=D.getAttribute("data-attr");y=D.getAttribute("data-val")||!0;var E=w._fullLayout,B={},t=q.list(w,null,!0),G=E._cartesianSpikesEnabled,I;if("zoom"===x){x="in"===
y?.5:2;D=(1+x)/2;var L=(1-x)/2;for(I=0;I<t.length;I++)if(x=t[I],!x.fixedrange){var M=x._name;if("auto"===y)B[M+".autorange"]=!0;else if("reset"===y){if(void 0===x._rangeInitial)B[M+".autorange"]=!0;else{var N=x._rangeInitial.slice();B[M+".range[0]"]=N[0];B[M+".range[1]"]=N[1]}void 0!==x._showSpikeInitial&&(B[M+".showspikes"]=x._showSpikeInitial,"on"!==G||x._showSpikeInitial||(G="off"))}else N=[x.r2l(x.range[0]),x.r2l(x.range[1])],N=[D*N[0]+L*N[1],D*N[1]+L*N[0]],B[M+".range[0]"]=x.l2r(N[0]),B[M+".range[1]"]=
x.l2r(N[1])}}else"hovermode"!==x||"x"!==y&&"y"!==y||(y=E._isHoriz?"y":"x",D.setAttribute("data-val",y)),B[x]=y;E._cartesianSpikesEnabled=G;f.call("_guiRelayout",w,B)}function h(w,y){y=y.currentTarget;var D=y.getAttribute("data-attr");y=y.getAttribute("data-val")||!0;var x=w._fullLayout._subplots.gl3d||[],E={};D=D.split(".");for(var B=0;B<x.length;B++)E[x[B]+"."+D[1]]=y;E.dragmode="pan"===y?y:"zoom";f.call("_guiRelayout",w,E)}function l(w,y){var D=y.currentTarget.getAttribute("data-attr");y="resetLastSave"===
D;D="resetDefault"===D;for(var x=w._fullLayout,E=x._subplots.gl3d||[],B={},t=0;t<E.length;t++){var G=E[t],I=G+".camera",L=G+".aspectratio",M=G+".aspectmode";G=x[G]._scene;if(y){B[I+".up"]=G.viewInitial.up;B[I+".eye"]=G.viewInitial.eye;B[I+".center"]=G.viewInitial.center;var N=!0}else D&&(B[I+".up"]=null,B[I+".eye"]=null,B[I+".center"]=null,N=!0);N&&(B[L+".x"]=G.viewInitial.aspectratio.x,B[L+".y"]=G.viewInitial.aspectratio.y,B[L+".z"]=G.viewInitial.aspectratio.z,B[M]=G.viewInitial.aspectmode)}f.call("_guiRelayout",
w,B)}function e(w,y){y=y.currentTarget;var D=y._previousVal;w=w._fullLayout;var x=w._subplots.gl3d||[],E=["xaxis","yaxis","zaxis"],B={},t={};if(D)t=D,y._previousVal=null;else{for(D=0;D<x.length;D++){var G=x[D],I=w[G],L=G+".hovermode";B[L]=I.hovermode;t[L]=!1;for(L=0;3>L;L++){var M=E[L],N=G+"."+M+".showspikes";t[N]=!1;B[N]=I[M].showspikes}}y._previousVal=B}return t}function a(w,y){var D=y.currentTarget;y=D.getAttribute("data-attr");D=D.getAttribute("data-val")||!0;for(var x=w._fullLayout,E=x._subplots.geo||
[],B=0;B<E.length;B++){var t=E[B],G=x[t];"zoom"===y&&(G=G.projection.scale,f.call("_guiRelayout",w,t+".projection.scale","in"===D?2*G:.5*G))}"reset"===y&&c(w,"geo")}function g(w){w=w._fullLayout;return w.hovermode?!1:w._has("cartesian")?w._isHoriz?"y":"x":"closest"}function k(w){var y=g(w);f.call("_guiRelayout",w,"hovermode",y)}function p(w){var y="on"===w._fullLayout._cartesianSpikesEnabled;w=q.list(w,null,!0);for(var D={},x=0;x<w.length;x++){var E=w[x];D[E._name+".showspikes"]=y?!0:E._showSpikeInitial}return D}
function n(w,y){y=y.currentTarget.getAttribute("data-val");for(var D=w._fullLayout,x=D._subplots.mapbox||[],E={},B=0;B<x.length;B++){var t=x[B],G=D[t].zoom;E[t+".zoom"]="in"===y?1.05*G:G/1.05}f.call("_guiRelayout",w,E)}function c(w,y){var D=w._fullLayout;y=D._subplots[y]||[];for(var x={},E=0;E<y.length;E++)for(var B=y[E],t=D[B]._subplot.viewInitial,G=Object.keys(t),I=0;I<G.length;I++){var L=G[I];x[B+"."+L]=t[L]}f.call("_guiRelayout",w,x)}var f=b("../../registry"),d=b("../../plots/plots"),q=b("../../plots/cartesian/axis_ids");
C=b("../../fonts/ploticon");var r=b("../shapes/draw").eraseActiveShape,u=b("../../lib"),v=u._;b=F.exports={};b.toImage={name:"toImage",title:function(w){return"png"===((w._context.toImageButtonOptions||{}).format||"png")?v(w,"Download plot as a png"):v(w,"Download plot")},icon:C.camera,click:function(w){var y=w._context.toImageButtonOptions,D={format:y.format||"png"};u.notifier(v(w,"Taking snapshot - this may take a few seconds"),"long");"svg"!==D.format&&u.isIE()&&(u.notifier(v(w,"IE only supports svg.  Changing format to svg."),
"long"),D.format="svg");["filename","width","height","scale"].forEach(function(x){x in y&&(D[x]=y[x])});f.call("downloadImage",w,D).then(function(x){u.notifier(v(w,"Snapshot succeeded")+" - "+x,"long")}).catch(function(){u.notifier(v(w,"Sorry, there was a problem downloading your snapshot!"),"long")})}};b.sendDataToCloud={name:"sendDataToCloud",title:function(w){return v(w,"Edit in Chart Studio")},icon:C.disk,click:function(w){d.sendDataToCloud(w)}};b.editInChartStudio={name:"editInChartStudio",title:function(w){return v(w,
"Edit in Chart Studio")},icon:C.pencil,click:function(w){d.sendDataToCloud(w)}};b.zoom2d={name:"zoom2d",title:function(w){return v(w,"Zoom")},attr:"dragmode",val:"zoom",icon:C.zoombox,click:m};b.pan2d={name:"pan2d",title:function(w){return v(w,"Pan")},attr:"dragmode",val:"pan",icon:C.pan,click:m};b.select2d={name:"select2d",title:function(w){return v(w,"Box Select")},attr:"dragmode",val:"select",icon:C.selectbox,click:m};b.lasso2d={name:"lasso2d",title:function(w){return v(w,"Lasso Select")},attr:"dragmode",
val:"lasso",icon:C.lasso,click:m};b.drawclosedpath={name:"drawclosedpath",title:function(w){return v(w,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:C.drawclosedpath,click:m};b.drawopenpath={name:"drawopenpath",title:function(w){return v(w,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:C.drawopenpath,click:m};b.drawline={name:"drawline",title:function(w){return v(w,"Draw line")},attr:"dragmode",val:"drawline",icon:C.drawline,click:m};b.drawrect={name:"drawrect",
title:function(w){return v(w,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:C.drawrect,click:m};b.drawcircle={name:"drawcircle",title:function(w){return v(w,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:C.drawcircle,click:m};b.eraseshape={name:"eraseshape",title:function(w){return v(w,"Erase active shape")},icon:C.eraseshape,click:r};b.zoomIn2d={name:"zoomIn2d",title:function(w){return v(w,"Zoom in")},attr:"zoom",val:"in",icon:C.zoom_plus,click:m};b.zoomOut2d={name:"zoomOut2d",title:function(w){return v(w,
"Zoom out")},attr:"zoom",val:"out",icon:C.zoom_minus,click:m};b.autoScale2d={name:"autoScale2d",title:function(w){return v(w,"Autoscale")},attr:"zoom",val:"auto",icon:C.autoscale,click:m};b.resetScale2d={name:"resetScale2d",title:function(w){return v(w,"Reset axes")},attr:"zoom",val:"reset",icon:C.home,click:m};b.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(w){return v(w,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:C.tooltip_basic,gravity:"ne",click:m};
b.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(w){return v(w,"Compare data on hover")},attr:"hovermode",val:function(w){return w._fullLayout._isHoriz?"y":"x"},icon:C.tooltip_compare,gravity:"ne",click:m};b.zoom3d={name:"zoom3d",title:function(w){return v(w,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:C.zoombox,click:h};b.pan3d={name:"pan3d",title:function(w){return v(w,"Pan")},attr:"scene.dragmode",val:"pan",icon:C.pan,click:h};b.orbitRotation={name:"orbitRotation",title:function(w){return v(w,
"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:C["3d_rotate"],click:h};b.tableRotation={name:"tableRotation",title:function(w){return v(w,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:C["z-axis"],click:h};b.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(w){return v(w,"Reset camera to default")},attr:"resetDefault",icon:C.home,click:l};b.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(w){return v(w,"Reset camera to last save")},
attr:"resetLastSave",icon:C.movie,click:l};b.hoverClosest3d={name:"hoverClosest3d",title:function(w){return v(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:function(w,y){y=e(w,y);f.call("_guiRelayout",w,y)}};b.zoomInGeo={name:"zoomInGeo",title:function(w){return v(w,"Zoom in")},attr:"zoom",val:"in",icon:C.zoom_plus,click:a};b.zoomOutGeo={name:"zoomOutGeo",title:function(w){return v(w,"Zoom out")},attr:"zoom",val:"out",icon:C.zoom_minus,
click:a};b.resetGeo={name:"resetGeo",title:function(w){return v(w,"Reset")},attr:"reset",val:null,icon:C.autoscale,click:a};b.hoverClosestGeo={name:"hoverClosestGeo",title:function(w){return v(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:k};b.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(w){return v(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:k};
b.hoverClosestPie={name:"hoverClosestPie",title:function(w){return v(w,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:C.tooltip_basic,gravity:"ne",click:k};b.resetViewSankey={name:"resetSankeyGroup",title:function(w){return v(w,"Reset view")},icon:C.home,click:function(w){for(var y={"node.groups":[],"node.x":[],"node.y":[]},D=0;D<w._fullData.length;D++){var x=w._fullData[D]._viewInitial;y["node.groups"].push(x.node.groups.slice());y["node.x"].push(x.node.x.slice());y["node.y"].push(x.node.y.slice())}f.call("restyle",
w,y)}};b.toggleHover={name:"toggleHover",title:function(w){return v(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:function(w,y){y=e(w,y);y.hovermode=g(w);f.call("_guiRelayout",w,y)}};b.resetViews={name:"resetViews",title:function(w){return v(w,"Reset views")},icon:C.home,click:function(w,y){var D=y.currentTarget;D.setAttribute("data-attr","zoom");D.setAttribute("data-val","reset");m(w,y);D.setAttribute("data-attr","resetLastSave");
l(w,y);c(w,"geo");c(w,"mapbox")}};b.toggleSpikelines={name:"toggleSpikelines",title:function(w){return v(w,"Toggle Spike Lines")},icon:C.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(w){var y=w._fullLayout;y._cartesianSpikesEnabled="on"===y._cartesianSpikesEnabled?"off":"on";f.call("_guiRelayout",w,p(w))}};b.resetViewMapbox={name:"resetViewMapbox",title:function(w){return v(w,"Reset view")},attr:"reset",icon:C.home,click:function(w){c(w,"mapbox")}};b.zoomInMapbox={name:"zoomInMapbox",
title:function(w){return v(w,"Zoom in")},attr:"zoom",val:"in",icon:C.zoom_plus,click:n};b.zoomOutMapbox={name:"zoomOutMapbox",title:function(w){return v(w,"Zoom out")},attr:"zoom",val:"out",icon:C.zoom_minus,click:n}},{"../../fonts/ploticon":728,"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../shapes/draw":696}],675:[function(b,F,C){C.manage=b("./manage")},{"./manage":676}],676:[function(b,F,C){function m(q){function r(V){if(V.length){for(var Y=
[],ba=0;ba<V.length;ba++){var ea=V[ba];-1===y.indexOf(ea)&&Y.push(f[ea])}O.push(Y)}}var u=q._fullLayout,v=q._fullData,w=q._context,y=w.modeBarButtonsToRemove;q=w.modeBarButtonsToAdd;var D=u._has("cartesian"),x=u._has("gl3d"),E=u._has("geo"),B=u._has("pie"),t=u._has("funnelarea"),G=u._has("gl2d"),I=u._has("ternary"),L=u._has("mapbox"),M=u._has("polar"),N=u._has("sankey"),H=h(u),J=n(u.hovermode),O=[],Q=["toImage"];w.showEditInChartStudio?Q.push("editInChartStudio"):w.showSendToCloud&&Q.push("sendDataToCloud");
r(Q);w=[];Q=[];var U=[],P=[];1<(D||G||B||t||I)+E+x+L+M?(Q=["toggleHover"],U=["resetViews"]):E?(w=["zoomInGeo","zoomOutGeo"],Q=["hoverClosestGeo"],U=["resetGeo"]):x?(Q=["hoverClosest3d"],U=["resetCameraDefault3d","resetCameraLastSave3d"]):L?(w=["zoomInMapbox","zoomOutMapbox"],Q=["toggleHover"],U=["resetViewMapbox"]):G?Q=["hoverClosestGl2d"]:B?Q=["hoverClosestPie"]:N?(Q=["hoverClosestCartesian","hoverCompareCartesian"],U=["resetViewSankey"]):Q=["toggleHover"];D&&(Q=["toggleSpikelines","hoverClosestCartesian",
"hoverCompareCartesian"]);if(e(v)||J)Q=[];!D&&!G||H||(w=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==U[0]&&(U=["resetScale2d"]));x?P=["zoom3d","pan3d","orbitRotation","tableRotation"]:(D||G)&&!H||I?P=["zoom2d","pan2d"]:L||E?P=["pan2d"]:M&&(P=["zoom2d"]);l(v)&&P.push("select2d","lasso2d");if(Array.isArray(q)){v=[];for(D=0;D<q.length;D++)x=q[D],"string"===typeof x?-1!==d.indexOf(x)&&(u._has("mapbox")||u._has("cartesian"))&&P.push(x):v.push(x);q=v}r(P);r(w.concat(U));r(Q);return a(O,q)}function h(q){q=
g.list({_fullLayout:q},null,!0);for(var r=0;r<q.length;r++)if(!q[r].fixedrange)return!1;return!0}function l(q){for(var r=!1,u=0;u<q.length&&!r;u++){var v=q[u];if(v._module&&v._module.selectPoints)if(p.traceIs(v,"scatter-like")){if(k.hasMarkers(v)||k.hasText(v))r=!0}else if(p.traceIs(v,"box-violin")){if("all"===v.boxpoints||"all"===v.points)r=!0}else r=!0}return r}function e(q){for(var r=0;r<q.length;r++)if(!p.traceIs(q[r],"noHover"))return!1;return!0}function a(q,r){if(r.length)if(Array.isArray(r[0]))for(var u=
0;u<r.length;u++)q.push(r[u]);else q.push(r);return q}var g=b("../../plots/cartesian/axis_ids"),k=b("../../traces/scatter/subtypes"),p=b("../../registry"),n=b("../fx/helpers").isUnifiedHover,c=b("./modebar"),f=b("./buttons");F.exports=function(q){var r=q._fullLayout,u=q._context,v=r._modeBar;if(u.displayModeBar||u.watermark){if(!Array.isArray(u.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(u.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");
var w=u.modeBarButtons;if(Array.isArray(w)&&w.length)for(u=0;u<w.length;u++)for(var y=w[u],D=0;D<y.length;D++){var x=y[D];if("string"===typeof x)if(void 0!==f[x])w[u][D]=f[x];else throw Error("*modeBarButtons* configuration options invalid button name");}else w=!u.displayModeBar&&u.watermark?[]:m(q);v?v.update(q,w):r._modeBar=c(q,w)}else v&&(v.destroy(),delete r._modeBar)};var d="drawline drawopenpath drawclosedpath drawcircle drawrect eraseshape".split(" ")},{"../../plots/cartesian/axis_ids":800,
"../../registry":880,"../../traces/scatter/subtypes":1179,"../fx/helpers":651,"./buttons":674,"./modebar":677}],677:[function(b,F,C){function m(k){this.container=k.container;this.element=document.createElement("div");this.update(k.graphInfo,k.buttons);this.container.appendChild(this.element)}var h=b("d3"),l=b("fast-isnumeric"),e=b("../../lib"),a=b("../../fonts/ploticon"),g=new DOMParser;b=m.prototype;b.update=function(k,p){this.graphInfo=k;k=this.graphInfo._context;var n=this.graphInfo._fullLayout,
c="modebar-"+n._uid;this.element.setAttribute("id",c);this._uid=c;this.element.className="modebar";"hover"===k.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");"v"===n.modebar.orientation&&(this.element.className+=" vertical",p=p.reverse());var f=n.modebar,d="hover"===k.displayModeBar?".js-plotly-plot .plotly:hover ":"";e.deleteRelatedStyleRule(c);e.addRelatedStyleRule(c,d+"#"+c+" .modebar-group","background-color: "+f.bgcolor);e.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path",
"fill: "+f.color);e.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path","fill: "+f.activecolor);e.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+f.activecolor);c=!this.hasButtons(p);f=this.hasLogo!==k.displaylogo;d=this.locale!==k.locale;this.locale=k.locale;if(c||f||d)if(this.removeAllButtons(),this.updateButtons(p),k.watermark||k.displaylogo)p=this.getLogo(),k.watermark&&(p.className+=" watermark"),"v"===n.modebar.orientation?this.element.insertBefore(p,this.element.childNodes[0]):
this.element.appendChild(p),this.hasLogo=!0;this.updateActiveButton()};b.updateButtons=function(k){var p=this;this.buttons=k;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(n){var c=p.createGroup();n.forEach(function(f){var d=f.name;if(!d)throw Error("must provide button 'name' in button config");if(-1!==p.buttonsNames.indexOf(d))throw Error("button name '"+d+"' is taken");p.buttonsNames.push(d);f=p.createButton(f);p.buttonElements.push(f);c.appendChild(f)});p.element.appendChild(c)})};
b.createGroup=function(){var k=document.createElement("div");k.className="modebar-group";return k};b.createButton=function(k){var p=this,n=document.createElement("a");n.setAttribute("rel","tooltip");n.className="modebar-btn";var c=k.title;void 0===c?c=k.name:"function"===typeof c&&(c=c(this.graphInfo));(c||0===c)&&n.setAttribute("data-title",c);void 0!==k.attr&&n.setAttribute("data-attr",k.attr);c=k.val;void 0!==c&&("function"===typeof c&&(c=c(this.graphInfo)),n.setAttribute("data-val",c));if("function"!==
typeof k.click)throw Error("must provide button 'click' function in button config");n.addEventListener("click",function(f){k.click(p.graphInfo,f);p.updateActiveButton(f.currentTarget)});n.setAttribute("data-toggle",k.toggle||!1);k.toggle&&h.select(n).classed("active",!0);c=k.icon;"function"===typeof c?n.appendChild(c()):n.appendChild(this.createIcon(c||a.question));n.setAttribute("data-gravity",k.gravity||"n");return n};b.createIcon=function(k){var p=l(k.height)?Number(k.height):k.ascent-k.descent;
if(k.path){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox",[0,0,k.width,p].join(" "));n.setAttribute("class","icon");p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",k.path);k.transform?p.setAttribute("transform",k.transform):void 0!==k.ascent&&p.setAttribute("transform","matrix(1 0 0 -1 0 "+k.ascent+")");n.appendChild(p)}k.svg&&(n=g.parseFromString(k.svg,"application/xml").childNodes[0]);n.setAttribute("height","1em");
n.setAttribute("width","1em");return n};b.updateActiveButton=function(k){var p=this.graphInfo._fullLayout,n=void 0!==k?k.getAttribute("data-attr"):null;this.buttonElements.forEach(function(c){var f=c.getAttribute("data-val")||!0,d=c.getAttribute("data-attr"),q="true"===c.getAttribute("data-toggle");c=h.select(c);q?d===n&&c.classed("active",!c.classed("active")):(d=null===d?d:e.nestedProperty(p,d).get(),c.classed("active",d===f))})};b.hasButtons=function(k){var p=this.buttons;if(!p||k.length!==p.length)return!1;
for(var n=0;n<k.length;++n){if(k[n].length!==p[n].length)return!1;for(var c=0;c<k[n].length;c++)if(k[n][c].name!==p[n][c].name)return!1}return!0};b.getLogo=function(){var k=this.createGroup(),p=document.createElement("a");p.href="https://plotly.com/";p.target="_blank";p.setAttribute("data-title",e._(this.graphInfo,"Produced with Plotly"));p.className="modebar-btn plotlyjsicon modebar-btn--logo";p.appendChild(this.createIcon(a.newplotlylogo));k.appendChild(p);return k};b.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);
this.hasLogo=!1};b.destroy=function(){e.removeElement(this.container.querySelector(".modebar"));e.deleteRelatedStyleRule(this._uid)};F.exports=function(k,p){var n=k._fullLayout;k=new m({graphInfo:k,container:n._modebardiv.node(),buttons:p});n._privateplot&&h.select(k.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return k}},{"../../fonts/ploticon":728,"../../lib":749,d3:169,"fast-isnumeric":241}],678:[function(b,F,C){C=b("../../plots/font_attributes");var m=b("../color/attributes");
b=b("../../plot_api/plot_template").templatedArray;b=b("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});F.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,
x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:C({editType:"plot"}),bgcolor:{valType:"color",dflt:m.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"number",
min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":787,"../../plots/font_attributes":825,"../color/attributes":614}],679:[function(b,F,C){F.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],680:[function(b,F,C){function m(n,c,f,d){function q(r,u){return l.coerce(n,c,k.buttons,r,u)}f=d.calendar;q("visible")&&(d=q("step"),"all"!==d&&(!f||"gregorian"===f||"month"!==d&&"year"!==d?q("stepmode"):c.stepmode="backward",q("count")),q("label"))}function h(n,
c,f){f=f.filter(function(u){return c[u].anchor===n._id});for(var d=0,q=0;q<f.length;q++){var r=c[f[q]].domain;r&&(d=Math.max(r[1],d))}return[n.domain[0],d+p.yPad]}var l=b("../../lib"),e=b("../color"),a=b("../../plot_api/plot_template"),g=b("../../plots/array_container_defaults"),k=b("./attributes"),p=b("./constants");F.exports=function(n,c,f,d,q){function r(w,y){return l.coerce(u,v,k,w,y)}var u=n.rangeselector||{},v=a.newContainer(c,"rangeselector");q=g(u,v,{name:"buttons",handleItemDefaults:m,calendar:q});
r("visible",0<q.length)&&(d=h(c,f,d),r("x",d[0]),r("y",d[1]),l.noneOrAll(n,c,["x","y"]),r("xanchor"),r("yanchor"),l.coerceFont(r,"font",f.font),n=r("bgcolor"),r("activecolor",e.contrast(n,p.lightAmount,p.darkAmount)),r("bordercolor"),r("borderwidth"))}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../color":615,"./attributes":678,"./constants":679}],681:[function(b,F,C){function m(E){E=u.list(E,"x",!0);for(var B=[],t=0;t<E.length;t++){var G=E[t];
G.rangeselector&&G.rangeselector.visible&&B.push(G)}return B}function h(E){return E._id}function l(E,B,t){if("all"===B.step)return!0===E.autorange;B=Object.keys(t);return E.range[0]===t[B[0]]&&E.range[1]===t[B[1]]}function e(E,B,t){E=q.ensureSingle(E,"rect","selector-rect",function(G){G.attr("shape-rendering","crispEdges")});E.attr({rx:D.rx,ry:D.ry});E.call(f.stroke,B.bordercolor).call(f.fill,t._isActive||t._isHovered?B.activecolor:B.bgcolor).style("stroke-width",B.borderwidth+"px")}function a(E,
B,t,G){q.ensureSingle(E,"text","selector-text",function(I){I.classed("user-select-none",!0).attr("text-anchor","middle")}).call(d.font,B.font).text(g(t,G._fullLayout._meta)).call(function(I){r.convertToTspans(I,G)})}function g(E,B){return E.label?B?q.templateString(E.label,B):E.label:"all"===E.step?"all":E.count+E.step.charAt(0)}function k(E,B,t,G,I){var L=0,M=0,N=t.borderwidth;B.each(function(){var Q=p.select(this).select(".selector-text");Q=Math.max(t.font.size*v*r.lineCount(Q),16)+3;M=Math.max(M,
Q)});B.each(function(){var Q=p.select(this),U=Q.select(".selector-rect"),P=Q.select(".selector-text"),V=P.node()&&d.bBox(P.node()).width,Y=t.font.size*v,ba=r.lineCount(P);V=Math.max(V+10,D.minButtonWidth);Q.attr("transform","translate("+(N+L)+","+N+")");U.attr({x:0,y:0,width:V,height:M});r.positionText(P,V/2,M/2-(ba-1)*Y/2+3);L+=V+5});var H=E._fullLayout._size;B=H.l+H.w*t.x;H=H.t+H.h*(1-t.y);var J="left";q.isRightAnchor(t)&&(B-=L,J="right");q.isCenterAnchor(t)&&(B-=L/2,J="center");var O="top";q.isBottomAnchor(t)&&
(H-=M,O="bottom");q.isMiddleAnchor(t)&&(H-=M/2,O="middle");L=Math.ceil(L);M=Math.ceil(M);B=Math.round(B);H=Math.round(H);c.autoMargin(E,G+"-range-selector",{x:t.x,y:t.y,l:L*w[J],r:L*y[J],b:M*y[O],t:M*w[O]});I.attr("transform","translate("+B+","+H+")")}var p=b("d3"),n=b("../../registry"),c=b("../../plots/plots"),f=b("../color"),d=b("../drawing"),q=b("../../lib"),r=b("../../lib/svg_text_utils"),u=b("../../plots/cartesian/axis_ids");C=b("../../constants/alignment");var v=C.LINE_SPACING,w=C.FROM_TL,y=
C.FROM_BR,D=b("./constants"),x=b("./get_update_object");F.exports=function(E){var B=E._fullLayout._infolayer.selectAll(".rangeselector").data(m(E),h);B.enter().append("g").classed("rangeselector",!0);B.exit().remove();B.style({cursor:"pointer","pointer-events":"all"});B.each(function(t){var G=p.select(this),I=t.rangeselector,L=G.selectAll("g.button").data(q.filterVisible(I.buttons));L.enter().append("g").classed("button",!0);L.exit().remove();L.each(function(M){var N=p.select(this),H=x(t,M);M._isActive=
l(t,M,H);N.call(e,I,M);N.call(a,I,M,E);N.on("click",function(){E._dragged||n.call("_guiRelayout",E,H)});N.on("mouseover",function(){M._isHovered=!0;N.call(e,I,M)});N.on("mouseout",function(){M._isHovered=!1;N.call(e,I,M)})});k(E,L,I,t._name,G)})}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../color":615,"../drawing":637,"./constants":679,"./get_update_object":682,d3:169}],682:[function(b,
F,C){var m=b("d3");F.exports=function(h,l){var e=h._name,a={};if("all"===l.step)a[e+".autorange"]=!0;else{var g=h.range,k=new Date(h.r2l(g[1])),p=l.step,n=l.count;switch(l.stepmode){case "backward":var c=h.l2r(+m.time[p].utc.offset(k,-n));break;case "todate":l=m.time[p].utc.offset(k,-n),c=h.l2r(+m.time[p].utc.ceil(l))}h=[c,g[1]];a[e+".range[0]"]=h[0];a[e+".range[1]"]=h[1]}return a}},{d3:169}],683:[function(b,F,C){F.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:b("./attributes")}}},
layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":678,"./defaults":680,"./draw":681}],684:[function(b,F,C){b=b("../color/attributes");F.exports={bgcolor:{valType:"color",dflt:b.background,editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",
items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":614}],685:[function(b,F,C){var m=b("../../plots/cartesian/axis_ids").list,h=b("../../plots/cartesian/autorange").getAutoRange,l=b("./constants");F.exports=function(e){for(var a=
m(e,"x",!0),g=0;g<a.length;g++){var k=a[g],p=k[l.name];p&&p.visible&&p.autorange&&(p._input.autorange=!0,p._input.range=p.range=h(e,k))}}},{"../../plots/cartesian/autorange":796,"../../plots/cartesian/axis_ids":800,"./constants":686}],686:[function(b,F,C){F.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",
grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",
grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],687:[function(b,F,C){var m=b("../../lib"),h=b("../../plot_api/plot_template"),l=b("../../plots/cartesian/axis_ids"),e=b("./attributes"),a=b("./oppaxis_attributes");F.exports=function(g,k,p){function n(y,D){return m.coerce(d,q,e,y,D)}function c(y,D){return m.coerce(u,v,a,y,D)}g=g[p];var f=k[p];if(g.rangeslider||k._requestRangeslider[f._id]){m.isPlainObject(g.rangeslider)||
(g.rangeslider={});var d=g.rangeslider,q=h.newContainer(f,"rangeslider");if(n("visible")){n("bgcolor",k.plot_bgcolor);n("bordercolor");n("borderwidth");n("thickness");n("autorange",!f.isValidRange(d.range));n("range");if(g=k._subplots)for(g=g.cartesian.filter(function(y){return y.substr(0,y.indexOf("y"))===l.name2id(p)}).map(function(y){return y.substr(y.indexOf("y"),y.length)}),g=m.simpleMap(g,l.id2name),f=0;f<g.length;f++){var r=g[f];var u=d[r]||{};var v=h.newContainer(q,r,"yaxis");r=k[r];var w;
u.range&&r.isValidRange(u.range)&&(w="fixed");"match"!==c("rangemode",w)&&c("range",r.range.slice())}q._input=d}}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/cartesian/axis_ids":800,"./attributes":684,"./oppaxis_attributes":691}],688:[function(b,F,C){function m(t,G,I,L){function M(){function O(ia){var fa=+(ia.clientX||ia.touches[0].clientX)-V;switch(P){case N:var ha="ew-resize";ia=ba+fa;fa=ea+fa;break;case H:ha="col-resize";ia=ba+fa;fa=ea;break;case J:ha="col-resize";ia=ba;
fa=ea+fa;break;default:ha="ew-resize",ia=Y,fa=Y+fa}if(fa<ia){var na=fa;fa=ia;ia=na}L._pixelMin=ia;L._pixelMax=fa;E(f.select(ca),ha);h(t,G,I,L)}function Q(){ca.removeEventListener("mousemove",O);ca.removeEventListener("mouseup",Q);this.removeEventListener("touchmove",O);this.removeEventListener("touchend",Q);r.removeElement(ca)}var U=f.event,P=U.target,V=U.clientX||U.touches[0].clientX,Y=V-t.node().getBoundingClientRect().left,ba=L.d2p(I._rl[0]),ea=L.d2p(I._rl[1]),ca=x.coverSlip();this.addEventListener("touchmove",
O);this.addEventListener("touchend",Q);ca.addEventListener("mousemove",O);ca.addEventListener("mouseup",Q)}var N=t.select("rect."+B.slideBoxClassName).node(),H=t.select("rect."+B.grabAreaMinClassName).node(),J=t.select("rect."+B.grabAreaMaxClassName).node();t.on("mousedown",M);t.on("touchstart",M)}function h(t,G,I,L){var M=I.l2r(r.constrain(L.p2d(L._pixelMin),L._rl[0],L._rl[1])),N=I.l2r(r.constrain(L.p2d(L._pixelMax),L._rl[0],L._rl[1]));window.requestAnimationFrame(function(){d.call("_guiRelayout",
G,I._name+".range",[M,N])})}function l(t,G,I,L,M,N){G=B.handleWidth/2;var H=r.constrain(L.d2p(I._rl[0]),0,L._width);I=r.constrain(L.d2p(I._rl[1]),0,L._width);t.select("rect."+B.slideBoxClassName).attr("x",H).attr("width",I-H);t.select("rect."+B.maskMinClassName).attr("width",H);t.select("rect."+B.maskMaxClassName).attr("x",I).attr("width",L._width-I);"match"!==N.rangemode&&(N=L._height-r.constrain(L.d2pOppAxis(M._rl[1]),0,L._height),M=L._height-r.constrain(L.d2pOppAxis(M._rl[0]),0,L._height),t.select("rect."+
B.maskMinOppAxisClassName).attr("x",H).attr("height",N).attr("width",I-H),t.select("rect."+B.maskMaxOppAxisClassName).attr("x",H).attr("y",M).attr("height",L._height-M).attr("width",I-H),t.select("rect."+B.slideBoxClassName).attr("y",N).attr("height",M-N));M=Math.round(r.constrain(H-G,-G,L._width+G))-.5;L=Math.round(r.constrain(I-G,-G,L._width+G))+.5;t.select("g."+B.grabberMinClassName).attr("transform","translate("+M+",0.5)");t.select("g."+B.grabberMaxClassName).attr("transform","translate("+L+",0.5)")}
function e(t,G,I,L){t=r.ensureSingle(t,"rect",B.bgClassName,function(N){N.attr({x:0,y:0,"shape-rendering":"crispEdges"})});I=0===L.borderwidth%2?L.borderwidth:L.borderwidth-1;var M=-L._offsetShift;G=u.crispRound(G,L.borderwidth);t.attr({width:L._width+I,height:L._height+I,transform:"translate("+M+","+M+")",fill:L.bgcolor,stroke:L.bordercolor,"stroke-width":G})}function a(t,G,I,L){r.ensureSingleById(G._fullLayout._topdefs,"clipPath",L._clipId,function(M){M.append("rect").attr({x:0,y:0})}).select("rect").attr({width:L._width,
height:L._height})}function g(t,G,I,L){var M=G.calcdata;t=t.selectAll("g."+B.rangePlotClassName).data(I._subplotsWith,r.identity);t.enter().append("g").attr("class",function(H){return B.rangePlotClassName+" "+H}).call(u.setClipUrl,L._clipId,G);t.order();t.exit().remove();var N;t.each(function(H,J){var O=f.select(this);J=0===J;var Q=D.getFromId(G,H,"y"),U=Q._name,P=L[U],V={data:[],layout:{xaxis:{type:I.type,domain:[0,1],range:L.range.slice(),calendar:I.calendar},width:L._width,height:L._height,margin:{t:0,
b:0,l:0,r:0}},_context:G._context};I.rangebreaks&&(V.layout.xaxis.rangebreaks=I.rangebreaks);V.layout[U]={type:Q.type,domain:[0,1],range:"match"!==P.rangemode?P.range.slice():Q.range.slice(),calendar:Q.calendar};Q.rangebreaks&&(V.layout[U].rangebreaks=Q.rangebreaks);q.supplyDefaults(V);Q=V._fullLayout.xaxis;U=V._fullLayout[U];Q.clearCalc();Q.setScale();U.clearCalc();U.setScale();O={id:H,plotgroup:O,xaxis:Q,yaxis:U,isRangePlot:!0};J?N=O:(O.mainplot="xy",O.mainplotinfo=N);y.rangePlot(G,O,k(M,H))})}
function k(t,G){for(var I=[],L=0;L<t.length;L++){var M=t[L],N=M[0].trace;N.xaxis+N.yaxis===G&&I.push(M)}return I}function p(t,G,I,L,M){r.ensureSingle(t,"rect",B.maskMinClassName,function(N){N.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",L._height).call(v.fill,B.maskColor);r.ensureSingle(t,"rect",B.maskMaxClassName,function(N){N.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",L._height).call(v.fill,B.maskColor);"match"!==M.rangemode&&(r.ensureSingle(t,"rect",B.maskMinOppAxisClassName,
function(N){N.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",L._width).call(v.fill,B.maskOppAxisColor),r.ensureSingle(t,"rect",B.maskMaxOppAxisClassName,function(N){N.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",L._width).style("border-top",B.maskOppBorder).call(v.fill,B.maskOppAxisColor))}function n(t,G,I,L){G._context.staticPlot||r.ensureSingle(t,"rect",B.slideBoxClassName,function(M){M.attr({y:0,cursor:B.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:L._height,
fill:B.slideBoxFill})}function c(t,G,I,L){I=r.ensureSingle(t,"g",B.grabberMinClassName);t=r.ensureSingle(t,"g",B.grabberMaxClassName);var M={x:0,width:B.handleWidth,rx:B.handleRadius,fill:v.background,stroke:v.defaultLine,"stroke-width":B.handleStrokeWidth,"shape-rendering":"crispEdges"},N={y:Math.round(L._height/4),height:Math.round(L._height/2)};r.ensureSingle(I,"rect",B.handleMinClassName,function(J){J.attr(M)}).attr(N);r.ensureSingle(t,"rect",B.handleMaxClassName,function(J){J.attr(M)}).attr(N);
if(!G._context.staticPlot){var H={width:B.grabAreaWidth,x:0,y:0,fill:B.grabAreaFill,cursor:B.grabAreaCursor};r.ensureSingle(I,"rect",B.grabAreaMinClassName,function(J){J.attr(H)}).attr("height",L._height);r.ensureSingle(t,"rect",B.grabAreaMaxClassName,function(J){J.attr(H)}).attr("height",L._height)}}var f=b("d3"),d=b("../../registry"),q=b("../../plots/plots"),r=b("../../lib"),u=b("../drawing"),v=b("../color"),w=b("../titles"),y=b("../../plots/cartesian"),D=b("../../plots/cartesian/axis_ids"),x=b("../dragelement"),
E=b("../../lib/setcursor"),B=b("./constants");F.exports=function(t){for(var G=t._fullLayout,I=G._rangeSliderData,L=0;L<I.length;L++){var M=I[L][B.name];M._clipId=M._id+"-"+G._uid}L=G._infolayer.selectAll("g."+B.containerClassName).data(I,function(N){return N._name});L.exit().each(function(N){G._topdefs.select("#"+N[B.name]._clipId).remove()}).remove();0!==I.length&&(L.enter().append("g").classed(B.containerClassName,!0).attr("pointer-events","all"),L.each(function(N){var H=f.select(this),J=N[B.name],
O=G[D.id2name(N.anchor)],Q=J[D.id2name(N.anchor)];if(J.range){var U=r.simpleMap(J.range,N.r2l),P=r.simpleMap(N.range,N.r2l);J.range=J._input.range=r.simpleMap(P[0]<P[1]?[Math.min(U[0],P[0]),Math.max(U[1],P[1])]:[Math.max(U[0],P[0]),Math.min(U[1],P[1])],N.l2r)}N.cleanRange("rangeslider.range");P=G._size;var V=N.domain;J._width=P.w*(V[1]-V[0]);U=Math.round(P.t+P.h*(1-N._counterDomainMin)+("bottom"===N.side?N._depth:0)+J._offsetShift+B.extraPad);H.attr("transform","translate("+Math.round(P.l+P.w*V[0])+
","+U+")");J._rl=r.simpleMap(J.range,N.r2l);var Y=J._rl[0];P=J._rl[1];var ba=P-Y;J.p2d=function(ra){return ra/J._width*ba+Y};J.d2p=function(ra){return(ra-Y)/ba*J._width};if(N.rangebreaks){var ea=N.locateBreaks(Y,P);if(ea.length){var ca=0;for(V=0;V<ea.length;V++){var ia=ea[V];ca+=ia.max-ia.min}var fa=J._width/(P-Y-ca),ha=[-fa*Y];for(V=0;V<ea.length;V++)ia=ea[V],ha.push(ha[ha.length-1]-fa*(ia.max-ia.min));J.d2p=function(ra){for(var ta=ha[0],oa=0;oa<ea.length;oa++){var ua=ea[oa];if(ra>=ua.max)ta=ha[oa+
1];else if(ra<ua.min)break}return ta+fa*ra};for(V=0;V<ea.length;V++)ia=ea[V],ia.pmin=J.d2p(ia.min),ia.pmax=J.d2p(ia.max);J.p2d=function(ra){for(var ta=ha[0],oa=0;oa<ea.length;oa++){var ua=ea[oa];if(ra>=ua.pmax)ta=ha[oa+1];else if(ra<ua.pmin)break}return(ra-ta)/fa}}}if("match"!==Q.rangemode){var na=O.r2l(Q.range[0]),pa=O.r2l(Q.range[1])-na;J.d2pOppAxis=function(ra){return(ra-na)/pa*J._height}}H.call(e,t,N,J).call(a,t,N,J).call(g,t,N,J).call(p,t,N,J,Q).call(n,t,N,J).call(c,t,N,J);m(H,t,N,J);l(H,t,N,
J,O,Q);"bottom"===N.side&&w.draw(t,N._id+"title",{propContainer:N,propName:N._name+".title",placeholder:G._dfltTitle.x,attributes:{x:N._offset+N._length/2,y:U+J._height+J._offsetShift+10+1.5*N.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":749,"../../lib/setcursor":769,"../../plots/cartesian":810,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"../titles":710,"./constants":686,d3:169}],689:[function(b,
F,C){function m(k){return(k=k&&k[g])&&k.visible}var h=b("../../plots/cartesian/axis_ids"),l=b("../../lib/svg_text_utils"),e=b("./constants"),a=b("../../constants/alignment").LINE_SPACING,g=e.name;C.isVisible=m;C.makeData=function(k){var p=h.list({_fullLayout:k},"x",!0),n=k.margin,c=[];if(!k._has("gl2d"))for(var f=0;f<p.length;f++){var d=p[f];if(m(d)){c.push(d);var q=d[g];q._id=g+d._id;q._height=(k.height-n.b-n.t)*q.thickness;q._offsetShift=Math.floor(q.borderwidth/2)}}k._rangeSliderData=c};C.autoMarginOpts=
function(k,p){k=k._fullLayout;var n=p[g],c=p._id.charAt(0),f=0,d=0;"bottom"===p.side&&(f=p._depth,p.title.text!==k._dfltTitle[c]&&(d=1.5*p.title.font.size+10+n._offsetShift,c=(p.title.text.match(l.BR_TAG_ALL)||[]).length,d+=c*p.title.font.size*a));return{x:0,y:p._counterDomainMin,l:0,r:0,t:0,b:n._height+f+Math.max(k.margin.b,d),pad:e.extraPad+2*n._offsetShift}}},{"../../constants/alignment":717,"../../lib/svg_text_utils":773,"../../plots/cartesian/axis_ids":800,"./constants":686}],690:[function(b,
F,C){C=b("../../lib");var m=b("./attributes"),h=b("./oppaxis_attributes"),l=b("./helpers");F.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:C.extendFlat({},m,{yaxis:h})}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),calcAutorange:b("./calc_autorange"),draw:b("./draw"),isVisible:l.isVisible,makeData:l.makeData,autoMarginOpts:l.autoMarginOpts}},{"../../lib":749,"./attributes":684,"./calc_autorange":685,"./defaults":687,"./draw":688,"./helpers":689,
"./oppaxis_attributes":691}],691:[function(b,F,C){F.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],692:[function(b,F,C){C=b("../annotations/attributes");var m=b("../../traces/scatter/attributes").line,h=b("../drawing/attributes").dash,l=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;
F.exports=b("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:l({},C.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},
yref:l({},C.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:l({},m.color,{editType:"arraydraw"}),width:l({},m.width,{editType:"calc+arraydraw"}),dash:l({},h,{editType:"arraydraw"}),
editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../lib/extend":739,"../../plot_api/plot_template":787,"../../traces/scatter/attributes":1155,"../annotations/attributes":598,"../drawing/attributes":636}],693:[function(b,F,C){function m(k,p,n,c,f,d){k/=2;return"pixel"===
p?(n=f?g.extractPathCoords(f,d?a.paramIsY:a.paramIsX):[n,c],p=l.aggNums(Math.max,null,n),n=l.aggNums(Math.min,null,n),n=0>n?Math.abs(n)+k:k,p=0<p?p+k:k,{ppad:k,ppadplus:d?n:p,ppadminus:d?p:n}):{ppad:k}}function h(k,p,n,c,f){var d="category"===k.type||"multicategory"===k.type?k.r2c:k.d2c;if(void 0!==p)return[d(p),d(n)];if(c){p=Infinity;n=-Infinity;c=c.match(a.segmentRE);var q;"date"===k.type&&(d=g.decodeDate(d));for(k=0;k<c.length;k++){var r=c[k];r=f[r.charAt(0)].drawn;void 0!==r&&(!(q=c[k].substr(1).match(a.paramRE))||
q.length<r||(r=d(q[r]),r<p&&(p=r),r>n&&(n=r)))}if(n>=p)return[p,n]}}var l=b("../../lib"),e=b("../../plots/cartesian/axes"),a=b("./constants"),g=b("./helpers");F.exports=function(k){var p=l.filterVisible(k._fullLayout.shapes);if(p.length&&k._fullData.length)for(var n=0;n<p.length;n++){var c=p[n];c._extremes={};if("paper"!==c.xref){var f="pixel"===c.xsizemode?c.xanchor:c.x0;var d="pixel"===c.xsizemode?c.xanchor:c.x1;var q=e.getFromId(k,c.xref);(f=h(q,f,d,c.path,a.paramIsX))&&(c._extremes[q._id]=e.findExtremes(q,
f,m(c.line.width,c.xsizemode,c.x0,c.x1,c.path,!1)))}"paper"!==c.yref&&(f="pixel"===c.ysizemode?c.yanchor:c.y0,d="pixel"===c.ysizemode?c.yanchor:c.y1,q=e.getFromId(k,c.yref),(f=h(q,f,d,c.path,a.paramIsY))&&(c._extremes[q._id]=e.findExtremes(q,f,m(c.line.width,c.ysizemode,c.y0,c.y1,c.path,!0))))}}},{"../../lib":749,"../../plots/cartesian/axes":797,"./constants":694,"./helpers":703}],694:[function(b,F,C){F.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,
drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],695:[function(b,F,C){function m(k,p,n){function c(L,M){return h.coerce(k,p,a,L,M)}if(c("visible")){var f=c("path");f=c("type",f?"path":"rect");"path"!==p.type&&delete p.path;
c("editable");c("layer");c("opacity");c("fillcolor");c("fillrule");c("line.width")&&(c("line.color"),c("line.dash"));for(var d=c("xsizemode"),q=c("ysizemode"),r=["x","y"],u=0;2>u;u++){var v=r[u],w=v+"anchor",y="x"===v?d:q,D={_fullLayout:n},x=l.coerceRef(k,p,D,v,"","paper");if("paper"!==x){var E=l.getFromId(D,x);E._shapeIndices.push(p._index);var B=g.rangeToShapePosition(E);E=g.shapePositionToRange(E)}else E=B=h.identity;if("path"!==f){var t=v+"0";v+="1";var G=k[t],I=k[v];k[t]=E(k[t],!0);k[v]=E(k[v],
!0);"pixel"===y?(c(t,0),c(v,10)):(l.coercePosition(p,D,c,x,t,.25),l.coercePosition(p,D,c,x,v,.75));p[t]=B(p[t]);p[v]=B(p[v]);k[t]=G;k[v]=I}"pixel"===y&&(y=k[w],k[w]=E(k[w],!0),l.coercePosition(p,D,c,x,w,.25),p[w]=B(p[w]),k[w]=y)}"path"===f?c("path"):h.noneOrAll(k,p,["x0","x1","y0","y1"])}}var h=b("../../lib"),l=b("../../plots/cartesian/axes"),e=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./helpers");F.exports=function(k,p){e(k,p,{name:"shapes",handleItemDefaults:m})}},{"../../lib":749,
"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":692,"./helpers":703}],696:[function(b,F,C){function m(B){var t=B._fullLayout;t._shapeUpperLayer.selectAll("path").remove();t._shapeLowerLayer.selectAll("path").remove();for(var G in t._plots){var I=t._plots[G].shapelayer;I&&I.selectAll("path").remove()}for(G=0;G<t.shapes.length;G++)t.shapes[G].visible&&h(B,G)}function h(B,t){function G(N){var H=a(B,L),J={"data-index":t,"fill-rule":L.fillrule,d:H},O=L.opacity,
Q=L.fillcolor,U=L.line.width?L.line.color:"rgba(0,0,0,0)",P=L.line.width,V=L.line.dash;P||!0!==L.editable||(P=5,V="solid");var Y="Z"!==H[H.length-1],ba=!B._context.edits.shapePosition&&L.editable&&B._fullLayout._activeShapeIndex===t;ba&&(Q=Y?"rgba(0,0,0,0)":B._fullLayout.activeshape.fillcolor,O=B._fullLayout.activeshape.opacity);var ea=N.append("path").attr(J).style("opacity",O).call(u.stroke,U).call(u.fill,Q).call(v.dashLine,V,P);l(ea,B,L);if(ba||B._context.edits.shapePosition)var ca=w(B.layout,
"shapes",L);ba?(ea.style({cursor:"move"}),N={element:ea.node(),plotinfo:M,gd:B,editHelpers:ca,isActiveShape:!0},H=d(H,B),q(H,ea,N)):B._context.edits.shapePosition?e(B,ea,L,t,N,ca):!0===L.editable&&ea.style("pointer-events",Y||.5>=u.opacity(Q)*O?"stroke":"all");ea.node().addEventListener("click",function(){a:{if(!B._context.edits.shapePosition){var ia=+ea.node().getAttribute("data-index");if(0<=ia){if(ia===B._fullLayout._activeShapeIndex){p(B);ia=void 0;break a}B._fullLayout._activeShapeIndex=ia;B._fullLayout._deactivateShape=
p;m(B)}}ia=void 0}return ia})}B._fullLayout._paperdiv.selectAll('.shapelayer [data-index\x3d"'+t+'"]').remove();var I=E.makeOptionsAndPlotinfo(B,t),L=I.options,M=I.plotinfo;L._input&&!1!==L.visible&&("below"!==L.layer?G(B._fullLayout._shapeUpperLayer):"paper"===L.xref||"paper"===L.yref?G(B._fullLayout._shapeLowerLayer):M._hadPlotinfo?G((M.mainplotinfo||M).shapelayer):G(B._fullLayout._shapeLowerLayer))}function l(B,t,G){G=(G.xref+G.yref).replace(/paper/g,"");v.setClipUrl(B,G?"clip"+t._fullLayout._uid+
G:null,t)}function e(B,t,G,I,L,M){function N(){var lb=Math.max(G.line.width,10),hb=L.append("g").attr("data-index",I);hb.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":lb,"stroke-opacity":"0"});var Fa={"fill-opacity":"0"};lb=Math.max(lb/2,10);hb.append("circle").attr({"data-line-point":"start-point",cx:U?Ja(G.xanchor)+G.x0:Ja(G.x0),cy:P?eb(G.yanchor)-G.y0:eb(G.y0),r:lb}).style(Fa).classed("cursor-grab",!0);hb.append("circle").attr({"data-line-point":"end-point",cx:U?Ja(G.xanchor)+
G.x1:Ja(G.x1),cy:P?eb(G.yanchor)-G.y1:eb(G.y1),r:lb}).style(Fa).classed("cursor-grab",!0);return hb}function H(lb){if(B._fullLayout._drawing)Qa=null;else if(V)Qa="path"===lb.target.tagName?"move":"start-point"===lb.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var hb=Ia.element.getBoundingClientRect(),Fa=hb.right-hb.left,La=hb.bottom-hb.top,Oa=lb.clientX-hb.left;hb=lb.clientY-hb.top;lb=!Y&&10<Fa&&10<La&&!lb.shiftKey?y.getCursor(Oa/Fa,1-hb/La):"move";
D(t,lb);Qa=lb.split("-")[0]}}function J(lb,hb){if("path"===G.type){var Fa=function(Oa){return Oa},La=Fa;U?ba("xanchor",G.xanchor=Ra(ha+lb)):(La=function(Oa){return Ra(Ja(Oa)+lb)},xa&&"date"===xa.type&&(La=E.encodeDate(La)));P?ba("yanchor",G.yanchor=Wa(na+hb)):(Fa=function(Oa){return Wa(eb(Oa)+hb)},Ca&&"date"===Ca.type&&(Fa=E.encodeDate(Fa)));ba("path",G.path=k(qa,La,Fa))}else U?ba("xanchor",G.xanchor=Ra(ha+lb)):(ba("x0",G.x0=Ra(ea+lb)),ba("x1",G.x1=Ra(ia+lb))),P?ba("yanchor",G.yanchor=Wa(na+hb)):
(ba("y0",G.y0=Wa(ca+hb)),ba("y1",G.y1=Wa(fa+hb)));t.attr("d",a(B,G));Q(L,G)}function O(lb,hb){if(Y){var Fa=function(Ta){return Ta},La=Fa;U?ba("xanchor",G.xanchor=Ra(ha+lb)):(La=function(Ta){return Ra(Ja(Ta)+lb)},xa&&"date"===xa.type&&(La=E.encodeDate(La)));P?ba("yanchor",G.yanchor=Wa(na+hb)):(Fa=function(Ta){return Wa(eb(Ta)+hb)},Ca&&"date"===Ca.type&&(Fa=E.encodeDate(Fa)));ba("path",G.path=k(qa,La,Fa))}else if(V)"resize-over-start-point"===Qa?(La=ea+lb,Fa=P?ca-hb:ca+hb,ba("x0",G.x0=U?La:Ra(La)),
ba("y0",G.y0=P?Fa:Wa(Fa))):"resize-over-end-point"===Qa&&(La=ia+lb,Fa=P?fa-hb:fa+hb,ba("x1",G.x1=U?La:Ra(La)),ba("y1",G.y1=P?Fa:Wa(Fa)));else{La=-1!==Qa.indexOf("n");Fa=-1!==Qa.indexOf("s");var Oa=-1!==Qa.indexOf("w"),fb=-1!==Qa.indexOf("e"),bb=La?pa+hb:pa,Pa=Fa?ra+hb:ra;Oa=Oa?ta+lb:ta;fb=fb?oa+lb:oa;P&&(La&&(bb=pa-hb),Fa&&(Pa=ra-hb));if(!P&&10<Pa-bb||P&&10<bb-Pa)ba(ua,G[ua]=P?bb:Wa(bb)),ba(ka,G[ka]=P?Pa:Wa(Pa));10<fb-Oa&&(ba(sa,G[sa]=U?Oa:Ra(Oa)),ba(ya,G[ya]=U?fb:Ra(fb)))}t.attr("d",a(B,G));Q(L,
G)}function Q(lb,hb){if(U||P){var Fa="path"!==hb.type;lb=lb.selectAll(".visual-cue").data([0]);lb.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var La=Ja(U?hb.xanchor:c.midRange(Fa?[hb.x0,hb.x1]:E.extractPathCoords(hb.path,x.paramIsX)));hb=eb(P?hb.yanchor:c.midRange(Fa?[hb.y0,hb.y1]:E.extractPathCoords(hb.path,x.paramIsY)));La=E.roundPositionForSharpStrokeRendering(La,1);hb=E.roundPositionForSharpStrokeRendering(hb,1);U&&P?
lb.attr("d","M"+(La-1-1)+","+(hb-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):U?lb.attr("d","M"+(La-1-1)+","+(hb-9-1)+"v18 h2 v-18 Z"):lb.attr("d","M"+(La-9-1)+","+(hb-1-1)+"h18 v2 h-18 Z")}}var U="pixel"===G.xsizemode,P="pixel"===G.ysizemode,V="line"===G.type,Y="path"===G.type,ba=M.modifyItem,ea,ca,ia,fa,ha,na,pa,ra,ta,oa,ua,ka,sa,ya,qa,xa=f.getFromId(B,G.xref),Ca=f.getFromId(B,G.yref),Ja=E.getDataToPixel(B,xa),eb=E.getDataToPixel(B,Ca,!0),Ra=E.getPixelToData(B,xa),Wa=E.getPixelToData(B,Ca,!0),Ea=V?
N():t,Ia={element:Ea.node(),gd:B,prepFn:function(lb){if(!B._fullLayout._drawing){U&&(ha=Ja(G.xanchor));P&&(na=eb(G.yanchor));"path"===G.type?qa=G.path:(ea=U?G.x0:Ja(G.x0),ca=P?G.y0:eb(G.y0),ia=U?G.x1:Ja(G.x1),fa=P?G.y1:eb(G.y1));ea<ia?(ta=ea,sa="x0",oa=ia,ya="x1"):(ta=ia,sa="x1",oa=ea,ya="x0");!P&&ca<fa||P&&ca>fa?(pa=ca,ua="y0",ra=fa,ka="y1"):(pa=fa,ua="y1",ra=ca,ka="y0");H(lb);Q(L,G);var hb=G.xref,Fa=G.yref,La=f.getFromId(B,hb),Oa=f.getFromId(B,Fa),fb="";"paper"===hb||La.autorange||(fb+=hb);"paper"===
Fa||Oa.autorange||(fb+=Fa);v.setClipUrl(t,fb?"clip"+B._fullLayout._uid+fb:null,B);Ia.moveFn="move"===Qa?J:O;Ia.altKey=lb.altKey}},doneFn:function(){B._fullLayout._drawing||(D(t),L.selectAll(".visual-cue").remove(),l(t,B,G),n.call("_guiRelayout",B,M.getUpdateObj()))},clickFn:function(){B._fullLayout._drawing||L.selectAll(".visual-cue").remove()}},Qa;y.init(Ia);Ea.node().onmousemove=H}function a(B,t){var G=t.type,I=f.getFromId(B,t.xref),L=f.getFromId(B,t.yref),M=B._fullLayout._size;if(I){var N=E.shapePositionToRange(I);
var H=function(U){return I._offset+I.r2p(N(U,!0))}}else H=function(U){return M.l+M.w*U};if(L){var J=E.shapePositionToRange(L);var O=function(U){return L._offset+L.r2p(J(U,!0))}}else O=function(U){return M.t+M.h*(1-U)};if("path"===G)return I&&"date"===I.type&&(H=E.decodeDate(H)),L&&"date"===L.type&&(O=E.decodeDate(O)),g(t,H,O);if("pixel"===t.xsizemode){H=H(t.xanchor);B=H+t.x0;var Q=H+t.x1}else B=H(t.x0),Q=H(t.x1);"pixel"===t.ysizemode?(O=O(t.yanchor),H=O-t.y0,t=O-t.y1):(H=O(t.y0),t=O(t.y1));if("line"===
G)return"M"+B+","+H+"L"+Q+","+t;if("rect"===G)return"M"+B+","+H+"H"+Q+"V"+t+"H"+B+"Z";G=(B+Q)/2;t=(H+t)/2;B=Math.abs(G-B);H=Math.abs(t-H);O="A"+B+","+H;B=G+B+","+t;return"M"+B+O+" 0 1,1 "+(G+","+(t-H))+O+" 0 0,1 "+B+"Z"}function g(B,t,G){var I=B.xsizemode,L=B.ysizemode,M=B.xanchor,N=B.yanchor;return B.path.replace(x.segmentRE,function(H){var J=0,O=H.charAt(0),Q=x.paramIsX[O],U=x.paramIsY[O],P=x.numParams[O],V=H.substr(1).replace(x.paramRE,function(Y){Q[J]?Y="pixel"===I?t(M)+Number(Y):t(Y):U[J]&&(Y=
"pixel"===L?G(N)-Number(Y):G(Y));J++;J>P&&(Y="X");return Y});J>P&&(V=V.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+H));return O+V})}function k(B,t,G){return B.replace(x.segmentRE,function(I){var L=0,M=I.charAt(0),N=x.paramIsX[M],H=x.paramIsY[M],J=x.numParams[M];I=I.substr(1).replace(x.paramRE,function(O){if(L>=J)return O;N[L]?O=t(O):H[L]&&(O=G(O));L++;return O});return M+I})}function p(B){!B._context.edits.shapePosition&&0<=B._fullLayout._activeShapeIndex&&(r(B),delete B._fullLayout._activeShapeIndex,
m(B))}var n=b("../../registry"),c=b("../../lib"),f=b("../../plots/cartesian/axes"),d=b("./draw_newshape/helpers").readPaths,q=b("./draw_newshape/display_outlines"),r=b("../../plots/cartesian/handle_outline").clearOutlineControllers,u=b("../color"),v=b("../drawing"),w=b("../../plot_api/plot_template").arrayEditor,y=b("../dragelement"),D=b("../../lib/setcursor"),x=b("./constants"),E=b("./helpers");F.exports={draw:m,drawOne:h,eraseActiveShape:function(B){if(!B._context.edits.shapePosition){r(B);var t=
B._fullLayout._activeShapeIndex,G=(B.layout||{}).shapes||[];if(t<G.length){for(var I=[],L=0;L<G.length;L++)L!==t&&I.push(G[L]);delete B._fullLayout._activeShapeIndex;n.call("_guiRelayout",B,{shapes:I})}}}}},{"../../lib":749,"../../lib/setcursor":769,"../../plot_api/plot_template":787,"../../plots/cartesian/axes":797,"../../plots/cartesian/handle_outline":807,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"./constants":694,"./draw_newshape/display_outlines":700,"./draw_newshape/helpers":701,
"./helpers":703}],697:[function(b,F,C){C=b("../../drawing/attributes").dash;b=b("../../../lib/extend").extendFlat;F.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:b({},C,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},
layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":739,"../../drawing/attributes":636}],698:[function(b,F,C){F.exports={CIRCLE_SIDES:32,i000:0,i090:8,
i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],699:[function(b,F,C){var m=b("../../color");F.exports=function(h,l,e){e("newshape.drawdirection");e("newshape.layer");e("newshape.fillcolor");e("newshape.fillrule");e("newshape.opacity");e("newshape.line.width")&&(e("newshape.line.color",m.contrast((h||{}).plot_bgcolor||"#FFF")),e("newshape.line.dash"));e("activeshape.fillcolor");e("activeshape.opacity")}},{"../../color":615}],700:[function(b,F,C){function m(r,
u){for(var v=0;v<u.length;v++){var w=u[v];r[v]=[];for(var y=0;y<w.length;y++){r[v][y]=[];for(var D=0;D<w[y].length;D++)r[v][y][D]=w[y][D]}}return r}var h=b("../../dragelement"),l=b("../../dragelement/helpers").drawMode,e=b("../../../registry");C=b("./constants");var a=C.i000,g=C.i090,k=C.i180,p=C.i270,n=b("../../../plots/cartesian/handle_outline").clearOutlineControllers;C=b("./helpers");var c=C.pointsShapeRectangle,f=C.pointsShapeEllipse,d=C.writePaths,q=b("./newshapes");F.exports=function D(u,v,
w,y){function x(){D(u,v,w,y++);f(u[0])&&E({redrawing:!0})}function E(ea){w.isActiveShape=!1;var ca=q(v,w);Object.keys(ca).length&&e.call((ea||{}).redrawing?"relayout":"_guiRelayout",J,ca)}function B(ea){P=+ea.srcElement.getAttribute("data-i");V=+ea.srcElement.getAttribute("data-j");U[P][V].moveFn=t}function t(ea,ca){if(u.length){var ia=Y[P][V][1],fa=Y[P][V][2],ha=u[P],na=ha.length;if(c(ha)){for(var pa=0;pa<na;pa++)if(pa!==V){var ra=ha[pa];ra[1]===ha[V][1]&&(ra[1]=ia+ea);ra[2]===ha[V][2]&&(ra[2]=fa+
ca)}ha[V][1]=ia+ea;ha[V][2]=fa+ca;if(!c(ha))for(ea=0;ea<na;ea++)for(ca=0;ca<ha[ea].length;ca++)ha[ea][ca]=Y[P][ea][ca]}else ha[V][1]=ia+ea,ha[V][2]=fa+ca;x()}}function G(){E()}function I(ea,ca){if(2===ea&&(P=+ca.srcElement.getAttribute("data-i"),V=+ca.srcElement.getAttribute("data-j"),ea=u[P],!c(ea)&&!f(ea)&&u.length&&u[P]&&u[P].length)){ea=[];for(ca=0;ca<u[P].length;ca++)ca!==V&&ea.push(u[P][ca]);1<ea.length&&(2!==ea.length||"Z"!==ea[1][0])&&(0===V&&(ea[0][0]="M"),u[P]=ea,x(),E())}}function L(ea){U=
[];for(var ca=0;ca<u.length;ca++){var ia=u[ca],fa=!c(ia)&&f(ia);U[ca]=[];for(var ha=0;ha<ia.length;ha++)if("Z"!==ia[ha][0]&&(!fa||ha===a||ha===g||ha===k||ha===p)){var na=ia[ha][1],pa=ia[ha][2];na=ea.append("circle").classed("cursor-grab",!0).attr("data-i",ca).attr("data-j",ha).attr("cx",na).attr("cy",pa).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});U[ca][ha]={element:na.node(),gd:J,prepFn:B,doneFn:G,clickFn:I};h.init(U[ca][ha])}}}function M(ea,ca){if(u.length)for(var ia=
0;ia<u.length;ia++)for(var fa=0;fa<u[ia].length;fa++)for(var ha=0;ha+2<u[ia][fa].length;ha+=2)u[ia][fa][ha+1]=Y[ia][fa][ha+1]+ea,u[ia][fa][ha+2]=Y[ia][fa][ha+2]+ca;x()}function N(ea){(P=+ea.srcElement.getAttribute("data-i"))||(P=0);ba[P].moveFn=M}function H(){E()}y||(y=0);var J=w.gd,O=w.isActiveShape,Q=J._fullLayout._zoomlayer;l(w.dragmode)?J._fullLayout._drawing=!0:0<=J._fullLayout._activeShapeIndex&&n(J);v.attr("d",d(u));var U,P,V;if(O&&!y){var Y=m([],u);O=Q.append("g").attr("class","outline-controllers");
L(O);var ba=[];u.length&&(ba[0]={element:v[0][0],gd:J,prepFn:N,doneFn:H},h.init(ba[0]))}}},{"../../../plots/cartesian/handle_outline":807,"../../../registry":880,"../../dragelement":634,"../../dragelement/helpers":633,"./constants":698,"./helpers":701,"./newshapes":702}],701:[function(b,F,C){function m(c,f){return 1E-6>=Math.abs(c-f)}function h(c,f){var d=f[1]-c[1];c=f[2]-c[2];return Math.sqrt(d*d+c*c)}var l=b("parse-svg-path");F=b("./constants");var e=F.CIRCLE_SIDES,a=F.SQRT2;b=b("../../../plots/cartesian/helpers");
var g=b.p2r,k=b.r2p,p=[0,3,4,5,6,1,2],n=[0,3,4,1,2];C.writePaths=function(c){var f=c.length;if(!f)return"M0,0Z";for(var d="",q=0;q<f;q++)for(var r=c[q].length,u=0;u<r;u++){var v=c[q][u][0];if("Z"===v)d+="Z";else for(var w=c[q][u].length,y=0;y<w;y++){var D=y;"Q"===v||"S"===v?D=n[y]:"C"===v&&(D=p[y]);d+=c[q][u][D];0<y&&y<w-1&&(d+=",")}}return d};C.readPaths=function(c,f,d,q){c=l(c);var r=[],u=-1,v,w=0,y=0;var D=w;var x=y;for(var E=0;E<c.length;E++){var B=[],t=v=c[E][0];switch(v){case "M":u++;r[u]=[];
w=+c[E][1];y=+c[E][2];B.push([t,w,y]);D=w;x=y;break;case "Q":case "S":v=+c[E][1];var G=+c[E][2];w=+c[E][3];y=+c[E][4];B.push([t,w,y,v,G]);break;case "C":v=+c[E][1];G=+c[E][2];var I=+c[E][3];var L=+c[E][4];w=+c[E][5];y=+c[E][6];B.push([t,w,y,v,G,I,L]);break;case "T":case "L":w=+c[E][1];y=+c[E][2];B.push([t,w,y]);break;case "H":t="L";w=+c[E][1];B.push([t,w,y]);break;case "V":t="L";y=+c[E][1];B.push([t,w,y]);break;case "A":t="L";I=+c[E][1];G=+c[E][2];+c[E][4]||(I=-I,G=-G);L=w-I;var M=y;for(v=1;v<=e/
2;v++){var N=2*Math.PI*v/e;B.push([t,L+I*Math.cos(N),M+G*Math.sin(N)])}break;case "Z":if(w!==D||y!==x)w=D,y=x,B.push([t,w,y])}t=(d||{}).domain;I=f._fullLayout._size;G=d&&"pixel"===d.xsizemode;L=d&&"pixel"===d.ysizemode;M=!1===q;for(N=0;N<B.length;N++){for(v=0;7>v+2;v+=2){var H=B[N][v+1],J=B[N][v+2];void 0!==H&&void 0!==J&&(w=H,y=J,d&&(d.xaxis&&d.xaxis.p2r?(M&&(H-=d.xaxis._offset),H=G?k(d.xaxis,d.xanchor)+H:g(d.xaxis,H)):(M&&(H-=I.l),H=t?t.x[0]+H/I.w:H/I.w),d.yaxis&&d.yaxis.p2r?(M&&(J-=d.yaxis._offset),
J=L?k(d.yaxis,d.yanchor)-J:g(d.yaxis,J)):(M&&(J-=I.t),J=t?t.y[1]-J/I.h:1-J/I.h)),B[N][v+1]=H,B[N][v+2]=J)}r[u].push(B[N].slice())}}return r};C.pointsShapeRectangle=function(c){if(5!==c.length)return!1;for(var f=1;3>f;f++)if(!m(c[0][f]-c[1][f],c[3][f]-c[2][f])||!m(c[0][f]-c[3][f],c[1][f]-c[2][f]))return!1;return m(c[0][1],c[1][1])||m(c[0][1],c[3][1])?!!(h(c[0],c[1])*h(c[0],c[3])):!1};C.pointsShapeEllipse=function(c){var f=c.length;if(f!==e+1)return!1;f=e;for(var d=0;d<f;d++){var q=(2*f-d)%f,r=(f/2+
q)%f;if(!m(h(c[d],c[(f/2+d)%f]),h(c[q],c[r])))return!1}return!0};C.handleEllipse=function(c,f,d){if(!c)return[f,d];var q=C.ellipseOver({x0:f[0],y0:f[1],x1:d[0],y1:d[1]});c=(q.x1+q.x0)/2;f=(q.y1+q.y0)/2;d=(q.x1-q.x0)/2;q=(q.y1-q.y0)/2;d||(d=q/=a);q||(q=d/=a);for(var r=[],u=0;u<e;u++){var v=2*u*Math.PI/e;r.push([c+d*Math.cos(v),f+q*Math.sin(v)])}return r};C.ellipseOver=function(c){var f=c.x0,d=c.y0,q=c.x1,r=c.y1;c=q-f;var u=r-d;f=(f-c+q)/2;d=(d-u+r)/2;c*=a;u*=a;return{x0:f-c,y0:d-u,x1:f+c,y1:d+u}}},
{"../../../plots/cartesian/helpers":808,"./constants":698,"parse-svg-path":479}],702:[function(b,F,C){C=b("../../dragelement/helpers");var m=C.drawMode,h=C.openMode;C=b("./constants");var l=C.i000,e=C.i090,a=C.i180,g=C.i270,k=C.cos45,p=C.sin45;C=b("../../../plots/cartesian/helpers");var n=C.p2r,c=C.r2p,f=b("../../../plots/cartesian/handle_outline").clearSelect;b=b("./helpers");var d=b.readPaths,q=b.writePaths,r=b.ellipseOver;F.exports=function(u,v){if(u.length&&(u=u[0][0])){var w=u.getAttribute("d");
u=v.gd;var y=u._fullLayout.newshape,D=v.plotinfo,x=D.xaxis,E=D.yaxis,B=!!D.domain||!D.xaxis,t=!!D.domain||!D.yaxis,G=v.isActiveShape,I=v.dragmode,L=(u.layout||{}).shapes||[];if(!m(I)&&void 0!==G){var M=u._fullLayout._activeShapeIndex;if(M<L.length)switch(u._fullLayout.shapes[M].type){case "rect":I="drawrect";break;case "circle":I="drawcircle";break;case "line":I="drawline";break;case "path":I=L[M].path||"",I="Z"===I[I.length-1]?"drawclosedpath":"drawopenpath"}}M=h(I);w=d(w,u,D,G);B={editable:!0,xref:B?
"paper":x._id,yref:t?"paper":E._id,layer:y.layer,opacity:y.opacity,line:{color:y.line.color,width:y.line.width,dash:y.line.dash}};M||(B.fillcolor=y.fillcolor,B.fillrule=y.fillrule);var N;1===w.length&&(N=w[0]);if(N&&"drawrect"===I)B.type="rect",B.x0=N[0][1],B.y0=N[0][2],B.x1=N[2][1],B.y1=N[2][2];else if(N&&"drawline"===I)B.type="line",B.x0=N[0][1],B.y0=N[0][2],B.x1=N[1][1],B.y1=N[1][2];else if(N&&"drawcircle"===I){B.type="circle";w=N[l][1];E=N[e][1];y=N[a][1];x=N[g][1];t=N[l][2];I=N[e][2];M=N[a][2];
var H=N[g][2];N=D.xaxis&&("date"===D.xaxis.type||"log"===D.xaxis.type);var J=D.yaxis&&("date"===D.yaxis.type||"log"===D.yaxis.type);N&&(w=c(D.xaxis,w),E=c(D.xaxis,E),y=c(D.xaxis,y),x=c(D.xaxis,x));J&&(t=c(D.yaxis,t),I=c(D.yaxis,I),M=c(D.yaxis,M),H=c(D.yaxis,H));var O=(E+x)/2,Q=(t+M)/2;w=r({x0:O,y0:Q,x1:O+(x-E+y-w)/2*k,y1:Q+(H-I+M-t)/2*p});N&&(w.x0=n(D.xaxis,w.x0),w.x1=n(D.xaxis,w.x1));J&&(w.y0=n(D.yaxis,w.y0),w.y1=n(D.yaxis,w.y1));B.x0=w.x0;B.y0=w.y0;B.x1=w.x1;B.y1=w.y1}else{B.type="path";if(x&&E&&
(D="date"===x.type,N="date"===E.type,D||N))for(E=0;E<w.length;E++)for(y=0;y<w[E].length;y++)for(x=0;x+2<w[E][y].length;x+=2)D&&(w[E][y][x+1]=w[E][y][x+1].replace(" ","_")),N&&(w[E][y][x+2]=w[E][y][x+2].replace(" ","_"));B.path=q(w)}f(u);v=v.editHelpers;D=(v||{}).modifyItem;N=[];for(w=0;w<L.length;w++)if(E=u._fullLayout.shapes[w],N[w]=E._input,void 0!==G&&w===u._fullLayout._activeShapeIndex)switch(y=B,E.type){case "line":case "rect":case "circle":D("x0",y.x0);D("x1",y.x1);D("y0",y.y0);D("y1",y.y1);
break;case "path":D("path",y.path)}return void 0===G?(N.push(B),N):v?v.getUpdateObj():{}}}},{"../../../plots/cartesian/handle_outline":807,"../../../plots/cartesian/helpers":808,"../../dragelement/helpers":633,"./constants":698,"./helpers":701}],703:[function(b,F,C){var m=b("./constants"),h=b("../../lib");C.rangeToShapePosition=function(l){return"log"===l.type?l.r2d:function(e){return e}};C.shapePositionToRange=function(l){return"log"===l.type?l.d2r:function(e){return e}};C.decodeDate=function(l){return function(e){e.replace&&
(e=e.replace("_"," "));return l(e)}};C.encodeDate=function(l){return function(e){return l(e).replace(" ","_")}};C.extractPathCoords=function(l,e){var a=[];l.match(m.segmentRE).forEach(function(g){var k=e[g.charAt(0)].drawn;void 0!==k&&(g=g.substr(1).match(m.paramRE),!g||g.length<k||a.push(h.cleanNumber(g[k])))});return a};C.getDataToPixel=function(l,e,a){var g=l._fullLayout._size;if(e){var k=C.shapePositionToRange(e);l=function(p){return e._offset+e.r2p(k(p,!0))};"date"===e.type&&(l=C.decodeDate(l))}else l=
a?function(p){return g.t+g.h*(1-p)}:function(p){return g.l+g.w*p};return l};C.getPixelToData=function(l,e,a){var g=l._fullLayout._size;if(e){var k=C.rangeToShapePosition(e);l=function(p){return k(e.p2r(p-e._offset))}}else l=a?function(p){return 1-(p-g.t)/g.h}:function(p){return(p-g.l)/g.w};return l};C.roundPositionForSharpStrokeRendering=function(l,e){l=Math.round(l);return 1===Math.round(e%2)?l+.5:l};C.makeOptionsAndPlotinfo=function(l,e){e=l._fullLayout.shapes[e]||{};var a=l._fullLayout._plots[e.xref+
e.yref];a?a._hadPlotinfo=!0:(a={},e.xref&&"paper"!==e.xref&&(a.xaxis=l._fullLayout[e.xref+"axis"]),e.yref&&"paper"!==e.yref&&(a.yaxis=l._fullLayout[e.yref+"axis"]));a.xsizemode=e.xsizemode;a.ysizemode=e.ysizemode;a.xanchor=e.xanchor;a.yanchor=e.yanchor;return{options:e,plotinfo:a}}},{"../../lib":749,"./constants":694}],704:[function(b,F,C){C=b("./draw");F.exports={moduleType:"component",name:"shapes",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),supplyDrawNewShapeDefaults:b("./draw_newshape/defaults"),
includeBasePlot:b("../../plots/cartesian/include_components")("shapes"),calcAutorange:b("./calc_autorange"),draw:C.draw,drawOne:C.drawOne}},{"../../plots/cartesian/include_components":809,"./attributes":692,"./calc_autorange":693,"./defaults":695,"./draw":696,"./draw_newshape/defaults":699}],705:[function(b,F,C){C=b("../../plots/font_attributes");var m=b("../../plots/pad_attributes"),h=b("../../lib/extend").extendDeepAll,l=b("../../plot_api/edit_types").overrideAll,e=b("../../plots/animation_attributes"),
a=b("../../plot_api/plot_template").templatedArray;b=b("./constants");var g=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});F.exports=l(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},
steps:g,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:h(m({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",
values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:C({})},font:C({}),activebgcolor:{valType:"color",dflt:b.gripBgActiveColor},bgcolor:{valType:"color",dflt:b.railBgColor},bordercolor:{valType:"color",dflt:b.railBorderColor},borderwidth:{valType:"number",min:0,dflt:b.railBorderWidth},
ticklen:{valType:"number",min:0,dflt:b.tickLength},tickcolor:{valType:"color",dflt:b.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:b.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/animation_attributes":792,"../../plots/font_attributes":825,"../../plots/pad_attributes":859,"./constants":706}],706:[function(b,F,C){F.exports={name:"sliders",containerClassName:"slider-container",
groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,
railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],707:[function(b,F,C){function m(p,
n,c){function f(u,v){return l.coerce(p,n,a,u,v)}for(var d=e(p,n,{name:"steps",handleItemDefaults:h}),q=0,r=0;r<d.length;r++)d[r].visible&&q++;if(2>q?n.visible=!1:f("visible"))n._stepCount=q,q=n._visibleSteps=l.filterVisible(d),r=f("active"),(d[r]||{}).visible||(n.active=q[0]._index),f("x"),f("y"),l.noneOrAll(p,n,["x","y"]),f("xanchor"),f("yanchor"),f("len"),f("lenmode"),f("pad.t"),f("pad.r"),f("pad.b"),f("pad.l"),l.coerceFont(f,"font",c.font),f("currentvalue.visible")&&(f("currentvalue.xanchor"),
f("currentvalue.prefix"),f("currentvalue.suffix"),f("currentvalue.offset"),l.coerceFont(f,"currentvalue.font",n.font)),f("transition.duration"),f("transition.easing"),f("bgcolor"),f("activebgcolor"),f("bordercolor"),f("borderwidth"),f("ticklen"),f("tickwidth"),f("tickcolor"),f("minorticklen")}function h(p,n){function c(d,q){return l.coerce(p,n,k,d,q)}if("skip"===p.method||Array.isArray(p.args)?c("visible"):n.visible=!1){c("method");c("args");var f=c("label","step-"+n._index);c("value",f);c("execute")}}
var l=b("../../lib"),e=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./constants").name,k=a.steps;F.exports=function(p,n){e(p,n,{name:g,handleItemDefaults:m})}},{"../../lib":749,"../../plots/array_container_defaults":793,"./attributes":705,"./constants":706}],708:[function(b,F,C){function m(J,O){J=J[L.name];for(var Q=[],U=0;U<J.length;U++){var P=J[U];P.visible&&(P._gd=O,Q.push(P))}return Q}function h(J){return J._index}function l(J,O){var Q=B.tester.selectAll("g."+L.labelGroupClass).data(O._visibleSteps);
Q.enter().append("g").classed(L.labelGroupClass,!0);var U=0,P=0;Q.each(function(ea){var ca=D.select(this);if(ea=k(ca,{step:ea},O).node())ea=B.bBox(ea),P=Math.max(P,ea.height),U=Math.max(U,ea.width)});Q.remove();var V=O._dims={};V.inputAreaWidth=Math.max(L.railWidth,L.gripHeight);var Y=J._fullLayout._size;V.lx=Y.l+Y.w*O.x;V.ly=Y.t+Y.h*(1-O.y);V.outerLength="fraction"===O.lenmode?Math.round(Y.w*O.len):O.len;V.inputAreaStart=0;V.inputAreaLength=Math.round(V.outerLength-O.pad.l-O.pad.r);V.labelStride=
Math.max(1,Math.ceil((U+L.labelPadding)/((V.inputAreaLength-2*L.stepInset)/(O._stepCount-1))));V.labelHeight=P;V.currentValueMaxWidth=0;V.currentValueHeight=0;V.currentValueTotalHeight=0;V.currentValueMaxLines=1;if(O.currentvalue.visible){var ba=B.tester.append("g");Q.each(function(ea){var ca=a(ba,O,ea.label);ea=ca.node()&&B.bBox(ca.node())||{width:0,height:0};ca=G.lineCount(ca);V.currentValueMaxWidth=Math.max(V.currentValueMaxWidth,Math.ceil(ea.width));V.currentValueHeight=Math.max(V.currentValueHeight,
Math.ceil(ea.height));V.currentValueMaxLines=Math.max(V.currentValueMaxLines,ca)});V.currentValueTotalHeight=V.currentValueHeight+O.currentvalue.offset;ba.remove()}V.height=V.currentValueTotalHeight+L.tickOffset+O.ticklen+L.labelOffset+V.labelHeight+O.pad.t+O.pad.b;Q="left";t.isRightAnchor(O)&&(V.lx-=V.outerLength,Q="right");t.isCenterAnchor(O)&&(V.lx-=V.outerLength/2,Q="center");Y="top";t.isBottomAnchor(O)&&(V.ly-=V.height,Y="bottom");t.isMiddleAnchor(O)&&(V.ly-=V.height/2,Y="middle");V.outerLength=
Math.ceil(V.outerLength);V.height=Math.ceil(V.height);V.lx=Math.round(V.lx);V.ly=Math.round(V.ly);Y={y:O.y,b:V.height*H[Y],t:V.height*N[Y]};"fraction"===O.lenmode?(Y.l=0,Y.xl=O.x-O.len*N[Q],Y.r=0,Y.xr=O.x+O.len*H[Q]):(Y.x=O.x,Y.l=V.outerLength*N[Q],Y.r=V.outerLength*H[Q]);x.autoMargin(J,L.autoMarginIdRoot+O._index,Y)}function e(J,O,Q){(Q.steps[Q.active]||{}).visible||(Q.active=Q._visibleSteps[0]._index);O.call(a,Q).call(y,Q).call(p,Q).call(d,Q).call(w,J,Q).call(g,J,Q);J=Q._dims;B.setTranslate(O,J.lx+
Q.pad.l,J.ly+Q.pad.t);O.call(r,Q,!1);O.call(a,Q)}function a(J,O,Q){if(O.currentvalue.visible){var U=O._dims;switch(O.currentvalue.xanchor){case "right":var P=U.inputAreaLength-L.currentValueInset-U.currentValueMaxWidth;var V="left";break;case "center":P=.5*U.inputAreaLength;V="middle";break;default:P=L.currentValueInset,V="left"}J=t.ensureSingle(J,"text",L.labelClass,function(ea){ea.classed("user-select-none",!0).attr({"text-anchor":V,"data-notex":1})});var Y=O.currentvalue.prefix?O.currentvalue.prefix:
"";if("string"===typeof Q)Y+=Q;else{Q=O.steps[O.active].label;var ba=O._gd._fullLayout._meta;ba&&(Q=t.templateString(Q,ba));Y+=Q}O.currentvalue.suffix&&(Y+=O.currentvalue.suffix);J.call(B.font,O.currentvalue.font).text(Y).call(G.convertToTspans,O._gd);Y=G.lineCount(J);G.positionText(J,P,(U.currentValueMaxLines+1-Y)*O.currentvalue.font.size*M);return J}}function g(J,O,Q){t.ensureSingle(J,"rect",L.gripRectClass,function(U){U.call(f,O,J,Q).style("pointer-events","all")}).attr({width:L.gripWidth,height:L.gripHeight,
rx:L.gripRadius,ry:L.gripRadius}).call(E.stroke,Q.bordercolor).call(E.fill,Q.bgcolor).style("stroke-width",Q.borderwidth+"px")}function k(J,O,Q){J=t.ensureSingle(J,"text",L.labelClass,function(P){P.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})});O=O.step.label;var U=Q._gd._fullLayout._meta;U&&(O=t.templateString(O,U));J.call(B.font,Q.font).text(O).call(G.convertToTspans,Q._gd);return J}function p(J,O){J=t.ensureSingle(J,"g",L.labelsClass);var Q=O._dims;J=J.selectAll("g."+
L.labelGroupClass).data(Q.labelSteps);J.enter().append("g").classed(L.labelGroupClass,!0);J.exit().remove();J.each(function(U){var P=D.select(this);P.call(k,U,O);B.setTranslate(P,u(O,U.fraction),L.tickOffset+O.ticklen+O.font.size*M+L.labelOffset+Q.currentValueTotalHeight)})}function n(J,O,Q,U,P){U=Q._visibleSteps[Math.round(U*(Q._stepCount-1))]._index;U!==Q.active&&c(J,O,Q,U,!0,P)}function c(J,O,Q,U,P,V){var Y=Q.active;Q.active=U;I(J.layout,L.name,Q).applyUpdate("active",U);U=Q.steps[Q.active];O.call(r,
Q,V);O.call(a,Q);J.emit("plotly_sliderchange",{slider:Q,step:Q.steps[Q.active],interaction:P,previousActive:Y});U&&U.method&&P&&(O._nextMethod?(O._nextMethod.step=U,O._nextMethod.doCallback=P,O._nextMethod.doTransition=V):(O._nextMethod={step:U,doCallback:P,doTransition:V},O._nextMethodRaf=window.requestAnimationFrame(function(){var ba=O._nextMethod.step;ba.method&&(ba.execute&&x.executeAPICommand(J,ba.method,ba.args),O._nextMethod=null,O._nextMethodRaf=null)})))}function f(J,O,Q){var U=Q.node(),
P=D.select(O);J.on("mousedown",function(){var V=Q.data()[0];O.emit("plotly_sliderstart",{slider:V});var Y=Q.select("."+L.gripRectClass);D.event.stopPropagation();D.event.preventDefault();Y.call(E.fill,V.activebgcolor);var ba=v(V,D.mouse(U)[0]);n(O,Q,V,ba,!0);V._dragging=!0;P.on("mousemove",function(){var ea=Q.data()[0],ca=v(ea,D.mouse(U)[0]);n(O,Q,ea,ca,!1)});P.on("mouseup",function(){var ea=Q.data()[0];ea._dragging=!1;Y.call(E.fill,ea.bgcolor);P.on("mouseup",null);P.on("mousemove",null);O.emit("plotly_sliderend",
{slider:ea,step:ea.steps[ea.active]})})})}function d(J,O){J=J.selectAll("rect."+L.tickRectClass).data(O._visibleSteps);var Q=O._dims;J.enter().append("rect").classed(L.tickRectClass,!0);J.exit().remove();J.attr({width:O.tickwidth+"px","shape-rendering":"crispEdges"});J.each(function(U,P){U=0===P%Q.labelStride;var V=D.select(this);V.attr({height:U?O.ticklen:O.minorticklen}).call(E.fill,O.tickcolor);B.setTranslate(V,u(O,P/(O._stepCount-1))-.5*O.tickwidth,(U?L.tickOffset:L.minorTickOffset)+Q.currentValueTotalHeight)})}
function q(J){var O=J._dims;O.labelSteps=[];for(var Q=J._stepCount,U=0;U<Q;U+=O.labelStride)O.labelSteps.push({fraction:U/(Q-1),step:J._visibleSteps[U]})}function r(J,O,Q){J=J.select("rect."+L.gripRectClass);for(var U=0,P=0;P<O._stepCount;P++)if(O._visibleSteps[P]._index===O.active){U=P;break}U=u(O,U/(O._stepCount-1));O._invokingCommand||(Q&&0<O.transition.duration&&(J=J.transition().duration(O.transition.duration).ease(O.transition.easing)),J.attr("transform","translate("+(U-.5*L.gripWidth)+","+
O._dims.currentValueTotalHeight+")"))}function u(J,O){J=J._dims;return J.inputAreaStart+L.stepInset+(J.inputAreaLength-2*L.stepInset)*Math.min(1,Math.max(0,O))}function v(J,O){J=J._dims;return Math.min(1,Math.max(0,(O-L.stepInset-J.inputAreaStart)/(J.inputAreaLength-2*L.stepInset-2*J.inputAreaStart)))}function w(J,O,Q){var U=Q._dims,P=t.ensureSingle(J,"rect",L.railTouchRectClass,function(V){V.call(f,O,J,Q).style("pointer-events","all")});P.attr({width:U.inputAreaLength,height:Math.max(U.inputAreaWidth,
L.tickOffset+Q.ticklen+U.labelHeight)}).call(E.fill,Q.bgcolor).attr("opacity",0);B.setTranslate(P,0,U.currentValueTotalHeight)}function y(J,O){var Q=O._dims,U=Q.inputAreaLength-2*L.railInset;J=t.ensureSingle(J,"rect",L.railRectClass);J.attr({width:U,height:L.railWidth,rx:L.railRadius,ry:L.railRadius,"shape-rendering":"crispEdges"}).call(E.stroke,O.bordercolor).call(E.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px");B.setTranslate(J,L.railInset,.5*(Q.inputAreaWidth-L.railWidth)+Q.currentValueTotalHeight)}
var D=b("d3"),x=b("../../plots/plots"),E=b("../color"),B=b("../drawing"),t=b("../../lib"),G=b("../../lib/svg_text_utils"),I=b("../../plot_api/plot_template").arrayEditor,L=b("./constants");b=b("../../constants/alignment");var M=b.LINE_SPACING,N=b.FROM_TL,H=b.FROM_BR;F.exports=function(J){function O(V){V._commandObserver&&(V._commandObserver.remove(),delete V._commandObserver);x.autoMargin(J,L.autoMarginIdRoot+V._index)}var Q=J._fullLayout,U=m(Q,J);Q=Q._infolayer.selectAll("g."+L.containerClassName).data(0<
U.length?[0]:[]);Q.enter().append("g").classed(L.containerClassName,!0).style("cursor","ew-resize");Q.exit().each(function(){D.select(this).selectAll("g."+L.groupClassName).each(O)}).remove();if(0!==U.length){Q=Q.selectAll("g."+L.groupClassName).data(U,h);Q.enter().append("g").classed(L.groupClassName,!0);Q.exit().each(O).remove();for(var P=0;P<U.length;P++)l(J,U[P]);Q.each(function(V){var Y=D.select(this);q(V);x.manageCommandObserver(J,V,V._visibleSteps,function(ba){var ea=Y.data()[0];ea.active!==
ba.index&&(ea._dragging||c(J,Y,ea,ba.index,!1,!0))});e(J,D.select(this),V)})}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,"../../plots/plots":860,"../color":615,"../drawing":637,"./constants":706,d3:169}],709:[function(b,F,C){C=b("./constants");F.exports={moduleType:"component",name:C.name,layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":705,"./constants":706,"./defaults":707,
"./draw":708}],710:[function(b,F,C){var m=b("d3"),h=b("fast-isnumeric"),l=b("../../plots/plots"),e=b("../../registry"),a=b("../../lib"),g=b("../drawing"),k=b("../color"),p=b("../../lib/svg_text_utils"),n=b("../../constants/interactions"),c=b("../../constants/alignment").OPPOSITE_SIDE,f=/ [XY][0-9]* /;F.exports={draw:function(d,q,r){function u(Y){a.syncOrAsync([v,w],Y)}function v(Y){if(G){var ba="";G.rotate&&(ba+="rotate("+[G.rotate,t.x,t.y]+")");G.offset&&(ba+="translate(0, "+G.offset+")")}else ba=
null;Y.attr("transform",ba);Y.style({"font-family":O,"font-size":m.round(Q,2)+"px",fill:k.rgb(U),opacity:M*k.opacity(U),"font-weight":l.fontWeight}).attr(t).call(p.convertToTspans,d);return l.previousPromises(d)}function w(Y){Y=m.select(Y.node().parentNode);if(B&&B.selection&&B.side&&J){Y.attr("transform",null);var ba=c[B.side],ea="left"===B.side||"top"===B.side?-1:1,ca=h(B.pad)?B.pad:2,ia=g.bBox(Y.node()),fa={left:0,top:0,right:L.width,bottom:L.height};fa=B.maxShift||ea*(fa[B.side]-ia[B.side]);var ha=
0;if(0>fa)ha=fa;else{var na=B.offsetLeft||0,pa=B.offsetTop||0;ia.left-=na;ia.right-=na;ia.top-=pa;ia.bottom-=pa;B.selection.each(function(){var ra=g.bBox(this);a.bBoxIntersect(ia,ra,ca)&&(ha=Math.max(ha,ea*(ra[B.side]-ia[ba])+ca))});ha=Math.min(fa,ha)}(0<ha||0>fa)&&Y.attr("transform","translate("+{left:[-ha,0],right:[ha,0],top:[0,-ha],bottom:[0,ha]}[B.side]+")")}}function y(){M=0;N=!0;V.text(x).on("mouseover.opacity",function(){m.select(this).transition().duration(n.SHOW_PLACEHOLDER).style("opacity",
1)}).on("mouseout.opacity",function(){m.select(this).transition().duration(n.HIDE_PLACEHOLDER).style("opacity",0)})}var D=r.propName,x=r.placeholder,E=r.traceIndex,B=r.avoid||{},t=r.attributes,G=r.transform,I=r.containerGroup,L=d._fullLayout,M=1,N=!1,H=r.propContainer.title,J=(H&&H.text?H.text:"").trim();H=H&&H.font?H.font:{};var O=H.family,Q=H.size,U=H.color,P;"title.text"===D?P="titleText":-1!==D.indexOf("axis")?P="axisTitleText":D.indexOf(!0)&&(P="colorbarTitleText");P=d._context.edits[P];""===
J?M=0:J.replace(f," % ")===x.replace(f," % ")&&(M=.2,N=!0,P||(J=""));r._meta?J=a.templateString(J,r._meta):L._meta&&(J=a.templateString(J,L._meta));r=J||P;I||(I=a.ensureSingle(L._infolayer,"g","g-"+q));var V=I.selectAll("text").data(r?[0]:[]);V.enter().append("text");V.text(J).attr("class",q);V.exit().remove();if(!r)return I;V.call(u);if(P){if(J)V.on(".opacity",null);else y();V.call(p.makeEditable,{gd:d}).on("edit",function(Y){void 0!==E?e.call("_guiRestyle",d,D,Y,E):e.call("_guiRelayout",d,D,Y)}).on("cancel",
function(){this.text(this.attr("data-unformatted")).call(u)}).on("input",function(Y){this.text(Y||" ").call(p.positionText,t.x,t.y)})}V.classed("js-placeholder",N);return I}}},{"../../constants/alignment":717,"../../constants/interactions":723,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../../registry":880,"../color":615,"../drawing":637,d3:169,"fast-isnumeric":241}],711:[function(b,F,C){C=b("../../plots/font_attributes");var m=b("../color/attributes"),h=b("../../lib/extend").extendFlat,
l=b("../../plot_api/edit_types").overrideAll,e=b("../../plots/pad_attributes");b=b("../../plot_api/plot_template").templatedArray;var a=b("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},
execute:{valType:"boolean",dflt:!0}});F.exports=l(b("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center",
"right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:h(e({editType:"arraydraw"}),{}),font:C({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:m.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/font_attributes":825,"../../plots/pad_attributes":859,
"../color/attributes":614}],712:[function(b,F,C){F.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",
autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],713:[function(b,F,C){function m(p,n,c){function f(q,r){return l.coerce(p,n,a,q,r)}var d=e(p,n,{name:"buttons",handleItemDefaults:h});f("visible",0<d.length)&&(f("active"),f("direction"),f("type"),f("showactive"),
f("x"),f("y"),l.noneOrAll(p,n,["x","y"]),f("xanchor"),f("yanchor"),f("pad.t"),f("pad.r"),f("pad.b"),f("pad.l"),l.coerceFont(f,"font",c.font),f("bgcolor",c.paper_bgcolor),f("bordercolor"),f("borderwidth"))}function h(p,n){function c(f,d){return l.coerce(p,n,k,f,d)}c("visible","skip"===p.method||Array.isArray(p.args))&&(c("method"),c("args"),c("args2"),c("label"),c("execute"))}var l=b("../../lib"),e=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./constants").name,k=a.buttons;F.exports=
function(p,n){e(p,n,{name:g,handleItemDefaults:m})}},{"../../lib":749,"../../plots/array_container_defaults":793,"./attributes":711,"./constants":712}],714:[function(b,F,C){function m(M){return M._index}function h(M,N){return+M.attr(I.menuIndexAttrName)===N._index}function l(M,N,H,J,O,Q,U,P){N.active=U;t(M.layout,I.name,N).applyUpdate("active",U);"buttons"===N.type?a(M,J,null,null,N):"dropdown"===N.type&&(O.attr(I.menuIndexAttrName,"-1"),e(M,J,O,Q,N),P||a(M,J,O,Q,N))}function e(M,N,H,J,O){var Q=E.ensureSingle(N,
"g",I.headerClassName,function(Y){Y.style("pointer-events","all")}),U=O._dims,P={y:O.pad.t,yPad:0,x:O.pad.l,xPad:0,index:0},V={width:U.headerWidth,height:U.headerHeight};Q.call(p,O,O.buttons[O.active]||I.blankHeaderOpts,M).call(u,O,P,V);E.ensureSingle(N,"text",I.headerArrowClassName,function(Y){Y.classed("user-select-none",!0).attr("text-anchor","end").call(x.font,O.font).text(I.arrowSymbol[O.direction])}).attr({x:U.headerWidth-I.arrowOffsetX+O.pad.l,y:U.headerHeight/2+I.textOffsetY+O.pad.t});Q.on("click",
function(){H.call(v,String(h(H,O)?-1:O._index));a(M,N,H,J,O)});Q.on("mouseover",function(){Q.call(d)});Q.on("mouseout",function(){Q.call(q,O)});x.setTranslate(N,U.lx,U.ly)}function a(M,N,H,J,O){H||(H=N,H.attr("pointer-events","all"));var Q=-1!==+H.attr(I.menuIndexAttrName)||"buttons"===O.type?O.buttons:[],U="dropdown"===O.type?I.dropdownButtonClassName:I.buttonClassName,P=H.selectAll("g."+U).data(E.filterVisible(Q));Q=P.enter().append("g").classed(U,!0);U=P.exit();"dropdown"===O.type?(Q.attr("opacity",
"0").transition().attr("opacity","1"),U.transition().attr("opacity","0").remove()):U.remove();var V=0,Y=0;Q=O._dims;U=-1!==["up","down"].indexOf(O.direction);"dropdown"===O.type&&(U?Y=Q.headerHeight+I.gapButtonHeader:V=Q.headerWidth+I.gapButtonHeader);"dropdown"===O.type&&"up"===O.direction&&(Y=-I.gapButtonHeader+I.gapButton-Q.openHeight);"dropdown"===O.type&&"left"===O.direction&&(V=-I.gapButtonHeader+I.gapButton-Q.openWidth);var ba={x:Q.lx+V+O.pad.l,y:Q.ly+Y+O.pad.t,yPad:I.gapButton,xPad:I.gapButton,
index:0};V={l:ba.x+O.borderwidth,t:ba.y+O.borderwidth};P.each(function(ea,ca){var ia=w.select(this);ia.call(p,O,ea,M).call(u,O,ba);ia.on("click",function(){w.event.defaultPrevented||(ea.execute&&(ea.args2&&O.active===ca?(l(M,O,ea,N,H,J,-1),y.executeAPICommand(M,ea.method,ea.args2)):(l(M,O,ea,N,H,J,ca),y.executeAPICommand(M,ea.method,ea.args))),M.emit("plotly_buttonclicked",{menu:O,button:ea,active:O.active}))});ia.on("mouseover",function(){ia.call(d)});ia.on("mouseout",function(){ia.call(q,O);P.call(f,
O)})});P.call(f,O);U?(V.w=Math.max(Q.openWidth,Q.headerWidth),V.h=ba.y-V.t):(V.w=ba.x-V.l,V.h=Math.max(Q.openHeight,Q.headerHeight));V.direction=O.direction;J&&(P.size()?g(M,N,H,J,O,V):k(J))}function g(M,N,H,J,O,Q){N=O.direction;M=O._dims;O=O.active;var U,P;if("up"===N||"down"===N)for(N=P=0;N<O;N++)P+=M.heights[N]+I.gapButton;else for(N=U=0;N<O;N++)U+=M.widths[N]+I.gapButton;J.enable(Q,U,P);J.hbar&&J.hbar.attr("opacity","0").transition().attr("opacity","1");J.vbar&&J.vbar.attr("opacity","0").transition().attr("opacity",
"1")}function k(M){var N=!!M.hbar,H=!!M.vbar;N&&M.hbar.transition().attr("opacity","0").each("end",function(){N=!1;H||M.disable()});H&&M.vbar.transition().attr("opacity","0").each("end",function(){H=!1;N||M.disable()})}function p(M,N,H,J){M.call(n,N).call(c,N,H,J)}function n(M,N){E.ensureSingle(M,"rect",I.itemRectClassName,function(H){H.attr({rx:I.rx,ry:I.ry,"shape-rendering":"crispEdges"})}).call(D.stroke,N.bordercolor).call(D.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px")}function c(M,
N,H,J){M=E.ensureSingle(M,"text",I.itemTextClassName,function(Q){Q.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})});H=H.label;var O=J._fullLayout._meta;O&&(H=E.templateString(H,O));M.call(x.font,N.font).text(H).call(B.convertToTspans,J)}function f(M,N){var H=N.active;M.each(function(J,O){J=w.select(this);O===H&&N.showactive&&J.select("rect."+I.itemRectClassName).call(D.fill,I.activeColor)})}function d(M){M.select("rect."+I.itemRectClassName).call(D.fill,I.hoverColor)}
function q(M,N){M.select("rect."+I.itemRectClassName).call(D.fill,N.bgcolor)}function r(M,N){var H=N._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},J=x.tester.selectAll("g."+I.dropdownButtonClassName).data(E.filterVisible(N.buttons));J.enter().append("g").classed(I.dropdownButtonClassName,!0);var O=-1!==["up","down"].indexOf(N.direction);J.each(function(V,Y){var ba=w.select(this);ba.call(p,N,V,M);ba=ba.select("."+I.itemTextClassName);
V=ba.node()&&x.bBox(ba.node()).width;V=Math.max(V+I.textPadX,I.minWidth);var ea=N.font.size*G;ba=B.lineCount(ba);ba=Math.max(ea*ba,I.minHeight)+I.textOffsetY;ba=Math.ceil(ba);V=Math.ceil(V);H.widths[Y]=V;H.heights[Y]=ba;H.height1=Math.max(H.height1,ba);H.width1=Math.max(H.width1,V);O?(H.totalWidth=Math.max(H.totalWidth,V),H.openWidth=H.totalWidth,H.totalHeight+=ba+I.gapButton,H.openHeight+=ba+I.gapButton):(H.totalWidth+=V+I.gapButton,H.openWidth+=V+I.gapButton,H.totalHeight=Math.max(H.totalHeight,
ba),H.openHeight=H.totalHeight)});O?H.totalHeight-=I.gapButton:H.totalWidth-=I.gapButton;H.headerWidth=H.width1+I.arrowPadX;H.headerHeight=H.height1;"dropdown"===N.type&&(O?(H.width1+=I.arrowPadX,H.totalHeight=H.height1):H.totalWidth=H.width1,H.totalWidth+=I.arrowPadX);J.remove();J=H.totalWidth+N.pad.l+N.pad.r;var Q=H.totalHeight+N.pad.t+N.pad.b,U=M._fullLayout._size;H.lx=U.l+U.w*N.x;H.ly=U.t+U.h*(1-N.y);U="left";E.isRightAnchor(N)&&(H.lx-=J,U="right");E.isCenterAnchor(N)&&(H.lx-=J/2,U="center");
var P="top";E.isBottomAnchor(N)&&(H.ly-=Q,P="bottom");E.isMiddleAnchor(N)&&(H.ly-=Q/2,P="middle");H.totalWidth=Math.ceil(H.totalWidth);H.totalHeight=Math.ceil(H.totalHeight);H.lx=Math.round(H.lx);H.ly=Math.round(H.ly);y.autoMargin(M,I.autoMarginIdRoot+N._index,{x:N.x,y:N.y,l:J*({right:1,center:.5}[U]||0),r:J*({left:1,center:.5}[U]||0),b:Q*({top:1,middle:.5}[P]||0),t:Q*({bottom:1,middle:.5}[P]||0)})}function u(M,N,H,J){J=J||{};var O=M.select("."+I.itemRectClassName),Q=M.select("."+I.itemTextClassName),
U=N.borderwidth,P=H.index,V=N._dims;x.setTranslate(M,U+H.x,U+H.y);M=-1!==["up","down"].indexOf(N.direction);U=J.height||(M?V.heights[P]:V.height1);O.attr({x:0,y:0,width:J.width||(M?V.width1:V.widths[P]),height:U});N=N.font.size*G;J=B.lineCount(Q);B.positionText(Q,I.textOffsetX,U/2-(J-1)*N/2+I.textOffsetY);M?H.y+=V.heights[P]+H.yPad:H.x+=V.widths[P]+H.xPad;H.index++}function v(M,N){M.attr(I.menuIndexAttrName,N||"-1").selectAll("g."+I.dropdownButtonClassName).remove()}var w=b("d3"),y=b("../../plots/plots"),
D=b("../color"),x=b("../drawing"),E=b("../../lib"),B=b("../../lib/svg_text_utils"),t=b("../../plot_api/plot_template").arrayEditor,G=b("../../constants/alignment").LINE_SPACING,I=b("./constants"),L=b("./scrollbox");F.exports=function(M){function N(V){y.autoMargin(M,I.autoMarginIdRoot+V._index)}var H=M._fullLayout,J=E.filterVisible(H[I.name]),O=H._menulayer.selectAll("g."+I.containerClassName).data(0<J.length?[0]:[]);O.enter().append("g").classed(I.containerClassName,!0).style("cursor","pointer");
O.exit().each(function(){w.select(this).selectAll("g."+I.headerGroupClassName).each(N)}).remove();if(0!==J.length){var Q=O.selectAll("g."+I.headerGroupClassName).data(J,m);Q.enter().append("g").classed(I.headerGroupClassName,!0);var U=E.ensureSingle(O,"g",I.dropdownButtonGroupClassName,function(V){V.style("pointer-events","all")});for(O=0;O<J.length;O++)r(M,J[O]);var P=new L(M,U,"updatemenus"+H._uid);Q.enter().size()&&(U.node().parentNode.appendChild(U.node()),U.call(v));Q.exit().each(function(V){U.call(v);
N(V)}).remove();Q.each(function(V){var Y=w.select(this),ba="dropdown"===V.type?U:null;y.manageCommandObserver(M,V,V.buttons,function(ea){l(M,V,V.buttons[ea.index],Y,ba,P,ea.index,!0)});"dropdown"===V.type?(e(M,Y,U,P,V),h(U,V)&&a(M,Y,U,P,V)):a(M,Y,null,null,V)})}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,"../../plots/plots":860,"../color":615,"../drawing":637,"./constants":712,"./scrollbox":716,d3:169}],715:[function(b,F,C){arguments[4][709][0].apply(C,
arguments)},{"./attributes":711,"./constants":712,"./defaults":713,"./draw":714,dup:709}],716:[function(b,F,C){function m(g,k,p){this.gd=g;this.container=k;this.id=p;this.vbar=this.hbar=this.translateY=this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}F.exports=m;
var h=b("d3"),l=b("../color"),e=b("../drawing"),a=b("../../lib");m.barWidth=2;m.barLength=20;m.barRadius=2;m.barPad=1;m.barColor="#808BA4";m.prototype.enable=function(g,k,p){var n=this.gd._fullLayout,c=n.width,f=n.height;this.position=g;g=this.position.l;var d=this.position.w,q=this.position.t,r=this.position.h,u=this.position.direction,v="down"===u,w="left"===u,y="up"===u,D=d,x=r;v||w||"right"===u||y||(this.position.direction="down",v=!0);if(v||y){var E=g;var B=E+D;v?(y=q,u=Math.min(y+x,f)):(u=q+
x,y=Math.max(u-x,0));x=u-y}else y=q,u=y+x,w?(B=g+D,E=Math.max(B-D,0)):(E=g,B=Math.min(E+D,c)),D=B-E;this._box={l:E,t:y,w:D,h:x};v=d>D;var t=m.barLength+2*m.barPad;w=m.barWidth+2*m.barPad;var G=q+r;G+w>f&&(G=f-w);f=this.container.selectAll("rect.scrollbar-horizontal").data(v?[0]:[]);f.exit().on(".drag",null).remove();f.enter().append("rect").classed("scrollbar-horizontal",!0).call(l.fill,m.barColor);v?(this.hbar=f.attr({rx:m.barRadius,ry:m.barRadius,x:g,y:G,width:t,height:w}),this._hbarXMin=g+t/2,
this._hbarTranslateMax=D-t):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);f=r>x;D=m.barWidth+2*m.barPad;t=m.barLength+2*m.barPad;G=g+d;G+D>c&&(G=c-D);c=this.container.selectAll("rect.scrollbar-vertical").data(f?[0]:[]);c.exit().on(".drag",null).remove();c.enter().append("rect").classed("scrollbar-vertical",!0).call(l.fill,m.barColor);f?(this.vbar=c.attr({rx:m.barRadius,ry:m.barRadius,x:G,y:q,width:D,height:t}),this._vbarYMin=q+t/2,this._vbarTranslateMax=x-t):(delete this.vbar,
delete this._vbarYMin,delete this._vbarTranslateMax);c=this.id;x=E-.5;B=f?B+D+.5:B+.5;y-=.5;u=v?u+w+.5:u+.5;n=n._topdefs.selectAll("#"+c).data(v||f?[0]:[]);n.exit().remove();n.enter().append("clipPath").attr("id",c).append("rect");v||f?(this._clipRect=n.select("rect").attr({x:Math.floor(x),y:Math.floor(y),width:Math.ceil(B)-Math.floor(x),height:Math.ceil(u)-Math.floor(y)}),this.container.call(e.setClipUrl,c,this.gd),this.bg.attr({x:g,y:q,width:d,height:r})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",
null).on(".drag",null).call(e.setClipUrl,null),delete this._clipRect);if(v||f)n=h.behavior.drag().on("dragstart",function(){h.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(n),n=h.behavior.drag().on("dragstart",function(){h.event.sourceEvent.preventDefault();h.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),v&&this.hbar.on(".drag",null).call(n),f&&this.vbar.on(".drag",
null).call(n);this.setTranslate(k,p)};m.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(e.setClipUrl,null),delete this._clipRect;this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};m.prototype._onBoxDrag=
function(){var g=this.translateX,k=this.translateY;this.hbar&&(g-=h.event.dx);this.vbar&&(k-=h.event.dy);this.setTranslate(g,k)};m.prototype._onBoxWheel=function(){var g=this.translateX,k=this.translateY;this.hbar&&(g+=h.event.deltaY);this.vbar&&(k+=h.event.deltaY);this.setTranslate(g,k)};m.prototype._onBarDrag=function(){var g=this.translateX,k=this.translateY;if(this.hbar){g+=this._hbarXMin;var p=g+this._hbarTranslateMax;g=(a.constrain(h.event.x,g,p)-g)/(p-g)*(this.position.w-this._box.w)}this.vbar&&
(k+=this._vbarYMin,p=k+this._vbarTranslateMax,k=(a.constrain(h.event.y,k,p)-k)/(p-k)*(this.position.h-this._box.h));this.setTranslate(g,k)};m.prototype.setTranslate=function(g,k){var p=this.position.w-this._box.w,n=this.position.h-this._box.h;g=a.constrain(g||0,0,p);k=a.constrain(k||0,0,n);this.translateX=g;this.translateY=k;this.container.call(e.setTranslate,this._box.l-this.position.l-g,this._box.t-this.position.t-k);this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+g-.5),y:Math.floor(this.position.t+
k-.5)});this.hbar&&this.hbar.call(e.setTranslate,g+g/p*this._hbarTranslateMax,k);this.vbar&&this.vbar.call(e.setTranslate,g,k+k/n*this._vbarTranslateMax)}},{"../../lib":749,"../color":615,"../drawing":637,d3:169}],717:[function(b,F,C){F.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",
top:"bottom",bottom:"top"}}},{}],718:[function(b,F,C){F.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},{}],719:[function(b,F,C){F.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],720:[function(b,F,C){F.exports={COMPARISON_OPS:"\x3d !\x3d \x3c \x3e\x3d \x3e \x3c\x3d".split(" "),COMPARISON_OPS2:["\x3d","\x3c","\x3e\x3d","\x3e","\x3c\x3d"],
INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"\x3d":"\x3d","\x3c":"\x3c","\x3c\x3d":"\x3c","\x3e":"\x3e","\x3e\x3d":"\x3e","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],721:[function(b,F,C){F.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],722:[function(b,F,C){F.exports={circle:"","circle-open":"",square:"","square-open":"",
diamond:"","diamond-open":"",cross:"+",x:""}},{}],723:[function(b,F,C){F.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,DESELECTDIM:.2}},{}],724:[function(b,F,C){F.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1E4,ONEMAXYEAR:316224E5,ONEAVGYEAR:315576E5,ONEMINYEAR:31536E6,ONEMAXQUARTER:79488E5,ONEAVGQUARTER:78894E5,ONEMINQUARTER:76896E5,ONEMAXMONTH:26784E5,ONEAVGMONTH:26298E5,ONEMINMONTH:24192E5,ONEWEEK:6048E5,ONEDAY:864E5,ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,
LOG_CLIP:10,MINUS_SIGN:""}},{}],725:[function(b,F,C){C.xmlns="http://www.w3.org/2000/xmlns/";C.svg="http://www.w3.org/2000/svg";C.xlink="http://www.w3.org/1999/xlink";C.svgAttrs={xmlns:C.svg,"xmlns:xlink":C.xlink}},{}],726:[function(b,F,C){C.version=b("./version").version;b("es6-promise").polyfill();b("../build/plotcss");b("./fonts/mathjax_config")();F=b("./registry");F=C.register=F.register;for(var m=b("./plot_api"),h=Object.keys(m),l=0;l<h.length;l++){var e=h[l];"_"!==e.charAt(0)&&(C[e]=m[e]);
F({moduleType:"apiMethod",name:e,fn:m[e]})}F(b("./traces/scatter"));F([b("./components/legend"),b("./components/fx"),b("./components/annotations"),b("./components/annotations3d"),b("./components/shapes"),b("./components/images"),b("./components/updatemenus"),b("./components/sliders"),b("./components/rangeslider"),b("./components/rangeselector"),b("./components/grid"),b("./components/errorbars"),b("./components/colorscale"),b("./components/colorbar")]);F([b("./locale-en"),b("./locale-en-us")]);window.PlotlyLocales&&
Array.isArray(window.PlotlyLocales)&&(F(window.PlotlyLocales),delete window.PlotlyLocales);C.Icons=b("./fonts/ploticon");C.Plots=b("./plots/plots");C.Fx=b("./components/fx");C.Snapshot=b("./snapshot");C.PlotSchema=b("./plot_api/plot_schema");C.Queue=b("./lib/queue");C.d3=b("d3")},{"../build/plotcss":1,"./components/annotations":606,"./components/annotations3d":611,"./components/colorbar":621,"./components/colorscale":627,"./components/errorbars":643,"./components/fx":655,"./components/grid":659,"./components/images":664,
"./components/legend":672,"./components/rangeselector":683,"./components/rangeslider":690,"./components/shapes":704,"./components/sliders":709,"./components/updatemenus":715,"./fonts/mathjax_config":727,"./fonts/ploticon":728,"./lib/queue":764,"./locale-en":778,"./locale-en-us":777,"./plot_api":782,"./plot_api/plot_schema":786,"./plots/plots":860,"./registry":880,"./snapshot":885,"./traces/scatter":1167,"./version":1337,d3:169,"es6-promise":224}],727:[function(b,F,C){F.exports=function(){"undefined"!==
typeof MathJax&&"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],728:[function(b,F,C){F.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",
transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},
eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",
transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 132 132'\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}\x3c/style\x3e\x3c/defs\x3e\x3ctitle\x3eplotly-logomark\x3c/title\x3e\x3cg id\x3d'symbol'\x3e\x3crect class\x3d'cls-1' width\x3d'132' height\x3d'132' rx\x3d'6' ry\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'54' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'102' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'54' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'54' r\x3d'6'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/\x3e\x3c/g\x3e\x3c/svg\x3e"}}},
{}],729:[function(b,F,C){C.isLeftAnchor=function(m){return"left"===m.xanchor||"auto"===m.xanchor&&m.x<=1/3};C.isCenterAnchor=function(m){return"center"===m.xanchor||"auto"===m.xanchor&&m.x>1/3&&m.x<2/3};C.isRightAnchor=function(m){return"right"===m.xanchor||"auto"===m.xanchor&&m.x>=2/3};C.isTopAnchor=function(m){return"top"===m.yanchor||"auto"===m.yanchor&&m.y>=2/3};C.isMiddleAnchor=function(m){return"middle"===m.yanchor||"auto"===m.yanchor&&m.y>1/3&&m.y<2/3};C.isBottomAnchor=function(m){return"bottom"===
m.yanchor||"auto"===m.yanchor&&m.y<=1/3}},{}],730:[function(b,F,C){function m(n){return Math.abs(n[1]-n[0])>p-1E-14}function h(n,c){return g(c-n,p)}function l(n,c){if(m(c))return!0;if(c[0]<c[1]){var f=c[0];c=c[1]}else f=c[1],c=c[0];f=a(f,p);c=a(c,p);f>c&&(c+=p);n=a(n,p);var d=n+p;return n>=f&&n<=c||d>=f&&d<=c}function e(n,c,f,d,q,r,u){function v(B,t){return[B*Math.cos(t)+q,r-B*Math.sin(t)]}function w(B,t,G){return"A"+[B,B]+" "+[0,E,G]+" "+v(B,t)}q=q||0;r=r||0;var y=m([f,d]);if(y){var D=0;var x=k;
f=p}else f<d?(D=f,f=d):D=d;n<c?(d=n,n=c):d=c;var E=Math.abs(f-D)<=k?0:1;y?y=null===d?"M"+v(n,D)+w(n,x,0)+w(n,f,0)+"Z":"M"+v(d,D)+w(d,x,0)+w(d,f,0)+"ZM"+v(n,D)+w(n,x,1)+w(n,f,1)+"Z":null===d?(y="M"+v(n,D)+w(n,f,0),u&&(y+="L0,0Z")):y="M"+v(d,D)+"L"+v(n,D)+w(n,f,0)+"L"+v(d,f)+w(d,D,1)+"Z";return y}b=b("./mod");var a=b.mod,g=b.modHalf,k=Math.PI,p=2*k;F.exports={deg2rad:function(n){return n/180*k},rad2deg:function(n){return n/k*180},angleDelta:h,angleDist:function(n,c){return Math.abs(h(n,c))},isFullCircle:m,
isAngleInsideSector:l,isPtInsideSector:function(n,c,f,d){if(!l(c,d))return!1;f[0]<f[1]?(c=f[0],f=f[1]):(c=f[1],f=f[0]);return n>=c&&n<=f},pathArc:function(n,c,f,d,q){return e(null,n,c,f,d,q,0)},pathSector:function(n,c,f,d,q){return e(null,n,c,f,d,q,1)},pathAnnulus:function(n,c,f,d,q,r){return e(n,c,f,d,q,r,1)}}},{"./mod":756}],731:[function(b,F,C){function m(k){return a.isView(k)&&!(k instanceof g)}function h(k){return e(k)||m(k)}function l(k,p,n){if(h(k)){if(h(k[0])){for(var c=0;c<k.length;c++)n=
p(n,k[c].length);return n}return k.length}return 0}var e=Array.isArray,a="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},g="undefined"===typeof DataView?function(){}:DataView;C.isTypedArray=m;C.isArrayOrTypedArray=h;C.isArray1D=function(k){return!h(k[0])};C.ensureArray=function(k,p){e(k)||(k=[]);k.length=p;return k};C.concat=function(){var k=[],p=!0,n=0,c,f;for(c=0;c<arguments.length;c++){var d=arguments[c];if(f=d.length){if(q)k.push(d);else{var q=d;
var r=f}if(e(d))var u=!1;else p=!1,n?u!==d.constructor&&(u=!1):u=d.constructor;n+=f}}if(!n)return[];if(!k.length)return q;if(p)return q.concat.apply(q,k);if(u){p=new u(n);p.set(q);for(c=0;c<k.length;c++)d=k[c],p.set(d,r),r+=d.length;return p}p=Array(n);for(n=0;n<q.length;n++)p[n]=q[n];for(c=0;c<k.length;c++){d=k[c];for(n=0;n<d.length;n++)p[r+n]=d[n];r+=n}return p};C.maxRowLength=function(k){return l(k,Math.max,0)};C.minRowLength=function(k){return l(k,Math.min,Infinity)}},{}],732:[function(b,F,C){var m=
b("fast-isnumeric"),h=b("../constants/numerical").BADNUM,l=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;F.exports=function(e){"string"===typeof e&&(e=e.replace(l,""));return m(e)?Number(e):h}},{"../constants/numerical":724,"fast-isnumeric":241}],733:[function(b,F,C){F.exports=function(m){m=m._fullLayout;m._glcanvas&&m._glcanvas.size()&&m._glcanvas.each(function(h){h.regl&&h.regl.clear({color:!0,depth:!0})})}},{}],734:[function(b,F,C){F.exports=function(m){m._responsiveChartHandler&&(window.removeEventListener("resize",
m._responsiveChartHandler),delete m._responsiveChartHandler)}},{}],735:[function(b,F,C){function m(f,d){var q=C.valObjectMeta[d.valType];if(d.arrayOk&&c(f))return!0;if(q.validateFunction)return q.validateFunction(f,d);var r={},u=r;q.coerceFunction(f,{set:function(v){u=v}},r,d);return u!==r}var h=b("fast-isnumeric"),l=b("tinycolor2"),e=b("../plots/attributes"),a=b("../components/colorscale/scales"),g=b("../constants/interactions").DESELECTDIM,k=b("./nested_property"),p=b("./regex").counter,n=b("./mod").modHalf,
c=b("./array").isArrayOrTypedArray;C.valObjectMeta={data_array:{coerceFunction:function(f,d,q){c(f)?d.set(f):void 0!==q&&d.set(q)}},enumerated:{coerceFunction:function(f,d,q,r){r.coerceNumber&&(f=+f);-1===r.values.indexOf(f)?d.set(q):d.set(f)},validateFunction:function(f,d){d.coerceNumber&&(f=+f);d=d.values;for(var q=0;q<d.length;q++){var r=String(d[q]);if("/"===r.charAt(0)&&"/"===r.charAt(r.length-1)){if((new RegExp(r.substr(1,r.length-2))).test(f))return!0}else if(f===d[q])return!0}return!1}},"boolean":{coerceFunction:function(f,
d,q){!0===f||!1===f?d.set(f):d.set(q)}},number:{coerceFunction:function(f,d,q,r){!h(f)||void 0!==r.min&&f<r.min||void 0!==r.max&&f>r.max?d.set(q):d.set(+f)}},integer:{coerceFunction:function(f,d,q,r){f%1||!h(f)||void 0!==r.min&&f<r.min||void 0!==r.max&&f>r.max?d.set(q):d.set(+f)}},string:{coerceFunction:function(f,d,q,r){"string"!==typeof f?!0===r.strict||"number"!==typeof f?d.set(q):d.set(String(f)):r.noBlank&&!f?d.set(q):d.set(f)}},color:{coerceFunction:function(f,d,q){l(f).isValid()?d.set(f):d.set(q)}},
colorlist:{coerceFunction:function(f,d,q){function r(u){return l(u).isValid()}Array.isArray(f)&&f.length?f.every(r)?d.set(f):d.set(q):d.set(q)}},colorscale:{coerceFunction:function(f,d,q){d.set(a.get(f,q))}},angle:{coerceFunction:function(f,d,q){"auto"===f?d.set("auto"):h(f)?d.set(n(+f,360)):d.set(q)}},subplotid:{coerceFunction:function(f,d,q,r){r=r.regex||p(q);"string"===typeof f&&r.test(f)?d.set(f):d.set(q)},validateFunction:function(f,d){d=d.dflt;return f===d?!0:"string"!==typeof f?!1:p(d).test(f)?
!0:!1}},flaglist:{coerceFunction:function(f,d,q,r){if("string"!==typeof f)d.set(q);else if(-1!==(r.extras||[]).indexOf(f))d.set(f);else{f=f.split("+");for(var u=0;u<f.length;){var v=f[u];-1===r.flags.indexOf(v)||f.indexOf(v)<u?f.splice(u,1):u++}f.length?d.set(f.join("+")):d.set(q)}}},any:{coerceFunction:function(f,d,q){void 0===f?d.set(q):d.set(f)}},info_array:{coerceFunction:function(f,d,q,r){function u(I,L,M){var N;void 0===M&&(M=L.dflt);C.valObjectMeta[L.valType].coerceFunction(I,{set:function(H){N=
H}},M,L);return N}var v=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(f)&&Array.isArray(f[0]);if(Array.isArray(f)){r=r.items;var w=[],y=Array.isArray(r),D=y&&v&&Array.isArray(r[0]);D=v&&y&&!D;var x=y&&!D?r.length:f.length,E;q=Array.isArray(q)?q:[];if(v)for(v=0;v<x;v++){w[v]=[];var B=Array.isArray(f[v])?f[v]:[];var t=D?r.length:y?r[v].length:B.length;for(E=0;E<t;E++){var G=D?r[E]:y?r[v][E]:r;G=u(B[E],G,(q[v]||[])[E]);void 0!==G&&(w[v][E]=G)}}else for(v=0;v<x;v++)G=u(f[v],y?r[v]:r,q[v]),void 0!==
G&&(w[v]=G);d.set(w)}else d.set(q)},validateFunction:function(f,d){if(!Array.isArray(f))return!1;var q=d.items,r=Array.isArray(q),u=2===d.dimensions;if(!d.freeLength&&f.length!==q.length)return!1;for(var v=0;v<f.length;v++)if(u){if(!Array.isArray(f[v])||!d.freeLength&&f[v].length!==q[v].length)return!1;for(var w=0;w<f[v].length;w++)if(!m(f[v][w],r?q[v][w]:q))return!1}else if(!m(f[v],r?q[v]:q))return!1;return!0}}};C.coerce=function(f,d,q,r,u){q=k(q,r).get();var v=k(f,r);f=k(d,r);v=v.get();d=d._template;
void 0===v&&d&&(v=k(d,r).get(),d=0);void 0===u&&(u=q.dflt);if(q.arrayOk&&c(v))return f.set(v),v;var w=C.valObjectMeta[q.valType].coerceFunction;w(v,f,u,q);var y=f.get();d&&y===u&&!m(v,q)&&(v=k(d,r).get(),w(v,f,u,q),y=f.get());return y};C.coerce2=function(f,d,q,r,u){var v=k(f,r);f=C.coerce(f,d,q,r,u);v=v.get();return void 0!==v&&null!==v?f:!1};C.coerceFont=function(f,d,q){var r={};q=q||{};r.family=f(d+".family",q.family);r.size=f(d+".size",q.size);r.color=f(d+".color",q.color);return r};C.coerceHoverinfo=
function(f,d,q){var r=d._module.attributes;r=r.hoverinfo?r:e;var u=r.hoverinfo;if(1===q._dataLength){q="all"===u.dflt?u.flags.slice():u.dflt.split("+");q.splice(q.indexOf("name"),1);var v=q.join("+")}return C.coerce(f,d,r,"hoverinfo",v)};C.coerceSelectionMarkerOpacity=function(f,d){if(f.marker){var q=f.marker.opacity;if(void 0!==q){if(!c(q)&&!f.selected&&!f.unselected){var r=q;var u=g*q}d("selected.marker.opacity",r);d("unselected.marker.opacity",u)}}};C.validate=m},{"../components/colorscale/scales":630,
"../constants/interactions":723,"../plots/attributes":794,"./array":731,"./mod":756,"./nested_property":757,"./regex":765,"fast-isnumeric":241,tinycolor2:548}],736:[function(b,F,C){function m(N){return N&&u.componentsRegistry.calendars&&"string"===typeof N&&"gregorian"!==N}function h(N,H){return String(N+Math.pow(10,H)).substr(1)}function l(N,H,J,O,Q){if(H||J||O||Q)if(N+=" "+h(H,2)+":"+h(J,2),O||Q)if(N+=":"+h(O,2),Q){for(H=4;0===Q%10;)--H,Q/=10;N+="."+h(Q,H)}return N}function e(N,H,J,O){N=N.replace(I,
function(U){U=Math.min(+U.charAt(1)||6,6);return(H/1E3%1+2).toFixed(U).substr(2).replace(/0+$/,"")||"0"});var Q=new Date(Math.floor(H+.05));if(m(O))try{N=u.getComponentMethod("calendars","worldCalFmt")(N,H,O)}catch(U){return"Invalid"}return J(N)(Q)}var a=b("d3-time-format").timeFormat,g=b("fast-isnumeric"),k=b("./loggers"),p=b("./mod").mod;F=b("../constants/numerical");var n=F.BADNUM,c=F.ONEDAY,f=F.ONEHOUR,d=F.ONEMIN,q=F.ONESEC,r=F.EPOCHJD,u=b("../registry"),v=b("d3-time-format").utcFormat,w=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,
y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,D=(new Date).getFullYear()-70;C.dateTick0=function(N,H){return m(N)?H?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[N]:u.getComponentMethod("calendars","CANONICAL_TICK")[N]:H?"2000-01-02":"2000-01-01"};C.dfltRange=function(N){return m(N)?u.getComponentMethod("calendars","DFLTRANGE")[N]:["2000-01-01","2001-01-01"]};C.isJSDate=function(N){return"object"===
typeof N&&null!==N&&"function"===typeof N.getTime};C.dateTime2ms=function(N,H){if(C.isJSDate(N)){H=N.getTimezoneOffset()*d;var J=(N.getUTCMinutes()-N.getMinutes())*d+(N.getUTCSeconds()-N.getSeconds())*q+(N.getUTCMilliseconds()-N.getMilliseconds());if(J){var O=3*d;H=H-O/2+p(J-H+O/2,O)}N=Number(N)-H;return N>=x&&N<=E?N:n}if("string"!==typeof N&&"number"!==typeof N)return n;N=String(N);J=m(H);var Q=N.charAt(0);!J||"G"!==Q&&"g"!==Q||(N=N.substr(1),H="");Q=J&&"chinese"===H.substr(0,7);var U=N.match(Q?
y:w);if(!U)return n;N=U[1];var P=U[3]||"1",V=Number(U[5]||1),Y=Number(U[7]||0),ba=Number(U[9]||0);U=Number(U[11]||0);if(J){if(2===N.length)return n;N=Number(N);try{var ea=u.getComponentMethod("calendars","getCal")(H);if(Q){var ca="i"===P.charAt(P.length-1);P=parseInt(P,10);O=ea.newDate(N,ea.toMonthIndex(N,P,ca),V)}else O=ea.newDate(N,Number(P),V)}catch(ia){return n}return O?(O.toJD()-r)*c+Y*f+ba*d+U*q:n}N=2===N.length?(Number(N)+2E3-D)%100+D:Number(N);--P;H=new Date(Date.UTC(2E3,P,V,Y,ba));H.setUTCFullYear(N);
return H.getUTCMonth()!==P||H.getUTCDate()!==V?n:H.getTime()+U*q};var x=C.MIN_MS=C.dateTime2ms("-9999");var E=C.MAX_MS=C.dateTime2ms("9999-12-31 23:59:59.9999");C.isDateTime=function(N,H){return C.dateTime2ms(N,H)!==n};var B=90*c,t=3*f,G=5*d;C.ms2DateTime=function(N,H,J){if("number"!==typeof N||!(N>=x&&N<=E))return n;H||(H=0);var O=Math.floor(10*p(N+.05,1)),Q=Math.round(N-O/10);if(m(J)){var U=Math.floor(Q/c)+r;N=Math.floor(p(N,c));try{var P=u.getComponentMethod("calendars","getCal")(J).fromJD(U).formatDate("yyyy-mm-dd")}catch(V){P=
v("G%Y-%m-%d")(new Date(Q))}if("-"===P.charAt(0))for(;11>P.length;)P="-0"+P.substr(1);else for(;10>P.length;)P="0"+P;J=H<B?Math.floor(N/f):0;Q=H<B?Math.floor(N%f/d):0;U=H<t?Math.floor(N%d/q):0;H=H<G?N%q*10+O:0}else N=new Date(Q),P=v("%Y-%m-%d")(N),J=H<B?N.getUTCHours():0,Q=H<B?N.getUTCMinutes():0,U=H<t?N.getUTCSeconds():0,H=H<G?10*N.getUTCMilliseconds()+O:0;return l(P,J,Q,U,H)};C.ms2DateTimeLocal=function(N){if(!(N>=x+c&&N<=E-c))return n;var H=Math.floor(10*p(N+.05,1)),J=new Date(Math.round(N-H/10));
N=a("%Y-%m-%d")(J);var O=J.getHours(),Q=J.getMinutes(),U=J.getSeconds();H=10*J.getUTCMilliseconds()+H;return l(N,O,Q,U,H)};C.cleanDate=function(N,H,J){if(N===n)return H;if(C.isJSDate(N)||"number"===typeof N&&isFinite(N)){if(m(J))return k.error("JS Dates and milliseconds are incompatible with world calendars",N),H;N=C.ms2DateTimeLocal(+N);if(!N&&void 0!==H)return H}else if(!C.isDateTime(N,J))return k.error("unrecognized date",N),H;return N};var I=/%\d?f/g,L=[59,59.9,59.99,59.999,59.9999];C.formatDate=
function(N,H,J,O,Q,U){Q=m(Q)&&Q;if(!H)if("y"===J)H=U.year;else if("m"===J)H=U.month;else if("d"===J)H=U.dayMonth+"\n"+U.year;else{H=J;J=p(N+.05,c);J=h(Math.floor(J/f),2)+":"+h(p(Math.floor(J/d),60),2);if("M"!==H){g(H)||(H=0);var P=(100+Math.min(p(N/q,60),L[H])).toFixed(H).substr(1);0<H&&(P=P.replace(/0+$/,"").replace(/[\.]$/,""));J+=":"+P}return J+"\n"+e(U.dayMonthYear,N,O,Q)}return e(H,N,O,Q)};var M=3*c;C.incrementMonth=function(N,H,J){J=m(J)&&J;var O=p(N,c);N=Math.round(N-O);if(J)try{var Q=Math.round(N/
c)+r,U=u.getComponentMethod("calendars","getCal")(J),P=U.fromJD(Q);H%12?U.add(P,H,"m"):U.add(P,H/12,"y");return(P.toJD()-r)*c+O}catch(V){k.error("invalid ms "+N+" in calendar "+J)}N=new Date(N+M);return N.setUTCMonth(N.getUTCMonth()+H)+O-M};C.findExactDates=function(N,H){for(var J=0,O=0,Q=0,U=0,P,V=m(H)&&u.getComponentMethod("calendars","getCal")(H),Y=0;Y<N.length;Y++)if(H=N[Y],!g(H))U++;else if(!(H%c))if(V)try{P=V.fromJD(H/c+r),1===P.day()?1===P.month()?J++:O++:Q++}catch(ba){}else P=new Date(H),
1===P.getUTCDate()?0===P.getUTCMonth()?J++:O++:Q++;O+=J;N=N.length-U;return{exactYears:J/N,exactMonths:O/N,exactDays:(Q+O)/N}}},{"../constants/numerical":724,"../registry":880,"./loggers":753,"./mod":756,"d3-time-format":166,"fast-isnumeric":241}],737:[function(b,F,C){function m(a){var g=a&&a.parentNode;g&&g.removeChild(a)}function h(a,g,k){a="plotly.js-style-"+a;var p=document.getElementById(a);p||(p=document.createElement("style"),p.setAttribute("id",a),p.appendChild(document.createTextNode("")),
document.head.appendChild(p));a=p.sheet;a.insertRule?a.insertRule(g+"{"+k+"}",0):a.addRule?a.addRule(g,k,0):e.warn("addStyleRule failed")}var l=b("d3"),e=b("./loggers");F.exports={getGraphDiv:function(a){if("string"===typeof a){var g=document.getElementById(a);if(null===g)throw Error("No DOM element with id '"+a+"' exists on the page.");return g}if(null===a||void 0===a)throw Error("DOM element provided is null or undefined");return a},isPlotDiv:function(a){a=l.select(a);return a.node()instanceof HTMLElement&&
a.size()&&a.classed("js-plotly-plot")},removeElement:m,addStyleRule:function(a,g){h("global",a,g)},addRelatedStyleRule:h,deleteRelatedStyleRule:function(a){(a=document.getElementById("plotly.js-style-"+a))&&m(a)}}},{"./loggers":753,d3:169}],738:[function(b,F,C){var m=b("events").EventEmitter;F.exports={init:function(h){if(h._ev instanceof m)return h;var l=new m,e=new m;h._ev=l;h._internalEv=e;h.on=l.on.bind(l);h.once=l.once.bind(l);h.removeListener=l.removeListener.bind(l);h.removeAllListeners=l.removeAllListeners.bind(l);
h._internalOn=e.on.bind(e);h._internalOnce=e.once.bind(e);h._removeInternalListener=e.removeListener.bind(e);h._removeAllInternalListeners=e.removeAllListeners.bind(e);h.emit=function(a,g){"undefined"!==typeof jQuery&&jQuery(h).trigger(a,g);l.emit(a,g);e.emit(a,g)};return h},triggerHandler:function(h,l,e){function a(n){if(n.listener){if(k.removeListener(l,n.listener),!n.fired)return n.fired=!0,n.listener.apply(k,[e])}else return n.apply(k,[e])}var g;"undefined"!==typeof jQuery&&(g=jQuery(h).triggerHandler(l,
e));var k=h._ev;if(!k)return g;h=k._events[l];if(!h)return g;h=Array.isArray(h)?h:[h];var p;for(p=0;p<h.length-1;p++)a(h[p]);h=a(h[p]);return void 0!==g?g:h},purge:function(h){delete h._ev;delete h.on;delete h.once;delete h.removeListener;delete h.removeAllListeners;delete h.emit;delete h._ev;delete h._internalEv;delete h._internalOn;delete h._internalOnce;delete h._removeInternalListener;delete h._removeAllInternalListeners;return h}}},{events:110}],739:[function(b,F,C){function m(e,a,g,k){var p=
e[0],n=e.length,c,f,d;if(2===n&&l(p)&&l(e[1])&&0===p.length){a:{var q=e[1];for(f=0;f<q.length;f++){var r=q[f];if(null!==r&&"object"===typeof r){q=!1;break a}void 0!==r&&(p[f]=r)}q=!0}if(q)return p;p.splice(0,p.length)}for(r=1;r<n;r++)for(c in q=e[r],q){var u=p[c];f=q[c];if(k&&l(f))p[c]=f;else if(a&&f&&(h(f)||(d=l(f))))d?(d=!1,u=u&&l(u)?u:[]):u=u&&h(u)?u:{},p[c]=m([u,f],a,g,k);else if("undefined"!==typeof f||g)p[c]=f}return p}var h=b("./is_plain_object.js"),l=Array.isArray;C.extendFlat=function(){return m(arguments,
!1,!1,!1)};C.extendDeep=function(){return m(arguments,!0,!1,!1)};C.extendDeepAll=function(){return m(arguments,!0,!0,!1)};C.extendDeepNoArrays=function(){return m(arguments,!0,!1,!0)}},{"./is_plain_object.js":750}],740:[function(b,F,C){F.exports=function(m){for(var h={},l=[],e=0,a=0;a<m.length;a++){var g=m[a];1!==h[g]&&(h[g]=1,l[e++]=g)}return l}},{}],741:[function(b,F,C){function m(l){return!0===l.visible}function h(l){l=l[0].trace;return!0===l.visible&&0!==l._length}F.exports=function(l){for(var e=
Array.isArray(l)&&Array.isArray(l[0])&&l[0][0]&&l[0][0].trace?h:m,a=[],g=0;g<l.length;g++){var k=l[g];e(k)&&a.push(k)}return a}},{}],742:[function(b,F,C){function m(q){q=q.geojson;var r=window.PlotlyGeoAssets||{};r="string"===typeof q?r[q]:q;return p(r)?r:(k.error("Oops ... something went wrong when fetching "+q),!1)}var h=b("d3"),l=b("country-regex"),e=b("@turf/area"),a=b("@turf/centroid"),g=b("@turf/bbox");C=b("./identity");var k=b("./loggers"),p=b("./is_plain_object"),n=b("./nested_property"),
c=b("./polygon"),f=Object.keys(l),d={"ISO-3":C,"USA-states":C,"country names":function(q){for(var r=0;r<f.length;r++){var u=f[r];if((new RegExp(l[u])).test(q.trim().toLowerCase()))return u}k.log("Unrecognized country name: "+q+".");return!1}};F.exports={locationToFeature:function(q,r,u){if(!r||"string"!==typeof r)return!1;r=d[q](r);var v;if(r){if("USA-states"===q)for(q=[],v=0;v<u.length;v++){var w=u[v];w.properties&&w.properties.gu&&"USA"===w.properties.gu&&q.push(w)}else q=u;for(v=0;v<q.length;v++)if(w=
q[v],w.id===r)return w;k.log(["Location with id",r,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(q){function r(x){for(var E=0;E<x.length-1;E++)if(0<x[E][0]&&0>x[E+1][0])return E;return null}var u=q.geometry,v=u.coordinates;q=q.id;var w=[],y,D;q="RUS"===q||"FJI"===q?function(x){if(null===r(x))var E=x;else for(E=Array(x.length),D=0;D<x.length;D++)E[D]=[0>x[D][0]?x[D][0]+360:x[D][0],x[D][1]];w.push(c.tester(E))}:"ATA"===q?function(x){var E=
r(x);if(null===E)return w.push(c.tester(x));var B=Array(x.length+1),t=0;for(D=0;D<x.length;D++)D>E?B[t++]=[x[D][0]+360,x[D][1]]:D===E?(B[t++]=x[D],B[t++]=[x[D][0],-90]):B[t++]=x[D];x=c.tester(B);x.pts.pop();w.push(x)}:function(x){w.push(c.tester(x))};switch(u.type){case "MultiPolygon":for(u=0;u<v.length;u++)for(y=0;y<v[u].length;y++)q(v[u][y]);break;case "Polygon":for(u=0;u<v.length;u++)q(v[u])}return w},getTraceGeojson:m,extractTraceFeature:function(q){function r(B){var t=n(B,u.featureidkey||"id").get(),
G=w[t];if(G){var I=B.geometry;if("Polygon"===I.type||"MultiPolygon"===I.type){I={type:"Feature",id:t,geometry:I,properties:{}};var L=I.properties,M=I.geometry;if("MultiPolygon"===M.type){M=M.coordinates;for(var N=0,H=0;H<M.length;H++){var J={type:"Polygon",coordinates:M[H]},O=e.default(J);if(O>N){N=O;var Q=J}}}else Q=M;Q=a.default(Q).geometry.coordinates;L.ct=Q;G.fIn=B;G.fOut=I;y.push(I)}else k.log(["Location",G.loc,"does not have a valid GeoJSON geometry. Traces with locationmode *geojson-id* only support *Polygon* and *MultiPolygon* geometries."].join(" "))}delete w[t]}
var u=q[0].trace,v=m(u);if(!v)return!1;var w={},y=[],D;for(D=0;D<u._length;D++){var x=q[D];if(x.loc||0===x.loc)w[x.loc]=x}switch(v.type){case "FeatureCollection":q=v.features;for(D=0;D<q.length;D++)r(q[D]);break;case "Feature":r(v);break;default:return k.warn(["Invalid GeoJSON type",(v.type||"none")+".","Traces with locationmode *geojson-id* only support *FeatureCollection* and *Feature* types."].join(" ")),!1}for(var E in w)k.log(["Location *"+E+"*","does not have a matching feature with id-key",
"*"+u.featureidkey+"*."].join(" "));return y},fetchTraceGeoData:function(q){function r(x){return new Promise(function(E,B){h.json(x,function(t,G){if(t)return delete v[x],B(Error(404===t.status?'GeoJSON at URL "'+x+'" does not exist.':"Unexpected error while fetching from "+x));v[x]=G;return E(G)})})}function u(x){return new Promise(function(E,B){var t=0,G=setInterval(function(){if(v[x]&&"pending"!==v[x])return clearInterval(G),E(v[x]);if(100<t)return clearInterval(G),B("Unexpected error while fetching from "+
x);t++},50)})}for(var v=window.PlotlyGeoAssets||{},w=[],y=0;y<q.length;y++){var D=q[y][0].trace.geojson;"string"===typeof D&&(v[D]?"pending"===v[D]&&w.push(u(D)):(v[D]="pending",w.push(r(D))))}return w},computeBbox:function(q){return g.default(q)}}},{"./identity":747,"./is_plain_object":750,"./loggers":753,"./nested_property":757,"./polygon":761,"@turf/area":59,"@turf/bbox":60,"@turf/centroid":61,"country-regex":139,d3:169}],743:[function(b,F,C){var m=b("../constants/numerical").BADNUM;C.calcTraceToLineCoords=
function(h){for(var l=h[0].trace.connectgaps,e=[],a=[],g=0;g<h.length;g++){var k=h[g].lonlat;k[0]!==m?a.push(k):!l&&0<a.length&&(e.push(a),a=[])}0<a.length&&e.push(a);return e};C.makeLine=function(h){return 1===h.length?{type:"LineString",coordinates:h[0]}:{type:"MultiLineString",coordinates:h}};C.makePolygon=function(h){if(1===h.length)return{type:"Polygon",coordinates:h};for(var l=Array(h.length),e=0;e<h.length;e++)l[e]=[h[e]];return{type:"MultiPolygon",coordinates:l}};C.makeBlank=function(){return{type:"Point",
coordinates:[]}}},{"../constants/numerical":724}],744:[function(b,F,C){function m(k,p,n,c,f,d,q,r){n-=k;var u=f-k;f=q-f;c-=p;q=d-p;r-=d;d=n*r-f*c;if(0===d)return null;r=(u*r-f*q)/d;u=(u*c-n*q)/d;return 0>u||1<u||0>r||1<r?null:{x:k+n*r,y:p+c*r}}function h(k,p,n,c,f){var d=c*k+f*p;if(0>d)return c*c+f*f;if(d>n)return n=c-k,p=f-p,n*n+p*p;p=c*p-f*k;return p*p/n}var l=b("./mod").mod;C.segmentsIntersect=m;C.segmentDistance=function(k,p,n,c,f,d,q,r){if(m(k,p,n,c,f,d,q,r))return 0;var u=n-k,v=c-p,w=q-f,y=
r-d,D=u*u+v*v,x=w*w+y*y;k=Math.min(h(u,v,D,f-k,d-p),h(u,v,D,q-k,r-p),h(w,y,x,k-f,p-d),h(w,y,x,n-f,c-d));return Math.sqrt(k)};var e,a,g;C.getTextLocation=function(k,p,n,c){if(k!==a||c!==g)e={},a=k,g=c;if(e[n])return e[n];var f=k.getPointAtLength(l(n-c/2,p));c=k.getPointAtLength(l(n+c/2,p));var d=Math.atan((c.y-f.y)/(c.x-f.x));k=k.getPointAtLength(l(n,p));f={x:(4*k.x+f.x+c.x)/6,y:(4*k.y+f.y+c.y)/6,theta:d};return e[n]=f};C.clearLocationCache=function(){a=null};C.getVisibleSegment=function(k,p,n){function c(x){var E=
k.getPointAtLength(x);0===x?w=E:x===u&&(y=E);x=E.x<f?f-E.x:E.x>d?E.x-d:0;E=E.y<q?q-E.y:E.y>r?E.y-r:0;return Math.sqrt(x*x+E*E)}var f=p.left,d=p.right,q=p.top,r=p.bottom;p=0;for(var u=k.getTotalLength(),v=u,w,y,D=c(p);D;){p+=D+n;if(p>v)return;D=c(p)}for(D=c(v);D;){v-=D+n;if(p>v)return;D=c(v)}return{min:p,max:v,len:v-p,total:u,isClosed:0===p&&v===u&&.1>Math.abs(w.x-y.x)&&.1>Math.abs(w.y-y.y)}};C.findPointOnPath=function(k,p,n,c){c=c||{};var f=c.pathLength||k.getTotalLength(),d=c.tolerance||.001;c=c.iterationLimit||
30;for(var q=k.getPointAtLength(0)[n]>k.getPointAtLength(f)[n]?-1:1,r=0,u=0,v,w,y;r<c&&!(v=(u+f)/2,w=k.getPointAtLength(v),y=w[n]-p,Math.abs(y)<d);)0<q*y?f=v:u=v,r++;return w}},{"./mod":756}],745:[function(b,F,C){function m(c,f){c[3]*=f;return c}function h(c){if(e(c))return n;c=g(c);return c.length?c:n}function l(c){return e(c)?c:1}var e=b("fast-isnumeric"),a=b("tinycolor2"),g=b("color-normalize"),k=b("../components/colorscale");C=b("../components/color/attributes").defaultLine;var p=b("./array").isArrayOrTypedArray,
n=g(C);F.exports={formatColor:function(c,f,d){var q=c.color,r=p(q),u=p(f),v=[];var w=void 0!==k.extractOpts(c).colorscale?k.makeColorScaleFuncFromTrace(c):h;c=r?function(x,E){return void 0===x[E]?n:g(w(x[E]))}:h;var y=u?function(x,E){return void 0===x[E]?1:l(x[E])}:l;if(r||u)for(var D=0;D<d;D++)r=c(q,D),u=y(f,D),v[D]=m(r,u);else v=m(g(q),f);return v},parseColorScale:function(c,f){void 0===f&&(f=1);c=k.extractOpts(c);return(c.reversescale?k.flipScale(c.colorscale):c.colorscale).map(function(d){var q=
d[0];d=a(d[1]).toRgb();return{index:q,rgb:[d.r,d.g,d.b,f]}})}}},{"../components/color/attributes":614,"../components/colorscale":627,"./array":731,"color-normalize":125,"fast-isnumeric":241,tinycolor2:548}],746:[function(b,F,C){function m(h){return[h]}b=b("./identity");F.exports={keyFun:function(h){return h.key},repeat:m,descend:b,wrap:m,unwrap:function(h){return h[0]}}},{"./identity":747}],747:[function(b,F,C){F.exports=function(m){return m}},{}],748:[function(b,F,C){F.exports=function(m,h){if(!h)return m;
var l=1/Math.abs(h);l=1<l?(l*m+l*h)/l:m+h;var e=String(l).length;16<e&&e>=String(m).length+String(h).length&&(m=parseFloat(l).toPrecision(12),-1===m.indexOf("e+")&&(l=+m));return l}},{}],749:[function(b,F,C){function m(D){var x={},E;for(E in D)for(var B=D[E],t=0;t<B.length;t++)x[B[t]]=+E;return x}function h(D,x,E){var B=this,t=arguments;x||(x={});var G={};return D.replace(p.TEMPLATE_STRING_REGEX,function(I,L,M){var N,H;for(H=3;H<t.length;H++)if(N=t[H]){if(N.hasOwnProperty(L)){var J=N[L];break}r.test(L)||
(J=G[L]||p.nestedProperty(N,L).get())&&(G[L]=J);if(void 0!==J)break}if(void 0===J&&B)return B.count<B.max&&p.warn("Variable '"+L+"' in "+B.name+" could not be found!"),B.count===B.max&&p.warn("Too many "+B.name+" warnings - additional warnings will be suppressed"),B.count++,I;M?(":"===M[0]&&(I=E?E.numberFormat:l.format,J=I(M.replace(w,""))(J)),"|"===M[0]&&(I=E?E.timeFormat:e,J=p.dateTime2ms(J),J=p.formatDate(J,M.replace(w,""),!1,I))):x.hasOwnProperty(L+"Label")&&(J=x[L+"Label"]);return J})}var l=
b("d3"),e=b("d3-time-format").utcFormat,a=b("fast-isnumeric");C=b("../constants/numerical");var g=C.FP_SAFE,k=C.BADNUM,p=F.exports={};p.nestedProperty=b("./nested_property");p.keyedContainer=b("./keyed_container");p.relativeAttr=b("./relative_attr");p.isPlainObject=b("./is_plain_object");p.toLogRange=b("./to_log_range");p.relinkPrivateKeys=b("./relink_private");F=b("./array");p.isTypedArray=F.isTypedArray;p.isArrayOrTypedArray=F.isArrayOrTypedArray;p.isArray1D=F.isArray1D;p.ensureArray=F.ensureArray;
p.concat=F.concat;p.maxRowLength=F.maxRowLength;p.minRowLength=F.minRowLength;F=b("./mod");p.mod=F.mod;p.modHalf=F.modHalf;F=b("./coerce");p.valObjectMeta=F.valObjectMeta;p.coerce=F.coerce;p.coerce2=F.coerce2;p.coerceFont=F.coerceFont;p.coerceHoverinfo=F.coerceHoverinfo;p.coerceSelectionMarkerOpacity=F.coerceSelectionMarkerOpacity;p.validate=F.validate;F=b("./dates");p.dateTime2ms=F.dateTime2ms;p.isDateTime=F.isDateTime;p.ms2DateTime=F.ms2DateTime;p.ms2DateTimeLocal=F.ms2DateTimeLocal;p.cleanDate=
F.cleanDate;p.isJSDate=F.isJSDate;p.formatDate=F.formatDate;p.incrementMonth=F.incrementMonth;p.dateTick0=F.dateTick0;p.dfltRange=F.dfltRange;p.findExactDates=F.findExactDates;p.MIN_MS=F.MIN_MS;p.MAX_MS=F.MAX_MS;F=b("./search");p.findBin=F.findBin;p.sorterAsc=F.sorterAsc;p.sorterDes=F.sorterDes;p.distinctVals=F.distinctVals;p.roundUp=F.roundUp;p.sort=F.sort;p.findIndexOfMin=F.findIndexOfMin;F=b("./stats");p.aggNums=F.aggNums;p.len=F.len;p.mean=F.mean;p.median=F.median;p.midRange=F.midRange;p.variance=
F.variance;p.stdev=F.stdev;p.interp=F.interp;F=b("./matrix");p.init2dArray=F.init2dArray;p.transposeRagged=F.transposeRagged;p.dot=F.dot;p.translationMatrix=F.translationMatrix;p.rotationMatrix=F.rotationMatrix;p.rotationXYMatrix=F.rotationXYMatrix;p.apply2DTransform=F.apply2DTransform;p.apply2DTransform2=F.apply2DTransform2;F=b("./angles");p.deg2rad=F.deg2rad;p.rad2deg=F.rad2deg;p.angleDelta=F.angleDelta;p.angleDist=F.angleDist;p.isFullCircle=F.isFullCircle;p.isAngleInsideSector=F.isAngleInsideSector;
p.isPtInsideSector=F.isPtInsideSector;p.pathArc=F.pathArc;p.pathSector=F.pathSector;p.pathAnnulus=F.pathAnnulus;F=b("./anchor_utils");p.isLeftAnchor=F.isLeftAnchor;p.isCenterAnchor=F.isCenterAnchor;p.isRightAnchor=F.isRightAnchor;p.isTopAnchor=F.isTopAnchor;p.isMiddleAnchor=F.isMiddleAnchor;p.isBottomAnchor=F.isBottomAnchor;F=b("./geometry2d");p.segmentsIntersect=F.segmentsIntersect;p.segmentDistance=F.segmentDistance;p.getTextLocation=F.getTextLocation;p.clearLocationCache=F.clearLocationCache;p.getVisibleSegment=
F.getVisibleSegment;p.findPointOnPath=F.findPointOnPath;F=b("./extend");p.extendFlat=F.extendFlat;p.extendDeep=F.extendDeep;p.extendDeepAll=F.extendDeepAll;p.extendDeepNoArrays=F.extendDeepNoArrays;F=b("./loggers");p.log=F.log;p.warn=F.warn;p.error=F.error;F=b("./regex");p.counterRegex=F.counter;F=b("./throttle");p.throttle=F.throttle;p.throttleDone=F.done;p.clearThrottle=F.clear;F=b("./dom");p.getGraphDiv=F.getGraphDiv;p.isPlotDiv=F.isPlotDiv;p.removeElement=F.removeElement;p.addStyleRule=F.addStyleRule;
p.addRelatedStyleRule=F.addRelatedStyleRule;p.deleteRelatedStyleRule=F.deleteRelatedStyleRule;p.clearResponsive=b("./clear_responsive");p.makeTraceGroups=b("./make_trace_groups");p._=b("./localize");p.notifier=b("./notifier");p.filterUnique=b("./filter_unique");p.filterVisible=b("./filter_visible");p.pushUnique=b("./push_unique");p.increment=b("./increment");p.cleanNumber=b("./clean_number");p.ensureNumber=function(D){if(!a(D))return k;D=Number(D);return D<-g||D>g?k:a(D)?Number(D):k};p.isIndex=function(D,
x){return void 0!==x&&D>=x?!1:a(D)&&0<=D&&0===D%1};p.noop=b("./noop");p.identity=b("./identity");p.repeat=function(D,x){for(var E=Array(x),B=0;B<x;B++)E[B]=D;return E};p.swapAttrs=function(D,x,E,B){E||(E="x");B||(B="y");for(var t=0;t<x.length;t++){var G=x[t],I=p.nestedProperty(D,G.replace("?",E));G=p.nestedProperty(D,G.replace("?",B));var L=I.get();I.set(G.get());G.set(L)}};p.raiseToTop=function(D){D.parentNode.appendChild(D)};p.cancelTransition=function(D){return D.transition().duration(0)};p.constrain=
function(D,x,E){return x>E?Math.max(E,Math.min(x,D)):Math.max(x,Math.min(E,D))};p.bBoxIntersect=function(D,x,E){E=E||0;return D.left<=x.right+E&&x.left<=D.right+E&&D.top<=x.bottom+E&&x.top<=D.bottom+E};p.simpleMap=function(D,x,E,B,t){for(var G=D.length,I=Array(G),L=0;L<G;L++)I[L]=x(D[L],E,B,t);return I};p.randstr=function G(x,E,B,t){B||(B=16);void 0===E&&(E=24);if(0>=E)return"0";var I=Math.log(Math.pow(2,E))/Math.log(B),L="",M;for(M=2;Infinity===I;M*=2)I=Math.log(Math.pow(2,E/M))/Math.log(B)*M;var N=
I-Math.floor(I);for(M=0;M<Math.floor(I);M++){var H=Math.floor(Math.random()*B).toString(B);L=H+L}N&&(I=Math.pow(B,N),H=Math.floor(Math.random()*I).toString(B),L=H+L);I=parseInt(L,B);return x&&x[L]||Infinity!==I&&I>=Math.pow(2,E)?10<t?(p.warn("randstr failed uniqueness"),L):G(x,E,B,(t||0)+1):L};p.OptionControl=function(x,E){x||(x={});E||(E="opt");var B={optionList:[],_newoption:function(t){t[E]=x;B[t.name]=t;B.optionList.push(t)}};B["_"+E]=x;return B};p.smooth=function(x,E){E=Math.round(E)||0;if(2>
E)return x;var B=x.length,t=2*B,G=2*E-1,I=Array(G),L=Array(B),M,N,H;for(M=0;M<G;M++)I[M]=(1-Math.cos(Math.PI*(M+1)/E))/(2*E);for(M=0;M<B;M++){for(N=H=0;N<G;N++){var J=M+N+1-E;J<-B?J-=t*Math.round(J/t):J>=t&&(J-=t*Math.floor(J/t));0>J?J=-1-J:J>=B&&(J=t-1-J);H+=x[J]*I[N]}L[M]=H}return L};p.syncOrAsync=function(x,E,B){function t(){return p.syncOrAsync(x,E,B)}for(var G;x.length;)if(G=x.splice(0,1)[0],(G=G(E))&&G.then)return G.then(t).then(void 0,p.promiseError);return B&&B(E)};p.stripTrailingSlash=function(x){return"/"===
x.substr(-1)?x.substr(0,x.length-1):x};p.noneOrAll=function(x,E,B){if(x){var t=!1,G=!0,I;for(I=0;I<B.length;I++){var L=x[B[I]];void 0!==L&&null!==L?t=!0:G=!1}if(t&&!G)for(I=0;I<B.length;I++)x[B[I]]=E[B[I]]}};p.mergeArray=function(x,E,B,t){var G="function"===typeof t;if(p.isArrayOrTypedArray(x))for(var I=Math.min(x.length,E.length),L=0;L<I;L++){var M=x[L];E[L][B]=G?t(M):M}};p.mergeArrayCastPositive=function(x,E,B){return p.mergeArray(x,E,B,function(t){t=+t;return isFinite(t)?0<t?t:0:0})};p.fillArray=
function(x,E,B,t){t=t||p.identity;if(p.isArrayOrTypedArray(x))for(var G=0;G<E.length;G++)E[G][B]=t(x[G])};p.castOption=function(x,E,B,t){t=t||p.identity;x=p.nestedProperty(x,B).get();return p.isArrayOrTypedArray(x)?Array.isArray(E)&&p.isArrayOrTypedArray(x[E[0]])?t(x[E[0]][E[1]]):t(x[E]):x};p.extractOption=function(x,E,B,t){if(B in x)return x[B];x=p.nestedProperty(E,t).get();if(!Array.isArray(x))return x};p.tagSelected=function(x,E,B){var t=E.selectedpoints;E=E._indexToPoints;var G;E&&(G=m(E));for(E=
0;E<t.length;E++){var I=t[E];if(p.isIndex(I)||p.isArrayOrTypedArray(I)&&p.isIndex(I[0])&&p.isIndex(I[1]))I=G?G[I]:I,I=B?B[I]:I,void 0!==I&&I<x.length&&(x[I].selected=1)}};p.selIndices2selPoints=function(x){var E=x.selectedpoints;if(x=x._indexToPoints){x=m(x);for(var B=[],t=0;t<E.length;t++){var G=E[t];p.isIndex(G)&&(G=x[G],p.isIndex(G)&&B.push(G))}return B}return E};p.getTargetArray=function(x,E){E=E.target;return"string"===typeof E&&E?(x=p.nestedProperty(x,E).get(),Array.isArray(x)?x:!1):Array.isArray(E)?
E:!1};p.minExtend=function(x,E){var B={};"object"!==typeof E&&(E={});var t=Object.keys(x),G;for(G=0;G<t.length;G++){var I=t[G];var L=x[I];"_"!==I.charAt(0)&&"function"!==typeof L&&("module"===I?B[I]=L:Array.isArray(L)?B[I]="colorscale"===I?L.slice():L.slice(0,3):p.isTypedArray(L)?B[I]=L.subarray(0,3):B[I]=L&&"object"===typeof L?p.minExtend(x[I],E[I]):L)}t=Object.keys(E);for(G=0;G<t.length;G++)I=t[G],L=E[I],"object"===typeof L&&I in B&&"object"===typeof B[I]||(B[I]=L);return B};p.titleCase=function(x){return x.charAt(0).toUpperCase()+
x.substr(1)};p.containsAny=function(x,E){for(var B=0;B<E.length;B++)if(-1!==x.indexOf(E[B]))return!0;return!1};p.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob};var n=/MSIE [1-9]\./;p.isIE9orBelow=function(){return p.isIE()&&n.test(window.navigator.userAgent)};var c=/Version\/[\d\.]+.*Safari/;p.isSafari=function(){return c.test(window.navigator.userAgent)};var f=/iPad|iPhone|iPod/;p.isIOS=function(){return f.test(window.navigator.userAgent)};p.isD3Selection=function(x){return x&&
"function"===typeof x.classed};p.ensureSingle=function(x,E,B,t){var G=x.select(E+(B?"."+B:""));if(G.size())return G;x=x.append(E);B&&x.classed(B,!0);t&&x.call(t);return x};p.ensureSingleById=function(x,E,B,t){var G=x.select(E+"#"+B);if(G.size())return G;x=x.append(E).attr("id",B);t&&x.call(t);return x};p.objectFromPath=function(x,E){x=x.split(".");for(var B,t=B={},G=0;G<x.length;G++){var I=x[G],L;(L=x[G].match(/(.*)\[([0-9]+)\]/))?(I=L[1],L=L[2],B=B[I]=[],B[L]=G===x.length-1?E:{},B=B[L]):(B[I]=G===
x.length-1?E:{},B=B[I])}return t};var d=/^([^\[\.]+)\.(.+)?/,q=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;p.expandObjectPaths=function(x){var E,B;if("object"===typeof x&&!Array.isArray(x))for(B in x)if(x.hasOwnProperty(B))if(E=B.match(d)){var t=x[B];var G=E[1];delete x[B];x[G]=p.extendDeepNoArrays(x[G]||{},p.objectFromPath(B,p.expandObjectPaths(t))[G])}else if(E=B.match(q)){t=x[B];G=E[1];var I=parseInt(E[2]);delete x[B];x[G]=x[G]||[];"."===E[3]?(E=E[4],G=x[G][I]=x[G][I]||{},p.extendDeepNoArrays(G,p.objectFromPath(E,
p.expandObjectPaths(t)))):x[G][I]=p.expandObjectPaths(t)}else x[B]=p.expandObjectPaths(x[B]);return x};p.numSeparate=function(x,E,B){B||(B=!1);if("string"!==typeof E||0===E.length)throw Error("Separator string required for formatting!");"number"===typeof x&&(x=String(x));var t=/(\d+)(\d{3})/,G=E.charAt(0);E=E.charAt(1);x=x.split(".");var I=x[0];G=1<x.length?G+x[1]:"";if(E&&(1<x.length||4<I.length||B))for(;t.test(I);)I=I.replace(t,"$1"+E+"$2");return I+G};p.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;
var r=/^\w*$/;p.templateString=function(x,E){var B={};return x.replace(p.TEMPLATE_STRING_REGEX,function(t,G){r.test(G)?t=E[G]:(B[G]=B[G]||p.nestedProperty(E,G).get,t=B[G]());return p.isValidTextValue(t)?t:""})};var u={max:10,count:0,name:"hovertemplate"};p.hovertemplateString=function(){return h.apply(u,arguments)};var v={max:10,count:0,name:"texttemplate"};p.texttemplateString=function(){return h.apply(v,arguments)};var w=/^[:|\|]/;p.subplotSort=function(x,E){for(var B=Math.min(x.length,E.length)+
1,t=0,G=0,I=0;I<B;I++){var L=x.charCodeAt(I)||0,M=E.charCodeAt(I)||0,N=48<=L&&57>=L,H=48<=M&&57>=M;N&&(t=10*t+L-48);H&&(G=10*G+M-48);if(!N||!H){if(t!==G)return t-G;if(L!==M)return L-M}}return G-t};var y=2E9;p.seedPseudoRandom=function(){y=2E9};p.pseudoRandom=function(){var x=y;y=(69069*y+1)%4294967296;return 429496729>Math.abs(y-x)?p.pseudoRandom():y/4294967296};p.fillText=function(x,E,B){var t=Array.isArray(B)?function(I){B.push(I)}:function(I){B.text=I},G=p.extractOption(x,E,"htx","hovertext");
if(p.isValidTextValue(G))return t(G);x=p.extractOption(x,E,"tx","text");if(p.isValidTextValue(x))return t(x)};p.isValidTextValue=function(x){return x||0===x};p.formatPercent=function(x,E){E=E||0;x=(Math.round(100*x*Math.pow(10,E))*Math.pow(.1,E)).toFixed(E)+"%";for(var B=0;B<E;B++)-1!==x.indexOf(".")&&(x=x.replace("0%","%"),x=x.replace(".%","%"));return x};p.isHidden=function(x){x=window.getComputedStyle(x).display;return!x||"none"===x};p.getTextTransform=function(x){var E=x.noCenter,B=x.textX,t=
x.textY,G=x.targetX,I=x.targetY,L=x.anchorX||0,M=x.anchorY||0,N=x.rotate;(x=x.scale)?1<x&&(x=1):x=0;return"translate("+(G-x*(B+L))+","+(I-x*(t+M))+")"+(1>x?"scale("+x+")":"")+(N?"rotate("+N+(E?"":" "+B+" "+t)+")":"")};p.ensureUniformFontSize=function(x,E){var B=p.extendFlat({},E);B.size=Math.max(E.size,x._fullLayout.uniformtext.minsize||0);return B}},{"../constants/numerical":724,"./anchor_utils":729,"./angles":730,"./array":731,"./clean_number":732,"./clear_responsive":734,"./coerce":735,"./dates":736,
"./dom":737,"./extend":739,"./filter_unique":740,"./filter_visible":741,"./geometry2d":744,"./identity":747,"./increment":748,"./is_plain_object":750,"./keyed_container":751,"./localize":752,"./loggers":753,"./make_trace_groups":754,"./matrix":755,"./mod":756,"./nested_property":757,"./noop":758,"./notifier":759,"./push_unique":763,"./regex":765,"./relative_attr":766,"./relink_private":767,"./search":768,"./stats":771,"./throttle":774,"./to_log_range":775,d3:169,"d3-time-format":166,"fast-isnumeric":241}],
750:[function(b,F,C){F.exports=function(m){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(m):"[object Object]"===Object.prototype.toString.call(m)&&Object.getPrototypeOf(m)===Object.prototype}},{}],751:[function(b,F,C){var m=b("./nested_property"),h=/^\w*$/;F.exports=function(l,e,a,g){a=a||"name";g=g||"value";var k,p={};if(e&&e.length){var n=m(l,e);var c=n.get()}else c=l;e=e||"";var f={};if(c)for(k=0;k<c.length;k++)f[c[k][a]]=k;var d=h.test(g),
q={set:function(r,u){var v=null===u?4:0;if(!c){if(!n||4===v)return;c=[];n.set(c)}var w=f[r];if(void 0===w){if(4===v)return;v|=3;w=c.length;f[r]=w}else u!==(d?c[w][g]:m(c[w],g).get())&&(v|=2);var y=c[w]=c[w]||{};y[a]=r;d?y[g]=u:m(y,g).set(u);null!==u&&(v&=-5);p[w]|=v;return q},get:function(r){if(c&&(r=f[r],void 0!==r))return d?c[r][g]:m(c[r],g).get()},rename:function(r,u){var v=f[r];if(void 0===v)return q;p[v]|=1;f[u]=v;delete f[r];c[v][a]=u;return q},remove:function(r){var u=f[r];if(void 0===u)return q;
var v=c[u];if(2<Object.keys(v).length)return p[u]|=2,q.set(r,null);if(d){for(k=u;k<c.length;k++)p[k]|=3;for(k=u;k<c.length;k++)f[c[k][a]]--;c.splice(u,1);delete f[r]}else m(v,g).set(null),p[u]|=6;return q},constructUpdate:function(){for(var r,u,v={},w=Object.keys(p),y=0;y<w.length;y++)u=w[y],r=e+"["+u+"]",c[u]?(p[u]&1&&(v[r+"."+a]=c[u][a]),p[u]&2&&(v[r+"."+g]=d?p[u]&4?null:c[u][g]:p[u]&4?null:m(c[u],g).get())):v[r]=null;return v}};return q}},{"./nested_property":757}],752:[function(b,F,C){var m=b("../registry");
F.exports=function(h,l){for(var e=h._context.locale,a=0;2>a;a++){for(var g=h._context.locales,k=0;2>k;k++){if(g=(g[e]||{}).dictionary)if(g=g[l])return g;g=m.localeRegistry}k=e.split("-")[0];if(k===e)break;e=k}return l}},{"../registry":880}],753:[function(b,F,C){function m(e,a){if(e&&e.apply)try{e.apply(console,a);return}catch(k){}for(var g=0;g<a.length;g++)try{e(a[g])}catch(k){console.log(a[g])}}var h=b("../plot_api/plot_config").dfltConfig,l=b("./notifier");b=F.exports={};b.log=function(){var e;
if(1<h.logging){var a=["LOG:"];for(e=0;e<arguments.length;e++)a.push(arguments[e]);m(console.trace||console.log,a)}if(1<h.notifyOnLogging){a=[];for(e=0;e<arguments.length;e++)a.push(arguments[e]);l(a.join("\x3cbr\x3e"),"long")}};b.warn=function(){var e;if(0<h.logging){var a=["WARN:"];for(e=0;e<arguments.length;e++)a.push(arguments[e]);m(console.trace||console.log,a)}if(0<h.notifyOnLogging){a=[];for(e=0;e<arguments.length;e++)a.push(arguments[e]);l(a.join("\x3cbr\x3e"),"stick")}};b.error=function(){var e;
if(0<h.logging){var a=["ERROR:"];for(e=0;e<arguments.length;e++)a.push(arguments[e]);m(console.error,a)}if(0<h.notifyOnLogging){a=[];for(e=0;e<arguments.length;e++)a.push(arguments[e]);l(a.join("\x3cbr\x3e"),"stick")}}},{"../plot_api/plot_config":785,"./notifier":759}],754:[function(b,F,C){var m=b("d3");F.exports=function(h,l,e){l=h.selectAll("g."+e.replace(/\s/g,".")).data(l,function(g){return g[0].trace.uid});l.exit().remove();l.enter().append("g").attr("class",e);l.order();var a=h.classed("rangeplot")?
"nodeRangePlot3":"node3";l.each(function(g){g[0][a]=m.select(this)});return l}},{d3:169}],755:[function(b,F,C){C.init2dArray=function(m,h){for(var l=Array(m),e=0;e<m;e++)l[e]=Array(h);return l};C.transposeRagged=function(m){var h=0,l=m.length,e,a;for(e=0;e<l;e++)h=Math.max(h,m[e].length);var g=Array(h);for(e=0;e<h;e++)for(g[e]=Array(l),a=0;a<l;a++)g[e][a]=m[a][e];return g};C.dot=function(m,h){if(!m.length||!h.length||m.length!==h.length)return null;var l=m.length,e;if(m[0].length){var a=Array(l);
for(e=0;e<l;e++)a[e]=C.dot(m[e],h)}else if(h[0].length)for(h=C.transposeRagged(h),a=Array(h.length),e=0;e<h.length;e++)a[e]=C.dot(m,h[e]);else for(e=a=0;e<l;e++)a+=m[e]*h[e];return a};C.translationMatrix=function(m,h){return[[1,0,m],[0,1,h],[0,0,1]]};C.rotationMatrix=function(m){m=m*Math.PI/180;return[[Math.cos(m),-Math.sin(m),0],[Math.sin(m),Math.cos(m),0],[0,0,1]]};C.rotationXYMatrix=function(m,h,l){return C.dot(C.dot(C.translationMatrix(h,l),C.rotationMatrix(m)),C.translationMatrix(-h,-l))};C.apply2DTransform=
function(m){return function(){var h=arguments;3===h.length&&(h=h[0]);h=1===arguments.length?h[0]:[h[0],h[1]];return C.dot(m,[h[0],h[1],1]).slice(0,2)}};C.apply2DTransform2=function(m){var h=C.apply2DTransform(m);return function(l){return h(l.slice(0,2)).concat(h(l.slice(2,4)))}}},{}],756:[function(b,F,C){F.exports={mod:function(m,h){m%=h;return 0>m?m+h:m},modHalf:function(m,h){return Math.abs(m)>h/2?m-Math.round(m/h)*h:m}}},{}],757:[function(b,F,C){function m(n,c){return function(){var f=n,d,q;for(d=
0;d<c.length-1;d++){var r=c[d];if(-1===r){r=!0;var u=[];for(q=0;q<f.length;q++)u[q]=m(f[q],c.slice(d+1))(),u[q]!==u[0]&&(r=!1);return r?u[0]:u}if("number"===typeof r&&!k(f))return;f=f[r];if("object"!==typeof f||null===f)return}if("object"===typeof f&&null!==f&&(u=f[c[d]],null!==u))return u}}function h(n,c){return void 0===n||null===n&&!c.match(p)}function l(n,c,f){return function(d){var q=n,r="",u=[[n,r]],v=h(d,f),w;for(w=0;w<c.length-1;w++){var y=c[w];if("number"===typeof y&&!k(q))throw"array index but container is not an array";
if(-1===y){v=q;r=c.slice(w+1);y=d;var D=f,x=k(y),E=!0,B=y,t=D.replace("-1",0),G=x?!1:h(y,t),I=r[0];for(u=0;u<v.length;u++)t=D.replace("-1",u),x&&(B=y[u%y.length],G=h(B,t)),G&&(E=!1),e(v,u,I,G)&&l(v[u],r,D.replace("-1",u))(B);if(v=!E)break;else return}if(!e(q,y,c[w+1],v))break;q=q[y];if("object"!==typeof q||null===q)throw"container is not an object";D=y;g(y)?D="["+y+"]":r&&(D="."+y);r+=D;u.push([q,r])}if(v){if(w===c.length-1&&(delete q[c[w]],Array.isArray(q)&&+c[w]===q.length-1))for(;q.length&&void 0===
q[q.length-1];)q.pop()}else q[c[w]]=d}}function e(n,c,f,d){if(void 0===n[c]){if(d)return!1;n[c]="number"===typeof f?[]:{}}return!0}function a(n,c,f){return{set:function(){throw"bad container";},get:function(){},astr:c,parts:f,obj:n}}var g=b("fast-isnumeric"),k=b("./array").isArrayOrTypedArray;F.exports=function(n,c){if(g(c))c=String(c);else if("string"!==typeof c||"[-1]"===c.substr(c.length-4))throw"bad property string";for(var f=0,d=c.split("."),q,r;f<d.length;){if(q=String(d[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(q[1])d[f]=
q[1];else if(0===f)d.splice(0,1);else throw"bad property string";q=q[2].substr(1,q[2].length-2).split("][");for(r=0;r<q.length;r++)f++,d.splice(f,0,Number(q[r]))}f++}return"object"!==typeof n?a(n,c,d):{set:l(n,d,c),get:m(n,d),astr:c,parts:d,obj:n}};var p=/(^|\.)args\[/},{"./array":731,"fast-isnumeric":241}],758:[function(b,F,C){F.exports=function(){}},{}],759:[function(b,F,C){var m=b("d3"),h=b("fast-isnumeric"),l=[];F.exports=function(e,a){function g(p){p.duration(700).style("opacity",0).each("end",
function(n){n=l.indexOf(n);-1!==n&&l.splice(n,1);m.select(this).remove()})}if(-1===l.indexOf(e)){l.push(e);var k=1E3;h(a)?k=a:"long"===a&&(k=3E3);e=m.select("body").selectAll(".plotly-notifier").data([0]);e.enter().append("div").classed("plotly-notifier",!0);e.selectAll(".notifier-note").data(l).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(p){var n=m.select(this);n.append("button").classed("notifier-close",!0).html("\x26times;").on("click",function(){n.transition().call(g)});
var c=n.append("p");p=p.split(/<br\s*\/?>/g);for(var f=0;f<p.length;f++)f&&c.append("br"),c.append("span").text(p[f]);"stick"===a?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(k).call(g)})}}},{d3:169,"fast-isnumeric":241}],760:[function(b,F,C){var m=b("./setcursor");F.exports=function(h,l){var e=h.attr("data-savedcursor");if(l){if(!e){e=(h.attr("class")||"").split(" ");for(var a=0;a<e.length;a++){var g=e[a];0===g.indexOf("cursor-")&&
h.attr("data-savedcursor",g.substr(7)).classed(g,!1)}h.attr("data-savedcursor")||h.attr("data-savedcursor","!!")}m(h,l)}else e&&(h.attr("data-savedcursor",null),"!!"===e?m(h):m(h,e))}},{"./setcursor":769}],761:[function(b,F,C){var m=b("./matrix").dot,h=b("../constants/numerical").BADNUM,l=F.exports={};l.tester=function(e){function a(v,w){var y=v[0],D=v[1];return y===h||y<p||y>n||D===h||D<c||D>f||w&&q(v)?!1:!0}function g(v,w){var y=v[0];v=v[1];if(y===h||y<p||y>n||v===h||v<c||v>f)return!1;var D=k.length,
x=k[0][0],E=k[0][1],B=0,t;for(t=1;t<D;t++){var G=x;var I=E;x=k[t][0];E=k[t][1];var L=Math.min(G,x);if(!(y<L||y>Math.max(G,x)||v>Math.max(I,E)))if(v<Math.min(I,E))y!==L&&B++;else{G=x===G?v:I+(y-G)*(E-I)/(x-G);if(v===G)return 1===t&&w?!1:!0;v<=G&&y!==L&&B++}}return 1===B%2}var k=e.slice(),p=k[0][0],n=p,c=k[0][1],f=c;k.push(k[0]);for(e=1;e<k.length;e++)p=Math.min(p,k[e][0]),n=Math.max(n,k[e][0]),c=Math.min(c,k[e][1]),f=Math.max(f,k[e][1]);var d=!1;if(5===k.length)if(k[0][0]===k[1][0]){if(k[2][0]===k[3][0]&&
k[0][1]===k[3][1]&&k[1][1]===k[2][1]){d=!0;var q=function(v){return v[0]===k[0][0]}}}else k[0][1]===k[1][1]&&k[2][1]===k[3][1]&&k[0][0]===k[3][0]&&k[1][0]===k[2][0]&&(d=!0,q=function(v){return v[1]===k[0][1]});var r=!0,u=k[0];for(e=1;e<k.length;e++)if(u[0]!==k[e][0]||u[1]!==k[e][1]){r=!1;break}return{xmin:p,xmax:n,ymin:c,ymax:f,pts:k,contains:d?a:g,isRect:d,degenerate:r}};l.isSegmentBent=function(e,a,g,k){var p=e[a],n=[e[g][0]-p[0],e[g][1]-p[1]],c=m(n,n),f=Math.sqrt(c);f=[-n[1]/f,n[0]/f];for(a+=1;a<
g;a++){var d=[e[a][0]-p[0],e[a][1]-p[1]];var q=m(d,n);if(0>q||q>c||Math.abs(m(d,f))>k)return!0}return!1};l.filter=function(e,a){function g(f){e.push(f);f=k.length;var d=p;k.splice(n+1);for(var q=d+1;q<e.length;q++)if(q===e.length-1||l.isSegmentBent(e,d,q+1,a))k.push(e[q]),k.length<f-2&&(p=q,n=k.length-1),d=q}var k=[e[0]],p=0,n=0;if(1<e.length){var c=e.pop();g(c)}return{addPt:g,raw:e,filtered:k}}},{"../constants/numerical":724,"./matrix":755}],762:[function(b,F,C){(function(m){var h=b("./show_no_webgl_msg"),
l=b("regl");F.exports=function(e,a){var g=e._fullLayout,k=!0;g._glcanvas.each(function(p){if(!p.regl&&(!p.pick||g._has("parcoords"))){try{p.regl=l({canvas:this,attributes:{antialias:!p.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||m.devicePixelRatio,extensions:a||[]})}catch(n){k=!1}p.regl||(k=!1);k&&this.addEventListener("webglcontextlost",function(n){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:n,layer:p.key})},!1)}});k||h({container:g._glcontainer.node()});return k}}).call(this,
"undefined"!==typeof W?W:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":770,regl:512}],763:[function(b,F,C){F.exports=function(m,h){if(h instanceof RegExp){for(var l=h.toString(),e=0;e<m.length;e++)if(m[e]instanceof RegExp&&m[e].toString()===l)return m;m.push(h)}else!h&&0!==h||-1!==m.indexOf(h)||m.push(h);return m}},{}],764:[function(b,F,C){var m=b("../lib"),h=b("../plot_api/plot_config").dfltConfig,l={add:function(e,a,g,k,p){e.undoQueue=e.undoQueue||
{index:0,queue:[],sequence:!1};var n=e.undoQueue.index;if(e.autoplay)e.undoQueue.inSequence||(e.autoplay=!1);else{if(!e.undoQueue.sequence||e.undoQueue.beginSequence){var c={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};e.undoQueue.queue.splice(n,e.undoQueue.queue.length-n,c);e.undoQueue.index+=1}else c=e.undoQueue.queue[n-1];e.undoQueue.beginSequence=!1;c&&(c.undo.calls.unshift(a),c.undo.args.unshift(g),c.redo.calls.push(k),c.redo.args.push(p));e.undoQueue.queue.length>h.queueLength&&(e.undoQueue.queue.shift(),
e.undoQueue.index--)}},startSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1};e.undoQueue.sequence=!0;e.undoQueue.beginSequence=!0},stopSequence:function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1};e.undoQueue.sequence=!1;e.undoQueue.beginSequence=!1},undo:function(e){var a;if(e.framework&&e.framework.isPolar)e.framework.undo();else if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||0>=e.undoQueue.index)){e.undoQueue.index--;var g=e.undoQueue.queue[e.undoQueue.index];
e.undoQueue.inSequence=!0;for(a=0;a<g.undo.calls.length;a++)l.plotDo(e,g.undo.calls[a],g.undo.args[a]);e.undoQueue.inSequence=!1;e.autoplay=!1}},redo:function(e){var a;if(e.framework&&e.framework.isPolar)e.framework.redo();else if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){var g=e.undoQueue.queue[e.undoQueue.index];e.undoQueue.inSequence=!0;for(a=0;a<g.redo.calls.length;a++)l.plotDo(e,g.redo.calls[a],g.redo.args[a]);e.undoQueue.inSequence=!1;e.autoplay=
!1;e.undoQueue.index++}},plotDo:function(e,a,g){e.autoplay=!0;for(var k=[],p,n=0;n<g.length;n++)p=g[n],k[n]=p===e?p:"object"===typeof p?Array.isArray(p)?m.extendDeep([],p):m.extendDeepAll({},p):p;a.apply(null,k)}};F.exports=l},{"../lib":749,"../plot_api/plot_config":785}],765:[function(b,F,C){C.counter=function(m,h,l,e){h=(h||"")+(l?"":"$");e=!1===e?"":"^";return"xy"===m?new RegExp(e+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+h):new RegExp(e+m+"([2-9]|[1-9][0-9]+)?"+h)}},{}],766:[function(b,F,C){var m=
/^(.*)(\.[^\.\[\]]+|\[\d\])$/,h=/^[^\.\[\]]+$/;F.exports=function(l,e){for(;e;){var a=l.match(m);if(a)l=a[1];else if(l.match(h))l="";else throw Error("bad relativeAttr call:"+[l,e]);if("^"===e.charAt(0))e=e.slice(1);else break}return l&&"["!==e.charAt(0)?l+"."+e:l+e}},{}],767:[function(b,F,C){var m=b("./array").isArrayOrTypedArray,h=b("./is_plain_object");F.exports=function g(e,a){for(var k in a){var p=a[k],n=e[k];if(n!==p)if("_"===k.charAt(0)||"function"===typeof p)k in e||(e[k]=p);else if(m(p)&&
m(n)&&h(p[0])){if("customdata"!==k&&"ids"!==k)for(var c=Math.min(p.length,n.length),f=0;f<c;f++)n[f]!==p[f]&&h(p[f])&&h(n[f])&&g(n[f],p[f])}else h(p)&&h(n)&&(g(n,p),Object.keys(n).length||delete e[k])}}},{"./array":731,"./is_plain_object":750}],768:[function(b,F,C){function m(n,c){return n<c}function h(n,c){return n<=c}function l(n,c){return n>c}function e(n,c){return n>=c}var a=b("fast-isnumeric"),g=b("./loggers"),k=b("./identity"),p=b("../constants/numerical").BADNUM;C.findBin=function(n,c,f){if(a(c.start))return f?
Math.ceil((n-c.start)/c.size-1E-9)-1:Math.floor((n-c.start)/c.size+1E-9);var d=0,q=c.length,r=0,u=1<q?(c[q-1]-c[0])/(q-1):1;var v=0<=u?f?m:h:f?e:l;for(n+=1E-9*u*(f?-1:1)*(0<=u?1:-1);d<q&&100>r++;)f=Math.floor((d+q)/2),v(c[f],n)?d=f+1:q=f;90<r&&g.log("Long binary search...");return d-1};C.sorterAsc=function(n,c){return n-c};C.sorterDes=function(n,c){return c-n};C.distinctVals=function(n,c){var f=(c||{}).unitMinDiff;n=n.slice();n.sort(C.sorterAsc);for(c=n.length-1;-1<c&&n[c]===p;c--);var d=1;f||(d=
n[c]-n[0]||1);f=d/(c||1)/1E4;for(var q=[],r,u=0;u<=c;u++){var v=n[u],w=v-r;void 0===r?(q.push(v),r=v):w>f&&(d=Math.min(d,w),q.push(v),r=v)}return{vals:q,minDiff:d}};C.roundUp=function(n,c,f){for(var d=0,q=c.length-1,r=0,u=f?0:1,v=f?1:0,w=f?Math.ceil:Math.floor;d<q&&100>r++;)f=w((d+q)/2),c[f]<=n?d=f+u:q=f-v;return c[d]};C.sort=function(n,c){for(var f=0,d=0,q=1;q<n.length;q++){var r=c(n[q],n[q-1]);0>r?f=1:0<r&&(d=1);if(f&&d)return n.sort(c)}return d?n:n.reverse()};C.findIndexOfMin=function(n,c){c=c||
k;for(var f=Infinity,d,q=0;q<n.length;q++){var r=c(n[q]);r<f&&(f=r,d=q)}return d}},{"../constants/numerical":724,"./identity":747,"./loggers":753,"fast-isnumeric":241}],769:[function(b,F,C){F.exports=function(m,h){(m.attr("class")||"").split(" ").forEach(function(l){0===l.indexOf("cursor-")&&m.classed(l,!1)});h&&m.classed("cursor-"+h,!0)}},{}],770:[function(b,F,C){var m=b("../components/color"),h=function(){};F.exports=function(l){for(var e in l)"function"===typeof l[e]&&(l[e]=h);l.destroy=function(){l.container.parentNode.removeChild(l.container)};
e=document.createElement("div");e.className="no-webgl";e.style.cursor="pointer";e.style.fontSize="24px";e.style.color=m.defaults[0];e.style.position="absolute";e.style.left=e.style.top="0px";e.style.width=e.style.height="100%";e.style["background-color"]=m.lightLine;e.style["z-index"]=30;var a=document.createElement("p");a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";a.style.position="relative";a.style.top="50%";a.style.left="50%";a.style.height=
"30%";a.style.width="50%";a.style.margin="-15% 0 0 -25%";e.appendChild(a);l.container.appendChild(e);l.container.style.background="#FFFFFF";l.container.onclick=function(){window.open("https://get.webgl.org")};return!1}},{"../components/color":615}],771:[function(b,F,C){var m=b("fast-isnumeric"),h=b("./array").isArrayOrTypedArray;C.aggNums=function(l,e,a,g){var k;if(!g||g>a.length)g=a.length;m(e)||(e=!1);if(h(a[0])){var p=Array(g);for(k=0;k<g;k++)p[k]=C.aggNums(l,e,a[k]);a=p}for(k=0;k<g;k++)m(e)?m(a[k])&&
(e=l(+e,+a[k])):e=a[k];return e};C.len=function(l){return C.aggNums(function(e){return e+1},0,l)};C.mean=function(l,e){e||(e=C.len(l));return C.aggNums(function(a,g){return a+g},0,l)/e};C.midRange=function(l){if(void 0!==l&&0!==l.length)return(C.aggNums(Math.max,null,l)+C.aggNums(Math.min,null,l))/2};C.variance=function(l,e,a){e||(e=C.len(l));m(a)||(a=C.mean(l,e));return C.aggNums(function(g,k){return g+Math.pow(k-a,2)},0,l)/e};C.stdev=function(l,e,a){return Math.sqrt(C.variance(l,e,a))};C.median=
function(l){l=l.slice().sort();return C.interp(l,.5)};C.interp=function(l,e){if(!m(e))throw"n should be a finite number";e=e*l.length-.5;if(0>e)return l[0];if(e>l.length-1)return l[l.length-1];var a=e%1;return a*l[Math.ceil(e)]+(1-a)*l[Math.floor(e)]}},{"./array":731,"fast-isnumeric":241}],772:[function(b,F,C){var m=b("color-normalize");F.exports=function(h){return h?m(h):[0,0,0,1]}},{"color-normalize":125}],773:[function(b,F,C){function m(H,J,O){var Q,U,P,V;MathJax.Hub.Queue(function(){U=k.extendDeepAll({},
MathJax.Hub.config);P=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){Q=MathJax.Hub.config.menuSettings.renderer;if("SVG"!==Q)return MathJax.Hub.setRenderer("SVG")},function(){var Y="math-output-"+k.randstr({},64);V=g.select("body").append("div").attr({id:Y}).style({visibility:"hidden",position:"absolute"}).style({"font-size":J.fontSize+
"px"}).text(H.replace(f,"\\lt ").replace(d,"\\gt "));return MathJax.Hub.Typeset(V.node())},function(){var Y=g.select("body").select("#MathJax_SVG_glyphs");if(V.select(".MathJax_SVG").empty()||!V.select("svg").node())k.log("There was an error in the tex syntax.",H),O();else{var ba=V.select("svg").node().getBoundingClientRect();O(V.select(".MathJax_SVG"),Y,ba)}V.remove();if("SVG"!==Q)return MathJax.Hub.setRenderer(Q)},function(){void 0!==P&&(MathJax.Hub.processSectionDelay=P);return MathJax.Hub.Config(U)})}
function h(H,J){return H?(H=(H=H.match(J))&&(H[3]||H[4]))&&l(H):null}function l(H){return H.replace(N,function(J,O){if("#"===O.charAt(0))if(O="x"===O.charAt(1)?parseInt(O.substr(2),16):parseInt(O.substr(1),10),1114111<O)O=void 0;else{var Q=String.fromCodePoint;Q?O=Q(O):(Q=String.fromCharCode,O=65535>=O?Q(O):Q((O>>10)+55232,O%1024+56320))}else O=M[O];return O||J})}function e(H,J){function O(){ba++;var ta=document.createElementNS(p.svg,"tspan");g.select(ta).attr({class:"line",dy:ba*n+"em"});H.appendChild(ta);
ea=ta;var oa=Y;Y=[{node:ta}];if(1<oa.length)for(ta=1;ta<oa.length;ta++)Q(oa[ta])}function Q(ta){var oa=ta.type,ua={};if("a"===oa){var ka="a";var sa=ta.target,ya=ta.href,qa=ta.popup;ya&&(ua={"xlink:xlink:show":"_blank"===sa||"_"!==sa.charAt(0)?"new":"replace",target:sa,"xlink:xlink:href":ya},qa&&(ua.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+qa+'");return false;'))}else ka="tspan";ta.style&&(ua.style=ta.style);ka=document.createElementNS(p.svg,ka);"sup"===oa||"sub"===oa?(U(ea,v),
ea.appendChild(ka),sa=document.createElementNS(p.svg,"tspan"),U(sa,v),g.select(sa).attr("dy",u[oa]),ua.dy=r[oa],ea.appendChild(ka),ea.appendChild(sa)):ea.appendChild(ka);g.select(ka).attr(ua);ea=ta.node=ka;Y.push(ta)}function U(ta,oa){ta.appendChild(document.createTextNode(oa))}function P(ta){if(1===Y.length)k.log("Ignoring unexpected end tag \x3c/"+ta+"\x3e.",J);else{var oa=Y.pop();ta!==oa.type&&k.log("Start tag \x3c"+oa.type+"\x3e doesnt match end tag \x3c"+ta+"\x3e. Pretending it did match.",J);
ea=Y[Y.length-1].node}}J=J.replace(y," ");var V=!1,Y=[],ba=-1;if(E.test(J))O();else{var ea=H;Y=[{node:H}]}for(var ca=J.split(D),ia=0;ia<ca.length;ia++){var fa=ca[ia],ha=fa.match(x),na=ha&&ha[2].toLowerCase(),pa=q[na];if("br"===na)O();else if(void 0===pa)U(ea,l(fa));else if(ha[1])P(na);else{fa=ha[4];ha={type:na};var ra=h(fa,B);ra?(ra=ra.replace(L,"$1 fill:"),pa&&(ra+=";"+pa)):pa&&(ra=pa);ra&&(ha.style=ra);"a"===na&&(V=!0,na=h(fa,t))&&(pa=document.createElement("a"),pa.href=na,-1!==w.indexOf(pa.protocol)&&
(ha.href=encodeURI(decodeURI(na)),ha.target=h(fa,G)||"_blank",ha.popup=h(fa,I)));Q(ha)}}return V}function a(H,J,O){var Q=O.horizontalAlign;O=O.verticalAlign||"top";var U=H.node().getBoundingClientRect(),P=J.node().getBoundingClientRect(),V;var Y="bottom"===O?function(){return U.bottom-V.height}:"middle"===O?function(){return U.top+(U.height-V.height)/2}:function(){return U.top};var ba="right"===Q?function(){return U.right-V.width}:"center"===Q?function(){return U.left+(U.width-V.width)/2}:function(){return U.left};
return function(){V=this.node().getBoundingClientRect();this.style({top:Y()-P.top+"px",left:ba()-P.left+"px","z-index":1E3});return this}}var g=b("d3"),k=b("../lib"),p=b("../constants/xmlns_namespaces"),n=b("../constants/alignment").LINE_SPACING,c=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;C.convertToTspans=function(H,J,O){function Q(){V.empty()||(Y=H.attr("class")+"-math",V.select("svg."+Y).remove());H.text("").style("white-space","pre");e(H.node(),U)&&H.style("pointer-events","all");C.positionText(H);O&&O.call(H)}
var U=H.text(),P=!H.attr("data-notex")&&"undefined"!==typeof MathJax&&U.match(c),V=g.select(H.node().parentNode);if(!V.empty()){var Y=H.attr("class")?H.attr("class").split(" ")[0]:"text";Y+="-math";V.selectAll("svg."+Y).remove();V.selectAll("g."+Y+"-group").remove();H.style("display",null).attr({"data-unformatted":U,"data-math":"N"});P?(J&&J._promises||[]).push(new Promise(function(ba){H.style("display","none");var ea=parseInt(H.node().style.fontSize,10);m(P[2],{fontSize:ea},function(ca,ia,fa){V.selectAll("svg."+
Y).remove();V.selectAll("g."+Y+"-group").remove();if((ca=ca&&ca.select("svg"))&&ca.node()){var ha=V.append("g").classed(Y+"-group",!0).attr({"pointer-events":"none","data-unformatted":U,"data-math":"Y"});ha.node().appendChild(ca.node());ia&&ia.node()&&ca.node().insertBefore(ia.node().cloneNode(!0),ca.node().firstChild);ca.attr({"class":Y,height:fa.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});ia=H.node().style.fill||"black";fa=ca.select("g");fa.attr({fill:ia,
stroke:ia});ia=fa.node().getBoundingClientRect().width;fa=fa.node().getBoundingClientRect().height;var na=+H.attr("x")-ia*{start:0,middle:.5,end:1}[H.attr("text-anchor")||"start"],pa=-(ea||H.node().getBoundingClientRect().height)/4;"y"===Y[0]?(ha.attr({transform:"rotate("+[-90,+H.attr("x"),+H.attr("y")]+") translate("+[-ia/2,pa-fa/2]+")"}),ca.attr({x:+H.attr("x"),y:+H.attr("y")})):"l"===Y[0]?ca.attr({x:H.attr("x"),y:pa-fa/2}):"a"===Y[0]&&0!==Y.indexOf("atitle")?ca.attr({x:0,y:pa}):ca.attr({x:na,y:+H.attr("y")+
pa-fa/2});O&&O.call(H,ha);ba(ha)}else Q(),ba()})})):Q();return H}};var f=/(<|&lt;|&#60;)/g,d=/(>|&gt;|&#62;)/g,q={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},r={sub:"0.3em",sup:"-0.6em"},u={sub:"-0.21em",sup:"0.42em"},v="",w=["http:","https:","mailto:","",void 0,":"],y=C.NEWLINES=/(\r\n?|\n)/g,D=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,E=/<br(\s+.*)?>/i;C.BR_TAG_ALL=/<br(\s+.*)?>/gi;var B=
/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,t=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,G=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,I=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,L=/(^|;)\s*color:/;C.plainText=function(H,J){J=J||{};var O=void 0!==J.len&&-1!==J.len?J.len:Infinity;J=void 0!==J.allowedTags?J.allowedTags:["br"];var Q=H.split(D);H=[];for(var U="",P=0,V=0;V<Q.length;V++){var Y=Q[V],ba=Y.match(x);if(ba=ba&&ba[2].toLowerCase())-1!==J.indexOf(ba)&&(H.push(Y),U=ba);
else{ba=Y.length;if(P+ba<O)H.push(Y),P+=ba;else if(P<O){J=O-P;U&&("br"!==U||3>=J||3>=ba)&&H.pop();3<O?H.push(Y.substr(0,J-3)+"..."):H.push(Y.substr(0,J));break}U=""}}return H.join("")};var M={mu:"",amp:"\x26",lt:"\x3c",gt:"\x3e",nbsp:"",times:"",plusmn:"",deg:""},N=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;C.convertEntities=l;C.sanitizeHTML=function(H){H=H.replace(y," ");var J=document.createElement("p"),O=J,Q=[];H=H.split(D);for(var U=0;U<H.length;U++){var P=H[U],V=P.match(x),Y=V&&V[2].toLowerCase();
if(Y in q)if(V[1])Q.length&&(O=Q.pop());else{V=V[4];P=(P=h(V,B))?{style:P}:{};if("a"===Y){var ba=h(V,t);if(ba){var ea=document.createElement("a");ea.href=ba;-1!==w.indexOf(ea.protocol)&&(P.href=encodeURI(decodeURI(ba)),V=h(V,G))&&(P.target=V)}}Y=document.createElement(Y);O.appendChild(Y);g.select(Y).attr(P);O=Y;Q.push(Y)}else O.appendChild(document.createTextNode(l(P)))}return J.innerHTML};C.lineCount=function(H){return H.selectAll("tspan.line").size()||1};C.positionText=function(H,J,O){return H.each(function(){function Q(Y,
ba){void 0===ba?(ba=U.attr(Y),null===ba&&(U.attr(Y,0),ba=0)):U.attr(Y,ba);return ba}var U=g.select(this),P=Q("x",J),V=Q("y",O);"text"===this.nodeName&&U.selectAll("tspan.line").attr({x:P,y:V})})};C.makeEditable=function(H,J){function O(){U();H.style({opacity:0});var ea=ba.attr("class");(ea=ea?"."+ea.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&g.select(H.node().parentNode).select(ea).style({opacity:0})}function Q(ea){ea=ea.node();var ca=document.createRange();ca.selectNodeContents(ea);
var ia=window.getSelection();ia.removeAllRanges();ia.addRange(ca);ea.focus()}function U(){var ea=g.select(P).select(".svg-container"),ca=ea.append("div"),ia=H.node().style,fa=parseFloat(ia.fontSize||12),ha=J.text;void 0===ha&&(ha=H.attr("data-unformatted"));ca.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ia.fontFamily||"Arial","font-size":fa,color:J.fill||ia.fill||"black",opacity:1,"background-color":J.background||"transparent",outline:"#ffffff33 1px solid",margin:[-fa/
8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ha).call(a(H,ea,J)).on("blur",function(){P._editing=!1;H.text(this.textContent).style({opacity:1});var na=g.select(this).attr("class");(na=na?"."+na.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&g.select(H.node().parentNode).select(na).style({opacity:0});na=this.textContent;g.select(this).transition().duration(0).remove();g.select(document).on("mouseup",null);Y.edit.call(H,na)}).on("focus",
function(){var na=this;P._editing=!0;g.select(document).on("mouseup",function(){if(g.event.target===na)return!1;document.activeElement===ca.node()&&ca.node().blur()})}).on("keyup",function(){27===g.event.which?(P._editing=!1,H.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Y.cancel.call(H,this.textContent)):(Y.input.call(H,this.textContent),g.select(this).call(a(H,ea,J)))}).on("keydown",function(){13===g.event.which&&this.blur()}).call(Q)}
var P=J.gd,V=J.delegate,Y=g.dispatch("edit","input","cancel"),ba=V||H;H.style({"pointer-events":V?"none":"all"});if(1!==H.size())throw Error("boo");if(J.immediate)O();else ba.on("click",O);return g.rebind(H,Y,"on")}},{"../constants/alignment":717,"../constants/xmlns_namespaces":725,"../lib":749,d3:169}],774:[function(b,F,C){function m(l){l&&null!==l.timer&&(clearTimeout(l.timer),l.timer=null)}var h={};C.throttle=function(l,e,a){function g(){a();k.ts=Date.now();k.onDone&&(k.onDone(),k.onDone=null)}
var k=h[l],p=Date.now();if(!k){for(var n in h)h[n].ts<p-6E4&&delete h[n];k=h[l]={ts:0,timer:null}}m(k);p>k.ts+e?g():k.timer=setTimeout(function(){g();k.timer=null},e)};C.done=function(l){var e=h[l];return e&&e.timer?new Promise(function(a){var g=e.onDone;e.onDone=function(){g&&g();a();e.onDone=null}}):Promise.resolve()};C.clear=function(l){if(l)m(h[l]),delete h[l];else for(var e in h)C.clear(e)}},{}],775:[function(b,F,C){var m=b("fast-isnumeric");F.exports=function(h,l){if(0<h)return Math.log(h)/
Math.LN10;h=Math.log(Math.min(l[0],l[1]))/Math.LN10;m(h)||(h=Math.log(Math.max(l[0],l[1]))/Math.LN10-6);return h}},{"fast-isnumeric":241}],776:[function(b,F,C){F=F.exports={};var m=b("../plots/geo/constants").locationmodeToLayer,h=b("topojson-client").feature;F.getTopojsonName=function(l){return[l.scope.replace(/ /g,"-"),"_",l.resolution.toString(),"m"].join("")};F.getTopojsonPath=function(l,e){return l+e+".json"};F.getTopojsonFeatures=function(l,e){return h(e,e.objects[m[l.locationmode]]).features}},
{"../plots/geo/constants":827,"topojson-client":551}],777:[function(b,F,C){F.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],778:[function(b,F,C){F.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],779:[function(b,F,C){var m=b("../registry");F.exports=function(h){for(var l=m.layoutArrayContainers,e=m.layoutArrayRegexes,
a=h.split("[")[0],g,k,p=0;p<e.length;p++)if((k=h.match(e[p]))&&0===k.index){g=k[0];break}g||(g=l[l.indexOf(a)]);if(!g)return!1;h=h.substr(g.length);return h?(k=h.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:g,index:Number(k[1]),property:k[3]||""}:!1:{array:g,index:"",property:""}}},{"../registry":880}],780:[function(b,F,C){function m(p){for(var n={},c=0;c<p.length;c++)n[p[c]]=!1;return n}function h(p,n,c){p=e({},p);for(var f in p){var d=p[f];a(d)&&(p[f]=l(d,n,c,f))}"from-root"===c&&(p.editType=
n);return p}function l(p,n,c,f){if(p.valType){c=e({},p);c.editType=n;if(Array.isArray(p.items))for(c.items=Array(p.items.length),f=0;f<p.items.length;f++)c.items[f]=l(p.items[f],n,"from-root");return c}return h(p,n,"_"===f.charAt(0)?"nested":"from-root")}b=b("../lib");var e=b.extendFlat,a=b.isPlainObject;b={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};C={valType:"flaglist",extras:["none"],flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw colorbars".split(" ")};
var g=b.flags.slice().concat(["fullReplot"]),k=C.flags.slice().concat("layoutReplot");F.exports={traces:b,layout:C,traceFlags:function(){return m(g)},layoutFlags:function(){return m(k)},update:function(p,n){if((n=n.editType)&&"none"!==n){n=n.split("+");for(var c=0;c<n.length;c++)p[n[c]]=!0}},overrideAll:h}},{"../lib":749}],781:[function(b,F,C){function m(y,D){var x=y[D],E=D.charAt(0);x&&"paper"!==x&&(y[D]=q(x,E))}function h(y){function D(x,E){var B=y.title&&y.title[E];y[x]&&!B&&(y.title||(y.title=
{}),y.title[E]=y[x],delete y[x])}if(y){if("string"===typeof y.title||"number"===typeof y.title)y.title={text:y.title};D("titlefont","font");D("titleposition","position");D("titleside","side");D("titleoffset","offset")}}function l(y){if(!c.isPlainObject(y))return!1;var D=y.name;delete y.name;delete y.showlegend;return("string"===typeof D||"number"===typeof D)&&String(D)}function e(y){var D="middle",x="center";"string"===typeof y&&(-1!==y.indexOf("top")?D="top":-1!==y.indexOf("bottom")&&(D="bottom"),
-1!==y.indexOf("left")?x="left":-1!==y.indexOf("right")&&(x="right"));return D+" "+x}function a(y,D){return D in y&&"object"===typeof y[D]&&0===Object.keys(y[D]).length}function g(y){var D=y.search(v);if(0<D)return y.substr(0,D)}var k=b("fast-isnumeric"),p=b("gl-mat4/fromQuat"),n=b("../registry"),c=b("../lib"),f=b("../plots/plots");F=b("../plots/cartesian/axis_ids");var d=b("../components/color"),q=F.cleanId,r=F.getFromTrace,u=n.traceIs;C.clearPromiseQueue=function(y){Array.isArray(y._promises)&&
0<y._promises.length&&c.log("Clearing previous rejected promises from queue.");y._promises=[]};C.cleanLayout=function(y){var D;y||(y={});y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1);y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1);y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var x=(f.subplotsRegistry.cartesian||{}).attrRegex,E=(f.subplotsRegistry.polar||{}).attrRegex,B=(f.subplotsRegistry.ternary||{}).attrRegex,t=(f.subplotsRegistry.gl3d||{}).attrRegex,G=Object.keys(y);
for(D=0;D<G.length;D++){var I=G[D];if(x&&x.test(I)){I=y[I];I.anchor&&"free"!==I.anchor&&(I.anchor=q(I.anchor));I.overlaying&&(I.overlaying=q(I.overlaying));I.type||(I.isdate?I.type="date":I.islog?I.type="log":!1===I.isdate&&!1===I.islog&&(I.type="linear"));if("withzero"===I.autorange||"tozero"===I.autorange)I.autorange=!0,I.rangemode="tozero";delete I.islog;delete I.isdate;delete I.categories;a(I,"domain")&&delete I.domain;void 0!==I.autotick&&(void 0===I.tickmode&&(I.tickmode=I.autotick?"auto":"linear"),
delete I.autotick);h(I)}else if(E&&E.test(I))h(y[I].radialaxis);else if(B&&B.test(I))I=y[I],h(I.aaxis),h(I.baxis),h(I.caxis);else if(t&&t.test(I)){I=y[I];var L=I.cameraposition;if(Array.isArray(L)&&4===L[0].length){var M=L[1],N=L[2],H=p([],L[0]),J=[];for(L=0;3>L;++L)J[L]=M[L]+N*H[2+4*L];I.camera={eye:{x:J[0],y:J[1],z:J[2]},center:{x:M[0],y:M[1],z:M[2]},up:{x:0,y:0,z:1}};delete I.cameraposition}h(I.xaxis);h(I.yaxis);h(I.zaxis)}}x=Array.isArray(y.annotations)?y.annotations.length:0;for(D=0;D<x;D++)E=
y.annotations[D],c.isPlainObject(E)&&(E.ref&&("paper"===E.ref?(E.xref="paper",E.yref="paper"):"data"===E.ref&&(E.xref="x",E.yref="y"),delete E.ref),m(E,"xref"),m(E,"yref"));x=Array.isArray(y.shapes)?y.shapes.length:0;for(D=0;D<x;D++)E=y.shapes[D],c.isPlainObject(E)&&(m(E,"xref"),m(E,"yref"));if(D=y.legend)3<D.x?(D.x=1.02,D.xanchor="left"):-2>D.x&&(D.x=-.02,D.xanchor="right"),3<D.y?(D.y=1.02,D.yanchor="bottom"):-2>D.y&&(D.y=-.02,D.yanchor="top");h(y);"rotate"===y.dragmode&&(y.dragmode="orbit");d.clean(y);
y.template&&y.template.layout&&C.cleanLayout(y.template.layout);return y};C.cleanData=function(y){for(var D=0;D<y.length;D++){var x=y[D];"histogramy"===x.type&&"xbins"in x&&!("ybins"in x)&&(x.ybins=x.xbins,delete x.xbins);if(x.error_y&&"opacity"in x.error_y){var E=d.defaults;E=x.error_y.color||(u(x,"bar")?d.defaultLine:E[D%E.length]);x.error_y.color=d.addOpacity(d.rgb(E),d.opacity(E)*x.error_y.opacity);delete x.error_y.opacity}"bardir"in x&&("h"!==x.bardir||!u(x,"bar")&&"histogram"!==x.type.substr(0,
9)||(x.orientation="h",C.swapXYData(x)),delete x.bardir);"histogramy"===x.type&&C.swapXYData(x);if("histogramx"===x.type||"histogramy"===x.type)x.type="histogram";"scl"in x&&!("colorscale"in x)&&(x.colorscale=x.scl,delete x.scl);"reversescl"in x&&!("reversescale"in x)&&(x.reversescale=x.reversescl,delete x.reversescl);x.xaxis&&(x.xaxis=q(x.xaxis,"x"));x.yaxis&&(x.yaxis=q(x.yaxis,"y"));u(x,"gl3d")&&x.scene&&(x.scene=f.subplotsRegistry.gl3d.cleanId(x.scene));if(!u(x,"pie-like")&&!u(x,"bar-like"))if(Array.isArray(x.textposition))for(E=
0;E<x.textposition.length;E++)x.textposition[E]=e(x.textposition[E]);else x.textposition&&(x.textposition=e(x.textposition));(E=n.getModule(x))&&E.colorbar&&(E=(E=E.colorbar.container)?x[E]:x)&&E.colorscale&&("YIGnBu"===E.colorscale&&(E.colorscale="YlGnBu"),"YIOrRd"===E.colorscale&&(E.colorscale="YlOrRd"));if("surface"===x.type&&c.isPlainObject(x.contours)){var B=["x","y","z"];for(E=0;E<B.length;E++){var t=x.contours[B[E]];c.isPlainObject(t)&&(t.highlightColor&&(t.highlightcolor=t.highlightColor,
delete t.highlightColor),t.highlightWidth&&(t.highlightwidth=t.highlightWidth,delete t.highlightWidth))}}if("candlestick"===x.type||"ohlc"===x.type){B=!1!==(x.increasing||{}).showlegend;t=!1!==(x.decreasing||{}).showlegend;E=l(x.increasing);var G=l(x.decreasing);if(!1!==E&&!1!==G){if(!B||t)if(t&&!B)E=G;else if(E.trim()){if(G.trim()){t=Math.min(E.length,G.length);for(B=0;B<t&&E.charAt(B)===G.charAt(B);B++);E=E.substr(0,B).trim()}}else E=G;E&&(x.name=E)}else!E&&!G||x.name||(x.name=E||G)}if(Array.isArray(x.transforms))for(B=
x.transforms,E=0;E<B.length;E++)if(t=B[E],c.isPlainObject(t))switch(t.type){case "filter":t.filtersrc&&(t.target=t.filtersrc,delete t.filtersrc);t.calendar&&(t.valuecalendar||(t.valuecalendar=t.calendar),delete t.calendar);break;case "groupby":if(t.styles=t.styles||t.style,t.styles&&!Array.isArray(t.styles)){G=t.styles;var I=Object.keys(G);t.styles=[];for(var L=0;L<I.length;L++)t.styles.push({target:I[L],value:G[I[L]]})}}a(x,"line")&&delete x.line;"marker"in x&&(a(x.marker,"line")&&delete x.marker.line,
a(x,"marker")&&delete x.marker);d.clean(x);x.autobinx&&(delete x.autobinx,delete x.xbins);x.autobiny&&(delete x.autobiny,delete x.ybins);h(x);x.colorbar&&h(x.colorbar);x.marker&&x.marker.colorbar&&h(x.marker.colorbar);x.line&&x.line.colorbar&&h(x.line.colorbar);x.aaxis&&h(x.aaxis);x.baxis&&h(x.baxis)}};C.swapXYData=function(y){c.swapAttrs(y,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0);if(y.error_x&&
y.error_y){var D=y.error_y;D="copy_ystyle"in D?D.copy_ystyle:!(D.color||D.thickness||D.width);c.swapAttrs(y,["error_?.copy_ystyle"]);D&&c.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof y.hoverinfo){var x=y.hoverinfo.split("+");for(D=0;D<x.length;D++)"x"===x[D]?x[D]="y":"y"===x[D]&&(x[D]="x");y.hoverinfo=x.join("+")}};C.coerceTraceIndices=function(y,D){if(k(D))return[D];if(!Array.isArray(D)||!D.length)return y.data.map(function(B,t){return t});if(Array.isArray(D)){for(var x=
[],E=0;E<D.length;E++)c.isIndex(D[E],y.data.length)?x.push(D[E]):c.warn("trace index (",D[E],") is not a number or is out of bounds");return x}return D};C.manageArrayContainers=function(y,D,x){var E=y.obj,B=y.parts,t=B.length,G=B[t-1],I=k(G);I&&null===D?(y=B.slice(0,t-1).join("."),c.nestedProperty(E,y).get().splice(G,1)):(I&&void 0===y.get()&&void 0===y.get()&&(x[y.astr]=null),y.set(D))};var v=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;C.hasParent=function(y,D){for(D=g(D);D;){if(D in y)return!0;D=g(D)}return!1};
var w=["x","y","z"];C.clearAxisTypes=function(y,D,x){for(var E=0;E<D.length;E++)for(var B=y._fullData[E],t=0;3>t;t++){var G=r(y,B,w[t]);if(G&&"log"!==G.type){var I=G._name;G=G._id.substr(1);if("scene"===G.substr(0,5)){if(void 0!==x[G])continue;I=G+"."+I}G=I+".type";void 0===x[I]&&void 0===x[G]&&c.nestedProperty(y.layout,G).set(null)}}}},{"../components/color":615,"../lib":749,"../plots/cartesian/axis_ids":800,"../plots/plots":860,"../registry":880,"fast-isnumeric":241,"gl-mat4/fromQuat":275}],782:[function(b,
F,C){F=b("./plot_api");C.plot=F.plot;C.newPlot=F.newPlot;C.restyle=F.restyle;C.relayout=F.relayout;C.redraw=F.redraw;C.update=F.update;C._guiRestyle=F._guiRestyle;C._guiRelayout=F._guiRelayout;C._guiUpdate=F._guiUpdate;C._storeDirectGUIEdit=F._storeDirectGUIEdit;C.react=F.react;C.extendTraces=F.extendTraces;C.prependTraces=F.prependTraces;C.addTraces=F.addTraces;C.deleteTraces=F.deleteTraces;C.moveTraces=F.moveTraces;C.purge=F.purge;C.addFrames=F.addFrames;C.deleteFrames=F.deleteFrames;C.animate=
F.animate;C.setPlotConfig=F.setPlotConfig;C.toImage=b("./to_image");C.validate=b("./validate");C.downloadImage=b("../snapshot/download");b=b("./template_api");C.makeTemplate=b.makeTemplate;C.validateTemplate=b.validateTemplate},{"../snapshot/download":882,"./plot_api":784,"./template_api":789,"./to_image":790,"./validate":791}],783:[function(b,F,C){var m=b("../lib/is_plain_object"),h=b("../lib/noop"),l=b("../lib/loggers"),e=b("../lib/search").sorterAsc,a=b("../registry");C.containerArrayMatch=b("./container_array_match");
var g=C.isAddVal=function(p){return"add"===p||m(p)},k=C.isRemoveVal=function(p){return null===p||"remove"===p};C.applyContainerArrayChanges=function(p,n,c,f,d){var q=n.astr,r=a.getComponentMethod(q,"supplyLayoutDefaults"),u=a.getComponentMethod(q,"draw"),v=a.getComponentMethod(q,"drawOne");f=f.replot||f.recalc||r===h||u===h;var w=p.layout,y=p._fullLayout;if(c[""]){1<Object.keys(c).length&&l.warn("Full array edits are incompatible with other edits",q);v=c[""][""];if(k(v))n.set(null);else if(Array.isArray(v))n.set(v);
else return l.warn("Unrecognized full array edit value",q,v),!0;if(f)return!1;r(w,y);u(p);return!0}var D=Object.keys(c).map(Number).sort(e),x=n.get(),E=x||[],B=d(y,q).get(),t=[],G=-1,I=E.length,L;for(L=0;L<D.length;L++){var M=D[L];var N=c[M];var H=Object.keys(N);var J=N[""];var O=g(J);if(0>M||M>E.length-(O?0:1))l.warn("index out of range",q,M);else if(void 0!==J)1<H.length&&l.warn("Insertion \x26 removal are incompatible with edits to the same index.",q,M),k(J)?t.push(M):O?("add"===J&&(J={}),E.splice(M,
0,J),B&&B.splice(M,0,{})):l.warn("Unrecognized full object edit value",q,M,J),-1===G&&(G=M);else for(J=0;J<H.length;J++)O=q+"["+M+"].",d(E[M],H[J],O).set(N[H[J]])}for(L=t.length-1;0<=L;L--)E.splice(t[L],1),B&&B.splice(t[L],1);E.length?x||n.set(E):n.set(null);if(f)return!1;r(w,y);if(v!==h){if(-1===G)n=D;else{I=Math.max(E.length,I);n=[];for(L=0;L<D.length;L++){M=D[L];if(M>=G)break;n.push(M)}for(L=G;L<I;L++)n.push(L)}for(L=0;L<n.length;L++)v(p,n[L])}else u(p);return!0}},{"../lib/is_plain_object":750,
"../lib/loggers":753,"../lib/noop":758,"../lib/search":768,"../registry":880,"./container_array_match":779}],784:[function(b,F,C){function m(Pa){var Ta=Pa._fullLayout;Ta._redrawFromAutoMarginCount?Ta._redrawFromAutoMarginCount--:Pa.emit("plotly_afterplot")}function h(Pa,Ta){try{Pa._fullLayout._paper.style("background",Ta)}catch(Ya){ha.error(Ya)}}function l(Pa,Ta){Ta=qa.combine(Ta,"white");h(Pa,Ta)}function e(Pa,Ta){if(!Pa._context){Pa._context=ha.extendDeep({},Ra);var Ya=ca.select("base");Pa._context._baseUrl=
Ya.size()&&Ya.attr("href")?window.location.href.split("#")[0]:""}var nb=Pa._context;if(Ta){var Da=Object.keys(Ta);for(Ya=0;Ya<Da.length;Ya++){var Ha=Da[Ya];"editable"!==Ha&&"edits"!==Ha&&Ha in nb&&(nb[Ha]="setBackground"===Ha&&"opaque"===Ta[Ha]?l:Ta[Ha])}Ta.plot3dPixelRatio&&!nb.plotGlPixelRatio&&(nb.plotGlPixelRatio=nb.plot3dPixelRatio);Ha=Ta.editable;if(void 0!==Ha)for(nb.editable=Ha,Da=Object.keys(nb.edits),Ya=0;Ya<Da.length;Ya++)nb.edits[Da[Ya]]=Ha;if(Ta.edits)for(Da=Object.keys(Ta.edits),Ya=
0;Ya<Da.length;Ya++)Ha=Da[Ya],Ha in nb.edits&&(nb.edits[Ha]=Ta.edits[Ha]);nb._exportedPlot=Ta._exportedPlot}nb.staticPlot&&(nb.editable=!1,nb.edits={},nb.autosizable=!1,nb.scrollZoom=!1,nb.doubleClick=!1,nb.showTips=!1,nb.showLink=!1,nb.displayModeBar=!1);"hover"!==nb.displayModeBar||fa||(nb.displayModeBar=!0);if("transparent"===nb.setBackground||"function"!==typeof nb.setBackground)nb.setBackground=h;nb._hasZeroHeight=nb._hasZeroHeight||0===Pa.clientHeight;nb._hasZeroWidth=nb._hasZeroWidth||0===
Pa.clientWidth;Ya=nb.scrollZoom;Pa=nb._scrollZoom={};if(!0===Ya)Pa.cartesian=1,Pa.gl3d=1,Pa.geo=1,Pa.mapbox=1;else if("string"===typeof Ya)for(Ta=Ya.split("+"),Ya=0;Ya<Ta.length;Ya++)Pa[Ta[Ya]]=1;else!1!==Ya&&(Pa.gl3d=1,Pa.geo=1,Pa.mapbox=1)}function a(Pa,Ta,Ya){var nb=ca.select(Pa).selectAll(".plot-container").data([0]);nb.enter().insert("div",":first-child").classed("plot-container plotly",!0);nb=nb.selectAll(".svg-container").data([0]);nb.enter().append("div").classed("svg-container",!0).style("position",
"relative");nb.html("");Ta&&(Pa.data=Ta);Ya&&(Pa.layout=Ya);ka.manager.fillLayout(Pa);nb.style({width:Pa._fullLayout.width+"px",height:Pa._fullLayout.height+"px"});Pa.framework=ka.manager.framework(Pa);Pa.framework({data:Pa.data,layout:Pa.layout},nb.node());Pa.framework.setUndoPoint();nb=Pa.framework.svg();Ta=1;Ya=Pa._fullLayout.title?Pa._fullLayout.title.text:"";""!==Ya&&Ya||(Ta=0);var Da=function(){this.call(Ja.convertToTspans,Pa)};nb=nb.select(".title-group text").call(Da);if(Pa._context.edits.titleText){var Ha=
ha._(Pa,"Click to enter Plot title");Ya&&Ya!==Ha||(Ta=.2,nb.attr({"data-unformatted":Ha}).text(Ha).style({opacity:Ta}).on("mouseover.opacity",function(){ca.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){ca.select(this).transition().duration(1E3).style("opacity",0)}));var ab=function(){this.call(Ja.makeEditable,{gd:Pa}).on("edit",function(ib){Pa.framework({layout:{title:{text:ib}}});this.text(ib).call(Da);this.call(ab)}).on("cancel",function(){var ib=
this.attr("data-unformatted");this.text(ib).call(Da)})};nb.call(ab)}Pa._context.setBackground(Pa,Pa._fullLayout.paper_bgcolor);ua.addLinks(Pa);return Promise.resolve()}function g(Pa,Ta){Ta+=1;var Ya=[],nb;for(nb=0;nb<Pa.length;nb++){var Da=Pa[nb];0>Da?Ya.push(Ta+Da):Ya.push(Da)}return Ya}function k(Pa,Ta,Ya){var nb;for(nb=0;nb<Ta.length;nb++){var Da=Ta[nb];if(Da!==parseInt(Da,10))throw Error("all values in "+Ya+" must be integers");if(Da>=Pa.data.length||Da<-Pa.data.length)throw Error(Ya+" must be valid indices for gd.data.");
if(-1<Ta.indexOf(Da,nb+1)||0<=Da&&-1<Ta.indexOf(-Pa.data.length+Da)||0>Da&&-1<Ta.indexOf(Pa.data.length+Da))throw Error("each index in "+Ya+" must be unique.");}}function p(Pa,Ta,Ya){if(!Array.isArray(Pa.data))throw Error("gd.data must be an array.");if("undefined"===typeof Ta)throw Error("currentIndices is a required argument.");Array.isArray(Ta)||(Ta=[Ta]);k(Pa,Ta,"currentIndices");"undefined"===typeof Ya||Array.isArray(Ya)||(Ya=[Ya]);"undefined"!==typeof Ya&&k(Pa,Ya,"newIndices");if("undefined"!==
typeof Ya&&Ta.length!==Ya.length)throw Error("current and new indices must be of equal length.");}function n(Pa,Ta,Ya){if(!Array.isArray(Pa.data))throw Error("gd.data must be an array.");if("undefined"===typeof Ta)throw Error("traces must be defined.");Array.isArray(Ta)||(Ta=[Ta]);for(Pa=0;Pa<Ta.length;Pa++){var nb=Ta[Pa];if("object"!==typeof nb||Array.isArray(nb)||null===nb)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof Ya||Array.isArray(Ya)||(Ya=[Ya]);
if("undefined"!==typeof Ya&&Ya.length!==Ta.length)throw Error("if indices is specified, traces.length must equal indices.length");}function c(Pa,Ta,Ya,nb,Da){var Ha=ha.isPlainObject(nb);if(!Array.isArray(Pa.data))throw Error("gd.data must be an array");if(!ha.isPlainObject(Ta))throw Error("update must be a key:value object");if("undefined"===typeof Ya)throw Error("indices must be an integer or array of integers");k(Pa,Ya,"indices");for(var ab in Ta){if(!Array.isArray(Ta[ab])||Ta[ab].length!==Ya.length)throw Error("attribute "+
ab+" must be an array of length equal to indices array length");if(Ha&&!(ab in nb&&Array.isArray(nb[ab])&&nb[ab].length===Ta[ab].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");}Ha=Ya;ab=ha.isPlainObject(nb);Ya=[];Array.isArray(Ha)||(Ha=[Ha]);Ha=g(Ha,Pa.data.length-1);for(var ib in Ta)for(var ob=0;ob<Ha.length;ob++){var db=Pa.data[Ha[ob]];var gb=na(db,ib);db=gb.get();var rb=Ta[ib][ob];if(!ha.isArrayOrTypedArray(rb))throw Error("attribute: "+
ib+" index: "+ob+" must be an array");if(!ha.isArrayOrTypedArray(db))throw Error("cannot extend missing or non-array attribute: "+ib);if(db.constructor!==rb.constructor)throw Error("cannot extend array with an array of a different type: "+ib);var Bb=ab?nb[ib][ob]:nb;ia(Bb)||(Bb=-1);Ya.push({prop:gb,target:db,insert:rb,maxp:Math.floor(Bb)})}Pa={};Ta={};for(nb=0;nb<Ya.length;nb++)ib=Ya[nb].prop,Ha=Da(Ya[nb].target,Ya[nb].insert,Ya[nb].maxp),ib.set(Ha[0]),Array.isArray(Pa[ib.astr])||(Pa[ib.astr]=[]),
Pa[ib.astr].push(Ha[1]),Array.isArray(Ta[ib.astr])||(Ta[ib.astr]=[]),Ta[ib.astr].push(Ya[nb].target.length);return{update:Pa,maxPoints:Ta}}function f(Pa,Ta){var Ya=new Pa.constructor(Pa.length+Ta.length);Ya.set(Pa);Ya.set(Ta,Pa.length);return Ya}function d(Pa,Ta,Ya,nb){Pa=ha.getGraphDiv(Pa);var Da=c(Pa,Ta,Ya,nb,function(ab,ib,ob){if(ha.isTypedArray(ab))if(0>ob){var db=new ab.constructor(0);ab=f(ab,ib);if(0>ob)var gb=ab;else gb=db,db=ab}else if(gb=new ab.constructor(ob),db=new ab.constructor(ab.length+
ib.length-ob),ob===ib.length)gb.set(ib),db.set(ab);else if(ob<ib.length)ob=ib.length-ob,gb.set(ib.subarray(ob)),db.set(ab),db.set(ib.subarray(0,ob),ab.length);else{ob-=ib.length;var rb=ab.length-ob;gb.set(ab.subarray(rb));gb.set(ib,ob);db.set(ab.subarray(0,rb))}else gb=ab.concat(ib),db=0<=ob&&ob<gb.length?gb.splice(0,gb.length-ob):[];return[gb,db]}),Ha=C.redraw(Pa);ra.add(Pa,C.prependTraces,[Pa,Da.update,Ya,Da.maxPoints],d,arguments);return Ha}function q(Pa,Ta,Ya,nb){Pa=ha.getGraphDiv(Pa);var Da=
c(Pa,Ta,Ya,nb,function(ab,ib,ob){if(ha.isTypedArray(ab))if(0>=ob){var db=new ab.constructor(0);ab=f(ib,ab);if(0>ob)var gb=ab;else gb=db,db=ab}else gb=new ab.constructor(ob),db=new ab.constructor(ab.length+ib.length-ob),ob===ib.length?(gb.set(ib),db.set(ab)):ob<ib.length?(ob=ib.length-ob,gb.set(ib.subarray(0,ob)),db.set(ib.subarray(ob)),db.set(ab,ob)):(ob-=ib.length,gb.set(ib),gb.set(ab.subarray(0,ob),ib.length),db.set(ab.subarray(ob)));else gb=ib.concat(ab),db=0<=ob&&ob<gb.length?gb.splice(ob,gb.length):
[];return[gb,db]}),Ha=C.redraw(Pa);ra.add(Pa,C.extendTraces,[Pa,Da.update,Ya,Da.maxPoints],q,arguments);return Ha}function r(Pa,Ta,Ya){Pa=ha.getGraphDiv(Pa);var nb=[],Da=C.deleteTraces,Ha=[Pa,nb],ab=[Pa,Ta],ib;n(Pa,Ta,Ya);Array.isArray(Ta)||(Ta=[Ta]);Ta=Ta.map(function(ob){return ha.extendFlat({},ob)});Ea.cleanData(Ta);for(ib=0;ib<Ta.length;ib++)Pa.data.push(Ta[ib]);for(ib=0;ib<Ta.length;ib++)nb.push(-Ta.length+ib);if("undefined"===typeof Ya)return Ta=C.redraw(Pa),ra.add(Pa,Da,Ha,r,ab),Ta;Array.isArray(Ya)||
(Ya=[Ya]);try{p(Pa,nb,Ya)}catch(ob){throw Pa.data.splice(Pa.data.length-Ta.length,Ta.length),ob;}ra.startSequence(Pa);ra.add(Pa,Da,Ha,r,ab);Ta=C.moveTraces(Pa,nb,Ya);ra.stopSequence(Pa);return Ta}function u(Pa,Ta){Pa=ha.getGraphDiv(Pa);var Ya=[],nb=C.addTraces,Da=[Pa,Ya,Ta],Ha=[Pa,Ta],ab;if("undefined"===typeof Ta)throw Error("indices must be an integer or array of integers.");Array.isArray(Ta)||(Ta=[Ta]);k(Pa,Ta,"indices");Ta=g(Ta,Pa.data.length-1);Ta.sort(ha.sorterDes);for(ab=0;ab<Ta.length;ab+=
1){var ib=Pa.data.splice(Ta[ab],1)[0];Ya.push(ib)}Ta=C.redraw(Pa);ra.add(Pa,nb,Da,u,Ha);return Ta}function v(Pa,Ta,Ya){Pa=ha.getGraphDiv(Pa);var nb=[],Da=[],Ha=[Pa,Ya,Ta],ab=[Pa,Ta,Ya],ib;p(Pa,Ta,Ya);Ta=Array.isArray(Ta)?Ta:[Ta];if("undefined"===typeof Ya)for(Ya=[],ib=0;ib<Ta.length;ib++)Ya.push(-Ta.length+ib);Ya=Array.isArray(Ya)?Ya:[Ya];Ta=g(Ta,Pa.data.length-1);Ya=g(Ya,Pa.data.length-1);for(ib=0;ib<Pa.data.length;ib++)-1===Ta.indexOf(ib)&&nb.push(Pa.data[ib]);for(ib=0;ib<Ta.length;ib++)Da.push({newIndex:Ya[ib],
trace:Pa.data[Ta[ib]]});Da.sort(function(ob,db){return ob.newIndex-db.newIndex});for(ib=0;ib<Da.length;ib+=1)nb.splice(Da[ib].newIndex,0,Da[ib].trace);Pa.data=nb;Ta=C.redraw(Pa);ra.add(Pa,v,Ha,v,ab);return Ta}function w(Pa,Ta,Ya,nb){Pa=ha.getGraphDiv(Pa);Ea.clearPromiseQueue(Pa);var Da={};if("string"===typeof Ta)Da[Ta]=Ya;else if(ha.isPlainObject(Ta))Da=ha.extendFlat({},Ta),void 0===nb&&(nb=Ya);else return ha.warn("Restyle fail.",Ta,Ya,nb),Promise.reject();Object.keys(Da).length&&(Pa.changed=!0);
Ta=Ea.coerceTraceIndices(Pa,nb);var Ha=E(Pa,Da,Ta);Da=Ha.flags;Da.calc&&(Pa.calcdata=void 0);Da.clearAxisTypes&&Ea.clearAxisTypes(Pa,Ta,{});Ta=[];Da.fullReplot?Ta.push(C.plot):(Ta.push(ua.previousPromises),ua.supplyDefaults(Pa),Da.markerSize&&(ua.doCalcdata(Pa),I(Ta)),Da.style&&Ta.push(Ia.doTraceStyle),Da.colorbars&&Ta.push(Ia.doColorBars),Ta.push(m));Ta.push(ua.rehover,ua.redrag);ra.add(Pa,w,[Pa,Ha.undoit,Ha.traces],w,[Pa,Ha.redoit,Ha.traces]);(Da=ha.syncOrAsync(Ta,Pa))&&Da.then||(Da=Promise.resolve());
return Da.then(function(){Pa.emit("plotly_restyle",Ha.eventData);return Pa})}function y(Pa){return void 0===Pa?null:Pa}function D(Pa,Ta){return Ta?function(Ya,nb,Da){var Ha=na(Ya,nb),ab=Ha.set;Ha.set=function(ib){x((Da||"")+nb,Ha.get(),ib,Pa);ab(ib)};return Ha}:na}function x(Pa,Ta,Ya,nb){if(Array.isArray(Ta)||Array.isArray(Ya)){var Da=Array.isArray(Ta)?Ta:[];Ya=Array.isArray(Ya)?Ya:[];Ta=Math.max(Da.length,Ya.length);for(var Ha=0;Ha<Ta;Ha++)x(Pa+"["+Ha+"]",Da[Ha],Ya[Ha],nb)}else if(ha.isPlainObject(Ta)||
ha.isPlainObject(Ya))for(Da in Ta=ha.isPlainObject(Ta)?Ta:{},Ya=ha.isPlainObject(Ya)?Ya:{},Ha=ha.extendFlat({},Ta,Ya),Ha)x(Pa+"."+Da,Ta[Da],Ya[Da],nb);else void 0===nb[Pa]&&(nb[Pa]=y(Ta))}function E(Pa,Ta,Ya){function nb(){return Ya.map(function(){})}function Da(Gb){Gb=sa.id2name(Gb);-1===yb.indexOf(Gb)&&yb.push(Gb)}function Ha(Gb){return"LAYOUT"+Gb+".autorange"}function ab(Gb){return"LAYOUT"+Gb+".range"}function ib(Gb){for(var Eb=Gb;Eb<Bb.length;Eb++)if(Bb[Eb]._input===Qb[Gb])return Bb[Eb]}function ob(Gb,
Eb,Vb){if(Array.isArray(Gb))Gb.forEach(function(ic){ob(ic,Eb,Vb)});else if(!(Gb in Ta||Ea.hasParent(Ta,Gb))){if("LAYOUT"===Gb.substr(0,6))var Zb=tc(Pa.layout,Gb.replace("LAYOUT",""));else{Zb=Ya[Vb];var Dc=rb._tracePreGUI[ib(Zb)._fullInput.uid];Zb=D(Dc,gc)(Qb[Zb],Gb)}Gb in Xc||(Xc[Gb]=nb());void 0===Xc[Gb][Vb]&&(Xc[Gb][Vb]=y(Zb.get()));void 0!==Eb&&Zb.set(Eb)}}function db(Gb){return function(Eb){return Bb[Eb][Gb]}}function gb(Gb){return function(Eb,Vb){return!1===Eb?Bb[Ya[Vb]][Gb]:null}}var rb=Pa._fullLayout,
Bb=Pa._fullData,Qb=Pa.data,gc=rb._guiEditing,tc=D(rb._preGUI,gc),Ac=ha.extendDeepAll({},Ta),Uc;B(Ta);var Nc=Qa.traceFlags(),gd={},Xc={};for(Xb in Ta){if(Ea.hasParent(Ta,Xb))throw Error("cannot set "+Xb+" and a parent attribute simultaneously");var ed=Ta[Xb],tb;if("autobinx"===Xb||"autobiny"===Xb){var Xb=Xb.charAt(Xb.length-1)+"bins";ed=Array.isArray(ed)?ed.map(gb(Xb)):!1===ed?Ya.map(db(Xb)):null}gd[Xb]=ed;if("LAYOUT"===Xb.substr(0,6)){var uc=tc(Pa.layout,Xb.replace("LAYOUT",""));Xc[Xb]=[y(uc.get())];
uc.set(Array.isArray(ed)?ed[0]:ed);Nc.calc=!0}else{Xc[Xb]=nb();for(Uc=0;Uc<Ya.length;Uc++){var Mc=Qb[Ya[Uc]];var Rc=ib(Ya[Uc]);uc=D(rb._tracePreGUI[Rc._fullInput.uid],gc)(Mc,Xb);var fd=uc.get();var sb=Array.isArray(ed)?ed[Uc%ed.length]:ed;if(void 0!==sb){var xb=uc.parts[uc.parts.length-1],kc=(tb=Xb.substr(0,Xb.length-xb.length-1))?tb+".":"",nc=tb?na(Rc,tb).get():Rc;if((tb=oa.getTraceValObject(Rc,uc.parts))&&tb.impliedEdits&&null!==sb)for(var Kc in tb.impliedEdits)ob(ha.relativeAttr(Xb,Kc),tb.impliedEdits[Kc],
Uc);else if("thicknessmode"!==xb&&"lenmode"!==xb||fd===sb||"fraction"!==sb&&"pixels"!==sb||!nc)"type"!==Xb||"pie"===sb===("pie"===fd)&&"funnelarea"===sb===("funnelarea"===fd)||(kc="x",nc="y","bar"!==sb&&"bar"!==fd||"h"!==Mc.orientation||(kc="y",nc="x"),ha.swapAttrs(Mc,["?","?src"],"labels",kc),ha.swapAttrs(Mc,["d?","?0"],"label",kc),ha.swapAttrs(Mc,["?","?src"],"values",nc),"pie"===fd||"funnelarea"===fd?(na(Mc,"marker.color").set(na(Mc,"marker.colors").get()),rb._pielayer.selectAll("g.trace").remove()):
ta.traceIs(Mc,"cartesian")&&na(Mc,"marker.colors").set(na(Mc,"marker.color").get()));else{var ac=rb._size,Tb=nc.orient;Tb="top"===Tb||"bottom"===Tb;"thicknessmode"===xb?(xb=Tb?ac.h:ac.w,ob(kc+"thickness",nc.thickness*("fraction"===sb?1/xb:xb),Uc)):(xb=Tb?ac.w:ac.h,ob(kc+"len",nc.len*("fraction"===sb?1/xb:xb),Uc))}Xc[Xb][Uc]=y(fd);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Xb)){if("orientation"===Xb){if(uc.set(sb),fd=Mc.x&&!Mc.y?"h":"v",(uc.get()||fd)===Rc.orientation)continue}else"orientationaxes"===
Xb&&(Mc.orientation={v:"h",h:"v"}[Rc.orientation]);Ea.swapXYData(Mc);Nc.calc=Nc.clearAxisTypes=!0}else-1!==ua.dataArrayContainers.indexOf(uc.parts[0])?(Ea.manageArrayContainers(uc,sb,Xc),Nc.calc=!0):(tb?tb.arrayOk&&!ta.traceIs(Rc,"regl")&&(ha.isArrayOrTypedArray(sb)||ha.isArrayOrTypedArray(fd))?Nc.calc=!0:Qa.update(Nc,tb):Nc.calc=!0,uc.set(sb))}}-1!==["swapxyaxes","orientationaxes"].indexOf(Xb)&&sa.swap(Pa,Ya);"orientationaxes"===Xb&&(Uc=na(Pa.layout,"hovermode"),ed=Uc.get(),"x"===ed?Uc.set("y"):
"y"===ed?Uc.set("x"):"x unified"===ed?Uc.set("y unified"):"y unified"===ed&&Uc.set("x unified"));if(-1!==["orientation","type"].indexOf(Xb)){var yb=[];for(Uc=0;Uc<Ya.length;Uc++)ed=Qb[Ya[Uc]],ta.traceIs(ed,"cartesian")&&(Da(ed.xaxis||"x"),Da(ed.yaxis||"y"));ob(yb.map(Ha),!0,0);ob(yb.map(ab),[0,1],0)}}}if(Nc.calc||Nc.plot)Nc.fullReplot=!0;return{flags:Nc,undoit:Xc,redoit:gd,traces:Ya,eventData:ha.extendDeepNoArrays([],[Ac,Ya])}}function B(Pa){function Ta(ob,db){Pa[db]=Pa[ob];delete Pa[ob]}var Ya=ha.counterRegex("axis",
".title",!1,!1),nb=/colorbar\.title$/,Da=Object.keys(Pa),Ha;for(Ha=0;Ha<Da.length;Ha++){var ab=Da[Ha];var ib=Pa[ab];"title"!==ab&&!Ya.test(ab)&&!nb.test(ab)||"string"!==typeof ib&&"number"!==typeof ib?-1<ab.indexOf("titlefont")?Ta(ab,ab.replace("titlefont","title.font")):-1<ab.indexOf("titleposition")?Ta(ab,ab.replace("titleposition","title.position")):-1<ab.indexOf("titleside")?Ta(ab,ab.replace("titleside","title.side")):-1<ab.indexOf("titleoffset")&&Ta(ab,ab.replace("titleoffset","title.offset")):
Ta(ab,ab.replace("title","title.text"))}}function t(Pa,Ta,Ya){Pa=ha.getGraphDiv(Pa);Ea.clearPromiseQueue(Pa);if(Pa.framework&&Pa.framework.isPolar)return Promise.resolve(Pa);var nb={};if("string"===typeof Ta)nb[Ta]=Ya;else if(ha.isPlainObject(Ta))nb=ha.extendFlat({},Ta);else return ha.warn("Relayout fail.",Ta,Ya),Promise.reject();Object.keys(nb).length&&(Pa.changed=!0);var Da=L(Pa,nb);Ta=Da.flags;Ta.calc&&(Pa.calcdata=void 0);Ya=[ua.previousPromises];Ta.layoutReplot?Ya.push(Ia.layoutReplot):Object.keys(nb).length&&
(G(Pa,Ta,Da)||ua.supplyDefaults(Pa),Ta.legend&&Ya.push(Ia.doLegend),Ta.layoutstyle&&Ya.push(Ia.layoutStyles),Ta.axrange&&I(Ya,Da.rangesAltered),Ta.ticks&&Ya.push(Ia.doTicksRelayout),Ta.modebar&&Ya.push(Ia.doModeBar),Ta.camera&&Ya.push(Ia.doCamera),Ta.colorbars&&Ya.push(Ia.doColorBars),Ya.push(m));Ya.push(ua.rehover,ua.redrag);ra.add(Pa,t,[Pa,Da.undoit],t,[Pa,Da.redoit]);(nb=ha.syncOrAsync(Ya,Pa))&&nb.then||(nb=Promise.resolve(Pa));return nb.then(function(){Pa.emit("plotly_relayout",Da.eventData);
return Pa})}function G(Pa,Ta,Ya){var nb=Pa._fullLayout;if(!Ta.axrange)return!1;for(var Da in Ta)if("axrange"!==Da&&Ta[Da])return!1;for(var Ha in Ya.rangesAltered)if(Ya=sa.id2name(Ha),Ta=Pa.layout[Ya],Ya=nb[Ya],Ya.autorange=Ta.autorange,Ya.range=Ta.range.slice(),Ya.cleanRange(),Ya._matchGroup)for(var ab in Ya._matchGroup)ab!==Ha&&(Ta=nb[sa.id2name(ab)],Ta.autorange=Ya.autorange,Ta.range=Ya.range.slice(),Ta._input.range=Ya.range.slice());return!0}function I(Pa,Ta){Pa.push(eb,Ia.doAutoRangeAndConstraints,
Ta?function(Ya){var nb=[],Da=!0,Ha;for(Ha in Ta){var ab=sa.getFromId(Ya,Ha);nb.push(Ha);if(ab._matchGroup)for(var ib in ab._matchGroup)Ta[ib]||nb.push(ib);ab.automargin&&(Da=!1)}return sa.draw(Ya,nb,{skipTitle:Da})}:function(Ya){return sa.draw(Ya,"redraw")},Ia.drawData,Ia.finalDraw)}function L(Pa,Ta){function Ya(xb,kc){if(Array.isArray(xb))xb.forEach(function(Kc){Ya(Kc,kc)});else if(!(xb in Ta||Ea.hasParent(Ta,xb))){var nc=ab(Da,xb);xb in gc||(gc[xb]=y(nc.get()));void 0!==kc&&nc.set(kc)}}function nb(xb){xb=
sa.name2id(xb.split(".")[0]);tc[xb]=1;return xb}var Da=Pa.layout,Ha=Pa._fullLayout,ab=D(Ha._preGUI,Ha._guiEditing),ib=Object.keys(Ta),ob=sa.list(Pa),db=ha.extendDeepAll({},Ta),gb={},rb,Bb;B(Ta);ib=Object.keys(Ta);for(rb=0;rb<ib.length;rb++)if(0===ib[rb].indexOf("allaxes")){for(Bb=0;Bb<ob.length;Bb++){var Qb=ob[Bb]._id.substr(1);Qb=-1!==Qb.indexOf("scene")?Qb+".":"";Qb=ib[rb].replace("allaxes",Qb+ob[Bb]._name);Ta[Qb]||(Ta[Qb]=Ta[ib[rb]])}delete Ta[ib[rb]]}ib=Qa.layoutFlags();ob={};var gc={},tc={},
Ac,Uc;for(Uc in Ta){if(Ea.hasParent(Ta,Uc))throw Error("cannot set "+Uc+" and a parent attribute simultaneously");rb=ab(Da,Uc);Bb=Ta[Uc];for(Qb=rb.parts.length-1;0<Qb&&"string"!==typeof rb.parts[Qb];)Qb--;var Nc=rb.parts[Qb],gd=rb.parts[Qb-1]+"."+Nc,Xc=rb.parts.slice(0,Qb).join("."),ed=na(Pa.layout,Xc).get(),tb=na(Ha,Xc).get(),Xb=rb.get();if(void 0!==Bb){ob[Uc]=Bb;gc[Uc]="reverse"===Nc?Bb:y(Xb);if((Qb=oa.getLayoutValObject(Ha,rb.parts))&&Qb.impliedEdits&&null!==Bb)for(var uc in Qb.impliedEdits)Ya(ha.relativeAttr(Uc,
uc),Qb.impliedEdits[uc]);-1!==["width","height"].indexOf(Uc)?Bb?(Ya("autosize",null),gd="height"===Uc?"width":"height",Ya(gd,Ha[gd])):Ha[Uc]=Pa._initialAutoSize[Uc]:"autosize"===Uc?(Ya("width",Bb?null:Ha.width),Ya("height",Bb?null:Ha.height)):gd.match(Fa)?(nb(gd),na(Ha,Xc+"._inputRange").set(null)):gd.match(La)?(nb(gd),na(Ha,Xc+"._inputRange").set(null),gd=na(Ha,Xc).get(),gd._inputDomain&&(gd._input.domain=gd._inputDomain.slice())):gd.match(Oa)&&na(Ha,Xc+"._inputDomain").set(null);if("type"===Nc){var Mc=
ed;gd="linear"===tb.type&&"log"===Bb;var Rc="log"===tb.type&&"linear"===Bb;gd||Rc?(Mc&&Mc.range?tb.autorange?gd&&(Mc.range=Mc.range[1]>Mc.range[0]?[1,2]:[2,1]):(Rc=Mc.range[0],Mc=Mc.range[1],gd?(0>=Rc&&0>=Mc&&Ya(Xc+".autorange",!0),0>=Rc?Rc=Mc/1E6:0>=Mc&&(Mc=Rc/1E6),Ya(Xc+".range[0]",Math.log(Rc)/Math.LN10),Ya(Xc+".range[1]",Math.log(Mc)/Math.LN10)):(Ya(Xc+".range[0]",Math.pow(10,Rc)),Ya(Xc+".range[1]",Math.pow(10,Mc)))):Ya(Xc+".autorange",!0),Array.isArray(Ha._subplots.polar)&&Ha._subplots.polar.length&&
Ha[rb.parts[0]]&&"radialaxis"===rb.parts[1]&&delete Ha[rb.parts[0]]._subplot.viewInitial["radialaxis.range"],ta.getComponentMethod("annotations","convertCoords")(Pa,tb,Bb,Ya),ta.getComponentMethod("images","convertCoords")(Pa,tb,Bb,Ya)):(Ya(Xc+".autorange",!0),Ya(Xc+".range",null));na(Ha,Xc+"._inputRange").set(null)}else Nc.match(lb)&&(gd=na(Ha,Uc).get(),(Mc=(Bb||{}).type)&&"-"!==Mc||(Mc="linear"),ta.getComponentMethod("annotations","convertCoords")(Pa,gd,Mc,Ya),ta.getComponentMethod("images","convertCoords")(Pa,
gd,Mc,Ya));if(gd=Wa.containerArrayMatch(Uc)){var fd=gd.array;rb=gd.index;Nc=gd.property;Qb=Qb||{editType:"calc"};""!==rb&&""===Nc&&(Wa.isAddVal(Bb)?gc[Uc]=null:Wa.isRemoveVal(Bb)?gc[Uc]=(na(Da,fd).get()||[])[rb]:ha.warn("unrecognized full object value",Ta));Qa.update(ib,Qb);gb[fd]||(gb[fd]={});(Qb=gb[fd][rb])||(Qb=gb[fd][rb]={});Qb[Nc]=Bb;delete Ta[Uc]}else"reverse"===Nc?(ed.range?ed.range.reverse():(Ya(Xc+".autorange",!0),ed.range=[1,0]),tb.autorange?ib.calc=!0:ib.plot=!0):(Ha._has("scatter-like")&&
Ha._has("regl")&&"dragmode"===Uc&&("lasso"===Bb||"select"===Bb)&&"lasso"!==Xb&&"select"!==Xb?ib.plot=!0:Ha._has("gl2d")?ib.plot=!0:Qb?Qa.update(ib,Qb):ib.calc=!0,rb.set(Bb))}}for(fd in gb)Wa.applyContainerArrayChanges(Pa,ab(Da,fd),gb[fd],ib,ab)||(ib.plot=!0);Ha=Ha._axisConstraintGroups||[];for(Ac in tc)for(rb=0;rb<Ha.length;rb++)if(gb=Ha[rb],gb[Ac]){ib.calc=!0;for(var sb in gb)tc[sb]||(sa.getFromId(Pa,sb)._constraintShrinkable=!0)}if(M(Pa)||Ta.height||Ta.width)ib.plot=!0;if(ib.plot||ib.calc)ib.layoutReplot=
!0;return{flags:ib,rangesAltered:tc,undoit:gc,redoit:ob,eventData:db}}function M(Pa){var Ta=Pa._fullLayout,Ya=Ta.width,nb=Ta.height;Pa.layout.autosize&&ua.plotAutoSize(Pa,Pa.layout,Ta);return Ta.width!==Ya||Ta.height!==nb}function N(Pa,Ta,Ya,nb){Pa=ha.getGraphDiv(Pa);Ea.clearPromiseQueue(Pa);if(Pa.framework&&Pa.framework.isPolar)return Promise.resolve(Pa);ha.isPlainObject(Ta)||(Ta={});ha.isPlainObject(Ya)||(Ya={});Object.keys(Ta).length&&(Pa.changed=!0);Object.keys(Ya).length&&(Pa.changed=!0);nb=
Ea.coerceTraceIndices(Pa,nb);var Da=E(Pa,ha.extendFlat({},Ta),nb);Ta=Da.flags;var Ha=L(Pa,ha.extendFlat({},Ya)),ab=Ha.flags;if(Ta.calc||ab.calc)Pa.calcdata=void 0;Ta.clearAxisTypes&&Ea.clearAxisTypes(Pa,nb,Ya);Ya=[];ab.layoutReplot?Ya.push(Ia.layoutReplot):Ta.fullReplot?Ya.push(C.plot):(Ya.push(ua.previousPromises),G(Pa,ab,Ha)||ua.supplyDefaults(Pa),Ta.style&&Ya.push(Ia.doTraceStyle),(Ta.colorbars||ab.colorbars)&&Ya.push(Ia.doColorBars),ab.legend&&Ya.push(Ia.doLegend),ab.layoutstyle&&Ya.push(Ia.layoutStyles),
ab.axrange&&I(Ya,Ha.rangesAltered),ab.ticks&&Ya.push(Ia.doTicksRelayout),ab.modebar&&Ya.push(Ia.doModeBar),ab.camera&&Ya.push(Ia.doCamera),Ya.push(m));Ya.push(ua.rehover,ua.redrag);ra.add(Pa,N,[Pa,Da.undoit,Ha.undoit,Da.traces],N,[Pa,Da.redoit,Ha.redoit,Da.traces]);(Ya=ha.syncOrAsync(Ya,Pa))&&Ya.then||(Ya=Promise.resolve(Pa));return Ya.then(function(){Pa.emit("plotly_update",{data:Da.eventData,layout:Ha.eventData});return Pa})}function H(Pa){return function(Ta){Ta._fullLayout._guiEditing=!0;var Ya=
Pa.apply(null,arguments);Ta._fullLayout._guiEditing=!1;return Ya}}function J(Pa,Ta){for(var Ya=0;Ya<Ta.length;Ya++){var nb=Ta[Ya],Da=Pa.match(nb.pattern);if(Da)return{head:Da[1],attr:nb.attr}}}function O(Pa,Ta){var Ya=na(Ta,Pa).get();if(void 0!==Ya)return Ya;Pa=Pa.split(".");for(Pa.pop();1<Pa.length;)if(Pa.pop(),Ya=na(Ta,Pa.join(".")+".uirevision").get(),void 0!==Ya)return Ya;return Ta.uirevision}function Q(Pa,Ta){var Ya=ha.isPlainObject(Pa),nb=Array.isArray(Pa);return Ya||nb?(Ya&&ha.isPlainObject(Ta)||
nb&&Array.isArray(Ta))&&JSON.stringify(Pa)===JSON.stringify(Ta):Pa===Ta}function U(Pa,Ta,Ya,nb){var Da=nb._preGUI,Ha,ab,ib,ob=[],db={};for(Ha in Da){if(ab=J(Ha,fb)){if(ab=ab.attr||ab.head+".uirevision",(ab=(ib=na(nb,ab).get())&&O(ab,Ta))&&ab===ib){ib=Da[Ha];null===ib&&(ib=void 0);ab=na(Ta,Ha);var gb=ab.get();if(Q(gb,ib)){void 0===gb&&"autorange"===Ha.substr(Ha.length-9)&&ob.push(Ha.substr(0,Ha.length-10));ab.set(y(na(nb,Ha).get()));continue}}}else ha.warn("unrecognized GUI edit: "+Ha);delete Da[Ha];
"range["===Ha.substr(Ha.length-8,6)&&(db[Ha.substr(0,Ha.length-9)]=1)}for(Da=0;Da<ob.length;Da++)ib=ob[Da],db[ib]&&(ib=na(Ta,ib).get())&&delete ib.autorange;ob=nb._tracePreGUI;for(var rb in ob)for(Ha in db=ob[rb],Da=null,db){if(!Da){a:{for(Da=0;Da<Ya.length;Da++)if(Ya[Da]._fullInput.uid===rb)break a;Da=-1}if(0>Da){delete ob[rb];break}var Bb=Ya[Da]._fullInput;a:{Da=Bb.index;for(ib=0;ib<Pa.length;ib++)if(Pa[ib].uid===rb){Da=ib;break a}Da=!Pa[Da]||Pa[Da].uid?-1:Da}if(0>Da){delete ob[rb];break}Da=Pa[Da]}if(ab=
J(Ha,bb)){if(ab.attr?ab=(ib=na(nb,ab.attr).get())&&O(ab.attr,Ta):(ib=Bb.uirevision,ab=Da.uirevision,void 0===ab&&(ab=Ta.uirevision)),ab&&ab===ib&&(ib=db[Ha],null===ib&&(ib=void 0),ab=na(Da,Ha),gb=ab.get(),Q(gb,ib))){ab.set(y(na(Bb,Ha).get()));continue}}else ha.warn("unrecognized GUI edit: "+Ha+" in trace uid "+rb);delete db[Ha]}}function P(Pa,Ta,Ya,nb,Da,Ha){var ab=Ta.length===Ya.length;if(!Da&&!ab)return{fullReplot:!0,calc:!0};var ib=Qa.traceFlags();ib.arrays={};ib.nChanges=0;ib.nChangesAnim=0;nb=
{getValObject:function(db){db=oa.getTraceValObject(ob,db);!ob._module.animatable&&db.anim&&(db.anim=!1);return db},flags:ib,immutable:nb,transition:Da,newDataRevision:Ha,gd:Pa};Ha={};for(Pa=0;Pa<Ta.length;Pa++)if(Ya[Pa]){var ob=Ya[Pa]._fullInput;ua.hasMakesDataTransform(ob)&&(ob=Ya[Pa]);Ha[ob.uid]||(Ha[ob.uid]=1,Y(Ta[Pa]._fullInput,ob,[],nb))}if(ib.calc||ib.plot)ib.fullReplot=!0;Da&&ib.nChanges&&ib.nChangesAnim&&(ib.anim=ib.nChanges===ib.nChangesAnim&&ab?"all":"some");return ib}function V(Pa,Ta,Ya,
nb,Da){var Ha=Qa.layoutFlags();Ha.arrays={};Ha.rangesAltered={};Ha.nChanges=0;Ha.nChangesAnim=0;Y(Ta,Ya,[],{getValObject:function(ab){return oa.getLayoutValObject(Ya,ab)},flags:Ha,immutable:nb,transition:Da,gd:Pa});if(Ha.plot||Ha.calc)Ha.layoutReplot=!0;Da&&Ha.nChanges&&Ha.nChangesAnim&&(Ha.anim=Ha.nChanges===Ha.nChangesAnim?"all":"some");return Ha}function Y(Pa,Ta,Ya,nb){function Da(){var tb=Ha.editType;if(gb&&-1!==tb.indexOf("arraydraw"))ha.pushUnique(ob.arrays[gb],rb);else{Qa.update(ob,Ha);"none"!==
tb&&ob.nChanges++;nb.transition&&Ha.anim&&ob.nChangesAnim++;if(Fa.test(tc)||La.test(tc))ob.rangesAltered[Ya[0]]=1;Oa.test(tc)&&na(Ta,"_inputDomain").set(null);"datarevision"===ab&&(ob.newDataRevision=1)}}var Ha,ab,ib=nb.getValObject,ob=nb.flags,db=nb.immutable,gb=nb.inArray,rb=nb.arrayIndex;for(ab in Pa){if(ob.calc&&!nb.transition)return;var Bb=Pa[ab],Qb=Ta[ab],gc=Ya.concat(ab);var tc=gc.join(".");if("_"!==ab.charAt(0)&&"function"!==typeof Bb&&Bb!==Qb){if(("tick0"===ab||"dtick"===ab)&&"geo"!==Ya[0]){var Ac=
Ta.tickmode;if("auto"===Ac||"array"===Ac||!Ac)continue}if(!("range"===ab&&Ta.autorange||("zmin"===ab||"zmax"===ab)&&"contourcarpet"===Ta.type||!(Ha=ib(gc))||Ha._compareAsJSON&&JSON.stringify(Bb)===JSON.stringify(Qb))){Ac=Ha.valType;var Uc="data_array"===Ha.valType||Ha.arrayOk,Nc=Array.isArray(Bb),gd=Array.isArray(Qb);if(Nc&&gd){var Xc="_input_"+ab,ed=Pa[Xc];Xc=Ta[Xc];if(Array.isArray(ed)&&ed===Xc)continue}if(void 0===Qb)Uc&&Nc?ob.calc=!0:Da();else if(Ha._isLinkedToArray){Uc=[];Nc=!1;gb||(ob.arrays[ab]=
Uc);gd=Math.min(Bb.length,Qb.length);ed=Math.max(Bb.length,Qb.length);if(gd!==ed)if("arraydraw"===Ha.editType)Nc=!0;else{Da();continue}for(Ac=0;Ac<gd;Ac++)Y(Bb[Ac],Qb[Ac],gc.concat(Ac),ha.extendFlat({inArray:ab,arrayIndex:Ac},nb));if(Nc)for(Ac=gd;Ac<ed;Ac++)Uc.push(Ac)}else!Ac&&ha.isPlainObject(Bb)?Y(Bb,Qb,gc,nb):Uc?Nc&&gd?(db&&(ob.calc=!0),(db||nb.newDataRevision)&&Da()):Nc!==gd?ob.calc=!0:Da():Nc&&gd?(Bb.length!==Qb.length||String(Bb)!==String(Qb))&&Da():Da()}}}for(ab in Ta)if(!(ab in Pa||"_"===
ab.charAt(0)||"function"===typeof Ta[ab]))if(Ha=ib(Ya.concat(ab)),("data_array"===Ha.valType||Ha.arrayOk)&&Array.isArray(Ta[ab])){ob.calc=!0;break}else Da()}function ba(Pa,Ta){for(var Ya in Pa)if("_"!==Ya.charAt(0)){var nb=Pa[Ya],Da=Ta[Ya];if(nb!==Da)if(ha.isPlainObject(nb)&&ha.isPlainObject(Da)){if(ba(nb,Da))return!0}else if(Array.isArray(nb)&&Array.isArray(Da)){if(nb.length!==Da.length)return!0;for(var Ha=0;Ha<nb.length;Ha++)if(nb[Ha]!==Da[Ha])if(ha.isPlainObject(nb[Ha])&&ha.isPlainObject(Da[Ha])){if(ba(nb[Ha],
Da[Ha]))return!0}else return!0}else return!0}}function ea(Pa){var Ta=ca.select(Pa),Ya=Pa._fullLayout;Ya._container=Ta.selectAll(".plot-container").data([0]);Ya._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0);Ya._paperdiv=Ya._container.selectAll(".svg-container").data([0]);Ya._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative");Ya._glcontainer=Ya._paperdiv.selectAll(".gl-container").data([{}]);Ya._glcontainer.enter().append("div").classed("gl-container",
!0);Ya._paperdiv.selectAll(".main-svg").remove();Ya._paperdiv.select(".modebar-container").remove();Ya._paper=Ya._paperdiv.insert("svg",":first-child").classed("main-svg",!0);Ya._toppaper=Ya._paperdiv.append("svg").classed("main-svg",!0);Ya._modebardiv=Ya._paperdiv.append("div");Ya._hoverpaper=Ya._paperdiv.append("svg").classed("main-svg",!0);if(!Ya._uid){var nb={};ca.selectAll("defs").each(function(){this.id&&(nb[this.id.split("-")[1]]=1)});Ya._uid=ha.randstr(nb)}Ya._paperdiv.selectAll(".main-svg").attr(Ca.svgAttrs);
Ya._defs=Ya._paper.append("defs").attr("id","defs-"+Ya._uid);Ya._clips=Ya._defs.append("g").classed("clips",!0);Ya._topdefs=Ya._toppaper.append("defs").attr("id","topdefs-"+Ya._uid);Ya._topclips=Ya._topdefs.append("g").classed("clips",!0);Ya._bgLayer=Ya._paper.append("g").classed("bglayer",!0);Ya._draggers=Ya._paper.append("g").classed("draglayer",!0);Ta=Ya._paper.append("g").classed("layer-below",!0);Ya._imageLowerLayer=Ta.append("g").classed("imagelayer",!0);Ya._shapeLowerLayer=Ta.append("g").classed("shapelayer",
!0);Ya._cartesianlayer=Ya._paper.append("g").classed("cartesianlayer",!0);Ya._polarlayer=Ya._paper.append("g").classed("polarlayer",!0);Ya._ternarylayer=Ya._paper.append("g").classed("ternarylayer",!0);Ya._geolayer=Ya._paper.append("g").classed("geolayer",!0);Ya._funnelarealayer=Ya._paper.append("g").classed("funnelarealayer",!0);Ya._pielayer=Ya._paper.append("g").classed("pielayer",!0);Ya._treemaplayer=Ya._paper.append("g").classed("treemaplayer",!0);Ya._sunburstlayer=Ya._paper.append("g").classed("sunburstlayer",
!0);Ya._indicatorlayer=Ya._toppaper.append("g").classed("indicatorlayer",!0);Ya._glimages=Ya._paper.append("g").classed("glimages",!0);Ta=Ya._toppaper.append("g").classed("layer-above",!0);Ya._imageUpperLayer=Ta.append("g").classed("imagelayer",!0);Ya._shapeUpperLayer=Ta.append("g").classed("shapelayer",!0);Ya._infolayer=Ya._toppaper.append("g").classed("infolayer",!0);Ya._menulayer=Ya._toppaper.append("g").classed("menulayer",!0);Ya._zoomlayer=Ya._toppaper.append("g").classed("zoomlayer",!0);Ya._hoverlayer=
Ya._hoverpaper.append("g").classed("hoverlayer",!0);Ya._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px");Pa.emit("plotly_framework")}var ca=b("d3"),ia=b("fast-isnumeric"),fa=b("has-hover"),ha=b("../lib"),na=ha.nestedProperty,pa=b("../lib/events"),ra=b("../lib/queue"),ta=b("../registry"),oa=b("./plot_schema"),ua=b("../plots/plots"),ka=b("../plots/polar/legacy"),sa=b("../plots/cartesian/axes"),ya=b("../components/drawing"),qa=b("../components/color"),
xa=b("../plots/cartesian/graph_interact").initInteractions,Ca=b("../constants/xmlns_namespaces"),Ja=b("../lib/svg_text_utils"),eb=b("../plots/cartesian/select").clearSelect,Ra=b("./plot_config").dfltConfig,Wa=b("./manage_arrays"),Ea=b("./helpers"),Ia=b("./subroutines"),Qa=b("./edit_types"),lb=b("../plots/cartesian/constants").AX_NAME_PATTERN,hb=0,Fa=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,La=/^[xyz]axis[0-9]*\.autorange$/,Oa=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/,fb=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},
{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,
attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],bb=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];C.animate=function(Pa,Ta,Ya){function nb(ib,ob){var db=
0;return function(){if(ib&&++db===ob)return ib()}}Pa=ha.getGraphDiv(Pa);if(!ha.isPlotDiv(Pa))throw Error("This element is not a Plotly plot: "+Pa+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Da=Pa._transitionData;Da._frameQueue||(Da._frameQueue=[]);Ya=ua.supplyAnimationDefaults(Ya);var Ha=Ya.transition,ab=Ya.frame;void 0===Da._frameWaitingCnt&&(Da._frameWaitingCnt=0);return new Promise(function(ib,ob){function db(){if(0!==
Da._frameQueue.length){for(;Da._frameQueue.length;){var Xc=Da._frameQueue.pop();if(Xc.onInterrupt)Xc.onInterrupt()}Pa.emit("plotly_animationinterrupted",[])}}function gb(Xc){if(0!==Xc.length){for(var ed=0;ed<Xc.length;ed++){var tb="byname"===Xc[ed].type?ua.computeFrame(Pa,Xc[ed].name):Xc[ed].data;var Xb=ed;Xb=Array.isArray(ab)?Xb>=ab.length?ab[0]:ab[Xb]:ab;var uc=ed;uc=Array.isArray(Ha)?uc>=Ha.length?Ha[0]:Ha[uc]:Ha;uc.duration=Math.min(uc.duration,Xb.duration);tb={frame:tb,name:Xc[ed].name,frameOpts:Xb,
transitionOpts:uc};ed===Xc.length-1&&(tb.onComplete=nb(ib,2),tb.onInterrupt=ob);Da._frameQueue.push(tb)}"immediate"===Ya.mode&&(Da._lastFrameAt=-Infinity);Da._animationRaf||Bb()}}function rb(){if(Da._currentFrame&&Da._currentFrame.onComplete)Da._currentFrame.onComplete();var Xc=Da._currentFrame=Da._frameQueue.shift();if(Xc){var ed=Xc.name?Xc.name.toString():null;Pa._fullLayout._currentFrame=ed;Da._lastFrameAt=Date.now();Da._timeToNext=Xc.frameOpts.duration;ua.transition(Pa,Xc.frame.data,Xc.frame.layout,
Ea.coerceTraceIndices(Pa,Xc.frame.traces),Xc.frameOpts,Xc.transitionOpts).then(function(){if(Xc.onComplete)Xc.onComplete()});Pa.emit("plotly_animatingframe",{name:ed,frame:Xc.frame,animation:{frame:Xc.frameOpts,transition:Xc.transitionOpts}})}else Pa.emit("plotly_animated"),window.cancelAnimationFrame(Da._animationRaf),Da._animationRaf=null}function Bb(){Pa.emit("plotly_animating");Da._lastFrameAt=-Infinity;Da._timeToNext=0;Da._runningTransitions=0;Da._currentFrame=null;var Xc=function(){Da._animationRaf=
window.requestAnimationFrame(Xc);Date.now()-Da._lastFrameAt>Da._timeToNext&&rb()};Xc()}function Qb(Xc){Array.isArray(Ha)?Xc.transitionOpts=gc>=Ha.length?Ha[gc]:Ha[0]:Xc.transitionOpts=Ha;gc++;return Xc}var gc=0,tc,Ac=[],Uc=void 0===Ta||null===Ta;var Nc=Array.isArray(Ta);if(!Uc&&!Nc&&ha.isPlainObject(Ta))Ac.push({type:"object",data:Qb(ha.extendFlat({},Ta))});else if(Uc||-1!==["string","number"].indexOf(typeof Ta))for(Nc=0;Nc<Da._frames.length;Nc++)(tc=Da._frames[Nc])&&(Uc||String(tc.group)===String(Ta))&&
Ac.push({type:"byname",name:String(tc.name),data:Qb({name:tc.name})});else if(Nc)for(Nc=0;Nc<Ta.length;Nc++)tc=Ta[Nc],-1!==["number","string"].indexOf(typeof tc)?(tc=String(tc),Ac.push({type:"byname",name:tc,data:Qb({name:tc})})):ha.isPlainObject(tc)&&Ac.push({type:"object",data:Qb(ha.extendFlat({},tc))});for(Nc=0;Nc<Ac.length;Nc++)if(tc=Ac[Nc],"byname"===tc.type&&!Da._frameHash[tc.data.name]){ha.warn('animate failure: frame not found: "'+tc.data.name+'"');ob();return}-1!==["next","immediate"].indexOf(Ya.mode)&&
db();"reverse"===Ya.direction&&Ac.reverse();var gd=Pa._fullLayout._currentFrame;if(gd&&Ya.fromcurrent){Uc=-1;for(Nc=0;Nc<Ac.length;Nc++)if(tc=Ac[Nc],"byname"===tc.type&&tc.name===gd){Uc=Nc;break}if(0<Uc&&Uc<Ac.length-1){gd=[];for(Nc=0;Nc<Ac.length;Nc++)tc=Ac[Nc],("byname"!==Ac[Nc].type||Nc>Uc)&&gd.push(tc);Ac=gd}}0<Ac.length?gb(Ac):(Pa.emit("plotly_animated"),ib())})};C.addFrames=function(Pa,Ta,Ya){Pa=ha.getGraphDiv(Pa);if(null===Ta||void 0===Ta)return Promise.resolve();if(!ha.isPlotDiv(Pa))throw Error("This element is not a Plotly plot: "+
Pa+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var nb,Da=Pa._transitionData._frames,Ha=Pa._transitionData._frameHash;if(!Array.isArray(Ta))throw Error("addFrames failure: frameList must be an Array of frame definitions"+Ta);var ab=Da.length+2*Ta.length;var ib=[],ob={};for(nb=Ta.length-1;0<=nb;nb--)if(ha.isPlainObject(Ta[nb])){var db=Ta[nb].name;var gb=(Ha[db]||ob[db]||{}).name,rb=Ta[nb].name,Bb=Ha[gb]||
ob[gb];gb&&rb&&"number"===typeof rb&&Bb&&5>hb&&(hb++,ha.warn('addFrames: overwriting frame "'+(Ha[gb]||ob[gb]).name+'" with a frame whose name of type "number" also equates to "'+gb+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===hb&&ha.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));ob[db]={name:db};
ib.push({frame:ua.supplyFrameDefaults(Ta[nb]),index:Ya&&void 0!==Ya[nb]&&null!==Ya[nb]?Ya[nb]:ab+nb})}ib.sort(function(Qb,gc){return Qb.index>gc.index?-1:Qb.index<gc.index?1:0});Ta=[];Ya=[];ob=Da.length;for(nb=ib.length-1;0<=nb;nb--){ab=ib[nb].frame;"number"===typeof ab.name&&ha.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");if(!ab.name)for(;Ha[ab.name="frame "+Pa._transitionData._counter++];);if(Ha[ab.name]){for(db=0;db<Da.length&&(Da[db]||
{}).name!==ab.name;db++);Ta.push({type:"replace",index:db,value:ab});Ya.unshift({type:"replace",index:db,value:Da[db]})}else db=Math.max(0,Math.min(ib[nb].index,ob)),Ta.push({type:"insert",index:db,value:ab}),Ya.unshift({type:"delete",index:db}),ob++}Da=nb=ua.modifyFrames;Ha=[Pa,Ya];ib=[Pa,Ta];ra&&ra.add(Pa,nb,Ha,Da,ib);return ua.modifyFrames(Pa,Ta)};C.deleteFrames=function(Pa,Ta){Pa=ha.getGraphDiv(Pa);if(!ha.isPlotDiv(Pa))throw Error("This element is not a Plotly plot: "+Pa);var Ya,nb=Pa._transitionData._frames,
Da=[],Ha=[];if(!Ta)for(Ta=[],Ya=0;Ya<nb.length;Ya++)Ta.push(Ya);Ta=Ta.slice();Ta.sort();for(Ya=Ta.length-1;0<=Ya;Ya--){var ab=Ta[Ya];Da.push({type:"delete",index:ab});Ha.unshift({type:"insert",index:ab,value:nb[ab]})}Ya=Ta=ua.modifyFrames;Ha=[Pa,Ha];ab=[Pa,Da];ra&&ra.add(Pa,Ta,Ha,Ya,ab);return ua.modifyFrames(Pa,Da)};C.addTraces=r;C.deleteTraces=u;C.extendTraces=d;C.moveTraces=v;C.prependTraces=q;C.newPlot=function(Pa,Ta,Ya,nb){Pa=ha.getGraphDiv(Pa);ua.cleanPlot([],{},Pa._fullData||[],Pa._fullLayout||
{});ua.purge(Pa);return C.plot(Pa,Ta,Ya,nb)};C.plot=function(Pa,Ta,Ya,nb){function Da(){for(var Ac=Bb._basePlotModules,Uc=0;Uc<Ac.length;Uc++)Ac[Uc].drawFramework&&Ac[Uc].drawFramework(Pa);!Bb._glcanvas&&Bb._has("gl")&&(Bb._glcanvas=Bb._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Nc){return Nc.key}),Bb._glcanvas.enter().append("canvas").attr("class",function(Nc){return"gl-canvas gl-canvas-"+
Nc.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));if(Bb._glcanvas&&(Bb._glcanvas.attr("width",Bb.width).attr("height",Bb.height),(Ac=Bb._glcanvas.data()[0].regl)&&(Math.floor(Bb.width)!==Ac._gl.drawingBufferWidth||Math.floor(Bb.height)!==Ac._gl.drawingBufferHeight)))if(tc)ha.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");else return ha.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),
ua.cleanPlot([],{},Pa._fullData,Bb),ua.supplyDefaults(Pa),Bb=Pa._fullLayout,ua.doCalcdata(Pa),tc++,Da();"h"===Bb.modebar.orientation?Bb._modebardiv.style("height",null).style("width","100%"):Bb._modebardiv.style("width",null).style("height",Bb.height+"px");return ua.previousPromises(Pa)}function Ha(){ua.clearAutoMarginIds(Pa);Ia.drawMarginPushers(Pa);sa.allowAutoMargin(Pa);if(Bb._has("pie"))for(var Ac=Pa._fullData,Uc=0;Uc<Ac.length;Uc++){var Nc=Ac[Uc];"pie"===Nc.type&&Nc.automargin&&ua.allowAutoMargin(Pa,
"pie."+Nc.uid+".automargin")}ua.doAutoMargin(Pa);return ua.previousPromises(Pa)}function ab(){if(Qb)return ha.syncOrAsync([ta.getComponentMethod("shapes","calcAutorange"),ta.getComponentMethod("annotations","calcAutorange"),ib],Pa);ib()}function ib(){Pa._transitioning||(Ia.doAutoRangeAndConstraints(Pa),rb&&sa.saveRangeInitial(Pa),ta.getComponentMethod("rangeslider","calcAutorange")(Pa))}function ob(){return sa.draw(Pa,rb?"":"redraw")}Pa=ha.getGraphDiv(Pa);pa.init(Pa);if(ha.isPlainObject(Ta)){var db=
Ta;Ta=db.data;Ya=db.layout;nb=db.config;var gb=db.frames}if(!1===pa.triggerHandler(Pa,"plotly_beforeplot",[Ta,Ya,nb]))return Promise.reject();Ta||Ya||ha.isPlotDiv(Pa)||ha.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",Pa);e(Pa,nb);Ya||(Ya={});ca.select(Pa).classed("js-plotly-plot",!0);ya.makeTester();Array.isArray(Pa._promises)||(Pa._promises=[]);var rb=0===(Pa.data||[]).length&&Array.isArray(Ta);Array.isArray(Ta)&&(Ea.cleanData(Ta),rb?Pa.data=Ta:Pa.data.push.apply(Pa.data,
Ta),Pa.empty=!1);if(!Pa.layout||rb)Pa.layout=Ea.cleanLayout(Ya);ua.supplyDefaults(Pa);var Bb=Pa._fullLayout;nb=Bb._has("cartesian");if(!Bb._has("polar")&&Ta&&Ta[0]&&Ta[0].r)return ha.log("Legacy polar charts are deprecated!"),a(Pa,Ta,Ya);Bb._replotting=!0;if(rb||Bb._shouldCreateBgLayer)ea(Pa),Bb._shouldCreateBgLayer&&delete Bb._shouldCreateBgLayer;Pa.framework!==ea&&(Pa.framework=ea,ea(Pa));ya.initGradients(Pa);rb&&sa.saveShowSpikeInitial(Pa);var Qb=!Pa.calcdata||Pa.calcdata.length!==(Pa._fullData||
[]).length;Qb&&ua.doCalcdata(Pa);for(Ta=0;Ta<Pa.calcdata.length;Ta++)Pa.calcdata[Ta][0].trace=Pa._fullData[Ta];Pa._context.responsive?Pa._responsiveChartHandler||(Pa._responsiveChartHandler=function(){ha.isHidden(Pa)||ua.resize(Pa)},window.addEventListener("resize",Pa._responsiveChartHandler)):ha.clearResponsive(Pa);var gc=ha.extendFlat({},Bb._size),tc=0;Ta=[ua.previousPromises,function(){if(gb)return C.addFrames(Pa,gb)},Da,Ha,function(){if(ua.didMarginChange(gc,Bb._size))return ha.syncOrAsync([Ha,
Ia.layoutStyles],Pa)}];nb&&Ta.push(ab);Ta.push(Ia.layoutStyles);nb&&Ta.push(ob);Ta.push(Ia.drawData,Ia.finalDraw,xa,ua.addLinks,ua.rehover,ua.redrag,ua.doAutoMargin,ua.previousPromises);(Ta=ha.syncOrAsync(Ta,Pa))&&Ta.then||(Ta=Promise.resolve());return Ta.then(function(){m(Pa);return Pa})};C.purge=function(Pa){Pa=ha.getGraphDiv(Pa);var Ta=Pa._fullLayout||{};ua.cleanPlot([],{},Pa._fullData||[],Ta);ua.purge(Pa);pa.purge(Pa);Ta._container&&Ta._container.remove();delete Pa._context;return Pa};C.react=
function(Pa,Ta,Ya,nb){function Da(){return C.addFrames(Pa,db)}var Ha;Pa=ha.getGraphDiv(Pa);Ea.clearPromiseQueue(Pa);var ab=Pa._fullData,ib=Pa._fullLayout;if(ha.isPlotDiv(Pa)&&ab&&ib){if(ha.isPlainObject(Ta)){var ob=Ta;Ta=ob.data;Ya=ob.layout;nb=ob.config;var db=ob.frames}ob=!1;nb&&(ob=ha.extendDeep({},Pa._context),Pa._context=void 0,e(Pa,nb),ob=ba(ob,Pa._context));Pa.data=Ta||[];Ea.cleanData(Pa.data);Pa.layout=Ya||{};Ea.cleanLayout(Pa.layout);U(Pa.data,Pa.layout,ab,ib);nb=Object.getOwnPropertyNames(ib);
for(var gb=0;gb<nb.length;gb++){var rb=nb[gb],Bb=rb.substring(0,5);("xaxis"===Bb||"yaxis"===Bb)&&(rb=ib[rb]._emptyCategories)&&rb()}ua.supplyDefaults(Pa,{skipUpdateCalc:!0});gb=Pa._fullData;nb=Pa._fullLayout;rb=void 0===nb.datarevision;Bb=nb.transition;var Qb=V(Pa,ib,nb,rb,Bb),gc=P(Pa,ab,gb,rb,Bb,Qb.newDataRevision);M(Pa)&&(Qb.layoutReplot=!0);gc.calc||Qb.calc?Pa.calcdata=void 0:ua.supplyDefaultsUpdateCalc(Pa.calcdata,gb);ab=[];db&&(Pa._transitionData={},ua.createTransitionData(Pa),ab.push(Da));if(nb.transition&&
!ob&&(gc.anim||Qb.anim))Qb.ticks&&ab.push(Ia.doTicksRelayout),ua.doCalcdata(Pa),Ia.doAutoRangeAndConstraints(Pa),ab.push(function(){return ua.transitionFromReact(Pa,gc,Qb,ib)});else if(gc.fullReplot||Qb.layoutReplot||ob)Pa._fullLayout._skipDefaults=!0,ab.push(C.plot);else{for(Ha in Qb.arrays)if(ob=Qb.arrays[Ha],ob.length)if(nb=ta.getComponentMethod(Ha,"drawOne"),nb!==ha.noop)for(gb=0;gb<ob.length;gb++)nb(Pa,ob[gb]);else{ob=ta.getComponentMethod(Ha,"draw");if(ob===ha.noop)throw Error("cannot draw components: "+
Ha);ob(Pa)}ab.push(ua.previousPromises);gc.style&&ab.push(Ia.doTraceStyle);(gc.colorbars||Qb.colorbars)&&ab.push(Ia.doColorBars);Qb.legend&&ab.push(Ia.doLegend);Qb.layoutstyle&&ab.push(Ia.layoutStyles);Qb.axrange&&I(ab);Qb.ticks&&ab.push(Ia.doTicksRelayout);Qb.modebar&&ab.push(Ia.doModeBar);Qb.camera&&ab.push(Ia.doCamera);ab.push(m)}ab.push(ua.rehover,ua.redrag);(Ha=ha.syncOrAsync(ab,Pa))&&Ha.then||(Ha=Promise.resolve(Pa))}else Ha=C.newPlot(Pa,Ta,Ya,nb);return Ha.then(function(){Pa.emit("plotly_react",
{data:Ta,layout:Ya});return Pa})};C.redraw=function(Pa){Pa=ha.getGraphDiv(Pa);if(!ha.isPlotDiv(Pa))throw Error("This element is not a Plotly plot: "+Pa);Ea.cleanData(Pa.data);Ea.cleanLayout(Pa.layout);Pa.calcdata=void 0;return C.plot(Pa).then(function(){Pa.emit("plotly_redraw");return Pa})};C.relayout=t;C.restyle=w;C.setPlotConfig=function(Pa){return ha.extendFlat(Ra,Pa)};C.update=N;C._guiRelayout=H(t);C._guiRestyle=H(w);C._guiUpdate=H(N);C._storeDirectGUIEdit=function(Pa,Ta,Ya){for(var nb in Ya){var Da=
na(Pa,nb);x(nb,Da.get(),Ya[nb],Ta)}}},{"../components/color":615,"../components/drawing":637,"../constants/xmlns_namespaces":725,"../lib":749,"../lib/events":738,"../lib/queue":764,"../lib/svg_text_utils":773,"../plots/cartesian/axes":797,"../plots/cartesian/constants":803,"../plots/cartesian/graph_interact":806,"../plots/cartesian/select":816,"../plots/plots":860,"../plots/polar/legacy":868,"../registry":880,"./edit_types":780,"./helpers":781,"./manage_arrays":783,"./plot_config":785,"./plot_schema":786,
"./subroutines":788,d3:169,"fast-isnumeric":241,"has-hover":414}],785:[function(b,F,C){function m(h,l){for(var e in h){var a=h[e];a.valType?l[e]=a.dflt:(l[e]||(l[e]={}),m(a,l[e]))}}b={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",
dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",
values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",
dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",
dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};C={};m(b,C);F.exports={configAttributes:b,dfltConfig:C}},{}],786:[function(b,F,C){function m(H,J){var O,Q,U=H._basePlotModules;if(U){for(O=0;O<U.length;O++){var P=U[O];if(P.attrRegex&&P.attrRegex.test(J)){if(P.layoutAttrOverrides)return P.layoutAttrOverrides;
if(!V&&P.layoutAttributes)var V=P.layoutAttributes}if((P=P.baseLayoutAttrOverrides)&&J in P)return P[J]}if(V)return V}if(U=H._modules)for(O=0;O<U.length;O++)if((H=U[O].layoutAttributes)&&J in H)return H[J];for(Q in q.componentsRegistry){P=q.componentsRegistry[Q];if("colorscale"===P.name&&0===J.indexOf("coloraxis"))return P.layoutAttributes[J];if(!P.schema&&J===P.name)return P.layoutAttributes}return J in u?u[J]:"radialaxis"===J||"angularaxis"===J?x[J]:x.layout[J]||!1}function h(H,J,O){if(!H)return!1;
if(H._isLinkedToArray)if(l(J[O]))O++;else if(O<J.length)return!1;for(;O<J.length;O++){var Q=H[J[O]];if(G(Q))H=Q;else break;if(O===J.length-1)break;if(H._isLinkedToArray){if(O++,!l(J[O]))return!1}else if("info_array"===H.valType){O++;Q=J[O];if(!l(Q))return!1;var U=H.items;if(Array.isArray(U)){if(Q>=U.length)return!1;if(2===H.dimensions){O++;if(J.length===O)break;H=J[O];if(!l(H))return!1;H=U[Q][H]}else H=U[Q]}else H=U}}return H}function l(H){return H===Math.round(H)&&0<=H}function e(H){if("area"===
H){var J={attributes:D};var O={}}else J=q.modules[H]._module,O=J.basePlotModule;var Q={type:null},U=t({},r),P=t({},J.attributes);C.crawl(P,function(V,Y,ba,ea,ca){L(U,ca).set(void 0);void 0===V&&L(P,ca).set(void 0)});t(Q,U);q.traceIs(H,"noOpacity")&&delete Q.opacity;q.traceIs(H,"showLegend")||(delete Q.showlegend,delete Q.legendgroup);q.traceIs(H,"noHover")&&(delete Q.hoverinfo,delete Q.hoverlabel);J.selectPoints||delete Q.selectedpoints;t(Q,P);O.attributes&&t(Q,O.attributes);Q.type=H;H={meta:J.meta||
{},categories:J.categories||{},animatable:!!J.animatable,type:H,attributes:p(Q)};J.layoutAttributes&&(O={},t(O,J.layoutAttributes),H.layoutAttributes=p(O));J.animatable||C.crawl(H,function(V){C.isValObject(V)&&"anim"in V&&delete V.anim});return H}function a(){var H={},J;t(H,u);for(J in q.subplotsRegistry){var O=q.subplotsRegistry[J];if(O.layoutAttributes)if(Array.isArray(O.attr))for(var Q=0;Q<O.attr.length;Q++)d(H,O,O.attr[Q]);else d(H,O,"subplot"===O.attr?O.name:O.attr)}B(H,{radialaxis:x.radialaxis,
angularaxis:x.angularaxis});B(H,x.layout);for(J in q.componentsRegistry)if(O=q.componentsRegistry[J],(Q=O.schema)&&(Q.subplots||Q.layout)){if((O=Q.subplots)&&O.xaxis&&!O.yaxis)for(var U in O.xaxis)delete H.yaxis[U]}else"colorscale"===O.name?t(H,O.layoutAttributes):O.layoutAttributes&&(Q=O.layoutAttributes,O=L(H,O.name),O.set(t(O.get()||{},Q)));return{layoutAttributes:p(H)}}function g(H){var J=t({},q.transformsRegistry[H].attributes);Object.keys(q.componentsRegistry).forEach(function(O){var Q=q.componentsRegistry[O];
Q.schema&&Q.schema.transforms&&Q.schema.transforms[H]&&Object.keys(Q.schema.transforms[H]).forEach(function(U){var P=Q.schema.transforms[H][U];U=L(J,U);U.set(t(U.get()||{},P))})});return{attributes:p(J)}}function k(){var H={frames:t({},v)};p(H);return H.frames}function p(H){n(H);c(H);f(H);return H}function n(H){C.crawl(H,function(J,O,Q){C.isValObject(J)?"data_array"===J.valType?(J.role="data",Q[O+"src"]={valType:"string",editType:"none"}):!0===J.arrayOk&&(Q[O+"src"]={valType:"string",editType:"none"}):
G(J)&&(J.role="object")})}function c(H){C.crawl(H,function(J,O,Q){if(J){var U=J._isLinkedToArray;U&&(delete J._isLinkedToArray,Q[O]={items:{}},Q[O].items[U]=J,Q[O].role="object")}})}function f(H){function J(O){for(var Q in O)if(G(O[Q]))J(O[Q]);else if(Array.isArray(O[Q]))for(var U=0;U<O[Q].length;U++)J(O[Q][U]);else O[Q]instanceof RegExp&&(O[Q]=O[Q].toString())}J(H)}function d(H,J,O){H=L(H,O);J=t({},J.layoutAttributes);J._isSubplotObj=!0;H.set(J)}var q=b("../registry");F=b("../lib");var r=b("../plots/attributes"),
u=b("../plots/layout_attributes"),v=b("../plots/frame_attributes"),w=b("../plots/animation_attributes"),y=b("./plot_config").configAttributes,D=b("../plots/polar/legacy/area_attributes"),x=b("../plots/polar/legacy/axis_attributes"),E=b("./edit_types"),B=F.extendFlat,t=F.extendDeepAll,G=F.isPlainObject,I=F.isArrayOrTypedArray,L=F.nestedProperty,M=F.valObjectMeta,N=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];C.IS_SUBPLOT_OBJ="_isSubplotObj";C.IS_LINKED_TO_ARRAY="_isLinkedToArray";
C.DEPRECATED="_deprecated";C.UNDERSCORE_ATTRS=N;C.get=function(){var H={};q.allTypes.concat("area").forEach(function(O){H[O]=e(O)});var J={};Object.keys(q.transformsRegistry).forEach(function(O){J[O]=g(O)});return{defs:{valObjects:M,metaKeys:N.concat(["description","role","editType","impliedEdits"]),editType:{traces:E.traces,layout:E.layout},impliedEdits:{}},traces:H,layout:a(),transforms:J,frames:k(),animation:p(w),config:p(y)}};C.crawl=function(H,J,O,Q){var U=O||0;Q=Q||"";Object.keys(H).forEach(function(P){var V=
H[P];if(-1===N.indexOf(P)){var Y=(Q?Q+".":"")+P;J(V,P,H,U,Y);C.isValObject(V)||G(V)&&"impliedEdits"!==P&&C.crawl(V,J,U+1,Y)}})};C.isValObject=function(H){return H&&void 0!==H.valType};C.findArrayAttributes=function(H){function J(ia,fa,ha,na){U=U.slice(0,na).concat([fa]);P=P.slice(0,na).concat([ia&&ia._isLinkedToArray]);!ia||"data_array"!==ia.valType&&!0!==ia.arrayOk||"colorbar"===U[na-1]&&("ticktext"===fa||"tickvals"===fa)||O(V,0,"")}function O(ia,fa,ha){ia=ia[U[fa]];ha+=U[fa];if(fa===U.length-1)I(ia)&&
Q.push(Y+ha);else if(P[fa]){if(Array.isArray(ia))for(var na=0;na<ia.length;na++)G(ia[na])&&O(ia[na],fa+1,ha+"["+na+"].")}else G(ia)&&O(ia,fa+1,ha+".")}var Q=[],U=[],P=[];var V=H;var Y="";C.crawl(r,J);H._module&&H._module.attributes&&C.crawl(H._module.attributes,J);if(H=H.transforms)for(var ba=0;ba<H.length;ba++){var ea=H[ba],ca=ea._module;ca&&(Y="transforms["+ba+"].",V=ea,C.crawl(ca.attributes,J))}return Q};C.getTraceValObject=function(H,J){var O=J[0],Q=1;if("transforms"===O){if(1===J.length)return r.transforms;
O=H.transforms;if(!Array.isArray(O)||!O.length)return!1;Q=J[1];if(!l(Q)||Q>=O.length)return!1;H=(H=(q.transformsRegistry[O[Q].type]||{}).attributes)&&H[J[2]];Q=3}else if("area"===H.type)H=D[O];else{var U=H._module;U||(U=(q.modules[H.type||r.type.dflt]||{})._module);if(!U)return!1;H=(H=U.attributes)&&H[O];H||(U=U.basePlotModule)&&U.attributes&&(H=U.attributes[O]);H||(H=r[O])}return h(H,J,Q)};C.getLayoutValObject=function(H,J){H=m(H,J[0]);return h(H,J,1)}},{"../lib":749,"../plots/animation_attributes":792,
"../plots/attributes":794,"../plots/frame_attributes":826,"../plots/layout_attributes":851,"../plots/polar/legacy/area_attributes":866,"../plots/polar/legacy/axis_attributes":867,"../registry":880,"./edit_types":780,"./plot_config":785}],787:[function(b,F,C){function m(a){"s"!==a.charAt(a.length-1)&&h.warn("bad argument to arrayDefaultKey: "+a);return a.substr(0,a.length-1)+"defaults"}var h=b("../lib"),l=b("../plots/attributes"),e={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",
editType:"calc"}};C.templatedArray=function(a,g){g._isLinkedToArray=a;g.name=e.name;g.templateitemname=e.templateitemname;return g};C.traceTemplater=function(a){var g={},k;for(k in a){var p=a[k];Array.isArray(p)&&p.length&&(g[k]=0)}return{newTrace:function(n){k=h.coerce(n,{},l,"type");n={type:k,_template:null};if(k in g){p=a[k];var c=g[k]%p.length;g[k]++;n._template=p[c]}return n}}};C.newContainer=function(a,g,k){var p=a._template;k=p&&(p[g]||k&&p[k]);h.isPlainObject(k)||(k=null);return a[g]={_template:k}};
C.arrayTemplater=function(a,g,k){var p=(a=a._template)&&a[m(g)],n=a&&a[g];Array.isArray(n)&&n.length||(n=[]);var c={};return{newItem:function(f){var d={name:f.name,_input:f},q=d.templateitemname=f.templateitemname;if(!q||"string"!==typeof q)return d._template=p,d;for(var r=0;r<n.length;r++){var u=n[r];if(u.name===q)return c[q]=1,d._template=u,d}d[k]=f[k]||!1;d._template=!1;return d},defaultItems:function(){for(var f=[],d=0;d<n.length;d++){var q=n[d],r=q.name;if(r&&"string"===typeof r&&!c[r]){var u=
{_template:q,name:r,_input:{_templateitemname:r}};u.templateitemname=q.templateitemname;f.push(u);c[r]=1}}return f}}};C.arrayDefaultKey=m;C.arrayEditor=function(a,g,k){function p(){u={};q&&(u[r]={},u[r].templateitemname=q)}function n(v,w){q?h.nestedProperty(u[r],v).set(w):u[r+"."+v]=w}function c(){var v=u;p();return v}var f=(h.nestedProperty(a,g).get()||[]).length,d=k._index,q=d>=f&&(k._input||{})._templateitemname;q&&(d=f);var r=g+"["+d+"]",u;p();return{modifyBase:function(v,w){u[v]=w},modifyItem:n,
getUpdateObj:c,applyUpdate:function(v,w){v&&n(v,w);v=c();for(var y in v)h.nestedProperty(a,y).set(v[y])}}}},{"../lib":749,"../plots/attributes":794}],788:[function(b,F,C){function m(B,t,G){for(var I=0;I<G.length;I++){var L=G[I][0],M=G[I][1];if(!(L[0]>=B[1]||L[1]<=B[0])&&M[0]<t[1]&&M[1]>t[0])return!0}return!1}function h(B){function t(ua,ka,sa){var ya=ua._lw/2;return"x"===ua._id.charAt(0)?ka?"top"===sa?ka._offset-O-ya:ka._offset+ka._length+O+ya:J.t+J.h*(1-(ua.position||0))+ya%1:ka?"right"===sa?ka._offset+
ka._length+O+ya:ka._offset-O-ya:J.l+J.w*(ua.position||0)+ya%1}function G(ua){return"M"+pa+","+ua+"H"+ra}function I(ua){return"M"+ha._offset+","+ua+"h"+ha._length}function L(ua){return"M"+ua+","+oa+"V"+ta}function M(ua){return"M"+ua+","+na._offset+"v"+na._length}function N(ua,ka,sa){if(!ua.showline||P!==ua._mainSubplot)return"";if(!ua._anchorAxis)return sa(ua._mainLinePosition);sa=ka(ua._mainLinePosition);ua.mirror&&(sa+=ka(ua._mainMirrorPosition));return sa}var H=B._fullLayout,J=H._size,O=J.p,Q=w.list(B,
"",!0),U,P;H._paperdiv.style({width:B._context.responsive&&H.autosize&&!B._context._hasZeroWidth&&!B.layout.width?"100%":H.width+"px",height:B._context.responsive&&H.autosize&&!B._context._hasZeroHeight&&!B.layout.height?"100%":H.height+"px"}).selectAll(".main-svg").call(r.setSize,H.width,H.height);B._context.setBackground(B,H.paper_bgcolor);C.drawMainTitle(B);v.manage(B);if(!H._has("cartesian"))return c.previousPromises(B);for(U=0;U<Q.length;U++){var V=Q[U];var Y=V._anchorAxis;V._linepositions={};
V._lw=r.crispRound(B,V.linewidth,1);V._mainLinePosition=t(V,Y,V.side);V._mainMirrorPosition=V.mirror&&Y?t(V,Y,y.OPPOSITE_SIDE[V.side]):null}U=[];Y=[];var ba=[],ea=1===q.opacity(H.paper_bgcolor)&&1===q.opacity(H.plot_bgcolor)&&H.paper_bgcolor===H.plot_bgcolor;for(P in H._plots)if(V=H._plots[P],V.mainplot)V.bg&&V.bg.remove(),V.bg=void 0;else{var ca=V.xaxis.domain,ia=V.yaxis.domain,fa=V.plotgroup;m(ca,ia,ba)?(ca=fa.node(),V=V.bg=f.ensureSingle(fa,"rect","bg"),ca.insertBefore(V.node(),ca.childNodes[0]),
Y.push(P)):(fa.select("rect.bg").remove(),ba.push([ca,ia]),ea||(U.push(P),Y.push(P)))}V=H._bgLayer.selectAll(".bg").data(U);V.enter().append("rect").classed("bg",!0);V.exit().remove();V.each(function(ua){H._plots[ua].bg=p.select(this)});for(U=0;U<Y.length;U++){V=H._plots[Y[U]];var ha=V.xaxis;var na=V.yaxis;V.bg&&V.bg.call(r.setRect,ha._offset-O,na._offset-O,ha._length+2*O,na._length+2*O).call(q.fill,H.plot_bgcolor).style("stroke-width",0)}if(!H._hasOnlyLargeSploms)for(P in H._plots)V=H._plots[P],
ha=V.xaxis,na=V.yaxis,Y=V.clipId="clip"+H._uid+P+"plot",U=f.ensureSingleById(H._clips,"clipPath",Y,function(ua){ua.classed("plotclip",!0).append("rect")}),V.clipRect=U.select("rect").attr({width:ha._length,height:na._length}),r.setTranslate(V.plot,ha._offset,na._offset),V._hasClipOnAxisFalse?U=null:(U=Y,Y=null),r.setClipUrl(V.plot,U,B),V.layerClipId=Y;for(P in H._plots){V=H._plots[P];ha=V.xaxis;na=V.yaxis;ea="M0,0";if(l(ha,P)){Y=a(ha,"left",na,Q);var pa=ha._offset-(Y?O+Y:0);Y=a(ha,"right",na,Q);var ra=
ha._offset+ha._length+(Y?O+Y:0);U=t(ha,na,"bottom");ba=t(ha,na,"top");Y=!ha._anchorAxis||P!==ha._mainSubplot;!Y||"allticks"!==ha.mirror&&"all"!==ha.mirror||(ha._linepositions[P]=[U,ba]);ea=N(ha,G,I);Y&&ha.showline&&("all"===ha.mirror||"allticks"===ha.mirror)&&(ea+=G(U)+G(ba));V.xlines.style("stroke-width",ha._lw+"px").call(q.stroke,ha.showline?ha.linecolor:"rgba(0,0,0,0)")}V.xlines.attr("d",ea);ea="M0,0";if(l(na,P)){Y=a(na,"bottom",ha,Q);var ta=na._offset+na._length+(Y?O:0);Y=a(na,"top",ha,Q);var oa=
na._offset-(Y?O:0);U=t(na,ha,"left");ba=t(na,ha,"right");Y=!na._anchorAxis||P!==na._mainSubplot;!Y||"allticks"!==na.mirror&&"all"!==na.mirror||(na._linepositions[P]=[U,ba]);ea=N(na,L,M);Y&&na.showline&&("all"===na.mirror||"allticks"===na.mirror)&&(ea+=L(U)+L(ba));V.ylines.style("stroke-width",na._lw+"px").call(q.stroke,na.showline?na.linecolor:"rgba(0,0,0,0)")}V.ylines.attr("d",ea)}w.makeClipPaths(B);return c.previousPromises(B)}function l(B,t){return(B.ticks||B.showline)&&(t===B._mainSubplot||"all"===
B.mirror||"allticks"===B.mirror)}function e(B,t,G){if(!G.showline||!G._lw)return!1;if("all"===G.mirror||"allticks"===G.mirror)return!0;var I=G._anchorAxis;if(!I)return!1;var L=y.FROM_BL[t];return G.side===t?I.domain[L]===B.domain[L]:G.mirror&&I.domain[1-L]===B.domain[1-L]}function a(B,t,G,I){if(e(B,t,G))return G._lw;for(var L=0;L<I.length;L++){var M=I[L];if(M._mainAxis===G._mainAxis&&e(B,t,M))return M._lw}return 0}function g(B,t){var G=B.title,I=B._size,L=0;"start"===t?L=G.pad.l:"end"===t&&(L=-G.pad.r);
switch(G.xref){case "paper":return I.l+I.w*G.x+L;default:return B.width*G.x+L}}function k(B,t){var G=B.title,I=B._size,L=0;"0em"!==t&&t?t===y.CAP_SHIFT+"em"&&(L=G.pad.t):L=-G.pad.b;if("auto"===G.y)return I.t/2;switch(G.yref){case "paper":return I.t+I.h-I.h*G.y+L;default:return B.height-B.height*G.y+L}}var p=b("d3"),n=b("../registry"),c=b("../plots/plots"),f=b("../lib"),d=b("../lib/clear_gl_canvases"),q=b("../components/color"),r=b("../components/drawing"),u=b("../components/titles"),v=b("../components/modebar"),
w=b("../plots/cartesian/axes"),y=b("../constants/alignment");F=b("../plots/cartesian/constraints");var D=F.enforce,x=F.clean,E=b("../plots/cartesian/autorange").doAutoRange;C.layoutStyles=function(B){return f.syncOrAsync([c.doAutoMargin,h],B)};C.drawMainTitle=function(B){var t=B._fullLayout;var G=t.title;var I="middle";f.isRightAnchor(G)?I="end":f.isLeftAnchor(G)&&(I="start");G=I;I=t.title;var L="0em";f.isTopAnchor(I)?L=y.CAP_SHIFT+"em":f.isMiddleAnchor(I)&&(L=y.MID_SHIFT+"em");I=L;u.draw(B,"gtitle",
{propContainer:t,propName:"title.text",placeholder:t._dfltTitle.plot,attributes:{x:g(t,G),y:k(t,I),"text-anchor":G,dy:I}})};C.doTraceStyle=function(B){var t=B.calcdata,G=[],I;for(I=0;I<t.length;I++){var L=t[I],M=L[0]||{},N=M.trace||{},H=N._module||{},J=H.arraysToCalcdata;J&&J(L,N);(L=H.editStyle)&&G.push({fn:L,cd0:M})}if(G.length){for(I=0;I<G.length;I++)t=G[I],t.fn(B,t.cd0);d(B);C.redrawReglTraces(B)}c.style(B);n.getComponentMethod("legend","draw")(B);return c.previousPromises(B)};C.doColorBars=function(B){n.getComponentMethod("colorbar",
"draw")(B);return c.previousPromises(B)};C.layoutReplot=function(B){var t=B.layout;B.layout=void 0;return n.call("plot",B,"",t)};C.doLegend=function(B){n.getComponentMethod("legend","draw")(B);return c.previousPromises(B)};C.doTicksRelayout=function(B){w.draw(B,"redraw");B._fullLayout._hasOnlyLargeSploms&&(n.subplotsRegistry.splom.updateGrid(B),d(B),C.redrawReglTraces(B));C.drawMainTitle(B);return c.previousPromises(B)};C.doModeBar=function(B){var t=B._fullLayout;v.manage(B);for(var G=0;G<t._basePlotModules.length;G++){var I=
t._basePlotModules[G].updateFx;I&&I(B)}return c.previousPromises(B)};C.doCamera=function(B){B=B._fullLayout;for(var t=B._subplots.gl3d,G=0;G<t.length;G++){var I=B[t[G]];I._scene.setViewport(I)}};C.drawData=function(B){var t=B._fullLayout;d(B);for(var G=t._basePlotModules,I=0;I<G.length;I++)G[I].plot(B);C.redrawReglTraces(B);c.style(B);n.getComponentMethod("shapes","draw")(B);n.getComponentMethod("annotations","draw")(B);n.getComponentMethod("images","draw")(B);t._replotting=!1;return c.previousPromises(B)};
C.redrawReglTraces=function(B){var t=B._fullLayout;if(t._has("regl")){var G=B._fullData;B=[];var I=[],L;t._hasOnlyLargeSploms&&t._splomGrid.draw();for(L=0;L<G.length;L++){var M=G[L];!0===M.visible&&0!==M._length&&("splom"===M.type?t._splomScenes[M.uid].draw():"scattergl"===M.type?f.pushUnique(B,M.xaxis+M.yaxis):"scatterpolargl"===M.type&&f.pushUnique(I,M.subplot))}for(L=0;L<B.length;L++)G=t._plots[B[L]],G._scene&&G._scene.draw();for(L=0;L<I.length;L++)G=t[I[L]]._subplot,G._scene&&G._scene.draw()}};
C.doAutoRangeAndConstraints=function(B){var t=B._fullLayout,G=w.list(B,"",!0);t=t._axisMatchGroups||[];for(var I={},L,M=0;M<G.length;M++)L=G[M],x(B,L),E(B,L),I[L._id]=1;D(B);G=0;a:for(;G<t.length;G++){M=t[G];var N=null,H;for(H in M)if(L=w.getFromId(B,H),I[L._id]){if(!1===L.autorange)continue a;L=f.simpleMap(L.range,L.r2l);N?N[0]<N[1]?(N[0]=Math.min(N[0],L[0]),N[1]=Math.max(N[1],L[1])):(N[0]=Math.max(N[0],L[0]),N[1]=Math.min(N[1],L[1])):N=L}for(H in M)L=w.getFromId(B,H),L.range=f.simpleMap(N,L.l2r),
L._input.range=L.range.slice(),L.setScale()}};C.finalDraw=function(B){n.getComponentMethod("rangeslider","draw")(B);n.getComponentMethod("rangeselector","draw")(B)};C.drawMarginPushers=function(B){n.getComponentMethod("legend","draw")(B);n.getComponentMethod("rangeselector","draw")(B);n.getComponentMethod("sliders","draw")(B);n.getComponentMethod("updatemenus","draw")(B);n.getComponentMethod("colorbar","draw")(B)}},{"../components/color":615,"../components/drawing":637,"../components/modebar":675,
"../components/titles":710,"../constants/alignment":717,"../lib":749,"../lib/clear_gl_canvases":733,"../plots/cartesian/autorange":796,"../plots/cartesian/axes":797,"../plots/cartesian/constraints":804,"../plots/plots":860,"../registry":880,d3:169}],789:[function(b,F,C){function m(u,v){function w(I,L,M){if(n(L)&&n(I))m(I,L);else if(Array.isArray(L)&&Array.isArray(I)){I=q.arrayTemplater({_template:u},M);for(x=0;x<L.length;x++){M=L[x];var N=I.newItem(M)._template;N&&m(N,M)}I=I.defaultItems();for(x=
0;x<I.length;x++)L.push(I[x]._template);for(x=0;x<L.length;x++)delete L[x].templateitemname}}u=p.extendDeep({},u);var y=Object.keys(u).sort(),D,x;for(D=0;D<y.length;D++){var E=y[D],B=u[E];E in v?w(B,v[E],E):v[E]=B;if(h(E)===E)for(var t in v){var G=h(t);t===G||G!==E||t in u||w(B,v[t],E)}}}function h(u){return u.replace(/[0-9]+$/,"")}function l(u,v,w,y,D){var x=D&&w(D),E;for(E in u){var B=u[E],t=g(u,E,y),G=g(u,E,D),I=w(G);if(!I){var L=h(E);L!==E&&(G=g(u,L,D),I=w(G))}if(!(x&&x===I||!I||I._noTemplating||
"data_array"===I.valType||I.arrayOk&&Array.isArray(B)))if(!I.valType&&n(B))l(B,v,w,t,G);else if(I._isLinkedToArray&&Array.isArray(B)){var M=!1;I=0;L={};for(var N=0;N<B.length;N++){var H=B[N];if(n(H)){var J=H.name;J?L[J]||(l(H,v,w,g(B,I,t),g(B,I,G)),I++,L[J]=1):M||(M=q.arrayDefaultKey(E),M=g(u,M,y),J=g(B,I,t),l(H,v,w,J,g(B,I,G)),H=p.nestedProperty(v,J),p.nestedProperty(v,M).set(H.get()),H.set(null),M=!0)}}}else p.nestedProperty(v,t).set(B)}}function e(u,v){return c.getLayoutValObject(u,p.nestedProperty({},
v).parts)}function a(u,v){return c.getTraceValObject(u,p.nestedProperty({},v).parts)}function g(u,v,w){return w?Array.isArray(u)?w+"["+v+"]":w+"."+v:v}function k(u){switch(u.code){case "data":var v="The template has no key data.";break;case "layout":v="The template has no key layout.";break;case "missing":v=u.path?"There are no templates for item "+u.path+" with name "+u.templateitemname:"There are no templates for trace "+u.index+", of type "+u.traceType+".";break;case "unused":v=u.path?"The template item at "+
u.path+" was not used in constructing the plot.":u.dataCount?"Some of the templates of type "+u.traceType+" were not used. The template has "+u.templateCount+" traces, the data only has "+u.dataCount+" of this type.":"The template has "+u.templateCount+" traces of type "+u.traceType+" but there are none in the data.";break;case "reused":v="Some of the templates of type "+u.traceType+" were used more than once. The template has "+u.templateCount+" traces, the data has "+u.dataCount+" of this type."}u.msg=
v;return u}var p=b("../lib"),n=p.isPlainObject,c=b("./plot_schema"),f=b("../plots/plots"),d=b("../plots/attributes"),q=b("./plot_template"),r=b("./plot_config").dfltConfig;C.makeTemplate=function(u){u=p.isPlainObject(u)?u:p.getGraphDiv(u);u=p.extendDeep({_context:r},{data:u.data,layout:u.layout});f.supplyDefaults(u);var v=u.data||[],w=u.layout||{};w._basePlotModules=u._fullLayout._basePlotModules;w._modules=u._fullLayout._modules;var y={data:{},layout:{}};v.forEach(function(t){var G={};l(t,G,a.bind(null,
t));t=p.coerce(t,{},d,"type");var I=y.data[t];I||(I=y.data[t]=[]);I.push(G)});l(w,y.layout,e.bind(null,w));delete y.layout.template;u=w.template;if(n(u)){v=u.layout;var D;n(v)&&m(v,y.layout);var x=u.data;if(n(x)){for(D in y.data)if(v=x[D],Array.isArray(v)){var E=y.data[D];var B=E.length;w=v.length;for(u=0;u<B;u++)m(v[u%w],E[u]);for(u=B;u<w;u++)E.push(p.extendDeep({},v[u]))}for(D in x)D in y.data||(y.data[D]=p.extendDeep([],x[D]))}}return y};C.validateTemplate=function(u,v){function w(M,N){for(var H in M)if("_"!==
H.charAt(0)&&n(M[H])){var J=h(H),O=[],Q;for(Q=0;Q<N.length;Q++)O.push(g(M,H,N[Q])),J!==H&&O.push(g(M,J,N[Q]));for(Q=0;Q<O.length;Q++)G[O[Q]]=1;w(M[H],O)}}function y(M,N){for(var H in M)if(-1===H.indexOf("defaults")&&n(M[H])){var J=g(M,H,N);G[J]?y(M[H],J):t.push({code:"unused",path:J})}}function D(M,N){for(var H in M)if("_"!==H.charAt(0)){var J=M[H],O=g(M,H,N);if(n(J))Array.isArray(M)&&!1===J._template&&J.templateitemname&&t.push({code:"missing",path:O,templateitemname:J.templateitemname}),D(J,O);
else{var Q;if(Q=Array.isArray(J))a:{Q=J;for(var U=0;U<Q.length;U++)if(n(Q[U])){Q=!0;break a}Q=void 0}Q&&D(J,O)}}}var x=p.extendDeep({},{_context:r,data:u.data,layout:u.layout}),E=x.layout||{};n(v)||(v=E.template||{});var B=v.layout;u=v.data;var t=[];x.layout=E;x.layout.template=v;f.supplyDefaults(x);v=x._fullLayout;x=x._fullData;var G={};n(B)?(w(v,["layout"]),y(B,"layout")):t.push({code:"layout"});if(n(u)){B={};for(E=0;E<x.length;E++){var I=x[E];var L=I.type;B[L]=(B[L]||0)+1;I._fullInput._template||
t.push({code:"missing",index:I._fullInput.index,traceType:L})}for(L in u)E=u[L].length,I=B[L]||0,E>I?t.push({code:"unused",traceType:L,templateCount:E,dataCount:I}):I>E&&t.push({code:"reused",traceType:L,templateCount:E,dataCount:I})}else t.push({code:"data"});D({data:x,layout:v},"");if(t.length)return t.map(k)}},{"../lib":749,"../plots/attributes":794,"../plots/plots":860,"./plot_config":785,"./plot_schema":786,"./plot_template":787}],790:[function(b,F,C){var m=b("fast-isnumeric"),h=b("./plot_api"),
l=b("../plots/plots"),e=b("../lib"),a=b("../snapshot/helpers"),g=b("../snapshot/tosvg"),k=b("../snapshot/svgtoimg"),p=b("../version").version,n={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};F.exports=function(c,f){function d(J){return!(J in f)||e.validate(f[J],n[J])}function q(J,
O){return e.coerce(f,D,n,J,O)}function r(){return new Promise(function(J){setTimeout(J,a.getDelay(L._fullLayout))})}function u(){return new Promise(function(J,O){var Q=g(L,x,t),U=L._fullLayout.width,P=L._fullLayout.height;if("full-json"===x)return O=l.graphJson(L,!1,"keepdata","object",!0,!0),O.version=p,O=JSON.stringify(O),h.purge(L),document.body.removeChild(L),I?J(O):J(a.encodeJSON(O));h.purge(L);document.body.removeChild(L);if("svg"===x)return I?J(Q):J(a.encodeSVG(Q));var V=document.createElement("canvas");
V.id=e.randstr();k({format:x,width:U,height:P,scale:t,canvas:V,svg:Q,promise:!0}).then(J).catch(O)})}f=f||{};if(e.isPlainObject(c)){var v=c.data||[];var w=c.layout||{};var y=c.config||{};c={}}else c=e.getGraphDiv(c),v=e.extendDeep([],c.data),w=e.extendDeep({},c.layout),y=c._context,c=c._fullLayout||{};if(!d("width")&&null!==f.width||!d("height")&&null!==f.height)throw Error("Height and width should be pixel values.");if(!d("format"))throw Error("Image format is not jpeg, png, svg or webp.");var D=
{},x=q("format"),E=q("width"),B=q("height"),t=q("scale"),G=q("setBackground"),I=q("imageDataOnly"),L=document.createElement("div");L.style.position="absolute";L.style.left="-5000px";document.body.appendChild(L);var M=e.extendFlat({},w);E?M.width=E:null===f.width&&m(c.width)&&(M.width=c.width);B?M.height=B:null===f.height&&m(c.height)&&(M.height=c.height);var N=e.extendFlat({},y,{_exportedPlot:!0,staticPlot:!0,setBackground:G}),H=a.getRedrawFunc(L);return new Promise(function(J,O){h.plot(L,v,M,N).then(H).then(r).then(u).then(function(Q){Q=
I?Q.replace(a.IMAGE_URL_PREFIX,""):Q;J(Q)}).catch(function(Q){O(Q)})})}},{"../lib":749,"../plots/plots":860,"../snapshot/helpers":884,"../snapshot/svgtoimg":886,"../snapshot/tosvg":888,"../version":1337,"./plot_api":784,"fast-isnumeric":241}],791:[function(b,F,C){function m(r,u,v,w,y,D){D=D||[];for(var x=Object.keys(r),E=0;E<x.length;E++){var B=x[E];if("transforms"!==B){var t=D.slice();t.push(B);var G=r[B],I=u[B];var L=v;if(B in L)var M=L[B];else M=e(B),M=L[M.keyMinusId];var N=(M||{}).valType,H="info_array"===
N,J="colorscale"===N;L=(M||{}).items;var O=v;var Q=B,U=e(Q),P=U.keyMinusId;U=U.id;O=P in O&&O[P]._isSubplotObj&&U?!0:Q in O;if(O)if(n(G)&&n(I)&&"any"!==N)m(G,I,M,w,y,t);else if(H&&c(G))if(G.length>I.length&&w.push(l("unused",y,t.concat(I.length))),B=I.length,(N=Array.isArray(L))&&(B=Math.min(B,L.length)),2===M.dimensions)for(H=0;H<B;H++)if(c(G[H]))for(G[H].length>I[H].length&&w.push(l("unused",y,t.concat(H,I[H].length))),P=I[H].length,M=0;M<(N?Math.min(P,L[H].length):P);M++)J=N?L[H][M]:L,O=G[H][M],
Q=I[H][M],a.validate(O,J)?Q!==O&&Q!==+O&&w.push(l("dynamic",y,t.concat(H,M),O,Q)):w.push(l("value",y,t.concat(H,M),O));else w.push(l("array",y,t.concat(H),G[H]));else for(H=0;H<B;H++)J=N?L[H]:L,O=G[H],Q=I[H],a.validate(O,J)?Q!==O&&Q!==+O&&w.push(l("dynamic",y,t.concat(H),O,Q)):w.push(l("value",y,t.concat(H),O));else if(M.items&&!H&&c(G)){L=L[Object.keys(L)[0]];B=[];for(M=0;M<I.length;M++)H=I[M]._index||M,N=t.slice(),N.push(H),n(G[H])&&n(I[M])&&(B.push(H),H=G[H],J=I[M],n(H)&&!1!==H.visible&&!1===J.visible?
w.push(l("invisible",y,N)):m(H,J,L,w,y,N));for(M=0;M<G.length;M++)N=t.slice(),N.push(M),n(G[M])?-1===B.indexOf(M)&&w.push(l("unused",y,N)):w.push(l("object",y,N,G[M]))}else!n(G)&&n(I)?w.push(l("object",y,t,G)):f(G)||!f(I)||H||J?B in u?a.validate(G,M)?"enumerated"===M.valType&&(M.coerceNumber&&G!==+I||G!==I)&&w.push(l("dynamic",y,t,G,I)):w.push(l("value",y,t,G)):w.push(l("unused",y,t,G)):w.push(l("array",y,t,G));else w.push(l("schema",y,t))}}return w}function h(r){return c(r)?"In data trace "+r[1]+
", ":"In "+r+", "}function l(r,u,v,w,y){v=v||"";if(c(u)){var D=u[0];var x=u[1]}else D=u,x=null;var E=v;if(c(E)){for(var B="",t=0;t<E.length;t++){var G=E[t];B="number"===typeof G?B.substr(0,B.length-1)+"["+G+"]":B+G;t<E.length-1&&(B+=".")}E=B}else E=String(E);u=d[r](u,E,w,y);a.log(u);return{code:r,container:D,trace:x,path:v,astr:E,msg:u}}function e(r){r=r.match(q);return{keyMinusId:r&&r[1],id:r&&r[2]}}var a=b("../lib"),g=b("../plots/plots"),k=b("./plot_schema"),p=b("./plot_config").dfltConfig,n=a.isPlainObject,
c=Array.isArray,f=a.isArrayOrTypedArray;F.exports=function(r,u){void 0===r&&(r=[]);void 0===u&&(u={});var v=k.get(),w=[],y={_context:a.extendFlat({},p)};if(c(r)){y.data=a.extendDeep([],r);var D=r}else y.data=[],D=[],w.push(l("array","data"));if(n(u)){y.layout=a.extendDeep({},u);var x=u}else y.layout={},x={},1<arguments.length&&w.push(l("object","layout"));g.supplyDefaults(y);for(var E=y._fullData,B=D.length,t=0;t<B;t++){var G=D[t],I=["data",t];if(n(G)){var L=E[t],M=L.type,N=v.traces[M].attributes;
N.type={valType:"enumerated",values:[M]};!1===L.visible&&!1!==G.visible&&w.push(l("invisible",I));m(G,L,N,w,I);G=G.transforms;L=L.transforms;if(G)for(c(G)||w.push(l("array",I,["transforms"])),I.push("transforms"),M=0;M<G.length;M++){N=["transforms",M];var H=G[M].type;n(G[M])?(H=v.transforms[H]?v.transforms[H].attributes:{},H.type={valType:"enumerated",values:Object.keys(v.transforms)},m(G[M],L[M],H,w,I,N)):w.push(l("object",I,N))}}else w.push(l("object",I))}y=y._fullLayout;D=v.layout.layoutAttributes;
for(B=0;B<E.length;B++)t=E[B],I=v.traces[t.type],(G=I.layoutAttributes)&&(t.subplot?a.extendFlat(D[I.attributes.subplot.dflt],G):a.extendFlat(D,G));m(x,y,D,w,"layout");return 0===w.length?void 0:w};var d={object:function(r,u){return("layout"===r&&""===u?"The layout argument":"data"===r[0]&&""===u?"Trace "+r[1]+" in the data argument":h(r)+"key "+u)+" must be linked to an object container"},array:function(r,u){return("data"===r?"The data argument":h(r)+"key "+u)+" must be linked to an array container"},
schema:function(r,u){return h(r)+"key "+u+" is not part of the schema"},unused:function(r,u,v){v=n(v)?"container":"key";return h(r)+v+" "+u+" did not get coerced"},dynamic:function(r,u,v,w){return[h(r)+"key",u,"(set to '"+v+"')","got reset to","'"+w+"'","during defaults."].join(" ")},invisible:function(r,u){return(u?h(r)+"item "+u:"Trace "+r[1])+" got defaulted to be not visible"},value:function(r,u,v){return[h(r)+"key "+u,"is set to an invalid value ("+v+")"].join(" ")}},q=a.counterRegex("([a-z]+)")},
{"../lib":749,"../plots/plots":860,"./plot_config":785,"./plot_schema":786}],792:[function(b,F,C){F.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",
values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],793:[function(b,
F,C){var m=b("../lib"),h=b("../plot_api/plot_template");F.exports=function(l,e,a){var g=a.name,k=a.inclusionAttr||"visible",p=e[g],n=m.isArrayOrTypedArray(l[g])?l[g]:[];l=e[g]=[];var c=h.arrayTemplater(e,g,k);for(g=0;g<n.length;g++){var f=n[g];if(m.isPlainObject(f))var d=c.newItem(f);else d=c.newItem({}),d[k]=!1;d._index=g;!1!==d[k]&&a.handleItemDefaults(f,d,e,a);l.push(d)}k=c.defaultItems();for(g=0;g<k.length;g++)d=k[g],d._index=l.length,a.handleItemDefaults({},d,e,a,{}),l.push(d);if(m.isArrayOrTypedArray(p))for(e=
Math.min(p.length,l.length),g=0;g<e;g++)m.relinkPrivateKeys(l[g],p[g]);return l}},{"../lib":749,"../plot_api/plot_template":787}],794:[function(b,F,C){b=b("../components/fx/attributes");F.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",
min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:b.hoverlabel,stream:{token:{valType:"string",
noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":646}],795:[function(b,F,C){F.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],796:[function(b,F,C){function m(d,q){function r(P,V){return Math.max(P,
y(V))}var u,v,w=[],y=h(q);w=l(d,q);var D=w.min,x=w.max;if(0===D.length||0===x.length)return n.simpleMap(q.range,q.r2l);w=D[0].val;var E=x[0].val;for(u=1;u<D.length&&w===E;u++)w=Math.min(w,D[u].val);for(u=1;u<x.length&&w===E;u++)E=Math.max(E,x[u].val);d=!1;q.range&&(d=n.simpleMap(q.range,q.r2l),d=d[1]<d[0]);"reversed"===q.autorange&&(d=!0,q.autorange=!0);var B=q.rangemode,t="tozero"===B,G="nonnegative"===B;B=q._length;var I=B/10,L=function(P,V){var Y=0;if(q.rangebreaks)for(P=q.locateBreaks(P,V),V=
0;V<P.length;V++){var ba=P[V];Y+=ba.max-ba.min}return Y},M=0;for(u=0;u<D.length;u++){var N=D[u];for(v=0;v<x.length;v++){var H=x[v];var J=H.val-N.val-L(N.val,H.val);if(0<J){var O=B-y(N)-y(H);if(O>I){if(J/O>M){var Q=N;var U=H;M=J/O}}else J/B>M&&(Q={val:N.val,pad:0},U={val:H.val,pad:0},M=J/B)}}}w===E?(N=w-1,H=w+1,t?0===w?w=[0,1]:(D=(0<w?x:D).reduce(r,0),D=w/(1-Math.min(.5,D/B)),w=0<w?[0,D]:[D,0]):w=G?[Math.max(0,N),Math.max(1,H)]:[N,H]):(t?(0<=Q.val&&(Q={val:0,pad:0}),0>=U.val&&(U={val:0,pad:0})):G&&
(0>Q.val-M*y(Q)&&(Q={val:0,pad:0}),0>=U.val&&(U={val:1,pad:0})),M=(U.val-Q.val-L(N.val,H.val))/(B-y(Q)-y(U)),w=[Q.val-M*y(Q),U.val+M*y(U)]);d&&w.reverse();return n.simpleMap(w,q.l2r||Number)}function h(d){var q=d._length/20;"domain"===d.constrain&&d._inputDomain&&(q*=(d._inputDomain[1]-d._inputDomain[0])/(d.domain[1]-d.domain[0]));return function(r){return r.pad+(r.extrapad?q:0)}}function l(d,q){function r(B,t){for(D=0;D<t.length;D++){var G=B[t[D]],I=(G._extremes||{})[u];if(!0===G.visible&&I){for(x=
0;x<I.min.length;x++)E=I.min[x],e(w,E.val,E.pad,{extrapad:E.extrapad},g);for(x=0;x<I.max.length;x++)E=I.max[x],e(y,E.val,E.pad,{extrapad:E.extrapad},k)}}}var u=q._id,v=d._fullLayout,w=[],y=[],D,x,E;r(d._fullData,q._traceIndices);r(v.annotations||[],q._annIndices||[]);r(v.shapes||[],q._shapeIndices||[]);return{min:w,max:y}}function e(d,q,r,u,v){var w=u.tozero;u=u.extrapad;for(var y=!0,D=0;D<d.length&&y;D++){var x=d[D];if(v(x.val,q)&&x.pad>=r&&(x.extrapad||!u)){y=!1;break}else v(q,x.val)&&x.pad<=r&&
(u||!x.extrapad)&&(d.splice(D,1),D--)}y&&(v=w&&0===q,d.push({val:q,pad:v?0:r,extrapad:v?!1:u}))}function a(d){return p(d)&&Math.abs(d)<c}function g(d,q){return d<=q}function k(d,q){return d>=q}var p=b("fast-isnumeric"),n=b("../../lib"),c=b("../../constants/numerical").FP_SAFE,f=b("../../registry");F.exports={getAutoRange:m,makePadFn:h,doAutoRange:function(d,q){q.setScale();if(q.autorange){q.range=m(d,q);q._r=q.range.slice();q._rl=n.simpleMap(q._r,q.r2l);var r=q._input,u={};u[q._attr+".range"]=q.range;
u[q._attr+".autorange"]=q.autorange;f.call("_storeDirectGUIEdit",d.layout,d._fullLayout._preGUI,u);r.range=q.range.slice();r.autorange=q.autorange}(r=q._anchorAxis)&&r.rangeslider&&((u=r.rangeslider[q._name])&&"auto"===u.rangemode&&(u.range=m(d,q)),r._input.rangeslider[q._name]=n.extendFlat({},u))},findExtremes:function(d,q,r){function u(ca){if(Array.isArray(ca))return t=!0,function(fa){return Math.max(Number(ca[fa]||0),0)};var ia=Math.max(Number(ca||0),0);return function(){return ia}}function v(ca){L=
q[ca];p(L)&&(H=O(ca),J=Q(ca),G?(M=d.c2l(L)-P(ca),N=d.c2l(L)+U(ca)):(V=L-P(ca),Y=L+U(ca),B&&V<Y/10&&(V=Y/10),M=d.c2l(V),N=d.c2l(Y)),E&&(M=Math.min(0,M),N=Math.max(0,N)),a(M)&&e(w,M,J,ea,g),a(N)&&e(y,N,H,ea,k))}r||(r={});d._m||d.setScale();var w=[],y=[],D=q.length,x=r.padded||!1,E=r.tozero&&("linear"===d.type||"-"===d.type),B="log"===d.type,t=!1,G=r.vpadLinearized||!1,I,L,M,N,H,J,O=u((0<d._m?r.ppadplus:r.ppadminus)||r.ppad||0),Q=u((0<d._m?r.ppadminus:r.ppadplus)||r.ppad||0),U=u(r.vpadplus||r.vpad),
P=u(r.vpadminus||r.vpad);if(!t){var V=Infinity;var Y=-Infinity;if(B)for(I=0;I<D;I++){var ba=q[I];ba<V&&0<ba&&(V=ba);ba>Y&&ba<c&&(Y=ba)}else for(I=0;I<D;I++)ba=q[I],ba<V&&ba>-c&&(V=ba),ba>Y&&ba<c&&(Y=ba);q=[V,Y];D=2}var ea={tozero:E,extrapad:x};x=Math.min(6,D);for(I=0;I<x;I++)v(I);for(I=D-1;I>=x;I--)v(I);return{min:w,max:y,opts:r}},concatExtremes:l}},{"../../constants/numerical":724,"../../lib":749,"../../registry":880,"fast-isnumeric":241}],797:[function(b,F,C){function m(Da){var Ha=1E-4*(Da[1]-Da[0]);
return[Da[0]-Ha,Da[1]+Ha]}function h(Da){return+Da}function l(Da){return String(Da)}function e(Da,Ha,ab,ib,ob){function db(tc){return 2>(1+100*(tc-Da)/ab.dtick)%100}for(var gb=0,rb=0,Bb=0,Qb=0,gc=0;gc<Ha.length;gc++)0===Ha[gc]%1?Bb++:J(Ha[gc])||Qb++,db(Ha[gc])&&gb++,db(Ha[gc]+ab.dtick/2)&&rb++;Ha=Ha.length-Qb;Bb===Ha&&"date"!==ab.type?1>ab.dtick?Da=ib-.5*ab.dtick:(Da-=.5,Da+ab.dtick<ib&&(Da+=ab.dtick)):rb<.1*Ha&&(gb>.3*Ha||db(ib)||db(ob))&&(ob=ab.dtick/2,Da+=Da+ob<ib?ob:-ob);return Da}function a(Da){var Ha=
Da.tickvals,ab=Da.ticktext,ib=Array(Ha.length),ob=U.simpleMap(Da.range,Da.r2l),db=m(ob);ob=Math.min(db[0],db[1]);db=Math.max(db[0],db[1]);var gb=0;Array.isArray(ab)||(ab=[]);var rb="category"===Da.type?Da.d2l_noadd:Da.d2l;"log"===Da.type&&"L"!==String(Da.dtick).charAt(0)&&(Da.dtick="L"+Math.pow(10,Math.floor(Math.min(Da.range[0],Da.range[1]))-1));for(var Bb=0;Bb<Ha.length;Bb++){var Qb=rb(Ha[Bb]);Qb>ob&&Qb<db&&(ib[gb]=void 0===ab[Bb]?Qa.tickText(Da,Qb):p(Da,Qb,String(ab[Bb])),gb++)}gb<Ha.length&&ib.splice(gb,
Ha.length-gb);Da.rangebreaks&&(ib=ib.filter(function(gc){return Da.maskBreaks(gc.x)!==eb}));return ib}function g(Da,Ha,ab){return Ha*U.roundUp(Da/Ha,ab)}function k(Da){var Ha=Da.dtick;Da._tickexponent=0;J(Ha)||"string"===typeof Ha||(Ha=1);if("category"===Da.type||"multicategory"===Da.type)Da._tickround=null;if("date"===Da.type){var ab=Da.r2l(Da.tick0),ib=Da.l2r(ab).replace(/(^-|i)/g,""),ob=ib.length;"M"===String(Ha).charAt(0)?10<ob||"01-01"!==ib.substr(5)?Da._tickround="d":Da._tickround=0===+Ha.substr(1)%
12?"y":"m":Ha>=sa&&10>=ob||Ha>=15*sa?Da._tickround="d":Ha>=xa&&16>=ob||Ha>=qa?Da._tickround="M":Ha>=Ca&&19>=ob||Ha>=xa?Da._tickround="S":(Ha=Da.l2r(ab+Ha).replace(/^-/,"").length,Da._tickround=Math.max(ob,Ha)-20,0>Da._tickround&&(Da._tickround=4))}else J(Ha)||"L"===Ha.charAt(0)?(ob=Da.range.map(Da.r2d||Number),J(Ha)||(Ha=Number(Ha.substr(1))),Da._tickround=2-Math.floor(Math.log(Ha)/Math.LN10+.01),Ha=Math.floor(Math.log(Math.max(Math.abs(ob[0]),Math.abs(ob[1])))/Math.LN10+.01),3<Math.abs(Ha)&&(!v(Da.exponentformat)||
14<Ha||-15>Ha?Da._tickexponent=Ha:Da._tickexponent=3*Math.round((Ha-1)/3))):Da._tickround=null}function p(Da,Ha,ab){Da=Da.tickfont||{};return{x:Ha,dx:0,dy:0,text:ab||"",fontSize:Da.size,font:Da.family,fontColor:Da.color}}function n(Da,Ha,ab,ib){var ob=Da._tickround,db=ab&&Da.hoverformat||Qa.getTickFormat(Da);ib&&(ob=J(ob)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[ob]);db=U.formatDate(Ha.x,db,ob,Da._dateFormat,Da.calendar,Da._extraFormat);var gb=db.indexOf("\n");if(-1!==gb){var rb=db.substr(gb+1);db=db.substr(0,
gb)}ib&&("00:00:00"===db||"00:00"===db?(db=rb,rb=""):8===db.length&&(db=db.replace(/:00$/,"")));rb&&(ab?db="d"===ob?db+(", "+rb):rb+(db?", "+db:""):Da._inCalcTicks&&rb===Da._prevDateHead||(db+="\x3cbr\x3e"+rb,Da._prevDateHead=rb));Ha.text=db}function c(Da,Ha,ab,ib,ob){var db=Da.dtick;ab=Ha.x;var gb=Da.tickformat,rb="string"===typeof db&&db.charAt(0);"never"===ob&&(ob="");ib&&"L"!==rb&&(db="L3",rb="L");if(gb||"L"===rb)Ha.text=w(Math.pow(10,ab),Da,ob,ib);else if(J(db)||"D"===rb&&.1>U.mod(ab+.01,1))ib=
Math.round(ab),ob=Math.abs(ib),gb=Da.exponentformat,"power"===gb||v(gb)&&(14<ib||-15>ib)?(Ha.text=0===ib?1:1===ib?"10":"10\x3csup\x3e"+(1<ib?"":Ja)+ob+"\x3c/sup\x3e",Ha.fontSize*=1.25):("e"===gb||"E"===gb)&&2<ob?Ha.text="1"+gb+(0<ib?"+":Ja)+ob:(Ha.text=w(Math.pow(10,ab),Da,"","fakehover"),"D1"===db&&"y"===Da._id.charAt(0)&&(Ha.dy-=Ha.fontSize/6));else if("D"===rb)Ha.text=String(Math.round(Math.pow(10,U.mod(ab,1)))),Ha.fontSize*=.75;else throw"unrecognized dtick "+String(db);"D1"===Da.dtick&&(db=String(Ha.text).charAt(0),
"0"===db||"1"===db)&&("y"===Da._id.charAt(0)?Ha.dx-=Ha.fontSize/4:(Ha.dy+=Ha.fontSize/2,Ha.dx+=(Da.range[1]>Da.range[0]?1:-1)*Ha.fontSize*(0>ab?.5:.25)))}function f(Da,Ha){Da=Da._categories[Math.round(Ha.x)];void 0===Da&&(Da="");Ha.text=String(Da)}function d(Da,Ha,ab){var ib=Da._categories[Math.round(Ha.x)]||[];Da=void 0===ib[1]?"":String(ib[1]);ib=void 0===ib[0]?"":String(ib[0]);ab?Ha.text=ib+" - "+Da:(Ha.text=Da,Ha.text2=ib)}function q(Da,Ha,ab,ib,ob){"never"===ob?ob="":"all"===Da.showexponent&&
1E-6>Math.abs(Ha.x/Da.dtick)&&(ob="hide");Ha.text=w(Ha.x,Da,ob,ib)}function r(Da,Ha,ab,ib,ob){"radians"!==Da.thetaunit||ab?Ha.text=w(Ha.x,Da,ob,ib):(ab=Ha.x/180,0===ab?Ha.text="0":(ab=u(ab),100<=ab[1]?Ha.text=w(U.deg2rad(Ha.x),Da,ob,ib):(Da=0>Ha.x,Ha.text=1===ab[1]?1===ab[0]?"":ab[0]+"":["\x3csup\x3e",ab[0],"\x3c/sup\x3e\x3csub\x3e",ab[1],"\x3c/sub\x3e"].join(""),Da&&(Ha.text=Ja+Ha.text))))}function u(Da){function Ha(ob,db){return 1E-6>=Math.abs(db-0)?ob:Ha(db,ob%db)}var ab=function(ob){for(var db=
1;!(1E-6>=Math.abs(Math.round(ob*db)/db-ob));)db*=10;return db}(Da);Da*=ab;var ib=Math.abs(Ha(Da,ab));return[Math.round(Da/ib),Math.round(ab/ib)]}function v(Da){return"SI"===Da||"B"===Da}function w(Da,Ha,ab,ib){var ob=0>Da,db=Ha._tickround;ab=ab||Ha.exponentformat||"B";var gb=Ha._tickexponent,rb=Qa.getTickFormat(Ha),Bb=Ha.separatethousands;ib&&(gb={exponentformat:ab,dtick:"none"===Ha.showexponent?Ha.dtick:J(Da)?Math.abs(Da)||1:1,range:"none"===Ha.showexponent?Ha.range.map(Ha.r2d):[0,Da||1]},k(gb),
db=(Number(gb._tickround)||0)+4,gb=gb._tickexponent,Ha.hoverformat&&(rb=Ha.hoverformat));if(rb)return Ha._numFormat(rb)(Da).replace(/-/g,Ja);ib=Math.pow(10,-db)/2;"none"===ab&&(gb=0);Da=Math.abs(Da);if(Da<ib)Da="0",ob=!1;else{Da+=ib;gb&&(Da*=Math.pow(10,-gb),db+=gb);if(0===db)Da=String(Math.floor(Da));else if(0>db)for(Da=String(Math.round(Da)),Da=Da.substr(0,Da.length+db);0>db;db++)Da+="0";else Da=String(Da),(ib=Da.indexOf(".")+1)&&(Da=Da.substr(0,ib+db).replace(/\.?0+$/,""));Da=U.numSeparate(Da,
Ha._separators,Bb)}gb&&"hide"!==ab&&(v(ab)&&(14<gb||-15>gb)&&(ab="power"),Ha=0>gb?Ja+-gb:"power"!==ab?"+"+gb:String(gb),"e"===ab||"E"===ab?Da+=ab+Ha:"power"===ab?Da+="10\x3csup\x3e"+Ha+"\x3c/sup\x3e":"B"===ab&&9===gb?Da+="B":v(ab)&&(Da+=nb[gb/3+5]));return ob?Ja+Da:Da}function y(Da,Ha){var ab=[],ib=function(ob,db){db=ob.xbnd[db];null!==db&&ab.push(U.extendFlat({},ob,{x:db}))};if(Ha.length){for(Da=0;Da<Ha.length;Da++)ib(Ha[Da],0);ib(Ha[Da-1],1)}return ab}function D(Da,Ha){for(var ab=[],ib={},ob=0;ob<
Ha.length;ob++){var db=Ha[ob];ib[db.text2]?ib[db.text2].push(db.x):ib[db.text2]=[db.x]}for(var gb in ib)ab.push(p(Da,U.interp(ib[gb],.5),gb));return ab}function x(Da,Ha){var ab=[],ib=Ha.length&&Ha[Ha.length-1].x<Ha[0].x,ob=function(rb,Bb){Bb=rb.xbnd[Bb];null!==Bb&&ab.push(U.extendFlat({},rb,{x:Bb}))};if(Da.showdividers&&Ha.length){for(Da=0;Da<Ha.length;Da++){var db=Ha[Da];db.text2!==gb&&ob(db,ib?1:0);var gb=db.text2}ob(Ha[Da-1],ib?0:1)}return ab}function E(Da,Ha){if(Da._selections[Ha].size()){var ab=
Infinity;var ib=-Infinity;var ob=Infinity;var db=-Infinity;Da._selections[Ha].each(function(){var gb=L(this);gb=ba.bBox(gb.node().parentNode);ab=Math.min(ab,gb.top);ib=Math.max(ib,gb.bottom);ob=Math.min(ob,gb.left);db=Math.max(db,gb.right)})}else db=ob=ib=ab=0;return{top:ab,bottom:ib,left:ob,right:db,height:ib-ab,width:db-ob}}function B(Da){return[Da.text,Da.x,Da.axInfo,Da.font,Da.fontSize,Da.fontColor].join("_")}function t(Da){var Ha=Da.title.font.size,ab=(Da.title.text.match(P.BR_TAG_ALL)||[]).length;
return Da.title.hasOwnProperty("standoff")?ab?Ha*(Wa+ab*Ea):Ha*Wa:ab?Ha*(ab+1)*Ea:Ha}function G(Da,Ha){Ha=Da.l2p(Ha);return 1<Ha&&Ha<Da._length-1}function I(Da,Ha,ab,ib){function ob(gc){function tc(Nc){return"number"===typeof Nc&&Math.abs(Nc-Qb)<Ac}if(!gc.showline||!gc.linewidth)return!1;var Ac=Math.max((gc.linewidth+Ha.zerolinewidth)/2,1);if(tc(gc._mainLinePosition)||tc(gc._mainMirrorPosition))return!0;gc=gc._linepositions||{};for(var Uc in gc)if(tc(gc[Uc][0])||tc(gc[Uc][1]))return!0}var db=ab._mainAxis;
if(db){var gb=Da._fullLayout,rb=Ha._id.charAt(0),Bb=Qa.counterLetter(Ha._id),Qb=Ha._offset+(Math.abs(ib[0])<Math.abs(ib[1])===("x"===rb)?0:Ha._length);ib=gb._plots[ab._mainSubplot];if(!(ib.mainplotinfo||ib).overlays.length)return ob(ab,Qb);Da=Qa.list(Da,Bb);for(ab=0;ab<Da.length;ab++)if(Bb=Da[ab],Bb._mainAxis===db&&ob(Bb,Qb))return!0}}function L(Da){Da=H.select(Da);var Ha=Da.select(".text-math-group");return Ha.empty()?Da.select("text"):Ha}function M(Da){return Da._id+".automargin"}function N(Da,
Ha){for(var ab=0;ab<Ha.length;ab++)-1===Da.indexOf(Ha[ab])&&Da.push(Ha[ab])}var H=b("d3"),J=b("fast-isnumeric"),O=b("../../plots/plots"),Q=b("../../registry"),U=b("../../lib"),P=b("../../lib/svg_text_utils"),V=b("../../components/titles"),Y=b("../../components/color"),ba=b("../../components/drawing"),ea=b("./layout_attributes"),ca=b("./clean_ticks");C=b("../../constants/numerical");var ia=C.ONEMAXYEAR,fa=C.ONEAVGYEAR,ha=C.ONEMINYEAR,na=C.ONEMAXQUARTER,pa=C.ONEAVGQUARTER,ra=C.ONEMINQUARTER,ta=C.ONEMAXMONTH,
oa=C.ONEAVGMONTH,ua=C.ONEMINMONTH,ka=C.ONEWEEK,sa=C.ONEDAY,ya=sa/2,qa=C.ONEHOUR,xa=C.ONEMIN,Ca=C.ONESEC,Ja=C.MINUS_SIGN,eb=C.BADNUM;C=b("../../constants/alignment");var Ra=C.MID_SHIFT,Wa=C.CAP_SHIFT,Ea=C.LINE_SPACING,Ia=C.OPPOSITE_SIDE,Qa=F.exports={};Qa.setConvert=b("./set_convert");var lb=b("./axis_autotype"),hb=b("./axis_ids");Qa.id2name=hb.id2name;Qa.name2id=hb.name2id;Qa.cleanId=hb.cleanId;Qa.list=hb.list;Qa.listIds=hb.listIds;Qa.getFromId=hb.getFromId;Qa.getFromTrace=hb.getFromTrace;b=b("./autorange");
Qa.getAutoRange=b.getAutoRange;Qa.findExtremes=b.findExtremes;Qa.coerceRef=function(Da,Ha,ab,ib,ob,db){var gb=ib.charAt(ib.length-1);ab=ab._fullLayout._subplots[gb+"axis"];ib+="ref";gb={};ob||(ob=ab[0]||db);db||(db=ob);gb[ib]={valType:"enumerated",values:ab.concat(db?[db]:[]),dflt:ob};return U.coerce(Da,Ha,gb,ib)};Qa.coercePosition=function(Da,Ha,ab,ib,ob,db){"paper"===ib||"pixel"===ib?(Ha=U.ensureNumber,ab=ab(ob,db)):(Ha=Qa.getFromId(Ha,ib),db=Ha.fraction2r(db),ab=ab(ob,db),Ha=Ha.cleanPos);Da[ob]=
Ha(ab)};Qa.cleanPosition=function(Da,Ha,ab){return("paper"===ab||"pixel"===ab?U.ensureNumber:Qa.getFromId(Ha,ab).cleanPos)(Da)};Qa.redrawComponents=function(Da,Ha){function ab(ob,db,gb,rb){ob=Q.getComponentMethod(ob,db);db={};for(var Bb=0;Bb<Ha.length;Bb++)for(var Qb=ib[Qa.id2name(Ha[Bb])][gb],gc=0;gc<Qb.length;gc++){var tc=Qb[gc];if(!db[tc]&&(ob(Da,tc),db[tc]=1,rb))return}}Ha=Ha?Ha:Qa.listIds(Da);var ib=Da._fullLayout;ab("annotations","drawOne","_annIndices");ab("shapes","drawOne","_shapeIndices");
ab("images","draw","_imgIndices",!0)};var Fa=Qa.getDataConversions=function(Da,Ha,ab,ib){ab="x"===ab||"y"===ab||"z"===ab?ab:ib;if(Array.isArray(ab)){if(Da={type:lb(ib),_categories:[]},Qa.setConvert(Da),"category"===Da.type)for(Ha=0;Ha<ib.length;Ha++)Da.d2c(ib[Ha])}else Da=Qa.getFromTrace(Da,Ha,ab);return Da?{d2c:Da.d2c,c2d:Da.c2d}:"ids"===ab?{d2c:l,c2d:l}:{d2c:h,c2d:h}};Qa.getDataToCoordFunc=function(Da,Ha,ab,ib){return Fa(Da,Ha,ab,ib).d2c};Qa.counterLetter=function(Da){Da=Da.charAt(0);if("x"===Da)return"y";
if("y"===Da)return"x"};Qa.minDtick=function(Da,Ha,ab,ib){if(-1!==["log","category","multicategory"].indexOf(Da.type)||!ib)Da._minDtick=0;else if(void 0===Da._minDtick)Da._minDtick=Ha,Da._forceTick0=ab;else if(Da._minDtick)if(2E-6>(Da._minDtick/Ha+1E-6)%1&&2E-6>((ab-Da._forceTick0)/Ha%1+1.000001)%1)Da._minDtick=Ha,Da._forceTick0=ab;else if(2E-6<(Ha/Da._minDtick+1E-6)%1||2E-6<((ab-Da._forceTick0)/Da._minDtick%1+1.000001)%1)Da._minDtick=0};Qa.saveRangeInitial=function(Da,Ha){Da=Qa.list(Da,"",!0);for(var ab=
!1,ib=0;ib<Da.length;ib++){var ob=Da[ib],db=void 0===ob._rangeInitial,gb=db||!(ob.range[0]===ob._rangeInitial[0]&&ob.range[1]===ob._rangeInitial[1]);if(db&&!1===ob.autorange||Ha&&gb)ob._rangeInitial=ob.range.slice(),ab=!0}return ab};Qa.saveShowSpikeInitial=function(Da,Ha){for(var ab=Qa.list(Da,"",!0),ib=!1,ob="on",db=0;db<ab.length;db++){var gb=ab[db],rb=void 0===gb._showSpikeInitial,Bb=rb||gb.showspikes!==gb._showspikes;if(rb||Ha&&Bb)gb._showSpikeInitial=gb.showspikes,ib=!0;"on"!==ob||gb.showspikes||
(ob="off")}Da._fullLayout._cartesianSpikesEnabled=ob;return ib};Qa.autoBin=function(Da,Ha,ab,ib,ob,db){var gb=U.aggNums(Math.min,null,Da),rb=U.aggNums(Math.max,null,Da);if("category"===Ha.type||"multicategory"===Ha.type)return{start:gb-.5,end:rb+.5,size:Math.max(1,Math.round(db)||1),_dataSpan:rb-gb};ob||(ob=Ha.calendar);var Bb="log"===Ha.type?{type:"linear",range:[gb,rb]}:{type:Ha.type,range:U.simpleMap([gb,rb],Ha.c2r,0,ob),calendar:ob};Qa.setConvert(Bb);(db=db&&ca.dtick(db,Bb.type))?(Bb.dtick=db,
Bb.tick0=ca.tick0(void 0,Bb.type,ob)):(ab?ib=(rb-gb)/ab:(ab=U.distinctVals(Da),db=Math.pow(10,Math.floor(Math.log(ab.minDiff)/Math.LN10)),ab=db*U.roundUp(ab.minDiff/db,[.9,1.9,4.9,9.9],!0),ib=Math.max(ab,2*U.stdev(Da)/Math.pow(Da.length,ib?.25:.4)),J(ib)||(ib=1)),Qa.autoTicks(Bb,ib));ib=Bb.dtick;ab=Qa.tickIncrement(Qa.tickFirst(Bb),ib,"reverse",ob);if("number"===typeof ib)ab=e(ab,Da,Bb,gb,rb),Bb=1+Math.floor((rb-ab)/ib),Da=ab+Bb*ib;else{if("M"===Bb.dtick.charAt(0))a:{Bb=ab;Da=U.findExactDates(Da,
ob);if(.8<Da.exactDays&&(ab=Number(ib.substr(1)),Bb=.8<Da.exactYears&&0===ab%12?Qa.tickIncrement(Bb,"M6","reverse")+1.5*sa:.8<Da.exactMonths?Qa.tickIncrement(Bb,"M1","reverse")+15.5*sa:Bb-ya,Da=Qa.tickIncrement(Bb,ib),Da<=gb)){ab=Da;break a}ab=Bb}Da=ab;for(Bb=0;Da<=rb;)Da=Qa.tickIncrement(Da,ib,!1,ob),Bb++}return{start:Ha.c2r(ab,0,ob),end:Ha.c2r(Da,0,ob),size:ib,_dataSpan:rb-gb}};Qa.prepTicks=function(Da,Ha){Ha=U.simpleMap(Da.range,Da.r2l,void 0,void 0,Ha);if("auto"===Da.tickmode||!Da.dtick){var ab=
Da.nticks;ab||("category"===Da.type||"multicategory"===Da.type?(ab=Da.tickfont?1.2*(Da.tickfont.size||12):15,ab=Da._length/ab):(ab="y"===Da._id.charAt(0)?40:80,ab=U.constrain(Da._length/ab,4,9)+1),"radialaxis"===Da._name&&(ab*=2));"array"===Da.tickmode&&(ab*=100);Da._roughDTick=(Math.abs(Ha[1]-Ha[0])-(Da._lBreaks||0))/ab;Qa.autoTicks(Da,Da._roughDTick);0<Da._minDtick&&Da.dtick<2*Da._minDtick&&(Da.dtick=Da._minDtick,Da.tick0=Da.l2r(Da._forceTick0))}Da.tick0||(Da.tick0="date"===Da.type?"2000-01-01":
0);"date"===Da.type&&.1>Da.dtick&&(Da.dtick=.1);k(Da)};Qa.calcTicks=function(Da,Ha){Qa.prepTicks(Da,Ha);var ab=U.simpleMap(Da.range,Da.r2l,void 0,void 0,Ha);if("array"===Da.tickmode)return a(Da);Da._tmin=Qa.tickFirst(Da,Ha);Ha=m(ab);var ib=Ha[1],ob=ab[1]<ab[0];if(Da._tmin<Ha[0]!==ob)return[];if("category"===Da.type||"multicategory"===Da.type)ib=ob?Math.max(-.5,ib):Math.min(Da._categories.length-.5,ib);var db="log"===Da.type&&!(J(Da.dtick)||"L"===Da.dtick.charAt(0)),gb=null,rb=Math.max(1E3,Da._length||
0);Ha=[];for(var Bb=Da._tmin;(ob?Bb>=ib:Bb<=ib)&&!(Ha.length>rb||Bb===gb);Bb=Qa.tickIncrement(Bb,Da.dtick,ob,Da.calendar)){gb=Bb;var Qb=!1;db&&Bb!==(Bb|0)&&(Qb=!0);Ha.push({minor:Qb,value:Bb})}(ib="period"===Da.ticklabelmode)&&Ha.unshift({minor:!1,value:Qa.tickIncrement(Ha[0].value,Da.dtick,!ob,Da.caldendar)});if(Da.rangebreaks&&(Qb=Ha.length)){db=0;"auto"===Da.tickmode&&(db=("y"===Da._id.charAt(0)?2:6)*(Da.tickfont?Da.tickfont.size:12));gb=[];rb=ob?1:-1;Bb=ob?Qb-1:0;for(ob=ob?0:Qb-1;rb*ob<=rb*Bb;ob+=
rb){Qb=Ha[ob];if(Da.maskBreaks(Qb.value)===eb){var gc=Qb;a:{var tc=Qb.value;for(var Ac=Da._rangebreaks.length,Uc=0;Uc<Ac;Uc++){var Nc=Da._rangebreaks[Uc];if(tc>=Nc.min&&tc<Nc.max){tc=Nc.max;break a}}}gc.value=tc;if(Da._rl&&(Da._rl[0]===Qb.value||Da._rl[1]===Qb.value))continue}gc=Da.c2p(Qb.value);if(gc===gd)gb[gb.length-1].value<Qb.value&&(gb[gb.length-1]=Qb);else if(void 0===gd||Math.abs(gc-gd)>db){var gd=gc;gb.push(Qb)}}Ha=gb.reverse()}"angularaxis"===Da._id&&360===Math.abs(ab[1]-ab[0])&&Ha.pop();
Da._tmax=(Ha[Ha.length-1]||{}).value;Da._prevDateHead="";Da._inCalcTicks=!0;gd=Math.min(ab[0],ab[1]);ab=Math.max(ab[0],ab[1]);var Xc;db=Qa.getTickFormat(Da);ib&&db&&(/%[fLQsSMX]/.test(db)||(/%[HI]/.test(db)?Xc=qa:/%p/.test(db)?Xc=ya:/%[Aadejuwx]/.test(db)?Xc=sa:/%[UVW]/.test(db)?Xc=ka:/%[Bbm]/.test(db)?Xc=oa:/%[q]/.test(db)?Xc=pa:/%[Yy]/.test(db)&&(Xc=fa)));db=[];for(gb=0;gb<Ha.length;gb++)if(rb=Qa.tickText(Da,Ha[gb].value,!1,Ha[gb].minor),!ib||ed!==rb.text){var ed=rb.text;db.push(rb)}if(ib){ed=!1;
for(gb=0;gb<db.length;gb++){Ha=db[gb].x;gb<db.length-1?(ib=gb,rb=gb+1):(ib=0<gb?gb-1:gb,rb=gb);ib=db[ib].x;rb=db[rb].x;Bb=Math.abs(rb-ib);Qb=Xc||Bb;ob=0;Qb>=ha?ob=Bb>=ha&&Bb<=ia?Bb:fa:Xc===pa&&Qb>=ra?ob=Bb>=ra&&Bb<=na?Bb:pa:Qb>=ua?ob=Bb>=ua&&Bb<=ta?Bb:oa:Xc===ka&&Qb>=ka?ob=ka:Qb>=sa?ob=sa:Xc===ya&&Qb>=ya?ob=ya:Xc===qa&&Qb>=qa&&(ob=qa);if(ob&&Da.rangebreaks){for(tc=gc=Qb=0;42>tc;tc++)Ac=tc/42,Da.maskBreaks(ib*(1-Ac)+rb*Ac)!==eb&&(.5>Ac?Qb++:gc++);gc&&(ob*=(Qb+gc)/42)}ob<=Bb&&(Ha+=ob/2);db[gb].periodX=
Ha;if(Ha>ab||Ha<gd)db[gb].text=" ",ed=!0}if(ed)for(gb=0;gb<db.length;gb++)if(db[gb].periodX<=ab&&db[gb].periodX>=gd){Da._prevDateHead="";db[gb].text=Qa.tickText(Da,db[gb].x).text;break}}Da._inCalcTicks=!1;return db};var La=[2,5,10],Oa=[1,2,3,6,12],fb=[1,2,5,10,15,30],bb=[1,2,3,7,14],Pa=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ta=[-.301,0,.301,.699,1],Ya=[15,30,45,90,180];Qa.autoTicks=function(Da,Ha){function ab(db){return Math.pow(db,Math.floor(Math.log(Ha)/Math.LN10))}if("date"===Da.type){Da.tick0=
U.dateTick0(Da.calendar);var ib=2*Ha;if(ib>fa)Ha/=fa,ib=ab(10),Da.dtick="M"+12*g(Ha,ib,La);else if(ib>oa)Ha/=oa,Da.dtick="M"+g(Ha,1,Oa);else if(ib>sa){if(Da.dtick=g(Ha,sa,Da._hasDayOfWeekBreaks?[1,2,7,14]:bb),Da.tick0=U.dateTick0(Da.calendar,!0),ib=Qa.getTickFormat(Da),/%[uVW]/.test(ib)){ib=Da.tick0.length;var ob=+Da.tick0[ib-1];Da.tick0=Da.tick0.substring(0,ib-2)+String(ob+1)}}else ib>qa?Da.dtick=g(Ha,qa,Oa):ib>xa?Da.dtick=g(Ha,xa,fb):ib>Ca?Da.dtick=g(Ha,Ca,fb):(ib=ab(10),Da.dtick=g(Ha,ib,La))}else"log"===
Da.type?(Da.tick0=0,ib=U.simpleMap(Da.range,Da.r2l),.7<Ha?Da.dtick=Math.ceil(Ha):1>Math.abs(ib[1]-ib[0])?(Ha=Math.abs(Math.pow(10,ib[1])-Math.pow(10,ib[0]))/(1.5*Math.abs((ib[1]-ib[0])/Ha)),ib=ab(10),Da.dtick="L"+g(Ha,ib,La)):Da.dtick=.3<Ha?"D2":"D1"):"category"===Da.type||"multicategory"===Da.type?(Da.tick0=0,Da.dtick=Math.ceil(Math.max(Ha,1))):"angularaxis"===Da._id?(Da.tick0=0,Da.dtick=g(Ha,1,Ya)):(Da.tick0=0,ib=ab(10),Da.dtick=g(Ha,ib,La));0===Da.dtick&&(Da.dtick=1);if(!J(Da.dtick)&&"string"!==
typeof Da.dtick)throw ib=Da.dtick,Da.dtick=1,"ax.dtick error: "+String(ib);};Qa.tickIncrement=function(Da,Ha,ab,ib){var ob=ab?-1:1;if(J(Ha))return U.increment(Da,ob*Ha);var db=Ha.charAt(0),gb=ob*Number(Ha.substr(1));if("M"===db)return U.incrementMonth(Da,gb,ib);if("L"===db)return Math.log(Math.pow(10,Da)+gb)/Math.LN10;if("D"===db)return Ha="D2"===Ha?Ta:Pa,Da+=.01*ob,ab=U.roundUp(U.mod(Da,1),Ha,ab),Math.floor(Da)+Math.log(H.round(Math.pow(10,ab),1))/Math.LN10;throw"unrecognized dtick "+String(Ha);
};Qa.tickFirst=function(Da,Ha){var ab=Da.r2l||Number,ib=U.simpleMap(Da.range,ab,void 0,void 0,Ha),ob=(Ha=ib[1]<ib[0])?Math.floor:Math.ceil;ib=m(ib)[0];var db=Da.dtick,gb=ab(Da.tick0);if(J(db)){Ha=ob((ib-gb)/db)*db+gb;if("category"===Da.type||"multicategory"===Da.type)Ha=U.constrain(Ha,0,Da._categories.length-1);return Ha}ab=db.charAt(0);var rb=Number(db.substr(1));if("M"===ab){ob=0;for(var Bb,Qb;10>ob;){Bb=Qa.tickIncrement(gb,db,Ha,Da.calendar);if(0>=(Bb-ib)*(gb-ib))return Ha?Math.min(gb,Bb):Math.max(gb,
Bb);Bb=(ib-(gb+Bb)/2)/(Bb-gb);Qb=ab+(Math.abs(Math.round(Bb))||1)*rb;gb=Qa.tickIncrement(gb,Qb,0>Bb?!Ha:Ha,Da.calendar);ob++}U.error("tickFirst did not converge",Da);return gb}if("L"===ab)return Math.log(ob((Math.pow(10,ib)-gb)/rb)*rb+gb)/Math.LN10;if("D"===ab)return Da="D2"===db?Ta:Pa,Da=U.roundUp(U.mod(ib,1),Da,Ha),Math.floor(ib)+Math.log(H.round(Math.pow(10,Da),1))/Math.LN10;throw"unrecognized dtick "+String(db);};Qa.tickText=function(Da,Ha,ab,ib){function ob(tc){if(void 0===tc)return!0;if(ab)return"none"===
tc;var Ac={first:Da._tmin,last:Da._tmax}[tc];return"all"!==tc&&Ha!==Ac}var db=p(Da,Ha),gb="array"===Da.tickmode,rb=ab||gb,Bb=Da.type,Qb="category"===Bb?Da.d2l_noadd:Da.d2l;if(gb&&Array.isArray(Da.ticktext)){gb=U.simpleMap(Da.range,Da.r2l);var gc=(Math.abs(gb[1]-gb[0])-(Da._lBreaks||0))/1E4;for(gb=0;gb<Da.ticktext.length&&!(Math.abs(Ha-Qb(Da.tickvals[gb]))<gc);gb++);if(gb<Da.ticktext.length)return db.text=String(Da.ticktext[gb]),db}Qb=ab?"never":"none"!==Da.exponentformat&&ob(Da.showexponent)?"hide":
"";"date"===Bb?n(Da,db,ab,rb):"log"===Bb?c(Da,db,ab,rb,Qb):"category"===Bb?f(Da,db):"multicategory"===Bb?d(Da,db,ab):"angularaxis"===Da._id?r(Da,db,ab,rb,Qb):q(Da,db,ab,rb,Qb);ib||(Da.tickprefix&&!ob(Da.showtickprefix)&&(db.text=Da.tickprefix+db.text),Da.ticksuffix&&!ob(Da.showticksuffix)&&(db.text+=Da.ticksuffix));if("boundaries"===Da.tickson||Da.showdividers)ib=function(tc){var Ac=Da.l2p(tc);return 0<=Ac&&Ac<=Da._length?tc:null},db.xbnd=[ib(db.x-.5),ib(db.x+Da.dtick-.5)];return db};Qa.hoverLabelText=
function(Da,Ha,ab){if(ab!==eb&&ab!==Ha)return Qa.hoverLabelText(Da,Ha)+" - "+Qa.hoverLabelText(Da,ab);ab="log"===Da.type&&0>=Ha;Da=Qa.tickText(Da,Da.c2l(ab?-Ha:Ha),"hover").text;return ab?0===Ha?"0":Ja+Da:Da};var nb="f p n  m  k M G T".split(" ");Qa.getTickFormat=function(Da){function Ha(Bb){return"string"!==typeof Bb?Bb:Number(Bb.replace("M",""))*oa}function ab(Bb,Qb){var gc=["L","D"];if(typeof Bb===typeof Qb){if("number"===typeof Bb)return Bb-Qb;var tc=gc.indexOf(Bb.charAt(0));gc=gc.indexOf(Qb.charAt(0));
return tc===gc?Number(Bb.replace(/(L|D)/g,""))-Number(Qb.replace(/(L|D)/g,"")):tc-gc}return"number"===typeof Bb?1:-1}function ib(Bb,Qb,gc){gc=gc||function(Ac){return Ac};var tc=Qb[0];Qb=Qb[1];return(!tc&&"number"!==typeof tc||gc(tc)<=gc(Bb))&&(!Qb&&"number"!==typeof Qb||gc(Qb)>=gc(Bb))}function ob(Bb,Qb){var gc=null===Qb[0],tc=null===Qb[1],Ac=0<=ab(Bb,Qb[0]);Bb=0>=ab(Bb,Qb[1]);return(gc||Ac)&&(tc||Bb)}var db;if(Da.tickformatstops&&0<Da.tickformatstops.length)switch(Da.type){case "date":case "linear":for(db=
0;db<Da.tickformatstops.length;db++){var gb=Da.tickformatstops[db];if(gb.enabled&&ib(Da.dtick,gb.dtickrange,Ha)){var rb=gb;break}}break;case "log":for(db=0;db<Da.tickformatstops.length;db++)if(gb=Da.tickformatstops[db],gb.enabled&&ob(Da.dtick,gb.dtickrange)){rb=gb;break}}return rb?rb.value:Da.tickformat};Qa.getSubplots=function(Da,Ha){Da=Da._fullLayout._subplots;Da=Da.cartesian.concat(Da.gl2d||[]);Ha=Ha?Qa.findSubplotsWithAxis(Da,Ha):Da;Ha.sort(function(ab,ib){ab=ab.substr(1).split("y");ib=ib.substr(1).split("y");
return ab[0]===ib[0]?+ab[1]-+ib[1]:+ab[0]-+ib[0]});return Ha};Qa.findSubplotsWithAxis=function(Da,Ha){Ha=new RegExp("x"===Ha._id.charAt(0)?"^"+Ha._id+"y":Ha._id+"$");for(var ab=[],ib=0;ib<Da.length;ib++){var ob=Da[ib];Ha.test(ob)&&ab.push(ob)}return ab};Qa.makeClipPaths=function(Da){var Ha=Da._fullLayout;if(!Ha._hasOnlyLargeSploms){var ab={_offset:0,_length:Ha.width,_id:""},ib={_offset:0,_length:Ha.height,_id:""},ob=Qa.list(Da,"x",!0);Da=Qa.list(Da,"y",!0);var db=[],gb,rb;for(gb=0;gb<ob.length;gb++)for(db.push({x:ob[gb],
y:ib}),rb=0;rb<Da.length;rb++)0===gb&&db.push({x:ab,y:Da[rb]}),db.push({x:ob[gb],y:Da[rb]});ab=Ha._clips.selectAll(".axesclip").data(db,function(Bb){return Bb.x._id+Bb.y._id});ab.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Bb){return"clip"+Ha._uid+Bb.x._id+Bb.y._id}).append("rect");ab.exit().remove();ab.each(function(Bb){H.select(this).select("rect").attr({x:Bb.x._offset||0,y:Bb.y._offset||0,width:Bb.x._length||1,height:Bb.y._length||1})})}};Qa.draw=function(Da,Ha,ab){var ib=
Da._fullLayout;"redraw"===Ha&&ib._paper.selectAll("g.subplot").each(function(ob){ob=ib._plots[ob[0]];var db=ob.xaxis,gb=ob.yaxis;ob.xaxislayer.selectAll("."+db._id+"tick").remove();ob.yaxislayer.selectAll("."+gb._id+"tick").remove();ob.xaxislayer.selectAll("."+db._id+"tick2").remove();ob.yaxislayer.selectAll("."+gb._id+"tick2").remove();ob.xaxislayer.selectAll("."+db._id+"divider").remove();ob.yaxislayer.selectAll("."+gb._id+"divider").remove();ob.gridlayer&&ob.gridlayer.selectAll("path").remove();
ob.zerolinelayer&&ob.zerolinelayer.selectAll("path").remove();ib._infolayer.select(".g-"+db._id+"title").remove();ib._infolayer.select(".g-"+gb._id+"title").remove()});Ha=Ha&&"redraw"!==Ha?Ha:Qa.listIds(Da);return U.syncOrAsync(Ha.map(function(ob){return function(){if(ob){var db=Qa.getFromId(Da,ob),gb=Qa.drawOne(Da,db,ab);db._r=db.range.slice();db._rl=U.simpleMap(db._r,db.r2l);return gb}}}))};Qa.drawOne=function(Da,Ha,ab){function ib(Tb){Tb=gb+(Tb||"tick");Nc[Tb]||(Nc[Tb]=E(Ha,Tb));return Nc[Tb]}
ab=ab||{};var ob;Ha.setScale();var db=Da._fullLayout,gb=Ha._id,rb=gb.charAt(0),Bb=Qa.counterLetter(gb),Qb=db._plots[Ha._mainSubplot];if(Qb){var gc=Qb[rb+"axislayer"],tc=Ha._mainLinePosition,Ac=Ha._mainMirrorPosition,Uc=Ha._vals=Qa.calcTicks(Ha);Qb=[Ha.mirror,tc,Ac].join("_");for(ob=0;ob<Uc.length;ob++)Uc[ob].axInfo=Qb;Ha._selections={};Ha._tickAngles&&(Ha._prevTickAngles=Ha._tickAngles);Ha._tickAngles={};Ha._depth=null;var Nc={};if(Ha.visible){var gd=Qa.makeTransFn(Ha),Xc="period"===Ha.ticklabelmode?
Qa.makeTransPeriodFn(Ha):Qa.makeTransFn(Ha);"boundaries"===Ha.tickson?(Qb=y(Ha,Uc),ob=Qa.clipEnds(Ha,Qb),Qb="inside"===Ha.ticks?ob:Qb):(ob=Qa.clipEnds(Ha,Uc),Qb="inside"===Ha.ticks?ob:Uc);var ed=Ha._gridVals=ob,tb=x(Ha,Uc);if(!db._hasOnlyLargeSploms){var Xb=Ha._subplotsWith,uc={};for(ob=0;ob<Xb.length;ob++){var Mc=Xb[ob];var Rc=db._plots[Mc];Mc=Rc[Bb+"axis"];var fd=Mc._mainAxis._id;uc[fd]||(uc[fd]=1,fd="x"===rb?"M0,"+Mc._offset+"v"+Mc._length:"M"+Mc._offset+",0h"+Mc._length,Qa.drawGrid(Da,Ha,{vals:ed,
counterAxis:Mc,layer:Rc.gridlayer.select("."+gb),path:fd,transFn:gd}),Qa.drawZeroLine(Da,Ha,{counterAxis:Mc,layer:Rc.zerolinelayer,path:fd,transFn:gd}))}}var sb=Qa.getTickSigns(Ha);ed=[];if(Ha.ticks){ob=Qa.makeTickPath(Ha,tc,sb[2]);if(Ha._anchorAxis&&Ha.mirror&&!0!==Ha.mirror){var xb=Qa.makeTickPath(Ha,Ac,sb[3]);var kc=ob+xb}else xb="",kc=ob;if(Ha.showdividers&&"outside"===Ha.ticks&&"boundaries"===Ha.tickson){var nc={};for(ob=0;ob<tb.length;ob++)nc[tb[ob].x]=1;Ac=function(Tb){return nc[Tb.x]?xb:kc}}else Ac=
kc;Qa.drawTicks(Da,Ha,{vals:Qb,layer:gc,path:Ac,transFn:gd});"allticks"===Ha.mirror&&(ed=Object.keys(Ha._linepositions||{}))}for(ob=0;ob<ed.length;ob++)Mc=ed[ob],Rc=db._plots[Mc],Ac=Ha._linepositions[Mc]||[],Ac=Qa.makeTickPath(Ha,Ac[0],sb[0])+Qa.makeTickPath(Ha,Ac[1],sb[1]),Qa.drawTicks(Da,Ha,{vals:Qb,layer:Rc[rb+"axislayer"],path:Ac,transFn:gd});Qb=[];Qb.push(function(){return Qa.drawLabels(Da,Ha,{vals:Uc,layer:gc,transFn:Xc,labelFns:Qa.makeLabelFns(Ha,tc)})});if("multicategory"===Ha.type){var Kc=
{x:2,y:10}[rb];Qb.push(function(){var Tb={x:"height",y:"width"}[rb];Tb=ib()[Tb]+Kc+(Ha._tickAngles[gb+"tick"]?Ha.tickfont.size*Ea:0);return Qa.drawLabels(Da,Ha,{vals:D(Ha,Uc),layer:gc,cls:gb+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:gd,labelFns:Qa.makeLabelFns(Ha,tc+Tb*sb[4])})});Qb.push(function(){Ha._depth=sb[4]*(ib("tick2")[Ha.side]-tc);var Tb=Qa.makeTickPath(Ha,tc,sb[4],Ha._depth),yb=Ha._id+"divider",Gb=gc.selectAll("path."+yb).data(tb,B);Gb.exit().remove();Gb.enter().insert("path",":first-child").classed(yb,
1).classed("crisp",1).call(Y.stroke,Ha.dividercolor).style("stroke-width",ba.crispRound(Da,Ha.dividerwidth,1)+"px");Gb.attr("transform",gd).attr("d",Tb)})}else Ha.title.hasOwnProperty("standoff")&&Qb.push(function(){Ha._depth=sb[4]*(ib()[Ha.side]-tc)});var ac=Q.getComponentMethod("rangeslider","isVisible")(Ha);Qb.push(function(){var Tb=Ha.side.charAt(0),yb=Ia[Ha.side].charAt(0),Gb=Qa.getPxPosition(Da,Ha),Eb="outside"===Ha.ticks?Ha.ticklen:0,Vb;if(Ha.automargin||ac)if("multicategory"===Ha.type)var Zb=
ib("tick2");else Zb=ib(),"x"===rb&&"b"===Tb&&(Ha._depth=Math.max(0<Zb.width?Zb.bottom-Gb:0,Eb));if(Ha.automargin){var Dc={x:0,y:0,r:0,l:0,t:0,b:0};var ic=[0,1];"x"===rb?("b"===Tb?Dc[Tb]=Ha._depth:(Dc[Tb]=Ha._depth=Math.max(0<Zb.width?Gb-Zb.top:0,Eb),ic.reverse()),0<Zb.width&&(Gb=Zb.right-(Ha._offset+Ha._length),0<Gb&&(Dc.xr=1,Dc.r=Gb),Zb=Ha._offset-Zb.left,0<Zb&&(Dc.xl=0,Dc.l=Zb))):("l"===Tb?Dc[Tb]=Ha._depth=Math.max(0<Zb.height?Gb-Zb.left:0,Eb):(Dc[Tb]=Ha._depth=Math.max(0<Zb.height?Zb.right-Gb:
0,Eb),ic.reverse()),0<Zb.height&&(Gb=Zb.bottom-(Ha._offset+Ha._length),0<Gb&&(Dc.yb=0,Dc.b=Gb),Zb=Ha._offset-Zb.top,0<Zb&&(Dc.yt=1,Dc.t=Zb)));Dc[Bb]="free"===Ha.anchor?Ha.position:Ha._anchorAxis.domain[ic[0]];Ha.title.text!==db._dfltTitle[rb]&&(Dc[Tb]+=t(Ha)+(Ha.title.standoff||0));if(Ha.mirror&&"free"!==Ha.anchor){var Bc={x:0,y:0,r:0,l:0,t:0,b:0};Bc[yb]=Ha.linewidth;Ha.mirror&&!0!==Ha.mirror&&(Bc[yb]+=Eb);if(!0===Ha.mirror||"ticks"===Ha.mirror)Bc[Bb]=Ha._anchorAxis.domain[ic[1]];else if("all"===
Ha.mirror||"allticks"===Ha.mirror)Bc[Bb]=[Ha._counterDomainMin,Ha._counterDomainMax][ic[1]]}}ac&&(Vb=Q.getComponentMethod("rangeslider","autoMarginOpts")(Da,Ha));O.autoMargin(Da,M(Ha),Dc);O.autoMargin(Da,M(Ha)+".mirror",Bc);O.autoMargin(Da,Ha._id+".rangeslider",Vb)});ab.skipTitle||ac&&"bottom"===Ha.side||Qb.push(function(){var Tb=Da._fullLayout,yb=Ha._id,Gb=yb.charAt(0),Eb=Ha.title.font.size;if(Ha.title.hasOwnProperty("standoff"))var Vb=Ha._depth+Ha.title.standoff+t(Ha);else Vb="multicategory"===
Ha.type?Ha._depth:10+1.5*Eb+(Ha.linewidth?Ha.linewidth-1:0),Vb="x"===Gb?Vb+("top"===Ha.side?Eb*(Ha.showticklabels?1:0):Eb*(Ha.showticklabels?1.5:.5)):Vb+("right"===Ha.side?Eb*(Ha.showticklabels?1:.5):Eb*(Ha.showticklabels?.5:0));var Zb=Qa.getPxPosition(Da,Ha);if("x"===Gb){Eb=Ha._offset+Ha._length/2;var Dc="top"===Ha.side?Zb-Vb:Zb+Vb}else{Dc=Ha._offset+Ha._length/2;Eb="right"===Ha.side?Zb+Vb:Zb-Vb;var ic={rotate:"-90",offset:0}}if("multicategory"!==Ha.type){Vb=Ha._selections[Ha._id+"tick"];var Bc=
{selection:Vb,side:Ha.side};Vb&&Vb.node()&&Vb.node().parentNode&&(Vb=ba.getTranslate(Vb.node().parentNode),Bc.offsetLeft=Vb.x,Bc.offsetTop=Vb.y);Ha.title.hasOwnProperty("standoff")&&(Bc.pad=0)}return V.draw(Da,yb+"title",{propContainer:Ha,propName:Ha._name+".title.text",placeholder:Tb._dfltTitle[Gb],avoid:Bc,transform:ic,attributes:{x:Eb,y:Dc,"text-anchor":"middle"}})});return U.syncOrAsync(Qb)}}};Qa.getTickSigns=function(Da){var Ha=Da._id.charAt(0),ab=Da.side==={x:"top",y:"right"}[Ha]?1:-1;ab=[-1,
1,ab,-ab];"inside"!==Da.ticks===("x"===Ha)&&(ab=ab.map(function(ib){return-ib}));Da.side&&ab.push({l:-1,t:-1,r:1,b:1}[Da.side.charAt(0)]);return ab};Qa.makeTransFn=function(Da){var Ha=Da._id.charAt(0),ab=Da._offset;return"x"===Ha?function(ib){return"translate("+(ab+Da.l2p(ib.x))+",0)"}:function(ib){return"translate(0,"+(ab+Da.l2p(ib.x))+")"}};Qa.makeTransPeriodFn=function(Da){var Ha=Da._id.charAt(0),ab=Da._offset;return"x"===Ha?function(ib){return"translate("+(ab+Da.l2p(ib.periodX))+",0)"}:function(ib){return"translate(0,"+
(ab+Da.l2p(ib.periodX))+")"}};Qa.makeTickPath=function(Da,Ha,ab,ib){ib=void 0!==ib?ib:Da.ticklen;var ob=Da._id.charAt(0);Da=(Da.linewidth||1)/2;return"x"===ob?"M0,"+(Ha+Da*ab)+"v"+ib*ab:"M"+(Ha+Da*ab)+",0h"+ib*ab};Qa.makeLabelFns=function(Da,Ha,ab){var ib=Da._id.charAt(0),ob="boundaries"!==Da.tickson&&"outside"===Da.ticks,db=0,gb=0;ob&&(db+=Da.ticklen);ab&&"outside"===Da.ticks&&(gb=U.deg2rad(ab),db=Da.ticklen*Math.cos(gb)+1,gb=Da.ticklen*Math.sin(gb));Da.showticklabels&&(ob||Da.showline)&&(db+=.2*
Da.tickfont.size);db+=(Da.linewidth||1)/2;ob={labelStandoff:db,labelShift:gb};if("x"===ib){var rb="bottom"===Da.side?1:-1;var Bb=gb*rb;var Qb=Ha+db*rb;var gc="bottom"===Da.side?1:-.2;ob.xFn=function(tc){return tc.dx+Bb};ob.yFn=function(tc){return tc.dy+Qb+tc.fontSize*gc};ob.anchorFn=function(tc,Ac){return J(Ac)&&0!==Ac&&180!==Ac?0>Ac*rb?"end":"start":"middle"};ob.heightFn=function(tc,Ac,Uc){return-60>Ac||60<Ac?-.5*Uc:"top"===Da.side?-Uc:0}}else"y"===ib&&(rb="right"===Da.side?1:-1,Bb=db,Qb=-gb*rb,
gc=90===Math.abs(Da.tickangle)?.5:0,ob.xFn=function(tc){return tc.dx+Ha+(Bb+tc.fontSize*gc)*rb},ob.yFn=function(tc){return tc.dy+Qb+tc.fontSize*Ra},ob.anchorFn=function(tc,Ac){return J(Ac)&&90===Math.abs(Ac)?"middle":"right"===Da.side?"start":"end"},ob.heightFn=function(tc,Ac,Uc){Ac*="left"===Da.side?1:-1;return-30>Ac?-Uc:30>Ac?-.5*Uc:0});return ob};Qa.drawTicks=function(Da,Ha,ab){ab=ab||{};var ib=Ha._id+"tick",ob=ab.vals;"period"===Ha.ticklabelmode&&(ob=ob.slice(),ob.shift());ob=ab.layer.selectAll("path."+
ib).data(Ha.ticks?ob:[],B);ob.exit().remove();ob.enter().append("path").classed(ib,1).classed("ticks",1).classed("crisp",!1!==ab.crisp).call(Y.stroke,Ha.tickcolor).style("stroke-width",ba.crispRound(Da,Ha.tickwidth,1)+"px").attr("d",ab.path);ob.attr("transform",ab.transFn)};Qa.drawGrid=function(Da,Ha,ab){ab=ab||{};var ib=Ha._id+"grid",ob=ab.vals,db=ab.counterAxis;if(!1===Ha.showgrid)ob=[];else if(db&&Qa.shouldShowZeroLine(Da,Ha,db)){db="array"===Ha.tickmode;for(var gb=0;gb<ob.length;gb++){var rb=
ob[gb].x;if(db?!rb:Math.abs(rb)<Ha.dtick/100)if(ob=ob.slice(0,gb).concat(ob.slice(gb+1)),db)gb--;else break}}ob=ab.layer.selectAll("path."+ib).data(ob,B);ob.exit().remove();ob.enter().append("path").classed(ib,1).classed("crisp",!1!==ab.crisp);Ha._gw=ba.crispRound(Da,Ha.gridwidth,1);ob.attr("transform",ab.transFn).attr("d",ab.path).call(Y.stroke,Ha.gridcolor||"#ddd").style("stroke-width",Ha._gw+"px");"function"===typeof ab.path&&ob.attr("d",ab.path)};Qa.drawZeroLine=function(Da,Ha,ab){ab=ab||ab;var ib=
Ha._id+"zl",ob=Qa.shouldShowZeroLine(Da,Ha,ab.counterAxis);ob=ab.layer.selectAll("path."+ib).data(ob?[{x:0,id:Ha._id}]:[]);ob.exit().remove();ob.enter().append("path").classed(ib,1).classed("zl",1).classed("crisp",!1!==ab.crisp).each(function(){ab.layer.selectAll("path").sort(function(db,gb){return hb.idSort(db.id,gb.id)})});ob.attr("transform",ab.transFn).attr("d",ab.path).call(Y.stroke,Ha.zerolinecolor||Y.defaultLine).style("stroke-width",ba.crispRound(Da,Ha.zerolinewidth,Ha._gw||1)+"px")};Qa.drawLabels=
function(Da,Ha,ab){function ib(Xc,ed){Xc.each(function(tb){var Xb=H.select(this),uc=Xb.select(".text-math-group"),Mc=gc.anchorFn(tb,ed),Rc=ab.transFn.call(Xb.node(),tb)+(J(ed)&&0!==+ed?" rotate("+ed+","+gc.xFn(tb)+","+(gc.yFn(tb)-tb.fontSize/2)+")":""),fd=P.lineCount(Xb),sb=Ea*tb.fontSize;(tb=gc.heightFn(tb,J(ed)?+ed:0,(fd-1)*sb))&&(Rc+=" translate(0, "+tb+")");uc.empty()?Xb.select("text").attr({transform:Rc,"text-anchor":Mc}):(Xb=ba.bBox(uc.node()).width*{end:-.5,start:.5}[Mc],uc.attr("transform",
Rc+(Xb?"translate("+Xb+",0)":"")))})}function ob(){ib(Uc,tc);if(Qb.length&&"x"===rb&&!J(tc)&&("log"!==Ha.type||"D"!==String(Ha.dtick).charAt(0))){var Xc=gd=0,ed=[];Uc.each(function(Rc){Xc=Math.max(Xc,Rc.fontSize);Rc=Ha.l2p(Rc.x);var fd=L(this);fd=ba.bBox(fd.node());ed.push({top:0,bottom:10,height:10,left:Rc-fd.width/2,right:Rc+fd.width/2+2,width:fd.width+2})});if("boundaries"!==Ha.tickson&&!Ha.showdividers||ab.secondary){var tb=Qb.length;var Xb=Math.abs((Qb[tb-1].x-Qb[0].x)*Ha._m)/(tb-1)<2.5*Xc||
"multicategory"===Ha.type;for(tb=0;tb<ed.length-1;tb++)if(U.bBoxIntersect(ed[tb],ed[tb+1])){gd=Xb?90:30;break}}else for(Xb=2,Ha.ticks&&(Xb+=Ha.tickwidth/2),tb=0;tb<ed.length;tb++){var uc=Qb[tb].xbnd,Mc=ed[tb];if(null!==uc[0]&&Mc.left-Ha.l2p(uc[0])<Xb||null!==uc[1]&&Ha.l2p(uc[1])-Mc.right<Xb){gd=90;break}}gd&&ib(Uc,gd)}}ab=ab||{};var db=Da._fullLayout,gb=Ha._id,rb=gb.charAt(0),Bb=ab.cls||gb+"tick",Qb=ab.vals,gc=ab.labelFns,tc=ab.secondary?0:Ha.tickangle,Ac=(Ha._prevTickAngles||{})[Bb],Uc=ab.layer.selectAll("g."+
Bb).data(Ha.showticklabels?Qb:[],B),Nc=[];Uc.enter().append("g").classed(Bb,1).append("text").attr("text-anchor","middle").each(function(Xc){var ed=H.select(this),tb=Da._promises.length;ed.call(P.positionText,gc.xFn(Xc),gc.yFn(Xc)).call(ba.font,Xc.font,Xc.fontSize,Xc.fontColor).text(Xc.text).call(P.convertToTspans,Da);Da._promises[tb]?Nc.push(Da._promises.pop().then(function(){ib(ed,tc)})):ib(ed,tc)});Uc.exit().remove();ab.repositionOnUpdate&&Uc.each(function(Xc){H.select(this).select("text").call(P.positionText,
gc.xFn(Xc),gc.yFn(Xc))});ib(Uc,Ac+1?Ac:tc);var gd=null;Ha._selections&&(Ha._selections[Bb]=Uc);gb=[function(){return Nc.length&&Promise.all(Nc)}];Ha.automargin&&db._redrawFromAutoMarginCount&&90===Ac?(gd=90,gb.push(function(){ib(Uc,Ac)})):gb.push(ob);Ha._tickAngles&&gb.push(function(){Ha._tickAngles[Bb]=null===gd?J(tc)?tc:0:gd});(db=U.syncOrAsync(gb))&&db.then&&Da._promises.push(db);return db};Qa.getPxPosition=function(Da,Ha){Da=Da._fullLayout._size;var ab=Ha._id.charAt(0),ib=Ha.side,ob;"free"!==
Ha.anchor?ob=Ha._anchorAxis:"x"===ab?ob={_offset:Da.t+(1-(Ha.position||0))*Da.h,_length:0}:"y"===ab&&(ob={_offset:Da.l+(Ha.position||0)*Da.w,_length:0});if("top"===ib||"left"===ib)return ob._offset;if("bottom"===ib||"right"===ib)return ob._offset+ob._length};Qa.shouldShowZeroLine=function(Da,Ha,ab){var ib=U.simpleMap(Ha.range,Ha.r2l),ob;if(ob=0>=ib[0]*ib[1]&&Ha.zeroline&&("linear"===Ha.type||"-"===Ha.type)&&!(Ha.rangebreaks&&Ha.maskBreaks(0)===eb)){if(!(ab=G(Ha,0)||!I(Da,Ha,ab,ib)))a:{Da=Da._fullData;
ab=Ha._mainSubplot;Ha=Ha._id.charAt(0);for(ib=0;ib<Da.length;ib++)if(ob=Da[ib],!0===ob.visible&&ob.xaxis+ob.yaxis===ab){if(Q.traceIs(ob,"bar-like")&&ob.orientation==={x:"h",y:"v"}[Ha]){ab=!0;break a}if(ob.fill&&ob.fill.charAt(ob.fill.length-1)===Ha){ab=!0;break a}}ab=!1}ob=ab}return ob};Qa.clipEnds=function(Da,Ha){return Ha.filter(function(ab){return G(Da,ab.x)})};Qa.allowAutoMargin=function(Da){for(var Ha=Qa.list(Da,"",!0),ab=0;ab<Ha.length;ab++){var ib=Ha[ab];ib.automargin&&(O.allowAutoMargin(Da,
M(ib)),ib.mirror&&O.allowAutoMargin(Da,M(ib)+".mirror"));Q.getComponentMethod("rangeslider","isVisible")(ib)&&O.allowAutoMargin(Da,ib._id+".rangeslider")}};Qa.swap=function(Da,Ha){var ab=[],ib,ob;for(ib=0;ib<Ha.length;ib++){var db=[],gb=Da._fullData[Ha[ib]].xaxis,rb=Da._fullData[Ha[ib]].yaxis;if(gb&&rb){for(ob=0;ob<ab.length;ob++)-1===ab[ob].x.indexOf(gb)&&-1===ab[ob].y.indexOf(rb)||db.push(ob);if(db.length){var Bb=ab[db[0]];if(1<db.length)for(ob=1;ob<db.length;ob++){var Qb=ab[db[ob]];N(Bb.x,Qb.x);
N(Bb.y,Qb.y)}N(Bb.x,[gb]);N(Bb.y,[rb])}else ab.push({x:[gb],y:[rb]})}}for(Ha=0;Ha<ab.length;Ha++){var gc;ob=Da;db=ab[Ha].x;gb=ab[Ha].y;Bb=[];Qb=[];rb=ob.layout;for(ib=0;ib<db.length;ib++)Bb.push(Qa.getFromId(ob,db[ib]));for(ib=0;ib<gb.length;ib++)Qb.push(Qa.getFromId(ob,gb[ib]));var tc=Object.keys(ea),Ac="anchor domain overlaying position side tickangle editType".split(" "),Uc=["linear","log"];for(ib=0;ib<tc.length;ib++){var Nc=tc[ib],gd=Bb[0][Nc],Xc=Qb[0][Nc],ed=!0,tb=!1,Xb=!1;if("_"!==Nc.charAt(0)&&
"function"!==typeof gd&&-1===Ac.indexOf(Nc)){for(gc=1;gc<Bb.length&&ed;gc++){var uc=Bb[gc][Nc];"type"===Nc&&-1!==Uc.indexOf(gd)&&-1!==Uc.indexOf(uc)&&gd!==uc?tb=!0:uc!==gd&&(ed=!1)}for(gc=1;gc<Qb.length&&ed;gc++)gd=Qb[gc][Nc],"type"===Nc&&-1!==Uc.indexOf(Xc)&&-1!==Uc.indexOf(gd)&&Xc!==gd?Xb=!0:Qb[gc][Nc]!==Xc&&(ed=!1);if(ed){tb&&(rb[Bb[0]._name].type="linear");Xb&&(rb[Qb[0]._name].type="linear");gc=rb;Xc=Bb;ed=Qb;uc=ob._fullLayout._dfltTitle;tb=U.nestedProperty;Xb=tb(gc[Xc[0]._name],Nc).get();gd=
tb(gc[ed[0]._name],Nc).get();"title"===Nc&&(Xb&&Xb.text===uc.x&&(Xb.text=uc.y),gd&&gd.text===uc.y&&(gd.text=uc.x));for(uc=0;uc<Xc.length;uc++)tb(gc,Xc[uc]._name+"."+Nc).set(gd);for(uc=0;uc<ed.length;uc++)tb(gc,ed[uc]._name+"."+Nc).set(Xb)}}}for(ib=0;ib<ob._fullLayout.annotations.length;ib++)Bb=ob._fullLayout.annotations[ib],-1!==db.indexOf(Bb.xref)&&-1!==gb.indexOf(Bb.yref)&&U.swapAttrs(rb.annotations[ib],["?"])}}},{"../../components/color":615,"../../components/drawing":637,"../../components/titles":710,
"../../constants/alignment":717,"../../constants/numerical":724,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../../registry":880,"./autorange":796,"./axis_autotype":798,"./axis_ids":800,"./clean_ticks":802,"./layout_attributes":811,"./set_convert":817,d3:169,"fast-isnumeric":241}],798:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../../lib"),l=b("../../constants/numerical").BADNUM;F.exports=function(e,a,g){g=g||{};if(g=!g.noMultiCategory)g=h.isArrayOrTypedArray(e[0])&&
h.isArrayOrTypedArray(e[1]);if(g)return"multicategory";g=Math.max(1,(e.length-1)/1E3);for(var k=0,p=0,n={},c=0;c<e.length;c+=g){var f=e[Math.round(c)],d=String(f);n[d]||(n[d]=1,h.isDateTime(f,a)&&(k+=1),m(f)&&(p+=1))}if(k>2*p)return"date";a=Math.max(1,(e.length-1)/1E3);k=g=0;p={};for(n=0;n<e.length;n+=a)c=e[Math.round(n)],f=String(c),p[f]||(p[f]=1,"boolean"===typeof c?k++:h.cleanNumber(c)!==l?g++:"string"===typeof c&&k++);if(k>2*g)return"category";a:{if(e)for(a=0;a<e.length;a++)if(m(e[a])){e=!0;break a}e=
!1}return e?"linear":"-"}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],799:[function(b,F,C){function m(w,y,D){function x(I,L){return a.coerce(w,y,k.rangebreaks,I,L)}if(x("enabled")){var E=x("bounds");if(E&&2<=E.length){var B="",t,G;if(2===E.length)for(t=0;2>t;t++)if(G=h(E[t])){B=r;break}B=x("pattern",B);if(B===r)for(t=0;2>t;t++)(G=h(E[t]))&&(y.bounds[t]=E[t]=G-1);if(B)for(t=0;2>t;t++)switch(G=E[t],B){case r:if(!l(G)){y.enabled=!1;return}G=+G;if(G!==Math.floor(G)||0>G||
7<=G){y.enabled=!1;return}y.bounds[t]=E[t]=G;break;case u:if(!l(G)){y.enabled=!1;return}G=+G;if(0>G||24<G){y.enabled=!1;return}y.bounds[t]=E[t]=G}!1===D.autorange&&(D=D.range,D[0]<D[1]?E[0]<D[0]&&E[1]>D[1]&&(y.enabled=!1):E[0]>D[0]&&E[1]<D[1]&&(y.enabled=!1))}else(E=x("values"))&&E.length?x("dvalue"):y.enabled=!1}}function h(w){if("string"===typeof w)return v[w.substr(0,3).toLowerCase()]}var l=b("fast-isnumeric"),e=b("../../registry"),a=b("../../lib"),g=b("../array_container_defaults"),k=b("./layout_attributes"),
p=b("./tick_value_defaults"),n=b("./tick_mark_defaults"),c=b("./tick_label_defaults"),f=b("./category_order_defaults"),d=b("./line_grid_defaults"),q=b("./set_convert"),r=b("./constants").WEEKDAY_PATTERN,u=b("./constants").HOUR_PATTERN;F.exports=function(w,y,D,x,E){var B=x.letter,t=x.font||{},G=x.splomStash||{},I=D("visible",!x.visibleDflt),L=y._template||{};L=y.type||L.type||"-";"date"===L&&e.getComponentMethod("calendars","handleDefaults")(w,y,"calendar",x.calendar);q(y,E);var M=!y.isValidRange(w.range);
M&&x.reverseDflt&&(M="reversed");!D("autorange",M)||"linear"!==L&&"-"!==L||D("rangemode");D("range");y.cleanRange();f(w,y,D,x);"category"===L||x.noHover||D("hoverformat");M=D("color");var N=M!==k.color.dflt?M:t.color;B=G.label||E._dfltTitle[B];c(w,y,D,L,x,{pass:1});if(!I)return y;D("title.text",B);a.coerceFont(D,"title.font",{family:t.family,size:Math.round(1.2*t.size),color:N});p(w,y,D,L);c(w,y,D,L,x,{pass:2});n(w,y,D,x);d(w,y,D,{dfltColor:M,bgColor:x.bgColor,showGrid:x.showGrid,attributes:k});(y.showline||
y.ticks)&&D("mirror");x.automargin&&D("automargin");t="multicategory"===L;if(!x.noTickson&&("category"===L||t)&&(y.ticks||y.showgrid)){var H;t&&(H="boundaries");D("tickson",H)}t&&D("showdividers")&&(D("dividercolor"),D("dividerwidth"));if("date"===L)if(x.noTicklabelmode||D("ticklabelmode"),g(w,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:m}),y.rangebreaks.length){for(w=0;w<y.rangebreaks.length;w++)if(y.rangebreaks[w].pattern===r){y._hasDayOfWeekBreaks=!0;break}q(y,E);if(E._has("scattergl")||
E._has("splom"))for(E=0;E<x.data.length;E++)if(w=x.data[E],"scattergl"===w.type||"splom"===w.type)w.visible=!1,a.warn(w.type+" traces do not work on axes with rangebreaks. Setting trace "+w.index+" to `visible: false`.")}else delete y.rangebreaks;return y};var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7}},{"../../lib":749,"../../registry":880,"../array_container_defaults":793,"./category_order_defaults":801,"./constants":803,"./layout_attributes":811,"./line_grid_defaults":813,"./set_convert":817,
"./tick_label_defaults":818,"./tick_mark_defaults":819,"./tick_value_defaults":820,"fast-isnumeric":241}],800:[function(b,F,C){var m=b("../../registry"),h=b("./constants");C.id2name=function(l){if("string"===typeof l&&l.match(h.AX_ID_PATTERN)){var e=l.substr(1);"1"===e&&(e="");return l.charAt(0)+"axis"+e}};C.name2id=function(l){if(l.match(h.AX_NAME_PATTERN)){var e=l.substr(5);"1"===e&&(e="");return l.charAt(0)+e}};C.cleanId=function(l,e){if("string"===typeof l&&l.match(h.AX_ID_PATTERN)&&(!e||l.charAt(0)===
e))return e=l.substr(1).replace(/^0+/,""),"1"===e&&(e=""),l.charAt(0)+e};C.list=function(l,e,a){var g=l._fullLayout;if(!g)return[];var k=C.listIds(l,e);l=Array(k.length);var p;for(p=0;p<k.length;p++){var n=k[p];l[p]=g[n.charAt(0)+"axis"+n.substr(1)]}if(!a)for(a=g._subplots.gl3d||[],p=0;p<a.length;p++)k=g[a[p]],e?l.push(k[e+"axis"]):l.push(k.xaxis,k.yaxis,k.zaxis);return l};C.listIds=function(l,e){l=l._fullLayout;if(!l)return[];l=l._subplots;return e?l[e+"axis"]:l.xaxis.concat(l.yaxis)};C.getFromId=
function(l,e,a){l=l._fullLayout;"x"===a?e=e.replace(/y[0-9]*/,""):"y"===a&&(e=e.replace(/x[0-9]*/,""));return l[C.id2name(e)]};C.getFromTrace=function(l,e,a){var g=l._fullLayout,k=null;m.traceIs(e,"gl3d")?(l=e.scene,"scene"===l.substr(0,5)&&(k=g[l][a+"axis"])):k=C.getFromId(l,e[a+"axis"]||a);return k};C.idSort=function(l,e){var a=l.charAt(0),g=e.charAt(0);return a!==g?a>g?1:-1:+(l.substr(1)||1)-+(e.substr(1)||1)};C.getAxisGroup=function(l,e){l=l._axisMatchGroups;for(var a=0;a<l.length;a++)if(l[a][e])return"g"+
a;return e}},{"../../registry":880,"./constants":803}],801:[function(b,F,C){F.exports=function(m,h,l,e){if("category"===h.type){m=m.categoryarray;m=Array.isArray(m)&&0<m.length;var a;m&&(a="array");a=l("categoryorder",a);var g;"array"===a&&(g=l("categoryarray"));m||"array"!==a||(a=h.categoryorder="trace");if("trace"===a)h._initialCategories=[];else if("array"===a)h._initialCategories=g.slice();else{l=e.dataAttr||h._id.charAt(0);g={};var k;if(e.axData)m=e.axData;else for(m=[],k=0;k<e.data.length;k++){var p=
e.data[k];p[l+"axis"]===h._id&&m.push(p)}for(k=0;k<m.length;k++)for(p=m[k][l],e=0;e<p.length;e++){var n=p[e];null!==n&&void 0!==n&&(g[n]=1)}g=Object.keys(g).sort();"category ascending"===a?h._initialCategories=g:"category descending"===a&&(h._initialCategories=g.reverse())}}}},{}],802:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../../lib"),l=b("../../constants/numerical").ONEDAY;C.dtick=function(e,a){var g="log"===a,k="date"===a,p="category"===a;a=k?l:1;if(!e)return a;if(m(e))return e=Number(e),
0>=e?a:p?Math.max(1,Math.round(e)):k?Math.max(.1,e):e;if("string"!==typeof e||!k&&!g)return a;p=e.charAt(0);var n=e.substr(1);n=m(n)?Number(n):0;return 0>=n||!(k&&"M"===p&&n===Math.round(n)||g&&"L"===p||g&&"D"===p&&(1===n||2===n))?a:e};C.tick0=function(e,a,g,k){if("date"===a)return h.cleanDate(e,h.dateTick0(g));if("D1"!==k&&"D2"!==k)return m(e)?Number(e):0}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],803:[function(b,F,C){b=b("../../lib/regex").counter;F.exports={idRegex:{x:b("x"),
y:b("y")},attrRegex:b("[xy]axis"),xAxisMatch:b("xaxis"),yAxisMatch:b("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"imagelayer heatmaplayer contourcarpetlayer contourlayer funnellayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),
clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":765}],804:[function(b,F,C){function m(f,d,q,r,u){var v="range"!==u,w=r[a(d)].type,y;u=[];for(y=0;y<q.length;y++){var D=q[y];if(D!==d){var x=r[a(D)];x.type===w&&(x.fixedrange?v&&x.anchor&&r[a(x.anchor)].fixedrange&&u.push(D):u.push(D))}}for(y=0;y<f.length;y++)if(f[y][d]){f=f[y];d=[];for(y=0;y<u.length;y++)D=u[y],f[D]||d.push(D);
return{linkableAxes:d,thisGroup:f}}return{linkableAxes:u,thisGroup:null}}function h(f,d,q,r,u){var v;if(null===d){d={};d[q]=1;var w=f.length;f.push(d)}else w=f.indexOf(d);var y=Object.keys(d);for(v=0;v<f.length;v++)if(q=f[v],v!==w&&q[r]){var D=q[r];for(v=0;v<y.length;v++)r=y[v],q[r]=D*u*d[r];f.splice(w,1);return}if(1!==u)for(v=0;v<y.length;v++)d[y[v]]*=u;d[r]=1}function l(f,d){var q=f._inputDomain,r=q[0]+(q[1]-q[0])*c[f.constraintoward];f.domain=f._input.domain=[r+(q[0]-r)/d,r+(q[1]-r)/d];f.setScale()}
var e=b("../../lib"),a=b("./axis_ids").id2name,g=b("./scale_zoom"),k=b("./autorange").makePadFn,p=b("./autorange").concatExtremes,n=b("../../constants/numerical").ALMOST_EQUAL,c=b("../../constants/alignment").FROM_BL;C.handleConstraintDefaults=function(f,d,q,r){var u=r.allAxisIds,v=r.layoutOut,w=r.scaleanchorDflt,y=r.constrainDflt;r=v._axisConstraintGroups;var D=v._axisMatchGroups,x=d._id,E=x.charAt(0);E=((v._splomAxes||{})[E]||{})[x]||{};x=d._id;var B=x.charAt(0);y=q("constrain",y);e.coerce(f,d,
{constraintoward:{valType:"enumerated",values:"x"===B?["left","center","right"]:["bottom","middle","top"],dflt:"x"===B?"center":"middle"}},"constraintoward");if((f.matches||E.matches)&&!d.fixedrange){var t=m(D,x,u,v);var G=e.coerce(f,d,{matches:{valType:"enumerated",values:t.linkableAxes||[],dflt:E.matches}},"matches")}if(!(G||d.fixedrange&&"domain"!==y)&&(f.scaleanchor||w)){var I=m(r,x,u,v,y);var L=e.coerce(f,d,{scaleanchor:{valType:"enumerated",values:I.linkableAxes||[]}},"scaleanchor",w)}G?(delete d.constrain,
h(D,t.thisGroup,x,G,1)):-1!==u.indexOf(f.matches)&&e.warn("ignored "+d._name+'.matches: "'+f.matches+'" to avoid either an infinite loop or because the target axis has fixed range.');L?(f=q("scaleratio"),f||(f=d.scaleratio=1),h(r,I.thisGroup,x,L,f)):-1!==u.indexOf(f.scaleanchor)&&e.warn("ignored "+d._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the target axis has fixed range or this axis declares a *matches* constraint.')};
C.enforce=function(f){var d=f._fullLayout,q=d._axisConstraintGroups||[],r,u,v,w;for(r=0;r<q.length;r++){var y=q[r],D=Object.keys(y),x=Infinity,E=0,B=Infinity,t={},G={},I=!1;for(u=0;u<D.length;u++){var L=D[u];G[L]=v=d[a(L)];v._inputDomain?v.domain=v._inputDomain.slice():v._inputDomain=v.domain.slice();v._inputRange||(v._inputRange=v.range.slice());v.setScale();t[L]=w=Math.abs(v._m)/y[L];x=Math.min(x,w);"domain"!==v.constrain&&v._constraintShrinkable||(B=Math.min(B,w));delete v._constraintShrinkable;
E=Math.max(E,w);"domain"===v.constrain&&(I=!0)}if(!(x>n*E)||I)for(u=0;u<D.length;u++)if(L=D[u],w=t[L],v=G[L],L=v.constrain,w!==B||"domain"===L)if(w/=B,"range"===L)g(v,w);else if(L=v._inputDomain,y=(v.domain[1]-v.domain[0])/(L[1]-L[0]),x=(v.r2l(v.range[1])-v.r2l(v.range[0]))/(v.r2l(v._inputRange[1])-v.r2l(v._inputRange[0])),w/=y,1>w*x)v.domain=v._input.domain=L.slice(),g(v,w);else{1>x&&(v.range=v._input.range=v._inputRange.slice(),w*=x);if(v.autorange){L=v.r2l(v.range[0]);y=v.r2l(v.range[1]);var M=
(L+y)/2;E=x=M;I=Math.abs(y-M);var N=M-I*w*1.0001;M+=I*w*1.0001;var H=k(v);l(v,w);var J=Math.abs(v._m),O=p(f,v),Q=O.min;O=O.max;var U;for(U=0;U<Q.length;U++){var P=Q[U].val-H(Q[U])/J;P>N&&P<x&&(x=P)}for(U=0;U<O.length;U++)P=O[U].val+H(O[U])/J,P<M&&P>E&&(E=P);w/=(E-x)/(2*I);x=v.l2r(x);E=v.l2r(E);v.range=v._input.range=L<y?[x,E]:[E,x]}l(v,w)}}};C.clean=function(f,d){if(d._inputDomain){var q=!1,r=d._id;f=f._fullLayout._axisConstraintGroups;for(var u=0;u<f.length;u++)if(f[u][r]){q=!0;break}q&&"domain"===
d.constrain||(d._input.domain=d.domain=d._inputDomain,delete d._inputDomain)}}},{"../../constants/alignment":717,"../../constants/numerical":724,"../../lib":749,"./autorange":796,"./axis_ids":800,"./scale_zoom":815}],805:[function(b,F,C){function m(ra,ta,oa,ua){ta=B.ensureSingle(ra.draglayer,ta,oa,function(ka){ka.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ra.id)});ta.call(N,ua);return ta.node()}function h(ra,ta,oa,ua,ka,sa,ya){ra=m(ra,"rect",ta,oa);y.select(ra).call(I.setRect,
ua,ka,sa,ya);return ra}function l(ra,ta){for(var oa=0;oa<ra.length;oa++)if(!ra[oa].fixedrange)return ta;return""}function e(ra,ta){var oa=ra.range[ta];ta=Math.abs(oa-ra.range[1-ta]);if("date"===ra.type)return oa;if("log"===ra.type)return ra=Math.ceil(Math.max(0,-Math.log(ta)/Math.LN10))+3,y.format("."+ra+"g")(Math.pow(10,oa));ra=Math.floor(Math.log(Math.abs(oa))/Math.LN10)-Math.floor(Math.log(ta)/Math.LN10)+4;return y.format("."+String(ra)+"g")(oa)}function a(ra,ta,oa,ua,ka){for(var sa=0;sa<ra.length;sa++){var ya=
ra[sa];if(!ya.fixedrange)if(ya.rangebreaks){var qa="y"===ya._id.charAt(0),xa=qa?1-oa:oa;ua[ya._name+".range[0]"]=ya.l2r(ya.p2l((qa?1-ta:ta)*ya._length));ua[ya._name+".range[1]"]=ya.l2r(ya.p2l(xa*ya._length))}else qa=ya._rl[0],xa=ya._rl[1]-qa,ua[ya._name+".range[0]"]=ya.l2r(qa+xa*ta),ua[ya._name+".range[1]"]=ya.l2r(qa+xa*oa)}ka&&ka.length&&(ra=(ta+(1-oa))/2,a(ka,ra,1-ra,ua,[]))}function g(ra,ta){for(var oa=0;oa<ra.length;oa++){var ua=ra[oa];if(!ua.fixedrange)if(ua.rangebreaks){var ka=ua._length,sa=
ua.p2l(0+ta)-ua.p2l(0);ka=ua.p2l(ka+ta)-ua.p2l(ka);sa=(sa+ka)/2;ua.range=[ua.l2r(ua._rl[0]-sa),ua.l2r(ua._rl[1]-sa)]}else ua.range=[ua.l2r(ua._rl[0]-ta/ua._m),ua.l2r(ua._rl[1]-ta/ua._m)]}}function k(ra,ta,oa){return ra?"nsew"===ra?oa?"":"pan"===ta?"move":"crosshair":ra.toLowerCase()+"-resize":"pointer"}function p(ra,ta,oa,ua,ka){return ra.append("path").attr("class","zoombox").style({fill:.2<ta?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+oa+", "+ua+")").attr("d",
ka+"Z")}function n(ra,ta,oa){return ra.append("path").attr("class","zoombox-corners").style({fill:G.background,stroke:G.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+ta+", "+oa+")").attr("d","M0,0Z")}function c(ra,ta,oa,ua,ka,sa){ra.attr("d",ua+"M"+oa.l+","+oa.t+"v"+oa.h+"h"+oa.w+"v-"+oa.h+"h-"+oa.w+"Z");f(ra,ta,ka,sa)}function f(ra,ta,oa,ua){oa||(ra.transition().style("fill",.2<ua?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ta.transition().style("opacity",1).duration(200))}
function d(ra){y.select(ra).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function q(ra){pa&&ra.data&&ra._context.showTips&&(B.notifier(B._(ra,"Double-click to zoom back out"),"long"),pa=!1)}function r(ra){var ta=Math.floor(Math.min(ra.b-ra.t,ra.r-ra.l,na)/2);return"M"+(ra.l-3.5)+","+(ra.t-.5+ta)+"h3v"+-ta+"h"+ta+"v-3h-"+(ta+3)+"ZM"+(ra.r+3.5)+","+(ra.t-.5+ta)+"h-3v"+-ta+"h"+-ta+"v-3h"+(ta+3)+"ZM"+(ra.r+3.5)+","+(ra.b+.5-ta)+"h-3v"+ta+"h"+-ta+"v3h"+(ta+3)+"ZM"+
(ra.l-3.5)+","+(ra.b+.5-ta)+"h3v"+ta+"h"+ta+"v3h-"+(ta+3)+"Z"}function u(ra,ta,oa,ua){for(var ka=!1,sa={},ya={},qa,xa,Ca,Ja,eb=0;eb<ta.length;eb++){var Ra=ta[eb];for(qa in oa)if(Ra[qa]){for(Ca in Ra)("x"===Ca.charAt(0)?oa:ua)[Ca]||(sa[Ca]=qa);for(xa in ua)Ra[xa]&&(ka=!0)}for(xa in ua)if(Ra[xa])for(Ja in Ra)("x"===Ja.charAt(0)?oa:ua)[Ja]||(ya[Ja]=xa)}ka&&(B.extendFlat(sa,ya),ya={});ta={};oa=[];for(Ca in sa)ua=Y(ra,Ca),oa.push(ua),ta[ua._id]=ua;Ca={};ua=[];for(Ja in ya)qa=Y(ra,Ja),ua.push(qa),Ca[qa._id]=
qa;return{xaHash:ta,yaHash:Ca,xaxes:oa,yaxes:ua,xLinks:sa,yLinks:ya,isSubplotConstrained:ka}}function v(ra,ta){if(x){var oa=void 0!==ra.onwheel?"wheel":"mousewheel";ra._onwheel&&ra.removeEventListener(oa,ra._onwheel);ra._onwheel=ta;ra.addEventListener(oa,ta,{passive:!1})}else void 0!==ra.onwheel?ra.onwheel=ta:void 0!==ra.onmousewheel?ra.onmousewheel=ta:ra.isAddedWheelEvent||(ra.isAddedWheelEvent=!0,ra.addEventListener("wheel",ta,{passive:!1}))}function w(ra){var ta=[],oa;for(oa in ra)ta.push(ra[oa]);
return ta}var y=b("d3"),D=b("tinycolor2"),x=b("has-passive-events"),E=b("../../registry"),B=b("../../lib"),t=b("../../lib/svg_text_utils"),G=b("../../components/color"),I=b("../../components/drawing"),L=b("../../components/fx"),M=b("./axes"),N=b("../../lib/setcursor"),H=b("../../components/dragelement");C=b("../../components/dragelement/helpers");var J=C.selectingOrDrawing,O=C.freeMode,Q=b("../../constants/alignment").FROM_TL,U=b("../../lib/clear_gl_canvases"),P=b("../../plot_api/subroutines").redrawReglTraces,
V=b("../plots"),Y=b("./axis_ids").getFromId,ba=b("./select").prepSelect,ea=b("./select").clearSelect,ca=b("./select").selectOnClick,ia=b("./scale_zoom"),fa=b("./constants"),ha=fa.MINDRAG,na=fa.MINZOOM,pa=!0;F.exports={makeDragBox:function(ra,ta,oa,ua,ka,sa,ya,qa){function xa(){nb=ta.xaxis;Da=ta.yaxis;rb=nb._length;Bb=Da._length;db=nb._offset;gb=Da._offset;Ha={};Ha[nb._id]=nb;ab={};ab[Da._id]=Da;if(ya&&qa)for(var ic=ta.overlays,Bc=0;Bc<ic.length;Bc++){var Sc=ic[Bc].xaxis;Ha[Sc._id]=Sc;Sc=ic[Bc].yaxis;
ab[Sc._id]=Sc}ib=w(Ha);ob=w(ab);tc=l(ib,qa);Ac=l(ob,ya);Uc=!Ac&&!tc;Qb=u(ra,ra._fullLayout._axisConstraintGroups,Ha,ab);gc=u(ra,ra._fullLayout._axisMatchGroups,Ha,ab);Nc=qa||Qb.isSubplotConstrained||gc.isSubplotConstrained;gd=ya||Qb.isSubplotConstrained||gc.isSubplotConstrained;ic=ra._fullLayout;Xc=ic._has("scattergl");ed=ic._has("splom");tb=ic._has("svg")}function Ca(ic,Bc){var Sc=Rc.gd;if(0<=Sc._fullLayout._activeShapeIndex)Sc._fullLayout._deactivateShape(Sc);else{var Ic=Sc._fullLayout.clickmode;
d(Sc);2!==ic||Ya||hb();if(Ta)-1<Ic.indexOf("select")&&ca(Bc,Sc,ib,ob,ta.id,Rc),-1<Ic.indexOf("event")&&L.click(Sc,Bc,ta.id);else if(1===ic&&Ya){var $c=ya?Da:nb;ic="s"===ya||"w"===qa?0:1;var nd=$c._name+".range["+ic+"]";ic=e($c,ic);Bc="left";Ic="middle";if(!$c.fixedrange&&(ya?(Ic="n"===ya?"top":"bottom","right"===$c.side&&(Bc="right")):"e"===qa&&(Bc="right"),Sc._context.showAxisRangeEntryBoxes))y.select(Mc).call(t.makeEditable,{gd:Sc,immediate:!0,background:Sc._fullLayout.paper_bgcolor,text:String(ic),
fill:$c.tickfont?$c.tickfont.color:"#444",horizontalAlign:Bc,verticalAlign:Ic}).on("edit",function(Yc){Yc=$c.d2r(Yc);void 0!==Yc&&E.call("_guiRelayout",Sc,nd,Yc)})}}}function Ja(ic,Bc,Sc){ic=Mc.getBoundingClientRect();fd=Bc-ic.left;sb=Sc-ic.top;xb={l:fd,r:fd,w:0,t:sb,b:sb,h:0};kc=ra._hmpixcount?ra._hmlumcount/ra._hmpixcount:D(ra._fullLayout.plot_bgcolor).getLuminance();nc="M0,0H"+rb+"V"+Bb+"H0V0";Kc=!1;ac="xy";Gb=!1;Tb=p(Pa,kc,db,gb,nc);yb=n(Pa,db,gb)}function eb(ic,Bc){function Sc(){ac="";xb.r=xb.l;
xb.t=xb.b;yb.attr("d","M0,0Z")}if(ra._transitioningWithDuration)return!1;ic=Math.max(0,Math.min(rb,ic+fd));Bc=Math.max(0,Math.min(Bb,Bc+sb));var Ic=Math.abs(ic-fd),$c=Math.abs(Bc-sb);xb.l=Math.min(fd,ic);xb.r=Math.max(fd,ic);xb.t=Math.min(sb,Bc);xb.b=Math.max(sb,Bc);Qb.isSubplotConstrained?Ic>na||$c>na?(ac="xy",Ic/rb>$c/Bb?($c=Ic*Bb/rb,sb>Bc?xb.t=sb-$c:xb.b=sb+$c):(Ic=$c*rb/Bb,fd>ic?xb.l=fd-Ic:xb.r=fd+Ic),yb.attr("d",r(xb))):Sc():gc.isSubplotConstrained?Ic>na||$c>na?(ac="xy",ic=Math.min(xb.l/rb,(Bb-
xb.b)/Bb),Bc=Math.max(xb.r/rb,(Bb-xb.t)/Bb),xb.l=ic*rb,xb.r=Bc*rb,xb.b=(1-ic)*Bb,xb.t=(1-Bc)*Bb,yb.attr("d",r(xb))):Sc():!Ac||$c<Math.min(Math.max(.6*Ic,ha),na)?Ic<ha||!tc?Sc():(xb.t=0,xb.b=Bb,ac="x",yb.attr("d","M"+(xb.l-.5)+","+(sb-na-.5)+"h-3v"+(2*na+1)+"h3ZM"+(xb.r+.5)+","+(sb-na-.5)+"h3v"+(2*na+1)+"h-3Z")):!tc||Ic<Math.min(.6*$c,na)?(xb.l=0,xb.r=rb,ac="y",yb.attr("d","M"+(fd-na-.5)+","+(xb.t-.5)+"v-3h"+(2*na+1)+"v3ZM"+(fd-na-.5)+","+(xb.b+.5)+"v3h"+(2*na+1)+"v-3Z")):(ac="xy",yb.attr("d",r(xb)));
xb.w=xb.r-xb.l;xb.h=xb.b-xb.t;ac&&(Gb=!0);ra._dragged=Gb;c(Tb,yb,xb,nc,Kc,kc);Ra();ra.emit("plotly_relayouting",Xb);Kc=!0}function Ra(){Xb={};if("xy"===ac||"x"===ac)a(ib,xb.l/rb,xb.r/rb,Xb,Qb.xaxes),Qa("x",Xb);if("xy"===ac||"y"===ac)a(ob,(Bb-xb.b)/Bb,(Bb-xb.t)/Bb,Xb,Qb.yaxes),Qa("y",Xb)}function Wa(){Ra();d(ra);Fa();q(ra)}function Ea(ic){function Bc(Yc,rd,wd){if(!Yc.fixedrange){var cd=B.simpleMap(Yc.range,Yc.r2l),Jc=cd[0]+(cd[1]-cd[0])*rd;Yc.range=cd.map(function(sd){return Yc.l2r(Jc+(sd-Jc)*wd)})}}
if(ra._context._scrollZoom.cartesian||ra._fullLayout._enablescrollzoom)if(Rc.plotinfo.selection=!1,ea(ra),ra._transitioningWithDuration)ic.preventDefault(),ic.stopPropagation();else{xa();clearTimeout(Vb);var Sc=-ic.deltaY;isFinite(Sc)||(Sc=ic.wheelDelta/10);if(isFinite(Sc)){Sc=Math.exp(-Math.min(Math.max(Sc,-20),20)/200);var Ic=Dc.draglayer.select(".nsewdrag").node().getBoundingClientRect(),$c=(ic.clientX-Ic.left)/Ic.width;Ic=(Ic.bottom-ic.clientY)/Ic.height;var nd;if(Nc){qa||($c=.5);for(nd=0;nd<
ib.length;nd++)Bc(ib[nd],$c,Sc);Qa("x");Eb[2]*=Sc;Eb[0]+=Eb[2]*$c*(1/Sc-1)}if(gd){ya||(Ic=.5);for(nd=0;nd<ob.length;nd++)Bc(ob[nd],Ic,Sc);Qa("y");Eb[3]*=Sc;Eb[1]+=Eb[3]*(1-Ic)*(1/Sc-1)}La(Eb);lb();ra.emit("plotly_relayouting",Xb);Vb=setTimeout(function(){Eb=[0,0,rb,Bb];Fa()},Zb);ic.preventDefault()}else B.log("Did not find wheel motion attributes: ",ic)}}function Ia(ic,Bc){function Sc(Yc,rd,wd){for(var cd=1-rd,Jc,sd,ud=0;ud<Yc.length;ud++){var yd=Yc[ud];if(!yd.fixedrange){Jc=yd;sd=wd/yd._length;sd=
yd._rl[cd]+(yd._rl[rd]-yd._rl[cd])/(1-(0<=sd?Math.min(sd,.9):1/(1/Math.max(sd,-.3)+3.222)));var cb=yd.l2r(sd);!1!==cb&&void 0!==cb&&(yd.range[rd]=cb)}}return Jc._length*(Jc._rl[rd]-sd)/(Jc._rl[rd]-Jc._rl[cd])}if(!ra._transitioningWithDuration){ra._fullLayout._replotting=!0;if("ew"===tc||"ns"===Ac)tc&&(g(ib,ic),Qa("x")),Ac&&(g(ob,Bc),Qa("y")),La([tc?-ic:0,Ac?-Bc:0,rb,Bb]);else{if(Qb.isSubplotConstrained&&tc&&Ac){var Ic="w"===tc===("n"===Ac)?1:-1;Bc=(ic/rb+Ic*Bc/Bb)/2;ic=Bc*rb;Bc=Ic*Bc*Bb}"w"===tc?
ic=Sc(ib,0,ic):"e"===tc?ic=Sc(ib,1,-ic):tc||(ic=0);"n"===Ac?Bc=Sc(ob,1,Bc):"s"===Ac?Bc=Sc(ob,0,-Bc):Ac||(Bc=0);Ic="w"===tc?ic:0;var $c="n"===Ac?Bc:0;if(Qb.isSubplotConstrained){var nd;if(!tc&&1===Ac.length){for(nd=0;nd<ib.length;nd++)ib[nd].range=ib[nd]._r.slice(),ia(ib[nd],1-Bc/Bb);ic=Bc*rb/Bb;Ic=ic/2}if(!Ac&&1===tc.length){for(nd=0;nd<ob.length;nd++)ob[nd].range=ob[nd]._r.slice(),ia(ob[nd],1-ic/rb);Bc=ic*Bb/rb;$c=Bc/2}}Qa("x");Qa("y");La([Ic,$c,rb-ic,Bb-Bc])}lb();ra.emit("plotly_relayouting",Xb)}}
function Qa(ic,Bc){var Sc=gc.isSubplotConstrained?{x:ob,y:ib}[ic]:gc[ic+"axes"];ic=gc.isSubplotConstrained?{x:ib,y:ob}[ic]:[];for(var Ic=0;Ic<Sc.length;Ic++){var $c=Sc[Ic],nd=$c._id;nd=gc.xLinks[nd]||gc.yLinks[nd];if(nd=ic[0]||Ha[nd]||ab[nd])Bc?(Bc[$c._name+".range[0]"]=Bc[nd._name+".range[0]"],Bc[$c._name+".range[1]"]=Bc[nd._name+".range[1]"]):$c.range=nd.range.slice()}}function lb(){function ic($c){for(Sc=0;Sc<$c.length;Sc++)$c[Sc].fixedrange||Bc.push($c[Sc]._id)}var Bc=[],Sc;Nc&&(ic(ib),ic(Qb.xaxes),
ic(gc.xaxes));gd&&(ic(ob),ic(Qb.yaxes),ic(gc.yaxes));Xb={};for(Sc=0;Sc<Bc.length;Sc++){var Ic=Y(ra,Bc[Sc]);M.drawOne(ra,Ic,{skipTitle:!0});Xb[Ic._name+".range[0]"]=Ic.range[0];Xb[Ic._name+".range[1]"]=Ic.range[1]}M.redrawComponents(ra,Bc)}function hb(){if(!ra._transitioningWithDuration){var ic=ra._context.doubleClick,Bc=[];tc&&(Bc=Bc.concat(ib));Ac&&(Bc=Bc.concat(ob));gc.xaxes&&(Bc=Bc.concat(gc.xaxes));gc.yaxes&&(Bc=Bc.concat(gc.yaxes));var Sc={},Ic;if("reset+autosize"===ic)for(ic="autosize",Ic=0;Ic<
Bc.length;Ic++){var $c=Bc[Ic];if($c._rangeInitial&&($c.range[0]!==$c._rangeInitial[0]||$c.range[1]!==$c._rangeInitial[1])||!$c._rangeInitial&&!$c.autorange){ic="reset";break}}if("autosize"===ic)for(Ic=0;Ic<Bc.length;Ic++)$c=Bc[Ic],$c.fixedrange||(Sc[$c._name+".autorange"]=!0);else if("reset"===ic){if(tc||Qb.isSubplotConstrained)Bc=Bc.concat(Qb.xaxes);Ac&&!Qb.isSubplotConstrained&&(Bc=Bc.concat(Qb.yaxes));Qb.isSubplotConstrained&&(tc?Ac||(Bc=Bc.concat(ob)):Bc=Bc.concat(ib));for(Ic=0;Ic<Bc.length;Ic++)$c=
Bc[Ic],$c.fixedrange||($c._rangeInitial?(ic=$c._rangeInitial,Sc[$c._name+".range[0]"]=ic[0],Sc[$c._name+".range[1]"]=ic[1]):Sc[$c._name+".autorange"]=!0)}ra.emit("plotly_doubleclick",null);E.call("_guiRelayout",ra,Sc)}}function Fa(){La([0,0,rb,Bb]);B.syncOrAsync([V.previousPromises,function(){ra._fullLayout._replotting=!1;E.call("_guiRelayout",ra,Xb)}],ra)}function La(ic){var Bc=ra._fullLayout,Sc=Bc._plots;Bc=Bc._subplots.cartesian;var Ic;ed&&E.subplotsRegistry.splom.drag(ra);if(Xc)for(Ic=0;Ic<Bc.length;Ic++){var $c=
Sc[Bc[Ic]];var nd=$c.xaxis;var Yc=$c.yaxis;if($c._scene){var rd=B.simpleMap(nd.range,nd.r2l);Yc=B.simpleMap(Yc.range,Yc.r2l);$c._scene.update({range:[rd[0],Yc[0],rd[1],Yc[1]]})}}if(ed||Xc)U(ra),P(ra);if(tb){rd=ic[2]/nb._length;var wd=ic[3]/Da._length;for(Ic=0;Ic<Bc.length;Ic++){$c=Sc[Bc[Ic]];nd=$c.xaxis;Yc=$c.yaxis;var cd=gd&&!Yc.fixedrange&&ab[Yc._id];if(Nc&&!nd.fixedrange&&Ha[nd._id]){var Jc=rd;var sd=qa?ic[0]:bb(nd,Jc)}else gc.xaHash[nd._id]?(Jc=rd,sd=ic[0]*nd._length/nb._length):gc.yaHash[nd._id]?
(Jc=wd,sd="ns"===Ac?-ic[1]*nd._length/Da._length:bb(nd,Jc,{n:"top",s:"bottom"}[Ac])):(Jc=Oa(nd,rd,wd),sd=fb(nd,Jc));if(cd){cd=wd;var ud=ya?ic[1]:bb(Yc,cd)}else gc.yaHash[Yc._id]?(cd=wd,ud=ic[1]*Yc._length/Da._length):gc.xaHash[Yc._id]?(cd=rd,ud="ew"===tc?-ic[0]*Yc._length/nb._length:bb(Yc,cd,{e:"right",w:"left"}[tc])):(cd=Oa(Yc,rd,wd),ud=fb(Yc,cd));if(Jc||cd){Jc||(Jc=1);cd||(cd=1);nd=nd._offset-sd/Jc;Yc=Yc._offset-ud/cd;$c.clipRect.call(I.setTranslate,sd,ud).call(I.setScale,Jc,cd);$c.plot.call(I.setTranslate,
nd,Yc).call(I.setScale,1/Jc,1/cd);if(Jc!==$c.xScaleFactor||cd!==$c.yScaleFactor)I.setPointGroupScale($c.zoomScalePts,Jc,cd),I.setTextPointsScale($c.zoomScaleTxt,Jc,cd);I.hideOutsideRangePoints($c.clipOnAxisFalseTraces,$c);$c.xScaleFactor=Jc;$c.yScaleFactor=cd}}}}function Oa(ic,Bc,Sc){return ic.fixedrange?0:Nc&&Qb.xaHash[ic._id]?Bc:gd&&(Qb.isSubplotConstrained?Qb.xaHash:Qb.yaHash)[ic._id]?Sc:0}function fb(ic,Bc){return Bc?(ic.range=ic._r.slice(),ia(ic,Bc),bb(ic,Bc)):0}function bb(ic,Bc,Sc){return ic._length*
(1-Bc)*Q[Sc||ic.constraintoward||"middle"]}var Pa=ra._fullLayout._zoomlayer,Ta="nsew"===ya+qa,Ya=1===(ya+qa).length,nb,Da,Ha,ab,ib,ob,db,gb,rb,Bb,Qb,gc,tc,Ac,Uc,Nc,gd,Xc,ed,tb,Xb;xa();var uc=k(Ac+tc,ra._fullLayout.dragmode,Ta),Mc=h(ta,ya+qa+"drag",uc,oa,ua,ka,sa);if(Uc&&!Ta)return Mc.onmousedown=null,Mc.style.pointerEvents="none",Mc;var Rc={element:Mc,gd:ra,plotinfo:ta,prepFn:function(ic,Bc,Sc){var Ic=Rc.dragmode,$c=ra._fullLayout.dragmode;$c!==Ic&&(Rc.dragmode=$c);xa();Uc||(Ta?ic.shiftKey?"pan"===
$c?$c="zoom":J($c)||($c="pan"):ic.ctrlKey&&($c="pan"):$c="pan");O($c)?Rc.minDrag=1:Rc.minDrag=void 0;J($c)?(Rc.xaxes=ib,Rc.yaxes=ob,ba(ic,Bc,Sc,Rc,$c)):(Rc.clickFn=Ca,J(Ic)&&(Rc.plotinfo.selection=!1,ea(ra)),Uc||("zoom"===$c?(Rc.moveFn=eb,Rc.doneFn=Wa,Rc.minDrag=1,Ja(ic,Bc,Sc)):"pan"===$c&&(Rc.moveFn=Ia,Rc.doneFn=Fa)));ra._fullLayout._redrag=function(){var nd=ra._dragdata;nd&&nd.element===Mc&&!J(ra._fullLayout.dragmode)&&(xa(),La([0,0,rb,Bb]),Rc.moveFn(nd.dx,nd.dy))}}};H.init(Rc);var fd,sb,xb,kc,
nc,Kc,ac,Tb,yb,Gb,Eb=[0,0,rb,Bb],Vb=null,Zb=fa.REDRAWDELAY,Dc=ta.mainplot?ra._fullLayout._plots[ta.mainplot]:ta;1!==ya.length*qa.length&&v(Mc,Ea);return Mc},makeDragger:m,makeRectDragger:h,makeZoombox:p,makeCorners:n,updateZoombox:c,xyCorners:r,transitionZoombox:f,removeZoombox:d,showDoubleClickNotifier:q,attachWheelEventHandler:v}},{"../../components/color":615,"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../constants/alignment":717,
"../../lib":749,"../../lib/clear_gl_canvases":733,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plot_api/subroutines":788,"../../registry":880,"../plots":860,"./axes":797,"./axis_ids":800,"./constants":803,"./scale_zoom":815,"./select":816,d3:169,"has-passive-events":415,tinycolor2:548}],806:[function(b,F,C){var m=b("d3"),h=b("../../components/fx"),l=b("../../components/dragelement"),e=b("../../lib/setcursor"),a=b("./dragbox").makeDragBox,g=b("./constants").DRAGGERSIZE;C.initInteractions=
function(k){var p=k._fullLayout;if(k._context.staticPlot)m.select(k).selectAll(".drag").remove();else if(p._has("cartesian")||p._has("splom")){Object.keys(p._plots||{}).sort(function(c,f){return(p._plots[c].mainplot&&!0)===(p._plots[f].mainplot&&!0)?(c=c.split("y"),f=f.split("y"),c[0]===f[0]?Number(c[1]||1)-Number(f[1]||1):Number(c[0]||1)-Number(f[0]||1)):p._plots[c].mainplot?1:-1}).forEach(function(c){var f=p._plots[c],d=f.xaxis,q=f.yaxis;if(!f.mainplot){var r=a(k,f,d._offset,q._offset,d._length,
q._length,"ns","ew");r.onmousemove=function(v){k._fullLayout._rehover=function(){k._fullLayout._hoversubplot===c&&k._fullLayout._plots[c]&&h.hover(k,v,c)};h.hover(k,v,c);k._fullLayout._lasthover=r;k._fullLayout._hoversubplot=c};r.onmouseout=function(v){k._dragging||(k._fullLayout._hoversubplot=null,l.unhover(k,v))};k._context.showAxisDragHandles&&(a(k,f,d._offset-g,q._offset-g,g,g,"n","w"),a(k,f,d._offset+d._length,q._offset-g,g,g,"n","e"),a(k,f,d._offset-g,q._offset+q._length,g,g,"s","w"),a(k,f,
d._offset+d._length,q._offset+q._length,g,g,"s","e"))}if(k._context.showAxisDragHandles){if(c===d._mainSubplot){var u=d._mainLinePosition;"top"===d.side&&(u-=g);a(k,f,d._offset+.1*d._length,u,.8*d._length,g,"","ew");a(k,f,d._offset,u,.1*d._length,g,"","w");a(k,f,d._offset+.9*d._length,u,.1*d._length,g,"","e")}c===q._mainSubplot&&(d=q._mainLinePosition,"right"!==q.side&&(d-=g),a(k,f,d,q._offset+.1*q._length,g,.8*q._length,"ns",""),a(k,f,d,q._offset+.9*q._length,g,.1*q._length,"s",""),a(k,f,d,q._offset,
g,.1*q._length,"n",""))}});var n=p._hoverlayer.node();n.onmousemove=function(c){c.target=k._fullLayout._lasthover;h.hover(k,c,p._hoversubplot)};n.onclick=function(c){c.target=k._fullLayout._lasthover;h.click(k,c)};n.onmousedown=function(c){k._fullLayout._lasthover.onmousedown(c)};C.updateFx(k)}};C.updateFx=function(k){k=k._fullLayout;e(k._draggers,"pan"===k.dragmode?"move":"crosshair")}},{"../../components/dragelement":634,"../../components/fx":655,"../../lib/setcursor":769,"./constants":803,"./dragbox":805,
d3:169}],807:[function(b,F,C){F.exports={clearOutlineControllers:function(m){(m=m._fullLayout._zoomlayer)&&m.selectAll(".outline-controllers").remove()},clearSelect:function(m){var h=m._fullLayout._zoomlayer;h&&h.selectAll(".select-outline").remove();m._fullLayout._drawing=!1}}},{}],808:[function(b,F,C){function m(h,l){switch(h.type){case "log":return h.p2d(l);case "date":return h.p2r(l,0,h.calendar);default:return h.p2r(l)}}F.exports={p2r:m,r2p:function(h,l){switch(h.type){case "log":return h.d2p(l);
case "date":return h.r2p(l,0,h.calendar);default:return h.r2p(l)}},axValue:function(h){var l="y"===h._id.charAt(0)?1:0;return function(e){return m(h,e[l])}},getTransform:function(h){return"translate("+h.xaxis._offset+","+h.yaxis._offset+")"}}},{}],809:[function(b,F,C){var m=b("../../registry"),h=b("../../lib");F.exports=function(l){return function(e,a){e=e[l];if(Array.isArray(e)){var g=m.subplotsRegistry.cartesian,k=g.idRegex,p=a._subplots,n=p.xaxis,c=p.yaxis;p=p.cartesian;for(var f=a._has("cartesian")||
a._has("gl2d"),d=0;d<e.length;d++){var q=e[d];if(h.isPlainObject(q)){var r=q.xref;q=q.yref;var u=k.x.test(r),v=k.y.test(q);if(u||v){f||h.pushUnique(a._basePlotModules,g);var w=!1;u&&-1===n.indexOf(r)&&(n.push(r),w=!0);v&&-1===c.indexOf(q)&&(c.push(q),w=!0);w&&u&&v&&p.push(r+q)}}}}}}},{"../../lib":749,"../../registry":880}],810:[function(b,F,C){function m(w,y,D){return n.ensureSingle(w,y,D,function(x){x.datum(D)})}function h(w,y,D,x,E){for(var B=r.traceLayerClasses,t=w._fullLayout,G=t._modules,I,L,
M=[],N=[],H=0;H<G.length;H++){I=G[H];L=I.name;var J=p.modules[L].categories;if(J.svg){var O=I.layerName||L+"layer";I=I.plot;D=d(D,I);L=D[0];D=D[1];L.length&&M.push({i:B.indexOf(O),className:O,plotMethod:I,cdModule:L});J.zoomScale&&N.push("."+O)}}M.sort(function(Q,U){return Q.i-U.i});B=y.plot.selectAll("g.mlayer").data(M,function(Q){return Q.className});B.enter().append("g").attr("class",function(Q){return Q.className}).classed("mlayer",!0).classed("rangeplot",y.isRangePlot);B.exit().remove();B.order();
B.each(function(Q){var U=k.select(this),P=Q.className;Q.plotMethod(w,y,Q.cdModule,U,x,E);-1===r.clipOnAxisFalseQuery.indexOf("."+P)&&f.setClipUrl(U,y.layerClipId,w)});t._has("scattergl")&&(I=p.getModule("scattergl"),L=d(D,I)[0],I.plot(w,y,L));w._context.staticPlot||(y._hasClipOnAxisFalse&&(y.clipOnAxisFalseTraces=y.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),N.length&&(t=y.plot.selectAll(N.join(",")).selectAll(".trace"),y.zoomScalePts=t.selectAll("path.point"),y.zoomScaleTxt=
t.selectAll(".textpoint")))}function l(w){w=w._fullLayout;var y=w._subplots.cartesian,D=y.length,x,E=[],B=[];for(x=0;x<D;x++){var t=y[x];var G=w._plots[t];var I=G.xaxis;var L=G.yaxis;I=I._mainAxis._id+L._mainAxis._id;L=w._plots[I];G.overlays=[];I!==t&&L?(G.mainplot=I,G.mainplotinfo=L,B.push(t)):(G.mainplot=void 0,G.mainplotinfo=void 0,E.push(t))}for(x=0;x<B.length;x++)t=B[x],G=w._plots[t],G.mainplotinfo.overlays.push(G);y=E.concat(B);E=Array(D);for(x=0;x<D;x++){t=y[x];G=w._plots[t];I=G.xaxis;L=G.yaxis;
I=[t,I.layer,L.layer,I.overlaying||"",L.overlaying||""];for(t=0;t<G.overlays.length;t++)I.push(G.overlays[t].id);E[x]=I}return E}function e(w,y){var D=y.plotgroup,x=y.id,E=r.layerValue2layerClass[y.xaxis.layer],B=r.layerValue2layerClass[y.yaxis.layer];w=w._fullLayout._hasOnlyLargeSploms;if(y.mainplot){D=y.mainplotinfo;var t=D.plotgroup,G=x+"-x",I=x+"-y";y.gridlayer=D.gridlayer;y.zerolinelayer=D.zerolinelayer;v(D.overlinesBelow,"path",G);v(D.overlinesBelow,"path",I);v(D.overaxesBelow,"g",G);v(D.overaxesBelow,
"g",I);y.plot=v(D.overplot,"g",x);v(D.overlinesAbove,"path",G);v(D.overlinesAbove,"path",I);v(D.overaxesAbove,"g",G);v(D.overaxesAbove,"g",I);y.xlines=t.select(".overlines-"+E).select("."+G);y.ylines=t.select(".overlines-"+B).select("."+I);y.xaxislayer=t.select(".overaxes-"+E).select("."+G);y.yaxislayer=t.select(".overaxes-"+B).select("."+I)}else w?(y.xlines=v(D,"path","xlines-above"),y.ylines=v(D,"path","ylines-above"),y.xaxislayer=v(D,"g","xaxislayer-above"),y.yaxislayer=v(D,"g","yaxislayer-above")):
(x=v(D,"g","layer-subplot"),y.shapelayer=v(x,"g","shapelayer"),y.imagelayer=v(x,"g","imagelayer"),y.gridlayer=v(D,"g","gridlayer"),y.zerolinelayer=v(D,"g","zerolinelayer"),v(D,"path","xlines-below"),v(D,"path","ylines-below"),y.overlinesBelow=v(D,"g","overlines-below"),v(D,"g","xaxislayer-below"),v(D,"g","yaxislayer-below"),y.overaxesBelow=v(D,"g","overaxes-below"),y.plot=v(D,"g","plot"),y.overplot=v(D,"g","overplot"),y.xlines=v(D,"path","xlines-above"),y.ylines=v(D,"path","ylines-above"),y.overlinesAbove=
v(D,"g","overlines-above"),v(D,"g","xaxislayer-above"),v(D,"g","yaxislayer-above"),y.overaxesAbove=v(D,"g","overaxes-above"),y.xlines=D.select(".xlines-"+E),y.ylines=D.select(".ylines-"+B),y.xaxislayer=D.select(".xaxislayer-"+E),y.yaxislayer=D.select(".yaxislayer-"+B));w||(m(y.gridlayer,"g",y.xaxis._id),m(y.gridlayer,"g",y.yaxis._id),y.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(q.idSort));y.xlines.style("fill","none").classed("crisp",!0);y.ylines.style("fill","none").classed("crisp",
!0)}function a(w,y){if(w){var D={};w.each(function(t){t=t[0];k.select(this).remove();g(t,y);D[t]=!0});for(var x in y._plots){w=y._plots[x].overlays||[];for(var E=0;E<w.length;E++){var B=w[E];D[B.id]&&B.plot.selectAll(".trace").remove()}}}}function g(w,y){y._draggers.selectAll("g."+w).remove();y._defs.select("#clip"+y._uid+w+"plot").remove()}var k=b("d3"),p=b("../../registry"),n=b("../../lib"),c=b("../plots"),f=b("../../components/drawing"),d=b("../get_data").getModuleCalcData,q=b("./axis_ids"),r=
b("./constants"),u=b("../../constants/xmlns_namespaces"),v=n.ensureSingle;C.name="cartesian";C.attr=["xaxis","yaxis"];C.idRoot=["x","y"];C.idRegex=r.idRegex;C.attrRegex=r.attrRegex;C.attributes=b("./attributes");C.layoutAttributes=b("./layout_attributes");C.supplyLayoutDefaults=b("./layout_defaults");C.transitionAxes=b("./transition_axes");C.finalizeSubplots=function(w,y){var D=y._subplots;y=D.xaxis;var x=D.yaxis,E=D.cartesian;D=E.concat(D.gl2d||[]);var B={},t={},G;for(G=0;G<D.length;G++){var I=D[G].split("y");
B[I[0]]=1;t["y"+I[1]]=1}for(G=0;G<y.length;G++)if(I=y[G],!B[I]){var L=(w[q.id2name(I)]||{}).anchor;r.idRegex.y.test(L)||(L="y");E.push(I+L);D.push(I+L);t[L]||(t[L]=1,n.pushUnique(x,L))}for(G=0;G<x.length;G++)L=x[G],t[L]||(I=(w[q.id2name(L)]||{}).anchor,r.idRegex.x.test(I)||(I="x"),E.push(I+L),D.push(I+L),B[I]||(B[I]=1,n.pushUnique(y,I)));if(!D.length){L=I="";for(var M in w)if(r.attrRegex.test(M))if("x"===M.charAt(0)){if(!I||+M.substr(5)<+I.substr(5))I=M}else if(!L||+M.substr(5)<+L.substr(5))L=M;I=
I?q.name2id(I):"x";L=L?q.name2id(L):"y";y.push(I);x.push(L);E.push(I+L)}};C.plot=function(w,y,D,x){var E=w._fullLayout,B=E._subplots.cartesian,t=w.calcdata,G;if(!Array.isArray(y))for(y=[],G=0;G<t.length;G++)y.push(G);for(G=0;G<B.length;G++){for(var I=B[G],L=E._plots[I],M=[],N,H=0;H<t.length;H++){var J=t[H],O=J[0].trace;if(O.xaxis+O.yaxis===I){if(-1!==y.indexOf(O.index)||O.carpet)N&&N[0].trace.xaxis+N[0].trace.yaxis===I&&-1!==["tonextx","tonexty","tonext"].indexOf(O.fill)&&-1===M.indexOf(N)&&M.push(N),
M.push(J);N=J}}h(w,L,M,D,x)}};C.clean=function(w,y,D,x){var E=x._plots||{};w=y._plots||{};D=x._subplots||{};var B;if(x._hasOnlyLargeSploms&&!y._hasOnlyLargeSploms)for(B in E){var t=E[B];t.plotgroup&&t.plotgroup.remove()}t=x._has&&x._has("gl");var G=y._has&&y._has("gl");if(t&&!G)for(B in E)t=E[B],t._scene&&t._scene.destroy();if(D.xaxis&&D.yaxis)for(E=q.listIds({_fullLayout:x}),B=0;B<E.length;B++)t=E[B],y[q.id2name(t)]||x._infolayer.selectAll(".g-"+t+"title").remove();B=x._has&&x._has("cartesian");
y=y._has&&y._has("cartesian");if(B&&!y)a(x._cartesianlayer.selectAll(".subplot"),x),x._defs.selectAll(".axesclip").remove(),delete x._axisConstraintGroups;else if(D.cartesian)for(B=0;B<D.cartesian.length;B++)y=D.cartesian[B],w[y]||(x._cartesianlayer.selectAll("."+y+",."+y+"-x,."+y+"-y").remove(),g(y,x))};C.drawFramework=function(w){var y=w._fullLayout,D=l(w);D=y._cartesianlayer.selectAll(".subplot").data(D,String);D.enter().append("g").attr("class",function(x){return"subplot "+x[0]});D.order();D.exit().call(a,
y);D.each(function(x){x=x[0];var E=y._plots[x];E.plotgroup=k.select(this);e(w,E);E.draglayer=v(y._draggers,"g",x)})};C.rangePlot=function(w,y,D){e(w,y);h(w,y,D);c.style(w)};C.toSVG=function(w){var y=w._fullLayout._glimages,D=k.select(w).selectAll(".svg-container");D.filter(function(x,E){return E===D.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var x=this.toDataURL("image/png");y.append("svg:image").attr({xmlns:u.svg,"xlink:href":x,preserveAspectRatio:"none",x:0,y:0,
width:this.width,height:this.height})})};C.updateFx=b("./graph_interact").updateFx},{"../../components/drawing":637,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../registry":880,"../get_data":834,"../plots":860,"./attributes":795,"./axis_ids":800,"./constants":803,"./graph_interact":806,"./layout_attributes":811,"./layout_defaults":812,"./transition_axes":821,d3:169}],811:[function(b,F,C){C=b("../font_attributes");var m=b("../../components/color/attributes"),h=b("../../components/drawing/attributes").dash,
l=b("../../lib/extend").extendFlat,e=b("../../plot_api/plot_template").templatedArray;b("../../constants/docs");b("../../constants/docs");var a=b("../../constants/numerical").ONEDAY;b=b("./constants");var g=b.HOUR_PATTERN,k=b.WEEKDAY_PATTERN;F.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:m.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:C({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},
type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",
impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),editType:"plot"},
matches:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[k,g,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",
min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",
""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",
dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:l({},h,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:C({editType:"ticks"}),
tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",
values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",
editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:m.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:m.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},
zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],
editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:"trace;category ascending;category descending;array;total ascending;total descending;min ascending;min descending;max ascending;max descending;sum ascending;sum descending;mean ascending;mean descending;median ascending;median descending".split(";"),
dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:C({editType:"ticks"})}}},{"../../components/color/attributes":614,"../../components/drawing/attributes":636,"../../constants/docs":719,"../../constants/numerical":724,"../../lib/extend":739,"../../plot_api/plot_template":787,"../font_attributes":825,
"./constants":803}],812:[function(b,F,C){function m(y,D,x){Array.isArray(y[D])?y[D].push(x):y[D]=[x]}var h=b("../../lib"),l=b("../../components/color"),e=b("../../components/fx/helpers").isUnifiedHover,a=b("../../components/fx/hovermode_defaults"),g=b("../../plot_api/plot_template"),k=b("../layout_attributes"),p=b("./layout_attributes"),n=b("./type_defaults"),c=b("./axis_defaults"),f=b("./constraints").handleConstraintDefaults,d=b("./position_defaults");C=b("./axis_ids");var q=C.id2name,r=C.name2id,
u=b("./constants").AX_ID_PATTERN;b=b("../../registry");var v=b.traceIs,w=b.getComponentMethod;F.exports=function(y,D,x){function E(){sa._traceIndices=(L[oa]||[]).map(function(Wa){return Wa._expandedIndex});sa._annIndices=[];sa._shapeIndices=[];sa._imgIndices=[];sa._subplotsWith=[];sa._counterAxes=[];sa._name=sa._attr=oa;sa._id=ua}function B(Wa,Ea){return h.coerce(ka,sa,p,Wa,Ea)}function t(Wa,Ea){return h.coerce2(ka,sa,p,Wa,Ea)}function G(Wa,Ea){Wa="x"===Wa?fa:ha;for(var Ia=[],Qa=0;Qa<Wa.length;Qa++){var lb=
Wa[Qa];lb===Ea||(y[lb]||{}).overlaying||Ia.push(r(lb))}return Ia}function I(){var Wa=ka.matches;u.test(Wa)&&-1===na.indexOf(Wa)&&(pa[Wa]=ka.type,ra=Object.keys(pa))}var L={},M={},N={},H={},J={},O={},Q={},U={},P={},V={},Y,ba;for(Y=0;Y<x.length;Y++){var ea=x[Y];if(v(ea,"cartesian")||v(ea,"gl2d")){if(ea.xaxis){var ca=q(ea.xaxis);m(L,ca,ea)}else if(ea.xaxes)for(ba=0;ba<ea.xaxes.length;ba++)m(L,q(ea.xaxes[ba]),ea);if(ea.yaxis){var ia=q(ea.yaxis);m(L,ia,ea)}else if(ea.yaxes)for(ba=0;ba<ea.yaxes.length;ba++)m(L,
q(ea.yaxes[ba]),ea);"funnel"===ea.type?"h"===ea.orientation?(ca&&(M[ca]=!0),ia&&(Q[ia]=!0)):ia&&(N[ia]=!0):"image"===ea.type?(ia&&(U[ia]=!0),ca&&(U[ca]=!0)):(ia&&(J[ia]=!0,O[ia]=!0),(!v(ea,"carpet")||"carpet"===ea.type&&!ea._cheater)&&ca&&(H[ca]=!0));"carpet"===ea.type&&ea._cheater&&ca&&(M[ca]=!0);v(ea,"2dMap")&&(P[ca]=!0,P[ia]=!0);v(ea,"oriented")&&(V["h"===ea.orientation?ia:ca]=!0)}}ba=D._subplots;Y=ba.xaxis;ca=ba.yaxis;var fa=h.simpleMap(Y,q),ha=h.simpleMap(ca,q);ba=fa.concat(ha);ea=l.background;
Y.length&&ca.length&&(ea=h.coerce(y,D,k,"plot_bgcolor"));ea=l.combine(ea,D.paper_bgcolor);ca={x:ca,y:Y};var na=ca.x.concat(ca.y),pa={},ra=[];ia=a(y,D,x);var ta=e(ia);for(Y=0;Y<ba.length;Y++){var oa=ba[Y];var ua=r(oa);x=oa.charAt(0);h.isPlainObject(y[oa])||(y[oa]={});var ka=y[oa];var sa=g.newContainer(D,oa,x+"axis");E();var ya={letter:x,font:D.font,outerTicks:P[oa],showGrid:!V[oa],data:L[oa]||[],bgColor:ea,calendar:D.calendar,automargin:!0,visibleDflt:"x"===x&&!H[oa]&&M[oa]||"y"===x&&!J[oa]&&N[oa],
reverseDflt:"y"===x&&(!O[oa]&&Q[oa]||U[oa]),splomStash:((D._splomAxes||{})[x]||{})[ua]};B("uirevision",D.uirevision);n(ka,sa,B,ya);c(ka,sa,B,ya,D);ya=ta&&x===ia.charAt(0);var qa=t("spikecolor",ta?sa.color:void 0),xa=t("spikethickness",ta?1.5:void 0),Ca=t("spikedash",ta?"dot":void 0),Ja=t("spikemode",ta?"across":void 0),eb=t("spikesnap",ta?"hovered data":void 0);B("showspikes",!!ya||!!qa||!!xa||!!Ca||!!Ja||!!eb)||(delete sa.spikecolor,delete sa.spikethickness,delete sa.spikedash,delete sa.spikemode,
delete sa.spikesnap);d(ka,sa,B,{letter:x,counterAxes:ca[x],overlayableAxes:G(x,oa),grid:D.grid});B("title.standoff");I();sa._input=ka}for(Y=0;Y<ra.length;)ua=ra[Y++],oa=q(ua),x=oa.charAt(0),h.isPlainObject(y[oa])||(y[oa]={}),ka=y[oa],sa=g.newContainer(D,oa,x+"axis"),E(),M={letter:x,font:D.font,outerTicks:P[oa],showGrid:!V[oa],data:[],bgColor:ea,calendar:D.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,splomStash:((D._splomAxes||{})[x]||{})[ua]},B("uirevision",D.uirevision),sa.type=pa[ua]||"linear",
c(ka,sa,B,M,D),d(ka,sa,B,{letter:x,counterAxes:ca[x],overlayableAxes:G(x,oa),grid:D.grid}),B("fixedrange"),I(),sa._input=ka;P=w("rangeslider","handleDefaults");V=w("rangeselector","handleDefaults");for(Y=0;Y<fa.length;Y++)oa=fa[Y],ka=y[oa],sa=D[oa],P(y,D,oa),"date"===sa.type&&V(ka,sa,D,ha,sa.calendar),B("fixedrange");for(Y=0;Y<ha.length;Y++)oa=ha[Y],ka=y[oa],sa=D[oa],P=D[q(sa.anchor)],P=w("rangeslider","isVisible")(P),B("fixedrange",P);P=D._axisConstraintGroups=[];V=D._axisMatchGroups=[];M=na.concat(ra);
ba=ba.concat(h.simpleMap(ra,q));for(Y=0;Y<ba.length;Y++)oa=ba[Y],x=oa.charAt(0),ka=y[oa],sa=D[oa],N="y"===x&&!ka.hasOwnProperty("scaleanchor")&&U[oa]?sa.anchor:void 0,H=!ka.hasOwnProperty("constrain")&&U[oa]?"domain":void 0,f(ka,sa,B,{allAxisIds:M,layoutOut:D,scaleanchorDflt:N,constrainDflt:H});for(Y=0;Y<V.length;Y++){U=V[Y];M=ba=null;for(ua in U)sa=D[q(ua)],sa.matches||(ba=sa.range,M=sa.autorange);if(null===ba||null===M)for(ua in U){sa=D[q(ua)];ba=sa.range;M=sa.autorange;break}for(ua in U)sa=D[q(ua)],
sa.matches&&(sa.range=ba.slice(),sa.autorange=M),sa._matchGroup=U;if(P.length)for(ua in U)for(ba=0;ba<P.length;ba++){U=P[ba];for(var Ra in U)ua===Ra&&(h.warn("Axis "+Ra+" is set with both a *scaleanchor* and *matches* constraint; ignoring the scale constraint."),delete U[Ra],2>Object.keys(U).length&&P.splice(ba,1))}}}},{"../../components/color":615,"../../components/fx/helpers":651,"../../components/fx/hovermode_defaults":654,"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880,
"../layout_attributes":851,"./axis_defaults":799,"./axis_ids":800,"./constants":803,"./constraints":804,"./layout_attributes":811,"./position_defaults":814,"./type_defaults":822}],813:[function(b,F,C){var m=b("tinycolor2").mix,h=b("../../components/color/attributes").lightFraction,l=b("../../lib");F.exports=function(e,a,g,k){function p(d,q){return l.coerce2(e,a,k.attributes,d,q)}k=k||{};var n=k.dfltColor,c=p("linecolor",n),f=p("linewidth");g("showline",k.showLine||!!c||!!f)||(delete a.linecolor,delete a.linewidth);
c=m(n,k.bgColor,k.blend||h).toRgbString();c=p("gridcolor",c);f=p("gridwidth");g("showgrid",k.showGrid||!!c||!!f)||(delete a.gridcolor,delete a.gridwidth);k.noZeroLine||(n=p("zerolinecolor",n),c=p("zerolinewidth"),g("zeroline",k.showGrid||!!n||!!c)||(delete a.zerolinecolor,delete a.zerolinewidth))}},{"../../components/color/attributes":614,"../../lib":749,tinycolor2:548}],814:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../../lib");F.exports=function(l,e,a,g){var k=g.counterAxes||[],p=g.overlayableAxes||
[],n=g.letter;g=g.grid;if(g){var c=g._domains[n][g._axisMap[e._id]];var f=g._anchors[e._id];if(c){var d=g[n+"side"].split(" ")[0];var q=g.domain[n]["right"===d||"top"===d?1:0]}}c=c||[0,1];f=f||(m(l.position)?"free":k[0]||"free");d=d||("x"===n?"bottom":"left");q=q||0;"free"===h.coerce(l,e,{anchor:{valType:"enumerated",values:["free"].concat(k),dflt:f}},"anchor")&&a("position",q);h.coerce(l,e,{side:{valType:"enumerated",values:"x"===n?["bottom","top"]:["left","right"],dflt:d}},"side");k=!1;p.length&&
(k=h.coerce(l,e,{overlaying:{valType:"enumerated",values:[!1].concat(p),dflt:!1}},"overlaying"));k||(p=a("domain",c),p[0]>p[1]-1/4096&&(e.domain=c),h.noneOrAll(l.domain,e.domain,c));a("layer");return e}},{"../../lib":749,"fast-isnumeric":241}],815:[function(b,F,C){var m=b("../../constants/alignment").FROM_BL;F.exports=function(h,l,e){void 0===e&&(e=m[h.constraintoward||"center"]);var a=[h.r2l(h.range[0]),h.r2l(h.range[1])];e=a[0]+(a[1]-a[0])*e;h.range=h._input.range=[h.l2r(e+(a[0]-e)*l),h.l2r(e+(a[1]-
e)*l)]}},{"../../constants/alignment":717}],816:[function(b,F,C){function m(fa,ha,na,pa,ra,ta,oa){var ua=ha._hoverdata,ka=-1<ha._fullLayout.clickmode.indexOf("event"),sa=[],ya;if(ua&&Array.isArray(ua)&&!0!==ua[0].hoverOnBox){a(fa,ha,ta);na=k(ha,na,pa,ra);ua=ua[0];pa=-1;ra=[];var qa;for(qa=0;qa<na.length;qa++){var xa=na[qa];if(ua.fullData._expandedIndex===xa.cd[0].trace._expandedIndex){if(!0===ua.hoverOnBox)break;void 0!==ua.pointNumber?pa=ua.pointNumber:void 0!==ua.binNumber&&(pa=ua.binNumber,ra=
ua.pointNumbers);break}}xa={pointNumber:pa,pointNumbers:ra,searchInfo:xa};if(0<xa.pointNumbers.length)a:{pa=[];for(ua=0;ua<na.length;ua++)ra=na[ua],ra.cd[0].trace.selectedpoints&&0<ra.cd[0].trace.selectedpoints.length&&pa.push(ra);if(1===pa.length&&(ua=pa[0]===xa.searchInfo)&&(pa=xa.searchInfo.cd[0].trace,pa.selectedpoints.length===xa.pointNumbers.length)){for(ua=0;ua<xa.pointNumbers.length;ua++)if(0>pa.selectedpoints.indexOf(xa.pointNumbers[ua])){ua=!1;break a}ua=!0;break a}ua=!1}else{a:{for(pa=
ua=0;pa<na.length;pa++)if(ra=na[pa],ra=ra.cd[0].trace,ra.selectedpoints){if(1<ra.selectedpoints.length){ua=!1;break a}ua+=ra.selectedpoints.length;if(1<ua){ua=!1;break a}}ua=1===ua}ua=ua&&(ya=p(xa))}if(ua){oa&&oa.remove();for(ya=0;ya<na.length;ya++)oa=na[ya],oa._module.selectPoints(oa,!1);n(ha,na);g(ta);ka&&ha.emit("plotly_deselect",null)}else{fa=fa.shiftKey&&(void 0!==ya?ya:p(xa));fa={pointNumber:xa.pointNumber,searchInfo:xa.searchInfo,subtract:fa};ya=ta.selectionDefs.concat([fa]);xa=e(ya);for(ya=
0;ya<na.length;ya++)if(ua=na[ya]._module.selectPoints(na[ya],xa),ua=f(ua,na[ya]),sa.length)for(pa=0;pa<ua.length;pa++)sa.push(ua[pa]);else sa=ua;sa={points:sa};n(ha,na,sa);fa&&ta&&ta.selectionDefs.push(fa);oa&&(na=ta.mergedPolygons,fa=B(ta.dragmode),G(d(na,fa),oa,ta));ka&&ha.emit("plotly_selected",sa)}}}function h(fa){return"pointNumber"in fa&&"searchInfo"in fa}function l(fa){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ha,na,pa,ra){return ra.cd[0].trace._expandedIndex===fa.searchInfo.cd[0].trace._expandedIndex&&
pa===fa.pointNumber},isRect:!1,degenerate:!1,subtract:fa.subtract}}function e(fa){for(var ha=[],na=h(fa[0])?0:fa[0][0][0],pa=na,ra=h(fa[0])?0:fa[0][0][1],ta=ra,oa=0;oa<fa.length;oa++)if(h(fa[oa]))ha.push(l(fa[oa]));else{var ua=N.tester(fa[oa]);ua.subtract=fa[oa].subtract;ha.push(ua);na=Math.min(na,ua.xmin);pa=Math.max(pa,ua.xmax);ra=Math.min(ra,ua.ymin);ta=Math.max(ta,ua.ymax)}return{xmin:na,xmax:pa,ymin:ra,ymax:ta,pts:[],contains:function(ka,sa,ya,qa){for(var xa=!1,Ca=0;Ca<ha.length;Ca++)ha[Ca].contains(ka,
sa,ya,qa)&&(xa=!1===ha[Ca].subtract);return xa},isRect:!1,degenerate:!1}}function a(fa,ha,na){ha._fullLayout._drawing=!1;var pa=ha._fullLayout,ra=na.plotinfo,ta=na.dragmode,oa=pa._lastSelectedSubplot&&pa._lastSelectedSubplot===ra.id;fa=(fa.shiftKey||fa.altKey)&&!(E(ta)&&B(ta));oa&&fa&&ra.selection&&ra.selection.selectionDefs&&!na.selectionDefs?(na.selectionDefs=ra.selection.selectionDefs,na.mergedPolygons=ra.selection.mergedPolygons):fa&&ra.selection||g(na);oa||(ba(ha),pa._lastSelectedSubplot=ra.id)}
function g(fa){var ha=fa.dragmode,na=fa.plotinfo,pa=fa.gd;0<=pa._fullLayout._activeShapeIndex&&pa._fullLayout._deactivateShape(pa);E(ha)&&(ha=pa._fullLayout._zoomlayer.selectAll(".select-outline-"+na.id))&&pa._fullLayout._drawing&&((ha=L(ha,fa))&&r.call("_guiRelayout",pa,{shapes:ha}),pa._fullLayout._drawing=!1);na.selection={};na.selection.selectionDefs=fa.selectionDefs=[];na.selection.mergedPolygons=fa.mergedPolygons=[]}function k(fa,ha,na,pa){function ra(qa,xa,Ca,Ja){return{_module:qa,cd:xa,xaxis:Ca,
yaxis:Ja}}var ta=[],oa=ha.map(function(qa){return qa._id}),ua=na.map(function(qa){return qa._id}),ka;for(ka=0;ka<fa.calcdata.length;ka++){var sa=fa.calcdata[ka];var ya=sa[0].trace;!0===ya.visible&&ya._module&&ya._module.selectPoints&&(!pa||ya.subplot!==pa&&ya.geo!==pa?"splom"===ya.type&&ya._xaxes[oa[0]]&&ya._yaxes[ua[0]]?(sa=ra(ya._module,sa,ha[0],na[0]),sa.scene=fa._fullLayout._splomScenes[ya.uid],ta.push(sa)):"sankey"===ya.type?(ya=ra(ya._module,sa,ha[0],na[0]),ta.push(ya)):-1!==oa.indexOf(ya.xaxis)&&
-1!==ua.indexOf(ya.yaxis)&&ta.push(ra(ya._module,sa,J(fa,ya.xaxis),J(fa,ya.yaxis))):ta.push(ra(ya._module,sa,ha[0],na[0])))}return ta}function p(fa){var ha=fa.searchInfo.cd[0].trace,na=fa.pointNumber;fa=fa.pointNumbers;na=0<fa.length?fa[0]:na;return ha.selectedpoints?-1<ha.selectedpoints.indexOf(na):!1}function n(fa,ha,na){var pa;for(pa=0;pa<ha.length;pa++){var ra=ha[pa].cd[0].trace._fullInput;var ta=fa._fullLayout._tracePreGUI[ra.uid]||{};void 0===ta.selectedpoints&&(ta.selectedpoints=ra._input.selectedpoints||
null)}if(na){na=na.points||[];for(pa=0;pa<ha.length;pa++){var oa=ha[pa].cd[0].trace;oa._input.selectedpoints=oa._fullInput.selectedpoints=[];oa._fullInput!==oa&&(oa.selectedpoints=[])}for(pa=0;pa<na.length;pa++){ra=na[pa];ta=ra.data;var ua=ra.fullData;ra.pointIndices?([].push.apply(ta.selectedpoints,ra.pointIndices),oa._fullInput!==oa&&[].push.apply(ua.selectedpoints,ra.pointIndices)):(ta.selectedpoints.push(ra.pointIndex),oa._fullInput!==oa&&ua.selectedpoints.push(ra.pointIndex))}}else for(pa=0;pa<
ha.length;pa++)oa=ha[pa].cd[0].trace,delete oa.selectedpoints,delete oa._input.selectedpoints,oa._fullInput!==oa&&delete oa._fullInput.selectedpoints;ra=!1;for(pa=0;pa<ha.length;pa++)if(ta=ha[pa],na=ta.cd,oa=na[0].trace,r.traceIs(oa,"regl")&&(ra=!0),oa=ta._module,oa=oa.styleOnSelect||oa.style)oa(fa,na,na[0].node3),na[0].nodeRangePlot3&&oa(fa,na,na[0].nodeRangePlot3);ra&&(O(fa),Q(fa))}function c(fa,ha,na){if(na)return fa=q.difference({regions:fa,inverted:!1},{regions:[ha],inverted:!1}),fa.regions;
fa=q.union({regions:fa,inverted:!1},{regions:[ha],inverted:!1});return fa.regions}function f(fa,ha){if(Array.isArray(fa)){var na=ha.cd;ha=ha.cd[0].trace;for(var pa=0;pa<fa.length;pa++)fa[pa]=y(fa[pa],ha,na)}return fa}function d(fa,ha){for(var na=[],pa=0;pa<fa.length;pa++){na[pa]=[];for(var ra=0;ra<fa[pa].length;ra++){na[pa][ra]=[];na[pa][ra][0]=ra?"L":"M";for(var ta=0;ta<fa[pa][ra].length;ta++)na[pa][ra].push(fa[pa][ra][ta])}ha||na[pa].push(["Z",na[pa][0][1],na[pa][0][2]])}return na}var q=b("polybooljs"),
r=b("../../registry"),u=b("../../components/drawing").dashStyle,v=b("../../components/color"),w=b("../../components/fx"),y=b("../../components/fx/helpers").makeEventData;C=b("../../components/dragelement/helpers");var D=C.freeMode,x=C.rectMode,E=C.drawMode,B=C.openMode,t=C.selectMode,G=b("../../components/shapes/draw_newshape/display_outlines"),I=b("../../components/shapes/draw_newshape/helpers").handleEllipse,L=b("../../components/shapes/draw_newshape/newshapes"),M=b("../../lib"),N=b("../../lib/polygon"),
H=b("../../lib/throttle"),J=b("./axis_ids").getFromId,O=b("../../lib/clear_gl_canvases"),Q=b("../../plot_api/subroutines").redrawReglTraces,U=b("./constants"),P=U.MINSELECT,V=N.filter,Y=N.tester,ba=b("./handle_outline").clearSelect;b=b("./helpers");var ea=b.p2r,ca=b.axValue,ia=b.getTransform;F.exports={prepSelect:function(fa,ha,na,pa,ra){function ta(Bb,Qb){return Bb-Qb}var oa=D(ra),ua=x(ra),ka=B(ra),sa=E(ra),ya=t(ra),qa="drawcircle"===ra,xa="drawline"===ra||qa,Ca=pa.gd,Ja=Ca._fullLayout,eb=Ja._zoomlayer,
Ra=pa.element.getBoundingClientRect(),Wa=pa.plotinfo,Ea=ia(Wa),Ia=ha-Ra.left,Qa=na-Ra.top,lb=Ia,hb=Qa;ha="M"+Ia+","+Qa;var Fa=pa.xaxes[0]._length,La=pa.yaxes[0]._length,Oa=pa.xaxes.concat(pa.yaxes),fb=fa.altKey&&!(E(ra)&&ka),bb,Pa,Ta,Ya,nb,Da,Ha;a(fa,Ca,pa);oa&&(bb=V([[Ia,Qa]],U.BENDPX));var ab=eb.selectAll("path.select-outline-"+Wa.id).data(sa?[0]:[1,2]);fa=Ja.newshape;ab.enter().append("path").attr("class",function(Bb){return"select-outline select-outline-"+Bb+" select-outline-"+Wa.id}).style(sa?
{opacity:fa.opacity/2,fill:ka?void 0:fa.fillcolor,stroke:fa.line.color,"stroke-dasharray":u(fa.line.dash,fa.line.width),"stroke-width":fa.line.width+"px"}:{}).attr("fill-rule",fa.fillrule).classed("cursor-move",sa?!0:!1).attr("transform",Ea).attr("d",ha+"Z");var ib=eb.append("path").attr("class","zoombox-corners").style({fill:v.background,stroke:v.defaultLine,"stroke-width":1}).attr("transform",Ea).attr("d","M0,0Z"),ob=Ja._uid+U.SELECTID,db=[],gb=k(Ca,pa.xaxes,pa.yaxes,pa.subplot);var rb=Wa.fillRangeItems?
Wa.fillRangeItems:ua?function(Bb,Qb){Bb=Bb.range={};for(nb=0;nb<Oa.length;nb++){var gc=Oa[nb],tc=gc._id.charAt(0);Bb[gc._id]=[ea(gc,Qb[tc+"min"]),ea(gc,Qb[tc+"max"])].sort(ta)}}:function(Bb,Qb,gc){Bb=Bb.lassoPoints={};for(nb=0;nb<Oa.length;nb++)Qb=Oa[nb],Bb[Qb._id]=gc.filtered.map(ca(Qb))};pa.moveFn=function(Bb,Qb){lb=Math.max(0,Math.min(Fa,Bb+Ia));hb=Math.max(0,Math.min(La,Qb+Qa));Bb=Math.abs(lb-Ia);Qb=Math.abs(hb-Qa);if(ua){if(ya){var gc=Ja.selectdirection;gc="any"===gc?Qb<Math.min(.6*Bb,P)?"h":
Bb<Math.min(.6*Qb,P)?"v":"d":gc;switch(gc){case "h":var tc=qa?La/2:0;var Ac=La;break;case "v":tc=qa?Fa/2:0,Ac=Fa}}if(sa)switch(Ja.newshape.drawdirection){case "vertical":gc="h";tc=qa?La/2:0;Ac=La;break;case "horizontal":gc="v";tc=qa?Fa/2:0;Ac=Fa;break;case "ortho":Bb<Qb?(gc="h",tc=Qa,Ac=hb):(gc="v",tc=Ia,Ac=lb);break;default:gc="d"}"h"===gc?(Ya=xa?I(qa,[lb,tc],[lb,Ac]):[[Ia,tc],[Ia,Ac],[lb,Ac],[lb,tc]],Ya.xmin=xa?lb:Math.min(Ia,lb),Ya.xmax=xa?lb:Math.max(Ia,lb),Ya.ymin=Math.min(tc,Ac),Ya.ymax=Math.max(tc,
Ac),ib.attr("d","M"+Ya.xmin+","+(Qa-P)+"h-4v"+2*P+"h4ZM"+(Ya.xmax-1)+","+(Qa-P)+"h4v"+2*P+"h-4Z")):"v"===gc?(Ya=xa?I(qa,[tc,hb],[Ac,hb]):[[tc,Qa],[tc,hb],[Ac,hb],[Ac,Qa]],Ya.xmin=Math.min(tc,Ac),Ya.xmax=Math.max(tc,Ac),Ya.ymin=xa?hb:Math.min(Qa,hb),Ya.ymax=xa?hb:Math.max(Qa,hb),ib.attr("d","M"+(Ia-P)+","+Ya.ymin+"v-4h"+2*P+"v4ZM"+(Ia-P)+","+(Ya.ymax-1)+"v4h"+2*P+"v-4Z")):"d"===gc&&(Ya=xa?I(qa,[Ia,Qa],[lb,hb]):[[Ia,Qa],[Ia,hb],[lb,hb],[lb,Qa]],Ya.xmin=Math.min(Ia,lb),Ya.xmax=Math.max(Ia,lb),Ya.ymin=
Math.min(Qa,hb),Ya.ymax=Math.max(Qa,hb),ib.attr("d","M0,0Z"))}else oa&&(bb.addPt([lb,hb]),Ya=bb.filtered);pa.selectionDefs&&pa.selectionDefs.length?(Ta=c(pa.mergedPolygons,Ya,fb),Ya.subtract=fb,Pa=e(pa.selectionDefs.concat([Ya]))):(Ta=[Ya],Pa=Y(Ya));G(d(Ta,ka),ab,pa);ya&&H.throttle(ob,U.SELECTDELAY,function(){db=[];var Uc=[];for(nb=0;nb<gb.length;nb++){Da=gb[nb];var Nc=Da._module.selectPoints(Da,Pa);Uc.push(Nc);Nc=f(Nc,Da);if(db.length)for(var gd=0;gd<Nc.length;gd++)db.push(Nc[gd]);else db=Nc}Ha=
{points:db};n(Ca,gb,Ha);rb(Ha,Ya,bb);pa.gd.emit("plotly_selecting",Ha)})};pa.clickFn=function(Bb,Qb){ib.remove();if(0<=Ca._fullLayout._activeShapeIndex)Ca._fullLayout._deactivateShape(Ca);else if(!sa){var gc=Ja.clickmode;H.done(ob).then(function(){H.clear(ob);if(2===Bb){ab.remove();for(nb=0;nb<gb.length;nb++)Da=gb[nb],Da._module.selectPoints(Da,!1);n(Ca,gb);g(pa);Ca.emit("plotly_deselect",null)}else-1<gc.indexOf("select")&&m(Qb,Ca,pa.xaxes,pa.yaxes,pa.subplot,pa,ab),"event"===gc&&Ca.emit("plotly_selected",
void 0);w.click(Ca,Qb)}).catch(M.error)}};pa.doneFn=function(){ib.remove();H.done(ob).then(function(){H.clear(ob);pa.gd.emit("plotly_selected",Ha);Ya&&pa.selectionDefs&&(Ya.subtract=fb,pa.selectionDefs.push(Ya),pa.mergedPolygons.length=0,[].push.apply(pa.mergedPolygons,Ta));pa.doneFnCompleted&&pa.doneFnCompleted(db)}).catch(M.error);sa&&g(pa)}},clearSelect:ba,clearSelectionsCache:g,selectOnClick:m}},{"../../components/color":615,"../../components/dragelement/helpers":633,"../../components/drawing":637,
"../../components/fx":655,"../../components/fx/helpers":651,"../../components/shapes/draw_newshape/display_outlines":700,"../../components/shapes/draw_newshape/helpers":701,"../../components/shapes/draw_newshape/newshapes":702,"../../lib":749,"../../lib/clear_gl_canvases":733,"../../lib/polygon":761,"../../lib/throttle":774,"../../plot_api/subroutines":788,"../../registry":880,"./axis_ids":800,"./constants":803,"./handle_outline":807,"./helpers":808,polybooljs:491}],817:[function(b,F,C){function m(t){return Math.pow(10,
t)}var h=b("d3"),l=b("d3-time-format").utcFormat,e=b("fast-isnumeric"),a=b("../../lib"),g=a.cleanNumber,k=a.ms2DateTime,p=a.dateTime2ms,n=a.ensureNumber,c=a.isArrayOrTypedArray;C=b("../../constants/numerical");var f=C.FP_SAFE,d=C.BADNUM,q=C.LOG_CLIP,r=C.ONEWEEK,u=C.ONEDAY,v=C.ONEHOUR,w=C.ONEMIN,y=C.ONESEC,D=b("./axis_ids"),x=b("./constants"),E=x.HOUR_PATTERN,B=x.WEEKDAY_PATTERN;F.exports=function(t,G){function I(ea,ca){return 0<ea?Math.log(ea)/Math.LN10:0>=ea&&ca&&t.range&&2===t.range.length?(ea=
t.range[0],ca=t.range[1],.5*(ea+ca-2*q*Math.abs(ea-ca))):d}function L(ea,ca,ia,fa){if((fa||{}).msUTC&&e(ea))return+ea;ca=p(ea,ia||t.calendar);if(ca===d)if(e(ea))ea=+ea,ca=Math.floor(10*a.mod(ea+.05,1)),ca=p(new Date(Math.round(ea-ca/10)))+ca/10;else return d;return ca}function M(ea,ca,ia){return k(ea,ca,ia||t.calendar)}function N(ea){return t._categories[Math.round(ea)]}function H(ea){if(null!==ea&&void 0!==ea){void 0===t._categoriesMap&&(t._categoriesMap={});if(void 0!==t._categoriesMap[ea])return t._categoriesMap[ea];
t._categories.push("number"===typeof ea?String(ea):ea);var ca=t._categories.length-1;return t._categoriesMap[ea]=ca}return d}function J(ea){if(t._categoriesMap)return t._categoriesMap[ea]}function O(ea){var ca=J(ea);if(void 0!==ca)return ca;if(e(ea))return+ea}G=G||{};var Q=t._id||"x",U=Q.charAt(0),P=function(ea){return e(ea)?h.round(t._b+t._m*ea,2):d},V=function(ea){return(ea-t._b)/t._m};if(t.rangebreaks){var Y="y"===U;P=function(ea){if(!e(ea))return d;var ca=t._rangebreaks.length;if(!ca)return h.round(t._b+
t._m*ea,2);var ia=Y;t.range[0]>t.range[1]&&(ia=!ia);ia=ia?-1:1;for(var fa=ia*ea,ha=0,na=0;na<ca;na++){var pa=ia*t._rangebreaks[na].min,ra=ia*t._rangebreaks[na].max;if(fa<pa)break;if(fa>ra)ha=na+1;else{ha=fa<(pa+ra)/2?na:na+1;break}}ca=t._B[ha]||0;return isFinite(ca)?h.round(ca+t._m2*ea,2):0};V=function(ea){var ca=t._rangebreaks.length;if(!ca)return(ea-t._b)/t._m;for(var ia=0,fa=0;fa<ca&&!(ea<t._rangebreaks[fa].pmin);fa++)ea>t._rangebreaks[fa].pmax&&(ia=fa+1);return(ea-t._B[ia])/t._m2}}t.c2l="log"===
t.type?I:n;t.l2c="log"===t.type?m:n;t.l2p=P;t.p2l=V;t.c2p="log"===t.type?function(ea,ca){return P(I(ea,ca))}:P;t.p2c="log"===t.type?function(ea){return m(V(ea))}:V;-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=g,t.c2d=t.c2r=t.l2d=t.l2r=n,t.d2p=t.r2p=function(ea){return t.l2p(g(ea))},t.p2d=t.p2r=V,t.cleanPos=n):"log"===t.type?(t.d2r=t.d2l=function(ea,ca){return I(g(ea),ca)},t.r2d=t.r2c=function(ea){return m(g(ea))},t.d2c=t.r2l=g,t.c2d=t.l2r=n,t.c2r=I,t.l2d=m,t.d2p=function(ea,
ca){return t.l2p(t.d2r(ea,ca))},t.p2d=function(ea){return m(V(ea))},t.r2p=function(ea){return t.l2p(g(ea))},t.p2r=V,t.cleanPos=n):"date"===t.type?(t.d2r=t.r2d=a.identity,t.d2c=t.r2c=t.d2l=t.r2l=L,t.c2d=t.c2r=t.l2d=t.l2r=M,t.d2p=t.r2p=function(ea,ca,ia){return t.l2p(L(ea,0,ia))},t.p2d=t.p2r=function(ea,ca,ia){return M(V(ea),ca,ia)},t.cleanPos=function(ea){return a.cleanDate(ea,d,t.calendar)}):"category"===t.type?(t.d2c=t.d2l=H,t.r2d=t.c2d=t.l2d=N,t.d2r=t.d2l_noadd=O,t.r2c=function(ea){ea=O(ea);return void 0!==
ea?ea:t.fraction2r(.5)},t.l2r=t.c2r=n,t.r2l=O,t.d2p=function(ea){return t.l2p(t.r2c(ea))},t.p2d=function(ea){return N(V(ea))},t.r2p=t.d2p,t.p2r=V,t.cleanPos=function(ea){return"string"===typeof ea&&""!==ea?ea:n(ea)}):"multicategory"===t.type&&(t.r2d=t.c2d=t.l2d=N,t.d2r=t.d2l_noadd=O,t.r2c=function(ea){ea=O(ea);return void 0!==ea?ea:t.fraction2r(.5)},t.r2c_just_indices=J,t.l2r=t.c2r=n,t.r2l=O,t.d2p=function(ea){return t.l2p(t.r2c(ea))},t.p2d=function(ea){return N(V(ea))},t.r2p=t.d2p,t.p2r=V,t.cleanPos=
function(ea){return Array.isArray(ea)||"string"===typeof ea&&""!==ea?ea:n(ea)},t.setupMultiCategory=function(ea){var ca=t._traceIndices,ia,fa=G._axisMatchGroups;if(fa&&fa.length&&0===t._categories.length)for(ia=0;ia<fa.length;ia++){var ha=fa[ia];if(ha[Q])for(var na in ha)na!==Q&&(ha=G[D.id2name(na)],ca=ca.concat(ha._traceIndices))}var pa=[[0,{}],[0,{}]];fa=[];for(ia=0;ia<ca.length;ia++)if(ha=ea[ca[ia]],U in ha){na=ha[U];var ra=ha._length||a.minRowLength(na);if(c(na[0])&&c(na[1]))for(ha=0;ha<ra;ha++){var ta=
na[0][ha],oa=na[1][ha];null!==ta&&void 0!==ta&&null!==oa&&void 0!==oa&&(fa.push([ta,oa]),ta in pa[0][1]||(pa[0][1][ta]=pa[0][0]++),oa in pa[1][1]||(pa[1][1][oa]=pa[1][0]++))}}fa.sort(function(ua,ka){var sa=pa[0][1];if(sa=sa[ua[0]]-sa[ka[0]])return sa;sa=pa[1][1];return sa[ua[1]]-sa[ka[1]]});for(ia=0;ia<fa.length;ia++)H(fa[ia])});t.fraction2r=function(ea){var ca=t.r2l(t.range[0]),ia=t.r2l(t.range[1]);return t.l2r(ca+ea*(ia-ca))};t.r2fraction=function(ea){var ca=t.r2l(t.range[0]),ia=t.r2l(t.range[1]);
return(t.r2l(ea)-ca)/(ia-ca)};t.cleanRange=function(ea,ca){ca||(ca={});ea||(ea="range");var ia=a.nestedProperty(t,ea).get();var fa="date"===t.type?a.dfltRange(t.calendar):"y"===U?x.DFLTRANGEY:ca.dfltRange||x.DFLTRANGEX;fa=fa.slice();if("tozero"===t.rangemode||"nonnegative"===t.rangemode)fa[0]=0;if(ia&&2===ia.length)for("date"!==t.type||t.autorange||(ia[0]=a.cleanDate(ia[0],d,t.calendar),ia[1]=a.cleanDate(ia[1],d,t.calendar)),ca=0;2>ca;ca++)if("date"===t.type){if(!a.isDateTime(ia[ca],t.calendar)){t[ea]=
fa;break}if(t.r2l(ia[0])===t.r2l(ia[1])){ea=a.constrain(t.r2l(ia[0]),a.MIN_MS+1E3,a.MAX_MS-1E3);ia[0]=t.l2r(ea-1E3);ia[1]=t.l2r(ea+1E3);break}}else{if(!e(ia[ca]))if(e(ia[1-ca]))ia[ca]=ia[1-ca]*(ca?10:.1);else{t[ea]=fa;break}ia[ca]<-f?ia[ca]=-f:ia[ca]>f&&(ia[ca]=f);if(ia[0]===ia[1]){var ha=Math.max(1,Math.abs(1E-6*ia[0]));ia[0]-=ha;ia[1]+=ha}}else a.nestedProperty(t,ea).set(fa)};t.setScale=function(ea){var ca=G._size;if(t.overlaying){var ia=D.getFromId({_fullLayout:G},t.overlaying);t.domain=ia.domain}ia=
ea&&t._r?"_r":"range";var fa=t.calendar;t.cleanRange(ia);ea=t.r2l(t[ia][0],fa);ia=t.r2l(t[ia][1],fa);(fa="y"===U)?(t._offset=ca.t+(1-t.domain[1])*ca.h,t._length=ca.h*(t.domain[1]-t.domain[0]),t._m=t._length/(ea-ia),t._b=-t._m*ia):(t._offset=ca.l+t.domain[0]*ca.w,t._length=ca.w*(t.domain[1]-t.domain[0]),t._m=t._length/(ia-ea),t._b=-t._m*ea);t._rangebreaks=[];t._lBreaks=0;t._m2=0;t._B=[];if(t.rangebreaks&&(t._rangebreaks=t.locateBreaks(Math.min(ea,ia),Math.max(ea,ia)),t._rangebreaks.length)){for(ca=
0;ca<t._rangebreaks.length;ca++){var ha=t._rangebreaks[ca];t._lBreaks+=Math.abs(ha.max-ha.min)}ca=fa;ea>ia&&(ca=!ca);ca&&t._rangebreaks.reverse();var na=ca?-1:1;t._m2=na*t._length/(Math.abs(ia-ea)-t._lBreaks);t._B.push(-t._m2*(fa?ia:ea));for(ca=0;ca<t._rangebreaks.length;ca++)ha=t._rangebreaks[ca],t._B.push(t._B[t._B.length-1]-na*t._m2*(ha.max-ha.min));for(ca=0;ca<t._rangebreaks.length;ca++)ha=t._rangebreaks[ca],ha.pmin=P(ha.min),ha.pmax=P(ha.max)}if(!isFinite(t._m)||!isFinite(t._b)||0>t._length)throw G._replotting=
!1,Error("Something went wrong with axis scaling");};t.maskBreaks=function(ea){for(var ca=t.rangebreaks||[],ia,fa,ha,na,pa=0;pa<ca.length;pa++){var ra=ca[pa];if(ra.enabled)if(ra.bounds){var ta=ra.pattern;ia=a.simpleMap(ra.bounds,ta?g:t.d2c);fa=ia[0];ia=ia[1];switch(ta){case B:na=new Date(ea);ha=na.getUTCDay();fa>ia&&(ia+=7,ha<fa&&(ha+=7));break;case E:na=new Date(ea);ha=na.getUTCHours();ra=na.getUTCMinutes();ta=na.getUTCSeconds();na=na.getUTCMilliseconds();ha+=ra/60+ta/3600+na/36E5;fa>ia&&(ia+=24,
ha<fa&&(ha+=24));break;case "":ha=ea}if(ha>=fa&&ha<ia)return d}else for(ta=a.simpleMap(ra.values,t.d2c).sort(a.sorterAsc),na=0;na<ta.length;na++)if(fa=ta[na],ia=fa+ra.dvalue,ea>=fa&&ea<ia)return d}return ea};t.locateBreaks=function(ea,ca){var ia,fa=[];if(!t.rangebreaks)return fa;var ha=t.rangebreaks.slice().sort(function(ya,qa){return ya.pattern===B&&qa.pattern===E?-1:qa.pattern===B&&ya.pattern===E?1:0}),na=function(ya,qa){ya=a.constrain(ya,ea,ca);qa=a.constrain(qa,ea,ca);if(ya!==qa){for(var xa=!0,
Ca=0;Ca<fa.length;Ca++){var Ja=fa[Ca];ya<Ja.max&&qa>=Ja.min&&(ya<Ja.min&&(Ja.min=ya),qa>Ja.max&&(Ja.max=qa),xa=!1)}xa&&fa.push({min:ya,max:qa})}};for(ia=0;ia<ha.length;ia++){var pa=ha[ia];if(pa.enabled)if(pa.bounds){var ra=ea,ta=ca;pa.pattern&&(ra=Math.floor(ra));var oa=a.simpleMap(pa.bounds,pa.pattern?g:t.r2l);var ua=oa[0];var ka=oa[1];var sa=new Date(ra);switch(pa.pattern){case B:pa=r;ka=((ka<ua?7:0)+(ka-ua))*u;ra+=ua*u-(sa.getUTCDay()*u+sa.getUTCHours()*v+sa.getUTCMinutes()*w+sa.getUTCSeconds()*
y+sa.getUTCMilliseconds());break;case E:pa=u;ka=((ka<ua?24:0)+(ka-ua))*v;ra+=ua*v-(sa.getUTCHours()*v+sa.getUTCMinutes()*w+sa.getUTCSeconds()*y+sa.getUTCMilliseconds());break;default:ra=Math.min(oa[0],oa[1]),ta=Math.max(oa[0],oa[1]),ka=pa=ta-ra}for(ua=ra;ua<ta;ua+=pa)na(ua,ua+ka)}else for(ta=a.simpleMap(pa.values,t.d2c),ra=0;ra<ta.length;ra++)ua=ta[ra],ka=ua+pa.dvalue,na(ua,ka)}fa.sort(function(ya,qa){return ya.min-qa.min});return fa};t.makeCalcdata=function(ea,ca,ia){var fa;var ha=t.type;var na=
"date"===ha&&ea[ca+"calendar"];if(ca in ea){ca=ea[ca];ea=ea._length||a.minRowLength(ca);if(a.isTypedArray(ca)&&("linear"===ha||"log"===ha)){if(ea===ca.length)return ca;if(ca.subarray)return ca.subarray(0,ea)}if("multicategory"===ha){ia=Array(ea);for(na=0;na<ea;na++)ia[na]=J([(ca[0]||[])[na],(ca[1]||[])[na]]);return ia}ha=Array(ea);for(fa=0;fa<ea;fa++)ha[fa]=t.d2c(ca[fa],0,na,ia)}else for(ia=(ca+"0"in ea)?t.d2c(ea[ca+"0"],0,na):0,na=ea["d"+ca]?Number(ea["d"+ca]):1,ca=ea[{x:"y",y:"x"}[ca]],ea=ea._length||
ca.length,ha=Array(ea),fa=0;fa<ea;fa++)ha[fa]=ia+fa*na;if(t.rangebreaks)for(fa=0;fa<ea;fa++)ha[fa]=t.maskBreaks(ha[fa]);return ha};t.isValidRange=function(ea){return Array.isArray(ea)&&2===ea.length&&e(t.r2l(ea[0]))&&e(t.r2l(ea[1]))};t.isPtWithinRange=function(ea,ca){ea=t.c2l(ea[U],null,ca);ca=t.r2l(t.range[0]);var ia=t.r2l(t.range[1]);return ca<ia?ca<=ea&&ea<=ia:ia<=ea&&ea<=ca};t._emptyCategories=function(){t._categories=[];t._categoriesMap={}};t.clearCalc=function(){var ea=G._axisMatchGroups;if(ea&&
ea.length){for(var ca=!1,ia=0;ia<ea.length;ia++){var fa=ea[ia];if(fa[Q]){ca=!0;ia=ea=null;for(var ha in fa)if(fa=G[D.id2name(ha)],fa._categories){ea=fa._categories;ia=fa._categoriesMap;break}ea&&ia?(t._categories=ea,t._categoriesMap=ia):t._emptyCategories();break}}ca||t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(ca=0;ca<t._initialCategories.length;ca++)H(t._initialCategories[ca])};t.sortByInitialCategories=function(){var ea=[];t._emptyCategories();if(t._initialCategories)for(var ca=
0;ca<t._initialCategories.length;ca++)H(t._initialCategories[ca]);ea=ea.concat(t._traceIndices);ca=t._matchGroup;for(var ia in ca)Q!==ia&&(ca=G[D.id2name(ia)],ca._categories=t._categories,ca._categoriesMap=t._categoriesMap,ea=ea.concat(ca._traceIndices));return ea};var ba=G._d3locale;"date"===t.type&&(t._dateFormat=ba?ba.timeFormat:l,t._extraFormat=G._extraFormat);t._separators=G.separators;t._numFormat=ba?ba.numberFormat:h.format;delete t._minDtick;delete t._forceTick0}},{"../../constants/numerical":724,
"../../lib":749,"./axis_ids":800,"./constants":803,d3:169,"d3-time-format":166,"fast-isnumeric":241}],818:[function(b,F,C){function m(g){var k=["showexponent","showtickprefix","showticksuffix"].filter(function(p){return void 0!==g[p]});if(k.every(function(p){return g[p]===g[k[0]]})||1===k.length)return g[k[0]]}function h(g,k){l.coerce(g,k,e.tickformatstops,"enabled",void 0)&&(l.coerce(g,k,e.tickformatstops,"dtickrange",void 0),l.coerce(g,k,e.tickformatstops,"value",void 0))}var l=b("../../lib"),e=
b("./layout_attributes"),a=b("../array_container_defaults");F.exports=function(g,k,p,n,c,f){if(!f||1===f.pass){var d=m(g);p("tickprefix")&&p("showtickprefix",d);p("ticksuffix",c.tickSuffixDflt)&&p("showticksuffix",d)}f&&2!==f.pass||(f=m(g),p("tickprefix")&&p("showtickprefix",f),p("ticksuffix",c.tickSuffixDflt)&&p("showticksuffix",f),p("showticklabels")&&(c=c.font||{},d=k.color,l.coerceFont(p,"tickfont",{family:c.family,size:c.size,color:d&&d!==e.color.dflt?d:c.color}),p("tickangle"),"category"!==
n&&(c=p("tickformat"),a(g,k,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:h}),k.tickformatstops.length||delete k.tickformatstops,c||"date"===n||(p("showexponent",f),p("exponentformat"),p("separatethousands")))))}},{"../../lib":749,"../array_container_defaults":793,"./layout_attributes":811}],819:[function(b,F,C){var m=b("../../lib"),h=b("./layout_attributes");F.exports=function(l,e,a,g){var k=m.coerce2(l,e,h,"ticklen"),p=m.coerce2(l,e,h,"tickwidth");l=m.coerce2(l,e,h,"tickcolor",
e.color);a("ticks",g.outerTicks||k||p||l?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},{"../../lib":749,"./layout_attributes":811}],820:[function(b,F,C){var m=b("./clean_ticks"),h=b("../../lib").isArrayOrTypedArray;F.exports=function(l,e,a,g){function k(f){var d=l[f];return void 0!==d?d:(e._template||{})[f]}var p=k("tick0"),n=k("dtick"),c=k("tickvals");c=h(c)?"array":n?"linear":"auto";c=a("tickmode",c);"auto"===c?a("nticks"):"linear"===c?(a=e.dtick=m.dtick(n,g),e.tick0=
m.tick0(p,g,e.calendar,a)):"multicategory"!==g&&(void 0===a("tickvals")?e.tickmode="auto":a("ticktext"))}},{"../../lib":749,"./clean_ticks":802}],821:[function(b,F,C){var m=b("d3"),h=b("../../registry"),l=b("../../lib"),e=b("../../components/drawing"),a=b("./axes");F.exports=function(g,k,p,n){function c(x){var E=x.xaxis,B=x.yaxis;r._defs.select("#"+x.clipId+"\x3e rect").call(e.setTranslate,0,0).call(e.setScale,1,1);x.plot.call(e.setTranslate,E._offset,B._offset).call(e.setScale,1,1);E=x.plot.selectAll(".scatterlayer .trace");
E.selectAll(".point").call(e.setPointGroupScale,1,1);E.selectAll(".textpoint").call(e.setTextPointsScale,1,1);E.call(e.hideOutsideRangePoints,x)}function f(){for(var x={},E=0;E<k.length;E++){var B=k[E],t=B.plotinfo.xaxis,G=B.plotinfo.yaxis;B.xr1&&(x[t._name+".range"]=B.xr1.slice());B.yr1&&(x[G._name+".range"]=B.yr1.slice())}u&&u();return h.call("relayout",g,x).then(function(){for(var I=0;I<k.length;I++)c(k[I].plotinfo)})}function d(){for(var x={},E=0;E<k.length;E++){var B=k[E],t=B.plotinfo.xaxis,
G=B.plotinfo.yaxis;B.xr0&&(x[t._name+".range"]=B.xr0.slice());B.yr0&&(x[G._name+".range"]=B.yr0.slice())}return h.call("relayout",g,x).then(function(){for(var I=0;I<k.length;I++)c(k[I].plotinfo)})}function q(){v=Date.now();for(var x=w(Math.min(1,(v-y)/p.duration)),E=0;E<k.length;E++){var B=k[E],t=x,G=B.plotinfo,I=G.xaxis,L=G.yaxis,M=I._length,N=L._length,H=!!B.xr1,J=!!B.yr1,O=[];if(H){var Q=l.simpleMap(B.xr0,I.r2l),U=l.simpleMap(B.xr1,I.r2l),P=Q[1]-Q[0],V=U[1]-U[0];O[0]=(Q[0]*(1-t)+t*U[0]-Q[0])/(Q[1]-
Q[0])*M;O[2]=M*(1-t+t*V/P);I.range[0]=I.l2r(Q[0]*(1-t)+t*U[0]);I.range[1]=I.l2r(Q[1]*(1-t)+t*U[1])}else O[0]=0,O[2]=M;J?(Q=l.simpleMap(B.yr0,L.r2l),B=l.simpleMap(B.yr1,L.r2l),U=Q[1]-Q[0],P=B[1]-B[0],O[1]=(Q[1]*(1-t)+t*B[1]-Q[1])/(Q[0]-Q[1])*N,O[3]=N*(1-t+t*P/U),L.range[0]=I.l2r(Q[0]*(1-t)+t*B[0]),L.range[1]=L.l2r(Q[1]*(1-t)+t*B[1])):(O[1]=0,O[3]=N);a.drawOne(g,I,{skipTitle:!0});a.drawOne(g,L,{skipTitle:!0});a.redrawComponents(g,[I._id,L._id]);t=H?M/O[2]:1;B=J?N/O[3]:1;I=I._offset-(H?O[0]/O[2]*M:0);
L=L._offset-(J?O[1]/O[3]*N:0);G.clipRect.call(e.setTranslate,H?O[0]:0,J?O[1]:0).call(e.setScale,1/t,1/B);G.plot.call(e.setTranslate,I,L).call(e.setScale,t,B);e.setPointGroupScale(G.zoomScalePts,1/t,1/B);e.setTextPointsScale(G.zoomScaleTxt,1/t,1/B)}v-y>p.duration?(f(),D=window.cancelAnimationFrame(q)):D=window.requestAnimationFrame(q)}var r=g._fullLayout;if(0===k.length)a.redrawComponents(g);else{var u;n&&(u=n());var v,w=m.ease(p.easing);g._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(D);
D=null;return d()});var y=Date.now();var D=window.requestAnimationFrame(q);return Promise.resolve()}}},{"../../components/drawing":637,"../../lib":749,"../../registry":880,"./axes":797,d3:169}],822:[function(b,F,C){function m(e,a){var g={v:"x",h:"y"}[e.orientation||"v"],k=h(e,"box-violin"),p=h(e._fullInput||{},"candlestick");return k&&!p&&a===g&&void 0===e[g]&&void 0===e[g+"0"]}var h=b("../../registry").traceIs,l=b("./axis_autotype");F.exports=function(e,a,g,k){if("-"===g("type",(k.splomStash||{}).type)){g=
k.data;if("-"===a.type){k=a._id;var p=k.charAt(0);-1!==k.indexOf("scene")&&(k=p);b:{for(var n=k,c=0;c<g.length;c++){var f=g[c];if("splom"===f.type&&0<f._length&&(f["_"+p+"axes"]||{})[n]||(f[p+"axis"]||p)===n&&(m(f,p)||(f[p]||[]).length||f[p+"0"])){var d=f;break b}}d=void 0}if(d)if("histogram"===d.type&&p==={v:"y",h:"x"}[d.orientation||"v"])a.type="linear";else if(f=p+"calendar",n=d[f],c={noMultiCategory:!h(d,"cartesian")||h(d,"noMultiCategory")},"box"===d.type&&d._hasPreCompStats&&p==={h:"x",v:"y"}[d.orientation||
"v"]&&(c.noMultiCategory=!0),m(d,p)){var q={v:"x",h:"y"}[d.orientation||"v"],r=[];for(d=0;d<g.length;d++){var u=g[d];h(u,"box-violin")&&(u[p+"axis"]||p)===k&&(void 0!==u[q]?r.push(u[q][0]):void 0!==u.name?r.push(u.name):r.push("text"),u[f]!==n&&(n=void 0))}a.type=l(r,n,c)}else"splom"===d.type?(g=d.dimensions[d._axesDim[k]],g.visible&&(a.type=l(g.values,n,c))):a.type=l(d[p]||[d[p+"0"]],n,c)}"-"===a.type?a.type="linear":e.type=a.type}}},{"../../registry":880,"./axis_autotype":798}],823:[function(b,
F,C){function m(k,p,n){var c=!1;if("data"===p.type)k=k._fullData[null!==p.traces?p.traces[0]:0];else if("layout"===p.type)k=k._fullLayout;else return!1;k=g.nestedProperty(k,p.prop).get();n=n[p.type]=n[p.type]||{};n.hasOwnProperty(p.prop)&&n[p.prop]!==k&&(c=!0);n[p.prop]=k;return{changed:c,value:k}}function h(k,p){var n=[];k=p[0];var c={};if("string"===typeof k)c[k]=p[1];else if(g.isPlainObject(k))c=k;else return n;e(c,function(f,d,q){n.push({type:"layout",prop:f,value:q})},"",0);return n}function l(k,
p){var n=[];var c=p[0];var f=p[1];var d=p[2];p={};if("string"===typeof c)p[c]=f;else if(g.isPlainObject(c))p=c,void 0===d&&(d=f);else return n;void 0===d&&(d=null);e(p,function(q,r,u){if(Array.isArray(u)){u=u.slice();var v=Math.min(u.length,k.data.length);d&&(v=Math.min(v,d.length));r=[];for(var w=0;w<v;w++)r[w]=d?d[w]:w}else r=d?d.slice():null;if(null===r)Array.isArray(u)&&(u=u[0]);else if(Array.isArray(r)){if(!Array.isArray(u))for(v=u,u=[],w=0;w<r.length;w++)u[w]=v;u.length=Math.min(r.length,u.length)}n.push({type:"data",
prop:q,traces:r,value:u})},"",0);return n}function e(k,p,n,c){Object.keys(k).forEach(function(f){var d=k[f];if("_"!==f[0]){var q=n+(0<c?".":"")+f;g.isPlainObject(d)?e(d,p,q,c+1):p(q,f,d)}})}var a=b("../registry"),g=b("../lib");C.manageCommandObserver=function(k,p,n,c){var f={},d=!0;p&&p._commandObserver&&(f=p._commandObserver);f.cache||(f.cache={});f.lookupTable={};var q=C.hasSimpleAPICommandBindings(k,n,f.lookupTable);if(p&&p._commandObserver){if(q)return f;if(p._commandObserver.remove)return p._commandObserver.remove(),
p._commandObserver=null,f}if(q){m(k,q,f.cache);f.check=function(){if(d){var u=m(k,q,f.cache);u.changed&&c&&void 0!==f.lookupTable[u.value]&&(f.disable(),Promise.resolve(c({value:u.value,type:q.type,prop:q.prop,traces:q.traces,index:f.lookupTable[u.value]})).then(f.enable,f.enable));return u.changed}};var r="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");for(n=0;n<r.length;n++)k._internalOn(r[n],f.check);f.remove=function(){for(var u=0;u<
r.length;u++)k._removeInternalListener(r[u],f.check)}}else g.log("Unable to automatically bind plot updates to API command"),f.lookupTable={},f.remove=function(){};f.disable=function(){d=!1};f.enable=function(){d=!0};p&&(p._commandObserver=f);return f};C.hasSimpleAPICommandBindings=function(k,p,n){var c,f=p.length;for(c=0;c<f;c++){var d=p[c];var q=d.method;d=d.args;Array.isArray(d)||(d=[]);if(!q)return!1;d=C.computeAPICommandBindings(k,q,d);if(1!==d.length)return!1;if(u){q=d[0];if(q.type!==u.type||
q.prop!==u.prop)return!1;if(Array.isArray(u.traces))if(Array.isArray(q.traces)){q.traces.sort();for(var r=0;r<u.traces.length;r++)if(u.traces[r]!==q.traces[r])return!1}else return!1;else if(q.prop!==u.prop)return!1}else{var u=d[0];Array.isArray(u.traces)&&u.traces.sort()}q=d[0];q=q.value;if(Array.isArray(q))if(1===q.length)q=q[0];else return!1;n&&(n[q]=c)}return u};C.executeAPICommand=function(k,p,n){if("skip"===p)return Promise.resolve();var c=a.apiMethodRegistry[p];k=[k];Array.isArray(n)||(n=[]);
for(var f=0;f<n.length;f++)k.push(n[f]);return c.apply(null,k).catch(function(d){g.warn("API call to Plotly."+p+" rejected.",d);return Promise.reject(d)})};C.computeAPICommandBindings=function(k,p,n){Array.isArray(n)||(n=[]);switch(p){case "restyle":k=l(k,n);break;case "relayout":k=h(k,n);break;case "update":k=l(k,[n[0],n[2]]).concat(h(k,[n[1]]));break;case "animate":k=n;k=Array.isArray(k[0])&&1===k[0].length&&-1!==["string","number"].indexOf(typeof k[0][0])?[{type:"layout",prop:"_currentFrame",value:k[0][0].toString()}]:
[];break;default:k=[]}return k}},{"../lib":749,"../registry":880}],824:[function(b,F,C){var m=b("../lib/extend").extendFlat;C.attributes=function(h,l){h=h||{};l={valType:"info_array",editType:h.editType,items:[{valType:"number",min:0,max:1,editType:h.editType},{valType:"number",min:0,max:1,editType:h.editType}],dflt:[0,1]};l={x:m({},l,{}),y:m({},l,{}),editType:h.editType};h.noGridCell||(l.row={valType:"integer",min:0,dflt:0,editType:h.editType},l.column={valType:"integer",min:0,dflt:0,editType:h.editType});
return l};C.defaults=function(h,l,e,a){var g=a&&a.x||[0,1];a=a&&a.y||[0,1];if(l=l.grid){var k=e("domain.column");void 0!==k&&(k<l.columns?g=l._domains.x[k]:delete h.domain.column);k=e("domain.row");void 0!==k&&(k<l.rows?a=l._domains.y[k]:delete h.domain.row)}l=e("domain.x",g);e=e("domain.y",a);l[0]<l[1]||(h.domain.x=g.slice());e[0]<e[1]||(h.domain.y=a.slice())}},{"../lib/extend":739}],825:[function(b,F,C){F.exports=function(m){var h=m.editType,l=m.colorEditType;void 0===l&&(l=h);h={family:{valType:"string",
noBlank:!0,strict:!0,editType:h},size:{valType:"number",min:1,editType:h},color:{valType:"color",editType:l},editType:h};m.arrayOk&&(h.family.arrayOk=!0,h.size.arrayOk=!0,h.color.arrayOk=!0);return h}},{}],826:[function(b,F,C){F.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],827:[function(b,F,C){C.projNames={equirectangular:"equirectangular",mercator:"mercator",
orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",
aitoff:"aitoff",sinusoidal:"sinusoidal"};C.axesNames=["lonaxis","lataxis"];C.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};C.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};C.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},
europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],
projType:"mercator",projRotate:[0,0,0]}};C.clipPad=.001;C.precision=.1;C.landColor="#F0DC82";C.waterColor="#3399FF";C.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};C.sphereSVG={type:"Sphere"};C.fillLayers={ocean:1,land:1,lakes:1};C.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};C.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");C.layersForChoropleth="bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");
C.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],828:[function(b,F,C){function m(t){this.id=t.id;this.graphDiv=t.graphDiv;this.container=t.container;this.topojsonURL=t.topojsonURL;this.isStatic=t.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.scope=this.projection=this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths=
{};this.dataPaths={};this.dataPoints={};this.bgRect=this.clipRect=this.clipDef=null;this.makeFramework()}function h(t){var G=t.projection.type,I=a.geo[D.projNames[G]](),L=t._isClipped?D.lonaxisSpan[G]/2:null;t=["center","rotate","parallels","clipExtent"];G=function(H){return H?I:[]};for(var M=0;M<t.length;M++){var N=t[M];"function"!==typeof I[N]&&(I[N]=G)}I.isLonLatOverEdges=function(H){if(null===I(H))return!0;if(L){var J=I.rotate();return a.geo.distance(H,[-J[0],-J[1]])>L*Math.PI/180}return!1};I.getPath=
function(){return a.geo.path().projection(I)};I.getBounds=function(H){return I.getPath().bounds(H)};I.fitExtent=function(H,J){var O=H[1][0]-H[0][0],Q=H[1][1]-H[0][1],U=I.clipExtent&&I.clipExtent();I.scale(150).translate([0,0]);U&&I.clipExtent(null);var P=I.getBounds(J);J=Math.min(O/(P[1][0]-P[0][0]),Q/(P[1][1]-P[0][1]));O=+H[0][0]+(O-J*(P[1][0]+P[0][0]))/2;H=+H[0][1]+(Q-J*(P[1][1]+P[0][1]))/2;U&&I.clipExtent(U);return I.scale(150*J).translate([O,H])};I.precision(D.precision);L&&I.clipAngle(L-D.clipPad);
return I}function l(t,G,I){var L=G[t],M=D.scopeDefaults[G.scope];if("lonaxis"===t){var N=M.lonaxisRange;var H=M.lataxisRange;var J=function(Q,U){return[Q,U]}}else"lataxis"===t&&(N=M.lataxisRange,H=M.lonaxisRange,J=function(Q,U){return[U,Q]});L={type:"linear",range:[N[0],N[1]-1E-6],tick0:L.tick0,dtick:L.dtick};d.setConvert(L,I);I=d.calcTicks(L);G.isScoped||"lonaxis"!==t||I.pop();t=I.length;G=Array(t);for(L=0;L<t;L++){M=I[L].x;N=G[L]=[];for(var O=H[0];O<H[1]+2.5;O+=2.5)N.push(J(M,O))}return{type:"MultiLineString",
coordinates:G}}function e(t,G){var I=D.clipPad,L=t[0]+I;t=t[1]-I;var M=G[0]+I;G=G[1]-I;0<L&&0>t&&(t+=360);I=(t-L)/4;return{type:"Polygon",coordinates:[[[L,M],[L,G],[L+I,G],[L+2*I,G],[L+3*I,G],[t,G],[t,M],[t-I,M],[t-2*I,M],[t-3*I,M],[L,M]]]}}var a=b("d3"),g=b("../../registry"),k=b("../../lib"),p=b("../../components/color"),n=b("../../components/drawing"),c=b("../../components/fx"),f=b("../plots"),d=b("../cartesian/axes"),q=b("../cartesian/autorange").getAutoRange,r=b("../../components/dragelement"),
u=b("../cartesian/select").prepSelect,v=b("../cartesian/select").clearSelect,w=b("../cartesian/select").selectOnClick,y=b("./zoom"),D=b("./constants"),x=b("../../lib/geo_location_utils"),E=b("../../lib/topojson_utils"),B=b("topojson-client").feature;b("./projections")(a);b=m.prototype;F.exports=function(t){return new m(t)};b.plot=function(t,G,I){var L=this,M=G[this.id],N=[],H=!1,J;for(J in D.layerNameToAdjective)if("frame"!==J&&M["show"+J]){H=!0;break}for(J=0;J<t.length;J++)if(t[0][0].trace.locationmode){H=
!0;break}H&&(M=E.getTopojsonName(M),null===L.topojson||M!==L.topojsonName)&&(L.topojsonName=M,void 0===PlotlyGeoAssets.topojson[L.topojsonName]&&N.push(L.fetchTopojson()));N=N.concat(x.fetchTraceGeoData(t));I.push(new Promise(function(O,Q){Promise.all(N).then(function(){L.topojson=PlotlyGeoAssets.topojson[L.topojsonName];L.update(t,G);O()}).catch(Q)}))};b.fetchTopojson=function(){var t=this,G=E.getTopojsonPath(t.topojsonURL,t.topojsonName);return new Promise(function(I,L){a.json(G,function(M,N){if(M)return 404===
M.status?L(Error(["plotly.js could not find topojson file at",G,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):L(Error(["unexpected error while fetching topojson file at",G].join(" ")));PlotlyGeoAssets.topojson[t.topojsonName]=N;I()})})};b.update=function(t,G){var I=G[this.id];this.hasChoropleth=!1;for(var L=0;L<t.length;L++){var M=t[L],N=M[0].trace;"choropleth"===N.type&&(this.hasChoropleth=!0);!0===N.visible&&0<N._length&&N._module.calcGeoJSON(M,G)}this.updateProjection(t,
G)||(this.viewInitial&&this.scope===I.scope||this.saveViewInitial(I),this.scope=I.scope,this.updateBaseLayers(G,I),this.updateDims(G,I),this.updateFx(G,I),f.generalUpdatePerTraceModule(this.graphDiv,this,t,I),t=this.layers.frontplot.select(".scatterlayer"),this.dataPoints.point=t.selectAll(".point"),this.dataPoints.text=t.selectAll("text"),this.dataPaths.line=t.selectAll(".js-line"),t=this.layers.backplot.select(".choroplethlayer"),this.dataPaths.choropleth=t.selectAll("path"),this.render())};b.updateProjection=
function(t,G){t=this.graphDiv;var I=G[this.id],L=G._size,M=I.domain,N=I.projection,H=I.lonaxis,J=I.lataxis,O=H._ax,Q=J._ax;G=this.projection=h(I);M=[[L.l+L.w*M.x[0],L.t+L.h*(1-M.y[1])],[L.l+L.w*M.x[1],L.t+L.h*(1-M.y[0])]];L=I.center||{};var U=N.rotation||{},P=H.range||[],V=J.range||[];I.fitbounds&&(O._length=M[1][0]-M[0][0],Q._length=M[1][1]-M[0][1],O.range=q(t,O),Q.range=q(t,Q),J=(O.range[0]+O.range[1])/2,H=(Q.range[0]+Q.range[1])/2,I._isScoped?L={lon:J,lat:H}:I._isClipped?(L={lon:J,lat:H},U={lon:J,
lat:H,roll:U.roll},V=N.type,P=D.lonaxisSpan[V]/2||180,V=D.lataxisSpan[V]/2||90,P=[J-P,J+P],V=[H-V,H+V]):(L={lon:J,lat:H},U={lon:J,lat:U.lat,roll:U.roll}));G.center([L.lon-U.lon,L.lat-U.lat]).rotate([-U.lon,-U.lat,U.roll]).parallels(N.parallels);U=e(P,V);G.fitExtent(M,U);M=this.bounds=G.getBounds(U);J=this.fitScale=G.scale();U=G.translate();if(!(isFinite(M[0][0])&&isFinite(M[0][1])&&isFinite(M[1][0])&&isFinite(M[1][1]))||isNaN(U[0])||isNaN(U[0])){G=["fitbounds","projection.rotation","center","lonaxis.range",
"lataxis.range"];I={};for(L=0;L<G.length;L++)I[this.id+"."+G[L]]=null;this.viewInitial=null;k.warn("Invalid geo settings, relayout'ing to default view.");t._promises.push(g.call("relayout",t,I));return"Invalid geo settings, relayout'ing to default view."}I.fitbounds?(t=G.getBounds(e(O.range,Q.range)),t=Math.min((M[1][0]-M[0][0])/(t[1][0]-t[0][0]),(M[1][1]-M[0][1])/(t[1][1]-t[0][1])),isFinite(t)?G.scale(t*J):k.warn("Something went wrong during"+this.id+"fitbounds computations.")):G.scale(N.scale*J);
t=this.midPt=[(M[0][0]+M[1][0])/2,(M[0][1]+M[1][1])/2];G.translate([U[0]+(t[0]-U[0]),U[1]+(t[1]-U[1])]).clipExtent(M);I._isAlbersUsa&&(t=G([L.lon,L.lat]),I=G.translate(),G.translate([I[0]-(t[0]-I[0]),I[1]-(t[1]-I[1])]))};b.updateBaseLayers=function(t,G){function I(O){return"lonaxis"===O||"lataxis"===O}var L=this,M=L.topojson,N=L.layers,H=L.basePaths,J=(this.hasChoropleth?D.layersForChoropleth:D.layers).filter(function(O){return D.lineLayers[O]||D.fillLayers[O]?G["show"+O]:I(O)?G[O].showgrid:!0});
J=L.framework.selectAll(".layer").data(J,String);J.exit().each(function(O){delete N[O];delete H[O];a.select(this).remove()});J.enter().append("g").attr("class",function(O){return"layer "+O}).each(function(O){var Q=N[O]=a.select(this);"bg"===O?L.bgRect=Q.append("rect").style("pointer-events","all"):I(O)?H[O]=Q.append("path").style("fill","none"):"backplot"===O?Q.append("g").classed("choroplethlayer",!0):"frontplot"===O?Q.append("g").classed("scatterlayer",!0):D.lineLayers[O]?H[O]=Q.append("path").style("fill",
"none").style("stroke-miterlimit",2):D.fillLayers[O]&&(H[O]=Q.append("path").style("stroke","none"))});J.order();J.each(function(O){var Q=H[O],U=D.layerNameToAdjective[O];"frame"===O?Q.datum(D.sphereSVG):D.lineLayers[O]||D.fillLayers[O]?Q.datum(B(M,M.objects[O])):I(O)&&Q.datum(l(O,G,t)).call(p.stroke,G[O].gridcolor).call(n.dashLine,"",G[O].gridwidth);D.lineLayers[O]?Q.call(p.stroke,G[U+"color"]).call(n.dashLine,"",G[U+"width"]):D.fillLayers[O]&&Q.call(p.fill,G[U+"color"])})};b.updateDims=function(t,
G){var I=this.bounds,L=(G.framewidth||0)/2;t=I[0][0]-L;var M=I[0][1]-L,N=I[1][0]-t+L;I=I[1][1]-M+L;n.setRect(this.clipRect,t,M,N,I);this.bgRect.call(n.setRect,t,M,N,I).call(p.fill,G.bgcolor);this.xaxis._offset=t;this.xaxis._length=N;this.yaxis._offset=M;this.yaxis._length=I};b.updateFx=function(t,G){function I(){var P=M.viewInitial,V={},Y;for(Y in P)V[M.id+"."+Y]=P[Y];g.call("_guiRelayout",N,V);N.emit("plotly_doubleclick",null)}function L(P){return M.projection.invert([P[0]+M.xaxis._offset,P[1]+M.yaxis._offset])}
var M=this,N=M.graphDiv,H=M.bgRect,J=t.dragmode,O=t.clickmode;if(!M.isStatic){var Q;"select"===J?Q=function(P,V){(P.range={})[M.id]=[L([V.xmin,V.ymin]),L([V.xmax,V.ymax])]}:"lasso"===J&&(Q=function(P,V,Y){(P.lassoPoints={})[M.id]=Y.filtered.map(L)});var U={element:M.bgRect.node(),gd:N,plotinfo:{id:M.id,xaxis:M.xaxis,yaxis:M.yaxis,fillRangeItems:Q},xaxes:[M.xaxis],yaxes:[M.yaxis],subplot:M.id,clickFn:function(P){2===P&&v(N)}};if("pan"===J){if(H.node().onmousedown=null,H.call(y(M,G)),H.on("dblclick.zoom",
I),!N._context._scrollZoom.geo)H.on("wheel.zoom",null)}else if("select"===J||"lasso"===J)H.on(".zoom",null),U.prepFn=function(P,V,Y){u(P,V,Y,U,J)},r.init(U);H.on("mousemove",function(){var P=M.projection.invert(a.mouse(this));if(!P||isNaN(P[0])||isNaN(P[1]))return r.unhover(N,a.event);M.xaxis.p2c=function(){return P[0]};M.yaxis.p2c=function(){return P[1]};c.hover(N,a.event,M.id)});H.on("mouseout",function(){N._dragging||r.unhover(N,a.event)});H.on("click",function(){"select"!==J&&"lasso"!==J&&(-1<
O.indexOf("select")&&w(a.event,N,[M.xaxis],[M.yaxis],M.id,U),-1<O.indexOf("event")&&c.click(N,a.event))})}};b.makeFramework=function(){var t=this,G=t.graphDiv,I=G._fullLayout,L="clip"+I._uid+t.id;t.clipDef=I._clips.append("clipPath").attr("id",L);t.clipRect=t.clipDef.append("rect");t.framework=a.select(t.container).append("g").attr("class","geo "+t.id).call(n.setClipUrl,L,G);t.project=function(M){return(M=t.projection(M))?[M[0]-t.xaxis._offset,M[1]-t.yaxis._offset]:[null,null]};t.xaxis={_id:"x",c2p:function(M){return t.project(M)[0]}};
t.yaxis={_id:"y",c2p:function(M){return t.project(M)[1]}};t.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};d.setConvert(t.mockAxis,I)};b.saveViewInitial=function(t){var G=t.center||{},I=t.projection,L=I.rotation||{};this.viewInitial={fitbounds:t.fitbounds,"projection.scale":I.scale};k.extendFlat(this.viewInitial,t._isScoped?{"center.lon":G.lon,"center.lat":G.lat}:t._isClipped?{"projection.rotation.lon":L.lon,"projection.rotation.lat":L.lat}:{"center.lon":G.lon,"center.lat":G.lat,"projection.rotation.lon":L.lon})};
b.render=function(){function t(N){return(N=I(N.lonlat))?"translate("+N[0]+","+N[1]+")":null}function G(N){return I.isLonLatOverEdges(N.lonlat)?"none":null}var I=this.projection,L=I.getPath(),M;for(M in this.basePaths)this.basePaths[M].attr("d",L);for(M in this.dataPaths)this.dataPaths[M].attr("d",function(N){return L(N.geojson)});for(M in this.dataPoints)this.dataPoints[M].attr("display",G).attr("transform",t)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/drawing":637,
"../../components/fx":655,"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/topojson_utils":776,"../../registry":880,"../cartesian/autorange":796,"../cartesian/axes":797,"../cartesian/select":816,"../plots":860,"./constants":827,"./projections":832,"./zoom":833,d3:169,"topojson-client":551}],829:[function(b,F,C){var m=b("../../plots/get_data").getSubplotCalcData;C=b("../../lib").counterRegex;var h=b("./geo");C=C("geo");F.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:C,attrRegex:C,
attributes:{geo:{valType:"subplotid",dflt:"geo",editType:"calc"}},layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(l){for(var e=l._fullLayout,a=l.calcdata,g=e._subplots.geo,k=0;k<g.length;k++){var p=g[k],n=m(a,"geo",p),c=e[p]._subplot;c||(c=h({id:p,graphDiv:l,container:e._geolayer.node(),topojsonURL:l._context.topojsonURL,staticPlot:l._context.staticPlot}),e[p]._subplot=c);c.plot(n,e,l._promises)}},updateFx:function(l){l=l._fullLayout;for(var e=l._subplots.geo,
a=0;a<e.length;a++){var g=l[e[a]];g._subplot.updateFx(l,g)}},clean:function(l,e,a,g){l=g._subplots.geo||[];for(a=0;a<l.length;a++){var k=l[a],p=g[k]._subplot;!e[k]&&p&&(p.framework.remove(),p.clipDef.remove())}}}},{"../../lib":749,"../../plots/get_data":834,"./geo":828,"./layout_attributes":830,"./layout_defaults":831}],830:[function(b,F,C){C=b("../../components/color/attributes");var m=b("../domain").attributes,h=b("./constants");b=b("../../plot_api/edit_types").overrideAll;var l={range:{valType:"info_array",
items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:C.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(F.exports=b({domain:m({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(h.scopeDefaults),dflt:"world"},
projection:{type:{valType:"enumerated",values:Object.keys(h.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:C.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",
dflt:!1},landcolor:{valType:"color",dflt:h.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:h.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:h.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:h.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:C.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},
subunitcolor:{valType:"color",dflt:C.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:C.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:C.background},lonaxis:l,lataxis:l},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":614,"../../plot_api/edit_types":780,"../domain":824,"./constants":827}],831:[function(b,F,C){function m(p,n,c,f){var d=
e(f.fullData,"geo",f.id).map(function(L){return L._expandedIndex});f=c("resolution");var q=c("scope"),r=a.scopeDefaults[q],u=c("projection.type",r.projType),v=n._isAlbersUsa="albers usa"===u;v&&(q=n.scope="usa");var w=n._isScoped="world"!==q,y=n._isConic=-1!==u.indexOf("conic"),D=n._isClipped=!!a.lonaxisSpan[u];!1===p.visible&&(p=h.extendDeep({},n._template),p.showcoastlines=!1,p.showcountries=!1,p.showframe=!1,p.showlakes=!1,p.showland=!1,p.showocean=!1,p.showrivers=!1,p.showsubunits=!1,p.lonaxis&&
(p.lonaxis.showgrid=!1),p.lataxis&&(p.lataxis.showgrid=!1),n._template=p);p=c("visible");for(var x,E=0;E<k.length;E++){var B=k[E];x=[30,10][E];if(w)var t=r[B+"Range"];else{t=a[B+"Span"];t=(t[u]||t["*"])/2;var G=c("projection.rotation."+B.substr(0,3),r.projRotate[E]);t=[G-t,G+t]}t=c(B+".range",t);c(B+".tick0");c(B+".dtick",x);if(x=c(B+".showgrid",p?void 0:!1))c(B+".gridcolor"),c(B+".gridwidth");n[B]._ax={type:"linear",_id:B.slice(0,3),_traceIndices:d,setScale:h.identity,c2l:h.identity,r2l:h.identity,
autorange:!0,range:t.slice(),_m:1,_input:{}}}E=n.lonaxis.range;d=n.lataxis.range;u=E[0];E=E[1];0<u&&0>E&&(E+=360);u=(u+E)/2;if(!v){E=w?r.projRotate:[u,0,0];var I=c("projection.rotation.lon",E[0]);c("projection.rotation.lat",E[1]);c("projection.rotation.roll",E[2]);if(x=c("showcoastlines",!w&&p))c("coastlinecolor"),c("coastlinewidth");(x=c("showocean",p?void 0:!1))&&c("oceancolor")}v?(I=-96.6,v=38.7):(I=w?u:I,v=(d[0]+d[1])/2);c("center.lon",I);c("center.lat",v);y&&c("projection.parallels",r.projParallels||
[0,60]);c("projection.scale");(x=c("showland",p?void 0:!1))&&c("landcolor");(x=c("showlakes",p?void 0:!1))&&c("lakecolor");if(x=c("showrivers",p?void 0:!1))c("rivercolor"),c("riverwidth");if(x=c("showcountries",w&&"usa"!==q&&p))c("countrycolor"),c("countrywidth");if("usa"===q||"north america"===q&&50===f)c("showsubunits",p),c("subunitcolor"),c("subunitwidth");!w&&(x=c("showframe",p))&&(c("framecolor"),c("framewidth"));c("bgcolor");c("fitbounds")&&(delete n.projection.scale,w?(delete n.center.lon,
delete n.center.lat):D?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}var h=b("../../lib"),l=b("../subplot_defaults"),e=b("../get_data").getSubplotData,a=b("./constants"),g=b("./layout_attributes"),k=a.axesNames;F.exports=function(p,n,c){l(p,n,c,{type:"geo",attributes:g,handleDefaults:m,fullData:c,partition:"y"})}},{"../../lib":749,
"../get_data":834,"../subplot_defaults":874,"./constants":827,"./layout_attributes":830}],832:[function(b,F,C){F.exports=function(m){function h(P,V){return{type:"Feature",id:P.id,properties:P.properties,geometry:l(P.geometry,V)}}function l(P,V){if(!P)return null;if("GeometryCollection"===P.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(ba){return l(ba,V)})};if(!G.hasOwnProperty(P.type))return null;var Y=G[P.type];m.geo.stream(P,V(Y));return Y.result()}function e(){}
function a(P){return 1<P?L:-1>P?-L:Math.asin(P)}function g(P){return 1<P?0:-1>P?I:Math.acos(P)}function k(P,V){var Y=(2+L)*Math.sin(V);V/=2;for(var ba=0,ea=Infinity;10>ba&&1E-6<Math.abs(ea);ba++)ea=Math.cos(V),V-=ea=(V+Math.sin(V)*(ea+2)-Y)/(2*ea*(1+ea));return[2/Math.sqrt(I*(4+I))*P*(1+Math.cos(V)),2*Math.sqrt(I/(4+I))*Math.sin(V)]}function p(P,V){function Y(ba,ea){ba=O(ba/V,ea);ba[0]*=P;return ba}2>arguments.length&&(V=P);if(1===V)return O;if(Infinity===V)return n;Y.invert=function(ba,ea){ba=O.invert(ba/
P,ea);ba[0]*=V;return ba};return Y}function n(P,V){return[P*Math.cos(V)/Math.cos(V/=2),2*Math.sin(V)]}function c(P,V){return[3*P/(2*I)*Math.sqrt(I*I/3-V*V),V]}function f(P,V){return[P,1.25*Math.log(Math.tan(I/4+.4*V))]}function d(P){return function(V){var Y=P*Math.sin(V),ba=30,ea;do V-=ea=(V+Math.sin(V)-Y)/(1+Math.cos(V));while(1E-6<Math.abs(ea)&&0<--ba);return V/2}}function q(P,V){var Y=V*V,ba=Y*Y;return[P*(.8707-.131979*Y+ba*(-.013791+ba*(.003971*Y-.001529*ba))),V*(1.007226+Y*(.015085+ba*(-.044475+
.028874*Y-.005916*ba)))]}function r(P,V){var Y=Math.min(18,36*Math.abs(V)/I),ba=Math.floor(Y);Y-=ba;var ea=(ha=U[ba])[0],ca=ha[1],ia=(ha=U[++ba])[0],fa=ha[1];ba=(ha=U[Math.min(19,++ba)])[0];ha=ha[1];var ha;return[P*(ia+Y*(ba-ea)/2+Y*Y*(ba-2*ia+ea)/2),(0<V?L:-L)*(fa+Y*(ha-ca)/2+Y*Y*(ha-2*fa+ca)/2)]}function u(P,V){return[P*Math.cos(V),V]}function v(P,V){var Y=Math.cos(V);var ba=(ba=g(Y*Math.cos(P/=2)))?ba/Math.sin(ba):1;return[2*Y*Math.sin(P)*ba,Math.sin(V)*ba]}function w(P,V){var Y=v(P,V);return[(Y[0]+
P/L)/2,(Y[1]+V)/2]}m.geo.project=function(P,V){V=V.stream;if(!V)throw Error("not yet supported");return(P&&y.hasOwnProperty(P.type)?y[P.type]:l)(P,V)};var y={Feature:h,FeatureCollection:function(P,V){return{type:"FeatureCollection",features:P.features.map(function(Y){return h(Y,V)})}}},D=[],x=[],E={point:function(P,V){D.push([P,V])},result:function(){var P=D.length?2>D.length?{type:"Point",coordinates:D[0]}:{type:"MultiPoint",coordinates:D}:null;D=[];return P}},B={lineStart:e,point:function(P,V){D.push([P,
V])},lineEnd:function(){D.length&&(x.push(D),D=[])},result:function(){var P=x.length?2>x.length?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x}:null;x=[];return P}},t={polygonStart:e,lineStart:e,point:function(P,V){D.push([P,V])},lineEnd:function(){var P=D.length;if(P){do D.push(D[0].slice());while(4>++P);x.push(D);D=[]}},polygonEnd:e,result:function(){if(!x.length)return null;var P=[],V=[];x.forEach(function(Y){if(4>(ea=Y.length))var ba=!1;else{ba=0;for(var ea,ca=Y[ea-
1][1]*Y[0][0]-Y[ea-1][0]*Y[0][1];++ba<ea;)ca+=Y[ba-1][1]*Y[ba][0]-Y[ba-1][0]*Y[ba][1];ba=0>=ca}ba?P.push([Y]):V.push(Y)});V.forEach(function(Y){var ba=Y[0];P.some(function(ea){for(var ca=ea[0],ia=ba[0],fa=ba[1],ha=!1,na=0,pa=ca.length,ra=pa-1;na<pa;ra=na++){var ta=ca[na],oa=ta[0];ta=ta[1];var ua=ca[ra];ra=ua[0];ua=ua[1];ta>fa^ua>fa&&ia<(ra-oa)*(fa-ta)/(ua-ta)+oa&&(ha=!ha)}if(ha)return ea.push(Y),!0})||P.push([Y])});x=[];return P.length?1<P.length?{type:"MultiPolygon",coordinates:P}:{type:"Polygon",
coordinates:P[0]}:null}},G={Point:E,MultiPoint:E,LineString:B,MultiLineString:B,Polygon:t,MultiPolygon:t,Sphere:t},I=Math.PI,L=I/2,M=I/180,N=180/I,H=m.geo.projection,J=m.geo.projectionMutator;m.geo.interrupt=function(P){function V(na,pa){for(var ra=0>pa?-1:1,ta=ca[+(0>pa)],oa=0,ua=ta.length-1;oa<ua&&na>ta[oa][2][0];++oa);na=P(na-ta[oa][1][0],pa);na[0]+=P(ta[oa][1][0],ra*pa>ra*ta[oa][0][1]?ta[oa][0][1]:pa)[0];return na}function Y(){ia=ca.map(function(na){return na.map(function(pa){var ra=P(pa[0][0],
pa[0][1])[0],ta=P(pa[2][0],pa[2][1])[0],oa=P(pa[1][0],pa[0][1])[1];pa=P(pa[1][0],pa[1][1])[1];if(oa>pa){var ua=oa;oa=pa;pa=ua}return[[ra,oa],[ta,pa]]})})}function ba(){for(var na=[],pa=0,ra=ca[0].length;pa<ra;++pa){var ta=ca[0][pa],oa=180*ta[0][0]/I,ua=180*ta[0][1]/I,ka=180*ta[1][1]/I,sa=180*ta[2][0]/I;ta=180*ta[2][1]/I;na.push(ea([[oa+1E-6,ua+1E-6],[oa+1E-6,ka-1E-6],[sa-1E-6,ka-1E-6],[sa-1E-6,ta+1E-6]],30))}for(pa=ca[1].length-1;0<=pa;--pa)ta=ca[1][pa],oa=180*ta[0][0]/I,ua=180*ta[0][1]/I,ka=180*
ta[1][1]/I,sa=180*ta[2][0]/I,ta=180*ta[2][1]/I,na.push(ea([[sa-1E-6,ta-1E-6],[sa-1E-6,ka+1E-6],[oa+1E-6,ka+1E-6],[oa+1E-6,ua-1E-6]],30));return{type:"Polygon",coordinates:[m.merge(na)]}}function ea(na,pa){for(var ra=-1,ta=na.length,oa=na[0],ua,ka,sa,ya=[];++ra<ta;){ua=na[ra];ka=(ua[0]-oa[0])/pa;sa=(ua[1]-oa[1])/pa;for(var qa=0;qa<pa;++qa)ya.push([oa[0]+qa*ka,oa[1]+qa*sa]);oa=ua}ya.push(ua);return ya}var ca=[[[[-I,0],[0,L],[I,0]]],[[[-I,0],[0,-L],[I,0]]]],ia;P.invert&&(V.invert=function(na,pa){for(var ra=
ia[+(0>pa)],ta=ca[+(0>pa)],oa=0,ua=ra.length;oa<ua;++oa){var ka=ra[oa];if(ka[0][0]<=na&&na<ka[1][0]&&ka[0][1]<=pa&&pa<ka[1][1])return ra=P.invert(na-P(ta[oa][1][0],0)[0],pa),ra[0]+=ta[oa][1][0],ta=V(ra[0],ra[1]),na=[na,pa],1E-6>Math.abs(ta[0]-na[0])&&1E-6>Math.abs(ta[1]-na[1])?ra:null}});var fa=m.geo.projection(V),ha=fa.stream;fa.stream=function(na){var pa=fa.rotate(),ra=ha(na),ta=(fa.rotate([0,0]),ha(na));fa.rotate(pa);ra.sphere=function(){m.geo.stream(ba(),ta)};return ra};fa.lobes=function(na){if(!arguments.length)return ca.map(function(pa){return pa.map(function(ra){return[[180*
ra[0][0]/I,180*ra[0][1]/I],[180*ra[1][0]/I,180*ra[1][1]/I],[180*ra[2][0]/I,180*ra[2][1]/I]]})});ca=na.map(function(pa){return pa.map(function(ra){return[[ra[0][0]*I/180,ra[0][1]*I/180],[ra[1][0]*I/180,ra[1][1]*I/180],[ra[2][0]*I/180,ra[2][1]*I/180]]})});Y();return fa};return fa};k.invert=function(P,V){V=.5*V*Math.sqrt((4+I)/I);var Y=a(V),ba=Math.cos(Y);return[P/(2/Math.sqrt(I*(4+I))*(1+ba)),a((Y+V*(ba+2))/(2+L))]};(m.geo.eckert4=function(){return H(k)}).raw=k;var O=m.geo.azimuthalEqualArea.raw;n.invert=
function(P,V){V=2*a(V/2);return[P*Math.cos(V/2)/Math.cos(V),V]};(m.geo.hammer=function(){var P=2,V=J(p),Y=V(P);Y.coefficient=function(ba){return arguments.length?V(P=+ba):P};return Y}).raw=p;c.invert=function(P,V){return[2/3*I*P/Math.sqrt(I*I/3-V*V),V]};(m.geo.kavrayskiy7=function(){return H(c)}).raw=c;f.invert=function(P,V){return[P,2.5*Math.atan(Math.exp(.8*V))-.625*I]};(m.geo.miller=function(){return H(f)}).raw=f;d(I);var Q=function(P,V,Y){function ba(ca,ia){return[P*ca*Math.cos(ia=ea(ia)),V*Math.sin(ia)]}
var ea=d(Y);ba.invert=function(ca,ia){ia=a(ia/V);return[ca/(P*Math.cos(ia)),a((2*ia+Math.sin(2*ia))/Y)]};return ba}(Math.SQRT2/L,Math.SQRT2,I);(m.geo.mollweide=function(){return H(Q)}).raw=Q;q.invert=function(P,V){var Y=V,ba=25;do{var ea=Y*Y;var ca=ea*ea;Y-=ca=(Y*(1.007226+ea*(.015085+ca*(-.044475+.028874*ea-.005916*ca)))-V)/(1.007226+ea*(.045255+ca*(-.311325+.259866*ea-.005916*11*ca)))}while(1E-6<Math.abs(ca)&&0<--ba);return[P/(.8707+(ea=Y*Y)*(-.131979+ea*(-.013791+ea*ea*ea*(.003971-.001529*ea)))),
Y]};(m.geo.naturalEarth=function(){return H(q)}).raw=q;var U=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];U.forEach(function(P){P[1]*=1.0144});r.invert=function(P,V){var Y=V/L,ba=90*Y,ea=Math.min(18,Math.abs(ba/5)),ca=Math.max(0,Math.floor(ea));do{var ia=U[ca][1],fa=U[ca+1][1],ha=U[Math.min(19,
ca+2)][1],na=ha-ia,pa=2*(Math.abs(Y)-fa)/na;ia=(ha-2*fa+ia)/na;pa*=1-ia*pa*(1-2*ia*pa);if(0<=pa||1===ca){ba=(0<=V?5:-5)*(pa+ea);Y=50;do ea=Math.min(18,Math.abs(ba)/5),ca=Math.floor(ea),pa=ea-ca,ia=U[ca][1],fa=U[ca+1][1],ha=U[Math.min(19,ca+2)][1],ba-=(ea=(0<=V?L:-L)*(fa+pa*(ha-ia)/2+pa*pa*(ha-2*fa+ia)/2)-V)*N;while(1E-12<Math.abs(ea)&&0<--Y);break}}while(0<=--ca);V=U[ca][0];ea=U[ca+1][0];ca=U[Math.min(19,ca+2)][0];return[P/(ea+pa*(ca-V)/2+pa*pa*(ca-2*ea+V)/2),ba*M]};(m.geo.robinson=function(){return H(r)}).raw=
r;u.invert=function(P,V){return[P/Math.cos(V),V]};(m.geo.sinusoidal=function(){return H(u)}).raw=u;v.invert=function(P,V){if(!(P*P+4*V*V>I*I+1E-6)){var Y=P,ba=V,ea=25;do{var ca=Math.sin(Y),ia=Math.sin(Y/2),fa=Math.cos(Y/2),ha=Math.sin(ba),na=Math.cos(ba),pa=Math.sin(2*ba),ra=ha*ha,ta=na*na,oa=ia*ia,ua=1-ta*fa*fa,ka=ua?g(na*fa)*Math.sqrt(sa=1/ua):sa=0,sa;ua=2*ka*na*ia-P;var ya=ka*ha-V,qa=sa*(ta*oa+ka*na*fa*ra),xa=sa*(.5*ca*pa-2*ka*ha*ia);ca=.25*sa*(pa*ia-ka*ha*ta*ca);na=sa*(ra*fa+ka*oa*na);fa=xa*ca-
na*qa;if(!fa)break;xa=(ya*xa-ua*na)/fa;ua=(ua*ca-ya*qa)/fa;Y-=xa;ba-=ua}while((1E-6<Math.abs(xa)||1E-6<Math.abs(ua))&&0<--ea);return[Y,ba]}};(m.geo.aitoff=function(){return H(v)}).raw=v;w.invert=function(P,V){var Y=P,ba=V,ea=25;do{var ca=Math.cos(ba),ia=Math.sin(ba),fa=Math.sin(2*ba),ha=ia*ia,na=ca*ca,pa=Math.sin(Y),ra=Math.cos(Y/2),ta=Math.sin(Y/2),oa=ta*ta,ua=1-na*ra*ra,ka=ua?g(ca*ra)*Math.sqrt(sa=1/ua):sa=0,sa;ua=.5*(2*ka*ca*ta+Y/L)-P;var ya=.5*(ka*ia+ba)-V,qa=.5*sa*(na*oa+ka*ca*ra*ha)+.5/L,xa=
sa*(pa*fa/4-ka*ia*ta);ia=.125*sa*(fa*ta-ka*ia*na*pa);ha=.5*sa*(ha*ra+ka*oa*ca)+.5;ca=xa*ia-ha*qa;xa=(ya*xa-ua*ha)/ca;ua=(ua*ia-ya*qa)/ca;Y-=xa;ba-=ua}while((1E-6<Math.abs(xa)||1E-6<Math.abs(ua))&&0<--ea);return[Y,ba]};(m.geo.winkel3=function(){return H(w)}).raw=w}},{}],833:[function(b,F,C){function m(D,x){return d.behavior.zoom().translate(x.translate()).scale(x.scale())}function h(D,x,E){function B(O,Q){H[t+"."+O]=q.nestedProperty(L,O).get();r.call("_storeDirectGUIEdit",I,M._preGUI,H);var U=q.nestedProperty(N,
O);U.get()!==Q&&(U.set(Q),q.nestedProperty(L,O).set(Q),J[t+"."+O]=Q)}var t=D.id,G=D.graphDiv,I=G.layout,L=I[t],M=G._fullLayout,N=M[t],H={},J={};E(B);B("projection.scale",x.scale()/D.fitScale);B("fitbounds",!1);G.emit("plotly_relayout",J)}function l(D,x){function E(t){var G=x.invert(D.midPt);t("center.lon",G[0]);t("center.lat",G[1])}var B=m(D,x);B.on("zoomstart",function(){d.select(this).style(w)}).on("zoom",function(){x.scale(d.event.scale).translate(d.event.translate);D.render();var t=x.invert(D.midPt);
D.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":x.scale()/D.fitScale,"geo.center.lon":t[0],"geo.center.lat":t[1]})}).on("zoomend",function(){d.select(this).style(y);h(D,x,E)});return B}function e(D,x){function E(Q){var U=x.rotate(),P=x.invert(D.midPt);Q("projection.rotation.lon",-U[0]);Q("center.lon",P[0]);Q("center.lat",P[1])}var B=m(D,x),t,G,I,L,M,N,H,J,O;B.on("zoomstart",function(){d.select(this).style(w);t=d.mouse(this);G=x.rotate();I=x.translate();L=G;M=x.invert(t)}).on("zoom",function(){N=
d.mouse(this);var Q=t;var U=x.invert(Q);U?(U=x(U),Q=2<Math.abs(U[0]-Q[0])||2<Math.abs(U[1]-Q[1])):Q=!0;Q?(B.scale(x.scale()),B.translate(x.translate())):(x.scale(d.event.scale),x.translate([I[0],d.event.translate[1]]),M?x.invert(N)&&(J=x.invert(N),H=[L[0]+(J[0]-M[0]),G[1],G[2]],x.rotate(H),L=H):(t=N,M=x.invert(t)),O=!0,D.render(),Q=x.rotate(),U=x.invert(D.midPt),D.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":x.scale()/D.fitScale,"geo.center.lon":U[0],"geo.center.lat":U[1],"geo.projection.rotation.lon":-Q[0]}))}).on("zoomend",
function(){d.select(this).style(y);O&&h(D,x,E)});return B}function a(D,x){function E(N){I++||N({type:"zoomstart"})}function B(N){var H=x.rotate();N("projection.rotation.lon",-H[0]);N("projection.rotation.lat",-H[1])}x.rotate();x.scale();var t=m(D,x),G=f(t,"zoomstart","zoom","zoomend"),I=0,L=t.on,M;t.on("zoomstart",function(){d.select(this).style(w);var N=d.mouse(this),H=x.rotate(),J=H,O=x.translate(),Q=k(H);M=g(x,N);L.call(t,"zoom",function(){var U=d.mouse(this);x.scale(d.event.scale);if(!M)N=U,M=
g(x,N);else if(g(x,U)){x.rotate(H).translate(O);var P=g(x,U);var V=M;if(V&&P){U=[V[1]*P[2]-V[2]*P[1],V[2]*P[0]-V[0]*P[2],V[0]*P[1]-V[1]*P[0]];var Y=Math.sqrt(c(U,U));P=.5*Math.acos(Math.max(-1,Math.min(1,c(V,P))));V=Math.sin(P)/Y;var ba=Y&&[Math.cos(P),U[2]*V,-U[1]*V,U[0]*V]}else ba=void 0;U=Q[0];Y=Q[1];P=Q[2];V=Q[3];var ea=ba[0],ca=ba[1],ia=ba[2];ba=ba[3];U=[U*ea-Y*ca-P*ia-V*ba,U*ca+Y*ea+P*ba-V*ia,U*ia-Y*ba+P*ea+V*ca,U*ba+Y*ia-P*ca+V*ea];P=[Math.atan2(2*(U[0]*U[1]+U[2]*U[3]),1-2*(U[1]*U[1]+U[2]*
U[2]))*v,Math.asin(Math.max(-1,Math.min(1,2*(U[0]*U[2]-U[3]*U[1]))))*v,Math.atan2(2*(U[0]*U[3]+U[1]*U[2]),1-2*(U[2]*U[2]+U[3]*U[3]))*v];Y=M;U=J;ea=n(Y,2,P[0]);ea=n(ea,1,P[1]);ea=n(ea,0,P[2]-U[2]);V=Y[0];ba=Y[1];Y=Y[2];P=ea[0];ca=ea[1];ea=ea[2];ia=Math.atan2(ba,V)*v;ba=Math.sqrt(V*V+ba*ba);Math.abs(ca)>ba?(V=(0<ca?90:-90)-ia,ba=0):(V=Math.asin(ca/ba)*v-ia,ba=Math.sqrt(ba*ba-ca*ca));ca=180-V-2*ia;ia=(Math.atan2(ea,P)-Math.atan2(Y,ba))*v;Y=(Math.atan2(ea,P)-Math.atan2(Y,-ba))*v;P=p(U[0],U[1],V,ia);ea=
p(U[0],U[1],ca,Y);U=P<=ea?[V,ia,U[2]]:[ca,Y,U[2]];isFinite(U[0])&&isFinite(U[1])&&isFinite(U[2])||(U=J);x.rotate(U);J=U}G.of(this,arguments)({type:"zoom"})});E(G.of(this,arguments))}).on("zoomend",function(){d.select(this).style(y);L.call(t,"zoom",null);var N=G.of(this,arguments);--I||N({type:"zoomend"});h(D,x,B)}).on("zoom.redraw",function(){D.render();var N=x.rotate();D.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":x.scale()/D.fitScale,"geo.projection.rotation.lon":-N[0],"geo.projection.rotation.lat":-N[1]})});
return d.rebind(t,G,"on")}function g(D,x){if(D=(x=D.invert(x))&&isFinite(x[0])&&isFinite(x[1])){D=x[0]*u;x=x[1]*u;var E=Math.cos(x);D=[E*Math.cos(D),E*Math.sin(D),Math.sin(x)]}return D}function k(D){var x=.5*D[0]*u,E=.5*D[1]*u,B=.5*D[2]*u;D=Math.sin(x);x=Math.cos(x);var t=Math.sin(E);E=Math.cos(E);var G=Math.sin(B);B=Math.cos(B);return[x*E*B+D*t*G,D*E*B-x*t*G,x*t*B+D*E*G,x*E*G-D*t*B]}function p(D,x,E,B){D=((E-D)%360+540)%360-180;x=((B-x)%360+540)%360-180;return Math.sqrt(D*D+x*x)}function n(D,x,E){var B=
E*u;E=D.slice();var t=0===x?1:0;x=2===x?1:2;var G=Math.cos(B);B=Math.sin(B);E[t]=D[t]*G-D[x]*B;E[x]=D[x]*G+D[t]*B;return E}function c(D,x){for(var E=0,B=0,t=D.length;B<t;++B)E+=D[B]*x[B];return E}function f(D){for(var x=0,E=arguments.length,B=[];++x<E;)B.push(arguments[x]);var t=d.dispatch.apply(null,B);t.of=function(G,I){return function(L){try{var M=L.sourceEvent=d.event;L.target=D;d.event=L;t[L.type].apply(G,I)}finally{d.event=M}}};return t}var d=b("d3"),q=b("../../lib"),r=b("../../registry"),u=
Math.PI/180,v=180/Math.PI,w={cursor:"pointer"},y={cursor:"auto"};F.exports=function(D,x){return(x._isScoped?l:x._isClipped?a:e)(D,D.projection)}},{"../../lib":749,"../../registry":880,d3:169}],834:[function(b,F,C){var m=b("../registry"),h=b("./cartesian/constants").SUBPLOT_PATTERN;C.getSubplotCalcData=function(l,e,a){e=m.subplotsRegistry[e];if(!e)return[];e=e.attr;for(var g=[],k=0;k<l.length;k++){var p=l[k];p[0].trace[e]===a&&g.push(p)}return g};C.getModuleCalcData=function(l,e){var a=[],g=[];e="string"===
typeof e?m.getModule(e).plot:"function"===typeof e?e:e.plot;if(!e)return[a,l];for(var k=0;k<l.length;k++){var p=l[k],n=p[0].trace;!0===n.visible&&0!==n._length&&(n._module.plot===e?a.push(p):g.push(p))}return[a,g]};C.getSubplotData=function(l,e,a){if(!m.subplotsRegistry[e])return[];var g=m.subplotsRegistry[e].attr,k=[];if("gl2d"===e){var p=a.match(h);var n="x"+p[1];var c="y"+p[2]}for(var f=0;f<l.length;f++)p=l[f],"gl2d"===e&&m.traceIs(p,"gl2d")?p[g[0]]===n&&p[g[1]]===c&&k.push(p):p[g]===a&&k.push(p);
return k}},{"../registry":880,"./cartesian/constants":803}],835:[function(b,F,C){function m(k,p){this.element=k;this.plot=p;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}var h=b("mouse-change"),l=b("mouse-wheel"),e=b("mouse-event-offset"),a=b("../cartesian/constants"),g=b("has-passive-events");F.exports=function(k){function p(){for(var q=k.graphDiv._fullLayout._axisConstraintGroups,
r=k.xaxis._id,u=k.yaxis._id,v=0;v<q.length;v++)if(-1!==q[v][r]){if(-1!==q[v][u])return!0;break}return!1}function n(q,r,u){function v(t,G,I){var L=Math.min(G,I);G=Math.max(G,I);L!==G?(w[t]=L,w[t+2]=G,d.dataBox=w,k.setRanges(w)):(k.selectBox.selectBox=[0,0,1,1],k.glplot.setDirty())}var w=k.calcDataBox(),y=f.viewBox,D=d.lastPos[0],x=d.lastPos[1],E=a.MINDRAG*f.pixelRatio,B=a.MINZOOM*f.pixelRatio;r*=f.pixelRatio;u*=f.pixelRatio;u=y[3]-y[1]-u;switch(k.fullLayout.dragmode){case "zoom":q?(x=r/(y[2]-y[0])*
(w[2]-w[0])+w[0],y=u/(y[3]-y[1])*(w[3]-w[1])+w[1],d.boxInited||(d.boxStart[0]=x,d.boxStart[1]=y,d.dragStart[0]=r,d.dragStart[1]=u),d.boxEnd[0]=x,d.boxEnd[1]=y,d.boxInited=!0,d.boxEnabled||d.boxStart[0]===d.boxEnd[0]&&d.boxStart[1]===d.boxEnd[1]||(d.boxEnabled=!0),y=Math.abs(d.dragStart[0]-r)<B,B=Math.abs(d.dragStart[1]-u)<B,!p()||y&&B?(y&&(d.boxEnd[0]=d.boxStart[0]),B&&(d.boxEnd[1]=d.boxStart[1])):(B=d.boxEnd[0]-d.boxStart[0],y=d.boxEnd[1]-d.boxStart[1],x=(w[3]-w[1])/(w[2]-w[0]),Math.abs(B*x)>Math.abs(y)?
(d.boxEnd[1]=d.boxStart[1]+Math.abs(B)*x*(0<=y?1:-1),d.boxEnd[1]<w[1]?(d.boxEnd[1]=w[1],d.boxEnd[0]=d.boxStart[0]+(w[1]-d.boxStart[1])/Math.abs(x)):d.boxEnd[1]>w[3]&&(d.boxEnd[1]=w[3],d.boxEnd[0]=d.boxStart[0]+(w[3]-d.boxStart[1])/Math.abs(x))):(d.boxEnd[0]=d.boxStart[0]+Math.abs(y)/x*(0<=B?1:-1),d.boxEnd[0]<w[0]?(d.boxEnd[0]=w[0],d.boxEnd[1]=d.boxStart[1]+(w[0]-d.boxStart[0])*Math.abs(x)):d.boxEnd[0]>w[2]&&(d.boxEnd[0]=w[2],d.boxEnd[1]=d.boxStart[1]+(w[2]-d.boxStart[0])*Math.abs(x))))):d.boxEnabled?
(B=d.boxStart[0]!==d.boxEnd[0],y=d.boxStart[1]!==d.boxEnd[1],B||y?(B&&(v(0,d.boxStart[0],d.boxEnd[0]),k.xaxis.autorange=!1),y&&(v(1,d.boxStart[1],d.boxEnd[1]),k.yaxis.autorange=!1),k.relayoutCallback()):k.glplot.setDirty(),d.boxEnabled=!1,d.boxInited=!1):d.boxInited&&(d.boxInited=!1);break;case "pan":d.boxEnabled=!1,d.boxInited=!1,q?(d.panning||(d.dragStart[0]=r,d.dragStart[1]=u),Math.abs(d.dragStart[0]-r)<E&&(r=d.dragStart[0]),Math.abs(d.dragStart[1]-u)<E&&(u=d.dragStart[1]),B=(D-r)*(w[2]-w[0])/
(f.viewBox[2]-f.viewBox[0]),y=(x-u)*(w[3]-w[1])/(f.viewBox[3]-f.viewBox[1]),w[0]+=B,w[2]+=B,w[1]+=y,w[3]+=y,k.setRanges(w),d.panning=!0,d.lastInputTime=Date.now(),k.xaxis.autorange=!1,k.yaxis.autorange=!1,k.cameraChanged(),k.handleAnnotations()):d.panning&&(d.panning=!1,k.relayoutCallback())}d.lastPos[0]=r;d.lastPos[1]=u}var c=k.mouseContainer,f=k.glplot,d=new m(c,f);d.mouseListener=h(c,n);c.addEventListener("touchstart",function(q){var r=e(q.changedTouches[0],c);n(0,r[0],r[1]);n(1,r[0],r[1]);q.preventDefault()},
g?{passive:!1}:!1);c.addEventListener("touchmove",function(q){q.preventDefault();var r=e(q.changedTouches[0],c);n(1,r[0],r[1]);q.preventDefault()},g?{passive:!1}:!1);c.addEventListener("touchend",function(q){n(0,d.lastPos[0],d.lastPos[1]);q.preventDefault()},g?{passive:!1}:!1);d.wheelListener=l(c,function(q,r){if(!k.scrollZoom)return!1;q=k.calcDataBox();var u=f.viewBox;r=Math.exp(5*r/(u[3]-u[1]));var v=d.lastPos[0]/(u[2]-u[0])*(q[2]-q[0])+q[0];u=d.lastPos[1]/(u[3]-u[1])*(q[3]-q[1])+q[1];q[0]=(q[0]-
v)*r+v;q[2]=(q[2]-v)*r+v;q[1]=(q[1]-u)*r+u;q[3]=(q[3]-u)*r+u;k.setRanges(q);d.lastInputTime=Date.now();k.xaxis.autorange=!1;k.yaxis.autorange=!1;k.cameraChanged();k.handleAnnotations();k.relayoutCallback();return!0},!0);return d}},{"../cartesian/constants":803,"has-passive-events":415,"mouse-change":457,"mouse-event-offset":458,"mouse-wheel":460}],836:[function(b,F,C){function m(a){this.scene=a;this.gl=a.gl;this.pixelRatio=a.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=
[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=[0,Math.PI/2,
0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=[12,12];this.labelFont=["sans-serif","sans-serif"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,
0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.static=this.scene.staticPlot}var h=b("../cartesian/axes"),l=b("../../lib/str2rgbarray");b=m.prototype;var e=["xaxis","yaxis"];b.merge=function(a){this.titleEnable=!1;this.backgroundColor=l(a.plot_bgcolor);var g,k;for(k=0;2>k;++k){var p=e[k];var n=p.charAt(0);var c=a[this.scene[p]._name];n=c.title.text===this.scene.fullLayout._dfltTitle[n]?"":c.title.text;for(g=0;2>=g;g+=2)this.labelEnable[k+g]=!1,this.labels[k+g]=n,this.labelColor[k+
g]=l(c.title.font.color),this.labelFont[k+g]=c.title.font.family,this.labelSize[k+g]=c.title.font.size,this.labelPad[k+g]=this.getLabelPad(p,c),this.tickEnable[k+g]=!1,this.tickColor[k+g]=l((c.tickfont||{}).color),this.tickAngle[k+g]="auto"===c.tickangle?0:Math.PI*-c.tickangle/180,this.tickPad[k+g]=this.getTickPad(c),this.tickMarkLength[k+g]=0,this.tickMarkWidth[k+g]=c.tickwidth||0,this.tickMarkColor[k+g]=l(c.tickcolor),this.borderLineEnable[k+g]=!1,this.borderLineColor[k+g]=l(c.linecolor),this.borderLineWidth[k+
g]=c.linewidth||0;g=this.hasSharedAxis(c);n=this.hasAxisInDfltPos(p,c)&&!g;p=this.hasAxisInAltrPos(p,c)&&!g;var f=c.mirror||!1;var d=g?-1!==String(f).indexOf("all"):!!f;g=g?"allticks"===f:-1!==String(f).indexOf("ticks");n?this.labelEnable[k]=!0:p&&(this.labelEnable[k+2]=!0);n?this.tickEnable[k]=c.showticklabels:p&&(this.tickEnable[k+2]=c.showticklabels);if(n||d)this.borderLineEnable[k]=c.showline;if(p||d)this.borderLineEnable[k+2]=c.showline;if(n||g)this.tickMarkLength[k]=this.getTickMarkLength(c);
if(p||g)this.tickMarkLength[k+2]=this.getTickMarkLength(c);this.gridLineEnable[k]=c.showgrid;this.gridLineColor[k]=l(c.gridcolor);this.gridLineWidth[k]=c.gridwidth;this.zeroLineEnable[k]=c.zeroline;this.zeroLineColor[k]=l(c.zerolinecolor);this.zeroLineWidth[k]=c.zerolinewidth}};b.hasSharedAxis=function(a){var g=this.scene;return 0!==h.findSubplotsWithAxis(g.fullLayout._subplots.gl2d,a).indexOf(g.id)};b.hasAxisInDfltPos=function(a,g){g=g.side;if("xaxis"===a)return"bottom"===g;if("yaxis"===a)return"left"===
g};b.hasAxisInAltrPos=function(a,g){g=g.side;if("xaxis"===a)return"top"===g;if("yaxis"===a)return"right"===g};b.getLabelPad=function(a,g){var k=g.title.font.size,p=g.showticklabels;if("xaxis"===a)return"top"===g.side?-10+k*(1.5+(p?1:0)):-10+k*(1.5+(p?.5:0));if("yaxis"===a)return"right"===g.side?10+k*(1.5+(p?1:.5)):10+k*(1.5+(p?.5:0))};b.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15};b.getTickMarkLength=function(a){if(!a.ticks)return 0;var g=a.ticklen;return"inside"===a.ticks?-g:
g};F.exports=function(a){return new m(a)}},{"../../lib/str2rgbarray":772,"../cartesian/axes":797}],837:[function(b,F,C){F=b("../../plot_api/edit_types").overrideAll;var m=b("./scene2d"),h=b("../layout_attributes"),l=b("../../constants/xmlns_namespaces"),e=b("../cartesian/constants"),a=b("../cartesian"),g=b("../../components/fx/layout_attributes"),k=b("../get_data").getSubplotData;C.name="gl2d";C.attr=["xaxis","yaxis"];C.idRoot=["x","y"];C.idRegex=e.idRegex;C.attrRegex=e.attrRegex;C.attributes=b("../cartesian/attributes");
C.supplyLayoutDefaults=function(p,n,c){n._has("cartesian")||a.supplyLayoutDefaults(p,n,c)};C.layoutAttrOverrides=F(a.layoutAttributes,"plot","from-root");C.baseLayoutAttrOverrides=F({plot_bgcolor:h.plot_bgcolor,hoverlabel:g.hoverlabel},"plot","nested");C.plot=function(p){for(var n=p._fullLayout,c=p._fullData,f=n._subplots.gl2d,d=0;d<f.length;d++){var q=f[d],r=n._plots[q],u=k(c,"gl2d",q),v=r._scene2d;void 0===v&&(v=new m({id:q,graphDiv:p,container:p.querySelector(".gl-container"),staticPlot:p._context.staticPlot,
plotGlPixelRatio:p._context.plotGlPixelRatio},n),r._scene2d=v);v.plot(u,p.calcdata,n,p.layout)}};C.clean=function(p,n,c,f){for(var d=f._subplots.gl2d||[],q=0;q<d.length;q++){var r=d[q],u=f._plots[r];u._scene2d&&0===k(p,"gl2d",r).length&&(u._scene2d.destroy(),delete f._plots[r])}a.clean.apply(this,arguments)};C.drawFramework=function(p){p._context.staticPlot||a.drawFramework(p)};C.toSVG=function(p){p=p._fullLayout;for(var n=p._subplots.gl2d,c=0;c<n.length;c++){var f=p._plots[n[c]]._scene2d,d=f.toImage("png");
p._glimages.append("svg:image").attr({xmlns:l.svg,"xlink:href":d,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"});f.destroy()}};C.updateFx=function(p){p=p._fullLayout;for(var n=p._subplots.gl2d,c=0;c<n.length;c++)p._plots[n[c]]._scene2d.updateFx(p.dragmode)}},{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":725,"../../plot_api/edit_types":780,"../cartesian":810,"../cartesian/attributes":795,"../cartesian/constants":803,"../get_data":834,"../layout_attributes":851,
"./scene2d":838}],838:[function(b,F,C){function m(E,B){this.container=E.container;this.graphDiv=E.graphDiv;this.pixelRatio=E.plotGlPixelRatio||window.devicePixelRatio;this.id=E.id;this.staticPlot=!!E.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(B);this.makeFramework();this.stopped||(this.glplotOptions=n(this),this.glplotOptions.merge(B),this.glplot=a(this.glplotOptions),this.camera=c(this),this.traces={},this.spikes=g(this.glplot),this.selectBox=
k(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var h=b("../../registry"),l=b("../../plots/cartesian/axes"),e=b("../../components/fx"),a=b("gl-plot2d"),g=b("gl-spikes2d"),k=b("gl-select-box"),p=b("webgl-context"),n=b("./convert"),c=b("./camera"),f=b("../../lib/show_no_webgl_msg");C=b("../cartesian/constraints");var d=C.enforce,q=C.clean,r=b("../cartesian/autorange").doAutoRange;
C=b("../../components/dragelement/helpers");var u=C.drawMode,v=C.selectMode,w=["xaxis","yaxis"],y,D,x=b("../cartesian/constants").SUBPLOT_PATTERN;F.exports=m;b=m.prototype;b.makeFramework=function(){if(this.staticPlot){if(!D&&(y=document.createElement("canvas"),D=p({canvas:y,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!D))throw Error("Error creating static canvas/context for image server");this.canvas=y;this.gl=D}else{var E=this.container.querySelector(".gl-canvas-focus"),B=p({canvas:E,
preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!B){f(this);this.stopped=!0;return}this.canvas=E;this.gl=B}E=this.canvas;E.style.width="100%";E.style.height="100%";E.style.position="absolute";E.style.top="0px";E.style.left="0px";E.style["pointer-events"]="none";this.updateSize(E);E.className+=" user-select-none";E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute";E.style.top=E.style.left="0px";E.style.width=E.style.height="100%";E.style["z-index"]=
20;E.style["pointer-events"]="none";B=this.mouseContainer=document.createElement("div");B.style.position="absolute";B.style["pointer-events"]="auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var t=this.container;t.appendChild(E);t.appendChild(B);var G=this;B.addEventListener("mouseout",function(){G.isMouseOver=!1;G.unhover()});B.addEventListener("mouseover",function(){G.isMouseOver=!0})};b.toImage=function(E){E||(E="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(y);
this.updateSize(this.canvas);var B=this.glplot.gl,t=B.drawingBufferWidth,G=B.drawingBufferHeight;B.clearColor(1,1,1,0);B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();B.bindFramebuffer(B.FRAMEBUFFER,null);var I=new Uint8Array(t*G*4);B.readPixels(0,0,t,G,B.RGBA,B.UNSIGNED_BYTE,I);B=0;for(var L=G-1;B<L;++B,--L)for(var M=0;M<t;++M)for(var N=0;4>N;++N){var H=I[4*(t*B+M)+N];I[4*(t*B+M)+N]=I[4*(t*L+M)+N];I[4*(t*L+M)+N]=H}B=document.createElement("canvas");B.width=
t;B.height=G;L=B.getContext("2d");t=L.createImageData(t,G);t.data.set(I);L.putImageData(t,0,0);switch(E){case "jpeg":E=B.toDataURL("image/jpeg");break;case "webp":E=B.toDataURL("image/webp");break;default:E=B.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(y);return E};b.updateSize=function(E){E||(E=this.canvas);var B=this.pixelRatio,t=this.fullLayout,G=Math.ceil(B*t.width)|0;B=Math.ceil(B*t.height)|0;if(E.width!==G||E.height!==B)E.width=G,E.height=B;return E};b.computeTickMarks=
function(){this.xaxis.setScale();this.yaxis.setScale();for(var E=[l.calcTicks(this.xaxis),l.calcTicks(this.yaxis)],B=0;2>B;++B)for(var t=0;t<E[B].length;++t)E[B][t].text+="";return E};b.updateRefs=function(E){this.fullLayout=E;E=this.id.match(x);var B="yaxis"+E[2];this.xaxis=this.fullLayout["xaxis"+E[1]];this.yaxis=this.fullLayout[B]};b.relayoutCallback=function(){var E=this.graphDiv,B=this.xaxis,t=this.yaxis,G=E.layout,I={},L=I[B._name+".range"]=B.range.slice(),M=I[t._name+".range"]=t.range.slice();
I[B._name+".autorange"]=B.autorange;I[t._name+".autorange"]=t.autorange;h.call("_storeDirectGUIEdit",E.layout,E._fullLayout._preGUI,I);var N=G[B._name];N.range=L;N.autorange=B.autorange;B=G[t._name];B.range=M;B.autorange=t.autorange;I.lastInputTime=this.camera.lastInputTime;E.emit("plotly_relayout",I)};b.cameraChanged=function(){var E=this.camera;this.glplot.setDataBox(this.calcDataBox());var B=this.computeTickMarks(),t=this.glplotOptions.ticks;a:{for(var G=0;2>G;++G){var I=B[G],L=t[G];if(I.length!==
L.length){t=!0;break a}for(var M=0;M<I.length;++M)if(I[M].x!==L[M].x){t=!0;break a}}t=!1}t&&(this.glplotOptions.ticks=B,this.glplotOptions.dataBox=E.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};b.handleAnnotations=function(){for(var E=this.graphDiv,B=this.fullLayout.annotations,t=0;t<B.length;t++){var G=B[t];G.xref===this.xaxis._id&&G.yref===this.yaxis._id&&h.getComponentMethod("annotations","drawOne")(E,t)}};b.destroy=function(){if(this.glplot){var E=this.traces;E&&Object.keys(E).map(function(B){E[B].dispose();
delete E[B]});this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);this.glplot=this.fullData=null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null}};b.plot=function(E,B,t){var G=this.glplot;this.updateRefs(t);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(E,B);this.updateFx(t.dragmode);var I=t.width,L=t.height;this.updateSize(this.canvas);
E=this.glplotOptions;E.merge(t);E.screenBox=[0,0,I,L];B={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};q(B,this.xaxis);q(B,this.yaxis);var M=t._size,N=this.xaxis.domain,H=this.yaxis.domain;E.viewBox=[M.l+N[0]*M.w,M.b+H[0]*M.h,I-M.r-(1-N[1])*M.w,L-M.t-(1-H[1])*M.h];this.mouseContainer.style.width=M.w*(N[1]-N[0])+"px";this.mouseContainer.style.height=M.h*(H[1]-H[0])+"px";this.mouseContainer.height=M.h*(H[1]-H[0]);this.mouseContainer.style.left=
M.l+N[0]*M.w+"px";this.mouseContainer.style.top=M.t+(1-H[1])*M.h+"px";for(L=0;2>L;++L)I=this[w[L]],I._length=E.viewBox[L+2]-E.viewBox[L],r(this.graphDiv,I),I.setScale();d(B);E.ticks=this.computeTickMarks();E.dataBox=this.calcDataBox();E.merge(t);G.update(E);this.glplot.draw()};b.calcDataBox=function(){var E=this.xaxis,B=this.yaxis,t=E.range,G=B.range;E=E.r2l;B=B.r2l;return[E(t[0]),B(G[0]),E(t[1]),B(G[1])]};b.setRanges=function(E){var B=this.xaxis,t=this.yaxis,G=B.l2r,I=t.l2r;B.range=[G(E[0]),G(E[2])];
t.range=[I(E[1]),I(E[3])]};b.updateTraces=function(E,B){var t=Object.keys(this.traces),G;this.fullData=E;var I=0;a:for(;I<t.length;I++){var L=t[I],M=this.traces[L];for(G=0;G<E.length;G++){var N=E[G];if(N.uid===L&&N.type===M.type)continue a}M.dispose();delete this.traces[L]}for(I=0;I<E.length;I++)N=E[I],t=B[I],(G=this.traces[N.uid])?G.update(N,t):(G=N._module.plot(this,N,t),this.traces[N.uid]=G);this.glplot.objects.sort(function(H,J){return H._trace.index-J._trace.index})};b.updateFx=function(E){v(E)||
u(E)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===E?"move":"zoom"===E?"crosshair":null};b.emitPointAction=function(E,B){for(var t=E.trace.uid,G=E.pointIndex,I,L=0;L<this.fullData.length;L++)this.fullData[L].uid===t&&(I=this.fullData[L]);E={x:E.traceCoord[0],y:E.traceCoord[1],curveNumber:I.index,pointNumber:G,
data:I._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(E,I,G);this.graphDiv.emit(B,{points:[E]})};b.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var E=this.glplot,B=this.camera,t=B.mouseListener,G=1===this.lastButtonState&&0===t.buttons,I=this.fullLayout;this.lastButtonState=t.buttons;this.cameraChanged();var L=t.x*E.pixelRatio;t=this.canvas.height-E.pixelRatio*t.y;if(B.boxEnabled&&"zoom"===I.dragmode){this.selectBox.enabled=!0;I=this.selectBox.selectBox=
[Math.min(B.boxStart[0],B.boxEnd[0]),Math.min(B.boxStart[1],B.boxEnd[1]),Math.max(B.boxStart[0],B.boxEnd[0]),Math.max(B.boxStart[1],B.boxEnd[1])];for(G=0;2>G;G++)B.boxStart[G]===B.boxEnd[G]&&(I[G]=E.dataBox[G],I[G+2]=E.dataBox[G+2]);E.setDirty()}else if(!B.panning&&this.isMouseOver){this.selectBox.enabled=!1;var M=I._size;(B=(M=E.pick(L/E.pixelRatio+M.l+this.xaxis.domain[0]*M.w,t/E.pixelRatio-(M.t+(1-this.yaxis.domain[1])*M.h)))&&M.object._trace.handlePick(M))&&G&&this.emitPointAction(B,"plotly_click");
M&&"skip"!==M.object._trace.hoverinfo&&I.hovermode&&B&&(!this.lastPickResult||this.lastPickResult.traceUid!==B.trace.uid||this.lastPickResult.dataCoord[0]!==B.dataCoord[0]||this.lastPickResult.dataCoord[1]!==B.dataCoord[1])&&(this.lastPickResult={traceUid:B.trace?B.trace.uid:null,dataCoord:B.dataCoord.slice()},this.spikes.update({center:M.dataCoord}),B.screenCoord=[((E.viewBox[2]-E.viewBox[0])*(M.dataCoord[0]-E.dataBox[0])/(E.dataBox[2]-E.dataBox[0])+E.viewBox[0])/E.pixelRatio,(this.canvas.height-
(E.viewBox[3]-E.viewBox[1])*(M.dataCoord[1]-E.dataBox[1])/(E.dataBox[3]-E.dataBox[1])-E.viewBox[1])/E.pixelRatio],this.emitPointAction(B,"plotly_hover"),G=this.fullData[B.trace.index]||{},L=B.pointIndex,(I=e.castHoverinfo(G,I,L))&&"all"!==I&&(I=I.split("+"),-1===I.indexOf("x")&&(B.traceCoord[0]=void 0),-1===I.indexOf("y")&&(B.traceCoord[1]=void 0),-1===I.indexOf("z")&&(B.traceCoord[2]=void 0),-1===I.indexOf("text")&&(B.textLabel=void 0),-1===I.indexOf("name")&&(B.name=void 0)),e.loneHover({x:B.screenCoord[0],
y:B.screenCoord[1],xLabel:this.hoverFormatter("xaxis",B.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",B.traceCoord[1]),zLabel:B.traceCoord[2],text:B.textLabel,name:B.name,color:e.castHoverOption(G,L,"bgcolor")||B.color,borderColor:e.castHoverOption(G,L,"bordercolor"),fontFamily:e.castHoverOption(G,L,"font.family"),fontSize:e.castHoverOption(G,L,"font.size"),fontColor:e.castHoverOption(G,L,"font.color"),nameLength:e.castHoverOption(G,L,"namelength"),textAlign:e.castHoverOption(G,L,"align")},{container:this.svgContainer,
gd:this.graphDiv}))}M||this.unhover();E.draw()}};b.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))};b.hoverFormatter=function(E,B){if(void 0!==B)return E=this[E],l.tickText(E,E.c2l(B),"hover").text}},{"../../components/dragelement/helpers":633,"../../components/fx":655,"../../lib/show_no_webgl_msg":770,"../../plots/cartesian/axes":797,"../../registry":880,"../cartesian/autorange":796,"../cartesian/constants":803,
"../cartesian/constraints":804,"./camera":835,"./convert":836,"gl-plot2d":298,"gl-select-box":310,"gl-spikes2d":319,"webgl-context":578}],839:[function(b,F,C){F=b("../../plot_api/edit_types").overrideAll;var m=b("../../components/fx/layout_attributes"),h=b("./scene"),l=b("../get_data").getSubplotData,e=b("../../lib"),a=b("../../constants/xmlns_namespaces");C.name="gl3d";C.attr="scene";C.idRoot="scene";C.idRegex=C.attrRegex=e.counterRegex("scene");C.attributes=b("./layout/attributes");C.layoutAttributes=
b("./layout/layout_attributes");C.baseLayoutAttrOverrides=F({hoverlabel:m.hoverlabel},"plot","nested");C.supplyLayoutDefaults=b("./layout/defaults");C.plot=function(g){for(var k=g._fullLayout,p=g._fullData,n=k._subplots.gl3d,c=0;c<n.length;c++){var f=n[c],d=l(p,"gl3d",f),q=k[f],r=q.camera,u=q._scene;u||(u=new h({id:f,graphDiv:g,container:g.querySelector(".gl-container"),staticPlot:g._context.staticPlot,plotGlPixelRatio:g._context.plotGlPixelRatio,camera:r},k),q._scene=u);u.viewInitial||(u.viewInitial=
{up:{x:r.up.x,y:r.up.y,z:r.up.z},eye:{x:r.eye.x,y:r.eye.y,z:r.eye.z},center:{x:r.center.x,y:r.center.y,z:r.center.z}});u.plot(d,k,g.layout)}};C.clean=function(g,k,p,n){g=n._subplots.gl3d||[];for(p=0;p<g.length;p++){var c=g[p];!k[c]&&n[c]._scene&&(n[c]._scene.destroy(),n._infolayer&&n._infolayer.selectAll(".annotation-"+c).remove())}};C.toSVG=function(g){g=g._fullLayout;for(var k=g._subplots.gl3d,p=g._size,n=0;n<k.length;n++){var c=g[k[n]],f=c.domain;c=c._scene;var d=c.toImage("png");g._glimages.append("svg:image").attr({xmlns:a.svg,
"xlink:href":d,x:p.l+p.w*f.x[0],y:p.t+p.h*(1-f.y[1]),width:p.w*(f.x[1]-f.x[0]),height:p.h*(f.y[1]-f.y[0]),preserveAspectRatio:"none"});c.destroy()}};C.cleanId=function(g){if(g.match(/^scene[0-9]*$/))return g=g.substr(5),"1"===g&&(g=""),"scene"+g};C.updateFx=function(g){g=g._fullLayout;for(var k=g._subplots.gl3d,p=0;p<k.length;p++)g[k[p]]._scene.updateFx(g.dragmode,g.hovermode)}},{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../plot_api/edit_types":780,
"../get_data":834,"./layout/attributes":840,"./layout/defaults":844,"./layout/layout_attributes":845,"./scene":849}],840:[function(b,F,C){F.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],841:[function(b,F,C){C=b("../../../components/color");var m=b("../../cartesian/layout_attributes"),h=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;F.exports=b({visible:m.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",
dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:C.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:m.color,categoryorder:m.categoryorder,categoryarray:m.categoryarray,title:{text:m.title.text,font:m.title.font},type:h({},m.type,{values:["-","linear","log","date","category"]}),autorange:m.autorange,rangemode:m.rangemode,range:h({},m.range,
{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,mirror:m.mirror,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,tickfont:m.tickfont,tickangle:m.tickangle,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,
showexponent:m.showexponent,exponentformat:m.exponentformat,separatethousands:m.separatethousands,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:m.showline,linecolor:m.linecolor,linewidth:m.linewidth,showgrid:m.showgrid,gridcolor:h({},m.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:m.gridwidth,zeroline:m.zeroline,zerolinecolor:m.zerolinecolor,zerolinewidth:m.zerolinewidth,_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}},"plot",
"from-root")},{"../../../components/color":615,"../../../lib/extend":739,"../../../plot_api/edit_types":780,"../../cartesian/layout_attributes":811}],842:[function(b,F,C){var m=b("tinycolor2").mix,h=b("../../../lib"),l=b("../../../plot_api/plot_template"),e=b("./axis_attributes"),a=b("../../cartesian/type_defaults"),g=b("../../cartesian/axis_defaults"),k=["xaxis","yaxis","zaxis"],p=13600/187;F.exports=function(n,c,f){function d(w,y){return h.coerce(q,r,e,w,y)}for(var q,r,u=0;u<k.length;u++){var v=
k[u];q=n[v]||{};r=l.newContainer(c,v);r._id=v[0]+f.scene;r._name=v;a(q,r,d,f);g(q,r,d,{font:f.font,letter:v[0],data:f.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,bgColor:f.bgColor,calendar:f.calendar},f.fullLayout);d("gridcolor",m(r.color,f.bgColor,p).toRgbString());d("title.text",v[0]);r.setScale=h.noop;d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",r.color));d("showaxeslabels");d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":749,"../../../plot_api/plot_template":787,
"../../cartesian/axis_defaults":799,"../../cartesian/type_defaults":822,"./axis_attributes":841,tinycolor2:548}],843:[function(b,F,C){function m(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans",
"Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];
this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var h=b("../../../lib/str2rgbarray"),l=b("../../../lib"),e=["xaxis","yaxis","zaxis"];m.prototype.merge=function(a,g){for(var k=0;3>k;++k){var p=g[e[k]];p.visible?
(this.labels[k]=a._meta?l.templateString(p.title.text,a._meta):p.title.text,"font"in p.title&&(p.title.font.color&&(this.labelColor[k]=h(p.title.font.color)),p.title.font.family&&(this.labelFont[k]=p.title.font.family),p.title.font.size&&(this.labelSize[k]=p.title.font.size)),"showline"in p&&(this.lineEnable[k]=p.showline),"linecolor"in p&&(this.lineColor[k]=h(p.linecolor)),"linewidth"in p&&(this.lineWidth[k]=p.linewidth),"showgrid"in p&&(this.gridEnable[k]=p.showgrid),"gridcolor"in p&&(this.gridColor[k]=
h(p.gridcolor)),"gridwidth"in p&&(this.gridWidth[k]=p.gridwidth),"log"===p.type?this.zeroEnable[k]=!1:"zeroline"in p&&(this.zeroEnable[k]=p.zeroline),"zerolinecolor"in p&&(this.zeroLineColor[k]=h(p.zerolinecolor)),"zerolinewidth"in p&&(this.zeroLineWidth[k]=p.zerolinewidth),this.lineTickEnable[k]="ticks"in p&&p.ticks?!0:!1,"ticklen"in p&&(this.lineTickLength[k]=this._defaultLineTickLength[k]=p.ticklen),"tickcolor"in p&&(this.lineTickColor[k]=h(p.tickcolor)),"tickwidth"in p&&(this.lineTickWidth[k]=
p.tickwidth),"tickangle"in p&&(this.tickAngle[k]="auto"===p.tickangle?-3600:Math.PI*-p.tickangle/180),"showticklabels"in p&&(this.tickEnable[k]=p.showticklabels),"tickfont"in p&&(p.tickfont.color&&(this.tickColor[k]=h(p.tickfont.color)),p.tickfont.family&&(this.tickFont[k]=p.tickfont.family),p.tickfont.size&&(this.tickSize[k]=p.tickfont.size)),"mirror"in p?-1!==["ticks","all","allticks"].indexOf(p.mirror)?(this.lineTickMirror[k]=!0,this.lineMirror[k]=!0):!0===p.mirror?(this.lineTickMirror[k]=!1,this.lineMirror[k]=
!0):(this.lineTickMirror[k]=!1,this.lineMirror[k]=!1):this.lineMirror[k]=!1,"showbackground"in p&&!1!==p.showbackground?(this.backgroundEnable[k]=!0,this.backgroundColor[k]=h(p.backgroundcolor)):this.backgroundEnable[k]=!1):(this.tickEnable[k]=!1,this.labelEnable[k]=!1,this.lineEnable[k]=!1,this.lineTickEnable[k]=!1,this.gridEnable[k]=!1,this.zeroEnable[k]=!1,this.backgroundEnable[k]=!1)}};F.exports=function(a,g){var k=new m;k.merge(a,g);return k}},{"../../../lib":749,"../../../lib/str2rgbarray":772}],
844:[function(b,F,C){function m(n,c,f,d){var q=f("bgcolor");q=l.combine(q,d.paper_bgcolor);for(var r=["up","center","eye"],u=0;u<r.length;u++)f("camera."+r[u]+".x"),f("camera."+r[u]+".y"),f("camera."+r[u]+".z");f("camera.projection.type");r=!!f("aspectratio.x")&&!!f("aspectratio.y")&&!!f("aspectratio.z");u=f("aspectmode",r?"manual":"auto");r||(n.aspectratio=c.aspectratio={x:1,y:1,z:1},"manual"===u&&(c.aspectmode="auto"),n.aspectmode=c.aspectmode);r=p(d.fullData,"gl3d",d.id);g(n,c,{font:d.font,scene:d.id,
data:r,bgColor:q,calendar:d.calendar,fullLayout:d.fullLayout});e.getComponentMethod("annotations3d","handleDefaults")(n,c,d);c=d.getDfltFromLayout("dragmode");!1===c||c||(c="orbit",n.camera&&n.camera.up?(q=n.camera.up.x,r=n.camera.up.y,n=n.camera.up.z,0!==n&&(q&&r&&n?.999<n/Math.sqrt(q*q+r*r+n*n)&&(c="turntable"):c="turntable")):c="turntable");f("dragmode",c);f("hovermode",d.getDfltFromLayout("hovermode"))}var h=b("../../../lib"),l=b("../../../components/color"),e=b("../../../registry"),a=b("../../subplot_defaults"),
g=b("./axis_defaults"),k=b("./layout_attributes"),p=b("../../get_data").getSubplotData;F.exports=function(n,c,f){var d=1<c._basePlotModules.length;a(n,c,f,{type:"gl3d",attributes:k,handleDefaults:m,fullLayout:c,font:c.font,fullData:f,getDfltFromLayout:function(q){if(!d&&h.validate(n[q],k[q]))return n[q]},paper_bgcolor:c.paper_bgcolor,calendar:c.calendar})}},{"../../../components/color":615,"../../../lib":749,"../../../registry":880,"../../get_data":834,"../../subplot_defaults":874,"./axis_defaults":842,
"./layout_attributes":845}],845:[function(b,F,C){function m(e,a,g){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:g,editType:"camera"},editType:"camera"}}C=b("./axis_attributes");var h=b("../../domain").attributes,l=b("../../../lib/extend").extendFlat;b=b("../../../lib").counterRegex;F.exports={_arrayAttrRegexps:[b("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:l(m(0,
0,1),{}),center:l(m(0,0,0),{}),eye:l(m(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:h({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},
y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:C,yaxis:C,zaxis:C,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",
editType:"camera"}}}},{"../../../lib":749,"../../../lib/extend":739,"../../domain":824,"./axis_attributes":841}],846:[function(b,F,C){function m(){this.enabled=[!0,!0,!0];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var h=b("../../../lib/str2rgbarray"),l=["xaxis","yaxis","zaxis"];m.prototype.merge=function(e){for(var a=0;3>a;++a){var g=e[l[a]];g.visible?(this.enabled[a]=g.showspikes,this.colors[a]=h(g.spikecolor),this.drawSides[a]=g.spikesides,this.lineWidth[a]=
g.spikethickness):(this.enabled[a]=!1,this.drawSides[a]=!1)}};F.exports=function(e){var a=new m;a.merge(e);return a}},{"../../../lib/str2rgbarray":772}],847:[function(b,F,C){F.exports=function(e){for(var a=e.axesOptions,g=e.glplot.axesPixels,k=e.fullSceneLayout,p=[[],[],[]],n=0;3>n;++n){var c=k[l[n]];c._length=(g[n].hi-g[n].lo)*g[n].pixelsPerDataUnit/e.dataScale[n];if(Infinity===Math.abs(c._length)||isNaN(c._length))p[n]=[];else{c._input_range=c.range.slice();c.range[0]=g[n].lo/e.dataScale[n];c.range[1]=
g[n].hi/e.dataScale[n];c._m=1/(e.dataScale[n]*g[n].pixelsPerDataUnit);c.range[0]===c.range[1]&&(--c.range[0],c.range[1]+=1);var f=c.tickmode;if("auto"===c.tickmode){c.tickmode="linear";var d=c.nticks||h.constrain(c._length/40,4,9);m.autoTicks(c,Math.abs(c.range[1]-c.range[0])/d)}d=m.calcTicks(c,{msUTC:!0});for(var q=0;q<d.length;++q)d[q].x*=e.dataScale[n],"date"===c.type&&(d[q].text=d[q].text.replace(/<br>/g," "));p[n]=d;c.tickmode=f}}a.ticks=p;for(n=0;3>n;++n)for(q=0;2>q;++q)a.bounds[q][n]=e.glplot.bounds[q][n];
a=Array(3);for(g=0;3>g;++g){k=p[g];n=Array(k.length);for(c=0;c<k.length;++c)n[c]=k[c].x;a[g]=n}e.contourLevels=a};var m=b("../../cartesian/axes"),h=b("../../../lib"),l=["xaxis","yaxis","zaxis"]},{"../../../lib":749,"../../cartesian/axes":797}],848:[function(b,F,C){function m(h,l){var e=[0,0,0,0],a,g;for(a=0;4>a;++a)for(g=0;4>g;++g)e[g]+=h[4*a+g]*l[a];return e}F.exports=function(h,l){return m(h.projection,m(h.view,m(h.model,[l[0],l[1],l[2],1])))}},{}],849:[function(b,F,C){function m(B,t){var G=document.createElement("div"),
I=B.container;this.graphDiv=B.graphDiv;var L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute";L.style.top=L.style.left="0px";L.style.width=L.style.height="100%";L.style["z-index"]=20;L.style["pointer-events"]="none";G.appendChild(L);this.svgContainer=L;G.id=B.id;G.style.position="absolute";G.style.top=G.style.left="0px";G.style.width=G.style.height="100%";I.appendChild(G);this.fullLayout=t;this.id=B.id||"scene";this.fullSceneLayout=t[this.id];this.plotArgs=
[[],{},{}];this.axesOptions=u(t,t[this.id]);this.spikeOptions=v(t[this.id]);this.container=G;this.staticMode=!!B.staticPlot;this.pixelRatio=this.pixelRatio||B.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=p.getComponentMethod("annotations3d","convert");this.drawAnnotations=p.getComponentMethod("annotations3d","draw");this.initializeGLPlot()}function h(B,t,G){B=B.fullSceneLayout;for(var I=0;3>I;I++){var L=E[I],M=L.charAt(0);L=B[L];var N=t[M],H=t[M+
"calendar"];M=t["_"+M+"length"];if(n.isArrayOrTypedArray(N))for(var J,O=0;O<(M||N.length);O++)if(n.isArrayOrTypedArray(N[O]))for(var Q=0;Q<N[O].length;++Q)J=L.d2l(N[O][Q],0,H),!isNaN(J)&&isFinite(J)&&(G[0][I]=Math.min(G[0][I],J),G[1][I]=Math.max(G[1][I],J));else J=L.d2l(N[O],0,H),!isNaN(J)&&isFinite(J)&&(G[0][I]=Math.min(G[0][I],J),G[1][I]=Math.max(G[1][I],J));else G[0][I]=Math.min(G[0][I],0),G[1][I]=Math.max(G[1][I],M-1)}}function l(B,t){B=B.fullSceneLayout;for(var G=B.annotations||[],I=0;3>I;I++){var L=
E[I],M=L.charAt(0);L=B[L];for(var N=0;N<G.length;N++){var H=G[N];H.visible&&(H=L.r2l(H[M]),!isNaN(H)&&isFinite(H)&&(t[0][I]=Math.min(t[0][I],H),t[1][I]=Math.max(t[1][I],H)))}}}C=b("gl-plot3d");var e=C.createCamera,a=C.createScene,g=b("webgl-context"),k=b("has-passive-events"),p=b("../../registry"),n=b("../../lib"),c=b("../../plots/cartesian/axes"),f=b("../../components/fx"),d=b("../../lib/str2rgbarray"),q=b("../../lib/show_no_webgl_msg"),r=b("./project"),u=b("./layout/convert"),v=b("./layout/spikes"),
w=b("./layout/tick_marks"),y=b("is-mobile")({tablet:!0,featureDetect:!0}),D,x;b=m.prototype;b.prepareOptions=function(){var B={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:y,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!x&&(D=document.createElement("canvas"),x=g({canvas:D,preserveDrawingBuffer:!0,
premultipliedAlpha:!0,antialias:!0}),!x))throw Error("error creating static canvas/context for image server");B.gl=x;B.canvas=D}return B};b.tryCreatePlot=function(){var B=this.prepareOptions(),t=!0;try{this.glplot=a(B)}catch(G){if(this.staticMode)t=!1;else try{n.warn(["webgl setup failed possibly due to",y?"disabling":"enabling","preserveDrawingBuffer config. The device may not be supported by is-mobile module! Inverting preserveDrawingBuffer option in second attempt to create webgl scene."].join(" ")),
y=B.glOptions.preserveDrawingBuffer=!B.glOptions.preserveDrawingBuffer,this.glplot=a(B)}catch(I){t=!1}}return t};b.initializeGLCamera=function(){var B=this.fullSceneLayout.camera;this.camera=e(this.container,{center:[B.center.x,B.center.y,B.center.z],eye:[B.eye.x,B.eye.y,B.eye.z],up:[B.up.x,B.up.y,B.up.z],_ortho:"orthographic"===B.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};b.initializeGLPlot=function(){var B=this;B.initializeGLCamera();if(!B.tryCreatePlot())return q(B);B.traces={};B.make4thDimension();
var t=B.graphDiv,G=t.layout,I=function(){var M={};B.isCameraChanged(G)&&(M[B.id+".camera"]=B.getCamera());B.isAspectChanged(G)&&(M[B.id+".aspectratio"]=B.glplot.getAspectratio(),"manual"!==G[B.id].aspectmode&&(B.fullSceneLayout.aspectmode=G[B.id].aspectmode=M[B.id+".aspectmode"]="manual"));return M},L=function(M){if(!1!==M.fullSceneLayout.dragmode){var N=I();M.saveLayout(G);M.graphDiv.emit("plotly_relayout",N)}};B.glplot.canvas.addEventListener("mouseup",function(){L(B)});B.glplot.canvas.addEventListener("wheel",
function(M){if(t._context._scrollZoom.gl3d){if(B.camera._ortho){M=M.deltaX>M.deltaY?1.1:1/1.1;var N=B.glplot.getAspectratio();B.glplot.setAspectratio({x:M*N.x,y:M*N.y,z:M*N.z})}L(B)}},k?{passive:!1}:!1);B.glplot.canvas.addEventListener("mousemove",function(){if(!1!==B.fullSceneLayout.dragmode&&0!==B.camera.mouseListener.buttons){var M=I();B.graphDiv.emit("plotly_relayouting",M)}});B.staticMode||B.glplot.canvas.addEventListener("webglcontextlost",function(M){t&&t.emit&&t.emit("plotly_webglcontextlost",
{event:M,layer:B.id})},!1);B.glplot.oncontextloss=function(){B.recoverContext()};B.glplot.onrender=function(){B.render()};return!0};b.render=function(){function B(ea,ca){ea=t.fullSceneLayout[ea];return c.tickText(ea,ea.d2l(ca),"hover").text}var t=this,G=t.graphDiv,I=t.svgContainer,L=t.container.getBoundingClientRect(),M=L.width;L=L.height;I.setAttributeNS(null,"viewBox","0 0 "+M+" "+L);I.setAttributeNS(null,"width",M);I.setAttributeNS(null,"height",L);w(t);t.glplot.axes.update(t.axesOptions);for(var N=
Object.keys(t.traces),H=null,J=t.glplot.selection,O=0;O<N.length;++O){var Q=t.traces[N[O]];"skip"!==Q.data.hoverinfo&&Q.handlePick(J)&&(H=Q);Q.setContourLevels&&Q.setContourLevels()}if(null!==H){var U=r(t.glplot.cameraParams,J.dataCoordinate);Q=H.data;N=G._fullData[Q.index];O=J.index;var P={xLabel:B("xaxis",J.traceCoordinate[0]),yLabel:B("yaxis",J.traceCoordinate[1]),zLabel:B("zaxis",J.traceCoordinate[2])},V=f.castHoverinfo(N,t.fullLayout,O),Y=(V||"").split("+");V=V&&"all"===V;N.hovertemplate||V||
(-1===Y.indexOf("x")&&(P.xLabel=void 0),-1===Y.indexOf("y")&&(P.yLabel=void 0),-1===Y.indexOf("z")&&(P.zLabel=void 0),-1===Y.indexOf("text")&&(J.textLabel=void 0),-1===Y.indexOf("name")&&(H.name=void 0));var ba=[];"cone"===Q.type||"streamtube"===Q.type?(P.uLabel=B("xaxis",J.traceCoordinate[3]),(V||-1!==Y.indexOf("u"))&&ba.push("u: "+P.uLabel),P.vLabel=B("yaxis",J.traceCoordinate[4]),(V||-1!==Y.indexOf("v"))&&ba.push("v: "+P.vLabel),P.wLabel=B("zaxis",J.traceCoordinate[5]),(V||-1!==Y.indexOf("w"))&&
ba.push("w: "+P.wLabel),P.normLabel=J.traceCoordinate[6].toPrecision(3),(V||-1!==Y.indexOf("norm"))&&ba.push("norm: "+P.normLabel),"streamtube"===Q.type&&(P.divergenceLabel=J.traceCoordinate[7].toPrecision(3),(V||-1!==Y.indexOf("divergence"))&&ba.push("divergence: "+P.divergenceLabel)),J.textLabel&&ba.push(J.textLabel),Y=ba.join("\x3cbr\x3e")):"isosurface"===Q.type||"volume"===Q.type?(P.valueLabel=c.tickText(t._mockAxis,t._mockAxis.d2l(J.traceCoordinate[3]),"hover").text,ba.push("value: "+P.valueLabel),
J.textLabel&&ba.push(J.textLabel),Y=ba.join("\x3cbr\x3e")):Y=J.textLabel;V={x:J.traceCoordinate[0],y:J.traceCoordinate[1],z:J.traceCoordinate[2],data:N._input,fullData:N,curveNumber:N.index,pointNumber:O};f.appendArrayPointValue(V,N,O);Q._module.eventData&&(V=N._module.eventData(V,J,N,{},O));Q={points:[V]};t.fullSceneLayout.hovermode&&f.loneHover({trace:N,x:(.5+.5*U[0]/U[3])*M,y:(.5-.5*U[1]/U[3])*L,xLabel:P.xLabel,yLabel:P.yLabel,zLabel:P.zLabel,text:Y,name:H.name,color:f.castHoverOption(N,O,"bgcolor")||
H.color,borderColor:f.castHoverOption(N,O,"bordercolor"),fontFamily:f.castHoverOption(N,O,"font.family"),fontSize:f.castHoverOption(N,O,"font.size"),fontColor:f.castHoverOption(N,O,"font.color"),nameLength:f.castHoverOption(N,O,"namelength"),textAlign:f.castHoverOption(N,O,"align"),hovertemplate:n.castOption(N,O,"hovertemplate"),hovertemplateLabels:n.extendFlat({},V,P),eventData:[V]},{container:I,gd:G});J.buttons&&5>J.distance?G.emit("plotly_click",Q):G.emit("plotly_hover",Q);U=Q}else f.loneUnhover(I),
G.emit("plotly_unhover",U);t.drawAnnotations(t)};b.recoverContext=function(){var B=this;B.glplot.dispose();var t=function(){B.glplot.gl.isContextLost()?requestAnimationFrame(t):B.initializeGLPlot()?B.plot.apply(B,B.plotArgs):n.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(t)};var E=["xaxis","yaxis","zaxis"];b.plot=function(B,t,G){this.plotArgs=[B,t,G];if(!this.glplot.contextLost){var I,L,M=t[this.id];G=G[this.id];this.fullLayout=t;this.fullSceneLayout=M;
this.axesOptions.merge(t,M);this.spikeOptions.merge(M);this.setViewport(M);this.updateFx(M.dragmode,M.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;this.glplot.setClearColor(d(M.bgcolor));this.setConvert(H);B?Array.isArray(B)||(B=[B]):B=[];var N=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(I=0;I<B.length;++I){var H=B[I];!0===H.visible&&0!==H._length&&h(this,H,N)}l(this,N);var J=[1,1,1];for(L=0;3>L;++L)J[L]=N[1][L]===N[0][L]?1:1/(N[1][L]-N[0][L]);
this.dataScale=J;this.convertAnnotations(this);for(I=0;I<B.length;++I)H=B[I],!0===H.visible&&0!==H._length&&((N=this.traces[H.uid])?N.data.type===H.type?N.update(H):(N.dispose(),N=H._module.plot(this,H),this.traces[H.uid]=N):(N=H._module.plot(this,H),this.traces[H.uid]=N),N.name=H.name);H=Object.keys(this.traces);I=0;a:for(;I<H.length;++I){for(L=0;L<B.length;++L)if(B[L].uid===H[I]&&!0===B[L].visible&&0!==B[L]._length)continue a;N=this.traces[H[I]];N.dispose();delete this.traces[H[I]]}this.glplot.objects.sort(function(ba,
ea){return ba._trace.data.index-ea._trace.data.index});N=[[0,0,0],[0,0,0]];B={};for(I=0;3>I;++I){H=M[E[I]];L=H.type;L in B?(B[L].acc*=J[I],B[L].count+=1):B[L]={acc:J[I],count:1};if(H.autorange){N[0][I]=Infinity;N[1][I]=-Infinity;var O=this.glplot.objects,Q=this.fullSceneLayout.annotations||[],U=H._name.charAt(0);for(L=0;L<O.length;L++){var P=O[L],V=P.bounds,Y=P._trace.data._pad||0;N[0][I]="ErrorBars"===P.constructor.name&&H._lowerLogErrorBound?Math.min(N[0][I],H._lowerLogErrorBound):Math.min(N[0][I],
V[0][I]/J[I]-Y);N[1][I]=Math.max(N[1][I],V[1][I]/J[I]+Y)}for(L=0;L<Q.length;L++)O=Q[L],O.visible&&(O=H.r2l(O[U]),N[0][I]=Math.min(N[0][I],O),N[1][I]=Math.max(N[1][I],O));"rangemode"in H&&"tozero"===H.rangemode&&(N[0][I]=Math.min(N[0][I],0),N[1][I]=Math.max(N[1][I],0));N[0][I]>N[1][I]?(N[0][I]=-1,N[1][I]=1):(L=N[1][I]-N[0][I],N[0][I]-=L/32,N[1][I]+=L/32);"reversed"===H.autorange&&(H=N[0][I],N[0][I]=N[1][I],N[1][I]=H)}else L=H.range,N[0][I]=H.r2l(L[0]),N[1][I]=H.r2l(L[1]);N[0][I]===N[1][I]&&(--N[0][I],
N[1][I]+=1);this.glplot.setBounds(I,{min:N[0][I]*J[I],max:N[1][I]*J[I]})}N=M.aspectmode;if("cube"===N)I=[1,1,1];else if("manual"===N)I=M.aspectratio,I=[I.x,I.y,I.z];else if("auto"===N||"data"===N){Q=[1,1,1];for(I=0;3>I;++I)H=M[E[I]],L=H.type,H=B[L],Q[I]=Math.pow(H.acc,1/H.count)/J[I];I="data"===N?Q:4>=Math.max.apply(null,Q)/Math.min.apply(null,Q)?Q:[1,1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");M.aspectratio.x=G.aspectratio.x=I[0];M.aspectratio.y=G.aspectratio.y=
I[1];M.aspectratio.z=G.aspectratio.z=I[2];this.glplot.setAspectratio(M.aspectratio);this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:M.aspectratio.x,y:M.aspectratio.y,z:M.aspectratio.z});this.viewInitial.aspectmode||(this.viewInitial.aspectmode=M.aspectmode);M=M.domain||null;t=t._size||null;M&&t&&(G=this.container.style,G.position="absolute",G.left=t.l+M.x[0]*t.w+"px",G.top=t.t+(1-M.y[1])*t.h+"px",G.width=t.w*(M.x[1]-M.x[0])+"px",G.height=t.h*(M.y[1]-M.y[0])+"px");this.glplot.redraw()}};
b.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};b.getCamera=function(){this.camera.view.recalcMatrix(this.camera.view.lastT());var B=this.camera;return{up:{x:B.up[0],y:B.up[1],z:B.up[2]},center:{x:B.center[0],y:B.center[1],z:B.center[2]},eye:{x:B.eye[0],y:B.eye[1],z:B.eye[2]},projection:{type:!0===
B._ortho?"orthographic":"perspective"}}};b.setViewport=function(B){var t=B.camera;this.camera.lookAt.apply(this,[[t.eye.x,t.eye.y,t.eye.z],[t.center.x,t.center.y,t.center.z],[t.up.x,t.up.y,t.up.z]]);this.glplot.setAspectratio(B.aspectratio);"orthographic"===t.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())};b.isCameraChanged=function(B){var t=this.getCamera();B=n.nestedProperty(B,this.id+".camera").get();var G=!1;if(void 0===
B)G=!0;else{for(var I=0;3>I;I++)for(var L=0;3>L;L++){var M=["up","center","eye"],N=["x","y","z"];if(!B[M[I]]||t[M[I]][N[L]]!==B[M[I]][N[L]]){G=!0;break}}if(!B.projection||t.projection&&t.projection.type!==B.projection.type)G=!0}return G};b.isAspectChanged=function(B){var t=this.glplot.getAspectratio();B=n.nestedProperty(B,this.id+".aspectratio").get();return void 0===B||B.x!==t.x||B.y!==t.y||B.z!==t.z};b.saveLayout=function(B){var t=this.fullLayout,G=this.isCameraChanged(B),I=this.isAspectChanged(B),
L=G||I;if(L){var M={};if(G){var N=this.getCamera();var H=n.nestedProperty(B,this.id+".camera");var J=H.get();M[this.id+".camera"]=J}if(I){var O=this.glplot.getAspectratio();var Q=n.nestedProperty(B,this.id+".aspectratio");J=Q.get();M[this.id+".aspectratio"]=J}p.call("_storeDirectGUIEdit",B,t._preGUI,M);G&&(H.set(N),n.nestedProperty(t,this.id+".camera").set(N));I&&(Q.set(O),n.nestedProperty(t,this.id+".aspectratio").set(O),this.glplot.redraw())}return L};b.updateFx=function(B,t){var G=this.camera;
if(G)if("orbit"===B)G.mode="orbit",G.keyBindingMode="rotate";else if("turntable"===B){G.up=[0,0,1];G.mode="turntable";G.keyBindingMode="rotate";var I=this.graphDiv;B=I._fullLayout;G=this.fullSceneLayout.camera;var L=G.up.x,M=G.up.y,N=G.up.z;.999>N/Math.sqrt(L*L+M*M+N*N)&&(L=this.id+".camera.up",M={x:0,y:0,z:1},N={},N[L]=M,I=I.layout,p.call("_storeDirectGUIEdit",I,B._preGUI,N),G.up=M,n.nestedProperty(I,L).set(M))}else G.keyBindingMode=B;this.fullSceneLayout.hovermode=t};b.toImage=function(B){B||(B=
"png");this.staticMode&&this.container.appendChild(D);this.glplot.redraw();var t=this.glplot.gl,G=t.drawingBufferWidth,I=t.drawingBufferHeight;t.bindFramebuffer(t.FRAMEBUFFER,null);var L=new Uint8Array(G*I*4);t.readPixels(0,0,G,I,t.RGBA,t.UNSIGNED_BYTE,L);t=0;for(var M=I-1;t<M;++t,--M)for(var N=0;N<G;++N)for(var H=0;4>H;++H){var J=4*(G*t+N)+H,O=4*(G*M+N)+H,Q=L[J];L[J]=L[O];L[O]=Q}for(t=0;t<I;++t)for(M=0;M<G;++M)if(N=4*(G*t+M),H=L[N+3],0<H)for(H=255/H,J=0;3>J;++J)L[N+J]=Math.min(H*L[N+J],255);t=document.createElement("canvas");
t.width=G;t.height=I;M=t.getContext("2d");G=M.createImageData(G,I);G.data.set(L);M.putImageData(G,0,0);switch(B){case "jpeg":B=t.toDataURL("image/jpeg");break;case "webp":B=t.toDataURL("image/webp");break;default:B=t.toDataURL("image/png")}this.staticMode&&this.container.removeChild(D);return B};b.setConvert=function(){for(var B=0;3>B;B++){var t=this.fullSceneLayout[E[B]];c.setConvert(t,this.fullLayout);t.setScale=n.noop}};b.make4thDimension=function(){var B=this.graphDiv._fullLayout;this._mockAxis=
{type:"linear",showexponent:"all",exponentformat:"B"};c.setConvert(this._mockAxis,B)};F.exports=m},{"../../components/fx":655,"../../lib":749,"../../lib/show_no_webgl_msg":770,"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"../../registry":880,"./layout/convert":843,"./layout/spikes":846,"./layout/tick_marks":847,"./project":848,"gl-plot3d":301,"has-passive-events":415,"is-mobile":441,"webgl-context":578}],850:[function(b,F,C){F.exports=function(m,h,l,e){e=e||m.length;for(var a=Array(e),
g=0;g<e;g++)a[g]=[m[g],h[g],l[g]];return a}},{}],851:[function(b,F,C){C=b("./font_attributes");var m=b("./animation_attributes"),h=b("../components/color/attributes"),l=b("../components/shapes/draw_newshape/attributes"),e=b("./pad_attributes");b=b("../lib/extend").extendFlat;var a=C({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif';a.size.dflt=12;a.color.dflt=h.defaultLine;F.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:C({editType:"layoutstyle"}),
xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle",
"bottom"],editType:"layoutstyle"},pad:b(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",
min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:h.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:h.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",
editType:"legend"},colorway:{valType:"colorlist",dflt:h.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",
editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},newshape:l.newshape,activeshape:l.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:b({},m.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:C({editType:"layoutstyle"})}}},{"../components/color/attributes":614,"../components/shapes/draw_newshape/attributes":697,"../lib/extend":739,"./animation_attributes":792,"./font_attributes":825,"./pad_attributes":859}],
852:[function(b,F,C){b={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:'\x3ca href\x3d"http://www.openstreetmap.org/about/" target\x3d"_blank"\x3e OpenStreetMap\x3c/a\x3e',tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",
type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e CARTO\x3c/a\x3e',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",
version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e CARTO\x3c/a\x3e',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by-sa/3.0"\x3eCC BY SA\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}};C=Object.keys(b);F.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:"basic streets outdoors light dark satellite satellite-streets".split(" "),styleValueDflt:"basic",stylesNonMapbox:b,styleValuesNonMapbox:C,traceLayerPrefix:"plotly-trace-layer-",
layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@1.10.1.",noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",
C.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",
path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",
polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;",
"ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3Csvg viewBox\x3d"0 0 20 20" xmlns\x3d"http://www.w3.org/2000/svg"%3E %3Cpath fill\x3d"%23333333" fill-rule\x3d"evenodd" d\x3d"M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',
"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px",
"ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3C?xml version\x3d"1.0" encoding\x3d"utf-8"?%3E %3Csvg version\x3d"1.1" id\x3d"Layer_1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px" viewBox\x3d"0 0 21 21" style\x3d"enable-background:new 0 0 21 21;" xml:space\x3d"preserve"%3E%3Cg transform\x3d"translate(0,0.01)"%3E%3Cpath d\x3d"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3Cpath d\x3d"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpath d\x3d"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpolygon points\x3d"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},
{}],853:[function(b,F,C){var m=b("../../lib");F.exports=function(h,l){var e=h.split(" ");h=e[0];e=e[1];var a=m.isArrayOrTypedArray(l)?m.mean(l):l;l=.5+a/100;a=1.5+a/100;var g=["",""],k=[0,0];switch(h){case "top":g[0]="top";k[1]=-a;break;case "bottom":g[0]="bottom",k[1]=a}switch(e){case "left":g[1]="right";k[0]=-l;break;case "right":g[1]="left",k[0]=l}return{anchor:g[0]&&g[1]?g.join("-"):g[0]?g[0]:g[1]?g[1]:"center",offset:k}}},{"../../lib":749}],854:[function(b,F,C){function m(f){return"string"===
typeof f&&(-1!==c.styleValuesMapbox.indexOf(f)||0===f.indexOf("mapbox://"))}var h=b("mapbox-gl"),l=b("../../lib"),e=b("../../plots/get_data").getSubplotCalcData,a=b("../../constants/xmlns_namespaces"),g=b("d3"),k=b("../../components/drawing"),p=b("../../lib/svg_text_utils"),n=b("./mapbox"),c=C.constants=b("./constants");C.name="mapbox";C.attr="subplot";C.idRoot="mapbox";C.idRegex=C.attrRegex=l.counterRegex("mapbox");C.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};C.layoutAttributes=
b("./layout_attributes");C.supplyLayoutDefaults=b("./layout_defaults");C.plot=function(f){var d=f._fullLayout,q=f.calcdata,r=d._subplots.mapbox;if(h.version!==c.requiredVersion)throw Error(c.wrongVersionErrorMsg);var u=f._fullLayout;if(""===f._context.mapboxAccessToken)u="";else{for(var v=[],w=[],y=!1,D=!1,x=0;x<r.length;x++){var E=u[r[x]],B=E.accesstoken;m(E.style)&&(B?l.pushUnique(v,B):(m(E._input.style)&&(l.error("Uses Mapbox map style, but did not set an access token."),y=!0),D=!0));B&&l.pushUnique(w,
B)}if(D)throw f=y?c.noAccessTokenErrorMsg:c.missingStyleErrorMsg,l.error(f),Error(f);v.length?(1<v.length&&l.warn(c.multipleTokensErrorMsg),u=v[0]):(w.length&&l.log(["Listed mapbox access token(s)",w.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),u="")}h.accessToken=u;for(u=0;u<r.length;u++)v=r[u],w=e(q,"mapbox",v),y=d[v],D=y._subplot,D||(D=new n(f,v),d[v]._subplot=D),D.viewInitial||(D.viewInitial={center:l.extendFlat({},y.center),zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),
D.plot(w,d,f._promises)};C.clean=function(f,d,q,r){f=r._subplots.mapbox||[];for(q=0;q<f.length;q++){var u=f[q];!d[u]&&r[u]._subplot&&r[u]._subplot.destroy()}};C.toSVG=function(f){for(var d=f._fullLayout,q=d._subplots.mapbox,r=d._size,u=0;u<q.length;u++){var v=d[q[u]],w=v.domain,y=v._subplot.toImage("png");d._glimages.append("svg:image").attr({xmlns:a.svg,"xlink:href":y,x:r.l+r.w*w.x[0],y:r.t+r.h*(1-w.y[1]),width:r.w*(w.x[1]-w.x[0]),height:r.h*(w.y[1]-w.y[0]),preserveAspectRatio:"none"});v=g.select(v._subplot.div);
null!==v.select(".mapboxgl-ctrl-logo").node().offsetParent&&(y=d._glimages.append("g"),y.attr("transform","translate("+(r.l+r.w*w.x[0]+10)+", "+(r.t+r.h*(1-w.y[0])-31)+")"),y.append("path").attr("d",c.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),y.append("path").attr("d",c.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),y.append("path").attr("d",c.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),y.append("polygon").attr("points",
c.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"}));var D=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map","");v=d._glimages.append("g");var x=v.append("text");x.text(D).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":D});var E=k.bBox(x.node());y=r.w*(w.x[1]-w.x[0]);E.width>y/2&&(E=D.split("|").join("\x3cbr\x3e"),x.text(E).attr("data-unformatted",E).call(p.convertToTspans,
f),E=k.bBox(x.node()));x.attr("transform","translate(-3, "+(-E.height+8)+")");v.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});x=1;E.width+6>y&&(x=y/(E.width+6));w=[r.l+r.w*w.x[1],r.t+r.h*(1-w.y[0])];v.attr("transform","translate("+w[0]+","+w[1]+") scale("+x+")")}};C.updateFx=function(f){f=f._fullLayout;for(var d=f._subplots.mapbox,q=0;q<d.length;q++)f[d[q]]._subplot.updateFx(f)}},{"../../components/drawing":637,
"../../constants/xmlns_namespaces":725,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/get_data":834,"./constants":852,"./layout_attributes":856,"./layout_defaults":857,"./mapbox":858,d3:169,"mapbox-gl":447}],855:[function(b,F,C){function m(p,n){this.subplot=p;this.uid=p.uid+"-"+n;this.index=n;this.idSource="source-"+this.uid;this.idLayer=k.layoutLayerPrefix+this.uid;this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function h(p){if(!p.visible)return!1;p=p.source;
if(Array.isArray(p)&&0<p.length){for(var n=0;n<p.length;n++)if("string"!==typeof p[n]||0===p[n].length)return!1;return!0}return e.isPlainObject(p)||"string"===typeof p&&0<p.length}function l(p){var n={},c={};switch(p.type){case "circle":e.extendFlat(c,{"circle-radius":p.circle.radius,"circle-color":p.color,"circle-opacity":p.opacity});break;case "line":e.extendFlat(c,{"line-width":p.line.width,"line-color":p.color,"line-opacity":p.opacity,"line-dasharray":p.line.dash});break;case "fill":e.extendFlat(c,
{"fill-color":p.color,"fill-outline-color":p.fill.outlinecolor,"fill-opacity":p.opacity});break;case "symbol":var f=p.symbol,d=g(f.textposition,f.iconsize);e.extendFlat(n,{"icon-image":f.icon+"-15","icon-size":f.iconsize/10,"text-field":f.text,"text-size":f.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":f.placement});e.extendFlat(c,{"icon-color":p.color,"text-color":f.textfont.color,"text-opacity":p.opacity});break;case "raster":e.extendFlat(c,{"raster-fade-duration":0,
"raster-opacity":p.opacity})}return{layout:n,paint:c}}var e=b("../../lib"),a=b("../../lib/svg_text_utils").sanitizeHTML,g=b("./convert_text_opts"),k=b("./constants");b=m.prototype;b.update=function(p){this.visible?this.needsNewImage(p)?this.updateImage(p):this.needsNewSource(p)?(this.removeLayer(),this.updateSource(p),this.updateLayer(p)):this.needsNewLayer(p)?this.updateLayer(p):this.updateStyle(p):(this.updateSource(p),this.updateLayer(p));this.visible=h(p)};b.needsNewImage=function(p){return this.subplot.map.getSource(this.idSource)&&
"image"===this.sourceType&&"image"===p.sourcetype&&(this.source!==p.source||JSON.stringify(this.coordinates)!==JSON.stringify(p.coordinates))};b.needsNewSource=function(p){return this.sourceType!==p.sourcetype||this.source!==p.source||this.layerType!==p.type};b.needsNewLayer=function(p){return this.layerType!==p.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};b.updateImage=function(p){this.subplot.map.getSource(this.idSource).updateImage({url:p.source,coordinates:p.coordinates})};
b.updateSource=function(p){var n=this.subplot.map;n.getSource(this.idSource)&&n.removeSource(this.idSource);this.sourceType=p.sourcetype;this.source=p.source;if(h(p)){var c=p.sourcetype,f=p.source,d={type:c};if("geojson"===c)var q="data";else"vector"===c?q="string"===typeof f?"url":"tiles":"raster"===c?(q="tiles",d.tileSize=256):"image"===c&&(q="url",d.coordinates=p.coordinates);d[q]=f;p.sourceattribution&&(d.attribution=a(p.sourceattribution));n.addSource(this.idSource,d)}};b.updateLayer=function(p){var n=
this.subplot,c=l(p),f=this.subplot.belowLookup["layout-"+this.index];if("traces"===f)for(var d=n.getMapLayers(),q=0;q<d.length;q++){var r=d[q].id;if("string"===typeof r&&0===r.indexOf(k.traceLayerPrefix)){var u=r;break}}else u=f;this.removeLayer();h(p)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":p.sourcelayer||"",type:p.type,minzoom:p.minzoom,maxzoom:p.maxzoom,layout:c.layout,paint:c.paint},u);this.layerType=p.type;this.below=f};b.updateStyle=function(p){h(p)&&(p=l(p),this.subplot.setOptions(this.idLayer,
"setLayoutProperty",p.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",p.paint))};b.removeLayer=function(){var p=this.subplot.map;p.getLayer(this.idLayer)&&p.removeLayer(this.idLayer)};b.dispose=function(){var p=this.subplot.map;p.getLayer(this.idLayer)&&p.removeLayer(this.idLayer);p.getSource(this.idSource)&&p.removeSource(this.idSource)};F.exports=function(p,n,c){p=new m(p,n);p.update(c);return p}},{"../../lib":749,"../../lib/svg_text_utils":773,"./constants":852,"./convert_text_opts":853}],
856:[function(b,F,C){C=b("../../lib");var m=b("../../components/color").defaultLine,h=b("../domain").attributes,l=b("../font_attributes"),e=b("../../traces/scatter/attributes").textposition,a=b("../../plot_api/edit_types").overrideAll,g=b("../../plot_api/plot_template").templatedArray;b=b("./constants");l=l({});l.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(F.exports=a({_arrayAttrRegexps:[C.counterRegex("mapbox",".layers",!0)],domain:h({name:"mapbox"}),accesstoken:{valType:"string",
noBlank:!0,strict:!0},style:{valType:"any",values:b.styleValuesMapbox.concat(b.styleValuesNonMapbox),dflt:b.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:g("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},
type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:m},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:m}},symbol:{icon:{valType:"string",
dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:l,textposition:C.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":615,"../../lib":749,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../traces/scatter/attributes":1155,"../domain":824,"../font_attributes":825,"./constants":852}],
857:[function(b,F,C){function m(k,p,n,c){n("accesstoken",c.accessToken);n("style");n("center.lon");n("center.lat");n("zoom");n("bearing");n("pitch");a(k,p,{name:"layers",handleItemDefaults:h});p._input=k}function h(k,p){function n(q,r){return l.coerce(k,p,g.layers,q,r)}if(n("visible")){var c=n("sourcetype"),f="raster"===c||"image"===c;n("source");n("sourceattribution");"vector"===c&&n("sourcelayer");"image"===c&&n("coordinates");var d;f&&(d="raster");c=n("type",d);f&&"raster"!==c&&(c=p.type="raster",
l.log("Source types *raster* and *image* must drawn *raster* layer type."));n("below");n("color");n("opacity");n("minzoom");n("maxzoom");"circle"===c&&n("circle.radius");"line"===c&&(n("line.width"),n("line.dash"));"fill"===c&&n("fill.outlinecolor");"symbol"===c&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),l.coerceFont(n,"symbol.textfont"),n("symbol.textposition"),n("symbol.placement"))}}var l=b("../../lib"),e=b("../subplot_defaults"),a=b("../array_container_defaults"),g=b("./layout_attributes");
F.exports=function(k,p,n){e(k,p,n,{type:"mapbox",attributes:g,handleDefaults:m,partition:"y",accessToken:p._mapboxAccessToken})}},{"../../lib":749,"../array_container_defaults":793,"../subplot_defaults":874,"./layout_attributes":856}],858:[function(b,F,C){function m(E,B){this.id=B;this.gd=E;B=E._fullLayout;E=E._context;this.container=B._glcontainer.node();this.isStatic=E.staticPlot;this.uid=B._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(B);this.styleObj=this.accessToken=
this.map=null;this.traceHash={};this.layerList=[];this.belowLookup={};this.wheeling=this.dragging=!1}function h(E){var B={};a.isPlainObject(E)?(B.id=E.id,B.style=E):"string"===typeof E?(B.id=E,-1!==y.styleValuesMapbox.indexOf(E)?B.style=y.styleUrlPrefix+E+"-"+y.styleUrlSuffix:B.style=y.stylesNonMapbox[E]?y.stylesNonMapbox[E]:E):(B.id=y.styleValueDflt,B.style=y.styleUrlPrefix+y.styleValueDflt+"-"+y.styleUrlSuffix);B.transition={duration:0,delay:0};return B}function l(E){return[E.lon,E.lat]}var e=b("mapbox-gl"),
a=b("../../lib"),g=b("../../lib/geo_location_utils"),k=b("../../registry"),p=b("../cartesian/axes"),n=b("../../components/dragelement"),c=b("../../components/fx");C=b("../../components/dragelement/helpers");var f=C.rectMode,d=C.drawMode,q=C.selectMode,r=b("../cartesian/select").prepSelect,u=b("../cartesian/select").clearSelect,v=b("../cartesian/select").clearSelectionsCache,w=b("../cartesian/select").selectOnClick,y=b("./constants"),D=b("./layers");b=m.prototype;b.plot=function(E,B,t){var G=this,
I=B[G.id];G.map&&I.accesstoken!==G.accessToken&&(G.map.remove(),G.map=null,G.styleObj=null,G.traceHash={},G.layerList=[]);I=G.map?new Promise(function(L,M){G.updateMap(E,B,L,M)}):new Promise(function(L,M){G.createMap(E,B,L,M)});t.push(I)};b.createMap=function(E,B,t,G){var I=this,L=B[I.id],M=I.styleObj=h(L.style);I.accessToken=L.accesstoken;var N=I.map=(new e.Map({container:I.div,style:M.style,center:l(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,interactive:!I.isStatic,preserveDrawingBuffer:I.isStatic,
doubleClickZoom:!1,boxZoom:!1,attributionControl:!1})).addControl(new e.AttributionControl({compact:!0}));N._canvas.style.left="0px";N._canvas.style.top="0px";I.rejectOnError(G);I.isStatic||I.initFx(E,B);L=[];L.push(new Promise(function(H){N.once("load",H)}));L=L.concat(g.fetchTraceGeoData(E));Promise.all(L).then(function(){I.fillBelowLookup(E,B);I.updateData(E);I.updateLayout(B);I.resolveOnRender(t)}).catch(G)};b.updateMap=function(E,B,t,G){var I=this,L=I.map,M=B[this.id];I.rejectOnError(G);var N=
[];M=h(M.style);JSON.stringify(I.styleObj)!==JSON.stringify(M)&&(I.styleObj=M,L.setStyle(M.style),I.traceHash={},N.push(new Promise(function(H){L.once("styledata",H)})));N=N.concat(g.fetchTraceGeoData(E));Promise.all(N).then(function(){I.fillBelowLookup(E,B);I.updateData(E);I.updateLayout(B);I.resolveOnRender(t)}).catch(G)};b.fillBelowLookup=function(E,B){var t=B[this.id].layers,G,I=this.belowLookup={},L=!1;for(B=0;B<E.length;B++){var M=E[B][0].trace,N=M._module;"string"===typeof M.below?G=M.below:
N.getBelow&&(G=N.getBelow(M,this));""===G&&(L=!0);I["trace-"+M.uid]=G||""}for(B=0;B<t.length;B++)G=t[B],G="string"===typeof G.below?G.below:L?"traces":"",I["layout-"+B]=G;E={};for(var H in I)G=I[H],E[G]?E[G].push(H):E[G]=[H];for(G in E)if(I=E[G],1<I.length)for(B=0;B<I.length;B++)H=I[B],0===H.indexOf("trace-")?(H=H.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):0===H.indexOf("layout-")&&(H=H.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))};var x={choroplethmapbox:0,
densitymapbox:1,scattermapbox:2};b.updateData=function(E){var B=this.traceHash,t,G=E.slice().sort(function(H,J){return x[H[0].trace.type]-x[J[0].trace.type]});for(t=0;t<G.length;t++){var I=G[t];var L=I[0].trace;var M=B[L.uid];var N=!1;M&&(M.type===L.type?(M.update(I),N=!0):M.dispose());!N&&L._module&&(B[L.uid]=L._module.plot(this,I))}G=Object.keys(B);t=0;a:for(;t<G.length;t++){I=G[t];for(M=0;M<E.length;M++)if(L=E[M][0].trace,I===L.uid)continue a;M=B[I];M.dispose();delete B[I]}};b.updateLayout=function(E){var B=
this.map,t=E[this.id];this.dragging||this.wheeling||(B.setCenter(l(t.center)),B.setZoom(t.zoom),B.setBearing(t.bearing),B.setPitch(t.pitch));this.updateLayers(E);this.updateFramework(E);this.updateFx(E);this.map.resize();this.gd._context._scrollZoom.mapbox?B.scrollZoom.enable():B.scrollZoom.disable()};b.resolveOnRender=function(E){var B=this.map;B.on("render",function G(){B.loaded()&&(B.off("render",G),setTimeout(E,10))})};b.rejectOnError=function(E){function B(){E(Error(y.mapOnErrorMsg))}var t=this.map;
t.once("error",B);t.once("style.error",B);t.once("source.error",B);t.once("tile.error",B);t.once("layer.error",B)};b.createFramework=function(E){var B=this,t=B.div=document.createElement("div");t.id=B.uid;t.style.position="absolute";B.container.appendChild(t);B.xaxis={_id:"x",c2p:function(G){return B.project(G).x}};B.yaxis={_id:"y",c2p:function(G){return B.project(G).y}};B.updateFramework(E);B.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};p.setConvert(B.mockAxis,E)};b.initFx=function(E,
B){function t(){c.loneUnhover(B._hoverlayer)}function G(){var N=I.getView();L.emit("plotly_relayouting",I.getViewEditsWithDerived(N))}var I=this,L=I.gd,M=I.map;M.on("moveend",function(N){if(I.map){var H=L._fullLayout;if(N.originalEvent||I.wheeling){var J=H[I.id];k.call("_storeDirectGUIEdit",L.layout,H._preGUI,I.getViewEdits(J));var O=I.getView();J._input.center=J.center=O.center;J._input.zoom=J.zoom=O.zoom;J._input.bearing=J.bearing=O.bearing;J._input.pitch=J.pitch=O.pitch;L.emit("plotly_relayout",
I.getViewEditsWithDerived(O))}N.originalEvent&&"mouseup"===N.originalEvent.type?I.dragging=!1:I.wheeling&&(I.wheeling=!1);H._rehover&&H._rehover()}});M.on("wheel",function(){I.wheeling=!0});M.on("mousemove",function(N){var H=I.div.getBoundingClientRect();N.clientX=N.point.x+H.left;N.clientY=N.point.y+H.top;N.target.getBoundingClientRect=function(){return H};I.xaxis.p2c=function(){return N.lngLat.lng};I.yaxis.p2c=function(){return N.lngLat.lat};L._fullLayout._rehover=function(){L._fullLayout._hoversubplot===
I.id&&L._fullLayout[I.id]&&c.hover(L,N,I.id)};c.hover(L,N,I.id);L._fullLayout._hoversubplot=I.id});M.on("dragstart",function(){I.dragging=!0;t()});M.on("zoomstart",t);M.on("mouseout",function(){L._fullLayout._hoversubplot=null});M.on("drag",G);M.on("zoom",G);M.on("dblclick",function(){var N=L._fullLayout[I.id];k.call("_storeDirectGUIEdit",L.layout,L._fullLayout._preGUI,I.getViewEdits(N));var H=I.viewInitial;M.setCenter(l(H.center));M.setZoom(H.zoom);M.setBearing(H.bearing);M.setPitch(H.pitch);H=I.getView();
N._input.center=N.center=H.center;N._input.zoom=N.zoom=H.zoom;N._input.bearing=N.bearing=H.bearing;N._input.pitch=N.pitch=H.pitch;L.emit("plotly_doubleclick",null);L.emit("plotly_relayout",I.getViewEditsWithDerived(H))});I.clearSelect=function(){v(I.dragOptions);u(I.dragOptions.gd)};I.onClickInPanFn=function(N){return function(H){var J=L._fullLayout.clickmode;-1<J.indexOf("select")&&w(H.originalEvent,L,[I.xaxis],[I.yaxis],I.id,N);-1<J.indexOf("event")&&c.click(L,H.originalEvent)}}};b.updateFx=function(E){function B(N){N=
t.map.unproject(N);return[N.lng,N.lat]}var t=this,G=t.map,I=t.gd;if(!t.isStatic){var L=E.dragmode;var M=f(L)?function(N,H){(N.range={})[t.id]=[B([H.xmin,H.ymin]),B([H.xmax,H.ymax])]}:function(N,H,J){(N.lassoPoints={})[t.id]=J.filtered.map(B)};t.dragOptions=a.extendDeep(t.dragOptions||{},{dragmode:E.dragmode,element:t.div,gd:I,plotinfo:{id:t.id,domain:E[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:M},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id});G.off("click",t.onClickInPanHandler);q(L)||
d(L)?(G.dragPan.disable(),G.on("zoomstart",t.clearSelect),t.dragOptions.prepFn=function(N,H,J){r(N,H,J,t.dragOptions,L)},n.init(t.dragOptions)):(G.dragPan.enable(),G.off("zoomstart",t.clearSelect),t.div.onmousedown=null,t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),G.on("click",t.onClickInPanHandler))}};b.updateFramework=function(E){var B=E[this.id].domain;E=E._size;var t=this.div.style;t.width=E.w*(B.x[1]-B.x[0])+"px";t.height=E.h*(B.y[1]-B.y[0])+"px";t.left=E.l+B.x[0]*E.w+"px";t.top=E.t+
(1-B.y[1])*E.h+"px";this.xaxis._offset=E.l+B.x[0]*E.w;this.xaxis._length=E.w*(B.x[1]-B.x[0]);this.yaxis._offset=E.t+(1-B.y[1])*E.h;this.yaxis._length=E.h*(B.y[1]-B.y[0])};b.updateLayers=function(E){E=E[this.id].layers;var B=this.layerList,t;if(E.length!==B.length){for(t=0;t<B.length;t++)B[t].dispose();B=this.layerList=[];for(t=0;t<E.length;t++)B.push(D(this,t,E[t]))}else for(t=0;t<E.length;t++)B[t].update(E[t])};b.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};
b.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};b.setOptions=function(E,B,t){for(var G in t)this.map[B](E,G,t[G])};b.getMapLayers=function(){return this.map.getStyle().layers};b.addLayer=function(E,B){var t=this.map;if("string"===typeof B){if(""===B){t.addLayer(E,B);return}for(var G=this.getMapLayers(),I=0;I<G.length;I++)if(B===G[I].id){t.addLayer(E,B);return}a.warn(["Trying to add layer with *below* value",B,"referencing a layer that does not exist or that does not yet exist."].join(" "))}t.addLayer(E)};
b.project=function(E){return this.map.project(new e.LngLat(E[0],E[1]))};b.getView=function(){var E=this.map,B=E.getCenter();B={lon:B.lng,lat:B.lat};var t=E.getCanvas(),G=t.width;t=t.height;return{center:B,zoom:E.getZoom(),bearing:E.getBearing(),pitch:E.getPitch(),_derived:{coordinates:[E.unproject([0,0]).toArray(),E.unproject([G,0]).toArray(),E.unproject([G,t]).toArray(),E.unproject([0,t]).toArray()]}}};b.getViewEdits=function(E){for(var B=this.id,t=["center","zoom","bearing","pitch"],G={},I=0;I<
t.length;I++){var L=t[I];G[B+"."+L]=E[L]}return G};b.getViewEditsWithDerived=function(E){var B=this.id,t=this.getViewEdits(E);t[B+"._derived"]=E._derived;return t};F.exports=m},{"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/fx":655,"../../lib":749,"../../lib/geo_location_utils":742,"../../registry":880,"../cartesian/axes":797,"../cartesian/select":816,"./constants":852,"./layers":855,"mapbox-gl":447}],859:[function(b,F,C){F.exports=function(m){m=m.editType;
return{t:{valType:"number",dflt:0,editType:m},r:{valType:"number",dflt:0,editType:m},b:{valType:"number",dflt:0,editType:m},l:{valType:"number",dflt:0,editType:m},editType:m}}},{}],860:[function(b,F,C){function m(P,V){V.text("");V=V.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(P._context.linkText+" "+String.fromCharCode(187));if(P._context.sendData)V.on("click",function(){N.sendDataToCloud(P)});else{var Y=window.location.pathname.split("/"),
ba=window.location.search;V.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+Y[2].split(".")[0]+"/"+Y[1]+ba})}}function h(P,V){function Y(ra,ta){na[ta]=ra;pa[ra]=1}function ba(ra,ta){if(ra&&"string"===typeof ra&&!pa[ra])return Y(ra,ta),!0}var ea=V.length,ca=[],ia;for(ia=0;ia<P.length;ia++){var fa=P[ia]._fullInput;fa!==ha&&ca.push(fa);var ha=fa}P=ca.length;var na=Array(ea),pa={};for(ia=0;ia<ea;ia++)ha=V[ia].uid,"number"===typeof ha&&(ha=String(ha)),ba(ha,ia)||ia<P&&ba(ca[ia].uid,ia)||Y(y.randstr(pa),
ia);return na}function l(P,V){function Y(na){for(var pa=!0,ra=0;ra<V.length;ra++){var ta=V[ra];ca[ta]||(na[ta]?ca[ta]=na[ta]:pa=!1)}pa&&(ea=!0)}var ba=P._context.locale;ba||"en-US"===ba;for(var ea=!1,ca={},ia=0;2>ia;ia++){for(var fa=P._context.locales,ha=0;2>ha;ha++){if(fa=(fa[ba]||{}).format)if(Y(fa),ea)break;fa=u.localeRegistry}ha=ba.split("-")[0];if(ea||ha===ba)break;ba=ha}ea||Y(u.localeRegistry.en.format);return ca}function e(P){P=P.transforms;if(Array.isArray(P)&&P.length)for(var V=0;V<P.length;V++){var Y=
P[V];if((Y=Y._module||H[Y.type])&&Y.makesData)return!0}return!1}function a(P,V,Y,ba){for(var ea=P.transforms,ca=[P],ia=0;ia<ea.length;ia++){var fa=ea[ia],ha=H[fa.type];ha&&ha.transform&&(ca=ha.transform(ca,{transform:fa,fullTrace:P,fullData:V,layout:Y,fullLayout:ba,transformIndex:ia}))}return ca}function g(P){return"string"===typeof P&&"px"===P.substr(P.length-2)&&parseFloat(P)}function k(P){var V=P.margin;P._size||(V=P._size={l:Math.round(V.l),r:Math.round(V.r),t:Math.round(V.t),b:Math.round(V.b),
p:Math.round(V.pad)},V.w=Math.round(P.width)-V.l-V.r,V.h=Math.round(P.height)-V.t-V.b);P._pushmargin||(P._pushmargin={});P._pushmarginIds||(P._pushmarginIds={})}function p(P,V,Y){function ba(fa){if(fa)for(;fa.length;)fa.shift()}function ea(fa){if(P._transitionData)return ba(P._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(Y.redraw)return u.call("redraw",P)}).then(function(){P._transitioning=!1;P._transitioningWithDuration=!1;P.emit("plotly_transitioned",[])}).then(fa)}var ca=
!1,ia=y.syncOrAsync([N.previousPromises,function(){if(P._transitionData){P._transitioning=!1;var fa=P._transitionData._interruptCallbacks,ha=Promise.resolve();if(fa)for(;fa.length;)ha=ha.then(fa.shift());return ha}},Y.prepareFn,N.rehover,function(){P.emit("plotly_transitioning",[]);return new Promise(function(fa){function ha(){na++;return function(){pa++;ca||pa!==na||ea(fa)}}P._transitioning=!0;0<V.duration&&(P._transitioningWithDuration=!0);P._transitionData._interruptCallbacks.push(function(){ca=
!0});Y.redraw&&P._transitionData._interruptCallbacks.push(function(){return u.call("redraw",P)});P._transitionData._interruptCallbacks.push(function(){P.emit("plotly_transitioninterrupted",[])});var na=0,pa=0;Y.runFn(ha);setTimeout(ha())})}],P);ia&&ia.then||(ia=Promise.resolve());return ia.then(function(){return P})}function n(P,V){function Y(Wa,Ea,Ia){var Qa=Ea._id.charAt(0);if("histogram2dcontour"===Wa){Wa=Ea._counterAxes[0];Ea=E.getFromId(V,Wa);var lb="x"===Qa||"x"===Wa&&"category"===Ea.type,hb=
"y"===Qa||"y"===Wa&&"category"===Ea.type;return function(Fa,La){return 0===Fa||0===La||lb&&Fa===Ia[La].length-1||hb&&La===Ia.length-1?-1:("y"===Qa?La:Fa)-1}}return function(Fa,La){return"y"===Qa?La:Fa}}var ba=[],ea,ca,ia,fa,ha={min:function(Wa){return y.aggNums(Math.min,null,Wa)},max:function(Wa){return y.aggNums(Math.max,null,Wa)},sum:function(Wa){return y.aggNums(function(Ea,Ia){return Ea+Ia},null,Wa)},total:function(Wa){return y.aggNums(function(Ea,Ia){return Ea+Ia},null,Wa)},mean:function(Wa){return y.mean(Wa)},
median:function(Wa){return y.median(Wa)}};for(ea=0;ea<P.length;ea++){var na=P[ea];if("category"===na.type&&(ca=na.categoryorder.match(U))){var pa=ca[1],ra=ca[2],ta=[];for(ca=0;ca<na._categories.length;ca++)ta.push([na._categories[ca],[]]);for(ca=0;ca<na._traceIndices.length;ca++){var oa=na._traceIndices[ca];var ua=V._fullData[oa],ka=na._id.charAt(0);if(!0===ua.visible){var sa=ua.type;u.traceIs(ua,"histogram")&&(delete ua._xautoBinFinished,delete ua._yautoBinFinished);var ya=V.calcdata[oa];for(oa=
0;oa<ya.length;oa++){var qa=ya[oa];if("splom"===sa){var xa=ua._axesDim[na._id];"y"===ka&&(ia=ua._diag[xa][0])&&(na=V._fullLayout[E.id2name(ia)]);var Ca=qa.trace.dimensions[xa].values;for(ia=0;ia<Ca.length;ia++){var Ja=Ca[ia];var eb=na._categoriesMap[Ja];for(fa=0;fa<qa.trace.dimensions.length;fa++)fa!==xa&&ta[eb][1].push(qa.trace.dimensions[fa].values[ia])}}else if("scattergl"===sa){for(ia=0;ia<qa.t.x.length;ia++){if("x"===ka){eb=Ja=qa.t.x[ia];var Ra=qa.t.y[ia]}"y"===ka&&(eb=Ja=qa.t.y[ia],Ra=qa.t.x[ia]);
ta[eb][1].push(Ra)}qa.t&&qa.t._scene&&delete qa.t._scene.dirty}else if(qa.hasOwnProperty("z"))for(Ra=qa.z,qa=Y(ua.type,na,Ra),ia=0;ia<Ra.length;ia++)for(fa=0;fa<Ra[ia].length;fa++)eb=qa(fa,ia),eb+1&&ta[eb][1].push(Ra[ia][fa]);else for("x"===ka?(Ja=qa.p+1?qa.p:qa.x,Ra=qa.s||qa.v||qa.y):"y"===ka&&(Ja=qa.p+1?qa.p:qa.y,Ra=qa.s||qa.v||qa.x),Array.isArray(Ra)||(Ra=[Ra]),ia=0;ia<Ra.length;ia++)ta[Ja][1].push(Ra[ia])}}}na._categoriesValue=ta;ua=[];for(ca=0;ca<ta.length;ca++)ua.push([ta[ca][0],ha[pa](ta[ca][1])]);
ua.sort(function(Wa,Ea){return Wa[1]-Ea[1]});na._categoriesAggregatedValue=ua;na._initialCategories=ua.map(function(Wa){return Wa[0]});"descending"===ra&&na._initialCategories.reverse();ba=ba.concat(na.sortByInitialCategories())}}return ba}function c(P,V,Y){var ba={},ea;for(ea=0;ea<P.length;ea++){var ca=P[ea];var ia=ca._id;ca.clearCalc();"multicategory"===ca.type&&ca.setupMultiCategory(V);ba[ca._id]=1}P=Y._axisMatchGroups||[];for(ea=0;ea<P.length;ea++)for(ia in P[ea])ba[ia]||(ca=Y[E.id2name(ia)],
ca.clearCalc())}function f(P){var V=P._fullLayout,Y=V._visibleModules,ba={},ea,ca;for(ea=0;ea<Y.length;ea++){var ia=Y[ea],fa=ia.crossTraceCalc;fa&&(ia=ia.basePlotModule.name,ba[ia]?y.pushUnique(ba[ia],fa):ba[ia]=[fa])}for(ca in ba)if(fa=ba[ca],ia=V._subplots[ca],Array.isArray(ia))for(Y=0;Y<ia.length;Y++){var ha=ia[Y],na="cartesian"===ca?V._plots[ha]:V[ha];for(ea=0;ea<fa.length;ea++)fa[ea](P,na,ha)}else for(ea=0;ea<fa.length;ea++)fa[ea](P)}var d=b("d3"),q=b("d3-time-format").timeFormatLocale,r=b("fast-isnumeric"),
u=b("../registry"),v=b("../plot_api/plot_schema"),w=b("../plot_api/plot_template"),y=b("../lib"),D=b("../components/color"),x=b("../constants/numerical").BADNUM,E=b("./cartesian/axis_ids"),B=b("./cartesian/handle_outline").clearSelect,t=b("./animation_attributes"),G=b("./frame_attributes"),I=b("../plots/get_data").getModuleCalcData,L=y.relinkPrivateKeys,M=y._,N=F.exports={};y.extendFlat(N,u);N.attributes=b("./attributes");N.attributes.type.values=N.allTypes;N.fontAttrs=b("./font_attributes");N.layoutAttributes=
b("./layout_attributes");N.fontWeight="normal";var H=N.transformsRegistry;b=b("./command");N.executeAPICommand=b.executeAPICommand;N.computeAPICommandBindings=b.computeAPICommandBindings;N.manageCommandObserver=b.manageCommandObserver;N.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings;N.redrawText=function(P){P=y.getGraphDiv(P);var V=P._fullLayout||{};if(V._has&&V._has("polar")||!P.data||!P.data[0]||!P.data[0].r)return new Promise(function(Y){setTimeout(function(){u.getComponentMethod("annotations",
"draw")(P);u.getComponentMethod("legend","draw")(P);u.getComponentMethod("colorbar","draw")(P);Y(N.previousPromises(P))},300)})};N.resize=function(P){P=y.getGraphDiv(P);var V,Y=new Promise(function(ba,ea){P&&!y.isHidden(P)||ea(Error("Resize must be passed a displayed plot div element."));P._redrawTimer&&clearTimeout(P._redrawTimer);P._resolveResize&&(V=P._resolveResize);P._resolveResize=ba;P._redrawTimer=setTimeout(function(){if(!P.layout||P.layout.width&&P.layout.height||y.isHidden(P))ba(P);else{delete P.layout.width;
delete P.layout.height;var ca=P.changed;P.autoplay=!0;u.call("relayout",P,{autosize:!0}).then(function(){P.changed=ca;P._resolveResize===ba&&(delete P._resolveResize,ba(P))})}},100)});V&&V(Y);return Y};N.previousPromises=function(P){if((P._promises||[]).length)return Promise.all(P._promises).then(function(){P._promises=[]})};N.addLinks=function(P){if(P._context.showLink||P._context.showSources){var V=P._fullLayout,Y=y.ensureSingle(V._paper,"text","js-plot-link-container",function(ca){ca.style({"font-family":'"Open Sans", Arial, sans-serif',
"font-size":"12px",fill:D.defaultLine,"pointer-events":"all"}).each(function(){var ia=d.select(this);ia.append("tspan").classed("js-link-to-tool",!0);ia.append("tspan").classed("js-link-spacer",!0);ia.append("tspan").classed("js-sourcelinks",!0)})}),ba=Y.node(),ea={y:V._paper.attr("height")-9};document.body.contains(ba)&&ba.getComputedTextLength()>=V.width-20?(ea["text-anchor"]="start",ea.x=5):(ea["text-anchor"]="end",ea.x=V._paper.attr("width")-7);Y.attr(ea);V=Y.select(".js-link-to-tool");ba=Y.select(".js-link-spacer");
Y=Y.select(".js-sourcelinks");P._context.showSources&&P._context.showSources(P);P._context.showLink&&m(P,V);ba.text(V.text()&&Y.text()?" - ":"")}};N.sendDataToCloud=function(P){var V=(window.PLOTLYENV||{}).BASE_URL||P._context.plotlyServerURL;if(V){P.emit("plotly_beforeexport");var Y=d.select(P).append("div").attr("id","hiddenform").style("display","none");V=Y.append("form").attr({action:V+"/external",method:"post",target:"_blank"});V.append("input").attr({type:"text",name:"data"}).node().value=N.graphJson(P,
!1,"keepdata");V.node().submit();Y.remove();P.emit("plotly_afterexport");return!1}};var J="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),O=["year","month","dayMonth","dayMonthYear"];N.supplyDefaults=function(P,V){V=V&&V.skipUpdateCalc;var Y=P._fullLayout||{};if(Y._skipDefaults)delete Y._skipDefaults;else{var ba=P._fullLayout={},ea=P.layout||{},ca=P._fullData||[],ia=P._fullData=[],fa=P.data||[],ha=P.calcdata||[],na=P._context||{};P._transitionData||
N.createTransitionData(P);ba._dfltTitle={plot:M(P,"Click to enter Plot title"),x:M(P,"Click to enter X axis title"),y:M(P,"Click to enter Y axis title"),colorbar:M(P,"Click to enter Colorscale title"),annotation:M(P,"new text")};ba._traceWord=M(P,"trace");var pa=l(P,J);ba._mapboxAccessToken=na.mapboxAccessToken;if(Y._initialAutoSizeIsDone){var ra=Y.width,ta=Y.height;N.supplyLayoutGlobalDefaults(ea,ba,pa);ea.width||(ba.width=ra);ea.height||(ba.height=ta);N.sanitizeMargins(ba)}else N.supplyLayoutGlobalDefaults(ea,
ba,pa),ra=!ea.width||!ea.height,ta=ba.autosize,na=na.autosizable,ra&&(ta||na)?N.plotAutoSize(P,ea,ba):ra&&N.sanitizeMargins(ba),!ta&&ra&&(ea.width=ba.width,ea.height=ba.height);ra=ba.separators;pa.decimal=ra.charAt(0);pa.thousands=ra.charAt(1);pa={numberFormat:d.locale(pa).numberFormat,timeFormat:q(pa).utcFormat};ba._d3locale=pa;ba._extraFormat=l(P,O);ba._initialAutoSizeIsDone=!0;ba._dataLength=fa.length;ba._modules=[];ba._visibleModules=[];ba._basePlotModules=[];pa=u.collectableSubplotTypes;ra={};
var oa;if(!pa)for(oa in pa=[],na=u.subplotsRegistry,na){var ua=na[oa].attr;if(ua&&(pa.push(oa),Array.isArray(ua)))for(ta=0;ta<ua.length;ta++)y.pushUnique(pa,ua[ta])}for(oa=0;oa<pa.length;oa++)ra[pa[oa]]=[];ra=ba._subplots=ra;pa=ba._splomAxes={x:{},y:{}};ta=ba._splomSubplots={};ba._splomGridDflt={};ba._scatterStackOpts={};ba._firstScatter={};ba._alignmentOpts={};ba._colorAxes={};ba._requestRangeslider={};ba._traceUids=h(ca,fa);ba._globalTransforms=(P._context||{}).globalTransforms;N.supplyDataDefaults(fa,
ia,ea,ba);oa=Object.keys(pa.x);pa=Object.keys(pa.y);if(1<oa.length&&1<pa.length){u.getComponentMethod("grid","sizeDefaults")(ea,ba);for(fa=0;fa<oa.length;fa++)y.pushUnique(ra.xaxis,oa[fa]);for(fa=0;fa<pa.length;fa++)y.pushUnique(ra.yaxis,pa[fa]);for(var ka in ta)y.pushUnique(ra.cartesian,ka)}ba._has=N._hasPlotType.bind(ba);if(ca.length===ia.length)for(fa=0;fa<ia.length;fa++)L(ia[fa],ca[fa]);N.supplyLayoutModuleDefaults(ea,ba,ia,P._transitionData);ka=ba._visibleModules;ea=[];for(fa=0;fa<ka.length;fa++)(ra=
ka[fa].crossTraceDefaults)&&y.pushUnique(ea,ra);for(fa=0;fa<ea.length;fa++)ea[fa](ia,ba);ba._hasOnlyLargeSploms=1===ba._basePlotModules.length&&"splom"===ba._basePlotModules[0].name&&15<oa.length&&15<pa.length&&0===ba.shapes.length&&0===ba.images.length;ba._hasCartesian=ba._has("cartesian");ba._hasGeo=ba._has("geo");ba._hasGL3D=ba._has("gl3d");ba._hasGL2D=ba._has("gl2d");ba._hasTernary=ba._has("ternary");ba._hasPie=ba._has("pie");N.linkSubplots(ia,ba,ca,Y);N.cleanPlot(ia,ba,ca,Y);ea=!(!Y._has||!Y._has("gl2d"));
ca=!(!ba._has||!ba._has("gl2d"));fa=!(!Y._has||!Y._has("cartesian"));ka=!(!ba._has||!ba._has("cartesian"));ea=fa||ea;ca=ka||ca;ea&&!ca?Y._bgLayer.remove():ca&&!ea&&(ba._shouldCreateBgLayer=!0);Y._zoomlayer&&!P._dragging&&B({_fullLayout:Y});P=[];if(ba.meta)var sa=ba._meta={meta:ba.meta,layout:{meta:ba.meta}};for(ca=0;ca<ia.length;ca++)ka=ia[ca],ka.meta?P[ka.index]=ka._meta={meta:ka.meta}:ba.meta&&(ka._meta={meta:ba.meta}),ba.meta&&(ka._meta.layout={meta:ba.meta});P.length&&(sa||(sa=ba._meta={}),sa.data=
P);L(ba,Y);u.getComponentMethod("colorscale","crossTraceDefaults")(ia,ba);ba._preGUI||(ba._preGUI={});ba._tracePreGUI||(ba._tracePreGUI={});sa=ba._tracePreGUI;Y={};for(var ya in sa)Y[ya]="old";for(fa=0;fa<ia.length;fa++)ya=ia[fa]._fullInput.uid,Y[ya]||(sa[ya]={}),Y[ya]="new";for(ya in Y)"old"===Y[ya]&&delete sa[ya];k(ba);u.getComponentMethod("rangeslider","makeData")(ba);V||ha.length!==ia.length||N.supplyDefaultsUpdateCalc(ha,ia)}};N.supplyDefaultsUpdateCalc=function(P,V){for(var Y=0;Y<V.length;Y++){var ba=
V[Y],ea=(P[Y]||[])[0];if(ea&&ea.trace){var ca=ea.trace;if(ca._hasCalcTransform){var ia=ca._arrayAttrs,fa;for(fa=0;fa<ia.length;fa++){var ha=ia[fa];var na=y.nestedProperty(ca,ha).get().slice();y.nestedProperty(ba,ha).set(na)}}ea.trace=ba}}};N.createTransitionData=function(P){P._transitionData||(P._transitionData={});P._transitionData._frames||(P._transitionData._frames=[]);P._transitionData._frameHash||(P._transitionData._frameHash={});P._transitionData._counter||(P._transitionData._counter=0);P._transitionData._interruptCallbacks||
(P._transitionData._interruptCallbacks=[])};N._hasPlotType=function(P){var V,Y=this._basePlotModules||[];for(V=0;V<Y.length;V++)if(Y[V].name===P)return!0;Y=this._modules||[];for(V=0;V<Y.length;V++){var ba=Y[V].name;if(ba===P||(ba=u.modules[ba])&&ba.categories[P])return!0}return!1};N.cleanPlot=function(P,V,Y,ba){var ea,ca=ba._basePlotModules||[];for(ea=0;ea<ca.length;ea++){var ia=ca[ea];ia.clean&&ia.clean(P,V,Y,ba)}ea=ba._has&&ba._has("gl");V=V._has&&V._has("gl");ea&&!V&&void 0!==ba._glcontainer&&
(ba._glcontainer.selectAll(".gl-canvas").remove(),ba._glcontainer.selectAll(".no-webgl").remove(),ba._glcanvas=null);ca=!!ba._infolayer;ea=0;a:for(;ea<Y.length;ea++){ia=Y[ea].uid;for(V=0;V<P.length;V++)if(ia===P[V].uid)continue a;ca&&ba._infolayer.select(".cb"+ia).remove()}};N.linkSubplots=function(P,V,Y,ba){var ea=ba._plots||{},ca=V._plots={};ba=V._subplots;Y={_fullData:P,_fullLayout:V};var ia=ba.cartesian.concat(ba.gl2d||[]);for(ba=0;ba<ia.length;ba++){var fa=ia[ba];var ha=ea[fa],na=E.getFromId(Y,
fa,"x"),pa=E.getFromId(Y,fa,"y");ha?ha=ca[fa]=ha:(ha=ca[fa]={},ha.id=fa);na._counterAxes.push(pa._id);pa._counterAxes.push(na._id);na._subplotsWith.push(fa);pa._subplotsWith.push(fa);ha.xaxis=na;ha.yaxis=pa;ha._hasClipOnAxisFalse=!1;for(fa=0;fa<P.length;fa++)if(na=P[fa],na.xaxis===ha.xaxis._id&&na.yaxis===ha.yaxis._id&&!1===na.cliponaxis){ha._hasClipOnAxisFalse=!0;break}}P=E.list(Y,null,!0);for(ba=0;ba<P.length;ba++)ea=P[ba],fa=null,ea.overlaying&&(fa=E.getFromId(Y,ea.overlaying))&&fa.overlaying&&
(ea.overlaying=!1,fa=null),ea._mainAxis=fa||ea,fa&&(ea.domain=fa.domain.slice()),ea._anchorAxis="free"===ea.anchor?null:E.getFromId(Y,ea.anchor);for(ba=0;ba<P.length;ba++){ea=P[ba];ea._counterAxes.sort(E.idSort);ea._subplotsWith.sort(y.subplotSort);ca=fa=ea;var ra=V;ia={_fullLayout:ra};ha="x"===ca._id.charAt(0);var ta=ca._mainAxis._anchorAxis,oa=pa=na="";ta&&(oa=ta._mainAxis._id,na=ha?ca._id+oa:oa+ca._id);if(!na||!ra._plots[na])for(na="",ra=ca._counterAxes,ta=0;ta<ra.length;ta++){var ua=ra[ta],ka=
ha?ca._id+ua:ua+ca._id;pa||(pa=ka);ua=E.getFromId(ia,ua);if(oa&&ua.overlaying===oa){na=ka;break}}fa._mainSubplot=na||pa;if(ea._counterAxes.length&&(ea.spikemode&&-1!==ea.spikemode.indexOf("across")||ea.automargin&&ea.mirror&&"free"!==ea.anchor||u.getComponentMethod("rangeslider","isVisible")(ea))){ca=1;for(fa=ia=0;fa<ea._counterAxes.length;fa++)ha=E.getFromId(Y,ea._counterAxes[fa]),ca=Math.min(ca,ha.domain[0]),ia=Math.max(ia,ha.domain[1]);ca<ia&&(ea._counterDomainMin=ca,ea._counterDomainMax=ia)}}};
N.clearExpandedTraceDefaultColors=function(P){function V(ca,ia,fa,ha){ba[ha]=ia;ba.length=ha+1;"color"===ca.valType&&void 0===ca.dflt&&ea.push(ba.join("."))}var Y;var ba=[];var ea=P._module._colorAttrs;ea||(P._module._colorAttrs=ea=[],v.crawl(P._module.attributes,V));for(Y=0;Y<ea.length;Y++)y.nestedProperty(P,"_input."+ea[Y]).get()||y.nestedProperty(P,ea[Y]).set(null)};N.supplyDataDefaults=function(P,V,Y,ba){function ea(Ja){V.push(Ja);var eb=Ja._module;eb&&(y.pushUnique(ca,eb),!0===Ja.visible&&y.pushUnique(ia,
eb),y.pushUnique(fa,Ja._module.basePlotModule),ha++,!1!==Ja._input.visible&&na++)}var ca=ba._modules,ia=ba._visibleModules,fa=ba._basePlotModules,ha=0,na=0,pa;ba._transformModules=[];var ra={},ta=[],oa=w.traceTemplater((Y.template||{}).data||{});for(pa=0;pa<P.length;pa++){var ua=P[pa];var ka=oa.newTrace(ua);ka.uid=ba._traceUids[pa];N.supplyTraceDefaults(ua,ka,na,ba,pa);ka.index=pa;ka._input=ua;ka._expandedIndex=ha;if(ka.transforms&&ka.transforms.length)for(var sa=!1!==ua.visible&&!1===ka.visible,
ya=a(ka,V,Y,ba),qa=0;qa<ya.length;qa++){var xa=ya[qa],Ca={_template:ka._template,type:ka.type,uid:ka.uid+qa};sa&&!1===xa.visible&&delete xa.visible;N.supplyTraceDefaults(xa,Ca,ha,ba,pa);L(Ca,xa);Ca.index=pa;Ca._input=ua;Ca._fullInput=ka;Ca._expandedIndex=ha;Ca._expandedInput=xa;ea(Ca)}else ka._fullInput=ka,ka._expandedInput=ka,ea(ka);u.traceIs(ka,"carpetAxis")&&(ra[ka.carpet]=ka);u.traceIs(ka,"carpetDependent")&&ta.push(pa)}for(pa=0;pa<ta.length;pa++)ka=V[ta[pa]],ka.visible&&(P=ra[ka.carpet],(ka._carpet=
P)&&P.visible?(ka.xaxis=P.xaxis,ka.yaxis=P.yaxis):ka.visible=!1)};N.supplyAnimationDefaults=function(P){P=P||{};var V,Y={};y.coerce(P||{},Y,t,"mode",void 0);y.coerce(P||{},Y,t,"direction",void 0);y.coerce(P||{},Y,t,"fromcurrent",void 0);if(Array.isArray(P.frame))for(Y.frame=[],V=0;V<P.frame.length;V++)Y.frame[V]=N.supplyAnimationFrameDefaults(P.frame[V]||{});else Y.frame=N.supplyAnimationFrameDefaults(P.frame||{});if(Array.isArray(P.transition))for(Y.transition=[],V=0;V<P.transition.length;V++)Y.transition[V]=
N.supplyAnimationTransitionDefaults(P.transition[V]||{});else Y.transition=N.supplyAnimationTransitionDefaults(P.transition||{});return Y};N.supplyAnimationFrameDefaults=function(P){var V={};y.coerce(P||{},V,t.frame,"duration",void 0);y.coerce(P||{},V,t.frame,"redraw",void 0);return V};N.supplyAnimationTransitionDefaults=function(P){var V={};y.coerce(P||{},V,t.transition,"duration",void 0);y.coerce(P||{},V,t.transition,"easing",void 0);return V};N.supplyFrameDefaults=function(P){function V(ba,ea){return y.coerce(P,
Y,G,ba,ea)}var Y={};V("group");V("name");V("traces");V("baseframe");V("data");V("layout");return Y};N.supplyTraceDefaults=function(P,V,Y,ba,ea){function ca(ka,sa){return y.coerce(P,V,N.attributes,ka,sa)}var ia=ba.colorway||D.defaults;Y=ia[Y%ia.length];ia=ca("visible");ca("type");ca("name",ba._traceWord+" "+ea);ca("uirevision",ba.uirevision);var fa=N.getModule(V);if(V._module=fa){var ha=fa.basePlotModule,na=ha.attr,pa=ha.attributes;if(na&&pa){var ra=ba._subplots,ta="";if(ia||"gl2d"!==ha.name){if(Array.isArray(na))for(ea=
0;ea<na.length;ea++){var oa=na[ea],ua=y.coerce(P,V,pa,oa);ra[oa]&&y.pushUnique(ra[oa],ua);ta+=ua}else ta=y.coerce(P,V,pa,na);ra[ha.name]&&y.pushUnique(ra[ha.name],ta)}}}ia&&(ca("customdata"),ca("ids"),ca("meta"),u.traceIs(V,"showLegend")?(y.coerce(P,V,fa.attributes.showlegend?fa.attributes:N.attributes,"showlegend"),ca("legendgroup"),V._dfltShowLegend=!0):V._dfltShowLegend=!1,fa&&fa.supplyDefaults(P,V,Y,ba),u.traceIs(V,"noOpacity")||ca("opacity"),u.traceIs(V,"notLegendIsolatable")&&(V.visible=!!V.visible),
u.traceIs(V,"noHover")||(V.hovertemplate||y.coerceHoverinfo(P,V,ba),"parcats"!==V.type&&u.getComponentMethod("fx","supplyDefaults")(P,V,Y,ba)),fa&&fa.selectPoints&&ca("selectedpoints"),N.supplyTransformDefaults(P,V,ba));return V};N.hasMakesDataTransform=e;N.supplyTransformDefaults=function(P,V,Y){if(V._length||e(P)){var ba=Y._globalTransforms||[],ea=Y._transformModules||[];if(Array.isArray(P.transforms)||0!==ba.length){ba=ba.concat(P.transforms||[]);for(var ca=V.transforms=[],ia=0;ia<ba.length;ia++){var fa=
ba[ia],ha=fa.type,na=H[ha],pa=!(fa._module&&fa._module===na),ra=na&&"function"===typeof na.transform;na||y.warn("Unrecognized transform type "+ha+".");na&&na.supplyDefaults&&(pa||ra)?(fa=na.supplyDefaults(fa,V,Y,P),fa.type=ha,fa._module=na,y.pushUnique(ea,na)):fa=y.extendFlat({},fa);ca.push(fa)}}}};N.supplyLayoutGlobalDefaults=function(P,V,Y){function ba(ca,ia){return y.coerce(P,V,N.layoutAttributes,ca,ia)}var ea=P.template;y.isPlainObject(ea)&&(V.template=ea,V._template=ea.layout,V._dataTemplate=
ea.data);ea=y.coerceFont(ba,"font");ba("title.text",V._dfltTitle.plot);y.coerceFont(ba,"title.font",{family:ea.family,size:Math.round(1.4*ea.size),color:ea.color});ba("title.xref");ba("title.yref");ba("title.x");ba("title.y");ba("title.xanchor");ba("title.yanchor");ba("title.pad.t");ba("title.pad.r");ba("title.pad.b");ba("title.pad.l");ba("uniformtext.mode")&&ba("uniformtext.minsize");ba("autosize",!(P.width&&P.height));ba("width");ba("height");ba("margin.l");ba("margin.r");ba("margin.t");ba("margin.b");
ba("margin.pad");ba("margin.autoexpand");P.width&&P.height&&N.sanitizeMargins(V);u.getComponentMethod("grid","sizeDefaults")(P,V);ba("paper_bgcolor");ba("separators",Y.decimal+Y.thousands);ba("hidesources");ba("colorway");ba("datarevision");Y=ba("uirevision");ba("editrevision",Y);ba("selectionrevision",Y);ba("modebar.orientation");ba("modebar.bgcolor",D.addOpacity(V.paper_bgcolor,.5));ea=D.contrast(D.rgb(V.modebar.bgcolor));ba("modebar.color",D.addOpacity(ea,.3));ba("modebar.activecolor",D.addOpacity(ea,
.7));ba("modebar.uirevision",Y);u.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(P,V,ba);ba("meta");y.isPlainObject(P.transition)&&(ba("transition.duration"),ba("transition.easing"),ba("transition.ordering"));u.getComponentMethod("calendars","handleDefaults")(P,V,"calendar");u.getComponentMethod("fx","supplyLayoutGlobalDefaults")(P,V,ba)};N.plotAutoSize=function(P,V,Y){var ba=P._context||{},ea=ba.frameMargins,ca;(ca=y.isPlotDiv(P))&&P.emit("plotly_autosize");ba.fillFrame?(ba=window.innerWidth,
ca=window.innerHeight,document.body.style.overflow="hidden"):(ca=ca?window.getComputedStyle(P):{},ba=g(ca.width)||g(ca.maxWidth)||Y.width,ca=g(ca.height)||g(ca.maxHeight)||Y.height,r(ea)&&0<ea&&(ea=1-2*ea,ba=Math.round(ea*ba),ca=Math.round(ea*ca)));ea=N.layoutAttributes.width.min;var ia=N.layoutAttributes.height.min;ba<ea&&(ba=ea);ca<ia&&(ca=ia);ea=!V.width&&1<Math.abs(Y.width-ba);if((V=!V.height&&1<Math.abs(Y.height-ca))||ea)ea&&(Y.width=ba),V&&(Y.height=ca);P._initialAutoSize||(P._initialAutoSize=
{width:ba,height:ca});N.sanitizeMargins(Y)};N.supplyLayoutModuleDefaults=function(P,V,Y,ba){var ea=u.componentsRegistry,ca=V._basePlotModules,ia;var fa=u.subplotsRegistry.cartesian;for(ia in ea){var ha=ea[ia];ha.includeBasePlot&&ha.includeBasePlot(P,V)}ca.length||ca.push(fa);V._has("cartesian")&&(u.getComponentMethod("grid","contentDefaults")(P,V),fa.finalizeSubplots(P,V));for(var na in V._subplots)V._subplots[na].sort(y.subplotSort);for(fa=0;fa<ca.length;fa++)ha=ca[fa],ha.supplyLayoutDefaults&&ha.supplyLayoutDefaults(P,
V,Y);ca=V._modules;for(fa=0;fa<ca.length;fa++)ha=ca[fa],ha.supplyLayoutDefaults&&ha.supplyLayoutDefaults(P,V,Y);ca=V._transformModules;for(fa=0;fa<ca.length;fa++)ha=ca[fa],ha.supplyLayoutDefaults&&ha.supplyLayoutDefaults(P,V,Y,ba);for(ia in ea)ha=ea[ia],ha.supplyLayoutDefaults&&ha.supplyLayoutDefaults(P,V,Y)};N.purge=function(P){var V=P._fullLayout||{};void 0!==V._glcontainer&&(V._glcontainer.selectAll(".gl-canvas").remove(),V._glcontainer.remove(),V._glcanvas=null);V._modeBar&&V._modeBar.destroy();
P._transitionData&&(P._transitionData._interruptCallbacks&&(P._transitionData._interruptCallbacks.length=0),P._transitionData._animationRaf&&window.cancelAnimationFrame(P._transitionData._animationRaf));y.clearThrottle();y.clearResponsive(P);delete P.data;delete P.layout;delete P._fullData;delete P._fullLayout;delete P.calcdata;delete P.framework;delete P.empty;delete P.fid;delete P.undoqueue;delete P.undonum;delete P.autoplay;delete P.changed;delete P._promises;delete P._redrawTimer;delete P._hmlumcount;
delete P._hmpixcount;delete P._transitionData;delete P._transitioning;delete P._initialAutoSize;delete P._transitioningWithDuration;delete P._dragging;delete P._dragged;delete P._dragdata;delete P._hoverdata;delete P._snapshotInProgress;delete P._editing;delete P._mouseDownTime;delete P._legendMouseDownTime;P.removeAllListeners&&P.removeAllListeners()};N.style=function(P){var V=P._fullLayout._visibleModules,Y=[],ba;for(ba=0;ba<V.length;ba++){var ea=V[ba];ea.style&&y.pushUnique(Y,ea.style)}for(ba=
0;ba<Y.length;ba++)Y[ba](P)};N.sanitizeMargins=function(P){if(P&&P.margin){var V=P.width,Y=P.height;P=P.margin;var ba=Y-(P.t+P.b);0>V-(P.l+P.r)&&(V=(V-1)/(P.l+P.r),P.l=Math.floor(V*P.l),P.r=Math.floor(V*P.r));0>ba&&(V=(Y-1)/(P.t+P.b),P.t=Math.floor(V*P.t),P.b=Math.floor(V*P.b))}};N.clearAutoMarginIds=function(P){P._fullLayout._pushmarginIds={}};N.allowAutoMargin=function(P,V){P._fullLayout._pushmarginIds[V]=1};N.autoMargin=function(P,V,Y){var ba=P._fullLayout,ea=ba._pushmargin,ca=ba._pushmarginIds;
if(!1!==ba.margin.autoexpand){if(Y){var ia=Y.pad;void 0===ia&&(ia=ba.margin,ia=Math.min(12,ia.l,ia.r,ia.t,ia.b));Y.l+Y.r>.5*ba.width&&(y.log("Margin push",V,"is too big in x, dropping"),Y.l=Y.r=0);Y.b+Y.t>.5*ba.height&&(y.log("Margin push",V,"is too big in y, dropping"),Y.b=Y.t=0);ea[V]={l:{val:void 0!==Y.xl?Y.xl:Y.x,size:Y.l+ia},r:{val:void 0!==Y.xr?Y.xr:Y.x,size:Y.r+ia},b:{val:void 0!==Y.yb?Y.yb:Y.y,size:Y.b+ia},t:{val:void 0!==Y.yt?Y.yt:Y.y,size:Y.t+ia}};ca[V]=1}else delete ea[V],delete ca[V];
if(!ba._replotting)return N.doAutoMargin(P)}};N.doAutoMargin=function(P){var V=P._fullLayout;V._size||(V._size={});k(V);var Y=V._size,ba=V.margin,ea=y.extendFlat({},Y),ca=ba.l,ia=ba.r,fa=ba.t,ha=ba.b,na=V.width,pa=V.height,ra=V._pushmargin,ta=V._pushmarginIds;if(!1!==V.margin.autoexpand){for(var oa in ra)ta[oa]||delete ra[oa];ra.base={l:{val:0,size:ca},r:{val:1,size:ia},t:{val:1,size:fa},b:{val:0,size:ha}};for(var ua in ra){var ka=ra[ua].l||{},sa=ra[ua].b||{};oa=ka.val;ka=ka.size;var ya=sa.val;sa=
sa.size;for(var qa in ra){if(r(ka)&&ra[qa].r){var xa=ra[qa].r.val,Ca=ra[qa].r.size;if(xa>oa){var Ja=(ka*xa+(Ca-na)*oa)/(xa-oa);xa=(Ca*(1-oa)+(ka-na)*(1-xa))/(xa-oa);0<=Ja&&0<=xa&&0<na-(Ja+xa)&&Ja+xa>ca+ia&&(ca=Ja,ia=xa)}}r(sa)&&ra[qa].t&&(xa=ra[qa].t.val,Ca=ra[qa].t.size,xa>ya&&(Ja=(sa*xa+(Ca-pa)*ya)/(xa-ya),xa=(Ca*(1-ya)+(sa-pa)*(1-xa))/(xa-ya),0<=Ja&&0<=xa&&0<pa-(xa+Ja)&&Ja+xa>ha+fa&&(ha=Ja,fa=xa)))}}}Y.l=Math.round(ca);Y.r=Math.round(ia);Y.t=Math.round(fa);Y.b=Math.round(ha);Y.p=Math.round(ba.pad);
Y.w=Math.round(na)-Y.l-Y.r;Y.h=Math.round(pa)-Y.t-Y.b;if(!V._replotting&&N.didMarginChange(ea,Y)){"_redrawFromAutoMarginCount"in V?V._redrawFromAutoMarginCount++:V._redrawFromAutoMarginCount=1;Y=3*(1+Object.keys(ta).length);if(V._redrawFromAutoMarginCount<Y)return u.call("plot",P);y.warn("Too many auto-margin redraws.")}};var Q="lrtbpwh".split("");N.didMarginChange=function(P,V){for(var Y=0;Y<Q.length;Y++){var ba=Q[Y],ea=P[ba];ba=V[ba];if(!r(ea)||1<Math.abs(ba-ea))return!0}return!1};N.graphJson=function(P,
V,Y,ba,ea,ca){function ia(na,pa){if("function"===typeof na)return pa?"_function_":null;if(y.isPlainObject(na)){var ra={},ta;Object.keys(na).sort().forEach(function(oa){if(-1===["_","["].indexOf(oa.charAt(0)))if("function"===typeof na[oa])pa&&(ra[oa]="_function");else{if("keepdata"===Y){if("src"===oa.substr(oa.length-3))return}else if("keepstream"===Y){if(ta=na[oa+"src"],"string"===typeof ta&&0<ta.indexOf(":")&&!y.isPlainObject(na.stream))return}else if("keepall"!==Y&&(ta=na[oa+"src"],"string"===typeof ta&&
0<ta.indexOf(":")))return;ra[oa]=ia(na[oa],pa)}});return ra}return Array.isArray(na)?na.map(function(oa){return ia(oa,pa)}):y.isTypedArray(na)?y.simpleMap(na,y.identity):y.isJSDate(na)?y.ms2DateTimeLocal(+na):na}(ea&&V&&!P._fullData||ea&&!V&&!P._fullLayout)&&N.supplyDefaults(P);var fa=ea?P._fullLayout:P.layout,ha=(P._transitionData||{})._frames;ea={data:((ea?P._fullData:P.data)||[]).map(function(na){na=ia(na);V&&delete na.fit;return na})};V||(ea.layout=ia(fa));P.framework&&P.framework.isPolar&&(ea=
P.framework.getConfig());ha&&(ea.frames=ia(ha));ca&&(ea.config=ia(P._context,!0));return"object"===ba?ea:JSON.stringify(ea)};N.modifyFrames=function(P,V){var Y=P._transitionData._frames,ba=P._transitionData._frameHash;for(P=0;P<V.length;P++){var ea=V[P];switch(ea.type){case "replace":var ca=ea.value;var ia=(Y[ea.index]||{}).name,fa=ca.name;Y[ea.index]=ba[fa]=ca;fa!==ia&&(delete ba[ia],ba[fa]=ca);break;case "insert":ca=ea.value;ba[ca.name]=ca;Y.splice(ea.index,0,ca);break;case "delete":ca=Y[ea.index],
delete ba[ca.name],Y.splice(ea.index,1)}}return Promise.resolve()};N.computeFrame=function(P,V){var Y=P._transitionData._frameHash,ba;if(!V)throw Error("computeFrame must be given a string frame name");V=Y[V.toString()];if(!V)return!1;P=[V];for(ba=[V.name];V.baseframe&&(V=Y[V.baseframe.toString()])&&-1===ba.indexOf(V.name);)P.push(V),ba.push(V.name);for(var ea={};V=P.pop();)if(V.layout&&(ea.layout=N.extendLayout(ea.layout,V.layout)),V.data){ea.data||(ea.data=[]);ba=V.traces;if(!ba)for(ba=[],Y=0;Y<
V.data.length;Y++)ba[Y]=Y;ea.traces||(ea.traces=[]);for(Y=0;Y<V.data.length;Y++){var ca=ba[Y];if(void 0!==ca&&null!==ca){var ia=ea.traces.indexOf(ca);-1===ia&&(ia=ea.data.length,ea.traces[ia]=ca);ea.data[ia]=N.extendTrace(ea.data[ia],V.data[Y])}}}return ea};N.recomputeFrameHash=function(P){var V=P._transitionData._frameHash={};P=P._transitionData._frames;for(var Y=0;Y<P.length;Y++){var ba=P[Y];ba&&ba.name&&(V[ba.name]=ba)}};N.extendObjectWithContainers=function(P,V,Y){V=y.extendDeepNoArrays({},V||
{});var ba=y.expandObjectPaths(V);var ea={};if(Y&&Y.length)for(V=0;V<Y.length;V++){var ca=y.nestedProperty(ba,Y[V]);var ia=ca.get();void 0===ia?y.nestedProperty(ea,Y[V]).set(null):(ca.set(null),y.nestedProperty(ea,Y[V]).set(ia))}P=y.extendDeepNoArrays(P||{},ba);if(Y&&Y.length)for(V=0;V<Y.length;V++)if(ca=y.nestedProperty(ea,Y[V]),ba=ca.get()){ia=y.nestedProperty(P,Y[V]);var fa=ia.get();Array.isArray(fa)||(fa=[],ia.set(fa));for(ca=0;ca<ba.length;ca++){var ha=ba[ca];fa[ca]=null===ha?null:N.extendObjectWithContainers(fa[ca],
ha)}ia.set(fa)}return P};N.dataArrayContainers=["transforms","dimensions"];N.layoutArrayContainers=u.layoutArrayContainers;N.extendTrace=function(P,V){return N.extendObjectWithContainers(P,V,N.dataArrayContainers)};N.extendLayout=function(P,V){return N.extendObjectWithContainers(P,V,N.layoutArrayContainers)};N.transition=function(P,V,Y,ba,ea,ca){ea={redraw:ea.redraw};var ia={},fa=[];ea.prepareFn=function(){var ha=Array.isArray(V)?V.length:0;ha=ba.slice(0,ha);for(var na=0;na<ha.length;na++){var pa=
ha[na],ra=P._fullData[pa]._module;ra&&(ra.animatable&&(ra=ra.basePlotModule.name,ia[ra]||(ia[ra]=[]),ia[ra].push(pa)),P.data[ha[na]]=N.extendTrace(P.data[ha[na]],V[na]))}ha=y.expandObjectPaths(y.extendDeepNoArrays({},Y));na=/^[xy]axis[0-9]*$/;for(var ta in ha)na.test(ta)&&delete ha[ta].range;N.extendLayout(P.layout,ha);delete P.calcdata;N.supplyDefaults(P);N.doCalcdata(P);if(ta=y.expandObjectPaths(Y)){ha=P._fullLayout._plots;for(var oa in ha){na=ha[oa];pa=na.xaxis;ra=na.yaxis;var ua=pa.range.slice(),
ka=ra.range.slice(),sa=null,ya=null,qa=null,xa=null;Array.isArray(ta[pa._name+".range"])?sa=ta[pa._name+".range"].slice():Array.isArray((ta[pa._name]||{}).range)&&(sa=ta[pa._name].range.slice());Array.isArray(ta[ra._name+".range"])?ya=ta[ra._name+".range"].slice():Array.isArray((ta[ra._name]||{}).range)&&(ya=ta[ra._name].range.slice());ua&&sa&&(pa.r2l(ua[0])!==pa.r2l(sa[0])||pa.r2l(ua[1])!==pa.r2l(sa[1]))&&(qa={xr0:ua,xr1:sa});ka&&ya&&(ra.r2l(ka[0])!==ra.r2l(ya[0])||ra.r2l(ka[1])!==ra.r2l(ya[1]))&&
(xa={yr0:ka,yr1:ya});(qa||xa)&&fa.push(y.extendFlat({plotinfo:na},qa,xa))}}return Promise.resolve()};ea.runFn=function(ha){var na=P._fullLayout._basePlotModules;var pa=fa.length,ra;if(Y)for(ra=0;ra<na.length;ra++)na[ra].transitionAxes&&na[ra].transitionAxes(P,fa,ca,ha);pa?(na=y.extendFlat({},ca),na.duration=0,delete ia.cartesian):na=ca;for(var ta in ia)pa=ia[ta],P._fullData[pa[0]]._module.basePlotModule.plot(P,pa,na,ha)};return p(P,ca,ea)};N.transitionFromReact=function(P,V,Y,ba){var ea=P._fullLayout,
ca=ea.transition,ia={},fa=[];ia.prepareFn=function(){var ha=ea._plots;ia.redraw=!1;"some"===V.anim&&(ia.redraw=!0);"some"===Y.anim&&(ia.redraw=!0);for(var na in ha){var pa=ha[na],ra=pa.xaxis,ta=pa.yaxis,oa=ba[ra._name].range.slice(),ua=ba[ta._name].range.slice(),ka=ra.range.slice(),sa=ta.range.slice();ra.setScale();ta.setScale();var ya=null,qa=null;if(ra.r2l(oa[0])!==ra.r2l(ka[0])||ra.r2l(oa[1])!==ra.r2l(ka[1]))ya={xr0:oa,xr1:ka};if(ta.r2l(ua[0])!==ta.r2l(sa[0])||ta.r2l(ua[1])!==ta.r2l(sa[1]))qa=
{yr0:ua,yr1:sa};(ya||qa)&&fa.push(y.extendFlat({plotinfo:pa},ya,qa))}return Promise.resolve()};ia.runFn=function(ha){function na(){for(var qa=0;qa<ta.length;qa++)ta[qa].transitionAxes&&ta[qa].transitionAxes(P,fa,oa,ha)}function pa(){for(var qa=0;qa<ta.length;qa++)ta[qa].plot(P,ka,ua,ha)}for(var ra=P._fullData,ta=P._fullLayout._basePlotModules,oa,ua,ka,sa=[],ya=0;ya<ra.length;ya++)sa.push(ya);fa.length&&V.anim?"traces first"===ca.ordering?(oa=y.extendFlat({},ca,{duration:0}),ka=sa,ua=ca,setTimeout(na,
ca.duration),pa()):(oa=ca,ka=null,ua=y.extendFlat({},ca,{duration:0}),setTimeout(pa,oa.duration),na()):fa.length?(oa=ca,na()):V.anim&&(ka=sa,ua=ca,pa())};return p(P,ca,ia)};N.doCalcdata=function(P,V){function Y(ka){ta=ca[ka];fa=ta._module;if(!0===ta.visible&&ta.transforms)for(fa&&fa.calc&&(ka=fa.calc(P,ta),ka[0]&&ka[0].t&&ka[0].t._scene&&delete ka[0].t._scene.dirty),na=0;na<ta.transforms.length;na++)ka=ta.transforms[na],(fa=H[ka.type])&&fa.calcTransform&&(ua=ta._hasCalcTransform=!0,fa.calcTransform(P,
ta,ka))}function ba(ka,sa){ta=ca[ka];fa=ta._module;if(!!fa.isContainer===sa){sa=[];if(!0===ta.visible&&0!==ta._length){delete ta._indexToPoints;var ya=ta.transforms||[];for(na=ya.length-1;0<=na;na--)if(ya[na].enabled){ta._indexToPoints=ya[na]._indexToPoints;break}fa&&fa.calc&&(sa=fa.calc(P,ta))}Array.isArray(sa)&&sa[0]||(sa=[{x,y:x}]);sa[0].t||(sa[0].t={});sa[0].trace=ta;pa[ka]=sa}}var ea=E.list(P),ca=P._fullData,ia=P._fullLayout,fa,ha,na,pa=Array(ca.length),ra=(P.calcdata||[]).slice();P.calcdata=
pa;ia._numBoxes=0;ia._numViolins=0;ia._violinScaleGroupStats={};P._hmpixcount=0;P._hmlumcount=0;ia._piecolormap={};ia._sunburstcolormap={};ia._treemapcolormap={};ia._funnelareacolormap={};for(ha=0;ha<ca.length;ha++)Array.isArray(V)&&-1===V.indexOf(ha)&&(pa[ha]=ra[ha]);for(ha=0;ha<ca.length;ha++){var ta=ca[ha];ta._arrayAttrs=v.findArrayAttributes(ta);ta._extremes={}}V=ia._subplots.polar||[];for(ha=0;ha<V.length;ha++)ea.push(ia[V[ha]].radialaxis,ia[V[ha]].angularaxis);for(var oa in ia._colorAxes)ha=
ia[oa],!1!==ha.cauto&&(delete ha.cmin,delete ha.cmax);var ua=!1;c(ea,ca,ia);for(ha=0;ha<ca.length;ha++)ba(ha,!0);for(ha=0;ha<ca.length;ha++)Y(ha);ua&&c(ea,ca,ia);for(ha=0;ha<ca.length;ha++)ba(ha,!0);for(ha=0;ha<ca.length;ha++)ba(ha,!1);f(P);ea=n(ea,P);if(ea.length){ia._numBoxes=0;for(ha=ia._numViolins=0;ha<ea.length;ha++)ba(ea[ha],!0);for(ha=0;ha<ea.length;ha++)ba(ea[ha],!1);f(P)}u.getComponentMethod("fx","calc")(P);u.getComponentMethod("errorbars","calc")(P)};var U=/(total|sum|min|max|mean|median) (ascending|descending)/;
N.rehover=function(P){P._fullLayout._rehover&&P._fullLayout._rehover()};N.redrag=function(P){P._fullLayout._redrag&&P._fullLayout._redrag()};N.generalUpdatePerTraceModule=function(P,V,Y,ba){var ea=V.traceHash,ca={},ia;for(ia=0;ia<Y.length;ia++){var fa=Y[ia],ha=fa[0].trace;ha.visible&&(ca[ha.type]=ca[ha.type]||[],ca[ha.type].push(fa))}for(var na in ea)ca[na]||(Y=ea[na][0],Y[0].trace.visible=!1,ca[na]=[Y]);for(var pa in ca)ea=ca[pa],ea[0][0].trace._module.plot(P,V,y.filterVisible(ea),ba);V.traceHash=
ca};N.plotBasePlot=function(P,V,Y,ba,ea){P=u.getModule(P);Y=I(V.calcdata,P)[0];P.plot(V,Y,ba,ea)};N.cleanBasePlot=function(P,V,Y,ba,ea){V=ea._has&&ea._has(P);Y=Y._has&&Y._has(P);V&&!Y&&ea["_"+P+"layer"].selectAll("g.trace").remove()}},{"../components/color":615,"../constants/numerical":724,"../lib":749,"../plot_api/plot_schema":786,"../plot_api/plot_template":787,"../plots/get_data":834,"../registry":880,"./animation_attributes":792,"./attributes":794,"./cartesian/axis_ids":800,"./cartesian/handle_outline":807,
"./command":823,"./font_attributes":825,"./frame_attributes":826,"./layout_attributes":851,d3:169,"d3-time-format":166,"fast-isnumeric":241}],861:[function(b,F,C){F.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,
MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],862:[function(b,F,C){function m(d,q,r,u){var v=u[0];u=u[1];var w=e(Math.sin(q)-Math.sin(d));d=e(Math.cos(q)-Math.cos(d));r=Math.tan(r);var y=e(1/r),D=w/d;q=u-D*v;y?w&&d?(w=q/(r-D),v=r*w):d?(w=u*y,v=u):(w=v,v*=r):w&&d?(w=0,v=q):d?(w=0,v=u):w=v=NaN;return[w,v]}function h(d,q,r,u){function v(B,t,G){return m(B,t,G,[d*Math.cos(B),d*Math.sin(B)])}var w=u.length,y=[];var D=p(u,function(B){return n(B,[q,r])?f(B,q):Infinity});var x=v(u[D],u[g.mod(D-1,w)],q);y.push(x);
for(x=0;x<w;D++,x++){var E=u[g.mod(D,w)];if(!n(E,[q,r]))break;y.push([d*Math.cos(E),d*Math.sin(E)])}D=p(u,function(B){return n(B,[q,r])?f(B,r):Infinity});u=v(u[D],u[g.mod(D+1,w)],r);y.push(u);y.push([0,0]);y.push(y[0].slice());return y}function l(d,q,r,u){if(g.isFullCircle([q,r])){q=u.length;r=Array(q+1);var v;for(v=0;v<q;v++){var w=u[v];r[v]=[d*Math.cos(w),d*Math.sin(w)]}r[v]=r[0].slice();d=r}else d=h(d,q,r,u);return d}function e(d){return 1E-10<Math.abs(d)?d:0}function a(d,q,r){q=q||0;r=r||0;for(var u=
d.length,v=Array(u),w=0;w<u;w++){var y=d[w];v[w]=[q+y[0],r-y[1]]}return v}var g=b("../../lib"),k=b("../../lib/polygon").tester,p=g.findIndexOfMin,n=g.isAngleInsideSector,c=g.angleDelta,f=g.angleDist;F.exports={isPtInsidePolygon:function(d,q,r,u,v){if(!n(q,u))return!1;if(r[0]<r[1]){var w=r[0];r=r[1]}else w=r[1],r=r[0];w=k(l(w,u[0],u[1],v));u=k(l(r,u[0],u[1],v));d=[d*Math.cos(q),d*Math.sin(q)];return u.contains(d)&&!w.contains(d)},findPolygonOffset:function(d,q,r,u){var v=Infinity,w=Infinity;d=l(d,
q,r,u);for(q=0;q<d.length;q++)r=d[q],v=Math.min(v,r[0]),w=Math.min(w,-r[1]);return[v,w]},findEnclosingVertexAngles:function(d,q){var r=p(q,function(v){v=c(v,d);return 0<v?v:Infinity}),u=g.mod(r+1,q.length);return[q[r],q[u]]},findIntersectionXY:m,findXYatLength:function(d,q,r,u){var v=-q*r,w=q*q+1,y=2*(q*v-r);r=Math.sqrt(y*y-4*w*(v*v+r*r-d*d));d=(-y+r)/(2*w);w=(-y-r)/(2*w);return[[d,q*d+v+u],[w,q*w+v+u]]},clampTiny:e,pathPolygon:function(d,q,r,u,v,w){d=l(d,q,r,u);return"M"+a(d,v,w).join("L")},pathPolygonAnnulus:function(d,
q,r,u,v,w,y){if(d<q){var D=d;d=q}else D=q;D=a(l(D,r,u,v),w,y);return"M"+a(l(d,r,u,v),w,y).reverse().join("L")+"M"+D.join("L")}}},{"../../lib":749,"../../lib/polygon":761}],863:[function(b,F,C){var m=b("../get_data").getSubplotCalcData,h=b("../../lib").counterRegex,l=b("./polar"),e=b("./constants");C=e.attr;var a=e.name;h=h(a);e={};e[C]={valType:"subplotid",dflt:a,editType:"calc"};F.exports={attr:C,name:a,idRoot:a,idRegex:h,attrRegex:h,attributes:e,layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),
plot:function(g){for(var k=g._fullLayout,p=g.calcdata,n=k._subplots[a],c=0;c<n.length;c++){var f=n[c],d=m(p,a,f),q=k[f]._subplot;q||(q=l(g,f),k[f]._subplot=q);q.plot(d,k,g._promises)}},clean:function(g,k,p,n){g=n._subplots[a]||[];p=n._has&&n._has("gl");var c=k._has&&k._has("gl");p=p&&!c;for(c=0;c<g.length;c++){var f=g[c],d=n[f]._subplot;if(!k[f]&&d){d.framework.remove();d.layers["radial-axis-title"].remove();for(var q in d.clipPaths)d.clipPaths[q].remove()}p&&d._scene&&(d._scene.destroy(),d._scene=
null)}},toSVG:b("../cartesian").toSVG}},{"../../lib":749,"../cartesian":810,"../get_data":834,"./constants":861,"./layout_attributes":864,"./layout_defaults":865,"./polar":872}],864:[function(b,F,C){C=b("../../components/color/attributes");var m=b("../cartesian/layout_attributes"),h=b("../domain").attributes,l=b("../../lib").extendFlat,e=b("../../plot_api/edit_types").overrideAll;b=e({color:m.color,showline:l({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:l({},m.showgrid,
{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth},"plot","from-root");e=e({tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,separatethousands:m.separatethousands,
tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,layer:m.layer},"plot","from-root");var a={visible:l({},m.visible,{dflt:!0}),type:l({},m.type,{values:["-","linear","log","date","category"]}),autorange:l({},m.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:l({},m.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",
impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:m.categoryorder,categoryarray:m.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:l({},m.title.text,{editType:"plot",dflt:""}),font:l({},m.title.font,{editType:"plot"}),editType:"plot"},hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}};
l(a,b,e);m={visible:l({},m.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},categoryorder:m.categoryorder,categoryarray:m.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},
hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};l(m,b,e);F.exports={domain:h({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:C.background},radialaxis:a,angularaxis:m,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",
editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":614,"../../lib":749,"../../plot_api/edit_types":780,"../cartesian/layout_attributes":811,"../domain":824}],865:[function(b,F,C){function m(y,D,x,E){function B(V,Y){return x(L+"."+V,Y)}var t=x("bgcolor");E.bgColor=e.combine(t,E.paper_bgcolor);t=x("sector");x("hole");for(var G=k(E.fullData,v.name,E.id),I=E.layoutOut,L,M=0;M<w.length;M++){L=w[M];l.isPlainObject(y[L])||(y[L]={});var N=y[L],
H=a.newContainer(D,L);H._id=H._name=L;H._attr=E.id+"."+L;H._traceIndices=G.map(function(V){return V._expandedIndex});var J=v.axisName2dataArray[L],O=h(N,H,B,G,J);f(N,H,B,{axData:G,dataAttr:J});J=B("visible");u(H,D,I);B("uirevision",D.uirevision);if(J){var Q=B("color");var U=Q===N.color?Q:E.font.color}H._m=1;switch(L){case "radialaxis":var P=B("autorange",!H.isValidRange(N.range));N.autorange=P;!P||"linear"!==O&&"-"!==O||B("rangemode");"reversed"===P&&(H._m=-1);B("range");H.cleanRange("range",{dfltRange:[0,
1]});J&&(B("side"),B("angle",t[0]),B("title.text"),l.coerceFont(B,"title.font",{family:E.font.family,size:Math.round(1.2*E.font.size),color:U}));break;case "angularaxis":if("date"===O){l.log("Polar plots do not support date angular axes yet.");for(O=0;O<G.length;O++)G[O].visible=!1;O=N.type=H.type="linear"}"linear"===O?B("thetaunit"):B("period");P=B("direction");B("rotation",{counterclockwise:0,clockwise:90}[P])}J&&(p(N,H,B,H.type),c(N,H,B,H.type,{tickSuffixDflt:"degrees"===H.thetaunit?"":void 0}),
n(N,H,B,{outerTicks:!0}),B("showticklabels")&&(l.coerceFont(B,"tickfont",{family:E.font.family,size:E.font.size,color:U}),B("tickangle"),B("tickformat")),d(N,H,B,{dfltColor:Q,bgColor:E.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:r[L]}),B("layer"));"category"!==O&&B("hoverformat");H._input=N}"category"===D.angularaxis.type&&x("gridshape")}function h(y,D,x,E,B){if("-"===x("type")){for(x=0;x<E.length;x++)if(E[x].visible){var t=E[x];break}t&&t[B]&&(D.type=q(t[B],"gregorian"));"-"===
D.type?D.type="linear":y.type=D.type}return D.type}var l=b("../../lib"),e=b("../../components/color"),a=b("../../plot_api/plot_template"),g=b("../subplot_defaults"),k=b("../get_data").getSubplotData,p=b("../cartesian/tick_value_defaults"),n=b("../cartesian/tick_mark_defaults"),c=b("../cartesian/tick_label_defaults"),f=b("../cartesian/category_order_defaults"),d=b("../cartesian/line_grid_defaults"),q=b("../cartesian/axis_autotype"),r=b("./layout_attributes"),u=b("./set_convert"),v=b("./constants"),
w=v.axisNames;F.exports=function(y,D,x){g(y,D,x,{type:v.name,attributes:r,handleDefaults:m,font:D.font,paper_bgcolor:D.paper_bgcolor,fullData:x,layoutOut:D})}},{"../../components/color":615,"../../lib":749,"../../plot_api/plot_template":787,"../cartesian/axis_autotype":798,"../cartesian/category_order_defaults":801,"../cartesian/line_grid_defaults":813,"../cartesian/tick_label_defaults":818,"../cartesian/tick_mark_defaults":819,"../cartesian/tick_value_defaults":820,"../get_data":834,"../subplot_defaults":874,
"./constants":861,"./layout_attributes":864,"./set_convert":873}],866:[function(b,F,C){C=b("../../../traces/scatter/attributes");var m=C.marker;b=b("../../../lib/extend").extendFlat;F.exports={r:b({},C.r,{}),t:b({},C.t,{}),marker:{color:b({},m.color,{}),size:b({},m.size,{}),symbol:b({},m.symbol,{}),opacity:b({},m.opacity,{}),editType:"calc"}}},{"../../../lib/extend":739,"../../../traces/scatter/attributes":1155}],867:[function(b,F,C){function m(l,e){return h({},e,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},
tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:"Legacy polar charts are deprecated! Please switch to *polar* subplots."},visible:{valType:"boolean"}})}C=b("../../cartesian/layout_attributes");var h=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;C=h({},C.domain,{});F.exports=b({radialaxis:m("radial",{range:{valType:"info_array",
items:[{valType:"number"},{valType:"number"}]},domain:C,orientation:{valType:"number"}}),angularaxis:m("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:C}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":739,"../../../plot_api/edit_types":780,"../../cartesian/layout_attributes":811}],868:[function(b,F,C){(F.exports=b("./micropolar")).manager=
b("./micropolar_manager")},{"./micropolar":869,"./micropolar_manager":870}],869:[function(b,F,C){var m=b("d3"),h=b("../../../lib").extendDeepAll,l=b("../../../constants/alignment").MID_SHIFT,e=F.exports={version:"0.2.2"};e.Axis=function(){function a(u){c=u||c;u=g.data;var v=g.layout;if("string"==typeof c||c.nodeName)c=m.select(c);c.datum(u).each(function(w,y){w=w.slice();p={data:e.util.cloneJson(w),layout:e.util.cloneJson(v)};var D=0;w.forEach(function(ta,oa){ta.color||(ta.color=v.defaultColorRange[D],
D=(D+1)%v.defaultColorRange.length);ta.strokeColor||(ta.strokeColor="LinePlot"===ta.geometry?ta.color:m.rgb(ta.color).darker().toString());p.data[oa].color=ta.color;p.data[oa].strokeColor=ta.strokeColor;p.data[oa].strokeDash=ta.strokeDash;p.data[oa].strokeSize=ta.strokeSize});w=w.filter(function(ta,oa){ta=ta.visible;return"undefined"===typeof ta||!0===ta});var x=!1;y=w.map(function(ta,oa){x=x||"undefined"!==typeof ta.groupId;return ta});if(x){var E=[];w=m.nest().key(function(ta,oa){return"undefined"!=
typeof ta.groupId?ta.groupId:"unstacked"}).entries(y).map(function(ta,oa){if("unstacked"!==ta.key){var ua=ta.values[0].r.map(function(ka,sa){return 0});ta.values.forEach(function(ka,sa,ya){ka.yStack=[ua];E.push(ua);ua=e.util.sumArrays(ka.r,ua)})}return ta.values});w=m.merge(w)}w.forEach(function(ta,oa){ta.t=Array.isArray(ta.t[0])?ta.t:[ta.t];ta.r=Array.isArray(ta.r[0])?ta.r:[ta.r]});var B=Math.min(v.width-v.margin.left-v.margin.right,v.height-v.margin.top-v.margin.bottom)/2;B=Math.max(10,B);var t=
[v.margin.left+B,v.margin.top+B];y=x?[0,m.max(e.util.sumArrays(e.util.arrayLast(w).r[0],e.util.arrayLast(E)))]:m.extent(e.util.flattenArray(w.map(function(ta,oa){return ta.r})));v.radialAxis.domain!=e.DATAEXTENT&&(y[0]=0);d=m.scale.linear().domain(v.radialAxis.domain!=e.DATAEXTENT&&v.radialAxis.domain?v.radialAxis.domain:y).range([0,B]);p.layout.radialAxis.domain=d.domain();var G=e.util.flattenArray(w.map(function(ta,oa){return ta.t})),I="string"===typeof G[0];if(I){G=e.util.deduplicate(G);var L=
G.slice();G=m.range(G.length);w=w.map(function(ta,oa){ta.t=[G];x&&(ta.yStack=ta.yStack);return ta})}var M=w.filter(function(ta,oa){return"LinePlot"===ta.geometry||"DotPlot"===ta.geometry}).length===w.length;y=null===v.needsEndSpacing?I||!M:v.needsEndSpacing;var N=v.angularAxis.domain&&v.angularAxis.domain!=e.DATAEXTENT&&!I&&0<=v.angularAxis.domain[0]?v.angularAxis.domain:m.extent(G),H=Math.abs(G[1]-G[0]);M&&!I&&(H=0);N=N.slice();y&&I&&(N[1]+=H);M=v.angularAxis.ticksCount||4;8<M&&(M=M/(M/8)+M%8);v.angularAxis.ticksStep&&
(M=(N[1]-N[0])/M);M=v.angularAxis.ticksStep||(N[1]-N[0])/(M*(v.minorTicks+1));L&&(M=Math.max(Math.round(M),1));N[2]||(N[2]=M);M=m.range.apply(this,N);M=M.map(function(ta,oa){return parseFloat(ta.toPrecision(12))});q=m.scale.linear().domain(N.slice(0,2)).range("clockwise"===v.direction?[0,360]:[360,0]);p.layout.angularAxis.domain=q.domain();p.layout.angularAxis.endPadding=y?H:0;n=m.select(this).select("svg.chart-root");if("undefined"===typeof n||n.empty())y=(new DOMParser).parseFromString("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' class\x3d'chart-root'\x3e' + '\x3cg class\x3d'outer-group'\x3e' + '\x3cg class\x3d'chart-group'\x3e' + '\x3ccircle class\x3d'background-circle'\x3e\x3c/circle\x3e' + '\x3cg class\x3d'geometry-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'radial axis-group'\x3e' + '\x3ccircle class\x3d'outside-circle'\x3e\x3c/circle\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'angular axis-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'guides-group'\x3e\x3cline\x3e\x3c/line\x3e\x3ccircle r\x3d'0'\x3e\x3c/circle\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'legend-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'tooltips-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'title-group'\x3e\x3ctext\x3e\x3c/text\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3c/svg\x3e",
"application/xml"),y=this.appendChild(this.ownerDocument.importNode(y.documentElement,!0)),n=m.select(y);n.select(".guides-group").style({"pointer-events":"none"});n.select(".angular.axis-group").style({"pointer-events":"none"});n.select(".radial.axis-group").style({"pointer-events":"none"});y=n.select(".chart-group");N={fill:"none",stroke:v.tickColor};var J={"font-size":v.font.size,"font-family":v.font.family,fill:v.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(ta,
oa){return" "+ta+" 0 "+v.font.outlineColor}).join(",")};if(v.showLegend){H=n.select(".legend-group").attr({transform:"translate("+[B,v.margin.top]+")"}).style({display:"block"});var O=w.map(function(ta,oa){oa=e.util.cloneJson(ta);oa.symbol="DotPlot"===ta.geometry?ta.dotType||"circle":"LinePlot"!=ta.geometry?"square":"line";oa.visibleInLegend="undefined"===typeof ta.visibleInLegend||ta.visibleInLegend;oa.color="LinePlot"===ta.geometry?ta.strokeColor:ta.color;return oa});e.Legend().config({data:w.map(function(ta,
oa){return ta.name||"Element"+oa}),legendConfig:h({},e.Legend.defaultConfig().legendConfig,{container:H,elements:O,reverseOrder:v.legend.reverseOrder})})();O=H.node().getBBox();B=Math.min(v.width-O.width-v.margin.left-v.margin.right,v.height-v.margin.top-v.margin.bottom)/2;B=Math.max(10,B);t=[v.margin.left+B,v.margin.top+B];d.range([0,B]);p.layout.radialAxis.domain=d.domain();H.attr("transform","translate("+[t[0]+B,t[1]-B]+")")}else H=n.select(".legend-group").style({display:"none"});n.attr({width:v.width,
height:v.height}).style({opacity:v.opacity});y.attr("transform","translate("+t+")").style({cursor:"crosshair"});var Q=[(v.width-(v.margin.left+v.margin.right+2*B+(O?O.width:0)))/2,(v.height-(v.margin.top+v.margin.bottom+2*B))/2];Q[0]=Math.max(0,Q[0]);Q[1]=Math.max(0,Q[1]);n.select(".outer-group").attr("transform","translate("+Q+")");if(v.title&&v.title.text){O=n.select("g.title-group text").style(J).text(v.title.text);var U=O.node().getBBox();O.attr({x:t[0]-U.width/2,y:t[1]-B-20})}O=n.select(".radial.axis-group");
v.radialAxis.gridLinesVisible&&(U=O.selectAll("circle.grid-circle").data(d.ticks(5)),U.enter().append("circle").attr({"class":"grid-circle"}).style(N),U.attr("r",d),U.exit().remove());O.select("circle.outside-circle").attr({r:B}).style(N);var P=n.select("circle.background-circle").attr({r:B}).style({fill:v.backgroundColor,stroke:v.stroke});v.radialAxis.visible&&(U=m.svg.axis().scale(d).ticks(5).tickSize(5),O.call(U).attr({transform:"rotate("+v.radialAxis.orientation+")"}),O.selectAll(".domain").style(N),
O.selectAll("g\x3etext").text(function(ta,oa){return this.textContent+v.radialAxis.ticksSuffix}).style(J).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(ta,oa){return"horizontal"===v.radialAxis.tickOrientation?"rotate("+-v.radialAxis.orientation+") translate("+[0,J["font-size"]]+")":"translate("+[0,J["font-size"]]+")"}}),O.selectAll("g\x3eline").style({stroke:"black"}));O=n.select(".angular.axis-group").selectAll("g.angular-tick").data(M);M=O.enter().append("g").classed("angular-tick",
!0);O.attr({transform:function(ta,oa){return"rotate("+(q(ta)%360+v.orientation)+")"}}).style({display:v.angularAxis.visible?"block":"none"});O.exit().remove();M.append("line").classed("grid-line",!0).classed("major",function(ta,oa){return 0==oa%(v.minorTicks+1)}).classed("minor",function(ta,oa){return 0!=oa%(v.minorTicks+1)}).style(N);M.selectAll(".minor").style({stroke:v.minorTickColor});O.select("line.grid-line").attr({x1:v.tickLength?B-v.tickLength:0,x2:B}).style({display:v.angularAxis.gridLinesVisible?
"block":"none"});M.append("text").classed("axis-text",!0).style(J);O=O.select("text.axis-text").attr({x:B+v.labelOffset,dy:l+"em",transform:function(ta,oa){ta=q(ta)%360+v.orientation;oa=B+v.labelOffset;var ua=v.angularAxis.tickOrientation;return"horizontal"==ua?"rotate("+-ta+" "+oa+" 0)":"radial"==ua?270>ta&&90<ta?"rotate(180 "+oa+" 0)":null:"rotate("+(180>=ta&&0<ta?-90:90)+" "+oa+" 0)"}}).style({"text-anchor":"middle",display:v.angularAxis.labelsVisible?"block":"none"}).text(function(ta,oa){return 0!=
oa%(v.minorTicks+1)?"":L?L[ta]+v.angularAxis.ticksSuffix:ta+v.angularAxis.ticksSuffix}).style(J);v.angularAxis.rewriteTicks&&O.text(function(ta,oa){return 0!=oa%(v.minorTicks+1)?"":v.angularAxis.rewriteTicks(this.textContent,oa)});O=m.max(y.selectAll(".angular-tick text")[0].map(function(ta,oa){return ta.getCTM().e+ta.getBBox().width}));H.attr({transform:"translate("+[B+O,v.margin.top]+")"});O=0<n.select("g.geometry-group").selectAll("g").size();var V=n.select("g.geometry-group").selectAll("g.geometry").data(w);
V.enter().append("g").attr({"class":function(ta,oa){return"geometry geometry"+oa}});V.exit().remove();if(w[0]||O){var Y=[];w.forEach(function(ta,oa){var ua={};ua.radialScale=d;ua.angularScale=q;ua.container=V.filter(function(ka,sa){return sa==oa});ua.geometry=ta.geometry;ua.orientation=v.orientation;ua.direction=v.direction;ua.index=oa;Y.push({data:ta,geometryConfig:ua})});var ba=[];m.nest().key(function(ta,oa){return"undefined"!=typeof ta.data.groupId||"unstacked"}).entries(Y).forEach(function(ta,
oa){"unstacked"===ta.key?ba=ba.concat(ta.values.map(function(ua,ka){return[ua]})):ba.push(ta.values)});ba.forEach(function(ta,oa){var ua=Array.isArray(ta)?ta[0].geometryConfig.geometry:ta.geometryConfig.geometry;ta=ta.map(function(ka,sa){return h(e[ua].defaultConfig(),ka)});e[ua]().config(ta)()})}var ea=n.select(".guides-group");w=n.select(".tooltips-group");var ca=e.tooltipPanel().config({container:w,fontSize:8})(),ia=e.tooltipPanel().config({container:w,fontSize:8})(),fa=e.tooltipPanel().config({container:w,
hasTick:!0})(),ha,na;if(!I){var pa=ea.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});y.on("mousemove.angular-guide",function(ta,oa){ta=e.util.getMousePos(P).angle;pa.attr({x2:-B,transform:"rotate("+ta+")"}).style({opacity:.5});ha=q.invert((ta+180+360-v.orientation)%360);ta=e.util.convertToCartesian(B+12,ta+180);ca.text(e.util.round(ha)).move([ta[0]+t[0],ta[1]+t[1]])}).on("mouseout.angular-guide",function(ta,oa){ea.select("line").style({opacity:0})})}var ra=ea.select("circle").style({stroke:"grey",
fill:"none"});y.on("mousemove.radial-guide",function(ta,oa){ta=e.util.getMousePos(P).radius;ra.attr({r:ta}).style({opacity:.5});na=d.invert(e.util.getMousePos(P).radius);ta=e.util.convertToCartesian(ta,v.radialAxis.orientation);ia.text(e.util.round(na)).move([ta[0]+t[0],ta[1]+t[1]])}).on("mouseout.radial-guide",function(ta,oa){ra.style({opacity:0});fa.hide();ca.hide();ia.hide()});n.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(ta,oa){var ua=m.select(this);oa=this.style.fill;ua.attr({"data-opacity":this.style.opacity||
1});if(oa&&"none"!==oa){ua.attr({"data-fill":oa});oa=m.hsl(oa).darker().toString();ua.style({fill:oa,opacity:1});ua=e.util.round(ta[0]);var ka=e.util.round(ta[1]);I&&(ua=L[ta[0]]);ta="t: "+ua+", r: "+ka;ua=this.getBoundingClientRect();ka=n.node().getBoundingClientRect();ua=[ua.left+ua.width/2-Q[0]-ka.left,ua.top+ua.height/2-Q[1]-ka.top];fa.config({color:oa}).text(ta);fa.move(ua)}else oa=this.style.stroke||"black",ua.attr({"data-stroke":oa}),oa=m.hsl(oa).darker().toString(),ua.style({stroke:oa,opacity:1})}).on("mousemove.tooltip",
function(ta,oa){if(0!=m.event.which)return!1;m.select(this).attr("data-fill")&&fa.show()}).on("mouseout.tooltip",function(ta,oa){fa.hide();ta=m.select(this);(oa=ta.attr("data-fill"))?ta.style({fill:oa,opacity:ta.attr("data-opacity")}):ta.style({stroke:ta.attr("data-stroke"),opacity:ta.attr("data-opacity")})})});return r}var g={data:[],layout:{}},k={},p={},n,c,f=m.dispatch("hover"),d,q,r={render:function(u){a(u);return this},config:function(u){if(!arguments.length)return g;var v=e.util.cloneJson(u);
v.data.forEach(function(w,y){g.data[y]||(g.data[y]={});h(g.data[y],e.Axis.defaultConfig().data[0]);h(g.data[y],w)});h(g.layout,e.Axis.defaultConfig().layout);h(g.layout,v.layout);return this},getLiveConfig:function(){return p},getinputConfig:function(){return k},radialScale:function(u){return d},angularScale:function(u){return q},svg:function(){return n}};m.rebind(r,f,"on");return r};e.Axis.defaultConfig=function(a,g){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,
strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:m.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],
ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}};e.util={};e.DATAEXTENT="dataExtent";e.AREA="AreaChart";e.LINE="LinePlot";e.DOT="DotPlot";e.BAR="BarChart";e.util._override=function(a,g){for(var k in a)k in g&&(g[k]=a[k])};e.util._extend=function(a,
g){for(var k in a)g[k]=a[k]};e.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)};e.util.dataFromEquation2=function(a,g){g=g||6;return m.range(0,360+g,g).map(function(k,p){p=a(k*Math.PI/180);return[k,p]})};e.util.dataFromEquation=function(a,g,k){g=g||6;var p=[],n=[];m.range(0,360+g,g).forEach(function(c,f){f=a(c*Math.PI/180);p.push(c);n.push(f)});g={t:p,r:n};k&&(g.name=k);return g};e.util.ensureArray=function(a,g){if("undefined"===typeof a)return null;var k=
[].concat(a);return m.range(g).map(function(p,n){return k[n]||k[0]})};e.util.fillArrays=function(a,g,k){g.forEach(function(p,n){a[p]=e.util.ensureArray(a[p],k)});return a};e.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))};e.util.validateKeys=function(a,g){"string"===typeof g&&(g=g.split("."));var k=g.shift();return a[k]&&(!g.length||objHasKeys(a[k],g))};e.util.sumArrays=function(a,g){return m.zip(a,g).map(function(k,p){return m.sum(k)})};e.util.arrayLast=function(a){return a[a.length-
1]};e.util.arrayEqual=function(a,g){for(var k=Math.max(a.length,g.length,1);0<=k--&&a[k]===g[k];);return-2===k};e.util.flattenArray=function(a){for(var g=[];!e.util.arrayEqual(g,a);)g=a,a=[].concat.apply([],a);return a};e.util.deduplicate=function(a){return a.filter(function(g,k,p){return p.indexOf(g)==k})};e.util.convertToCartesian=function(a,g){g=g*Math.PI/180;return[a*Math.cos(g),a*Math.sin(g)]};e.util.round=function(a,g){g=Math.pow(10,g||2);return Math.round(a*g)/g};e.util.getMousePos=function(a){a=
m.mouse(a.node());var g=a[0],k=a[1],p={};p.x=g;p.y=k;p.pos=a;p.angle=180*(Math.atan2(k,g)+Math.PI)/Math.PI;p.radius=Math.sqrt(g*g+k*k);return p};e.util.duplicatesCount=function(a){for(var g={},k,p={},n=0,c=a.length;n<c;n++)k=a[n],k in g?(g[k]++,p[k]=g[k]):g[k]=1;return p};e.util.duplicates=function(a){return Object.keys(e.util.duplicatesCount(a))};e.util.translator=function(a,g,k,p){p&&(p=k.slice(),k=g,g=p);var n=g.reduce(function(c,f){if("undefined"!=typeof c)return c[f]},a);"undefined"!==typeof n&&
(g.reduce(function(c,f,d){if("undefined"!=typeof c)return d===g.length-1&&delete c[f],c[f]},a),k.reduce(function(c,f,d){"undefined"===typeof c[f]&&(c[f]={});d===k.length-1&&(c[f]=n);return c[f]},a))};e.PolyChart=function(){function a(){var n=g[0].geometryConfig,c=n.container;"string"==typeof c&&(c=m.select(c));c.datum(g).each(function(f,d){var q=!!f[0].data.yStack,r=f.map(function(t,G){return q?m.zip(t.data.t[0],t.data.r[0],t.data.yStack[0]):m.zip(t.data.t[0],t.data.r[0])}),u=n.angularScale,v=n.radialScale.domain()[0],
w={bar:function(t,G,I){I=f[I].data;G=n.radialScale(t[1])-n.radialScale(0);t=n.radialScale(t[2]||0);I=I.barWidth;m.select(this).attr({"class":"mark bar",d:"M"+[[G+t,-I/2],[G+t,I/2],[t,I/2],[t,-I/2]].join("L")+"Z",transform:function(L,M){return"rotate("+(n.orientation+u(L[0]))+")"}})},dot:function(t,G,I){var L=t[2]?[t[0],t[1]+t[2]]:t;t=m.svg.symbol().size(f[I].data.dotSize).type(f[I].data.dotType)(t,G);m.select(this).attr({"class":"mark dot",d:t,transform:function(M,N){M=n.radialScale(L[1]);N=(n.angularScale(L[0])+
n.orientation)*Math.PI/180;return"translate("+[M*Math.cos(N),M*Math.sin(N)]+")"}})}},y=m.svg.line.radial().interpolate(f[0].data.lineInterpolation).radius(function(t){return n.radialScale(t[1])}).angle(function(t){return n.angularScale(t[0])*Math.PI/180});w.line=function(t,G,I){var L=t[2]?r[I].map(function(N,H){return[N[0],N[1]+N[2]]}):r[I];m.select(this).each(w.dot).style({opacity:function(N,H){return+f[I].data.dotVisible},fill:E.stroke(t,G,I)}).attr({"class":"mark dot"});if(!(0<G)){var M=m.select(this.parentNode).selectAll("path.line").data([0]);
M.enter().insert("path");M.attr({"class":"line",d:y(L),transform:function(N,H){return"rotate("+(n.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(N,H){return E.fill(t,G,I)},"fill-opacity":0,stroke:function(N,H){return E.stroke(t,G,I)},"stroke-width":function(N,H){return E["stroke-width"](t,G,I)},"stroke-dasharray":function(N,H){return E["stroke-dasharray"](t,G,I)},opacity:function(N,H){return E.opacity(t,G,I)},display:function(N,H){return E.display(t,G,I)}})}};d=n.angularScale.range();
var D=Math.abs(d[1]-d[0])/r[0].length*Math.PI/180,x=m.svg.arc().startAngle(function(t){return-D/2}).endAngle(function(t){return D/2}).innerRadius(function(t){return n.radialScale(v+(t[2]||0))}).outerRadius(function(t){return n.radialScale(v+(t[2]||0))+n.radialScale(t[1])});w.arc=function(t,G,I){m.select(this).attr({"class":"mark arc",d:x,transform:function(L,M){return"rotate("+(n.orientation+u(L[0])+90)+")"}})};var E={fill:function(t,G,I){return f[I].data.color},stroke:function(t,G,I){return f[I].data.strokeColor},
"stroke-width":function(t,G,I){return f[I].data.strokeSize+"px"},"stroke-dasharray":function(t,G,I){return p[f[I].data.strokeDash]},opacity:function(t,G,I){return f[I].data.opacity},display:function(t,G,I){return"undefined"===typeof f[I].data.visible||f[I].data.visible?"block":"none"}};d=m.select(this).selectAll("g.layer").data(r);d.enter().append("g").attr({"class":"layer"});var B=d.selectAll("path.mark").data(function(t,G){return t});B.enter().append("path").attr({"class":"mark"});B.style(E).each(w[n.geometryType]);
B.exit().remove();d.exit().remove()})}var g=[e.PolyChart.defaultConfig()],k=m.dispatch("hover"),p={solid:"none",dash:[5,2],dot:[2,5]};a.config=function(n){if(!arguments.length)return g;n.forEach(function(c,f){g[f]||(g[f]={});h(g[f],e.PolyChart.defaultConfig());h(g[f],c)});return this};a.getColorScale=function(){};m.rebind(a,k,"on");return a};e.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",
strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:m.scale.category20()}}};e.BarChart=function(){return e.PolyChart()};e.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}};e.AreaChart=function(){return e.PolyChart()};e.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}};
e.DotPlot=function(){return e.PolyChart()};e.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}};e.LinePlot=function(){return e.PolyChart()};e.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}};e.Legend=function(){function a(){var p=g.legendConfig,n=g.data.map(function(y,D){return[].concat(y).map(function(x,E){var B=h({},p.elements[D]);B.name=x;B.color=[].concat(p.elements[D].color)[E];return B})}),c=m.merge(n);c=c.filter(function(y,
D){return p.elements[D]&&(p.elements[D].visibleInLegend||"undefined"===typeof p.elements[D].visibleInLegend)});p.reverseOrder&&(c=c.reverse());var f=p.container;if("string"==typeof f||f.nodeName)f=m.select(f);var d=c.map(function(y,D){return y.color}),q=p.fontSize,r=(n=null==p.isContinuous?"number"===typeof c[0]:p.isContinuous)?p.height:q*c.length;f=f.classed("legend-group",!0).selectAll("svg").data([0]);var u=f.enter().append("svg").attr({width:300,height:r+q,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",
version:"1.1"});u.append("g").classed("legend-axis",!0);u.append("g").classed("legend-marks",!0);u=m.range(c.length);var v=m.scale[n?"linear":"ordinal"]().domain(u).range(d),w=m.scale[n?"linear":"ordinal"]().domain(u)[n?"range":"rangePoints"]([0,r]);n?(r=f.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(d),r.enter().append("stop"),r.attr({offset:function(y,D){return D/(d.length-1)*100+"%"}}).style({"stop-color":function(y,
D){return y}}),f.append("rect").classed("legend-mark",!0).attr({height:p.height,width:p.colorBandWidth,fill:"url(#grad1)"})):(r=f.select(".legend-marks").selectAll("path.legend-mark").data(c),r.enter().append("path").classed("legend-mark",!0),r.attr({transform:function(y,D){return"translate("+[q/2,w(D)+q/2]+")"},d:function(y,D){y=y.symbol;D=3*q;y="line"===y?"M"+[[-q/2,-q/12],[q/2,-q/12],[q/2,q/12],[-q/2,q/12]]+"Z":-1!=m.svg.symbolTypes.indexOf(y)?m.svg.symbol().type(y).size(D)():m.svg.symbol().type("square").size(D)();
return y},fill:function(y,D){return v(D)}}),r.exit().remove());r=m.svg.axis().scale(w).orient("right");f=f.select("g.legend-axis").attr({transform:"translate("+[n?p.colorBandWidth:q,q/2]+")"}).call(r);f.selectAll(".domain").style({fill:"none",stroke:"none"});f.selectAll("line").style({fill:"none",stroke:n?p.textColor:"none"});f.selectAll("text").style({fill:p.textColor,"font-size":p.fontSize}).text(function(y,D){return c[D].name});return a}var g=e.Legend.defaultConfig(),k=m.dispatch("hover");a.config=
function(p){if(!arguments.length)return g;h(g,p);return this};m.rebind(a,k,"on");return a};e.Legend.defaultConfig=function(a,g){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}};e.tooltipPanel=function(){var a,g,k,p={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},n="tooltip-"+
e.tooltipPanel.uid++,c=function(){a=p.container.selectAll("g."+n).data([0]);var f=a.enter().append("g").classed(n,!0).style({"pointer-events":"none",display:"none"});k=f.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});g=f.append("text").attr({dx:p.padding+10,dy:.3*+p.fontSize});return c};c.text=function(f){var d=m.hsl(p.color).l,q=.5<=d?"#aaa":"white";f=f||"";g.style({fill:.5<=d?"black":"white","font-size":p.fontSize+"px"}).text(f);d=p.padding;f=g.node().getBBox();q={fill:p.color,
stroke:q,"stroke-width":"2px"};var r=f.width+2*d+10;f=f.height+2*d;k.attr({d:"M"+[[10,-f/2],[10,-f/4],[p.hasTick?0:10,0],[10,f/4],[10,f/2],[r,f/2],[r,-f/2]].join("L")+"Z"}).style(q);a.attr({transform:"translate("+[10,-f/2+2*d]+")"});a.style({display:"block"});return c};c.move=function(f){if(a)return a.attr({transform:"translate("+[f[0],f[1]]+")"}).style({display:"block"}),c};c.hide=function(){if(a)return a.style({display:"none"}),c};c.show=function(){if(a)return a.style({display:"block"}),c};c.config=
function(f){h(p,f);return c};return c};e.tooltipPanel.uid=1;e.adapter={};e.adapter.plotly=function(){return{convert:function(a,g){var k={};if(a.data&&(k.data=a.data.map(function(d,q){d=h({},d);[[d,["marker","color"],["color"]],[d,["marker","opacity"],["opacity"]],[d,["marker","line","color"],["strokeColor"]],[d,["marker","line","dash"],["strokeDash"]],[d,["marker","line","width"],["strokeSize"]],[d,["marker","symbol"],["dotType"]],[d,["marker","size"],["dotSize"]],[d,["marker","barWidth"],["barWidth"]],
[d,["line","interpolation"],["lineInterpolation"]],[d,["showlegend"],["visibleInLegend"]]].forEach(function(r,u){e.util.translator.apply(null,r.concat(g))});g||delete d.marker;g&&delete d.groupId;g?("LinePlot"===d.geometry?(d.type="scatter",!0===d.dotVisible?(delete d.dotVisible,d.mode="lines+markers"):d.mode="lines"):"DotPlot"===d.geometry?(d.type="scatter",d.mode="markers"):"AreaChart"===d.geometry?d.type="area":"BarChart"===d.geometry&&(d.type="bar"),delete d.geometry):("scatter"===d.type?"lines"===
d.mode?d.geometry="LinePlot":"markers"===d.mode?d.geometry="DotPlot":"lines+markers"===d.mode&&(d.geometry="LinePlot",d.dotVisible=!0):"area"===d.type?d.geometry="AreaChart":"bar"===d.type&&(d.geometry="BarChart"),delete d.mode,delete d.type);return d}),!g&&a.layout&&"stack"===a.layout.barmode)){var p=e.util.duplicates(k.data.map(function(d,q){return d.geometry}));k.data.forEach(function(d,q){d=p.indexOf(d.geometry);-1!=d&&(k.data[q].groupId=d)})}if(a.layout){a=h({},a.layout);[[a,["plot_bgcolor"],
["backgroundColor"]],[a,["showlegend"],["showLegend"]],[a,["radialaxis"],["radialAxis"]],[a,["angularaxis"],["angularAxis"]],[a.angularaxis,["showline"],["gridLinesVisible"]],[a.angularaxis,["showticklabels"],["labelsVisible"]],[a.angularaxis,["nticks"],["ticksCount"]],[a.angularaxis,["tickorientation"],["tickOrientation"]],[a.angularaxis,["ticksuffix"],["ticksSuffix"]],[a.angularaxis,["range"],["domain"]],[a.angularaxis,["endpadding"],["endPadding"]],[a.radialaxis,["showline"],["gridLinesVisible"]],
[a.radialaxis,["tickorientation"],["tickOrientation"]],[a.radialaxis,["ticksuffix"],["ticksSuffix"]],[a.radialaxis,["range"],["domain"]],[a.angularAxis,["showline"],["gridLinesVisible"]],[a.angularAxis,["showticklabels"],["labelsVisible"]],[a.angularAxis,["nticks"],["ticksCount"]],[a.angularAxis,["tickorientation"],["tickOrientation"]],[a.angularAxis,["ticksuffix"],["ticksSuffix"]],[a.angularAxis,["range"],["domain"]],[a.angularAxis,["endpadding"],["endPadding"]],[a.radialAxis,["showline"],["gridLinesVisible"]],
[a.radialAxis,["tickorientation"],["tickOrientation"]],[a.radialAxis,["ticksuffix"],["ticksSuffix"]],[a.radialAxis,["range"],["domain"]],[a.font,["outlinecolor"],["outlineColor"]],[a.legend,["traceorder"],["reverseOrder"]],[a,["labeloffset"],["labelOffset"]],[a,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(d,q){e.util.translator.apply(null,d.concat(g))});g?("undefined"!==typeof a.tickLength&&(a.angularaxis.ticklen=a.tickLength,delete a.tickLength),a.tickColor&&(a.angularaxis.tickcolor=
a.tickColor,delete a.tickColor)):(a.angularAxis&&"undefined"!==typeof a.angularAxis.ticklen&&(a.tickLength=a.angularAxis.ticklen),a.angularAxis&&"undefined"!==typeof a.angularAxis.tickcolor&&(a.tickColor=a.angularAxis.tickcolor));a.legend&&"boolean"!=typeof a.legend.reverseOrder&&(a.legend.reverseOrder="normal"!=a.legend.reverseOrder);a.legend&&"boolean"==typeof a.legend.traceorder&&(a.legend.traceorder=a.legend.traceorder?"reversed":"normal",delete a.legend.reverseOrder);if(a.margin&&"undefined"!=
typeof a.margin.t){var n=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],f={};m.entries(a.margin).forEach(function(d,q){f[c[n.indexOf(d.key)]]=d.value});a.margin=f}g&&(delete a.needsEndSpacing,delete a.minorTickColor,delete a.minorTicks,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksStep,delete a.angularaxis.rewriteTicks,delete a.angularaxis.nticks,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksStep,
delete a.radialaxis.rewriteTicks,delete a.radialaxis.nticks);k.layout=a}return k}}}},{"../../../constants/alignment":717,"../../../lib":749,d3:169}],870:[function(b,F,C){var m=b("d3");C=b("../../../lib");var h=b("../../../components/color"),l=b("./micropolar"),e=b("./undo_manager"),a=C.extendDeepAll,g=F.exports={};g.framework=function(k){function p(u,v){v&&(q=v);m.select(m.select(q).node().parentNode).selectAll(".svg-container\x3e*:not(.chart-root)").remove();n=n?a(n,u):u;f||(f=l.Axis());d=l.adapter.plotly().convert(n);
f.config(d).render(q);k.data=n.data;k.layout=n.layout;g.fillLayout(k);return n}var n,c,f,d,q,r=new e;p.isPolar=!0;p.svg=function(){return f.svg()};p.getConfig=function(){return n};p.getLiveConfig=function(){return l.adapter.plotly().convert(f.getLiveConfig(),!0)};p.getLiveScales=function(){return{t:f.angularScale(),r:f.radialScale()}};p.setUndoPoint=function(){var u=this,v=l.util.cloneJson(n);(function(w,y){r.add({undo:function(){y&&u(y)},redo:function(){u(w)}})})(v,c);c=l.util.cloneJson(v)};p.undo=
function(){r.undo()};p.redo=function(){r.redo()};return p};g.fillLayout=function(k){var p=m.select(k).selectAll(".plot-container"),n=p.selectAll(".svg-container"),c=k.framework&&k.framework.svg&&k.framework.svg();k._fullLayout=a({width:800,height:600,paper_bgcolor:h.background,_container:p,_paperdiv:n,_paper:c},k.layout)}},{"../../../components/color":615,"../../../lib":749,"./micropolar":869,"./undo_manager":871,d3:169}],871:[function(b,F,C){F.exports=function(){function m(g,k){if(!g)return this;
e=!0;g[k]();e=!1;return this}var h=[],l=-1,e=!1,a;return{add:function(g){if(e)return this;h.splice(l+1,h.length-l);h.push(g);l=h.length-1;return this},setCallback:function(g){a=g},undo:function(){var g=h[l];if(!g)return this;m(g,"undo");--l;a&&a(g.undo);return this},redo:function(){var g=h[l+1];if(!g)return this;m(g,"redo");l+=1;a&&a(g.redo);return this},clear:function(){h=[];l=-1},hasUndo:function(){return-1!==l},hasRedo:function(){return l<h.length-1},getCommands:function(){return h},getPreviousCommand:function(){return h[l-
1]},getIndex:function(){return l}}}},{}],872:[function(b,F,C){function m(V,Y){this.id=Y;this.gd=V;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=null;this.traceHash={};this.layers={};this.clipPaths={};this.clipIds={};this.viewInitial={};V=V._fullLayout;this.clipIds.forTraces="clip"+V._uid+Y+"-for-traces";this.clipPaths.forTraces=V._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=V._polarlayer.append("g").attr("class",Y);
this.angularTickLayout=this.radialTickLayout=null}function h(V){var Y=V.ticks+String(V.ticklen)+String(V.showticklabels);"side"in V&&(Y+=V.side);return Y}function l(V,Y){var ba=c.findIndexOfMin(Y,function(ea){return c.angleDist(V,ea)});return Y[ba]}function e(V,Y,ba){Y?(V.attr("display",null),V.attr(ba)):V&&V.attr("display","none");return V}function a(V,Y){return"translate("+V+","+Y+")"}function g(V){return"rotate("+V+")"}var k=b("d3"),p=b("tinycolor2"),n=b("../../registry"),c=b("../../lib"),f=b("../../components/color"),
d=b("../../components/drawing"),q=b("../plots"),r=b("../../plots/cartesian/axes"),u=b("../cartesian/set_convert"),v=b("./set_convert"),w=b("../cartesian/autorange").doAutoRange,y=b("../cartesian/dragbox"),D=b("../../components/dragelement"),x=b("../../components/fx"),E=b("../../components/titles"),B=b("../cartesian/select").prepSelect,t=b("../cartesian/select").selectOnClick,G=b("../cartesian/select").clearSelect,I=b("../../lib/setcursor"),L=b("../../lib/clear_gl_canvases"),M=b("../../plot_api/subroutines").redrawReglTraces,
N=b("../../constants/alignment").MID_SHIFT,H=b("./constants"),J=b("./helpers"),O=c._,Q=c.mod,U=c.deg2rad,P=c.rad2deg;b=m.prototype;F.exports=function(V,Y){return new m(V,Y)};b.plot=function(V,Y){var ba=Y[this.id];this._hasClipOnAxisFalse=!1;for(var ea=0;ea<V.length;ea++)if(!1===V[ea][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(Y,ba);this.updateLayout(Y,ba);q.generalUpdatePerTraceModule(this.gd,this,V,ba);this.updateFx(Y,ba)};b.updateLayers=function(V,Y){var ba=this.layers;
V=Y.radialaxis;Y=Y.angularaxis;var ea=H.layerNames,ca=ea.indexOf("frontplot");ea=ea.slice(0,ca);Y="below traces"===Y.layer;V="below traces"===V.layer;Y&&ea.push("angular-line");V&&ea.push("radial-line");Y&&ea.push("angular-axis");V&&ea.push("radial-axis");ea.push("frontplot");Y||ea.push("angular-line");V||ea.push("radial-line");Y||ea.push("angular-axis");V||ea.push("radial-axis");V=this.framework.selectAll(".polarsublayer").data(ea,String);V.enter().append("g").attr("class",function(ia){return"polarsublayer "+
ia}).each(function(ia){var fa=ba[ia]=k.select(this);switch(ia){case "frontplot":fa.append("g").classed("barlayer",!0);fa.append("g").classed("scatterlayer",!0);break;case "backplot":fa.append("g").classed("maplayer",!0);break;case "plotbg":ba.bg=fa.append("path");break;case "radial-grid":fa.style("fill","none");break;case "angular-grid":fa.style("fill","none");break;case "radial-line":fa.append("line").style("fill","none");break;case "angular-line":fa.append("path").style("fill","none")}});V.order()};
b.updateLayout=function(V,Y){var ba=this.layers,ea=V._size,ca=Y.radialaxis,ia=Y.angularaxis,fa=Y.domain.x,ha=Y.domain.y;this.xOffset=ea.l+ea.w*fa[0];this.yOffset=ea.t+ea.h*(1-ha[1]);var na=this.xLength=ea.w*(fa[1]-fa[0]),pa=this.yLength=ea.h*(ha[1]-ha[0]),ra=Y.sector;this.sectorInRad=ra.map(U);var ta=ra[0];ra=ra[1]-ta;ta=Q(ta,360);ra=ta+ra;var oa=Math.cos(U(ta)),ua=Math.sin(U(ta)),ka=Math.cos(U(ra)),sa=Math.sin(U(ra));var ya=90>=ta&&90<=ra||90<ta&&450<=ra?1:0>=ua&&0>=sa?0:Math.max(ua,sa);var qa=180>=
ta&&180<=ra||180<ta&&540<=ra?-1:0<=oa&&0<=ka?0:Math.min(oa,ka);ta=this.sectorBBox=[qa,270>=ta&&270<=ra||270<ta&&630<=ra?-1:0<=ua&&0<=sa?0:Math.min(ua,sa),360<=ra?1:0>=oa&&0>=ka?0:Math.max(oa,ka),ya];ra=ta[2]-ta[0];ua=Math.abs((ta[3]-ta[1])/ra);pa/na>ua?(oa=na,ua*=na,na=(pa-ua)/ea.h/2,fa=[fa[0],fa[1]],ha=[ha[0]+na,ha[1]-na]):(oa=pa/ua,ua=pa,na=(na-oa)/ea.w/2,fa=[fa[0]+na,fa[1]-na],ha=[ha[0],ha[1]]);this.xLength2=oa;this.yLength2=ua;this.xDomain2=fa;this.yDomain2=ha;na=this.xOffset2=ea.l+ea.w*fa[0];
pa=this.yOffset2=ea.t+ea.h*(1-ha[1]);oa=this.radius=oa/ra;ua=this.innerRadius=Y.hole*oa;ra=this.cx=na-oa*ta[0];ta=this.cy=pa+oa*ta[3];ka=this.cxx=ra-na;sa=this.cyy=ta-pa;this.radialAxis=this.mockAxis(V,Y,ca,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[ca.side],domain:[ua/ea.w,oa/ea.w]});this.angularAxis=this.mockAxis(V,Y,ia,{side:"right",domain:[0,Math.PI],autorange:!1});this.doAutoRange(V,Y);this.updateAngularAxis(V,Y);this.updateRadialAxis(V,Y);this.updateRadialAxisTitle(V,Y);this.xaxis=
this.mockCartesianAxis(V,Y,{_id:"x",domain:fa});this.yaxis=this.mockCartesianAxis(V,Y,{_id:"y",domain:ha});V=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",V).attr("transform",a(ka,sa));ba.frontplot.attr("transform",a(na,pa)).call(d.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);ba.bg.attr("d",V).attr("transform",a(ra,ta)).call(f.fill,Y.bgcolor)};b.mockAxis=function(V,Y,ba,ea){ba=c.extendFlat({},ba,ea);v(ba,Y,V);return ba};b.mockCartesianAxis=function(V,
Y,ba){var ea=this,ca=ba._id,ia=c.extendFlat({type:"linear"},ba);u(ia,V);var fa={x:[0,2],y:[1,3]};ia.setRange=function(){var ha=ea.sectorBBox,na=fa[ca],pa=ea.radialAxis._rl;pa=(pa[1]-pa[0])/(1-Y.hole);ia.range=[ha[na[0]]*pa,ha[na[1]]*pa]};ia.isPtWithinRange="x"===ca?function(ha){return ea.isPtInside(ha)}:function(){return!0};ia.setRange();ia.setScale();return ia};b.doAutoRange=function(V,Y){var ba=this.gd;V=this.radialAxis;Y=Y.radialaxis;V.setScale();w(ba,V);ba=V.range;Y.range=ba.slice();Y._input.range=
ba.slice();V._rl=[V.r2l(ba[0],null,"gregorian"),V.r2l(ba[1],null,"gregorian")]};b.updateRadialAxis=function(V,Y){var ba=this,ea=ba.gd;V=ba.layers;var ca=ba.radius,ia=ba.innerRadius,fa=ba.cx,ha=ba.cy,na=Y.radialaxis,pa=Q(Y.sector[0],360),ra=ba.radialAxis;Y=ia<ca;ba.fillViewInitialKey("radialaxis.angle",na.angle);ba.fillViewInitialKey("radialaxis.range",ra.range.slice());ra.setGeometry();"auto"===ra.tickangle&&90<pa&&270>=pa&&(ra.tickangle=180);pa=function(sa){return"translate("+(ra.l2p(sa.x)+ia)+",0)"};
var ta=function(sa){return ba.pathArc(ra.r2p(sa.x)+ia)},oa=h(na);ba.radialTickLayout!==oa&&(V["radial-axis"].selectAll(".xtick").remove(),ba.radialTickLayout=oa);if(Y){ra.setScale();oa=r.calcTicks(ra);var ua=r.clipEnds(ra,oa),ka=r.getTickSigns(ra)[2];r.drawTicks(ea,ra,{vals:oa,layer:V["radial-axis"],path:r.makeTickPath(ra,0,ka),transFn:pa,crisp:!1});r.drawGrid(ea,ra,{vals:ua,layer:V["radial-grid"],path:ta,transFn:c.noop,crisp:!1});r.drawLabels(ea,ra,{vals:oa,layer:V["radial-axis"],transFn:pa,labelFns:r.makeLabelFns(ra,
0)})}ea=ba.radialAxisAngle=ba.vangles?P(l(U(na.angle),ba.vangles)):na.angle;fa=a(fa,ha);ha=fa+g(-ea);e(V["radial-axis"],Y&&(na.showticklabels||na.ticks),{transform:ha});e(V["radial-grid"],Y&&na.showgrid,{transform:fa});e(V["radial-line"].select("line"),Y&&na.showline,{x1:ia,y1:0,x2:ca,y2:0,transform:ha}).attr("stroke-width",na.linewidth).call(f.stroke,na.linecolor)};b.updateRadialAxisTitle=function(V,Y,ba){V=this.gd;var ea=this.radius,ca=this.cx,ia=this.cy;Y=Y.radialaxis;var fa=this.id+"title";ba=
void 0!==ba?ba:this.radialAxisAngle;var ha=U(ba),na=Math.cos(ha);ha=Math.sin(ha);var pa=0;if(Y.title){pa=d.bBox(this.layers["radial-axis"].node()).height;var ra=Y.title.font.size;pa="counterclockwise"===Y.side?-pa-.4*ra:pa+.8*ra}this.layers["radial-axis-title"]=E.draw(V,fa,{propContainer:Y,propName:this.id+".radialaxis.title",placeholder:O(V,"Click to enter radial axis title"),attributes:{x:ca+ea/2*na+pa*ha,y:ia-ea/2*ha+pa*na,"text-anchor":"middle"},transform:{rotate:-ba}})};b.updateAngularAxis=function(V,
Y){var ba=this;V=ba.gd;var ea=ba.layers,ca=ba.radius,ia=ba.innerRadius,fa=ba.cx,ha=ba.cy,na=Y.angularaxis,pa=ba.angularAxis;ba.fillViewInitialKey("angularaxis.rotation",na.rotation);pa.setGeometry();pa.setScale();var ra=function(xa){return pa.t2g(xa.x)};"linear"===pa.type&&"radians"===pa.thetaunit&&(pa.tick0=P(pa.tick0),pa.dtick=P(pa.dtick));var ta=function(xa){return a(fa+ca*Math.cos(xa),ha-ca*Math.sin(xa))},oa=function(xa){return ta(ra(xa))},ua=function(xa){xa=ra(xa);return ta(xa)+g(-P(xa))},ka=
function(xa){var Ca=ra(xa);xa=Math.cos(Ca);Ca=Math.sin(Ca);return"M"+[fa+ia*xa,ha-ia*Ca]+"L"+[fa+ca*xa,ha-ca*Ca]},sa=r.makeLabelFns(pa,0).labelStandoff,ya={xFn:function(xa){xa=ra(xa);return Math.cos(xa)*sa},yFn:function(xa){var Ca=ra(xa);return-Math.sin(Ca)*(sa+xa.fontSize*(0<Math.sin(Ca)?.2:1))+Math.abs(Math.cos(Ca))*xa.fontSize*N},anchorFn:function(xa){xa=ra(xa);xa=Math.cos(xa);return.1>Math.abs(xa)?"middle":0<xa?"start":"end"},heightFn:function(xa,Ca,Ja){xa=ra(xa);return-.5*(1+Math.sin(xa))*Ja}},
qa=h(na);ba.angularTickLayout!==qa&&(ea["angular-axis"].selectAll("."+pa._id+"tick").remove(),ba.angularTickLayout=qa);qa=r.calcTicks(pa);"linear"===Y.gridshape?(Y=qa.map(ra),0>c.angleDelta(Y[0],Y[1])&&(Y=Y.slice().reverse())):Y=null;ba.vangles=Y;"category"===pa.type&&(qa=qa.filter(function(xa){return c.isAngleInsideSector(ra(xa),ba.sectorInRad)}));pa.visible&&(Y="inside"===pa.ticks?-1:1,r.drawTicks(V,pa,{vals:qa,layer:ea["angular-axis"],path:"M"+(pa.linewidth||1)/2*Y+",0h"+Y*pa.ticklen,transFn:ua,
crisp:!1}),r.drawGrid(V,pa,{vals:qa,layer:ea["angular-grid"],path:ka,transFn:c.noop,crisp:!1}),r.drawLabels(V,pa,{vals:qa,layer:ea["angular-axis"],repositionOnUpdate:!0,transFn:oa,labelFns:ya}));e(ea["angular-line"].select("path"),na.showline,{d:ba.pathSubplot(),transform:a(fa,ha)}).attr("stroke-width",na.linewidth).call(f.stroke,na.linecolor)};b.updateFx=function(V,Y){this.gd._context.staticPlot||(this.updateAngularDrag(V),this.updateRadialDrag(V,Y,0),this.updateRadialDrag(V,Y,1),this.updateMainDrag(V))};
b.updateMainDrag=function(V){function Y(db,gb){return Math.sqrt(db*db+gb*gb)}function ba(db,gb){return[db*Math.cos(gb),db*Math.sin(-gb)]}function ea(db,gb){if(0===db)return ua.pathSector(2*La);var rb=Oa/db,Bb=gb-rb;gb+=rb;rb=Math.max(0,Math.min(db,xa));db=rb-La;rb+=La;return"M"+ba(db,Bb)+"A"+[db,db]+" 0,0,0 "+ba(db,gb)+"L"+ba(rb,gb)+"A"+[rb,rb]+" 0,0,1 "+ba(rb,Bb)+"Z"}function ca(db,gb,rb){if(0===db)return ua.pathSector(2*La);gb=ba(db,gb);rb=ba(db,rb);db=lb((gb[0]+rb[0])/2);rb=lb((gb[1]+rb[1])/2);
if(db&&rb){gb=rb/db;var Bb=-1/gb;db=hb(La,gb,db,rb);gb=hb(Oa,Bb,db[0][0],db[0][1]);db=hb(Oa,Bb,db[1][0],db[1][1])}else{if(rb){Bb=Oa;var Qb=La}else Bb=La,Qb=Oa;gb=[[db-Bb,rb-Qb],[db+Bb,rb-Qb]];db=[[db-Bb,rb+Qb],[db+Bb,rb+Qb]]}return"M"+gb.join("L")+"L"+db.reverse().join("L")+"Z"}function ia(db,gb){gb=Math.max(Math.min(gb,xa),Ca);db<qa?db=0:xa-db<qa?db=xa:gb<qa?gb=0:xa-gb<qa&&(gb=xa);if(Math.abs(gb-db)>ya)return db<gb?(Ya=db,nb=gb):(Ya=gb,nb=db),!0;nb=Ya=null;return!1}function fa(db,gb){db=db||Da;gb=
gb||"M0,0Z";ib.attr("d",db);ob.attr("d",gb);y.transitionZoombox(ib,ob,Ha,ab);Ha=!0;db={};ta(db);ka.emit("plotly_relayouting",db)}function ha(db,gb){db=Pa+db;var rb=Ta+gb;gb=Y(Pa-Ra,Ta-Wa);db=Math.min(Y(db-Ra,rb-Wa),xa);rb=Math.atan2(Wa-Ta,Pa-Ra);if(ia(gb,db)){var Bb=Da+ua.pathSector(nb);Ya&&(Bb+=ua.pathSector(Ya));var Qb=ea(Ya,rb)+ea(nb,rb)}fa(Bb,Qb)}function na(db,gb,rb,Bb){db=J.findIntersectionXY(rb,Bb,rb,[db-Ra,Wa-gb]);return Y(db[0],db[1])}function pa(db,gb){db=Pa+db;var rb=Ta+gb,Bb=Math.atan2(Wa-
rb,db-Ra);gb=Fa(Math.atan2(Wa-Ta,Pa-Ra),Ia);var Qb=Fa(Bb,Ia);Bb=na(Pa,Ta,gb[0],gb[1]);db=Math.min(na(db,rb,Qb[0],Qb[1]),xa);if(ia(Bb,db)){var gc=Da+ua.pathSector(nb);Ya&&(gc+=ua.pathSector(Ya));var tc=[ca(Ya,gb[0],gb[1]),ca(nb,gb[0],gb[1])].join(" ")}fa(gc,tc)}function ra(){y.removeZoombox(ka);if(null!==Ya&&null!==nb){var db={};ta(db);y.showDoubleClickNotifier(ka);n.call("_guiRelayout",ka,db)}}function ta(db){var gb=Qa._rl,rb=(gb[1]-gb[0])/(1-Ca/xa)/xa;db[ua.id+".radialaxis.range"]=[gb[0]+(Ya-Ca)*
rb,gb[0]+(nb-Ca)*rb]}function oa(db,gb){var rb=ka._fullLayout.clickmode;y.removeZoombox(ka);if(2===db){var Bb={},Qb;for(Qb in ua.viewInitial)Bb[ua.id+"."+Qb]=ua.viewInitial[Qb];ka.emit("plotly_doubleclick",null);n.call("_guiRelayout",ka,Bb)}-1<rb.indexOf("select")&&1===db&&t(gb,ka,[ua.xaxis],[ua.yaxis],ua.id,bb);-1<rb.indexOf("event")&&x.click(ka,gb,ua.id)}var ua=this,ka=ua.gd,sa=V._zoomlayer,ya=H.MINZOOM,qa=H.OFFEDGE,xa=ua.radius,Ca=ua.innerRadius,Ja=ua.cx,eb=ua.cy,Ra=ua.cxx,Wa=ua.cyy,Ea=ua.sectorInRad,
Ia=ua.vangles,Qa=ua.radialAxis,lb=J.clampTiny,hb=J.findXYatLength,Fa=J.findEnclosingVertexAngles,La=H.cornerHalfWidth,Oa=H.cornerLen/2,fb=y.makeDragger(ua.layers,"path","maindrag","crosshair");k.select(fb).attr("d",ua.pathSubplot()).attr("transform",a(Ja,eb));var bb={element:fb,gd:ka,subplot:ua.id,plotinfo:{id:ua.id,xaxis:ua.xaxis,yaxis:ua.yaxis},xaxes:[ua.xaxis],yaxes:[ua.yaxis]},Pa,Ta,Ya,nb,Da,Ha,ab,ib,ob;bb.prepFn=function(db,gb,rb){var Bb=ka._fullLayout.dragmode,Qb=fb.getBoundingClientRect();
Pa=gb-Qb.left;Ta=rb-Qb.top;Ia&&(Qb=J.findPolygonOffset(xa,Ea[0],Ea[1],Ia),Pa+=Ra+Qb[0],Ta+=Wa+Qb[1]);switch(Bb){case "zoom":bb.moveFn=Ia?pa:ha;bb.clickFn=oa;bb.doneFn=ra;nb=Ya=null;Da=ua.pathSubplot();Ha=!1;ab=p(ka._fullLayout[ua.id].bgcolor).getLuminance();ib=y.makeZoombox(sa,ab,Ja,eb,Da);ib.attr("fill-rule","evenodd");ob=y.makeCorners(sa,Ja,eb);G(ka);break;case "select":case "lasso":B(db,gb,rb,bb,Bb)}};fb.onmousemove=function(db){x.hover(ka,db,ua.id);ka._fullLayout._lasthover=fb;ka._fullLayout._hoversubplot=
ua.id};fb.onmouseout=function(db){ka._dragging||D.unhover(ka,db)};D.init(bb)};b.updateRadialDrag=function(V,Y,ba){function ea(hb,Fa){Ia?Ia(hb,Fa):(hb=[hb,-Fa],hb=Math.abs(c.dot(hb,[Math.cos(ya),Math.sin(ya)])/Math.sqrt(c.dot(hb,hb))),isNaN(hb)||(Ia=.5>hb?ia:fa));hb={};null!==Qa?hb[ha.id+".radialaxis.angle"]=Qa:null!==lb&&(hb[ha.id+".radialaxis.range["+ba+"]"]=lb);na.emit("plotly_relayouting",hb)}function ca(){null!==Qa?n.call("_guiRelayout",na,ha.id+".radialaxis.angle",Qa):null!==lb&&n.call("_guiRelayout",
na,ha.id+".radialaxis.range["+ba+"]",lb)}function ia(hb,Fa){0!==ba&&(Qa=Math.atan2(oa-(Wa+Fa),Ra+hb-ta),ha.vangles&&(Qa=l(Qa,ha.vangles)),Qa=P(Qa),hb=a(ta,oa)+g(-Qa),pa["radial-axis"].attr("transform",hb),pa["radial-line"].select("line").attr("transform",hb),hb=ha.gd._fullLayout,ha.updateRadialAxisTitle(hb,hb[ha.id],Qa))}function fa(hb,Fa){hb=c.dot([hb,-Fa],[Math.cos(ya),Math.sin(ya)]);lb=Ja-eb*hb;if(0<eb!==(ba?lb>xa:lb<Ca))lb=null;else{Fa=na._fullLayout;hb=Fa[ha.id];ua.range[ba]=lb;ua._rl[ba]=lb;
ha.updateRadialAxis(Fa,hb);ha.xaxis.setRange();ha.xaxis.setScale();ha.yaxis.setRange();ha.yaxis.setScale();Fa=!1;for(var La in ha.traceHash){var Oa=ha.traceHash[La],fb=c.filterVisible(Oa);Oa[0][0].trace._module.plot(na,ha,fb,hb);n.traceIs(La,"gl")&&fb.length&&(Fa=!0)}Fa&&(L(na),M(na))}}var ha=this,na=ha.gd,pa=ha.layers;V=ha.radius;var ra=ha.innerRadius,ta=ha.cx,oa=ha.cy,ua=ha.radialAxis,ka=H.radialDragBoxSize,sa=ka/2;if(ua.visible){var ya=U(ha.radialAxisAngle),qa=ua._rl,xa=qa[0],Ca=qa[1],Ja=qa[ba],
eb=.75*(qa[1]-qa[0])/(1-Y.hole)/V;if(ba){var Ra=ta+(V+sa)*Math.cos(ya);var Wa=oa-(V+sa)*Math.sin(ya);Y="radialdrag"}else Ra=ta+(ra-sa)*Math.cos(ya),Wa=oa-(ra-sa)*Math.sin(ya),Y="radialdrag-inner";Y=y.makeRectDragger(pa,Y,"crosshair",-sa,-sa,ka,ka);var Ea={element:Y,gd:na};e(k.select(Y),ua.visible&&ra<V,{transform:a(Ra,Wa)});var Ia,Qa,lb;Ea.prepFn=function(){lb=Qa=Ia=null;Ea.moveFn=ea;Ea.doneFn=ca;G(na)};Ea.clampFn=function(hb,Fa){Math.sqrt(hb*hb+Fa*Fa)<H.MINDRAG&&(Fa=hb=0);return[hb,Fa]};D.init(Ea)}};
b.updateAngularDrag=function(V){function Y(Ia,Qa){var lb=ca.gd._fullLayout,hb=lb[ca.id],Fa=P(Math.atan2(oa+ua-(Ja+Qa),Ca+Ia-ta-ua)-Ea);Ra=eb+Fa;fa.frontplot.attr("transform",a(ca.xOffset2,ca.yOffset2)+g([-Fa,ta,oa]));ca.vangles?(Wa=ca.radialAxisAngle+Fa,Ia=a(pa,ra)+g(-Fa),Qa=a(pa,ra)+g(-Wa),fa.bg.attr("transform",Ia),fa["radial-grid"].attr("transform",Ia),fa["radial-axis"].attr("transform",Qa),fa["radial-line"].select("line").attr("transform",Qa),ca.updateRadialAxisTitle(lb,hb,Wa)):ca.clipPaths.forTraces.select("path").attr("transform",
a(ta,oa)+g(Fa));qa.each(function(){var Oa=k.select(this),fb=d.getTranslate(Oa);Oa.attr("transform",a(fb.x,fb.y)+g([Fa]))});xa.each(function(){var Oa=k.select(this),fb=Oa.select("text"),bb=d.getTranslate(Oa);Oa.attr("transform",g([Fa,fb.attr("x"),fb.attr("y")])+a(bb.x,bb.y))});na.rotation=c.modHalf(Ra,360);ca.updateAngularAxis(lb,hb);ca._hasClipOnAxisFalse&&!c.isFullCircle(ca.sectorInRad)&&ya.call(d.hideOutsideRangePoints,ca);lb=!1;for(var La in ca.traceHash)n.traceIs(La,"gl")&&(Ia=ca.traceHash[La],
Qa=c.filterVisible(Ia),Ia[0][0].trace._module.plot(ia,ca,Qa,hb),Qa.length&&(lb=!0));lb&&(L(ia),M(ia));hb={};ba(hb);ia.emit("plotly_relayouting",hb)}function ba(Ia){Ia[ca.id+".angularaxis.rotation"]=Ra;ca.vangles&&(Ia[ca.id+".radialaxis.angle"]=Wa)}function ea(){xa.select("text").attr("transform",null);var Ia={};ba(Ia);n.call("_guiRelayout",ia,Ia)}var ca=this,ia=ca.gd,fa=ca.layers,ha=ca.radius,na=ca.angularAxis,pa=ca.cx,ra=ca.cy,ta=ca.cxx,oa=ca.cyy,ua=H.angularDragBoxSize,ka=y.makeDragger(fa,"path",
"angulardrag","move"),sa={element:ka,gd:ia};k.select(ka).attr("d",ca.pathAnnulus(ha,ha+ua)).attr("transform",a(pa,ra)).call(I,"move");var ya=fa.frontplot.select(".scatterlayer").selectAll(".trace"),qa=ya.selectAll(".point"),xa=ya.selectAll(".textpoint"),Ca,Ja,eb,Ra,Wa,Ea;sa.prepFn=function(Ia,Qa,lb){eb=V[ca.id].angularaxis.rotation;Ia=ka.getBoundingClientRect();Ca=Qa-Ia.left;Ja=lb-Ia.top;Ea=Math.atan2(oa+ua-Ja,Ca-ta-ua);sa.moveFn=Y;sa.doneFn=ea;G(ia)};ca.vangles&&!c.isFullCircle(ca.sectorInRad)&&
(sa.prepFn=c.noop,I(k.select(ka),null));D.init(sa)};b.isPtInside=function(V){var Y=this.sectorInRad,ba=this.vangles,ea=this.angularAxis.c2g(V.theta),ca=this.radialAxis;V=ca.c2l(V.r);return(ba?J.isPtInsidePolygon:c.isPtInsideSector)(V,ea,ca._rl,Y,ba)};b.pathArc=function(V){var Y=this.sectorInRad,ba=this.vangles;return(ba?J.pathPolygon:c.pathArc)(V,Y[0],Y[1],ba)};b.pathSector=function(V){var Y=this.sectorInRad,ba=this.vangles;return(ba?J.pathPolygon:c.pathSector)(V,Y[0],Y[1],ba)};b.pathAnnulus=function(V,
Y){var ba=this.sectorInRad,ea=this.vangles;return(ea?J.pathPolygonAnnulus:c.pathAnnulus)(V,Y,ba[0],ba[1],ea)};b.pathSubplot=function(){var V=this.innerRadius,Y=this.radius;return V?this.pathAnnulus(V,Y):this.pathSector(Y)};b.fillViewInitialKey=function(V,Y){V in this.viewInitial||(this.viewInitial[V]=Y)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/drawing":637,"../../components/fx":655,"../../components/titles":710,"../../constants/alignment":717,"../../lib":749,
"../../lib/clear_gl_canvases":733,"../../lib/setcursor":769,"../../plot_api/subroutines":788,"../../plots/cartesian/axes":797,"../../registry":880,"../cartesian/autorange":796,"../cartesian/dragbox":805,"../cartesian/select":816,"../cartesian/set_convert":817,"../plots":860,"./constants":861,"./helpers":862,"./set_convert":873,d3:169,tinycolor2:548}],873:[function(b,F,C){function m(k,p){var n=p._subplot;k.setGeometry=function(){var c=k._rl[0],f=k._rl[1],d=n.innerRadius,q=(n.radius-d)/(f-c),r=d/q,
u=c>f?function(v){return 0>=v}:function(v){return 0<=v};k.c2g=function(v){v=k.c2l(v)-c;return(u(v)?v:0)+r};k.g2c=function(v){return k.l2c(v+c-r)};k.g2p=function(v){return v*q};k.c2p=function(v){return k.g2p(k.c2g(v))}}}function h(k,p){var n=k.type;if("linear"===n){var c=k.d2c,f=k.c2d;k.d2c=function(d,q){d=c(d);return"degrees"===q?a(d):d};k.c2d=function(d,q){d="degrees"===q?g(d):d;return f(d)}}k.makeCalcdata=function(d,q){var r=d[q],u=d._length,v;if(r){if(l.isTypedArray(r)&&"linear"===n){if(u===r.length)return r;
if(r.subarray)return r.subarray(0,u)}q=Array(u);for(v=0;v<u;v++)q[v]=k.d2c(r[v],d.thetaunit)}else for(v=q+"0",q="d"+q,r=(v in d)?k.d2c(d[v],d.thetaunit):0,d=d[q]?k.d2c(d[q],d.thetaunit):(k.period||2*Math.PI)/u,q=Array(u),v=0;v<u;v++)q[v]=r+v*d;return q};k.setGeometry=function(){var d=p.sector,q=d.map(a),r={clockwise:-1,counterclockwise:1}[k.direction],u=a(k.rotation),v=function(B){return(B-u)/r},w;switch(n){case "linear":var y=w=l.identity;var D=a;var x=g;k.range=l.isFullCircle(q)?[d[0],d[0]+360]:
q.map(v).map(g);break;case "category":d=k._categories.length;var E=k.period?Math.max(k.period,d):d;0===E&&(E=1);y=D=function(B){return 2*B*Math.PI/E};w=x=function(B){return B*E/Math.PI/2};k.range=[0,E]}k.c2g=function(B){return r*y(B)+u};k.g2c=function(B){return w(v(B))};k.t2g=function(B){return r*D(B)+u};k.g2t=function(B){return x(v(B))}}}var l=b("../../lib"),e=b("../cartesian/set_convert"),a=l.deg2rad,g=l.rad2deg;F.exports=function(k,p,n){e(k,n);switch(k._id){case "x":case "radialaxis":m(k,p);break;
case "angularaxis":h(k,p)}}},{"../../lib":749,"../cartesian/set_convert":817}],874:[function(b,F,C){var m=b("../lib"),h=b("../plot_api/plot_template"),l=b("./domain").defaults;F.exports=function(e,a,g,k){function p(D,x){return m.coerce(r,u,n,D,x)}var n=k.attributes;g=k.handleDefaults;for(var c=k.partition||"x",f=a._subplots[k.type],d=f.length,q=d&&f[0].replace(/\d+$/,""),r,u,v=0;v<d;v++){var w=f[v];r=e[w]?e[w]:e[w]={};u=h.newContainer(a,w,q);p("uirevision",a.uirevision);var y={};y[c]=[v/d,(v+1)/d];
l(u,a,p,y);k.id=w;g(r,u,p,k)}}},{"../lib":749,"../plot_api/plot_template":787,"./domain":824}],875:[function(b,F,C){function m(h){var l=h.description?" "+h.description:"";h=h.keys||[];if(0<h.length){l=[];for(var e=0;e<h.length;e++)l[e]="`"+h[e]+"`";l=1===h.length?"variable "+l[0]:"variables "+l.slice(0,-1).join(", ")+" and "+l.slice(-1)+"."}return l}F=b("../constants/docs").FORMAT_LINK;b=b("../constants/docs").DATE_FORMAT_LINK;['Variables are inserted using %{variable}, for example "y: %{y}". Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',
F,'for details on the formatting syntax. Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',b,"for details on the date formatting syntax."].join(" ");C.hovertemplateAttrs=function(h,l){h=h||{};l=l||{};m(l);l={valType:"string",dflt:"",editType:h.editType||"none"};!1!==h.arrayOk&&(l.arrayOk=!0);return l};C.texttemplateAttrs=function(h,l){h=h||{};l=l||{};m(l);l={valType:"string",dflt:"",editType:h.editType||"calc"};!1!==h.arrayOk&&(l.arrayOk=
!0);return l}},{"../constants/docs":719}],876:[function(b,F,C){var m=b("./ternary"),h=b("../../plots/get_data").getSubplotCalcData;F=b("../../lib").counterRegex;C.name="ternary";var l=C.attr="subplot";C.idRoot="ternary";C.idRegex=C.attrRegex=F("ternary");(C.attributes={})[l]={valType:"subplotid",dflt:"ternary",editType:"calc"};C.layoutAttributes=b("./layout_attributes");C.supplyLayoutDefaults=b("./layout_defaults");C.plot=function(e){for(var a=e._fullLayout,g=e.calcdata,k=a._subplots.ternary,p=0;p<
k.length;p++){var n=k[p],c=h(g,"ternary",n),f=a[n]._subplot;f||(f=new m({id:n,graphDiv:e,container:a._ternarylayer.node()},a),a[n]._subplot=f);f.plot(c,a,e._promises)}};C.clean=function(e,a,g,k){e=k._subplots.ternary||[];for(g=0;g<e.length;g++){var p=e[g],n=k[p]._subplot;!a[p]&&n&&(n.plotContainer.remove(),n.clipDef.remove(),n.clipDefRelative.remove(),n.layers["a-title"].remove(),n.layers["b-title"].remove(),n.layers["c-title"].remove())}}},{"../../lib":749,"../../plots/get_data":834,"./layout_attributes":877,
"./layout_defaults":878,"./ternary":879}],877:[function(b,F,C){C=b("../../components/color/attributes");var m=b("../domain").attributes,h=b("../cartesian/layout_attributes"),l=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/extend").extendFlat;b={title:{text:h.title.text,font:h.title.font},color:h.color,tickmode:h.tickmode,nticks:b({},h.nticks,{dflt:6,min:1}),tick0:h.tick0,dtick:h.dtick,tickvals:h.tickvals,ticktext:h.ticktext,ticks:h.ticks,ticklen:h.ticklen,tickwidth:h.tickwidth,tickcolor:h.tickcolor,
showticklabels:h.showticklabels,showtickprefix:h.showtickprefix,tickprefix:h.tickprefix,showticksuffix:h.showticksuffix,ticksuffix:h.ticksuffix,showexponent:h.showexponent,exponentformat:h.exponentformat,separatethousands:h.separatethousands,tickfont:h.tickfont,tickangle:h.tickangle,tickformat:h.tickformat,tickformatstops:h.tickformatstops,hoverformat:h.hoverformat,showline:b({},h.showline,{dflt:!0}),linecolor:h.linecolor,linewidth:h.linewidth,showgrid:b({},h.showgrid,{dflt:!0}),gridcolor:h.gridcolor,
gridwidth:h.gridwidth,layer:h.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:h._deprecated.title,titlefont:h._deprecated.titlefont}};F=F.exports=l({domain:m({name:"ternary"}),bgcolor:{valType:"color",dflt:C.background},sum:{valType:"number",dflt:1,min:0},aaxis:b,baxis:b,caxis:b},"plot","from-root");F.uirevision={valType:"any",editType:"none"};F.aaxis.uirevision=F.baxis.uirevision=F.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":614,"../../lib/extend":739,
"../../plot_api/edit_types":780,"../cartesian/layout_attributes":811,"../domain":824}],878:[function(b,F,C){function m(q,r,u,v){var w=u("bgcolor");u=u("sum");v.bgColor=l.combine(w,v.paper_bgcolor);for(var y,D,x=0;x<d.length;x++)w=d[x],y=q[w]||{},D=e.newContainer(r,w),D._name=w,h(y,D,v,r);v=r.aaxis;w=r.baxis;r=r.caxis;v.min+w.min+r.min>=u&&(v.min=0,w.min=0,r.min=0,q.aaxis&&delete q.aaxis.min,q.baxis&&delete q.baxis.min,q.caxis&&delete q.caxis.min)}function h(q,r,u,v){function w(t,G){return a.coerce(q,
r,y,t,G)}var y=f[r._name];w("uirevision",v.uirevision);r.type="linear";v=w("color");var D=v!==y.color.dflt?v:u.font.color,x=r._name.charAt(0).toUpperCase(),E="Component "+x,B=w("title.text",E);r._hovertitle=B===E?B:x;a.coerceFont(w,"title.font",{family:u.font.family,size:Math.round(1.2*u.font.size),color:D});w("min");n(q,r,w,"linear");k(q,r,w,"linear",{});p(q,r,w,{outerTicks:!0});w("showticklabels")&&(a.coerceFont(w,"tickfont",{family:u.font.family,size:u.font.size,color:D}),w("tickangle"),w("tickformat"));
c(q,r,w,{dfltColor:v,bgColor:u.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:y});w("hoverformat");w("layer")}var l=b("../../components/color"),e=b("../../plot_api/plot_template"),a=b("../../lib"),g=b("../subplot_defaults"),k=b("../cartesian/tick_label_defaults"),p=b("../cartesian/tick_mark_defaults"),n=b("../cartesian/tick_value_defaults"),c=b("../cartesian/line_grid_defaults"),f=b("./layout_attributes"),d=["aaxis","baxis","caxis"];F.exports=function(q,r,u){g(q,r,u,{type:"ternary",
attributes:f,handleDefaults:m,font:r.font,paper_bgcolor:r.paper_bgcolor})}},{"../../components/color":615,"../../lib":749,"../../plot_api/plot_template":787,"../cartesian/line_grid_defaults":813,"../cartesian/tick_label_defaults":818,"../cartesian/tick_mark_defaults":819,"../cartesian/tick_value_defaults":820,"../subplot_defaults":874,"./layout_attributes":877}],879:[function(b,F,C){function m(H,J){this.id=H.id;this.graphDiv=H.graphDiv;this.init(J);this.makeFramework(J);this.cTickLayout=this.bTickLayout=
this.aTickLayout=null}function h(H){l.select(H).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var l=b("d3"),e=b("tinycolor2"),a=b("../../registry"),g=b("../../lib"),k=g._,p=b("../../components/color"),n=b("../../components/drawing"),c=b("../cartesian/set_convert"),f=b("../../lib/extend").extendFlat,d=b("../plots"),q=b("../cartesian/axes"),r=b("../../components/dragelement"),u=b("../../components/fx");C=b("../../components/dragelement/helpers");var v=C.freeMode,
w=C.rectMode,y=b("../../components/titles"),D=b("../cartesian/select").prepSelect,x=b("../cartesian/select").selectOnClick,E=b("../cartesian/select").clearSelect,B=b("../cartesian/select").clearSelectionsCache,t=b("../cartesian/constants");F.exports=m;b=m.prototype;b.init=function(H){this.container=H._ternarylayer;this.defs=H._defs;this.layoutId=H._uid;this.traceHash={};this.layers={}};b.plot=function(H,J){var O=J[this.id];J=J._size;this._hasClipOnAxisFalse=!1;for(var Q=0;Q<H.length;Q++)if(!1===H[Q][0].trace.cliponaxis){this._hasClipOnAxisFalse=
!0;break}this.updateLayers(O);this.adjustLayout(O,J);d.generalUpdatePerTraceModule(this.graphDiv,this,H,O);this.layers.plotbg.select("path").call(p.fill,O.bgcolor)};b.makeFramework=function(H){var J=this.graphDiv,O=H[this.id],Q=this.clipId="clip"+this.layoutId+this.id,U=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=g.ensureSingleById(H._clips,"clipPath",Q,function(P){P.append("path").attr("d","M0,0Z")});this.clipDefRelative=g.ensureSingleById(H._clips,"clipPath",U,function(P){P.append("path").attr("d",
"M0,0Z")});this.plotContainer=g.ensureSingle(this.container,"g",this.id);this.updateLayers(O);n.setClipUrl(this.layers.backplot,Q,J);n.setClipUrl(this.layers.grids,Q,J)};b.updateLayers=function(H){var J=this.layers,O=["draglayer","plotbg","backplot","grids"];"below traces"===H.aaxis.layer&&O.push("aaxis","aline");"below traces"===H.baxis.layer&&O.push("baxis","bline");"below traces"===H.caxis.layer&&O.push("caxis","cline");O.push("frontplot");"above traces"===H.aaxis.layer&&O.push("aaxis","aline");
"above traces"===H.baxis.layer&&O.push("baxis","bline");"above traces"===H.caxis.layer&&O.push("caxis","cline");H=this.plotContainer.selectAll("g.toplevel").data(O,String);var Q=["agrid","bgrid","cgrid"];H.enter().append("g").attr("class",function(U){return"toplevel "+U}).each(function(U){var P=l.select(this);J[U]=P;"frontplot"===U?P.append("g").classed("scatterlayer",!0):"backplot"===U?P.append("g").classed("maplayer",!0):"plotbg"===U?P.append("path").attr("d","M0,0Z"):"aline"===U||"bline"===U||
"cline"===U?P.append("path"):"grids"===U&&Q.forEach(function(V){J[V]=P.append("g").classed("grid "+V,!0)})});H.order()};var G=Math.sqrt(4/3);b.adjustLayout=function(H,J){var O=this,Q=H.domain,U=(Q.x[0]+Q.x[1])/2,P=(Q.y[0]+Q.y[1])/2,V=Q.x[1]-Q.x[0],Y=Q.y[1]-Q.y[0],ba=V*J.w,ea=Y*J.h,ca=H.sum,ia=H.aaxis.min,fa=H.baxis.min,ha=H.caxis.min;if(ba>G*ea){var na=ea;Q=na*G}else Q=ba,na=Q/G;ba=V*Q/ba;Y=Y*na/ea;V=J.l+J.w*U-Q/2;J=J.t+J.h*(1-P)-na/2;O.x0=V;O.y0=J;O.w=Q;O.h=na;O.sum=ca;O.xaxis={type:"linear",range:[ia+
2*ha-ca,ca-ia-2*fa],domain:[U-ba/2,U+ba/2],_id:"x"};c(O.xaxis,O.graphDiv._fullLayout);O.xaxis.setScale();O.xaxis.isPtWithinRange=function(pa){return pa.a>=O.aaxis.range[0]&&pa.a<=O.aaxis.range[1]&&pa.b>=O.baxis.range[1]&&pa.b<=O.baxis.range[0]&&pa.c>=O.caxis.range[1]&&pa.c<=O.caxis.range[0]};O.yaxis={type:"linear",range:[ia,ca-fa-ha],domain:[P-Y/2,P+Y/2],_id:"y"};c(O.yaxis,O.graphDiv._fullLayout);O.yaxis.setScale();O.yaxis.isPtWithinRange=function(){return!0};ba=O.yaxis.domain[0];U=O.aaxis=f({},H.aaxis,
{range:[ia,ca-fa-ha],side:"left",tickangle:(+H.aaxis.tickangle||0)-30,domain:[ba,ba+Y*G],anchor:"free",position:0,_id:"y",_length:Q});c(U,O.graphDiv._fullLayout);U.setScale();P=O.baxis=f({},H.baxis,{range:[ca-ia-ha,fa],side:"bottom",domain:O.xaxis.domain,anchor:"free",position:0,_id:"x",_length:Q});c(P,O.graphDiv._fullLayout);P.setScale();H=O.caxis=f({},H.caxis,{range:[ca-ia-fa,ha],side:"right",tickangle:(+H.caxis.tickangle||0)+30,domain:[ba,ba+Y*G],anchor:"free",position:0,_id:"y",_length:Q});c(H,
O.graphDiv._fullLayout);H.setScale();ca="M"+V+","+(J+na)+"h"+Q+"l-"+Q/2+",-"+na+"Z";O.clipDef.select("path").attr("d",ca);O.layers.plotbg.select("path").attr("d",ca);ca="M0,"+na+"h"+Q+"l-"+Q/2+",-"+na+"Z";O.clipDefRelative.select("path").attr("d",ca);ca="translate("+V+","+J+")";O.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ca);O.clipDefRelative.select("path").attr("transform",null);ca="translate("+(V-P._offset)+","+(J+na)+")";O.layers.baxis.attr("transform",ca);O.layers.bgrid.attr("transform",
ca);ca="translate("+(V+Q/2)+","+J+")rotate(30)translate(0,"+-U._offset+")";O.layers.aaxis.attr("transform",ca);O.layers.agrid.attr("transform",ca);ca="translate("+(V+Q/2)+","+J+")rotate(-30)translate(0,"+-H._offset+")";O.layers.caxis.attr("transform",ca);O.layers.cgrid.attr("transform",ca);O.drawAxes(!0);O.layers.aline.select("path").attr("d",U.showline?"M"+V+","+(J+na)+"l"+Q/2+",-"+na:"M0,0").call(p.stroke,U.linecolor||"#000").style("stroke-width",(U.linewidth||0)+"px");O.layers.bline.select("path").attr("d",
P.showline?"M"+V+","+(J+na)+"h"+Q:"M0,0").call(p.stroke,P.linecolor||"#000").style("stroke-width",(P.linewidth||0)+"px");O.layers.cline.select("path").attr("d",H.showline?"M"+(V+Q/2)+","+J+"l"+Q/2+","+na:"M0,0").call(p.stroke,H.linecolor||"#000").style("stroke-width",(H.linewidth||0)+"px");O.graphDiv._context.staticPlot||O.initInteractions();n.setClipUrl(O.layers.frontplot,O._hasClipOnAxisFalse?null:O.clipId,O.graphDiv)};b.drawAxes=function(H){var J=this.graphDiv,O=this.id.substr(7)+"title",Q=this.layers,
U=this.aaxis,P=this.baxis,V=this.caxis;this.drawAx(U);this.drawAx(P);this.drawAx(V);if(H){H=Math.max(U.showticklabels?U.tickfont.size/2:0,(V.showticklabels?.75*V.tickfont.size:0)+("outside"===V.ticks?.87*V.ticklen:0));var Y=(P.showticklabels?P.tickfont.size:0)+("outside"===P.ticks?P.ticklen:0)+3;Q["a-title"]=y.draw(J,"a"+O,{propContainer:U,propName:this.id+".aaxis.title",placeholder:k(J,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-U.title.font.size/3-H,"text-anchor":"middle"}});
Q["b-title"]=y.draw(J,"b"+O,{propContainer:P,propName:this.id+".baxis.title",placeholder:k(J,"Click to enter Component B title"),attributes:{x:this.x0-Y,y:this.y0+this.h+.83*P.title.font.size+Y,"text-anchor":"middle"}});Q["c-title"]=y.draw(J,"c"+O,{propContainer:V,propName:this.id+".caxis.title",placeholder:k(J,"Click to enter Component C title"),attributes:{x:this.x0+this.w+Y,y:this.y0+this.h+.83*V.title.font.size+Y,"text-anchor":"middle"}})}};b.drawAx=function(H){var J=this.graphDiv,O=H._name,Q=
O.charAt(0),U=H._id;O=this.layers[O];var P=Q+"tickLayout",V=H.ticks+String(H.ticklen)+String(H.showticklabels);this[P]!==V&&(O.selectAll("."+U+"tick").remove(),this[P]=V);H.setScale();U=q.calcTicks(H);P=q.clipEnds(H,U);V=q.makeTransFn(H);var Y=q.getTickSigns(H)[2],ba=g.deg2rad(30),ea=Y*(H.linewidth||1)/2;Y*=H.ticklen;var ca=this.w,ia=this.h;ca={a:"M0,0l"+ia+",-"+ca/2,b:"M0,0l-"+ca/2+",-"+ia,c:"M0,0l-"+ia+","+ca/2}[Q];q.drawTicks(J,H,{vals:"inside"===H.ticks?P:U,layer:O,path:"b"===Q?"M0,"+ea+"l"+Math.sin(ba)*
Y+","+Math.cos(ba)*Y:"M"+ea+",0l"+Math.cos(ba)*Y+","+-Math.sin(ba)*Y,transFn:V,crisp:!1});q.drawGrid(J,H,{vals:P,layer:this.layers[Q+"grid"],path:ca,transFn:V,crisp:!1});q.drawLabels(J,H,{vals:U,layer:O,transFn:V,labelFns:q.makeLabelFns(H,0,30)})};F=t.MINZOOM/2+.87;var I="m-0.87,.5h"+F+"v3h-"+(F+5.2)+"l"+(F/2+2.6)+",-"+(.87*F+4.5)+"l2.6,1.5l-"+F/2+","+.87*F+"Z",L="m0.87,.5h-"+F+"v3h"+(F+5.2)+"l-"+(F/2+2.6)+",-"+(.87*F+4.5)+"l-2.6,1.5l"+F/2+","+.87*F+"Z",M="m0,1l"+F/2+","+.87*F+"l2.6,-1.5l-"+(F/2+
2.6)+",-"+(.87*F+4.5)+"l-"+(F/2+2.6)+","+(.87*F+4.5)+"l2.6,1.5l"+F/2+",-"+.87*F+"Z",N=!0;b.clearSelect=function(){B(this.dragOptions);E(this.dragOptions.gd)};b.initInteractions=function(){function H(ka){var sa={};sa[V.id+".aaxis.min"]=ka.a;sa[V.id+".baxis.min"]=ka.b;sa[V.id+".caxis.min"]=ka.c;return sa}function J(ka,sa){var ya=ba._fullLayout.clickmode;h(ba);2===ka&&(ba.emit("plotly_doubleclick",null),a.call("_guiRelayout",ba,H({a:0,b:0,c:0})));-1<ya.indexOf("select")&&1===ka&&x(sa,ba,[V.xaxis],[V.yaxis],
V.id,V.dragOptions);-1<ya.indexOf("event")&&u.click(ba,sa,V.id)}function O(ka,sa){var ya=ca+ka,qa=ia+sa;sa=Math.max(0,Math.min(1,1-ia/V.h,1-qa/V.h));ka=Math.max(0,Math.min(1,1-(ca+(V.h-ia)/Math.sqrt(3))/V.w,1-(ya+(V.h-qa)/Math.sqrt(3))/V.w));ya=Math.max(0,Math.min(1,(ca-(V.h-ia)/Math.sqrt(3))/V.w,(ya-(V.h-qa)/Math.sqrt(3))/V.w));qa=(sa/2+ya)*V.w;var xa=(1-sa/2-ka)*V.w,Ca=(qa+xa)/2,Ja=xa-qa,eb=(1-sa)*V.h,Ra=eb-Ja/G;Ja<t.MINZOOM?(na=fa,oa.attr("d",ra),ua.attr("d","M0,0Z")):(na={a:fa.a+sa*ha,b:fa.b+
ka*ha,c:fa.c+ya*ha},oa.attr("d",ra+"M"+qa+","+eb+"H"+xa+"L"+Ca+","+Ra+"L"+qa+","+eb+"Z"),ua.attr("d","M"+ca+","+ia+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+qa+","+eb+I+"M"+xa+","+eb+L+"M"+Ca+","+Ra+M));ta||(oa.transition().style("fill",.2<pa?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ua.transition().style("opacity",1).duration(200),ta=!0);ba.emit("plotly_relayouting",H(na))}function Q(){h(ba);na!==fa&&(a.call("_guiRelayout",ba,H(na)),N&&ba.data&&ba._context.showTips&&(g.notifier(k(ba,
"Double-click to zoom back out"),"long"),N=!1))}function U(ka,sa){var ya=ka/V.xaxis._m,qa=sa/V.yaxis._m;na={a:fa.a-qa,b:fa.b+(ya+qa)/2,c:fa.c-(ya-qa)/2};ya=[na.a,na.b,na.c].sort(g.sorterAsc);qa=ya.indexOf(na.a);var xa=ya.indexOf(na.b),Ca=ya.indexOf(na.c);0>ya[0]&&(0>ya[1]+ya[0]/2?(ya[2]+=ya[0]+ya[1],ya[0]=ya[1]=0):(ya[2]+=ya[0]/2,ya[1]+=ya[0]/2,ya[0]=0),na={a:ya[qa],b:ya[xa],c:ya[Ca]},sa=(fa.a-na.a)*V.yaxis._m,ka=(fa.c-na.c-fa.b+na.b)*V.xaxis._m);ya="translate("+(V.x0+ka)+","+(V.y0+sa)+")";V.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",
ya);ka="translate("+-ka+","+-sa+")";V.clipDefRelative.select("path").attr("transform",ka);V.aaxis.range=[na.a,V.sum-na.b-na.c];V.baxis.range=[V.sum-na.a-na.c,na.b];V.caxis.range=[V.sum-na.a-na.b,na.c];V.drawAxes(!1);V._hasClipOnAxisFalse&&V.plotContainer.select(".scatterlayer").selectAll(".trace").call(n.hideOutsideRangePoints,V);ba.emit("plotly_relayouting",H(na))}function P(){a.call("_guiRelayout",ba,H(na))}var V=this,Y=V.layers.plotbg.select("path").node(),ba=V.graphDiv,ea=ba._fullLayout._zoomlayer;
this.dragOptions={element:Y,gd:ba,plotinfo:{id:V.id,domain:ba._fullLayout[V.id].domain,xaxis:V.xaxis,yaxis:V.yaxis},subplot:V.id,prepFn:function(ka,sa,ya){V.dragOptions.xaxes=[V.xaxis];V.dragOptions.yaxes=[V.yaxis];var qa=V.dragOptions.dragmode=ba._fullLayout.dragmode;v(qa)?V.dragOptions.minDrag=1:V.dragOptions.minDrag=void 0;"zoom"===qa?(V.dragOptions.moveFn=O,V.dragOptions.clickFn=J,V.dragOptions.doneFn=Q,ka=Y.getBoundingClientRect(),ca=sa-ka.left,ia=ya-ka.top,na=fa={a:V.aaxis.range[0],b:V.baxis.range[1],
c:V.caxis.range[1]},ha=V.aaxis.range[1]-fa.a,pa=e(V.graphDiv._fullLayout[V.id].bgcolor).getLuminance(),ra="M0,"+V.h+"L"+V.w/2+", 0L"+V.w+","+V.h+"Z",ta=!1,oa=ea.append("path").attr("class","zoombox").attr("transform","translate("+V.x0+", "+V.y0+")").style({fill:.2<pa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ra),ua=ea.append("path").attr("class","zoombox-corners").attr("transform","translate("+V.x0+", "+V.y0+")").style({fill:p.background,stroke:p.defaultLine,"stroke-width":1,
opacity:0}).attr("d","M0,0Z"),V.clearSelect(ba)):"pan"===qa?(V.dragOptions.moveFn=U,V.dragOptions.clickFn=J,V.dragOptions.doneFn=P,na=fa={a:V.aaxis.range[0],b:V.baxis.range[1],c:V.caxis.range[1]},V.clearSelect(ba)):(w(qa)||v(qa))&&D(ka,sa,ya,V.dragOptions,qa)}};var ca,ia,fa,ha,na,pa,ra,ta,oa,ua;Y.onmousemove=function(ka){u.hover(ba,ka,V.id);ba._fullLayout._lasthover=Y;ba._fullLayout._hoversubplot=V.id};Y.onmouseout=function(ka){ba._dragging||r.unhover(ba,ka)};r.init(this.dragOptions)}},{"../../components/color":615,
"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../components/titles":710,"../../lib":749,"../../lib/extend":739,"../../registry":880,"../cartesian/axes":797,"../cartesian/constants":803,"../cartesian/select":816,"../cartesian/set_convert":817,"../plots":860,d3:169,tinycolor2:548}],880:[function(b,F,C){function m(u){if(u.layoutAttributes&&(u=u.layoutAttributes._arrayAttrRegexps))for(var v=0;v<u.length;v++)p(C.layoutArrayRegexes,
u[v])}function h(u,v){(u=C.componentsRegistry[u].schema)&&u.traces&&(u=u.traces[v])&&r(C.modules[v]._module.attributes,u)}function l(u,v){(u=C.componentsRegistry[u].schema)&&u.transforms&&(u=u.transforms[v])&&r(C.transformsRegistry[v].attributes,u)}function e(u,v){if((u=C.componentsRegistry[u].schema)&&u.subplots){var w=C.subplotsRegistry[v];v=w.layoutAttributes;w="subplot"===w.attr?w.name:w.attr;Array.isArray(w)&&(w=w[0]);u=u.subplots[w];v&&u&&r(v,u)}}function a(u){"object"===typeof u&&(u=u.type);
return u}var g=b("./lib/loggers"),k=b("./lib/noop"),p=b("./lib/push_unique"),n=b("./lib/is_plain_object"),c=b("./lib/dom").addStyleRule;F=b("./lib/extend");var f=b("./plots/attributes"),d=b("./plots/layout_attributes"),q=F.extendFlat,r=F.extendDeepAll;C.modules={};C.allCategories={};C.allTypes=[];C.subplotsRegistry={};C.transformsRegistry={};C.componentsRegistry={};C.layoutArrayContainers=[];C.layoutArrayRegexes=[];C.traceLayoutAttributes={};C.localeRegistry={};C.apiMethodRegistry={};C.collectableSubplotTypes=
null;C.register=function(u){C.collectableSubplotTypes=null;if(u)u&&!Array.isArray(u)&&(u=[u]);else throw Error("No argument passed to Plotly.register.");for(var v=0;v<u.length;v++){var w=u[v];if(!w)throw Error("Invalid module was attempted to be registered!");switch(w.moduleType){case "trace":var y=void 0,D=void 0,x=w.name,E=w.categories,B=w.meta;if(C.modules[x])g.log("Type "+x+" already registered");else{if(!C.subplotsRegistry[w.basePlotModule.name]){var t=void 0,G=w.basePlotModule,I=G.name;if(C.subplotsRegistry[I])g.log("Plot type "+
I+" already registered.");else for(t in m(G),C.subplotsRegistry[I]=G,C.componentsRegistry)e(t,G.name)}t={};for(G=0;G<E.length;G++)t[E[G]]=!0,C.allCategories[E[G]]=!0;C.modules[x]={_module:w,categories:t};B&&Object.keys(B).length&&(C.modules[x].meta=B);C.allTypes.push(x);for(D in C.componentsRegistry)h(D,x);w.layoutAttributes&&q(C.traceLayoutAttributes,w.layoutAttributes);w=w.basePlotModule;D=w.name;if("mapbox"===D)for(y in w=w.constants.styleRules,w)c(".js-plotly-plot .plotly .mapboxgl-"+y,w[y]);
"geo"!==D&&"mapbox"!==D||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}break;case "transform":y=void 0;D=w;if("string"!==typeof D.name)throw Error("Transform module *name* must be a string.");w="Transform module "+D.name;x="function"===typeof D.transform;E="function"===typeof D.calcTransform;if(!x&&!E)throw Error(w+" is missing a *transform* or *calcTransform* method.");x&&E&&g.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));
n(D.attributes)||g.log(w+" registered without an *attributes* object.");"function"!==typeof D.supplyDefaults&&g.log(w+" registered without a *supplyDefaults* method.");C.transformsRegistry[D.name]=D;for(y in C.componentsRegistry)l(y,D.name);break;case "component":x=D=y=void 0;if("string"!==typeof w.name)throw Error("Component module *name* must be a string.");E=w.name;C.componentsRegistry[E]=w;w.layoutAttributes&&(w.layoutAttributes._isLinkedToArray&&p(C.layoutArrayContainers,E),m(w));for(x in C.modules)h(E,
x);for(D in C.subplotsRegistry)e(E,D);for(y in C.transformsRegistry)l(E,y);w.schema&&w.schema.layout&&r(d,w.schema.layout);break;case "locale":x=w;w=x.name;y=w.split("-")[0];D=x.dictionary;x=x.format;E=D&&Object.keys(D).length;B=x&&Object.keys(x).length;t=C.localeRegistry;(G=t[w])||(t[w]=G={});y!==w&&((w=t[y])||(t[y]=w={}),E&&w.dictionary===G.dictionary&&(w.dictionary=D),B&&w.format===G.format&&(w.format=x));E&&(G.dictionary=D);B&&(G.format=x);break;case "apiMethod":C.apiMethodRegistry[w.name]=w.fn;
break;default:throw Error("Invalid module was attempted to be registered!");}}};C.getModule=function(u){return(u=C.modules[a(u)])?u._module:!1};C.traceIs=function(u,v){u=a(u);if("various"===u)return!1;var w=C.modules[u];w||(u&&"area"!==u&&g.log("Unrecognized trace type "+u+"."),w=C.modules[f.type.dflt]);return!!w.categories[v]};C.getTransformIndices=function(u,v){var w=[];u=u.transforms||[];for(var y=0;y<u.length;y++)u[y].type===v&&w.push(y);return w};C.hasTransform=function(u,v){u=u.transforms||
[];for(var w=0;w<u.length;w++)if(u[w].type===v)return!0;return!1};C.getComponentMethod=function(u,v){return(u=C.componentsRegistry[u])?u[v]||k:k};C.call=function(){var u=arguments[0],v=[].slice.call(arguments,1);return C.apiMethodRegistry[u].apply(null,v)}},{"./lib/dom":737,"./lib/extend":739,"./lib/is_plain_object":750,"./lib/loggers":753,"./lib/noop":758,"./lib/push_unique":763,"./plots/attributes":794,"./plots/layout_attributes":851}],881:[function(b,F,C){function m(a){switch(a){case "themes__thumb":a=
{autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}var h=b("../registry");b=b("../lib");var l=b.extendFlat,e=b.extendDeep;F.exports=function(a,g){a.framework&&a.framework.isPolar&&(a=a.framework.getConfig());var k,p=a.layout,n=e([],a.data);p=e({},p,m(g.tileClass));a=
a._context||{};g.width&&(p.width=g.width);g.height&&(p.height=g.height);if("thumbnail"===g.tileClass||"themes__thumb"===g.tileClass){p.annotations=[];var c=Object.keys(p);for(k=0;k<c.length;k++)-1<["xaxis","yaxis","zaxis"].indexOf(c[k].slice(0,5))&&(p[c[k]].title={text:""});for(k=0;k<n.length;k++)c=n[k],c.showscale=!1,c.marker&&(c.marker.showscale=!1),h.traceIs(c,"pie-like")&&(c.textposition="none")}if(Array.isArray(g.annotations))for(k=0;k<g.annotations.length;k++)p.annotations.push(g.annotations[k]);
c=Object.keys(p).filter(function(q){return q.match(/^scene\d*$/)});if(c.length){var f={};"thumbnail"===g.tileClass&&(f={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1});for(k=0;k<c.length;k++){var d=p[c[k]];d.xaxis||(d.xaxis={});d.yaxis||(d.yaxis={});d.zaxis||(d.zaxis={});l(d.xaxis,f);l(d.yaxis,f);l(d.zaxis,f);d._scene=null}}k=document.createElement("div");g.tileClass&&(k.className=g.tileClass);n={gd:k,td:k,layout:p,data:n,config:{staticPlot:void 0===g.staticPlot?!0:g.staticPlot,
plotGlPixelRatio:void 0===g.plotGlPixelRatio?2:g.plotGlPixelRatio,displaylogo:g.displaylogo||!1,showLink:g.showLink||!1,showTips:g.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};"transparent"!==g.setBackground&&(n.config.setBackground=g.setBackground||"opaque");n.gd.defaultLayout=m(g.tileClass);return n}},{"../lib":749,"../registry":880}],882:[function(b,F,C){var m=b("../lib"),h=b("../plot_api/to_image"),l=b("./filesaver"),e=b("./helpers");F.exports=function(a,g){var k;m.isPlainObject(a)||(k=
m.getGraphDiv(a));g=g||{};g.format=g.format||"png";g.imageDataOnly=!0;return new Promise(function(p,n){k&&k._snapshotInProgress&&n(Error("Snapshotting already in progress."));m.isIE()&&"svg"!==g.format&&n(Error(e.MSG_IE_BAD_FORMAT));k&&(k._snapshotInProgress=!0);var c=h(a,g),f=g.filename||a.fn||"newplot";f+="."+g.format.replace("-",".");c.then(function(d){k&&(k._snapshotInProgress=!1);return l(d,f,g.format)}).then(function(d){p(d)}).catch(function(d){k&&(k._snapshotInProgress=!1);n(d)})})}},{"../lib":749,
"../plot_api/to_image":790,"./filesaver":883,"./helpers":884}],883:[function(b,F,C){var m=b("../lib"),h=b("./helpers");F.exports=function(l,e,a){var g=document.createElement("a"),k="download"in g;return new Promise(function(p,n){m.isIE9orBelow()&&n(Error("IE \x3c 10 unsupported"));if(m.isSafari())return h.octetStream(("svg"===a?",":";base64,")+encodeURIComponent(l)),p(e);if(m.isIE())return n=h.createBlob(l,"svg"),window.navigator.msSaveBlob(n,e),p(e);if(k)return n=h.createBlob(l,a),n=h.createObjectURL(n),
g.href=n,g.download=e,document.body.appendChild(g),g.click(),document.body.removeChild(g),h.revokeObjectURL(n),p(e);n(Error("download error"))})}},{"../lib":749,"./helpers":884}],884:[function(b,F,C){var m=b("../registry");C.getDelay=function(l){return l._has?l._has("gl3d")||l._has("gl2d")||l._has("mapbox")?500:0:0};C.getRedrawFunc=function(l){return function(){var e=l._fullLayout||{};(e._has&&e._has("polar")||!l.data||!l.data[0]||!l.data[0].r)&&m.getComponentMethod("colorbar","draw")(l)}};C.encodeSVG=
function(l){return"data:image/svg+xml,"+encodeURIComponent(l)};C.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var h=window.URL||window.webkitURL;C.createObjectURL=function(l){return h.createObjectURL(l)};C.revokeObjectURL=function(l){return h.revokeObjectURL(l)};C.createBlob=function(l,e){if("svg"===e)return new window.Blob([l],{type:"image/svg+xml;charset\x3dutf-8"});if("full-json"===e)return new window.Blob([l],{type:"application/json;charset\x3dutf-8"});l=window.atob(l);
for(var a=l.length,g=new ArrayBuffer(a),k=new Uint8Array(g),p=0;p<a;p++)k[p]=l.charCodeAt(p);return new window.Blob([g],{type:"image/"+e})};C.octetStream=function(l){document.location.href="data:application/octet-stream"+l};C.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;C.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":880}],885:[function(b,F,C){C=b("./helpers");b={getDelay:C.getDelay,getRedrawFunc:C.getRedrawFunc,clone:b("./cloneplot"),
toSVG:b("./tosvg"),svgToImg:b("./svgtoimg"),toImage:b("./toimage"),downloadImage:b("./download")};F.exports=b},{"./cloneplot":881,"./download":882,"./helpers":884,"./svgtoimg":886,"./toimage":887,"./tosvg":888}],886:[function(b,F,C){var m=b("../lib"),h=b("events").EventEmitter,l=b("./helpers");F.exports=function(e){var a=e.emitter||new h,g=new Promise(function(k,p){var n=window.Image,c=e.svg,f=e.format||"png";if(m.isIE()&&"svg"!==f)return n=Error(l.MSG_IE_BAD_FORMAT),p(n),e.promise?g:a.emit("error",
n);var d=e.canvas,q=e.scale||1,r=q*(e.width||300),u=q*(e.height||150),v=d.getContext("2d"),w=new n;if("svg"===f||m.isIE9orBelow()||m.isSafari())var y=l.encodeSVG(c);else{var D=l.createBlob(c,"svg");y=l.createObjectURL(D)}d.width=r;d.height=u;w.onload=function(){D=null;l.revokeObjectURL(y);"svg"!==f&&v.drawImage(w,0,0,r,u);switch(f){case "jpeg":var x=d.toDataURL("image/jpeg");break;case "png":x=d.toDataURL("image/png");break;case "webp":x=d.toDataURL("image/webp");break;case "svg":x=y;break;default:if(p(Error("Image format is not jpeg, png, svg or webp.")),
!e.promise)return a.emit("error","Image format is not jpeg, png, svg or webp.")}k(x);e.promise||a.emit("success",x)};w.onerror=function(x){D=null;l.revokeObjectURL(y);p(x);if(!e.promise)return a.emit("error",x)};w.src=y});return e.promise?g:a}},{"../lib":749,"./helpers":884,events:110}],887:[function(b,F,C){var m=b("events").EventEmitter,h=b("../registry"),l=b("../lib"),e=b("./helpers"),a=b("./cloneplot"),g=b("./tosvg"),k=b("./svgtoimg");F.exports=function(p,n){var c=new m;p=a(p,{format:"png"});var f=
p.gd;f.style.position="absolute";f.style.left="-5000px";document.body.appendChild(f);var d=e.getRedrawFunc(f);h.call("plot",f,p.data,p.layout,p.config).then(d).then(function(){var q=e.getDelay(f._fullLayout);setTimeout(function(){var r=g(f),u=document.createElement("canvas");u.id=l.randstr();c=k({format:n.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:u,emitter:c,svg:r});c.clean=function(){f&&document.body.removeChild(f)}},q)}).catch(function(q){c.emit("error",q)});return c}},
{"../lib":749,"../registry":880,"./cloneplot":881,"./helpers":884,"./svgtoimg":886,"./tosvg":888,events:110}],888:[function(b,F,C){function m(n){var c=h.select("body").append("div").style({display:"none"}).html("");n=n.replace(/(&[^;]*;)/gi,function(f){return"\x26lt;"===f?"\x26#60;":"\x26rt;"===f?"\x26#62;":-1!==f.indexOf("\x3c")||-1!==f.indexOf("\x3e")?"":c.html(f).text()});c.remove();return n}var h=b("d3"),l=b("../lib"),e=b("../components/drawing"),a=b("../components/color"),g=b("../constants/xmlns_namespaces"),
k=/"/g,p=/("TOBESTRIPPED)|(TOBESTRIPPED")/g;F.exports=function(n,c,f){var d=n._fullLayout,q=d._paper,r=d._toppaper,u=d.width,v=d.height,w;q.insert("rect",":first-child").call(e.setRect,0,0,u,v).call(a.fill,d.paper_bgcolor);var y=d._basePlotModules||[];for(w=0;w<y.length;w++){var D=y[w];D.toSVG&&D.toSVG(n)}if(r)for(w=r.node().childNodes,n=Array.prototype.slice.call(w),w=0;w<n.length;w++)r=n[w],r.childNodes.length&&q.node().appendChild(r);d._draggers&&d._draggers.remove();q.node().style.background=
"";q.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var E=h.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)E.remove();else{E.style({visibility:null,display:null});var B=this.style.fontFamily;B&&-1!==B.indexOf('"')&&E.style("font-family",B.replace(k,"TOBESTRIPPED"))}});if(d._gradientUrlQueryParts){w=[];for(var x in d._gradientUrlQueryParts)w.push(x);w.length&&q.selectAll(w.join(",")).each(function(){var E=h.select(this),B=this.style.fill;
B&&-1!==B.indexOf("url(")&&E.style("fill",B.replace(k,"TOBESTRIPPED"));(B=this.style.stroke)&&-1!==B.indexOf("url(")&&E.style("stroke",B.replace(k,"TOBESTRIPPED"))})}"pdf"!==c&&"eps"!==c||q.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);q.node().setAttributeNS(g.xmlns,"xmlns",g.svg);q.node().setAttributeNS(g.xmlns,"xmlns:xlink",g.xlink);"svg"===c&&f&&(q.attr("width",f*u),q.attr("height",f*v),q.attr("viewBox","0 0 "+u+" "+v));c=(new window.XMLSerializer).serializeToString(q.node());c=
m(c);c=c.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,"\x26amp;");c=c.replace(p,"'");l.isIE()&&(c=c.replace(/"/gi,"'"),c=c.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),c=c.replace(/(\\')/gi,'"'));return c}},{"../components/color":615,"../components/drawing":637,"../constants/xmlns_namespaces":725,"../lib":749,d3:169}],889:[function(b,F,C){var m=b("../../lib");F.exports=function(h,l){for(var e=0;e<h.length;e++)h[e].i=e;m.mergeArray(l.text,h,"tx");m.mergeArray(l.hovertext,h,"htx");if(l=l.marker)if(m.mergeArray(l.opacity,
h,"mo",!0),m.mergeArray(l.color,h,"mc"),l=l.line)m.mergeArray(l.color,h,"mlc"),m.mergeArrayCastPositive(l.width,h,"mlw")}},{"../../lib":749}],890:[function(b,F,C){C=b("../scatter/attributes");var m=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/template_attributes").texttemplateAttrs,l=b("../../components/colorscale/attributes"),e=b("../../plots/font_attributes"),a=b("./constants");b=b("../../lib/extend").extendFlat;e=e({editType:"calc",arrayOk:!0,colorEditType:"style"});
var g=b({},C.marker.line.width,{dflt:0});g=b({width:g,editType:"calc"},l("marker.line"));l=b({line:g,editType:"calc"},l("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});F.exports={x:C.x,x0:C.x0,dx:C.dx,y:C.y,y0:C.y0,dy:C.dy,text:C.text,texttemplate:h({editType:"plot"},{keys:a.eventDataKeys}),hovertext:C.hovertext,hovertemplate:m({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},
insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:b({},e,{}),insidetextfont:b({},e,{}),outsidetextfont:b({},e,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:b({},C.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},
offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:C.selected.marker.opacity,color:C.selected.marker.color,editType:"style"},textfont:C.selected.textfont,editType:"style"},unselected:{marker:{opacity:C.unselected.marker.opacity,color:C.unselected.marker.color,editType:"style"},
textfont:C.unselected.textfont,editType:"style"},r:C.r,t:C.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/font_attributes":825,"../../plots/template_attributes":875,"../scatter/attributes":1155,"./constants":892}],891:[function(b,F,C){var m=b("../../plots/cartesian/axes"),h=b("../../components/colorscale/helpers").hasColorscale,l=b("../../components/colorscale/calc"),e=b("./arrays_to_calcdata"),
a=b("../scatter/calc_selection");F.exports=function(g,k){var p=m.getFromId(g,k.xaxis||"x"),n=m.getFromId(g,k.yaxis||"y");var c={msUTC:!(!k.base&&0!==k.base)};"h"===k.orientation?(c=p.makeCalcdata(k,"x",c),p=n.makeCalcdata(k,"y")):(c=n.makeCalcdata(k,"y",c),p=p.makeCalcdata(k,"x"));n=Math.min(p.length,c.length);for(var f=Array(n),d=0;d<n;d++)f[d]={p:p[d],s:c[d]},k.ids&&(f[d].id=String(k.ids[d]));h(k,"marker")&&l(g,k,{vals:k.marker.color,containerStr:"marker",cLetter:"c"});h(k,"marker.line")&&l(g,k,
{vals:k.marker.line.color,containerStr:"marker.line",cLetter:"c"});e(f,k);a(f,k);return f}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157,"./arrays_to_calcdata":889}],892:[function(b,F,C){F.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],893:[function(b,F,C){function m(D,x,E,B,t){if(B.length){var G;h(E,B);switch(t.mode){case "overlay":l(x,E,B,t);break;case "group":var I=[];var L=[];for(G=
0;G<B.length;G++){var M=B[G];var N=M[0].trace;void 0===N.offset?L.push(M):I.push(M)}if(L.length){L=new y(L,{sepNegVal:!1,overlapNoMerge:!t.norm});var H=D._fullLayout;D=L.minDiff;G=L.traces;M=G.length;N=L.positions.length!==L.distinctPositions.length;var J=D*(1-t.gap),O=w(H,x._id)+G[0][0].trace.orientation;H=H._alignmentOpts[O]||{};for(O=0;O<M;O++){var Q=G[O],U=Q[0].trace,P=Object.keys((H[U.alignmentgroup]||{}).offsetGroups||{}).length;var V=P?J/P:N?J/M:J;var Y=V*(1-(t.groupgap||0));U=P?((2*U._offsetIndex+
1-P)*V-Y)/2:N?((2*O+1-M)*V-Y)/2:-Y/2;Q=Q[0].t;Q.barwidth=Y;Q.poffset=U;Q.bargroupwidth=J;Q.bardelta=D}L.binWidth=G[0][0].t.barwidth/100;a(L);g(x,L);k(x,L,N);D=L.traces;for(G=0;G<D.length;G++)if(M=D[G],void 0===M[0].trace.base)for(N=new y([M],{sepNegVal:!0,overlapNoMerge:!0}),J=0;J<M.length;J++)if(H=M[J],H.p!==r&&(O=N.put(H.p,H.b+H.s)))H.b=O;t.norm?(n(L),c(E,L,t)):p(E,L)}I.length&&l(x,E,I,t);break;case "stack":case "relative":I=[];L=[];for(G=0;G<B.length;G++)M=B[G],N=M[0].trace,void 0===N.base?L.push(M):
I.push(M);if(L.length){D=new y(L,{sepNegVal:"relative"===t.mode,overlapNoMerge:!(t.norm||"stack"===t.mode||"relative"===t.mode)});e(x,D,t);G=E._id.charAt(0);M=D.traces;for(O=0;O<M.length;O++)if(N=M[O],J=N[0].trace,"funnel"===J.type)for(Y=0;Y<N.length;Y++)Q=N[Y],Q.s!==r&&D.put(Q.p,-.5*Q.s);for(O=0;O<M.length;O++){N=M[O];J=N[0].trace;H="funnel"===J.type;U=[];for(Y=0;Y<N.length;Y++)Q=N[Y],Q.s!==r&&(V=H?Q.s:Q.s+Q.b,P=D.put(Q.p,V),V=P+V,Q.b=P,Q[G]=V,t.norm||(U.push(V),Q.hasB&&U.push(P)));t.norm||(J._extremes[E._id]=
v.findExtremes(E,U,{tozero:!0,padded:!0}))}for(G=0;G<L.length;G++)for(M=L[G],N=0;N<M.length;N++)J=M[N],J.s!==r&&J.b+J.s===D.get(J.p,J.s)&&(J._outmost=!0);t.norm&&c(E,D,t)}I.length&&l(x,E,I,t)}f(B,x)}}function h(D,x){var E;for(E=0;E<x.length;E++){var B=x[E];var t=B[0].trace;var G="funnel"===t.type?t._base:t.base,I="h"===t.orientation?t.xcalendar:t.ycalendar,L="category"===D.type||"multicategory"===D.type?function(){return null}:D.d2c;if(q(G)){for(t=0;t<Math.min(G.length,B.length);t++){var M=L(G[t],
0,I);d(M)?(B[t].b=+M,B[t].hasB=1):B[t].b=0}for(;t<B.length;t++)B[t].b=0}else for(M=L(G,0,I),M=(G=d(M))?M:0,t=0;t<B.length;t++)B[t].b=M,G&&(B[t].hasB=1)}}function l(D,x,E,B){for(var t=0;t<E.length;t++){var G=new y([E[t]],{unitMinDiff:B.xCat||B.yCat,sepNegVal:!1,overlapNoMerge:!B.norm});e(D,G,B);B.norm?(n(G),c(x,G,B)):p(x,G)}}function e(D,x,E){var B=x.minDiff,t=x.traces,G=B*(1-E.gap);E=G*(1-(E.groupgap||0));for(var I=-E/2,L=0;L<t.length;L++){var M=t[L][0].t;M.barwidth=E;M.poffset=I;M.bargroupwidth=
G;M.bardelta=B}x.binWidth=t[0][0].t.barwidth/100;a(x);g(D,x);k(D,x)}function a(D){D=D.traces;var x,E;for(x=0;x<D.length;x++){var B=D[x],t=B[0],G=t.trace;t=t.t;var I=G._offset||G.offset,L=t.poffset;if(q(I)){var M=Array.prototype.slice.call(I,0,B.length);for(E=0;E<M.length;E++)d(M[E])||(M[E]=L);for(E=M.length;E<B.length;E++)M.push(L);t.poffset=M}else void 0!==I&&(t.poffset=I);E=G._width||G.width;G=t.barwidth;if(q(E)){var N=Array.prototype.slice.call(E,0,B.length);for(E=0;E<N.length;E++)d(N[E])||(N[E]=
G);for(E=N.length;E<B.length;E++)N.push(G);t.barwidth=N;if(void 0===I){M=[];for(E=0;E<B.length;E++)M.push(L+(G-N[E])/2);t.poffset=M}}else void 0!==E&&(t.barwidth=E,void 0===I&&(t.poffset=L+(G-E)/2))}}function g(D,x){x=x.traces;D=D._id.charAt(0);for(var E=0;E<x.length;E++){var B=x[E],t=B[0].t,G=t.poffset,I=Array.isArray(G);t=t.barwidth;for(var L=Array.isArray(t),M=0;M<B.length;M++){var N=B[M],H=N.w=L?t[M]:t;N[D]=N.p+(I?G[M]:G)+H/2}}}function k(D,x,E){var B=x.traces,t=x.minDiff/2;v.minDtick(D,x.minDiff,
x.distinctPositions[0],E);for(x=0;x<B.length;x++){E=B[x];var G=E[0],I=G.trace,L=[],M;for(M=0;M<E.length;M++){var N=E[M];var H=N.p-t;N=N.p+t;L.push(H,N)}if(I.width||I.offset){H=G.t;G=H.poffset;var J=H.barwidth,O=Array.isArray(G),Q=Array.isArray(J);for(M=0;M<E.length;M++){N=E[M];var U=Q?J[M]:J;H=N.p+(O?G[M]:G);N=H+U;L.push(H,N)}}I._extremes[D._id]=v.findExtremes(D,L,{padded:!1})}}function p(D,x){x=x.traces;for(var E=D._id.charAt(0),B=0;B<x.length;B++){for(var t=x[B],G=t[0].trace,I=[],L=!1,M=0;M<t.length;M++){var N=
t[M],H=N.b,J=H+N.s;N[E]=J;I.push(J);N.hasB&&I.push(H);N.hasB&&N.b||(L=!0)}G._extremes[D._id]=v.findExtremes(D,I,{tozero:L,padded:!0})}}function n(D){for(var x=D.traces,E=0;E<x.length;E++)for(var B=x[E],t=0;t<B.length;t++){var G=B[t];G.s!==r&&D.put(G.p,G.b+G.s)}}function c(D,x,E){function B(ea){return d(D.c2l(ea))&&(ea<M-L||ea>N+L||!d(M))}var t=x.traces,G=D._id.charAt(0),I="fraction"===E.norm?1:100,L=I/1E9,M=D.l2c(D.c2l(0)),N="stack"===E.mode?I:M;for(E=0;E<t.length;E++){for(var H=t[E],J=H[0].trace,
O=[],Q=!1,U=!1,P=0;P<H.length;P++){var V=H[P];if(V.s!==r){var Y=Math.abs(I/x.get(V.p,V.s));V.b*=Y;V.s*=Y;Y=V.b;var ba=Y+V.s;V[G]=ba;O.push(ba);U=U||B(ba);V.hasB&&(O.push(Y),U=U||B(Y));V.hasB&&V.b||(Q=!0)}}J._extremes[D._id]=v.findExtremes(D,O,{tozero:Q,padded:U})}}function f(D,x){x=x._id.charAt(0);var E={},B,t,G=Infinity,I=-Infinity;for(B=0;B<D.length;B++){var L=D[B];for(t=0;t<L.length;t++){var M=L[t].p;d(M)&&(G=Math.min(G,M),I=Math.max(I,M))}}var N=1E4/(I-G);I=E.round=function(P){return String(Math.round(N*
(P-G)))};for(B=0;B<D.length;B++){L=D[B];L[0].t.extents=E;M=L[0].t.poffset;var H=Array.isArray(M);for(t=0;t<L.length;t++){var J=L[t],O=J[x]-J.w/2;if(d(O)){var Q=J[x]+J.w/2,U=I(J.p);E[U]=E[U]?[Math.min(O,E[U][0]),Math.max(Q,E[U][1])]:[O,Q]}J.p0=J.p+(H?M[t]:M);J.p1=J.p0+J.w;J.s0=J.b;J.s1=J.s0+J.s}}}var d=b("fast-isnumeric"),q=b("../../lib").isArrayOrTypedArray,r=b("../../constants/numerical").BADNUM,u=b("../../registry"),v=b("../../plots/cartesian/axes"),w=b("../../plots/cartesian/axis_ids").getAxisGroup,
y=b("./sieve.js");F.exports={crossTraceCalc:function(D,x){var E=x.xaxis;x=x.yaxis;for(var B=D._fullLayout,t=D._fullData,G=D.calcdata,I=[],L=[],M=0;M<t.length;M++){var N=t[M];if(!0===N.visible&&u.traceIs(N,"bar")&&N.xaxis===E._id&&N.yaxis===x._id&&("h"===N.orientation?I.push(G[M]):L.push(G[M]),N._computePh)){N=D.calcdata[M];for(var H=0;H<N.length;H++)"function"===typeof N[H].ph0&&(N[H].ph0=N[H].ph0()),"function"===typeof N[H].ph1&&(N[H].ph1=N[H].ph1())}}B={xCat:"category"===E.type||"multicategory"===
E.type,yCat:"category"===x.type||"multicategory"===x.type,mode:B.barmode,norm:B.barnorm,gap:B.bargap,groupgap:B.bargroupgap};m(D,E,x,L,B);m(D,x,E,I,B)},setGroupPositions:m}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_ids":800,"../../registry":880,"./sieve.js":903,"fast-isnumeric":241}],894:[function(b,F,C){function m(f,d,q,r){f=d.orientation;f=p(q,d[{v:"x",h:"y"}[f]+"axis"])+f;var u=q._alignmentOpts||{};q=r("alignmentgroup");var v=
u[f];v||(v=u[f]={});(f=v[q])?f.traces.push(d):f=v[q]={traces:[d],alignmentIndex:Object.keys(v).length,offsetGroups:{}};r=r("offsetgroup");f=f.offsetGroups;q=f[r];r&&(q||(q=f[r]={offsetIndex:Object.keys(f).length}),d._offsetIndex=q.offsetIndex)}function h(f,d,q,r,u,v){v=v||{};d=!1!==v.moduleHasSelected;var w=!1!==v.moduleHasUnselected,y=!1!==v.moduleHasConstrain,D=!1!==v.moduleHasCliponaxis,x=!1!==v.moduleHasTextangle,E=!1!==v.moduleHasInsideanchor,B=!!v.hasPathbar,t=Array.isArray(u)||"auto"===u;v=
t||"inside"===u;u=t||"outside"===u;if(v||u)q=c(r,"textfont",q.font),t=l.extendFlat({},q),(f=!(f.textfont&&f.textfont.color))&&delete t.color,c(r,"insidetextfont",t),B&&(B=l.extendFlat({},q),f&&delete B.color,c(r,"pathbar.textfont",B)),u&&c(r,"outsidetextfont",q),d&&r("selected.textfont.color"),w&&r("unselected.textfont.color"),y&&r("constraintext"),D&&r("cliponaxis"),x&&r("textangle"),r("texttemplate");v&&E&&r("insidetextanchor")}var l=b("../../lib"),e=b("../../components/color"),a=b("../../registry"),
g=b("../scatter/xy_defaults"),k=b("./style_defaults"),p=b("../../plots/cartesian/axis_ids").getAxisGroup,n=b("./attributes"),c=l.coerceFont;F.exports={supplyDefaults:function(f,d,q,r){function u(w,y){return l.coerce(f,d,n,w,y)}if(g(f,d,r,u)){u("orientation",d.x&&!d.y?"h":"v");u("base");u("offset");u("width");u("text");u("hovertext");u("hovertemplate");var v=u("textposition");h(f,d,r,u,v,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,
moduleHasInsideanchor:!0});k(f,d,u,q,r);q=(d.marker.line||{}).color;r=a.getComponentMethod("errorbars","supplyDefaults");r(f,d,q||e.defaultLine,{axis:"y"});r(f,d,q||e.defaultLine,{axis:"x",inherit:"y"});l.coerceSelectionMarkerOpacity(d,u)}else d.visible=!1},crossTraceDefaults:function(f,d){function q(w){return l.coerce(u._input,u,n,w)}if("group"===d.barmode)for(var r=0;r<f.length;r++){var u=f[r];if("bar"===u.type){var v=u._input;m(v,u,d,q)}}},handleGroupingDefaults:m,handleText:h}},{"../../components/color":615,
"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../registry":880,"../scatter/xy_defaults":1181,"./attributes":890,"./style_defaults":905}],895:[function(b,F,C){F.exports=function(m,h,l){m.x="xVal"in h?h.xVal:h.x;m.y="yVal"in h?h.yVal:h.y;h.xa&&(m.xaxis=h.xa);h.ya&&(m.yaxis=h.ya);"h"===l.orientation?(m.label=m.y,m.value=m.x):(m.label=m.x,m.value=m.y);return m}},{}],896:[function(b,F,C){var m=b("fast-isnumeric"),h=b("tinycolor2"),l=b("../../lib").isArrayOrTypedArray;C.coerceString=function(e,
a,g){if("string"===typeof a){if(a||!e.noBlank)return a}else if(("number"===typeof a||!0===a)&&!e.strict)return String(a);return void 0!==g?g:e.dflt};C.coerceNumber=function(e,a,g){if(m(a)){a=+a;var k=e.min,p=e.max;if(!(void 0!==k&&a<k||void 0!==p&&a>p))return a}return void 0!==g?g:e.dflt};C.coerceColor=function(e,a,g){return h(a).isValid()?a:void 0!==g?g:e.dflt};C.coerceEnumerated=function(e,a,g){e.coerceNumber&&(a=+a);return-1!==e.values.indexOf(a)?a:void 0!==g?g:e.dflt};C.getValue=function(e,a){var g;
Array.isArray(e)?a<e.length&&(g=e[a]):g=e;return g};C.getLineWidth=function(e,a){return 0<a.mlw?a.mlw:l(e.marker.line.width)?0:e.marker.line.width}},{"../../lib":749,"fast-isnumeric":241,tinycolor2:548}],897:[function(b,F,C){function m(c,f,d,q){function r(P){return P[H]-P.w/2}function u(P){return P[H]+P.w/2}function v(P,V){return l.inbox(P-M,V-M,G+Math.min(1,Math.abs(V-P)/U)-1)}function w(P){return v(I(P),L(P))}function y(P){var V=N,Y=P.b,ba=P[J];t&&(P=Math.abs(P.rawS)||0,0<V?ba+=P:0>V&&(ba-=P));
return l.inbox(Y-V,ba-V,G+(ba-V)/(ba-Y)-1)}var D=c.cd,x=D[0].trace,E=D[0].t,B="closest"===q,t="waterfall"===x.type,G=c.maxHoverDistance,I=B?r:function(P){return Math.min(r(P),P.p-E.bardelta/2)},L=B?u:function(P){return Math.max(u(P),P.p+E.bardelta/2)};if("h"===x.orientation){var M=d;var N=f;var H="y";var J="x";var O=y;var Q=w}else M=f,N=d,H="x",J="y",Q=y,O=w;f=c[H+"a"];d=c[J+"a"];var U=Math.abs(f.r2c(f.range[1])-f.r2c(f.range[0]));q=l.getDistanceFunction(q,O,Q,function(P){return(O(P)+Q(P))/2});l.getClosest(D,
q,c);if(!1!==c.index&&D[c.index].p!==n)return B||(I=function(P){return Math.min(r(P),P.p-E.bargroupwidth/2)},L=function(P){return Math.max(u(P),P.p+E.bargroupwidth/2)}),D=D[c.index],q=x.base?D.b+D.s:D.s,c[J+"0"]=c[J+"1"]=d.c2p(D[J],!0),c[J+"LabelVal"]=q,q=E.extents[E.extents.round(D.p)],c[H+"0"]=f.c2p(B?I(D):q[0],!0),c[H+"1"]=f.c2p(B?L(D):q[1],!0),c[H+"LabelVal"]=D.p,c.labelLabel=p(f,c[H+"LabelVal"]),c.valueLabel=p(d,c[J+"LabelVal"]),c.spikeDistance=(y(D)+function(P){return v(r(P),u(P))}(D))/2-G,
c[H+"Spike"]=f.c2p(D.p,!0),g(D,x,c),c.hovertemplate=x.hovertemplate,c}function h(c,f){var d=f.mcc||c.marker.color,q=f.mlcc||c.marker.line.color;c=k(c,f);if(a.opacity(d))return d;if(a.opacity(q)&&c)return q}var l=b("../../components/fx"),e=b("../../registry"),a=b("../../components/color"),g=b("../../lib").fillText,k=b("./helpers").getLineWidth,p=b("../../plots/cartesian/axes").hoverLabelText,n=b("../../constants/numerical").BADNUM;F.exports={hoverPoints:function(c,f,d,q){if(c=m(c,f,d,q))return d=c.cd,
f=d[0].trace,d=d[c.index],c.color=h(f,d),e.getComponentMethod("errorbars","hoverInfo")(d,f,c),[c]},hoverOnBars:m,getTraceColor:h}},{"../../components/color":615,"../../components/fx":655,"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./helpers":896}],898:[function(b,F,C){F.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,
supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,colorbar:b("../scatter/marker_colorbar"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"bar",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" "),
animatable:!0,meta:{}}},{"../../plots/cartesian":810,"../scatter/marker_colorbar":1173,"./arrays_to_calcdata":889,"./attributes":890,"./calc":891,"./cross_trace_calc":893,"./defaults":894,"./event_data":895,"./hover":897,"./layout_attributes":899,"./layout_defaults":900,"./plot":901,"./select":902,"./style":904}],899:[function(b,F,C){F.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction",
"percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],900:[function(b,F,C){var m=b("../../registry"),h=b("../../plots/cartesian/axes"),l=b("../../lib"),e=b("./layout_attributes");F.exports=function(a,g,k){for(var p=!1,n=!1,c=!1,f={},d=l.coerce(a,g,e,"barmode",void 0),q=0;q<k.length;q++){var r=k[q];if(m.traceIs(r,"bar")&&r.visible){p=!0;if("group"===d){var u=r.xaxis+r.yaxis;f[u]&&(c=!0);f[u]=
!0}r.visible&&"histogram"===r.type&&"category"!==h.getFromId({_fullLayout:g},r["v"===r.orientation?"xaxis":"yaxis"]).type&&(n=!0)}}p?("overlay"!==d&&l.coerce(a,g,e,"barnorm",void 0),l.coerce(a,g,e,"bargap",n&&!c?0:.2),l.coerce(a,g,e,"bargroupgap",void 0)):delete g.barmode}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./layout_attributes":899}],901:[function(b,F,C){function m(H){return H.id}function h(H,J,O,Q){var U=[],P=[],V=Q?J:O;J=Q?O:J;U[0]=V.c2p(H.s0,!0);P[0]=J.c2p(H.p0,
!0);U[1]=V.c2p(H.s1,!0);P[1]=J.c2p(H.p1,!0);return Q?[U,P]:[P,U]}function l(H,J,O,Q){if(!J.uniformtext.mode&&O&&0<O.duration){var U;Q&&(U=Q());return H.transition().duration(O.duration).ease(O.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()})}return H}function e(H,J,O,Q,U,P,V,Y,ba,ea,ca){function ia(xa,Ca,Ja){return r.ensureSingle(xa,"text").text(Ca).attr({"class":"bartext bartext-"+ta,"text-anchor":"middle","data-notex":1}).call(w.font,Ja).call(u.convertToTspans,H)}var fa=
J.xaxis,ha=J.yaxis;J=H._fullLayout;var na=Q[0].trace,pa="h"===na.orientation,ra=p(J,Q,U,fa,ha);var ta=n(na,U);var oa=Q[U],ua=!("stack"===ea.mode||"relative"===ea.mode)||oa._outmost;if(ra&&"none"!==ta&&(!oa.isBlank&&P!==V&&Y!==ba||"auto"!==ta&&"inside"!==ta)){var ka=J.font;Q=B.getBarColor(Q[U],na);Q=B.getInsideTextFont(na,U,ka,Q);U=B.getOutsideTextFont(na,U,ka);ka=O.datum();pa?"log"===fa.type&&0>=ka.s0&&(P=fa.range[0]<fa.range[1]?0:fa._length):"log"===ha.type&&0>=ka.s0&&(Y=ha.range[0]<ha.range[1]?
ha._length:0);fa=Math.abs(V-P)-2*N;ha=Math.abs(ba-Y)-2*N;"outside"===ta&&(ua||oa.hasB||(ta="inside"));if("auto"===ta)if(ua){ta="inside";var sa=r.ensureUniformFontSize(H,Q);var ya=ia(O,ra,sa);var qa=w.bBox(ya.node());ua=qa.width;ka=qa.height;0<ua&&0<ka&&(ua<=fa&&ka<=ha||ua<=ha&&ka<=fa||(pa?fa>=ha/ka*ua:ha>=fa/ua*ka))?ta="inside":(ta="outside",ya.remove(),ya=null)}else ta="inside";if(!ya&&(sa=r.ensureUniformFontSize(H,"outside"===ta?U:Q),ya=ia(O,ra,sa),O=ya.attr("transform"),ya.attr("transform",""),
qa=w.bBox(ya.node()),ua=qa.width,ka=qa.height,ya.attr("transform",O),0>=ua||0>=ka)){ya.remove();return}O=na.textangle;"outside"===ta?(ra="both"===na.constraintext||"outside"===na.constraintext,P=k(P,V,Y,ba,qa,{isHorizontal:pa,constrained:ra,angle:O})):(ra="both"===na.constraintext||"inside"===na.constraintext,P=g(P,V,Y,ba,qa,{isHorizontal:pa,constrained:ra,angle:O,anchor:na.insidetextanchor}));P.fontSize=sa.size;x(na.type,P,J);oa.transform=P;l(ya,J,ea,ca).attr("transform",r.getTextTransform(P))}else O.select("text").remove()}
function a(H,J){var O=Math.PI/180*J;J=Math.abs(Math.sin(O));O=Math.abs(Math.cos(O));return{x:H.width*O+H.height*J,y:H.width*J+H.height*O}}function g(H,J,O,Q,U,P){var V=!!P.isHorizontal,Y=!!P.constrained,ba=P.angle||0,ea=P.anchor||"end",ca="end"===ea;ea="start"===ea;var ia=((P.leftToRight||0)+1)/2,fa=1-ia,ha=U.width,na=U.height,pa=Math.abs(J-H),ra=Math.abs(Q-O);P=pa>2*N&&ra>2*N?N:0;pa-=2*P;ra-=2*P;var ta="auto"===ba?0:ba;"auto"!==ba||ha<=pa&&na<=ra||!(ha>pa||na>ra)||(ha>ra||na>pa)&&ha<na===pa<ra||
(ta+=90);ha=a(U,ta);ba=1;Y&&(ba=Math.min(1,pa/ha.x,ra/ha.y));Y=U.left*fa+U.right*ia;U=(U.top+U.bottom)/2;ia=(H+N)*fa+(J-N)*ia;fa=(O+Q)/2;ra=pa=0;if(ea||ca)ca=(V?ha.x:ha.y)/2,ha=V?H<J?1:-1:O<Q?1:-1,V?ea?(ia=H+ha*P,pa=-ha*ca):(ia=J-ha*P,pa=ha*ca):ea?(fa=O+ha*P,ra=-ha*ca):(fa=Q-ha*P,ra=ha*ca);return{textX:Y,textY:U,targetX:ia,targetY:fa,anchorX:pa,anchorY:ra,scale:ba,rotate:ta}}function k(H,J,O,Q,U,P){var V=!!P.isHorizontal,Y=!!P.constrained,ba=P.angle||0,ea=U.width,ca=U.height,ia=Math.abs(J-H),fa=Math.abs(Q-
O);P=V?fa>2*N?N:0:ia>2*N?N:0;var ha=1;Y&&(ha=V?Math.min(1,fa/ca):Math.min(1,ia/ea));Y="auto"===ba?0:ba;ba=a(U,Y);ba=(V?ba.x:ba.y)/2;ea=(U.left+U.right)/2;U=(U.top+U.bottom)/2;ca=(H+J)/2;ia=(O+Q)/2;var na=fa=0;H=V?J<H?1:-1:O<Q?1:-1;V?(ca=J-H*P,fa=H*ba):(ia=Q+H*P,na=-H*ba);return{textX:ea,textY:U,targetX:ca,targetY:ia,anchorX:fa,anchorY:na,scale:ha,rotate:Y}}function p(H,J,O,Q,U){var P=J[0].trace;H=P.texttemplate?c(H,J,O,Q,U):P.textinfo?f(J,O,Q,U):t.getValue(P.text,O);return t.coerceString(I,H)}function n(H,
J){H=t.getValue(H.textposition,J);return t.coerceEnumerated(L,H)}function c(H,J,O,Q,U){function P(na){return D(ha,+na,!0).text}var V=J[0].trace,Y=r.castOption(V,O,"texttemplate");if(!Y)return"";var ba="waterfall"===V.type,ea="funnel"===V.type;if("h"===V.orientation){var ca="y";var ia=U;var fa="x";var ha=Q}else ca="x",ia=Q,fa="y",ha=U;O=J[O];J={};J.label=O.p;J.labelLabel=J[ca+"Label"]=D(ia,O.p,!0).text;ca=r.castOption(V,O.i,"text");if(0===ca||ca)J.text=ca;J.value=O.s;J.valueLabel=J[fa+"Label"]=P(O.s);
fa={};M(fa,V,O.i);ba&&(J.delta=+O.rawS||O.s,J.deltaLabel=P(J.delta),J.final=O.v,J.finalLabel=P(J.final),J.initial=J.final-J.delta,J.initialLabel=P(J.initial));ea&&(J.value=O.s,J.valueLabel=P(J.value),J.percentInitial=O.begR,J.percentInitialLabel=r.formatPercent(O.begR),J.percentPrevious=O.difR,J.percentPreviousLabel=r.formatPercent(O.difR),J.percentTotal=O.sumR,J.percenTotalLabel=r.formatPercent(O.sumR));if(ba=r.castOption(V,O.i,"customdata"))J.customdata=ba;return r.texttemplateString(Y,J,H._d3locale,
fa,J,V._meta||{})}function f(H,J,O,Q){function U(ha){return D(V?O:Q,+ha,!0).text}var P=H[0].trace,V="h"===P.orientation,Y="waterfall"===P.type,ba="funnel"===P.type,ea=H[J],ca=P.textinfo.split("+"),ia=[],fa=function(ha){return-1!==ca.indexOf(ha)};fa("label")&&ia.push(D(V?Q:O,H[J].p,!0).text);fa("text")&&(H=r.castOption(P,ea.i,"text"),(0===H||H)&&ia.push(H));Y&&(Y=+ea.rawS||ea.s,H=ea.v,J=H-Y,fa("initial")&&ia.push(U(J)),fa("delta")&&ia.push(U(Y)),fa("final")&&ia.push(U(H)));ba&&(fa("value")&&ia.push(U(ea.s)),
ba=0,fa("percent initial")&&ba++,fa("percent previous")&&ba++,fa("percent total")&&ba++,ba=1<ba,fa("percent initial")&&(H=r.formatPercent(ea.begR),ba&&(H+=" of initial"),ia.push(H)),fa("percent previous")&&(H=r.formatPercent(ea.difR),ba&&(H+=" of previous"),ia.push(H)),fa("percent total")&&(H=r.formatPercent(ea.sumR),ba&&(H+=" of total"),ia.push(H)));return ia.join("\x3cbr\x3e")}var d=b("d3"),q=b("fast-isnumeric"),r=b("../../lib"),u=b("../../lib/svg_text_utils"),v=b("../../components/color"),w=b("../../components/drawing"),
y=b("../../registry"),D=b("../../plots/cartesian/axes").tickText;C=b("./uniform_text");var x=C.recordMinTextSize,E=C.clearMinTextSize,B=b("./style"),t=b("./helpers");C=b("./constants");var G=b("./attributes"),I=G.text,L=G.textposition,M=b("../../components/fx/helpers").appendArrayPointValue,N=C.TEXTPAD;F.exports={plot:function(H,J,O,Q,U,P){var V=J.xaxis,Y=J.yaxis,ba=H._fullLayout;U||(U={mode:ba.barmode,norm:ba.barmode,gap:ba.bargap,groupgap:ba.bargroupgap},E("bar",ba));O=r.makeTraceGroups(Q,O,"trace bars").each(function(ea){var ca=
d.select(this),ia=ea[0].trace,fa="funnel"===ia.type,ha="bar"===ia.type||fa,na=0;"waterfall"===ia.type&&ia.connector.visible&&"between"===ia.connector.mode&&(na=ia.connector.line.width/2);var pa="h"===ia.orientation,ra=U&&0<U.duration;fa=r.ensureSingle(ca,"g","points");var ta=ia.ids?m:void 0;fa=fa.selectAll("g.point").data(r.identity,ta);fa.enter().append("g").classed("point",!0);fa.exit().remove();fa.each(function(oa,ua){function ka(Ea){var Ia=d.round(Wa/2%1,2);return 0===U.gap&&0===U.groupgap?d.round(Math.round(Ea)-
Ia,2):Ea}function sa(Ea,Ia,Qa){return Qa&&Ea===Ia?Ea:2<=Math.abs(Ea-Ia)?ka(Ea):Ea>Ia?Math.ceil(Ea):Math.floor(Ea)}var ya=d.select(this),qa=h(oa,V,Y,pa),xa=qa[0][0],Ca=qa[0][1],Ja=qa[1][0];qa=qa[1][1];var eb=0===(pa?Ca-xa:qa-Ja);eb&&ha&&t.getLineWidth(ia,oa)&&(eb=!1);eb||(eb=!q(xa)||!q(Ca)||!q(Ja)||!q(qa));(oa.isBlank=eb)&&(pa?Ca=xa:qa=Ja);na&&!eb&&(pa?(xa-=(xa<Ca?1:-1)*na,Ca+=(xa<Ca?1:-1)*na):(Ja-=(Ja<qa?1:-1)*na,qa+=(Ja<qa?1:-1)*na));if("waterfall"===ia.type){if(!eb){var Ra=ia[oa.dir].marker;var Wa=
Ra.line.width;Ra=Ra.color}}else Wa=t.getLineWidth(ia,oa),Ra=oa.mc||ia.marker.color;H._context.staticPlot||(Ra=1>v.opacity(Ra)||.01<Wa?ka:sa,xa=Ra(xa,Ca,pa),Ca=Ra(Ca,xa,pa),Ja=Ra(Ja,qa,!pa),qa=Ra(qa,Ja,!pa));Ra=l(r.ensureSingle(ya,"path"),ba,U,P);Ra.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ca-xa)*(qa-Ja))?"M0,0Z":"M"+xa+","+Ja+"V"+qa+"H"+Ca+"V"+Ja+"Z").call(w.setClipUrl,J.layerClipId,H);!ba.uniformtext.mode&&ra&&(eb=w.makePointStyleFns(ia),w.singlePointStyle(oa,Ra,ia,eb,H));e(H,
J,ya,ea,ua,xa,Ca,Ja,qa,U,P);J.layerClipId&&w.hideOutsideRangePoint(oa,ya.select("text"),V,Y,ia.xcalendar,ia.ycalendar)});w.setClipUrl(ca,!1===ia.cliponaxis?null:J.layerClipId,H)});y.getComponentMethod("errorbars","plot")(H,O,J,U)},toMoveInsideBar:g}},{"../../components/color":615,"../../components/drawing":637,"../../components/fx/helpers":651,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../registry":880,"./attributes":890,"./constants":892,"./helpers":896,"./style":904,
"./uniform_text":906,d3:169,"fast-isnumeric":241}],902:[function(b,F,C){F.exports=function(m,h){var l=m.cd,e=m.xaxis,a=m.yaxis,g=l[0].trace,k="funnel"===g.type;g="h"===g.orientation;var p=[],n;if(!1===h)for(n=0;n<l.length;n++)l[n].selected=0;else for(n=0;n<l.length;n++){var c=l[n];if("ct"in c)var f=c.ct;else{var d=c,q=e,r=a;f=g;var u=k,v=q.c2p(f?d.s0:d.p0,!0);q=q.c2p(f?d.s1:d.p1,!0);var w=r.c2p(f?d.p0:d.s0,!0);d=r.c2p(f?d.p1:d.s1,!0);f=u?[(v+q)/2,(w+d)/2]:f?[q,(w+d)/2]:[(v+q)/2,d]}h.contains(f,!1,
n,m)?(p.push({pointNumber:n,x:e.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return p}},{}],903:[function(b,F,C){function m(e,a){this.traces=e;this.sepNegVal=a.sepNegVal;this.overlapNoMerge=a.overlapNoMerge;for(var g=Infinity,k=[],p=0;p<e.length;p++){for(var n=e[p],c=0;c<n.length;c++){var f=n[c];f.p!==l&&k.push(f.p)}n[0]&&n[0].width1&&(g=Math.min(n[0].width1,g))}this.positions=k;e=h(k,{unitMinDiff:a.unitMinDiff});this.distinctPositions=e.vals;this.binWidth=this.minDiff=1===e.vals.length&&Infinity!==
g?g:Math.min(e.minDiff,g);this.bins={}}F.exports=m;var h=b("../../lib").distinctVals,l=b("../../constants/numerical").BADNUM;m.prototype.put=function(e,a){e=this.getLabel(e,a);var g=this.bins[e]||0;this.bins[e]=g+a;return g};m.prototype.get=function(e,a){e=this.getLabel(e,a);return this.bins[e]||0};m.prototype.getLabel=function(e,a){return(0>a&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?e:Math.round(e/this.binWidth))}},{"../../constants/numerical":724,"../../lib":749}],904:[function(b,F,C){function m(y,
D,x){y.selectAll("text").each(function(E){var B=p.select(this);E=f.ensureUniformFontSize(x,l(B,E,D,x));c.font(B,E)})}function h(y,D,x){y.each(function(E){var B=p.select(this);if(E.selected){E=f.ensureUniformFontSize(x,l(B,E,D,x));var t=D.selected.textfont&&D.selected.textfont.color;t&&(E.color=t);c.font(B,E)}else c.selectedTextStyle(B,D)})}function l(y,D,x,E){E=E._fullLayout.font;var B=x.textfont;y.classed("bartext-inside")?(y=k(D,x),B=e(x,D.i,E,y)):y.classed("bartext-outside")&&(B=a(x,D.i,E));return B}
function e(y,D,x,E){x=g(r,y.textfont,D,x);if(void 0===y._input.textfont||void 0===y._input.textfont.color||Array.isArray(y.textfont.color)&&void 0===y.textfont.color[D])x={color:n.contrast(E),family:x.family,size:x.size};return g(u,y.insidetextfont,D,x)}function a(y,D,x){x=g(r,y.textfont,D,x);return g(v,y.outsidetextfont,D,x)}function g(y,D,x,E){D=D||{};var B=w.getValue(D.family,x),t=w.getValue(D.size,x);D=w.getValue(D.color,x);return{family:w.coerceString(y.family,B,E.family),size:w.coerceNumber(y.size,
t,E.size),color:w.coerceColor(y.color,D,E.color)}}function k(y,D){return"waterfall"===D.type?D[y.dir].marker.color:y.mc||D.marker.color}var p=b("d3"),n=b("../../components/color"),c=b("../../components/drawing"),f=b("../../lib"),d=b("../../registry"),q=b("./uniform_text").resizeText;C=b("./attributes");var r=C.textfont,u=C.insidetextfont,v=C.outsidetextfont,w=b("./helpers");F.exports={style:function(y){var D=p.select(y).selectAll("g.barlayer").selectAll("g.trace");q(y,D,"bar");var x=D.size(),E=y._fullLayout;
D.style("opacity",function(B){return B[0].trace.opacity}).each(function(B){("stack"===E.barmode&&1<x||0===E.bargap&&0===E.bargroupgap&&!B[0].trace.marker.line.width)&&p.select(this).attr("shape-rendering","crispEdges")});D.selectAll("g.points").each(function(B){var t=p.select(this);B=B[0].trace;c.pointStyle(t.selectAll("path"),B,y);m(t,B,y)});d.getComponentMethod("errorbars","style")(D)},styleTextPoints:m,styleOnSelect:function(y,D,x){D=D[0].trace;D.selectedpoints?(c.selectedPointStyle(x.selectAll("path"),
D),h(x.selectAll("text"),D,y)):(c.pointStyle(x.selectAll("path"),D,y),m(x,D,y),d.getComponentMethod("errorbars","style")(x))},getInsideTextFont:e,getOutsideTextFont:a,getBarColor:k,resizeText:q}},{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../registry":880,"./attributes":890,"./helpers":896,"./uniform_text":906,d3:169}],905:[function(b,F,C){var m=b("../../components/color"),h=b("../../components/colorscale/helpers").hasColorscale,l=b("../../components/colorscale/defaults");
F.exports=function(e,a,g,k,p){g("marker.color",k);h(e,"marker")&&l(e,a,p,g,{prefix:"marker.",cLetter:"c"});g("marker.line.color",m.defaultLine);h(e,"marker.line")&&l(e,a,p,g,{prefix:"marker.line.",cLetter:"c"});g("marker.line.width");g("marker.opacity");g("selected.marker.color");g("unselected.marker.color")}},{"../../components/color":615,"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626}],906:[function(b,F,C){var m=b("d3"),h=b("../../lib");F.exports={recordMinTextSize:function(l,
e,a){if(a.uniformtext.mode){l="_"+l+"Text_minsize";var g=a.uniformtext.minsize,k=e.scale*e.fontSize;e.hide=k<g;a[l]=a[l]||Infinity;e.hide||(a[l]=Math.min(a[l],Math.max(k,g)))}},clearMinTextSize:function(l,e){e["_"+l+"Text_minsize"]=void 0},resizeText:function(l,e,a){l=l._fullLayout;var g=l["_"+a+"Text_minsize"];if(g){var k="hide"===l.uniformtext.mode;switch(a){case "funnelarea":case "pie":case "sunburst":a="g.slice";break;case "treemap":a="g.slice, g.pathbar";break;default:a="g.points \x3e g.point"}e.selectAll(a).each(function(p){if(p=
p.transform)p.scale=k&&p.hide?0:g/p.fontSize,m.select(this).select("text").attr("transform",h.getTextTransform(p))})}}}},{"../../lib":749,d3:169}],907:[function(b,F,C){C=b("../../plots/template_attributes").hovertemplateAttrs;var m=b("../../lib/extend").extendFlat,h=b("../scatterpolar/attributes");b=b("../bar/attributes");F.exports={r:h.r,theta:h.theta,r0:h.r0,dr:h.dr,theta0:h.theta0,dtheta:h.dtheta,thetaunit:h.thetaunit,base:m({},b.base,{}),offset:m({},b.offset,{}),width:m({},b.width,{}),text:m({},
b.text,{}),hovertext:m({},b.hovertext,{}),marker:b.marker,hoverinfo:h.hoverinfo,hovertemplate:C(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":739,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatterpolar/attributes":1228}],908:[function(b,F,C){var m=b("../../components/colorscale/helpers").hasColorscale,h=b("../../components/colorscale/calc"),l=b("../bar/arrays_to_calcdata"),e=b("../bar/cross_trace_calc").setGroupPositions,a=b("../scatter/calc_selection"),
g=b("../../registry").traceIs,k=b("../../lib").extendFlat;F.exports={calc:function(p,n){function c(w){var y=n[w];void 0!==y&&(n["_"+w]=Array.isArray(y)?q.makeCalcdata(n,w):q.d2c(y,n.thetaunit))}var f=p._fullLayout,d=n.subplot,q=f[d].angularaxis;f=f[d].radialaxis.makeCalcdata(n,"r");d=q.makeCalcdata(n,"theta");for(var r=n._length,u=Array(r),v=0;v<r;v++)u[v]={p:d[v],s:f[v]};"linear"===q.type&&(c("width"),c("offset"));m(n,"marker")&&h(p,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"});m(n,
"marker.line")&&h(p,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"});l(u,n);a(u,n);return u},crossTraceCalc:function(p,n,c){for(var f=p.calcdata,d=[],q=0;q<f.length;q++){var r=f[q],u=r[0].trace;!0===u.visible&&g(u,"bar")&&u.subplot===c&&d.push(r)}c=k({},n.radialaxis,{_id:"x"});e(p,n.angularaxis,c,d,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../lib":749,"../../registry":880,
"../bar/arrays_to_calcdata":889,"../bar/cross_trace_calc":893,"../scatter/calc_selection":1157}],909:[function(b,F,C){var m=b("../../lib"),h=b("../scatterpolar/defaults").handleRThetaDefaults,l=b("../bar/style_defaults"),e=b("./attributes");F.exports=function(a,g,k,p){function n(c,f){return m.coerce(a,g,e,c,f)}h(a,g,p,n)?(n("thetaunit"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate"),l(a,g,n,k,p),m.coerceSelectionMarkerOpacity(g,n)):g.visible=!1}},{"../../lib":749,"../bar/style_defaults":905,
"../scatterpolar/defaults":1230,"./attributes":907}],910:[function(b,F,C){var m=b("../../components/fx"),h=b("../../lib"),l=b("../bar/hover").getTraceColor,e=h.fillText,a=b("../scatterpolar/hover").makeHoverPointText,g=b("../../plots/polar/helpers").isPtInsidePolygon;F.exports=function(k,p,n){var c=k.cd,f=c[0].trace,d=k.subplot,q=d.radialAxis,r=d.vangles,u=r?g:h.isPtInsideSector,v=k.maxHoverDistance,w=d.angularAxis._period||2*Math.PI,y=Math.abs(q.g2p(Math.sqrt(p*p+n*n))),D=Math.atan2(n,p);q.range[0]>
q.range[1]&&(D+=Math.PI);m.getClosest(c,function(x){return u(y,D,[x.rp0,x.rp1],[x.thetag0,x.thetag1],r)?v+Math.min(1,Math.abs(x.thetag1-x.thetag0)/w)-1+(x.rp1-y)/(x.rp1-x.rp0)-1:Infinity},k);if(!1!==k.index)return p=c[k.index],k.x0=k.x1=p.ct[0],k.y0=k.y1=p.ct[1],n=h.extendFlat({},p,{r:p.s,theta:p.p}),e(p,f,k),a(n,f,d,k),k.hovertemplate=f.hovertemplate,k.color=l(f,p),k.xLabelVal=k.yLabelVal=void 0,0>p.s&&(k.idealAlign="left"),[k]}},{"../../components/fx":655,"../../lib":749,"../../plots/polar/helpers":862,
"../bar/hover":897,"../scatterpolar/hover":1232}],911:[function(b,F,C){F.exports={moduleType:"trace",name:"barpolar",basePlotModule:b("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("../scatterpolar/format_labels"),
style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../bar/select"),meta:{}}},{"../../plots/polar":863,"../bar/select":902,"../bar/style":904,"../scatter/marker_colorbar":1173,"../scatterpolar/format_labels":1231,"./attributes":907,"./calc":908,"./defaults":909,"./hover":910,"./layout_attributes":912,"./layout_defaults":913,"./plot":914}],912:[function(b,F,C){F.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",
editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],913:[function(b,F,C){var m=b("../../lib"),h=b("./layout_attributes");F.exports=function(l,e,a){for(var g={},k,p=0;p<a.length;p++)k=a[p],"barpolar"===k.type&&!0===k.visible&&(k=k.subplot,g[k]||(m.coerce(l[k]||{},e[k],h,"barmode",void 0),m.coerce(l[k]||{},e[k],h,"bargap",void 0),g[k]=1))}},{"../../lib":749,"./layout_attributes":912}],914:[function(b,F,C){function m(k){var p=k.cxx,n=k.cyy;return k.vangles?function(c,
f,d,q){if(0<e.angleDelta(d,q)){var r=d;d=q}else r=q;q=g.findEnclosingVertexAngles(r,k.vangles)[0];var u=g.findEnclosingVertexAngles(d,k.vangles)[1];return g.pathPolygonAnnulus(c,f,r,d,[q,(r+d)/2,u],p,n)}:function(c,f,d,q){return e.pathAnnulus(c,f,d,q,p,n)}}var h=b("d3"),l=b("fast-isnumeric"),e=b("../../lib"),a=b("../../components/drawing"),g=b("../../plots/polar/helpers");F.exports=function(k,p,n){var c=p.xaxis,f=p.yaxis,d=p.radialAxis,q=p.angularAxis,r=m(p),u=p.layers.frontplot.select("g.barlayer");
e.makeTraceGroups(u,n,"trace bars").each(function(){var v=h.select(this),w=e.ensureSingle(v,"g","points").selectAll("g.point").data(e.identity);w.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0);w.exit().remove();w.each(function(y){var D=h.select(this),x=y.rp0=d.c2p(y.s0),E=y.rp1=d.c2p(y.s1),B=y.thetag0=q.c2g(y.p0),t=y.thetag1=q.c2g(y.p1);if(l(x)&&l(E)&&l(B)&&l(t)&&x!==E&&B!==t){var G=d.c2g(y.s1),I=(B+t)/2;y.ct=[c.c2p(G*Math.cos(I)),
f.c2p(G*Math.sin(I))];y=r(x,E,B,t)}else y="M0,0Z";e.ensureSingle(D,"path").attr("d",y)});a.setClipUrl(v,p._hasClipOnAxisFalse?p.clipIds.forTraces:null,k)})}},{"../../components/drawing":637,"../../lib":749,"../../plots/polar/helpers":862,d3:169,"fast-isnumeric":241}],915:[function(b,F,C){C=b("../scatter/attributes");var m=b("../bar/attributes"),h=b("../../components/color/attributes"),l=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../lib/extend").extendFlat;var e=C.marker,a=e.line;
F.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},
lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,
"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:b({},e.symbol,{arrayOk:!1,editType:"plot"}),opacity:b({},
e.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:b({},e.size,{arrayOk:!1,editType:"calc"}),color:b({},e.color,{arrayOk:!1,editType:"style"}),line:{color:b({},a.color,{arrayOk:!1,dflt:h.defaultLine,editType:"style"}),width:b({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,
editType:"style"},editType:"plot"},fillcolor:C.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:{marker:C.selected.marker,editType:"style"},unselected:{marker:C.unselected.marker,editType:"style"},text:b({},C.text,{}),hovertext:b({},C.hovertext,{}),hovertemplate:l({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":614,"../../lib/extend":739,
"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155}],916:[function(b,F,C){function m(v,w,y,D){var x=w+"0"in v;if(w in v||x&&"d"+w in v)return y.makeCalcdata(v,w);D=x?v[w+"0"]:"name"in v&&("category"===y.type||c(v.name)&&-1!==["linear","log"].indexOf(y.type)||d.isDateTime(v.name)&&"date"===y.type)?v.name:D;w="multicategory"===y.type?y.r2c_just_indices(D):y.d2c(D,0,v[w+"calendar"]);v=v._length;y=Array(v);for(D=0;D<v;D++)y[D]=w;return y}function h(v,w){for(var y=
v.length,D=Array(y+1),x=0;x<y;x++)D[x]=v[x]-w;D[y]=v[y-1]+w;return D}function l(v){for(var w=Array(v),y=0;y<v;y++)w[y]=[];return w}function e(v,w,y){for(var D in u)d.isArrayOrTypedArray(w[D])&&(Array.isArray(y)?d.isArrayOrTypedArray(w[D][y[0]])&&(v[u[D]]=w[D][y[0]][y[1]]):v[u[D]]=w[D][y])}function a(v,w){if(d.isArrayOrTypedArray(w.selectedpoints))for(var y=0;y<v.length;y++){for(var D=v[y].pts||[],x={},E=0;E<D.length;E++)x[D[E].i]=E;d.tagSelected(D,w,x)}}function g(v,w){return v.v-w.v}function k(v){return v.v}
function p(v,w,y){return 0===y?v.q1:Math.min(v.q1,w[Math.min(d.findBin(2.5*v.q1-1.5*v.q3,w,!0)+1,y-1)])}function n(v,w,y){return 0===y?v.q3:Math.max(v.q3,w[Math.max(d.findBin(2.5*v.q3-1.5*v.q1,w),0)])}var c=b("fast-isnumeric"),f=b("../../plots/cartesian/axes"),d=b("../../lib"),q=b("../../constants/numerical").BADNUM,r=d._;F.exports=function(v,w){var y=v._fullLayout,D=f.getFromId(v,w.xaxis||"x"),x=f.getFromId(v,w.yaxis||"y"),E=[],B="violin"===w.type?"_numViolins":"_numBoxes",t,G;if("h"===w.orientation){var I=
D;var L="x";D="y"}else I=x,L="y",x=D,D="x";var M=m(w,D,x,y[B]);x=d.distinctVals(M);var N=x.vals;x=x.minDiff/2;var H="all"===(w.boxpoints||w.points)?d.identity:function(fa){return fa.v<P.lf||fa.v>P.uf};if(w._hasPreCompStats){var J=w[L],O=function(fa){return I.d2c((w[fa]||[])[t])};N=Infinity;var Q=-Infinity;for(t=0;t<w._length;t++){var U=M[t];if(c(U)){var P={};P.pos=P[D]=U;P.q1=O("q1");P.med=O("median");P.q3=O("q3");U=[];if(J&&d.isArrayOrTypedArray(J[t]))for(G=0;G<J[t].length;G++){var V=I.d2c(J[t][G]);
V!==q&&(V={v:V,i:[t,G]},e(V,w,[t,G]),U.push(V))}P.pts=U.sort(g);V=P[L]=U.map(k);G=V.length;if(P.med!==q&&P.q1!==q&&P.q3!==q&&P.med>=P.q1&&P.q3>=P.med){var Y=O("lowerfence");P.lf=Y!==q&&Y<=P.q1?Y:p(P,V,G);Y=O("upperfence");P.uf=Y!==q&&Y>=P.q3?Y:n(P,V,G);Y=O("mean");P.mean=Y!==q?Y:G?d.mean(V,G):(P.q1+P.q3)/2;var ba=O("sd");P.sd=Y!==q&&0<=ba?ba:G?d.stdev(V,G,P.mean):P.q3-P.q1;P.lo=4*P.q1-3*P.q3;P.uo=4*P.q3-3*P.q1;Y=O("notchspan");Y=Y!==q&&0<Y?Y:0===G?0:1.57*(P.q3-P.q1)/Math.sqrt(G);P.ln=P.med-Y;P.un=
P.med+Y;Y=P.lf;ba=P.uf;w.boxpoints&&V.length&&(Y=Math.min(Y,V[0]),ba=Math.max(ba,V[G-1]));w.notched&&(Y=Math.min(Y,P.ln),ba=Math.max(ba,P.un));P.min=Y;P.max=ba}else d.warn(["Invalid input - make sure that q1 \x3c\x3d median \x3c\x3d q3","q1 \x3d "+P.q1,"median \x3d "+P.med,"q3 \x3d "+P.q3].join("\n")),V=P.med!==q?P.med:P.q1!==q?P.q3!==q?(P.q1+P.q3)/2:P.q1:P.q3!==q?P.q3:0,P.med=V,P.q1=P.q3=V,P.lf=P.uf=V,P.mean=P.sd=V,P.ln=P.un=V,P.min=P.max=V;N=Math.min(N,P.min);Q=Math.max(Q,P.max);P.pts2=U.filter(H);
E.push(P)}}w._extremes[I._id]=f.findExtremes(I,[N,Q],{padded:!0})}else{Q=I.makeCalcdata(w,L);U=h(N,x);Y=N.length;ba=l(Y);for(t=0;t<w._length;t++)V=Q[t],c(V)&&(G=d.findBin(M[t],U),0<=G&&G<Y&&(V={v:V,i:t},e(V,w,t),ba[G].push(V)));M=Infinity;var ea=-Infinity;U=w.quartilemethod;var ca="exclusive"===U,ia="inclusive"===U;for(t=0;t<Y;t++)0<ba[t].length&&(P={},P.pos=P[D]=N[t],U=P.pts=ba[t].sort(g),V=P[L]=U.map(k),G=V.length,P.min=V[0],P.max=V[G-1],P.mean=d.mean(V,G),P.sd=d.stdev(V,G,P.mean),P.med=d.interp(V,
.5),G%2&&(ca||ia)?(ca?(J=V.slice(0,G/2),O=V.slice(G/2+1)):ia&&(J=V.slice(0,G/2+1),O=V.slice(G/2)),P.q1=d.interp(J,.5),P.q3=d.interp(O,.5)):(P.q1=d.interp(V,.25),P.q3=d.interp(V,.75)),P.lf=p(P,V,G),P.uf=n(P,V,G),P.lo=4*P.q1-3*P.q3,P.uo=4*P.q3-3*P.q1,V=0===G?0:1.57*(P.q3-P.q1)/Math.sqrt(G),P.ln=P.med-V,P.un=P.med+V,M=Math.min(M,P.ln),ea=Math.max(ea,P.un),P.pts2=U.filter(H),E.push(P));w._extremes[I._id]=f.findExtremes(I,w.notched?Q.concat([M,ea]):Q,{padded:!0})}a(E,w);return 0<E.length?(E[0].t={num:y[B],
dPos:x,posLetter:D,valLetter:L,labels:{med:r(v,"median:"),min:r(v,"min:"),q1:r(v,"q1:"),q3:r(v,"q3:"),max:r(v,"max:"),mean:"sd"===w.boxmean?r(v,"mean  :"):r(v,"mean:"),lf:r(v,"lower fence:"),uf:r(v,"upper fence:")}},y[B]++,E):[{t:{empty:!0}}]};var u={text:"tx",hovertext:"htx"}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"fast-isnumeric":241}],917:[function(b,F,C){function m(g,k,p,n){var c=k.calcdata;k=k._fullLayout;var f=n._id,d=f.charAt(0),q,r,u=[],v=0;for(q=
0;q<p.length;q++){var w=c[p[q]];for(r=0;r<w.length;r++)u.push(n.c2l(w[r].pos,!0)),v+=(w[r].pts2||[]).length}if(u.length){q=l.distinctVals(u,{unitMinDiff:"category"===n.type||"multicategory"===n.type});u=q.minDiff/2;h.minDtick(n,q.minDiff,q.vals[0],!0);var y=k["violin"===g?"_numViolins":"_numBoxes"],D="group"===k[g+"mode"]&&1<y,x=1-k[g+"gap"];g=1-k[g+"groupgap"];for(q=0;q<p.length;q++){w=c[p[q]];var E=w[0].trace,B=w[0].t;r=E.width;var t=E.side,G,I;if(r){var L=G=I=r/2;var M=0}else L=u,D?(G=e(k,n._id)+
E.orientation,I=(G=Object.keys(((k._alignmentOpts[G]||{})[E.alignmentgroup]||{}).offsetGroups||{}).length)||y,M=G?E._offsetIndex:B.num,G=L*x*g/I,M=2*L*(-.5+(M+.5)/I)*x,I=L*x/I):(G=L*x*g,M=0,I=L);B.dPos=L;B.bPos=M;B.bdPos=G;B.wHover=I;G=M+G;B=!!r;I=(E.boxpoints||E.points)&&0<v;if("positive"===t)t=L*(r?1:.5),r=M;else if("negative"===t){t=M;r=L*(r?1:.5);var N=G}else t=r=L,M=N=G;if(I){L=E.pointpos;I=E.jitter;var H=E.marker.size/2,J=0;if(0<=L+I)if(J=G*(L+I),J>t){B=!0;var O=H;var Q=J}else J>M&&(O=H,Q=t);
J<=t&&(Q=t);t=0;if(0>=L-I)if(t=-G*(L-I),t>r){B=!0;var U=H;var P=t}else t>N&&(U=H,P=r);t<=r&&(P=r)}else Q=t,P=r;L=Array(w.length);for(r=0;r<w.length;r++)L[r]=w[r].pos;E._extremes[f]=h.findExtremes(n,L,{padded:B,vpadminus:P,vpadplus:Q,vpadLinearized:!0,ppadminus:{x:U,y:O}[d],ppadplus:{x:O,y:U}[d]})}}}var h=b("../../plots/cartesian/axes"),l=b("../../lib"),e=b("../../plots/cartesian/axis_ids").getAxisGroup,a=["v","h"];F.exports={crossTraceCalc:function(g,k){var p=g.calcdata,n=k.xaxis;k=k.yaxis;for(var c=
0;c<a.length;c++){for(var f=a[c],d="h"===f?k:n,q=[],r=0;r<p.length;r++){var u=p[r],v=u[0].t;u=u[0].trace;!0!==u.visible||"box"!==u.type&&"candlestick"!==u.type||v.empty||(u.orientation||"v")!==f||u.xaxis!==n._id||u.yaxis!==k._id||q.push(r)}m("box",g,q,d)}},setPositionOffset:m}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_ids":800}],918:[function(b,F,C){function m(n,c,f,d){function q(G){var I=0;G&&G.length&&(I+=1,l.isArrayOrTypedArray(G[0])&&G[0].length&&(I+=1));return I}
function r(G){return l.validate(n[G],p[G])}var u=f("y"),v=f("x");if("box"===c.type){var w=f("q1"),y=f("median");var D=f("q3");c._hasPreCompStats=w&&w.length&&y&&y.length&&D&&D.length;D=Math.min(l.minRowLength(w),l.minRowLength(y),l.minRowLength(D))}w=q(u);y=q(v);var x=w&&l.minRowLength(u),E=y&&l.minRowLength(v);if(c._hasPreCompStats)switch(String(y)+String(w)){case "00":u=r("x0")||r("dx");var B=!r("y0")&&!r("dy")||u?"v":"h";var t=D;break;case "10":B="v";t=Math.min(D,E);break;case "20":B="h";t=Math.min(D,
v.length);break;case "01":B="h";t=Math.min(D,x);break;case "02":B="v";t=Math.min(D,u.length);break;case "12":B="v";t=Math.min(D,E,u.length);break;case "21":B="h";t=Math.min(D,v.length,x);break;case "11":t=0;break;case "22":B=!1;for(t=0;t<v.length;t++)if("category"===k(v[t])){B=!0;break}if(B)B="v",t=Math.min(D,E,u.length);else{for(t=0;t<u.length;t++)if("category"===k(u[t])){B=!0;break}B?(B="h",t=Math.min(D,v.length,x)):(B="v",t=Math.min(D,E,u.length))}}else 0<w?(B="v",t=0<y?Math.min(E,x):Math.min(x)):
0<y?(B="h",t=Math.min(E)):t=0;t?(c._length=t,u=f("orientation",B),c._hasPreCompStats?"v"===u&&0===y?(f("x0",0),f("dx",1)):"h"===u&&0===w&&(f("y0",0),f("dy",1)):"v"===u&&0===y?f("x0"):"h"===u&&0===w&&f("y0"),e.getComponentMethod("calendars","handleTraceDefaults")(n,c,["x","y"],d)):c.visible=!1}function h(n,c,f,d){d=d.prefix;n=l.coerce2(n,c,p,"marker.outliercolor");var q=f("marker.line.outliercolor"),r="outliers";if(c._hasPreCompStats)r="all";else if(n||q)r="suspectedoutliers";(d=f(d+"points",r))?(f("jitter",
"all"===d?.3:0),f("pointpos","all"===d?-1.5:0),f("marker.symbol"),f("marker.opacity"),f("marker.size"),f("marker.color",c.line.color),f("marker.line.color"),f("marker.line.width"),"suspectedoutliers"===d&&(f("marker.line.outliercolor",c.marker.color),f("marker.line.outlierwidth")),f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size"),f("text"),f("hovertext")):delete c.marker;d=f("hoveron");"all"!==d&&-1===d.indexOf("points")||f("hovertemplate");
l.coerceSelectionMarkerOpacity(c,f)}var l=b("../../lib"),e=b("../../registry"),a=b("../../components/color"),g=b("../bar/defaults").handleGroupingDefaults,k=b("../../plots/cartesian/axis_autotype"),p=b("./attributes");F.exports={supplyDefaults:function(n,c,f,d){function q(v,w){return l.coerce(n,c,p,v,w)}m(n,c,q,d);if(!1!==c.visible){if(d=c._hasPreCompStats)q("lowerfence"),q("upperfence");q("line.color",(n.marker||{}).color||f);q("line.width");q("fillcolor",a.addOpacity(c.line.color,.5));f=!1;if(d){var r=
q("mean"),u=q("sd");r&&r.length&&(f=!0,u&&u.length&&(f="sd"))}q("boxmean",f);q("whiskerwidth");q("width");q("quartilemethod");f=!1;d?(d=q("notchspan"))&&d.length&&(f=!0):l.validate(n.notchwidth,p.notchwidth)&&(f=!0);q("notched",f)&&q("notchwidth");h(n,c,q,{prefix:"box"})}},crossTraceDefaults:function(n,c){function f(v){return l.coerce(q._input,q,p,v)}for(var d,q,r=0;r<n.length;r++){q=n[r];var u=q.type;if("box"===u||"violin"===u)d=q._input,"group"===c[u+"mode"]&&g(d,q,c,f)}},handleSampleDefaults:m,
handlePointsDefaults:h}},{"../../components/color":615,"../../lib":749,"../../plots/cartesian/axis_autotype":798,"../../registry":880,"../bar/defaults":894,"./attributes":915}],919:[function(b,F,C){F.exports=function(m,h){h.hoverOnBox&&(m.hoverOnBox=h.hoverOnBox);"xVal"in h&&(m.x=h.xVal);"yVal"in h&&(m.y=h.yVal);h.xa&&(m.xaxis=h.xa);h.ya&&(m.yaxis=h.ya);return m}},{}],920:[function(b,F,C){function m(p,n,c,f){function d(Q){return(N(Q)+H(Q))/2}var q=p.cd,r=p.xa,u=p.ya,v=q[0].trace,w=q[0].t,y="violin"===
v.type,D=[];var x=w.bdPos;var E=w.wHover,B=function(Q){return J.c2l(Q.pos)+w.bPos-J.c2l(M)};if(y&&"both"!==v.side){if("positive"===v.side){var t=function(Q){Q=B(Q);return a.inbox(Q,Q+E,O)};var G=x;var I=0}"negative"===v.side&&(t=function(Q){Q=B(Q);return a.inbox(Q-E,Q,O)},G=0,I=x)}else t=function(Q){Q=B(Q);return a.inbox(Q-E,Q+E,O)},G=I=x;y=y?function(Q){return a.inbox(Q.span[0]-L,Q.span[1]-L,O)}:function(Q){return a.inbox(Q.min-L,Q.max-L,O)};if("h"===v.orientation){var L=n;var M=c;var N=y;var H=
t;c="y";var J=u;n="x"}else L=c,M=n,N=t,H=y,c="x",J=r,n="y",r=u;x=Math.min(1,x/Math.abs(J.r2c(J.range[1])-J.r2c(J.range[0])));var O=p.maxHoverDistance-x;x=p.maxSpikeDistance-x;f=a.getDistanceFunction(f,N,H,d);a.getClosest(q,f,p);if(!1===p.index)return[];q=q[p.index];f=v.line.color;u=(v.marker||{}).color;g.opacity(f)&&v.line.width?p.color=f:g.opacity(u)&&v.boxpoints?p.color=u:p.color=v.fillcolor;p[c+"0"]=J.c2p(q.pos+w.bPos-I,!0);p[c+"1"]=J.c2p(q.pos+w.bPos+G,!0);p[c+"LabelVal"]=q.pos;G=c+"Spike";p.spikeDistance=
d(q)*x/O;p[G]=J.c2p(q.pos,!0);I={};f=["med","q1","q3","min","max"];(v.boxmean||(v.meanline||{}).visible)&&f.push("mean");(v.boxpoints||v.points)&&f.push("lf","uf");for(c=0;c<f.length;c++)x=f[c],x in q&&!(q[x]in I)&&(I[q[x]]=!0,u=q[x],t=r.c2p(u,!0),y=e.extendFlat({},p),y.attr=x,y[n+"0"]=y[n+"1"]=t,y[n+"LabelVal"]=u,y[n+"Label"]=(w.labels?w.labels[x]+" ":"")+l.hoverLabelText(r,u),y.hoverOnBox=!0,"mean"===x&&"sd"in q&&"sd"===v.boxmean&&(y[n+"err"]=q.sd),p.name="",p.spikeDistance=void 0,p[G]=void 0,y.hovertemplate=
!1,D.push(y));return D}function h(p,n,c){for(var f=p.cd,d=p.xa,q=p.ya,r=f[0].trace,u=d.c2p(n),v=q.c2p(c),w=a.quadrature(function(E){var B=Math.max(3,E.mrc||0);return Math.max(Math.abs(d.c2p(E.x)-u)-B,1-3/B)},function(E){var B=Math.max(3,E.mrc||0);return Math.max(Math.abs(q.c2p(E.y)-v)-B,1-3/B)}),y=!1,D=0;D<f.length;D++){n=f[D];for(var x=0;x<(n.pts||[]).length;x++)c=n.pts[x],c=w(c),c<=p.distance&&(p.distance=c,y=[D,x])}if(!y)return!1;n=f[y[0]];c=n.pts[y[1]];f=d.c2p(c.x,!0);w=q.c2p(c.y,!0);y=c.mrc||
1;p=e.extendFlat({},p,{index:c.i,color:(r.marker||{}).color,name:r.name,x0:f-y,x1:f+y,y0:w-y,y1:w+y,spikeDistance:p.distance,hovertemplate:r.hovertemplate});"h"===r.orientation?(f=q,p.xLabelVal=c.x,p.yLabelVal=n.pos):(f=d,p.xLabelVal=n.pos,p.yLabelVal=c.y);w=f._id.charAt(0);p[w+"Spike"]=f.c2p(n.pos,!0);k(c,r,p);return p}var l=b("../../plots/cartesian/axes"),e=b("../../lib"),a=b("../../components/fx"),g=b("../../components/color"),k=e.fillText;F.exports={hoverPoints:function(p,n,c,f){var d=p.cd[0].trace.hoveron,
q=[],r;-1!==d.indexOf("boxes")&&(q=q.concat(m(p,n,c,f)));-1!==d.indexOf("points")&&(r=h(p,n,c));if("closest"===f)return r?[r]:q;r&&q.push(r);return q},hoverOnBoxes:m,hoverOnPoints:h}},{"../../components/color":615,"../../components/fx":655,"../../lib":749,"../../plots/cartesian/axes":797}],921:[function(b,F,C){F.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults").supplyLayoutDefaults,
calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"box",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"./attributes":915,"./calc":916,"./cross_trace_calc":917,
"./defaults":918,"./event_data":919,"./hover":920,"./layout_attributes":922,"./layout_defaults":923,"./plot":924,"./select":925,"./style":926}],922:[function(b,F,C){F.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],923:[function(b,F,C){function m(a,g,k,p,n){a=n+"Layout";g=!1;for(var c=0;c<k.length;c++)if(h.traceIs(k[c],
a)){g=!0;break}g&&(p(n+"mode"),p(n+"gap"),p(n+"groupgap"))}var h=b("../../registry"),l=b("../../lib"),e=b("./layout_attributes");F.exports={supplyLayoutDefaults:function(a,g,k){m(a,g,k,function(p,n){return l.coerce(a,g,e,p,n)},"box")},_supply:m}},{"../../lib":749,"../../registry":880,"./layout_attributes":922}],924:[function(b,F,C){function m(k,p,n,c){var f="h"===n.orientation,d=p.val,q=p.pos,r=!!q.rangebreaks,u=c.bPos,v=c.wdPos||0,w=c.bPosPxOffset||0,y=n.whiskerwidth||0,D=n.notched||!1,x=D?1-2*n.notchwidth:
1;if(Array.isArray(c.bdPos)){var E=c.bdPos[0];var B=c.bdPos[1]}else B=E=c.bdPos;k=k.selectAll("path.box").data("violin"!==n.type||n.box.visible?a.identity:[]);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");k.exit().remove();k.each(function(t){if(t.empty)return"M0,0Z";var G=q.c2l(t.pos+u,!0),I=q.l2p(G-E)+w,L=q.l2p(G+B)+w,M=r?(I+L)/2:q.l2p(G)+w,N=n.whiskerwidth,H=r?I*N+(1-N)*M:q.l2p(G-v)+w;N=r?L*N+(1-N)*M:q.l2p(G+v)+w;var J=q.l2p(G-E*x)+w;G=q.l2p(G+B*x)+w;var O=
d.c2p(t.q1,!0),Q=d.c2p(t.q3,!0),U=a.constrain(d.c2p(t.med,!0),Math.min(O,Q)+1,Math.max(O,Q)-1),P=void 0===t.lf||!1===n.boxpoints,V=d.c2p(P?t.min:t.lf,!0);P=d.c2p(P?t.max:t.uf,!0);var Y=d.c2p(t.ln,!0);t=d.c2p(t.un,!0);f?e.select(this).attr("d","M"+U+","+J+"V"+G+"M"+O+","+I+"V"+L+(D?"H"+Y+"L"+U+","+G+"L"+t+","+L:"")+"H"+Q+"V"+I+(D?"H"+t+"L"+U+","+J+"L"+Y+","+I:"")+"ZM"+O+","+M+"H"+V+"M"+Q+","+M+"H"+P+(0===y?"":"M"+V+","+H+"V"+N+"M"+P+","+H+"V"+N)):e.select(this).attr("d","M"+J+","+U+"H"+G+"M"+I+","+
O+"H"+L+(D?"V"+Y+"L"+G+","+U+"L"+L+","+t:"")+"V"+Q+"H"+I+(D?"V"+t+"L"+J+","+U+"L"+I+","+Y:"")+"ZM"+M+","+O+"V"+V+"M"+M+","+Q+"V"+P+(0===y?"":"M"+H+","+V+"H"+N+"M"+H+","+P+"H"+N))})}function h(k,p,n,c){var f=p.x;p=p.y;var d=c.bdPos,q=c.bPos,r=n.boxpoints||n.points;a.seedPseudoRandom();var u=function(v){v.forEach(function(w){w.t=c;w.trace=n});return v};k=k.selectAll("g.points").data(r?u:[]);k.enter().append("g").attr("class","points");k.exit().remove();k=k.selectAll("path").data(function(v){var w=v.pts2;
var y=Math.max((v.max-v.min)/10,v.q3-v.q1);var D=1E-9*y,x=.01*y,E=[],B=0;if(n.jitter){if(0===y)for(B=1,E=Array(w.length),y=0;y<w.length;y++)E[y]=1;else for(y=0;y<w.length;y++){var t=Math.max(0,y-5);var G=w[t].v,I=Math.min(w.length-1,y+5),L=w[I].v;"all"!==r&&(w[y].v<v.lf?L=Math.min(L,v.lf):G=Math.max(G,v.uf));t=Math.sqrt(x*(I-t)/(L-G+D))||0;t=a.constrain(Math.abs(t),0,1);E.push(t);B=Math.max(t,B)}t=2*n.jitter/(B||1)}for(y=0;y<w.length;y++)D=w[y],x=D.v,B=n.jitter?t*E[y]*(a.pseudoRandom()-.5):0,B=v.pos+
q+d*(n.pointpos+B),"h"===n.orientation?(D.y=B,D.x=x):(D.x=B,D.y=x),"suspectedoutliers"===r&&x<v.uo&&x>v.lo&&(D.so=!0);return w});k.enter().append("path").classed("point",!0);k.exit().remove();k.call(g.translatePoints,f,p)}function l(k,p,n,c){var f=p.val,d=p.pos,q=!!d.rangebreaks,r=c.bPos,u=c.bPosPxOffset||0,v=n.boxmean||(n.meanline||{}).visible;if(Array.isArray(c.bdPos)){var w=c.bdPos[0];var y=c.bdPos[1]}else y=w=c.bdPos;k=k.selectAll("path.mean").data("box"===n.type&&n.boxmean||"violin"===n.type&&
n.box.visible&&n.meanline.visible?a.identity:[]);k.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});k.exit().remove();k.each(function(D){var x=d.c2l(D.pos+r,!0),E=d.l2p(x-w)+u,B=d.l2p(x+y)+u;x=q?(E+B)/2:d.l2p(x)+u;var t=f.c2p(D.mean,!0),G=f.c2p(D.mean-D.sd,!0);D=f.c2p(D.mean+D.sd,!0);"h"===n.orientation?e.select(this).attr("d","M"+t+","+E+"V"+B+("sd"===v?"m0,0L"+G+","+x+"L"+t+","+E+"L"+D+","+x+"Z":"")):e.select(this).attr("d","M"+E+","+t+"H"+B+
("sd"===v?"m0,0L"+x+","+G+"L"+E+","+t+"L"+x+","+D+"Z":""))})}var e=b("d3"),a=b("../../lib"),g=b("../../components/drawing");F.exports={plot:function(k,p,n,c){var f=p.xaxis,d=p.yaxis;a.makeTraceGroups(c,n,"trace boxes").each(function(q){var r=e.select(this),u=q[0];q=u.t;u=u.trace;q.wdPos=q.bdPos*u.whiskerwidth;if(!0!==u.visible||q.empty)r.remove();else{if("h"===u.orientation){var v=d;var w=f}else v=f,w=d;m(r,{pos:v,val:w},u,q);h(r,{x:f,y:d},u,q);l(r,{pos:v,val:w},u,q)}})},plotBoxAndWhiskers:m,plotPoints:h,
plotBoxMean:l}},{"../../components/drawing":637,"../../lib":749,d3:169}],925:[function(b,F,C){F.exports=function(m,h){var l=m.cd,e=m.xaxis,a=m.yaxis,g=[],k,p;if(!1===h)for(k=0;k<l.length;k++)for(p=0;p<(l[k].pts||[]).length;p++)l[k].pts[p].selected=0;else for(k=0;k<l.length;k++)for(p=0;p<(l[k].pts||[]).length;p++){var n=l[k].pts[p],c=e.c2p(n.x),f=a.c2p(n.y);h.contains([c,f],null,n.i,m)?(g.push({pointNumber:n.i,x:e.c2d(n.x),y:a.c2d(n.y)}),n.selected=1):n.selected=0}return g}},{}],926:[function(b,F,
C){var m=b("d3"),h=b("../../components/color"),l=b("../../components/drawing");F.exports={style:function(e,a,g){a=g?g:m.select(e).selectAll("g.trace.boxes");a.style("opacity",function(k){return k[0].trace.opacity});a.each(function(k){function p(d,q,r,u){d.style("stroke-width",q+"px").call(h.stroke,r).call(h.fill,u)}var n=m.select(this),c=k[0].trace;k=c.line.width;var f=n.selectAll("path.box");"candlestick"===c.type?f.each(function(d){if(!d.empty){var q=m.select(this),r=c[d.dir];p(q,r.line.width,r.line.color,
r.fillcolor);q.style("opacity",c.selectedpoints&&!d.selected?.3:1)}}):(p(f,k,c.line.color,c.fillcolor),n.selectAll("path.mean").style({"stroke-width":k,"stroke-dasharray":2*k+"px,"+k+"px"}).call(h.stroke,c.line.color),n=n.selectAll("path.point"),l.pointStyle(n,c,e))})},styleOnSelect:function(e,a,g){a=a[0].trace;g=g.selectAll("path.point");a.selectedpoints?l.selectedPointStyle(g,a):l.pointStyle(g,a,e)}}},{"../../components/color":615,"../../components/drawing":637,d3:169}],927:[function(b,F,C){function m(e){return{line:{color:h({},
l.line.color,{dflt:e}),width:l.line.width,editType:"style"},fillcolor:l.fillcolor,editType:"style"}}var h=b("../../lib").extendFlat;C=b("../ohlc/attributes");var l=b("../box/attributes");F.exports={x:C.x,open:C.open,high:C.high,low:C.low,close:C.close,line:{width:h({},l.line.width,{}),editType:"style"},increasing:m(C.increasing.line.color.dflt),decreasing:m(C.decreasing.line.color.dflt),text:C.text,hovertext:C.hovertext,whiskerwidth:h({},l.whiskerwidth,{dflt:0}),hoverlabel:C.hoverlabel}},{"../../lib":749,
"../box/attributes":915,"../ohlc/attributes":1101}],928:[function(b,F,C){function m(a,g,k,p){return{min:k,q1:Math.min(a,p),med:p,q3:Math.max(a,p),max:g}}var h=b("../../lib"),l=b("../../plots/cartesian/axes"),e=b("../ohlc/calc").calcCommon;F.exports=function(a,g){var k=a._fullLayout,p=l.getFromId(a,g.xaxis),n=l.getFromId(a,g.yaxis);p=p.makeCalcdata(g,"x");a=e(a,g,p,n,m);return a.length?(h.extendFlat(a[0].t,{num:k._numBoxes,dPos:h.distinctVals(p).minDiff/2,posLetter:"x",valLetter:"y"}),k._numBoxes++,
a):[{t:{empty:!0}}]}},{"../../lib":749,"../../plots/cartesian/axes":797,"../ohlc/calc":1102}],929:[function(b,F,C){function m(g,k,p,n){g=p(n+".line.color");p(n+".line.width",k.line.width);p(n+".fillcolor",l.addOpacity(g,.5))}var h=b("../../lib"),l=b("../../components/color"),e=b("../ohlc/ohlc_defaults"),a=b("./attributes");F.exports=function(g,k,p,n){function c(f,d){return h.coerce(g,k,a,f,d)}e(g,k,c,n)?(c("line.width"),m(g,k,c,"increasing"),m(g,k,c,"decreasing"),c("text"),c("hovertext"),c("whiskerwidth"),
n._requestRangeslider[k.xaxis]=!0):k.visible=!1}},{"../../components/color":615,"../../lib":749,"../ohlc/ohlc_defaults":1106,"./attributes":927}],930:[function(b,F,C){F.exports={moduleType:"trace",name:"candlestick",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:b("./attributes"),layoutAttributes:b("../box/layout_attributes"),supplyLayoutDefaults:b("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:b("../box/cross_trace_calc").crossTraceCalc,
supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("../box/plot").plot,layerName:"boxlayer",style:b("../box/style").style,hoverPoints:b("../ohlc/hover").hoverPoints,selectPoints:b("../ohlc/select")}},{"../../plots/cartesian":810,"../box/cross_trace_calc":917,"../box/layout_attributes":922,"../box/layout_defaults":923,"../box/plot":924,"../box/style":926,"../ohlc/hover":1104,"../ohlc/select":1108,"./attributes":927,"./calc":928,"./defaults":929}],931:[function(b,F,C){function m(e,a,g,k){["aaxis",
"baxis"].forEach(function(p){var n=p.charAt(0),c=e[p]||{},f=l.newContainer(a,p);h(c,f,{tickfont:"x",id:n+"axis",letter:n,font:a.font,name:p,data:e[n],calendar:a.calendar,dfltColor:k,bgColor:g.paper_bgcolor,fullLayout:g});f._categories=f._categories||[];e[p]||"-"===c.type||(e[p]={type:c.type})})}var h=b("./axis_defaults"),l=b("../../plot_api/plot_template");F.exports=function(e,a,g,k,p){k("a")||(k("da"),k("a0"));k("b")||(k("db"),k("b0"));m(e,a,g,p)}},{"../../plot_api/plot_template":787,"./axis_defaults":936}],
932:[function(b,F,C){function m(l,e){if(!h(l)||10<=e)return null;for(var a=Infinity,g=-Infinity,k=l.length,p=0;p<k;p++){var n=l[p];if(h(n)){if(n=m(n,e+1))a=Math.min(n[0],a),g=Math.max(n[1],g)}else a=Math.min(n,a),g=Math.max(n,g)}return[a,g]}var h=b("../../lib").isArrayOrTypedArray;F.exports=function(l){return m(l,0)}},{"../../lib":749}],933:[function(b,F,C){var m=b("../../plots/font_attributes");C=b("./axis_attributes");b=b("../../components/color/attributes");m=m({editType:"calc"});m.family.dflt=
'"Open Sans", verdana, arial, sans-serif';m.size.dflt=12;m.color.dflt=b.defaultLine;F.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},
cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:C,baxis:C,font:m,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":614,"../../plots/font_attributes":825,"./axis_attributes":935}],934:[function(b,F,C){var m=b("../../lib").isArrayOrTypedArray;F.exports=function(h,l,e,a){var g=m(e)?"a":"b",k=("a"===g?h.aaxis:h.baxis).smoothing,p="a"===g?h.a2i:h.b2j,n="a"===g?e:a;a="a"===g?a:e;e="a"===g?l.a.length:l.b.length;var c="a"===g?
l.b.length:l.a.length,f=Math.floor("a"===g?h.b2j(a):h.a2i(a));l="a"===g?function(I){return h.evalxy([],I,f)}:function(I){return h.evalxy([],f,I)};if(k){var d=Math.max(0,Math.min(c-2,f));var q=f-d;var r="a"===g?function(I,L){return h.dxydi([],I,d,L,q)}:function(I,L){return h.dxydj([],d,I,q,L)}}g=p(n[0]);p=p(n[1]);n=g<p?1:-1;var u=1E-8*(p-g);var v=0<n?Math.ceil:Math.floor;a=0<n?Math.min:Math.max;c=0<n?Math.max:Math.min;var w=(0<n?Math.floor:Math.ceil)(g+u);v=v(p-u);u=l(g);for(var y=[[u]];w*n<v*n;w+=
n){var D=[];var x=c(g,w);var E=a(p,w+n);var B=E-x;var t=Math.max(0,Math.min(e-2,Math.floor(.5*(x+E))));var G=l(E);k&&(x=r(t,x-t),t=r(t,E-t),D.push([u[0]+x[0]/3*B,u[1]+x[1]/3*B]),D.push([G[0]-t[0]/3*B,G[1]-t[1]/3*B]));D.push(G);y.push(D);u=G}return y}},{"../../lib":749}],935:[function(b,F,C){C=b("../../plots/font_attributes");var m=b("../../components/color/attributes"),h=b("../../plots/cartesian/layout_attributes"),l=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");b("../../constants/docs");
F.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:C({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],
dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",
editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:C({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",
editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:l(h.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",
editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:m.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},
showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:m.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",
editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:C({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":614,"../../constants/docs":719,"../../plot_api/edit_types":780,
"../../plots/cartesian/layout_attributes":811,"../../plots/font_attributes":825}],936:[function(b,F,C){function m(f,d){if("-"===f.type){var q=f._id.charAt(0);f.type=c(d,f[q+"calendar"])}}var h=b("./attributes"),l=b("../../components/color").addOpacity,e=b("../../registry"),a=b("../../lib"),g=b("../../plots/cartesian/tick_value_defaults"),k=b("../../plots/cartesian/tick_label_defaults"),p=b("../../plots/cartesian/category_order_defaults"),n=b("../../plots/cartesian/set_convert"),c=b("../../plots/cartesian/axis_autotype");
F.exports=function(f,d,q){function r(B,t){return a.coerce(f,d,y,B,t)}function u(B,t){return a.coerce2(f,d,y,B,t)}var v=q.letter,w=q.font||{},y=h[v+"axis"];q.name&&(d._name=q.name,d._id=q.name);var D=r("type");"-"===D&&(q.data&&m(d,q.data),"-"===d.type?d.type="linear":D=f.type=d.type);r("smoothing");r("cheatertype");r("showticklabels");r("labelprefix",v+" \x3d ");r("labelsuffix");r("showtickprefix");r("showticksuffix");r("separatethousands");r("tickformat");r("exponentformat");r("showexponent");r("categoryorder");
r("tickmode");r("tickvals");r("ticktext");r("tick0");r("dtick");"array"===d.tickmode&&(r("arraytick0"),r("arraydtick"));r("labelpadding");d._hovertitle=v;"date"===D&&e.getComponentMethod("calendars","handleDefaults")(f,d,"calendar",q.calendar);n(d,q.fullLayout);d.c2p=a.identity;var x=r("color",q.dfltColor),E=x===f.color?x:w.color;r("title.text")&&(a.coerceFont(r,"title.font",{family:w.family,size:Math.round(1.2*w.size),color:E}),r("title.offset"));r("tickangle");r("autorange",!d.isValidRange(f.range))&&
r("rangemode");r("range");d.cleanRange();r("fixedrange");g(f,d,r,D);k(f,d,r,D,q);p(f,d,r,{data:q.data,dataAttr:v});q=u("gridcolor",l(x,.3));v=u("gridwidth");w=r("showgrid");w||(delete d.gridcolor,delete d.gridwidth);D=u("startlinecolor",x);E=u("startlinewidth",v);r("startline",d.showgrid||!!D||!!E)||(delete d.startlinecolor,delete d.startlinewidth);x=u("endlinecolor",x);D=u("endlinewidth",v);r("endline",d.showgrid||!!x||!!D)||(delete d.endlinecolor,delete d.endlinewidth);w?(r("minorgridcount"),r("minorgridwidth",
v),r("minorgridcolor",l(q,.06)),d.minorgridcount||(delete d.minorgridwidth,delete d.minorgridcolor)):(delete d.gridcolor,delete d.gridWidth);"none"===d.showticklabels&&(delete d.tickfont,delete d.tickangle,delete d.showexponent,delete d.exponentformat,delete d.tickformat,delete d.showticksuffix,delete d.showtickprefix);d.showticksuffix||delete d.ticksuffix;d.showtickprefix||delete d.tickprefix;r("tickmode");return d}},{"../../components/color":615,"../../lib":749,"../../plots/cartesian/axis_autotype":798,
"../../plots/cartesian/category_order_defaults":801,"../../plots/cartesian/set_convert":817,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_value_defaults":820,"../../registry":880,"./attributes":933}],937:[function(b,F,C){var m=b("../../plots/cartesian/axes"),h=b("../../lib").isArray1D,l=b("./cheater_basis"),e=b("./array_minmax"),a=b("./calc_gridlines"),g=b("./calc_labels"),k=b("./calc_clippath"),p=b("../heatmap/clean_2d_array"),n=b("./smooth_fill_2d_array"),c=b("../heatmap/convert_column_xyz"),
f=b("./set_convert");F.exports=function(d,q){var r=m.getFromId(d,q.xaxis);d=m.getFromId(d,q.yaxis);var u=q.aaxis,v=q.baxis,w=q.x,y=q.y,D=[];w&&h(w)&&D.push("x");y&&h(y)&&D.push("y");D.length&&c(q,u,v,"a","b",D);D=q._a=q._a||q.a;var x=q._b=q._b||q.b;w=q._x||q.x;y=q._y||q.y;var E={};q._cheater&&(w=l("index"===u.cheatertype?D.length:D,"index"===v.cheatertype?x.length:x,q.cheaterslope));q._x=w=p(w);q._y=y=p(y);n(w,D,x);n(y,D,x);f(q);q.setScale();var B=e(w),t=e(y),G=.5*(B[1]-B[0]);B=.5*(B[1]+B[0]);var I=
.5*(t[1]-t[0]);t=.5*(t[1]+t[0]);B=[B-1.3*G,B+1.3*G];t=[t-1.3*I,t+1.3*I];q._extremes[r._id]=m.findExtremes(r,B,{padded:!0});q._extremes[d._id]=m.findExtremes(d,t,{padded:!0});a(q,"a","b");a(q,"b","a");g(q,u);g(q,v);E.clipsegments=k(q._xctrl,q._yctrl,u,v);E.x=w;E.y=y;E.a=D;E.b=x;return[E]}},{"../../lib":749,"../../plots/cartesian/axes":797,"../heatmap/clean_2d_array":1036,"../heatmap/convert_column_xyz":1038,"./array_minmax":932,"./calc_clippath":938,"./calc_gridlines":939,"./calc_labels":940,"./cheater_basis":942,
"./set_convert":955,"./smooth_fill_2d_array":956}],938:[function(b,F,C){F.exports=function(m,h,l,e){var a,g=[];l=!!l.smoothing;var k=!!e.smoothing,p=m[0].length-1,n=m.length-1;e=0;var c=[];for(a=[];e<=p;e++)c[e]=m[0][e],a[e]=h[0][e];g.push({x:c,y:a,bicubic:l});e=0;c=[];for(a=[];e<=n;e++)c[e]=m[e][p],a[e]=h[e][p];g.push({x:c,y:a,bicubic:k});e=p;c=[];for(a=[];0<=e;e--)c[p-e]=m[n][e],a[p-e]=h[n][e];g.push({x:c,y:a,bicubic:l});e=n;c=[];for(a=[];0<=e;e--)c[n-e]=m[e][0],a[n-e]=h[e][0];g.push({x:c,y:a,bicubic:k});
return g}},{}],939:[function(b,F,C){var m=b("../../plots/cartesian/axes"),h=b("../../lib/extend").extendFlat;F.exports=function(l,e,a){function g(H){var J,O=[],Q=[],U={};if("b"===e){var P=l.b2j(H);var V=Math.floor(Math.max(0,Math.min(E-2,P)));var Y=P-V;U.length=E;U.crossLength=x;U.xy=function(ha){return l.evalxy([],ha,P)};U.dxy=function(ha,na){return l.dxydi([],ha,V,na,Y)};for(J=0;J<x;J++){var ba=Math.min(x-2,J);var ea=J-ba;var ca=l.evalxy([],J,P);if(u.smoothing&&0<J){var ia=l.dxydi([],J-1,V,0,Y);
O.push(fa[0]+ia[0]/3);Q.push(fa[1]+ia[1]/3);var fa=l.dxydi([],J-1,V,1,Y);O.push(ca[0]-fa[0]/3);Q.push(ca[1]-fa[1]/3)}O.push(ca[0]);Q.push(ca[1]);fa=ca}}else for(J=l.a2i(H),ba=Math.floor(Math.max(0,Math.min(x-2,J))),ea=J-ba,U.length=x,U.crossLength=E,U.xy=function(ha){return l.evalxy([],J,ha)},U.dxy=function(ha,na){return l.dxydj([],ba,ha,ea,na)},P=0;P<E;P++)V=Math.min(E-2,P),Y=P-V,ca=l.evalxy([],J,P),u.smoothing&&0<P&&(ia=l.dxydj([],ba,P-1,ea,0),O.push(fa[0]+ia[0]/3),Q.push(fa[1]+ia[1]/3),fa=l.dxydj([],
ba,P-1,ea,1),O.push(ca[0]-fa[0]/3),Q.push(ca[1]-fa[1]/3)),O.push(ca[0]),Q.push(ca[1]),fa=ca;U.axisLetter=e;U.axis=c;U.crossAxis=u;U.value=H;U.constvar=a;U.index=p;U.x=O;U.y=Q;U.smoothing=u.smoothing;return U}function k(H){var J,O=[],Q=[],U={};U.length=n.length;U.crossLength=r.length;if("b"===e){var P=Math.max(0,Math.min(E-2,H));var V=Math.min(1,Math.max(0,H-P));U.xy=function(ea){return l.evalxy([],ea,H)};U.dxy=function(ea,ca){return l.dxydi([],ea,P,ca,V)};for(J=0;J<y;J++)O[J]=v[H*B][J],Q[J]=w[H*B][J]}else{var Y=
Math.max(0,Math.min(x-2,H));var ba=Math.min(1,Math.max(0,H-Y));U.xy=function(ea){return l.evalxy([],H,ea)};U.dxy=function(ea,ca){return l.dxydj([],Y,ea,ba,ca)};for(J=0;J<D;J++)O[J]=v[J][H*B],Q[J]=w[J][H*B]}U.axisLetter=e;U.axis=c;U.crossAxis=u;U.value=n[H];U.constvar=a;U.index=H;U.x=O;U.y=Q;U.smoothing=u.smoothing;return U}var p,n=l["_"+e],c=l[e+"axis"];var f=c._gridlines=[];var d=c._minorgridlines=[],q=c._boundarylines=[],r=l["_"+a],u=l[a+"axis"];"array"===c.tickmode&&(c.tickvals=n.slice());var v=
l._xctrl,w=l._yctrl,y=v[0].length,D=v.length,x=l._a.length,E=l._b.length;m.prepTicks(c);"array"===c.tickmode&&delete c.tickvals;var B=c.smoothing?3:1;if("array"===c.tickmode){var t=5E-15;t=[Math.floor((n.length-1-c.arraytick0)/c.arraydtick*(1+t)),Math.ceil(-c.arraytick0/c.arraydtick/(1+t))].sort(function(H,J){return H-J});var G=t[0]-1;t=t[1]+1;for(p=G;p<t;p++){var I=c.arraytick0+c.arraydtick*p;0>I||I>n.length-1||f.push(h(k(I),{color:c.gridcolor,width:c.gridwidth}))}for(p=G;p<t;p++){G=c.arraytick0+
c.arraydtick*p;var L=Math.min(G+c.arraydtick,n.length-1);if(!(0>G||G>n.length-1||0>L||L>n.length-1)){var M=n[G];var N=n[L];for(f=0;f<c.minorgridcount;f++)I=L-G,0>=I||(I=M+(N-M)*(f+1)/(c.minorgridcount+1)*(c.arraydtick/I),I<n[0]||I>n[n.length-1]||d.push(h(g(I),{color:c.minorgridcolor,width:c.minorgridwidth})))}}c.startline&&q.push(h(k(0),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&q.push(h(k(n.length-1),{color:c.endlinecolor,width:c.endlinewidth}))}else{t=5E-15;t=[Math.floor((n[n.length-
1]-c.tick0)/c.dtick*(1+t)),Math.ceil((n[0]-c.tick0)/c.dtick/(1+t))].sort(function(H,J){return H-J});G=t[0];t=t[1];for(p=G;p<=t;p++)L=c.tick0+c.dtick*p,f.push(h(g(L),{color:c.gridcolor,width:c.gridwidth}));for(p=G-1;p<t+1;p++)for(L=c.tick0+c.dtick*p,f=0;f<c.minorgridcount;f++)I=L+c.dtick*(f+1)/(c.minorgridcount+1),I<n[0]||I>n[n.length-1]||d.push(h(g(I),{color:c.minorgridcolor,width:c.minorgridwidth}));c.startline&&q.push(h(g(n[0]),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&q.push(h(g(n[n.length-
1]),{color:c.endlinecolor,width:c.endlinewidth}))}}},{"../../lib/extend":739,"../../plots/cartesian/axes":797}],940:[function(b,F,C){var m=b("../../plots/cartesian/axes"),h=b("../../lib/extend").extendFlat;F.exports=function(l,e){var a=e._labels=[],g=e._gridlines;for(l=0;l<g.length;l++){var k=g[l];if(-1!==["start","both"].indexOf(e.showticklabels)){var p=m.tickText(e,k.value);h(p,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:k.xy(0),dxy:k.dxy(0,0),axis:k.axis,length:k.crossAxis.length,font:k.axis.tickfont,
isFirst:0===l,isLast:l===g.length-1});a.push(p)}-1!==["end","both"].indexOf(e.showticklabels)&&(p=m.tickText(e,k.value),h(p,{endAnchor:!1,xy:k.xy(k.crossLength-1),dxy:k.dxy(k.crossLength-2,1),axis:k.axis,length:k.crossAxis.length,font:k.axis.tickfont,isFirst:0===l,isLast:l===g.length-1}),a.push(p))}}},{"../../lib/extend":739,"../../plots/cartesian/axes":797}],941:[function(b,F,C){F.exports=function(m,h,l,e){var a=m[0]-h[0],g=m[1]-h[1],k=l[0]-h[0],p=l[1]-h[1];l=Math.pow(a*a+g*g,.25);m=Math.pow(k*k+
p*p,.25);a=(m*m*a-l*l*k)*e;e*=m*m*g-l*l*p;g=m*(l+m)*3;l=l*(l+m)*3;return[[h[0]+(g&&a/g),h[1]+(g&&e/g)],[h[0]-(l&&a/l),h[1]-(l&&e/l)]]}},{}],942:[function(b,F,C){var m=b("../../lib").isArrayOrTypedArray;F.exports=function(h,l,e){var a,g,k=[],p=m(h)?h.length:h,n=m(l)?l.length:l,c=m(h)?h:null,f=m(l)?l:null;c&&(a=(c.length-1)/(c[c.length-1]-c[0])/(p-1));f&&(g=(f.length-1)/(f[f.length-1]-f[0])/(n-1));var d=Infinity,q=-Infinity;for(h=0;h<n;h++){k[h]=[];var r=f?(f[h]-f[0])*g:h/(n-1);for(l=0;l<p;l++){var u=
c?(c[l]-c[0])*a:l/(p-1);u-=r*e;d=Math.min(u,d);q=Math.max(u,q);k[h][l]=u}}e=1/(q-d);a=-d*e;for(h=0;h<n;h++)for(l=0;l<p;l++)k[h][l]=e*k[h][l]+a;return k}},{"../../lib":749}],943:[function(b,F,C){function m(e,a,g){return[(2*(-.5*g[0]+1.5*a[0])+e[0])/3,(2*(-.5*g[1]+1.5*a[1])+e[1])/3]}var h=b("./catmull_rom"),l=b("../../lib").ensureArray;F.exports=function(e,a,g,k,p,n){var c,f,d,q,r=g[0].length,u=g.length,v=p?3*r-2:r,w=n?3*u-2:u;e=l(e,w);a=l(a,w);for(d=0;d<w;d++)e[d]=l(e[d],v),a[d]=l(a[d],v);for(q=f=
0;f<u;f++,q+=n?3:1){var y=e[q];var D=a[q];var x=g[f];var E=k[f];for(d=c=0;c<r;c++,d+=p?3:1)y[d]=x[c],D[d]=E[c]}if(p)for(q=f=0;f<u;f++,q+=n?3:1){c=1;for(d=3;c<r-1;c++,d+=3)y=h([g[f][c-1],k[f][c-1]],[g[f][c],k[f][c]],[g[f][c+1],k[f][c+1]],p),e[q][d-1]=y[0][0],a[q][d-1]=y[0][1],e[q][d+1]=y[1][0],a[q][d+1]=y[1][1];c=m([e[q][0],a[q][0]],[e[q][2],a[q][2]],[e[q][3],a[q][3]]);e[q][1]=c[0];a[q][1]=c[1];c=m([e[q][v-1],a[q][v-1]],[e[q][v-3],a[q][v-3]],[e[q][v-4],a[q][v-4]]);e[q][v-2]=c[0];a[q][v-2]=c[1]}if(n)for(d=
0;d<v;d++){for(q=3;q<w-3;q+=3)y=h([e[q-3][d],a[q-3][d]],[e[q][d],a[q][d]],[e[q+3][d],a[q+3][d]],n),e[q-1][d]=y[0][0],a[q-1][d]=y[0][1],e[q+1][d]=y[1][0],a[q+1][d]=y[1][1];c=m([e[0][d],a[0][d]],[e[2][d],a[2][d]],[e[3][d],a[3][d]]);e[1][d]=c[0];a[1][d]=c[1];c=m([e[w-1][d],a[w-1][d]],[e[w-3][d],a[w-3][d]],[e[w-4][d],a[w-4][d]]);e[w-2][d]=c[0];a[w-2][d]=c[1]}if(p&&n)for(q=1;q<w;q+=0===(q+1)%3?2:1){for(d=3;d<v-3;d+=3)y=h([e[q][d-3],a[q][d-3]],[e[q][d],a[q][d]],[e[q][d+3],a[q][d+3]],p),e[q][d-1]=.5*(e[q][d-
1]+y[0][0]),a[q][d-1]=.5*(a[q][d-1]+y[0][1]),e[q][d+1]=.5*(e[q][d+1]+y[1][0]),a[q][d+1]=.5*(a[q][d+1]+y[1][1]);c=m([e[q][0],a[q][0]],[e[q][2],a[q][2]],[e[q][3],a[q][3]]);e[q][1]=.5*(e[q][1]+c[0]);a[q][1]=.5*(a[q][1]+c[1]);c=m([e[q][v-1],a[q][v-1]],[e[q][v-3],a[q][v-3]],[e[q][v-4],a[q][v-4]]);e[q][v-2]=.5*(e[q][v-2]+c[0]);a[q][v-2]=.5*(a[q][v-2]+c[1])}return[e,a]}},{"../../lib":749,"./catmull_rom":941}],944:[function(b,F,C){F.exports={RELATIVE_CULL_TOLERANCE:1E-6}},{}],945:[function(b,F,C){F.exports=
function(m,h,l){return h&&l?function(e,a,g,k,p){e||(e=[]);var n;a*=3;g*=3;var c=k*k;var f=1-k,d=f*f;f=f*k*2;k=-3*d;d=3*(d-f);f=3*(f-c);var q=3*c,r=p*p,u=r*p,v=1-p,w=v*v,y=w*v;for(n=0;n<m.length;n++){var D=m[n];c=k*D[g][a]+d*D[g][a+1]+f*D[g][a+2]+q*D[g][a+3];var x=k*D[g+1][a]+d*D[g+1][a+1]+f*D[g+1][a+2]+q*D[g+1][a+3];var E=k*D[g+2][a]+d*D[g+2][a+1]+f*D[g+2][a+2]+q*D[g+2][a+3];D=k*D[g+3][a]+d*D[g+3][a+1]+f*D[g+3][a+2]+q*D[g+3][a+3];e[n]=y*c+3*(w*p*x+v*r*E)+u*D}return e}:h?function(e,a,g,k,p){e||(e=
[]);var n;a*=3;var c=k*k;var f=1-k,d=f*f;f=f*k*2;k=-3*d;d=3*(d-f);f=3*(f-c);var q=3*c,r=1-p;for(n=0;n<m.length;n++){var u=m[n];c=k*u[g][a]+d*u[g][a+1]+f*u[g][a+2]+q*u[g][a+3];u=k*u[g+1][a]+d*u[g+1][a+1]+f*u[g+1][a+2]+q*u[g+1][a+3];e[n]=r*c+p*u}return e}:l?function(e,a,g,k,p){e||(e=[]);var n;g*=3;var c=p*p,f=c*p,d=1-p,q=d*d,r=q*d;for(n=0;n<m.length;n++){var u=m[n];k=u[g][a+1]-u[g][a];var v=u[g+1][a+1]-u[g+1][a];var w=u[g+2][a+1]-u[g+2][a];u=u[g+3][a+1]-u[g+3][a];e[n]=r*k+3*(q*p*v+d*c*w)+f*u}return e}:
function(e,a,g,k,p){e||(e=[]);var n,c=1-p;for(n=0;n<m.length;n++){var f=m[n];k=f[g][a+1]-f[g][a];f=f[g+1][a+1]-f[g+1][a];e[n]=c*k+p*f}return e}}},{}],946:[function(b,F,C){F.exports=function(m,h,l){return h&&l?function(e,a,g,k,p){e||(e=[]);var n;a*=3;g*=3;var c=k*k,f=c*k,d=1-k,q=d*d,r=q*d;var u=p*p;var v=1-p,w=v*v;v=v*p*2;p=-3*w;w=3*(w-v);v=3*(v-u);var y=3*u;for(n=0;n<m.length;n++){var D=m[n];u=p*D[g][a]+w*D[g+1][a]+v*D[g+2][a]+y*D[g+3][a];var x=p*D[g][a+1]+w*D[g+1][a+1]+v*D[g+2][a+1]+y*D[g+3][a+1];
var E=p*D[g][a+2]+w*D[g+1][a+2]+v*D[g+2][a+2]+y*D[g+3][a+2];D=p*D[g][a+3]+w*D[g+1][a+3]+v*D[g+2][a+3]+y*D[g+3][a+3];e[n]=r*u+3*(q*k*x+d*c*E)+f*D}return e}:h?function(e,a,g,k,p){e||(e=[]);var n;a*=3;var c=p*p,f=c*p,d=1-p,q=d*d,r=q*d;for(n=0;n<m.length;n++){var u=m[n];k=u[g+1][a]-u[g][a];var v=u[g+1][a+1]-u[g][a+1];var w=u[g+1][a+2]-u[g][a+2];u=u[g+1][a+3]-u[g][a+3];e[n]=r*k+3*(q*p*v+d*c*w)+f*u}return e}:l?function(e,a,g,k,p){e||(e=[]);var n;g*=3;var c=1-k;var f=p*p;var d=1-p,q=d*d;d=d*p*2;p=-3*q;q=
3*(q-d);d=3*(d-f);var r=3*f;for(n=0;n<m.length;n++){var u=m[n];f=p*u[g][a]+q*u[g+1][a]+d*u[g+2][a]+r*u[g+3][a];u=p*u[g][a+1]+q*u[g+1][a+1]+d*u[g+2][a+1]+r*u[g+3][a+1];e[n]=c*f+k*u}return e}:function(e,a,g,k,p){e||(e=[]);var n,c=1-k;for(n=0;n<m.length;n++){var f=m[n];p=f[g+1][a]-f[g][a];f=f[g+1][a+1]-f[g][a+1];e[n]=c*p+k*f}return e}}},{}],947:[function(b,F,C){F.exports=function(m,h,l,e,a){var g=h-2,k=l-2;return e&&a?function(p,n,c){p||(p=[]);var f,d=Math.max(0,Math.min(Math.floor(n),g)),q=Math.max(0,
Math.min(Math.floor(c),k));n=Math.max(0,Math.min(1,n-d));var r=Math.max(0,Math.min(1,c-q));d*=3;q*=3;var u=n*n,v=u*n,w=1-n,y=w*w,D=y*w,x=r*r,E=x*r,B=1-r,t=B*B,G=t*B;for(f=0;f<m.length;f++){var I=m[f];c=D*I[q][d]+3*(y*n*I[q][d+1]+w*u*I[q][d+2])+v*I[q][d+3];var L=D*I[q+1][d]+3*(y*n*I[q+1][d+1]+w*u*I[q+1][d+2])+v*I[q+1][d+3];var M=D*I[q+2][d]+3*(y*n*I[q+2][d+1]+w*u*I[q+2][d+2])+v*I[q+2][d+3];I=D*I[q+3][d]+3*(y*n*I[q+3][d+1]+w*u*I[q+3][d+2])+v*I[q+3][d+3];p[f]=G*c+3*(t*r*L+B*x*M)+E*I}return p}:e?function(p,
n,c){p||(p=[]);var f=Math.max(0,Math.min(Math.floor(n),g)),d=Math.max(0,Math.min(Math.floor(c),k));n=Math.max(0,Math.min(1,n-f));c=Math.max(0,Math.min(1,c-d));var q;f*=3;var r=n*n,u=r*n,v=1-n,w=v*v,y=w*v,D=1-c;for(q=0;q<m.length;q++){var x=m[q];var E=D*x[d][f]+c*x[d+1][f];var B=D*x[d][f+1]+c*x[d+1][f+1];var t=D*x[d][f+2]+c*x[d+1][f+1];x=D*x[d][f+3]+c*x[d+1][f+1];p[q]=y*E+3*(w*n*B+v*r*t)+u*x}return p}:a?function(p,n,c){p||(p=[]);var f=Math.max(0,Math.min(Math.floor(n),g)),d=Math.max(0,Math.min(Math.floor(c),
k));n=Math.max(0,Math.min(1,n-f));c=Math.max(0,Math.min(1,c-d));var q;d*=3;var r=c*c,u=r*c,v=1-c,w=v*v,y=w*v,D=1-n;for(q=0;q<m.length;q++){var x=m[q];var E=D*x[d][f]+n*x[d][f+1];var B=D*x[d+1][f]+n*x[d+1][f+1];var t=D*x[d+2][f]+n*x[d+2][f+1];x=D*x[d+3][f]+n*x[d+3][f+1];p[q]=y*E+3*(w*c*B+v*r*t)+u*x}return p}:function(p,n,c){p||(p=[]);var f=Math.max(0,Math.min(Math.floor(n),g)),d=Math.max(0,Math.min(Math.floor(c),k));n=Math.max(0,Math.min(1,n-f));c=Math.max(0,Math.min(1,c-d));var q,r=1-c,u=1-n;for(q=
0;q<m.length;q++){var v=m[q];var w=u*v[d][f]+n*v[d][f+1];v=u*v[d+1][f]+n*v[d+1][f+1];p[q]=r*w+c*v}return p}}},{}],948:[function(b,F,C){var m=b("../../lib"),h=b("./xy_defaults"),l=b("./ab_defaults"),e=b("./attributes"),a=b("../../components/color/attributes");F.exports=function(g,k,p,n){function c(f,d){return m.coerce(g,k,e,f,d)}k._clipPathId="clip"+k.uid+"carpet";p=c("color",a.defaultLine);m.coerceFont(c,"font");c("carpet");l(g,k,n,c,p);k.a&&k.b?(3>k.a.length&&(k.aaxis.smoothing=0),3>k.b.length&&
(k.baxis.smoothing=0),h(g,k,c)||(k.visible=!1),k._cheater&&c("cheaterslope")):k.visible=!1}},{"../../components/color/attributes":614,"../../lib":749,"./ab_defaults":931,"./attributes":933,"./xy_defaults":957}],949:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),plot:b("./plot"),calc:b("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory noHover noSortingByValue".split(" "),
meta:{}}},{"../../plots/cartesian":810,"./attributes":933,"./calc":937,"./defaults":948,"./plot":954}],950:[function(b,F,C){F.exports=function(m,h){for(var l=m._fullData.length,e,a=0;a<l;a++){var g=m._fullData[a];if(g.index!==h.index&&"carpet"===g.type&&(e||(e=g),g.carpet===h.carpet))return g}return e}},{}],951:[function(b,F,C){F.exports=function(m,h,l){if(0===m.length)return"";var e,a=[],g=l?3:1;for(e=0;e<m.length;e+=g)a.push(m[e]+","+h[e]),l&&e<m.length-g&&(a.push("C"),a.push([m[e+1]+","+h[e+1],
m[e+2]+","+h[e+2]+" "].join(" ")));return a.join(l?"":"L")}},{}],952:[function(b,F,C){var m=b("../../lib").isArrayOrTypedArray;F.exports=function(h,l,e){var a;m(h)?h.length>l.length&&(h=h.slice(0,l.length)):h=[];for(a=0;a<l.length;a++)h[a]=e(l[a]);return h}},{"../../lib":749}],953:[function(b,F,C){F.exports=function(m,h,l,e,a,g){var k=a[0]*m.dpdx(h),p=a[1]*m.dpdy(l),n=1,c=1;g&&(c=Math.max(0,(a[0]*g[0]+a[1]*g[1])/Math.sqrt(a[0]*a[0]+a[1]*a[1])/Math.sqrt(g[0]*g[0]+g[1]*g[1])));a=180*Math.atan2(p,k)/
Math.PI;-90>a?(a+=180,n=-n):90<a&&(a-=180,n=-n);return{angle:a,flip:n,p:m.c2p(e,h,l),offsetMultplier:c}}},{}],954:[function(b,F,C){function m(q,r,u,v,w,y){v="const-"+w+"-lines";u=u.selectAll("."+v).data(y);u.enter().append("path").classed(v,!0).style("vector-effect","non-scaling-stroke");u.each(function(D){var x=D.y,E=g([],D.x,q.c2p);x=g([],x,r.c2p);E="M"+k(E,x,D.smoothing);e.select(this).attr("d",E).style("stroke-width",D.width).style("stroke",D.color).style("fill","none")});u.exit().remove()}function h(q,
r,u,v,w,y,D,x){w=y.selectAll("text."+x).data(D);w.enter().append("text").classed(x,!0);var E=0,B={};w.each(function(t,G){if("auto"===t.axis.tickangle)var I=p(v,r,u,t.xy,t.dxy);else I=(t.axis.tickangle+180)*Math.PI/180,I=p(v,r,u,t.xy,[Math.cos(I),Math.sin(I)]);G||(B={angle:I.angle,flip:I.flip});G=(t.endAnchor?-1:1)*I.flip;var L=e.select(this).attr({"text-anchor":0<G?"start":"end","data-notex":1}).call(a.font,t.font).text(t.text).call(n.convertToTspans,q),M=a.bBox(this);L.attr("transform","translate("+
I.p[0]+","+I.p[1]+") rotate("+I.angle+")translate("+t.axis.labelpadding*G+","+.3*M.height+")");E=Math.max(E,M.width+t.axis.labelpadding)});w.exit().remove();B.maxExtent=E;return B}function l(q,r,u,v,w,y,D,x,E,B,t){v=[];D.title.text&&v.push(D.title.text);r=r.selectAll("text."+t).data(v);var G=B.maxExtent;r.enter().append("text").classed(t,!0);r.each(function(){var I=p(u,x,E,w,y);-1===["start","both"].indexOf(D.showticklabels)&&(G=0);var L=D.title.font.size;G+=L+D.title.offset;var M=(B.angle+(0>B.flip?
180:0)-I.angle+450)%360;M=90<M&&270>M;var N=e.select(this);N.text(D.title.text).call(n.convertToTspans,q);M&&(G=(-n.lineCount(N)+d)*f*L-G);N.attr("transform","translate("+I.p[0]+","+I.p[1]+") rotate("+I.angle+") translate(0,"+G+")").classed("user-select-none",!0).attr("text-anchor","middle").call(a.font,D.title.font)});r.exit().remove()}var e=b("d3"),a=b("../../components/drawing"),g=b("./map_1d_array"),k=b("./makepath"),p=b("./orient_text"),n=b("../../lib/svg_text_utils"),c=b("../../lib");b=b("../../constants/alignment");
F.exports=function(q,r,u,v){var w=r.xaxis,y=r.yaxis,D=q._fullLayout._clips;c.makeTraceGroups(v,u,"trace").each(function(x){var E=e.select(this),B=x[0];x=B.trace;var t=x.aaxis,G=x.baxis,I=c.ensureSingle(E,"g","minorlayer"),L=c.ensureSingle(E,"g","majorlayer"),M=c.ensureSingle(E,"g","boundarylayer"),N=c.ensureSingle(E,"g","labellayer");E.style("opacity",x.opacity);m(w,y,L,t,"a",t._gridlines,!0);m(w,y,L,G,"b",G._gridlines,!0);m(w,y,I,t,"a",t._minorgridlines,!0);m(w,y,I,G,"b",G._minorgridlines,!0);m(w,
y,M,t,"a-boundary",t._boundarylines);m(w,y,M,G,"b-boundary",G._boundarylines);E=h(q,w,y,x,B,N,t._labels,"a-label");G=h(q,w,y,x,B,N,G._labels,"b-label");t=c.aggNums(Math.min,null,x.a);M=c.aggNums(Math.max,null,x.a);I=c.aggNums(Math.min,null,x.b);L=c.aggNums(Math.max,null,x.b);M=.5*(t+M);var H=I;var J=x.ab2xy(M,H,!0);var O=x.dxyda_rough(M,H);void 0===E.angle&&c.extendFlat(E,p(x,w,y,J,x.dxydb_rough(M,H)));l(q,N,x,B,J,O,x.aaxis,w,y,E,"a-title");M=t;H=.5*(I+L);J=x.ab2xy(M,H,!0);O=x.dxydb_rough(M,H);void 0===
G.angle&&c.extendFlat(G,p(x,w,y,J,x.dxyda_rough(M,H)));l(q,N,x,B,J,O,x.baxis,w,y,G,"b-title");N=D.select("#"+x._clipPathId);N.size()||(N=D.append("clipPath").classed("carpetclip",!0));E=c.ensureSingle(N,"path","carpetboundary");L=B.clipsegments;M=[];for(I=0;I<L.length;I++)B=L[I],G=g([],B.x,w.c2p),t=g([],B.y,y.c2p),M.push(k(G,t,B.bicubic));B="M"+M.join("L")+"Z";N.attr("id",x._clipPathId);E.attr("d",B)})};var f=b.LINE_SPACING,d=(1-b.MID_SHIFT)/f+1},{"../../components/drawing":637,"../../constants/alignment":717,
"../../lib":749,"../../lib/svg_text_utils":773,"./makepath":951,"./map_1d_array":952,"./orient_text":953,d3:169}],955:[function(b,F,C){var m=b("./constants"),h=b("../../lib/search").findBin,l=b("./compute_control_points"),e=b("./create_spline_evaluator"),a=b("./create_i_derivative_evaluator"),g=b("./create_j_derivative_evaluator");F.exports=function(k){var p=k._a,n=k._b,c=p.length,f=n.length,d=k.aaxis,q=k.baxis,r=p[0],u=p[c-1],v=n[0],w=n[f-1],y=p[p.length-1]-p[0],D=n[n.length-1]-n[0],x=y*m.RELATIVE_CULL_TOLERANCE,
E=D*m.RELATIVE_CULL_TOLERANCE;r-=x;u+=x;v-=E;w+=E;k.isVisible=function(B,t){return B>r&&B<u&&t>v&&t<w};k.isOccluded=function(B,t){return B<r||B>u||t<v||t>w};k.setScale=function(){var B=l(k._xctrl,k._yctrl,k._x,k._y,d.smoothing,q.smoothing);k._xctrl=B[0];k._yctrl=B[1];k.evalxy=e([k._xctrl,k._yctrl],c,f,d.smoothing,q.smoothing);k.dxydi=a([k._xctrl,k._yctrl],d.smoothing,q.smoothing);k.dxydj=g([k._xctrl,k._yctrl],d.smoothing,q.smoothing)};k.i2a=function(B){var t=Math.max(0,Math.floor(B[0]),c-2);B=B[0]-
t;return(1-B)*p[t]+B*p[t+1]};k.j2b=function(B){var t=Math.max(0,Math.floor(B[1]),c-2);B=B[1]-t;return(1-B)*n[t]+B*n[t+1]};k.ij2ab=function(B){return[k.i2a(B[0]),k.j2b(B[1])]};k.a2i=function(B){var t=Math.max(0,Math.min(h(B,p),c-2)),G=p[t];return Math.max(0,Math.min(c-1,t+(B-G)/(p[t+1]-G)))};k.b2j=function(B){var t=Math.max(0,Math.min(h(B,n),f-2)),G=n[t];return Math.max(0,Math.min(f-1,t+(B-G)/(n[t+1]-G)))};k.ab2ij=function(B){return[k.a2i(B[0]),k.b2j(B[1])]};k.i2c=function(B,t){return k.evalxy([],
B,t)};k.ab2xy=function(B,t,G){if(!G&&(B<p[0]||B>p[c-1]|t<n[0]||t>n[f-1]))return[!1,!1];var I=k.a2i(B),L=k.b2j(t),M=k.evalxy([],I,L);if(G){var N=G=0,H=[],J;B<p[0]?(I=J=0,G=(B-p[0])/(p[1]-p[0])):B>p[c-1]?(J=c-2,I=1,G=(B-p[c-1])/(p[c-1]-p[c-2])):(J=Math.max(0,Math.min(c-2,Math.floor(I))),I-=J);t<n[0]?(L=B=0,N=(t-n[0])/(n[1]-n[0])):t>n[f-1]?(B=f-2,L=1,N=(t-n[f-1])/(n[f-1]-n[f-2])):(B=Math.max(0,Math.min(f-2,Math.floor(L))),L-=B);G&&(k.dxydi(H,J,B,I,L),M[0]+=H[0]*G,M[1]+=H[1]*G);N&&(k.dxydj(H,J,B,I,L),
M[0]+=H[0]*N,M[1]+=H[1]*N)}return M};k.c2p=function(B,t,G){return[t.c2p(B[0]),G.c2p(B[1])]};k.p2x=function(B,t,G){return[t.p2c(B[0]),G.p2c(B[1])]};k.dadi=function(B){B=Math.max(0,Math.min(p.length-2,B));return p[B+1]-p[B]};k.dbdj=function(B){B=Math.max(0,Math.min(n.length-2,B));return n[B+1]-n[B]};k.dxyda=function(B,t,G,I){t=k.dxydi(null,B,t,G,I);B=k.dadi(B,G);return[t[0]/B,t[1]/B]};k.dxydb=function(B,t,G,I){B=k.dxydj(null,B,t,G,I);t=k.dbdj(t,I);return[B[0]/t,B[1]/t]};k.dxyda_rough=function(B,t,G){G=
y*(G||.1);var I=k.ab2xy(B+G,t,!0);B=k.ab2xy(B-G,t,!0);return[.5*(I[0]-B[0])/G,.5*(I[1]-B[1])/G]};k.dxydb_rough=function(B,t,G){G=D*(G||.1);var I=k.ab2xy(B,t+G,!0);B=k.ab2xy(B,t-G,!0);return[.5*(I[0]-B[0])/G,.5*(I[1]-B[1])/G]};k.dpdx=function(B){return B._m};k.dpdy=function(B){return B._m}}},{"../../lib/search":768,"./compute_control_points":943,"./constants":944,"./create_i_derivative_evaluator":945,"./create_j_derivative_evaluator":946,"./create_spline_evaluator":947}],956:[function(b,F,C){var m=
b("../../lib");F.exports=function(h,l,e){var a,g,k=[],p=[],n=h[0].length,c=h.length,f=0;for(a=0;a<n;a++)for(g=0;g<c;g++){if(void 0===h[g][a]){k.push(a);p.push(g);var d=h[g];var q=a,r=void 0,u=0,v=0;0<a&&void 0!==(r=h[g][a-1])&&(v++,u+=r);a<n-1&&void 0!==(r=h[g][a+1])&&(v++,u+=r);0<g&&void 0!==(r=h[g-1][a])&&(v++,u+=r);g<c-1&&void 0!==(r=h[g+1][a])&&(v++,u+=r);d[q]=u/Math.max(1,v)}f=Math.max(f,Math.abs(h[g][a]))}if(!k.length)return h;r=0;u=k.length;do{for(d=q=0;d<u;d++){a=k[d];g=p[d];var w=v=0;if(0===
a){var y=Math.min(n-1,2);var D=l[y];var x=l[1];y=h[g][y];var E=h[g][1];w+=E+(E-y)*(l[0]-x)/(x-D);v++}else a===n-1&&(y=Math.max(0,n-3),D=l[y],x=l[n-2],y=h[g][y],E=h[g][n-2],w+=E+(E-y)*(l[n-1]-x)/(x-D),v++);(0===a||a===n-1)&&0<g&&g<c-1&&(D=e[g+1]-e[g],x=e[g]-e[g-1],w+=(x*h[g+1][a]+D*h[g-1][a])/(x+D),v++);0===g?(y=Math.min(c-1,2),D=e[y],x=e[1],y=h[y][a],E=h[1][a],w+=E+(E-y)*(e[0]-x)/(x-D),v++):g===c-1&&(y=Math.max(0,c-3),D=e[y],x=e[c-2],y=h[y][a],E=h[c-2][a],w+=E+(E-y)*(e[c-1]-x)/(x-D),v++);(0===g||
g===c-1)&&0<a&&a<n-1&&(D=l[a+1]-l[a],x=l[a]-l[a-1],w+=(x*h[g][a+1]+D*h[g][a-1])/(x+D),v++);if(v)w/=v;else{w=l[a+1]-l[a];D=l[a]-l[a-1];x=e[g+1]-e[g];y=e[g]-e[g-1];E=w*D*(w+D);var B=x*y*(x+y);w=(E*(y*h[g+1][a]+x*h[g-1][a])+B*(D*h[g][a+1]+w*h[g][a-1]))/(B*(D+w)+E*(y+x))}w-=h[g][a];D=w/f;q+=D*D;v=v?0:.85;h[g][a]+=w*(1+v)}q=Math.sqrt(q)}while(100>r++&&1E-5<q);m.log("Smoother converged to",q,"after",r,"iterations");return h}},{"../../lib":749}],957:[function(b,F,C){var m=b("../../lib").isArray1D;F.exports=
function(h,l,e){var a=(h=e("x"))&&h.length,g=(e=e("y"))&&e.length;if(!a&&!g)return!1;l._cheater=!h;a&&!m(h)||g&&!m(e)?l._length=null:(h=a?h.length:Infinity,g&&(h=Math.min(h,e.length)),l.a&&l.a.length&&(h=Math.min(h,l.a.length)),l.b&&l.b.length&&(h=Math.min(h,l.b.length)),l._length=h);return!0}},{"../../lib":749}],958:[function(b,F,C){C=b("../../plots/template_attributes").hovertemplateAttrs;var m=b("../scattergeo/attributes"),h=b("../../components/colorscale/attributes"),l=b("../../plots/attributes"),
e=b("../../components/color/attributes").defaultLine;b=b("../../lib/extend").extendFlat;var a=m.marker.line;F.exports=b({locations:{valType:"data_array",editType:"calc"},locationmode:m.locationmode,z:{valType:"data_array",editType:"calc"},geojson:b({},m.geojson,{}),featureidkey:m.featureidkey,text:b({},m.text,{}),hovertext:b({},m.hovertext,{}),marker:{line:{color:b({},a.color,{dflt:e}),width:b({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},
editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:m.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:b({},l.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:C(),showlegend:b({},l.showlegend,{dflt:!1})},h("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":614,"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,
"../../plots/template_attributes":875,"../scattergeo/attributes":1196}],959:[function(b,F,C){function m(k){return k&&"string"===typeof k}var h=b("fast-isnumeric"),l=b("../../constants/numerical").BADNUM,e=b("../../components/colorscale/calc"),a=b("../scatter/arrays_to_calcdata"),g=b("../scatter/calc_selection");F.exports=function(k,p){var n=p._length,c=Array(n);var f=p.geojson?function(v){return m(v)||h(v)}:m;for(var d=0;d<n;d++){var q=c[d]={},r=p.locations[d],u=p.z[d];f(r)&&h(u)?(q.loc=r,q.z=u):
(q.loc=null,q.z=l);q.index=d}a(c,p);e(k,p,{vals:p.z,containerStr:"",cLetter:"z"});g(c,p);return c}},{"../../components/colorscale/calc":623,"../../constants/numerical":724,"../scatter/arrays_to_calcdata":1154,"../scatter/calc_selection":1157,"fast-isnumeric":241}],960:[function(b,F,C){var m=b("../../lib"),h=b("../../components/colorscale/defaults"),l=b("./attributes");F.exports=function(e,a,g,k){function p(f,d){return m.coerce(e,a,l,f,d)}g=p("locations");var n=p("z");if(g&&g.length&&m.isArrayOrTypedArray(n)&&
n.length){a._length=Math.min(g.length,n.length);g=p("geojson");if("string"===typeof g&&""!==g||m.isPlainObject(g))var c="geojson-id";"geojson-id"===p("locationmode",c)&&p("featureidkey");p("text");p("hovertext");p("hovertemplate");p("marker.line.width")&&p("marker.line.color");p("marker.opacity");h(e,a,k,p,{prefix:"",cLetter:"z"});m.coerceSelectionMarkerOpacity(a,p)}else a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":958}],961:[function(b,F,C){F.exports=
function(m,h,l,e,a){m.location=h.location;m.z=h.z;h=e[a];h.fIn&&h.fIn.properties&&(m.properties=h.fIn.properties);m.ct=h.ct;return m}},{}],962:[function(b,F,C){var m=b("../../plots/cartesian/axes"),h=b("./attributes"),l=b("../../lib").fillText;F.exports=function(e,a,g){var k=e.cd,p=k[0].trace,n=e.subplot,c,f;for(c=0;c<k.length;c++){var d=k[c];var q=!1;if(d._polygons){for(f=0;f<d._polygons.length;f++)d._polygons[f].contains([a,g])&&(q=!q),d._polygons[f].contains([a+360,g])&&(q=!q);if(q)break}}if(q&&
d)return e.x0=e.x1=e.xa.c2p(d.ct),e.y0=e.y1=e.ya.c2p(d.ct),e.index=d.index,e.location=d.loc,e.z=d.z,e.zLabel=m.tickText(n.mockAxis,n.mockAxis.c2l(d.z),"hover").text,e.hovertemplate=d.hovertemplate,a=d,p.hovertemplate||(k=a.hi||p.hoverinfo,g=String(a.loc),c="all"===k?h.hoverinfo.flags:k.split("+"),k=-1!==c.indexOf("name"),n=-1!==c.indexOf("location"),d=-1!==c.indexOf("z"),c=-1!==c.indexOf("text"),f=[],!k&&n?e.nameOverride=g:(k&&(e.nameOverride=p.name),n&&f.push(g)),d&&f.push(e.zLabel),c&&l(a,p,f),
e.extraText=f.join("\x3cbr\x3e")),[e]}},{"../../lib":749,"../../plots/cartesian/axes":797,"./attributes":958}],963:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"choropleth",basePlotModule:b("../../plots/geo"),
categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":829,"../heatmap/colorbar":1037,"./attributes":958,"./calc":959,"./defaults":960,"./event_data":961,"./hover":962,"./plot":964,"./select":965,"./style":966}],964:[function(b,F,C){var m=b("d3"),h=b("../../lib"),l=b("../../lib/geo_location_utils"),e=b("../../lib/topojson_utils").getTopojsonFeatures,a=b("../../plots/cartesian/autorange").findExtremes,g=b("./style").style;F.exports={calcGeoJSON:function(k,p){var n=k[0].trace;p=p[n.geo];
var c=p._subplot,f=n.locationmode,d=n._length,q="geojson-id"===f?l.extractTraceFeature(k):e(n,c.topojson);c=[];for(var r=[],u=0;u<d;u++){var v=k[u],w="geojson-id"===f?v.fOut:l.locationToFeature(f,v.loc,q);w?(v.geojson=w,v.ct=w.properties.ct,v._polygons=l.feature2polygons(w),v=l.computeBbox(w),c.push(v[0],v[2]),r.push(v[1],v[3])):v.geojson=null}"geojson"===p.fitbounds&&"geojson-id"===f&&(k=l.computeBbox(l.getTraceGeojson(n)),c=[k[0],k[2]],r=[k[1],k[3]]);k={padded:!0};n._extremes.lon=a(p.lonaxis._ax,
c,k);n._extremes.lat=a(p.lataxis._ax,r,k)},plot:function(k,p,n){p=p.layers.backplot.select(".choroplethlayer");h.makeTraceGroups(p,n,"trace choropleth").each(function(c){var f=m.select(this).selectAll("path.choroplethlocation").data(h.identity);f.enter().append("path").classed("choroplethlocation",!0);f.exit().remove();g(k,c)})}}},{"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/topojson_utils":776,"../../plots/cartesian/autorange":796,"./style":966,d3:169}],965:[function(b,F,C){F.exports=
function(m,h){var l=m.cd,e=m.xaxis,a=m.yaxis,g=[],k,p;if(!1===h)for(k=0;k<l.length;k++)l[k].selected=0;else for(k=0;k<l.length;k++){var n=l[k];if(p=n.ct){var c=e.c2p(p);var f=a.c2p(p);h.contains([c,f],null,k,m)?(g.push({pointNumber:k,lon:p[0],lat:p[1]}),n.selected=1):n.selected=0}}return g}},{}],966:[function(b,F,C){function m(g,k){var p=k[0].trace;k=k[0].node3.selectAll(".choroplethlocation");var n=p.marker||{},c=n.line||{},f=a.makeColorScaleFuncFromTrace(p);k.each(function(d){h.select(this).attr("fill",
f(d.z)).call(l.stroke,d.mlc||c.color).call(e.dashLine,"",d.mlw||c.width||0).style("opacity",n.opacity)});e.selectedPointStyle(k,p,g)}var h=b("d3"),l=b("../../components/color"),e=b("../../components/drawing"),a=b("../../components/colorscale");F.exports={style:function(g,k){k&&m(g,k)},styleOnSelect:function(g,k){var p=k[0].node3,n=k[0].trace;n.selectedpoints?e.selectedPointStyle(p.selectAll(".choroplethlocation"),n,g):m(g,k)}}},{"../../components/color":615,"../../components/colorscale":627,"../../components/drawing":637,
d3:169}],967:[function(b,F,C){C=b("../choropleth/attributes");var m=b("../../components/colorscale/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,l=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;F.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},C.featureidkey,{}),below:{valType:"string",editType:"plot"},text:C.text,hovertext:C.hovertext,marker:{line:{color:b({},
C.marker.line.color,{editType:"plot"}),width:b({},C.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},C.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},C.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},C.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:C.hoverinfo,hovertemplate:h({},{keys:["properties"]}),showlegend:b({},l.showlegend,{dflt:!1})},
m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../choropleth/attributes":958}],968:[function(b,F,C){function m(p){var n=p[0].trace,c=n._opts;if(n.selectedpoints){n=a.makeSelectedPointStyleFns(n);for(var f=0;f<p.length;f++){var d=p[f];d.fOut&&(d.fOut.properties.mo2=n.selectedOpacityFn(d))}p={type:"identity",property:"mo2"}}else p=l.isArrayOrTypedArray(n.marker.opacity)?
{type:"identity",property:"mo"}:n.marker.opacity;l.extendFlat(c.fill.paint,{"fill-opacity":p});l.extendFlat(c.line.paint,{"line-opacity":p});return c}var h=b("fast-isnumeric"),l=b("../../lib"),e=b("../../components/colorscale"),a=b("../../components/drawing"),g=b("../../lib/geojson_utils").makeBlank,k=b("../../lib/geo_location_utils");F.exports={convert:function(p){var n=p[0].trace,c=!0===n.visible&&0!==n._length,f={layout:{visibility:"none"},paint:{}},d={layout:{visibility:"none"},paint:{}},q=n._opts=
{fill:f,line:d,geojson:g()};if(!c)return q;c=k.extractTraceFeature(p);if(!c)return q;var r=e.makeColorScaleFuncFromTrace(n),u=n.marker;n=u.line||{};var v;l.isArrayOrTypedArray(u.opacity)&&(v=function(t){t=t.mo;return h(t)?+l.constrain(t,0,1):0});var w;l.isArrayOrTypedArray(n.color)&&(w=function(t){return t.mlc});var y;l.isArrayOrTypedArray(n.width)&&(y=function(t){return t.mlw});for(var D=0;D<p.length;D++){var x=p[D],E=x.fOut;if(E){var B=E.properties;B.fc=r(x.z);v&&(B.mo=v(x));w&&(B.mlc=w(x));y&&
(B.mlw=y(x));x.ct=B.ct;x._polygons=k.feature2polygons(E)}}v=v?{type:"identity",property:"mo"}:u.opacity;l.extendFlat(f.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":v});l.extendFlat(d.paint,{"line-color":w?{type:"identity",property:"mlc"}:n.color,"line-width":y?{type:"identity",property:"mlw"}:n.width,"line-opacity":v});f.layout.visibility="visible";d.layout.visibility="visible";q.geojson={type:"FeatureCollection",features:c};m(p);return q},convertOnSelect:m}},{"../../components/colorscale":627,
"../../components/drawing":637,"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/geojson_utils":743,"fast-isnumeric":241}],969:[function(b,F,C){var m=b("../../lib"),h=b("../../components/colorscale/defaults"),l=b("./attributes");F.exports=function(e,a,g,k){function p(f,d){return m.coerce(e,a,l,f,d)}g=p("locations");var n=p("z"),c=p("geojson");m.isArrayOrTypedArray(g)&&g.length&&m.isArrayOrTypedArray(n)&&n.length&&("string"===typeof c&&""!==c||m.isPlainObject(c))?(p("featureidkey"),a._length=
Math.min(g.length,n.length),p("below"),p("text"),p("hovertext"),p("hovertemplate"),p("marker.line.width")&&p("marker.line.color"),p("marker.opacity"),h(e,a,k,p,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(a,p)):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":967}],970:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../choropleth/calc"),plot:b("./plot"),hoverPoints:b("../choropleth/hover"),
eventData:b("../choropleth/event_data"),selectPoints:b("../choropleth/select"),styleOnSelect:function(m,h){h&&h[0].trace._glTrace.updateOnSelect(h)},getBelow:function(m,h){m=h.getMapLayers();for(h=m.length-2;0<=h;h--){var l=m[h].id;if("string"===typeof l&&0===l.indexOf("water"))for(var e=h+1;e<m.length;e++)if(l=m[e].id,"string"===typeof l&&-1===l.indexOf("plotly-"))return l}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],
meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":854,"../choropleth/calc":959,"../choropleth/event_data":961,"../choropleth/hover":962,"../choropleth/select":965,"../heatmap/colorbar":1037,"./attributes":967,"./defaults":969,"./plot":971}],971:[function(b,F,C){function m(a,g){this.type="choroplethmapbox";this.subplot=a;this.uid=g;this.sourceId="source-"+g;this.layerList=[["fill",e+g+"-fill"],["line",e+g+"-line"]];this.below=null}var h=b("./convert").convert,l=b("./convert").convertOnSelect,
e=b("../../plots/mapbox/constants").traceLayerPrefix;b=m.prototype;b.update=function(a){this._update(h(a))};b.updateOnSelect=function(a){this._update(l(a))};b._update=function(a){var g=this.subplot,k=this.layerList,p=g.belowLookup["trace-"+this.uid];g.map.getSource(this.sourceId).setData(a.geojson);p!==this.below&&(this._removeLayers(),this._addLayers(a,p),this.below=p);for(p=0;p<k.length;p++){var n=k[p],c=n[1];n=a[n[0]];g.setOptions(c,"setLayoutProperty",n.layout);"visible"===n.layout.visibility&&
g.setOptions(c,"setPaintProperty",n.paint)}};b._addLayers=function(a,g){for(var k=this.subplot,p=this.layerList,n=this.sourceId,c=0;c<p.length;c++){var f=p[c],d=f[0],q=a[d];k.addLayer({type:d,id:f[1],source:n,layout:q.layout,paint:q.paint},g)}};b._removeLayers=function(){for(var a=this.subplot.map,g=this.layerList,k=g.length-1;0<=k;k--)a.removeLayer(g[k][1])};b.dispose=function(){var a=this.subplot.map;this._removeLayers();a.removeSource(this.sourceId)};F.exports=function(a,g){var k=g[0].trace,p=
new m(a,k.uid),n=p.sourceId,c=h(g);k=p.below=a.belowLookup["trace-"+k.uid];a.map.addSource(n,{type:"geojson",data:c.geojson});p._addLayers(c,k);return g[0].trace._glTrace=p}},{"../../plots/mapbox/constants":852,"./convert":968}],972:[function(b,F,C){C=b("../../components/colorscale/attributes");var m=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../mesh3d/attributes"),l=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var e={x:{valType:"data_array",editType:"calc+clearAxisTypes"},
y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,
editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:m({editType:"calc"},{keys:["norm"]}),showlegend:b({},l.showlegend,{dflt:!1})};b(e,C("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){e[a]=h[a]});e.hoverinfo=b({},l.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});e.transforms=void 0;F.exports=e},{"../../components/colorscale/attributes":622,
"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../mesh3d/attributes":1096}],973:[function(b,F,C){var m=b("../../components/colorscale/calc");F.exports=function(h,l){for(var e=l.u,a=l.v,g=l.w,k=Math.min(l.x.length,l.y.length,l.z.length,e.length,a.length,g.length),p=-Infinity,n=Infinity,c=0;c<k;c++){var f=e[c],d=a[c],q=g[c];f=Math.sqrt(f*f+d*d+q*q);p=Math.max(p,f);n=Math.min(n,f)}l._len=k;l._normMax=p;m(h,l,{vals:[n,p],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],
974:[function(b,F,C){function m(d,q){this.scene=d;this.uid=q;this.data=this.mesh=null}function h(d,q){function r(y,D){var x=u[D],E=v[n[D]];return a(y,function(B){return x.d2l(B)*E})}var u=d.fullSceneLayout,v=d.dataScale;d={};d.vectors=p(r(q.u,"xaxis"),r(q.v,"yaxis"),r(q.w,"zaxis"),q._len);d.positions=p(r(q.x,"xaxis"),r(q.y,"yaxis"),r(q.z,"zaxis"),q._len);var w=k(q);d.colormap=g(q);d.vertexIntensityBounds=[w.min/q._normMax,w.max/q._normMax];d.coneOffset=c[q.anchor];d.coneSize="scaled"===q.sizemode?
q.sizeref||.5:q.sizeref&&q._normMax?q.sizeref/q._normMax:.5;d=l(d);w=q.lightposition;d.lightPosition=[w.x,w.y,w.z];d.ambient=q.lighting.ambient;d.diffuse=q.lighting.diffuse;d.specular=q.lighting.specular;d.roughness=q.lighting.roughness;d.fresnel=q.lighting.fresnel;d.opacity=q.opacity;q._pad=f[q.anchor]*d.vectorScale*d.coneScale*q._normMax;return d}var l=b("gl-cone3d"),e=b("gl-cone3d").createConeMesh,a=b("../../lib").simpleMap,g=b("../../lib/gl_format_color").parseColorScale,k=b("../../components/colorscale").extractOpts,
p=b("../../plots/gl3d/zip3");b=m.prototype;b.handlePick=function(d){if(d.object===this.mesh){var q=d.index=d.data.index,r=this.data.u[q],u=this.data.v[q],v=this.data.w[q];d.traceCoordinate=[this.data.x[q],this.data.y[q],this.data.z[q],r,u,v,Math.sqrt(r*r+u*u+v*v)];r=this.data.hovertext||this.data.text;Array.isArray(r)&&void 0!==r[q]?d.textLabel=r[q]:r&&(d.textLabel=r);return!0}};var n={xaxis:0,yaxis:1,zaxis:2},c={tip:1,tail:0,cm:.25,center:.5},f={tip:1,tail:1,cm:.75,center:.5};b.update=function(d){this.data=
d;d=h(this.scene,d);this.mesh.update(d)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};F.exports=function(d,q){var r=d.glplot.gl,u=h(d,q);r=e(r,u);u=new m(d,q.uid);u.mesh=r;u.data=q;r._trace=u;d.glplot.add(r);return u}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/gl3d/zip3":850,"gl-cone3d":259}],975:[function(b,F,C){var m=b("../../lib"),h=b("../../components/colorscale/defaults"),l=b("./attributes");F.exports=function(e,
a,g,k){function p(r,u){return m.coerce(e,a,l,r,u)}g=p("u");var n=p("v"),c=p("w"),f=p("x"),d=p("y"),q=p("z");g&&g.length&&n&&n.length&&c&&c.length&&f&&f.length&&d&&d.length&&q&&q.length?(p("sizeref"),p("sizemode"),p("anchor"),p("lighting.ambient"),p("lighting.diffuse"),p("lighting.specular"),p("lighting.roughness"),p("lighting.fresnel"),p("lightposition.x"),p("lightposition.y"),p("lightposition.z"),h(e,a,k,p,{prefix:"",cLetter:"c"}),p("text"),p("hovertext"),p("hovertemplate"),a._length=null):a.visible=
!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":972}],976:[function(b,F,C){F.exports={moduleType:"trace",name:"cone",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),eventData:function(m,h){m.norm=h.traceCoordinate[6];return m},meta:{}}},{"../../plots/gl3d":839,"./attributes":972,"./calc":973,"./convert":974,"./defaults":975}],
977:[function(b,F,C){C=b("../heatmap/attributes");var m=b("../scatter/attributes"),h=b("../../components/colorscale/attributes"),l=b("../../components/drawing/attributes").dash,e=b("../../plots/font_attributes"),a=b("../../lib/extend").extendFlat,g=b("../../constants/filter_ops"),k=g.COMPARISON_OPS2;g=g.INTERVAL_OPS;b("../../constants/docs");b=m.line;F.exports=a({z:C.z,x:C.x,x0:C.x0,dx:C.dx,y:C.y,y0:C.y0,dy:C.dy,text:C.text,hovertext:C.hovertext,transpose:C.transpose,xtype:C.xtype,ytype:C.ytype,zhoverformat:C.zhoverformat,
hovertemplate:C.hovertemplate,hoverongaps:C.hoverongaps,connectgaps:a({},C.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},
end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:e({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",
values:[].concat(k).concat(g),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a({},b.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:l,smoothing:a({},b.smoothing,{}),editType:"plot"}},h("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../constants/docs":719,"../../constants/filter_ops":720,
"../../lib/extend":739,"../../plots/font_attributes":825,"../heatmap/attributes":1034,"../scatter/attributes":1155}],978:[function(b,F,C){var m=b("../../components/colorscale"),h=b("../heatmap/calc"),l=b("./set_contours"),e=b("./end_plus");F.exports=function(a,g){var k=h(a,g),p=k[0].z;l(g,p);var n=g.contours,c=m.extractOpts(g);"heatmap"===n.coloring&&c.auto&&!1===g.autocontour?(p=n.start,c=e(n),n=n.size||1,c=Math.floor((c-p)/n)+1,isFinite(n)||(c=n=1),p-=n/2,n=[p,p+c*n]):n=p;m.calc(a,g,{vals:n,cLetter:"z"});
return k}},{"../../components/colorscale":627,"../heatmap/calc":1035,"./end_plus":988,"./set_contours":996}],979:[function(b,F,C){F.exports=function(m,h){var l=m[0],e=l.z,a;switch(h.type){case "levels":l=Math.min(e[0][0],e[0][1]);for(a=0;a<m.length;a++){var g=m[a];g.prefixBoundary=!g.edgepaths.length&&(l>g.level||g.starts.length&&l===g.level)}break;case "constraint":if(l.prefixBoundary=!1,!l.edgepaths.length){var k=l.x.length,p=l.y.length;m=-Infinity;g=Infinity;for(a=0;a<p;a++)g=Math.min(g,e[a][0]),
g=Math.min(g,e[a][k-1]),m=Math.max(m,e[a][0]),m=Math.max(m,e[a][k-1]);for(a=1;a<k-1;a++)g=Math.min(g,e[0][a]),g=Math.min(g,e[p-1][a]),m=Math.max(m,e[0][a]),m=Math.max(m,e[p-1][a]);a=h.value;switch(h._operation){case "\x3e":a>m&&(l.prefixBoundary=!0);break;case "\x3c":if(a<g||l.starts.length&&a===g)l.prefixBoundary=!0;break;case "[]":h=Math.min(a[0],a[1]);a=Math.max(a[0],a[1]);if(a<g||h>m||l.starts.length&&a===g)l.prefixBoundary=!0;break;case "][":h=Math.min(a[0],a[1]),a=Math.max(a[0],a[1]),h<g&&a>
m&&(l.prefixBoundary=!0)}}}}},{}],980:[function(b,F,C){var m=b("../../components/colorscale"),h=b("./make_color_map"),l=b("./end_plus");F.exports={min:"zmin",max:"zmax",calc:function(e,a,g){e=a.contours;var k=a.line,p=e.size||1,n=e.coloring,c=h(a,{isColorbar:!0});"heatmap"===n?(a=m.extractOpts(a),g._fillgradient=a.reversescale?m.flipScale(a.colorscale):a.colorscale,g._zrange=[a.min,a.max]):"fill"===n&&(g._fillcolor=c);g._line={color:"lines"===n?c:k.color,width:!1!==e.showlines?k.width:0,dash:k.dash};
g._levels={start:e.start,end:l(e),size:p}}}},{"../../components/colorscale":627,"./end_plus":988,"./make_color_map":993}],981:[function(b,F,C){F.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,
LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],982:[function(b,F,C){var m=b("fast-isnumeric"),h=b("./label_defaults");C=b("../../components/color");var l=C.addOpacity,e=C.opacity;b=b("../../constants/filter_ops");var a=b.CONSTRAINT_REDUCTION,g=b.COMPARISON_OPS2;F.exports=function(k,p,n,c,f,d){var q=p.contours,r=n("contours.operation");q._operation=a[r];if(-1===
g.indexOf(q.operation))if(n("contours.value",[0,1]),Array.isArray(q.value))if(2<q.value.length)q.value=q.value.slice(2);else if(0===q.length)q.value=[0,1];else if(2>q.length){var u=parseFloat(q.value[0]);q.value=[u,u+1]}else q.value=[parseFloat(q.value[0]),parseFloat(q.value[1])];else m(q.value)&&(u=parseFloat(q.value),q.value=[u,u+1]);else n("contours.value",0),m(q.value)||(Array.isArray(q.value)?q.value=parseFloat(q.value[0]):q.value=0);if("\x3d"===r)q=q.showlines=!0;else{q=n("contours.showlines");
var v=n("fillcolor",l((k.line||{}).color||f,.5))}if(q){k=v&&e(v)?l(p.fillcolor,1):f;var w=n("line.color",k);n("line.width",2);n("line.dash")}n("line.smoothing");h(n,c,w,d)}},{"../../components/color":615,"../../constants/filter_ops":720,"./label_defaults":992,"fast-isnumeric":241}],983:[function(b,F,C){function m(g,k){function p(f){return a(f)?+f:null}var n=Array.isArray(k),c;-1!==e.COMPARISON_OPS2.indexOf(g)?c=n?p(k[0]):p(k):-1!==e.INTERVAL_OPS.indexOf(g)?c=n?[p(k[0]),p(k[1])]:[p(k),p(k)]:-1!==e.SET_OPS.indexOf(g)&&
(c=n?k.map(p):[p(k)]);return c}function h(g){return function(k){k=m(g,k);var p=Math.min(k[0],k[1]);k=Math.max(k[0],k[1]);return{start:p,end:k,size:k-p}}}function l(g){return function(k){k=m(g,k);return{start:k,end:Infinity,size:Infinity}}}var e=b("../../constants/filter_ops"),a=b("fast-isnumeric");F.exports={"[]":h("[]"),"][":h("]["),"\x3e":l("\x3e"),"\x3c":l("\x3c"),"\x3d":l("\x3d")}},{"../../constants/filter_ops":720,"fast-isnumeric":241}],984:[function(b,F,C){F.exports=function(m,h,l,e){m=e("contours.start");
e=e("contours.end");e=!1===m||!1===e;m=l("contours.size");(e?!(h.autocontour=!0):!l("autocontour",!1))&&m||l("ncontours")}},{}],985:[function(b,F,C){function m(l){return h.extendFlat({},l,{edgepaths:h.extendDeep([],l.edgepaths),paths:h.extendDeep([],l.paths),starts:h.extendDeep([],l.starts)})}var h=b("../../lib");F.exports=function(l,e){var a=function(p){return p.reverse()},g=function(p){return p};switch(e){case "\x3d":case "\x3c":return l;case "\x3e":1!==l.length&&h.warn("Contour data invalid for the specified inequality operation.");
var k=l[0];for(e=0;e<k.edgepaths.length;e++)k.edgepaths[e]=a(k.edgepaths[e]);for(e=0;e<k.paths.length;e++)k.paths[e]=a(k.paths[e]);for(e=0;e<k.starts.length;e++)k.starts[e]=a(k.starts[e]);return l;case "][":e=a,a=g,g=e;case "[]":2!==l.length&&h.warn("Contour data invalid for the specified inequality range operation.");k=m(l[0]);l=m(l[1]);for(e=0;e<k.edgepaths.length;e++)k.edgepaths[e]=a(k.edgepaths[e]);for(e=0;e<k.paths.length;e++)k.paths[e]=a(k.paths[e]);for(e=0;e<k.starts.length;e++)k.starts[e]=
a(k.starts[e]);for(;l.edgepaths.length;)k.edgepaths.push(g(l.edgepaths.shift()));for(;l.paths.length;)k.paths.push(g(l.paths.shift()));for(;l.starts.length;)k.starts.push(g(l.starts.shift()));return[k]}}},{"../../lib":749}],986:[function(b,F,C){var m=b("../../lib"),h=b("../heatmap/xyz_defaults"),l=b("./constraint_defaults"),e=b("./contours_defaults"),a=b("./style_defaults"),g=b("./attributes");F.exports=function(k,p,n,c){function f(r,u){return m.coerce(k,p,g,r,u)}function d(r){return m.coerce2(k,
p,g,r)}if(h(k,p,f,c)){f("text");f("hovertext");f("hovertemplate");f("hoverongaps");var q="constraint"===f("contours.type");f("connectgaps",m.isArray1D(p.z));q?l(k,p,f,c,n):(e(k,p,f,d),a(k,p,f,c))}else p.visible=!1}},{"../../lib":749,"../heatmap/xyz_defaults":1048,"./attributes":977,"./constraint_defaults":982,"./contours_defaults":984,"./style_defaults":998}],987:[function(b,F,C){var m=b("../../lib"),h=b("./constraint_mapping"),l=b("./end_plus");F.exports=function(e,a,g){var k="constraint"===e.type?
h[e._operation](e.value):e,p=k.size,n=[],c=l(k),f=g.trace._carpetTrace;a=f?{xaxis:f.aaxis,yaxis:f.baxis,x:g.a,y:g.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:g.x,y:g.y};for(k=k.start;k<c;k+=p)if(n.push(m.extendFlat({level:k,crossings:{},starts:[],edgepaths:[],paths:[],z:g.z,smoothing:g.trace.line.smoothing},a)),1E3<n.length){m.warn("Too many contours, clipping at 1000",e);break}return n}},{"../../lib":749,"./constraint_mapping":983,"./end_plus":988}],988:[function(b,F,C){F.exports=function(m){return m.end+
m.size/1E6}},{}],989:[function(b,F,C){function m(g,k,p,n){return Math.abs(g[0]-k[0])<p&&Math.abs(g[1]-k[1])<n}function h(g,k,p,n,c){var f=k.join(","),d=g.crossings[f],q=d,r=0,u=0;20<q&&p?208===q||1114===q?r=0===k[0]?1:-1:u=0===k[1]?1:-1:-1!==a.BOTTOMSTART.indexOf(q)?u=1:-1!==a.LEFTSTART.indexOf(q)?r=1:-1!==a.TOPSTART.indexOf(q)?u=-1:r=-1;var v=[r,u];q=[l(g,k,[-v[0],-v[1]])];var w=g.z.length,y=g.z[0].length;r=k.slice();var D=v.slice();for(u=0;1E4>u;u++){20<d?(d=a.CHOOSESADDLE[d][0>(v[0]||v[1])?0:1],
g.crossings[f]=a.SADDLEREMAINDER[d]):delete g.crossings[f];v=a.NEWDELTA[d];if(!v){e.log("Found bad marching index:",d,k,g.level);break}q.push(l(g,k,v));k[0]+=v[0];k[1]+=v[1];f=k.join(",");m(q[q.length-1],q[q.length-2],n,c)&&q.pop();d=v[0]&&(0>k[0]||k[0]>y-2)||v[1]&&(0>k[1]||k[1]>w-2);if(k[0]===r[0]&&k[1]===r[1]&&v[0]===D[0]&&v[1]===D[1]||p&&d)break;d=g.crossings[f]}1E4===u&&e.log("Infinite loop in contour?");k=m(q[0],q[q.length-1],n,c);v=0;w=.2*g.smoothing;f=[];d=0;for(u=1;u<q.length;u++){D=q[u];
var x=q[u-1];y=D[2]-x[2];D=D[3]-x[3];y=Math.sqrt(y*y+D*D);v+=y;f.push(y)}y=v/f.length*w;for(u=q.length-2;u>=d;u--)if(D=f[u],D<y){w=0;for(v=u-1;v>=d;v--)if(D+f[v]<y)D+=f[v];else break;if(k&&u===q.length-2)for(w=0;w<v;w++)if(D+f[w]<y)D+=f[w];else break;D=u-v+w+1;x=Math.floor((u+v+w+2)/2);D=k||u!==q.length-2?k||-1!==v?D%2?q[x%q.length]:[(q[x%q.length][0]+q[(x+1)%q.length][0])/2,(q[x%q.length][1]+q[(x+1)%q.length][1])/2]:q[0]:q[q.length-1];q.splice(v+1,u-v+1,D);u=v+1;w&&(d=w);k&&(u===q.length-2?q[w]=
q[q.length-1]:0===u&&(q[q.length-1]=q[0]))}q.splice(0,d);for(u=0;u<q.length;u++)q[u].length=2;if(!(2>q.length))if(k)q.pop(),g.paths.push(q);else{p||e.log("Unclosed interior contour?",g.level,r.join(","),q.join("L"));f=!1;for(p=0;p<g.edgepaths.length;p++)if(u=g.edgepaths[p],!f&&m(u[0],q[q.length-1],n,c)){q.pop();f=!0;d=!1;for(r=0;r<g.edgepaths.length;r++)if(k=g.edgepaths[r],m(k[k.length-1],q[0],n,c)){d=!0;q.shift();g.edgepaths.splice(p,1);r===p?g.paths.push(q.concat(k)):(r>p&&r--,g.edgepaths[r]=k.concat(q,
u));break}d||(g.edgepaths[p]=q.concat(u))}for(p=0;p<g.edgepaths.length&&!f;p++)u=g.edgepaths[p],m(u[u.length-1],q[0],n,c)&&(q.shift(),g.edgepaths[p]=u.concat(q),f=!0);f||g.edgepaths.push(q)}}function l(g,k,p){var n=k[0]+Math.max(p[0],0);k=k[1]+Math.max(p[1],0);var c=g.z[k][n],f=g.xaxis,d=g.yaxis;if(p[1])return p=(g.level-c)/(g.z[k][n+1]-c),[f.c2p((1-p)*g.x[n]+p*g.x[n+1],!0),d.c2p(g.y[k],!0),n+p,k];p=(g.level-c)/(g.z[k+1][n]-c);return[f.c2p(g.x[n],!0),d.c2p((1-p)*g.y[k]+p*g.y[k+1],!0),n,k+p]}var e=
b("../../lib"),a=b("./constants");F.exports=function(g,k,p){var n,c;k=k||.01;p=p||.01;for(c=0;c<g.length;c++){var f=g[c];for(n=0;n<f.starts.length;n++){var d=f.starts[n];h(f,d,"edge",k,p)}for(n=0;Object.keys(f.crossings).length&&1E4>n;)n++,d=Object.keys(f.crossings)[0].split(",").map(Number),h(f,d,void 0,k,p);1E4===n&&e.log("Infinite loop in contour?")}}},{"../../lib":749,"./constants":981}],990:[function(b,F,C){var m=b("../../components/color"),h=b("../heatmap/hover");F.exports=function(l,e,a,g,
k){(l=h(l,e,a,g,k,!0))&&l.forEach(function(p){var n=p.trace;"constraint"===n.contours.type&&(n.fillcolor&&m.opacity(n.fillcolor)?p.color=m.addOpacity(n.fillcolor,1):n.contours.showlines&&m.opacity(n.line.color)&&(p.color=m.addOpacity(n.line.color,1)))});return l}},{"../../components/color":615,"../heatmap/hover":1041}],991:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot").plot,style:b("./style"),colorbar:b("./colorbar"),hoverPoints:b("./hover"),
moduleType:"trace",name:"contour",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":810,"./attributes":977,"./calc":978,"./colorbar":980,"./defaults":986,"./hover":990,"./plot":995,"./style":997}],992:[function(b,F,C){var m=b("../../lib");F.exports=function(h,l,e,a){a||(a={});h("contours.showlabels")&&(l=l.font,m.coerceFont(h,"contours.labelfont",{family:l.family,size:l.size,color:e}),h("contours.labelformat"));
!1!==a.hasHover&&h("zhoverformat")}},{"../../lib":749}],993:[function(b,F,C){var m=b("d3"),h=b("../../components/colorscale"),l=b("./end_plus");F.exports=function(e){var a=e.contours,g=a.start,k=l(a),p=a.size||1,n=Math.floor((k-g)/p)+1,c="lines"===a.coloring?0:1,f=h.extractOpts(e);isFinite(p)||(n=p=1);var d=f.reversescale?h.flipScale(f.colorscale):f.colorscale,q=d.length;e=Array(q);k=Array(q);var r;if("heatmap"===a.coloring){g=f.min;c=f.max;for(r=0;r<q;r++)f=d[r],e[r]=f[0]*(c-g)+g,k[r]=f[1];p=m.extent([g,
c,a.start,a.start+p*(n-1)]);a=p[g<c?0:1];p=p[g<c?1:0];a!==g&&(e.splice(0,0,a),k.splice(0,0,k[0]));p!==c&&(e.push(p),k.push(k[k.length-1]))}else for(r=0;r<q;r++)f=d[r],e[r]=(f[0]*(n+c-1)-c/2)*p+g,k[r]=f[1];return h.makeColorScaleFunc({domain:e,range:k},{noNumericCheck:!0})}},{"../../components/colorscale":627,"./end_plus":988,d3:169}],994:[function(b,F,C){var m=b("./constants");F.exports=function(h){var l=h[0].z,e=l.length,a=l[0].length,g=2===e||2===a,k,p,n;for(p=0;p<e-1;p++){var c=[];0===p&&(c=c.concat(m.BOTTOMSTART));
p===e-2&&(c=c.concat(m.TOPSTART));for(k=0;k<a-1;k++){var f=c.slice();0===k&&(f=f.concat(m.LEFTSTART));k===a-2&&(f=f.concat(m.RIGHTSTART));var d=k+","+p;var q=[[l[p][k],l[p][k+1]],[l[p+1][k],l[p+1][k+1]]];for(n=0;n<h.length;n++){var r=h[n];var u=r.level;var v=(q[0][0]>u?0:1)+(q[0][1]>u?0:2)+(q[1][1]>u?0:4)+(q[1][0]>u?0:8);u=5===v||10===v?u>(q[0][0]+q[0][1]+q[1][0]+q[1][1])/4?5===v?713:1114:5===v?104:208:15===v?0:v;u&&(r.crossings[d]=u,-1!==f.indexOf(u)&&(r.starts.push([k,p]),g&&-1!==f.indexOf(u,f.indexOf(u)+
1)&&r.starts.push([k,p])))}}}}},{"./constants":981}],995:[function(b,F,C){function m(D,x,E,B){var t="fill"===B.coloring||"constraint"===B.type&&"\x3d"!==B._operation,G="M"+E.join("L")+"Z";t&&v(x,B);D=a.ensureSingle(D,"g","contourfill").selectAll("path").data(t?x:[]);D.enter().append("path");D.exit().remove();D.each(function(I){(I=(I.prefixBoundary?G:"")+h(I,E))?e.select(this).attr("d",I).style("stroke","none"):e.select(this).remove()})}function h(D,x){for(var E="",B=0,t=D.edgepaths.map(function(J,
O){return O}),G=!0,I,L,M,N;t.length;){L=g.smoothopen(D.edgepaths[B],D.smoothing);E+=G?L:L.replace(/^M/,"L");t.splice(t.indexOf(B),1);G=D.edgepaths[B][D.edgepaths[B].length-1];M=-1;for(L=0;4>L;L++){if(!G){a.log("Missing end?",B,D);break}.01>Math.abs(G[1]-x[0][1])&&!(.01>Math.abs(G[0]-x[2][0]))?I=x[1]:.01>Math.abs(G[0]-x[0][0])?I=x[0]:.01>Math.abs(G[1]-x[2][1])?I=x[3]:.01>Math.abs(G[0]-x[2][0])&&(I=x[2]);for(N=0;N<D.edgepaths.length;N++){var H=D.edgepaths[N][0];.01>Math.abs(G[0]-I[0])?.01>Math.abs(G[0]-
H[0])&&0<=(H[1]-G[1])*(I[1]-H[1])&&(I=H,M=N):.01>Math.abs(G[1]-I[1])?.01>Math.abs(G[1]-H[1])&&0<=(H[0]-G[0])*(I[0]-H[0])&&(I=H,M=N):a.log("endpt to newendpt is not vert. or horz.",G,I,H)}G=I;if(0<=M)break;E+="L"+I}if(M===D.edgepaths.length){a.log("unclosed perimeter path");break}B=M;if(G=-1===t.indexOf(B))B=t[0],E+="Z"}for(B=0;B<D.paths.length;B++)E+=g.smoothclosed(D.paths[B],D.smoothing);return E}function l(D,x,E,B,t){var G=a.ensureSingle(D,"g","contourlines"),I=!1!==t.showlines,L=t.showlabels,M=
I&&L,N=C.createLines(G,I||L,x);G=C.createLineClip(G,M,E,B.trace.uid);D=D.selectAll("g.contourlabels").data(L?[0]:[]);D.exit().remove();D.enter().append("g").classed("contourlabels",!0);if(L){var H=[],J=[];a.clearLocationCache();var O=C.labelFormatter(E,B),Q=g.tester.append("text").attr("data-notex",1).call(g.font,t.labelfont),U=x[0].xaxis,P=x[0].yaxis;t=U._length;var V=P._length,Y=U.range,ba=P.range,ea=a.aggNums(Math.min,null,B.x),ca=a.aggNums(Math.max,null,B.x),ia=a.aggNums(Math.min,null,B.y),fa=
a.aggNums(Math.max,null,B.y);B=Math.max(U.c2p(ea,!0),0);U=Math.min(U.c2p(ca,!0),t);ca=Math.max(P.c2p(fa,!0),0);P=Math.min(P.c2p(ia,!0),V);var ha={};Y[0]<Y[1]?(ha.left=B,ha.right=U):(ha.left=U,ha.right=B);ba[0]<ba[1]?(ha.top=ca,ha.bottom=P):(ha.top=P,ha.bottom=ca);ha.middle=(ha.top+ha.bottom)/2;ha.center=(ha.left+ha.right)/2;H.push([[ha.left,ha.top],[ha.right,ha.top],[ha.right,ha.bottom],[ha.left,ha.bottom]]);var na=w.LABELDISTANCE*Math.sqrt(t*t+V*V)/Math.max(1,x.length/w.LABELINCREASE);N.each(function(pa){var ra=
C.calcTextOpts(pa.level,O,Q,E);e.select(this).selectAll("path").each(function(){var ta=a.getVisibleSegment(this,ha,ra.height/2);if(ta&&!(ta.len<(ra.width+ra.height)*w.LABELMIN))for(var oa=Math.min(Math.ceil(ta.len/na),w.LABELMAX),ua=0;ua<oa;ua++){var ka=C.findBestTextLocation(this,ta,ra,J,ha);if(!ka)break;C.addLabelData(ka,ra,J,H)}})});Q.remove();C.drawLabels(D,J,E,G,M?H:null)}L&&!I&&N.remove()}var e=b("d3"),a=b("../../lib"),g=b("../../components/drawing"),k=b("../../components/colorscale"),p=b("../../lib/svg_text_utils"),
n=b("../../plots/cartesian/axes"),c=b("../../plots/cartesian/set_convert"),f=b("../heatmap/plot"),d=b("./make_crossings"),q=b("./find_all_paths"),r=b("./empty_pathinfo"),u=b("./convert_to_constraints"),v=b("./close_boundaries"),w=b("./constants"),y=w.LABELOPTIMIZER;C.plot=function(D,x,E,B){var t=x.xaxis,G=x.yaxis;a.makeTraceGroups(B,E,"contour").each(function(I){var L=e.select(this),M=I[0],N=M.x,H=M.y,J=M.trace.contours,O=r(J,x,M),Q=a.ensureSingle(L,"g","heatmapcoloring"),U=[];"heatmap"===J.coloring&&
(U=[I]);f(D,x,U,Q);d(O);q(O);I=t.c2p(N[0],!0);N=t.c2p(N[N.length-1],!0);Q=G.c2p(H[0],!0);H=G.c2p(H[H.length-1],!0);H=[[I,H],[N,H],[N,Q],[I,Q]];N=O;"constraint"===J.type&&(N=u(O,J._operation));I=a.ensureSingle(L,"g","contourbg").selectAll("path").data("fill"===J.coloring?[0]:[]);I.enter().append("path");I.exit().remove();I.attr("d","M"+H.join("L")+"Z").style("stroke","none");m(L,N,H,J);l(L,O,D,M,J);N=M.trace;J="clip"+N.uid;O=D._fullLayout._clips.selectAll("#"+J).data(N.connectgaps?[]:[0]);O.enter().append("clipPath").classed("contourclip",
!0).attr("id",J);O.exit().remove();if(!1===N.connectgaps){N=x.xaxis;I=x.yaxis;Q=M.x;U=M.y;var P=M.trace._emptypoints,V=[],Y=M.z.length,ba=M.z[0].length,ea,ca=[];for(ea=0;ea<ba;ea++)ca.push(1);for(ea=0;ea<Y;ea++)V.push(ca.slice());for(ea=0;ea<P.length;ea++)Y=P[ea],V[Y[0]][Y[1]]=0;M.zmask=V;M={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:N,yaxis:I,x:Q,y:U,z:V,smoothing:0};d([M]);q([M]);v([M],{type:"levels"});a.ensureSingle(O,"path","").attr("d",(M.prefixBoundary?"M"+H.join("L")+"Z":"")+
h(M,H))}else J=null;g.setClipUrl(L,J,D)})};C.createLines=function(D,x,E){var B=E[0].smoothing;D=D.selectAll("g.contourlevel").data(x?E:[]);D.exit().remove();D.enter().append("g").classed("contourlevel",!0);x&&(x=D.selectAll("path.openline").data(function(t){return t.pedgepaths||t.edgepaths}),x.exit().remove(),x.enter().append("path").classed("openline",!0),x.attr("d",function(t){return g.smoothopen(t,B)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),x=D.selectAll("path.closedline").data(function(t){return t.ppaths||
t.paths}),x.exit().remove(),x.enter().append("path").classed("closedline",!0),x.attr("d",function(t){return g.smoothclosed(t,B)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"));return D};C.createLineClip=function(D,x,E,B){B=x?"clipline"+B:null;x=E._fullLayout._clips.selectAll("#"+B).data(x?[0]:[]);x.exit().remove();x.enter().append("clipPath").classed("contourlineclip",!0).attr("id",B);g.setClipUrl(D,B,E);return x};C.labelFormatter=function(D,x){D=D._fullLayout;var E=x.trace;
x=E.contours;var B={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};x.labelformat?(B.tickformat=x.labelformat,c(B,D)):(E=k.extractOpts(E))&&E.colorbar&&E.colorbar._axis?B=E.colorbar._axis:("constraint"===x.type?(x=x.value,Array.isArray(x)?B.range=[x[0],x[x.length-1]]:B.range=[x,x]):(B.range=[x.start,x.end],B.nticks=(x.end-x.start)/x.size),B.range[0]===B.range[1]&&(B.range[1]+=B.range[0]||1),B.nticks||(B.nticks=1E3),c(B,D),n.prepTicks(B),B._tmin=null,B._tmax=null);return function(t){return n.tickText(B,
t).text}};C.calcTextOpts=function(D,x,E,B){x=x(D);E.text(x).call(p.convertToTspans,B);E=E.node();B=g.bBox(E,!0);return{text:x,width:B.width,height:B.height,fontSize:+E.style["font-size"].replace("px",""),level:D,dy:(B.top+B.bottom)/2}};C.findBestTextLocation=function(D,x,E,B,t){var G=E.width;if(x.isClosed){var I=x.len/y.INITIALSEARCHPOINTS;var L=x.min+I/2;var M=x.max}else I=(x.len-G)/(y.INITIALSEARCHPOINTS+1),L=x.min+I+G/2,M=x.max-(I+G)/2;for(var N=Infinity,H=0;H<y.ITERATIONS;H++){for(;L<M;L+=I){var J=
a.getTextLocation(D,x.total,L,G);a:{var O=E;var Q=B,U=O.width/2,P=O.height/2,V=J.x,Y=J.y,ba=J.theta,ea=Math.cos(ba)*U,ca=Math.sin(ba)*U;U=(V>t.center?t.right-V:V-t.left)/(ea+Math.abs(Math.sin(ba)*P));P=(Y>t.middle?t.bottom-Y:Y-t.top)/(Math.abs(ca)+Math.cos(ba)*P);if(1>U||1>P)O=Infinity;else{P=y.EDGECOST*(1/(U-1)+1/(P-1));P+=y.ANGLECOST*ba*ba;ba=V-ea;U=Y-ca;V+=ea;Y+=ca;for(ea=0;ea<Q.length;ea++){ca=Q[ea];var ia=Math.cos(ca.theta)*ca.width/2,fa=Math.sin(ca.theta)*ca.width/2;ia=2*a.segmentDistance(ba,
U,V,Y,ca.x-ia,ca.y-fa,ca.x+ia,ca.y+fa)/(O.height+ca.height);fa=(ca=ca.level===O.level)?y.SAMELEVELDISTANCE:1;if(ia<=fa){O=Infinity;break a}P+=y.NEIGHBORCOST*(ca?y.SAMELEVELFACTOR:1)/(ia-fa)}O=P}}if(O<N){N=O;var ha=J;var na=L}}if(N>2*y.MAXCOST)break;H&&(I/=2);L=na-I/2;M=L+1.5*I}if(N<=y.MAXCOST)return ha};C.addLabelData=function(D,x,E,B){var t=x.fontSize,G=x.width+t/3;t=Math.max(0,x.height-t/3);var I=D.x,L=D.y;D=D.theta;var M=Math.sin(D),N=Math.cos(D),H=function(J,O){return[I+J*N-O*M,L+J*M+O*N]};H=
[H(-G/2,-t/2),H(-G/2,t/2),H(G/2,t/2),H(G/2,-t/2)];E.push({text:x.text,x:I,y:L,dy:x.dy,theta:D,level:x.level,width:G,height:t});B.push(H)};C.drawLabels=function(D,x,E,B,t){D=D.selectAll("text").data(x,function(G){return G.text+","+G.x+","+G.y+","+G.theta});D.exit().remove();D.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(G){var I=G.x+Math.sin(G.theta)*G.dy,L=G.y-Math.cos(G.theta)*G.dy;e.select(this).text(G.text).attr({x:I,y:L,transform:"rotate("+180*G.theta/Math.PI+
" "+I+" "+L+")"}).call(p.convertToTspans,E)});if(t){D="";for(x=0;x<t.length;x++)D+="M"+t[x].join("L")+"Z";a.ensureSingle(B,"path","").attr("d",D)}}},{"../../components/colorscale":627,"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../plots/cartesian/set_convert":817,"../heatmap/plot":1045,"./close_boundaries":979,"./constants":981,"./convert_to_constraints":985,"./empty_pathinfo":987,"./find_all_paths":989,"./make_crossings":994,
d3:169}],996:[function(b,F,C){function m(e,a,g){var k={type:"linear",range:[e,a]};h.autoTicks(k,(a-e)/(g||15));return k}var h=b("../../plots/cartesian/axes"),l=b("../../lib");F.exports=function(e,a){var g=e.contours;if(e.autocontour){var k=e.zmin,p=e.zmax;if(e.zauto||void 0===k)k=l.aggNums(Math.min,null,a);if(e.zauto||void 0===p)p=l.aggNums(Math.max,null,a);a=m(k,p,e.ncontours);g.size=a.dtick;g.start=h.tickFirst(a);a.range.reverse();g.end=h.tickFirst(a);g.start===k&&(g.start+=g.size);g.end===p&&(g.end-=
g.size);g.start>g.end&&(g.start=g.end=(g.start+g.end)/2);e._input.contours||(e._input.contours={});l.extendFlat(e._input.contours,{start:g.start,end:g.end,size:g.size});e._input.autocontour=!0}else"constraint"!==g.type&&(p=g.start,a=g.end,k=e._input.contours,p>a&&(g.start=k.start=a,a=g.end=k.end=p,p=g.start),0<g.size||(e=p===a?1:m(p,a,e.ncontours).dtick,k.size=g.size=e))}},{"../../lib":749,"../../plots/cartesian/axes":797}],997:[function(b,F,C){var m=b("d3"),h=b("../../components/drawing"),l=b("../heatmap/style"),
e=b("./make_color_map");F.exports=function(a){var g=m.select(a).selectAll("g.contour");g.style("opacity",function(k){return k[0].trace.opacity});g.each(function(k){var p=m.select(this);k=k[0].trace;var n=k.contours,c=k.line,f=n.size||1,d=n.start,q="constraint"===n.type,r=!q&&"lines"===n.coloring,u=!q&&"fill"===n.coloring,v=r||u?e(k):null;p.selectAll("g.contourlevel").each(function(D){m.select(this).selectAll("path").call(h.lineGroupStyle,c.width,r?v(D.level):c.color,c.dash)});var w=n.labelfont;p.selectAll("g.contourlabels text").each(function(D){h.font(m.select(this),
{family:w.family,size:w.size,color:w.color||(r?v(D.level):c.color)})});if(q)p.selectAll("g.contourfill path").style("fill",k.fillcolor);else if(u){var y;p.selectAll("g.contourfill path").style("fill",function(D){void 0===y&&(y=D.level);return v(D.level+.5*f)});void 0===y&&(y=d);p.selectAll("g.contourbg path").style("fill",v(y-.5*f))}});l(a)}},{"../../components/drawing":637,"../heatmap/style":1046,"./make_color_map":993,d3:169}],998:[function(b,F,C){var m=b("../../components/colorscale/defaults"),
h=b("./label_defaults");F.exports=function(l,e,a,g,k){var p=a("contours.coloring"),n,c="";"fill"===p&&(n=a("contours.showlines"));!1!==n&&("lines"!==p&&(c=a("line.color","#000")),a("line.width",.5),a("line.dash"));"none"!==p&&(!0!==l.showlegend&&(e.showlegend=!1),e._dfltShowLegend=!1,m(l,e,g,a,{prefix:"",cLetter:"z"}));a("line.smoothing");h(a,g,c,k)}},{"../../components/colorscale/defaults":625,"./label_defaults":992}],999:[function(b,F,C){C=b("../heatmap/attributes");var m=b("../contour/attributes"),
h=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var l=m.contours;F.exports=b({carpet:{valType:"string",editType:"calc"},z:C.z,a:C.x,a0:C.x0,da:C.dx,b:C.y,b0:C.y0,db:C.dy,text:C.text,hovertext:C.hovertext,transpose:C.transpose,atype:C.xtype,btype:C.ytype,fillcolor:m.fillcolor,autocontour:m.autocontour,ncontours:m.ncontours,contours:{type:l.type,start:l.start,end:l.end,size:l.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},
showlines:l.showlines,showlabels:l.showlabels,labelfont:l.labelfont,labelformat:l.labelformat,operation:l.operation,value:l.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:m.line.color,width:m.line.width,dash:m.line.dash,smoothing:m.line.smoothing,editType:"plot"},transforms:void 0},h("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../contour/attributes":977,"../heatmap/attributes":1034}],1E3:[function(b,F,C){var m=b("../../components/colorscale/calc"),
h=b("../../lib"),l=b("../heatmap/convert_column_xyz"),e=b("../heatmap/clean_2d_array"),a=b("../heatmap/interp2d"),g=b("../heatmap/find_empties"),k=b("../heatmap/make_bound_array"),p=b("./defaults"),n=b("../carpet/lookup_carpetid"),c=b("../contour/set_contours");F.exports=function(f,d){var q=d._carpetTrace=n(f,d);if(q&&q.visible&&"legendonly"!==q.visible){if(!d.a||!d.b){q=f.data[q.index];var r=f.data[d.index];r.a||(r.a=q.a);r.b||(r.b=q.b);p(r,d,d._defaultColor,f._fullLayout)}q=d._carpetTrace;r=q.aaxis;
var u=q.baxis;r._minDtick=0;u._minDtick=0;h.isArray1D(d.z)&&l(d,r,u,"a","b",["z"]);var v=d._a=d._a||d.a;var w=d._b=d._b||d.b;v=v?r.makeCalcdata(d,"_a"):[];w=w?u.makeCalcdata(d,"_b"):[];var y=d.a0||0;var D=d.da||1;var x=d.b0||0;var E=d.db||1;q=d._z=e(d._z||d.z,d.transpose);d._emptypoints=g(q);a(q,d._emptypoints);var B=h.maxRowLength(q);r=k(d,"scaled"===d.xtype?"":v,y,D,B,r);u=k(d,"scaled"===d.ytype?"":w,x,E,q.length,u);r={a:r,b:u,z:q};"levels"===d.contours.type&&"none"!==d.contours.coloring&&m(f,d,
{vals:q,containerStr:"",cLetter:"z"});f=[r];c(d,d._z);return f}}},{"../../components/colorscale/calc":623,"../../lib":749,"../carpet/lookup_carpetid":950,"../contour/set_contours":996,"../heatmap/clean_2d_array":1036,"../heatmap/convert_column_xyz":1038,"../heatmap/find_empties":1040,"../heatmap/interp2d":1043,"../heatmap/make_bound_array":1044,"./defaults":1001}],1001:[function(b,F,C){var m=b("../../lib"),h=b("../heatmap/xyz_defaults"),l=b("./attributes"),e=b("../contour/constraint_defaults"),a=
b("../contour/contours_defaults"),g=b("../contour/style_defaults");F.exports=function(k,p,n,c){function f(q,r){return m.coerce(k,p,l,q,r)}function d(q){return m.coerce2(k,p,l,q)}f("carpet");k.a&&k.b?h(k,p,f,c,"a","b")?(f("text"),"constraint"===f("contours.type")?e(k,p,f,c,n,{hasHover:!1}):(a(k,p,f,d),g(k,p,f,c,{hasHover:!1}))):p.visible=!1:(p._defaultColor=n,p._length=null)}},{"../../lib":749,"../contour/constraint_defaults":982,"../contour/contours_defaults":984,"../contour/style_defaults":998,"../heatmap/xyz_defaults":1048,
"./attributes":999}],1002:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../contour/colorbar"),calc:b("./calc"),plot:b("./plot"),style:b("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet contour symbols showLegend hasLines carpetDependent noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":810,"../contour/colorbar":980,"../contour/style":997,
"./attributes":999,"./calc":1E3,"./defaults":1001,"./plot":1003}],1003:[function(b,F,C){function m(G,I){var L,M,N;for(L=0;L<G.length;L++){var H=G[L];var J=H.pedgepaths=[];var O=H.ppaths=[];for(M=0;M<H.edgepaths.length;M++){var Q=H.edgepaths[M];var U=[];for(N=0;N<Q.length;N++)U[N]=I(Q[N]);J.push(U)}for(M=0;M<H.paths.length;M++){Q=H.paths[M];J=[];for(N=0;N<Q.length;N++)J[N]=I(Q[N]);O.push(J)}}}function h(G,I,L,M,N,H,J){var O=r.ensureSingle(G,"g","contourlines"),Q=!1!==N.showlines,U=N.showlabels,P=Q&&
U,V=w.createLines(O,Q||U,I);O=w.createLineClip(O,P,L,M.trace.uid);G=G.selectAll("g.contourlabels").data(U?[0]:[]);G.exit().remove();G.enter().append("g").classed("contourlabels",!0);if(U){var Y=H.xaxis._length;H=H.yaxis._length;var ba=[[[0,0],[Y,0],[Y,H],[0,H]]],ea=[];r.clearLocationCache();var ca=w.labelFormatter(L,M),ia=q.tester.append("text").attr("data-notex",1).call(q.font,N.labelfont),fa={left:0,right:Y,center:Y/2,top:0,bottom:H,middle:H/2},ha=y.LABELDISTANCE*Math.sqrt(Y*Y+H*H)/Math.max(1,I.length/
y.LABELINCREASE);V.each(function(na){var pa=w.calcTextOpts(na.level,ca,ia,L);c.select(this).selectAll("path").each(function(ra){var ta=r.getVisibleSegment(this,fa,pa.height/2);if(ta&&(l(this,ra,na,ta,J,pa.height),!(ta.len<(pa.width+pa.height)*y.LABELMIN))){ra=Math.min(Math.ceil(ta.len/ha),y.LABELMAX);for(var oa=0;oa<ra;oa++){var ua=w.findBestTextLocation(this,ta,pa,ea,fa);if(!ua)break;w.addLabelData(ua,pa,ea,ba)}}})});ia.remove();w.drawLabels(G,ea,L,O,P?ba:null)}U&&!Q&&V.remove()}function l(G,I,L,
M,N,H){function J(ba,ea){var ca=0;if(.1>Math.abs(ba[0]-U)||.1>Math.abs(ba[0]-P)){var ia=a(N.dxydb_rough(ba[0],ba[1],.1));ca=Math.max(ca,H*g(ea,ia)/2)}if(.1>Math.abs(ba[1]-V)||.1>Math.abs(ba[1]-Y))ia=a(N.dxyda_rough(ba[0],ba[1],.1)),ca=Math.max(ca,H*g(ea,ia)/2);return ca}for(var O,Q=0;Q<L.pedgepaths.length;Q++)I===L.pedgepaths[Q]&&(O=L.edgepaths[Q]);if(O){var U=N.a[0],P=N.a[N.a.length-1],V=N.b[0],Y=N.b[N.b.length-1];I=e(G,0,1);G=e(G,M.total,M.total-1);I=J(O[0],I);O=M.total-J(O[O.length-1],G);M.min<
I&&(M.min=I);M.max>O&&(M.max=O);M.len=M.max-M.min}}function e(G,I,L){I=G.getPointAtLength(I);L=G.getPointAtLength(L);G=L.x-I.x;I=L.y-I.y;L=Math.sqrt(G*G+I*I);return[G/L,I/L]}function a(G){var I=Math.sqrt(G[0]*G[0]+G[1]*G[1]);return[G[0]/I,G[1]/I]}function g(G,I){G=Math.abs(G[0]*I[0]+G[1]*I[1]);return Math.sqrt(1-G*G)/G}function k(G,I,L,M,N,H){var J,O=r.ensureSingle(G,"g","contourbg").selectAll("path").data("fill"!==H||N?[]:[0]);O.enter().append("path");O.exit().remove();var Q=[];for(J=0;J<I.length;J++)G=
I[J],N=f([],G.x,L.c2p),H=f([],G.y,M.c2p),Q.push(d(N,H,G.bicubic));O.attr("d","M"+Q.join("L")+"Z").style("stroke","none")}function p(G,I,L,M,N,H,J,O,Q,U,P){(U="fill"===U)&&E(N,G.contours);I=r.ensureSingle(I,"g","contourfill").selectAll("path").data(U?N:[]);I.enter().append("path");I.exit().remove();I.each(function(V){(V=(V.prefixBoundary?P:"")+n(G,V,H,J,O,Q,L,M))?c.select(this).attr("d",V).style("stroke","none"):c.select(this).remove()})}function n(G,I,L,M,N,H,J,O){function Q(pa){return Math.abs(pa[0]-
L[2][0])<ia}function U(pa,ra){var ta="";if(Math.abs(pa[1]-L[0][1])<fa&&!Q(pa)||Math.abs(pa[1]-L[2][1])<fa&&!(Math.abs(pa[0]-L[0][0])<ia)){var oa=N.aaxis;var ua=t(N,H,[pa[0],ra[0]],.5*(pa[1]+ra[1]))}else oa=N.baxis,ua=t(N,H,.5*(pa[0]+ra[0]),[pa[1],ra[1]]);for(pa=1;pa<ua.length;pa++)for(ta+=oa.smoothing?"C":"L",ra=0;ra<ua[pa].length;ra++){var ka=ua[pa][ra];ta+=[J.c2p(ka[0]),O.c2p(ka[1])]+" "}return ta}var P="",V=I.edgepaths.map(function(pa,ra){return ra}),Y=!0,ba,ea,ca,ia=1E-4*Math.abs(L[0][0]-L[2][0]),
fa=1E-4*Math.abs(L[0][1]-L[2][1]);G=0;for(ba=null;V.length;){var ha=I.edgepaths[G][0];ba&&(P+=U(ba,ha));ba=q.smoothopen(I.edgepaths[G].map(M),I.smoothing);P+=Y?ba:ba.replace(/^M/,"L");V.splice(V.indexOf(G),1);ba=I.edgepaths[G][I.edgepaths[G].length-1];ha=-1;for(Y=0;4>Y;Y++){if(!ba){r.log("Missing end?",G,I);break}Math.abs(ba[1]-L[0][1])<fa&&!Q(ba)?ea=L[1]:Math.abs(ba[0]-L[0][0])<ia?ea=L[0]:Math.abs(ba[1]-L[2][1])<fa?ea=L[3]:Q(ba)&&(ea=L[2]);for(ca=0;ca<I.edgepaths.length;ca++){var na=I.edgepaths[ca][0];
Math.abs(ba[0]-ea[0])<ia?Math.abs(ba[0]-na[0])<ia&&0<=(na[1]-ba[1])*(ea[1]-na[1])&&(ea=na,ha=ca):Math.abs(ba[1]-ea[1])<fa?Math.abs(ba[1]-na[1])<fa&&0<=(na[0]-ba[0])*(ea[0]-na[0])&&(ea=na,ha=ca):r.log("endpt to newendpt is not vert. or horz.",ba,ea,na)}if(0<=ha)break;P+=U(ba,ea);ba=ea}if(ha===I.edgepaths.length){r.log("unclosed perimeter path");break}G=ha;if(Y=-1===V.indexOf(G))G=V[0],P+=U(ba,ea)+"Z",ba=null}for(G=0;G<I.paths.length;G++)P+=q.smoothclosed(I.paths[G].map(M),I.smoothing);return P}var c=
b("d3"),f=b("../carpet/map_1d_array"),d=b("../carpet/makepath"),q=b("../../components/drawing"),r=b("../../lib"),u=b("../contour/make_crossings"),v=b("../contour/find_all_paths"),w=b("../contour/plot"),y=b("../contour/constants"),D=b("../contour/convert_to_constraints"),x=b("../contour/empty_pathinfo"),E=b("../contour/close_boundaries"),B=b("../carpet/lookup_carpetid"),t=b("../carpet/axis_aligned_line");F.exports=function(G,I,L,M){var N=I.xaxis,H=I.yaxis;r.makeTraceGroups(M,L,"contour").each(function(J){function O(oa){oa=
P.ab2xy(oa[0],oa[1],!0);return[N.c2p(oa[0]),H.c2p(oa[1])]}var Q=c.select(this);J=J[0];var U=J.trace,P=U._carpetTrace=B(G,U),V=G.calcdata[P.index][0];if(P.visible&&"legendonly"!==P.visible){var Y=J.a,ba=J.b,ea=U.contours,ca=x(ea,I,J),ia="constraint"===ea.type,fa=ea._operation,ha=ia?"\x3d"===fa?"lines":"fill":ea.coloring,na=[[Y[0],ba[ba.length-1]],[Y[Y.length-1],ba[ba.length-1]],[Y[Y.length-1],ba[0]],[Y[0],ba[0]]];u(ca);v(ca,1E-8*(Y[Y.length-1]-Y[0]),1E-8*(ba[ba.length-1]-ba[0]));Y=ca;"constraint"===
ea.type&&(Y=D(ca,fa));m(ca,O);var pa,ra=[];for(pa=V.clipsegments.length-1;0<=pa;pa--){fa=V.clipsegments[pa];ba=f([],fa.x,N.c2p);var ta=f([],fa.y,H.c2p);ba.reverse();ta.reverse();ra.push(d(ba,ta,fa.bicubic))}fa="M"+ra.join("L")+"Z";k(Q,V.clipsegments,N,H,ia,ha);p(U,Q,N,H,Y,na,O,P,V,ha,fa);h(Q,ca,G,J,ea,I,P);q.setClipUrl(Q,P._clipPathId,G)}})}},{"../../components/drawing":637,"../../lib":749,"../carpet/axis_aligned_line":934,"../carpet/lookup_carpetid":950,"../carpet/makepath":951,"../carpet/map_1d_array":952,
"../contour/close_boundaries":979,"../contour/constants":981,"../contour/convert_to_constraints":985,"../contour/empty_pathinfo":987,"../contour/find_all_paths":989,"../contour/make_crossings":994,"../contour/plot":995,d3:169}],1004:[function(b,F,C){C=b("../../components/colorscale/attributes");var m=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/attributes"),l=b("../scattermapbox/attributes");b=b("../../lib/extend").extendFlat;F.exports=b({lon:l.lon,lat:l.lat,z:{valType:"data_array",
editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:l.text,hovertext:l.hovertext,hoverinfo:b({},h.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:m(),showlegend:b({},h.showlegend,{dflt:!1})},C("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scattermapbox/attributes":1219}],
1005:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../../lib").isArrayOrTypedArray,l=b("../../constants/numerical").BADNUM,e=b("../../components/colorscale/calc"),a=b("../../lib")._;F.exports=function(g,k){for(var p=k._length,n=Array(p),c=k.z,f=h(c)&&c.length,d=0;d<p;d++){var q=n[d]={},r=k.lon[d],u=k.lat[d];q.lonlat=m(r)&&m(u)?[+r,+u]:[l,l];f&&(r=c[d],q.z=m(r)?r:l)}e(g,k,{vals:f?c:[0,1],containerStr:"",cLetter:"z"});p&&(n[0].t={labels:{lat:a(g,"lat:")+" ",lon:a(g,"lon:")+" "}});return n}},{"../../components/colorscale/calc":623,
"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],1006:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../../lib"),l=b("../../components/color"),e=b("../../components/colorscale"),a=b("../../constants/numerical").BADNUM,g=b("../../lib/geojson_utils").makeBlank;F.exports=function(k){var p=k[0].trace,n=!0===p.visible&&0!==p._length,c=p._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:g()};if(!n)return c;n=[];var f,d=p.z,q=p.radius;d=h.isArrayOrTypedArray(d)&&d.length;
var r=h.isArrayOrTypedArray(q);for(f=0;f<k.length;f++){var u=k[f],v=u.lonlat;if(v[0]!==a){var w={};d&&(u=u.z,w.z=u!==a?u:0);r&&(w.r=m(q[f])&&0<q[f]?+q[f]:0);n.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:w})}}k=e.extractOpts(p);q=k.reversescale?e.flipScale(k.colorscale):k.colorscale;f=q[0][1];v=["interpolate",["linear"],["heatmap-density"],0,1>l.opacity(f)?f:l.addOpacity(f,0)];for(f=1;f<q.length;f++)v.push(q[f][0],q[f][1]);f=["interpolate",["linear"],["get","z"],k.min,0,k.max,
1];h.extendFlat(c.heatmap.paint,{"heatmap-weight":d?f:1/(k.max-k.min),"heatmap-color":v,"heatmap-radius":r?{type:"identity",property:"r"}:p.radius,"heatmap-opacity":p.opacity});c.geojson={type:"FeatureCollection",features:n};c.heatmap.layout.visibility="visible";return c}},{"../../components/color":615,"../../components/colorscale":627,"../../constants/numerical":724,"../../lib":749,"../../lib/geojson_utils":743,"fast-isnumeric":241}],1007:[function(b,F,C){var m=b("../../lib"),h=b("../../components/colorscale/defaults"),
l=b("./attributes");F.exports=function(e,a,g,k){function p(c,f){return m.coerce(e,a,l,c,f)}g=p("lon")||[];var n=p("lat")||[];(g=Math.min(g.length,n.length))?(a._length=g,p("z"),p("radius"),p("below"),p("text"),p("hovertext"),p("hovertemplate"),h(e,a,k,p,{prefix:"",cLetter:"z"})):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1004}],1008:[function(b,F,C){F.exports=function(m,h){m.lon=h.lon;m.lat=h.lat;m.z=h.z;return m}},{}],1009:[function(b,F,C){var m=b("../../lib"),
h=b("../../plots/cartesian/axes"),l=b("../scattermapbox/hover");F.exports=function(e,a,g){if(e=l(e,a,g)){e=e[0];var k=e.cd;a=k[0].trace;g=k[e.index];delete e.color;if("z"in g){var p=e.subplot.mockAxis;e.z=g.z;e.zLabel=h.tickText(p,p.c2l(g.z),"hover").text}k=k[0].t.labels;if(a.hovertemplate)a=void 0;else{p=(g.hi||a.hoverinfo).split("+");var n=-1!==p.indexOf("all"),c=-1!==p.indexOf("lon"),f=-1!==p.indexOf("lat"),d=g.lonlat,q=[];n||c&&f?q.push("("+(d[0]+", ")+(d[1]+")")):c?q.push(k.lon+(d[0]+"")):
f&&q.push(k.lat+(d[1]+""));(n||-1!==p.indexOf("text"))&&m.fillText(g,a,q);a=q.join("\x3cbr\x3e")}e.extraText=a;return[e]}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../scattermapbox/hover":1224}],1010:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),formatLabels:b("../scattermapbox/format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),getBelow:function(m,h){m=h.getMapLayers();
for(h=0;h<m.length;h++){var l=m[h],e=l.id;if("symbol"===l.type&&"string"===typeof e&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"densitymapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":854,"../heatmap/colorbar":1037,"../scattermapbox/format_labels":1223,"./attributes":1004,"./calc":1005,"./defaults":1007,"./event_data":1008,"./hover":1009,"./plot":1011}],1011:[function(b,F,C){function m(e,
a){this.type="densitymapbox";this.subplot=e;this.uid=a;this.sourceId="source-"+a;this.layerList=[["heatmap",l+a+"-heatmap"]];this.below=null}var h=b("./convert"),l=b("../../plots/mapbox/constants").traceLayerPrefix;b=m.prototype;b.update=function(e){var a=this.subplot,g=this.layerList;e=h(e);var k=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(e.geojson);k!==this.below&&(this._removeLayers(),this._addLayers(e,k),this.below=k);for(k=0;k<g.length;k++){var p=g[k],n=p[1];p=e[p[0]];
a.setOptions(n,"setLayoutProperty",p.layout);"visible"===p.layout.visibility&&a.setOptions(n,"setPaintProperty",p.paint)}};b._addLayers=function(e,a){for(var g=this.subplot,k=this.layerList,p=this.sourceId,n=0;n<k.length;n++){var c=k[n],f=c[0],d=e[f];g.addLayer({type:f,id:c[1],source:p,layout:d.layout,paint:d.paint},a)}};b._removeLayers=function(){for(var e=this.subplot.map,a=this.layerList,g=a.length-1;0<=g;g--)e.removeLayer(a[g][1])};b.dispose=function(){var e=this.subplot.map;this._removeLayers();
e.removeSource(this.sourceId)};F.exports=function(e,a){var g=a[0].trace,k=new m(e,g.uid),p=k.sourceId;a=h(a);g=k.below=e.belowLookup["trace-"+g.uid];e.map.addSource(p,{type:"geojson",data:a.geojson});k._addLayers(a,g);return k}},{"../../plots/mapbox/constants":852,"./convert":1006}],1012:[function(b,F,C){var m=b("../../lib");F.exports=function(h,l){for(var e=0;e<h.length;e++)h[e].i=e;m.mergeArray(l.text,h,"tx");m.mergeArray(l.hovertext,h,"htx");if(l=l.marker)if(m.mergeArray(l.opacity,h,"mo"),m.mergeArray(l.color,
h,"mc"),l=l.line)m.mergeArray(l.color,h,"mlc"),m.mergeArrayCastPositive(l.width,h,"mlw")}},{"../../lib":749}],1013:[function(b,F,C){C=b("../bar/attributes");var m=b("../scatter/attributes").line,h=b("../../plots/attributes"),l=b("../../plots/template_attributes").hovertemplateAttrs,e=b("../../plots/template_attributes").texttemplateAttrs,a=b("./constants"),g=b("../../lib/extend").extendFlat;b=b("../../components/color");F.exports={x:C.x,x0:C.x0,dx:C.dx,y:C.y,y0:C.y0,dy:C.dy,hovertext:C.hovertext,
hovertemplate:l({},{keys:a.eventDataKeys}),hoverinfo:g({},h.hoverinfo,{flags:"name;x;y;text;percent initial;percent previous;percent total".split(";")}),textinfo:{valType:"flaglist",flags:"label;text;percent initial;percent previous;percent total;value".split(";"),extras:["none"],editType:"plot",arrayOk:!1},texttemplate:e({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:C.text,textposition:g({},C.textposition,{dflt:"auto"}),insidetextanchor:g({},C.insidetextanchor,{dflt:"middle"}),
textangle:g({},C.textangle,{dflt:0}),textfont:C.textfont,insidetextfont:C.insidetextfont,outsidetextfont:C.outsidetextfont,constraintext:C.constraintext,cliponaxis:C.cliponaxis,orientation:g({},C.orientation,{}),offset:g({},C.offset,{arrayOk:!1}),width:g({},C.width,{arrayOk:!1}),marker:C.marker,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:g({},m.color,{dflt:b.defaultLine}),width:g({},m.width,{dflt:0,editType:"plot"}),dash:m.dash,editType:"style"},visible:{valType:"boolean",
dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:C.offsetgroup,alignmentgroup:C.alignmentgroup}},{"../../components/color":615,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155,"./constants":1015}],1014:[function(b,F,C){function m(g){return g===a?0:g}var h=b("../../plots/cartesian/axes"),l=b("./arrays_to_calcdata"),e=b("../scatter/calc_selection"),a=b("../../constants/numerical").BADNUM;F.exports=function(g,
k){var p=h.getFromId(g,k.xaxis||"x"),n=h.getFromId(g,k.yaxis||"y");"h"===k.orientation?(g=p.makeCalcdata(k,"x"),p=n.makeCalcdata(k,"y")):(g=n.makeCalcdata(k,"y"),p=p.makeCalcdata(k,"x"));var c=Math.min(p.length,g.length),f=Array(c);k._base=[];for(n=0;n<c;n++){0>g[n]&&(g[n]=a);var d=!1;g[n]!==a&&n+1<c&&g[n+1]!==a&&(d=!0);d=f[n]={p:p[n],s:g[n],cNext:d};k._base[n]=-.5*d.s;k.ids&&(d.id=String(k.ids[n]));0===n&&(f[0].vTotal=0);f[0].vTotal+=m(d.s);d.begR=m(d.s)/m(f[0].s)}for(n=0;n<c;n++)if(d=f[n],d.s!==
a){d.sumR=d.s/f[0].vTotal;d.difR=void 0!==q?d.s/q:1;var q=d.s}l(f,k);e(f,k);return f}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157,"./arrays_to_calcdata":1012}],1015:[function(b,F,C){F.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],1016:[function(b,F,C){var m=b("../bar/cross_trace_calc").setGroupPositions;F.exports=function(h,l){var e=h._fullLayout,a=h._fullData,g=h.calcdata,k=l.xaxis,p=l.yaxis;l=[];var n=[],
c=[],f;for(f=0;f<a.length;f++){var d=a[f];var q="h"===d.orientation;!0===d.visible&&d.xaxis===k._id&&d.yaxis===p._id&&"funnel"===d.type&&(d=g[f],q?c.push(d):n.push(d),l.push(d))}e={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};m(h,k,p,n,e);m(h,p,k,c,e);for(f=0;f<l.length;f++)for(d=l[f],h=0;h<d.length;h++)h+1<d.length&&(d[h].nextP0=d[h+1].p0,d[h].nextS0=d[h+1].s0,d[h].nextP1=d[h+1].p1,d[h].nextS1=d[h+1].s1)}},{"../bar/cross_trace_calc":893}],1017:[function(b,F,C){function m(p){p=
h.isArrayOrTypedArray(p)?"#000":p;return k.addOpacity(p,.5*k.opacity(p))}var h=b("../../lib"),l=b("../bar/defaults").handleGroupingDefaults,e=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),g=b("./attributes"),k=b("../../components/color");F.exports={supplyDefaults:function(p,n,c,f){function d(u,v){return h.coerce(p,n,g,u,v)}if(a(p,n,f,d)){d("orientation",n.y&&!n.x?"v":"h");d("offset");d("width");var q=d("text");d("hovertext");d("hovertemplate");var r=d("textposition");e(p,n,f,d,r,{moduleHasSelected:!1,
moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});"none"===n.textposition||n.texttemplate||d("textinfo",Array.isArray(q)?"text+value":"value");c=d("marker.color",c);d("marker.line.color",k.defaultLine);d("marker.line.width");d("connector.visible")&&(d("connector.fillcolor",m(c)),d("connector.line.width")&&(d("connector.line.color"),d("connector.line.dash")))}else n.visible=!1},crossTraceDefaults:function(p,n){function c(r){return h.coerce(d._input,
d,g,r)}if("group"===n.funnelmode)for(var f=0;f<p.length;f++){var d=p[f];var q=d._input;l(q,d,n,c)}}}},{"../../components/color":615,"../../lib":749,"../bar/defaults":894,"../scatter/xy_defaults":1181,"./attributes":1013}],1018:[function(b,F,C){F.exports=function(m,h){m.x="xVal"in h?h.xVal:h.x;m.y="yVal"in h?h.yVal:h.y;"percentInitial"in h&&(m.percentInitial=h.percentInitial);"percentPrevious"in h&&(m.percentPrevious=h.percentPrevious);"percentTotal"in h&&(m.percentTotal=h.percentTotal);h.xa&&(m.xaxis=
h.xa);h.ya&&(m.yaxis=h.ya);return m}},{}],1019:[function(b,F,C){var m=b("../../components/color").opacity,h=b("../bar/hover").hoverOnBars,l=b("../../lib").formatPercent;F.exports=function(e,a,g,k){if(e=h(e,a,g,k)){a=e.cd;g=a[0].trace;a=a[e.index];e[("h"===g.orientation?"x":"y")+"LabelVal"]=a.s;e.percentInitial=a.begR;e.percentInitialLabel=l(a.begR,1);e.percentPrevious=a.difR;e.percentPreviousLabel=l(a.difR,1);e.percentTotal=a.sumR;e.percentTotalLabel=l(a.sumR,1);var p=a.hi||g.hoverinfo;k=[];if(p&&
"none"!==p&&"skip"!==p){var n="all"===p;p=p.split("+");(n||-1!==p.indexOf("percent initial"))&&k.push(e.percentInitialLabel+" of initial");(n||-1!==p.indexOf("percent previous"))&&k.push(e.percentPreviousLabel+" of previous");(n||-1!==p.indexOf("percent total"))&&k.push(e.percentTotalLabel+" of total")}e.extraText=k.join("\x3cbr\x3e");n=g.marker;g=a.mc||n.color;k=a.mlc||n.line.color;a=a.mlw||n.line.width;a=m(g)?g:m(k)&&a?k:void 0;e.color=a;return[e]}}},{"../../components/color":615,"../../lib":749,
"../bar/hover":897}],1020:[function(b,F,C){F.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:b("../../plots/cartesian"),
categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/select":902,"./attributes":1013,"./calc":1014,"./cross_trace_calc":1016,"./defaults":1017,"./event_data":1018,"./hover":1019,"./layout_attributes":1021,"./layout_defaults":1022,"./plot":1023,"./style":1024}],1021:[function(b,F,C){F.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,
editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1022:[function(b,F,C){var m=b("../../lib"),h=b("./layout_attributes");F.exports=function(l,e,a){for(var g=!1,k=0;k<a.length;k++){var p=a[k];if(p.visible&&"funnel"===p.type){g=!0;break}}g&&(m.coerce(l,e,h,"funnelmode",void 0),m.coerce(l,e,h,"funnelgap",.2),m.coerce(l,e,h,"funnelgroupgap",void 0))}},{"../../lib":749,"./layout_attributes":1021}],1023:[function(b,F,C){function m(c,f,d,q){var r=f.xaxis,u=f.yaxis;
a.makeTraceGroups(q,d,"trace bars").each(function(v){var w=e.select(this);v=v[0].trace;w=a.ensureSingle(w,"g","regions");if(v.connector&&v.connector.visible){var y="h"===v.orientation;w=w.selectAll("g.region").data(a.identity);w.enter().append("g").classed("region",!0);w.exit().remove();var D=w.size();w.each(function(x,E){if(E===D-1||x.cNext){E=l(x,r,u,y);x=E[0];E=E[1];var B="";x[0]!==k&&E[0]!==k&&x[1]!==k&&E[1]!==k&&x[2]!==k&&E[2]!==k&&x[3]!==k&&E[3]!==k&&(B=y?B+("M"+x[0]+","+E[1]+"L"+x[2]+","+E[2]+
"H"+x[3]+"L"+x[1]+","+E[1]+"Z"):B+("M"+x[1]+","+E[1]+"L"+x[2]+","+E[3]+"V"+E[2]+"L"+x[1]+","+E[0]+"Z"));""===B&&(B="M0,0Z");a.ensureSingle(e.select(this),"path").attr("d",B).call(g.setClipUrl,f.layerClipId,c)}})}else w.remove()})}function h(c,f,d,q){var r=f.xaxis,u=f.yaxis;a.makeTraceGroups(q,d,"trace bars").each(function(v){var w=e.select(this);v=v[0].trace;w=a.ensureSingle(w,"g","lines");if(v.connector&&v.connector.visible&&v.connector.line.width){var y="h"===v.orientation;w=w.selectAll("g.line").data(a.identity);
w.enter().append("g").classed("line",!0);w.exit().remove();var D=w.size();w.each(function(x,E){if(E===D-1||x.cNext){E=l(x,r,u,y);x=E[0];E=E[1];var B="";void 0!==x[3]&&void 0!==E[3]&&(y?(B+="M"+x[0]+","+E[1]+"L"+x[2]+","+E[2],B+="M"+x[1]+","+E[1]+"L"+x[3]+","+E[2]):(B+="M"+x[1]+","+E[1]+"L"+x[2]+","+E[3],B+="M"+x[1]+","+E[0]+"L"+x[2]+","+E[2]));""===B&&(B="M0,0Z");a.ensureSingle(e.select(this),"path").attr("d",B).call(g.setClipUrl,f.layerClipId,c)}})}else w.remove()})}function l(c,f,d,q){var r=[],
u=[],v=q?f:d;f=q?d:f;r[0]=v.c2p(c.s0,!0);u[0]=f.c2p(c.p0,!0);r[1]=v.c2p(c.s1,!0);u[1]=f.c2p(c.p1,!0);r[2]=v.c2p(c.nextS0,!0);u[2]=f.c2p(c.nextP0,!0);r[3]=v.c2p(c.nextS1,!0);u[3]=f.c2p(c.nextP1,!0);return q?[r,u]:[u,r]}var e=b("d3"),a=b("../../lib"),g=b("../../components/drawing"),k=b("../../constants/numerical").BADNUM,p=b("../bar/plot"),n=b("../bar/uniform_text").clearMinTextSize;F.exports=function(c,f,d,q){var r=c._fullLayout;n("funnel",r);m(c,f,d,q);h(c,f,d,q);p.plot(c,f,d,q,{mode:r.funnelmode,
norm:r.funnelmode,gap:r.funnelgap,groupgap:r.funnelgroupgap})}},{"../../components/drawing":637,"../../constants/numerical":724,"../../lib":749,"../bar/plot":901,"../bar/uniform_text":906,d3:169}],1024:[function(b,F,C){var m=b("d3"),h=b("../../components/drawing"),l=b("../../components/color"),e=b("../../constants/interactions").DESELECTDIM;C=b("../bar/style");var a=b("../bar/uniform_text").resizeText,g=C.styleTextPoints;F.exports={style:function(k,p,n){p=n?n:m.select(k).selectAll("g.funnellayer").selectAll("g.trace");
a(k,p,"funnel");p.style("opacity",function(c){return c[0].trace.opacity});p.each(function(c){var f=m.select(this),d=c[0].trace;f.selectAll(".point \x3e path").each(function(q){if(!q.isBlank){var r=d.marker;m.select(this).call(l.fill,q.mc||r.color).call(l.stroke,q.mlc||r.line.color).call(h.dashLine,r.line.dash,q.mlw||r.line.width).style("opacity",d.selectedpoints&&!q.selected?e:1)}});g(f,d,k);f.selectAll(".regions").each(function(){m.select(this).selectAll("path").style("stroke-width",0).call(l.fill,
d.connector.fillcolor)});f.selectAll(".lines").each(function(){var q=d.connector.line;h.lineGroupStyle(m.select(this).selectAll("path"),q.width,q.color,q.dash)})})}}},{"../../components/color":615,"../../components/drawing":637,"../../constants/interactions":723,"../bar/style":904,"../bar/uniform_text":906,d3:169}],1025:[function(b,F,C){C=b("../pie/attributes");var m=b("../../plots/attributes"),h=b("../../plots/domain").attributes,l=b("../../plots/template_attributes").hovertemplateAttrs,e=b("../../plots/template_attributes").texttemplateAttrs;
b=b("../../lib/extend").extendFlat;F.exports={labels:C.labels,label0:C.label0,dlabel:C.dlabel,values:C.values,marker:{colors:C.marker.colors,line:{color:b({},C.marker.line.color,{dflt:null}),width:b({},C.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:C.text,hovertext:C.hovertext,scalegroup:b({},C.scalegroup,{}),textinfo:b({},C.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:b({},
m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:l({},{keys:["label","color","value","text","percent"]}),textposition:b({},C.textposition,{values:["inside","none"],dflt:"inside"}),textfont:C.textfont,insidetextfont:C.insidetextfont,title:{text:C.title.text,font:C.title.font,position:b({},C.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:h({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",
min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129}],1026:[function(b,F,C){var m=b("../../plots/plots");C.name="funnelarea";C.plot=function(h,l,e,a){m.plotBasePlot(C.name,h,l,e,a)};C.clean=function(h,l,e,a){m.cleanBasePlot(C.name,h,l,e,a)}},{"../../plots/plots":860}],1027:[function(b,F,C){var m=b("../pie/calc");
F.exports={calc:function(h,l){return m.calc(h,l)},crossTraceCalc:function(h){m.crossTraceCalc(h,{type:"funnelarea"})}}},{"../pie/calc":1131}],1028:[function(b,F,C){var m=b("../../lib"),h=b("./attributes"),l=b("../../plots/domain").defaults,e=b("../bar/defaults").handleText,a=b("../pie/defaults").handleLabelsAndValues;F.exports=function(g,k,p,n){function c(q,r){return m.coerce(g,k,h,q,r)}p=c("labels");var f=c("values");p=a(p,f);f=p.len;k._hasLabels=p.hasLabels;k._hasValues=p.hasValues;!k._hasLabels&&
k._hasValues&&(c("label0"),c("dlabel"));if(f){k._length=f;c("marker.line.width")&&c("marker.line.color",n.paper_bgcolor);c("marker.colors");c("scalegroup");p=c("text");f=c("texttemplate");var d;f||(d=c("textinfo",Array.isArray(p)?"text+percent":"percent"));c("hovertext");c("hovertemplate");if(f||d&&"none"!==d)d=c("textposition"),e(g,k,n,c,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});l(k,n,c);c("title.text")&&
(c("title.position"),m.coerceFont(c,"title.font",n.font));c("aspectratio");c("baseratio")}else k.visible=!1}},{"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"../pie/defaults":1132,"./attributes":1025}],1029:[function(b,F,C){F.exports={moduleType:"trace",name:"funnelarea",basePlotModule:b("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),
calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style"),styleOne:b("../pie/style_one"),meta:{}}},{"../pie/style_one":1140,"./attributes":1025,"./base_plot":1026,"./calc":1027,"./defaults":1028,"./layout_attributes":1030,"./layout_defaults":1031,"./plot":1032,"./style":1033}],1030:[function(b,F,C){b=b("../pie/layout_attributes").hiddenlabels;F.exports={hiddenlabels:b,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",
dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1136}],1031:[function(b,F,C){var m=b("../../lib"),h=b("./layout_attributes");F.exports=function(l,e){m.coerce(l,e,h,"hiddenlabels",void 0);m.coerce(l,e,h,"funnelareacolorway",e.colorway);m.coerce(l,e,h,"extendfunnelareacolors",void 0)}},{"../../lib":749,"./layout_attributes":1030}],1032:[function(b,F,C){function m(y,D){return"l"+(D[0]-y[0])+","+(D[1]-y[1])}function h(y,D){return[.5*(y[0]+D[0]),.5*(y[1]+D[1])]}function l(y){function D(){var H=
Math.sqrt(G);return[H,-H]}if(y.length){var x=y[0],E=x.trace,B=E.aspectratio;E=E.baseratio;.999<E&&(E=.999);E=Math.pow(E,2);var t=x.vTotal,G=t*E/(1-E)/t;E=[];E.push(D());var I;for(I=y.length-1;-1<I;I--){var L=y[I];L.hidden||(G+=L.v/t,E.push(D()))}t=Infinity;var M=-Infinity;for(I=0;I<E.length;I++)L=E[I],t=Math.min(t,L[1]),M=Math.max(M,L[1]);for(I=0;I<E.length;I++)E[I][1]-=(M+t)/2;I=x.r;t=(M-t)/2;L=I/E[E.length-1][0];B*=I/t;x.r=B*t;for(I=0;I<E.length;I++)E[I][0]*=L,E[I][1]*=B;L=E[0];x=[-L[0],L[1]];B=
[L[0],L[1]];t=0;for(I=y.length-1;-1<I;I--)if(L=y[I],!L.hidden){t+=1;M=E[t][0];var N=E[t][1];L.TL=[-M,N];L.TR=[M,N];L.BL=x;L.BR=B;L.pxmid=h(L.TR,L.BR);x=L.TL;B=L.TR}}}var e=b("d3"),a=b("../../components/drawing"),g=b("../../lib"),k=b("../../lib/svg_text_utils"),p=b("../bar/plot").toMoveInsideBar;C=b("../bar/uniform_text");var n=C.recordMinTextSize,c=C.clearMinTextSize,f=b("../pie/helpers");b=b("../pie/plot");var d=b.attachFxHandlers,q=b.determineInsideTextFont,r=b.layoutAreas,u=b.prerenderTitles,v=
b.positionTitleOutside,w=b.formatSliceLabel;F.exports=function(y,D){var x=y._fullLayout;c("funnelarea",x);u(D,y);r(D,x._size);g.makeTraceGroups(x._funnelarealayer,D,"trace").each(function(E){var B=e.select(this),t=E[0],G=t.trace;l(E);B.each(function(){var I=e.select(this).selectAll("g.slice").data(E);I.enter().append("g").classed("slice",!0);I.exit().remove();I.each(function(L,M){if(L.hidden)e.select(this).selectAll("path,g").remove();else{L.pointNumber=L.i;L.curveNumber=G.index;var N=t.cx,H=t.cy,
J=e.select(this),O=J.selectAll("path.surface").data([L]);O.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});J.call(d,y,E);var Q="M"+(N+L.TR[0])+","+(H+L.TR[1])+m(L.TR,L.BR)+m(L.BR,L.BL)+m(L.BL,L.TL)+"Z";O.attr("d",Q);w(y,L,t);O=f.castOption(G.textposition,L.pts);J=J.selectAll("g.slicetext").data(L.text&&"none"!==O?[0]:[]);J.enter().append("g").classed("slicetext",!0);J.exit().remove();J.each(function(){var U=g.ensureSingle(e.select(this),"text","",function(Y){Y.attr("data-notex",
1)}),P=g.ensureUniformFontSize(y,q(G,L,x.font));U.text(L.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(a.font,P).call(k.convertToTspans,y);var V=a.bBox(U.node());V=p(Math.max(L.TL[0],L.BL[0])+N,Math.min(L.TR[0],L.BR[0])+N,Math.min(L.BL[1],L.BR[1])+H,Math.max(L.TL[1],L.TR[1])+H,V,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"});V.fontSize=P.size;n(G.type,V,x);E[M].transform=V;U.attr("transform",g.getTextTransform(V))})}});I=e.select(this).selectAll("g.titletext").data(G.title.text?
[0]:[]);I.enter().append("g").classed("titletext",!0);I.exit().remove();I.each(function(){var L=g.ensureSingle(e.select(this),"text","",function(N){N.attr("data-notex",1)}),M=G.title.text;G._meta&&(M=g.templateString(M,G._meta));L.text(M).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(a.font,G.title.font).call(k.convertToTspans,y);M=v(t,x._size);L.attr("transform","translate("+M.x+","+M.y+")"+(1>M.scale?"scale("+M.scale+")":"")+"translate("+M.tx+","+M.ty+")")})})})}},{"../../components/drawing":637,
"../../lib":749,"../../lib/svg_text_utils":773,"../bar/plot":901,"../bar/uniform_text":906,"../pie/helpers":1134,"../pie/plot":1138,d3:169}],1033:[function(b,F,C){var m=b("d3"),h=b("../pie/style_one"),l=b("../bar/uniform_text").resizeText;F.exports=function(e){var a=e._fullLayout._funnelarealayer.selectAll(".trace");l(e,a,"funnelarea");a.each(function(g){var k=g[0].trace;g=m.select(this);g.style({opacity:k.opacity});g.selectAll("path.surface").each(function(p){m.select(this).call(h,p,k)})})}},{"../bar/uniform_text":906,
"../pie/style_one":1140,d3:169}],1034:[function(b,F,C){C=b("../scatter/attributes");var m=b("../../plots/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,l=b("../../components/colorscale/attributes");b("../../constants/docs");b=b("../../lib/extend").extendFlat;F.exports=b({z:{valType:"data_array",editType:"calc"},x:b({},C.x,{impliedEdits:{xtype:"array"}}),x0:b({},C.x0,{impliedEdits:{xtype:"scaled"}}),dx:b({},C.dx,{impliedEdits:{xtype:"scaled"}}),y:b({},C.y,{impliedEdits:{ytype:"array"}}),
y0:b({},C.y0,{impliedEdits:{ytype:"scaled"}}),dy:b({},C.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",
dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},hovertemplate:h(),showlegend:b({},m.showlegend,{dflt:!1})},{transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../constants/docs":719,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,
"../scatter/attributes":1155}],1035:[function(b,F,C){function m(r){for(var u=[],v=r.length,w=0;w<v;w++){var y=r[w];y!==q&&u.push(y)}return u}function h(r,u,v){for(var w=[],y=-1,D=0;D<v.length;D++)if(u[D]!==q){y++;w[y]=[];for(var x=0;x<v[D].length;x++)r[x]!==q&&w[y].push(v[D][x])}return w}var l=b("../../registry"),e=b("../../lib"),a=b("../../plots/cartesian/axes"),g=b("../histogram2d/calc"),k=b("../../components/colorscale/calc"),p=b("./convert_column_xyz"),n=b("./clean_2d_array"),c=b("./interp2d"),
f=b("./find_empties"),d=b("./make_bound_array"),q=b("../../constants/numerical").BADNUM;F.exports=function(r,u){function v(P){B=u._input.zsmooth=u.zsmooth=!1;e.warn('cannot use zsmooth: "fast": '+P)}var w=a.getFromId(r,u.xaxis||"x"),y=a.getFromId(r,u.yaxis||"y"),D=l.traceIs(u,"contour"),x=l.traceIs(u,"histogram"),E=l.traceIs(u,"gl2d"),B=D?"best":u.zsmooth,t;w._minDtick=0;y._minDtick=0;if(x){var G=g(r,u);var I=G.x;var L=G.x0;var M=G.dx;var N=G.y;var H=G.y0;var J=G.dy;var O=G.z}else O=u.z,e.isArray1D(O)?
(p(u,w,y,"x","y",["z"]),I=u._x,N=u._y,O=u._z):(I=u._x=u.x?w.makeCalcdata(u,"x"):[],N=u._y=u.y?y.makeCalcdata(u,"y"):[]),L=u.x0,M=u.dx,H=u.y0,J=u.dy,O=n(O,u,w,y);if(w.rangebreaks||y.rangebreaks)O=h(I,N,O),x||(I=m(I),N=m(N),u._x=I,u._y=N);x||!D&&!u.connectgaps||(u._emptypoints=f(O),c(O,u._emptypoints));if("fast"===B)if("log"===w.type||"log"===y.type)v("log axis found");else if(!x){if(I.length){var Q=(I[I.length-1]-I[0])/(I.length-1),U=Math.abs(Q/100);for(t=0;t<I.length-1;t++)if(Math.abs(I[t+1]-I[t]-
Q)>U){v("x scale is not linear");break}}if(N.length&&"fast"===B)for(Q=(N[N.length-1]-N[0])/(N.length-1),U=Math.abs(Q/100),t=0;t<N.length-1;t++)if(Math.abs(N[t+1]-N[t]-Q)>U){v("y scale is not linear");break}}t=e.maxRowLength(O);I="scaled"===u.xtype?"":I;Q=d(u,I,L,M,t,w);N="scaled"===u.ytype?"":N;U=d(u,N,H,J,O.length,y);E||(u._extremes[w._id]=a.findExtremes(w,Q),u._extremes[y._id]=a.findExtremes(y,U));E={x:Q,y:U,z:O,text:u._text||u.text,hovertext:u._hovertext||u.hovertext};I&&I.length===Q.length-1&&
(E.xCenter=I);N&&N.length===U.length-1&&(E.yCenter=N);x&&(E.xRanges=G.xRanges,E.yRanges=G.yRanges,E.pts=G.pts);D||k(r,u,{vals:O,cLetter:"z"});D&&u.contours&&"heatmap"===u.contours.coloring&&(r={type:"contour"===u.type?"heatmap":"histogram2d",xcalendar:u.xcalendar,ycalendar:u.ycalendar},E.xfill=d(r,I,L,M,t,w),E.yfill=d(r,N,H,J,O.length,y));return[E]}},{"../../components/colorscale/calc":623,"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"../histogram2d/calc":1067,
"./clean_2d_array":1036,"./convert_column_xyz":1038,"./find_empties":1040,"./interp2d":1043,"./make_bound_array":1044}],1036:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../../lib"),l=b("../../constants/numerical").BADNUM;F.exports=function(e,a,g,k){function p(D){if(m(D))return+D}function n(D){if(a&&"carpet"!==a.type&&"contourcarpet"!==a.type&&D&&"category"===D.type&&a["_"+D._id.charAt(0)].length){var x=D._id.charAt(0),E={};x=a["_"+x+"CategoryMap"]||a[x];for(f=0;f<x.length;f++)E[x[f]]=f;return function(B){B=
E[D._categories[B]];return B+1?B:l}}return h.identity}var c,f,d;if(a&&a.transpose){for(f=c=0;f<e.length;f++)c=Math.max(c,e[f].length);if(0===c)return!1;var q=function(D){return D.length};var r=function(D,x,E){return(D[E]||[])[x]}}else c=e.length,q=function(D,x){return D[x].length},r=function(D,x,E){return(D[x]||[])[E]};var u=function(D,x,E){return x===l||E===l?l:r(D,x,E)},v=n(g),w=n(k);k&&"category"===k.type&&(c=k._categories.length);var y=Array(c);for(f=0;f<c;f++)for(k=g&&"category"===g.type?g._categories.length:
q(e,f),y[f]=Array(k),d=0;d<k;d++)y[f][d]=p(u(e,w(f),v(d)));return y}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],1037:[function(b,F,C){F.exports={min:"zmin",max:"zmax"}},{}],1038:[function(b,F,C){var m=b("../../lib"),h=b("../../constants/numerical").BADNUM;F.exports=function(l,e,a,g,k,p){var n=l._length,c=e.makeCalcdata(l,g),f=a.makeCalcdata(l,k),d=l.text,q=void 0!==d&&m.isArray1D(d),r=l.hovertext,u=void 0!==r&&m.isArray1D(r),v,w=m.distinctVals(c),y=w.vals,D=m.distinctVals(f),
x=D.vals,E=[],B,t;var G=x.length;var I=y.length;for(v=0;v<p.length;v++)E[v]=m.init2dArray(G,I);q&&(B=m.init2dArray(G,I));u&&(t=m.init2dArray(G,I));I=m.init2dArray(G,I);for(v=0;v<n;v++)if(c[v]!==h&&f[v]!==h){var L=m.findBin(c[v]+w.minDiff/2,y),M=m.findBin(f[v]+D.minDiff/2,x);for(G=0;G<p.length;G++)E[G][M][L]=l[p[G]][v],I[M][L]=v;q&&(B[M][L]=d[v]);u&&(t[M][L]=r[v])}l["_"+g]=y;l["_"+k]=x;for(G=0;G<p.length;G++)l["_"+p[G]]=E[G];q&&(l._text=B);u&&(l._hovertext=t);e&&"category"===e.type&&(l["_"+g+"CategoryMap"]=
y.map(function(N){return e._categories[N]}));a&&"category"===a.type&&(l["_"+k+"CategoryMap"]=x.map(function(N){return a._categories[N]}));l._after2before=I}},{"../../constants/numerical":724,"../../lib":749}],1039:[function(b,F,C){var m=b("../../lib"),h=b("./xyz_defaults"),l=b("./style_defaults"),e=b("../../components/colorscale/defaults"),a=b("./attributes");F.exports=function(g,k,p,n){function c(f,d){return m.coerce(g,k,a,f,d)}h(g,k,c,n)?(c("text"),c("hovertext"),c("hovertemplate"),l(g,k,c,n),c("hoverongaps"),
c("connectgaps",m.isArray1D(k.z)&&!1!==k.zsmooth),e(g,k,n,c,{prefix:"",cLetter:"z"})):k.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1034,"./style_defaults":1047,"./xyz_defaults":1048}],1040:[function(b,F,C){var m=b("../../lib").maxRowLength;F.exports=function(h){var l=[],e={},a=[],g=h[0],k=[],p=[0,0,0],n=m(h),c,f,d;for(c=0;c<h.length;c++){var q=k;k=g;g=h[c+1]||[];for(f=0;f<n;f++)void 0===k[f]&&((d=(void 0!==k[f-1]?1:0)+(void 0!==k[f+1]?1:0)+(void 0!==q[f]?
1:0)+(void 0!==g[f]?1:0))?(0===c&&d++,0===f&&d++,c===h.length-1&&d++,f===k.length-1&&d++,4>d&&(e[[c,f]]=[c,f,d]),l.push([c,f,d])):a.push([c,f]))}for(;a.length;){g={};k=!1;for(h=a.length-1;0<=h;h--){var r=a[h];c=r[0];f=r[1];if(d=((e[[c-1,f]]||p)[2]+(e[[c+1,f]]||p)[2]+(e[[c,f-1]]||p)[2]+(e[[c,f+1]]||p)[2])/20)g[r]=[c,f,d],a.splice(h,1),k=!0}if(!k)throw"findEmpties iterated with no new neighbors";for(r in g)e[r]=g[r],l.push(g[r])}return l.sort(function(u,v){return v[2]-u[2]})}},{"../../lib":749}],1041:[function(b,
F,C){var m=b("../../components/fx"),h=b("../../lib"),l=b("../../plots/cartesian/axes"),e=b("../../components/colorscale").extractOpts;F.exports=function(a,g,k,p,n,c){var f=a.cd[0];p=f.trace;n=a.xa;var d=a.ya,q=f.x,r=f.y,u=f.z,v=f.xCenter,w=f.yCenter,y=f.zmask,D=p.zhoverformat,x=q,E=r;if(!1!==a.index){try{var B=Math.round(a.index[1]);var t=Math.round(a.index[0])}catch(I){h.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(0>B||B>=u[0].length||0>t||t>u.length)return}else{if(0<
m.inbox(g-q[0],g-q[q.length-1],0)||0<m.inbox(k-r[0],k-r[r.length-1],0))return;if(c){x=[2*q[0]-q[1]];for(B=1;B<q.length;B++)x.push((q[B]+q[B-1])/2);x.push([2*q[q.length-1]-q[q.length-2]]);E=[2*r[0]-r[1]];for(B=1;B<r.length;B++)E.push((r[B]+r[B-1])/2);E.push([2*r[r.length-1]-r[r.length-2]])}B=Math.max(0,Math.min(x.length-2,h.findBin(g,x)));t=Math.max(0,Math.min(E.length-2,h.findBin(k,E)))}g=n.c2p(q[B]);k=n.c2p(q[B+1]);x=d.c2p(r[t]);E=d.c2p(r[t+1]);c?(k=g,c=q[B],E=x,w=r[t]):(c=v?v[B]:(q[B]+q[B+1])/2,
w=w?w[t]:(r[t]+r[t+1])/2,n&&"category"===n.type&&(c=q[B]),d&&"category"===d.type&&(w=r[t]),p.zsmooth&&(g=k=n.c2p(c),x=E=d.c2p(w)));d=u[t][B];y&&!y[t][B]&&(d=void 0);if(void 0!==d||p.hoverongaps){var G;Array.isArray(f.hovertext)&&Array.isArray(f.hovertext[t])?G=f.hovertext[t][B]:Array.isArray(f.text)&&Array.isArray(f.text[t])&&(G=f.text[t][B]);f=e(p);n=l.tickText({type:"linear",range:[f.min,f.max],hoverformat:D,_separators:n._separators,_numFormat:n._numFormat},d,"hover").text;return[h.extendFlat(a,
{index:p._after2before?p._after2before[t][B]:[t,B],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:g,x1:k,y0:x,y1:E,xLabelVal:c,yLabelVal:w,zLabelVal:d,zLabel:n,text:G})]}}},{"../../components/colorscale":627,"../../components/fx":655,"../../lib":749,"../../plots/cartesian/axes":797}],1042:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:b("./colorbar"),style:b("./style"),hoverPoints:b("./hover"),moduleType:"trace",
name:"heatmap",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":810,"./attributes":1034,"./calc":1035,"./colorbar":1037,"./defaults":1039,"./hover":1041,"./plot":1045,"./style":1046}],1043:[function(b,F,C){function m(e,a,g){var k=0,p,n,c,f,d,q;for(p=0;p<a.length;p++){var r=a[p];var u=r[0];r=r[1];var v=e[u][r];for(n=f=d=0;4>n;n++){var w=l[n];if(c=e[u+w[0]])if(w=c[r+w[1]],void 0!==w){if(0===d)var y=q=w;else y=Math.min(y,
w),q=Math.max(q,w);f++;d+=w}}if(0===f)throw"iterateInterp2d order is wrong: no defined neighbors";e[u][r]=d/f;void 0===v?4>f&&(k=1):(e[u][r]=(1+g)*e[u][r]-g*v,q>y&&(k=Math.max(k,Math.abs(e[u][r]-v)/(q-y))))}return k}var h=b("../../lib"),l=[[-1,0],[1,0],[0,-1],[0,1]];F.exports=function(e,a){var g=1,k;m(e,a);for(k=0;k<a.length&&!(4>a[k][2]);k++);a=a.slice(k);for(k=0;100>k&&.01<g;k++)g=m(e,a,.5-.25*Math.min(1,.5*g));.01<g&&h.log("interp2d didn't converge quickly",g);return e}},{"../../lib":749}],1044:[function(b,
F,C){var m=b("../../registry"),h=b("../../lib").isArrayOrTypedArray;F.exports=function(l,e,a,g,k,p){var n=[],c=m.traceIs(l,"contour"),f=m.traceIs(l,"histogram"),d=m.traceIs(l,"gl2d");if(h(e)&&1<e.length&&!f&&"category"!==p.type)if(g=e.length,g<=k){if(c||d)n=e.slice(0,k);else if(1===k)n=[e[0]-.5,e[0]+.5];else{n=[1.5*e[0]-.5*e[1]];for(c=1;c<g;c++)n.push(.5*(e[c-1]+e[c]));n.push(1.5*e[g-1]-.5*e[g-2])}if(g<k)for(d=n[n.length-1],e=d-n[n.length-2],c=g;c<k;c++)d+=e,n.push(d)}else return c?e.slice(0,k):e.slice(0,
k+1);else for(l=l[p._id.charAt(0)+"calendar"],e=f?p.r2c(a,0,l):h(e)&&1===e.length?e[0]:void 0===a?0:("log"===p.type?p.d2c:p.r2c)(a,0,l),g=g||1,c=c||d?0:-.5;c<k;c++)n.push(e+g*c);return n}},{"../../lib":749,"../../registry":880}],1045:[function(b,F,C){function m(c,f){var d=f.length-2,q=k.constrain(k.findBin(c,f),0,d),r=f[q];c=k.constrain(q+(c-r)/(f[q+1]-r)-.5,0,d);f=Math.round(c);q=Math.abs(c-f);return c&&c!==d&&q?{bin0:f,frac:q,bin1:Math.round(f+q/(c-f))}:{bin0:f,bin1:f,frac:0}}function h(c,f){var d=
f.length-1;d=k.constrain(k.findBin(c,f),0,d);var q=f[d];c=(c-q)/(f[d+1]-q)||0;return 0>=c?{bin0:d,bin1:d,frac:0}:.5>c?{bin0:d,bin1:d+1,frac:c}:{bin0:d+1,bin1:d,frac:1-c}}function l(c,f,d){c[f]=d[0];c[f+1]=d[1];c[f+2]=d[2];c[f+3]=Math.round(255*d[3])}var e=b("d3"),a=b("tinycolor2"),g=b("../../registry"),k=b("../../lib"),p=b("../../components/colorscale").makeColorScaleFuncFromTrace,n=b("../../constants/xmlns_namespaces");F.exports=function(c,f,d,q){var r=f.xaxis,u=f.yaxis;k.makeTraceGroups(q,d,"hm").each(function(v){function w(sa,
ya){return void 0!==sa?(sa=ia(sa),sa[0]=Math.round(sa[0]),sa[1]=Math.round(sa[1]),sa[2]=Math.round(sa[2]),ha+=ya,na+=sa[0]*ya,pa+=sa[1]*ya,ra+=sa[2]*ya,sa):[0,0,0,0]}function y(sa,ya,qa,xa){var Ca=sa[qa.bin0];if(void 0===Ca)return w(void 0,1);sa=sa[qa.bin1];var Ja=ya[qa.bin0];ya=ya[qa.bin1];return w(Ca+qa.frac*(sa-Ca||0)+xa.frac*((Ja-Ca||0)+qa.frac*(void 0===sa?void 0===ya?0:void 0===Ja?2*(ya-Ca):2*(2*ya-Ja-Ca)/3:void 0===ya?void 0===Ja?0:2*(2*Ca-sa-Ja)/3:void 0===Ja?2*(2*ya-sa-Ca)/3:ya+Ca-sa-Ja)))}
var D=e.select(this),x=v[0],E=x.trace,B=x.z,t=x.x,G=x.y,I=x.xCenter,L=x.yCenter,M=g.traceIs(E,"contour"),N=M?"best":E.zsmooth,H=B.length,J=k.maxRowLength(B),O=!1,Q=!1,U;for(U=0;void 0===P&&U<t.length-1;){var P=r.c2p(t[U]);U++}for(U=t.length-1;void 0===V&&0<U;){var V=r.c2p(t[U]);U--}V<P&&(U=V,V=P,P=U,O=!0);for(U=0;void 0===Y&&U<G.length-1;){var Y=u.c2p(G[U]);U++}for(U=G.length-1;void 0===ba&&0<U;){var ba=u.c2p(G[U]);U--}ba<Y&&(U=Y,Y=ba,ba=U,Q=!0);M&&(I=t,L=G,t=x.xfill,G=x.yfill);"fast"!==N&&(U="best"===
N?0:.5,P=Math.max(-U*r._length,P),V=Math.min((1+U)*r._length,V),Y=Math.max(-U*u._length,Y),ba=Math.min((1+U)*u._length,ba));var ea=Math.round(V-P),ca=Math.round(ba-Y);if(0>=ea||0>=ca)D.selectAll("image").data([]).exit().remove();else{"fast"===N?(ba=J,U=H):(ba=ea,U=ca);V=document.createElement("canvas");V.width=ba;V.height=U;ba=V.getContext("2d");var ia=p(E,{noNumericCheck:!0,returnArray:!0});"fast"===N?(x=O?function(sa){return J-1-sa}:k.identity,M=Q?function(sa){return H-1-sa}:k.identity):(x=function(sa){return k.constrain(Math.round(r.c2p(t[sa])-
P),0,ea)},M=function(sa){return k.constrain(Math.round(u.c2p(G[sa])-Y),0,ca)});U=M(0);var fa=[U,U];O=O?0:1;Q=Q?0:1;var ha=0,na=0,pa=0,ra=0;if(N){E=0;try{var ta=new Uint8Array(ea*ca*4)}catch(sa){ta=Array(ea*ca*4)}if("best"===N){N=I||t;O=L||G;Q=Array(N.length);x=Array(O.length);M=Array(ea);I=I?h:m;fa=L?h:m;for(U=0;U<N.length;U++)Q[U]=Math.round(r.c2p(N[U])-P);for(U=0;U<O.length;U++)x[U]=Math.round(u.c2p(O[U])-Y);for(U=0;U<ea;U++)M[U]=I(U,Q);for(L=0;L<ca;L++)for(N=fa(L,x),O=B[N.bin0],Q=B[N.bin1],U=0;U<
ea;U++,E+=4)I=y(O,Q,M[U],N),l(ta,E,I)}else for(L=0;L<H;L++)for(N=B[L],fa=M(L),U=0;U<ea;U++)I=w(N[U],1),E=4*(fa*ea+x(U)),l(ta,E,I);B=ba.createImageData(ea,ca);try{B.data.set(ta)}catch(sa){for(U=B.data,I=U.length,L=0;L<I;L++)U[L]=ta[L]}ba.putImageData(B,0,0)}else{ta=E.xgap;E=E.ygap;var oa=Math.floor(ta/2),ua=Math.floor(E/2);for(L=0;L<H;L++)if(N=B[L],fa.reverse(),fa[Q]=M(L+1),fa[0]!==fa[1]&&void 0!==fa[0]&&void 0!==fa[1]){U=x(0);var ka=[U,U];for(U=0;U<J;U++)ka.reverse(),ka[O]=x(U+1),ka[0]!==ka[1]&&void 0!==
ka[0]&&void 0!==ka[1]&&(I=N[U],I=w(I,(ka[1]-ka[0])*(fa[1]-fa[0])),ba.fillStyle="rgba("+I.join(",")+")",ba.fillRect(ka[0]+oa,fa[0]+ua,ka[1]-ka[0]-ta,fa[1]-fa[0]-E))}}na=Math.round(na/ha);pa=Math.round(pa/ha);ra=Math.round(ra/ha);B=a("rgb("+na+","+pa+","+ra+")");c._hmpixcount=(c._hmpixcount||0)+ha;c._hmlumcount=(c._hmlumcount||0)+ha*B.getLuminance();v=D.selectAll("image").data(v);v.enter().append("svg:image").attr({xmlns:n.svg,preserveAspectRatio:"none"});v.attr({height:ca,width:ea,x:P,y:Y,"xlink:href":V.toDataURL("image/png")})}})}},
{"../../components/colorscale":627,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../registry":880,d3:169,tinycolor2:548}],1046:[function(b,F,C){var m=b("d3");F.exports=function(h){m.select(h).selectAll(".hm image").style("opacity",function(l){return l.trace.opacity})}},{d3:169}],1047:[function(b,F,C){F.exports=function(m,h,l){!1===l("zsmooth")&&(l("xgap"),l("ygap"));l("zhoverformat")}},{}],1048:[function(b,F,C){function m(a,g){var k=g(a);"scaled"===(k?g(a+"type","array"):"scaled")&&(g(a+
"0"),g("d"+a));return k}var h=b("fast-isnumeric"),l=b("../../lib"),e=b("../../registry");F.exports=function(a,g,k,p,n,c){var f=k("z");n=n||"x";c=c||"y";if(void 0===f||!f.length)return 0;if(l.isArray1D(a.z)){var d=k(n);k=k(c);d=l.minRowLength(d);k=l.minRowLength(k);if(0===d||0===k)return 0;g._length=Math.min(d,k,f.length)}else{m(n,k);m(c,k);d=!0;for(var q=!1,r=!1,u,v=0;v<f.length;v++){u=f[v];if(!l.isArrayOrTypedArray(u)){d=!1;break}0<u.length&&(q=!0);for(var w=0;w<u.length;w++)if(h(u[w])){r=!0;break}}if(!(d&&
q&&r))return 0;k("transpose");g._length=null}if("heatmapgl"===a.type||"contourgl"===a.type)return!0;e.getComponentMethod("calendars","handleTraceDefaults")(a,g,[n,c],p);return!0}},{"../../lib":749,"../../registry":880,"fast-isnumeric":241}],1049:[function(b,F,C){C=b("../heatmap/attributes");var m=b("../../components/colorscale/attributes"),h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;for(var l="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),e={},a=0;a<
l.length;a++){var g=l[a];e[g]=C[g]}e.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};h(e,m("",{cLetter:"z",autoColorDflt:!1}));F.exports=b(e,"calc","nested")},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../heatmap/attributes":1034}],1050:[function(b,F,C){function m(a,g){this.scene=a;this.uid=g;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=
[];this.bounds=[0,0,0,0];this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=h(a.glplot,this.options);this.heatmap._trace=this}var h=b("gl-heatmap2d"),l=b("../../plots/cartesian/axes"),e=b("../../lib/str2rgbarray");b=m.prototype;b.handlePick=function(a){var g=this.options,k=g.shape,p=a.pointId,n=p%k[0];k=Math.floor(p/k[0]);return{trace:this,dataCoord:a.dataCoord,traceCoord:[g.x[n],g.y[k],g.z[p]],textLabel:this.textLabels[p],name:this.name,pointIndex:[k,
n],hoverinfo:this.hoverinfo}};b.update=function(a,g){g=g[0];this.index=a.index;this.name=a.name;this.hoverinfo=a.hoverinfo;var k=g.z;this.options.z=[].concat.apply([],k);this.options.shape=[k[0].length,k.length];this.options.x=g.x;this.options.y=g.y;this.options.zsmooth=a.zsmooth;k=a.colorscale;for(var p=a.zmin,n=a.zmax,c=k.length,f=Array(c),d=Array(4*c),q=0;q<c;q++){var r=k[q],u=e(r[1]);f[q]=p+r[0]*(n-p);for(r=0;4>r;r++)d[4*q+r]=u[r]}this.options.colorLevels=f;this.options.colorValues=d;this.textLabels=
[].concat.apply([],a.text);this.heatmap.update(this.options);k=this.scene.xaxis;p=this.scene.yaxis;if(!1===a.zsmooth){var v={ppad:g.x[1]-g.x[0]};var w={ppad:g.y[1]-g.y[0]}}a._extremes[k._id]=l.findExtremes(k,g.x,v);a._extremes[p._id]=l.findExtremes(p,g.y,w)};b.dispose=function(){this.heatmap.dispose()};F.exports=function(a,g,k){a=new m(a,g.uid);a.update(g,k);return a}},{"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"gl-heatmap2d":268}],1051:[function(b,F,C){var m=b("../../lib"),h=
b("../heatmap/xyz_defaults"),l=b("../../components/colorscale/defaults"),e=b("./attributes");F.exports=function(a,g,k,p){function n(c,f){return m.coerce(a,g,e,c,f)}h(a,g,n,p)?(n("text"),n("zsmooth"),l(a,g,p,n,{prefix:"",cLetter:"z"})):g.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"../heatmap/xyz_defaults":1048,"./attributes":1049}],1052:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../heatmap/calc"),
plot:b("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":837,"../heatmap/calc":1035,"../heatmap/colorbar":1037,"./attributes":1049,"./convert":1050,"./defaults":1051}],1053:[function(b,F,C){C=b("../bar/attributes");var m=b("../../plots/template_attributes").hovertemplateAttrs,h=b("./bin_attributes"),l=b("./constants");b=b("../../lib/extend").extendFlat;F.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},
y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b({},C.text,{}),hovertext:b({},C.hovertext,{}),orientation:C.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",
editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:h("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:h("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:m({},{keys:l.eventDataKeys}),marker:C.marker,offsetgroup:C.offsetgroup,
alignmentgroup:C.alignmentgroup,selected:C.selected,unselected:C.unselected,_deprecated:{bardir:C._deprecated.bardir}}},{"../../lib/extend":739,"../../plots/template_attributes":875,"../bar/attributes":890,"./bin_attributes":1055,"./constants":1059}],1054:[function(b,F,C){F.exports=function(m,h){for(var l=m.length,e=0,a=0;a<l;a++)h[a]?(m[a]/=h[a],e+=m[a]):m[a]=null;return e}},{}],1055:[function(b,F,C){F.exports=function(m,h){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},
size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1056:[function(b,F,C){var m=b("fast-isnumeric");F.exports={count:function(h,l,e){e[h]++;return 1},sum:function(h,l,e,a){l=a[l];return m(l)?(l=Number(l),e[h]+=l,l):0},avg:function(h,l,e,a,g){l=a[l];m(l)&&(l=Number(l),e[h]+=l,g[h]++);return 0},min:function(h,l,e,a){l=a[l];if(m(l)){l=Number(l);if(!m(e[h]))return e[h]=l;if(e[h]>l)return a=l-e[h],e[h]=l,a}return 0},max:function(h,l,e,a){l=a[l];if(m(l)){l=Number(l);if(!m(e[h]))return e[h]=l;if(e[h]<
l)return a=l-e[h],e[h]=l,a}return 0}}},{"fast-isnumeric":241}],1057:[function(b,F,C){function m(f,d,q,r){if(0>=f*d)return Infinity;for(var u="date"===q.type,v=h(Math.abs(d-f),u),w=0;10>w;w++){var y=h(80*v,u);if(v===y)break;var D=y;var x=f,E=d,B=q,t=r;u&&D>g?(x=l(x,B,t),E=l(E,B,t),D=D===e?0:1,D=x[D]!==E[D]):D=.1<Math.floor(E/D)-Math.floor(x/D);if(D)v=y;else break}return v}function h(f,d){return d&&f>n?f>g?f>1.1*e?e:f>1.1*a?a:g:f>k?k:f>p?p:n:Math.pow(10,Math.floor(Math.log(f)/Math.LN10))}function l(f,
d,q){f=d.c2d(f,e,q).split("-");""===f[0]&&(f.unshift(),f[0]="-"+f[0]);return f}C=b("../../constants/numerical");var e=C.ONEAVGYEAR,a=C.ONEAVGMONTH,g=C.ONEDAY,k=C.ONEHOUR,p=C.ONEMIN,n=C.ONESEC,c=b("../../plots/cartesian/axes").tickIncrement;F.exports=function(f,d,q,r,u){var v=-1.1*d,w=-.1*d,y=f-w;d=q[0];q=q[1];y=Math.min(m(d+w,d+y,r,u),m(q+w,q+y,r,u));v=Math.min(m(d+v,d+w,r,u),m(q+v,q+w,r,u));if(y>v&&v<Math.abs(q-d)/4E3){var D=y;var x=!1}else D=Math.min(y,v),x=!0;if("date"===r.type&&D>g){var E=D===
e?1:6,B=D===e?"M12":"M1";return function(t,G){var I=r.c2d(t,e,u),L=I.indexOf("-",E);0<L&&(I=I.substr(0,L));I=r.d2c(I,0,u);I<t&&(L=c(I,B,!1,u),(I+L)/2<t+f&&(I=L));return G&&x?c(I,B,!0,u):I}}return function(t,G){var I=D*Math.round(t/D);I+D/10<t&&I+.9*D<t+f&&(I+=D);G&&x&&(I-=D);return I}}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797}],1058:[function(b,F,C){function m(q,r,u,v,w){function y(U,P,V){P[U+"Found"]?(P[U]=t(P[U]),null===P[U]&&(P[U]=V[U])):(Q[U]=P[U]=V[U],a.nestedProperty(G[0],
D+"."+U).set(V[U]))}var D=v+"bins",x=q._fullLayout,E=x._histogramBinOpts[r["_"+v+"bingroup"]];x="overlay"===x.barmode;var B,t="date"===u.type?function(U){return U||0===U?a.cleanDate(U,null,O):null}:function(U){return e(U)?Number(U):null};if(r["_"+v+"autoBinFinished"])delete r["_"+v+"autoBinFinished"];else{var G=E.traces;var I=[],L=!0,M=!1,N=!1;for(B=0;B<G.length;B++){var H=G[B];if(H.visible){var J=E.dirs[B];J=H["_"+J+"pos0"]=u.makeCalcdata(H,J);I=a.concat(I,J);delete H["_"+v+"autoBinFinished"];!0===
r.visible&&(L?L=!1:(delete H._autoBin,H["_"+v+"autoBinFinished"]=1),g.traceIs(H,"2dMap")&&(M=!0),"histogram2dcontour"===H.type&&(N=!0))}}var O=G[0][v+"calendar"];B=k.autoBin(I,u,E.nbins,M,O,E.sizeFound&&E.size);var Q=(G[0]._autoBin={})[E.dirs[0]]={};N&&(E.size||(B.start=u.c2r(k.tickIncrement(u.r2c(B.start,0,O),B.size,!0,O),0,O)),void 0===E.end&&(B.end=u.c2r(k.tickIncrement(u.r2c(B.end,0,O),B.size,!1,O),0,O)));if(x&&!g.traceIs(r,"2dMap")&&0===B._dataSpan&&"category"!==u.type&&"multicategory"!==u.type){if(w)return[B,
J,!0];B=h(q,r,u,v,D)}J=H.cumulative||{};J.enabled&&"include"!==J.currentbin&&("decreasing"===J.direction?B.start=u.c2r(k.tickIncrement(u.r2c(B.start,0,O),B.size,!0,O),0,O):B.end=u.c2r(k.tickIncrement(u.r2c(B.end,0,O),B.size,!1,O),0,O));E.size=B.size;E.sizeFound||(Q.size=B.size,a.nestedProperty(G[0],D+".size").set(B.size));y("start",E,B);y("end",E,B)}J=r["_"+v+"pos0"];delete r["_"+v+"pos0"];w=r._input[D]||{};q=a.extendFlat({},E);N=E.start;x=u.r2l(w.start);H=void 0!==x;(E.startFound||H)&&x!==u.r2l(N)&&
(x=H?x:a.aggNums(Math.min,null,J),N={type:"category"===u.type||"multicategory"===u.type?"linear":u.type,r2l:u.r2l,dtick:E.size,tick0:N,calendar:O,range:[x,k.tickIncrement(x,E.size,!1,O)].map(u.l2r)},N=k.tickFirst(N),N>u.r2l(x)&&(N=k.tickIncrement(N,E.size,!0,O)),q.start=u.l2r(N),H||a.nestedProperty(r,D+".start").set(q.start));H=E.end;x=u.r2l(w.end);w=void 0!==x;(E.endFound||w)&&x!==u.r2l(H)&&(E=w?x:a.aggNums(Math.max,null,J),q.end=u.l2r(E),w||a.nestedProperty(r,D+".start").set(q.end));u="autobin"+
v;!1===r._input[u]&&(r._input[D]=a.extendFlat({},r[D]||{}),delete r._input[u],delete r[u]);return[q,J]}function h(q,r,u,v,w){for(var y=q._fullLayout,D=r.xaxis,x=r.yaxis,E=r.orientation,B=[],t=q._fullData,G=0;G<t.length;G++){var I=t[G];"histogram"===I.type&&!0===I.visible&&I.orientation===E&&I.xaxis===D&&I.yaxis===x&&B.push(I)}G=!1;D=Infinity;x=[r];for(E=0;E<B.length;E++)if(t=B[E],t===r)G=!0;else if(G){I=m(q,t,u,v,!0);var L=I[0],M=I[2];t["_"+v+"autoBinFinished"]=1;t["_"+v+"pos0"]=I[1];M?x.push(t):
D=Math.min(D,L.size)}else I=y._histogramBinOpts[t["_"+v+"bingroup"]],D=Math.min(D,I.size||t[w].size);q=Array(x.length);for(E=0;E<x.length;E++)for(B=x[E]["_"+v+"pos0"],t=0;t<B.length;t++)if(void 0!==B[t]){q[E]=B[t];break}isFinite(D)||(D=a.distinctVals(q).minDiff);for(E=0;E<x.length;E++)t=x[E],B=t[v+"calendar"],B={start:u.c2r(q[E]-D/2,0,B),end:u.c2r(q[E]+D/2,0,B),size:D},t._input[w]=t[w]=B,(I=y._histogramBinOpts[t["_"+v+"bingroup"]])&&a.extendFlat(I,B);return r[w]}function l(q,r,u){function v(x){D=
q[x];q[x]/=2}function w(x){y=q[x];q[x]=D+y/2;D+=y}var y,D;if("half"===u)if("increasing"===r)for(v(0),r=1;r<q.length;r++)w(r);else for(v(q.length-1),r=q.length-2;0<=r;r--)w(r);else if("increasing"===r){for(r=1;r<q.length;r++)q[r]+=q[r-1];"exclude"===u&&(q.unshift(0),q.pop())}else{for(r=q.length-2;0<=r;r--)q[r]+=q[r+1];"exclude"===u&&(q.push(0),q.shift())}}var e=b("fast-isnumeric"),a=b("../../lib"),g=b("../../registry"),k=b("../../plots/cartesian/axes"),p=b("../bar/arrays_to_calcdata"),n=b("./bin_functions"),
c=b("./norm_functions"),f=b("./average"),d=b("./bin_label_vals");F.exports={calc:function(q,r){var u=[],v=[],w=k.getFromId(q,"h"===r.orientation?r.yaxis:r.xaxis),y="h"===r.orientation?"y":"x",D={x:"y",y:"x"}[y],x=r[y+"calendar"],E=r.cumulative,B=m(q,r,w,y),t=B[0];B=B[1];var G="string"===typeof t.size,I=[],L=G?I:t,M=[],N=[],H=[],J=0,O=r.histnorm,Q=r.histfunc,U=-1!==O.indexOf("density"),P;E.enabled&&U&&(O=O.replace(/ ?density$/,""),U=!1);var V="max"===Q||"min"===Q?null:0,Y=n.count;O=c[O];var ba=!1;
if(a.isArrayOrTypedArray(r[D])&&"count"!==Q){var ea=r[D];ba="avg"===Q;Y=n[Q]}D=w.r2c(t.start,0,x);for(P=w.r2c(t.end,0,x)+(D-k.tickIncrement(D,t.size,!1,x))/1E6;D<P&&1E6>u.length;){Q=k.tickIncrement(D,t.size,!1,x);u.push((D+Q)/2);v.push(V);H.push([]);I.push(D);U&&M.push(1/(Q-D));ba&&N.push(0);if(Q<=D)break;D=Q}I.push(D);G||"date"!==w.type||(L={start:w.r2c(L.start,0,x),end:w.r2c(L.end,0,x),size:L.size});q._fullLayout._roundFnOpts||(q._fullLayout._roundFnOpts={});var ca=r["_"+y+"bingroup"];V={leftGap:Infinity,
rightGap:Infinity};ca&&(q._fullLayout._roundFnOpts[ca]||(q._fullLayout._roundFnOpts[ca]=V),V=q._fullLayout._roundFnOpts[ca]);Q=v.length;y=!0;P=V.leftGap;var ia=V.rightGap;G={};for(D=0;D<B.length;D++){var fa=B[D];U=a.findBin(fa,L);0<=U&&U<Q&&(J+=Y(U,D,v,ea,N),y&&H[U].length&&fa!==B[H[U][0]]&&(y=!1),H[U].push(D),G[D]=U,P=Math.min(P,fa-I[U]),ia=Math.min(ia,I[U+1]-fa))}V.leftGap=P;V.rightGap=ia;var ha;y||(ha=function(na,pa){return function(){var ra=q._fullLayout._roundFnOpts[ca];return d(ra.leftGap,ra.rightGap,
I,w,x)(na,pa)}});ba&&(J=f(v,N));O&&O(v,J,M);E.enabled&&l(v,E.direction,E.currentbin);M=Math.min(u.length,v.length);ea=[];N=0;L=M-1;for(D=0;D<M;D++)if(v[D]){N=D;break}for(D=M-1;D>=N;D--)if(v[D]){L=D;break}for(D=N;D<=L;D++)e(u[D])&&e(v[D])&&(M={p:u[D],s:v[D],b:0},E.enabled||(M.pts=H[D],y?M.ph0=M.ph1=H[D].length?B[H[D][0]]:u[D]:(r._computePh=!0,M.ph0=ha(I[D]),M.ph1=ha(I[D+1],!0))),ea.push(M));1===ea.length&&(ea[0].width1=k.tickIncrement(ea[0].p,t.size,!1,x)-ea[0].p);p(ea,r);a.isArrayOrTypedArray(r.selectedpoints)&&
a.tagSelected(ea,r,G);return ea},calcAllAutoBins:m}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"../bar/arrays_to_calcdata":889,"./average":1054,"./bin_functions":1056,"./bin_label_vals":1057,"./norm_functions":1065,"fast-isnumeric":241}],1059:[function(b,F,C){F.exports={eventDataKeys:["binNumber"]}},{}],1060:[function(b,F,C){var m=b("../../lib"),h=b("../../plots/cartesian/axis_ids"),l=b("../../registry").traceIs,e=b("../bar/defaults").handleGroupingDefaults,a=m.nestedProperty,
g=h.getAxisGroup,k=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],p=["x","y"];F.exports=function(n,c){function f(I,L){return m.coerce(D._input,D,D._module.attributes,I,L)}function d(I){return"v"===I.orientation?"x":"y"}function q(I,L,M){var N=I.uid+"__"+M;L||(L=N);var H=h.getFromTrace({_fullLayout:c},I,M).type;var J=I[M+"calendar"]||"",O=r[L],Q=!0;
O&&(H===O.axType&&J===O.calendar?(Q=!1,O.traces.push(I),O.dirs.push(M)):(L=N,H!==O.axType&&m.warn(["Attempted to group the bins of trace",I.index,"set on a","type:"+H,"axis with bins on","type:"+O.axType,"axis."].join(" ")),J!==O.calendar&&m.warn(["Attempted to group the bins of trace",I.index,"set with a",J,"calendar with bins",O.calendar?"on a "+O.calendar+" calendar":"w/o a set calendar"].join(" "))));Q&&(r[L]={traces:[I],dirs:[M],axType:H,calendar:I[M+"calendar"]||""});I["_"+M+"bingroup"]=L}var r=
c._histogramBinOpts={},u=[],v={},w=[],y;for(y=0;y<n.length;y++){var D=n[y];l(D,"histogram")&&(u.push(D),delete D._xautoBinFinished,delete D._yautoBinFinished,l(D,"2dMap")||e(D._input,D,c,f))}n=c._alignmentOpts||{};for(y=0;y<u.length;y++){D=u[y];var x="";if(!l(D,"2dMap")){var E=d(D);if("group"===c.barmode&&D.alignmentgroup){var B=g(c,D[E+"axis"])+D.orientation;(n[B]||{})[D.alignmentgroup]&&(x=B)}x||"overlay"===c.barmode||(x=g(c,D.xaxis)+g(c,D.yaxis)+d(D))}x?(v[x]||(v[x]=[]),v[x].push(D)):w.push(D)}for(x in v)if(u=
v[x],1===u.length)w.push(u[0]);else{n=!1;for(y=0;y<u.length;){D=u[y];n=f("bingroup");break}x=n||x;for(y=0;y<u.length;y++)D=u[y],(n=D._input.bingroup)&&n!==x&&m.warn(["Trace",D.index,"must match within bingroup",x+".","Ignoring its bingroup:",n,"setting."].join(" ")),D.bingroup=x,q(D,x,d(D))}for(y=0;y<w.length;y++)if(D=w[y],v=f("bingroup"),l(D,"2dMap"))for(u=0;2>u;u++)E=p[u],n=f(E+"bingroup",v?v+"__"+E:null),q(D,n,E);else q(D,v,d(D));for(x in r)for(v=r[x],u=v.traces,w=0;w<k.length;w++)if(n=k[w],B=
n.name,"nbins"!==B||!v.sizeFound){for(y=0;y<u.length;y++){D=u[y];E=v.dirs[y];var t=n.aStr[E];if(void 0!==a(D._input,t).get()){v[B]=f(t);v[B+"Found"]=!0;break}var G=(D._autoBin||{})[E]||{};G[B]&&a(D,t).set(G[B])}if("start"===B||"end"===B)for(;y<u.length;y++)D=u[y],D["_"+E+"bingroup"]&&(G=(D._autoBin||{})[E]||{},f(t,G[B]));"nbins"!==B||v.sizeFound||v.nbinsFound||(D=u[0],v[B]=f(t))}}},{"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../registry":880,"../bar/defaults":894}],1061:[function(b,
F,C){var m=b("../../registry"),h=b("../../lib"),l=b("../../components/color"),e=b("../bar/style_defaults"),a=b("./attributes");F.exports=function(g,k,p,n){function c(u,v){return h.coerce(g,k,a,u,v)}var f=c("x"),d=c("y");c("cumulative.enabled")&&(c("cumulative.direction"),c("cumulative.currentbin"));c("text");c("hovertext");c("hovertemplate");var q=c("orientation",d&&!f?"h":"v"),r="v"===q?"x":"y";q="v"===q?"y":"x";(f=f&&d?Math.min(h.minRowLength(f)&&h.minRowLength(d)):h.minRowLength(k[r]||[]))?(k._length=
f,m.getComponentMethod("calendars","handleTraceDefaults")(g,k,["x","y"],n),k[q]&&c("histfunc"),c("histnorm"),c("autobin"+r),e(g,k,c,p,n),h.coerceSelectionMarkerOpacity(k,c),p=(k.marker.line||{}).color,n=m.getComponentMethod("errorbars","supplyDefaults"),n(g,k,p||l.defaultLine,{axis:"y"}),n(g,k,p||l.defaultLine,{axis:"x",inherit:"y"})):k.visible=!1}},{"../../components/color":615,"../../lib":749,"../../registry":880,"../bar/style_defaults":905,"./attributes":1053}],1062:[function(b,F,C){F.exports=
function(m,h,l,e,a){m.x="xVal"in h?h.xVal:h.x;m.y="yVal"in h?h.yVal:h.y;"zLabelVal"in h&&(m.z=h.zLabelVal);h.xa&&(m.xaxis=h.xa);h.ya&&(m.yaxis=h.ya);if(!(l.cumulative||{}).enabled){h=Array.isArray(a)?e[0].pts[a[0]][a[1]]:e[a].pts;m.pointNumbers=h;m.binNumber=m.pointNumber;delete m.pointNumber;delete m.pointIndex;if(l._indexToPoints)for(e=[],a=0;a<h.length;a++)e=e.concat(l._indexToPoints[h[a]]);else e=h;m.pointIndices=e}return m}},{}],1063:[function(b,F,C){var m=b("../bar/hover").hoverPoints,h=b("../../plots/cartesian/axes").hoverLabelText;
F.exports=function(l,e,a,g){if(e=m(l,e,a,g))return l=e[0],a=l.cd[l.index],g=l.cd[0].trace,g.cumulative.enabled||(g="h"===g.orientation?"y":"x",l[g+"Label"]=h(l[g+"a"],a.ph0,a.ph1)),e}},{"../../plots/cartesian/axes":797,"../bar/hover":897}],1064:[function(b,F,C){F.exports={attributes:b("./attributes"),layoutAttributes:b("../bar/layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),supplyLayoutDefaults:b("../bar/layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("../bar/cross_trace_calc").crossTraceCalc,
plot:b("../bar/plot").plot,layerName:"barlayer",style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,colorbar:b("../scatter/marker_colorbar"),hoverPoints:b("./hover"),selectPoints:b("../bar/select"),eventData:b("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar histogram oriented errorBarsOK showLegend".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/cross_trace_calc":893,"../bar/layout_attributes":899,
"../bar/layout_defaults":900,"../bar/plot":901,"../bar/select":902,"../bar/style":904,"../scatter/marker_colorbar":1173,"./attributes":1053,"./calc":1058,"./cross_trace_defaults":1060,"./defaults":1061,"./event_data":1062,"./hover":1063}],1065:[function(b,F,C){F.exports={percent:function(m,h){var l=m.length;h=100/h;for(var e=0;e<l;e++)m[e]*=h},probability:function(m,h){for(var l=m.length,e=0;e<l;e++)m[e]/=h},density:function(m,h,l,e){h=m.length;e=e||1;for(var a=0;a<h;a++)m[a]=m[a]*l[a]*e},"probability density":function(m,
h,l,e){var a=m.length;e&&(h/=e);for(e=0;e<a;e++)m[e]*=l[e]/h}}},{}],1066:[function(b,F,C){C=b("../histogram/attributes");var m=b("../histogram/bin_attributes"),h=b("../heatmap/attributes"),l=b("../../plots/attributes"),e=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;F.exports=b({x:C.x,y:C.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:C.histnorm,
histfunc:C.histfunc,nbinsx:C.nbinsx,xbins:m("x"),nbinsy:C.nbinsy,ybins:m("y"),autobinx:C.autobinx,autobiny:C.autobiny,bingroup:b({},C.bingroup,{}),xbingroup:b({},C.bingroup,{}),ybingroup:b({},C.bingroup,{}),xgap:h.xgap,ygap:h.ygap,zsmooth:h.zsmooth,zhoverformat:h.zhoverformat,hovertemplate:e({},{keys:"z"}),showlegend:b({},l.showlegend,{dflt:!1})},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,
"../heatmap/attributes":1034,"../histogram/attributes":1053,"../histogram/bin_attributes":1055}],1067:[function(b,F,C){function m(f,d,q,r){var u=Array(f);if(r)for(q=0;q<f;q++)u[q]=1/(d[q+1]-d[q]);else for(d=1/q,q=0;q<f;q++)u[q]=d;return u}function h(f,d){return{start:f(d.start),end:f(d.end),size:d.size}}function l(f,d,q,r,u,v){var w=f.length-1,y=Array(w);r=n(q,r,f,u,v);for(q=0;q<w;q++)u=(d||[])[q],y[q]=void 0===u?[r(f[q]),r(f[q+1],!0)]:[u,u];return y}var e=b("../../lib"),a=b("../../plots/cartesian/axes"),
g=b("../histogram/bin_functions"),k=b("../histogram/norm_functions"),p=b("../histogram/average"),n=b("../histogram/bin_label_vals"),c=b("../histogram/calc").calcAllAutoBins;F.exports=function(f,d){var q=a.getFromId(f,d.xaxis),r=a.getFromId(f,d.yaxis),u=d.xcalendar,v=d.ycalendar,w=function(ya){return q.r2c(ya,0,u)},y=function(ya){return r.r2c(ya,0,v)},D=c(f,d,q,"x");var x=D[0];D=D[1];f=c(f,d,r,"y");var E=f[0];f=f[1];var B=d._length;D.length>B&&D.splice(B,D.length-B);f.length>B&&f.splice(B,f.length-
B);var t=[],G=[],I=[],L="string"===typeof x.size,M="string"===typeof E.size,N=[],H=[],J=L?N:x,O=M?H:E,Q=0,U=[],P=[],V=d.histnorm,Y=d.histfunc,ba=-1!==V.indexOf("density"),ea="max"===Y||"min"===Y?null:0,ca=g.count;V=k[V];var ia=!1,fa=[],ha=[];(d="z"in d?d.z:"marker"in d&&Array.isArray(d.marker.color)?d.marker.color:"")&&"count"!==Y&&(ia="avg"===Y,ca=g[Y]);Y=x.size;var na=w(x.start),pa=w(x.end)+(na-a.tickIncrement(na,Y,!1,u))/1E6;for(x=na;x<pa;x=a.tickIncrement(x,Y,!1,u))G.push(ea),N.push(x),ia&&I.push(0);
N.push(x);ea=G.length;Y=(x-na)/ea;na=q.c2r(na+Y/2,0,u);var ra=E.size;pa=y(E.start);var ta=y(E.end)+(pa-a.tickIncrement(pa,ra,!1,v))/1E6;for(x=pa;x<ta;x=a.tickIncrement(x,ra,!1,v)){t.push(G.slice());H.push(x);var oa=Array(ea);for(E=0;E<ea;E++)oa[E]=[];P.push(oa);ia&&U.push(I.slice())}H.push(x);I=t.length;E=(x-pa)/I;pa=r.c2r(pa+E/2,0,v);ba&&(fa=m(G.length,J,Y,L),ha=m(t.length,O,E,M));L||"date"!==q.type||(J=h(w,J));M||"date"!==r.type||(O=h(y,O));L=G=!0;M=Array(ea);ba=Array(I);var ua=oa=ta=ra=Infinity;
for(x=0;x<B;x++){var ka=D[x],sa=f[x];w=e.findBin(ka,J);y=e.findBin(sa,O);0<=w&&w<ea&&0<=y&&y<I&&(Q+=ca(w,x,t[y],d,U[y]),P[y][w].push(x),G&&(void 0===M[w]?M[w]=ka:M[w]!==ka&&(G=!1)),L&&(void 0===ba[y]?ba[y]=sa:ba[y]!==sa&&(L=!1)),ra=Math.min(ra,ka-N[w]),ta=Math.min(ta,N[w+1]-ka),oa=Math.min(oa,sa-H[y]),ua=Math.min(ua,H[y+1]-sa))}if(ia)for(y=0;y<I;y++)Q+=p(t[y],U[y]);if(V)for(y=0;y<I;y++)V(t[y],Q,fa,ha[y]);return{x:D,xRanges:l(N,G&&M,ra,ta,q,u),x0:na,dx:Y,y:f,yRanges:l(H,L&&ba,oa,ua,r,v),y0:pa,dy:E,
z:t,pts:P}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../histogram/average":1054,"../histogram/bin_functions":1056,"../histogram/bin_label_vals":1057,"../histogram/calc":1058,"../histogram/norm_functions":1065}],1068:[function(b,F,C){var m=b("../../lib"),h=b("./sample_defaults"),l=b("../heatmap/style_defaults"),e=b("../../components/colorscale/defaults"),a=b("./attributes");F.exports=function(g,k,p,n){function c(f,d){return m.coerce(g,k,a,f,d)}h(g,k,c,n);!1!==k.visible&&(l(g,k,c,n),e(g,
k,n,c,{prefix:"",cLetter:"z"}),c("hovertemplate"))}},{"../../components/colorscale/defaults":625,"../../lib":749,"../heatmap/style_defaults":1047,"./attributes":1066,"./sample_defaults":1071}],1069:[function(b,F,C){var m=b("../heatmap/hover"),h=b("../../plots/cartesian/axes").hoverLabelText;F.exports=function(l,e,a,g,k,p){if(e=m(l,e,a,g,k,p))return l=e[0],g=l.index,k=l.cd[0],a=k.xRanges[g[1]],g=k.yRanges[g[0]],l.xLabel=h(l.xa,a[0],a[1]),l.yLabel=h(l.ya,g[0],g[1]),e}},{"../../plots/cartesian/axes":797,
"../heatmap/hover":1041}],1070:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../heatmap/calc"),plot:b("../heatmap/plot"),layerName:"heatmaplayer",colorbar:b("../heatmap/colorbar"),style:b("../heatmap/style"),hoverPoints:b("./hover"),eventData:b("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram",
"showLegend"],meta:{}}},{"../../plots/cartesian":810,"../heatmap/calc":1035,"../heatmap/colorbar":1037,"../heatmap/plot":1045,"../heatmap/style":1046,"../histogram/cross_trace_defaults":1060,"../histogram/event_data":1062,"./attributes":1066,"./defaults":1068,"./hover":1069}],1071:[function(b,F,C){var m=b("../../registry"),h=b("../../lib");F.exports=function(l,e,a,g){var k=a("x"),p=a("y");k=h.minRowLength(k);p=h.minRowLength(p);k&&p?(e._length=Math.min(k,p),m.getComponentMethod("calendars","handleTraceDefaults")(l,
e,["x","y"],g),(a("z")||a("marker.color"))&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")):e.visible=!1}},{"../../lib":749,"../../registry":880}],1072:[function(b,F,C){C=b("../histogram2d/attributes");var m=b("../contour/attributes"),h=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;F.exports=b({x:C.x,y:C.y,z:C.z,marker:C.marker,histnorm:C.histnorm,histfunc:C.histfunc,nbinsx:C.nbinsx,xbins:C.xbins,nbinsy:C.nbinsy,ybins:C.ybins,autobinx:C.autobinx,autobiny:C.autobiny,
bingroup:C.bingroup,xbingroup:C.xbingroup,ybingroup:C.ybingroup,autocontour:m.autocontour,ncontours:m.ncontours,contours:m.contours,line:{color:m.line.color,width:b({},m.line.width,{dflt:.5}),dash:m.line.dash,smoothing:m.line.smoothing,editType:"plot"},zhoverformat:C.zhoverformat,hovertemplate:C.hovertemplate},h("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../contour/attributes":977,"../histogram2d/attributes":1066}],1073:[function(b,
F,C){var m=b("../../lib"),h=b("../histogram2d/sample_defaults"),l=b("../contour/contours_defaults"),e=b("../contour/style_defaults"),a=b("./attributes");F.exports=function(g,k,p,n){function c(f,d){return m.coerce(g,k,a,f,d)}h(g,k,c,n);!1!==k.visible&&(l(g,k,c,function(f){return m.coerce2(g,k,a,f)}),e(g,k,c,n),c("hovertemplate"))}},{"../../lib":749,"../contour/contours_defaults":984,"../contour/style_defaults":998,"../histogram2d/sample_defaults":1071,"./attributes":1072}],1074:[function(b,F,C){F.exports=
{attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../contour/calc"),plot:b("../contour/plot").plot,layerName:"contourlayer",style:b("../contour/style"),colorbar:b("../contour/colorbar"),hoverPoints:b("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg 2dMap contour histogram showLegend".split(" "),meta:{}}},{"../../plots/cartesian":810,"../contour/calc":978,
"../contour/colorbar":980,"../contour/hover":990,"../contour/plot":995,"../contour/style":997,"../histogram/cross_trace_defaults":1060,"./attributes":1072,"./defaults":1073}],1075:[function(b,F,C){C=b("../../plots/attributes");var m=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../lib/extend").extendFlat;b=b("./constants").colormodel;for(var l=["rgb","rgba","rgba256","hsl","hsla"],e=[],a=[],g=0;g<l.length;g++){var k=b[l[g]];e.push("For the `"+l[g]+"` colormodel, it is ["+(k.zminDflt||
k.min).join(", ")+"].");a.push("For the `"+l[g]+"` colormodel, it is ["+(k.zmaxDflt||k.max).join(", ")+"].")}F.exports=h({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:l,editType:"calc"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",
editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:h({},C.hoverinfo,{flags:"x y z color name text".split(" "),
dflt:"x+y+z+text+name"}),hovertemplate:m({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"./constants":1077}],1076:[function(b,F,C){function m(d,q,r,u){return function(v){return e.constrain((v-d)*q,r,u)}}function h(d,q){return function(r){return e.constrain(r,d,q)}}function l(d){var q=a.colormodel[d.colormodel],r=(q.colormodel||d.colormodel).length;d._sArray=[];for(var u=0;u<r;u++)q.min[u]!==d.zmin[u]||
q.max[u]!==d.zmax[u]?d._sArray.push(m(d.zmin[u],(q.max[u]-q.min[u])/(d.zmax[u]-d.zmin[u]),q.min[u],q.max[u])):d._sArray.push(h(q.min[u],q.max[u]));return function(v){v=v.slice(0,r);for(var w=0;w<r;w++){var y=v[w];if(!g(y))return!1;v[w]=d._sArray[w](y)}return v}}var e=b("../../lib"),a=b("./constants"),g=b("fast-isnumeric"),k=b("../../plots/cartesian/axes"),p=b("../../lib").maxRowLength,n=b("image-size"),c=b("../../snapshot/helpers").IMAGE_URL_PREFIX,f=b("buffer/").Buffer;F.exports=function(d,q){if(q._hasZ){var r=
q.z.length;var u=p(q.z)}else q._hasSource&&(r=q.source.replace(c,""),r=new f(r,"base64"),u=n(r),r=u.height,u=u.width);var v=k.getFromId(d,q.xaxis||"x");d=k.getFromId(d,q.yaxis||"y");var w=v.d2c(q.x0)-q.dx/2,y=d.d2c(q.y0)-q.dy/2,D,x=[w,w+u*q.dx],E=[y,y+r*q.dy];if(v&&"log"===v.type)for(D=0;D<u;D++)x.push(w+D*q.dx);if(d&&"log"===d.type)for(D=0;D<r;D++)E.push(y+D*q.dy);q._extremes[v._id]=k.findExtremes(v,x);q._extremes[d._id]=k.findExtremes(d,E);q._scaler=l(q);return[{x0:w,y0:y,z:q.z,w:u,h:r}]}},{"../../lib":749,
"../../plots/cartesian/axes":797,"../../snapshot/helpers":884,"./constants":1077,"buffer/":111,"fast-isnumeric":241,"image-size":418}],1077:[function(b,F,C){F.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(m){return m.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,
4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(m){m=m.slice(0,3);m[1]+="%";m[2]+="%";return m},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(m){m=m.slice(0,4);m[1]+="%";m[2]+="%";return m},suffix:["","%","%",""]}}}},{}],1078:[function(b,F,C){var m=b("../../lib"),h=b("./attributes"),l=b("./constants"),e=b("../../snapshot/helpers").IMAGE_URL_PREFIX;F.exports=function(a,g){function k(n,c){return m.coerce(a,g,h,n,c)}k("source");g.source&&!g.source.match(e)&&
delete g.source;g._hasSource=!!g.source;var p=k("z");g._hasZ=!(void 0===p||!p.length||!p[0]||!p[0].length);g._hasZ||g._hasSource?(k("x0"),k("y0"),k("dx"),k("dy"),g._hasZ?(k("colormodel","rgb"),p=l.colormodel[g.colormodel],k("zmin",p.zminDflt||p.min),k("zmax",p.zmaxDflt||p.max)):g._hasSource&&(g.colormodel="rgba256",p=l.colormodel[g.colormodel],g.zmin=p.zminDflt,g.zmax=p.zmaxDflt),k("text"),k("hovertext"),k("hovertemplate"),g._length=null):g.visible=!1}},{"../../lib":749,"../../snapshot/helpers":884,
"./attributes":1075,"./constants":1077}],1079:[function(b,F,C){F.exports=function(m,h){"xVal"in h&&(m.x=h.xVal);"yVal"in h&&(m.y=h.yVal);h.xa&&(m.xaxis=h.xa);h.ya&&(m.yaxis=h.ya);m.color=h.color;m.colormodel=h.trace.colormodel;m.z||(m.z=h.color);return m}},{}],1080:[function(b,F,C){var m=b("../../components/fx"),h=b("../../lib"),l=b("./constants");F.exports=function(e,a,g){var k=e.cd[0],p=k.trace,n=e.xa,c=e.ya;if(!(0<m.inbox(a-k.x0,a-(k.x0+k.w*p.dx),0)||0<m.inbox(g-k.y0,g-(k.y0+k.h*p.dy),0))){a=Math.floor((a-
k.x0)/p.dx);g=Math.floor(Math.abs(g-k.y0)/p.dy);if(p._hasZ)var f=k.z[g][a];else p._hasSource&&(f=p._canvas.el.getContext("2d").getImageData(a,g,1,1).data);if(f){var d=k.hi||p.hoverinfo,q;d&&(d=d.split("+"),-1!==d.indexOf("all")&&(d=["color"]),-1!==d.indexOf("color")&&(q=!0));var r=l.colormodel[p.colormodel],u=r.colormodel||p.colormodel,v=u.length;d=p._scaler(f);r=r.suffix;var w=[];if(p.hovertemplate||q)w.push("["+[d[0]+r[0],d[1]+r[1],d[2]+r[2]].join(", ")),4===v&&w.push(", "+d[3]+r[3]),w.push("]"),
w=w.join(""),e.extraText=u.toUpperCase()+": "+w;var y;Array.isArray(p.hovertext)&&Array.isArray(p.hovertext[g])?y=p.hovertext[g][a]:Array.isArray(p.text)&&Array.isArray(p.text[g])&&(y=p.text[g][a]);c=c.c2p(k.y0+(g+.5)*p.dy);q=k.x0+(a+.5)*p.dx;u=k.y0+(g+.5)*p.dy;f="["+f.slice(0,p.colormodel.length).join(", ")+"]";return[h.extendFlat(e,{index:[g,a],x0:n.c2p(k.x0+a*p.dx),x1:n.c2p(k.x0+(a+1)*p.dx),y0:c,y1:c,color:d,xVal:q,xLabelVal:q,yVal:u,yLabelVal:u,zLabelVal:f,text:y,hovertemplateLabels:{zLabel:f,
colorLabel:w,"color[0]Label":d[0]+r[0],"color[1]Label":d[1]+r[1],"color[2]Label":d[2]+r[2],"color[3]Label":d[3]+r[3]}})]}}}},{"../../components/fx":655,"../../lib":749,"./constants":1077}],1081:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover"),eventData:b("./event_data"),moduleType:"trace",name:"image",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],
animatable:!1,meta:{}}},{"../../plots/cartesian":810,"./attributes":1075,"./calc":1076,"./defaults":1078,"./event_data":1079,"./hover":1080,"./plot":1082,"./style":1083}],1082:[function(b,F,C){function m(k){return"linear"===k.type&&k.range[1]>k.range[0]===("x"===k._id.charAt(0))}var h=b("d3"),l=b("../../lib"),e=b("../../constants/xmlns_namespaces"),a=b("./constants"),g=l.isIOS()||l.isSafari()||l.isIE();F.exports=function(k,p,n,c){var f=p.xaxis,d=p.yaxis,q=!(g||k._context._exportedPlot);l.makeTraceGroups(c,
n,"im").each(function(r){function u(Y){var ba=document.createElement("canvas");ba.width=U;ba.height=P;var ea=ba.getContext("2d"),ca=function(ka){return l.constrain(Math.round(f.c2p(E+ka*I)-N),0,U)},ia=function(ka){return l.constrain(Math.round(d.c2p(B+ka*L)-J),0,P)},fa=a.colormodel[y.colormodel],ha=fa.colormodel||y.colormodel;fa=fa.fmt;for(M=0;M<w.w;M++){var na=ca(M),pa=ca(M+1);if(pa!==na&&!isNaN(pa)&&!isNaN(na))for(var ra=0;ra<w.h;ra++){var ta=ia(ra),oa=ia(ra+1);if(oa!==ta&&!isNaN(oa)&&!isNaN(ta)&&
Y(M,ra)){var ua=y._scaler(Y(M,ra));ea.fillStyle=ua?ha+"("+fa(ua).join(",")+")":"rgba(0,0,0,0)";ea.fillRect(na,ta,pa-na,oa-ta)}}}return ba}var v=h.select(this),w=r[0],y=w.trace,D=q&&!y._hasZ&&y._hasSource&&m(f)&&m(d);y._fastImage=D;var x=w.z,E=w.x0,B=w.y0,t=w.w,G=w.h,I=y.dx,L=y.dy,M;for(M=0;void 0===N&&M<t;){var N=f.c2p(E+M*I);M++}for(M=t;void 0===H&&0<M;){var H=f.c2p(E+M*I);M--}for(M=0;void 0===J&&M<G;){var J=d.c2p(B+M*L);M++}for(M=G;void 0===O&&0<M;){var O=d.c2p(B+M*L);M--}if(H<N){var Q=H;H=N;N=
Q}O<J&&(Q=J,J=O,O=Q);D||(N=Math.max(-.5*f._length,N),H=Math.min(1.5*f._length,H),J=Math.max(-.5*d._length,J),O=Math.min(1.5*d._length,O));var U=Math.round(H-N),P=Math.round(O-J);if(0>=U||0>=P)v.selectAll("image").data([]).exit().remove();else{var V=v.selectAll("image").data([r]);V.enter().append("svg:image").attr({xmlns:e.svg,preserveAspectRatio:"none"});V.exit().remove();V.attr("style","image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated;");
r=(new Promise(function(Y){if(y._hasZ)Y();else if(y._hasSource)if(y._canvas&&y._canvas.el.width===t&&y._canvas.el.height===G&&y._canvas.source===y.source)Y();else{var ba=document.createElement("canvas");ba.width=t;ba.height=G;var ea=ba.getContext("2d");y._image=y._image||new Image;var ca=y._image;ca.onload=function(){ea.drawImage(ca,0,0);y._canvas={el:ba,source:y.source};Y()};ca.setAttribute("src",y.source)}})).then(function(){if(y._hasZ){var Y=u(function(ea,ca){return x[ca][ea]});Y=Y.toDataURL("image/png")}else if(y._hasSource)if(D)Y=
y.source;else{var ba=y._canvas.el.getContext("2d").getImageData(0,0,t,G).data;Y=u(function(ea,ca){ea=4*(ca*t+ea);return[ba[ea],ba[ea+1],ba[ea+2],ba[ea+3]]});Y=Y.toDataURL("image/png")}V.attr({"xlink:href":Y,height:P,width:U,x:N,y:J})});k._promises.push(r)}})}},{"../../constants/xmlns_namespaces":725,"../../lib":749,"./constants":1077,d3:169}],1083:[function(b,F,C){var m=b("d3");F.exports=function(h){m.select(h).selectAll(".im image").style("opacity",function(l){return l[0].trace.opacity})}},{d3:169}],
1084:[function(b,F,C){C=b("../../lib/extend").extendFlat;var m=b("../../lib/extend").extendDeep,h=b("../../plot_api/edit_types").overrideAll,l=b("../../plots/font_attributes"),e=b("../../components/color/attributes"),a=b("../../plots/domain").attributes,g=b("../../plots/cartesian/layout_attributes"),k=b("../../plot_api/plot_template").templatedArray,p=b("../../constants/delta.js");b("../../constants/docs");b=l({editType:"plot",colorEditType:"plot"});var n={color:{valType:"color",editType:"plot"},
line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"};k=k("step",m({},n,{range:c}));F.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",
anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:C({},b,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot"},font:C({},b,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",
editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot"},increasing:{symbol:{valType:"string",dflt:p.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:p.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:p.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:p.DECREASING.COLOR,
editType:"plot"},editType:"plot"},font:C({},b,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:m({},n,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:h({range:c,visible:C({},g.visible,{dflt:!0}),tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,
ticks:C({},g.ticks,{dflt:"outside"}),ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:l({}),tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,separatethousands:g.separatethousands,exponentformat:g.exponentformat,showexponent:g.showexponent,editType:"plot"},"plot"),steps:k,threshold:{line:{color:C({},n.line.color,
{}),width:C({},n.line.width,{dflt:1}),editType:"plot"},thickness:C({},n.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":614,"../../constants/delta.js":718,"../../constants/docs":719,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/cartesian/layout_attributes":811,"../../plots/domain":824,"../../plots/font_attributes":825}],1085:[function(b,F,C){var m=
b("../../plots/plots");C.name="indicator";C.plot=function(h,l,e,a){m.plotBasePlot(C.name,h,l,e,a)};C.clean=function(h,l,e,a){m.cleanBasePlot(C.name,h,l,e,a)}},{"../../plots/plots":860}],1086:[function(b,F,C){F.exports={calc:function(m,h){m=[];var l=h.value;"number"!==typeof h._lastValue&&(h._lastValue=h.value);var e=h._lastValue,a=e;h._hasDelta&&"number"===typeof h.delta.reference&&(a=h.delta.reference);m[0]={y:l,lastY:e,delta:l-a,relativeDelta:(l-a)/a};return m}}},{}],1087:[function(b,F,C){F.exports=
{defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1088:[function(b,F,C){function m(f,d){function q(r,u){return h.coerce(f,d,l.gauge.steps,r,u)}q("color");q("line.color");q("line.width");q("range");q("thickness")}var h=b("../../lib"),l=b("./attributes"),e=b("../../plots/domain").defaults,a=b("../../plot_api/plot_template"),g=b("../../plots/array_container_defaults"),k=b("./constants.js"),p=b("../../plots/cartesian/tick_value_defaults"),
n=b("../../plots/cartesian/tick_mark_defaults"),c=b("../../plots/cartesian/tick_label_defaults");F.exports={supplyDefaults:function(f,d,q,r){function u(G,I){return h.coerce(f,d,l,G,I)}function v(G,I){return h.coerce(x,E,l.gauge,G,I)}function w(G,I){return h.coerce(B,t,l.gauge.axis,G,I)}e(d,r,u);u("mode");d._hasNumber=-1!==d.mode.indexOf("number");d._hasDelta=-1!==d.mode.indexOf("delta");d._hasGauge=-1!==d.mode.indexOf("gauge");q=u("value");d._range=[0,"number"===typeof q?1.5*q:1];q=Array(2);if(d._hasNumber){u("number.valueformat");
u("number.font.color",r.font.color);u("number.font.family",r.font.family);u("number.font.size");void 0===d.number.font.size&&(d.number.font.size=k.defaultNumberFontSize,q[0]=!0);u("number.prefix");u("number.suffix");var y=d.number.font.size}if(d._hasDelta){u("delta.font.color",r.font.color);u("delta.font.family",r.font.family);u("delta.font.size");void 0===d.delta.font.size&&(d.delta.font.size=(d._hasNumber?.5:1)*(y||k.defaultNumberFontSize),q[1]=!0);u("delta.reference",d.value);u("delta.relative");
u("delta.valueformat",d.delta.relative?"2%":"");u("delta.increasing.symbol");u("delta.increasing.color");u("delta.decreasing.symbol");u("delta.decreasing.color");u("delta.position");var D=d.delta.font.size}d._scaleNumbers=(!d._hasNumber||q[0])&&(!d._hasDelta||q[1])||!1;u("title.font.color",r.font.color);u("title.font.family",r.font.family);u("title.font.size",.25*(y||D||k.defaultNumberFontSize));u("title.text");var x;if(d._hasGauge){(x=f.gauge)||(x={});var E=a.newContainer(d,"gauge");v("shape");(d._isBullet=
"bullet"===d.gauge.shape)||u("title.align","center");(d._isAngular="angular"===d.gauge.shape)||u("align","center");v("bgcolor",r.paper_bgcolor);v("borderwidth");v("bordercolor");v("bar.color");v("bar.line.color");v("bar.line.width");v("bar.thickness",k.valueThickness*("bullet"===d.gauge.shape?.5:1));g(x,E,{name:"steps",handleItemDefaults:m});v("threshold.value");v("threshold.thickness");v("threshold.line.width");v("threshold.line.color");var B={};x&&(B=x.axis||{});var t=a.newContainer(E,"axis");w("visible");
d._range=w("range",d._range);r={outerTicks:!0};p(B,t,w,"linear");c(B,t,w,"linear",r);n(B,t,w,r)}else u("title.align","center"),u("align","center"),d._isAngular=d._isBullet=!1;d._length=null}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_mark_defaults":819,"../../plots/cartesian/tick_value_defaults":820,"../../plots/domain":824,"./attributes":1084,"./constants.js":1087}],1089:[function(b,
F,C){F.exports={moduleType:"trace",name:"indicator",basePlotModule:b("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc").calc,plot:b("./plot"),meta:{}}},{"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./plot":1090}],1090:[function(b,F,C){function m(L,M,N,H){function J(na){na.attr("width",function(pa){return Math.max(0,fa.c2p(pa.range[1])-fa.c2p(pa.range[0]))}).attr("x",
function(pa){return fa.c2p(pa.range[0])}).attr("y",function(pa){return.5*(1-pa.thickness)*ca}).attr("height",function(pa){return pa.thickness*ca})}var O=N[0].trace;M=H.gauge;var Q=H.layer,U=H.gaugeBg,P=H.gaugeOutline,V=H.size,Y=O.domain,ba=H.transitionOpts,ea=H.onComplete;M.enter().append("g").classed("bullet",!0);M.attr("transform","translate("+V.l+", "+V.t+")");Q.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0);Q.selectAll("g.xbulletaxistick,path,text").remove();var ca=V.h;H=O.gauge.bar.thickness*
ca;var ia=Y.x[0];Y=Y.x[0]+(Y.x[1]-Y.x[0])*(O._hasNumber||O._hasDelta?1-v.bulletNumberDomainSize:1);var fa=g(L,O.gauge.axis);fa._id="xbulletaxis";fa.domain=[ia,Y];fa.setScale();Y=y.calcTicks(fa);ia=y.makeTransFn(fa);var ha=y.getTickSigns(fa)[2];V=V.t+V.h;fa.visible&&(y.drawTicks(L,fa,{vals:"inside"===fa.ticks?y.clipEnds(fa,Y):Y,layer:Q,path:y.makeTickPath(fa,V,ha),transFn:ia}),y.drawLabels(L,fa,{vals:Y,layer:Q,transFn:ia,labelFns:y.makeLabelFns(fa,V)}));L=[U].concat(O.gauge.steps);L=M.selectAll("g.bg-bullet").data(L);
L.enter().append("g").classed("bg-bullet",!0).append("rect");L.select("rect").call(J).call(e);L.exit().remove();L=M.selectAll("g.value-bullet").data([O.gauge.bar]);L.enter().append("g").classed("value-bullet",!0).append("rect");L.select("rect").attr("height",H).attr("y",(ca-H)/2).call(e);ba&&0<ba.duration?L.select("rect").transition().duration(ba.duration).ease(ba.easing).each("end",function(){ea&&ea()}).each("interrupt",function(){ea&&ea()}).attr("width",Math.max(0,fa.c2p(Math.min(O.gauge.axis.range[1],
N[0].y)))):L.select("rect").attr("width","number"===typeof N[0].y?Math.max(0,fa.c2p(Math.min(O.gauge.axis.range[1],N[0].y))):0);L.exit().remove();N=N.filter(function(){return O.gauge.threshold.value});N=M.selectAll("g.threshold-bullet").data(N);N.enter().append("g").classed("threshold-bullet",!0).append("line");N.select("line").attr("x1",fa.c2p(O.gauge.threshold.value)).attr("x2",fa.c2p(O.gauge.threshold.value)).attr("y1",(1-O.gauge.threshold.thickness)/2*ca).attr("y2",(1-(1-O.gauge.threshold.thickness)/
2)*ca).call(B.stroke,O.gauge.threshold.line.color).style("stroke-width",O.gauge.threshold.line.width);N.exit().remove();M=M.selectAll("g.gauge-outline").data([P]);M.enter().append("g").classed("gauge-outline",!0).append("rect");M.select("rect").call(J).call(e);M.exit().remove()}function h(L,M,N,H){function J(ya){var qa=U.gauge.axis.range[0];ya=(ya-qa)/(U.gauge.axis.range[1]-qa)*Math.PI-ha;return ya<-ha?-ha:ya>ha?ha:ya}function O(ya){return f.svg.arc().innerRadius((Y+V)/2-ya/2*(V-Y)).outerRadius((Y+
V)/2+ya/2*(V-Y)).startAngle(-ha)}function Q(ya){ya.attr("d",function(qa){return O(qa.thickness).startAngle(J(qa.range[0])).endAngle(J(qa.range[1]))()})}var U=N[0].trace,P=H.size,V=H.radius,Y=H.innerRadius,ba=H.gaugeBg;M=H.gaugeOutline;var ea=[P.l+P.w/2,P.t+P.h/2+V/2];P=H.gauge;var ca=H.layer,ia=H.transitionOpts,fa=H.onComplete,ha=Math.PI/2;P.enter().append("g").classed("angular",!0);P.attr("transform",k(ea[0],ea[1]));ca.enter().append("g").classed("angularaxis",!0).classed("crisp",!0);ca.selectAll("g.xangularaxistick,path,text").remove();
var na=g(L,U.gauge.axis);na.type="linear";na.range=U.gauge.axis.range;na._id="xangularaxis";na.setScale();var pa=function(ya){return(na.range[0]-ya.x)/(na.range[1]-na.range[0])*Math.PI+Math.PI},ra={},ta=y.makeLabelFns(na,0).labelStandoff;ra.xFn=function(ya){ya=pa(ya);return Math.cos(ya)*ta};ra.yFn=function(ya){var qa=pa(ya);return-Math.sin(qa)*(ta+ya.fontSize*(0<Math.sin(qa)?.2:1))+Math.abs(Math.cos(qa))*ya.fontSize*r};ra.anchorFn=function(ya){ya=pa(ya);ya=Math.cos(ya);return.1>Math.abs(ya)?"middle":
0<ya?"start":"end"};ra.heightFn=function(ya,qa,xa){ya=pa(ya);return-.5*(1+Math.sin(ya))*xa};var oa=function(ya){return k(ea[0]+V*Math.cos(ya),ea[1]-V*Math.sin(ya))};var ua=function(ya){return oa(pa(ya))};var ka=function(ya){ya=pa(ya);return oa(ya)+"rotate("+-q(ya)+")"};H=y.calcTicks(na);var sa=y.getTickSigns(na)[2];na.visible&&(sa="inside"===na.ticks?-1:1,y.drawTicks(L,na,{vals:H,layer:ca,path:"M"+(na.linewidth||1)/2*sa+",0h"+sa*na.ticklen,transFn:ka}),y.drawLabels(L,na,{vals:H,layer:ca,transFn:ua,
labelFns:ra}));L=[ba].concat(U.gauge.steps);L=P.selectAll("g.bg-arc").data(L);L.enter().append("g").classed("bg-arc",!0).append("path");L.select("path").call(Q).call(e);L.exit().remove();L=O(U.gauge.bar.thickness);ba=P.selectAll("g.value-arc").data([U.gauge.bar]);ba.enter().append("g").classed("value-arc",!0).append("path");ca=ba.select("path");ia&&0<ia.duration?(ca.transition().duration(ia.duration).ease(ia.easing).each("end",function(){fa&&fa()}).each("interrupt",function(){fa&&fa()}).attrTween("d",
a(L,J(N[0].lastY),J(N[0].y))),U._lastValue=N[0].y):ca.attr("d","number"===typeof N[0].y?L.endAngle(J(N[0].y)):"M0,0Z");ca.call(e);ba.exit().remove();L=[];(N=U.gauge.threshold.value)&&L.push({range:[N,N],color:U.gauge.threshold.color,line:{color:U.gauge.threshold.line.color,width:U.gauge.threshold.line.width},thickness:U.gauge.threshold.thickness});N=P.selectAll("g.threshold-arc").data(L);N.enter().append("g").classed("threshold-arc",!0).append("path");N.select("path").call(Q).call(e);N.exit().remove();
M=P.selectAll("g.gauge-outline").data([M]);M.enter().append("g").classed("gauge-outline",!0).append("path");M.select("path").call(Q).call(e);M.exit().remove()}function l(L,M,N,H){function J(sa,ya,qa,xa){if(!sa.match("s")||0<=qa===0<=xa||ya(qa).slice(-1).match(I)||ya(xa).slice(-1).match(I))return ya;sa=sa.slice().replace("s","f").replace(/\d+/,function(Ja){return parseInt(Ja)-1});var Ca=g(L,{tickformat:sa});return function(Ja){return 1>Math.abs(Ja)?y.tickText(Ca,Ja).text:ya(Ja)}}function O(){function sa(){var eb=
"number"===typeof N[0].y?Ca+qa(N[0].y)+xa:"-";Ja.text(eb).call(u.font,U.number.font).call(w.convertToTspans,L)}var ya=g(L,{tickformat:U.number.valueformat},U._range);ya.setScale();y.prepTicks(ya);var qa=function(eb){return y.tickText(ya,eb).text},xa=U.number.suffix,Ca=U.number.prefix,Ja=ia.select("text.number");ea&&0<ea.duration?Ja.transition().duration(ea.duration).ease(ea.easing).each("end",function(){sa();ca&&ca()}).each("interrupt",function(){sa();ca&&ca()}).attrTween("text",function(){var eb=
f.select(this),Ra=f.interpolateNumber(N[0].lastY,N[0].y);U._lastValue=N[0].y;var Wa=J(U.number.valueformat,qa,N[0].lastY,N[0].y);return function(Ea){eb.text(Ca+Wa(Ra(Ea))+xa)}}):sa();fa=n(Ca+qa(N[0].y)+xa,U.number.font,ba,L);return Ja}function Q(){function sa(){eb.text(Ca(xa(N[0]),qa)).call(B.fill,Ja(N[0])).call(w.convertToTspans,L)}var ya=g(L,{tickformat:U.delta.valueformat},U._range);ya.setScale();y.prepTicks(ya);var qa=function(Ra){return y.tickText(ya,Ra).text},xa=function(Ra){return U.delta.relative?
Ra.relativeDelta:Ra.delta},Ca=function(Ra,Wa){return 0===Ra||"number"!==typeof Ra||isNaN(Ra)?"-":(0<Ra?U.delta.increasing.symbol:U.delta.decreasing.symbol)+Wa(Ra)},Ja=function(Ra){return 0<=Ra.delta?U.delta.increasing.color:U.delta.decreasing.color};void 0===U._deltaLastValue&&(U._deltaLastValue=xa(N[0]));var eb=ia.select("text.delta");eb.call(u.font,U.delta.font).call(B.fill,Ja({delta:U._deltaLastValue}));ea&&0<ea.duration?eb.transition().duration(ea.duration).ease(ea.easing).tween("text",function(){var Ra=
f.select(this),Wa=xa(N[0]),Ea=U._deltaLastValue,Ia=J(U.delta.valueformat,qa,Ea,Wa),Qa=f.interpolateNumber(Ea,Wa);U._deltaLastValue=Wa;return function(lb){Ra.text(Ca(Qa(lb),Ia));Ra.call(B.fill,Ja({delta:Qa(lb)}))}}).each("end",function(){sa();ca&&ca()}).each("interrupt",function(){sa();ca&&ca()}):sa();ha=n(Ca(xa(N[0]),qa),U.delta.font,ba,L);return eb}var U=N[0].trace,P=H.numbersX,V=H.numbersY,Y=U.align||"center",ba=t[Y],ea=H.transitionOpts,ca=H.onComplete,ia=d.ensureSingle(M,"g","numbers"),fa,ha;M=
[];U._hasNumber&&M.push("number");U._hasDelta&&(M.push("delta"),"left"===U.delta.position&&M.reverse());M=ia.selectAll("text").data(M);M.enter().append("text");M.attr("text-anchor",function(){return ba}).attr("class",function(sa){return sa}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null);M.exit().remove();var na=U.mode+U.align;if(U._hasDelta){var pa=Q();na+=U.delta.position+U.delta.font.size+U.delta.font.family+U.delta.valueformat;na+=U.delta.increasing.symbol+U.delta.decreasing.symbol;
var ra=ha}U._hasNumber&&(O(),na+=U.number.font.size+U.number.font.family+U.number.valueformat+U.number.suffix+U.number.prefix,ra=fa);if(U._hasDelta&&U._hasNumber){M=[(fa.left+fa.right)/2,(fa.top+fa.bottom)/2];var ta=[(ha.left+ha.right)/2,(ha.top+ha.bottom)/2],oa=.75*U.delta.font.size;if("left"===U.delta.position){var ua=c(U,"deltaPos",0,-1*(fa.width*G[U.align]+ha.width*(1-G[U.align])+oa),na,Math.min);var ka=M[1]-ta[1];ra={width:fa.width+ha.width+oa,height:Math.max(fa.height,ha.height),left:ha.left+
ua,right:fa.right,top:Math.min(fa.top,ha.top+ka),bottom:Math.max(fa.bottom,ha.bottom+ka)}}"right"===U.delta.position&&(ua=c(U,"deltaPos",0,fa.width*(1-G[U.align])+ha.width*G[U.align]+oa,na,Math.max),ka=M[1]-ta[1],ra={width:fa.width+ha.width+oa,height:Math.max(fa.height,ha.height),left:fa.left,right:ha.right+ua,top:Math.min(fa.top,ha.top+ka),bottom:Math.max(fa.bottom,ha.bottom+ka)});"bottom"===U.delta.position&&(ua=null,ka=ha.height,ra={width:Math.max(fa.width,ha.width),height:fa.height+ha.height,
left:Math.min(fa.left,ha.left),right:Math.max(fa.right,ha.right),top:fa.bottom-fa.height,bottom:fa.bottom+ha.height});"top"===U.delta.position&&(ua=null,ka=fa.top,ra={width:Math.max(fa.width,ha.width),height:fa.height+ha.height,left:Math.min(fa.left,ha.left),right:Math.max(fa.right,ha.right),top:fa.bottom-fa.height-ha.height,bottom:fa.bottom});pa.attr({dx:ua,dy:ka})}(U._hasNumber||U._hasDelta)&&ia.attr("transform",function(){var sa=H.numbersScaler(ra);na+=sa[2];sa=c(U,"numbersScale",1,sa[0],na,Math.min);
U._scaleNumbers||(sa=1);var ya=U._isAngular?V-sa*ra.bottom:V-sa*(ra.top+ra.bottom)/2;U._numbersTop=sa*ra.top+ya;var qa=ra[Y];"center"===Y&&(qa=(ra.left+ra.right)/2);qa=P-sa*qa;qa=c(U,"numbersTranslate",0,qa,na,Math.max);return k(qa,ya)+" scale("+sa+")"})}function e(L){L.each(function(M){B.stroke(f.select(this),M.line.color)}).each(function(M){B.fill(f.select(this),M.color)}).style("stroke-width",function(M){return M.line.width})}function a(L,M,N){return function(){var H=f.interpolate(M,N);return function(J){return L.endAngle(H(J))()}}}
function g(L,M,N){function H(Q,U){return d.coerce(J,O,E,Q,U)}L=L._fullLayout;var J=d.extendFlat({type:"linear",ticks:"outside",range:N,showline:!0},M),O={type:"linear",_id:"x"+M._id};M={letter:"x",font:L.font,noHover:!0,noTickson:!0};D(J,O,H,M,L);x(J,O,H,M);return O}function k(L,M){return"translate("+L+","+M+")"}function p(L,M,N){return[Math.min(M/L.width,N/L.height),L,M+"x"+N]}function n(L,M,N,H){var J=document.createElementNS("http://www.w3.org/2000/svg","text");J=f.select(J);J.text(L).attr("x",
0).attr("y",0).attr("text-anchor",N).attr("data-unformatted",L).call(w.convertToTspans,H).call(u.font,M);return u.bBox(J.node())}function c(L,M,N,H,J,O){M="_cache"+M;L[M]&&L[M].key===J||(L[M]={key:J,value:N});N=d.aggNums(O,null,[L[M].value,H],2);return L[M].value=N}var f=b("d3"),d=b("../../lib"),q=d.rad2deg,r=b("../../constants/alignment").MID_SHIFT,u=b("../../components/drawing"),v=b("./constants"),w=b("../../lib/svg_text_utils"),y=b("../../plots/cartesian/axes"),D=b("../../plots/cartesian/axis_defaults"),
x=b("../../plots/cartesian/position_defaults"),E=b("../../plots/cartesian/layout_attributes"),B=b("../../components/color"),t={left:"start",center:"middle",right:"end"},G={left:0,center:.5,right:1},I=/[yzafpnmkMGTPEZY]/;F.exports=function(L,M,N,H){var J=L._fullLayout,O;N&&0<N.duration&&H&&(O=H());d.makeTraceGroups(J._indicatorlayer,M,"trace").each(function(Q){var U=Q[0].trace,P=f.select(this),V=U._hasGauge,Y=U._isAngular,ba=U._isBullet,ea=U.domain,ca={w:J._size.w*(ea.x[1]-ea.x[0]),h:J._size.h*(ea.y[1]-
ea.y[0]),l:J._size.l+J._size.w*ea.x[0],r:J._size.r+J._size.w*(1-ea.x[1]),t:J._size.t+J._size.h*(1-ea.y[1]),b:J._size.b+J._size.h*ea.y[0]},ia=ca.l+ca.w/2,fa=ca.t+ca.h/2,ha=Math.min(ca.w/2,ca.h),na=v.innerRadius*ha;ea=U.align||"center";var pa=fa;if(V){if(Y){var ra=ia;pa=fa+ha/2;var ta=function(qa){var xa=.9*na;return[xa/Math.sqrt(qa.width/2*(qa.width/2)+qa.height*qa.height),qa,xa]}}if(ba){var oa=v.bulletPadding;ra=1-v.bulletNumberDomainSize+oa;ra=ca.l+(ra+(1-ra)*G[ea])*ca.w;ta=function(qa){return p(qa,
(v.bulletNumberDomainSize-oa)*ca.w,ca.h)}}}else ra=ca.l+G[ea]*ca.w,ta=function(qa){return p(qa,ca.w,ca.h)};l(L,P,Q,{numbersX:ra,numbersY:pa,numbersScaler:ta,transitionOpts:N,onComplete:O});if(V){var ua={range:U.gauge.axis.range,color:U.gauge.bgcolor,line:{color:U.gauge.bordercolor,width:0},thickness:1};var ka={range:U.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:U.gauge.bordercolor,width:U.gauge.borderwidth},thickness:1}}ra=P.selectAll("g.angular").data(Y?Q:[]);ra.exit().remove();var sa=
P.selectAll("g.angularaxis").data(Y?Q:[]);sa.exit().remove();Y&&h(L,P,Q,{radius:ha,innerRadius:na,gauge:ra,layer:sa,size:ca,gaugeBg:ua,gaugeOutline:ka,transitionOpts:N,onComplete:O});ra=P.selectAll("g.bullet").data(ba?Q:[]);ra.exit().remove();ta=P.selectAll("g.bulletaxis").data(ba?Q:[]);ta.exit().remove();ba&&m(L,P,Q,{gauge:ra,layer:ta,size:ca,gaugeBg:ua,gaugeOutline:ka,transitionOpts:N,onComplete:O});var ya=P.selectAll("text.title").data(Q);ya.exit().remove();ya.enter().append("text").classed("title",
!0);ya.attr("text-anchor",function(){return ba?t.right:t[U.title.align]}).text(U.title.text).call(u.font,U.title.font).call(w.convertToTspans,L);ya.attr("transform",function(){var qa=ca.l+ca.w*G[U.title.align],xa,Ca=v.titlePadding,Ja=u.bBox(ya.node());V?(Y&&(xa=U.gauge.axis.visible?u.bBox(sa.node()).top-Ca-Ja.bottom:ca.t+ca.h/2-ha/2-Ja.bottom-Ca),ba&&(xa=pa-(Ja.top+Ja.bottom)/2,qa=ca.l-v.bulletPadding*ca.w)):xa=U._numbersTop-Ca-Ja.bottom;return k(qa,xa)})})}},{"../../components/color":615,"../../components/drawing":637,
"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_defaults":799,"../../plots/cartesian/layout_attributes":811,"../../plots/cartesian/position_defaults":814,"./constants":1087,d3:169}],1091:[function(b,F,C){function m(k){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function h(k){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",
min:0,max:1,dflt:1}}}C=b("../../components/colorscale/attributes");var l=b("../../plots/template_attributes").hovertemplateAttrs,e=b("../mesh3d/attributes"),a=b("../../plots/attributes"),g=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;F=F.exports=b(g({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",
dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:m("x"),y:m("y"),z:m("z")},caps:{x:h("x"),y:h("y"),z:h("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),showlegend:g({},a.showlegend,{dflt:!1})},C("",{colorAttr:"`value`",showScaleDflt:!0,
editTypeOverride:"calc"}),{opacity:e.opacity,lightposition:e.lightposition,lighting:e.lighting,flatshading:e.flatshading,contour:e.contour,hoverinfo:g({},a.hoverinfo)}),"calc","nested");F.flatshading.dflt=!0;F.lighting.facenormalsepsilon.dflt=0;F.x.editType=F.y.editType=F.z.editType=F.value.editType="calc+clearAxisTypes";F.transforms=void 0},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875,
"../mesh3d/attributes":1096}],1092:[function(b,F,C){var m=b("../../components/colorscale/calc"),h=b("../streamtube/calc").processGrid,l=b("../streamtube/calc").filter;F.exports=function(e,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length);a._x=l(a.x,a._len);a._y=l(a.y,a._len);a._z=l(a.z,a._len);a._value=l(a.value,a._len);var g=h(a);a._gridFill=g.fill;a._Xs=g.Xs;a._Ys=g.Ys;a._Zs=g.Zs;a._len=g.len;g=Infinity;for(var k=-Infinity,p=0;p<a._len;p++){var n=a._value[p];g=Math.min(g,n);k=
Math.max(k,n)}a._minValues=g;a._maxValues=k;a._vMin=void 0===a.isomin||null===a.isomin?g:a.isomin;a._vMax=void 0===a.isomax||null===a.isomin?k:a.isomax;m(e,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623,"../streamtube/calc":1262}],1093:[function(b,F,C){function m(c,f,d){this.scene=c;this.uid=d;this.mesh=f;this.name="";this.data=null;this.showContour=!1}function h(c){function f(){Ra=[];Wa=[];Ea=[];Ia=[];pa=na=0}function d(lb,hb,Fa,La){Ra.push(lb);
Wa.push(hb);Ea.push(Fa);Ia.push(La);na++;return na-1}function q(lb,hb,Fa){for(var La=[],Oa=0;Oa<lb.length;Oa++)La[Oa]=lb[Oa]*(1-Fa)+Fa*hb[Oa];return La}function r(lb,hb){return"all"===lb||null===lb?!0:-1<lb.indexOf(hb)}function u(lb,hb,Fa){pa=na;var La=[hb];var Oa=[Fa];if(1<=Qa)La=[hb],Oa=[Fa];else if(0<Qa){var fb=Fa;La=hb[0];Oa=hb[1];hb=hb[2];for(var bb=[],Pa=0;Pa<La.length;Pa++)bb[Pa]=(La[Pa]+Oa[Pa]+hb[Pa])/3;var Ta=Math.sqrt(1-Qa);Pa=q(bb,La,Ta);Fa=q(bb,Oa,Ta);var Ya=q(bb,hb,Ta);bb=fb[0];Ta=fb[1];
fb=fb[2];hb=[[La,Oa,Fa],[Fa,Pa,La],[Oa,hb,Ya],[Ya,Fa,Oa],[hb,La,Pa],[Pa,Ya,hb]];Oa=[[bb,Ta,-1],[-1,-1,bb],[Ta,fb,-1],[-1,-1,Ta],[fb,bb,-1],[-1,-1,fb]];La=hb}for(fb=0;fb<La.length;fb++){hb=La[fb];Fa=Oa[fb];Pa=[];for(bb=0;3>bb;bb++){var nb=hb[bb][0],Da=hb[bb][1];Ya=hb[bb][2];Ta=hb[bb][3];if(-1<Fa[bb])var Ha=Fa[bb];else a:{Ha=Ia.length;for(var ab=pa;ab<Ha;ab++)if(nb===Ra[ab]&&Da===Wa[ab]&&Ya===Ea[ab]){Ha=ab;break a}Ha=-1}-1<Ha?Pa[bb]=Ha:(Ha=Pa,ab=bb,Ta=null===lb?Ta:lb,Ha[ab]=d(nb,Da,Ya,Ta))}hb=Pa[1];
Fa=Pa[2];c._meshI.push(Pa[0]);c._meshJ.push(hb);c._meshK.push(Fa);ha++}}function v(lb,hb,Fa){var La=function(Oa,fb,bb){u(lb,[hb[Oa],hb[fb],hb[bb]],[Fa[Oa],Fa[fb],Fa[bb]])};La(0,1,2);La(2,3,0)}function w(lb,hb,Fa){var La=function(Oa,fb,bb){u(lb,[hb[Oa],hb[fb],hb[bb]],[Fa[Oa],Fa[fb],Fa[bb]])};La(0,1,2);La(3,0,1);La(2,3,0);La(1,2,3)}function y(lb,hb,Fa,La){var Oa=lb[3];Oa<Fa&&(Oa=Fa);Oa>La&&(Oa=La);Fa=(lb[3]-Oa)/(lb[3]-hb[3]+1E-9);La=[];for(Oa=0;4>Oa;Oa++)La[Oa]=(1-Fa)*lb[Oa]+Fa*hb[Oa];return La}function D(lb,
hb,Fa){return lb>=hb&&lb<=Fa}function x(lb){var hb=.001*(eb-Ja);return lb>=Ja-hb&&lb<=eb+hb}function E(lb){for(var hb=[],Fa=0;4>Fa;Fa++){var La=lb[Fa];hb.push([c._x[La],c._y[La],c._z[La],c._value[La]])}return hb}function B(lb,hb,Fa,La,Oa,fb){fb||(fb=1);Fa=[-1,-1,-1];var bb=!1,Pa=[D(hb[0][3],La,Oa),D(hb[1][3],La,Oa),D(hb[2][3],La,Oa)];if(!Pa[0]&&!Pa[1]&&!Pa[2])return!1;var Ta=function(nb,Da,Ha){return x(Da[0][3])&&x(Da[1][3])&&x(Da[2][3])?(u(nb,Da,Ha),!0):3>fb?B(nb,Da,Ha,Ja,eb,++fb):!1};if(Pa[0]&&
Pa[1]&&Pa[2])return Ta(lb,hb,Fa)||bb;var Ya=!1;[[0,1,2],[2,0,1],[1,2,0]].forEach(function(nb){if(Pa[nb[0]]&&Pa[nb[1]]&&!Pa[nb[2]]){var Da=hb[nb[0]],Ha=hb[nb[1]],ab=hb[nb[2]],ib=y(ab,Da,La,Oa);ab=y(ab,Ha,La,Oa);bb=Ta(lb,[ab,ib,Da],[-1,-1,Fa[nb[0]]])||bb;bb=Ta(lb,[Da,Ha,ab],[Fa[nb[0]],Fa[nb[1]],-1])||bb;Ya=!0}});if(Ya)return bb;[[0,1,2],[1,2,0],[2,0,1]].forEach(function(nb){if(Pa[nb[0]]&&!Pa[nb[1]]&&!Pa[nb[2]]){var Da=hb[nb[0]],Ha=hb[nb[2]],ab=y(hb[nb[1]],Da,La,Oa);Ha=y(Ha,Da,La,Oa);bb=Ta(lb,[Ha,ab,
Da],[-1,-1,Fa[nb[0]]])||bb;Ya=!0}});return bb}function t(lb,hb,Fa,La){var Oa=!1,fb=E(hb),bb=[D(fb[0][3],Fa,La),D(fb[1][3],Fa,La),D(fb[2][3],Fa,La),D(fb[3][3],Fa,La)];if(!(bb[0]||bb[1]||bb[2]||bb[3]))return Oa;if(bb[0]&&bb[1]&&bb[2]&&bb[3])return fa&&(Oa=w(lb,fb,hb)||Oa),Oa;var Pa=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ta){if(bb[Ta[0]]&&bb[Ta[1]]&&bb[Ta[2]]&&!bb[Ta[3]]){var Ya=fb[Ta[0]],nb=fb[Ta[1]],Da=fb[Ta[2]],Ha=fb[Ta[3]];fa?Oa=u(lb,[Ya,nb,Da],[hb[Ta[0]],hb[Ta[1]],hb[Ta[2]]])||
Oa:(Ta=y(Ha,Ya,Fa,La),nb=y(Ha,nb,Fa,La),Da=y(Ha,Da,Fa,La),Oa=u(null,[Ta,nb,Da],[-1,-1,-1])||Oa);Pa=!0}});if(Pa)return Oa;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ta){if(bb[Ta[0]]&&bb[Ta[1]]&&!bb[Ta[2]]&&!bb[Ta[3]]){var Ya=fb[Ta[0]],nb=fb[Ta[1]],Da=fb[Ta[2]],Ha=fb[Ta[3]],ab=y(Da,Ya,Fa,La);Da=y(Da,nb,Fa,La);var ib=y(Ha,nb,Fa,La);Ha=y(Ha,Ya,Fa,La);fa?(Oa=u(lb,[Ya,Ha,ab],[hb[Ta[0]],-1,-1])||Oa,Oa=u(lb,[nb,Da,ib],[hb[Ta[1]],-1,-1])||Oa):Oa=v(null,[ab,Da,ib,Ha],[-1,
-1,-1,-1])||Oa;Pa=!0}});if(Pa)return Oa;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ta){if(bb[Ta[0]]&&!bb[Ta[1]]&&!bb[Ta[2]]&&!bb[Ta[3]]){var Ya=fb[Ta[0]],nb=fb[Ta[2]],Da=fb[Ta[3]],Ha=y(fb[Ta[1]],Ya,Fa,La);nb=y(nb,Ya,Fa,La);Da=y(Da,Ya,Fa,La);fa?(Oa=u(lb,[Ya,Ha,nb],[hb[Ta[0]],-1,-1])||Oa,Oa=u(lb,[Ya,nb,Da],[hb[Ta[0]],-1,-1])||Oa,Oa=u(lb,[Ya,Da,Ha],[hb[Ta[0]],-1,-1])||Oa):Oa=u(null,[Ha,nb,Da],[-1,-1,-1])||Oa;Pa=!0}});return Oa}function G(lb,hb,Fa,La,Oa,fb,bb,Pa,Ta,Ya,nb){var Da=!1;ia&&
(r(lb,"A")&&(Da=t(null,[hb,Fa,La,fb],Ya,nb)||Da),r(lb,"B")&&(Da=t(null,[Fa,La,Oa,Ta],Ya,nb)||Da),r(lb,"C")&&(Da=t(null,[Fa,fb,bb,Ta],Ya,nb)||Da),r(lb,"D")&&(Da=t(null,[La,fb,Pa,Ta],Ya,nb)||Da),r(lb,"E")&&(Da=t(null,[Fa,La,fb,Ta],Ya,nb)||Da));fa&&(Da=t(lb,[Fa,La,fb,Ta],Ya,nb)||Da);return Da}function I(lb,hb,Fa,La,Oa,fb,bb,Pa){return[!0===Pa[0]?!0:B(lb,E([hb,Fa,La]),[hb,Fa,La],fb,bb),!0===Pa[1]?!0:B(lb,E([La,Oa,hb]),[La,Oa,hb],fb,bb)]}function L(lb,hb,Fa,La,Oa,fb,bb,Pa,Ta){return Pa?I(lb,hb,Fa,Oa,La,
fb,bb,Ta):I(lb,Fa,Oa,La,hb,fb,bb,Ta)}function M(lb,hb,Fa,La,Oa,fb,bb){var Pa=!1,Ta=function(){Pa=B(lb,[Da,Ha,ab],[-1,-1,-1],Oa,fb)||Pa;Pa=B(lb,[ab,ib,Da],[-1,-1,-1],Oa,fb)||Pa},Ya=bb[0],nb=bb[1];bb=bb[2];if(Ya){var Da=q(E([qa(hb,Fa-0,La-0)])[0],E([qa(hb-1,Fa-0,La-0)])[0],Ya);var Ha=q(E([qa(hb,Fa-0,La-1)])[0],E([qa(hb-1,Fa-0,La-1)])[0],Ya);var ab=q(E([qa(hb,Fa-1,La-1)])[0],E([qa(hb-1,Fa-1,La-1)])[0],Ya);var ib=q(E([qa(hb,Fa-1,La-0)])[0],E([qa(hb-1,Fa-1,La-0)])[0],Ya);Ta()}nb&&(Da=q(E([qa(hb-0,Fa,La-
0)])[0],E([qa(hb-0,Fa-1,La-0)])[0],nb),Ha=q(E([qa(hb-0,Fa,La-1)])[0],E([qa(hb-0,Fa-1,La-1)])[0],nb),ab=q(E([qa(hb-1,Fa,La-1)])[0],E([qa(hb-1,Fa-1,La-1)])[0],nb),ib=q(E([qa(hb-1,Fa,La-0)])[0],E([qa(hb-1,Fa-1,La-0)])[0],nb),Ta());bb&&(Da=q(E([qa(hb-0,Fa-0,La)])[0],E([qa(hb-0,Fa-0,La-1)])[0],bb),Ha=q(E([qa(hb-0,Fa-1,La)])[0],E([qa(hb-0,Fa-1,La-1)])[0],bb),ab=q(E([qa(hb-1,Fa-1,La)])[0],E([qa(hb-1,Fa-1,La-1)])[0],bb),ib=q(E([qa(hb-1,Fa-0,La)])[0],E([qa(hb-1,Fa-0,La-1)])[0],bb),Ta());return Pa}function N(lb,
hb,Fa,La,Oa){for(var fb=[],bb=0,Pa=0;Pa<hb.length;Pa++)for(var Ta=hb[Pa],Ya=1;Ya<sa;Ya++)for(var nb=1;nb<ka;nb++)fb.push(L(lb,qa(Ta,nb-1,Ya-1),qa(Ta,nb-1,Ya),qa(Ta,nb,Ya-1),qa(Ta,nb,Ya),Fa,La,(Ta+nb+Ya)%2,Oa&&Oa[bb]?Oa[bb]:[])),bb++;return fb}function H(lb,hb,Fa,La,Oa){for(var fb=[],bb=0,Pa=0;Pa<hb.length;Pa++)for(var Ta=hb[Pa],Ya=1;Ya<ua;Ya++)for(var nb=1;nb<sa;nb++)fb.push(L(lb,qa(Ya-1,Ta,nb-1),qa(Ya,Ta,nb-1),qa(Ya-1,Ta,nb),qa(Ya,Ta,nb),Fa,La,(Ya+Ta+nb)%2,Oa&&Oa[bb]?Oa[bb]:[])),bb++;return fb}function J(lb,
hb,Fa,La,Oa){for(var fb=[],bb=0,Pa=0;Pa<hb.length;Pa++)for(var Ta=hb[Pa],Ya=1;Ya<ka;Ya++)for(var nb=1;nb<ua;nb++)fb.push(L(lb,qa(nb-1,Ya-1,Ta),qa(nb-1,Ya,Ta),qa(nb,Ya-1,Ta),qa(nb,Ya,Ta),Fa,La,(nb+Ya+Ta)%2,Oa&&Oa[bb]?Oa[bb]:[])),bb++;return fb}function O(lb,hb,Fa){for(var La=1;La<sa;La++)for(var Oa=1;Oa<ka;Oa++)for(var fb=1;fb<ua;fb++){var bb=lb,Pa=qa(fb-1,Oa-1,La-1),Ta=qa(fb-1,Oa-1,La),Ya=qa(fb-1,Oa,La-1),nb=qa(fb-1,Oa,La),Da=qa(fb,Oa-1,La-1),Ha=qa(fb,Oa-1,La),ab=qa(fb,Oa,La-1),ib=qa(fb,Oa,La),ob=
hb,db=Fa,gb=bb;(fb+Oa+La)%2?(ia&&"even"===bb&&(gb=null),G(gb,Pa,Ta,Ya,nb,Da,Ha,ab,ib,ob,db)):(ia&&"odd"===bb&&(gb=null),G(gb,ib,ab,Ha,Da,nb,Ya,Ta,Pa,ob,db))}}function Q(lb,hb,Fa){fa=!0;O(lb,hb,Fa);fa=!1}function U(lb,hb,Fa){ia=!0;O(lb,hb,Fa);ia=!1}function P(lb,hb){for(var Fa=[];lb<hb;lb++)Fa.push(lb);return Fa}function V(){for(var lb=0;lb<ua;lb++)for(var hb=0;hb<ka;hb++)for(var Fa=0;Fa<sa;Fa++){var La=qa(lb,hb,Fa);d(c._x[La],c._y[La],c._z[La],c._value[La])}}c._meshI=[];c._meshJ=[];c._meshK=[];var Y=
c.surface.show,ba=c.spaceframe.show,ea=c.surface.fill,ca=c.spaceframe.fill,ia=!1,fa=!1,ha=0,na,pa,ra=c._Xs,ta=c._Ys,oa=c._Zs,ua=ra.length,ka=ta.length,sa=oa.length,ya=n.indexOf(c._gridFill.replace(/-/g,"").replace(/\+/g,"")),qa=function(lb,hb,Fa){switch(ya){case 5:return Fa+sa*hb+sa*ka*lb;case 4:return Fa+sa*lb+sa*ua*hb;case 3:return hb+ka*Fa+ka*sa*lb;case 2:return hb+ka*lb+ka*ua*Fa;case 1:return lb+ua*Fa+ua*sa*hb;default:return lb+ua*hb+ua*ka*Fa}},xa=c._minValues,Ca=c._maxValues,Ja=c._vMin,eb=c._vMax,
Ra,Wa,Ea,Ia,Qa;(function(){f();V();ba&&ca&&(Qa=ca,Q(null,Ja,eb));if(Y&&ea){Qa=ea;for(var lb=c.surface.pattern,hb=c.surface.count,Fa=0;Fa<hb;Fa++){var La=1===hb?.5:Fa/(hb-1);La=(1-La)*Ja+La*eb;La=Math.abs(La-xa)>Math.abs(La-Ca)?[xa,La]:[La,Ca];U(lb,La[0],La[1])}}var Oa=[[Math.min(Ja,Ca),Math.max(Ja,Ca)],[Math.min(xa,eb),Math.max(xa,eb)]];["x","y","z"].forEach(function(fb){for(var bb=[],Pa=0;Pa<Oa.length;Pa++){var Ta=0,Ya=Oa[Pa][0],nb=Oa[Pa][1],Da=c.slices[fb];if(Da.show&&Da.fill){Qa=Da.fill;var Ha=
[],ab=[],ib=[];if(Da.locations.length)for(var ob=0;ob<Da.locations.length;ob++){var db=p(Da.locations[ob],"x"===fb?ra:"y"===fb?ta:oa);0===db.distRatio?Ha.push(db.id):0<db.id&&(ab.push(db.id),"x"===fb?ib.push([db.distRatio,0,0]):"y"===fb?ib.push([0,db.distRatio,0]):ib.push([0,0,db.distRatio]))}else Ha="x"===fb?P(1,ua-1):"y"===fb?P(1,ka-1):P(1,sa-1);if(0<ab.length){if("x"===fb){Da=Ta;ob=Ya;db=nb;for(var gb=bb[Ta],rb=[],Bb=0,Qb=0;Qb<ab.length;Qb++)for(var gc=ab[Qb],tc=1;tc<sa;tc++)for(var Ac=1;Ac<ka;Ac++)rb.push(M(null,
gc,Ac,tc,ob,db,ib[Qb],gb&&gb[Bb]?gb[Bb]:[])),Bb++;bb[Da]=rb}else if("y"===fb){Da=Ta;ob=Ya;db=nb;gb=bb[Ta];rb=[];for(Qb=Bb=0;Qb<ab.length;Qb++)for(gc=ab[Qb],tc=1;tc<ua;tc++)for(Ac=1;Ac<sa;Ac++)rb.push(M(null,tc,gc,Ac,ob,db,ib[Qb],gb&&gb[Bb]?gb[Bb]:[])),Bb++;bb[Da]=rb}else{Da=Ta;ob=Ya;db=nb;gb=bb[Ta];rb=[];for(Qb=Bb=0;Qb<ab.length;Qb++)for(gc=ab[Qb],tc=1;tc<ka;tc++)for(Ac=1;Ac<ua;Ac++)rb.push(M(null,Ac,tc,gc,ob,db,ib[Qb],gb&&gb[Bb]?gb[Bb]:[])),Bb++;bb[Da]=rb}Ta++}0<Ha.length&&(bb[Ta]="x"===fb?N(null,
Ha,Ya,nb,bb[Ta]):"y"===fb?H(null,Ha,Ya,nb,bb[Ta]):J(null,Ha,Ya,nb,bb[Ta]),Ta++)}Ha=c.caps[fb];Ha.show&&Ha.fill&&(Qa=Ha.fill,bb[Ta]="x"===fb?N(null,[0,ua-1],Ya,nb,bb[Ta]):"y"===fb?H(null,[0,ka-1],Ya,nb,bb[Ta]):J(null,[0,sa-1],Ya,nb,bb[Ta]))}});0===ha&&f();c._meshX=Ra;c._meshY=Wa;c._meshZ=Ea;c._meshIntensity=Ia;c._Xs=ra;c._Ys=ta;c._Zs=oa})();return c}var l=b("gl-mesh3d"),e=b("../../lib/gl_format_color").parseColorScale,a=b("../../lib/str2rgbarray"),g=b("../../components/colorscale").extractOpts,k=b("../../plots/gl3d/zip3"),
p=function(c,f){for(var d=f.length-1;0<d;d--){var q=Math.min(f[d],f[d-1]),r=Math.max(f[d],f[d-1]);if(r>q&&q<c&&c<=r)return{id:d,distRatio:(r-c)/(r-q)}}return{id:0,distRatio:0}};b=m.prototype;b.handlePick=function(c){if(c.object===this.mesh){var f=c.data.index,d=this.data._meshY[f],q=this.data._meshZ[f],r=this.data._Ys.length,u=this.data._Zs.length;f=p(this.data._meshX[f],this.data._Xs).id;d=p(d,this.data._Ys).id;q=p(q,this.data._Zs).id;r=c.index=q+u*d+u*r*f;c.traceCoordinate=[this.data._meshX[r],
this.data._meshY[r],this.data._meshZ[r],this.data._value[r]];u=this.data.hovertext||this.data.text;Array.isArray(u)&&void 0!==u[r]?c.textLabel=u[r]:u&&(c.textLabel=u);return!0}};b.update=function(c){function f(r,u,v,w){return u.map(function(y){return r.d2l(y,0,w)*v})}var d=this.scene,q=d.fullSceneLayout;this.data=h(c);d=k(f(q.xaxis,c._meshX,d.dataScale[0],c.xcalendar),f(q.yaxis,c._meshY,d.dataScale[1],c.ycalendar),f(q.zaxis,c._meshZ,d.dataScale[2],c.zcalendar));q=k(c._meshI,c._meshJ,c._meshK);d={positions:d,
cells:q,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:a(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};q=g(c);d.vertexIntensity=c._meshIntensity;
d.vertexIntensityBounds=[q.min,q.max];d.colormap=e(c);this.mesh.update(d)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};var n="xyz xzy yxz yzx zxy zyx".split(" ");F.exports={findNearestOnAxis:p,generateIsoMeshes:h,createIsosurfaceTrace:function(c,f){var d=l({gl:c.glplot.gl}),q=new m(c,d,f.uid);d._trace=q;q.update(f);c.glplot.add(d);return q}}},{"../../components/colorscale":627,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/gl3d/zip3":850,
"gl-mesh3d":292}],1094:[function(b,F,C){function m(g,k,p,n,c){p=c("isomin");var f=c("isomax");void 0!==f&&null!==f&&void 0!==p&&null!==p&&p>f&&(k.isomin=null,k.isomax=null);p=c("x");f=c("y");var d=c("z"),q=c("value");p&&p.length&&f&&f.length&&d&&d.length&&q&&q.length?(l.getComponentMethod("calendars","handleTraceDefaults")(g,k,["x","y","z"],n),["x","y","z"].forEach(function(r){var u="caps."+r;c(u+".show")&&c(u+".fill");r="slices."+r;c(r+".show")&&(c(r+".fill"),c(r+".locations"))}),c("spaceframe.show")&&
c("spaceframe.fill"),c("surface.show")&&(c("surface.count"),c("surface.fill"),c("surface.pattern")),c("contour.show")&&(c("contour.color"),c("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(r){c(r)}),a(g,k,n,c,{prefix:"",cLetter:"c"}),k._length=null):k.visible=
!1}var h=b("../../lib"),l=b("../../registry"),e=b("./attributes"),a=b("../../components/colorscale/defaults");F.exports={supplyDefaults:function(g,k,p,n){m(g,k,p,n,function(c,f){return h.coerce(g,k,e,c,f)})},supplyIsoDefaults:m}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1091}],1095:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert").createIsosurfaceTrace,
moduleType:"trace",name:"isosurface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1091,"./calc":1092,"./convert":1093,"./defaults":1094}],1096:[function(b,F,C){C=b("../../components/colorscale/attributes");var m=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../surface/attributes"),l=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;F.exports=b({x:{valType:"data_array",editType:"calc+clearAxisTypes"},
y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:m({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",
dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},C("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:h.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:b({},h.contours.x.show,
{}),color:h.contours.x.color,width:h.contours.x.width,editType:"calc"},lightposition:{x:b({},h.lightposition.x,{dflt:1E5}),y:b({},h.lightposition.y,{dflt:1E5}),z:b({},h.lightposition.z,{dflt:0}),editType:"calc"},lighting:b({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},h.lighting),hoverinfo:b({},l.hoverinfo,{editType:"calc"}),showlegend:b({},l.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":622,
"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../surface/attributes":1278}],1097:[function(b,F,C){var m=b("../../components/colorscale/calc");F.exports=function(h,l){l.intensity&&m(h,l,{vals:l.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],1098:[function(b,F,C){function m(r,u,v){this.scene=r;this.uid=v;this.mesh=u;this.name="";this.color="#fff";this.data=null;this.showContour=!1}function h(r){for(var u=[],v=r.length,
w=0;w<v;w++)u[w]=f(r[w]);return u}function l(r,u,v,w){for(var y=[],D=u.length,x=0;x<D;x++)y[x]=r.d2l(u[x],0,w)*v;return y}function e(r){for(var u=[],v=r.length,w=0;w<v;w++)u[w]=Math.round(r[w]);return u}function a(r,u){for(var v=r.length,w=0;w<v;w++)if(-.5>=r[w]||r[w]>=u-.5)return!1;return!0}var g=b("gl-mesh3d"),k=b("delaunay-triangulate"),p=b("alpha-shape"),n=b("convex-hull"),c=b("../../lib/gl_format_color").parseColorScale,f=b("../../lib/str2rgbarray"),d=b("../../components/colorscale").extractOpts,
q=b("../../plots/gl3d/zip3");b=m.prototype;b.handlePick=function(r){if(r.object===this.mesh){var u=r.index=r.data.index;r.traceCoordinate=r.data._cellCenter?r.data.dataCoordinate:[this.data.x[u],this.data.y[u],this.data.z[u]];var v=this.data.hovertext||this.data.text;Array.isArray(v)&&void 0!==v[u]?r.textLabel=v[u]:v&&(r.textLabel=v);return!0}};b.update=function(r){var u=this.scene,v=u.fullSceneLayout;this.data=r;var w=r.x.length;u=q(l(v.xaxis,r.x,u.dataScale[0],r.xcalendar),l(v.yaxis,r.y,u.dataScale[1],
r.ycalendar),l(v.zaxis,r.z,u.dataScale[2],r.zcalendar));if(r.i&&r.j&&r.k){if(r.i.length!==r.j.length||r.j.length!==r.k.length||!a(r.i,w)||!a(r.j,w)||!a(r.k,w))return;w=q(e(r.i),e(r.j),e(r.k))}else if(0===r.alphahull)w=n(u);else if(0<r.alphahull)w=p(r.alphahull,u);else{w=["x","y","z"].indexOf(r.delaunayaxis);v=[];for(var y=u.length,D=0;D<y;D++)v[D]=[u[D][(w+1)%3],u[D][(w+2)%3]];w=k(v)}u={positions:u,cells:w,lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,
diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,contourEnable:r.contour.show,contourColor:f(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading};r.intensity?(w=d(r),this.color="#fff",v=r.intensitymode,u[v+"Intensity"]=r.intensity,u[v+"IntensityBounds"]=[w.min,w.max],u.colormap=c(r)):
r.vertexcolor?(this.color=r.vertexcolor[0],u.vertexColors=h(r.vertexcolor)):r.facecolor?(this.color=r.facecolor[0],u.cellColors=h(r.facecolor)):(this.color=r.color,u.meshColor=f(r.color));this.mesh.update(u)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};F.exports=function(r,u){var v=g({gl:r.glplot.gl}),w=new m(r,v,u.uid);v._trace=w;w.update(u);r.glplot.add(v);return w}},{"../../components/colorscale":627,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,
"../../plots/gl3d/zip3":850,"alpha-shape":69,"convex-hull":135,"delaunay-triangulate":171,"gl-mesh3d":292}],1099:[function(b,F,C){var m=b("../../registry"),h=b("../../lib"),l=b("../../components/colorscale/defaults"),e=b("./attributes");F.exports=function(a,g,k,p){function n(f,d){return h.coerce(a,g,e,f,d)}function c(f){var d=f.map(function(q){return(q=n(q))&&h.isArrayOrTypedArray(q)?q:null});return d.every(function(q){return q&&q.length===d[0].length})&&d}c(["x","y","z"])?(c(["i","j","k"]),(!g.i||
g.j&&g.k)&&(!g.j||g.k&&g.i)&&(!g.k||g.i&&g.j)?(m.getComponentMethod("calendars","handleTraceDefaults")(a,g,["x","y","z"],p),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(f){n(f)}),n("contour.show")&&(n("contour.color"),n("contour.width")),"intensity"in a?(n("intensity"),n("intensitymode"),
l(a,g,p,n,{prefix:"",cLetter:"c"})):(g.showscale=!1,"facecolor"in a?n("facecolor"):"vertexcolor"in a?n("vertexcolor"):n("color",k)),n("text"),n("hovertext"),n("hovertemplate"),g._length=null):g.visible=!1):g.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1096}],1100:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",
name:"mesh3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1096,"./calc":1097,"./convert":1098,"./defaults":1099}],1101:[function(b,F,C){function m(k){return{line:{color:h({},g.color,{dflt:k}),width:g.width,dash:l,editType:"style"},editType:"style"}}var h=b("../../lib").extendFlat;C=b("../scatter/attributes");var l=b("../../components/drawing/attributes").dash,e=b("../../components/fx/attributes"),a=b("../../constants/delta.js");
b=a.INCREASING.COLOR;a=a.DECREASING.COLOR;var g=C.line;F.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:h({},g.width,{}),dash:h({},l,{}),editType:"style"},increasing:m(b),decreasing:m(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},
tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:h({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":636,"../../components/fx/attributes":646,"../../constants/delta.js":718,"../../lib":749,"../scatter/attributes":1155}],1102:[function(b,F,C){function m(k,p,n,c){return{o:k,h:p,l:n,c}}function h(k,p,n,c,f){for(var d=c.makeCalcdata(p,"open"),q=c.makeCalcdata(p,"high"),r=c.makeCalcdata(p,"low"),u=c.makeCalcdata(p,
"close"),v=Array.isArray(p.text),w=Array.isArray(p.hovertext),y=!0,D=null,x=[],E=0;E<n.length;E++){var B=n[E],t=d[E],G=q[E],I=r[E],L=u[E];if(B!==g&&t!==g&&G!==g&&I!==g&&L!==g){L===t?null!==D&&L!==D&&(y=L>D):y=L>t;D=L;var M=f(t,G,I,L);M.pos=B;M.yc=(t+L)/2;M.i=E;M.dir=y?"increasing":"decreasing";M.x=M.pos;M.y=[I,G];v&&(M.tx=p.text[E]);w&&(M.htx=p.hovertext[E]);x.push(M)}else x.push({pos:B,empty:!0})}p._extremes[c._id]=a.findExtremes(c,l.concat(r,q),{padded:!0});x.length&&(x[0].t={labels:{open:e(k,"open:")+
" ",high:e(k,"high:")+" ",low:e(k,"low:")+" ",close:e(k,"close:")+" "}});return x}var l=b("../../lib"),e=l._,a=b("../../plots/cartesian/axes"),g=b("../../constants/numerical").BADNUM;F.exports={calc:function(k,p){var n=a.getFromId(k,p.xaxis),c=a.getFromId(k,p.yaxis);var f=p._minDiff;if(!f){var d=k._fullData,q=[];f=Infinity;var r;for(r=0;r<d.length;r++){var u=d[r];if("ohlc"===u.type&&!0===u.visible&&u.xaxis===n._id){q.push(u);var v=n.makeCalcdata(u,"x");u._xcalc=v;(u=l.distinctVals(v).minDiff)&&isFinite(u)&&
(f=Math.min(f,u))}}Infinity===f&&(f=1);for(r=0;r<q.length;r++)q[r]._minDiff=f}f*=p.tickwidth;d=p._minDiff;p._minDiff=null;q=p._xcalc;p._xcalc=null;k=h(k,p,q,c,m);p._extremes[n._id]=a.findExtremes(n,q,{vpad:d/2});return k.length?(l.extendFlat(k[0].t,{wHover:d/2,tickLen:f}),k):[{t:{empty:!0}}]},calcCommon:h}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797}],1103:[function(b,F,C){function m(a,g,k,p){k(p+".line.color");k(p+".line.width",g.line.width);k(p+".line.dash",
g.line.dash)}var h=b("../../lib"),l=b("./ohlc_defaults"),e=b("./attributes");F.exports=function(a,g,k,p){function n(c,f){return h.coerce(a,g,e,c,f)}l(a,g,n,p)?(n("line.width"),n("line.dash"),m(a,g,n,"increasing"),m(a,g,n,"decreasing"),n("text"),n("hovertext"),n("tickwidth"),p._requestRangeslider[g.xaxis]=!0):g.visible=!1}},{"../../lib":749,"./attributes":1101,"./ohlc_defaults":1106}],1104:[function(b,F,C){function m(c,f,d,q){function r(M){M=M.pos+G-f;return g.inbox(M-I,M+I,L)}function u(M){var N=
M[B];M=M[t];return N===M||g.inbox(N-d,M-d,L)}function v(M){return(r(M)+u(M))/2}var w=c.cd,y=c.xa,D=w[0].trace,x=w[0].t,E=D.type,B="ohlc"===E?"l":"min",t="ohlc"===E?"h":"max",G=x.bPos||0;E=x.bdPos||x.tickLen;var I=x.wHover;x=Math.min(1,E/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));var L=c.maxHoverDistance-x;x=c.maxSpikeDistance-x;q=g.getDistanceFunction(q,r,u,v);g.getClosest(w,q,c);if(!1===c.index)return null;w=w[c.index];if(w.empty)return null;D=D[w.dir];q=D.line.color;k.opacity(q)&&D.line.width?
c.color=q:c.color=D.fillcolor;c.x0=y.c2p(w.pos+G-E,!0);c.x1=y.c2p(w.pos+G+E,!0);c.xLabelVal=w.pos;c.spikeDistance=v(w)*x/L;c.xSpike=y.c2p(w.pos,!0);return c}function h(c,f,d,q){var r=c.cd,u=c.ya,v=r[0].trace,w=r[0].t,y=[];c=m(c,f,d,q);if(!c)return[];r=r[c.index].hi||v.hoverinfo;f=r.split("+");if("all"!==r&&-1===f.indexOf("y"))return[];r=["high","open","close","low"];f={};for(d=0;d<r.length;d++){q=r[d];var D=v[q][c.index],x=u.c2p(D,!0);if(D in f){var E=f[D];E.yLabel+="\x3cbr\x3e"+w.labels[q]+e.hoverLabelText(u,
D)}else E=a.extendFlat({},c),E.y0=E.y1=x,E.yLabelVal=D,E.yLabel=w.labels[q]+e.hoverLabelText(u,D),E.name="",y.push(E),f[D]=E}return y}function l(c,f,d,q){function r(E){return y.labels[E]+e.hoverLabelText(v,w[E][D])}var u=c.cd,v=c.ya,w=u[0].trace,y=u[0].t;c=m(c,f,d,q);if(!c)return[];u=u[c.index];var D=c.index=u.i;f=u.dir;q=u.hi||w.hoverinfo;d=q.split("+");var x="all"===q;q=x||-1!==d.indexOf("y");d=x||-1!==d.indexOf("text");f=q?[r("open"),r("high"),r("low"),r("close")+"  "+n[f]]:[];d&&p(u,w,f);c.extraText=
f.join("\x3cbr\x3e");c.y0=c.y1=v.c2p(u.yc,!0);return[c]}var e=b("../../plots/cartesian/axes"),a=b("../../lib"),g=b("../../components/fx"),k=b("../../components/color"),p=b("../../lib").fillText;b=b("../../constants/delta.js");var n={increasing:b.INCREASING.SYMBOL,decreasing:b.DECREASING.SYMBOL};F.exports={hoverPoints:function(c,f,d,q){return c.cd[0].trace.hoverlabel.split?h(c,f,d,q):l(c,f,d,q)},hoverSplit:h,hoverOnPoints:l}},{"../../components/color":615,"../../components/fx":655,"../../constants/delta.js":718,
"../../lib":749,"../../plots/cartesian/axes":797}],1105:[function(b,F,C){F.exports={moduleType:"trace",name:"ohlc",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc").calc,plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select")}},{"../../plots/cartesian":810,"./attributes":1101,"./calc":1102,"./defaults":1103,"./hover":1104,"./plot":1107,
"./select":1108,"./style":1109}],1106:[function(b,F,C){var m=b("../../registry"),h=b("../../lib");F.exports=function(l,e,a,g){var k=a("x"),p=a("open"),n=a("high"),c=a("low"),f=a("close");a("hoverlabel.split");m.getComponentMethod("calendars","handleTraceDefaults")(l,e,["x"],g);if(p&&n&&c&&f)return l=Math.min(p.length,n.length,c.length,f.length),k&&(l=Math.min(l,h.minRowLength(k))),e._length=l}},{"../../lib":749,"../../registry":880}],1107:[function(b,F,C){var m=b("d3"),h=b("../../lib");F.exports=
function(l,e,a,g){var k=e.yaxis,p=e.xaxis,n=!!p.rangebreaks;h.makeTraceGroups(g,a,"trace ohlc").each(function(c){var f=m.select(this);c=c[0];var d=c.t;if(!0!==c.trace.visible||d.empty)f.remove();else{var q=d.tickLen;f=f.selectAll("path").data(h.identity);f.enter().append("path");f.exit().remove();f.attr("d",function(r){if(r.empty)return"M0,0Z";var u=p.c2p(r.pos-q,!0),v=p.c2p(r.pos+q,!0),w=n?(u+v)/2:p.c2p(r.pos,!0),y=k.c2p(r.o,!0),D=k.c2p(r.h,!0),x=k.c2p(r.l,!0);r=k.c2p(r.c,!0);return"M"+u+","+y+"H"+
w+"M"+w+","+D+"V"+x+"M"+v+","+r+"H"+w})}})}},{"../../lib":749,d3:169}],1108:[function(b,F,C){F.exports=function(m,h){var l=m.cd,e=m.xaxis,a=m.yaxis,g=[],k,p=l[0].t.bPos||0;if(!1===h)for(k=0;k<l.length;k++)l[k].selected=0;else for(k=0;k<l.length;k++){var n=l[k];h.contains([e.c2p(n.pos+p),a.c2p(n.yc)],null,n.i,m)?(g.push({pointNumber:n.i,x:e.c2d(n.pos),y:a.c2d(n.yc)}),n.selected=1):n.selected=0}return g}},{}],1109:[function(b,F,C){var m=b("d3"),h=b("../../components/drawing"),l=b("../../components/color");
F.exports=function(e,a,g){e=g?g:m.select(e).selectAll("g.ohlclayer").selectAll("g.trace");e.style("opacity",function(k){return k[0].trace.opacity});e.each(function(k){var p=k[0].trace;m.select(this).selectAll("path").each(function(n){if(!n.empty){var c=p[n.dir].line;m.select(this).style("fill","none").call(l.stroke,c.color).call(h.dashLine,c.dash,c.width).style("opacity",p.selectedpoints&&!n.selected?.3:1)}})})}},{"../../components/color":615,"../../components/drawing":637,d3:169}],1110:[function(b,
F,C){C=b("../../lib/extend").extendFlat;var m=b("../../plots/attributes"),h=b("../../plots/font_attributes"),l=b("../../components/colorscale/attributes"),e=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../plots/domain").attributes;l=C({editType:"calc"},l("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});F.exports={domain:b({name:"parcats",
trace:!0,editType:"calc"}),hoverinfo:C({},m.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,
editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:h({editType:"calc"}),tickfont:h({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",
dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:l,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/font_attributes":825,"../../plots/template_attributes":875}],
1111:[function(b,F,C){var m=b("../../plots/get_data").getModuleCalcData,h=b("./plot");C.name="parcats";C.plot=function(l,e,a,g){e=m(l.calcdata,"parcats");e.length&&h(l,e[0],a,g)};C.clean=function(l,e,a,g){l=g._has&&g._has("parcats");e=e._has&&e._has("parcats");l&&!e&&g._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":834,"./plot":1116}],1112:[function(b,F,C){function m(r,u,v){var w=r.map(function(y){return y.categories.length}).reduce(function(y,D){return Math.max(y,D)});return{dimensions:r,
paths:u,trace:void 0,maxCats:w,count:v}}function h(r,u,v){r.valueInds.push(u);r.count+=v}function l(r,u,v){r.valueInds.push(u);r.count+=v}function e(r,u){u=void 0===u||null===u?[]:u.map(function(B){return B});var v={},w={},y=[];u.forEach(function(B,t){v[B]=0;w[B]=t});for(var D=0;D<r.length;D++){var x=r[D];if(void 0===v[x]){v[x]=1;var E=u.push(x)-1;w[x]=E}else v[x]++,E=w[x];y.push(E)}r=u.map(function(B){return v[B]});return{uniqueValues:u,uniqueCounts:r,inds:y}}function a(r){var u=r.map(function(v){return v.displayindex});
if(g(u))for(u=0;u<r.length;u++)r[u]._displayindex=r[u].displayindex;else for(u=0;u<r.length;u++)r[u]._displayindex=u}function g(r){for(var u=Array(r.length),v=0;v<r.length;v++){if(0>r[v]||r[v]>=r.length||void 0!==u[r[v]])return!1;u[r[v]]=!0}return!0}var k=b("../../lib/gup").wrap,p=b("../../components/colorscale/helpers").hasColorscale,n=b("../../components/colorscale/calc"),c=b("../../lib/filter_unique.js"),f=b("../../components/drawing"),d=b("../../lib"),q=b("fast-isnumeric");F.exports=function(r,
u){function v(J){if(d.isArrayOrTypedArray(x.color))var O=J=x.color[J%x.color.length];else J=x.color;return{color:E(J),rawColor:O}}var w=d.filterVisible(u.dimensions);if(0===w.length)return[];var y=w.map(function(J){if("trace"===J.categoryorder)var O=null;else if("array"===J.categoryorder)O=J.categoryarray;else{O=c(J.values);for(var Q=!0,U=0;U<O.length;U++)if(!q(O[U])){Q=!1;break}O.sort(Q?d.sorterAsc:void 0);"category descending"===J.categoryorder&&(O=O.reverse())}return e(J.values,O)});var D=d.isArrayOrTypedArray(u.counts)?
u.counts:[u.counts];a(w);w.forEach(function(J,O){O=y[O];J._categoryarray=O.uniqueValues;J._ticktext=null===J.ticktext||void 0===J.ticktext?[]:J.ticktext.slice();for(var Q=J._ticktext.length;Q<O.uniqueValues.length;Q++)J._ticktext.push(O.uniqueValues[Q])});var x=u.line;if(x){p(u,"line")&&n(r,u,{vals:u.line.color,containerStr:"line",cLetter:"c"});var E=f.tryColorscale(x)}else E=d.identity;var B=w[0].values.length,t={},G=y.map(function(J){return J.inds});var I=0;var L,M;for(L=0;L<B;L++){var N=[];for(M=
0;M<G.length;M++)N.push(G[M][L]);r=D[L%D.length];I+=r;M=v(L);var H=N+"-"+M.rawColor;void 0===t[H]&&(t[H]={categoryInds:N,color:M.color,rawColor:M.rawColor,valueInds:[],count:0});l(t[H],L,r)}w=w.map(function(J,O){return{dimensionInd:O,containerInd:J._index,displayInd:J._displayindex,dimensionLabel:J.label,count:I,categories:[],dragX:null}});for(L=0;L<B;L++)for(r=D[L%D.length],M=0;M<w.length;M++)G=w[M].containerInd,N=y[M].inds[L],H=w[M].categories,void 0===H[N]&&(H[N]={dimensionInd:M,categoryInd:N,
categoryValue:u.dimensions[G]._categoryarray[N],displayInd:N,categoryLabel:u.dimensions[G]._ticktext[N],valueInds:[],count:0,dragY:null}),h(H[N],L,r);return k(m(w,t,I))}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../components/drawing":637,"../../lib":749,"../../lib/filter_unique.js":740,"../../lib/gup":746,"fast-isnumeric":241}],1113:[function(b,F,C){function m(c,f,d,q,r){r("line.shape");r("line.hovertemplate");var u=r("line.color",q.colorway[0]);if(e(c,
"line")&&l.isArrayOrTypedArray(u)){if(u.length)return r("line.colorscale"),a(c,f,q,r,{prefix:"line.",cLetter:"c"}),u.length;f.line.color=d}return Infinity}function h(c,f){function d(v,w){return l.coerce(c,f,p.dimensions,v,w)}var q=d("values"),r=d("visible");q&&q.length||(r=f.visible=!1);if(r){d("label");d("displayindex",f._index);q=c.categoryarray;q=Array.isArray(q)&&0<q.length;var u;q&&(u="array");u=d("categoryorder",u);"array"===u?(d("categoryarray"),d("ticktext")):(delete c.categoryarray,delete c.ticktext);
q||"array"!==u||(f.categoryorder="trace")}}var l=b("../../lib"),e=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),g=b("../../plots/domain").defaults,k=b("../../plots/array_container_defaults"),p=b("./attributes"),n=b("../parcoords/merge_length");F.exports=function(c,f,d,q){function r(v,w){return l.coerce(c,f,p,v,w)}var u=k(c,f,{name:"dimensions",handleItemDefaults:h});d=m(c,f,d,q,r);g(f,q,r);Array.isArray(u)&&u.length||(f.visible=!1);n(f,u,"values",
d);r("hoveron");r("hovertemplate");r("arrangement");r("bundlecolors");r("sortpaths");r("counts");l.coerceFont(r,"labelfont",{family:q.font.family,size:Math.round(q.font.size),color:q.font.color});l.coerceFont(r,"tickfont",{family:q.font.family,size:Math.round(q.font.size/1.2),color:q.font.color})}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/domain":824,"../parcoords/merge_length":1126,
"./attributes":1110}],1114:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1110,"./base_plot":1111,"./calc":1112,"./defaults":1113,"./plot":1116}],1115:[function(b,F,C){function m(ha,na,pa,ra){ha=ha.map(J.bind(0,na,pa));ra=ra.selectAll("g.parcatslayer").data([null]);
ra.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");ra=ra.selectAll("g.trace.parcats").data(ha,h);ha=ra.enter().append("g").attr("class","trace parcats");ra.attr("transform",function(ka){return"translate("+ka.x+", "+ka.y+")"});ha.append("g").attr("class","paths");pa=ra.select("g.paths").selectAll("path.path").data(function(ka){return ka.paths},h);pa.attr("fill",function(ka){return ka.model.color});var ta=pa.enter().append("path").attr("class","path").attr("stroke-opacity",
0).attr("fill",function(ka){return ka.model.color}).attr("fill-opacity",0);c(ta);pa.attr("d",function(ka){return ka.svgD});ta.empty()||pa.sort(e);pa.exit().remove();pa.on("mouseover",a).on("mouseout",g).on("click",n);ha.append("g").attr("class","dimensions");ha=ra.select("g.dimensions").selectAll("g.dimension").data(function(ka){return ka.dimensions},h);ha.enter().append("g").attr("class","dimension");ha.attr("transform",function(ka){return"translate("+ka.x+", 0)"});ha.exit().remove();pa=ha.selectAll("g.category").data(function(ka){return ka.categories},
h);ta=pa.enter().append("g").attr("class","category");pa.attr("transform",function(ka){return"translate(0, "+ka.y+")"});ta.append("rect").attr("class","catrect").attr("pointer-events","none");pa.select("rect.catrect").attr("fill","none").attr("width",function(ka){return ka.width}).attr("height",function(ka){return ka.height});d(ta);var oa=pa.selectAll("rect.bandrect").data(function(ka){return ka.bands},h);oa.each(function(){ea.raiseToTop(this)});oa.attr("fill",function(ka){return ka.color});var ua=
oa.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ka){return ka.color}).attr("fill-opacity",0);oa.attr("fill",function(ka){return ka.color}).attr("width",function(ka){return ka.width}).attr("height",function(ka){return ka.height}).attr("y",function(ka){return ka.y}).attr("cursor",function(ka){return"fixed"===ka.parcatsViewModel.arrangement?"default":"perpendicular"===ka.parcatsViewModel.arrangement?"ns-resize":"move"});q(ua);oa.exit().remove();ta.append("text").attr("class",
"catlabel").attr("pointer-events","none");oa=na._fullLayout.paper_bgcolor;pa.select("text.catlabel").attr("text-anchor",function(ka){return l(ka)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",oa+" -1px  1px 2px, "+oa+" 1px  1px 2px, "+oa+"  1px -1px 2px, "+oa+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(ka){return l(ka)?ka.width+5:-5}).attr("y",function(ka){return ka.height/2}).text(function(ka){return ka.model.categoryLabel}).each(function(ka){ca.font(V.select(this),
ka.parcatsViewModel.categorylabelfont);fa.convertToTspans(V.select(this),na)});ta.append("text").attr("class","dimlabel");pa.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ka){return"fixed"===ka.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(ka){return ka.width/2}).attr("y",-5).text(function(ka,sa){return 0===sa?ka.parcatsViewModel.model.dimensions[ka.model.dimensionInd].dimensionLabel:null}).each(function(ka){ca.font(V.select(this),
ka.parcatsViewModel.labelfont)});pa.selectAll("rect.bandrect").on("mouseover",B).on("mouseout",t);pa.exit().remove();ha.call(V.behavior.drag().origin(function(ka){return{x:ka.x,y:0}}).on("dragstart",G).on("drag",I).on("dragend",L));ra.each(function(ka){ka.traceSelection=V.select(this);ka.pathSelection=V.select(this).selectAll("g.paths").selectAll("path.path");ka.dimensionSelection=V.select(this).selectAll("g.dimensions").selectAll("g.dimension")});ra.exit().remove()}function h(ha){return ha.key}function l(ha){return ha.model.dimensionInd===
ha.parcatsViewModel.dimensions[ha.parcatsViewModel.dimensions.length-1].model.dimensionInd}function e(ha,na){return ha.model.rawColor>na.model.rawColor?1:ha.model.rawColor<na.model.rawColor?-1:0}function a(ha){if(!ha.parcatsViewModel.dragDimension&&-1===ha.parcatsViewModel.hoverinfoItems.indexOf("skip")){ea.raiseToTop(this);f(V.select(this));var na=k(ha),pa=p(ha);ha.parcatsViewModel.graphDiv.emit("plotly_hover",{points:na,event:V.event,constraints:pa});if(-1===ha.parcatsViewModel.hoverinfoItems.indexOf("none")){var ra=
V.mouse(this)[0];na=ha.parcatsViewModel.graphDiv;pa=ha.parcatsViewModel.trace;var ta=na._fullLayout,oa=ta._paperdiv.node().getBoundingClientRect(),ua=ha.parcatsViewModel.graphDiv.getBoundingClientRect(),ka;for(ka=0;ka<ha.leftXs.length-1;ka++)if(ha.leftXs[ka]+ha.dimWidths[ka]-2<=ra&&ra<=ha.leftXs[ka+1]+2){var sa=ha.parcatsViewModel.dimensions[ka];sa=(sa.x+sa.width+ha.parcatsViewModel.dimensions[ka+1].x)/2;var ya=(ha.topYs[ka]+ha.topYs[ka+1]+ha.height)/2;break}sa=ha.parcatsViewModel.x+sa;ya=ha.parcatsViewModel.y+
ya;ka=ia.mostReadable(ha.model.color,["black","white"]);ra=ha.model.count;var qa=ra/ha.parcatsViewModel.model.count,xa={countLabel:ra,probabilityLabel:qa.toFixed(3)},Ca=[];-1!==ha.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ca.push(["Count:",xa.countLabel].join(" "));-1!==ha.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ca.push(["P:",xa.probabilityLabel].join(" "));Ca=Ca.join("\x3cbr\x3e");var Ja=V.mouse(na)[0];ba.loneHover({trace:pa,x:sa-oa.left+ua.left,y:ya-oa.top+ua.top,text:Ca,
color:ha.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ka,idealAlign:Ja<sa?"right":"left",hovertemplate:(pa.line||{}).hovertemplate,hovertemplateLabels:xa,eventData:[{data:pa._input,fullData:pa,count:ra,probability:qa}]},{container:ta._hoverlayer.node(),outerContainer:ta._paper.node(),gd:na})}}}function g(ha){if(!ha.parcatsViewModel.dragDimension&&(c(V.select(this)),ba.loneUnhover(ha.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),ha.parcatsViewModel.pathSelection.sort(e),
-1===ha.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var na=k(ha),pa=p(ha);ha.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:na,event:V.event,constraints:pa})}}function k(ha){for(var na=[],pa=M(ha.parcatsViewModel),ra=0;ra<ha.model.valueInds.length;ra++)na.push({curveNumber:pa,pointNumber:ha.model.valueInds[ra]});return na}function p(ha){for(var na={},pa=ha.parcatsViewModel.model.dimensions,ra=0;ra<pa.length;ra++){var ta=pa[ra];na[ta.containerInd]=ta.categories[ha.model.categoryInds[ra]].categoryValue}void 0!==
ha.model.rawColor&&(na.color=ha.model.rawColor);return na}function n(ha){if(-1===ha.parcatsViewModel.hoverinfoItems.indexOf("skip")){var na=k(ha),pa=p(ha);ha.parcatsViewModel.graphDiv.emit("plotly_click",{points:na,event:V.event,constraints:pa})}}function c(ha){ha.attr("fill",function(na){return na.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function f(ha){ha.attr("fill-opacity",.8).attr("stroke",function(na){return ia.mostReadable(na.model.color,
["black","white"])}).attr("stroke-width",.3)}function d(ha){ha.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function q(ha){ha.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function r(ha){var na=ha.categoryViewModel.model.dimensionInd,pa=ha.categoryViewModel.model.categoryInd;return ha.parcatsViewModel.pathSelection.filter(function(ra){return ra.model.categoryInds[na]===pa&&ra.model.color===ha.color})}
function u(ha){V.select(ha.parentNode).selectAll("rect.bandrect").each(function(na){na=r(na);f(na);na.each(function(){ea.raiseToTop(this)})});V.select(ha.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function v(ha){var na=V.select(ha).datum(),pa=r(na);f(pa);pa.each(function(){ea.raiseToTop(this)});V.select(ha.parentNode).selectAll("rect.bandrect").filter(function(ra){return ra.color===na.color}).each(function(){ea.raiseToTop(this);V.select(this).attr("stroke",
"black").attr("stroke-width",1.5)})}function w(ha,na,pa){var ra=V.select(ha).datum(),ta=ra.categoryViewModel.model;ra=ra.parcatsViewModel.graphDiv;var oa=[];V.select(ha.parentNode).selectAll("rect.bandrect").each(function(ua){r(ua).each(function(ka){Array.prototype.push.apply(oa,k(ka))})});ha={};ha[ta.dimensionInd]=ta.categoryValue;ra.emit(na,{points:oa,event:pa,constraints:ha})}function y(ha,na,pa){ha=V.select(ha).datum();var ra=ha.categoryViewModel.model,ta=ha.parcatsViewModel.graphDiv,oa=[];r(ha).each(function(ka){Array.prototype.push.apply(oa,
k(ka))});var ua={};ua[ra.dimensionInd]=ra.categoryValue;void 0!==ha.rawColor&&(ua.color=ha.rawColor);ta.emit(na,{points:oa,event:pa,constraints:ua})}function D(ha,na){na=V.select(na.parentNode).select("rect.catrect");var pa=na.node().getBoundingClientRect(),ra=na.datum(),ta=ra.parcatsViewModel,oa=ta.model.dimensions[ra.model.dimensionInd];na=ta.trace;var ua=pa.top+pa.height/2;1<ta.dimensions.length&&oa.displayInd===ta.dimensions.length-1?(pa=pa.left,ta="left"):(pa=pa.left+pa.width,ta="right");oa=
ra.model.count;var ka=ra.model.categoryLabel,sa=oa/ra.parcatsViewModel.model.count,ya={countLabel:oa,categoryLabel:ka,probabilityLabel:sa.toFixed(3)},qa=[];-1!==ra.parcatsViewModel.hoverinfoItems.indexOf("count")&&qa.push(["Count:",ya.countLabel].join(" "));-1!==ra.parcatsViewModel.hoverinfoItems.indexOf("probability")&&qa.push(["P("+ya.categoryLabel+"):",ya.probabilityLabel].join(" "));ra=qa.join("\x3cbr\x3e");return{trace:na,x:pa-ha.left,y:ua-ha.top,text:ra,color:"lightgray",borderColor:"black",
fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ta,hovertemplate:na.hovertemplate,hovertemplateLabels:ya,eventData:[{data:na._input,fullData:na,count:oa,category:ka,probability:sa}]}}function x(ha,na){var pa=[];V.select(na.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){pa.push(D(ha,this))});return pa}function E(ha,na){var pa=na.getBoundingClientRect(),ra=V.select(na).datum(),ta=ra.categoryViewModel,oa=ta.parcatsViewModel,
ua=oa.model.dimensions[ta.model.dimensionInd];na=oa.trace;var ka=pa.y+pa.height/2;1<oa.dimensions.length&&ua.displayInd===oa.dimensions.length-1?(pa=pa.left,ua="left"):(pa=pa.left+pa.width,ua="right");var sa=ta.model.categoryLabel,ya=ra.parcatsViewModel.model.count,qa=0;ra.categoryViewModel.bands.forEach(function(Ea){Ea.color===ra.color&&(qa+=Ea.count)});var xa=ta.model.count,Ca=0;oa.pathSelection.each(function(Ea){Ea.model.color===ra.color&&(Ca+=Ea.model.count)});oa=qa/ya;var Ja=qa/Ca,eb=qa/xa,Ra=
{countLabel:ya,categoryLabel:sa,probabilityLabel:oa.toFixed(3)},Wa=[];-1!==ta.parcatsViewModel.hoverinfoItems.indexOf("count")&&Wa.push(["Count:",Ra.countLabel].join(" "));-1!==ta.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Wa.push("P(color  "+sa+"): "+Ra.probabilityLabel),Wa.push("P("+sa+" | color): "+Ja.toFixed(3)),Wa.push("P(color | "+sa+"): "+eb.toFixed(3)));ta=Wa.join("\x3cbr\x3e");Ja=ia.mostReadable(ra.color,["black","white"]);return{trace:na,x:pa-ha.left,y:ka-ha.top,text:ta,color:ra.color,
borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ja,fontSize:10,idealAlign:ua,hovertemplate:na.hovertemplate,hovertemplateLabels:Ra,eventData:[{data:na._input,fullData:na,category:sa,count:ya,probability:oa,categorycount:xa,colorcount:Ca,bandcolorcount:qa}]}}function B(ha){if(!(ha.parcatsViewModel.dragDimension||-1!==ha.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>V.mouse(this)[1])){var na=ha.parcatsViewModel.graphDiv,pa=na._fullLayout,ra=pa._paperdiv.node().getBoundingClientRect(),
ta=ha.parcatsViewModel.hoveron;"color"===ta?(v(this),y(this,"plotly_hover",V.event)):(u(this),w(this,"plotly_hover",V.event));if(-1===ha.parcatsViewModel.hoverinfoItems.indexOf("none")){var oa;"category"===ta?oa=D(ra,this):"color"===ta?oa=E(ra,this):"dimension"===ta&&(oa=x(ra,this));oa&&ba.loneHover(oa,{container:pa._hoverlayer.node(),outerContainer:pa._paper.node(),gd:na})}}}function t(ha){var na=ha.parcatsViewModel;na.dragDimension||(c(na.pathSelection),d(na.dimensionSelection.selectAll("g.category")),
q(na.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),ba.loneUnhover(na.graphDiv._fullLayout._hoverlayer.node()),na.pathSelection.sort(e),-1===na.hoverinfoItems.indexOf("skip")&&("color"===ha.parcatsViewModel.hoveron?y(this,"plotly_unhover",V.event):w(this,"plotly_unhover",V.event)))}function G(ha){"fixed"!==ha.parcatsViewModel.arrangement&&(ha.dragDimensionDisplayInd=ha.model.displayInd,ha.initialDragDimensionDisplayInds=ha.parcatsViewModel.model.dimensions.map(function(na){return na.displayInd}),
ha.dragHasMoved=!1,ha.dragCategoryDisplayInd=null,V.select(this).selectAll("g.category").select("rect.catrect").each(function(na){var pa=V.mouse(this)[0],ra=V.mouse(this)[1];-2<=pa&&pa<=na.width+2&&-2<=ra&&ra<=na.height+2&&(ha.dragCategoryDisplayInd=na.model.displayInd,ha.initialDragCategoryDisplayInds=ha.model.categories.map(function(ta){return ta.displayInd}),na.model.dragY=na.y,ea.raiseToTop(this.parentNode),V.select(this.parentNode).selectAll("rect.bandrect").each(function(ta){ta.y<ra&&ra<=ta.y+
ta.height&&(ha.potentialClickBand=this)}))}),ha.parcatsViewModel.dragDimension=ha,ba.loneUnhover(ha.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function I(ha){if("fixed"!==ha.parcatsViewModel.arrangement&&(ha.dragHasMoved=!0,null!==ha.dragDimensionDisplayInd)){var na=ha.dragDimensionDisplayInd,pa=na-1,ra=na+1,ta=ha.parcatsViewModel.dimensions[na];if(null!==ha.dragCategoryDisplayInd){var oa=ta.categories[ha.dragCategoryDisplayInd];oa.model.dragY+=V.event.dy;var ua=oa.model.dragY,ka=
oa.model.displayInd,sa=ta.categories,ya=sa[ka-1];sa=sa[ka+1];void 0!==ya&&ua<ya.y+ya.height/2&&(oa.model.displayInd=ya.model.displayInd,ya.model.displayInd=ka);void 0!==sa&&ua+oa.height>sa.y+sa.height/2&&(oa.model.displayInd=sa.model.displayInd,sa.model.displayInd=ka);ha.dragCategoryDisplayInd=oa.model.displayInd}if(null===ha.dragCategoryDisplayInd||"freeform"===ha.parcatsViewModel.arrangement)ta.model.dragX=V.event.x,pa=ha.parcatsViewModel.dimensions[pa],ra=ha.parcatsViewModel.dimensions[ra],void 0!==
pa&&ta.model.dragX<pa.x+pa.width&&(ta.model.displayInd=pa.model.displayInd,pa.model.displayInd=na),void 0!==ra&&ta.model.dragX+ta.width>ra.x&&(ta.model.displayInd=ra.model.displayInd,ra.model.displayInd=ha.dragDimensionDisplayInd),ha.dragDimensionDisplayInd=ta.model.displayInd;U(ha.parcatsViewModel);Q(ha.parcatsViewModel);H(ha.parcatsViewModel);N(ha.parcatsViewModel)}}function L(ha){if("fixed"!==ha.parcatsViewModel.arrangement&&null!==ha.dragDimensionDisplayInd){V.select(this).selectAll("text").attr("font-weight",
"normal");var na={},pa=M(ha.parcatsViewModel),ra=ha.parcatsViewModel.model.dimensions.map(function(ya){return ya.displayInd}),ta=ha.initialDragDimensionDisplayInds.some(function(ya,qa){return ya!==ra[qa]});ta&&ra.forEach(function(ya,qa){na["dimensions["+ha.parcatsViewModel.model.dimensions[qa].containerInd+"].displayindex"]=ya});var oa=!1;if(null!==ha.dragCategoryDisplayInd){var ua=ha.model.categories.map(function(ya){return ya.displayInd});if(oa=ha.initialDragCategoryDisplayInds.some(function(ya,
qa){return ya!==ua[qa]})){var ka=ha.model.categories.slice().sort(function(ya,qa){return ya.displayInd-qa.displayInd}),sa=ka.map(function(ya){return ya.categoryValue});ka=ka.map(function(ya){return ya.categoryLabel});na["dimensions["+ha.model.containerInd+"].categoryarray"]=[sa];na["dimensions["+ha.model.containerInd+"].ticktext"]=[ka];na["dimensions["+ha.model.containerInd+"].categoryorder"]="array"}}-1===ha.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!ha.dragHasMoved&&ha.potentialClickBand&&
("color"===ha.parcatsViewModel.hoveron?y(ha.potentialClickBand,"plotly_click",V.event.sourceEvent):w(ha.potentialClickBand,"plotly_click",V.event.sourceEvent));ha.model.dragX=null;null!==ha.dragCategoryDisplayInd&&(ha.parcatsViewModel.dimensions[ha.dragDimensionDisplayInd].categories[ha.dragCategoryDisplayInd].model.dragY=null,ha.dragCategoryDisplayInd=null);ha.dragDimensionDisplayInd=null;ha.parcatsViewModel.dragDimension=null;ha.dragHasMoved=null;ha.potentialClickBand=null;U(ha.parcatsViewModel);
Q(ha.parcatsViewModel);V.transition().duration(300).ease("cubic-in-out").each(function(){H(ha.parcatsViewModel,!0);N(ha.parcatsViewModel,!0)}).each("end",function(){(ta||oa)&&Y.restyle(ha.parcatsViewModel.graphDiv,na,[pa])})}}function M(ha){for(var na,pa=ha.graphDiv._fullData,ra=0;ra<pa.length;ra++)if(ha.key===pa[ra].uid){na=ra;break}return na}function N(ha,na){void 0===na&&(na=!1);ha.pathSelection.data(function(pa){return pa.paths},h);(function(pa){return na?pa.transition():pa})(ha.pathSelection).attr("d",
function(pa){return pa.svgD})}function H(ha,na){function pa(ta){return na?ta.transition():ta}void 0===na&&(na=!1);ha.dimensionSelection.data(function(ta){return ta.dimensions},h);var ra=ha.dimensionSelection.selectAll("g.category").data(function(ta){return ta.categories},h);pa(ha.dimensionSelection).attr("transform",function(ta){return"translate("+ta.x+", 0)"});pa(ra).attr("transform",function(ta){return"translate(0, "+ta.y+")"});ra.select(".dimlabel").text(function(ta,oa){return 0===oa?ta.parcatsViewModel.model.dimensions[ta.model.dimensionInd].dimensionLabel:
null});ra.select(".catlabel").attr("text-anchor",function(ta){return l(ta)?"start":"end"}).attr("x",function(ta){return l(ta)?ta.width+5:-5}).each(function(ta){if(l(ta)){ta=ta.width+5;var oa="start"}else ta=-5,oa="end";V.select(this).selectAll("tspan").attr("x",ta).attr("text-anchor",oa)});ha=ra.selectAll("rect.bandrect").data(function(ta){return ta.bands},h);ra=ha.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ta){return ta.color}).attr("fill-opacity",
0);ha.attr("fill",function(ta){return ta.color}).attr("width",function(ta){return ta.width}).attr("height",function(ta){return ta.height}).attr("y",function(ta){return ta.y});q(ra);ha.each(function(){ea.raiseToTop(this)});ha.exit().remove()}function J(ha,na,pa){pa=pa[0];var ra=na.margin||{l:80,r:80,t:100,b:80},ta=pa.trace,oa=ta.domain,ua=na.width,ka=Math.floor(ua*(oa.x[1]-oa.x[0])),sa=Math.floor(na.height*(oa.y[1]-oa.y[0]));ua=oa.x[0]*ua+ra.l;na=na.height-oa.y[1]*na.height+ra.t;oa=ta.line.shape;var ya=
"all"===ta.hoverinfo?["count","probability"]:(ta.hoverinfo||"").split("+");ha={trace:ta,key:ta.uid,model:pa,x:ua,y:na,width:ka,height:sa,hoveron:ta.hoveron,hoverinfoItems:ya,arrangement:ta.arrangement,bundlecolors:ta.bundlecolors,sortpaths:ta.sortpaths,labelfont:ta.labelfont,categorylabelfont:ta.tickfont,pathShape:oa,dragDimension:null,margin:ra,paths:[],dimensions:[],graphDiv:ha,traceSelection:null,pathSelection:null,dimensionSelection:null};pa.dimensions&&(U(ha),Q(ha));return ha}function O(ha,na,
pa,ra,ta){var oa=[],ua=[],ka;for(ka=0;ka<pa.length-1;ka++){var sa=V.interpolateNumber(pa[ka]+ha[ka],ha[ka+1]);oa.push(sa(ta));ua.push(sa(1-ta))}ta="M "+ha[0]+","+na[0];ta+="l"+pa[0]+",0 ";for(ka=1;ka<pa.length;ka++)ta+="C"+oa[ka-1]+","+na[ka-1]+" "+ua[ka-1]+","+na[ka]+" "+ha[ka]+","+na[ka],ta+="l"+pa[ka]+",0 ";ta=ta+("l0,"+ra+" l -")+(pa[pa.length-1]+",0 ");for(ka=pa.length-2;0<=ka;ka--)ta+="C"+ua[ka]+","+(na[ka+1]+ra)+" "+oa[ka]+","+(na[ka]+ra)+" "+(ha[ka]+pa[ka])+","+(na[ka]+ra),ta+="l-"+pa[ka]+
",0 ";return ta+"Z"}function Q(ha){function na(lb){var hb=lb.categoryInds.map(function(Fa,La){return oa[La][Fa]});return ka.map(function(Fa){return hb[Fa]})}var pa=ha.dimensions,ra=ha.model,ta=pa.map(function(lb){return lb.categories.map(function(hb){return hb.y})}),oa=ha.model.dimensions.map(function(lb){return lb.categories.map(function(hb){return hb.displayInd})}),ua=ha.model.dimensions.map(function(lb){return lb.displayInd}),ka=ha.dimensions.map(function(lb){return lb.model.dimensionInd}),sa=
pa.map(function(lb){return lb.x}),ya=pa.map(function(lb){return lb.width}),qa=[];for(xa in ra.paths)ra.paths.hasOwnProperty(xa)&&qa.push(ra.paths[xa]);qa.sort(function(lb,hb){var Fa=na(lb),La=na(hb);"backward"===ha.sortpaths&&(Fa.reverse(),La.reverse());Fa.push(lb.valueInds[0]);La.push(hb.valueInds[0]);ha.bundlecolors&&(Fa.unshift(lb.rawColor),La.unshift(hb.rawColor));return Fa<La?-1:Fa>La?1:0});ra=Array(qa.length);var xa=pa[0].model.count;pa=pa[0].categories.map(function(lb){return lb.height}).reduce(function(lb,
hb){return lb+hb});for(var Ca=0;Ca<qa.length;Ca++){var Ja=qa[Ca];var eb=0<xa?Ja.count/xa*pa:0;for(var Ra=Array(ta.length),Wa=0;Wa<Ja.categoryInds.length;Wa++){var Ea=oa[Wa][Ja.categoryInds[Wa]],Ia=ua[Wa];Ra[Ia]=ta[Ia][Ea];ta[Ia][Ea]+=eb;Ea=ha.dimensions[Ia].categories[Ea];Ia=Ea.bands.length;var Qa=Ea.bands[Ia-1];void 0===Qa||Ja.rawColor!==Qa.rawColor?(Ia=void 0===Qa?0:Qa.y+Qa.height,Ea.bands.push({key:Ia,color:Ja.color,rawColor:Ja.rawColor,height:eb,width:Ea.width,count:Ja.count,y:Ia,categoryViewModel:Ea,
parcatsViewModel:ha})):(Ea=Ea.bands[Ia-1],Ea.height+=eb,Ea.count+=Ja.count)}Wa="hspline"===ha.pathShape?O(sa,Ra,ya,eb,.5):O(sa,Ra,ya,eb,0);ra[Ca]={key:Ja.valueInds[0],model:Ja,height:eb,leftXs:sa,topYs:Ra,dimWidths:ya,svgD:Wa,parcatsViewModel:ha}}ha.paths=ra}function U(ha){var na=ha.model.dimensions.map(function(ta){return{displayInd:ta.displayInd,dimensionInd:ta.dimensionInd}});na.sort(function(ta,oa){return ta.displayInd-oa.displayInd});var pa=[],ra;for(ra in na)pa.push(P(ha,ha.model.dimensions[na[ra].dimensionInd]));
ha.dimensions=pa}function P(ha,na){var pa=ha.model.dimensions.length;pa=40+(1<pa?(ha.width-80-16)/(pa-1):0)*na.displayInd;var ra=[],ta=ha.model.maxCats,oa=na.categories.length,ua=na.count,ka=ha.height-8*(ta-1),sa=8*(ta-oa)/2,ya=na.categories.map(function(Ca){return{displayInd:Ca.displayInd,categoryInd:Ca.categoryInd}});ya.sort(function(Ca,Ja){return Ca.displayInd-Ja.displayInd});for(ta=0;ta<oa;ta++){var qa=ya[ta].categoryInd;var xa=na.categories[qa];qa=0<ua?xa.count/ua*ka:0;xa={key:xa.valueInds[0],
model:xa,width:16,height:qa,y:null!==xa.dragY?xa.dragY:sa,bands:[],parcatsViewModel:ha};sa=sa+qa+8;ra.push(xa)}return{key:na.dimensionInd,x:null!==na.dragX?na.dragX:pa,y:0,width:16,model:na,categories:ra,parcatsViewModel:ha,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}var V=b("d3"),Y=b("../../plot_api/plot_api"),ba=b("../../components/fx"),ea=b("../../lib"),ca=b("../../components/drawing"),
ia=b("tinycolor2"),fa=b("../../lib/svg_text_utils");F.exports=function(ha,na,pa,ra){m(pa,ha,ra,na)}},{"../../components/drawing":637,"../../components/fx":655,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_api":784,d3:169,tinycolor2:548}],1116:[function(b,F,C){var m=b("./parcats");F.exports=function(h,l,e,a){var g=h._fullLayout,k=g._size;m(h,g._paper,l,{width:k.w,height:k.h,margin:{t:k.t,r:k.r,b:k.b,l:k.l}},e,a)}},{"./parcats":1115}],1117:[function(b,F,C){C=b("../../components/colorscale/attributes");
var m=b("../../plots/cartesian/layout_attributes"),h=b("../../plots/font_attributes"),l=b("../../plots/domain").attributes,e=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;F.exports={domain:l({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:h({editType:"plot"}),tickfont:h({editType:"plot"}),rangefont:h({editType:"plot"}),
dimensions:b("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},m.tickvals,{editType:"plot"}),ticktext:e({},m.ticktext,{editType:"plot"}),tickformat:e({},m.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"plot"},{valType:"number",
editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},C("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/plot_template":787,"../../plots/cartesian/layout_attributes":811,"../../plots/domain":824,"../../plots/font_attributes":825}],1118:[function(b,F,C){function m(H,
J,O,Q){a:{for(var U=0;U<Q.length;U++)if(O>=Q[U][0]&&O<=Q[U][1]){Q=!0;break a}Q=!1}if(Q)return O;H=H?-1:1;var P=0;Q=J.length-1;0>H&&(U=P,P=Q,Q=U);for(var V=U=J[P];H*P<H*Q;P+=H){var Y=P+H,ba=J[Y];if(H*O<H*(U*(1-N)+ba*N))return U*(1-M)+V*M;if(H*O<H*ba||Y===Q)return ba*(1-M)+U*M;V=U;U=ba}}function h(H){H.attr("x",-B.bar.captureWidth/2).attr("width",B.bar.captureWidth)}function l(H){H.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function e(H){if(!H.brush.filterSpecified)return"0,"+
H.height;for(var J=a(H.brush.filter.getConsolidated(),H.height),O=[0],Q,U,P=J.length?J[0][0]:null,V=0;V<J.length;V++)Q=J[V],U=Q[1]-Q[0],O.push(P),O.push(U),U=V+1,U<J.length&&(P=J[U][0]-Q[1]);O.push(H.height);return O}function a(H,J){return H.map(function(O){return O.map(function(Q){return Math.max(0,Q*J)}).sort(L)})}function g(){t.select(document.body).style("cursor",null)}function k(H){H.attr("stroke-dasharray",e)}function p(H,J){H=t.select(H).selectAll(".highlight, .highlight-shadow");J=J?H.transition().duration(B.bar.snapDuration).each("end",
J):H;k(J)}function n(H,J){var O=H.brush,Q={};if(O.filterSpecified){var U=H.height;O=O.filter.getConsolidated();var P=a(O,U),V=NaN,Y=NaN,ba=NaN;for(U=0;U<=P.length;U++){var ea=P[U];if(ea&&ea[0]<=J&&J<=ea[1]){V=U;break}else if(Y=U?U-1:NaN,ea&&ea[0]>J){ba=U;break}}U=V;isNaN(U)&&(U=isNaN(Y)||isNaN(ba)?isNaN(Y)?ba:Y:J-P[Y][1]<P[ba][0]-J?Y:ba);isNaN(U)||(P=P[U],Y=B.bar.handleHeight,Y=J>P[1]+Y||J<P[0]-Y?void 0:J>=.9*P[1]+.1*P[0]?"n":J<=.9*P[0]+.1*P[1]?"s":"ns",Y&&(Q.interval=O[U],Q.intervalPix=P,Q.region=
Y))}if(H.ordinal&&!Q.region)for(O=H.unitTickvals,H=H.unitToPaddedPx.invert(J),U=0;U<O.length;U++)if(J=[.25*O[Math.max(U-1,0)]+.75*O[U],.25*O[Math.min(U+1,O.length-1)]+.75*O[U]],H>=J[0]&&H<=J[1]){Q.clickableOrdinalRange=J;break}return Q}function c(H,J){t.event.sourceEvent.stopPropagation();H=J.height-t.mouse(H)[1]-2*B.verticalPadding;var O=J.unitToPaddedPx.invert(H),Q=J.brush,U=n(J,H),P=U.interval,V=Q.svgBrush;V.wasDragged=!1;V.grabbingBar="ns"===U.region;if(V.grabbingBar){var Y=P.map(J.unitToPaddedPx);
V.grabPoint=H-Y[0]-B.verticalPadding;V.barLength=Y[1]-Y[0]}V.clickableOrdinalRange=U.clickableOrdinalRange;V.stayingIntervals=J.multiselect&&Q.filterSpecified?Q.filter.getConsolidated():[];P&&(V.stayingIntervals=V.stayingIntervals.filter(function(ba){return ba[0]!==P[0]&&ba[1]!==P[1]}));V.startExtent=U.region?P["s"===U.region?1:0]:O;J.parent.inBrushDrag=!0;V.brushStartCallback()}function f(H,J){t.event.sourceEvent.stopPropagation();var O=J.height-t.mouse(H)[1]-2*B.verticalPadding,Q=J.brush.svgBrush;
Q.wasDragged=!0;Q._dragging=!0;Q.newExtent=Q.grabbingBar?[O-Q.grabPoint,O+Q.barLength-Q.grabPoint].map(J.unitToPaddedPx.invert):[Q.startExtent,J.unitToPaddedPx.invert(O)].sort(L);J.brush.filterSpecified=!0;Q.extent=Q.stayingIntervals.concat([Q.newExtent]);Q.brushCallback(J);p(H.parentNode)}function d(H,J){var O=J.brush,Q=O.filter,U=O.svgBrush;U._dragging||(q(H,J),f(H,J),J.brush.svgBrush.wasDragged=!1);U._dragging=!1;t.event.sourceEvent.stopPropagation();var P=U.grabbingBar;U.grabbingBar=!1;U.grabLocation=
void 0;J.parent.inBrushDrag=!1;g();if(U.wasDragged)if(P=function(){Q.set(Q.getConsolidated())},J.ordinal){var V=J.unitTickvals;V[V.length-1]<V[0]&&V.reverse();U.newExtent=[m(0,V,U.newExtent[0],U.stayingIntervals),m(1,V,U.newExtent[1],U.stayingIntervals)];V=U.newExtent[1]>U.newExtent[0];U.extent=U.stayingIntervals.concat(V?[U.newExtent]:[]);U.extent.length||y(O);U.brushCallback(J);V?p(H.parentNode,P):(P(),p(H.parentNode))}else P();else U.wasDragged=void 0,U.clickableOrdinalRange?O.filterSpecified&&
J.multiselect?U.extent.push(U.clickableOrdinalRange):(U.extent=[U.clickableOrdinalRange],O.filterSpecified=!0):P?(U.extent=U.stayingIntervals,0===U.extent.length&&y(O)):y(O),U.brushCallback(J),p(H.parentNode);U.brushEndCallback(O.filterSpecified?Q.getConsolidated():[])}function q(H,J){H=J.height-t.mouse(H)[1]-2*B.verticalPadding;J=n(J,H);H="crosshair";J.clickableOrdinalRange?H="pointer":J.region&&(H=J.region+"-resize");t.select(document.body).style("cursor",H)}function r(H){H.on("mousemove",function(J){t.event.preventDefault();
J.parent.inBrushDrag||q(this,J)}).on("mouseleave",function(J){J.parent.inBrushDrag||g()}).call(t.behavior.drag().on("dragstart",function(J){c(this,J)}).on("drag",function(J){f(this,J)}).on("dragend",function(J){d(this,J)}))}function u(H,J){return H[0]-J[0]}function v(H){var J=H.selectAll(".background").data(I);J.enter().append("rect").classed("background",!0).call(h).call(l).style("pointer-events","auto").attr("transform","translate(0 "+B.verticalPadding+")");J.call(r).attr("height",function(O){return O.height-
B.verticalPadding});J=H.selectAll(".highlight-shadow").data(I);J.enter().append("line").classed("highlight-shadow",!0).attr("x",-B.bar.width/2).attr("stroke-width",B.bar.width+B.bar.strokeWidth).attr("stroke",B.bar.strokeColor).attr("opacity",B.bar.strokeOpacity).attr("stroke-linecap","butt");J.attr("y1",function(O){return O.height}).call(k);H=H.selectAll(".highlight").data(I);H.enter().append("line").classed("highlight",!0).attr("x",-B.bar.width/2).attr("stroke-width",B.bar.width-B.bar.strokeWidth).attr("stroke",
B.bar.fillColor).attr("opacity",B.bar.fillOpacity).attr("stroke-linecap","butt");H.attr("y1",function(O){return O.height}).call(k)}function w(H){return H.svgBrush.extent.map(function(J){return J.slice()})}function y(H){H.filterSpecified=!1;H.svgBrush.extent=[[-Infinity,Infinity]]}function D(H){return function(J){J=J.brush;var O=w(J).slice();J.filter.set(O);H()}}function x(H){H=H.slice();for(var J=[],O,Q=H.shift();Q;){for(O=Q.slice();(Q=H.shift())&&Q[0]<=O[1];)O[1]=Math.max(O[1],Q[1]);J.push(O)}1===
J.length&&J[0][0]>J[0][1]&&(J=[]);return J}function E(){var H=[],J,O;return{set:function(Q){H=Q.map(function(U){return U.slice().sort(L)}).sort(u);1===H.length&&-Infinity===H[0][0]&&Infinity===H[0][1]&&(H=[[0,-1]]);J=x(H);O=H.reduce(function(U,P){return[Math.min(U[0],P[0]),Math.max(U[1],P[1])]},[Infinity,-Infinity])},get:function(){return H.slice()},getConsolidated:function(){return J},getBounds:function(){return O}}}var B=b("./constants"),t=b("d3"),G=b("../../lib/gup").keyFun,I=b("../../lib/gup").repeat,
L=b("../../lib").sorterAsc,M=B.bar.snapRatio,N=B.bar.snapClose;F.exports={makeBrush:function(H,J,O,Q,U,P){H=E();H.set(O);return{filter:H,filterSpecified:J,svgBrush:{extent:[],brushStartCallback:Q,brushCallback:D(U),brushEndCallback:P}}},ensureAxisBrush:function(H){H=H.selectAll("."+B.cn.axisBrush).data(I,G);H.enter().append("g").classed(B.cn.axisBrush,!0);v(H)},cleanRanges:function(H,J){Array.isArray(H[0])?(H=H.map(function(Q){return Q.sort(L)}),H=J.multiselect?x(H.sort(u)):[H[0]]):H=[H.sort(L)];
if(J.tickvals){var O=J.tickvals.slice().sort(L);H=H.map(function(Q){Q=[m(0,O,Q[0],[]),m(1,O,Q[1],[])];if(Q[1]>Q[0])return Q}).filter(function(Q){return Q});if(!H.length)return}return 1<H.length?H:H[0]}}},{"../../lib":749,"../../lib/gup":746,"./constants":1121,d3:169}],1119:[function(b,F,C){var m=b("d3"),h=b("../../plots/get_data").getModuleCalcData,l=b("./plot"),e=b("../../constants/xmlns_namespaces");C.name="parcoords";C.plot=function(a){var g=h(a.calcdata,"parcoords")[0];g.length&&l(a,g)};C.clean=
function(a,g,k,p){a=p._has&&p._has("parcoords");g=g._has&&g._has("parcoords");a&&!g&&(p._paperdiv.selectAll(".parcoords").remove(),p._glimages.selectAll("*").remove())};C.toSVG=function(a){var g=a._fullLayout._glimages,k=m.select(a).selectAll(".svg-container");k.filter(function(p,n){return n===k.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var p=this.toDataURL("image/png");g.append("svg:image").attr({xmlns:e.svg,"xlink:href":p,preserveAspectRatio:"none",x:0,y:0,width:this.width,
height:this.height})});window.setTimeout(function(){m.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":725,"../../plots/get_data":834,"./plot":1128,d3:169}],1120:[function(b,F,C){var m=b("../../lib").isArrayOrTypedArray,h=b("../../components/colorscale"),l=b("../../lib/gup").wrap;F.exports=function(e,a){if(h.hasColorscale(a,"line")&&m(a.line.color)){var g=a.line.color;var k=h.extractOpts(a.line).colorscale;h.calc(e,a,{vals:g,containerStr:"line",
cLetter:"c"})}else{e=a._length;g=Array(e);for(k=0;k<e;k++)g[k]=.5;k=[[0,a.line.color],[1,a.line.color]]}return l({lineColor:g,cscale:k})}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gup":746}],1121:[function(b,F,C){F.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,
fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",
axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1122:[function(b,F,C){function m(q,r,u,v,w){var y=w("line.color",u);if(e(q,"line")&&l.isArrayOrTypedArray(y)){if(y.length)return w("line.colorscale"),a(q,r,v,w,{prefix:"line.",cLetter:"c"}),y.length;r.line.color=u}return Infinity}function h(q,r,u,v){function w(D,x){return l.coerce(q,r,n.dimensions,D,x)}
u=w("values");var y=w("visible");u&&u.length||(y=r.visible=!1);y&&(w("label"),w("tickvals"),w("ticktext"),w("tickformat"),u=w("range"),r._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:u},p.setConvert(r._ax,v.layout),w("multiselect"),v=w("constraintrange"))&&(r.constraintrange=c.cleanRanges(v,r))}var l=b("../../lib"),e=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),g=b("../../plots/domain").defaults,k=b("../../plots/array_container_defaults"),
p=b("../../plots/cartesian/axes"),n=b("./attributes"),c=b("./axisbrush"),f=b("./constants").maxDimensionCount,d=b("./merge_length");F.exports=function(q,r,u,v){function w(D,x){return l.coerce(q,r,n,D,x)}var y=q.dimensions;Array.isArray(y)&&y.length>f&&(l.log("parcoords traces support up to "+f+" dimensions at the moment"),y.splice(f));y=k(q,r,{name:"dimensions",layout:v,handleItemDefaults:h});u=m(q,r,u,v,w);g(r,v,w);Array.isArray(y)&&y.length||(r.visible=!1);d(r,y,"values",u);v={family:v.font.family,
size:Math.round(v.font.size/1.2),color:v.font.color};l.coerceFont(w,"labelfont",v);l.coerceFont(w,"tickfont",v);l.coerceFont(w,"rangefont",v);w("labelangle");w("labelside")}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"../../plots/domain":824,"./attributes":1117,"./axisbrush":1118,"./constants":1121,"./merge_length":1126}],1123:[function(b,F,C){var m=b("../../lib").isTypedArray;
C.convertTypedArray=function(h){return m(h)?Array.prototype.slice.call(h):h};C.isOrdinal=function(h){return!!h.tickvals};C.isVisible=function(h){return h.visible||!("visible"in h)}},{"../../lib":749}],1124:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:b("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},
{"./attributes":1117,"./base_plot":1119,"./calc":1120,"./defaults":1122,"./plot":1128}],1125:[function(b,F,C){function m(y,D,x,E,B){var t=y._gl;t.enable(t.SCISSOR_TEST);t.scissor(D,x,E,B);y.clear({color:[0,0,0,0],depth:1})}function h(y,D,x,E,B,t){function G(L){var M=Math.min(E,B-L*E);0===L&&(window.cancelAnimationFrame(x.currentRafs[I]),delete x.currentRafs[I],m(y,t.scissorX,t.scissorY,t.scissorWidth,t.viewBoxSize[1]));x.clearOnly||(t.count=2*M,t.offset=2*L*E,D(t),L*E+M<B&&(x.currentRafs[I]=window.requestAnimationFrame(function(){G(L+
1)})),x.drawCompleted=!1)}var I=t.key;x.drawCompleted||(y.read({x:0,y:0,width:1,height:1,data:u}),x.drawCompleted=!0);G(0)}function l(y,D){for(var x=Array(256),E=0;256>E;E++)x[E]=y(E/255).concat(D);return x}function e(y,D,x){for(var E=Array(y*(q+4)),B=0,t=0;t<y;t++){for(var G=0;G<q;G++)E[B++]=G<D.length?D[G].paddedUnitValues[t]:.5;E[B++]=(t>>>16)%256/255;E[B++]=(t>>>8)%256/255;E[B++]=(t>>>0)%256/255;E[B++]=Math.max(1E-6,Math.min(.999999,x[t]))}return E}function a(y,D,x){for(var E=Array(8*D),B=0,t=
0;t<D;t++)for(var G=0;2>G;G++)for(var I=0;4>I;I++){var L=4*y+I,M=x[64*t+L];63===L&&0===G&&(M*=-1);E[B++]=M}return E}function g(y){y="0"+y;return y.substr(y.length-2)}function k(y){return y<q?"p"+g(y+1)+"_"+g(y+4):"colors"}function p(y,D,x){for(var E=0;E<=q;E+=4)y[k(E)](a(E/4,D,x))}function n(y){for(var D={},x=0;x<=q;x+=4)D[k(x)]=y.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return D}function c(y){var D=Math.max(0,Math.floor(2047*y[0]),0);y=Math.min(2047,Math.ceil(2047*y[1]),2047);
return[Math.min(D,y),Math.max(D,y)]}C=b("glslify");var f=C(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    \x3d (drwLayer \x3e 1.5);\nbool isContext \x3d (drwLayer \x3c 0.5);\n\nconst vec4 ZEROS \x3d vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS \x3d vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 \x3d val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 \x3d val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo \x3c hi) \x26\x26 (lo \x3e p || p \x3e hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] \x3d A;\n    pnts[1] \x3d B;\n    pnts[2] \x3d C;\n    pnts[3] \x3d D;\n\n    for(int i \x3d 0; i \x3c 4; ++i) {\n        for(int j \x3d 0; j \x3c 4; ++j) {\n            for(int k \x3d 0; k \x3c 4; ++k) {\n                if(0 \x3d\x3d iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x \x3d 0.5 * sign(v) + 0.5;\n    float y \x3d axisY(x, A, B, C, D);\n    float z \x3d 1.0 - abs(v);\n\n    z +\x3d isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A \x3d mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B \x3d mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C \x3d mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D \x3d mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v \x3d colors[3];\n\n    gl_Position \x3d position(isContext, v, A, B, C, D);\n\n    fragColor \x3d\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),
d=C(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor \x3d fragColor;\n}\n"]),q=b("./constants").maxDimensionCount,r=b("../../lib"),u=new Uint8Array(4),v=new Uint8Array(4),w={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};F.exports=function(y,D){function x(P){I=P.model;L=P.viewModel;M=L.dimensions.slice();N=M[0]?M[0].values.length:0;var V=I.lines;P=B?V.color.map(function(Y,ba){return ba/V.color.length}):V.color;P=e(N,M,
P);p(H,N,P);E||B||(O=t.texture(r.extendFlat({data:l(I.unitToColor,255)},w)))}var E=D.context,B=D.pick,t=D.regl,G={currentRafs:{},drawCompleted:!0,clearOnly:!1},I,L,M,N,H=n(t),J,O=t.texture(w),Q=[];x(D);var U=t({profile:!1,blend:{enable:E,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!E,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:t.prop("scissorX"),y:t.prop("scissorY"),
width:t.prop("scissorWidth"),height:t.prop("scissorHeight")}},viewport:{x:t.prop("viewportX"),y:t.prop("viewportY"),width:t.prop("viewportWidth"),height:t.prop("viewportHeight")},dither:!1,vert:f,frag:d,primitive:"lines",lineWidth:1,attributes:H,uniforms:{resolution:t.prop("resolution"),viewBoxPos:t.prop("viewBoxPos"),viewBoxSize:t.prop("viewBoxSize"),dim0A:t.prop("dim0A"),dim1A:t.prop("dim1A"),dim0B:t.prop("dim0B"),dim1B:t.prop("dim1B"),dim0C:t.prop("dim0C"),dim1C:t.prop("dim1C"),dim0D:t.prop("dim0D"),
dim1D:t.prop("dim1D"),loA:t.prop("loA"),hiA:t.prop("hiA"),loB:t.prop("loB"),hiB:t.prop("hiB"),loC:t.prop("loC"),hiC:t.prop("hiC"),loD:t.prop("loD"),hiD:t.prop("hiD"),palette:O,contextColor:t.prop("contextColor"),mask:t.prop("maskTexture"),drwLayer:t.prop("drwLayer"),maskHeight:t.prop("maskHeight")},offset:t.prop("offset"),count:t.prop("count")});return{render:function(P,V,Y){var ba=P.length,ea,ca=Infinity,ia=-Infinity;for(ea=0;ea<ba;ea++){if(P[ea].dim0.canvasX<ca){ca=P[ea].dim0.canvasX;var fa=ea}if(P[ea].dim1.canvasX>
ia){ia=P[ea].dim1.canvasX;var ha=ea}}0===ba&&m(t,0,0,I.canvasWidth,I.canvasHeight);var na=E,pa;ea=[[],[]];for(ia=0;64>ia;ia++)ca=!na&&ia<M.length?M[ia].brush.filter.getBounds():[-Infinity,Infinity],ea[0][ia]=ca[0],ea[1][ia]=ca[1];var ra=Array(16384);for(ca=0;16384>ca;ca++)ra[ca]=255;if(!na)for(ca=0;ca<M.length;ca++){ia=ca%8;na=(ca-ia)/8;var ta=Math.pow(2,ia),oa=M[ca].brush.filter.get();if(!(2>oa.length)){var ua=c(oa[0])[1];for(pa=1;pa<oa.length;pa++){var ka=c(oa[pa]);for(ia=ua+1;ia<ka[0];ia++)ra[8*
ia+na]&=~ta;ua=Math.max(ua,ka[1])}}}ca={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ra};J?J(ca):J=t.texture(ca);ca={maskTexture:J,maskHeight:2048,loA:ea[0].slice(0,16),loB:ea[0].slice(16,32),loC:ea[0].slice(32,48),loD:ea[0].slice(48,64),hiA:ea[1].slice(0,16),hiB:ea[1].slice(16,32),hiC:ea[1].slice(32,48),hiD:ea[1].slice(48,64)};for(ea=0;ea<ba;ea++){var sa=P[ea];ta=sa.dim0.crossfilterDimensionIndex;oa=sa.dim1.crossfilterDimensionIndex;ua=sa.canvasX;ka=sa.canvasY;ia=ua+
sa.panelSizeX;if(V||!Q[ta]||Q[ta][0]!==ua||Q[ta][1]!==ia){Q[ta]=[ua,ia];ia=I;ra=fa;na=ha;pa=ea;var ya=sa.panelSizeX,qa=sa.panelSizeY;sa=sa.dim0.crossfilterDimensionIndex;for(var xa=E?0:B?2:1,Ca=ca,Ja=[[],[]],eb=0;64>eb;eb++)Ja[0][eb]=eb===ta?1:0,Ja[1][eb]=eb===oa?1:0;eb=ia.lines.canvasOverdrag;var Ra=ia.domain,Wa=ia.canvasWidth,Ea=ia.canvasHeight,Ia=ia.deselectedLines.color;ia=r.extendFlat({key:sa,resolution:[Wa,Ea],viewBoxPos:[ua+eb,ka],viewBoxSize:[ya,qa],i0:ta,i1:oa,dim0A:Ja[0].slice(0,16),dim0B:Ja[0].slice(16,
32),dim0C:Ja[0].slice(32,48),dim0D:Ja[0].slice(48,64),dim1A:Ja[1].slice(0,16),dim1B:Ja[1].slice(16,32),dim1C:Ja[1].slice(32,48),dim1D:Ja[1].slice(48,64),drwLayer:xa,contextColor:[Ia[0]/255,Ia[1]/255,Ia[2]/255,1>Ia[3]?Ia[3]:Math.max(1/255,Math.pow(1/ia.lines.color.length,1/3))],scissorX:(pa===ra?0:ua+eb)+(ia.pad.l-eb)+ia.layoutWidth*Ra.x[0],scissorWidth:(pa===na?Wa-ua+eb:ya+.5)+(pa===ra?ua+eb:0),scissorY:ka+ia.pad.b+ia.layoutHeight*Ra.y[0],scissorHeight:qa,viewportX:ia.pad.l-eb+ia.layoutWidth*Ra.x[0],
viewportY:ia.pad.b+ia.layoutHeight*Ra.y[0],viewportWidth:Wa,viewportHeight:Ea},Ca);G.clearOnly=Y;h(t,U,G,V?I.lines.blockLineCount:N,N,ia)}}},readPixel:function(P,V){t.read({x:P,y:V,width:1,height:1,data:v});return v},readPixels:function(P,V,Y,ba){var ea=new Uint8Array(4*Y*ba);t.read({x:P,y:V,width:Y,height:ba,data:ea});return ea},destroy:function(){y.style["pointer-events"]="none";O.destroy();J&&J.destroy();for(var P in H)H[P].destroy()},update:x}}},{"../../lib":749,"./constants":1121,glslify:413}],
1126:[function(b,F,C){F.exports=function(m,h,l,e){e||(e=Infinity);var a;for(a=0;a<h.length;a++){var g=h[a];g.visible&&(e=Math.min(e,g[l].length))}Infinity===e&&(e=0);m._length=e;for(a=0;a<h.length;a++)g=h[a],g.visible&&(g._length=e);return e}},{}],1127:[function(b,F,C){function m(U,P){return l(B.aggNums(Math.min,null,U,P),B.aggNums(Math.max,null,U,P))}function h(U){var P=U.range;return P?l(P[0],P[1]):m(U.values,U._length)}function l(U,P){if(isNaN(U)||!isFinite(U))U=0;if(isNaN(P)||!isFinite(P))P=0;
U===P&&(0===U?(--U,P+=1):(U*=.9,P*=1.1));return[U,P]}function e(U,P){return P?function(V,Y){Y=P[Y];return null===Y||void 0===Y?U(V):Y}:U}function a(U,P,V,Y,ba){var ea=h(V);return Y?D.scale.ordinal().domain(Y.map(e(D.format(V.tickformat),ba))).range(Y.map(function(ca){return U-P+(ca-ea[0])/(ea[1]-ea[0])*(2*P-U)})):D.scale.linear().domain(ea).range([U-P,P])}function g(U,P){return D.scale.linear().range([P,U-P])}function k(U,P){return D.scale.linear().domain(h(U)).range([P,1-P])}function p(U){if(U.tickvals){var P=
h(U);return D.scale.ordinal().domain(U.tickvals).range(U.tickvals.map(function(V){return(V-P[0])/(P[1]-P[0])}))}}function n(U){var P=U.map(function(ea){return ea[0]}),V=U.map(function(ea){ea=x(ea[1]);return D.rgb("rgb("+ea[0]+","+ea[1]+","+ea[2]+")")}),Y=function(ea){return function(ca){return ca[ea]}},ba=["r","g","b"].map(function(ea){return D.scale.linear().clamp(!0).domain(P).range(V.map(Y(ea)))});return function(ea){return ba.map(function(ca){return ca(ea)})}}function c(U){return U.dimensions.some(function(P){return P.brush.filterSpecified})}
function f(U,P,V){var Y=N(P),ba=Y.trace,ea=H.convertTypedArray(Y.lineColor),ca=ba.line;P={color:x(J.deselectedLineColor)};var ia=I.extractOpts(ca);Y=ia.reversescale?I.flipScale(Y.cscale):Y.cscale;var fa=ba.domain,ha=ba.dimensions,na=U.width,pa=ba.labelangle,ra=ba.labelside,ta=ba.labelfont,oa=ba.tickfont,ua=ba.rangefont;ba=B.extendDeepNoArrays({},ca,{color:ea.map(D.scale.linear().domain(h({values:ea,range:[ia.min,ia.max],_length:ba._length}))),blockLineCount:J.blockLineCount,canvasOverdrag:J.overdrag*
J.canvasPixelRatio});ea=U.margin||{l:80,r:80,t:100,b:80};ca=Math.floor(na*(fa.x[1]-fa.x[0]));ia=Math.floor(U.height*(fa.y[1]-fa.y[0]));return{key:V,colCount:ha.filter(H.isVisible).length,dimensions:ha,tickDistance:J.tickDistance,unitToColor:n(Y),lines:ba,deselectedLines:P,labelAngle:pa,labelSide:ra,labelFont:ta,tickFont:oa,rangeFont:ua,layoutWidth:na,layoutHeight:U.height,domain:fa,translateX:fa.x[0]*na,translateY:U.height-fa.y[1]*U.height,pad:ea,canvasWidth:ca*J.canvasPixelRatio+2*ba.canvasOverdrag,
canvasHeight:ia*J.canvasPixelRatio,width:ca,height:ia,canvasPixelRatio:J.canvasPixelRatio}}function d(U,P,V){var Y=V.width,ba=V.height,ea=V.dimensions,ca=V.canvasPixelRatio,ia=function(ra){return Y*ra/Math.max(1,V.colCount-1)},fa=J.verticalPadding/ba,ha=g(ba,J.verticalPadding),na={key:V.key,xScale:ia,model:V,inBrushDrag:!1},pa={};na.dimensions=ea.filter(H.isVisible).map(function(ra,ta){function oa(Wa,Ea){return{val:Wa,text:Ja[Ea]}}function ua(Wa,Ea){return Wa.val-Ea.val}var ka=k(ra,fa),sa=pa[ra.label];
pa[ra.label]=(sa||0)+1;sa=ra.label+(sa?"__"+sa:"");var ya=ra.constraintrange,qa=ya&&ya.length;qa&&!Array.isArray(ya[0])&&(ya=[ya]);ya=qa?ya.map(function(Wa){return Wa.map(ka)}):[[-Infinity,Infinity]];var xa=ra.values;xa.length>ra._length&&(xa=xa.slice(0,ra._length));var Ca=ra.tickvals;if(Array.isArray(Ca)&&Ca.length){var Ja=ra.ticktext;Array.isArray(Ja)&&Ja.length?Ja.length>Ca.length?Ja=Ja.slice(0,Ca.length):Ca.length>Ja.length&&(Ca=Ca.slice(0,Ja.length)):Ja=Ca.map(D.format(ra.tickformat));for(var eb=
1;eb<Ca.length;eb++)if(Ca[eb]<Ca[eb-1]){eb=Ca.map(oa).sort(ua);for(var Ra=0;Ra<Ca.length;Ra++)Ca[Ra]=eb[Ra].val,Ja[Ra]=eb[Ra].text;break}}else Ca=void 0;xa=H.convertTypedArray(xa);return{key:sa,label:ra.label,tickFormat:ra.tickformat,tickvals:Ca,ticktext:Ja,ordinal:H.isOrdinal(ra),multiselect:ra.multiselect,xIndex:ta,crossfilterDimensionIndex:ta,visibleIndex:ra._index,height:ba,values:xa,paddedUnitValues:xa.map(ka),unitTickvals:Ca&&Ca.map(ka),xScale:ia,x:ia(ta),canvasX:ia(ta)*ca,unitToPaddedPx:ha,
domainScale:a(ba,J.verticalPadding,ra,Ca,Ja),ordinalScale:p(ra),parent:na,model:V,brush:O.makeBrush(U,qa,ya,function(){U.linePickActive(!1)},function(){na.focusLayer&&na.focusLayer.render(na.panels,!0);var Wa=c(na);!U.contextShown()&&Wa?(na.contextLayer&&na.contextLayer.render(na.panels,!0),U.contextShown(!0)):U.contextShown()&&!Wa&&(na.contextLayer&&na.contextLayer.render(na.panels,!0,!0),U.contextShown(!1))},function(Wa){na.focusLayer.render(na.panels,!0);na.pickLayer&&na.pickLayer.render(na.panels,
!0);U.linePickActive(!0);if(P&&P.filterChanged){var Ea=ka.invert;Wa=Wa.map(function(Ia){return Ia.map(Ea).sort(B.sorterAsc)}).sort(function(Ia,Qa){return Ia[0]-Qa[0]});P.filterChanged(na.key,ra._index,Wa)}})}});return na}function q(U){U.classed(J.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}function r(){var U=!0,P=!1;return{linePickActive:function(V){return arguments.length?U=!!V:U},contextShown:function(V){return arguments.length?P=!!V:
P}}}function u(U,P){var V=U*Math.PI/180;return{dir:"top"===P?1:-1,dx:Math.sin(V),dy:Math.cos(V),degrees:U}}function v(U,P){var V=P.panels||(P.panels=[]);U=U.data();for(var Y=0;Y<U.length-1;Y++){var ba=V[Y]||(V[Y]={}),ea=U[Y],ca=U[Y+1];ba.dim0=ea;ba.dim1=ca;ba.canvasX=ea.canvasX;ba.panelSizeX=ca.canvasX-ea.canvasX;ba.panelSizeY=P.model.canvasHeight;ba.y=0;ba.canvasY=0}}function w(U){for(var P=0;P<U.length;P++)for(var V=0;V<U[P].length;V++)for(var Y=U[P][V].trace,ba=Y.dimensions,ea=0;ea<ba.length;ea++){var ca=
ba[ea].values,ia=ba[ea]._ax;ia&&(ia.range=ia.range?l(ia.range[0],ia.range[1]):m(ca,Y._length),ia.dtick||(ia.dtick=.01*(Math.abs(ia.range[1]-ia.range[0])||1)),ia.tickformat=ba[ea].tickformat,E.calcTicks(ia),ia.cleanRange())}}function y(U,P){if(U.ordinal)return"";var V=U.domainScale.domain();return E.tickText(U.model.dimensions[U.visibleIndex]._ax,V[P?V.length-1:0],!1).text}var D=b("d3"),x=b("color-rgba"),E=b("../../plots/cartesian/axes"),B=b("../../lib"),t=b("../../lib/svg_text_utils"),G=b("../../components/drawing"),
I=b("../../components/colorscale");C=b("../../lib/gup");var L=C.keyFun,M=C.repeat,N=C.unwrap,H=b("./helpers"),J=b("./constants"),O=b("./axisbrush"),Q=b("./lines");F.exports=function(U,P,V,Y){var ba=U._fullLayout,ea=ba._toppaper;ba=ba._glcontainer;w(P);var ca=r(),ia=P.filter(function(pa){return N(pa).trace.visible}).map(f.bind(0,V)).map(d.bind(0,ca,Y));ba.each(function(pa,ra){return B.extendFlat(pa,ia[ra])});P=ba.selectAll(".gl-canvas").each(function(pa){pa.viewModel=ia[0];pa.model=pa.viewModel?pa.viewModel.model:
null});var fa=null;P.filter(function(pa){return pa.pick}).style("pointer-events","auto").on("mousemove",function(pa){if(ca.linePickActive()&&pa.lineLayer&&Y&&Y.hover){var ra=D.event,ta=this.width,oa=this.height,ua=D.mouse(this),ka=ua[0];ua=ua[1];0>ka||0>ua||ka>=ta||ua>=oa||(oa=pa.lineLayer.readPixel(ka,oa-1-ua),oa=(ta=0!==oa[3])?oa[2]+256*(oa[1]+256*oa[0]):null,pa={x:ka,y:ua,clientX:ra.clientX,clientY:ra.clientY,dataIndex:pa.model.key,curveNumber:oa},oa!==fa&&(ta?Y.hover(pa):Y.unhover&&Y.unhover(pa),
fa=oa))}});P.style("opacity",function(pa){return pa.pick?0:1});ea.style("background","rgba(255, 255, 255, 0)");ea=ea.selectAll("."+J.cn.parcoords).data(ia,L);ea.exit().remove();ea.enter().append("g").classed(J.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none");ea.attr("transform",function(pa){return"translate("+pa.model.translateX+","+pa.model.translateY+")"});ea=ea.selectAll("."+J.cn.parcoordsControlView).data(M,L);ea.enter().append("g").classed(J.cn.parcoordsControlView,
!0);ea.attr("transform",function(pa){return"translate("+pa.model.pad.l+","+pa.model.pad.t+")"});var ha=ea.selectAll("."+J.cn.yAxis).data(function(pa){return pa.dimensions},L);ha.enter().append("g").classed(J.cn.yAxis,!0);ea.each(function(pa){v(ha,pa)});P.each(function(pa){if(pa.viewModel){!pa.lineLayer||Y?pa.lineLayer=Q(this,pa):pa.lineLayer.update(pa);if(pa.key||0===pa.key)pa.viewModel[pa.key]=pa.lineLayer;pa.lineLayer.render(pa.viewModel.panels,!pa.context||Y)}});ha.attr("transform",function(pa){return"translate("+
pa.xScale(pa.xIndex)+", 0)"});ha.call(D.behavior.drag().origin(function(pa){return pa}).on("drag",function(pa){var ra=pa.parent;ca.linePickActive(!1);pa.x=Math.max(-J.overdrag,Math.min(pa.model.width+J.overdrag,D.event.x));pa.canvasX=pa.x*pa.model.canvasPixelRatio;ha.sort(function(ta,oa){return ta.x-oa.x}).each(function(ta,oa){ta.xIndex=oa;ta.x=pa===ta?ta.x:ta.xScale(ta.xIndex);ta.canvasX=ta.x*ta.model.canvasPixelRatio});v(ha,ra);ha.filter(function(ta){return 0!==Math.abs(pa.xIndex-ta.xIndex)}).attr("transform",
function(ta){return"translate("+ta.xScale(ta.xIndex)+", 0)"});D.select(this).attr("transform","translate("+pa.x+", 0)");ha.each(function(ta,oa,ua){ua===pa.parent.key&&(ra.dimensions[oa]=ta)});ra.contextLayer&&ra.contextLayer.render(ra.panels,!1,!c(ra));ra.focusLayer.render&&ra.focusLayer.render(ra.panels)}).on("dragend",function(pa){var ra=pa.parent;pa.x=pa.xScale(pa.xIndex);pa.canvasX=pa.x*pa.model.canvasPixelRatio;v(ha,ra);D.select(this).attr("transform",function(ta){return"translate("+ta.x+", 0)"});
ra.contextLayer&&ra.contextLayer.render(ra.panels,!1,!c(ra));ra.focusLayer&&ra.focusLayer.render(ra.panels);ra.pickLayer&&ra.pickLayer.render(ra.panels,!0);ca.linePickActive(!0);Y&&Y.axesMoved&&Y.axesMoved(ra.key,ra.dimensions.map(function(ta){return ta.crossfilterDimensionIndex}))}));ha.exit().remove();ea=ha.selectAll("."+J.cn.axisOverlays).data(M,L);ea.enter().append("g").classed(J.cn.axisOverlays,!0);ea.selectAll("."+J.cn.axis).remove();var na=ea.selectAll("."+J.cn.axis).data(M,L);na.enter().append("g").classed(J.cn.axis,
!0);na.each(function(pa){var ra=pa.model.height/pa.model.tickDistance,ta=pa.domainScale,oa=ta.domain();D.select(this).call(D.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(ra,pa.tickFormat).tickValues(pa.ordinal?oa:null).tickFormat(function(ua){return H.isOrdinal(pa)?ua:E.tickText(pa.model.dimensions[pa.visibleIndex]._ax,ua,!1).text}).scale(ta));G.font(na.selectAll("text"),pa.model.tickFont)});na.selectAll(".domain, .tick\x3eline").attr("fill","none").attr("stroke","black").attr("stroke-opacity",
.25).attr("stroke-width","1px");na.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");P=ea.selectAll("."+J.cn.axisHeading).data(M,L);P.enter().append("g").classed(J.cn.axisHeading,!0);P=P.selectAll("."+J.cn.axisTitle).data(M,L);P.enter().append("text").classed(J.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events",
"auto");P.text(function(pa){return pa.label}).each(function(pa){var ra=D.select(this);G.font(ra,pa.model.labelFont);t.convertToTspans(ra,U)}).attr("transform",function(pa){var ra=u(pa.model.labelAngle,pa.model.labelSide),ta=J.axisTitleOffset;return(0<ra.dir?"":"translate(0,"+(2*ta+pa.model.height)+")")+"rotate("+ra.degrees+")translate("+-ta*ra.dx+","+-ta*ra.dy+")"}).attr("text-anchor",function(pa){pa=u(pa.model.labelAngle,pa.model.labelSide);return 2*Math.abs(pa.dx)>Math.abs(pa.dy)?0>pa.dir*pa.dx?
"start":"end":"middle"});P=ea.selectAll("."+J.cn.axisExtent).data(M,L);P.enter().append("g").classed(J.cn.axisExtent,!0);V=P.selectAll("."+J.cn.axisExtentTop).data(M,L);V.enter().append("g").classed(J.cn.axisExtentTop,!0);V.attr("transform","translate(0,"+-J.axisExtentOffset+")");V=V.selectAll("."+J.cn.axisExtentTopText).data(M,L);V.enter().append("text").classed(J.cn.axisExtentTopText,!0).call(q);V.text(function(pa){return y(pa,!0)}).each(function(pa){G.font(D.select(this),pa.model.rangeFont)});
P=P.selectAll("."+J.cn.axisExtentBottom).data(M,L);P.enter().append("g").classed(J.cn.axisExtentBottom,!0);P.attr("transform",function(pa){return"translate(0,"+(pa.model.height+J.axisExtentOffset)+")"});P=P.selectAll("."+J.cn.axisExtentBottomText).data(M,L);P.enter().append("text").classed(J.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(q);P.text(function(pa){return y(pa,!1)}).each(function(pa){G.font(D.select(this),pa.model.rangeFont)});O.ensureAxisBrush(ea)}},{"../../components/colorscale":627,
"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"./axisbrush":1118,"./constants":1121,"./helpers":1123,"./lines":1125,"color-rgba":127,d3:169}],1128:[function(b,F,C){function m(g,k,p){p=k.indexOf(p);g=g.indexOf(p);-1===g&&(g+=k.length);return g}function h(g,k){return function(p,n){return m(g,k,p)-m(g,k,n)}}var l=b("./parcoords"),e=b("../../lib/prepare_regl"),a=b("./helpers").isVisible;F.exports=function(g,k){var p=
g._fullLayout;if(e(g)){var n={},c={},f={},d={},q=p._size;k.forEach(function(r,u){r=r[0].trace;f[u]=r.index;r=d[u]=r._fullInput.index;n[u]=g.data[r].dimensions;c[u]=g.data[r].dimensions.slice()});l(g,k,{width:q.w,height:q.h,margin:{t:q.t,r:q.r,b:q.b,l:q.l}},{filterChanged:function(r,u,v){var w=c[r][u];v=v.map(function(x){return x.slice()});var y="dimensions["+u+"].constraintrange",D=p._tracePreGUI[g._fullData[f[r]]._fullInput.uid];void 0===D[y]&&(D[y]=w.constraintrange||null);u=g._fullData[f[r]].dimensions[u];
v.length?(1===v.length&&(v=v[0]),w.constraintrange=v,u.constraintrange=v.slice(),v=[v]):(delete w.constraintrange,delete u.constraintrange,v=null);w={};w[y]=v;g.emit("plotly_restyle",[w,[d[r]]])},hover:function(r){g.emit("plotly_hover",r)},unhover:function(r){g.emit("plotly_unhover",r)},axesMoved:function(r,u){u=h(u,c[r].filter(a));n[r].sort(u);c[r].filter(function(v){return!a(v)}).sort(function(v){return c[r].indexOf(v)}).forEach(function(v){n[r].splice(n[r].indexOf(v),1);n[r].splice(c[r].indexOf(v),
0,v)});g.emit("plotly_restyle",[{dimensions:[n[r]]},[d[r]]])}})}}},{"../../lib/prepare_regl":762,"./helpers":1123,"./parcoords":1127}],1129:[function(b,F,C){C=b("../../plots/attributes");var m=b("../../plots/domain").attributes,h=b("../../plots/font_attributes"),l=b("../../components/color/attributes"),e=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;h=h({editType:"plot",arrayOk:!0,colorEditType:"plot"});
F.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",
dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:b({},C.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],
dflt:"auto",arrayOk:!0,editType:"plot"},textfont:b({},h,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:b({},h,{}),outsidetextfont:b({},h,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:b({},h,{}),position:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"plot"},
editType:"plot"},domain:m({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:b({},
h,{}),titleposition:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":614,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/font_attributes":825,"../../plots/template_attributes":875}],1130:[function(b,F,C){var m=b("../../plots/plots");C.name="pie";C.plot=function(h,l,e,a){m.plotBasePlot(C.name,h,l,e,a)};C.clean=function(h,l,e,
a){m.cleanBasePlot(C.name,h,l,e,a)}},{"../../plots/plots":860}],1131:[function(b,F,C){function m(k){return function(p,n){if(!p)return!1;p=e(p);if(!p.isValid())return!1;p=a.addOpacity(p,p.getAlpha());k[n]||(k[n]=p);return p}}function h(k,p){var n,c=JSON.stringify(k),f=p[c];if(!f){f=k.slice();for(n=0;n<k.length;n++)f.push(e(k[n]).lighten(20).toHexString());for(n=0;n<k.length;n++)f.push(e(k[n]).darken(20).toHexString());p[c]=f}return f}var l=b("fast-isnumeric"),e=b("tinycolor2"),a=b("../../components/color"),
g={};F.exports={calc:function(k,p){var n=[],c=k._fullLayout;k=c.hiddenlabels||[];var f=p.labels,d=p.marker.colors||[],q=p.values,r=p._length,u=p._hasValues&&r,v;if(p.dlabel)for(f=Array(r),v=0;v<r;v++)f[v]=String(p.label0+v*p.dlabel);var w={};c=m(c["_"+p.type+"colormap"]);var y=0,D=!1;for(v=0;v<r;v++){if(u){var x=q[v];if(!l(x))continue;x=+x;if(0>x)continue}else x=1;var E=f[v];if(void 0===E||""===E)E=v;E=String(E);var B=w[E];void 0===B?(w[E]=n.length,(B=-1!==k.indexOf(E))||(y+=x),n.push({v:x,label:E,
color:c(d[v],E),i:v,pts:[v],hidden:B})):(D=!0,B=n[B],B.v+=x,B.pts.push(v),B.hidden||(y+=x),!1===B.color&&d[v]&&(B.color=c(d[v],E)))}("funnelarea"===p.type?D:p.sort)&&n.sort(function(t,G){return G.v-t.v});n[0]&&(n[0].vTotal=y);return n},crossTraceCalc:function(k,p){(p=(p||{}).type)||(p="pie");var n=k._fullLayout;k=k.calcdata;var c=n[p+"colorway"],f=n["_"+p+"colormap"];n["extend"+p+"colors"]&&(c=h(c,g));for(var d=n=0;d<k.length;d++){var q=k[d];if(q[0].trace.type===p)for(var r=0;r<q.length;r++){var u=
q[r];!1===u.color&&(f[u.label]?u.color=f[u.label]:(f[u.label]=u.color=c[n%c.length],n++))}}},makePullColorFn:m,generateExtendedColors:h}},{"../../components/color":615,"fast-isnumeric":241,tinycolor2:548}],1132:[function(b,F,C){function m(k,p){var n=Array.isArray(k),c=l.isArrayOrTypedArray(p);k=Math.min(n?k.length:Infinity,c?p.length:Infinity);isFinite(k)||(k=0);if(k&&c){for(var f,d=0;d<k;d++){var q=p[d];if(h(q)&&0<q){f=!0;break}}f||(k=0)}return{hasLabels:n,hasValues:c,len:k}}var h=b("fast-isnumeric"),
l=b("../../lib"),e=b("./attributes"),a=b("../../plots/domain").defaults,g=b("../bar/defaults").handleText;F.exports={handleLabelsAndValues:m,supplyDefaults:function(k,p,n,c){function f(r,u){return l.coerce(k,p,e,r,u)}n=f("labels");var d=f("values");n=m(n,d);d=n.len;p._hasLabels=n.hasLabels;p._hasValues=n.hasValues;!p._hasLabels&&p._hasValues&&(f("label0"),f("dlabel"));if(d){p._length=d;f("marker.line.width")&&f("marker.line.color");f("marker.colors");f("scalegroup");n=f("text");d=f("texttemplate");
var q;d||(q=f("textinfo",Array.isArray(n)?"text+percent":"percent"));f("hovertext");f("hovertemplate");if(d||q&&"none"!==q)q=f("textposition"),g(k,p,c,f,q,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(q)||"auto"===q||"outside"===q)&&f("automargin"),("inside"===q||"auto"===q||Array.isArray(q))&&f("insidetextorientation");a(p,c,f);q=f("hole");f("title.text")&&(n=f("title.position",q?"middle center":
"top center"),q||"middle center"!==n||(p.title.position="top center"),l.coerceFont(f,"title.font",c.font));f("sort");f("direction");f("rotation");f("pull")}else p.visible=!1}}},{"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"./attributes":1129,"fast-isnumeric":241}],1133:[function(b,F,C){var m=b("../../components/fx/helpers").appendArrayMultiPointValues;F.exports=function(h,l){var e={curveNumber:l.index,pointNumbers:h.pts,data:l._input,fullData:l,label:h.label,color:h.color,value:h.v,
percent:h.percent,text:h.text,v:h.v};1===h.pts.length&&(e.pointNumber=e.i=h.pts[0]);m(e,l,h.pts);"funnelarea"===l.type&&(delete e.v,delete e.i);return e}},{"../../components/fx/helpers":651}],1134:[function(b,F,C){var m=b("../../lib");C.formatPiePercent=function(h,l){h=(100*h).toPrecision(3);-1!==h.lastIndexOf(".")&&(h=h.replace(/[.]?0+$/,""));return m.numSeparate(h,l)+"%"};C.formatPieValue=function(h,l){h=h.toPrecision(10);-1!==h.lastIndexOf(".")&&(h=h.replace(/[.]?0+$/,""));return m.numSeparate(h,
l)};C.getFirstFilled=function(h,l){if(Array.isArray(h))for(var e=0;e<l.length;e++){var a=h[l[e]];if(a||0===a||""===a)return a}};C.castOption=function(h,l){if(Array.isArray(h))return C.getFirstFilled(h,l);if(h)return h}},{"../../lib":749}],1135:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,supplyLayoutDefaults:b("./layout_defaults"),layoutAttributes:b("./layout_attributes"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,
style:b("./style"),styleOne:b("./style_one"),moduleType:"trace",name:"pie",basePlotModule:b("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1129,"./base_plot":1130,"./calc":1131,"./defaults":1132,"./layout_attributes":1136,"./layout_defaults":1137,"./plot":1138,"./style":1139,"./style_one":1140}],1136:[function(b,F,C){F.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",
dflt:!0,editType:"calc"}}},{}],1137:[function(b,F,C){var m=b("../../lib"),h=b("./layout_attributes");F.exports=function(l,e){m.coerce(l,e,h,"hiddenlabels",void 0);m.coerce(l,e,h,"piecolorway",e.colorway);m.coerce(l,e,h,"extendpiecolors",void 0)}},{"../../lib":749,"./layout_attributes":1136}],1138:[function(b,F,C){function m(U,P){U.each(function(V){var Y=x.select(this);if(V.labelExtraX||V.labelExtraY){var ba=Y.select("g.slicetext text");V.transform.targetX+=V.labelExtraX;V.transform.targetY+=V.labelExtraY;
ba.attr("transform",I.getTextTransform(V.transform));ba=V.cxFinal+V.pxmid[0];var ea="M"+ba+","+(V.cyFinal+V.pxmid[1]),ca=(V.yLabelMax-V.yLabelMin)*(0>V.pxmid[0]?-1:1)/4;if(V.labelExtraX){var ia=V.labelExtraX*V.pxmid[1]/V.pxmid[0],fa=V.yLabelMid+V.labelExtraY-(V.cyFinal+V.pxmid[1]);ea=Math.abs(ia)>Math.abs(fa)?ea+("l"+fa*V.pxmid[0]/V.pxmid[1]+","+fa+"H"+(ba+V.labelExtraX+ca)):ea+("l"+V.labelExtraX+","+ia+"v"+(fa-ia)+"h"+ca)}else ea+="V"+(V.yLabelMid+V.labelExtraY)+"h"+ca;I.ensureSingle(Y,"path","textline").call(t.stroke,
P.outsidetextfont.color).attr({"stroke-width":Math.min(2,P.outsidetextfont.size/8),d:ea,fill:"none"})}else Y.select("path.textline").remove()})}function h(U,P,V){var Y=V[0],ba=Y.trace,ea=Y.cx,ca=Y.cy;"_hasHoverLabel"in ba||(ba._hasHoverLabel=!1);"_hasHoverEvent"in ba||(ba._hasHoverEvent=!1);U.on("mouseover",function(ia){var fa=P._fullLayout,ha=P._fullData[ba.index];if(!P._dragging&&!1!==fa.hovermode){var na=ha.hoverinfo;Array.isArray(na)&&(na=B.castHoverinfo({hoverinfo:[J.castOption(na,ia.pts)],_module:ba._module},
fa,0));"all"===na&&(na="label+text+value+percent+name");if(ha.hovertemplate||"none"!==na&&"skip"!==na&&na){var pa=ia.rInscribed||0,ra=ea+ia.pxmid[0]*(1-pa),ta=ca+ia.pxmid[1]*(1-pa),oa=fa.separators,ua=[];na&&-1!==na.indexOf("label")&&ua.push(ia.label);ia.text=J.castOption(ha.hovertext||ha.text,ia.pts);if(na&&-1!==na.indexOf("text")){var ka=ia.text;I.isValidTextValue(ka)&&ua.push(ka)}ia.value=ia.v;ia.valueLabel=J.formatPieValue(ia.v,oa);na&&-1!==na.indexOf("value")&&ua.push(ia.valueLabel);ia.percent=
ia.v/Y.vTotal;ia.percentLabel=J.formatPiePercent(ia.percent,oa);na&&-1!==na.indexOf("percent")&&ua.push(ia.percentLabel);oa=ha.hoverlabel;ka=oa.font;B.loneHover({trace:ba,x0:ra-pa*Y.r,x1:ra+pa*Y.r,y:ta,text:ua.join("\x3cbr\x3e"),name:ha.hovertemplate||-1!==na.indexOf("name")?ha.name:void 0,idealAlign:0>ia.pxmid[0]?"left":"right",color:J.castOption(oa.bgcolor,ia.pts)||ia.color,borderColor:J.castOption(oa.bordercolor,ia.pts),fontFamily:J.castOption(ka.family,ia.pts),fontSize:J.castOption(ka.size,ia.pts),
fontColor:J.castOption(ka.color,ia.pts),nameLength:J.castOption(oa.namelength,ia.pts),textAlign:J.castOption(oa.align,ia.pts),hovertemplate:J.castOption(ha.hovertemplate,ia.pts),hovertemplateLabels:ia,eventData:[O(ia,ha)]},{container:fa._hoverlayer.node(),outerContainer:fa._paper.node(),gd:P});ba._hasHoverLabel=!0}ba._hasHoverEvent=!0;P.emit("plotly_hover",{points:[O(ia,ha)],event:x.event})}});U.on("mouseout",function(ia){var fa=P._fullLayout,ha=P._fullData[ba.index],na=x.select(this).datum();ba._hasHoverEvent&&
(ia.originalEvent=x.event,P.emit("plotly_unhover",{points:[O(na,ha)],event:x.event}),ba._hasHoverEvent=!1);ba._hasHoverLabel&&(B.loneUnhover(fa._hoverlayer.node()),ba._hasHoverLabel=!1)});U.on("click",function(ia){var fa=P._fullLayout;P._dragging||!1===fa.hovermode||(P._hoverdata=[O(ia,P._fullData[ba.index])],B.click(P,x.event))})}function l(U,P,V){var Y=J.castOption(U.outsidetextfont.color,P.pts)||J.castOption(U.textfont.color,P.pts)||V.color,ba=J.castOption(U.outsidetextfont.family,P.pts)||J.castOption(U.textfont.family,
P.pts)||V.family;U=J.castOption(U.outsidetextfont.size,P.pts)||J.castOption(U.textfont.size,P.pts)||V.size;return{color:Y,family:ba,size:U}}function e(U,P,V){var Y=J.castOption(U.insidetextfont.color,P.pts);!Y&&U._input.textfont&&(Y=J.castOption(U._input.textfont.color,P.pts));var ba=J.castOption(U.insidetextfont.family,P.pts)||J.castOption(U.textfont.family,P.pts)||V.family;U=J.castOption(U.insidetextfont.size,P.pts)||J.castOption(U.textfont.size,P.pts)||V.size;return{color:Y||t.contrast(P.color),
family:ba,size:U}}function a(U,P){for(var V,Y,ba=0;ba<U.length;ba++)if(V=U[ba][0],Y=V.trace,Y.title.text){var ea=Y.title.text;Y._meta&&(ea=I.templateString(ea,Y._meta));Y=G.tester.append("text").attr("data-notex",1).text(ea).call(G.font,Y.title.font).call(L.convertToTspans,P);ea=G.bBox(Y.node(),!0);V.titleBox={width:ea.width,height:ea.height};Y.remove()}}function g(U,P,V){var Y=V.r||P.rpx1,ba=P.rInscribed;if(P.startangle===P.stopangle)return{rCenter:1-ba,scale:0,rotate:0,textPosAngle:0};var ea=P.ring,
ca=1===ea&&Math.abs(P.startangle-P.stopangle)===2*Math.PI,ia=P.halfangle,fa=P.midangle;V=V.trace.insidetextorientation;var ha="horizontal"===V,na="tangential"===V,pa="radial"===V;V="auto"===V;var ra=[];if(!V){var ta=function(ka,sa){var ya=P.startangle,qa=P.stopangle;if(ya>ka&&ka>qa||ya<ka&&ka<qa)ya=Math.abs(ka-P.startangle),qa=Math.abs(ka-P.stopangle),ya=ya<qa?ya:qa,ua="tan"===sa?p(U,Y,ea,ya,0):k(U,Y,ea,ya,Math.PI/2),ua.textPosAngle=ka,ra.push(ua)},oa;if(ha||na){for(oa=4;-4<=oa;oa-=2)ta(Math.PI*oa,
"tan");for(oa=4;-4<=oa;oa-=2)ta(Math.PI*(oa+1),"tan")}if(ha||pa){for(oa=4;-4<=oa;oa-=2)ta(Math.PI*(oa+1.5),"rad");for(oa=4;-4<=oa;oa-=2)ta(Math.PI*(oa+.5),"rad")}}if(ca||V||ha){var ua={scale:ba*Y*2/Math.sqrt(U.width*U.width+U.height*U.height),rCenter:1-ba,rotate:0};ua.textPosAngle=(P.startangle+P.stopangle)/2;if(1<=ua.scale)return ua;ra.push(ua)}if(V||pa)ua=k(U,Y,ea,ia,fa),ua.textPosAngle=(P.startangle+P.stopangle)/2,ra.push(ua);if(V||na)ua=p(U,Y,ea,ia,fa),ua.textPosAngle=(P.startangle+P.stopangle)/
2,ra.push(ua);for(ia=ca=ba=0;ia<ra.length&&(fa=ra[ia].scale,ca<fa&&(ca=fa,ba=ia),V||!(1<=ca));ia++);return ra[ba]}function k(U,P,V,Y,ba){P=Math.max(0,P-2*H);var ea=U.width/U.height;V=n(ea,Y,P,V);P=V/P;return{scale:2*V/U.height,rCenter:Math.cos(P)-ea*P,rotate:(180/Math.PI*ba+720)%180-90}}function p(U,P,V,Y,ba){P=Math.max(0,P-2*H);var ea=U.height/U.width;V=n(ea,Y,P,V);P=V/P;return{scale:2*V/U.width,rCenter:Math.cos(P)-ea*P,rotate:(180/Math.PI*(ba+Math.PI/2)+720)%180-90}}function n(U,P,V,Y){P=U+1/(2*
Math.tan(P));return V*Math.min(1/(Math.sqrt(P*P+.5)+P),Y/(Math.sqrt(U*U+Y/2)+U))}function c(U,P){var V=P.pxmid[0];P=P.pxmid[1];var Y=U.width/2;U=U.height/2;0>V&&(Y*=-1);0>P&&(U*=-1);return{scale:1,rCenter:1,rotate:0,x:Y+Math.abs(U)*(0<Y?1:-1)/2,y:U/(1+V*V/(P*P)),outside:!0}}function f(U,P){var V=U.trace,Y=U.cx,ba=U.cy,ea=0;var ca=0+V.title.font.size;var ia=q(V);-1!==V.title.position.indexOf("top")?(ba-=(1+ia)*U.r,ca-=U.titleBox.height):-1!==V.title.position.indexOf("bottom")&&(ba+=(1+ia)*U.r);var fa=
U.trace.aspectratio;fa=U.r/(void 0===fa?1:fa);var ha=P.w*(V.domain.x[1]-V.domain.x[0])/2;-1!==V.title.position.indexOf("left")?(ha+=fa,Y-=(1+ia)*fa,ea+=U.titleBox.width/2):-1!==V.title.position.indexOf("center")?ha*=2:-1!==V.title.position.indexOf("right")&&(ha+=fa,Y+=(1+ia)*fa,ea-=U.titleBox.width/2);ia=ha/U.titleBox.width;U=d(U,P)/U.titleBox.height;return{x:Y,y:ba,scale:Math.min(ia,U),tx:ea,ty:ca}}function d(U,P){var V=U.trace;return Math.min(U.titleBox.height,P.h*(V.domain.y[1]-V.domain.y[0])/
2)}function q(U){var P=U.pull;if(!P)return 0;var V;if(Array.isArray(P))for(V=P=0;V<U.pull.length;V++)U.pull[V]>P&&(P=U.pull[V]);return P}function r(U,P){function V(sa,ya){return sa.pxmid[1]-ya.pxmid[1]}function Y(sa,ya){return ya.pxmid[1]-sa.pxmid[1]}function ba(sa,ya){ya||(ya={});var qa=ya.labelExtraY+(ca?ya.yLabelMax:ya.yLabelMin);ya=ca?sa.yLabelMin:sa.yLabelMax;var xa=ca?sa.yLabelMax:sa.yLabelMin,Ca=sa.cyFinal+ha(sa.px0[1],sa.px1[1]),Ja=qa-ya;0<Ja*na&&(sa.labelExtraY=Ja);if(Array.isArray(P.pull))for(qa=
0;qa<ua.length;qa++){var eb=ua[qa];eb===sa||(J.castOption(P.pull,sa.pts)||0)>=(J.castOption(P.pull,eb.pts)||0)||(0<(sa.pxmid[1]-eb.pxmid[1])*na?(Ja=eb.cyFinal+ha(eb.px0[1],eb.px1[1]),Ja=Ja-ya-sa.labelExtraY,0<Ja*na&&(sa.labelExtraY+=Ja)):0<(xa+sa.labelExtraY-Ca)*na&&(Ja=3*ra*Math.abs(qa-ua.indexOf(sa)),eb=eb.cxFinal+pa(eb.px0[0],eb.px1[0]),Ja=eb+Ja-(sa.cxFinal+sa.pxmid[0])-sa.labelExtraX,0<Ja*ra&&(sa.labelExtraX+=Ja)))}}var ea,ca,ia;for(ca=0;2>ca;ca++){var fa=ca?V:Y;var ha=ca?Math.max:Math.min;var na=
ca?1:-1;for(ea=0;2>ea;ea++){var pa=ea?Math.max:Math.min;var ra=ea?1:-1;var ta=U[ca][ea];ta.sort(fa);var oa=U[1-ca][ea];var ua=oa.concat(ta);var ka=[];for(ia=0;ia<ta.length;ia++)void 0!==ta[ia].yLabelMid&&ka.push(ta[ia]);ta=!1;for(ia=0;ca&&ia<oa.length;ia++)if(void 0!==oa[ia].yLabelMid){ta=oa[ia];break}for(ia=0;ia<ka.length;ia++)oa=ia&&ka[ia-1],ta&&!ia&&(oa=ta),ba(ka[ia],oa)}}}function u(U,P){for(var V=[],Y=0;Y<U.length;Y++){var ba=U[Y][0],ea=ba.trace,ca=ea.domain,ia=P.w*(ca.x[1]-ca.x[0]);ca=P.h*(ca.y[1]-
ca.y[0]);ea.title.text&&"middle center"!==ea.title.position&&(ca-=d(ba,P));ia/=2;var fa=ca/2;"funnelarea"!==ea.type||ea.scalegroup||(fa/=ea.aspectratio);ba.r=Math.min(ia,fa)/(1+q(ea));ba.cx=P.l+P.w*(ea.domain.x[1]+ea.domain.x[0])/2;ba.cy=P.t+P.h*(1-ea.domain.y[0])-ca/2;ea.title.text&&-1!==ea.title.position.indexOf("bottom")&&(ba.cy-=d(ba,P));ea.scalegroup&&-1===V.indexOf(ea.scalegroup)&&V.push(ea.scalegroup)}for(ea=0;ea<V.length;ea++){ca=Infinity;ia=V[ea];for(Y=0;Y<U.length;Y++)if(P=U[Y][0],ba=P.trace,
ba.scalegroup===ia){if("pie"===ba.type)var ha=P.r*P.r;else"funnelarea"===ba.type&&(1<ba.aspectratio?(ha=P.r,fa=ha/ba.aspectratio):(fa=P.r,ha=fa*ba.aspectratio),ha*=(1+ba.baseratio)/2,ha*=fa);ca=Math.min(ca,ha/P.vTotal)}for(Y=0;Y<U.length;Y++)P=U[Y][0],ba=P.trace,ba.scalegroup===ia&&(fa=ca*P.vTotal,"funnelarea"===ba.type&&(fa/=(1+ba.baseratio)/2,fa/=ba.aspectratio),P.r=Math.sqrt(fa))}}function v(U){var P=U[0],V=P.r,Y=P.trace,ba=Y.rotation*Math.PI/180,ea=2*Math.PI/P.vTotal,ca="px0",ia="px1",fa;if("counterclockwise"===
Y.direction){for(fa=0;fa<U.length&&U[fa].hidden;fa++);if(fa===U.length)return;ba+=ea*U[fa].v;ea*=-1;ca="px1";ia="px0"}var ha=w(V,ba);for(fa=0;fa<U.length;fa++){var na=U[fa];if(!na.hidden){na[ca]=ha;na.startangle=ba;ba+=ea*na.v/2;na.pxmid=w(V,ba);na.midangle=ba;ba+=ea*na.v/2;ha=w(V,ba);na.stopangle=ba;na[ia]=ha;na.largeArc=na.v>P.vTotal/2?1:0;na.halfangle=Math.PI*Math.min(na.v/P.vTotal,.5);na.ring=1-Y.hole;var pa=na;na=na.v!==P.vTotal||P.trace.hole?Math.min(1/(1+1/Math.sin(na.halfangle)),na.ring/2):
1;pa.rInscribed=na}}}function w(U,P){return[U*Math.sin(P),-U*Math.cos(P)]}function y(U,P,V){var Y=U._fullLayout,ba=V.trace,ea=ba.texttemplate,ca=ba.textinfo;if(!ea&&ca&&"none"!==ca){var ia=ca.split("+"),fa=-1!==ia.indexOf("label"),ha=-1!==ia.indexOf("text");ca=-1!==ia.indexOf("value");ia=-1!==ia.indexOf("percent");var na=Y.separators;fa=fa?[P.label]:[];ha&&(ha=J.getFirstFilled(ba.text,P.pts),Q(ha)&&fa.push(ha));ca&&fa.push(J.formatPieValue(P.v,na));ia&&fa.push(J.formatPiePercent(P.v/V.vTotal,na));
P.text=fa.join("\x3cbr\x3e")}if(ea)if(ea=I.castOption(ba,P.i,"texttemplate")){V={label:P.label,value:P.v,valueLabel:J.formatPieValue(P.v,Y.separators),percent:P.v/V.vTotal,percentLabel:J.formatPiePercent(P.v/V.vTotal,Y.separators),color:P.color,text:P.text,customdata:I.castOption(ba,P.i,"customdata")};Y=J.getFirstFilled(ba.text,P.pts);if(Q(Y)||""===Y)V.text=Y;P.text=I.texttemplateString(ea,V,U._fullLayout._d3locale,V,ba._meta||{})}else P.text=""}function D(U,P){var V=U.rotate*Math.PI/180,Y=Math.cos(V);
V=Math.sin(V);var ba=(P.left+P.right)/2;P=(P.top+P.bottom)/2;U.textX=ba*Y-P*V;U.textY=ba*V+P*Y;U.noCenter=!0}var x=b("d3"),E=b("../../plots/plots"),B=b("../../components/fx"),t=b("../../components/color"),G=b("../../components/drawing"),I=b("../../lib"),L=b("../../lib/svg_text_utils");C=b("../bar/uniform_text");var M=C.recordMinTextSize,N=C.clearMinTextSize,H=b("../bar/constants").TEXTPAD,J=b("./helpers"),O=b("./event_data"),Q=b("../../lib").isValidTextValue;F.exports={plot:function(U,P){var V=U._fullLayout,
Y=V._size;N("pie",V);a(P,U);u(P,Y);var ba=I.makeTraceGroups(V._pielayer,P,"trace").each(function(ea){var ca=x.select(this),ia=ea[0],fa=ia.trace;v(ea);ca.attr("stroke-linejoin","round");ca.each(function(){var ha=x.select(this).selectAll("g.slice").data(ea);ha.enter().append("g").classed("slice",!0);ha.exit().remove();var na=[[[],[]],[[],[]]],pa=!1;ha.each(function(ua,ka){function sa(Ea,Ia,Qa,lb){return"a"+lb*ia.r+","+lb*ia.r+" 0 "+ua.largeArc+(Qa?" 1 ":" 0 ")+lb*(Ia[0]-Ea[0])+","+lb*(Ia[1]-Ea[1])}
if(ua.hidden)x.select(this).selectAll("path,g").remove();else{ua.pointNumber=ua.i;ua.curveNumber=fa.index;na[0>ua.pxmid[1]?0:1][0>ua.pxmid[0]?0:1].push(ua);var ya=ia.cx,qa=ia.cy,xa=x.select(this),Ca=xa.selectAll("path.surface").data([ua]);Ca.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});xa.call(h,U,ea);if(fa.pull){var Ja=+J.castOption(fa.pull,ua.pts)||0;0<Ja&&(ya+=Ja*ua.pxmid[0],qa+=Ja*ua.pxmid[1])}ua.cxFinal=ya;ua.cyFinal=qa;Ja=fa.hole;if(ua.v===ia.vTotal){var eb="M"+
(ya+ua.px0[0])+","+(qa+ua.px0[1])+sa(ua.px0,ua.pxmid,!0,1)+sa(ua.pxmid,ua.px0,!0,1)+"Z";Ja?Ca.attr("d","M"+(ya+Ja*ua.px0[0])+","+(qa+Ja*ua.px0[1])+sa(ua.px0,ua.pxmid,!1,Ja)+sa(ua.pxmid,ua.px0,!1,Ja)+"Z"+eb):Ca.attr("d",eb)}else if(eb=sa(ua.px0,ua.px1,!0,1),Ja){var Ra=1-Ja;Ca.attr("d","M"+(ya+Ja*ua.px1[0])+","+(qa+Ja*ua.px1[1])+sa(ua.px1,ua.px0,!1,Ja)+"l"+Ra*ua.px0[0]+","+Ra*ua.px0[1]+eb+"Z")}else Ca.attr("d","M"+ya+","+qa+"l"+ua.px0[0]+","+ua.px0[1]+eb+"Z");y(U,ua,ia);var Wa=J.castOption(fa.textposition,
ua.pts);xa=xa.selectAll("g.slicetext").data(ua.text&&"none"!==Wa?[0]:[]);xa.enter().append("g").classed("slicetext",!0);xa.exit().remove();xa.each(function(){var Ea=I.ensureSingle(x.select(this),"text","",function(Fa){Fa.attr("data-notex",1)}),Ia=I.ensureUniformFontSize(U,"outside"===Wa?l(fa,ua,V.font):e(fa,ua,V.font));Ea.text(ua.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(G.font,Ia).call(L.convertToTspans,U);var Qa=G.bBox(Ea.node());if("outside"===Wa)var lb=c(Qa,ua);
else lb=g(Qa,ua,ia),"auto"===Wa&&1>lb.scale&&(Qa=I.ensureUniformFontSize(U,fa.outsidetextfont),Ea.call(G.font,Qa),Qa=G.bBox(Ea.node()),lb=c(Qa,ua));var hb=lb.textPosAngle;hb=void 0===hb?ua.pxmid:w(ia.r,hb);lb.targetX=ya+hb[0]*lb.rCenter+(lb.x||0);lb.targetY=qa+hb[1]*lb.rCenter+(lb.y||0);D(lb,Qa);lb.outside&&(hb=lb.targetY,ua.yLabelMin=hb-Qa.height/2,ua.yLabelMid=hb,ua.yLabelMax=hb+Qa.height/2,ua.labelExtraX=0,ua.labelExtraY=0,pa=!0);lb.fontSize=Ia.size;M(fa.type,lb,V);ea[ka].transform=lb;Ea.attr("transform",
I.getTextTransform(lb))})}});var ra=x.select(this).selectAll("g.titletext").data(fa.title.text?[0]:[]);ra.enter().append("g").classed("titletext",!0);ra.exit().remove();ra.each(function(){var ua=I.ensureSingle(x.select(this),"text","",function(sa){sa.attr("data-notex",1)}),ka=fa.title.text;fa._meta&&(ka=I.templateString(ka,fa._meta));ua.text(ka).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(G.font,fa.title.font).call(L.convertToTspans,U);ka="middle center"===fa.title.position?
{x:ia.cx,y:ia.cy,scale:ia.trace.hole*ia.r*2/Math.sqrt(ia.titleBox.width*ia.titleBox.width+ia.titleBox.height*ia.titleBox.height),tx:0,ty:-ia.titleBox.height/2+ia.trace.title.font.size}:f(ia,Y);ua.attr("transform","translate("+ka.x+","+ka.y+")"+(1>ka.scale?"scale("+ka.scale+")":"")+"translate("+ka.tx+","+ka.ty+")")});pa&&r(na,fa);m(ha,fa);if(pa&&fa.automargin){ha=G.bBox(ca.node());ra=fa.domain;var ta=(.5*Y.w*(ra.x[1]-ra.x[0])-ia.r)/Y.w,oa=(.5*Y.h*(ra.y[1]-ra.y[0])-ia.r)/Y.h;E.autoMargin(U,"pie."+fa.uid+
".automargin",{xl:ra.x[0]-ta,xr:ra.x[1]+ta,yb:ra.y[0]-oa,yt:ra.y[1]+oa,l:Math.max(ia.cx-ia.r-ha.left,0),r:Math.max(ha.right-(ia.cx+ia.r),0),b:Math.max(ha.bottom-(ia.cy+ia.r),0),t:Math.max(ia.cy-ia.r-ha.top,0),pad:5})}})});setTimeout(function(){ba.selectAll("tspan").each(function(){var ea=x.select(this);ea.attr("dy")&&ea.attr("dy",ea.attr("dy"))})},0)},formatSliceLabel:y,transformInsideText:g,determineInsideTextFont:e,positionTitleOutside:f,prerenderTitles:a,layoutAreas:u,attachFxHandlers:h,computeTransform:D}},
{"../../components/color":615,"../../components/drawing":637,"../../components/fx":655,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../bar/constants":892,"../bar/uniform_text":906,"./event_data":1133,"./helpers":1134,d3:169}],1139:[function(b,F,C){var m=b("d3"),h=b("./style_one"),l=b("../bar/uniform_text").resizeText;F.exports=function(e){var a=e._fullLayout._pielayer.selectAll(".trace");l(e,a,"pie");a.each(function(g){var k=g[0].trace;g=m.select(this);g.style({opacity:k.opacity});
g.selectAll("path.surface").each(function(p){m.select(this).call(h,p,k)})})}},{"../bar/uniform_text":906,"./style_one":1140,d3:169}],1140:[function(b,F,C){var m=b("../../components/color"),h=b("./helpers").castOption;F.exports=function(l,e,a){var g=a.marker.line;a=h(g.color,e.pts)||m.defaultLine;g=h(g.width,e.pts)||0;l.style("stroke-width",g).call(m.fill,e.color).call(m.stroke,a)}},{"../../components/color":615,"./helpers":1134}],1141:[function(b,F,C){b=b("../scatter/attributes");F.exports={x:b.x,
y:b.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:b.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},
border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1155}],1142:[function(b,F,C){function m(g,k){this.scene=g;this.uid=k;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions=
{positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=h(g.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var h=b("gl-pointcloud2d"),l=b("../../lib/str2rgbarray"),e=b("../../plots/cartesian/autorange").findExtremes,a=b("../scatter/get_trace_color");b=m.prototype;b.handlePick=function(g){var k=this.idToIndex[g.pointId];return{trace:this,dataCoord:g.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*
k],this.pickXYData[2*k+1]]:[this.pickXData[k],this.pickYData[k]],textLabel:Array.isArray(this.textLabels)?this.textLabels[k]:this.textLabels,color:this.color,name:this.name,pointIndex:k,hoverinfo:this.hoverinfo}};b.update=function(g){this.index=g.index;this.textLabels=g.text;this.name=g.name;this.hoverinfo=g.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.updateFast(g);this.color=a(g,{})};b.updateFast=function(g){var k=this.xData=this.pickXData=g.x,p=this.yData=this.pickYData=g.y,
n=this.pickXYData=g.xy,c=g.xbounds&&g.ybounds,f=g.indices,d=this.bounds,q;if(n){var r=n;n=n.length>>>1;if(c)d[0]=g.xbounds[0],d[2]=g.xbounds[1],d[1]=g.ybounds[0],d[3]=g.ybounds[1];else for(q=0;q<n;q++){c=r[2*q];var u=r[2*q+1];c<d[0]&&(d[0]=c);c>d[2]&&(d[2]=c);u<d[1]&&(d[1]=u);u>d[3]&&(d[3]=u)}if(!f)for(f=new Int32Array(n),q=0;q<n;q++)f[q]=q}else for(n=k.length,r=new Float32Array(2*n),f=new Int32Array(n),q=0;q<n;q++)c=k[q],u=p[q],f[q]=q,r[2*q]=c,r[2*q+1]=u,c<d[0]&&(d[0]=c),c>d[2]&&(d[2]=c),u<d[1]&&
(d[1]=u),u>d[3]&&(d[3]=u);this.idToIndex=f;this.pointcloudOptions.idToIndex=f;this.pointcloudOptions.positions=r;n=l(g.marker.color);r=l(g.marker.border.color);f=g.opacity*g.marker.opacity;n[3]*=f;this.pointcloudOptions.color=n;n=g.marker.blend;null===n&&(n=100>k.length||100>p.length);this.pointcloudOptions.blend=n;r[3]*=f;this.pointcloudOptions.borderColor=r;r=Math.max(g.marker.sizemax,g.marker.sizemin);this.pointcloudOptions.sizeMin=g.marker.sizemin;this.pointcloudOptions.sizeMax=r;this.pointcloudOptions.areaRatio=
g.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);k=this.scene.xaxis;p=this.scene.yaxis;r=r/2||.5;g._extremes[k._id]=e(k,[d[0],d[2]],{ppad:r});g._extremes[p._id]=e(p,[d[1],d[3]],{ppad:r})};b.dispose=function(){this.pointcloud.dispose()};F.exports=function(g,k){g=new m(g,k.uid);g.update(k);return g}},{"../../lib/str2rgbarray":772,"../../plots/cartesian/autorange":796,"../scatter/get_trace_color":1165,"gl-pointcloud2d":303}],1143:[function(b,F,C){var m=b("../../lib"),h=b("./attributes");
F.exports=function(l,e,a){function g(k,p){return m.coerce(l,e,h,k,p)}g("x");g("y");g("xbounds");g("ybounds");l.xy&&l.xy instanceof Float32Array&&(e.xy=l.xy);l.indices&&l.indices instanceof Int32Array&&(e.indices=l.indices);g("text");g("marker.color",a);g("marker.opacity");g("marker.blend");g("marker.sizemin");g("marker.sizemax");g("marker.border.color",a);g("marker.border.arearatio");e._length=null}},{"../../lib":749,"./attributes":1141}],1144:[function(b,F,C){F.exports={attributes:b("./attributes"),
supplyDefaults:b("./defaults"),calc:b("../scatter3d/calc"),plot:b("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":837,"../scatter3d/calc":1183,"./attributes":1141,"./convert":1142,"./defaults":1143}],1145:[function(b,F,C){C=b("../../plots/font_attributes");var m=b("../../plots/attributes"),h=b("../../components/color/attributes"),l=b("../../components/fx/attributes"),e=b("../../plots/domain").attributes,
a=b("../../plots/template_attributes").hovertemplateAttrs,g=b("../../components/colorscale/attributes"),k=b("../../plot_api/plot_template").templatedArray,p=b("../../lib/extend").extendFlat,n=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");(F.exports=n({hoverinfo:p({},m.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:l.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",
dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:C({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:h.defaultLine,
arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:l.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:h.defaultLine,arrayOk:!0},width:{valType:"number",
min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:l.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:k("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:p(g().colorscale,
{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":614,"../../components/colorscale/attributes":622,"../../components/fx/attributes":646,"../../constants/docs":719,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/font_attributes":825,"../../plots/template_attributes":875}],1146:[function(b,F,C){function m(c,f){var d=c._fullData[f],
q=c._fullLayout,r=q.dragmode,u=d._bgRect;if("pan"!==r&&"zoom"!==r){a(u,"pan"===q.dragmode?"move":"crosshair");q={_id:"x",c2p:p.identity,_offset:d._sankey.translateX,_length:d._sankey.width};d={_id:"y",c2p:p.identity,_offset:d._sankey.translateY,_length:d._sankey.height};var v={gd:c,element:u.node(),plotinfo:{id:f,xaxis:q,yaxis:d,fillRangeItems:p.noop},subplot:f,xaxes:[q],yaxes:[d],doneFnCompleted:function(w){for(var y=c._fullData[f],D=y.node.groups.slice(),x=[],E=0;E<w.length;E++){a:{var B=y._sankey.graph.nodes;
for(var t=0;t<B.length;t++)if(B[t].pointNumber===w[E].pointNumber){B=B[t];break a}B=void 0}if(B)if(B.group){for(t=0;t<B.childrenNodes.length;t++)x.push(B.childrenNodes[t].pointNumber);D[B.pointNumber-y.node._count]=!1}else x.push(B.pointNumber)}w=D.filter(Boolean).concat([x]);n.call("_guiRestyle",c,{"node.groups":[w]},f)},prepFn:function(w,y,D){k(w,y,D,v,r)}};g.init(v)}}F=b("../../plot_api/edit_types").overrideAll;var h=b("../../plots/get_data").getModuleCalcData,l=b("./plot"),e=b("../../components/fx/layout_attributes"),
a=b("../../lib/setcursor"),g=b("../../components/dragelement"),k=b("../../plots/cartesian/select").prepSelect,p=b("../../lib"),n=b("../../registry");C.name="sankey";C.baseLayoutAttrOverrides=F({hoverlabel:e.hoverlabel},"plot","nested");C.plot=function(c){var f=h(c.calcdata,"sankey")[0];l(c,f);C.updateFx(c)};C.clean=function(c,f,d,q){c=q._has&&q._has("sankey");f=f._has&&f._has("sankey");c&&!f&&(q._paperdiv.selectAll(".sankey").remove(),q._paperdiv.selectAll(".bgsankey").remove())};C.updateFx=function(c){for(var f=
0;f<c._fullData.length;f++)m(c,f)}},{"../../components/dragelement":634,"../../components/fx/layout_attributes":656,"../../lib":749,"../../lib/setcursor":769,"../../plot_api/edit_types":780,"../../plots/cartesian/select":816,"../../plots/get_data":834,"../../registry":880,"./plot":1151}],1147:[function(b,F,C){function m(p,n,c){for(var f=l.init2dArray(p,0),d=0;d<Math.min(n.length,c.length);d++)if(l.isIndex(n[d],p)&&l.isIndex(c[d],p)){if(n[d]===c[d])return!0;f[n[d]].push(c[d])}return h(f).components.some(function(q){return 1<
q.length})}var h=b("strongly-connected-components"),l=b("../../lib"),e=b("../../lib/gup").wrap,a=l.isArrayOrTypedArray,g=l.isIndex,k=b("../../components/colorscale");F.exports=function(p,n){var c=n.node,f=n.link;p=[];var d=a(f.color),q=a(f.customdata),r={},u={},v=f.colorscales.length,w;for(w=0;w<v;w++){var y=f.colorscales[w],D=k.extractScale(y,{cLetter:"c"});D=k.makeColorScaleFunc(D);u[y.label]=D}for(w=v=0;w<f.value.length;w++)f.source[w]>v&&(v=f.source[w]),f.target[w]>v&&(v=f.target[w]);v+=1;n.node._count=
v;n=n.node.groups;y={};for(w=0;w<n.length;w++){var x=n[w];for(D=0;D<x.length;D++){var E=x[D],B=v+w;y.hasOwnProperty(E)?l.warn("Node "+E+" is already part of a group."):y[E]=B}}D=[];x=[];for(w=0;w<f.value.length;w++){E=f.value[w];B=f.source[w];var t=f.target[w];if(0<E&&g(B,v)&&g(t,v)&&(!y.hasOwnProperty(B)||!y.hasOwnProperty(t)||y[B]!==y[t])){y.hasOwnProperty(t)&&(t=y[t]);y.hasOwnProperty(B)&&(B=y[B]);B=+B;t=+t;r[B]=r[t]=!0;var G="";f.label&&f.label[w]&&(G=f.label[w]);var I=null;G&&u.hasOwnProperty(G)&&
(I=u[G]);p.push({pointNumber:w,label:G,color:d?f.color[w]:f.color,customdata:q?f.customdata[w]:f.customdata,concentrationscale:I,source:B,target:t,value:+E});D.push(B);x.push(t)}}f=v+n.length;q=a(c.color);u=a(c.customdata);d=[];for(w=0;w<f;w++)r[w]&&d.push({group:w>v-1,childrenNodes:[],pointNumber:w,label:c.label[w],color:q?c.color[w]:c.color,customdata:u?c.customdata[w]:c.customdata});c=!1;m(f,D,x)&&(c=!0);return e({circular:c,_nodes:d,_links:p,_groups:n,_groupLookup:y})}},{"../../components/colorscale":627,
"../../lib":749,"../../lib/gup":746,"strongly-connected-components":541}],1148:[function(b,F,C){F.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",
nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1149:[function(b,F,C){function m(c,f){function d(q,r){return h.coerce(c,f,l.link.colorscales,q,r)}d("label");d("cmin");d("cmax");d("colorscale")}var h=b("../../lib"),l=b("./attributes"),e=b("../../components/color"),a=b("tinycolor2"),g=b("../../plots/domain").defaults,k=b("../../components/fx/hoverlabel_defaults"),p=b("../../plot_api/plot_template"),n=b("../../plots/array_container_defaults");F.exports=function(c,f,d,q){function r(t,
G){return h.coerce(c,f,l,t,G)}function u(t,G){return h.coerce(w,y,l.node,t,G)}function v(t,G){return h.coerce(x,E,l.link,t,G)}d=h.extendDeep(q.hoverlabel,c.hoverlabel);var w=c.node,y=p.newContainer(f,"node");u("label");u("groups");u("x");u("y");u("pad");u("thickness");u("line.color");u("line.width");u("hoverinfo",c.hoverinfo);k(w,y,u,d);u("hovertemplate");var D=q.colorway;u("color",y.label.map(function(t,G){return e.addOpacity(D[G%D.length],.8)}));u("customdata");var x=c.link||{},E=p.newContainer(f,
"link");v("label");v("source");v("target");v("value");v("line.color");v("line.width");v("hoverinfo",c.hoverinfo);k(x,E,v,d);v("hovertemplate");d=.333>a(q.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";v("color",h.repeat(d,E.value.length));v("customdata");n(x,E,{name:"colorscales",handleItemDefaults:m});g(f,q,r);r("orientation");r("valueformat");r("valuesuffix");var B;y.x.length&&y.y.length&&(B="freeform");r("arrangement",B);h.coerceFont(r,"textfont",h.extendFlat({},
q.font));f._length=null}},{"../../components/color":615,"../../components/fx/hoverlabel_defaults":653,"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../../plots/domain":824,"./attributes":1145,tinycolor2:548}],1150:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"sankey",basePlotModule:b("./base_plot"),selectPoints:b("./select.js"),categories:["noOpacity"],
meta:{}}},{"./attributes":1145,"./base_plot":1146,"./calc":1147,"./defaults":1149,"./plot":1151,"./select.js":1153}],1151:[function(b,F,C){function m(D){return""!==D}function h(D,x){return D.filter(function(E){return E.key===x.traceId})}function l(D,x){d.select(D).select("path").style("fill-opacity",x);d.select(D).select("rect").style("fill-opacity",x)}function e(D){d.select(D).select("text.name").style("fill","black")}function a(D){return function(x){return-1!==D.node.sourceLinks.indexOf(x.link)||
-1!==D.node.targetLinks.indexOf(x.link)}}function g(D){return function(x){return-1!==x.node.sourceLinks.indexOf(D.link)||-1!==x.node.targetLinks.indexOf(D.link)}}function k(D,x,E){x&&E&&h(E,x).selectAll("."+w.sankeyLink).filter(a(x)).call(n.bind(0,x,E,!1))}function p(D,x,E){x&&E&&h(E,x).selectAll("."+w.sankeyLink).filter(a(x)).call(c.bind(0,x,E,!1))}function n(D,x,E,B){var t=B.datum().link.label;B.style("fill-opacity",function(G){if(!G.link.concentrationscale)return.4});t&&h(x,D).selectAll("."+w.sankeyLink).filter(function(G){return G.link.label===
t}).style("fill-opacity",function(G){if(!G.link.concentrationscale)return.4});E&&h(x,D).selectAll("."+w.sankeyNode).filter(g(D)).call(k)}function c(D,x,E,B){var t=B.datum().link.label;B.style("fill-opacity",function(G){return G.tinyColorAlpha});t&&h(x,D).selectAll("."+w.sankeyLink).filter(function(G){return G.link.label===t}).style("fill-opacity",function(G){return G.tinyColorAlpha});E&&h(x,D).selectAll(w.sankeyNode).filter(g(D)).call(p)}function f(D,x){D=v.nestedProperty(D.hoverlabel||{},x).get();
return Array.isArray(D)?!1:D}var d=b("d3"),q=b("./render"),r=b("../../components/fx"),u=b("../../components/color"),v=b("../../lib"),w=b("./constants").cn,y=v._;F.exports=function(D,x){for(var E=D._fullLayout,B=E._paper,t=E._size,G=0;G<D._fullData.length;G++)if(D._fullData[G].visible&&D._fullData[G].type===w.sankey&&!D._fullData[G]._viewInitial){var I=D._fullData[G].node;D._fullData[G]._viewInitial={node:{groups:I.groups.slice(),x:I.x.slice(),y:I.y.slice()}}}var L=y(D,"source:")+" ",M=y(D,"target:")+
" ",N=y(D,"concentration:")+" ",H=y(D,"incoming flow count:")+" ",J=y(D,"outgoing flow count:")+" ";q(D,B,x,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},{linkEvents:{hover:function(O,Q,U){!1!==D._fullLayout.hovermode&&(d.select(O).call(n.bind(0,Q,U,!0)),"skip"!==Q.link.trace.link.hoverinfo&&(Q.link.fullData=Q.link.trace,D.emit("plotly_hover",{event:d.event,points:[Q.link]})))},follow:function(O,Q){function U(ia){if(ia.circular){var fa=(ia.circularPathData.leftInnerExtent+ia.circularPathData.rightInnerExtent)/
2;var ha=ia.circularPathData.verticalFullExtent}else fa=(ia.source.x1+ia.target.x0)/2,ha=(ia.y0+ia.y1)/2;fa=[fa,ha];"v"===ia.trace.orientation&&fa.reverse();fa[0]+=Q.parent.translateX;fa[1]+=Q.parent.translateY;return fa}if(!1!==D._fullLayout.hovermode&&(O=Q.link.trace.link,"none"!==O.hoverinfo&&"skip"!==O.hoverinfo)){for(var P=[],V=0,Y=0;Y<Q.flow.links.length;Y++){var ba=Q.flow.links[Y];if("closest"!==D._fullLayout.hovermode||Q.link.pointNumber===ba.pointNumber){Q.link.pointNumber===ba.pointNumber&&
(V=Y);ba.fullData=ba.trace;O=Q.link.trace.link;var ea=U(ba),ca={valueLabel:d.format(Q.valueFormat)(ba.value)+Q.valueSuffix};P.push({x:ea[0],y:ea[1],name:ca.valueLabel,text:[ba.label||"",L+ba.source.label,M+ba.target.label,ba.concentrationscale?N+d.format("%0.2f")(ba.flow.labelConcentration):""].filter(m).join("\x3cbr\x3e"),color:f(O,"bgcolor")||u.addOpacity(ba.color,1),borderColor:f(O,"bordercolor"),fontFamily:f(O,"font.family"),fontSize:f(O,"font.size"),fontColor:f(O,"font.color"),nameLength:f(O,
"namelength"),textAlign:f(O,"align"),idealAlign:d.event.x<ea[0]?"right":"left",hovertemplate:O.hovertemplate,hovertemplateLabels:ca,eventData:[ba]})}}r.loneHover(P,{container:E._hoverlayer.node(),outerContainer:E._paper.node(),gd:D,anchorIndex:V}).each(function(){Q.link.concentrationscale||l(this,.65);e(this)})}},unhover:function(O,Q,U){!1!==D._fullLayout.hovermode&&(d.select(O).call(c.bind(0,Q,U,!0)),"skip"!==Q.link.trace.link.hoverinfo&&(Q.link.fullData=Q.link.trace,D.emit("plotly_unhover",{event:d.event,
points:[Q.link]})),r.loneUnhover(E._hoverlayer.node()))},select:function(O,Q){O=Q.link;O.originalEvent=d.event;D._hoverdata=[O];r.click(D,{target:!0})}},nodeEvents:{hover:function(O,Q,U){!1!==D._fullLayout.hovermode&&(d.select(O).call(k,Q,U),"skip"!==Q.node.trace.node.hoverinfo&&(Q.node.fullData=Q.node.trace,D.emit("plotly_hover",{event:d.event,points:[Q.node]})))},follow:function(O,Q){if(!1!==D._fullLayout.hovermode){var U=Q.node.trace.node;if("none"!==U.hoverinfo&&"skip"!==U.hoverinfo){O=d.select(O).select("."+
w.nodeRect);var P=D._fullLayout._paperdiv.node().getBoundingClientRect(),V=O.node().getBoundingClientRect();O=V.left-2-P.left;var Y=V.right+2-P.left;P=V.top+V.height/4-P.top;V={valueLabel:d.format(Q.valueFormat)(Q.node.value)+Q.valueSuffix};Q.node.fullData=Q.node.trace;Q=r.loneHover({x0:O,x1:Y,y:P,name:d.format(Q.valueFormat)(Q.node.value)+Q.valueSuffix,text:[Q.node.label,H+Q.node.targetLinks.length,J+Q.node.sourceLinks.length].filter(m).join("\x3cbr\x3e"),color:f(U,"bgcolor")||Q.tinyColorHue,borderColor:f(U,
"bordercolor"),fontFamily:f(U,"font.family"),fontSize:f(U,"font.size"),fontColor:f(U,"font.color"),nameLength:f(U,"namelength"),textAlign:f(U,"align"),idealAlign:"left",hovertemplate:U.hovertemplate,hovertemplateLabels:V,eventData:[Q.node]},{container:E._hoverlayer.node(),outerContainer:E._paper.node(),gd:D});l(Q,.85);e(Q)}}},unhover:function(O,Q,U){!1!==D._fullLayout.hovermode&&(d.select(O).call(p,Q,U),"skip"!==Q.node.trace.node.hoverinfo&&(Q.node.fullData=Q.node.trace,D.emit("plotly_unhover",{event:d.event,
points:[Q.node]})),r.loneUnhover(E._hoverlayer.node()))},select:function(O,Q,U){var P=Q.node;P.originalEvent=d.event;D._hoverdata=[P];d.select(O).call(p,Q,U);r.click(D,{target:!0})}}})}},{"../../components/color":615,"../../components/fx":655,"../../lib":749,"./constants":1148,"./render":1152,d3:169}],1152:[function(b,F,C){function m(ca,ia,fa){function ha(Qa){Qa.forEach(function(lb){var hb=0;var Fa=lb.length,La;lb.sort(function(fb,bb){return fb.y0-bb.y0});for(La=0;La<Fa;++La){var Oa=lb[La];Oa.y0>=
hb||(hb-=Oa.y0,1E-6<hb&&(Oa.y0+=hb,Oa.y1+=hb));hb=Oa.y1+oa}})}function na(Qa){var lb=Qa.map(function(Pa,Ta){return{x0:Pa.x0,index:Ta}}).sort(function(Pa,Ta){return Pa.x0-Ta.x0}),hb=[],Fa=-1,La=-Infinity;for(eb=0;eb<lb.length;eb++){var Oa=Qa[lb[eb].index];if(Oa.x0>La+ua){Fa+=1;var fb=Oa.x0}La=Oa.x0;hb[Fa]||(hb[Fa]=[]);hb[Fa].push(Oa);var bb=fb-Oa.x0;Oa.x0+=bb;Oa.x1+=bb}return hb}var pa=Y(ia);ia=pa.trace;var ra=ia.domain,ta="h"===ia.orientation,oa=ia.node.pad,ua=ia.node.thickness,ka=ca.width*(ra.x[1]-
ra.x[0]),sa=ca.height*(ra.y[1]-ra.y[0]),ya=pa._nodes,qa=pa._links,xa=pa.circular;var Ca=xa?O.sankeyCircular().circularLinkGap(0):J.sankey();Ca.iterations(I.sankeyIterations).size(ta?[ka,sa]:[sa,ka]).nodeWidth(ua).nodePadding(oa).nodeId(function(Qa){return Qa.pointNumber}).nodes(ya).links(qa);var Ja=Ca();Ca.nodePadding()<oa&&U.warn("node.pad was reduced to ",Ca.nodePadding()," to fit within the figure.");var eb,Ra,Wa;for(Ia in pa._groupLookup){ya=parseInt(pa._groupLookup[Ia]);for(eb=0;eb<Ja.nodes.length;eb++)if(Ja.nodes[eb].pointNumber===
ya){var Ea=Ja.nodes[eb];break}Ea&&(ya={pointNumber:parseInt(Ia),x0:Ea.x0,x1:Ea.x1,y0:Ea.y0,y1:Ea.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},Ja.nodes.unshift(ya),Ea.childrenNodes.unshift(ya))}(function(){for(eb=0;eb<Ja.nodes.length;eb++){var Qa=Ja.nodes[eb],lb={};for(Ra=0;Ra<Qa.targetLinks.length;Ra++){var hb=Qa.targetLinks[Ra];var Fa=hb.source.pointNumber+":"+hb.target.pointNumber;lb.hasOwnProperty(Fa)||(lb[Fa]=[]);lb[Fa].push(hb)}var La=Object.keys(lb);for(Ra=0;Ra<La.length;Ra++){Fa=La[Ra];
Fa=lb[Fa];var Oa=0,fb={};for(Wa=0;Wa<Fa.length;Wa++)hb=Fa[Wa],fb[hb.label]||(fb[hb.label]=0),fb[hb.label]+=hb.value,Oa+=hb.value;for(Wa=0;Wa<Fa.length;Wa++)hb=Fa[Wa],hb.flow={value:Oa,labelConcentration:fb[hb.label]/Oa,concentration:hb.value/Oa,links:Fa},hb.concentrationscale&&(hb.color=M(hb.concentrationscale(hb.flow.labelConcentration)))}for(Ra=lb=0;Ra<Qa.sourceLinks.length;Ra++)lb+=Qa.sourceLinks[Ra].value;for(Ra=0;Ra<Qa.sourceLinks.length;Ra++)hb=Qa.sourceLinks[Ra],hb.concentrationOut=hb.value/
lb;for(Ra=lb=0;Ra<Qa.targetLinks.length;Ra++)lb+=Qa.targetLinks[Ra].value;for(Ra=0;Ra<Qa.targetLinks.length;Ra++)hb=Qa.targetLinks[Ra],hb.concenrationIn=hb.value/lb}})();if(ia.node.x.length&&ia.node.y.length){for(eb=0;eb<Math.min(ia.node.x.length,ia.node.y.length,Ja.nodes.length);eb++)if(ia.node.x[eb]&&ia.node.y[eb]){var Ia=[ia.node.x[eb]*ka,ia.node.y[eb]*sa];Ja.nodes[eb].x0=Ia[0]-ua/2;Ja.nodes[eb].x1=Ia[0]+ua/2;Ea=Ja.nodes[eb].y1-Ja.nodes[eb].y0;Ja.nodes[eb].y0=Ia[1]-Ea/2;Ja.nodes[eb].y1=Ia[1]+Ea/
2}"snap"===ia.arrangement&&(ya=Ja.nodes,Ia=na(ya),ha(Ia));Ca.update(Ja)}return{circular:xa,key:fa,trace:ia,guid:U.randstr(),horizontal:ta,width:ka,height:sa,nodePad:ia.node.pad,nodeLineColor:ia.node.line.color,nodeLineWidth:ia.node.line.width,linkLineColor:ia.link.line.color,linkLineWidth:ia.link.line.width,valueFormat:ia.valueformat,valueSuffix:ia.valuesuffix,textFont:ia.textfont,translateX:ra.x[0]*ca.width+ca.margin.l,translateY:ca.height-ra.y[1]*ca.height+ca.margin.t,dragParallel:ta?sa:ka,dragPerpendicular:ta?
ka:sa,arrangement:ia.arrangement,sankey:Ca,graph:Ja,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function h(ca,ia,fa){var ha=M(ia.color),na=ia.source.label+"|"+ia.target.label;ia.trace=ca.trace;ia.curveNumber=ca.trace.index;return{circular:ca.circular,key:na+"__"+fa,traceId:ca.key,pointNumber:ia.pointNumber,link:ia,tinyColorHue:N.tinyRGB(ha),tinyColorAlpha:ha.getAlpha(),linkPath:l,linkLineColor:ca.linkLineColor,linkLineWidth:ca.linkLineWidth,valueFormat:ca.valueFormat,valueSuffix:ca.valueSuffix,
sankey:ca.sankey,parent:ca,interactionState:ca.interactionState,flow:ia.flow}}function l(){return function(ca){if(ca.link.circular){var ia=ca.link,fa=ia.width/2,ha=ia.circularPathData;return"top"===ia.circularLinkType?"M "+ha.targetX+" "+(ha.targetY+fa)+" L"+ha.rightInnerExtent+" "+(ha.targetY+fa)+"A"+(ha.rightLargeArcRadius+fa)+" "+(ha.rightSmallArcRadius+fa)+" 0 0 1 "+(ha.rightFullExtent-fa)+" "+(ha.targetY-ha.rightSmallArcRadius)+"L"+(ha.rightFullExtent-fa)+" "+ha.verticalRightInnerExtent+"A"+
(ha.rightLargeArcRadius+fa)+" "+(ha.rightLargeArcRadius+fa)+" 0 0 1 "+ha.rightInnerExtent+" "+(ha.verticalFullExtent-fa)+"L"+ha.leftInnerExtent+" "+(ha.verticalFullExtent-fa)+"A"+(ha.leftLargeArcRadius+fa)+" "+(ha.leftLargeArcRadius+fa)+" 0 0 1 "+(ha.leftFullExtent+fa)+" "+ha.verticalLeftInnerExtent+"L"+(ha.leftFullExtent+fa)+" "+(ha.sourceY-ha.leftSmallArcRadius)+"A"+(ha.leftLargeArcRadius+fa)+" "+(ha.leftSmallArcRadius+fa)+" 0 0 1 "+ha.leftInnerExtent+" "+(ha.sourceY+fa)+"L"+ha.sourceX+" "+(ha.sourceY+
fa)+"L"+ha.sourceX+" "+(ha.sourceY-fa)+"L"+ha.leftInnerExtent+" "+(ha.sourceY-fa)+"A"+(ha.leftLargeArcRadius-fa)+" "+(ha.leftSmallArcRadius-fa)+" 0 0 0 "+(ha.leftFullExtent-fa)+" "+(ha.sourceY-ha.leftSmallArcRadius)+"L"+(ha.leftFullExtent-fa)+" "+ha.verticalLeftInnerExtent+"A"+(ha.leftLargeArcRadius-fa)+" "+(ha.leftLargeArcRadius-fa)+" 0 0 0 "+ha.leftInnerExtent+" "+(ha.verticalFullExtent+fa)+"L"+ha.rightInnerExtent+" "+(ha.verticalFullExtent+fa)+"A"+(ha.rightLargeArcRadius-fa)+" "+(ha.rightLargeArcRadius-
fa)+" 0 0 0 "+(ha.rightFullExtent+fa)+" "+ha.verticalRightInnerExtent+"L"+(ha.rightFullExtent+fa)+" "+(ha.targetY-ha.rightSmallArcRadius)+"A"+(ha.rightLargeArcRadius-fa)+" "+(ha.rightSmallArcRadius-fa)+" 0 0 0 "+ha.rightInnerExtent+" "+(ha.targetY-fa)+"L"+ha.targetX+" "+(ha.targetY-fa)+"Z":"M "+ha.targetX+" "+(ha.targetY-fa)+" L"+ha.rightInnerExtent+" "+(ha.targetY-fa)+"A"+(ha.rightLargeArcRadius+fa)+" "+(ha.rightSmallArcRadius+fa)+" 0 0 0 "+(ha.rightFullExtent-fa)+" "+(ha.targetY+ha.rightSmallArcRadius)+
"L"+(ha.rightFullExtent-fa)+" "+ha.verticalRightInnerExtent+"A"+(ha.rightLargeArcRadius+fa)+" "+(ha.rightLargeArcRadius+fa)+" 0 0 0 "+ha.rightInnerExtent+" "+(ha.verticalFullExtent+fa)+"L"+ha.leftInnerExtent+" "+(ha.verticalFullExtent+fa)+"A"+(ha.leftLargeArcRadius+fa)+" "+(ha.leftLargeArcRadius+fa)+" 0 0 0 "+(ha.leftFullExtent+fa)+" "+ha.verticalLeftInnerExtent+"L"+(ha.leftFullExtent+fa)+" "+(ha.sourceY+ha.leftSmallArcRadius)+"A"+(ha.leftLargeArcRadius+fa)+" "+(ha.leftSmallArcRadius+fa)+" 0 0 0 "+
ha.leftInnerExtent+" "+(ha.sourceY-fa)+"L"+ha.sourceX+" "+(ha.sourceY-fa)+"L"+ha.sourceX+" "+(ha.sourceY+fa)+"L"+ha.leftInnerExtent+" "+(ha.sourceY+fa)+"A"+(ha.leftLargeArcRadius-fa)+" "+(ha.leftSmallArcRadius-fa)+" 0 0 1 "+(ha.leftFullExtent-fa)+" "+(ha.sourceY+ha.leftSmallArcRadius)+"L"+(ha.leftFullExtent-fa)+" "+ha.verticalLeftInnerExtent+"A"+(ha.leftLargeArcRadius-fa)+" "+(ha.leftLargeArcRadius-fa)+" 0 0 1 "+ha.leftInnerExtent+" "+(ha.verticalFullExtent-fa)+"L"+ha.rightInnerExtent+" "+(ha.verticalFullExtent-
fa)+"A"+(ha.rightLargeArcRadius-fa)+" "+(ha.rightLargeArcRadius-fa)+" 0 0 1 "+(ha.rightFullExtent+fa)+" "+ha.verticalRightInnerExtent+"L"+(ha.rightFullExtent+fa)+" "+(ha.targetY+ha.rightSmallArcRadius)+"A"+(ha.rightLargeArcRadius-fa)+" "+(ha.rightSmallArcRadius-fa)+" 0 0 1 "+ha.rightInnerExtent+" "+(ha.targetY+fa)+"L"+ha.targetX+" "+(ha.targetY+fa)+"Z"}ia=ca.link.source.x1;fa=ca.link.target.x0;var na=ba(ia,fa);ha=na(.5);na=na(.5);var pa=ca.link.y0-ca.link.width/2,ra=ca.link.y0+ca.link.width/2,ta=
ca.link.y1-ca.link.width/2;ca=ca.link.y1+ca.link.width/2;return"M"+ia+","+pa+"C"+ha+","+pa+" "+na+","+ta+" "+fa+","+ta+"L"+fa+","+ca+"C"+na+","+ca+" "+ha+","+ra+" "+ia+","+ra+"Z"}}function e(ca,ia){var fa=M(ia.color),ha=I.nodePadAcross,na=ca.nodePad/2;ia.dx=ia.x1-ia.x0;ia.dy=ia.y1-ia.y0;var pa=ia.dx,ra=Math.max(.5,ia.dy),ta="node_"+ia.pointNumber;ia.group&&(ta=U.randstr());ia.trace=ca.trace;ia.curveNumber=ca.trace.index;return{index:ia.pointNumber,key:ta,partOfGroup:ia.partOfGroup||!1,group:ia.group,
traceId:ca.key,trace:ca.trace,node:ia,nodePad:ca.nodePad,nodeLineColor:ca.nodeLineColor,nodeLineWidth:ca.nodeLineWidth,textFont:ca.textFont,size:ca.horizontal?ca.height:ca.width,visibleWidth:Math.ceil(pa),visibleHeight:ra,zoneX:-ha,zoneY:-na,zoneWidth:pa+2*ha,zoneHeight:ra+2*na,labelY:ca.horizontal?ia.dy/2+1:ia.dx/2+1,left:1===ia.originalLayer,sizeAcross:ca.width,forceLayouts:ca.forceLayouts,horizontal:ca.horizontal,darkBackground:128>=fa.getBrightness(),tinyColorHue:N.tinyRGB(fa),tinyColorAlpha:fa.getAlpha(),
valueFormat:ca.valueFormat,valueSuffix:ca.valueSuffix,sankey:ca.sankey,graph:ca.graph,arrangement:ca.arrangement,uniqueNodeLabelPathId:[ca.guid,ca.key,ta].join("_"),interactionState:ca.interactionState,figure:ca}}function a(ca){ca.attr("transform",function(ia){return"translate("+ia.node.x0.toFixed(3)+", "+ia.node.y0.toFixed(3)+")"})}function g(ca){ca.call(a)}function k(ca){ca.attr("width",function(ia){return ia.node.x1-ia.node.x0}).attr("height",function(ia){return ia.visibleHeight})}function p(ca){return"translate("+
ca.translateX+","+ca.translateY+")"+(ca.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function n(ca){return"translate("+(ca.horizontal?0:ca.labelY)+" "+(ca.horizontal?ca.labelY:0)+")"}function c(ca){return L.svg.line()([[ca.horizontal?ca.left?-ca.sizeAcross:ca.visibleWidth+I.nodeTextOffsetHorizontal:I.nodeTextOffsetHorizontal,0],[ca.horizontal?ca.left?-I.nodeTextOffsetHorizontal:ca.sizeAcross:ca.visibleHeight-I.nodeTextOffsetHorizontal,0]])}function f(ca){return ca.horizontal?"matrix(1 0 0 1 0 0)":
"matrix(0 1 1 0 0 0)"}function d(ca){return ca.horizontal?"scale(1 1)":"scale(-1 1)"}function q(ca){return ca.darkBackground&&!ca.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function r(ca){return ca.horizontal&&ca.left?"100%":"0%"}function u(ca,ia,fa){ca.on(".basic",null).on("mouseover.basic",function(ha){ha.interactionState.dragInProgress||ha.partOfGroup||(fa.hover(this,ha,ia),ha.interactionState.hovered=[this,ha])}).on("mousemove.basic",function(ha){ha.interactionState.dragInProgress||ha.partOfGroup||
(fa.follow(this,ha),ha.interactionState.hovered=[this,ha])}).on("mouseout.basic",function(ha){ha.interactionState.dragInProgress||ha.partOfGroup||(fa.unhover(this,ha,ia),ha.interactionState.hovered=!1)}).on("click.basic",function(ha){ha.interactionState.hovered&&(fa.unhover(this,ha,ia),ha.interactionState.hovered=!1);ha.interactionState.dragInProgress||ha.partOfGroup||fa.select(this,ha,ia)})}function v(ca,ia,fa,ha){var na=L.behavior.drag().origin(function(pa){return{x:pa.node.x0+pa.visibleWidth/2,
y:pa.node.y0+pa.visibleHeight/2}}).on("dragstart",function(pa){if("fixed"!==pa.arrangement&&(U.ensureSingle(ha._fullLayout._infolayer,"g","dragcover",function(ta){ha._fullLayout._dragCover=ta}),U.raiseToTop(this),pa.interactionState.dragInProgress=pa.node,B(pa.node),pa.interactionState.hovered&&(fa.nodeEvents.unhover.apply(0,pa.interactionState.hovered),pa.interactionState.hovered=!1),"snap"===pa.arrangement)){var ra=pa.traceId+"|"+pa.key;pa.forceLayouts[ra]?pa.forceLayouts[ra].alpha(1):w(ca,ra,pa,
ha);y(ca,ia,pa,ra,ha)}}).on("drag",function(pa){if("fixed"!==pa.arrangement){var ra=L.event.x,ta=L.event.y;"snap"===pa.arrangement?(pa.node.x0=ra-pa.visibleWidth/2,pa.node.x1=ra+pa.visibleWidth/2):("freeform"===pa.arrangement&&(pa.node.x0=ra-pa.visibleWidth/2,pa.node.x1=ra+pa.visibleWidth/2),ta=Math.max(0,Math.min(pa.size-pa.visibleHeight/2,ta)));pa.node.y0=ta-pa.visibleHeight/2;pa.node.y1=ta+pa.visibleHeight/2;B(pa.node);"snap"!==pa.arrangement&&(pa.sankey.update(pa.graph),ca.filter(t(pa)).call(g),
ia.attr("d",l()))}}).on("dragend",function(pa){if("fixed"!==pa.arrangement){pa.interactionState.dragInProgress=!1;for(var ra=0;ra<pa.node.childrenNodes.length;ra++)pa.node.childrenNodes[ra].x=pa.node.x,pa.node.childrenNodes[ra].y=pa.node.y;"snap"!==pa.arrangement&&x(pa,ha)}});ca.on(".drag",null).call(na)}function w(ca,ia,fa,ha){G(fa.graph.nodes);var na=fa.graph.nodes.filter(function(pa){return pa.originalX===fa.node.originalX}).filter(function(pa){return!pa.partOfGroup});fa.forceLayouts[ia]=Q.forceSimulation(na).alphaDecay(0).force("collide",
Q.forceCollide().radius(function(pa){return pa.dy/2+fa.nodePad/2}).strength(1).iterations(I.forceIterations)).force("constrain",D(ca,ia,na,fa,ha)).stop()}function y(ca,ia,fa,ha,na){window.requestAnimationFrame(function ra(){var ta;for(ta=0;ta<I.forceTicksPerFrame;ta++)fa.forceLayouts[ha].tick();ta=fa.graph.nodes;for(var oa=0;oa<ta.length;oa++)ta[oa].y0=ta[oa].y-ta[oa].dy/2,ta[oa].y1=ta[oa].y0+ta[oa].dy,ta[oa].x0=ta[oa].x-ta[oa].dx/2,ta[oa].x1=ta[oa].x0+ta[oa].dx;fa.sankey.update(fa.graph);ca.filter(t(fa)).call(g);
ia.attr("d",l());0<fa.forceLayouts[ha].alpha()?window.requestAnimationFrame(ra):(ta=fa.node.originalX,fa.node.x0=ta-fa.visibleWidth/2,fa.node.x1=ta+fa.visibleWidth/2,x(fa,na))})}function D(ca,ia,fa,ha){return function(){for(var na=0,pa=0;pa<fa.length;pa++){var ra=fa[pa];ra===ha.interactionState.dragInProgress?(ra.x=ra.lastDraggedX,ra.y=ra.lastDraggedY):(ra.vx=(ra.originalX-ra.x)/I.forceTicksPerFrame,ra.y=Math.min(ha.size-ra.dy/2,Math.max(ra.dy/2,ra.y)));na=Math.max(na,Math.abs(ra.vx),Math.abs(ra.vy))}!ha.interactionState.dragInProgress&&
.1>na&&0<ha.forceLayouts[ia].alpha()&&ha.forceLayouts[ia].alpha(0)}}function x(ca,ia){for(var fa=[],ha=[],na=0;na<ca.graph.nodes.length;na++){var pa=(ca.graph.nodes[na].y0+ca.graph.nodes[na].y1)/2;fa.push((ca.graph.nodes[na].x0+ca.graph.nodes[na].x1)/2/ca.figure.width);ha.push(pa/ca.figure.height)}ea.call("_guiRestyle",ia,{"node.x":[fa],"node.y":[ha]},ca.trace.index).then(function(){ia._fullLayout._dragCover&&ia._fullLayout._dragCover.remove()})}function E(ca){var ia=[],fa;for(fa=0;fa<ca.length;fa++)ca[fa].originalX=
(ca[fa].x0+ca[fa].x1)/2,ca[fa].originalY=(ca[fa].y0+ca[fa].y1)/2,-1===ia.indexOf(ca[fa].originalX)&&ia.push(ca[fa].originalX);ia.sort(function(ha,na){return ha-na});for(fa=0;fa<ca.length;fa++)ca[fa].originalLayerIndex=ia.indexOf(ca[fa].originalX),ca[fa].originalLayer=ca[fa].originalLayerIndex/(ia.length-1)}function B(ca){ca.lastDraggedX=ca.x0+ca.dx/2;ca.lastDraggedY=ca.y0+ca.dy/2}function t(ca){return function(ia){return ia.node.originalX===ca.node.originalX}}function G(ca){for(var ia=0;ia<ca.length;ia++)ca[ia].y=
(ca[ia].y0+ca[ia].y1)/2,ca[ia].x=(ca[ia].x0+ca[ia].x1)/2}var I=b("./constants"),L=b("d3"),M=b("tinycolor2"),N=b("../../components/color"),H=b("../../components/drawing"),J=b("@plotly/d3-sankey"),O=b("@plotly/d3-sankey-circular"),Q=b("d3-force"),U=b("../../lib");C=b("../../lib/gup");var P=C.keyFun,V=C.repeat,Y=C.unwrap,ba=b("d3-interpolate").interpolateNumber,ea=b("../../registry");F.exports=function(ca,ia,fa,ha,na){var pa=!1;U.ensureSingle(ca._fullLayout._infolayer,"g","first-render",function(){pa=
!0});var ra=ca._fullLayout._dragCover;fa=fa.filter(function(oa){return Y(oa).trace.visible}).map(m.bind(null,ha));ia=ia.selectAll("."+I.cn.sankey).data(fa,P);ia.exit().remove();ia.enter().append("g").classed(I.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",p);ia.each(function(oa,ua){ca._fullData[ua]._sankey=oa;var ka="bgsankey-"+oa.trace.uid+"-"+ua;U.ensureSingle(ca._fullLayout._draggers,
"rect",ka);ca._fullData[ua]._bgRect=L.select("."+ka);ca._fullData[ua]._bgRect.style("pointer-events","all").attr("width",oa.width).attr("height",oa.height).attr("x",oa.translateX).attr("y",oa.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})});ia.transition().ease(I.ease).duration(I.duration).attr("transform",p);fa=ia.selectAll("."+I.cn.sankeyLinks).data(V,P);fa.enter().append("g").classed(I.cn.sankeyLinks,!0).style("fill","none");ha=fa.selectAll("."+I.cn.sankeyLink).data(function(oa){return oa.graph.links.filter(function(ua){return ua.value}).map(h.bind(null,
oa))},P);ha.enter().append("path").classed(I.cn.sankeyLink,!0).call(u,ia,na.linkEvents);ha.style("stroke",function(oa){return 1<oa.link.width||0<oa.linkLineWidth?N.tinyRGB(M(oa.linkLineColor)):oa.tinyColorHue}).style("stroke-opacity",function(oa){return 1<oa.link.width||0<oa.linkLineWidth?N.opacity(oa.linkLineColor):oa.tinyColorAlpha}).style("fill",function(oa){return oa.tinyColorHue}).style("fill-opacity",function(oa){return oa.tinyColorAlpha}).style("stroke-width",function(oa){return 1<oa.link.width||
0<oa.linkLineWidth?oa.linkLineWidth:1}).attr("d",l());ha.style("opacity",function(){return ca._context.staticPlot||pa||ra?1:0}).transition().ease(I.ease).duration(I.duration).style("opacity",1);ha.exit().transition().ease(I.ease).duration(I.duration).style("opacity",0).remove();fa=ia.selectAll("."+I.cn.sankeyNodeSet).data(V,P);fa.enter().append("g").classed(I.cn.sankeyNodeSet,!0);fa.style("cursor",function(oa){switch(oa.arrangement){case "fixed":return"default";case "perpendicular":return"ns-resize";
default:return"move"}});fa=fa.selectAll("."+I.cn.sankeyNode).data(function(oa){var ua=oa.graph.nodes;E(ua);return ua.map(e.bind(null,oa))},P);fa.enter().append("g").classed(I.cn.sankeyNode,!0).call(a).style("opacity",function(oa){return!ca._context.staticPlot&&!pa||oa.partOfGroup?0:1});fa.call(u,ia,na.nodeEvents).call(v,ha,na,ca);fa.transition().ease(I.ease).duration(I.duration).call(a).style("opacity",function(oa){return oa.partOfGroup?0:1});fa.exit().transition().ease(I.ease).duration(I.duration).style("opacity",
0).remove();na=fa.selectAll("."+I.cn.nodeRect).data(V);na.enter().append("rect").classed(I.cn.nodeRect,!0).call(k);na.style("stroke-width",function(oa){return oa.nodeLineWidth}).style("stroke",function(oa){return N.tinyRGB(M(oa.nodeLineColor))}).style("stroke-opacity",function(oa){return N.opacity(oa.nodeLineColor)}).style("fill",function(oa){return oa.tinyColorHue}).style("fill-opacity",function(oa){return oa.tinyColorAlpha});na.transition().ease(I.ease).duration(I.duration).call(k);na=fa.selectAll("."+
I.cn.nodeCapture).data(V);na.enter().append("rect").classed(I.cn.nodeCapture,!0).style("fill-opacity",0);na.attr("x",function(oa){return oa.zoneX}).attr("y",function(oa){return oa.zoneY}).attr("width",function(oa){return oa.zoneWidth}).attr("height",function(oa){return oa.zoneHeight});na=fa.selectAll("."+I.cn.nodeCentered).data(V);na.enter().append("g").classed(I.cn.nodeCentered,!0).attr("transform",n);na.transition().ease(I.ease).duration(I.duration).attr("transform",n);ia=na.selectAll("."+I.cn.nodeLabelGuide).data(V);
ia.enter().append("path").classed(I.cn.nodeLabelGuide,!0).attr("id",function(oa){return oa.uniqueNodeLabelPathId}).attr("d",c).attr("transform",f);ia.transition().ease(I.ease).duration(I.duration).attr("d",c).attr("transform",f);var ta=na.selectAll("."+I.cn.nodeLabel).data(V);ta.enter().append("text").classed(I.cn.nodeLabel,!0).attr("transform",d).style("user-select","none").style("cursor","default").style("fill","black");ta.style("text-shadow",function(oa){return oa.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":
"none"}).each(function(oa){H.font(ta,oa.textFont)});ta.transition().ease(I.ease).duration(I.duration).attr("transform",d);na=ta.selectAll("."+I.cn.nodeLabelTextPath).data(V);na.enter().append("textPath").classed(I.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(oa){return"#"+oa.uniqueNodeLabelPathId}).attr("startOffset",r).style("fill",q);na.text(function(oa){return oa.horizontal||5<oa.node.dy?oa.node.label:""}).attr("text-anchor",function(oa){return oa.horizontal&&
oa.left?"end":"start"});na.transition().ease(I.ease).duration(I.duration).attr("startOffset",r).style("fill",q)}},{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,"../../registry":880,"./constants":1148,"@plotly/d3-sankey":56,"@plotly/d3-sankey-circular":55,d3:169,"d3-force":160,"d3-interpolate":162,tinycolor2:548}],1153:[function(b,F,C){F.exports=function(m,h){for(var l=[],e=m.cd[0].trace,a=e._sankey.graph.nodes,g=0;g<a.length;g++){var k=a[g];if(!k.partOfGroup){var p=
[(k.x0+k.x1)/2,(k.y0+k.y1)/2];"v"===e.orientation&&p.reverse();h&&h.contains(p,!1,g,m)&&l.push({pointNumber:k.pointNumber})}}return l}},{}],1154:[function(b,F,C){var m=b("../../lib");F.exports=function(h,l){for(var e=0;e<h.length;e++)h[e].i=e;m.mergeArray(l.text,h,"tx");m.mergeArray(l.texttemplate,h,"txt");m.mergeArray(l.hovertext,h,"htx");m.mergeArray(l.customdata,h,"data");m.mergeArray(l.textposition,h,"tp");l.textfont&&(m.mergeArrayCastPositive(l.textfont.size,h,"ts"),m.mergeArray(l.textfont.color,
h,"tc"),m.mergeArray(l.textfont.family,h,"tf"));if(l=l.marker){m.mergeArrayCastPositive(l.size,h,"ms");m.mergeArrayCastPositive(l.opacity,h,"mo");m.mergeArray(l.symbol,h,"mx");m.mergeArray(l.color,h,"mc");if(e=l.line)m.mergeArray(e.color,h,"mlc"),m.mergeArrayCastPositive(e.width,h,"mlw");(l=l.gradient)&&"none"!==l.type&&(m.mergeArray(l.type,h,"mgt"),m.mergeArray(l.color,h,"mgc"))}}},{"../../lib":749}],1155:[function(b,F,C){C=b("../../plots/template_attributes").texttemplateAttrs;var m=b("../../plots/template_attributes").hovertemplateAttrs,
h=b("../../components/colorscale/attributes"),l=b("../../plots/font_attributes"),e=b("../../components/drawing/attributes").dash,a=b("../../components/drawing"),g=b("./constants");b=b("../../lib/extend").extendFlat;F.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",
anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:C({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,
editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:m({},{keys:g.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},
dash:b({},e,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:b({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",
min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:b({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},h("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",
values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},h("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",
min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:l({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",
editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":622,"../../components/drawing":637,"../../components/drawing/attributes":636,"../../lib/extend":739,"../../plots/font_attributes":825,"../../plots/template_attributes":875,"./constants":1159}],1156:[function(b,F,C){function m(r,u,v,w,y,D,x){var E=u._length,B=r._fullLayout;r=v._id;var t=w._id,G=B._firstScatter[e(u)]===u.uid;B=(a(u,B,v,w)||{}).orientation;var I=u.fill;v._minDtick=0;w._minDtick=0;var L=
{padded:!0},M={padded:!0};x&&(L.ppad=M.ppad=x);(x=2>E||y[0]!==y[E-1]||D[0]!==D[E-1])&&("tozerox"===I||"tonextx"===I&&(G||"h"===B))?L.tozero=!0:(u.error_y||{}).visible||"tonexty"!==I&&"tozeroy"!==I&&(c.hasMarkers(u)||c.hasText(u))||(L.padded=!1,L.ppad=0);if(x&&("tozeroy"===I||"tonexty"===I&&(G||"v"===B)))M.tozero=!0;else if("tonextx"===I||"tozerox"===I)M.padded=!1;r&&(u._extremes[r]=p.findExtremes(v,y,L));t&&(u._extremes[t]=p.findExtremes(w,D,M))}function h(r,u){if(c.hasMarkers(r)){var v=r.marker,
w=1.6*(r.marker.sizeref||1);var y="area"===r.marker.sizemode?function(x){return Math.max(Math.sqrt((x||0)/w),3)}:function(x){return Math.max((x||0)/w,3)};if(k.isArrayOrTypedArray(v.size)){v={type:"linear"};p.setConvert(v);r=v.makeCalcdata(r.marker,"size");v=Array(u);for(var D=0;D<u;D++)v[D]=y(r[D]);return v}return y(v.size)}}function l(r,u){var v=e(u);r=r._firstScatter;r[v]||(r[v]=u.uid)}function e(r){var u=r.stackgroup;return r.xaxis+r.yaxis+r.type+(u?"-"+u:"")}function a(r,u,v,w){if(r=r.stackgroup)if(u=
u._scatterStackOpts[v._id+w._id][r],v="v"===u.orientation?w:v,"linear"===v.type||"log"===v.type)return u}var g=b("fast-isnumeric"),k=b("../../lib"),p=b("../../plots/cartesian/axes"),n=b("../../constants/numerical").BADNUM,c=b("./subtypes"),f=b("./colorscale_calc"),d=b("./arrays_to_calcdata"),q=b("./calc_selection");F.exports={calc:function(r,u){var v=r._fullLayout,w=p.getFromId(r,u.xaxis||"x"),y=p.getFromId(r,u.yaxis||"y"),D=w.makeCalcdata(u,"x"),x=y.makeCalcdata(u,"y"),E=u._length,B=Array(E),t=u.ids,
G=a(u,v,w,y),I=!1,L;l(v,u);v="x";var M="y";if(G){k.pushUnique(G.traceIndices,u._expandedIndex);if(L="v"===G.orientation){M="s";var N="x"}else v="s",N="y";var H="interpolate"===G.stackgaps}else{var J=h(u,E);m(r,u,w,y,D,x,J)}for(w=0;w<E;w++){y=B[w]={};J=g(D[w]);var O=g(x[w]);J&&O?(y[v]=D[w],y[M]=x[w]):G&&(L?J:O)?(y[N]=L?D[w]:x[w],y.gap=!0,H?(y.s=n,I=!0):y.s=0):y[v]=y[M]=n;t&&(y.id=String(t[w]))}d(B,u);f(r,u);q(B,u);if(G){for(w=0;w<B.length;)B[w][N]===n?B.splice(w,1):w++;k.sort(B,function(Q,U){return Q[N]-
U[N]||Q.i-U.i});if(I){for(w=0;w<B.length-1&&B[w].gap;)w++;D=B[w].s;D||(D=B[w].s=0);for(r=0;r<w;r++)B[r].s=D;for(u=B.length-1;u>w&&B[u].gap;)u--;D=B[u].s;for(r=B.length-1;r>u;r--)B[r].s=D;for(;w<u;)if(w++,B[w].gap){for(r=w+1;B[r].gap;)r++;D=B[w-1][N];x=B[w-1].s;for(E=(B[r].s-x)/(B[r][N]-D);w<r;)B[w].s=x+(B[w][N]-D)*E,w++}}}return B},calcMarkerSize:h,calcAxisExpansion:m,setFirstScatter:l,getStackOpts:a}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"./arrays_to_calcdata":1154,
"./calc_selection":1157,"./colorscale_calc":1158,"./subtypes":1179,"fast-isnumeric":241}],1157:[function(b,F,C){var m=b("../../lib");F.exports=function(h,l){m.isArrayOrTypedArray(l.selectedpoints)&&m.tagSelected(h,l)}},{"../../lib":749}],1158:[function(b,F,C){var m=b("../../components/colorscale/helpers").hasColorscale,h=b("../../components/colorscale/calc"),l=b("./subtypes");F.exports=function(e,a){l.hasLines(a)&&m(a,"line")&&h(e,a,{vals:a.line.color,containerStr:"line",cLetter:"c"});l.hasMarkers(a)&&
(m(a,"marker")&&h(e,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),m(a,"marker.line")&&h(e,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"./subtypes":1179}],1159:[function(b,F,C){F.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],1160:[function(b,F,C){function m(l,e,a,g,k,p,n){k[g]=!0;g={i:null,gap:!0,s:0};g[n]=a;l.splice(e,0,
g);e&&a===l[e-1][n]?(a=l[e-1],g.s=a.s,g.i=a.i,g.gap=a.gap):p&&(p=l[e-1],a=(k=l[e+1])?p?p.s+(k.s-p.s)*(a-p[n])/(k[n]-p[n]):k.s:p.s,g.s=a);e||(l[0].t=l[1].t,l[0].trace=l[1].trace,delete l[1].t,delete l[1].trace)}var h=b("./calc");F.exports=function(l,e){var a=e.xaxis;e=e.yaxis;var g=l._fullLayout._scatterStackOpts[a._id+e._id];if(g){var k=l.calcdata,p,n,c,f,d,q;for(q in g){var r=g[q];var u=r.traceIndices;if(u.length){var v="interpolate"===r.stackgaps;var w=r.groupnorm;if("v"===r.orientation){var y=
"x";var D="y"}else y="y",D="x";var x=Array(u.length);for(p=0;p<x.length;p++)x[p]=!1;var E=k[u[0]];var B=Array(E.length);for(p=0;p<E.length;p++)B[p]=E[p][y];for(p=1;p<u.length;p++){var t=k[u[p]];for(n=c=0;n<t.length;n++){for(d=t[n][y];d>B[c]&&c<B.length;c++)m(t,n,B[c],p,x,v,y),n++;if(d!==B[c]){for(f=0;f<p;f++)m(k[u[f]],c,d,f,x,v,y);B.splice(c,0,d)}c++}for(;c<B.length;c++)m(t,n,B[c],p,x,v,y),n++}c=B.length;for(n=0;n<E.length;n++){f=E[n][D]=E[n].s;for(p=1;p<u.length;p++)t=k[u[p]],t[0].trace._rawLength=
t[0].trace._length,t[0].trace._length=c,f+=t[n].s,t[n][D]=f;if(w)for(t=("fraction"===w?f:f/100)||1,p=0;p<u.length;p++)f=k[u[p]][n],f[D]/=t,f.sNorm=f.s/t}for(p=0;p<u.length;p++){t=k[u[p]];E=t[0].trace;w=h.calcMarkerSize(E,E._rawLength);D=Array.isArray(w);if(w&&x[p]||D)for(f=w,w=Array(c),n=0;n<c;n++)w[n]=t[n].gap?0:D?f[t[n].i]:f;D=Array(c);f=Array(c);for(n=0;n<c;n++)D[n]=t[n].x,f[n]=t[n].y;h.calcAxisExpansion(l,E,a,e,D,f,w);t[0].t.orientation=r.orientation}}}}}},{"./calc":1156}],1161:[function(b,F,
C){F.exports=function(m){for(var h=0;h<m.length;h++){var l=m[h];if("scatter"===l.type){var e=l.fill;if("none"!==e&&"toself"!==e&&(l.opacity=void 0,"tonexty"===e||"tonextx"===e))for(e=h-1;0<=e;e--){var a=m[e];if("scatter"===a.type&&a.xaxis===l.xaxis&&a.yaxis===l.yaxis){a.opacity=void 0;break}}}}}},{}],1162:[function(b,F,C){var m=b("../../lib"),h=b("../../registry"),l=b("./attributes"),e=b("./constants"),a=b("./subtypes"),g=b("./xy_defaults"),k=b("./stack_defaults"),p=b("./marker_defaults"),n=b("./line_defaults"),
c=b("./line_shape_defaults"),f=b("./text_defaults"),d=b("./fillcolor_defaults");F.exports=function(q,r,u,v){function w(x,E){return m.coerce(q,r,l,x,E)}var y=g(q,r,v,w);y||(r.visible=!1);if(r.visible){var D=k(q,r,v,w);y=!D&&y<e.PTS_LINESONLY?"lines+markers":"lines";w("text");w("hovertext");w("mode",y);a.hasLines(r)&&(n(q,r,u,v,w),c(q,r,w),w("connectgaps"),w("line.simplify"));a.hasMarkers(r)&&p(q,r,u,v,w,{gradient:!0});a.hasText(r)&&(w("texttemplate"),f(q,r,v,w));v=[];if(a.hasMarkers(r)||a.hasText(r))w("cliponaxis"),
w("marker.maxdisplayed"),v.push("points");w("fill",D?D.fillDflt:"none");"none"!==r.fill&&(d(q,r,u,w),a.hasLines(r)||c(q,r,w));D=(r.line||{}).color;y=(r.marker||{}).color;"tonext"!==r.fill&&"toself"!==r.fill||v.push("fills");w("hoveron",v.join("+")||"points");"fills"!==r.hoveron&&w("hovertemplate");v=h.getComponentMethod("errorbars","supplyDefaults");v(q,r,D||y||u,{axis:"y"});v(q,r,D||y||u,{axis:"x",inherit:"y"});m.coerceSelectionMarkerOpacity(r,w)}}},{"../../lib":749,"../../registry":880,"./attributes":1155,
"./constants":1159,"./fillcolor_defaults":1163,"./line_defaults":1168,"./line_shape_defaults":1170,"./marker_defaults":1174,"./stack_defaults":1177,"./subtypes":1179,"./text_defaults":1180,"./xy_defaults":1181}],1163:[function(b,F,C){var m=b("../../components/color"),h=b("../../lib").isArrayOrTypedArray;F.exports=function(l,e,a,g){l=!1;if(e.marker){var k=e.marker.color,p=(e.marker.line||{}).color;k&&!h(k)?l=k:p&&!h(p)&&(l=p)}g("fillcolor",m.addOpacity((e.line||{}).color||l||a,.5))}},{"../../components/color":615,
"../../lib":749}],1164:[function(b,F,C){var m=b("../../plots/cartesian/axes");F.exports=function(h,l,e){var a={},g={_fullLayout:e};e=m.getFromTrace(g,l,"x");l=m.getFromTrace(g,l,"y");a.xLabel=m.tickText(e,h.x,!0).text;a.yLabel=m.tickText(l,h.y,!0).text;return a}},{"../../plots/cartesian/axes":797}],1165:[function(b,F,C){var m=b("../../components/color"),h=b("./subtypes");F.exports=function(l,e){if("lines"===l.mode)return(e=l.line.color)&&m.opacity(e)?e:l.fillcolor;if("none"===l.mode)return l.fill?
l.fillcolor:"";var a=e.mcc||(l.marker||{}).color,g=e.mlcc||((l.marker||{}).line||{}).color;return(e=a&&m.opacity(a)?a:g&&m.opacity(g)&&(e.mlw||((l.marker||{}).line||{}).width)?g:"")?.3>m.opacity(e)?m.addOpacity(e,.3):e:(e=(l.line||{}).color)&&m.opacity(e)&&h.hasLines(l)&&l.line.width?e:l.fillcolor}},{"../../components/color":615,"./subtypes":1179}],1166:[function(b,F,C){var m=b("../../lib"),h=b("../../components/fx"),l=b("../../registry"),e=b("./get_trace_color"),a=b("../../components/color"),g=m.fillText;
F.exports=function(k,p,n,c){var f=k.cd,d=f[0].trace,q=k.xa,r=k.ya,u=q.c2p(p),v=r.c2p(n),w=[u,v];n=d.hoveron||"";var y=-1!==d.mode.indexOf("markers")?3:.5;if(-1!==n.indexOf("points")&&(p=function(I){var L=Math.max(y,I.mrc||0),M=q.c2p(I.x)-u;I=r.c2p(I.y)-v;return Math.max(Math.sqrt(M*M+I*I)-L,1-y/L)},c=h.getDistanceFunction(c,function(I){var L=Math.max(3,I.mrc||0),M=1-1/L;I=Math.abs(q.c2p(I.x)-u);return I<L?M*I/L:I-L+M},function(I){var L=Math.max(3,I.mrc||0),M=1-1/L;I=Math.abs(r.c2p(I.y)-v);return I<
L?M*I/L:I-L+M},p),h.getClosest(f,c,k),!1!==k.index)){c=f[k.index];n=q.c2p(c.x,!0);w=r.c2p(c.y,!0);var D=c.mrc||1;k.index=c.i;var x=f[0].t.orientation,E=x&&(c.sNorm||c.s);f="h"===x?E:c.x;x="v"===x?E:c.y;m.extendFlat(k,{color:e(d,c),x0:n-D,x1:n+D,xLabelVal:f,y0:w-D,y1:w+D,yLabelVal:x,spikeDistance:p(c),hovertemplate:d.hovertemplate});g(c,d,k);l.getComponentMethod("errorbars","hoverInfo")(c,d,k);return[k]}if(-1!==n.indexOf("fills")&&d._polygons){D=d._polygons;c=[];x=!1;p=Infinity;f=-Infinity;E=Infinity;
var B=-Infinity;for(n=0;n<D.length;n++){var t=D[n];t.contains(w)&&(x=!x,c.push(t),E=Math.min(E,t.ymin),B=Math.max(B,t.ymax))}if(x){E=Math.max(E,0);B=Math.min(B,r._length);w=(E+B)/2;for(n=0;n<c.length;n++)for(x=c[n].pts,D=1;D<x.length;D++){t=x[D-1][1];var G=x[D][1];t>w!==G>=w&&(E=x[D-1][0],B=x[D][0],G-t&&(E+=(B-E)*(w-t)/(G-t),p=Math.min(p,E),f=Math.max(f,E)))}p=Math.max(p,0);f=Math.min(f,q._length);c=a.defaultLine;a.opacity(d.fillcolor)?c=d.fillcolor:a.opacity((d.line||{}).color)&&(c=d.line.color);
m.extendFlat(k,{distance:k.maxHoverDistance,x0:p,x1:f,y0:w,y1:w,color:c,hovertemplate:!1});delete k.index;d.text&&!Array.isArray(d.text)?k.text=String(d.text):k.text=d.name;return[k]}}}},{"../../components/color":615,"../../components/fx":655,"../../lib":749,"../../registry":880,"./get_trace_color":1165}],1167:[function(b,F,C){C=b("./subtypes");F.exports={hasLines:C.hasLines,hasMarkers:C.hasMarkers,hasText:C.hasText,isBubble:C.isBubble,attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),
calc:b("./calc").calc,crossTraceCalc:b("./cross_trace_calc"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot"),colorbar:b("./marker_colorbar"),formatLabels:b("./format_labels"),style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,
"./arrays_to_calcdata":1154,"./attributes":1155,"./calc":1156,"./cross_trace_calc":1160,"./cross_trace_defaults":1161,"./defaults":1162,"./format_labels":1164,"./hover":1166,"./marker_colorbar":1173,"./plot":1175,"./select":1176,"./style":1178,"./subtypes":1179}],1168:[function(b,F,C){var m=b("../../lib").isArrayOrTypedArray,h=b("../../components/colorscale/helpers").hasColorscale,l=b("../../components/colorscale/defaults");F.exports=function(e,a,g,k,p,n){var c=(e.marker||{}).color;p("line.color",
g);h(e,"line")?l(e,a,k,p,{prefix:"line.",cLetter:"c"}):(e=(m(c)?!1:c)||g,p("line.color",e));p("line.width");(n||{}).noDash||p("line.dash")}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":749}],1169:[function(b,F,C){C=b("../../constants/numerical");var m=C.BADNUM;C=C.LOG_CLIP;var h=C+.5,l=C-.5,e=b("../../lib"),a=e.segmentsIntersect,g=e.constrain,k=b("./constants");F.exports=function(p,n){function c(Oa){Oa=p[Oa];if(!Oa)return!1;var fb=n.linearized?
B.l2p(Oa.x):B.c2p(Oa.x),bb=n.linearized?t.l2p(Oa.y):t.c2p(Oa.y);if(fb===m){G&&(fb=B.c2p(Oa.x,!0));if(fb===m)return!1;I&&bb===m&&(fb*=Math.abs(B._m*M*(0<B._m?h:l)/(t._m*L*(0<t._m?h:l))));fb*=1E3}if(bb===m){I&&(bb=t.c2p(Oa.y,!0));if(bb===m)return!1;bb*=1E3}return[fb,bb]}function f(Oa,fb,bb,Pa){bb-=Oa;Pa-=fb;Oa=.5-Oa;var Ta=.5-fb;fb=bb*bb+Pa*Pa;var Ya=bb*Oa+Pa*Ta;if(0<Ya&&Ya<fb&&(bb=Oa*Pa-Ta*bb,bb*bb<fb))return!0}function d(Oa,fb){var bb=Oa[0]/L;Oa=Oa[1]/M;var Pa=Math.max(0,-bb,bb-1,-Oa,Oa-1);Pa&&void 0!==
ia&&f(bb,Oa,ia,fa)&&(Pa=0);Pa&&fb&&f(bb,Oa,fb[0]/L,fb[1]/M)&&(Pa=0);return(1+k.toleranceGrowth*Pa)*H}function q(Oa,fb){var bb=Oa[0]-fb[0];Oa=Oa[1]-fb[1];return Math.sqrt(bb*bb+Oa*Oa)}function r(Oa,fb){for(var bb=[],Pa=0,Ta=0;4>Ta;Ta++){var Ya=oa[Ta];(Ya=a(Oa[0],Oa[1],fb[0],fb[1],Ya[0],Ya[1],Ya[2],Ya[3]))&&(!Pa||1<Math.abs(Ya.x-bb[0][0])||1<Math.abs(Ya.y-bb[0][1]))&&(Ya=[Ya.x,Ya.y],Pa&&q(Ya,Oa)<q(bb[0],Oa)?bb.unshift(Ya):bb.push(Ya),Pa++)}return bb}function u(Oa){if(Oa[0]<na||Oa[0]>pa||Oa[1]<ra||Oa[1]>
ta)return[g(Oa[0],na,pa),g(Oa[1],ra,ta)]}function v(Oa,fb){if(Oa[0]===fb[0]&&(Oa[0]===na||Oa[0]===pa)||Oa[1]===fb[1]&&(Oa[1]===ra||Oa[1]===ta))return!0}function w(Oa,fb){var bb=[];Oa=u(Oa);fb=u(fb);if(Oa&&fb&&v(Oa,fb))return bb;Oa&&bb.push(Oa);fb&&bb.push(fb);return bb}function y(Oa,fb,bb){return function(Pa,Ta){var Ya=u(Pa),nb=u(Ta),Da=[];if(Ya&&nb&&v(Ya,nb))return Da;Ya&&Da.push(Ya);nb&&Da.push(nb);if(Pa=2*e.constrain((Pa[Oa]+Ta[Oa])/2,fb,bb)-((Ya||Pa)[Oa]+(nb||Ta)[Oa]))Ya=Ya&&nb?0<Pa===Ya[Oa]>
nb[Oa]?Ya:nb:Ya||nb,Ya[Oa]+=Pa;return Da}}function D(Oa){var fb=Oa[0],bb=Oa[1],Pa=fb===Y[ba-1][0],Ta=bb===Y[ba-1][1];if(!Pa||!Ta)if(1<ba){var Ya=fb===Y[ba-2][0],nb=bb===Y[ba-2][1];Pa&&(fb===na||fb===pa)&&Ya?nb?ba--:Y[ba-1]=Oa:Ta&&(bb===ra||bb===ta)&&nb?Ya?ba--:Y[ba-1]=Oa:Y[ba++]=Oa}else Y[ba++]=Oa}function x(Oa){Y[ba-1][0]!==Oa[0]&&Y[ba-1][1]!==Oa[1]&&D([sa,ya]);D(Oa);Ca=null;sa=ya=0}function E(Oa){ia=Oa[0]/L;fa=Oa[1]/M;ua=Oa[0]<na?na:Oa[0]>pa?pa:0;ka=Oa[1]<ra?ra:Oa[1]>ta?ta:0;if(ua||ka){if(ba)if(Ca){var fb=
xa(Ca,Oa);1<fb.length&&(x(fb[0]),Y[ba++]=fb[1])}else qa=xa(Y[ba-1],Oa)[0],Y[ba++]=qa;else Y[ba++]=[ua||Oa[0],ka||Oa[1]];fb=Y[ba-1];if(ua&&ka&&(fb[0]!==ua||fb[1]!==ka)){if(Ca)if(sa!==ua&&ya!==ka)if(sa&&ya){fb=Oa[0]-Ca[0];var bb=(Oa[1]-Ca[1])/fb;fb=0<(Ca[1]*Oa[0]-Oa[1]*Ca[0])/fb?[0<bb?na:pa,ta]:[0<bb?pa:na,ra];D(fb)}else D([sa||ua,ya||ka]);else sa&&ya&&D([sa,ya]);D([ua,ka])}else sa-ua&&ya-ka&&D([ua||sa,ka||ya]);Ca=Oa;sa=ua;ya=ka}else Ca&&x(xa(Ca,Oa)[0]),Y[ba++]=Oa}var B=n.xaxis,t=n.yaxis,G="log"===
B.type,I="log"===t.type,L=B._length,M=t._length,N=n.connectGaps,H=n.baseTolerance,J=n.shape,O="linear"===J,Q=n.fill&&"none"!==n.fill,U=[],P=k.minTolerance,V=p.length,Y=Array(V),ba=0,ea,ca,ia,fa;var ha=k.maxScreensAway;var na=-L*ha,pa=L*(1+ha),ra=-M*ha,ta=M*(1+ha),oa=[[na,ra,pa,ra],[pa,ra,pa,ta],[pa,ta,na,ta],[na,ta,na,ra]],ua,ka,sa,ya,qa,xa;"linear"===J||"spline"===J?xa=r:"hv"===J||"vh"===J?xa=w:"hvh"===J?xa=y(0,na,pa):"vhv"===J&&(xa=y(1,ra,ta));for(J=0;J<V;J++)if(ha=c(J)){ba=0;var Ca=null;E(ha);
for(J++;J<V;J++){var Ja=c(J);if(!Ja)if(N)continue;else break;if(O&&n.simplify){var eb=c(J+1);var Ra=q(Ja,ha);if(Q&&(0===ba||ba===V-1)||!(Ra<d(Ja,eb)*P)){var Wa=[(Ja[0]-ha[0])/Ra,(Ja[1]-ha[1])/Ra];var Ea=ha;var Ia=Ra;var Qa=ea=ca=0;var lb=!1;Ra=Ja;for(J++;J<p.length;J++){var hb=eb;eb=c(J+1);if(!hb)if(N)continue;else break;var Fa=[hb[0]-ha[0],hb[1]-ha[1]];var La=Fa[0]*Wa[1]-Fa[1]*Wa[0];ea=Math.min(ea,La);ca=Math.max(ca,La);if(ca-ea>d(hb,eb))break;Ra=hb;Fa=Fa[0]*Wa[0]+Fa[1]*Wa[1];Fa>Ia?(Ia=Fa,Ja=hb,
lb=!1):Fa<Qa&&(Qa=Fa,Ea=hb,lb=!0)}lb?(E(Ja),Ra!==Ea&&E(Ea)):(Ea!==ha&&E(Ea),Ra!==Ja&&E(Ja));E(Ra);if(J>=p.length||!hb)break;E(hb);ha=hb}}else E(Ja)}Ca&&D([sa||Ca[0],ya||Ca[1]]);U.push(Y.slice(0,ba))}return U}},{"../../constants/numerical":724,"../../lib":749,"./constants":1159}],1170:[function(b,F,C){F.exports=function(m,h,l){"spline"===l("line.shape")&&l("line.smoothing")}},{}],1171:[function(b,F,C){var m={tonextx:1,tonexty:1,tonext:1};F.exports=function(h,l,e){var a,g={};var k=!1;var p=-1,n=0,c=
-1;for(l=0;l<e.length;l++)h=e[l][0].trace,(a=h.stackgroup||"")?a in g?a=g[a]:(a=g[a]=n,n++):h.fill in m&&0<=c?a=c:(a=c=n,n++),a<p&&(k=!0),h._groupIndex=p=a;e=e.slice();k&&e.sort(function(f,d){f=f[0].trace;d=d[0].trace;return f._groupIndex-d._groupIndex||f.index-d.index});g={};for(l=0;l<e.length;l++)h=e[l][0].trace,a=h.stackgroup||"",!0===h.visible?(h._nexttrace=null,h.fill in m&&(k=g[a],h._prevtrace=k||null,k&&(k._nexttrace=h)),h._ownfill=h.fill&&("tozero"===h.fill.substr(0,6)||"toself"===h.fill||
"to"===h.fill.substr(0,2)&&!h._prevtrace),g[a]=h):h._prevtrace=h._nexttrace=h._ownfill=null;return e}},{}],1172:[function(b,F,C){var m=b("fast-isnumeric");F.exports=function(h){h=h.marker;var l=h.sizeref||1,e=h.sizemin||0,a="area"===h.sizemode?function(g){return Math.sqrt(g/l)}:function(g){return g/l};return function(g){g=a(g/2);return m(g)&&0<g?Math.max(g,e):0}}},{"fast-isnumeric":241}],1173:[function(b,F,C){F.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1174:[function(b,F,C){var m=b("../../components/color"),
h=b("../../components/colorscale/helpers").hasColorscale,l=b("../../components/colorscale/defaults"),e=b("./subtypes");F.exports=function(a,g,k,p,n,c){var f=e.isBubble(a),d=(a.line||{}).color;c=c||{};d&&(k=d);n("marker.symbol");n("marker.opacity",f?.7:1);n("marker.size");n("marker.color",k);h(a,"marker")&&l(a,g,p,n,{prefix:"marker.",cLetter:"c"});c.noSelect||(n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size"));c.noLine||(k=d&&!Array.isArray(d)&&
g.marker.color!==d?d:f?m.background:m.defaultLine,n("marker.line.color",k),h(a,"marker.line")&&l(a,g,p,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width",f?1:0));f&&(n("marker.sizeref"),n("marker.sizemin"),n("marker.sizemode"));c.gradient&&"none"!==n("marker.gradient.type")&&n("marker.gradient.color")}},{"../../components/color":615,"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"./subtypes":1179}],1175:[function(b,F,C){function m(r,u,v){u.each(function(w){var y=
k(e.select(this),"g","fills");n.setClipUrl(y,v.layerClipId,r);var D=w[0].trace;w=[];D._ownfill&&w.push("_ownFill");D._nexttrace&&w.push("_nextFill");y=y.selectAll("g").data(w,p);y.enter().append("g");y.exit().each(function(x){D[x]=null}).remove();y.order().each(function(x){D[x]=k(e.select(this),"path","js-fill")})})}function h(r,u,v,w,y,D,x){function E(ka){return N?ka.transition():ka}function B(ka){E(ka).attr("d","M0,0Z")}function t(ka){return ka.filter(function(sa){return!sa.gap&&sa.vis})}function G(ka){return ka.filter(function(sa){return sa.vis})}
function I(ka){return ka.filter(function(sa){return!sa.gap})}function L(ka){return ka.id}function M(){return!1}l(r,u,v,w,y);var N=!!x&&0<x.duration,H=v.xaxis,J=v.yaxis,O=w[0].trace,Q=O.line,U=e.select(D),P=k(U,"g","errorbars");D=k(U,"g","lines");u=k(U,"g","points");y=k(U,"g","text");a.getComponentMethod("errorbars","plot")(r,P,v,x);if(!0===O.visible){E(U).style("opacity",O.opacity);var V=O.fill.charAt(O.fill.length-1);"x"!==V&&"y"!==V&&(V="");w[0][v.isRangePlot?"nodeRangePlot3":"node3"]=U;x="";U=
[];if(P=O._prevtrace){x=P._prevRevpath||"";var Y=P._nextFill;U=P._polygons}var ba,ea,ca="",ia="",fa=[];var ha=g.noop;P=O._ownFill;if(c.hasLines(O)||"none"!==O.fill){Y&&Y.datum(w);if(-1!==["hv","vh","hvh","vhv"].indexOf(Q.shape)){var na=n.steps(Q.shape);var pa=n.steps(Q.shape.split("").reverse().join(""))}else na="spline"===Q.shape?pa=function(ka){var sa=ka[ka.length-1];return 1<ka.length&&ka[0][0]===sa[0]&&ka[0][1]===sa[1]?n.smoothclosed(ka.slice(1),Q.smoothing):n.smoothopen(ka,Q.smoothing)}:pa=function(ka){return"M"+
ka.join("L")};var ra=function(ka){return pa(ka.reverse())};fa=f(w,{xaxis:H,yaxis:J,connectGaps:O.connectgaps,baseTolerance:Math.max(Q.width||1,3)/4,shape:Q.shape,simplify:Q.simplify,fill:O.fill});var ta=O._polygons=Array(fa.length);for(ha=0;ha<fa.length;ha++)O._polygons[ha]=q(fa[ha]);if(fa.length){var oa=fa[0][0];var ua=fa[fa.length-1];ua=ua[ua.length-1]}ha=function(ka){return function(sa){ba=na(sa);ea=ra(sa);ca?V?(ca+="L"+ba.substr(1),ia=ea+("L"+ia.substr(1))):(ca+="Z"+ba,ia=ea+"Z"+ia):(ca=ba,ia=
ea);c.hasLines(O)&&1<sa.length&&(sa=e.select(this),sa.datum(w),ka?E(sa.style("opacity",0).attr("d",ba).call(n.lineGroupStyle)).style("opacity",1):(sa=E(sa),sa.attr("d",ba),n.singleLineStyle(w,sa)))}}}D=D.selectAll(".js-line").data(fa);E(D.exit()).style("opacity",0).remove();D.each(ha(!1));D.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(n.lineGroupStyle).each(ha(!0));n.setClipUrl(D,v.layerClipId,r);fa.length?(P?(P.datum(w),oa&&ua&&(V?("y"===V?oa[1]=ua[1]=
J.c2p(0,!0):"x"===V&&(oa[0]=ua[0]=H.c2p(0,!0)),E(P).attr("d","M"+ua+"L"+oa+"L"+ca.substr(1)).call(n.singleFillStyle)):E(P).attr("d",ca+"Z").call(n.singleFillStyle))):Y&&("tonext"===O.fill.substr(0,6)&&ca&&x?("tonext"===O.fill?E(Y).attr("d",ca+"Z"+x+"Z").call(n.singleFillStyle):E(Y).attr("d",ca+"L"+x.substr(1)+"Z").call(n.singleFillStyle),O._polygons=O._polygons.concat(U)):(B(Y),O._polygons=null)),O._prevRevpath=ia,O._prevPolygons=ta):(P?B(P):Y&&B(Y),O._polygons=O._prevRevpath=O._prevPolygons=null);
u.datum(w);y.datum(w);(function(ka,sa,ya){var qa,xa=ya[0].trace;ya=c.hasMarkers(xa);var Ca=c.hasText(xa);var Ja=xa.ids?L:void 0;var eb=M,Ra=M;if(ya||Ca){var Wa=p,Ea=xa.stackgroup,Ia=Ea&&"infer zero"===r._fullLayout._scatterStackOpts[H._id+J._id][Ea].stackgaps;xa.marker.maxdisplayed||xa._needsCull?Wa=Ia?G:t:Ea&&!Ia&&(Wa=I);ya&&(eb=Wa);Ca&&(Ra=Wa)}ka=ka.selectAll("path.point");ka=ka.data(eb,Ja);eb=ka.enter().append("path").classed("point",!0);N&&eb.call(n.pointStyle,xa,r).call(n.translatePoints,H,J).style("opacity",
0).transition().style("opacity",1);ka.order();var Qa;ya&&(Qa=n.makePointStyleFns(xa));ka.each(function(lb){var hb=e.select(this),Fa=E(hb);(qa=n.translatePoint(lb,Fa,H,J))?(n.singlePointStyle(lb,Fa,xa,Qa,r),v.layerClipId&&n.hideOutsideRangePoint(lb,Fa,H,J,xa.xcalendar,xa.ycalendar),xa.customdata&&hb.classed("plotly-customdata",null!==lb.data&&void 0!==lb.data)):Fa.remove()});N?ka.exit().transition().style("opacity",0).remove():ka.exit().remove();ka=sa.selectAll("g");ka=ka.data(Ra,Ja);ka.enter().append("g").classed("textpoint",
!0).append("text");ka.order();ka.each(function(lb){var hb=e.select(this),Fa=E(hb.select("text"));(qa=n.translatePoint(lb,Fa,H,J))?v.layerClipId&&n.hideOutsideRangePoint(lb,hb,H,J,xa.xcalendar,xa.ycalendar):hb.remove()});ka.selectAll("text").call(n.textPointStyle,xa,r).each(function(lb){var hb=H.c2p(lb.x),Fa=J.c2p(lb.y);e.select(this).selectAll("tspan.line").each(function(){E(e.select(this)).attr({x:hb,y:Fa})})});ka.exit().remove()})(u,y,w);Y=!1===O.cliponaxis?null:v.layerClipId;n.setClipUrl(u,Y,r);
n.setClipUrl(y,Y,r)}}function l(r,u,v,w,y){r=v.xaxis;v=v.yaxis;var D=e.extent(g.simpleMap(r.range,r.r2c)),x=e.extent(g.simpleMap(v.range,v.r2c));v=w[0].trace;if(c.hasMarkers(v)&&(v=v.marker.maxdisplayed,0!==v)){r=w.filter(function(G){return G.x>=D[0]&&G.x<=D[1]&&G.y>=x[0]&&G.y<=x[1]});var E=Math.ceil(r.length/v),B=0;y.forEach(function(G,I){G=G[0].trace;c.hasMarkers(G)&&0<G.marker.maxdisplayed&&I<u&&B++});var t=Math.round(B*E/3+Math.floor(B/3)*E/7.1);w.forEach(function(G){delete G.vis});r.forEach(function(G,
I){0===Math.round((I+t)%E)&&(G.vis=!0)})}}var e=b("d3"),a=b("../../registry"),g=b("../../lib"),k=g.ensureSingle,p=g.identity,n=b("../../components/drawing"),c=b("./subtypes"),f=b("./line_points"),d=b("./link_traces"),q=b("../../lib/polygon").tester;F.exports=function(r,u,v,w,y,D){var x,E=!y,B=!!y&&0<y.duration,t=d(r,u,v);v=w.selectAll("g.trace").data(t,function(G){return G[0].trace.uid});v.enter().append("g").attr("class",function(G){return"trace scatter trace"+G[0].trace.uid}).style("stroke-miterlimit",
2);v.order();m(r,v,u);B?(D&&(x=D()),e.transition().duration(y.duration).ease(y.easing).each("end",function(){x&&x()}).each("interrupt",function(){x&&x()}).each(function(){w.selectAll("g.trace").each(function(G,I){h(r,I,u,G,t,this,y)})})):v.each(function(G,I){h(r,I,u,G,t,this,y)});E&&v.exit().remove();w.selectAll("path:not([d])").remove()}},{"../../components/drawing":637,"../../lib":749,"../../lib/polygon":761,"../../registry":880,"./line_points":1169,"./link_traces":1171,"./subtypes":1179,d3:169}],
1176:[function(b,F,C){var m=b("./subtypes");F.exports=function(h,l){var e=h.cd,a=h.xaxis,g=h.yaxis,k=[],p=e[0].trace;if(!m.hasMarkers(p)&&!m.hasText(p))return[];if(!1===l)for(p=0;p<e.length;p++)e[p].selected=0;else for(p=0;p<e.length;p++){var n=e[p];var c=a.c2p(n.x);var f=g.c2p(n.y);null!==n.i&&l.contains([c,f],!1,p,h)?(k.push({pointNumber:n.i,x:a.c2d(n.x),y:g.c2d(n.y)}),n.selected=1):n.selected=0}return k}},{"./subtypes":1179}],1177:[function(b,F,C){var m=["orientation","groupnorm","stackgaps"];
F.exports=function(h,l,e,a){e=e._scatterStackOpts;var g=a("stackgroup");if(g){var k=l.xaxis+l.yaxis,p=e[k];p||(p=e[k]={});e=p[g];k=!1;e?e.traces.push(l):(e=p[g]={traceIndices:[],traces:[l]},k=!0);l={orientation:l.x&&!l.y?"h":"v"};for(g=0;g<m.length;g++){p=m[g];var n=p+"Found";if(!e[n]){var c=void 0!==h[p],f="orientation"===p;if(c||k)if(e[p]=a(p,l[p]),f&&(e.fillDflt="h"===e[p]?"tonextx":"tonexty"),c&&(e[n]=!0,!k&&(delete e.traces[0][p],f)))for(p=0;p<e.traces.length-1;p++)n=e.traces[p],n._input.fill!==
n.fill&&(n.fill=e.fillDflt)}}return e}}},{}],1178:[function(b,F,C){function m(g,k,p){e.pointStyle(g.selectAll("path.point"),k,p)}function h(g,k,p){e.textPointStyle(g.selectAll("text"),k,p)}var l=b("d3"),e=b("../../components/drawing"),a=b("../../registry");F.exports={style:function(g){var k=l.select(g).selectAll("g.trace.scatter");k.style("opacity",function(p){return p[0].trace.opacity});k.selectAll("g.points").each(function(p){var n=l.select(this);m(n,p.trace||p[0].trace,g)});k.selectAll("g.text").each(function(p){var n=
l.select(this);h(n,p.trace||p[0].trace,g)});k.selectAll("g.trace path.js-line").call(e.lineGroupStyle);k.selectAll("g.trace path.js-fill").call(e.fillGroupStyle);a.getComponentMethod("errorbars","style")(k)},stylePoints:m,styleText:h,styleOnSelect:function(g,k,p){k=k[0].trace;k.selectedpoints?(e.selectedPointStyle(p.selectAll("path.point"),k),e.selectedTextStyle(p.selectAll("text"),k)):(m(p,k,g),h(p,k,g))}}},{"../../components/drawing":637,"../../registry":880,d3:169}],1179:[function(b,F,C){var m=
b("../../lib");F.exports={hasLines:function(h){return h.visible&&h.mode&&-1!==h.mode.indexOf("lines")},hasMarkers:function(h){return h.visible&&(h.mode&&-1!==h.mode.indexOf("markers")||"splom"===h.type)},hasText:function(h){return h.visible&&h.mode&&-1!==h.mode.indexOf("text")},isBubble:function(h){return m.isPlainObject(h.marker)&&m.isArrayOrTypedArray(h.marker.size)}}},{"../../lib":749}],1180:[function(b,F,C){var m=b("../../lib");F.exports=function(h,l,e,a,g){g=g||{};a("textposition");m.coerceFont(a,
"textfont",e.font);g.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))}},{"../../lib":749}],1181:[function(b,F,C){var m=b("../../lib"),h=b("../../registry");F.exports=function(l,e,a,g){var k=g("x"),p=g("y");h.getComponentMethod("calendars","handleTraceDefaults")(l,e,["x","y"],a);if(k)l=m.minRowLength(k),p?p=Math.min(l,m.minRowLength(p)):(p=l,g("y0"),g("dy"));else{if(!p)return 0;p=m.minRowLength(p);g("x0");g("dx")}return e._length=p}},{"../../lib":749,"../../registry":880}],1182:[function(b,
F,C){function m(f){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}C=b("../scatter/attributes");var h=b("../../components/colorscale/attributes"),l=b("../../plots/template_attributes").hovertemplateAttrs,e=b("../../plots/template_attributes").texttemplateAttrs,a=b("../../plots/attributes"),g=b("../../constants/gl3d_dashes"),k=b("../../constants/gl3d_markers"),p=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;
var n=C.marker,c=n.line;g=p({width:C.line.width,dash:{valType:"enumerated",values:Object.keys(g),dflt:"solid"}},h("line"));F=F.exports=b({x:C.x,y:C.y,z:{valType:"data_array"},text:p({},C.text,{}),texttemplate:e({},{}),hovertext:p({},C.hovertext,{}),hovertemplate:l(),mode:p({},C.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:m("x"),y:m("y"),z:m("z")},connectgaps:C.connectgaps,line:g,marker:p({symbol:{valType:"enumerated",
values:Object.keys(k),dflt:"circle",arrayOk:!0},size:p({},n.size,{dflt:8}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:p({},n.opacity,{arrayOk:!1}),colorbar:n.colorbar,line:p({width:p({},c.width,{arrayOk:!1})},h("marker.line"))},h("marker")),textposition:p({},C.textposition,{dflt:"top center"}),textfont:{color:C.textfont.color,size:C.textfont.size,family:p({},C.textfont.family,{arrayOk:!1})},hoverinfo:p({},a.hoverinfo)},"calc","nested");F.x.editType=F.y.editType=F.z.editType="calc+clearAxisTypes"},
{"../../components/colorscale/attributes":622,"../../constants/gl3d_dashes":721,"../../constants/gl3d_markers":722,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1183:[function(b,F,C){var m=b("../scatter/arrays_to_calcdata"),h=b("../scatter/colorscale_calc");F.exports=function(l,e){var a=[{x:!1,y:!1,trace:e,t:{}}];m(a,e);h(l,e);return a}},{"../scatter/arrays_to_calcdata":1154,"../scatter/colorscale_calc":1158}],
1184:[function(b,F,C){function m(l,e,a,g){if(!e||!e.visible)return null;e=h.getComponentMethod("errorbars","makeComputeError")(e);for(var k=Array(l.length),p=0;p<l.length;p++){var n=e(+l[p],p);if("log"===g.type){var c=g.c2l(l[p]),f=l[p]-n[0];n=l[p]+n[1];k[p]=[(g.c2l(f,!0)-c)*a,(g.c2l(n,!0)-c)*a];0<f&&(c=g.c2l(f),g._lowerLogErrorBound||(g._lowerLogErrorBound=c),g._lowerErrorBound=Math.min(g._lowerLogErrorBound,c))}else k[p]=[-n[0]*a,n[1]*a]}return k}var h=b("../../registry");F.exports=function(l,e,
a){l=[m(l.x,l.error_x,e[0],a.xaxis),m(l.y,l.error_y,e[1],a.yaxis),m(l.z,l.error_z,e[2],a.zaxis)];a:{for(e=0;e<l.length;e++)if(l[e]){e=l[e].length;break a}e=0}if(0===e)return null;a=Array(e);for(var g=0;g<e;g++){for(var k=[[0,0,0],[0,0,0]],p=0;3>p;p++)if(l[p])for(var n=0;2>n;n++)k[n][p]=l[p][g][n];a[g]=k}return a}},{"../../registry":880}],1185:[function(b,F,C){function m(I,L){this.scene=I;this.uid=L;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode=
"";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=null}function h(I){for(var L=[0,0,0],M=[[0,0,0],[0,0,0],[0,0,0]],N=[1,1,1],H=0;3>H;H++){var J=I[H];J&&!1!==J.copy_zstyle&&!1!==I[2].visible&&(J=I[2]);J&&J.visible&&(L[H]=J.width/2,M[H]=w(J.color),N[H]=J.thickness)}return{capSize:L,color:M,lineWidth:N}}function l(I){return null===I||void 0===I?0:-1<I.indexOf("left")?-1:-1<I.indexOf("right")?1:0}function e(I){return null===
I||void 0===I?0:-1<I.indexOf("top")?-1:-1<I.indexOf("bottom")?1:0}function a(I){var L=[0,0];if(Array.isArray(I))for(var M=0;M<I.length;M++)L[M]=[0,0],I[M]&&(L[M][0]=l(I[M]),L[M][1]=e(I[M]));else L[0]=l(I),L[1]=e(I);return L}function g(I,L){return L(4*I)}function k(I){return E[I]}function p(I,L,M,N,H){if(v.isArrayOrTypedArray(I)){var J=[];for(var O=0;O<L;O++)J[O]=void 0===I[O]?N:M(I[O],H)}else J=M(I,v.identity);return J}function n(I,L){function M(ka,sa){ka=H[ka];return B.tickText(ka,ka.d2l(sa),!0).text}
var N=[],H=I.fullSceneLayout,J=I.dataScale,O=H.xaxis,Q=H.yaxis,U=H.zaxis,P=L.marker,V=L.line,Y=L.x||[],ba=L.y||[],ea=L.z||[],ca=Y.length,ia=L.xcalendar,fa=L.ycalendar,ha=L.zcalendar,na;for(na=0;na<ca;na++){var pa=O.d2l(Y[na],0,ia)*J[0];var ra=Q.d2l(ba[na],0,fa)*J[1];var ta=U.d2l(ea[na],0,ha)*J[2];N[na]=[pa,ra,ta]}if(Array.isArray(L.text))var oa=L.text;else if(void 0!==L.text)for(oa=Array(ca),na=0;na<ca;na++)oa[na]=L.text;var ua=L.texttemplate;if(ua)for(I=I.fullLayout._d3locale,O=(na=Array.isArray(ua))?
Math.min(ua.length,ca):ca,Q=na?function(ka){return ua[ka]}:function(){return ua},oa=Array(O),na=0;na<O;na++)U={x:Y[na],y:ba[na],z:ea[na]},ia={xLabel:M("xaxis",Y[na]),yLabel:M("yaxis",ba[na]),zLabel:M("zaxis",ea[na])},fa={},t(fa,L,na),ha=L._meta||{},oa[na]=v.texttemplateString(Q(na),ia,I,fa,U,ha);N={position:N,mode:L.mode,text:oa};"line"in L&&(N.lineColor=y(V,1,ca),N.lineWidth=V.width,N.lineDashes=V.dash);"marker"in L&&(na=D(L),N.scatterColor=y(P,1,ca),N.scatterSize=p(P.size,ca,g,20,na),N.scatterMarker=
p(P.symbol,ca,k,""),N.scatterLineWidth=P.line.width,N.scatterLineColor=y(P.line,1,ca),N.scatterAngle=0);"textposition"in L&&(N.textOffset=a(L.textposition),N.textColor=y(L.textfont,1,ca),N.textSize=p(L.textfont.size,ca,v.identity,12),N.textFont=L.textfont.family,N.textAngle=0);P=["x","y","z"];N.project=[!1,!1,!1];N.projectScale=[1,1,1];N.projectOpacity=[1,1,1];for(na=0;3>na;++na)if(ca=L.projection[P[na]],N.project[na]=ca.show)N.projectOpacity[na]=ca.opacity,N.projectScale[na]=ca.scale;N.errorBounds=
G(L,J,H);J=h([L.error_x,L.error_y,L.error_z]);N.errorColor=J.color;N.errorLineWidth=J.lineWidth;N.errorCapSize=J.capSize;N.delaunayAxis=L.surfaceaxis;N.delaunayColor=w(L.surfacecolor);return N}function c(I){if(Array.isArray(I)){var L=I[0];Array.isArray(L)&&(I=L);return"rgb("+I.slice(0,3).map(function(M){return Math.round(255*M)})+")"}return null}var f=b("gl-line3d"),d=b("gl-scatter3d"),q=b("gl-error3d"),r=b("gl-mesh3d"),u=b("delaunay-triangulate"),v=b("../../lib"),w=b("../../lib/str2rgbarray"),y=
b("../../lib/gl_format_color").formatColor,D=b("../scatter/make_bubble_size_func"),x=b("../../constants/gl3d_dashes"),E=b("../../constants/gl3d_markers"),B=b("../../plots/cartesian/axes"),t=b("../../components/fx/helpers").appendArrayPointValue,G=b("./calc_errors");b=m.prototype;b.handlePick=function(I){if(I.object&&(I.object===this.linePlot||I.object===this.delaunayMesh||I.object===this.textMarkers||I.object===this.scatterPlot)){var L=I.index=I.data.index;I.object.highlight&&I.object.highlight(null);
this.scatterPlot&&(I.object=this.scatterPlot,this.scatterPlot.highlight(I.data));I.textLabel="";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[L]||0===this.textLabels[L])I.textLabel=this.textLabels[L]}else I.textLabel=this.textLabels;I.traceCoordinate=[this.data.x[L],this.data.y[L],this.data.z[L]];return!0}};b.update=function(I){var L=this.scene.glplot.gl;var M=x.solid;this.data=I;var N=n(this.scene,I);"mode"in N&&(this.mode=N.mode);"lineDashes"in N&&N.lineDashes in x&&(M=
x[N.lineDashes]);this.color=c(N.scatterColor)||c(N.lineColor);this.dataPoints=N.position;M={gl:this.scene.glplot.gl,position:N.position,color:N.lineColor,lineWidth:N.lineWidth||1,dashes:M[0],dashScale:M[1],opacity:I.opacity,connectGaps:I.connectgaps};-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(M):(this.linePlot=f(M),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);
M=I.opacity;I.marker&&I.marker.opacity&&(M*=I.marker.opacity);M={gl:this.scene.glplot.gl,position:N.position,color:N.scatterColor,size:N.scatterSize,glyph:N.scatterMarker,opacity:M,orthographic:!0,lineWidth:N.scatterLineWidth,lineColor:N.scatterLineColor,project:N.project,projectScale:N.projectScale,projectOpacity:N.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(M):(this.scatterPlot=d(M),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):
this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null);M={gl:this.scene.glplot.gl,position:N.position,glyph:N.text,color:N.textColor,size:N.textSize,angle:N.textAngle,alignment:N.textOffset,font:N.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:I.opacity};this.textLabels=I.hovertext||I.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(M):(this.textMarkers=d(M),this.textMarkers._trace=this,this.textMarkers.highlightScale=
1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null);M={gl:this.scene.glplot.gl,position:N.position,color:N.errorColor,error:N.errorBounds,lineWidth:N.errorLineWidth,capSize:N.errorCapSize,opacity:I.opacity};this.errorBars?N.errorBounds?this.errorBars.update(M):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):N.errorBounds&&(this.errorBars=q(M),this.errorBars._trace=
this,this.scene.glplot.add(this.errorBars));if(0<=N.delaunayAxis){M=N.position;var H=N.delaunayColor;N=N.delaunayAxis;var J=(N+1)%3,O=(N+2)%3,Q=[];N=[];var U;for(U=0;U<M.length;++U){var P=M[U];!isNaN(P[J])&&isFinite(P[J])&&!isNaN(P[O])&&isFinite(P[O])&&(Q.push([P[J],P[O]]),N.push(U))}J=u(Q);for(U=0;U<J.length;++U)for(O=J[U],Q=0;Q<O.length;++Q)O[Q]=N[O[Q]];M={positions:M,cells:J,meshColor:H};M.opacity=I.opacity;this.delaunayMesh?this.delaunayMesh.update(M):(M.gl=L,this.delaunayMesh=r(M),this.delaunayMesh._trace=
this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),
this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};F.exports=function(I,L){I=new m(I,L.uid);I.update(L);return I}},{"../../components/fx/helpers":651,"../../constants/gl3d_dashes":721,"../../constants/gl3d_markers":722,"../../lib":749,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"../scatter/make_bubble_size_func":1172,"./calc_errors":1184,"delaunay-triangulate":171,"gl-error3d":264,
"gl-line3d":271,"gl-mesh3d":292,"gl-scatter3d":308}],1186:[function(b,F,C){function m(n,c,f,d){var q=0,r=f("x"),u=f("y");f=f("z");h.getComponentMethod("calendars","handleTraceDefaults")(n,c,["x","y","z"],d);r&&u&&f&&(q=Math.min(r.length,u.length,f.length),c._length=c._xlength=c._ylength=c._zlength=q);return q}var h=b("../../registry"),l=b("../../lib"),e=b("../scatter/subtypes"),a=b("../scatter/marker_defaults"),g=b("../scatter/line_defaults"),k=b("../scatter/text_defaults"),p=b("./attributes");F.exports=
function(n,c,f,d){function q(y,D){return l.coerce(n,c,p,y,D)}if(m(n,c,q,d)){q("text");q("hovertext");q("hovertemplate");q("mode");e.hasLines(c)&&(q("connectgaps"),g(n,c,f,d,q));e.hasMarkers(c)&&a(n,c,f,d,q,{noSelect:!0});e.hasText(c)&&(q("texttemplate"),k(n,c,d,q,{noSelect:!0}));d=(c.line||{}).color;var r=(c.marker||{}).color;0<=q("surfaceaxis")&&q("surfacecolor",d||r);for(var u=["x","y","z"],v=0;3>v;++v){var w="projection."+u[v];q(w+".show")&&(q(w+".opacity"),q(w+".scale"))}u=h.getComponentMethod("errorbars",
"supplyDefaults");u(n,c,d||r||f,{axis:"z"});u(n,c,d||r||f,{axis:"y",inherit:"z"});u(n,c,d||r||f,{axis:"x",inherit:"z"})}else c.visible=!1}},{"../../lib":749,"../../registry":880,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1182}],1187:[function(b,F,C){F.exports={plot:b("./convert"),attributes:b("./attributes"),markerSymbols:b("../../constants/gl3d_markers"),supplyDefaults:b("./defaults"),colorbar:[{container:"marker",
min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:b("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":722,"../../plots/gl3d":839,"./attributes":1182,"./calc":1183,"./convert":1185,"./defaults":1186}],1188:[function(b,F,C){C=b("../scatter/attributes");var m=b("../../plots/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,l=b("../../plots/template_attributes").texttemplateAttrs,
e=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var a=C.marker,g=C.line,k=a.line;F.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:b({},C.mode,{dflt:"markers"}),text:b({},C.text,{}),texttemplate:l({editType:"plot"},{keys:["a","b","text"]}),hovertext:b({},C.hovertext,{}),line:{color:g.color,width:g.width,dash:g.dash,shape:b({},g.shape,{values:["linear","spline"]}),smoothing:g.smoothing,
editType:"calc"},connectgaps:C.connectgaps,fill:b({},C.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:C.fillcolor,marker:b({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:b({width:k.width,editType:"calc"},e("marker.line")),gradient:a.gradient,editType:"calc"},e("marker")),textfont:C.textfont,textposition:C.textposition,selected:C.selected,unselected:C.unselected,hoverinfo:b({},m.hoverinfo,{flags:["a",
"b","text","name"]}),hoveron:C.hoveron,hovertemplate:h()}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1189:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../scatter/colorscale_calc"),l=b("../scatter/arrays_to_calcdata"),e=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,g=b("../carpet/lookup_carpetid");F.exports=function(k,p){var n=p._carpetTrace=g(k,p);
if(n&&n.visible&&"legendonly"!==n.visible){var c;p.xaxis=n.xaxis;p.yaxis=n.yaxis;var f=p._length,d=Array(f),q=!1;for(c=0;c<f;c++){var r=p.a[c];var u=p.b[c];if(m(r)&&m(u)){var v=n.ab2xy(+r,+u,!0),w=n.isVisible(+r,+u);w||(q=!0);d[c]={x:v[0],y:v[1],a:r,b:u,vis:w}}else d[c]={x:!1,y:!1}}p._needsCull=q;d[0].carpet=n;d[0].trace=p;a(p,f);h(k,p);l(d,p);e(d,p);return d}}},{"../carpet/lookup_carpetid":950,"../scatter/arrays_to_calcdata":1154,"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,
"fast-isnumeric":241}],1190:[function(b,F,C){var m=b("../../lib"),h=b("../scatter/constants"),l=b("../scatter/subtypes"),e=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/line_shape_defaults"),k=b("../scatter/text_defaults"),p=b("../scatter/fillcolor_defaults"),n=b("./attributes");F.exports=function(c,f,d,q){function r(w,y){return m.coerce(c,f,n,w,y)}r("carpet");f.xaxis="x";f.yaxis="y";var u=r("a"),v=r("b");if(u=Math.min(u.length,v.length)){f._length=u;r("text");r("texttemplate");
r("hovertext");r("mode",u<h.PTS_LINESONLY?"lines+markers":"lines");l.hasLines(f)&&(a(c,f,d,q,r),g(c,f,r),r("connectgaps"));l.hasMarkers(f)&&e(c,f,d,q,r,{gradient:!0});l.hasText(f)&&k(c,f,q,r);q=[];if(l.hasMarkers(f)||l.hasText(f))r("marker.maxdisplayed"),q.push("points");r("fill");"none"!==f.fill&&(p(c,f,d,r),l.hasLines(f)||g(c,f,r));"tonext"!==f.fill&&"toself"!==f.fill||q.push("fills");"fills"!==r("hoveron",q.join("+")||"points")&&r("hovertemplate");m.coerceSelectionMarkerOpacity(f,r)}else f.visible=
!1}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1188}],1191:[function(b,F,C){F.exports=function(m,h,l,e,a){h=e[a];m.a=h.a;m.b=h.b;m.y=h.y;return m}},{}],1192:[function(b,F,C){F.exports=function(m,h){var l={};h=h._carpet;m=h.ab2ij([m.a,m.b]);var e=Math.floor(m[0]),a=Math.floor(m[1]);h=
h.evalxy([],e,a,m[0]-e,m[1]-a);l.yLabel=h[1].toFixed(3);return l}},{}],1193:[function(b,F,C){var m=b("../scatter/hover"),h=b("../../lib").fillText;F.exports=function(l,e,a,g){function k(f,d){var q=f.labelprefix&&0<f.labelprefix.length?f.labelprefix.replace(/ = $/,""):f._hovertitle;c.push(q+": "+d.toFixed(3)+f.labelsuffix)}if((e=m(l,e,a,g))&&!1!==e[0].index){a=e[0];if(void 0===a.index)return g=l.xa._length,l=g*(1-a.y0/l.ya._length)/2,g-=l,a.x0=Math.max(Math.min(a.x0,g),l),a.x1=Math.max(Math.min(a.x1,
g),l),e;l=a.cd[a.index];a.a=l.a;a.b=l.b;a.xLabelVal=void 0;a.yLabelVal=void 0;g=a.trace;var p=g._carpet,n=g._module.formatLabels(l,g);a.yLabel=n.yLabel;delete a.text;var c=[];g.hovertemplate||(n=(l.hi||g.hoverinfo).split("+"),-1!==n.indexOf("all")&&(n=["a","b","text"]),-1!==n.indexOf("a")&&k(p.aaxis,l.a),-1!==n.indexOf("b")&&k(p.baxis,l.b),c.push("y: "+a.yLabel),-1!==n.indexOf("text")&&h(l,g,c),a.extraText=c.join("\x3cbr\x3e"));return e}}},{"../../lib":749,"../scatter/hover":1166}],1194:[function(b,
F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:b("../../plots/cartesian"),categories:"svg carpet symbols showLegend carpetDependent zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":810,"../scatter/marker_colorbar":1173,"../scatter/select":1176,"../scatter/style":1178,"./attributes":1188,"./calc":1189,"./defaults":1190,"./event_data":1191,"./format_labels":1192,"./hover":1193,"./plot":1195}],1195:[function(b,F,C){var m=b("../scatter/plot"),h=b("../../plots/cartesian/axes"),l=b("../../components/drawing");F.exports=function(e,a,g,k){var p=g[0][0].carpet;a={xaxis:h.getFromId(e,p.xaxis||"x"),yaxis:h.getFromId(e,p.yaxis||"y"),plot:a.plot};m(e,a,
g,k);for(a=0;a<g.length;a++)p=g[a][0].trace,p=k.selectAll("g.trace"+p.uid+" .js-line"),l.setClipUrl(p,g[a][0].carpet._clipPathId,e)}},{"../../components/drawing":637,"../../plots/cartesian/axes":797,"../scatter/plot":1175}],1196:[function(b,F,C){C=b("../../plots/template_attributes").hovertemplateAttrs;var m=b("../../plots/template_attributes").texttemplateAttrs,h=b("../scatter/attributes"),l=b("../../plots/attributes"),e=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash,
g=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var k=h.marker,p=h.line,n=k.line;F.exports=b({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:g({},h.mode,{dflt:"markers"}),text:g({},h.text,{}),texttemplate:m({editType:"plot"},
{keys:["lat","lon","location","text"]}),hovertext:g({},h.hovertext,{}),textfont:h.textfont,textposition:h.textposition,line:{color:p.color,width:p.width,dash:a},connectgaps:h.connectgaps,marker:g({symbol:k.symbol,opacity:k.opacity,size:k.size,sizeref:k.sizeref,sizemin:k.sizemin,sizemode:k.sizemode,colorbar:k.colorbar,line:g({width:n.width},e("marker.line")),gradient:k.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:h.fillcolor,selected:h.selected,
unselected:h.unselected,hoverinfo:g({},l.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:C()},"calc","nested")},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1197:[function(b,F,C){function m(p){return p&&"string"===typeof p}var h=b("fast-isnumeric"),l=b("../../constants/numerical").BADNUM,
e=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),g=b("../scatter/calc_selection"),k=b("../../lib")._;F.exports=function(p,n){var c=Array.isArray(n.locations),f=c?n.locations.length:n._length,d=Array(f);var q=n.geojson?function(y){return m(y)||h(y)}:m;for(var r=0;r<f;r++){var u=d[r]={};if(c){var v=n.locations[r];u.loc=q(v)?v:null}else{v=n.lon[r];var w=n.lat[r];h(v)&&h(w)?u.lonlat=[+v,+w]:u.lonlat=[l,l]}}a(d,n);e(p,n);g(d,n);f&&(d[0].t={labels:{lat:k(p,"lat:")+" ",lon:k(p,"lon:")+
" "}});return d}},{"../../constants/numerical":724,"../../lib":749,"../scatter/arrays_to_calcdata":1154,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1198:[function(b,F,C){var m=b("../../lib"),h=b("../scatter/subtypes"),l=b("../scatter/marker_defaults"),e=b("../scatter/line_defaults"),a=b("../scatter/text_defaults"),g=b("../scatter/fillcolor_defaults"),k=b("./attributes");F.exports=function(p,n,c,f){function d(v,w){return m.coerce(p,n,k,v,w)}var q=d("locations");
if(q&&q.length){var r=d("geojson");if("string"===typeof r&&""!==r||m.isPlainObject(r))var u="geojson-id";"geojson-id"===d("locationmode",u)&&d("featureidkey");q=q.length}else q=d("lon")||[],r=d("lat")||[],q=Math.min(q.length,r.length);q?(n._length=q,d("text"),d("hovertext"),d("hovertemplate"),d("mode"),h.hasLines(n)&&(e(p,n,c,f,d),d("connectgaps")),h.hasMarkers(n)&&l(p,n,c,f,d,{gradient:!0}),h.hasText(n)&&(d("texttemplate"),a(p,n,f,d)),d("fill"),"none"!==n.fill&&g(p,n,c,d),m.coerceSelectionMarkerOpacity(n,
d)):n.visible=!1}},{"../../lib":749,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1196}],1199:[function(b,F,C){F.exports=function(m,h,l,e,a){m.lon=h.lon;m.lat=h.lat;m.location=h.loc?h.loc:null;h=e[a];h.fIn&&h.fIn.properties&&(m.properties=h.fIn.properties);return m}},{}],1200:[function(b,F,C){var m=b("../../plots/cartesian/axes");F.exports=function(h,l,e){var a={};l=e[l.geo]._subplot.mockAxis;
h=h.lonlat;a.lonLabel=m.tickText(l,l.c2l(h[0]),!0).text;a.latLabel=m.tickText(l,l.c2l(h[1]),!0).text;return a}},{"../../plots/cartesian/axes":797}],1201:[function(b,F,C){function m(k,p,n,c){if(!k.hovertemplate){var f=p.hi||k.hoverinfo,d="all"===f?g.hoverinfo.flags:f.split("+");f=-1!==d.indexOf("location")&&Array.isArray(k.locations);var q=-1!==d.indexOf("lon"),r=-1!==d.indexOf("lat");d=-1!==d.indexOf("text");var u=[];f?u.push(p.loc):q&&r?u.push("("+(n.lonLabel+", ")+(n.latLabel+")")):q?u.push(c.lon+
(n.lonLabel+"")):r&&u.push(c.lat+(n.latLabel+""));d&&a(p,k,u);return u.join("\x3cbr\x3e")}}var h=b("../../components/fx"),l=b("../../constants/numerical").BADNUM,e=b("../scatter/get_trace_color"),a=b("../../lib").fillText,g=b("./attributes");F.exports=function(k,p,n){var c=k.cd,f=c[0].trace,d=k.xa,q=k.ya,r=k.subplot,u=r.projection.isLonLatOverEdges,v=r.project;h.getClosest(c,function(D){var x=D.lonlat;if(x[0]===l||u(x))return Infinity;var E=v(x),B=v([p,n]);x=Math.abs(E[0]-B[0]);E=Math.abs(E[1]-
B[1]);D=Math.max(3,D.mrc||0);return Math.max(Math.sqrt(x*x+E*E)-D,1-3/D)},k);if(!1!==k.index){var w=c[k.index],y=w.lonlat;d=[d.c2p(y),q.c2p(y)];q=w.mrc||1;k.x0=d[0]-q;k.x1=d[0]+q;k.y0=d[1]-q;k.y1=d[1]+q;k.loc=w.loc;k.lon=y[0];k.lat=y[1];y={};y[f.geo]={_subplot:r};r=f._module.formatLabels(w,f,y);k.lonLabel=r.lonLabel;k.latLabel=r.latLabel;k.color=e(f,w);k.extraText=m(f,w,k,c[0].t.labels);k.hovertemplate=f.hovertemplate;return[k]}}},{"../../components/fx":655,"../../constants/numerical":724,"../../lib":749,
"../scatter/get_trace_color":1165,"./attributes":1196}],1202:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:b("../../plots/geo"),
categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":829,"../scatter/marker_colorbar":1173,"../scatter/style":1178,"./attributes":1196,"./calc":1197,"./defaults":1198,"./event_data":1199,"./format_labels":1200,"./hover":1201,"./plot":1203,"./select":1204,"./style":1205}],1203:[function(b,F,C){var m=b("d3"),h=b("../../lib"),l=b("../../lib/topojson_utils").getTopojsonFeatures,e=b("../../lib/geojson_utils"),a=b("../../lib/geo_location_utils"),g=b("../../plots/cartesian/autorange").findExtremes,
k=b("../../constants/numerical").BADNUM,p=b("../scatter/calc").calcMarkerSize,n=b("../scatter/subtypes"),c=b("./style");F.exports={calcGeoJSON:function(f,d){var q=f[0].trace;d=d[q.geo];var r=d._subplot,u=q._length;if(Array.isArray(q.locations)){var v=q.locationmode,w="geojson-id"===v?a.extractTraceFeature(f):l(q,r.topojson);for(r=0;r<u;r++){var y=f[r];var D="geojson-id"===v?y.fOut:a.locationToFeature(v,y.loc,w);y.lonlat=D?D.properties.ct:[k,k]}}v={padded:!0};if("geojson"===d.fitbounds&&"geojson-id"===
q.locationmode)f=a.computeBbox(a.getTraceGeojson(q)),w=[f[0],f[2]],D=[f[1],f[3]];else{w=Array(u);D=Array(u);for(r=0;r<u;r++)y=f[r],w[r]=y.lonlat[0],D[r]=y.lonlat[1];v.ppad=p(q,u)}q._extremes.lon=g(d.lonaxis._ax,w,v);q._extremes.lat=g(d.lataxis._ax,D,v)},plot:function(f,d,q){d=d.layers.frontplot.select(".scatterlayer");q=h.makeTraceGroups(d,q,"trace scattergeo");q.selectAll("*").remove();q.each(function(r){var u=m.select(this),v=r[0].trace;if(n.hasLines(v)||"none"!==v.fill){var w=e.calcTraceToLineCoords(r);
w="none"!==v.fill?e.makePolygon(w):e.makeLine(w);u.selectAll("path.js-line").data([{geojson:w,trace:v}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}n.hasMarkers(v)&&u.selectAll("path.point").data(h.identity).enter().append("path").classed("point",!0).each(function(y){y.lonlat[0]===k&&m.select(this).remove()});n.hasText(v)&&u.selectAll("g").data(h.identity).enter().append("g").append("text").each(function(y){y.lonlat[0]===k&&m.select(this).remove()});c(f,r)})}}},{"../../constants/numerical":724,
"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/geojson_utils":743,"../../lib/topojson_utils":776,"../../plots/cartesian/autorange":796,"../scatter/calc":1156,"../scatter/subtypes":1179,"./style":1205,d3:169}],1204:[function(b,F,C){var m=b("../scatter/subtypes"),h=b("../../constants/numerical").BADNUM;F.exports=function(l,e){var a=l.cd,g=l.xaxis,k=l.yaxis,p=[],n=a[0].trace,c;if(!m.hasMarkers(n)&&!m.hasText(n))return[];if(!1===e)for(c=0;c<a.length;c++)a[c].selected=0;else for(c=0;c<a.length;c++){n=
a[c];var f=n.lonlat;if(f[0]!==h){var d=g.c2p(f);var q=k.c2p(f);e.contains([d,q],null,c,l)?(p.push({pointNumber:c,lon:f[0],lat:f[1]}),n.selected=1):n.selected=0}}return p}},{"../../constants/numerical":724,"../scatter/subtypes":1179}],1205:[function(b,F,C){function m(k,p){var n=p[0].trace,c=p[0].node3;c.style("opacity",p[0].trace.opacity);a(c,n,k);g(c,n,k);c.selectAll("path.js-line").style("fill","none").each(function(f){var d=h.select(this);f=f.trace;var q=f.line||{};d.call(e.stroke,q.color).call(l.dashLine,
q.dash||"",q.width||0);"none"!==f.fill&&d.call(e.fill,f.fillcolor)})}var h=b("d3"),l=b("../../components/drawing"),e=b("../../components/color");b=b("../scatter/style");var a=b.stylePoints,g=b.styleText;F.exports=function(k,p){p&&m(k,p)}},{"../../components/color":615,"../../components/drawing":637,"../scatter/style":1178,d3:169}],1206:[function(b,F,C){var m=b("../../plots/attributes");C=b("../scatter/attributes");var h=b("../../components/colorscale/attributes"),l=b("../../lib/extend").extendFlat,
e=b("../../plot_api/edit_types").overrideAll;b=b("./constants").DASHES;var a=C.line,g=C.marker,k=g.line;F=F.exports=e({x:C.x,x0:C.x0,dx:C.dx,y:C.y,y0:C.y0,dy:C.dy,text:C.text,hovertext:C.hovertext,textposition:C.textposition,textfont:C.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:a.color,width:a.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(b),
dflt:"solid"}},marker:l({},h("marker"),{symbol:g.symbol,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,opacity:g.opacity,colorbar:g.colorbar,line:l({},h("marker.line"),{width:k.width})}),connectgaps:C.connectgaps,fill:l({},C.fill,{dflt:"none"}),fillcolor:C.fillcolor,selected:{marker:C.selected.marker,textfont:C.selected.textfont},unselected:{marker:C.unselected.marker,textfont:C.unselected.textfont},opacity:m.opacity},"calc","nested");F.x.editType=F.y.editType=F.x0.editType=F.y0.editType=
"calc+clearAxisTypes";F.hovertemplate=C.hovertemplate;F.texttemplate=C.texttemplate},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../scatter/attributes":1155,"./constants":1208}],1207:[function(b,F,C){function m(r,u,v){r=r._extremes[u._id];u=a(u,v._bnds,{padded:!0});r.min=r.min.concat(u.min);r.max=r.max.concat(u.max)}var h=b("@plotly/point-cluster"),l=b("../../lib"),e=b("../../plots/cartesian/axis_ids"),a=b("../../plots/cartesian/autorange").findExtremes;
C=b("../scatter/calc");var g=C.calcMarkerSize,k=C.calcAxisExpansion,p=C.setFirstScatter,n=b("../scatter/colorscale_calc"),c=b("./convert"),f=b("./scene_update"),d=b("../../constants/numerical").BADNUM,q=b("./constants").TOO_MANY_POINTS;F.exports=function(r,u){var v=r._fullLayout,w=e.getFromId(r,u.xaxis),y=e.getFromId(r,u.yaxis),D=v._plots[u.xaxis+u.yaxis],x=u._length,E=x>=q,B=2*x,t={},G,I=u._x=w.makeCalcdata(u,"x"),L=u._y=y.makeCalcdata(u,"y"),M=Array(B);for(G=0;G<x;G++){var N=I[G];var H=L[G];M[2*
G]=N===d?NaN:N;M[2*G+1]=H===d?NaN:H}if("log"===w.type)for(G=0;G<B;G+=2)M[G]=w.c2l(M[G]);if("log"===y.type)for(G=1;G<B;G+=2)M[G]=y.c2l(M[G]);if(E&&"log"!==w.type&&"log"!==y.type)t.tree=h(M);else for(B=t.ids=Array(x),G=0;G<x;G++)B[G]=G;n(r,u);G=c.style(r,u);G.marker&&(G.marker.positions=M);G.line&&1<M.length&&l.extendFlat(G.line,c.linePositions(r,u,M));if(G.errorX||G.errorY)B=c.errorBarPositions(r,u,M,I,L),G.errorX&&l.extendFlat(G.errorX,B.x),G.errorY&&l.extendFlat(G.errorY,B.y);G.text&&(l.extendFlat(G.text,
{positions:M},c.textPosition(r,u,G.text,G.marker)),l.extendFlat(G.textSel,{positions:M},c.textPosition(r,u,G.text,G.markerSel)),l.extendFlat(G.textUnsel,{positions:M},c.textPosition(r,u,G.text,G.markerUnsel)));D=f(r,D);p(v,u);var J;E?G.marker&&(J=2*(G.marker.sizeAvg||Math.max(G.marker.size,3))):J=g(u,x);k(r,u,w,y,I,L,J);G.errorX&&m(u,w,G.errorX);G.errorY&&m(u,y,G.errorY);G.fill&&!D.fill2d&&(D.fill2d=!0);G.marker&&!D.scatter2d&&(D.scatter2d=!0);G.line&&!D.line2d&&(D.line2d=!0);!G.errorX&&!G.errorY||
D.error2d||(D.error2d=!0);G.text&&!D.glText&&(D.glText=!0);G.marker&&(G.marker.snap=x);D.lineOptions.push(G.line);D.errorXOptions.push(G.errorX);D.errorYOptions.push(G.errorY);D.fillOptions.push(G.fill);D.markerOptions.push(G.marker);D.markerSelectedOptions.push(G.markerSel);D.markerUnselectedOptions.push(G.markerUnsel);D.textOptions.push(G.text);D.textSelectedOptions.push(G.textSel);D.textUnselectedOptions.push(G.textUnsel);D.selectBatch.push([]);D.unselectBatch.push([]);t._scene=D;t.index=D.count;
t.x=I;t.y=L;t.positions=M;D.count++;return[{x:!1,y:!1,t,trace:u}]}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/autorange":796,"../../plots/cartesian/axis_ids":800,"../scatter/calc":1156,"../scatter/colorscale_calc":1158,"./constants":1208,"./convert":1209,"./scene_update":1217,"@plotly/point-cluster":57}],1208:[function(b,F,C){F.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,
1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1209:[function(b,F,C){function m(M,N){var H=M._fullLayout;M=N._length;var J=N.textfont,O=N.textposition,Q=Array.isArray(O)?O:[O],U=J.color;O=J.size;J=J.family;var P={},V,Y=N.texttemplate;if(Y){P.text=[];var ba=H._d3locale,ea=(V=Array.isArray(Y))?Math.min(Y.length,M):M,ca=V?function(pa){return Y[pa]}:function(){return Y};for(V=0;V<ea;V++){var ia={i:V},fa=N._module.formatLabels(ia,N,H),ha={};E(ha,N,V);var na=N._meta||{};P.text.push(f.texttemplateString(ca(V),
fa,ba,ha,ia,na))}}else Array.isArray(N.text)&&N.text.length<M?P.text=N.text.slice():P.text=N.text;if(Array.isArray(P.text))for(V=P.text.length;V<M;V++)P.text[V]="";P.opacity=N.opacity;P.font={};P.align=[];P.baseline=[];for(V=0;V<Q.length;V++){N=Q[V].split(/\s+/);switch(N[1]){case "left":P.align.push("right");break;case "right":P.align.push("left");break;default:P.align.push(N[1])}switch(N[0]){case "top":P.baseline.push("bottom");break;case "bottom":P.baseline.push("top");break;default:P.baseline.push(N[0])}}if(Array.isArray(U))for(P.color=
Array(M),V=0;V<M;V++)P.color[V]=U[V];else P.color=U;if(f.isArrayOrTypedArray(O)||Array.isArray(J))for(P.font=Array(M),V=0;V<M;V++)N=P.font[V]={},N.size=f.isTypedArray(O)?O[V]:Array.isArray(O)?k(O[V])?O[V]:0:O,N.family=Array.isArray(J)?J[V]:J;else P.font={size:O,family:J};return P}function h(M){var N=M._length,H=M.marker,J={},O=f.isArrayOrTypedArray(H.symbol);var Q=f.isArrayOrTypedArray(H.color);var U=f.isArrayOrTypedArray(H.line.color),P=f.isArrayOrTypedArray(H.opacity),V=f.isArrayOrTypedArray(H.size),
Y=f.isArrayOrTypedArray(H.line.width),ba;O||(ba=w.isOpenSymbol(H.symbol));if(O||Q||U||P){J.colors=Array(N);J.borderColors=Array(N);U=r(H,H.opacity,N);P=r(H.line,H.opacity,N);if(!Array.isArray(P[0])){var ea=P;P=Array(N);for(Q=0;Q<N;Q++)P[Q]=ea}if(!Array.isArray(U[0]))for(ea=U,U=Array(N),Q=0;Q<N;Q++)U[Q]=ea;J.colors=U;J.borderColors=P;for(Q=0;Q<N;Q++)O&&(ba=w.isOpenSymbol(H.symbol[Q])),ba&&(P[Q]=U[Q].slice(),U[Q]=U[Q].slice(),U[Q][3]=0);J.opacity=M.opacity}else ba?(J.color=n(H.color,"uint8"),J.color[3]=
0,J.borderColor=n(H.color,"uint8")):(J.color=n(H.color,"uint8"),J.borderColor=n(H.line.color,"uint8")),J.opacity=M.opacity*H.opacity;if(O)for(J.markers=Array(N),Q=0;Q<N;Q++)J.markers[Q]=g(H.symbol[Q]);else J.marker=g(H.symbol);ba=v(M);if(V||Y){M=J.sizes=Array(N);O=J.borderSizes=Array(N);U=0;if(V){for(Q=0;Q<N;Q++)M[Q]=ba(H.size[Q]),U+=M[Q];var ca=U/N}else for(V=ba(H.size),Q=0;Q<N;Q++)M[Q]=V;if(Y)for(Q=0;Q<N;Q++)O[Q]=H.line.width[Q]/2;else for(V=H.line.width/2,Q=0;Q<N;Q++)O[Q]=V;J.sizeAvg=ca}else J.size=
ba(H&&H.size||10),J.borderSizes=ba(H.line.width);return J}function l(M,N){M=M.marker;var H={};if(!N)return H;N.marker&&N.marker.symbol?H=h(f.extendFlat({},M,N.marker)):N.marker&&(N.marker.size&&(H.size=N.marker.size/2),N.marker.color&&(H.colors=N.marker.color),void 0!==N.marker.opacity&&(H.opacity=N.marker.opacity));return H}function e(M,N,H){var J={};if(!H)return J;H.textfont&&(N={opacity:1,text:N.text,texttemplate:N.texttemplate,textposition:N.textposition,textfont:f.extendFlat({},N.textfont)},
H.textfont&&f.extendFlat(N.textfont,H.textfont),J=m(M,N));return J}function a(M,N){var H={capSize:2*N.width,lineWidth:N.thickness,color:N.color};N.copy_ystyle&&(H=M.error_y);return H}function g(M){if("circle"===M)return null;var N=d.symbolNumber(M);var H=d.symbolFuncs[N%100];var J=!!d.symbolNoDot[N%100];N=!!d.symbolNoFill[N%100];var O=w.isDotSymbol(M);if(I[M])return I[M];H=O&&!J?H(1.1*t)+L:H(t);H=p(H,{w:B,h:B,viewBox:[-t,-t,t,t],stroke:N?G:-G});return(I[M]=H)||null}var k=b("fast-isnumeric"),p=b("svg-path-sdf"),
n=b("color-normalize"),c=b("../../registry"),f=b("../../lib"),d=b("../../components/drawing"),q=b("../../plots/cartesian/axis_ids"),r=b("../../lib/gl_format_color").formatColor,u=b("../scatter/subtypes"),v=b("../scatter/make_bubble_size_func"),w=b("./helpers"),y=b("./constants"),D=b("../../constants/interactions").DESELECTDIM,x={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},E=b("../../components/fx/helpers").appendArrayPointValue,B=y.SYMBOL_SDF_SIZE,t=y.SYMBOL_SIZE,G=y.SYMBOL_STROKE,
I={},L=d.symbolFuncs[0](.05*t);F.exports={style:function(M,N){var H={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==N.visible)return H;u.hasText(N)&&(H.text=m(M,N),H.textSel=e(M,N,N.selected),H.textUnsel=e(M,N,N.unselected));if(u.hasMarkers(N)&&(H.marker=h(N),H.markerSel=l(N,N.selected),H.markerUnsel=l(N,N.unselected),!N.unselected&&f.isArrayOrTypedArray(N.marker.opacity))){var J=N.marker.opacity;
H.markerUnsel.opacity=Array(J.length);for(M=0;M<J.length;M++)H.markerUnsel.opacity[M]=D*J[M]}if(u.hasLines(N)){H.line={overlay:!0,thickness:N.line.width,color:N.line.color,opacity:N.opacity};J=(y.DASHES[N.line.dash]||[1]).slice();for(M=0;M<J.length;++M)J[M]*=N.line.width;H.line.dashes=J}N.error_x&&N.error_x.visible&&(H.errorX=a(N,N.error_x));N.error_y&&N.error_y.visible&&(H.errorY=a(N,N.error_y));N.fill&&"none"!==N.fill&&(H.fill={closed:!0,fill:N.fillcolor,thickness:0});return H},markerStyle:h,markerSelection:l,
linePositions:function(M,N,H){var J=H.length,O=J/2;if(u.hasLines(N)&&O)if("hv"===N.line.shape){var Q=[];for(M=0;M<O-1;M++)isNaN(H[2*M])||isNaN(H[2*M+1])?Q.push(NaN,NaN,NaN,NaN):(Q.push(H[2*M],H[2*M+1]),isNaN(H[2*M+2])||isNaN(H[2*M+3])?Q.push(NaN,NaN):Q.push(H[2*M+2],H[2*M+1]));Q.push(H[J-2],H[J-1])}else if("hvh"===N.line.shape){Q=[];for(M=0;M<O-1;M++)if(isNaN(H[2*M])||isNaN(H[2*M+1])||isNaN(H[2*M+2])||isNaN(H[2*M+3]))isNaN(H[2*M])||isNaN(H[2*M+1])?Q.push(NaN,NaN):Q.push(H[2*M],H[2*M+1]),Q.push(NaN,
NaN);else{var U=(H[2*M]+H[2*M+2])/2;Q.push(H[2*M],H[2*M+1],U,H[2*M+1],U,H[2*M+3])}Q.push(H[J-2],H[J-1])}else if("vhv"===N.line.shape){Q=[];for(M=0;M<O-1;M++)isNaN(H[2*M])||isNaN(H[2*M+1])||isNaN(H[2*M+2])||isNaN(H[2*M+3])?(isNaN(H[2*M])||isNaN(H[2*M+1])?Q.push(NaN,NaN):Q.push(H[2*M],H[2*M+1]),Q.push(NaN,NaN)):(U=(H[2*M+1]+H[2*M+3])/2,Q.push(H[2*M],H[2*M+1],H[2*M],U,H[2*M+2],U));Q.push(H[J-2],H[J-1])}else if("vh"===N.line.shape){Q=[];for(M=0;M<O-1;M++)isNaN(H[2*M])||isNaN(H[2*M+1])?Q.push(NaN,NaN,
NaN,NaN):(Q.push(H[2*M],H[2*M+1]),isNaN(H[2*M+2])||isNaN(H[2*M+3])?Q.push(NaN,NaN):Q.push(H[2*M],H[2*M+3]));Q.push(H[J-2],H[J-1])}else Q=H;J=!1;for(M=0;M<Q.length;M++)if(isNaN(Q[M])){J=!0;break}H=J||Q.length>y.TOO_MANY_POINTS?"rect":u.hasMarkers(N)?"rect":"round";if(J&&N.connectgaps)for(N=Q[0],J=Q[1],M=0;M<Q.length;M+=2)isNaN(Q[M])||isNaN(Q[M+1])?(Q[M]=N,Q[M+1]=J):(N=Q[M],J=Q[M+1]);return{join:H,positions:Q}},errorBarPositions:function(M,N,H,J,O){function Q(ba,ea){var ca=ea._id.charAt(0),ia=N["error_"+
ca];if(ia&&ia.visible&&("linear"===ea.type||"log"===ea.type)){ia=U(ia);for(var fa={x:0,y:1}[ca],ha={x:[0,1,2,3],y:[2,3,0,1]}[ca],na=new Float64Array(4*V),pa=Infinity,ra=-Infinity,ta=0,oa=0;ta<V;ta++,oa+=4){var ua=ba[ta];if(k(ua)){var ka=H[2*ta+fa],sa=ia(ua,ta),ya=sa[0];sa=sa[1];if(k(ya)&&k(sa)){var qa=ua+sa;na[oa+ha[0]]=ka-ea.c2l(ua-ya);na[oa+ha[1]]=ea.c2l(qa)-ka;na[oa+ha[2]]=0;na[oa+ha[3]]=0;pa=Math.min(pa,ua-ya);ra=Math.max(ra,ua+sa)}}}Y[ca]={positions:H,errors:na,_bnds:[pa,ra]}}}var U=c.getComponentMethod("errorbars",
"makeComputeError"),P=q.getFromId(M,N.xaxis);M=q.getFromId(M,N.yaxis);var V=H.length/2,Y={};Q(J,P);Q(O,M);return Y},textPosition:function(M,N,H,J){M=N._length;var O={};if(u.hasMarkers(N)){N=H.font;var Q=H.align,U=H.baseline;O.offset=Array(M);for(H=0;H<M;H++){var P=J.sizes?J.sizes[H]:J.size,V=Array.isArray(N)?N[H].size:N.size,Y=Array.isArray(Q)?1<Q.length?Q[H]:Q[0]:Q,ba=Array.isArray(U)?1<U.length?U[H]:U[0]:U;ba=x[ba];P=P?P/.8+1:0;O.offset[H]=[x[Y]*P/V,(-ba*P-.5*ba)/V]}}return O}}},{"../../components/drawing":637,
"../../components/fx/helpers":651,"../../constants/interactions":723,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/cartesian/axis_ids":800,"../../registry":880,"../scatter/make_bubble_size_func":1172,"../scatter/subtypes":1179,"./constants":1208,"./helpers":1213,"color-normalize":125,"fast-isnumeric":241,"svg-path-sdf":546}],1210:[function(b,F,C){var m=b("../../lib"),h=b("../../registry"),l=b("./helpers"),e=b("./attributes"),a=b("../scatter/constants"),g=b("../scatter/subtypes"),k=
b("../scatter/xy_defaults"),p=b("../scatter/marker_defaults"),n=b("../scatter/line_defaults"),c=b("../scatter/fillcolor_defaults"),f=b("../scatter/text_defaults");F.exports=function(d,q,r,u){function v(x,E){return m.coerce(d,q,e,x,E)}var w=d.marker?l.isOpenSymbol(d.marker.symbol):!1,y=g.isBubble(d),D=k(d,q,u,v);D?(D=D<a.PTS_LINESONLY?"lines+markers":"lines",v("text"),v("hovertext"),v("hovertemplate"),v("mode",D),g.hasLines(q)&&(v("connectgaps"),n(d,q,r,u,v),v("line.shape")),g.hasMarkers(q)&&(p(d,
q,r,u,v),v("marker.line.width",w||y?1:0)),g.hasText(q)&&(v("texttemplate"),f(d,q,u,v)),u=(q.line||{}).color,w=(q.marker||{}).color,v("fill"),"none"!==q.fill&&c(d,q,r,v),y=h.getComponentMethod("errorbars","supplyDefaults"),y(d,q,u||w||r,{axis:"y"}),y(d,q,u||w||r,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(q,v)):q.visible=!1}},{"../../lib":749,"../../registry":880,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,
"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"../scatter/xy_defaults":1181,"./attributes":1206,"./helpers":1213}],1211:[function(b,F,C){var m=b("../../lib"),h=b("../../components/color"),l=b("../../constants/interactions").DESELECTDIM;F.exports={styleTextSelection:function(e){e=e[0];var a=e.trace,g=e.t;e=g._scene;g=g.index;var k=e.selectBatch[g],p=e.unselectBatch[g],n=e.textOptions[g],c=e.textSelectedOptions[g]||{},f=e.textUnselectedOptions[g]||{},d=m.extendFlat({},n);if(k.length||p.length){c=
c.color;f=f.color;n=n.color;var q=Array.isArray(n);d.color=Array(a._length);for(a=0;a<k.length;a++){var r=k[a];d.color[r]=c||(q?n[r]:n)}for(a=0;a<p.length;a++)r=p[a],k=q?n[r]:n,d.color[r]=f?f:c?k:h.addOpacity(k,l)}e.glText[g].update(d)}}},{"../../components/color":615,"../../constants/interactions":723,"../../lib":749}],1212:[function(b,F,C){var m=b("../scatter/format_labels");F.exports=function(h,l,e){var a=h.i;"x"in h||(h.x=l._x[a]);"y"in h||(h.y=l._y[a]);return m(h,l,e)}},{"../scatter/format_labels":1164}],
1213:[function(b,F,C){var m=b("./constants");C.isOpenSymbol=function(h){return"string"===typeof h?m.OPEN_RE.test(h):100<h%200};C.isDotSymbol=function(h){return"string"===typeof h?m.DOT_RE.test(h):200<h}},{"./constants":1208}],1214:[function(b,F,C){function m(a,g,k,p){var n=a.xa,c=a.ya,f=a.distance,d=a.dxy,q=a.index;g={pointNumber:q,x:g[q],y:k[q]};g.tx=Array.isArray(p.text)?p.text[q]:p.text;g.htx=Array.isArray(p.hovertext)?p.hovertext[q]:p.hovertext;g.data=Array.isArray(p.customdata)?p.customdata[q]:
p.customdata;g.tp=Array.isArray(p.textposition)?p.textposition[q]:p.textposition;if(k=p.textfont)g.ts=l.isArrayOrTypedArray(k.size)?k.size[q]:k.size,g.tc=Array.isArray(k.color)?k.color[q]:k.color,g.tf=Array.isArray(k.family)?k.family[q]:k.family;if(k=p.marker)g.ms=l.isArrayOrTypedArray(k.size)?k.size[q]:k.size,g.mo=l.isArrayOrTypedArray(k.opacity)?k.opacity[q]:k.opacity,g.mx=l.isArrayOrTypedArray(k.symbol)?k.symbol[q]:k.symbol,g.mc=l.isArrayOrTypedArray(k.color)?k.color[q]:k.color;var r=k&&k.line;
r&&(g.mlc=Array.isArray(r.color)?r.color[q]:r.color,g.mlw=l.isArrayOrTypedArray(r.width)?r.width[q]:r.width);(k=k&&k.gradient)&&"none"!==k.type&&(g.mgt=Array.isArray(k.type)?k.type[q]:k.type,g.mgc=Array.isArray(k.color)?k.color[q]:k.color);n=n.c2p(g.x,!0);c=c.c2p(g.y,!0);k=g.mrc||1;if(r=p.hoverlabel)g.hbg=Array.isArray(r.bgcolor)?r.bgcolor[q]:r.bgcolor,g.hbc=Array.isArray(r.bordercolor)?r.bordercolor[q]:r.bordercolor,g.hts=l.isArrayOrTypedArray(r.font.size)?r.font.size[q]:r.font.size,g.htc=Array.isArray(r.font.color)?
r.font.color[q]:r.font.color,g.htf=Array.isArray(r.font.family)?r.font.family[q]:r.font.family,g.hnl=l.isArrayOrTypedArray(r.namelength)?r.namelength[q]:r.namelength;if(r=p.hoverinfo)g.hi=Array.isArray(r)?r[q]:r;if(r=p.hovertemplate)g.ht=Array.isArray(r)?r[q]:r;q={};q[a.index]=g;a=l.extendFlat({},a,{color:e(p,g),x0:n-k,x1:n+k,xLabelVal:g.x,y0:c-k,y1:c+k,yLabelVal:g.y,cd:q,distance:f,spikeDistance:d,hovertemplate:g.ht});g.htx?a.text=g.htx:g.tx?a.text=g.tx:p.text&&(a.text=p.text);l.fillText(g,p,a);
h.getComponentMethod("errorbars","hoverInfo")(g,p,a);return a}var h=b("../../registry"),l=b("../../lib"),e=b("../scatter/get_trace_color");F.exports={hoverPoints:function(a,g,k,p){var n=a.cd,c=n[0].t;n=n[0].trace;var f=a.xa,d=a.ya,q=c.x,r=c.y;g=f.c2p(g);k=d.c2p(k);var u=a.distance;if(c.tree){var v=f.p2c(g-u),w=f.p2c(g+u),y=d.p2c(k-u),D=d.p2c(k+u);c="x"===p?c.tree.range(Math.min(v,w),Math.min(d._rl[0],d._rl[1]),Math.max(v,w),Math.max(d._rl[0],d._rl[1])):c.tree.range(Math.min(v,w),Math.min(y,D),Math.max(v,
w),Math.max(y,D))}else c=c.ids;if("x"===p)for(p=0;p<c.length;p++){if(w=q[c[p]],w=Math.abs(f.c2p(w)-g),w<u){u=w;v=d.c2p(r[c[p]])-k;var x=Math.sqrt(w*w+v*v);var E=c[p]}}else for(p=c.length-1;-1<p;p--)w=q[c[p]],v=r[c[p]],w=f.c2p(w)-g,v=d.c2p(v)-k,v=Math.sqrt(w*w+v*v),v<u&&(u=x=v,E=c[p]);a.index=E;a.distance=u;a.dxy=x;return void 0===E?[a]:[m(a,q,r,n)]},calcHover:m}},{"../../lib":749,"../../registry":880,"../scatter/get_trace_color":1165}],1215:[function(b,F,C){C=b("./hover");F.exports={moduleType:"trace",
name:"scattergl",basePlotModule:b("../../plots/cartesian"),categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../scatter/cross_trace_defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:C.hoverPoints,selectPoints:b("./select"),meta:{}}},{"../../plots/cartesian":810,"../scatter/cross_trace_defaults":1161,
"../scatter/marker_colorbar":1173,"./attributes":1206,"./calc":1207,"./defaults":1210,"./format_labels":1212,"./hover":1214,"./plot":1216,"./select":1218}],1216:[function(b,F,C){function m(d,q,r){var u=d._size;return[u.l+q.domain[0]*u.w,u.b+r.domain[0]*u.h,d.width-u.r-(1-q.domain[1])*u.w,d.height-u.t-(1-r.domain[1])*u.h]}var h=b("regl-scatter2d"),l=b("regl-line2d"),e=b("regl-error2d"),a=b("gl-text"),g=b("../../lib"),k=b("../../components/dragelement/helpers").selectMode,p=b("../../lib/prepare_regl"),
n=b("../scatter/subtypes"),c=b("../scatter/link_traces"),f=b("./edit_style").styleTextSelection;F.exports=function(d,q,r){if(r.length){var u=d._fullLayout,v=q._scene,w=q.xaxis,y=q.yaxis;if(v)if(p(d,["ANGLE_instanced_arrays","OES_element_index_uint"])){var D=v.count,x=u._glcanvas.data()[0].regl;c(d,q,r);if(v.dirty){!0===v.error2d&&(v.error2d=e(x));!0===v.line2d&&(v.line2d=l(x));!0===v.scatter2d&&(v.scatter2d=h(x,{constPointSize:!0}));!0===v.fill2d&&(v.fill2d=l(x));if(!0===v.glText)for(v.glText=Array(D),
d=0;d<D;d++)v.glText[d]=new a(x);if(v.glText){if(D>v.glText.length)for(q=D-v.glText.length,d=0;d<q;d++)v.glText.push(new a(x));else D<v.glText.length&&v.glText.splice(D,v.glText.length-D).forEach(function(J){J.destroy()});for(d=0;d<D;d++)v.glText[d].update(v.textOptions[d])}v.line2d&&(v.line2d.update(v.lineOptions),v.lineOptions=v.lineOptions.map(function(J){if(J&&J.positions){for(var O=J.positions,Q=0;Q<O.length&&(isNaN(O[Q])||isNaN(O[Q+1]));)Q+=2;for(var U=O.length-2;U>Q&&(isNaN(O[U])||isNaN(O[U+
1]));)U-=2;J.positions=O.slice(Q,U+2)}return J}),v.line2d.update(v.lineOptions));v.error2d&&(d=(v.errorXOptions||[]).concat(v.errorYOptions||[]),v.error2d.update(d));v.scatter2d&&v.scatter2d.update(v.markerOptions);v.fillOrder=g.repeat(null,D);v.fill2d&&(v.fillOptions=v.fillOptions.map(function(J,O){var Q=r[O];if(J&&Q&&Q[0]&&Q[0].trace){var U=Q[0];Q=U.trace;var P=U.t,V=v.lineOptions[O],Y;U=[];Q._ownfill&&U.push(O);Q._nexttrace&&U.push(O+1);U.length&&(v.fillOrder[O]=U);U=[];P=V&&V.positions||P.positions;
if("tozeroy"===Q.fill){for(V=0;V<P.length&&isNaN(P[V+1]);)V+=2;for(Y=P.length-2;Y>V&&isNaN(P[Y+1]);)Y-=2;0!==P[V+1]&&(U=[P[V],0]);U=U.concat(P.slice(V,Y+2));0!==P[Y+1]&&(U=U.concat([P[Y],0]))}else if("tozerox"===Q.fill){for(V=0;V<P.length&&isNaN(P[V]);)V+=2;for(Y=P.length-2;Y>V&&isNaN(P[Y]);)Y-=2;0!==P[V]&&(U=[0,P[V+1]]);U=U.concat(P.slice(V,Y+2));0!==P[Y]&&(U=U.concat([0,P[Y+1]]))}else if("toself"===Q.fill||"tonext"===Q.fill){U=[];for(V=Y=0;V<P.length;V+=2)if(isNaN(P[V])||isNaN(P[V+1]))U=U.concat(P.slice(Y,
V)),U.push(P[Y],P[Y+1]),Y=V+2;U=U.concat(P.slice(Y));Y&&U.push(P[Y],P[Y+1])}else if(V=Q._nexttrace)if(Y=v.lineOptions[O+1])if(Y=Y.positions,"tonexty"===Q.fill){U=P.slice();for(O=Math.floor(Y.length/2);O--;){P=Y[2*O];var ba=Y[2*O+1];isNaN(P)||isNaN(ba)||U.push(P,ba)}J.fill=V.fillcolor}if(Q._prevtrace&&"tonext"===Q._prevtrace.fill){O=v.lineOptions[O-1].positions;P=U.length/2;Y=[P];for(V=0;V<O.length;V+=2)(isNaN(O[V])||isNaN(O[V+1]))&&Y.push(V/2+P+1);U=U.concat(O);J.hole=Y}J.fillmode=Q.fill;J.opacity=
Q.opacity;J.positions=U;return J}}),v.fill2d.update(v.fillOptions))}x=k(u.dragmode);q=-1<u.clickmode.indexOf("select");for(d=0;d<D;d++){var E=r[d][0];var B=E.trace;var t=E.t,G=t.index;E=B._length;var I=t.x,L=t.y;if(B.selectedpoints||x||q){x||(x=!0);if(B.selectedpoints){var M=v.selectBatch[G]=g.selIndices2selPoints(B),N={};for(B=0;B<M.length;B++)N[M[B]]=1;M=[];for(B=0;B<E;B++)N[B]||M.push(B);v.unselectBatch[G]=M}G=t.xpx=Array(E);t=t.ypx=Array(E);for(B=0;B<E;B++)G[B]=w.c2p(I[B]),t[B]=y.c2p(L[B])}else t.xpx=
t.ypx=null}if(x){v.select2d||(v.select2d=h(u._glcanvas.data()[1].regl));if(v.scatter2d){x=Array(D);for(d=0;d<D;d++)x[d]=v.selectBatch[d].length||v.unselectBatch[d].length?v.markerUnselectedOptions[d]:{};v.scatter2d.update(x)}v.select2d&&(v.select2d.update(v.markerOptions),v.select2d.update(v.markerSelectedOptions));v.glText&&r.forEach(function(J){n.hasText(((J||[])[0]||{}).trace||{})&&f(J)})}else v.scatter2d&&v.scatter2d.update(v.markerOptions);var H={viewport:m(u,w,y),range:[(w._rl||w.range)[0],
(y._rl||y.range)[0],(w._rl||w.range)[1],(y._rl||y.range)[1]]};u=g.repeat(H,v.count);v.fill2d&&v.fill2d.update(u);v.line2d&&v.line2d.update(u);v.error2d&&v.error2d.update(u.concat(u));v.scatter2d&&v.scatter2d.update(u);v.select2d&&v.select2d.update(u);v.glText&&v.glText.forEach(function(J){J.update(H)})}else v.init()}}},{"../../components/dragelement/helpers":633,"../../lib":749,"../../lib/prepare_regl":762,"../scatter/link_traces":1171,"../scatter/subtypes":1179,"./edit_style":1211,"gl-text":326,
"regl-error2d":508,"regl-line2d":509,"regl-scatter2d":510}],1217:[function(b,F,C){var m=b("../../lib");F.exports=function(h,l){var e=l._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},g={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};l._scene||(e=l._scene={},e.init=function(){m.extendFlat(e,
g,a)},e.init(),e.update=function(k){var p=m.repeat(k,e.count);e.fill2d&&e.fill2d.update(p);e.scatter2d&&e.scatter2d.update(p);e.line2d&&e.line2d.update(p);e.error2d&&e.error2d.update(p.concat(p));e.select2d&&e.select2d.update(p);if(e.glText)for(p=0;p<e.count;p++)e.glText[p].update(k)},e.draw=function(){for(var k=e.count,p=e.fill2d,n=e.error2d,c=e.line2d,f=e.scatter2d,d=e.glText,q=e.select2d,r=e.selectBatch,u=e.unselectBatch,v=0;v<k;v++){p&&e.fillOrder[v]&&p.draw(e.fillOrder[v]);c&&e.lineOptions[v]&&
c.draw(v);n&&(e.errorXOptions[v]&&n.draw(v),e.errorYOptions[v]&&n.draw(v+k));if(f&&e.markerOptions[v])if(u[v].length){var w=m.repeat([],e.count);w[v]=u[v];f.draw(w)}else r[v].length||f.draw(v);d[v]&&e.textOptions[v]&&d[v].render()}q&&q.draw(r);e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy();e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy();e.error2d&&e.error2d.destroy&&e.error2d.destroy();e.line2d&&e.line2d.destroy&&e.line2d.destroy();e.select2d&&e.select2d.destroy&&
e.select2d.destroy();e.glText&&e.glText.forEach(function(k){k.destroy&&k.destroy()});e.lineOptions=null;e.fillOptions=null;e.markerOptions=null;e.markerSelectedOptions=null;e.markerUnselectedOptions=null;e.errorXOptions=null;e.errorYOptions=null;e.textOptions=null;e.textSelectedOptions=null;e.textUnselectedOptions=null;e.selectBatch=null;e.unselectBatch=null;l._scene=null});e.dirty||m.extendFlat(e,a);return e}},{"../../lib":749}],1218:[function(b,F,C){var m=b("../scatter/subtypes"),h=b("./edit_style").styleTextSelection;
F.exports=function(l,e){var a=l.cd,g=[],k=a[0].trace,p=a[0].t,n=k._length,c=p.x,f=p.y,d=p._scene,q=p.index;if(!d)return g;var r=m.hasText(k),u=m.hasMarkers(k);if(!0!==k.visible||!u&&!r)return g;k=[];var v=[];if(!1!==e&&!e.degenerate)for(var w=0;w<n;w++)e.contains([p.xpx[w],p.ypx[w]],!1,w,l)?(k.push(w),g.push({pointNumber:w,x:c[w],y:f[w]})):v.push(w);u&&((l=d.scatter2d,k.length||v.length)?d.selectBatch[q].length||d.unselectBatch[q].length||(e=Array(d.count),e[q]=d.markerUnselectedOptions[q],l.update.apply(l,
e)):(e=Array(d.count),e[q]=d.markerOptions[q],l.update.apply(l,e)));d.selectBatch[q]=k;d.unselectBatch[q]=v;r&&h(a);return g}},{"../scatter/subtypes":1179,"./edit_style":1211}],1219:[function(b,F,C){C=b("../../plots/template_attributes").hovertemplateAttrs;var m=b("../../plots/template_attributes").texttemplateAttrs,h=b("../scattergeo/attributes"),l=b("../scatter/attributes"),e=b("../../plots/mapbox/layout_attributes"),a=b("../../plots/attributes"),g=b("../../components/colorscale/attributes"),k=
b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var p=h.line,n=h.marker;F.exports=b({lon:h.lon,lat:h.lat,mode:k({},l.mode,{dflt:"markers"}),text:k({},l.text,{}),texttemplate:m({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:k({},l.hovertext,{}),line:{color:p.color,width:p.width},connectgaps:l.connectgaps,marker:k({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:n.opacity,
size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode},g("marker")),fill:h.fill,fillcolor:l.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:l.selected.marker},unselected:{marker:l.unselected.marker},hoverinfo:k({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:C()},"calc","nested")},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,
"../../plots/mapbox/layout_attributes":856,"../../plots/template_attributes":875,"../scatter/attributes":1155,"../scattergeo/attributes":1196}],1220:[function(b,F,C){function m(){return{geojson:p.makeBlank(),layout:{visibility:"none"},paint:{}}}function h(w){var y=w[0].trace,D=y.marker,x=y.selectedpoints,E=g.isArrayOrTypedArray(D.color),B=g.isArrayOrTypedArray(D.size),t=g.isArrayOrTypedArray(D.opacity),G,I;E&&(I=n.hasColorscale(y,"marker")?n.makeColorScaleFuncFromTrace(D):g.identity);var L;B&&(L=
f(y));var M;t&&(M=function(U){U=a(U)?+g.constrain(U,0,1):0;return y.opacity*U});var N=[];for(G=0;G<w.length;G++){var H=w[G],J=H.lonlat;if(J[0]!==k){var O={};I&&(O.mcc=H.mcc=I(H.mc));L&&(O.mrc=H.mrc=L(H.ms));M&&(O.mo=M(H.mo));x&&(O.selected=H.selected||0);N.push({type:"Feature",geometry:{type:"Point",coordinates:J},properties:O})}}if(x){var Q=c.makeSelectedPointStyleFns(y);for(G=0;G<N.length;G++)w=N[G].properties,Q.selectedOpacityFn&&(w.mo=y.opacity*Q.selectedOpacityFn(w)),Q.selectedColorFn&&(w.mcc=
Q.selectedColorFn(w)),Q.selectedSizeFn&&(w.mrc=Q.selectedSizeFn(w))}return{geojson:{type:"FeatureCollection",features:N},mcc:E||Q&&Q.selectedColorFn?{type:"identity",property:"mcc"}:D.color,mrc:B||Q&&Q.selectedSizeFn?{type:"identity",property:"mrc"}:D.size/2,mo:t||Q&&Q.selectedOpacityFn?{type:"identity",property:"mo"}:y.opacity*D.opacity}}function l(w,y){return g.isArrayOrTypedArray(w)?y?function(D){return a(w[D])?+w[D]:0}:function(D){return w[D]}:w?function(){return w}:e}function e(){return""}var a=
b("fast-isnumeric"),g=b("../../lib"),k=b("../../constants/numerical").BADNUM,p=b("../../lib/geojson_utils"),n=b("../../components/colorscale"),c=b("../../components/drawing"),f=b("../scatter/make_bubble_size_func"),d=b("../scatter/subtypes"),q=b("../../plots/mapbox/convert_text_opts"),r=b("../../components/fx/helpers").appendArrayPointValue,u=b("../../lib/svg_text_utils").NEWLINES,v=b("../../lib/svg_text_utils").BR_TAG_ALL;F.exports=function(w,y){var D=y[0].trace,x=!0===D.visible&&0!==D._length,E=
"none"!==D.fill,B=d.hasLines(D),t=d.hasMarkers(D),G=d.hasText(D),I=t&&"circle"===D.marker.symbol,L=t&&"circle"!==D.marker.symbol,M=m(),N=m(),H=m();t=m();var J={fill:M,line:N,circle:H,symbol:t};if(!x)return J;if(E||B)var O=p.calcTraceToLineCoords(y);E&&(M.geojson=p.makePolygon(O),M.layout.visibility="visible",g.extendFlat(M.paint,{"fill-color":D.fillcolor}));B&&(N.geojson=p.makeLine(O),N.layout.visibility="visible",g.extendFlat(N.paint,{"line-width":D.line.width,"line-color":D.line.color,"line-opacity":D.opacity}));
I&&(x=h(y),H.geojson=x.geojson,H.layout.visibility="visible",g.extendFlat(H.paint,{"circle-color":x.mcc,"circle-radius":x.mrc,"circle-opacity":x.mo}));if(L||G){w=w._fullLayout;x=y[0].trace;B=x.marker||{};E=B.symbol;B=B.angle;E="circle"!==E?l(E):e;B="auto"!==B?l(B,!0):e;I=d.hasText(x)?l(x.text):e;H=[];for(O=0;O<y.length;O++)if(M=y[O],M.lonlat[0]!==k){if(N=x.texttemplate){N=Array.isArray(N)?N[O]||"":N;var Q=x._module.formatLabels(M,x,w),U={};r(U,x,M.i);N=g.texttemplateString(N,Q,w._d3locale,U,M,x._meta||
{})}else N=I(O);N&&(N=N.replace(u,"").replace(v,"\n"));H.push({type:"Feature",geometry:{type:"Point",coordinates:M.lonlat},properties:{symbol:E(O),angle:B(O),text:N}})}t.geojson={type:"FeatureCollection",features:H};g.extendFlat(t.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});L&&(g.extendFlat(t.layout,{"icon-size":D.marker.size/10}),"angle"in D.marker&&"auto"!==D.marker.angle&&g.extendFlat(t.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),
t.layout["icon-allow-overlap"]=D.marker.allowoverlap,g.extendFlat(t.paint,{"icon-opacity":D.opacity*D.marker.opacity,"icon-color":D.marker.color}));G&&(y=q(D.textposition,(D.marker||{}).size),g.extendFlat(t.layout,{"text-size":D.textfont.size,"text-anchor":y.anchor,"text-offset":y.offset}),g.extendFlat(t.paint,{"text-color":D.textfont.color,"text-opacity":D.opacity}))}return J}},{"../../components/colorscale":627,"../../components/drawing":637,"../../components/fx/helpers":651,"../../constants/numerical":724,
"../../lib":749,"../../lib/geojson_utils":743,"../../lib/svg_text_utils":773,"../../plots/mapbox/convert_text_opts":853,"../scatter/make_bubble_size_func":1172,"../scatter/subtypes":1179,"fast-isnumeric":241}],1221:[function(b,F,C){function m(n,c,f){n=f("lon")||[];f=f("lat")||[];f=Math.min(n.length,f.length);return c._length=f}var h=b("../../lib"),l=b("../scatter/subtypes"),e=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/text_defaults"),k=b("../scatter/fillcolor_defaults"),
p=b("./attributes");F.exports=function(n,c,f,d){function q(u,v){return h.coerce(n,c,p,u,v)}if(m(n,c,q)){q("text");q("texttemplate");q("hovertext");q("hovertemplate");q("mode");q("below");l.hasLines(c)&&(a(n,c,f,d,q,{noDash:!0}),q("connectgaps"));if(l.hasMarkers(c)){e(n,c,f,d,q,{noLine:!0});q("marker.allowoverlap");q("marker.angle");var r=c.marker;"circle"!==r.symbol&&(h.isArrayOrTypedArray(r.size)&&(r.size=r.size[0]),h.isArrayOrTypedArray(r.color)&&(r.color=r.color[0]))}l.hasText(c)&&g(n,c,d,q,{noSelect:!0});
q("fill");"none"!==c.fill&&k(n,c,f,q);h.coerceSelectionMarkerOpacity(c,q)}else c.visible=!1}},{"../../lib":749,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1219}],1222:[function(b,F,C){F.exports=function(m,h){m.lon=h.lon;m.lat=h.lat;return m}},{}],1223:[function(b,F,C){var m=b("../../plots/cartesian/axes");F.exports=function(h,l,e){var a={};l=e[l.subplot]._subplot.mockAxis;
h=h.lonlat;a.lonLabel=m.tickText(l,l.c2l(h[0]),!0).text;a.latLabel=m.tickText(l,l.c2l(h[1]),!0).text;return a}},{"../../plots/cartesian/axes":797}],1224:[function(b,F,C){function m(k,p,n){if(!k.hovertemplate){var c=(p.hi||k.hoverinfo).split("+"),f=-1!==c.indexOf("all"),d=-1!==c.indexOf("lon"),q=-1!==c.indexOf("lat"),r=p.lonlat,u=[];f||d&&q?u.push("("+(r[0]+", ")+(r[1]+")")):d?u.push(n.lon+(r[0]+"")):q&&u.push(n.lat+(r[1]+""));(f||-1!==c.indexOf("text"))&&a(p,k,u);return u.join("\x3cbr\x3e")}}
var h=b("../../components/fx"),l=b("../../lib"),e=b("../scatter/get_trace_color"),a=l.fillText,g=b("../../constants/numerical").BADNUM;F.exports=function(k,p,n){var c=k.cd,f=c[0].trace,d=k.xa,q=k.ya,r=k.subplot,u=360*(0<=p?Math.floor((p+180)/360):Math.ceil((p-180)/360)),v=p-u;h.getClosest(c,function(D){var x=D.lonlat;if(x[0]===g)return Infinity;var E=l.modHalf(x[0],360);x=x[1];var B=r.project([E,x]);x=B.x-d.c2p([v,x]);E=B.y-q.c2p([E,n]);D=Math.max(3,D.mrc||0);return Math.max(Math.sqrt(x*x+E*E)-D,
1-3/D)},k);if(!1!==k.index){p=c[k.index];var w=p.lonlat;w=[l.modHalf(w[0],360)+u,w[1]];u=d.c2p(w);w=q.c2p(w);var y=p.mrc||1;k.x0=u-y;k.x1=u+y;k.y0=w-y;k.y1=w+y;u={};u[f.subplot]={_subplot:r};u=f._module.formatLabels(p,f,u);k.lonLabel=u.lonLabel;k.latLabel=u.latLabel;k.color=e(f,p);k.extraText=m(f,p,c[0].t.labels);k.hovertemplate=f.hovertemplate;return[k]}}},{"../../components/fx":655,"../../constants/numerical":724,"../../lib":749,"../scatter/get_trace_color":1165}],1225:[function(b,F,C){F.exports=
{attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("../scattergeo/calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),styleOnSelect:function(m,h){h&&h[0].trace._glTrace.update(h)},moduleType:"trace",name:"scattermapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":854,
"../scatter/marker_colorbar":1173,"../scattergeo/calc":1197,"./attributes":1219,"./defaults":1221,"./event_data":1222,"./format_labels":1223,"./hover":1224,"./plot":1226,"./select":1227}],1226:[function(b,F,C){function m(a,g){this.type="scattermapbox";this.subplot=a;this.uid=g;this.sourceIds={fill:"source-"+g+"-fill",line:"source-"+g+"-line",circle:"source-"+g+"-circle",symbol:"source-"+g+"-symbol"};this.layerIds={fill:l+g+"-fill",line:l+g+"-line",circle:l+g+"-circle",symbol:l+g+"-symbol"};this.below=
null}var h=b("./convert"),l=b("../../plots/mapbox/constants").traceLayerPrefix,e=["fill","line","circle","symbol"];b=m.prototype;b.addSource=function(a,g){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:g.geojson})};b.setSourceData=function(a,g){this.subplot.map.getSource(this.sourceIds[a]).setData(g.geojson)};b.addLayer=function(a,g,k){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:g.layout,paint:g.paint},k)};b.update=function(a){var g=this.subplot,
k=g.map,p=h(g.gd,a),n=g.belowLookup["trace-"+this.uid],c;if(n!==this.below){for(c=e.length-1;0<=c;c--){var f=e[c];k.removeLayer(this.layerIds[f])}for(c=0;c<e.length;c++)f=e[c],k=p[f],this.addLayer(f,k,n);this.below=n}for(c=0;c<e.length;c++)f=e[c],k=p[f],g.setOptions(this.layerIds[f],"setLayoutProperty",k.layout),"visible"===k.layout.visibility&&(this.setSourceData(f,k),g.setOptions(this.layerIds[f],"setPaintProperty",k.paint));a[0].trace._glTrace=this};b.dispose=function(){for(var a=this.subplot.map,
g=e.length-1;0<=g;g--){var k=e[g];a.removeLayer(this.layerIds[k]);a.removeSource(this.sourceIds[k])}};F.exports=function(a,g){var k=g[0].trace,p=new m(a,k.uid),n=h(a.gd,g);a=p.below=a.belowLookup["trace-"+k.uid];for(k=0;k<e.length;k++){var c=e[k],f=n[c];p.addSource(c,f);p.addLayer(c,f,a)}return g[0].trace._glTrace=p}},{"../../plots/mapbox/constants":852,"./convert":1220}],1227:[function(b,F,C){var m=b("../../lib"),h=b("../scatter/subtypes"),l=b("../../constants/numerical").BADNUM;F.exports=function(e,
a){var g=e.cd,k=e.xaxis,p=e.yaxis,n=[],c;if(!h.hasMarkers(g[0].trace))return[];if(!1===a)for(c=0;c<g.length;c++)g[c].selected=0;else for(c=0;c<g.length;c++){var f=g[c],d=f.lonlat;if(d[0]!==l){var q=[m.modHalf(d[0],360),d[1]];q=[k.c2p(q),p.c2p(q)];a.contains(q,null,c,e)?(n.push({pointNumber:c,lon:d[0],lat:d[1]}),f.selected=1):f.selected=0}}return n}},{"../../constants/numerical":724,"../../lib":749,"../scatter/subtypes":1179}],1228:[function(b,F,C){C=b("../../plots/template_attributes").hovertemplateAttrs;
var m=b("../../plots/template_attributes").texttemplateAttrs,h=b("../../lib/extend").extendFlat,l=b("../scatter/attributes");b=b("../../plots/attributes");var e=l.line;F.exports={mode:l.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},
thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:l.text,texttemplate:m({editType:"plot"},{keys:["r","theta","text"]}),hovertext:l.hovertext,line:{color:e.color,width:e.width,dash:e.dash,shape:h({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:l.connectgaps,marker:l.marker,cliponaxis:h({},l.cliponaxis,{dflt:!1}),textposition:l.textposition,textfont:l.textfont,fill:h({},l.fill,{values:["none",
"toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,hoverinfo:h({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:l.hoveron,hovertemplate:C(),selected:l.selected,unselected:l.unselected}},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1229:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../../constants/numerical").BADNUM,l=b("../../plots/cartesian/axes"),e=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),
g=b("../scatter/calc_selection"),k=b("../scatter/calc").calcMarkerSize;F.exports=function(p,n){var c=p._fullLayout,f=n.subplot,d=c[f].radialaxis;f=c[f].angularaxis;c=d.makeCalcdata(n,"r");var q=f.makeCalcdata(n,"theta"),r=n._length;f=Array(r);for(var u=0;u<r;u++){var v=c[u],w=q[u],y=f[u]={};m(v)&&m(w)?(y.r=v,y.theta=w):y.r=h}q=k(n,r);n._extremes.x=l.findExtremes(d,c,{ppad:q});e(p,n);a(f,n);g(f,n);return f}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797,"../scatter/arrays_to_calcdata":1154,
"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1230:[function(b,F,C){function m(f,d,q,r){f=r("r");q=r("theta");if(f)q?f=Math.min(f.length,q.length):(f=f.length,r("theta0"),r("dtheta"));else{if(!q)return 0;f=d.theta.length;r("r0");r("dr")}return d._length=f}var h=b("../../lib"),l=b("../scatter/subtypes"),e=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/line_shape_defaults"),k=b("../scatter/text_defaults"),
p=b("../scatter/fillcolor_defaults"),n=b("../scatter/constants").PTS_LINESONLY,c=b("./attributes");F.exports={handleRThetaDefaults:m,supplyDefaults:function(f,d,q,r){function u(w,y){return h.coerce(f,d,c,w,y)}var v=m(f,d,r,u);if(v){u("thetaunit");u("mode",v<n?"lines+markers":"lines");u("text");u("hovertext");"fills"!==d.hoveron&&u("hovertemplate");l.hasLines(d)&&(a(f,d,q,r,u),g(f,d,u),u("connectgaps"));l.hasMarkers(d)&&e(f,d,q,r,u,{gradient:!0});l.hasText(d)&&(u("texttemplate"),k(f,d,r,u));r=[];if(l.hasMarkers(d)||
l.hasText(d))u("cliponaxis"),u("marker.maxdisplayed"),r.push("points");u("fill");"none"!==d.fill&&(p(f,d,q,u),l.hasLines(d)||g(f,d,u));"tonext"!==d.fill&&"toself"!==d.fill||r.push("fills");u("hoveron",r.join("+")||"points");h.coerceSelectionMarkerOpacity(d,u)}else d.visible=!1}}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,
"./attributes":1228}],1231:[function(b,F,C){var m=b("../../lib"),h=b("../../plots/cartesian/axes");F.exports=function(l,e,a){var g={},k=a[e.subplot]._subplot;k?(e=k.radialAxis,k=k.angularAxis):(k=a[e.subplot],e=k.radialaxis,k=k.angularaxis);a=e.c2l(l.r);g.rLabel=h.tickText(e,a,!0).text;l="degrees"===k.thetaunit?m.rad2deg(l.theta):l.theta;g.thetaLabel=h.tickText(k,l,!0).text;return g}},{"../../lib":749,"../../plots/cartesian/axes":797}],1232:[function(b,F,C){function m(l,e,a,g){var k=a.radialAxis,
p=a.angularAxis;k._hovertitle="r";p._hovertitle="";var n={};n[e.subplot]={_subplot:a};a=e._module.formatLabels(l,e,n);g.rLabel=a.rLabel;g.thetaLabel=a.thetaLabel;a=l.hi||e.hoverinfo;l=[];e.hovertemplate||(e=a.split("+"),-1!==e.indexOf("all")&&(e=["r","theta","text"]),-1!==e.indexOf("r")&&l.push(k._hovertitle+": "+g.rLabel),-1!==e.indexOf("theta")&&l.push(p._hovertitle+": "+g.thetaLabel),-1!==e.indexOf("text")&&g.text&&(l.push(g.text),delete g.text),g.extraText=l.join("\x3cbr\x3e"))}var h=b("../scatter/hover");
F.exports={hoverPoints:function(l,e,a,g){if((e=h(l,e,a,g))&&!1!==e[0].index){a=e[0];if(void 0===a.index)return e;l=l.subplot;g=a.cd[a.index];var k=a.trace;if(l.isPtInside(g))return a.xLabelVal=void 0,a.yLabelVal=void 0,m(g,k,l,a),a.hovertemplate=k.hovertemplate,e}},makeHoverPointText:m}},{"../scatter/hover":1166}],1233:[function(b,F,C){F.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:b("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:b("./attributes"),
supplyDefaults:b("./defaults").supplyDefaults,colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scatter/select"),meta:{}}},{"../../plots/polar":863,"../scatter/marker_colorbar":1173,"../scatter/select":1176,"../scatter/style":1178,"./attributes":1228,"./calc":1229,"./defaults":1230,"./format_labels":1231,
"./hover":1232,"./plot":1234}],1234:[function(b,F,C){var m=b("../scatter/plot"),h=b("../../constants/numerical").BADNUM;F.exports=function(l,e,a){var g=e.layers.frontplot.select("g.scatterlayer"),k={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},p=e.radialAxis;e=e.angularAxis;for(var n=0;n<a.length;n++)for(var c=a[n],f=0;f<c.length;f++){var d=c[f],q=d.r;if(q===h)d.x=d.y=h;else{q=p.c2g(q);var r=e.c2g(d.theta);d.x=q*Math.cos(r);d.y=q*Math.sin(r)}}m(l,
k,a,g)}},{"../../constants/numerical":724,"../scatter/plot":1175}],1235:[function(b,F,C){C=b("../scatterpolar/attributes");var m=b("../scattergl/attributes");b=b("../../plots/template_attributes").texttemplateAttrs;F.exports={mode:C.mode,r:C.r,theta:C.theta,r0:C.r0,dr:C.dr,theta0:C.theta0,dtheta:C.dtheta,thetaunit:C.thetaunit,text:C.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:C.hovertext,hovertemplate:C.hovertemplate,line:m.line,connectgaps:m.connectgaps,marker:m.marker,
fill:m.fill,fillcolor:m.fillcolor,textposition:m.textposition,textfont:m.textfont,hoverinfo:C.hoverinfo,selected:C.selected,unselected:C.unselected}},{"../../plots/template_attributes":875,"../scattergl/attributes":1206,"../scatterpolar/attributes":1228}],1236:[function(b,F,C){var m=b("../scatter/colorscale_calc"),h=b("../scatter/calc").calcMarkerSize,l=b("../scattergl/convert"),e=b("../../plots/cartesian/axes"),a=b("../scattergl/constants").TOO_MANY_POINTS;F.exports=function(g,k){var p=g._fullLayout,
n=k.subplot,c=p[n].radialaxis;n=p[n].angularaxis;p=k._r=c.makeCalcdata(k,"r");var f=k._theta=n.makeCalcdata(k,"theta");n=k._length;var d={};n<p.length&&(p=p.slice(0,n));n<f.length&&(f=f.slice(0,n));d.r=p;d.theta=f;m(g,k);g=d.opts=l.style(g,k);var q;n<a?q=h(k,n):g.marker&&(q=2*(g.marker.sizeAvg||Math.max(g.marker.size,3)));k._extremes.x=e.findExtremes(c,p,{ppad:q});return[{x:!1,y:!1,t:d,trace:k}]}},{"../../plots/cartesian/axes":797,"../scatter/calc":1156,"../scatter/colorscale_calc":1158,"../scattergl/constants":1208,
"../scattergl/convert":1209}],1237:[function(b,F,C){var m=b("../../lib"),h=b("../scatter/subtypes"),l=b("../scatterpolar/defaults").handleRThetaDefaults,e=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/text_defaults"),k=b("../scatter/fillcolor_defaults"),p=b("../scatter/constants").PTS_LINESONLY,n=b("./attributes");F.exports=function(c,f,d,q){function r(v,w){return m.coerce(c,f,n,v,w)}var u=l(c,f,q,r);u?(r("thetaunit"),r("mode",u<p?"lines+markers":"lines"),r("text"),
r("hovertext"),"fills"!==f.hoveron&&r("hovertemplate"),h.hasLines(f)&&(a(c,f,d,q,r),r("connectgaps")),h.hasMarkers(f)&&e(c,f,d,q,r),h.hasText(f)&&(r("texttemplate"),g(c,f,q,r)),r("fill"),"none"!==f.fill&&k(c,f,d,r),m.coerceSelectionMarkerOpacity(f,r)):f.visible=!1}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"../scatterpolar/defaults":1230,
"./attributes":1235}],1238:[function(b,F,C){var m=b("../scatterpolar/format_labels");F.exports=function(h,l,e){var a=h.i;"r"in h||(h.r=l._r[a]);"theta"in h||(h.theta=l._theta[a]);return m(h,l,e)}},{"../scatterpolar/format_labels":1231}],1239:[function(b,F,C){var m=b("../scattergl/hover"),h=b("../scatterpolar/hover").makeHoverPointText;F.exports={hoverPoints:function(l,e,a,g){var k=l.cd[0].t,p=k.r;k=k.theta;if((e=m.hoverPoints(l,e,a,g))&&!1!==e[0].index){a=e[0];if(void 0===a.index)return e;l=l.subplot;
g=a.cd[a.index];var n=a.trace;g.r=p[a.index];g.theta=k[a.index];if(l.isPtInside(g))return a.xLabelVal=void 0,a.yLabelVal=void 0,h(g,n,l,a),e}}}},{"../scattergl/hover":1214,"../scatterpolar/hover":1232}],1240:[function(b,F,C){F.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:b("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),
calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scattergl/select"),meta:{}}},{"../../plots/polar":863,"../scatter/marker_colorbar":1173,"../scattergl/select":1218,"./attributes":1235,"./calc":1236,"./defaults":1237,"./format_labels":1238,"./hover":1239,"./plot":1241}],1241:[function(b,F,C){var m=b("@plotly/point-cluster"),h=b("fast-isnumeric"),l=b("../scattergl/plot"),e=b("../scattergl/scene_update"),a=b("../scattergl/convert"),g=b("../../lib"),k=b("../scattergl/constants").TOO_MANY_POINTS;
F.exports=function(p,n,c){if(c.length){var f=n.radialAxis,d=n.angularAxis,q=e(p,n);c.forEach(function(r){if(r&&r[0]&&r[0].trace){var u=r[0];r=u.trace;u=u.t;var v=r._length,w=u.r,y=u.theta,D=u.opts,x,E=w.slice(),B=y.slice();for(x=0;x<w.length;x++)n.isPtInside({r:w[x],theta:y[x]})||(E[x]=NaN,B[x]=NaN);var t=Array(2*v),G=Array(v),I=Array(v);for(x=0;x<v;x++){var L=E[x];if(h(L)){var M=f.c2g(L);var N=d.c2g(B[x],r.thetaunit);L=M*Math.cos(N);M*=Math.sin(N)}else L=M=NaN;G[x]=t[2*x]=L;I[x]=t[2*x+1]=M}u.tree=
m(t);D.marker&&v>=k&&(D.marker.cluster=u.tree);D.marker&&(D.markerSel.positions=D.markerUnsel.positions=D.marker.positions=t);D.line&&1<t.length&&g.extendFlat(D.line,a.linePositions(p,r,t));D.text&&(g.extendFlat(D.text,{positions:t},a.textPosition(p,r,D.text,D.marker)),g.extendFlat(D.textSel,{positions:t},a.textPosition(p,r,D.text,D.markerSel)),g.extendFlat(D.textUnsel,{positions:t},a.textPosition(p,r,D.text,D.markerUnsel)));D.fill&&!q.fill2d&&(q.fill2d=!0);D.marker&&!q.scatter2d&&(q.scatter2d=!0);
D.line&&!q.line2d&&(q.line2d=!0);D.text&&!q.glText&&(q.glText=!0);q.lineOptions.push(D.line);q.fillOptions.push(D.fill);q.markerOptions.push(D.marker);q.markerSelectedOptions.push(D.markerSel);q.markerUnselectedOptions.push(D.markerUnsel);q.textOptions.push(D.text);q.textSelectedOptions.push(D.textSel);q.textUnselectedOptions.push(D.textUnsel);q.selectBatch.push([]);q.unselectBatch.push([]);u.x=G;u.y=I;u.rawx=G;u.rawy=I;u.r=w;u.theta=y;u.positions=t;u._scene=q;u.index=q.count;q.count++}});return l(p,
n,c)}}},{"../../lib":749,"../scattergl/constants":1208,"../scattergl/convert":1209,"../scattergl/plot":1216,"../scattergl/scene_update":1217,"@plotly/point-cluster":57,"fast-isnumeric":241}],1242:[function(b,F,C){C=b("../../plots/template_attributes").hovertemplateAttrs;var m=b("../../plots/template_attributes").texttemplateAttrs,h=b("../scatter/attributes"),l=b("../../plots/attributes"),e=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash;b=b("../../lib/extend").extendFlat;
var g=h.marker,k=h.line,p=g.line;F.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:b({},h.mode,{dflt:"markers"}),text:b({},h.text,{}),texttemplate:m({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:b({},h.hovertext,{}),line:{color:k.color,width:k.width,dash:a,shape:b({},k.shape,{values:["linear","spline"]}),smoothing:k.smoothing,editType:"calc"},connectgaps:h.connectgaps,
cliponaxis:h.cliponaxis,fill:b({},h.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:h.fillcolor,marker:b({symbol:g.symbol,opacity:g.opacity,maxdisplayed:g.maxdisplayed,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,line:b({width:p.width,editType:"calc"},e("marker.line")),gradient:g.gradient,editType:"calc"},e("marker")),textfont:h.textfont,textposition:h.textposition,selected:h.selected,unselected:h.unselected,hoverinfo:b({},l.hoverinfo,{flags:["a","b","c","text",
"name"]}),hoveron:h.hoveron,hovertemplate:C()}},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1243:[function(b,F,C){var m=b("fast-isnumeric"),h=b("../scatter/colorscale_calc"),l=b("../scatter/arrays_to_calcdata"),e=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,g=["a","b","c"],k={a:["b","c"],b:["a","c"],c:["a","b"]};
F.exports=function(p,n){var c=p._fullLayout[n.subplot].sum,f=n.sum||c,d={a:n.a,b:n.b,c:n.c},q,r;for(q=0;q<g.length;q++){var u=g[q];if(!d[u]){var v=d[k[u][0]];var w=d[k[u][1]];var y=Array(v.length);for(r=0;r<v.length;r++)y[r]=f-v[r]-w[r];d[u]=y}}f=n._length;r=Array(f);for(q=0;q<f;q++)if(u=d.a[q],y=d.b[q],v=d.c[q],m(u)&&m(y)&&m(v)){u=+u;y=+y;v=+v;w=c/(u+y+v);1!==w&&(u*=w,y*=w,v*=w);var D=u;w=v-y;r[q]={x:w,y:D,a:u,b:y,c:v}}else r[q]={x:!1,y:!1};a(n,f);h(p,n);l(r,n);e(r,n);return r}},{"../scatter/arrays_to_calcdata":1154,
"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1244:[function(b,F,C){var m=b("../../lib"),h=b("../scatter/constants"),l=b("../scatter/subtypes"),e=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/line_shape_defaults"),k=b("../scatter/text_defaults"),p=b("../scatter/fillcolor_defaults"),n=b("./attributes");F.exports=function(c,f,d,q){function r(D,x){return m.coerce(c,f,n,D,x)}var u=r("a"),v=r("b"),w=r("c");
if(u){var y=u.length;v?(y=Math.min(y,v.length),w&&(y=Math.min(y,w.length))):y=w?Math.min(y,w.length):0}else v&&w&&(y=Math.min(v.length,w.length));if(y){f._length=y;r("sum");r("text");r("hovertext");"fills"!==f.hoveron&&r("hovertemplate");r("mode",y<h.PTS_LINESONLY?"lines+markers":"lines");l.hasLines(f)&&(a(c,f,d,q,r),g(c,f,r),r("connectgaps"));l.hasMarkers(f)&&e(c,f,d,q,r,{gradient:!0});l.hasText(f)&&(r("texttemplate"),k(c,f,q,r));q=[];if(l.hasMarkers(f)||l.hasText(f))r("cliponaxis"),r("marker.maxdisplayed"),
q.push("points");r("fill");"none"!==f.fill&&(p(c,f,d,r),l.hasLines(f)||g(c,f,r));"tonext"!==f.fill&&"toself"!==f.fill||q.push("fills");r("hoveron",q.join("+")||"points");m.coerceSelectionMarkerOpacity(f,r)}else f.visible=!1}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1242}],1245:[function(b,
F,C){F.exports=function(m,h,l,e,a){h.xa&&(m.xaxis=h.xa);h.ya&&(m.yaxis=h.ya);e[a]?(h=e[a],m.a=h.a,m.b=h.b,m.c=h.c):(m.a=h.a,m.b=h.b,m.c=h.c);return m}},{}],1246:[function(b,F,C){var m=b("../../plots/cartesian/axes");F.exports=function(h,l,e){var a={};l=e[l.subplot]._subplot;a.aLabel=m.tickText(l.aaxis,h.a,!0).text;a.bLabel=m.tickText(l.baxis,h.b,!0).text;a.cLabel=m.tickText(l.caxis,h.c,!0).text;return a}},{"../../plots/cartesian/axes":797}],1247:[function(b,F,C){var m=b("../scatter/hover");F.exports=
function(h,l,e,a){if((l=m(h,l,e,a))&&!1!==l[0].index){e=l[0];if(void 0===e.index)return a=h.xa._length,h=a*(1-e.y0/h.ya._length)/2,a-=h,e.x0=Math.max(Math.min(e.x0,a),h),e.x1=Math.max(Math.min(e.x1,a),h),l;var g=e.cd[e.index];h=e.trace;a=e.subplot;e.a=g.a;e.b=g.b;e.c=g.c;e.xLabelVal=void 0;e.yLabelVal=void 0;var k={};k[h.subplot]={_subplot:a};k=h._module.formatLabels(g,h,k);e.aLabel=k.aLabel;e.bLabel=k.bLabel;e.cLabel=k.cLabel;k=g.hi||h.hoverinfo;g=[];h.hovertemplate||(k=k.split("+"),-1!==k.indexOf("all")&&
(k=["a","b","c"]),-1!==k.indexOf("a")&&g.push(a.aaxis._hovertitle+": "+e.aLabel),-1!==k.indexOf("b")&&g.push(a.baxis._hovertitle+": "+e.bLabel),-1!==k.indexOf("c")&&g.push(a.caxis._hovertitle+": "+e.cLabel));e.extraText=g.join("\x3cbr\x3e");e.hovertemplate=h.hovertemplate;return l}}},{"../scatter/hover":1166}],1248:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),
style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:b("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":876,"../scatter/marker_colorbar":1173,"../scatter/select":1176,"../scatter/style":1178,"./attributes":1242,"./calc":1243,"./defaults":1244,"./event_data":1245,
"./format_labels":1246,"./hover":1247,"./plot":1249}],1249:[function(b,F,C){var m=b("../scatter/plot");F.exports=function(h,l,e){var a=l.plotContainer;a.select(".scatterlayer").selectAll("*").remove();a={xaxis:l.xaxis,yaxis:l.yaxis,plot:a,layerClipId:l._hasClipOnAxisFalse?l.clipIdRelative:null};l=l.layers.frontplot.select("g.scatterlayer");m(h,a,e,l)}},{"../scatter/plot":1175}],1250:[function(b,F,C){function m(p){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",
regex:a[p],editType:"plot"}}}var h=b("../scatter/attributes"),l=b("../../components/colorscale/attributes");C=b("../../plots/template_attributes").hovertemplateAttrs;var e=b("../scattergl/attributes"),a=b("../../plots/cartesian/constants").idRegex,g=b("../../plot_api/plot_template").templatedArray;b=b("../../lib/extend").extendFlat;h=h.marker;var k=h.line;k=b(l("marker.line",{editTypeOverride:"calc"}),{width:b({},k.width,{editType:"calc"}),editType:"calc"});l=b(l("marker"),{symbol:h.symbol,size:b({},
h.size,{editType:"markerSize"}),sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,opacity:h.opacity,colorbar:h.colorbar,line:k,editType:"calc"});l.color.editType=l.cmin.editType=l.cmax.editType="style";F.exports={dimensions:g("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},
matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:b({},e.text,{}),hovertext:b({},e.hovertext,{}),hovertemplate:C(),marker:l,xaxes:m("x"),yaxes:m("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,
editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/template_attributes":875,"../scatter/attributes":1155,"../scattergl/attributes":1206}],1251:[function(b,F,C){function m(c){var f=c._fullLayout,d=f._glcanvas.data()[0].regl,q=f._splomGrid;q||(q=f._splomGrid=l(d));q.update(h(c))}function h(c){function f(I,L,M,N,H,J){var O=L[I+"color"];I=L[I+"width"];L=String(O+
I);L in u?u[L].data.push(NaN,NaN,M,N,H,J):u[L]={data:[M,N,H,J],join:"rect",thickness:I,color:O,viewport:r,range:r,overlay:!1}}var d=c._fullLayout,q=d._size,r=[0,0,d.width,d.height],u={},v;for(v in d._splomSubplots){var w=d._plots[v],y=w.xaxis;w=w.yaxis;var D=y._gridVals,x=w._gridVals,E=q.b+w.domain[0]*q.h,B=-w._m,t=-B*w.r2l(w.range[0],w.calendar);if(y.showgrid)for(v=0;v<D.length;v++){var G=y._offset+y.l2p(D[v].x);f("grid",y,G,E,G,E+w._length)}if(w.showgrid)for(v=0;v<x.length;v++)D=E+t+B*x[v].x,f("grid",
w,y._offset,D,y._offset+y._length,D);n(c,y,w)&&(G=y._offset+y.l2p(0),f("zeroline",y,G,E,G,E+w._length));n(c,w,y)&&(D=E+t+0,f("zeroline",w,y._offset,D,y._offset+y._length,D))}c=[];for(v in u)c.push(u[v]);return c}var l=b("regl-line2d"),e=b("../../registry"),a=b("../../lib/prepare_regl"),g=b("../../plots/get_data").getModuleCalcData,k=b("../../plots/cartesian"),p=b("../../plots/cartesian/axis_ids").getFromId,n=b("../../plots/cartesian/axes").shouldShowZeroLine;F.exports={name:"splom",attr:k.attr,attrRegex:k.attrRegex,
layoutAttributes:k.layoutAttributes,supplyLayoutDefaults:k.supplyLayoutDefaults,drawFramework:k.drawFramework,plot:function(c){var f=c._fullLayout,d=e.getModule("splom"),q=g(c.calcdata,d)[0];a(c,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(f._hasOnlyLargeSploms&&m(c),d.plot(c,{},q))},drag:function(c){var f=c.calcdata,d=c._fullLayout;d._hasOnlyLargeSploms&&m(c);for(var q=0;q<f.length;q++){var r=f[q][0].trace,u=d._splomScenes[r.uid];if("splom"===r.type&&u&&u.matrix){for(var v=c,w=r._visibleDims,
y=u.viewOpts.ranges=Array(u.matrixOptions.data.length),D=0;D<w.length;D++){var x=w[D],E=y[D]=Array(4),B=p(v,r._diag[x][0]);B&&(E[0]=B.r2l(B.range[0]),E[2]=B.r2l(B.range[1]));if(x=p(v,r._diag[x][1]))E[1]=x.r2l(x.range[0]),E[3]=x.r2l(x.range[1])}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:y},{ranges:y}):u.matrix.update({ranges:y})}}},updateGrid:m,clean:function(c,f,d,q){var r={},u;if(q._splomScenes){for(u=0;u<c.length;u++){var v=c[u];"splom"===v.type&&(r[v.uid]=1)}for(u=0;u<
d.length;u++)if(v=d[u],!r[v.uid]){var w=q._splomScenes[v.uid];w&&w.destroy&&w.destroy();q._splomScenes[v.uid]=null;delete q._splomScenes[v.uid]}}0===Object.keys(q._splomScenes||{}).length&&delete q._splomScenes;q._splomGrid&&!f._hasOnlyLargeSploms&&q._hasOnlyLargeSploms&&(q._splomGrid.destroy(),q._splomGrid=null,delete q._splomGrid);k.clean(c,f,d,q)},updateFx:k.updateFx,toSVG:k.toSVG}},{"../../lib/prepare_regl":762,"../../plots/cartesian":810,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_ids":800,
"../../plots/get_data":834,"../../registry":880,"regl-line2d":509}],1252:[function(b,F,C){var m=b("../../lib"),h=b("../../plots/cartesian/axis_ids"),l=b("../scatter/calc").calcMarkerSize,e=b("../scatter/calc").calcAxisExpansion,a=b("../scatter/colorscale_calc"),g=b("../scattergl/convert").markerSelection,k=b("../scattergl/convert").markerStyle,p=b("./scene_update"),n=b("../../constants/numerical").BADNUM,c=b("../scattergl/constants").TOO_MANY_POINTS;F.exports=function(f,d){function q(I,L){L=I.makeCalcdata({v:L.values,
vcalendar:d.calendar},"v");for(var M=0;M<L.length;M++)L[M]=L[M]===n?NaN:L[M];w.push(L);y.push("log"===I.type?m.simpleMap(L,I.c2l):L)}var r=d.dimensions,u=d._length,v={},w=v.cdata=[],y=v.data=[],D=d._visibleDims=[],x;for(x=0;x<r.length;x++){var E=r[x];if(E.visible){var B=h.getFromId(f,d._diag[x][0]);var t=h.getFromId(f,d._diag[x][1]);B&&t&&B.type!==t.type?m.log("Skipping splom dimension "+x+" with conflicting axis types"):(B?(q(B,E),t&&"category"===t.type&&(t._categories=B._categories.slice())):q(t,
E),D.push(x))}}a(f,d);m.extendFlat(v,k(d));var G=w.length*u>c?2*(v.sizeAvg||Math.max(v.size,3)):l(d,u);for(u=0;u<D.length;u++)x=D[u],E=r[x],B=h.getFromId(f,d._diag[x][0])||{},t=h.getFromId(f,d._diag[x][1])||{},e(f,d,B,t,w[u],w[u],G);f=p(f,d);f.matrix||(f.matrix=!0);f.matrixOptions=v;f.selectedOptions=g(d,d.selected);f.unselectedOptions=g(d,d.unselected);return[{x:!1,y:!1,t:{},trace:d}]}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axis_ids":800,"../scatter/calc":1156,"../scatter/colorscale_calc":1158,
"../scattergl/constants":1208,"../scattergl/convert":1209,"./scene_update":1259}],1253:[function(b,F,C){function m(c,f){function d(r,u){return l.coerce(c,f,a.dimensions,r,u)}d("label");var q=d("values");q&&q.length?d("visible"):f.visible=!1;d("axis.type");d("axis.matches")}function h(c,f,d,q){function r(J,O,Q,U){if(J){var P=J.charAt(0),V=d._splomAxes[P];f["_"+P+"axes"][J]=1;U.push(J);J in V||(J=V[J]={},Q&&(J.label=Q.label||"",Q.visible&&Q.axis&&(Q.axis.type&&(J.type=Q.axis.type),Q.axis.matches&&(J.matches=
O))))}}var u=f.dimensions,v=u.length;c=f.showupperhalf;var w=f.showlowerhalf,y=f.diagonal.visible,D,x=Array(v),E=Array(v);for(D=0;D<v;D++){var B=D?D+1:"";x[D]="x"+B;E[D]="y"+B}x=q("xaxes",x);B=q("yaxes",E);var t=f._diag=Array(v);f._xaxes={};f._yaxes={};q=[];E=[];var G=!y&&!w,I=!y&&!c;f._axesDim={};for(D=0;D<v;D++){var L=u[D],M=0===D,N=D===v-1,H=M&&G||N&&I?void 0:x[D];M=M&&I||N&&G?void 0:B[D];r(H,M,L,q);r(M,H,L,E);t[D]=[H,M];f._axesDim[H]=D;f._axesDim[M]=D}for(D=0;D<q.length;D++)for(u=0;u<E.length;u++)v=
q[D]+E[u],D>u&&c?d._splomSubplots[v]=1:D<u&&w?d._splomSubplots[v]=1:D!==u||!y&&w&&c||(d._splomSubplots[v]=1);if(!w||!y&&c&&w)d._splomGridDflt.xside="bottom",d._splomGridDflt.yside="left"}var l=b("../../lib"),e=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("../scatter/subtypes"),k=b("../scatter/marker_defaults"),p=b("../parcoords/merge_length"),n=b("../scattergl/helpers").isOpenSymbol;F.exports=function(c,f,d,q){function r(D,x){return l.coerce(c,f,a,D,x)}var u=e(c,f,{name:"dimensions",
handleItemDefaults:m}),v=r("diagonal.visible"),w=r("showupperhalf"),y=r("showlowerhalf");p(f,u,"values")&&(v||w||y)?(r("text"),r("hovertext"),r("hovertemplate"),k(c,f,d,q,r),d=n(f.marker.symbol),u=g.isBubble(f),r("marker.line.width",d||u?1:0),h(c,f,q,r),l.coerceSelectionMarkerOpacity(f,r)):f.visible=!1}},{"../../lib":749,"../../plots/array_container_defaults":793,"../parcoords/merge_length":1126,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scattergl/helpers":1213,"./attributes":1250}],
1254:[function(b,F,C){var m=b("../../lib"),h=b("../scatter/colorscale_calc"),l=b("../scattergl/convert").markerStyle;F.exports=function(e,a){var g=a.trace;if(a=e._fullLayout._splomScenes[g.uid])h(e,g),m.extendFlat(a.matrixOptions,l(g)),e=m.extendFlat({},a.matrixOptions,a.viewOpts),a.matrix.update(e,null)}},{"../../lib":749,"../scatter/colorscale_calc":1158,"../scattergl/convert":1209}],1255:[function(b,F,C){C.getDimIndex=function(m,h){h=h._id;for(var l={x:0,y:1}[h.charAt(0)],e=m._visibleDims,a=0;a<
e.length;a++)if(m._diag[e[a]][l]===h)return a;return!1}},{}],1256:[function(b,F,C){var m=b("./helpers"),h=b("../scattergl/hover").calcHover;F.exports={hoverPoints:function(l,e,a){var g=l.cd[0].trace,k=l.scene.matrixOptions.cdata,p=l.xa,n=l.ya;e=p.c2p(e);a=n.c2p(a);var c=l.distance,f=m.getDimIndex(g,p),d=m.getDimIndex(g,n);if(!1===f||!1===d)return[l];f=k[f];k=k[d];var q;for(d=0;d<f.length;d++){var r=k[d],u=p.c2p(f[d])-e;r=n.c2p(r)-a;u=Math.sqrt(u*u+r*r);if(u<c){c=q=u;var v=d}}l.index=v;l.distance=
c;l.dxy=q;return void 0===v?[l]:[h(l,f,k,g)]}}},{"../scattergl/hover":1214,"./helpers":1255}],1257:[function(b,F,C){C=b("../../registry");var m=b("../../components/grid");F.exports={moduleType:"trace",name:"splom",basePlotModule:b("./base_plot"),categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select"),
editStyle:b("./edit_style"),meta:{}};C.register(m)},{"../../components/grid":659,"../../registry":880,"../scatter/marker_colorbar":1173,"./attributes":1250,"./base_plot":1251,"./calc":1252,"./defaults":1253,"./edit_style":1254,"./hover":1256,"./plot":1258,"./select":1260}],1258:[function(b,F,C){var m=b("regl-splom"),h=b("../../lib"),l=b("../../plots/cartesian/axis_ids"),e=b("../../components/dragelement/helpers").selectMode;F.exports=function(a,g,k){if(k.length)for(g=0;g<k.length;g++){var p,n,c=a,
f=k[g][0],d=c._fullLayout,q=d._size,r=f.trace;var u=f.t;f=d._splomScenes[r.uid];var v=f.matrixOptions,w=v.cdata,y=d._glcanvas.data()[0].regl,D=d.dragmode;if(0!==w.length){v.lower=r.showupperhalf;v.upper=r.showlowerhalf;v.diagonal=r.diagonal.visible;var x=r._visibleDims,E=w.length,B=f.viewOpts={};B.ranges=Array(E);B.domains=Array(E);for(p=0;p<x.length;p++){var t=x[p];var G=B.ranges[p]=Array(4),I=B.domains[p]=Array(4);if(n=l.getFromId(c,r._diag[t][0]))G[0]=n._rl[0],G[2]=n._rl[1],I[0]=n.domain[0],I[2]=
n.domain[1];if(t=l.getFromId(c,r._diag[t][1]))G[1]=t._rl[0],G[3]=t._rl[1],I[1]=t.domain[0],I[3]=t.domain[1]}B.viewport=[q.l,q.b,q.w+q.l,q.h+q.b];!0===f.matrix&&(f.matrix=m(y));t=-1<d.clickmode.indexOf("select");d=!0;if(e(D)||r.selectedpoints||t){D=r._length;if(r.selectedpoints){n=f.selectBatch=r.selectedpoints;p={};for(t=0;t<n.length;t++)p[n[t]]=!0;n=[];for(t=0;t<D;t++)p[t]||n.push(t);f.unselectBatch=n}q=u.xpx=Array(E);E=u.ypx=Array(E);for(p=0;p<x.length;p++){t=x[p];if(n=l.getFromId(c,r._diag[t][0]))for(q[p]=
Array(D),u=0;u<D;u++)q[p][u]=n.c2p(w[p][u]);if(t=l.getFromId(c,r._diag[t][1]))for(E[p]=Array(D),u=0;u<D;u++)E[p][u]=t.c2p(w[p][u])}if(f.selectBatch.length||f.unselectBatch.length)c=h.extendFlat({},v,f.unselectedOptions,B),r=h.extendFlat({},v,f.selectedOptions,B),f.matrix.update(c,r),d=!1}else u.xpx=u.ypx=null;d&&(v=h.extendFlat({},v,B),f.matrix.update(v,null))}}}},{"../../components/dragelement/helpers":633,"../../lib":749,"../../plots/cartesian/axis_ids":800,"regl-splom":511}],1259:[function(b,F,
C){var m=b("../../lib");F.exports=function(h,l){var e=h._fullLayout;h=l.uid;var a=e._splomScenes;a||(a=e._splomScenes={});e={dirty:!0,selectBatch:[],unselectBatch:[]};var g={matrix:!1,selectBatch:[],unselectBatch:[]},k=a[l.uid];k||(k=a[h]=m.extendFlat({},e,g),k.draw=function(){k.matrix&&k.matrix.draw&&(k.selectBatch.length||k.unselectBatch.length?k.matrix.draw(k.unselectBatch,k.selectBatch):k.matrix.draw());k.dirty=!1},k.destroy=function(){k.matrix&&k.matrix.destroy&&k.matrix.destroy();k.matrixOptions=
null;k.selectBatch=null;k=k.unselectBatch=null});k.dirty||m.extendFlat(k,e);return k}},{"../../lib":749}],1260:[function(b,F,C){var m=b("../../lib"),h=b("../scatter/subtypes"),l=b("./helpers");F.exports=function(e,a){var g=e.cd,k=g[0].trace,p=g[0].t;g=e.scene;var n=g.matrixOptions.cdata,c=e.xaxis,f=e.yaxis,d=[];if(!g)return d;var q=!h.hasMarkers(k)&&!h.hasText(k);if(!0!==k.visible||q)return d;c=l.getDimIndex(k,c);f=l.getDimIndex(k,f);if(!1===c||!1===f)return d;k=p.xpx[c];p=p.ypx[f];c=n[c];q=n[f];
n=[];f=[];if(!1!==a&&!a.degenerate)for(var r=0;r<c.length;r++)a.contains([k[r],p[r]],null,r,e)?(n.push(r),d.push({pointNumber:r,x:c[r],y:q[r]})):f.push(r);e=g.matrixOptions;n.length||f.length?g.selectBatch.length||g.unselectBatch.length||g.matrix.update(g.unselectedOptions,m.extendFlat({},e,g.selectedOptions,g.viewOpts)):g.matrix.update(e,null);g.selectBatch=n;g.unselectBatch=f;return d}},{"../../lib":749,"../scatter/subtypes":1179,"./helpers":1255}],1261:[function(b,F,C){C=b("../../components/colorscale/attributes");
var m=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../mesh3d/attributes"),l=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var e={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},
y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:m({editType:"calc"},{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")}),showlegend:b({},l.showlegend,{dflt:!1})};b(e,C("",{colorAttr:"u/v/w norm",
showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){e[a]=h[a]});e.hoverinfo=b({},l.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),dflt:"x+y+z+norm+text+name"});e.transforms=void 0;F.exports=e},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../mesh3d/attributes":1096}],1262:[function(b,F,C){function m(a){var g=a._x,k=a._y,
p=a._z,n=a._len,c,f,d=-Infinity,q=Infinity,r=-Infinity,u=Infinity,v=-Infinity,w=Infinity,y="";if(n){var D=g[0];var x=k[0];var E=p[0]}if(1<n){var B=g[n-1];var t=k[n-1];var G=p[n-1]}for(c=0;c<n;c++){d=Math.max(d,g[c]);q=Math.min(q,g[c]);r=Math.max(r,k[c]);u=Math.min(u,k[c]);v=Math.max(v,p[c]);w=Math.min(w,p[c]);if(!I&&g[c]!==D){var I=!0;y+="x"}if(!L&&k[c]!==x){var L=!0;y+="y"}if(!M&&p[c]!==E){var M=!0;y+="z"}}I||(y+="x");L||(y+="y");M||(y+="z");var N=l.distinctVals(a._x).vals,H=l.distinctVals(a._y).vals,
J=l.distinctVals(a._z).vals;y=y.replace("x",(D>B?"-":"+")+"x");y=y.replace("y",(x>t?"-":"+")+"y");y=y.replace("z",(E>G?"-":"+")+"z");if(!n||n<N.length*H.length*J.length)n=0,N=[],H=[],J=[];c=function(V){return"x"===V?g:"y"===V?k:p};B=function(V){return"x"===V?N:"y"===V?H:J};G=function(V){return V[n-1]<V[0]?-1:1};a=c(y[1]);I=c(y[3]);L=c(y[5]);M=B(y[1]).length;D=B(y[3]).length;B=B(y[5]).length;x=!1;t=G(c(y[1]));E=G(c(y[3]));var O=G(c(y[5]));for(c=0;c<B-1;c++){for(G=0;G<D-1;G++){for(f=0;f<M-1;f++){var Q=
M*(D*c+G)+f,U=M*(D*c+(G+1))+f,P=M*(D*(c+1)+G)+f;a[Q]*t<a[M*(D*c+G)+(f+1)]*t&&I[Q]*E<I[U]*E&&L[Q]*O<L[P]*O||(x=!0);if(x)break}if(x)break}if(x)break}x&&(l.warn("Encountered arbitrary coordinates! Unable to input data grid."),n=0,N=[],H=[],J=[]);return{xMin:q,yMin:u,zMin:w,xMax:d,yMax:r,zMax:v,Xs:N,Ys:H,Zs:J,len:n,fill:y}}function h(a,g){void 0===g&&(g=a.length);if(l.isTypedArray(a))return a.subarray(0,g);for(var k=[],p=0;p<g;p++)k[p]=+a[p];return k}var l=b("../../lib"),e=b("../../components/colorscale/calc");
F.exports={calc:function(a,g){g._len=Math.min(g.u.length,g.v.length,g.w.length,g.x.length,g.y.length,g.z.length);g._u=h(g.u,g._len);g._v=h(g.v,g._len);g._w=h(g.w,g._len);g._x=h(g.x,g._len);g._y=h(g.y,g._len);g._z=h(g.z,g._len);var k=m(g);g._gridFill=k.fill;g._Xs=k.Xs;g._Ys=k.Ys;g._Zs=k.Zs;g._len=k.len;var p=0;if(g.starts){var n=h(g.starts.x||[]);var c=h(g.starts.y||[]);var f=h(g.starts.z||[]);p=Math.min(n.length,c.length,f.length)}g._startsX=n||[];g._startsY=c||[];g._startsZ=f||[];var d=0,q=Infinity,
r;for(r=0;r<g._len;r++){var u=g._u[r],v=g._v[r],w=g._w[r];u=Math.sqrt(u*u+v*v+w*w);d=Math.max(d,u);q=Math.min(q,u)}e(a,g,{vals:[q,d],containerStr:"",cLetter:"c"});for(r=0;r<p;r++)a=n[r],k.xMax=Math.max(k.xMax,a),k.xMin=Math.min(k.xMin,a),a=c[r],k.yMax=Math.max(k.yMax,a),k.yMin=Math.min(k.yMin,a),a=f[r],k.zMax=Math.max(k.zMax,a),k.zMin=Math.min(k.zMin,a);g._slen=p;g._normMax=d;g._xbnds=[k.xMin,k.xMax];g._ybnds=[k.yMin,k.yMax];g._zbnds=[k.zMin,k.zMax]},filter:h,processGrid:m}},{"../../components/colorscale/calc":623,
"../../lib":749}],1263:[function(b,F,C){function m(d,q){this.scene=d;this.uid=q;this.data=this.mesh=null}function h(d){var q=d.length;return 2<q?d.slice(1,q-1):2===q?[(d[0]+d[1])/2]:d}function l(d){var q=d.length;return 1===q?[.5,.5]:[d[1]-d[0],d[q-1]-d[q-2]]}function e(d,q){function r(M,N){var H=u[N],J=v[f[N]];return k.simpleMap(M,function(O){return H.d2l(O)*J})}var u=d.fullSceneLayout,v=d.dataScale,w=q._len;d={};d.vectors=c(r(q._u,"xaxis"),r(q._v,"yaxis"),r(q._w,"zaxis"),w);if(!w)return{positions:[],
cells:[]};var y=r(q._Xs,"xaxis"),D=r(q._Ys,"yaxis");w=r(q._Zs,"zaxis");d.meshgrid=[y,D,w];d.gridFill=q._gridFill;if(q._slen)d.startingPositions=c(r(q._startsX,"xaxis"),r(q._startsY,"yaxis"),r(q._startsZ,"zaxis"));else{for(var x=D[0],E=h(y),B=h(w),t=Array(E.length*B.length),G=0,I=0;I<E.length;I++)for(var L=0;L<B.length;L++)t[G++]=[E[I],x,B[L]];d.startingPositions=t}d.colormap=p(q);d.tubeSize=q.sizeref;d.maxLength=q.maxdisplayed;x=r(q._xbnds,"xaxis");E=r(q._ybnds,"yaxis");B=r(q._zbnds,"zaxis");y=l(y);
D=l(D);w=l(w);d=a(d,[[x[0]-y[0],E[0]-D[0],B[0]-w[0]],[x[1]+y[1],E[1]+D[1],B[1]+w[1]]]);w=n(q);d.vertexIntensityBounds=[w.min/q._normMax,w.max/q._normMax];w=q.lightposition;d.lightPosition=[w.x,w.y,w.z];d.ambient=q.lighting.ambient;d.diffuse=q.lighting.diffuse;d.specular=q.lighting.specular;d.roughness=q.lighting.roughness;d.fresnel=q.lighting.fresnel;d.opacity=q.opacity;q._pad=d.tubeScale*q.sizeref*2;return d}var a=b("gl-streamtube3d"),g=a.createTubeMesh,k=b("../../lib"),p=b("../../lib/gl_format_color").parseColorScale,
n=b("../../components/colorscale").extractOpts,c=b("../../plots/gl3d/zip3"),f={xaxis:0,yaxis:1,zaxis:2};b=m.prototype;b.handlePick=function(d){function q(y,D){var x=u[f[D]];return r[D].l2c(y)/x}var r=this.scene.fullSceneLayout,u=this.scene.dataScale;if(d.object===this.mesh){var v=d.data.position,w=d.data.velocity;d.traceCoordinate=[q(v[0],"xaxis"),q(v[1],"yaxis"),q(v[2],"zaxis"),q(w[0],"xaxis"),q(w[1],"yaxis"),q(w[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence];d.textLabel=this.data.hovertext||
this.data.text;return!0}};b.update=function(d){this.data=d;d=e(this.scene,d);this.mesh.update(d)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};F.exports=function(d,q){var r=d.glplot.gl,u=e(d,q);r=g(r,u);u=new m(d,q.uid);u.mesh=r;u.data=q;r._trace=u;d.glplot.add(r);return u}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/gl3d/zip3":850,"gl-streamtube3d":323}],1264:[function(b,F,C){var m=b("../../lib"),h=b("../../components/colorscale/defaults"),
l=b("./attributes");F.exports=function(e,a,g,k){function p(r,u){return m.coerce(e,a,l,r,u)}g=p("u");var n=p("v"),c=p("w"),f=p("x"),d=p("y"),q=p("z");g&&g.length&&n&&n.length&&c&&c.length&&f&&f.length&&d&&d.length&&q&&q.length?(p("starts.x"),p("starts.y"),p("starts.z"),p("maxdisplayed"),p("sizeref"),p("lighting.ambient"),p("lighting.diffuse"),p("lighting.specular"),p("lighting.roughness"),p("lighting.fresnel"),p("lightposition.x"),p("lightposition.y"),p("lightposition.z"),h(e,a,k,p,{prefix:"",cLetter:"c"}),
p("text"),p("hovertext"),p("hovertemplate"),a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1261}],1265:[function(b,F,C){F.exports={moduleType:"trace",name:"streamtube",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc").calc,plot:b("./convert"),eventData:function(m,h){m.tubex=m.x;m.tubey=m.y;m.tubez=m.z;m.tubeu=h.traceCoordinate[3];
m.tubev=h.traceCoordinate[4];m.tubew=h.traceCoordinate[5];m.norm=h.traceCoordinate[6];m.divergence=h.traceCoordinate[7];delete m.x;delete m.y;delete m.z;return m},meta:{}}},{"../../plots/gl3d":839,"./attributes":1261,"./calc":1262,"./convert":1263,"./defaults":1264}],1266:[function(b,F,C){C=b("../../plots/attributes");var m=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/template_attributes").texttemplateAttrs,l=b("../../components/colorscale/attributes"),e=b("../../plots/domain").attributes,
a=b("../pie/attributes"),g=b("./constants");b=b("../../lib/extend").extendFlat;F.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",
dflt:-1},marker:b({colors:{valType:"data_array",editType:"calc"},line:{color:b({},a.marker.line.color,{dflt:null}),width:b({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:"label;text;value;current path;percent root;percent entry;percent parent".split(";"),extras:["none"],editType:"plot"},texttemplate:h({editType:"plot"},
{keys:g.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:b({},C.hoverinfo,{flags:"label;text;value;name;current path;percent root;percent entry;percent parent".split(";"),dflt:"label+text+value+name"}),hovertemplate:m({},{keys:g.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:b({},a.outsidetextfont,{}),domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":622,
"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129,"./constants":1269}],1267:[function(b,F,C){var m=b("../../plots/plots");C.name="sunburst";C.plot=function(h,l,e,a){m.plotBasePlot(C.name,h,l,e,a)};C.clean=function(h,l,e,a){m.cleanBasePlot(C.name,h,l,e,a)}},{"../../plots/plots":860}],1268:[function(b,F,C){function m(d,q,r){var u=0,v=d.children;if(v){for(var w=v.length,y=0;y<w;y++)u+=m(v[y],q,r);r.branches&&u++}else r.leaves&&
u++;d.value=d.data.data.value=u;q._values||(q._values=[]);return q._values[d.data.data.i]=u}var h=b("d3-hierarchy"),l=b("fast-isnumeric"),e=b("../../lib"),a=b("../../components/colorscale").makeColorScaleFuncFromTrace,g=b("../pie/calc").makePullColorFn,k=b("../pie/calc").generateExtendedColors,p=b("../../components/colorscale").calc,n=b("../../constants/numerical").ALMOST_EQUAL,c={},f={};C.calc=function(d,q){var r=d._fullLayout,u=q.ids,v=e.isArrayOrTypedArray(u),w=q.labels,y=q.parents,D=q.values,
x=e.isArrayOrTypedArray(D),E=[],B={},t={},G=function(ca,ia){B[ca]?B[ca].push(ia):B[ca]=[ia];t[ia]=1},I=function(ca){return ca||"number"===typeof ca},L=function(ca){return!x||l(D[ca])&&0<=D[ca]};if(v){v=Math.min(u.length,y.length);var M=function(ca){return I(u[ca])&&L(ca)};var N=function(ca){return String(u[ca])}}else v=Math.min(w.length,y.length),M=function(ca){return I(w[ca])&&L(ca)},N=function(ca){return String(w[ca])};x&&(v=Math.min(v,D.length));for(var H=0;H<v;H++)if(M(H)){var J=N(H),O=I(y[H])?
String(y[H]):"",Q={i:H,id:J,pid:O,label:I(w[H])?String(w[H]):""};x&&(Q.v=+D[H]);E.push(Q);G(O,J)}if(!B[""]){y=[];for(var U in B)t[U]||y.push(U);if(1===y.length)U=y[0],E.unshift({hasImpliedRoot:!0,id:U,pid:"",label:U});else return e.warn("Multiple implied roots, cannot build "+q.type+" hierarchy.")}else if(1<B[""].length){U=e.randstr();for(y=0;y<E.length;y++)""===E[y].pid&&(E[y].pid=U);E.unshift({hasMultipleRoots:!0,id:U,pid:"",label:""})}try{var P=h.stratify().id(function(ca){return ca.id}).parentId(function(ca){return ca.pid})(E)}catch(ca){return e.warn("Failed to build "+
q.type+" hierarchy. Error: "+ca.message)}P=h.hierarchy(P);var V=!1;if(x)switch(q.branchvalues){case "remainder":P.sum(function(ca){return ca.data.v});break;case "total":P.each(function(ca){var ia=ca.data.data,fa=ia.v;if(ca.children){var ha=ca.children.reduce(function(na,pa){return na+pa.data.data.v},0);if(ia.hasImpliedRoot||ia.hasMultipleRoots)fa=ha;if(fa<ha*n)return V=!0,e.warn(["Total value for node",ca.data.data.id,"is smaller than the sum of its children. \nparent value \x3d",fa,"\nchildren sum \x3d",
ha].join(" "))}ca.value=fa})}else m(P,q,{branches:-1!==q.count.indexOf("branches"),leaves:-1!==q.count.indexOf("leaves")});if(!V){P.sort(function(ca,ia){return ia.value-ca.value});var Y=q.marker.colors||[];U=!!Y.length;if(q._hasColorscale){U||(Y=x?q.values:q._values);p(d,q,{vals:Y,containerStr:"marker",cLetter:"c"});var ba=a(q.marker)}else var ea=g(r["_"+q.type+"colormap"]);P.each(function(ca){ca=ca.data.data;ca.color=q._hasColorscale?ba(Y[ca.i]):ea(Y[ca.i],ca.id)});E[0].hierarchy=P;return E}};C._runCrossTraceCalc=
function(d,q){function r(x){var E=x.data.data,B=E.id;!1===E.color&&(w[B]?E.color=w[B]:x.parent?x.parent.parent?E.color=x.parent.data.data.color:(w[B]=E.color=v[y%v.length],y++):E.color="rgba(0,0,0,0)")}var u=q._fullLayout;q=q.calcdata;var v=u[d+"colorway"],w=u["_"+d+"colormap"];u["extend"+d+"colors"]&&(v=k(v,"treemap"===d?f:c));var y=0;for(u=0;u<q.length;u++){var D=q[u][0];D.trace.type===d&&D.hierarchy&&D.hierarchy.each(r)}};C.crossTraceCalc=function(d){return C._runCrossTraceCalc("sunburst",d)}},
{"../../components/colorscale":627,"../../constants/numerical":724,"../../lib":749,"../pie/calc":1131,"d3-hierarchy":161,"fast-isnumeric":241}],1269:[function(b,F,C){F.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" ")}},{}],1270:[function(b,F,C){var m=b("../../lib"),h=b("./attributes"),l=b("../../plots/domain").defaults,e=b("../bar/defaults").handleText;b=b("../../components/colorscale");var a=
b.hasColorscale,g=b.handleDefaults;F.exports=function(k,p,n,c){function f(q,r){return m.coerce(k,p,h,q,r)}n=f("labels");var d=f("parents");n&&n.length&&d&&d.length?((n=f("values"))&&n.length?f("branchvalues"):f("count"),f("level"),f("maxdepth"),f("marker.line.width")&&f("marker.line.color",c.paper_bgcolor),f("marker.colors"),(n=p._hasColorscale=a(k,"marker","colors")||(k.marker||{}).coloraxis)&&g(k,p,c,f,{prefix:"marker.",cLetter:"c"}),f("leaf.opacity",n?1:.7),n=f("text"),f("texttemplate"),p.texttemplate||
f("textinfo",Array.isArray(n)?"text+label":"label"),f("hovertext"),f("hovertemplate"),e(k,p,c,f,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("insidetextorientation"),l(p,c,f),p._length=null):p.visible=!1}},{"../../components/colorscale":627,"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"./attributes":1266}],1271:[function(b,F,C){function m(c,f,d){for(var q=c.data.data,r={curveNumber:f.index,
pointNumber:q.i,data:f._input,fullData:f},u=0;u<d.length;u++){var v=d[u];v in c&&(r[v]=c[v])}"parentString"in c&&!p.isHierarchyRoot(c)&&(r.parent=c.parentString);e(r,f,q.i);return r}var h=b("d3"),l=b("../../registry"),e=b("../../components/fx/helpers").appendArrayPointValue,a=b("../../components/fx"),g=b("../../lib"),k=b("../../lib/events"),p=b("./helpers"),n=b("../pie/helpers").formatPieValue;F.exports=function(c,f,d,q,r){var u=q[0],v=u.trace,w=u.hierarchy,y="sunburst"===v.type,D="treemap"===v.type;
"_hasHoverLabel"in v||(v._hasHoverLabel=!1);"_hasHoverEvent"in v||(v._hasHoverEvent=!1);c.on("mouseover",function(x){var E=d._fullLayout;if(!d._dragging&&!1!==E.hovermode){var B=d._fullData[v.index],t=x.data.data,G=t.i,I=p.isHierarchyRoot(x),L=p.getParent(w,x),M=p.getValue(x),N=function(ia){return g.castOption(B,G,ia)},H=N("hovertemplate"),J=a.castHoverinfo(B,E,G),O=E.separators;if(H||J&&"none"!==J&&"skip"!==J){if(y){var Q=u.cx+x.pxmid[0]*(1-x.rInscribed);var U=u.cy+x.pxmid[1]*(1-x.rInscribed)}D&&
(Q=x._hoverX,U=x._hoverY);var P={},V=[],Y=[],ba=function(ia){return-1!==V.indexOf(ia)};J&&(V="all"===J?B._module.attributes.hoverinfo.flags:J.split("+"));P.label=t.label;ba("label")&&P.label&&Y.push(P.label);t.hasOwnProperty("v")&&(P.value=t.v,P.valueLabel=n(P.value,O),ba("value")&&Y.push(P.valueLabel));P.currentPath=x.currentPath=p.getPath(x.data);ba("current path")&&!I&&Y.push(P.currentPath);var ea=[];J=function(){-1===ea.indexOf(ca)&&(Y.push(ca),ea.push(ca))};P.percentParent=x.percentParent=M/
p.getValue(L);P.parent=x.parentString=p.getPtLabel(L);if(ba("percent parent")){var ca=p.formatPercent(P.percentParent,O)+" of "+P.parent;J()}P.percentEntry=x.percentEntry=M/p.getValue(f);P.entry=x.entry=p.getPtLabel(f);!ba("percent entry")||I||x.onPathbar||(ca=p.formatPercent(P.percentEntry,O)+" of "+P.entry,J());P.percentRoot=x.percentRoot=M/p.getValue(w);P.root=x.root=p.getPtLabel(w);ba("percent root")&&!I&&(ca=p.formatPercent(P.percentRoot,O)+" of "+P.root,J());P.text=N("hovertext")||N("text");
ba("text")&&(ca=P.text,g.isValidTextValue(ca)&&Y.push(ca));t={trace:B,y:U,text:Y.join("\x3cbr\x3e"),name:H||ba("name")?B.name:void 0,color:N("hoverlabel.bgcolor")||t.color,borderColor:N("hoverlabel.bordercolor"),fontFamily:N("hoverlabel.font.family"),fontSize:N("hoverlabel.font.size"),fontColor:N("hoverlabel.font.color"),nameLength:N("hoverlabel.namelength"),textAlign:N("hoverlabel.align"),hovertemplate:H,hovertemplateLabels:P,eventData:[m(x,B,r.eventDataKeys)]};y&&(t.x0=Q-x.rInscribed*x.rpx1,t.x1=
Q+x.rInscribed*x.rpx1,t.idealAlign=0>x.pxmid[0]?"left":"right");D&&(t.x=Q,t.idealAlign=0>Q?"left":"right");a.loneHover(t,{container:E._hoverlayer.node(),outerContainer:E._paper.node(),gd:d});v._hasHoverLabel=!0}D&&(E=c.select("path.surface"),r.styleOne(E,x,B,{hovered:!0}));v._hasHoverEvent=!0;d.emit("plotly_hover",{points:[m(x,B,r.eventDataKeys)],event:h.event})}});c.on("mouseout",function(x){var E=d._fullLayout,B=d._fullData[v.index],t=h.select(this).datum();v._hasHoverEvent&&(x.originalEvent=h.event,
d.emit("plotly_unhover",{points:[m(t,B,r.eventDataKeys)],event:h.event}),v._hasHoverEvent=!1);v._hasHoverLabel&&(a.loneUnhover(E._hoverlayer.node()),v._hasHoverLabel=!1);D&&(x=c.select("path.surface"),r.styleOne(x,t,B,{hovered:!1}))});c.on("click",function(x){var E=d._fullLayout,B=d._fullData[v.index],t=y&&(p.isHierarchyRoot(x)||p.isLeaf(x)),G=p.getPtId(x);G=p.isEntry(x)?p.findEntryWithChild(w,G):p.findEntryWithLevel(w,G);G=p.getPtId(G);var I={points:[m(x,B,r.eventDataKeys)],event:h.event};t||(I.nextLevel=
G);I=k.triggerHandler(d,"plotly_"+v.type+"click",I);!1!==I&&E.hovermode&&(d._hoverdata=[m(x,B,r.eventDataKeys)],a.click(d,h.event));t||!1===I||d._dragging||d._transitioning||(l.call("_storeDirectGUIEdit",B,E._tracePreGUI[B.uid],{level:B.level}),x={data:[{level:G}],traces:[v.index]},B={frame:{redraw:!1,duration:r.transitionTime},transition:{duration:r.transitionTime,easing:r.transitionEasing},mode:"immediate",fromcurrent:!0},a.loneUnhover(E._hoverlayer.node()),l.call("animate",d,x,B))})}},{"../../components/fx":655,
"../../components/fx/helpers":651,"../../lib":749,"../../lib/events":738,"../../registry":880,"../pie/helpers":1134,"./helpers":1272,d3:169}],1272:[function(b,F,C){var m=b("../../lib"),h=b("../../components/color"),l=b("../../lib/setcursor"),e=b("../pie/helpers");C.findEntryWithLevel=function(a,g){var k;g&&a.eachAfter(function(p){if(C.getPtId(p)===g)return k=p.copy()});return k||a};C.findEntryWithChild=function(a,g){var k;a.eachAfter(function(p){for(var n=p.children||[],c=0;c<n.length;c++)if(C.getPtId(n[c])===
g)return k=p.copy()});return k||a};C.isEntry=function(a){return!a.parent};C.isLeaf=function(a){return!a.children};C.getPtId=function(a){return a.data.data.id};C.getPtLabel=function(a){return a.data.data.label};C.getValue=function(a){return a.value};C.isHierarchyRoot=function(a){return""===a.data.data.pid};C.setSliceCursor=function(a,g,k){g=k.isTransitioning;g||(g=a.datum(),g=k.hideOnRoot&&C.isHierarchyRoot(g)||k.hideOnLeaves&&C.isLeaf(g));l(a,g?null:"pointer")};C.getInsideTextFontKey=function(a,g,
k,p,n){k=k.data.data.i;return m.castOption(g,k,((n||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+a)||m.castOption(g,k,"textfont."+a)||p.size};C.getOutsideTextFontKey=function(a,g,k,p){k=k.data.data.i;return m.castOption(g,k,"outsidetextfont."+a)||m.castOption(g,k,"textfont."+a)||p.size};C.isOutsideText=function(a,g){return!a._hasColorscale&&C.isHierarchyRoot(g)};C.determineTextFont=function(a,g,k,p){if(C.isOutsideText(a,g))a={color:C.getOutsideTextFontKey("color",a,g,k),family:C.getOutsideTextFontKey("family",
a,g,k),size:C.getOutsideTextFontKey("size",a,g,k)};else{var n=g.data.data,c=n.i,f=m.castOption(a,c,((p||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");!f&&a._input.textfont&&(f=m.castOption(a._input,c,"textfont.color"));a={color:f||h.contrast(n.color),family:C.getInsideTextFontKey("family",a,g,k,p),size:C.getInsideTextFontKey("size",a,g,k,p)}}return a};C.hasTransition=function(a){return!!(a&&0<a.duration)};C.getMaxDepth=function(a){return 0<=a.maxdepth?a.maxdepth:Infinity};C.isHeader=
function(a,g){return!(C.isLeaf(a)||a.depth===g._maxDepth-1)};C.getParent=function(a,g){return C.findEntryWithLevel(a,g.data.data.pid)};C.listPath=function(a,g){a=a.parent;if(!a)return[];var k=g?[a.data[g]]:[a];return C.listPath(a,g).concat(k)};C.getPath=function(a){return C.listPath(a,"label").join("/")+"/"};C.formatValue=e.formatPieValue;C.formatPercent=function(a,g){var k=m.formatPercent(a,0);"0%"===k&&(k=e.formatPiePercent(a,g));return k}},{"../../components/color":615,"../../lib":749,"../../lib/setcursor":769,
"../pie/helpers":1134}],1273:[function(b,F,C){F.exports={moduleType:"trace",name:"sunburst",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1173,"./attributes":1266,
"./base_plot":1267,"./calc":1268,"./defaults":1270,"./layout_attributes":1274,"./layout_defaults":1275,"./plot":1276,"./style":1277}],1274:[function(b,F,C){F.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1275:[function(b,F,C){var m=b("../../lib"),h=b("./layout_attributes");F.exports=function(l,e){m.coerce(l,e,h,"sunburstcolorway",e.colorway);m.coerce(l,e,h,"extendsunburstcolors",void 0)}},{"../../lib":749,"./layout_attributes":1274}],
1276:[function(b,F,C){function m(D,x,E,B){function t(ka){var sa=y.getPtId(ka),ya=ca[sa],qa=ca[y.getPtId(Q)];if(qa){var xa=ka.x1>qa.x1?2*Math.PI:0;ka=ka.rpx1<qa.rpx1?{rpx0:0,rpx1:0}:{x0:xa,x1:xa}}else{var Ca,Ja=y.getPtId(ka.parent);H.each(function(Ra){if(y.getPtId(Ra)===Ja)return Ca=Ra});ka=Ca.children;var eb;ka.forEach(function(Ra,Wa){if(y.getPtId(Ra)===sa)return eb=Wa});ka=ka.length;qa=a.interpolate(Ca.x0,Ca.x1);ka={rpx0:V,rpx1:V,x0:qa(eb/ka),x1:qa((eb+1)/ka)}}return a.interpolate(ya,ka)}function G(ka){var sa=
ca[y.getPtId(ka)],ya={x0:ka.x0,x1:ka.x1,rpx0:ka.rpx0,rpx1:ka.rpx1};sa||(ea?ka.parent?oa?(ka=ka.x1>oa?2*Math.PI:0,sa={x0:ka,x1:ka}):(sa={rpx0:V,rpx1:V},p.extendFlat(sa,L(ka))):sa={rpx0:0,rpx1:0}:sa={x0:0,x1:0});return a.interpolate(sa,ya)}function I(ka){var sa=ca[y.getPtId(ka)],ya=ka.transform;sa||(sa={rpx1:ka.rpx1,transform:{textPosAngle:ya.textPosAngle,scale:0,rotate:ya.rotate,rCenter:ya.rCenter,x:ya.x,y:ya.y}},ea?ka.parent?oa?sa.x0=sa.x1=ka.x1>oa?2*Math.PI:0:p.extendFlat(sa,L(ka)):sa.x0=sa.x1=0:
sa.x0=sa.x1=0);var qa=a.interpolate(sa.transform.textPosAngle,ka.transform.textPosAngle),xa=a.interpolate(sa.rpx1,ka.rpx1),Ca=a.interpolate(sa.x0,ka.x0),Ja=a.interpolate(sa.x1,ka.x1),eb=a.interpolate(sa.transform.scale,ya.scale),Ra=a.interpolate(sa.transform.rotate,ya.rotate),Wa=0===ya.rCenter?3:0===sa.transform.rCenter?1/3:1,Ea=a.interpolate(sa.transform.rCenter,ya.rCenter);return function(Ia){var Qa=xa(Ia),lb=Ca(Ia),hb=Ja(Ia),Fa=Ea(Math.pow(Ia,Wa));lb=na(Qa,(lb+hb)/2);hb=qa(Ia);Qa={pxmid:lb,rpx1:Qa,
transform:{textPosAngle:hb,rCenter:Fa,x:ya.x,y:ya.y}};c(O.type,ya,M);return{transform:{targetX:ra(Qa),targetY:ta(Qa),scale:eb(Ia),rotate:Ra(Ia),rCenter:Fa}}}}function L(ka){var sa=ka.parent,ya=ca[y.getPtId(sa)],qa={};ya?(sa=sa.children,ka=sa.indexOf(ka),sa=sa.length,ya=a.interpolate(ya.x0,ya.x1),qa.x0=ya(ka/sa),qa.x1=ya(ka/sa)):qa.x0=qa.x1=0;return qa}var M=D._fullLayout,N=!M.uniformtext.mode&&y.hasTransition(B),H=a.select(E).selectAll("g.slice"),J=x[0],O=J.trace,Q=y.findEntryWithLevel(J.hierarchy,
O.level);E=y.getMaxDepth(O);B=M._size;var U=O.domain,P=B.h*(U.y[1]-U.y[0]),V=.5*Math.min(B.w*(U.x[1]-U.x[0]),P),Y=J.cx=B.l+B.w*(U.x[1]+U.x[0])/2,ba=J.cy=B.t+B.h*(1-U.y[0])-P/2;if(!Q)return H.remove();var ea=null,ca={};N&&H.each(function(ka){ca[y.getPtId(ka)]={rpx0:ka.rpx0,rpx1:ka.rpx1,x0:ka.x0,x1:ka.x1,transform:ka.transform};!ea&&y.isEntry(ka)&&(ea=ka)});B=h(Q).descendants();U=Q.height+1;var ia=0,fa=E;J.hasMultipleRoots&&y.isHierarchyRoot(Q)&&(B=B.slice(1),--U,ia=1,fa+=1);B=B.filter(function(ka){return ka.y1<=
fa});var ha=Math.min(U,E),na=function(ka,sa){return[ka*Math.cos(sa),-ka*Math.sin(sa)]},pa=function(ka){return p.pathAnnulus(ka.rpx0,ka.rpx1,ka.x0,ka.x1,Y,ba)},ra=function(ka){return Y+e(ka.rpx1,ka.transform.textPosAngle)[0]*(ka.transform.rCenter||0)+(ka.transform.x||0)},ta=function(ka){return ba+e(ka.rpx1,ka.transform.textPosAngle)[1]*(ka.transform.rCenter||0)+(ka.transform.y||0)};H=H.data(B,y.getPtId);H.enter().append("g").classed("slice",!0);N?H.exit().transition().each(function(){var ka=a.select(this);
ka.select("path.surface").transition().attrTween("d",function(sa){var ya=t(sa);return function(qa){return pa(ya(qa))}});ka.select("g.slicetext").attr("opacity",0)}).remove():H.exit().remove();H.order();var oa=null;if(N&&ea){var ua=y.getPtId(ea);H.each(function(ka){null===oa&&y.getPtId(ka)===ua&&(oa=ka.x1)})}E=H;N&&(E=E.transition().each("end",function(){var ka=a.select(this);y.setSliceCursor(ka,D,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}));E.each(function(ka){var sa=a.select(this),ya=p.ensureSingle(sa,
"path","surface",function(Ja){Ja.style("pointer-events","all")});ka.rpx0=(ka.y0-ia)/ha*V;ka.rpx1=(ka.y1-ia)/ha*V;ka.xmid=(ka.x0+ka.x1)/2;ka.pxmid=na(ka.rpx1,ka.xmid);ka.midangle=-(ka.xmid-Math.PI/2);ka.startangle=-(ka.x0-Math.PI/2);ka.stopangle=-(ka.x1-Math.PI/2);ka.halfangle=.5*Math.min(p.angleDelta(ka.x0,ka.x1)||Math.PI,Math.PI);ka.ring=1-ka.rpx0/ka.rpx1;ka.rInscribed=l(ka,O);N?ya.transition().attrTween("d",function(Ja){var eb=G(Ja);return function(Ra){return pa(eb(Ra))}}):ya.attr("d",pa);sa.call(v,
Q,D,x,{eventDataKeys:w.eventDataKeys,transitionTime:w.CLICK_TRANSITION_TIME,transitionEasing:w.CLICK_TRANSITION_EASING}).call(y.setSliceCursor,D,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:D._transitioning});ya.call(r,ka,O);sa=p.ensureSingle(sa,"g","slicetext");sa=p.ensureSingle(sa,"text","",function(Ja){Ja.attr("data-notex",1)});var qa=p.ensureUniformFontSize(D,y.determineTextFont(O,ka,M.font));sa.text(C.formatSliceLabel(ka,Q,O,x,M)).classed("slicetext",!0).attr("text-anchor","middle").call(k.font,
qa).call(n.convertToTspans,D);var xa=k.bBox(sa.node());ka.transform=q(xa,ka,J);ka.transform.targetX=ra(ka);ka.transform.targetY=ta(ka);var Ca=function(Ja,eb){Ja=Ja.transform;d(Ja,eb);Ja.fontSize=qa.size;c(O.type,Ja,M);return p.getTextTransform(Ja)};N?sa.transition().attrTween("transform",function(Ja){var eb=I(Ja);return function(Ra){return Ca(eb(Ra),xa)}}):sa.attr("transform",Ca(ka,xa))})}function h(D){return g.partition().size([2*Math.PI,D.height+1])(D)}function l(D){return 0===D.rpx0&&p.isFullCircle([D.x0,
D.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(D.halfangle)),D.ring/2))}function e(D,x){return[D*Math.sin(x),-D*Math.cos(x)]}var a=b("d3"),g=b("d3-hierarchy"),k=b("../../components/drawing"),p=b("../../lib"),n=b("../../lib/svg_text_utils");F=b("../bar/uniform_text");var c=F.recordMinTextSize,f=F.clearMinTextSize;F=b("../pie/plot");var d=F.computeTransform,q=F.transformInsideText,r=b("./style").styleOne,u=b("../bar/style").resizeText,v=b("./fx"),w=b("./constants"),y=b("./helpers");C.plot=function(D,
x,E,B){var t=D._fullLayout,G=t._sunburstlayer,I,L=!E,M=!t.uniformtext.mode&&y.hasTransition(E);f("sunburst",t);x=G.selectAll("g.trace.sunburst").data(x,function(N){return N[0].trace.uid});x.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round");x.order();M?(B&&(I=B()),a.transition().duration(E.duration).ease(E.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()}).each(function(){G.selectAll("g.trace").each(function(N){m(D,N,this,E)})})):
(x.each(function(N){m(D,N,this,E)}),t.uniformtext.mode&&u(D,t._sunburstlayer.selectAll(".trace"),"sunburst"));L&&x.exit().remove()};C.formatSliceLabel=function(D,x,E,B,t){var G=E.texttemplate,I=E.textinfo;if(!(G||I&&"none"!==I))return"";var L=t.separators,M=D.data.data;B=B[0].hierarchy;var N=y.isHierarchyRoot(D),H=y.getParent(B,D),J=y.getValue(D);if(!G){var O=I.split("+");t=function(Y){return-1!==O.indexOf(Y)};var Q=[];t("label")&&M.label&&Q.push(M.label);M.hasOwnProperty("v")&&t("value")&&Q.push(y.formatValue(M.v,
L));if(!N){t("current path")&&Q.push(y.getPath(D.data));D=0;t("percent parent")&&D++;t("percent entry")&&D++;t("percent root")&&D++;var U=1<D;if(D){D=function(Y){V=y.formatPercent(P,L);U&&(V+=" of "+Y);Q.push(V)};if(t("percent parent")&&!N){var P=J/y.getValue(H);D("parent")}t("percent entry")&&(P=J/y.getValue(x),D("entry"));t("percent root")&&(P=J/y.getValue(B),D("root"))}}if(t("text")){var V=p.castOption(E,M.i,"text");p.isValidTextValue(V)&&Q.push(V)}return Q.join("\x3cbr\x3e")}G=p.castOption(E,
M.i,"texttemplate");if(!G)return"";I={};M.label&&(I.label=M.label);M.hasOwnProperty("v")&&(I.value=M.v,I.valueLabel=y.formatValue(M.v,L));I.currentPath=y.getPath(D.data);N||(I.percentParent=J/y.getValue(H),I.percentParentLabel=y.formatPercent(I.percentParent,L),I.parent=y.getPtLabel(H));I.percentEntry=J/y.getValue(x);I.percentEntryLabel=y.formatPercent(I.percentEntry,L);I.entry=y.getPtLabel(x);I.percentRoot=J/y.getValue(B);I.percentRootLabel=y.formatPercent(I.percentRoot,L);I.root=y.getPtLabel(B);
M.hasOwnProperty("color")&&(I.color=M.color);x=p.castOption(E,M.i,"text");if(p.isValidTextValue(x)||""===x)I.text=x;I.customdata=p.castOption(E,M.i,"customdata");return p.texttemplateString(G,I,t._d3locale,I,E._meta||{})}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../bar/style":904,"../bar/uniform_text":906,"../pie/plot":1138,"./constants":1269,"./fx":1271,"./helpers":1272,"./style":1277,d3:169,"d3-hierarchy":161}],1277:[function(b,F,C){function m(g,k,p){var n=
k.data.data;k=!k.children;var c=n.i,f=e.castOption(p,c,"marker.line.color")||l.defaultLine;c=e.castOption(p,c,"marker.line.width")||0;g.style("stroke-width",c).call(l.fill,n.color).call(l.stroke,f).style("opacity",k?p.leaf.opacity:null)}var h=b("d3"),l=b("../../components/color"),e=b("../../lib"),a=b("../bar/uniform_text").resizeText;F.exports={style:function(g){var k=g._fullLayout._sunburstlayer.selectAll(".trace");a(g,k,"sunburst");k.each(function(p){var n=h.select(this),c=p[0].trace;n.style("opacity",
c.opacity);n.selectAll("path.surface").each(function(f){h.select(this).call(m,f,c)})})},styleOne:m}},{"../../components/color":615,"../../lib":749,"../bar/uniform_text":906,d3:169}],1278:[function(b,F,C){function m(k){return{valType:"boolean",dflt:!1}}function h(k){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:m("x"),y:m("y"),z:m("z")},color:{valType:"color",
dflt:l.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:l.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var l=b("../../components/color");C=b("../../components/colorscale/attributes");var e=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/attributes"),g=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;
F=F.exports=b(g({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:e(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},C("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:h("x"),y:h("y"),z:h("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",
min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",min:-1E5,max:1E5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:g({},C.zauto,{}),zmin:g({},
C.zmin,{}),zmax:g({},C.zmax,{})},hoverinfo:g({},a.hoverinfo),showlegend:g({},a.showlegend,{dflt:!1})}),"calc","nested");F.x.editType=F.y.editType=F.z.editType="calc+clearAxisTypes";F.transforms=void 0},{"../../components/color":615,"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875}],1279:[function(b,F,C){var m=b("../../components/colorscale/calc");F.exports=function(h,l){l.surfacecolor?
m(h,l,{vals:l.surfacecolor,containerStr:"",cLetter:"c"}):m(h,l,{vals:l.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],1280:[function(b,F,C){function m(w,y,D){this.scene=w;this.uid=D;this.surface=y;this.data=null;this.showContour=[!1,!1,!1];this.contourStart=[null,null,null];this.contourEnd=[null,null,null];this.contourSize=[0,0,0];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=1;this.refineData=
!0;this.objectOffset=[0,0,0]}function h(w,y){if(w<y)return 0;for(var D=0;0===Math.floor(w%y);)w/=y,D++;return D}function l(w){for(var y=[],D=0;D<r.length;D++)y.push(h(w,r[D]));return y}function e(w,y,D){var x=D[8]+D[2]*y[0]+D[5]*y[1];w[0]=(D[6]+D[0]*y[0]+D[3]*y[1])/x;w[1]=(D[7]+D[1]*y[0]+D[4]*y[1])/x;return w}var a=b("gl-surface3d"),g=b("ndarray"),k=b("ndarray-linear-interpolate").d2,p=b("../heatmap/interp2d"),n=b("../heatmap/find_empties"),c=b("../../lib").isArrayOrTypedArray,f=b("../../lib/gl_format_color").parseColorScale,
d=b("../../lib/str2rgbarray"),q=b("../../components/colorscale").extractOpts;b=m.prototype;b.getXat=function(w,y,D,x){w=c(this.data.x)?c(this.data.x[0])?this.data.x[y][w]:this.data.x[w]:w;return void 0===D?w:x.d2l(w,0,D)};b.getYat=function(w,y,D,x){w=c(this.data.y)?c(this.data.y[0])?this.data.y[y][w]:this.data.y[y]:y;return void 0===D?w:x.d2l(w,0,D)};b.getZat=function(w,y,D,x){var E=this.data.z[y][w];null===E&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[y][w]);return void 0===
D?E:x.d2l(E,0,D)};b.handlePick=function(w){if(w.object===this.surface){var y=Math.max(Math.min(Math.round((w.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),D=Math.max(Math.min(Math.round((w.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);w.index=[y,D];w.traceCoordinate=[this.getXat(y,D),this.getYat(y,D),this.getZat(y,D)];w.dataCoordinate=[this.getXat(y,D,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(y,D,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),
this.getZat(y,D,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var x=0;3>x;x++){var E=w.dataCoordinate[x];null!==E&&void 0!==E&&(w.dataCoordinate[x]*=this.scene.dataScale[x])}x=this.data.hovertext||this.data.text;Array.isArray(x)&&x[D]&&void 0!==x[D][y]?w.textLabel=x[D][y]:w.textLabel=x?x:"";w.data.dataCoordinate=w.dataCoordinate.slice();this.surface.highlight(w.data);this.scene.glplot.spikes.position=w.dataCoordinate;return!0}};var r=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,
67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,
839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,
1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,
2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];b.calcXnums=function(w){var y,D=[];for(y=1;y<w;y++){var x=this.getXat(y-1,0),E=this.getXat(y,0);D[y-1]=E!==
x&&void 0!==x&&null!==x&&void 0!==E&&null!==E?Math.abs(E-x):0}x=0;for(y=1;y<w;y++)x+=D[y-1];for(y=1;y<w;y++)D[y-1]=0===D[y-1]?1:Math.round(x/D[y-1]);return D};b.calcYnums=function(w){var y,D=[];for(y=1;y<w;y++){var x=this.getYat(0,y-1),E=this.getYat(0,y);D[y-1]=E!==x&&void 0!==x&&null!==x&&void 0!==E&&null!==E?Math.abs(E-x):0}x=0;for(y=1;y<w;y++)x+=D[y-1];for(y=1;y<w;y++)D[y-1]=0===D[y-1]?1:Math.round(x/D[y-1]);return D};C=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var u=C[9],v=C[13];b.estimateScale=
function(w,y){y=0===y?this.calcXnums(w):this.calcYnums(w);if(0===y.length)y=void 0;else{for(var D=1,x=0;x<y.length;x++){var E=y[x];if(1>D||1>E)D=void 0;else{D=l(D);E=l(E);for(var B=1,t=0;t<r.length;t++)B*=Math.pow(r[t],Math.max(D[t],E[t]));D=B}}y=D}for(x=1+y;x<u;)x*=2;for(;x>v;){x--;D=y=x;x=l(D);for(E=0;E<r.length;E++)if(0<x[E]){D=r[E];break}x=y/D;x++;x<u&&(x=v)}w=Math.round(x/w);return 1<w?w:1};b.refineCoords=function(w){var y=this.dataScaleX,D=this.dataScaleY,x=Math.floor(w[0].shape[0]*y+1)|0,E=
Math.floor(w[0].shape[1]*D+1)|0,B=1+w[0].shape[0]+1,t=1+w[0].shape[1]+1;B=g(new Float32Array(B*t),[B,t]);y=[1/y,0,0,0,1/D,0,0,0,1];for(D=0;D<w.length;++D){this.surface.padField(B,w[D]);for(var G=t=g(new Float32Array(x*E),[x,E]),I=B,L=e,M=y,N=[0,0],H=G.shape[0],J=G.shape[1],O=0;O<H;O++)for(var Q=0;Q<J;Q++)L(N,[O,Q],M),G.set(O,Q,k(I,N[0],N[1]));w[D]=t}};b.setContourLevels=function(){var w=[[],[],[]],y=[!1,!1,!1],D=!1,x,E;for(x=0;3>x;++x)if(this.showContour[x]&&(D=!0,0<this.contourSize[x]&&null!==this.contourStart[x]&&
null!==this.contourEnd[x]&&this.contourEnd[x]>this.contourStart[x]))for(y[x]=!0,E=this.contourStart[x];E<this.contourEnd[x];E+=this.contourSize[x]){var B=E*this.scene.dataScale[x];for(var t=w[x],G=!1,I=0;I<t.length;I++)if(B===t[I]){G=!0;break}!1===G&&t.push(B)}if(D){D=[[],[],[]];for(x=0;3>x;++x)this.showContour[x]&&(D[x]=y[x]?w[x]:this.scene.contourLevels[x]);this.surface.update({levels:D})}};b.update=function(w){var y=this.scene,D=y.fullSceneLayout,x=this.surface,E=w.opacity,B=f(w,E),t=y.dataScale,
G=w.z[0].length,I=w._ylength;y=y.contourLevels;this.data=w;var L,M,N,H=[];for(L=0;3>L;L++)for(H[L]=[],M=0;M<G;M++)H[L][M]=[];for(M=0;M<G;M++)for(N=0;N<I;N++)H[0][M][N]=this.getXat(M,N,w.xcalendar,D.xaxis),H[1][M][N]=this.getYat(M,N,w.ycalendar,D.yaxis),H[2][M][N]=this.getZat(M,N,w.zcalendar,D.zaxis);if(w.connectgaps)for(w._emptypoints=n(H[2]),p(H[2],w._emptypoints),w._interpolatedZ=[],M=0;M<G;M++)for(w._interpolatedZ[M]=[],N=0;N<I;N++)w._interpolatedZ[M][N]=H[2][M][N];for(L=0;3>L;L++)for(M=0;M<G;M++)for(N=
0;N<I;N++)D=H[L][M][N],H[L][M][N]=null===D||void 0===D?NaN:H[L][M][N]*t[L];for(L=0;3>L;L++)for(M=0;M<G;M++)for(N=0;N<I;N++)D=H[L][M][N],null!==D&&void 0!==D&&(this.minValues[L]>D&&(this.minValues[L]=D),this.maxValues[L]<D&&(this.maxValues[L]=D));for(L=0;3>L;L++)this.objectOffset[L]=.5*(this.minValues[L]+this.maxValues[L]);for(L=0;3>L;L++)for(M=0;M<G;M++)for(N=0;N<I;N++)D=H[L][M][N],null!==D&&void 0!==D&&(H[L][M][N]-=this.objectOffset[L]);D=[g(new Float32Array(G*I),[G,I]),g(new Float32Array(G*I),[G,
I]),g(new Float32Array(G*I),[G,I])];for(L=0;3>L;L++)for(M=0;M<G;M++)for(N=0;N<I;N++)D[L].set(M,N,H[L][M][N]);H={colormap:B,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity};L=q(w);H.intensityBounds=[L.min,L.max];if(w.surfacecolor){L=
g(new Float32Array(G*I),[G,I]);for(M=0;M<G;M++)for(N=0;N<I;N++)L.set(M,N,w.surfacecolor[N][M]);D.push(L)}else H.intensityBounds[0]*=t[2],H.intensityBounds[1]*=t[2];if(v<D[0].shape[0]||v<D[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(D[0].shape[0],0),this.dataScaleY=this.estimateScale(D[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(D));w.surfacecolor&&(H.intensity=D.pop());G=[!0,!0,!0];I=["x","y","z"];for(L=0;3>L;++L)t=w.contours[I[L]],
G[L]=t.highlight,H.showContour[L]=t.show||t.highlight,H.showContour[L]&&(H.contourProject[L]=[t.project.x,t.project.y,t.project.z],t.show?(this.showContour[L]=!0,H.levels[L]=y[L],x.highlightColor[L]=H.contourColor[L]=d(t.color),x.highlightTint[L]=t.usecolormap?H.contourTint[L]=0:H.contourTint[L]=1,H.contourWidth[L]=t.width,this.contourStart[L]=t.start,this.contourEnd[L]=t.end,this.contourSize[L]=t.size):(this.showContour[L]=!1,this.contourStart[L]=null,this.contourEnd[L]=null,this.contourSize[L]=
0),t.highlight&&(H.dynamicColor[L]=d(t.highlightcolor),H.dynamicWidth[L]=t.highlightwidth));y=B[0].rgb;B=B[B.length-1].rgb;y[0]===B[0]&&y[1]===B[1]&&y[2]===B[2]&&y[3]===B[3]&&(H.vertexColor=!0);H.objectOffset=this.objectOffset;H.coords=D;x.update(H);x.visible=w.visible;x.enableDynamic=G;x.enableHighlight=G;x.snapToData=!0;"lighting"in w&&(x.ambientLight=w.lighting.ambient,x.diffuseLight=w.lighting.diffuse,x.specularLight=w.lighting.specular,x.roughness=w.lighting.roughness,x.fresnel=w.lighting.fresnel);
"lightposition"in w&&(x.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z]);E&&1>E&&(x.supportsTransparency=!0)};b.dispose=function(){this.scene.glplot.remove(this.surface);this.surface.dispose()};F.exports=function(w,y){var D=a({gl:w.glplot.gl}),x=new m(w,D,y.uid);D._trace=x;x.update(y);w.glplot.add(D);return x}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../heatmap/find_empties":1040,"../heatmap/interp2d":1043,
"gl-surface3d":325,ndarray:469,"ndarray-linear-interpolate":463}],1281:[function(b,F,C){function m(k,p,n,c){k=c("opacityscale");if("max"===k)p.opacityscale=[[0,.1],[1,1]];else if("min"===k)p.opacityscale=[[0,1],[1,.1]];else if("extremes"===k){k=[];for(n=0;32>n;n++)c=n/31,k.push([c,Math.max(0,Math.min(1,.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2))))]);p.opacityscale=k}else{a:if(n=0,!Array.isArray(k)||2>k.length||!k[0]||!k[k.length-1]||0!==+k[0][0]||1!==+k[k.length-1][0])k=!1;else{for(c=0;c<k.length;c++){var f=
k[c];if(2!==f.length||+f[0]<n){k=!1;break a}n=+f[0]}k=!0}k||(p.opacityscale=void 0)}}function h(k,p,n){p in k&&!(n in k)&&(k[n]=k[p])}var l=b("../../registry"),e=b("../../lib"),a=b("../../components/colorscale/defaults"),g=b("./attributes");F.exports={supplyDefaults:function(k,p,n,c){function f(y,D){return e.coerce(k,p,g,y,D)}n=f("x");var d=f("y");var q=f("z");if(!q||!q.length||n&&1>n.length||d&&1>d.length)p.visible=!1;else{p._xlength=Array.isArray(n)&&e.isArrayOrTypedArray(n[0])?q.length:q[0].length;
p._ylength=q.length;l.getComponentMethod("calendars","handleTraceDefaults")(k,p,["x","y","z"],c);f("text");f("hovertext");f("hovertemplate");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(y){f(y)});q=f("surfacecolor");var r=["x","y","z"];for(n=0;3>n;++n){var u="contours."+r[n],v=f(u+".show"),w=f(u+".highlight");if(v||w)for(d=0;3>d;++d)f(u+".project."+
r[d]);v&&(f(u+".color"),f(u+".width"),f(u+".usecolormap"));w&&(f(u+".highlightcolor"),f(u+".highlightwidth"));f(u+".start");f(u+".end");f(u+".size")}q||(h(k,"zmin","cmin"),h(k,"zmax","cmax"),h(k,"zauto","cauto"));a(k,p,c,f,{prefix:"",cLetter:"c"});m(k,p,c,f);p._length=null}},opacityscaleDefaults:m}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1278}],1282:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,
colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),moduleType:"trace",name:"surface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1278,"./calc":1279,"./convert":1280,"./defaults":1281}],1283:[function(b,F,C){C=b("../../components/annotations/attributes");var m=b("../../lib/extend").extendFlat,h=b("../../plot_api/edit_types").overrideAll,l=b("../../plots/font_attributes"),e=b("../../plots/domain").attributes;
b("../../constants/docs");(F.exports=h({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:m({},C.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},
fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:m({},l({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:m({},C.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:m({},l({arrayOk:!0}))}},
"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":598,"../../constants/docs":719,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/domain":824,"../../plots/font_attributes":825}],1284:[function(b,F,C){var m=b("../../plots/get_data").getModuleCalcData,h=b("./plot");C.name="table";C.plot=function(l){var e=m(l.calcdata,"table")[0];e.length&&h(l,e)};C.clean=function(l,e,a,g){l=g._has&&g._has("table");e=e._has&&e._has("table");l&&!e&&g._paperdiv.selectAll(".table").remove()}},
{"../../plots/get_data":834,"./plot":1291}],1285:[function(b,F,C){var m=b("../../lib/gup").wrap;F.exports=function(){return m({})}},{"../../lib/gup":746}],1286:[function(b,F,C){F.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"\x3cbr\x3e",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,scrollbarHideDuration:1E3,scrollbarOffset:5,
scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",
cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1287:[function(b,F,C){function m(d){if(Array.isArray(d)){for(var q=0,r=0;r<d.length;r++)q=Math.max(q,m(d[r]));return q}return d}function h(d,q){return d+q}function l(d){d=d.slice();var q=Infinity,r=0,u;for(u=0;u<d.length;u++)Array.isArray(d[u])||(d[u]=[d[u]]),
q=Math.min(q,d[u].length),r=Math.max(r,d[u].length);if(q!==r)for(u=0;u<d.length;u++)(q=r-d[u].length)&&(d[u]=d[u].concat(e(q)));return d}function e(d){for(var q=Array(d),r=0;r<d;r++)q[r]="";return q}function a(d){return d.calcdata.columns.reduce(function(q,r){return r.xIndex<d.xIndex?q+r.columnWidth:q},0)}function g(d,q){return Object.keys(d).map(function(r){return c({},d[r],{auxiliaryBlocks:q})})}function k(d,q){for(var r={},u,v=0,w=0,y=p(),D=0,x=0,E=0;E<d.length;E++)if(u=d[E],y.rows.push({rowIndex:E,
rowHeight:u}),w+=u,w>=q||E===d.length-1)r[v]=y,y.key=x++,y.firstRowIndex=D,y.lastRowIndex=E,y=p(),v+=w,D=E+1,w=0;return r}function p(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var n=b("./constants"),c=b("../../lib/extend").extendFlat,f=b("fast-isnumeric");F.exports=function(d,q){var r=l(q.cells.values),u=function(H){return H.slice(q.header.values.length,H.length)},v=l(q.header.values);v.length&&!v[0].length&&(v[0]=[""],v=l(v));var w=v.concat(u(r).map(function(){return e((v[0]||[""]).length)})),
y=q.domain,D=Math.floor(d._fullLayout._size.w*(y.x[1]-y.x[0])),x=Math.floor(d._fullLayout._size.h*(y.y[1]-y.y[0])),E=q.header.values.length?w[0].map(function(){return q.header.height}):[n.emptyHeaderHeight],B=r.length?r[0].map(function(){return q.cells.height}):[],t=E.reduce(h,0);B=k(B,x-t+n.uplift);E=k(E,t);E=g(E,[]);B=g(B,E);var G={},I=q._fullInput.columnorder.concat(u(r.map(function(H,J){return J}))),L=w.map(function(H,J){H=Array.isArray(q.columnwidth)?q.columnwidth[Math.min(J,q.columnwidth.length-
1)]:q.columnwidth;return f(H)?Number(H):1}),M=L.reduce(h,0);L=L.map(function(H){return H/M*D});u=Math.max(m(q.header.line.width),m(q.cells.line.width));var N={key:q.uid+d._context.staticPlot,translateX:y.x[0]*d._fullLayout._size.w,translateY:d._fullLayout._size.h*(1-y.y[1]),size:d._fullLayout._size,width:D,maxLineWidth:u,height:x,columnOrder:I,groupHeight:x,rowBlocks:B,headerRowBlocks:E,scrollY:0,cells:c({},q.cells,{values:r}),headerCells:c({},q.header,{values:w}),gdColumns:w.map(function(H){return H[0]}),
gdColumnsOriginalOrder:w.map(function(H){return H[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:w.map(function(H,J){G[H]=(G[H]||0)+1;return{key:H+"__"+G[H],label:H,specIndex:J,xIndex:I[J],xScale:a,x:void 0,calcdata:void 0,columnWidth:L[J]}})};N.columns.forEach(function(H){H.calcdata=N;H.x=a(H)});return N}},{"../../lib/extend":739,"./constants":1286,"fast-isnumeric":241}],1288:[function(b,F,C){function m(l){var e=(l=l.rowBlocks[l.page])?l.rows[0].rowIndex:0;return[e,l?
e+l.rows.length:0]}var h=b("../../lib/extend").extendFlat;C.splitToPanels=function(l){var e=[0,0],a=h({},l,{key:"header",type:"header",page:0,prevPages:e,currentRepaint:[null,null],dragHandle:!0,values:l.calcdata.headerCells.values[l.specIndex],rowBlocks:l.calcdata.headerRowBlocks,calcdata:h({},l.calcdata,{cells:l.calcdata.headerCells})}),g=h({},l,{key:"cells1",type:"cells",page:0,prevPages:e,currentRepaint:[null,null],dragHandle:!1,values:l.calcdata.cells.values[l.specIndex],rowBlocks:l.calcdata.rowBlocks});
l=h({},l,{key:"cells2",type:"cells",page:1,prevPages:e,currentRepaint:[null,null],dragHandle:!1,values:l.calcdata.cells.values[l.specIndex],rowBlocks:l.calcdata.rowBlocks});return[g,l,a]};C.splitToCells=function(l){var e=m(l);return(l.values||[]).slice(e[0],e[1]).map(function(a,g){var k="string"===typeof a&&a.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:g+k,key:e[0]+g,column:l,calcdata:l.calcdata,page:l.page,rowBlocks:l.rowBlocks,value:a}})}},{"../../lib/extend":739}],1289:[function(b,
F,C){function m(a,g){var k=a.header.values.length;a=(a.columnorder||[]).slice(0,k);var p=a.slice().sort(function(c,f){return c-f});a=a.map(function(c){return p.indexOf(c)});for(var n=a.length;n<k;n++)a.push(n);g("columnorder",a)}var h=b("../../lib"),l=b("./attributes"),e=b("../../plots/domain").defaults;F.exports=function(a,g,k,p){function n(c,f){return h.coerce(a,g,l,c,f)}e(g,p,n);n("columnwidth");n("header.values");n("header.format");n("header.align");n("header.prefix");n("header.suffix");n("header.height");
n("header.line.width");n("header.line.color");n("header.fill.color");h.coerceFont(n,"header.font",h.extendFlat({},p.font));m(g,n);n("cells.values");n("cells.format");n("cells.align");n("cells.prefix");n("cells.suffix");n("cells.height");n("cells.line.width");n("cells.line.color");n("cells.fill.color");h.coerceFont(n,"cells.font",h.extendFlat({},p.font));g._length=null}},{"../../lib":749,"../../plots/domain":824,"./attributes":1283}],1290:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"table",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1283,"./base_plot":1284,"./calc":1285,"./defaults":1289,"./plot":1291}],1291:[function(b,F,C){function m(ia){return Math.ceil(ia.calcdata.maxLineWidth/2)}function h(ia,fa){return"clip"+ia._fullLayout._uid+"_columnBoundaryClippath_"+fa.calcdata.key+"_"+fa.specIndex}function l(ia){return[].concat.apply([],ia.map(function(fa){return fa})).map(function(fa){return fa.__data__})}
function e(ia,fa,ha){var na=ia.selectAll("."+J.cn.scrollbarKit).data(Q.repeat,Q.keyFun);na.enter().append("g").classed(J.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision");na.each(function(ra){var ta=ra.scrollbarState;var oa=ra.rowBlocks;oa=N(oa,oa.length-1)+(oa.length?H(oa[oa.length-1],Infinity):1);ta.totalHeight=oa;ta.scrollableAreaHeight=ra.groupHeight-D(ra);ta.currentlyVisibleHeight=Math.min(ta.totalHeight,ta.scrollableAreaHeight);ta.ratio=ta.currentlyVisibleHeight/ta.totalHeight;
ta.barLength=Math.max(ta.ratio*ta.currentlyVisibleHeight,J.goldenRatio*J.scrollbarWidth);ta.barWiggleRoom=ta.currentlyVisibleHeight-ta.barLength;ta.wiggleRoom=Math.max(0,ta.totalHeight-ta.scrollableAreaHeight);ta.topY=0===ta.barWiggleRoom?0:ra.scrollY/ta.wiggleRoom*ta.barWiggleRoom;ta.bottomY=ta.topY+ta.barLength;ta.dragMultiplier=ta.wiggleRoom/ta.barWiggleRoom}).attr("transform",function(ra){return"translate("+(ra.width+J.scrollbarWidth/2+J.scrollbarOffset)+" "+D(ra)+")"});na=na.selectAll("."+J.cn.scrollbar).data(Q.repeat,
Q.keyFun);na.enter().append("g").classed(J.cn.scrollbar,!0);var pa=na.selectAll("."+J.cn.scrollbarSlider).data(Q.repeat,Q.keyFun);pa.enter().append("g").classed(J.cn.scrollbarSlider,!0);pa.attr("transform",function(ra){return"translate(0 "+(ra.scrollbarState.topY||0)+")"});pa=pa.selectAll("."+J.cn.scrollbarGlyph).data(Q.repeat,Q.keyFun);pa.enter().append("line").classed(J.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",J.scrollbarWidth).attr("stroke-linecap","round").attr("y1",J.scrollbarWidth/
2);pa.attr("y2",function(ra){return ra.scrollbarState.barLength-J.scrollbarWidth/2}).attr("stroke-opacity",function(ra){return ra.columnDragInProgress||!ra.scrollbarState.barWiggleRoom||ha?0:.4});pa.transition().delay(0).duration(0);pa.transition().delay(J.scrollbarHideDelay).duration(J.scrollbarHideDuration).attr("stroke-opacity",0);na=na.selectAll("."+J.cn.scrollbarCaptureZone).data(Q.repeat,Q.keyFun);na.enter().append("line").classed(J.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",
.01).attr("stroke-width",J.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ra){var ta=O.event.y,oa=this.getBoundingClientRect(),ua=ra.scrollbarState;ta-=oa.top;oa=O.scale.linear().domain([0,ua.scrollableAreaHeight]).range([0,ua.totalHeight]).clamp(!0);ua.topY<=ta&&ta<=ua.bottomY||B(fa,ia,null,oa(ta-ua.barLength/2))(ra)}).call(O.behavior.drag().origin(function(ra){O.event.stopPropagation();ra.scrollbarState.scrollbarScrollInProgress=!0;return ra}).on("drag",
B(fa,ia)).on("dragend",function(){}));na.attr("y2",function(ra){return ra.scrollbarState.scrollableAreaHeight});fa._context.staticPlot&&(pa.remove(),na.remove())}function a(ia,fa,ha,na){ha=ha.selectAll("."+J.cn.columnCells).data(Q.repeat,Q.keyFun);ha.enter().append("g").classed(J.cn.columnCells,!0);ha.exit().remove();ha=g(ha);c(ha);var pa=k(ha);d(pa);pa=n(ha);pa=p(pa);f(pa);q(pa,fa,na,ia);M(ha)}function g(ia){ia=ia.selectAll("."+J.cn.columnCell).data(ea.splitToCells,function(fa){return fa.keyWithinBlock});
ia.enter().append("g").classed(J.cn.columnCell,!0);ia.exit().remove();return ia}function k(ia){ia=ia.selectAll("."+J.cn.cellRect).data(Q.repeat,function(fa){return fa.keyWithinBlock});ia.enter().append("rect").classed(J.cn.cellRect,!0);return ia}function p(ia){ia=ia.selectAll("."+J.cn.cellText).data(Q.repeat,function(fa){return fa.keyWithinBlock});ia.enter().append("text").classed(J.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){O.event.stopPropagation()});return ia}
function n(ia){ia=ia.selectAll("."+J.cn.cellTextHolder).data(Q.repeat,function(fa){return fa.keyWithinBlock});ia.enter().append("g").classed(J.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision");return ia}function c(ia){ia.each(function(fa,ha){var na=fa.calcdata.cells.font,pa=fa.column.specIndex;na={size:u(na.size,pa,ha),color:u(na.color,pa,ha),family:u(na.family,pa,ha)};fa.rowNumber=fa.key;fa.align=u(fa.calcdata.cells.align,pa,ha);fa.cellBorderWidth=u(fa.calcdata.cells.line.width,
pa,ha);fa.font=na})}function f(ia){ia.each(function(fa){U.font(O.select(this),fa.font)})}function d(ia){ia.attr("width",function(fa){return fa.column.columnWidth}).attr("stroke-width",function(fa){return fa.cellBorderWidth}).each(function(fa){var ha=O.select(this);ca.stroke(ha,u(fa.calcdata.cells.line.color,fa.column.specIndex,fa.rowNumber));ca.fill(ha,u(fa.calcdata.cells.fill.color,fa.column.specIndex,fa.rowNumber))})}function q(ia,fa,ha,na){ia.text(function(pa){var ra=pa.column.specIndex,ta=pa.rowNumber,
oa=pa.value,ua="string"===typeof oa,ka=ua&&oa.match(/<br>/i),sa=!ua||ka;pa.mayHaveMarkup=ua&&oa.match(/[<&>]/);oa="string"===typeof oa&&oa.match(J.latexCheck);ua=(pa.latex=oa)?"":u(pa.calcdata.cells.prefix,ra,ta)||"";var ya=oa?"":u(pa.calcdata.cells.suffix,ra,ta)||"";ra=oa?null:u(pa.calcdata.cells.format,ra,ta)||null;ra=ua+(ra?O.format(ra)(pa.value):pa.value)+ya;var qa;pa.wrappingNeeded=!pa.wrapped&&!sa&&!oa&&(qa=-1!==ra.indexOf(J.wrapSplitCharacter));pa.cellHeightMayIncrease=ka||oa||pa.mayHaveMarkup||
(void 0===qa?-1!==ra.indexOf(J.wrapSplitCharacter):qa);pa.needsConvertToTspans=pa.mayHaveMarkup||pa.wrappingNeeded||pa.latex;pa.wrappingNeeded?(ka=(" "===J.wrapSplitCharacter?ra.replace(/<a href=/ig,"\x3ca_href\x3d"):ra).split(J.wrapSplitCharacter),ka=" "===J.wrapSplitCharacter?ka.map(function(xa){return xa.replace(/<a_href=/ig,"\x3ca href\x3d")}):ka,pa.fragments=ka.map(function(xa){return{text:xa,width:null}}),pa.fragments.push({fragment:J.wrapSpacer,width:null}),pa=ka.join(J.lineBreaker)+J.lineBreaker+
J.wrapSpacer):(delete pa.fragments,pa=ra);return pa}).attr("dy",function(pa){return pa.needsConvertToTspans?0:"0.75em"}).each(function(pa){var ra=O.select(this),ta=pa.wrappingNeeded?G:I;pa.needsConvertToTspans?P.convertToTspans(ra,na,ta(ha,this,fa,na,pa)):O.select(this.parentNode).attr("transform",function(oa){return"translate("+L(oa)+" "+J.cellPad+")"}).attr("text-anchor",function(oa){return{left:"start",center:"middle",right:"end"}[oa.align]})})}function r(ia,fa,ha){var na=fa.gdColumnsOriginalOrder;
fa.gdColumns.sort(function(pa,ra){return ha[na.indexOf(pa)]-ha[na.indexOf(ra)]});fa.columnorder=ha;ia.emit("plotly_restyle")}function u(ia,fa,ha){return Array.isArray(ia)?(ia=ia[Math.min(fa,ia.length-1)],Array.isArray(ia)?ia[Math.min(ha,ia.length-1)]:ia):ia}function v(ia,fa,ha){ia.transition().ease(J.releaseTransitionEase).duration(J.releaseTransitionDuration).attr("transform","translate("+fa.x+" "+ha+")")}function w(ia){return"cells"===ia.type}function y(ia){return"header"===ia.type}function D(ia){return(ia.rowBlocks.length?
ia.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(fa,ha){return fa+H(ha,Infinity)},0)}function x(ia,fa,ha){for(var na=[],pa=0,ra=0;ra<ia.length;ra++){for(var ta=ia[ra],oa=ta.rows,ua=0,ka=0;ka<oa.length;ka++)ua+=oa[ka].rowHeight;ta.allRowsHeight=ua;ta=fa;oa=ta+ha;ta<pa+ua&&oa>pa&&na.push(ra);pa+=ua}return na}function E(ia,fa,ha){var na=l(fa)[0];if(void 0!==na){var pa=na.rowBlocks,ra=na.calcdata,ta=N(pa,pa.length),oa=na.calcdata.groupHeight-D(na),ua=ra.scrollY=Math.max(0,Math.min(ta-oa,ra.scrollY)),
ka=x(pa,ua,oa);1===ka.length&&(ka[0]===pa.length-1?ka.unshift(ka[0]-1):ka.push(ka[0]+1));ka[0]%2&&ka.reverse();fa.each(function(sa,ya){sa.page=ka[ya];sa.scrollY=ua});fa.attr("transform",function(sa){return"translate(0 "+(N(sa.rowBlocks,sa.page)-sa.scrollY)+")"});ia&&(t(ia,ha,fa,ka,na.prevPages,na,0),t(ia,ha,fa,ka,na.prevPages,na,1),e(ha,ia))}}function B(ia,fa,ha,na){return function(pa){var ra=pa.calcdata?pa.calcdata:pa;pa=fa.filter(function(ua){return ra.key===ua.key});var ta=ha||ra.scrollbarState.dragMultiplier,
oa=ra.scrollY;ra.scrollY=void 0===na?ra.scrollY+ta*O.event.dy:na;ta=pa.selectAll("."+J.cn.yColumn).selectAll("."+J.cn.columnBlock).filter(w);E(ia,ta,pa);return ra.scrollY===oa}}function t(ia,fa,ha,na,pa,ra,ta){na[ta]!==pa[ta]&&(clearTimeout(ra.currentRepaint[ta]),ra.currentRepaint[ta]=setTimeout(function(){var oa=ha.filter(function(ua,ka){return ka===ta&&na[ka]!==pa[ka]});a(ia,fa,oa,ha);pa[ta]=na[ta]}))}function G(ia,fa,ha,na){return function(){var pa=O.select(fa.parentNode);pa.each(function(ra){var ta=
ra.fragments;pa.selectAll("tspan.line").each(function(Ca,Ja){ta[Ja].width=this.getComputedTextLength()});var oa=ta[ta.length-1].width,ua=ta.slice(0,-1),ka=[],sa=0,ya=ra.column.columnWidth-2*J.cellPad;for(ra.value="";ua.length;){var qa=ua.shift();var xa=qa.width+oa;sa+xa>ya&&(ra.value+=ka.join(J.wrapSpacer)+J.lineBreaker,ka=[],sa=0);ka.push(qa.text);sa+=xa}sa&&(ra.value+=ka.join(J.wrapSpacer));ra.wrapped=!0});pa.selectAll("tspan.line").remove();q(pa.select("."+J.cn.cellText),ha,ia,na);O.select(fa.parentNode.parentNode).call(M)}}
function I(ia,fa,ha,na,pa){return function(){if(!pa.settledY){var ra=O.select(fa.parentNode),ta=pa.rowBlocks[pa.page],oa=pa.key-ta.firstRowIndex,ua=ta.rows[oa].rowHeight,ka=pa.cellHeightMayIncrease?fa.parentNode.getBoundingClientRect().height+2*J.cellPad:ua;ua=Math.max(ka,ua);ua-ta.rows[oa].rowHeight&&(ta.rows[oa].rowHeight=ua,ia.selectAll("."+J.cn.columnCell).call(M),E(null,ia.filter(w),0),e(ha,na,!0));ra.attr("transform",function(){var sa=this.parentNode.getBoundingClientRect(),ya=O.select(this.parentNode).select("."+
J.cn.cellRect).node().getBoundingClientRect(),qa=this.transform.baseVal.consolidate();sa=ya.top-sa.top+(qa?qa.matrix.f:J.cellPad);return"translate("+L(pa,O.select(this.parentNode).select("."+J.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+sa+")"});pa.settledY=!0}}}function L(ia,fa){switch(ia.align){case "left":return J.cellPad;case "right":return ia.column.columnWidth-(fa||0)-J.cellPad;case "center":return(ia.column.columnWidth-(fa||0))/2;default:return J.cellPad}}function M(ia){ia.attr("transform",
function(fa){var ha=fa.rowBlocks[0].auxiliaryBlocks.reduce(function(na,pa){return na+H(pa,Infinity)},0);return"translate(0 "+(H(fa.rowBlocks[fa.page],fa.key)+ha)+")"}).selectAll("."+J.cn.cellRect).attr("height",function(fa){var ha=fa.rowBlocks[fa.page];return ha.rows[fa.key-ha.firstRowIndex].rowHeight})}function N(ia,fa){var ha=0;for(--fa;0<=fa;fa--){var na=ia[fa];var pa=na.allRowsHeight;if(void 0!==pa)na=pa;else{for(var ra=pa=0;ra<na.rows.length;ra++)pa+=na.rows[ra].rowHeight;na=na.allRowsHeight=
pa}ha+=na}return ha}function H(ia,fa){for(var ha=0,na=0;na<ia.rows.length&&ia.rows[na].rowIndex<fa;na++)ha+=ia.rows[na].rowHeight;return ha}var J=b("./constants"),O=b("d3"),Q=b("../../lib/gup"),U=b("../../components/drawing"),P=b("../../lib/svg_text_utils"),V=b("../../lib").raiseToTop,Y=b("../../lib").cancelTransition,ba=b("./data_preparation_helper"),ea=b("./data_split_helpers"),ca=b("../../components/color");F.exports=function(ia,fa){var ha=!ia._context.staticPlot;fa=ia._fullLayout._paper.selectAll("."+
J.cn.table).data(fa.map(function(oa){oa=Q.unwrap(oa).trace;return ba(ia,oa)}),Q.keyFun);fa.exit().remove();fa.enter().append("g").classed(J.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all");fa.attr("width",function(oa){return oa.width+oa.size.l+oa.size.r}).attr("height",function(oa){return oa.height+oa.size.t+oa.size.b}).attr("transform",
function(oa){return"translate("+oa.translateX+","+oa.translateY+")"});var na=fa.selectAll("."+J.cn.tableControlView).data(Q.repeat,Q.keyFun);fa=na.enter().append("g").classed(J.cn.tableControlView,!0).style("box-sizing","content-box");if(ha){var pa="onwheel"in document?"wheel":"mousewheel";fa.on("mousemove",function(oa){na.filter(function(ua){return oa===ua}).call(e,ia)}).on(pa,function(oa){oa.scrollbarState.wheeling||(oa.scrollbarState.wheeling=!0,B(ia,na,null,oa.scrollY+O.event.deltaY)(oa)||(O.event.stopPropagation(),
O.event.preventDefault()),oa.scrollbarState.wheeling=!1)}).call(e,ia,!0)}na.attr("transform",function(oa){return"translate("+oa.size.l+" "+oa.size.t+")"});fa=na.selectAll("."+J.cn.scrollBackground).data(Q.repeat,Q.keyFun);fa.enter().append("rect").classed(J.cn.scrollBackground,!0).attr("fill","none");fa.attr("width",function(oa){return oa.width}).attr("height",function(oa){return oa.height});na.each(function(oa){U.setClipUrl(O.select(this),"clip"+ia._fullLayout._uid+"_scrollAreaBottomClip_"+oa.key,
ia)});var ra=na.selectAll("."+J.cn.yColumn).data(function(oa){return oa.columns},Q.keyFun);ra.enter().append("g").classed(J.cn.yColumn,!0);ra.exit().remove();ra.attr("transform",function(oa){return"translate("+oa.x+" 0)"});ha&&ra.call(O.behavior.drag().origin(function(oa){var ua=O.select(this);v(ua,oa,-J.uplift);V(this);oa.calcdata.columnDragInProgress=!0;e(na.filter(function(ka){return oa.calcdata.key===ka.key}),ia);return oa}).on("drag",function(oa){var ua=O.select(this);oa.x=Math.max(-J.overdrag,
Math.min(oa.calcdata.width+J.overdrag-oa.columnWidth,O.event.x));l(ra).filter(function(ka){return ka.calcdata.key===oa.calcdata.key}).sort(function(ka,sa){return(oa===ka?O.event.x:ka.x)+ka.columnWidth/2-((oa===sa?O.event.x:sa.x)+sa.columnWidth/2)}).forEach(function(ka,sa){ka.xIndex=sa;ka.x=oa===ka?ka.x:ka.xScale(ka)});ra.filter(function(ka){return oa!==ka}).transition().ease(J.transitionEase).duration(J.transitionDuration).attr("transform",function(ka){return"translate("+ka.x+" 0)"});ua.call(Y).attr("transform",
"translate("+oa.x+" -"+J.uplift+" )")}).on("dragend",function(oa){var ua=O.select(this),ka=oa.calcdata;oa.x=oa.xScale(oa);oa.calcdata.columnDragInProgress=!1;v(ua,oa,0);r(ia,ka,ka.columns.map(function(sa){return sa.xIndex}))}));ra.each(function(oa){U.setClipUrl(O.select(this),h(ia,oa),ia)});pa=ra.selectAll("."+J.cn.columnBlock).data(ea.splitToPanels,Q.keyFun);pa.enter().append("g").classed(J.cn.columnBlock,!0).attr("id",function(oa){return oa.key});pa.style("cursor",function(oa){return oa.dragHandle?
"ew-resize":oa.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ta=pa.filter(y);fa=pa.filter(w);ha&&fa.call(O.behavior.drag().origin(function(oa){O.event.stopPropagation();return oa}).on("drag",B(ia,na,-1)).on("dragend",function(){}));a(ia,na,ta,pa);a(ia,na,fa,pa);ha=na.selectAll("."+J.cn.scrollAreaClip).data(Q.repeat,Q.keyFun);ha.enter().append("clipPath").classed(J.cn.scrollAreaClip,!0).attr("id",function(oa){return"clip"+ia._fullLayout._uid+"_scrollAreaBottomClip_"+oa.key});ha=
ha.selectAll("."+J.cn.scrollAreaClipRect).data(Q.repeat,Q.keyFun);ha.enter().append("rect").classed(J.cn.scrollAreaClipRect,!0).attr("x",-J.overdrag).attr("y",-J.uplift).attr("fill","none");ha.attr("width",function(oa){return oa.width+2*J.overdrag}).attr("height",function(oa){return oa.height+J.uplift});ra.selectAll("."+J.cn.columnBoundary).data(Q.repeat,Q.keyFun).enter().append("g").classed(J.cn.columnBoundary,!0);ha=ra.selectAll("."+J.cn.columnBoundaryClippath).data(Q.repeat,Q.keyFun);ha.enter().append("clipPath").classed(J.cn.columnBoundaryClippath,
!0);ha.attr("id",function(oa){return h(ia,oa)});ha=ha.selectAll("."+J.cn.columnBoundaryRect).data(Q.repeat,Q.keyFun);ha.enter().append("rect").classed(J.cn.columnBoundaryRect,!0).attr("fill","none");ha.attr("width",function(oa){return oa.columnWidth+2*m(oa)}).attr("height",function(oa){return oa.calcdata.height+2*m(oa)+J.uplift}).attr("x",function(oa){return-m(oa)}).attr("y",function(oa){return-m(oa)});E(null,fa,na)}},{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,
"../../lib/svg_text_utils":773,"./constants":1286,"./data_preparation_helper":1287,"./data_split_helpers":1288,d3:169}],1292:[function(b,F,C){C=b("../../plots/template_attributes").hovertemplateAttrs;var m=b("../../plots/template_attributes").texttemplateAttrs,h=b("../../components/colorscale/attributes"),l=b("../../plots/domain").attributes,e=b("../pie/attributes"),a=b("../sunburst/attributes"),g=b("./constants");b=b("../../lib/extend").extendFlat;F.exports={labels:a.labels,parents:a.parents,values:a.values,
branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:"squarify binary dice slice slice-dice dice-slice".split(" "),dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:b({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},
r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},h("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:["\x3e","\x3c","|","/","\\"],dflt:"\x3e",editType:"plot"},
thickness:{valType:"number",min:12,editType:"plot"},textfont:b({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:a.textinfo,texttemplate:m({editType:"plot"},{keys:g.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:C({},{keys:g.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:b({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),
dflt:"top left",editType:"plot"},domain:l({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129,"../sunburst/attributes":1266,"./constants":1295}],1293:[function(b,F,C){var m=b("../../plots/plots");C.name="treemap";C.plot=function(h,l,e,a){m.plotBasePlot(C.name,h,l,e,a)};C.clean=function(h,l,e,a){m.cleanBasePlot(C.name,h,l,e,a)}},{"../../plots/plots":860}],
1294:[function(b,F,C){var m=b("../sunburst/calc");C.calc=function(h,l){return m.calc(h,l)};C.crossTraceCalc=function(h){return m._runCrossTraceCalc("treemap",h)}},{"../sunburst/calc":1268}],1295:[function(b,F,C){F.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" "),gapWithPathbar:1}},{}],1296:[function(b,F,C){var m=b("../../lib"),h=b("./attributes"),l=b("../../components/color"),e=b("../../plots/domain").defaults,
a=b("../bar/defaults").handleText,g=b("../bar/constants").TEXTPAD;b=b("../../components/colorscale");var k=b.hasColorscale,p=b.handleDefaults;F.exports=function(n,c,f,d){function q(w,y){return m.coerce(n,c,h,w,y)}f=q("labels");var r=q("parents");if(f&&f.length&&r&&r.length){(f=q("values"))&&f.length?q("branchvalues"):q("count");q("level");q("maxdepth");"squarify"===q("tiling.packing")&&q("tiling.squarifyratio");q("tiling.flip");q("tiling.pad");f=q("text");q("texttemplate");c.texttemplate||q("textinfo",
Array.isArray(f)?"text+label":"label");q("hovertext");q("hovertemplate");f=q("pathbar.visible");a(n,c,d,q,"auto",{hasPathbar:f,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});q("textposition");r=-1!==c.textposition.indexOf("bottom");q("marker.line.width")&&q("marker.line.color",d.paper_bgcolor);var u=q("marker.colors"),v=c._hasColorscale=k(n,"marker","colors")||(n.marker||{}).coloraxis;v?p(n,c,d,q,{prefix:"marker.",
cLetter:"c"}):q("marker.depthfade",!(u||[]).length);u=2*c.textfont.size;q("marker.pad.t",r?u/4:u);q("marker.pad.l",u/4);q("marker.pad.r",u/4);q("marker.pad.b",r?u:u/4);v&&p(n,c,d,q,{prefix:"marker.",cLetter:"c"});c._hovered={marker:{line:{width:2,color:l.contrast(d.paper_bgcolor)}}};f&&(q("pathbar.thickness",c.pathbar.textfont.size+2*g),q("pathbar.side"),q("pathbar.edgeshape"));e(c,d,q);c._length=null}else c.visible=!1}},{"../../components/color":615,"../../components/colorscale":627,"../../lib":749,
"../../plots/domain":824,"../bar/constants":892,"../bar/defaults":894,"./attributes":1292}],1297:[function(b,F,C){var m=b("d3"),h=b("../../lib"),l=b("../../components/drawing"),e=b("../../lib/svg_text_utils"),a=b("./partition"),g=b("./style").styleOne,k=b("./constants"),p=b("../sunburst/helpers"),n=b("../sunburst/fx");F.exports=function(c,f,d,q,r){var u=r.barDifY,v=r.width,w=r.height,y=r.viewX,D=r.viewY,x=r.pathSlice,E=r.toMoveInsideSlice,B=r.strTransform,t=r.hasTransition,G=r.handleSlicesExit,I=
r.makeUpdateSliceInterpolator,L=r.makeUpdateTextInterpolator,M={},N=c._fullLayout;r=f[0];var H=r.trace;r=r.hierarchy;var J=v/H._entryDepth,O=p.listPath(d.data,"id");r=a(r.copy(),[v,w],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();r=r.filter(function(Q){var U=O.indexOf(Q.data.id);if(-1===U)return!1;Q.x0=J*U;Q.x1=J*(U+1);Q.y0=u;Q.y1=u+w;return Q.onPathbar=!0});r.reverse();q=q.data(r,p.getPtId);q.enter().append("g").classed("pathbar",!0);G(q,!0,M,[v,w],x);q.order();t&&(q=
q.transition().each("end",function(){var Q=m.select(this);p.setSliceCursor(Q,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}));q.each(function(Q){Q._hoverX=y(Q.x1-Math.min(v,w)/2);Q._hoverY=D(Q.y1-w/2);var U=m.select(this),P=h.ensureSingle(U,"path","surface",function(V){V.style("pointer-events","all")});t?P.transition().attrTween("d",function(V){var Y=I(V,!0,M,[v,w]);return function(ba){return x(Y(ba))}}):P.attr("d",x);U.call(n,d,c,f,{styleOne:g,eventDataKeys:k.eventDataKeys,transitionTime:k.CLICK_TRANSITION_TIME,
transitionEasing:k.CLICK_TRANSITION_EASING}).call(p.setSliceCursor,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:c._transitioning});P.call(g,Q,H,{hovered:!1});Q._text=(p.getPtLabel(Q)||"").split("\x3cbr\x3e").join(" ")||"";U=h.ensureSingle(U,"g","slicetext");U=h.ensureSingle(U,"text","",function(V){V.attr("data-notex",1)});P=h.ensureUniformFontSize(c,p.determineTextFont(H,Q,N.font,{onPathbar:!0}));U.text(Q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(l.font,P).call(e.convertToTspans,
c);Q.textBB=l.bBox(U.node());Q.transform=E(Q,{fontSize:P.size,onPathbar:!0});Q.transform.fontSize=P.size;t?U.transition().attrTween("transform",function(V){var Y=L(V,!0,M,[v,w]);return function(ba){return B(Y(ba))}}):U.attr("transform",B(Q))})}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../sunburst/fx":1271,"../sunburst/helpers":1272,"./constants":1295,"./partition":1302,"./style":1304,d3:169}],1298:[function(b,F,C){var m=b("d3"),h=b("../../lib"),l=b("../../components/drawing"),
e=b("../../lib/svg_text_utils"),a=b("./partition"),g=b("./style").styleOne,k=b("./constants"),p=b("../sunburst/helpers"),n=b("../sunburst/fx"),c=b("../sunburst/plot").formatSliceLabel;F.exports=function(f,d,q,r,u){var v=u.width,w=u.height,y=u.viewX,D=u.viewY,x=u.pathSlice,E=u.toMoveInsideSlice,B=u.strTransform,t=u.hasTransition,G=u.handleSlicesExit,I=u.makeUpdateSliceInterpolator,L=u.makeUpdateTextInterpolator;u=u.prevEntry;var M=f._fullLayout,N=d[0].trace,H=-1!==N.textposition.indexOf("left"),J=
-1!==N.textposition.indexOf("right"),O=-1!==N.textposition.indexOf("bottom"),Q=!O&&!N.marker.pad.t||O&&!N.marker.pad.b,U=a(q,[v,w],{packing:N.tiling.packing,squarifyratio:N.tiling.squarifyratio,flipX:-1<N.tiling.flip.indexOf("x"),flipY:-1<N.tiling.flip.indexOf("y"),pad:{inner:N.tiling.pad,top:N.marker.pad.t,left:N.marker.pad.l,right:N.marker.pad.r,bottom:N.marker.pad.b}}).descendants(),P=Infinity,V=-Infinity;U.forEach(function(ea){var ca=ea.depth;ca>=N._maxDepth?(ea.x0=ea.x1=(ea.x0+ea.x1)/2,ea.y0=
ea.y1=(ea.y0+ea.y1)/2):(P=Math.min(P,ca),V=Math.max(V,ca))});r=r.data(U,p.getPtId);N._maxVisibleLayers=isFinite(V)?V-P+1:0;r.enter().append("g").classed("slice",!0);G(r,!1,{},[v,w],x);r.order();var Y=null;if(t&&u){var ba=p.getPtId(u);r.each(function(ea){null===Y&&p.getPtId(ea)===ba&&(Y={x0:ea.x0,x1:ea.x1,y0:ea.y0,y1:ea.y1})})}t&&(r=r.transition().each("end",function(){var ea=m.select(this);p.setSliceCursor(ea,f,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));r.each(function(ea){var ca=p.isHeader(ea,
N);ea._hoverX=y(ea.x1-N.marker.pad.r);ea._hoverY=O?D(ea.y1-N.marker.pad.b/2):D(ea.y0+N.marker.pad.t/2);var ia=m.select(this),fa=h.ensureSingle(ia,"path","surface",function(ha){ha.style("pointer-events","all")});t?fa.transition().attrTween("d",function(ha){var na=I(ha,!1,Y||{x0:0,x1:v,y0:0,y1:w},[v,w]);return function(pa){return x(na(pa))}}):fa.attr("d",x);ia.call(n,q,f,d,{styleOne:g,eventDataKeys:k.eventDataKeys,transitionTime:k.CLICK_TRANSITION_TIME,transitionEasing:k.CLICK_TRANSITION_EASING}).call(p.setSliceCursor,
f,{isTransitioning:f._transitioning});fa.call(g,ea,N,{hovered:!1});ea._text=ea.x0===ea.x1||ea.y0===ea.y1?"":ca?Q?"":p.getPtLabel(ea)||"":c(ea,q,N,d,M)||"";ia=h.ensureSingle(ia,"g","slicetext");ia=h.ensureSingle(ia,"text","",function(ha){ha.attr("data-notex",1)});fa=h.ensureUniformFontSize(f,p.determineTextFont(N,ea,M.font));ia.text(ea._text||" ").classed("slicetext",!0).attr("text-anchor",J?"end":H||ca?"start":"middle").call(l.font,fa).call(e.convertToTspans,f);ea.textBB=l.bBox(ia.node());ea.transform=
E(ea,{fontSize:fa.size,isHeader:ca});ea.transform.fontSize=fa.size;t?ia.transition().attrTween("transform",function(ha){var na=L(ha,!1,Y||{x0:0,x1:v,y0:0,y1:w},[v,w]);return function(pa){return B(na(pa))}}):ia.attr("transform",B(ea))});return Y}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../sunburst/fx":1271,"../sunburst/helpers":1272,"../sunburst/plot":1276,"./constants":1295,"./partition":1302,"./style":1304,d3:169}],1299:[function(b,F,C){F.exports={moduleType:"trace",
name:"treemap",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1173,"./attributes":1292,"./base_plot":1293,"./calc":1294,"./defaults":1296,"./layout_attributes":1300,
"./layout_defaults":1301,"./plot":1303,"./style":1304}],1300:[function(b,F,C){F.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1301:[function(b,F,C){var m=b("../../lib"),h=b("./layout_attributes");F.exports=function(l,e){m.coerce(l,e,h,"treemapcolorway",e.colorway);m.coerce(l,e,h,"extendtreemapcolors",void 0)}},{"../../lib":749,"./layout_attributes":1300}],1302:[function(b,F,C){function m(e,a){switch(e){case "squarify":return l.treemapSquarify.ratio(a);
case "binary":return l.treemapBinary;case "dice":return l.treemapDice;case "slice":return l.treemapSlice;default:return l.treemapSliceDice}}function h(e,a,g){if(g.swapXY){var k=e.x0;e.x0=e.y0;e.y0=k;k=e.x1;e.x1=e.y1;e.y1=k}g.flipX&&(k=e.x0,e.x0=a[0]-e.x1,e.x1=a[0]-k);g.flipY&&(k=e.y0,e.y0=a[1]-e.y1,e.y1=a[1]-k);if(e=e.children)for(k=0;k<e.length;k++)h(e[k],a,g)}var l=b("d3-hierarchy");F.exports=function(e,a,g){var k=g.flipX,p=g.flipY,n="dice-slice"===g.packing,c=g.pad[p?"bottom":"top"],f=g.pad[k?
"right":"left"],d=g.pad[k?"left":"right"],q=g.pad[p?"top":"bottom"];if(n){var r=f;f=c;c=r;r=d;d=q;q=r}e=l.treemap().tile(m(g.packing,g.squarifyratio)).paddingInner(g.pad.inner).paddingLeft(f).paddingRight(d).paddingTop(c).paddingBottom(q).size(n?[a[1],a[0]]:a)(e);(n||k||p)&&h(e,a,{swapXY:n,flipX:k,flipY:p});return e}},{"d3-hierarchy":161}],1303:[function(b,F,C){function m(r){return e.isHierarchyRoot(r)?"":e.getPtId(r)}function h(r,u,v,w){var y=r._fullLayout,D=u[0],x=D.trace,E=D.hierarchy,B=e.findEntryWithLevel(E,
x.level),t=l.select(v);v=t.selectAll("g.pathbar");t=t.selectAll("g.slice");if(B){var G=e.isHierarchyRoot(B),I=!y.uniformtext.mode&&e.hasTransition(w),L=e.getMaxDepth(x),M=y._size,N=x.domain,H=M.w*(N.x[1]-N.x[0]);w=M.h*(N.y[1]-N.y[0]);var J=x.pathbar.thickness,O=x.marker.line.width+f.gapWithPathbar;O=x.pathbar.visible?-1<x.pathbar.side.indexOf("bottom")?w+O:-(J+O):0;var Q={x0:H,x1:H,y0:O,y1:O+J},U=function(qa,xa,Ca){var Ja=x.tiling.pad;return{x0:qa.x0-Ja-Ja<=xa.x0?0:qa.x0-Ja+Ja>=xa.x1?Ca[0]:qa.x0,
x1:qa.x1+Ja-Ja<=xa.x0?0:qa.x1+Ja+Ja>=xa.x1?Ca[0]:qa.x1,y0:qa.y0-Ja-Ja<=xa.y0?0:qa.y0-Ja+Ja>=xa.y1?Ca[1]:qa.y0,y1:qa.y1+Ja-Ja<=xa.y0?0:qa.y1+Ja+Ja>=xa.y1?Ca[1]:qa.y1}},P=null,V={},Y={},ba=null,ea=function(qa,xa){return xa?V[m(qa)]:Y[m(qa)]};D.hasMultipleRoots&&G&&L++;x._maxDepth=L;x._backgroundColor=y.paper_bgcolor;x._entryDepth=B.data.depth;x._atRootLevel=G;var ca=-H/2+M.l+M.w*(N.x[1]+N.x[0])/2,ia=-w/2+M.t+M.h*(1-(N.y[1]+N.y[0])/2),fa=ia+0,ha=ca+0;D=function(qa){return ha+qa};G=function(qa){return fa+
qa};var na=ha+0,pa=function(qa){qa.x=Math.max(na,qa.x)},ra=x.pathbar.edgeshape;M=function(qa){var xa=ha+Math.max(Math.min(qa.x0,qa.x0),0),Ca=ha+Math.min(Math.max(qa.x1,qa.x1),H),Ja=fa+qa.y0,eb=fa+qa.y1;qa=J/2;var Ra={},Wa={};Ra.x=xa;Wa.x=Ca;Ra.y=Wa.y=(Ja+eb)/2;var Ea={x:xa,y:Ja};Ja={x:Ca,y:Ja};Ca={x:Ca,y:eb};xa={x:xa,y:eb};"\x3e"===ra?(Ea.x-=qa,Ja.x-=qa,Ca.x-=qa,xa.x-=qa):"/"===ra?(Ca.x-=qa,xa.x-=qa,Ra.x-=qa/2,Wa.x-=qa/2):"\\"===ra?(Ea.x-=qa,Ja.x-=qa,Ra.x-=qa/2,Wa.x-=qa/2):"\x3c"===ra&&(Ra.x-=qa,
Wa.x-=qa);pa(Ea);pa(xa);pa(Ra);pa(Ja);pa(Ca);pa(Wa);return"M"+(Ea.x+","+Ea.y)+"L"+(Ja.x+","+Ja.y)+"L"+(Wa.x+","+Wa.y)+"L"+(Ca.x+","+Ca.y)+"L"+(xa.x+","+xa.y)+"L"+(Ra.x+","+Ra.y)+"Z"};var ta=function(qa,xa){var Ca=qa.x0,Ja=qa.x1,eb=qa.y0,Ra=qa.y1;qa=qa.textBB;var Wa=-1!==x.textposition.indexOf("bottom"),Ea=-1!==x.textposition.indexOf("top")||xa.isHeader&&!Wa?"start":Wa?"end":"middle",Ia=-1!==x.textposition.indexOf("right"),Qa=-1!==x.textposition.indexOf("left")||xa.onPathbar,lb=x.marker.pad;xa.isHeader&&
(Ca+=lb.l-g,Ja-=lb.r-g,Ca>=Ja&&(Ca=Ja=(Ca+Ja)/2),Wa?(Wa=Ra-lb.b,eb<Wa&&Wa<Ra&&(eb=Wa)):(Wa=eb+lb.t,eb<Wa&&Wa<Ra&&(Ra=Wa)));qa=k(Ca,Ja,eb,Ra,qa,{isHorizontal:!1,constrained:!0,angle:0,anchor:Ea,leftToRight:Qa?-1:Ia?1:0});qa.fontSize=xa.fontSize;qa.targetX=ca+qa.targetX;qa.targetY=ia+qa.targetY;if(isNaN(qa.targetX)||isNaN(qa.targetY))return{};Ca!==Ja&&eb!==Ra&&p(x.type,qa,y);return{scale:qa.scale,rotate:qa.rotate,textX:qa.textX,textY:qa.textY,anchorX:qa.anchorX,anchorY:qa.anchorY,targetX:qa.targetX,
targetY:qa.targetY}},oa=function(qa,xa){for(var Ca,Ja=0;!Ca&&Ja<L;)Ja++,(qa=qa.parent)?Ca=ea(qa,xa):Ja=L;return Ca||{}},ua=function(qa,xa,Ca,Ja){Ca=ea(qa,xa);qa=xa?Q:(xa=ea(B,xa))?U(qa,xa,Ja):{};return l.interpolate(Ca,qa)};N=function(qa,xa,Ca,Ja){var eb=ea(qa,xa);eb?Ja=eb:xa?Ja=Q:P?qa.parent?(Ca=ba||Ca)&&!xa?Ja=U(qa,Ca,Ja):(Ja={},a.extendFlat(Ja,oa(qa,xa))):Ja=qa:Ja={};return l.interpolate(Ja,{x0:qa.x0,x1:qa.x1,y0:qa.y0,y1:qa.y1})};var ka=function(qa,xa,Ca,Ja){var eb=ea(qa,xa),Ra={};xa?Ja=V[m(E)]||
Q:(Ca=Y[x.level]||Ca,Ja=qa.data.depth-B.data.depth<L?U(qa,Ca,Ja):{});a.extendFlat(Ra,{transform:ta({x0:Ja.x0,x1:Ja.x1,y0:Ja.y0,y1:Ja.y1,textBB:qa.textBB,_text:qa._text},{isHeader:e.isHeader(qa,x)})});eb?Ra=eb:qa.parent&&a.extendFlat(Ra,oa(qa,xa));xa=qa.transform;qa.x0!==qa.x1&&qa.y0!==qa.y1&&p(x.type,xa,y);return l.interpolate(Ra,{transform:{scale:xa.scale,rotate:xa.rotate,textX:xa.textX,textY:xa.textY,anchorX:xa.anchorX,anchorY:xa.anchorY,targetX:xa.targetX,targetY:xa.targetY}})},sa=function(qa,
xa,Ca,Ja,eb){var Ra=Ja[0],Wa=Ja[1];I?qa.exit().transition().each(function(){var Ea=l.select(this);Ea.select("path.surface").transition().attrTween("d",function(Ia){var Qa=ua(Ia,xa,Ca,[Ra,Wa]);return function(lb){return eb(Qa(lb))}});Ea.select("g.slicetext").attr("opacity",0)}).remove():qa.exit().remove()},ya=function(qa){var xa=qa.transform;qa.x0!==qa.x1&&qa.y0!==qa.y1&&p(x.type,xa,y);return a.getTextTransform({textX:xa.textX,textY:xa.textY,anchorX:xa.anchorX,anchorY:xa.anchorY,targetX:xa.targetX,
targetY:xa.targetY,scale:xa.scale,rotate:xa.rotate})};I&&(v.each(function(qa){V[m(qa)]={x0:qa.x0,x1:qa.x1,y0:qa.y0,y1:qa.y1};qa.transform&&(V[m(qa)].transform={textX:qa.transform.textX,textY:qa.transform.textY,anchorX:qa.transform.anchorX,anchorY:qa.transform.anchorY,targetX:qa.transform.targetX,targetY:qa.transform.targetY,scale:qa.transform.scale,rotate:qa.transform.rotate})}),t.each(function(qa){Y[m(qa)]={x0:qa.x0,x1:qa.x1,y0:qa.y0,y1:qa.y1};qa.transform&&(Y[m(qa)].transform={textX:qa.transform.textX,
textY:qa.transform.textY,anchorX:qa.transform.anchorX,anchorY:qa.transform.anchorY,targetX:qa.transform.targetX,targetY:qa.transform.targetY,scale:qa.transform.scale,rotate:qa.transform.rotate});!P&&e.isEntry(qa)&&(P=qa)}));ba=d(r,u,B,t,{width:H,height:w,viewX:function(qa){return ca+qa},viewY:function(qa){return ia+qa},pathSlice:function(qa){var xa=ca+qa.x0,Ca=ca+qa.x1,Ja=ia+qa.y0;qa=ia+qa.y1;return Ca-xa&&qa-Ja?"M"+(xa+","+(Ja+0))+"L"+(Ca-0+","+Ja)+"L"+(Ca+","+(qa-0))+"L"+(xa+0+","+qa)+"Z":""},toMoveInsideSlice:ta,
prevEntry:P,makeUpdateSliceInterpolator:N,makeUpdateTextInterpolator:ka,handleSlicesExit:sa,hasTransition:I,strTransform:ya});x.pathbar.visible?q(r,u,B,v,{barDifY:O,width:H,height:J,viewX:D,viewY:G,pathSlice:M,toMoveInsideSlice:ta,makeUpdateSliceInterpolator:N,makeUpdateTextInterpolator:ka,handleSlicesExit:sa,hasTransition:I,strTransform:ya}):v.remove()}else v.remove(),t.remove()}var l=b("d3"),e=b("../sunburst/helpers"),a=b("../../lib"),g=b("../bar/constants").TEXTPAD,k=b("../bar/plot").toMoveInsideBar;
C=b("../bar/uniform_text");var p=C.recordMinTextSize,n=C.clearMinTextSize,c=b("../bar/style").resizeText,f=b("./constants"),d=b("./draw_descendants"),q=b("./draw_ancestors");F.exports=function(r,u,v,w){var y=r._fullLayout,D=y._treemaplayer,x,E=!v;n("treemap",y);u=D.selectAll("g.trace.treemap").data(u,function(B){return B[0].trace.uid});u.enter().append("g").classed("trace",!0).classed("treemap",!0);u.order();!y.uniformtext.mode&&e.hasTransition(v)?(w&&(x=w()),l.transition().duration(v.duration).ease(v.easing).each("end",
function(){x&&x()}).each("interrupt",function(){x&&x()}).each(function(){D.selectAll("g.trace").each(function(B){h(r,B,this,v)})})):(u.each(function(B){h(r,B,this,v)}),y.uniformtext.mode&&c(r,y._treemaplayer.selectAll(".trace"),"treemap"));E&&u.exit().remove()}},{"../../lib":749,"../bar/constants":892,"../bar/plot":901,"../bar/style":904,"../bar/uniform_text":906,"../sunburst/helpers":1272,"./constants":1295,"./draw_ancestors":1297,"./draw_descendants":1298,d3:169}],1304:[function(b,F,C){function m(k,
p,n,c){var f=(c||{}).hovered;c=p.data.data;var d=c.i;c=c.color;var q=a.isHierarchyRoot(p),r=1;if(f)f=n._hovered.marker.line.color,d=n._hovered.marker.line.width;else if(q&&"rgba(0,0,0,0)"===c)r=0,f="rgba(0,0,0,0)",d=0;else if(f=e.castOption(n,d,"marker.line.color")||l.defaultLine,d=e.castOption(n,d,"marker.line.width")||0,!n._hasColorscale&&!p.onPathbar){var u=n.marker.depthfade;if(u&&(q=l.combine(l.addOpacity(n._backgroundColor,.75),c),!0===u?(u=a.getMaxDepth(n),p=isFinite(u)?a.isLeaf(p)?0:n._maxVisibleLayers-
(p.data.depth-n._entryDepth):p.data.height+1):(p=p.data.depth-n._entryDepth,n._atRootLevel||p++),0<p))for(n=0;n<p;n++)c=l.combine(l.addOpacity(q,.5*n/p),c)}k.style("stroke-width",d).call(l.fill,c).call(l.stroke,f).style("opacity",r)}var h=b("d3"),l=b("../../components/color"),e=b("../../lib"),a=b("../sunburst/helpers"),g=b("../bar/uniform_text").resizeText;F.exports={style:function(k){var p=k._fullLayout._treemaplayer.selectAll(".trace");g(k,p,"treemap");p.each(function(n){var c=h.select(this),f=
n[0].trace;c.style("opacity",f.opacity);c.selectAll("path.surface").each(function(d){h.select(this).call(m,d,f,{hovered:!1})})})},styleOne:m}},{"../../components/color":615,"../../lib":749,"../bar/uniform_text":906,"../sunburst/helpers":1272,d3:169}],1305:[function(b,F,C){C=b("../box/attributes");b=b("../../lib/extend").extendFlat;F.exports={y:C.y,x:C.x,x0:C.x0,y0:C.y0,name:b({},C.name,{}),orientation:b({},C.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",
dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:C.fillcolor,points:b({},C.boxpoints,{}),jitter:b({},
C.jitter,{}),pointpos:b({},C.pointpos,{}),width:b({},C.width,{}),marker:C.marker,text:C.text,hovertext:C.hovertext,hovertemplate:C.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},
color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:C.offsetgroup,alignmentgroup:C.alignmentgroup,selected:C.selected,unselected:C.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":739,"../box/attributes":915}],1306:[function(b,F,C){function m(k,
p,n,c){function f(v){var w=q[v];w="multicategory"===n.type?n.r2c(w):n.d2c(w,0,k[p.valLetter+"calendar"]);return w===g?u[v]:w}var d=k.spanmode,q=k.span||[],r=[p.min,p.max],u=[p.min-2*c,p.max+2*c];c="soft"===d?u:"hard"===d?r:[f(0),f(1)];d={type:"linear",range:c};l.setConvert(d);d.cleanRange();return c}var h=b("../../lib"),l=b("../../plots/cartesian/axes"),e=b("../box/calc"),a=b("./helpers"),g=b("../../constants/numerical").BADNUM;F.exports=function(k,p){var n=e(k,p);if(n[0].t.empty)return n;for(var c=
k._fullLayout,f=l.getFromId(k,p["h"===p.orientation?"xaxis":"yaxis"]),d=Infinity,q=-Infinity,r=0,u=0,v=0;v<n.length;v++){var w=n[v],y=w.pts.map(a.extractVal),D=w;var x=w;var E=x.max-x.min;if(E)if(p.bandwidth)x=Math.max(p.bandwidth,E/1E4);else{var B=y.length,t=h.stdev(y,B-1,x.mean);x=Math.max(1.059*Math.min(t,(x.q3-x.q1)/1.349)*Math.pow(B,-.2),E/100)}else x=p.bandwidth?p.bandwidth:0;E=D.bandwidth=x;D=w.span=m(p,w,f,E);if(w.min===w.max&&0===E)D=w.span=[w.min,w.max],w.density=[{v:1,t:D[0]}],w.bandwidth=
E,r=Math.max(r,1);else{x=D[1]-D[0];B=Math.ceil(x/(E/3));x/=B;if(!isFinite(x)||!isFinite(B))return h.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;E=a.makeKDE(w,p,y);w.density=Array(B);B=0;for(t=D[0];t<D[1]+x/2;B++,t+=x){var G=E(t);w.density[B]={v:G,t};r=Math.max(r,G)}}u=Math.max(u,y.length);d=Math.min(d,D[0]);q=Math.max(q,D[1])}d=l.findExtremes(f,[d,q],{padded:!0});p._extremes[f._id]=d;p.width?n[0].t.maxKDE=r:(c=c._violinScaleGroupStats,p=p.scalegroup,(f=c[p])?(f.maxKDE=
Math.max(f.maxKDE,r),f.maxCount=Math.max(f.maxCount,u)):c[p]={maxKDE:r,maxCount:u});n[0].t.labels.kde=h._(k,"kde:");return n}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../box/calc":916,"./helpers":1309}],1307:[function(b,F,C){var m=b("../box/cross_trace_calc").setPositionOffset,h=["v","h"];F.exports=function(l,e){var a=l.calcdata,g=e.xaxis;e=e.yaxis;for(var k=0;k<h.length;k++){for(var p=h[k],n="h"===p?e:g,c=[],f=0;f<a.length;f++){var d=a[f],q=d[0].t;d=d[0].trace;
!0!==d.visible||"violin"!==d.type||q.empty||d.orientation!==p||d.xaxis!==g._id||d.yaxis!==e._id||c.push(f)}m("violin",l,c,n)}}},{"../box/cross_trace_calc":917}],1308:[function(b,F,C){var m=b("../../lib"),h=b("../../components/color"),l=b("../box/defaults"),e=b("./attributes");F.exports=function(a,g,k,p){function n(u,v){return m.coerce(a,g,e,u,v)}function c(u,v){return m.coerce2(a,g,e,u,v)}l.handleSampleDefaults(a,g,n,p);if(!1!==g.visible){n("bandwidth");n("side");n("width")||(n("scalegroup",g.name),
n("scalemode"));p=n("span");var f;Array.isArray(p)&&(f="manual");n("spanmode",f);f=n("line.color",(a.marker||{}).color||k);k=n("line.width");var d=n("fillcolor",h.addOpacity(g.line.color,.5));l.handlePointsDefaults(a,g,n,{prefix:""});p=c("box.width");d=c("box.fillcolor",d);var q=c("box.line.color",f),r=c("box.line.width",k);n("box.visible",!!(p||d||q||r))||(g.box={visible:!1});f=c("meanline.color",f);k=c("meanline.width",k);n("meanline.visible",!(!f&&!k))||(g.meanline={visible:!1})}}},{"../../components/color":615,
"../../lib":749,"../box/defaults":918,"./attributes":1305}],1309:[function(b,F,C){var m=b("../../lib");C.makeKDE=function(h,l,e){var a=e.length,g=h.bandwidth,k=1/(a*g);return function(p){for(var n=0,c=0;c<a;c++){var f=(p-e[c])/g;n+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*f*f)}return k*n}};C.getPositionOnKdePath=function(h,l,e){if("h"===l.orientation){var a="y";var g="x"}else a="x",g="y";e=m.findPointOnPath(h.path,e,g,{pathLength:h.pathLength});h=h.posCenterPx;a=e[a];return[a,"both"===l.side?2*h-a:h]};
C.getKdeValue=function(h,l,e){var a=h.pts.map(C.extractVal);return C.makeKDE(h,l,a)(e)/h.posDensityScale};C.extractVal=function(h){return h.v}},{"../../lib":749}],1310:[function(b,F,C){var m=b("../../lib"),h=b("../../plots/cartesian/axes"),l=b("../box/hover"),e=b("./helpers");F.exports=function(a,g,k,p,n){var c=a.cd,f=c[0].trace,d=f.hoveron,q=-1!==d.indexOf("violins"),r=-1!==d.indexOf("kde"),u=[],v;if(q||r){var w=l.hoverOnBoxes(a,g,k,p);if(r&&0<w.length){var y=a.xa,D=a.ya;if("h"===f.orientation){var x=
g;r="y";var E=D;var B="x"}else x=k,r="x",E=y,B="y",y=D;var t=c[a.index];if(x>=t.span[0]&&x<=t.span[1]){var G=m.extendFlat({},a);D=y.c2p(x,!0);var I=e.getKdeValue(t,f,x);t=e.getPositionOnKdePath(t,f,D);var L=E._offset;E=E._length;G[r+"0"]=t[0];G[r+"1"]=t[1];G[B+"0"]=G[B+"1"]=D;G[B+"Label"]=B+": "+h.hoverLabelText(y,x)+", "+c[0].t.labels.kde+" "+I.toFixed(3);G.spikeDistance=w[0].spikeDistance;c=r+"Spike";G[c]=w[0][c];w[0].spikeDistance=void 0;w[0][c]=void 0;G.hovertemplate=!1;u.push(G);G={stroke:a.color};
G[r+"1"]=m.constrain(L+t[0],L,L+E);G[r+"2"]=m.constrain(L+t[1],L,L+E);G[B+"1"]=G[B+"2"]=y._offset+D}}q&&(u=u.concat(w))}-1!==d.indexOf("points")&&(v=l.hoverOnPoints(a,g,k));a=n.selectAll(".violinline-"+f.uid).data(G?[0]:[]);a.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5);a.exit().remove();a.attr(G);if("closest"===p)return v?[v]:u;v&&u.push(v);return u}},{"../../lib":749,"../../plots/cartesian/axes":797,"../box/hover":920,"./helpers":1309}],1311:[function(b,F,C){F.exports=
{attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../box/select"),moduleType:"trace",name:"violin",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":810,"../box/defaults":918,"../box/select":925,"../scatter/style":1178,"./attributes":1305,"./calc":1306,"./cross_trace_calc":1307,"./defaults":1308,"./hover":1310,"./layout_attributes":1312,"./layout_defaults":1313,"./plot":1314,"./style":1315}],1312:[function(b,F,C){C=b("../box/layout_attributes");b=b("../../lib").extendFlat;F.exports={violinmode:b({},C.boxmode,{}),violingap:b({},C.boxgap,{}),violingroupgap:b({},C.boxgroupgap,{})}},{"../../lib":749,"../box/layout_attributes":922}],
1313:[function(b,F,C){var m=b("../../lib"),h=b("./layout_attributes"),l=b("../box/layout_defaults");F.exports=function(e,a,g){l._supply(e,a,g,function(k,p){return m.coerce(e,a,h,k,p)},"violin")}},{"../../lib":749,"../box/layout_defaults":923,"./layout_attributes":1312}],1314:[function(b,F,C){var m=b("d3"),h=b("../../lib"),l=b("../../components/drawing"),e=b("../box/plot"),a=b("../scatter/line_points"),g=b("./helpers");F.exports=function(k,p,n,c){function f(u){u=a(u,{xaxis:q,yaxis:r,connectGaps:!0,
baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return l.smoothopen(u[0],1)}var d=k._fullLayout,q=p.xaxis,r=p.yaxis;h.makeTraceGroups(c,n,"trace violins").each(function(u){var v=m.select(this);u=u[0];var w=u.t,y=u.trace;if(!0!==y.visible||w.empty)v.remove();else{var D=w.bPos,x=w.bdPos,E=p[w.valLetter+"axis"],B=p[w.posLetter+"axis"],t="both"===y.side,G=t||"positive"===y.side,I=t||"negative"===y.side;u=v.selectAll("path.violin").data(h.identity);u.enter().append("path").style("vector-effect",
"non-scaling-stroke").attr("class","violin");u.exit().remove();u.each(function(N){var H=m.select(this),J=N.density,O=J.length,Q=B.c2l(N.pos+D,!0),U=B.l2p(Q);if(y.width)var P=w.maxKDE/x;else P=d._violinScaleGroupStats[y.scalegroup],P="count"===y.scalemode?P.maxKDE/x*(P.maxCount/N.pts.length):P.maxKDE/x;var V;if(G){var Y=Array(O);for(V=0;V<O;V++){var ba=Y[V]={};ba[w.posLetter]=Q+J[V].v/P;ba[w.valLetter]=E.c2l(J[V].t,!0)}var ea=f(Y)}if(I){Y=Array(O);var ca=0;for(V=O-1;ca<O;ca++,V--)ba=Y[ca]={},ba[w.posLetter]=
Q-J[V].v/P,ba[w.valLetter]=E.c2l(J[V].t,!0);ca=f(Y)}t?ea=ea+"L"+ca.substr(1)+"Z":(Q=[U,E.c2p(J[0].t)],J=[U,E.c2p(J[O-1].t)],"h"===y.orientation&&(Q.reverse(),J.reverse()),ea=G?"M"+Q+"L"+ea.substr(1)+"L"+J:"M"+J+"L"+ca.substr(1)+"L"+Q);H.attr("d",ea);N.posCenterPx=U;N.posDensityScale=P*x;N.path=H.node();N.pathLength=N.path.getTotalLength()/(t?2:1)});var L=y.box;u=L.width;L=(L.line||{}).width;t?(u*=x,L=0):G?(u=[0,x*u/2],L*={x:1,y:-1}[w.posLetter]):(u=[x*u/2,0],L*={x:-1,y:1}[w.posLetter]);e.plotBoxAndWhiskers(v,
{pos:B,val:E},y,{bPos:D,bdPos:u,bPosPxOffset:L});e.plotBoxMean(v,{pos:B,val:E},y,{bPos:D,bdPos:u,bPosPxOffset:L});if(!y.box.visible&&y.meanline.visible)var M=h.identity;M=v.selectAll("path.meanline").data(M||[]);M.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");M.exit().remove();M.each(function(N){var H=E.c2p(N.mean,!0);N=g.getPositionOnKdePath(N,y,H);m.select(this).attr("d","h"===y.orientation?"M"+H+","+N[0]+"V"+N[1]:"M"+N[0]+","+H+
"H"+N[1])});e.plotPoints(v,{x:q,y:r},y,w)}})}},{"../../components/drawing":637,"../../lib":749,"../box/plot":924,"../scatter/line_points":1169,"./helpers":1309,d3:169}],1315:[function(b,F,C){var m=b("d3"),h=b("../../components/color"),l=b("../scatter/style").stylePoints;F.exports=function(e){var a=m.select(e).selectAll("g.trace.violins");a.style("opacity",function(g){return g[0].trace.opacity});a.each(function(g){g=g[0].trace;var k=m.select(this),p=g.box||{},n=p.line||{},c=g.meanline||{},f=c.width;
k.selectAll("path.violin").style("stroke-width",g.line.width+"px").call(h.stroke,g.line.color).call(h.fill,g.fillcolor);k.selectAll("path.box").style("stroke-width",n.width+"px").call(h.stroke,n.color).call(h.fill,p.fillcolor);p={"stroke-width":f+"px","stroke-dasharray":2*f+"px,"+f+"px"};k.selectAll("path.mean").style(p).call(h.stroke,c.color);k.selectAll("path.meanline").style(p).call(h.stroke,c.color);l(k,g,e)})}},{"../../components/color":615,"../scatter/style":1178,d3:169}],1316:[function(b,F,
C){C=b("../../components/colorscale/attributes");var m=b("../isosurface/attributes"),h=b("../surface/attributes"),l=b("../../plots/attributes"),e=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;F=F.exports=b(e({x:m.x,y:m.y,z:m.z,value:m.value,isomin:m.isomin,isomax:m.isomax,surface:m.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:m.slices,caps:m.caps,text:m.text,hovertext:m.hovertext,hovertemplate:m.hovertemplate},
C("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:m.colorbar,opacity:m.opacity,opacityscale:h.opacityscale,lightposition:m.lightposition,lighting:m.lighting,flatshading:m.flatshading,contour:m.contour,hoverinfo:e({},l.hoverinfo),showlegend:e({},l.showlegend,{dflt:!1})}),"calc","nested");F.x.editType=F.y.editType=F.z.editType=F.value.editType="calc+clearAxisTypes";F.transforms=void 0},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,
"../../plots/attributes":794,"../isosurface/attributes":1091,"../surface/attributes":1278}],1317:[function(b,F,C){function m(n,c,f){this.scene=n;this.uid=f;this.mesh=c;this.name="";this.data=null;this.showContour=!1}var h=b("gl-mesh3d"),l=b("../../lib/gl_format_color").parseColorScale,e=b("../../lib/str2rgbarray"),a=b("../../components/colorscale").extractOpts,g=b("../../plots/gl3d/zip3"),k=b("../isosurface/convert").findNearestOnAxis,p=b("../isosurface/convert").generateIsoMeshes;b=m.prototype;b.handlePick=
function(n){if(n.object===this.mesh){var c=n.data.index,f=this.data._meshY[c],d=this.data._meshZ[c],q=this.data._Ys.length,r=this.data._Zs.length;c=k(this.data._meshX[c],this.data._Xs).id;f=k(f,this.data._Ys).id;d=k(d,this.data._Zs).id;q=n.index=d+r*f+r*q*c;n.traceCoordinate=[this.data._meshX[q],this.data._meshY[q],this.data._meshZ[q],this.data._value[q]];r=this.data.hovertext||this.data.text;Array.isArray(r)&&void 0!==r[q]?n.textLabel=r[q]:r&&(n.textLabel=r);return!0}};b.update=function(n){function c(q,
r,u,v){return r.map(function(w){return q.d2l(w,0,v)*u})}var f=this.scene,d=f.fullSceneLayout;this.data=p(n);f=g(c(d.xaxis,n._meshX,f.dataScale[0],n.xcalendar),c(d.yaxis,n._meshY,f.dataScale[1],n.ycalendar),c(d.zaxis,n._meshZ,f.dataScale[2],n.zcalendar));d=g(n._meshI,n._meshJ,n._meshK);f={positions:f,cells:d,lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,
vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,opacityscale:n.opacityscale,contourEnable:n.contour.show,contourColor:e(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading};d=a(n);f.vertexIntensity=n._meshIntensity;f.vertexIntensityBounds=[d.min,d.max];f.colormap=l(n);this.mesh.update(f)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};F.exports=function(n,c){var f=
h({gl:n.glplot.gl}),d=new m(n,f,c.uid);f._trace=d;d.update(c);n.glplot.add(f);return d}},{"../../components/colorscale":627,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/gl3d/zip3":850,"../isosurface/convert":1093,"gl-mesh3d":292}],1318:[function(b,F,C){var m=b("../../lib"),h=b("./attributes"),l=b("../isosurface/defaults").supplyIsoDefaults,e=b("../surface/defaults").opacityscaleDefaults;F.exports=function(a,g,k,p){function n(c,f){return m.coerce(a,g,h,c,f)}l(a,g,k,p,n);
e(a,g,p,n)}},{"../../lib":749,"../isosurface/defaults":1094,"../surface/defaults":1281,"./attributes":1316}],1319:[function(b,F,C){F.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"volume",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"../isosurface/calc":1092,"./attributes":1316,"./convert":1317,"./defaults":1318}],
1320:[function(b,F,C){function m(p){return{marker:{color:k({},h.marker.color,{arrayOk:!1,editType:"style"}),line:{color:k({},h.marker.line.color,{arrayOk:!1,editType:"style"}),width:k({},h.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}var h=b("../bar/attributes");C=b("../scatter/attributes").line;var l=b("../../plots/attributes"),e=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,
g=b("./constants"),k=b("../../lib/extend").extendFlat;b=b("../../components/color");F.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:h.x,x0:h.x0,dx:h.dx,y:h.y,y0:h.y0,dy:h.dy,hovertext:h.hovertext,hovertemplate:e({},{keys:g.eventDataKeys}),hoverinfo:k({},l.hoverinfo,{flags:"name x y text initial delta final".split(" ")}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",
arrayOk:!1},texttemplate:a({editType:"plot"},{keys:g.eventDataKeys.concat(["label"])}),text:h.text,textposition:h.textposition,insidetextanchor:h.insidetextanchor,textangle:h.textangle,textfont:h.textfont,insidetextfont:h.insidetextfont,outsidetextfont:h.outsidetextfont,constraintext:h.constraintext,cliponaxis:h.cliponaxis,orientation:h.orientation,offset:h.offset,width:h.width,increasing:m("increasing"),decreasing:m("decreasing"),totals:m("intermediate sums and total"),connector:{line:{color:k({},
C.color,{dflt:b.defaultLine}),width:k({},C.width,{editType:"plot"}),dash:C.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:h.offsetgroup,alignmentgroup:h.alignmentgroup}},{"../../components/color":615,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155,"./constants":1322}],
1321:[function(b,F,C){function m(k){return"a"===k||"absolute"===k}function h(k){return"t"===k||"total"===k}var l=b("../../plots/cartesian/axes"),e=b("../../lib").mergeArray,a=b("../scatter/calc_selection"),g=b("../../constants/numerical").BADNUM;F.exports=function(k,p){var n=l.getFromId(k,p.xaxis||"x"),c=l.getFromId(k,p.yaxis||"y");"h"===p.orientation?(k=n.makeCalcdata(p,"x"),n=c.makeCalcdata(p,"y")):(k=c.makeCalcdata(p,"y"),n=n.makeCalcdata(p,"x"));c=Math.min(n.length,k.length);for(var f=Array(c),
d=0,q,r=!1,u=0;u<c;u++){q=k[u]||0;var v=!1;(k[u]!==g||h(p.measure[u])||m(p.measure[u]))&&u+1<c&&(k[u+1]!==g||h(p.measure[u+1])||m(p.measure[u+1]))&&(v=!0);v=f[u]={i:u,p:n[u],s:q,rawS:q,cNext:v};m(p.measure[u])?(d=v.s,v.isSum=!0,v.dir="totals",v.s=d):h(p.measure[u])?(v.isSum=!0,v.dir="totals",v.s=d):(v.isSum=!1,v.dir=0>v.rawS?"decreasing":"increasing",q=v.s,v.s=d+q,d+=q);"totals"===v.dir&&(r=!0);p.ids&&(v.id=String(p.ids[u]));v.v=(p.base||0)+d}f.length&&(f[0].hasTotals=r);e(p.text,f,"tx");e(p.hovertext,
f,"htx");a(f,p);return f}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157}],1322:[function(b,F,C){F.exports={eventDataKeys:["initial","delta","final"]}},{}],1323:[function(b,F,C){var m=b("../bar/cross_trace_calc").setGroupPositions;F.exports=function(h,l){var e=h._fullLayout,a=h._fullData,g=h.calcdata,k=l.xaxis,p=l.yaxis;l=[];var n=[],c=[],f;for(f=0;f<a.length;f++){var d=a[f];if(!0===d.visible&&d.xaxis===k._id&&d.yaxis===p._id&&"waterfall"===
d.type){var q=g[f];"h"===d.orientation?c.push(q):n.push(q);l.push(q)}}q={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};m(h,k,p,n,q);m(h,p,k,c,q);for(f=0;f<l.length;f++)for(q=l[f],h=0;h<q.length;h++)k=q[h],!1===k.isSum&&(k.s0+=0===h?0:q[h-1].s),h+1<q.length&&(q[h].nextP0=q[h+1].p0,q[h].nextS0=q[h+1].s0)}},{"../bar/cross_trace_calc":893}],1324:[function(b,F,C){function m(c,f,d){c(f+".marker.color",d);c(f+".marker.line.color",k.defaultLine);c(f+".marker.line.width")}
var h=b("../../lib"),l=b("../bar/defaults").handleGroupingDefaults,e=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),g=b("./attributes"),k=b("../../components/color");b=b("../../constants/delta.js");var p=b.INCREASING.COLOR,n=b.DECREASING.COLOR;F.exports={supplyDefaults:function(c,f,d,q){function r(u,v){return h.coerce(c,f,g,u,v)}a(c,f,q,r)?(r("measure"),r("orientation",f.x&&!f.y?"h":"v"),r("base"),r("offset"),r("width"),r("text"),r("hovertext"),r("hovertemplate"),d=r("textposition"),
e(c,f,q,r,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==f.textposition&&(r("texttemplate"),f.texttemplate||r("textinfo")),m(r,"increasing",p),m(r,"decreasing",n),m(r,"totals","#4499FF"),r("connector.visible")&&(r("connector.mode"),r("connector.line.width")&&(r("connector.line.color"),r("connector.line.dash")))):f.visible=!1},crossTraceDefaults:function(c,f){function d(v){return h.coerce(r._input,
r,g,v)}if("group"===f.waterfallmode)for(var q=0;q<c.length;q++){var r=c[q];var u=r._input;l(u,r,f,d)}}}},{"../../components/color":615,"../../constants/delta.js":718,"../../lib":749,"../bar/defaults":894,"../scatter/xy_defaults":1181,"./attributes":1320}],1325:[function(b,F,C){F.exports=function(m,h){m.x="xVal"in h?h.xVal:h.x;m.y="yVal"in h?h.yVal:h.y;"initial"in h&&(m.initial=h.initial);"delta"in h&&(m.delta=h.delta);"final"in h&&(m.final=h.final);h.xa&&(m.xaxis=h.xa);h.ya&&(m.yaxis=h.ya);return m}},
{}],1326:[function(b,F,C){function m(k,p){var n=k[p.dir].marker;k=n.color;p=n.line.color;n=n.line.width;if(l(k))return k;if(l(p)&&n)return p}var h=b("../../plots/cartesian/axes").hoverLabelText,l=b("../../components/color").opacity,e=b("../bar/hover").hoverOnBars;b=b("../../constants/delta.js");var a=b.INCREASING.SYMBOL,g=b.DECREASING.SYMBOL;F.exports=function(k,p,n,c){if(p=e(k,p,n,c)){var f=p.cd;n=f[0].trace;var d=(c="h"===n.orientation)?k.xa:k.ya;k=f[p.index];f=k.isSum?k.b+k.s:k.rawS;if(!k.isSum){p.initial=
k.b+k.s-f;p.delta=f;p.final=p.initial+p.delta;var q=h(d,Math.abs(p.delta));p.deltaLabel=0>f?"("+q+")":q;p.finalLabel=h(d,p.final);p.initialLabel=h(d,p.initial)}q=k.hi||n.hoverinfo;d=[];if(q&&"none"!==q&&"skip"!==q){var r="all"===q,u=q.split("+");q=function(v){return r||-1!==u.indexOf(v)};k.isSum||(!q("final")||(c?q("x"):q("y"))||d.push(p.finalLabel),q("delta")&&(0>f?d.push(p.deltaLabel+" "+g):d.push(p.deltaLabel+" "+a)),q("initial")&&d.push("Initial: "+p.initialLabel))}d.length&&(p.extraText=d.join("\x3cbr\x3e"));
p.color=m(n,k);return[p]}}},{"../../components/color":615,"../../constants/delta.js":718,"../../plots/cartesian/axes":797,"../bar/hover":897}],1327:[function(b,F,C){F.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),
eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/select":902,"./attributes":1320,"./calc":1321,"./cross_trace_calc":1323,"./defaults":1324,"./event_data":1325,"./hover":1326,"./layout_attributes":1328,"./layout_defaults":1329,"./plot":1330,"./style":1331}],1328:[function(b,F,C){F.exports=
{waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1329:[function(b,F,C){var m=b("../../lib"),h=b("./layout_attributes");F.exports=function(l,e,a){for(var g=!1,k=0;k<a.length;k++){var p=a[k];if(p.visible&&"waterfall"===p.type){g=!0;break}}g&&(m.coerce(l,e,h,"waterfallmode",void 0),m.coerce(l,e,h,"waterfallgap",.2),m.coerce(l,
e,h,"waterfallgroupgap",void 0))}},{"../../lib":749,"./layout_attributes":1328}],1330:[function(b,F,C){function m(p,n,c,f){var d=n.xaxis,q=n.yaxis;l.makeTraceGroups(f,c,"trace bars").each(function(r){var u=h.select(this);r=r[0].trace;u=l.ensureSingle(u,"g","lines");if(r.connector&&r.connector.visible){var v="h"===r.orientation,w=r.connector.mode;u=u.selectAll("g.line").data(l.identity);u.enter().append("g").classed("line",!0);u.exit().remove();var y=u.size();u.each(function(D,x){if(x===y-1||D.cNext){var E=
[];var B=[];var t=v?d:q,G=v?q:d;E[0]=t.c2p(D.s0,!0);B[0]=G.c2p(D.p0,!0);E[1]=t.c2p(D.s1,!0);B[1]=G.c2p(D.p1,!0);E[2]=t.c2p(D.nextS0,!0);B[2]=G.c2p(D.nextP0,!0);B=v?[E,B]:[B,E];E=B[0];B=B[1];t="";E[0]!==a&&B[0]!==a&&E[1]!==a&&B[1]!==a&&("spanning"===w&&!D.isSum&&0<x&&(t=v?t+("M"+E[0]+","+B[1]+"V"+B[0]):t+("M"+E[1]+","+B[0]+"H"+E[0])),"between"!==w&&(D.isSum||x<y-1)&&(t=v?t+("M"+E[1]+","+B[0]+"V"+B[1]):t+("M"+E[0]+","+B[1]+"H"+E[1])),E[2]!==a&&B[2]!==a&&(t=v?t+("M"+E[1]+","+B[1]+"V"+B[2]):t+("M"+E[1]+
","+B[1]+"H"+E[2])));""===t&&(t="M0,0Z");l.ensureSingle(h.select(this),"path").attr("d",t).call(e.setClipUrl,n.layerClipId,p)}})}else u.remove()})}var h=b("d3"),l=b("../../lib"),e=b("../../components/drawing"),a=b("../../constants/numerical").BADNUM,g=b("../bar/plot"),k=b("../bar/uniform_text").clearMinTextSize;F.exports=function(p,n,c,f){var d=p._fullLayout;k("waterfall",d);g.plot(p,n,c,f,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap});m(p,n,c,f)}},{"../../components/drawing":637,
"../../constants/numerical":724,"../../lib":749,"../bar/plot":901,"../bar/uniform_text":906,d3:169}],1331:[function(b,F,C){var m=b("d3"),h=b("../../components/drawing"),l=b("../../components/color"),e=b("../../constants/interactions").DESELECTDIM;C=b("../bar/style");var a=b("../bar/uniform_text").resizeText,g=C.styleTextPoints;F.exports={style:function(k,p,n){p=n?n:m.select(k).selectAll("g.waterfalllayer").selectAll("g.trace");a(k,p,"waterfall");p.style("opacity",function(c){return c[0].trace.opacity});
p.each(function(c){var f=m.select(this),d=c[0].trace;f.selectAll(".point \x3e path").each(function(q){if(!q.isBlank){var r=d[q.dir].marker;m.select(this).call(l.fill,r.color).call(l.stroke,r.line.color).call(h.dashLine,r.line.dash,r.line.width).style("opacity",d.selectedpoints&&!q.selected?e:1)}});g(f,d,k);f.selectAll(".lines").each(function(){var q=d.connector.line;h.lineGroupStyle(m.select(this).selectAll("path"),q.width,q.color,q.dash)})})}}},{"../../components/color":615,"../../components/drawing":637,
"../../constants/interactions":723,"../bar/style":904,"../bar/uniform_text":906,d3:169}],1332:[function(b,F,C){function m(q,r,u,v){if(v.enabled){var w=v.target,y=k.nestedProperty(r,w),D=y.get();q=g.getDataConversions(q,r,w,D);q=h(v,q);for(var x=Array(u.length),E=0;E<u.length;E++)x[E]=q(D,u[E]);y.set(x);"count"===v.func&&k.pushUnique(r._arrayAttrs,w)}}function h(q,r){var u=r.d2c,v=r.c2d;switch(q.func){case "count":return l;case "first":return e;case "last":return a;case "sum":return function(w,y){for(var D=
0,x=0;x<y.length;x++){var E=u(w[y[x]]);E!==c&&(D+=E)}return v(D)};case "avg":return function(w,y){for(var D=0,x=0,E=0;E<y.length;E++){var B=u(w[y[E]]);B!==c&&(D+=B,x++)}return x?v(D/x):c};case "min":return function(w,y){for(var D=Infinity,x=0;x<y.length;x++){var E=u(w[y[x]]);E!==c&&(D=Math.min(D,E))}return Infinity===D?c:v(D)};case "max":return function(w,y){for(var D=-Infinity,x=0;x<y.length;x++){var E=u(w[y[x]]);E!==c&&(D=Math.max(D,E))}return-Infinity===D?c:v(D)};case "range":return function(w,
y){for(var D=Infinity,x=-Infinity,E=0;E<y.length;E++){var B=u(w[y[E]]);B!==c&&(D=Math.min(D,B),x=Math.max(x,B))}return-Infinity===x||Infinity===D?c:v(x-D)};case "change":return function(w,y){var D=u(w[y[0]]);w=u(w[y[y.length-1]]);return D===c||w===c?c:v(w-D)};case "median":return function(w,y){for(var D=[],x=0;x<y.length;x++){var E=u(w[y[x]]);E!==c&&D.push(E)}if(!D.length)return c;D.sort(k.sorterAsc);w=(D.length-1)/2;return v((D[Math.floor(w)]+D[Math.ceil(w)])/2)};case "mode":return function(w,y){for(var D=
{},x=0,E=c,B=0;B<y.length;B++){var t=u(w[y[B]]);if(t!==c){var G=D[t]=(D[t]||0)+1;G>x&&(x=G,E=t)}}return x?v(E):c};case "rms":return function(w,y){for(var D=0,x=0,E=0;E<y.length;E++){var B=u(w[y[E]]);B!==c&&(D+=B*B,x++)}return x?v(Math.sqrt(D/x)):c};case "stddev":return function(w,y){var D=0,x=0,E=1,B=c,t;for(t=0;t<y.length&&B===c;t++)B=u(w[y[t]]);if(B===c)return c;for(;t<y.length;t++){var G=u(w[y[t]]);G!==c&&(G-=B,D+=G,x+=G*G,E++)}return(w="sample"===q.funcmode?E-1:E)?Math.sqrt((x-D*D/E)/w):0}}}function l(q,
r){return r.length}function e(q,r){return q[r[0]]}function a(q,r){return q[r[r.length-1]]}var g=b("../plots/cartesian/axes"),k=b("../lib"),p=b("../plot_api/plot_schema"),n=b("./helpers").pointsAccessorFunction,c=b("../constants/numerical").BADNUM;C.moduleType="transform";C.name="aggregate";var f=C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",
editType:"calc"},func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},d=f.aggregations;C.supplyDefaults=function(q,r){function u(t,G){return k.coerce(x[w],E,d,t,G)}var v={},w;if(!k.coerce(q,v,f,"enabled",void 0))return v;r=p.findArrayAttributes(r);
var y={};for(w=0;w<r.length;w++)y[r[w]]=1;var D=k.coerce(q,v,f,"groups",void 0);if(!Array.isArray(D)){if(!y[D])return v.enabled=!1,v;y[D]=0}var x=q.aggregations||[];q=v.aggregations=Array(x.length);for(w=0;w<x.length;w++){var E={_index:w};D=u("target");var B=u("func");u("enabled")&&D&&(y[D]||"count"===B&&void 0===y[D])?("stddev"===B&&u("funcmode"),y[D]=0,q[w]=E):q[w]={enabled:!1,_index:w}}for(w=0;w<r.length;w++)y[r[w]]&&q.push({target:r[w],func:d.func.dflt,enabled:!0,_index:-1});return v};C.calcTransform=
function(q,r,u){if(u.enabled){var v=u.groups,w=k.getTargetArray(r,{target:v});if(w){var y,D={},x={},E=[],B=n(r.transforms,u),t=w.length;r._length&&(t=Math.min(t,r._length));for(y=0;y<t;y++){var G=w[y];var I=D[G];void 0===I?(D[G]=E.length,I=[y],E.push(I),x[D[G]]=B(y)):(E[I].push(y),x[D[G]]=(x[D[G]]||[]).concat(B(y)))}u._indexToPoints=x;u=u.aggregations;for(y=0;y<u.length;y++)m(q,r,E,u[y]);"string"===typeof v&&m(q,r,E,{target:v,func:"first",enabled:!0});r._length=E.length}}}},{"../constants/numerical":724,
"../lib":749,"../plot_api/plot_schema":786,"../plots/cartesian/axes":797,"./helpers":1335}],1333:[function(b,F,C){function m(n,c,f){var d=n.operation,q=n.value,r=Array.isArray(q),u=function(y){return c(y,0,n.valuecalendar)},v=function(y){return c(y,0,f)},w;-1!==g.indexOf(d)?w=r?u(q[0]):u(q):-1!==k.indexOf(d)?w=r?[u(q[0]),u(q[1])]:[u(q),u(q)]:-1!==p.indexOf(d)&&(w=r?q.map(u):[u(q)]);switch(d){case "\x3d":return function(y){return v(y)===w};case "!\x3d":return function(y){return v(y)!==w};case "\x3c":return function(y){return v(y)<
w};case "\x3c\x3d":return function(y){return v(y)<=w};case "\x3e":return function(y){return v(y)>w};case "\x3e\x3d":return function(y){return v(y)>=w};case "[]":return function(y){y=v(y);return y>=w[0]&&y<=w[1]};case "()":return function(y){y=v(y);return y>w[0]&&y<w[1]};case "[)":return function(y){y=v(y);return y>=w[0]&&y<w[1]};case "(]":return function(y){y=v(y);return y>w[0]&&y<=w[1]};case "][":return function(y){y=v(y);return y<=w[0]||y>=w[1]};case ")(":return function(y){y=v(y);return y<w[0]||
y>w[1]};case "](":return function(y){y=v(y);return y<=w[0]||y>w[1]};case ")[":return function(y){y=v(y);return y<w[0]||y>=w[1]};case "{}":return function(y){return-1!==w.indexOf(v(y))};case "}{":return function(y){return-1===w.indexOf(v(y))}}}var h=b("../lib"),l=b("../registry"),e=b("../plots/cartesian/axes"),a=b("./helpers").pointsAccessorFunction;b=b("../constants/filter_ops");var g=b.COMPARISON_OPS,k=b.INTERVAL_OPS,p=b.SET_OPS;C.moduleType="transform";C.name="filter";C.attributes={enabled:{valType:"boolean",
dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(g).concat(k).concat(p),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};C.supplyDefaults=function(n){function c(q,r){return h.coerce(n,f,C.attributes,q,r)}var f={};if(c("enabled")){var d=c("target");if(h.isArrayOrTypedArray(d)&&0===d.length)return f.enabled=
!1,f;c("preservegaps");c("operation");c("value");d=l.getComponentMethod("calendars","handleDefaults");d(n,f,"valuecalendar",null);d(n,f,"targetcalendar",null)}return f};C.calcTransform=function(n,c,f){function d(t,G){for(var I=0;I<w.length;I++){var L=h.nestedProperty(c,w[I]);t(L,G)}}if(f.enabled){var q=h.getTargetArray(c,f);if(q){var r=f.target,u=q.length;c._length&&(u=Math.min(u,c._length));var v=f.targetcalendar,w=c._arrayAttrs,y=f.preservegaps;if("string"===typeof r){var D=h.nestedProperty(c,r+
"calendar").get();D&&(v=D)}n=e.getDataToCoordFunc(n,c,r,q);v=m(f,n,v);var x={};n={};r=0;if(y){var E=function(t){x[t.astr]=h.extendDeep([],t.get());t.set(Array(u))};D=function(t,G){var I=x[t.astr][G];t.get()[G]=I}}else E=function(t){x[t.astr]=h.extendDeep([],t.get());t.set([])},D=function(t,G){G=x[t.astr][G];t.get().push(G)};d(E);E=a(c.transforms,f);for(var B=0;B<u;B++)v(q[B])?(d(D,B),n[r++]=E(B)):y&&r++;f._indexToPoints=n;c._length=r}}}},{"../constants/filter_ops":720,"../lib":749,"../plots/cartesian/axes":797,
"../registry":880,"./helpers":1335}],1334:[function(b,F,C){var m=b("../lib"),h=b("../plot_api/plot_schema"),l=b("../plots/plots"),e=b("./helpers").pointsAccessorFunction;C.moduleType="transform";C.name="groupby";C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},
editType:"calc"},editType:"calc"};C.supplyDefaults=function(a,g,k){g={};if(!m.coerce(a,g,C.attributes,"enabled",void 0))return g;m.coerce(a,g,C.attributes,"groups",void 0);m.coerce(a,g,C.attributes,"nameformat",1<k._dataLength?"%{group} (%{trace})":"%{group}");k=a.styles;var p=g.styles=[];if(k)for(a=0;a<k.length;a++){var n=p[a]={};m.coerce(k[a],p[a],C.attributes.styles,"target");var c=m.coerce(k[a],p[a],C.attributes.styles,"value");m.isPlainObject(c)?n.value=m.extendDeep({},c):c&&delete n.value}return g};
C.transform=function(a,g){var k,p=[];for(k=0;k<a.length;k++){var n=void 0,c;var f=a[k];var d=g.transform;var q=g.transformIndex;var r=f.transforms[q].groups,u=e(f.transforms,d);if(m.isArrayOrTypedArray(r)&&0!==r.length){var v=m.filterUnique(r),w=Array(v.length),y=r.length,D=h.findArrayAttributes(f),x=d.styles||[],E={};for(c=0;c<x.length;c++)E[x[c].target]=x[c].value;d.styles&&(n=m.keyedContainer(d,"styles","target","value.name"));x={};var B={};for(c=0;c<v.length;c++){var t=v[c];x[t]=c;B[t]=0;var G=
w[c]=m.extendDeepNoArrays({},f);G._group=t;G.transforms[q]._indexToPoints={};var I=null;n&&(I=n.get(t));G.name=I||""===I?I:m.templateString(d.nameformat,{trace:f.name,group:t});I=G.transforms;G.transforms=[];for(t=0;t<I.length;t++)G.transforms[t]=m.extendDeepNoArrays({},I[t]);for(t=0;t<D.length;t++)m.nestedProperty(G,D[t]).set([])}for(c=0;c<D.length;c++){d=D[c];t=0;for(n=[];t<v.length;t++)n[t]=m.nestedProperty(w[t],d).get();d=m.nestedProperty(f,d).get();for(t=0;t<y;t++)n[x[r[t]]].push(d[t])}for(t=
0;t<y;t++)G=w[x[r[t]]],G.transforms[q]._indexToPoints[B[r[t]]]=u(t),B[r[t]]++;for(c=0;c<v.length;c++)t=v[c],G=w[c],l.clearExpandedTraceDefaultColors(G),m.extendDeepNoArrays(G,E[t]||{});f=w}else f=[f];for(q=0;q<f.length;q++)p.push(f[q])}return p}},{"../lib":749,"../plot_api/plot_schema":786,"../plots/plots":860,"./helpers":1335}],1335:[function(b,F,C){C.pointsAccessorFunction=function(m,h){for(var l,e,a=0;a<m.length;a++){l=m[a];if(l===h)break;l._indexToPoints&&!1!==l.enabled&&(e=l._indexToPoints)}return e?
function(g){return e[g]}:function(g){return[g]}}},{}],1336:[function(b,F,C){function m(g,k){switch(g.order){case "ascending":return function(p,n){p=k(p.v);n=k(n.v);return p===a?1:n===a?-1:p-n};case "descending":return function(p,n){p=k(p.v);n=k(n.v);return p===a?1:n===a?-1:n-p}}}var h=b("../lib"),l=b("../plots/cartesian/axes"),e=b("./helpers").pointsAccessorFunction,a=b("../constants/numerical").BADNUM;C.moduleType="transform";C.name="sort";C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},
target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};C.supplyDefaults=function(g){var k={};h.coerce(g,k,C.attributes,"enabled",void 0)&&(h.coerce(g,k,C.attributes,"target",void 0),h.coerce(g,k,C.attributes,"order",void 0));return k};C.calcTransform=function(g,k,p){if(p.enabled){var n=h.getTargetArray(k,p);if(n){var c=p.target,f=n.length;k._length&&(f=Math.min(f,
k._length));var d=k._arrayAttrs;c=l.getDataToCoordFunc(g,k,c,n);var q=f,r=Array(q);g=Array(q);var u;for(u=0;u<q;u++)r[u]={v:n[u],i:u};r.sort(m(p,c));for(u=0;u<q;u++)g[u]=r[u].i;n=e(k.transforms,p);c={};for(q=0;q<d.length;q++){u=h.nestedProperty(k,d[q]);var v=u.get(),w=Array(f);for(r=0;r<f;r++)w[r]=v[g[r]];u.set(w)}for(r=0;r<f;r++)c[r]=n(g[r]);p._indexToPoints=c;k._length=f}}}},{"../constants/numerical":724,"../lib":749,"../plots/cartesian/axes":797,"./helpers":1335}],1337:[function(b,F,C){C.version=
"1.55.2"},{}]},{},[26])(26)})};
shadow$provide[803]=function(W,z,X,R){function b(F){return F&&F.__esModule?F:{"default":F}}Object.defineProperty(R,"__esModule",{value:!0});R["default"]=void 0;W=b(z(801));z=b(z(802));z=(0,W["default"])(z["default"]);R["default"]=z};
var wda,Cda,Fda,fea,Eda,Nga,Pga,Qga,Wga,Zga,cha,dha,fha,gha,hha,nha,sha,tha;wda="transparency.components.plotly";Cda=function(a){"undefined"!==typeof setTimeout&&setTimeout(a,0)};
Fda=function(a){null==Eda&&(Eda=$APP.gm($APP.Do));Cda.call(null,function(){for(var b=$APP.y($APP.t(Eda)),c=null,d=0,e=0;;)if(e<d){var f=c.Sa(null,e);try{f.j?f.j(a):f.call(null,a)}catch(g){if(!(g instanceof Error))throw g;}e+=1}else if(b=$APP.y(b)){c=b;if($APP.Uj(c))b=$APP.zi(c),d=$APP.Ai(c),c=b,f=$APP.C(b),b=d,d=f;else{f=$APP.A(c);try{f.j?f.j(a):f.call(null,a)}catch(g){if(!(g instanceof Error))throw g;}b=$APP.B(c);c=null;d=0}e=0}else return null})};
fea=function(a){return a instanceof $APP.J?a.ea:null};Eda=null;Nga=new $APP.J(null,"data-type","data-type",-326421468);Pga=new $APP.J(null,"displaylogo","displaylogo",1531477828);Qga=new $APP.J(null,"filename","filename",-1428840783);Wga=new $APP.J(wda,"send-data-to-client","transparency.components.plotly/send-data-to-client",1896277780);Zga=new $APP.J(null,"modeBarButtonsToAdd","modeBarButtonsToAdd",792964880);$APP.$ga=new $APP.J(null,"displayModeBar","displayModeBar",-1187531817);
cha=new $APP.J(wda,"download-file","transparency.components.plotly/download-file",-676073443);$APP.gea=new $APP.J(null,"layout","layout",-2120940921);dha=new $APP.J(null,"lf","lf",1923784290);fha=new $APP.J(null,"click","click",1912301393);gha=new $APP.J(null,"data-\x3estring","data-\x3estring",-1527786836);hha=new $APP.J(null,"locale","locale",-2115712697);nha=new $APP.J(null,"cr+lf","cr+lf",486534798);$APP.wea=new $APP.J(null,"toImageButtonOptions","toImageButtonOptions",-347346271);
$APP.nea=new $APP.J(null,"y","y",-1757859776);$APP.mea=new $APP.J(null,"x","x",2099068185);$APP.xea=new $APP.J(null,"scale","scale",-230427353);$APP.yea=new $APP.J(null,"editable","editable",1930280326);sha=new $APP.J(null,"responsive","responsive",-1606632318);tha=new $APP.J(null,"download-event","download-event",577445774);$APP.qda("plotly");var wia=$APP.vz(803);[":newline must be one of [",$APP.Iq(",",$APP.vo(new $APP.m(null,2,[dha,"\n",nha,"\r\n"],null))),"]"].join("");var xia;$APP.Mea=wia.default;$APP.tC(cha,function(a){var b=$APP.F(a,0,null);a=$APP.F(a,1,null);var c=document.createElement("a");c.href=b;c.download=a;document.body.appendChild(c);c.click();document.body.removeChild(c);a=window.URL.revokeObjectURL;return a.j?a.j(b):a.call(null,b)});
$APP.HC(Wga,function(a,b){a=null!=a&&(a.la&64||$APP.v===a.va)?$APP.Q.ia($APP.X,a):a;a=$APP.H.ia(a,$APP.yC);$APP.F(b,0,null);var c=$APP.F(b,1,null),d=$APP.F(b,2,null);b=$APP.F(b,3,null);b=new Blob(new $APP.U(null,1,5,$APP.W,[b],null),$APP.PA(new $APP.m(null,1,[$APP.Z,$APP.q(d)?d:"text/plain"],null)));d=window.URL.createObjectURL;b=d.j?d.j(b):d.call(null,b);return new $APP.m(null,2,[$APP.yC,a,cha,new $APP.U(null,2,5,$APP.W,[b,c],null)],null)});
xia=new $APP.m(null,4,["width",857.1,"height",1E3,"path","m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z","transform","matrix(1 0 0 -1 0 850)"],
null);
$APP.vea=new $APP.m(null,7,[$APP.wea,new $APP.m(null,4,[$APP.aQ,"png",$APP.NT,560,$APP.FS,960,$APP.xea,2],null),Zga,new $APP.U(null,1,5,$APP.W,[function(a){var b=null!=a&&(a.la&64||$APP.v===a.va)?$APP.Q.ia($APP.X,a):a,c=$APP.H.o(b,gha,function(g){return JSON.stringify(g,null,1)});a=$APP.H.ia(b,Qga);var d=$APP.H.o(b,Nga,"application/json");b=$APP.H.ia(b,tha);var e=$APP.q(b)?b:new $APP.U(null,1,5,$APP.W,[Wga],null),f=$APP.q(a)?a:"plotly_data.json";return new $APP.m(null,4,[$APP.zz,"toData",$APP.Mga,$APP.PA.A(xia,
$APP.E([$APP.uY,fea])),$APP.SN,"Save data",fha,function(g){g=g.data;g=c.j?c.j(g):c.call(null,g);Fda(g);return $APP.rC($APP.Tk.A(e,f,$APP.E([d,g])))}],null)}($APP.P)],null),$APP.$ga,"hover",$APP.yea,!1,Pga,!1,sha,!0,hha,"en"],null);$APP.Cf.setLoaded(void 0);
}).call(this);